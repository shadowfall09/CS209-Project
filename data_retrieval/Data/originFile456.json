{"items":[{"tags":["java","spring-boot","jakarta-mail","connection-pooling"],"owner":{"account_id":22310428,"reputation":55,"user_id":20916403,"display_name":"rose pauline"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1683285557,"creation_date":1683285557,"question_id":76181618,"body_markdown":"I have used connection pooling to reuse store.connect(). It works for single user but for multiple users it is not working.\r\n\r\nFor multiple users it takes the 1st loaded user data for all other users.\r\nHow to fix this.\r\n\r\nBelow is the code,\r\n```\r\npublic class EmailListingController {\r\n\r\n\tprivate static EmailListingController instance = null;\r\n\tprivate static Store store = null;\r\n\r\n\tpublic EmailListingController() {\r\n\t\tsuper();\r\n\t}\r\n\r\n\tprivate EmailListingController(String host, String mailstoreType, String username, String originalPassword,\r\n\t\t\tint port, boolean auth, boolean security, User user) throws MessagingException {\r\n\t\tSystem.out.println(&quot;props + store connect&quot;);\r\n\t\tProperties properties = new Properties();\r\n\t\tproperties.put(&quot;mail.store.protocol&quot;, mailstoreType);\r\n\t\tproperties.put(&quot;mail.imaps.host&quot;, host);\r\n\t\tproperties.put(&quot;mail.imaps.port&quot;, port);\r\n\t\tproperties.put(&quot;mail.smtp.ssl.enable&quot;, security);\r\n\t\tSession session = Session.getInstance(properties);\r\n\t\tstore = session.getStore();\r\n\t\tstore.connect(username, originalPassword);\r\n\t}\r\n\r\n\tpublic static synchronized EmailListingController getInstance(String host, String mailstoreType, String username,\r\n\t\t\tString originalPassword, int port, boolean auth, boolean security, User user) throws MessagingException {\r\n\t\tSystem.out.println(&quot;instance&quot;);\r\n\t\tif (instance == null) {\r\n\t\t\tinstance = new EmailListingController(host, mailstoreType, username, originalPassword, port, auth, security,\r\n\t\t\t\t\tuser);\r\n\t\t}\r\n\t\treturn instance;\r\n\t}\r\n\r\n\t@GetMapping(&quot;/inbox/{userId}&quot;)\r\n\tpublic ResponseEntity test(@PathVariable(&quot;userId&quot;) Integer id) {\r\n\t\tOptional&lt;User&gt; user = userService.findById(id);\r\n\t\tList&lt;Email&gt; emailList = new ArrayList&lt;Email&gt;();\r\n\t\tif (user.isPresent()) {\r\n\t\t\tString username = user.get().getUserName();\r\n\t\t\tString pwd = user.get().getPassword();\r\n\r\n\t\t\tEmailListingController client = EmailListingController.getInstance(host, mailstoreType, username,\r\n\t\t\t\t\tpwd, port, auth, security, user.get());\r\n\t\t\tFolder folder = store.getFolder(&quot;inbox&quot;);\r\n\t\t\tfolder.open(Folder.READ_ONLY);\r\n\t\t\tString from;String subject;String message1;String cc;String to;String bcc;\r\n\t\t\tString[] toArray = null;String[] ccArray = null;String[] bccArray = null;Email email2;\r\n\t\t\tFetchProfile fp1 = new FetchProfile();\r\n\t\t\tfp1.add(FetchProfile.Item.ENVELOPE);\r\n\t\t\tfp1.add(IMAPFolder.FetchProfileItem.FLAGS);\r\n\t\t\tfp1.add(IMAPFolder.FetchProfileItem.CONTENT_INFO);\r\n\t\t\tfp1.add(UIDFolder.FetchProfileItem.UID);\r\n\t\t\tfolder.fetch(folder.getMessages(), fp1);\r\n\t\t\tfor (Message message : folder.getMessages()) {\r\n\t\t\t\tSystem.out.println(&quot;message&quot; + message.getSubject());\r\n\t\t\t}\r\n\t\t\treturn new ResponseEntity(emailList, HttpStatus.OK);\r\n\t\t}\r\n\t}\r\n}\r\n```\r\n\r\nAny help would be appreciated!","title":"how to use connection pooling to reuse store.connect() in java mail API for multiple users","body":"<p>I have used connection pooling to reuse store.connect(). It works for single user but for multiple users it is not working.</p>\n<p>For multiple users it takes the 1st loaded user data for all other users.\nHow to fix this.</p>\n<p>Below is the code,</p>\n<pre><code>public class EmailListingController {\n\n    private static EmailListingController instance = null;\n    private static Store store = null;\n\n    public EmailListingController() {\n        super();\n    }\n\n    private EmailListingController(String host, String mailstoreType, String username, String originalPassword,\n            int port, boolean auth, boolean security, User user) throws MessagingException {\n        System.out.println(&quot;props + store connect&quot;);\n        Properties properties = new Properties();\n        properties.put(&quot;mail.store.protocol&quot;, mailstoreType);\n        properties.put(&quot;mail.imaps.host&quot;, host);\n        properties.put(&quot;mail.imaps.port&quot;, port);\n        properties.put(&quot;mail.smtp.ssl.enable&quot;, security);\n        Session session = Session.getInstance(properties);\n        store = session.getStore();\n        store.connect(username, originalPassword);\n    }\n\n    public static synchronized EmailListingController getInstance(String host, String mailstoreType, String username,\n            String originalPassword, int port, boolean auth, boolean security, User user) throws MessagingException {\n        System.out.println(&quot;instance&quot;);\n        if (instance == null) {\n            instance = new EmailListingController(host, mailstoreType, username, originalPassword, port, auth, security,\n                    user);\n        }\n        return instance;\n    }\n\n    @GetMapping(&quot;/inbox/{userId}&quot;)\n    public ResponseEntity test(@PathVariable(&quot;userId&quot;) Integer id) {\n        Optional&lt;User&gt; user = userService.findById(id);\n        List&lt;Email&gt; emailList = new ArrayList&lt;Email&gt;();\n        if (user.isPresent()) {\n            String username = user.get().getUserName();\n            String pwd = user.get().getPassword();\n\n            EmailListingController client = EmailListingController.getInstance(host, mailstoreType, username,\n                    pwd, port, auth, security, user.get());\n            Folder folder = store.getFolder(&quot;inbox&quot;);\n            folder.open(Folder.READ_ONLY);\n            String from;String subject;String message1;String cc;String to;String bcc;\n            String[] toArray = null;String[] ccArray = null;String[] bccArray = null;Email email2;\n            FetchProfile fp1 = new FetchProfile();\n            fp1.add(FetchProfile.Item.ENVELOPE);\n            fp1.add(IMAPFolder.FetchProfileItem.FLAGS);\n            fp1.add(IMAPFolder.FetchProfileItem.CONTENT_INFO);\n            fp1.add(UIDFolder.FetchProfileItem.UID);\n            folder.fetch(folder.getMessages(), fp1);\n            for (Message message : folder.getMessages()) {\n                System.out.println(&quot;message&quot; + message.getSubject());\n            }\n            return new ResponseEntity(emailList, HttpStatus.OK);\n        }\n    }\n}\n</code></pre>\n<p>Any help would be appreciated!</p>\n"},{"tags":["java","android","sharedpreferences","android-jetpack","datastore"],"answers":[{"comments":[{"owner":{"account_id":22450303,"reputation":369,"user_id":16653709,"display_name":"Chandu"},"score":0,"creation_date":1676345932,"post_id":75443204,"comment_id":133114239,"body_markdown":"Hi Narendra, thank you for sharing your thought, the answer you mentioned is in Kotlin but my project is in Java, is this the same process in Java too ?","body":"Hi Narendra, thank you for sharing your thought, the answer you mentioned is in Kotlin but my project is in Java, is this the same process in Java too ?"},{"owner":{"account_id":18571239,"reputation":4748,"user_id":13533028,"display_name":"Narendra_Nath"},"score":0,"creation_date":1676346100,"post_id":75443204,"comment_id":133114262,"body_markdown":"Yes.&gt; just the Syntax will be different .","body":"Yes.&gt; just the Syntax will be different ."}],"tags":[],"owner":{"account_id":18571239,"reputation":4748,"user_id":13533028,"display_name":"Narendra_Nath"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676345627,"creation_date":1676345627,"answer_id":75443204,"question_id":75443067,"body_markdown":"It is very straightforward to migrate from sharedPreferences to dataStore.\r\nPass the old SharedPref name and the migration happens automatically. \r\n\r\n\r\n```\r\nprivate val dataStore: DataStore&lt;Preferences&gt; =\r\n    context.createDataStore(\r\n        name = &quot;data&quot;,\r\n        migrations = \r\n          listOf(SharedPreferencesMigration(context, &quot;shared_preferences_name&quot;))\r\n    )\r\n```\r\n ","title":"Preferences DataStore in Android using Java","body":"<p>It is very straightforward to migrate from sharedPreferences to dataStore.\nPass the old SharedPref name and the migration happens automatically.</p>\n<pre><code>private val dataStore: DataStore&lt;Preferences&gt; =\n    context.createDataStore(\n        name = &quot;data&quot;,\n        migrations = \n          listOf(SharedPreferencesMigration(context, &quot;shared_preferences_name&quot;))\n    )\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27329811,"reputation":31,"user_id":20842131,"display_name":"maxvolk"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683285439,"creation_date":1683285439,"answer_id":76181597,"question_id":75443067,"body_markdown":"I was at the exact same point in my project. Suddenly the sharedpreferences are deprecated, so what now.\r\nDataStore can be found rather quickly but I also think the [documentation][1] is not sufficient in clearing up what needs to be done.\r\n\r\nI did get it to work though:\r\n\r\n**1. Implementing**\r\n\r\nImplement this in the dependencies (app module):\r\n\r\n    //DataStore instead of SharedPreferences\r\n    implementation &quot;androidx.datastore:datastore-preferences:1.0.0&quot;\r\n    //RxJava2 support\r\n    implementation &quot;androidx.datastore:datastore-preferences-rxjava2:1.0.0&quot;\r\n\r\n **2. Initializing**\r\n\r\nI am using the RxDataStore and the associated RxDataStoreBuilder:\r\n\r\n    RxDataStore&lt;Preferences&gt; dataStoreRX; //Top Part\r\n    dataStoreRX = new RxPreferenceDataStoreBuilder(this,&quot;your_datastorename&quot;).build(); //onCreate\r\n\r\n **3. Storing Data**\r\n\r\nTo save data in the DataStore you can use what is in the doc:\r\n\r\n    public boolean putStringValue(String Key, String value){\r\n      boolean returnvalue;\r\n      Preferences.Key&lt;String&gt; PREF_KEY = PreferencesKeys.stringKey(Key);\r\n      Single&lt;Preferences&gt; updateResult =  dataStoreRX.updateDataAsync(prefsIn -&gt; {\r\n      MutablePreferences mutablePreferences = prefsIn.toMutablePreferences();\r\n      mutablePreferences.set(PREF_KEY, value);\r\n      return Single.just(mutablePreferences);\r\n      }).onErrorReturnItem(pref_error);\r\n    \r\n      returnvalue = updateResult.blockingGet() != pref_error;\r\n      return returnvalue;\r\n    }\r\n\r\nWith the litte addition of error handling: onErrorReturnItem\r\n\r\n    Preferences pref_error = new Preferences() {...};\r\n\r\nDoesnt matter whats in pref_error, it only exists to be returned and to check if it is returned.\r\n\r\n **4. Retreiving Data**\r\n\r\nTo retreive, same thing but backwards and with error-handling:\r\n\r\n    String getStringValue(String Key) {\r\n      Preferences.Key&lt;String&gt; PREF_KEY = PreferencesKeys.stringKey(Key);\r\n      Single&lt;String&gt; value = dataStoreRX.data().firstOrError().map(prefs -&gt; prefs.get(PREF_KEY)).onErrorReturnItem(&quot;null&quot;);\r\n      return value.blockingGet();\r\n    }\r\n\r\n **5. More than that!**\r\n\r\nBut there is way more to that. If you want to use the DataStore across several activities you need to use a Singleton and thore it as such. The reason is you cant create more than one instance of one DataStore. That is in the [documentation][1] but as I said, I think it is not complete.\r\nAlso error-handling is not described there.\r\n\r\nBut you can use all datatypes to store them with the correct KEY and with the respective returnvalue as an error.\r\n\r\nI elaborate more on this and how to set up the Singleton here: [Link to Medium][2]\r\n\r\nHope it helps :)\r\n\r\n\r\n  [1]: https://developer.android.com/topic/libraries/architecture/datastore#preferences-datastore\r\n  [2]: https://medium.com/@deadmanapple/using-the-android-datastore-library-instead-of-sharedpreferences-in-java-d6744c348a05","title":"Preferences DataStore in Android using Java","body":"<p>I was at the exact same point in my project. Suddenly the sharedpreferences are deprecated, so what now.\nDataStore can be found rather quickly but I also think the <a href=\"https://developer.android.com/topic/libraries/architecture/datastore#preferences-datastore\" rel=\"nofollow noreferrer\">documentation</a> is not sufficient in clearing up what needs to be done.</p>\n<p>I did get it to work though:</p>\n<p><strong>1. Implementing</strong></p>\n<p>Implement this in the dependencies (app module):</p>\n<pre><code>//DataStore instead of SharedPreferences\nimplementation &quot;androidx.datastore:datastore-preferences:1.0.0&quot;\n//RxJava2 support\nimplementation &quot;androidx.datastore:datastore-preferences-rxjava2:1.0.0&quot;\n</code></pre>\n<p><strong>2. Initializing</strong></p>\n<p>I am using the RxDataStore and the associated RxDataStoreBuilder:</p>\n<pre><code>RxDataStore&lt;Preferences&gt; dataStoreRX; //Top Part\ndataStoreRX = new RxPreferenceDataStoreBuilder(this,&quot;your_datastorename&quot;).build(); //onCreate\n</code></pre>\n<p><strong>3. Storing Data</strong></p>\n<p>To save data in the DataStore you can use what is in the doc:</p>\n<pre><code>public boolean putStringValue(String Key, String value){\n  boolean returnvalue;\n  Preferences.Key&lt;String&gt; PREF_KEY = PreferencesKeys.stringKey(Key);\n  Single&lt;Preferences&gt; updateResult =  dataStoreRX.updateDataAsync(prefsIn -&gt; {\n  MutablePreferences mutablePreferences = prefsIn.toMutablePreferences();\n  mutablePreferences.set(PREF_KEY, value);\n  return Single.just(mutablePreferences);\n  }).onErrorReturnItem(pref_error);\n\n  returnvalue = updateResult.blockingGet() != pref_error;\n  return returnvalue;\n}\n</code></pre>\n<p>With the litte addition of error handling: onErrorReturnItem</p>\n<pre><code>Preferences pref_error = new Preferences() {...};\n</code></pre>\n<p>Doesnt matter whats in pref_error, it only exists to be returned and to check if it is returned.</p>\n<p><strong>4. Retreiving Data</strong></p>\n<p>To retreive, same thing but backwards and with error-handling:</p>\n<pre><code>String getStringValue(String Key) {\n  Preferences.Key&lt;String&gt; PREF_KEY = PreferencesKeys.stringKey(Key);\n  Single&lt;String&gt; value = dataStoreRX.data().firstOrError().map(prefs -&gt; prefs.get(PREF_KEY)).onErrorReturnItem(&quot;null&quot;);\n  return value.blockingGet();\n}\n</code></pre>\n<p><strong>5. More than that!</strong></p>\n<p>But there is way more to that. If you want to use the DataStore across several activities you need to use a Singleton and thore it as such. The reason is you cant create more than one instance of one DataStore. That is in the <a href=\"https://developer.android.com/topic/libraries/architecture/datastore#preferences-datastore\" rel=\"nofollow noreferrer\">documentation</a> but as I said, I think it is not complete.\nAlso error-handling is not described there.</p>\n<p>But you can use all datatypes to store them with the correct KEY and with the respective returnvalue as an error.</p>\n<p>I elaborate more on this and how to set up the Singleton here: <a href=\"https://medium.com/@deadmanapple/using-the-android-datastore-library-instead-of-sharedpreferences-in-java-d6744c348a05\" rel=\"nofollow noreferrer\">Link to Medium</a></p>\n<p>Hope it helps :)</p>\n"}],"owner":{"account_id":22450303,"reputation":369,"user_id":16653709,"display_name":"Chandu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1243,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":2,"score":4,"last_activity_date":1683285439,"creation_date":1676343518,"question_id":75443067,"body_markdown":"I&#39;m working on a Java based Android Project where I&#39;m using sharedPreferences to store the data.\r\n\r\nI want to use Preferences DataStore in my project but unable to find any good example to take reference. Please suggest any reference examples in Java to implement preference data store in Android or how to migrate from shared prefs to DataStore.\r\n\r\nI tried to go through [developer documentation][1], but couldn&#39;t understand the example provided\r\n\r\n\r\n  [1]: https://developer.android.com/topic/libraries/architecture/datastore?gclsrc=aw.ds&amp;&amp;gclid=Cj0KCQjwp86EBhD7ARIsAFkgakg-4Xc0UsX_xgNZmeSeNdZfTuoMoZ4JPUuZUyJq7dUOAV_JSY029GoaAgCHEALw_wcB#java","title":"Preferences DataStore in Android using Java","body":"<p>I'm working on a Java based Android Project where I'm using sharedPreferences to store the data.</p>\n<p>I want to use Preferences DataStore in my project but unable to find any good example to take reference. Please suggest any reference examples in Java to implement preference data store in Android or how to migrate from shared prefs to DataStore.</p>\n<p>I tried to go through <a href=\"https://developer.android.com/topic/libraries/architecture/datastore?gclsrc=aw.ds&amp;&amp;gclid=Cj0KCQjwp86EBhD7ARIsAFkgakg-4Xc0UsX_xgNZmeSeNdZfTuoMoZ4JPUuZUyJq7dUOAV_JSY029GoaAgCHEALw_wcB#java\" rel=\"nofollow noreferrer\">developer documentation</a>, but couldn't understand the example provided</p>\n"},{"tags":["java","spring","spring-boot","spring-mvc","servlet-filters"],"owner":{"account_id":171189,"reputation":38109,"user_id":398441,"accept_rate":87,"display_name":"Johan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683285313,"creation_date":1683284923,"question_id":76181528,"body_markdown":"I want to create a filter that is used in a Spring Boot (3.x) application. This filter should load another Spring MVC view if a certain header is sent in the request. The view that I want to load requires a &quot;model map&quot; attribute for it to render correctly. Here&#39;s an example:\r\n\r\n```java\r\n@Component\r\npublic class MyFilter extends OncePerRequestFilter {\r\n\r\n    @Override\r\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException {\r\n        boolean isHeaderPresent = request.getHeader(&quot;SomeHeader&quot;) != null;        \r\n        if (isHeaderPresent) {\r\n            // Here, I&#39;d like to access &quot;ModelMap&quot; to add an attribute like this:\r\n            // modelMap.put(&quot;somekey&quot;, &quot;somevalue&quot;);\r\n            // Then I want to return the Thyeleaf &quot;view&quot; called &quot;someview&quot;.\r\n        } else {\r\n            filterChain.doFilter(request, response);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nI.e. I want a filter that essentially does this for every controller (that the filter intercepts):\r\n\r\n```java\r\n@GetMapping(&quot;/something&quot;)\r\npublic String somewhere(ModelMap modelMap, HttpServletRequest request) {\r\n    boolean isHeaderPresent = request.getHeader(&quot;SomeHeader&quot;) != null;        \r\n    if (isHeaderPresent) {\r\n        modelMap.put(&quot;somekey&quot;, &quot;somevalue&quot;);\r\n        return &quot;someview&quot;;\r\n    } else {\r\n        return &quot;something&quot;;\r\n    }\r\n}\r\n```\r\n\r\nNote that I&#39;m fine with _not_ using a `Filter` if there&#39;s a better way to achieve it.\r\n\r\nHow can I achieve this?","title":"Render/redirect to a different view from a filter in Spring Boot?","body":"<p>I want to create a filter that is used in a Spring Boot (3.x) application. This filter should load another Spring MVC view if a certain header is sent in the request. The view that I want to load requires a &quot;model map&quot; attribute for it to render correctly. Here's an example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\npublic class MyFilter extends OncePerRequestFilter {\n\n    @Override\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException {\n        boolean isHeaderPresent = request.getHeader(&quot;SomeHeader&quot;) != null;        \n        if (isHeaderPresent) {\n            // Here, I'd like to access &quot;ModelMap&quot; to add an attribute like this:\n            // modelMap.put(&quot;somekey&quot;, &quot;somevalue&quot;);\n            // Then I want to return the Thyeleaf &quot;view&quot; called &quot;someview&quot;.\n        } else {\n            filterChain.doFilter(request, response);\n        }\n    }\n}\n</code></pre>\n<p>I.e. I want a filter that essentially does this for every controller (that the filter intercepts):</p>\n<pre class=\"lang-java prettyprint-override\"><code>@GetMapping(&quot;/something&quot;)\npublic String somewhere(ModelMap modelMap, HttpServletRequest request) {\n    boolean isHeaderPresent = request.getHeader(&quot;SomeHeader&quot;) != null;        \n    if (isHeaderPresent) {\n        modelMap.put(&quot;somekey&quot;, &quot;somevalue&quot;);\n        return &quot;someview&quot;;\n    } else {\n        return &quot;something&quot;;\n    }\n}\n</code></pre>\n<p>Note that I'm fine with <em>not</em> using a <code>Filter</code> if there's a better way to achieve it.</p>\n<p>How can I achieve this?</p>\n"},{"tags":["java","spring"],"answers":[{"comments":[{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1268224430,"post_id":2416113,"comment_id":2398479,"body_markdown":"+1 - I didn&#39;t know you could do that (though I can see that it should work).  Suggestion: I think you should be able to embed the `StageClass` bean declarations in the `&lt;list&gt;` avoiding the need for the `&lt;ref&gt;` elements.","body":"+1 - I didn&#39;t know you could do that (though I can see that it should work).  Suggestion: I think you should be able to embed the <code>StageClass</code> bean declarations in the <code>&lt;list&gt;</code> avoiding the need for the <code>&lt;ref&gt;</code> elements."},{"owner":{"account_id":9137,"reputation":10022,"user_id":16759,"accept_rate":70,"display_name":"Richard"},"score":9,"creation_date":1314182038,"post_id":2416113,"comment_id":8610871,"body_markdown":"you could also use util:list to give you an arraylist","body":"you could also use util:list to give you an arraylist"},{"owner":{"account_id":37875,"reputation":2237,"user_id":108409,"accept_rate":86,"display_name":"Sefler"},"score":0,"creation_date":1340856303,"post_id":2416113,"comment_id":14765227,"body_markdown":"Is it possible to embed those bean definitions into &quot;&lt;list&gt;&lt;/list&gt;&quot;?","body":"Is it possible to embed those bean definitions into &quot;&lt;list&gt;&lt;/list&gt;&quot;?"},{"owner":{"account_id":151394,"reputation":52351,"user_id":365237,"accept_rate":96,"display_name":"eis"},"score":0,"creation_date":1381182153,"post_id":2416113,"comment_id":28471038,"body_markdown":"@Sefler yes, the definitions should be identical there","body":"@Sefler yes, the definitions should be identical there"},{"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"score":0,"creation_date":1572442916,"post_id":2416113,"comment_id":103560944,"body_markdown":"There is a pitfall: if using @Autowired, make sure that your pojo is also of type &quot;ArrayList&quot; and not just &quot;List&quot; or you could get something completely different.","body":"There is a pitfall: if using @Autowired, make sure that your pojo is also of type &quot;ArrayList&quot; and not just &quot;List&quot; or you could get something completely different."}],"tags":[],"owner":{"account_id":87016,"reputation":68348,"user_id":241590,"accept_rate":99,"display_name":"stacker"},"comment_count":5,"down_vote_count":0,"up_vote_count":187,"is_accepted":false,"score":187,"last_activity_date":1362497567,"creation_date":1268217116,"answer_id":2416113,"question_id":2416056,"body_markdown":"Here is one method:\r\n\r\n&lt;!-- language: xml --&gt;\r\n\r\n    &lt;bean id=&quot;stage1&quot; class=&quot;Stageclass&quot;/&gt;\r\n    &lt;bean id=&quot;stage2&quot; class=&quot;Stageclass&quot;/&gt;\r\n    \r\n    &lt;bean id=&quot;stages&quot; class=&quot;java.util.ArrayList&quot;&gt;\r\n        &lt;constructor-arg&gt;\r\n            &lt;list&gt;\r\n                &lt;ref bean=&quot;stage1&quot; /&gt;\r\n                &lt;ref bean=&quot;stage2&quot; /&gt;                \r\n            &lt;/list&gt;\r\n        &lt;/constructor-arg&gt;\r\n    &lt;/bean&gt;\r\n\r\n","title":"How to define a List bean in Spring?","body":"<p>Here is one method:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;bean id=\"stage1\" class=\"Stageclass\"/&gt;\n&lt;bean id=\"stage2\" class=\"Stageclass\"/&gt;\n\n&lt;bean id=\"stages\" class=\"java.util.ArrayList\"&gt;\n    &lt;constructor-arg&gt;\n        &lt;list&gt;\n            &lt;ref bean=\"stage1\" /&gt;\n            &lt;ref bean=\"stage2\" /&gt;                \n        &lt;/list&gt;\n    &lt;/constructor-arg&gt;\n&lt;/bean&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":779,"reputation":4357,"user_id":1012,"display_name":"simonlord"},"score":11,"creation_date":1268217500,"post_id":2416145,"comment_id":2397731,"body_markdown":"and obviously the contents of the list can be values, references, and beans etc..","body":"and obviously the contents of the list can be values, references, and beans etc.."},{"owner":{"account_id":888794,"reputation":855,"user_id":927555,"accept_rate":50,"display_name":"jpaoletti"},"score":0,"creation_date":1377125202,"post_id":2416145,"comment_id":26971605,"body_markdown":"Wonderful answer, it&#39;s more &quot;spring-like&quot;","body":"Wonderful answer, it&#39;s more &quot;spring-like&quot;"},{"owner":{"account_id":405356,"reputation":31611,"user_id":774183,"accept_rate":78,"display_name":"carlspring"},"score":0,"creation_date":1394929362,"post_id":2416145,"comment_id":34111622,"body_markdown":"Is it possible to somehow use references this way?","body":"Is it possible to somehow use references this way?"},{"owner":{"account_id":4018130,"reputation":11533,"user_id":3309466,"accept_rate":78,"display_name":"Manuel Spigolon"},"score":1,"creation_date":1395065358,"post_id":2416145,"comment_id":34155728,"body_markdown":"simple: `&lt;property name=&quot;beanList&quot; ref=&quot;myList&quot;/&gt;`","body":"simple: <code>&lt;property name=&quot;beanList&quot; ref=&quot;myList&quot;&#47;&gt;</code>"},{"owner":{"account_id":1225450,"reputation":4013,"user_id":1191081,"accept_rate":65,"display_name":"vishal"},"score":2,"creation_date":1399381650,"post_id":2416145,"comment_id":36030137,"body_markdown":"Hi I am getting this cvc-complex-type.2.4.c: The matching wildcard is strict, but no declaration can be found for element &#39;value&#39;. I h ave added namespace and schemaLocation still","body":"Hi I am getting this cvc-complex-type.2.4.c: The matching wildcard is strict, but no declaration can be found for element &#39;value&#39;. I h ave added namespace and schemaLocation still"},{"owner":{"account_id":1179943,"reputation":1535,"user_id":1155079,"accept_rate":27,"display_name":"Matt Friedman"},"score":19,"creation_date":1401307484,"post_id":2416145,"comment_id":36838804,"body_markdown":"I just noticed that `@Autwired` doesn&#39;t help when injecting a list created this way. However, `@Resource` works. i.e. `@Resource List&lt;String&gt; myList`","body":"I just noticed that <code>@Autwired</code> doesn&#39;t help when injecting a list created this way. However, <code>@Resource</code> works. i.e. <code>@Resource List&lt;String&gt; myList</code>"},{"owner":{"account_id":332422,"reputation":1916,"user_id":657723,"accept_rate":60,"display_name":"Ivan Balashov"},"score":0,"creation_date":1587052029,"post_id":2416145,"comment_id":108363389,"body_markdown":"Is it possible to make this list lazy? It becomes relevant when it is a collection of &quot;ref&quot; elements to other beans.","body":"Is it possible to make this list lazy? It becomes relevant when it is a collection of &quot;ref&quot; elements to other beans."},{"owner":{"account_id":2920713,"reputation":272,"user_id":2503041,"accept_rate":60,"display_name":"Liang"},"score":0,"creation_date":1591479452,"post_id":2416145,"comment_id":110073668,"body_markdown":"Thanks for the useful info above, and sorry if my question is slightly off the main topic here. What if I want to define &quot;my-list&quot; as an empty list and allow all later applications to insert refs (e.g. &quot;foo&quot;, &quot;bar&quot;, etc.) to &quot;my-list&quot; (meaning the content of the list is dynamic), is there a way to support this in Spring? Thanks","body":"Thanks for the useful info above, and sorry if my question is slightly off the main topic here. What if I want to define &quot;my-list&quot; as an empty list and allow all later applications to insert refs (e.g. &quot;foo&quot;, &quot;bar&quot;, etc.) to &quot;my-list&quot; (meaning the content of the list is dynamic), is there a way to support this in Spring? Thanks"}],"tags":[],"owner":{"account_id":779,"reputation":4357,"user_id":1012,"display_name":"simonlord"},"comment_count":8,"down_vote_count":2,"up_vote_count":291,"is_accepted":true,"score":289,"last_activity_date":1472672277,"creation_date":1268217459,"answer_id":2416145,"question_id":2416056,"body_markdown":"Import the spring util namespace. Then you can define a list bean as follows:\r\n\r\n&lt;!-- language: xml --&gt;\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n\txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txmlns:util=&quot;http://www.springframework.org/schema/util&quot;\r\n\txsi:schemaLocation=&quot;http://www.springframework.org/schema/beans\r\n                        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd\r\n                        http://www.springframework.org/schema/util\r\n                        http://www.springframework.org/schema/util/spring-util-2.5.xsd&quot;&gt;\r\n\r\n\r\n\t&lt;util:list id=&quot;myList&quot; value-type=&quot;java.lang.String&quot;&gt;\r\n\t\t&lt;value&gt;foo&lt;/value&gt;\r\n\t\t&lt;value&gt;bar&lt;/value&gt;\r\n\t&lt;/util:list&gt;\r\n\r\n&lt;/beans&gt;\r\n\r\n\r\nThe value-type is the generics type to be used, and is optional. You can also specify the list implementation class using the attribute `list-class`.","title":"How to define a List bean in Spring?","body":"<p>Import the spring util namespace. Then you can define a list bean as follows:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\nxmlns:util=\"http://www.springframework.org/schema/util\"\nxsi:schemaLocation=\"http://www.springframework.org/schema/beans\n                    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd\n                    http://www.springframework.org/schema/util\n                    http://www.springframework.org/schema/util/spring-util-2.5.xsd\"&gt;\n\n\n&lt;util:list id=\"myList\" value-type=\"java.lang.String\"&gt;\n    &lt;value&gt;foo&lt;/value&gt;\n    &lt;value&gt;bar&lt;/value&gt;\n&lt;/util:list&gt;\n</code></pre>\n\n<p></p>\n\n<p>The value-type is the generics type to be used, and is optional. You can also specify the list implementation class using the attribute <code>list-class</code>.</p>\n"},{"comments":[{"owner":{"account_id":15259,"reputation":23545,"user_id":32043,"accept_rate":98,"display_name":"guerda"},"score":0,"creation_date":1268223982,"post_id":2416224,"comment_id":2398417,"body_markdown":"It&#39;s a nice hint, but I don&#39;t get it working. stakker&#39;s anwer worked. +1 for the hint.","body":"It&#39;s a nice hint, but I don&#39;t get it working. stakker&#39;s anwer worked. +1 for the hint."}],"tags":[],"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1268218769,"creation_date":1268218334,"answer_id":2416224,"question_id":2416056,"body_markdown":"I think you may be looking for [`org.springframework.beans.factory.config.ListFactoryBean`][1].\r\n\r\nYou declare a ListFactoryBean instance, providing the list to be instantiated as a property withe a `&lt;list&gt;` element as its value, and give the bean an `id` attribute.  Then, each time you use the declared `id` as a `ref` or similar in some other bean declaration, a new copy of the list is instantiated.  You can also specify the `List` class to be used.\r\n\r\n\r\n  [1]: http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/beans/factory/config/ListFactoryBean.html","title":"How to define a List bean in Spring?","body":"<p>I think you may be looking for <a href=\"http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/beans/factory/config/ListFactoryBean.html\" rel=\"nofollow noreferrer\"><code>org.springframework.beans.factory.config.ListFactoryBean</code></a>.</p>\n\n<p>You declare a ListFactoryBean instance, providing the list to be instantiated as a property withe a <code>&lt;list&gt;</code> element as its value, and give the bean an <code>id</code> attribute.  Then, each time you use the declared <code>id</code> as a <code>ref</code> or similar in some other bean declaration, a new copy of the list is instantiated.  You can also specify the <code>List</code> class to be used.</p>\n"},{"tags":[],"owner":{"account_id":595425,"reputation":11,"user_id":290738,"display_name":"Juan Perez"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1268242160,"creation_date":1268242160,"answer_id":2419057,"question_id":2416056,"body_markdown":"Use the util namespace, you will be able to register the list as a bean in your application context. You can then reuse the list to inject it in other bean definitions.","title":"How to define a List bean in Spring?","body":"<p>Use the util namespace, you will be able to register the list as a bean in your application context. You can then reuse the list to inject it in other bean definitions.</p>\n"},{"comments":[{"owner":{"account_id":74886,"reputation":26643,"user_id":214977,"accept_rate":69,"display_name":"granadaCoder"},"score":0,"creation_date":1608137457,"post_id":7610578,"comment_id":115492638,"body_markdown":"this is so great... for using a &quot;dictionary&quot; java class instead of copying magic strings from the dictionary .. thank you!!","body":"this is so great... for using a &quot;dictionary&quot; java class instead of copying magic strings from the dictionary .. thank you!!"}],"tags":[],"owner":{"account_id":403862,"reputation":1278,"user_id":771861,"accept_rate":82,"display_name":"haju"},"comment_count":1,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1362497571,"creation_date":1317386839,"answer_id":7610578,"question_id":2416056,"body_markdown":"Stacker posed a great answer, I would go one step farther to make it more dynamic and use Spring 3 EL Expression. \r\n\r\n&lt;!-- language: xml --&gt;\r\n\r\n\t&lt;bean id=&quot;listBean&quot; class=&quot;java.util.ArrayList&quot;&gt;\r\n\t\t    &lt;constructor-arg&gt;\r\n\t\t\t\t&lt;value&gt;#{springDAOBean.getGenericListFoo()}&lt;/value&gt;\r\n\t\t    &lt;/constructor-arg&gt;\r\n\t&lt;/bean&gt;\r\n\r\nI was trying to figure out how I could do this with the util:list but couldn&#39;t get it work due to conversion errors. ","title":"How to define a List bean in Spring?","body":"<p>Stacker posed a great answer, I would go one step farther to make it more dynamic and use Spring 3 EL Expression. </p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;bean id=\"listBean\" class=\"java.util.ArrayList\"&gt;\n        &lt;constructor-arg&gt;\n            &lt;value&gt;#{springDAOBean.getGenericListFoo()}&lt;/value&gt;\n        &lt;/constructor-arg&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>I was trying to figure out how I could do this with the util:list but couldn't get it work due to conversion errors. </p>\n"},{"comments":[{"owner":{"account_id":13222953,"reputation":731,"user_id":9549068,"display_name":"Nor.Z"},"score":0,"creation_date":1650778195,"post_id":20990352,"comment_id":127199478,"body_markdown":"if I understand correctly, this doesnt transform the list into a bean; but it just wraps the list inside a bean. right?","body":"if I understand correctly, this doesnt transform the list into a bean; but it just wraps the list inside a bean. right?"}],"tags":[],"owner":{"account_id":1202806,"reputation":23223,"user_id":1173112,"accept_rate":89,"display_name":"Koray Tugay"},"comment_count":1,"down_vote_count":0,"up_vote_count":42,"is_accepted":false,"score":42,"last_activity_date":1683285058,"creation_date":1389169572,"answer_id":20990352,"question_id":2416056,"body_markdown":"    &lt;bean id=&quot;someBean&quot; class=&quot;com.somePackage.SomeClass&quot;&gt;\r\n        &lt;property name=&quot;myList&quot;&gt;\r\n            &lt;list value-type=&quot;com.somePackage.TypeForList&quot;&gt;\r\n                &lt;ref bean=&quot;someBeanInTheList&quot;/&gt;\r\n                &lt;ref bean=&quot;someOtherBeanInTheList&quot;/&gt;\r\n                &lt;ref bean=&quot;someThirdBeanInTheList&quot;/&gt;\r\n            &lt;/list&gt;\r\n        &lt;/property&gt;\r\n    &lt;/bean&gt;\r\n\r\nAnd in SomeClass:\r\n\r\n    class SomeClass {\r\n        \r\n        List&lt;TypeForList&gt; myList;\r\n      \r\n        @Required\r\n        public void setMyList(List&lt;TypeForList&gt; myList) {\r\n            this.myList = myList;\r\n        }\r\n\r\n    }","title":"How to define a List bean in Spring?","body":"<pre><code>&lt;bean id=&quot;someBean&quot; class=&quot;com.somePackage.SomeClass&quot;&gt;\n    &lt;property name=&quot;myList&quot;&gt;\n        &lt;list value-type=&quot;com.somePackage.TypeForList&quot;&gt;\n            &lt;ref bean=&quot;someBeanInTheList&quot;/&gt;\n            &lt;ref bean=&quot;someOtherBeanInTheList&quot;/&gt;\n            &lt;ref bean=&quot;someThirdBeanInTheList&quot;/&gt;\n        &lt;/list&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n<p>And in SomeClass:</p>\n<pre><code>class SomeClass {\n    \n    List&lt;TypeForList&gt; myList;\n  \n    @Required\n    public void setMyList(List&lt;TypeForList&gt; myList) {\n        this.myList = myList;\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3617484,"reputation":13834,"user_id":3017003,"accept_rate":81,"display_name":"Jakub Kubrynski"},"comment_count":0,"down_vote_count":0,"up_vote_count":40,"is_accepted":false,"score":40,"last_activity_date":1449739399,"creation_date":1389471430,"answer_id":21067356,"question_id":2416056,"body_markdown":"Another option is to use JavaConfig. Assuming that all stages are already registered as spring beans you just have to:\r\n\r\n    @Autowired\r\n    private List&lt;Stage&gt; stages;\r\n\r\nand spring will automatically inject them into this list. If you need to preserve order (upper solution doesn&#39;t do that) you can do it in that way:\r\n\r\n    @Configuration\r\n    public class MyConfiguration {\r\n      @Autowired\r\n      private Stage1 stage1;\r\n    \r\n      @Autowired\r\n      private Stage2 stage2;\r\n    \r\n      @Bean\r\n      public List&lt;Stage&gt; stages() {\r\n        return Lists.newArrayList(stage1, stage2);\r\n      }\r\n    }\r\n\r\nThe other solution to preserve order is use a `@Order` annotation on beans. Then list will contain beans ordered by ascending annotation value.\r\n\r\n    @Bean\r\n    @Order(1)\r\n    public Stage stage1() {\r\n        return new Stage1();\r\n    }\r\n\r\n    @Bean\r\n    @Order(2)\r\n    public Stage stage2() {\r\n        return new Stage2();\r\n    }\r\n","title":"How to define a List bean in Spring?","body":"<p>Another option is to use JavaConfig. Assuming that all stages are already registered as spring beans you just have to:</p>\n\n<pre><code>@Autowired\nprivate List&lt;Stage&gt; stages;\n</code></pre>\n\n<p>and spring will automatically inject them into this list. If you need to preserve order (upper solution doesn't do that) you can do it in that way:</p>\n\n<pre><code>@Configuration\npublic class MyConfiguration {\n  @Autowired\n  private Stage1 stage1;\n\n  @Autowired\n  private Stage2 stage2;\n\n  @Bean\n  public List&lt;Stage&gt; stages() {\n    return Lists.newArrayList(stage1, stage2);\n  }\n}\n</code></pre>\n\n<p>The other solution to preserve order is use a <code>@Order</code> annotation on beans. Then list will contain beans ordered by ascending annotation value.</p>\n\n<pre><code>@Bean\n@Order(1)\npublic Stage stage1() {\n    return new Stage1();\n}\n\n@Bean\n@Order(2)\npublic Stage stage2() {\n    return new Stage2();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3069662,"reputation":7424,"user_id":2600638,"display_name":"Jose Alban"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1413559859,"creation_date":1413559402,"answer_id":26428294,"question_id":2416056,"body_markdown":"As an addition to Jakub&#39;s answer, if you plan to use JavaConfig, you can also autowire that way:\r\n\r\n    import com.google.common.collect.Lists;\r\n    \r\n    import java.util.List;\r\n    \r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.context.annotation.Bean;\r\n\r\n    &lt;...&gt;\r\n    \r\n    @Configuration\r\n    public class MyConfiguration {\r\n        \r\n        @Bean\r\n        public List&lt;Stage&gt; stages(final Stage1 stage1, final Stage2 stage2) {\r\n            return Lists.newArrayList(stage1, stage2);\r\n        }\r\n    }","title":"How to define a List bean in Spring?","body":"<p>As an addition to Jakub's answer, if you plan to use JavaConfig, you can also autowire that way:</p>\n\n<pre><code>import com.google.common.collect.Lists;\n\nimport java.util.List;\n\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.context.annotation.Bean;\n\n&lt;...&gt;\n\n@Configuration\npublic class MyConfiguration {\n\n    @Bean\n    public List&lt;Stage&gt; stages(final Stage1 stage1, final Stage2 stage2) {\n        return Lists.newArrayList(stage1, stage2);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3597194,"reputation":728,"user_id":3001523,"display_name":"Slava Babin"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1490965059,"creation_date":1490965059,"answer_id":43141306,"question_id":2416056,"body_markdown":"And this is how to inject set in some property in Spring:\r\n\r\n    &lt;bean id=&quot;process&quot;\r\n          class=&quot;biz.bsoft.processing&quot;&gt;\r\n        &lt;property name=&quot;stages&quot;&gt;\r\n            &lt;set value-type=&quot;biz.bsoft.AbstractStage&quot;&gt;\r\n                &lt;ref bean=&quot;stageReady&quot;/&gt;\r\n                &lt;ref bean=&quot;stageSteady&quot;/&gt;\r\n                &lt;ref bean=&quot;stageGo&quot;/&gt;\r\n            &lt;/set&gt;\r\n        &lt;/property&gt;\r\n    &lt;/bean&gt;","title":"How to define a List bean in Spring?","body":"<p>And this is how to inject set in some property in Spring:</p>\n\n<pre><code>&lt;bean id=\"process\"\n      class=\"biz.bsoft.processing\"&gt;\n    &lt;property name=\"stages\"&gt;\n        &lt;set value-type=\"biz.bsoft.AbstractStage\"&gt;\n            &lt;ref bean=\"stageReady\"/&gt;\n            &lt;ref bean=\"stageSteady\"/&gt;\n            &lt;ref bean=\"stageGo\"/&gt;\n        &lt;/set&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11165025,"reputation":425,"user_id":8193960,"display_name":"RaM PrabU"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1516539352,"creation_date":1516539352,"answer_id":48366994,"question_id":2416056,"body_markdown":"     &lt;bean id=&quot;student1&quot; class=&quot;com.spring.assin2.Student&quot;&gt;  \r\n    &lt;property name=&quot;name&quot; value=&quot;ram&quot;&gt;&lt;/property&gt;  \r\n    &lt;property name=&quot;id&quot; value=&quot;1&quot;&gt;&lt;/property&gt; \r\n    &lt;property name=&quot;listTest&quot;&gt;\r\n            &lt;list value-type=&quot;java.util.List&quot;&gt;\r\n                &lt;ref bean=&quot;test1&quot;/&gt;\r\n                &lt;ref bean=&quot;test2&quot;/&gt;\r\n            &lt;/list&gt;\r\n        &lt;/property&gt;\r\n    &lt;/bean&gt;  \r\n\r\ndefine those beans(test1,test2) afterwards :)","title":"How to define a List bean in Spring?","body":"<pre><code> &lt;bean id=\"student1\" class=\"com.spring.assin2.Student\"&gt;  \n&lt;property name=\"name\" value=\"ram\"&gt;&lt;/property&gt;  \n&lt;property name=\"id\" value=\"1\"&gt;&lt;/property&gt; \n&lt;property name=\"listTest\"&gt;\n        &lt;list value-type=\"java.util.List\"&gt;\n            &lt;ref bean=\"test1\"/&gt;\n            &lt;ref bean=\"test2\"/&gt;\n        &lt;/list&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;  \n</code></pre>\n\n<p>define those beans(test1,test2) afterwards :)</p>\n"},{"tags":[],"owner":{"account_id":9106944,"reputation":723,"user_id":6776992,"display_name":"dqthe"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1555574112,"creation_date":1555574112,"answer_id":55741500,"question_id":2416056,"body_markdown":"You just remove `id` out of beans inside `&lt;list&gt;` tag. Like this:\r\n\r\n    &lt;property name=&quot;listStaff&quot;&gt;\r\n      &lt;list&gt;\r\n        &lt;bean class=&quot;com.test.entity.Staff&quot;&gt;\r\n            &lt;constructor-arg name=&quot;name&quot; value = &quot;Jonh&quot;/&gt;\r\n            &lt;constructor-arg name=&quot;age&quot; value = &quot;30&quot;/&gt;\r\n        &lt;/bean&gt;\r\n        &lt;bean class=&quot;com.test.entity.Staff&quot;&gt;\r\n            &lt;constructor-arg name=&quot;name&quot; value = &quot;Jam&quot;/&gt;\r\n            &lt;constructor-arg name=&quot;age&quot; value = &quot;21&quot;/&gt;\r\n        &lt;/bean&gt;\r\n      &lt;/list&gt;\r\n    &lt;/property&gt;","title":"How to define a List bean in Spring?","body":"<p>You just remove <code>id</code> out of beans inside <code>&lt;list&gt;</code> tag. Like this:</p>\n\n<pre><code>&lt;property name=\"listStaff\"&gt;\n  &lt;list&gt;\n    &lt;bean class=\"com.test.entity.Staff\"&gt;\n        &lt;constructor-arg name=\"name\" value = \"Jonh\"/&gt;\n        &lt;constructor-arg name=\"age\" value = \"30\"/&gt;\n    &lt;/bean&gt;\n    &lt;bean class=\"com.test.entity.Staff\"&gt;\n        &lt;constructor-arg name=\"name\" value = \"Jam\"/&gt;\n        &lt;constructor-arg name=\"age\" value = \"21\"/&gt;\n    &lt;/bean&gt;\n  &lt;/list&gt;\n&lt;/property&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4008309,"reputation":3688,"user_id":3302424,"accept_rate":70,"display_name":"Hari Krishna"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1583490160,"creation_date":1583490160,"answer_id":60562050,"question_id":2416056,"body_markdown":"**Inject list of strings.**\r\n\r\nSuppose you have Countries model class that take list of strings like below.\r\n\r\n    public class Countries {\r\n    \tprivate List&lt;String&gt; countries;\r\n    \r\n     \tpublic List&lt;String&gt; getCountries() {\r\n      \t\treturn countries;\r\n     \t}\t\r\n    \r\n     \tpublic void setCountries(List&lt;String&gt; countries) {\r\n      \t\tthis.countries = countries;\r\n     \t}\r\n    \r\n    }\r\n\r\nFollowing xml definition define a bean and inject list of countries.\r\n\r\n    &lt;bean id=&quot;demoCountryCapitals&quot; name=&quot;demoCountryCapitals&quot; class=&quot;com.sample.pojo.Countries&quot;&gt;\r\n       &lt;property name=&quot;countries&quot;&gt;\r\n          &lt;list&gt;\r\n             &lt;value&gt;Iceland&lt;/value&gt;\r\n             &lt;value&gt;India&lt;/value&gt;\r\n             &lt;value&gt;Sri Lanka&lt;/value&gt;\r\n             &lt;value&gt;Russia&lt;/value&gt;\r\n          &lt;/list&gt;\r\n       &lt;/property&gt;\r\n    &lt;/bean&gt;\r\n\r\nReference [link][1]\r\n\r\n**Inject list of Pojos**\r\n\r\nSuppose if you have model class like below.\r\n\r\n    public class Country {\r\n    \tprivate String name;\r\n     \tprivate String capital;\r\n     \t.....\r\n     \t.....\r\n     }\r\n    \r\n    public class Countries {\r\n     \tprivate List&lt;Country&gt; favoriteCountries;\r\n    \r\n     \tpublic List&lt;Country&gt; getFavoriteCountries() {\r\n      \t\treturn favoriteCountries;\r\n     \t}\r\n    \r\n     \tpublic void setFavoriteCountries(List&lt;Country&gt; favoriteCountries) {\r\n      \t\tthis.favoriteCountries = favoriteCountries;\r\n     \t}\r\n    \r\n    }\r\n\r\nBean Definitions.\r\n\r\n     &lt;bean id=&quot;india&quot; class=&quot;com.sample.pojo.Country&quot;&gt;\r\n      &lt;property name=&quot;name&quot; value=&quot;India&quot; /&gt;\r\n      &lt;property name=&quot;capital&quot; value=&quot;New Delhi&quot; /&gt;\r\n     &lt;/bean&gt;\r\n    \r\n     &lt;bean id=&quot;russia&quot; class=&quot;com.sample.pojo.Country&quot;&gt;\r\n      &lt;property name=&quot;name&quot; value=&quot;Russia&quot; /&gt;\r\n      &lt;property name=&quot;capital&quot; value=&quot;Moscow&quot; /&gt;\r\n     &lt;/bean&gt;\r\n    \r\n    \r\n     &lt;bean id=&quot;demoCountryCapitals&quot; name=&quot;demoCountryCapitals&quot; class=&quot;com.sample.pojo.Countries&quot;&gt;\r\n      &lt;property name=&quot;favoriteCountries&quot;&gt;\r\n       &lt;list&gt;\r\n        &lt;ref bean=&quot;india&quot; /&gt;\r\n        &lt;ref bean=&quot;russia&quot; /&gt;\r\n       &lt;/list&gt;\r\n      &lt;/property&gt;\r\n     &lt;/bean&gt;\r\n\r\n \r\nReference [Link][2].\r\n\r\n\r\n  [1]: https://self-learning-java-tutorial.blogspot.com/2017/02/spring-inject-list.html\r\n  [2]: https://self-learning-java-tutorial.blogspot.com/2017/03/spring-inject-list-of-beans.html","title":"How to define a List bean in Spring?","body":"<p><strong>Inject list of strings.</strong></p>\n\n<p>Suppose you have Countries model class that take list of strings like below.</p>\n\n<pre><code>public class Countries {\n    private List&lt;String&gt; countries;\n\n    public List&lt;String&gt; getCountries() {\n        return countries;\n    }   \n\n    public void setCountries(List&lt;String&gt; countries) {\n        this.countries = countries;\n    }\n\n}\n</code></pre>\n\n<p>Following xml definition define a bean and inject list of countries.</p>\n\n<pre><code>&lt;bean id=\"demoCountryCapitals\" name=\"demoCountryCapitals\" class=\"com.sample.pojo.Countries\"&gt;\n   &lt;property name=\"countries\"&gt;\n      &lt;list&gt;\n         &lt;value&gt;Iceland&lt;/value&gt;\n         &lt;value&gt;India&lt;/value&gt;\n         &lt;value&gt;Sri Lanka&lt;/value&gt;\n         &lt;value&gt;Russia&lt;/value&gt;\n      &lt;/list&gt;\n   &lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>Reference <a href=\"https://self-learning-java-tutorial.blogspot.com/2017/02/spring-inject-list.html\" rel=\"nofollow noreferrer\">link</a></p>\n\n<p><strong>Inject list of Pojos</strong></p>\n\n<p>Suppose if you have model class like below.</p>\n\n<pre><code>public class Country {\n    private String name;\n    private String capital;\n    .....\n    .....\n }\n\npublic class Countries {\n    private List&lt;Country&gt; favoriteCountries;\n\n    public List&lt;Country&gt; getFavoriteCountries() {\n        return favoriteCountries;\n    }\n\n    public void setFavoriteCountries(List&lt;Country&gt; favoriteCountries) {\n        this.favoriteCountries = favoriteCountries;\n    }\n\n}\n</code></pre>\n\n<p>Bean Definitions.</p>\n\n<pre><code> &lt;bean id=\"india\" class=\"com.sample.pojo.Country\"&gt;\n  &lt;property name=\"name\" value=\"India\" /&gt;\n  &lt;property name=\"capital\" value=\"New Delhi\" /&gt;\n &lt;/bean&gt;\n\n &lt;bean id=\"russia\" class=\"com.sample.pojo.Country\"&gt;\n  &lt;property name=\"name\" value=\"Russia\" /&gt;\n  &lt;property name=\"capital\" value=\"Moscow\" /&gt;\n &lt;/bean&gt;\n\n\n &lt;bean id=\"demoCountryCapitals\" name=\"demoCountryCapitals\" class=\"com.sample.pojo.Countries\"&gt;\n  &lt;property name=\"favoriteCountries\"&gt;\n   &lt;list&gt;\n    &lt;ref bean=\"india\" /&gt;\n    &lt;ref bean=\"russia\" /&gt;\n   &lt;/list&gt;\n  &lt;/property&gt;\n &lt;/bean&gt;\n</code></pre>\n\n<p>Reference <a href=\"https://self-learning-java-tutorial.blogspot.com/2017/03/spring-inject-list-of-beans.html\" rel=\"nofollow noreferrer\">Link</a>.</p>\n"},{"tags":[],"owner":{"account_id":16709585,"reputation":79,"user_id":12077123,"display_name":"Akshansh Saxena"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1624862451,"creation_date":1624862451,"answer_id":68158645,"question_id":2416056,"body_markdown":"Use list-class attribute in util:list to make a standalone list of any particular type. for example if you want to make list of type ArrayList:\r\n\r\n    &lt;util:list id=&quot;namesList&quot; list-class=&quot;java.util.ArrayList&quot; value-type=&quot;java.lang.String&quot;&gt;\r\n      &lt;value&gt;Abhay&lt;/value&gt;\r\n      &lt;value&gt;ankit&lt;/value&gt;\r\n      &lt;value&gt;Akshansh&lt;/value&gt;\r\n      &lt;value&gt;Db&lt;/value&gt;\r\n    &lt;/util:list&gt;\r\n\r\nor if you want to make a list of type LinkedList then :\r\n\r\n    &lt;util:list id=&quot;namesList&quot; list-class=&quot;java.util.LinkedList&quot; value-type=&quot;java.lang.String&quot;&gt;\r\n      &lt;value&gt;Abhay&lt;/value&gt;\r\n      &lt;value&gt;ankit&lt;/value&gt;\r\n      &lt;value&gt;Akshansh&lt;/value&gt;\r\n      &lt;value&gt;Db&lt;/value&gt;\r\n    &lt;/util:list&gt;","title":"How to define a List bean in Spring?","body":"<p>Use list-class attribute in util:list to make a standalone list of any particular type. for example if you want to make list of type ArrayList:</p>\n<pre><code>&lt;util:list id=&quot;namesList&quot; list-class=&quot;java.util.ArrayList&quot; value-type=&quot;java.lang.String&quot;&gt;\n  &lt;value&gt;Abhay&lt;/value&gt;\n  &lt;value&gt;ankit&lt;/value&gt;\n  &lt;value&gt;Akshansh&lt;/value&gt;\n  &lt;value&gt;Db&lt;/value&gt;\n&lt;/util:list&gt;\n</code></pre>\n<p>or if you want to make a list of type LinkedList then :</p>\n<pre><code>&lt;util:list id=&quot;namesList&quot; list-class=&quot;java.util.LinkedList&quot; value-type=&quot;java.lang.String&quot;&gt;\n  &lt;value&gt;Abhay&lt;/value&gt;\n  &lt;value&gt;ankit&lt;/value&gt;\n  &lt;value&gt;Akshansh&lt;/value&gt;\n  &lt;value&gt;Db&lt;/value&gt;\n&lt;/util:list&gt;\n</code></pre>\n"}],"owner":{"account_id":15259,"reputation":23545,"user_id":32043,"accept_rate":98,"display_name":"guerda"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":405925,"favorite_count":0,"down_vote_count":1,"up_vote_count":215,"accepted_answer_id":2416145,"answer_count":13,"score":214,"last_activity_date":1683285058,"creation_date":1268216510,"question_id":2416056,"body_markdown":"I&#39;m using Spring to define stages in my application. It&#39;s configured that the necessary class (here called `Configurator`) is injected with the stages.  \r\nNow I need the List of Stages in another class, named `LoginBean`. The `Configurator` doesn&#39;t offer access to his List of Stages.\r\n\r\nI cannot change the class `Configurator`.\r\n\r\nMy Idea:  \r\nDefine a new bean called Stages and inject it to `Configurator` and `LoginBean`.\r\nMy problem with this idea is that I don&#39;t know how to transform this property:\r\n\r\n&lt;!-- language: xml --&gt;\r\n\r\n    &lt;property ...&gt;\r\n      &lt;list&gt;\r\n        &lt;bean ... &gt;...&lt;/bean&gt;\r\n        &lt;bean ... &gt;...&lt;/bean&gt;\r\n        &lt;bean ... &gt;...&lt;/bean&gt;\r\n      &lt;/list&gt;\r\n    &lt;/property&gt;\r\n\r\ninto a bean.\r\n\r\nSomething like this does not work:\r\n\r\n&lt;!-- language: xml --&gt;\r\n\r\n    &lt;bean id=&quot;stages&quot; class=&quot;java.util.ArrayList&quot;&gt;\r\n\r\nCan anybody help me with this?","title":"How to define a List bean in Spring?","body":"<p>I'm using Spring to define stages in my application. It's configured that the necessary class (here called <code>Configurator</code>) is injected with the stages.<br>\nNow I need the List of Stages in another class, named <code>LoginBean</code>. The <code>Configurator</code> doesn't offer access to his List of Stages.</p>\n\n<p>I cannot change the class <code>Configurator</code>.</p>\n\n<p>My Idea:<br>\nDefine a new bean called Stages and inject it to <code>Configurator</code> and <code>LoginBean</code>.\nMy problem with this idea is that I don't know how to transform this property:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;property ...&gt;\n  &lt;list&gt;\n    &lt;bean ... &gt;...&lt;/bean&gt;\n    &lt;bean ... &gt;...&lt;/bean&gt;\n    &lt;bean ... &gt;...&lt;/bean&gt;\n  &lt;/list&gt;\n&lt;/property&gt;\n</code></pre>\n\n<p>into a bean.</p>\n\n<p>Something like this does not work:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;bean id=\"stages\" class=\"java.util.ArrayList\"&gt;\n</code></pre>\n\n<p>Can anybody help me with this?</p>\n"},{"tags":["java","android","http","widget","android-networking"],"comments":[{"owner":{"account_id":10916684,"reputation":3936,"user_id":8024296,"display_name":"Paul"},"score":0,"creation_date":1683284887,"post_id":76181165,"comment_id":134346827,"body_markdown":"@Selvin: Too old, there is no updated information.","body":"@Selvin: Too old, there is no updated information."}],"answers":[{"comments":[{"owner":{"account_id":10916684,"reputation":3936,"user_id":8024296,"display_name":"Paul"},"score":1,"creation_date":1683282957,"post_id":76181253,"comment_id":134346443,"body_markdown":"Is this kotlin code?","body":"Is this kotlin code?"},{"owner":{"account_id":7495697,"reputation":1501,"user_id":5696047,"display_name":"jayesh gurudayalani"},"score":0,"creation_date":1683283012,"post_id":76181253,"comment_id":134346459,"body_markdown":"yes but instead of coroutines , you can use another mechanism that execute your api calling code on io thread not main thread as coroutines you can use in kotlin","body":"yes but instead of coroutines , you can use another mechanism that execute your api calling code on io thread not main thread as coroutines you can use in kotlin"},{"owner":{"account_id":10916684,"reputation":3936,"user_id":8024296,"display_name":"Paul"},"score":1,"creation_date":1683283459,"post_id":76181253,"comment_id":134346555,"body_markdown":"Being that I&#39;m not using kotlin on the project, what can I use in java for android that does the same thing since AsyncTask is deprecated.","body":"Being that I&#39;m not using kotlin on the project, what can I use in java for android that does the same thing since AsyncTask is deprecated."},{"owner":{"account_id":7495697,"reputation":1501,"user_id":5696047,"display_name":"jayesh gurudayalani"},"score":0,"creation_date":1683283640,"post_id":76181253,"comment_id":134346590,"body_markdown":"You can go with RXJava that allows you easy thread switching along with rich operators . It will also allow you to manage/cancel your task https://www.digitalocean.com/community/tutorials/android-rxjava-retrofit","body":"You can go with RXJava that allows you easy thread switching along with rich operators . It will also allow you to manage/cancel your task <a href=\"https://www.digitalocean.com/community/tutorials/android-rxjava-retrofit\" rel=\"nofollow noreferrer\">digitalocean.com/community/tutorials/android-rxjava-retrofit</a>"},{"owner":{"account_id":10916684,"reputation":3936,"user_id":8024296,"display_name":"Paul"},"score":0,"creation_date":1683283727,"post_id":76181253,"comment_id":134346610,"body_markdown":"If I use something like this it&#39;s not good: `Thread thread = new Thread(new Runnable(){`?","body":"If I use something like this it&#39;s not good: <code>Thread thread = new Thread(new Runnable(){</code>?"},{"owner":{"account_id":7495697,"reputation":1501,"user_id":5696047,"display_name":"jayesh gurudayalani"},"score":0,"creation_date":1683283833,"post_id":76181253,"comment_id":134346628,"body_markdown":"yes @Paul not suggested with ```Thread thread = new Thread(new Runnable(){```","body":"yes @Paul not suggested with <code>Thread thread = new Thread(new Runnable(){</code>"},{"owner":{"account_id":10916684,"reputation":3936,"user_id":8024296,"display_name":"Paul"},"score":0,"creation_date":1683284837,"post_id":76181253,"comment_id":134346818,"body_markdown":"Can I ask you in java how would you, if you can give an example?\nI was thinking about creating a separate class that makes the http request process the data and then return it, but you always have to have a wait.","body":"Can I ask you in java how would you, if you can give an example? I was thinking about creating a separate class that makes the http request process the data and then return it, but you always have to have a wait."}],"tags":[],"owner":{"account_id":7495697,"reputation":1501,"user_id":5696047,"display_name":"jayesh gurudayalani"},"comment_count":7,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1683282738,"creation_date":1683282738,"answer_id":76181253,"question_id":76181165,"body_markdown":"As per the error , it looks like you are calling api on main thread which is not allowed so we need to move you api calling to IO thread . Can you try below mentioned solution\r\n\r\nFrom\r\n```\r\ntry {\r\n            // fetching the target website\r\n            doc = Jsoup.connect(&quot;https://pageWeb...&quot;).get();\r\n        } catch (IOException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n```\r\n\r\nTo\r\n```\r\nval job = CoroutineScope(Dispatchers.IO).launch {\r\n            try {\r\n                // fetching the target website\r\n                doc = Jsoup.connect(&quot;https://pageWeb...&quot;).get();\r\n            } catch (IOException e) {\r\n                throw new RuntimeException(e);\r\n            }\r\n        }\r\n        job.cancel()\r\n```\r\n\r\njob object you need to declare it as member and ```job.cancel()``` need to place in ```onDisabled``` method","title":"Android java widget call http error android.os.NetworkOnMainThreadException","body":"<p>As per the error , it looks like you are calling api on main thread which is not allowed so we need to move you api calling to IO thread . Can you try below mentioned solution</p>\n<p>From</p>\n<pre><code>try {\n            // fetching the target website\n            doc = Jsoup.connect(&quot;https://pageWeb...&quot;).get();\n        } catch (IOException e) {\n            throw new RuntimeException(e);\n        }\n</code></pre>\n<p>To</p>\n<pre><code>val job = CoroutineScope(Dispatchers.IO).launch {\n            try {\n                // fetching the target website\n                doc = Jsoup.connect(&quot;https://pageWeb...&quot;).get();\n            } catch (IOException e) {\n                throw new RuntimeException(e);\n            }\n        }\n        job.cancel()\n</code></pre>\n<p>job object you need to declare it as member and <code>job.cancel()</code> need to place in <code>onDisabled</code> method</p>\n"},{"comments":[{"owner":{"account_id":10916684,"reputation":3936,"user_id":8024296,"display_name":"Paul"},"score":0,"creation_date":1683283225,"post_id":76181297,"comment_id":134346505,"body_markdown":"This class was deprecated in API level 30.","body":"This class was deprecated in API level 30."},{"owner":{"account_id":19686766,"reputation":1,"user_id":14412554,"display_name":"ahvroyal"},"score":0,"creation_date":1683284581,"post_id":76181297,"comment_id":134346766,"body_markdown":"That was the easiest way to go, however there are other options that you can use; what i can suggest to you is to use OkHttp library for this purpose.\n\nOkHttp library guide :\nhttps://guides.codepath.com/android/Using-OkHttp\n\nNote that the modern preferred way is to use kotlin coroutines for this, but that is kotlin only.","body":"That was the easiest way to go, however there are other options that you can use; what i can suggest to you is to use OkHttp library for this purpose.  OkHttp library guide : <a href=\"https://guides.codepath.com/android/Using-OkHttp\" rel=\"nofollow noreferrer\">guides.codepath.com/android/Using-OkHttp</a>  Note that the modern preferred way is to use kotlin coroutines for this, but that is kotlin only."}],"tags":[],"owner":{"account_id":19686766,"reputation":1,"user_id":14412554,"display_name":"ahvroyal"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683283119,"creation_date":1683283119,"answer_id":76181297,"question_id":76181165,"body_markdown":"You shouldn&#39;t do networking on main thread in android application, instead consider using AsyncTask for doing network operations in which it offloads the work out of the main thread.\r\n\r\nAsyncTask reference :\r\nhttps://developer.android.com/reference/android/os/AsyncTask","title":"Android java widget call http error android.os.NetworkOnMainThreadException","body":"<p>You shouldn't do networking on main thread in android application, instead consider using AsyncTask for doing network operations in which it offloads the work out of the main thread.</p>\n<p>AsyncTask reference :\n<a href=\"https://developer.android.com/reference/android/os/AsyncTask\" rel=\"nofollow noreferrer\">https://developer.android.com/reference/android/os/AsyncTask</a></p>\n"}],"owner":{"account_id":10916684,"reputation":3936,"user_id":8024296,"display_name":"Paul"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":182,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1683571182,"answer_count":2,"score":-1,"last_activity_date":1683284902,"creation_date":1683282021,"question_id":76181165,"body_markdown":"I am having the following error:\r\n\r\n```\r\nFATAL EXCEPTION: main\r\nProcess: com.name.app, PID: 21535\r\njava.lang.RuntimeException: Unable to start receiver com.name.app.MyWidget: \r\nandroid.os.NetworkOnMainThreadException\r\nat android.app.ActivityThread.handleReceiver(ActivityThread.java:4012)\r\nat android.app.ActivityThread.access$1500(ActivityThread.java:232)\r\nat android.app.ActivityThread$H.handleMessage(ActivityThread.java:2025)\r\n....\r\n```\r\n\r\nI need to make a widget every certain time make an `http` call to a website for scraping.\r\n\r\nI have the following code:\r\n\r\n```java\r\npackage com.name.app;\r\n\r\nimport android.appwidget.AppWidgetManager;\r\nimport android.appwidget.AppWidgetProvider;\r\nimport android.content.Context;\r\nimport android.content.SharedPreferences;\r\nimport android.util.Log;\r\nimport android.widget.RelativeLayout;\r\nimport android.widget.RemoteViews;\r\n\r\nimport org.jsoup.Jsoup;\r\nimport org.jsoup.nodes.Document;\r\n\r\nimport java.io.IOException;\r\n\r\npublic class MyWidget extends AppWidgetProvider {\r\n\r\n    void updateAppWidget(Context context, AppWidgetManager appWidgetManager, int appWidgetId) {\r\n        RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.widget_design);\r\n\r\n        //get the widget value\r\n        SharedPreferences preferences = context.getSharedPreferences(&quot;PREFS&quot;, 0);\r\n        int value = preferences.getInt(&quot;value&quot;, 1);\r\n\r\n        //set the value in the textview\r\n        views.setTextViewText(R.id.text, &quot;&quot; + value);\r\n\r\n        //update the widget\r\n        appWidgetManager.updateAppWidget(appWidgetId, views);\r\n\r\n        //reschedule the widget refresh\r\n        AlarmHandler alarmHandler = new AlarmHandler(context);\r\n        alarmHandler.cancelAlarmManager();\r\n        alarmHandler.setAlarmManager();\r\n\r\n        Document doc;\r\n\r\n        try {\r\n            // fetching the target website\r\n            doc = Jsoup.connect(&quot;https://pageWeb...&quot;).get();\r\n        } catch (IOException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n\r\n        Log.d(&quot;WIDGET&quot;, &quot;Widget updated!&quot;);\r\n    }\r\n\r\n    @Override\r\n    public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {\r\n        for (int appWidgetId: appWidgetIds) {\r\n            updateAppWidget(context, appWidgetManager, appWidgetId);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void onDisabled(Context context) {\r\n        //stop updating the widget\r\n        AlarmHandler alarmHandler = new AlarmHandler(context);\r\n        alarmHandler.cancelAlarmManager();\r\n\r\n        Log.d(&quot;WIDGET&quot;, &quot;Widget removed!&quot;);\r\n    }\r\n}\r\n```\r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.WAKE_LOCK&quot; /&gt;\r\n\r\n    &lt;application\r\n        android:allowBackup=&quot;true&quot;\r\n        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\r\n        android:fullBackupContent=&quot;@xml/backup_rules&quot;\r\n        android:icon=&quot;@mipmap/ic_launcher&quot;\r\n        android:label=&quot;@string/app_name&quot;\r\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\r\n        android:supportsRtl=&quot;true&quot;\r\n        android:theme=&quot;@style/Theme.AmazonWidget&quot;\r\n        tools:targetApi=&quot;31&quot;&gt;\r\n        &lt;activity\r\n            android:name=&quot;.MainActivity&quot;\r\n            android:exported=&quot;true&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n\r\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/activity&gt;\r\n\r\n        &lt;receiver\r\n            android:name=&quot;.MyWidget&quot;\r\n            android:exported=&quot;true&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.appwidget.action.APPWIDGET_UPDATE&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n\r\n            &lt;meta-data\r\n                android:name=&quot;android.appwidget.provider&quot;\r\n                android:resource=&quot;@xml/widget_info&quot; /&gt;\r\n        &lt;/receiver&gt;\r\n\r\n        &lt;receiver\r\n            android:name=&quot;.WidgetService&quot;\r\n            android:enabled=&quot;true&quot; /&gt;\r\n    &lt;/application&gt;\r\n\r\n&lt;/manifest&gt;\r\n```\r\n\r\nGoing into the app&#39;s information about permissions, it tells me there are no permissions required.\r\n\r\nCan you tell me where I&#39;m going wrong?","title":"Android java widget call http error android.os.NetworkOnMainThreadException","body":"<p>I am having the following error:</p>\n<pre><code>FATAL EXCEPTION: main\nProcess: com.name.app, PID: 21535\njava.lang.RuntimeException: Unable to start receiver com.name.app.MyWidget: \nandroid.os.NetworkOnMainThreadException\nat android.app.ActivityThread.handleReceiver(ActivityThread.java:4012)\nat android.app.ActivityThread.access$1500(ActivityThread.java:232)\nat android.app.ActivityThread$H.handleMessage(ActivityThread.java:2025)\n....\n</code></pre>\n<p>I need to make a widget every certain time make an <code>http</code> call to a website for scraping.</p>\n<p>I have the following code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.name.app;\n\nimport android.appwidget.AppWidgetManager;\nimport android.appwidget.AppWidgetProvider;\nimport android.content.Context;\nimport android.content.SharedPreferences;\nimport android.util.Log;\nimport android.widget.RelativeLayout;\nimport android.widget.RemoteViews;\n\nimport org.jsoup.Jsoup;\nimport org.jsoup.nodes.Document;\n\nimport java.io.IOException;\n\npublic class MyWidget extends AppWidgetProvider {\n\n    void updateAppWidget(Context context, AppWidgetManager appWidgetManager, int appWidgetId) {\n        RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.widget_design);\n\n        //get the widget value\n        SharedPreferences preferences = context.getSharedPreferences(&quot;PREFS&quot;, 0);\n        int value = preferences.getInt(&quot;value&quot;, 1);\n\n        //set the value in the textview\n        views.setTextViewText(R.id.text, &quot;&quot; + value);\n\n        //update the widget\n        appWidgetManager.updateAppWidget(appWidgetId, views);\n\n        //reschedule the widget refresh\n        AlarmHandler alarmHandler = new AlarmHandler(context);\n        alarmHandler.cancelAlarmManager();\n        alarmHandler.setAlarmManager();\n\n        Document doc;\n\n        try {\n            // fetching the target website\n            doc = Jsoup.connect(&quot;https://pageWeb...&quot;).get();\n        } catch (IOException e) {\n            throw new RuntimeException(e);\n        }\n\n        Log.d(&quot;WIDGET&quot;, &quot;Widget updated!&quot;);\n    }\n\n    @Override\n    public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {\n        for (int appWidgetId: appWidgetIds) {\n            updateAppWidget(context, appWidgetManager, appWidgetId);\n        }\n    }\n\n    @Override\n    public void onDisabled(Context context) {\n        //stop updating the widget\n        AlarmHandler alarmHandler = new AlarmHandler(context);\n        alarmHandler.cancelAlarmManager();\n\n        Log.d(&quot;WIDGET&quot;, &quot;Widget removed!&quot;);\n    }\n}\n</code></pre>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\n\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.WAKE_LOCK&quot; /&gt;\n\n    &lt;application\n        android:allowBackup=&quot;true&quot;\n        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\n        android:fullBackupContent=&quot;@xml/backup_rules&quot;\n        android:icon=&quot;@mipmap/ic_launcher&quot;\n        android:label=&quot;@string/app_name&quot;\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\n        android:supportsRtl=&quot;true&quot;\n        android:theme=&quot;@style/Theme.AmazonWidget&quot;\n        tools:targetApi=&quot;31&quot;&gt;\n        &lt;activity\n            android:name=&quot;.MainActivity&quot;\n            android:exported=&quot;true&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n\n        &lt;receiver\n            android:name=&quot;.MyWidget&quot;\n            android:exported=&quot;true&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.appwidget.action.APPWIDGET_UPDATE&quot; /&gt;\n            &lt;/intent-filter&gt;\n\n            &lt;meta-data\n                android:name=&quot;android.appwidget.provider&quot;\n                android:resource=&quot;@xml/widget_info&quot; /&gt;\n        &lt;/receiver&gt;\n\n        &lt;receiver\n            android:name=&quot;.WidgetService&quot;\n            android:enabled=&quot;true&quot; /&gt;\n    &lt;/application&gt;\n\n&lt;/manifest&gt;\n</code></pre>\n<p>Going into the app's information about permissions, it tells me there are no permissions required.</p>\n<p>Can you tell me where I'm going wrong?</p>\n"},{"tags":["java","selenium-webdriver","gitlab","cicd"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":1,"creation_date":1683270993,"post_id":76179652,"comment_id":134344106,"body_markdown":"Please [edit] the post and add a [MRE]. Without seeing some code, we are not able to help.","body":"Please <a href=\"https://stackoverflow.com/posts/76179652/edit\">edit</a> the post and add a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Without seeing some code, we are not able to help."}],"owner":{"account_id":28514103,"reputation":1,"user_id":21823681,"display_name":"Ankur Jain"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683284768,"creation_date":1683270857,"question_id":76179652,"body_markdown":"Getting the below error that session not created while running the CI/CD for selenium with java for automation testing.\r\n\r\norg.openqa.selenium.SessionNotCreatedException:\r\n\r\nThe code should be execute into the browser and give the test result.","title":"Getting the error in GitLab while running the CI/CD","body":"<p>Getting the below error that session not created while running the CI/CD for selenium with java for automation testing.</p>\n<p>org.openqa.selenium.SessionNotCreatedException:</p>\n<p>The code should be execute into the browser and give the test result.</p>\n"},{"tags":["java","spring","spring-boot","junit-jupiter","data-jpa-test"],"comments":[{"owner":{"account_id":10777133,"reputation":7282,"user_id":7928721,"display_name":"samabcde"},"score":0,"creation_date":1669821805,"post_id":74069144,"comment_id":131731163,"body_markdown":"I can&#39;t get your error message with `@DataJpaTest`, but with `@SpringbootTest`.","body":"I can&#39;t get your error message with <code>@DataJpaTest</code>, but with <code>@SpringbootTest</code>."},{"owner":{"account_id":26621704,"reputation":11,"user_id":20240398,"display_name":"Hypermiler"},"score":0,"creation_date":1669915118,"post_id":74069144,"comment_id":131756661,"body_markdown":"@samabcde Tried it again with SpringBoot 2.7.6 and 3.0.0, both are not working with `@DataJpaTest` and I can&#39;t use `@SpringbootTest` because I need the TestEntityManager.","body":"@samabcde Tried it again with SpringBoot 2.7.6 and 3.0.0, both are not working with <code>@DataJpaTest</code> and I can&#39;t use <code>@SpringbootTest</code> because I need the TestEntityManager."},{"owner":{"account_id":10777133,"reputation":7282,"user_id":7928721,"display_name":"samabcde"},"score":0,"creation_date":1670142673,"post_id":74069144,"comment_id":131801322,"body_markdown":"What I mean is your error does not match the code you provided. Do you see other error when using `@DataJpaTest`?","body":"What I mean is your error does not match the code you provided. Do you see other error when using <code>@DataJpaTest</code>?"},{"owner":{"account_id":26621704,"reputation":11,"user_id":20240398,"display_name":"Hypermiler"},"score":0,"creation_date":1670233522,"post_id":74069144,"comment_id":131820336,"body_markdown":"@samabcde Yes, the error is definitely happening only with `@DataJpaTest` in my case.","body":"@samabcde Yes, the error is definitely happening only with <code>@DataJpaTest</code> in my case."},{"owner":{"account_id":26621704,"reputation":11,"user_id":20240398,"display_name":"Hypermiler"},"score":0,"creation_date":1670332612,"post_id":74069144,"comment_id":131847970,"body_markdown":"@samabcde And yes, all errors that get thrown with `@DataJpaTest` are contained in the stacktrace.","body":"@samabcde And yes, all errors that get thrown with <code>@DataJpaTest</code> are contained in the stacktrace."}],"answers":[{"comments":[{"owner":{"account_id":26621704,"reputation":11,"user_id":20240398,"display_name":"Hypermiler"},"score":0,"creation_date":1665758668,"post_id":74069229,"comment_id":130779966,"body_markdown":"I tried different versions of JUnit before. We use Gradle (build.gradle) though.","body":"I tried different versions of JUnit before. We use Gradle (build.gradle) though."}],"tags":[],"owner":{"account_id":26564177,"reputation":36,"user_id":20191548,"display_name":"AbhishekVinayak"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1665750502,"creation_date":1665750502,"answer_id":74069229,"question_id":74069144,"body_markdown":"Try changing the corresponding test versions in pom.xml if it helps","title":"Upgrade from SpringBoot 2.6 -&gt; 2.7 - No qualifying bean of type &#39;org.springframework.boot....TestEntityManager&#39; available","body":"<p>Try changing the corresponding test versions in pom.xml if it helps</p>\n"},{"comments":[{"owner":{"account_id":21330249,"reputation":297,"user_id":15702124,"display_name":"LenglBoy"},"score":0,"creation_date":1683284468,"post_id":76181393,"comment_id":134346747,"body_markdown":"FYI: `DataJpaTest` and `SpringBootTest` are 2 very different things. Now your test is way more heavy than before becaus eit ramps up the full spring-service in total and not just the persistence layer. Normally you want and should keep the scope in order of saving execution time and resources.","body":"FYI: <code>DataJpaTest</code> and <code>SpringBootTest</code> are 2 very different things. Now your test is way more heavy than before becaus eit ramps up the full spring-service in total and not just the persistence layer. Normally you want and should keep the scope in order of saving execution time and resources."},{"owner":{"account_id":26621704,"reputation":11,"user_id":20240398,"display_name":"Hypermiler"},"score":0,"creation_date":1683287583,"post_id":76181393,"comment_id":134347341,"body_markdown":"@LenglBoy Yes, I know this. But in my case this solution was the only one that worked and made my tests compatible with SpringBoot 2.7. Actually I had the feeling that the tests were even faster with this kind of implementation (might be because I dropped the direct calling of the EntityManager). If you have a better solution please share it as an answer to my question.","body":"@LenglBoy Yes, I know this. But in my case this solution was the only one that worked and made my tests compatible with SpringBoot 2.7. Actually I had the feeling that the tests were even faster with this kind of implementation (might be because I dropped the direct calling of the EntityManager). If you have a better solution please share it as an answer to my question."},{"owner":{"account_id":26621704,"reputation":11,"user_id":20240398,"display_name":"Hypermiler"},"score":0,"creation_date":1683288493,"post_id":76181393,"comment_id":134347570,"body_markdown":"@LenglBoy And please consider that I have been waiting for a better solution for over six months now but I got nothing sadly... That&#39;s why I accepted this not very elegant approach as soon as I stumbled across it.","body":"@LenglBoy And please consider that I have been waiting for a better solution for over six months now but I got nothing sadly... That&#39;s why I accepted this not very elegant approach as soon as I stumbled across it."}],"tags":[],"owner":{"account_id":26621704,"reputation":11,"user_id":20240398,"display_name":"Hypermiler"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1683284023,"creation_date":1683283723,"answer_id":76181393,"question_id":74069144,"body_markdown":"I fixed the issue myself after a lot of trial and error and research.\r\n\r\nThe solution I found was to switch from `@DataJpaTest` to `@SpringBootTest` and to remove the `@Autowired TestEntityManager`.\r\nTo persist test data I now use the `repository.save()` method of the `@Autowired` repositories.\r\n\r\nI created dummy repositories as sub-classes of the test class if I needed to save a test entity for which I do not have a real repository with queries in it.\r\n\r\nThe usage of `repository.save()` has the side effect that the persisted (saved) entities now can&#39;t be asserted for equality anymore because they wont be the same object (memory address) when the repository returns them after a query-method is called in the test. \r\n\r\nMy solution for that was to use AssertJ&#39;s `assertThat(X).usingRecursiveComparison().isEqualTo(X)` instead of JUnits `assertEquals(X, X)` for these cases.\r\n\r\nI hope this helps anyone. :)","title":"Upgrade from SpringBoot 2.6 -&gt; 2.7 - No qualifying bean of type &#39;org.springframework.boot....TestEntityManager&#39; available","body":"<p>I fixed the issue myself after a lot of trial and error and research.</p>\n<p>The solution I found was to switch from <code>@DataJpaTest</code> to <code>@SpringBootTest</code> and to remove the <code>@Autowired TestEntityManager</code>.\nTo persist test data I now use the <code>repository.save()</code> method of the <code>@Autowired</code> repositories.</p>\n<p>I created dummy repositories as sub-classes of the test class if I needed to save a test entity for which I do not have a real repository with queries in it.</p>\n<p>The usage of <code>repository.save()</code> has the side effect that the persisted (saved) entities now can't be asserted for equality anymore because they wont be the same object (memory address) when the repository returns them after a query-method is called in the test.</p>\n<p>My solution for that was to use AssertJ's <code>assertThat(X).usingRecursiveComparison().isEqualTo(X)</code> instead of JUnits <code>assertEquals(X, X)</code> for these cases.</p>\n<p>I hope this helps anyone. :)</p>\n"}],"owner":{"account_id":26621704,"reputation":11,"user_id":20240398,"display_name":"Hypermiler"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1704,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76181393,"answer_count":2,"score":1,"last_activity_date":1683284343,"creation_date":1665750090,"question_id":74069144,"body_markdown":"I updated from SpringBoot 2.6.12 to 2.7.11 and as a consequence our RepositoryTests were not working anymore. \r\nThe @autowired TestEntityManager can&#39;t be filled by a qualifying bean after the upgrade.\r\nI tried a lot of solutions from other threads and websites but most of them were quite old and it seems like the solution for 2.7 has to be a different one.\r\n\r\nFurthermore we were using H2 as embedded database before and the error was mostly the same, so the root-problem seems not be related to the new embedded test DB we use now (Zonky).\r\n\r\nI would be very grateful for help.\r\n\r\n**RepositoryTest:**\r\n```\r\npackage eu.X.api.pod.repository;\r\n\r\nimport eu.X.api.pod.model.PodUrlEntity;\r\nimport eu.X.api.pod.repository.PodRepository;\r\nimport io.zonky.test.db.AutoConfigureEmbeddedDatabase;\r\nimport org.junit.jupiter.api.Test;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTest;\r\nimport org.springframework.boot.test.autoconfigure.orm.jpa.TestEntityManager;\r\nimport org.springframework.test.context.TestPropertySource;\r\n\r\nimport java.util.Optional;\r\n\r\nimport static io.zonky.test.db.AutoConfigureEmbeddedDatabase.DatabaseProvider.ZONKY;\r\n\r\n@DataJpaTest\r\n@AutoConfigureEmbeddedDatabase(provider = ZONKY)\r\n@TestPropertySource(locations = &quot;classpath:application-test.properties&quot;)\r\nclass PodRepositoryTest {\r\n\r\n    @Autowired\r\n    private TestEntityManager entityManager;\r\n    @Autowired\r\n    private PodRepository podRepository;\r\n\r\n    @Test\r\n    void whenFindUrlByTrackIdAndUniqueContactId_thenReturnUrl() {\r\n        // given\r\n        PodUrlEntity podUrlEntity = PodUrlEntity.builder()\r\n                                                .trackId(&quot;12345678&quot;)\r\n                                                .contactId(&quot;276a15LnuT&quot;)\r\n                                                .url(&quot;de-200/2022/01/10/0170/img_de-200_20220110092858_10815_STP-DE-200-DPKC-5001.png&quot;)\r\n                                                .build();\r\n        entityManager.persist(podUrlEntity);\r\n        entityManager.flush();\r\n\r\n        // when\r\n        Optional&lt;String&gt; found = podRepository.findUrlByTrackIdAndUniqueContactId(podUrlEntity.getTrackId(),\r\n                                                                                  podUrlEntity.getContactId());\r\n        // then\r\n        assertEquals(podUrlEntity.getUrl(), found.get());\r\n    }\r\n\r\n}\r\n```\r\n\r\n**Stacktrace:**\r\n```\r\n\r\n&gt; Task :compileJava UP-TO-DATE\r\n&gt; Task :processResources UP-TO-DATE\r\n&gt; Task :classes UP-TO-DATE\r\n&gt; Task :compileTestJava UP-TO-DATE\r\n&gt; Task :processTestResources UP-TO-DATE\r\n&gt; Task :testClasses UP-TO-DATE\r\n&gt; Task :test FAILED\r\nSLF4J: Class path contains multiple SLF4J bindings.\r\nSLF4J: Found binding in [jar:file:/C:/Users/X/.gradle/caches/modules-2/files-2.1/eu.X.X.lib.spring/lib-spring-web/1.2.0/8a53726f79df95d1695115732c517efba0aca950/lib-spring-web-1.2.0.jar!/org/slf4j/impl/StaticLoggerBinder.class]\r\nSLF4J: Found binding in [jar:file:/C:/Users/X/.gradle/caches/modules-2/files-2.1/ch.qos.logback/logback-classic/1.2.11/4741689214e9d1e8408b206506cbe76d1c6a7d60/logback-classic-1.2.11.jar!/org/slf4j/impl/StaticLoggerBinder.class]\r\nSLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation.\r\nSLF4J: Actual binding is of type [ch.qos.logback.classic.util.ContextSelectorStaticBinder]\r\n13:39:24.980 [Test worker] DEBUG org.springframework.test.context.BootstrapUtils - Instantiating CacheAwareContextLoaderDelegate from class [org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate]\r\n13:39:24.987 [Test worker] DEBUG org.springframework.test.context.BootstrapUtils - Instantiating BootstrapContext using constructor [public org.springframework.test.context.support.DefaultBootstrapContext(java.lang.Class,org.springframework.test.context.CacheAwareContextLoaderDelegate)]\r\n13:39:25.016 [Test worker] DEBUG org.springframework.test.context.BootstrapUtils - Instantiating TestContextBootstrapper for test class [eu.X.X.api.pod.repository.PodRepositoryTest] from class [org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTestContextBootstrapper]\r\n13:39:25.024 [Test worker] INFO org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTestContextBootstrapper - Neither @ContextConfiguration nor @ContextHierarchy found for test class [eu.X.X.api.pod.repository.PodRepositoryTest], using SpringBootContextLoader\r\n13:39:25.027 [Test worker] DEBUG org.springframework.test.context.support.AbstractContextLoader - Did not detect default resource location for test class [eu.X.X.api.pod.repository.PodRepositoryTest]: class path resource [eu/X/X/api/pod/repository/PodRepositoryTest-context.xml] does not exist\r\n13:39:25.027 [Test worker] DEBUG org.springframework.test.context.support.AbstractContextLoader - Did not detect default resource location for test class [eu.X.X.api.pod.repository.PodRepositoryTest]: class path resource [eu/X/X/api/pod/repository/PodRepositoryTestContext.groovy] does not exist\r\n13:39:25.027 [Test worker] INFO org.springframework.test.context.support.AbstractContextLoader - Could not detect default resource locations for test class [eu.X.X.api.pod.repository.PodRepositoryTest]: no resource found for suffixes {-context.xml, Context.groovy}.\r\n13:39:25.029 [Test worker] INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [eu.X.X.api.pod.repository.PodRepositoryTest]: PodRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.\r\n13:39:25.077 [Test worker] DEBUG org.springframework.test.context.support.ActiveProfilesUtils - Could not find an &#39;annotation declaring class&#39; for annotation type [org.springframework.test.context.ActiveProfiles] and class [eu.X.X.api.pod.repository.PodRepositoryTest]\r\n13:39:25.119 [Test worker] DEBUG org.springframework.context.annotation.ClassPathScanningCandidateComponentProvider - Identified candidate component class: file [C:\\Users\\X\\Desktop\\X-microservices-kafka\\X-pod-service\\build\\classes\\java\\main\\eu\\X\\X\\api\\pod\\PodServiceApplication.class]\r\n13:39:25.120 [Test worker] INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration eu.X.X.api.pod.PodServiceApplication for test class eu.X.X.api.pod.repository.PodRepositoryTest\r\n13:39:25.122 [Test worker] DEBUG org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTestContextBootstrapper - @TestExecutionListeners is not present for class [eu.X.X.api.pod.repository.PodRepositoryTest]: using defaults.\r\n13:39:25.122 [Test worker] INFO org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, io.zonky.test.db.EmbeddedDatabaseTestExecutionListener, io.zonky.test.db.event.EventPublishingTestExecutionListener, io.zonky.test.db.flyway.OptimizedFlywayTestExecutionListener]\r\n13:39:25.138 [Test worker] INFO org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@4c168660, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@52b56a3e, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@fd0e5b6, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@4eed46ee, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@36b0fcd5, org.springframework.test.context.support.DirtiesContextTestExecutionListener@4fad94a7, io.zonky.test.db.EmbeddedDatabaseTestExecutionListener@475835b1, io.zonky.test.db.flyway.OptimizedFlywayTestExecutionListener@6326d182, org.springframework.test.context.transaction.TransactionalTestExecutionListener@5241cf67, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@716a7124, org.springframework.test.context.event.EventPublishingTestExecutionListener@77192705, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@226642a5, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@7e809b79, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@5cc126dc, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@625e134e, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@72bd06ca, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@89c10b7, io.zonky.test.db.event.EventPublishingTestExecutionListener@5dbe30be]\r\n13:39:25.141 [Test worker] DEBUG org.springframework.test.context.support.AbstractDirtiesContextTestExecutionListener - Before test class: context [DefaultTestContext@3d8bbcdc testClass = PodRepositoryTest, testInstance = [null], testMethod = [null], testException = [null], mergedContextConfiguration = [MergedContextConfiguration@52500920 testClass = PodRepositoryTest, locations = &#39;{}&#39;, classes = &#39;{class eu.X.X.api.pod.PodServiceApplication}&#39;, contextInitializerClasses = &#39;[]&#39;, activeProfiles = &#39;{}&#39;, propertySourceLocations = &#39;{classpath:application-test.properties}&#39;, propertySourceProperties = &#39;{org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTestContextBootstrapper=true}&#39;, contextCustomizers = set[org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3a1dd365, org.springframework.boot.test.autoconfigure.actuate.metrics.MetricsExportContextCustomizerFactory$DisableMetricExportContextCustomizer@315f43d5, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@351584c0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@a0d8ffa4, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4c4748bf, [ImportsContextCustomizer@117e0fe5 key = []], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@20f12539, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@13cf7d52, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, io.zonky.test.db.EmbeddedDatabaseContextCustomizerFactory$EmbeddedDatabaseContextCustomizer@8a4aa01f, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@0], contextLoader = &#39;org.springframework.boot.test.context.SpringBootContextLoader&#39;, parent = [null]], attributes = map[[empty]]], class annotated with @DirtiesContext [false] with mode [null].\r\n\r\n  .   ____          _            __ _ _\r\n /\\\\ / ___&#39;_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\r\n( ( )\\___ | &#39;_ | &#39;_| | &#39;_ \\/ _` | \\ \\ \\ \\\r\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\r\n  &#39;  |____| .__|_| |_|_| |_\\__, | / / / /\r\n =========|_|==============|___/=/_/_/_/\r\n :: Spring Boot ::                        \r\n\r\n2022-10-14 13:39:25.459  INFO 22352 --- [    Test worker] e.g.s.a.p.repository.PodRepositoryTest   : Starting PodRepositoryTest using Java 17.0.4.1 on DE03-0101WL6NL6 with PID 22352 (started by X in C:\\Users\\X\\Desktop\\X-microservices-kafka\\X-pod-service)\r\n2022-10-14 13:39:25.460  INFO 22352 --- [    Test worker] e.g.s.a.p.repository.PodRepositoryTest   : No active profile set, falling back to 1 default profile: &quot;default&quot;\r\n2022-10-14 13:39:25.684  INFO 22352 --- [    Test worker] EmbeddedDatabaseContextCustomizerFactory : Replacing &#39;dataSource&#39; DataSource bean with embedded version\r\n2022-10-14 13:39:25.757  INFO 22352 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean &#39;io.zonky.test.db.config.EmbeddedDatabaseAutoConfiguration&#39; of type [io.zonky.test.db.config.EmbeddedDatabaseAutoConfiguration$$EnhancerBySpringCGLIB$$6fc806ea] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)\r\n2022-10-14 13:39:25.867  INFO 22352 --- [    Test worker] e.g.s.a.p.repository.PodRepositoryTest   : Started PodRepositoryTest in 0.704 seconds (JVM running for 1.58)\r\n\r\n\r\n\r\n============================\r\nCONDITIONS EVALUATION REPORT\r\n============================\r\n\r\n\r\nPositive matches:\r\n-----------------\r\n\r\n   EmbeddedDatabaseContextCustomizerFactory.PrimaryDataSourceAutoConfiguration matched:\r\n      - NoneNestedConditions 0 matched 1 did not; NestedCondition on EmbeddedDatabaseCondition.EmbeddedDatabaseDisabled @ConditionalOnProperty (zonky.test.database.replace=none) did not find property &#39;replace&#39; (EmbeddedDatabaseCondition)\r\n\r\n   EmbeddedDatabaseContextCustomizerFactory.PrimaryDataSourceAutoConfiguration#embeddedDataSource1 matched:\r\n      - @ConditionalOnMissingBean (types: javax.sql.DataSource; SearchStrategy: all) did not find any beans (OnBeanCondition)\r\n\r\n\r\nNegative matches:\r\n-----------------\r\n\r\n    None\r\n\r\n\r\nExclusions:\r\n-----------\r\n\r\n    None\r\n\r\n\r\nUnconditional classes:\r\n----------------------\r\n\r\n    None\r\n\r\n\r\n\r\n2022-10-14 13:39:25.891 ERROR 22352 --- [    Test worker] o.s.test.context.TestContextManager      : Caught exception while allowing TestExecutionListener [org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@36b0fcd5] to prepare test instance [eu.X.X.api.pod.repository.PodRepositoryTest@fe7b6b0]\r\n\r\norg.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;eu.X.X.api.pod.repository.PodRepositoryTest&#39;: Unsatisfied dependency expressed through field &#39;entityManager&#39;; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type &#39;org.springframework.boot.test.autoconfigure.orm.jpa.TestEntityManager&#39; available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}\r\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:659) ~[lib-spring-web-1.2.0.jar:na]\r\n\r\n--- Rest is ommited\r\n\r\n\r\nPodRepositoryTest &gt; whenFindUrlByUnitNoAndUniqueContactId_thenReturnUrl() FAILED\r\n    org.springframework.beans.factory.UnsatisfiedDependencyException at AutowiredAnnotationBeanPostProcessor.java:659\r\n        Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException at DefaultListableBeanFactory.java:1799\r\nPodRepositoryTest &gt; whenFindUrlByTrackIdAndUniqueContactId_thenReturnUrl() FAILED\r\n    org.springframework.beans.factory.UnsatisfiedDependencyException at AutowiredAnnotationBeanPostProcessor.java:659\r\n        Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException at DefaultListableBeanFactory.java:1799\r\nPodRepositoryTest &gt; whenFindTrackIdByUnitNoAndUniqueContactId_thenReturnTrackId() FAILED\r\n    org.springframework.beans.factory.UnsatisfiedDependencyException at AutowiredAnnotationBeanPostProcessor.java:659\r\n        Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException at DefaultListableBeanFactory.java:1799\r\n3 tests completed, 3 failed\r\nFAILURE: Build failed with an exception.\r\n* What went wrong:\r\nExecution failed for task &#39;:test&#39;.\r\n&gt; There were failing tests. See the report at: file:///C:/Users/X/Desktop/X-microservices-kafka/X-pod-service/build/reports/tests/test/index.html\r\n* Try:\r\n&gt; Run with --stacktrace option to get the stack trace.\r\n&gt; Run with --info or --debug option to get more log output.\r\n&gt; Run with --scan to get full insights.\r\n* Get more help at https://help.gradle.org\r\nBUILD FAILED in 2s\r\n5 actionable tasks: 1 executed, 4 up-to-date\r\n```\r\n\r\n**build.gradle:**\r\n```\r\nplugins {\r\n    id &#39;java&#39;\r\n    id &#39;org.springframework.boot&#39; version &#39;2.7.4&#39;\r\n    id &#39;io.spring.dependency-management&#39; version &#39;1.0.14.RELEASE&#39;\r\n}\r\n\r\ngroup = &#39;eu.X.X.api&#39;\r\nversion = System.getProperty(&quot;VERSION&quot;)\r\nsourceCompatibility = JavaVersion.VERSION_17\r\n\r\nconfigurations {\r\n    compileOnly {\r\n        extendsFrom annotationProcessor\r\n    }\r\n}\r\n\r\nrepositories {\r\n    maven {\r\n        url &#39;http://X-nexus01.dc.X:8081/repository/maven-releases&#39;\r\n        allowInsecureProtocol = true\r\n    }\r\n    maven {\r\n        url &#39;http://X-nexus01.dc.X:8081/repository/maven-public&#39;\r\n        allowInsecureProtocol = true\r\n    }\r\n    maven {\r\n        url &#39;http://X-nexus01.dc.X:8081/repository/confluent.io-proxy&#39;\r\n        allowInsecureProtocol = true\r\n    }\r\n}\r\n\r\next {\r\n    jUnitVersion = &#39;5.9.1&#39;\r\n    lombokVersion = &#39;1.18.24&#39;\r\n    awsSdkVersion = &#39;2.17.276&#39;\r\n}\r\ndependencies {\r\n    // X\r\n    implementation group: &#39;eu.X.X.lib.spring&#39;, name: &#39;lib-spring-web&#39;, version: &#39;1.2.0&#39;\r\n    // Spring Boot\r\n    implementation group: &#39;org.springframework.boot&#39;, name: &#39;spring-boot-starter-web&#39;\r\n    implementation group: &#39;org.springframework.boot&#39;, name: &#39;spring-boot-starter-data-jpa&#39;\r\n    implementation group: &#39;org.springframework.boot&#39;, name: &#39;spring-boot-starter-actuator&#39;\r\n    testImplementation group: &#39;org.springframework.boot&#39;, name: &#39;spring-boot-starter-test&#39;\r\n    annotationProcessor group: &#39;org.springframework.boot&#39;, name: &#39;spring-boot-configuration-processor&#39;\r\n    // Apache\r\n    implementation group: &#39;org.apache.commons&#39;, name: &#39;commons-pool2&#39;, version: &#39;2.11.1&#39;\r\n    implementation group: &#39;org.apache.httpcomponents&#39;, name: &#39;httpclient&#39;, version: &#39;4.5.13&#39;\r\n    implementation group: &#39;org.apache.pdfbox&#39;, name: &#39;pdfbox&#39;, version: &#39;2.0.26&#39;\r\n    // Amazon\r\n    implementation group: &#39;software.amazon.awssdk&#39;, name: &#39;s3&#39;, version: &quot;${awsSdkVersion}&quot;\r\n    implementation group: &#39;software.amazon.awssdk&#39;, name: &#39;apache-client&#39;, version: &quot;${awsSdkVersion}&quot;\r\n    implementation group: &#39;com.amazonaws&#39;, name: &#39;aws-java-sdk-s3&#39;, version: &#39;1.12.305&#39;\r\n    // JUnit\r\n    testImplementation group: &#39;org.junit.jupiter&#39;, name: &#39;junit-jupiter-api&#39;, version: &quot;${jUnitVersion}&quot;\r\n    testImplementation group: &#39;org.junit.jupiter&#39;, name: &#39;junit-jupiter-params&#39;, version: &quot;${jUnitVersion}&quot;\r\n    testImplementation group: &#39;org.junit.jupiter&#39;, name: &#39;junit-jupiter-engine&#39;, version: &quot;${jUnitVersion}&quot;\r\n    // Lombok\r\n    compileOnly group: &#39;org.projectlombok&#39;, name: &#39;lombok&#39;, version: &quot;${lombokVersion}&quot;\r\n    annotationProcessor group:&#39;org.projectlombok&#39;, name:&#39;lombok&#39;, version: &quot;${lombokVersion}&quot;\r\n    // Zonky\r\n    implementation enforcedPlatform( group: &#39;io.zonky.test.postgres&#39;, name: &#39;embedded-postgres-binaries-bom&#39;, version:&#39;14.5.0&#39;)\r\n    testImplementation group: &#39;io.zonky.test&#39;, name: &#39;embedded-database-spring-test&#39;, version:&#39;2.1.2&#39;\r\n    testRuntimeOnly group: &#39;io.zonky.test&#39;, name: &#39;embedded-postgres&#39;, version:&#39;2.0.1&#39;\r\n\r\n    // Miscellaneous\r\n    implementation group: &#39;org.zalando&#39;, name: &#39;logbook-spring-boot-starter&#39;, version: &#39;2.14.0&#39;\r\n    implementation group: &#39;org.postgresql&#39;, name: &#39;postgresql&#39;, version: &#39;42.5.0&#39;\r\n    implementation group: &#39;com.lowagie&#39;, name:&#39;itext&#39;, version: &#39;2.1.7&#39;\r\n    implementation group: &#39;net.sf.jasperreports&#39;, name:&#39;jasperreports&#39;, version: &#39;6.20.0&#39;\r\n    implementation group: &#39;org.springdoc&#39;, name: &#39;springdoc-openapi-ui&#39;, version: &#39;1.6.11&#39;\r\n    implementation group: &#39;com.auth0&#39;, name: &#39;java-jwt&#39;, version: &#39;4.0.0&#39;\r\n    testImplementation group: &#39;org.mockito&#39;, name: &#39;mockito-core&#39;, version: &#39;4.4.0&#39;\r\n}\r\n\r\ntest {\r\n    useJUnitPlatform()\r\n}\r\n\r\n--- Rest is ommited\r\n\r\n```","title":"Upgrade from SpringBoot 2.6 -&gt; 2.7 - No qualifying bean of type &#39;org.springframework.boot....TestEntityManager&#39; available","body":"<p>I updated from SpringBoot 2.6.12 to 2.7.11 and as a consequence our RepositoryTests were not working anymore.\nThe @autowired TestEntityManager can't be filled by a qualifying bean after the upgrade.\nI tried a lot of solutions from other threads and websites but most of them were quite old and it seems like the solution for 2.7 has to be a different one.</p>\n<p>Furthermore we were using H2 as embedded database before and the error was mostly the same, so the root-problem seems not be related to the new embedded test DB we use now (Zonky).</p>\n<p>I would be very grateful for help.</p>\n<p><strong>RepositoryTest:</strong></p>\n<pre><code>package eu.X.api.pod.repository;\n\nimport eu.X.api.pod.model.PodUrlEntity;\nimport eu.X.api.pod.repository.PodRepository;\nimport io.zonky.test.db.AutoConfigureEmbeddedDatabase;\nimport org.junit.jupiter.api.Test;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTest;\nimport org.springframework.boot.test.autoconfigure.orm.jpa.TestEntityManager;\nimport org.springframework.test.context.TestPropertySource;\n\nimport java.util.Optional;\n\nimport static io.zonky.test.db.AutoConfigureEmbeddedDatabase.DatabaseProvider.ZONKY;\n\n@DataJpaTest\n@AutoConfigureEmbeddedDatabase(provider = ZONKY)\n@TestPropertySource(locations = &quot;classpath:application-test.properties&quot;)\nclass PodRepositoryTest {\n\n    @Autowired\n    private TestEntityManager entityManager;\n    @Autowired\n    private PodRepository podRepository;\n\n    @Test\n    void whenFindUrlByTrackIdAndUniqueContactId_thenReturnUrl() {\n        // given\n        PodUrlEntity podUrlEntity = PodUrlEntity.builder()\n                                                .trackId(&quot;12345678&quot;)\n                                                .contactId(&quot;276a15LnuT&quot;)\n                                                .url(&quot;de-200/2022/01/10/0170/img_de-200_20220110092858_10815_STP-DE-200-DPKC-5001.png&quot;)\n                                                .build();\n        entityManager.persist(podUrlEntity);\n        entityManager.flush();\n\n        // when\n        Optional&lt;String&gt; found = podRepository.findUrlByTrackIdAndUniqueContactId(podUrlEntity.getTrackId(),\n                                                                                  podUrlEntity.getContactId());\n        // then\n        assertEquals(podUrlEntity.getUrl(), found.get());\n    }\n\n}\n</code></pre>\n<p><strong>Stacktrace:</strong></p>\n<pre><code>\n&gt; Task :compileJava UP-TO-DATE\n&gt; Task :processResources UP-TO-DATE\n&gt; Task :classes UP-TO-DATE\n&gt; Task :compileTestJava UP-TO-DATE\n&gt; Task :processTestResources UP-TO-DATE\n&gt; Task :testClasses UP-TO-DATE\n&gt; Task :test FAILED\nSLF4J: Class path contains multiple SLF4J bindings.\nSLF4J: Found binding in [jar:file:/C:/Users/X/.gradle/caches/modules-2/files-2.1/eu.X.X.lib.spring/lib-spring-web/1.2.0/8a53726f79df95d1695115732c517efba0aca950/lib-spring-web-1.2.0.jar!/org/slf4j/impl/StaticLoggerBinder.class]\nSLF4J: Found binding in [jar:file:/C:/Users/X/.gradle/caches/modules-2/files-2.1/ch.qos.logback/logback-classic/1.2.11/4741689214e9d1e8408b206506cbe76d1c6a7d60/logback-classic-1.2.11.jar!/org/slf4j/impl/StaticLoggerBinder.class]\nSLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation.\nSLF4J: Actual binding is of type [ch.qos.logback.classic.util.ContextSelectorStaticBinder]\n13:39:24.980 [Test worker] DEBUG org.springframework.test.context.BootstrapUtils - Instantiating CacheAwareContextLoaderDelegate from class [org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate]\n13:39:24.987 [Test worker] DEBUG org.springframework.test.context.BootstrapUtils - Instantiating BootstrapContext using constructor [public org.springframework.test.context.support.DefaultBootstrapContext(java.lang.Class,org.springframework.test.context.CacheAwareContextLoaderDelegate)]\n13:39:25.016 [Test worker] DEBUG org.springframework.test.context.BootstrapUtils - Instantiating TestContextBootstrapper for test class [eu.X.X.api.pod.repository.PodRepositoryTest] from class [org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTestContextBootstrapper]\n13:39:25.024 [Test worker] INFO org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTestContextBootstrapper - Neither @ContextConfiguration nor @ContextHierarchy found for test class [eu.X.X.api.pod.repository.PodRepositoryTest], using SpringBootContextLoader\n13:39:25.027 [Test worker] DEBUG org.springframework.test.context.support.AbstractContextLoader - Did not detect default resource location for test class [eu.X.X.api.pod.repository.PodRepositoryTest]: class path resource [eu/X/X/api/pod/repository/PodRepositoryTest-context.xml] does not exist\n13:39:25.027 [Test worker] DEBUG org.springframework.test.context.support.AbstractContextLoader - Did not detect default resource location for test class [eu.X.X.api.pod.repository.PodRepositoryTest]: class path resource [eu/X/X/api/pod/repository/PodRepositoryTestContext.groovy] does not exist\n13:39:25.027 [Test worker] INFO org.springframework.test.context.support.AbstractContextLoader - Could not detect default resource locations for test class [eu.X.X.api.pod.repository.PodRepositoryTest]: no resource found for suffixes {-context.xml, Context.groovy}.\n13:39:25.029 [Test worker] INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [eu.X.X.api.pod.repository.PodRepositoryTest]: PodRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.\n13:39:25.077 [Test worker] DEBUG org.springframework.test.context.support.ActiveProfilesUtils - Could not find an 'annotation declaring class' for annotation type [org.springframework.test.context.ActiveProfiles] and class [eu.X.X.api.pod.repository.PodRepositoryTest]\n13:39:25.119 [Test worker] DEBUG org.springframework.context.annotation.ClassPathScanningCandidateComponentProvider - Identified candidate component class: file [C:\\Users\\X\\Desktop\\X-microservices-kafka\\X-pod-service\\build\\classes\\java\\main\\eu\\X\\X\\api\\pod\\PodServiceApplication.class]\n13:39:25.120 [Test worker] INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration eu.X.X.api.pod.PodServiceApplication for test class eu.X.X.api.pod.repository.PodRepositoryTest\n13:39:25.122 [Test worker] DEBUG org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTestContextBootstrapper - @TestExecutionListeners is not present for class [eu.X.X.api.pod.repository.PodRepositoryTest]: using defaults.\n13:39:25.122 [Test worker] INFO org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, io.zonky.test.db.EmbeddedDatabaseTestExecutionListener, io.zonky.test.db.event.EventPublishingTestExecutionListener, io.zonky.test.db.flyway.OptimizedFlywayTestExecutionListener]\n13:39:25.138 [Test worker] INFO org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@4c168660, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@52b56a3e, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@fd0e5b6, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@4eed46ee, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@36b0fcd5, org.springframework.test.context.support.DirtiesContextTestExecutionListener@4fad94a7, io.zonky.test.db.EmbeddedDatabaseTestExecutionListener@475835b1, io.zonky.test.db.flyway.OptimizedFlywayTestExecutionListener@6326d182, org.springframework.test.context.transaction.TransactionalTestExecutionListener@5241cf67, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@716a7124, org.springframework.test.context.event.EventPublishingTestExecutionListener@77192705, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@226642a5, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@7e809b79, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@5cc126dc, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@625e134e, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@72bd06ca, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@89c10b7, io.zonky.test.db.event.EventPublishingTestExecutionListener@5dbe30be]\n13:39:25.141 [Test worker] DEBUG org.springframework.test.context.support.AbstractDirtiesContextTestExecutionListener - Before test class: context [DefaultTestContext@3d8bbcdc testClass = PodRepositoryTest, testInstance = [null], testMethod = [null], testException = [null], mergedContextConfiguration = [MergedContextConfiguration@52500920 testClass = PodRepositoryTest, locations = '{}', classes = '{class eu.X.X.api.pod.PodServiceApplication}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{classpath:application-test.properties}', propertySourceProperties = '{org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3a1dd365, org.springframework.boot.test.autoconfigure.actuate.metrics.MetricsExportContextCustomizerFactory$DisableMetricExportContextCustomizer@315f43d5, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@351584c0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@a0d8ffa4, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4c4748bf, [ImportsContextCustomizer@117e0fe5 key = []], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@20f12539, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@13cf7d52, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, io.zonky.test.db.EmbeddedDatabaseContextCustomizerFactory$EmbeddedDatabaseContextCustomizer@8a4aa01f, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@0], contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map[[empty]]], class annotated with @DirtiesContext [false] with mode [null].\n\n  .   ____          _            __ _ _\n /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n  '  |____| .__|_| |_|_| |_\\__, | / / / /\n =========|_|==============|___/=/_/_/_/\n :: Spring Boot ::                        \n\n2022-10-14 13:39:25.459  INFO 22352 --- [    Test worker] e.g.s.a.p.repository.PodRepositoryTest   : Starting PodRepositoryTest using Java 17.0.4.1 on DE03-0101WL6NL6 with PID 22352 (started by X in C:\\Users\\X\\Desktop\\X-microservices-kafka\\X-pod-service)\n2022-10-14 13:39:25.460  INFO 22352 --- [    Test worker] e.g.s.a.p.repository.PodRepositoryTest   : No active profile set, falling back to 1 default profile: &quot;default&quot;\n2022-10-14 13:39:25.684  INFO 22352 --- [    Test worker] EmbeddedDatabaseContextCustomizerFactory : Replacing 'dataSource' DataSource bean with embedded version\n2022-10-14 13:39:25.757  INFO 22352 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'io.zonky.test.db.config.EmbeddedDatabaseAutoConfiguration' of type [io.zonky.test.db.config.EmbeddedDatabaseAutoConfiguration$$EnhancerBySpringCGLIB$$6fc806ea] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)\n2022-10-14 13:39:25.867  INFO 22352 --- [    Test worker] e.g.s.a.p.repository.PodRepositoryTest   : Started PodRepositoryTest in 0.704 seconds (JVM running for 1.58)\n\n\n\n============================\nCONDITIONS EVALUATION REPORT\n============================\n\n\nPositive matches:\n-----------------\n\n   EmbeddedDatabaseContextCustomizerFactory.PrimaryDataSourceAutoConfiguration matched:\n      - NoneNestedConditions 0 matched 1 did not; NestedCondition on EmbeddedDatabaseCondition.EmbeddedDatabaseDisabled @ConditionalOnProperty (zonky.test.database.replace=none) did not find property 'replace' (EmbeddedDatabaseCondition)\n\n   EmbeddedDatabaseContextCustomizerFactory.PrimaryDataSourceAutoConfiguration#embeddedDataSource1 matched:\n      - @ConditionalOnMissingBean (types: javax.sql.DataSource; SearchStrategy: all) did not find any beans (OnBeanCondition)\n\n\nNegative matches:\n-----------------\n\n    None\n\n\nExclusions:\n-----------\n\n    None\n\n\nUnconditional classes:\n----------------------\n\n    None\n\n\n\n2022-10-14 13:39:25.891 ERROR 22352 --- [    Test worker] o.s.test.context.TestContextManager      : Caught exception while allowing TestExecutionListener [org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@36b0fcd5] to prepare test instance [eu.X.X.api.pod.repository.PodRepositoryTest@fe7b6b0]\n\norg.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'eu.X.X.api.pod.repository.PodRepositoryTest': Unsatisfied dependency expressed through field 'entityManager'; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.boot.test.autoconfigure.orm.jpa.TestEntityManager' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:659) ~[lib-spring-web-1.2.0.jar:na]\n\n--- Rest is ommited\n\n\nPodRepositoryTest &gt; whenFindUrlByUnitNoAndUniqueContactId_thenReturnUrl() FAILED\n    org.springframework.beans.factory.UnsatisfiedDependencyException at AutowiredAnnotationBeanPostProcessor.java:659\n        Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException at DefaultListableBeanFactory.java:1799\nPodRepositoryTest &gt; whenFindUrlByTrackIdAndUniqueContactId_thenReturnUrl() FAILED\n    org.springframework.beans.factory.UnsatisfiedDependencyException at AutowiredAnnotationBeanPostProcessor.java:659\n        Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException at DefaultListableBeanFactory.java:1799\nPodRepositoryTest &gt; whenFindTrackIdByUnitNoAndUniqueContactId_thenReturnTrackId() FAILED\n    org.springframework.beans.factory.UnsatisfiedDependencyException at AutowiredAnnotationBeanPostProcessor.java:659\n        Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException at DefaultListableBeanFactory.java:1799\n3 tests completed, 3 failed\nFAILURE: Build failed with an exception.\n* What went wrong:\nExecution failed for task ':test'.\n&gt; There were failing tests. See the report at: file:///C:/Users/X/Desktop/X-microservices-kafka/X-pod-service/build/reports/tests/test/index.html\n* Try:\n&gt; Run with --stacktrace option to get the stack trace.\n&gt; Run with --info or --debug option to get more log output.\n&gt; Run with --scan to get full insights.\n* Get more help at https://help.gradle.org\nBUILD FAILED in 2s\n5 actionable tasks: 1 executed, 4 up-to-date\n</code></pre>\n<p><strong>build.gradle:</strong></p>\n<pre><code>plugins {\n    id 'java'\n    id 'org.springframework.boot' version '2.7.4'\n    id 'io.spring.dependency-management' version '1.0.14.RELEASE'\n}\n\ngroup = 'eu.X.X.api'\nversion = System.getProperty(&quot;VERSION&quot;)\nsourceCompatibility = JavaVersion.VERSION_17\n\nconfigurations {\n    compileOnly {\n        extendsFrom annotationProcessor\n    }\n}\n\nrepositories {\n    maven {\n        url 'http://X-nexus01.dc.X:8081/repository/maven-releases'\n        allowInsecureProtocol = true\n    }\n    maven {\n        url 'http://X-nexus01.dc.X:8081/repository/maven-public'\n        allowInsecureProtocol = true\n    }\n    maven {\n        url 'http://X-nexus01.dc.X:8081/repository/confluent.io-proxy'\n        allowInsecureProtocol = true\n    }\n}\n\next {\n    jUnitVersion = '5.9.1'\n    lombokVersion = '1.18.24'\n    awsSdkVersion = '2.17.276'\n}\ndependencies {\n    // X\n    implementation group: 'eu.X.X.lib.spring', name: 'lib-spring-web', version: '1.2.0'\n    // Spring Boot\n    implementation group: 'org.springframework.boot', name: 'spring-boot-starter-web'\n    implementation group: 'org.springframework.boot', name: 'spring-boot-starter-data-jpa'\n    implementation group: 'org.springframework.boot', name: 'spring-boot-starter-actuator'\n    testImplementation group: 'org.springframework.boot', name: 'spring-boot-starter-test'\n    annotationProcessor group: 'org.springframework.boot', name: 'spring-boot-configuration-processor'\n    // Apache\n    implementation group: 'org.apache.commons', name: 'commons-pool2', version: '2.11.1'\n    implementation group: 'org.apache.httpcomponents', name: 'httpclient', version: '4.5.13'\n    implementation group: 'org.apache.pdfbox', name: 'pdfbox', version: '2.0.26'\n    // Amazon\n    implementation group: 'software.amazon.awssdk', name: 's3', version: &quot;${awsSdkVersion}&quot;\n    implementation group: 'software.amazon.awssdk', name: 'apache-client', version: &quot;${awsSdkVersion}&quot;\n    implementation group: 'com.amazonaws', name: 'aws-java-sdk-s3', version: '1.12.305'\n    // JUnit\n    testImplementation group: 'org.junit.jupiter', name: 'junit-jupiter-api', version: &quot;${jUnitVersion}&quot;\n    testImplementation group: 'org.junit.jupiter', name: 'junit-jupiter-params', version: &quot;${jUnitVersion}&quot;\n    testImplementation group: 'org.junit.jupiter', name: 'junit-jupiter-engine', version: &quot;${jUnitVersion}&quot;\n    // Lombok\n    compileOnly group: 'org.projectlombok', name: 'lombok', version: &quot;${lombokVersion}&quot;\n    annotationProcessor group:'org.projectlombok', name:'lombok', version: &quot;${lombokVersion}&quot;\n    // Zonky\n    implementation enforcedPlatform( group: 'io.zonky.test.postgres', name: 'embedded-postgres-binaries-bom', version:'14.5.0')\n    testImplementation group: 'io.zonky.test', name: 'embedded-database-spring-test', version:'2.1.2'\n    testRuntimeOnly group: 'io.zonky.test', name: 'embedded-postgres', version:'2.0.1'\n\n    // Miscellaneous\n    implementation group: 'org.zalando', name: 'logbook-spring-boot-starter', version: '2.14.0'\n    implementation group: 'org.postgresql', name: 'postgresql', version: '42.5.0'\n    implementation group: 'com.lowagie', name:'itext', version: '2.1.7'\n    implementation group: 'net.sf.jasperreports', name:'jasperreports', version: '6.20.0'\n    implementation group: 'org.springdoc', name: 'springdoc-openapi-ui', version: '1.6.11'\n    implementation group: 'com.auth0', name: 'java-jwt', version: '4.0.0'\n    testImplementation group: 'org.mockito', name: 'mockito-core', version: '4.4.0'\n}\n\ntest {\n    useJUnitPlatform()\n}\n\n--- Rest is ommited\n\n</code></pre>\n"},{"tags":["java","sonarqube","refactoring"],"comments":[{"owner":{"account_id":19934545,"reputation":554,"user_id":14607529,"display_name":"ODDminus1"},"score":0,"creation_date":1683283457,"post_id":76181318,"comment_id":134346554,"body_markdown":"Can you replace the exceptions with one common exception? Like `... throws Exception`?","body":"Can you replace the exceptions with one common exception? Like <code>... throws Exception</code>?"},{"owner":{"account_id":19934545,"reputation":554,"user_id":14607529,"display_name":"ODDminus1"},"score":0,"creation_date":1683283722,"post_id":76181318,"comment_id":134346608,"body_markdown":"Can you handle any of the exceptions? The IOException could possibly caught after the try-block and be rethrown as an unchecked exception?","body":"Can you handle any of the exceptions? The IOException could possibly caught after the try-block and be rethrown as an unchecked exception?"}],"answers":[{"tags":[],"owner":{"account_id":28494557,"reputation":181,"user_id":21806693,"display_name":"Igor Topolski"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1683284086,"creation_date":1683284086,"answer_id":76181435,"question_id":76181318,"body_markdown":"The SonarQube comment means that there&#39;s a chance the method will throw multiple exceptions. It means it might make it longer to handle exceptions this method can throw wherever it is being called (and possibly produce repetitive code).\r\n\r\nTo optimise this code you could handle both exceptions in the method itself and throw another exception instead.\r\n\r\nYou could possibly create a custom `KeyManagerFactoryException` (or more relevant, would be an exception relating to your class name). Your code that can produce an exception should be surrounded with [try-catch block][1] and both exceptions could be handled in there. \r\n\r\n```\r\npublic final KeyManagerFactory getKeyManagerFactory() throws KeyManagerFactoryException {\r\n    final var keyManagerFactory = KeyManagerFactory.getInstance(KeyManagerFactory.getDefaultAlgorithm());\r\n    try (InputStream file = new FileInputStream(keyStoreLocation)) {\r\n        final var keyStore = KeyStore.getInstance(PKCS12);\r\n        keyStore.load(file, keyStorePassword.toCharArray());\r\n        keyManagerFactory.init(keyStore, keyStorePassword.toCharArray());\r\n        return keyManagerFactory;\r\n    } catch (IOException ex) {\r\n        // some logging or extra handling of the error\r\n\r\n        throw new KeyManagerFactoryException(&quot;Your exception message documenting the error&quot;, ex);\r\n    } catch (GeneralSecurityException ex) {\r\n        // some logging or extra handling of the error\r\n\r\n        throw new KeyManagerFactoryException(&quot;Your exception message documenting the error&quot;, ex);\r\n    }\r\n}\r\n```\r\n\r\nAnd your custom exception class would look something like:\r\n```\r\npublic class KeyManagerFactoryException extends Exception {\r\n    public KeyManagerFactoryException(String message, Throwable cause) {\r\n        super(message, cause);\r\n    }\r\n}\r\n```\r\n\r\nAs a result, your method will only be able to raise an exception of a single type.\r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/essential/exceptions/catch.html","title":"Refactor this method to throw at most one checked exception instead of: java.security.GeneralSecurityException, java.io.IOException","body":"<p>The SonarQube comment means that there's a chance the method will throw multiple exceptions. It means it might make it longer to handle exceptions this method can throw wherever it is being called (and possibly produce repetitive code).</p>\n<p>To optimise this code you could handle both exceptions in the method itself and throw another exception instead.</p>\n<p>You could possibly create a custom <code>KeyManagerFactoryException</code> (or more relevant, would be an exception relating to your class name). Your code that can produce an exception should be surrounded with <a href=\"https://docs.oracle.com/javase/tutorial/essential/exceptions/catch.html\" rel=\"nofollow noreferrer\">try-catch block</a> and both exceptions could be handled in there.</p>\n<pre><code>public final KeyManagerFactory getKeyManagerFactory() throws KeyManagerFactoryException {\n    final var keyManagerFactory = KeyManagerFactory.getInstance(KeyManagerFactory.getDefaultAlgorithm());\n    try (InputStream file = new FileInputStream(keyStoreLocation)) {\n        final var keyStore = KeyStore.getInstance(PKCS12);\n        keyStore.load(file, keyStorePassword.toCharArray());\n        keyManagerFactory.init(keyStore, keyStorePassword.toCharArray());\n        return keyManagerFactory;\n    } catch (IOException ex) {\n        // some logging or extra handling of the error\n\n        throw new KeyManagerFactoryException(&quot;Your exception message documenting the error&quot;, ex);\n    } catch (GeneralSecurityException ex) {\n        // some logging or extra handling of the error\n\n        throw new KeyManagerFactoryException(&quot;Your exception message documenting the error&quot;, ex);\n    }\n}\n</code></pre>\n<p>And your custom exception class would look something like:</p>\n<pre><code>public class KeyManagerFactoryException extends Exception {\n    public KeyManagerFactoryException(String message, Throwable cause) {\n        super(message, cause);\n    }\n}\n</code></pre>\n<p>As a result, your method will only be able to raise an exception of a single type.</p>\n"}],"owner":{"account_id":14482834,"reputation":3924,"user_id":10461625,"display_name":"PatPanda"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":90,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"closed_date":1683571248,"accepted_answer_id":76181435,"answer_count":1,"score":-3,"last_activity_date":1683284086,"creation_date":1683283268,"question_id":76181318,"body_markdown":"What I would like to achieve:\r\n\r\nHave a method to get ```javax.net.ssl.KeyManagerFactory;```\r\n\r\nWhat I tried:\r\n\r\nHere is the code:\r\n\r\n```\r\npublic final KeyManagerFactory getKeyManagerFactory() throws GeneralSecurityException, IOException {\r\n        final var keyManagerFactory = KeyManagerFactory.getInstance(KeyManagerFactory.getDefaultAlgorithm());\r\n        try (InputStream file = new FileInputStream(keyStoreLocation)) {\r\n            final var keyStore = KeyStore.getInstance(PKCS12);\r\n            keyStore.load(file, keyStorePassword.toCharArray());\r\n            keyManagerFactory.init(keyStore, keyStorePassword.toCharArray());\r\n            return keyManagerFactory;\r\n        }\r\n    }\r\n```\r\n\r\nIssue: \r\n\r\nAfter SonarQube scan, I am getting ```Refactor this method to throw at most one checked exception instead of: ```\r\n\r\nNote:\r\n\r\nIt uses to have all sorts of exceptions\r\n\r\nUnrecoverableKeyException, KeyStoreException, NoSuchAlgorithmException CertificateException, IOException, NoSuchAlgorithmException FileNotFoundException\r\n\r\nand I tried to refactor the best I could, but still left with ```Refactor this method to throw at most one checked exception instead of: java.security.GeneralSecurityException, java.io.IOException```\r\n\r\nQuestion:\r\n\r\nHow to refactor this to throw at most one checked exception without using ```throws Exception``` which will trigger another SonarQube issue?","title":"Refactor this method to throw at most one checked exception instead of: java.security.GeneralSecurityException, java.io.IOException","body":"<p>What I would like to achieve:</p>\n<p>Have a method to get <code>javax.net.ssl.KeyManagerFactory;</code></p>\n<p>What I tried:</p>\n<p>Here is the code:</p>\n<pre><code>public final KeyManagerFactory getKeyManagerFactory() throws GeneralSecurityException, IOException {\n        final var keyManagerFactory = KeyManagerFactory.getInstance(KeyManagerFactory.getDefaultAlgorithm());\n        try (InputStream file = new FileInputStream(keyStoreLocation)) {\n            final var keyStore = KeyStore.getInstance(PKCS12);\n            keyStore.load(file, keyStorePassword.toCharArray());\n            keyManagerFactory.init(keyStore, keyStorePassword.toCharArray());\n            return keyManagerFactory;\n        }\n    }\n</code></pre>\n<p>Issue:</p>\n<p>After SonarQube scan, I am getting <code>Refactor this method to throw at most one checked exception instead of: </code></p>\n<p>Note:</p>\n<p>It uses to have all sorts of exceptions</p>\n<p>UnrecoverableKeyException, KeyStoreException, NoSuchAlgorithmException CertificateException, IOException, NoSuchAlgorithmException FileNotFoundException</p>\n<p>and I tried to refactor the best I could, but still left with <code>Refactor this method to throw at most one checked exception instead of: java.security.GeneralSecurityException, java.io.IOException</code></p>\n<p>Question:</p>\n<p>How to refactor this to throw at most one checked exception without using <code>throws Exception</code> which will trigger another SonarQube issue?</p>\n"},{"tags":["java","maven","lombok","mapstruct"],"comments":[{"owner":{"account_id":19726215,"reputation":538,"user_id":14442758,"display_name":"Z-100"},"score":0,"creation_date":1683192712,"post_id":76171379,"comment_id":134329990,"body_markdown":"Have you tried using `RDAccount`? is rDAccount simply a typo of yours?","body":"Have you tried using <code>RDAccount</code>? is rDAccount simply a typo of yours?"}],"answers":[{"comments":[{"owner":{"account_id":3052937,"reputation":17914,"user_id":2587166,"accept_rate":83,"display_name":"Luca Basso Ricci"},"score":0,"creation_date":1683265249,"post_id":76171761,"comment_id":134343174,"body_markdown":"yw. please accept answer if solved the problem to let other peoples have notice about solution","body":"yw. please accept answer if solved the problem to let other peoples have notice about solution"}],"tags":[],"owner":{"account_id":3052937,"reputation":17914,"user_id":2587166,"accept_rate":83,"display_name":"Luca Basso Ricci"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683193481,"creation_date":1683193481,"answer_id":76171761,"question_id":76171379,"body_markdown":"Usually accessor for properties is generated using first character property name uppercase so `rDAccount` is interpreted from `MapStruct` (and from Lombok too, I Suppose) as `RDAccount`.&lt;br/&gt;\r\nJust rename `rDAccount` as `RDAccount` and all should be fine.","title":"Mapstruct Error : no property named exists in source parameter(s)","body":"<p>Usually accessor for properties is generated using first character property name uppercase so <code>rDAccount</code> is interpreted from <code>MapStruct</code> (and from Lombok too, I Suppose) as <code>RDAccount</code>.<br/>\nJust rename <code>rDAccount</code> as <code>RDAccount</code> and all should be fine.</p>\n"},{"tags":[],"owner":{"account_id":22906904,"reputation":113,"user_id":17044833,"display_name":"Jaison "},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1683227756,"creation_date":1683193842,"answer_id":76171838,"question_id":76171379,"body_markdown":"In the mapper calls instead of `@Mapping(source = &quot;rDAccount&quot;, target = &quot;xfaceRDAccount&quot;)` try using `@Mapping(source = &quot;RDAccount&quot;, target = &quot;xfaceRDAccount&quot;)`\r\n\r\nThe getters and setters generated by lombok for rDAccount seems to getRDAccount and setRDAccount.\r\n\r\n[![Generated getter and setter][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/jIsqK.png","title":"Mapstruct Error : no property named exists in source parameter(s)","body":"<p>In the mapper calls instead of <code>@Mapping(source = &quot;rDAccount&quot;, target = &quot;xfaceRDAccount&quot;)</code> try using <code>@Mapping(source = &quot;RDAccount&quot;, target = &quot;xfaceRDAccount&quot;)</code></p>\n<p>The getters and setters generated by lombok for rDAccount seems to getRDAccount and setRDAccount.</p>\n<p><a href=\"https://i.stack.imgur.com/jIsqK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jIsqK.png\" alt=\"Generated getter and setter\" /></a></p>\n"},{"tags":[],"owner":{"account_id":9763630,"reputation":16595,"user_id":7237884,"display_name":"Panagiotis Bougioukos"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683283536,"creation_date":1683283536,"answer_id":76181358,"question_id":76171379,"body_markdown":"I believe the correct approach to use the `mapping` would be the following\r\n\r\n    @Mapping(source = &quot;sourceClass.rDAccount&quot;, target = &quot;xfaceRDAccount&quot;)\r\n    TargetClass mapToTarget(SourceClass sourceClass);","title":"Mapstruct Error : no property named exists in source parameter(s)","body":"<p>I believe the correct approach to use the <code>mapping</code> would be the following</p>\n<pre><code>@Mapping(source = &quot;sourceClass.rDAccount&quot;, target = &quot;xfaceRDAccount&quot;)\nTargetClass mapToTarget(SourceClass sourceClass);\n</code></pre>\n"}],"owner":{"account_id":26816653,"reputation":41,"user_id":20406551,"display_name":"Ankur Upadhayay"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":564,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":3,"score":4,"last_activity_date":1683283536,"creation_date":1683190872,"question_id":76171379,"body_markdown":"Hi I am trying to map my source to target but i am getting this error.\r\n\r\nHere is My Pom.xml\r\n\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\r\n    &lt;artifactId&gt;mapstruct&lt;/artifactId&gt;\r\n    &lt;version&gt;1.5.5.Final&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n    &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n    &lt;version&gt;1.18.26&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n    &lt;artifactId&gt;lombok-mapstruct-binding&lt;/artifactId&gt;\r\n    &lt;version&gt;0.2.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n\r\n&lt;plugin&gt;\r\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n    &lt;configuration&gt;\r\n        &lt;annotationProcessorPaths&gt;\r\n            &lt;path&gt;\r\n                &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\r\n                &lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt;\r\n                &lt;version&gt;1.5.5.Final&lt;/version&gt;\r\n            &lt;/path&gt;\r\n            &lt;path&gt;\r\n                &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n                &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n                &lt;version&gt;1.18.26&lt;/version&gt;\r\n            &lt;/path&gt;\r\n            &lt;path&gt;\r\n                &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n                &lt;artifactId&gt;lombok-mapstruct-binding&lt;/artifactId&gt;\r\n                &lt;version&gt;0.2.0&lt;/version&gt;\r\n            &lt;/path&gt;\r\n        &lt;/annotationProcessorPaths&gt;\r\n    &lt;/configuration&gt;\r\n&lt;/plugin&gt;\r\n```\r\n\r\nMy Mapper:\r\n```\r\nimport org.mapstruct.Mapper;\r\nimport org.mapstruct.Mapping;\r\n\r\n@Mapper(componentModel = &quot;spring&quot;)\r\npublic interface CustomMapper {\r\n\r\n    @Mapping(source = &quot;rDAccount&quot;, target = &quot;xfaceRDAccount&quot;)\r\n    TargetClass mapToTarget(SourceClass sourceClass);\r\n}\r\n```\r\n\r\nMy SourceClass\r\n```\r\nimport lombok.Data;\r\n\r\n@Data\r\npublic class SourceClass {\r\n    private String rDAccount;\r\n}\r\n```\r\n\r\nMy TargetClass\r\n```\r\nimport lombok.Data;\r\n\r\n@Data\r\npublic class TargetClass {\r\n    private String xfaceRDAccount;\r\n}\r\n```\r\n\r\nAfter running mvn clean install\r\nError I am getting: No property named &quot;rDAccount&quot; exists in source parameter(s). Did you mean &quot;RDAccount&quot;?","title":"Mapstruct Error : no property named exists in source parameter(s)","body":"<p>Hi I am trying to map my source to target but i am getting this error.</p>\n<p>Here is My Pom.xml</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\n    &lt;artifactId&gt;mapstruct&lt;/artifactId&gt;\n    &lt;version&gt;1.5.5.Final&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n    &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n    &lt;version&gt;1.18.26&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n    &lt;artifactId&gt;lombok-mapstruct-binding&lt;/artifactId&gt;\n    &lt;version&gt;0.2.0&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n    &lt;configuration&gt;\n        &lt;annotationProcessorPaths&gt;\n            &lt;path&gt;\n                &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\n                &lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt;\n                &lt;version&gt;1.5.5.Final&lt;/version&gt;\n            &lt;/path&gt;\n            &lt;path&gt;\n                &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                &lt;version&gt;1.18.26&lt;/version&gt;\n            &lt;/path&gt;\n            &lt;path&gt;\n                &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                &lt;artifactId&gt;lombok-mapstruct-binding&lt;/artifactId&gt;\n                &lt;version&gt;0.2.0&lt;/version&gt;\n            &lt;/path&gt;\n        &lt;/annotationProcessorPaths&gt;\n    &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>My Mapper:</p>\n<pre><code>import org.mapstruct.Mapper;\nimport org.mapstruct.Mapping;\n\n@Mapper(componentModel = &quot;spring&quot;)\npublic interface CustomMapper {\n\n    @Mapping(source = &quot;rDAccount&quot;, target = &quot;xfaceRDAccount&quot;)\n    TargetClass mapToTarget(SourceClass sourceClass);\n}\n</code></pre>\n<p>My SourceClass</p>\n<pre><code>import lombok.Data;\n\n@Data\npublic class SourceClass {\n    private String rDAccount;\n}\n</code></pre>\n<p>My TargetClass</p>\n<pre><code>import lombok.Data;\n\n@Data\npublic class TargetClass {\n    private String xfaceRDAccount;\n}\n</code></pre>\n<p>After running mvn clean install\nError I am getting: No property named &quot;rDAccount&quot; exists in source parameter(s). Did you mean &quot;RDAccount&quot;?</p>\n"},{"tags":["java","openxml","apache-poi"],"comments":[{"owner":{"account_id":431744,"reputation":363,"user_id":816016,"display_name":"Bhuvanesh Phadnis"},"score":0,"creation_date":1315113937,"post_id":7230819,"comment_id":8792002,"body_markdown":"I think my question was a little misunderstood and I apologize for the lack of details. What I am trying to achieve is to fetch an excel sheet in HSSFWorkbook object and convert it to XSSFWorkbook, which means converting a 2003 .xls file to a latest .xlsx file. Now I have tried some code that I am going to post as an answer. Please comment if my approach is correct or is there a better solution to this.","body":"I think my question was a little misunderstood and I apologize for the lack of details. What I am trying to achieve is to fetch an excel sheet in HSSFWorkbook object and convert it to XSSFWorkbook, which means converting a 2003 .xls file to a latest .xlsx file. Now I have tried some code that I am going to post as an answer. Please comment if my approach is correct or is there a better solution to this."},{"owner":{"account_id":3245347,"reputation":3398,"user_id":3887073,"accept_rate":75,"display_name":"Ben"},"score":0,"creation_date":1510067813,"post_id":7230819,"comment_id":81272237,"body_markdown":"It&#39;s late 2017, using Apache POI 3.10 + 3.17. **None** of the provided answers work in any way!","body":"It&#39;s late 2017, using Apache POI 3.10 + 3.17. <b>None</b> of the provided answers work in any way!"}],"answers":[{"tags":[],"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1640217089,"creation_date":1314642406,"answer_id":7234229,"question_id":7230819,"body_markdown":"See the article [*Upgrading to POI 3.5, including converting existing HSSF Usermodel code to SS Usermodel (for XSSF and HSSF)*][1]. There&#39;s an example [here][2], recapitulated below:\r\n\r\n```\r\nimport java.io.FileInputStream;\r\nimport java.io.IOException;\r\nimport java.io.InputStream;\r\nimport org.apache.poi.ss.usermodel.Cell;\r\nimport org.apache.poi.ss.usermodel.DateUtil;\r\nimport org.apache.poi.ss.usermodel.FormulaEvaluator;\r\nimport org.apache.poi.ss.usermodel.Row;\r\nimport org.apache.poi.ss.usermodel.Sheet;\r\nimport org.apache.poi.ss.usermodel.Workbook;\r\nimport org.apache.poi.xssf.usermodel.XSSFWorkbook;\r\n\r\npublic class XlsxReader {\r\n\r\n    public static void main(String[] args) throws IOException {\r\n        InputStream myxls = new FileInputStream(&quot;test.xlsx&quot;);\r\n        Workbook book = new XSSFWorkbook(myxls);\r\n        FormulaEvaluator eval =\r\n            book.getCreationHelper().createFormulaEvaluator();\r\n        Sheet sheet = book.getSheetAt(0);\r\n        for (Row row : sheet) {\r\n            for (Cell cell : row) {\r\n                printCell(cell, eval);\r\n                System.out.print(&quot;; &quot;);\r\n            }\r\n            System.out.println();\r\n        }\r\n        myxls.close();\r\n    }\r\n\r\n    private static void printCell(Cell cell, FormulaEvaluator eval) {\r\n        switch (cell.getCellType()) {\r\n            case Cell.CELL_TYPE_BLANK:\r\n                System.out.print(&quot;EMPTY&quot;);\r\n                break;\r\n            case Cell.CELL_TYPE_STRING:\r\n                System.out.print(cell.getStringCellValue());\r\n                break;\r\n            case Cell.CELL_TYPE_NUMERIC:\r\n                if (DateUtil.isCellDateFormatted(cell)) {\r\n                    System.out.print(cell.getDateCellValue());\r\n                } else {\r\n                    System.out.print(cell.getNumericCellValue());\r\n                }\r\n                break;\r\n            case Cell.CELL_TYPE_BOOLEAN:\r\n                System.out.print(cell.getBooleanCellValue());\r\n                break;\r\n            case Cell.CELL_TYPE_FORMULA:\r\n                System.out.print(cell.getCellFormula());\r\n                break;\r\n            default:\r\n                System.out.print(&quot;DEFAULT&quot;);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n  [1]: http://poi.apache.org/spreadsheet/converting.html\r\n  [2]: https://stackoverflow.com/questions/3560950/best-language-to-parse-extremely-large-excel-2007-files/3562214#3562214","title":"How to convert HSSFWorkbook to XSSFWorkbook using Apache POI?","body":"<p>See the article <a href=\"http://poi.apache.org/spreadsheet/converting.html\" rel=\"nofollow noreferrer\"><em>Upgrading to POI 3.5, including converting existing HSSF Usermodel code to SS Usermodel (for XSSF and HSSF)</em></a>. There's an example <a href=\"https://stackoverflow.com/questions/3560950/best-language-to-parse-extremely-large-excel-2007-files/3562214#3562214\">here</a>, recapitulated below:</p>\n<pre><code>import java.io.FileInputStream;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport org.apache.poi.ss.usermodel.Cell;\nimport org.apache.poi.ss.usermodel.DateUtil;\nimport org.apache.poi.ss.usermodel.FormulaEvaluator;\nimport org.apache.poi.ss.usermodel.Row;\nimport org.apache.poi.ss.usermodel.Sheet;\nimport org.apache.poi.ss.usermodel.Workbook;\nimport org.apache.poi.xssf.usermodel.XSSFWorkbook;\n\npublic class XlsxReader {\n\n    public static void main(String[] args) throws IOException {\n        InputStream myxls = new FileInputStream(&quot;test.xlsx&quot;);\n        Workbook book = new XSSFWorkbook(myxls);\n        FormulaEvaluator eval =\n            book.getCreationHelper().createFormulaEvaluator();\n        Sheet sheet = book.getSheetAt(0);\n        for (Row row : sheet) {\n            for (Cell cell : row) {\n                printCell(cell, eval);\n                System.out.print(&quot;; &quot;);\n            }\n            System.out.println();\n        }\n        myxls.close();\n    }\n\n    private static void printCell(Cell cell, FormulaEvaluator eval) {\n        switch (cell.getCellType()) {\n            case Cell.CELL_TYPE_BLANK:\n                System.out.print(&quot;EMPTY&quot;);\n                break;\n            case Cell.CELL_TYPE_STRING:\n                System.out.print(cell.getStringCellValue());\n                break;\n            case Cell.CELL_TYPE_NUMERIC:\n                if (DateUtil.isCellDateFormatted(cell)) {\n                    System.out.print(cell.getDateCellValue());\n                } else {\n                    System.out.print(cell.getNumericCellValue());\n                }\n                break;\n            case Cell.CELL_TYPE_BOOLEAN:\n                System.out.print(cell.getBooleanCellValue());\n                break;\n            case Cell.CELL_TYPE_FORMULA:\n                System.out.print(cell.getCellFormula());\n                break;\n            default:\n                System.out.print(&quot;DEFAULT&quot;);\n        }\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3245347,"reputation":3398,"user_id":3887073,"accept_rate":75,"display_name":"Ben"},"score":0,"creation_date":1510065613,"post_id":7297596,"comment_id":81270665,"body_markdown":"does not work: `java.lang.IllegalArgumentException: Can only clone from one XSSFCellStyle to another, not between HSSFCellStyle and XSSFCellStyle` in line: `destnCellStyle.cloneStyleFrom(oldCell.getCellStyle());`","body":"does not work: <code>java.lang.IllegalArgumentException: Can only clone from one XSSFCellStyle to another, not between HSSFCellStyle and XSSFCellStyle</code> in line: <code>destnCellStyle.cloneStyleFrom(oldCell.getCellStyle());</code>"}],"tags":[],"owner":{"account_id":431744,"reputation":363,"user_id":816016,"display_name":"Bhuvanesh Phadnis"},"comment_count":1,"down_vote_count":0,"up_vote_count":11,"is_accepted":true,"score":11,"last_activity_date":1443820171,"creation_date":1315114361,"answer_id":7297596,"question_id":7230819,"body_markdown":"this code has been adapted from what I found here on [coderanch forum][1]\r\n\r\n\r\n\tpublic final class ExcelDocumentConverter {\r\n\tpublic static XSSFWorkbook convertWorkbookHSSFToXSSF(HSSFWorkbook source) {\r\n\t\tXSSFWorkbook retVal = new XSSFWorkbook();\r\n\t\tfor (int i = 0; i &lt; source.getNumberOfSheets(); i++) {\r\n\t\t\tXSSFSheet xssfSheet = retVal.createSheet();\r\n\t\t\tHSSFSheet hssfsheet = source.getSheetAt(i);\r\n\t\t\tcopySheets(hssfsheet, xssfSheet);\r\n\t\t}\r\n\t\treturn retVal;\r\n\t}\r\n\r\n\tpublic static void copySheets(HSSFSheet source, XSSFSheet destination) {\r\n\t\tcopySheets(source, destination, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @param destination\r\n\t *            the sheet to create from the copy.\r\n\t * @param the\r\n\t *            sheet to copy.\r\n\t * @param copyStyle\r\n\t *            true copy the style.\r\n\t */\r\n\tpublic static void copySheets(HSSFSheet source, XSSFSheet destination, boolean copyStyle) {\r\n\t\tint maxColumnNum = 0;\r\n\t\tMap&lt;Integer, HSSFCellStyle&gt; styleMap = (copyStyle) ? new HashMap&lt;Integer, HSSFCellStyle&gt;() : null;\r\n\t\tfor (int i = source.getFirstRowNum(); i &lt;= source.getLastRowNum(); i++) {\r\n\t\t\tHSSFRow srcRow = source.getRow(i);\r\n\t\t\tXSSFRow destRow = destination.createRow(i);\r\n\t\t\tif (srcRow != null) {\r\n\t\t\t\tcopyRow(source, destination, srcRow, destRow, styleMap);\r\n\t\t\t\tif (srcRow.getLastCellNum() &gt; maxColumnNum) {\r\n\t\t\t\t\tmaxColumnNum = srcRow.getLastCellNum();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (int i = 0; i &lt;= maxColumnNum; i++) {\r\n\t\t\tdestination.setColumnWidth(i, source.getColumnWidth(i));\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @param srcSheet\r\n\t *            the sheet to copy.\r\n\t * @param destSheet\r\n\t *            the sheet to create.\r\n\t * @param srcRow\r\n\t *            the row to copy.\r\n\t * @param destRow\r\n\t *            the row to create.\r\n\t * @param styleMap\r\n\t *            -\r\n\t */\r\n\tpublic static void copyRow(HSSFSheet srcSheet, XSSFSheet destSheet, HSSFRow srcRow, XSSFRow destRow,\r\n\t\t\tMap&lt;Integer, HSSFCellStyle&gt; styleMap) {\r\n\t\t// manage a list of merged zone in order to not insert two times a\r\n\t\t// merged zone\r\n\t\tSet&lt;CellRangeAddressWrapper&gt; mergedRegions = new TreeSet&lt;CellRangeAddressWrapper&gt;();\r\n\t\tdestRow.setHeight(srcRow.getHeight());\r\n\t\t// pour chaque row\r\n\t\tfor (int j = srcRow.getFirstCellNum(); j &lt;= srcRow.getLastCellNum(); j++) {\r\n\t\t\tHSSFCell oldCell = srcRow.getCell(j); // ancienne cell\r\n\t\t\tXSSFCell newCell = destRow.getCell(j); // new cell\r\n\t\t\tif (oldCell != null) {\r\n\t\t\t\tif (newCell == null) {\r\n\t\t\t\t\tnewCell = destRow.createCell(j);\r\n\t\t\t\t}\r\n\t\t\t\t// copy chaque cell\r\n\t\t\t\tcopyCell(oldCell, newCell, styleMap);\r\n\t\t\t\t// copy les informations de fusion entre les cellules\r\n\t\t\t\t// System.out.println(&quot;row num: &quot; + srcRow.getRowNum() +\r\n\t\t\t\t// &quot; , col: &quot; + (short)oldCell.getColumnIndex());\r\n\t\t\t\tCellRangeAddress mergedRegion = getMergedRegion(srcSheet, srcRow.getRowNum(),\r\n\t\t\t\t\t\t(short) oldCell.getColumnIndex());\r\n\r\n\t\t\t\tif (mergedRegion != null) {\r\n\t\t\t\t\t// System.out.println(&quot;Selected merged region: &quot; +\r\n\t\t\t\t\t// mergedRegion.toString());\r\n\t\t\t\t\tCellRangeAddress newMergedRegion = new CellRangeAddress(mergedRegion.getFirstRow(),\r\n\t\t\t\t\t\t\tmergedRegion.getLastRow(), mergedRegion.getFirstColumn(), mergedRegion.getLastColumn());\r\n\t\t\t\t\t// System.out.println(&quot;New merged region: &quot; +\r\n\t\t\t\t\t// newMergedRegion.toString());\r\n\t\t\t\t\tCellRangeAddressWrapper wrapper = new CellRangeAddressWrapper(newMergedRegion);\r\n\t\t\t\t\tif (isNewMergedRegion(wrapper, mergedRegions)) {\r\n\t\t\t\t\t\tmergedRegions.add(wrapper);\r\n\t\t\t\t\t\tdestSheet.addMergedRegion(wrapper.range);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * @param oldCell\r\n\t * @param newCell\r\n\t * @param styleMap\r\n\t */\r\n\tpublic static void copyCell(HSSFCell oldCell, XSSFCell newCell, Map&lt;Integer, HSSFCellStyle&gt; styleMap) {\r\n\t\tif (styleMap != null) {\r\n\t\t\tint stHashCode = oldCell.getCellStyle().hashCode();\r\n\t\t\tHSSFCellStyle sourceCellStyle = styleMap.get(stHashCode);\r\n\t\t\tXSSFCellStyle destnCellStyle = newCell.getCellStyle();\r\n\t\t\tif (sourceCellStyle == null) {\r\n\t\t\t\tsourceCellStyle = oldCell.getSheet().getWorkbook().createCellStyle();\r\n\t\t\t}\r\n\t\t\tdestnCellStyle.cloneStyleFrom(oldCell.getCellStyle());\r\n\t\t\tstyleMap.put(stHashCode, sourceCellStyle);\r\n\t\t\tnewCell.setCellStyle(destnCellStyle);\r\n\t\t}\r\n\t\tswitch (oldCell.getCellType()) {\r\n\t\tcase HSSFCell.CELL_TYPE_STRING:\r\n\t\t\tnewCell.setCellValue(oldCell.getStringCellValue());\r\n\t\t\tbreak;\r\n\t\tcase HSSFCell.CELL_TYPE_NUMERIC:\r\n\t\t\tnewCell.setCellValue(oldCell.getNumericCellValue());\r\n\t\t\tbreak;\r\n\t\tcase HSSFCell.CELL_TYPE_BLANK:\r\n\t\t\tnewCell.setCellType(HSSFCell.CELL_TYPE_BLANK);\r\n\t\t\tbreak;\r\n\t\tcase HSSFCell.CELL_TYPE_BOOLEAN:\r\n\t\t\tnewCell.setCellValue(oldCell.getBooleanCellValue());\r\n\t\t\tbreak;\r\n\t\tcase HSSFCell.CELL_TYPE_ERROR:\r\n\t\t\tnewCell.setCellErrorValue(oldCell.getErrorCellValue());\r\n\t\t\tbreak;\r\n\t\tcase HSSFCell.CELL_TYPE_FORMULA:\r\n\t\t\tnewCell.setCellFormula(oldCell.getCellFormula());\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * R&#233;cup&#232;re les informations de fusion des cellules dans la sheet source\r\n\t * pour les appliquer &#224; la sheet destination... R&#233;cup&#232;re toutes les zones\r\n\t * merged dans la sheet source et regarde pour chacune d&#39;elle si elle se\r\n\t * trouve dans la current row que nous traitons. Si oui, retourne l&#39;objet\r\n\t * CellRangeAddress.\r\n\t * \r\n\t * @param sheet\r\n\t *            the sheet containing the data.\r\n\t * @param rowNum\r\n\t *            the num of the row to copy.\r\n\t * @param cellNum\r\n\t *            the num of the cell to copy.\r\n\t * @return the CellRangeAddress created.\r\n\t */\r\n\tpublic static CellRangeAddress getMergedRegion(HSSFSheet sheet, int rowNum, short cellNum) {\r\n\t\tfor (int i = 0; i &lt; sheet.getNumMergedRegions(); i++) {\r\n\t\t\tCellRangeAddress merged = sheet.getMergedRegion(i);\r\n\t\t\tif (merged.isInRange(rowNum, cellNum)) {\r\n\t\t\t\treturn merged;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\t/**\r\n\t * Check that the merged region has been created in the destination sheet.\r\n\t * \r\n\t * @param newMergedRegion\r\n\t *            the merged region to copy or not in the destination sheet.\r\n\t * @param mergedRegions\r\n\t *            the list containing all the merged region.\r\n\t * @return true if the merged region is already in the list or not.\r\n\t */\r\n\tprivate static boolean isNewMergedRegion(CellRangeAddressWrapper newMergedRegion,\r\n\t\t\tSet&lt;CellRangeAddressWrapper&gt; mergedRegions) {\r\n\t\treturn !mergedRegions.contains(newMergedRegion);\r\n\t}\r\n    }\r\n\r\n\r\n  [1]: http://www.coderanch.com/t/420958/open-source/Copying-sheet-excel-file-another#2454454","title":"How to convert HSSFWorkbook to XSSFWorkbook using Apache POI?","body":"<p>this code has been adapted from what I found here on <a href=\"http://www.coderanch.com/t/420958/open-source/Copying-sheet-excel-file-another#2454454\" rel=\"noreferrer\">coderanch forum</a></p>\n\n<pre><code>public final class ExcelDocumentConverter {\npublic static XSSFWorkbook convertWorkbookHSSFToXSSF(HSSFWorkbook source) {\n    XSSFWorkbook retVal = new XSSFWorkbook();\n    for (int i = 0; i &lt; source.getNumberOfSheets(); i++) {\n        XSSFSheet xssfSheet = retVal.createSheet();\n        HSSFSheet hssfsheet = source.getSheetAt(i);\n        copySheets(hssfsheet, xssfSheet);\n    }\n    return retVal;\n}\n\npublic static void copySheets(HSSFSheet source, XSSFSheet destination) {\n    copySheets(source, destination, true);\n}\n\n/**\n * @param destination\n *            the sheet to create from the copy.\n * @param the\n *            sheet to copy.\n * @param copyStyle\n *            true copy the style.\n */\npublic static void copySheets(HSSFSheet source, XSSFSheet destination, boolean copyStyle) {\n    int maxColumnNum = 0;\n    Map&lt;Integer, HSSFCellStyle&gt; styleMap = (copyStyle) ? new HashMap&lt;Integer, HSSFCellStyle&gt;() : null;\n    for (int i = source.getFirstRowNum(); i &lt;= source.getLastRowNum(); i++) {\n        HSSFRow srcRow = source.getRow(i);\n        XSSFRow destRow = destination.createRow(i);\n        if (srcRow != null) {\n            copyRow(source, destination, srcRow, destRow, styleMap);\n            if (srcRow.getLastCellNum() &gt; maxColumnNum) {\n                maxColumnNum = srcRow.getLastCellNum();\n            }\n        }\n    }\n    for (int i = 0; i &lt;= maxColumnNum; i++) {\n        destination.setColumnWidth(i, source.getColumnWidth(i));\n    }\n}\n\n/**\n * @param srcSheet\n *            the sheet to copy.\n * @param destSheet\n *            the sheet to create.\n * @param srcRow\n *            the row to copy.\n * @param destRow\n *            the row to create.\n * @param styleMap\n *            -\n */\npublic static void copyRow(HSSFSheet srcSheet, XSSFSheet destSheet, HSSFRow srcRow, XSSFRow destRow,\n        Map&lt;Integer, HSSFCellStyle&gt; styleMap) {\n    // manage a list of merged zone in order to not insert two times a\n    // merged zone\n    Set&lt;CellRangeAddressWrapper&gt; mergedRegions = new TreeSet&lt;CellRangeAddressWrapper&gt;();\n    destRow.setHeight(srcRow.getHeight());\n    // pour chaque row\n    for (int j = srcRow.getFirstCellNum(); j &lt;= srcRow.getLastCellNum(); j++) {\n        HSSFCell oldCell = srcRow.getCell(j); // ancienne cell\n        XSSFCell newCell = destRow.getCell(j); // new cell\n        if (oldCell != null) {\n            if (newCell == null) {\n                newCell = destRow.createCell(j);\n            }\n            // copy chaque cell\n            copyCell(oldCell, newCell, styleMap);\n            // copy les informations de fusion entre les cellules\n            // System.out.println(\"row num: \" + srcRow.getRowNum() +\n            // \" , col: \" + (short)oldCell.getColumnIndex());\n            CellRangeAddress mergedRegion = getMergedRegion(srcSheet, srcRow.getRowNum(),\n                    (short) oldCell.getColumnIndex());\n\n            if (mergedRegion != null) {\n                // System.out.println(\"Selected merged region: \" +\n                // mergedRegion.toString());\n                CellRangeAddress newMergedRegion = new CellRangeAddress(mergedRegion.getFirstRow(),\n                        mergedRegion.getLastRow(), mergedRegion.getFirstColumn(), mergedRegion.getLastColumn());\n                // System.out.println(\"New merged region: \" +\n                // newMergedRegion.toString());\n                CellRangeAddressWrapper wrapper = new CellRangeAddressWrapper(newMergedRegion);\n                if (isNewMergedRegion(wrapper, mergedRegions)) {\n                    mergedRegions.add(wrapper);\n                    destSheet.addMergedRegion(wrapper.range);\n                }\n            }\n        }\n    }\n\n}\n\n/**\n * @param oldCell\n * @param newCell\n * @param styleMap\n */\npublic static void copyCell(HSSFCell oldCell, XSSFCell newCell, Map&lt;Integer, HSSFCellStyle&gt; styleMap) {\n    if (styleMap != null) {\n        int stHashCode = oldCell.getCellStyle().hashCode();\n        HSSFCellStyle sourceCellStyle = styleMap.get(stHashCode);\n        XSSFCellStyle destnCellStyle = newCell.getCellStyle();\n        if (sourceCellStyle == null) {\n            sourceCellStyle = oldCell.getSheet().getWorkbook().createCellStyle();\n        }\n        destnCellStyle.cloneStyleFrom(oldCell.getCellStyle());\n        styleMap.put(stHashCode, sourceCellStyle);\n        newCell.setCellStyle(destnCellStyle);\n    }\n    switch (oldCell.getCellType()) {\n    case HSSFCell.CELL_TYPE_STRING:\n        newCell.setCellValue(oldCell.getStringCellValue());\n        break;\n    case HSSFCell.CELL_TYPE_NUMERIC:\n        newCell.setCellValue(oldCell.getNumericCellValue());\n        break;\n    case HSSFCell.CELL_TYPE_BLANK:\n        newCell.setCellType(HSSFCell.CELL_TYPE_BLANK);\n        break;\n    case HSSFCell.CELL_TYPE_BOOLEAN:\n        newCell.setCellValue(oldCell.getBooleanCellValue());\n        break;\n    case HSSFCell.CELL_TYPE_ERROR:\n        newCell.setCellErrorValue(oldCell.getErrorCellValue());\n        break;\n    case HSSFCell.CELL_TYPE_FORMULA:\n        newCell.setCellFormula(oldCell.getCellFormula());\n        break;\n    default:\n        break;\n    }\n\n}\n\n/**\n * Récupère les informations de fusion des cellules dans la sheet source\n * pour les appliquer à la sheet destination... Récupère toutes les zones\n * merged dans la sheet source et regarde pour chacune d'elle si elle se\n * trouve dans la current row que nous traitons. Si oui, retourne l'objet\n * CellRangeAddress.\n * \n * @param sheet\n *            the sheet containing the data.\n * @param rowNum\n *            the num of the row to copy.\n * @param cellNum\n *            the num of the cell to copy.\n * @return the CellRangeAddress created.\n */\npublic static CellRangeAddress getMergedRegion(HSSFSheet sheet, int rowNum, short cellNum) {\n    for (int i = 0; i &lt; sheet.getNumMergedRegions(); i++) {\n        CellRangeAddress merged = sheet.getMergedRegion(i);\n        if (merged.isInRange(rowNum, cellNum)) {\n            return merged;\n        }\n    }\n    return null;\n}\n\n/**\n * Check that the merged region has been created in the destination sheet.\n * \n * @param newMergedRegion\n *            the merged region to copy or not in the destination sheet.\n * @param mergedRegions\n *            the list containing all the merged region.\n * @return true if the merged region is already in the list or not.\n */\nprivate static boolean isNewMergedRegion(CellRangeAddressWrapper newMergedRegion,\n        Set&lt;CellRangeAddressWrapper&gt; mergedRegions) {\n    return !mergedRegions.contains(newMergedRegion);\n}\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1084159,"reputation":624,"user_id":1080301,"accept_rate":78,"display_name":"Thomas"},"score":0,"creation_date":1510749449,"post_id":10480410,"comment_id":81565427,"body_markdown":"Read the first line: write a main-method that calls transform()","body":"Read the first line: write a main-method that calls transform()"}],"tags":[],"owner":{"account_id":1084159,"reputation":624,"user_id":1080301,"accept_rate":78,"display_name":"Thomas"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1584554011,"creation_date":1336386143,"answer_id":10480410,"question_id":7230819,"body_markdown":"**Since all of the above answers don&#39;t help, here is working code:**\r\n\r\nJust write a main method that fills the necessary fields and uses transform().\r\n\r\n    package myStuff;\r\n\r\n    import java.io.*;\r\n    import java.util.*;\r\n\r\n    import org.apache.poi.hssf.usermodel.*;\r\n    import org.apache.poi.poifs.filesystem.POIFSFileSystem;\r\n    import org.apache.poi.ss.usermodel.*;\r\n    import org.apache.poi.ss.util.CellRangeAddress;\r\n    import org.apache.poi.xssf.usermodel.*;\r\n\r\n    public class ExcelConverter {\r\n\r\n\tprivate File path = null;\r\n\tprivate ArrayList&lt;File&gt; inputFiles = new ArrayList&lt;File&gt;();\r\n\tprivate HSSFWorkbook workbookOld = null;\r\n\tprivate XSSFWorkbook workbookNew = null;\r\n\tprivate int lastColumn = 0;\r\n\tprivate HashMap&lt;Integer, XSSFCellStyle&gt; styleMap = null;\r\n\r\n\tprivate void getInputFiles() {\r\n\t\tString call = &quot;getInputFiles &quot;;\r\n\t\tif (this.path.isFile()) {\r\n\t\t\tif (this.path.getAbsolutePath().endsWith(&quot;.xls&quot;)\r\n\t\t\t\t\t&amp;&amp; !new File(this.path.getAbsolutePath() + &quot;x&quot;).exists())\r\n\t\t\t\tthis.inputFiles.add(this.path);\r\n\t\t\telse {\r\n\t\t\t\tSystem.out\r\n\t\t\t\t\t\t.println(&quot;Datei endet nicht mit .xls oder XLSX-Datei existiert bereits&quot;);\r\n\t\t\t}\r\n\t\t} else\r\n\t\t\tfor (File f : this.path.listFiles(new FilenameFilter() {\r\n\t\t\t\t// anonyme innere Klasse\r\n\r\n\t\t\t\t@Override\r\n\t\t\t\tpublic boolean accept(File dir, String name) {\r\n\t\t\t\t\tif (name.endsWith(&quot;.xls&quot;))\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t})) {\r\n\t\t\t\tif (!new File(f.getAbsoluteFile() + &quot;x&quot;).exists()) {\r\n\t\t\t\t\tthis.inputFiles.add(f);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\tSystem.out\r\n\t\t\t\t.println(call + &quot;Dateien gefunden: &quot; + this.inputFiles.size());\r\n\t\tSystem.out.println(call + &quot;abgeschlossen&quot;);\r\n\t}\r\n\r\n\tprivate HSSFWorkbook getWorkBook(File f) throws FileNotFoundException,\r\n\t\t\tIOException {\r\n\t\tSystem.out.println(&quot;getWorkBook lese &quot; + f.getAbsolutePath());\r\n\t\tPOIFSFileSystem fs = new POIFSFileSystem(new BufferedInputStream(\r\n\t\t\t\tnew FileInputStream(f)));\r\n\t\tHSSFWorkbook workbook = new HSSFWorkbook(fs);\r\n\t\tSystem.out.println(&quot;getWorkBook abgeschlossen&quot;);\r\n\t\treturn workbook;\r\n\t}\r\n\r\n\tprivate void transform() {\r\n\t\tString call = &quot;transform &quot;;\r\n\t\tSystem.out.println(call + &quot;Workbook&quot;);\r\n\t\tXSSFSheet sheetNew;\r\n\t\tHSSFSheet sheetOld;\r\n\t\tthis.workbookNew.setForceFormulaRecalculation(this.workbookOld\r\n\t\t\t\t.getForceFormulaRecalculation());\r\n\t\t// workbookNew.setHidden(workbookOld.isHidden()); //ST@03.05.2012 -\r\n\t\t// von Apache noch nicht implementiert\r\n\t\tthis.workbookNew.setMissingCellPolicy(this.workbookOld\r\n\t\t\t\t.getMissingCellPolicy());\r\n\r\n\t\tfor (int i = 0; i &lt; this.workbookOld.getNumberOfSheets(); i++) {\r\n\t\t\tsheetOld = this.workbookOld.getSheetAt(i);\r\n\t\t\tsheetNew = this.workbookNew.getSheet(sheetOld.getSheetName());\r\n\t\t\tSystem.out.println(call + &quot;Sheet erstellt: &quot;\r\n\t\t\t\t\t+ sheetOld.getSheetName());\r\n\t\t\tsheetNew = this.workbookNew.createSheet(sheetOld.getSheetName());\r\n\t\t\tthis.transform(sheetOld, sheetNew);\r\n\t\t}\r\n\t\tSystem.out.println(call + &quot;Anzahl verwendeter Styles: &quot;\r\n\t\t\t\t+ this.styleMap.size());\r\n\t\tSystem.out.println(call + &quot;abgeschlossen&quot;);\r\n\t}\r\n\r\n\tprivate void transform(HSSFSheet sheetOld, XSSFSheet sheetNew) {\r\n\t\tSystem.out.println(&quot;transform Sheet&quot;);\r\n\r\n\t\tsheetNew.setDisplayFormulas(sheetOld.isDisplayFormulas());\r\n\t\tsheetNew.setDisplayGridlines(sheetOld.isDisplayGridlines());\r\n\t\tsheetNew.setDisplayGuts(sheetOld.getDisplayGuts());\r\n\t\tsheetNew.setDisplayRowColHeadings(sheetOld.isDisplayRowColHeadings());\r\n\t\tsheetNew.setDisplayZeros(sheetOld.isDisplayZeros());\r\n\t\tsheetNew.setFitToPage(sheetOld.getFitToPage());\r\n\t\tsheetNew.setForceFormulaRecalculation(sheetOld\r\n\t\t\t\t.getForceFormulaRecalculation());\r\n\t\tsheetNew.setHorizontallyCenter(sheetOld.getHorizontallyCenter());\r\n\t\tsheetNew.setMargin(Sheet.BottomMargin,\r\n\t\t\t\tsheetOld.getMargin(Sheet.BottomMargin));\r\n\t\tsheetNew.setMargin(Sheet.FooterMargin,\r\n\t\t\t\tsheetOld.getMargin(Sheet.FooterMargin));\r\n\t\tsheetNew.setMargin(Sheet.HeaderMargin,\r\n\t\t\t\tsheetOld.getMargin(Sheet.HeaderMargin));\r\n\t\tsheetNew.setMargin(Sheet.LeftMargin,\r\n\t\t\t\tsheetOld.getMargin(Sheet.LeftMargin));\r\n\t\tsheetNew.setMargin(Sheet.RightMargin,\r\n\t\t\t\tsheetOld.getMargin(Sheet.RightMargin));\r\n\t\tsheetNew.setMargin(Sheet.TopMargin, sheetOld.getMargin(Sheet.TopMargin));\r\n\t\tsheetNew.setPrintGridlines(sheetNew.isPrintGridlines());\r\n\t\tsheetNew.setRightToLeft(sheetNew.isRightToLeft());\r\n\t\tsheetNew.setRowSumsBelow(sheetNew.getRowSumsBelow());\r\n\t\tsheetNew.setRowSumsRight(sheetNew.getRowSumsRight());\r\n\t\tsheetNew.setVerticallyCenter(sheetOld.getVerticallyCenter());\r\n\r\n\t\tXSSFRow rowNew;\r\n\t\tfor (Row row : sheetOld) {\r\n\t\t\trowNew = sheetNew.createRow(row.getRowNum());\r\n\t\t\tif (rowNew != null)\r\n\t\t\t\tthis.transform((HSSFRow) row, rowNew);\r\n\t\t}\r\n\r\n\t\tfor (int i = 0; i &lt; this.lastColumn; i++) {\r\n\t\t\tsheetNew.setColumnWidth(i, sheetOld.getColumnWidth(i));\r\n\t\t\tsheetNew.setColumnHidden(i, sheetOld.isColumnHidden(i));\r\n\t\t}\r\n\r\n\t\tfor (int i = 0; i &lt; sheetOld.getNumMergedRegions(); i++) {\r\n\t\t\tCellRangeAddress merged = sheetOld.getMergedRegion(i);\r\n\t\t\tsheetNew.addMergedRegion(merged);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate void transform(HSSFRow rowOld, XSSFRow rowNew) {\r\n\t\tXSSFCell cellNew;\r\n\t\trowNew.setHeight(rowOld.getHeight());\r\n\t\tif (rowOld.getRowStyle() != null) {\r\n\t\t\tInteger hash = rowOld.getRowStyle().hashCode();\r\n\t\t\tif (!this.styleMap.containsKey(hash))\r\n\t\t\t\tthis.transform(hash, rowOld.getRowStyle(),\r\n\t\t\t\t\t\tthis.workbookNew.createCellStyle());\r\n\t\t\trowNew.setRowStyle(this.styleMap.get(hash));\r\n\t\t}\r\n\t\tfor (Cell cell : rowOld) {\r\n\t\t\tcellNew = rowNew.createCell(cell.getColumnIndex(),\r\n\t\t\t\t\tcell.getCellType());\r\n\t\t\tif (cellNew != null)\r\n\t\t\t\tthis.transform((HSSFCell) cell, cellNew);\r\n\t\t}\r\n\t\tthis.lastColumn = Math.max(this.lastColumn, rowOld.getLastCellNum());\r\n\t}\r\n\r\n\tprivate void transform(HSSFCell cellOld, XSSFCell cellNew) {\r\n\t\tcellNew.setCellComment(cellOld.getCellComment());\r\n\r\n\t\tInteger hash = cellOld.getCellStyle().hashCode();\r\n\t\tif (!this.styleMap.containsKey(hash)) {\r\n\t\t\tthis.transform(hash, cellOld.getCellStyle(),\r\n\t\t\t\t\tthis.workbookNew.createCellStyle());\r\n\t\t}\r\n\t\tcellNew.setCellStyle(this.styleMap.get(hash));\r\n\r\n\t\tswitch (cellOld.getCellType()) {\r\n\t\tcase Cell.CELL_TYPE_BLANK:\r\n\t\t\tbreak;\r\n\t\tcase Cell.CELL_TYPE_BOOLEAN:\r\n\t\t\tcellNew.setCellValue(cellOld.getBooleanCellValue());\r\n\t\t\tbreak;\r\n\t\tcase Cell.CELL_TYPE_ERROR:\r\n\t\t\tcellNew.setCellValue(cellOld.getErrorCellValue());\r\n\t\t\tbreak;\r\n\t\tcase Cell.CELL_TYPE_FORMULA:\r\n\t\t\tcellNew.setCellValue(cellOld.getCellFormula());\r\n\t\t\tbreak;\r\n\t\tcase Cell.CELL_TYPE_NUMERIC:\r\n\t\t\tcellNew.setCellValue(cellOld.getNumericCellValue());\r\n\t\t\tbreak;\r\n\t\tcase Cell.CELL_TYPE_STRING:\r\n\t\t\tcellNew.setCellValue(cellOld.getStringCellValue());\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\tSystem.out.println(&quot;transform: Unbekannter Zellentyp &quot;\r\n\t\t\t\t\t+ cellOld.getCellType());\r\n\t\t}\r\n\t}\r\n\r\n\tprivate void transform(Integer hash, HSSFCellStyle styleOld,\r\n\t\t\tXSSFCellStyle styleNew) {\r\n\t\tstyleNew.setAlignment(styleOld.getAlignment());\r\n\t\tstyleNew.setBorderBottom(styleOld.getBorderBottom());\r\n\t\tstyleNew.setBorderLeft(styleOld.getBorderLeft());\r\n\t\tstyleNew.setBorderRight(styleOld.getBorderRight());\r\n\t\tstyleNew.setBorderTop(styleOld.getBorderTop());\r\n\t\tstyleNew.setDataFormat(this.transform(styleOld.getDataFormat()));\r\n\t\tstyleNew.setFillBackgroundColor(styleOld.getFillBackgroundColor());\r\n\t\tstyleNew.setFillForegroundColor(styleOld.getFillForegroundColor());\r\n\t\tstyleNew.setFillPattern(styleOld.getFillPattern());\r\n\t\tstyleNew.setFont(this.transform(styleOld.getFont(this.workbookOld)));\r\n\t\tstyleNew.setHidden(styleOld.getHidden());\r\n\t\tstyleNew.setIndention(styleOld.getIndention());\r\n\t\tstyleNew.setLocked(styleOld.getLocked());\r\n\t\tstyleNew.setVerticalAlignment(styleOld.getVerticalAlignment());\r\n\t\tstyleNew.setWrapText(styleOld.getWrapText());\r\n\t\tthis.styleMap.put(hash, styleNew);\r\n\t}\r\n\r\n\tprivate short transform(short index) {\r\n\t\tDataFormat formatOld = this.workbookOld.createDataFormat();\r\n\t\tDataFormat formatNew = this.workbookNew.createDataFormat();\r\n\t\treturn formatNew.getFormat(formatOld.getFormat(index));\r\n\t}\r\n\r\n\tprivate XSSFFont transform(HSSFFont fontOld) {\r\n\t\tXSSFFont fontNew = this.workbookNew.createFont();\r\n\t\tfontNew.setBoldweight(fontOld.getBoldweight());\r\n\t\tfontNew.setCharSet(fontOld.getCharSet());\r\n\t\tfontNew.setColor(fontOld.getColor());\r\n\t\tfontNew.setFontName(fontOld.getFontName());\r\n\t\tfontNew.setFontHeight(fontOld.getFontHeight());\r\n\t\tfontNew.setItalic(fontOld.getItalic());\r\n\t\tfontNew.setStrikeout(fontOld.getStrikeout());\r\n\t\tfontNew.setTypeOffset(fontOld.getTypeOffset());\r\n\t\tfontNew.setUnderline(fontOld.getUnderline());\r\n\t\treturn fontNew;\r\n\t}\r\n    }\r\n","title":"How to convert HSSFWorkbook to XSSFWorkbook using Apache POI?","body":"<p><strong>Since all of the above answers don't help, here is working code:</strong></p>\n\n<p>Just write a main method that fills the necessary fields and uses transform().</p>\n\n<pre><code>package myStuff;\n\nimport java.io.*;\nimport java.util.*;\n\nimport org.apache.poi.hssf.usermodel.*;\nimport org.apache.poi.poifs.filesystem.POIFSFileSystem;\nimport org.apache.poi.ss.usermodel.*;\nimport org.apache.poi.ss.util.CellRangeAddress;\nimport org.apache.poi.xssf.usermodel.*;\n\npublic class ExcelConverter {\n\nprivate File path = null;\nprivate ArrayList&lt;File&gt; inputFiles = new ArrayList&lt;File&gt;();\nprivate HSSFWorkbook workbookOld = null;\nprivate XSSFWorkbook workbookNew = null;\nprivate int lastColumn = 0;\nprivate HashMap&lt;Integer, XSSFCellStyle&gt; styleMap = null;\n\nprivate void getInputFiles() {\n    String call = \"getInputFiles \";\n    if (this.path.isFile()) {\n        if (this.path.getAbsolutePath().endsWith(\".xls\")\n                &amp;&amp; !new File(this.path.getAbsolutePath() + \"x\").exists())\n            this.inputFiles.add(this.path);\n        else {\n            System.out\n                    .println(\"Datei endet nicht mit .xls oder XLSX-Datei existiert bereits\");\n        }\n    } else\n        for (File f : this.path.listFiles(new FilenameFilter() {\n            // anonyme innere Klasse\n\n            @Override\n            public boolean accept(File dir, String name) {\n                if (name.endsWith(\".xls\"))\n                    return true;\n                return false;\n            }\n\n        })) {\n            if (!new File(f.getAbsoluteFile() + \"x\").exists()) {\n                this.inputFiles.add(f);\n            }\n        }\n    System.out\n            .println(call + \"Dateien gefunden: \" + this.inputFiles.size());\n    System.out.println(call + \"abgeschlossen\");\n}\n\nprivate HSSFWorkbook getWorkBook(File f) throws FileNotFoundException,\n        IOException {\n    System.out.println(\"getWorkBook lese \" + f.getAbsolutePath());\n    POIFSFileSystem fs = new POIFSFileSystem(new BufferedInputStream(\n            new FileInputStream(f)));\n    HSSFWorkbook workbook = new HSSFWorkbook(fs);\n    System.out.println(\"getWorkBook abgeschlossen\");\n    return workbook;\n}\n\nprivate void transform() {\n    String call = \"transform \";\n    System.out.println(call + \"Workbook\");\n    XSSFSheet sheetNew;\n    HSSFSheet sheetOld;\n    this.workbookNew.setForceFormulaRecalculation(this.workbookOld\n            .getForceFormulaRecalculation());\n    // workbookNew.setHidden(workbookOld.isHidden()); //ST@03.05.2012 -\n    // von Apache noch nicht implementiert\n    this.workbookNew.setMissingCellPolicy(this.workbookOld\n            .getMissingCellPolicy());\n\n    for (int i = 0; i &lt; this.workbookOld.getNumberOfSheets(); i++) {\n        sheetOld = this.workbookOld.getSheetAt(i);\n        sheetNew = this.workbookNew.getSheet(sheetOld.getSheetName());\n        System.out.println(call + \"Sheet erstellt: \"\n                + sheetOld.getSheetName());\n        sheetNew = this.workbookNew.createSheet(sheetOld.getSheetName());\n        this.transform(sheetOld, sheetNew);\n    }\n    System.out.println(call + \"Anzahl verwendeter Styles: \"\n            + this.styleMap.size());\n    System.out.println(call + \"abgeschlossen\");\n}\n\nprivate void transform(HSSFSheet sheetOld, XSSFSheet sheetNew) {\n    System.out.println(\"transform Sheet\");\n\n    sheetNew.setDisplayFormulas(sheetOld.isDisplayFormulas());\n    sheetNew.setDisplayGridlines(sheetOld.isDisplayGridlines());\n    sheetNew.setDisplayGuts(sheetOld.getDisplayGuts());\n    sheetNew.setDisplayRowColHeadings(sheetOld.isDisplayRowColHeadings());\n    sheetNew.setDisplayZeros(sheetOld.isDisplayZeros());\n    sheetNew.setFitToPage(sheetOld.getFitToPage());\n    sheetNew.setForceFormulaRecalculation(sheetOld\n            .getForceFormulaRecalculation());\n    sheetNew.setHorizontallyCenter(sheetOld.getHorizontallyCenter());\n    sheetNew.setMargin(Sheet.BottomMargin,\n            sheetOld.getMargin(Sheet.BottomMargin));\n    sheetNew.setMargin(Sheet.FooterMargin,\n            sheetOld.getMargin(Sheet.FooterMargin));\n    sheetNew.setMargin(Sheet.HeaderMargin,\n            sheetOld.getMargin(Sheet.HeaderMargin));\n    sheetNew.setMargin(Sheet.LeftMargin,\n            sheetOld.getMargin(Sheet.LeftMargin));\n    sheetNew.setMargin(Sheet.RightMargin,\n            sheetOld.getMargin(Sheet.RightMargin));\n    sheetNew.setMargin(Sheet.TopMargin, sheetOld.getMargin(Sheet.TopMargin));\n    sheetNew.setPrintGridlines(sheetNew.isPrintGridlines());\n    sheetNew.setRightToLeft(sheetNew.isRightToLeft());\n    sheetNew.setRowSumsBelow(sheetNew.getRowSumsBelow());\n    sheetNew.setRowSumsRight(sheetNew.getRowSumsRight());\n    sheetNew.setVerticallyCenter(sheetOld.getVerticallyCenter());\n\n    XSSFRow rowNew;\n    for (Row row : sheetOld) {\n        rowNew = sheetNew.createRow(row.getRowNum());\n        if (rowNew != null)\n            this.transform((HSSFRow) row, rowNew);\n    }\n\n    for (int i = 0; i &lt; this.lastColumn; i++) {\n        sheetNew.setColumnWidth(i, sheetOld.getColumnWidth(i));\n        sheetNew.setColumnHidden(i, sheetOld.isColumnHidden(i));\n    }\n\n    for (int i = 0; i &lt; sheetOld.getNumMergedRegions(); i++) {\n        CellRangeAddress merged = sheetOld.getMergedRegion(i);\n        sheetNew.addMergedRegion(merged);\n    }\n}\n\nprivate void transform(HSSFRow rowOld, XSSFRow rowNew) {\n    XSSFCell cellNew;\n    rowNew.setHeight(rowOld.getHeight());\n    if (rowOld.getRowStyle() != null) {\n        Integer hash = rowOld.getRowStyle().hashCode();\n        if (!this.styleMap.containsKey(hash))\n            this.transform(hash, rowOld.getRowStyle(),\n                    this.workbookNew.createCellStyle());\n        rowNew.setRowStyle(this.styleMap.get(hash));\n    }\n    for (Cell cell : rowOld) {\n        cellNew = rowNew.createCell(cell.getColumnIndex(),\n                cell.getCellType());\n        if (cellNew != null)\n            this.transform((HSSFCell) cell, cellNew);\n    }\n    this.lastColumn = Math.max(this.lastColumn, rowOld.getLastCellNum());\n}\n\nprivate void transform(HSSFCell cellOld, XSSFCell cellNew) {\n    cellNew.setCellComment(cellOld.getCellComment());\n\n    Integer hash = cellOld.getCellStyle().hashCode();\n    if (!this.styleMap.containsKey(hash)) {\n        this.transform(hash, cellOld.getCellStyle(),\n                this.workbookNew.createCellStyle());\n    }\n    cellNew.setCellStyle(this.styleMap.get(hash));\n\n    switch (cellOld.getCellType()) {\n    case Cell.CELL_TYPE_BLANK:\n        break;\n    case Cell.CELL_TYPE_BOOLEAN:\n        cellNew.setCellValue(cellOld.getBooleanCellValue());\n        break;\n    case Cell.CELL_TYPE_ERROR:\n        cellNew.setCellValue(cellOld.getErrorCellValue());\n        break;\n    case Cell.CELL_TYPE_FORMULA:\n        cellNew.setCellValue(cellOld.getCellFormula());\n        break;\n    case Cell.CELL_TYPE_NUMERIC:\n        cellNew.setCellValue(cellOld.getNumericCellValue());\n        break;\n    case Cell.CELL_TYPE_STRING:\n        cellNew.setCellValue(cellOld.getStringCellValue());\n        break;\n    default:\n        System.out.println(\"transform: Unbekannter Zellentyp \"\n                + cellOld.getCellType());\n    }\n}\n\nprivate void transform(Integer hash, HSSFCellStyle styleOld,\n        XSSFCellStyle styleNew) {\n    styleNew.setAlignment(styleOld.getAlignment());\n    styleNew.setBorderBottom(styleOld.getBorderBottom());\n    styleNew.setBorderLeft(styleOld.getBorderLeft());\n    styleNew.setBorderRight(styleOld.getBorderRight());\n    styleNew.setBorderTop(styleOld.getBorderTop());\n    styleNew.setDataFormat(this.transform(styleOld.getDataFormat()));\n    styleNew.setFillBackgroundColor(styleOld.getFillBackgroundColor());\n    styleNew.setFillForegroundColor(styleOld.getFillForegroundColor());\n    styleNew.setFillPattern(styleOld.getFillPattern());\n    styleNew.setFont(this.transform(styleOld.getFont(this.workbookOld)));\n    styleNew.setHidden(styleOld.getHidden());\n    styleNew.setIndention(styleOld.getIndention());\n    styleNew.setLocked(styleOld.getLocked());\n    styleNew.setVerticalAlignment(styleOld.getVerticalAlignment());\n    styleNew.setWrapText(styleOld.getWrapText());\n    this.styleMap.put(hash, styleNew);\n}\n\nprivate short transform(short index) {\n    DataFormat formatOld = this.workbookOld.createDataFormat();\n    DataFormat formatNew = this.workbookNew.createDataFormat();\n    return formatNew.getFormat(formatOld.getFormat(index));\n}\n\nprivate XSSFFont transform(HSSFFont fontOld) {\n    XSSFFont fontNew = this.workbookNew.createFont();\n    fontNew.setBoldweight(fontOld.getBoldweight());\n    fontNew.setCharSet(fontOld.getCharSet());\n    fontNew.setColor(fontOld.getColor());\n    fontNew.setFontName(fontOld.getFontName());\n    fontNew.setFontHeight(fontOld.getFontHeight());\n    fontNew.setItalic(fontOld.getItalic());\n    fontNew.setStrikeout(fontOld.getStrikeout());\n    fontNew.setTypeOffset(fontOld.getTypeOffset());\n    fontNew.setUnderline(fontOld.getUnderline());\n    return fontNew;\n}\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3543350,"reputation":81,"user_id":2959916,"display_name":"Indranil Nag"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1383732345,"creation_date":1383732345,"answer_id":19809118,"question_id":7230819,"body_markdown":"    //Added xbean-2.3.0.jar/xmlbeans-2.3.0.jar,poi-ooxml-3.7-20101029.jarpoi-ooxml-schemas-3.7-beta1.jar,\r\n    \r\n    \r\n    import java.io.*;\r\n    import java.util.*;\r\n    \r\n    import org.apache.poi.hssf.usermodel.*;\r\n    import org.apache.poi.poifs.filesystem.POIFSFileSystem;\r\n    import org.apache.poi.ss.usermodel.*;\r\n    import org.apache.poi.ss.util.CellRangeAddress;\r\n    import org.apache.poi.xssf.usermodel.*;\r\n    \r\n    public class Xlsx2Xls {\r\n    \r\n    private File path = new File(&quot;c:/Integration-TestCases.xls&quot;);\r\n    private ArrayList&lt;File&gt; inputFiles = new ArrayList&lt;File&gt;();\r\n    \r\n    private int lastColumn = 0;\r\n    private HashMap&lt;Integer, HSSFCellStyle&gt; styleMap = new HashMap();\r\n    \r\n    private void getInputFiles() {\r\n        String call = &quot;getInputFiles &quot;;\r\n        if (this.path.isFile()) {\r\n            if (this.path.getAbsolutePath().endsWith(&quot;.xls&quot;)\r\n                    &amp;&amp; !new File(this.path.getAbsolutePath() + &quot;x&quot;).exists())\r\n                this.inputFiles.add(this.path);\r\n            else {\r\n                System.out\r\n                        .println(&quot;Datei endet nicht mit .xls oder XLSX-Datei existiert bereits&quot;);\r\n            }\r\n        } else\r\n            for (File f : this.path.listFiles(new FilenameFilter() {\r\n                // anonyme innere Klasse\r\n    \r\n                @Override\r\n                public boolean accept(File dir, String name) {\r\n                    if (name.endsWith(&quot;.xls&quot;))\r\n                        return true;\r\n                    return false;\r\n                }\r\n    \r\n            })) {\r\n                if (!new File(f.getAbsoluteFile() + &quot;x&quot;).exists()) {\r\n                    this.inputFiles.add(f);\r\n                }\r\n            }\r\n        System.out\r\n                .println(call + &quot;Dateien gefunden: &quot; + this.inputFiles.size());\r\n        System.out.println(call + &quot;abgeschlossen&quot;);\r\n    }\r\n    \r\n    private HSSFWorkbook getWorkBook(File f) throws FileNotFoundException,\r\n            IOException {\r\n        System.out.println(&quot;getWorkBook lese &quot; + f.getAbsolutePath());\r\n        POIFSFileSystem fs = new POIFSFileSystem(new BufferedInputStream(\r\n                new FileInputStream(f)));\r\n        HSSFWorkbook workbook = new HSSFWorkbook(fs);\r\n        System.out.println(&quot;getWorkBook abgeschlossen&quot;);\r\n        return workbook;\r\n    }\r\n    \r\n    private void transformXSSF(XSSFWorkbook workbookOld ,HSSFWorkbook workbookNew) {\r\n        String call = &quot;transform &quot;;\r\n        System.out.println(call + &quot;Workbook&quot;);\r\n        HSSFSheet sheetNew;\r\n        XSSFSheet sheetOld;\r\n        //TODO::workbookNew.setForceFormulaRecalculation(workbookOld.getForceFormulaRecalculation());\r\n        // workbookNew.setHidden(workbookOld.isHidden()); //ST@03.05.2012 -\r\n        // von Apache noch nicht implementiert\r\n        workbookNew.setMissingCellPolicy(workbookOld.getMissingCellPolicy());\r\n    \r\n        for (int i = 0; i &lt; workbookOld.getNumberOfSheets(); i++) {\r\n            sheetOld =  workbookOld.getSheetAt(i);\r\n            sheetNew = workbookNew.getSheet(sheetOld.getSheetName());\r\n            System.out.println(call + &quot;Sheet Name: &quot; + sheetOld.getSheetName());\r\n            sheetNew = workbookNew.createSheet(sheetOld.getSheetName());\r\n            this.transform(workbookOld,workbookNew,sheetOld, sheetNew);\r\n        }\r\n        System.out.println(call + &quot;Styles size: &quot;        + this.styleMap.size());\r\n        System.out.println(call + &quot;abgeschlossen&quot;);\r\n    }\r\n    \r\n    \r\n    \r\n        private void transform(XSSFWorkbook workbookOld ,HSSFWorkbook workbookNew,XSSFSheet sheetOld, HSSFSheet sheetNew) {\r\n            System.out.println(&quot;transform Sheet&quot;);\r\n    \r\n            sheetNew.setDisplayFormulas(sheetOld.isDisplayFormulas());\r\n            sheetNew.setDisplayGridlines(sheetOld.isDisplayGridlines());\r\n            sheetNew.setDisplayGuts(sheetOld.getDisplayGuts());\r\n            sheetNew.setDisplayRowColHeadings(sheetOld.isDisplayRowColHeadings());\r\n            sheetNew.setDisplayZeros(sheetOld.isDisplayZeros());\r\n            sheetNew.setFitToPage(sheetOld.getFitToPage());\r\n            //\r\n            //TODO::sheetNew.setForceFormulaRecalculation(sheetOld.getForceFormulaRecalculation());\r\n            sheetNew.setHorizontallyCenter(sheetOld.getHorizontallyCenter());\r\n            sheetNew.setMargin(Sheet.BottomMargin,\r\n                    sheetOld.getMargin(Sheet.BottomMargin));\r\n            sheetNew.setMargin(Sheet.FooterMargin,\r\n                    sheetOld.getMargin(Sheet.FooterMargin));\r\n            sheetNew.setMargin(Sheet.HeaderMargin,\r\n                    sheetOld.getMargin(Sheet.HeaderMargin));\r\n            sheetNew.setMargin(Sheet.LeftMargin,\r\n                    sheetOld.getMargin(Sheet.LeftMargin));\r\n            sheetNew.setMargin(Sheet.RightMargin,\r\n                    sheetOld.getMargin(Sheet.RightMargin));\r\n            sheetNew.setMargin(Sheet.TopMargin, sheetOld.getMargin(Sheet.TopMargin));\r\n            sheetNew.setPrintGridlines(sheetNew.isPrintGridlines());\r\n            sheetNew.setRightToLeft(sheetNew.isRightToLeft());\r\n            sheetNew.setRowSumsBelow(sheetNew.getRowSumsBelow());\r\n            sheetNew.setRowSumsRight(sheetNew.getRowSumsRight());\r\n            sheetNew.setVerticallyCenter(sheetOld.getVerticallyCenter());\r\n    \r\n            HSSFRow rowNew;\r\n            for (Row row : sheetOld) {\r\n                rowNew = sheetNew.createRow(row.getRowNum());\r\n                if (rowNew != null)\r\n                    this.transform(workbookOld,workbookNew,(XSSFRow) row, rowNew);\r\n            }\r\n    \r\n            for (int i = 0; i &lt; this.lastColumn; i++) {\r\n                sheetNew.setColumnWidth(i, sheetOld.getColumnWidth(i));\r\n                sheetNew.setColumnHidden(i, sheetOld.isColumnHidden(i));\r\n            }\r\n    \r\n            for (int i = 0; i &lt; sheetOld.getNumMergedRegions(); i++) {\r\n                CellRangeAddress merged = sheetOld.getMergedRegion(i);\r\n                sheetNew.addMergedRegion(merged);\r\n            }\r\n        }\r\n    \r\n    \r\n    \r\n        private void transform(XSSFWorkbook workbookOld ,HSSFWorkbook workbookNew,XSSFRow rowOld, HSSFRow rowNew) {\r\n            HSSFCell cellNew;\r\n            rowNew.setHeight(rowOld.getHeight());\r\n            //TODO::if (rowOld.getRowStyle() != null) {\r\n                /*Integer hash = rowOld.getRowStyle().hashCode();\r\n                if (!this.styleMap.containsKey(hash))\r\n                    this.transform(workbookOld,workbookNew,hash, (XSSFCellStyle)rowOld.getRowStyle(),(HSSFCellStyle)workbookNew.createCellStyle());\r\n                rowNew.setRowStyle(this.styleMap.get(hash));\r\n            }*/\r\n            for (Cell cell : rowOld) {\r\n                cellNew = rowNew.createCell(cell.getColumnIndex(),\r\n                        cell.getCellType());\r\n                if (cellNew != null)\r\n                    this.transform(workbookOld,workbookNew,(XSSFCell) cell, cellNew);\r\n            }\r\n            this.lastColumn = Math.max(this.lastColumn, rowOld.getLastCellNum());\r\n        }\r\n    \r\n    \r\n    \r\n    \r\n        private void transform(XSSFWorkbook workbookOld,HSSFWorkbook workbookNew,XSSFCell cellOld, HSSFCell cellNew) {\r\n            cellNew.setCellComment(cellOld.getCellComment());\r\n        \r\n            Integer hash = cellOld.getCellStyle().hashCode();\r\n            if (this.styleMap!=null &amp;&amp; !this.styleMap.containsKey(hash)) {\r\n                this.transform(workbookOld,workbookNew,hash, cellOld.getCellStyle(),(HSSFCellStyle)workbookNew.createCellStyle());\r\n            }\r\n            cellNew.setCellStyle(this.styleMap.get(hash));\r\n    \r\n            switch (cellOld.getCellType()) {\r\n            case Cell.CELL_TYPE_BLANK:\r\n                break;\r\n            case Cell.CELL_TYPE_BOOLEAN:\r\n                cellNew.setCellValue(cellOld.getBooleanCellValue());\r\n                break;\r\n            case Cell.CELL_TYPE_ERROR:\r\n                cellNew.setCellValue(cellOld.getErrorCellValue());\r\n                break;\r\n            case Cell.CELL_TYPE_FORMULA:\r\n                cellNew.setCellValue(cellOld.getCellFormula());\r\n                break;\r\n            case Cell.CELL_TYPE_NUMERIC:\r\n                cellNew.setCellValue(cellOld.getNumericCellValue());\r\n                break;\r\n            case Cell.CELL_TYPE_STRING:\r\n                cellNew.setCellValue(cellOld.getStringCellValue());\r\n                break;\r\n            default:\r\n                System.out.println(&quot;transform: Unbekannter Zellentyp &quot;\r\n                        + cellOld.getCellType());\r\n            }\r\n        }\r\n    \r\n    \r\n    \r\n    \r\n        private void transform(XSSFWorkbook workbookOld,HSSFWorkbook workbookNew,Integer hash, XSSFCellStyle styleOld,\r\n                HSSFCellStyle styleNew) {\r\n            styleNew.setAlignment(styleOld.getAlignment());\r\n            styleNew.setBorderBottom(styleOld.getBorderBottom());\r\n            styleNew.setBorderLeft(styleOld.getBorderLeft());\r\n            styleNew.setBorderRight(styleOld.getBorderRight());\r\n            styleNew.setBorderTop(styleOld.getBorderTop());\r\n             styleNew.setDataFormat(this.transform( workbookOld, workbookNew,styleOld.getDataFormat()));\r\n            styleNew.setFillBackgroundColor(styleOld.getFillBackgroundColor());\r\n            styleNew.setFillForegroundColor(styleOld.getFillForegroundColor());\r\n            styleNew.setFillPattern(styleOld.getFillPattern());\r\n            styleNew.setFont(this.transform(workbookNew,(XSSFFont)styleOld.getFont()));\r\n            styleNew.setHidden(styleOld.getHidden());\r\n            styleNew.setIndention(styleOld.getIndention());\r\n            styleNew.setLocked(styleOld.getLocked());\r\n            styleNew.setVerticalAlignment(styleOld.getVerticalAlignment());\r\n            styleNew.setWrapText(styleOld.getWrapText());\r\n            this.styleMap.put(hash, styleNew);\r\n        }\r\n    \r\n    private short transform(XSSFWorkbook workbookOld,HSSFWorkbook workbookNew,short index) {\r\n        DataFormat formatOld = workbookOld.createDataFormat();\r\n        DataFormat formatNew = workbookNew.createDataFormat();\r\n        return formatNew.getFormat(formatOld.getFormat(index));\r\n    }\r\n    \r\n    \r\n        private HSSFFont transform(HSSFWorkbook workbookNew,XSSFFont fontOld) {\r\n            HSSFFont fontNew = workbookNew.createFont();\r\n            fontNew.setBoldweight(fontOld.getBoldweight());\r\n            fontNew.setCharSet(fontOld.getCharSet());\r\n            fontNew.setColor(fontOld.getColor());\r\n            fontNew.setFontName(fontOld.getFontName());\r\n            fontNew.setFontHeight(fontOld.getFontHeight());\r\n            fontNew.setItalic(fontOld.getItalic());\r\n            fontNew.setStrikeout(fontOld.getStrikeout());\r\n            fontNew.setTypeOffset(fontOld.getTypeOffset());\r\n            fontNew.setUnderline(fontOld.getUnderline());\r\n            return fontNew;\r\n        }\r\n    \r\n    public static void main(String[] args) throws Exception{\r\n        Xlsx2Xls xls=new Xlsx2Xls(); \r\n        //xls.transform();\r\n         InputStream isXlsx = new FileInputStream(&quot;c:/OTD.xlsx&quot;);\r\n         XSSFWorkbook workbookOld     = new XSSFWorkbook(isXlsx);\r\n         \r\n        String dest=&quot;c:/OTD1.xls&quot;;\r\n    \r\n        FileOutputStream out = new FileOutputStream(dest);\r\n        HSSFWorkbook workbookNew = new HSSFWorkbook();\r\n        xls.transformXSSF( workbookOld , workbookNew) ;    \r\n        workbookNew.write(out);\r\n    \r\n        out.close();\r\n         \r\n    //    InputStream isXls = new FileInputStream(&quot;c:/OTD1.xls&quot;);\r\n    //    HSSFWorkbook workbookNew     = new HSSFWorkbook(isXls);\r\n        \r\n    \r\n    \r\n    }\r\n    }","title":"How to convert HSSFWorkbook to XSSFWorkbook using Apache POI?","body":"<pre><code>//Added xbean-2.3.0.jar/xmlbeans-2.3.0.jar,poi-ooxml-3.7-20101029.jarpoi-ooxml-schemas-3.7-beta1.jar,\n\n\nimport java.io.*;\nimport java.util.*;\n\nimport org.apache.poi.hssf.usermodel.*;\nimport org.apache.poi.poifs.filesystem.POIFSFileSystem;\nimport org.apache.poi.ss.usermodel.*;\nimport org.apache.poi.ss.util.CellRangeAddress;\nimport org.apache.poi.xssf.usermodel.*;\n\npublic class Xlsx2Xls {\n\nprivate File path = new File(\"c:/Integration-TestCases.xls\");\nprivate ArrayList&lt;File&gt; inputFiles = new ArrayList&lt;File&gt;();\n\nprivate int lastColumn = 0;\nprivate HashMap&lt;Integer, HSSFCellStyle&gt; styleMap = new HashMap();\n\nprivate void getInputFiles() {\n    String call = \"getInputFiles \";\n    if (this.path.isFile()) {\n        if (this.path.getAbsolutePath().endsWith(\".xls\")\n                &amp;&amp; !new File(this.path.getAbsolutePath() + \"x\").exists())\n            this.inputFiles.add(this.path);\n        else {\n            System.out\n                    .println(\"Datei endet nicht mit .xls oder XLSX-Datei existiert bereits\");\n        }\n    } else\n        for (File f : this.path.listFiles(new FilenameFilter() {\n            // anonyme innere Klasse\n\n            @Override\n            public boolean accept(File dir, String name) {\n                if (name.endsWith(\".xls\"))\n                    return true;\n                return false;\n            }\n\n        })) {\n            if (!new File(f.getAbsoluteFile() + \"x\").exists()) {\n                this.inputFiles.add(f);\n            }\n        }\n    System.out\n            .println(call + \"Dateien gefunden: \" + this.inputFiles.size());\n    System.out.println(call + \"abgeschlossen\");\n}\n\nprivate HSSFWorkbook getWorkBook(File f) throws FileNotFoundException,\n        IOException {\n    System.out.println(\"getWorkBook lese \" + f.getAbsolutePath());\n    POIFSFileSystem fs = new POIFSFileSystem(new BufferedInputStream(\n            new FileInputStream(f)));\n    HSSFWorkbook workbook = new HSSFWorkbook(fs);\n    System.out.println(\"getWorkBook abgeschlossen\");\n    return workbook;\n}\n\nprivate void transformXSSF(XSSFWorkbook workbookOld ,HSSFWorkbook workbookNew) {\n    String call = \"transform \";\n    System.out.println(call + \"Workbook\");\n    HSSFSheet sheetNew;\n    XSSFSheet sheetOld;\n    //TODO::workbookNew.setForceFormulaRecalculation(workbookOld.getForceFormulaRecalculation());\n    // workbookNew.setHidden(workbookOld.isHidden()); //ST@03.05.2012 -\n    // von Apache noch nicht implementiert\n    workbookNew.setMissingCellPolicy(workbookOld.getMissingCellPolicy());\n\n    for (int i = 0; i &lt; workbookOld.getNumberOfSheets(); i++) {\n        sheetOld =  workbookOld.getSheetAt(i);\n        sheetNew = workbookNew.getSheet(sheetOld.getSheetName());\n        System.out.println(call + \"Sheet Name: \" + sheetOld.getSheetName());\n        sheetNew = workbookNew.createSheet(sheetOld.getSheetName());\n        this.transform(workbookOld,workbookNew,sheetOld, sheetNew);\n    }\n    System.out.println(call + \"Styles size: \"        + this.styleMap.size());\n    System.out.println(call + \"abgeschlossen\");\n}\n\n\n\n    private void transform(XSSFWorkbook workbookOld ,HSSFWorkbook workbookNew,XSSFSheet sheetOld, HSSFSheet sheetNew) {\n        System.out.println(\"transform Sheet\");\n\n        sheetNew.setDisplayFormulas(sheetOld.isDisplayFormulas());\n        sheetNew.setDisplayGridlines(sheetOld.isDisplayGridlines());\n        sheetNew.setDisplayGuts(sheetOld.getDisplayGuts());\n        sheetNew.setDisplayRowColHeadings(sheetOld.isDisplayRowColHeadings());\n        sheetNew.setDisplayZeros(sheetOld.isDisplayZeros());\n        sheetNew.setFitToPage(sheetOld.getFitToPage());\n        //\n        //TODO::sheetNew.setForceFormulaRecalculation(sheetOld.getForceFormulaRecalculation());\n        sheetNew.setHorizontallyCenter(sheetOld.getHorizontallyCenter());\n        sheetNew.setMargin(Sheet.BottomMargin,\n                sheetOld.getMargin(Sheet.BottomMargin));\n        sheetNew.setMargin(Sheet.FooterMargin,\n                sheetOld.getMargin(Sheet.FooterMargin));\n        sheetNew.setMargin(Sheet.HeaderMargin,\n                sheetOld.getMargin(Sheet.HeaderMargin));\n        sheetNew.setMargin(Sheet.LeftMargin,\n                sheetOld.getMargin(Sheet.LeftMargin));\n        sheetNew.setMargin(Sheet.RightMargin,\n                sheetOld.getMargin(Sheet.RightMargin));\n        sheetNew.setMargin(Sheet.TopMargin, sheetOld.getMargin(Sheet.TopMargin));\n        sheetNew.setPrintGridlines(sheetNew.isPrintGridlines());\n        sheetNew.setRightToLeft(sheetNew.isRightToLeft());\n        sheetNew.setRowSumsBelow(sheetNew.getRowSumsBelow());\n        sheetNew.setRowSumsRight(sheetNew.getRowSumsRight());\n        sheetNew.setVerticallyCenter(sheetOld.getVerticallyCenter());\n\n        HSSFRow rowNew;\n        for (Row row : sheetOld) {\n            rowNew = sheetNew.createRow(row.getRowNum());\n            if (rowNew != null)\n                this.transform(workbookOld,workbookNew,(XSSFRow) row, rowNew);\n        }\n\n        for (int i = 0; i &lt; this.lastColumn; i++) {\n            sheetNew.setColumnWidth(i, sheetOld.getColumnWidth(i));\n            sheetNew.setColumnHidden(i, sheetOld.isColumnHidden(i));\n        }\n\n        for (int i = 0; i &lt; sheetOld.getNumMergedRegions(); i++) {\n            CellRangeAddress merged = sheetOld.getMergedRegion(i);\n            sheetNew.addMergedRegion(merged);\n        }\n    }\n\n\n\n    private void transform(XSSFWorkbook workbookOld ,HSSFWorkbook workbookNew,XSSFRow rowOld, HSSFRow rowNew) {\n        HSSFCell cellNew;\n        rowNew.setHeight(rowOld.getHeight());\n        //TODO::if (rowOld.getRowStyle() != null) {\n            /*Integer hash = rowOld.getRowStyle().hashCode();\n            if (!this.styleMap.containsKey(hash))\n                this.transform(workbookOld,workbookNew,hash, (XSSFCellStyle)rowOld.getRowStyle(),(HSSFCellStyle)workbookNew.createCellStyle());\n            rowNew.setRowStyle(this.styleMap.get(hash));\n        }*/\n        for (Cell cell : rowOld) {\n            cellNew = rowNew.createCell(cell.getColumnIndex(),\n                    cell.getCellType());\n            if (cellNew != null)\n                this.transform(workbookOld,workbookNew,(XSSFCell) cell, cellNew);\n        }\n        this.lastColumn = Math.max(this.lastColumn, rowOld.getLastCellNum());\n    }\n\n\n\n\n    private void transform(XSSFWorkbook workbookOld,HSSFWorkbook workbookNew,XSSFCell cellOld, HSSFCell cellNew) {\n        cellNew.setCellComment(cellOld.getCellComment());\n\n        Integer hash = cellOld.getCellStyle().hashCode();\n        if (this.styleMap!=null &amp;&amp; !this.styleMap.containsKey(hash)) {\n            this.transform(workbookOld,workbookNew,hash, cellOld.getCellStyle(),(HSSFCellStyle)workbookNew.createCellStyle());\n        }\n        cellNew.setCellStyle(this.styleMap.get(hash));\n\n        switch (cellOld.getCellType()) {\n        case Cell.CELL_TYPE_BLANK:\n            break;\n        case Cell.CELL_TYPE_BOOLEAN:\n            cellNew.setCellValue(cellOld.getBooleanCellValue());\n            break;\n        case Cell.CELL_TYPE_ERROR:\n            cellNew.setCellValue(cellOld.getErrorCellValue());\n            break;\n        case Cell.CELL_TYPE_FORMULA:\n            cellNew.setCellValue(cellOld.getCellFormula());\n            break;\n        case Cell.CELL_TYPE_NUMERIC:\n            cellNew.setCellValue(cellOld.getNumericCellValue());\n            break;\n        case Cell.CELL_TYPE_STRING:\n            cellNew.setCellValue(cellOld.getStringCellValue());\n            break;\n        default:\n            System.out.println(\"transform: Unbekannter Zellentyp \"\n                    + cellOld.getCellType());\n        }\n    }\n\n\n\n\n    private void transform(XSSFWorkbook workbookOld,HSSFWorkbook workbookNew,Integer hash, XSSFCellStyle styleOld,\n            HSSFCellStyle styleNew) {\n        styleNew.setAlignment(styleOld.getAlignment());\n        styleNew.setBorderBottom(styleOld.getBorderBottom());\n        styleNew.setBorderLeft(styleOld.getBorderLeft());\n        styleNew.setBorderRight(styleOld.getBorderRight());\n        styleNew.setBorderTop(styleOld.getBorderTop());\n         styleNew.setDataFormat(this.transform( workbookOld, workbookNew,styleOld.getDataFormat()));\n        styleNew.setFillBackgroundColor(styleOld.getFillBackgroundColor());\n        styleNew.setFillForegroundColor(styleOld.getFillForegroundColor());\n        styleNew.setFillPattern(styleOld.getFillPattern());\n        styleNew.setFont(this.transform(workbookNew,(XSSFFont)styleOld.getFont()));\n        styleNew.setHidden(styleOld.getHidden());\n        styleNew.setIndention(styleOld.getIndention());\n        styleNew.setLocked(styleOld.getLocked());\n        styleNew.setVerticalAlignment(styleOld.getVerticalAlignment());\n        styleNew.setWrapText(styleOld.getWrapText());\n        this.styleMap.put(hash, styleNew);\n    }\n\nprivate short transform(XSSFWorkbook workbookOld,HSSFWorkbook workbookNew,short index) {\n    DataFormat formatOld = workbookOld.createDataFormat();\n    DataFormat formatNew = workbookNew.createDataFormat();\n    return formatNew.getFormat(formatOld.getFormat(index));\n}\n\n\n    private HSSFFont transform(HSSFWorkbook workbookNew,XSSFFont fontOld) {\n        HSSFFont fontNew = workbookNew.createFont();\n        fontNew.setBoldweight(fontOld.getBoldweight());\n        fontNew.setCharSet(fontOld.getCharSet());\n        fontNew.setColor(fontOld.getColor());\n        fontNew.setFontName(fontOld.getFontName());\n        fontNew.setFontHeight(fontOld.getFontHeight());\n        fontNew.setItalic(fontOld.getItalic());\n        fontNew.setStrikeout(fontOld.getStrikeout());\n        fontNew.setTypeOffset(fontOld.getTypeOffset());\n        fontNew.setUnderline(fontOld.getUnderline());\n        return fontNew;\n    }\n\npublic static void main(String[] args) throws Exception{\n    Xlsx2Xls xls=new Xlsx2Xls(); \n    //xls.transform();\n     InputStream isXlsx = new FileInputStream(\"c:/OTD.xlsx\");\n     XSSFWorkbook workbookOld     = new XSSFWorkbook(isXlsx);\n\n    String dest=\"c:/OTD1.xls\";\n\n    FileOutputStream out = new FileOutputStream(dest);\n    HSSFWorkbook workbookNew = new HSSFWorkbook();\n    xls.transformXSSF( workbookOld , workbookNew) ;    \n    workbookNew.write(out);\n\n    out.close();\n\n//    InputStream isXls = new FileInputStream(\"c:/OTD1.xls\");\n//    HSSFWorkbook workbookNew     = new HSSFWorkbook(isXls);\n\n\n\n}\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":6970541,"reputation":171,"user_id":5347066,"display_name":"Igor"},"score":0,"creation_date":1502787524,"post_id":19809861,"comment_id":78336839,"body_markdown":"Thank you!!! But Sheet.FooterMargin and Sheet.HeaderMargin not working for XSSFWorkbook","body":"Thank you!!! But Sheet.FooterMargin and Sheet.HeaderMargin not working for XSSFWorkbook"}],"tags":[],"owner":{"account_id":3543350,"reputation":81,"user_id":2959916,"display_name":"Indranil Nag"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1383734382,"creation_date":1383734382,"answer_id":19809861,"question_id":7230819,"body_markdown":"    //Added xbean-2.3.0.jar/xmlbeans-2.3.0.jar,poi-ooxml-3.7-20101029.jarpoi-ooxml-schemas-3.7-beta1.jar,\r\n    import java.io.*;\r\n    import java.util.*;\r\n    \r\n    import org.apache.poi.hssf.usermodel.*;\r\n    import org.apache.poi.poifs.filesystem.POIFSFileSystem;\r\n    import org.apache.poi.ss.usermodel.*;\r\n    import org.apache.poi.ss.util.CellRangeAddress;\r\n    import org.apache.poi.xssf.usermodel.*;\r\n    \r\n    public class Xls2Xlsx {\r\n    \r\n    private File path = new File(&quot;c:/Integration-TestCases.xls&quot;);\r\n    private ArrayList&lt;File&gt; inputFiles = new ArrayList&lt;File&gt;();\r\n    \r\n    private int lastColumn = 0;\r\n    private HashMap&lt;Integer, XSSFCellStyle&gt; styleMap = new HashMap();\r\n    \r\n    private void getInputFiles() {\r\n        String call = &quot;getInputFiles &quot;;\r\n        if (this.path.isFile()) {\r\n            if (this.path.getAbsolutePath().endsWith(&quot;.xls&quot;)\r\n                    &amp;&amp; !new File(this.path.getAbsolutePath() + &quot;x&quot;).exists())\r\n                this.inputFiles.add(this.path);\r\n            else {\r\n                System.out\r\n                        .println(&quot;Datei endet nicht mit .xls oder XLSX-Datei existiert bereits&quot;);\r\n            }\r\n        } else\r\n            for (File f : this.path.listFiles(new FilenameFilter() {\r\n                // anonyme innere Klasse\r\n    \r\n                @Override\r\n                public boolean accept(File dir, String name) {\r\n                    if (name.endsWith(&quot;.xls&quot;))\r\n                        return true;\r\n                    return false;\r\n                }\r\n    \r\n            })) {\r\n                if (!new File(f.getAbsoluteFile() + &quot;x&quot;).exists()) {\r\n                    this.inputFiles.add(f);\r\n                }\r\n            }\r\n        System.out\r\n                .println(call + &quot;Dateien gefunden: &quot; + this.inputFiles.size());\r\n        System.out.println(call + &quot;abgeschlossen&quot;);\r\n    }\r\n    \r\n    private HSSFWorkbook getWorkBook(File f) throws FileNotFoundException,\r\n            IOException {\r\n        System.out.println(&quot;getWorkBook lese &quot; + f.getAbsolutePath());\r\n        POIFSFileSystem fs = new POIFSFileSystem(new BufferedInputStream(\r\n                new FileInputStream(f)));\r\n        HSSFWorkbook workbook = new HSSFWorkbook(fs);\r\n        System.out.println(&quot;getWorkBook abgeschlossen&quot;);\r\n        return workbook;\r\n    }\r\n    \r\n    private void transformHSSF(HSSFWorkbook workbookOld ,XSSFWorkbook workbookNew) {\r\n        String call = &quot;transform &quot;;\r\n        System.out.println(call + &quot;Workbook&quot;);\r\n        XSSFSheet sheetNew;\r\n        HSSFSheet sheetOld;\r\n        //TODO::workbookNew.setForceFormulaRecalculation(workbookOld.getForceFormulaRecalculation());\r\n        // workbookNew.setHidden(workbookOld.isHidden()); //ST@03.05.2012 -\r\n        // von Apache noch nicht implementiert\r\n        workbookNew.setMissingCellPolicy(workbookOld.getMissingCellPolicy());\r\n    \r\n        for (int i = 0; i &lt; workbookOld.getNumberOfSheets(); i++) {\r\n            sheetOld =  workbookOld.getSheetAt(i);\r\n            sheetNew = workbookNew.getSheet(sheetOld.getSheetName());\r\n            System.out.println(call + &quot;Sheet Name: &quot; + sheetOld.getSheetName());\r\n            sheetNew = workbookNew.createSheet(sheetOld.getSheetName());\r\n            this.transform(workbookOld,workbookNew,sheetOld, sheetNew);\r\n        }\r\n        System.out.println(call + &quot;Styles size: &quot;        + this.styleMap.size());\r\n        System.out.println(call + &quot;abgeschlossen&quot;);\r\n    }\r\n    \r\n    \r\n    \r\n        private void transform(HSSFWorkbook workbookOld ,XSSFWorkbook workbookNew,HSSFSheet sheetOld, XSSFSheet sheetNew) {\r\n            System.out.println(&quot;transform Sheet&quot;);\r\n    \r\n            sheetNew.setDisplayFormulas(sheetOld.isDisplayFormulas());\r\n            sheetNew.setDisplayGridlines(sheetOld.isDisplayGridlines());\r\n            sheetNew.setDisplayGuts(sheetOld.getDisplayGuts());\r\n            sheetNew.setDisplayRowColHeadings(sheetOld.isDisplayRowColHeadings());\r\n            sheetNew.setDisplayZeros(sheetOld.isDisplayZeros());\r\n            sheetNew.setFitToPage(sheetOld.getFitToPage());\r\n            //\r\n            //TODO::sheetNew.setForceFormulaRecalculation(sheetOld.getForceFormulaRecalculation());\r\n            sheetNew.setHorizontallyCenter(sheetOld.getHorizontallyCenter());\r\n            sheetNew.setMargin(Sheet.BottomMargin,\r\n                    sheetOld.getMargin(Sheet.BottomMargin));\r\n            sheetNew.setMargin(Sheet.FooterMargin,\r\n                    sheetOld.getMargin(Sheet.FooterMargin));\r\n            sheetNew.setMargin(Sheet.HeaderMargin,\r\n                    sheetOld.getMargin(Sheet.HeaderMargin));\r\n            sheetNew.setMargin(Sheet.LeftMargin,\r\n                    sheetOld.getMargin(Sheet.LeftMargin));\r\n            sheetNew.setMargin(Sheet.RightMargin,\r\n                    sheetOld.getMargin(Sheet.RightMargin));\r\n            sheetNew.setMargin(Sheet.TopMargin, sheetOld.getMargin(Sheet.TopMargin));\r\n            sheetNew.setPrintGridlines(sheetNew.isPrintGridlines());\r\n            //TODO::sheetNew.setRightToLeft(sheetNew.isRightToLeft());\r\n            sheetNew.setRowSumsBelow(sheetNew.getRowSumsBelow());\r\n            sheetNew.setRowSumsRight(sheetNew.getRowSumsRight());\r\n            sheetNew.setVerticallyCenter(sheetOld.getVerticallyCenter());\r\n    \r\n            XSSFRow rowNew;\r\n            for (Row row : sheetOld) {\r\n                rowNew = sheetNew.createRow(row.getRowNum());\r\n                if (rowNew != null)\r\n                    this.transform(workbookOld,workbookNew,(HSSFRow) row, rowNew);\r\n            }\r\n    \r\n            for (int i = 0; i &lt; this.lastColumn; i++) {\r\n                sheetNew.setColumnWidth(i, sheetOld.getColumnWidth(i));\r\n                sheetNew.setColumnHidden(i, sheetOld.isColumnHidden(i));\r\n            }\r\n    \r\n            for (int i = 0; i &lt; sheetOld.getNumMergedRegions(); i++) {\r\n                CellRangeAddress merged = sheetOld.getMergedRegion(i);\r\n                sheetNew.addMergedRegion(merged);\r\n            }\r\n        }\r\n    \r\n    \r\n    \r\n        private void transform(HSSFWorkbook workbookOld ,XSSFWorkbook workbookNew,HSSFRow rowOld, XSSFRow rowNew) {\r\n            XSSFCell cellNew;\r\n            rowNew.setHeight(rowOld.getHeight());\r\n            //TODO::if (rowOld.getRowStyle() != null) {\r\n                /*Integer hash = rowOld.getRowStyle().hashCode();\r\n                if (!this.styleMap.containsKey(hash))\r\n                    this.transform(workbookOld,workbookNew,hash, (XSSFCellStyle)rowOld.getRowStyle(),(HSSFCellStyle)workbookNew.createCellStyle());\r\n                rowNew.setRowStyle(this.styleMap.get(hash));\r\n            }*/\r\n            for (Cell cell : rowOld) {\r\n                cellNew = rowNew.createCell(cell.getColumnIndex(), cell.getCellType());\r\n                if (cellNew != null)\r\n                    this.transform(workbookOld,workbookNew,(HSSFCell) cell, cellNew);\r\n            }\r\n            this.lastColumn = Math.max(this.lastColumn, rowOld.getLastCellNum());\r\n        }\r\n    \r\n    \r\n    \r\n    \r\n        private void transform(HSSFWorkbook workbookOld,XSSFWorkbook workbookNew,HSSFCell cellOld,XSSFCell cellNew) {\r\n            cellNew.setCellComment(cellOld.getCellComment());\r\n        \r\n            Integer hash = cellOld.getCellStyle().hashCode();\r\n            if (this.styleMap!=null &amp;&amp; !this.styleMap.containsKey(hash)) {\r\n                this.transform(workbookOld,workbookNew,hash, cellOld.getCellStyle(),(XSSFCellStyle)workbookNew.createCellStyle());\r\n            }\r\n            cellNew.setCellStyle(this.styleMap.get(hash));\r\n    \r\n            switch (cellOld.getCellType()) {\r\n            case Cell.CELL_TYPE_BLANK:\r\n                break;\r\n            case Cell.CELL_TYPE_BOOLEAN:\r\n                cellNew.setCellValue(cellOld.getBooleanCellValue());\r\n                break;\r\n            case Cell.CELL_TYPE_ERROR:\r\n                cellNew.setCellValue(cellOld.getErrorCellValue());\r\n                break;\r\n            case Cell.CELL_TYPE_FORMULA:\r\n                cellNew.setCellValue(cellOld.getCellFormula());\r\n                break;\r\n            case Cell.CELL_TYPE_NUMERIC:\r\n                cellNew.setCellValue(cellOld.getNumericCellValue());\r\n                break;\r\n            case Cell.CELL_TYPE_STRING:\r\n                cellNew.setCellValue(cellOld.getStringCellValue());\r\n                break;\r\n            default:\r\n                System.out.println(&quot;transform: Unbekannter Zellentyp &quot;\r\n                        + cellOld.getCellType());\r\n            }\r\n        }\r\n    \r\n    \r\n    \r\n    \r\n        private void transform(HSSFWorkbook workbookOld,XSSFWorkbook workbookNew,Integer hash, HSSFCellStyle styleOld,\r\n                XSSFCellStyle styleNew) {\r\n            styleNew.setAlignment(styleOld.getAlignment());\r\n            styleNew.setBorderBottom(styleOld.getBorderBottom());\r\n            styleNew.setBorderLeft(styleOld.getBorderLeft());\r\n            styleNew.setBorderRight(styleOld.getBorderRight());\r\n            styleNew.setBorderTop(styleOld.getBorderTop());\r\n             styleNew.setDataFormat(this.transform( workbookOld, workbookNew,styleOld.getDataFormat()));\r\n            styleNew.setFillBackgroundColor(styleOld.getFillBackgroundColor());\r\n            styleNew.setFillForegroundColor(styleOld.getFillForegroundColor());\r\n            styleNew.setFillPattern(styleOld.getFillPattern());\r\n            styleNew.setFont(this.transform(workbookNew,styleOld.getFont(workbookOld)));\r\n            styleNew.setHidden(styleOld.getHidden());\r\n            styleNew.setIndention(styleOld.getIndention());\r\n            styleNew.setLocked(styleOld.getLocked());\r\n            styleNew.setVerticalAlignment(styleOld.getVerticalAlignment());\r\n            styleNew.setWrapText(styleOld.getWrapText());\r\n            this.styleMap.put(hash, styleNew);\r\n        }\r\n    \r\n    private short transform(HSSFWorkbook workbookOld,XSSFWorkbook workbookNew,short index) {\r\n        DataFormat formatOld = workbookOld.createDataFormat();\r\n        DataFormat formatNew = workbookNew.createDataFormat();\r\n        return formatNew.getFormat(formatOld.getFormat(index));\r\n    }\r\n    \r\n    \r\n        private XSSFFont transform(XSSFWorkbook workbookNew,HSSFFont fontOld) {\r\n            XSSFFont fontNew = workbookNew.createFont();\r\n            fontNew.setBoldweight(fontOld.getBoldweight());\r\n            fontNew.setCharSet(fontOld.getCharSet());\r\n            fontNew.setColor(fontOld.getColor());\r\n            fontNew.setFontName(fontOld.getFontName());\r\n            fontNew.setFontHeight(fontOld.getFontHeight());\r\n            fontNew.setItalic(fontOld.getItalic());\r\n            fontNew.setStrikeout(fontOld.getStrikeout());\r\n            fontNew.setTypeOffset(fontOld.getTypeOffset());\r\n            fontNew.setUnderline(fontOld.getUnderline());\r\n            return fontNew;\r\n        }\r\n    \r\n    public static void main(String[] args) throws Exception{\r\n        Xls2Xlsx xls=new Xls2Xlsx(); \r\n        //xls.transform();\r\n         InputStream isXls = new FileInputStream(&quot;c:/OTD1.xls&quot;);\r\n         HSSFWorkbook workbookOld     = new HSSFWorkbook(isXls);\r\n         \r\n        String dest=&quot;c:/OTD.xlsx&quot;;\r\n    \r\n        FileOutputStream out = new FileOutputStream(dest);\r\n        XSSFWorkbook workbookNew = new XSSFWorkbook();\r\n        xls.transformHSSF( workbookOld , workbookNew) ;    \r\n        workbookNew.write(out);\r\n    \r\n        out.close();\r\n         \r\n    //    InputStream isXls = new FileInputStream(&quot;c:/OTD1.xls&quot;);\r\n    //    HSSFWorkbook workbookNew     = new HSSFWorkbook(isXls);\r\n        \r\n    \r\n    \r\n    }\r\n    }","title":"How to convert HSSFWorkbook to XSSFWorkbook using Apache POI?","body":"<pre><code>//Added xbean-2.3.0.jar/xmlbeans-2.3.0.jar,poi-ooxml-3.7-20101029.jarpoi-ooxml-schemas-3.7-beta1.jar,\nimport java.io.*;\nimport java.util.*;\n\nimport org.apache.poi.hssf.usermodel.*;\nimport org.apache.poi.poifs.filesystem.POIFSFileSystem;\nimport org.apache.poi.ss.usermodel.*;\nimport org.apache.poi.ss.util.CellRangeAddress;\nimport org.apache.poi.xssf.usermodel.*;\n\npublic class Xls2Xlsx {\n\nprivate File path = new File(\"c:/Integration-TestCases.xls\");\nprivate ArrayList&lt;File&gt; inputFiles = new ArrayList&lt;File&gt;();\n\nprivate int lastColumn = 0;\nprivate HashMap&lt;Integer, XSSFCellStyle&gt; styleMap = new HashMap();\n\nprivate void getInputFiles() {\n    String call = \"getInputFiles \";\n    if (this.path.isFile()) {\n        if (this.path.getAbsolutePath().endsWith(\".xls\")\n                &amp;&amp; !new File(this.path.getAbsolutePath() + \"x\").exists())\n            this.inputFiles.add(this.path);\n        else {\n            System.out\n                    .println(\"Datei endet nicht mit .xls oder XLSX-Datei existiert bereits\");\n        }\n    } else\n        for (File f : this.path.listFiles(new FilenameFilter() {\n            // anonyme innere Klasse\n\n            @Override\n            public boolean accept(File dir, String name) {\n                if (name.endsWith(\".xls\"))\n                    return true;\n                return false;\n            }\n\n        })) {\n            if (!new File(f.getAbsoluteFile() + \"x\").exists()) {\n                this.inputFiles.add(f);\n            }\n        }\n    System.out\n            .println(call + \"Dateien gefunden: \" + this.inputFiles.size());\n    System.out.println(call + \"abgeschlossen\");\n}\n\nprivate HSSFWorkbook getWorkBook(File f) throws FileNotFoundException,\n        IOException {\n    System.out.println(\"getWorkBook lese \" + f.getAbsolutePath());\n    POIFSFileSystem fs = new POIFSFileSystem(new BufferedInputStream(\n            new FileInputStream(f)));\n    HSSFWorkbook workbook = new HSSFWorkbook(fs);\n    System.out.println(\"getWorkBook abgeschlossen\");\n    return workbook;\n}\n\nprivate void transformHSSF(HSSFWorkbook workbookOld ,XSSFWorkbook workbookNew) {\n    String call = \"transform \";\n    System.out.println(call + \"Workbook\");\n    XSSFSheet sheetNew;\n    HSSFSheet sheetOld;\n    //TODO::workbookNew.setForceFormulaRecalculation(workbookOld.getForceFormulaRecalculation());\n    // workbookNew.setHidden(workbookOld.isHidden()); //ST@03.05.2012 -\n    // von Apache noch nicht implementiert\n    workbookNew.setMissingCellPolicy(workbookOld.getMissingCellPolicy());\n\n    for (int i = 0; i &lt; workbookOld.getNumberOfSheets(); i++) {\n        sheetOld =  workbookOld.getSheetAt(i);\n        sheetNew = workbookNew.getSheet(sheetOld.getSheetName());\n        System.out.println(call + \"Sheet Name: \" + sheetOld.getSheetName());\n        sheetNew = workbookNew.createSheet(sheetOld.getSheetName());\n        this.transform(workbookOld,workbookNew,sheetOld, sheetNew);\n    }\n    System.out.println(call + \"Styles size: \"        + this.styleMap.size());\n    System.out.println(call + \"abgeschlossen\");\n}\n\n\n\n    private void transform(HSSFWorkbook workbookOld ,XSSFWorkbook workbookNew,HSSFSheet sheetOld, XSSFSheet sheetNew) {\n        System.out.println(\"transform Sheet\");\n\n        sheetNew.setDisplayFormulas(sheetOld.isDisplayFormulas());\n        sheetNew.setDisplayGridlines(sheetOld.isDisplayGridlines());\n        sheetNew.setDisplayGuts(sheetOld.getDisplayGuts());\n        sheetNew.setDisplayRowColHeadings(sheetOld.isDisplayRowColHeadings());\n        sheetNew.setDisplayZeros(sheetOld.isDisplayZeros());\n        sheetNew.setFitToPage(sheetOld.getFitToPage());\n        //\n        //TODO::sheetNew.setForceFormulaRecalculation(sheetOld.getForceFormulaRecalculation());\n        sheetNew.setHorizontallyCenter(sheetOld.getHorizontallyCenter());\n        sheetNew.setMargin(Sheet.BottomMargin,\n                sheetOld.getMargin(Sheet.BottomMargin));\n        sheetNew.setMargin(Sheet.FooterMargin,\n                sheetOld.getMargin(Sheet.FooterMargin));\n        sheetNew.setMargin(Sheet.HeaderMargin,\n                sheetOld.getMargin(Sheet.HeaderMargin));\n        sheetNew.setMargin(Sheet.LeftMargin,\n                sheetOld.getMargin(Sheet.LeftMargin));\n        sheetNew.setMargin(Sheet.RightMargin,\n                sheetOld.getMargin(Sheet.RightMargin));\n        sheetNew.setMargin(Sheet.TopMargin, sheetOld.getMargin(Sheet.TopMargin));\n        sheetNew.setPrintGridlines(sheetNew.isPrintGridlines());\n        //TODO::sheetNew.setRightToLeft(sheetNew.isRightToLeft());\n        sheetNew.setRowSumsBelow(sheetNew.getRowSumsBelow());\n        sheetNew.setRowSumsRight(sheetNew.getRowSumsRight());\n        sheetNew.setVerticallyCenter(sheetOld.getVerticallyCenter());\n\n        XSSFRow rowNew;\n        for (Row row : sheetOld) {\n            rowNew = sheetNew.createRow(row.getRowNum());\n            if (rowNew != null)\n                this.transform(workbookOld,workbookNew,(HSSFRow) row, rowNew);\n        }\n\n        for (int i = 0; i &lt; this.lastColumn; i++) {\n            sheetNew.setColumnWidth(i, sheetOld.getColumnWidth(i));\n            sheetNew.setColumnHidden(i, sheetOld.isColumnHidden(i));\n        }\n\n        for (int i = 0; i &lt; sheetOld.getNumMergedRegions(); i++) {\n            CellRangeAddress merged = sheetOld.getMergedRegion(i);\n            sheetNew.addMergedRegion(merged);\n        }\n    }\n\n\n\n    private void transform(HSSFWorkbook workbookOld ,XSSFWorkbook workbookNew,HSSFRow rowOld, XSSFRow rowNew) {\n        XSSFCell cellNew;\n        rowNew.setHeight(rowOld.getHeight());\n        //TODO::if (rowOld.getRowStyle() != null) {\n            /*Integer hash = rowOld.getRowStyle().hashCode();\n            if (!this.styleMap.containsKey(hash))\n                this.transform(workbookOld,workbookNew,hash, (XSSFCellStyle)rowOld.getRowStyle(),(HSSFCellStyle)workbookNew.createCellStyle());\n            rowNew.setRowStyle(this.styleMap.get(hash));\n        }*/\n        for (Cell cell : rowOld) {\n            cellNew = rowNew.createCell(cell.getColumnIndex(), cell.getCellType());\n            if (cellNew != null)\n                this.transform(workbookOld,workbookNew,(HSSFCell) cell, cellNew);\n        }\n        this.lastColumn = Math.max(this.lastColumn, rowOld.getLastCellNum());\n    }\n\n\n\n\n    private void transform(HSSFWorkbook workbookOld,XSSFWorkbook workbookNew,HSSFCell cellOld,XSSFCell cellNew) {\n        cellNew.setCellComment(cellOld.getCellComment());\n\n        Integer hash = cellOld.getCellStyle().hashCode();\n        if (this.styleMap!=null &amp;&amp; !this.styleMap.containsKey(hash)) {\n            this.transform(workbookOld,workbookNew,hash, cellOld.getCellStyle(),(XSSFCellStyle)workbookNew.createCellStyle());\n        }\n        cellNew.setCellStyle(this.styleMap.get(hash));\n\n        switch (cellOld.getCellType()) {\n        case Cell.CELL_TYPE_BLANK:\n            break;\n        case Cell.CELL_TYPE_BOOLEAN:\n            cellNew.setCellValue(cellOld.getBooleanCellValue());\n            break;\n        case Cell.CELL_TYPE_ERROR:\n            cellNew.setCellValue(cellOld.getErrorCellValue());\n            break;\n        case Cell.CELL_TYPE_FORMULA:\n            cellNew.setCellValue(cellOld.getCellFormula());\n            break;\n        case Cell.CELL_TYPE_NUMERIC:\n            cellNew.setCellValue(cellOld.getNumericCellValue());\n            break;\n        case Cell.CELL_TYPE_STRING:\n            cellNew.setCellValue(cellOld.getStringCellValue());\n            break;\n        default:\n            System.out.println(\"transform: Unbekannter Zellentyp \"\n                    + cellOld.getCellType());\n        }\n    }\n\n\n\n\n    private void transform(HSSFWorkbook workbookOld,XSSFWorkbook workbookNew,Integer hash, HSSFCellStyle styleOld,\n            XSSFCellStyle styleNew) {\n        styleNew.setAlignment(styleOld.getAlignment());\n        styleNew.setBorderBottom(styleOld.getBorderBottom());\n        styleNew.setBorderLeft(styleOld.getBorderLeft());\n        styleNew.setBorderRight(styleOld.getBorderRight());\n        styleNew.setBorderTop(styleOld.getBorderTop());\n         styleNew.setDataFormat(this.transform( workbookOld, workbookNew,styleOld.getDataFormat()));\n        styleNew.setFillBackgroundColor(styleOld.getFillBackgroundColor());\n        styleNew.setFillForegroundColor(styleOld.getFillForegroundColor());\n        styleNew.setFillPattern(styleOld.getFillPattern());\n        styleNew.setFont(this.transform(workbookNew,styleOld.getFont(workbookOld)));\n        styleNew.setHidden(styleOld.getHidden());\n        styleNew.setIndention(styleOld.getIndention());\n        styleNew.setLocked(styleOld.getLocked());\n        styleNew.setVerticalAlignment(styleOld.getVerticalAlignment());\n        styleNew.setWrapText(styleOld.getWrapText());\n        this.styleMap.put(hash, styleNew);\n    }\n\nprivate short transform(HSSFWorkbook workbookOld,XSSFWorkbook workbookNew,short index) {\n    DataFormat formatOld = workbookOld.createDataFormat();\n    DataFormat formatNew = workbookNew.createDataFormat();\n    return formatNew.getFormat(formatOld.getFormat(index));\n}\n\n\n    private XSSFFont transform(XSSFWorkbook workbookNew,HSSFFont fontOld) {\n        XSSFFont fontNew = workbookNew.createFont();\n        fontNew.setBoldweight(fontOld.getBoldweight());\n        fontNew.setCharSet(fontOld.getCharSet());\n        fontNew.setColor(fontOld.getColor());\n        fontNew.setFontName(fontOld.getFontName());\n        fontNew.setFontHeight(fontOld.getFontHeight());\n        fontNew.setItalic(fontOld.getItalic());\n        fontNew.setStrikeout(fontOld.getStrikeout());\n        fontNew.setTypeOffset(fontOld.getTypeOffset());\n        fontNew.setUnderline(fontOld.getUnderline());\n        return fontNew;\n    }\n\npublic static void main(String[] args) throws Exception{\n    Xls2Xlsx xls=new Xls2Xlsx(); \n    //xls.transform();\n     InputStream isXls = new FileInputStream(\"c:/OTD1.xls\");\n     HSSFWorkbook workbookOld     = new HSSFWorkbook(isXls);\n\n    String dest=\"c:/OTD.xlsx\";\n\n    FileOutputStream out = new FileOutputStream(dest);\n    XSSFWorkbook workbookNew = new XSSFWorkbook();\n    xls.transformHSSF( workbookOld , workbookNew) ;    \n    workbookNew.write(out);\n\n    out.close();\n\n//    InputStream isXls = new FileInputStream(\"c:/OTD1.xls\");\n//    HSSFWorkbook workbookNew     = new HSSFWorkbook(isXls);\n\n\n\n}\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3245347,"reputation":3398,"user_id":3887073,"accept_rate":75,"display_name":"Ben"},"score":0,"creation_date":1510067690,"post_id":31747193,"comment_id":81272142,"body_markdown":"Code does not work. What is `CellRangeAddressWrapper` ?!","body":"Code does not work. What is <code>CellRangeAddressWrapper</code> ?!"},{"owner":{"account_id":2078662,"reputation":2458,"user_id":1851286,"display_name":"Oleksii Kyslytsyn"},"score":0,"creation_date":1510159385,"post_id":31747193,"comment_id":81319317,"body_markdown":"Ben, https://github.com/nextreports/nextreports-engine/blob/master/src/ro/nextreports/engine/exporter/util/CellRangeAddressWrapper.java","body":"Ben, <a href=\"https://github.com/nextreports/nextreports-engine/blob/master/src/ro/nextreports/engine/exporter/util/CellRangeAddressWrapper.java\" rel=\"nofollow noreferrer\">github.com/nextreports/nextreports-engine/blob/master/src/ro&zwnj;&#8203;/&hellip;</a>"}],"tags":[],"owner":{"account_id":2078662,"reputation":2458,"user_id":1851286,"display_name":"Oleksii Kyslytsyn"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1438348765,"creation_date":1438348765,"answer_id":31747193,"question_id":7230819,"body_markdown":"Here is my approach\r\n\r\n    import java.util.ArrayList;\r\n    import java.util.Iterator;\r\n    import java.util.List;\r\n    import java.util.Set;\r\n    import java.util.TreeSet;\r\n    \r\n    import org.apache.poi.hssf.usermodel.HSSFCell;\r\n    import org.apache.poi.hssf.usermodel.HSSFClientAnchor;\r\n    import org.apache.poi.hssf.usermodel.HSSFPatriarch;\r\n    import org.apache.poi.hssf.usermodel.HSSFPicture;\r\n    import org.apache.poi.hssf.usermodel.HSSFPictureData;\r\n    import org.apache.poi.hssf.usermodel.HSSFRow;\r\n    import org.apache.poi.hssf.usermodel.HSSFShape;\r\n    import org.apache.poi.hssf.usermodel.HSSFSheet;\r\n    import org.apache.poi.hssf.usermodel.HSSFWorkbook;\r\n    import org.apache.poi.ss.usermodel.Cell;\r\n    import org.apache.poi.ss.usermodel.CellStyle;\r\n    import org.apache.poi.ss.usermodel.ClientAnchor;\r\n    import org.apache.poi.ss.usermodel.CreationHelper;\r\n    import org.apache.poi.ss.usermodel.DataFormat;\r\n    import org.apache.poi.ss.usermodel.Drawing;\r\n    import org.apache.poi.ss.usermodel.Font;\r\n    import org.apache.poi.ss.usermodel.Footer;\r\n    import org.apache.poi.ss.usermodel.Header;\r\n    import org.apache.poi.ss.usermodel.Name;\r\n    import org.apache.poi.ss.usermodel.PrintSetup;\r\n    import org.apache.poi.ss.usermodel.Sheet;\r\n    import org.apache.poi.ss.util.CellRangeAddress;\r\n    import org.apache.poi.ss.util.CellReference;\r\n    import org.apache.poi.xssf.usermodel.XSSFCell;\r\n    import org.apache.poi.xssf.usermodel.XSSFClientAnchor;\r\n    import org.apache.poi.xssf.usermodel.XSSFDrawing;\r\n    import org.apache.poi.xssf.usermodel.XSSFName;\r\n    import org.apache.poi.xssf.usermodel.XSSFPicture;\r\n    import org.apache.poi.xssf.usermodel.XSSFPictureData;\r\n    import org.apache.poi.xssf.usermodel.XSSFRow;\r\n    import org.apache.poi.xssf.usermodel.XSSFShape;\r\n    import org.apache.poi.xssf.usermodel.XSSFSheet;\r\n    import org.apache.poi.xssf.usermodel.XSSFWorkbook;\r\n    import org.openxmlformats.schemas.drawingml.x2006.spreadsheetDrawing.CTMarker;\r\n    import org.openxmlformats.schemas.drawingml.x2006.spreadsheetDrawing.CTTwoCellAnchor;\r\n    \r\n    public class XlsXlsxConverter3 {\r\n    @SuppressWarnings(&quot;unused&quot;)\r\n    private static class FormulaInfo {\r\n    \r\n    private String sheetName;\r\n    private Integer rowIndex;\r\n    private Integer cellIndex;\r\n    private String formula;\r\n    \r\n    private FormulaInfo(String sheetName, Integer rowIndex, Integer cellIndex, String formula) {\r\n    this.sheetName = sheetName;\r\n    this.rowIndex = rowIndex;\r\n    this.cellIndex = cellIndex;\r\n    this.formula = formula;\r\n    }\r\n    \r\n    public String getSheetName() {\r\n    return sheetName;\r\n    }\r\n    \r\n    public void setSheetName(String sheetName) {\r\n    this.sheetName = sheetName;\r\n    }\r\n    \r\n    public Integer getRowIndex() {\r\n    return rowIndex;\r\n    }\r\n    \r\n    public void setRowIndex(Integer rowIndex) {\r\n    this.rowIndex = rowIndex;\r\n    }\r\n    \r\n    public Integer getCellIndex() {\r\n    return cellIndex;\r\n    }\r\n    \r\n    public void setCellIndex(Integer cellIndex) {\r\n    this.cellIndex = cellIndex;\r\n    }\r\n    \r\n    public String getFormula() {\r\n    return formula;\r\n    }\r\n    \r\n    public void setFormula(String formula) {\r\n    this.formula = formula;\r\n    }\r\n    }\r\n    \r\n    static List&lt;FormulaInfo&gt; formulaInfoList = new ArrayList&lt;FormulaInfo&gt;();\r\n    \r\n    public static void refreshFormula(XSSFWorkbook workbook) {\r\n    for (FormulaInfo formulaInfo : formulaInfoList) {\r\n    workbook.getSheet(formulaInfo.getSheetName()).getRow(formulaInfo.getRowIndex())\r\n    .getCell(formulaInfo.getCellIndex()).setCellFormula(formulaInfo.getFormula());\r\n    }\r\n    formulaInfoList.removeAll(formulaInfoList);\r\n    }\r\n    \r\n    public static XSSFWorkbook convertWorkbookHSSFToXSSF(HSSFWorkbook source) {\r\n    XSSFWorkbook retVal = new XSSFWorkbook();\r\n    \r\n    for (int i = 0; i &lt; source.getNumberOfSheets(); i++) {\r\n    \r\n    HSSFSheet hssfsheet = source.getSheetAt(i);\r\n    XSSFSheet xssfSheet = retVal.createSheet(hssfsheet.getSheetName());\r\n    \r\n    copySheetSettings(xssfSheet, hssfsheet);\r\n    copySheet(hssfsheet, xssfSheet);\r\n    copyPictures(xssfSheet, hssfsheet);\r\n    }\r\n    \r\n    refreshFormula(retVal);\r\n    \r\n    return retVal;\r\n    }\r\n    \r\n    private static void copySheet(HSSFSheet source, XSSFSheet destination) {\r\n    copySheet(source, destination, true);\r\n    }\r\n    \r\n    /**\r\n    * @param destination\r\n    * the sheet to create from the copy.\r\n    * @param the\r\n    * sheet to copy.\r\n    * @param copyStyle\r\n    * true copy the style.\r\n    */\r\n    private static void copySheet(HSSFSheet source, XSSFSheet destination, boolean copyStyle) {\r\n    int maxColumnNum = 0;\r\n    List&lt;CellStyle&gt; styleMap2 = (copyStyle) ? new ArrayList&lt;CellStyle&gt;() : null;\r\n    for (int i = source.getFirstRowNum(); i &lt;= source.getLastRowNum(); i++) {\r\n    HSSFRow srcRow = source.getRow(i);\r\n    XSSFRow destRow = destination.createRow(i);\r\n    if (srcRow != null) {\r\n    // copyRow(source, destination, srcRow, destRow, styleMap);\r\n    copyRow(source, destination, srcRow, destRow, styleMap2);\r\n    if (srcRow.getLastCellNum() &gt; maxColumnNum) {\r\n    maxColumnNum = srcRow.getLastCellNum();\r\n    }\r\n    }\r\n    }\r\n    for (int i = 0; i &lt;= maxColumnNum; i++) {\r\n    destination.setColumnWidth(i, source.getColumnWidth(i));\r\n    }\r\n    }\r\n    \r\n    /**\r\n    * @param srcSheet\r\n    * the sheet to copy.\r\n    * @param destSheet\r\n    * the sheet to create.\r\n    * @param srcRow\r\n    * the row to copy.\r\n    * @param destRow\r\n    * the row to create.\r\n    * @param styleMap\r\n    * -\r\n    */\r\n    private static void copyRow(HSSFSheet srcSheet, XSSFSheet destSheet, HSSFRow srcRow, XSSFRow destRow,\r\n    // Map&lt;Integer, HSSFCellStyle&gt; styleMap) {\r\n    List&lt;CellStyle&gt; styleMap) {\r\n    // manage a list of merged zone in order to not insert two times a\r\n    // merged zone\r\n    Set&lt;CellRangeAddressWrapper&gt; mergedRegions = new TreeSet&lt;CellRangeAddressWrapper&gt;();\r\n    destRow.setHeight(srcRow.getHeight());\r\n    // pour chaque row\r\n    // for (int j = srcRow.getFirstCellNum(); j &lt;= srcRow.getLastCellNum();\r\n    // j++) {\r\n    int j = srcRow.getFirstCellNum();\r\n    if (j &lt; 0) {\r\n    j = 0;\r\n    }\r\n    for (; j &lt;= srcRow.getLastCellNum(); j++) {\r\n    HSSFCell oldCell = srcRow.getCell(j); // ancienne cell\r\n    XSSFCell newCell = destRow.getCell(j); // new cell\r\n    if (oldCell != null) {\r\n    if (newCell == null) {\r\n    newCell = destRow.createCell(j);\r\n    }\r\n    // copy chaque cell\r\n    copyCell(oldCell, newCell, styleMap);\r\n    // copy les informations de fusion entre les cellules\r\n    // System.out.println(&quot;row num: &quot; + srcRow.getRowNum() +\r\n    // &quot; , col: &quot; + (short)oldCell.getColumnIndex());\r\n    CellRangeAddress mergedRegion = getMergedRegion(srcSheet, srcRow.getRowNum(),\r\n    (short) oldCell.getColumnIndex());\r\n    \r\n    if (mergedRegion != null) {\r\n    // System.out.println(&quot;Selected merged region: &quot; +\r\n    // mergedRegion.toString());\r\n    CellRangeAddress newMergedRegion = new CellRangeAddress(mergedRegion.getFirstRow(),\r\n    mergedRegion.getLastRow(), mergedRegion.getFirstColumn(), mergedRegion.getLastColumn());\r\n    // System.out.println(&quot;New merged region: &quot; +\r\n    // newMergedRegion.toString());\r\n    CellRangeAddressWrapper wrapper = new CellRangeAddressWrapper(newMergedRegion);\r\n    if (isNewMergedRegion(wrapper, mergedRegions)) {\r\n    mergedRegions.add(wrapper);\r\n    destSheet.addMergedRegion(wrapper.range);\r\n    }\r\n    }\r\n    }\r\n    }\r\n    \r\n    }\r\n    \r\n    /**\r\n    * R&#233;cup&#232;re les informations de fusion des cellules dans la sheet source\r\n    * pour les appliquer &#224; la sheet destination... R&#233;cup&#232;re toutes les zones\r\n    * merged dans la sheet source et regarde pour chacune d&#39;elle si elle se\r\n    * trouve dans la current row que nous traitons. Si oui, retourne l&#39;objet\r\n    * CellRangeAddress.\r\n    *\r\n    * @param sheet\r\n    * the sheet containing the data.\r\n    * @param rowNum\r\n    * the num of the row to copy.\r\n    * @param cellNum\r\n    * the num of the cell to copy.\r\n    * @return the CellRangeAddress created.\r\n    */\r\n    public static CellRangeAddress getMergedRegion(HSSFSheet sheet, int rowNum, short cellNum) {\r\n    for (int i = 0; i &lt; sheet.getNumMergedRegions(); i++) {\r\n    CellRangeAddress merged = sheet.getMergedRegion(i);\r\n    if (merged.isInRange(rowNum, cellNum)) {\r\n    return merged;\r\n    }\r\n    }\r\n    return null;\r\n    }\r\n    \r\n    /**\r\n    * Check that the merged region has been created in the destination sheet.\r\n    *\r\n    * @param newMergedRegion\r\n    * the merged region to copy or not in the destination sheet.\r\n    * @param mergedRegions\r\n    * the list containing all the merged region.\r\n    * @return true if the merged region is already in the list or not.\r\n    */\r\n    private static boolean isNewMergedRegion(CellRangeAddressWrapper newMergedRegion,\r\n    Set&lt;CellRangeAddressWrapper&gt; mergedRegions) {\r\n    return !mergedRegions.contains(newMergedRegion);\r\n    }\r\n    \r\n    private static void copyPictures(Sheet newSheet, Sheet sheet) {\r\n    Drawing drawingOld = sheet.createDrawingPatriarch();\r\n    Drawing drawingNew = newSheet.createDrawingPatriarch();\r\n    CreationHelper helper = newSheet.getWorkbook().getCreationHelper();\r\n    \r\n    // if (drawingNew instanceof HSSFPatriarch) {\r\n    if (drawingOld instanceof HSSFPatriarch) {\r\n    List&lt;HSSFShape&gt; shapes = ((HSSFPatriarch) drawingOld).getChildren();\r\n    for (int i = 0; i &lt; shapes.size(); i++) {\r\n    System.out.println(shapes.size());\r\n    if (shapes.get(i) instanceof HSSFPicture) {\r\n    HSSFPicture pic = (HSSFPicture) shapes.get(i);\r\n    HSSFPictureData picdata = pic.getPictureData();\r\n    int pictureIndex = newSheet.getWorkbook().addPicture(picdata.getData(), picdata.getFormat());\r\n    ClientAnchor anchor = null;\r\n    if (pic.getAnchor() != null) {\r\n    anchor = helper.createClientAnchor();\r\n    anchor.setDx1(((HSSFClientAnchor) pic.getAnchor()).getDx1());\r\n    anchor.setDx2(((HSSFClientAnchor) pic.getAnchor()).getDx2());\r\n    anchor.setDy1(((HSSFClientAnchor) pic.getAnchor()).getDy1());\r\n    anchor.setDy2(((HSSFClientAnchor) pic.getAnchor()).getDy2());\r\n    anchor.setCol1(((HSSFClientAnchor) pic.getAnchor()).getCol1());\r\n    anchor.setCol2(((HSSFClientAnchor) pic.getAnchor()).getCol2());\r\n    anchor.setRow1(((HSSFClientAnchor) pic.getAnchor()).getRow1());\r\n    anchor.setRow2(((HSSFClientAnchor) pic.getAnchor()).getRow2());\r\n    anchor.setAnchorType(((HSSFClientAnchor) pic.getAnchor()).getAnchorType());\r\n    }\r\n    drawingNew.createPicture(anchor, pictureIndex);\r\n    }\r\n    }\r\n    } else {\r\n    if (drawingNew instanceof XSSFDrawing) {\r\n    List&lt;XSSFShape&gt; shapes = ((XSSFDrawing) drawingOld).getShapes();\r\n    for (int i = 0; i &lt; shapes.size(); i++) {\r\n    if (shapes.get(i) instanceof XSSFPicture) {\r\n    XSSFPicture pic = (XSSFPicture) shapes.get(i);\r\n    XSSFPictureData picdata = pic.getPictureData();\r\n    int pictureIndex = newSheet.getWorkbook().addPicture(picdata.getData(),\r\n    picdata.getPictureType());\r\n    XSSFClientAnchor anchor = null;\r\n    CTTwoCellAnchor oldAnchor = ((XSSFDrawing) drawingOld).getCTDrawing().getTwoCellAnchorArray(i);\r\n    if (oldAnchor != null) {\r\n    anchor = (XSSFClientAnchor) helper.createClientAnchor();\r\n    CTMarker markerFrom = oldAnchor.getFrom();\r\n    CTMarker markerTo = oldAnchor.getTo();\r\n    anchor.setDx1((int) markerFrom.getColOff());\r\n    anchor.setDx2((int) markerTo.getColOff());\r\n    anchor.setDy1((int) markerFrom.getRowOff());\r\n    anchor.setDy2((int) markerTo.getRowOff());\r\n    anchor.setCol1(markerFrom.getCol());\r\n    anchor.setCol2(markerTo.getCol());\r\n    anchor.setRow1(markerFrom.getRow());\r\n    anchor.setRow2(markerTo.getRow());\r\n    }\r\n    drawingNew.createPicture(anchor, pictureIndex);\r\n    }\r\n    }\r\n    }\r\n    }\r\n    }\r\n    \r\n    private static void copyCell(Cell oldCell, Cell newCell, List&lt;CellStyle&gt; styleList) {\r\n    if (styleList != null) {\r\n    if (oldCell.getSheet().getWorkbook() == newCell.getSheet().getWorkbook()) {\r\n    newCell.setCellStyle(oldCell.getCellStyle());\r\n    } else {\r\n    DataFormat newDataFormat = newCell.getSheet().getWorkbook().createDataFormat();\r\n    \r\n    CellStyle newCellStyle = getSameCellStyle(oldCell, newCell, styleList);\r\n    if (newCellStyle == null) {\r\n    // Create a new cell style\r\n    Font oldFont = oldCell.getSheet().getWorkbook().getFontAt(oldCell.getCellStyle().getFontIndex());\r\n    // Find a existing font corresponding to avoid to create a\r\n    // new one\r\n    Font newFont = newCell\r\n    .getSheet()\r\n    .getWorkbook()\r\n    .findFont(oldFont.getBoldweight(), oldFont.getColor(), oldFont.getFontHeight(),\r\n    oldFont.getFontName(), oldFont.getItalic(), oldFont.getStrikeout(),\r\n    oldFont.getTypeOffset(), oldFont.getUnderline());\r\n    if (newFont == null) {\r\n    newFont = newCell.getSheet().getWorkbook().createFont();\r\n    newFont.setBoldweight(oldFont.getBoldweight());\r\n    newFont.setColor(oldFont.getColor());\r\n    newFont.setFontHeight(oldFont.getFontHeight());\r\n    newFont.setFontName(oldFont.getFontName());\r\n    newFont.setItalic(oldFont.getItalic());\r\n    newFont.setStrikeout(oldFont.getStrikeout());\r\n    newFont.setTypeOffset(oldFont.getTypeOffset());\r\n    newFont.setUnderline(oldFont.getUnderline());\r\n    newFont.setCharSet(oldFont.getCharSet());\r\n    }\r\n    \r\n    short newFormat = newDataFormat.getFormat(oldCell.getCellStyle().getDataFormatString());\r\n    newCellStyle = newCell.getSheet().getWorkbook().createCellStyle();\r\n    newCellStyle.setFont(newFont);\r\n    newCellStyle.setDataFormat(newFormat);\r\n    \r\n    newCellStyle.setAlignment(oldCell.getCellStyle().getAlignment());\r\n    newCellStyle.setHidden(oldCell.getCellStyle().getHidden());\r\n    newCellStyle.setLocked(oldCell.getCellStyle().getLocked());\r\n    newCellStyle.setWrapText(oldCell.getCellStyle().getWrapText());\r\n    newCellStyle.setBorderBottom(oldCell.getCellStyle().getBorderBottom());\r\n    newCellStyle.setBorderLeft(oldCell.getCellStyle().getBorderLeft());\r\n    newCellStyle.setBorderRight(oldCell.getCellStyle().getBorderRight());\r\n    newCellStyle.setBorderTop(oldCell.getCellStyle().getBorderTop());\r\n    newCellStyle.setBottomBorderColor(oldCell.getCellStyle().getBottomBorderColor());\r\n    newCellStyle.setFillBackgroundColor(oldCell.getCellStyle().getFillBackgroundColor());\r\n    newCellStyle.setFillForegroundColor(oldCell.getCellStyle().getFillForegroundColor());\r\n    newCellStyle.setFillPattern(oldCell.getCellStyle().getFillPattern());\r\n    newCellStyle.setIndention(oldCell.getCellStyle().getIndention());\r\n    newCellStyle.setLeftBorderColor(oldCell.getCellStyle().getLeftBorderColor());\r\n    newCellStyle.setRightBorderColor(oldCell.getCellStyle().getRightBorderColor());\r\n    newCellStyle.setRotation(oldCell.getCellStyle().getRotation());\r\n    newCellStyle.setTopBorderColor(oldCell.getCellStyle().getTopBorderColor());\r\n    newCellStyle.setVerticalAlignment(oldCell.getCellStyle().getVerticalAlignment());\r\n    \r\n    styleList.add(newCellStyle);\r\n    }\r\n    newCell.setCellStyle(newCellStyle);\r\n    }\r\n    }\r\n    switch (oldCell.getCellType()) {\r\n    case Cell.CELL_TYPE_STRING:\r\n    newCell.setCellValue(oldCell.getStringCellValue());\r\n    break;\r\n    case Cell.CELL_TYPE_NUMERIC:\r\n    newCell.setCellValue(oldCell.getNumericCellValue());\r\n    break;\r\n    case Cell.CELL_TYPE_BLANK:\r\n    newCell.setCellType(Cell.CELL_TYPE_BLANK);\r\n    break;\r\n    case Cell.CELL_TYPE_BOOLEAN:\r\n    newCell.setCellValue(oldCell.getBooleanCellValue());\r\n    break;\r\n    case Cell.CELL_TYPE_ERROR:\r\n    newCell.setCellErrorValue(oldCell.getErrorCellValue());\r\n    break;\r\n    case Cell.CELL_TYPE_FORMULA:\r\n    newCell.setCellFormula(oldCell.getCellFormula());\r\n    formulaInfoList.add(new FormulaInfo(oldCell.getSheet().getSheetName(), oldCell.getRowIndex(), oldCell\r\n    .getColumnIndex(), oldCell.getCellFormula()));\r\n    break;\r\n    default:\r\n    break;\r\n    }\r\n    }\r\n    \r\n    private static CellStyle getSameCellStyle(Cell oldCell, Cell newCell, List&lt;CellStyle&gt; styleList) {\r\n    CellStyle styleToFind = oldCell.getCellStyle();\r\n    CellStyle currentCellStyle = null;\r\n    CellStyle returnCellStyle = null;\r\n    Iterator&lt;CellStyle&gt; iterator = styleList.iterator();\r\n    Font oldFont = null;\r\n    Font newFont = null;\r\n    while (iterator.hasNext() &amp;&amp; returnCellStyle == null) {\r\n    currentCellStyle = iterator.next();\r\n    \r\n    if (currentCellStyle.getAlignment() != styleToFind.getAlignment()) {\r\n    continue;\r\n    }\r\n    if (currentCellStyle.getHidden() != styleToFind.getHidden()) {\r\n    continue;\r\n    }\r\n    if (currentCellStyle.getLocked() != styleToFind.getLocked()) {\r\n    continue;\r\n    }\r\n    if (currentCellStyle.getWrapText() != styleToFind.getWrapText()) {\r\n    continue;\r\n    }\r\n    if (currentCellStyle.getBorderBottom() != styleToFind.getBorderBottom()) {\r\n    continue;\r\n    }\r\n    if (currentCellStyle.getBorderLeft() != styleToFind.getBorderLeft()) {\r\n    continue;\r\n    }\r\n    if (currentCellStyle.getBorderRight() != styleToFind.getBorderRight()) {\r\n    continue;\r\n    }\r\n    if (currentCellStyle.getBorderTop() != styleToFind.getBorderTop()) {\r\n    continue;\r\n    }\r\n    if (currentCellStyle.getBottomBorderColor() != styleToFind.getBottomBorderColor()) {\r\n    continue;\r\n    }\r\n    if (currentCellStyle.getFillBackgroundColor() != styleToFind.getFillBackgroundColor()) {\r\n    continue;\r\n    }\r\n    if (currentCellStyle.getFillForegroundColor() != styleToFind.getFillForegroundColor()) {\r\n    continue;\r\n    }\r\n    if (currentCellStyle.getFillPattern() != styleToFind.getFillPattern()) {\r\n    continue;\r\n    }\r\n    if (currentCellStyle.getIndention() != styleToFind.getIndention()) {\r\n    continue;\r\n    }\r\n    if (currentCellStyle.getLeftBorderColor() != styleToFind.getLeftBorderColor()) {\r\n    continue;\r\n    }\r\n    if (currentCellStyle.getRightBorderColor() != styleToFind.getRightBorderColor()) {\r\n    continue;\r\n    }\r\n    if (currentCellStyle.getRotation() != styleToFind.getRotation()) {\r\n    continue;\r\n    }\r\n    if (currentCellStyle.getTopBorderColor() != styleToFind.getTopBorderColor()) {\r\n    continue;\r\n    }\r\n    if (currentCellStyle.getVerticalAlignment() != styleToFind.getVerticalAlignment()) {\r\n    continue;\r\n    }\r\n    \r\n    oldFont = oldCell.getSheet().getWorkbook().getFontAt(oldCell.getCellStyle().getFontIndex());\r\n    newFont = newCell.getSheet().getWorkbook().getFontAt(currentCellStyle.getFontIndex());\r\n    \r\n    if (newFont.getBoldweight() == oldFont.getBoldweight()) {\r\n    continue;\r\n    }\r\n    if (newFont.getColor() == oldFont.getColor()) {\r\n    continue;\r\n    }\r\n    if (newFont.getFontHeight() == oldFont.getFontHeight()) {\r\n    continue;\r\n    }\r\n    if (newFont.getFontName() == oldFont.getFontName()) {\r\n    continue;\r\n    }\r\n    if (newFont.getItalic() == oldFont.getItalic()) {\r\n    continue;\r\n    }\r\n    if (newFont.getStrikeout() == oldFont.getStrikeout()) {\r\n    continue;\r\n    }\r\n    if (newFont.getTypeOffset() == oldFont.getTypeOffset()) {\r\n    continue;\r\n    }\r\n    if (newFont.getUnderline() == oldFont.getUnderline()) {\r\n    continue;\r\n    }\r\n    if (newFont.getCharSet() == oldFont.getCharSet()) {\r\n    continue;\r\n    }\r\n    if (oldCell.getCellStyle().getDataFormatString().equals(currentCellStyle.getDataFormatString())) {\r\n    continue;\r\n    }\r\n    \r\n    returnCellStyle = currentCellStyle;\r\n    }\r\n    return returnCellStyle;\r\n    }\r\n    \r\n    private static void copySheetSettings(Sheet newSheet, Sheet sheetToCopy) {\r\n    \r\n    newSheet.setAutobreaks(sheetToCopy.getAutobreaks());\r\n    newSheet.setDefaultColumnWidth(sheetToCopy.getDefaultColumnWidth());\r\n    newSheet.setDefaultRowHeight(sheetToCopy.getDefaultRowHeight());\r\n    newSheet.setDefaultRowHeightInPoints(sheetToCopy.getDefaultRowHeightInPoints());\r\n    newSheet.setDisplayGuts(sheetToCopy.getDisplayGuts());\r\n    newSheet.setFitToPage(sheetToCopy.getFitToPage());\r\n    \r\n    newSheet.setForceFormulaRecalculation(sheetToCopy.getForceFormulaRecalculation());\r\n    \r\n    PrintSetup sheetToCopyPrintSetup = sheetToCopy.getPrintSetup();\r\n    PrintSetup newSheetPrintSetup = newSheet.getPrintSetup();\r\n    \r\n    newSheetPrintSetup.setPaperSize(sheetToCopyPrintSetup.getPaperSize());\r\n    newSheetPrintSetup.setScale(sheetToCopyPrintSetup.getScale());\r\n    newSheetPrintSetup.setPageStart(sheetToCopyPrintSetup.getPageStart());\r\n    newSheetPrintSetup.setFitWidth(sheetToCopyPrintSetup.getFitWidth());\r\n    newSheetPrintSetup.setFitHeight(sheetToCopyPrintSetup.getFitHeight());\r\n    newSheetPrintSetup.setLeftToRight(sheetToCopyPrintSetup.getLeftToRight());\r\n    newSheetPrintSetup.setLandscape(sheetToCopyPrintSetup.getLandscape());\r\n    newSheetPrintSetup.setValidSettings(sheetToCopyPrintSetup.getValidSettings());\r\n    newSheetPrintSetup.setNoColor(sheetToCopyPrintSetup.getNoColor());\r\n    newSheetPrintSetup.setDraft(sheetToCopyPrintSetup.getDraft());\r\n    newSheetPrintSetup.setNotes(sheetToCopyPrintSetup.getNotes());\r\n    newSheetPrintSetup.setNoOrientation(sheetToCopyPrintSetup.getNoOrientation());\r\n    newSheetPrintSetup.setUsePage(sheetToCopyPrintSetup.getUsePage());\r\n    newSheetPrintSetup.setHResolution(sheetToCopyPrintSetup.getHResolution());\r\n    newSheetPrintSetup.setVResolution(sheetToCopyPrintSetup.getVResolution());\r\n    newSheetPrintSetup.setHeaderMargin(sheetToCopyPrintSetup.getHeaderMargin());\r\n    newSheetPrintSetup.setFooterMargin(sheetToCopyPrintSetup.getFooterMargin());\r\n    newSheetPrintSetup.setCopies(sheetToCopyPrintSetup.getCopies());\r\n    \r\n    Header sheetToCopyHeader = sheetToCopy.getHeader();\r\n    Header newSheetHeader = newSheet.getHeader();\r\n    newSheetHeader.setCenter(sheetToCopyHeader.getCenter());\r\n    newSheetHeader.setLeft(sheetToCopyHeader.getLeft());\r\n    newSheetHeader.setRight(sheetToCopyHeader.getRight());\r\n    \r\n    Footer sheetToCopyFooter = sheetToCopy.getFooter();\r\n    Footer newSheetFooter = newSheet.getFooter();\r\n    newSheetFooter.setCenter(sheetToCopyFooter.getCenter());\r\n    newSheetFooter.setLeft(sheetToCopyFooter.getLeft());\r\n    newSheetFooter.setRight(sheetToCopyFooter.getRight());\r\n    \r\n    newSheet.setHorizontallyCenter(sheetToCopy.getHorizontallyCenter());\r\n    newSheet.setMargin(Sheet.LeftMargin, sheetToCopy.getMargin(Sheet.LeftMargin));\r\n    newSheet.setMargin(Sheet.RightMargin, sheetToCopy.getMargin(Sheet.RightMargin));\r\n    newSheet.setMargin(Sheet.TopMargin, sheetToCopy.getMargin(Sheet.TopMargin));\r\n    newSheet.setMargin(Sheet.BottomMargin, sheetToCopy.getMargin(Sheet.BottomMargin));\r\n    \r\n    newSheet.setPrintGridlines(sheetToCopy.isPrintGridlines());\r\n    newSheet.setRowSumsBelow(sheetToCopy.getRowSumsBelow());\r\n    newSheet.setRowSumsRight(sheetToCopy.getRowSumsRight());\r\n    newSheet.setVerticallyCenter(sheetToCopy.getVerticallyCenter());\r\n    newSheet.setDisplayFormulas(sheetToCopy.isDisplayFormulas());\r\n    newSheet.setDisplayGridlines(sheetToCopy.isDisplayGridlines());\r\n    newSheet.setDisplayRowColHeadings(sheetToCopy.isDisplayRowColHeadings());\r\n    newSheet.setDisplayZeros(sheetToCopy.isDisplayZeros());\r\n    newSheet.setPrintGridlines(sheetToCopy.isPrintGridlines());\r\n    newSheet.setRightToLeft(sheetToCopy.isRightToLeft());\r\n    newSheet.setZoom(1, 1);\r\n    copyPrintTitle(newSheet, sheetToCopy);\r\n    }\r\n    \r\n    private static void copyPrintTitle(Sheet newSheet, Sheet sheetToCopy) {\r\n    int nbNames = sheetToCopy.getWorkbook().getNumberOfNames();\r\n    Name name = null;\r\n    String formula = null;\r\n    \r\n    String part1S = null;\r\n    String part2S = null;\r\n    String formS = null;\r\n    String formF = null;\r\n    String part1F = null;\r\n    String part2F = null;\r\n    int rowB = -1;\r\n    int rowE = -1;\r\n    int colB = -1;\r\n    int colE = -1;\r\n    \r\n    for (int i = 0; i &lt; nbNames; i++) {\r\n    name = sheetToCopy.getWorkbook().getNameAt(i);\r\n    if (name.getSheetIndex() == sheetToCopy.getWorkbook().getSheetIndex(sheetToCopy)) {\r\n    if (name.getNameName().equals(&quot;Print_Titles&quot;)\r\n    || name.getNameName().equals(XSSFName.BUILTIN_PRINT_TITLE)) {\r\n    formula = name.getRefersToFormula();\r\n    int indexComma = formula.indexOf(&quot;,&quot;);\r\n    if (indexComma == -1) {\r\n    indexComma = formula.indexOf(&quot;;&quot;);\r\n    }\r\n    String firstPart = null;\r\n    ;\r\n    String secondPart = null;\r\n    if (indexComma == -1) {\r\n    firstPart = formula;\r\n    } else {\r\n    firstPart = formula.substring(0, indexComma);\r\n    secondPart = formula.substring(indexComma + 1);\r\n    }\r\n    \r\n    formF = firstPart.substring(firstPart.indexOf(&quot;!&quot;) + 1);\r\n    part1F = formF.substring(0, formF.indexOf(&quot;:&quot;));\r\n    part2F = formF.substring(formF.indexOf(&quot;:&quot;) + 1);\r\n    \r\n    if (secondPart != null) {\r\n    formS = secondPart.substring(secondPart.indexOf(&quot;!&quot;) + 1);\r\n    part1S = formS.substring(0, formS.indexOf(&quot;:&quot;));\r\n    part2S = formS.substring(formS.indexOf(&quot;:&quot;) + 1);\r\n    }\r\n    \r\n    rowB = -1;\r\n    rowE = -1;\r\n    colB = -1;\r\n    colE = -1;\r\n    String rowBs, rowEs, colBs, colEs;\r\n    if (part1F.lastIndexOf(&quot;$&quot;) != part1F.indexOf(&quot;$&quot;)) {\r\n    rowBs = part1F.substring(part1F.lastIndexOf(&quot;$&quot;) + 1, part1F.length());\r\n    rowEs = part2F.substring(part2F.lastIndexOf(&quot;$&quot;) + 1, part2F.length());\r\n    rowB = Integer.parseInt(rowBs);\r\n    rowE = Integer.parseInt(rowEs);\r\n    if (secondPart != null) {\r\n    colBs = part1S.substring(part1S.lastIndexOf(&quot;$&quot;) + 1, part1S.length());\r\n    colEs = part2S.substring(part2S.lastIndexOf(&quot;$&quot;) + 1, part2S.length());\r\n    colB = CellReference.convertColStringToIndex(colBs);// CExportExcelHelperPoi.convertColumnLetterToInt(colBs);\r\n    colE = CellReference.convertColStringToIndex(colEs);// CExportExcelHelperPoi.convertColumnLetterToInt(colEs);\r\n    }\r\n    } else {\r\n    colBs = part1F.substring(part1F.lastIndexOf(&quot;$&quot;) + 1, part1F.length());\r\n    colEs = part2F.substring(part2F.lastIndexOf(&quot;$&quot;) + 1, part2F.length());\r\n    colB = CellReference.convertColStringToIndex(colBs);// CExportExcelHelperPoi.convertColumnLetterToInt(colBs);\r\n    colE = CellReference.convertColStringToIndex(colEs);// CExportExcelHelperPoi.convertColumnLetterToInt(colEs);\r\n    \r\n    if (secondPart != null) {\r\n    rowBs = part1S.substring(part1S.lastIndexOf(&quot;$&quot;) + 1, part1S.length());\r\n    rowEs = part2S.substring(part2S.lastIndexOf(&quot;$&quot;) + 1, part2S.length());\r\n    rowB = Integer.parseInt(rowBs);\r\n    rowE = Integer.parseInt(rowEs);\r\n    }\r\n    }\r\n    \r\n    newSheet.getWorkbook().setRepeatingRowsAndColumns(newSheet.getWorkbook().getSheetIndex(newSheet),\r\n    colB, colE, rowB - 1, rowE - 1);\r\n    }\r\n    }\r\n    }\r\n    }\r\n    } ","title":"How to convert HSSFWorkbook to XSSFWorkbook using Apache POI?","body":"<p>Here is my approach</p>\n\n<pre><code>import java.util.ArrayList;\nimport java.util.Iterator;\nimport java.util.List;\nimport java.util.Set;\nimport java.util.TreeSet;\n\nimport org.apache.poi.hssf.usermodel.HSSFCell;\nimport org.apache.poi.hssf.usermodel.HSSFClientAnchor;\nimport org.apache.poi.hssf.usermodel.HSSFPatriarch;\nimport org.apache.poi.hssf.usermodel.HSSFPicture;\nimport org.apache.poi.hssf.usermodel.HSSFPictureData;\nimport org.apache.poi.hssf.usermodel.HSSFRow;\nimport org.apache.poi.hssf.usermodel.HSSFShape;\nimport org.apache.poi.hssf.usermodel.HSSFSheet;\nimport org.apache.poi.hssf.usermodel.HSSFWorkbook;\nimport org.apache.poi.ss.usermodel.Cell;\nimport org.apache.poi.ss.usermodel.CellStyle;\nimport org.apache.poi.ss.usermodel.ClientAnchor;\nimport org.apache.poi.ss.usermodel.CreationHelper;\nimport org.apache.poi.ss.usermodel.DataFormat;\nimport org.apache.poi.ss.usermodel.Drawing;\nimport org.apache.poi.ss.usermodel.Font;\nimport org.apache.poi.ss.usermodel.Footer;\nimport org.apache.poi.ss.usermodel.Header;\nimport org.apache.poi.ss.usermodel.Name;\nimport org.apache.poi.ss.usermodel.PrintSetup;\nimport org.apache.poi.ss.usermodel.Sheet;\nimport org.apache.poi.ss.util.CellRangeAddress;\nimport org.apache.poi.ss.util.CellReference;\nimport org.apache.poi.xssf.usermodel.XSSFCell;\nimport org.apache.poi.xssf.usermodel.XSSFClientAnchor;\nimport org.apache.poi.xssf.usermodel.XSSFDrawing;\nimport org.apache.poi.xssf.usermodel.XSSFName;\nimport org.apache.poi.xssf.usermodel.XSSFPicture;\nimport org.apache.poi.xssf.usermodel.XSSFPictureData;\nimport org.apache.poi.xssf.usermodel.XSSFRow;\nimport org.apache.poi.xssf.usermodel.XSSFShape;\nimport org.apache.poi.xssf.usermodel.XSSFSheet;\nimport org.apache.poi.xssf.usermodel.XSSFWorkbook;\nimport org.openxmlformats.schemas.drawingml.x2006.spreadsheetDrawing.CTMarker;\nimport org.openxmlformats.schemas.drawingml.x2006.spreadsheetDrawing.CTTwoCellAnchor;\n\npublic class XlsXlsxConverter3 {\n@SuppressWarnings(\"unused\")\nprivate static class FormulaInfo {\n\nprivate String sheetName;\nprivate Integer rowIndex;\nprivate Integer cellIndex;\nprivate String formula;\n\nprivate FormulaInfo(String sheetName, Integer rowIndex, Integer cellIndex, String formula) {\nthis.sheetName = sheetName;\nthis.rowIndex = rowIndex;\nthis.cellIndex = cellIndex;\nthis.formula = formula;\n}\n\npublic String getSheetName() {\nreturn sheetName;\n}\n\npublic void setSheetName(String sheetName) {\nthis.sheetName = sheetName;\n}\n\npublic Integer getRowIndex() {\nreturn rowIndex;\n}\n\npublic void setRowIndex(Integer rowIndex) {\nthis.rowIndex = rowIndex;\n}\n\npublic Integer getCellIndex() {\nreturn cellIndex;\n}\n\npublic void setCellIndex(Integer cellIndex) {\nthis.cellIndex = cellIndex;\n}\n\npublic String getFormula() {\nreturn formula;\n}\n\npublic void setFormula(String formula) {\nthis.formula = formula;\n}\n}\n\nstatic List&lt;FormulaInfo&gt; formulaInfoList = new ArrayList&lt;FormulaInfo&gt;();\n\npublic static void refreshFormula(XSSFWorkbook workbook) {\nfor (FormulaInfo formulaInfo : formulaInfoList) {\nworkbook.getSheet(formulaInfo.getSheetName()).getRow(formulaInfo.getRowIndex())\n.getCell(formulaInfo.getCellIndex()).setCellFormula(formulaInfo.getFormula());\n}\nformulaInfoList.removeAll(formulaInfoList);\n}\n\npublic static XSSFWorkbook convertWorkbookHSSFToXSSF(HSSFWorkbook source) {\nXSSFWorkbook retVal = new XSSFWorkbook();\n\nfor (int i = 0; i &lt; source.getNumberOfSheets(); i++) {\n\nHSSFSheet hssfsheet = source.getSheetAt(i);\nXSSFSheet xssfSheet = retVal.createSheet(hssfsheet.getSheetName());\n\ncopySheetSettings(xssfSheet, hssfsheet);\ncopySheet(hssfsheet, xssfSheet);\ncopyPictures(xssfSheet, hssfsheet);\n}\n\nrefreshFormula(retVal);\n\nreturn retVal;\n}\n\nprivate static void copySheet(HSSFSheet source, XSSFSheet destination) {\ncopySheet(source, destination, true);\n}\n\n/**\n* @param destination\n* the sheet to create from the copy.\n* @param the\n* sheet to copy.\n* @param copyStyle\n* true copy the style.\n*/\nprivate static void copySheet(HSSFSheet source, XSSFSheet destination, boolean copyStyle) {\nint maxColumnNum = 0;\nList&lt;CellStyle&gt; styleMap2 = (copyStyle) ? new ArrayList&lt;CellStyle&gt;() : null;\nfor (int i = source.getFirstRowNum(); i &lt;= source.getLastRowNum(); i++) {\nHSSFRow srcRow = source.getRow(i);\nXSSFRow destRow = destination.createRow(i);\nif (srcRow != null) {\n// copyRow(source, destination, srcRow, destRow, styleMap);\ncopyRow(source, destination, srcRow, destRow, styleMap2);\nif (srcRow.getLastCellNum() &gt; maxColumnNum) {\nmaxColumnNum = srcRow.getLastCellNum();\n}\n}\n}\nfor (int i = 0; i &lt;= maxColumnNum; i++) {\ndestination.setColumnWidth(i, source.getColumnWidth(i));\n}\n}\n\n/**\n* @param srcSheet\n* the sheet to copy.\n* @param destSheet\n* the sheet to create.\n* @param srcRow\n* the row to copy.\n* @param destRow\n* the row to create.\n* @param styleMap\n* -\n*/\nprivate static void copyRow(HSSFSheet srcSheet, XSSFSheet destSheet, HSSFRow srcRow, XSSFRow destRow,\n// Map&lt;Integer, HSSFCellStyle&gt; styleMap) {\nList&lt;CellStyle&gt; styleMap) {\n// manage a list of merged zone in order to not insert two times a\n// merged zone\nSet&lt;CellRangeAddressWrapper&gt; mergedRegions = new TreeSet&lt;CellRangeAddressWrapper&gt;();\ndestRow.setHeight(srcRow.getHeight());\n// pour chaque row\n// for (int j = srcRow.getFirstCellNum(); j &lt;= srcRow.getLastCellNum();\n// j++) {\nint j = srcRow.getFirstCellNum();\nif (j &lt; 0) {\nj = 0;\n}\nfor (; j &lt;= srcRow.getLastCellNum(); j++) {\nHSSFCell oldCell = srcRow.getCell(j); // ancienne cell\nXSSFCell newCell = destRow.getCell(j); // new cell\nif (oldCell != null) {\nif (newCell == null) {\nnewCell = destRow.createCell(j);\n}\n// copy chaque cell\ncopyCell(oldCell, newCell, styleMap);\n// copy les informations de fusion entre les cellules\n// System.out.println(\"row num: \" + srcRow.getRowNum() +\n// \" , col: \" + (short)oldCell.getColumnIndex());\nCellRangeAddress mergedRegion = getMergedRegion(srcSheet, srcRow.getRowNum(),\n(short) oldCell.getColumnIndex());\n\nif (mergedRegion != null) {\n// System.out.println(\"Selected merged region: \" +\n// mergedRegion.toString());\nCellRangeAddress newMergedRegion = new CellRangeAddress(mergedRegion.getFirstRow(),\nmergedRegion.getLastRow(), mergedRegion.getFirstColumn(), mergedRegion.getLastColumn());\n// System.out.println(\"New merged region: \" +\n// newMergedRegion.toString());\nCellRangeAddressWrapper wrapper = new CellRangeAddressWrapper(newMergedRegion);\nif (isNewMergedRegion(wrapper, mergedRegions)) {\nmergedRegions.add(wrapper);\ndestSheet.addMergedRegion(wrapper.range);\n}\n}\n}\n}\n\n}\n\n/**\n* Récupère les informations de fusion des cellules dans la sheet source\n* pour les appliquer à la sheet destination... Récupère toutes les zones\n* merged dans la sheet source et regarde pour chacune d'elle si elle se\n* trouve dans la current row que nous traitons. Si oui, retourne l'objet\n* CellRangeAddress.\n*\n* @param sheet\n* the sheet containing the data.\n* @param rowNum\n* the num of the row to copy.\n* @param cellNum\n* the num of the cell to copy.\n* @return the CellRangeAddress created.\n*/\npublic static CellRangeAddress getMergedRegion(HSSFSheet sheet, int rowNum, short cellNum) {\nfor (int i = 0; i &lt; sheet.getNumMergedRegions(); i++) {\nCellRangeAddress merged = sheet.getMergedRegion(i);\nif (merged.isInRange(rowNum, cellNum)) {\nreturn merged;\n}\n}\nreturn null;\n}\n\n/**\n* Check that the merged region has been created in the destination sheet.\n*\n* @param newMergedRegion\n* the merged region to copy or not in the destination sheet.\n* @param mergedRegions\n* the list containing all the merged region.\n* @return true if the merged region is already in the list or not.\n*/\nprivate static boolean isNewMergedRegion(CellRangeAddressWrapper newMergedRegion,\nSet&lt;CellRangeAddressWrapper&gt; mergedRegions) {\nreturn !mergedRegions.contains(newMergedRegion);\n}\n\nprivate static void copyPictures(Sheet newSheet, Sheet sheet) {\nDrawing drawingOld = sheet.createDrawingPatriarch();\nDrawing drawingNew = newSheet.createDrawingPatriarch();\nCreationHelper helper = newSheet.getWorkbook().getCreationHelper();\n\n// if (drawingNew instanceof HSSFPatriarch) {\nif (drawingOld instanceof HSSFPatriarch) {\nList&lt;HSSFShape&gt; shapes = ((HSSFPatriarch) drawingOld).getChildren();\nfor (int i = 0; i &lt; shapes.size(); i++) {\nSystem.out.println(shapes.size());\nif (shapes.get(i) instanceof HSSFPicture) {\nHSSFPicture pic = (HSSFPicture) shapes.get(i);\nHSSFPictureData picdata = pic.getPictureData();\nint pictureIndex = newSheet.getWorkbook().addPicture(picdata.getData(), picdata.getFormat());\nClientAnchor anchor = null;\nif (pic.getAnchor() != null) {\nanchor = helper.createClientAnchor();\nanchor.setDx1(((HSSFClientAnchor) pic.getAnchor()).getDx1());\nanchor.setDx2(((HSSFClientAnchor) pic.getAnchor()).getDx2());\nanchor.setDy1(((HSSFClientAnchor) pic.getAnchor()).getDy1());\nanchor.setDy2(((HSSFClientAnchor) pic.getAnchor()).getDy2());\nanchor.setCol1(((HSSFClientAnchor) pic.getAnchor()).getCol1());\nanchor.setCol2(((HSSFClientAnchor) pic.getAnchor()).getCol2());\nanchor.setRow1(((HSSFClientAnchor) pic.getAnchor()).getRow1());\nanchor.setRow2(((HSSFClientAnchor) pic.getAnchor()).getRow2());\nanchor.setAnchorType(((HSSFClientAnchor) pic.getAnchor()).getAnchorType());\n}\ndrawingNew.createPicture(anchor, pictureIndex);\n}\n}\n} else {\nif (drawingNew instanceof XSSFDrawing) {\nList&lt;XSSFShape&gt; shapes = ((XSSFDrawing) drawingOld).getShapes();\nfor (int i = 0; i &lt; shapes.size(); i++) {\nif (shapes.get(i) instanceof XSSFPicture) {\nXSSFPicture pic = (XSSFPicture) shapes.get(i);\nXSSFPictureData picdata = pic.getPictureData();\nint pictureIndex = newSheet.getWorkbook().addPicture(picdata.getData(),\npicdata.getPictureType());\nXSSFClientAnchor anchor = null;\nCTTwoCellAnchor oldAnchor = ((XSSFDrawing) drawingOld).getCTDrawing().getTwoCellAnchorArray(i);\nif (oldAnchor != null) {\nanchor = (XSSFClientAnchor) helper.createClientAnchor();\nCTMarker markerFrom = oldAnchor.getFrom();\nCTMarker markerTo = oldAnchor.getTo();\nanchor.setDx1((int) markerFrom.getColOff());\nanchor.setDx2((int) markerTo.getColOff());\nanchor.setDy1((int) markerFrom.getRowOff());\nanchor.setDy2((int) markerTo.getRowOff());\nanchor.setCol1(markerFrom.getCol());\nanchor.setCol2(markerTo.getCol());\nanchor.setRow1(markerFrom.getRow());\nanchor.setRow2(markerTo.getRow());\n}\ndrawingNew.createPicture(anchor, pictureIndex);\n}\n}\n}\n}\n}\n\nprivate static void copyCell(Cell oldCell, Cell newCell, List&lt;CellStyle&gt; styleList) {\nif (styleList != null) {\nif (oldCell.getSheet().getWorkbook() == newCell.getSheet().getWorkbook()) {\nnewCell.setCellStyle(oldCell.getCellStyle());\n} else {\nDataFormat newDataFormat = newCell.getSheet().getWorkbook().createDataFormat();\n\nCellStyle newCellStyle = getSameCellStyle(oldCell, newCell, styleList);\nif (newCellStyle == null) {\n// Create a new cell style\nFont oldFont = oldCell.getSheet().getWorkbook().getFontAt(oldCell.getCellStyle().getFontIndex());\n// Find a existing font corresponding to avoid to create a\n// new one\nFont newFont = newCell\n.getSheet()\n.getWorkbook()\n.findFont(oldFont.getBoldweight(), oldFont.getColor(), oldFont.getFontHeight(),\noldFont.getFontName(), oldFont.getItalic(), oldFont.getStrikeout(),\noldFont.getTypeOffset(), oldFont.getUnderline());\nif (newFont == null) {\nnewFont = newCell.getSheet().getWorkbook().createFont();\nnewFont.setBoldweight(oldFont.getBoldweight());\nnewFont.setColor(oldFont.getColor());\nnewFont.setFontHeight(oldFont.getFontHeight());\nnewFont.setFontName(oldFont.getFontName());\nnewFont.setItalic(oldFont.getItalic());\nnewFont.setStrikeout(oldFont.getStrikeout());\nnewFont.setTypeOffset(oldFont.getTypeOffset());\nnewFont.setUnderline(oldFont.getUnderline());\nnewFont.setCharSet(oldFont.getCharSet());\n}\n\nshort newFormat = newDataFormat.getFormat(oldCell.getCellStyle().getDataFormatString());\nnewCellStyle = newCell.getSheet().getWorkbook().createCellStyle();\nnewCellStyle.setFont(newFont);\nnewCellStyle.setDataFormat(newFormat);\n\nnewCellStyle.setAlignment(oldCell.getCellStyle().getAlignment());\nnewCellStyle.setHidden(oldCell.getCellStyle().getHidden());\nnewCellStyle.setLocked(oldCell.getCellStyle().getLocked());\nnewCellStyle.setWrapText(oldCell.getCellStyle().getWrapText());\nnewCellStyle.setBorderBottom(oldCell.getCellStyle().getBorderBottom());\nnewCellStyle.setBorderLeft(oldCell.getCellStyle().getBorderLeft());\nnewCellStyle.setBorderRight(oldCell.getCellStyle().getBorderRight());\nnewCellStyle.setBorderTop(oldCell.getCellStyle().getBorderTop());\nnewCellStyle.setBottomBorderColor(oldCell.getCellStyle().getBottomBorderColor());\nnewCellStyle.setFillBackgroundColor(oldCell.getCellStyle().getFillBackgroundColor());\nnewCellStyle.setFillForegroundColor(oldCell.getCellStyle().getFillForegroundColor());\nnewCellStyle.setFillPattern(oldCell.getCellStyle().getFillPattern());\nnewCellStyle.setIndention(oldCell.getCellStyle().getIndention());\nnewCellStyle.setLeftBorderColor(oldCell.getCellStyle().getLeftBorderColor());\nnewCellStyle.setRightBorderColor(oldCell.getCellStyle().getRightBorderColor());\nnewCellStyle.setRotation(oldCell.getCellStyle().getRotation());\nnewCellStyle.setTopBorderColor(oldCell.getCellStyle().getTopBorderColor());\nnewCellStyle.setVerticalAlignment(oldCell.getCellStyle().getVerticalAlignment());\n\nstyleList.add(newCellStyle);\n}\nnewCell.setCellStyle(newCellStyle);\n}\n}\nswitch (oldCell.getCellType()) {\ncase Cell.CELL_TYPE_STRING:\nnewCell.setCellValue(oldCell.getStringCellValue());\nbreak;\ncase Cell.CELL_TYPE_NUMERIC:\nnewCell.setCellValue(oldCell.getNumericCellValue());\nbreak;\ncase Cell.CELL_TYPE_BLANK:\nnewCell.setCellType(Cell.CELL_TYPE_BLANK);\nbreak;\ncase Cell.CELL_TYPE_BOOLEAN:\nnewCell.setCellValue(oldCell.getBooleanCellValue());\nbreak;\ncase Cell.CELL_TYPE_ERROR:\nnewCell.setCellErrorValue(oldCell.getErrorCellValue());\nbreak;\ncase Cell.CELL_TYPE_FORMULA:\nnewCell.setCellFormula(oldCell.getCellFormula());\nformulaInfoList.add(new FormulaInfo(oldCell.getSheet().getSheetName(), oldCell.getRowIndex(), oldCell\n.getColumnIndex(), oldCell.getCellFormula()));\nbreak;\ndefault:\nbreak;\n}\n}\n\nprivate static CellStyle getSameCellStyle(Cell oldCell, Cell newCell, List&lt;CellStyle&gt; styleList) {\nCellStyle styleToFind = oldCell.getCellStyle();\nCellStyle currentCellStyle = null;\nCellStyle returnCellStyle = null;\nIterator&lt;CellStyle&gt; iterator = styleList.iterator();\nFont oldFont = null;\nFont newFont = null;\nwhile (iterator.hasNext() &amp;&amp; returnCellStyle == null) {\ncurrentCellStyle = iterator.next();\n\nif (currentCellStyle.getAlignment() != styleToFind.getAlignment()) {\ncontinue;\n}\nif (currentCellStyle.getHidden() != styleToFind.getHidden()) {\ncontinue;\n}\nif (currentCellStyle.getLocked() != styleToFind.getLocked()) {\ncontinue;\n}\nif (currentCellStyle.getWrapText() != styleToFind.getWrapText()) {\ncontinue;\n}\nif (currentCellStyle.getBorderBottom() != styleToFind.getBorderBottom()) {\ncontinue;\n}\nif (currentCellStyle.getBorderLeft() != styleToFind.getBorderLeft()) {\ncontinue;\n}\nif (currentCellStyle.getBorderRight() != styleToFind.getBorderRight()) {\ncontinue;\n}\nif (currentCellStyle.getBorderTop() != styleToFind.getBorderTop()) {\ncontinue;\n}\nif (currentCellStyle.getBottomBorderColor() != styleToFind.getBottomBorderColor()) {\ncontinue;\n}\nif (currentCellStyle.getFillBackgroundColor() != styleToFind.getFillBackgroundColor()) {\ncontinue;\n}\nif (currentCellStyle.getFillForegroundColor() != styleToFind.getFillForegroundColor()) {\ncontinue;\n}\nif (currentCellStyle.getFillPattern() != styleToFind.getFillPattern()) {\ncontinue;\n}\nif (currentCellStyle.getIndention() != styleToFind.getIndention()) {\ncontinue;\n}\nif (currentCellStyle.getLeftBorderColor() != styleToFind.getLeftBorderColor()) {\ncontinue;\n}\nif (currentCellStyle.getRightBorderColor() != styleToFind.getRightBorderColor()) {\ncontinue;\n}\nif (currentCellStyle.getRotation() != styleToFind.getRotation()) {\ncontinue;\n}\nif (currentCellStyle.getTopBorderColor() != styleToFind.getTopBorderColor()) {\ncontinue;\n}\nif (currentCellStyle.getVerticalAlignment() != styleToFind.getVerticalAlignment()) {\ncontinue;\n}\n\noldFont = oldCell.getSheet().getWorkbook().getFontAt(oldCell.getCellStyle().getFontIndex());\nnewFont = newCell.getSheet().getWorkbook().getFontAt(currentCellStyle.getFontIndex());\n\nif (newFont.getBoldweight() == oldFont.getBoldweight()) {\ncontinue;\n}\nif (newFont.getColor() == oldFont.getColor()) {\ncontinue;\n}\nif (newFont.getFontHeight() == oldFont.getFontHeight()) {\ncontinue;\n}\nif (newFont.getFontName() == oldFont.getFontName()) {\ncontinue;\n}\nif (newFont.getItalic() == oldFont.getItalic()) {\ncontinue;\n}\nif (newFont.getStrikeout() == oldFont.getStrikeout()) {\ncontinue;\n}\nif (newFont.getTypeOffset() == oldFont.getTypeOffset()) {\ncontinue;\n}\nif (newFont.getUnderline() == oldFont.getUnderline()) {\ncontinue;\n}\nif (newFont.getCharSet() == oldFont.getCharSet()) {\ncontinue;\n}\nif (oldCell.getCellStyle().getDataFormatString().equals(currentCellStyle.getDataFormatString())) {\ncontinue;\n}\n\nreturnCellStyle = currentCellStyle;\n}\nreturn returnCellStyle;\n}\n\nprivate static void copySheetSettings(Sheet newSheet, Sheet sheetToCopy) {\n\nnewSheet.setAutobreaks(sheetToCopy.getAutobreaks());\nnewSheet.setDefaultColumnWidth(sheetToCopy.getDefaultColumnWidth());\nnewSheet.setDefaultRowHeight(sheetToCopy.getDefaultRowHeight());\nnewSheet.setDefaultRowHeightInPoints(sheetToCopy.getDefaultRowHeightInPoints());\nnewSheet.setDisplayGuts(sheetToCopy.getDisplayGuts());\nnewSheet.setFitToPage(sheetToCopy.getFitToPage());\n\nnewSheet.setForceFormulaRecalculation(sheetToCopy.getForceFormulaRecalculation());\n\nPrintSetup sheetToCopyPrintSetup = sheetToCopy.getPrintSetup();\nPrintSetup newSheetPrintSetup = newSheet.getPrintSetup();\n\nnewSheetPrintSetup.setPaperSize(sheetToCopyPrintSetup.getPaperSize());\nnewSheetPrintSetup.setScale(sheetToCopyPrintSetup.getScale());\nnewSheetPrintSetup.setPageStart(sheetToCopyPrintSetup.getPageStart());\nnewSheetPrintSetup.setFitWidth(sheetToCopyPrintSetup.getFitWidth());\nnewSheetPrintSetup.setFitHeight(sheetToCopyPrintSetup.getFitHeight());\nnewSheetPrintSetup.setLeftToRight(sheetToCopyPrintSetup.getLeftToRight());\nnewSheetPrintSetup.setLandscape(sheetToCopyPrintSetup.getLandscape());\nnewSheetPrintSetup.setValidSettings(sheetToCopyPrintSetup.getValidSettings());\nnewSheetPrintSetup.setNoColor(sheetToCopyPrintSetup.getNoColor());\nnewSheetPrintSetup.setDraft(sheetToCopyPrintSetup.getDraft());\nnewSheetPrintSetup.setNotes(sheetToCopyPrintSetup.getNotes());\nnewSheetPrintSetup.setNoOrientation(sheetToCopyPrintSetup.getNoOrientation());\nnewSheetPrintSetup.setUsePage(sheetToCopyPrintSetup.getUsePage());\nnewSheetPrintSetup.setHResolution(sheetToCopyPrintSetup.getHResolution());\nnewSheetPrintSetup.setVResolution(sheetToCopyPrintSetup.getVResolution());\nnewSheetPrintSetup.setHeaderMargin(sheetToCopyPrintSetup.getHeaderMargin());\nnewSheetPrintSetup.setFooterMargin(sheetToCopyPrintSetup.getFooterMargin());\nnewSheetPrintSetup.setCopies(sheetToCopyPrintSetup.getCopies());\n\nHeader sheetToCopyHeader = sheetToCopy.getHeader();\nHeader newSheetHeader = newSheet.getHeader();\nnewSheetHeader.setCenter(sheetToCopyHeader.getCenter());\nnewSheetHeader.setLeft(sheetToCopyHeader.getLeft());\nnewSheetHeader.setRight(sheetToCopyHeader.getRight());\n\nFooter sheetToCopyFooter = sheetToCopy.getFooter();\nFooter newSheetFooter = newSheet.getFooter();\nnewSheetFooter.setCenter(sheetToCopyFooter.getCenter());\nnewSheetFooter.setLeft(sheetToCopyFooter.getLeft());\nnewSheetFooter.setRight(sheetToCopyFooter.getRight());\n\nnewSheet.setHorizontallyCenter(sheetToCopy.getHorizontallyCenter());\nnewSheet.setMargin(Sheet.LeftMargin, sheetToCopy.getMargin(Sheet.LeftMargin));\nnewSheet.setMargin(Sheet.RightMargin, sheetToCopy.getMargin(Sheet.RightMargin));\nnewSheet.setMargin(Sheet.TopMargin, sheetToCopy.getMargin(Sheet.TopMargin));\nnewSheet.setMargin(Sheet.BottomMargin, sheetToCopy.getMargin(Sheet.BottomMargin));\n\nnewSheet.setPrintGridlines(sheetToCopy.isPrintGridlines());\nnewSheet.setRowSumsBelow(sheetToCopy.getRowSumsBelow());\nnewSheet.setRowSumsRight(sheetToCopy.getRowSumsRight());\nnewSheet.setVerticallyCenter(sheetToCopy.getVerticallyCenter());\nnewSheet.setDisplayFormulas(sheetToCopy.isDisplayFormulas());\nnewSheet.setDisplayGridlines(sheetToCopy.isDisplayGridlines());\nnewSheet.setDisplayRowColHeadings(sheetToCopy.isDisplayRowColHeadings());\nnewSheet.setDisplayZeros(sheetToCopy.isDisplayZeros());\nnewSheet.setPrintGridlines(sheetToCopy.isPrintGridlines());\nnewSheet.setRightToLeft(sheetToCopy.isRightToLeft());\nnewSheet.setZoom(1, 1);\ncopyPrintTitle(newSheet, sheetToCopy);\n}\n\nprivate static void copyPrintTitle(Sheet newSheet, Sheet sheetToCopy) {\nint nbNames = sheetToCopy.getWorkbook().getNumberOfNames();\nName name = null;\nString formula = null;\n\nString part1S = null;\nString part2S = null;\nString formS = null;\nString formF = null;\nString part1F = null;\nString part2F = null;\nint rowB = -1;\nint rowE = -1;\nint colB = -1;\nint colE = -1;\n\nfor (int i = 0; i &lt; nbNames; i++) {\nname = sheetToCopy.getWorkbook().getNameAt(i);\nif (name.getSheetIndex() == sheetToCopy.getWorkbook().getSheetIndex(sheetToCopy)) {\nif (name.getNameName().equals(\"Print_Titles\")\n|| name.getNameName().equals(XSSFName.BUILTIN_PRINT_TITLE)) {\nformula = name.getRefersToFormula();\nint indexComma = formula.indexOf(\",\");\nif (indexComma == -1) {\nindexComma = formula.indexOf(\";\");\n}\nString firstPart = null;\n;\nString secondPart = null;\nif (indexComma == -1) {\nfirstPart = formula;\n} else {\nfirstPart = formula.substring(0, indexComma);\nsecondPart = formula.substring(indexComma + 1);\n}\n\nformF = firstPart.substring(firstPart.indexOf(\"!\") + 1);\npart1F = formF.substring(0, formF.indexOf(\":\"));\npart2F = formF.substring(formF.indexOf(\":\") + 1);\n\nif (secondPart != null) {\nformS = secondPart.substring(secondPart.indexOf(\"!\") + 1);\npart1S = formS.substring(0, formS.indexOf(\":\"));\npart2S = formS.substring(formS.indexOf(\":\") + 1);\n}\n\nrowB = -1;\nrowE = -1;\ncolB = -1;\ncolE = -1;\nString rowBs, rowEs, colBs, colEs;\nif (part1F.lastIndexOf(\"$\") != part1F.indexOf(\"$\")) {\nrowBs = part1F.substring(part1F.lastIndexOf(\"$\") + 1, part1F.length());\nrowEs = part2F.substring(part2F.lastIndexOf(\"$\") + 1, part2F.length());\nrowB = Integer.parseInt(rowBs);\nrowE = Integer.parseInt(rowEs);\nif (secondPart != null) {\ncolBs = part1S.substring(part1S.lastIndexOf(\"$\") + 1, part1S.length());\ncolEs = part2S.substring(part2S.lastIndexOf(\"$\") + 1, part2S.length());\ncolB = CellReference.convertColStringToIndex(colBs);// CExportExcelHelperPoi.convertColumnLetterToInt(colBs);\ncolE = CellReference.convertColStringToIndex(colEs);// CExportExcelHelperPoi.convertColumnLetterToInt(colEs);\n}\n} else {\ncolBs = part1F.substring(part1F.lastIndexOf(\"$\") + 1, part1F.length());\ncolEs = part2F.substring(part2F.lastIndexOf(\"$\") + 1, part2F.length());\ncolB = CellReference.convertColStringToIndex(colBs);// CExportExcelHelperPoi.convertColumnLetterToInt(colBs);\ncolE = CellReference.convertColStringToIndex(colEs);// CExportExcelHelperPoi.convertColumnLetterToInt(colEs);\n\nif (secondPart != null) {\nrowBs = part1S.substring(part1S.lastIndexOf(\"$\") + 1, part1S.length());\nrowEs = part2S.substring(part2S.lastIndexOf(\"$\") + 1, part2S.length());\nrowB = Integer.parseInt(rowBs);\nrowE = Integer.parseInt(rowEs);\n}\n}\n\nnewSheet.getWorkbook().setRepeatingRowsAndColumns(newSheet.getWorkbook().getSheetIndex(newSheet),\ncolB, colE, rowB - 1, rowE - 1);\n}\n}\n}\n}\n} \n</code></pre>\n"},{"tags":[],"owner":{"account_id":14201611,"reputation":1,"user_id":10259380,"display_name":"Triqui"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1538476798,"creation_date":1538476798,"answer_id":52606708,"question_id":7230819,"body_markdown":"I have implemented some code to copy workbooks no matter their type: It uses interfaces, so you can use HSSFWorkbook, XSSFWorkbook and SXSSFWorkbook.\r\n\r\nThis copies sheets with pictures, fonts, styles and rows:\r\nFor my use case I need to insert new rows in an existing template and write to an SXSSFWorkbook, so I don&#39;t copy all the sheets and rows directly but instead I choose the sheets i want to copy and then copy the portions of it that I want.\r\n\r\n    \tWorkbook template = getTemplateSource(...);\r\n        Workbook wb = new SXSSFWorkbook(...);\r\n        ExcelTemplate builder = new ExcelTemplate(template);\r\n\r\n        int sheetIndex = ...;\r\n\t\tSheet srcSheet = template.getSheetAt(sheetIndex);\r\n\t\tSheet dstSheet = ExcelTemplate.copySheet(template, wb, sheetIndex);\r\n\t\tint rowNumber = getDataInsertionRow();\r\n\t\tint foot = rowNumber + 1;\r\n\t\tbuilder.copyRows(wb, srcSheet, dstSheet, 0, rowNumber, 0);\r\n\t\tfor (....) {\r\n\t\t\twriteNewRows(dstSheet, rowNumber++, data);\r\n\t\t}\r\n\t\tbuilder.copyRows(wb, srcSheet, dstSheet, foot, srcSheet.getLastRowNum() + 1, rowNumber);\r\n\r\n\r\nAnd here is the code (I tried to delete all my tests, but maybe I forgot some unused lines)\r\n\r\n    package com.systemonenoc.billing.web.view;\r\n\r\n    import java.util.HashMap;\r\n    import java.util.Map;\r\n    \r\n    import org.apache.poi.ss.usermodel.Cell;\r\n    import org.apache.poi.ss.usermodel.CellStyle;\r\n    import org.apache.poi.ss.usermodel.ClientAnchor;\r\n    import org.apache.poi.ss.usermodel.DataFormat;\r\n    import org.apache.poi.ss.usermodel.Drawing;\r\n    import org.apache.poi.ss.usermodel.Font;\r\n    import org.apache.poi.ss.usermodel.Picture;\r\n    import org.apache.poi.ss.usermodel.Row;\r\n    import org.apache.poi.ss.usermodel.Shape;\r\n    import org.apache.poi.ss.usermodel.Sheet;\r\n    import org.apache.poi.ss.usermodel.Workbook;\r\n    \r\n    public class ExcelTemplate {\r\n    \r\n    \tprivate final Workbook template;\r\n    \tprivate final Map&lt;Integer, Font&gt; fonts = new HashMap&lt;&gt;();\r\n    \tprivate final Map&lt;Integer, CellStyle&gt; styles = new HashMap&lt;&gt;();\r\n    \r\n    \tpublic ExcelTemplate(Workbook template) {\r\n    \t\tthis.template = template;\r\n    \t}\r\n    \r\n    \tpublic void switchStyles(Workbook dstWorkbook, CellStyle[] styles) {\r\n    \t\tfor (int i = 0; i &lt; styles.length; i++) {\r\n    \t\t\tstyles[i] = getStyle(dstWorkbook, styles[i]);\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tprivate Font getFont(Workbook dstWorkbook, Font font) {\r\n    \t\treturn fonts.computeIfAbsent(font.hashCode(), k -&gt; cloneFont(dstWorkbook, font));\r\n    \t}\r\n    \r\n    \tprivate CellStyle getStyle(Workbook dstWorkbook, CellStyle style) {\r\n    \t\tFont font = getFont(dstWorkbook, template.getFontAt(style.getFontIndex()));\r\n    \t\treturn styles.computeIfAbsent(style.hashCode(), k -&gt; cloneStyle(dstWorkbook, style, dstWorkbook.createDataFormat(), font));\r\n    \t}\r\n    \r\n    \tpublic void copyRows(Workbook dstWorkbook, Sheet srcSheet, Sheet dstSheet, int from, int to, int offset) {\r\n    \t\tfor (int r = from; r &lt; to; r++) {\r\n    \t\t\tRow srcRow = srcSheet.getRow(r);\r\n    \t\t\tif (srcRow != null) {\r\n    \t\t\t\tCellStyle style = srcRow.getRowStyle();\r\n    \t\t\t\tRow dstRow = dstSheet.createRow(r + offset);\r\n    \t\t\t\tdstRow.setHeight(srcRow.getHeight());\r\n    \t\t\t\tif (style != null) {\r\n    \t\t\t\t\tdstRow.setRowStyle(getStyle(dstWorkbook, style));\r\n    \t\t\t\t}\r\n    \t\t\t\tfor (int c = 0; c &lt; srcRow.getLastCellNum(); c++) {\r\n    \t\t\t\t\tCell srcCell = srcRow.getCell(c);\r\n    \t\t\t\t\tif (srcCell != null) {\r\n    \t\t\t\t\t\tint type = getCellType(srcCell);\r\n    \t\t\t\t\t\tObject value = getCellValue(srcCell);\r\n    \t\t\t\t\t\tstyle = srcCell.getCellStyle();\r\n    \t\t\t\t\t\tCell newCell = dstRow.createCell(c, type);\r\n    \t\t\t\t\t\tsetCellValue(newCell, value, type);\r\n    \t\t\t\t\t\tnewCell.setCellStyle(getStyle(dstWorkbook, style));\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tpublic static Sheet copySheet(Workbook srcWorkbook, Workbook dstWorkbook, int sheetIndex) {\r\n    \t\tSheet srcSheet = srcWorkbook.getSheetAt(sheetIndex);\r\n    \t\tSheet dstSheet = dstWorkbook.createSheet(srcSheet.getSheetName());\r\n    \t\tdstSheet.setDisplayFormulas(srcSheet.isDisplayFormulas());\r\n    \t\tdstSheet.setDisplayGridlines(srcSheet.isDisplayGridlines());\r\n    \t\tdstSheet.setDisplayGuts(srcSheet.getDisplayGuts());\r\n    \t\tdstSheet.setDisplayRowColHeadings(srcSheet.isDisplayRowColHeadings());\r\n    \t\tdstSheet.setDisplayZeros(srcSheet.isDisplayZeros());\r\n    \t\tdstSheet.setFitToPage(srcSheet.getFitToPage());\r\n    \t\tdstSheet.setForceFormulaRecalculation(srcSheet.getForceFormulaRecalculation());\r\n    \t\tdstSheet.setHorizontallyCenter(srcSheet.getHorizontallyCenter());\r\n    \t\tdstSheet.setMargin(Sheet.BottomMargin, srcSheet.getMargin(Sheet.BottomMargin));\r\n    \t\tdstSheet.setMargin(Sheet.FooterMargin, srcSheet.getMargin(Sheet.FooterMargin));\r\n    \t\tdstSheet.setMargin(Sheet.HeaderMargin, srcSheet.getMargin(Sheet.HeaderMargin));\r\n    \t\tdstSheet.setMargin(Sheet.LeftMargin, srcSheet.getMargin(Sheet.LeftMargin));\r\n    \t\tdstSheet.setMargin(Sheet.RightMargin, srcSheet.getMargin(Sheet.RightMargin));\r\n    \t\tdstSheet.setMargin(Sheet.TopMargin, srcSheet.getMargin(Sheet.TopMargin));\r\n    \t\tdstSheet.setPrintGridlines(srcSheet.isPrintGridlines());\r\n    \t\tdstSheet.setRightToLeft(srcSheet.isRightToLeft());\r\n    \t\tdstSheet.setRowSumsBelow(srcSheet.getRowSumsBelow());\r\n    \t\tdstSheet.setRowSumsRight(srcSheet.getRowSumsRight());\r\n    \t\tdstSheet.setVerticallyCenter(srcSheet.getVerticallyCenter());\r\n    \t\tfor (int i = 0; i &lt; 20; i++) {\r\n    \t\t\tdstSheet.setColumnWidth(i, srcSheet.getColumnWidth(i));\r\n    \t\t\tdstSheet.setColumnHidden(i, srcSheet.isColumnHidden(i));\r\n    \t\t}\r\n    \t\tsrcSheet.getMergedRegions().forEach(dstSheet::addMergedRegion);\r\n    \t\tDrawing&lt;?&gt; d1 = srcSheet.getDrawingPatriarch();\r\n    \t\tif (d1 != null) {\r\n    \t\t\tDrawing&lt;?&gt; d2 = dstSheet.getDrawingPatriarch();\r\n    \t\t\tif (d2 == null) {\r\n    \t\t\t\td2 = dstSheet.createDrawingPatriarch();\r\n    \t\t\t}\r\n    \t\t\tfor (Shape shape : d1) {\r\n    \t\t\t\tif (shape instanceof Picture) {\r\n    \t\t\t\t\tPicture p = (Picture) shape;\r\n    \t\t\t\t\tClientAnchor a1 = p.getClientAnchor();\r\n    \t\t\t\t\tint pictureId = dstWorkbook.addPicture(p.getPictureData().getData(), p.getPictureData().getPictureType());\r\n    \t\t\t\t\tClientAnchor a2 = d2.createAnchor(a1.getDx1(), a1.getDy1(), a1.getDx2(), a1.getDy2(), a1.getCol1(), a1.getRow1(), a1.getCol2(), a1.getRow2());\r\n    \t\t\t\t\td2.createPicture(a2, pictureId);\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\treturn dstSheet;\r\n    \t}\r\n    \r\n    \tpublic static Font cloneFont(Workbook dstWorkbook, Font font) {\r\n    \t\tFont clone = dstWorkbook.createFont();\r\n    \t\tclone.setBold(font.getBold());\r\n    \t\tclone.setCharSet(font.getCharSet());\r\n    \t\tclone.setColor(font.getColor());\r\n    \t\tclone.setFontHeight(font.getFontHeight());\r\n    \t\tclone.setFontName(font.getFontName());\r\n    \t\tclone.setItalic(font.getItalic());\r\n    \t\tclone.setStrikeout(font.getStrikeout());\r\n    \t\tclone.setTypeOffset(font.getTypeOffset());\r\n    \t\tclone.setUnderline(font.getUnderline());\r\n    \t\treturn clone;\r\n    \t}\r\n    \r\n    \tpublic static CellStyle cloneStyle(Workbook dstWorkbook, CellStyle style, DataFormat formatter, Font font) {\r\n    \t\tCellStyle clone = dstWorkbook.createCellStyle();\r\n    \t\tclone.setAlignment(style.getAlignmentEnum());\r\n    \t\tclone.setBorderBottom(style.getBorderBottomEnum());\r\n    \t\tclone.setBorderLeft(style.getBorderLeftEnum());\r\n    \t\tclone.setBorderRight(style.getBorderRightEnum());\r\n    \t\tclone.setBorderTop(style.getBorderTopEnum());\r\n    \t\tclone.setDataFormat(formatter.getFormat(style.getDataFormatString()));\r\n    \t\tclone.setFillBackgroundColor(style.getFillBackgroundColor());\r\n    \t\tclone.setFillForegroundColor(style.getFillForegroundColor());\r\n    \t\tclone.setFillPattern(style.getFillPatternEnum());\r\n    \t\tclone.setFont(font);\r\n    \t\tclone.setHidden(style.getHidden());\r\n    \t\tclone.setIndention(style.getIndention());\r\n    \t\tclone.setLocked(style.getLocked());\r\n    \t\tclone.setVerticalAlignment(style.getVerticalAlignmentEnum());\r\n    \t\tclone.setWrapText(style.getWrapText());\r\n    \t\treturn clone;\r\n    \t}\r\n    \r\n    \tprotected static int getCellType(Cell cell) {\r\n    \t\tint cellType = cell.getCellType();\r\n    \t\tif (cellType == Cell.CELL_TYPE_FORMULA) {\r\n    \t\t\tcellType = cell.getSheet().getWorkbook().getCreationHelper().createFormulaEvaluator()\r\n    \t\t\t\t\t.evaluateFormulaCell(cell);\r\n    \t\t}\r\n    \t\treturn cellType;\r\n    \t}\r\n    \r\n    \tprotected static Object getCellValue(Cell cell) {\r\n    \t\tswitch (getCellType(cell)) {\r\n    \t\tcase Cell.CELL_TYPE_BLANK:\r\n    \t\tcase Cell.CELL_TYPE_STRING:\r\n    \t\t\treturn cell.getStringCellValue();\r\n    \t\tcase Cell.CELL_TYPE_BOOLEAN:\r\n    \t\t\treturn cell.getBooleanCellValue();\r\n    \t\tcase Cell.CELL_TYPE_ERROR:\r\n    \t\t\treturn cell.getErrorCellValue();\r\n    \t\tcase Cell.CELL_TYPE_NUMERIC:\r\n    \t\t\treturn cell.getNumericCellValue();\r\n    \t\t}\r\n    \t\treturn null;\r\n    \t}\r\n    \r\n    \tprotected static void setCellValue(Cell cell, Object value, int type) {\r\n    \t\tswitch (type) {\r\n    \t\tcase Cell.CELL_TYPE_BLANK:\r\n    \t\t\treturn;\r\n    \t\tcase Cell.CELL_TYPE_STRING:\r\n    \t\t\tcell.setCellValue((String) value);\r\n    \t\t\treturn;\r\n    \t\tcase Cell.CELL_TYPE_BOOLEAN:\r\n    \t\t\tcell.setCellValue((Boolean) value);\r\n    \t\t\treturn;\r\n    \t\tcase Cell.CELL_TYPE_ERROR:\r\n    \t\t\tcell.setCellErrorValue((Byte) value);\r\n    \t\t\treturn;\r\n    \t\tcase Cell.CELL_TYPE_NUMERIC:\r\n    \t\t\tcell.setCellValue((Double) value);\r\n    \t\t\treturn;\r\n    \t\t}\r\n    \t}\r\n    \r\n    }\r\n\r\n","title":"How to convert HSSFWorkbook to XSSFWorkbook using Apache POI?","body":"<p>I have implemented some code to copy workbooks no matter their type: It uses interfaces, so you can use HSSFWorkbook, XSSFWorkbook and SXSSFWorkbook.</p>\n\n<p>This copies sheets with pictures, fonts, styles and rows:\nFor my use case I need to insert new rows in an existing template and write to an SXSSFWorkbook, so I don't copy all the sheets and rows directly but instead I choose the sheets i want to copy and then copy the portions of it that I want.</p>\n\n<pre><code>    Workbook template = getTemplateSource(...);\n    Workbook wb = new SXSSFWorkbook(...);\n    ExcelTemplate builder = new ExcelTemplate(template);\n\n    int sheetIndex = ...;\n    Sheet srcSheet = template.getSheetAt(sheetIndex);\n    Sheet dstSheet = ExcelTemplate.copySheet(template, wb, sheetIndex);\n    int rowNumber = getDataInsertionRow();\n    int foot = rowNumber + 1;\n    builder.copyRows(wb, srcSheet, dstSheet, 0, rowNumber, 0);\n    for (....) {\n        writeNewRows(dstSheet, rowNumber++, data);\n    }\n    builder.copyRows(wb, srcSheet, dstSheet, foot, srcSheet.getLastRowNum() + 1, rowNumber);\n</code></pre>\n\n<p>And here is the code (I tried to delete all my tests, but maybe I forgot some unused lines)</p>\n\n<pre><code>package com.systemonenoc.billing.web.view;\n\nimport java.util.HashMap;\nimport java.util.Map;\n\nimport org.apache.poi.ss.usermodel.Cell;\nimport org.apache.poi.ss.usermodel.CellStyle;\nimport org.apache.poi.ss.usermodel.ClientAnchor;\nimport org.apache.poi.ss.usermodel.DataFormat;\nimport org.apache.poi.ss.usermodel.Drawing;\nimport org.apache.poi.ss.usermodel.Font;\nimport org.apache.poi.ss.usermodel.Picture;\nimport org.apache.poi.ss.usermodel.Row;\nimport org.apache.poi.ss.usermodel.Shape;\nimport org.apache.poi.ss.usermodel.Sheet;\nimport org.apache.poi.ss.usermodel.Workbook;\n\npublic class ExcelTemplate {\n\n    private final Workbook template;\n    private final Map&lt;Integer, Font&gt; fonts = new HashMap&lt;&gt;();\n    private final Map&lt;Integer, CellStyle&gt; styles = new HashMap&lt;&gt;();\n\n    public ExcelTemplate(Workbook template) {\n        this.template = template;\n    }\n\n    public void switchStyles(Workbook dstWorkbook, CellStyle[] styles) {\n        for (int i = 0; i &lt; styles.length; i++) {\n            styles[i] = getStyle(dstWorkbook, styles[i]);\n        }\n    }\n\n    private Font getFont(Workbook dstWorkbook, Font font) {\n        return fonts.computeIfAbsent(font.hashCode(), k -&gt; cloneFont(dstWorkbook, font));\n    }\n\n    private CellStyle getStyle(Workbook dstWorkbook, CellStyle style) {\n        Font font = getFont(dstWorkbook, template.getFontAt(style.getFontIndex()));\n        return styles.computeIfAbsent(style.hashCode(), k -&gt; cloneStyle(dstWorkbook, style, dstWorkbook.createDataFormat(), font));\n    }\n\n    public void copyRows(Workbook dstWorkbook, Sheet srcSheet, Sheet dstSheet, int from, int to, int offset) {\n        for (int r = from; r &lt; to; r++) {\n            Row srcRow = srcSheet.getRow(r);\n            if (srcRow != null) {\n                CellStyle style = srcRow.getRowStyle();\n                Row dstRow = dstSheet.createRow(r + offset);\n                dstRow.setHeight(srcRow.getHeight());\n                if (style != null) {\n                    dstRow.setRowStyle(getStyle(dstWorkbook, style));\n                }\n                for (int c = 0; c &lt; srcRow.getLastCellNum(); c++) {\n                    Cell srcCell = srcRow.getCell(c);\n                    if (srcCell != null) {\n                        int type = getCellType(srcCell);\n                        Object value = getCellValue(srcCell);\n                        style = srcCell.getCellStyle();\n                        Cell newCell = dstRow.createCell(c, type);\n                        setCellValue(newCell, value, type);\n                        newCell.setCellStyle(getStyle(dstWorkbook, style));\n                    }\n                }\n            }\n        }\n    }\n\n    public static Sheet copySheet(Workbook srcWorkbook, Workbook dstWorkbook, int sheetIndex) {\n        Sheet srcSheet = srcWorkbook.getSheetAt(sheetIndex);\n        Sheet dstSheet = dstWorkbook.createSheet(srcSheet.getSheetName());\n        dstSheet.setDisplayFormulas(srcSheet.isDisplayFormulas());\n        dstSheet.setDisplayGridlines(srcSheet.isDisplayGridlines());\n        dstSheet.setDisplayGuts(srcSheet.getDisplayGuts());\n        dstSheet.setDisplayRowColHeadings(srcSheet.isDisplayRowColHeadings());\n        dstSheet.setDisplayZeros(srcSheet.isDisplayZeros());\n        dstSheet.setFitToPage(srcSheet.getFitToPage());\n        dstSheet.setForceFormulaRecalculation(srcSheet.getForceFormulaRecalculation());\n        dstSheet.setHorizontallyCenter(srcSheet.getHorizontallyCenter());\n        dstSheet.setMargin(Sheet.BottomMargin, srcSheet.getMargin(Sheet.BottomMargin));\n        dstSheet.setMargin(Sheet.FooterMargin, srcSheet.getMargin(Sheet.FooterMargin));\n        dstSheet.setMargin(Sheet.HeaderMargin, srcSheet.getMargin(Sheet.HeaderMargin));\n        dstSheet.setMargin(Sheet.LeftMargin, srcSheet.getMargin(Sheet.LeftMargin));\n        dstSheet.setMargin(Sheet.RightMargin, srcSheet.getMargin(Sheet.RightMargin));\n        dstSheet.setMargin(Sheet.TopMargin, srcSheet.getMargin(Sheet.TopMargin));\n        dstSheet.setPrintGridlines(srcSheet.isPrintGridlines());\n        dstSheet.setRightToLeft(srcSheet.isRightToLeft());\n        dstSheet.setRowSumsBelow(srcSheet.getRowSumsBelow());\n        dstSheet.setRowSumsRight(srcSheet.getRowSumsRight());\n        dstSheet.setVerticallyCenter(srcSheet.getVerticallyCenter());\n        for (int i = 0; i &lt; 20; i++) {\n            dstSheet.setColumnWidth(i, srcSheet.getColumnWidth(i));\n            dstSheet.setColumnHidden(i, srcSheet.isColumnHidden(i));\n        }\n        srcSheet.getMergedRegions().forEach(dstSheet::addMergedRegion);\n        Drawing&lt;?&gt; d1 = srcSheet.getDrawingPatriarch();\n        if (d1 != null) {\n            Drawing&lt;?&gt; d2 = dstSheet.getDrawingPatriarch();\n            if (d2 == null) {\n                d2 = dstSheet.createDrawingPatriarch();\n            }\n            for (Shape shape : d1) {\n                if (shape instanceof Picture) {\n                    Picture p = (Picture) shape;\n                    ClientAnchor a1 = p.getClientAnchor();\n                    int pictureId = dstWorkbook.addPicture(p.getPictureData().getData(), p.getPictureData().getPictureType());\n                    ClientAnchor a2 = d2.createAnchor(a1.getDx1(), a1.getDy1(), a1.getDx2(), a1.getDy2(), a1.getCol1(), a1.getRow1(), a1.getCol2(), a1.getRow2());\n                    d2.createPicture(a2, pictureId);\n                }\n            }\n        }\n        return dstSheet;\n    }\n\n    public static Font cloneFont(Workbook dstWorkbook, Font font) {\n        Font clone = dstWorkbook.createFont();\n        clone.setBold(font.getBold());\n        clone.setCharSet(font.getCharSet());\n        clone.setColor(font.getColor());\n        clone.setFontHeight(font.getFontHeight());\n        clone.setFontName(font.getFontName());\n        clone.setItalic(font.getItalic());\n        clone.setStrikeout(font.getStrikeout());\n        clone.setTypeOffset(font.getTypeOffset());\n        clone.setUnderline(font.getUnderline());\n        return clone;\n    }\n\n    public static CellStyle cloneStyle(Workbook dstWorkbook, CellStyle style, DataFormat formatter, Font font) {\n        CellStyle clone = dstWorkbook.createCellStyle();\n        clone.setAlignment(style.getAlignmentEnum());\n        clone.setBorderBottom(style.getBorderBottomEnum());\n        clone.setBorderLeft(style.getBorderLeftEnum());\n        clone.setBorderRight(style.getBorderRightEnum());\n        clone.setBorderTop(style.getBorderTopEnum());\n        clone.setDataFormat(formatter.getFormat(style.getDataFormatString()));\n        clone.setFillBackgroundColor(style.getFillBackgroundColor());\n        clone.setFillForegroundColor(style.getFillForegroundColor());\n        clone.setFillPattern(style.getFillPatternEnum());\n        clone.setFont(font);\n        clone.setHidden(style.getHidden());\n        clone.setIndention(style.getIndention());\n        clone.setLocked(style.getLocked());\n        clone.setVerticalAlignment(style.getVerticalAlignmentEnum());\n        clone.setWrapText(style.getWrapText());\n        return clone;\n    }\n\n    protected static int getCellType(Cell cell) {\n        int cellType = cell.getCellType();\n        if (cellType == Cell.CELL_TYPE_FORMULA) {\n            cellType = cell.getSheet().getWorkbook().getCreationHelper().createFormulaEvaluator()\n                    .evaluateFormulaCell(cell);\n        }\n        return cellType;\n    }\n\n    protected static Object getCellValue(Cell cell) {\n        switch (getCellType(cell)) {\n        case Cell.CELL_TYPE_BLANK:\n        case Cell.CELL_TYPE_STRING:\n            return cell.getStringCellValue();\n        case Cell.CELL_TYPE_BOOLEAN:\n            return cell.getBooleanCellValue();\n        case Cell.CELL_TYPE_ERROR:\n            return cell.getErrorCellValue();\n        case Cell.CELL_TYPE_NUMERIC:\n            return cell.getNumericCellValue();\n        }\n        return null;\n    }\n\n    protected static void setCellValue(Cell cell, Object value, int type) {\n        switch (type) {\n        case Cell.CELL_TYPE_BLANK:\n            return;\n        case Cell.CELL_TYPE_STRING:\n            cell.setCellValue((String) value);\n            return;\n        case Cell.CELL_TYPE_BOOLEAN:\n            cell.setCellValue((Boolean) value);\n            return;\n        case Cell.CELL_TYPE_ERROR:\n            cell.setCellErrorValue((Byte) value);\n            return;\n        case Cell.CELL_TYPE_NUMERIC:\n            cell.setCellValue((Double) value);\n            return;\n        }\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":28515819,"reputation":1,"user_id":21825195,"display_name":"Sergei"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683282404,"creation_date":1683282404,"answer_id":76181222,"question_id":7230819,"body_markdown":"My solution to the problem. Working code\r\n\r\n    public SXSSFWorkbook createSXSSFWorkbookFromXSSFWorkbook(XSSFWorkbook sourceWorkbook)   {\r\n        SXSSFWorkbook targetWorkbook = new SXSSFWorkbook();\r\n\r\n        // Loop through each sheet in XSSFWorkbook\r\n        for (int i = 0; i &lt; sourceWorkbook.getNumberOfSheets(); i++) {\r\n            XSSFSheet sourceSheet = sourceWorkbook.getSheetAt(i);\r\n            SXSSFSheet targetSheet = targetWorkbook.createSheet(sourceSheet.getSheetName());\r\n            String sheetName = sourceSheet.getSheetName();\r\n\r\n            // Loop through each row in XSSFSheet\r\n            for (Row sourceRow : sourceSheet) {\r\n                SXSSFRow targetRow = targetSheet.createRow(sourceRow.getRowNum());\r\n                targetSheet.setRandomAccessWindowSize(1000000);\r\n\r\n                // Loop through each cell in XSSFRow\r\n                Iterator&lt;Cell&gt; cellIterator = sourceRow.cellIterator();\r\n                while (cellIterator.hasNext()) {\r\n                    Cell sourceCell = cellIterator.next();\r\n                    SXSSFCell targetCell = targetRow.createCell(sourceCell.getColumnIndex());\r\n\r\n                    // Copy cell value from source to target\r\n                    importUtility.copyCellValue(sourceCell, targetCell, targetWorkbook);\r\n                }\r\n            }\r\n            setWidthColumn(sourceSheet, targetSheet);\r\n\r\n            //hide Row with legends\r\n            if (!META.equals(sheetName) &amp;&amp; !NSI.equals(sheetName)) {\r\n                targetSheet.getRow(1).setHidden(true);\r\n            }\r\n        }\r\n\r\n        return targetWorkbook;\r\n    }\r\n\r\n    private void setWidthColumn(XSSFSheet sourceSheet, SXSSFSheet targetSheet) {\r\n        if (sourceSheet.getRow(0) == null) {\r\n            logger.warn(&quot;Sheet [&#39;{}&#39;] doesn&#39;t have row number 0 or sheet is empty&quot;, sourceSheet.getSheetName());\r\n        } else {\r\n            for (int j = 0; j &lt; sourceSheet.getRow(0).getLastCellNum(); j++) {\r\n                if (sourceSheet.getRow(0).getCell(j) == null) {\r\n                    break;\r\n                }\r\n                int length = sourceSheet.getRow(0).getCell(j).getStringCellValue().length();\r\n                if (length &lt; 20) {\r\n                    targetSheet.setColumnWidth(j, 20 * 256);\r\n                } else {\r\n                    targetSheet.setColumnWidth(j, (length + 5) * 256);\r\n                }\r\n            }\r\n        }\r\n    }","title":"How to convert HSSFWorkbook to XSSFWorkbook using Apache POI?","body":"<p>My solution to the problem. Working code</p>\n<pre><code>public SXSSFWorkbook createSXSSFWorkbookFromXSSFWorkbook(XSSFWorkbook sourceWorkbook)   {\n    SXSSFWorkbook targetWorkbook = new SXSSFWorkbook();\n\n    // Loop through each sheet in XSSFWorkbook\n    for (int i = 0; i &lt; sourceWorkbook.getNumberOfSheets(); i++) {\n        XSSFSheet sourceSheet = sourceWorkbook.getSheetAt(i);\n        SXSSFSheet targetSheet = targetWorkbook.createSheet(sourceSheet.getSheetName());\n        String sheetName = sourceSheet.getSheetName();\n\n        // Loop through each row in XSSFSheet\n        for (Row sourceRow : sourceSheet) {\n            SXSSFRow targetRow = targetSheet.createRow(sourceRow.getRowNum());\n            targetSheet.setRandomAccessWindowSize(1000000);\n\n            // Loop through each cell in XSSFRow\n            Iterator&lt;Cell&gt; cellIterator = sourceRow.cellIterator();\n            while (cellIterator.hasNext()) {\n                Cell sourceCell = cellIterator.next();\n                SXSSFCell targetCell = targetRow.createCell(sourceCell.getColumnIndex());\n\n                // Copy cell value from source to target\n                importUtility.copyCellValue(sourceCell, targetCell, targetWorkbook);\n            }\n        }\n        setWidthColumn(sourceSheet, targetSheet);\n\n        //hide Row with legends\n        if (!META.equals(sheetName) &amp;&amp; !NSI.equals(sheetName)) {\n            targetSheet.getRow(1).setHidden(true);\n        }\n    }\n\n    return targetWorkbook;\n}\n\nprivate void setWidthColumn(XSSFSheet sourceSheet, SXSSFSheet targetSheet) {\n    if (sourceSheet.getRow(0) == null) {\n        logger.warn(&quot;Sheet ['{}'] doesn't have row number 0 or sheet is empty&quot;, sourceSheet.getSheetName());\n    } else {\n        for (int j = 0; j &lt; sourceSheet.getRow(0).getLastCellNum(); j++) {\n            if (sourceSheet.getRow(0).getCell(j) == null) {\n                break;\n            }\n            int length = sourceSheet.getRow(0).getCell(j).getStringCellValue().length();\n            if (length &lt; 20) {\n                targetSheet.setColumnWidth(j, 20 * 256);\n            } else {\n                targetSheet.setColumnWidth(j, (length + 5) * 256);\n            }\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":431744,"reputation":363,"user_id":816016,"display_name":"Bhuvanesh Phadnis"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":55227,"favorite_count":0,"down_vote_count":0,"up_vote_count":14,"accepted_answer_id":7297596,"answer_count":8,"score":14,"last_activity_date":1683282404,"creation_date":1314624719,"question_id":7230819,"body_markdown":"How to convert\r\n\r\n    org.apache.poi.hssf.usermodel.HSSFWorkbook\r\n\r\n to \r\n\r\n    org.apache.poi.xssf.usermodel.XSSFWorkbook\r\n\r\nin Apache POI?\r\n\r\nEnvironment :\r\n\r\n - JSE1.6\r\n - JBossAS 4.3.2\r\n - POI 3.7\r\n\r\n","title":"How to convert HSSFWorkbook to XSSFWorkbook using Apache POI?","body":"<p>How to convert</p>\n\n<pre><code>org.apache.poi.hssf.usermodel.HSSFWorkbook\n</code></pre>\n\n<p>to </p>\n\n<pre><code>org.apache.poi.xssf.usermodel.XSSFWorkbook\n</code></pre>\n\n<p>in Apache POI?</p>\n\n<p>Environment :</p>\n\n<ul>\n<li>JSE1.6</li>\n<li>JBossAS 4.3.2</li>\n<li>POI 3.7</li>\n</ul>\n"},{"tags":["java","unit-testing","gradle","mockito","spring-test"],"comments":[{"owner":{"account_id":1713236,"reputation":22836,"user_id":1570854,"accept_rate":71,"display_name":"Lesiak"},"score":1,"creation_date":1620403246,"post_id":67432118,"comment_id":119199384,"body_markdown":"You have conflict in your dependencies. My guess (I have no pc at hand to check): spring-boot-starter-test:2.4.2 pulls in Mockito 3.x, and you drop some parts of it to 2.x. Learn how to view and debug dependencies in gradle: https://docs.gradle.org/current/userguide/viewing_debugging_dependencies.html#sec:resolving-version-conflict simple technique is to display all resolved versions and eyeball them for mismatches.","body":"You have conflict in your dependencies. My guess (I have no pc at hand to check): spring-boot-starter-test:2.4.2 pulls in Mockito 3.x, and you drop some parts of it to 2.x. Learn how to view and debug dependencies in gradle: <a href=\"https://docs.gradle.org/current/userguide/viewing_debugging_dependencies.html#sec:resolving-version-conflict\" rel=\"nofollow noreferrer\">docs.gradle.org/current/userguide/&hellip;</a> simple technique is to display all resolved versions and eyeball them for mismatches."},{"owner":{"account_id":6838496,"reputation":2450,"user_id":5259625,"accept_rate":56,"display_name":"Gen"},"score":0,"creation_date":1622024528,"post_id":67432118,"comment_id":119668867,"body_markdown":"LardinoisJosse did you remember how you have resolved it? I am also having the same issue","body":"LardinoisJosse did you remember how you have resolved it? I am also having the same issue"},{"owner":{"account_id":20838974,"reputation":383,"user_id":15306182,"display_name":"LardinoisJosse"},"score":0,"creation_date":1622024629,"post_id":67432118,"comment_id":119668909,"body_markdown":"@Gen I just made a whole different test","body":"@Gen I just made a whole different test"}],"answers":[{"comments":[{"owner":{"account_id":2927657,"reputation":710,"user_id":2508655,"display_name":"karthik akinapelli"},"score":2,"creation_date":1624949865,"post_id":68147118,"comment_id":120489734,"body_markdown":"thanks, its working in my case just by bumping up mockito-core version to 3.11.2 without exclusions","body":"thanks, its working in my case just by bumping up mockito-core version to 3.11.2 without exclusions"}],"tags":[],"owner":{"account_id":4672239,"reputation":168,"user_id":3783754,"display_name":"nithin prasad"},"comment_count":1,"down_vote_count":0,"up_vote_count":14,"is_accepted":true,"score":14,"last_activity_date":1624753138,"creation_date":1624753138,"answer_id":68147118,"question_id":67432118,"body_markdown":"Issue was due to the jar conflicts\r\n\r\nWe need to exclude \r\n\r\n    &lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t\t&lt;exclusions&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.junit&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.mockito&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;mockito-core&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.mockito&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;mockito-all&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t&lt;/exclusions&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\nAnd include\r\n\r\n    &lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.mockito&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;mockito-core&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.11.2&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;","title":"How to fix this error: java.lang.NoSuchMethodError: &#39;java.lang.AutoCloseable org.mockito.MockitoAnnotations.openMocks(java.lang.Object)&#39;","body":"<p>Issue was due to the jar conflicts</p>\n<p>We need to exclude</p>\n<pre><code>&lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;org.junit&lt;/groupId&gt;\n                &lt;artifactId&gt;junit&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;org.mockito&lt;/groupId&gt;\n                &lt;artifactId&gt;mockito-core&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;org.mockito&lt;/groupId&gt;\n                &lt;artifactId&gt;mockito-all&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>And include</p>\n<pre><code>&lt;dependency&gt;\n        &lt;groupId&gt;org.mockito&lt;/groupId&gt;\n        &lt;artifactId&gt;mockito-core&lt;/artifactId&gt;\n        &lt;version&gt;3.11.2&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"score":0,"creation_date":1632837078,"post_id":68656926,"comment_id":122597771,"body_markdown":"I am confused with this answer Is simply updating `mockito-core` version to `3.7.7` in the `pom.xml` enough to fix the problem?","body":"I am confused with this answer Is simply updating <code>mockito-core</code> version to <code>3.7.7</code> in the <code>pom.xml</code> enough to fix the problem?"}],"tags":[],"owner":{"account_id":5942587,"reputation":3088,"user_id":4673240,"display_name":"Praveen Kumar Verma"},"comment_count":1,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1628105036,"creation_date":1628104717,"answer_id":68656926,"question_id":67432118,"body_markdown":"After facing the same issue. Please look log trace.\r\n\r\n    java.lang.NoSuchMethodError: org.mockito.MockitoAnnotations.openMocks(Ljava/lang/Object;)Ljava/lang/AutoCloseable;\r\n    \tat org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.initMocks(MockitoTestExecutionListener.java:83)\r\n\r\n **Finally got a solution:**\r\n\r\nIn **Mockito version 2** there is a **MockitoAnnotations.initMock()** method, which is deprecated and replaced with MockitoAnnotations.openMocks() in **Mockito JUnit 5 version 3**. The **MockitoAnnotations.openMocks()** method returns an instance of AutoClosable which can be used to close the resource after the test.\r\n\r\n**Manual Initialization**\r\n\r\nBefore doing anything else, we have to add the Mockito dependency.\r\n\r\n    dependencies {\r\n        testImplementation(&#39;org.mockito:mockito-core:3.7.7&#39;)\r\n    }\r\n\r\nThe MockitoAnnotations.openMocks(this) call tells Mockito to scan this test class instance for any fields annotated with the @Mock annotation and initialize those fields as mocks.\r\n\r\n**Pros:**\r\n\r\nEasy to create mocks\r\nVery readable\r\n\r\n**Cons:**\r\n\r\nDoes not validate framework usage or detect incorrect stubbing\r\nAutomatic Mock Injection\r\nWe can also tell Mockito to inject mocks automatically to a field annotated with @InjectMocks.\r\n\r\nWhen **MockitoAnnotations.openMocks()** is called, Mockito will:\r\n\r\nCreate mocks for fields annotated with the @Mock annotation\r\nCreate an instance of the field annotated with @InjectMocks and try to inject the mocks into it\r\nUsing @InjectMocks is the same as we did when instantiating an instance manually, but now automatic.\r\n\r\n    public class MockitoInjectMocksTests {\r\n    \r\n        @Mock\r\n        private OrderRepository orderRepository;\r\n        private AutoCloseable closeable;\r\n        @InjectMocks\r\n        private OrderService orderService;\r\n    \r\n        @BeforeEach\r\n        void initService() {\r\n            closeable = MockitoAnnotations.openMocks(this);\r\n        }\r\n    \r\n        @AfterEach\r\n        void closeService() throws Exception {\r\n            closeable.close();\r\n        }\r\n    \r\n        @Test\r\n        void createOrderSetsTheCreationDate() {\r\n            Order order = new Order();\r\n            when(orderRepository.save(any(Order.class))).then(returnsFirstArg());\r\n    \r\n            Order savedOrder = orderService.create(order);\r\n    \r\n            assertNotNull(savedOrder.getCreationDate());\r\n        }\r\n    }\r\n\r\nMockito will first try to inject mocks by constructor injection, followed by setter injection, or field injection.\r\n\r\n**Pros:**\r\n\r\nEasy to inject mocks\r\n\r\n**Cons:**\r\n\r\nDoesn’t enforce usage of constructor injection","title":"How to fix this error: java.lang.NoSuchMethodError: &#39;java.lang.AutoCloseable org.mockito.MockitoAnnotations.openMocks(java.lang.Object)&#39;","body":"<p>After facing the same issue. Please look log trace.</p>\n<pre><code>java.lang.NoSuchMethodError: org.mockito.MockitoAnnotations.openMocks(Ljava/lang/Object;)Ljava/lang/AutoCloseable;\n    at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.initMocks(MockitoTestExecutionListener.java:83)\n</code></pre>\n<p><strong>Finally got a solution:</strong></p>\n<p>In <strong>Mockito version 2</strong> there is a <strong>MockitoAnnotations.initMock()</strong> method, which is deprecated and replaced with MockitoAnnotations.openMocks() in <strong>Mockito JUnit 5 version 3</strong>. The <strong>MockitoAnnotations.openMocks()</strong> method returns an instance of AutoClosable which can be used to close the resource after the test.</p>\n<p><strong>Manual Initialization</strong></p>\n<p>Before doing anything else, we have to add the Mockito dependency.</p>\n<pre><code>dependencies {\n    testImplementation('org.mockito:mockito-core:3.7.7')\n}\n</code></pre>\n<p>The MockitoAnnotations.openMocks(this) call tells Mockito to scan this test class instance for any fields annotated with the @Mock annotation and initialize those fields as mocks.</p>\n<p><strong>Pros:</strong></p>\n<p>Easy to create mocks\nVery readable</p>\n<p><strong>Cons:</strong></p>\n<p>Does not validate framework usage or detect incorrect stubbing\nAutomatic Mock Injection\nWe can also tell Mockito to inject mocks automatically to a field annotated with @InjectMocks.</p>\n<p>When <strong>MockitoAnnotations.openMocks()</strong> is called, Mockito will:</p>\n<p>Create mocks for fields annotated with the @Mock annotation\nCreate an instance of the field annotated with @InjectMocks and try to inject the mocks into it\nUsing @InjectMocks is the same as we did when instantiating an instance manually, but now automatic.</p>\n<pre><code>public class MockitoInjectMocksTests {\n\n    @Mock\n    private OrderRepository orderRepository;\n    private AutoCloseable closeable;\n    @InjectMocks\n    private OrderService orderService;\n\n    @BeforeEach\n    void initService() {\n        closeable = MockitoAnnotations.openMocks(this);\n    }\n\n    @AfterEach\n    void closeService() throws Exception {\n        closeable.close();\n    }\n\n    @Test\n    void createOrderSetsTheCreationDate() {\n        Order order = new Order();\n        when(orderRepository.save(any(Order.class))).then(returnsFirstArg());\n\n        Order savedOrder = orderService.create(order);\n\n        assertNotNull(savedOrder.getCreationDate());\n    }\n}\n</code></pre>\n<p>Mockito will first try to inject mocks by constructor injection, followed by setter injection, or field injection.</p>\n<p><strong>Pros:</strong></p>\n<p>Easy to inject mocks</p>\n<p><strong>Cons:</strong></p>\n<p>Doesn’t enforce usage of constructor injection</p>\n"},{"tags":[],"owner":{"account_id":1756015,"reputation":11409,"user_id":1604048,"accept_rate":71,"display_name":"Murat Yıldız"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1664968266,"creation_date":1632846812,"answer_id":69365405,"question_id":67432118,"body_markdown":"For me, none of the workarounds mentioned here worked. \r\n&gt; Updating `mockito-core` from `3.3.3` to `3.4.3` fixed the problem.\r\n\r\nI think it is caused by the fact that the `MockitoAnnotations.initMock()` method is deprecated and has been replaced by `MockitoAnnotations.openMocks()` in Mockito JUnit 5 version 3. \r\n\r\nOn the other hand, it may be worthy to check the local Maven Repository and delete unnecessary jars that may cause conflict. But when applying this step, beware not to manually delete installed ones (or do a backup before the operation).","title":"How to fix this error: java.lang.NoSuchMethodError: &#39;java.lang.AutoCloseable org.mockito.MockitoAnnotations.openMocks(java.lang.Object)&#39;","body":"<p>For me, none of the workarounds mentioned here worked.</p>\n<blockquote>\n<p>Updating <code>mockito-core</code> from <code>3.3.3</code> to <code>3.4.3</code> fixed the problem.</p>\n</blockquote>\n<p>I think it is caused by the fact that the <code>MockitoAnnotations.initMock()</code> method is deprecated and has been replaced by <code>MockitoAnnotations.openMocks()</code> in Mockito JUnit 5 version 3.</p>\n<p>On the other hand, it may be worthy to check the local Maven Repository and delete unnecessary jars that may cause conflict. But when applying this step, beware not to manually delete installed ones (or do a backup before the operation).</p>\n"},{"tags":[],"owner":{"account_id":12832226,"reputation":11,"user_id":9283018,"display_name":"Eduard"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635341840,"creation_date":1635319470,"answer_id":69734411,"question_id":67432118,"body_markdown":"I&#39;ve faced the same problem **I&#39;ve fixed it by using \r\nMockito.mock() method instead of @Mock.**\r\n\r\nI use spring-boot-starter-test v2.4.8 and mockito-core v2.21.0\r\n\r\nIn my case the error occurred because in initMocks method from MockitoTestExecutinListener class looks like this:\r\n\r\n\r\n    private void initMocks(TestContext testContext) {\r\n\t\tif (hasMockitoAnnotations(testContext)) {\r\n\t\t\ttestContext.setAttribute(MOCKS_ATTRIBUTE_NAME, MockitoAnnotations.openMocks(testContext.getTestInstance()));\r\n\t\t}\r\n\t}\r\n\r\nbut in my case MockitoAnnotations have only initMocks() method, so the error.\r\n\r\nIn this case we need to make sure that hasMockitoAnnotations(testContext) is false.\r\nIn order to use @Mock I need to enable Mockito annotations, but I do not want this, therefore I used Mockito.mock().","title":"How to fix this error: java.lang.NoSuchMethodError: &#39;java.lang.AutoCloseable org.mockito.MockitoAnnotations.openMocks(java.lang.Object)&#39;","body":"<p>I've faced the same problem <strong>I've fixed it by using\nMockito.mock() method instead of @Mock.</strong></p>\n<p>I use spring-boot-starter-test v2.4.8 and mockito-core v2.21.0</p>\n<p>In my case the error occurred because in initMocks method from MockitoTestExecutinListener class looks like this:</p>\n<pre><code>private void initMocks(TestContext testContext) {\n    if (hasMockitoAnnotations(testContext)) {\n        testContext.setAttribute(MOCKS_ATTRIBUTE_NAME, MockitoAnnotations.openMocks(testContext.getTestInstance()));\n    }\n}\n</code></pre>\n<p>but in my case MockitoAnnotations have only initMocks() method, so the error.</p>\n<p>In this case we need to make sure that hasMockitoAnnotations(testContext) is false.\nIn order to use @Mock I need to enable Mockito annotations, but I do not want this, therefore I used Mockito.mock().</p>\n"},{"tags":[],"owner":{"account_id":1211289,"reputation":689,"user_id":1179766,"accept_rate":43,"display_name":"Debadatta"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683282402,"creation_date":1683282402,"answer_id":76181221,"question_id":67432118,"body_markdown":"This has to be related to the conflicting Mockito 4 jar in your classpath. Check your Mockito dependencies by using the below command and make sure that you are not using any overriding Mockito 4 jars. \r\n\r\n     mvn dependency:tree -Dincludes=:mockito-*","title":"How to fix this error: java.lang.NoSuchMethodError: &#39;java.lang.AutoCloseable org.mockito.MockitoAnnotations.openMocks(java.lang.Object)&#39;","body":"<p>This has to be related to the conflicting Mockito 4 jar in your classpath. Check your Mockito dependencies by using the below command and make sure that you are not using any overriding Mockito 4 jars.</p>\n<pre><code> mvn dependency:tree -Dincludes=:mockito-*\n</code></pre>\n"}],"owner":{"account_id":20838974,"reputation":383,"user_id":15306182,"display_name":"LardinoisJosse"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":34358,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"accepted_answer_id":68147118,"answer_count":5,"score":13,"last_activity_date":1683282402,"creation_date":1620378809,"question_id":67432118,"body_markdown":"So I am getting this error in my Spring boot Gradle project: \r\n\r\n    &#39;java.lang.AutoCloseable org.mockito.MockitoAnnotations.openMocks(java.lang.Object)&#39;\r\n        java.lang.NoSuchMethodError: &#39;java.lang.AutoCloseable org.mockito.MockitoAnnotations.openMocks(java.lang.Object)&#39;\r\n\r\nAnd I cannot seem to fix it. I have searched for the answer but the only one I get is removing mockito-all from your dependencies, but I do not have that in my gradle.build file in the first place.\r\n\r\n**My build.gradle file:**\r\n\r\n    plugins {\r\n    \tid &#39;org.springframework.boot&#39; version &#39;2.4.2&#39;\r\n    \tid &#39;io.spring.dependency-management&#39; version &#39;1.0.11.RELEASE&#39;\r\n    \tid &#39;java&#39;\r\n    \tid &quot;org.sonarqube&quot; version &quot;3.0&quot;\r\n    \tid &#39;jacoco&#39;\r\n    }\r\n    \r\n    group = &#39;com.example&#39;\r\n    version = &#39;0.0.1-SNAPSHOT&#39;\r\n    sourceCompatibility = &#39;15&#39;\r\n    \r\n    configurations {\r\n    \tcompileOnly {\r\n    \t\textendsFrom annotationProcessor\r\n    \t}\r\n    }\r\n    \r\n    repositories {\r\n    \tmavenCentral()\r\n    }\r\n    \r\n    \r\n    dependencies {\r\n    \tcompile &#39;org.apache.httpcomponents:httpcore:4.4.1&#39;\r\n    \tcompile &#39;org.apache.httpcomponents:httpclient:4.5&#39;\r\n    \timplementation(&#39;io.jsonwebtoken:jjwt:0.2&#39;)\r\n    \timplementation &#39;org.springframework.boot:spring-boot-starter-mail&#39;\r\n    \timplementation &#39;org.springframework.boot:spring-boot-starter-security&#39;\r\n    \timplementation &#39;org.springframework.boot:spring-boot-starter-data-jpa&#39;\r\n    \timplementation &#39;org.springframework.boot:spring-boot-starter-web&#39;\r\n    \tcompile &#39;junit:junit:4.12&#39;\r\n    \timplementation &#39;org.modelmapper:modelmapper:2.4.1&#39;\r\n    \tcompileOnly &#39;org.projectlombok:lombok&#39;\r\n    \truntimeOnly &#39;mysql:mysql-connector-java&#39;\r\n    \tannotationProcessor &#39;org.projectlombok:lombok&#39;\r\n    \ttestImplementation &#39;org.springframework.boot:spring-boot-starter-test&#39;\r\n    \timplementation &#39;org.eclipse.jgit:org.eclipse.jgit:5.4.2.201908231537-r&#39;\r\n    \t/**\r\n    \t * JUnit jupiter with mockito.\r\n    \t */\r\n    \ttestCompile group: &#39;org.mockito&#39;, name: &#39;mockito-junit-jupiter&#39;, version: &#39;2.19.0&#39;\r\n    \r\n    \ttestCompile group: &#39;org.mockito&#39;, name: &#39;mockito-core&#39;, version: &#39;2.19.0&#39;\r\n    \ttestCompile group: &#39;org.springframework.security&#39;, name: &#39;spring-security-test&#39;, version: &#39;5.1.6.RELEASE&#39;\r\n    }\r\n    \r\n    sonarqube{\r\n    \tproperties{\r\n    \t\tproperty &#39;sonarjava.source&#39;, &#39;1.8&#39;\r\n    \t\tproperty &#39;sonar.java.coveragePlugin&#39;, &#39;jacoco&#39;\r\n    \t\tproperty &#39;sonar.jacoco.reportPaths&#39;, &#39;build/reports/jacoco/test/jacocoTestReport.xml&#39;\r\n    \t}\r\n    }\r\n    test {\r\n    \tuseJUnitPlatform()\r\n    }\r\n\r\n\r\nI can&#39;t seem to find a solution so I came to here, where some code god maybe can help me fixing my problem. \r\n\r\nThe file where I get this error on is a test class:\r\n\r\n\r\n**The test class:**\r\n\r\n    package com.example.demo.Service;\r\n    \r\n    import com.example.demo.DTO.PartyLeaderDto;\r\n    import com.example.demo.Model.PartyLeader;\r\n    import com.example.demo.Repository.PartyLeaderRepository;\r\n    import org.junit.Assert;\r\n    import org.junit.Rule;\r\n    import org.junit.jupiter.api.Test;\r\n    import org.mockito.InjectMocks;\r\n    import org.mockito.Mock;\r\n    import static org.mockito.Mockito.verify;\r\n    import org.mockito.junit.MockitoJUnit;\r\n    import org.mockito.junit.MockitoRule;\r\n    import org.modelmapper.ModelMapper;\r\n    import org.springframework.boot.test.autoconfigure.web.servlet.AutoConfigureMockMvc;\r\n    import org.springframework.boot.test.context.SpringBootTest;\r\n    \r\n    import java.util.Optional;\r\n    \r\n    import static org.mockito.Mockito.when;\r\n    import static org.mockito.ArgumentMatchers.argThat;\r\n    \r\n    @SpringBootTest\r\n    @AutoConfigureMockMvc\r\n    public class PartyLeaderServiceMockTest {\r\n        @Rule\r\n        public MockitoRule initRule = MockitoJUnit.rule();\r\n    \r\n        @Mock\r\n        private PartyLeaderRepository partyLeaderRepository;\r\n    \r\n        @Mock\r\n        private ModelMapper modelMapper;\r\n    \r\n        @InjectMocks\r\n        private PartyLeaderService partyLeaderService; // this is like calling new PartyLeaderService(partyLeaderRepository, modelMapper);\r\n    \r\n    \r\n        @Test\r\n        void whenSavePartyLeader_thenCorrectPartyLeaderSaved() {\r\n            // given\r\n            var input = PartyLeaderDto.builder()\r\n                    .name(&quot;Josse&quot;)\r\n                    .apperance(&quot;Link of image&quot;)\r\n                    .build();\r\n    \r\n            // when\r\n            partyLeaderService.savePartyLeader(input);\r\n    \r\n    \r\n            // then\r\n            verify(partyLeaderRepository).save(argThat(entity -&gt;\r\n                    entity.getName().equals(&quot;Josse&quot;)\r\n                            &amp;&amp; entity.getApperance().equals(&quot;Link of image&quot;)));\r\n        }\r\n    \r\n    \r\n        @Test\r\n        void whenGetPartyLeader_ShouldReturnCorrectLeaderData() {\r\n            // given\r\n            var partyLeaderEntity = PartyLeader.builder()\r\n                    .name(&quot;Josse&quot;)\r\n                    .apperance(&quot;Link of image&quot;)\r\n                    .build();\r\n            var partyLeaderDto = PartyLeaderDto.builder()\r\n                    .name(&quot;Josse&quot;)\r\n                    .apperance(&quot;Link of image&quot;)\r\n                    .build();\r\n            when(partyLeaderRepository.findById(3)).thenReturn(Optional.of(partyLeaderEntity));\r\n            when(modelMapper.map(partyLeaderEntity, PartyLeaderDto.class)).thenReturn(partyLeaderDto);\r\n    \r\n            // when\r\n            var result = partyLeaderService.getPartyLeader(3);\r\n    \r\n            // then\r\n            Assert.assertEquals(result, partyLeaderDto);\r\n        }\r\n    }\r\n\r\nI get the same error on both of my tests.\r\n\r\nCan anyone help me? Thanks in advance!\r\n","title":"How to fix this error: java.lang.NoSuchMethodError: &#39;java.lang.AutoCloseable org.mockito.MockitoAnnotations.openMocks(java.lang.Object)&#39;","body":"<p>So I am getting this error in my Spring boot Gradle project:</p>\n<pre><code>'java.lang.AutoCloseable org.mockito.MockitoAnnotations.openMocks(java.lang.Object)'\n    java.lang.NoSuchMethodError: 'java.lang.AutoCloseable org.mockito.MockitoAnnotations.openMocks(java.lang.Object)'\n</code></pre>\n<p>And I cannot seem to fix it. I have searched for the answer but the only one I get is removing mockito-all from your dependencies, but I do not have that in my gradle.build file in the first place.</p>\n<p><strong>My build.gradle file:</strong></p>\n<pre><code>plugins {\n    id 'org.springframework.boot' version '2.4.2'\n    id 'io.spring.dependency-management' version '1.0.11.RELEASE'\n    id 'java'\n    id &quot;org.sonarqube&quot; version &quot;3.0&quot;\n    id 'jacoco'\n}\n\ngroup = 'com.example'\nversion = '0.0.1-SNAPSHOT'\nsourceCompatibility = '15'\n\nconfigurations {\n    compileOnly {\n        extendsFrom annotationProcessor\n    }\n}\n\nrepositories {\n    mavenCentral()\n}\n\n\ndependencies {\n    compile 'org.apache.httpcomponents:httpcore:4.4.1'\n    compile 'org.apache.httpcomponents:httpclient:4.5'\n    implementation('io.jsonwebtoken:jjwt:0.2')\n    implementation 'org.springframework.boot:spring-boot-starter-mail'\n    implementation 'org.springframework.boot:spring-boot-starter-security'\n    implementation 'org.springframework.boot:spring-boot-starter-data-jpa'\n    implementation 'org.springframework.boot:spring-boot-starter-web'\n    compile 'junit:junit:4.12'\n    implementation 'org.modelmapper:modelmapper:2.4.1'\n    compileOnly 'org.projectlombok:lombok'\n    runtimeOnly 'mysql:mysql-connector-java'\n    annotationProcessor 'org.projectlombok:lombok'\n    testImplementation 'org.springframework.boot:spring-boot-starter-test'\n    implementation 'org.eclipse.jgit:org.eclipse.jgit:5.4.2.201908231537-r'\n    /**\n     * JUnit jupiter with mockito.\n     */\n    testCompile group: 'org.mockito', name: 'mockito-junit-jupiter', version: '2.19.0'\n\n    testCompile group: 'org.mockito', name: 'mockito-core', version: '2.19.0'\n    testCompile group: 'org.springframework.security', name: 'spring-security-test', version: '5.1.6.RELEASE'\n}\n\nsonarqube{\n    properties{\n        property 'sonarjava.source', '1.8'\n        property 'sonar.java.coveragePlugin', 'jacoco'\n        property 'sonar.jacoco.reportPaths', 'build/reports/jacoco/test/jacocoTestReport.xml'\n    }\n}\ntest {\n    useJUnitPlatform()\n}\n</code></pre>\n<p>I can't seem to find a solution so I came to here, where some code god maybe can help me fixing my problem.</p>\n<p>The file where I get this error on is a test class:</p>\n<p><strong>The test class:</strong></p>\n<pre><code>package com.example.demo.Service;\n\nimport com.example.demo.DTO.PartyLeaderDto;\nimport com.example.demo.Model.PartyLeader;\nimport com.example.demo.Repository.PartyLeaderRepository;\nimport org.junit.Assert;\nimport org.junit.Rule;\nimport org.junit.jupiter.api.Test;\nimport org.mockito.InjectMocks;\nimport org.mockito.Mock;\nimport static org.mockito.Mockito.verify;\nimport org.mockito.junit.MockitoJUnit;\nimport org.mockito.junit.MockitoRule;\nimport org.modelmapper.ModelMapper;\nimport org.springframework.boot.test.autoconfigure.web.servlet.AutoConfigureMockMvc;\nimport org.springframework.boot.test.context.SpringBootTest;\n\nimport java.util.Optional;\n\nimport static org.mockito.Mockito.when;\nimport static org.mockito.ArgumentMatchers.argThat;\n\n@SpringBootTest\n@AutoConfigureMockMvc\npublic class PartyLeaderServiceMockTest {\n    @Rule\n    public MockitoRule initRule = MockitoJUnit.rule();\n\n    @Mock\n    private PartyLeaderRepository partyLeaderRepository;\n\n    @Mock\n    private ModelMapper modelMapper;\n\n    @InjectMocks\n    private PartyLeaderService partyLeaderService; // this is like calling new PartyLeaderService(partyLeaderRepository, modelMapper);\n\n\n    @Test\n    void whenSavePartyLeader_thenCorrectPartyLeaderSaved() {\n        // given\n        var input = PartyLeaderDto.builder()\n                .name(&quot;Josse&quot;)\n                .apperance(&quot;Link of image&quot;)\n                .build();\n\n        // when\n        partyLeaderService.savePartyLeader(input);\n\n\n        // then\n        verify(partyLeaderRepository).save(argThat(entity -&gt;\n                entity.getName().equals(&quot;Josse&quot;)\n                        &amp;&amp; entity.getApperance().equals(&quot;Link of image&quot;)));\n    }\n\n\n    @Test\n    void whenGetPartyLeader_ShouldReturnCorrectLeaderData() {\n        // given\n        var partyLeaderEntity = PartyLeader.builder()\n                .name(&quot;Josse&quot;)\n                .apperance(&quot;Link of image&quot;)\n                .build();\n        var partyLeaderDto = PartyLeaderDto.builder()\n                .name(&quot;Josse&quot;)\n                .apperance(&quot;Link of image&quot;)\n                .build();\n        when(partyLeaderRepository.findById(3)).thenReturn(Optional.of(partyLeaderEntity));\n        when(modelMapper.map(partyLeaderEntity, PartyLeaderDto.class)).thenReturn(partyLeaderDto);\n\n        // when\n        var result = partyLeaderService.getPartyLeader(3);\n\n        // then\n        Assert.assertEquals(result, partyLeaderDto);\n    }\n}\n</code></pre>\n<p>I get the same error on both of my tests.</p>\n<p>Can anyone help me? Thanks in advance!</p>\n"},{"tags":["java","jar","runtime","noclassdeffounderror"],"comments":[{"owner":{"account_id":537054,"reputation":32561,"user_id":905762,"accept_rate":77,"display_name":"John B"},"score":0,"creation_date":1315340098,"post_id":7325579,"comment_id":8832174,"body_markdown":"Is the appropriate directory structure in your jar to match the class package?","body":"Is the appropriate directory structure in your jar to match the class package?"},{"owner":{"account_id":229892,"reputation":37886,"user_id":493161,"accept_rate":90,"display_name":"jcomeau_ictx"},"score":0,"creation_date":1315340116,"post_id":7325579,"comment_id":8832178,"body_markdown":"need to see some source, many things can cause this. for example, a &#39;package&#39; statement but the file not actually residing in the corresponding path","body":"need to see some source, many things can cause this. for example, a &#39;package&#39; statement but the file not actually residing in the corresponding path"},{"owner":{"account_id":22644,"reputation":14098,"user_id":56044,"accept_rate":71,"display_name":"Michael Brewer-Davis"},"score":4,"creation_date":1315340152,"post_id":7325579,"comment_id":8832198,"body_markdown":"One cause is an exception during initialization--is there any other error output?","body":"One cause is an exception during initialization--is there any other error output?"}],"answers":[{"comments":[{"owner":{"account_id":65386,"reputation":39895,"user_id":192444,"accept_rate":100,"display_name":"John Vint"},"score":1,"creation_date":1315342046,"post_id":7325814,"comment_id":8832727,"body_markdown":"one clarifaction is that even though NoClassDefFoundError does not imply a ClassNotFoundException, it is still a possible cause of the NoClassDefFoundError.","body":"one clarifaction is that even though NoClassDefFoundError does not imply a ClassNotFoundException, it is still a possible cause of the NoClassDefFoundError."},{"owner":{"account_id":277337,"reputation":10612,"user_id":571271,"accept_rate":100,"display_name":"jeha"},"score":1,"creation_date":1315342459,"post_id":7325814,"comment_id":8832850,"body_markdown":"buf if you had a ClassNotFoundException then the ClassLoader would / could never try load the class, right?","body":"buf if you had a ClassNotFoundException then the ClassLoader would / could never try load the class, right?"},{"owner":{"account_id":65386,"reputation":39895,"user_id":192444,"accept_rate":100,"display_name":"John Vint"},"score":4,"creation_date":1315342577,"post_id":7325814,"comment_id":8832873,"body_markdown":"A class can be loading another class that was not found.  The cause in that instance is still a ClassNotFoundException","body":"A class can be loading another class that was not found.  The cause in that instance is still a ClassNotFoundException"},{"owner":{"account_id":65386,"reputation":39895,"user_id":192444,"accept_rate":100,"display_name":"John Vint"},"score":1,"creation_date":1315342662,"post_id":7325814,"comment_id":8832897,"body_markdown":"I should&#39;ve clarified, I just meant an exception.getCause()","body":"I should&#39;ve clarified, I just meant an exception.getCause()"},{"owner":{"account_id":964481,"reputation":10573,"user_id":988174,"accept_rate":55,"display_name":"Robert"},"score":0,"creation_date":1460589469,"post_id":7325814,"comment_id":60819179,"body_markdown":"@nterry what was your issue??!!","body":"@nterry what was your issue??!!"},{"owner":{"account_id":1348599,"reputation":1852,"user_id":1288852,"accept_rate":93,"display_name":"Nicholas Terry"},"score":0,"creation_date":1460593289,"post_id":7325814,"comment_id":60820313,"body_markdown":"@Robert i think it was a set of conflicting dependencies. Using a maven exclusion, i was able to get the right version loaded","body":"@Robert i think it was a set of conflicting dependencies. Using a maven exclusion, i was able to get the right version loaded"},{"owner":{"account_id":2965471,"reputation":923,"user_id":2518705,"display_name":"RAM237"},"score":1,"creation_date":1586816736,"post_id":7325814,"comment_id":108262859,"body_markdown":"This one was really helpful here, since I&#39;ve spent about 20 mins verifying the JAR (the reported class belongs to) is included. Once I realized I&#39;m looking into wrong direction, I easily understood that likely some annotation class is missing and voila, the reported one was declared as `@Stateless`, so I just added the corresponding dependency and was able to proceed further. Thanks for the tip!","body":"This one was really helpful here, since I&#39;ve spent about 20 mins verifying the JAR (the reported class belongs to) is included. Once I realized I&#39;m looking into wrong direction, I easily understood that likely some annotation class is missing and voila, the reported one was declared as <code>@Stateless</code>, so I just added the corresponding dependency and was able to proceed further. Thanks for the tip!"}],"tags":[],"owner":{"account_id":277337,"reputation":10612,"user_id":571271,"accept_rate":100,"display_name":"jeha"},"comment_count":7,"down_vote_count":1,"up_vote_count":163,"is_accepted":false,"score":162,"last_activity_date":1315342090,"creation_date":1315341303,"answer_id":7325814,"question_id":7325579,"body_markdown":"You are getting a `java.lang.NoClassDefFoundError` which does NOT mean that your class is missing (in that case you&#39;d get a `java.lang.ClassNotFoundException`). The ClassLoader ran into an error while reading the class definition when trying to read the class.\r\n\r\nPut a try/catch inside your static initializer and look at the exception. If you read some files there and it differs from your local environment it&#39;s very likely the cause of the problem (maybe file can&#39;t be found, no permissions etc.).","title":"java.lang.NoClassDefFoundError: Could not initialize class XXX","body":"<p>You are getting a <code>java.lang.NoClassDefFoundError</code> which does NOT mean that your class is missing (in that case you'd get a <code>java.lang.ClassNotFoundException</code>). The ClassLoader ran into an error while reading the class definition when trying to read the class.</p>\n\n<p>Put a try/catch inside your static initializer and look at the exception. If you read some files there and it differs from your local environment it's very likely the cause of the problem (maybe file can't be found, no permissions etc.).</p>\n"},{"comments":[{"owner":{"account_id":7465996,"reputation":1866,"user_id":5675550,"accept_rate":77,"display_name":"viper"},"score":0,"creation_date":1470716292,"post_id":7325829,"comment_id":65049274,"body_markdown":"I have been facing the same problem time and again. I am sure that it is because of the `static` issue. What needs to be done to resolve the problem?","body":"I have been facing the same problem time and again. I am sure that it is because of the <code>static</code> issue. What needs to be done to resolve the problem?"},{"owner":{"account_id":65386,"reputation":39895,"user_id":192444,"accept_rate":100,"display_name":"John Vint"},"score":3,"creation_date":1470742253,"post_id":7325829,"comment_id":65063316,"body_markdown":"You will need to identify what exception is being thrown from the `static` block. To debug it put a `try/catch(Exception e)` around the entire block and log the exception. You&#39;ll have to fix that exception. Typically the exception will be logged but may be hard to find since it&#39;s being logged during classloading which may happen very early","body":"You will need to identify what exception is being thrown from the <code>static</code> block. To debug it put a <code>try&#47;catch(Exception e)</code> around the entire block and log the exception. You&#39;ll have to fix that exception. Typically the exception will be logged but may be hard to find since it&#39;s being logged during classloading which may happen very early"},{"owner":{"account_id":7465996,"reputation":1866,"user_id":5675550,"accept_rate":77,"display_name":"viper"},"score":0,"creation_date":1470743856,"post_id":7325829,"comment_id":65064440,"body_markdown":"Yes I kept the code in `try catch` block and it said `Failed to initialize ClassA`. I think it is the problem of `JVM`. I restarted my system and then everything worked fine. How do I resolve this problem in future without restarting my system and solve the problem with a simple solu4tion.","body":"Yes I kept the code in <code>try catch</code> block and it said <code>Failed to initialize ClassA</code>. I think it is the problem of <code>JVM</code>. I restarted my system and then everything worked fine. How do I resolve this problem in future without restarting my system and solve the problem with a simple solu4tion."},{"owner":{"account_id":65386,"reputation":39895,"user_id":192444,"accept_rate":100,"display_name":"John Vint"},"score":0,"creation_date":1470744535,"post_id":7325829,"comment_id":65064905,"body_markdown":"Failed to initialize ClassA is a side effect from something else. You will want to look at the `cause` if available. A `NoClassDefFoundError` is always associated to another error, you will need to look for it in the logs or try to log it more appropriately (like force the logging into a new file on the file system)","body":"Failed to initialize ClassA is a side effect from something else. You will want to look at the <code>cause</code> if available. A <code>NoClassDefFoundError</code> is always associated to another error, you will need to look for it in the logs or try to log it more appropriately (like force the logging into a new file on the file system)"},{"owner":{"account_id":6446680,"reputation":828,"user_id":4994985,"accept_rate":80,"display_name":"Maarten"},"score":0,"creation_date":1542193962,"post_id":7325829,"comment_id":93478468,"body_markdown":"It would be more easily traceable if Java would throw an error CouldNotInitializeStaticPartOfClassError or something. Then we as developer would know where to look.","body":"It would be more easily traceable if Java would throw an error CouldNotInitializeStaticPartOfClassError or something. Then we as developer would know where to look."},{"owner":{"account_id":4641623,"reputation":8841,"user_id":3761297,"accept_rate":94,"display_name":"committedandroider"},"score":0,"creation_date":1570125737,"post_id":7325829,"comment_id":102824296,"body_markdown":"@Maarten Good point. This is what I&#39;ve noticed of error logging as a whole that it could be more specific and point the developer at what the actual issue is","body":"@Maarten Good point. This is what I&#39;ve noticed of error logging as a whole that it could be more specific and point the developer at what the actual issue is"},{"owner":{"account_id":260039,"reputation":6377,"user_id":543362,"accept_rate":82,"display_name":"chance"},"score":0,"creation_date":1605265578,"post_id":7325829,"comment_id":114604154,"body_markdown":"I have the same issue. Some properties are read in the static initializer block. One property that is newly added into the properties file causes this problem. After restart the application server the problem is disappeared. I think the properties file is loaded only during the start of the application server.","body":"I have the same issue. Some properties are read in the static initializer block. One property that is newly added into the properties file causes this problem. After restart the application server the problem is disappeared. I think the properties file is loaded only during the start of the application server."},{"owner":{"account_id":65386,"reputation":39895,"user_id":192444,"accept_rate":100,"display_name":"John Vint"},"score":1,"creation_date":1605269445,"post_id":7325829,"comment_id":114605542,"body_markdown":"@chance That&#39;s right. The static tantalizer is only executed once per Java classloading which for most applications will be once per application run. \n\nYou would need something like a [FileChangedReloadingStrategy](https://commons.apache.org/proper/commons-configuration/javadocs/v1.10/apidocs/org/apache/commons/configuration/reloading/FileChangedReloadingStrategy.html). \n\nJava also introduced a [WatchService](https://docs.oracle.com/javase/7/docs/api/java/nio/file/WatchService.html)","body":"@chance That&#39;s right. The static tantalizer is only executed once per Java classloading which for most applications will be once per application run.   You would need something like a <a href=\"https://commons.apache.org/proper/commons-configuration/javadocs/v1.10/apidocs/org/apache/commons/configuration/reloading/FileChangedReloadingStrategy.html\" rel=\"nofollow noreferrer\">FileChangedReloadingStrategy</a>.   Java also introduced a <a href=\"https://docs.oracle.com/javase/7/docs/api/java/nio/file/WatchService.html\" rel=\"nofollow noreferrer\">WatchService</a>"},{"owner":{"account_id":3009581,"reputation":891,"user_id":2553382,"accept_rate":61,"display_name":"Nagaraj Vittal"},"score":2,"creation_date":1635346085,"post_id":7325829,"comment_id":123274147,"body_markdown":"I was getting the same issue due to mismatch with the properties file key name and used in my code. After fixing the properties file problem got resolved","body":"I was getting the same issue due to mismatch with the properties file key name and used in my code. After fixing the properties file problem got resolved"},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1657487904,"post_id":7325829,"comment_id":128815917,"body_markdown":"If the code in the `static` block doesn&#39;t swallow the exception (if it did, then there should be no problem loading the class), shouldn&#39;t you get an `ExceptionInInitializerError`? What if you&#39;re getting this `NoClassDefFoundError` but there&#39;s no `ExceptionInInitializerError` nor `ClassNotFoundException` in the stack trace?","body":"If the code in the <code>static</code> block doesn&#39;t swallow the exception (if it did, then there should be no problem loading the class), shouldn&#39;t you get an <code>ExceptionInInitializerError</code>? What if you&#39;re getting this <code>NoClassDefFoundError</code> but there&#39;s no <code>ExceptionInInitializerError</code> nor <code>ClassNotFoundException</code> in the stack trace?"},{"owner":{"account_id":16479661,"reputation":101,"user_id":11906736,"display_name":"D.Raluca"},"score":0,"creation_date":1684821822,"post_id":7325829,"comment_id":134568756,"body_markdown":"I had the same problem. Inside the static block I was trying to add elements to a null map","body":"I had the same problem. Inside the static block I was trying to add elements to a null map"}],"tags":[],"owner":{"account_id":65386,"reputation":39895,"user_id":192444,"accept_rate":100,"display_name":"John Vint"},"comment_count":11,"down_vote_count":1,"up_vote_count":285,"is_accepted":true,"score":284,"last_activity_date":1518415160,"creation_date":1315341358,"answer_id":7325829,"question_id":7325579,"body_markdown":"My best bet is there is an issue here:\r\n\r\n\r\n    static {\r\n        //code for loading properties from file\r\n    }\r\n\r\n\r\nIt would appear some uncaught exception occurred and propagated up to the actual ClassLoader attempting to load the class.  We would need a stacktrace to confirm this though.\r\n\r\nEither that or it occurred when creating `PropHolder.prop` static variable.","title":"java.lang.NoClassDefFoundError: Could not initialize class XXX","body":"<p>My best bet is there is an issue here:</p>\n\n<pre><code>static {\n    //code for loading properties from file\n}\n</code></pre>\n\n<p>It would appear some uncaught exception occurred and propagated up to the actual ClassLoader attempting to load the class.  We would need a stacktrace to confirm this though.</p>\n\n<p>Either that or it occurred when creating <code>PropHolder.prop</code> static variable.</p>\n"},{"comments":[{"owner":{"account_id":2976209,"reputation":1859,"user_id":2527204,"accept_rate":27,"display_name":"Marlon"},"score":1,"creation_date":1570781523,"post_id":10667050,"comment_id":103030117,"body_markdown":"How to do this in kotlin?","body":"How to do this in kotlin?"},{"owner":{"account_id":1540148,"reputation":1578,"user_id":1435014,"display_name":"Abhishek"},"score":0,"creation_date":1590490034,"post_id":10667050,"comment_id":109692334,"body_markdown":"Thanks for giving the hint. In my case I was getting NPE on static line initialization.","body":"Thanks for giving the hint. In my case I was getting NPE on static line initialization."}],"tags":[],"owner":{"account_id":994835,"reputation":1054,"user_id":1011062,"accept_rate":67,"display_name":"Mark Hansen"},"comment_count":2,"down_vote_count":1,"up_vote_count":42,"is_accepted":false,"score":41,"last_activity_date":1401936530,"creation_date":1337445516,"answer_id":10667050,"question_id":7325579,"body_markdown":"NoClassDefFoundError doesn&#39;t give much of a clue as to what went wrong inside the static block.  It is good practice to always have a block like this inside of static { ... } initialization code:\r\n\r\n    static {\r\n      try {\r\n\r\n        ... your init code here\r\n\r\n      } catch (Throwable t) {\r\n        LOG.error(&quot;Failure during static initialization&quot;, t);\r\n        throw t;\r\n      }\r\n    }","title":"java.lang.NoClassDefFoundError: Could not initialize class XXX","body":"<p>NoClassDefFoundError doesn't give much of a clue as to what went wrong inside the static block.  It is good practice to always have a block like this inside of static { ... } initialization code:</p>\n\n<pre><code>static {\n  try {\n\n    ... your init code here\n\n  } catch (Throwable t) {\n    LOG.error(\"Failure during static initialization\", t);\n    throw t;\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3849657,"reputation":389,"user_id":3190140,"accept_rate":38,"display_name":"KerenSi"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1512662987,"creation_date":1405586284,"answer_id":24798674,"question_id":7325579,"body_markdown":"I had the same exception, this is how I solved the problem:\r\n\r\n\r\n**Preconditions:**\r\n\r\n1. Junit class (and test), that extended another class.\r\n\r\n2. ApplicationContext initialized using spring, that init the project.\r\n\r\n3. The Application context was initialized in @Before method\r\n\r\n**Solution:**\r\n\r\nInit the application context from @BeforeClass method, since the parent class also required some classes that were initialized from within the application context.\r\n\r\nHope this will help.","title":"java.lang.NoClassDefFoundError: Could not initialize class XXX","body":"<p>I had the same exception, this is how I solved the problem:</p>\n\n<p><strong>Preconditions:</strong></p>\n\n<ol>\n<li><p>Junit class (and test), that extended another class.</p></li>\n<li><p>ApplicationContext initialized using spring, that init the project.</p></li>\n<li><p>The Application context was initialized in @Before method</p></li>\n</ol>\n\n<p><strong>Solution:</strong></p>\n\n<p>Init the application context from @BeforeClass method, since the parent class also required some classes that were initialized from within the application context.</p>\n\n<p>Hope this will help.</p>\n"},{"tags":[],"owner":{"account_id":3332564,"reputation":231,"user_id":2801140,"display_name":"TriMix"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1418845612,"creation_date":1418845612,"answer_id":27533620,"question_id":7325579,"body_markdown":"As mentioned above, this could be a number of things.  In my case I had a statically initialized variable which relied on a missing entry in my properties file.  Added the missing entry to the properties file and the problem was solved.  ","title":"java.lang.NoClassDefFoundError: Could not initialize class XXX","body":"<p>As mentioned above, this could be a number of things.  In my case I had a statically initialized variable which relied on a missing entry in my properties file.  Added the missing entry to the properties file and the problem was solved.  </p>\n"},{"comments":[{"owner":{"account_id":7165219,"reputation":53,"user_id":5474564,"display_name":"MonkeyKing"},"score":0,"creation_date":1446004511,"post_id":33382605,"comment_id":54558702,"body_markdown":"What&#39;s more, when the code runs on the linux machine, follow the error above, there is another problem : `java.lang.ExceptionInInitializerError: null`, it means that can not find the class in the classloader, or don&#39;t know to load which one(I guess). Did you meet that?","body":"What&#39;s more, when the code runs on the linux machine, follow the error above, there is another problem : <code>java.lang.ExceptionInInitializerError: null</code>, it means that can not find the class in the classloader, or don&#39;t know to load which one(I guess). Did you meet that?"}],"tags":[],"owner":{"account_id":7165219,"reputation":53,"user_id":5474564,"display_name":"MonkeyKing"},"comment_count":1,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1446004316,"creation_date":1446004316,"answer_id":33382605,"question_id":7325579,"body_markdown":"Just several days ago, I met the same question just like yours. All code runs well on my local machine, but turns out error(noclassdeffound&amp;initialize). \r\nSo I post my solution, but I don&#39;t know why, I merely advance a possibility. I hope someone know will explain this.@John Vint\r\nFirstly, I&#39;ll show you my problem. My code has static variable and static block both. When I first met this problem, I tried John Vint&#39;s solution, and tried to catch the exception. However, I caught nothing. So I thought it is because the static variable(but now I know they are the same thing) and still found nothing.\r\nSo, I try to find the difference between the linux machine and my computer. Then I found that this problem happens only when several threads run in one process(By the way, the linux machine has double cores and double processes). That means if there are two tasks(both uses the code which has static block or variables) run in the same process, it goes wrong, but if they run in different processes, both of them are ok.\r\nIn the Linux machine, I use\r\n\r\n    mvn -U clean  test -Dtest=path \r\n\r\nto run a task, and because my static variable is to start a container(or maybe you initialize a new classloader), so it will stay until the jvm stop, and the jvm stops only when all the tasks in one process stop. Every task will start a new container(or classloader) and it makes the jvm confused. As a result, the error happens.\r\nSo, how to solve it? My solution is to add a new command to the maven command, and make every task go to the same container.\r\n\r\n    -Dxxx.version=xxxxx #sorry can&#39;t post more\r\n\r\nMaybe you have already solved this problem, but still hope it will help others who meet the same problem.\r\n","title":"java.lang.NoClassDefFoundError: Could not initialize class XXX","body":"<p>Just several days ago, I met the same question just like yours. All code runs well on my local machine, but turns out error(noclassdeffound&amp;initialize). \nSo I post my solution, but I don't know why, I merely advance a possibility. I hope someone know will explain this.@John Vint\nFirstly, I'll show you my problem. My code has static variable and static block both. When I first met this problem, I tried John Vint's solution, and tried to catch the exception. However, I caught nothing. So I thought it is because the static variable(but now I know they are the same thing) and still found nothing.\nSo, I try to find the difference between the linux machine and my computer. Then I found that this problem happens only when several threads run in one process(By the way, the linux machine has double cores and double processes). That means if there are two tasks(both uses the code which has static block or variables) run in the same process, it goes wrong, but if they run in different processes, both of them are ok.\nIn the Linux machine, I use</p>\n\n<pre><code>mvn -U clean  test -Dtest=path \n</code></pre>\n\n<p>to run a task, and because my static variable is to start a container(or maybe you initialize a new classloader), so it will stay until the jvm stop, and the jvm stops only when all the tasks in one process stop. Every task will start a new container(or classloader) and it makes the jvm confused. As a result, the error happens.\nSo, how to solve it? My solution is to add a new command to the maven command, and make every task go to the same container.</p>\n\n<pre><code>-Dxxx.version=xxxxx #sorry can't post more\n</code></pre>\n\n<p>Maybe you have already solved this problem, but still hope it will help others who meet the same problem.</p>\n"},{"tags":[],"owner":{"account_id":901241,"reputation":513,"user_id":937344,"display_name":"lifeson106"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1481586457,"creation_date":1481586457,"answer_id":41111557,"question_id":7325579,"body_markdown":"If you&#39;re working on an Android project, make sure you aren&#39;t calling any static methods on any Android classes.  I&#39;m only using JUnit + Mockito, so maybe some other frameworks might help you avoid the problem altogether, I&#39;m not sure.\r\n\r\nMy problem was calling `Uri.parse(uriString)` as part of a static initializer for a unit test.  The Uri class is an Android API, which is why the unit test build couldn&#39;t find it.  I changed this value to `null` instead and everything went back to normal.","title":"java.lang.NoClassDefFoundError: Could not initialize class XXX","body":"<p>If you're working on an Android project, make sure you aren't calling any static methods on any Android classes.  I'm only using JUnit + Mockito, so maybe some other frameworks might help you avoid the problem altogether, I'm not sure.</p>\n\n<p>My problem was calling <code>Uri.parse(uriString)</code> as part of a static initializer for a unit test.  The Uri class is an Android API, which is why the unit test build couldn't find it.  I changed this value to <code>null</code> instead and everything went back to normal.</p>\n"},{"tags":[],"owner":{"account_id":8893545,"reputation":1541,"user_id":6639353,"display_name":"Elad"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1540980036,"creation_date":1540980036,"answer_id":53080725,"question_id":7325579,"body_markdown":"I had the same exception - but only while running in debug mode, \r\nthis is how I solved the problem (after 3 whole days):\r\nin the build.gradle i had : \r\n&quot;multiDexEnabled true&quot; set in the defaultConfig section.\r\n\r\n            defaultConfig {\r\n        applicationId &quot;com.xxx.yyy&quot;\r\n        minSdkVersion 15\r\n        targetSdkVersion 28\r\n        versionCode 5123\r\n        versionName &quot;5123&quot;\r\n        // Enabling multidex support.\r\n        multiDexEnabled true\r\n    }\r\n\r\n\r\nbut apparently this wasn&#39;t enough.\r\nbut when i changed:\r\n\r\n    public class MyAppClass  extends Application \r\n\r\nto:\r\n\r\n    public class MyAppClass  extends MultiDexApplication \r\n\r\nthis solved it.\r\nhope this will help someone","title":"java.lang.NoClassDefFoundError: Could not initialize class XXX","body":"<p>I had the same exception - but only while running in debug mode, \nthis is how I solved the problem (after 3 whole days):\nin the build.gradle i had : \n\"multiDexEnabled true\" set in the defaultConfig section.</p>\n\n<pre><code>        defaultConfig {\n    applicationId \"com.xxx.yyy\"\n    minSdkVersion 15\n    targetSdkVersion 28\n    versionCode 5123\n    versionName \"5123\"\n    // Enabling multidex support.\n    multiDexEnabled true\n}\n</code></pre>\n\n<p>but apparently this wasn't enough.\nbut when i changed:</p>\n\n<pre><code>public class MyAppClass  extends Application \n</code></pre>\n\n<p>to:</p>\n\n<pre><code>public class MyAppClass  extends MultiDexApplication \n</code></pre>\n\n<p>this solved it.\nhope this will help someone</p>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1641837217,"post_id":70652322,"comment_id":124906360,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/70652322/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":19477602,"reputation":9,"user_id":14248695,"display_name":"SripriyaPKulkarni"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1641828675,"creation_date":1641817322,"answer_id":70652322,"question_id":7325579,"body_markdown":"Adding these import statements resolved the issue:\r\n\r\n    import org.junit.runner.RunWith;\r\n    \r\n    import cucumber.api.CucumberOptions;\r\n    import cucumber.api.junit.Cucumber;\r\n\r\n","title":"java.lang.NoClassDefFoundError: Could not initialize class XXX","body":"<p>Adding these import statements resolved the issue:</p>\n<pre><code>import org.junit.runner.RunWith;\n\nimport cucumber.api.CucumberOptions;\nimport cucumber.api.junit.Cucumber;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5745825,"reputation":11553,"user_id":4537090,"accept_rate":79,"display_name":"WesternGun"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683282049,"creation_date":1683189313,"answer_id":76171143,"question_id":7325579,"body_markdown":"Thanks for the question and hints from the top voted answers. It makes me rethink about static fields and at last, I found that I defined a `DateTimeFormatter` which needs another static constant to be created; seems that String being constant is fine but `DateTimeFormatter` cannot be created at class init time. \r\n\r\n```java\r\nprivate static final String PATTERN = &quot;yyyy-MM-yyThh:mm:ss.SSSSSSV&quot;; // OK\r\nprivate static DateTimeFormatter DATE_TIME_FORMATTER = DateTimeFormatter.ofPattern(PATTERN); // WRONG; as it depends on another field to be created first\r\n```\r\nThe solutions are: \r\n\r\n - initialize the `DateTimeFormatter` in a `@PostConstruct` method\r\n - or in the method where it is needed. ","title":"java.lang.NoClassDefFoundError: Could not initialize class XXX","body":"<p>Thanks for the question and hints from the top voted answers. It makes me rethink about static fields and at last, I found that I defined a <code>DateTimeFormatter</code> which needs another static constant to be created; seems that String being constant is fine but <code>DateTimeFormatter</code> cannot be created at class init time.</p>\n<pre class=\"lang-java prettyprint-override\"><code>private static final String PATTERN = &quot;yyyy-MM-yyThh:mm:ss.SSSSSSV&quot;; // OK\nprivate static DateTimeFormatter DATE_TIME_FORMATTER = DateTimeFormatter.ofPattern(PATTERN); // WRONG; as it depends on another field to be created first\n</code></pre>\n<p>The solutions are:</p>\n<ul>\n<li>initialize the <code>DateTimeFormatter</code> in a <code>@PostConstruct</code> method</li>\n<li>or in the method where it is needed.</li>\n</ul>\n"}],"owner":{"account_id":291713,"reputation":8251,"user_id":594026,"accept_rate":100,"display_name":"Leon"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":617235,"favorite_count":0,"down_vote_count":0,"up_vote_count":231,"accepted_answer_id":7325829,"answer_count":10,"score":231,"last_activity_date":1683282049,"creation_date":1315339930,"question_id":7325579,"body_markdown":"    public class PropHolder {\r\n      public static Properties prop;\r\n      \r\n      static {\r\n        //code for loading properties from file\r\n      }\r\n    }\r\n    \r\n    // Referencing the class somewhere else:\r\n    Properties prop = PropHolder.prop;\r\n\r\n\r\n`class PropHolder` is a class of my own. The class resides in the same JAR file of the main class. So that should not because any JAR is missing from classpath.\r\n\r\nWhen I look in to the JAR file by `jar tf myjarfile`, I can see the `PropHolder.class` listed there.\r\n\r\nBtw: the code is running fine on my local machine. But couldn&#39;t work when I deploy it with some script onto a Linux server. So I think it is not the problem of the code.\r\nBut for some reason. the deploy process is very hard to track.\r\n\r\n\r\nWhat could be the problem?","title":"java.lang.NoClassDefFoundError: Could not initialize class XXX","body":"<pre><code>public class PropHolder {\n  public static Properties prop;\n\n  static {\n    //code for loading properties from file\n  }\n}\n\n// Referencing the class somewhere else:\nProperties prop = PropHolder.prop;\n</code></pre>\n\n<p><code>class PropHolder</code> is a class of my own. The class resides in the same JAR file of the main class. So that should not because any JAR is missing from classpath.</p>\n\n<p>When I look in to the JAR file by <code>jar tf myjarfile</code>, I can see the <code>PropHolder.class</code> listed there.</p>\n\n<p>Btw: the code is running fine on my local machine. But couldn't work when I deploy it with some script onto a Linux server. So I think it is not the problem of the code.\nBut for some reason. the deploy process is very hard to track.</p>\n\n<p>What could be the problem?</p>\n"},{"tags":["java","selenium-webdriver","testing","cucumber"],"owner":{"account_id":25241659,"reputation":55,"user_id":19075454,"display_name":"Roberto Teresa"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683281829,"creation_date":1683281829,"question_id":76181128,"body_markdown":"I want to make the screenshot used for reporting in selenium lighter to make the overall report lighter\r\n\r\nMy current method to take screenshots is this:\r\n\r\n     try {\r\n                final byte[] screenByte = ((TakesScreenshot) driver).getScreenshotAs(OutputType.BYTES);\r\n                scenario.attach(screenByte, &quot;image/png&quot;, &quot;Evidencia&quot;);\r\n          } catch (WebDriverException somePlatformsDontSupportScreenshots) {\r\n                System.err.println(somePlatformsDontSupportScreenshots.getMessage());\r\n          }\r\n\r\nWhich is the best way to compress the screenshot to make it lighter? Use a deflater?","title":"Compress Selenium screenshot","body":"<p>I want to make the screenshot used for reporting in selenium lighter to make the overall report lighter</p>\n<p>My current method to take screenshots is this:</p>\n<pre><code> try {\n            final byte[] screenByte = ((TakesScreenshot) driver).getScreenshotAs(OutputType.BYTES);\n            scenario.attach(screenByte, &quot;image/png&quot;, &quot;Evidencia&quot;);\n      } catch (WebDriverException somePlatformsDontSupportScreenshots) {\n            System.err.println(somePlatformsDontSupportScreenshots.getMessage());\n      }\n</code></pre>\n<p>Which is the best way to compress the screenshot to make it lighter? Use a deflater?</p>\n"},{"tags":["java","api","rest","http"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1683281010,"post_id":76180979,"comment_id":134346108,"body_markdown":"Speaking in a strict RFC-sense, a `HTTP GET` should not change any state (see [RFC 2616, &#167;9.1.1 (`datatracker.ietf.org`)](https://datatracker.ietf.org/doc/html/rfc2616#section-9.1.1)). Thus, in a strict RFC-sense, this should be avoided.","body":"Speaking in a strict RFC-sense, a <code>HTTP GET</code> should not change any state (see <a href=\"https://datatracker.ietf.org/doc/html/rfc2616#section-9.1.1\" rel=\"nofollow noreferrer\">RFC 2616, &#167;9.1.1 (<code>datatracker.ietf.org</code>)</a>). Thus, in a strict RFC-sense, this should be avoided."}],"answers":[{"tags":[],"owner":{"account_id":19965141,"reputation":1690,"user_id":14631885,"display_name":"Dhana D."},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1683281142,"creation_date":1683281142,"answer_id":76181042,"question_id":76180979,"body_markdown":"The one with `PostMapping` is the more proper way to achieve the goal &quot;get or create if not exist&quot;. Because if you want it to create, you are likely requiring the user to send the details you want to create (save).\r\n\r\nYou should not use `@GetMapping` method if you want to create (save) object even when it does not exist.\r\n\r\n```java\r\n@PostMapping(&quot;&quot;)\r\n    public List&lt;SOMEOBJECT&gt; create(SOME DATA){\r\n        return questionService.create(SOME DATA);\r\n    }\r\n```\r\n\r\nAnd the function name `create` or in more detailed way : `createOrGet` should be fine.\r\n\r\n\r\n","title":"Is it ok to create entity in GET REST controller method with name getOrCreateIfNotExist?","body":"<p>The one with <code>PostMapping</code> is the more proper way to achieve the goal &quot;get or create if not exist&quot;. Because if you want it to create, you are likely requiring the user to send the details you want to create (save).</p>\n<p>You should not use <code>@GetMapping</code> method if you want to create (save) object even when it does not exist.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@PostMapping(&quot;&quot;)\n    public List&lt;SOMEOBJECT&gt; create(SOME DATA){\n        return questionService.create(SOME DATA);\n    }\n</code></pre>\n<p>And the function name <code>create</code> or in more detailed way : <code>createOrGet</code> should be fine.</p>\n"}],"owner":{"account_id":28515520,"reputation":15,"user_id":21824932,"display_name":"Oleksandr Zhytariuk"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":94,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76181042,"answer_count":1,"score":0,"last_activity_date":1683281142,"creation_date":1683280683,"question_id":76180979,"body_markdown":"So, I have some task, I have to create endpoint that should getOrCreateIfNotExist. But I`m not sure, is it ok practice to create some entity in the GET request. Or I should to do another call to the POST method to create new entity. Maybe like this:\r\n\r\n```\r\n    @GetMapping(&quot;&quot;)\r\n    public List&lt;SOMEOBJECT&gt; getOrCreateIfNotExist(SOME DATA){\r\n        return questionService.getOrCreateIfNotExist(SOME DATA);\r\n    }\r\n```\r\n\r\nOR I should write like this:\r\n\r\n\r\n```\r\n    @GetMapping(&quot;&quot;)\r\n    public List&lt;SOMEOBJECT&gt; getOrCreateIfNotExist(SOME DATA){\r\n          if(questionService.getOrCreateIfNotExist(SOME DATA) == null){\r\n             create(SOME DATA)\r\n          }\r\n    }\r\n\r\n    @PostMapping(&quot;&quot;)\r\n    public List&lt;SOMEOBJECT&gt; create(SOME DATA){\r\n        return questionService.create(SOME DATA);\r\n    }\r\n```\r\n\r\nI want to know what is best practice and is it good to do 2 things in one request?","title":"Is it ok to create entity in GET REST controller method with name getOrCreateIfNotExist?","body":"<p>So, I have some task, I have to create endpoint that should getOrCreateIfNotExist. But I`m not sure, is it ok practice to create some entity in the GET request. Or I should to do another call to the POST method to create new entity. Maybe like this:</p>\n<pre><code>    @GetMapping(&quot;&quot;)\n    public List&lt;SOMEOBJECT&gt; getOrCreateIfNotExist(SOME DATA){\n        return questionService.getOrCreateIfNotExist(SOME DATA);\n    }\n</code></pre>\n<p>OR I should write like this:</p>\n<pre><code>    @GetMapping(&quot;&quot;)\n    public List&lt;SOMEOBJECT&gt; getOrCreateIfNotExist(SOME DATA){\n          if(questionService.getOrCreateIfNotExist(SOME DATA) == null){\n             create(SOME DATA)\n          }\n    }\n\n    @PostMapping(&quot;&quot;)\n    public List&lt;SOMEOBJECT&gt; create(SOME DATA){\n        return questionService.create(SOME DATA);\n    }\n</code></pre>\n<p>I want to know what is best practice and is it good to do 2 things in one request?</p>\n"},{"tags":["java","docker","apache-kafka","teamcity","testcontainers"],"comments":[{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1683293334,"post_id":76181029,"comment_id":134348755,"body_markdown":"`--network host` shouldn&#39;t work on Mac. `host.docker.internal` only works on Mac (that address is set by Docker Desktop, so not available on Linux)","body":"<code>--network host</code> shouldn&#39;t work on Mac. <code>host.docker.internal</code> only works on Mac (that address is set by Docker Desktop, so not available on Linux)"},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1683293525,"post_id":76181029,"comment_id":134348788,"body_markdown":"Also, you&#39;ve set `withEnv(&quot;SCHEMA_REGISTRY_LISTENERS&quot;, &quot;http://0.0.0.0:8081&quot;);`... So why is your error not using port 8081?","body":"Also, you&#39;ve set <code>withEnv(&quot;SCHEMA_REGISTRY_LISTENERS&quot;, &quot;http:&#47;&#47;0.0.0.0:8081&quot;);</code>... So why is your error not using port 8081?"},{"owner":{"account_id":1380143,"reputation":1428,"user_id":1313335,"accept_rate":76,"display_name":"Matt Allwood"},"score":0,"creation_date":1683294245,"post_id":76181029,"comment_id":134348982,"body_markdown":"I suspect the 8081 issue will be the withExposedPorts - TestContainers randomises exposed ports to avoid clashes\n\nI have it working on Mac fine - both bare and in Docker. My issue is getting it working in a Linux environment hence throwing things at it (network and host.docker.internal) and seeing if anything stuck - they didn&#39;t work in Linux hence coming here","body":"I suspect the 8081 issue will be the withExposedPorts - TestContainers randomises exposed ports to avoid clashes  I have it working on Mac fine - both bare and in Docker. My issue is getting it working in a Linux environment hence throwing things at it (network and host.docker.internal) and seeing if anything stuck - they didn&#39;t work in Linux hence coming here"},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":1,"creation_date":1683299294,"post_id":76181029,"comment_id":134350423,"body_markdown":"Yeah, not sure. I have not used Schema Registry in a TestContainer. [Mocks have always worked fine for me with unit tests](https://github.com/bakdata/fluent-kafka-streams-tests/blob/master/schema-registry-mock/README.md#schema-registry-mock). Plus, they run faster than starting Docker containers. But are you sure the Kafka container itself starts? If not, the schema registry wont start. Can you access logs from either container?","body":"Yeah, not sure. I have not used Schema Registry in a TestContainer. <a href=\"https://github.com/bakdata/fluent-kafka-streams-tests/blob/master/schema-registry-mock/README.md#schema-registry-mock\" rel=\"nofollow noreferrer\">Mocks have always worked fine for me with unit tests</a>. Plus, they run faster than starting Docker containers. But are you sure the Kafka container itself starts? If not, the schema registry wont start. Can you access logs from either container?"},{"owner":{"account_id":1380143,"reputation":1428,"user_id":1313335,"accept_rate":76,"display_name":"Matt Allwood"},"score":0,"creation_date":1683549040,"post_id":76181029,"comment_id":134378975,"body_markdown":"well I *assume* so - the Kafka container should have a startup check (in the same way that the SR one is failing), but I&#39;ve honestly not checked. I may look into the mock approach","body":"well I <i>assume</i> so - the Kafka container should have a startup check (in the same way that the SR one is failing), but I&#39;ve honestly not checked. I may look into the mock approach"},{"owner":{"account_id":1380143,"reputation":1428,"user_id":1313335,"accept_rate":76,"display_name":"Matt Allwood"},"score":1,"creation_date":1683643838,"post_id":76181029,"comment_id":134396236,"body_markdown":"OK - so I&#39;ve managed to get it working with the mock SR (after some initial problems with Maven/Jackson), so thanks for that. I think the original problem still stands though - I suspect it&#39;s an insufficient setup of the networking","body":"OK - so I&#39;ve managed to get it working with the mock SR (after some initial problems with Maven/Jackson), so thanks for that. I think the original problem still stands though - I suspect it&#39;s an insufficient setup of the networking"}],"owner":{"account_id":1380143,"reputation":1428,"user_id":1313335,"accept_rate":76,"display_name":"Matt Allwood"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":386,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683281066,"creation_date":1683281066,"question_id":76181029,"body_markdown":"I am trying to run an integration test for Kafka Streams using TestContainers with Schema Registry\r\n\r\nI am able to get it running locally (MacOS), and locally within Docker (needs `TESTCONTAINERS_HOST_OVERRIDE=&#39;host.docker.internal&#39;` setting), but when I try to run it from a Linux agent in TeamCity it appears not to be able to check whether the schema registry container is running.\r\n\r\nI am basically using the setup from this SO answer for my Kafka/SR containers: https://stackoverflow.com/questions/75388650/testcontainers-schemaregistry-cant-connect-to-kafka-container\r\n\r\nThe crash seems to occur at the `SCHEMA_REGISTRY.withKafka(KAFKA).start();` stage with the following appearing in the log: `&quot;Timed out waiting for URL to be accessible (http://172.17.0.1:32833/subjects should return HTTP [200])&quot;`\r\n\r\nThe log output from the failed container which follows is unfortunately truncated, but appears to show the SR container running as expected, so I think it&#39;s just that how it&#39;s trying to connect to the container is incorrect.\r\n\r\nI&#39;ve tried increasing the timeout, setting the HOST_OVERRIDE to `host.docker.internal` (this makes it worse - it can&#39;t find ryuk) and setting the network to `host`. The command to run the container in the script is\r\n`docker run --rm -v /var/run/docker.sock:/var/run/docker.sock --network host &lt;container name&gt;`, which works on MacOS, but not TC/Linux.\r\n\r\nThe SchemaRegistry container config from that earlier answer is:\r\n\r\n```\r\npublic class SchemaRegistryContainer extends GenericContainer&lt;SchemaRegistryContainer&gt; {\r\n    public static final String SCHEMA_REGISTRY_IMAGE =\r\n            &quot;confluentinc/cp-schema-registry&quot;;\r\n    public static final int SCHEMA_REGISTRY_PORT = 8081;\r\n\r\n    public SchemaRegistryContainer() {\r\n        this(CONFLUENT_PLATFORM_VERSION);\r\n    }\r\n\r\n    public SchemaRegistryContainer(String version) {\r\n        super(SCHEMA_REGISTRY_IMAGE + &quot;:&quot; + version);\r\n\r\n        waitingFor(Wait.forHttp(&quot;/subjects&quot;).forStatusCode(200));\r\n        withExposedPorts(SCHEMA_REGISTRY_PORT);\r\n    }\r\n\r\n    public SchemaRegistryContainer withKafka(KafkaContainer kafka) {\r\n        return withKafka(kafka.getNetwork(), kafka.getNetworkAliases().get(0) + &quot;:9092&quot;);\r\n    }\r\n\r\n    public SchemaRegistryContainer withKafka(Network network, String bootstrapServers) {\r\n        withNetwork(network);\r\n        withEnv(&quot;SCHEMA_REGISTRY_HOST_NAME&quot;, &quot;schema-registry&quot;);\r\n        withEnv(&quot;SCHEMA_REGISTRY_LISTENERS&quot;, &quot;http://0.0.0.0:8081&quot;);\r\n        withEnv(&quot;SCHEMA_REGISTRY_KAFKASTORE_BOOTSTRAP_SERVERS&quot;, &quot;PLAINTEXT://&quot; + bootstrapServers);\r\n        return self();\r\n    }\r\n}\r\n```\r\n\r\nThe code to start my containers is:\r\n```\r\n            KafkaContainer.KAFKA.withStartupTimeout(Duration.ofMinutes(3)).start();\r\n            KafkaContainer.SCHEMA_REGISTRY.withKafka(KafkaContainer.KAFKA).withStartupTimeout(Duration.ofMinutes(3)).start();\r\n```\r\n(I have tried longer timeouts)","title":"Testcontainers-java times out waiting for container when run in TeamCity/docker, but fine in MacOS / MacOS+docker","body":"<p>I am trying to run an integration test for Kafka Streams using TestContainers with Schema Registry</p>\n<p>I am able to get it running locally (MacOS), and locally within Docker (needs <code>TESTCONTAINERS_HOST_OVERRIDE='host.docker.internal'</code> setting), but when I try to run it from a Linux agent in TeamCity it appears not to be able to check whether the schema registry container is running.</p>\n<p>I am basically using the setup from this SO answer for my Kafka/SR containers: <a href=\"https://stackoverflow.com/questions/75388650/testcontainers-schemaregistry-cant-connect-to-kafka-container\">Testcontainers SchemaRegistry can&#39;t connect to Kafka container</a></p>\n<p>The crash seems to occur at the <code>SCHEMA_REGISTRY.withKafka(KAFKA).start();</code> stage with the following appearing in the log: <code>&quot;Timed out waiting for URL to be accessible (http://172.17.0.1:32833/subjects should return HTTP [200])&quot;</code></p>\n<p>The log output from the failed container which follows is unfortunately truncated, but appears to show the SR container running as expected, so I think it's just that how it's trying to connect to the container is incorrect.</p>\n<p>I've tried increasing the timeout, setting the HOST_OVERRIDE to <code>host.docker.internal</code> (this makes it worse - it can't find ryuk) and setting the network to <code>host</code>. The command to run the container in the script is\n<code>docker run --rm -v /var/run/docker.sock:/var/run/docker.sock --network host &lt;container name&gt;</code>, which works on MacOS, but not TC/Linux.</p>\n<p>The SchemaRegistry container config from that earlier answer is:</p>\n<pre><code>public class SchemaRegistryContainer extends GenericContainer&lt;SchemaRegistryContainer&gt; {\n    public static final String SCHEMA_REGISTRY_IMAGE =\n            &quot;confluentinc/cp-schema-registry&quot;;\n    public static final int SCHEMA_REGISTRY_PORT = 8081;\n\n    public SchemaRegistryContainer() {\n        this(CONFLUENT_PLATFORM_VERSION);\n    }\n\n    public SchemaRegistryContainer(String version) {\n        super(SCHEMA_REGISTRY_IMAGE + &quot;:&quot; + version);\n\n        waitingFor(Wait.forHttp(&quot;/subjects&quot;).forStatusCode(200));\n        withExposedPorts(SCHEMA_REGISTRY_PORT);\n    }\n\n    public SchemaRegistryContainer withKafka(KafkaContainer kafka) {\n        return withKafka(kafka.getNetwork(), kafka.getNetworkAliases().get(0) + &quot;:9092&quot;);\n    }\n\n    public SchemaRegistryContainer withKafka(Network network, String bootstrapServers) {\n        withNetwork(network);\n        withEnv(&quot;SCHEMA_REGISTRY_HOST_NAME&quot;, &quot;schema-registry&quot;);\n        withEnv(&quot;SCHEMA_REGISTRY_LISTENERS&quot;, &quot;http://0.0.0.0:8081&quot;);\n        withEnv(&quot;SCHEMA_REGISTRY_KAFKASTORE_BOOTSTRAP_SERVERS&quot;, &quot;PLAINTEXT://&quot; + bootstrapServers);\n        return self();\n    }\n}\n</code></pre>\n<p>The code to start my containers is:</p>\n<pre><code>            KafkaContainer.KAFKA.withStartupTimeout(Duration.ofMinutes(3)).start();\n            KafkaContainer.SCHEMA_REGISTRY.withKafka(KafkaContainer.KAFKA).withStartupTimeout(Duration.ofMinutes(3)).start();\n</code></pre>\n<p>(I have tried longer timeouts)</p>\n"},{"tags":["java","spring","spring-boot","tomcat"],"owner":{"account_id":8901665,"reputation":315,"user_id":6644926,"accept_rate":12,"display_name":"Владимир Гичев"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":77,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683280366,"creation_date":1683280366,"question_id":76180945,"body_markdown":"My current working rest service for downloading a file is very slow and I&#39;m trying to find a better implementation to improve download speed. The problem is that I have 2 servers (client and storage) and they communicate only with serialization objects so for example I can&#39;t pass Resource object from client to storage and vice versa. The actual file is located on my storage service.Currently when there is a request for download client server receive a byte[] array and create an OutputStream. Is there some other approach that will work with serialization classes?\r\nThis is my current client rest service:\r\n\r\n``` \r\n@RequestMapping(value = &quot;/file/{fileName:.+}&quot;, method = RequestMethod.GET)\r\n    public void getFile(HttpServletRequest request, HttpServletResponse response,\r\n\t    @PathVariable(&quot;fileName&quot;) String fileName) {\r\n\r\n\tbyte[] imgbytes = null;\r\n\r\n\timgbytes  = fileService.getFullFile(fileName);\r\n\t\tOutputStream outputStream = null;\r\n\ttry {\r\n\t    outputStream = response.getOutputStream();\r\n\t    IOUtils.write(imgbytes, outputStream);\r\n\t    outputStream.flush();\r\n\t} catch (IOException ioException) {\r\n\t    logger.error(&quot;IO ERROR - &quot;, ioException);\r\n\t} finally {\r\n\t    if (outputStream != null) {\r\n\t\ttry {\r\n\t\t    outputStream.close();\r\n\t\t} catch (IOException e) {\r\n\t\t    logger.error(&quot;Error closing stream - &quot;, e);\r\n\t\t}\r\n\t    }\r\n\t}\r\n    }\r\n\r\n","title":"Rest service slow download","body":"<p>My current working rest service for downloading a file is very slow and I'm trying to find a better implementation to improve download speed. The problem is that I have 2 servers (client and storage) and they communicate only with serialization objects so for example I can't pass Resource object from client to storage and vice versa. The actual file is located on my storage service.Currently when there is a request for download client server receive a byte[] array and create an OutputStream. Is there some other approach that will work with serialization classes?\nThis is my current client rest service:</p>\n<pre><code>@RequestMapping(value = &quot;/file/{fileName:.+}&quot;, method = RequestMethod.GET)\n    public void getFile(HttpServletRequest request, HttpServletResponse response,\n        @PathVariable(&quot;fileName&quot;) String fileName) {\n\n    byte[] imgbytes = null;\n\n    imgbytes  = fileService.getFullFile(fileName);\n        OutputStream outputStream = null;\n    try {\n        outputStream = response.getOutputStream();\n        IOUtils.write(imgbytes, outputStream);\n        outputStream.flush();\n    } catch (IOException ioException) {\n        logger.error(&quot;IO ERROR - &quot;, ioException);\n    } finally {\n        if (outputStream != null) {\n        try {\n            outputStream.close();\n        } catch (IOException e) {\n            logger.error(&quot;Error closing stream - &quot;, e);\n        }\n        }\n    }\n    }\n\n</code></pre>\n"},{"tags":["java","enums"],"comments":[{"owner":{"account_id":1198585,"reputation":203,"user_id":1169762,"accept_rate":100,"display_name":"Richard Rhyan"},"score":0,"creation_date":1337445790,"post_id":10666881,"comment_id":13837529,"body_markdown":"* edit - added extends. MyClass has enum Property, as does each subclass.","body":"* edit - added extends. MyClass has enum Property, as does each subclass."},{"owner":{"account_id":21180,"reputation":9893,"user_id":51292,"accept_rate":59,"display_name":"Ray Tayek"},"score":1,"creation_date":1337446510,"post_id":10666881,"comment_id":13837659,"body_markdown":"if the property keys/names are different in each subclass, then you will need a different enum declaration in each subclass","body":"if the property keys/names are different in each subclass, then you will need a different enum declaration in each subclass"},{"owner":{"account_id":1198585,"reputation":203,"user_id":1169762,"accept_rate":100,"display_name":"Richard Rhyan"},"score":0,"creation_date":1337446667,"post_id":10666881,"comment_id":13837691,"body_markdown":"dang... that&#39;s what I was afraid of.","body":"dang... that&#39;s what I was afraid of."}],"answers":[{"comments":[{"owner":{"account_id":1198585,"reputation":203,"user_id":1169762,"accept_rate":100,"display_name":"Richard Rhyan"},"score":0,"creation_date":1337445359,"post_id":10666885,"comment_id":13837448,"body_markdown":"But I&#39;m trying to use different Property enums using the same code. This will only work with a single Property enum.","body":"But I&#39;m trying to use different Property enums using the same code. This will only work with a single Property enum."},{"owner":{"account_id":877405,"reputation":6423,"user_id":103605,"accept_rate":60,"display_name":"rapha&#235;λ"},"score":0,"creation_date":1337445470,"post_id":10666885,"comment_id":13837471,"body_markdown":"But those will be different enum types. In the java language you can&#39;t subclass enums. What is your actual problem at hand?","body":"But those will be different enum types. In the java language you can&#39;t subclass enums. What is your actual problem at hand?"}],"tags":[],"owner":{"account_id":877405,"reputation":6423,"user_id":103605,"accept_rate":60,"display_name":"rapha&#235;λ"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1337444192,"creation_date":1337444192,"answer_id":10666885,"question_id":10666881,"body_markdown":"Just declare the enum as a  public top level enum class (in its own file)","title":"Enum helper in a class (Java)","body":"<p>Just declare the enum as a  public top level enum class (in its own file)</p>\n"},{"comments":[{"owner":{"account_id":892451,"reputation":31936,"user_id":930450,"accept_rate":75,"display_name":"User"},"score":0,"creation_date":1337444318,"post_id":10666888,"comment_id":13837247,"body_markdown":"Is this possible to access it statically if the enum is a member, not static class?","body":"Is this possible to access it statically if the enum is a member, not static class?"},{"owner":{"account_id":1102290,"reputation":3877,"user_id":1094430,"accept_rate":62,"display_name":"StepTNT"},"score":0,"creation_date":1337444495,"post_id":10666888,"comment_id":13837284,"body_markdown":"I don&#39;t understand your question ! Maybe you can add a sample code of what you&#39;re trying to do :)","body":"I don&#39;t understand your question ! Maybe you can add a sample code of what you&#39;re trying to do :)"},{"owner":{"account_id":892451,"reputation":31936,"user_id":930450,"accept_rate":75,"display_name":"User"},"score":0,"creation_date":1337444606,"post_id":10666888,"comment_id":13837306,"body_markdown":"I&#39;m  not trying to do anything, I&#39;m just asking if what you are saying is possible (can&#39;t test it now). Property is an inner non static class of Account so I&#39;m wondering why it&#39;s possible to access it in a static way (Account.Property) instead of accountInstance.Property","body":"I&#39;m  not trying to do anything, I&#39;m just asking if what you are saying is possible (can&#39;t test it now). Property is an inner non static class of Account so I&#39;m wondering why it&#39;s possible to access it in a static way (Account.Property) instead of accountInstance.Property"},{"owner":{"account_id":1102290,"reputation":3877,"user_id":1094430,"accept_rate":62,"display_name":"StepTNT"},"score":2,"creation_date":1337444764,"post_id":10666888,"comment_id":13837339,"body_markdown":"As said here http://stackoverflow.com/questions/253226/nested-java-enum-definition-does-declaring-as-static-make-a-difference , _Nested enum types are implicitly static._ That&#39;s why it works and you don&#39;t need to declare it static","body":"As said here <a href=\"http://stackoverflow.com/questions/253226/nested-java-enum-definition-does-declaring-as-static-make-a-difference\" title=\"nested java enum definition does declaring as static make a difference\">stackoverflow.com/questions/253226/&hellip;</a> , <i>Nested enum types are implicitly static.</i> That&#39;s why it works and you don&#39;t need to declare it static"},{"owner":{"account_id":1198585,"reputation":203,"user_id":1169762,"accept_rate":100,"display_name":"Richard Rhyan"},"score":0,"creation_date":1337445261,"post_id":10666888,"comment_id":13837428,"body_markdown":"I did find out that I could use Account.Property. But I&#39;d like to, if at all possible, use something more like MySuperClass.Property, so that any of the subclasses could use it. Or perhaps Property p = Account.Property so that I can use other Property enums in the same code.","body":"I did find out that I could use Account.Property. But I&#39;d like to, if at all possible, use something more like MySuperClass.Property, so that any of the subclasses could use it. Or perhaps Property p = Account.Property so that I can use other Property enums in the same code."},{"owner":{"account_id":1102290,"reputation":3877,"user_id":1094430,"accept_rate":62,"display_name":"StepTNT"},"score":0,"creation_date":1337445865,"post_id":10666888,"comment_id":13837538,"body_markdown":"I still don&#39;t get what&#39;s your real problem. You want the subclasses of `Account` to use your `Property` enum?","body":"I still don&#39;t get what&#39;s your real problem. You want the subclasses of <code>Account</code> to use your <code>Property</code> enum?"},{"owner":{"account_id":1198585,"reputation":203,"user_id":1169762,"accept_rate":100,"display_name":"Richard Rhyan"},"score":0,"creation_date":1337446119,"post_id":10666888,"comment_id":13837593,"body_markdown":"Nope. I want different subclasses of MyClass (I just edited the post to show that, sorry) to have different Property enums, which can be access from outside the main class, possibly with something like: enum p = Account.Property; or enum p = Task.Property; and the &quot;p&quot; could be used in place of specifying Account.Property or Task.Property","body":"Nope. I want different subclasses of MyClass (I just edited the post to show that, sorry) to have different Property enums, which can be access from outside the main class, possibly with something like: enum p = Account.Property; or enum p = Task.Property; and the &quot;p&quot; could be used in place of specifying Account.Property or Task.Property"},{"owner":{"account_id":1198585,"reputation":203,"user_id":1169762,"accept_rate":100,"display_name":"Richard Rhyan"},"score":0,"creation_date":1337446234,"post_id":10666888,"comment_id":13837610,"body_markdown":"Basically, I&#39;m going to have about 25 subclasses, and I&#39;d rather not use a series of if (... instanceof ...) for setting and getting variables.","body":"Basically, I&#39;m going to have about 25 subclasses, and I&#39;d rather not use a series of if (... instanceof ...) for setting and getting variables."},{"owner":{"account_id":1102290,"reputation":3877,"user_id":1094430,"accept_rate":62,"display_name":"StepTNT"},"score":0,"creation_date":1337446939,"post_id":10666888,"comment_id":13837749,"body_markdown":"I&#39;ve edited my answer, hoping that I finally understood what you need!","body":"I&#39;ve edited my answer, hoping that I finally understood what you need!"},{"owner":{"account_id":1198585,"reputation":203,"user_id":1169762,"accept_rate":100,"display_name":"Richard Rhyan"},"score":0,"creation_date":1337447326,"post_id":10666888,"comment_id":13837828,"body_markdown":"I think so yes... It appears what I want to do can&#39;t be done.","body":"I think so yes... It appears what I want to do can&#39;t be done."},{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1337451017,"post_id":10666888,"comment_id":13838585,"body_markdown":"Nope.  It can&#39;t.  Nested enums are _always_ static.","body":"Nope.  It can&#39;t.  Nested enums are <i>always</i> static."}],"tags":[],"owner":{"account_id":1102290,"reputation":3877,"user_id":1094430,"accept_rate":62,"display_name":"StepTNT"},"comment_count":11,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1337446917,"creation_date":1337444239,"answer_id":10666888,"question_id":10666881,"body_markdown":"Your enum is public so you just can use `Account.Property` to access it from outside the `Account` class\r\n\r\nEDIT :\r\n\r\nIf I got what you need, you&#39;d like to do something like \r\n\r\n    Property p = Account.Property.PASSWORD;\r\n    Property p1 = Product.Property.CODE;\r\n\r\nwhere Product is\r\n\r\n    public class Product extends MyClass{\r\n        HashMap&lt;Account.Property, String&gt; property = new HashMap&lt;&gt;();\r\n        public Product() {\r\n        }\r\n    \r\n        public static enum Property {\r\n            CODE,\r\n            PRICE;\r\n        }\r\n    }\r\n\r\nand you want to do this in your `MyClass`.\r\n\r\nThe problem is that both the two lines require an import and you can&#39;t import two classes with the same name, so the only solution is to do something like this \r\n\r\n    Account.Property p = Account.Property.PASSWORD;\r\n    Product.Property p1 = Product.Property.CODE;\r\n\r\nI guess that you&#39;ve got to deal with the `instanceof` to use the right `Property` enum for each class, as there&#39;s no way to extend an enum!","title":"Enum helper in a class (Java)","body":"<p>Your enum is public so you just can use <code>Account.Property</code> to access it from outside the <code>Account</code> class</p>\n\n<p>EDIT :</p>\n\n<p>If I got what you need, you'd like to do something like </p>\n\n<pre><code>Property p = Account.Property.PASSWORD;\nProperty p1 = Product.Property.CODE;\n</code></pre>\n\n<p>where Product is</p>\n\n<pre><code>public class Product extends MyClass{\n    HashMap&lt;Account.Property, String&gt; property = new HashMap&lt;&gt;();\n    public Product() {\n    }\n\n    public static enum Property {\n        CODE,\n        PRICE;\n    }\n}\n</code></pre>\n\n<p>and you want to do this in your <code>MyClass</code>.</p>\n\n<p>The problem is that both the two lines require an import and you can't import two classes with the same name, so the only solution is to do something like this </p>\n\n<pre><code>Account.Property p = Account.Property.PASSWORD;\nProduct.Property p1 = Product.Property.CODE;\n</code></pre>\n\n<p>I guess that you've got to deal with the <code>instanceof</code> to use the right <code>Property</code> enum for each class, as there's no way to extend an enum!</p>\n"},{"tags":[],"owner":{"account_id":21180,"reputation":9893,"user_id":51292,"accept_rate":59,"display_name":"Ray Tayek"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1337447905,"creation_date":1337447905,"answer_id":10667336,"question_id":10666881,"body_markdown":"maybe something like the following (but this has no type checking):\r\n\r\n    import java.util.*;\r\n    abstract class MyClass {\r\n    \tMap&lt;Object,String&gt; properties=new HashMap&lt;Object,String&gt;();\r\n    }\r\n    class Account extends MyClass {\r\n    \tenum Property {\r\n    \t\tuserid,password\r\n    \t}\r\n    \t//static Set&lt;Property&gt; keys=EnumSet.allOf(Property.class);\r\n    }\r\n    class Research extends MyClass {\r\n    \tenum Property {\r\n    \t\tred,green;\r\n    \t}\r\n    \tstatic Set&lt;Property&gt; keys=EnumSet.allOf(Property.class);\r\n    }\r\n    public class So10666881 {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tAccount account=new Account();\r\n    \t\taccount.properties.put(Account.Property.userid,&quot;user&quot;);\r\n    \t\taccount.properties.put(Account.Property.password,&quot;pass&quot;);\r\n    \t\tfor(Account.Property property:Account.Property.values())\r\n    \t\t\tSystem.out.println(property+&quot;=&quot;+account.properties.get(property));\r\n    \t}\r\n    }\r\n\r\n","title":"Enum helper in a class (Java)","body":"<p>maybe something like the following (but this has no type checking):</p>\n\n<pre><code>import java.util.*;\nabstract class MyClass {\n    Map&lt;Object,String&gt; properties=new HashMap&lt;Object,String&gt;();\n}\nclass Account extends MyClass {\n    enum Property {\n        userid,password\n    }\n    //static Set&lt;Property&gt; keys=EnumSet.allOf(Property.class);\n}\nclass Research extends MyClass {\n    enum Property {\n        red,green;\n    }\n    static Set&lt;Property&gt; keys=EnumSet.allOf(Property.class);\n}\npublic class So10666881 {\n    public static void main(String[] args) {\n        Account account=new Account();\n        account.properties.put(Account.Property.userid,\"user\");\n        account.properties.put(Account.Property.password,\"pass\");\n        for(Account.Property property:Account.Property.values())\n            System.out.println(property+\"=\"+account.properties.get(property));\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":1198585,"reputation":203,"user_id":1169762,"accept_rate":100,"display_name":"Richard Rhyan"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1930,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":10666888,"answer_count":3,"score":2,"last_activity_date":1683279612,"creation_date":1337444134,"question_id":10666881,"body_markdown":"If I have an `Enum` as a *helper* in a Java class, is there any way to refer to that `Enum` outside of the class it&#39;s helping?\r\n\r\nBasically, what I have is this:\r\n\r\n    class Account extends MyClass {\r\n        HashMap&lt;Property, String&gt; property = new HashMap&lt;Property, String&gt;();\r\n        public Account() {\r\n        }\r\n\r\n        public enum Property {\r\n            USERID,\r\n            PASSWORD;\r\n        }\r\n    }\r\n\r\nI want to be able to access the `Property` enum outside of the `Account` class.\r\n\r\nThe reason I want to do this is because this is a *subclass* of a another, and I want to be able to access the properties of a given subclass without referring to a unique enum name (i.e.: without referring to each one as, say, `AccountProperty` or `ResearchProperty` or `TaskProperty` etc).","title":"Enum helper in a class (Java)","body":"<p>If I have an <code>Enum</code> as a <em>helper</em> in a Java class, is there any way to refer to that <code>Enum</code> outside of the class it's helping?</p>\n<p>Basically, what I have is this:</p>\n<pre><code>class Account extends MyClass {\n    HashMap&lt;Property, String&gt; property = new HashMap&lt;Property, String&gt;();\n    public Account() {\n    }\n\n    public enum Property {\n        USERID,\n        PASSWORD;\n    }\n}\n</code></pre>\n<p>I want to be able to access the <code>Property</code> enum outside of the <code>Account</code> class.</p>\n<p>The reason I want to do this is because this is a <em>subclass</em> of a another, and I want to be able to access the properties of a given subclass without referring to a unique enum name (i.e.: without referring to each one as, say, <code>AccountProperty</code> or <code>ResearchProperty</code> or <code>TaskProperty</code> etc).</p>\n"},{"tags":["java","terminal"],"comments":[{"owner":{"account_id":30898,"reputation":8927,"user_id":84538,"accept_rate":100,"display_name":"jon hanson"},"score":1,"creation_date":1683275066,"post_id":76180064,"comment_id":134344906,"body_markdown":"Yes, it&#39;s blocky, what is the actual problem?","body":"Yes, it&#39;s blocky, what is the actual problem?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1683275263,"post_id":76180064,"comment_id":134344942,"body_markdown":"You&#39;re not attempting to get that high-res (and animated!) image to appear in the terminal are you??","body":"You&#39;re not attempting to get that high-res (and animated!) image to appear in the terminal are you??"},{"owner":{"account_id":23361144,"reputation":1,"user_id":17704128,"display_name":"ducky"},"score":0,"creation_date":1683276168,"post_id":76180064,"comment_id":134345132,"body_markdown":"@g00se Not exactly looking for exactly high res but I have seen examples of this where it was outputted in a terminal in better quality and way recognizable than that","body":"@g00se Not exactly looking for exactly high res but I have seen examples of this where it was outputted in a terminal in better quality and way recognizable than that"},{"owner":{"account_id":23361144,"reputation":1,"user_id":17704128,"display_name":"ducky"},"score":0,"creation_date":1683276246,"post_id":76180064,"comment_id":134345150,"body_markdown":"@jon-hanson I havee already posted a comment about it but basically I&#39;ve seen examples of this where it was in way better quality and way recognizable than what mine is, which is strange I suppose","body":"@jon-hanson I havee already posted a comment about it but basically I&#39;ve seen examples of this where it was in way better quality and way recognizable than what mine is, which is strange I suppose"},{"owner":{"account_id":30898,"reputation":8927,"user_id":84538,"accept_rate":100,"display_name":"jon hanson"},"score":0,"creation_date":1683278439,"post_id":76180064,"comment_id":134345603,"body_markdown":"I think we need a more clear problem statement. The code is doing exactly what I would expect it to do, and it&#39;s not clear why you expect it to produce higer resolution images. Your approach is using terminal colour codes, so the resolution will be one colour (i.e. pixel) per character.","body":"I think we need a more clear problem statement. The code is doing exactly what I would expect it to do, and it&#39;s not clear why you expect it to produce higer resolution images. Your approach is using terminal colour codes, so the resolution will be one colour (i.e. pixel) per character."},{"owner":{"account_id":23361144,"reputation":1,"user_id":17704128,"display_name":"ducky"},"score":0,"creation_date":1683280924,"post_id":76180064,"comment_id":134346092,"body_markdown":"@jon-hanson I&#39;m more looking to see if there&#39;s a way to make the image more recognizable as I&#39;ve seen in other programs I&#39;ve used","body":"@jon-hanson I&#39;m more looking to see if there&#39;s a way to make the image more recognizable as I&#39;ve seen in other programs I&#39;ve used"}],"answers":[{"tags":[],"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683279333,"creation_date":1683279333,"answer_id":76180801,"question_id":76180064,"body_markdown":"Using [this](https://manytools.org/hacker-tools/convert-image-to-ansi-art/go/) site, I get the following in my terminal from your source image:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/AptzJ.png\r\n\r\nI post this, not as an answer, but more as a realistic assessment of what might be achieved.","title":"Outputting ANSI GIF In Java","body":"<p>Using <a href=\"https://manytools.org/hacker-tools/convert-image-to-ansi-art/go/\" rel=\"nofollow noreferrer\">this</a> site, I get the following in my terminal from your source image:</p>\n<p><a href=\"https://i.stack.imgur.com/AptzJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AptzJ.png\" alt=\"enter image description here\" /></a></p>\n<p>I post this, not as an answer, but more as a realistic assessment of what might be achieved.</p>\n"}],"owner":{"account_id":23361144,"reputation":1,"user_id":17704128,"display_name":"ducky"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1683279333,"creation_date":1683273955,"question_id":76180064,"body_markdown":"So, I have this code that is meant to take a given .gif file and turn each frame into ANSI chars and then output it (to the PuTTy terminal) with the correct colors. My issue is, It&#39;s very blocky. I have been trying to fix this for around 2 hours and cannot get around it, I have provided the code &amp; picture of the issue\r\n\r\nCode:\r\n```\r\npublic static void displayImage(BufferedImage image, BufferedWriter out) throws IOException, InterruptedException {\r\n        int consoleWidth = 80;\r\n        int consoleHeight = 24;\r\n        double imageWidth = image.getWidth();\r\n        double imageHeight = image.getHeight();\r\n        double aspectRatio = imageWidth / imageHeight;\r\n        int scaledWidth = consoleWidth;\r\n        int scaledHeight = (int) (consoleWidth / aspectRatio);\r\n        if (scaledHeight &gt; consoleHeight) {\r\n            scaledHeight = consoleHeight;\r\n            scaledWidth = (int) (consoleHeight * aspectRatio);\r\n        }\r\n        BufferedImage scaledImage = new BufferedImage(scaledWidth, scaledHeight, BufferedImage.TYPE_INT_ARGB);\r\n        Graphics2D g = scaledImage.createGraphics();\r\n        g.drawImage(image, 0, 0, scaledWidth, scaledHeight, null);\r\n        g.dispose();\r\n        out.write(String.format(&quot;\\033[31m\\033[47m&quot;));\r\n        out.write(String.format(&quot;\\033[2J&quot;));\r\n        out.write(String.format(&quot;\\033[1;1H&quot;));\r\n        out.write(String.format(&quot;\\033[?25l&quot;));\r\n        out.write(String.format(&quot;\\033[0m&quot;));\r\n        out.write(String.format(&quot;\\033[%dA&quot;, consoleHeight));\r\n        for (int y = 0; y &lt; consoleHeight; y++) {\r\n            for (int x = 0; x &lt; consoleWidth; x++) {\r\n                int sx = x * scaledWidth / consoleWidth;\r\n                int sy = y * scaledHeight / consoleHeight;\r\n                int color = scaledImage.getRGB(sx, sy);\r\n                int alpha = (color &gt;&gt; 24) &amp; 0xff;\r\n                int red = (color &gt;&gt; 16) &amp; 0xff;\r\n                int green = (color &gt;&gt; 8) &amp; 0xff;\r\n                int blue = color &amp; 0xff;\r\n                // convert RGB to 256-color ANSI code\r\n                int ansiCode = rgbToAnsi(red, green, blue);\r\n                // print the ASCII character with foreground and background colors\r\n                out.write(String.format(&quot;\\u001b[48;5;%dm\\u001b[38;5;%dm &quot;, ansiCode, ansiCode));\r\n            }\r\n            out.write(&quot;\\u001b[0m\\r\\n&quot;); // reset colors\r\n        }\r\n        out.write(String.format(&quot;\\033[%dA&quot;, consoleHeight));\r\n        out.write(String.format(&quot;\\033[?25h&quot;));\r\n        out.flush();\r\n        Thread.sleep(250);\r\n    }\r\n\r\n    private static int rgbToAnsi(int red, int green, int blue) {\r\n        // convert RGB to 256-color ANSI code\r\n        int gray = (int) (0.299 * red + 0.587 * green + 0.114 * blue);\r\n        if (gray &lt; 8) {\r\n            return 16;\r\n        }\r\n        if (gray &gt; 248) {\r\n            return 231;\r\n        }\r\n        int r = getClosestColorValue(red);\r\n        int g = getClosestColorValue(green);\r\n        int b = getClosestColorValue(blue);\r\n        return 16 + 36 * r + 6 * g + b;\r\n    }\r\n\r\n    private static int getClosestColorValue(int value) {\r\n        return Math.round(value / 51.0f);\r\n    }\r\n\r\n```\r\nIssue:\r\n[Blocky Image](https://i.stack.imgur.com/YF7ru.png)\r\n[Blocky Image #2](https://i.stack.imgur.com/drD3l.png)\r\n\r\nThe Gif I&#39;m trying to use:\r\nhttps://tenor.com/view/explosion-fate-anime-gif-26130203","title":"Outputting ANSI GIF In Java","body":"<p>So, I have this code that is meant to take a given .gif file and turn each frame into ANSI chars and then output it (to the PuTTy terminal) with the correct colors. My issue is, It's very blocky. I have been trying to fix this for around 2 hours and cannot get around it, I have provided the code &amp; picture of the issue</p>\n<p>Code:</p>\n<pre><code>public static void displayImage(BufferedImage image, BufferedWriter out) throws IOException, InterruptedException {\n        int consoleWidth = 80;\n        int consoleHeight = 24;\n        double imageWidth = image.getWidth();\n        double imageHeight = image.getHeight();\n        double aspectRatio = imageWidth / imageHeight;\n        int scaledWidth = consoleWidth;\n        int scaledHeight = (int) (consoleWidth / aspectRatio);\n        if (scaledHeight &gt; consoleHeight) {\n            scaledHeight = consoleHeight;\n            scaledWidth = (int) (consoleHeight * aspectRatio);\n        }\n        BufferedImage scaledImage = new BufferedImage(scaledWidth, scaledHeight, BufferedImage.TYPE_INT_ARGB);\n        Graphics2D g = scaledImage.createGraphics();\n        g.drawImage(image, 0, 0, scaledWidth, scaledHeight, null);\n        g.dispose();\n        out.write(String.format(&quot;\\033[31m\\033[47m&quot;));\n        out.write(String.format(&quot;\\033[2J&quot;));\n        out.write(String.format(&quot;\\033[1;1H&quot;));\n        out.write(String.format(&quot;\\033[?25l&quot;));\n        out.write(String.format(&quot;\\033[0m&quot;));\n        out.write(String.format(&quot;\\033[%dA&quot;, consoleHeight));\n        for (int y = 0; y &lt; consoleHeight; y++) {\n            for (int x = 0; x &lt; consoleWidth; x++) {\n                int sx = x * scaledWidth / consoleWidth;\n                int sy = y * scaledHeight / consoleHeight;\n                int color = scaledImage.getRGB(sx, sy);\n                int alpha = (color &gt;&gt; 24) &amp; 0xff;\n                int red = (color &gt;&gt; 16) &amp; 0xff;\n                int green = (color &gt;&gt; 8) &amp; 0xff;\n                int blue = color &amp; 0xff;\n                // convert RGB to 256-color ANSI code\n                int ansiCode = rgbToAnsi(red, green, blue);\n                // print the ASCII character with foreground and background colors\n                out.write(String.format(&quot;\\u001b[48;5;%dm\\u001b[38;5;%dm &quot;, ansiCode, ansiCode));\n            }\n            out.write(&quot;\\u001b[0m\\r\\n&quot;); // reset colors\n        }\n        out.write(String.format(&quot;\\033[%dA&quot;, consoleHeight));\n        out.write(String.format(&quot;\\033[?25h&quot;));\n        out.flush();\n        Thread.sleep(250);\n    }\n\n    private static int rgbToAnsi(int red, int green, int blue) {\n        // convert RGB to 256-color ANSI code\n        int gray = (int) (0.299 * red + 0.587 * green + 0.114 * blue);\n        if (gray &lt; 8) {\n            return 16;\n        }\n        if (gray &gt; 248) {\n            return 231;\n        }\n        int r = getClosestColorValue(red);\n        int g = getClosestColorValue(green);\n        int b = getClosestColorValue(blue);\n        return 16 + 36 * r + 6 * g + b;\n    }\n\n    private static int getClosestColorValue(int value) {\n        return Math.round(value / 51.0f);\n    }\n\n</code></pre>\n<p>Issue:\n<a href=\"https://i.stack.imgur.com/YF7ru.png\" rel=\"nofollow noreferrer\">Blocky Image</a>\n<a href=\"https://i.stack.imgur.com/drD3l.png\" rel=\"nofollow noreferrer\">Blocky Image #2</a></p>\n<p>The Gif I'm trying to use:\n<a href=\"https://tenor.com/view/explosion-fate-anime-gif-26130203\" rel=\"nofollow noreferrer\">https://tenor.com/view/explosion-fate-anime-gif-26130203</a></p>\n"},{"tags":["java","pycharm","java-17"],"comments":[{"owner":{"account_id":14950045,"reputation":11564,"user_id":10794031,"display_name":"bad_coder"},"score":0,"creation_date":1683317711,"post_id":76180791,"comment_id":134354245,"body_markdown":"I&#39;m guessing the new incompatible Java is being taken from [the system path](https://stackoverflow.com/questions/5971312/how-to-set-environment-variables-in-python) so if you change it there PyCharm should start working again.","body":"I&#39;m guessing the new incompatible Java is being taken from <a href=\"https://stackoverflow.com/questions/5971312/how-to-set-environment-variables-in-python\">the system path</a> so if you change it there PyCharm should start working again."}],"owner":{"account_id":17606614,"reputation":2398,"user_id":12775531,"display_name":"s510"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":230,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683279297,"creation_date":1683279297,"question_id":76180791,"body_markdown":"After I accidentally changed the java version (downgraded it from 17 to 11) from settings menu, my PyCharm wont start at all. I even tried to remove it and reinstall it but nothing happens so far. Getting the below error after reinstalling pycharm. I know I can delete all the files related to Pycharm in my ubuntu system, and reinstall, however I am looking for some elegant solution where I can bring back to the previous state.\r\n\r\nError:\r\n\r\n    $ pycharm-professional \r\n    OpenJDK 64-Bit Server VM warning: Archived non-system classes are disabled because the java.system.class.loader property is specified (value = &quot;com.intellij.util.lang.PathClassLoader&quot;). To use archived non-system classes, this property must not be set\r\n    CompileCommand: exclude com/intellij/openapi/vfs/impl/FilePartNodeRoot.trieDescend bool exclude = true\r\n    \r\n    Start Failed\r\n    Internal error. Please refer to https://jb.gg/ide/critical-startup-errors\r\n    \r\n    java.lang.IllegalStateException: @NotNull method com/intellij/util/ui/EDT.getEventDispatchThread must not return null\r\n    \tat com.intellij.util.ui.EDT.$$$reportNull$$$0(EDT.java)\r\n    \tat com.intellij.util.ui.EDT.getEventDispatchThread(EDT.java:48)\r\n    \tat com.intellij.idea.StartupUtil$startApplication$appDeferred$1$rwLockHolderDeferred$1.invokeSuspend(StartupUtil.kt:231)\r\n    \tat kotlin.coroutines.jvm.internal.BaseContinuationImpl.resumeWith(ContinuationImpl.kt:33)\r\n    \tat kotlinx.coroutines.DispatchedTask.run(DispatchedTask.kt:106)\r\n    \tat kotlinx.coroutines.scheduling.CoroutineScheduler.runSafely(CoroutineScheduler.kt:570)\r\n    \tat kotlinx.coroutines.scheduling.CoroutineScheduler$Worker.executeTask(CoroutineScheduler.kt:750)\r\n    \tat kotlinx.coroutines.scheduling.CoroutineScheduler$Worker.runWorker(CoroutineScheduler.kt:677)\r\n    \tat kotlinx.coroutines.scheduling.CoroutineScheduler$Worker.run(CoroutineScheduler.kt:664)\r\n    \tSuppressed: java.lang.UnsatisfiedLinkError: Can&#39;t load library: /usr/lib/jvm/java-17-openjdk-amd64/lib/libawt_xawt.so\r\n    \t\tat java.base/java.lang.ClassLoader.loadLibrary(ClassLoader.java:2393)\r\n    \t\tat java.base/java.lang.Runtime.load0(Runtime.java:755)\r\n    \t\tat java.base/java.lang.System.load(System.java:1953)\r\n    \t\tat java.base/jdk.internal.loader.NativeLibraries.load(Native Method)\r\n    \t\tat java.base/jdk.internal.loader.NativeLibraries$NativeLibraryImpl.open(NativeLibraries.java:388)\r\n    \t\tat java.base/jdk.internal.loader.NativeLibraries.loadLibrary(NativeLibraries.java:232)\r\n    \t\tat java.base/jdk.internal.loader.NativeLibraries.loadLibrary(NativeLibraries.java:174)\r\n    \t\tat java.base/jdk.internal.loader.NativeLibraries.findFromPaths(NativeLibraries.java:315)\r\n    \t\tat java.base/jdk.internal.loader.NativeLibraries.loadLibrary(NativeLibraries.java:285)\r\n    \t\tat java.base/java.lang.ClassLoader.loadLibrary(ClassLoader.java:2398)\r\n    \t\tat java.base/java.lang.Runtime.loadLibrary0(Runtime.java:818)\r\n    \t\tat java.base/java.lang.System.loadLibrary(System.java:1989)\r\n    \t\tat java.desktop/java.awt.Toolkit$2.run(Toolkit.java:1392)\r\n    \t\tat java.desktop/java.awt.Toolkit$2.run(Toolkit.java:1390)\r\n    \t\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:318)\r\n    \t\tat java.desktop/java.awt.Toolkit.loadLibraries(Toolkit.java:1389)\r\n    \t\tat java.desktop/java.awt.Toolkit.initStatic(Toolkit.java:1427)\r\n    \t\tat java.desktop/java.awt.Toolkit.&lt;clinit&gt;(Toolkit.java:1401)\r\n    \t\tat java.desktop/java.awt.Color.&lt;clinit&gt;(Color.java:277)\r\n    \t\tat com.intellij.ide.ui.laf.IdeaLaf.&lt;clinit&gt;(IdeaLaf.java:24)\r\n    \t\tat java.base/java.lang.Class.forName0(Native Method)\r\n    \t\tat java.base/java.lang.Class.forName(Class.java:467)\r\n    \t\tat com.intellij.idea.StartupUtil$preloadLafClasses$1.invokeSuspend(StartupUtil.kt:518)\r\n    \t\tat kotlin.coroutines.jvm.internal.BaseContinuationImpl.resumeWith(ContinuationImpl.kt:33)\r\n    \t\tat kotlinx.coroutines.DispatchedTask.run(DispatchedTask.kt:106)\r\n    \t\tat kotlinx.coroutines.internal.LimitedDispatcher.run(LimitedDispatcher.kt:42)\r\n    \t\tat kotlinx.coroutines.scheduling.TaskImpl.run(Tasks.kt:95)\r\n    \t\t... 4 more\r\n    \t\tSuppressed: java.lang.NoClassDefFoundError: Could not initialize class java.awt.Toolkit\r\n    \t\t\tat java.desktop/java.awt.EventQueue.invokeLater(EventQueue.java:1314)\r\n    \t\t\tat com.intellij.openapi.application.impl.RawSwingDispatcher.dispatch(RawSwingDispatcher.kt:16)\r\n    \t\t\tat kotlinx.coroutines.internal.DispatchedContinuationKt.resumeCancellableWith(DispatchedContinuation.kt:322)\r\n    \t\t\tat kotlinx.coroutines.intrinsics.CancellableKt.startCoroutineCancellable(Cancellable.kt:30)\r\n    \t\t\tat kotlinx.coroutines.intrinsics.CancellableKt.startCoroutineCancellable$default(Cancellable.kt:25)\r\n    \t\t\tat kotlinx.coroutines.CoroutineStart.invoke(CoroutineStart.kt:110)\r\n    \t\t\tat kotlinx.coroutines.AbstractCoroutine.start(AbstractCoroutine.kt:126)\r\n    \t\t\tat kotlinx.coroutines.BuildersKt__Builders_commonKt.launch(Builders.common.kt:56)\r\n    \t\t\tat kotlinx.coroutines.BuildersKt.launch(Unknown Source)\r\n    \t\t\tat kotlinx.coroutines.BuildersKt__Builders_commonKt.launch$default(Builders.common.kt:47)\r\n    \t\t\tat kotlinx.coroutines.BuildersKt.launch$default(Unknown Source)\r\n    \t\t\tat com.intellij.idea.StartupUtil$updateFrameClassAndWindowIconAndPreloadSystemFonts$1.invokeSuspend(StartupUtil.kt:582)\r\n    \t\t\tat kotlin.coroutines.jvm.internal.BaseContinuationImpl.resumeWith(ContinuationImpl.kt:33)\r\n    \t\t\tat kotlinx.coroutines.DispatchedTask.run(DispatchedTask.kt:106)\r\n    \t\t\t... 4 more\r\n    \t\tSuppressed: [CIRCULAR REFERENCE: java.lang.IllegalStateException: @NotNull method com/intellij/util/ui/EDT.getEventDispatchThread must not return null]\r\n    \r\n    -----\r\n    Your JRE: 17.0.6+10-Ubuntu-0ubuntu122.04 amd64 (Private Build)\r\n    /usr/lib/jvm/java-17-openjdk-amd64\r\n    \r\n    Also, a UI exception occurred on an attempt to show the above message\r\n    java.lang.NoClassDefFoundError: Could not initialize class java.awt.Toolkit\r\n    \tat java.desktop/java.awt.Component.&lt;clinit&gt;(Component.java:624)\r\n    \tat com.intellij.idea.StartupErrorReporter.showMessage(StartupErrorReporter.java:85)\r\n    \tat com.intellij.idea.StartupErrorReporter.showMessage(StartupErrorReporter.java:39)\r\n    \tat com.intellij.idea.Main.main(Main.kt:71)\r\n\r\n","title":"Pycharm professional startup failure after change in java version","body":"<p>After I accidentally changed the java version (downgraded it from 17 to 11) from settings menu, my PyCharm wont start at all. I even tried to remove it and reinstall it but nothing happens so far. Getting the below error after reinstalling pycharm. I know I can delete all the files related to Pycharm in my ubuntu system, and reinstall, however I am looking for some elegant solution where I can bring back to the previous state.</p>\n<p>Error:</p>\n<pre><code>$ pycharm-professional \nOpenJDK 64-Bit Server VM warning: Archived non-system classes are disabled because the java.system.class.loader property is specified (value = &quot;com.intellij.util.lang.PathClassLoader&quot;). To use archived non-system classes, this property must not be set\nCompileCommand: exclude com/intellij/openapi/vfs/impl/FilePartNodeRoot.trieDescend bool exclude = true\n\nStart Failed\nInternal error. Please refer to https://jb.gg/ide/critical-startup-errors\n\njava.lang.IllegalStateException: @NotNull method com/intellij/util/ui/EDT.getEventDispatchThread must not return null\n    at com.intellij.util.ui.EDT.$$$reportNull$$$0(EDT.java)\n    at com.intellij.util.ui.EDT.getEventDispatchThread(EDT.java:48)\n    at com.intellij.idea.StartupUtil$startApplication$appDeferred$1$rwLockHolderDeferred$1.invokeSuspend(StartupUtil.kt:231)\n    at kotlin.coroutines.jvm.internal.BaseContinuationImpl.resumeWith(ContinuationImpl.kt:33)\n    at kotlinx.coroutines.DispatchedTask.run(DispatchedTask.kt:106)\n    at kotlinx.coroutines.scheduling.CoroutineScheduler.runSafely(CoroutineScheduler.kt:570)\n    at kotlinx.coroutines.scheduling.CoroutineScheduler$Worker.executeTask(CoroutineScheduler.kt:750)\n    at kotlinx.coroutines.scheduling.CoroutineScheduler$Worker.runWorker(CoroutineScheduler.kt:677)\n    at kotlinx.coroutines.scheduling.CoroutineScheduler$Worker.run(CoroutineScheduler.kt:664)\n    Suppressed: java.lang.UnsatisfiedLinkError: Can't load library: /usr/lib/jvm/java-17-openjdk-amd64/lib/libawt_xawt.so\n        at java.base/java.lang.ClassLoader.loadLibrary(ClassLoader.java:2393)\n        at java.base/java.lang.Runtime.load0(Runtime.java:755)\n        at java.base/java.lang.System.load(System.java:1953)\n        at java.base/jdk.internal.loader.NativeLibraries.load(Native Method)\n        at java.base/jdk.internal.loader.NativeLibraries$NativeLibraryImpl.open(NativeLibraries.java:388)\n        at java.base/jdk.internal.loader.NativeLibraries.loadLibrary(NativeLibraries.java:232)\n        at java.base/jdk.internal.loader.NativeLibraries.loadLibrary(NativeLibraries.java:174)\n        at java.base/jdk.internal.loader.NativeLibraries.findFromPaths(NativeLibraries.java:315)\n        at java.base/jdk.internal.loader.NativeLibraries.loadLibrary(NativeLibraries.java:285)\n        at java.base/java.lang.ClassLoader.loadLibrary(ClassLoader.java:2398)\n        at java.base/java.lang.Runtime.loadLibrary0(Runtime.java:818)\n        at java.base/java.lang.System.loadLibrary(System.java:1989)\n        at java.desktop/java.awt.Toolkit$2.run(Toolkit.java:1392)\n        at java.desktop/java.awt.Toolkit$2.run(Toolkit.java:1390)\n        at java.base/java.security.AccessController.doPrivileged(AccessController.java:318)\n        at java.desktop/java.awt.Toolkit.loadLibraries(Toolkit.java:1389)\n        at java.desktop/java.awt.Toolkit.initStatic(Toolkit.java:1427)\n        at java.desktop/java.awt.Toolkit.&lt;clinit&gt;(Toolkit.java:1401)\n        at java.desktop/java.awt.Color.&lt;clinit&gt;(Color.java:277)\n        at com.intellij.ide.ui.laf.IdeaLaf.&lt;clinit&gt;(IdeaLaf.java:24)\n        at java.base/java.lang.Class.forName0(Native Method)\n        at java.base/java.lang.Class.forName(Class.java:467)\n        at com.intellij.idea.StartupUtil$preloadLafClasses$1.invokeSuspend(StartupUtil.kt:518)\n        at kotlin.coroutines.jvm.internal.BaseContinuationImpl.resumeWith(ContinuationImpl.kt:33)\n        at kotlinx.coroutines.DispatchedTask.run(DispatchedTask.kt:106)\n        at kotlinx.coroutines.internal.LimitedDispatcher.run(LimitedDispatcher.kt:42)\n        at kotlinx.coroutines.scheduling.TaskImpl.run(Tasks.kt:95)\n        ... 4 more\n        Suppressed: java.lang.NoClassDefFoundError: Could not initialize class java.awt.Toolkit\n            at java.desktop/java.awt.EventQueue.invokeLater(EventQueue.java:1314)\n            at com.intellij.openapi.application.impl.RawSwingDispatcher.dispatch(RawSwingDispatcher.kt:16)\n            at kotlinx.coroutines.internal.DispatchedContinuationKt.resumeCancellableWith(DispatchedContinuation.kt:322)\n            at kotlinx.coroutines.intrinsics.CancellableKt.startCoroutineCancellable(Cancellable.kt:30)\n            at kotlinx.coroutines.intrinsics.CancellableKt.startCoroutineCancellable$default(Cancellable.kt:25)\n            at kotlinx.coroutines.CoroutineStart.invoke(CoroutineStart.kt:110)\n            at kotlinx.coroutines.AbstractCoroutine.start(AbstractCoroutine.kt:126)\n            at kotlinx.coroutines.BuildersKt__Builders_commonKt.launch(Builders.common.kt:56)\n            at kotlinx.coroutines.BuildersKt.launch(Unknown Source)\n            at kotlinx.coroutines.BuildersKt__Builders_commonKt.launch$default(Builders.common.kt:47)\n            at kotlinx.coroutines.BuildersKt.launch$default(Unknown Source)\n            at com.intellij.idea.StartupUtil$updateFrameClassAndWindowIconAndPreloadSystemFonts$1.invokeSuspend(StartupUtil.kt:582)\n            at kotlin.coroutines.jvm.internal.BaseContinuationImpl.resumeWith(ContinuationImpl.kt:33)\n            at kotlinx.coroutines.DispatchedTask.run(DispatchedTask.kt:106)\n            ... 4 more\n        Suppressed: [CIRCULAR REFERENCE: java.lang.IllegalStateException: @NotNull method com/intellij/util/ui/EDT.getEventDispatchThread must not return null]\n\n-----\nYour JRE: 17.0.6+10-Ubuntu-0ubuntu122.04 amd64 (Private Build)\n/usr/lib/jvm/java-17-openjdk-amd64\n\nAlso, a UI exception occurred on an attempt to show the above message\njava.lang.NoClassDefFoundError: Could not initialize class java.awt.Toolkit\n    at java.desktop/java.awt.Component.&lt;clinit&gt;(Component.java:624)\n    at com.intellij.idea.StartupErrorReporter.showMessage(StartupErrorReporter.java:85)\n    at com.intellij.idea.StartupErrorReporter.showMessage(StartupErrorReporter.java:39)\n    at com.intellij.idea.Main.main(Main.kt:71)\n</code></pre>\n"},{"tags":["java","selenium-webdriver","appium"],"answers":[{"comments":[{"owner":{"account_id":13329490,"reputation":31,"user_id":9621353,"display_name":"iMat"},"score":0,"creation_date":1683284782,"post_id":76180783,"comment_id":134346807,"body_markdown":"I also tried without the slash at the end of URL - the same issue. At the moment without any changes code is hanging before first method was called","body":"I also tried without the slash at the end of URL - the same issue. At the moment without any changes code is hanging before first method was called"},{"owner":{"account_id":21257490,"reputation":76,"user_id":15638753,"display_name":"ChrisMersi"},"score":0,"creation_date":1683286933,"post_id":76180783,"comment_id":134347208,"body_markdown":"Is your driver static? What about the server logs?\n\nI also see `Driver info: driver.version: AndroidDriver` in your logs, but you return iOS driver","body":"Is your driver static? What about the server logs?  I also see <code>Driver info: driver.version: AndroidDriver</code> in your logs, but you return iOS driver"},{"owner":{"account_id":13329490,"reputation":31,"user_id":9621353,"display_name":"iMat"},"score":0,"creation_date":1683287460,"post_id":76180783,"comment_id":134347317,"body_markdown":"I put wrong logs, cuz I tired at both, Android and iOS. For AndroidDriver I have similar method to return it using UIAutomator2Options. Server is not logging anything - looks like Java Client not send any proper message to server. Driver is not static, it&#39;s returned from Factory according to used device platform name","body":"I put wrong logs, cuz I tired at both, Android and iOS. For AndroidDriver I have similar method to return it using UIAutomator2Options. Server is not logging anything - looks like Java Client not send any proper message to server. Driver is not static, it&#39;s returned from Factory according to used device platform name"}],"tags":[],"owner":{"account_id":21257490,"reputation":76,"user_id":15638753,"display_name":"ChrisMersi"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683279221,"creation_date":1683279221,"answer_id":76180783,"question_id":76180218,"body_markdown":"Try removing last slash from your URL.\r\n\r\nSo it becomes: \r\n``` Java\r\nreturn new IOSDriver(new URL(&quot;http://127.0.0.1:4723&quot;), options);\r\n```\r\n","title":"Appium 2 - can&#39;t connect to server from Java Code","body":"<p>Try removing last slash from your URL.</p>\n<p>So it becomes:</p>\n<pre><code>return new IOSDriver(new URL(&quot;http://127.0.0.1:4723&quot;), options);\n</code></pre>\n"}],"owner":{"account_id":13329490,"reputation":31,"user_id":9621353,"display_name":"iMat"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":261,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683279221,"creation_date":1683275202,"question_id":76180218,"body_markdown":"I had to update Selenium and Appium at my test project. My current configuration is:\r\n- Selenium 4 \r\n- Appium 2\r\n\r\nAfter all necessary changes mentioned at migration guides my Java Tests are not working. It&#39;s not possible to connect to Appium Server (started via CLI). Im using real Devices\r\n\r\nIt&#39;s not working for both Android and iOS (UIAutomator2 and XCUITest drivers). Drivers versions are correct in context of Appium 2 and my Xcode version\r\n\r\nAppium Inspector is working fine and Im able to connect to both devices (iOS and Android)\r\n```\r\norg.openqa.selenium.SessionNotCreatedException: Could not start a new session. Possible causes are invalid address of the remote server or browser start-up failure. \r\nHost info: host: &#39;MYPC.local&#39;, ip: &#39;fe80:0:0:0:14a6:1f6d:5e7b:a5f3%en0&#39;\r\n\r\n```\r\n```\r\nCaused by: org.openqa.selenium.WebDriverException: java.lang.reflect.InvocationTargetException\r\nBuild info: version: &#39;4.5.3&#39;, revision: &#39;4b786a1e430&#39;\r\nSystem info: os.name: &#39;Mac OS X&#39;, os.arch: &#39;x86_64&#39;, os.version: &#39;11.2&#39;, java.version: &#39;11.0.11&#39;\r\nDriver info: driver.version: AndroidDriver\r\n```\r\n\r\nCommand to start server:\r\n\r\n    Appium server --address 127.0.0.1 --allow-cors\r\n\r\nCapabilities and Driver initialisation\r\n```\r\nXCUITestOptions options = new XCUITestOptions()\r\n                .setUdid(deviceUdid)\r\n                .setPlatformName(platformName)\r\n                .setPlatformVersion(platformVersion)\r\n                .setDeviceName(deviceName)\r\n                .setAutomationName(&quot;XCUITest&quot;)\r\n                .setXcodeCertificate(new XcodeCertificate(&quot;SOME VALUE&quot;, &quot;Apple Development&quot;))\r\n                .setSafariIgnoreFraudWarning(true)\r\n                .setNewCommandTimeout(Duration.ofSeconds(75))\r\n                .setBundleId(bundleID);\r\n\r\nreturn new IOSDriver(new URL(&quot;http://127.0.0.1:4723/&quot;), options);\r\n```\r\n\r\nAny suggestions? Did you had similar issue?\r\n\r\nBR\r\nMateusz","title":"Appium 2 - can&#39;t connect to server from Java Code","body":"<p>I had to update Selenium and Appium at my test project. My current configuration is:</p>\n<ul>\n<li>Selenium 4</li>\n<li>Appium 2</li>\n</ul>\n<p>After all necessary changes mentioned at migration guides my Java Tests are not working. It's not possible to connect to Appium Server (started via CLI). Im using real Devices</p>\n<p>It's not working for both Android and iOS (UIAutomator2 and XCUITest drivers). Drivers versions are correct in context of Appium 2 and my Xcode version</p>\n<p>Appium Inspector is working fine and Im able to connect to both devices (iOS and Android)</p>\n<pre><code>org.openqa.selenium.SessionNotCreatedException: Could not start a new session. Possible causes are invalid address of the remote server or browser start-up failure. \nHost info: host: 'MYPC.local', ip: 'fe80:0:0:0:14a6:1f6d:5e7b:a5f3%en0'\n\n</code></pre>\n<pre><code>Caused by: org.openqa.selenium.WebDriverException: java.lang.reflect.InvocationTargetException\nBuild info: version: '4.5.3', revision: '4b786a1e430'\nSystem info: os.name: 'Mac OS X', os.arch: 'x86_64', os.version: '11.2', java.version: '11.0.11'\nDriver info: driver.version: AndroidDriver\n</code></pre>\n<p>Command to start server:</p>\n<pre><code>Appium server --address 127.0.0.1 --allow-cors\n</code></pre>\n<p>Capabilities and Driver initialisation</p>\n<pre><code>XCUITestOptions options = new XCUITestOptions()\n                .setUdid(deviceUdid)\n                .setPlatformName(platformName)\n                .setPlatformVersion(platformVersion)\n                .setDeviceName(deviceName)\n                .setAutomationName(&quot;XCUITest&quot;)\n                .setXcodeCertificate(new XcodeCertificate(&quot;SOME VALUE&quot;, &quot;Apple Development&quot;))\n                .setSafariIgnoreFraudWarning(true)\n                .setNewCommandTimeout(Duration.ofSeconds(75))\n                .setBundleId(bundleID);\n\nreturn new IOSDriver(new URL(&quot;http://127.0.0.1:4723/&quot;), options);\n</code></pre>\n<p>Any suggestions? Did you had similar issue?</p>\n<p>BR\nMateusz</p>\n"},{"tags":["java","apache-spark"],"owner":{"account_id":23516184,"reputation":337,"user_id":17564051,"display_name":"Oxana Grey"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683278531,"creation_date":1683278531,"question_id":76180674,"body_markdown":"I&#39;ve a two data sets, `A and B` and both are having same one column, named as `status`. Its a hypothetical situation to understand to have evenly split of data among partitions.\r\n\r\nIn both tables, `A and B`, values can `true or false`, 90% of data is as `true` in both tables, and data size we can thing of something which could create this skewness issue.\r\n\r\n    status\r\n    true\r\n    true\r\n    false\r\n    .\r\n    .\r\n\r\nTable B\r\n\r\n    status\r\n    true\r\n    true\r\n    .\r\n    .\r\n\r\n\r\nWhen I left join on status, it will not distribute data evenly, what salt technique I can add in this to have even distribute of data ?\r\n\r\n","title":"How data skew can be handled?","body":"<p>I've a two data sets, <code>A and B</code> and both are having same one column, named as <code>status</code>. Its a hypothetical situation to understand to have evenly split of data among partitions.</p>\n<p>In both tables, <code>A and B</code>, values can <code>true or false</code>, 90% of data is as <code>true</code> in both tables, and data size we can thing of something which could create this skewness issue.</p>\n<pre><code>status\ntrue\ntrue\nfalse\n.\n.\n</code></pre>\n<p>Table B</p>\n<pre><code>status\ntrue\ntrue\n.\n.\n</code></pre>\n<p>When I left join on status, it will not distribute data evenly, what salt technique I can add in this to have even distribute of data ?</p>\n"},{"tags":["java","spring","spring-boot","events"],"comments":[{"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1683285697,"post_id":76180410,"comment_id":134346972,"body_markdown":"Regarding 1. you are not calling API functions, you are publishing events. If there are multiple handlers/listeners for the event, all of them will be called.","body":"Regarding 1. you are not calling API functions, you are publishing events. If there are multiple handlers/listeners for the event, all of them will be called."}],"answers":[{"comments":[{"owner":{"account_id":10146514,"reputation":518,"user_id":7494517,"display_name":"YMG"},"score":0,"creation_date":1683538133,"post_id":76180673,"comment_id":134376637,"body_markdown":"Actually, as a simple example, I want to publish 2 events, 1 of them prints out parameter (just for an example) and another one prints out of time. But, when I published 2 events, 2 event listeners called 2 times each. Expected 1 time for each","body":"Actually, as a simple example, I want to publish 2 events, 1 of them prints out parameter (just for an example) and another one prints out of time. But, when I published 2 events, 2 event listeners called 2 times each. Expected 1 time for each"}],"tags":[],"owner":{"account_id":7630732,"reputation":1728,"user_id":5785871,"accept_rate":80,"display_name":"mslowiak"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683278529,"creation_date":1683278529,"answer_id":76180673,"question_id":76180410,"body_markdown":"Regarding 1.\r\nDo you want to make two concurrent API requests?\r\nIn this case, to ensure that the hotel will be booked only once, you should look at optimistic/pessimistic locking.\r\n\r\nRegarding 2.\r\nIt really depends what do the logic that will emit nested event.\r\nFor sure you can take a look at the [outbox pattern][1] if you want to ensure that operation will be transactional and eventually consistent\r\n\r\n\r\n  [1]: https://microservices.io/patterns/data/transactional-outbox.html","title":"What if I want to pass same object in different events in Spring Boot","body":"<p>Regarding 1.\nDo you want to make two concurrent API requests?\nIn this case, to ensure that the hotel will be booked only once, you should look at optimistic/pessimistic locking.</p>\n<p>Regarding 2.\nIt really depends what do the logic that will emit nested event.\nFor sure you can take a look at the <a href=\"https://microservices.io/patterns/data/transactional-outbox.html\" rel=\"nofollow noreferrer\">outbox pattern</a> if you want to ensure that operation will be transactional and eventually consistent</p>\n"}],"owner":{"account_id":10146514,"reputation":518,"user_id":7494517,"display_name":"YMG"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":249,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683278529,"creation_date":1683276617,"question_id":76180410,"body_markdown":"I am working on event driven things and Spring Boot Application Events. I have 2 questions about it.\r\n\r\nSo I created some basic classes such as (basic hotel reservation app)\r\n\r\nModel Class\r\n\r\n    public class HotelBookRequest {\r\n      private String userID;\r\n      private String hotelID;\r\n\r\n\r\n      public String getUserID() {\r\n          return userID;\r\n      }\r\n\r\n      public void setUserID(String userID) {\r\n         this.userID = userID;\r\n      }\r\n\r\n      public String getHotelID() {\r\n          return hotelID;\r\n      }\r\n\r\n      public void setHotelID(String hotelID) {\r\n          this.hotelID = hotelID;\r\n      }\r\n\r\n      @Override\r\n      public String toString() {\r\n          return &quot;HotelBookRequest{&quot; +\r\n                &quot;userID=&#39;&quot; + userID + &#39;\\&#39;&#39; +\r\n                &quot;, hotelID=&#39;&quot; + hotelID + &#39;\\&#39;&#39; +\r\n                &#39;}&#39;;\r\n    }\r\n\r\n\r\nAPI\r\n\r\n    @RestController\r\n    @RequestMapping(&quot;/book&quot;)\r\n    public class BookingApi {\r\n        @Autowired\r\n        ReservationService reservationService;\r\n        @PostMapping\r\n        public void bookHotel(@RequestBody HotelBookRequest hotelBookRequest){\r\n            System.out.println(&quot;Request Processing...&quot;);\r\n            reservationService.publishReservationEvent(hotelBookRequest);\r\n            reservationService.publishMsgEvent(hotelBookRequest);\r\n        }\r\n    \r\n    \r\n    }\r\n\r\n\r\nService\r\n\r\n    @Service\r\n    public class ReservationService {\r\n        @Autowired\r\n        private ApplicationEventPublisher applicationEventPublisher;\r\n    \r\n        public void publishReservationEvent(HotelBookRequest hotelBookRequest){\r\n            applicationEventPublisher.publishEvent(hotelBookRequest);\r\n        }\r\n    \r\n        public void publishMsgEvent(HotelBookRequest hotelBookRequest){\r\n            applicationEventPublisher.publishEvent(hotelBookRequest);\r\n        }\r\n    \r\n    }\r\n\r\n\r\nand Event Listener\r\n\r\n    @Component\r\n    public class ReservationEventListener {\r\n    \r\n        @Autowired\r\n        ReservationService service;\r\n    \r\n        @Async\r\n        @EventListener\r\n        public void reservationEventHandler(HotelBookRequest hotelBookRequest) throws InterruptedException {\r\n            System.out.println(&quot;1st Event&quot;);\r\n        }\r\n        @Async\r\n        @EventListener\r\n        public void msgEventHandler(HotelBookRequest hotelBookRequest){\r\n            System.out.println(&quot;2nd Event&quot;);\r\n        }\r\n    \r\n    }\r\n\r\n\r\n\r\n\r\nSo, as you see, I have 2 events in Service class and 2 event listeners in Event Listener class.\r\nIf I give HotelBookRequest object to the one of Service functions, it calls 2 event listeners. I mean, if I call `reservationService.publishReservationEvent(hotelBookRequest);` it triggers 2 event listeners and gives me output such as \r\n\r\n    1st Event\r\n    2nd Event\r\nand if I call `reservationService.publishMsgEvent(hotelBookRequest);` it gives me also same output. I can understand why it behaves like that. \r\n\r\n 1. But, my main question is, what if I want to call api functions with\r\n    the exactly same object without duplicate outputs? What is the logic\r\n    about it? \r\n    \r\n 2. 2nd question is,  What should I do when I want to trigger an\r\n    event from another event? Does it create a dependency on it? What is the most efficient way to trigger nested events?","title":"What if I want to pass same object in different events in Spring Boot","body":"<p>I am working on event driven things and Spring Boot Application Events. I have 2 questions about it.</p>\n<p>So I created some basic classes such as (basic hotel reservation app)</p>\n<p>Model Class</p>\n<pre><code>public class HotelBookRequest {\n  private String userID;\n  private String hotelID;\n\n\n  public String getUserID() {\n      return userID;\n  }\n\n  public void setUserID(String userID) {\n     this.userID = userID;\n  }\n\n  public String getHotelID() {\n      return hotelID;\n  }\n\n  public void setHotelID(String hotelID) {\n      this.hotelID = hotelID;\n  }\n\n  @Override\n  public String toString() {\n      return &quot;HotelBookRequest{&quot; +\n            &quot;userID='&quot; + userID + '\\'' +\n            &quot;, hotelID='&quot; + hotelID + '\\'' +\n            '}';\n}\n</code></pre>\n<p>API</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/book&quot;)\npublic class BookingApi {\n    @Autowired\n    ReservationService reservationService;\n    @PostMapping\n    public void bookHotel(@RequestBody HotelBookRequest hotelBookRequest){\n        System.out.println(&quot;Request Processing...&quot;);\n        reservationService.publishReservationEvent(hotelBookRequest);\n        reservationService.publishMsgEvent(hotelBookRequest);\n    }\n\n\n}\n</code></pre>\n<p>Service</p>\n<pre><code>@Service\npublic class ReservationService {\n    @Autowired\n    private ApplicationEventPublisher applicationEventPublisher;\n\n    public void publishReservationEvent(HotelBookRequest hotelBookRequest){\n        applicationEventPublisher.publishEvent(hotelBookRequest);\n    }\n\n    public void publishMsgEvent(HotelBookRequest hotelBookRequest){\n        applicationEventPublisher.publishEvent(hotelBookRequest);\n    }\n\n}\n</code></pre>\n<p>and Event Listener</p>\n<pre><code>@Component\npublic class ReservationEventListener {\n\n    @Autowired\n    ReservationService service;\n\n    @Async\n    @EventListener\n    public void reservationEventHandler(HotelBookRequest hotelBookRequest) throws InterruptedException {\n        System.out.println(&quot;1st Event&quot;);\n    }\n    @Async\n    @EventListener\n    public void msgEventHandler(HotelBookRequest hotelBookRequest){\n        System.out.println(&quot;2nd Event&quot;);\n    }\n\n}\n</code></pre>\n<p>So, as you see, I have 2 events in Service class and 2 event listeners in Event Listener class.\nIf I give HotelBookRequest object to the one of Service functions, it calls 2 event listeners. I mean, if I call <code>reservationService.publishReservationEvent(hotelBookRequest);</code> it triggers 2 event listeners and gives me output such as</p>\n<pre><code>1st Event\n2nd Event\n</code></pre>\n<p>and if I call <code>reservationService.publishMsgEvent(hotelBookRequest);</code> it gives me also same output. I can understand why it behaves like that.</p>\n<ol>\n<li><p>But, my main question is, what if I want to call api functions with\nthe exactly same object without duplicate outputs? What is the logic\nabout it?</p>\n</li>\n<li><p>2nd question is,  What should I do when I want to trigger an\nevent from another event? Does it create a dependency on it? What is the most efficient way to trigger nested events?</p>\n</li>\n</ol>\n"},{"tags":["java","serialization","jackson","lombok","javabuilders"],"comments":[{"owner":{"account_id":13887193,"reputation":7307,"user_id":10026074,"display_name":"Jan Rieke"},"score":1,"creation_date":1681054032,"post_id":75960430,"comment_id":133993874,"body_markdown":"Your `ChildOne`/`ChildTwo` classes don&#39;t `extend Parent`. Is that a typo? Otherwise it&#39;s obvious why it doesn&#39;t work.","body":"Your <code>ChildOne</code>/<code>ChildTwo</code> classes don&#39;t <code>extend Parent</code>. Is that a typo? Otherwise it&#39;s obvious why it doesn&#39;t work."},{"owner":{"account_id":16935487,"reputation":313,"user_id":12248597,"display_name":"EzyHoo"},"score":0,"creation_date":1681159493,"post_id":75960430,"comment_id":134008821,"body_markdown":"@JanRieke. Thx. It is a typo. Fixed","body":"@JanRieke. Thx. It is a typo. Fixed"},{"owner":{"account_id":13887193,"reputation":7307,"user_id":10026074,"display_name":"Jan Rieke"},"score":1,"creation_date":1681287378,"post_id":75960430,"comment_id":134030554,"body_markdown":"That works for me, all attributes from child and parent are serialized. Please add more code so we can see exactly how you create the instance and serialize it.","body":"That works for me, all attributes from child and parent are serialized. Please add more code so we can see exactly how you create the instance and serialize it."},{"owner":{"account_id":16935487,"reputation":313,"user_id":12248597,"display_name":"EzyHoo"},"score":0,"creation_date":1681791215,"post_id":75960430,"comment_id":134109855,"body_markdown":"@JanRieke Thank you for checking. I also tested. Looks like when printing the individual Child object, it will show the attributes from parent class. But when printing the child in a map, it doesn&#39;t show any attribute from parent class. Update the description.","body":"@JanRieke Thank you for checking. I also tested. Looks like when printing the individual Child object, it will show the attributes from parent class. But when printing the child in a map, it doesn&#39;t show any attribute from parent class. Update the description."},{"owner":{"account_id":13887193,"reputation":7307,"user_id":10026074,"display_name":"Jan Rieke"},"score":0,"creation_date":1682596611,"post_id":75960430,"comment_id":134242669,"body_markdown":"Your updated code does not compile, and it&#39;s also not clear what you mean by &quot;when printing the child in a map&quot;. Please add exactly the code that causes the problem.","body":"Your updated code does not compile, and it&#39;s also not clear what you mean by &quot;when printing the child in a map&quot;. Please add exactly the code that causes the problem."},{"owner":{"account_id":16935487,"reputation":313,"user_id":12248597,"display_name":"EzyHoo"},"score":0,"creation_date":1682981539,"post_id":75960430,"comment_id":134294481,"body_markdown":"@JanRieke Thx for checking. My apology. Update the code. I was trying to say that when writeValueAsString() each Child Object in a Child Object List,  it does show all the attribute for each class. But when writeValueAsString() the whole Map. The ChildTwo object doesn&#39;t have any attribute. Hope I explained my problem clearly this time","body":"@JanRieke Thx for checking. My apology. Update the code. I was trying to say that when writeValueAsString() each Child Object in a Child Object List,  it does show all the attribute for each class. But when writeValueAsString() the whole Map. The ChildTwo object doesn&#39;t have any attribute. Hope I explained my problem clearly this time"}],"answers":[{"comments":[{"owner":{"account_id":16935487,"reputation":313,"user_id":12248597,"display_name":"EzyHoo"},"score":0,"creation_date":1683521728,"post_id":76180664,"comment_id":134373875,"body_markdown":"Thx. Sounds like a limitation of Java Map? So is there a way to print out the parent2Strs keys including the parent fields?","body":"Thx. Sounds like a limitation of Java Map? So is there a way to print out the parent2Strs keys including the parent fields?"},{"owner":{"account_id":13887193,"reputation":7307,"user_id":10026074,"display_name":"Jan Rieke"},"score":0,"creation_date":1683525862,"post_id":76180664,"comment_id":134374344,"body_markdown":"That&#39;s not a limitation of Java Maps. It&#39;s just the definition of JSON: JSON keys must be strings. You can still change the `toString` method, e.g. by adding `@ToString(callSuper=true)` to your classes.","body":"That&#39;s not a limitation of Java Maps. It&#39;s just the definition of JSON: JSON keys must be strings. You can still change the <code>toString</code> method, e.g. by adding <code>@ToString(callSuper=true)</code> to your classes."}],"tags":[],"owner":{"account_id":13887193,"reputation":7307,"user_id":10026074,"display_name":"Jan Rieke"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683278469,"creation_date":1683278469,"answer_id":76180664,"question_id":75960430,"body_markdown":"This behavior has nothing to do with Lombok, `@SuperBuilder`, or `@Jacksonized`.\r\nJackson simply serializes map keys using the `toString()` method, because keys in JSON cannot be structured, but must be plain strings.\r\n\r\nIf you use your POJOs as map values, everything works as expected (and would also work without `@SuperBuilder`).\r\n\r\n`@Jacksonized` wouldn&#39;t have an effect anyway, because it only affects the deserialization, not the serialization.","title":"Serialize abstract class with SuperBuilder using Jackson","body":"<p>This behavior has nothing to do with Lombok, <code>@SuperBuilder</code>, or <code>@Jacksonized</code>.\nJackson simply serializes map keys using the <code>toString()</code> method, because keys in JSON cannot be structured, but must be plain strings.</p>\n<p>If you use your POJOs as map values, everything works as expected (and would also work without <code>@SuperBuilder</code>).</p>\n<p><code>@Jacksonized</code> wouldn't have an effect anyway, because it only affects the deserialization, not the serialization.</p>\n"}],"owner":{"account_id":16935487,"reputation":313,"user_id":12248597,"display_name":"EzyHoo"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":230,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1683278469,"creation_date":1680886291,"question_id":75960430,"body_markdown":"I have following classes:\r\n\r\n````\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Data\r\n@SuperBuilder\r\npublic abstract class Parent {\r\n    private String parentA;\r\n    private String parentB;\r\n}\r\n````\r\n\r\n````\r\n@Data\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@EqualsAndHashCode(callSuper = true)\r\n@SuperBuilder\r\npublic class ChildOne extends Parent{\r\n    private String childOneA;\r\n    private String childOneB;\r\n}\r\n````\r\n````\r\n@Data\r\n@NoArgsConstructor\r\n@EqualsAndHashCode(callSuper = true)\r\n@SuperBuilder\r\npublic class ChildTwo extends Parent{\r\n}\r\n````\r\n\r\n````\r\nMap&lt;Parent, List&lt;String&gt;&gt; parent2Strs = new HashMap&lt;&gt;();\r\nparent2Strs.put(ChildTwo.builder().parentA(&quot;A&quot;).parentB(&quot;B&quot;).build(), List.of(&quot;1&quot;, &quot;2&quot;));\r\nparent2Strs.put(ChildTwo.builder().parentA(&quot;C&quot;).parentB(&quot;D&quot;).build(), List.of(&quot;1&quot;));\r\n````\r\n\r\nWhen I call writeValueAsString() method on the parent2Str class, it doesn&#39;t print any attribute in parent class.\r\n\r\nI tried to use @Jacksonized on the abstract class. But received error: \r\n&gt; error: Builders on abstract classes cannot be @Jacksonized (the builder would never be used).\r\n\r\nHow can I include the fields in Parent class when serialize the child class?","title":"Serialize abstract class with SuperBuilder using Jackson","body":"<p>I have following classes:</p>\n<pre><code>@NoArgsConstructor\n@AllArgsConstructor\n@Data\n@SuperBuilder\npublic abstract class Parent {\n    private String parentA;\n    private String parentB;\n}\n</code></pre>\n<pre><code>@Data\n@NoArgsConstructor\n@AllArgsConstructor\n@EqualsAndHashCode(callSuper = true)\n@SuperBuilder\npublic class ChildOne extends Parent{\n    private String childOneA;\n    private String childOneB;\n}\n</code></pre>\n<pre><code>@Data\n@NoArgsConstructor\n@EqualsAndHashCode(callSuper = true)\n@SuperBuilder\npublic class ChildTwo extends Parent{\n}\n</code></pre>\n<pre><code>Map&lt;Parent, List&lt;String&gt;&gt; parent2Strs = new HashMap&lt;&gt;();\nparent2Strs.put(ChildTwo.builder().parentA(&quot;A&quot;).parentB(&quot;B&quot;).build(), List.of(&quot;1&quot;, &quot;2&quot;));\nparent2Strs.put(ChildTwo.builder().parentA(&quot;C&quot;).parentB(&quot;D&quot;).build(), List.of(&quot;1&quot;));\n</code></pre>\n<p>When I call writeValueAsString() method on the parent2Str class, it doesn't print any attribute in parent class.</p>\n<p>I tried to use @Jacksonized on the abstract class. But received error:</p>\n<blockquote>\n<p>error: Builders on abstract classes cannot be @Jacksonized (the builder would never be used).</p>\n</blockquote>\n<p>How can I include the fields in Parent class when serialize the child class?</p>\n"},{"tags":["java","segmentation-fault","crash","jvm"],"comments":[{"owner":{"account_id":17045045,"reputation":33,"user_id":12332082,"display_name":"kingofworms"},"score":1,"creation_date":1683211256,"post_id":76174098,"comment_id":134334796,"body_markdown":"@andrewJames: sadly, the crash only happens when the whole application is running. When I call the relevant methods in an endless loop via a separate test application, the crash never happens.","body":"@andrewJames: sadly, the crash only happens when the whole application is running. When I call the relevant methods in an endless loop via a separate test application, the crash never happens."},{"owner":{"account_id":17045045,"reputation":33,"user_id":12332082,"display_name":"kingofworms"},"score":1,"creation_date":1683211374,"post_id":76174098,"comment_id":134334823,"body_markdown":"@andrewJames: we went back to OpenJDK 11.0.18 and everything works as expected. Anyway, it would be great to understand how a HLT can trigger a segmentation fault.","body":"@andrewJames: we went back to OpenJDK 11.0.18 and everything works as expected. Anyway, it would be great to understand how a HLT can trigger a segmentation fault."},{"owner":{"account_id":17725864,"reputation":399,"user_id":12869601,"display_name":"rsc"},"score":1,"creation_date":1683618930,"post_id":76174098,"comment_id":134390144,"body_markdown":"I see the same issue here on Rocky Linux 8 (which is a RHEL 8 clone): Crash with java-11-openjdk-headless-11.0.19.0.7-1.el8_7.x86_64, works with java-11-openjdk-headless-11.0.18.0.10-2.el8_7.x86_64 (the package version directly before the update). The issue must have been introduced with this [git commit](https://git.centos.org/rpms/java-11-openjdk/c/1f3d944bf7293313162fbf89e7d256b91aa106a6?branch=c8).","body":"I see the same issue here on Rocky Linux 8 (which is a RHEL 8 clone): Crash with java-11-openjdk-headless-11.0.19.0.7-1.el8_7.x86_64, works with java-11-openjdk-headless-11.0.18.0.10-2.el8_7.x86_64 (the package version directly before the update). The issue must have been introduced with this <a href=\"https://git.centos.org/rpms/java-11-openjdk/c/1f3d944bf7293313162fbf89e7d256b91aa106a6?branch=c8\" rel=\"nofollow noreferrer\">git commit</a>."},{"owner":{"account_id":3949403,"reputation":1141,"user_id":3260495,"display_name":"Robert Hume"},"score":0,"creation_date":1684564661,"post_id":76174098,"comment_id":134538398,"body_markdown":"OpenJDK issue: https://bugs.openjdk.org/browse/JDK-8307978","body":"OpenJDK issue: <a href=\"https://bugs.openjdk.org/browse/JDK-8307978\" rel=\"nofollow noreferrer\">bugs.openjdk.org/browse/JDK-8307978</a>"}],"answers":[{"comments":[{"owner":{"account_id":17045045,"reputation":33,"user_id":12332082,"display_name":"kingofworms"},"score":0,"creation_date":1683278642,"post_id":76177865,"comment_id":134345645,"body_markdown":"thanks, that was the info I was looking for. Do you have any idea why the compiler would place a HLT at this location? I am aware that it uses HLT for padding but it does not seem like a gap between two functions.","body":"thanks, that was the info I was looking for. Do you have any idea why the compiler would place a HLT at this location? I am aware that it uses HLT for padding but it does not seem like a gap between two functions."},{"owner":{"account_id":4210603,"reputation":94386,"user_id":3448419,"display_name":"apangin"},"score":0,"creation_date":1683286964,"post_id":76177865,"comment_id":134347217,"body_markdown":"@kingofworms It&#39;s a kind of assertion in the generated code.","body":"@kingofworms It&#39;s a kind of assertion in the generated code."}],"tags":[],"owner":{"account_id":4210603,"reputation":94386,"user_id":3448419,"display_name":"apangin"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1683241054,"creation_date":1683241054,"answer_id":76177865,"question_id":76174098,"body_markdown":"`HLT` is a privileged instruction. When executed in user mode, it triggers general protection fault. In Linux, this results in `SIGSEGV` being sent to the offending process.\r\n\r\nHotSpot JVM emits `HLT` instruction in the dynamically generated code only in situations never supposed to happen. So there is apparently a JVM bug. Rerun the JVM with `-XX:+ShowMessageBoxOnError` to get more information on the particular assertion failure.","title":"JVM SIGSEGV crash on HLT instruction?","body":"<p><code>HLT</code> is a privileged instruction. When executed in user mode, it triggers general protection fault. In Linux, this results in <code>SIGSEGV</code> being sent to the offending process.</p>\n<p>HotSpot JVM emits <code>HLT</code> instruction in the dynamically generated code only in situations never supposed to happen. So there is apparently a JVM bug. Rerun the JVM with <code>-XX:+ShowMessageBoxOnError</code> to get more information on the particular assertion failure.</p>\n"}],"owner":{"account_id":17045045,"reputation":33,"user_id":12332082,"display_name":"kingofworms"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":524,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":76177865,"answer_count":1,"score":3,"last_activity_date":1683278339,"creation_date":1683209106,"question_id":76174098,"body_markdown":"There seems to be a bug in OpenJDK 11.0.19 which sometimes leads to a crash in java.util.GregorianCalendar.computeTime().\r\n\r\n**Final Update**: thanks to @apangin, I found out that Linux sends a SIGSEGV instead of SIGILL (which I was expecting). See last line of function http://elixir.free-electrons.com/linux/v4.9/source/arch/x86/kernel/traps.c#L487\r\n\r\n**Update**: after going back to OpenJDK 11.0.18 the issue disappeared. Anyway, I would like to understand how a HLT instruction can lead to a segmentation fault. \r\n\r\nRed Hat Enterprise Linux release 8.7 (Ootpa) 4.18.0-425.19.2.el8_7.x86_64\r\n\r\n```\r\n# JRE version: OpenJDK Runtime Environment (Red_Hat-11.0.19.0.7-1.el8_7) (11.0.19+7) (build 11.0.19+7-LTS)\r\n# Java VM: OpenJDK 64-Bit Server VM (Red_Hat-11.0.19.0.7-1.el8_7) (11.0.19+7-LTS, mixed mode, sharing, tiered, compressed oops, g1 gc, linux-amd64)\r\n# Problematic frame:\r\n# J 7581 c2 java.util.GregorianCalendar.computeTime()V java.base@11.0.19 (970 bytes) @ 0x00007ff72826feeb [0x00007ff72826f440+0x0000000000000aab]\r\n```\r\n\r\n```\r\nStack: [0x00007ff73ec47000,0x00007ff73ed48000],  sp=0x00007ff73ed44ad0,  free space=1014k\r\nNative frames: (J=compiled Java code, A=aot compiled Java code, j=interpreted, Vv=VM code, C=native code)\r\nJ 7581 c2 java.util.GregorianCalendar.computeTime()V java.base@11.0.19 (970 bytes) @ 0x00007ff72826feeb [0x00007ff72826f440+0x0000000000000aab]\r\n```\r\n\r\n```\r\nsiginfo: si_signo: 11 (SIGSEGV), si_code: 128 (SI_KERNEL), si_addr: 0x0000000000000000\r\n```\r\n\r\n```\r\nRegisters:\r\nRAX=0x0000000000000000, RBX=0x00000000e5b5f858, RCX=0x0000000000000000, RDX=0x0000000000000000\r\nRSP=0x00007ff73ed44ad0, RBP=0x0000000000000000, RSI=0x00007ff73ed441d1, RDI=0x00007ff738023820\r\nR8 =0x0000000000000000, R9 =0x00007ff73ed44150, R10=0x00000000000007cf, R11=0x0000000000000000\r\nR12=0x0000000000000000, R13=0x0000000000001896, R14=0x00007ff6cda239e0, R15=0x00007ff738028800\r\nRIP=0x00007ff72826feeb, EFLAGS=0x0000000000010246, CSGSFS=0x002b000000000033, ERR=0x0000000000000000\r\n  TRAPNO=0x000000000000000d\r\n```\r\n\r\n```\r\nInstructions: (pc=0x00007ff72826feeb)\r\n...\r\n0x00007ff72826febb:   08 4c 8b 6c 24 18 4c 8b c0 e9 a1 f7 ff ff be 7e\r\n0x00007ff72826fecb:   ff ff ff 48 8b 6c 24 08 e8 28 1f 1a f8 48 bf 98\r\n0x00007ff72826fedb:   4b bd 3d f7 7f 00 00 48 83 e4 f0 e8 25 e0 48 15\r\n0x00007ff72826feeb:   f4 be f4 ff ff ff 48 89 1c 24 48 89 44 24 f8 8b\r\n0x00007ff72826fefb:   44 24 10 89 44 24 08 48 8b 44 24 f8 4c 89 6c 24\r\n0x00007ff72826ff0b:   10 66 66 90 e8 ec 1e 1a f8 be e4 ff ff ff 48 8b\r\n0x00007ff72826ff1b:   6c 24 08 44 89 54 24 04 e8 d8 1e 1a f8 be e4 ff\r\n0x00007ff72826ff2b:   ff ff 49 8b eb 89 5c 24 04 66 66 90 e8 c4 1e 1a\r\n...\r\n```\r\n\r\nPC/RIP points to an address which contains a HLT instruction (0xF4):\r\n\r\n```\r\ne8 28 1f 1a f8          call   0xfffffffff81a1f45\r\n48 bf 98 4b bd 3d f7    movabs rdi,0x7ff73dbd4b98\r\n7f 00 00\r\n48 83 e4 f0             and    rsp,0xfffffffffffffff0\r\ne8 25 e0 48 15          call   0x1548e055\r\nf4                      hlt\r\nbe f4 ff ff ff          mov    esi,0xfffffff4\r\n48 89 1c 24             mov    QWORD PTR [rsp],rbx\r\n48 89 44 24 f8          mov    QWORD PTR [rsp-0x8],rax\r\n```\r\n\r\nHow can a HLT instruction trigger a segmentation violation?\r\n\r\nI spent the last few hours searching for something similar but could not find anything.","title":"JVM SIGSEGV crash on HLT instruction?","body":"<p>There seems to be a bug in OpenJDK 11.0.19 which sometimes leads to a crash in java.util.GregorianCalendar.computeTime().</p>\n<p><strong>Final Update</strong>: thanks to @apangin, I found out that Linux sends a SIGSEGV instead of SIGILL (which I was expecting). See last line of function <a href=\"http://elixir.free-electrons.com/linux/v4.9/source/arch/x86/kernel/traps.c#L487\" rel=\"nofollow noreferrer\">http://elixir.free-electrons.com/linux/v4.9/source/arch/x86/kernel/traps.c#L487</a></p>\n<p><strong>Update</strong>: after going back to OpenJDK 11.0.18 the issue disappeared. Anyway, I would like to understand how a HLT instruction can lead to a segmentation fault.</p>\n<p>Red Hat Enterprise Linux release 8.7 (Ootpa) 4.18.0-425.19.2.el8_7.x86_64</p>\n<pre><code># JRE version: OpenJDK Runtime Environment (Red_Hat-11.0.19.0.7-1.el8_7) (11.0.19+7) (build 11.0.19+7-LTS)\n# Java VM: OpenJDK 64-Bit Server VM (Red_Hat-11.0.19.0.7-1.el8_7) (11.0.19+7-LTS, mixed mode, sharing, tiered, compressed oops, g1 gc, linux-amd64)\n# Problematic frame:\n# J 7581 c2 java.util.GregorianCalendar.computeTime()V java.base@11.0.19 (970 bytes) @ 0x00007ff72826feeb [0x00007ff72826f440+0x0000000000000aab]\n</code></pre>\n<pre><code>Stack: [0x00007ff73ec47000,0x00007ff73ed48000],  sp=0x00007ff73ed44ad0,  free space=1014k\nNative frames: (J=compiled Java code, A=aot compiled Java code, j=interpreted, Vv=VM code, C=native code)\nJ 7581 c2 java.util.GregorianCalendar.computeTime()V java.base@11.0.19 (970 bytes) @ 0x00007ff72826feeb [0x00007ff72826f440+0x0000000000000aab]\n</code></pre>\n<pre><code>siginfo: si_signo: 11 (SIGSEGV), si_code: 128 (SI_KERNEL), si_addr: 0x0000000000000000\n</code></pre>\n<pre><code>Registers:\nRAX=0x0000000000000000, RBX=0x00000000e5b5f858, RCX=0x0000000000000000, RDX=0x0000000000000000\nRSP=0x00007ff73ed44ad0, RBP=0x0000000000000000, RSI=0x00007ff73ed441d1, RDI=0x00007ff738023820\nR8 =0x0000000000000000, R9 =0x00007ff73ed44150, R10=0x00000000000007cf, R11=0x0000000000000000\nR12=0x0000000000000000, R13=0x0000000000001896, R14=0x00007ff6cda239e0, R15=0x00007ff738028800\nRIP=0x00007ff72826feeb, EFLAGS=0x0000000000010246, CSGSFS=0x002b000000000033, ERR=0x0000000000000000\n  TRAPNO=0x000000000000000d\n</code></pre>\n<pre><code>Instructions: (pc=0x00007ff72826feeb)\n...\n0x00007ff72826febb:   08 4c 8b 6c 24 18 4c 8b c0 e9 a1 f7 ff ff be 7e\n0x00007ff72826fecb:   ff ff ff 48 8b 6c 24 08 e8 28 1f 1a f8 48 bf 98\n0x00007ff72826fedb:   4b bd 3d f7 7f 00 00 48 83 e4 f0 e8 25 e0 48 15\n0x00007ff72826feeb:   f4 be f4 ff ff ff 48 89 1c 24 48 89 44 24 f8 8b\n0x00007ff72826fefb:   44 24 10 89 44 24 08 48 8b 44 24 f8 4c 89 6c 24\n0x00007ff72826ff0b:   10 66 66 90 e8 ec 1e 1a f8 be e4 ff ff ff 48 8b\n0x00007ff72826ff1b:   6c 24 08 44 89 54 24 04 e8 d8 1e 1a f8 be e4 ff\n0x00007ff72826ff2b:   ff ff 49 8b eb 89 5c 24 04 66 66 90 e8 c4 1e 1a\n...\n</code></pre>\n<p>PC/RIP points to an address which contains a HLT instruction (0xF4):</p>\n<pre><code>e8 28 1f 1a f8          call   0xfffffffff81a1f45\n48 bf 98 4b bd 3d f7    movabs rdi,0x7ff73dbd4b98\n7f 00 00\n48 83 e4 f0             and    rsp,0xfffffffffffffff0\ne8 25 e0 48 15          call   0x1548e055\nf4                      hlt\nbe f4 ff ff ff          mov    esi,0xfffffff4\n48 89 1c 24             mov    QWORD PTR [rsp],rbx\n48 89 44 24 f8          mov    QWORD PTR [rsp-0x8],rax\n</code></pre>\n<p>How can a HLT instruction trigger a segmentation violation?</p>\n<p>I spent the last few hours searching for something similar but could not find anything.</p>\n"},{"tags":["java","spring","rabbitmq","amqp","r2dbc"],"owner":{"account_id":4899977,"reputation":35,"user_id":3948622,"display_name":"kevin guirado"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683278285,"creation_date":1683278285,"question_id":76180635,"body_markdown":"I&#39;m using Spring R2DBC and Spring AMQP (RabbitMQ). \r\nI&#39;m trying to call some Mono @Transactionnal methods that modify the database when receiving a message from RabbitMQ but it seems that I&#39;m not in context know the R2DBC connection :\r\n\r\n```\r\n2023-05-05 11:06:56.509 ERROR 72872 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] reactor.core.publisher.Operators:error l.324 : Operator called default onErrorDropped\r\n\r\nreactor.core.Exceptions$ErrorCallbackNotImplemented: java.lang.IllegalStateException: No ConnectionHolder available\r\nCaused by: java.lang.IllegalStateException: No ConnectionHolder available\r\n\tat org.springframework.util.Assert.state(Assert.java:76) ~[spring-core-6.0.7.jar:6.0.7]\r\n\tat org.springframework.r2dbc.connection.R2dbcTransactionManager$ConnectionFactoryTransactionObject.getConnectionHolder(R2dbcTransactionManager.java:554) ~[spring-r2dbc-6.0.7.jar:6.0.7]\r\n```\r\n\r\nMy code is the following :\r\n\r\n```\r\n    @RabbitListener(queues = MessagesListenerConfiguration.USER_DELETED_QUEUE_NAME)\r\n    public void onUserDeleted(final Integer userId) {\r\n        Mono.when(\r\n                        vendorService.onUserDeleted(userId),\r\n                        customerService.onUserDeleted(userId)\r\n                )\r\n                .subscribe();\r\n   \r\n```\r\n\r\nHow to switch from the rabbitmq listener context to the r2dbc context as it is done when receiving request API on a WebFlux Controller ?","title":"Spring AMQP with R2DBC","body":"<p>I'm using Spring R2DBC and Spring AMQP (RabbitMQ).\nI'm trying to call some Mono @Transactionnal methods that modify the database when receiving a message from RabbitMQ but it seems that I'm not in context know the R2DBC connection :</p>\n<pre><code>2023-05-05 11:06:56.509 ERROR 72872 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] reactor.core.publisher.Operators:error l.324 : Operator called default onErrorDropped\n\nreactor.core.Exceptions$ErrorCallbackNotImplemented: java.lang.IllegalStateException: No ConnectionHolder available\nCaused by: java.lang.IllegalStateException: No ConnectionHolder available\n    at org.springframework.util.Assert.state(Assert.java:76) ~[spring-core-6.0.7.jar:6.0.7]\n    at org.springframework.r2dbc.connection.R2dbcTransactionManager$ConnectionFactoryTransactionObject.getConnectionHolder(R2dbcTransactionManager.java:554) ~[spring-r2dbc-6.0.7.jar:6.0.7]\n</code></pre>\n<p>My code is the following :</p>\n<pre><code>    @RabbitListener(queues = MessagesListenerConfiguration.USER_DELETED_QUEUE_NAME)\n    public void onUserDeleted(final Integer userId) {\n        Mono.when(\n                        vendorService.onUserDeleted(userId),\n                        customerService.onUserDeleted(userId)\n                )\n                .subscribe();\n   \n</code></pre>\n<p>How to switch from the rabbitmq listener context to the r2dbc context as it is done when receiving request API on a WebFlux Controller ?</p>\n"},{"tags":["java","android","firebase","firebase-realtime-database"],"comments":[{"owner":{"account_id":72426,"reputation":573804,"user_id":209103,"accept_rate":73,"display_name":"Frank van Puffelen"},"score":0,"creation_date":1683234802,"post_id":76175710,"comment_id":134340004,"body_markdown":"Can you edit your question to show the JSON data at `/users/$uid/rooms` in your database (as text, no screenshots please). You can get this by clicking the &quot;Export JSON&quot; link in the overflow menu (⠇) on your [Firebase Database console](https://console.firebase.google.com/project/_/database/data).","body":"Can you edit your question to show the JSON data at <code>&#47;users&#47;$uid&#47;rooms</code> in your database (as text, no screenshots please). You can get this by clicking the &quot;Export JSON&quot; link in the overflow menu (⠇) on your <a href=\"https://console.firebase.google.com/project/_/database/data\" rel=\"nofollow noreferrer\">Firebase Database console</a>."},{"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1683262160,"post_id":76175710,"comment_id":134342861,"body_markdown":"Please edit your question and add the information Frank asked for, and please also respond using @.","body":"Please edit your question and add the information Frank asked for, and please also respond using @."}],"answers":[{"tags":[],"owner":{"account_id":23739021,"reputation":85,"user_id":17757329,"display_name":"Someone"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683278129,"creation_date":1683278129,"answer_id":76180619,"question_id":76175710,"body_markdown":"Well after hours of debugging, I figured it must be related to the fact that I do calls to this function one right after the other, so the array didn&#39;t have the time to update in the database. I wrote this, I know it&#39;s not ideal at all but it works...\r\n\r\nhere is the updated function:\r\n\r\n        public void addDevice(Device device, int room_idx){\r\n        this.devices.add(device);\r\n\r\n        Thread addDevice = new Thread(new Runnable() {\r\n            @Override\r\n            public synchronized void run() {\r\n                // Path: &quot; + room_idx + &quot;/devices&quot;\r\n                final boolean[] roomExistsInIdx = {false};\r\n                while (!roomExistsInIdx[0]){\r\n                    DatabaseReference dbRef = FirebaseDatabase.getInstance().getReference(&quot;users/&quot; + FirebaseAuth.getInstance().getUid()).child(&quot;rooms&quot;);\r\n                    dbRef.addValueEventListener(new ValueEventListener() {\r\n                        @Override\r\n                        public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                            ArrayList&lt;Object&gt; rooms = (ArrayList&lt;Object&gt;)snapshot.getValue();\r\n                            int size;\r\n                            if(rooms == null){\r\n                                size = 0;\r\n                            }\r\n                            else{\r\n                                size = rooms.size();\r\n                            }\r\n                            if (size - 1 &gt;= room_idx){\r\n                                if (device.getType() == Device.TYPES.AIR_CONDITIONER){\r\n                                    dbRef.child(room_idx + &quot;/devices/&quot; + device.getName()).setValue((AirConditioner)device);\r\n                                }\r\n                                else if(device.getType() == Device.TYPES.LIGHTS){\r\n\r\n                                }\r\n                                else if (device.getType() == Device.TYPES.TV){\r\n\r\n                                }\r\n                                roomExistsInIdx[0] = true;\r\n                                dbRef.removeEventListener(this);\r\n                                return;\r\n                            }\r\n                        }\r\n\r\n                        @Override\r\n                        public void onCancelled(@NonNull DatabaseError error) {\r\n                            Log.d(&quot;cancel&quot;, &quot;cancel&quot;);\r\n                            return;\r\n                        }\r\n                    });\r\n\r\n                    try {\r\n                        Thread.sleep(1000);\r\n                    } catch (InterruptedException e) {\r\n                        e.printStackTrace();\r\n                    }\r\n                }\r\n\r\n            }\r\n        });\r\n        addDevice.start();\r\n    }","title":"firebase android studio, firebase database subarray manipulation","body":"<p>Well after hours of debugging, I figured it must be related to the fact that I do calls to this function one right after the other, so the array didn't have the time to update in the database. I wrote this, I know it's not ideal at all but it works...</p>\n<p>here is the updated function:</p>\n<pre><code>    public void addDevice(Device device, int room_idx){\n    this.devices.add(device);\n\n    Thread addDevice = new Thread(new Runnable() {\n        @Override\n        public synchronized void run() {\n            // Path: &quot; + room_idx + &quot;/devices&quot;\n            final boolean[] roomExistsInIdx = {false};\n            while (!roomExistsInIdx[0]){\n                DatabaseReference dbRef = FirebaseDatabase.getInstance().getReference(&quot;users/&quot; + FirebaseAuth.getInstance().getUid()).child(&quot;rooms&quot;);\n                dbRef.addValueEventListener(new ValueEventListener() {\n                    @Override\n                    public void onDataChange(@NonNull DataSnapshot snapshot) {\n                        ArrayList&lt;Object&gt; rooms = (ArrayList&lt;Object&gt;)snapshot.getValue();\n                        int size;\n                        if(rooms == null){\n                            size = 0;\n                        }\n                        else{\n                            size = rooms.size();\n                        }\n                        if (size - 1 &gt;= room_idx){\n                            if (device.getType() == Device.TYPES.AIR_CONDITIONER){\n                                dbRef.child(room_idx + &quot;/devices/&quot; + device.getName()).setValue((AirConditioner)device);\n                            }\n                            else if(device.getType() == Device.TYPES.LIGHTS){\n\n                            }\n                            else if (device.getType() == Device.TYPES.TV){\n\n                            }\n                            roomExistsInIdx[0] = true;\n                            dbRef.removeEventListener(this);\n                            return;\n                        }\n                    }\n\n                    @Override\n                    public void onCancelled(@NonNull DatabaseError error) {\n                        Log.d(&quot;cancel&quot;, &quot;cancel&quot;);\n                        return;\n                    }\n                });\n\n                try {\n                    Thread.sleep(1000);\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                }\n            }\n\n        }\n    });\n    addDevice.start();\n}\n</code></pre>\n"}],"owner":{"account_id":23739021,"reputation":85,"user_id":17757329,"display_name":"Someone"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1683278129,"creation_date":1683220033,"question_id":76175710,"body_markdown":"I have a function that is supposed to add a Room (custom object) to my database:\r\nIt&#39;s java - android studio.\r\n``` \r\npublic void addRoom(Room room) {\r\n    this.addRoomToList(room);\r\n    DatabaseReference dbRef = FirebaseDatabase.getInstance().getReference(&quot;/users/&quot; + FirebaseAuth.getInstance().getUid() + &quot;/rooms&quot;);\r\n\r\n    dbRef.addValueEventListener(new ValueEventListener() {\r\n        @Override\r\n        public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n            ArrayList&lt;HashMap&lt;String, Object&gt;&gt; data = (ArrayList&lt;HashMap&lt;String, Object&gt;&gt;)dataSnapshot.getValue();\r\n\r\n            if (data == null){\r\n                data = new ArrayList&lt;&gt;();\r\n            }\r\n\r\n            data.add(room.getHashMapFromRoom());\r\n            // Save the updated subarray to Firebase\r\n            dbRef.setValue(data);\r\n\r\n            dbRef.removeEventListener(this);\r\n        }\r\n\r\n        @Override\r\n        public void onCancelled(@NonNull DatabaseError databaseError) {\r\n            Log.w(TAG, &quot;onCancelled&quot;, databaseError.toException());\r\n            dbRef.removeEventListener(this);\r\n        }\r\n    });\r\n}\r\n```\r\n\r\n\r\nThe function takes a room argument, retrieves the current array of rooms adds the new room to the array and the array to the database.\r\nBut, it will not work, the first time it&#39;s okay and will upload and update successfully, but when called a second time it will erase the room (because data is null from the database and it will create a new array).   How do I fix it?\r\n\r\nNote: I also checked the parent of this rooms argument, meaning a higher hierarchy in the database, and I was able to read it and get a hashmap, but the specific array of rooms did not appear there.\r\nAlso, I did check and I have read/write permissions in the rules section in the database.\r\n","title":"firebase android studio, firebase database subarray manipulation","body":"<p>I have a function that is supposed to add a Room (custom object) to my database:\nIt's java - android studio.</p>\n<pre><code>public void addRoom(Room room) {\n    this.addRoomToList(room);\n    DatabaseReference dbRef = FirebaseDatabase.getInstance().getReference(&quot;/users/&quot; + FirebaseAuth.getInstance().getUid() + &quot;/rooms&quot;);\n\n    dbRef.addValueEventListener(new ValueEventListener() {\n        @Override\n        public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\n            ArrayList&lt;HashMap&lt;String, Object&gt;&gt; data = (ArrayList&lt;HashMap&lt;String, Object&gt;&gt;)dataSnapshot.getValue();\n\n            if (data == null){\n                data = new ArrayList&lt;&gt;();\n            }\n\n            data.add(room.getHashMapFromRoom());\n            // Save the updated subarray to Firebase\n            dbRef.setValue(data);\n\n            dbRef.removeEventListener(this);\n        }\n\n        @Override\n        public void onCancelled(@NonNull DatabaseError databaseError) {\n            Log.w(TAG, &quot;onCancelled&quot;, databaseError.toException());\n            dbRef.removeEventListener(this);\n        }\n    });\n}\n</code></pre>\n<p>The function takes a room argument, retrieves the current array of rooms adds the new room to the array and the array to the database.\nBut, it will not work, the first time it's okay and will upload and update successfully, but when called a second time it will erase the room (because data is null from the database and it will create a new array).   How do I fix it?</p>\n<p>Note: I also checked the parent of this rooms argument, meaning a higher hierarchy in the database, and I was able to read it and get a hashmap, but the specific array of rooms did not appear there.\nAlso, I did check and I have read/write permissions in the rules section in the database.</p>\n"},{"tags":["java","database","jdbc","xampp"],"comments":[{"owner":{"account_id":425670,"reputation":2681,"user_id":806407,"accept_rate":78,"display_name":"lakshman"},"score":0,"creation_date":1390728507,"post_id":21361781,"comment_id":32210417,"body_markdown":"did you get an error when you try to connect?","body":"did you get an error when you try to connect?"}],"answers":[{"comments":[{"owner":{"account_id":1126423,"reputation":1131,"user_id":1113616,"accept_rate":74,"display_name":"Jeiman"},"score":0,"creation_date":1390729236,"post_id":21361848,"comment_id":32210572,"body_markdown":"I believe I&#39;m using mysql, which means I need to change the url path to the following right, `String host = &quot;jdbc:mysql://localhost:3306/db_test14&quot;;`? Please advise.","body":"I believe I&#39;m using mysql, which means I need to change the url path to the following right, <code>String host = &quot;jdbc:mysql:&#47;&#47;localhost:3306&#47;db_test14&quot;;</code>? Please advise."},{"owner":{"account_id":3866082,"reputation":1825,"user_id":3202612,"accept_rate":75,"display_name":"Happy"},"score":0,"creation_date":1390729750,"post_id":21361848,"comment_id":32210692,"body_markdown":"You&#39;re right, assuming MySQL is on the port 3306 and your database name is `db_test14`. Then you will need a [MySQL JDBC driver](http://dev.mysql.com/downloads/connector/)","body":"You&#39;re right, assuming MySQL is on the port 3306 and your database name is <code>db_test14</code>. Then you will need a <a href=\"http://dev.mysql.com/downloads/connector/\" rel=\"nofollow noreferrer\">MySQL JDBC driver</a>"}],"tags":[],"owner":{"account_id":3866082,"reputation":1825,"user_id":3202612,"accept_rate":75,"display_name":"Happy"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1390728865,"creation_date":1390728865,"answer_id":21361848,"question_id":21361781,"body_markdown":"Maybe you should define your strings before use them.\r\n\r\nThe host URL seems good. \r\n\r\nYou have to install the driver in your server, or to put it in the `/lib` folder of your project. You fill find it in `%DERBY_HOME%/lib` folder, named `derby.jar`, assuming `%DERBY_HOME%` is the directory installation of Derby.","title":"How to connect to database connection in Java","body":"<p>Maybe you should define your strings before use them.</p>\n\n<p>The host URL seems good. </p>\n\n<p>You have to install the driver in your server, or to put it in the <code>/lib</code> folder of your project. You fill find it in <code>%DERBY_HOME%/lib</code> folder, named <code>derby.jar</code>, assuming <code>%DERBY_HOME%</code> is the directory installation of Derby.</p>\n"},{"comments":[{"owner":{"account_id":1126423,"reputation":1131,"user_id":1113616,"accept_rate":74,"display_name":"Jeiman"},"score":0,"creation_date":1390730523,"post_id":21362006,"comment_id":32210867,"body_markdown":"Question. Where do I add the jar file? To my Netbeans Project directory? and Do i have to copy all files from the zip file ?","body":"Question. Where do I add the jar file? To my Netbeans Project directory? and Do i have to copy all files from the zip file ?"},{"owner":{"account_id":2985220,"reputation":5535,"user_id":2534236,"accept_rate":72,"display_name":"Suganthan Madhavan Pillai"},"score":1,"creation_date":1390730571,"post_id":21362006,"comment_id":32210880,"body_markdown":"Create a folder lib and add the jar their","body":"Create a folder lib and add the jar their"},{"owner":{"account_id":1126423,"reputation":1131,"user_id":1113616,"accept_rate":74,"display_name":"Jeiman"},"score":0,"creation_date":1390730706,"post_id":21362006,"comment_id":32210910,"body_markdown":"Do I have to rename the jar file or leave the naming conventions as it is? Also what code can I write to mention that the connection to the database has been successful?","body":"Do I have to rename the jar file or leave the naming conventions as it is? Also what code can I write to mention that the connection to the database has been successful?"},{"owner":{"account_id":2985220,"reputation":5535,"user_id":2534236,"accept_rate":72,"display_name":"Suganthan Madhavan Pillai"},"score":1,"creation_date":1390730752,"post_id":21362006,"comment_id":32210923,"body_markdown":"leave it like that, that is fine. for your next question see the edit","body":"leave it like that, that is fine. for your next question see the edit"},{"owner":{"account_id":1126423,"reputation":1131,"user_id":1113616,"accept_rate":74,"display_name":"Jeiman"},"score":0,"creation_date":1390731273,"post_id":21362006,"comment_id":32211057,"body_markdown":"Doesnt seem to work somehow. I placed it right after the Connection opening declaration, but its somehow not calling out the `println` statement.","body":"Doesnt seem to work somehow. I placed it right after the Connection opening declaration, but its somehow not calling out the <code>println</code> statement."},{"owner":{"account_id":1126423,"reputation":1131,"user_id":1113616,"accept_rate":74,"display_name":"Jeiman"},"score":0,"creation_date":1390733336,"post_id":21362006,"comment_id":32211560,"body_markdown":"I see why it didn&#39;t work. It&#39;s because that I had to manually add the JAR file to the project via Netbeans. Right click on the project folder &gt; Properties &gt; Libraries &gt; Add JAR file. It works!","body":"I see why it didn&#39;t work. It&#39;s because that I had to manually add the JAR file to the project via Netbeans. Right click on the project folder &gt; Properties &gt; Libraries &gt; Add JAR file. It works!"},{"owner":{"account_id":2985220,"reputation":5535,"user_id":2534236,"accept_rate":72,"display_name":"Suganthan Madhavan Pillai"},"score":1,"creation_date":1390733537,"post_id":21362006,"comment_id":32211611,"body_markdown":"The right way to add library is copy the jar in lib folder, then right click on your project-&gt;Properties-&gt;Java Build Java-&gt; Add Jars(then select the jar from the lib folder) -&gt; Ok","body":"The right way to add library is copy the jar in lib folder, then right click on your project-&gt;Properties-&gt;Java Build Java-&gt; Add Jars(then select the jar from the lib folder) -&gt; Ok"}],"tags":[],"owner":{"account_id":2985220,"reputation":5535,"user_id":2534236,"accept_rate":72,"display_name":"Suganthan Madhavan Pillai"},"comment_count":7,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1390731978,"creation_date":1390729950,"answer_id":21362006,"question_id":21361781,"body_markdown":"This is the project structure\r\n\r\n![Project Structure][1]\r\n\r\nTry with this\r\n\r\n**Update**\r\n\r\n        public static void main(String[] args) {\r\n\t\t// TODO Auto-generated method stub\r\n\t\ttry {\r\n\t\t\tClass.forName(&quot;com.mysql.jdbc.Driver&quot;);\r\n\t\t} catch (ClassNotFoundException e) {\r\n\t\t\tSystem.out.println(&quot;Where is your MySQL JDBC Driver?&quot;);\r\n\t\t\te.printStackTrace();\r\n\t\t\treturn;\r\n\t\t}\r\n\t \r\n\t\tSystem.out.println(&quot;MySQL JDBC Driver Registered!&quot;);\r\n\t\tConnection connection = null;\r\n\t \r\n\t\ttry {\r\n\t\t\tconnection = DriverManager\r\n\t\t\t.getConnection(&quot;jdbc:mysql://localhost:3306/testspring&quot;,&quot;root&quot;, &quot;password&quot;);\r\n\t \r\n\t\t} catch (SQLException e) {\r\n\t\t\tSystem.out.println(&quot;Connection Failed! Check output console&quot;);\r\n\t\t\te.printStackTrace();\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tif (connection != null) {\r\n\t\t\tSystem.out.println(&quot;You made it, take control your database now!&quot;);\r\n\t\t} else {\r\n\t\t\tSystem.out.println(&quot;Failed to make connection!&quot;);\r\n\t\t}\r\n\t}\r\n        \r\nIt is working for me\r\n\r\nI downloaded jar from [Java2s.com][2]\r\n\r\n\r\n[Refer][3]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/VjjiD.png\r\n  [2]: http://www.java2s.com/Code/Jar/m/Downloadmysqlconnectorjavajar.htm\r\n  [3]: http://www.mkyong.com/jdbc/how-to-connect-to-mysql-with-jdbc-driver-java/","title":"How to connect to database connection in Java","body":"<p>This is the project structure</p>\n\n<p><img src=\"https://i.stack.imgur.com/VjjiD.png\" alt=\"Project Structure\"></p>\n\n<p>Try with this</p>\n\n<p><strong>Update</strong></p>\n\n<pre><code>    public static void main(String[] args) {\n    // TODO Auto-generated method stub\n    try {\n        Class.forName(\"com.mysql.jdbc.Driver\");\n    } catch (ClassNotFoundException e) {\n        System.out.println(\"Where is your MySQL JDBC Driver?\");\n        e.printStackTrace();\n        return;\n    }\n\n    System.out.println(\"MySQL JDBC Driver Registered!\");\n    Connection connection = null;\n\n    try {\n        connection = DriverManager\n        .getConnection(\"jdbc:mysql://localhost:3306/testspring\",\"root\", \"password\");\n\n    } catch (SQLException e) {\n        System.out.println(\"Connection Failed! Check output console\");\n        e.printStackTrace();\n        return;\n    }\n\n    if (connection != null) {\n        System.out.println(\"You made it, take control your database now!\");\n    } else {\n        System.out.println(\"Failed to make connection!\");\n    }\n}\n</code></pre>\n\n<p>It is working for me</p>\n\n<p>I downloaded jar from <a href=\"http://www.java2s.com/Code/Jar/m/Downloadmysqlconnectorjavajar.htm\" rel=\"noreferrer\">Java2s.com</a></p>\n\n<p><a href=\"http://www.mkyong.com/jdbc/how-to-connect-to-mysql-with-jdbc-driver-java/\" rel=\"noreferrer\">Refer</a></p>\n"},{"tags":[],"owner":{"account_id":903546,"reputation":2804,"user_id":939008,"accept_rate":25,"display_name":"Ashot Karakhanyan"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1390734137,"creation_date":1390733716,"answer_id":21362509,"question_id":21361781,"body_markdown":"This is a code (Java 7 style, try-with-resources, more laconic style) to connect and retrieve data from your DB. \r\n\r\n     public static final String SELECT_QUERY = &quot;SELECT * FROM your_table_name&quot;;\r\n     public static void main(String[] args) {\r\n        String host = &quot;jdbc:derby://localhost:1527/Employees&quot;;\r\n        String uName = &quot;root&quot;;\r\n        String uPass = &quot;password&quot;;\r\n\r\n        try (Connection conn = DriverManager.getConnection(host, uName, uPass);\r\n             Statement stmt = conn.createStatement();\r\n             ResultSet rs = stmt.executeQuery(SELECT_QUERY)) {\r\n\r\n            while (rs.next()) {\r\n                //read your lines one ofter one\r\n                int id = rs.getInt(&quot;id&quot;);\r\n                String somePropertyValue = rs.getInt(&quot;some_column_name&quot;);\r\n                // etc. \r\n            }\r\n        } catch (SQLException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\nAlso, add JDBC driver (*.jar file) in your classpath if you are running from command line, or add this jar to your project, if you are working in IDE (Eclipse, IDEA etc. It is a little bit different for each one).\r\n\r\nBTW, How your code compiled if variable declaration is after they using? That code can not be compiled even.","title":"How to connect to database connection in Java","body":"<p>This is a code (Java 7 style, try-with-resources, more laconic style) to connect and retrieve data from your DB. </p>\n\n<pre><code> public static final String SELECT_QUERY = \"SELECT * FROM your_table_name\";\n public static void main(String[] args) {\n    String host = \"jdbc:derby://localhost:1527/Employees\";\n    String uName = \"root\";\n    String uPass = \"password\";\n\n    try (Connection conn = DriverManager.getConnection(host, uName, uPass);\n         Statement stmt = conn.createStatement();\n         ResultSet rs = stmt.executeQuery(SELECT_QUERY)) {\n\n        while (rs.next()) {\n            //read your lines one ofter one\n            int id = rs.getInt(\"id\");\n            String somePropertyValue = rs.getInt(\"some_column_name\");\n            // etc. \n        }\n    } catch (SQLException e) {\n        e.printStackTrace();\n    }\n}\n</code></pre>\n\n<p>Also, add JDBC driver (*.jar file) in your classpath if you are running from command line, or add this jar to your project, if you are working in IDE (Eclipse, IDEA etc. It is a little bit different for each one).</p>\n\n<p>BTW, How your code compiled if variable declaration is after they using? That code can not be compiled even.</p>\n"},{"tags":[],"owner":{"account_id":9497988,"reputation":1,"user_id":7060243,"display_name":"Deepak Kumar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1477224306,"creation_date":1477224306,"answer_id":40202697,"question_id":21361781,"body_markdown":"    package com.util;\r\n    \r\n    import java.sql.Connection;\r\n    import java.sql.DriverManager;\r\n    import java.sql.PreparedStatement;\r\n    import java.sql.SQLException;\r\n    \r\n    \r\n    \r\n    public class DatabaseUtil1 {\r\n    \t\r\n    \tpublic static final String DRIVER=&quot;oracle.jdbc.driver.OracleDriver&quot;;\r\n    \tpublic static final String URL=&quot;jdbc:oracle:thin:@DIPAK-PC:1521:xe&quot;;\r\n    \tpublic static final String USERNAME=&quot;system&quot;;\r\n    \tpublic static final String PASSWORD=&quot;password&quot;;\r\n    \t\r\n    \tpublic static Connection getConnection() throws ClassNotFoundException, SQLException\r\n    \t{\r\n    \t\tConnection con= null;\r\n    \t\t\r\n    \t\tClass.forName(DRIVER);\r\n    \t\tcon=DriverManager.getConnection(URL,USERNAME,PASSWORD);\r\n    \t\r\n    \t\tSystem.out.println(con);\r\n    \t\treturn con;\t\r\n    \t}\r\n    \tpublic static void closePreparedStatement(PreparedStatement pst) throws SQLException\r\n    \t{\r\n    \t\tif(pst!=null)\r\n    \t\t{\r\n    \t\t\tpst.close();\r\n    \t\t}\r\n    \t\t\r\n    \t}\r\n    \tpublic static void closeConnection(Connection con) throws SQLException\r\n    \t{\r\n    \t\tif(con!=null)\r\n    \t\t{\r\n    \t\t\tcon.close();\r\n    \t\t}\r\n    \t\t\r\n    \t}\r\n    \t\r\n    \t\r\n    \r\n    }\r\n\r\n","title":"How to connect to database connection in Java","body":"<pre><code>package com.util;\n\nimport java.sql.Connection;\nimport java.sql.DriverManager;\nimport java.sql.PreparedStatement;\nimport java.sql.SQLException;\n\n\n\npublic class DatabaseUtil1 {\n\n    public static final String DRIVER=\"oracle.jdbc.driver.OracleDriver\";\n    public static final String URL=\"jdbc:oracle:thin:@DIPAK-PC:1521:xe\";\n    public static final String USERNAME=\"system\";\n    public static final String PASSWORD=\"password\";\n\n    public static Connection getConnection() throws ClassNotFoundException, SQLException\n    {\n        Connection con= null;\n\n        Class.forName(DRIVER);\n        con=DriverManager.getConnection(URL,USERNAME,PASSWORD);\n\n        System.out.println(con);\n        return con; \n    }\n    public static void closePreparedStatement(PreparedStatement pst) throws SQLException\n    {\n        if(pst!=null)\n        {\n            pst.close();\n        }\n\n    }\n    public static void closeConnection(Connection con) throws SQLException\n    {\n        if(con!=null)\n        {\n            con.close();\n        }\n\n    }\n\n\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11553963,"reputation":1,"user_id":8465645,"display_name":"Mike"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1502779456,"creation_date":1502779456,"answer_id":45687685,"question_id":21361781,"body_markdown":"Import the packages: Requires that you include the packages containing the JDBC classes needed for database programming. Most often, using import java.sql.* will suffice.\r\n\r\nRegister the JDBC driver: Requires that you initialize a driver so you can open a communication channel with the database.\r\n\r\nOpen a connection: Requires using the DriverManager.getConnection() method to create a Connection object, which represents a physical connection with the database.","title":"How to connect to database connection in Java","body":"<p>Import the packages: Requires that you include the packages containing the JDBC classes needed for database programming. Most often, using import java.sql.* will suffice.</p>\n\n<p>Register the JDBC driver: Requires that you initialize a driver so you can open a communication channel with the database.</p>\n\n<p>Open a connection: Requires using the DriverManager.getConnection() method to create a Connection object, which represents a physical connection with the database.</p>\n"},{"tags":[],"owner":{"account_id":12839896,"reputation":388,"user_id":9288257,"display_name":"Faisal shahzad"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683277795,"creation_date":1524407340,"answer_id":49967019,"question_id":21361781,"body_markdown":"Database connectivity: these are the steps required to connect Java application to a database.\r\n\r\n* Import the sql package\r\n\r\n      Import.java.sql.*;\r\n\r\n* Load driver \r\n\r\n    Every database has different driver, we are using SQL database so driver for SQL database is    \r\n\r\n      Class.forName(“com.mysql.jdbc.Driver”);\r\n\r\n* Make Url\r\n\r\n      String url=”jdbc:mysql://localhost/DataBaseName”;\r\n\r\n* Make connection\r\n\r\n      Connection con=DriverManager(url,”root”,””);\r\n\r\n* Create statement object\r\n\r\n      Statement st = con.CreateStatement();\r\n\r\n    After creating statement object, we can perform SQL queries on the database.\r\n\r\n* Make query\r\n\r\n      String sql = &quot;SELECT * FROM table_Name &quot;;\r\n\r\n* Create ResultSet object and execute query\r\n\r\n      ResultSet rs = st.excuteUpdate(sql);\r\n\r\n* Important step to close the connection\r\n\r\n      con.close();\r\n\r\n**Note** if we do not have SQL connecter in jdk first download connector from this url:\r\n\r\nhttps://dev.mysql.com/downloads/connector/j/5.1.html\r\n\r\nand copy and paste into:\r\n\r\n    Java/jre/lib/ext\r\n","title":"How to connect to database connection in Java","body":"<p>Database connectivity: these are the steps required to connect Java application to a database.</p>\n<ul>\n<li><p>Import the sql package</p>\n<pre><code>Import.java.sql.*;\n</code></pre>\n</li>\n<li><p>Load driver</p>\n<p>Every database has different driver, we are using SQL database so driver for SQL database is</p>\n<pre><code>Class.forName(“com.mysql.jdbc.Driver”);\n</code></pre>\n</li>\n<li><p>Make Url</p>\n<pre><code>String url=”jdbc:mysql://localhost/DataBaseName”;\n</code></pre>\n</li>\n<li><p>Make connection</p>\n<pre><code>Connection con=DriverManager(url,”root”,””);\n</code></pre>\n</li>\n<li><p>Create statement object</p>\n<pre><code>Statement st = con.CreateStatement();\n</code></pre>\n<p>After creating statement object, we can perform SQL queries on the database.</p>\n</li>\n<li><p>Make query</p>\n<pre><code>String sql = &quot;SELECT * FROM table_Name &quot;;\n</code></pre>\n</li>\n<li><p>Create ResultSet object and execute query</p>\n<pre><code>ResultSet rs = st.excuteUpdate(sql);\n</code></pre>\n</li>\n<li><p>Important step to close the connection</p>\n<pre><code>con.close();\n</code></pre>\n</li>\n</ul>\n<p><strong>Note</strong> if we do not have SQL connecter in jdk first download connector from this url:</p>\n<p><a href=\"https://dev.mysql.com/downloads/connector/j/5.1.html\" rel=\"nofollow noreferrer\">https://dev.mysql.com/downloads/connector/j/5.1.html</a></p>\n<p>and copy and paste into:</p>\n<pre><code>Java/jre/lib/ext\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22657254,"reputation":1,"user_id":16830953,"display_name":"user16830953"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1630774600,"creation_date":1630774600,"answer_id":69057327,"question_id":21361781,"body_markdown":"\r\n\r\n    import java.sql.Connection;\r\n    import java.sql.Date;\r\n    import java.sql.PreparedStatement;\r\n    import java.sql.ResultSet;\r\n    import java.sql.SQLException;\r\n    import java.sql.Statement;\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    \r\n    public class DbOperations {\r\n      Connection con;\r\n      PreparedStatement ps;\r\n    \tpublic DbOperations() {\r\n    \t\tcon = DbUtil.getConnection();\r\n    \t}\r\n    \tpublic boolean insertSubject(String name) throws SQLException {\r\n        Statement s = con.createStatement();\r\n        String sql = &quot;insert into subject (name) values (&#39;&quot;+ name +&quot;&#39;)&quot;;\r\n         ps=con.prepareStatement(sql);\r\n    // ps.executeUpdate();\r\n        ps.executeUpdate();\r\n        if(ps!= null){\r\n            System.out.println(&quot;successfull!!&quot;);\r\n          return true;\r\n        }else {\r\n        return false;\r\n        }\r\n      \r\n    \t}\r\n    \tpublic ArrayList getSubjectById(int id) throws SQLException {\r\n       \r\n         Statement s = con.createStatement();\r\n        String sql = &quot;select * from subject where id = &#39;&quot;+ id +&quot;&#39;&quot;;\r\n         ResultSet resultSet = s.executeQuery(sql);\r\n       ArrayList&lt;Object&gt; records=new ArrayList&lt;Object&gt;();\r\n    while(resultSet.next()){\r\n        // subject sub = new subject();\r\n        // sub.id = resultSet.getInt(1);\r\n        // sub.name = resultSet.getString(2);\r\n        // records.add(sub.id);\r\n        // records.add(sub.name);\r\n        records.add(resultSet.getInt(1));\r\n        records.add(resultSet.getString(2));\r\n        System.out.println(&quot;record output:&quot; + records );\r\n    }\r\n    \r\n    return (ArrayList) records;\r\n    \t}\r\n    \r\n    \tpublic ResultSet getAllSubjects() throws SQLException {\r\n     Statement s = con.createStatement();\r\n        String sql = &quot;select * from subject&quot;;\r\n         ResultSet resultSet = s.executeQuery(sql);\r\n    \t\treturn resultSet;\r\n      }\r\n      \r\n    \tpublic boolean insertStudent(String student_name, float score, String name) throws SQLException {\r\n    \r\n        Statement s = con.createStatement();\r\n        String sql = &quot;select id from subject where name = &#39;&quot;+ name +&quot;&#39;&quot;;\r\n         ResultSet resultSet = s.executeQuery(sql);\r\n         int subId =0;\r\n        while(resultSet.next()){\r\n          subId = resultSet.getInt(1);\r\n        }\r\n    \r\n        String sql1 = &quot;insert into student (student_name,score,subject_id) values (&#39;&quot;+ student_name+&quot;&#39;,&#39;&quot;+score+&quot;&#39;,&#39;&quot;+subId+&quot;&#39;)&quot;;\r\n    \r\n        int result = s.executeUpdate(sql1);\r\n        if(result==0){\r\n          return false;\r\n        }else {\r\n    \t\treturn true;\r\n        }\r\n    \t\r\n    \t}\r\n    \tpublic ArrayList getStudentyId(int id) throws SQLException {\r\n    \r\n    Statement s = con.createStatement();\r\n        String sql = &quot;select * from student where id = &#39;&quot;+ id +&quot;&#39;&quot;;\r\n         ResultSet resultSet = s.executeQuery(sql);\r\n       ArrayList&lt;Object&gt; records=new ArrayList&lt;Object&gt;();\r\n    while(resultSet.next()){\r\n        // student sub = new student();\r\n        // sub.id = resultSet.getInt(1);\r\n        // sub.student_name = resultSet.getString(2);\r\n        // sub.score = resultSet.getFloat(3);\r\n        // sub.subject_id = resultSet.getInt(4);\r\n    \r\n        // records.add(sub.id);\r\n        // records.add(sub.student_name);\r\n        // records.add(sub.score);\r\n        // records.add(sub.subject_id);\r\n        records.add(resultSet.getInt(1));\r\n        records.add( resultSet.getString(2));\r\n        records.add(resultSet.getFloat(3));\r\n        records.add(resultSet.getInt(4));\r\n    \r\n    }\r\n    return (ArrayList) records;\r\n    \r\n    }\r\n    \tpublic ResultSet getAllStudents() throws SQLException {\r\n    \t\tStatement s = con.createStatement();\r\n        String sql = &quot;select * from student&quot;;\r\n         ResultSet resultSet = s.executeQuery(sql);\r\n    \t\treturn resultSet;\r\n    \t}\r\n    \t\r\n    }","title":"How to connect to database connection in Java","body":"<pre><code>import java.sql.Connection;\nimport java.sql.Date;\nimport java.sql.PreparedStatement;\nimport java.sql.ResultSet;\nimport java.sql.SQLException;\nimport java.sql.Statement;\nimport java.util.ArrayList;\nimport java.util.List;\n\npublic class DbOperations {\n  Connection con;\n  PreparedStatement ps;\n    public DbOperations() {\n        con = DbUtil.getConnection();\n    }\n    public boolean insertSubject(String name) throws SQLException {\n    Statement s = con.createStatement();\n    String sql = &quot;insert into subject (name) values ('&quot;+ name +&quot;')&quot;;\n     ps=con.prepareStatement(sql);\n// ps.executeUpdate();\n    ps.executeUpdate();\n    if(ps!= null){\n        System.out.println(&quot;successfull!!&quot;);\n      return true;\n    }else {\n    return false;\n    }\n  \n    }\n    public ArrayList getSubjectById(int id) throws SQLException {\n   \n     Statement s = con.createStatement();\n    String sql = &quot;select * from subject where id = '&quot;+ id +&quot;'&quot;;\n     ResultSet resultSet = s.executeQuery(sql);\n   ArrayList&lt;Object&gt; records=new ArrayList&lt;Object&gt;();\nwhile(resultSet.next()){\n    // subject sub = new subject();\n    // sub.id = resultSet.getInt(1);\n    // sub.name = resultSet.getString(2);\n    // records.add(sub.id);\n    // records.add(sub.name);\n    records.add(resultSet.getInt(1));\n    records.add(resultSet.getString(2));\n    System.out.println(&quot;record output:&quot; + records );\n}\n\nreturn (ArrayList) records;\n    }\n\n    public ResultSet getAllSubjects() throws SQLException {\n Statement s = con.createStatement();\n    String sql = &quot;select * from subject&quot;;\n     ResultSet resultSet = s.executeQuery(sql);\n        return resultSet;\n  }\n  \n    public boolean insertStudent(String student_name, float score, String name) throws SQLException {\n\n    Statement s = con.createStatement();\n    String sql = &quot;select id from subject where name = '&quot;+ name +&quot;'&quot;;\n     ResultSet resultSet = s.executeQuery(sql);\n     int subId =0;\n    while(resultSet.next()){\n      subId = resultSet.getInt(1);\n    }\n\n    String sql1 = &quot;insert into student (student_name,score,subject_id) values ('&quot;+ student_name+&quot;','&quot;+score+&quot;','&quot;+subId+&quot;')&quot;;\n\n    int result = s.executeUpdate(sql1);\n    if(result==0){\n      return false;\n    }else {\n        return true;\n    }\n    \n    }\n    public ArrayList getStudentyId(int id) throws SQLException {\n\nStatement s = con.createStatement();\n    String sql = &quot;select * from student where id = '&quot;+ id +&quot;'&quot;;\n     ResultSet resultSet = s.executeQuery(sql);\n   ArrayList&lt;Object&gt; records=new ArrayList&lt;Object&gt;();\nwhile(resultSet.next()){\n    // student sub = new student();\n    // sub.id = resultSet.getInt(1);\n    // sub.student_name = resultSet.getString(2);\n    // sub.score = resultSet.getFloat(3);\n    // sub.subject_id = resultSet.getInt(4);\n\n    // records.add(sub.id);\n    // records.add(sub.student_name);\n    // records.add(sub.score);\n    // records.add(sub.subject_id);\n    records.add(resultSet.getInt(1));\n    records.add( resultSet.getString(2));\n    records.add(resultSet.getFloat(3));\n    records.add(resultSet.getInt(4));\n\n}\nreturn (ArrayList) records;\n\n}\n    public ResultSet getAllStudents() throws SQLException {\n        Statement s = con.createStatement();\n    String sql = &quot;select * from student&quot;;\n     ResultSet resultSet = s.executeQuery(sql);\n        return resultSet;\n    }\n    \n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3153321,"reputation":854,"user_id":2666277,"accept_rate":100,"display_name":"I Stevenson"},"score":0,"creation_date":1663659205,"post_id":73699408,"comment_id":130285702,"body_markdown":"You have not addressed the two questions in the OP, and you&#39;ve added additional code which assumes a certain schema. You have also not provided any explanation on your solution or how they should modify it for their environment.","body":"You have not addressed the two questions in the OP, and you&#39;ve added additional code which assumes a certain schema. You have also not provided any explanation on your solution or how they should modify it for their environment."}],"tags":[],"owner":{"account_id":17377280,"reputation":27,"user_id":12590217,"display_name":"Lasan Rashmika"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1663055870,"creation_date":1663055870,"answer_id":73699408,"question_id":21361781,"body_markdown":"Use the below code. This will work\r\n\r\n    import java.sql.*;  \r\n    class MysqlCon{  \r\n    public static void main(String args[]){  \r\n    try{  \r\n    Class.forName(&quot;com.mysql.jdbc.Driver&quot;);  \r\n    Connection con=DriverManager.getConnection(  \r\n    &quot;jdbc:mysql://localhost:3306/sonoo&quot;,&quot;root&quot;,&quot;root&quot;);  \r\n    //here is database name, root is username and password  \r\n    Statement stmt=con.createStatement();  \r\n    ResultSet rs=stmt.executeQuery(&quot;select * from emp&quot;);  \r\n    while(rs.next())  \r\n    System.out.println(rs.getInt(1)+&quot;  &quot;+rs.getString(2)+&quot;  &quot;+rs.getString(3));  \r\n    con.close();  \r\n    }catch(Exception e){ System.out.println(e);}  \r\n    }  \r\n    }  ","title":"How to connect to database connection in Java","body":"<p>Use the below code. This will work</p>\n<pre><code>import java.sql.*;  \nclass MysqlCon{  \npublic static void main(String args[]){  \ntry{  \nClass.forName(&quot;com.mysql.jdbc.Driver&quot;);  \nConnection con=DriverManager.getConnection(  \n&quot;jdbc:mysql://localhost:3306/sonoo&quot;,&quot;root&quot;,&quot;root&quot;);  \n//here is database name, root is username and password  \nStatement stmt=con.createStatement();  \nResultSet rs=stmt.executeQuery(&quot;select * from emp&quot;);  \nwhile(rs.next())  \nSystem.out.println(rs.getInt(1)+&quot;  &quot;+rs.getString(2)+&quot;  &quot;+rs.getString(3));  \ncon.close();  \n}catch(Exception e){ System.out.println(e);}  \n}  \n}  \n</code></pre>\n"}],"owner":{"account_id":1126423,"reputation":1131,"user_id":1113616,"accept_rate":74,"display_name":"Jeiman"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":24436,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":21362006,"answer_count":8,"score":4,"last_activity_date":1683277795,"creation_date":1390728391,"question_id":21361781,"body_markdown":"I would like to know how to connect to database in which is hosted in Xampp MySQL.\r\n\r\nThis is what I have so far in my java code to connect but I&#39;m unsure what I&#39;m doing.  \r\n\r\n    public static void main(String[] args) {\r\n        try {\r\n            Connection con = DriverManager.getConnection( host, username, password );\r\n            String host = &quot;jdbc:derby://localhost:1527/Employees&quot;;\r\n            String uName = &quot;root&quot;;\r\n            String uPass= &quot;password&quot;;\r\n        }\r\n        catch ( SQLException err ) {\r\n        System.out.println( err.getMessage( ) );\r\n        }\r\n        \r\n    }\r\n\r\n1. What would the host URL be?\r\n2. Do i need a JDBC Jar file to connect to the DB? \r\n\r\nI have setup a database and table via phpMyAdmin already. Just don&#39;t know how to proceed.\r\n\r\nI am using **Netbeans** to write my Java code to connect to a local database which was created via **Xampp PHPMyAdmin**.\r\n\r\nIn the end, I want to create a database connection in Java and call out tables within the IDE. Would appreciate some help.","title":"How to connect to database connection in Java","body":"<p>I would like to know how to connect to database in which is hosted in Xampp MySQL.</p>\n\n<p>This is what I have so far in my java code to connect but I'm unsure what I'm doing.  </p>\n\n<pre><code>public static void main(String[] args) {\n    try {\n        Connection con = DriverManager.getConnection( host, username, password );\n        String host = \"jdbc:derby://localhost:1527/Employees\";\n        String uName = \"root\";\n        String uPass= \"password\";\n    }\n    catch ( SQLException err ) {\n    System.out.println( err.getMessage( ) );\n    }\n\n}\n</code></pre>\n\n<ol>\n<li>What would the host URL be?</li>\n<li>Do i need a JDBC Jar file to connect to the DB? </li>\n</ol>\n\n<p>I have setup a database and table via phpMyAdmin already. Just don't know how to proceed.</p>\n\n<p>I am using <strong>Netbeans</strong> to write my Java code to connect to a local database which was created via <strong>Xampp PHPMyAdmin</strong>.</p>\n\n<p>In the end, I want to create a database connection in Java and call out tables within the IDE. Would appreciate some help.</p>\n"},{"tags":["java","android","maven","gradle","android-room"],"answers":[{"tags":[],"owner":{"account_id":24873434,"reputation":43,"user_id":18747673,"display_name":"Mwai"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1683277645,"creation_date":1683277645,"answer_id":76180551,"question_id":76178183,"body_markdown":" Use settings.gradle. Inside settings.gradle you&#39;ll find file contents that look like this   \r\n\r\n    `pluginManagement {\r\n            repositories {\r\n                google()\r\n                mavenCentral()\r\n                gradlePluginPortal()\r\n            }\r\n        }\r\n        dependencyResolutionManagement {\r\n            repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)\r\n            repositories {\r\n                google()\r\n                mavenCentral()\r\n            }\r\n        }\r\n        rootProject.name = &quot;Sync&quot;\r\n        include &#39;:app&#39;`\r\n\r\nYou can then add the maven code in this block of code under mavenCentral\r\n\r\n    `dependencyResolutionManagement {\r\n            repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)\r\n            repositories {\r\n                google()\r\n                mavenCentral()\r\n            }\r\n        }`","title":"To use the Room database, How to correctly add the Maven Repository and the necessary dependencies in build.gradle in android studio (flamingo)?","body":"<p>Use settings.gradle. Inside settings.gradle you'll find file contents that look like this</p>\n<pre><code>`pluginManagement {\n        repositories {\n            google()\n            mavenCentral()\n            gradlePluginPortal()\n        }\n    }\n    dependencyResolutionManagement {\n        repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)\n        repositories {\n            google()\n            mavenCentral()\n        }\n    }\n    rootProject.name = &quot;Sync&quot;\n    include ':app'`\n</code></pre>\n<p>You can then add the maven code in this block of code under mavenCentral</p>\n<pre><code>`dependencyResolutionManagement {\n        repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)\n        repositories {\n            google()\n            mavenCentral()\n        }\n    }`\n</code></pre>\n"}],"owner":{"account_id":28306512,"reputation":245,"user_id":21644444,"display_name":"oneuromancer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":288,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76180551,"answer_count":1,"score":0,"last_activity_date":1683277645,"creation_date":1683247644,"question_id":76178183,"body_markdown":"I&#39;m making a simple patient registration app using java, and I&#39;m starting to learn and use the room database. I am tremendously confused on how to add the dependencies in gradle and the maven repository. Every tutorial I see shows something different. And the documentation on android developer just confused me even more. I&#39;m using the latest version of studio (flamingo) and I think the gradle version is 8.\r\n\r\nFor example, most tutorials on youtube and the internet say that I should go to gradle script -&gt; build.gradle(project) and add this:\r\n\r\n    allprojects{\r\n        repositories{\r\n    Google()\r\n    jcenter()\r\n    maven {url &#39;https://maven.google.com&#39; }\r\n    }\r\n\r\nBut in the google documentation it says to add this:\r\n\r\n    dependencyResolutionManagement {\r\n    \r\n    repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)\r\n         repositories {\r\n             Google()\r\n    }\r\n\r\nSome other tutorials put it like this:\r\n\r\n    buildscript {\r\n        repositories {\r\n            Google()\r\n            mavenCentral()\r\n    }\r\n\r\nIn my build.gradle(project) there is nothing there. Just a few lines with plugins and id&#39;s:\r\n\r\n    // Top-level build file where you can add configuration options common to all sub-projects/modules.\r\n    plugins {\r\n         id &#39;com.android.application&#39; version &#39;8.0.0&#39; apply false\r\n         id &#39;com.android.library&#39; version &#39;8.0.0&#39; apply false\r\n    }\r\n---------------------------------------------------------------------------------------------------\r\n\r\n1 - Where should I put the code anyway? And which of these codes??\r\n\r\n2 - And in build.gradle(app), which dependencies should I put there and where in the code??\r\n\r\nAs you can see this is extremely confusing for a beginner. I really appreciate any help from you, and sorry if the post was too long.\r\n\r\n","title":"To use the Room database, How to correctly add the Maven Repository and the necessary dependencies in build.gradle in android studio (flamingo)?","body":"<p>I'm making a simple patient registration app using java, and I'm starting to learn and use the room database. I am tremendously confused on how to add the dependencies in gradle and the maven repository. Every tutorial I see shows something different. And the documentation on android developer just confused me even more. I'm using the latest version of studio (flamingo) and I think the gradle version is 8.</p>\n<p>For example, most tutorials on youtube and the internet say that I should go to gradle script -&gt; build.gradle(project) and add this:</p>\n<pre><code>allprojects{\n    repositories{\nGoogle()\njcenter()\nmaven {url 'https://maven.google.com' }\n}\n</code></pre>\n<p>But in the google documentation it says to add this:</p>\n<pre><code>dependencyResolutionManagement {\n\nrepositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)\n     repositories {\n         Google()\n}\n</code></pre>\n<p>Some other tutorials put it like this:</p>\n<pre><code>buildscript {\n    repositories {\n        Google()\n        mavenCentral()\n}\n</code></pre>\n<p>In my build.gradle(project) there is nothing there. Just a few lines with plugins and id's:</p>\n<pre><code>// Top-level build file where you can add configuration options common to all sub-projects/modules.\nplugins {\n     id 'com.android.application' version '8.0.0' apply false\n     id 'com.android.library' version '8.0.0' apply false\n}\n</code></pre>\n<hr />\n<p>1 - Where should I put the code anyway? And which of these codes??</p>\n<p>2 - And in build.gradle(app), which dependencies should I put there and where in the code??</p>\n<p>As you can see this is extremely confusing for a beginner. I really appreciate any help from you, and sorry if the post was too long.</p>\n"},{"tags":["java","flowable"],"answers":[{"tags":[],"owner":{"account_id":25252139,"reputation":1,"user_id":19084475,"display_name":"Dlin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683277525,"creation_date":1683277525,"answer_id":76180536,"question_id":76179401,"body_markdown":"After debugging the source code, it was found that at line 545 in ExecutionEntityManagerImpl.java from /Users/dlin/.m2/repository/org/flowable/flowable-engine/6.8.0/flowable-engine-6.8.0-sources.jar!, the code block below is used to check whether to delete the history records of a process instance:\r\n\r\n    if (deleteHistory) {\r\n    getHistoryManager().recordProcessInstanceDeleted(execution.getId(), execution.getProcessDefinitionId(), execution.getTenantId());\r\n    }\r\n\r\nTherefore, to preserve the history records, the value of the &#39;deleteHistory&#39; parameter in the &#39;safeDeleteSubProcessInstance&#39; method of &#39;DefaultDynamicStateManager&#39; needs to be overridden.\r\n\r\nIt is not clear why Flowable does not provide a parameter to control this behavior, but instead hardcodes it in the codebase.\r\n","title":"How to solve the issue of losing history records when using Flowable&#39;s ChangeActivityStateBuilder#moveActivityIdToParentActivityId method?","body":"<p>After debugging the source code, it was found that at line 545 in ExecutionEntityManagerImpl.java from /Users/dlin/.m2/repository/org/flowable/flowable-engine/6.8.0/flowable-engine-6.8.0-sources.jar!, the code block below is used to check whether to delete the history records of a process instance:</p>\n<pre><code>if (deleteHistory) {\ngetHistoryManager().recordProcessInstanceDeleted(execution.getId(), execution.getProcessDefinitionId(), execution.getTenantId());\n}\n</code></pre>\n<p>Therefore, to preserve the history records, the value of the 'deleteHistory' parameter in the 'safeDeleteSubProcessInstance' method of 'DefaultDynamicStateManager' needs to be overridden.</p>\n<p>It is not clear why Flowable does not provide a parameter to control this behavior, but instead hardcodes it in the codebase.</p>\n"}],"owner":{"account_id":25252139,"reputation":1,"user_id":19084475,"display_name":"Dlin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683277525,"creation_date":1683268499,"question_id":76179401,"body_markdown":"My process involves the CallActivity, and I need to return from the sub-process to the main process. However, using moveActivityIdToParentActivityId would result in the loss of the history records. I want to retain the history records. What should I do?\r\n\r\nI have tried moving the current CallActivity from the main process to the previous task node directly. Although this can retain the history records, the variables in the sub-process will not be output to the main process.\r\n\r\nUsing moveActivityIdToParentActivityId can output sub-process variables to the main process, but the process records will be lost.","title":"How to solve the issue of losing history records when using Flowable&#39;s ChangeActivityStateBuilder#moveActivityIdToParentActivityId method?","body":"<p>My process involves the CallActivity, and I need to return from the sub-process to the main process. However, using moveActivityIdToParentActivityId would result in the loss of the history records. I want to retain the history records. What should I do?</p>\n<p>I have tried moving the current CallActivity from the main process to the previous task node directly. Although this can retain the history records, the variables in the sub-process will not be output to the main process.</p>\n<p>Using moveActivityIdToParentActivityId can output sub-process variables to the main process, but the process records will be lost.</p>\n"},{"tags":["java","installation","windows-installer","uninstallation"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1683287183,"post_id":76180477,"comment_id":134347256,"body_markdown":"Have you done a global search for that .msi file? If you have and it&#39;s absent, you could always try to download it again.","body":"Have you done a global search for that .msi file? If you have and it&#39;s absent, you could always try to download it again."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1683293998,"post_id":76180477,"comment_id":134348911,"body_markdown":"You may try to delete the folder manually and follow [these instructions](https://superuser.com/a/1616076/646359) to get rid of the Java version from the list of installed software. If this fails, well, reinstalling Windows at least once in a decade is not bad. You may get rid of other legacy artifacts as a side effect.","body":"You may try to delete the folder manually and follow <a href=\"https://superuser.com/a/1616076/646359\">these instructions</a> to get rid of the Java version from the list of installed software. If this fails, well, reinstalling Windows at least once in a decade is not bad. You may get rid of other legacy artifacts as a side effect."},{"owner":{"account_id":44075,"reputation":40440,"user_id":129130,"accept_rate":79,"display_name":"Stein &#197;smul"},"score":0,"creation_date":1683300770,"post_id":76180477,"comment_id":134350806,"body_markdown":"For problems like these - broken MSI uninstalls - you should try the [Microsoft FixIt tool](https://support.microsoft.com/en-us/topic/fix-problems-that-block-programs-from-being-installed-or-removed-cca7d1b6-65a9-3d98-426b-e9f927e1eb4d). There is also the larger issue of [uninstalling your own MSI files that are broken during development work](https://stackoverflow.com/a/53876981/129130) (some approaches here can be used for all MSI uninstall problems, but the Microsoft FixIt solution is the best for most users). And [on MSI uninstall in general](https://stackoverflow.com/a/1055933/129130)","body":"For problems like these - broken MSI uninstalls - you should try the <a href=\"https://support.microsoft.com/en-us/topic/fix-problems-that-block-programs-from-being-installed-or-removed-cca7d1b6-65a9-3d98-426b-e9f927e1eb4d\" rel=\"nofollow noreferrer\">Microsoft FixIt tool</a>. There is also the larger issue of <a href=\"https://stackoverflow.com/a/53876981/129130\">uninstalling your own MSI files that are broken during development work</a> (some approaches here can be used for all MSI uninstall problems, but the Microsoft FixIt solution is the best for most users). And <a href=\"https://stackoverflow.com/a/1055933/129130\">on MSI uninstall in general</a>"},{"owner":{"account_id":27429918,"reputation":21,"user_id":20926790,"display_name":"Tim Matthew"},"score":0,"creation_date":1687779353,"post_id":76180477,"comment_id":134979641,"body_markdown":"g00se, I&#39;m sorry for not answering. A long time I put off until the moment... The .msi file appears on global serach, but trying to dlete this it says it isn&#39;t here anymore. Also I found the archive of this jre on my computer. I suppose that I need to set the same path as the existing jre folder to replace the exisitng folders and files by the installing ones, isn`t it?","body":"g00se, I&#39;m sorry for not answering. A long time I put off until the moment... The .msi file appears on global serach, but trying to dlete this it says it isn&#39;t here anymore. Also I found the archive of this jre on my computer. I suppose that I need to set the same path as the existing jre folder to replace the exisitng folders and files by the installing ones, isn`t it?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1687784083,"post_id":76180477,"comment_id":134980674,"body_markdown":"You never want to delete an msi file if you&#39;re trying to uninstall what it installs. Just forget about the old and install the new version","body":"You never want to delete an msi file if you&#39;re trying to uninstall what it installs. Just forget about the old and install the new version"}],"owner":{"account_id":27429918,"reputation":21,"user_id":20926790,"display_name":"Tim Matthew"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":202,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1683277093,"creation_date":1683277093,"question_id":76180477,"body_markdown":"I need to install a **Java 8** version. Earlier I had **Java 6 TM Update 2**, but now it&#39;s not in my computer (I&#39;ve checked it on command prompt and nothing versions appeared). However, the folder with **jre1.6** is still here and in **add or remove programs** it is still found. When I click **uninstall** this appears\r\n                                        \r\n[![enter image description here][1]][1]\r\n\r\nAnd when I submit (OK) this appears\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Vs627.png\r\n  [2]: https://i.stack.imgur.com/AwhVX.png\r\n\r\nThe *jre1.6.0_02.msi* file might be deleted accidently. Whatever how can I fix the problem?","title":"The path cannot be found while uninstalling Java (TM) 6 Update 2","body":"<p>I need to install a <strong>Java 8</strong> version. Earlier I had <strong>Java 6 TM Update 2</strong>, but now it's not in my computer (I've checked it on command prompt and nothing versions appeared). However, the folder with <strong>jre1.6</strong> is still here and in <strong>add or remove programs</strong> it is still found. When I click <strong>uninstall</strong> this appears</p>\n<p><a href=\"https://i.stack.imgur.com/Vs627.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Vs627.png\" alt=\"enter image description here\" /></a></p>\n<p>And when I submit (OK) this appears</p>\n<p><a href=\"https://i.stack.imgur.com/AwhVX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AwhVX.png\" alt=\"enter image description here\" /></a></p>\n<p>The <em>jre1.6.0_02.msi</em> file might be deleted accidently. Whatever how can I fix the problem?</p>\n"},{"tags":["java","java-8","jodatime","weblogic12c","tzdata"],"comments":[{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1683151914,"post_id":76168224,"comment_id":134324433,"body_markdown":"Why not just use the current version 2.12.5? [Joda-Time](https://www.joda.org/joda-time/) is in [maintenance-mode](https://en.wikipedia.org/wiki/Maintenance_mode), so only the most minimal changes are being made. See the [Release Notes](https://www.joda.org/joda-time/changes-report.html#a2.11.2).","body":"Why not just use the current version 2.12.5? <a href=\"https://www.joda.org/joda-time/\" rel=\"nofollow noreferrer\">Joda-Time</a> is in <a href=\"https://en.wikipedia.org/wiki/Maintenance_mode\" rel=\"nofollow noreferrer\">maintenance-mode</a>, so only the most minimal changes are being made. See the <a href=\"https://www.joda.org/joda-time/changes-report.html#a2.11.2\" rel=\"nofollow noreferrer\">Release Notes</a>."},{"owner":{"account_id":10242075,"reputation":11,"user_id":21809809,"display_name":"pancho"},"score":1,"creation_date":1683206755,"post_id":76168224,"comment_id":134333493,"body_markdown":"The joda-time library is inside a framework, updating the library means more work since we don&#39;t know what else could fail and certify everything again.","body":"The joda-time library is inside a framework, updating the library means more work since we don&#39;t know what else could fail and certify everything again."}],"owner":{"account_id":10242075,"reputation":11,"user_id":21809809,"display_name":"pancho"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1683276945,"creation_date":1683150913,"question_id":76168224,"body_markdown":"Currently in our project we are using joda-time version 2.9.9, the project is on production and we need to update the tzdata of jodatime.\r\nJava 1.8\r\nWeblogic 12.2.1.3\r\ntzdata from https://data.iana.org/time-zones/releases/tzdata2023c.tar.gz\r\n\r\nWhen the test server server start, we have an exception.\r\n\r\n```\r\n\r\n        at weblogic.work.PartitionUtility.runWorkUnderContext(PartitionUtility.java:41)\r\n        at weblogic.work.SelfTuningWorkManagerImpl.runWorkUnderContext(SelfTuningWorkManagerImpl.java:652)\r\n        at weblogic.work.ExecuteThread.execute(ExecuteThread.java:420)\r\n        at weblogic.work.ExecuteThread.run(ExecuteThread.java:360)\r\nCaused by: java.lang.RuntimeException: java.io.FileNotFoundException: /tmp/tz/tzdata2020a/ZoneInfoMap (Is a directory)\r\n        at org.joda.time.DateTimeZone.getDefaultProvider(DateTimeZone.java:506)\r\n        at org.joda.time.DateTimeZone.getProvider(DateTimeZone.java:413)\r\n        at org.joda.time.DateTimeZone.forTimeZone(DateTimeZone.java:349)(ExchangeTimingHandlerImpl.java:99)\r\n        ... 82 more\r\nCaused by: java.io.FileNotFoundException: /tmp/tz/tzdata20223c/ZoneInfoMap (No such file or directory)\r\n        at java.io.FileInputStream.open0(Native Method)\r\n        at java.io.FileInputStream.open(FileInputStream.java:195)\r\n        at java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:138)\r\n        at org.joda.time.tz.ZoneInfoProvider.openResource(ZoneInfoProvider.java:196)\r\n        at org.joda.time.tz.ZoneInfoProvider.&lt;init&gt;(ZoneInfoProvider.java:74)\r\n        at org.joda.time.DateTimeZone.getDefaultProvider(DateTimeZone.java:503)\r\n        ... 90 more\r\n\r\n```\r\n\r\nWe have been looking into \r\nhttps://www.joda.org/joda-time/tz_update.html\r\nhttps://github.com/JodaOrg, but we couldn&#39;t find anything related to the property or &quot;ZoneInfoMap (No such file or directory)&quot;.\r\n\r\nDoes any one know the solution?\r\n\r\nThe idea is to be able to update the tzdata information from Joda-Time library.\r\n\r\nThe Joda-Time library is inside a framework. Updating the library would mean more work since we don&#39;t know what else could fail and certify everything again.","title":"How to use Joda-time property org.joda.time.DateTimeZone.Folder","body":"<p>Currently in our project we are using joda-time version 2.9.9, the project is on production and we need to update the tzdata of jodatime.\nJava 1.8\nWeblogic 12.2.1.3\ntzdata from <a href=\"https://data.iana.org/time-zones/releases/tzdata2023c.tar.gz\" rel=\"nofollow noreferrer\">https://data.iana.org/time-zones/releases/tzdata2023c.tar.gz</a></p>\n<p>When the test server server start, we have an exception.</p>\n<pre><code>\n        at weblogic.work.PartitionUtility.runWorkUnderContext(PartitionUtility.java:41)\n        at weblogic.work.SelfTuningWorkManagerImpl.runWorkUnderContext(SelfTuningWorkManagerImpl.java:652)\n        at weblogic.work.ExecuteThread.execute(ExecuteThread.java:420)\n        at weblogic.work.ExecuteThread.run(ExecuteThread.java:360)\nCaused by: java.lang.RuntimeException: java.io.FileNotFoundException: /tmp/tz/tzdata2020a/ZoneInfoMap (Is a directory)\n        at org.joda.time.DateTimeZone.getDefaultProvider(DateTimeZone.java:506)\n        at org.joda.time.DateTimeZone.getProvider(DateTimeZone.java:413)\n        at org.joda.time.DateTimeZone.forTimeZone(DateTimeZone.java:349)(ExchangeTimingHandlerImpl.java:99)\n        ... 82 more\nCaused by: java.io.FileNotFoundException: /tmp/tz/tzdata20223c/ZoneInfoMap (No such file or directory)\n        at java.io.FileInputStream.open0(Native Method)\n        at java.io.FileInputStream.open(FileInputStream.java:195)\n        at java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:138)\n        at org.joda.time.tz.ZoneInfoProvider.openResource(ZoneInfoProvider.java:196)\n        at org.joda.time.tz.ZoneInfoProvider.&lt;init&gt;(ZoneInfoProvider.java:74)\n        at org.joda.time.DateTimeZone.getDefaultProvider(DateTimeZone.java:503)\n        ... 90 more\n\n</code></pre>\n<p>We have been looking into\n<a href=\"https://www.joda.org/joda-time/tz_update.html\" rel=\"nofollow noreferrer\">https://www.joda.org/joda-time/tz_update.html</a>\n<a href=\"https://github.com/JodaOrg\" rel=\"nofollow noreferrer\">https://github.com/JodaOrg</a>, but we couldn't find anything related to the property or &quot;ZoneInfoMap (No such file or directory)&quot;.</p>\n<p>Does any one know the solution?</p>\n<p>The idea is to be able to update the tzdata information from Joda-Time library.</p>\n<p>The Joda-Time library is inside a framework. Updating the library would mean more work since we don't know what else could fail and certify everything again.</p>\n"},{"tags":["java","android","exoplayer"],"answers":[{"tags":[],"owner":{"account_id":133209,"reputation":24579,"user_id":334402,"accept_rate":50,"display_name":"Mick"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1683276784,"creation_date":1683276784,"answer_id":76180434,"question_id":76134804,"body_markdown":"The new method is a little different - it is explained in the online documentation but it may to be clear how the new and old methods relate: https://exoplayer.dev/track-selection.html\r\n\r\nThe new method getCurrentTracks() returns a list of Track.Group, and each entry in this list is a group that contains individual tracks with the same content in different formats.\r\n\r\nYou can then iterate through each track in a group to get information about that individual track - e.g. to see if the track is supported as in the example at the above link:\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    for (Tracks.Group trackGroup : tracks.getGroups()) {\r\n      // Group level information.\r\n      @C.TrackType int trackType = trackGroup.getTrackType();\r\n      boolean trackInGroupIsSelected = trackGroup.isSelected();\r\n      boolean trackInGroupIsSupported = trackGroup.isSupported();\r\n      for (int i = 0; i &lt; trackGroup.length; i++) {\r\n        // Individual track information.\r\n        boolean isSupported = trackGroup.isTrackSupported(i);\r\n        boolean isSelected = trackGroup.isTrackSelected(i);\r\n        Format trackFormat = trackGroup.getTrackFormat(i);\r\n      }\r\n    }\r\n\r\n ","title":"ExoPlayer getCurrentTrackGroups() deprecated","body":"<p>The new method is a little different - it is explained in the online documentation but it may to be clear how the new and old methods relate: <a href=\"https://exoplayer.dev/track-selection.html\" rel=\"nofollow noreferrer\">https://exoplayer.dev/track-selection.html</a></p>\n<p>The new method getCurrentTracks() returns a list of Track.Group, and each entry in this list is a group that contains individual tracks with the same content in different formats.</p>\n<p>You can then iterate through each track in a group to get information about that individual track - e.g. to see if the track is supported as in the example at the above link:</p>\n<pre class=\"lang-js prettyprint-override\"><code>for (Tracks.Group trackGroup : tracks.getGroups()) {\n  // Group level information.\n  @C.TrackType int trackType = trackGroup.getTrackType();\n  boolean trackInGroupIsSelected = trackGroup.isSelected();\n  boolean trackInGroupIsSupported = trackGroup.isSupported();\n  for (int i = 0; i &lt; trackGroup.length; i++) {\n    // Individual track information.\n    boolean isSupported = trackGroup.isTrackSupported(i);\n    boolean isSelected = trackGroup.isTrackSelected(i);\n    Format trackFormat = trackGroup.getTrackFormat(i);\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":18549138,"reputation":35,"user_id":13515739,"display_name":"Brenton"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":138,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76180434,"answer_count":1,"score":0,"last_activity_date":1683276784,"creation_date":1682749122,"question_id":76134804,"body_markdown":"Can someone please assist with this Android Java ExoPlayer code to detect audio format. I modified this method from an Exo developer GitHub comment from 2020 and it works, but in Android Studio it&#39;s telling me the function is already depreciated and I can&#39;t figure out how to update it?\r\n\r\nThis method works, but AS gives waring &quot;&#39;getCurrentTrackGroups()&#39; is deprecated&quot;\r\n\r\n    private static Format detectAudioFormat() {\r\n        TrackGroupArray trackGroups = player.getCurrentTrackGroups();\r\n        for (int i = 0; i &lt; trackGroups.length; i++) {\r\n            TrackGroup trackGroup = trackGroups.get(i);\r\n            for (int j = 0; j &lt; trackGroup.length; j++) {\r\n                Format format = trackGroup.getFormat(j);\r\n                if (MimeTypes.isAudio(format.sampleMimeType)) {\r\n                    return format;\r\n                }\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\nAfter changing getCurrentTrackGroups() to getCurrentTracks() AS now gives errors &quot;Cannot resolve symbol &#39;length&#39;&quot; and &quot;Cannot resolve method &#39;get&#39; in &#39;Tracks&#39;&quot;\r\n\r\n    private static Format detectAudioFormat() {\r\n        Tracks trackGroups = player.getCurrentTracks();\r\n        for (int i = 0; i &lt; trackGroups.length; i++) {\r\n            TrackGroup trackGroup = trackGroups.get(i);\r\n            for (int j = 0; j &lt; trackGroup.length; j++) {\r\n                Format format = trackGroup.getFormat(j);\r\n                if (MimeTypes.isAudio(format.sampleMimeType)) {\r\n                    return format;\r\n                }\r\n            }\r\n        }\r\n        return null;\r\n    }","title":"ExoPlayer getCurrentTrackGroups() deprecated","body":"<p>Can someone please assist with this Android Java ExoPlayer code to detect audio format. I modified this method from an Exo developer GitHub comment from 2020 and it works, but in Android Studio it's telling me the function is already depreciated and I can't figure out how to update it?</p>\n<p>This method works, but AS gives waring &quot;'getCurrentTrackGroups()' is deprecated&quot;</p>\n<pre><code>private static Format detectAudioFormat() {\n    TrackGroupArray trackGroups = player.getCurrentTrackGroups();\n    for (int i = 0; i &lt; trackGroups.length; i++) {\n        TrackGroup trackGroup = trackGroups.get(i);\n        for (int j = 0; j &lt; trackGroup.length; j++) {\n            Format format = trackGroup.getFormat(j);\n            if (MimeTypes.isAudio(format.sampleMimeType)) {\n                return format;\n            }\n        }\n    }\n    return null;\n}\n</code></pre>\n<p>After changing getCurrentTrackGroups() to getCurrentTracks() AS now gives errors &quot;Cannot resolve symbol 'length'&quot; and &quot;Cannot resolve method 'get' in 'Tracks'&quot;</p>\n<pre><code>private static Format detectAudioFormat() {\n    Tracks trackGroups = player.getCurrentTracks();\n    for (int i = 0; i &lt; trackGroups.length; i++) {\n        TrackGroup trackGroup = trackGroups.get(i);\n        for (int j = 0; j &lt; trackGroup.length; j++) {\n            Format format = trackGroup.getFormat(j);\n            if (MimeTypes.isAudio(format.sampleMimeType)) {\n                return format;\n            }\n        }\n    }\n    return null;\n}\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":8116262,"reputation":105,"user_id":6114667,"display_name":"Alexandre"},"score":0,"creation_date":1527493471,"post_id":50532263,"comment_id":88133267,"body_markdown":"Thank you for your reply.\non the repository /opt/appdata/conv/data/in everything works but not /opt/appdata/conv/data/out. They have the same rights.\nIn /opt/appdata/conv/data/out files are well deleted, just the directory dosen&#39;t.\n\nMy application has the same rights and in the same group of user i use in promtp","body":"Thank you for your reply. on the repository /opt/appdata/conv/data/in everything works but not /opt/appdata/conv/data/out. They have the same rights. In /opt/appdata/conv/data/out files are well deleted, just the directory dosen&#39;t.  My application has the same rights and in the same group of user i use in promtp"}],"answers":[{"comments":[{"owner":{"account_id":5408631,"reputation":4063,"user_id":4306260,"accept_rate":30,"display_name":"User"},"score":0,"creation_date":1550316279,"post_id":50532335,"comment_id":96229483,"body_markdown":"deleteDirectory() will delete recursively as per documentation. If it wants empty folder to delete then what is the meaning of recursively? Rather I would use general file.delete() for empty folders.","body":"deleteDirectory() will delete recursively as per documentation. If it wants empty folder to delete then what is the meaning of recursively? Rather I would use general file.delete() for empty folders."}],"tags":[],"owner":{"account_id":13300553,"reputation":111,"user_id":9602180,"display_name":"Tryliom"},"comment_count":1,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1527261359,"creation_date":1527261359,"answer_id":50532335,"question_id":50532263,"body_markdown":"There are files in your folder ? If yes, you should delete them before delete the folder","title":"Java - Delete directory - IOException: Unable to delete directory","body":"<p>There are files in your folder ? If yes, you should delete them before delete the folder</p>\n"},{"tags":[],"owner":{"account_id":10812140,"reputation":56,"user_id":7952422,"display_name":"shifty"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1527261485,"creation_date":1527261485,"answer_id":50532370,"question_id":50532263,"body_markdown":"Did you check permissions on that directory/file to ensure the user executing the command has sufficient rights?\r\n\r\nAlternatively, if another process has a handle on the file, that would also cause a problem.  Assuming you&#39;re using a linux based OS, try using the command: fuser /opt/appdata/conv/data/out/Job000000000676\r\n\r\nGood luck","title":"Java - Delete directory - IOException: Unable to delete directory","body":"<p>Did you check permissions on that directory/file to ensure the user executing the command has sufficient rights?</p>\n\n<p>Alternatively, if another process has a handle on the file, that would also cause a problem.  Assuming you're using a linux based OS, try using the command: fuser /opt/appdata/conv/data/out/Job000000000676</p>\n\n<p>Good luck</p>\n"},{"comments":[{"owner":{"account_id":8116262,"reputation":105,"user_id":6114667,"display_name":"Alexandre"},"score":0,"creation_date":1527493606,"post_id":50532386,"comment_id":88133338,"body_markdown":"Thank you for your reply.\non the repository /opt/appdata/conv/data/in everything works but not /opt/appdata/conv/data/out. They have the same rights.\nIn /opt/appdata/conv/data/out files are well deleted, just the directory dosen&#39;t.\n\nMy application has the same rights and in the same group of user i use in promtp","body":"Thank you for your reply. on the repository /opt/appdata/conv/data/in everything works but not /opt/appdata/conv/data/out. They have the same rights. In /opt/appdata/conv/data/out files are well deleted, just the directory dosen&#39;t.  My application has the same rights and in the same group of user i use in promtp"}],"tags":[],"owner":{"account_id":11468218,"reputation":5521,"user_id":8405835,"display_name":"Abhijit Pritam Dutta"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1543689162,"creation_date":1527261538,"answer_id":50532386,"question_id":50532263,"body_markdown":"You need to check the following to fix this issue:-\r\n\r\n1. User Id/account with which you are running your application must have permission to delete the below directory. If you are running the java application with your account then you must have permission to delete the below directory.\r\n\r\n         /opt/appdata/conv/data/out/Job000000000676\r\n\r\n2. Add the account into the proper group. To do that first check with `ls -ltr` execute it inside `/opt/appdata/conv/data/out`  and add your account to the group which has full permission to delete directories inside `out` directory\r\n\r\n3. Also check if `Job000000000676` has sub directory inside it. In such a condition you can execute unix command like `rm -rf /opt/appdata/conv/data/out/Job000000000676`. See how to execute unix command from java application for detail.\r\n\r\nHope this will help you.","title":"Java - Delete directory - IOException: Unable to delete directory","body":"<p>You need to check the following to fix this issue:-</p>\n\n<ol>\n<li><p>User Id/account with which you are running your application must have permission to delete the below directory. If you are running the java application with your account then you must have permission to delete the below directory.</p>\n\n<pre><code> /opt/appdata/conv/data/out/Job000000000676\n</code></pre></li>\n<li><p>Add the account into the proper group. To do that first check with <code>ls -ltr</code> execute it inside <code>/opt/appdata/conv/data/out</code>  and add your account to the group which has full permission to delete directories inside <code>out</code> directory</p></li>\n<li><p>Also check if <code>Job000000000676</code> has sub directory inside it. In such a condition you can execute unix command like <code>rm -rf /opt/appdata/conv/data/out/Job000000000676</code>. See how to execute unix command from java application for detail.</p></li>\n</ol>\n\n<p>Hope this will help you.</p>\n"},{"tags":[],"owner":{"account_id":13053979,"reputation":1,"user_id":9433406,"display_name":"Prachi Katti"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1678103813,"creation_date":1678103813,"answer_id":75650576,"question_id":50532263,"body_markdown":"Pls check your disk space and keep enough space. Sometimes it is not able to perform IO tasks due to lack of space.","title":"Java - Delete directory - IOException: Unable to delete directory","body":"<p>Pls check your disk space and keep enough space. Sometimes it is not able to perform IO tasks due to lack of space.</p>\n"},{"tags":[],"owner":{"account_id":17836939,"reputation":1,"user_id":12955735,"display_name":"Ashwin Sridhar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683276722,"creation_date":1683276722,"answer_id":76180427,"question_id":50532263,"body_markdown":"In your code, check if you are opening the file at any instance before deleting, maybe you are using a buffered reader for the same.\r\nEnsure that file reader or buffered reader is closed before deleting.","title":"Java - Delete directory - IOException: Unable to delete directory","body":"<p>In your code, check if you are opening the file at any instance before deleting, maybe you are using a buffered reader for the same.\nEnsure that file reader or buffered reader is closed before deleting.</p>\n"}],"owner":{"account_id":8116262,"reputation":105,"user_id":6114667,"display_name":"Alexandre"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":27438,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":50532386,"answer_count":5,"score":7,"last_activity_date":1683276722,"creation_date":1527261121,"question_id":50532263,"body_markdown":"I&#39;m trying to delete two repositories\r\n\r\n    org.apache.commons.io.FileUtils.deleteDirectory(jobInDirectory);\r\n    org.apache.commons.io.FileUtils.deleteDirectory(jobOutDirectory);\r\n\r\nPath are right\r\n\r\nRights on directory too\r\n\r\nThe first is well deleted\r\nbut not the second. Every file inside was deleted but not the directory \r\n\r\n    java.io.IOException: Unable to delete directory /opt/appdata/conv/data/out/Job000000000676.\r\n\r\nI looked to see if another process had locked it using the command `lsfo` and no other process uses it...\r\n\r\nAny idea ?","title":"Java - Delete directory - IOException: Unable to delete directory","body":"<p>I'm trying to delete two repositories</p>\n<pre><code>org.apache.commons.io.FileUtils.deleteDirectory(jobInDirectory);\norg.apache.commons.io.FileUtils.deleteDirectory(jobOutDirectory);\n</code></pre>\n<p>Path are right</p>\n<p>Rights on directory too</p>\n<p>The first is well deleted\nbut not the second. Every file inside was deleted but not the directory</p>\n<pre><code>java.io.IOException: Unable to delete directory /opt/appdata/conv/data/out/Job000000000676.\n</code></pre>\n<p>I looked to see if another process had locked it using the command <code>lsfo</code> and no other process uses it...</p>\n<p>Any idea ?</p>\n"},{"tags":["java","terminal","apt"],"comments":[{"owner":{"account_id":15641451,"reputation":49,"user_id":11284694,"display_name":"AllMightyGoat"},"score":0,"creation_date":1613679339,"post_id":66267454,"comment_id":117157561,"body_markdown":"Maybe it is getting confused with the old path of jdk. Did you delete the old the jdk or at least removed it from the path and JAVA_HOME.","body":"Maybe it is getting confused with the old path of jdk. Did you delete the old the jdk or at least removed it from the path and JAVA_HOME."},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":1,"creation_date":1613679746,"post_id":66267454,"comment_id":117157749,"body_markdown":"For clarity, a comment on a now-deleted answer shows that OP is trying to follow https://phoenixnap.com/kb/update-node-js-version which is a guide for linux, and the `apt` they mention is referring to debian/ubuntu package manager, not java&#39;s annotation processing tool.","body":"For clarity, a comment on a now-deleted answer shows that OP is trying to follow <a href=\"https://phoenixnap.com/kb/update-node-js-version\" rel=\"nofollow noreferrer\">phoenixnap.com/kb/update-node-js-version</a> which is a guide for linux, and the <code>apt</code> they mention is referring to debian/ubuntu package manager, not java&#39;s annotation processing tool."}],"answers":[{"comments":[{"owner":{"account_id":10548144,"reputation":690,"user_id":9781768,"display_name":"User9123"},"score":1,"creation_date":1613679929,"post_id":66267603,"comment_id":117157838,"body_markdown":"Thanks! That makes so much more sense now. For reference to anybody who didn&#39;t see earlier I was trying to follow this tutorial: https://phoenixnap.com/kb/update-node-js-version","body":"Thanks! That makes so much more sense now. For reference to anybody who didn&#39;t see earlier I was trying to follow this tutorial: <a href=\"https://phoenixnap.com/kb/update-node-js-version\" rel=\"nofollow noreferrer\">phoenixnap.com/kb/update-node-js-version</a>"},{"owner":{"account_id":20108004,"reputation":121,"user_id":14745026,"display_name":"Francisco Gutierrez Ramirez"},"score":1,"creation_date":1637990266,"post_id":66267603,"comment_id":123973827,"body_markdown":"How do we use brew to do it instead of sudo apt?","body":"How do we use brew to do it instead of sudo apt?"},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1638021638,"post_id":66267603,"comment_id":123979109,"body_markdown":"The question does not mention what &#39;it&#39; is, @FranciscoGutierrezRamirez","body":"The question does not mention what &#39;it&#39; is, @FranciscoGutierrezRamirez"},{"owner":{"account_id":6157899,"reputation":19810,"user_id":4800344,"display_name":"Ermiya Eskandary"},"score":2,"creation_date":1639484228,"post_id":66267603,"comment_id":124355126,"body_markdown":"This is the answer I needed - was trying to use `sudo apt install certbot` stupidly and needed to use `brew install certbot` instead. Even Java can&#39;t name their stuff properly &#129318;‍♂️","body":"This is the answer I needed - was trying to use <code>sudo apt install certbot</code> stupidly and needed to use <code>brew install certbot</code> instead. Even Java can&#39;t name their stuff properly 🤦‍♂️"},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1639496218,"post_id":66267603,"comment_id":124360188,"body_markdown":"@ErmiyaEskandary I don&#39;t think the debian team gets to just claim a 3-letter acronym. It was apple and linux distributions that decided to pile __every__ tool in a JDK&#39;s `bin` dir into your path which was never the intended design. Tragic, nobody is to blame for any of this however.","body":"@ErmiyaEskandary I don&#39;t think the debian team gets to just claim a 3-letter acronym. It was apple and linux distributions that decided to pile <b>every</b> tool in a JDK&#39;s <code>bin</code> dir into your path which was never the intended design. Tragic, nobody is to blame for any of this however."},{"owner":{"account_id":6157899,"reputation":19810,"user_id":4800344,"display_name":"Ermiya Eskandary"},"score":1,"creation_date":1639496517,"post_id":66267603,"comment_id":124360335,"body_markdown":"@rzwitserloot Agreed but these days, anyone saying `apt` will probably only think of the package manager, not the Java `apt` tool","body":"@rzwitserloot Agreed but these days, anyone saying <code>apt</code> will probably only think of the package manager, not the Java <code>apt</code> tool"},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1639499235,"post_id":66267603,"comment_id":124361596,"body_markdown":"@ErmiyaEskandary That was true when oracle added &#39;apt&#39; to the `bin` dir of OpenJDK distros too, but there are ~50 executables in there and we just do not name executables e.g. `org.openjdk.java-compiler-v16`. We name them `javac`. That&#39;s not OpenJDK&#39;s choosing. They didn&#39;t mess up this name. Nobody is individually &#39;at fault&#39;.","body":"@ErmiyaEskandary That was true when oracle added &#39;apt&#39; to the <code>bin</code> dir of OpenJDK distros too, but there are ~50 executables in there and we just do not name executables e.g. <code>org.openjdk.java-compiler-v16</code>. We name them <code>javac</code>. That&#39;s not OpenJDK&#39;s choosing. They didn&#39;t mess up this name. Nobody is individually &#39;at fault&#39;."},{"owner":{"account_id":10346755,"reputation":21971,"user_id":7631480,"display_name":"CryptoFool"},"score":0,"creation_date":1646023851,"post_id":66267603,"comment_id":126013965,"body_markdown":"...uh...folks...all of the above and everything else here makes good sense.  But maybe someone can explain how THIS fits into it all:  https://formulae.brew.sh/formula/apt","body":"...uh...folks...all of the above and everything else here makes good sense.  But maybe someone can explain how THIS fits into it all:  <a href=\"https://formulae.brew.sh/formula/apt\" rel=\"nofollow noreferrer\">formulae.brew.sh/formula/apt</a>"},{"owner":{"account_id":13464419,"reputation":85,"user_id":9715264,"display_name":"Tina"},"score":0,"creation_date":1660450796,"post_id":66267603,"comment_id":129534062,"body_markdown":"ugh thank you for this context!! this is exactly what i needed to know","body":"ugh thank you for this context!! this is exactly what i needed to know"},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1683244544,"post_id":66267603,"comment_id":134341342,"body_markdown":"@CryptoFool `apt` is an executable that does things. Specifically, it lets you interact with apt repositories. On its own it is useless unless you add apt repo sources. __On linux__, it ships out of the box with useful repo sources pre-configured. apt repo sources exist with packages ready to install on e.g. debian linux distributions. `brew install apt` installs the tool. This is a completely useless tool without a repo. Sometimes folks make their own apt repos (it&#39;s open source after all). `brew install apt` is always entirely useless.","body":"@CryptoFool <code>apt</code> is an executable that does things. Specifically, it lets you interact with apt repositories. On its own it is useless unless you add apt repo sources. <b>On linux</b>, it ships out of the box with useful repo sources pre-configured. apt repo sources exist with packages ready to install on e.g. debian linux distributions. <code>brew install apt</code> installs the tool. This is a completely useless tool without a repo. Sometimes folks make their own apt repos (it&#39;s open source after all). <code>brew install apt</code> is always entirely useless."},{"owner":{"account_id":10346755,"reputation":21971,"user_id":7631480,"display_name":"CryptoFool"},"score":0,"creation_date":1683317515,"post_id":66267603,"comment_id":134354210,"body_markdown":"@rzwitserloot - I don&#39;t understand the point of your response to me.  I know exactly what &quot;apt&quot; is on a Debian-style Linux host, and I know that it is useless without its package repos.  I was asking what the purpose of the &quot;apt&quot; tool is that exists in Brew...that is, is there an appropriate use for this tool on a Mac?  Maybe I could have made my question clearer.  Telling me that it is completely useless doesn&#39;t answer my question as to why there is a build of the tool in Brew.","body":"@rzwitserloot - I don&#39;t understand the point of your response to me.  I know exactly what &quot;apt&quot; is on a Debian-style Linux host, and I know that it is useless without its package repos.  I was asking what the purpose of the &quot;apt&quot; tool is that exists in Brew...that is, is there an appropriate use for this tool on a Mac?  Maybe I could have made my question clearer.  Telling me that it is completely useless doesn&#39;t answer my question as to why there is a build of the tool in Brew."},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1683317892,"post_id":66267603,"comment_id":134354279,"body_markdown":"hmm, unfortunate typo, I meant to write &#39;__almost__ entirely useless&#39;. It&#39;s useful if you want to write and maintain your own mini apt repos. Hence the second-to-last-line: &quot;Sometimes folks make their own apt repos&quot;.","body":"hmm, unfortunate typo, I meant to write &#39;<b>almost</b> entirely useless&#39;. It&#39;s useful if you want to write and maintain your own mini apt repos. Hence the second-to-last-line: &quot;Sometimes folks make their own apt repos&quot;."},{"owner":{"account_id":94143,"reputation":765,"user_id":994945,"display_name":"Justin MacLeod"},"score":0,"creation_date":1697313645,"post_id":66267603,"comment_id":136265251,"body_markdown":"OMG, I was so confused why the thing I was trying to do was talking about java... thanks so much for this answer.","body":"OMG, I was so confused why the thing I was trying to do was talking about java... thanks so much for this answer."}],"tags":[],"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":13,"down_vote_count":0,"up_vote_count":80,"is_accepted":true,"score":80,"last_activity_date":1613679691,"creation_date":1613679691,"answer_id":66267603,"question_id":66267454,"body_markdown":"20 years ago, java shipped with a tool called `apt`: Annotation Processor Tool. This tool was obsolete not much later.\r\n\r\nWhat that update-node-js-version is talking about, is __a completely and totally unrelated tool__: It&#39;s the `Advanced Package Tool`, which is a tool to manage installations __on debian and ubuntu__ - linux distros. You do not __want__ to run this on a mac, and the instructions you found are therefore completely useless: That is how to update node-js on linux. Your machine isn&#39;t linux.\r\n\r\nSearch around for answers involving `brew`, which is the go-to equivalent of `apt` on mac. And completely forget about java - this has NOTHING to do with java - that was just a pure coincidence.\r\n","title":"JDK is installed on mac but i&#39;m getting &quot;The operation couldn’t be completed. Unable to locate a Java Runtime that supports apt.&quot; sudo apt update","body":"<p>20 years ago, java shipped with a tool called <code>apt</code>: Annotation Processor Tool. This tool was obsolete not much later.</p>\n<p>What that update-node-js-version is talking about, is <strong>a completely and totally unrelated tool</strong>: It's the <code>Advanced Package Tool</code>, which is a tool to manage installations <strong>on debian and ubuntu</strong> - linux distros. You do not <strong>want</strong> to run this on a mac, and the instructions you found are therefore completely useless: That is how to update node-js on linux. Your machine isn't linux.</p>\n<p>Search around for answers involving <code>brew</code>, which is the go-to equivalent of <code>apt</code> on mac. And completely forget about java - this has NOTHING to do with java - that was just a pure coincidence.</p>\n"},{"tags":[],"owner":{"account_id":4749640,"reputation":1513,"user_id":3839980,"accept_rate":0,"display_name":"Nitin Jha"},"comment_count":0,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1633760984,"creation_date":1633760984,"answer_id":69504284,"question_id":66267454,"body_markdown":"&gt; Install Homebrew on your Mac Machine\r\n\r\n    /bin/bash -c &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)&quot;\r\n\r\n&gt; \r\n&gt; For the system Java wrappers to find this JDK, symlink it with\r\n\r\n    \r\n\r\n    sudo ln -sfn /usr/local/opt/openjdk/libexec/openjdk.jdk /Library/Java/JavaVirtualMachines/openjdk.jdk\r\n\r\n    \r\n&gt; If you need to have openjdk first in your PATH, run:\r\n\r\n \r\n    echo &#39;export PATH=&quot;/usr/local/opt/openjdk/bin:$PATH&quot;&#39; &gt;&gt; ~/.profile\r\n\r\n&gt; For compilers to find openjdk you may need to set:\r\n\r\n \r\n\r\n     export CPPFLAGS=&quot;-I/usr/local/opt/openjdk/include&quot;\r\n\r\n\r\n","title":"JDK is installed on mac but i&#39;m getting &quot;The operation couldn’t be completed. Unable to locate a Java Runtime that supports apt.&quot; sudo apt update","body":"<blockquote>\n<p>Install Homebrew on your Mac Machine</p>\n</blockquote>\n<pre><code>/bin/bash -c &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)&quot;\n</code></pre>\n<blockquote>\n<p>For the system Java wrappers to find this JDK, symlink it with</p>\n</blockquote>\n<pre><code>sudo ln -sfn /usr/local/opt/openjdk/libexec/openjdk.jdk /Library/Java/JavaVirtualMachines/openjdk.jdk\n</code></pre>\n<blockquote>\n<p>If you need to have openjdk first in your PATH, run:</p>\n</blockquote>\n<pre><code>echo 'export PATH=&quot;/usr/local/opt/openjdk/bin:$PATH&quot;' &gt;&gt; ~/.profile\n</code></pre>\n<blockquote>\n<p>For compilers to find openjdk you may need to set:</p>\n</blockquote>\n<pre><code> export CPPFLAGS=&quot;-I/usr/local/opt/openjdk/include&quot;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6555535,"reputation":1356,"user_id":5068349,"display_name":"Bharat Lalwani"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1656412680,"creation_date":1656412680,"answer_id":72784946,"question_id":66267454,"body_markdown":"The below commands worked for me.\r\n\r\nFirst, install the homebrew\r\n\r\n**`/bin/bash -c &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)&quot;   `**\r\n\r\nThen set the Android Studio Java path to the Home(If you have Android Studio). If not then you take the respective Java path &amp; export it to the JAVA Home path.\r\n\r\n**`export JAVA_HOME=/Applications/Android\\ Studio.app/Contents/jre/Contents/Home`**","title":"JDK is installed on mac but i&#39;m getting &quot;The operation couldn’t be completed. Unable to locate a Java Runtime that supports apt.&quot; sudo apt update","body":"<p>The below commands worked for me.</p>\n<p>First, install the homebrew</p>\n<p><strong><code>/bin/bash -c &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)&quot;   </code></strong></p>\n<p>Then set the Android Studio Java path to the Home(If you have Android Studio). If not then you take the respective Java path &amp; export it to the JAVA Home path.</p>\n<p><strong><code>export JAVA_HOME=/Applications/Android\\ Studio.app/Contents/jre/Contents/Home</code></strong></p>\n"},{"tags":[],"owner":{"account_id":13849998,"reputation":111,"user_id":9998155,"display_name":"zhxh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683276657,"creation_date":1683276657,"answer_id":76180419,"question_id":66267454,"body_markdown":"Use brew instead of sudo apt, if you&#39;re using Mac.","title":"JDK is installed on mac but i&#39;m getting &quot;The operation couldn’t be completed. Unable to locate a Java Runtime that supports apt.&quot; sudo apt update","body":"<p>Use brew instead of sudo apt, if you're using Mac.</p>\n"}],"owner":{"account_id":10548144,"reputation":690,"user_id":9781768,"display_name":"User9123"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":91093,"favorite_count":0,"down_vote_count":0,"up_vote_count":27,"accepted_answer_id":66267603,"answer_count":4,"score":27,"last_activity_date":1683276657,"creation_date":1613678948,"question_id":66267454,"body_markdown":"I&#39;m trying to run the command `sudo apt update` on my terminal in MacOS\r\n\r\nI&#39;m getting this message in response: `The operation couldn’t be completed. Unable to locate a Java Runtime that supports apt.\r\nPlease visit http://www.java.com for information on installing Java.`\r\n\r\nI saw a similar question [here][1], however even though I made sure to install the JDK like the solution suggested I&#39;m still getting the same response.\r\n\r\nI also tried pasting \r\n\r\n    export PATH=&quot;$HOME/.jenv/bin:$PATH&quot;\r\n    eval &quot;$(jenv init -)&quot;\r\n    export JAVA_HOME=&quot;$HOME/.jenv/versions/`jenv version-name`&quot;\r\n\r\nInto my .zshrc.save folder and had no luck. \r\n\r\nWhen I run `java -version` in the terminal this is what I get back:\r\n\r\n    java version &quot;15.0.2&quot; 2021-01-19\r\n    Java(TM) SE Runtime Environment (build 15.0.2+7-27)\r\n    Java HotSpot(TM) 64-Bit Server VM (build 15.0.2+7-27, mixed mode, sharing)\r\n\r\n\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/44009058/even-though-jre-8-is-installed-on-my-mac-no-java-runtime-present-requesting-t","title":"JDK is installed on mac but i&#39;m getting &quot;The operation couldn’t be completed. Unable to locate a Java Runtime that supports apt.&quot; sudo apt update","body":"<p>I'm trying to run the command <code>sudo apt update</code> on my terminal in MacOS</p>\n<p>I'm getting this message in response: <code>The operation couldn’t be completed. Unable to locate a Java Runtime that supports apt. Please visit http://www.java.com for information on installing Java.</code></p>\n<p>I saw a similar question <a href=\"https://stackoverflow.com/questions/44009058/even-though-jre-8-is-installed-on-my-mac-no-java-runtime-present-requesting-t\">here</a>, however even though I made sure to install the JDK like the solution suggested I'm still getting the same response.</p>\n<p>I also tried pasting</p>\n<pre><code>export PATH=&quot;$HOME/.jenv/bin:$PATH&quot;\neval &quot;$(jenv init -)&quot;\nexport JAVA_HOME=&quot;$HOME/.jenv/versions/`jenv version-name`&quot;\n</code></pre>\n<p>Into my .zshrc.save folder and had no luck.</p>\n<p>When I run <code>java -version</code> in the terminal this is what I get back:</p>\n<pre><code>java version &quot;15.0.2&quot; 2021-01-19\nJava(TM) SE Runtime Environment (build 15.0.2+7-27)\nJava HotSpot(TM) 64-Bit Server VM (build 15.0.2+7-27, mixed mode, sharing)\n</code></pre>\n"},{"tags":["java","android","android-room","android-room-relation"],"comments":[{"owner":{"account_id":7495697,"reputation":1501,"user_id":5696047,"display_name":"jayesh gurudayalani"},"score":0,"creation_date":1683277807,"post_id":76180374,"comment_id":134345462,"body_markdown":"Can you add stack trace ?","body":"Can you add stack trace ?"},{"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1683277905,"post_id":76180374,"comment_id":134345480,"body_markdown":"I think there is not necessarily a stack trace as the question is about `realization.getButton()` _returning_ `null` and not specifically a NPE.","body":"I think there is not necessarily a stack trace as the question is about <code>realization.getButton()</code> <i>returning</i> <code>null</code> and not specifically a NPE."},{"owner":{"account_id":3567986,"reputation":392,"user_id":2979045,"display_name":"fshdn19"},"score":0,"creation_date":1683279304,"post_id":76180374,"comment_id":134345764,"body_markdown":"Because your `Var2` table has no records, as I see, you did not insert any records into it. So your `UPDATE` query affects 0 rows. That why your button is `null`.","body":"Because your <code>Var2</code> table has no records, as I see, you did not insert any records into it. So your <code>UPDATE</code> query affects 0 rows. That why your button is <code>null</code>."}],"owner":{"account_id":27546786,"reputation":1,"user_id":21022592,"display_name":"Dmytro Bilash"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683276383,"creation_date":1683276383,"question_id":76180374,"body_markdown":"My task is to implement Kmap solver. I want to store state of the buttons in Room database but i faced with problem. The function getButton() in realization returns me null instead of my data \r\n\r\n```\r\n@ColumnInfo(name = &quot;buttons&quot;)\r\n```\r\n\r\n.\r\nI create the row with 0001. I will devide it as a text for each button. btn0 -\\&gt; 0, btn1 -\\&gt;0, btn2... btn3-\\&gt;1 end so on. When i will click on the button i will update the row in db.\r\n\r\nMy dao file is\r\n\r\n```\r\nimport androidx.room.Query;\r\n\r\n\r\n@androidx.room.Dao\r\npublic interface Dao {\r\n\r\n    @Query(&quot;SELECT * FROM Var2&quot;)\r\n    Var2 getButtons();\r\n\r\n    @Query(&quot;Update Var2 SET buttons = :buttons&quot;)\r\n    void setButtons(String buttons);\r\n}\r\n```\r\n\r\nMy Database\r\n\r\n```\r\n@Database(entities = {Var2.class}, version = 2)\r\npublic abstract class KmapDatabase extends RoomDatabase {\r\n    private static KmapDatabase INSTANCE;\r\n    private static final String DB_NAME = &quot;Kmap&quot;;\r\n\r\n    public abstract Dao table2Dao();\r\n\r\n    public static synchronized KmapDatabase getDatabase(Context context) {\r\n        if (INSTANCE == null) {\r\n            INSTANCE = Room.databaseBuilder(context.getApplicationContext(),\r\n                    KmapDatabase.class, DB_NAME)\r\n                    .fallbackToDestructiveMigration()\r\n                    .allowMainThreadQueries()\r\n                    .build();\r\n        }\r\n        return INSTANCE;\r\n    }\r\n}\r\n```\r\n\r\nRealisation is \r\n```\r\n\r\npublic class Realization implements Repository{\r\n    private Dao dao;\r\n\r\n    public Realization(Dao dao) {\r\n        this.dao = dao;\r\n    }\r\n    \r\n    @Override\r\n    public String getButton() {\r\n        return dao.getButtons().getButtons();\r\n    }\r\n    \r\n    @Override\r\n    public void setButton(String buttons, Runnable onSuccess) {\r\n        dao.setButtons(buttons);\r\n        onSuccess.run();\r\n    }\r\n\r\n}\r\n```\r\nRepository \r\n```\r\npublic interface Repository {\r\n    String getButton();\r\n    void setButton(String buttons, Runnable onSuccess);\r\n}\r\n```\r\n\r\nVar2 (entity)\r\n```\r\n\r\n@Entity(tableName = &quot;Var2&quot;)\r\npublic class Var2 {\r\n\r\n    @PrimaryKey(autoGenerate = true)\r\n    private int id;\r\n    \r\n    @ColumnInfo(name = &quot;buttons&quot;)\r\n    private String buttons = &quot;0001&quot;;\r\n    \r\n    public int getId() {\r\n        return id;\r\n    }\r\n    \r\n    public void setId(int id) {\r\n        this.id = id;\r\n    }\r\n    \r\n    public String getButtons() {\r\n        return buttons;\r\n    }\r\n    \r\n    public void setButtons(String buttons) {\r\n        this.buttons = buttons;\r\n    }\r\n\r\n}\r\n\r\n```\r\nMy activity \r\n```\r\n\r\npublic class Map2x2 extends AppCompatActivity implements View.OnClickListener {\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_map2x2);\r\n        KmapDatabase db = KmapDatabase.getDatabase(getApplicationContext());\r\n        Dao dao = db.table2Dao();\r\n        Realization realization = new Realization(dao);\r\n        realization.setButton(&quot;1111&quot;, () -&gt; {\r\n            runOnUiThread(() -&gt; {\r\n                Toast.makeText(this, &quot;Button value saved&quot;, Toast.LENGTH_SHORT).show();\r\n            });\r\n        });\r\n        String value = realization.getButton();//THIS IS NULL\r\n        Log.v(&quot;1&quot;, value);\r\n    }\r\n\r\n```\r\n\r\nI change a lot of variations but nothing works.\r\n","title":"Room getter returning null","body":"<p>My task is to implement Kmap solver. I want to store state of the buttons in Room database but i faced with problem. The function getButton() in realization returns me null instead of my data</p>\n<pre><code>@ColumnInfo(name = &quot;buttons&quot;)\n</code></pre>\n<p>.\nI create the row with 0001. I will devide it as a text for each button. btn0 -&gt; 0, btn1 -&gt;0, btn2... btn3-&gt;1 end so on. When i will click on the button i will update the row in db.</p>\n<p>My dao file is</p>\n<pre><code>import androidx.room.Query;\n\n\n@androidx.room.Dao\npublic interface Dao {\n\n    @Query(&quot;SELECT * FROM Var2&quot;)\n    Var2 getButtons();\n\n    @Query(&quot;Update Var2 SET buttons = :buttons&quot;)\n    void setButtons(String buttons);\n}\n</code></pre>\n<p>My Database</p>\n<pre><code>@Database(entities = {Var2.class}, version = 2)\npublic abstract class KmapDatabase extends RoomDatabase {\n    private static KmapDatabase INSTANCE;\n    private static final String DB_NAME = &quot;Kmap&quot;;\n\n    public abstract Dao table2Dao();\n\n    public static synchronized KmapDatabase getDatabase(Context context) {\n        if (INSTANCE == null) {\n            INSTANCE = Room.databaseBuilder(context.getApplicationContext(),\n                    KmapDatabase.class, DB_NAME)\n                    .fallbackToDestructiveMigration()\n                    .allowMainThreadQueries()\n                    .build();\n        }\n        return INSTANCE;\n    }\n}\n</code></pre>\n<p>Realisation is</p>\n<pre><code>\npublic class Realization implements Repository{\n    private Dao dao;\n\n    public Realization(Dao dao) {\n        this.dao = dao;\n    }\n    \n    @Override\n    public String getButton() {\n        return dao.getButtons().getButtons();\n    }\n    \n    @Override\n    public void setButton(String buttons, Runnable onSuccess) {\n        dao.setButtons(buttons);\n        onSuccess.run();\n    }\n\n}\n</code></pre>\n<p>Repository</p>\n<pre><code>public interface Repository {\n    String getButton();\n    void setButton(String buttons, Runnable onSuccess);\n}\n</code></pre>\n<p>Var2 (entity)</p>\n<pre><code>\n@Entity(tableName = &quot;Var2&quot;)\npublic class Var2 {\n\n    @PrimaryKey(autoGenerate = true)\n    private int id;\n    \n    @ColumnInfo(name = &quot;buttons&quot;)\n    private String buttons = &quot;0001&quot;;\n    \n    public int getId() {\n        return id;\n    }\n    \n    public void setId(int id) {\n        this.id = id;\n    }\n    \n    public String getButtons() {\n        return buttons;\n    }\n    \n    public void setButtons(String buttons) {\n        this.buttons = buttons;\n    }\n\n}\n\n</code></pre>\n<p>My activity</p>\n<pre><code>\npublic class Map2x2 extends AppCompatActivity implements View.OnClickListener {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_map2x2);\n        KmapDatabase db = KmapDatabase.getDatabase(getApplicationContext());\n        Dao dao = db.table2Dao();\n        Realization realization = new Realization(dao);\n        realization.setButton(&quot;1111&quot;, () -&gt; {\n            runOnUiThread(() -&gt; {\n                Toast.makeText(this, &quot;Button value saved&quot;, Toast.LENGTH_SHORT).show();\n            });\n        });\n        String value = realization.getButton();//THIS IS NULL\n        Log.v(&quot;1&quot;, value);\n    }\n\n</code></pre>\n<p>I change a lot of variations but nothing works.</p>\n"},{"tags":["java","android","kotlin","openssl","inputstream"],"comments":[{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":0,"creation_date":1683305235,"post_id":76179836,"comment_id":134351822,"body_markdown":"The external storage directory `/sdcard` alias `/storage/emulated/0` is AFAIK mounted with no-execute restriction. So saving openssl binary there and trying to execute will not work. The app-private dir should also be restricted because the write xor execute restriction. So you could test `/data/local` or `/data/local/tmp`.","body":"The external storage directory <code>&#47;sdcard</code> alias <code>&#47;storage&#47;emulated&#47;0</code> is AFAIK mounted with no-execute restriction. So saving openssl binary there and trying to execute will not work. The app-private dir should also be restricted because the write xor execute restriction. So you could test <code>&#47;data&#47;local</code> or <code>&#47;data&#47;local&#47;tmp</code>."},{"owner":{"account_id":2168732,"reputation":6884,"user_id":1921263,"accept_rate":61,"display_name":"Shadow"},"score":0,"creation_date":1683604430,"post_id":76179836,"comment_id":134388143,"body_markdown":"Still I am getting the same error, even after trying this path.","body":"Still I am getting the same error, even after trying this path."}],"owner":{"account_id":2168732,"reputation":6884,"user_id":1921263,"accept_rate":61,"display_name":"Shadow"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":114,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683276325,"creation_date":1683272286,"question_id":76179836,"body_markdown":"I need to run a OpenSSL command programatically in android, but it throws the following error:\r\n\r\n&quot;Cannot run program &quot;openssl&quot;: error=2, No such file or directory&quot;\r\n\r\nHere&#39;s my code:\r\n\r\n \r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n    \r\n        @SuppressLint(&quot;MissingInflatedId&quot;)\r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n    \r\n       executeSH(&quot;openssl ecparam -name prime256v1 -genkey -noout -out prime-private-key.pem&quot;,true);\r\n    \r\n    }\r\n      private String executeSH(String command, boolean waitFor) throws IOException, InterruptedException {\r\n            Process process = null;\r\n            InputStream inputStream = null;\r\n            InputStreamReader inputStreamReader = null;\r\n            BufferedReader bufferedReader = null;\r\n            String line, output = &quot;&quot;;\r\n            try {\r\n                Runtime runtime = Runtime.getRuntime();\r\n                process = runtime.exec(command);\r\n                inputStream = process.getInputStream();\r\n                inputStreamReader = new InputStreamReader(inputStream);\r\n                bufferedReader = new BufferedReader(inputStreamReader);\r\n    \r\n                while ((line = bufferedReader.readLine()) != null) {\r\n                    output += line;\r\n                    File path = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOCUMENTS);\r\n                    File newDir = new File(path + &quot;/&quot; + &quot;a.txt&quot;);\r\n                    if (!newDir.exists()) {\r\n                        newDir.mkdir();\r\n                    }\r\n                    FileOutputStream writer = new FileOutputStream(new File(path, &quot;a.txt&quot;));\r\n                    writer.write(output.getBytes());\r\n                    writer.close();\r\n                    Log.e(&quot;TAG&quot;, &quot;Wrote to file: &quot; + &quot;a.txt&quot;);\r\n                }\r\n                    if (waitFor) {\r\n                        process.waitFor();\r\n                    }\r\n                    return output;\r\n                }\r\n            finally {\r\n                if (bufferedReader != null) bufferedReader.close();\r\n                if (inputStreamReader != null) inputStreamReader.close();\r\n                if (inputStream != null) inputStream.close();\r\n                if (process != null) process.destroy();\r\n            }\r\n        }\r\n\r\nMaybe someone can help me solve this question.\r\n","title":"How to execute OpenSSL command in android?","body":"<p>I need to run a OpenSSL command programatically in android, but it throws the following error:</p>\n<p>&quot;Cannot run program &quot;openssl&quot;: error=2, No such file or directory&quot;</p>\n<p>Here's my code:</p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n\n    @SuppressLint(&quot;MissingInflatedId&quot;)\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n   executeSH(&quot;openssl ecparam -name prime256v1 -genkey -noout -out prime-private-key.pem&quot;,true);\n\n}\n  private String executeSH(String command, boolean waitFor) throws IOException, InterruptedException {\n        Process process = null;\n        InputStream inputStream = null;\n        InputStreamReader inputStreamReader = null;\n        BufferedReader bufferedReader = null;\n        String line, output = &quot;&quot;;\n        try {\n            Runtime runtime = Runtime.getRuntime();\n            process = runtime.exec(command);\n            inputStream = process.getInputStream();\n            inputStreamReader = new InputStreamReader(inputStream);\n            bufferedReader = new BufferedReader(inputStreamReader);\n\n            while ((line = bufferedReader.readLine()) != null) {\n                output += line;\n                File path = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOCUMENTS);\n                File newDir = new File(path + &quot;/&quot; + &quot;a.txt&quot;);\n                if (!newDir.exists()) {\n                    newDir.mkdir();\n                }\n                FileOutputStream writer = new FileOutputStream(new File(path, &quot;a.txt&quot;));\n                writer.write(output.getBytes());\n                writer.close();\n                Log.e(&quot;TAG&quot;, &quot;Wrote to file: &quot; + &quot;a.txt&quot;);\n            }\n                if (waitFor) {\n                    process.waitFor();\n                }\n                return output;\n            }\n        finally {\n            if (bufferedReader != null) bufferedReader.close();\n            if (inputStreamReader != null) inputStreamReader.close();\n            if (inputStream != null) inputStream.close();\n            if (process != null) process.destroy();\n        }\n    }\n</code></pre>\n<p>Maybe someone can help me solve this question.</p>\n"},{"tags":["java","eclipse","data-structures","binary-tree"],"comments":[{"owner":{"account_id":306540,"reputation":1801,"user_id":2695990,"display_name":"fascynacja"},"score":3,"creation_date":1683267791,"post_id":76179307,"comment_id":134343506,"body_markdown":"what is the error you are getting? could you paste the whole stacktrace?","body":"what is the error you are getting? could you paste the whole stacktrace?"},{"owner":{"account_id":11180480,"reputation":7021,"user_id":8207228,"display_name":"Ralf Kleberhoff"},"score":2,"creation_date":1683269549,"post_id":76179307,"comment_id":134343803,"body_markdown":"In your edit, you changed the source code (from `package binaryTree;` to `package binary tree;`. But `package binary tree;` is a syntax error, spaces in package names are not allowed. So, which version is the source code you are really using? Please, be exact with your questions, as machines also don&#39;t tolerate even &quot;minor&quot; deviations.","body":"In your edit, you changed the source code (from <code>package binaryTree;</code> to <code>package binary tree;</code>. But <code>package binary tree;</code> is a syntax error, spaces in package names are not allowed. So, which version is the source code you are really using? Please, be exact with your questions, as machines also don&#39;t tolerate even &quot;minor&quot; deviations."}],"answers":[{"comments":[{"owner":{"account_id":26216291,"reputation":3,"user_id":19894385,"display_name":"newton"},"score":1,"creation_date":1683278277,"post_id":76180287,"comment_id":134345564,"body_markdown":"Thank you very much for your patience and explanation","body":"Thank you very much for your patience and explanation"}],"tags":[],"owner":{"account_id":7142980,"reputation":323263,"user_id":5459839,"display_name":"trincot"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1683275640,"creation_date":1683275640,"answer_id":76180287,"question_id":76179307,"body_markdown":"Besides the syntax error in `package binary tree` (it should be a single name, not two), you have a mix up of static and instance members. First your `run` function will populate the *static* `root` member. But then you create an *instance* with `new BinarySearchTree` and its constructor **clears** the static `root` variable! So now you have lost your input.\r\n\r\nCorrections to make:\r\n\r\n* `root` should be an *instance* variable\r\n* `insert` should be an *instance* method\r\n* The `bst` instance should be created *before* calling `insert`, and those `insert` calls should be on that instance. For this reason it may be more appropriate to not have a `run` function, but move that code into `main`.\r\n\r\nCorrected class:\r\n\r\n```\r\npublic class BinarySearchTree {\r\n\r\n    private Node root; // Remove static. Should be member of instance\r\n\r\n    BinarySearchTree() {\r\n        root = null;\r\n    }\r\n\r\n    static class Node {\r\n        int value;\r\n        Node left;\r\n        Node right;\r\n\r\n        public Node(int value) {\r\n            this.value = value;\r\n        }\r\n\r\n        public void display() {\r\n            System.out.print(value + &quot; &quot;);\r\n        }\r\n    }\r\n\r\n    public void insert(int value) { // Remove static. Is instance method\r\n        root = insert(root, value);\r\n    }\r\n\r\n    public Node insert(Node node, int value) { // Remove static. Should be instance method\r\n        if (node == null) {\r\n            node = new Node(value);\r\n        } else if (value &lt; node.value) {\r\n            node.left = insert(node.left, value);\r\n        } else if (value &gt; node.value) {\r\n            node.right = insert(node.right, value);\r\n        }\r\n        return node;\r\n    }\r\n\r\n    public void inOrder(Node node) {\r\n        if (node != null) {\r\n            inOrder(node.left);\r\n            node.display();\r\n            inOrder(node.right);\r\n        }\r\n    }\r\n\r\n    public void inOrder() { // Overload so you don&#39;t have to pass obvious argument\r\n        inOrder(root); // Provide root of the instance\r\n    }\r\n\r\n    public static void main(String args[]) {\r\n        BinarySearchTree bst = new BinarySearchTree(); // First create the BST instance\r\n        // Then get the input\r\n        System.out.println(&quot;Enter number of nodes: &quot;);\r\n        Scanner scan = new Scanner(System.in);\r\n        int nodeSize = scan.nextInt();\r\n        int nodeValue;\r\n        System.out.println(&quot;Enter Node Values: &quot;);\r\n        for (int i = 0; i &lt; nodeSize; i++) {\r\n            nodeValue = scan.nextInt();\r\n            bst.insert(nodeValue); // Insert in the BST instance\r\n        }\r\n        scan.close();\r\n        bst.inOrder(); // Call overloaded method\r\n    }\r\n\r\n}\r\n```","title":"Java Binary tree code throws error but I couldn&#39;t find what is the error","body":"<p>Besides the syntax error in <code>package binary tree</code> (it should be a single name, not two), you have a mix up of static and instance members. First your <code>run</code> function will populate the <em>static</em> <code>root</code> member. But then you create an <em>instance</em> with <code>new BinarySearchTree</code> and its constructor <strong>clears</strong> the static <code>root</code> variable! So now you have lost your input.</p>\n<p>Corrections to make:</p>\n<ul>\n<li><code>root</code> should be an <em>instance</em> variable</li>\n<li><code>insert</code> should be an <em>instance</em> method</li>\n<li>The <code>bst</code> instance should be created <em>before</em> calling <code>insert</code>, and those <code>insert</code> calls should be on that instance. For this reason it may be more appropriate to not have a <code>run</code> function, but move that code into <code>main</code>.</li>\n</ul>\n<p>Corrected class:</p>\n<pre><code>public class BinarySearchTree {\n\n    private Node root; // Remove static. Should be member of instance\n\n    BinarySearchTree() {\n        root = null;\n    }\n\n    static class Node {\n        int value;\n        Node left;\n        Node right;\n\n        public Node(int value) {\n            this.value = value;\n        }\n\n        public void display() {\n            System.out.print(value + &quot; &quot;);\n        }\n    }\n\n    public void insert(int value) { // Remove static. Is instance method\n        root = insert(root, value);\n    }\n\n    public Node insert(Node node, int value) { // Remove static. Should be instance method\n        if (node == null) {\n            node = new Node(value);\n        } else if (value &lt; node.value) {\n            node.left = insert(node.left, value);\n        } else if (value &gt; node.value) {\n            node.right = insert(node.right, value);\n        }\n        return node;\n    }\n\n    public void inOrder(Node node) {\n        if (node != null) {\n            inOrder(node.left);\n            node.display();\n            inOrder(node.right);\n        }\n    }\n\n    public void inOrder() { // Overload so you don't have to pass obvious argument\n        inOrder(root); // Provide root of the instance\n    }\n\n    public static void main(String args[]) {\n        BinarySearchTree bst = new BinarySearchTree(); // First create the BST instance\n        // Then get the input\n        System.out.println(&quot;Enter number of nodes: &quot;);\n        Scanner scan = new Scanner(System.in);\n        int nodeSize = scan.nextInt();\n        int nodeValue;\n        System.out.println(&quot;Enter Node Values: &quot;);\n        for (int i = 0; i &lt; nodeSize; i++) {\n            nodeValue = scan.nextInt();\n            bst.insert(nodeValue); // Insert in the BST instance\n        }\n        scan.close();\n        bst.inOrder(); // Call overloaded method\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":26216291,"reputation":3,"user_id":19894385,"display_name":"newton"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":76,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":76180287,"answer_count":1,"score":-1,"last_activity_date":1683275640,"creation_date":1683267647,"question_id":76179307,"body_markdown":"I&#39;m a beginner in Java and data structures and I&#39;ve been trying to implement a binary search tree. I have written a code but it throws some error and I can&#39;t find it\r\nI know this is a blatant question but I really need help with this so I can continue my learning process\r\n\r\n```\r\npackage binary tree;\r\nimport java.util.Scanner;\r\n\r\npublic class BinarySearchTree {\r\n\r\n    private static Node root;\r\n\r\n    BinarySearchTree() {\r\n        root = null;\r\n    }\r\n\r\n    static class Node {\r\n        int value;\r\n        Node left;\r\n        Node right;\r\n\r\n        public Node(int value) {\r\n            this.value = value;\r\n        }\r\n\r\n        public void display() {\r\n            System.out.print(value + &quot; &quot;);\r\n        }\r\n    }\r\n\r\n    public static void insert(int value) {\r\n        root = insert(root, value);\r\n    }\r\n\r\n    public static Node insert(Node node, int value) {\r\n        if (node == null) {\r\n            node = new Node(value);\r\n        } else if (value &lt; node.value) {\r\n            node.left = insert(node.left, value);\r\n        } else if (value &gt; node.value) {\r\n            node.right = insert(node.right, value);\r\n        }\r\n        return node;\r\n    }\r\n\r\n    public static void run() {\r\n        Scanner scan = new Scanner(System.in);\r\n        int nodeSize = scan.nextInt();\r\n        int nodeValue;\r\n        System.out.println(&quot;Enter Node Values:&quot;);\r\n        for (int i = 0; i &lt; nodeSize; i++) {\r\n            nodeValue = scan.nextInt();\r\n            insert(nodeValue);\r\n        }\r\n        scan.close();\r\n    }\r\n\r\n    public void inOrder(Node node) {\r\n        if (node != null) {\r\n            inOrder(node.left);\r\n            node.display();\r\n            inOrder(node.right);\r\n        }\r\n    }\r\n\r\n    public static void main(String args[]) {\r\n        run();\r\n        BinarySearchTree bst = new BinarySearchTree();\r\n        bst.inOrder(root);\r\n    }\r\n\r\n}\r\n```\r\n\r\nI tried to create a node as a binary tree and getting input from the user and display it in inOrder traversal but the code gets only the size of the node and input but does not print any output","title":"Java Binary tree code throws error but I couldn&#39;t find what is the error","body":"<p>I'm a beginner in Java and data structures and I've been trying to implement a binary search tree. I have written a code but it throws some error and I can't find it\nI know this is a blatant question but I really need help with this so I can continue my learning process</p>\n<pre><code>package binary tree;\nimport java.util.Scanner;\n\npublic class BinarySearchTree {\n\n    private static Node root;\n\n    BinarySearchTree() {\n        root = null;\n    }\n\n    static class Node {\n        int value;\n        Node left;\n        Node right;\n\n        public Node(int value) {\n            this.value = value;\n        }\n\n        public void display() {\n            System.out.print(value + &quot; &quot;);\n        }\n    }\n\n    public static void insert(int value) {\n        root = insert(root, value);\n    }\n\n    public static Node insert(Node node, int value) {\n        if (node == null) {\n            node = new Node(value);\n        } else if (value &lt; node.value) {\n            node.left = insert(node.left, value);\n        } else if (value &gt; node.value) {\n            node.right = insert(node.right, value);\n        }\n        return node;\n    }\n\n    public static void run() {\n        Scanner scan = new Scanner(System.in);\n        int nodeSize = scan.nextInt();\n        int nodeValue;\n        System.out.println(&quot;Enter Node Values:&quot;);\n        for (int i = 0; i &lt; nodeSize; i++) {\n            nodeValue = scan.nextInt();\n            insert(nodeValue);\n        }\n        scan.close();\n    }\n\n    public void inOrder(Node node) {\n        if (node != null) {\n            inOrder(node.left);\n            node.display();\n            inOrder(node.right);\n        }\n    }\n\n    public static void main(String args[]) {\n        run();\n        BinarySearchTree bst = new BinarySearchTree();\n        bst.inOrder(root);\n    }\n\n}\n</code></pre>\n<p>I tried to create a node as a binary tree and getting input from the user and display it in inOrder traversal but the code gets only the size of the node and input but does not print any output</p>\n"},{"tags":["java","servlets"],"owner":{"account_id":28514100,"reputation":1,"user_id":21823677,"display_name":"Fred29"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683275388,"creation_date":1683275388,"question_id":76180249,"body_markdown":"I am working on a project migration from old java web project :\r\n- java 1.5 to 1.8\r\n- tomcat 5 to tomcat 7\r\n- eclipse 3 to 2021-09\r\nThe project is pretty simple (no maven, servlet-api.jar, jsp-api.jar).\r\nThe project is starting but when I&#39;m calling a page I have a validation error : \r\n\r\n```\r\nGRAVE: PUBLIC ID invalide: http://java.sun.com/xml/ns/javaee\r\nmai 05, 2023 10:11:47 AM org.apache.catalina.core.ApplicationDispatcher invoke\r\nGRAVE: &quot;Servlet.service()&quot; pour la servlet jsp a lanc&#233; une exception\r\norg.xml.sax.SAXException: schema error: error reading schema document: http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd.\r\n\tat org.apache.xerces.parsers.DOMParser.parse(DOMParser.java:218)\r\n\tat org.apache.xerces.jaxp.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:224)\r\n\tat org.apache.jasper.xmlparser.ParserUtils.parseXMLDocument(ParserUtils.java:96)\r\n\tat org.apache.jasper.compiler.JspConfig.processWebDotXml(JspConfig.java:83)\r\n\tat org.apache.jasper.compiler.JspConfig.init(JspConfig.java:231)\r\n\tat org.apache.jasper.compiler.JspConfig.findJspProperty(JspConfig.java:290)\r\n\tat org.apache.jasper.compiler.Compiler.generateJava(Compiler.java:114)\r\n\tat org.apache.jasper.compiler.Compiler.compile(Compiler.java:373)\r\n\tat org.apache.jasper.compiler.Compiler.compile(Compiler.java:353)\r\n\tat org.apache.jasper.compiler.Compiler.compile(Compiler.java:340)\r\n\tat org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:646)\r\n\tat org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:357)\r\n\tat org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)\r\n\tat org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:728)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\r\n\tat org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:749)\r\n\tat org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:487)\r\n\tat org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:412)\r\n\tat org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:339)\r\n\tat com.casino.pdc.servlet.Demarrage.jspAppeler(Demarrage.java:64)\r\n\tat com.casino.pdc.servlet.Demarrage.tacheTraiter(Demarrage.java:83)\r\n\tat com.casino.fwk.tools.HttpServletGenerique.doPost(HttpServletGenerique.java:245)\r\n\tat com.casino.fwk.tools.HttpServletGenerique.doGet(HttpServletGenerique.java:141)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:621)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:728)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)\r\n\tat org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:953)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:408)\r\n\tat org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1041)\r\n\tat org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:603)\r\n\tat org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n```\r\n\r\nI can&#39;t figure out why the validation is based on web-app_3_0.xsd but in my web.xml, I put : \r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;web-app xmlns=&quot;http://java.sun.com/xml/ns/j2ee&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; id=&quot;WebApp&quot; version=&quot;2.4&quot; xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd&quot;&gt;\r\n```\r\n\r\nAny suggestions?\r\n\r\nThank you in advance.\r\n\r\nI tried to change the web.xml web-app tag and put &quot;http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd&quot; as schema but it changed nothing.","title":"SAXParseException, failed to read schema document web-app_3_0.xsd","body":"<p>I am working on a project migration from old java web project :</p>\n<ul>\n<li>java 1.5 to 1.8</li>\n<li>tomcat 5 to tomcat 7</li>\n<li>eclipse 3 to 2021-09\nThe project is pretty simple (no maven, servlet-api.jar, jsp-api.jar).\nThe project is starting but when I'm calling a page I have a validation error :</li>\n</ul>\n<pre><code>GRAVE: PUBLIC ID invalide: http://java.sun.com/xml/ns/javaee\nmai 05, 2023 10:11:47 AM org.apache.catalina.core.ApplicationDispatcher invoke\nGRAVE: &quot;Servlet.service()&quot; pour la servlet jsp a lancé une exception\norg.xml.sax.SAXException: schema error: error reading schema document: http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd.\n    at org.apache.xerces.parsers.DOMParser.parse(DOMParser.java:218)\n    at org.apache.xerces.jaxp.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:224)\n    at org.apache.jasper.xmlparser.ParserUtils.parseXMLDocument(ParserUtils.java:96)\n    at org.apache.jasper.compiler.JspConfig.processWebDotXml(JspConfig.java:83)\n    at org.apache.jasper.compiler.JspConfig.init(JspConfig.java:231)\n    at org.apache.jasper.compiler.JspConfig.findJspProperty(JspConfig.java:290)\n    at org.apache.jasper.compiler.Compiler.generateJava(Compiler.java:114)\n    at org.apache.jasper.compiler.Compiler.compile(Compiler.java:373)\n    at org.apache.jasper.compiler.Compiler.compile(Compiler.java:353)\n    at org.apache.jasper.compiler.Compiler.compile(Compiler.java:340)\n    at org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:646)\n    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:357)\n    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)\n    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\n    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:749)\n    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:487)\n    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:412)\n    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:339)\n    at com.casino.pdc.servlet.Demarrage.jspAppeler(Demarrage.java:64)\n    at com.casino.pdc.servlet.Demarrage.tacheTraiter(Demarrage.java:83)\n    at com.casino.fwk.tools.HttpServletGenerique.doPost(HttpServletGenerique.java:245)\n    at com.casino.fwk.tools.HttpServletGenerique.doGet(HttpServletGenerique.java:141)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)\n    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:953)\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:408)\n    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1041)\n    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:603)\n    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n    at java.lang.Thread.run(Thread.java:748)\n</code></pre>\n<p>I can't figure out why the validation is based on web-app_3_0.xsd but in my web.xml, I put :</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;web-app xmlns=&quot;http://java.sun.com/xml/ns/j2ee&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; id=&quot;WebApp&quot; version=&quot;2.4&quot; xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd&quot;&gt;\n</code></pre>\n<p>Any suggestions?</p>\n<p>Thank you in advance.</p>\n<p>I tried to change the web.xml web-app tag and put &quot;http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd&quot; as schema but it changed nothing.</p>\n"},{"tags":["java","resilience4j","mdc","forkjoinpool","bulkhead"],"owner":{"account_id":12875245,"reputation":547,"user_id":9312181,"display_name":"tusharRawat"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":217,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683274561,"creation_date":1683019443,"question_id":76153486,"body_markdown":"Using the below property, I was able to propogate the ThreadContext to bulkhead pool.\r\n\r\n    resilience4j.thread-pool-bulkhead.instances.service.context-propagators[0]=com.config.MDCContextPropogater\r\n\r\nBut it seems that the fallback is executing on a different thread pool named: `[pool-4-thread-1]` and MDC or [TraceId,SpanId] is not propogating to it. \r\n\r\nIs there a way to resolve this ?\r\n   \r\n\r\n     @Override\r\n        @Bulkhead(name = service, type = Type.THREADPOOL, fallbackMethod = fallbackService)\r\n        @TimeLimiter(name = service, fallbackMethod = fallbackService)\r\n        @CircuitBreaker(name = service, fallbackMethod = fallbackService)\r\n        public CompletableFuture&lt;String&gt; service(String request) {\r\n            return CompletableFuture.completedFuture(process(request));\r\n        }\r\n    \r\n        private String process(String request) {\r\n    \r\n            // [bulkhead-service-1] - thread pool - traceId, SpanId is present here\r\n        }\r\n    \r\n        public CompletableFuture&lt;String&gt; fallbackService(String request, Exception e) {\r\n        \r\n            // [pool-4-thread-1] - thread pool - traceId, SpanId is not present here, as MDC context is not getting loaded here\r\n    \r\n           \r\n        }\r\n\r\nIs the fallback pool a fork-join-common-pool used by reslience 4j? If yes how to propogate MDC to it&#39;s threads.","title":"How to propogate the ThreadContext or MDC traceId and spanId to the fallback thread pool in reselience4j","body":"<p>Using the below property, I was able to propogate the ThreadContext to bulkhead pool.</p>\n<pre><code>resilience4j.thread-pool-bulkhead.instances.service.context-propagators[0]=com.config.MDCContextPropogater\n</code></pre>\n<p>But it seems that the fallback is executing on a different thread pool named: <code>[pool-4-thread-1]</code> and MDC or [TraceId,SpanId] is not propogating to it.</p>\n<p>Is there a way to resolve this ?</p>\n<pre><code> @Override\n    @Bulkhead(name = service, type = Type.THREADPOOL, fallbackMethod = fallbackService)\n    @TimeLimiter(name = service, fallbackMethod = fallbackService)\n    @CircuitBreaker(name = service, fallbackMethod = fallbackService)\n    public CompletableFuture&lt;String&gt; service(String request) {\n        return CompletableFuture.completedFuture(process(request));\n    }\n\n    private String process(String request) {\n\n        // [bulkhead-service-1] - thread pool - traceId, SpanId is present here\n    }\n\n    public CompletableFuture&lt;String&gt; fallbackService(String request, Exception e) {\n    \n        // [pool-4-thread-1] - thread pool - traceId, SpanId is not present here, as MDC context is not getting loaded here\n\n       \n    }\n</code></pre>\n<p>Is the fallback pool a fork-join-common-pool used by reslience 4j? If yes how to propogate MDC to it's threads.</p>\n"},{"tags":["java","unit-testing","junit","mockito"],"comments":[{"owner":{"account_id":5151874,"reputation":808,"user_id":4126269,"display_name":"CarlosMorente"},"score":1,"creation_date":1430926768,"post_id":30081161,"comment_id":48276011,"body_markdown":"But does it did that always? Or has it options to make the other thing? That&#39;s what I&#39;m not sure about...","body":"But does it did that always? Or has it options to make the other thing? That&#39;s what I&#39;m not sure about..."}],"answers":[{"tags":[],"owner":{"account_id":6062120,"reputation":1059,"user_id":4733587,"display_name":"Shondeslitch"},"comment_count":0,"down_vote_count":1,"up_vote_count":13,"is_accepted":true,"score":12,"last_activity_date":1430927096,"creation_date":1430927096,"answer_id":30081553,"question_id":30081161,"body_markdown":"*Once created, mock will remember all interactions. Then you can selectively verify whatever interaction you are interested in*. \r\n\r\nIt means that your mock counts each time you call the method you want and it does not reset when you call `verify`.\r\n\r\nIf you want further information about that, read this (\r\nthis is where I have found these information):\r\n\r\nhttp://site.mockito.org/mockito/docs/current/org/mockito/Mockito.html\r\n","title":"Mockito - Does verify method reboot number of times?","body":"<p><em>Once created, mock will remember all interactions. Then you can selectively verify whatever interaction you are interested in</em>. </p>\n\n<p>It means that your mock counts each time you call the method you want and it does not reset when you call <code>verify</code>.</p>\n\n<p>If you want further information about that, read this (\nthis is where I have found these information):</p>\n\n<p><a href=\"http://site.mockito.org/mockito/docs/current/org/mockito/Mockito.html\" rel=\"noreferrer\">http://site.mockito.org/mockito/docs/current/org/mockito/Mockito.html</a></p>\n"},{"tags":[],"owner":{"account_id":4086995,"reputation":3087,"user_id":3356058,"accept_rate":96,"display_name":"Tavo"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1430927329,"creation_date":1430927329,"answer_id":30081637,"question_id":30081161,"body_markdown":"Mockito will remember, so it counts since the first interaction and will not reset.\r\n\r\nAlso, be aware that `verify(i1, times(1)).mockedmethod();` is the same as `verify(i1).mockedmethod();`.\r\n\r\nMore info about mockito [here][1]. \r\n\r\n\r\n  [1]: http://docs.mockito.googlecode.com/hg/org/mockito/Mockito.html\r\n","title":"Mockito - Does verify method reboot number of times?","body":"<p>Mockito will remember, so it counts since the first interaction and will not reset.</p>\n\n<p>Also, be aware that <code>verify(i1, times(1)).mockedmethod();</code> is the same as <code>verify(i1).mockedmethod();</code>.</p>\n\n<p>More info about mockito <a href=\"http://docs.mockito.googlecode.com/hg/org/mockito/Mockito.html\" rel=\"nofollow\">here</a>. </p>\n"},{"tags":[],"owner":{"account_id":7551375,"reputation":900,"user_id":5732661,"display_name":"OHY"},"comment_count":0,"down_vote_count":1,"up_vote_count":58,"is_accepted":false,"score":57,"last_activity_date":1683273888,"creation_date":1580711608,"answer_id":60034152,"question_id":30081161,"body_markdown":"Note that it is possible to reset the times a method was called with `Mockito.reset(mock)`\r\n\r\nUpdate: as suggested below by t7tran, using `clearInvocations(T... mocks)` will reset only the number of invocations","title":"Mockito - Does verify method reboot number of times?","body":"<p>Note that it is possible to reset the times a method was called with <code>Mockito.reset(mock)</code></p>\n<p>Update: as suggested below by t7tran, using <code>clearInvocations(T... mocks)</code> will reset only the number of invocations</p>\n"},{"comments":[{"owner":{"account_id":1535573,"reputation":7025,"user_id":1431728,"accept_rate":49,"display_name":"JohnK"},"score":2,"creation_date":1652393195,"post_id":65485556,"comment_id":127602227,"body_markdown":"Why do the linked docs for `clearInvocations` say, &quot;Try to avoid this method at all costs. Only clear invocations if you are unable to efficiently test your program&quot;? What are the (possible) side effects?","body":"Why do the linked docs for <code>clearInvocations</code> say, &quot;Try to avoid this method at all costs. Only clear invocations if you are unable to efficiently test your program&quot;? What are the (possible) side effects?"},{"owner":{"account_id":11944756,"reputation":7873,"user_id":8740349,"display_name":"Top-Master"},"score":4,"creation_date":1654113716,"post_id":65485556,"comment_id":128017165,"body_markdown":"@JohnK they are just being dramatic, and force their desired test-design-pattern upon readers (and should instead say &quot;`Each test-method shall only assert once maximum, hence don&#39;t use this anti-pattern`&quot;).","body":"@JohnK they are just being dramatic, and force their desired test-design-pattern upon readers (and should instead say &quot;<code>Each test-method shall only assert once maximum, hence don&#39;t use this anti-pattern</code>&quot;)."},{"owner":{"account_id":1464832,"reputation":186,"user_id":1378018,"display_name":"David Bradley"},"score":0,"creation_date":1675458034,"post_id":65485556,"comment_id":132940998,"body_markdown":"You could make the two calls and then call verify with times(2).. That would cover the case where one of the calls call twice and the other none. But that seems a somewhat unusual condition","body":"You could make the two calls and then call verify with times(2).. That would cover the case where one of the calls call twice and the other none. But that seems a somewhat unusual condition"}],"tags":[],"owner":{"account_id":3795925,"reputation":1959,"user_id":3151014,"display_name":"t7tran"},"comment_count":3,"down_vote_count":0,"up_vote_count":71,"is_accepted":false,"score":71,"last_activity_date":1609199488,"creation_date":1609199488,"answer_id":65485556,"question_id":30081161,"body_markdown":"Using [void reset(T... mocks)][1] will reset all stubbings on the mocks. If you just need to reset the invocation counts for subsequent verifications, use [void clearInvocations(T... mocks)][2].\r\n\r\n  [1]: https://javadoc.io/static/org.mockito/mockito-core/3.6.28/org/mockito/Mockito.html#reset-T...-\r\n  [2]: https://javadoc.io/static/org.mockito/mockito-core/3.6.28/org/mockito/Mockito.html#clearInvocations-T...-","title":"Mockito - Does verify method reboot number of times?","body":"<p>Using <a href=\"https://javadoc.io/static/org.mockito/mockito-core/3.6.28/org/mockito/Mockito.html#reset-T...-\" rel=\"noreferrer\">void reset(T... mocks)</a> will reset all stubbings on the mocks. If you just need to reset the invocation counts for subsequent verifications, use <a href=\"https://javadoc.io/static/org.mockito/mockito-core/3.6.28/org/mockito/Mockito.html#clearInvocations-T...-\" rel=\"noreferrer\">void clearInvocations(T... mocks)</a>.</p>\n"}],"owner":{"account_id":5151874,"reputation":808,"user_id":4126269,"display_name":"CarlosMorente"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44805,"favorite_count":0,"down_vote_count":0,"up_vote_count":38,"accepted_answer_id":30081553,"answer_count":4,"score":38,"last_activity_date":1683273888,"creation_date":1430926077,"question_id":30081161,"body_markdown":"If we have this code:\r\n\r\n    @Test\r\n    public void test1(){\r\n      Interface1 i1 = mock(Interface1.class)\r\n      method1(); // This method calls i1.mockedmethod()\r\n      verify(i1, times(1)).mockedmethod();\r\n      method1();\r\n      verify(i1, times(2)).mockedmethod();\r\n    }\r\n\r\nI know that it will pass the first verify, but I&#39;m in doubt with the second one. Does verify method counts all the times that the method has been called or it only counts it since the last verify?\r\n","title":"Mockito - Does verify method reboot number of times?","body":"<p>If we have this code:</p>\n\n<pre><code>@Test\npublic void test1(){\n  Interface1 i1 = mock(Interface1.class)\n  method1(); // This method calls i1.mockedmethod()\n  verify(i1, times(1)).mockedmethod();\n  method1();\n  verify(i1, times(2)).mockedmethod();\n}\n</code></pre>\n\n<p>I know that it will pass the first verify, but I'm in doubt with the second one. Does verify method counts all the times that the method has been called or it only counts it since the last verify?</p>\n"},{"tags":["java","spring","time","cron","jobs"],"comments":[{"owner":{"account_id":25267413,"reputation":11,"user_id":19097334,"display_name":"Ayshe Ayparcasi"},"score":1,"creation_date":1683206271,"post_id":76173579,"comment_id":134333354,"body_markdown":"I solved : with this site-&gt; https://cronexpressiontogo.com/every-2-months : 0 1/3 1,17 * *","body":"I solved : with this site-&gt; <a href=\"https://cronexpressiontogo.com/every-2-months\" rel=\"nofollow noreferrer\">cronexpressiontogo.com/every-2-months</a> : 0 1/3 1,17 * *"},{"owner":{"account_id":12743722,"reputation":19966,"user_id":12567365,"display_name":"andrewJames"},"score":0,"creation_date":1683206547,"post_id":76173579,"comment_id":134333424,"body_markdown":"Shouldn&#39;t `1,17` be `2,17`?","body":"Shouldn&#39;t <code>1,17</code> be <code>2,17</code>?"},{"owner":{"account_id":25267413,"reputation":11,"user_id":19097334,"display_name":"Ayshe Ayparcasi"},"score":0,"creation_date":1683206820,"post_id":76173579,"comment_id":134333509,"body_markdown":"My leader says : 0 0 1,4,7,10,13,16,19 2,17 * * ?  @andrewJames . they both mean the same thing?","body":"My leader says : 0 0 1,4,7,10,13,16,19 2,17 * * ?  @andrewJames . they both mean the same thing?"},{"owner":{"account_id":12743722,"reputation":19966,"user_id":12567365,"display_name":"andrewJames"},"score":0,"creation_date":1683207323,"post_id":76173579,"comment_id":134333669,"body_markdown":"Your question says &quot;_on the 2nd and 17th of each month_&quot;. Does the cron expression `0 1/3 1,17 * *` (the expression _you_ provided) do that?","body":"Your question says &quot;<i>on the 2nd and 17th of each month</i>&quot;. Does the cron expression <code>0 1&#47;3 1,17 * *</code> (the expression <i>you</i> provided) do that?"},{"owner":{"account_id":12743722,"reputation":19966,"user_id":12567365,"display_name":"andrewJames"},"score":0,"creation_date":1683208547,"post_id":76173579,"comment_id":134334021,"body_markdown":"How are you executing your cron expression? What `cron` tool are you using? One provided by a Linux system (using `crontab`)? Or maybe [Quartz](https://www.javadoc.io/doc/org.quartz-scheduler/quartz/latest/org/quartz/CronExpression.html) (given you mentioned Spring in your question&#39;s tags)?","body":"How are you executing your cron expression? What <code>cron</code> tool are you using? One provided by a Linux system (using <code>crontab</code>)? Or maybe <a href=\"https://www.javadoc.io/doc/org.quartz-scheduler/quartz/latest/org/quartz/CronExpression.html\" rel=\"nofollow noreferrer\">Quartz</a> (given you mentioned Spring in your question&#39;s tags)?"},{"owner":{"account_id":17717155,"reputation":527,"user_id":12863192,"display_name":"Ishan"},"score":0,"creation_date":1683210885,"post_id":76173579,"comment_id":134334698,"body_markdown":"`0 1-23/3 2,17 * *` [link](https://www.crondrive.com/test-cron-expression?utf8=%E2%9C%93&amp;expression=0+1-23%2F3+2%2C17+*+*&amp;time_zone=UTC&amp;commit=Test) is equivalent to `0 1,4,7,10,13,16,19,22 2,17 * *` [link](https://www.crondrive.com/test-cron-expression?utf8=%E2%9C%93&amp;expression=0+1-23%2F3+2%2C17+*+*&amp;time_zone=UTC&amp;commit=Test)","body":"<code>0 1-23&#47;3 2,17 * *</code> <a href=\"https://www.crondrive.com/test-cron-expression?utf8=%E2%9C%93&amp;expression=0+1-23%2F3+2%2C17+%2A+%2A&amp;time_zone=UTC&amp;commit=Test\" rel=\"nofollow noreferrer\">link</a> is equivalent to <code>0 1,4,7,10,13,16,19,22 2,17 * *</code> <a href=\"https://www.crondrive.com/test-cron-expression?utf8=%E2%9C%93&amp;expression=0+1-23%2F3+2%2C17+%2A+%2A&amp;time_zone=UTC&amp;commit=Test\" rel=\"nofollow noreferrer\">link</a>"},{"owner":{"account_id":17717155,"reputation":527,"user_id":12863192,"display_name":"Ishan"},"score":0,"creation_date":1683210977,"post_id":76173579,"comment_id":134334719,"body_markdown":"@AysheAyparcasi, in your leader&#39;s cron `0 0 1,4,7,10,13,16,19 2,17 * *`, it is missing a run at 22:00, after 19:00.","body":"@AysheAyparcasi, in your leader&#39;s cron <code>0 0 1,4,7,10,13,16,19 2,17 * *</code>, it is missing a run at 22:00, after 19:00."},{"owner":{"account_id":25267413,"reputation":11,"user_id":19097334,"display_name":"Ayshe Ayparcasi"},"score":0,"creation_date":1683273356,"post_id":76173579,"comment_id":134344589,"body_markdown":"I realized later that it was missing. @Ishan. Thank you.  I have tested and is working correctly.","body":"I realized later that it was missing. @Ishan. Thank you.  I have tested and is working correctly."},{"owner":{"account_id":12743722,"reputation":19966,"user_id":12567365,"display_name":"andrewJames"},"score":0,"creation_date":1683291835,"post_id":76173579,"comment_id":134348368,"body_markdown":"OK - but STS is just your IDE tool. What _scheduler_ are you using? What `cron` tool?","body":"OK - but STS is just your IDE tool. What <i>scheduler</i> are you using? What <code>cron</code> tool?"}],"owner":{"account_id":25267413,"reputation":11,"user_id":19097334,"display_name":"Ayshe Ayparcasi"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":115,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683273595,"creation_date":1683205782,"question_id":76173579,"body_markdown":"I want to set a cron job time:\r\non the 2nd and 17th of each month and every 3 hours these days. \r\nAnd first time cron job running is 01 am. after periods: 04 am, 07 am, 10 am, 1 pm, 4 pm, 7pm, 10pm.\r\nJust 2 days. \r\n\r\nFor instance: \r\n2 May and 17 May. 2 June and 17 June.... And 01 am, 04 am, 07 am, 10 am, 1 pm, 4 pm, 7pm, 10pm periods.\r\n\r\n\r\n\r\n\r\n\r\nI tired this : 00 00 2-17 * * ?\r\nBut not work as I wanted.\r\n\r\nEDIT: is solved: 0 0 1,4,7,10,13,16,19,22 2,17 * *.\r\ntop 2 digits: 0 0 =&gt; seconds and minutes.\r\nSince I need seconds, I added the leading zero.\r\n","title":"How to configure &quot;on the 2nd and 17th of each month and every 3 hours these days&quot; with Cron Job in Java?","body":"<p>I want to set a cron job time:\non the 2nd and 17th of each month and every 3 hours these days.\nAnd first time cron job running is 01 am. after periods: 04 am, 07 am, 10 am, 1 pm, 4 pm, 7pm, 10pm.\nJust 2 days.</p>\n<p>For instance:\n2 May and 17 May. 2 June and 17 June.... And 01 am, 04 am, 07 am, 10 am, 1 pm, 4 pm, 7pm, 10pm periods.</p>\n<p>I tired this : 00 00 2-17 * * ?\nBut not work as I wanted.</p>\n<p>EDIT: is solved: 0 0 1,4,7,10,13,16,19,22 2,17 * *.\ntop 2 digits: 0 0 =&gt; seconds and minutes.\nSince I need seconds, I added the leading zero.</p>\n"},{"tags":["java","intellij-idea","java-8"],"comments":[{"owner":{"account_id":3701415,"reputation":605,"user_id":3081030,"accept_rate":78,"display_name":"Palcente"},"score":1,"creation_date":1461063316,"post_id":36675617,"comment_id":61017911,"body_markdown":"Had same issue after updating, you need to set your SDK before importing projects, otherwise they default to Java 1.5.","body":"Had same issue after updating, you need to set your SDK before importing projects, otherwise they default to Java 1.5."},{"owner":{"account_id":3178228,"reputation":4984,"user_id":2685581,"display_name":"Ajay Kumar"},"score":0,"creation_date":1490586611,"post_id":36675617,"comment_id":73160445,"body_markdown":"[Please refer to this post to get rid of JDK related issues in IntellJ configuration.](http://stackoverflow.com/a/42993827/2685581)","body":"<a href=\"http://stackoverflow.com/a/42993827/2685581\">Please refer to this post to get rid of JDK related issues in IntellJ configuration.</a>"},{"owner":{"account_id":3178228,"reputation":4984,"user_id":2685581,"display_name":"Ajay Kumar"},"score":0,"creation_date":1503393712,"post_id":36675617,"comment_id":78584819,"body_markdown":"https://stackoverflow.com/a/42993827/2685581","body":"<a href=\"https://stackoverflow.com/a/42993827/2685581\">stackoverflow.com/a/42993827/2685581</a>"}],"answers":[{"comments":[{"owner":{"account_id":7189653,"reputation":313,"user_id":5490469,"display_name":"jakub"},"score":0,"creation_date":1460925950,"post_id":36679117,"comment_id":60953775,"body_markdown":"there was and still is JDK 1.8... I don&#39;t know why in new IDEA is project using java 5..","body":"there was and still is JDK 1.8... I don&#39;t know why in new IDEA is project using java 5.."},{"owner":{"account_id":8245944,"reputation":715,"user_id":6202029,"display_name":"a.deshpande012"},"score":0,"creation_date":1460927367,"post_id":36679117,"comment_id":60954256,"body_markdown":"@jakub can you explain what you mean? I&#39;m afraid that I have trouble understanding your problem.","body":"@jakub can you explain what you mean? I&#39;m afraid that I have trouble understanding your problem."},{"owner":{"account_id":7189653,"reputation":313,"user_id":5490469,"display_name":"jakub"},"score":0,"creation_date":1460928799,"post_id":36679117,"comment_id":60954675,"body_markdown":"In new IntelliJ IDEA I have problem build project (which have target JDK set upped in maven and IDEA project settings to 1.8) because there is error showing up that usage of generified classes(or types)(by example JCombobox&lt;String&gt;) is available after JDK 1.6 and IDEA is somehow using JDK 5(or 1.5). When  I open same project in IDEA 15, there is no problem...","body":"In new IntelliJ IDEA I have problem build project (which have target JDK set upped in maven and IDEA project settings to 1.8) because there is error showing up that usage of generified classes(or types)(by example JCombobox&lt;String&gt;) is available after JDK 1.6 and IDEA is somehow using JDK 5(or 1.5). When  I open same project in IDEA 15, there is no problem..."}],"tags":[],"owner":{"account_id":8245944,"reputation":715,"user_id":6202029,"display_name":"a.deshpande012"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1460910424,"creation_date":1460910424,"answer_id":36679117,"question_id":36675617,"body_markdown":"You should be able to change it in File&gt;Project Structure&gt;Project&gt;Project SDK and then either pick JDK 1.8 in the drop-down menu, or click &#39;new&#39; and navigate to the JDK folder.","title":"IntelliJ IDEA 16 can&#39;t resolve JDK1.8","body":"<p>You should be able to change it in File>Project Structure>Project>Project SDK and then either pick JDK 1.8 in the drop-down menu, or click 'new' and navigate to the JDK folder.</p>\n"},{"comments":[{"owner":{"account_id":6918239,"reputation":3153,"user_id":5311694,"accept_rate":47,"display_name":"Souciance Eqdam Rashti"},"score":0,"creation_date":1461574660,"post_id":36715644,"comment_id":61242466,"body_markdown":"Thanks for the help here. Drove me crazy until I realised it had to be changed at module level as well. Argh.","body":"Thanks for the help here. Drove me crazy until I realised it had to be changed at module level as well. Argh."}],"tags":[],"owner":{"account_id":7189653,"reputation":313,"user_id":5490469,"display_name":"jakub"},"comment_count":1,"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1461061529,"creation_date":1461061529,"answer_id":36715644,"question_id":36675617,"body_markdown":"Finally I find out...\r\nFile -&gt; Project Structure -&gt; Module...\r\nAnd for every module I had to set version 8...(there was version 5 I don&#39;t know why...)","title":"IntelliJ IDEA 16 can&#39;t resolve JDK1.8","body":"<p>Finally I find out...\nFile -> Project Structure -> Module...\nAnd for every module I had to set version 8...(there was version 5 I don't know why...)</p>\n"},{"tags":[],"owner":{"account_id":14112653,"reputation":33,"user_id":10195099,"display_name":"Shaheaz"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683273542,"creation_date":1683009848,"answer_id":76152334,"question_id":36675617,"body_markdown":"I added these lines in pom.xml to make maven use this version for compilation \r\n\r\n    &lt;properties&gt;\r\n        &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt; \r\n        &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\r\n    &lt;/properties&gt;\r\n\r\n","title":"IntelliJ IDEA 16 can&#39;t resolve JDK1.8","body":"<p>I added these lines in pom.xml to make maven use this version for compilation</p>\n<pre><code>&lt;properties&gt;\n    &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt; \n    &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\n&lt;/properties&gt;\n</code></pre>\n"}],"owner":{"account_id":7189653,"reputation":313,"user_id":5490469,"display_name":"jakub"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6335,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":36715644,"answer_count":3,"score":11,"last_activity_date":1683273542,"creation_date":1460890639,"question_id":36675617,"body_markdown":"I have IntelliJ IDEA CE.\r\nI did some practice coding (had some project in maven) and I was developing it in IDEA 15 CE. Then update came and I cannot build project again, because of error:\r\nJComboBox&lt;String&gt; usage generified after JDK 1.6 API which would couse compilation problem with JDK 5.0.  (in maven is target JDK 1.8, in IDEA preferences is JDK1.8 and in project preferences is JDK 1.8. I Tried import settings from IDEA 15 (where it still works fine) with no difference,  also I tried clean install IDEA... with no results.\r\nAny help pls?","title":"IntelliJ IDEA 16 can&#39;t resolve JDK1.8","body":"<p>I have IntelliJ IDEA CE.\nI did some practice coding (had some project in maven) and I was developing it in IDEA 15 CE. Then update came and I cannot build project again, because of error:\nJComboBox usage generified after JDK 1.6 API which would couse compilation problem with JDK 5.0.  (in maven is target JDK 1.8, in IDEA preferences is JDK1.8 and in project preferences is JDK 1.8. I Tried import settings from IDEA 15 (where it still works fine) with no difference,  also I tried clean install IDEA... with no results.\nAny help pls?</p>\n"},{"tags":["java","intellij-idea","lambda"],"answers":[{"tags":[],"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"comment_count":0,"down_vote_count":2,"up_vote_count":55,"is_accepted":true,"score":53,"last_activity_date":1450831618,"creation_date":1450831618,"answer_id":34426910,"question_id":34426794,"body_markdown":"I suspect it&#39;s just Java&#39;s type inference not being quite smart enough.  Try\r\n\r\n     .map(p -&gt; (Callable&lt;SomeClass&gt;) () -&gt; p.funct())","title":"Java &quot;target type of lambda conversion must be an interface&quot;","body":"<p>I suspect it's just Java's type inference not being quite smart enough.  Try</p>\n\n<pre><code> .map(p -&gt; (Callable&lt;SomeClass&gt;) () -&gt; p.funct())\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1171631,"reputation":1851,"user_id":1148696,"display_name":"stemadsen"},"score":0,"creation_date":1664891552,"post_id":40390831,"comment_id":130570316,"body_markdown":"This solution is better than type casting, because it will give a compile error instead of a runtime error if the types don&#39;t match.","body":"This solution is better than type casting, because it will give a compile error instead of a runtime error if the types don&#39;t match."}],"tags":[],"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"comment_count":1,"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1478125812,"creation_date":1478125404,"answer_id":40390831,"question_id":34426794,"body_markdown":"[`Stream#map()`][1] is a [*typed*][2] method, so you can explicitly specify the type:\r\n\r\n     .&lt;Callable&lt;SomeClass&gt;&gt;map(p -&gt; () -&gt; p.funct())\r\n\r\nor neater, use a method reference:\r\n\r\n     .&lt;Callable&lt;SomeClass&gt;&gt;map(p -&gt; p::funct)\r\n\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#map-java.util.function.Function-\r\n  [2]: https://docs.oracle.com/javase/tutorial/extra/generics/methods.html","title":"Java &quot;target type of lambda conversion must be an interface&quot;","body":"<p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#map-java.util.function.Function-\" rel=\"noreferrer\"><code>Stream#map()</code></a> is a <a href=\"https://docs.oracle.com/javase/tutorial/extra/generics/methods.html\" rel=\"noreferrer\"><em>typed</em></a> method, so you can explicitly specify the type:</p>\n\n<pre><code> .&lt;Callable&lt;SomeClass&gt;&gt;map(p -&gt; () -&gt; p.funct())\n</code></pre>\n\n<p>or neater, use a method reference:</p>\n\n<pre><code> .&lt;Callable&lt;SomeClass&gt;&gt;map(p -&gt; p::funct)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17126499,"reputation":646,"user_id":12393574,"display_name":"jeffrey.d.m"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683273007,"creation_date":1683273007,"answer_id":76179942,"question_id":34426794,"body_markdown":"In case you&#39;re using some other fluent API, make sure you&#39;re calling the right method:\r\n\r\nWrong (facepalm):\r\n```java\r\nOptional.ofNullable(something).orElse(() -&gt; createObject());\r\n```\r\n\r\nRight:\r\n```java\r\nOptional.ofNullable(something).orElseGet(() -&gt; createObject());\r\n```","title":"Java &quot;target type of lambda conversion must be an interface&quot;","body":"<p>In case you're using some other fluent API, make sure you're calling the right method:</p>\n<p>Wrong (facepalm):</p>\n<pre class=\"lang-java prettyprint-override\"><code>Optional.ofNullable(something).orElse(() -&gt; createObject());\n</code></pre>\n<p>Right:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Optional.ofNullable(something).orElseGet(() -&gt; createObject());\n</code></pre>\n"}],"owner":{"account_id":7241060,"reputation":1363,"user_id":5524623,"accept_rate":66,"display_name":"Mocktheduck"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":64859,"favorite_count":0,"down_vote_count":0,"up_vote_count":46,"accepted_answer_id":34426910,"answer_count":3,"score":46,"last_activity_date":1683273007,"creation_date":1450830744,"question_id":34426794,"body_markdown":"I&#39;m trying to use lambdas and streams in java but I&#39;m quite new to it.\r\nI got this error in IntelliJ &quot;target type of lambda conversion must be an interface&quot; when I try to make a lambda expression\r\n\r\n    List&lt;Callable&lt;SomeClass&gt;&gt; callList = prgll.stream()\r\n                                              .map(p-&gt;(()-&gt;{return p.funct();} )) &lt;--- Here I get error\r\n                                              .collect(Collectors.toList());\r\n\r\nAm I doing something wrong?","title":"Java &quot;target type of lambda conversion must be an interface&quot;","body":"<p>I'm trying to use lambdas and streams in java but I'm quite new to it.\nI got this error in IntelliJ \"target type of lambda conversion must be an interface\" when I try to make a lambda expression</p>\n\n<pre><code>List&lt;Callable&lt;SomeClass&gt;&gt; callList = prgll.stream()\n                                          .map(p-&gt;(()-&gt;{return p.funct();} )) &lt;--- Here I get error\n                                          .collect(Collectors.toList());\n</code></pre>\n\n<p>Am I doing something wrong?</p>\n"},{"tags":["java","spring-boot","rabbitmq","log4j2"],"comments":[{"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"score":0,"creation_date":1683291748,"post_id":76179898,"comment_id":134348340,"body_markdown":"Most of the remarks to [your previous question](https://stackoverflow.com/q/76163488/11748454) apply also here: use the `${spring:...}` lookup and fix up your dependencies (you are again using a version vulnerable to [Log4Shell](https://en.wikipedia.org/wiki/Log4Shell)). Unlike your previous application, this one lacks the exclusion of `spring-boot-starter-logging` from `spring-boot-starter`.","body":"Most of the remarks to <a href=\"https://stackoverflow.com/q/76163488/11748454\">your previous question</a> apply also here: use the <code>${spring:...}</code> lookup and fix up your dependencies (you are again using a version vulnerable to <a href=\"https://en.wikipedia.org/wiki/Log4Shell\" rel=\"nofollow noreferrer\">Log4Shell</a>). Unlike your previous application, this one lacks the exclusion of <code>spring-boot-starter-logging</code> from <code>spring-boot-starter</code>."},{"owner":{"account_id":17035371,"reputation":83,"user_id":12324519,"display_name":"tejashree parab"},"score":0,"creation_date":1683521326,"post_id":76179898,"comment_id":134373844,"body_markdown":"I have applied those changes, but still facing issues,\n\n\n`2023-05-08 10:13:20,605 main ERROR Error processing element RabbitMQ ([Appenders: null]): CLASS_NOT_FOUND\n2023-05-08 10:13:20,625 main ERROR Unable to locate appender &quot;rmqAppender&quot; for logger config &quot;root&quot;`","body":"I have applied those changes, but still facing issues,   <code>2023-05-08 10:13:20,605 main ERROR Error processing element RabbitMQ ([Appenders: null]): CLASS_NOT_FOUND 2023-05-08 10:13:20,625 main ERROR Unable to locate appender &quot;rmqAppender&quot; for logger config &quot;root&quot;</code>"},{"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"score":0,"creation_date":1683524568,"post_id":76179898,"comment_id":134374168,"body_markdown":"The `RabbitMQ` appender is provided by Spring in [`org.springframework.amqp:spring-rabbit`](https://mvnrepository.com/artifact/org.springframework.amqp/spring-rabbit). Add it as runtime dependency.","body":"The <code>RabbitMQ</code> appender is provided by Spring in <a href=\"https://mvnrepository.com/artifact/org.springframework.amqp/spring-rabbit\" rel=\"nofollow noreferrer\"><code>org.springframework.amqp:spring-rabbit</code></a>. Add it as runtime dependency."},{"owner":{"account_id":17035371,"reputation":83,"user_id":12324519,"display_name":"tejashree parab"},"score":0,"creation_date":1683543862,"post_id":76179898,"comment_id":134377772,"body_markdown":"Still the same issue persist","body":"Still the same issue persist"},{"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"score":0,"creation_date":1683545345,"post_id":76179898,"comment_id":134378083,"body_markdown":"If you still have `CLASS_NOT_FOUND` after adding `spring-rabbit`, check your deployment configuration. The usual suspect is deploying a fat-jar with a misconfigured Maven Shade plugin (cf. [this question](https://stackoverflow.com/a/76015329/11748454)).","body":"If you still have <code>CLASS_NOT_FOUND</code> after adding <code>spring-rabbit</code>, check your deployment configuration. The usual suspect is deploying a fat-jar with a misconfigured Maven Shade plugin (cf. <a href=\"https://stackoverflow.com/a/76015329/11748454\">this question</a>)."}],"owner":{"account_id":17035371,"reputation":83,"user_id":12324519,"display_name":"tejashree parab"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":76,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683272730,"creation_date":1683272730,"question_id":76179898,"body_markdown":"1. log4j2-spring.xml config file created under src/main/resources:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;Configuration status=&quot;INFO&quot;&gt;\r\n\t&lt;Appenders&gt;\r\n\t\t&lt;RabbitMQ name=&quot;rmqAppender&quot; host=&quot;${rabbitmq.in.host}&quot;\r\n\t\t\tport=&quot;${rabbitmq.in.port}&quot;\r\n\t\t\tvirtualHost=&quot;${rabbitmq.in.virtualhost}&quot;\r\n\t\t\tusername=&quot;${rabbitmq.in.username}&quot;\r\n\t\t\tpassword=&quot;${rabbitmq.in.password}&quot;\r\n\t\t\texchange=&quot;${rabbitmq.in.exchange}&quot;\r\n\t\t\troutingKey=&quot;${rabbitmq.in.routingkey}&quot;&gt;\r\n\t\t\t&lt;PatternLayout\r\n\t\t\t\tpattern=&quot;%d{HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n&quot; /&gt;\r\n\t\t&lt;/RabbitMQ&gt;\r\n\t&lt;/Appenders&gt;\r\n\t&lt;Loggers&gt;\r\n\t\t&lt;Logger name=&quot;com.example.demo&quot; level=&quot;info&quot; additivity=&quot;false&quot;&gt;\r\n\t\t\t&lt;AppenderRef ref=&quot;rmqAppender&quot; /&gt;\r\n\t\t&lt;/Logger&gt;\r\n\t\t&lt;Root level=&quot;info&quot;&gt;\r\n\t\t\t&lt;!-- &lt;AppenderRef ref=&quot;Console&quot; /&gt; --&gt;\r\n\t\t\t&lt;AppenderRef ref=&quot;rmqAppender&quot; /&gt;\r\n\t\t&lt;/Root&gt;\r\n\t&lt;/Loggers&gt;\r\n&lt;/Configuration&gt;\r\n```\r\n\r\n2. Application.properties file is:\r\n\r\n```\r\nrabbitmq.in.queue=queue\r\nrabbitmq.in.exchange=exchange\r\nrabbitmq.in.routingkey=routingkey\r\nrabbitmq.in.host=host\r\nrabbitmq.in.port=port\r\nrabbitmq.in.exchangetype=exchangetype\r\nrabbitmq.in.virtualhost=virtualhost\r\nrabbitmq.in.username=username\r\nrabbitmq.in.password=password\r\nlistener.prefetchcount=1\r\nlistener.maxConcurrentConsumerCount=10\r\nmanagement.health.rabbit.enabled=false\r\n\r\nspring.datasource.url=jdbc:oracle:thin:@localhost:1521:xe\r\nspring.datasource.username=test\r\nspring.datasource.password=test\r\nspring.datasource.driver-class-name=oracle.jdbc.driver.OracleDriver\r\n    \r\nlogging.config=classpath:log4j2.xml\r\n```\r\n\r\n3. pom.xml is used is (spring-boot version-2.7.11)\r\n\r\n```\r\n&lt;dependencies&gt;\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.14.1&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;com.oracle.database.jdbc&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;ojdbc8&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;19.8.0.0&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;com.rabbitmq&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;amqp-client&lt;/artifactId&gt;\r\n\t&lt;/dependency&gt;\r\n&lt;/dependencies&gt;\r\n```\r\n\r\nBut facing the error related to configuration file as shown below:\r\n\r\n```\r\nLogging system failed to initialize using configuration from &#39;classpath:log4j2-spring.xml&#39;\r\njava.lang.IllegalStateException: Logback configuration error detected: \r\nERROR in ch.qos.logback.core.joran.spi.Interpreter@7:13 - no applicable action for [Appenders], current ElementPath  is [[Configuration][Appenders]]\r\nERROR in ch.qos.logback.core.joran.spi.Interpreter@38:47 - no applicable action for [RabbitMQ], current ElementPath  is [[Configuration][Appenders][RabbitMQ]]\r\nERROR in ch.qos.logback.core.joran.spi.Interpreter@40:69 - no applicable action for [PatternLayout], current ElementPath  is [[Configuration][Appenders][RabbitMQ][PatternLayout]]\r\nERROR in ch.qos.logback.core.joran.spi.Interpreter@43:11 - no applicable action for [Loggers], current ElementPath  is [[Configuration][Loggers]]\r\nERROR in ch.qos.logback.core.joran.spi.Interpreter@44:66 - no applicable action for [Logger], current ElementPath  is [[Configuration][Loggers][Logger]]\r\nERROR in ch.qos.logback.core.joran.spi.Interpreter@45:35 - no applicable action for [AppenderRef], current ElementPath  is [[Configuration][Loggers][Logger][AppenderRef]]\r\nERROR in ch.qos.logback.core.joran.spi.Interpreter@47:22 - no applicable action for [Root], current ElementPath  is [[Configuration][Loggers][Root]]\r\nERROR in ch.qos.logback.core.joran.spi.Interpreter@49:37 - no applicable action for [AppenderRef], current ElementPath  is [[Configuration][Loggers][Root][AppenderRef]]\r\n\tat org.springframework.boot.logging.logback.LogbackLoggingSystem.loadConfiguration(LogbackLoggingSystem.java:179)\r\n\tat org.springframework.boot.logging.AbstractLoggingSystem.initializeWithSpecificConfig(AbstractLoggingSystem.java:66)\r\n\tat org.springframework.boot.logging.AbstractLoggingSystem.initialize(AbstractLoggingSystem.java:57)\r\n\tat org.springframework.boot.logging.logback.LogbackLoggingSystem.initialize(LogbackLoggingSystem.java:132)\r\n\tat org.springframework.boot.context.logging.LoggingApplicationListener.initializeSystem(LoggingApplicationListener.java:332)\r\n\tat org.springframework.boot.context.logging.LoggingApplicationListener.initialize(LoggingApplicationListener.java:298)\r\n\tat org.springframework.boot.context.logging.LoggingApplicationListener.onApplicationEnvironmentPreparedEvent(LoggingApplicationListener.java:246)\r\n\tat org.springframework.boot.context.logging.LoggingApplicationListener.onApplicationEvent(LoggingApplicationListener.java:223)\r\n\tat org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:176)\r\n\tat org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:169)\r\n\tat org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:143)\r\n\tat org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:131)\r\n\tat org.springframework.boot.context.event.EventPublishingRunListener.environmentPrepared(EventPublishingRunListener.java:85)\r\n\tat org.springframework.boot.SpringApplicationRunListeners.lambda$environmentPrepared$2(SpringApplicationRunListeners.java:66)\r\n\tat java.util.ArrayList.forEach(Unknown Source)\r\n\tat org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:120)\r\n\tat org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:114)\r\n\tat org.springframework.boot.SpringApplicationRunListeners.environmentPrepared(SpringApplicationRunListeners.java:65)\r\n\tat org.springframework.boot.SpringApplication.prepareEnvironment(SpringApplication.java:343)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:301)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1303)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1292)\r\n\tat com.example.demo.DemoApplication.main(DemoApplication.java:12)\r\nException in thread &quot;main&quot; java.lang.IllegalStateException: java.lang.IllegalStateException: Logback configuration error detected: \r\n```\r\n\r\nNeed to send the logging custom json message to RMqueue, using asynchronous log4j2 configuration.\r\n","title":"Log the custom message to RMQ asynchronously using Log4j2","body":"<ol>\n<li>log4j2-spring.xml config file created under src/main/resources:</li>\n</ol>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;Configuration status=&quot;INFO&quot;&gt;\n    &lt;Appenders&gt;\n        &lt;RabbitMQ name=&quot;rmqAppender&quot; host=&quot;${rabbitmq.in.host}&quot;\n            port=&quot;${rabbitmq.in.port}&quot;\n            virtualHost=&quot;${rabbitmq.in.virtualhost}&quot;\n            username=&quot;${rabbitmq.in.username}&quot;\n            password=&quot;${rabbitmq.in.password}&quot;\n            exchange=&quot;${rabbitmq.in.exchange}&quot;\n            routingKey=&quot;${rabbitmq.in.routingkey}&quot;&gt;\n            &lt;PatternLayout\n                pattern=&quot;%d{HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n&quot; /&gt;\n        &lt;/RabbitMQ&gt;\n    &lt;/Appenders&gt;\n    &lt;Loggers&gt;\n        &lt;Logger name=&quot;com.example.demo&quot; level=&quot;info&quot; additivity=&quot;false&quot;&gt;\n            &lt;AppenderRef ref=&quot;rmqAppender&quot; /&gt;\n        &lt;/Logger&gt;\n        &lt;Root level=&quot;info&quot;&gt;\n            &lt;!-- &lt;AppenderRef ref=&quot;Console&quot; /&gt; --&gt;\n            &lt;AppenderRef ref=&quot;rmqAppender&quot; /&gt;\n        &lt;/Root&gt;\n    &lt;/Loggers&gt;\n&lt;/Configuration&gt;\n</code></pre>\n<ol start=\"2\">\n<li>Application.properties file is:</li>\n</ol>\n<pre><code>rabbitmq.in.queue=queue\nrabbitmq.in.exchange=exchange\nrabbitmq.in.routingkey=routingkey\nrabbitmq.in.host=host\nrabbitmq.in.port=port\nrabbitmq.in.exchangetype=exchangetype\nrabbitmq.in.virtualhost=virtualhost\nrabbitmq.in.username=username\nrabbitmq.in.password=password\nlistener.prefetchcount=1\nlistener.maxConcurrentConsumerCount=10\nmanagement.health.rabbit.enabled=false\n\nspring.datasource.url=jdbc:oracle:thin:@localhost:1521:xe\nspring.datasource.username=test\nspring.datasource.password=test\nspring.datasource.driver-class-name=oracle.jdbc.driver.OracleDriver\n    \nlogging.config=classpath:log4j2.xml\n</code></pre>\n<ol start=\"3\">\n<li>pom.xml is used is (spring-boot version-2.7.11)</li>\n</ol>\n<pre><code>&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n        &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\n        &lt;version&gt;2.14.1&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n        &lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.oracle.database.jdbc&lt;/groupId&gt;\n        &lt;artifactId&gt;ojdbc8&lt;/artifactId&gt;\n        &lt;version&gt;19.8.0.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.rabbitmq&lt;/groupId&gt;\n        &lt;artifactId&gt;amqp-client&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n<p>But facing the error related to configuration file as shown below:</p>\n<pre><code>Logging system failed to initialize using configuration from 'classpath:log4j2-spring.xml'\njava.lang.IllegalStateException: Logback configuration error detected: \nERROR in ch.qos.logback.core.joran.spi.Interpreter@7:13 - no applicable action for [Appenders], current ElementPath  is [[Configuration][Appenders]]\nERROR in ch.qos.logback.core.joran.spi.Interpreter@38:47 - no applicable action for [RabbitMQ], current ElementPath  is [[Configuration][Appenders][RabbitMQ]]\nERROR in ch.qos.logback.core.joran.spi.Interpreter@40:69 - no applicable action for [PatternLayout], current ElementPath  is [[Configuration][Appenders][RabbitMQ][PatternLayout]]\nERROR in ch.qos.logback.core.joran.spi.Interpreter@43:11 - no applicable action for [Loggers], current ElementPath  is [[Configuration][Loggers]]\nERROR in ch.qos.logback.core.joran.spi.Interpreter@44:66 - no applicable action for [Logger], current ElementPath  is [[Configuration][Loggers][Logger]]\nERROR in ch.qos.logback.core.joran.spi.Interpreter@45:35 - no applicable action for [AppenderRef], current ElementPath  is [[Configuration][Loggers][Logger][AppenderRef]]\nERROR in ch.qos.logback.core.joran.spi.Interpreter@47:22 - no applicable action for [Root], current ElementPath  is [[Configuration][Loggers][Root]]\nERROR in ch.qos.logback.core.joran.spi.Interpreter@49:37 - no applicable action for [AppenderRef], current ElementPath  is [[Configuration][Loggers][Root][AppenderRef]]\n    at org.springframework.boot.logging.logback.LogbackLoggingSystem.loadConfiguration(LogbackLoggingSystem.java:179)\n    at org.springframework.boot.logging.AbstractLoggingSystem.initializeWithSpecificConfig(AbstractLoggingSystem.java:66)\n    at org.springframework.boot.logging.AbstractLoggingSystem.initialize(AbstractLoggingSystem.java:57)\n    at org.springframework.boot.logging.logback.LogbackLoggingSystem.initialize(LogbackLoggingSystem.java:132)\n    at org.springframework.boot.context.logging.LoggingApplicationListener.initializeSystem(LoggingApplicationListener.java:332)\n    at org.springframework.boot.context.logging.LoggingApplicationListener.initialize(LoggingApplicationListener.java:298)\n    at org.springframework.boot.context.logging.LoggingApplicationListener.onApplicationEnvironmentPreparedEvent(LoggingApplicationListener.java:246)\n    at org.springframework.boot.context.logging.LoggingApplicationListener.onApplicationEvent(LoggingApplicationListener.java:223)\n    at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:176)\n    at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:169)\n    at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:143)\n    at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:131)\n    at org.springframework.boot.context.event.EventPublishingRunListener.environmentPrepared(EventPublishingRunListener.java:85)\n    at org.springframework.boot.SpringApplicationRunListeners.lambda$environmentPrepared$2(SpringApplicationRunListeners.java:66)\n    at java.util.ArrayList.forEach(Unknown Source)\n    at org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:120)\n    at org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:114)\n    at org.springframework.boot.SpringApplicationRunListeners.environmentPrepared(SpringApplicationRunListeners.java:65)\n    at org.springframework.boot.SpringApplication.prepareEnvironment(SpringApplication.java:343)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:301)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1303)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1292)\n    at com.example.demo.DemoApplication.main(DemoApplication.java:12)\nException in thread &quot;main&quot; java.lang.IllegalStateException: java.lang.IllegalStateException: Logback configuration error detected: \n</code></pre>\n<p>Need to send the logging custom json message to RMqueue, using asynchronous log4j2 configuration.</p>\n"},{"tags":["java","spring","spring-security","saml-2.0","spring-security-saml2"],"owner":{"account_id":10850329,"reputation":1,"user_id":7978279,"display_name":"phiphophe"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":487,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683271680,"creation_date":1683271680,"question_id":76179771,"body_markdown":"My old system is using OpenSAML 1.0 and now I want to upgrade to Spring Security SAML2. In the old system I used OpenSAML 1.0 and did the authentication completely manually, after switching to Spring Security SAML2, I found it very difficult.\r\n\r\nCurrently I am facing 2 problems as follows:\r\n1. How can I allow user (Admin) to change information of IDP (Gsuite, Okta...), then user (User) can login based on that IDP?\r\n2. Is there a way to do SAML2 Log in manually?\r\n- I have an IDPMetadata.xml file stored in the database, how can I make a &lt;saml2:AuthnRequest&gt; and a &lt;saml2:AuthnReponse&gt;? based on HttpServlet?\r\n\r\n\r\n\r\n```\r\n@Configuration\r\npublic class PESaml2Configuration {\r\n    \r\n    @Autowired\r\n    private RelyingPartyRegistrationRepository relyingPartyRegistrationRepository;\r\n    \r\n    @Autowired\r\n    private RelyingPartyRegistrations relyingPartyRegistrations;\r\n    \r\n     @Bean\r\n        public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n         PESaml2Authentication authentication = new PESaml2Authentication();\r\n            http\r\n            .authorizeHttpRequests()\r\n            .antMatchers(&quot;/saml2Login&quot;).permitAll()\r\n            .and()\r\n            .saml2Login()\r\n            .failureHandler(authentication)\r\n            .successHandler(authentication);\r\n\r\n        return http.build();\r\n    }\r\n    \r\n    @Bean\r\n    protected RelyingPartyRegistrationRepository relyingPartyRegistrations() throws Exception {\r\n        Saml2X509Credential credential = credential();\r\n        RelyingPartyRegistration registration = RelyingPartyRegistration\r\n                .withRegistrationId(&quot;okta-saml&quot;)\r\n                .assertingPartyDetails(party -&gt; party\r\n                    .entityId(&quot;http://www.okta.com/xxxxxxxxxxxx&quot;)\r\n                    .singleSignOnServiceLocation(&quot;https://dev-13805256.okta.com/app/xxxxx/sso/saml&quot;)\r\n                    .wantAuthnRequestsSigned(false)\r\n                    .verificationX509Credentials(c -&gt; c.add(credential))\r\n                ).build();\r\n        return new InMemoryRelyingPartyRegistrationRepository(registration);\r\n    }\r\n    \r\n    private Saml2X509Credential credential() throws IOException, CertificateException {\r\n        RelyingPartyRegistration registrations = RelyingPartyRegistrations.fromMetadata(null).registrationId(&quot;ok&quot;).build();\r\n        Resource resource = new ClassPathResource(&quot;credentials/okta.cert&quot;);\r\n        try (InputStream is = resource.getInputStream()) {\r\n            X509Certificate certificate = (X509Certificate)\r\n                    CertificateFactory.getInstance(&quot;X.509&quot;).generateCertificate(is);\r\n            return Saml2X509Credential.verification(certificate);\r\n        }\r\n    }\r\n```\r\n","title":"Spring Security SAML2 - How to implement manual Saml2 login","body":"<p>My old system is using OpenSAML 1.0 and now I want to upgrade to Spring Security SAML2. In the old system I used OpenSAML 1.0 and did the authentication completely manually, after switching to Spring Security SAML2, I found it very difficult.</p>\n<p>Currently I am facing 2 problems as follows:</p>\n<ol>\n<li>How can I allow user (Admin) to change information of IDP (Gsuite, Okta...), then user (User) can login based on that IDP?</li>\n<li>Is there a way to do SAML2 Log in manually?</li>\n</ol>\n<ul>\n<li>I have an IDPMetadata.xml file stored in the database, how can I make a saml2:AuthnRequest and a saml2:AuthnReponse? based on HttpServlet?</li>\n</ul>\n<pre><code>@Configuration\npublic class PESaml2Configuration {\n    \n    @Autowired\n    private RelyingPartyRegistrationRepository relyingPartyRegistrationRepository;\n    \n    @Autowired\n    private RelyingPartyRegistrations relyingPartyRegistrations;\n    \n     @Bean\n        public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n         PESaml2Authentication authentication = new PESaml2Authentication();\n            http\n            .authorizeHttpRequests()\n            .antMatchers(&quot;/saml2Login&quot;).permitAll()\n            .and()\n            .saml2Login()\n            .failureHandler(authentication)\n            .successHandler(authentication);\n\n        return http.build();\n    }\n    \n    @Bean\n    protected RelyingPartyRegistrationRepository relyingPartyRegistrations() throws Exception {\n        Saml2X509Credential credential = credential();\n        RelyingPartyRegistration registration = RelyingPartyRegistration\n                .withRegistrationId(&quot;okta-saml&quot;)\n                .assertingPartyDetails(party -&gt; party\n                    .entityId(&quot;http://www.okta.com/xxxxxxxxxxxx&quot;)\n                    .singleSignOnServiceLocation(&quot;https://dev-13805256.okta.com/app/xxxxx/sso/saml&quot;)\n                    .wantAuthnRequestsSigned(false)\n                    .verificationX509Credentials(c -&gt; c.add(credential))\n                ).build();\n        return new InMemoryRelyingPartyRegistrationRepository(registration);\n    }\n    \n    private Saml2X509Credential credential() throws IOException, CertificateException {\n        RelyingPartyRegistration registrations = RelyingPartyRegistrations.fromMetadata(null).registrationId(&quot;ok&quot;).build();\n        Resource resource = new ClassPathResource(&quot;credentials/okta.cert&quot;);\n        try (InputStream is = resource.getInputStream()) {\n            X509Certificate certificate = (X509Certificate)\n                    CertificateFactory.getInstance(&quot;X.509&quot;).generateCertificate(is);\n            return Saml2X509Credential.verification(certificate);\n        }\n    }\n</code></pre>\n"},{"tags":["java","mqtt","paho"],"owner":{"account_id":2552047,"reputation":3028,"user_id":2215617,"accept_rate":71,"display_name":"Martin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1683271474,"creation_date":1683271474,"question_id":76179746,"body_markdown":"I could use this code to get a retained message with eclipse paho:\r\n\r\n        client.subscribe(myRetainedMessageTopic, (topic, message) -&gt; {\r\n          this.state = message.toString();\r\n          client.unsubscribe(topic);\r\n        });\r\n\r\n\r\nHowever, this brings some trouble with it. \r\n\r\n1. I have no guarantee, that myMessageTopic has a value\r\n2. I need to somehow wait for the listeners to finish. If no value is there, they will keep in waiting state. \r\n\r\nOne easy way would be to do some trick like this:\r\n\r\n        AtomicBoolean myTopicPresent = new AtomicBoolean(false);\r\n        client.subscribe(myRetainedMessageTopic, (topic, message) -&gt; {\r\n          this.state = message.toString();\r\n          myTopicPresent.set(true);\r\n        });\r\n        Thread.sleep(500);\r\n        client.unsubscribe(myRetainedMessageTopic);\r\n        if(!myTopicPresent.get()) {\r\n          this.state = DEFAULT_STATE;\r\n          client.publish(myRetainedMessageTopic, retainedMqttMessageWithDefaultState);\r\n        }\r\n\r\nHowever, this feels a bit hacky. Isn&#180;t there a more decent way to handle such a case synchronously and more properly without some &quot;random&quot; timeout?\r\n\r\n","title":"mqtt get retained message or default value","body":"<p>I could use this code to get a retained message with eclipse paho:</p>\n<pre><code>    client.subscribe(myRetainedMessageTopic, (topic, message) -&gt; {\n      this.state = message.toString();\n      client.unsubscribe(topic);\n    });\n</code></pre>\n<p>However, this brings some trouble with it.</p>\n<ol>\n<li>I have no guarantee, that myMessageTopic has a value</li>\n<li>I need to somehow wait for the listeners to finish. If no value is there, they will keep in waiting state.</li>\n</ol>\n<p>One easy way would be to do some trick like this:</p>\n<pre><code>    AtomicBoolean myTopicPresent = new AtomicBoolean(false);\n    client.subscribe(myRetainedMessageTopic, (topic, message) -&gt; {\n      this.state = message.toString();\n      myTopicPresent.set(true);\n    });\n    Thread.sleep(500);\n    client.unsubscribe(myRetainedMessageTopic);\n    if(!myTopicPresent.get()) {\n      this.state = DEFAULT_STATE;\n      client.publish(myRetainedMessageTopic, retainedMqttMessageWithDefaultState);\n    }\n</code></pre>\n<p>However, this feels a bit hacky. Isn´t there a more decent way to handle such a case synchronously and more properly without some &quot;random&quot; timeout?</p>\n"},{"tags":["java","android","notifications","foreground","foreground-service"],"comments":[{"owner":{"account_id":14218047,"reputation":11740,"user_id":10271334,"display_name":"Jeel Vankhede"},"score":0,"creation_date":1555413053,"post_id":55706796,"comment_id":98094376,"body_markdown":"How do you start this `Service`?","body":"How do you start this <code>Service</code>?"},{"owner":{"account_id":7576335,"reputation":379,"user_id":5748603,"accept_rate":56,"display_name":"Andry Jhonas"},"score":0,"creation_date":1555413121,"post_id":55706796,"comment_id":98094418,"body_markdown":"@JeelVankhede\n`protected void onStart() {\n\t\tsuper.onStart();\n\t\t// Bind to LocalService\n\t\tIntent intent = new Intent(this, SocketService.class);\n\t\tbindService(intent, serviceConnection, Context.BIND_AUTO_CREATE);\n\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O)\n            ContextCompat.startForegroundService(this, new Intent(this, SocketService.class));\n        else\n            this.startService(new Intent(this, SocketService.class));\n\t}`","body":"@JeelVankhede <code>protected void onStart() { \t\tsuper.onStart(); \t\t&#47;&#47; Bind to LocalService \t\tIntent intent = new Intent(this, SocketService.class); \t\tbindService(intent, serviceConnection, Context.BIND_AUTO_CREATE);          if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O)             ContextCompat.startForegroundService(this, new Intent(this, SocketService.class));         else             this.startService(new Intent(this, SocketService.class)); \t}</code>"},{"owner":{"account_id":14218047,"reputation":11740,"user_id":10271334,"display_name":"Jeel Vankhede"},"score":0,"creation_date":1555432109,"post_id":55706796,"comment_id":98106113,"body_markdown":"`startForeground(1, builder.build());` put this line outside of if condition in `onCreate()`.","body":"<code>startForeground(1, builder.build());</code> put this line outside of if condition in <code>onCreate()</code>."}],"answers":[{"comments":[{"owner":{"account_id":7576335,"reputation":379,"user_id":5748603,"accept_rate":56,"display_name":"Andry Jhonas"},"score":1,"creation_date":1555414437,"post_id":55706850,"comment_id":98095163,"body_markdown":"This is OK, I have similar to my code, but the i don&#39;t get the starting notification, and my app don&#39;t work when I close from tasks. I think that is something with notification code, I update the question.\nPS: Service is shown in running services","body":"This is OK, I have similar to my code, but the i don&#39;t get the starting notification, and my app don&#39;t work when I close from tasks. I think that is something with notification code, I update the question. PS: Service is shown in running services"},{"owner":{"account_id":9438152,"reputation":90,"user_id":7019526,"display_name":"Muhammad Imran"},"score":0,"creation_date":1555415387,"post_id":55706850,"comment_id":98095735,"body_markdown":"did you try to put out the notification code from if block?","body":"did you try to put out the notification code from if block?"}],"tags":[],"owner":{"account_id":9438152,"reputation":90,"user_id":7019526,"display_name":"Muhammad Imran"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1555413182,"creation_date":1555413182,"answer_id":55706850,"question_id":55706796,"body_markdown":"start service for below apis in else statement.                                                         \r\n\r\n    if (android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.O) {\r\n        // only for newer versions\r\n          Intent pushIntent = new Intent(this, ClassName.class);\r\n          startForegroundService(pushIntent);\r\n    } else {\r\n          Intent pushIntent = new Intent(this, ClassName.class);\r\n          startService(pushIntent);\r\n    }","title":"I am trying to start Foreground service on older API version. Work on APIs 26+","body":"<p>start service for below apis in else statement.                                                         </p>\n\n<pre><code>if (android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.O) {\n    // only for newer versions\n      Intent pushIntent = new Intent(this, ClassName.class);\n      startForegroundService(pushIntent);\n} else {\n      Intent pushIntent = new Intent(this, ClassName.class);\n      startService(pushIntent);\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":7576335,"reputation":379,"user_id":5748603,"accept_rate":56,"display_name":"Andry Jhonas"},"score":0,"creation_date":1555417967,"post_id":55707412,"comment_id":98097192,"body_markdown":"I put that code in else statement, now I have the start notification but not work properly, I don&#39;t receive other notification or messages.\n\n`else {\n\t\t\tNotificationCompat.Builder builder = new NotificationCompat.Builder(this, &quot;5&quot;);\n\t\t\tbuilder.setSmallIcon(R.drawable.ic_launcher);\n\t\t\tbuilder.setContentTitle(title);\n\t\t\tbuilder.setContentText(text);\n\n\t\t\tstartForeground(4, builder.build());\n\t\t}`","body":"I put that code in else statement, now I have the start notification but not work properly, I don&#39;t receive other notification or messages.  <code>else { \t\t\tNotificationCompat.Builder builder = new NotificationCompat.Builder(this, &quot;5&quot;); \t\t\tbuilder.setSmallIcon(R.drawable.ic_launcher); \t\t\tbuilder.setContentTitle(title); \t\t\tbuilder.setContentText(text);  \t\t\tstartForeground(4, builder.build()); \t\t}</code>"}],"tags":[],"owner":{"account_id":12703494,"reputation":139,"user_id":9229521,"display_name":"Kalpesh Kulye"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1555415148,"creation_date":1555415148,"answer_id":55707412,"question_id":55706796,"body_markdown":"Write code for devices with api lower than 26 same as written in if statement excluding the part of notification channel because notification channel is not supported in devices with version lower than 26\r\n\r\n    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\r\n            // you had written code for device version greater than O\r\n        } else {\r\n           //You need to write code for device with lower version here\r\n        }","title":"I am trying to start Foreground service on older API version. Work on APIs 26+","body":"<p>Write code for devices with api lower than 26 same as written in if statement excluding the part of notification channel because notification channel is not supported in devices with version lower than 26</p>\n\n<pre><code>if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\n        // you had written code for device version greater than O\n    } else {\n       //You need to write code for device with lower version here\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10309885,"reputation":2559,"user_id":7606064,"display_name":"Dyvoker"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1588316113,"creation_date":1588316113,"answer_id":61538108,"question_id":55706796,"body_markdown":"Method `ContextCompat.startForegroundService(...)` already contain `if` block:\r\n\r\n    public static void startForegroundService(@NonNull Context context, @NonNull Intent intent) {\r\n        if (Build.VERSION.SDK_INT &gt;= 26) {\r\n            context.startForegroundService(intent);\r\n        } else {\r\n            // Pre-O behavior.\r\n            context.startService(intent);\r\n        }\r\n    }\r\nJust call `ContextCompat.startForegroundService(this, pushIntent)`.\r\n\r\nAnd you need to move `startForeground` outside `if` block:\r\n\r\n    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\r\n        ...        \r\n    }\r\n    startForeground(1, builder.build());\r\n\r\nAlso, don&#39;t forget to call `notificationManagerCompat.notify(NOTIFICATION_ID, notification)` on older APIs (if notification doesn&#39;t show automatically). `NOTIFICATION_ID` must be NOT ZERO!!!","title":"I am trying to start Foreground service on older API version. Work on APIs 26+","body":"<p>Method <code>ContextCompat.startForegroundService(...)</code> already contain <code>if</code> block:</p>\n\n<pre><code>public static void startForegroundService(@NonNull Context context, @NonNull Intent intent) {\n    if (Build.VERSION.SDK_INT &gt;= 26) {\n        context.startForegroundService(intent);\n    } else {\n        // Pre-O behavior.\n        context.startService(intent);\n    }\n}\n</code></pre>\n\n<p>Just call <code>ContextCompat.startForegroundService(this, pushIntent)</code>.</p>\n\n<p>And you need to move <code>startForeground</code> outside <code>if</code> block:</p>\n\n<pre><code>if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\n    ...        \n}\nstartForeground(1, builder.build());\n</code></pre>\n\n<p>Also, don't forget to call <code>notificationManagerCompat.notify(NOTIFICATION_ID, notification)</code> on older APIs (if notification doesn't show automatically). <code>NOTIFICATION_ID</code> must be NOT ZERO!!!</p>\n"}],"owner":{"account_id":7576335,"reputation":379,"user_id":5748603,"accept_rate":56,"display_name":"Andry Jhonas"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1962,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":3,"score":3,"last_activity_date":1683271011,"creation_date":1555412976,"question_id":55706796,"body_markdown":"I need to start my app service foreground. My code work fine with API level 26 and newer, but not with older APIs level. On older version Service is shown in running service but don&#39;t send the starting notification. What I need to change to my code, why isn&#39;t working?\r\n```\r\npublic void onCreate() {\r\n\t\tsuper.onCreate();\r\n\t\tmessageIntent.setAction(getString(R.string.receiver_receive));\r\n\r\n\r\n\r\n\t\tNotificationCompat.Builder builder = new NotificationCompat.Builder(this, NOTIFICATION_CHANNEL_ID_DEFAULT)\r\n\t\t\t\t.setOngoing(false).setSmallIcon(R.drawable.ic_launcher).setPriority(Notification.PRIORITY_MIN);\r\n\r\n\t\tif (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\r\n\t\t\tNotificationManager notificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);\r\n\t\t\tNotificationChannel notificationChannel = new NotificationChannel(NOTIFICATION_CHANNEL_ID_DEFAULT,\r\n\t\t\t\t\tNOTIFICATION_CHANNEL_ID_DEFAULT, NotificationManager.IMPORTANCE_LOW);\r\n\t\t\tnotificationChannel.setDescription(NOTIFICATION_CHANNEL_ID_DEFAULT);\r\n\t\t\tnotificationChannel.setSound(null, null);\r\n\t\t\tnotificationManager.createNotificationChannel(notificationChannel);\r\n\t\t\tstartForeground(1, builder.build());\r\n\t\t}\r\n\r\n\t}\r\n```\r\nStarting the Service\r\n```\r\nprotected void onStart() {\r\n\t\tsuper.onStart();\r\n\t\t// Bind to LocalService\r\n\t\tIntent intent = new Intent(this, SocketService.class);\r\n\t\tbindService(intent, serviceConnection, Context.BIND_AUTO_CREATE);\r\n\r\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O)\r\n            ContextCompat.startForegroundService(this, new Intent(this, SocketService.class));\r\n        else\r\n            this.startService(new Intent(this, SocketService.class));\r\n\t}\r\n```","title":"I am trying to start Foreground service on older API version. Work on APIs 26+","body":"<p>I need to start my app service foreground. My code work fine with API level 26 and newer, but not with older APIs level. On older version Service is shown in running service but don't send the starting notification. What I need to change to my code, why isn't working?</p>\n\n<pre><code>public void onCreate() {\n        super.onCreate();\n        messageIntent.setAction(getString(R.string.receiver_receive));\n\n\n\n        NotificationCompat.Builder builder = new NotificationCompat.Builder(this, NOTIFICATION_CHANNEL_ID_DEFAULT)\n                .setOngoing(false).setSmallIcon(R.drawable.ic_launcher).setPriority(Notification.PRIORITY_MIN);\n\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\n            NotificationManager notificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);\n            NotificationChannel notificationChannel = new NotificationChannel(NOTIFICATION_CHANNEL_ID_DEFAULT,\n                    NOTIFICATION_CHANNEL_ID_DEFAULT, NotificationManager.IMPORTANCE_LOW);\n            notificationChannel.setDescription(NOTIFICATION_CHANNEL_ID_DEFAULT);\n            notificationChannel.setSound(null, null);\n            notificationManager.createNotificationChannel(notificationChannel);\n            startForeground(1, builder.build());\n        }\n\n    }\n</code></pre>\n\n<p>Starting the Service</p>\n\n<pre><code>protected void onStart() {\n        super.onStart();\n        // Bind to LocalService\n        Intent intent = new Intent(this, SocketService.class);\n        bindService(intent, serviceConnection, Context.BIND_AUTO_CREATE);\n\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O)\n            ContextCompat.startForegroundService(this, new Intent(this, SocketService.class));\n        else\n            this.startService(new Intent(this, SocketService.class));\n    }\n</code></pre>\n"},{"tags":["java","oracle"],"answers":[{"tags":[],"owner":{"account_id":12926,"reputation":35063,"user_id":25714,"display_name":"Gary Myers"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1473231871,"creation_date":1473231871,"answer_id":39363265,"question_id":39363185,"body_markdown":"The archiver is responsible for taking the online redo logs and writing them off to a safe place in the event they are needed for a database recovery.\r\n\r\nCurrently they are unable to do this, so they are preventing any operation on the database until the DBA goes in to sort it all out.","title":"java.sql.SQLException: ORA-00257: Archiver error. Connect AS SYSDBA only until resolved","body":"<p>The archiver is responsible for taking the online redo logs and writing them off to a safe place in the event they are needed for a database recovery.</p>\n\n<p>Currently they are unable to do this, so they are preventing any operation on the database until the DBA goes in to sort it all out.</p>\n"},{"comments":[{"owner":{"account_id":7262967,"reputation":1077,"user_id":5538901,"accept_rate":84,"display_name":"kunz"},"score":0,"creation_date":1608696057,"post_id":57145689,"comment_id":115658048,"body_markdown":"if i run the above comment will it somehow affect the running of my application \nlike will it go down or somthing","body":"if i run the above comment will it somehow affect the running of my application  like will it go down or somthing"}],"tags":[],"owner":{"account_id":10558379,"reputation":569,"user_id":7778833,"display_name":"Amy Doxy"},"comment_count":1,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1563797084,"creation_date":1563797084,"answer_id":57145689,"question_id":39363185,"body_markdown":"You have to free up space by deleting archivelogs &amp; backups.\r\n\r\n 1. Use the rman(Recovery Manager) command. Just type rman on the command line\r\n 2. Connect to the target database\r\n[![Rman command and Connect to the target DB][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Q150Y.png\r\n 3. Delete backups using\r\n\r\n    `delete backup;`\r\nor only the obsolete backup files with:\r\n\r\n    `delete obsolete;`\r\n\r\n 4. Remove archive logs:\r\n\r\n    `delete force copy of archivelog all;`\r\n\r\n**Ref**: https://support.oracle.com/epmos/faces/DocumentDisplay?_afrLoop=153283327861734&amp;id=2340995.1&amp;_afrWindowMode=0&amp;_adf.ctrl-state=mku6itxsh_4","title":"java.sql.SQLException: ORA-00257: Archiver error. Connect AS SYSDBA only until resolved","body":"<p>You have to free up space by deleting archivelogs &amp; backups.</p>\n\n<ol>\n<li>Use the rman(Recovery Manager) command. Just type rman on the command line</li>\n<li><p>Connect to the target database\n<a href=\"https://i.stack.imgur.com/Q150Y.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/Q150Y.png\" alt=\"Rman command and Connect to the target DB\"></a></p></li>\n<li><p>Delete backups using</p>\n\n<p><code>delete backup;</code>\nor only the obsolete backup files with:</p>\n\n<p><code>delete obsolete;</code></p></li>\n<li><p>Remove archive logs:</p>\n\n<p><code>delete force copy of archivelog all;</code></p></li>\n</ol>\n\n<p><strong>Ref</strong>: <a href=\"https://support.oracle.com/epmos/faces/DocumentDisplay?_afrLoop=153283327861734&amp;id=2340995.1&amp;_afrWindowMode=0&amp;_adf.ctrl-state=mku6itxsh_4\" rel=\"noreferrer\">https://support.oracle.com/epmos/faces/DocumentDisplay?_afrLoop=153283327861734&amp;id=2340995.1&amp;_afrWindowMode=0&amp;_adf.ctrl-state=mku6itxsh_4</a></p>\n"},{"tags":[],"owner":{"account_id":463980,"reputation":6172,"user_id":867206,"accept_rate":14,"display_name":"Ajay Takur"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683270561,"creation_date":1683270561,"answer_id":76179618,"question_id":39363185,"body_markdown":"Since the Oracle archive is full. Create a maintenance job to perform a daily cleanup.","title":"java.sql.SQLException: ORA-00257: Archiver error. Connect AS SYSDBA only until resolved","body":"<p>Since the Oracle archive is full. Create a maintenance job to perform a daily cleanup.</p>\n"}],"owner":{"account_id":1908823,"reputation":2304,"user_id":1885666,"accept_rate":67,"display_name":"Developer Desk"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35310,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":39363265,"answer_count":3,"score":3,"last_activity_date":1683270561,"creation_date":1473231582,"question_id":39363185,"body_markdown":"I am getting below error while connecting to oracle database.\r\n\r\n    java.sql.SQLException: ORA-00257: Archiver error. Connect AS SYSDBA only until resolved.07-09-2016 12:25:44 ERROR DBUtils:122 - loginUser Exception :java.sql.SQLException: ORA-00257: Archiver error. Connect AS SYSDBA only until resolved.\r\n\r\n\tat oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:447)\r\n\tat oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:389)\r\n\tat oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:382)\r\n\tat oracle.jdbc.driver.T4CTTIoauthenticate.processError(T4CTTIoauthenticate.java:444)\r\n\tat oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:513)\r\n\tat oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:227)\r\n\tat oracle.jdbc.driver.T4CTTIoauthenticate.doOSESSKEY(T4CTTIoauthenticate.java:407)\r\n\tat oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:416)\r\n\tat oracle.jdbc.driver.PhysicalConnection.&lt;init&gt;(PhysicalConnection.java:553)\r\n\tat oracle.jdbc.driver.T4CConnection.&lt;init&gt;(T4CConnection.java:254)\r\n\tat oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:32)\r\n\tat oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:528)\r\n\tat java.sql.DriverManager.getConnection(Unknown Source)\r\n\tat java.sql.DriverManager.getConnection(Unknown Source)\r\n\tat com.sne.dao.DBUtils.loginUser(DBUtils.java:55)\r\n\tat com.sne.servlets.SELogin.doPost(SELogin.java:46)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:641)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:722)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)\r\n\tat org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:562)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:395)\r\n\tat org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:306)\r\n\tat org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:323)\r\n\tat org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1719)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\r\n\tat java.lang.Thread.run(Unknown Source)\r\n\r\nError While Connecting db through SQL Developer...\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/8Fzp5.png","title":"java.sql.SQLException: ORA-00257: Archiver error. Connect AS SYSDBA only until resolved","body":"<p>I am getting below error while connecting to oracle database.</p>\n\n<pre><code>java.sql.SQLException: ORA-00257: Archiver error. Connect AS SYSDBA only until resolved.07-09-2016 12:25:44 ERROR DBUtils:122 - loginUser Exception :java.sql.SQLException: ORA-00257: Archiver error. Connect AS SYSDBA only until resolved.\n\nat oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:447)\nat oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:389)\nat oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:382)\nat oracle.jdbc.driver.T4CTTIoauthenticate.processError(T4CTTIoauthenticate.java:444)\nat oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:513)\nat oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:227)\nat oracle.jdbc.driver.T4CTTIoauthenticate.doOSESSKEY(T4CTTIoauthenticate.java:407)\nat oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:416)\nat oracle.jdbc.driver.PhysicalConnection.&lt;init&gt;(PhysicalConnection.java:553)\nat oracle.jdbc.driver.T4CConnection.&lt;init&gt;(T4CConnection.java:254)\nat oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:32)\nat oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:528)\nat java.sql.DriverManager.getConnection(Unknown Source)\nat java.sql.DriverManager.getConnection(Unknown Source)\nat com.sne.dao.DBUtils.loginUser(DBUtils.java:55)\nat com.sne.servlets.SELogin.doPost(SELogin.java:46)\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:641)\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:722)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\nat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)\nat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164)\nat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)\nat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)\nat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)\nat org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:562)\nat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)\nat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:395)\nat org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:306)\nat org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:323)\nat org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1719)\nat java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)\nat java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\nat java.lang.Thread.run(Unknown Source)\n</code></pre>\n\n<p>Error While Connecting db through SQL Developer...</p>\n\n<p><a href=\"https://i.stack.imgur.com/8Fzp5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8Fzp5.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":["java","visual-studio-code","autocomplete"],"comments":[{"owner":{"account_id":15396644,"reputation":25775,"user_id":11107541,"display_name":"starball"},"score":0,"creation_date":1682287719,"post_id":76086677,"comment_id":134187443,"body_markdown":"loosely related (not an answer): https://stackoverflow.com/a/75933450/11107541","body":"loosely related (not an answer): <a href=\"https://stackoverflow.com/a/75933450/11107541\">stackoverflow.com/a/75933450/11107541</a>"},{"owner":{"account_id":444493,"reputation":151950,"user_id":836330,"display_name":"Mark"},"score":0,"creation_date":1682540035,"post_id":76086677,"comment_id":134234081,"body_markdown":"May be `parameter hints` , disable the setting with that name.","body":"May be <code>parameter hints</code> , disable the setting with that name."}],"answers":[{"tags":[],"owner":{"account_id":25311208,"reputation":7305,"user_id":19133920,"display_name":"JialeDu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683269924,"creation_date":1683269924,"answer_id":76179560,"question_id":76086677,"body_markdown":"Search for `java.signatureHelp.enabled` in the **Settings** panel and uncheck it.\r\n\r\n[![enter image description here][1]][1]\r\n\r\nOr add the following configuration in *settings.json*:\r\n\r\n```json\r\n\t&quot;java.signatureHelp.enabled&quot;: false,\r\n```\r\n\r\n  [1]: https://i.stack.imgur.com/WZUvJ.png","title":"Disable parameter selection after completing &quot;sout&quot; in vscode","body":"<p>Search for <code>java.signatureHelp.enabled</code> in the <strong>Settings</strong> panel and uncheck it.</p>\n<p><a href=\"https://i.stack.imgur.com/WZUvJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WZUvJ.png\" alt=\"enter image description here\" /></a></p>\n<p>Or add the following configuration in <em>settings.json</em>:</p>\n<pre class=\"lang-json prettyprint-override\"><code>    &quot;java.signatureHelp.enabled&quot;: false,\n</code></pre>\n"}],"owner":{"account_id":28141578,"reputation":11,"user_id":21504533,"display_name":"Cristobal Sanchez"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1683269924,"creation_date":1682275969,"question_id":76086677,"body_markdown":"After I write \r\n`sout`\r\nand use auto completion for it to be `System.out.println();`&lt;br&gt;&lt;br&gt;\r\n\r\nIt shows this &lt;BR&gt;\r\n[![enter image description here][1]][1]\r\n&lt;BR&gt;\r\nand I want to disable it..\r\nHope someone can help me, thanks in advance!\r\n\r\nI tried many configurations related to `editor.suggest` in `vscode settings.json` but couldn&#39;t find the correct one.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/3rzri.png","title":"Disable parameter selection after completing &quot;sout&quot; in vscode","body":"<p>After I write\n<code>sout</code>\nand use auto completion for it to be <code>System.out.println();</code><br><br></p>\n<p>It shows this <BR>\n<a href=\"https://i.stack.imgur.com/3rzri.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3rzri.png\" alt=\"enter image description here\" /></a>\n<BR>\nand I want to disable it..\nHope someone can help me, thanks in advance!</p>\n<p>I tried many configurations related to <code>editor.suggest</code> in <code>vscode settings.json</code> but couldn't find the correct one.</p>\n"},{"tags":["java","multithreading"],"answers":[{"tags":[],"owner":{"account_id":292208,"reputation":10665,"user_id":2245707,"accept_rate":17,"display_name":"pveentjer"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683269875,"creation_date":1683189240,"answer_id":76171129,"question_id":76170613,"body_markdown":"The benefit is performance.\r\n\r\nA &#39;state = NORMAL&#39; leads to a volatile store since &#39;state&#39; is a volatile variable. The putOrderInt is a release store. On modern JDK&#39;s you will see that a &#39;STATE.setRelease(this, NORMAL);&#39; is used. A volatile store is typically much more expensive than a release store because it has more strict memory ordering guarantees.\r\n\r\nOn the X86 a volatile store typically is followed by [StoreLoad] fence which causes subsequent loads to wait till the store buffer has been drained. And this can take time because the core can only commit the store to the coherent cache, once the cache line on the other cores has been invalidated. On the X86, every store is a release store, so you don&#39;t need any memory fences (the primary purpose is to control the JIT). And as a consequence, the core can execute more instructions per time unit.\r\n\r\nNote: Correctly synchronized programs in Java can only have sequential consistent executions. For sequential consistency, the real-time order isn&#39;t relevant. So it doesn&#39;t make a lot of sense to talk in terms of &#39;immediately visible&#39; since the Java memory model doesn&#39;t require it. If the real-time order is relevant, then you need to have a look at linearizability (which isn&#39;t part of the JMM). A volatile store will not make that store visible any faster to other cores compared to a release store; the store buffer is already being drained as fast as possible.","title":"UNSAFE.putOrderedInt(this, stateOffset, NORMAL); in FutureTask","body":"<p>The benefit is performance.</p>\n<p>A 'state = NORMAL' leads to a volatile store since 'state' is a volatile variable. The putOrderInt is a release store. On modern JDK's you will see that a 'STATE.setRelease(this, NORMAL);' is used. A volatile store is typically much more expensive than a release store because it has more strict memory ordering guarantees.</p>\n<p>On the X86 a volatile store typically is followed by [StoreLoad] fence which causes subsequent loads to wait till the store buffer has been drained. And this can take time because the core can only commit the store to the coherent cache, once the cache line on the other cores has been invalidated. On the X86, every store is a release store, so you don't need any memory fences (the primary purpose is to control the JIT). And as a consequence, the core can execute more instructions per time unit.</p>\n<p>Note: Correctly synchronized programs in Java can only have sequential consistent executions. For sequential consistency, the real-time order isn't relevant. So it doesn't make a lot of sense to talk in terms of 'immediately visible' since the Java memory model doesn't require it. If the real-time order is relevant, then you need to have a look at linearizability (which isn't part of the JMM). A volatile store will not make that store visible any faster to other cores compared to a release store; the store buffer is already being drained as fast as possible.</p>\n"}],"owner":{"account_id":24792239,"reputation":413,"user_id":18675173,"display_name":"lant"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":86,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1683269875,"creation_date":1683185561,"question_id":76170613,"body_markdown":"What are the benefits of using &quot;UNSAFE.putOrderedInt(this, stateOffset, NORMAL);&quot;\r\n\r\nIn FutureTask class, the method to set outcome value is\r\n\r\n```\r\n    protected void set(V v) {\r\n        if (UNSAFE.compareAndSwapInt(this, stateOffset, NEW, COMPLETING)) {\r\n            outcome = v;\r\n            UNSAFE.putOrderedInt(this, stateOffset, NORMAL); // final state\r\n            finishCompletion();\r\n        }\r\n    }\r\n```\r\ni am confused about `UNSAFE.putOrderedInt(this, stateOffset, NORMAL);`why not change the state dirctly like this `state = NORMARL`,and use `putOrderedInt` method to modify the value is not immediately visible to other threads.\r\nI don&#39;t understand what is the advantage of using `UNSAFE.putOrderedInt(this, stateOffset, NORMAL);`","title":"UNSAFE.putOrderedInt(this, stateOffset, NORMAL); in FutureTask","body":"<p>What are the benefits of using &quot;UNSAFE.putOrderedInt(this, stateOffset, NORMAL);&quot;</p>\n<p>In FutureTask class, the method to set outcome value is</p>\n<pre><code>    protected void set(V v) {\n        if (UNSAFE.compareAndSwapInt(this, stateOffset, NEW, COMPLETING)) {\n            outcome = v;\n            UNSAFE.putOrderedInt(this, stateOffset, NORMAL); // final state\n            finishCompletion();\n        }\n    }\n</code></pre>\n<p>i am confused about <code>UNSAFE.putOrderedInt(this, stateOffset, NORMAL);</code>why not change the state dirctly like this <code>state = NORMARL</code>,and use <code>putOrderedInt</code> method to modify the value is not immediately visible to other threads.\nI don't understand what is the advantage of using <code>UNSAFE.putOrderedInt(this, stateOffset, NORMAL);</code></p>\n"},{"tags":["java","jersey","logback","jersey-1.0","jul-to-slf4j"],"answers":[{"tags":[],"owner":{"account_id":97926,"reputation":823,"user_id":265374,"accept_rate":75,"display_name":"reddot"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683268470,"creation_date":1683268470,"answer_id":76179397,"question_id":34414464,"body_markdown":"The `logging.properties` file should reside on the filesystem (not on class path). And it&#39;s path should be specified via system property `java.util.logging.config.file`:\r\n\r\n```\r\njava -Djava.util.logging.config.file=/path/to/logging.properties ...\r\n```","title":"SLF4JBridgeHandler installation via logging.properties configuration file doesn&#39;t work","body":"<p>The <code>logging.properties</code> file should reside on the filesystem (not on class path). And it's path should be specified via system property <code>java.util.logging.config.file</code>:</p>\n<pre><code>java -Djava.util.logging.config.file=/path/to/logging.properties ...\n</code></pre>\n"}],"owner":{"account_id":6390719,"reputation":1108,"user_id":4956989,"accept_rate":82,"display_name":"Alex Karasev"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":713,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":1,"score":6,"last_activity_date":1683268470,"creation_date":1450782461,"question_id":34414464,"body_markdown":"I have a project and I use:\r\n\r\n - Apache Maven 3.3.3\r\n - Project Jersey 1.17\r\n - Spring 3.3.1\r\n - Tomcat 6\r\n - Eclipse IDE\r\n\r\nI need to log requests and responses. To achieve it I added LoggingFilter to my `web.xml`:\r\n\r\n    &lt;init-param&gt;\r\n         &lt;param-name&gt;com.sun.jersey.spi.container.ContainerRequestFilters&lt;/param-name&gt;\r\n         &lt;param-value&gt;com.sun.jersey.api.container.filter.LoggingFilter&lt;/param-value&gt;\r\n     &lt;/init-param&gt;\r\n     &lt;init-param&gt;\r\n         &lt;param-name&gt;com.sun.jersey.spi.container.ContainerResponseFilters&lt;/param-name&gt;\r\n         &lt;param-value&gt;com.sun.jersey.api.container.filter.LoggingFilter&lt;/param-value&gt;\r\n     &lt;/init-param&gt;\r\n\r\nI run project in Eclipse and see logging at the Eclipse Console.\r\n\r\nNow, I want to use Logback to write log files and to use custom appenders, so I added to my `pom.xml`:\r\n\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;logback-classic&lt;/artifactId&gt;\r\n    \t&lt;version&gt;1.1.3&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\r\n    \t&lt;version&gt;1.7.13&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;jul-to-slf4j&lt;/artifactId&gt;\r\n    \t&lt;version&gt;1.7.13&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nTo route all JUL log records to the SLF4J API, I use `org.slf4j.bridge.SLF4JBridgeHandler`\r\n\r\nI tried to install SLF4JBridgeHandler by creating `src/main/resources/logging.properties` with the content:\r\n\r\n    handlers = org.slf4j.bridge.SLF4JBridgeHandler\r\n\r\nas it mentioned [here][1] and nothing was happening.\r\n\r\nIf I use another approach (Programmatic installation) everything works fine.\r\n\r\nWhy doesn&#39;t it work with `logging.properties` config? What did I miss? \r\n\r\n\r\n\r\n  [1]: http://www.slf4j.org/api/org/slf4j/bridge/SLF4JBridgeHandler.html","title":"SLF4JBridgeHandler installation via logging.properties configuration file doesn&#39;t work","body":"<p>I have a project and I use:</p>\n\n<ul>\n<li>Apache Maven 3.3.3</li>\n<li>Project Jersey 1.17</li>\n<li>Spring 3.3.1</li>\n<li>Tomcat 6</li>\n<li>Eclipse IDE</li>\n</ul>\n\n<p>I need to log requests and responses. To achieve it I added LoggingFilter to my <code>web.xml</code>:</p>\n\n<pre><code>&lt;init-param&gt;\n     &lt;param-name&gt;com.sun.jersey.spi.container.ContainerRequestFilters&lt;/param-name&gt;\n     &lt;param-value&gt;com.sun.jersey.api.container.filter.LoggingFilter&lt;/param-value&gt;\n &lt;/init-param&gt;\n &lt;init-param&gt;\n     &lt;param-name&gt;com.sun.jersey.spi.container.ContainerResponseFilters&lt;/param-name&gt;\n     &lt;param-value&gt;com.sun.jersey.api.container.filter.LoggingFilter&lt;/param-value&gt;\n &lt;/init-param&gt;\n</code></pre>\n\n<p>I run project in Eclipse and see logging at the Eclipse Console.</p>\n\n<p>Now, I want to use Logback to write log files and to use custom appenders, so I added to my <code>pom.xml</code>:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\n    &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;\n    &lt;version&gt;1.1.3&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n    &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n    &lt;version&gt;1.7.13&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n    &lt;artifactId&gt;jul-to-slf4j&lt;/artifactId&gt;\n    &lt;version&gt;1.7.13&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>To route all JUL log records to the SLF4J API, I use <code>org.slf4j.bridge.SLF4JBridgeHandler</code></p>\n\n<p>I tried to install SLF4JBridgeHandler by creating <code>src/main/resources/logging.properties</code> with the content:</p>\n\n<pre><code>handlers = org.slf4j.bridge.SLF4JBridgeHandler\n</code></pre>\n\n<p>as it mentioned <a href=\"http://www.slf4j.org/api/org/slf4j/bridge/SLF4JBridgeHandler.html\" rel=\"nofollow\">here</a> and nothing was happening.</p>\n\n<p>If I use another approach (Programmatic installation) everything works fine.</p>\n\n<p>Why doesn't it work with <code>logging.properties</code> config? What did I miss? </p>\n"},{"tags":["java","windows","tomcat","server","tomcat9"],"answers":[{"comments":[{"owner":{"account_id":25318767,"reputation":3,"user_id":19140415,"display_name":"Tony Cheng"},"score":0,"creation_date":1683271491,"post_id":76179393,"comment_id":134344213,"body_markdown":"Oh are they the same thing?","body":"Oh are they the same thing?"},{"owner":{"account_id":12743722,"reputation":19966,"user_id":12567365,"display_name":"andrewJames"},"score":0,"creation_date":1683291396,"post_id":76179393,"comment_id":134348242,"body_markdown":"@kkid - What specific changes are you recommending? The screenshot in the question already uses `2048m` for both `Xms` and `Xmx`. (If you really do mean to set the value to `2048`, then that is 2048 bytes, not megabytes.)","body":"@kkid - What specific changes are you recommending? The screenshot in the question already uses <code>2048m</code> for both <code>Xms</code> and <code>Xmx</code>. (If you really do mean to set the value to <code>2048</code>, then that is 2048 bytes, not megabytes.)"},{"owner":{"account_id":12743722,"reputation":19966,"user_id":12567365,"display_name":"andrewJames"},"score":0,"creation_date":1683291715,"post_id":76179393,"comment_id":134348325,"body_markdown":"@TonyCheng - it is not uncommon to set `Xms` and `Xmx` to the same value at startup. That means the minimum and maximum memory allocations will be the same amount. So, the server starts, it allocates 2048 megabytes immediately - and then that value does not change over time. By contrast if you set `Xms`  to `2048m` and `Xmx` to `4096m`, then Tomcat will start with 2048 megabytes - but that could increase, over time, to 4096 megabytes. Some people prefer to get the allocation done once, up-front, to avoid the cost of doing further re-allocations over time.","body":"@TonyCheng - it is not uncommon to set <code>Xms</code> and <code>Xmx</code> to the same value at startup. That means the minimum and maximum memory allocations will be the same amount. So, the server starts, it allocates 2048 megabytes immediately - and then that value does not change over time. By contrast if you set <code>Xms</code>  to <code>2048m</code> and <code>Xmx</code> to <code>4096m</code>, then Tomcat will start with 2048 megabytes - but that could increase, over time, to 4096 megabytes. Some people prefer to get the allocation done once, up-front, to avoid the cost of doing further re-allocations over time."}],"tags":[],"owner":{"account_id":10171463,"reputation":71,"user_id":7511632,"display_name":"kkid"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683268443,"creation_date":1683268443,"answer_id":76179393,"question_id":76178627,"body_markdown":"In the screenshot you shared, there is an &quot;Initial Memory Pool&quot; and a &quot;Maximum Memory Pool&quot;. For Xms, set the value 2048 in the &quot;Initial Memory Pool&quot; and for Xmx, set the value 2048 in the &quot;Maximum Memory Pool&quot;.\r\n\r\nAfter the change, restart the tomcat service.","title":"Tomcat 9 heap memory setting issue","body":"<p>In the screenshot you shared, there is an &quot;Initial Memory Pool&quot; and a &quot;Maximum Memory Pool&quot;. For Xms, set the value 2048 in the &quot;Initial Memory Pool&quot; and for Xmx, set the value 2048 in the &quot;Maximum Memory Pool&quot;.</p>\n<p>After the change, restart the tomcat service.</p>\n"}],"owner":{"account_id":25318767,"reputation":3,"user_id":19140415,"display_name":"Tony Cheng"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":474,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683268443,"creation_date":1683256949,"question_id":76178627,"body_markdown":"Hi my tomcat 9 is running as windows service, the instruction is to set this in the startup script\r\n\r\n```\r\nset JAVA_OPTS=-Xms2048m -Xmx2048m;\r\n```\r\n\r\nHowever i think i dont have startup script because it is a service?\r\nso i went to the Configuration and did this instead\r\n\r\n[This is the configuration i did](https://i.stack.imgur.com/cH8OB.png)\r\n\r\nIs this the correct way?\r\n\r\nso i went to the Configuration and add \r\n```\r\n-Xms2048m \r\n-Xmx2048m\r\n```\r\nin the java options","title":"Tomcat 9 heap memory setting issue","body":"<p>Hi my tomcat 9 is running as windows service, the instruction is to set this in the startup script</p>\n<pre><code>set JAVA_OPTS=-Xms2048m -Xmx2048m;\n</code></pre>\n<p>However i think i dont have startup script because it is a service?\nso i went to the Configuration and did this instead</p>\n<p><a href=\"https://i.stack.imgur.com/cH8OB.png\" rel=\"nofollow noreferrer\">This is the configuration i did</a></p>\n<p>Is this the correct way?</p>\n<p>so i went to the Configuration and add</p>\n<pre><code>-Xms2048m \n-Xmx2048m\n</code></pre>\n<p>in the java options</p>\n"},{"tags":["java","docker","jwt","quarkus","secret-key"],"comments":[{"owner":{"account_id":5745825,"reputation":11553,"user_id":4537090,"accept_rate":79,"display_name":"WesternGun"},"score":0,"creation_date":1683268458,"post_id":76156537,"comment_id":134343620,"body_markdown":"Maybe the way I use AES key is not correct... now when I think of it, `SecretKeySpec` does not check key type and is only used for DES key...","body":"Maybe the way I use AES key is not correct... now when I think of it, <code>SecretKeySpec</code> does not check key type and is only used for DES key..."}],"owner":{"account_id":5745825,"reputation":11553,"user_id":4537090,"accept_rate":79,"display_name":"WesternGun"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1683268318,"creation_date":1683041731,"question_id":76156537,"body_markdown":"I encountered some weird problem while reading a secret key file in Quarkus/Docker only getting 29 bytes while in unit test I got 32 bytes. That causes unit tests passing but integration tests not passing and local docker image running failing. \r\n\r\nThe exception shown in the log is: (from nimbusds.jose, not directly from Quarkus)\r\n\r\n```java\r\nCaused by: com.nimbusds.jose.JOSEException: AES/GCM/NoPadding decryption failed: Tag mismatch!\r\n\tat com.nimbusds.jose.crypto.impl.AESGCM.decrypt(AESGCM.java:301)\r\n\tat com.nimbusds.jose.crypto.impl.ContentCryptoProvider.decrypt(ContentCryptoProvider.java:279)\r\n\tat com.nimbusds.jose.crypto.DirectDecrypter.decrypt(DirectDecrypter.java:271)\r\n\tat com.nimbusds.jose.JWEObject.decrypt(JWEObject.java:415)\r\n\tat com.org.TokenParser.parseToken(TokenParser.java:38)\r\n\t... 13 more\r\nCaused by: javax.crypto.AEADBadTagException: Tag mismatch!\r\n\tat java.base/com.sun.crypto.provider.GaloisCounterMode.decryptFinal(GaloisCounterMode.java:623)\r\n\tat java.base/com.sun.crypto.provider.CipherCore.finalNoPadding(CipherCore.java:1116)\r\n\tat java.base/com.sun.crypto.provider.CipherCore.fillOutputBuffer(CipherCore.java:1053)\r\n\tat java.base/com.sun.crypto.provider.CipherCore.doFinal(CipherCore.java:853)\r\n\tat java.base/com.sun.crypto.provider.AESCipher.engineDoFinal(AESCipher.java:446)\r\n\tat java.base/javax.crypto.Cipher.doFinal(Cipher.java:2202)\r\n\tat com.nimbusds.jose.crypto.impl.AESGCM.decrypt(AESGCM.java:297)\r\n```\r\n\r\nI suspect the mismatch of size of key caused this problem, as 32 bytes are needed for a 256 bits key but only 29 bytes are found.\r\n\r\nIn short, I need to activate a key file and decrypt a JWT token. In local unit/int test, I use a file under `src/test/resource`; in prod, there is a file loaded into a data volume in Openshift. In the code I first try to find the file under `/opt/data/environment`; if not found, fallback to `src/test/resources`. The application deployed in cloud is fine(reading 32 bytes and no exception), problem is in local. \r\n\r\n\r\nThe related code:\r\nJWT decryption:\r\n\r\n```java\r\nimport com.nimbusds.jose.JWEDecrypter;\r\nimport com.nimbusds.jose.crypto.factories.DefaultJWEDecrypterFactory;\r\nimport com.nimbusds.jwt.EncryptedJWT;\r\nimport com.nimbusds.jwt.JWTClaimsSet;\r\n...\r\nEncryptedJWT jwt = EncryptedJWT.parse(token);\r\nDefaultJWEDecrypterFactory factory = new DefaultJWEDecrypterFactory();\r\nJWEDecrypter decrypter = factory.createJWEDecrypter(jwt.getHeader(), this.secretKey);\r\njwt.decrypt(decrypter); // &lt;&lt;&lt;&lt;&lt;&lt; here padding error\r\n```\r\n\r\nCreating secretKey:\r\n\r\n```java\r\nSecretKeySpec secretKey = new SecretKeySpec(data,&quot;AES&quot;);\r\n```\r\n\r\nReading key data: \r\n```java\r\nInputStream keyFileStream = TokenHandler.class.getResourceAsStream(&quot;/key.shared&quot;); // reading from src/main/resources\r\nkeyFileBytes = readKeyFromInputStream(keyFileStream);\r\n...\r\n```\r\n\r\nand\r\n\r\n```java\r\n    static byte[] readKeyFromInputStream(final InputStream sharedKeyStream) throws IOException, NoSuchAlgorithmException {\r\n        byte[] keyBytes;\r\n        if (sharedKeyStream == null) {\r\n            keyBytes = autoGenerateKey();\r\n        } else {\r\n            keyBytes = new byte[sharedKeyStream.available()]; // 32 bytes available\r\n            // Only 29 bytes will be read if using &quot;read(keyBytes)&quot;, must read explicitly till 32 bytes\r\n            int count = sharedKeyStream.read(keyBytes, 0, 32);\r\n            LOG.infof(&quot;Activating security token handler with key from input stream (length = %d bytes)&quot;, count);\r\n            //if (count != 32) {\r\n            //    throw new IOException(&quot;Key read bytes length does not match expected number(32), cannot initialize key!&quot;);\r\n            //}\r\n        }\r\n        return keyBytes;\r\n    }\r\n```\r\n\r\nUnit test that passes:\r\n\r\n```java\r\n    @Test\r\n    void shouldRead32BytesFromInputStream() throws IOException, NoSuchAlgorithmException {\r\n        // given\r\n        InputStream keyFileStream = TokenHandlerTest.class.getResourceAsStream(&quot;/key.shared&quot;);\r\n\r\n        // when\r\n        byte[] keyFileBytes = TokenHandler.readKeyFromInputStream(keyFileStream);\r\n\r\n        // then\r\n        assertEquals(32, keyFileBytes.length);\r\n    }\r\n```\r\n\r\nEven I read 32 bytes explicitly, I cannot eliminate the original exception, as in int test, only 29 bytes found.\r\n\r\nOf course, in Quarkus int test, the application jar is used, where the key is packaged into. I think that file in jar is used; but even checking the file size in jar, it&#39;s still 32 bytes. I don&#39;t know where the 29 bytes coming from. \r\n\r\n\r\nSo:\r\n\r\n - is my original exception related to key length difference?\r\n - how to solve it in integration test so that I still load local file but got 32 bytes?\r\n\r\nThe file has 32 bytes, as shown by Gnome Files manager and `wc -c`. I am working on Linux, Docker container is also based on Linux, where also only 29 bytes are read in `docker run`. \r\n\r\n---\r\n\r\nAND: if I put the same file under `src/jib/opt/data/environment`, jib maven plugin will include that file into the docker image, and image running is fine now. So why??? \r\n\r\n---\r\n\r\nAnother update: if I replace the key file with a file with exact 32 bytes of text, 32 bytes are read, and the integration test works. So there is something wrong with this key file that got compressed while creating jar, which is not compressed when key file is plain text file?? The text key file is:\r\n\r\n    long-secret-key-for-256-bits-key\r\n\r\nThe original key file: (got from `od`)\r\n\r\n    ��Y&quot;dpq����n��b�v&quot;G:�/����_���\r\n\r\nIn hex:\r\n\r\n```\r\n$ od -t x1 key.shared\r\n0000000 xx ec ba 59 22 64 70 71 d6 f7 xx 8f 6e f1 f8 xx\r\n0000020 xx 76 22 47 3a xx 2f bd e6 95 d9 5f dd f6 xx e9\r\n0000040\r\n```\r\n(some part hidden with `xx`)\r\n\r\n\r\nThat could be because the original key file is used everywhere, but I am the first one doing integration test like this in my team; maybe it has always been loaded directly as data volume, not in a jar.\r\n","title":"Quarkus - integration tests and docker image both reading only 29 bytes of key file, while unit test reading 32 bytes","body":"<p>I encountered some weird problem while reading a secret key file in Quarkus/Docker only getting 29 bytes while in unit test I got 32 bytes. That causes unit tests passing but integration tests not passing and local docker image running failing.</p>\n<p>The exception shown in the log is: (from nimbusds.jose, not directly from Quarkus)</p>\n<pre class=\"lang-java prettyprint-override\"><code>Caused by: com.nimbusds.jose.JOSEException: AES/GCM/NoPadding decryption failed: Tag mismatch!\n    at com.nimbusds.jose.crypto.impl.AESGCM.decrypt(AESGCM.java:301)\n    at com.nimbusds.jose.crypto.impl.ContentCryptoProvider.decrypt(ContentCryptoProvider.java:279)\n    at com.nimbusds.jose.crypto.DirectDecrypter.decrypt(DirectDecrypter.java:271)\n    at com.nimbusds.jose.JWEObject.decrypt(JWEObject.java:415)\n    at com.org.TokenParser.parseToken(TokenParser.java:38)\n    ... 13 more\nCaused by: javax.crypto.AEADBadTagException: Tag mismatch!\n    at java.base/com.sun.crypto.provider.GaloisCounterMode.decryptFinal(GaloisCounterMode.java:623)\n    at java.base/com.sun.crypto.provider.CipherCore.finalNoPadding(CipherCore.java:1116)\n    at java.base/com.sun.crypto.provider.CipherCore.fillOutputBuffer(CipherCore.java:1053)\n    at java.base/com.sun.crypto.provider.CipherCore.doFinal(CipherCore.java:853)\n    at java.base/com.sun.crypto.provider.AESCipher.engineDoFinal(AESCipher.java:446)\n    at java.base/javax.crypto.Cipher.doFinal(Cipher.java:2202)\n    at com.nimbusds.jose.crypto.impl.AESGCM.decrypt(AESGCM.java:297)\n</code></pre>\n<p>I suspect the mismatch of size of key caused this problem, as 32 bytes are needed for a 256 bits key but only 29 bytes are found.</p>\n<p>In short, I need to activate a key file and decrypt a JWT token. In local unit/int test, I use a file under <code>src/test/resource</code>; in prod, there is a file loaded into a data volume in Openshift. In the code I first try to find the file under <code>/opt/data/environment</code>; if not found, fallback to <code>src/test/resources</code>. The application deployed in cloud is fine(reading 32 bytes and no exception), problem is in local.</p>\n<p>The related code:\nJWT decryption:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import com.nimbusds.jose.JWEDecrypter;\nimport com.nimbusds.jose.crypto.factories.DefaultJWEDecrypterFactory;\nimport com.nimbusds.jwt.EncryptedJWT;\nimport com.nimbusds.jwt.JWTClaimsSet;\n...\nEncryptedJWT jwt = EncryptedJWT.parse(token);\nDefaultJWEDecrypterFactory factory = new DefaultJWEDecrypterFactory();\nJWEDecrypter decrypter = factory.createJWEDecrypter(jwt.getHeader(), this.secretKey);\njwt.decrypt(decrypter); // &lt;&lt;&lt;&lt;&lt;&lt; here padding error\n</code></pre>\n<p>Creating secretKey:</p>\n<pre class=\"lang-java prettyprint-override\"><code>SecretKeySpec secretKey = new SecretKeySpec(data,&quot;AES&quot;);\n</code></pre>\n<p>Reading key data:</p>\n<pre class=\"lang-java prettyprint-override\"><code>InputStream keyFileStream = TokenHandler.class.getResourceAsStream(&quot;/key.shared&quot;); // reading from src/main/resources\nkeyFileBytes = readKeyFromInputStream(keyFileStream);\n...\n</code></pre>\n<p>and</p>\n<pre class=\"lang-java prettyprint-override\"><code>    static byte[] readKeyFromInputStream(final InputStream sharedKeyStream) throws IOException, NoSuchAlgorithmException {\n        byte[] keyBytes;\n        if (sharedKeyStream == null) {\n            keyBytes = autoGenerateKey();\n        } else {\n            keyBytes = new byte[sharedKeyStream.available()]; // 32 bytes available\n            // Only 29 bytes will be read if using &quot;read(keyBytes)&quot;, must read explicitly till 32 bytes\n            int count = sharedKeyStream.read(keyBytes, 0, 32);\n            LOG.infof(&quot;Activating security token handler with key from input stream (length = %d bytes)&quot;, count);\n            //if (count != 32) {\n            //    throw new IOException(&quot;Key read bytes length does not match expected number(32), cannot initialize key!&quot;);\n            //}\n        }\n        return keyBytes;\n    }\n</code></pre>\n<p>Unit test that passes:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Test\n    void shouldRead32BytesFromInputStream() throws IOException, NoSuchAlgorithmException {\n        // given\n        InputStream keyFileStream = TokenHandlerTest.class.getResourceAsStream(&quot;/key.shared&quot;);\n\n        // when\n        byte[] keyFileBytes = TokenHandler.readKeyFromInputStream(keyFileStream);\n\n        // then\n        assertEquals(32, keyFileBytes.length);\n    }\n</code></pre>\n<p>Even I read 32 bytes explicitly, I cannot eliminate the original exception, as in int test, only 29 bytes found.</p>\n<p>Of course, in Quarkus int test, the application jar is used, where the key is packaged into. I think that file in jar is used; but even checking the file size in jar, it's still 32 bytes. I don't know where the 29 bytes coming from.</p>\n<p>So:</p>\n<ul>\n<li>is my original exception related to key length difference?</li>\n<li>how to solve it in integration test so that I still load local file but got 32 bytes?</li>\n</ul>\n<p>The file has 32 bytes, as shown by Gnome Files manager and <code>wc -c</code>. I am working on Linux, Docker container is also based on Linux, where also only 29 bytes are read in <code>docker run</code>.</p>\n<hr />\n<p>AND: if I put the same file under <code>src/jib/opt/data/environment</code>, jib maven plugin will include that file into the docker image, and image running is fine now. So why???</p>\n<hr />\n<p>Another update: if I replace the key file with a file with exact 32 bytes of text, 32 bytes are read, and the integration test works. So there is something wrong with this key file that got compressed while creating jar, which is not compressed when key file is plain text file?? The text key file is:</p>\n<pre><code>long-secret-key-for-256-bits-key\n</code></pre>\n<p>The original key file: (got from <code>od</code>)</p>\n<pre><code>��Y&quot;dpq����n��b�v&quot;G:�/����_���\n</code></pre>\n<p>In hex:</p>\n<pre><code>$ od -t x1 key.shared\n0000000 xx ec ba 59 22 64 70 71 d6 f7 xx 8f 6e f1 f8 xx\n0000020 xx 76 22 47 3a xx 2f bd e6 95 d9 5f dd f6 xx e9\n0000040\n</code></pre>\n<p>(some part hidden with <code>xx</code>)</p>\n<p>That could be because the original key file is used everywhere, but I am the first one doing integration test like this in my team; maybe it has always been loaded directly as data volume, not in a jar.</p>\n"},{"tags":["java","maven","pom.xml"],"comments":[{"owner":{"display_name":"user180100"},"score":2,"creation_date":1379583879,"post_id":18891204,"comment_id":27883323,"body_markdown":"possible duplicate of [How to get Maven Artifact version at runtime?](http://stackoverflow.com/questions/2712970/how-to-get-maven-artifact-version-at-runtime)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/2712970/how-to-get-maven-artifact-version-at-runtime\">How to get Maven Artifact version at runtime?</a>"},{"owner":{"account_id":903413,"reputation":446,"user_id":938909,"accept_rate":29,"display_name":"Sandiip Patil"},"score":0,"creation_date":1379589586,"post_id":18891204,"comment_id":27886457,"body_markdown":"Possibly but as it says one needs to modify the &lt;archive&gt; config in order to write the details. Also I am trying to find from war and it gives from Jar. correct me if I am wrong.","body":"Possibly but as it says one needs to modify the &lt;archive&gt; config in order to write the details. Also I am trying to find from war and it gives from Jar. correct me if I am wrong."},{"owner":{"account_id":206155,"reputation":1254,"user_id":455269,"display_name":"cr7pt0gr4ph7"},"score":0,"creation_date":1398034260,"post_id":18891204,"comment_id":35466484,"body_markdown":"@SandiipPatil AFAIC a WAR has the same internal format as a JAR, it just has a different file extension. As said [here](http://maven.apache.org/guides/mini/guide-archive-configuration.html) the &lt;archive/&gt; config should also work with WARs.","body":"@SandiipPatil AFAIC a WAR has the same internal format as a JAR, it just has a different file extension. As said <a href=\"http://maven.apache.org/guides/mini/guide-archive-configuration.html\" rel=\"nofollow noreferrer\">here</a> the &lt;archive/&gt; config should also work with WARs."}],"answers":[{"tags":[],"owner":{"account_id":2123935,"reputation":851,"user_id":1886601,"accept_rate":91,"display_name":"java_newbie"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1379586485,"creation_date":1379586485,"answer_id":18892215,"question_id":18891204,"body_markdown":"maybe this link could help you: http://technotes.tostaky.biz/2012/08/understanding-absolute-and-relative.html\r\n\r\nps: Understanding Absolute and Relative Path with getResourceAsStream()","title":"How to reach pom.properties","body":"<p>maybe this link could help you: <a href=\"http://technotes.tostaky.biz/2012/08/understanding-absolute-and-relative.html\" rel=\"nofollow\">http://technotes.tostaky.biz/2012/08/understanding-absolute-and-relative.html</a></p>\n\n<p>ps: Understanding Absolute and Relative Path with getResourceAsStream()</p>\n"},{"tags":[],"owner":{"account_id":38554,"reputation":484,"user_id":110737,"display_name":"Guy Pardon"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683267914,"creation_date":1683265737,"answer_id":76179167,"question_id":18891204,"body_markdown":"A little late maybe, but for the record: I got something like this to work by:\r\n\r\n-NOT prefixing a leading slash (&quot;/&quot;), and\r\n-using Thread.currentThread().getContextClassLoader().getResourceAsStream(...) and\r\n-use the maven groupId and artifactId\r\n\r\nExample\r\n\r\n`Thread.currentThread().getContextClassLoader().getResourceAsStream(&quot;META-INF/maven/org.apache.logging.log4j/log4j-core/pom.properties&quot;);`","title":"How to reach pom.properties","body":"<p>A little late maybe, but for the record: I got something like this to work by:</p>\n<p>-NOT prefixing a leading slash (&quot;/&quot;), and\n-using Thread.currentThread().getContextClassLoader().getResourceAsStream(...) and\n-use the maven groupId and artifactId</p>\n<p>Example</p>\n<p><code>Thread.currentThread().getContextClassLoader().getResourceAsStream(&quot;META-INF/maven/org.apache.logging.log4j/log4j-core/pom.properties&quot;);</code></p>\n"}],"owner":{"account_id":903413,"reputation":446,"user_id":938909,"accept_rate":29,"display_name":"Sandiip Patil"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2221,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1683267914,"creation_date":1379583445,"question_id":18891204,"body_markdown":"I am trying to get application&#39;s version and name/artifact-id from server at runtime for the plugin I am developing.  \r\nI know I can get the details from pom.properties that is generated on the server, using below code   \r\n\r\n    java.io.InputStream inputStream = getServletContext().getResourceAsStream(&quot;/META-INF/maven/&lt;application-directory-structure&gt;/pom.properties&quot;);\r\n    Properties mavenProperties= new Properties();\r\n    mavenProperties.load(inputStream );\r\n    String version = (String) mavenProperties.get(&quot;version&quot;);\r\n    String name = (String) mavenProperties.get(&quot;artifactId&quot;);\r\n\r\nBut I am not able to reach to the pom.properties.  \r\nI tried using `JarFile.getEntries()`but as I am not able to get the name of the war at runtime, its not working.   \r\nAny suggestions how I can get the details I am looking for?  \r\nI can&#39;t modify the maven plugin to get the artifact details. I am making a plugin myself and can&#39;t force all the apps for that.\r\n","title":"How to reach pom.properties","body":"<p>I am trying to get application's version and name/artifact-id from server at runtime for the plugin I am developing.<br>\nI know I can get the details from pom.properties that is generated on the server, using below code   </p>\n\n<pre><code>java.io.InputStream inputStream = getServletContext().getResourceAsStream(\"/META-INF/maven/&lt;application-directory-structure&gt;/pom.properties\");\nProperties mavenProperties= new Properties();\nmavenProperties.load(inputStream );\nString version = (String) mavenProperties.get(\"version\");\nString name = (String) mavenProperties.get(\"artifactId\");\n</code></pre>\n\n<p>But I am not able to reach to the pom.properties.<br>\nI tried using <code>JarFile.getEntries()</code>but as I am not able to get the name of the war at runtime, its not working.<br>\nAny suggestions how I can get the details I am looking for?<br>\nI can't modify the maven plugin to get the artifact details. I am making a plugin myself and can't force all the apps for that.</p>\n"},{"tags":["java","android","react-native","gradle","gradlew"],"answers":[{"tags":[],"owner":{"account_id":5416181,"reputation":2699,"user_id":4311268,"display_name":"Tommy Leong"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1683267796,"creation_date":1683267796,"answer_id":76179328,"question_id":76179203,"body_markdown":"Turns out it was my Firebase Analytics dependency issue which implemented inside `app/build.gradle` &#128580;\r\n\r\n\r\nCommented it out, everything run again as expected.\r\n```\r\n// implementation &#39;com.google.firebase:firebase-analytics:17.2.2&#39;\r\n```\r\n\r\n","title":"Could not determine the dependencies of task &#39;:app:compileDebugJavaWithJavac&#39;. after upgrading to ReactNative 0.71.7","body":"<p>Turns out it was my Firebase Analytics dependency issue which implemented inside <code>app/build.gradle</code> 🙄</p>\n<p>Commented it out, everything run again as expected.</p>\n<pre><code>// implementation 'com.google.firebase:firebase-analytics:17.2.2'\n</code></pre>\n"}],"owner":{"account_id":5416181,"reputation":2699,"user_id":4311268,"display_name":"Tommy Leong"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":355,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76179328,"answer_count":1,"score":0,"last_activity_date":1683267796,"creation_date":1683266366,"question_id":76179203,"body_markdown":"I have recently upgraded my ReactNative application from `0.62.2` to `0.71.7`. This is happening now when I&#39;m trying to build my Android application.\r\n\r\nI have also ensure my SDK Manager has all the necessary SDK downloaded (using latest Android Studio Flamingo | 2022.2.1 Patch 1)\r\n[![enter image description here][1]][1]\r\n\r\n\r\n\r\n### Error message \r\n**Error 1**: When executing `.gradlew build` at Android path\r\n```\r\n* What went wrong:\r\nCould not determine the dependencies of task &#39;:app:compileDebugJavaWithJavac&#39;.\r\n&gt; Problems reading data from Binary store in /Users/Username/.gradle/.tmp/gradle8504350670693111797.bin offset 102613 exists? true\r\n```\r\n\r\nError 2: When sync-ing gradle within Android Studio\r\n```\r\nNo variants found for &#39;:app&#39;. Check build files to ensure at least one variant exists. at:\r\ncom.android.tools.idea.gradle.project.sync.AndroidModule.prepare(GradleModules.kt:266)\r\n  com.android.tools.idea.gradle.project.sync.SyncProjectActionWorker.populateAndroidModels(SyncProjectActionWorker.kt:99)\r\n\r\n```\r\n\r\n#### Sample codes that probably matters + my environment\r\nProject&#39;s Build gradle\r\n```\r\n// Top-level build file where you can add configuration options common to all sub-projects/modules.\r\n\r\nbuildscript {\r\n    project.ext {\r\n        buildToolsVersion = &quot;30.0.0&quot;\r\n        minSdkVersion = 21\r\n        compileSdkVersion = 30\r\n        targetSdkVersion = 30\r\n\r\n        // We use NDK 23 which has both M1 support and is the side-by-side NDK version from AGP.\r\n        ndkVersion = &quot;23.1.7779620&quot;\r\n    }\r\n    repositories {\r\n        google()\r\n        mavenCentral()\r\n    }\r\n    dependencies {\r\n        classpath(&#39;com.android.tools.build:gradle:7.3.0&#39;)\r\n        classpath(&quot;com.facebook.react:react-native-gradle-plugin&quot;)\r\n        \r\n        // RNFirebase\r\n        classpath &#39;com.google.gms:google-services:4.3.15&#39;\r\n    }\r\n}\r\n```\r\n\r\ngradle-wrapper.properties\r\n```\r\ndistributionBase=GRADLE_USER_HOME\r\ndistributionPath=wrapper/dists\r\nzipStoreBase=GRADLE_USER_HOME\r\nzipStorePath=wrapper/dists\r\ndistributionUrl=https\\://services.gradle.org/distributions/gradle-7.5.1-all.zip\r\n\r\n```\r\n\r\nJava environment (I tried both, 11 and 15)\r\n```\r\n#Java 11\r\njava 11.0.10 2021-01-19 LTS\r\nJava(TM) SE Runtime Environment 18.9 (build 11.0.10+8-LTS-162)\r\nJava HotSpot(TM) 64-Bit Server VM 18.9 (build 11.0.10+8-LTS-162, mixed mode)\r\n\r\n#Java 15\r\nopenjdk 15.0.2 2021-01-19\r\nOpenJDK Runtime Environment Corretto-15.0.2.7.1 (build 15.0.2+7)\r\nOpenJDK 64-Bit Server VM Corretto-15.0.2.7.1 (build 15.0.2+7, mixed mode, sharing)\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/C2zIu.png","title":"Could not determine the dependencies of task &#39;:app:compileDebugJavaWithJavac&#39;. after upgrading to ReactNative 0.71.7","body":"<p>I have recently upgraded my ReactNative application from <code>0.62.2</code> to <code>0.71.7</code>. This is happening now when I'm trying to build my Android application.</p>\n<p>I have also ensure my SDK Manager has all the necessary SDK downloaded (using latest Android Studio Flamingo | 2022.2.1 Patch 1)\n<a href=\"https://i.stack.imgur.com/C2zIu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/C2zIu.png\" alt=\"enter image description here\" /></a></p>\n<h3>Error message</h3>\n<p><strong>Error 1</strong>: When executing <code>.gradlew build</code> at Android path</p>\n<pre><code>* What went wrong:\nCould not determine the dependencies of task ':app:compileDebugJavaWithJavac'.\n&gt; Problems reading data from Binary store in /Users/Username/.gradle/.tmp/gradle8504350670693111797.bin offset 102613 exists? true\n</code></pre>\n<p>Error 2: When sync-ing gradle within Android Studio</p>\n<pre><code>No variants found for ':app'. Check build files to ensure at least one variant exists. at:\ncom.android.tools.idea.gradle.project.sync.AndroidModule.prepare(GradleModules.kt:266)\n  com.android.tools.idea.gradle.project.sync.SyncProjectActionWorker.populateAndroidModels(SyncProjectActionWorker.kt:99)\n\n</code></pre>\n<h4>Sample codes that probably matters + my environment</h4>\n<p>Project's Build gradle</p>\n<pre><code>// Top-level build file where you can add configuration options common to all sub-projects/modules.\n\nbuildscript {\n    project.ext {\n        buildToolsVersion = &quot;30.0.0&quot;\n        minSdkVersion = 21\n        compileSdkVersion = 30\n        targetSdkVersion = 30\n\n        // We use NDK 23 which has both M1 support and is the side-by-side NDK version from AGP.\n        ndkVersion = &quot;23.1.7779620&quot;\n    }\n    repositories {\n        google()\n        mavenCentral()\n    }\n    dependencies {\n        classpath('com.android.tools.build:gradle:7.3.0')\n        classpath(&quot;com.facebook.react:react-native-gradle-plugin&quot;)\n        \n        // RNFirebase\n        classpath 'com.google.gms:google-services:4.3.15'\n    }\n}\n</code></pre>\n<p>gradle-wrapper.properties</p>\n<pre><code>distributionBase=GRADLE_USER_HOME\ndistributionPath=wrapper/dists\nzipStoreBase=GRADLE_USER_HOME\nzipStorePath=wrapper/dists\ndistributionUrl=https\\://services.gradle.org/distributions/gradle-7.5.1-all.zip\n\n</code></pre>\n<p>Java environment (I tried both, 11 and 15)</p>\n<pre><code>#Java 11\njava 11.0.10 2021-01-19 LTS\nJava(TM) SE Runtime Environment 18.9 (build 11.0.10+8-LTS-162)\nJava HotSpot(TM) 64-Bit Server VM 18.9 (build 11.0.10+8-LTS-162, mixed mode)\n\n#Java 15\nopenjdk 15.0.2 2021-01-19\nOpenJDK Runtime Environment Corretto-15.0.2.7.1 (build 15.0.2+7)\nOpenJDK 64-Bit Server VM Corretto-15.0.2.7.1 (build 15.0.2+7, mixed mode, sharing)\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":3482475,"reputation":27250,"user_id":2914140,"accept_rate":69,"display_name":"CoolMind"},"score":2,"creation_date":1683266860,"post_id":76179214,"comment_id":134343363,"body_markdown":"In Java, when you access an item that doesn&#39;t exist (for instance, by index), you will get an exception. Probably, `Exception in thread &quot;main&quot; java.lang.IndexOutOfBoundsException: Index: 1, Size: 1`.","body":"In Java, when you access an item that doesn&#39;t exist (for instance, by index), you will get an exception. Probably, <code>Exception in thread &quot;main&quot; java.lang.IndexOutOfBoundsException: Index: 1, Size: 1</code>."},{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":1,"creation_date":1683267817,"post_id":76179214,"comment_id":134343512,"body_markdown":"why don&#39;t you just try it? It won&#39;t break your PC, I promise.","body":"why don&#39;t you just try it? It won&#39;t break your PC, I promise."}],"owner":{"account_id":22292465,"reputation":15,"user_id":16519048,"display_name":"still_learning"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":224,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683267467,"creation_date":1683266460,"question_id":76179214,"body_markdown":"I&#39;m trying to get some clarification on what what happens when you try to retrieve and element in an index that does not exist.\r\n\r\n    List&lt;List&lt;Integer&gt;&gt; triangle = new ArrayList&lt;List&lt;Integer&gt;&gt;();\r\n\r\n        //first row is always 1 and only 1\r\n        triangle.add(new ArrayList&lt;&gt;());\r\n        triangle.get(0).add(1);\r\n        \r\n        //loop through the numbers of rows and add them previous rows\r\n        for(int rowNums = 1; rowNums &lt; numRows; rowNums++){\r\n            //creating new row\r\n            List&lt;Integer&gt; row = new ArrayList&lt;&gt;();\r\n\r\n            //previous row, used to add\r\n            List&lt;Integer&gt; prevRow = triangle.get(rowNums - 1);\r\n\r\n            //first element in the pascal triangle is 1\r\n            row.add(1);\r\n\r\n            for(int i = 1; i &lt; rowNums; i++){\r\n                row.add(prevRow.get(i - 1) + prevRow.get(i));\r\n\r\n            }\r\n            //last element in a pascal triangle is always 1\r\n            row.add(1);\r\n\r\n            //add the row to the triangle list\r\n            triangle.add(row);\r\n        }\r\n        \r\n        return triangle;\r\n\r\nThis code solves a pascal triangle, however, I&#39;m confused at the nested for loop. I know that it looks at the previous rows and add the two elements together. But let say I&#39;m in row 1, I would look back at the previous row (which is 0) and add elements at index 0 and 1 together. but index 1 does not exist in row 0. I hope this is clear.","title":"what happens when you get an element in a list that does not exist?","body":"<p>I'm trying to get some clarification on what what happens when you try to retrieve and element in an index that does not exist.</p>\n<pre><code>List&lt;List&lt;Integer&gt;&gt; triangle = new ArrayList&lt;List&lt;Integer&gt;&gt;();\n\n    //first row is always 1 and only 1\n    triangle.add(new ArrayList&lt;&gt;());\n    triangle.get(0).add(1);\n    \n    //loop through the numbers of rows and add them previous rows\n    for(int rowNums = 1; rowNums &lt; numRows; rowNums++){\n        //creating new row\n        List&lt;Integer&gt; row = new ArrayList&lt;&gt;();\n\n        //previous row, used to add\n        List&lt;Integer&gt; prevRow = triangle.get(rowNums - 1);\n\n        //first element in the pascal triangle is 1\n        row.add(1);\n\n        for(int i = 1; i &lt; rowNums; i++){\n            row.add(prevRow.get(i - 1) + prevRow.get(i));\n\n        }\n        //last element in a pascal triangle is always 1\n        row.add(1);\n\n        //add the row to the triangle list\n        triangle.add(row);\n    }\n    \n    return triangle;\n</code></pre>\n<p>This code solves a pascal triangle, however, I'm confused at the nested for loop. I know that it looks at the previous rows and add the two elements together. But let say I'm in row 1, I would look back at the previous row (which is 0) and add elements at index 0 and 1 together. but index 1 does not exist in row 0. I hope this is clear.</p>\n"},{"tags":["java","azure","azure-functions"],"answers":[{"tags":[],"owner":{"account_id":26331226,"reputation":3311,"user_id":19991670,"display_name":"Pravallika KV"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1683266568,"creation_date":1683202212,"answer_id":76173026,"question_id":76171348,"body_markdown":"I have tried your requirement in command line by following [MSdoc](https://learn.microsoft.com/en-us/azure/azure-functions/create-first-function-cli-java?tabs=cmd,azure-cli,browser) and could achieve expected results.\r\n\r\nYou can achieve the same in VSCode by running the below commands after creating a Java Azure function:\r\n```\r\nmvn clean install\r\nmvn azure-functions:run\r\n```\r\n*Creating a Java Azure function:*\r\n\r\n![enter image description here](https://i.imgur.com/G7t4Cq3.png)\r\n\r\n**Function Code:**\r\n\r\n```csharp\r\n@FunctionName(&quot;HttpExample&quot;)\r\npublic HttpResponseMessage run(\r\n        @HttpTrigger(\r\n            name = &quot;req&quot;,\r\n            methods = {HttpMethod.GET, HttpMethod.POST},\r\n            authLevel = AuthorizationLevel.ANONYMOUS)\r\n            HttpRequestMessage&lt;Optional&lt;String&gt;&gt; request,\r\n        final ExecutionContext context) {\r\n                \r\n    context.getLogger().info(&quot;Java HTTP trigger processed a request.&quot;);\r\n\r\n    // Parse query parameter\r\n    final String query = request.getQueryParameters().get(&quot;name&quot;);\r\n    final String name = request.getBody().orElse(query);\r\n        \r\n    context.getLogger().info(&quot;HELLOOOOOOOOOOOOOOOOOOOOOOOOOo&quot;);\r\n    if (name == null) {\r\n       return request.createResponseBuilder(HttpStatus.BAD_REQUEST).body(&quot;Please pass a name on the query string or in the request body&quot;).build();\r\n    } else {\r\n      return request.createResponseBuilder(HttpStatus.OK).body(&quot;Hello, &quot; + name).build();\r\n    }\r\n}\r\n```\r\n`mvn clean install` let&#39;s Maven `clean` all the previously compiled .class files and resources in each module and build the project from the clean state before running the `install` phase for each module.\r\n\r\n![enter image description here](https://i.imgur.com/XGNJtOe.png)\r\n![enter image description here](https://i.imgur.com/wl101W6.png)\r\n![enter image description here](https://i.imgur.com/a0JoH1H.png)\r\nRun `mvn azure-functions:run`\r\n![enter image description here](https://i.imgur.com/CVnJkYb.png)\r\n\r\n**Response:**\r\n\r\nwhen I run function URL, I could see the expect output in console.\r\n![enter image description here](https://i.imgur.com/rGa5Vl4.png)\r\n\r\n**Browser:** \r\n\r\n![enter image description here](https://i.imgur.com/bJuRW9G.png)\r\n\r\n","title":"I am able to invoke an Azure Function, but I don&#39;t receive any response","body":"<p>I have tried your requirement in command line by following <a href=\"https://learn.microsoft.com/en-us/azure/azure-functions/create-first-function-cli-java?tabs=cmd,azure-cli,browser\" rel=\"nofollow noreferrer\">MSdoc</a> and could achieve expected results.</p>\n<p>You can achieve the same in VSCode by running the below commands after creating a Java Azure function:</p>\n<pre><code>mvn clean install\nmvn azure-functions:run\n</code></pre>\n<p><em>Creating a Java Azure function:</em></p>\n<p><img src=\"https://i.imgur.com/G7t4Cq3.png\" alt=\"enter image description here\" /></p>\n<p><strong>Function Code:</strong></p>\n<pre class=\"lang-cs prettyprint-override\"><code>@FunctionName(&quot;HttpExample&quot;)\npublic HttpResponseMessage run(\n        @HttpTrigger(\n            name = &quot;req&quot;,\n            methods = {HttpMethod.GET, HttpMethod.POST},\n            authLevel = AuthorizationLevel.ANONYMOUS)\n            HttpRequestMessage&lt;Optional&lt;String&gt;&gt; request,\n        final ExecutionContext context) {\n                \n    context.getLogger().info(&quot;Java HTTP trigger processed a request.&quot;);\n\n    // Parse query parameter\n    final String query = request.getQueryParameters().get(&quot;name&quot;);\n    final String name = request.getBody().orElse(query);\n        \n    context.getLogger().info(&quot;HELLOOOOOOOOOOOOOOOOOOOOOOOOOo&quot;);\n    if (name == null) {\n       return request.createResponseBuilder(HttpStatus.BAD_REQUEST).body(&quot;Please pass a name on the query string or in the request body&quot;).build();\n    } else {\n      return request.createResponseBuilder(HttpStatus.OK).body(&quot;Hello, &quot; + name).build();\n    }\n}\n</code></pre>\n<p><code>mvn clean install</code> let's Maven <code>clean</code> all the previously compiled .class files and resources in each module and build the project from the clean state before running the <code>install</code> phase for each module.</p>\n<p><img src=\"https://i.imgur.com/XGNJtOe.png\" alt=\"enter image description here\" />\n<img src=\"https://i.imgur.com/wl101W6.png\" alt=\"enter image description here\" />\n<img src=\"https://i.imgur.com/a0JoH1H.png\" alt=\"enter image description here\" />\nRun <code>mvn azure-functions:run</code>\n<img src=\"https://i.imgur.com/CVnJkYb.png\" alt=\"enter image description here\" /></p>\n<p><strong>Response:</strong></p>\n<p>when I run function URL, I could see the expect output in console.\n<img src=\"https://i.imgur.com/rGa5Vl4.png\" alt=\"enter image description here\" /></p>\n<p><strong>Browser:</strong></p>\n<p><img src=\"https://i.imgur.com/bJuRW9G.png\" alt=\"enter image description here\" /></p>\n"}],"owner":{"account_id":10592686,"reputation":5,"user_id":7802665,"display_name":"Fra_Di_Rienzo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":486,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76173026,"answer_count":1,"score":0,"last_activity_date":1683266568,"creation_date":1683190730,"question_id":76171348,"body_markdown":"I have followed this guide (https://learn.microsoft.com/en-us/azure/azure-functions/create-first-function-vs-code-java) to create an Azure function in VS Code using Java and Maven.\r\n\r\nthe code is the following:\r\n[![enter image description here][1]][1]\r\n```java\r\n    public class Function {\r\n    /**\r\n     * This function listens at endpoint &quot;/api/HttpExample&quot;. Two ways to invoke it using the &quot;curl&quot; command in bash:\r\n     * 1. curl -d &quot;HTTP Body&quot; {your host}/api/HttpExample\r\n     * 2. curl &quot;{your host}/api/HttpExample?name=HTTP%20Query&quot;\r\n     */\r\n    @FunctionName(&quot;HttpExample&quot;)\r\n    public HttpResponseMessage run(\r\n            @HttpTrigger(\r\n                name = &quot;req&quot;,\r\n                methods = {HttpMethod.GET, HttpMethod.POST},\r\n                authLevel = AuthorizationLevel.ANONYMOUS)\r\n                HttpRequestMessage&lt;Optional&lt;String&gt;&gt; request,\r\n            final ExecutionContext context) {\r\n        context.getLogger().info(&quot;Java HTTP trigger processed a request.&quot;);\r\n\r\n        // Parse query parameter\r\n        final String query = request.getQueryParameters().get(&quot;name&quot;);\r\n        final String name = request.getBody().orElse(query);\r\n        context.getLogger().info(&quot;HELLOOOOOOOOOOOOOOOOOOOOOOOOOo&quot;);\r\n\r\n        if (name == null) {\r\n            return request.createResponseBuilder(HttpStatus.BAD_REQUEST).body(&quot;Please pass a name on the query string or in the request body&quot;).build();\r\n        } else {\r\n            return request.createResponseBuilder(HttpStatus.OK).body(&quot;Hello, 2&quot; + name).build();\r\n        }\r\n    }\r\n}\r\n```\r\nthe host.json is the following:\r\n\r\n[![host.json][2]][2]\r\n\r\nthe local.settings.json is the following:\r\n\r\n[![local.settings.json][3]][3]\r\n\r\n\r\nthen I am able to start the Azure function locally with:\r\n\r\nmvn azure-functions:run -f &quot;c:\\Users\\francesco.di.rienzo\\Desktop\\Azure f1\\pom.xml&quot;.\r\n\r\nand the output in the terminal is the following:\r\n```\r\nFunctions:\r\n\r\nHttpExample: [GET,POST] http://localhost:7071/api/HttpExample\r\n\r\nFor detailed output, run func with --verbose flag.\r\n\r\n[2023-05-02T16:09:12.497Z] Worker process started and initialized.\r\n\r\n[2023-05-02T16:09:15.362Z] Host lock lease acquired by instance ID &#39;000000000000000000000000F10D2648&#39;.\r\n```\r\nbut when I copy that link in the browser I don&#39;t see anything, the page just keeps loading, but in the terminal, in VS Code, I can see that there is a new log:\r\n```\r\nExecuting &#39;Functions.HttpExample&#39; (Reason=&#39;This function was programmatically called via the host APIs.&#39;, Id=5aadbadf-3198-4532-8fdb-f704637233b3)\r\n```\r\nand that&#39;s it.\r\n\r\nWhen I run mvn test -f &quot;c:\\Users\\francesco.di.rienzo\\Desktop\\Azure f1\\pom.xml&quot; I can see in the terminal that those two loggers are printed:\r\n```\r\ncontext.getLogger().info(&quot;HELLOOOOOOOOOOOOOOOOOOOOOOOOOo&quot;);\r\ncontext.getLogger().info(&quot;Java HTTP trigger processed a request.&quot;);\r\n```\r\n\r\nI have tried also using IntelliJ, with the same code, but I have the same\r\n\r\nI tried calling the Azure function that I created following the link, but I didn&#39;t receive any response even if it seems that the function started\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/xg0E6.png\r\n  [2]: https://i.stack.imgur.com/b63Pg.png\r\n  [3]: https://i.stack.imgur.com/yiIKW.png","title":"I am able to invoke an Azure Function, but I don&#39;t receive any response","body":"<p>I have followed this guide (<a href=\"https://learn.microsoft.com/en-us/azure/azure-functions/create-first-function-vs-code-java\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/azure/azure-functions/create-first-function-vs-code-java</a>) to create an Azure function in VS Code using Java and Maven.</p>\n<p>the code is the following:\n<a href=\"https://i.stack.imgur.com/xg0E6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xg0E6.png\" alt=\"enter image description here\" /></a></p>\n<pre class=\"lang-java prettyprint-override\"><code>    public class Function {\n    /**\n     * This function listens at endpoint &quot;/api/HttpExample&quot;. Two ways to invoke it using the &quot;curl&quot; command in bash:\n     * 1. curl -d &quot;HTTP Body&quot; {your host}/api/HttpExample\n     * 2. curl &quot;{your host}/api/HttpExample?name=HTTP%20Query&quot;\n     */\n    @FunctionName(&quot;HttpExample&quot;)\n    public HttpResponseMessage run(\n            @HttpTrigger(\n                name = &quot;req&quot;,\n                methods = {HttpMethod.GET, HttpMethod.POST},\n                authLevel = AuthorizationLevel.ANONYMOUS)\n                HttpRequestMessage&lt;Optional&lt;String&gt;&gt; request,\n            final ExecutionContext context) {\n        context.getLogger().info(&quot;Java HTTP trigger processed a request.&quot;);\n\n        // Parse query parameter\n        final String query = request.getQueryParameters().get(&quot;name&quot;);\n        final String name = request.getBody().orElse(query);\n        context.getLogger().info(&quot;HELLOOOOOOOOOOOOOOOOOOOOOOOOOo&quot;);\n\n        if (name == null) {\n            return request.createResponseBuilder(HttpStatus.BAD_REQUEST).body(&quot;Please pass a name on the query string or in the request body&quot;).build();\n        } else {\n            return request.createResponseBuilder(HttpStatus.OK).body(&quot;Hello, 2&quot; + name).build();\n        }\n    }\n}\n</code></pre>\n<p>the host.json is the following:</p>\n<p><a href=\"https://i.stack.imgur.com/b63Pg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/b63Pg.png\" alt=\"host.json\" /></a></p>\n<p>the local.settings.json is the following:</p>\n<p><a href=\"https://i.stack.imgur.com/yiIKW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yiIKW.png\" alt=\"local.settings.json\" /></a></p>\n<p>then I am able to start the Azure function locally with:</p>\n<p>mvn azure-functions:run -f &quot;c:\\Users\\francesco.di.rienzo\\Desktop\\Azure f1\\pom.xml&quot;.</p>\n<p>and the output in the terminal is the following:</p>\n<pre><code>Functions:\n\nHttpExample: [GET,POST] http://localhost:7071/api/HttpExample\n\nFor detailed output, run func with --verbose flag.\n\n[2023-05-02T16:09:12.497Z] Worker process started and initialized.\n\n[2023-05-02T16:09:15.362Z] Host lock lease acquired by instance ID '000000000000000000000000F10D2648'.\n</code></pre>\n<p>but when I copy that link in the browser I don't see anything, the page just keeps loading, but in the terminal, in VS Code, I can see that there is a new log:</p>\n<pre><code>Executing 'Functions.HttpExample' (Reason='This function was programmatically called via the host APIs.', Id=5aadbadf-3198-4532-8fdb-f704637233b3)\n</code></pre>\n<p>and that's it.</p>\n<p>When I run mvn test -f &quot;c:\\Users\\francesco.di.rienzo\\Desktop\\Azure f1\\pom.xml&quot; I can see in the terminal that those two loggers are printed:</p>\n<pre><code>context.getLogger().info(&quot;HELLOOOOOOOOOOOOOOOOOOOOOOOOOo&quot;);\ncontext.getLogger().info(&quot;Java HTTP trigger processed a request.&quot;);\n</code></pre>\n<p>I have tried also using IntelliJ, with the same code, but I have the same</p>\n<p>I tried calling the Azure function that I created following the link, but I didn't receive any response even if it seems that the function started</p>\n"},{"tags":["java","multithreading","threadpool"],"comments":[{"owner":{"account_id":115344,"reputation":76329,"user_id":302916,"display_name":"Brian Roach"},"score":1,"creation_date":1314573952,"post_id":7224670,"comment_id":8685215,"body_markdown":"Erm, yes. Why wouldn&#39;t you be able to? Maybe if you tried it ...","body":"Erm, yes. Why wouldn&#39;t you be able to? Maybe if you tried it ..."},{"owner":{"account_id":287119,"reputation":12309,"user_id":586748,"accept_rate":82,"display_name":"Russell"},"score":0,"creation_date":1314574087,"post_id":7224670,"comment_id":8685233,"body_markdown":"I&#39;m not sure what you&#39;re asking. You can create a new thread from any java code, regardless of what thread it&#39;s running in. Do the threads need to keep references to the other threads they spawn? What is the purpose of the hierarchy you describe?","body":"I&#39;m not sure what you&#39;re asking. You can create a new thread from any java code, regardless of what thread it&#39;s running in. Do the threads need to keep references to the other threads they spawn? What is the purpose of the hierarchy you describe?"}],"answers":[{"tags":[],"owner":{"account_id":34604,"reputation":5435,"user_id":97869,"accept_rate":50,"display_name":"JJ."},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1314573960,"creation_date":1314573960,"answer_id":7224697,"question_id":7224670,"body_markdown":"Yes a thread can launch another thread, and that thread can launch thread(s) and on and on... \r\n\r\nIn the `run()` method of a thread - you can create and start other threads.","title":"Threads within threads in Java?","body":"<p>Yes a thread can launch another thread, and that thread can launch thread(s) and on and on... </p>\n\n<p>In the <code>run()</code> method of a thread - you can create and start other threads.</p>\n"},{"comments":[{"owner":{"account_id":10554252,"reputation":331,"user_id":7775986,"display_name":"Lealo"},"score":0,"creation_date":1502473192,"post_id":7224720,"comment_id":78241376,"body_markdown":"Do you happen to know how I can make my thread continue to run regardless of exceptions. Exceptions seem to stop threads (that Im cathing). I tried to solve it by creating a thread inside a thread but the exception in Thread B (created from inside thread A) stops both threads. The boolean flags for both are remains true after they have stopped.","body":"Do you happen to know how I can make my thread continue to run regardless of exceptions. Exceptions seem to stop threads (that Im cathing). I tried to solve it by creating a thread inside a thread but the exception in Thread B (created from inside thread A) stops both threads. The boolean flags for both are remains true after they have stopped."}],"tags":[],"owner":{"account_id":536071,"reputation":223,"user_id":905251,"display_name":"John Smith"},"comment_count":1,"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1314574310,"creation_date":1314574310,"answer_id":7224720,"question_id":7224670,"body_markdown":"Yes, you can launch as many threads as you want, but that&#39;s probably not the best way to go.  It&#39;s much better to use the non-blocking API&#39;s so that you can start execution of some external call and the calling thread can immediately start doing something else without waiting on the socket/database call to come back.  Then, when the socket/database call comes back, a callback is triggered to finish that processing.\r\n\r\nNon-blocking I/O can provide far superior CPU utilization since you&#39;re just triggering calls and registering callbacks and not having to try to balance the &quot;right&quot; number of concurrent threads which are mostly just sleeping anyways.\r\n\r\nhttp://www.owlmountain.com/tutorials/NonBlockingIo.htm\r\n\r\nhttp://www.tensegrity.hellblazer.com/2008/03/non-blocking-jdbc-non-blocking-servlet-apis-and-other-high-mysteries.html\r\n","title":"Threads within threads in Java?","body":"<p>Yes, you can launch as many threads as you want, but that's probably not the best way to go.  It's much better to use the non-blocking API's so that you can start execution of some external call and the calling thread can immediately start doing something else without waiting on the socket/database call to come back.  Then, when the socket/database call comes back, a callback is triggered to finish that processing.</p>\n\n<p>Non-blocking I/O can provide far superior CPU utilization since you're just triggering calls and registering callbacks and not having to try to balance the \"right\" number of concurrent threads which are mostly just sleeping anyways.</p>\n\n<p><a href=\"http://www.owlmountain.com/tutorials/NonBlockingIo.htm\">http://www.owlmountain.com/tutorials/NonBlockingIo.htm</a></p>\n\n<p><a href=\"http://www.tensegrity.hellblazer.com/2008/03/non-blocking-jdbc-non-blocking-servlet-apis-and-other-high-mysteries.html\">http://www.tensegrity.hellblazer.com/2008/03/non-blocking-jdbc-non-blocking-servlet-apis-and-other-high-mysteries.html</a></p>\n"},{"tags":[],"owner":{"account_id":482787,"reputation":456,"user_id":897407,"display_name":"Jord Sonneveld"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1314581100,"creation_date":1314581100,"answer_id":7225258,"question_id":7224670,"body_markdown":"To answer the question, yes threads can launch other threads.\r\n\r\nIs the hierarchy important?\r\n\r\nYou&#39;re probably better off using an [ExecutorService][1] with a cached thread pool. That way you can pool threads instead of creating lots (which is expensive). ExecutorServices also provide other cool things, and using Callables / Runnables with them is probably much easier to test than mucking about with threads on your own.\r\n\r\n\r\n  [1]: http://download.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html","title":"Threads within threads in Java?","body":"<p>To answer the question, yes threads can launch other threads.</p>\n\n<p>Is the hierarchy important?</p>\n\n<p>You're probably better off using an <a href=\"http://download.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html\" rel=\"noreferrer\">ExecutorService</a> with a cached thread pool. That way you can pool threads instead of creating lots (which is expensive). ExecutorServices also provide other cool things, and using Callables / Runnables with them is probably much easier to test than mucking about with threads on your own.</p>\n"},{"tags":[],"owner":{"account_id":2044556,"reputation":161,"user_id":1824955,"display_name":"user1824955"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1373717658,"creation_date":1373717658,"answer_id":17630071,"question_id":7224670,"body_markdown":"It&#39;s possible\r\nfor exemple you can creat thread and put id in array like this\r\n\r\n    UnThread[] tab=   new  UnThread[10] ;\r\n\r\n    for ( int i=0;i&lt;20;i++)\r\n\r\n    tab[i] = new UnThread();\r\n\r\nAfter you can give to the subMainThread the array tab\r\n\r\nexemple\r\n\r\n      while( tab[1].isAlive() ) {\r\n      //do somthing..\r\n      System.out.println(&quot;Ligne affich&#233;e par le main&quot;);\r\n      try {\r\n        // et faire une pause\r\n        tab[1].sleep(800);\r\n      }\r\n      catch (InterruptedException ex) {}\r\n     }\r\nhere a simple use of thread :\r\nhttp://kamel.berrayah.com/wordpress/2013/07/java-threads/ ","title":"Threads within threads in Java?","body":"<p>It's possible\nfor exemple you can creat thread and put id in array like this</p>\n\n<pre><code>UnThread[] tab=   new  UnThread[10] ;\n\nfor ( int i=0;i&lt;20;i++)\n\ntab[i] = new UnThread();\n</code></pre>\n\n<p>After you can give to the subMainThread the array tab</p>\n\n<p>exemple</p>\n\n<pre><code>  while( tab[1].isAlive() ) {\n  //do somthing..\n  System.out.println(\"Ligne affichée par le main\");\n  try {\n    // et faire une pause\n    tab[1].sleep(800);\n  }\n  catch (InterruptedException ex) {}\n }\n</code></pre>\n\n<p>here a simple use of thread :\n<a href=\"http://kamel.berrayah.com/wordpress/2013/07/java-threads/\" rel=\"nofollow\">http://kamel.berrayah.com/wordpress/2013/07/java-threads/</a> </p>\n"},{"comments":[{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":1,"creation_date":1683273030,"post_id":76179206,"comment_id":134344533,"body_markdown":"nothing new compared to earlier answers, is there ;)","body":"nothing new compared to earlier answers, is there ;)"},{"owner":{"account_id":11727434,"reputation":1,"user_id":8584201,"display_name":"Amit Sharma"},"score":0,"creation_date":1683365111,"post_id":76179206,"comment_id":134358226,"body_markdown":"I just wanted to remind that nested thread are already created even if we create one thread, because it will be insider main thread.","body":"I just wanted to remind that nested thread are already created even if we create one thread, because it will be insider main thread."},{"owner":{"account_id":8517137,"reputation":835,"user_id":6385232,"display_name":"geanakuch"},"score":0,"creation_date":1683636320,"post_id":76179206,"comment_id":134394279,"body_markdown":"This does not provide an answer to the question. Once you have sufficient [reputation](https://stackoverflow.com/help/whats-reputation) you will be able to [comment on any post](https://stackoverflow.com/help/privileges/comment); instead, [provide answers that don&#39;t require clarification from the asker](https://meta.stackexchange.com/questions/214173/why-do-i-need-50-reputation-to-comment-what-can-i-do-instead). - [From Review](/review/late-answers/34336138)","body":"This does not provide an answer to the question. Once you have sufficient <a href=\"https://stackoverflow.com/help/whats-reputation\">reputation</a> you will be able to <a href=\"https://stackoverflow.com/help/privileges/comment\">comment on any post</a>; instead, <a href=\"https://meta.stackexchange.com/questions/214173/why-do-i-need-50-reputation-to-comment-what-can-i-do-instead\">provide answers that don&#39;t require clarification from the asker</a>. - <a href=\"/review/late-answers/34336138\">From Review</a>"}],"tags":[],"owner":{"account_id":11727434,"reputation":1,"user_id":8584201,"display_name":"Amit Sharma"},"comment_count":3,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1683266401,"creation_date":1683266401,"answer_id":76179206,"question_id":7224670,"body_markdown":"All threads are created under main thread, so yes its possible.","title":"Threads within threads in Java?","body":"<p>All threads are created under main thread, so yes its possible.</p>\n"}],"owner":{"account_id":92522,"reputation":2583,"user_id":253530,"accept_rate":54,"display_name":"user253530"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":25331,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"accepted_answer_id":7224720,"answer_count":5,"score":12,"last_activity_date":1683266401,"creation_date":1314573579,"question_id":7224670,"body_markdown":"I am currently thinking about how to design a multithreading system in Java that needs to do some heavy network processing and database storage. The program will launch three basic threads at first. Along these basic threads, I would like to launch other threads not from the main program but from two of the threads. Is it possible for a thread to launch another thread leading to some sort of a hierarchy like:\r\n\r\n    &gt; Parent -&gt;t0 thread1 -&gt; t1 tread1.1  \r\n    &gt;        -&gt;t0 thread2\r\n    &gt;        -&gt;t0 thread3 -&gt; t2 thread3.1\r\n\r\n    t0= inital time\r\n    t1,t2 = time at a point in the running thread\r\n    t1 != t2 \r\n\r\nIf not could somebody provide a theoretical solution with references?","title":"Threads within threads in Java?","body":"<p>I am currently thinking about how to design a multithreading system in Java that needs to do some heavy network processing and database storage. The program will launch three basic threads at first. Along these basic threads, I would like to launch other threads not from the main program but from two of the threads. Is it possible for a thread to launch another thread leading to some sort of a hierarchy like:</p>\n\n<pre><code>&gt; Parent -&gt;t0 thread1 -&gt; t1 tread1.1  \n&gt;        -&gt;t0 thread2\n&gt;        -&gt;t0 thread3 -&gt; t2 thread3.1\n\nt0= inital time\nt1,t2 = time at a point in the running thread\nt1 != t2 \n</code></pre>\n\n<p>If not could somebody provide a theoretical solution with references?</p>\n"},{"tags":["java","firebase","google-cloud-platform","google-cloud-firestore","database-design"],"answers":[{"comments":[{"owner":{"account_id":28509826,"reputation":3,"user_id":21819961,"display_name":"Tudor M."},"score":0,"creation_date":1683269016,"post_id":76179139,"comment_id":134343715,"body_markdown":"&quot;And then call CollectionReference#add(). To let the user modify a building, simply create a reference that points to the building the user wants to modify and let him change whatever data he wants using DocumentReference#update(). The path is: &quot; That seems like a great ideea, but i don&#39;t want the users to able to create new buildinigs. I&#39;d like the users to assign themselves pre-existing buildings that I, the app administrator, will upload to the database.","body":"&quot;And then call CollectionReference#add(). To let the user modify a building, simply create a reference that points to the building the user wants to modify and let him change whatever data he wants using DocumentReference#update(). The path is: &quot; That seems like a great ideea, but i don&#39;t want the users to able to create new buildinigs. I&#39;d like the users to assign themselves pre-existing buildings that I, the app administrator, will upload to the database."},{"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1683269403,"post_id":76179139,"comment_id":134343780,"body_markdown":"Then don&#39;t allow the user to create buildings, let only the admin do that. Then display a list of buildings and let the users assign themselves the buildings that already exist in the database.","body":"Then don&#39;t allow the user to create buildings, let only the admin do that. Then display a list of buildings and let the users assign themselves the buildings that already exist in the database."}],"tags":[],"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1683265309,"creation_date":1683265309,"answer_id":76179139,"question_id":76177266,"body_markdown":"&gt; My app is going to be an app that will store data about some buildings in my city. The building owners will create an account and they will be able to upload data about their buildings. My question is, how do I do that in the database?\r\n\r\nThe most appropriate solution would be to create a top-level collection called &quot;users&quot; and a sub-collection under each user document called &quot;buildings&quot;.\r\n\r\n&gt; Now, I&#39;d like some suggestions about how the user can assign himself the building he owns, and how can I structure this data to be able to assign the building to a user who will be able to upload or modify data about the building.\r\n\r\nSince you&#39;re using authentication, you already know the UID of the authenticated user. That being said when the user wants to add a new building (document) to the &quot;buildings&quot; sub-collection, then create a reference that points to the &quot;buildings&quot; sub-collection:\r\n\r\n    db/users/$uid/buildings\r\n\r\nAnd then call [CollectionReference#add()][1]. To let the user modify a building, simply create a reference that points to the building the user wants to modify and let him change whatever data he wants using [DocumentReference#update()][2]. The path is:\r\n\r\n    db/users/$uid/buildings/$buildingId\r\n\r\n&gt; I&#39;d also like to split the buildings into districts, and each district shall have a supervisor who will receive all the data the building owners upload.\r\n\r\nIn this case, you should create another top-level collection called &quot;districts&quot; where you can add district documents. Each district document should contain a field called &quot;supervisor&quot; that will contain the UID of the supervisor. Besides that, each building document should also contain a field called &quot;districtId&quot;. In this way, you&#39;ll be able to display all buildings within a specific district using a [collection group query][3].\r\n\r\nIf you would like to query the building documents under a certain path, I recommend reading the following resource:\r\n\r\n* [How to query collections in Firestore under a certain path?][4]\r\n\r\n\r\nTo wire up all this information, please check the schema below:\r\n\r\n    db\r\n    |\r\n    --- users (collection)\r\n    |    |\r\n    |    --- $uid (document)\r\n    |         |\r\n    |         --- type: &quot;owner&quot; //Can be owner or supervisor.\r\n    |         |\r\n    |         --- //other user fields\r\n    |         |\r\n    |         ---  buildings: (sub-collection)\r\n    |               |\r\n    |               --- $buildingId (document)\r\n    |                    |\r\n    |                    --- districtId: &quot;DistrictLongId&quot;\r\n    |                    |\r\n    |                    --- //other building details\r\n    |\r\n    --- districts (collection)\r\n         |\r\n         --- $districId (document)\r\n               |\r\n               --- name: &quot;DistrictName&quot;\r\n               |\r\n               --- supervisor: &quot;SupervisorLongId&quot;\r\n               |\r\n               --- //other distric details\r\n\r\n\r\n  [1]: https://firebase.google.com/docs/reference/android/com/google/firebase/firestore/CollectionReference#add(java.lang.Object)\r\n  [2]: https://firebase.google.com/docs/reference/android/com/google/firebase/firestore/DocumentReference#update(java.util.Map%3Cjava.lang.String,java.lang.Object%3E)\r\n  [3]: https://firebase.google.com/docs/firestore/query-data/queries#collection-group-query\r\n  [4]: https://medium.com/firebase-developers/how-to-query-collections-in-firestore-under-a-certain-path-6a0d686cebd2","title":"Firestore data structuring for building owners","body":"<blockquote>\n<p>My app is going to be an app that will store data about some buildings in my city. The building owners will create an account and they will be able to upload data about their buildings. My question is, how do I do that in the database?</p>\n</blockquote>\n<p>The most appropriate solution would be to create a top-level collection called &quot;users&quot; and a sub-collection under each user document called &quot;buildings&quot;.</p>\n<blockquote>\n<p>Now, I'd like some suggestions about how the user can assign himself the building he owns, and how can I structure this data to be able to assign the building to a user who will be able to upload or modify data about the building.</p>\n</blockquote>\n<p>Since you're using authentication, you already know the UID of the authenticated user. That being said when the user wants to add a new building (document) to the &quot;buildings&quot; sub-collection, then create a reference that points to the &quot;buildings&quot; sub-collection:</p>\n<pre><code>db/users/$uid/buildings\n</code></pre>\n<p>And then call <a href=\"https://firebase.google.com/docs/reference/android/com/google/firebase/firestore/CollectionReference#add(java.lang.Object)\" rel=\"nofollow noreferrer\">CollectionReference#add()</a>. To let the user modify a building, simply create a reference that points to the building the user wants to modify and let him change whatever data he wants using <a href=\"https://firebase.google.com/docs/reference/android/com/google/firebase/firestore/DocumentReference#update(java.util.Map%3Cjava.lang.String,java.lang.Object%3E)\" rel=\"nofollow noreferrer\">DocumentReference#update()</a>. The path is:</p>\n<pre><code>db/users/$uid/buildings/$buildingId\n</code></pre>\n<blockquote>\n<p>I'd also like to split the buildings into districts, and each district shall have a supervisor who will receive all the data the building owners upload.</p>\n</blockquote>\n<p>In this case, you should create another top-level collection called &quot;districts&quot; where you can add district documents. Each district document should contain a field called &quot;supervisor&quot; that will contain the UID of the supervisor. Besides that, each building document should also contain a field called &quot;districtId&quot;. In this way, you'll be able to display all buildings within a specific district using a <a href=\"https://firebase.google.com/docs/firestore/query-data/queries#collection-group-query\" rel=\"nofollow noreferrer\">collection group query</a>.</p>\n<p>If you would like to query the building documents under a certain path, I recommend reading the following resource:</p>\n<ul>\n<li><a href=\"https://medium.com/firebase-developers/how-to-query-collections-in-firestore-under-a-certain-path-6a0d686cebd2\" rel=\"nofollow noreferrer\">How to query collections in Firestore under a certain path?</a></li>\n</ul>\n<p>To wire up all this information, please check the schema below:</p>\n<pre><code>db\n|\n--- users (collection)\n|    |\n|    --- $uid (document)\n|         |\n|         --- type: &quot;owner&quot; //Can be owner or supervisor.\n|         |\n|         --- //other user fields\n|         |\n|         ---  buildings: (sub-collection)\n|               |\n|               --- $buildingId (document)\n|                    |\n|                    --- districtId: &quot;DistrictLongId&quot;\n|                    |\n|                    --- //other building details\n|\n--- districts (collection)\n     |\n     --- $districId (document)\n           |\n           --- name: &quot;DistrictName&quot;\n           |\n           --- supervisor: &quot;SupervisorLongId&quot;\n           |\n           --- //other distric details\n</code></pre>\n"}],"owner":{"account_id":28509826,"reputation":3,"user_id":21819961,"display_name":"Tudor M."},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76179139,"answer_count":1,"score":0,"last_activity_date":1683265309,"creation_date":1683233328,"question_id":76177266,"body_markdown":"I am currently a high school student and I&#39;m working on a Java, Android Studio project that involves creating an app using a database. I chose to go with Firestore.\r\n\r\nMy app is going to be an app that will store data about some buildings in my city. The building owners will create an account and they will be able to upload data about their buildings. My question is, how do I do that in the database? I&#39;ve already done the auth process and the users are automatically stored in a collection. Now, I&#39;d like some suggestions about how the user can assign himself the building he owns, and how can i structure this data to be able to assign the building to a user which will be able to upload or modify data about the building. I&#39;d also like to split the buildings into districts, and each district shall have a supervisor who will receive all the data the building owners upload. I&#39;m new to working with databases and I really want to expand my knowledge in this area. \r\n\r\nI haven&#39;t really tried anything yet since I don&#39;t know where to start. ","title":"Firestore data structuring for building owners","body":"<p>I am currently a high school student and I'm working on a Java, Android Studio project that involves creating an app using a database. I chose to go with Firestore.</p>\n<p>My app is going to be an app that will store data about some buildings in my city. The building owners will create an account and they will be able to upload data about their buildings. My question is, how do I do that in the database? I've already done the auth process and the users are automatically stored in a collection. Now, I'd like some suggestions about how the user can assign himself the building he owns, and how can i structure this data to be able to assign the building to a user which will be able to upload or modify data about the building. I'd also like to split the buildings into districts, and each district shall have a supervisor who will receive all the data the building owners upload. I'm new to working with databases and I really want to expand my knowledge in this area.</p>\n<p>I haven't really tried anything yet since I don't know where to start.</p>\n"},{"tags":["java","spring","spring-boot","hateoas","spring-hateoas"],"comments":[{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":1,"creation_date":1408637961,"post_id":25431087,"comment_id":39675190,"body_markdown":"I see at least one place on that page where the `_links` portion is referenced, in the CurieProvider API. Are you certain you&#39;re always supposed to receive links the way you think you are?","body":"I see at least one place on that page where the <code>_links</code> portion is referenced, in the CurieProvider API. Are you certain you&#39;re always supposed to receive links the way you think you are?"},{"owner":{"account_id":448833,"reputation":4580,"user_id":843273,"accept_rate":62,"display_name":"gyoder"},"score":1,"creation_date":1408642760,"post_id":25431087,"comment_id":39677751,"body_markdown":"@Chad are you specifying HAL with something like @EnableHypermediaSupport(type = HypermediaType.HAL)? HAL json format uses _links, but Spring default is simply &quot;links&quot;.","body":"@Chad are you specifying HAL with something like @EnableHypermediaSupport(type = HypermediaType.HAL)? HAL json format uses _links, but Spring default is simply &quot;links&quot;."},{"owner":{"account_id":1913109,"reputation":2051,"user_id":1726359,"accept_rate":74,"display_name":"Chad"},"score":0,"creation_date":1408661230,"post_id":25431087,"comment_id":39686376,"body_markdown":"I actually did not specify anything.","body":"I actually did not specify anything."},{"owner":{"account_id":20399,"reputation":4752,"user_id":48735,"accept_rate":77,"display_name":"Nick Spacek"},"score":2,"creation_date":1452690298,"post_id":25431087,"comment_id":57279754,"body_markdown":"Some behavior changed recently, as on Spring Boot 1.2.8 and Spring HATEOAS 0.16.0 my configuration gives me &quot;_links&quot;, but if I upgrade to Spring Boot 1.3.1 I start getting &quot;links&quot;.","body":"Some behavior changed recently, as on Spring Boot 1.2.8 and Spring HATEOAS 0.16.0 my configuration gives me &quot;_links&quot;, but if I upgrade to Spring Boot 1.3.1 I start getting &quot;links&quot;."},{"owner":{"account_id":10666146,"reputation":910,"user_id":7852676,"accept_rate":39,"display_name":"J. Abel"},"score":0,"creation_date":1529417869,"post_id":25431087,"comment_id":88860187,"body_markdown":"I am using Spring boot 1.5.4 and I start getting &quot;_Link&quot;. The problem is Jersey client does not recognize the structure. Do you could solve the problem?","body":"I am using Spring boot 1.5.4 and I start getting &quot;_Link&quot;. The problem is Jersey client does not recognize the structure. Do you could solve the problem?"}],"answers":[{"comments":[{"owner":{"account_id":1913109,"reputation":2051,"user_id":1726359,"accept_rate":74,"display_name":"Chad"},"score":0,"creation_date":1408709276,"post_id":25433278,"comment_id":39702969,"body_markdown":"I checked today and it seems @EnableHypermediaSupport requires type of HypermediaType. But the only one available is HAL","body":"I checked today and it seems @EnableHypermediaSupport requires type of HypermediaType. But the only one available is HAL"},{"owner":{"account_id":1311122,"reputation":56893,"user_id":1259109,"display_name":"Dave Syer"},"score":0,"creation_date":1408729555,"post_id":25433278,"comment_id":39715098,"body_markdown":"I guess the default isn&#39;t classified as hypermedia. If you `@EnableHypermediaSupport` and don&#39;t specify the type, what happens?","body":"I guess the default isn&#39;t classified as hypermedia. If you <code>@EnableHypermediaSupport</code> and don&#39;t specify the type, what happens?"},{"owner":{"account_id":1913109,"reputation":2051,"user_id":1726359,"accept_rate":74,"display_name":"Chad"},"score":0,"creation_date":1408765987,"post_id":25433278,"comment_id":39725829,"body_markdown":"HAL seems to be the default hypermedia type.","body":"HAL seems to be the default hypermedia type."},{"owner":{"account_id":1311122,"reputation":56893,"user_id":1259109,"display_name":"Dave Syer"},"score":0,"creation_date":1408784926,"post_id":25433278,"comment_id":39729641,"body_markdown":"I guess you need to *not* enable hypermedia support then?","body":"I guess you need to <i>not</i> enable hypermedia support then?"}],"tags":[],"owner":{"account_id":1311122,"reputation":56893,"user_id":1259109,"display_name":"Dave Syer"},"comment_count":4,"down_vote_count":2,"up_vote_count":6,"is_accepted":false,"score":4,"last_activity_date":1408644977,"creation_date":1408644977,"answer_id":25433278,"question_id":25431087,"body_markdown":"If you have HAL available it will be selected for you by spring boot (and &quot;_links&quot; is what you get with HAL). You should be able to `@EnableHypermediaSupport` manually to override the defaults.","title":"Returned json unexpected, has &quot;links&quot; spelled as &quot;_links&quot; and structure different, in Spring hateoas","body":"<p>If you have HAL available it will be selected for you by spring boot (and \"_links\" is what you get with HAL). You should be able to <code>@EnableHypermediaSupport</code> manually to override the defaults.</p>\n"},{"tags":[],"owner":{"account_id":1863638,"reputation":357,"user_id":1687668,"display_name":"TonyLxc"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1465952501,"creation_date":1465951659,"answer_id":37824405,"question_id":25431087,"body_markdown":"Spring Boot now (version=1.3.3.RELEASE) has a property that controls the output JSON format of the `PagedResources`.\r\n\r\nJust add the following config to your `application.yml` file:\r\n\r\n    spring.hateoas.use-hal-as-default-json-media-type: false\r\n\r\nif you need the output to be like (based on question): \r\n\r\n    {\r\n      &quot;productId&quot; : 1,\r\n      &quot;name&quot; : &quot;2&quot;,\r\n      &quot;links&quot; : [\r\n        {\r\n          &quot;rel&quot; : &quot;self&quot;\r\n          &quot;href&quot; : &quot;http://localhost:8080/products/1&quot;\r\n        }\r\n      ]\r\n    }\r\n\r\nEdited:\r\n\r\nBy the way, you only need `@EnableSpringDataWebSupport` annotation in this way.","title":"Returned json unexpected, has &quot;links&quot; spelled as &quot;_links&quot; and structure different, in Spring hateoas","body":"<p>Spring Boot now (version=1.3.3.RELEASE) has a property that controls the output JSON format of the <code>PagedResources</code>.</p>\n\n<p>Just add the following config to your <code>application.yml</code> file:</p>\n\n<pre><code>spring.hateoas.use-hal-as-default-json-media-type: false\n</code></pre>\n\n<p>if you need the output to be like (based on question): </p>\n\n<pre><code>{\n  \"productId\" : 1,\n  \"name\" : \"2\",\n  \"links\" : [\n    {\n      \"rel\" : \"self\"\n      \"href\" : \"http://localhost:8080/products/1\"\n    }\n  ]\n}\n</code></pre>\n\n<p>Edited:</p>\n\n<p>By the way, you only need <code>@EnableSpringDataWebSupport</code> annotation in this way.</p>\n"},{"comments":[{"owner":{"account_id":3836171,"reputation":557,"user_id":3180396,"accept_rate":12,"display_name":"brownfox"},"score":0,"creation_date":1498781758,"post_id":38940131,"comment_id":76654222,"body_markdown":"disabling doesn&#39;t change the format of links in the json.","body":"disabling doesn&#39;t change the format of links in the json."},{"owner":{"account_id":1008930,"reputation":2893,"user_id":1021943,"accept_rate":80,"display_name":"Priidu Neemre"},"score":1,"creation_date":1498808025,"post_id":38940131,"comment_id":76662288,"body_markdown":"@Phaneendra: well, it 100% worked for me. But I guess time has passed, so I&#39;m not sure this solution is relevant with newer versions of `spring-boot`.","body":"@Phaneendra: well, it 100% worked for me. But I guess time has passed, so I&#39;m not sure this solution is relevant with newer versions of <code>spring-boot</code>."},{"owner":{"account_id":3836171,"reputation":557,"user_id":3180396,"accept_rate":12,"display_name":"brownfox"},"score":0,"creation_date":1498900731,"post_id":38940131,"comment_id":76698507,"body_markdown":"hmm..possible.! I&#39;m not allowed to change the vote now..oops!","body":"hmm..possible.! I&#39;m not allowed to change the vote now..oops!"},{"owner":{"account_id":9332407,"reputation":111,"user_id":6927744,"display_name":"tryptophane"},"score":0,"creation_date":1638268998,"post_id":38940131,"comment_id":124037792,"body_markdown":"This also worked for me. After an update from spring boot 2.2 to 2.5, my hateos links were added in the HAL format as _links instead of links. This trick restored the previous behavior.","body":"This also worked for me. After an update from spring boot 2.2 to 2.5, my hateos links were added in the HAL format as _links instead of links. This trick restored the previous behavior."}],"tags":[],"owner":{"account_id":1008930,"reputation":2893,"user_id":1021943,"accept_rate":80,"display_name":"Priidu Neemre"},"comment_count":4,"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1471262286,"creation_date":1471160154,"answer_id":38940131,"question_id":25431087,"body_markdown":"Another option would be to disable the whole hypermedia auto-configuration feature (this is how it&#39;s done in one of the `spring-boot` + REST examples [here](https://github.com/kenriggio/spring-boot-rest-example/blob/master/src/main/java/com/hackathon/socialstream/config/Application.java)): \r\n\r\n    @EnableAutoConfiguration(exclude = HypermediaAutoConfiguration.class)\r\n\r\nAs far as I know, `HypermediaAutoConfiguration` doesn&#39;t really do much except for configuring HAL, so it should be perfectly fine to disable it. ","title":"Returned json unexpected, has &quot;links&quot; spelled as &quot;_links&quot; and structure different, in Spring hateoas","body":"<p>Another option would be to disable the whole hypermedia auto-configuration feature (this is how it's done in one of the <code>spring-boot</code> + REST examples <a href=\"https://github.com/kenriggio/spring-boot-rest-example/blob/master/src/main/java/com/hackathon/socialstream/config/Application.java\" rel=\"noreferrer\">here</a>): </p>\n\n<pre><code>@EnableAutoConfiguration(exclude = HypermediaAutoConfiguration.class)\n</code></pre>\n\n<p>As far as I know, <code>HypermediaAutoConfiguration</code> doesn't really do much except for configuring HAL, so it should be perfectly fine to disable it. </p>\n"},{"comments":[{"owner":{"account_id":3072521,"reputation":1252,"user_id":2602807,"accept_rate":41,"display_name":"user2602807"},"score":0,"creation_date":1506683802,"post_id":45086349,"comment_id":79929677,"body_markdown":"I have the same problem and I am not using @RepositoryRestResource","body":"I have the same problem and I am not using @RepositoryRestResource"}],"tags":[],"owner":{"account_id":6174988,"reputation":11040,"user_id":4812170,"accept_rate":73,"display_name":"vaquar khan"},"comment_count":1,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1499964995,"creation_date":1499963271,"answer_id":45086349,"question_id":25431087,"body_markdown":"I am sure you are using Spring data with @RepositoryRestResource annotation \r\n\r\n    @RepositoryRestResource    \r\n    public interface XX extends CrudRepository&lt;AA, String&gt;\r\n\r\nIf you want to remove default HAL behavior you can add following annotaion param\r\n\r\n\r\n    @RepositoryRestResource(exported = false)\r\n    public interface XX extends CrudRepository&lt;AA, String&gt;\r\n\r\nAbove configurition Spring Data REST to only expose rest endpoints for resources in the parent project, without having to explicitly annotate every repository in the dependency project. \r\n\r\nAs per doc\r\n\r\nHiding certain repositories, query methods, or fields\r\nYou may not want a certain repository, a query method on a repository, or a field of your entity to be exported at all. Examples include hiding fields like password on a User object or similar sensitive data. To tell the exporter to not export these items, annotate them with @RestResource and set exported = false.\r\n\r\nFor example, to skip exporting a Repository:\r\n\r\n    @RepositoryRestResource(exported = false)\r\n    interface PersonRepository extends CrudRepository&lt;Person, Long&gt; {}","title":"Returned json unexpected, has &quot;links&quot; spelled as &quot;_links&quot; and structure different, in Spring hateoas","body":"<p>I am sure you are using Spring data with @RepositoryRestResource annotation </p>\n\n<pre><code>@RepositoryRestResource    \npublic interface XX extends CrudRepository&lt;AA, String&gt;\n</code></pre>\n\n<p>If you want to remove default HAL behavior you can add following annotaion param</p>\n\n<pre><code>@RepositoryRestResource(exported = false)\npublic interface XX extends CrudRepository&lt;AA, String&gt;\n</code></pre>\n\n<p>Above configurition Spring Data REST to only expose rest endpoints for resources in the parent project, without having to explicitly annotate every repository in the dependency project. </p>\n\n<p>As per doc</p>\n\n<p>Hiding certain repositories, query methods, or fields\nYou may not want a certain repository, a query method on a repository, or a field of your entity to be exported at all. Examples include hiding fields like password on a User object or similar sensitive data. To tell the exporter to not export these items, annotate them with @RestResource and set exported = false.</p>\n\n<p>For example, to skip exporting a Repository:</p>\n\n<pre><code>@RepositoryRestResource(exported = false)\ninterface PersonRepository extends CrudRepository&lt;Person, Long&gt; {}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":5169856,"reputation":1150,"user_id":4138739,"accept_rate":33,"display_name":"Peter"},"score":1,"creation_date":1522247428,"post_id":46488033,"comment_id":86081275,"body_markdown":"It took me a whole day to find this out. -.- Thanks for posting this update! :)","body":"It took me a whole day to find this out. -.- Thanks for posting this update! :)"}],"tags":[],"owner":{"account_id":3072521,"reputation":1252,"user_id":2602807,"accept_rate":41,"display_name":"user2602807"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1506685162,"creation_date":1506685162,"answer_id":46488033,"question_id":25431087,"body_markdown":"I have notice the problem appears at least when you trying to return an object extends ResourseSupport vs object **containing** object extends ResourseSupport.\r\nYou may return even List or Array of object(s) extends ResourseSupport and have the same effect.\r\nSee the example :\r\n\r\n    @RequestMapping(method = GET, value = &quot;/read&quot;)\r\n    public NfcCommand statusPayOrder() {\r\n        return generateNfcCommand();\r\n    }\r\n\r\nhave response:\r\n\r\n    {\r\n        &quot;field&quot;: &quot;123&quot;,\r\n        &quot;_links&quot;: {\r\n            &quot;self&quot;: {\r\n                &quot;href&quot;: &quot;http://bla_bla_bla_url&quot;\r\n            }\r\n        }\r\n    }\r\n\r\nWhen try to wrap as List:\r\n\r\n    @RequestMapping(method = GET, value = &quot;/read&quot;)\r\n    public List&lt;NfcCommand&gt; statusPayOrder() {\r\n        return Arrays.asList(generateNfcCommand());\r\n    }\r\n\r\ngetting:\r\n\r\n    [\r\n        {\r\n            &quot;field&quot;: 123\r\n            &quot;links&quot;: [\r\n                {\r\n                    &quot;rel&quot;: &quot;self&quot;,\r\n                    &quot;href&quot;: &quot;http://bla_bla_bla_url&quot;\r\n                }\r\n            ]\r\n        }\r\n    ]\r\n\r\nChanging structure of an answer is not the right decision, but we can try to think further this way.","title":"Returned json unexpected, has &quot;links&quot; spelled as &quot;_links&quot; and structure different, in Spring hateoas","body":"<p>I have notice the problem appears at least when you trying to return an object extends ResourseSupport vs object <strong>containing</strong> object extends ResourseSupport.\nYou may return even List or Array of object(s) extends ResourseSupport and have the same effect.\nSee the example :</p>\n\n<pre><code>@RequestMapping(method = GET, value = \"/read\")\npublic NfcCommand statusPayOrder() {\n    return generateNfcCommand();\n}\n</code></pre>\n\n<p>have response:</p>\n\n<pre><code>{\n    \"field\": \"123\",\n    \"_links\": {\n        \"self\": {\n            \"href\": \"http://bla_bla_bla_url\"\n        }\n    }\n}\n</code></pre>\n\n<p>When try to wrap as List:</p>\n\n<pre><code>@RequestMapping(method = GET, value = \"/read\")\npublic List&lt;NfcCommand&gt; statusPayOrder() {\n    return Arrays.asList(generateNfcCommand());\n}\n</code></pre>\n\n<p>getting:</p>\n\n<pre><code>[\n    {\n        \"field\": 123\n        \"links\": [\n            {\n                \"rel\": \"self\",\n                \"href\": \"http://bla_bla_bla_url\"\n            }\n        ]\n    }\n]\n</code></pre>\n\n<p>Changing structure of an answer is not the right decision, but we can try to think further this way.</p>\n"},{"tags":[],"owner":{"account_id":297370,"reputation":3213,"user_id":602856,"accept_rate":40,"display_name":"rainer198"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1531489584,"creation_date":1531489584,"answer_id":51326654,"question_id":25431087,"body_markdown":"I&#39;ve recently had the opposite issue, expected the HAL form (i.e. `_links`) but always got `links`, although using `@EnableAutoConfiguration`.\r\n\r\nThe solution to my issue might help here as well. Due to copying&amp;pasting from an example I found, I had two mediatypes in my RestController&#39;s `@RequestMapping`annotation\r\n\r\n    @RequestMapping(path=&quot;/example&quot;, produces = {MediaType.APPLICATION_JSON_VALUE, &quot;application/hal+json&quot;})\r\n\r\nWith `@EnableAutoConfiguration` Spring HATEOAS registers an ObjectMapper for `application/hal+json` only and in my application there was another one responsible for `MediaType.APPLICATION_JSON_VALUE` which won the selection and rendered standard JSON.\r\n\r\nSo my solution to only set `produces=&quot;application/hal+json&quot;` so that the Spring HATEOAS object mapper is choosen. In your case you should try to keep `MediaType.APPLICATION_JSON_VALUE`\r\n","title":"Returned json unexpected, has &quot;links&quot; spelled as &quot;_links&quot; and structure different, in Spring hateoas","body":"<p>I've recently had the opposite issue, expected the HAL form (i.e. <code>_links</code>) but always got <code>links</code>, although using <code>@EnableAutoConfiguration</code>.</p>\n\n<p>The solution to my issue might help here as well. Due to copying&amp;pasting from an example I found, I had two mediatypes in my RestController's <code>@RequestMapping</code>annotation</p>\n\n<pre><code>@RequestMapping(path=\"/example\", produces = {MediaType.APPLICATION_JSON_VALUE, \"application/hal+json\"})\n</code></pre>\n\n<p>With <code>@EnableAutoConfiguration</code> Spring HATEOAS registers an ObjectMapper for <code>application/hal+json</code> only and in my application there was another one responsible for <code>MediaType.APPLICATION_JSON_VALUE</code> which won the selection and rendered standard JSON.</p>\n\n<p>So my solution to only set <code>produces=\"application/hal+json\"</code> so that the Spring HATEOAS object mapper is choosen. In your case you should try to keep <code>MediaType.APPLICATION_JSON_VALUE</code></p>\n"},{"comments":[{"owner":{"account_id":17872665,"reputation":495,"user_id":12983543,"display_name":"Matteo Possamai"},"score":1,"creation_date":1664609169,"post_id":73875182,"comment_id":130514646,"body_markdown":"You can better format this answer, even if it is correct","body":"You can better format this answer, even if it is correct"},{"owner":{"account_id":17872665,"reputation":495,"user_id":12983543,"display_name":"Matteo Possamai"},"score":0,"creation_date":1664609181,"post_id":73875182,"comment_id":130514648,"body_markdown":"Needs to bebetter formatter","body":"Needs to bebetter formatter"},{"owner":{"account_id":19286463,"reputation":1,"user_id":14097331,"display_name":"Sean Turner"},"score":0,"creation_date":1664719490,"post_id":73875182,"comment_id":130531508,"body_markdown":"You’re right. I can do that.","body":"You’re right. I can do that."}],"tags":[],"owner":{"account_id":19286463,"reputation":1,"user_id":14097331,"display_name":"Sean Turner"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664327089,"creation_date":1664327089,"answer_id":73875182,"question_id":25431087,"body_markdown":"I was also getting the &#39;_links&#39; thing... I found that in my @RequestMapping I mistakenly had:\r\n@RequestMapping(&quot;id&quot;) when I should have had:\r\n@RequestMapping(&quot;{id}&quot;)\r\n\r\nWhen I fixed that, the &#39;_links&#39; thing went away.","title":"Returned json unexpected, has &quot;links&quot; spelled as &quot;_links&quot; and structure different, in Spring hateoas","body":"<p>I was also getting the '_links' thing... I found that in my @RequestMapping I mistakenly had:\n@RequestMapping(&quot;id&quot;) when I should have had:\n@RequestMapping(&quot;{id}&quot;)</p>\n<p>When I fixed that, the '_links' thing went away.</p>\n"}],"owner":{"account_id":1913109,"reputation":2051,"user_id":1726359,"accept_rate":74,"display_name":"Chad"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15555,"favorite_count":0,"down_vote_count":0,"up_vote_count":15,"answer_count":7,"score":15,"last_activity_date":1683264705,"creation_date":1408637634,"question_id":25431087,"body_markdown":"As the title says, I have a resource object ``Product`` extending ``ResourceSupport``. However, the responses I receive have the property &quot;_links&quot; instead of &quot;links&quot; and have a different structure.\r\n\r\n    {\r\n      &quot;productId&quot; : 1,\r\n      &quot;name&quot; : &quot;2&quot;,\r\n      &quot;_links&quot; : {\r\n        &quot;self&quot; : {\r\n          &quot;href&quot; : &quot;http://localhost:8080/products/1&quot;\r\n        }\r\n      }\r\n    }\r\n\r\nBased on the [HATEOAS Reference][1], the expected is:\r\n\r\n    {\r\n      &quot;productId&quot; : 1,\r\n      &quot;name&quot; : &quot;2&quot;,\r\n      &quot;links&quot; : [\r\n        {\r\n          &quot;rel&quot; : &quot;self&quot;\r\n          &quot;href&quot; : &quot;http://localhost:8080/products/1&quot;\r\n        }\r\n      ]\r\n    }\r\n\r\n**Was this intended? Is there a way to change it, or at leas the &quot;link&quot; if not the structure?**\r\n\r\nI added the selfLink through the following snippet:\r\n\r\n    product.add(linkTo(ProductController.class).slash(product.getProductId()).withSelfRel());\r\n\r\nI am using spring boot with the following build file:\r\n\r\n    dependencies {\r\n        compile (&quot;org.springframework.boot:spring-boot-starter-data-rest&quot;) {\r\n            exclude module: &quot;spring-boot-starter-tomcat&quot;\r\n        }\r\n    \r\n    \tcompile &quot;org.springframework.boot:spring-boot-starter-data-jpa&quot;\r\n        compile &quot;org.springframework.boot:spring-boot-starter-jetty&quot;\r\n        compile &quot;org.springframework.boot:spring-boot-starter-actuator&quot;\r\n    \r\n    \truntime &quot;org.hsqldb:hsqldb:2.3.2&quot;\r\n    \r\n        testCompile &quot;junit:junit&quot;\r\n    }\r\n\r\n  [1]: https://github.com/spring-projects/spring-hateoas/blob/master/readme.md","title":"Returned json unexpected, has &quot;links&quot; spelled as &quot;_links&quot; and structure different, in Spring hateoas","body":"<p>As the title says, I have a resource object <code>Product</code> extending <code>ResourceSupport</code>. However, the responses I receive have the property \"_links\" instead of \"links\" and have a different structure.</p>\n\n<pre><code>{\n  \"productId\" : 1,\n  \"name\" : \"2\",\n  \"_links\" : {\n    \"self\" : {\n      \"href\" : \"http://localhost:8080/products/1\"\n    }\n  }\n}\n</code></pre>\n\n<p>Based on the <a href=\"https://github.com/spring-projects/spring-hateoas/blob/master/readme.md\" rel=\"noreferrer\">HATEOAS Reference</a>, the expected is:</p>\n\n<pre><code>{\n  \"productId\" : 1,\n  \"name\" : \"2\",\n  \"links\" : [\n    {\n      \"rel\" : \"self\"\n      \"href\" : \"http://localhost:8080/products/1\"\n    }\n  ]\n}\n</code></pre>\n\n<p><strong>Was this intended? Is there a way to change it, or at leas the \"link\" if not the structure?</strong></p>\n\n<p>I added the selfLink through the following snippet:</p>\n\n<pre><code>product.add(linkTo(ProductController.class).slash(product.getProductId()).withSelfRel());\n</code></pre>\n\n<p>I am using spring boot with the following build file:</p>\n\n<pre><code>dependencies {\n    compile (\"org.springframework.boot:spring-boot-starter-data-rest\") {\n        exclude module: \"spring-boot-starter-tomcat\"\n    }\n\n    compile \"org.springframework.boot:spring-boot-starter-data-jpa\"\n    compile \"org.springframework.boot:spring-boot-starter-jetty\"\n    compile \"org.springframework.boot:spring-boot-starter-actuator\"\n\n    runtime \"org.hsqldb:hsqldb:2.3.2\"\n\n    testCompile \"junit:junit\"\n}\n</code></pre>\n"},{"tags":["java","spring","hibernate","events","listener"],"comments":[{"owner":{"account_id":53169,"reputation":1417,"user_id":158944,"accept_rate":59,"display_name":"bungrudi"},"score":0,"creation_date":1534325723,"post_id":51854951,"comment_id":90664711,"body_markdown":"hk.gov.ehr.server.EntityEventListenerRegistry should implement org.hibernate.Interceptor.\nHave this been the case?","body":"hk.gov.ehr.server.EntityEventListenerRegistry should implement org.hibernate.Interceptor. Have this been the case?"},{"owner":{"account_id":8696420,"reputation":269,"user_id":6507615,"display_name":"leonlai"},"score":0,"creation_date":1534346315,"post_id":51854951,"comment_id":90675347,"body_markdown":"@bungrudi Yes! you are right. Thanks for your help!\nAlso, what can I do if I want to register the PostInsertEventListener like this stackoverflow?\nhttps://stackoverflow.com/questions/20368551/preinsert-and-preupdate-event-listener-in-hibernate","body":"@bungrudi Yes! you are right. Thanks for your help! Also, what can I do if I want to register the PostInsertEventListener like this stackoverflow? <a href=\"https://stackoverflow.com/questions/20368551/preinsert-and-preupdate-event-listener-in-hibernate\" title=\"preinsert and preupdate event listener in hibernate\">stackoverflow.com/questions/20368551/&hellip;</a>"},{"owner":{"account_id":53169,"reputation":1417,"user_id":158944,"accept_rate":59,"display_name":"bungrudi"},"score":0,"creation_date":1534407183,"post_id":51854951,"comment_id":90696310,"body_markdown":"create another question and I&#39;ll help ;)","body":"create another question and I&#39;ll help ;)"}],"answers":[{"tags":[],"owner":{"account_id":53169,"reputation":1417,"user_id":158944,"accept_rate":59,"display_name":"bungrudi"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1534407066,"creation_date":1534407066,"answer_id":51872450,"question_id":51854951,"body_markdown":"Per my comment, the interceptor needs to implement *org.hibernate.Interceptor*.","title":"How to register Entity Event Listeners with Spring and Hibernate 5","body":"<p>Per my comment, the interceptor needs to implement <em>org.hibernate.Interceptor</em>.</p>\n"},{"tags":[],"owner":{"account_id":11407644,"reputation":843,"user_id":8362671,"accept_rate":60,"display_name":"Angad Bansode"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1534421009,"creation_date":1534421009,"answer_id":51876621,"question_id":51854951,"body_markdown":"You can register hibernate EventListener using java class also, as i did.\r\n\r\nPlease check this one. It Could help you. \r\n\r\n1) Register EventListener with Integrator.\r\n\r\n  \r\n\r\n        @Override\r\n       public void integrate(Metadata metadata, SessionFactoryImplementor \r\n             sessionFactory, SessionFactoryServiceRegistry serviceRegistry) \r\n       {\r\n    \r\n          EventListenerRegistry eventListenerRegistry = \r\n                serviceRegistry.getService(EventListenerRegistry.class);\r\n    \r\n         /* eventListenerRegistry.getEventListenerGroup(EventType.SAVE)\r\n                         .appendListener(new SaveUpdateEventListenerImp());*/\r\n          \r\n          eventListenerRegistry.getEventListenerGroup(EventType.SAVE_UPDATE)\r\n          .appendListener(new SaveUpdateEventListenerImp());\r\n          \r\n          eventListenerRegistry.getEventListenerGroup(EventType.LOAD)\r\n                         .appendListener(new LoadEventListenerImp());\r\n          \r\n          eventListenerRegistry.getEventListenerGroup(EventType.REFRESH)\r\n                         .appendListener(new RefreshEventListenerImp());\r\n       }\r\n\r\n 2) We can check LoadEventListener from here. Just Implements LoadEventListener.\r\n     When you load Book entity from DB then  LoadEventListener will call.\r\n\r\n  \r\n\r\n      public class LoadEventListenerImp implements LoadEventListener {\r\n       \r\n       private static final long serialVersionUID = 1L;\r\n       private static Logger logger = LogManager.getLogger(LoadEventListenerImp.class);\r\n    \r\n       @Override\r\n       public void onLoad(LoadEvent e, LoadType type) throws HibernateException {\r\n          logger.info(&quot;onLoad is called.&quot;);\r\n          Object obj = e.getResult();\r\n          if (obj instanceof Book) {\r\n             Book book = (Book) obj;\r\n             logger.info(&quot;Book on load event {} &quot; , book);\r\n          }\r\n       }","title":"How to register Entity Event Listeners with Spring and Hibernate 5","body":"<p>You can register hibernate EventListener using java class also, as i did.</p>\n\n<p>Please check this one. It Could help you. </p>\n\n<p>1) Register EventListener with Integrator.</p>\n\n<pre><code>    @Override\n   public void integrate(Metadata metadata, SessionFactoryImplementor \n         sessionFactory, SessionFactoryServiceRegistry serviceRegistry) \n   {\n\n      EventListenerRegistry eventListenerRegistry = \n            serviceRegistry.getService(EventListenerRegistry.class);\n\n     /* eventListenerRegistry.getEventListenerGroup(EventType.SAVE)\n                     .appendListener(new SaveUpdateEventListenerImp());*/\n\n      eventListenerRegistry.getEventListenerGroup(EventType.SAVE_UPDATE)\n      .appendListener(new SaveUpdateEventListenerImp());\n\n      eventListenerRegistry.getEventListenerGroup(EventType.LOAD)\n                     .appendListener(new LoadEventListenerImp());\n\n      eventListenerRegistry.getEventListenerGroup(EventType.REFRESH)\n                     .appendListener(new RefreshEventListenerImp());\n   }\n</code></pre>\n\n<p>2) We can check LoadEventListener from here. Just Implements LoadEventListener.\n     When you load Book entity from DB then  LoadEventListener will call.</p>\n\n<pre><code>  public class LoadEventListenerImp implements LoadEventListener {\n\n   private static final long serialVersionUID = 1L;\n   private static Logger logger = LogManager.getLogger(LoadEventListenerImp.class);\n\n   @Override\n   public void onLoad(LoadEvent e, LoadType type) throws HibernateException {\n      logger.info(\"onLoad is called.\");\n      Object obj = e.getResult();\n      if (obj instanceof Book) {\n         Book book = (Book) obj;\n         logger.info(\"Book on load event {} \" , book);\n      }\n   }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8696420,"reputation":269,"user_id":6507615,"display_name":"leonlai"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1569256058,"creation_date":1534472005,"answer_id":51887544,"question_id":51854951,"body_markdown":"Finally, I tried this and work fine.\r\n\r\n    @Component\r\n    public class EntityEventListenerRegistry {\r\n    \r\n        @Autowired\r\n        private SessionFactory sessionFactory;\r\n    \r\n        @Autowired\r\n        private AuditLogPostInsertEventListener auditLogPostInsertEventListener;\r\n    \r\n        @Autowired\r\n        private AuditLogPostUpdateEventListener auditLogPostUpdateEventListener;\r\n    \r\n        @Autowired\r\n        private AuditLogPostDeleteEventListener auditLogPostDeleteEventListener;\r\n    \r\n        @PostConstruct\r\n        public void registerListeners() {\r\n            EventListenerRegistry registry = ((SessionFactoryImpl) sessionFactory).getServiceRegistry().getService(EventListenerRegistry.class);\r\n            registry.getEventListenerGroup(EventType.POST_COMMIT_INSERT).appendListener(auditLogPostInsertEventListener);\r\n            registry.getEventListenerGroup(EventType.POST_COMMIT_UPDATE).appendListener(auditLogPostUpdateEventListener);\r\n            registry.getEventListenerGroup(EventType.POST_COMMIT_DELETE).appendListener(auditLogPostDeleteEventListener);\r\n        }\r\n    }","title":"How to register Entity Event Listeners with Spring and Hibernate 5","body":"<p>Finally, I tried this and work fine.</p>\n\n<pre><code>@Component\npublic class EntityEventListenerRegistry {\n\n    @Autowired\n    private SessionFactory sessionFactory;\n\n    @Autowired\n    private AuditLogPostInsertEventListener auditLogPostInsertEventListener;\n\n    @Autowired\n    private AuditLogPostUpdateEventListener auditLogPostUpdateEventListener;\n\n    @Autowired\n    private AuditLogPostDeleteEventListener auditLogPostDeleteEventListener;\n\n    @PostConstruct\n    public void registerListeners() {\n        EventListenerRegistry registry = ((SessionFactoryImpl) sessionFactory).getServiceRegistry().getService(EventListenerRegistry.class);\n        registry.getEventListenerGroup(EventType.POST_COMMIT_INSERT).appendListener(auditLogPostInsertEventListener);\n        registry.getEventListenerGroup(EventType.POST_COMMIT_UPDATE).appendListener(auditLogPostUpdateEventListener);\n        registry.getEventListenerGroup(EventType.POST_COMMIT_DELETE).appendListener(auditLogPostDeleteEventListener);\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3965245,"reputation":4105,"user_id":3271406,"accept_rate":25,"display_name":"lu_ko"},"score":1,"creation_date":1546274502,"post_id":53766830,"comment_id":94816778,"body_markdown":"Thank you! And one hint for Spring Boot 2.0.0: You can use `HibernatePropertiesCustomizer` to set up configuration properties - see https://stackoverflow.com/a/51522146/3271406","body":"Thank you! And one hint for Spring Boot 2.0.0: You can use <code>HibernatePropertiesCustomizer</code> to set up configuration properties - see <a href=\"https://stackoverflow.com/a/51522146/3271406\">stackoverflow.com/a/51522146/3271406</a>"},{"owner":{"account_id":550722,"reputation":4460,"user_id":906265,"display_name":"Ivar"},"score":0,"creation_date":1578595830,"post_id":53766830,"comment_id":105499650,"body_markdown":"kudos to @lu_ko I&#39;ve forked his repo and added above response as an example how to register events in springboot v2 https://github.com/ivarprudnikov/hibernate-properties-customizer-example","body":"kudos to @lu_ko I&#39;ve forked his repo and added above response as an example how to register events in springboot v2 <a href=\"https://github.com/ivarprudnikov/hibernate-properties-customizer-example\" rel=\"nofollow noreferrer\">github.com/ivarprudnikov/&hellip;</a>"},{"owner":{"account_id":37431,"reputation":837,"user_id":107013,"accept_rate":80,"display_name":"MyKey_"},"score":0,"creation_date":1639560434,"post_id":53766830,"comment_id":124377424,"body_markdown":"Might be worth noting that the configuration property &quot;hibernate.integrator_provider&quot; accepts class names (FQDNs) starting with Hibernate version 5.4.9 (https://hibernate.atlassian.net/browse/HHH-13614). \nFor earlier versions, an Integrator Object must be set.","body":"Might be worth noting that the configuration property &quot;hibernate.integrator_provider&quot; accepts class names (FQDNs) starting with Hibernate version 5.4.9 (<a href=\"https://hibernate.atlassian.net/browse/HHH-13614\" rel=\"nofollow noreferrer\">hibernate.atlassian.net/browse/HHH-13614</a>).  For earlier versions, an Integrator Object must be set."}],"tags":[],"owner":{"account_id":1012936,"reputation":145178,"user_id":1025118,"accept_rate":100,"display_name":"Vlad Mihalcea"},"comment_count":3,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1683264464,"creation_date":1544720787,"answer_id":53766830,"question_id":51854951,"body_markdown":"The most portable way of setting the Hibernate entity listeners is via the [`org.hibernate.integrator.spi.Integrator`](https://vladmihalcea.com/hibernate-event-listeners/\r\n). This way, you can get it working for both `JpaTransactionManager` and `HibernateTransactionManager`.\r\n\r\nImplementing the `Integrator` interface\r\n---------------------------------------\r\n\r\nYou need to implement the `Integrator` as follows:\r\n\r\n    public class ReplicationEventListenerIntegrator \r\n            implements Integrator {\r\n     \r\n        public static final ReplicationEventListenerIntegrator INSTANCE = \r\n            new ReplicationEventListenerIntegrator();\r\n     \r\n        @Override\r\n        public void integrate(\r\n                Metadata metadata,\r\n                SessionFactoryImplementor sessionFactory,\r\n                SessionFactoryServiceRegistry serviceRegistry) {\r\n     \r\n            final EventListenerRegistry eventListenerRegistry =\r\n                    serviceRegistry.getService(EventListenerRegistry.class);\r\n     \r\n            eventListenerRegistry.appendListeners(\r\n                EventType.POST_INSERT, \r\n                ReplicationInsertEventListener.INSTANCE\r\n            );\r\n             \r\n            eventListenerRegistry.appendListeners(\r\n                EventType.POST_UPDATE, \r\n                ReplicationUpdateEventListener.INSTANCE\r\n            );\r\n             \r\n            eventListenerRegistry.appendListeners(\r\n                EventType.PRE_DELETE, \r\n                ReplicationDeleteEventListener.INSTANCE\r\n            );\r\n        }\r\n     \r\n        @Override\r\n        public void disintegrate(\r\n                SessionFactoryImplementor sessionFactory,\r\n                SessionFactoryServiceRegistry serviceRegistry) {\r\n     \r\n        }\r\n    }\r\n\r\nVia the `eventListenerRegistry`, you can register the event listeners.\r\n\r\nSetting the `hibernate.integrator_provider` configuration property\r\n------------------------------------------------------------------\r\n\r\nOnce you are done, you need to set up the `hibernate.integrator_provider` configuration property via the **application.properties** file, like this:\r\n\r\n    spring.jpa.properties.hibernate.integrator_provider=com.vladmihalcea.book.hpjp.hibernate.listener.ReplicationEventListenerIntegrator\r\n\r\n","title":"How to register Entity Event Listeners with Spring and Hibernate 5","body":"<p>The most portable way of setting the Hibernate entity listeners is via the <a href=\"https://vladmihalcea.com/hibernate-event-listeners/\" rel=\"nofollow noreferrer\"><code>org.hibernate.integrator.spi.Integrator</code></a>. This way, you can get it working for both <code>JpaTransactionManager</code> and <code>HibernateTransactionManager</code>.</p>\n<h2>Implementing the <code>Integrator</code> interface</h2>\n<p>You need to implement the <code>Integrator</code> as follows:</p>\n<pre><code>public class ReplicationEventListenerIntegrator \n        implements Integrator {\n \n    public static final ReplicationEventListenerIntegrator INSTANCE = \n        new ReplicationEventListenerIntegrator();\n \n    @Override\n    public void integrate(\n            Metadata metadata,\n            SessionFactoryImplementor sessionFactory,\n            SessionFactoryServiceRegistry serviceRegistry) {\n \n        final EventListenerRegistry eventListenerRegistry =\n                serviceRegistry.getService(EventListenerRegistry.class);\n \n        eventListenerRegistry.appendListeners(\n            EventType.POST_INSERT, \n            ReplicationInsertEventListener.INSTANCE\n        );\n         \n        eventListenerRegistry.appendListeners(\n            EventType.POST_UPDATE, \n            ReplicationUpdateEventListener.INSTANCE\n        );\n         \n        eventListenerRegistry.appendListeners(\n            EventType.PRE_DELETE, \n            ReplicationDeleteEventListener.INSTANCE\n        );\n    }\n \n    @Override\n    public void disintegrate(\n            SessionFactoryImplementor sessionFactory,\n            SessionFactoryServiceRegistry serviceRegistry) {\n \n    }\n}\n</code></pre>\n<p>Via the <code>eventListenerRegistry</code>, you can register the event listeners.</p>\n<h2>Setting the <code>hibernate.integrator_provider</code> configuration property</h2>\n<p>Once you are done, you need to set up the <code>hibernate.integrator_provider</code> configuration property via the <strong>application.properties</strong> file, like this:</p>\n<pre><code>spring.jpa.properties.hibernate.integrator_provider=com.vladmihalcea.book.hpjp.hibernate.listener.ReplicationEventListenerIntegrator\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27714646,"reputation":21,"user_id":21156637,"display_name":"Tom Van Eetvelde"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677830960,"creation_date":1677830960,"answer_id":75624586,"question_id":51854951,"body_markdown":"With spring 5.3.19 and hibernate 5.6.7, it is just a syntax change with respect to the hibernate 3 version.\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    \t&lt;bean id=&quot;entityManagerFactory&quot; class=&quot;org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean&quot;&gt;\r\n    \t\t...\r\n    \t\t&lt;property name=&quot;jpaProperties&quot;&gt;\r\n    \t\t\t&lt;props&gt;\r\n    \t\t\t\t...\r\n    \t\t\t\t&lt;prop key=&quot;hibernate.event.listener.post-insert&quot;&gt;xxxx.AuditLogPostInsertEventListener&lt;/prop&gt;\r\n    \t\t\t\t&lt;prop key=&quot;hibernate.event.listener.post-update&quot;&gt;xxxx.AuditLogPostUpdateEventListener&lt;/prop&gt;\r\n    \t\t\t&lt;/props&gt;\r\n    \t\t&lt;/property&gt;\r\n    \t\t&lt;!-- jpaPropertyMap adds on top of what has already been defined in jpaProperties above --&gt;\r\n    \t\t&lt;property name=&quot;jpaPropertyMap&quot;&gt;\r\n    \t\t\t&lt;map&gt;\r\n    \t\t\t\t&lt;!-- This integrates hibernate with the spring container. As such, eg JPA EntityListeners can be managed by spring. --&gt;\r\n    \t\t\t\t&lt;!-- As we need to inject a bean into the jpaPropertyMap, we cannot use a prop key in the above &#39;jpaProperties&#39; xml. --&gt;\r\n    \t\t\t\t&lt;entry key=&quot;hibernate.resource.beans.container&quot;&gt;\r\n    \t\t\t\t\t&lt;bean class=&quot;org.springframework.orm.hibernate5.SpringBeanContainer&quot; /&gt;\r\n    \t\t\t\t&lt;/entry&gt;\r\n    \t\t\t&lt;/map&gt;\r\n    \t\t&lt;/property&gt;\r\n    \t&lt;/bean&gt;\r\n\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"How to register Entity Event Listeners with Spring and Hibernate 5","body":"<p>With spring 5.3.19 and hibernate 5.6.7, it is just a syntax change with respect to the hibernate 3 version.</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>    &lt;bean id=\"entityManagerFactory\" class=\"org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean\"&gt;\n        ...\n        &lt;property name=\"jpaProperties\"&gt;\n            &lt;props&gt;\n                ...\n                &lt;prop key=\"hibernate.event.listener.post-insert\"&gt;xxxx.AuditLogPostInsertEventListener&lt;/prop&gt;\n                &lt;prop key=\"hibernate.event.listener.post-update\"&gt;xxxx.AuditLogPostUpdateEventListener&lt;/prop&gt;\n            &lt;/props&gt;\n        &lt;/property&gt;\n        &lt;!-- jpaPropertyMap adds on top of what has already been defined in jpaProperties above --&gt;\n        &lt;property name=\"jpaPropertyMap\"&gt;\n            &lt;map&gt;\n                &lt;!-- This integrates hibernate with the spring container. As such, eg JPA EntityListeners can be managed by spring. --&gt;\n                &lt;!-- As we need to inject a bean into the jpaPropertyMap, we cannot use a prop key in the above 'jpaProperties' xml. --&gt;\n                &lt;entry key=\"hibernate.resource.beans.container\"&gt;\n                    &lt;bean class=\"org.springframework.orm.hibernate5.SpringBeanContainer\" /&gt;\n                &lt;/entry&gt;\n            &lt;/map&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}],"owner":{"account_id":8696420,"reputation":269,"user_id":6507615,"display_name":"leonlai"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11245,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"accepted_answer_id":51872450,"answer_count":5,"score":9,"last_activity_date":1683264554,"creation_date":1534319912,"question_id":51854951,"body_markdown":"Now, I would like to upgrade my application from Spring Hibernate 3 to 5\r\n\r\nUnder hibernate 3, I create a POST-COMMIT-INSERT|UPDATE|DELETE event listener like below\r\n\r\n\t&lt;bean id=&quot;mySessionFactory&quot; class=&quot;org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean&quot;&gt;\r\n\t\t&lt;property name=&quot;dataSource&quot; ref=&quot;myDataSource&quot; /&gt;\r\n\t\t&lt;property name=&quot;annotatedClasses&quot;&gt;\r\n\t\t\t&lt;list&gt;\r\n\t\t\t\t....\r\n\t\t\t&lt;/list&gt;\r\n\t\t&lt;/property&gt;\r\n\t\t&lt;property name=&quot;hibernateProperties&quot;&gt;\r\n\t\t\t&lt;props&gt;\r\n\t\t\t\t....\r\n\t\t\t&lt;/props&gt;\r\n\t\t&lt;/property&gt;\r\n\t\t&lt;property name=&quot;eventListeners&quot;&gt;\r\n  \t\t\t&lt;map&gt;\r\n   \t\t\t\t&lt;entry key=&quot;post-commit-insert&quot;&gt;\r\n    \t\t\t\t&lt;bean class=&quot;xxxx.AuditLogPostInsertEventListener&quot; /&gt;\r\n   \t\t\t\t&lt;/entry&gt;\r\n   \t\t\t\t&lt;entry key=&quot;post-commit-update&quot;&gt;\r\n    \t\t\t\t&lt;bean class=&quot;xxxx.AuditLogPostUpdateEventListener&quot; /&gt;\r\n   \t\t\t\t&lt;/entry&gt;\r\n   \t\t\t\t&lt;entry key=&quot;post-commit-delete&quot;&gt;\r\n    \t\t\t\t&lt;bean class=&quot;xxxx.AuditLogPostDeleteEventListener&quot; /&gt;\r\n   \t\t\t\t&lt;/entry&gt;\r\n  \t\t\t&lt;/map&gt;\r\n \t\t&lt;/property&gt;\r\n\t&lt;/bean&gt;\r\n\r\nNow, I try to create the event listener under Hibernate 5 but not success\r\n\r\n    &lt;bean id=&quot;mySessionFactory&quot; class=&quot;org.springframework.orm.hibernate5.LocalSessionFactoryBean&quot;&gt;\r\n\t\t&lt;property name=&quot;dataSource&quot; ref=&quot;myDataSource&quot; /&gt;\r\n\t\t&lt;property name=&quot;annotatedClasses&quot;&gt;\r\n\t\t\t&lt;list&gt;\r\n\t\t\t\t...\r\n\t\t\t&lt;/list&gt;\r\n\t\t&lt;/property&gt;\r\n\t\t&lt;property name=&quot;hibernateProperties&quot;&gt;\r\n\t\t\t&lt;props&gt;\r\n\t\t\t\t...\r\n\t\t\t&lt;/props&gt;\r\n\t\t&lt;/property&gt;\r\n\t\t&lt;property name=&quot;eventListeners&quot;&gt;\r\n  \t\t\t&lt;map&gt;\r\n   \t\t\t\t&lt;entry key=&quot;post-commit-insert&quot;&gt;\r\n    \t\t\t\t&lt;bean class=&quot;xxxx.AuditLogPostInsertEventListener&quot; /&gt;\r\n   \t\t\t\t&lt;/entry&gt;\r\n   \t\t\t\t&lt;entry key=&quot;post-commit-update&quot;&gt;\r\n    \t\t\t\t&lt;bean class=&quot;xxxx.AuditLogPostUpdateEventListener&quot; /&gt;\r\n   \t\t\t\t&lt;/entry&gt;\r\n   \t\t\t\t&lt;entry key=&quot;post-commit-delete&quot;&gt;\r\n    \t\t\t\t&lt;bean class=&quot;xxxx.AuditLogPostDeleteEventListener&quot; /&gt;\r\n   \t\t\t\t&lt;/entry&gt;\r\n  \t\t\t&lt;/map&gt;\r\n \t\t&lt;/property&gt;\r\n\t&lt;/bean&gt;\r\n\r\nThe follow message was shown\r\n\r\n&gt; Invalid property &#39;eventListeners&#39; of bean class [org.springframework.orm.hibernate5.LocalSessionFactoryBean]: \r\nBean property &#39;eventListeners&#39; is not writable or has an invalid setter method. \r\nDoes the parameter type of the setter match the return type of the getter?\r\n\r\nI tried to follow this stackoverflow but still not success.\r\n\r\n[PreInsert and PreUpdate Event Listener in hibernate][1]\r\n\r\nI changed the config like below but still not success\r\n\r\n    &lt;bean id=&quot;auditInterceptor&quot; class=&quot;xxxx.EntityEventListenerRegistry&quot; /&gt;\r\n\t\r\n\t&lt;bean id=&quot;mySessionFactory&quot; class=&quot;org.springframework.orm.hibernate5.LocalSessionFactoryBean&quot;&gt;\r\n\t\t&lt;property name=&quot;dataSource&quot; ref=&quot;myDataSource&quot; /&gt;\r\n\t\t&lt;property name=&quot;annotatedClasses&quot;&gt;\r\n\t\t\t&lt;list&gt;\r\n\t\t\t\t...\r\n\t\t\t&lt;/list&gt;\r\n\t\t&lt;/property&gt;\r\n\t\t&lt;property name=&quot;hibernateProperties&quot;&gt;\r\n\t\t\t&lt;props&gt;\r\n\t\t\t\t...\r\n\t\t\t&lt;/props&gt;\r\n\t\t&lt;/property&gt;\r\n\t\t&lt;property name=&quot;entityInterceptor&quot; ref=&quot;xxxx.EntityEventListenerRegistry&quot; /&gt;\r\n\t&lt;/bean&gt;\r\n\r\n  [1]: https://stackoverflow.com/questions/20368551/preinsert-and-preupdate-event-listener-in-hibernate","title":"How to register Entity Event Listeners with Spring and Hibernate 5","body":"<p>Now, I would like to upgrade my application from Spring Hibernate 3 to 5</p>\n<p>Under hibernate 3, I create a POST-COMMIT-INSERT|UPDATE|DELETE event listener like below</p>\n<pre><code>&lt;bean id=&quot;mySessionFactory&quot; class=&quot;org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean&quot;&gt;\n    &lt;property name=&quot;dataSource&quot; ref=&quot;myDataSource&quot; /&gt;\n    &lt;property name=&quot;annotatedClasses&quot;&gt;\n        &lt;list&gt;\n            ....\n        &lt;/list&gt;\n    &lt;/property&gt;\n    &lt;property name=&quot;hibernateProperties&quot;&gt;\n        &lt;props&gt;\n            ....\n        &lt;/props&gt;\n    &lt;/property&gt;\n    &lt;property name=&quot;eventListeners&quot;&gt;\n        &lt;map&gt;\n            &lt;entry key=&quot;post-commit-insert&quot;&gt;\n                &lt;bean class=&quot;xxxx.AuditLogPostInsertEventListener&quot; /&gt;\n            &lt;/entry&gt;\n            &lt;entry key=&quot;post-commit-update&quot;&gt;\n                &lt;bean class=&quot;xxxx.AuditLogPostUpdateEventListener&quot; /&gt;\n            &lt;/entry&gt;\n            &lt;entry key=&quot;post-commit-delete&quot;&gt;\n                &lt;bean class=&quot;xxxx.AuditLogPostDeleteEventListener&quot; /&gt;\n            &lt;/entry&gt;\n        &lt;/map&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n<p>Now, I try to create the event listener under Hibernate 5 but not success</p>\n<pre><code>&lt;bean id=&quot;mySessionFactory&quot; class=&quot;org.springframework.orm.hibernate5.LocalSessionFactoryBean&quot;&gt;\n    &lt;property name=&quot;dataSource&quot; ref=&quot;myDataSource&quot; /&gt;\n    &lt;property name=&quot;annotatedClasses&quot;&gt;\n        &lt;list&gt;\n            ...\n        &lt;/list&gt;\n    &lt;/property&gt;\n    &lt;property name=&quot;hibernateProperties&quot;&gt;\n        &lt;props&gt;\n            ...\n        &lt;/props&gt;\n    &lt;/property&gt;\n    &lt;property name=&quot;eventListeners&quot;&gt;\n        &lt;map&gt;\n            &lt;entry key=&quot;post-commit-insert&quot;&gt;\n                &lt;bean class=&quot;xxxx.AuditLogPostInsertEventListener&quot; /&gt;\n            &lt;/entry&gt;\n            &lt;entry key=&quot;post-commit-update&quot;&gt;\n                &lt;bean class=&quot;xxxx.AuditLogPostUpdateEventListener&quot; /&gt;\n            &lt;/entry&gt;\n            &lt;entry key=&quot;post-commit-delete&quot;&gt;\n                &lt;bean class=&quot;xxxx.AuditLogPostDeleteEventListener&quot; /&gt;\n            &lt;/entry&gt;\n        &lt;/map&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n<p>The follow message was shown</p>\n<blockquote>\n<p>Invalid property 'eventListeners' of bean class [org.springframework.orm.hibernate5.LocalSessionFactoryBean]:\nBean property 'eventListeners' is not writable or has an invalid setter method.\nDoes the parameter type of the setter match the return type of the getter?</p>\n</blockquote>\n<p>I tried to follow this stackoverflow but still not success.</p>\n<p><a href=\"https://stackoverflow.com/questions/20368551/preinsert-and-preupdate-event-listener-in-hibernate\">PreInsert and PreUpdate Event Listener in hibernate</a></p>\n<p>I changed the config like below but still not success</p>\n<pre><code>&lt;bean id=&quot;auditInterceptor&quot; class=&quot;xxxx.EntityEventListenerRegistry&quot; /&gt;\n\n&lt;bean id=&quot;mySessionFactory&quot; class=&quot;org.springframework.orm.hibernate5.LocalSessionFactoryBean&quot;&gt;\n    &lt;property name=&quot;dataSource&quot; ref=&quot;myDataSource&quot; /&gt;\n    &lt;property name=&quot;annotatedClasses&quot;&gt;\n        &lt;list&gt;\n            ...\n        &lt;/list&gt;\n    &lt;/property&gt;\n    &lt;property name=&quot;hibernateProperties&quot;&gt;\n        &lt;props&gt;\n            ...\n        &lt;/props&gt;\n    &lt;/property&gt;\n    &lt;property name=&quot;entityInterceptor&quot; ref=&quot;xxxx.EntityEventListenerRegistry&quot; /&gt;\n&lt;/bean&gt;\n</code></pre>\n"},{"tags":["java","spring-boot","java-io","read.csv"],"comments":[{"owner":{"account_id":401367,"reputation":23742,"user_id":767881,"accept_rate":14,"display_name":"Ravinder Reddy"},"score":0,"creation_date":1683264504,"post_id":76179058,"comment_id":134343085,"body_markdown":"check the array length. not the length value of the cell content","body":"check the array length. not the length value of the cell content"}],"owner":{"account_id":10981964,"reputation":43,"user_id":8068792,"accept_rate":0,"display_name":"Prabhash Mishra"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683264334,"creation_date":1683264334,"question_id":76179058,"body_markdown":"I am new to .csv file reading in java. I am getting java.lang.ArrayIndexOutOfBoundsException: Index 1 out of bounds for length 1 when empty cell is encountered while reading.\r\n    \r\n    Error:\r\n    ZZZ::[ICD10Dx, A0102]\r\n    ZZZ::[ICD10Dx, A1884]\r\n    ZZZ::[ICD10Dx, A5206]\r\n    ZZZ::[ICD10Dx]\r\n    java.lang.ArrayIndexOutOfBoundsException: Index 1 out of bounds for length 1\r\n    \r\n    Java Code:\r\n\r\npublic class CsvDTO implements Serializable {\r\n\r\n    private String codeType;\r\n    private String codes;\r\n\r\n    public CsvDTO() {\r\n    }\r\n//Getters and Setters\r\n\r\n\r\n\r\n\r\n List&lt;CsvDTO&gt; xmlLines = new BufferedReader(new InputStreamReader(stream.getInputStream()))\r\n                .lines()\r\n                .skip(1) //Skips the first n lines, in this case 1\r\n                .map(s -&gt; {\r\n\r\n                        String[] values = s.split(&quot;,&quot;);\r\n                        System.out.println(&quot;ZZZ::&quot;+Arrays.toString(values));\r\n                        CsvDTO dto = new CsvDTO();\r\n                        dto.setCodeType((values[0].length() &lt;=0)?&quot;&quot;: values[0]);\r\n                        dto.setCodes((values[1].length() &lt;=0)? &quot;&quot;: values[1]);\r\n                    return dto;\r\n                }).collect(Collectors.toList());\r\n\r\nCSV File:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\t\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/4CFBw.png","title":"Getting Error While Reading Empty cell in CSV file","body":"<p>I am new to .csv file reading in java. I am getting java.lang.ArrayIndexOutOfBoundsException: Index 1 out of bounds for length 1 when empty cell is encountered while reading.</p>\n<pre><code>Error:\nZZZ::[ICD10Dx, A0102]\nZZZ::[ICD10Dx, A1884]\nZZZ::[ICD10Dx, A5206]\nZZZ::[ICD10Dx]\njava.lang.ArrayIndexOutOfBoundsException: Index 1 out of bounds for length 1\n\nJava Code:\n</code></pre>\n<p>public class CsvDTO implements Serializable {</p>\n<pre><code>private String codeType;\nprivate String codes;\n\npublic CsvDTO() {\n}\n</code></pre>\n<p>//Getters and Setters</p>\n<p>List xmlLines = new BufferedReader(new InputStreamReader(stream.getInputStream()))\n.lines()\n.skip(1) //Skips the first n lines, in this case 1\n.map(s -&gt; {</p>\n<pre><code>                    String[] values = s.split(&quot;,&quot;);\n                    System.out.println(&quot;ZZZ::&quot;+Arrays.toString(values));\n                    CsvDTO dto = new CsvDTO();\n                    dto.setCodeType((values[0].length() &lt;=0)?&quot;&quot;: values[0]);\n                    dto.setCodes((values[1].length() &lt;=0)? &quot;&quot;: values[1]);\n                return dto;\n            }).collect(Collectors.toList());\n</code></pre>\n<p>CSV File:</p>\n<p><a href=\"https://i.stack.imgur.com/4CFBw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4CFBw.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","eclipse","eclipse-plugin"],"comments":[{"owner":{"account_id":13796,"reputation":19353,"user_id":27905,"display_name":"nitind"},"score":1,"creation_date":1683265431,"post_id":76179046,"comment_id":134343192,"body_markdown":"Have you tried it through Content Assist, or Organizing Imports?","body":"Have you tried it through Content Assist, or Organizing Imports?"}],"owner":{"account_id":28513218,"reputation":1,"user_id":21822921,"display_name":"Abhi Rathi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":102,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683264178,"creation_date":1683264178,"question_id":76179046,"body_markdown":"Don&#39;t know but now my Eclipse is not showing import option automatically but I can add them manually\r\n\r\nI was trying to do imports using quick fix in Eclipse","title":"Eclipse not showing import option in quick fix","body":"<p>Don't know but now my Eclipse is not showing import option automatically but I can add them manually</p>\n<p>I was trying to do imports using quick fix in Eclipse</p>\n"},{"tags":["java","unicode","utf-8","javadoc"],"comments":[{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1683169602,"post_id":76169304,"comment_id":134326286,"body_markdown":"Seems like a problem with the javadoc generator. In any case, how about writing these in English instead? Assuming this is spring, you can do the localisation in a .properties file.","body":"Seems like a problem with the javadoc generator. In any case, how about writing these in English instead? Assuming this is spring, you can do the localisation in a .properties file."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1683170165,"post_id":76169304,"comment_id":134326334,"body_markdown":"What version of Java are you using.  This might be https://bugs.openjdk.org/browse/JDK-8203176 ... which is fixed in Java 11.","body":"What version of Java are you using.  This might be <a href=\"https://bugs.openjdk.org/browse/JDK-8203176\" rel=\"nofollow noreferrer\">bugs.openjdk.org/browse/JDK-8203176</a> ... which is fixed in Java 11."},{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1683170463,"post_id":76169304,"comment_id":134326362,"body_markdown":"@StephenC I can reproduce in Java 17. That bug is only for `@code` blocks it seems.","body":"@StephenC I can reproduce in Java 17. That bug is only for <code>@code</code> blocks it seems."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1683170957,"post_id":76169304,"comment_id":134326407,"body_markdown":"OK ... so this is could be a previously unreported bug.","body":"OK ... so this is could be a previously unreported bug."}],"owner":{"account_id":5195256,"reputation":381,"user_id":4156801,"accept_rate":54,"display_name":"John Zhang"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683262928,"creation_date":1683169195,"question_id":76169304,"body_markdown":" JDK ： 17 \r\n\r\n Spring Boot:3.0.5 \r\n\r\n STS: 4.17.1.RELEASE \r\n\r\n```public record RegisterDTO (\r\n\t\t@NotNull(message=&quot;用户名不可为空&quot;)\r\n\t\t@Length(min=6,max=24,message=&quot;用户名长度6～24字符&quot;)\r\n\t\tString username,\r\n\t\t@Length(min=8,max=64,message=&quot;密码为8～64字符&quot;)\r\n\t\t@NotNull(message=&quot;密码不可为空&quot;)\r\n\t\tString password,\r\n\t\t@NotNull(message=&quot;姓名不可为空&quot;)\r\n\t\tString name,\r\n\t\tString email,\r\n\t\tString inviteUUID\r\n\t\t) {}\r\n```\r\nif we generate java doc for above code, \r\nthe message to transliteration to \r\n\r\n record RegisterDTO(@NotNull(message=&quot;\\u7528\\u6237\\u540d}\\u7528\\u6237\\u540d\\u4e0d\\u53ef\\u4e3a\\u7a7a&quot;) @Length(min=6,max=24,message=&quot;\\u7528\\u6237\\u540d\\u957f\\u5ea66\\uff5e24\\u5b57\\u7b26&quot;) String username, @Length(min=8,max=64,message=&quot;\\u5bc6\\u7801\\u4e3a8\\uff5e64\\u5b57\\u7b26&quot;) @NotNull(message=&quot;\\u5bc6\\u7801\\u4e0d\\u53ef\\u4e3a\\u7a7a&quot;) String password, \r\n@NotNull(message=&quot;\\u59d3\\u540d\\u4e0d\\u53ef\\u4e3a\\u7a7a&quot;) String name, String email, \r\nString inviteUUID)\r\n\r\nHow to display the unicode character, not the transliteration in java doc","title":"Java doc Annotation utf message","body":"<p>JDK ： 17</p>\n<p>Spring Boot:3.0.5</p>\n<p>STS: 4.17.1.RELEASE</p>\n<pre><code>        @NotNull(message=&quot;用户名不可为空&quot;)\n        @Length(min=6,max=24,message=&quot;用户名长度6～24字符&quot;)\n        String username,\n        @Length(min=8,max=64,message=&quot;密码为8～64字符&quot;)\n        @NotNull(message=&quot;密码不可为空&quot;)\n        String password,\n        @NotNull(message=&quot;姓名不可为空&quot;)\n        String name,\n        String email,\n        String inviteUUID\n        ) {}\n</code></pre>\n<p>if we generate java doc for above code,\nthe message to transliteration to</p>\n<p>record RegisterDTO(@NotNull(message=&quot;\\u7528\\u6237\\u540d}\\u7528\\u6237\\u540d\\u4e0d\\u53ef\\u4e3a\\u7a7a&quot;) @Length(min=6,max=24,message=&quot;\\u7528\\u6237\\u540d\\u957f\\u5ea66\\uff5e24\\u5b57\\u7b26&quot;) String username, @Length(min=8,max=64,message=&quot;\\u5bc6\\u7801\\u4e3a8\\uff5e64\\u5b57\\u7b26&quot;) @NotNull(message=&quot;\\u5bc6\\u7801\\u4e0d\\u53ef\\u4e3a\\u7a7a&quot;) String password,\n@NotNull(message=&quot;\\u59d3\\u540d\\u4e0d\\u53ef\\u4e3a\\u7a7a&quot;) String name, String email,\nString inviteUUID)</p>\n<p>How to display the unicode character, not the transliteration in java doc</p>\n"},{"tags":["java","spring","spring-boot","docker","maven"],"comments":[{"owner":{"account_id":1186616,"reputation":12512,"user_id":1160445,"display_name":"Maciej Walkowiak"},"score":0,"creation_date":1614350417,"post_id":66387257,"comment_id":117366511,"body_markdown":"Try building with debug mode on `mvn spring-boot:build-image -X` perhaps there will be more information in the error logs.","body":"Try building with debug mode on <code>mvn spring-boot:build-image -X</code> perhaps there will be more information in the error logs."},{"owner":{"account_id":1473276,"reputation":111009,"user_id":1384297,"accept_rate":100,"display_name":"Andy Wilkinson"},"score":0,"creation_date":1614361029,"post_id":66387257,"comment_id":117371341,"body_markdown":"The failure&#39;s come from your local Docker daemon. Its logs may reveal what caused it to return a 500 response.","body":"The failure&#39;s come from your local Docker daemon. Its logs may reveal what caused it to return a 500 response."}],"answers":[{"tags":[],"owner":{"account_id":3490736,"reputation":1,"user_id":2920492,"display_name":"Biplav Kumar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683261522,"creation_date":1683215929,"answer_id":76175123,"question_id":66387257,"body_markdown":"Reinstalling Docker Desktop worked for me.","title":"error using mvn spring-boot:build-image - received unexpected HTTP status: 500 Server Error&quot;","body":"<p>Reinstalling Docker Desktop worked for me.</p>\n"}],"owner":{"account_id":16675309,"reputation":177,"user_id":12051879,"display_name":"idan ovadia"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1928,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683261522,"creation_date":1614348393,"question_id":66387257,"body_markdown":"I tried using &#39;mvn spring-boot:build-image&#39; command and get that error..\r\n\r\n( I saw that maven have a new way to create an image with spring)\r\n\r\n```\r\n\r\n Building image &#39;docker.io/library/ccc:0.0.1-SNAPSHOT&#39;\r\n[INFO]\r\n[INFO]  &gt; Pulling builder image &#39;docker.io/paketobuildpacks/builder:base&#39; 100%\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD FAILURE\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Total time:  13.998 s\r\n[INFO] Finished at: 2021-02-26T15:20:51+02:00\r\n[INFO] ------------------------------------------------------------------------\r\n[ERROR] Failed to execute goal org.springframework.boot:spring-boot-maven-plugin:2.4.3:build-image (default-cli) on project ccc: Execution default-cli of goal org.s\r\npringframework.boot:spring-boot-maven-plugin:2.4.3:build-image failed: Docker API call to &#39;localhost/v1.24/images/create?fromImage=docker.io%2Fpaketobuildpacks%2Fbu\r\nilder%3Abase&#39; failed with status code 500 &quot;Internal Server Error&quot; and message &quot;received unexpected HTTP status: 500 Server Error&quot; -&gt; [Help 1]\r\n```\r\n\r\nI hope someone can help me fix it or refer me to some sources\r\n\r\n\r\nThis is what I get when using debug mode\r\nI copy the explantion from when the error begin \r\nHope it will give more information about what happend her\r\n\r\n```\r\n[INFO]  &gt; Pulling builder image &#39;docker.io/paketobuildpacks/builder:base&#39; 100%\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD FAILURE\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Total time:  26.053 s\r\n[INFO] Finished at: 2021-02-26T16:47:33+02:00\r\n[INFO] ------------------------------------------------------------------------\r\n[ERROR] Failed to execute goal org.springframework.boot:spring-boot-maven-plugin:2.4.3:build-image (default-cli) on project ccc: Execution default-cli of goal org.s\r\npringframework.boot:spring-boot-maven-plugin:2.4.3:build-image failed: Docker API call to &#39;localhost/v1.24/images/create?fromImage=docker.io%2Fpaketobuildpacks%2Fbu\r\nilder%3Abase&#39; failed with status code 500 &quot;Internal Server Error&quot; and message &quot;received unexpected HTTP status: 500 Server Error&quot; -&gt; [Help 1]\r\norg.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.springframework.boot:spring-boot-maven-plugin:2.4.3:build-image (default-cli) on\r\nproject ccc: Execution default-cli of goal org.springframework.boot:spring-boot-maven-plugin:2.4.3:build-image failed: Docker API call to &#39;localhost/v1.24/images/cr\r\neate?fromImage=docker.io%2Fpaketobuildpacks%2Fbuilder%3Abase&#39; failed with status code 500 &quot;Internal Server Error&quot; and message &quot;received unexpected HTTP status: 500\r\nServer Error&quot;\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:215)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\r\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\r\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\r\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\r\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\r\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\r\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\r\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\r\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:957)\r\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:289)\r\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:193)\r\n    at sun.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\r\n    at sun.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\r\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\r\n    at java.lang.reflect.Method.invoke (Method.java:498)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\r\nCaused by: org.apache.maven.plugin.PluginExecutionException: Execution default-cli of goal org.springframework.boot:spring-boot-maven-plugin:2.4.3:build-image faile\r\nd: Docker API call to &#39;localhost/v1.24/images/create?fromImage=docker.io%2Fpaketobuildpacks%2Fbuilder%3Abase&#39; failed with status code 500 &quot;Internal Server Error&quot; an\r\nd message &quot;received unexpected HTTP status: 500 Server Error&quot;\r\n    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:148)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:210)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\r\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\r\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\r\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\r\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\r\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\r\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\r\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\r\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:957)\r\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:289)\r\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:193)\r\n    at sun.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\r\n    at sun.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\r\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\r\n    at java.lang.reflect.Method.invoke (Method.java:498)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\r\nCaused by: org.springframework.boot.buildpack.platform.docker.transport.DockerEngineException: Docker API call to &#39;localhost/v1.24/images/create?fromImage=docker.io\r\n%2Fpaketobuildpacks%2Fbuilder%3Abase&#39; failed with status code 500 &quot;Internal Server Error&quot; and message &quot;received unexpected HTTP status: 500 Server Error&quot;\r\n    at org.springframework.boot.buildpack.platform.docker.transport.HttpClientTransport.execute (HttpClientTransport.java:156)\r\n    at org.springframework.boot.buildpack.platform.docker.transport.HttpClientTransport.execute (HttpClientTransport.java:143)\r\n    at org.springframework.boot.buildpack.platform.docker.transport.HttpClientTransport.post (HttpClientTransport.java:96)\r\n    at org.springframework.boot.buildpack.platform.docker.DockerApi$ImageApi.pull (DockerApi.java:178)\r\n    at org.springframework.boot.buildpack.platform.build.Builder.pullImage (Builder.java:154)\r\n    at org.springframework.boot.buildpack.platform.build.Builder.getImage (Builder.java:135)\r\n    at org.springframework.boot.buildpack.platform.build.Builder.build (Builder.java:95)\r\n    at org.springframework.boot.maven.BuildImageMojo.buildImage (BuildImageMojo.java:181)\r\n    at org.springframework.boot.maven.BuildImageMojo.execute (BuildImageMojo.java:171)\r\n    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:137)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:210)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\r\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\r\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\r\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\r\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\r\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\r\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\r\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\r\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:957)\r\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:289)\r\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:193)\r\n    at sun.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\r\n    at sun.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\r\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\r\n    at java.lang.reflect.Method.invoke (Method.java:498)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\r\n[ERROR]\r\n[ERROR]\r\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\r\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/PluginExecutionException\r\n\r\n```\r\n\r\n[Relates to post](https://stackoverflow.com/questions/72044376/spring-spring-bootbuild-image-gives-http-500-error)","title":"error using mvn spring-boot:build-image - received unexpected HTTP status: 500 Server Error&quot;","body":"<p>I tried using 'mvn spring-boot:build-image' command and get that error..</p>\n<p>( I saw that maven have a new way to create an image with spring)</p>\n<pre><code>\n Building image 'docker.io/library/ccc:0.0.1-SNAPSHOT'\n[INFO]\n[INFO]  &gt; Pulling builder image 'docker.io/paketobuildpacks/builder:base' 100%\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  13.998 s\n[INFO] Finished at: 2021-02-26T15:20:51+02:00\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.springframework.boot:spring-boot-maven-plugin:2.4.3:build-image (default-cli) on project ccc: Execution default-cli of goal org.s\npringframework.boot:spring-boot-maven-plugin:2.4.3:build-image failed: Docker API call to 'localhost/v1.24/images/create?fromImage=docker.io%2Fpaketobuildpacks%2Fbu\nilder%3Abase' failed with status code 500 &quot;Internal Server Error&quot; and message &quot;received unexpected HTTP status: 500 Server Error&quot; -&gt; [Help 1]\n</code></pre>\n<p>I hope someone can help me fix it or refer me to some sources</p>\n<p>This is what I get when using debug mode\nI copy the explantion from when the error begin\nHope it will give more information about what happend her</p>\n<pre><code>[INFO]  &gt; Pulling builder image 'docker.io/paketobuildpacks/builder:base' 100%\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  26.053 s\n[INFO] Finished at: 2021-02-26T16:47:33+02:00\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.springframework.boot:spring-boot-maven-plugin:2.4.3:build-image (default-cli) on project ccc: Execution default-cli of goal org.s\npringframework.boot:spring-boot-maven-plugin:2.4.3:build-image failed: Docker API call to 'localhost/v1.24/images/create?fromImage=docker.io%2Fpaketobuildpacks%2Fbu\nilder%3Abase' failed with status code 500 &quot;Internal Server Error&quot; and message &quot;received unexpected HTTP status: 500 Server Error&quot; -&gt; [Help 1]\norg.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.springframework.boot:spring-boot-maven-plugin:2.4.3:build-image (default-cli) on\nproject ccc: Execution default-cli of goal org.springframework.boot:spring-boot-maven-plugin:2.4.3:build-image failed: Docker API call to 'localhost/v1.24/images/cr\neate?fromImage=docker.io%2Fpaketobuildpacks%2Fbuilder%3Abase' failed with status code 500 &quot;Internal Server Error&quot; and message &quot;received unexpected HTTP status: 500\nServer Error&quot;\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:215)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:957)\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:289)\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:193)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke (Method.java:498)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\nCaused by: org.apache.maven.plugin.PluginExecutionException: Execution default-cli of goal org.springframework.boot:spring-boot-maven-plugin:2.4.3:build-image faile\nd: Docker API call to 'localhost/v1.24/images/create?fromImage=docker.io%2Fpaketobuildpacks%2Fbuilder%3Abase' failed with status code 500 &quot;Internal Server Error&quot; an\nd message &quot;received unexpected HTTP status: 500 Server Error&quot;\n    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:148)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:210)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:957)\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:289)\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:193)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke (Method.java:498)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\nCaused by: org.springframework.boot.buildpack.platform.docker.transport.DockerEngineException: Docker API call to 'localhost/v1.24/images/create?fromImage=docker.io\n%2Fpaketobuildpacks%2Fbuilder%3Abase' failed with status code 500 &quot;Internal Server Error&quot; and message &quot;received unexpected HTTP status: 500 Server Error&quot;\n    at org.springframework.boot.buildpack.platform.docker.transport.HttpClientTransport.execute (HttpClientTransport.java:156)\n    at org.springframework.boot.buildpack.platform.docker.transport.HttpClientTransport.execute (HttpClientTransport.java:143)\n    at org.springframework.boot.buildpack.platform.docker.transport.HttpClientTransport.post (HttpClientTransport.java:96)\n    at org.springframework.boot.buildpack.platform.docker.DockerApi$ImageApi.pull (DockerApi.java:178)\n    at org.springframework.boot.buildpack.platform.build.Builder.pullImage (Builder.java:154)\n    at org.springframework.boot.buildpack.platform.build.Builder.getImage (Builder.java:135)\n    at org.springframework.boot.buildpack.platform.build.Builder.build (Builder.java:95)\n    at org.springframework.boot.maven.BuildImageMojo.buildImage (BuildImageMojo.java:181)\n    at org.springframework.boot.maven.BuildImageMojo.execute (BuildImageMojo.java:171)\n    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:137)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:210)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:957)\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:289)\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:193)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke (Method.java:498)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\n[ERROR]\n[ERROR]\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/PluginExecutionException\n\n</code></pre>\n<p><a href=\"https://stackoverflow.com/questions/72044376/spring-spring-bootbuild-image-gives-http-500-error\">Relates to post</a></p>\n"},{"tags":["java","math"],"comments":[{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1683261331,"post_id":76178808,"comment_id":134342795,"body_markdown":"Your code doesn&#39;t match the problem.  The problem requires you to read X and compute Y.  What your code is doing is reading X and Y and computing Z ... using a different formula.   Is your code a genuine attempt?  (It is hard to understand how you could have gotten this code from the requirements ... assuming you read them.)","body":"Your code doesn&#39;t match the problem.  The problem requires you to read X and compute Y.  What your code is doing is reading X and Y and computing Z ... using a different formula.   Is your code a genuine attempt?  (It is hard to understand how you could have gotten this code from the requirements ... assuming you read them.)"},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1683261538,"post_id":76178808,"comment_id":134342811,"body_markdown":"[Please do not upload images of your requirements.](//meta.stackoverflow.com/q/285551)","body":"<a href=\"//meta.stackoverflow.com/q/285551\">Please do not upload images of your requirements.</a>"},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1683264308,"post_id":76178808,"comment_id":134343069,"body_markdown":"As an aside: The notation used in the image in unclear. As fas ar I know, there is no semantic to the syntax `(y = 2x^2 + 4) / 2`. It could mean `y = (2x^2 +4) / 2`; it could mean `y / 2 = (2x^2 +4) / 2`.","body":"As an aside: The notation used in the image in unclear. As fas ar I know, there is no semantic to the syntax <code>(y = 2x^2 + 4) &#47; 2</code>. It could mean <code>y = (2x^2 +4) &#47; 2</code>; it could mean <code>y &#47; 2 = (2x^2 +4) &#47; 2</code>."}],"answers":[{"tags":[],"owner":{"account_id":5129730,"reputation":1,"user_id":4110383,"display_name":"Exceptionoverflow"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683260674,"creation_date":1683260674,"answer_id":76178840,"question_id":76178808,"body_markdown":"According to you picture with the formula.\r\nI think you would get the value of y with x like so :\r\n\r\n        double y = (2 * Math.pow(x,2) + 4)/3;\r\n","title":"What do i change to get the problem right?","body":"<p>According to you picture with the formula.\nI think you would get the value of y with x like so :</p>\n<pre><code>    double y = (2 * Math.pow(x,2) + 4)/3;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9735171,"reputation":2264,"user_id":7218656,"accept_rate":75,"display_name":"Arun Sudhakaran"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683261386,"creation_date":1683261055,"answer_id":76178855,"question_id":76178808,"body_markdown":" 1. Only `x` needs to be inputted from the console, the equation is to find `y`, so there is no need for it to be inputted from the console.\r\n 2. There is no need for `z`, in the equation there are only two variables, you can assign the result to `y`.\r\n 3. I also don&#39;t understand this `Math.pow(y,3);`, there is nowhere said in the question to take `y` to the power of 3.\r\n\r\nThe equation by the code will be like this \r\n\r\n    double y = ((2 * Math.pow(x, 2)) + 4) / 3;","title":"What do i change to get the problem right?","body":"<ol>\n<li>Only <code>x</code> needs to be inputted from the console, the equation is to find <code>y</code>, so there is no need for it to be inputted from the console.</li>\n<li>There is no need for <code>z</code>, in the equation there are only two variables, you can assign the result to <code>y</code>.</li>\n<li>I also don't understand this <code>Math.pow(y,3);</code>, there is nowhere said in the question to take <code>y</code> to the power of 3.</li>\n</ol>\n<p>The equation by the code will be like this</p>\n<pre><code>double y = ((2 * Math.pow(x, 2)) + 4) / 3;\n</code></pre>\n"}],"owner":{"account_id":25051110,"reputation":1,"user_id":18907015,"display_name":"Kakkoii Shounen"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1722,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"answer_count":2,"score":-3,"last_activity_date":1683261386,"creation_date":1683259863,"question_id":76178808,"body_markdown":"[This the formula that needed to be code](https://i.stack.imgur.com/bBiCh.jpg)\r\n\r\nIve tried this code but the answer is different from the given problem\r\n\r\n\r\nPls see picture for the formula, I&#39;ve d this code but it seems like the values are different so I get different answers\r\n\r\n\r\n\r\n\r\n```\r\nimport java.util.Scanner;\r\npublic class Main {\r\n\tpublic static void main(String[] args) {\r\n\t\t\r\n\t\tSystem.out.println(&quot;Problem 6&quot;);\r\n\t\tSystem.out.println(&quot;Input x and y&quot;);\r\n\t\tScanner sc = new Scanner(System.in);\r\n\t\tint x = sc.nextInt();\r\n\t\tint y = sc.nextInt();\r\n\t\tdouble z = 2 * Math.pow(x,2) + Math.pow(y,3);\r\n\t\t\r\n\t\tSystem.out.println(z / 2);\r\n\t\t\r\n\t}\r\n}\r\n```\r\n\r\n\r\nIve tried this code but it doesnt show the right answer\r\n\r\n```\r\nimport java.util.Scanner;\r\npublic class Main {\r\n\tpublic static void main(String[] args) {\r\n\t\t\r\n\t\tSystem.out.println(&quot;Problem 6&quot;);\r\n\t\tSystem.out.println(&quot;Input x and y&quot;);\r\n\t\tScanner sc = new Scanner(System.in);\r\n\t\tint x = sc.nextInt();\r\n\t\tint y = sc.nextInt();\r\n\t\tdouble z = 2 * Math.pow(x,2) + Math.pow(y,3);\r\n\t\t\r\n\t\tSystem.out.println(z / 2);\r\n\t\t\r\n\t}\r\n}\r\n```\r\n","title":"What do i change to get the problem right?","body":"<p><a href=\"https://i.stack.imgur.com/bBiCh.jpg\" rel=\"nofollow noreferrer\">This the formula that needed to be code</a></p>\n<p>Ive tried this code but the answer is different from the given problem</p>\n<p>Pls see picture for the formula, I've d this code but it seems like the values are different so I get different answers</p>\n<pre><code>import java.util.Scanner;\npublic class Main {\n    public static void main(String[] args) {\n        \n        System.out.println(&quot;Problem 6&quot;);\n        System.out.println(&quot;Input x and y&quot;);\n        Scanner sc = new Scanner(System.in);\n        int x = sc.nextInt();\n        int y = sc.nextInt();\n        double z = 2 * Math.pow(x,2) + Math.pow(y,3);\n        \n        System.out.println(z / 2);\n        \n    }\n}\n</code></pre>\n<p>Ive tried this code but it doesnt show the right answer</p>\n<pre><code>import java.util.Scanner;\npublic class Main {\n    public static void main(String[] args) {\n        \n        System.out.println(&quot;Problem 6&quot;);\n        System.out.println(&quot;Input x and y&quot;);\n        Scanner sc = new Scanner(System.in);\n        int x = sc.nextInt();\n        int y = sc.nextInt();\n        double z = 2 * Math.pow(x,2) + Math.pow(y,3);\n        \n        System.out.println(z / 2);\n        \n    }\n}\n</code></pre>\n"},{"tags":["java","bash","spring-boot","daemon","nohup"],"owner":{"account_id":8468157,"reputation":6871,"user_id":6351733,"accept_rate":22,"display_name":"Maurice"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683260084,"creation_date":1683258272,"question_id":76178725,"body_markdown":"I have created a linux auto-update bash script that is called from my java app using `Runtime.getRuntime().exec()` whenever the command &#39;sudo yum check-update&#39; returns a positive result.\r\n\r\nThis bash script always starts the update process by stopping the systemd service that runs the java app jar file. It does this with `sudo service myApp stop`. The problem i&#39;m facing is that when the java app terminates, the process in which the bash script is running is terminated as well. So the bash script never gets past the service stop command.\r\n\r\nI know that when the parent process in which the java program runs terminates, any child processes that were spawned by the parent process will terminate as well. So to prevent this i&#39;ve tried turning the bash script execution into a daemon thread that should continue even after the java program has shut down. The code looks like this:\r\n\r\n            new Thread(() -&gt; {\r\n                try {\r\n                    String[] command = new String[]{&quot;env&quot;, &quot;bash&quot;, &quot;-c&quot;, &quot;setsid nohup &quot; + String.format(&quot;/home/ec2-user/config/linux-update-script.sh&quot; + &quot; %s %s&quot;, LinuxUpdateTask.SYSTEM_UPGRADE, &quot;2023.0.20230503&quot;) + &quot;  &gt;/dev/null 2&gt;&amp;1 &lt;/dev/null &amp;&quot;}; \r\n                    Process process = new ProcessBuilder(command).start();\r\n                    process.waitFor();\r\n                } catch (IOException | InterruptedException e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }).start(); \r\n\r\nThis command calls `setsid` and `nohup` which should detach the process from the parent process that spawned it. I&#39;m also running the command in a separate thread. But despite using `setsid` the process is still killed when the java program is terminated.\r\n\r\nI&#39;ve solved this problem by running the update script via a systemd service. The java program calls this service which in turn calls the bash file and the java program terminates without terminating the bash file process.\r\n\r\nBut i want to know if there is any way i could do this without having to use a systemd service. Are there any JVM settings that i could enable or disable to prevent the daemon process from being terminated when the spawning java program terminates?\r\n","title":"In a Spring boot java app, How do i run a bash script in a daemon thread that continues after the java app terminates?","body":"<p>I have created a linux auto-update bash script that is called from my java app using <code>Runtime.getRuntime().exec()</code> whenever the command 'sudo yum check-update' returns a positive result.</p>\n<p>This bash script always starts the update process by stopping the systemd service that runs the java app jar file. It does this with <code>sudo service myApp stop</code>. The problem i'm facing is that when the java app terminates, the process in which the bash script is running is terminated as well. So the bash script never gets past the service stop command.</p>\n<p>I know that when the parent process in which the java program runs terminates, any child processes that were spawned by the parent process will terminate as well. So to prevent this i've tried turning the bash script execution into a daemon thread that should continue even after the java program has shut down. The code looks like this:</p>\n<pre><code>        new Thread(() -&gt; {\n            try {\n                String[] command = new String[]{&quot;env&quot;, &quot;bash&quot;, &quot;-c&quot;, &quot;setsid nohup &quot; + String.format(&quot;/home/ec2-user/config/linux-update-script.sh&quot; + &quot; %s %s&quot;, LinuxUpdateTask.SYSTEM_UPGRADE, &quot;2023.0.20230503&quot;) + &quot;  &gt;/dev/null 2&gt;&amp;1 &lt;/dev/null &amp;&quot;}; \n                Process process = new ProcessBuilder(command).start();\n                process.waitFor();\n            } catch (IOException | InterruptedException e) {\n                e.printStackTrace();\n            }\n        }).start(); \n</code></pre>\n<p>This command calls <code>setsid</code> and <code>nohup</code> which should detach the process from the parent process that spawned it. I'm also running the command in a separate thread. But despite using <code>setsid</code> the process is still killed when the java program is terminated.</p>\n<p>I've solved this problem by running the update script via a systemd service. The java program calls this service which in turn calls the bash file and the java program terminates without terminating the bash file process.</p>\n<p>But i want to know if there is any way i could do this without having to use a systemd service. Are there any JVM settings that i could enable or disable to prevent the daemon process from being terminated when the spawning java program terminates?</p>\n"},{"tags":["java","executorservice","runnable","rate-limiting"],"owner":{"account_id":2339705,"reputation":1133,"user_id":2052584,"accept_rate":75,"display_name":"MrSnrub"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683258011,"creation_date":1683258011,"question_id":76178707,"body_markdown":"I&#39;m writing an event handler that must trigger some downstream update process, which is currently done by dropping a `Runnable` instance into an `ExecutorService` (`execute`).\r\n\r\nThe challenge is: The event might occur one time in an hour (which is fine), but might also occur 100 times in a few seconds.\r\n\r\nIf an event occurs, the downstream process _must_ be invoked _afterwards_ to keep a data structure up-to-date. So it&#39;s not an option to say _&quot;(now()-previousEventTime) &lt; threshold ==&gt; don&#39;t do it&quot;_. Because the latest event might have changed _everything_ although it was only 2 seconds later than the previous one.\r\n\r\nBut on the other hand, it was no big thing to defer the downstream process for a few seconds (e.g. 10-30 seconds), after an event has happened. \r\n\r\nI&#39;m thinking of something like this in pseudo-code:\r\n\r\n    private void onEvent() {\r\n        if( isRunnableAlreadyPendingToBeExecuted() ) return;\r\n        executeDeferred( updateProcessRunnable, 10, TimeUnit.SECONDS );\r\n    }\r\n\r\nSee this example of a sequence of events: \r\n\r\n* t+0sec: Event A -&gt; Runnable queued to be run in 10 seconds.\r\n* t+1sec: Event B -&gt; nothing happens, as runnable already pending.\r\n* t+8sec: Event C -&gt; nothing happens, as runnable already pending.\r\n* t+10sec: (deferred runnable is executed.)\r\n* t+10.5sec: Event D -&gt; Next runnable queued to be run in 10 seconds.\r\n\r\nHow could this be implemented in pure Java (up to 17), without third-party libraries?\r\n","title":"Deferred, rate limited Runnable execution","body":"<p>I'm writing an event handler that must trigger some downstream update process, which is currently done by dropping a <code>Runnable</code> instance into an <code>ExecutorService</code> (<code>execute</code>).</p>\n<p>The challenge is: The event might occur one time in an hour (which is fine), but might also occur 100 times in a few seconds.</p>\n<p>If an event occurs, the downstream process <em>must</em> be invoked <em>afterwards</em> to keep a data structure up-to-date. So it's not an option to say <em>&quot;(now()-previousEventTime) &lt; threshold ==&gt; don't do it&quot;</em>. Because the latest event might have changed <em>everything</em> although it was only 2 seconds later than the previous one.</p>\n<p>But on the other hand, it was no big thing to defer the downstream process for a few seconds (e.g. 10-30 seconds), after an event has happened.</p>\n<p>I'm thinking of something like this in pseudo-code:</p>\n<pre><code>private void onEvent() {\n    if( isRunnableAlreadyPendingToBeExecuted() ) return;\n    executeDeferred( updateProcessRunnable, 10, TimeUnit.SECONDS );\n}\n</code></pre>\n<p>See this example of a sequence of events:</p>\n<ul>\n<li>t+0sec: Event A -&gt; Runnable queued to be run in 10 seconds.</li>\n<li>t+1sec: Event B -&gt; nothing happens, as runnable already pending.</li>\n<li>t+8sec: Event C -&gt; nothing happens, as runnable already pending.</li>\n<li>t+10sec: (deferred runnable is executed.)</li>\n<li>t+10.5sec: Event D -&gt; Next runnable queued to be run in 10 seconds.</li>\n</ul>\n<p>How could this be implemented in pure Java (up to 17), without third-party libraries?</p>\n"},{"tags":["java","spring","spring-boot","spring-security","netflix-zuul"],"owner":{"account_id":17622470,"reputation":1,"user_id":12788113,"display_name":"bruno"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683257294,"creation_date":1683257294,"question_id":76178658,"body_markdown":"I&#39;ve been trying to figure this out for days and getting really crazy. \r\n\r\nI have two microservices in spring cloud, one working as a gateway with zuul, running at localhost:8090, and the other runs at localhost:8002. This one hosts an endpoint which runs good if I hit directly to this microservice:\r\n\r\n\r\n[Success case](https://i.stack.imgur.com/TPYaZ.png)\r\n\r\nHowever, if I try to perform the same against zuul gateway (this microservice also works as authorization server) the result is:\r\n\r\n[Failing case](https://i.stack.imgur.com/mSF4v.png)\r\n\r\nFiles of interest in zuul gateway microservice:\r\n\r\npom.xml:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.0.2&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.contractar&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;microservicio-gateway&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;microservicio-gateway&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;19&lt;/java.version&gt;\r\n\t\t &lt;maven.compiler.release&gt;19&lt;/maven.compiler.release&gt;\r\n\t\t &lt;spring-cloud.version&gt;2022.0.2&lt;/spring-cloud.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-cloud-starter-netflix-zuul&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.2.0.RELEASE&lt;/version&gt;\r\n    \t&lt;/dependency&gt;\r\n    \t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.security.oauth&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-security-oauth2&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.3.8.RELEASE&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t    &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n\t\t    &lt;artifactId&gt;spring-security-oauth2-jose&lt;/artifactId&gt;\r\n\t\t    &lt;version&gt;6.0.3&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t    &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n\t\t    &lt;artifactId&gt;spring-security-oauth2-resource-server&lt;/artifactId&gt;\r\n\t\t    &lt;version&gt;6.0.3&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.auth0&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;java-jwt&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.11.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-webflux&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;configuration&gt;    \r\n            \t\t&lt;mainClass&gt;com.contractar.microserviciogateway.MicroservicioGatewayApplication&lt;/mainClass&gt;\r\n        \t\t&lt;/configuration&gt;\r\n\t\t\t\t&lt;executions&gt;\r\n\t\t\t\t\t&lt;execution&gt;\r\n\t\t\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t\t\t&lt;goal&gt;repackage&lt;/goal&gt;\r\n\t\t\t\t\t\t&lt;/goals&gt;\r\n\t\t\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t\t\t&lt;classifier&gt;exec&lt;/classifier&gt;\r\n\t\t\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t\t\t&lt;/execution&gt;\r\n        \t\t&lt;/executions&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;build-helper-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;3.2.0&lt;/version&gt;\r\n      \t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n&lt;/project&gt;\r\n\r\n```\r\n\r\nMain class:\r\n\r\n\r\n```\r\npackage com.contractar.microserviciogateway;\r\n\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\nimport org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration;\r\nimport org.springframework.cloud.netflix.zuul.EnableZuulProxy;\r\nimport org.springframework.security.oauth2.config.annotation.web.configuration.EnableAuthorizationServer;\r\n\r\n@SpringBootApplication(exclude={DataSourceAutoConfiguration.class})\r\n@EnableZuulProxy\r\npublic class MicroservicioGatewayApplication {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(MicroservicioGatewayApplication.class, args);\r\n\t}\r\n\r\n}\r\n```\r\napplication.properties:\r\n\r\n\r\n```\r\nspring.application.name=microservicio-gateway\r\nserver.port=8090\r\n\r\napp.security.jwt.keystore-location=keys/keystore.jks\r\napp.security.jwt.keystore-password=contractar\r\napp.security.jwt.key-alias=keyAlias\r\napp.security.jwt.private-key-passphrase=contractar\r\n\r\nzuul.ignored-services=&#39;*&#39;\r\n\r\nzuul.routes.usuarios.service-id=microservicio-usuario\r\nzuul.routes.microservicio-usuario.path=/usuarios/**\r\nzuul.routes.microservicio-usuario.url=http://localhost:8002\r\n\r\nhystrix.command.default.execution.isolation.thread.timeoutInMilliseconds: 90000\r\nribbon.ConnectTimeout: 9000\r\nribbon.ReadTimeout: 30000\r\n\r\nribbon.eureka.enabled=false\r\n\r\n#MOVER DESPUES ESTO A AMBIENTE DE DEV\r\nlogging.level.org.springframework.security=TRACE\r\n\r\nmanagement.endpoints.web.exposure.include=*\r\n```\r\n\r\nSecurity config:\r\n\r\n```\r\npackage com.contractar.microserviciogateway.security;\r\n\r\nimport java.util.Arrays;\r\n\r\nimport org.springframework.boot.web.servlet.FilterRegistrationBean;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.core.Ordered;\r\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\r\nimport org.springframework.security.config.annotation.web.configuration.WebSecurityCustomizer;\r\nimport org.springframework.security.config.annotation.web.configurers.oauth2.server.resource.OAuth2ResourceServerConfigurer;\r\nimport org.springframework.security.config.http.SessionCreationPolicy;\r\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\r\nimport org.springframework.security.crypto.password.PasswordEncoder;\r\nimport org.springframework.security.oauth2.config.annotation.web.configuration.EnableResourceServer;\r\nimport org.springframework.security.oauth2.config.annotation.web.configuration.ResourceServerConfigurerAdapter;\r\nimport org.springframework.security.web.SecurityFilterChain;\r\nimport org.springframework.security.web.util.matcher.AntPathRequestMatcher;\r\nimport org.springframework.web.cors.CorsConfiguration;\r\nimport org.springframework.web.cors.CorsConfigurationSource;\r\nimport org.springframework.web.cors.UrlBasedCorsConfigurationSource;\r\nimport org.springframework.web.filter.CorsFilter;\r\n\r\n@Configuration\r\n@EnableWebSecurity\r\npublic class WebSecurityConfig{\r\n\r\n\t@Bean\r\n\tpublic FilterRegistrationBean&lt;CorsFilter&gt; corsFilter() {\r\n\t\tFilterRegistrationBean&lt;CorsFilter&gt; bean = new FilterRegistrationBean&lt;CorsFilter&gt;(\r\n\t\t\t\tnew CorsFilter(corsConfigurationSource()));\r\n\t\tbean.setOrder(Ordered.HIGHEST_PRECEDENCE);\r\n\t\treturn bean;\r\n\t}\r\n\r\n\t@Bean\r\n\tpublic CorsConfigurationSource corsConfigurationSource() {\r\n\t\tCorsConfiguration corsConfig = new CorsConfiguration();\r\n\t\tcorsConfig.setAllowedOrigins(Arrays.asList(&quot;*&quot;));\r\n\t\tcorsConfig.setAllowedMethods(Arrays.asList(&quot;POST&quot;, &quot;GET&quot;, &quot;PUT&quot;, &quot;DELETE&quot;, &quot;OPTIONS&quot;));\r\n\t\tcorsConfig.setAllowCredentials(true);\r\n\t\tcorsConfig.setAllowedHeaders(Arrays.asList(&quot;Authorization&quot;, &quot;Content-type&quot;));\r\n\r\n\t\tUrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\r\n\t\tsource.registerCorsConfiguration(&quot;/**&quot;, corsConfig);\r\n\r\n\t\treturn source;\r\n\t}\r\n\r\n\t@Bean\r\n\tpublic PasswordEncoder passwordEncoder() {\r\n\t\treturn new BCryptPasswordEncoder();\r\n\t}\r\n\r\n\t@Bean\r\n\tpublic SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n\r\n\t\thttp.formLogin().usernameParameter(&quot;email&quot;);\r\n\r\n\t\thttp.headers().httpStrictTransportSecurity().disable();\r\n\r\n\t\thttp.cors().configurationSource(corsConfigurationSource()).and().csrf().disable().sessionManagement()\r\n\t\t\t\t.sessionCreationPolicy(SessionCreationPolicy.STATELESS).and().authorizeHttpRequests(\r\n\t\t\t\t(requests) -&gt; requests.requestMatchers(new AntPathRequestMatcher(&quot;/usuarios/**&quot;), new AntPathRequestMatcher(&quot;/login&quot;),\r\n\t\t\t\tnew AntPathRequestMatcher(&quot;/error&quot;))\r\n\t\t\t\t.permitAll().anyRequest().authenticated()\r\n\t\t\t\t)\r\n\t\t.oauth2ResourceServer(OAuth2ResourceServerConfigurer::jwt);\r\n\r\n\t\treturn http.build();\r\n\r\n\t}\r\n\t\r\n    @Bean\r\n    public WebSecurityCustomizer webSecurityCustomizer() {\r\n        return (web) -&gt; web.ignoring().requestMatchers(&quot;/error&quot;);\r\n    }\r\n}\r\n```\r\n\r\nFinally, the target endpoint is defined as follows in it&#39;s microservice:\r\n\r\n\r\n```\r\npackage com.contractar.microserviciousuario.controllers;\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.http.HttpStatus;\r\nimport org.springframework.http.ResponseEntity;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport org.springframework.web.bind.annotation.PostMapping;\r\nimport org.springframework.web.bind.annotation.RequestBody;\r\nimport org.springframework.web.bind.annotation.RequestParam;\r\nimport org.springframework.web.bind.annotation.RestController;\r\n\r\nimport com.contractar.microserviciousuario.models.Cliente;\r\nimport com.contractar.microserviciousuario.models.Proveedor;\r\nimport com.contractar.microserviciousuario.models.Usuario;\r\nimport com.contractar.microserviciousuario.services.UsuarioService;\r\nimport com.contractar.serviciocommons.proveedores.ProveedorType;\r\n\r\nimport jakarta.validation.Valid;\r\n\r\n@RestController\r\npublic class UsuarioController {\r\n    @Autowired\r\n    private UsuarioService usuarioService;\r\n\r\n    @PostMapping(&quot;/usuarios&quot;)\r\n    public ResponseEntity&lt;Usuario&gt; crearUsuario(@RequestBody @Valid Usuario usuario) {\r\n        Usuario createdUsuario =  usuarioService.create(usuario); \r\n        return new ResponseEntity&lt;Usuario&gt;(createdUsuario, HttpStatus.CREATED);\r\n    }\r\n\r\n    @PostMapping(&quot;/usuarios/proveedor&quot;)\r\n    public ResponseEntity&lt;Proveedor&gt; crearProveedor(@RequestBody @Valid Proveedor usuario,\r\n         @RequestParam(required = true) ProveedorType proveedorType) {\r\n        Proveedor createdUsuario =  usuarioService.createProveedor(usuario, proveedorType); \r\n        return new ResponseEntity&lt;Proveedor&gt;(createdUsuario, HttpStatus.CREATED);\r\n    }\r\n\r\n    @PostMapping(&quot;/usuarios/cliente&quot;)\r\n    public ResponseEntity&lt;Cliente&gt; crearCliente(@RequestBody @Valid Cliente usuario) {\r\n        Cliente createdUsuario =  usuarioService.createCliente(usuario); \r\n        return new ResponseEntity&lt;Cliente&gt;(createdUsuario, HttpStatus.CREATED);\r\n    }\r\n    \r\n    @GetMapping(&quot;/usuarios&quot;)\r\n    public ResponseEntity&lt;Usuario&gt; findByEmail(@RequestParam(required = true) String email) {\r\n        Usuario usuario = usuarioService.findByEmail(email);\r\n        return new ResponseEntity&lt;Usuario&gt;(usuario, HttpStatus.OK);\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\nI&#39;ve checked zuul routing but didn&#39;t notice anything wrong. This was working well until I implemented the authorizarion layer.","title":"Why this public endpoints returns 404?","body":"<p>I've been trying to figure this out for days and getting really crazy.</p>\n<p>I have two microservices in spring cloud, one working as a gateway with zuul, running at localhost:8090, and the other runs at localhost:8002. This one hosts an endpoint which runs good if I hit directly to this microservice:</p>\n<p><a href=\"https://i.stack.imgur.com/TPYaZ.png\" rel=\"nofollow noreferrer\">Success case</a></p>\n<p>However, if I try to perform the same against zuul gateway (this microservice also works as authorization server) the result is:</p>\n<p><a href=\"https://i.stack.imgur.com/mSF4v.png\" rel=\"nofollow noreferrer\">Failing case</a></p>\n<p>Files of interest in zuul gateway microservice:</p>\n<p>pom.xml:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.0.2&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.contractar&lt;/groupId&gt;\n    &lt;artifactId&gt;microservicio-gateway&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;microservicio-gateway&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;19&lt;/java.version&gt;\n         &lt;maven.compiler.release&gt;19&lt;/maven.compiler.release&gt;\n         &lt;spring-cloud.version&gt;2022.0.2&lt;/spring-cloud.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-netflix-zuul&lt;/artifactId&gt;\n            &lt;version&gt;2.2.0.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security.oauth&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-oauth2&lt;/artifactId&gt;\n            &lt;version&gt;2.3.8.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-oauth2-jose&lt;/artifactId&gt;\n            &lt;version&gt;6.0.3&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-oauth2-resource-server&lt;/artifactId&gt;\n            &lt;version&gt;6.0.3&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.auth0&lt;/groupId&gt;\n            &lt;artifactId&gt;java-jwt&lt;/artifactId&gt;\n            &lt;version&gt;3.11.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-webflux&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;    \n                    &lt;mainClass&gt;com.contractar.microserviciogateway.MicroservicioGatewayApplication&lt;/mainClass&gt;\n                &lt;/configuration&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;repackage&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;classifier&gt;exec&lt;/classifier&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n                &lt;artifactId&gt;build-helper-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.2.0&lt;/version&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n\n</code></pre>\n<p>Main class:</p>\n<pre><code>package com.contractar.microserviciogateway;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration;\nimport org.springframework.cloud.netflix.zuul.EnableZuulProxy;\nimport org.springframework.security.oauth2.config.annotation.web.configuration.EnableAuthorizationServer;\n\n@SpringBootApplication(exclude={DataSourceAutoConfiguration.class})\n@EnableZuulProxy\npublic class MicroservicioGatewayApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(MicroservicioGatewayApplication.class, args);\n    }\n\n}\n</code></pre>\n<p>application.properties:</p>\n<pre><code>spring.application.name=microservicio-gateway\nserver.port=8090\n\napp.security.jwt.keystore-location=keys/keystore.jks\napp.security.jwt.keystore-password=contractar\napp.security.jwt.key-alias=keyAlias\napp.security.jwt.private-key-passphrase=contractar\n\nzuul.ignored-services='*'\n\nzuul.routes.usuarios.service-id=microservicio-usuario\nzuul.routes.microservicio-usuario.path=/usuarios/**\nzuul.routes.microservicio-usuario.url=http://localhost:8002\n\nhystrix.command.default.execution.isolation.thread.timeoutInMilliseconds: 90000\nribbon.ConnectTimeout: 9000\nribbon.ReadTimeout: 30000\n\nribbon.eureka.enabled=false\n\n#MOVER DESPUES ESTO A AMBIENTE DE DEV\nlogging.level.org.springframework.security=TRACE\n\nmanagement.endpoints.web.exposure.include=*\n</code></pre>\n<p>Security config:</p>\n<pre><code>package com.contractar.microserviciogateway.security;\n\nimport java.util.Arrays;\n\nimport org.springframework.boot.web.servlet.FilterRegistrationBean;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.core.Ordered;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\nimport org.springframework.security.config.annotation.web.configuration.WebSecurityCustomizer;\nimport org.springframework.security.config.annotation.web.configurers.oauth2.server.resource.OAuth2ResourceServerConfigurer;\nimport org.springframework.security.config.http.SessionCreationPolicy;\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\nimport org.springframework.security.crypto.password.PasswordEncoder;\nimport org.springframework.security.oauth2.config.annotation.web.configuration.EnableResourceServer;\nimport org.springframework.security.oauth2.config.annotation.web.configuration.ResourceServerConfigurerAdapter;\nimport org.springframework.security.web.SecurityFilterChain;\nimport org.springframework.security.web.util.matcher.AntPathRequestMatcher;\nimport org.springframework.web.cors.CorsConfiguration;\nimport org.springframework.web.cors.CorsConfigurationSource;\nimport org.springframework.web.cors.UrlBasedCorsConfigurationSource;\nimport org.springframework.web.filter.CorsFilter;\n\n@Configuration\n@EnableWebSecurity\npublic class WebSecurityConfig{\n\n    @Bean\n    public FilterRegistrationBean&lt;CorsFilter&gt; corsFilter() {\n        FilterRegistrationBean&lt;CorsFilter&gt; bean = new FilterRegistrationBean&lt;CorsFilter&gt;(\n                new CorsFilter(corsConfigurationSource()));\n        bean.setOrder(Ordered.HIGHEST_PRECEDENCE);\n        return bean;\n    }\n\n    @Bean\n    public CorsConfigurationSource corsConfigurationSource() {\n        CorsConfiguration corsConfig = new CorsConfiguration();\n        corsConfig.setAllowedOrigins(Arrays.asList(&quot;*&quot;));\n        corsConfig.setAllowedMethods(Arrays.asList(&quot;POST&quot;, &quot;GET&quot;, &quot;PUT&quot;, &quot;DELETE&quot;, &quot;OPTIONS&quot;));\n        corsConfig.setAllowCredentials(true);\n        corsConfig.setAllowedHeaders(Arrays.asList(&quot;Authorization&quot;, &quot;Content-type&quot;));\n\n        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\n        source.registerCorsConfiguration(&quot;/**&quot;, corsConfig);\n\n        return source;\n    }\n\n    @Bean\n    public PasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder();\n    }\n\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n\n        http.formLogin().usernameParameter(&quot;email&quot;);\n\n        http.headers().httpStrictTransportSecurity().disable();\n\n        http.cors().configurationSource(corsConfigurationSource()).and().csrf().disable().sessionManagement()\n                .sessionCreationPolicy(SessionCreationPolicy.STATELESS).and().authorizeHttpRequests(\n                (requests) -&gt; requests.requestMatchers(new AntPathRequestMatcher(&quot;/usuarios/**&quot;), new AntPathRequestMatcher(&quot;/login&quot;),\n                new AntPathRequestMatcher(&quot;/error&quot;))\n                .permitAll().anyRequest().authenticated()\n                )\n        .oauth2ResourceServer(OAuth2ResourceServerConfigurer::jwt);\n\n        return http.build();\n\n    }\n    \n    @Bean\n    public WebSecurityCustomizer webSecurityCustomizer() {\n        return (web) -&gt; web.ignoring().requestMatchers(&quot;/error&quot;);\n    }\n}\n</code></pre>\n<p>Finally, the target endpoint is defined as follows in it's microservice:</p>\n<pre><code>package com.contractar.microserviciousuario.controllers;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.PostMapping;\nimport org.springframework.web.bind.annotation.RequestBody;\nimport org.springframework.web.bind.annotation.RequestParam;\nimport org.springframework.web.bind.annotation.RestController;\n\nimport com.contractar.microserviciousuario.models.Cliente;\nimport com.contractar.microserviciousuario.models.Proveedor;\nimport com.contractar.microserviciousuario.models.Usuario;\nimport com.contractar.microserviciousuario.services.UsuarioService;\nimport com.contractar.serviciocommons.proveedores.ProveedorType;\n\nimport jakarta.validation.Valid;\n\n@RestController\npublic class UsuarioController {\n    @Autowired\n    private UsuarioService usuarioService;\n\n    @PostMapping(&quot;/usuarios&quot;)\n    public ResponseEntity&lt;Usuario&gt; crearUsuario(@RequestBody @Valid Usuario usuario) {\n        Usuario createdUsuario =  usuarioService.create(usuario); \n        return new ResponseEntity&lt;Usuario&gt;(createdUsuario, HttpStatus.CREATED);\n    }\n\n    @PostMapping(&quot;/usuarios/proveedor&quot;)\n    public ResponseEntity&lt;Proveedor&gt; crearProveedor(@RequestBody @Valid Proveedor usuario,\n         @RequestParam(required = true) ProveedorType proveedorType) {\n        Proveedor createdUsuario =  usuarioService.createProveedor(usuario, proveedorType); \n        return new ResponseEntity&lt;Proveedor&gt;(createdUsuario, HttpStatus.CREATED);\n    }\n\n    @PostMapping(&quot;/usuarios/cliente&quot;)\n    public ResponseEntity&lt;Cliente&gt; crearCliente(@RequestBody @Valid Cliente usuario) {\n        Cliente createdUsuario =  usuarioService.createCliente(usuario); \n        return new ResponseEntity&lt;Cliente&gt;(createdUsuario, HttpStatus.CREATED);\n    }\n    \n    @GetMapping(&quot;/usuarios&quot;)\n    public ResponseEntity&lt;Usuario&gt; findByEmail(@RequestParam(required = true) String email) {\n        Usuario usuario = usuarioService.findByEmail(email);\n        return new ResponseEntity&lt;Usuario&gt;(usuario, HttpStatus.OK);\n    }\n}\n</code></pre>\n<p>I've checked zuul routing but didn't notice anything wrong. This was working well until I implemented the authorizarion layer.</p>\n"},{"tags":["java","mongodb","mongodb-query"],"comments":[{"owner":{"account_id":10907337,"reputation":38824,"user_id":8017690,"display_name":"Yong Shun"},"score":2,"creation_date":1683252535,"post_id":76178393,"comment_id":134342057,"body_markdown":"Actually you can query the element in array with `{ imageIds: ObjectId(&quot;6335f3c338a79a4377aea064&quot;) }` without `$elemMatch` operator.","body":"Actually you can query the element in array with <code>{ imageIds: ObjectId(&quot;6335f3c338a79a4377aea064&quot;) }</code> without <code>$elemMatch</code> operator."},{"owner":{"account_id":3615835,"reputation":1759,"user_id":3015723,"accept_rate":100,"display_name":"Snappawapa"},"score":1,"creation_date":1683254493,"post_id":76178393,"comment_id":134342226,"body_markdown":"Huh, unintuitive, but seems to work. If you make an answer I will mark it","body":"Huh, unintuitive, but seems to work. If you make an answer I will mark it"}],"answers":[{"tags":[],"owner":{"account_id":10907337,"reputation":38824,"user_id":8017690,"display_name":"Yong Shun"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1683256764,"creation_date":1683256764,"answer_id":76178622,"question_id":76178393,"body_markdown":"As mentioned in the comment, you perform the query for the document with the array field containing a specific element without the `$elemMatch` operator.\r\n\r\n```\r\n{ imageIds: ObjectId(&quot;6335f3c338a79a4377aea064&quot;) }\r\n```\r\n\r\nReference: [Query an Array for an Element][1]\r\n\r\n[1]: https://www.mongodb.com/docs/manual/tutorial/query-arrays/#query-an-array-for-an-element","title":"How to recreate bson query with `elemMatch`","body":"<p>As mentioned in the comment, you perform the query for the document with the array field containing a specific element without the <code>$elemMatch</code> operator.</p>\n<pre><code>{ imageIds: ObjectId(&quot;6335f3c338a79a4377aea064&quot;) }\n</code></pre>\n<p>Reference: <a href=\"https://www.mongodb.com/docs/manual/tutorial/query-arrays/#query-an-array-for-an-element\" rel=\"nofollow noreferrer\">Query an Array for an Element</a></p>\n"}],"owner":{"account_id":3615835,"reputation":1759,"user_id":3015723,"accept_rate":100,"display_name":"Snappawapa"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76178622,"answer_count":1,"score":0,"last_activity_date":1683256764,"creation_date":1683251846,"question_id":76178393,"body_markdown":"For reference, example object schema\r\n\r\n```json\r\n{\r\n  &quot;some&quot;: &quot;&quot;,\r\n  &quot;field&quot;: &quot;&quot;,\r\n  &quot;imageIds&quot;: [\r\n    &lt;objectIds&gt;\r\n  ]\r\n}\r\n```\r\n\r\nHopefully an easy one, I am trying to recreate the following bson query using Java:\r\n\r\n`{ &quot;imageIds&quot;: {$elemMatch: {$eq:ObjectId(&#39;6335f3c338a79a4377aea064&#39;)}} }`\r\n\r\nWhen querying in MongoDb compass, this works as intended (Returning objects with given ObjectId in the `imageIds` array)\r\n\r\n\r\nWhat I think this should look like is:\r\n\r\n`elemMatch(&quot;imageIds&quot;, eq(new ObjectId(&quot;6335f3c338a79a4377aea064&quot;)))`\r\n\r\nBut this returns nothing. Debugging and using `toBsonDocument().toString()`, it looks like drastically different bson than I was expecting:\r\n\r\n`{&quot;imageIds&quot;: {&quot;$elemMatch&quot;: {&quot;_id&quot;: {&quot;$oid&quot;: &quot;6335f3c338a79a4377aea064&quot;}}}}`\r\n\r\nAm I missing something? ","title":"How to recreate bson query with `elemMatch`","body":"<p>For reference, example object schema</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;some&quot;: &quot;&quot;,\n  &quot;field&quot;: &quot;&quot;,\n  &quot;imageIds&quot;: [\n    &lt;objectIds&gt;\n  ]\n}\n</code></pre>\n<p>Hopefully an easy one, I am trying to recreate the following bson query using Java:</p>\n<p><code>{ &quot;imageIds&quot;: {$elemMatch: {$eq:ObjectId('6335f3c338a79a4377aea064')}} }</code></p>\n<p>When querying in MongoDb compass, this works as intended (Returning objects with given ObjectId in the <code>imageIds</code> array)</p>\n<p>What I think this should look like is:</p>\n<p><code>elemMatch(&quot;imageIds&quot;, eq(new ObjectId(&quot;6335f3c338a79a4377aea064&quot;)))</code></p>\n<p>But this returns nothing. Debugging and using <code>toBsonDocument().toString()</code>, it looks like drastically different bson than I was expecting:</p>\n<p><code>{&quot;imageIds&quot;: {&quot;$elemMatch&quot;: {&quot;_id&quot;: {&quot;$oid&quot;: &quot;6335f3c338a79a4377aea064&quot;}}}}</code></p>\n<p>Am I missing something?</p>\n"},{"tags":["java","android","firebase-realtime-database","firebase-security"],"answers":[{"comments":[{"owner":{"account_id":25618608,"reputation":23,"user_id":19390835,"display_name":"Alhe Mora"},"score":0,"creation_date":1683255528,"post_id":76178517,"comment_id":134342323,"body_markdown":"@phanza I have implemented the google-services.json file, I also implemented Google Sign-in and it was successful","body":"@phanza I have implemented the google-services.json file, I also implemented Google Sign-in and it was successful"}],"tags":[],"owner":{"account_id":25871104,"reputation":51,"user_id":19601969,"display_name":"phanz"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683254557,"creation_date":1683254557,"answer_id":76178517,"question_id":76178475,"body_markdown":"The google-services.json file needed to be downloaded and added to the app root directory. The error &quot;DatabaseError: Permission denied&quot; no longer appears.","title":"i want to get data &quot;createdAt&quot; and &quot;imageURL&quot; for every user but error &quot;Listen at /Users failed: DatabaseError: Permission denied&quot;","body":"<p>The google-services.json file needed to be downloaded and added to the app root directory. The error &quot;DatabaseError: Permission denied&quot; no longer appears.</p>\n"},{"comments":[{"owner":{"account_id":25618608,"reputation":23,"user_id":19390835,"display_name":"Alhe Mora"},"score":0,"creation_date":1683256974,"post_id":76178608,"comment_id":134342454,"body_markdown":"@van Pufflen If I want to be able to read the data with the current security rules, I change the sample code to what it looks like??","body":"@van Pufflen If I want to be able to read the data with the current security rules, I change the sample code to what it looks like??"},{"owner":{"account_id":72426,"reputation":573804,"user_id":209103,"accept_rate":73,"display_name":"Frank van Puffelen"},"score":0,"creation_date":1683257761,"post_id":76178608,"comment_id":134342514,"body_markdown":"Oof, don&#39;t put significant code in comments please as it becomes pretty much unreadable. If you want to be able to read with your current rules, you will need to read the data for a specific user - so use `addValueEventListener` on a specific `/Users/$uid` path.","body":"Oof, don&#39;t put significant code in comments please as it becomes pretty much unreadable. If you want to be able to read with your current rules, you will need to read the data for a specific user - so use <code>addValueEventListener</code> on a specific <code>&#47;Users&#47;$uid</code> path."},{"owner":{"account_id":25618608,"reputation":23,"user_id":19390835,"display_name":"Alhe Mora"},"score":0,"creation_date":1683258366,"post_id":76178608,"comment_id":134342586,"body_markdown":"@van Pufflen if with my code above can I apply the rule like this?\n[link](https://i.ibb.co/wRnfhxL/Screenshot-239.png)","body":"@van Pufflen if with my code above can I apply the rule like this? <a href=\"https://i.ibb.co/wRnfhxL/Screenshot-239.png\" rel=\"nofollow noreferrer\">link</a>"},{"owner":{"account_id":72426,"reputation":573804,"user_id":209103,"accept_rate":73,"display_name":"Frank van Puffelen"},"score":0,"creation_date":1683294740,"post_id":76178608,"comment_id":134349126,"body_markdown":"No. Your code tries to read `/Users`, and those updated rules *also* don&#39;t grant access to `/Users`. The only way to be able read from `/Users` directly as you code does is to change the rules in the way I showed in my answer.","body":"No. Your code tries to read <code>&#47;Users</code>, and those updated rules <i>also</i> don&#39;t grant access to <code>&#47;Users</code>. The only way to be able read from <code>&#47;Users</code> directly as you code does is to change the rules in the way I showed in my answer."}],"tags":[],"owner":{"account_id":72426,"reputation":573804,"user_id":209103,"accept_rate":73,"display_name":"Frank van Puffelen"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1683256519,"creation_date":1683256519,"answer_id":76178608,"question_id":76178475,"body_markdown":"Your security rules grant access to `/Users/$uid` to any logged in user. But your code tries to read from `/Users` directly, and the rules don&#39;t provide anyone read access there.\r\n\r\nIf you want to be able to read data with your current security rules, you need to change your code to read data from a specific user.\r\n\r\nIf you want to allow your current code to work, you need to allow the user to read the entire `/Users` node, so move the `&quot;.read&quot;` rules that you have one level up.\r\n```\r\n{\r\n  &quot;rules&quot;: {\r\n    &quot;Users&quot;: {\r\n      &quot;.read&quot;: &quot;auth.uid != null&quot;,\r\n      &quot;$uid&quot;: {\r\n        ...\r\n      }\r\n    }\r\n  }\r\n}\r\n```","title":"i want to get data &quot;createdAt&quot; and &quot;imageURL&quot; for every user but error &quot;Listen at /Users failed: DatabaseError: Permission denied&quot;","body":"<p>Your security rules grant access to <code>/Users/$uid</code> to any logged in user. But your code tries to read from <code>/Users</code> directly, and the rules don't provide anyone read access there.</p>\n<p>If you want to be able to read data with your current security rules, you need to change your code to read data from a specific user.</p>\n<p>If you want to allow your current code to work, you need to allow the user to read the entire <code>/Users</code> node, so move the <code>&quot;.read&quot;</code> rules that you have one level up.</p>\n<pre><code>{\n  &quot;rules&quot;: {\n    &quot;Users&quot;: {\n      &quot;.read&quot;: &quot;auth.uid != null&quot;,\n      &quot;$uid&quot;: {\n        ...\n      }\n    }\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":25618608,"reputation":23,"user_id":19390835,"display_name":"Alhe Mora"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76178608,"answer_count":2,"score":0,"last_activity_date":1683256519,"creation_date":1683253699,"question_id":76178475,"body_markdown":"I want to retrieve data &quot;createdAt&quot; and &quot;imageURL&quot; for every user who has just registered to RecylerView but is having problems with:\r\n\r\n&gt; Listen at /Users failed: DatabaseError: Permission denied\r\n\r\n\r\n    DatabaseReference databaseRef = FirebaseDatabase.getInstance().getReference(REF_USERS);\r\n    Calendar calendar = Calendar.getInstance();\r\n    calendar.add(Calendar.DAY_OF_MONTH, -10);\r\n    SimpleDateFormat dateFormat = new SimpleDateFormat(&quot;yyyy-MM-dd HH&quot;);\r\n    String dateSevenDaysAgo = dateFormat.format(calendar.getTime());\r\n    Query query = databaseRef.orderByChild(EXTRA_CREATED_AT).startAt(dateSevenDaysAgo);\r\n    query.addChildEventListener(new ChildEventListener() {\r\n            @Override\r\n            public void onChildAdded(@NonNull DataSnapshot dataSnapshot, @Nullable String previousChildName) {\r\n                User user = dataSnapshot.getValue(User.class);\r\n                assert user != null;\r\n                userList.add(user);\r\n                userAdapter.notifyDataSetChanged();\r\n            }\r\n\r\n            @Override\r\n            public void onChildChanged(@NonNull DataSnapshot dataSnapshot, @Nullable String previousChildName) {\r\n            }\r\n\r\n            @Override\r\n            public void onChildRemoved(@NonNull DataSnapshot dataSnapshot) {\r\n            }\r\n\r\n            @Override\r\n            public void onChildMoved(@NonNull DataSnapshot dataSnapshot, @Nullable String previousChildName) {\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError databaseError) {\r\n            }\r\n        });\r\n\r\n**Firebase Rule**\r\n  [![enter image description here][1]][1]\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/LSOkC.png\r\n","title":"i want to get data &quot;createdAt&quot; and &quot;imageURL&quot; for every user but error &quot;Listen at /Users failed: DatabaseError: Permission denied&quot;","body":"<p>I want to retrieve data &quot;createdAt&quot; and &quot;imageURL&quot; for every user who has just registered to RecylerView but is having problems with:</p>\n<blockquote>\n<p>Listen at /Users failed: DatabaseError: Permission denied</p>\n</blockquote>\n<pre><code>DatabaseReference databaseRef = FirebaseDatabase.getInstance().getReference(REF_USERS);\nCalendar calendar = Calendar.getInstance();\ncalendar.add(Calendar.DAY_OF_MONTH, -10);\nSimpleDateFormat dateFormat = new SimpleDateFormat(&quot;yyyy-MM-dd HH&quot;);\nString dateSevenDaysAgo = dateFormat.format(calendar.getTime());\nQuery query = databaseRef.orderByChild(EXTRA_CREATED_AT).startAt(dateSevenDaysAgo);\nquery.addChildEventListener(new ChildEventListener() {\n        @Override\n        public void onChildAdded(@NonNull DataSnapshot dataSnapshot, @Nullable String previousChildName) {\n            User user = dataSnapshot.getValue(User.class);\n            assert user != null;\n            userList.add(user);\n            userAdapter.notifyDataSetChanged();\n        }\n\n        @Override\n        public void onChildChanged(@NonNull DataSnapshot dataSnapshot, @Nullable String previousChildName) {\n        }\n\n        @Override\n        public void onChildRemoved(@NonNull DataSnapshot dataSnapshot) {\n        }\n\n        @Override\n        public void onChildMoved(@NonNull DataSnapshot dataSnapshot, @Nullable String previousChildName) {\n        }\n\n        @Override\n        public void onCancelled(@NonNull DatabaseError databaseError) {\n        }\n    });\n</code></pre>\n<p><strong>Firebase Rule</strong>\n<a href=\"https://i.stack.imgur.com/LSOkC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LSOkC.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","json","gson"],"comments":[{"owner":{"account_id":25886433,"reputation":27,"user_id":19614436,"display_name":"Jae"},"score":0,"creation_date":1683245269,"post_id":76178052,"comment_id":134341409,"body_markdown":"`Type listType = new TypeToken&lt;List&lt;Users&gt;&gt;(){}.getType();`\n`List&lt;User&gt; users = gson.fromJson(jsonOutput, listType);`\nwas using something like this, but it cannot handle the two separate data types.","body":"<code>Type listType = new TypeToken&lt;List&lt;Users&gt;&gt;(){}.getType();</code> <code>List&lt;User&gt; users = gson.fromJson(jsonOutput, listType);</code> was using something like this, but it cannot handle the two separate data types."},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1683249390,"post_id":76178052,"comment_id":134341771,"body_markdown":"What is the type you would like to deserialize into?","body":"What is the type you would like to deserialize into?"}],"answers":[{"tags":[],"owner":{"account_id":7406747,"reputation":416,"user_id":5635476,"display_name":"levangode"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683250878,"creation_date":1683250878,"answer_id":76178338,"question_id":76178052,"body_markdown":"Add the POJO classes:\r\n\r\n    public class Example {\r\n    \r\n        @SerializedName(&quot;users&quot;)\r\n        @Expose\r\n        private List&lt;User&gt; users;\r\n        @SerializedName(&quot;pokemon&quot;)\r\n        @Expose\r\n        private List&lt;Pokemon&gt; pokemon;\r\n    \r\n        public List&lt;User&gt; getUsers() {\r\n            return users;\r\n        }\r\n    \r\n        public void setUsers(List&lt;User&gt; users) {\r\n            this.users = users;\r\n        }\r\n    \r\n        public List&lt;Pokemon&gt; getPokemon() {\r\n            return pokemon;\r\n        }\r\n    \r\n        public void setPokemon(List&lt;Pokemon&gt; pokemon) {\r\n            this.pokemon = pokemon;\r\n        }\r\n    }\r\n\r\n\r\n    public class Pokemon {\r\n    \r\n        @SerializedName(&quot;userId&quot;)\r\n        @Expose\r\n        private Integer userId;\r\n        @SerializedName(&quot;name&quot;)\r\n        @Expose\r\n        private String name;\r\n        @SerializedName(&quot;frontImg&quot;)\r\n        @Expose\r\n        private String frontImg;\r\n        @SerializedName(&quot;backImg&quot;)\r\n        @Expose\r\n        private String backImg;\r\n        @SerializedName(&quot;type&quot;)\r\n        @Expose\r\n        private String type;\r\n        @SerializedName(&quot;hp&quot;)\r\n        @Expose\r\n        private Integer hp;\r\n        @SerializedName(&quot;id&quot;)\r\n        @Expose\r\n        private Integer id;\r\n    \r\n        public Integer getUserId() {\r\n            return userId;\r\n        }\r\n    \r\n        public void setUserId(Integer userId) {\r\n            this.userId = userId;\r\n        }\r\n    \r\n        public String getName() {\r\n            return name;\r\n        }\r\n    \r\n        public void setName(String name) {\r\n            this.name = name;\r\n        }\r\n    \r\n        public String getFrontImg() {\r\n            return frontImg;\r\n        }\r\n    \r\n        public void setFrontImg(String frontImg) {\r\n            this.frontImg = frontImg;\r\n        }\r\n    \r\n        public String getBackImg() {\r\n            return backImg;\r\n        }\r\n    \r\n        public void setBackImg(String backImg) {\r\n            this.backImg = backImg;\r\n        }\r\n    \r\n        public String getType() {\r\n            return type;\r\n        }\r\n    \r\n        public void setType(String type) {\r\n            this.type = type;\r\n        }\r\n    \r\n        public Integer getHp() {\r\n            return hp;\r\n        }\r\n    \r\n        public void setHp(Integer hp) {\r\n            this.hp = hp;\r\n        }\r\n    \r\n        public Integer getId() {\r\n            return id;\r\n        }\r\n    \r\n        public void setId(Integer id) {\r\n            this.id = id;\r\n        }\r\n    \r\n    }\r\n\r\n    public class User {\r\n    \r\n        @SerializedName(&quot;id&quot;)\r\n        @Expose\r\n        private Integer id;\r\n        @SerializedName(&quot;name&quot;)\r\n        @Expose\r\n        private String name;\r\n        @SerializedName(&quot;email&quot;)\r\n        @Expose\r\n        private String email;\r\n    \r\n        public Integer getId() {\r\n            return id;\r\n        }\r\n    \r\n        public void setId(Integer id) {\r\n            this.id = id;\r\n        }\r\n    \r\n        public String getName() {\r\n            return name;\r\n        }\r\n    \r\n        public void setName(String name) {\r\n            this.name = name;\r\n        }\r\n    \r\n        public String getEmail() {\r\n            return email;\r\n        }\r\n    \r\n        public void setEmail(String email) {\r\n            this.email = email;\r\n        }\r\n    \r\n    }\r\n\r\nAnd then call `Example e = new Gson().fromJson(json, Example.class);`","title":"java deserialize multiple arrays","body":"<p>Add the POJO classes:</p>\n<pre><code>public class Example {\n\n    @SerializedName(&quot;users&quot;)\n    @Expose\n    private List&lt;User&gt; users;\n    @SerializedName(&quot;pokemon&quot;)\n    @Expose\n    private List&lt;Pokemon&gt; pokemon;\n\n    public List&lt;User&gt; getUsers() {\n        return users;\n    }\n\n    public void setUsers(List&lt;User&gt; users) {\n        this.users = users;\n    }\n\n    public List&lt;Pokemon&gt; getPokemon() {\n        return pokemon;\n    }\n\n    public void setPokemon(List&lt;Pokemon&gt; pokemon) {\n        this.pokemon = pokemon;\n    }\n}\n\n\npublic class Pokemon {\n\n    @SerializedName(&quot;userId&quot;)\n    @Expose\n    private Integer userId;\n    @SerializedName(&quot;name&quot;)\n    @Expose\n    private String name;\n    @SerializedName(&quot;frontImg&quot;)\n    @Expose\n    private String frontImg;\n    @SerializedName(&quot;backImg&quot;)\n    @Expose\n    private String backImg;\n    @SerializedName(&quot;type&quot;)\n    @Expose\n    private String type;\n    @SerializedName(&quot;hp&quot;)\n    @Expose\n    private Integer hp;\n    @SerializedName(&quot;id&quot;)\n    @Expose\n    private Integer id;\n\n    public Integer getUserId() {\n        return userId;\n    }\n\n    public void setUserId(Integer userId) {\n        this.userId = userId;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getFrontImg() {\n        return frontImg;\n    }\n\n    public void setFrontImg(String frontImg) {\n        this.frontImg = frontImg;\n    }\n\n    public String getBackImg() {\n        return backImg;\n    }\n\n    public void setBackImg(String backImg) {\n        this.backImg = backImg;\n    }\n\n    public String getType() {\n        return type;\n    }\n\n    public void setType(String type) {\n        this.type = type;\n    }\n\n    public Integer getHp() {\n        return hp;\n    }\n\n    public void setHp(Integer hp) {\n        this.hp = hp;\n    }\n\n    public Integer getId() {\n        return id;\n    }\n\n    public void setId(Integer id) {\n        this.id = id;\n    }\n\n}\n\npublic class User {\n\n    @SerializedName(&quot;id&quot;)\n    @Expose\n    private Integer id;\n    @SerializedName(&quot;name&quot;)\n    @Expose\n    private String name;\n    @SerializedName(&quot;email&quot;)\n    @Expose\n    private String email;\n\n    public Integer getId() {\n        return id;\n    }\n\n    public void setId(Integer id) {\n        this.id = id;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getEmail() {\n        return email;\n    }\n\n    public void setEmail(String email) {\n        this.email = email;\n    }\n\n}\n</code></pre>\n<p>And then call <code>Example e = new Gson().fromJson(json, Example.class);</code></p>\n"},{"tags":[],"owner":{"account_id":17531877,"reputation":1654,"user_id":12715723,"display_name":"Jordy"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1683251827,"creation_date":1683251827,"answer_id":76178392,"question_id":76178052,"body_markdown":"I suggest using [Jackson](https://github.com/FasterXML/jackson) to read JSON strings into Java Object without defining a suitable class.\r\n```java\r\nimport com.fasterxml.jackson.databind.JsonNode;\r\nimport com.fasterxml.jackson.databind.ObjectMapper;\r\nimport com.fasterxml.jackson.databind.SerializationFeature;\r\nimport java.io.IOException;\r\n\r\npublic class JavaApplication {\r\n    public static void main(String[] args) throws IOException {\r\n        ObjectMapper mapper = new ObjectMapper();\r\n        mapper.enable(SerializationFeature.INDENT_OUTPUT);\r\n\r\n        String json = &quot;{\\&quot;users\\&quot;:[{\\&quot;id\\&quot;:1,\\&quot;name\\&quot;:\\&quot;Ash\\&quot;,\\&quot;email\\&quot;:\\&quot;ashketchum@kanto.com\\&quot;},{\\&quot;id\\&quot;:2,\\&quot;name\\&quot;:\\&quot;Gary\\&quot;,\\&quot;email\\&quot;:\\&quot;garyoak@kanto.com\\&quot;}],\\&quot;pokemon\\&quot;:[{\\&quot;userId\\&quot;:1,\\&quot;name\\&quot;:\\&quot;Ember\\&quot;,\\&quot;frontImg\\&quot;:\\&quot;/images/pokemon/local-mon/ember/front.png\\&quot;,\\&quot;backImg\\&quot;:\\&quot;/images/pokemon/local-mon/ember/back.png\\&quot;,\\&quot;type\\&quot;:\\&quot;fire\\&quot;,\\&quot;hp\\&quot;:100,\\&quot;id\\&quot;:1},{\\&quot;userId\\&quot;:1,\\&quot;name\\&quot;:\\&quot;Draggy\\&quot;,\\&quot;frontImg\\&quot;:\\&quot;/images/pokemon/local-mon/dragon/front.png\\&quot;,\\&quot;backImg\\&quot;:\\&quot;/images/pokemon/local-mon/dragon/back.png\\&quot;,\\&quot;type\\&quot;:\\&quot;dragon\\&quot;,\\&quot;hp\\&quot;:100,\\&quot;id\\&quot;:2}]}&quot;;\r\n        JsonNode data = mapper.readTree(json);\r\n\r\n        System.out.println(mapper.writeValueAsString(data));\r\n        System.out.println(data.get(&quot;users&quot;));\r\n        System.out.println(data.get(&quot;users&quot;).get(0));\r\n        System.out.println(data.get(&quot;pokemon&quot;));\r\n        System.out.println(data.get(&quot;pokemon&quot;).get(0).get(&quot;name&quot;));\r\n    }\r\n}\r\n```\r\nThe output will be:\r\n```json\r\n{\r\n  &quot;users&quot; : [ {\r\n    &quot;id&quot; : 1,\r\n    &quot;name&quot; : &quot;Ash&quot;,\r\n    &quot;email&quot; : &quot;ashketchum@kanto.com&quot;\r\n  }, {\r\n    &quot;id&quot; : 2,\r\n    &quot;name&quot; : &quot;Gary&quot;,\r\n    &quot;email&quot; : &quot;garyoak@kanto.com&quot;\r\n  } ],\r\n  &quot;pokemon&quot; : [ {\r\n    &quot;userId&quot; : 1,\r\n    &quot;name&quot; : &quot;Ember&quot;,\r\n    &quot;frontImg&quot; : &quot;/images/pokemon/local-mon/ember/front.png&quot;,\r\n    &quot;backImg&quot; : &quot;/images/pokemon/local-mon/ember/back.png&quot;,\r\n    &quot;type&quot; : &quot;fire&quot;,\r\n    &quot;hp&quot; : 100,\r\n    &quot;id&quot; : 1\r\n  }, {\r\n    &quot;userId&quot; : 1,\r\n    &quot;name&quot; : &quot;Draggy&quot;,\r\n    &quot;frontImg&quot; : &quot;/images/pokemon/local-mon/dragon/front.png&quot;,\r\n    &quot;backImg&quot; : &quot;/images/pokemon/local-mon/dragon/back.png&quot;,\r\n    &quot;type&quot; : &quot;dragon&quot;,\r\n    &quot;hp&quot; : 100,\r\n    &quot;id&quot; : 2\r\n  } ]\r\n}\r\n[{&quot;id&quot;:1,&quot;name&quot;:&quot;Ash&quot;,&quot;email&quot;:&quot;ashketchum@kanto.com&quot;},{&quot;id&quot;:2,&quot;name&quot;:&quot;Gary&quot;,&quot;email&quot;:&quot;garyoak@kanto.com&quot;}]\r\n{&quot;id&quot;:1,&quot;name&quot;:&quot;Ash&quot;,&quot;email&quot;:&quot;ashketchum@kanto.com&quot;}\r\n[{&quot;userId&quot;:1,&quot;name&quot;:&quot;Ember&quot;,&quot;frontImg&quot;:&quot;/images/pokemon/local-mon/ember/front.png&quot;,&quot;backImg&quot;:&quot;/images/pokemon/local-mon/ember/back.png&quot;,&quot;type&quot;:&quot;fire&quot;,&quot;hp&quot;:100,&quot;id&quot;:1},{&quot;userId&quot;:1,&quot;name&quot;:&quot;Draggy&quot;,&quot;frontImg&quot;:&quot;/images/pokemon/local-mon/dragon/front.png&quot;,&quot;backImg&quot;:&quot;/images/pokemon/local-mon/dragon/back.png&quot;,&quot;type&quot;:&quot;dragon&quot;,&quot;hp&quot;:100,&quot;id&quot;:2}]\r\n&quot;Ember&quot;\r\n```\r\n","title":"java deserialize multiple arrays","body":"<p>I suggest using <a href=\"https://github.com/FasterXML/jackson\" rel=\"nofollow noreferrer\">Jackson</a> to read JSON strings into Java Object without defining a suitable class.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import com.fasterxml.jackson.databind.JsonNode;\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport com.fasterxml.jackson.databind.SerializationFeature;\nimport java.io.IOException;\n\npublic class JavaApplication {\n    public static void main(String[] args) throws IOException {\n        ObjectMapper mapper = new ObjectMapper();\n        mapper.enable(SerializationFeature.INDENT_OUTPUT);\n\n        String json = &quot;{\\&quot;users\\&quot;:[{\\&quot;id\\&quot;:1,\\&quot;name\\&quot;:\\&quot;Ash\\&quot;,\\&quot;email\\&quot;:\\&quot;ashketchum@kanto.com\\&quot;},{\\&quot;id\\&quot;:2,\\&quot;name\\&quot;:\\&quot;Gary\\&quot;,\\&quot;email\\&quot;:\\&quot;garyoak@kanto.com\\&quot;}],\\&quot;pokemon\\&quot;:[{\\&quot;userId\\&quot;:1,\\&quot;name\\&quot;:\\&quot;Ember\\&quot;,\\&quot;frontImg\\&quot;:\\&quot;/images/pokemon/local-mon/ember/front.png\\&quot;,\\&quot;backImg\\&quot;:\\&quot;/images/pokemon/local-mon/ember/back.png\\&quot;,\\&quot;type\\&quot;:\\&quot;fire\\&quot;,\\&quot;hp\\&quot;:100,\\&quot;id\\&quot;:1},{\\&quot;userId\\&quot;:1,\\&quot;name\\&quot;:\\&quot;Draggy\\&quot;,\\&quot;frontImg\\&quot;:\\&quot;/images/pokemon/local-mon/dragon/front.png\\&quot;,\\&quot;backImg\\&quot;:\\&quot;/images/pokemon/local-mon/dragon/back.png\\&quot;,\\&quot;type\\&quot;:\\&quot;dragon\\&quot;,\\&quot;hp\\&quot;:100,\\&quot;id\\&quot;:2}]}&quot;;\n        JsonNode data = mapper.readTree(json);\n\n        System.out.println(mapper.writeValueAsString(data));\n        System.out.println(data.get(&quot;users&quot;));\n        System.out.println(data.get(&quot;users&quot;).get(0));\n        System.out.println(data.get(&quot;pokemon&quot;));\n        System.out.println(data.get(&quot;pokemon&quot;).get(0).get(&quot;name&quot;));\n    }\n}\n</code></pre>\n<p>The output will be:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;users&quot; : [ {\n    &quot;id&quot; : 1,\n    &quot;name&quot; : &quot;Ash&quot;,\n    &quot;email&quot; : &quot;ashketchum@kanto.com&quot;\n  }, {\n    &quot;id&quot; : 2,\n    &quot;name&quot; : &quot;Gary&quot;,\n    &quot;email&quot; : &quot;garyoak@kanto.com&quot;\n  } ],\n  &quot;pokemon&quot; : [ {\n    &quot;userId&quot; : 1,\n    &quot;name&quot; : &quot;Ember&quot;,\n    &quot;frontImg&quot; : &quot;/images/pokemon/local-mon/ember/front.png&quot;,\n    &quot;backImg&quot; : &quot;/images/pokemon/local-mon/ember/back.png&quot;,\n    &quot;type&quot; : &quot;fire&quot;,\n    &quot;hp&quot; : 100,\n    &quot;id&quot; : 1\n  }, {\n    &quot;userId&quot; : 1,\n    &quot;name&quot; : &quot;Draggy&quot;,\n    &quot;frontImg&quot; : &quot;/images/pokemon/local-mon/dragon/front.png&quot;,\n    &quot;backImg&quot; : &quot;/images/pokemon/local-mon/dragon/back.png&quot;,\n    &quot;type&quot; : &quot;dragon&quot;,\n    &quot;hp&quot; : 100,\n    &quot;id&quot; : 2\n  } ]\n}\n[{&quot;id&quot;:1,&quot;name&quot;:&quot;Ash&quot;,&quot;email&quot;:&quot;ashketchum@kanto.com&quot;},{&quot;id&quot;:2,&quot;name&quot;:&quot;Gary&quot;,&quot;email&quot;:&quot;garyoak@kanto.com&quot;}]\n{&quot;id&quot;:1,&quot;name&quot;:&quot;Ash&quot;,&quot;email&quot;:&quot;ashketchum@kanto.com&quot;}\n[{&quot;userId&quot;:1,&quot;name&quot;:&quot;Ember&quot;,&quot;frontImg&quot;:&quot;/images/pokemon/local-mon/ember/front.png&quot;,&quot;backImg&quot;:&quot;/images/pokemon/local-mon/ember/back.png&quot;,&quot;type&quot;:&quot;fire&quot;,&quot;hp&quot;:100,&quot;id&quot;:1},{&quot;userId&quot;:1,&quot;name&quot;:&quot;Draggy&quot;,&quot;frontImg&quot;:&quot;/images/pokemon/local-mon/dragon/front.png&quot;,&quot;backImg&quot;:&quot;/images/pokemon/local-mon/dragon/back.png&quot;,&quot;type&quot;:&quot;dragon&quot;,&quot;hp&quot;:100,&quot;id&quot;:2}]\n&quot;Ember&quot;\n</code></pre>\n"}],"owner":{"account_id":25886433,"reputation":27,"user_id":19614436,"display_name":"Jae"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76178392,"answer_count":2,"score":0,"last_activity_date":1683251827,"creation_date":1683244893,"question_id":76178052,"body_markdown":"I have the following json\r\n\r\n    {   &quot;users&quot;: [\r\n        {\r\n          &quot;id&quot;: 1,\r\n          &quot;name&quot;: &quot;Ash&quot;,\r\n          &quot;email&quot;: &quot;ashketchum@kanto.com&quot;\r\n        },\r\n        {\r\n          &quot;id&quot;: 2,\r\n          &quot;name&quot;: &quot;Gary&quot;,\r\n          &quot;email&quot;: &quot;garyoak@kanto.com&quot;\r\n        }],   \r\n    &quot;pokemon&quot;: [\r\n        {\r\n          &quot;userId&quot;: 1,\r\n          &quot;name&quot;: &quot;Ember&quot;,\r\n          &quot;frontImg&quot;: &quot;/images/pokemon/local-mon/ember/front.png&quot;,\r\n          &quot;backImg&quot;: &quot;/images/pokemon/local-mon/ember/back.png&quot;,\r\n          &quot;type&quot;: &quot;fire&quot;,\r\n          &quot;hp&quot;: 100,\r\n          &quot;id&quot;: 1\r\n        },\r\n        {\r\n          &quot;userId&quot;: 1,\r\n          &quot;name&quot;: &quot;Draggy&quot;,\r\n          &quot;frontImg&quot;: &quot;/images/pokemon/local-mon/dragon/front.png&quot;,\r\n          &quot;backImg&quot;: &quot;/images/pokemon/local-mon/dragon/back.png&quot;,\r\n          &quot;type&quot;: &quot;dragon&quot;,\r\n          &quot;hp&quot;: 100,\r\n          &quot;id&quot;: 2\r\n        }   ] }\r\n\r\nHow could I deserialize this into a single object or array containing both the users array of data and the pokemon array of data in Java? Preferably in gson but I&#39;m not opposed to changing libraries.\r\n","title":"java deserialize multiple arrays","body":"<p>I have the following json</p>\n<pre><code>{   &quot;users&quot;: [\n    {\n      &quot;id&quot;: 1,\n      &quot;name&quot;: &quot;Ash&quot;,\n      &quot;email&quot;: &quot;ashketchum@kanto.com&quot;\n    },\n    {\n      &quot;id&quot;: 2,\n      &quot;name&quot;: &quot;Gary&quot;,\n      &quot;email&quot;: &quot;garyoak@kanto.com&quot;\n    }],   \n&quot;pokemon&quot;: [\n    {\n      &quot;userId&quot;: 1,\n      &quot;name&quot;: &quot;Ember&quot;,\n      &quot;frontImg&quot;: &quot;/images/pokemon/local-mon/ember/front.png&quot;,\n      &quot;backImg&quot;: &quot;/images/pokemon/local-mon/ember/back.png&quot;,\n      &quot;type&quot;: &quot;fire&quot;,\n      &quot;hp&quot;: 100,\n      &quot;id&quot;: 1\n    },\n    {\n      &quot;userId&quot;: 1,\n      &quot;name&quot;: &quot;Draggy&quot;,\n      &quot;frontImg&quot;: &quot;/images/pokemon/local-mon/dragon/front.png&quot;,\n      &quot;backImg&quot;: &quot;/images/pokemon/local-mon/dragon/back.png&quot;,\n      &quot;type&quot;: &quot;dragon&quot;,\n      &quot;hp&quot;: 100,\n      &quot;id&quot;: 2\n    }   ] }\n</code></pre>\n<p>How could I deserialize this into a single object or array containing both the users array of data and the pokemon array of data in Java? Preferably in gson but I'm not opposed to changing libraries.</p>\n"},{"tags":["java","hibernate","datasource","c3p0"],"comments":[{"owner":{"account_id":6062199,"reputation":1170,"user_id":4733652,"display_name":"Iske"},"score":0,"creation_date":1683189692,"post_id":76170089,"comment_id":134329281,"body_markdown":"Have you tried using com.mysql.cj.jdbc.Driver because com.mysql.jdbc.Driver is deprecated?","body":"Have you tried using com.mysql.cj.jdbc.Driver because com.mysql.jdbc.Driver is deprecated?"}],"answers":[{"tags":[],"owner":{"account_id":1511139,"reputation":13781,"user_id":1413240,"accept_rate":50,"display_name":"Steve Waldman"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683249454,"creation_date":1683249454,"answer_id":76178261,"question_id":76170089,"body_markdown":"Connection testing might help.\r\n\r\nYou could just add\r\n\r\n```\r\n&lt;property name=&quot;hibernate.c3p0.testConnectionOnCheckout&quot;&gt;true&lt;/property&gt;\r\n```\r\n\r\nor for richer advice, check [here](https://www.mchange.com/projects/c3p0/#simple_advice_on_connection_testing).","title":"Getting error from hibernate connection pool","body":"<p>Connection testing might help.</p>\n<p>You could just add</p>\n<pre><code>&lt;property name=&quot;hibernate.c3p0.testConnectionOnCheckout&quot;&gt;true&lt;/property&gt;\n</code></pre>\n<p>or for richer advice, check <a href=\"https://www.mchange.com/projects/c3p0/#simple_advice_on_connection_testing\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}],"owner":{"account_id":4283130,"reputation":19,"user_id":3501861,"display_name":"Denial"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":109,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683249454,"creation_date":1683181048,"question_id":76170089,"body_markdown":"Hi following is my hibernate.cfg.xml file\r\n\r\n\r\n```\r\n&lt;?xml version=&#39;1.0&#39; encoding=&#39;UTF-8&#39;?&gt;\r\n&lt;!DOCTYPE hibernate-configuration PUBLIC\r\n        &quot;-//Hibernate/Hibernate Configuration DTD 3.0//EN&quot;\r\n        &quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;\r\n\r\n&lt;hibernate-configuration&gt;\r\n    &lt;session-factory&gt;\r\n        &lt;!-- Connection settings --&gt;\r\n        &lt;property name=&quot;hibernate.connection.driver_class&quot;&gt;com.mysql.jdbc.Driver&lt;/property&gt;\r\n        &lt;property name=&quot;hibernate.connection.url&quot;&gt;jdbc:mysql://localhost:3306/db_abc&lt;/property&gt;\r\n        &lt;property name=&quot;connection.autoReconnect&quot;&gt;true&lt;/property&gt;\r\n        &lt;property name=&quot;hibernate.connection.username&quot;&gt;user_abc&lt;/property&gt;\r\n        &lt;property name=&quot;hibernate.connection.password&quot;&gt;pass_abc&lt;/property&gt;\r\n\r\n        \r\n        &lt;property name=&quot;hibernate.c3p0.min_size&quot;&gt;5&lt;/property&gt;\r\n        &lt;property name=&quot;hibernate.c3p0.max_size&quot;&gt;20&lt;/property&gt;\r\n        &lt;property name=&quot;hibernate.c3p0.acquire_increment&quot;&gt;5&lt;/property&gt;\r\n        &lt;property name=&quot;hibernate.c3p0.timeout&quot;&gt;1800&lt;/property&gt;\r\n        \r\n        &lt;!-- SQL dialect --&gt;\r\n        &lt;property name=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.MySQL5InnoDBDialect&lt;/property&gt;\r\n\r\n        &lt;!-- Print executed SQL to stdout --&gt;\r\n        &lt;property name=&quot;show_sql&quot;&gt;true&lt;/property&gt;\r\n\r\n        &lt;!-- Drop and re-create all database on startup --&gt;\r\n        &lt;property name=&quot;hibernate.hbm2ddl.auto&quot;&gt;update&lt;/property&gt;\r\n        \r\n        \r\n        &lt;property name=&quot;hibernate.current_session_context_class&quot;&gt;org.hibernate.context.internal.ThreadLocalSessionContext&lt;/property&gt;\r\n\r\n        &lt;!-- Annotated entity classes --&gt;\r\n        &lt;mapping class=&quot;com.entity.tbl_user&quot;/&gt;\r\n    &lt;/session-factory&gt;\r\n&lt;/hibernate-configuration&gt;\r\n```\r\n\r\nInitially after deployment it works fine. But after some sometime tomcat server throws following error:\r\n\r\n```\r\n04-May-2023 10:55:02.389 WARN [https-jsse-nio-443-exec-1] org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logExceptions SQL Error: 0, SQLState: 08S01\r\n04-May-2023 10:55:02.390 ERROR [https-jsse-nio-443-exec-1] org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logExceptions The last packet successfully received from the server was69680 seconds ago.The last packet sent successfully to the server was 69680 seconds ago, which  is longer than the server configured value of &#39;wait_timeout&#39;. You should consider either expiring and/or testing connection validity before use in your application, increasing the server configured values for client timeouts, or using the Connector/J connection property &#39;autoReconnect=true&#39; to avoid this problem.\r\n```\r\n\r\n\r\n\r\nI am unable to figure out what wrong I have done. Please help","title":"Getting error from hibernate connection pool","body":"<p>Hi following is my hibernate.cfg.xml file</p>\n<pre><code>&lt;?xml version='1.0' encoding='UTF-8'?&gt;\n&lt;!DOCTYPE hibernate-configuration PUBLIC\n        &quot;-//Hibernate/Hibernate Configuration DTD 3.0//EN&quot;\n        &quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;\n\n&lt;hibernate-configuration&gt;\n    &lt;session-factory&gt;\n        &lt;!-- Connection settings --&gt;\n        &lt;property name=&quot;hibernate.connection.driver_class&quot;&gt;com.mysql.jdbc.Driver&lt;/property&gt;\n        &lt;property name=&quot;hibernate.connection.url&quot;&gt;jdbc:mysql://localhost:3306/db_abc&lt;/property&gt;\n        &lt;property name=&quot;connection.autoReconnect&quot;&gt;true&lt;/property&gt;\n        &lt;property name=&quot;hibernate.connection.username&quot;&gt;user_abc&lt;/property&gt;\n        &lt;property name=&quot;hibernate.connection.password&quot;&gt;pass_abc&lt;/property&gt;\n\n        \n        &lt;property name=&quot;hibernate.c3p0.min_size&quot;&gt;5&lt;/property&gt;\n        &lt;property name=&quot;hibernate.c3p0.max_size&quot;&gt;20&lt;/property&gt;\n        &lt;property name=&quot;hibernate.c3p0.acquire_increment&quot;&gt;5&lt;/property&gt;\n        &lt;property name=&quot;hibernate.c3p0.timeout&quot;&gt;1800&lt;/property&gt;\n        \n        &lt;!-- SQL dialect --&gt;\n        &lt;property name=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.MySQL5InnoDBDialect&lt;/property&gt;\n\n        &lt;!-- Print executed SQL to stdout --&gt;\n        &lt;property name=&quot;show_sql&quot;&gt;true&lt;/property&gt;\n\n        &lt;!-- Drop and re-create all database on startup --&gt;\n        &lt;property name=&quot;hibernate.hbm2ddl.auto&quot;&gt;update&lt;/property&gt;\n        \n        \n        &lt;property name=&quot;hibernate.current_session_context_class&quot;&gt;org.hibernate.context.internal.ThreadLocalSessionContext&lt;/property&gt;\n\n        &lt;!-- Annotated entity classes --&gt;\n        &lt;mapping class=&quot;com.entity.tbl_user&quot;/&gt;\n    &lt;/session-factory&gt;\n&lt;/hibernate-configuration&gt;\n</code></pre>\n<p>Initially after deployment it works fine. But after some sometime tomcat server throws following error:</p>\n<pre><code>04-May-2023 10:55:02.389 WARN [https-jsse-nio-443-exec-1] org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logExceptions SQL Error: 0, SQLState: 08S01\n04-May-2023 10:55:02.390 ERROR [https-jsse-nio-443-exec-1] org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logExceptions The last packet successfully received from the server was69680 seconds ago.The last packet sent successfully to the server was 69680 seconds ago, which  is longer than the server configured value of 'wait_timeout'. You should consider either expiring and/or testing connection validity before use in your application, increasing the server configured values for client timeouts, or using the Connector/J connection property 'autoReconnect=true' to avoid this problem.\n</code></pre>\n<p>I am unable to figure out what wrong I have done. Please help</p>\n"},{"tags":["java","if-statement","methods","do-while"],"comments":[{"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1683248520,"post_id":76178198,"comment_id":134341714,"body_markdown":"Using XOR is a mistake. Try debugging some hand variations and you&#39;ll see why.","body":"Using XOR is a mistake. Try debugging some hand variations and you&#39;ll see why."},{"owner":{"account_id":28116113,"reputation":33,"user_id":21483200,"display_name":"GrasshopperAtBest"},"score":0,"creation_date":1683248692,"post_id":76178198,"comment_id":134341725,"body_markdown":"@Bohemian I&#39;m not sure what you mean with that.","body":"@Bohemian I&#39;m not sure what you mean with that."},{"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1683249356,"post_id":76178198,"comment_id":134341768,"body_markdown":"`^` is a logical XOR operation. Both `true ^ false ^ true` and `false ^ false ^ false` evaluate to `false`. Depending on the order or comparisons, finding multiple pairs in your chain of XORs may evaluate as if none were found. I think you want a logical OR - try changing `^` to `||`.","body":"<code>^</code> is a logical XOR operation. Both <code>true ^ false ^ true</code> and <code>false ^ false ^ false</code> evaluate to <code>false</code>. Depending on the order or comparisons, finding multiple pairs in your chain of XORs may evaluate as if none were found. I think you want a logical OR - try changing <code>^</code> to <code>||</code>."}],"answers":[{"comments":[{"owner":{"account_id":28116113,"reputation":33,"user_id":21483200,"display_name":"GrasshopperAtBest"},"score":0,"creation_date":1683249954,"post_id":76178222,"comment_id":134341819,"body_markdown":"ughhhhh so much easier lmao thank you very much. It&#39;s working right now. Gonna keep trying to break it. Might have to go back through the other methods and try and simplify them just to get better at this.","body":"ughhhhh so much easier lmao thank you very much. It&#39;s working right now. Gonna keep trying to break it. Might have to go back through the other methods and try and simplify them just to get better at this."}],"tags":[],"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1683249139,"creation_date":1683248711,"answer_id":76178222,"question_id":76178198,"body_markdown":"Because this is homework, I&#39;ll give pseudo code only...\r\n\r\nI think you&#39;re going about it the hard way. Try this:\r\n\r\n- collect the rank of cards in the hand into an array of ranks\r\n- sort the array of ranks\r\n- iterate over the array (once) and count the number of times adjacent ranks are the same\r\n- return true if the count is 1, false otherwise\r\n\r\nConsider that using this approach will calculate 3 of a kind as 2 pairs when it&#39;s actually *3* pairs (and 4 of a kind *6* pairs), but that won&#39;t affect correctness of this approach.","title":"Trying to code a method to sort through a 5-card poker hand and evaluate if the hand has a single-pair, exclusively in Java","body":"<p>Because this is homework, I'll give pseudo code only...</p>\n<p>I think you're going about it the hard way. Try this:</p>\n<ul>\n<li>collect the rank of cards in the hand into an array of ranks</li>\n<li>sort the array of ranks</li>\n<li>iterate over the array (once) and count the number of times adjacent ranks are the same</li>\n<li>return true if the count is 1, false otherwise</li>\n</ul>\n<p>Consider that using this approach will calculate 3 of a kind as 2 pairs when it's actually <em>3</em> pairs (and 4 of a kind <em>6</em> pairs), but that won't affect correctness of this approach.</p>\n"}],"owner":{"account_id":28116113,"reputation":33,"user_id":21483200,"display_name":"GrasshopperAtBest"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76178222,"answer_count":1,"score":0,"last_activity_date":1683249139,"creation_date":1683247973,"question_id":76178198,"body_markdown":"The method seems to work well at evaluating if there is the presence of a single-pair in the hand or not. However, I&#39;m trying to figure out how to code in if another hand comes up as true (two pair, 4 of a kind, full house, etc) that the pair should return as false. Here&#39;s the code I have for the ruling IN of a pair while ruling out everything else. I essentially went hand-by-hand with the potential combinations of a potential pair and utilized the &#39;^&#39; operator to create the exclusivity. \r\n\r\n        // if-else statements to rule in a pair exclusively\r\n        if ((cards[0] == cards[1]) ^ (cards[0] == cards[2]) ^ (cards[0] == cards[3]) ^ (cards[0] == cards[4])){\r\n            isPair = true;\r\n        } else if ((cards[1] == cards[2]) ^ (cards[1] == cards[3]) ^ (cards[1] == cards[4])){\r\n            isPair =true;\r\n        } else if ((cards[2] == cards[3]) ^ (cards[2] == cards[4])){\r\n            isPair = true;\r\n        } else if (cards[3] == cards[4]){\r\n            isPair = true;\r\n        } else \r\n            isPair = false;\r\n        return isPair;\r\n\r\n I had thought with the use of &#39;^&#39; that it would have made it that so if it had found another pair within it, but it is still coming up as &quot;true&quot; when running hands that have a two pair. I tried adding another int variable tooManyPairs and incremented inside of the if-else statements every time it found a pair while in do-while loop. Here&#39;s what it looked like:\r\n\r\n        public boolean isPair(){\r\n        boolean isPair = false;\r\n        int tooManyPairs = 0;\r\n        int [] cards = new int [hand.length];\r\n        for (int i = 0; i &lt; hand.length; i++){\r\n            cards[i] = hand[i].getRank();\r\n        }\r\n        // if-else loops to rule out 4 of a kind\r\n        do {\r\n        // if-else statements to rule in a pair exclusively\r\n        if ((cards[0] == cards[1]) ^ (cards[0] == cards[2]) ^ (cards[0] == cards[3]) ^ (cards[0] == cards[4])){\r\n            isPair = true;\r\n            tooManyPairs++;\r\n        } else if ((cards[1] == cards[2]) ^ (cards[1] == cards[3]) ^ (cards[1] == cards[4])){\r\n            isPair =true;\r\n            tooManyPairs++;\r\n        } else if ((cards[2] == cards[3]) ^ (cards[2] == cards[4])){\r\n            isPair = true;\r\n            tooManyPairs++;\r\n        } else if (cards[3] == cards[4]){\r\n            isPair = true;\r\n            tooManyPairs++;\r\n        } else \r\n            isPair = false;\r\n        }while (tooManyPairs &lt; 1);\r\n        if (tooManyPairs &gt; 1)\r\n            return isPair = false;\r\n        return isPair;\r\n\r\nThe [![enter image description here][1]][1]\r\n\r\nThe output is still coming up as true for both instead of just the two pair. I thought I could repost the previous code for those methods into this method with modifications that would make them return the isPair method as false. That just seems like a lot of excess code and I feel like there should be a more simple way of doing it. Any guidance would be appreciated. \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/OOQjF.png","title":"Trying to code a method to sort through a 5-card poker hand and evaluate if the hand has a single-pair, exclusively in Java","body":"<p>The method seems to work well at evaluating if there is the presence of a single-pair in the hand or not. However, I'm trying to figure out how to code in if another hand comes up as true (two pair, 4 of a kind, full house, etc) that the pair should return as false. Here's the code I have for the ruling IN of a pair while ruling out everything else. I essentially went hand-by-hand with the potential combinations of a potential pair and utilized the '^' operator to create the exclusivity.</p>\n<pre><code>    // if-else statements to rule in a pair exclusively\n    if ((cards[0] == cards[1]) ^ (cards[0] == cards[2]) ^ (cards[0] == cards[3]) ^ (cards[0] == cards[4])){\n        isPair = true;\n    } else if ((cards[1] == cards[2]) ^ (cards[1] == cards[3]) ^ (cards[1] == cards[4])){\n        isPair =true;\n    } else if ((cards[2] == cards[3]) ^ (cards[2] == cards[4])){\n        isPair = true;\n    } else if (cards[3] == cards[4]){\n        isPair = true;\n    } else \n        isPair = false;\n    return isPair;\n</code></pre>\n<p>I had thought with the use of '^' that it would have made it that so if it had found another pair within it, but it is still coming up as &quot;true&quot; when running hands that have a two pair. I tried adding another int variable tooManyPairs and incremented inside of the if-else statements every time it found a pair while in do-while loop. Here's what it looked like:</p>\n<pre><code>    public boolean isPair(){\n    boolean isPair = false;\n    int tooManyPairs = 0;\n    int [] cards = new int [hand.length];\n    for (int i = 0; i &lt; hand.length; i++){\n        cards[i] = hand[i].getRank();\n    }\n    // if-else loops to rule out 4 of a kind\n    do {\n    // if-else statements to rule in a pair exclusively\n    if ((cards[0] == cards[1]) ^ (cards[0] == cards[2]) ^ (cards[0] == cards[3]) ^ (cards[0] == cards[4])){\n        isPair = true;\n        tooManyPairs++;\n    } else if ((cards[1] == cards[2]) ^ (cards[1] == cards[3]) ^ (cards[1] == cards[4])){\n        isPair =true;\n        tooManyPairs++;\n    } else if ((cards[2] == cards[3]) ^ (cards[2] == cards[4])){\n        isPair = true;\n        tooManyPairs++;\n    } else if (cards[3] == cards[4]){\n        isPair = true;\n        tooManyPairs++;\n    } else \n        isPair = false;\n    }while (tooManyPairs &lt; 1);\n    if (tooManyPairs &gt; 1)\n        return isPair = false;\n    return isPair;\n</code></pre>\n<p>The <a href=\"https://i.stack.imgur.com/OOQjF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OOQjF.png\" alt=\"enter image description here\" /></a></p>\n<p>The output is still coming up as true for both instead of just the two pair. I thought I could repost the previous code for those methods into this method with modifications that would make them return the isPair method as false. That just seems like a lot of excess code and I feel like there should be a more simple way of doing it. Any guidance would be appreciated.</p>\n"},{"tags":["java","grpc","reconnect"],"comments":[{"owner":{"account_id":75725,"reputation":503,"user_id":217125,"display_name":"earthling paul"},"score":1,"creation_date":1683041743,"post_id":76138965,"comment_id":134304215,"body_markdown":"akka gRPC supports automatic re-connect out of the box, see: https://doc.akka.io/docs/akka-grpc/current/client/details.html#client-lifecycle","body":"akka gRPC supports automatic re-connect out of the box, see: <a href=\"https://doc.akka.io/docs/akka-grpc/current/client/details.html#client-lifecycle\" rel=\"nofollow noreferrer\">doc.akka.io/docs/akka-grpc/current/client/&hellip;</a>"},{"owner":{"account_id":5967476,"reputation":24635,"user_id":4690866,"display_name":"Eric Anderson"},"score":0,"creation_date":1683208578,"post_id":76138965,"comment_id":134334029,"body_markdown":"Can you explain more the behavior you saw for &quot;The Java application didn&#39;t recognize the connection loss and couldn&#39;t reconnect.&quot; The RPC just hung? &quot;Couldn&#39;t reconnect&quot; as in you were getting an error? The keepalive looks appropriate.","body":"Can you explain more the behavior you saw for &quot;The Java application didn&#39;t recognize the connection loss and couldn&#39;t reconnect.&quot; The RPC just hung? &quot;Couldn&#39;t reconnect&quot; as in you were getting an error? The keepalive looks appropriate."}],"answers":[{"tags":[],"owner":{"account_id":5106577,"reputation":2269,"user_id":4094489,"accept_rate":71,"display_name":"Citrullin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682878927,"creation_date":1682878927,"answer_id":76142862,"question_id":76138965,"body_markdown":"That sounds to me like something you would like to do with a framework/library any way. You can implement it by yourself, but it&#39;s really not worth the struggle and may lead to spaghetti code any way. \r\nAkka has a [gRPC integration][1], so I would have a look into it. It has a lot of features that solves what you describe here. \r\n[Flink][2] would be even more advanced than Akka in the sense you have checkpoints etc. That may help here in case something bigger fails.\r\n\r\n\r\n  [1]: https://doc.akka.io/docs/akka-grpc/current/index.html\r\n  [2]: https://flink.apache.org/","title":"gRPC | Java | How can I reconnect the stream to the server? [Solved]","body":"<p>That sounds to me like something you would like to do with a framework/library any way. You can implement it by yourself, but it's really not worth the struggle and may lead to spaghetti code any way.\nAkka has a <a href=\"https://doc.akka.io/docs/akka-grpc/current/index.html\" rel=\"nofollow noreferrer\">gRPC integration</a>, so I would have a look into it. It has a lot of features that solves what you describe here.\n<a href=\"https://flink.apache.org/\" rel=\"nofollow noreferrer\">Flink</a> would be even more advanced than Akka in the sense you have checkpoints etc. That may help here in case something bigger fails.</p>\n"}],"owner":{"account_id":17065617,"reputation":21,"user_id":12347881,"display_name":"Nick P."},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":356,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1683248516,"creation_date":1682812206,"question_id":76138965,"body_markdown":"Thank you all for your answers. I got it working now!!\r\n\r\nI just remade everything and I&#39;m catching Connection losses, which I then use to start a new Thread which uses Thread.sleep(15000) to wait 15 Seconds and then call my GrpcEvent again (which is also called at the start). I&#39;m creating a channel at the beginning of the app runtime and if the stream ends, it just uses the channel from the beginning to start a new stream.\r\n\r\nSince the code is a bit too big for here, I can send it to everyone who dms me on twitter ^^ (It&#39;s linked to my Stackoverflow profile)\r\n\r\n---\r\n---\r\n---\r\n\r\nI want to be able to check if the gRPC Server is reachable again and start a new stream connection to the server.\r\n\r\nMy Code for java is:\r\n\r\n\r\n```\r\npublic class GrpcEvent {\r\n\r\n    public GrpcEvent(@NotNull VCore plugin) {\r\n\r\n        ManagedChannel channel = ManagedChannelBuilder.forAddress(&quot;localhost&quot;, 50051)\r\n                .usePlaintext()\r\n                .keepAliveTime(30, TimeUnit.SECONDS)\r\n                .keepAliveTimeout(5, TimeUnit.SECONDS)\r\n                .build();\r\n\r\n        GeneralGrpc.GeneralStub nonBlockingStub = GeneralGrpc.newStub(channel);\r\n\r\n        nonBlockingStub.connectClient(GeneralProto.ClientMeta.newBuilder()\r\n                        .setGroup(&quot;proxy&quot;)\r\n                        .setName(&quot;proxy-&quot; + createId())\r\n                        .setIp(plugin.server.getBoundAddress().getHostName())\r\n                        .setPort(plugin.server.getBoundAddress().getPort())\r\n                        .build(),\r\n                new GrpcCommandHandler(plugin));\r\n\r\n\r\n    }\r\n\r\n    private @NotNull String createId() {\r\n        UUID uuid = UUID.randomUUID();\r\n        String[] parts = uuid.toString().split(&quot;-&quot;);\r\n\r\n        return String.join(&quot;-&quot;, parts[0], parts[1]);\r\n    }\r\n}\r\n```\r\n\r\nI tried searching on google for days and even tried (I know it&#39;s not recommended and most of the code doesn&#39;t really work) ChatGPT. &#128528;\r\n\r\nThe result: The Java application didn&#39;t recognize the connection loss and couldn&#39;t reconnect.","title":"gRPC | Java | How can I reconnect the stream to the server? [Solved]","body":"<p>Thank you all for your answers. I got it working now!!</p>\n<p>I just remade everything and I'm catching Connection losses, which I then use to start a new Thread which uses Thread.sleep(15000) to wait 15 Seconds and then call my GrpcEvent again (which is also called at the start). I'm creating a channel at the beginning of the app runtime and if the stream ends, it just uses the channel from the beginning to start a new stream.</p>\n<p>Since the code is a bit too big for here, I can send it to everyone who dms me on twitter ^^ (It's linked to my Stackoverflow profile)</p>\n<hr />\n<hr />\n<hr />\n<p>I want to be able to check if the gRPC Server is reachable again and start a new stream connection to the server.</p>\n<p>My Code for java is:</p>\n<pre><code>public class GrpcEvent {\n\n    public GrpcEvent(@NotNull VCore plugin) {\n\n        ManagedChannel channel = ManagedChannelBuilder.forAddress(&quot;localhost&quot;, 50051)\n                .usePlaintext()\n                .keepAliveTime(30, TimeUnit.SECONDS)\n                .keepAliveTimeout(5, TimeUnit.SECONDS)\n                .build();\n\n        GeneralGrpc.GeneralStub nonBlockingStub = GeneralGrpc.newStub(channel);\n\n        nonBlockingStub.connectClient(GeneralProto.ClientMeta.newBuilder()\n                        .setGroup(&quot;proxy&quot;)\n                        .setName(&quot;proxy-&quot; + createId())\n                        .setIp(plugin.server.getBoundAddress().getHostName())\n                        .setPort(plugin.server.getBoundAddress().getPort())\n                        .build(),\n                new GrpcCommandHandler(plugin));\n\n\n    }\n\n    private @NotNull String createId() {\n        UUID uuid = UUID.randomUUID();\n        String[] parts = uuid.toString().split(&quot;-&quot;);\n\n        return String.join(&quot;-&quot;, parts[0], parts[1]);\n    }\n}\n</code></pre>\n<p>I tried searching on google for days and even tried (I know it's not recommended and most of the code doesn't really work) ChatGPT. 😐</p>\n<p>The result: The Java application didn't recognize the connection loss and couldn't reconnect.</p>\n"},{"tags":["java","eclipse","javadoc"],"comments":[{"owner":{"account_id":3159259,"reputation":109678,"user_id":2670892,"display_name":"greg-449"},"score":1,"creation_date":1683209567,"post_id":76173551,"comment_id":134334323,"body_markdown":"What do you have for the &quot;JRE source compatibility&quot; option on the third page of the wizard (don&#39;t just press Finish immediately use Next to go through all the pages)","body":"What do you have for the &quot;JRE source compatibility&quot; option on the third page of the wizard (don&#39;t just press Finish immediately use Next to go through all the pages)"}],"answers":[{"comments":[{"owner":{"account_id":6134502,"reputation":333,"user_id":4783796,"display_name":"Knupel"},"score":0,"creation_date":1683229606,"post_id":76174097,"comment_id":134339044,"body_markdown":"Thanks a lot, I search for that from few days, weeks, months !!!!!!!!","body":"Thanks a lot, I search for that from few days, weeks, months !!!!!!!!"}],"tags":[],"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1683244192,"creation_date":1683209099,"answer_id":76174097,"question_id":76173551,"body_markdown":"Eclipse is doing what you asked it to do.\r\n\r\n`javac17` can still be configured to compile java 8 code. Just like, say, &#39;Word 2024&#39; can still open files made with &#39;word 2016&#39;.\r\n\r\nAnd.. it is. That&#39;s what the `-source 8` is about: You&#39;re running `javadoc -source 8 ....`.\r\n\r\nClick on &#39;next&#39; twice. You will see the option &#39;JRE source compatibility&#39;. Set that to at least 15; it is currently on 8, so eclipse is dutifully telling `javac` (invoked by `javadoc` to parse the doc comments and signature out) to parse it as if its java 8 compatible source, and expression-switches aren&#39;t compatible with that.\r\n","title":"Fail to build Javadoc with java 17 in Eclipse","body":"<p>Eclipse is doing what you asked it to do.</p>\n<p><code>javac17</code> can still be configured to compile java 8 code. Just like, say, 'Word 2024' can still open files made with 'word 2016'.</p>\n<p>And.. it is. That's what the <code>-source 8</code> is about: You're running <code>javadoc -source 8 ....</code>.</p>\n<p>Click on 'next' twice. You will see the option 'JRE source compatibility'. Set that to at least 15; it is currently on 8, so eclipse is dutifully telling <code>javac</code> (invoked by <code>javadoc</code> to parse the doc comments and signature out) to parse it as if its java 8 compatible source, and expression-switches aren't compatible with that.</p>\n"}],"owner":{"account_id":6134502,"reputation":333,"user_id":4783796,"display_name":"Knupel"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":160,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76174097,"answer_count":1,"score":0,"last_activity_date":1683244192,"creation_date":1683205520,"question_id":76173551,"body_markdown":"I&#39;ve my project in Eclipse and since few weeks that&#39;s failed do build my javadoc, because I&#39;ve a syntax problem with arrow in it.\r\nThe console return I need to use an upper version of Java 14 to to it.\r\nThe problem, it&#39;s my java is java 17, so I don&#39;t understand where I must look... to fix that.\r\nIndeed, I&#39;ve no problem to build my library!!! just for the javadoc.\r\n```\r\nerror: switch rules are not supported in -source 8\r\n          case &#39;[&#39; -&gt;\r\n                   ^\r\n  (use -source 14 or higher to enable switch rules)\r\n```\r\n\r\nmy setting :\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/6whuh.png","title":"Fail to build Javadoc with java 17 in Eclipse","body":"<p>I've my project in Eclipse and since few weeks that's failed do build my javadoc, because I've a syntax problem with arrow in it.\nThe console return I need to use an upper version of Java 14 to to it.\nThe problem, it's my java is java 17, so I don't understand where I must look... to fix that.\nIndeed, I've no problem to build my library!!! just for the javadoc.</p>\n<pre><code>error: switch rules are not supported in -source 8\n          case '[' -&gt;\n                   ^\n  (use -source 14 or higher to enable switch rules)\n</code></pre>\n<p>my setting :\n<a href=\"https://i.stack.imgur.com/6whuh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6whuh.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","android","mqtt","iot","paho"],"comments":[{"owner":{"account_id":8967184,"reputation":570,"user_id":9305266,"display_name":"Manish Ahire"},"score":0,"creation_date":1683266119,"post_id":76175743,"comment_id":134343269,"body_markdown":"please add this line in manifest file         &lt;service android:name=&quot;org.eclipse.paho.android.service.MqttService&quot; /&gt;","body":"please add this line in manifest file         &lt;service android:name=&quot;org.eclipse.paho.android.service.MqttService&quot; /&gt;"},{"owner":{"account_id":27665703,"reputation":1,"user_id":21117569,"display_name":"KAI"},"score":0,"creation_date":1683282579,"post_id":76175743,"comment_id":134346387,"body_markdown":"No this doesn&#39;t work The app still crashes at runtime as soon as I press the button.","body":"No this doesn&#39;t work The app still crashes at runtime as soon as I press the button."}],"owner":{"account_id":27665703,"reputation":1,"user_id":21117569,"display_name":"KAI"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683243710,"creation_date":1683220285,"question_id":76175743,"body_markdown":"I have this code for MQTT Test Client and I am trying to connect with public HiveMQ Broker but there are some runtime exceptions and I am not able to solve this problem.\r\n\r\nHere is the stack trace and code for `MainActivity.java` file.\r\n\r\n```\r\npackage com.tanmay.helloworld;\r\n\r\nimport static androidx.constraintlayout.helper.widget.MotionEffect.TAG;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.Toast;\r\n\r\nimport org.eclipse.paho.android.service.MqttAndroidClient;\r\nimport org.eclipse.paho.client.mqttv3.IMqttActionListener;\r\nimport org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;\r\nimport org.eclipse.paho.client.mqttv3.IMqttToken;\r\nimport org.eclipse.paho.client.mqttv3.MqttCallback;\r\nimport org.eclipse.paho.client.mqttv3.MqttCallbackExtended;\r\nimport org.eclipse.paho.client.mqttv3.MqttClient;\r\nimport org.eclipse.paho.client.mqttv3.MqttConnectOptions;\r\nimport org.eclipse.paho.client.mqttv3.MqttException;\r\nimport org.eclipse.paho.client.mqttv3.MqttMessage;\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    String serverUrl = &quot;tcp://broker.hivemq.com:1883&quot;;\r\n    String clientId = &quot;123&quot;;\r\n    \r\n    \r\n    Button button;\r\n    \r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n    \r\n        button = findViewById(R.id.button);\r\n    \r\n        MqttAndroidClient client = new MqttAndroidClient(getApplicationContext(),serverUrl,clientId);\r\n        MqttConnectOptions options = new MqttConnectOptions();\r\n        options.setCleanSession(true);\r\n        options.setUserName(&quot;Admin&quot;);\r\n        options.setPassword(&quot;Admin&quot;.toCharArray());\r\n    \r\n        button.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                try {\r\n                    IMqttToken token = client.connect(options);\r\n                    Toast.makeText(MainActivity.this, &quot;Client Connected&quot;, Toast.LENGTH_SHORT).show();\r\n                } catch (MqttException e) {\r\n                    Toast.makeText(MainActivity.this, &quot;Client was not able to connect&quot;, Toast.LENGTH_SHORT).show();\r\n                    throw new RuntimeException(&quot;String error&quot;+e);\r\n                }\r\n            }\r\n        });    \r\n    }\r\n}\r\n```\r\n\r\n```\r\n2023-05-04 22:30:57.44 468-468 AndroidRuntime          com.tanmay.helloworld                E  FATAL EXCEPTION: main\r\nProcess: com.tanmay.helloworld, PID: 468\r\njava.lang.NoClassDefFoundError: Failed resolution of: Landroid/support/v4/content/LocalBroadcastManager;\r\nat org.eclipse.paho.android.service.MqttAndroidClient.registerReceiver(MqttAndroidClient.java:450)\r\nat org.eclipse.paho.android.service.MqttAndroidClient.connect(MqttAndroidClient.java:428)\r\nat org.eclipse.paho.android.service.MqttAndroidClient.connect(MqttAndroidClient.java:334)\r\nat com.tanmay.helloworld.MainActivity$.onClick(MainActivity.java:50)\r\nat android.view.View.performClick(View.java:7448)\r\nat com.google.android.material.button.MaterialButton.performClick(MaterialButton.java:202)\r\nat android.view.View.performClickInternal(View.java:7425)\r\nat android.view.View.access$3600(View.java:80)\r\nat android.view.View$PerformClick.run(View.java:28305)\r\nat android.os.Handler.handleCallback(Handler.java:938)\r\nat android.os.Handler.dispatchMessage(Handler.java:99)\r\nat android.os.Looper.loop(Looper.java:223)\r\nat android.app.ActivityThread.main(ActivityThread.java:7656)\r\nat java.lang.reflect.Method.invoke(Native Method)\r\nat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:592)\r\nat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:947)\r\nCaused by: java.lang.ClassNotFoundException: Didn&#39;t find class &quot;android.support.v4.content.LocalBroadcastManager&quot; on path: DexPathList[[zip file &quot;/data/app/~~qPAk0jHRCk_VS0tccfnOQ==/com.tanmay.helloworld-Q-5Yca9SapvvvBY2CXk2Gw==/base.apk&quot;],nativeLibraryDirectories=[/data/app/~~qPAk0jHRCk_VS0tccfnOQ==/com.tanmay.helloworld-Q-5Yca9SapvvvBY2CXk2Gw==/lib/x86, /system/lib, /system_ext/lib]]\r\nat dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:207)\r\nat java.lang.ClassLoader.loadClass(ClassLoader.java:379)\r\nat java.lang.ClassLoader.loadClass(ClassLoader.java:32)\r\nat org.eclipse.paho.android.service.MqttAndroidClient.registerReceiver(MqttAndroidClient.java:450)&#160;\r\nat org.eclipse.paho.android.service.MqttAndroidClient.connect(MqttAndroidClient.java:428)&#160;\r\nat org.eclipse.paho.android.service.MqttAndroidClient.connect(MqttAndroidClient.java:334)&#160;\r\nat com.tanmay.helloworld.MainActivity$.onClick(MainActivity.java:50)&#160;\r\nat android.view.View.performClick(View.java:7448)&#160;\r\nat com.google.android.material.button.MaterialButton.performClick(MaterialButton.java:202)&#160;\r\nat android.view.View.performClickInternal(View.java:7425)&#160;\r\nat android.view.View.access$3600(View.java:80)&#160;\r\nat android.view.View$PerformClick.run(View.java:28305)&#160;\r\nat android.os.Handler.handleCallback(Handler.java:938)&#160;\r\nat android.os.Handler.dispatchMessage(Handler.java:99)&#160;\r\nat android.os.Looper.loop(Looper.java:223)&#160;\r\nat android.app.ActivityThread.main(ActivityThread.java:7656)&#160;\r\nat java.lang.reflect.Method.invoke(Native Method)&#160;\r\nat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:592)&#160;\r\nat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:947)\r\n```\r\n\r\nI am trying to create an App that can  publish and subscribe JSON payloads over an MQTT protocal.","title":"I am trying to establish an MQTT connection in Android but there are some runtime errors","body":"<p>I have this code for MQTT Test Client and I am trying to connect with public HiveMQ Broker but there are some runtime exceptions and I am not able to solve this problem.</p>\n<p>Here is the stack trace and code for <code>MainActivity.java</code> file.</p>\n<pre><code>package com.tanmay.helloworld;\n\nimport static androidx.constraintlayout.helper.widget.MotionEffect.TAG;\n\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.os.Bundle;\nimport android.util.Log;\nimport android.view.View;\nimport android.widget.Button;\nimport android.widget.Toast;\n\nimport org.eclipse.paho.android.service.MqttAndroidClient;\nimport org.eclipse.paho.client.mqttv3.IMqttActionListener;\nimport org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;\nimport org.eclipse.paho.client.mqttv3.IMqttToken;\nimport org.eclipse.paho.client.mqttv3.MqttCallback;\nimport org.eclipse.paho.client.mqttv3.MqttCallbackExtended;\nimport org.eclipse.paho.client.mqttv3.MqttClient;\nimport org.eclipse.paho.client.mqttv3.MqttConnectOptions;\nimport org.eclipse.paho.client.mqttv3.MqttException;\nimport org.eclipse.paho.client.mqttv3.MqttMessage;\n\npublic class MainActivity extends AppCompatActivity {\n\n    String serverUrl = &quot;tcp://broker.hivemq.com:1883&quot;;\n    String clientId = &quot;123&quot;;\n    \n    \n    Button button;\n    \n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n    \n        button = findViewById(R.id.button);\n    \n        MqttAndroidClient client = new MqttAndroidClient(getApplicationContext(),serverUrl,clientId);\n        MqttConnectOptions options = new MqttConnectOptions();\n        options.setCleanSession(true);\n        options.setUserName(&quot;Admin&quot;);\n        options.setPassword(&quot;Admin&quot;.toCharArray());\n    \n        button.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                try {\n                    IMqttToken token = client.connect(options);\n                    Toast.makeText(MainActivity.this, &quot;Client Connected&quot;, Toast.LENGTH_SHORT).show();\n                } catch (MqttException e) {\n                    Toast.makeText(MainActivity.this, &quot;Client was not able to connect&quot;, Toast.LENGTH_SHORT).show();\n                    throw new RuntimeException(&quot;String error&quot;+e);\n                }\n            }\n        });    \n    }\n}\n</code></pre>\n<pre><code>2023-05-04 22:30:57.44 468-468 AndroidRuntime          com.tanmay.helloworld                E  FATAL EXCEPTION: main\nProcess: com.tanmay.helloworld, PID: 468\njava.lang.NoClassDefFoundError: Failed resolution of: Landroid/support/v4/content/LocalBroadcastManager;\nat org.eclipse.paho.android.service.MqttAndroidClient.registerReceiver(MqttAndroidClient.java:450)\nat org.eclipse.paho.android.service.MqttAndroidClient.connect(MqttAndroidClient.java:428)\nat org.eclipse.paho.android.service.MqttAndroidClient.connect(MqttAndroidClient.java:334)\nat com.tanmay.helloworld.MainActivity$.onClick(MainActivity.java:50)\nat android.view.View.performClick(View.java:7448)\nat com.google.android.material.button.MaterialButton.performClick(MaterialButton.java:202)\nat android.view.View.performClickInternal(View.java:7425)\nat android.view.View.access$3600(View.java:80)\nat android.view.View$PerformClick.run(View.java:28305)\nat android.os.Handler.handleCallback(Handler.java:938)\nat android.os.Handler.dispatchMessage(Handler.java:99)\nat android.os.Looper.loop(Looper.java:223)\nat android.app.ActivityThread.main(ActivityThread.java:7656)\nat java.lang.reflect.Method.invoke(Native Method)\nat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:592)\nat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:947)\nCaused by: java.lang.ClassNotFoundException: Didn't find class &quot;android.support.v4.content.LocalBroadcastManager&quot; on path: DexPathList[[zip file &quot;/data/app/~~qPAk0jHRCk_VS0tccfnOQ==/com.tanmay.helloworld-Q-5Yca9SapvvvBY2CXk2Gw==/base.apk&quot;],nativeLibraryDirectories=[/data/app/~~qPAk0jHRCk_VS0tccfnOQ==/com.tanmay.helloworld-Q-5Yca9SapvvvBY2CXk2Gw==/lib/x86, /system/lib, /system_ext/lib]]\nat dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:207)\nat java.lang.ClassLoader.loadClass(ClassLoader.java:379)\nat java.lang.ClassLoader.loadClass(ClassLoader.java:32)\nat org.eclipse.paho.android.service.MqttAndroidClient.registerReceiver(MqttAndroidClient.java:450) \nat org.eclipse.paho.android.service.MqttAndroidClient.connect(MqttAndroidClient.java:428) \nat org.eclipse.paho.android.service.MqttAndroidClient.connect(MqttAndroidClient.java:334) \nat com.tanmay.helloworld.MainActivity$.onClick(MainActivity.java:50) \nat android.view.View.performClick(View.java:7448) \nat com.google.android.material.button.MaterialButton.performClick(MaterialButton.java:202) \nat android.view.View.performClickInternal(View.java:7425) \nat android.view.View.access$3600(View.java:80) \nat android.view.View$PerformClick.run(View.java:28305) \nat android.os.Handler.handleCallback(Handler.java:938) \nat android.os.Handler.dispatchMessage(Handler.java:99) \nat android.os.Looper.loop(Looper.java:223) \nat android.app.ActivityThread.main(ActivityThread.java:7656) \nat java.lang.reflect.Method.invoke(Native Method) \nat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:592) \nat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:947)\n</code></pre>\n<p>I am trying to create an App that can  publish and subscribe JSON payloads over an MQTT protocal.</p>\n"},{"tags":["java","intellij-idea","javadoc","intellij-14"],"comments":[{"owner":{"account_id":5743051,"reputation":66,"user_id":4535117,"display_name":"Brunaldo"},"score":0,"creation_date":1423848175,"post_id":28505097,"comment_id":45329499,"body_markdown":"Sorry if I&#39;m wrong here but that&#39;s how that comment is suppose to me, I think you&#39;re looking for    `/*\n    Hello\n     */` . Only have one start after the first forward slash.","body":"Sorry if I&#39;m wrong here but that&#39;s how that comment is suppose to me, I think you&#39;re looking for    <code>&#47;*     Hello      *&#47;</code> . Only have one start after the first forward slash."},{"owner":{"account_id":985588,"reputation":353,"user_id":1004190,"accept_rate":100,"display_name":"rsavchenko"},"score":1,"creation_date":1423848462,"post_id":28505097,"comment_id":45329671,"body_markdown":"@Brunaldo javadocs commonly start with \n/** see http://www.oracle.com/technetwork/articles/java/index-137868.html","body":"@Brunaldo javadocs commonly start with  /** see <a href=\"http://www.oracle.com/technetwork/articles/java/index-137868.html\" rel=\"nofollow noreferrer\">oracle.com/technetwork/articles/java/index-137868.html</a>"},{"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"score":0,"creation_date":1423848587,"post_id":28505097,"comment_id":45329758,"body_markdown":"@rsavchenko The javadoc block style comments include the `*` on the newline and the javadoc compiler removes them. IntelliJ is following the convention.","body":"@rsavchenko The javadoc block style comments include the <code>*</code> on the newline and the javadoc compiler removes them. IntelliJ is following the convention."},{"owner":{"account_id":985588,"reputation":353,"user_id":1004190,"accept_rate":100,"display_name":"rsavchenko"},"score":1,"creation_date":1423848780,"post_id":28505097,"comment_id":45329851,"body_markdown":"@ElliottFrisch the one star is fine but each time i hit enter I get 2 3 4 5 *&#39;s on the same line. So when I hit enter I get  * (cursor) * I don&#39;t   want the trailing star","body":"@ElliottFrisch the one star is fine but each time i hit enter I get 2 3 4 5 *&#39;s on the same line. So when I hit enter I get  * (cursor) * I don&#39;t   want the trailing star"},{"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"score":1,"creation_date":1423848907,"post_id":28505097,"comment_id":45329928,"body_markdown":"@rsavchenko Ahh.. sounds like you edited the default configuration in the preferences... I&#39;m not 100% sure howto reset that with intellij but I expect someone will know...","body":"@rsavchenko Ahh.. sounds like you edited the default configuration in the preferences... I&#39;m not 100% sure howto reset that with intellij but I expect someone will know..."},{"owner":{"account_id":4082028,"reputation":5506,"user_id":3352285,"display_name":"NESPowerGlove"},"score":0,"creation_date":1423856797,"post_id":28505097,"comment_id":45334101,"body_markdown":"@rsavchenko Did you know you can format, `ctrl-alt-L`, and have your words auto fit the rows with the *s? Wondering if you don&#39;t like the *s because you go back and add text and manually format.","body":"@rsavchenko Did you know you can format, <code>ctrl-alt-L</code>, and have your words auto fit the rows with the *s? Wondering if you don&#39;t like the *s because you go back and add text and manually format."},{"owner":{"account_id":25300,"reputation":13294,"user_id":64967,"accept_rate":75,"display_name":"Dilum Ranatunga"},"score":0,"creation_date":1424241413,"post_id":28505097,"comment_id":45463610,"body_markdown":"I am also seeing this behavior, and it began after a recent update. I doubt it has to do with any preference... and if it does, the update either changed a preference without asking me, or the update started interpreting a setting differently.","body":"I am also seeing this behavior, and it began after a recent update. I doubt it has to do with any preference... and if it does, the update either changed a preference without asking me, or the update started interpreting a setting differently."},{"owner":{"account_id":985588,"reputation":353,"user_id":1004190,"accept_rate":100,"display_name":"rsavchenko"},"score":0,"creation_date":1424301066,"post_id":28505097,"comment_id":45498109,"body_markdown":"@DilumRanatunga it looks like it did have to do with a preference. I deleted my Intellij configuration directory and the problem went away. Sucks that I had to redo all my settings. But it must have been something in there, because when I import my old setting it comes back. Can&#39;t pinpoint the setting causing this though.","body":"@DilumRanatunga it looks like it did have to do with a preference. I deleted my Intellij configuration directory and the problem went away. Sucks that I had to redo all my settings. But it must have been something in there, because when I import my old setting it comes back. Can&#39;t pinpoint the setting causing this though."},{"owner":{"account_id":985588,"reputation":353,"user_id":1004190,"accept_rate":100,"display_name":"rsavchenko"},"score":0,"creation_date":1424301109,"post_id":28505097,"comment_id":45498129,"body_markdown":"@NESPowerGlove sadly the auto format doesn&#39;t remove the extra **** characters.","body":"@NESPowerGlove sadly the auto format doesn&#39;t remove the extra **** characters."},{"owner":{"account_id":4082028,"reputation":5506,"user_id":3352285,"display_name":"NESPowerGlove"},"score":0,"creation_date":1424303012,"post_id":28505097,"comment_id":45498808,"body_markdown":"@rsavchenko I meant that it would keep the asterisks but allow for easy typing of whatever you want, it would place them asterisks in for you, so you don&#39;t have to fight manually moving asterisks around when you wanted to add text in the middle of a preexisting comment.","body":"@rsavchenko I meant that it would keep the asterisks but allow for easy typing of whatever you want, it would place them asterisks in for you, so you don&#39;t have to fight manually moving asterisks around when you wanted to add text in the middle of a preexisting comment."}],"answers":[{"comments":[{"owner":{"account_id":985588,"reputation":353,"user_id":1004190,"accept_rate":100,"display_name":"rsavchenko"},"score":1,"creation_date":1424301242,"post_id":28508114,"comment_id":45498181,"body_markdown":"I wan&#39;t javadoc comments. The problem is not one star at each line. The problem is a star is added at every newline so u can get 2,3,4,5 etc *&#39;s per line","body":"I wan&#39;t javadoc comments. The problem is not one star at each line. The problem is a star is added at every newline so u can get 2,3,4,5 etc *&#39;s per line"}],"tags":[],"owner":{"account_id":111563,"reputation":13269,"user_id":294657,"accept_rate":85,"display_name":"kaqqao"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1423858854,"creation_date":1423858854,"answer_id":28508114,"question_id":28505097,"body_markdown":"What you&#39;re typing are not normal block comments (/* ... */) but Javadoc comments (/** ... */), and those *should* have a * at every line. So just delete the extra * after the first / and you&#39;ll be fine.","title":"IntelliJ adds extra * every time I hit enter in a block comment","body":"<p>What you're typing are not normal block comments (/* ... */) but Javadoc comments (/** ... */), and those <em>should</em> have a * at every line. So just delete the extra * after the first / and you'll be fine.</p>\n"},{"comments":[{"owner":{"account_id":985588,"reputation":353,"user_id":1004190,"accept_rate":100,"display_name":"rsavchenko"},"score":0,"creation_date":1424301172,"post_id":28577729,"comment_id":45498152,"body_markdown":"This seems likely. Although It looks like it did have to do with a preference. I deleted my Intellij configuration directory and the problem went away. Sucks that I had to redo all my settings. But it must have been something in there, because when I import my old setting it comes back. Can&#39;t pinpoint the setting causing this though.","body":"This seems likely. Although It looks like it did have to do with a preference. I deleted my Intellij configuration directory and the problem went away. Sucks that I had to redo all my settings. But it must have been something in there, because when I import my old setting it comes back. Can&#39;t pinpoint the setting causing this though."},{"owner":{"account_id":25300,"reputation":13294,"user_id":64967,"accept_rate":75,"display_name":"Dilum Ranatunga"},"score":0,"creation_date":1424362196,"post_id":28577729,"comment_id":45526002,"body_markdown":"Thanks for the update @rsavchenko -- I guess I should now upload my settings to the ticket...","body":"Thanks for the update @rsavchenko -- I guess I should now upload my settings to the ticket..."}],"tags":[],"owner":{"account_id":25300,"reputation":13294,"user_id":64967,"accept_rate":75,"display_name":"Dilum Ranatunga"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1424749198,"creation_date":1424242530,"answer_id":28577729,"question_id":28505097,"body_markdown":"I suspect this is a defect/regression. I&#39;ve created an issue on YouTrack: https://youtrack.jetbrains.com/issue/IDEA-136673\r\n\r\n---\r\n\r\n**Update**\r\n\r\nThe IntelliJ team isolated the issue to Gauge plugin. I&#39;ve logged the issue with plugin authors: https://github.com/getgauge/Intellij-Plugin/issues/39","title":"IntelliJ adds extra * every time I hit enter in a block comment","body":"<p>I suspect this is a defect/regression. I've created an issue on YouTrack: <a href=\"https://youtrack.jetbrains.com/issue/IDEA-136673\" rel=\"nofollow\">https://youtrack.jetbrains.com/issue/IDEA-136673</a></p>\n\n<hr>\n\n<p><strong>Update</strong></p>\n\n<p>The IntelliJ team isolated the issue to Gauge plugin. I've logged the issue with plugin authors: <a href=\"https://github.com/getgauge/Intellij-Plugin/issues/39\" rel=\"nofollow\">https://github.com/getgauge/Intellij-Plugin/issues/39</a></p>\n"},{"tags":[],"owner":{"account_id":985588,"reputation":353,"user_id":1004190,"accept_rate":100,"display_name":"rsavchenko"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1424717550,"creation_date":1424717550,"answer_id":28681180,"question_id":28505097,"body_markdown":"Looks like it&#39;s a bug in the Gauge plugin I was using for &quot;.md&quot; file support. Uninstalled that and the issue was gone.\r\n \r\nhttps://youtrack.jetbrains.com/issue/IDEA-136182","title":"IntelliJ adds extra * every time I hit enter in a block comment","body":"<p>Looks like it's a bug in the Gauge plugin I was using for \".md\" file support. Uninstalled that and the issue was gone.</p>\n\n<p><a href=\"https://youtrack.jetbrains.com/issue/IDEA-136182\" rel=\"nofollow\">https://youtrack.jetbrains.com/issue/IDEA-136182</a></p>\n"},{"tags":[],"owner":{"account_id":13151841,"reputation":391,"user_id":9500212,"display_name":"Corey"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683243622,"creation_date":1683243622,"answer_id":76178003,"question_id":28505097,"body_markdown":"I had this problem recently. It turns out it was caused by the AWS Toolkit plugin.","title":"IntelliJ adds extra * every time I hit enter in a block comment","body":"<p>I had this problem recently. It turns out it was caused by the AWS Toolkit plugin.</p>\n"}],"owner":{"account_id":985588,"reputation":353,"user_id":1004190,"accept_rate":100,"display_name":"rsavchenko"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1009,"favorite_count":0,"down_vote_count":1,"up_vote_count":6,"accepted_answer_id":28577729,"answer_count":4,"score":5,"last_activity_date":1683243622,"creation_date":1423847841,"question_id":28505097,"body_markdown":"I&#39;m having a super strange problem with Idea. \r\n\r\nEvery time I hit enter in a block comment it adds an extra * on the line. It gets really annoying to have to delete it before typing each line. \r\nI have tried importing several coworkers code style settings who are not having this issue to no avail. I also can&#39;t seem to find the setting that would be doing this, and nothing on google. Anyone know a setting that could be causing this? \r\n\r\nExample:\r\n\r\n     /**\r\n     * Some comment (pressing enter 3 times)\r\n     * \r\n     * \r\n     * (cursor is here)* * * * \r\n     */\r\nAnother Example:\r\n\r\n    /**\r\n    * Some comment (press enter)\r\n    * (cursor is here)*\r\n    */\r\n        \r\n\r\n\r\n","title":"IntelliJ adds extra * every time I hit enter in a block comment","body":"<p>I'm having a super strange problem with Idea. </p>\n\n<p>Every time I hit enter in a block comment it adds an extra * on the line. It gets really annoying to have to delete it before typing each line. \nI have tried importing several coworkers code style settings who are not having this issue to no avail. I also can't seem to find the setting that would be doing this, and nothing on google. Anyone know a setting that could be causing this? </p>\n\n<p>Example:</p>\n\n<pre><code> /**\n * Some comment (pressing enter 3 times)\n * \n * \n * (cursor is here)* * * * \n */\n</code></pre>\n\n<p>Another Example:</p>\n\n<pre><code>/**\n* Some comment (press enter)\n* (cursor is here)*\n*/\n</code></pre>\n"},{"tags":["java","animation","javafx","bezier","cubic-bezier"],"comments":[{"owner":{"account_id":384206,"reputation":50386,"user_id":740553,"accept_rate":46,"display_name":"Mike &#39;Pomax&#39; Kamermans"},"score":1,"creation_date":1683060802,"post_id":76158109,"comment_id":134308177,"body_markdown":"What _specific_ thing do you need help with relating to this code though?","body":"What <i>specific</i> thing do you need help with relating to this code though?"},{"owner":{"account_id":28485772,"reputation":3,"user_id":21799078,"display_name":"Dario Peluso"},"score":0,"creation_date":1683062472,"post_id":76158109,"comment_id":134308484,"body_markdown":"I&#39;m sorry this is my first question here, I am trying to write a handleMouseReleased() method that restores the original state of the path (after it has been dragged and deformed by handleMouseDragged(). I tried searching online and I believe I should be using the Timeline class, but I need some guidance. I saved the original state of the paths in the List&lt;Path&gt; initialPaths.","body":"I&#39;m sorry this is my first question here, I am trying to write a handleMouseReleased() method that restores the original state of the path (after it has been dragged and deformed by handleMouseDragged(). I tried searching online and I believe I should be using the Timeline class, but I need some guidance. I saved the original state of the paths in the List&lt;Path&gt; initialPaths."},{"owner":{"account_id":384206,"reputation":50386,"user_id":740553,"accept_rate":46,"display_name":"Mike &#39;Pomax&#39; Kamermans"},"score":1,"creation_date":1683064956,"post_id":76158109,"comment_id":134308824,"body_markdown":"If you&#39;re just responding to mouse events, then there&#39;s no real reason to use a timeline, simply cache the original state, and on mouse release, replace the current state with the cached state.","body":"If you&#39;re just responding to mouse events, then there&#39;s no real reason to use a timeline, simply cache the original state, and on mouse release, replace the current state with the cached state."},{"owner":{"account_id":28485772,"reputation":3,"user_id":21799078,"display_name":"Dario Peluso"},"score":0,"creation_date":1683069894,"post_id":76158109,"comment_id":134309376,"body_markdown":"You are right my comment was too vague. My intention is to make a simple animation transitioning from the dragged state to the original state. But I will start applying your suggestion, first things first :) thank you","body":"You are right my comment was too vague. My intention is to make a simple animation transitioning from the dragged state to the original state. But I will start applying your suggestion, first things first :) thank you"},{"owner":{"account_id":7717111,"reputation":8774,"user_id":5844477,"display_name":"Sai Dandem"},"score":0,"creation_date":1683243583,"post_id":76158109,"comment_id":134341243,"body_markdown":"Just for your info, saving the paths (in initialPaths) makes no difference. Because the moment you dragged, the path properties are already updated and there is no way to get the initial values. For that you need to take backup of each property. Check my answer for a possible solution.","body":"Just for your info, saving the paths (in initialPaths) makes no difference. Because the moment you dragged, the path properties are already updated and there is no way to get the initial values. For that you need to take backup of each property. Check my answer for a possible solution."}],"answers":[{"comments":[{"owner":{"account_id":28485772,"reputation":3,"user_id":21799078,"display_name":"Dario Peluso"},"score":0,"creation_date":1683876820,"post_id":76177991,"comment_id":134436567,"body_markdown":"Sorry for the delay in my comment - thank you! This was very useful and it put me on the right path :)","body":"Sorry for the delay in my comment - thank you! This was very useful and it put me on the right path :)"}],"tags":[],"owner":{"account_id":7717111,"reputation":8774,"user_id":5844477,"display_name":"Sai Dandem"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1683243316,"creation_date":1683243316,"answer_id":76177991,"question_id":76158109,"body_markdown":"For this requirement, all you need to do is to store the initial values of controlX1,Y1,X2,Y2 and reset the curves control properties to the initial values using a Timeline.\r\n\r\nBelow is the output, if you add the below changes to your code:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n    private double x1, y1, x2, y2;\r\n    \r\n    private void handleMousePressed(MouseEvent event) {\r\n        dragStartX = event.getX();\r\n        dragStartY = event.getY();\r\n        Path path = (Path) event.getSource();\r\n        for (PathElement element : path.getElements()) {\r\n            if (element instanceof CubicCurveTo curve) {\r\n                x1 = curve.getControlX1();\r\n                y1 = curve.getControlY1();\r\n                x2 = curve.getControlX2();\r\n                y2 = curve.getControlY2();\r\n            }\r\n        }\r\n    }\r\n    \r\n    private void handleMouseReleased(MouseEvent event) {\r\n        Path path = (Path) event.getSource();\r\n        for (PathElement element : path.getElements()) {\r\n            if (element instanceof CubicCurveTo curve) {\r\n                // Create key values to reset the properties to the initial state\r\n                KeyValue kx1 = new KeyValue(curve.controlX1Property(), x1);\r\n                KeyValue ky1 = new KeyValue(curve.controlY1Property(), y1);\r\n                KeyValue kx2 = new KeyValue(curve.controlX2Property(), x2);\r\n                KeyValue ky2 = new KeyValue(curve.controlY2Property(), y2);\r\n                // Change the speed as per your needs\r\n                Duration speed = Duration.millis(300);\r\n                Timeline tl = new Timeline(new KeyFrame(speed, kx1, ky1, kx2, ky2));\r\n                tl.play();\r\n            }\r\n        }\r\n    }\r\n\r\n  [1]: https://i.stack.imgur.com/qy2ha.gif","title":"JavaFX animation to restore a Path original state","body":"<p>For this requirement, all you need to do is to store the initial values of controlX1,Y1,X2,Y2 and reset the curves control properties to the initial values using a Timeline.</p>\n<p>Below is the output, if you add the below changes to your code:</p>\n<p><a href=\"https://i.stack.imgur.com/qy2ha.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qy2ha.gif\" alt=\"enter image description here\" /></a></p>\n<pre><code>private double x1, y1, x2, y2;\n\nprivate void handleMousePressed(MouseEvent event) {\n    dragStartX = event.getX();\n    dragStartY = event.getY();\n    Path path = (Path) event.getSource();\n    for (PathElement element : path.getElements()) {\n        if (element instanceof CubicCurveTo curve) {\n            x1 = curve.getControlX1();\n            y1 = curve.getControlY1();\n            x2 = curve.getControlX2();\n            y2 = curve.getControlY2();\n        }\n    }\n}\n\nprivate void handleMouseReleased(MouseEvent event) {\n    Path path = (Path) event.getSource();\n    for (PathElement element : path.getElements()) {\n        if (element instanceof CubicCurveTo curve) {\n            // Create key values to reset the properties to the initial state\n            KeyValue kx1 = new KeyValue(curve.controlX1Property(), x1);\n            KeyValue ky1 = new KeyValue(curve.controlY1Property(), y1);\n            KeyValue kx2 = new KeyValue(curve.controlX2Property(), x2);\n            KeyValue ky2 = new KeyValue(curve.controlY2Property(), y2);\n            // Change the speed as per your needs\n            Duration speed = Duration.millis(300);\n            Timeline tl = new Timeline(new KeyFrame(speed, kx1, ky1, kx2, ky2));\n            tl.play();\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":28485772,"reputation":3,"user_id":21799078,"display_name":"Dario Peluso"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76177991,"answer_count":1,"score":0,"last_activity_date":1683243316,"creation_date":1683054468,"question_id":76158109,"body_markdown":"I&#39;m a beginner in JavaFX, and I&#39;m working on a project where I&#39;m using four Bezier curves to draw a circle. My goal is to eventually achieve a &quot;wobbly&quot; effect by allowing the curves to be deformed when the user drags them. To accomplish this, I want to add a feature that restores the original state of the circle when the user releases the mouse click (EDIT) performing an animation that makes the curve move to its initial path, which I stored in the &quot;initialPath&quot; list.\r\n\r\nWhile I have chosen to use JavaFX for this project, I am aware that it may not be the best tool for the job... I&#39;m just trying to explore JavaFX&#39;s capabilities and would appreciate any guidance or tips on how to implement this functionality. Thank you for your help.\r\n\r\nI tried working with Timeline and Keyframes&#39; interpolation, I can&#39;t seem to find any other question on this exact topic and I&#39;m finding it hard to grasp. This is the state of my code at the moment:\r\n\r\n\r\n```\r\n    import javafx.application.Application;\r\n    import javafx.scene.Scene;\r\n    import javafx.scene.input.MouseEvent;\r\n    import javafx.scene.layout.Pane;\r\n    import javafx.scene.paint.Color;\r\n    import javafx.scene.shape.CubicCurveTo;\r\n    import javafx.scene.shape.MoveTo;\r\n    import javafx.scene.shape.Path;\r\n    import javafx.scene.shape.PathElement;\r\n    import javafx.stage.Stage;\r\n\r\n    import java.util.ArrayList;\r\n    import java.util.Arrays;\r\n    import java.util.List;\r\n\r\n    public class BezierCurves extends Application {\r\n\r\n    private double dragStartX;\r\n    private double dragStartY;\r\n    private List&lt;Path&gt; initialPaths = new ArrayList&lt;&gt;();\r\n    private Pane pane;\r\n\r\n\r\n    public Path drawCurve(double[] moveTo, double[] coordinates, int color) {\r\n        Path path = new Path();\r\n        switch (color) {\r\n            case 0 -&gt; path.setStroke(Color.RED);\r\n            case 1 -&gt; path.setStroke(Color.BLUE);\r\n            case 2 -&gt; path.setStroke(Color.GREEN);\r\n            case 3 -&gt; path.setStroke(Color.ORANGE);\r\n            default -&gt; path.setStroke(Color.BLACK);\r\n        }\r\n        path.setStrokeWidth(2);\r\n        path.setFill(null);\r\n        MoveTo moveTo1 = new MoveTo(moveTo[0], moveTo[1]);\r\n        CubicCurveTo curveTo1 = new CubicCurveTo(coordinates[0],\r\n                coordinates[1],\r\n                coordinates[2],\r\n                coordinates[3],\r\n                coordinates[4],\r\n                coordinates[5]);\r\n        path.getElements().addAll(moveTo1, curveTo1);\r\n        return path;\r\n    }\r\n\r\n    @Override\r\n    public void start(Stage primaryStage) {\r\n        pane = new Pane();\r\n        Scene scene = new Scene(pane, 400, 400);\r\n        double centerX = 200, centerY = 200, radius = 100, kappa = 0.5522848;\r\n\r\n        Path path1 = drawCurve(new double[]{centerX, centerY - radius},\r\n                new double[]{centerX + radius * kappa,\r\n                        centerY - radius,\r\n                        centerX + radius,\r\n                        centerY - radius * kappa,\r\n                        centerX + radius, centerY}, 0);\r\n        path1.setOnMousePressed(this::handleMousePressed);\r\n        path1.setOnMouseDragged(this::handleMouseDragged);\r\n        path1.setOnMouseReleased(this::handleMouseReleased);\r\n\r\n        Path path2 = drawCurve(new double[]{centerX + radius, centerY},\r\n                new double[]{centerX + radius,\r\n                        centerY + radius * kappa,\r\n                        centerX + radius * kappa,\r\n                        centerY + radius, centerX,\r\n                        centerY + radius}, 1);\r\n        path2.setOnMousePressed(this::handleMousePressed);\r\n        path2.setOnMouseDragged(this::handleMouseDragged);\r\n        path2.setOnMouseReleased(this::handleMouseReleased);\r\n\r\n        Path path3 = drawCurve(new double[]{centerX, centerY + radius},\r\n                new double[]{centerX - radius * kappa,\r\n                        centerY + radius,\r\n                        centerX - radius,\r\n                        centerY + radius * kappa,\r\n                        centerX - radius, centerY}, 2);\r\n        path3.setOnMousePressed(this::handleMousePressed);\r\n        path3.setOnMouseDragged(this::handleMouseDragged);\r\n        path3.setOnMouseReleased(this::handleMouseReleased);\r\n\r\n        Path path4 = drawCurve(new double[]{centerX - radius, centerY},\r\n                new double[]{centerX - radius,\r\n                        centerY - radius * kappa,\r\n                        centerX - radius * kappa,\r\n                        centerY - radius,\r\n                        centerX,\r\n                        centerY - radius}, 3);\r\n        path4.setOnMousePressed(this::handleMousePressed);\r\n        path4.setOnMouseDragged(this::handleMouseDragged);\r\n        path4.setOnMouseReleased(this::handleMouseReleased);\r\n\r\n        initialPaths.addAll(Arrays.asList(path1, path2, path3, path4));\r\n        pane.getChildren().addAll(path1, path2, path3, path4);\r\n        primaryStage.setScene(scene);\r\n        primaryStage.show();\r\n    }\r\n\r\n    private void handleMousePressed(MouseEvent event) {\r\n        dragStartX = event.getX();\r\n        dragStartY = event.getY();\r\n    }\r\n\r\n    private void handleMouseDragged(MouseEvent event) {\r\n        double offsetX = event.getX() - dragStartX;\r\n        double offsetY = event.getY() - dragStartY;\r\n       \r\n        Path path = (Path) event.getSource();\r\n\r\n        for (PathElement element : path.getElements()) {\r\n            if (element instanceof CubicCurveTo curve) {\r\n                curve.setControlX1(curve.getControlX1() + offsetX * 0.02);\r\n                curve.setControlY1(curve.getControlY1() + offsetY * 0.02);\r\n                curve.setControlX2(curve.getControlX2() + offsetX * 0.02);\r\n                curve.setControlY2(curve.getControlY2() + offsetY * 0.02);\r\n            }\r\n        }\r\n    }\r\n\r\n    private void handleMouseReleased(MouseEvent event) {\r\n            // TODO\r\n        }\r\n\r\n    public static void main(String[] args) {\r\n        launch(args);\r\n    }\r\n\r\n    }\r\n```\r\n","title":"JavaFX animation to restore a Path original state","body":"<p>I'm a beginner in JavaFX, and I'm working on a project where I'm using four Bezier curves to draw a circle. My goal is to eventually achieve a &quot;wobbly&quot; effect by allowing the curves to be deformed when the user drags them. To accomplish this, I want to add a feature that restores the original state of the circle when the user releases the mouse click (EDIT) performing an animation that makes the curve move to its initial path, which I stored in the &quot;initialPath&quot; list.</p>\n<p>While I have chosen to use JavaFX for this project, I am aware that it may not be the best tool for the job... I'm just trying to explore JavaFX's capabilities and would appreciate any guidance or tips on how to implement this functionality. Thank you for your help.</p>\n<p>I tried working with Timeline and Keyframes' interpolation, I can't seem to find any other question on this exact topic and I'm finding it hard to grasp. This is the state of my code at the moment:</p>\n<pre><code>    import javafx.application.Application;\n    import javafx.scene.Scene;\n    import javafx.scene.input.MouseEvent;\n    import javafx.scene.layout.Pane;\n    import javafx.scene.paint.Color;\n    import javafx.scene.shape.CubicCurveTo;\n    import javafx.scene.shape.MoveTo;\n    import javafx.scene.shape.Path;\n    import javafx.scene.shape.PathElement;\n    import javafx.stage.Stage;\n\n    import java.util.ArrayList;\n    import java.util.Arrays;\n    import java.util.List;\n\n    public class BezierCurves extends Application {\n\n    private double dragStartX;\n    private double dragStartY;\n    private List&lt;Path&gt; initialPaths = new ArrayList&lt;&gt;();\n    private Pane pane;\n\n\n    public Path drawCurve(double[] moveTo, double[] coordinates, int color) {\n        Path path = new Path();\n        switch (color) {\n            case 0 -&gt; path.setStroke(Color.RED);\n            case 1 -&gt; path.setStroke(Color.BLUE);\n            case 2 -&gt; path.setStroke(Color.GREEN);\n            case 3 -&gt; path.setStroke(Color.ORANGE);\n            default -&gt; path.setStroke(Color.BLACK);\n        }\n        path.setStrokeWidth(2);\n        path.setFill(null);\n        MoveTo moveTo1 = new MoveTo(moveTo[0], moveTo[1]);\n        CubicCurveTo curveTo1 = new CubicCurveTo(coordinates[0],\n                coordinates[1],\n                coordinates[2],\n                coordinates[3],\n                coordinates[4],\n                coordinates[5]);\n        path.getElements().addAll(moveTo1, curveTo1);\n        return path;\n    }\n\n    @Override\n    public void start(Stage primaryStage) {\n        pane = new Pane();\n        Scene scene = new Scene(pane, 400, 400);\n        double centerX = 200, centerY = 200, radius = 100, kappa = 0.5522848;\n\n        Path path1 = drawCurve(new double[]{centerX, centerY - radius},\n                new double[]{centerX + radius * kappa,\n                        centerY - radius,\n                        centerX + radius,\n                        centerY - radius * kappa,\n                        centerX + radius, centerY}, 0);\n        path1.setOnMousePressed(this::handleMousePressed);\n        path1.setOnMouseDragged(this::handleMouseDragged);\n        path1.setOnMouseReleased(this::handleMouseReleased);\n\n        Path path2 = drawCurve(new double[]{centerX + radius, centerY},\n                new double[]{centerX + radius,\n                        centerY + radius * kappa,\n                        centerX + radius * kappa,\n                        centerY + radius, centerX,\n                        centerY + radius}, 1);\n        path2.setOnMousePressed(this::handleMousePressed);\n        path2.setOnMouseDragged(this::handleMouseDragged);\n        path2.setOnMouseReleased(this::handleMouseReleased);\n\n        Path path3 = drawCurve(new double[]{centerX, centerY + radius},\n                new double[]{centerX - radius * kappa,\n                        centerY + radius,\n                        centerX - radius,\n                        centerY + radius * kappa,\n                        centerX - radius, centerY}, 2);\n        path3.setOnMousePressed(this::handleMousePressed);\n        path3.setOnMouseDragged(this::handleMouseDragged);\n        path3.setOnMouseReleased(this::handleMouseReleased);\n\n        Path path4 = drawCurve(new double[]{centerX - radius, centerY},\n                new double[]{centerX - radius,\n                        centerY - radius * kappa,\n                        centerX - radius * kappa,\n                        centerY - radius,\n                        centerX,\n                        centerY - radius}, 3);\n        path4.setOnMousePressed(this::handleMousePressed);\n        path4.setOnMouseDragged(this::handleMouseDragged);\n        path4.setOnMouseReleased(this::handleMouseReleased);\n\n        initialPaths.addAll(Arrays.asList(path1, path2, path3, path4));\n        pane.getChildren().addAll(path1, path2, path3, path4);\n        primaryStage.setScene(scene);\n        primaryStage.show();\n    }\n\n    private void handleMousePressed(MouseEvent event) {\n        dragStartX = event.getX();\n        dragStartY = event.getY();\n    }\n\n    private void handleMouseDragged(MouseEvent event) {\n        double offsetX = event.getX() - dragStartX;\n        double offsetY = event.getY() - dragStartY;\n       \n        Path path = (Path) event.getSource();\n\n        for (PathElement element : path.getElements()) {\n            if (element instanceof CubicCurveTo curve) {\n                curve.setControlX1(curve.getControlX1() + offsetX * 0.02);\n                curve.setControlY1(curve.getControlY1() + offsetY * 0.02);\n                curve.setControlX2(curve.getControlX2() + offsetX * 0.02);\n                curve.setControlY2(curve.getControlY2() + offsetY * 0.02);\n            }\n        }\n    }\n\n    private void handleMouseReleased(MouseEvent event) {\n            // TODO\n        }\n\n    public static void main(String[] args) {\n        launch(args);\n    }\n\n    }\n</code></pre>\n"},{"tags":["java","spring-boot","rest","exchange-server","exchangewebservices"],"answers":[{"comments":[{"owner":{"account_id":27081170,"reputation":13,"user_id":20630313,"display_name":"Pankaj Patil"},"score":0,"creation_date":1683608554,"post_id":76177984,"comment_id":134388560,"body_markdown":"Thanks a lot Glen! I will try to implement the same with Graph API. \nDo you have any code reference where we can check the implementation of graph Api to receive emails in java spring boot application. ?","body":"Thanks a lot Glen! I will try to implement the same with Graph API.  Do you have any code reference where we can check the implementation of graph Api to receive emails in java spring boot application. ?"}],"tags":[],"owner":{"account_id":1085024,"reputation":20756,"user_id":1080923,"display_name":"Glen Scales"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1683243192,"creation_date":1683243192,"answer_id":76177984,"question_id":76170650,"body_markdown":"Basic authentication has been depreciated in Office365 so can&#39;t be used https://learn.microsoft.com/en-us/exchange/clients-and-mobile-in-exchange-online/deprecation-of-basic-authentication-exchange-online. You need to implement oauth in your code https://learn.microsoft.com/en-us/exchange/client-developer/exchange-web-services/how-to-authenticate-an-ews-application-by-using-oauth. \r\n\r\nFor what your trying to do (listen to new email in Office 365) the Graph API would be a better option as EWS is considered legacy and may not be available in the future (the only context in which EWS is needed is OnPrem Exchange). In the Graph you can create a Webhook https://learn.microsoft.com/en-us/graph/api/resources/webhooks?view=graph-rest-1.0 or as your just doing pull notifications you could use the delta endpoint https://learn.microsoft.com/en-us/graph/delta-query-overview","title":"Need to use EWS (Exchange Web Service) to receive Microsoft exchange&#39;s/Outlook emails in java spring boot Project","body":"<p>Basic authentication has been depreciated in Office365 so can't be used <a href=\"https://learn.microsoft.com/en-us/exchange/clients-and-mobile-in-exchange-online/deprecation-of-basic-authentication-exchange-online\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/exchange/clients-and-mobile-in-exchange-online/deprecation-of-basic-authentication-exchange-online</a>. You need to implement oauth in your code <a href=\"https://learn.microsoft.com/en-us/exchange/client-developer/exchange-web-services/how-to-authenticate-an-ews-application-by-using-oauth\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/exchange/client-developer/exchange-web-services/how-to-authenticate-an-ews-application-by-using-oauth</a>.</p>\n<p>For what your trying to do (listen to new email in Office 365) the Graph API would be a better option as EWS is considered legacy and may not be available in the future (the only context in which EWS is needed is OnPrem Exchange). In the Graph you can create a Webhook <a href=\"https://learn.microsoft.com/en-us/graph/api/resources/webhooks?view=graph-rest-1.0\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/graph/api/resources/webhooks?view=graph-rest-1.0</a> or as your just doing pull notifications you could use the delta endpoint <a href=\"https://learn.microsoft.com/en-us/graph/delta-query-overview\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/graph/delta-query-overview</a></p>\n"}],"owner":{"account_id":27081170,"reputation":13,"user_id":20630313,"display_name":"Pankaj Patil"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":386,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76177984,"answer_count":1,"score":1,"last_activity_date":1683243192,"creation_date":1683185871,"question_id":76170650,"body_markdown":"I want to connect to Microsoft exchange server(EWS) with the help of EWS API provided by Microsoft.\r\nThe Spring boot application should be a continuous listener, so that the application should be able to listen all the new emails which are getting received in the outlook.\r\n\r\nI have written a REST API to connect exchange server from java spring boot project. Created required EWS object and subscribed to the new Email notification so that it listen the new email.\r\n\r\nCode template:\r\n\r\nAdded dependency in pom as :\r\n\r\n\r\n`&lt;dependency&gt; \t`\r\n\r\n`&lt;groupId&gt;com.microsoft.ews-java-api&lt;/groupId&gt; \t`\r\n\r\n`&lt;artifactId&gt;ews-java-api&lt;/artifactId&gt; \t`\r\n\r\n`&lt;version&gt;2.0&lt;/version&gt; `\r\n\r\n`&lt;/dependency&gt;`\r\n\r\nJava controller :\r\n\r\n    \r\n    @PostMapping(value = &quot;/EWSImplementation&quot;) \r\n    public Object ewsImplementation() { \r\n    \r\n    try { \r\n    \r\n    String userName = &quot;userName&quot;; \r\n    String password = &quot;password&quot;;\r\n    String serverAddress = &quot;https://outlook.office365.com/EWS/exchange.asmx&quot;;\r\n    \r\n    ExchangeService exService = new ExchangeService(ExchangeVersion.Exchange2010_SP2);\r\n    \r\n    ExchangeCredentials credentials = new WebCredentials(userName, password);\r\n    exService.setCredentials(credentials);\r\n    URI uri = new URI(serverAddress);\r\n    exService.setUrl(uri);\r\n    exService.setTraceEnabled(true);\r\n    \r\n    PullSubscription subscription = exService.subscribeToPullNotificationsOnAllFolders(500, null,\r\n    \t\tEventType.NewMail);\r\n    \r\n    GetEventsResults events = subscription.getEvents();\r\n    \r\n    for (ItemEvent itemEvent : events.getItemEvents()) {\r\n    \tItem item = Item.bind(exService, itemEvent.getItemId());\r\n    \tlog.info(&quot;New email received: {}&quot;, item.getSubject());\r\n    }\r\n     } catch (Exception e) {\r\n     e.printStackTrace();\r\n     }\r\n    }\r\n\r\nThe user name and password which I have used here are working in the outlook i.e. we are receiving emails in the outlook.\r\n\r\nWhen I am calling this API, it is giving error as,\r\n\r\n2023-05-04T12:39:27.304+05:30  INFO 272 --- \\[nio-8080-exec-2\\] o.a.c.c.C.\\[Tomcat\\].\\[localhost\\].\\[/\\]       : Initializing Spring DispatcherServlet &#39;dispatcherServlet&#39;\r\n2023-05-04T12:39:27.304+05:30  INFO 272 --- \\[nio-8080-exec-2\\] o.s.web.servlet.DispatcherServlet        : Initializing Servlet &#39;dispatcherServlet&#39;\r\n2023-05-04T12:39:27.306+05:30  INFO 272 --- \\[nio-8080-exec-2\\] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms\r\nmicrosoft.exchange.webservices.data.core.exception.service.remote.ServiceRequestException: The request failed. The request failed. The remote server returned an error: (401)\r\nat microsoft.exchange.webservices.data.core.request.SimpleServiceRequestBase.internalExecute(SimpleServiceRequestBase.java:74)\r\nat microsoft.exchange.webservices.data.core.request.MultiResponseServiceRequest.execute(MultiResponseServiceRequest.java:158)\r\nat microsoft.exchange.webservices.data.core.ExchangeService.subscribeToPullNotificationsOnAllFolders(ExchangeService.java:1847)\r\nat com.nib.plp.controller.FileOperationsController.ewsImplementation(FileOperationsController.java:111)\r\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\nat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\nat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\nat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\nat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\nat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\nat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\nat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\nat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\nat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081)\r\nat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974)\r\nat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011)\r\nat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\r\nat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\nat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\nat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\nat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\nat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\nat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\nat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\nat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:177)\r\nat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\nat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\nat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\nat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\nat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\nat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\nat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\nat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\nat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:859)\r\nat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1734)\r\nat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\nat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\nat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\nat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\nat java.base/java.lang.Thread.run(Thread.java:833)\r\nCaused by: microsoft.exchange.webservices.data.core.exception.service.remote.ServiceRequestException: The request failed. The remote server returned an error: (401)\r\nat microsoft.exchange.webservices.data.core.request.ServiceRequestBase.validateAndEmitRequest(ServiceRequestBase.java:644)\r\nat microsoft.exchange.webservices.data.core.request.SimpleServiceRequestBase.internalExecute(SimpleServiceRequestBase.java:62)\r\n... 53 more\r\nCaused by: microsoft.exchange.webservices.data.core.exception.http.HttpErrorException: The remote server returned an error: (401)\r\nat microsoft.exchange.webservices.data.core.request.ServiceRequestBase.getEwsHttpWebResponse(ServiceRequestBase.java:723)\r\nat microsoft.exchange.webservices.data.core.request.ServiceRequestBase.validateAndEmitRequest(ServiceRequestBase.java:639)\r\n... 54 more\r\n2023-05-04T12:39:29.256+05:30  WARN 272 --- \\[nio-8080-exec-2\\] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved \\[org.springframework.http.converter.HttpMessageNotWritableException: Could not write JSON: The request failed. The request failed. The remote server returned an error: (401)Unauthorized\\]\r\n\r\nThanks in advance for you help.\r\nAlso suggest whether this is the correct approach to listen the new emails from EWS service.","title":"Need to use EWS (Exchange Web Service) to receive Microsoft exchange&#39;s/Outlook emails in java spring boot Project","body":"<p>I want to connect to Microsoft exchange server(EWS) with the help of EWS API provided by Microsoft.\nThe Spring boot application should be a continuous listener, so that the application should be able to listen all the new emails which are getting received in the outlook.</p>\n<p>I have written a REST API to connect exchange server from java spring boot project. Created required EWS object and subscribed to the new Email notification so that it listen the new email.</p>\n<p>Code template:</p>\n<p>Added dependency in pom as :</p>\n<p><code>&lt;dependency&gt;   </code></p>\n<p><code>&lt;groupId&gt;com.microsoft.ews-java-api&lt;/groupId&gt;  </code></p>\n<p><code>&lt;artifactId&gt;ews-java-api&lt;/artifactId&gt;  </code></p>\n<p><code>&lt;version&gt;2.0&lt;/version&gt; </code></p>\n<p><code>&lt;/dependency&gt;</code></p>\n<p>Java controller :</p>\n<pre><code>@PostMapping(value = &quot;/EWSImplementation&quot;) \npublic Object ewsImplementation() { \n\ntry { \n\nString userName = &quot;userName&quot;; \nString password = &quot;password&quot;;\nString serverAddress = &quot;https://outlook.office365.com/EWS/exchange.asmx&quot;;\n\nExchangeService exService = new ExchangeService(ExchangeVersion.Exchange2010_SP2);\n\nExchangeCredentials credentials = new WebCredentials(userName, password);\nexService.setCredentials(credentials);\nURI uri = new URI(serverAddress);\nexService.setUrl(uri);\nexService.setTraceEnabled(true);\n\nPullSubscription subscription = exService.subscribeToPullNotificationsOnAllFolders(500, null,\n        EventType.NewMail);\n\nGetEventsResults events = subscription.getEvents();\n\nfor (ItemEvent itemEvent : events.getItemEvents()) {\n    Item item = Item.bind(exService, itemEvent.getItemId());\n    log.info(&quot;New email received: {}&quot;, item.getSubject());\n}\n } catch (Exception e) {\n e.printStackTrace();\n }\n}\n</code></pre>\n<p>The user name and password which I have used here are working in the outlook i.e. we are receiving emails in the outlook.</p>\n<p>When I am calling this API, it is giving error as,</p>\n<p>2023-05-04T12:39:27.304+05:30  INFO 272 --- [nio-8080-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'\n2023-05-04T12:39:27.304+05:30  INFO 272 --- [nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'\n2023-05-04T12:39:27.306+05:30  INFO 272 --- [nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms\nmicrosoft.exchange.webservices.data.core.exception.service.remote.ServiceRequestException: The request failed. The request failed. The remote server returned an error: (401)\nat microsoft.exchange.webservices.data.core.request.SimpleServiceRequestBase.internalExecute(SimpleServiceRequestBase.java:74)\nat microsoft.exchange.webservices.data.core.request.MultiResponseServiceRequest.execute(MultiResponseServiceRequest.java:158)\nat microsoft.exchange.webservices.data.core.ExchangeService.subscribeToPullNotificationsOnAllFolders(ExchangeService.java:1847)\nat com.nib.plp.controller.FileOperationsController.ewsImplementation(FileOperationsController.java:111)\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\nat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.base/java.lang.reflect.Method.invoke(Method.java:568)\nat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\nat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\nat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\nat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\nat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\nat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\nat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081)\nat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974)\nat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011)\nat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\nat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\nat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\nat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\nat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\nat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\nat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\nat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\nat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:177)\nat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\nat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\nat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\nat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\nat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\nat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\nat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\nat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\nat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:859)\nat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1734)\nat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\nat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\nat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\nat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\nat java.base/java.lang.Thread.run(Thread.java:833)\nCaused by: microsoft.exchange.webservices.data.core.exception.service.remote.ServiceRequestException: The request failed. The remote server returned an error: (401)\nat microsoft.exchange.webservices.data.core.request.ServiceRequestBase.validateAndEmitRequest(ServiceRequestBase.java:644)\nat microsoft.exchange.webservices.data.core.request.SimpleServiceRequestBase.internalExecute(SimpleServiceRequestBase.java:62)\n... 53 more\nCaused by: microsoft.exchange.webservices.data.core.exception.http.HttpErrorException: The remote server returned an error: (401)\nat microsoft.exchange.webservices.data.core.request.ServiceRequestBase.getEwsHttpWebResponse(ServiceRequestBase.java:723)\nat microsoft.exchange.webservices.data.core.request.ServiceRequestBase.validateAndEmitRequest(ServiceRequestBase.java:639)\n... 54 more\n2023-05-04T12:39:29.256+05:30  WARN 272 --- [nio-8080-exec-2] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotWritableException: Could not write JSON: The request failed. The request failed. The remote server returned an error: (401)Unauthorized]</p>\n<p>Thanks in advance for you help.\nAlso suggest whether this is the correct approach to listen the new emails from EWS service.</p>\n"},{"tags":["java","mongodb","nosql","mongotemplate"],"comments":[{"owner":{"account_id":9934708,"reputation":997,"user_id":7353417,"display_name":"pierpy"},"score":0,"creation_date":1683280984,"post_id":76177956,"comment_id":134346101,"body_markdown":"Hi, please read [Why should I not upload images of code/data/errors?](https://meta.stackoverflow.com/a/285557/7353417)","body":"Hi, please read <a href=\"https://meta.stackoverflow.com/a/285557/7353417\">Why should I not upload images of code/data/errors?</a>"},{"owner":{"account_id":18482495,"reputation":14167,"user_id":13464279,"display_name":"J.F."},"score":0,"creation_date":1686960015,"post_id":76177956,"comment_id":134875127,"body_markdown":"It seems `_id.year` does not exists. Can you check which object is returned just before last project stage?. Also you can provide some data example to try out.","body":"It seems <code>_id.year</code> does not exists. Can you check which object is returned just before last project stage?. Also you can provide some data example to try out."}],"owner":{"account_id":25261167,"reputation":1,"user_id":19092051,"display_name":"Samoha"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683242813,"creation_date":1683242813,"question_id":76177956,"body_markdown":"I made a request using mongoDB Compass and it works, but I can&#39;t transfer it to my java program. I think I&#39;ve tried all the options. Perhaps there is a way to use this pipeline directly in the code, but I did not find it\r\n\r\n```\r\n[{\r\n    $match: {\r\n        $or: [{\r\n                riskReport: {\r\n                    $ne: null\r\n                }\r\n            },\r\n            {\r\n                riskOfDealReport: {\r\n                    $ne: null\r\n                }\r\n            },\r\n            {\r\n                controlProcedureReport: {\r\n                    $ne: null\r\n                }\r\n            },\r\n            {\r\n                matrixReport: {\r\n                    $ne: null\r\n                }\r\n            }\r\n        ]\r\n    }\r\n}, {\r\n    $project: {\r\n        controlProcedureReport: &#39;$controlProcedureReport&#39;,\r\n        riskReport: &#39;$riskReport&#39;,\r\n        matrixReport: &#39;$matrixReport&#39;,\r\n        documentName: {\r\n            $concatArrays: [\r\n                &#39;$riskReport.ids.value&#39;,\r\n                &#39;$controlProcedureReport.ids.value&#39;,\r\n                &#39;$matrixReport.ids&#39;\r\n            ]\r\n        }\r\n    }\r\n}, {\r\n    $unwind: {\r\n        path: &#39;$documentName&#39;\r\n    }\r\n}, {\r\n    $project: {\r\n        year: &#39;$_id.year&#39;,\r\n        periodCode: &#39;$_id.periodCode&#39;,\r\n        serialNumber: &#39;$_id.serialNumber&#39;,\r\n        formationDate: &#39;$formationDate&#39;,\r\n        status: &#39;$status&#39;,\r\n        documentName: &#39;$documentName&#39;,\r\n        fileId: {\r\n            $cond: {\r\n                &#39;if&#39;: {\r\n                    $in: [\r\n                        &#39;$documentName&#39;,\r\n                        &#39;$controlProcedureReport.ids.value&#39;\r\n                    ]\r\n                },\r\n                then: &#39;$controlProcedureReport.fileId&#39;,\r\n                &#39;else&#39;: {\r\n                    $cond: {\r\n                        &#39;if&#39;: {\r\n                            $in: [\r\n                                &#39;$documentName&#39;,\r\n                                &#39;$riskReport.ids.value&#39;\r\n                            ]\r\n                        },\r\n                        then: &#39;$riskReport.fileId&#39;,\r\n                        &#39;else&#39;: {\r\n                            $cond: {\r\n                                &#39;if&#39;: {\r\n                                    $in: [\r\n                                        &#39;$documentName&#39;,\r\n                                        &#39;$matrixReport.ids&#39;\r\n                                    ]\r\n                                },\r\n                                then: &#39;$matrixReport.fileId&#39;,\r\n                                &#39;else&#39;: &#39;&#39;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}]\r\n```\r\n\r\nI tried to use this code but I get an error\r\n\r\n```\r\n        ProjectionOperation project2 = Aggregation.project()\r\n                .and(&quot;_id.year&quot;).as(&quot;year&quot;)\r\n                .and(&quot;_id.periodCode&quot;).as(&quot;periodCode&quot;)\r\n                .and(&quot;_id.serialNumber&quot;).as(&quot;serialNumber&quot;)\r\n                .and(&quot;formationDate&quot;).as(&quot;formationDate&quot;)\r\n                .and(&quot;status&quot;).as(&quot;status&quot;)\r\n                .and(&quot;documentName&quot;).as(&quot;documentName&quot;)\r\n                .and(ConditionalOperators.when(\r\n                                     ArrayOperators.arrayOf(&quot;controlProcedureReport.ids.value&quot;).containsValue(&quot;$documentName&quot;)\r\n                             ).thenValueOf(&quot;controlProcedureReport.fileId&quot;)\r\n                             .otherwise(\r\n                                     ConditionalOperators.when(\r\n                                                     ArrayOperators.arrayOf(&quot;riskReport.ids.value&quot;).containsValue(&quot;$documentName&quot;)\r\n                                             ).thenValueOf(&quot;riskReport.fileId&quot;)\r\n                                             .otherwise(&quot;&quot;)\r\n                             )\r\n                ).as(&quot;fileId&quot;);\r\n\r\n        Aggregation aggregation = Aggregation.newAggregation(\r\n                Aggregation.match(packageCriteria),\r\n                project1,\r\n                unwind,\r\n                project2,\r\n                procedureResults,\r\n                icsDisclosures,\r\n                icsDisclosureRegulations\r\n        );\r\n\r\n        List&lt;Document&gt; mappedResults = mongoTemplate.aggregate(aggregation, DOCUMENT_PACKAGE_COLLECTION, Document.class).getMappedResults();\r\n```\r\n\r\nWith this code I am getting an error [enter image description here](https://i.stack.imgur.com/Gweni.png)\r\n\r\nHealp me please","title":"How can i convert the request to MongoTemplate","body":"<p>I made a request using mongoDB Compass and it works, but I can't transfer it to my java program. I think I've tried all the options. Perhaps there is a way to use this pipeline directly in the code, but I did not find it</p>\n<pre><code>[{\n    $match: {\n        $or: [{\n                riskReport: {\n                    $ne: null\n                }\n            },\n            {\n                riskOfDealReport: {\n                    $ne: null\n                }\n            },\n            {\n                controlProcedureReport: {\n                    $ne: null\n                }\n            },\n            {\n                matrixReport: {\n                    $ne: null\n                }\n            }\n        ]\n    }\n}, {\n    $project: {\n        controlProcedureReport: '$controlProcedureReport',\n        riskReport: '$riskReport',\n        matrixReport: '$matrixReport',\n        documentName: {\n            $concatArrays: [\n                '$riskReport.ids.value',\n                '$controlProcedureReport.ids.value',\n                '$matrixReport.ids'\n            ]\n        }\n    }\n}, {\n    $unwind: {\n        path: '$documentName'\n    }\n}, {\n    $project: {\n        year: '$_id.year',\n        periodCode: '$_id.periodCode',\n        serialNumber: '$_id.serialNumber',\n        formationDate: '$formationDate',\n        status: '$status',\n        documentName: '$documentName',\n        fileId: {\n            $cond: {\n                'if': {\n                    $in: [\n                        '$documentName',\n                        '$controlProcedureReport.ids.value'\n                    ]\n                },\n                then: '$controlProcedureReport.fileId',\n                'else': {\n                    $cond: {\n                        'if': {\n                            $in: [\n                                '$documentName',\n                                '$riskReport.ids.value'\n                            ]\n                        },\n                        then: '$riskReport.fileId',\n                        'else': {\n                            $cond: {\n                                'if': {\n                                    $in: [\n                                        '$documentName',\n                                        '$matrixReport.ids'\n                                    ]\n                                },\n                                then: '$matrixReport.fileId',\n                                'else': ''\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n}]\n</code></pre>\n<p>I tried to use this code but I get an error</p>\n<pre><code>        ProjectionOperation project2 = Aggregation.project()\n                .and(&quot;_id.year&quot;).as(&quot;year&quot;)\n                .and(&quot;_id.periodCode&quot;).as(&quot;periodCode&quot;)\n                .and(&quot;_id.serialNumber&quot;).as(&quot;serialNumber&quot;)\n                .and(&quot;formationDate&quot;).as(&quot;formationDate&quot;)\n                .and(&quot;status&quot;).as(&quot;status&quot;)\n                .and(&quot;documentName&quot;).as(&quot;documentName&quot;)\n                .and(ConditionalOperators.when(\n                                     ArrayOperators.arrayOf(&quot;controlProcedureReport.ids.value&quot;).containsValue(&quot;$documentName&quot;)\n                             ).thenValueOf(&quot;controlProcedureReport.fileId&quot;)\n                             .otherwise(\n                                     ConditionalOperators.when(\n                                                     ArrayOperators.arrayOf(&quot;riskReport.ids.value&quot;).containsValue(&quot;$documentName&quot;)\n                                             ).thenValueOf(&quot;riskReport.fileId&quot;)\n                                             .otherwise(&quot;&quot;)\n                             )\n                ).as(&quot;fileId&quot;);\n\n        Aggregation aggregation = Aggregation.newAggregation(\n                Aggregation.match(packageCriteria),\n                project1,\n                unwind,\n                project2,\n                procedureResults,\n                icsDisclosures,\n                icsDisclosureRegulations\n        );\n\n        List&lt;Document&gt; mappedResults = mongoTemplate.aggregate(aggregation, DOCUMENT_PACKAGE_COLLECTION, Document.class).getMappedResults();\n</code></pre>\n<p>With this code I am getting an error <a href=\"https://i.stack.imgur.com/Gweni.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>Healp me please</p>\n"},{"tags":["java","jakarta-ee","transactions","cdi","java-ee-7"],"comments":[{"owner":{"account_id":7522842,"reputation":3473,"user_id":8082162,"accept_rate":71,"display_name":"aschoerk"},"score":0,"creation_date":1512102681,"post_id":47355299,"comment_id":82130935,"body_markdown":"If this is relevant yet. I did some tests with CDI-Transactional. There are no significant differences to EJB. Therefore a few questions: How did you find out, that the changes did not get flushed? What DBMS are you using? Did you call doChange in a subclass or from another bean?","body":"If this is relevant yet. I did some tests with CDI-Transactional. There are no significant differences to EJB. Therefore a few questions: How did you find out, that the changes did not get flushed? What DBMS are you using? Did you call doChange in a subclass or from another bean?"},{"owner":{"account_id":1838798,"reputation":311,"user_id":1668645,"accept_rate":29,"display_name":"Stefan H&#246;ltker"},"score":0,"creation_date":1513682077,"post_id":47355299,"comment_id":82737041,"body_markdown":"Hi @aschoerk we use a SQL Server 2008 R2. The call comes from the xhtml JSF frontend. Now we changed to BMT to go along with our application.","body":"Hi @aschoerk we use a SQL Server 2008 R2. The call comes from the xhtml JSF frontend. Now we changed to BMT to go along with our application."},{"owner":{"account_id":7522842,"reputation":3473,"user_id":8082162,"accept_rate":71,"display_name":"aschoerk"},"score":0,"creation_date":1513700326,"post_id":47355299,"comment_id":82748459,"body_markdown":"Ahh SqlServer 2008, so no MVCC. But: How did you find out, that the changes did not get flushed? Did you call doChange in a subclass or from another bean?","body":"Ahh SqlServer 2008, so no MVCC. But: How did you find out, that the changes did not get flushed? Did you call doChange in a subclass or from another bean?"},{"owner":{"account_id":1838798,"reputation":311,"user_id":1668645,"accept_rate":29,"display_name":"Stefan H&#246;ltker"},"score":0,"creation_date":1513864622,"post_id":47355299,"comment_id":82820770,"body_markdown":"No the doChange was called from the same bean. It (empfangseinheittypenparameter) got flushed when we edited some of the main infos (Empfangseinheittypen)","body":"No the doChange was called from the same bean. It (empfangseinheittypenparameter) got flushed when we edited some of the main infos (Empfangseinheittypen)"},{"owner":{"account_id":7522842,"reputation":3473,"user_id":8082162,"accept_rate":71,"display_name":"aschoerk"},"score":0,"creation_date":1513880058,"post_id":47355299,"comment_id":82829695,"body_markdown":"&quot;called from the same bean&quot; normally means, that the transactioninterceptor is not working. Are you sure, that it does?","body":"&quot;called from the same bean&quot; normally means, that the transactioninterceptor is not working. Are you sure, that it does?"}],"answers":[{"comments":[{"owner":{"account_id":1838798,"reputation":311,"user_id":1668645,"accept_rate":29,"display_name":"Stefan H&#246;ltker"},"score":0,"creation_date":1511003061,"post_id":47359168,"comment_id":81683368,"body_markdown":"I tried to annotate the methods with @Transactional(TxType.REQUIRES_NEW) but got the same effect","body":"I tried to annotate the methods with @Transactional(TxType.REQUIRES_NEW) but got the same effect"}],"tags":[],"owner":{"account_id":7522842,"reputation":3473,"user_id":8082162,"accept_rate":71,"display_name":"aschoerk"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1513931929,"creation_date":1510952287,"answer_id":47359168,"question_id":47355299,"body_markdown":"According to the comments, doChange is called from the same bean.\r\nThe problem is similar to https://stackoverflow.com/questions/5109343/transactional-method-called-from-another-method-doesnt-obtain-a-transaction which means, that the transaction will not end with doChange, so you can not expect a flush to be done when returning from the method.","title":"Transactional wrapped method doesn&#39;t persist or remove","body":"<p>According to the comments, doChange is called from the same bean.\nThe problem is similar to <a href=\"https://stackoverflow.com/questions/5109343/transactional-method-called-from-another-method-doesnt-obtain-a-transaction\">@Transactional method called from another method doesn&#39;t obtain a transaction</a> which means, that the transaction will not end with doChange, so you can not expect a flush to be done when returning from the method.</p>\n"}],"owner":{"account_id":1838798,"reputation":311,"user_id":1668645,"accept_rate":29,"display_name":"Stefan H&#246;ltker"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":85,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683242143,"creation_date":1510936497,"question_id":47355299,"body_markdown":"I have a problem with a CDI Named Bean which is @Transactional. \r\n\r\nI use the WildFly 11.1.0.Final.\r\n\r\nHere the Code: https://gist.github.com/stefanwendelmann/7a1f8352900067d5a59826d6ee205044\r\n\r\nThis is the persistence.xml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;persistence version=&quot;2.1&quot;\r\n                 xmlns=&quot;http://xmlns.jcp.org/xml/ns/persistence&quot;\r\n                 xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n                 xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/persistence \r\n                 http://xmlns.jcp.org/xml/ns/persistence/persistence_2_1.xsd&quot;&gt;\r\n      &lt;persistence-unit name=&quot;QuoLoco&quot; transaction-type=&quot;JTA&quot;&gt;\r\n        &lt;description&gt;Verbindung zur QuoLoco Datenbank&lt;/description&gt;\r\n        &lt;jta-data-source&gt;java:/QUOLOCO_NORM&lt;/jta-data-source&gt;\r\n        &lt;provider&gt;org.hibernate.jpa.HibernatePersistenceProvider&lt;/provider&gt;\r\n        &lt;properties&gt;\r\n          &lt;property name=&quot;hibernate.format_sql&quot; value=&quot;false&quot;/&gt;\r\n          &lt;property name=&quot;hibernate.dialect&quot; value=&quot;org.hibernate.dialect.SQLServerDialect&quot;/&gt;\r\n          &lt;property name=&quot;hibernate.id.new_generator_mappings&quot; value=&quot;false&quot;/&gt;\r\n        &lt;/properties&gt;\r\n      &lt;/persistence-unit&gt;\r\n    &lt;/persistence&gt;\r\n\r\nWhen I call the method &quot;doChange&quot; and only edited Empfangseinheittypenparameter, the em.remove and em.persist doesn&#39;t trigger a flush.\r\n\r\nWhen I call the method &quot;doChange&quot; and edited some of the main  Empfangseinheittypen empfangseinheittyp, I make a find on the Empfangseinheittypenparameter don&#39;t need a flush \r\n\r\nWhat am a doing wrong? \r\n\r\nBoth methods are public.\r\n\r\nPlease see a picture of the Application attached\r\n\r\nThanks in advance for your help","title":"Transactional wrapped method doesn&#39;t persist or remove","body":"<p>I have a problem with a CDI Named Bean which is @Transactional.</p>\n<p>I use the WildFly 11.1.0.Final.</p>\n<p>Here the Code: <a href=\"https://gist.github.com/stefanwendelmann/7a1f8352900067d5a59826d6ee205044\" rel=\"nofollow noreferrer\">https://gist.github.com/stefanwendelmann/7a1f8352900067d5a59826d6ee205044</a></p>\n<p>This is the persistence.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;persistence version=&quot;2.1&quot;\n             xmlns=&quot;http://xmlns.jcp.org/xml/ns/persistence&quot;\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n             xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/persistence \n             http://xmlns.jcp.org/xml/ns/persistence/persistence_2_1.xsd&quot;&gt;\n  &lt;persistence-unit name=&quot;QuoLoco&quot; transaction-type=&quot;JTA&quot;&gt;\n    &lt;description&gt;Verbindung zur QuoLoco Datenbank&lt;/description&gt;\n    &lt;jta-data-source&gt;java:/QUOLOCO_NORM&lt;/jta-data-source&gt;\n    &lt;provider&gt;org.hibernate.jpa.HibernatePersistenceProvider&lt;/provider&gt;\n    &lt;properties&gt;\n      &lt;property name=&quot;hibernate.format_sql&quot; value=&quot;false&quot;/&gt;\n      &lt;property name=&quot;hibernate.dialect&quot; value=&quot;org.hibernate.dialect.SQLServerDialect&quot;/&gt;\n      &lt;property name=&quot;hibernate.id.new_generator_mappings&quot; value=&quot;false&quot;/&gt;\n    &lt;/properties&gt;\n  &lt;/persistence-unit&gt;\n&lt;/persistence&gt;\n</code></pre>\n<p>When I call the method &quot;doChange&quot; and only edited Empfangseinheittypenparameter, the em.remove and em.persist doesn't trigger a flush.</p>\n<p>When I call the method &quot;doChange&quot; and edited some of the main  Empfangseinheittypen empfangseinheittyp, I make a find on the Empfangseinheittypenparameter don't need a flush</p>\n<p>What am a doing wrong?</p>\n<p>Both methods are public.</p>\n<p>Please see a picture of the Application attached</p>\n<p>Thanks in advance for your help</p>\n"},{"tags":["java","binary","decimal"],"comments":[{"owner":{"account_id":1888781,"reputation":2007,"user_id":1707427,"display_name":"S&#246;ren"},"score":0,"creation_date":1683218297,"post_id":76175335,"comment_id":134336595,"body_markdown":"The quote talks about fixed precision vs arbitrary precision. You talk about decimal vs binary. What&#39;s the relation?","body":"The quote talks about fixed precision vs arbitrary precision. You talk about decimal vs binary. What&#39;s the relation?"},{"owner":{"account_id":27538003,"reputation":1,"user_id":21015259,"display_name":"Kinqz"},"score":0,"creation_date":1683219426,"post_id":76175335,"comment_id":134336870,"body_markdown":"I’m just trying to Both Binary and Decimal aren’t Same… So idk what Happens if I replace it","body":"I’m just trying to Both Binary and Decimal aren’t Same… So idk what Happens if I replace it"},{"owner":{"account_id":1888781,"reputation":2007,"user_id":1707427,"display_name":"S&#246;ren"},"score":0,"creation_date":1683219500,"post_id":76175335,"comment_id":134336886,"body_markdown":"When you replace a decimal number with a binary number, you now have a binary number. Apart from that, it&#39;s completely unclear what you&#39;re asking.","body":"When you replace a decimal number with a binary number, you now have a binary number. Apart from that, it&#39;s completely unclear what you&#39;re asking."},{"owner":{"account_id":27538003,"reputation":1,"user_id":21015259,"display_name":"Kinqz"},"score":0,"creation_date":1683220210,"post_id":76175335,"comment_id":134337040,"body_markdown":"So computer system can’t read 100 As Binary still for a particular function When it’s Supposed to be read As a Decimal number?","body":"So computer system can’t read 100 As Binary still for a particular function When it’s Supposed to be read As a Decimal number?"},{"owner":{"account_id":27538003,"reputation":1,"user_id":21015259,"display_name":"Kinqz"},"score":0,"creation_date":1683220587,"post_id":76175335,"comment_id":134337131,"body_markdown":"Is there a way I could ask someone this question directly with my Voice OMg","body":"Is there a way I could ask someone this question directly with my Voice OMg"}],"answers":[{"comments":[{"owner":{"account_id":27538003,"reputation":1,"user_id":21015259,"display_name":"Kinqz"},"score":0,"creation_date":1683236998,"post_id":76177144,"comment_id":134340359,"body_markdown":"I don’t know if it’s recommended to get your WhatsApp or Any other social Media so we could solve the problem Together Please","body":"I don’t know if it’s recommended to get your WhatsApp or Any other social Media so we could solve the problem Together Please"},{"owner":{"account_id":28104689,"reputation":512,"user_id":21473475,"display_name":"Arfur Narf"},"score":2,"creation_date":1683242242,"post_id":76177144,"comment_id":134341086,"body_markdown":"The site does not work that way.  You ask a question and maybe it gets answered; if the question isn&#39;t clear enough to answer, refine the questiion until is.","body":"The site does not work that way.  You ask a question and maybe it gets answered; if the question isn&#39;t clear enough to answer, refine the questiion until is."}],"tags":[],"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683241903,"creation_date":1683231961,"answer_id":76177144,"question_id":76175335,"body_markdown":"&gt;So computer system can’t read 100 As Binary still for a particular function When it’s Supposed to be read As a Decimal number.\r\n\r\nIt depends from where you are reading the value and how it is stored.  Most command line input is in the form of a string and has to be converted to a type of number (an `int` or a `double` for example).  Whether the input is specified as binary, octal, or hex, its internal state will be the same and will be binary. (In fact, everything on your hard disk is stored as binary).  For doubles, they too will be binary but are stored in a specific format/encoding (see [IEEE 754](https://en.wikipedia.org/wiki/IEEE_754)).  Java doubles are floating point values.  They are 64 bits wide and both the integral part and the fractional part can vary in size, but together, along with the size and exponent, they can&#39;t exceed 64 bits.  So if you have a very large integral part, there won&#39;t be much room left for the fractional part (and vice versa).  Ints are 32 bits wide with the high order bit used for the sign.  They are stored in [Two&#39;s complement form](https://en.wikipedia.org/wiki/Two%27s_complement).  There is more to this than explained here so I recommend you try and find more detailed information on the internal representation of numeric types.\r\n\r\n**Updated.**\r\n```\r\nint a = 443;\r\nint b = 100; // not binary it&#39;s 100 in decimal\r\nSystem.out.println(a + &quot; &quot; + b);\r\n```\r\nprints\r\n```\r\n443 100\r\n```\r\n```\r\n\r\nint a = 0b100;  // binary. Leading 0b. Value is 4\r\nint b = 0100;   // octal.  Leading 0.  value is 64\r\nint c = 0x100;  // hex. Leading 0x. value is 256  \r\nSystem.out.println(a + &quot; &quot; + b + &quot; &quot; + c);\r\n```\r\nprints\r\n```\r\n4 64 256\r\n```\r\nAlso\r\n```\r\nSystem.out.println(Integer.toString(a,2)); // second arg is output base (or radix)\r\nSystem.out.println(Integer.toString(b,8));\r\nSystem.out.println(Integer.toString(c,16));\r\n```\r\nprints\r\n```\r\n100\r\n100\r\n100","title":"Modify decimal to some binary numbers using Devtools","body":"<blockquote>\n<p>So computer system can’t read 100 As Binary still for a particular function When it’s Supposed to be read As a Decimal number.</p>\n</blockquote>\n<p>It depends from where you are reading the value and how it is stored.  Most command line input is in the form of a string and has to be converted to a type of number (an <code>int</code> or a <code>double</code> for example).  Whether the input is specified as binary, octal, or hex, its internal state will be the same and will be binary. (In fact, everything on your hard disk is stored as binary).  For doubles, they too will be binary but are stored in a specific format/encoding (see <a href=\"https://en.wikipedia.org/wiki/IEEE_754\" rel=\"nofollow noreferrer\">IEEE 754</a>).  Java doubles are floating point values.  They are 64 bits wide and both the integral part and the fractional part can vary in size, but together, along with the size and exponent, they can't exceed 64 bits.  So if you have a very large integral part, there won't be much room left for the fractional part (and vice versa).  Ints are 32 bits wide with the high order bit used for the sign.  They are stored in <a href=\"https://en.wikipedia.org/wiki/Two%27s_complement\" rel=\"nofollow noreferrer\">Two's complement form</a>.  There is more to this than explained here so I recommend you try and find more detailed information on the internal representation of numeric types.</p>\n<p><strong>Updated.</strong></p>\n<pre><code>int a = 443;\nint b = 100; // not binary it's 100 in decimal\nSystem.out.println(a + &quot; &quot; + b);\n</code></pre>\n<p>prints</p>\n<pre><code>443 100\n</code></pre>\n<pre><code>\nint a = 0b100;  // binary. Leading 0b. Value is 4\nint b = 0100;   // octal.  Leading 0.  value is 64\nint c = 0x100;  // hex. Leading 0x. value is 256  \nSystem.out.println(a + &quot; &quot; + b + &quot; &quot; + c);\n</code></pre>\n<p>prints</p>\n<pre><code>4 64 256\n</code></pre>\n<p>Also</p>\n<pre><code>System.out.println(Integer.toString(a,2)); // second arg is output base (or radix)\nSystem.out.println(Integer.toString(b,8));\nSystem.out.println(Integer.toString(c,16));\n</code></pre>\n<p>prints</p>\n<pre><code>100\n100\n100\n</code></pre>\n"}],"owner":{"account_id":27538003,"reputation":1,"user_id":21015259,"display_name":"Kinqz"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1683241903,"creation_date":1683217226,"question_id":76175335,"body_markdown":"I read an answer to a question (What is arbitrary precision integers) and the answer I read was\r\n\r\n&gt; The term fixed precision means that there are only a certain number of\r\n&gt; significant digits retained in the internal representation. This means\r\n&gt; that you would not be able to represent every integer with a magnitude\r\n&gt; greater than some threshold.\r\n&gt; \r\n&gt; With arbitrary precision integers, the integers can be as large as you\r\n&gt; need (&quot;arbitrarily large&quot;) and the library will keep all the digits\r\n&gt; down to the least significant unit. (This is obviously limited by the\r\n&gt; amount of memory in your computer.)\r\n\r\nI replaced a 443 decimal number with a 100 binary number, 100 was returned as the response, but I feel since decimal numbers and binary numbers aren&#39;t the same thing there should be a change on the response value. I know it&#39;ll be simple to some of you, but please teach me. I want to know and not be lost.","title":"Modify decimal to some binary numbers using Devtools","body":"<p>I read an answer to a question (What is arbitrary precision integers) and the answer I read was</p>\n<blockquote>\n<p>The term fixed precision means that there are only a certain number of\nsignificant digits retained in the internal representation. This means\nthat you would not be able to represent every integer with a magnitude\ngreater than some threshold.</p>\n<p>With arbitrary precision integers, the integers can be as large as you\nneed (&quot;arbitrarily large&quot;) and the library will keep all the digits\ndown to the least significant unit. (This is obviously limited by the\namount of memory in your computer.)</p>\n</blockquote>\n<p>I replaced a 443 decimal number with a 100 binary number, 100 was returned as the response, but I feel since decimal numbers and binary numbers aren't the same thing there should be a change on the response value. I know it'll be simple to some of you, but please teach me. I want to know and not be lost.</p>\n"},{"tags":["java","android"],"owner":{"account_id":10432391,"reputation":1,"user_id":7691824,"display_name":"Muok Victor"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683241601,"creation_date":1683241601,"question_id":76177902,"body_markdown":"Have tried loading a responsive web app on webview but it was very slow on most devices,I then tried Chrom Custom Tabs,Trusted Web Activity and Browser Intent but you cannot hide the top tool bar for both.I tried implemeting libraries like geckoview and crosswalk without success .\r\n\r\nI expected it to be work like webview woul but a little faster like in Chrome Custom Tabs","title":"Load a responsive web app in an android app without using a Webview(Slow On Most Devices, Chrome Custom Tabs ,Browser Intent or TWA?","body":"<p>Have tried loading a responsive web app on webview but it was very slow on most devices,I then tried Chrom Custom Tabs,Trusted Web Activity and Browser Intent but you cannot hide the top tool bar for both.I tried implemeting libraries like geckoview and crosswalk without success .</p>\n<p>I expected it to be work like webview woul but a little faster like in Chrome Custom Tabs</p>\n"},{"tags":["java","security"],"comments":[{"owner":{"account_id":1082858,"reputation":104688,"user_id":1079354,"accept_rate":93,"display_name":"Makoto"},"score":0,"creation_date":1345214883,"post_id":12007991,"comment_id":16018136,"body_markdown":"Securely wiping memory implies you&#39;d overwrite the region with zeroes.  I&#39;m not sure that Java can do that at its high level (C probably could).","body":"Securely wiping memory implies you&#39;d overwrite the region with zeroes.  I&#39;m not sure that Java can do that at its high level (C probably could)."},{"owner":{"account_id":1102504,"reputation":66096,"user_id":1094597,"accept_rate":94,"display_name":"kosa"},"score":0,"creation_date":1345214894,"post_id":12007991,"comment_id":16018142,"body_markdown":"Remove and optimization are different things, isn&#39;t it?","body":"Remove and optimization are different things, isn&#39;t it?"},{"owner":{"account_id":8564,"reputation":235724,"user_id":15498,"accept_rate":76,"display_name":"Damien_The_Unbeliever"},"score":6,"creation_date":1345214966,"post_id":12007991,"comment_id":16018177,"body_markdown":"You need to avoid loading it into a String in the first place.","body":"You need to avoid loading it into a String in the first place."},{"owner":{"account_id":18399,"reputation":38994,"user_id":42126,"accept_rate":100,"display_name":"kdgregory"},"score":0,"creation_date":1345223039,"post_id":12007991,"comment_id":16021493,"body_markdown":"If your attacker can access the your process space, then clearing a string after use is the least of your worries.","body":"If your attacker can access the your process space, then clearing a string after use is the least of your worries."},{"owner":{"account_id":18399,"reputation":38994,"user_id":42126,"accept_rate":100,"display_name":"kdgregory"},"score":0,"creation_date":1345290678,"post_id":12007991,"comment_id":16036087,"body_markdown":"possible duplicate of [How can I ensure the destruction of a String object in Java?](http://stackoverflow.com/questions/5238131/how-can-i-ensure-the-destruction-of-a-string-object-in-java)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/5238131/how-can-i-ensure-the-destruction-of-a-string-object-in-java\">How can I ensure the destruction of a String object in Java?</a>"},{"owner":{"account_id":403364,"reputation":28568,"user_id":771073,"accept_rate":60,"display_name":"Martin Bonner supports Monica"},"score":1,"creation_date":1495526053,"post_id":12007991,"comment_id":75276263,"body_markdown":"@kdgregory This isn&#39;t intended as the primary defense against an attacker.  It&#39;s a defense-in-depth thing to make their life harder once they are in.","body":"@kdgregory This isn&#39;t intended as the primary defense against an attacker.  It&#39;s a defense-in-depth thing to make their life harder once they are in."},{"owner":{"account_id":18399,"reputation":38994,"user_id":42126,"accept_rate":100,"display_name":"kdgregory"},"score":0,"creation_date":1495882228,"post_id":12007991,"comment_id":75442779,"body_markdown":"@MartinBonner - see [Maginot Line](https://en.wikipedia.org/wiki/Maginot_Line)","body":"@MartinBonner - see <a href=\"https://en.wikipedia.org/wiki/Maginot_Line\" rel=\"nofollow noreferrer\">Maginot Line</a>"}],"answers":[{"comments":[{"owner":{"account_id":18399,"reputation":38994,"user_id":42126,"accept_rate":100,"display_name":"kdgregory"},"score":2,"creation_date":1345222880,"post_id":12008094,"comment_id":16021422,"body_markdown":"+1 for the point that the object has to be off-heap. However, if we assume that the attacker can access process memory, then off-heap storage just minimizes the window during which an attach can occur. And there&#39;s still the possibility that the OS will swap your pages to disk, leaving the &quot;confidential&quot; data hanging around for a very long time.","body":"+1 for the point that the object has to be off-heap. However, if we assume that the attacker can access process memory, then off-heap storage just minimizes the window during which an attach can occur. And there&#39;s still the possibility that the OS will swap your pages to disk, leaving the &quot;confidential&quot; data hanging around for a very long time."}],"tags":[],"owner":{"account_id":1497894,"reputation":1018,"user_id":1403418,"display_name":"Dan"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1345215129,"creation_date":1345215129,"answer_id":12008094,"question_id":12007991,"body_markdown":"Store the data off-heap using the &quot;Unsafe&quot; methods.  You can then zero over it when done and be certain that it won&#39;t be pushed around the heap by the JVM.\r\n\r\n\r\nHere is a good post on Unsafe:\r\n\r\nhttp://highlyscalable.wordpress.com/2012/02/02/direct-memory-access-in-java/","title":"How can I securely wipe a confidential data in memory in java with guarantee it will not be &#39;optimized&#39;?","body":"<p>Store the data off-heap using the \"Unsafe\" methods.  You can then zero over it when done and be certain that it won't be pushed around the heap by the JVM.</p>\n\n<p>Here is a good post on Unsafe:</p>\n\n<p><a href=\"http://highlyscalable.wordpress.com/2012/02/02/direct-memory-access-in-java/\" rel=\"nofollow\">http://highlyscalable.wordpress.com/2012/02/02/direct-memory-access-in-java/</a></p>\n"},{"comments":[{"owner":{"account_id":1066914,"reputation":321,"user_id":1067221,"accept_rate":83,"display_name":"Nerd"},"score":0,"creation_date":1345217742,"post_id":12008111,"comment_id":16019442,"body_markdown":"Thank you. But How could it be guaranteed that optimizer will not notice that the result of this computation is not being used so there is no point running it?","body":"Thank you. But How could it be guaranteed that optimizer will not notice that the result of this computation is not being used so there is no point running it?"},{"owner":{"account_id":130645,"reputation":81705,"user_id":330057,"accept_rate":77,"display_name":"corsiKa"},"score":0,"creation_date":1345223422,"post_id":12008111,"comment_id":16021637,"body_markdown":"I updated the post with a way to ensure the wipe. But I still wouldn&#39;t recommend relying on this - rather your best bet is to keep people out of your system memory to start with.","body":"I updated the post with a way to ensure the wipe. But I still wouldn&#39;t recommend relying on this - rather your best bet is to keep people out of your system memory to start with."}],"tags":[],"owner":{"account_id":130645,"reputation":81705,"user_id":330057,"accept_rate":77,"display_name":"corsiKa"},"comment_count":2,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1345223356,"creation_date":1345215178,"answer_id":12008111,"question_id":12007991,"body_markdown":"You would need direct access to the memory.\r\n\r\nYou really wouldn&#39;t be able to do this with String, since you don&#39;t have reliable access to the string, and don&#39;t know if it&#39;s been interned somewhere, or if an object was created that you don&#39;t know about.\r\n\r\nIf you really needed to this, you&#39;d have to do something like\r\n\r\n    public class SecureString implements CharSequence {\r\n        char[] data;\r\n        public void wipe() {\r\n           for(int i = 0; i &lt; data.length; i++) data[i] = &#39;.&#39;; // random char\r\n        }\r\n    }\r\n\r\nThat being said, if you&#39;re worried about data still being in memory, you have to realize that if it was ever in memory at one point, than an attacker probably already got it. The only thing you realistically protect yourself from is if a core dump is flushed to a log file.\r\n\r\nRegarding the optimizer, I incredibly doubt it will optimize away the operation. If you really needed it to, you could do something like this:\r\n\r\n    public int wipe() {\r\n        // wipe the array to a random value\r\n        java.util.Arrays.fill(data, (char)(rand.nextInt(60000));\r\n        // compute hash to force optimizer to do the wipe\r\n        int hash = 0;\r\n        for(int i = 0; i &lt; data.length; i++) {\r\n            hash = hash * 31 + (int)data[i];\r\n        }\r\n        return hash;\r\n    }\r\n\r\nThis will force the compiler to do the wipe. It makes it roughly twice as long to run, but it&#39;s a pretty fast operation as it is, and doesn&#39;t increase the order of complexity.","title":"How can I securely wipe a confidential data in memory in java with guarantee it will not be &#39;optimized&#39;?","body":"<p>You would need direct access to the memory.</p>\n\n<p>You really wouldn't be able to do this with String, since you don't have reliable access to the string, and don't know if it's been interned somewhere, or if an object was created that you don't know about.</p>\n\n<p>If you really needed to this, you'd have to do something like</p>\n\n<pre><code>public class SecureString implements CharSequence {\n    char[] data;\n    public void wipe() {\n       for(int i = 0; i &lt; data.length; i++) data[i] = '.'; // random char\n    }\n}\n</code></pre>\n\n<p>That being said, if you're worried about data still being in memory, you have to realize that if it was ever in memory at one point, than an attacker probably already got it. The only thing you realistically protect yourself from is if a core dump is flushed to a log file.</p>\n\n<p>Regarding the optimizer, I incredibly doubt it will optimize away the operation. If you really needed it to, you could do something like this:</p>\n\n<pre><code>public int wipe() {\n    // wipe the array to a random value\n    java.util.Arrays.fill(data, (char)(rand.nextInt(60000));\n    // compute hash to force optimizer to do the wipe\n    int hash = 0;\n    for(int i = 0; i &lt; data.length; i++) {\n        hash = hash * 31 + (int)data[i];\n    }\n    return hash;\n}\n</code></pre>\n\n<p>This will force the compiler to do the wipe. It makes it roughly twice as long to run, but it's a pretty fast operation as it is, and doesn't increase the order of complexity.</p>\n"},{"comments":[{"owner":{"account_id":18399,"reputation":38994,"user_id":42126,"accept_rate":100,"display_name":"kdgregory"},"score":1,"creation_date":1345222940,"post_id":12008117,"comment_id":16021448,"body_markdown":"The JVM will move objects in memory as part of garbage collection, and it won&#39;t make any attempt to zero-out the old memory afterward. This means that your &quot;confidential&quot; data will still be readable.","body":"The JVM will move objects in memory as part of garbage collection, and it won&#39;t make any attempt to zero-out the old memory afterward. This means that your &quot;confidential&quot; data will still be readable."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1345262874,"post_id":12008117,"comment_id":16031758,"body_markdown":"@kdgregory - 1)  The GC &gt;&gt;does&lt;&lt; zero the old memory.  2)  You are missing my point ... secure the platform so that the bad guys can&#39;t read the memory whether or not it has been zeroed.  Because if they can read it after it has been zeroed, they can probably also read it before it has been zeroed.","body":"@kdgregory - 1)  The GC &gt;&gt;does&lt;&lt; zero the old memory.  2)  You are missing my point ... secure the platform so that the bad guys can&#39;t read the memory whether or not it has been zeroed.  Because if they can read it after it has been zeroed, they can probably also read it before it has been zeroed."},{"owner":{"account_id":18399,"reputation":38994,"user_id":42126,"accept_rate":100,"display_name":"kdgregory"},"score":1,"creation_date":1345287889,"post_id":12008117,"comment_id":16035569,"body_markdown":"Re #1: Really? I assume that you can back up this statement with either explicit documentation, or a links to the OpenJDK source that show an explicit clear as part of heap copy/compaction? And have equivalent evidence for other JVMs such as JRockit? Personally, I wouldn&#39;t expect the JVM to waste the time, but if you&#39;ve actually worked with the source, I&#39;ll believe you.","body":"Re #1: Really? I assume that you can back up this statement with either explicit documentation, or a links to the OpenJDK source that show an explicit clear as part of heap copy/compaction? And have equivalent evidence for other JVMs such as JRockit? Personally, I wouldn&#39;t expect the JVM to waste the time, but if you&#39;ve actually worked with the source, I&#39;ll believe you."},{"owner":{"account_id":18399,"reputation":38994,"user_id":42126,"accept_rate":100,"display_name":"kdgregory"},"score":1,"creation_date":1345288035,"post_id":12008117,"comment_id":16035602,"body_markdown":"Re #2: yes, I missed your point. You have three paragraphs that indicate that the OP can indeed clear the string&#39;s memory, and one closing paragraph that is &quot;My personal take.&quot; To be honest, I stopped after the second paragraph.","body":"Re #2: yes, I missed your point. You have three paragraphs that indicate that the OP can indeed clear the string&#39;s memory, and one closing paragraph that is &quot;My personal take.&quot; To be honest, I stopped after the second paragraph."},{"owner":{"account_id":1066914,"reputation":321,"user_id":1067221,"accept_rate":83,"display_name":"Nerd"},"score":0,"creation_date":1345565134,"post_id":12008117,"comment_id":16103694,"body_markdown":"Re No 1. OK. What can I do in case of byte[] instead of string. If I fill it with zeroes, how can I be sure Java compiler will not &#39;optimize&#39; it out?\n\nRe No 3. Of course wiping the confidential data is not a universal protection against bad guys but a step worth doing. But here shall we concentrate only on wiping.","body":"Re No 1. OK. What can I do in case of byte[] instead of string. If I fill it with zeroes, how can I be sure Java compiler will not &#39;optimize&#39; it out?  Re No 3. Of course wiping the confidential data is not a universal protection against bad guys but a step worth doing. But here shall we concentrate only on wiping."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1349775700,"post_id":12008117,"comment_id":17303326,"body_markdown":"@Nerd - in theory (from the JLS perspective) there is no way to guarantee that some other unrelated thread won&#39;t see the old contents of the `byte[]`.  In practice, *I suspect* that a writing to an unrelated volatile field after zeroing would be sufficient to trigger a flush of any delayed writes.  But whether this would be sufficient to prevent the compiler from optimizing them away is a different matter.  In the theory, it isn&#39;t.  The only way to be sure is to capture the JIT compiled native code and analyse it.  Good luck with that!","body":"@Nerd - in theory (from the JLS perspective) there is no way to guarantee that some other unrelated thread won&#39;t see the old contents of the <code>byte[]</code>.  In practice, <i>I suspect</i> that a writing to an unrelated volatile field after zeroing would be sufficient to trigger a flush of any delayed writes.  But whether this would be sufficient to prevent the compiler from optimizing them away is a different matter.  In the theory, it isn&#39;t.  The only way to be sure is to capture the JIT compiled native code and analyse it.  Good luck with that!"},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1349775883,"post_id":12008117,"comment_id":17303412,"body_markdown":"@kdgregory - it is not wasting its time. The semantics of Java require that all heap nodes are default initialized to zero. Given that, it is MORE efficient for the GC to do a large-scale zeroing than it is for the allocator to do a small-scale initialization of nodes as they are allocated.  And my understanding is that that is how it works.","body":"@kdgregory - it is not wasting its time. The semantics of Java require that all heap nodes are default initialized to zero. Given that, it is MORE efficient for the GC to do a large-scale zeroing than it is for the allocator to do a small-scale initialization of nodes as they are allocated.  And my understanding is that that is how it works."},{"owner":{"account_id":956558,"reputation":30924,"user_id":981744,"display_name":"Erwin Bolwidt"},"score":1,"creation_date":1432620994,"post_id":12008117,"comment_id":48982850,"body_markdown":"@StephenC When the GC copies an object to a new location, it doesn&#39;t zero the old memory - at least not until that part of the memory is used again for a new allocation. So even if you zero it out, a copy may have been created by the GC before you did at, and for a certain length of time, the old bytes will be readable. The semantics of Java only require zeroing when an object is allocated, which is not the case when the GC copies the object (I know it&#39;s an old post - someone linked to it)","body":"@StephenC When the GC copies an object to a new location, it doesn&#39;t zero the old memory - at least not until that part of the memory is used again for a new allocation. So even if you zero it out, a copy may have been created by the GC before you did at, and for a certain length of time, the old bytes will be readable. The semantics of Java only require zeroing when an object is allocated, which is not the case when the GC copies the object (I know it&#39;s an old post - someone linked to it)"},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":4,"creation_date":1432637774,"post_id":12008117,"comment_id":48993583,"body_markdown":"@ErwinBolwidt -- Well.  Recently, I downloaded the Java 8 source code, and I took a look.  I was wrong.  It appears that (in Java 8 at least) zeroing is deferred until the point at which the JVM attempts to allocate a heap object.","body":"@ErwinBolwidt -- Well.  Recently, I downloaded the Java 8 source code, and I took a look.  I was wrong.  It appears that (in Java 8 at least) zeroing is deferred until the point at which the JVM attempts to allocate a heap object."}],"tags":[],"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"comment_count":9,"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1683240287,"creation_date":1345215230,"answer_id":12008117,"question_id":12007991,"body_markdown":"A String cannot be &quot;wiped&quot;.  It is immutable, and short of some really dirty and dangerous tricks (using reflection, for example) you cannot alter that.\r\n\r\nSo the safest solution is to not put the data into a `String` in the first place.  Use a `StringBuilder` or an array of characters instead, or some other representation that is not immutable.  (And then clear it when you are done.   And don&#39;t use `toString()` etc on the `StringBuilder` or you have created the `String` you were trying to avoid.)\r\n\r\nOf course, the &quot;safest&quot; solution is rather impractical.  Many Java SE and 3rd party APIs *require* or *return* text data to be provided as `String` objects.\r\n\r\n----------\r\n\r\nFor the record, there are a couple of ways that you can change the contents of a String&#39;s backing array.  For example, you can use reflection to fish out a reference to the `String` object&#39;s backing array, and overwrite its contents.  However, this involves doing things that the JLS states have unspecified behavior so  you cannot guarantee that the optimizer won&#39;t do something unexpected.  And the code to do this will be non-portable, since it depends on internal details of `String` that *have changed* over time and may change again.\r\n\r\n----------\r\n\r\nMy personal take on this is that you are better off locking down your application platform so that unauthorized people can&#39;t gain access to the memory / memory dump in the first place.  After all, if the platform is not properly secured, the &quot;bad guys&quot; may be able to get hold of the string contents before you erase it.  Steps like this might be warranted for small amounts of security critical state, but if you&#39;ve got a lot of &quot;confidential&quot; information to process, it is going to be a major hassle to not be able to use normal strings and string handling.","title":"How can I securely wipe a confidential data in memory in java with guarantee it will not be &#39;optimized&#39;?","body":"<p>A String cannot be &quot;wiped&quot;.  It is immutable, and short of some really dirty and dangerous tricks (using reflection, for example) you cannot alter that.</p>\n<p>So the safest solution is to not put the data into a <code>String</code> in the first place.  Use a <code>StringBuilder</code> or an array of characters instead, or some other representation that is not immutable.  (And then clear it when you are done.   And don't use <code>toString()</code> etc on the <code>StringBuilder</code> or you have created the <code>String</code> you were trying to avoid.)</p>\n<p>Of course, the &quot;safest&quot; solution is rather impractical.  Many Java SE and 3rd party APIs <em>require</em> or <em>return</em> text data to be provided as <code>String</code> objects.</p>\n<hr />\n<p>For the record, there are a couple of ways that you can change the contents of a String's backing array.  For example, you can use reflection to fish out a reference to the <code>String</code> object's backing array, and overwrite its contents.  However, this involves doing things that the JLS states have unspecified behavior so  you cannot guarantee that the optimizer won't do something unexpected.  And the code to do this will be non-portable, since it depends on internal details of <code>String</code> that <em>have changed</em> over time and may change again.</p>\n<hr />\n<p>My personal take on this is that you are better off locking down your application platform so that unauthorized people can't gain access to the memory / memory dump in the first place.  After all, if the platform is not properly secured, the &quot;bad guys&quot; may be able to get hold of the string contents before you erase it.  Steps like this might be warranted for small amounts of security critical state, but if you've got a lot of &quot;confidential&quot; information to process, it is going to be a major hassle to not be able to use normal strings and string handling.</p>\n"},{"comments":[{"owner":{"account_id":2894732,"reputation":3563,"user_id":2482776,"accept_rate":91,"display_name":"asieira"},"score":5,"creation_date":1398778864,"post_id":12008195,"comment_id":35789431,"body_markdown":"Actually, if read the javadoc you&#39;ll notice the original memory space will no be overwritten. Instead, a new memory space with the modified string will be returned instead: http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replace(char,%20char)","body":"Actually, if read the javadoc you&#39;ll notice the original memory space will no be overwritten. Instead, a new memory space with the modified string will be returned instead: <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replace(char,%20char)\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/7/docs/api/java/lang/&hellip;</a>"},{"owner":{"account_id":1610686,"reputation":766,"user_id":1489700,"display_name":"Mitch Connor"},"score":0,"creation_date":1398901696,"post_id":12008195,"comment_id":35852196,"body_markdown":"Well, I am referring to using the String.replace() on a local scope string so it won;t appear in memory as the original String.","body":"Well, I am referring to using the String.replace() on a local scope string so it won;t appear in memory as the original String."},{"owner":{"account_id":2894732,"reputation":3563,"user_id":2482776,"accept_rate":91,"display_name":"asieira"},"score":0,"creation_date":1398965997,"post_id":12008195,"comment_id":35876986,"body_markdown":"Doesn&#39;t change things a bit. Remember that in Java what will be stored on the local scope variable is a *reference* to the String object. Also, Strings are immutable. So no operations on class String will ever update an existing string memory space.","body":"Doesn&#39;t change things a bit. Remember that in Java what will be stored on the local scope variable is a <i>reference</i> to the String object. Also, Strings are immutable. So no operations on class String will ever update an existing string memory space."},{"owner":{"account_id":1610686,"reputation":766,"user_id":1489700,"display_name":"Mitch Connor"},"score":0,"creation_date":1399125387,"post_id":12008195,"comment_id":35936610,"body_markdown":"Exactly right sir, which is why I am saying form a new string from the old local scope String reference using String.replace().","body":"Exactly right sir, which is why I am saying form a new string from the old local scope String reference using String.replace()."},{"owner":{"account_id":2894732,"reputation":3563,"user_id":2482776,"accept_rate":91,"display_name":"asieira"},"score":1,"creation_date":1399336572,"post_id":12008195,"comment_id":36009583,"body_markdown":"Agreed, re-reading your text that is clearly what you meant. In particular, the key part of your response is the recommendation to not use String for sensitive data. And I&#39;ll add that this is a severe limitation in using Java for security software.","body":"Agreed, re-reading your text that is clearly what you meant. In particular, the key part of your response is the recommendation to not use String for sensitive data. And I&#39;ll add that this is a severe limitation in using Java for security software."}],"tags":[],"owner":{"account_id":1610686,"reputation":766,"user_id":1489700,"display_name":"Mitch Connor"},"comment_count":5,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1345215464,"creation_date":1345215464,"answer_id":12008195,"question_id":12007991,"body_markdown":"If you&#39;re going to use a String then I think you are worried about it appearing in a memory dump. I suggest using `String.replace()` on key-characters so that when the String is used at run-time it will change and then go out of scope after it is used and won&#39;t appear correctly in a memory dump. However, I strongly recommend that you not use a String for sensitive data.","title":"How can I securely wipe a confidential data in memory in java with guarantee it will not be &#39;optimized&#39;?","body":"<p>If you're going to use a String then I think you are worried about it appearing in a memory dump. I suggest using <code>String.replace()</code> on key-characters so that when the String is used at run-time it will change and then go out of scope after it is used and won't appear correctly in a memory dump. However, I strongly recommend that you not use a String for sensitive data.</p>\n"}],"owner":{"account_id":1066914,"reputation":321,"user_id":1067221,"accept_rate":83,"display_name":"Nerd"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13416,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":12008117,"answer_count":4,"score":11,"last_activity_date":1683240287,"creation_date":1345214807,"question_id":12007991,"body_markdown":"    String secret=&quot;foo&quot;;\r\n    WhatILookFor.securelyWipe(secret);\r\n\r\nAnd I need to know that it will not be removed by java optimizer.","title":"How can I securely wipe a confidential data in memory in java with guarantee it will not be &#39;optimized&#39;?","body":"<pre><code>String secret=\"foo\";\nWhatILookFor.securelyWipe(secret);\n</code></pre>\n\n<p>And I need to know that it will not be removed by java optimizer.</p>\n"},{"tags":["java","spring-boot","maven","tomcat"],"comments":[{"owner":{"account_id":15369314,"reputation":384,"user_id":11087815,"display_name":"S B"},"score":1,"creation_date":1584329696,"post_id":60699994,"comment_id":107394658,"body_markdown":"Try using `localhost:8080/sample/hello`","body":"Try using <code>localhost:8080&#47;sample&#47;hello</code>"},{"owner":{"account_id":9317965,"reputation":41,"user_id":6917684,"display_name":"reddynr"},"score":0,"creation_date":1584360714,"post_id":60699994,"comment_id":107404820,"body_markdown":"when i access this on embed server it works but on external tomcat it is not working","body":"when i access this on embed server it works but on external tomcat it is not working"},{"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"score":0,"creation_date":1618795034,"post_id":60699994,"comment_id":118702740,"body_markdown":"Does this answer your question? [Servlet 5.0 JAR throws compile error on javax.servlet.\\* but Servlet 4.0 JAR does not](https://stackoverflow.com/questions/64387472/servlet-5-0-jar-throws-compile-error-on-javax-servlet-but-servlet-4-0-jar-does)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/64387472/servlet-5-0-jar-throws-compile-error-on-javax-servlet-but-servlet-4-0-jar-does\">Servlet 5.0 JAR throws compile error on javax.servlet.* but Servlet 4.0 JAR does not</a>"},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":3,"creation_date":1618818952,"post_id":60699994,"comment_id":118708075,"body_markdown":"As far as I&#39;m aware you cannot run Spring Boot on Tomcat 10, as Tomcat 10 uses the new Jakarta EE namespace (`jakarta.*`), instead of the old Java EE namespace (`javax.*`), see also https://github.com/spring-projects/spring-boot/issues/22414. So don&#39;t try to run Spring Boot on Tomcat 10, use Tomcat 9 or 8.5.","body":"As far as I&#39;m aware you cannot run Spring Boot on Tomcat 10, as Tomcat 10 uses the new Jakarta EE namespace (<code>jakarta.*</code>), instead of the old Java EE namespace (<code>javax.*</code>), see also <a href=\"https://github.com/spring-projects/spring-boot/issues/22414\" rel=\"nofollow noreferrer\">github.com/spring-projects/spring-boot/issues/22414</a>. So don&#39;t try to run Spring Boot on Tomcat 10, use Tomcat 9 or 8.5."},{"owner":{"account_id":2128309,"reputation":6169,"user_id":1889825,"accept_rate":38,"display_name":"Somnath Kadam"},"score":0,"creation_date":1691764873,"post_id":60699994,"comment_id":135540259,"body_markdown":"After adding firewall rule for selected port on windows machine works fine","body":"After adding firewall rule for selected port on windows machine works fine"}],"answers":[{"comments":[{"owner":{"account_id":9317965,"reputation":41,"user_id":6917684,"display_name":"reddynr"},"score":4,"creation_date":1584360734,"post_id":60700597,"comment_id":107404830,"body_markdown":"when i access this on embed server it works but on external tomcat it is not working","body":"when i access this on embed server it works but on external tomcat it is not working"}],"tags":[],"owner":{"account_id":7666395,"reputation":11,"user_id":5810009,"display_name":"Ph&#225;t Hồ Hữu"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1584335305,"creation_date":1584335305,"answer_id":60700597,"question_id":60699994,"body_markdown":"Your path is set up in this functions\r\n\r\n    @RequestMapping(value = &quot;/hello&quot;)\r\n    public String helloWorld()\r\n    {\r\n        return &quot;Hello World, Peter&quot;;\r\n    }\r\n\r\nWhich means the only thing you can access is `&quot;/hello&quot;`.\r\nAccessing to `localhost:8080/HelloWorld-0.0.1-SNAPSHOT` will not working, you have to access for `localhost:8080/${context-path}/${your-path}` in this case `localhost:8080/sample/hello` ","title":"Spring Boot application is not starting in external Tomcat (tried both in Tomcat 8.5 and 10)","body":"<p>Your path is set up in this functions</p>\n\n<pre><code>@RequestMapping(value = \"/hello\")\npublic String helloWorld()\n{\n    return \"Hello World, Peter\";\n}\n</code></pre>\n\n<p>Which means the only thing you can access is <code>\"/hello\"</code>.\nAccessing to <code>localhost:8080/HelloWorld-0.0.1-SNAPSHOT</code> will not working, you have to access for <code>localhost:8080/${context-path}/${your-path}</code> in this case <code>localhost:8080/sample/hello</code> </p>\n"},{"tags":[],"owner":{"account_id":13045395,"reputation":2899,"user_id":9427395,"display_name":"dasunse"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1584335347,"creation_date":1584335347,"answer_id":60700601,"question_id":60699994,"body_markdown":"try this way\r\n\r\n    \r\n\r\n&gt; localhost:8080/app-name/hello\r\n\r\nIn your pom.xml\r\n\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n        &lt;groupId&gt;it.group.id&lt;/groupId&gt;\r\n        &lt;artifactId&gt;artifactId&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n        &lt;packaging&gt;war&lt;/packaging&gt;\r\n        &lt;parent&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n            &lt;version&gt;2.1.5.RELEASE&lt;/version&gt;\r\n            &lt;relativePath/&gt; &lt;!-- lookup parent fdaotory --&gt;\r\n        &lt;/parent&gt;\r\n        &lt;properties&gt;\r\n            &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n            &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\r\n            &lt;java.version&gt;1.8&lt;/java.version&gt;\r\n        &lt;/properties&gt;\r\n        &lt;dependencies&gt;\r\n    \r\n            &lt;!--For Build War File--&gt;\r\n            &lt;dependency&gt;\r\n                 &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                 &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\r\n                 &lt;scope&gt;provided&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n    \r\n    \r\n        &lt;/dependencies&gt;\r\n        &lt;build&gt;\r\n            &lt;!--DEV--&gt;\r\n            &lt;finalName&gt;app-name&lt;/finalName&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n                &lt;/plugin&gt;\r\n    \r\n                &lt;!--For Build War File--&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.2.2&lt;/version&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n    \r\n            &lt;/plugins&gt;\r\n    \r\n        &lt;/build&gt;\r\n    \r\n    &lt;/project&gt;\r\n\r\n","title":"Spring Boot application is not starting in external Tomcat (tried both in Tomcat 8.5 and 10)","body":"<p>try this way</p>\n\n<blockquote>\n  <p>localhost:8080/app-name/hello</p>\n</blockquote>\n\n<p>In your pom.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;it.group.id&lt;/groupId&gt;\n    &lt;artifactId&gt;artifactId&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.1.5.RELEASE&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent fdaotory --&gt;\n    &lt;/parent&gt;\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n\n        &lt;!--For Build War File--&gt;\n        &lt;dependency&gt;\n             &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n             &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n             &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n\n\n    &lt;/dependencies&gt;\n    &lt;build&gt;\n        &lt;!--DEV--&gt;\n        &lt;finalName&gt;app-name&lt;/finalName&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n\n            &lt;!--For Build War File--&gt;\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.2.2&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n\n        &lt;/plugins&gt;\n\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5945485,"reputation":31,"user_id":4675102,"display_name":"Pavan"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1658129385,"creation_date":1657657404,"answer_id":72957989,"question_id":60699994,"body_markdown":"Make sure that the java version you set in your pom.xml `&lt;java.version&gt;1.8&lt;/java.version&gt;` and the java version using which the tomcat is running (version of java to which `JAVA_HOME` env variable is pointing) are same.","title":"Spring Boot application is not starting in external Tomcat (tried both in Tomcat 8.5 and 10)","body":"<p>Make sure that the java version you set in your pom.xml <code>&lt;java.version&gt;1.8&lt;/java.version&gt;</code> and the java version using which the tomcat is running (version of java to which <code>JAVA_HOME</code> env variable is pointing) are same.</p>\n"},{"tags":[],"owner":{"account_id":22321398,"reputation":177,"user_id":16543985,"display_name":"ChandraShekhara"},"comment_count":0,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1658135033,"creation_date":1658135033,"answer_id":73019792,"question_id":60699994,"body_markdown":"follow this steps it may helps you\r\n1) ***Build the war file*** : go to spring project directory there you do ***mvn clean install*** (make sure you have installed maven and set to environmental variable).\r\n2) ***Copy war*** :copy your war file into /webapps folder inside your tomcat folder.\r\n3) ***Start server***: to start the server go to /bin folder then execute this commands startup.sh for Linux startup.bat for windows.\r\n4) ***Hit Url***: Once the server started, open your browser the type ***localhost:{&quot;portNumber&quot;}/{warFileName}/{yourPath}*** in your case its look like this ```http://localhost:8080/{warfilename}/hello```","title":"Spring Boot application is not starting in external Tomcat (tried both in Tomcat 8.5 and 10)","body":"<p>follow this steps it may helps you</p>\n<ol>\n<li><em><strong>Build the war file</strong></em> : go to spring project directory there you do <em><strong>mvn clean install</strong></em> (make sure you have installed maven and set to environmental variable).</li>\n<li><em><strong>Copy war</strong></em> :copy your war file into /webapps folder inside your tomcat folder.</li>\n<li><em><strong>Start server</strong></em>: to start the server go to /bin folder then execute this commands startup.sh for Linux startup.bat for windows.</li>\n<li><em><strong>Hit Url</strong></em>: Once the server started, open your browser the type <em><strong>localhost:{&quot;portNumber&quot;}/{warFileName}/{yourPath}</strong></em> in your case its look like this <code>http://localhost:8080/{warfilename}/hello</code></li>\n</ol>\n"}],"owner":{"account_id":9317965,"reputation":41,"user_id":6917684,"display_name":"reddynr"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7088,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":4,"score":4,"last_activity_date":1683239406,"creation_date":1584329344,"question_id":60699994,"body_markdown":"I am trying to deploy a rest sample in external tomcat. However, it does not give any error and Spring does not start also. According to Spring documentation I followed three steps\r\n\r\n1. Packages as war inside pom.xml\r\n2. `&lt;scope&gt;provided&lt;/scope&gt;` to spring-boot-starter-tomcat in pom.xml\r\n3. Extending main class with SpringBootServletInitializer\r\n\r\nWhen I place this in Tomcat&#39;s webapp folder and run &quot;catalina.bat run&quot; it says application deployed successfully, but whatever URL I try to access, it does not execute the rest method\r\n\r\n```\r\n@SpringBootApplication\r\n@RestController\r\npublic class HelloWorldApplication extends SpringBootServletInitializer\r\n{\r\n\t@Override\r\n\tprotected SpringApplicationBuilder configure(SpringApplicationBuilder application)\r\n\t{\r\n\t\treturn application.sources(HelloWorldApplication.class);\r\n\t}\r\n\tpublic static void main(String[] args)\r\n\t{\r\n\t\tSpringApplication.run(HelloWorldApplication.class, args);\r\n\t}\r\n\t@RequestMapping(value = &quot;/hello&quot;)\r\n\tpublic String helloWorld()\r\n\t{\r\n\t\treturn &quot;Hello World, Peter&quot;;\r\n\t}\r\n}\r\n```\r\n\r\nand in pom.xml\r\n\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\r\n    &lt;scope&gt;provided&lt;/scope&gt;\r\n&lt;/dependency&gt;\r\n\r\n        \r\n&lt;groupId&gt;com.example&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;HelloWorld&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;HelloWorld&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\t&lt;packaging&gt;war&lt;/packaging&gt;\r\n```\r\nand application.properties is like\r\n\r\n    server.servlet.context-path=/sample\r\n\r\nTomcat logs:\r\n```\r\n    15-Mar-2020 23:06:46.219 INFO [main] org.apache.catalina.startup.HostConfig.deployWAR Deploying web application archive [C:\\softwares\\apache-tomcat-10.0.0-M1\\webapps\\HelloWorld-0.0.1-SNAPSHOT.war]\r\n    15-Mar-2020 23:06:48.102 INFO [main] org.apache.jasper.servlet.TldScanner.scanJars At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.\r\n    15-Mar-2020 23:06:48.409 WARNING [main] org.apache.catalina.util.SessionIdGeneratorBase.createSecureRandom Creation of SecureRandom instance for session ID generation using [SHA1PRNG] took [270] milliseconds.\r\n    15-Mar-2020 23:06:48.440 INFO [main] org.apache.catalina.startup.HostConfig.deployWAR Deployment of web application archive [C:\\softwares\\apache-tomcat-10.0.0-M1\\webapps\\HelloWorld-0.0.1-SNAPSHOT.war] has finished in [2,221] ms\r\n```\r\n\r\n\r\nI tried accessing in below ways.but none of them worked.Could any one points me in right direction?\r\n```\r\nlocalhost:8080/HelloWorld-0.0.1-SNAPSHOT\r\nlocalhost:8080/HelloWorld-0.0.1-SNAPSHOT/hello\r\nlocalhost:8080/HelloWorld-0.0.1-SNAPSHOT/HelloWorldApplication/helloWorld\r\n```  \r\n\r\n\r\n\r\n","title":"Spring Boot application is not starting in external Tomcat (tried both in Tomcat 8.5 and 10)","body":"<p>I am trying to deploy a rest sample in external tomcat. However, it does not give any error and Spring does not start also. According to Spring documentation I followed three steps</p>\n<ol>\n<li>Packages as war inside pom.xml</li>\n<li><code>&lt;scope&gt;provided&lt;/scope&gt;</code> to spring-boot-starter-tomcat in pom.xml</li>\n<li>Extending main class with SpringBootServletInitializer</li>\n</ol>\n<p>When I place this in Tomcat's webapp folder and run &quot;catalina.bat run&quot; it says application deployed successfully, but whatever URL I try to access, it does not execute the rest method</p>\n<pre><code>@SpringBootApplication\n@RestController\npublic class HelloWorldApplication extends SpringBootServletInitializer\n{\n    @Override\n    protected SpringApplicationBuilder configure(SpringApplicationBuilder application)\n    {\n        return application.sources(HelloWorldApplication.class);\n    }\n    public static void main(String[] args)\n    {\n        SpringApplication.run(HelloWorldApplication.class, args);\n    }\n    @RequestMapping(value = &quot;/hello&quot;)\n    public String helloWorld()\n    {\n        return &quot;Hello World, Peter&quot;;\n    }\n}\n</code></pre>\n<p>and in pom.xml</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n    &lt;scope&gt;provided&lt;/scope&gt;\n&lt;/dependency&gt;\n\n        \n&lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;HelloWorld&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;HelloWorld&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n</code></pre>\n<p>and application.properties is like</p>\n<pre><code>server.servlet.context-path=/sample\n</code></pre>\n<p>Tomcat logs:</p>\n<pre><code>    15-Mar-2020 23:06:46.219 INFO [main] org.apache.catalina.startup.HostConfig.deployWAR Deploying web application archive [C:\\softwares\\apache-tomcat-10.0.0-M1\\webapps\\HelloWorld-0.0.1-SNAPSHOT.war]\n    15-Mar-2020 23:06:48.102 INFO [main] org.apache.jasper.servlet.TldScanner.scanJars At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.\n    15-Mar-2020 23:06:48.409 WARNING [main] org.apache.catalina.util.SessionIdGeneratorBase.createSecureRandom Creation of SecureRandom instance for session ID generation using [SHA1PRNG] took [270] milliseconds.\n    15-Mar-2020 23:06:48.440 INFO [main] org.apache.catalina.startup.HostConfig.deployWAR Deployment of web application archive [C:\\softwares\\apache-tomcat-10.0.0-M1\\webapps\\HelloWorld-0.0.1-SNAPSHOT.war] has finished in [2,221] ms\n</code></pre>\n<p>I tried accessing in below ways.but none of them worked.Could any one points me in right direction?</p>\n<pre><code>localhost:8080/HelloWorld-0.0.1-SNAPSHOT\nlocalhost:8080/HelloWorld-0.0.1-SNAPSHOT/hello\nlocalhost:8080/HelloWorld-0.0.1-SNAPSHOT/HelloWorldApplication/helloWorld\n</code></pre>\n"},{"tags":["java","android","android-camera","getusermedia"],"owner":{"account_id":27289543,"reputation":35,"user_id":20808185,"display_name":"John House"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":308,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683238351,"creation_date":1683107151,"question_id":76162455,"body_markdown":"I 0 in java, i just need run my web application in android webview, app use camera.\r\nI have error:\r\n\r\n&gt; 2023-05-03 12:41:38.074 4975-4975/com.morservice I/chromium: [INFO:CONSOLE(0)] &quot;Uncaught (in promise) NotAllowedError: Permission denied&quot;, source: https://morservicetest.na4u.ru/add-product\r\n\r\nBut i request permission in Manifest. Right [here][1] many code for 6+ android request permission, i use api 30 = android 11. Idk what i need do for fix problem. Can u help me please?\r\n\r\n\r\nMainActivity\r\n```\r\npackage com.morservice;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.annotation.SuppressLint;\r\nimport android.os.Bundle;\r\nimport android.webkit.PermissionRequest;\r\nimport android.webkit.WebChromeClient;\r\nimport android.webkit.WebSettings;\r\nimport android.webkit.WebView;\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    @SuppressLint(&quot;SetJavaScriptEnabled&quot;)\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n        WebView myWebView = (WebView) findViewById(R.id.webview);\r\n        WebSettings webSettings = myWebView.getSettings();\r\n        webSettings.setJavaScriptEnabled(true);\r\n        myWebView.loadUrl(&quot;https://morservicetest.na4u.ru/frame&quot;);\r\n\r\n    }\r\n}\r\n```\r\n\r\nManifest\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.CAMERA&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.webkit.PermissionRequest&quot; /&gt;\r\n    &lt;application\r\n        android:allowBackup=&quot;true&quot;\r\n        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\r\n        android:fullBackupContent=&quot;@xml/backup_rules&quot;\r\n        android:icon=&quot;@mipmap/ic_launcher&quot;\r\n        android:label=&quot;@string/app_name&quot;\r\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\r\n        android:supportsRtl=&quot;true&quot;\r\n        android:theme=&quot;@style/Theme.МорСервис&quot;\r\n        tools:targetApi=&quot;31&quot;&gt;\r\n        &lt;activity\r\n            android:name=&quot;.MainActivity&quot;\r\n            android:exported=&quot;true&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n\r\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n\r\n            &lt;meta-data\r\n                android:name=&quot;android.app.lib_name&quot;\r\n                android:value=&quot;&quot; /&gt;\r\n        &lt;/activity&gt;\r\n    &lt;/application&gt;\r\n\r\n&lt;/manifest&gt;\r\n```\r\n\r\nUPDATE:\r\nI try methods from [this topic][2] but he not help me:\r\n\r\n```\r\nwebSettings.setMediaPlaybackRequiresUserGesture(false);\r\n        myWebView.setWebViewClient(new WebViewClient());\r\n        myWebView.setWebChromeClient(\r\n            new WebChromeClient() {\r\n                 // Grant permissions for cam\r\n                 @Override\r\n                 public void onPermissionRequest(final PermissionRequest request) {\r\n                     Log.d(TAG, &quot;onPermissionRequest&quot;);\r\n                     MainActivity.this.runOnUiThread(new Runnable() {\r\n                         @Override\r\n                         public void run() {\r\n                             Log.d(TAG, request.getOrigin().toString());\r\n                             if (request.getOrigin().toString().equals(&quot;file:///&quot;)) {\r\n                                 Log.d(TAG, &quot;GRANTED&quot;);\r\n                                 request.grant(request.getResources());\r\n                             } else {\r\n                                 Log.d(TAG, &quot;DENIED&quot;);\r\n                                 request.deny();\r\n                             }\r\n                         }\r\n                     });\r\n                 }\r\n             }\r\n```\r\n\r\n\r\n  [1]: https://developer.android.com/training/permissions/requesting#java\r\n  [2]: https://github.com/NativeScript/NativeScript/issues/9304","title":"How get camera permission from webview android?","body":"<p>I 0 in java, i just need run my web application in android webview, app use camera.\nI have error:</p>\n<blockquote>\n<p>2023-05-03 12:41:38.074 4975-4975/com.morservice I/chromium: [INFO:CONSOLE(0)] &quot;Uncaught (in promise) NotAllowedError: Permission denied&quot;, source: <a href=\"https://morservicetest.na4u.ru/add-product\" rel=\"nofollow noreferrer\">https://morservicetest.na4u.ru/add-product</a></p>\n</blockquote>\n<p>But i request permission in Manifest. Right <a href=\"https://developer.android.com/training/permissions/requesting#java\" rel=\"nofollow noreferrer\">here</a> many code for 6+ android request permission, i use api 30 = android 11. Idk what i need do for fix problem. Can u help me please?</p>\n<p>MainActivity</p>\n<pre><code>package com.morservice;\n\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.annotation.SuppressLint;\nimport android.os.Bundle;\nimport android.webkit.PermissionRequest;\nimport android.webkit.WebChromeClient;\nimport android.webkit.WebSettings;\nimport android.webkit.WebView;\n\npublic class MainActivity extends AppCompatActivity {\n\n    @SuppressLint(&quot;SetJavaScriptEnabled&quot;)\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        WebView myWebView = (WebView) findViewById(R.id.webview);\n        WebSettings webSettings = myWebView.getSettings();\n        webSettings.setJavaScriptEnabled(true);\n        myWebView.loadUrl(&quot;https://morservicetest.na4u.ru/frame&quot;);\n\n    }\n}\n</code></pre>\n<p>Manifest</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.CAMERA&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.webkit.PermissionRequest&quot; /&gt;\n    &lt;application\n        android:allowBackup=&quot;true&quot;\n        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\n        android:fullBackupContent=&quot;@xml/backup_rules&quot;\n        android:icon=&quot;@mipmap/ic_launcher&quot;\n        android:label=&quot;@string/app_name&quot;\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\n        android:supportsRtl=&quot;true&quot;\n        android:theme=&quot;@style/Theme.МорСервис&quot;\n        tools:targetApi=&quot;31&quot;&gt;\n        &lt;activity\n            android:name=&quot;.MainActivity&quot;\n            android:exported=&quot;true&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n            &lt;/intent-filter&gt;\n\n            &lt;meta-data\n                android:name=&quot;android.app.lib_name&quot;\n                android:value=&quot;&quot; /&gt;\n        &lt;/activity&gt;\n    &lt;/application&gt;\n\n&lt;/manifest&gt;\n</code></pre>\n<p>UPDATE:\nI try methods from <a href=\"https://github.com/NativeScript/NativeScript/issues/9304\" rel=\"nofollow noreferrer\">this topic</a> but he not help me:</p>\n<pre><code>webSettings.setMediaPlaybackRequiresUserGesture(false);\n        myWebView.setWebViewClient(new WebViewClient());\n        myWebView.setWebChromeClient(\n            new WebChromeClient() {\n                 // Grant permissions for cam\n                 @Override\n                 public void onPermissionRequest(final PermissionRequest request) {\n                     Log.d(TAG, &quot;onPermissionRequest&quot;);\n                     MainActivity.this.runOnUiThread(new Runnable() {\n                         @Override\n                         public void run() {\n                             Log.d(TAG, request.getOrigin().toString());\n                             if (request.getOrigin().toString().equals(&quot;file:///&quot;)) {\n                                 Log.d(TAG, &quot;GRANTED&quot;);\n                                 request.grant(request.getResources());\n                             } else {\n                                 Log.d(TAG, &quot;DENIED&quot;);\n                                 request.deny();\n                             }\n                         }\n                     });\n                 }\n             }\n</code></pre>\n"},{"tags":["java","protocol-buffers","protoc","proto3"],"answers":[{"comments":[{"owner":{"account_id":2390568,"reputation":2798,"user_id":2090489,"accept_rate":86,"display_name":"Ankita"},"score":0,"creation_date":1458325167,"post_id":36090933,"comment_id":59827396,"body_markdown":"Yes,@kenton Varda that is what I precisely want to do. Thanks for your suggestion","body":"Yes,@kenton Varda that is what I precisely want to do. Thanks for your suggestion"},{"owner":{"account_id":10481421,"reputation":1559,"user_id":7726319,"accept_rate":0,"display_name":"Prog_G"},"score":0,"creation_date":1600069819,"post_id":36090933,"comment_id":112960607,"body_markdown":"@Ankita Did you find any solution for the above problem?","body":"@Ankita Did you find any solution for the above problem?"}],"tags":[],"owner":{"account_id":3179906,"reputation":42189,"user_id":2686899,"display_name":"Kenton Varda"},"comment_count":2,"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1458322845,"creation_date":1458322845,"answer_id":36090933,"question_id":36074849,"body_markdown":"I think you are asking: &quot;Is there a way to dynamically parse text `.proto` files at runtime to get descriptors.&quot;\r\n\r\nThe `.proto` parser is written in C++. It is available as the library `libprotoc.so`. You could, in theory, write a JNI wrapper around this to do parsing at runtime. However, there is no (official) pure-Java parser for `.proto` files.","title":"Dynamic parsing of .proto text file at runtime to generate descriptors","body":"<p>I think you are asking: \"Is there a way to dynamically parse text <code>.proto</code> files at runtime to get descriptors.\"</p>\n\n<p>The <code>.proto</code> parser is written in C++. It is available as the library <code>libprotoc.so</code>. You could, in theory, write a JNI wrapper around this to do parsing at runtime. However, there is no (official) pure-Java parser for <code>.proto</code> files.</p>\n"},{"tags":[],"owner":{"account_id":15999524,"reputation":178,"user_id":11546605,"display_name":"Dominik21"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683237729,"creation_date":1683237729,"answer_id":76177631,"question_id":36074849,"body_markdown":"I just found a solution from confluent, more precisely &#39;io.confluent:kafka-protobuf-serializer&#39;, which enables this in a very easy way\r\n\r\n        ProtobufSchema schema = new ProtobufSchema(\r\n                Files.readString(\r\n                        Path.of(&quot;/anyPath/test.proto&quot;)\r\n                )\r\n        );\r\n        Descriptor descriptor = schema.toDescriptor();\r\n        Message deserializedMessage = DynamicMessage.parseFrom(descriptor, messageByteArr);","title":"Dynamic parsing of .proto text file at runtime to generate descriptors","body":"<p>I just found a solution from confluent, more precisely 'io.confluent:kafka-protobuf-serializer', which enables this in a very easy way</p>\n<pre><code>    ProtobufSchema schema = new ProtobufSchema(\n            Files.readString(\n                    Path.of(&quot;/anyPath/test.proto&quot;)\n            )\n    );\n    Descriptor descriptor = schema.toDescriptor();\n    Message deserializedMessage = DynamicMessage.parseFrom(descriptor, messageByteArr);\n</code></pre>\n"}],"owner":{"account_id":2390568,"reputation":2798,"user_id":2090489,"accept_rate":86,"display_name":"Ankita"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1852,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":36090933,"answer_count":2,"score":6,"last_activity_date":1683237729,"creation_date":1458266458,"question_id":36074849,"body_markdown":"I am currently working on Google Protocol Buffers and need to generate dynamic messages. I already have my .proto files defined as shown below.\r\n\r\n    message TSInbound\r\n    {\r\n      string id = 1;\r\n      map&lt;string,string&gt; state = 2;\r\n      map&lt;string,string&gt; reading =3;\r\n    }\r\nAFAIK,I can use File Descriptor Set to create dynamic messsages. But, that would involve using the compiler to generate the desc files. I would like to generate Descriptor without compiling the .proto files. Is there a way for dynamic creation of message using custom defined .proto files and not using protoc ?\r\n\r\n    ","title":"Dynamic parsing of .proto text file at runtime to generate descriptors","body":"<p>I am currently working on Google Protocol Buffers and need to generate dynamic messages. I already have my .proto files defined as shown below.</p>\n\n<pre><code>message TSInbound\n{\n  string id = 1;\n  map&lt;string,string&gt; state = 2;\n  map&lt;string,string&gt; reading =3;\n}\n</code></pre>\n\n<p>AFAIK,I can use File Descriptor Set to create dynamic messsages. But, that would involve using the compiler to generate the desc files. I would like to generate Descriptor without compiling the .proto files. Is there a way for dynamic creation of message using custom defined .proto files and not using protoc ?</p>\n"},{"tags":["java","spring","spring-boot","thymeleaf","spring-thymeleaf"],"answers":[{"tags":[],"owner":{"account_id":5152799,"reputation":19367,"user_id":4126893,"display_name":"Metroids"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1683235838,"creation_date":1683235838,"answer_id":76177485,"question_id":76177165,"body_markdown":"No, you don&#39;t need to use the `th:field=&quot;*{...}&quot;` attribute on all fields.  Any fields  not specified will be reset to their empty or default value after the form is submitted.\r\n\r\nThis does mean that if you are editing an object and you leave a field off and save the object later, any fields without a `th:field` will be saved with an empty value.  (You can use the `@SessionAttributes` annotation to persist fields even if they don&#39;t appear on the form.)","title":"Thymeleaf: Do you need to use th:field *{} on all fields?","body":"<p>No, you don't need to use the <code>th:field=&quot;*{...}&quot;</code> attribute on all fields.  Any fields  not specified will be reset to their empty or default value after the form is submitted.</p>\n<p>This does mean that if you are editing an object and you leave a field off and save the object later, any fields without a <code>th:field</code> will be saved with an empty value.  (You can use the <code>@SessionAttributes</code> annotation to persist fields even if they don't appear on the form.)</p>\n"}],"owner":{"account_id":15525089,"reputation":99,"user_id":11200149,"display_name":"NoobSailboat"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":145,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1683237524,"creation_date":1683232133,"question_id":76177165,"body_markdown":"After adding a Model attribute in the `@GetMapping` do you need add all fields using `th:field=&quot;*{...}&quot;` in the view&#39;s form?\r\n\r\nFor example, if I add a User to the model and I want a form that edits the name but not the DOB or anything else can I just use `th:field` on just the name and not include the other fields?\r\n\r\nIt still seems to work when I create a `@GetMapping` for edit I pass the model and just have the `th:field` for just the name, but online I see people adding all of the fields to the form.\r\n\r\nI can understand if you are trying to save the Entity, but if you&#39;re editing does it make a difference that I just don&#39;t understand?","title":"Thymeleaf: Do you need to use th:field *{} on all fields?","body":"<p>After adding a Model attribute in the <code>@GetMapping</code> do you need add all fields using <code>th:field=&quot;*{...}&quot;</code> in the view's form?</p>\n<p>For example, if I add a User to the model and I want a form that edits the name but not the DOB or anything else can I just use <code>th:field</code> on just the name and not include the other fields?</p>\n<p>It still seems to work when I create a <code>@GetMapping</code> for edit I pass the model and just have the <code>th:field</code> for just the name, but online I see people adding all of the fields to the form.</p>\n<p>I can understand if you are trying to save the Entity, but if you're editing does it make a difference that I just don't understand?</p>\n"},{"tags":["java","android","paint","bitmapfactory","oval"],"answers":[{"tags":[],"owner":{"account_id":27874078,"reputation":36,"user_id":21283922,"display_name":"Nguyễn Văn Huy"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683168128,"creation_date":1683168128,"answer_id":76169241,"question_id":76169053,"body_markdown":" 1. If you want to draw rectangle with round corners:\r\n\r\n        Canvas.drawRoundRect(RectF(),10f,10f,Paint())\r\n\r\n 2. For each text, you can get text bound (a rect a round text), then draw this rect with round corners:\r\n\r\n         String text = &quot;hello&quot;;\r\n        Rect rectText = new Rect(); \r\n        paint.getTextBounds(text, 0, text.length(), rectText);\r\n        canvas.drawRoundRect(rectText.left,rectText.top,rectText.right,rectText.bottom,radius,radius,paint);\r\n      \r\n","title":"How to draw oval shape (rectangle with round corners) as text background using Paint and Convas in Android java","body":"<ol>\n<li><p>If you want to draw rectangle with round corners:</p>\n<pre><code>Canvas.drawRoundRect(RectF(),10f,10f,Paint())\n</code></pre>\n</li>\n<li><p>For each text, you can get text bound (a rect a round text), then draw this rect with round corners:</p>\n<pre><code> String text = &quot;hello&quot;;\nRect rectText = new Rect(); \npaint.getTextBounds(text, 0, text.length(), rectText);\ncanvas.drawRoundRect(rectText.left,rectText.top,rectText.right,rectText.bottom,radius,radius,paint);\n</code></pre>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":11087965,"reputation":164,"user_id":8140942,"display_name":"Waqas K"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1683236936,"creation_date":1683236936,"answer_id":76177574,"question_id":76169053,"body_markdown":"Final Result after making changes to @Nguyễn&#39;s Answer:\r\n\r\n    //Creating text of random length\r\n    final int min = 1;\r\n    final int max = 999999;\r\n    final String text = new Random().nextInt((max - min) + 1) + min +&quot; USD&quot;;\r\n\r\n    //Creating bitmap width according to text length\r\n    Bitmap.Config conf = Bitmap.Config.ARGB_8888;\r\n    Bitmap bmp = Bitmap.createBitmap(text.length()*20, 50, conf);\r\n\r\n    //Setting up Text properties\r\n    Paint color = new Paint();\r\n    Typeface typeface = Typeface.DEFAULT_BOLD;\r\n    color.setTypeface(typeface);\r\n    color.setTextSize(30);\r\n    color.setColor(Color.BLACK);\r\n\r\n    //Setting up Rectangle\r\n    Rect rectText = new Rect();\r\n    Paint paint = new Paint();\r\n    paint.setTextSize(32);\r\n    paint.setColor(Color.WHITE);\r\n\r\n    //Creating Convas object for the bitmap\r\n    Canvas canvas = new Canvas(bmp);\r\n\r\n    //Drawing rectangle with round corners and it width according to the text length with some extra padding\r\n    paint.getTextBounds(text, 0, text.length(), rectText);\r\n    canvas.drawRoundRect(rectText.left,10,rectText.right+10,50,10,40,paint);\r\n\r\n    //Drawing text\r\n    canvas.drawText(text, 10, 40, color);\r\n\r\nHere is the output:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/3bGgh.png","title":"How to draw oval shape (rectangle with round corners) as text background using Paint and Convas in Android java","body":"<p>Final Result after making changes to @Nguyễn's Answer:</p>\n<pre><code>//Creating text of random length\nfinal int min = 1;\nfinal int max = 999999;\nfinal String text = new Random().nextInt((max - min) + 1) + min +&quot; USD&quot;;\n\n//Creating bitmap width according to text length\nBitmap.Config conf = Bitmap.Config.ARGB_8888;\nBitmap bmp = Bitmap.createBitmap(text.length()*20, 50, conf);\n\n//Setting up Text properties\nPaint color = new Paint();\nTypeface typeface = Typeface.DEFAULT_BOLD;\ncolor.setTypeface(typeface);\ncolor.setTextSize(30);\ncolor.setColor(Color.BLACK);\n\n//Setting up Rectangle\nRect rectText = new Rect();\nPaint paint = new Paint();\npaint.setTextSize(32);\npaint.setColor(Color.WHITE);\n\n//Creating Convas object for the bitmap\nCanvas canvas = new Canvas(bmp);\n\n//Drawing rectangle with round corners and it width according to the text length with some extra padding\npaint.getTextBounds(text, 0, text.length(), rectText);\ncanvas.drawRoundRect(rectText.left,10,rectText.right+10,50,10,40,paint);\n\n//Drawing text\ncanvas.drawText(text, 10, 40, color);\n</code></pre>\n<p>Here is the output:</p>\n<p><a href=\"https://i.stack.imgur.com/3bGgh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3bGgh.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":11087965,"reputation":164,"user_id":8140942,"display_name":"Waqas K"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76177574,"answer_count":2,"score":1,"last_activity_date":1683236936,"creation_date":1683165080,"question_id":76169053,"body_markdown":"I am trying to add an oval background to my text according to its size using Paint. There are a few problems in my code. \r\n1) I want to draw rectangle with round corners instead of the circles. \r\n2) Its size does not changes according to text length. \r\n\r\n\r\n\r\n\r\nHere is my code so far:\r\n\r\n    Bitmap.Config conf = Bitmap.Config.ARGB_8888;\r\n    Bitmap bmp = Bitmap.createBitmap(500, 280, conf);\r\n    Canvas canvas1 = new Canvas(bmp);\r\n                            \r\n    Paint color = new Paint();\r\n    color.setTextSize(30);\r\n    color.setColor(Color.BLACK);\r\n\r\n    Paint clr2=new Paint();\r\n    clr2.setColor(Color.WHITE);\r\n    canvas1.translate(200/2f,100/2f);\r\n    canvas1.drawCircle(50,0, 50, clr2);\r\n    canvas1.drawText(new Random().nextInt()+&quot; $&quot;, 0, 0, color);`\r\n\r\n\r\nCurrent results:\r\n\r\n[![enter image description here](https://i.stack.imgur.com/ws0Tu.png)](https://i.stack.imgur.com/ws0Tu.png)\r\n\r\nExpected results:\r\n\r\n[![enter image description here](https://i.stack.imgur.com/Eay9F.png)](https://i.stack.imgur.com/Eay9F.png)","title":"How to draw oval shape (rectangle with round corners) as text background using Paint and Convas in Android java","body":"<p>I am trying to add an oval background to my text according to its size using Paint. There are a few problems in my code.</p>\n<ol>\n<li>I want to draw rectangle with round corners instead of the circles.</li>\n<li>Its size does not changes according to text length.</li>\n</ol>\n<p>Here is my code so far:</p>\n<pre><code>Bitmap.Config conf = Bitmap.Config.ARGB_8888;\nBitmap bmp = Bitmap.createBitmap(500, 280, conf);\nCanvas canvas1 = new Canvas(bmp);\n                        \nPaint color = new Paint();\ncolor.setTextSize(30);\ncolor.setColor(Color.BLACK);\n\nPaint clr2=new Paint();\nclr2.setColor(Color.WHITE);\ncanvas1.translate(200/2f,100/2f);\ncanvas1.drawCircle(50,0, 50, clr2);\ncanvas1.drawText(new Random().nextInt()+&quot; $&quot;, 0, 0, color);`\n</code></pre>\n<p>Current results:</p>\n<p><a href=\"https://i.stack.imgur.com/ws0Tu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ws0Tu.png\" alt=\"enter image description here\" /></a></p>\n<p>Expected results:</p>\n<p><a href=\"https://i.stack.imgur.com/Eay9F.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Eay9F.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","json","inheritance","serialization","extends"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1683251108,"post_id":76177565,"comment_id":134341917,"body_markdown":"Does this answer your question? [Downcasting in Java](https://stackoverflow.com/questions/380813/downcasting-in-java)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/380813/downcasting-in-java\">Downcasting in Java</a>"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1683251141,"post_id":76177565,"comment_id":134341921,"body_markdown":"What line do you think is &quot;casting B as C&quot;?","body":"What line do you think is &quot;casting B as C&quot;?"},{"owner":{"account_id":18247034,"reputation":95,"user_id":13282920,"display_name":"Fran Turkovic"},"score":0,"creation_date":1683364237,"post_id":76177565,"comment_id":134358137,"body_markdown":"@tgdavies yes, thank for info, I never seen this before. I wrote code and was sure it will fail and it worked and I was surprised.","body":"@tgdavies yes, thank for info, I never seen this before. I wrote code and was sure it will fail and it worked and I was surprised."}],"owner":{"account_id":18247034,"reputation":95,"user_id":13282920,"display_name":"Fran Turkovic"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683236808,"creation_date":1683236808,"question_id":76177565,"body_markdown":"I don&#39;t understand why this code works.\r\n\r\nI have 3 classes: A, B and C.\r\n\r\nClass A have class B as attribute.\r\nClass C extends class B. I can initialize class C and set is as attribute of class A.\r\n\r\n```\r\npublic class A {\r\n    public B b;\r\n\r\n    public A(){}\r\n}\r\n\r\npublic class B {\r\n    public String username;\r\n\r\n    public B(){}\r\n}\r\n\r\npublic class C extends B {\r\n    public String password;\r\n\r\n    public C(){}\r\n}\r\n\r\npublic class Program\r\n{\r\n\r\n    public static void main(String[] args) {\r\n\t\tA a = new A();\r\n        B b = new B();\r\n        C c = new C();\r\n        a.b = c;\r\n\t}\r\n}\r\n```\r\n\r\nHow can Java cast B as C if C is &quot;larger&quot;?\r\nIf I try to do it normally, you can&#39;t, for example:\r\n\r\n```\r\npublic class Program\r\n{\r\n\r\n    public static void main(String[] args) {\r\n\t\tB b = new C();\r\n        // ERROR cannont find symbol (b.password)\r\n        b.password = &quot;asd&quot;;\r\n\t}\r\n}\r\n```\r\n\r\nor I try it like this:\r\n\r\n```\r\npublic class Program\r\n{\r\n\r\n    public static void main(String[] args) {\r\n\t\tB b = new B();\r\n        C c = new C();\r\n        b = c;\r\n        //ERROR cannont find symbol (b.password)\r\n        b.password = &quot;123&quot;;\r\n\t}\r\n}\r\n```\r\n\r\nActual problem I have is with HTTP response. I create my own response object that has context. This context can be ResponseContext or ResponseContextPagination that extends ResponseContext. So, my Response object has ResponseContext atribute, and I can set that atribute as ResponseContextPagination and when I return whole response to client, it has valid JSON:\r\n```\r\n{&quot;context&quot;:{&quot;hasMore&quot;:false,&quot;isLoggedIn&quot;:false}}\r\n```\r\nSo, I can&#39;t get hasMore attribute if I try to access it because ResponseContext does not have hasMore attribute but why can I then even set hasMore as ResponseContextPagination object? And it serializes fine into JSON.","title":"Why I can initialize extended class in other class as attribute?","body":"<p>I don't understand why this code works.</p>\n<p>I have 3 classes: A, B and C.</p>\n<p>Class A have class B as attribute.\nClass C extends class B. I can initialize class C and set is as attribute of class A.</p>\n<pre><code>public class A {\n    public B b;\n\n    public A(){}\n}\n\npublic class B {\n    public String username;\n\n    public B(){}\n}\n\npublic class C extends B {\n    public String password;\n\n    public C(){}\n}\n\npublic class Program\n{\n\n    public static void main(String[] args) {\n        A a = new A();\n        B b = new B();\n        C c = new C();\n        a.b = c;\n    }\n}\n</code></pre>\n<p>How can Java cast B as C if C is &quot;larger&quot;?\nIf I try to do it normally, you can't, for example:</p>\n<pre><code>public class Program\n{\n\n    public static void main(String[] args) {\n        B b = new C();\n        // ERROR cannont find symbol (b.password)\n        b.password = &quot;asd&quot;;\n    }\n}\n</code></pre>\n<p>or I try it like this:</p>\n<pre><code>public class Program\n{\n\n    public static void main(String[] args) {\n        B b = new B();\n        C c = new C();\n        b = c;\n        //ERROR cannont find symbol (b.password)\n        b.password = &quot;123&quot;;\n    }\n}\n</code></pre>\n<p>Actual problem I have is with HTTP response. I create my own response object that has context. This context can be ResponseContext or ResponseContextPagination that extends ResponseContext. So, my Response object has ResponseContext atribute, and I can set that atribute as ResponseContextPagination and when I return whole response to client, it has valid JSON:</p>\n<pre><code>{&quot;context&quot;:{&quot;hasMore&quot;:false,&quot;isLoggedIn&quot;:false}}\n</code></pre>\n<p>So, I can't get hasMore attribute if I try to access it because ResponseContext does not have hasMore attribute but why can I then even set hasMore as ResponseContextPagination object? And it serializes fine into JSON.</p>\n"},{"tags":["java","abstract-class","mybatis"],"comments":[{"owner":{"account_id":1314580,"reputation":3299,"user_id":1261766,"display_name":"ave"},"score":0,"creation_date":1683468553,"post_id":76177553,"comment_id":134368328,"body_markdown":"It seems that `&lt;discriminator&gt;` does not work in constructor mapping at the moment (version 3.5.13). Could you open a new issue on the [tracker](https://github.com/mybatis/mybatis-3/issues/new) with the details? If you are busy, I&#39;ll do it when I find the time.","body":"It seems that <code>&lt;discriminator&gt;</code> does not work in constructor mapping at the moment (version 3.5.13). Could you open a new issue on the <a href=\"https://github.com/mybatis/mybatis-3/issues/new\" rel=\"nofollow noreferrer\">tracker</a> with the details? If you are busy, I&#39;ll do it when I find the time."},{"owner":{"account_id":18149076,"reputation":111,"user_id":13202054,"display_name":"acanthite"},"score":0,"creation_date":1683815859,"post_id":76177553,"comment_id":134427172,"body_markdown":"@ave, if you can, please do it","body":"@ave, if you can, please do it"},{"owner":{"account_id":1314580,"reputation":3299,"user_id":1261766,"display_name":"ave"},"score":0,"creation_date":1689611061,"post_id":76177553,"comment_id":135234709,"body_markdown":"Here is the [issue](https://github.com/mybatis/mybatis-3/pull/2913) and the fix has been committed. It would be great if you could verify the fix using the [3.5.14-SNAPSHOT](https://github.com/mybatis/mybatis-3/wiki/Maven#snapshot) before we release the final version.","body":"Here is the <a href=\"https://github.com/mybatis/mybatis-3/pull/2913\" rel=\"nofollow noreferrer\">issue</a> and the fix has been committed. It would be great if you could verify the fix using the <a href=\"https://github.com/mybatis/mybatis-3/wiki/Maven#snapshot\" rel=\"nofollow noreferrer\">3.5.14-SNAPSHOT</a> before we release the final version."}],"owner":{"account_id":18149076,"reputation":111,"user_id":13202054,"display_name":"acanthite"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":214,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1683236651,"creation_date":1683236651,"question_id":76177553,"body_markdown":"Here are my classes:\r\n\r\n```java\r\n@Getter\r\n@ToString\r\n@AllArgsConstructor\r\n@RegisterForReflection\r\npublic class UtilityDetails {\r\n  private final int id;\r\n  private final string name;\r\n  private final LocalDateTime createdAt;\r\n  private final boolean archived;\r\n  private final int sortOrder;\r\n\r\n  private final TariffDetails currentTariff;\r\n}\r\n\r\n@RegisterForReflection\r\npublic abstract sealed class TariffDetails\r\n    permits TariffDualRateDetails,\r\n    TariffSingleRateDetails,\r\n    TariffSubscriptionDetails {\r\n\r\n  public abstract TariffId getId();\r\n  public abstract UtilityId getUtilityId();\r\n  public abstract LocalDateTime getCreatedAt();\r\n}\r\n\r\n@Getter\r\n@ToString\r\n@AllArgsConstructor\r\n@RegisterForReflection\r\npublic final class TariffDualRateDetails extends TariffDetails {\r\n    private final int id;\r\n    private final int utilityId;\r\n    private final LocalDateTime createdAt;\r\n    private final long threshold;\r\n    private final int unitSize;\r\n    private final long priceBelowThreshold;\r\n    private final long priceAboveThreshold;\r\n    private final ThresholdComparison thresholdComparison;\r\n}\r\n\r\npublic enum ThresholdComparison {\r\n  LESS_EQUALS,\r\n  STRICT_LESS;\r\n}\r\n\r\n@Getter\r\n@ToString\r\n@AllArgsConstructor\r\n@RegisterForReflection\r\npublic final class TariffSingleRateDetails extends TariffDetails {\r\n    private final int id;\r\n    private final int utilityId;\r\n    private final LocalDateTime createdAt;\r\n    private final long price;\r\n    private final int unitSize;\r\n}\r\n\r\n@Getter\r\n@ToString\r\n@AllArgsConstructor\r\n@RegisterForReflection\r\npublic final class TariffSubscriptionDetails extends TariffDetails {\r\n    private final int id;\r\n    private final int utilityId;\r\n    private final LocalDateTime createdAt;\r\n    private final long price;\r\n}\r\n```\r\n\r\nHere is my mapper:\r\n\r\n```xml\r\n    &lt;select id=&quot;getUtilityDetailsById&quot; resultMap=&quot;utilityDetails&quot;&gt;\r\n        select u.id                      as u_id,\r\n               u.name                    as u_name,\r\n               u.created_at              as u_created_at,\r\n               u.archived                as u_archived,\r\n               u.sort_order              as u_sort_order,\r\n               t.id                      as t_id,\r\n               t.created_at              as t_created_at,\r\n               case\r\n                   when tdr.tariff_id is not null then &#39;DUAL_RATE&#39;\r\n                   when tsr.tariff_id is not null then &#39;SINGLE_RATE&#39;\r\n                   when ts.tariff_id is not null then &#39;SUBSCRIPTION&#39;\r\n                   end                   as tariff_type,\r\n               tdr.threshold             as tdr_threshold,\r\n               tdr.unit_size             as tdr_unit_size,\r\n               tdr.threshold_comparison  as tdr_threshold_comparison,\r\n               tdr.price_above_threshold as tdr_price_above_threshold,\r\n               tdr.price_below_threshold as tdr_price_below_threshold,\r\n               tsr.unit_size             as tsr_unit_size,\r\n               tsr.price                 as tsr_price,\r\n               ts.price                  as ts_price\r\n\r\n        from utility u\r\n                 inner join tariff t on u.id = t.utility_id\r\n                 left join tariff_dual_rate tdr on t.id = tdr.tariff_id\r\n                 left join tariff_single_rate tsr on t.id = tsr.tariff_id\r\n                 left join tariff_subscription ts on t.id = ts.tariff_id\r\n        order by t.created_at desc\r\n        limit 1\r\n    &lt;/select&gt;\r\n\r\n    &lt;resultMap id=&quot;utilityDetails&quot; type=&quot;org.upc.model.UtilityDetails&quot;&gt;\r\n        &lt;constructor&gt;\r\n            &lt;idArg name=&quot;id&quot; column=&quot;u_id&quot;/&gt;\r\n            &lt;arg name=&quot;name&quot; column=&quot;u_name&quot;/&gt;\r\n            &lt;arg name=&quot;createdAt&quot; column=&quot;u_created_at&quot;/&gt;\r\n            &lt;arg name=&quot;archived&quot; column=&quot;u_archived&quot;/&gt;\r\n            &lt;arg name=&quot;sortOrder&quot; column=&quot;u_sort_order&quot;/&gt;\r\n            &lt;arg name=&quot;currentTariff&quot; resultMap=&quot;tariffMap&quot;/&gt;\r\n        &lt;/constructor&gt;\r\n    &lt;/resultMap&gt;\r\n\r\n    &lt;resultMap id=&quot;tariffDualRate&quot; type=&quot;org.upc.model.TariffDualRateDetails&quot; extends=&quot;tariffMap&quot;&gt;\r\n        &lt;constructor&gt;\r\n            &lt;idArg name=&quot;id&quot; column=&quot;t_id&quot;/&gt;\r\n            &lt;arg name=&quot;utilityId&quot; column=&quot;u_id&quot;/&gt;\r\n            &lt;arg name=&quot;createdAt&quot; column=&quot;t_created_at&quot;/&gt;\r\n            &lt;arg name=&quot;threshold&quot; column=&quot;tdr_threshold&quot;/&gt;\r\n            &lt;arg name=&quot;unitSize&quot; column=&quot;tdr_unit_size&quot;/&gt;\r\n            &lt;arg name=&quot;thresholdComparison&quot; column=&quot;tdr_threshold_comparison&quot;/&gt;\r\n            &lt;arg name=&quot;priceAboveThreshold&quot; column=&quot;tdr_price_above_threshold&quot;/&gt;\r\n            &lt;arg name=&quot;priceBelowThreshold&quot; column=&quot;tdr_price_below_threshold&quot;/&gt;\r\n        &lt;/constructor&gt;\r\n    &lt;/resultMap&gt;\r\n\r\n    &lt;resultMap id=&quot;tariffSingleRate&quot; type=&quot;org.upc.model.TariffSingleRateDetails&quot; extends=&quot;tariffMap&quot;&gt;\r\n        &lt;constructor&gt;\r\n            &lt;idArg name=&quot;id&quot; column=&quot;t_id&quot;/&gt;\r\n            &lt;arg name=&quot;utilityId&quot; column=&quot;u_id&quot;/&gt;\r\n            &lt;arg name=&quot;createdAt&quot; column=&quot;t_created_at&quot;/&gt;\r\n            &lt;arg name=&quot;price&quot; column=&quot;tsr_price&quot;/&gt;\r\n            &lt;arg name=&quot;unitSize&quot; column=&quot;tsr_unit_size&quot;/&gt;\r\n        &lt;/constructor&gt;\r\n    &lt;/resultMap&gt;\r\n\r\n    &lt;resultMap id=&quot;tariffSubscription&quot; type=&quot;org.upc.model.TariffSubscriptionDetails&quot; extends=&quot;tariffMap&quot;&gt;\r\n        &lt;constructor&gt;\r\n            &lt;idArg name=&quot;id&quot; column=&quot;t_id&quot;/&gt;\r\n            &lt;arg name=&quot;utilityId&quot; column=&quot;u_id&quot;/&gt;\r\n            &lt;arg name=&quot;createdAt&quot; column=&quot;t_created_at&quot;/&gt;\r\n            &lt;arg name=&quot;price&quot; column=&quot;ts_price&quot;/&gt;\r\n        &lt;/constructor&gt;\r\n    &lt;/resultMap&gt;\r\n\r\n    &lt;resultMap id=&quot;tariffMap&quot; type=&quot;org.upc.model.TariffDetails&quot;&gt;\r\n        &lt;discriminator javaType=&quot;string&quot; column=&quot;tariff_type&quot;&gt;\r\n            &lt;case value=&quot;DUAL_RATE&quot; resultMap=&quot;tariffDualRate&quot;/&gt;\r\n            &lt;case value=&quot;SINGLE_RATE&quot; resultMap=&quot;tariffSingleRate&quot;/&gt;\r\n            &lt;case value=&quot;SUBSCRIPTION&quot; resultMap=&quot;tariffSubscription&quot;/&gt;\r\n        &lt;/discriminator&gt;\r\n    &lt;/resultMap&gt;\r\n```\r\n\r\nFor some reason it tries to instantiate that abstract class `TariffDetails` and fails, because it&#39;s, well, an abstract class:\r\n\r\n```\r\norg.apache.ibatis.exceptions.PersistenceException: \r\n### Error querying database.  Cause: org.apache.ibatis.reflection.ReflectionException: Error instantiating class org.upc.model.TariffDetails with invalid types () or values (). Cause: java.lang.InstantiationException\r\n### The error may exist in org/upc/repository/UtilityRepository.xml\r\n### The error may involve org.upc.repository.UtilityRepository.getUtilityDetailsById\r\n### The error occurred while handling results\r\n### SQL: select u.id                      as u_id,                u.name                    as u_name,                u.created_at              as u_created_at,                u.archived                as u_archived,                u.sort_order              as u_sort_order,                t.id                      as t_id,                t.created_at              as t_created_at,                case                    when tdr.tariff_id is not null then &#39;DUAL_RATE&#39;                    when tsr.tariff_id is not null then &#39;SINGLE_RATE&#39;                    when ts.tariff_id is not null then &#39;SUBSCRIPTION&#39;                    end                   as tariff_type,                tdr.threshold             as tdr_threshold,                tdr.unit_size             as tdr_unit_size,                tdr.threshold_comparison  as tdr_threshold_comparison,                tdr.price_above_threshold as tdr_price_above_threshold,                tdr.price_below_threshold as tdr_price_below_threshold,                tsr.unit_size             as tsr_unit_size,                tsr.price                 as tsr_price,                ts.price                  as ts_price          from utility u                  inner join tariff t on u.id = t.utility_id                  left join tariff_dual_rate tdr on t.id = tdr.tariff_id                  left join tariff_single_rate tsr on t.id = tsr.tariff_id                  left join tariff_subscription ts on t.id = ts.tariff_id         order by t.created_at desc         limit 1\r\n### Cause: org.apache.ibatis.reflection.ReflectionException: Error instantiating class org.upc.model.TariffDetails with invalid types () or values (). Cause: java.lang.InstantiationException\r\n\tat org.apache.ibatis.exceptions.ExceptionFactory.wrapException(ExceptionFactory.java:30)\r\n\tat org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:153)\r\n\tat org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:145)\r\n\tat org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:140)\r\n\tat org.apache.ibatis.session.defaults.DefaultSqlSession.selectOne(DefaultSqlSession.java:76)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:578)\r\n\tat io.quarkiverse.mybatis.runtime.TransactionalSqlSession$TransactionalSqlSessionInterceptor.invoke(TransactionalSqlSession.java:197)\r\n\tat jdk.proxy3/jdk.proxy3.$Proxy55.selectOne(Unknown Source)\r\n\tat io.quarkiverse.mybatis.runtime.TransactionalSqlSession.selectOne(TransactionalSqlSession.java:46)\r\n\tat org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:87)\r\n\tat org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:145)\r\n\tat org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:86)\r\n\tat jdk.proxy5/jdk.proxy5.$Proxy62.getUtilityDetailsById(Unknown Source)\r\n\tat org.upc.services.UtilityService.getUtilityDetailsById(UtilityService.java:38)\r\n\tat org.upc.services.UtilityService_ClientProxy.getUtilityDetailsById(Unknown Source)\r\n\tat org.upc.resources.UtilityResource.getUtilityDetailsById(UtilityResource.java:35)\r\n\tat org.upc.resources.UtilityResource$quarkusrestinvoker$getUtilityDetailsById_24450c22d8569dcc4e8cbc86dde64aa8cf8ba2ac.invoke(Unknown Source)\r\n\tat org.jboss.resteasy.reactive.server.handlers.InvocationHandler.handle(InvocationHandler.java:29)\r\n\tat io.quarkus.resteasy.reactive.server.runtime.QuarkusResteasyReactiveRequestContext.invokeHandler(QuarkusResteasyReactiveRequestContext.java:141)\r\n\tat org.jboss.resteasy.reactive.common.core.AbstractResteasyReactiveContext.run(AbstractResteasyReactiveContext.java:145)\r\n\tat io.quarkus.vertx.core.runtime.VertxCoreRecorder$14.runWith(VertxCoreRecorder.java:576)\r\n\tat org.jboss.threads.EnhancedQueueExecutor$Task.run(EnhancedQueueExecutor.java:2513)\r\n\tat org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1538)\r\n\tat org.jboss.threads.DelegatingRunnable.run(DelegatingRunnable.java:29)\r\n\tat org.jboss.threads.ThreadLocalResettingRunnable.run(ThreadLocalResettingRunnable.java:29)\r\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1623)\r\nCaused by: org.apache.ibatis.reflection.ReflectionException: Error instantiating class org.upc.model.TariffDetails with invalid types () or values (). Cause: java.lang.InstantiationException\r\n\tat org.apache.ibatis.reflection.factory.DefaultObjectFactory.instantiateClass(DefaultObjectFactory.java:88)\r\n\tat org.apache.ibatis.reflection.factory.DefaultObjectFactory.create(DefaultObjectFactory.java:53)\r\n\tat org.apache.ibatis.reflection.factory.DefaultObjectFactory.create(DefaultObjectFactory.java:45)\r\n\tat org.apache.ibatis.executor.resultset.DefaultResultSetHandler.createResultObject(DefaultResultSetHandler.java:667)\r\n\tat org.apache.ibatis.executor.resultset.DefaultResultSetHandler.createResultObject(DefaultResultSetHandler.java:642)\r\n\tat org.apache.ibatis.executor.resultset.DefaultResultSetHandler.getRowValue(DefaultResultSetHandler.java:404)\r\n\tat org.apache.ibatis.executor.resultset.DefaultResultSetHandler.createParameterizedResultObject(DefaultResultSetHandler.java:686)\r\n\tat org.apache.ibatis.executor.resultset.DefaultResultSetHandler.createResultObject(DefaultResultSetHandler.java:665)\r\n\tat org.apache.ibatis.executor.resultset.DefaultResultSetHandler.createResultObject(DefaultResultSetHandler.java:642)\r\n\tat org.apache.ibatis.executor.resultset.DefaultResultSetHandler.getRowValue(DefaultResultSetHandler.java:432)\r\n\tat org.apache.ibatis.executor.resultset.DefaultResultSetHandler.handleRowValuesForNestedResultMap(DefaultResultSetHandler.java:988)\r\n\tat org.apache.ibatis.executor.resultset.DefaultResultSetHandler.handleRowValues(DefaultResultSetHandler.java:333)\r\n\tat org.apache.ibatis.executor.resultset.DefaultResultSetHandler.handleResultSet(DefaultResultSetHandler.java:308)\r\n\tat org.apache.ibatis.executor.resultset.DefaultResultSetHandler.handleResultSets(DefaultResultSetHandler.java:201)\r\n\tat org.apache.ibatis.executor.statement.PreparedStatementHandler.query(PreparedStatementHandler.java:65)\r\n\tat org.apache.ibatis.executor.statement.RoutingStatementHandler.query(RoutingStatementHandler.java:79)\r\n\tat org.apache.ibatis.executor.SimpleExecutor.doQuery(SimpleExecutor.java:63)\r\n\tat org.apache.ibatis.executor.BaseExecutor.queryFromDatabase(BaseExecutor.java:325)\r\n\tat org.apache.ibatis.executor.BaseExecutor.query(BaseExecutor.java:156)\r\n\tat org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:109)\r\n\tat org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:89)\r\n\tat org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:151)\r\n\t... 26 more\r\nCaused by: java.lang.InstantiationException\r\n\tat java.base/jdk.internal.reflect.InstantiationExceptionConstructorAccessorImpl.newInstance(InstantiationExceptionConstructorAccessorImpl.java:48)\r\n\tat java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:500)\r\n\tat java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:484)\r\n\tat org.apache.ibatis.reflection.factory.DefaultObjectFactory.instantiateClass(DefaultObjectFactory.java:62)\r\n\t... 47 more\r\n```\r\n\r\nHow do I make it instantiate a correct child class?","title":"How to map abstract class result in MyBatis?","body":"<p>Here are my classes:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Getter\n@ToString\n@AllArgsConstructor\n@RegisterForReflection\npublic class UtilityDetails {\n  private final int id;\n  private final string name;\n  private final LocalDateTime createdAt;\n  private final boolean archived;\n  private final int sortOrder;\n\n  private final TariffDetails currentTariff;\n}\n\n@RegisterForReflection\npublic abstract sealed class TariffDetails\n    permits TariffDualRateDetails,\n    TariffSingleRateDetails,\n    TariffSubscriptionDetails {\n\n  public abstract TariffId getId();\n  public abstract UtilityId getUtilityId();\n  public abstract LocalDateTime getCreatedAt();\n}\n\n@Getter\n@ToString\n@AllArgsConstructor\n@RegisterForReflection\npublic final class TariffDualRateDetails extends TariffDetails {\n    private final int id;\n    private final int utilityId;\n    private final LocalDateTime createdAt;\n    private final long threshold;\n    private final int unitSize;\n    private final long priceBelowThreshold;\n    private final long priceAboveThreshold;\n    private final ThresholdComparison thresholdComparison;\n}\n\npublic enum ThresholdComparison {\n  LESS_EQUALS,\n  STRICT_LESS;\n}\n\n@Getter\n@ToString\n@AllArgsConstructor\n@RegisterForReflection\npublic final class TariffSingleRateDetails extends TariffDetails {\n    private final int id;\n    private final int utilityId;\n    private final LocalDateTime createdAt;\n    private final long price;\n    private final int unitSize;\n}\n\n@Getter\n@ToString\n@AllArgsConstructor\n@RegisterForReflection\npublic final class TariffSubscriptionDetails extends TariffDetails {\n    private final int id;\n    private final int utilityId;\n    private final LocalDateTime createdAt;\n    private final long price;\n}\n</code></pre>\n<p>Here is my mapper:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;select id=&quot;getUtilityDetailsById&quot; resultMap=&quot;utilityDetails&quot;&gt;\n        select u.id                      as u_id,\n               u.name                    as u_name,\n               u.created_at              as u_created_at,\n               u.archived                as u_archived,\n               u.sort_order              as u_sort_order,\n               t.id                      as t_id,\n               t.created_at              as t_created_at,\n               case\n                   when tdr.tariff_id is not null then 'DUAL_RATE'\n                   when tsr.tariff_id is not null then 'SINGLE_RATE'\n                   when ts.tariff_id is not null then 'SUBSCRIPTION'\n                   end                   as tariff_type,\n               tdr.threshold             as tdr_threshold,\n               tdr.unit_size             as tdr_unit_size,\n               tdr.threshold_comparison  as tdr_threshold_comparison,\n               tdr.price_above_threshold as tdr_price_above_threshold,\n               tdr.price_below_threshold as tdr_price_below_threshold,\n               tsr.unit_size             as tsr_unit_size,\n               tsr.price                 as tsr_price,\n               ts.price                  as ts_price\n\n        from utility u\n                 inner join tariff t on u.id = t.utility_id\n                 left join tariff_dual_rate tdr on t.id = tdr.tariff_id\n                 left join tariff_single_rate tsr on t.id = tsr.tariff_id\n                 left join tariff_subscription ts on t.id = ts.tariff_id\n        order by t.created_at desc\n        limit 1\n    &lt;/select&gt;\n\n    &lt;resultMap id=&quot;utilityDetails&quot; type=&quot;org.upc.model.UtilityDetails&quot;&gt;\n        &lt;constructor&gt;\n            &lt;idArg name=&quot;id&quot; column=&quot;u_id&quot;/&gt;\n            &lt;arg name=&quot;name&quot; column=&quot;u_name&quot;/&gt;\n            &lt;arg name=&quot;createdAt&quot; column=&quot;u_created_at&quot;/&gt;\n            &lt;arg name=&quot;archived&quot; column=&quot;u_archived&quot;/&gt;\n            &lt;arg name=&quot;sortOrder&quot; column=&quot;u_sort_order&quot;/&gt;\n            &lt;arg name=&quot;currentTariff&quot; resultMap=&quot;tariffMap&quot;/&gt;\n        &lt;/constructor&gt;\n    &lt;/resultMap&gt;\n\n    &lt;resultMap id=&quot;tariffDualRate&quot; type=&quot;org.upc.model.TariffDualRateDetails&quot; extends=&quot;tariffMap&quot;&gt;\n        &lt;constructor&gt;\n            &lt;idArg name=&quot;id&quot; column=&quot;t_id&quot;/&gt;\n            &lt;arg name=&quot;utilityId&quot; column=&quot;u_id&quot;/&gt;\n            &lt;arg name=&quot;createdAt&quot; column=&quot;t_created_at&quot;/&gt;\n            &lt;arg name=&quot;threshold&quot; column=&quot;tdr_threshold&quot;/&gt;\n            &lt;arg name=&quot;unitSize&quot; column=&quot;tdr_unit_size&quot;/&gt;\n            &lt;arg name=&quot;thresholdComparison&quot; column=&quot;tdr_threshold_comparison&quot;/&gt;\n            &lt;arg name=&quot;priceAboveThreshold&quot; column=&quot;tdr_price_above_threshold&quot;/&gt;\n            &lt;arg name=&quot;priceBelowThreshold&quot; column=&quot;tdr_price_below_threshold&quot;/&gt;\n        &lt;/constructor&gt;\n    &lt;/resultMap&gt;\n\n    &lt;resultMap id=&quot;tariffSingleRate&quot; type=&quot;org.upc.model.TariffSingleRateDetails&quot; extends=&quot;tariffMap&quot;&gt;\n        &lt;constructor&gt;\n            &lt;idArg name=&quot;id&quot; column=&quot;t_id&quot;/&gt;\n            &lt;arg name=&quot;utilityId&quot; column=&quot;u_id&quot;/&gt;\n            &lt;arg name=&quot;createdAt&quot; column=&quot;t_created_at&quot;/&gt;\n            &lt;arg name=&quot;price&quot; column=&quot;tsr_price&quot;/&gt;\n            &lt;arg name=&quot;unitSize&quot; column=&quot;tsr_unit_size&quot;/&gt;\n        &lt;/constructor&gt;\n    &lt;/resultMap&gt;\n\n    &lt;resultMap id=&quot;tariffSubscription&quot; type=&quot;org.upc.model.TariffSubscriptionDetails&quot; extends=&quot;tariffMap&quot;&gt;\n        &lt;constructor&gt;\n            &lt;idArg name=&quot;id&quot; column=&quot;t_id&quot;/&gt;\n            &lt;arg name=&quot;utilityId&quot; column=&quot;u_id&quot;/&gt;\n            &lt;arg name=&quot;createdAt&quot; column=&quot;t_created_at&quot;/&gt;\n            &lt;arg name=&quot;price&quot; column=&quot;ts_price&quot;/&gt;\n        &lt;/constructor&gt;\n    &lt;/resultMap&gt;\n\n    &lt;resultMap id=&quot;tariffMap&quot; type=&quot;org.upc.model.TariffDetails&quot;&gt;\n        &lt;discriminator javaType=&quot;string&quot; column=&quot;tariff_type&quot;&gt;\n            &lt;case value=&quot;DUAL_RATE&quot; resultMap=&quot;tariffDualRate&quot;/&gt;\n            &lt;case value=&quot;SINGLE_RATE&quot; resultMap=&quot;tariffSingleRate&quot;/&gt;\n            &lt;case value=&quot;SUBSCRIPTION&quot; resultMap=&quot;tariffSubscription&quot;/&gt;\n        &lt;/discriminator&gt;\n    &lt;/resultMap&gt;\n</code></pre>\n<p>For some reason it tries to instantiate that abstract class <code>TariffDetails</code> and fails, because it's, well, an abstract class:</p>\n<pre><code>org.apache.ibatis.exceptions.PersistenceException: \n### Error querying database.  Cause: org.apache.ibatis.reflection.ReflectionException: Error instantiating class org.upc.model.TariffDetails with invalid types () or values (). Cause: java.lang.InstantiationException\n### The error may exist in org/upc/repository/UtilityRepository.xml\n### The error may involve org.upc.repository.UtilityRepository.getUtilityDetailsById\n### The error occurred while handling results\n### SQL: select u.id                      as u_id,                u.name                    as u_name,                u.created_at              as u_created_at,                u.archived                as u_archived,                u.sort_order              as u_sort_order,                t.id                      as t_id,                t.created_at              as t_created_at,                case                    when tdr.tariff_id is not null then 'DUAL_RATE'                    when tsr.tariff_id is not null then 'SINGLE_RATE'                    when ts.tariff_id is not null then 'SUBSCRIPTION'                    end                   as tariff_type,                tdr.threshold             as tdr_threshold,                tdr.unit_size             as tdr_unit_size,                tdr.threshold_comparison  as tdr_threshold_comparison,                tdr.price_above_threshold as tdr_price_above_threshold,                tdr.price_below_threshold as tdr_price_below_threshold,                tsr.unit_size             as tsr_unit_size,                tsr.price                 as tsr_price,                ts.price                  as ts_price          from utility u                  inner join tariff t on u.id = t.utility_id                  left join tariff_dual_rate tdr on t.id = tdr.tariff_id                  left join tariff_single_rate tsr on t.id = tsr.tariff_id                  left join tariff_subscription ts on t.id = ts.tariff_id         order by t.created_at desc         limit 1\n### Cause: org.apache.ibatis.reflection.ReflectionException: Error instantiating class org.upc.model.TariffDetails with invalid types () or values (). Cause: java.lang.InstantiationException\n    at org.apache.ibatis.exceptions.ExceptionFactory.wrapException(ExceptionFactory.java:30)\n    at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:153)\n    at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:145)\n    at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:140)\n    at org.apache.ibatis.session.defaults.DefaultSqlSession.selectOne(DefaultSqlSession.java:76)\n    at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:578)\n    at io.quarkiverse.mybatis.runtime.TransactionalSqlSession$TransactionalSqlSessionInterceptor.invoke(TransactionalSqlSession.java:197)\n    at jdk.proxy3/jdk.proxy3.$Proxy55.selectOne(Unknown Source)\n    at io.quarkiverse.mybatis.runtime.TransactionalSqlSession.selectOne(TransactionalSqlSession.java:46)\n    at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:87)\n    at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:145)\n    at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:86)\n    at jdk.proxy5/jdk.proxy5.$Proxy62.getUtilityDetailsById(Unknown Source)\n    at org.upc.services.UtilityService.getUtilityDetailsById(UtilityService.java:38)\n    at org.upc.services.UtilityService_ClientProxy.getUtilityDetailsById(Unknown Source)\n    at org.upc.resources.UtilityResource.getUtilityDetailsById(UtilityResource.java:35)\n    at org.upc.resources.UtilityResource$quarkusrestinvoker$getUtilityDetailsById_24450c22d8569dcc4e8cbc86dde64aa8cf8ba2ac.invoke(Unknown Source)\n    at org.jboss.resteasy.reactive.server.handlers.InvocationHandler.handle(InvocationHandler.java:29)\n    at io.quarkus.resteasy.reactive.server.runtime.QuarkusResteasyReactiveRequestContext.invokeHandler(QuarkusResteasyReactiveRequestContext.java:141)\n    at org.jboss.resteasy.reactive.common.core.AbstractResteasyReactiveContext.run(AbstractResteasyReactiveContext.java:145)\n    at io.quarkus.vertx.core.runtime.VertxCoreRecorder$14.runWith(VertxCoreRecorder.java:576)\n    at org.jboss.threads.EnhancedQueueExecutor$Task.run(EnhancedQueueExecutor.java:2513)\n    at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1538)\n    at org.jboss.threads.DelegatingRunnable.run(DelegatingRunnable.java:29)\n    at org.jboss.threads.ThreadLocalResettingRunnable.run(ThreadLocalResettingRunnable.java:29)\n    at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\n    at java.base/java.lang.Thread.run(Thread.java:1623)\nCaused by: org.apache.ibatis.reflection.ReflectionException: Error instantiating class org.upc.model.TariffDetails with invalid types () or values (). Cause: java.lang.InstantiationException\n    at org.apache.ibatis.reflection.factory.DefaultObjectFactory.instantiateClass(DefaultObjectFactory.java:88)\n    at org.apache.ibatis.reflection.factory.DefaultObjectFactory.create(DefaultObjectFactory.java:53)\n    at org.apache.ibatis.reflection.factory.DefaultObjectFactory.create(DefaultObjectFactory.java:45)\n    at org.apache.ibatis.executor.resultset.DefaultResultSetHandler.createResultObject(DefaultResultSetHandler.java:667)\n    at org.apache.ibatis.executor.resultset.DefaultResultSetHandler.createResultObject(DefaultResultSetHandler.java:642)\n    at org.apache.ibatis.executor.resultset.DefaultResultSetHandler.getRowValue(DefaultResultSetHandler.java:404)\n    at org.apache.ibatis.executor.resultset.DefaultResultSetHandler.createParameterizedResultObject(DefaultResultSetHandler.java:686)\n    at org.apache.ibatis.executor.resultset.DefaultResultSetHandler.createResultObject(DefaultResultSetHandler.java:665)\n    at org.apache.ibatis.executor.resultset.DefaultResultSetHandler.createResultObject(DefaultResultSetHandler.java:642)\n    at org.apache.ibatis.executor.resultset.DefaultResultSetHandler.getRowValue(DefaultResultSetHandler.java:432)\n    at org.apache.ibatis.executor.resultset.DefaultResultSetHandler.handleRowValuesForNestedResultMap(DefaultResultSetHandler.java:988)\n    at org.apache.ibatis.executor.resultset.DefaultResultSetHandler.handleRowValues(DefaultResultSetHandler.java:333)\n    at org.apache.ibatis.executor.resultset.DefaultResultSetHandler.handleResultSet(DefaultResultSetHandler.java:308)\n    at org.apache.ibatis.executor.resultset.DefaultResultSetHandler.handleResultSets(DefaultResultSetHandler.java:201)\n    at org.apache.ibatis.executor.statement.PreparedStatementHandler.query(PreparedStatementHandler.java:65)\n    at org.apache.ibatis.executor.statement.RoutingStatementHandler.query(RoutingStatementHandler.java:79)\n    at org.apache.ibatis.executor.SimpleExecutor.doQuery(SimpleExecutor.java:63)\n    at org.apache.ibatis.executor.BaseExecutor.queryFromDatabase(BaseExecutor.java:325)\n    at org.apache.ibatis.executor.BaseExecutor.query(BaseExecutor.java:156)\n    at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:109)\n    at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:89)\n    at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:151)\n    ... 26 more\nCaused by: java.lang.InstantiationException\n    at java.base/jdk.internal.reflect.InstantiationExceptionConstructorAccessorImpl.newInstance(InstantiationExceptionConstructorAccessorImpl.java:48)\n    at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:500)\n    at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:484)\n    at org.apache.ibatis.reflection.factory.DefaultObjectFactory.instantiateClass(DefaultObjectFactory.java:62)\n    ... 47 more\n</code></pre>\n<p>How do I make it instantiate a correct child class?</p>\n"},{"tags":["java","saml","adfs","rest-client"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1683266624,"post_id":76177547,"comment_id":134343326,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."},{"owner":{"account_id":12825230,"reputation":3,"user_id":9278539,"display_name":"Ranjit Singh"},"score":0,"creation_date":1684271368,"post_id":76177547,"comment_id":134493460,"body_markdown":"I have very vague information. I need to start from scratch and want to understand what are the basic steps or any library I could use to authenticate my Java API with on-premise SharePoint which is using ADFS and SAML 2.0 authentication.","body":"I have very vague information. I need to start from scratch and want to understand what are the basic steps or any library I could use to authenticate my Java API with on-premise SharePoint which is using ADFS and SAML 2.0 authentication."}],"owner":{"account_id":12825230,"reputation":3,"user_id":9278539,"display_name":"Ranjit Singh"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":80,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683236595,"creation_date":1683236595,"question_id":76177547,"body_markdown":"I have a very basic problem to share, I am working on a small piece of application which is reading data form SharePoint On-premise API. This API is recently moved to ADFS on premise for authentication and I need to make changes to our code for this authentication. I have already gone through the documentation and understand the SAML/ADFS architecture. Could anyone please guide me to the Sample Java client code to server this purpose?\r\n\r\n\r\nThanks in advance!","title":"How to call SharePoint API which uses ADFS/SAML as authentication or authorization","body":"<p>I have a very basic problem to share, I am working on a small piece of application which is reading data form SharePoint On-premise API. This API is recently moved to ADFS on premise for authentication and I need to make changes to our code for this authentication. I have already gone through the documentation and understand the SAML/ADFS architecture. Could anyone please guide me to the Sample Java client code to server this purpose?</p>\n<p>Thanks in advance!</p>\n"},{"tags":["java","excel","apache-poi"],"owner":{"account_id":11699486,"reputation":226,"user_id":13751385,"display_name":"Aria"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":79,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683236348,"creation_date":1683236348,"question_id":76177527,"body_markdown":"In `poi`, I am curious to know when [`CreationHelper#createClientAnchor()`][1] is helpful. An example would be appreciated.\r\n\r\n`ClientAnchor` can be created using [`Drawing#createAnchor(int, int, int, int, int, int, int, int)`][2], and to me, that is a logical place as `Drawing` is per `Sheet` and anchor is needed for drawings.\r\n\r\nWhat I don&#39;t understand is the use case of `CreationHelper#createClientAnchor()`, especially as `CreationHelper` is per `Workbook`.\r\n\r\n  [1]: https://poi.apache.org/apidocs/dev/org/apache/poi/ss/usermodel/CreationHelper.html\r\n  [2]: https://poi.apache.org/apidocs/dev/org/apache/poi/ss/usermodel/Drawing.html","title":"Comparing two ways of creating `ClientAnchor` in POI excel","body":"<p>In <code>poi</code>, I am curious to know when <a href=\"https://poi.apache.org/apidocs/dev/org/apache/poi/ss/usermodel/CreationHelper.html\" rel=\"nofollow noreferrer\"><code>CreationHelper#createClientAnchor()</code></a> is helpful. An example would be appreciated.</p>\n<p><code>ClientAnchor</code> can be created using <a href=\"https://poi.apache.org/apidocs/dev/org/apache/poi/ss/usermodel/Drawing.html\" rel=\"nofollow noreferrer\"><code>Drawing#createAnchor(int, int, int, int, int, int, int, int)</code></a>, and to me, that is a logical place as <code>Drawing</code> is per <code>Sheet</code> and anchor is needed for drawings.</p>\n<p>What I don't understand is the use case of <code>CreationHelper#createClientAnchor()</code>, especially as <code>CreationHelper</code> is per <code>Workbook</code>.</p>\n"},{"tags":["java","eclipse","jframe","display","dispose"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1683104409,"post_id":76162059,"comment_id":134313890,"body_markdown":"have you checked with layouts? Where on your Panel is your label added? ..","body":"have you checked with layouts? Where on your Panel is your label added? .."},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1683104769,"post_id":76162059,"comment_id":134313961,"body_markdown":"Use a Swing Timer instead of Thread.sleep","body":"Use a Swing Timer instead of Thread.sleep"},{"owner":{"account_id":4279913,"reputation":3623,"user_id":3499626,"accept_rate":89,"display_name":"jhamon"},"score":1,"creation_date":1683106120,"post_id":76162059,"comment_id":134314277,"body_markdown":"unrelated but nice to read: [java naming convention](https://www.oracle.com/java/technologies/javase/codeconventions-namingconventions.html)","body":"unrelated but nice to read: <a href=\"https://www.oracle.com/java/technologies/javase/codeconventions-namingconventions.html\" rel=\"nofollow noreferrer\">java naming convention</a>"}],"answers":[{"tags":[],"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1683236170,"creation_date":1683105418,"answer_id":76162236,"question_id":76162059,"body_markdown":"Swing is single threaded and not thread safe.  This means that you can&#39;t perform long running or blocking operations (like `Thread.sleep`) within the context of the Event Dispatching Thread.  It also means that you shouldn&#39;t update the UI or any state the UI relies on from outside the context of the Event Dispatching Thread.\r\n\r\nSee [Concurrency in Swing](https://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html) for more details.\r\n\r\nEssentially, the `Thread.sleep` is likely preventing the window from been painted.\r\n\r\nInstead, use a Swing `Timer`, for example...\r\n\r\n\r\n    import java.awt.EventQueue;\r\n    import java.awt.GridBagLayout;\r\n    import java.awt.event.ActionEvent;\r\n    import java.awt.event.ActionListener;\r\n    import javax.swing.JButton;\r\n    import javax.swing.JFrame;\r\n    import javax.swing.JLabel;\r\n    import javax.swing.JPanel;\r\n    import javax.swing.Timer;\r\n    import javax.swing.border.EmptyBorder;\r\n\r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            new Main();\r\n        }\r\n\r\n        public Main() {\r\n            EventQueue.invokeLater(new Runnable() {\r\n                @Override\r\n                public void run() {\r\n                    JFrame frame = new JFrame();\r\n                    frame.add(new TestPane());\r\n                    frame.pack();\r\n                    frame.setLocationRelativeTo(null);\r\n                    frame.setVisible(true);\r\n                }\r\n            });\r\n        }\r\n\r\n        public class TestPane extends JPanel {\r\n\r\n            public TestPane() {\r\n                setLayout(new GridBagLayout());\r\n                setBorder(new EmptyBorder(32, 32, 32, 32));\r\n\r\n                JButton btn = new JButton(&quot;Show me the money&quot;);\r\n                btn.addActionListener(new ActionListener() {\r\n                    @Override\r\n                    public void actionPerformed(ActionEvent e) {\r\n                        JFrame popup = new JFrame();\r\n                        JLabel label = new JLabel(&quot;Money&quot;);\r\n                        label.setBorder(new EmptyBorder(32, 32, 32, 32));\r\n                        popup.add(label);\r\n                        popup.pack();\r\n                        popup.setLocationRelativeTo(TestPane.this);\r\n                        popup.setVisible(true);\r\n                        Timer timer = new Timer(3000, new ActionListener() {\r\n                            @Override\r\n                            public void actionPerformed(ActionEvent e) {\r\n                                popup.dispose();\r\n                            }\r\n                        });\r\n                        timer.setRepeats(false);\r\n                        timer.start();\r\n                    }\r\n                });\r\n                add(btn);\r\n            }\r\n\r\n        }\r\n    }\r\n\r\nSee [How to Use Swing Timers](https://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html) for more details","title":"Display and then close a frame in Java","body":"<p>Swing is single threaded and not thread safe.  This means that you can't perform long running or blocking operations (like <code>Thread.sleep</code>) within the context of the Event Dispatching Thread.  It also means that you shouldn't update the UI or any state the UI relies on from outside the context of the Event Dispatching Thread.</p>\n<p>See <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html\" rel=\"nofollow noreferrer\">Concurrency in Swing</a> for more details.</p>\n<p>Essentially, the <code>Thread.sleep</code> is likely preventing the window from been painted.</p>\n<p>Instead, use a Swing <code>Timer</code>, for example...</p>\n<pre><code>import java.awt.EventQueue;\nimport java.awt.GridBagLayout;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\nimport javax.swing.JButton;\nimport javax.swing.JFrame;\nimport javax.swing.JLabel;\nimport javax.swing.JPanel;\nimport javax.swing.Timer;\nimport javax.swing.border.EmptyBorder;\n\npublic class Main {\n    public static void main(String[] args) {\n        new Main();\n    }\n\n    public Main() {\n        EventQueue.invokeLater(new Runnable() {\n            @Override\n            public void run() {\n                JFrame frame = new JFrame();\n                frame.add(new TestPane());\n                frame.pack();\n                frame.setLocationRelativeTo(null);\n                frame.setVisible(true);\n            }\n        });\n    }\n\n    public class TestPane extends JPanel {\n\n        public TestPane() {\n            setLayout(new GridBagLayout());\n            setBorder(new EmptyBorder(32, 32, 32, 32));\n\n            JButton btn = new JButton(&quot;Show me the money&quot;);\n            btn.addActionListener(new ActionListener() {\n                @Override\n                public void actionPerformed(ActionEvent e) {\n                    JFrame popup = new JFrame();\n                    JLabel label = new JLabel(&quot;Money&quot;);\n                    label.setBorder(new EmptyBorder(32, 32, 32, 32));\n                    popup.add(label);\n                    popup.pack();\n                    popup.setLocationRelativeTo(TestPane.this);\n                    popup.setVisible(true);\n                    Timer timer = new Timer(3000, new ActionListener() {\n                        @Override\n                        public void actionPerformed(ActionEvent e) {\n                            popup.dispose();\n                        }\n                    });\n                    timer.setRepeats(false);\n                    timer.start();\n                }\n            });\n            add(btn);\n        }\n\n    }\n}\n</code></pre>\n<p>See <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html\" rel=\"nofollow noreferrer\">How to Use Swing Timers</a> for more details</p>\n"}],"owner":{"account_id":28491469,"reputation":3,"user_id":21804046,"display_name":"Thibaud Zobel"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76162236,"answer_count":1,"score":0,"last_activity_date":1683236170,"creation_date":1683104116,"question_id":76162059,"body_markdown":"Here the code:\r\n\r\n    public class attrape_ball {\r\n        JFrame frame = new JFrame();\r\n        JPanel attrape = new JPanel();\r\n    \t\r\n        public attrape_ball(pokeball pk) {\r\n        JLabel ramasseball = new JLabel(&quot;vous avez ramasser &quot;);\r\n        attrape.add(ramasseball);\r\n    \t    \r\n        frame.setSize(200,100);\r\n        frame.add(attrape); \r\n        frame.setVisible(false);\r\n    \t}\r\n    \t\r\n        @Override\r\n        public void afficherJframe() {\r\n        frame.setVisible(true);\r\n        try {\r\n        Thread.sleep(3000);\r\n        } catch (InterruptedException e) {\r\n        e.printStackTrace();}\r\n        frame.dispose();\r\n        }\r\n    }\r\n\r\n\r\n\r\nWhen I call the function afficherJFrame() I want to display the JLabel then wait 3 sec and then close the JFrame.\r\nWhen I run it, the JLabel isn&#39;t displayed. That is the problem. (The JFrame is closed 3 sec later as I want). ","title":"Display and then close a frame in Java","body":"<p>Here the code:</p>\n<pre><code>public class attrape_ball {\n    JFrame frame = new JFrame();\n    JPanel attrape = new JPanel();\n    \n    public attrape_ball(pokeball pk) {\n    JLabel ramasseball = new JLabel(&quot;vous avez ramasser &quot;);\n    attrape.add(ramasseball);\n        \n    frame.setSize(200,100);\n    frame.add(attrape); \n    frame.setVisible(false);\n    }\n    \n    @Override\n    public void afficherJframe() {\n    frame.setVisible(true);\n    try {\n    Thread.sleep(3000);\n    } catch (InterruptedException e) {\n    e.printStackTrace();}\n    frame.dispose();\n    }\n}\n</code></pre>\n<p>When I call the function afficherJFrame() I want to display the JLabel then wait 3 sec and then close the JFrame.\nWhen I run it, the JLabel isn't displayed. That is the problem. (The JFrame is closed 3 sec later as I want).</p>\n"},{"tags":["java","multithreading"],"comments":[{"owner":{"account_id":9531412,"reputation":2010,"user_id":7082956,"display_name":"Valerij Dobler"},"score":2,"creation_date":1683230486,"post_id":76176939,"comment_id":134339199,"body_markdown":"Seems about right. But you mixed up your modifiers: `static`goes before `final` so your lock should be `private static final Object obj = new Object();`","body":"Seems about right. But you mixed up your modifiers: <code>static</code>goes before <code>final</code> so your lock should be <code>private static final Object obj = new Object();</code>"},{"owner":{"account_id":8909811,"reputation":2612,"user_id":6650475,"display_name":"Andrew S"},"score":2,"creation_date":1683230526,"post_id":76176939,"comment_id":134339209,"body_markdown":"yes and yes - [this](https://stackoverflow.com/questions/15438727/if-i-synchronized-two-methods-on-the-same-class-can-they-run-simultaneously) might help.","body":"yes and yes - <a href=\"https://stackoverflow.com/questions/15438727/if-i-synchronized-two-methods-on-the-same-class-can-they-run-simultaneously\">this</a> might help."}],"answers":[{"tags":[],"owner":{"account_id":17741504,"reputation":1083,"user_id":12881733,"display_name":"Bill Mair"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1683235269,"creation_date":1683235269,"answer_id":76177436,"question_id":76176939,"body_markdown":"Not quite.\r\n\r\n#1 *other threads cannot call these methods at the same time*\r\n\r\nOther threads CAN call the methods BUT they will be blocked from entering the method until the synchronized lock is released, also which thread accesses the lock is indeterminate.\r\n\r\nIts equivalent to `synchronized(this) { ... }`\r\n\r\n#2 *this means that no other threads will not be able to call this method*\r\n\r\nAny thread can call the run method, but only a single thread can acquire `obj`&#39;s lock and enter the synchronized block.\r\n\r\nSee:\r\n - [monitorenter][1]\r\n - [monitorexit][2]\r\n\r\nUsing synchronized forces the JVM to acquire and release the lock, even if there is no contention.\r\n\r\nYou should look at the package [java.util.concurrent.locks][3] for *optimistic* locking in #2, and [java.util.concurrent.atomic][4] for a better way of implementing #1.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-6.html#jvms-6.5.monitorenter\r\n  [2]: https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-6.html#jvms-6.5.monitorexit\r\n  [3]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/locks/package-summary.html\r\n  [4]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/atomic/package-summary.html","title":"Synchronized methods java, how it works","body":"<p>Not quite.</p>\n<p>#1 <em>other threads cannot call these methods at the same time</em></p>\n<p>Other threads CAN call the methods BUT they will be blocked from entering the method until the synchronized lock is released, also which thread accesses the lock is indeterminate.</p>\n<p>Its equivalent to <code>synchronized(this) { ... }</code></p>\n<p>#2 <em>this means that no other threads will not be able to call this method</em></p>\n<p>Any thread can call the run method, but only a single thread can acquire <code>obj</code>'s lock and enter the synchronized block.</p>\n<p>See:</p>\n<ul>\n<li><a href=\"https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-6.html#jvms-6.5.monitorenter\" rel=\"nofollow noreferrer\">monitorenter</a></li>\n<li><a href=\"https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-6.html#jvms-6.5.monitorexit\" rel=\"nofollow noreferrer\">monitorexit</a></li>\n</ul>\n<p>Using synchronized forces the JVM to acquire and release the lock, even if there is no contention.</p>\n<p>You should look at the package <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/locks/package-summary.html\" rel=\"nofollow noreferrer\">java.util.concurrent.locks</a> for <em>optimistic</em> locking in #2, and <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/atomic/package-summary.html\" rel=\"nofollow noreferrer\">java.util.concurrent.atomic</a> for a better way of implementing #1.</p>\n"}],"owner":{"account_id":27566231,"reputation":27,"user_id":21038368,"display_name":"wydra__"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76177436,"answer_count":1,"score":0,"last_activity_date":1683235269,"creation_date":1683230042,"question_id":76176939,"body_markdown":"**1.**\r\n\r\n```\r\npublic class SynchronizedCounter\r\n {\r\nprivate int c = 0;`\r\n\r\n     public synchronized void increment() \r\n     {\r\n         c++;\r\n     }\r\n\r\n    public synchronized void decrement() \r\n    {\r\n        c--;\r\n    }\r\n\r\n    public synchronized int value() \r\n    {\r\n        return c;\r\n    }\r\n}\r\n```\r\n\r\n \r\n**2.**\r\n\r\n```\r\npublic class MyThread extends Thread\r\n {\r\n     private int threadId;\r\n     private final static Object obj = new Object();\r\n\r\n     public MyThread(int threadId)\r\n     {\r\n         this.threadId = threadId;\r\n     }\r\n\r\n     @Override\r\n     public void run()\r\n     {\r\n         synchronized (obj)\r\n         {\r\n             for (int i = 0; i &lt; 1000; i++)\r\n                 System.out.println(this.threadId);\r\n         }\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\n\r\nI would like to present my reasoning and ask you to indicate whether it is correct.\r\n\r\n**Ex 1**\r\n All 3 methods are synchronized. They are non-static and synchronized on a given instance of that\r\nclass. This means that if we have an object c1 of class SynchronizedCounter then if thread1\r\nexecutes, for example, the increment method then this method as well as all other synchronized methods are blocked for other threads,  other threads cannot call these methods at the same time.\r\n\r\n**Ex 2**\r\n Here we are blocking the body of the run method on the final, importantly, static obj object. By virtue of being static, it is a property of the class, and therefore shared by all objects of that class, static obj is a common monitor for all instances of MyThread. So if thread1 calls the run method it will block it on the obj object. And since the obj object is static ,this means that no other threads will not be able to call this method until the thread that blocked it unblocks it.\r\n","title":"Synchronized methods java, how it works","body":"<p><strong>1.</strong></p>\n<pre><code>public class SynchronizedCounter\n {\nprivate int c = 0;`\n\n     public synchronized void increment() \n     {\n         c++;\n     }\n\n    public synchronized void decrement() \n    {\n        c--;\n    }\n\n    public synchronized int value() \n    {\n        return c;\n    }\n}\n</code></pre>\n<p><strong>2.</strong></p>\n<pre><code>public class MyThread extends Thread\n {\n     private int threadId;\n     private final static Object obj = new Object();\n\n     public MyThread(int threadId)\n     {\n         this.threadId = threadId;\n     }\n\n     @Override\n     public void run()\n     {\n         synchronized (obj)\n         {\n             for (int i = 0; i &lt; 1000; i++)\n                 System.out.println(this.threadId);\n         }\n    }\n}\n</code></pre>\n<p>I would like to present my reasoning and ask you to indicate whether it is correct.</p>\n<p><strong>Ex 1</strong>\nAll 3 methods are synchronized. They are non-static and synchronized on a given instance of that\nclass. This means that if we have an object c1 of class SynchronizedCounter then if thread1\nexecutes, for example, the increment method then this method as well as all other synchronized methods are blocked for other threads,  other threads cannot call these methods at the same time.</p>\n<p><strong>Ex 2</strong>\nHere we are blocking the body of the run method on the final, importantly, static obj object. By virtue of being static, it is a property of the class, and therefore shared by all objects of that class, static obj is a common monitor for all instances of MyThread. So if thread1 calls the run method it will block it on the obj object. And since the obj object is static ,this means that no other threads will not be able to call this method until the thread that blocked it unblocks it.</p>\n"},{"tags":["java","spring","multithreading","spring-boot","concurrency"],"comments":[{"owner":{"account_id":22046326,"reputation":1,"user_id":16311275,"display_name":"Robert Pho"},"score":0,"creation_date":1660007895,"post_id":73285524,"comment_id":129425901,"body_markdown":"Maybe this post can help you too.\nhttps://stackoverflow.com/questions/54801769/what-purpose-of-the-spring-enableasync-annotation-and-how-to-use-it-well","body":"Maybe this post can help you too. <a href=\"https://stackoverflow.com/questions/54801769/what-purpose-of-the-spring-enableasync-annotation-and-how-to-use-it-well\" title=\"what purpose of the spring enableasync annotation and how to use it well\">stackoverflow.com/questions/54801769/&hellip;</a>"},{"owner":{"account_id":1975034,"reputation":961,"user_id":1773011,"accept_rate":85,"display_name":"lightrek"},"score":0,"creation_date":1660054270,"post_id":73285524,"comment_id":129438719,"body_markdown":"Thanks! but if I only use `@EnableScheduling` without `@EnableAsync`, how can the scheduled task run? (I suppose the scheduled task should run on a separate thread asyncrously)","body":"Thanks! but if I only use <code>@EnableScheduling</code> without <code>@EnableAsync</code>, how can the scheduled task run? (I suppose the scheduled task should run on a separate thread asyncrously)"},{"owner":{"account_id":7258992,"reputation":2411,"user_id":5536516,"accept_rate":86,"display_name":"nyg"},"score":0,"creation_date":1679263691,"post_id":73285524,"comment_id":133685606,"body_markdown":"Similar question: https://stackoverflow.com/questions/14623092/using-spring-scheduled-and-async-together","body":"Similar question: <a href=\"https://stackoverflow.com/questions/14623092/using-spring-scheduled-and-async-together\" title=\"using spring scheduled and async together\">stackoverflow.com/questions/14623092/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":7258992,"reputation":2411,"user_id":5536516,"accept_rate":86,"display_name":"nyg"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683234998,"creation_date":1679263590,"answer_id":75785217,"question_id":73285524,"body_markdown":"I do not think @Async and @Scheduled are meant to be used on the same method, even if it does work.\r\n\r\n* First, a @Scheduled method should return void and have no parameters (for obvious reasons), whereas an @Async method can have parameters and can return a value (i.e. `Future&lt;?&gt;`).\r\n\r\n* Second, @EnableScheduling will look for a `TaskScheduler` to execute the @Scheduled methods, whereas @EnableAsync will look for a `TaskExecutor` to execute the @Async methods. The two are different things, Spring doc [says][1]:\r\n\r\n  &gt; The Spring Framework provides abstractions for the **asynchronous execution** and **scheduling** of tasks with the **TaskExecutor** and **TaskScheduler** interfaces, *respectively*.\r\n\r\n----------\r\n\r\nHowever, it is possible to use @EnableAsync and @EnableScheduling on the same @Configuration class, depending on what you want to do. For example, the Spring documentation [shows][3] this example:\r\n\r\n```java\r\n@Configuration\r\n@EnableAsync\r\n@EnableScheduling\r\npublic class AppConfig {}\r\n```\r\n\r\nIt can indeed be a bit confusing at first, but as they mention:\r\n\r\n&gt; You can pick and choose the relevant annotations for your application. For example, if you need only support for @Scheduled, you can omit @EnableAsync.\r\n\r\nThe example is probably there if you want to do something like:\r\n\r\n```java\r\n@Configuration\r\n@EnableAsync\r\n@EnableScheduling\r\npublic class AppConfig {\r\n\r\n    @Async // requires @EnableAsync\r\n    public Future&lt;String&gt; asyncMethod(String data) {\r\n        // do something\r\n        return CompletableFuture.completedFuture(&quot;finished&quot;);\r\n    }\r\n\r\n    @Scheduled(fixedRate = 1_000) // requires @EnableScheduling\r\n    public void everySecond() {\r\n        // do something\r\n    }\r\n}\r\n```\r\n\r\n----------\r\n\r\nAs for your question, _how can the scheduled task run?_, the doc for [@EnableScheduling][2] says:\r\n\r\n&gt; By default, Spring will search for an associated scheduler definition: either a unique TaskScheduler bean in the context, or a TaskScheduler bean named &quot;taskScheduler&quot; otherwise; (…). If neither of the two is resolvable, a **local single-threaded default scheduler** will be created and used within the registrar.\r\n\r\nSo, if you have multiple @Scheduled methods and want them to be able to execute in parallel, you need to define a `TaskScheduler` with a pool size greater than one:\r\n\r\n```java\r\n@Configuration\r\n@EnableScheduling\r\npublic class SchedulerContext {\r\n\r\n    @Bean\r\n    public TaskScheduler taskScheduler() {\r\n        ThreadPoolTaskScheduler scheduler = new ThreadPoolTaskScheduler();\r\n        scheduler.setThreadNamePrefix(&quot;sched-task-&quot;);\r\n        scheduler.setPoolSize(10); // 1 is the default value\r\n        scheduler.initialize();\r\n        return scheduler;\r\n    }\r\n}\r\n```\r\n\r\n\r\n[1]: https://docs.spring.io/spring-framework/docs/current/reference/html/integration.html#scheduling\r\n[2]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/scheduling/annotation/EnableScheduling.html\r\n[3]: https://docs.spring.io/spring-framework/docs/current/reference/html/integration.html#scheduling-enable-annotation-support","title":"Why need @EnableAsync annotation since @EnableScheduling already trigger scheduled task on a different thread asynchronously?","body":"<p>I do not think @Async and @Scheduled are meant to be used on the same method, even if it does work.</p>\n<ul>\n<li><p>First, a @Scheduled method should return void and have no parameters (for obvious reasons), whereas an @Async method can have parameters and can return a value (i.e. <code>Future&lt;?&gt;</code>).</p>\n</li>\n<li><p>Second, @EnableScheduling will look for a <code>TaskScheduler</code> to execute the @Scheduled methods, whereas @EnableAsync will look for a <code>TaskExecutor</code> to execute the @Async methods. The two are different things, Spring doc <a href=\"https://docs.spring.io/spring-framework/docs/current/reference/html/integration.html#scheduling\" rel=\"nofollow noreferrer\">says</a>:</p>\n<blockquote>\n<p>The Spring Framework provides abstractions for the <strong>asynchronous execution</strong> and <strong>scheduling</strong> of tasks with the <strong>TaskExecutor</strong> and <strong>TaskScheduler</strong> interfaces, <em>respectively</em>.</p>\n</blockquote>\n</li>\n</ul>\n<hr />\n<p>However, it is possible to use @EnableAsync and @EnableScheduling on the same @Configuration class, depending on what you want to do. For example, the Spring documentation <a href=\"https://docs.spring.io/spring-framework/docs/current/reference/html/integration.html#scheduling-enable-annotation-support\" rel=\"nofollow noreferrer\">shows</a> this example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableAsync\n@EnableScheduling\npublic class AppConfig {}\n</code></pre>\n<p>It can indeed be a bit confusing at first, but as they mention:</p>\n<blockquote>\n<p>You can pick and choose the relevant annotations for your application. For example, if you need only support for @Scheduled, you can omit @EnableAsync.</p>\n</blockquote>\n<p>The example is probably there if you want to do something like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableAsync\n@EnableScheduling\npublic class AppConfig {\n\n    @Async // requires @EnableAsync\n    public Future&lt;String&gt; asyncMethod(String data) {\n        // do something\n        return CompletableFuture.completedFuture(&quot;finished&quot;);\n    }\n\n    @Scheduled(fixedRate = 1_000) // requires @EnableScheduling\n    public void everySecond() {\n        // do something\n    }\n}\n</code></pre>\n<hr />\n<p>As for your question, <em>how can the scheduled task run?</em>, the doc for <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/scheduling/annotation/EnableScheduling.html\" rel=\"nofollow noreferrer\">@EnableScheduling</a> says:</p>\n<blockquote>\n<p>By default, Spring will search for an associated scheduler definition: either a unique TaskScheduler bean in the context, or a TaskScheduler bean named &quot;taskScheduler&quot; otherwise; (…). If neither of the two is resolvable, a <strong>local single-threaded default scheduler</strong> will be created and used within the registrar.</p>\n</blockquote>\n<p>So, if you have multiple @Scheduled methods and want them to be able to execute in parallel, you need to define a <code>TaskScheduler</code> with a pool size greater than one:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableScheduling\npublic class SchedulerContext {\n\n    @Bean\n    public TaskScheduler taskScheduler() {\n        ThreadPoolTaskScheduler scheduler = new ThreadPoolTaskScheduler();\n        scheduler.setThreadNamePrefix(&quot;sched-task-&quot;);\n        scheduler.setPoolSize(10); // 1 is the default value\n        scheduler.initialize();\n        return scheduler;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":1975034,"reputation":961,"user_id":1773011,"accept_rate":85,"display_name":"lightrek"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":647,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1683234998,"creation_date":1660007369,"question_id":73285524,"body_markdown":"I have the following code using @EnableScheduling and @EnableAsync together:\r\n\r\n    @Configuration\r\n    @EnableAsync\r\n    @EnableScheduling\r\n    public class PollingAgent {\r\n    \r\n        @Async\r\n        @Scheduled(fixedRate=INTERVAL_RATE, initialDelay = 10000) //setting an initial delay to let the beans get loaded\r\n        void checkAvailableAndStartJob() {\r\n            if(m_messageOnDemand) {\r\n                try {\r\n                    LOGGER.info(&quot;check job messages and start job if possible&quot;);\r\n                    jobIdOnDemandSubscriber.StartJobIfMessageAvailable(m_applicationContext);\r\n                } catch (Exception e) {\r\n                    LOGGER.info(&quot;Scheduler run failed: &quot; + e.getMessage());\r\n                }\r\n            }\r\n        }\r\n    }\r\nI think even without `@EnableAsync` and `@Async`, `checkAvailableAndStartJob` will be triggered asynchronously on a different thread, why we need them?\r\n","title":"Why need @EnableAsync annotation since @EnableScheduling already trigger scheduled task on a different thread asynchronously?","body":"<p>I have the following code using @EnableScheduling and @EnableAsync together:</p>\n<pre><code>@Configuration\n@EnableAsync\n@EnableScheduling\npublic class PollingAgent {\n\n    @Async\n    @Scheduled(fixedRate=INTERVAL_RATE, initialDelay = 10000) //setting an initial delay to let the beans get loaded\n    void checkAvailableAndStartJob() {\n        if(m_messageOnDemand) {\n            try {\n                LOGGER.info(&quot;check job messages and start job if possible&quot;);\n                jobIdOnDemandSubscriber.StartJobIfMessageAvailable(m_applicationContext);\n            } catch (Exception e) {\n                LOGGER.info(&quot;Scheduler run failed: &quot; + e.getMessage());\n            }\n        }\n    }\n}\n</code></pre>\n<p>I think even without <code>@EnableAsync</code> and <code>@Async</code>, <code>checkAvailableAndStartJob</code> will be triggered asynchronously on a different thread, why we need them?</p>\n"},{"tags":["java","android","android-studio","gradle"],"owner":{"account_id":10916684,"reputation":3936,"user_id":8024296,"display_name":"Paul"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1683236220,"answer_count":0,"score":0,"last_activity_date":1683234818,"creation_date":1683234818,"question_id":76177397,"body_markdown":"After upgrading to the latest version of android studio Flamingo, I am having the following problem.\r\n\r\nI also created an empty project from scratch, but it gives me problems.\r\n\r\nThe same problem is found here: https://stackoverflow.com/questions/76036154/not-able-to-find-compatible-version-of-embedded-java-version-and-gradle-tools-ve\r\n\r\nCan you give me a hand?\r\n\r\n[![enter image description here][1]][1]\r\n\r\n```\r\nA problem occurred configuring root project &#39;My Application&#39;.\r\n&gt; Could not resolve all files for configuration &#39;:classpath&#39;.\r\n   &gt; Could not resolve com.android.tools.build:gradle:8.0.1.\r\n     Required by:\r\n         project : &gt; com.android.application:com.android.application.gradle.plugin:8.0.1\r\n         project : &gt; com.android.library:com.android.library.gradle.plugin:8.0.1\r\n      &gt; No matching variant of com.android.tools.build:gradle:8.0.1 was found. The consumer was configured to find a library for use during runtime, compatible with Java 8, packaged as a jar, and its dependencies declared externally, as well as attribute &#39;org.gradle.plugin.api-version&#39; with value &#39;8.0&#39; but:\r\n          - Variant &#39;apiElements&#39; capability com.android.tools.build:gradle:8.0.1 declares a library, packaged as a jar, and its dependencies declared externally:\r\n              - Incompatible because this component declares a component for use during compile-time, compatible with Java 11 and the consumer needed a component for use during runtime, compatible with Java 8\r\n              - Other compatible attribute:\r\n                  - Doesn&#39;t say anything about org.gradle.plugin.api-version (required &#39;8.0&#39;)\r\n          - Variant &#39;javadocElements&#39; capability com.android.tools.build:gradle:8.0.1 declares a component for use during runtime, and its dependencies declared externally:\r\n              - Incompatible because this component declares documentation and the consumer needed a library\r\n              - Other compatible attributes:\r\n                  - Doesn&#39;t say anything about its target Java version (required compatibility with Java 8)\r\n                  - Doesn&#39;t say anything about its elements (required them packaged as a jar)\r\n                  - Doesn&#39;t say anything about org.gradle.plugin.api-version (required &#39;8.0&#39;)\r\n          - Variant &#39;runtimeElements&#39; capability com.android.tools.build:gradle:8.0.1 declares a library for use during runtime, packaged as a jar, and its dependencies declared externally:\r\n              - Incompatible because this component declares a component, compatible with Java 11 and the consumer needed a component, compatible with Java 8\r\n              - Other compatible attribute:\r\n                  - Doesn&#39;t say anything about org.gradle.plugin.api-version (required &#39;8.0&#39;)\r\n          - Variant &#39;sourcesElements&#39; capability com.android.tools.build:gradle:8.0.1 declares a component for use during runtime, and its dependencies declared externally:\r\n              - Incompatible because this component declares documentation and the consumer needed a library\r\n              - Other compatible attributes:\r\n                  - Doesn&#39;t say anything about its target Java version (required compatibility with Java 8)\r\n                  - Doesn&#39;t say anything about its elements (required them packaged as a jar)\r\n                  - Doesn&#39;t say anything about org.gradle.plugin.api-version (required &#39;8.0&#39;)\r\n\r\n* Try:\r\n&gt; Run with --info or --debug option to get more log output.\r\n&gt; Run with --scan to get full insights.\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/aYK1u.png","title":"Android No matching variant of com.android.tools.build:gradle:8.0.1 was found","body":"<p>After upgrading to the latest version of android studio Flamingo, I am having the following problem.</p>\n<p>I also created an empty project from scratch, but it gives me problems.</p>\n<p>The same problem is found here: <a href=\"https://stackoverflow.com/questions/76036154/not-able-to-find-compatible-version-of-embedded-java-version-and-gradle-tools-ve\">Not able to Find compatible version of embedded java version and gradle tools version for Android Studio Flamingo</a></p>\n<p>Can you give me a hand?</p>\n<p><a href=\"https://i.stack.imgur.com/aYK1u.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/aYK1u.png\" alt=\"enter image description here\" /></a></p>\n<pre><code>A problem occurred configuring root project 'My Application'.\n&gt; Could not resolve all files for configuration ':classpath'.\n   &gt; Could not resolve com.android.tools.build:gradle:8.0.1.\n     Required by:\n         project : &gt; com.android.application:com.android.application.gradle.plugin:8.0.1\n         project : &gt; com.android.library:com.android.library.gradle.plugin:8.0.1\n      &gt; No matching variant of com.android.tools.build:gradle:8.0.1 was found. The consumer was configured to find a library for use during runtime, compatible with Java 8, packaged as a jar, and its dependencies declared externally, as well as attribute 'org.gradle.plugin.api-version' with value '8.0' but:\n          - Variant 'apiElements' capability com.android.tools.build:gradle:8.0.1 declares a library, packaged as a jar, and its dependencies declared externally:\n              - Incompatible because this component declares a component for use during compile-time, compatible with Java 11 and the consumer needed a component for use during runtime, compatible with Java 8\n              - Other compatible attribute:\n                  - Doesn't say anything about org.gradle.plugin.api-version (required '8.0')\n          - Variant 'javadocElements' capability com.android.tools.build:gradle:8.0.1 declares a component for use during runtime, and its dependencies declared externally:\n              - Incompatible because this component declares documentation and the consumer needed a library\n              - Other compatible attributes:\n                  - Doesn't say anything about its target Java version (required compatibility with Java 8)\n                  - Doesn't say anything about its elements (required them packaged as a jar)\n                  - Doesn't say anything about org.gradle.plugin.api-version (required '8.0')\n          - Variant 'runtimeElements' capability com.android.tools.build:gradle:8.0.1 declares a library for use during runtime, packaged as a jar, and its dependencies declared externally:\n              - Incompatible because this component declares a component, compatible with Java 11 and the consumer needed a component, compatible with Java 8\n              - Other compatible attribute:\n                  - Doesn't say anything about org.gradle.plugin.api-version (required '8.0')\n          - Variant 'sourcesElements' capability com.android.tools.build:gradle:8.0.1 declares a component for use during runtime, and its dependencies declared externally:\n              - Incompatible because this component declares documentation and the consumer needed a library\n              - Other compatible attributes:\n                  - Doesn't say anything about its target Java version (required compatibility with Java 8)\n                  - Doesn't say anything about its elements (required them packaged as a jar)\n                  - Doesn't say anything about org.gradle.plugin.api-version (required '8.0')\n\n* Try:\n&gt; Run with --info or --debug option to get more log output.\n&gt; Run with --scan to get full insights.\n</code></pre>\n"},{"tags":["java","java-8","java-stream"],"comments":[{"owner":{"account_id":30898,"reputation":8927,"user_id":84538,"accept_rate":100,"display_name":"jon hanson"},"score":0,"creation_date":1681888988,"post_id":76051402,"comment_id":134127797,"body_markdown":"In future it helps if you provide a complete example - your code is missing the Todo class. In any case the code shown works fine, so whatever is causing your issue is not related to this code. It sounds like a runtime issue - it can&#39;t find BaseStream. Since this class is part of the core Java runtime library, this suggests something odd is happening with either your classpath or your JRE. If you run Java with the -verbose:class flag it will display more info about the class-loading, which might help diagnose the problem.","body":"In future it helps if you provide a complete example - your code is missing the Todo class. In any case the code shown works fine, so whatever is causing your issue is not related to this code. It sounds like a runtime issue - it can&#39;t find BaseStream. Since this class is part of the core Java runtime library, this suggests something odd is happening with either your classpath or your JRE. If you run Java with the -verbose:class flag it will display more info about the class-loading, which might help diagnose the problem."},{"owner":{"account_id":25961096,"reputation":9,"user_id":19677705,"display_name":"Sankalp Nikam"},"score":0,"creation_date":1681890462,"post_id":76051402,"comment_id":134128188,"body_markdown":"Thank you, so much for the help. I tried using jdk version-8 and the error got resolved but I tried switching back to jdk-17 and got the same mistake again. But, it was working perfectly fine till yesterday.","body":"Thank you, so much for the help. I tried using jdk version-8 and the error got resolved but I tried switching back to jdk-17 and got the same mistake again. But, it was working perfectly fine till yesterday."},{"owner":{"account_id":5998820,"reputation":12676,"user_id":4712734,"display_name":"DuncG"},"score":0,"creation_date":1681920279,"post_id":76051402,"comment_id":134135840,"body_markdown":"Do you mean it fails in jdk7 (that is jdk1.7) or it fails in jdk17? It sounds like you have used javac from jdk8 or higher and java runtime from before jdk8.","body":"Do you mean it fails in jdk7 (that is jdk1.7) or it fails in jdk17? It sounds like you have used javac from jdk8 or higher and java runtime from before jdk8."},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1681926379,"post_id":76051402,"comment_id":134137125,"body_markdown":"Please provide more information, such as operation system, exact JRE/JDK implementation (at compile-time and run-time), versions of dependencies, how you&#39;re compiling the project, how you&#39;re running the project, and so on. If you could reproduce this problem with a [mre], that would be ideal.","body":"Please provide more information, such as operation system, exact JRE/JDK implementation (at compile-time and run-time), versions of dependencies, how you&#39;re compiling the project, how you&#39;re running the project, and so on. If you could reproduce this problem with a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, that would be ideal."},{"owner":{"account_id":25961096,"reputation":9,"user_id":19677705,"display_name":"Sankalp Nikam"},"score":0,"creation_date":1681965576,"post_id":76051402,"comment_id":134142340,"body_markdown":"The operating system I am using is Windows 10 and I am using jdk version - 17.0.6, it is my workspace default JRE. The error is not shown while I am working on the 1.8 version, but the error shows up as soon as I switch from 1.8 to 17.0.6.","body":"The operating system I am using is Windows 10 and I am using jdk version - 17.0.6, it is my workspace default JRE. The error is not shown while I am working on the 1.8 version, but the error shows up as soon as I switch from 1.8 to 17.0.6."},{"owner":{"account_id":25961096,"reputation":9,"user_id":19677705,"display_name":"Sankalp Nikam"},"score":0,"creation_date":1682141835,"post_id":76051402,"comment_id":134172260,"body_markdown":"My problem got resolved.\nI am using Eclipse IDE.\nI deleted the JDK version 17 from my IDE and then, I went to my particular project properties - Java Build Path - libraries and again added the JavaSE-17 and  I chose the Workspace default JRE (jdk-17.0.6) and now it&#39;s running fine.","body":"My problem got resolved. I am using Eclipse IDE. I deleted the JDK version 17 from my IDE and then, I went to my particular project properties - Java Build Path - libraries and again added the JavaSE-17 and  I chose the Workspace default JRE (jdk-17.0.6) and now it&#39;s running fine."}],"owner":{"account_id":25961096,"reputation":9,"user_id":19677705,"display_name":"Sankalp Nikam"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":250,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1683234674,"creation_date":1681886145,"question_id":76051402,"body_markdown":"This is a code, I wrote for functional programming to check the username I will get from url with the username present in the database.\r\n```\r\npackage com.springboot.myfirstwebapp.todo;\r\n\r\nimport java.time.LocalDate;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\nimport java.util.function.Predicate;\r\n\r\nimport org.springframework.stereotype.Service;\r\n\r\nimport jakarta.validation.Valid;\r\n\r\n@Service\r\npublic class TodoService {\r\n\r\n\tprivate static List&lt;Todo&gt; todos = new ArrayList&lt;&gt;();\r\n\t\r\n\tprivate static int todosCount = 0;\r\n\t\r\n\tstatic {\r\n\t\ttodos.add(new Todo(++todosCount, &quot;OCS pending&quot;, LocalDate.now().plusYears(1), false));\r\n\t\ttodos.add(new Todo(++todosCount, &quot;JXP pro&quot;, LocalDate.now().plusYears(2), false));\r\n\t\ttodos.add(new Todo(++todosCount, &quot;Module maintenance&quot;, LocalDate.now().plusYears(3), false));\r\n\t}\r\n\t\r\n\tpublic List&lt;Todo&gt; findByUsername(String username)\r\n\t{\r\n\t\tPredicate&lt;? super Todo&gt; predicate = \r\n\t\t\t\ttodo -&gt; todo.getUsername().equalsIgnoreCase(username);\r\n\t\treturn todos.stream().filter(predicate).toList();\r\n\t}\r\n```\r\n\r\nThis code was working fine but all of sudden it started showing an error at \r\n\r\n```\r\nreturn todos.stream().filter(predicate).toList();\r\n```\r\n saying, &quot;The type java.util.stream.BaseStream cannot be resolved. It is indirectly referenced from required .class files&quot;.\r\n\r\nI did RnD with the help of Youtube and didn&#39;t find any optimal solution for it. I also searched for this error in Stackover Flow but didn&#39;t get the answer.","title":"The type java.util.stream.BaseStream cannot be resolved. It is indirectly referenced from required .class files","body":"<p>This is a code, I wrote for functional programming to check the username I will get from url with the username present in the database.</p>\n<pre><code>package com.springboot.myfirstwebapp.todo;\n\nimport java.time.LocalDate;\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.function.Predicate;\n\nimport org.springframework.stereotype.Service;\n\nimport jakarta.validation.Valid;\n\n@Service\npublic class TodoService {\n\n    private static List&lt;Todo&gt; todos = new ArrayList&lt;&gt;();\n    \n    private static int todosCount = 0;\n    \n    static {\n        todos.add(new Todo(++todosCount, &quot;OCS pending&quot;, LocalDate.now().plusYears(1), false));\n        todos.add(new Todo(++todosCount, &quot;JXP pro&quot;, LocalDate.now().plusYears(2), false));\n        todos.add(new Todo(++todosCount, &quot;Module maintenance&quot;, LocalDate.now().plusYears(3), false));\n    }\n    \n    public List&lt;Todo&gt; findByUsername(String username)\n    {\n        Predicate&lt;? super Todo&gt; predicate = \n                todo -&gt; todo.getUsername().equalsIgnoreCase(username);\n        return todos.stream().filter(predicate).toList();\n    }\n</code></pre>\n<p>This code was working fine but all of sudden it started showing an error at</p>\n<pre><code>return todos.stream().filter(predicate).toList();\n</code></pre>\n<p>saying, &quot;The type java.util.stream.BaseStream cannot be resolved. It is indirectly referenced from required .class files&quot;.</p>\n<p>I did RnD with the help of Youtube and didn't find any optimal solution for it. I also searched for this error in Stackover Flow but didn't get the answer.</p>\n"},{"tags":["java","language-lawyer","jls","checked-exceptions"],"comments":[{"owner":{"account_id":30898,"reputation":8927,"user_id":84538,"accept_rate":100,"display_name":"jon hanson"},"score":0,"creation_date":1683236127,"post_id":76177332,"comment_id":134340230,"body_markdown":"No, @MattDS18 is correct, the behaviour is odd. In the first example, the main method is throwing an exception whose static type is Throwable, which is a checked exception, and therefore should give rise to a unreported exception compiler error, but it doesn&#39;t. The even more odd thing is, if you cast it to a Throwable (i.e. `throw (Throwable)t` then the compiler will (correctly) complain, even though you haven&#39;t actually changed its static type.","body":"No, @MattDS18 is correct, the behaviour is odd. In the first example, the main method is throwing an exception whose static type is Throwable, which is a checked exception, and therefore should give rise to a unreported exception compiler error, but it doesn&#39;t. The even more odd thing is, if you cast it to a Throwable (i.e. <code>throw (Throwable)t</code> then the compiler will (correctly) complain, even though you haven&#39;t actually changed its static type."},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":0,"creation_date":1683275059,"post_id":76177332,"comment_id":134344903,"body_markdown":"@jon-hanson an intersting thing happens when you declare `public static void foo() throws IOException` because now the Java Compiler says &quot;error: unreported exception **IOException**; must be caught or declared to be thrown&quot; which shows that the compiler exactly knows what exception can be thrown there.","body":"@jon-hanson an intersting thing happens when you declare <code>public static void foo() throws IOException</code> because now the Java Compiler says &quot;error: unreported exception <b>IOException</b>; must be caught or declared to be thrown&quot; which shows that the compiler exactly knows what exception can be thrown there."},{"owner":{"account_id":30898,"reputation":8927,"user_id":84538,"accept_rate":100,"display_name":"jon hanson"},"score":0,"creation_date":1683275329,"post_id":76177332,"comment_id":134344959,"body_markdown":"IThe compiler is evidently performing some static analysis. My guess is that if there is no exception decleration on the method, then it infers the only possible exception being caught is Error, which is unchecked. If you add a throws Throwable (or any other checked exception) then it gives rise to the expected compiler error as Throwable is checked.","body":"IThe compiler is evidently performing some static analysis. My guess is that if there is no exception decleration on the method, then it infers the only possible exception being caught is Error, which is unchecked. If you add a throws Throwable (or any other checked exception) then it gives rise to the expected compiler error as Throwable is checked."},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":1,"creation_date":1683275816,"post_id":76177332,"comment_id":134345061,"body_markdown":"@jon-hanson the compiler checks which exceptions can be thrown in the `try` block. No guess needed, the feature is in the Java 7 release notes: [Rethrowing Exceptions with More Inclusive Type Checking](https://docs.oracle.com/javase/7/docs/technotes/guides/language/catch-multiple.html#rethrow)","body":"@jon-hanson the compiler checks which exceptions can be thrown in the <code>try</code> block. No guess needed, the feature is in the Java 7 release notes: <a href=\"https://docs.oracle.com/javase/7/docs/technotes/guides/language/catch-multiple.html#rethrow\" rel=\"nofollow noreferrer\">Rethrowing Exceptions with More Inclusive Type Checking</a>"}],"owner":{"account_id":1764371,"reputation":401,"user_id":1610579,"accept_rate":71,"display_name":"MattDs17"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"closed_date":1683236464,"answer_count":0,"score":2,"last_activity_date":1683234485,"creation_date":1683233992,"question_id":76177332,"body_markdown":"JLS 11.2.3 says that it is a compile time error if a method body can throw a checked exception and it does not declare the class (or a parent class) in its `throws` clause.\r\nIn the following code, `Throwable` is a checked exception (per JLS 11.1.1) being thrown in the `catch` clause of `main`:\r\n```\r\npublic class Main {\r\n  public static void main(String[] args) {\r\n    try {\r\n      foo();\r\n    } catch (Throwable t) {\r\n      throw t;\r\n    }\r\n  }\r\n\r\n  public static void foo() {\r\n    throw new RuntimeException();\r\n  }\r\n}\r\n```\r\n\r\nHowever, javac compiles it without any errors.\r\nIf we change the signature of `foo` to declare that it `throws Throwable`, we get an error as expected:\r\n\r\n```\r\npublic class Main {\r\n  public static void main(String[] args) {\r\n    try {\r\n      foo();\r\n    } catch (Throwable t) {\r\n      throw t;\r\n    }\r\n  }\r\n\r\n  public static void foo() throws Throwable {\r\n    throw new RuntimeException();\r\n  }\r\n}\r\n```\r\n```\r\n$ javac Main.java\r\nMain.java:6: error: unreported exception Throwable; must be caught or declared to be thrown\r\n      throw t;\r\n      ^\r\n1 error\r\n```\r\n\r\nIt seems like javac figures out (in the first example) that, since `foo` does not declare any checked exceptions, the caught `Throwable t` must be an unchecked exception, and so `main` only ever rethrows an unchecked exception, and thus it does not need a `throws` clause.\r\nIs there anything in the JLS that explains this behaviour?","title":"Why can a caught Throwable be rethrown without declaring Throwable in the method&#39;s throws clause?","body":"<p>JLS 11.2.3 says that it is a compile time error if a method body can throw a checked exception and it does not declare the class (or a parent class) in its <code>throws</code> clause.\nIn the following code, <code>Throwable</code> is a checked exception (per JLS 11.1.1) being thrown in the <code>catch</code> clause of <code>main</code>:</p>\n<pre><code>public class Main {\n  public static void main(String[] args) {\n    try {\n      foo();\n    } catch (Throwable t) {\n      throw t;\n    }\n  }\n\n  public static void foo() {\n    throw new RuntimeException();\n  }\n}\n</code></pre>\n<p>However, javac compiles it without any errors.\nIf we change the signature of <code>foo</code> to declare that it <code>throws Throwable</code>, we get an error as expected:</p>\n<pre><code>public class Main {\n  public static void main(String[] args) {\n    try {\n      foo();\n    } catch (Throwable t) {\n      throw t;\n    }\n  }\n\n  public static void foo() throws Throwable {\n    throw new RuntimeException();\n  }\n}\n</code></pre>\n<pre><code>$ javac Main.java\nMain.java:6: error: unreported exception Throwable; must be caught or declared to be thrown\n      throw t;\n      ^\n1 error\n</code></pre>\n<p>It seems like javac figures out (in the first example) that, since <code>foo</code> does not declare any checked exceptions, the caught <code>Throwable t</code> must be an unchecked exception, and so <code>main</code> only ever rethrows an unchecked exception, and thus it does not need a <code>throws</code> clause.\nIs there anything in the JLS that explains this behaviour?</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9769,"page":456,"page_size":100}
