{"items":[{"tags":["java","saxon"],"comments":[{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1535911615,"post_id":52138213,"comment_id":91229114,"body_markdown":"You need to escape the quotes within the string","body":"You need to escape the quotes within the string"},{"owner":{"account_id":2493093,"reputation":26492,"user_id":2170192,"accept_rate":100,"display_name":"Alex Shesterov"},"score":0,"creation_date":1535911820,"post_id":52138213,"comment_id":91229159,"body_markdown":"Possible duplicate of [How to enter quotes in a Java string?](https://stackoverflow.com/questions/3559063/how-to-enter-quotes-in-a-java-string)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/3559063/how-to-enter-quotes-in-a-java-string\">How to enter quotes in a Java string?</a>"}],"answers":[{"comments":[{"owner":{"account_id":14268527,"reputation":11,"user_id":10306832,"display_name":"Artulanez Souza"},"score":0,"creation_date":1536796053,"post_id":52145487,"comment_id":91557171,"body_markdown":"This error was because I re-wrote without much attention but in the return of the string &#39;alike&#39; or &#39;different&#39; string still gives syntax error, the code is this way (the part where the xQuery code is):\ncomp.compile(\n    &quot;if ( funcJavaDict:CheckString(&#39;em andamento&#39;,&#39;EM Andamento&#39;) ) then \\n&quot; +\n    &quot;  return  &#39;s&#227;o iguais&#39;  \\n&quot;\n    &quot;else  \\n&quot;+\n   &quot;  return &#39;s&#227;o diferente&#39; &quot;);","body":"This error was because I re-wrote without much attention but in the return of the string &#39;alike&#39; or &#39;different&#39; string still gives syntax error, the code is this way (the part where the xQuery code is): comp.compile(     &quot;if ( funcJavaDict:CheckString(&#39;em andamento&#39;,&#39;EM Andamento&#39;) ) then \\n&quot; +     &quot;  return  &#39;s&#227;o iguais&#39;  \\n&quot;     &quot;else  \\n&quot;+    &quot;  return &#39;s&#227;o diferente&#39; &quot;);"},{"owner":{"account_id":14268527,"reputation":11,"user_id":10306832,"display_name":"Artulanez Souza"},"score":0,"creation_date":1536796068,"post_id":52145487,"comment_id":91557175,"body_markdown":"Would you have any other suggestions?","body":"Would you have any other suggestions?"},{"owner":{"account_id":529122,"reputation":158120,"user_id":415448,"accept_rate":33,"display_name":"Michael Kay"},"score":0,"creation_date":1536826508,"post_id":52145487,"comment_id":91565835,"body_markdown":"If you want help understanding an error message then it helps to tell us what the error message is. I suspect it&#39;s telling you that you don&#39;t need the &quot;return&quot; keyword here.","body":"If you want help understanding an error message then it helps to tell us what the error message is. I suspect it&#39;s telling you that you don&#39;t need the &quot;return&quot; keyword here."}],"tags":[],"owner":{"account_id":529122,"reputation":158120,"user_id":415448,"accept_rate":33,"display_name":"Michael Kay"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1535961564,"creation_date":1535961564,"answer_id":52145487,"question_id":52138213,"body_markdown":"Firstly, I&#39;m puzzled by your Java snippet because it won&#39;t compile (because of the nested quotes), so I don&#39;t see how you get as far as Saxon reporting an XQuery syntax error. Also I imagine that the &#39;/n&#39; should really be &#39;\\n&#39;. So let&#39;s suppose the Java actually says:\r\n\r\n    comp.compile(&quot;return \\n&quot;+\r\n        &quot;if ( funcJavaDict:CheckString(&#39;em andamento&#39;,&#39;EM Andamento&#39;) ) then \\n&quot; +\r\n        &quot;  String(&#39;s&#227;o iguais&#39;) \\n&quot;\r\n        &quot;else  \\n&quot;+\r\n       &quot;  String(&#39;s&#227;o diferente&#39;) &quot;);\r\n\r\nXQuery keywords are recognized only if they appear in the right context. &quot;return&quot; at the start of an expression is not recognized as a keyword, so it is interpreted as a path expression meaning `child::element(return)`. \r\n\r\n(In fact recent Saxon releases will often report a warning if you use a keyword incorrectly like this, but it&#39;s not catching this particular case).\r\n\r\nSo &quot;return&quot; is a complete expression that selects child elements named `return`, and the only thing that can come after a complete expression is either the end of the input, or an infix operator such as `and` or `union`. The keyword `if` is not either of these things, so the compiler reports a syntax error. The solution is to remove the `return` keyword.\r\n\r\nBut that&#39;s not the only thing wrong with your query. There is no function named `String`. You could change it to `string` and the query would work, but writing `string(&#39;xyz&#39;)` is just a long-winded way of writing `&#39;xyz&#39;`, so better to drop the function call entirely.","title":"&quot;XPST0003: XQuery syntax error&quot; when declaring namespace in Saxon","body":"<p>Firstly, I'm puzzled by your Java snippet because it won't compile (because of the nested quotes), so I don't see how you get as far as Saxon reporting an XQuery syntax error. Also I imagine that the '/n' should really be '\\n'. So let's suppose the Java actually says:</p>\n\n<pre><code>comp.compile(\"return \\n\"+\n    \"if ( funcJavaDict:CheckString('em andamento','EM Andamento') ) then \\n\" +\n    \"  String('são iguais') \\n\"\n    \"else  \\n\"+\n   \"  String('são diferente') \");\n</code></pre>\n\n<p>XQuery keywords are recognized only if they appear in the right context. \"return\" at the start of an expression is not recognized as a keyword, so it is interpreted as a path expression meaning <code>child::element(return)</code>. </p>\n\n<p>(In fact recent Saxon releases will often report a warning if you use a keyword incorrectly like this, but it's not catching this particular case).</p>\n\n<p>So \"return\" is a complete expression that selects child elements named <code>return</code>, and the only thing that can come after a complete expression is either the end of the input, or an infix operator such as <code>and</code> or <code>union</code>. The keyword <code>if</code> is not either of these things, so the compiler reports a syntax error. The solution is to remove the <code>return</code> keyword.</p>\n\n<p>But that's not the only thing wrong with your query. There is no function named <code>String</code>. You could change it to <code>string</code> and the query would work, but writing <code>string('xyz')</code> is just a long-winded way of writing <code>'xyz'</code>, so better to drop the function call entirely.</p>\n"}],"owner":{"account_id":14268527,"reputation":11,"user_id":10306832,"display_name":"Artulanez Souza"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":72,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"answer_count":1,"score":-2,"last_activity_date":1695244169,"creation_date":1535900511,"question_id":52138213,"body_markdown":"I&#39;m trying to use the xQuery API for java s9api, however when I try to declare a namespace and run a simple rule to test it I restore the error &quot;XPST0003: XQuery syntax error in \r\n\r\n    # ... if (funcJavaDict: CheckString #\r\n    Unexpected token &quot;if (&quot; beyond end of query &quot;\r\n\r\nAcretido is an easy error to solve, but I&#39;m not getting to the solution,\r\n\r\nThe Java code snippet is:\r\n\r\n    //Declara namespace de fun&#231;&#245;es java para usar nas regras\r\n\tcomp.declareNamespace (&quot;funcJavaDict&quot;, &quot;java:Rastreamento.retratos.DictionaryTerms&quot;);\r\n\tcomp.declareNamespace (&quot;xmi&quot;, &quot;http://www.omg.org/XMI&quot;);\r\n\t\r\n\t//compila regra do arquivo\r\n    XQueryExecutable exp = null;\r\n    try {\r\n\t\texp = comp.compile(&quot;return  /n&quot;+\r\n\t\t\t\t\t\t   &quot;if ( funcJavaDict:CheckString(&quot;em andamento&quot;,&quot;EM Andamento&quot;) ) then /n&quot; +\r\n\t\t\t\t\t\t   &quot;  String(&quot;s&#227;o iguais&quot;) /n&quot;\r\n\t\t\t\t\t\t   &quot;else  /n&quot;+\r\n\t\t\t\t\t\t   &quot;  String(&quot;s&#227;o diferente&quot;) &quot;);\r\n    }catch (SaxonApiException e) {\r\n\t\te.printStackTrace();\r\n\t}\r\n    \r\n    //carrega e executa regra\r\n    XQueryEvaluator Eval = exp.load();\r\n    \r\n    XdmValue rs = null;\r\n\ttry {\r\n\t\trs = Eval.evaluate();\r\n\t} catch (SaxonApiException e) {\r\n\t\te.printStackTrace();\r\n\t}\r\n\t\t\r\n\r\n  \r\n\r\nthe code is very simple is just to check if two string&#39;s are equivalent.","title":"&quot;XPST0003: XQuery syntax error&quot; when declaring namespace in Saxon","body":"<p>I'm trying to use the xQuery API for java s9api, however when I try to declare a namespace and run a simple rule to test it I restore the error \"XPST0003: XQuery syntax error in </p>\n\n<pre><code># ... if (funcJavaDict: CheckString #\nUnexpected token \"if (\" beyond end of query \"\n</code></pre>\n\n<p>Acretido is an easy error to solve, but I'm not getting to the solution,</p>\n\n<p>The Java code snippet is:</p>\n\n<pre><code>//Declara namespace de funções java para usar nas regras\ncomp.declareNamespace (\"funcJavaDict\", \"java:Rastreamento.retratos.DictionaryTerms\");\ncomp.declareNamespace (\"xmi\", \"http://www.omg.org/XMI\");\n\n//compila regra do arquivo\nXQueryExecutable exp = null;\ntry {\n    exp = comp.compile(\"return  /n\"+\n                       \"if ( funcJavaDict:CheckString(\"em andamento\",\"EM Andamento\") ) then /n\" +\n                       \"  String(\"são iguais\") /n\"\n                       \"else  /n\"+\n                       \"  String(\"são diferente\") \");\n}catch (SaxonApiException e) {\n    e.printStackTrace();\n}\n\n//carrega e executa regra\nXQueryEvaluator Eval = exp.load();\n\nXdmValue rs = null;\ntry {\n    rs = Eval.evaluate();\n} catch (SaxonApiException e) {\n    e.printStackTrace();\n}\n</code></pre>\n\n<p>the code is very simple is just to check if two string's are equivalent.</p>\n"},{"tags":["java","eclipse","file-io","fileinputstream"],"comments":[{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":0,"creation_date":1412945614,"post_id":26299842,"comment_id":41268658,"body_markdown":"Use the Eclipse debugger.  Set a breakpoint and step through the code to see where behavior fails to meet your assumptions about what&#39;s happening.","body":"Use the Eclipse debugger.  Set a breakpoint and step through the code to see where behavior fails to meet your assumptions about what&#39;s happening."},{"owner":{"account_id":3013228,"reputation":205797,"user_id":2587435,"accept_rate":88,"display_name":"Paul Samsotha"},"score":0,"creation_date":1412945712,"post_id":26299842,"comment_id":41268718,"body_markdown":"Possible [duplicate](http://stackoverflow.com/q/19871955/2587435)","body":"Possible <a href=\"http://stackoverflow.com/q/19871955/2587435\">duplicate</a>"},{"owner":{"account_id":2524075,"reputation":36076,"user_id":2193767,"accept_rate":78,"display_name":"TheLostMind"},"score":0,"creation_date":1412945784,"post_id":26299842,"comment_id":41268769,"body_markdown":"Keep it at the same level as your source / bin directory and try.","body":"Keep it at the same level as your source / bin directory and try."},{"owner":{"account_id":997513,"reputation":12945,"user_id":3893496,"accept_rate":54,"display_name":"arcy"},"score":0,"creation_date":1412949398,"post_id":26299842,"comment_id":41270963,"body_markdown":"Any time you have an exception thrown, post the stacktrace.  Any time you have a problem that can be illustrated with a small example that can be compiled and run, post the example.  &quot;Tried all the suggestions&quot; and &quot;Nothing is working&quot; are not substitutes for giving explicit information on what happens and when.","body":"Any time you have an exception thrown, post the stacktrace.  Any time you have a problem that can be illustrated with a small example that can be compiled and run, post the example.  &quot;Tried all the suggestions&quot; and &quot;Nothing is working&quot; are not substitutes for giving explicit information on what happens and when."}],"answers":[{"tags":[],"owner":{"account_id":240659,"reputation":16549,"user_id":2003986,"accept_rate":75,"display_name":"ToYonos"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1412946410,"creation_date":1412945885,"answer_id":26300028,"question_id":26299842,"body_markdown":"Creating `File` with a relative path is always kind of risky. Either use an absolute path like /my/absolute/path or use a different method to get your file.\r\n\r\nAlso, why not using this constructor : `Scanner(File source)`\r\n\r\nhttp://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#Scanner(java.io.File)\r\n\r\nOr better, use this one : `Scanner(InputStream source)`\r\n\r\nAnd then, use getResourceAsStream to properly retrieve your file\r\n\r\n\r\n    InputStream is = getClass().getClassLoader().getResourceAsStream(&quot;PhoneRecords.txt&quot;);\r\n    Scanner sc = new Scanner(is);\r\n ","title":"Can&#39;t find files with eclipse","body":"<p>Creating <code>File</code> with a relative path is always kind of risky. Either use an absolute path like /my/absolute/path or use a different method to get your file.</p>\n\n<p>Also, why not using this constructor : <code>Scanner(File source)</code></p>\n\n<p><a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#Scanner(java.io.File)\" rel=\"nofollow\">http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#Scanner(java.io.File)</a></p>\n\n<p>Or better, use this one : <code>Scanner(InputStream source)</code></p>\n\n<p>And then, use getResourceAsStream to properly retrieve your file</p>\n\n<pre><code>InputStream is = getClass().getClassLoader().getResourceAsStream(\"PhoneRecords.txt\");\nScanner sc = new Scanner(is);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4775222,"reputation":137,"user_id":3858598,"accept_rate":40,"display_name":"cozla"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1412946220,"creation_date":1412945896,"answer_id":26300032,"question_id":26299842,"body_markdown":"Try to put your file here.\r\n\r\n    ---&gt;bin\r\n    ---&gt;src\r\n    ---&gt;PhoneRecords.txt\r\n\r\nor specify the location of the file. For instance, \r\n\r\n    String path = &quot;C:\\\\MyFiles\\\\PhoneRecords.txt&quot;;\r\n    File inFile = new File(path);\r\n\r\n","title":"Can&#39;t find files with eclipse","body":"<p>Try to put your file here.</p>\n\n<pre><code>---&gt;bin\n---&gt;src\n---&gt;PhoneRecords.txt\n</code></pre>\n\n<p>or specify the location of the file. For instance, </p>\n\n<pre><code>String path = \"C:\\\\MyFiles\\\\PhoneRecords.txt\";\nFile inFile = new File(path);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":197685,"reputation":4628,"user_id":441907,"accept_rate":100,"display_name":"Nick Russler"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1412946498,"creation_date":1412946498,"answer_id":26300224,"question_id":26299842,"body_markdown":"Did you enable the input in the eclipse console? Scanner caused me some problems when used from the eclipse console before..\r\n\r\n![enter image description here][1]\r\n\r\nSource: https://stackoverflow.com/a/22471175/441907\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/3wfUb.png","title":"Can&#39;t find files with eclipse","body":"<p>Did you enable the input in the eclipse console? Scanner caused me some problems when used from the eclipse console before..</p>\n\n<p><img src=\"https://i.stack.imgur.com/3wfUb.png\" alt=\"enter image description here\"></p>\n\n<p>Source: <a href=\"https://stackoverflow.com/a/22471175/441907\">https://stackoverflow.com/a/22471175/441907</a></p>\n"},{"tags":[],"owner":{"account_id":896371,"reputation":827,"user_id":933537,"display_name":"Anand Rajasekar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1412946504,"creation_date":1412946504,"answer_id":26300226,"question_id":26299842,"body_markdown":"If the files are put under src try loading from class path\r\n\r\n    Scanner scanner=new Scanner(YourClass.class.getResourceAsStream(&quot;/package/...pathtofile&quot;);","title":"Can&#39;t find files with eclipse","body":"<p>If the files are put under src try loading from class path</p>\n\n<pre><code>Scanner scanner=new Scanner(YourClass.class.getResourceAsStream(\"/package/...pathtofile\");\n</code></pre>\n"}],"owner":{"account_id":5156255,"reputation":43,"user_id":4129422,"accept_rate":60,"display_name":"NIcholas Tremblay"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8891,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":4,"score":0,"last_activity_date":1695244031,"creation_date":1412945344,"question_id":26299842,"body_markdown":"Okay so I scoured this site and a few others looking for the answer to this problem and tried all of the suggestions. Nothing is working and it keeps throwing the `File not found exception`.\r\n\r\n    File inFile = new File(&quot;PhoneRecords.txt&quot;);\r\n\tString path = inFile.getAbsolutePath();\r\n\t try {\r\n\t\tSystem.setIn(new FileInputStream(path));\r\n\t} catch (FileNotFoundException e) {\r\n\t\te.printStackTrace();\r\n\t}\r\n    Scanner sc = new Scanner(System.in);\r\n\r\nAfter this it tries to use the Scanner in a method below.\r\n\r\n    public static PhoneCall readNextPhoneCall(Scanner sc){\r\n\t  return new PhoneCall (sc.nextDouble(), sc.nextInt());\r\n    }\r\n\r\nThe text file is in the same directory that I am working in and I double made sure that I name it correctly in my code. Please Help.","title":"Can&#39;t find files with eclipse","body":"<p>Okay so I scoured this site and a few others looking for the answer to this problem and tried all of the suggestions. Nothing is working and it keeps throwing the <code>File not found exception</code>.</p>\n\n<pre><code>File inFile = new File(\"PhoneRecords.txt\");\nString path = inFile.getAbsolutePath();\n try {\n    System.setIn(new FileInputStream(path));\n} catch (FileNotFoundException e) {\n    e.printStackTrace();\n}\nScanner sc = new Scanner(System.in);\n</code></pre>\n\n<p>After this it tries to use the Scanner in a method below.</p>\n\n<pre><code>public static PhoneCall readNextPhoneCall(Scanner sc){\n  return new PhoneCall (sc.nextDouble(), sc.nextInt());\n}\n</code></pre>\n\n<p>The text file is in the same directory that I am working in and I double made sure that I name it correctly in my code. Please Help.</p>\n"},{"tags":["java","spring","spring-boot","unit-testing"],"comments":[{"owner":{"account_id":16744354,"reputation":504,"user_id":12103109,"display_name":"CaptainAye"},"score":0,"creation_date":1695242630,"post_id":77145639,"comment_id":136000085,"body_markdown":"How did you verify that real implementation was injected? There were no significant changes in @MockBean behaviour in Spring Boot 3 that I know of, so your example looks correct and should work just fine.","body":"How did you verify that real implementation was injected? There were no significant changes in @MockBean behaviour in Spring Boot 3 that I know of, so your example looks correct and should work just fine."},{"owner":{"account_id":2270180,"reputation":619,"user_id":1997828,"accept_rate":6,"display_name":"Deibys"},"score":0,"creation_date":1695243558,"post_id":77145639,"comment_id":136000231,"body_markdown":"I added a debug point","body":"I added a debug point"},{"owner":{"account_id":16744354,"reputation":504,"user_id":12103109,"display_name":"CaptainAye"},"score":0,"creation_date":1695245343,"post_id":77145639,"comment_id":136000459,"body_markdown":"can you try to write your test in such a way that it tests AuditService2? i,e, put assertEquals(4, auditEventService2.sumar(2,2); in your test. I predict that it will fail as sumar will return null, as the object is mocked in reality. Then, you will be able to use Mockito.when to mock the behaviour of the sumar() method.","body":"can you try to write your test in such a way that it tests AuditService2? i,e, put assertEquals(4, auditEventService2.sumar(2,2); in your test. I predict that it will fail as sumar will return null, as the object is mocked in reality. Then, you will be able to use Mockito.when to mock the behaviour of the sumar() method."}],"answers":[{"tags":[],"owner":{"account_id":1229861,"reputation":605,"user_id":1194678,"display_name":"Marko Medojević"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695243700,"creation_date":1695243700,"answer_id":77145916,"question_id":77145639,"body_markdown":"You injected a mocked object using this code:\r\n\r\n    @MockBean private AuditService2 auditEventService2;\r\n\r\nHowever, you can also alter a method behavior of the mocked object by utilizing Mockito when. Example:\r\n\r\n    when(auditEventService2.someMethod(any())).thenReturn(&quot;mocked result&quot;);\r\n\r\nTry to change an output of some methods from mocked beans and check if actually works. ","title":"MockBean does not work with classes in Spring boot 3.1","body":"<p>You injected a mocked object using this code:</p>\n<pre><code>@MockBean private AuditService2 auditEventService2;\n</code></pre>\n<p>However, you can also alter a method behavior of the mocked object by utilizing Mockito when. Example:</p>\n<pre><code>when(auditEventService2.someMethod(any())).thenReturn(&quot;mocked result&quot;);\n</code></pre>\n<p>Try to change an output of some methods from mocked beans and check if actually works.</p>\n"}],"owner":{"account_id":2270180,"reputation":619,"user_id":1997828,"accept_rate":6,"display_name":"Deibys"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":108,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695243700,"creation_date":1695240352,"question_id":77145639,"body_markdown":"This is  my setup:\r\n- Spring boot 3.1\r\n- JDK 17\r\n\r\nI have this simple junit test\r\n\r\n``` \r\n@ExtendWith(SpringExtension.class)\r\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\r\n//@AutoConfigureMockMvc(addFilters = false)\r\n@ActiveProfiles(&quot;test&quot;)\r\npublic class ATestClass {\r\n\r\n\r\n    @MockBean private AuditService2 auditEventService2;\r\n\r\n    @MockBean private AuthorizationManager authorizationManager;\r\n\r\n    @Test\r\n    void getEvents() throws Exception {\r\n        assertTrue(true);\r\n    }\r\n}\r\n``` \r\n\r\n\r\n``` \r\n@Service\r\npublic class AuditService2 {\r\n\r\n    public int sumar(int a, int b) {\r\n        return a + b;\r\n    }\r\n}\r\n``` \r\n\r\nThe framework (Spring) is not mocking AuditService2 which is a class. This is injecting the actual bean\r\n\r\nThe framework does mock AuthorizationManager\r\n\r\nThe only difference between two AuditService2 is a class , AuthorizationManager an interface\r\n\r\nThis used to work in Spring boot 2.X, what is the issue here ?\r\n","title":"MockBean does not work with classes in Spring boot 3.1","body":"<p>This is  my setup:</p>\n<ul>\n<li>Spring boot 3.1</li>\n<li>JDK 17</li>\n</ul>\n<p>I have this simple junit test</p>\n<pre><code>@ExtendWith(SpringExtension.class)\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\n//@AutoConfigureMockMvc(addFilters = false)\n@ActiveProfiles(&quot;test&quot;)\npublic class ATestClass {\n\n\n    @MockBean private AuditService2 auditEventService2;\n\n    @MockBean private AuthorizationManager authorizationManager;\n\n    @Test\n    void getEvents() throws Exception {\n        assertTrue(true);\n    }\n}\n</code></pre>\n<pre><code>@Service\npublic class AuditService2 {\n\n    public int sumar(int a, int b) {\n        return a + b;\n    }\n}\n</code></pre>\n<p>The framework (Spring) is not mocking AuditService2 which is a class. This is injecting the actual bean</p>\n<p>The framework does mock AuthorizationManager</p>\n<p>The only difference between two AuditService2 is a class , AuthorizationManager an interface</p>\n<p>This used to work in Spring boot 2.X, what is the issue here ?</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":4870108,"reputation":3891,"user_id":3926930,"accept_rate":60,"display_name":"Shafin Mahmud"},"score":0,"creation_date":1544585742,"post_id":53735448,"comment_id":94324555,"body_markdown":"`abstract=&quot;true&quot; ` is meant to inherit common properties in XML bean definitions, thus it reduces duplicate lines in XML. Abstract beans in Spring are somewhat different from abstract classes.","body":"<code>abstract=&quot;true&quot; </code> is meant to inherit common properties in XML bean definitions, thus it reduces duplicate lines in XML. Abstract beans in Spring are somewhat different from abstract classes."},{"owner":{"account_id":14928734,"reputation":23,"user_id":10778707,"display_name":"Ojama Tang"},"score":0,"creation_date":1544591505,"post_id":53735448,"comment_id":94325807,"body_markdown":"could you tell me how to create An abstract bean at spring boot? I want to code reuse.","body":"could you tell me how to create An abstract bean at spring boot? I want to code reuse."},{"owner":{"account_id":4870108,"reputation":3891,"user_id":3926930,"accept_rate":60,"display_name":"Shafin Mahmud"},"score":0,"creation_date":1544592412,"post_id":53735448,"comment_id":94326069,"body_markdown":"do you have any concrete class for `AbstractProcessTask` abstract class ?","body":"do you have any concrete class for <code>AbstractProcessTask</code> abstract class ?"},{"owner":{"account_id":14928734,"reputation":23,"user_id":10778707,"display_name":"Ojama Tang"},"score":0,"creation_date":1544593125,"post_id":53735448,"comment_id":94326273,"body_markdown":"Of course,They need the same attributes and methods.","body":"Of course,They need the same attributes and methods."}],"answers":[{"tags":[],"owner":{"account_id":4870108,"reputation":3891,"user_id":3926930,"accept_rate":60,"display_name":"Shafin Mahmud"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1544610654,"creation_date":1544594259,"answer_id":53736885,"question_id":53735448,"body_markdown":"Using `@Component` over an abstract class would not help Spring to create a bean from that (As of course, you know, you can not instantiate an object from an abstract class). Use `@Component` annotation over the concrete classes.\r\n\r\n    @Component\r\n    public class MyProcessTask extends AbstractProcessTask {\r\n    ...\r\n    }\r\n\r\nAnd the rest are okay. If spring finds the concrete classes in the scan path, the associated beans will be created automatically.\r\n\r\nDon&#39;t confuse with attribute &#39;abstract=true&#39;\r\n--------------------------------------------\r\nWhen you mention the attribute `abstract=true` in a bean declaration, you are just abstracting the bean. Abstract beans in Spring are somewhat different from abstract classes. In fact, the abstract bean in Spring doesn&#39;t even have to be mapped to any class.\r\n\r\nSee this nice answer for more about [What is meant by abstract=“true” in spring?\r\n][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/9397532/what-is-meant-by-abstract-true-in-spring","title":"How to use abstract classes in Spring Boot?","body":"<p>Using <code>@Component</code> over an abstract class would not help Spring to create a bean from that (As of course, you know, you can not instantiate an object from an abstract class). Use <code>@Component</code> annotation over the concrete classes.</p>\n\n<pre><code>@Component\npublic class MyProcessTask extends AbstractProcessTask {\n...\n}\n</code></pre>\n\n<p>And the rest are okay. If spring finds the concrete classes in the scan path, the associated beans will be created automatically.</p>\n\n<h2>Don't confuse with attribute 'abstract=true'</h2>\n\n<p>When you mention the attribute <code>abstract=true</code> in a bean declaration, you are just abstracting the bean. Abstract beans in Spring are somewhat different from abstract classes. In fact, the abstract bean in Spring doesn't even have to be mapped to any class.</p>\n\n<p>See this nice answer for more about <a href=\"https://stackoverflow.com/questions/9397532/what-is-meant-by-abstract-true-in-spring\">What is meant by abstract=“true” in spring?\n</a></p>\n"},{"tags":[],"owner":{"account_id":9343731,"reputation":513,"user_id":6935577,"display_name":"Shariq"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1544594679,"creation_date":1544594679,"answer_id":53736979,"question_id":53735448,"body_markdown":"You can simply extend the abstract class with another class, and use  `@Component` in the subclass.  You may also need to implement any methods in the superclass. \r\n\r\n    @Component\r\n    public class AbstractChild extends AbstractProcessTask {\r\n    }","title":"How to use abstract classes in Spring Boot?","body":"<p>You can simply extend the abstract class with another class, and use  <code>@Component</code> in the subclass.  You may also need to implement any methods in the superclass. </p>\n\n<pre><code>@Component\npublic class AbstractChild extends AbstractProcessTask {\n}\n</code></pre>\n"}],"owner":{"account_id":14928734,"reputation":23,"user_id":10778707,"display_name":"Ojama Tang"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15643,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":53736885,"answer_count":2,"score":2,"last_activity_date":1695243640,"creation_date":1544583752,"question_id":53735448,"body_markdown":"    @Component\r\n    public abstract class AbstractProcessTask implements Task {\r\n\r\n      @Resource\r\n      protected WorkOrderEventService workOrderEventService;\r\n      @Resource\r\n      protected NodeService nodeService;\r\n      @Resource\r\n      protected ConfigReader configReader;\r\n\r\n      protected void updateStatus(WorkOrderEvent workOrderEvent, String status, String description) {\r\n        workOrderEvent.setStatus(status);\r\n        workOrderEvent.setComments(description);\r\n        workOrderEventService.saveWorkOrderEvent(workOrderEvent);\r\n      }\r\n    }\r\n\r\nI write a abstract class for use,But I don&#39;t know how to use.\r\nAt Old spring version,We can write abstract=&quot;true&quot; in xml.\r\nfor example:\r\n\r\n    &lt;bean id=&quot;BaseEventAction&quot; class=&quot;com.sinosig.evaluation.fcff.web.event.BasicEventAction&quot;\r\n            abstract=&quot;true&quot; parent=&quot;BaseAction&quot;&gt;\r\n            &lt;property name=&quot;rowFactory&quot; ref=&quot;FcffCacheAdapter&quot; /&gt;\r\n            &lt;property name=&quot;caculate&quot; ref=&quot;CaculateService&quot; /&gt;\r\n            &lt;property name=&quot;diffusion&quot; ref=&quot;DeffusionService&quot; /&gt;\r\n    &lt;/bean&gt;\r\n\r\nWhat should I do?","title":"How to use abstract classes in Spring Boot?","body":"<pre><code>@Component\npublic abstract class AbstractProcessTask implements Task {\n\n  @Resource\n  protected WorkOrderEventService workOrderEventService;\n  @Resource\n  protected NodeService nodeService;\n  @Resource\n  protected ConfigReader configReader;\n\n  protected void updateStatus(WorkOrderEvent workOrderEvent, String status, String description) {\n    workOrderEvent.setStatus(status);\n    workOrderEvent.setComments(description);\n    workOrderEventService.saveWorkOrderEvent(workOrderEvent);\n  }\n}\n</code></pre>\n<p>I write a abstract class for use,But I don't know how to use.\nAt Old spring version,We can write abstract=&quot;true&quot; in xml.\nfor example:</p>\n<pre><code>&lt;bean id=&quot;BaseEventAction&quot; class=&quot;com.sinosig.evaluation.fcff.web.event.BasicEventAction&quot;\n        abstract=&quot;true&quot; parent=&quot;BaseAction&quot;&gt;\n        &lt;property name=&quot;rowFactory&quot; ref=&quot;FcffCacheAdapter&quot; /&gt;\n        &lt;property name=&quot;caculate&quot; ref=&quot;CaculateService&quot; /&gt;\n        &lt;property name=&quot;diffusion&quot; ref=&quot;DeffusionService&quot; /&gt;\n&lt;/bean&gt;\n</code></pre>\n<p>What should I do?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1695226241,"post_id":77140232,"comment_id":135997113,"body_markdown":"“ this compatibility issue” — *what* compatibility issue? You have not explained exactly what problem you have.","body":"“ this compatibility issue” — <i>what</i> compatibility issue? You have not explained exactly what problem you have."}],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695243567,"creation_date":1695196107,"answer_id":77140350,"question_id":77140232,"body_markdown":"You neglected to detail the nature of your specific problem. I am guessing your problem is either or both of these issues: \r\n\r\n - The current version of [Jakarta EE][1] requires the use of `jakarta.*` package naming, a break from the past use of `javax.*` namespace. \r\n - The current version of the [Jakarta Servlet][2] spec drops some deprecated features. \r\n\r\nIn any case, your Servlet appears to be [this project](https://github.com/ceefour/webdav-servlet). Unfortunately, that project seems to show no activity in over nine years. So I assume that rules out any possibility of an update. \r\n\r\nIf you want to move to modern Jakarta technology, replace that Servlet with another providing your needed functionality. \r\n\r\nIf you need help in selecting an implementation of a [WebDAV][3] server, post on the sister site: https://softwarerecs.stackexchange.com/\r\n\r\n\r\n  [1]: https://jakarta.ee/\r\n  [2]: https://projects.eclipse.org/projects/ee4j.servlet\r\n  [3]: https://en.wikipedia.org/wiki/WebDAV","title":"How to upgrade from Java EE to Jakarta with webdav-servlet compatibility?","body":"<p>You neglected to detail the nature of your specific problem. I am guessing your problem is either or both of these issues:</p>\n<ul>\n<li>The current version of <a href=\"https://jakarta.ee/\" rel=\"nofollow noreferrer\">Jakarta EE</a> requires the use of <code>jakarta.*</code> package naming, a break from the past use of <code>javax.*</code> namespace.</li>\n<li>The current version of the <a href=\"https://projects.eclipse.org/projects/ee4j.servlet\" rel=\"nofollow noreferrer\">Jakarta Servlet</a> spec drops some deprecated features.</li>\n</ul>\n<p>In any case, your Servlet appears to be <a href=\"https://github.com/ceefour/webdav-servlet\" rel=\"nofollow noreferrer\">this project</a>. Unfortunately, that project seems to show no activity in over nine years. So I assume that rules out any possibility of an update.</p>\n<p>If you want to move to modern Jakarta technology, replace that Servlet with another providing your needed functionality.</p>\n<p>If you need help in selecting an implementation of a <a href=\"https://en.wikipedia.org/wiki/WebDAV\" rel=\"nofollow noreferrer\">WebDAV</a> server, post on the sister site: <a href=\"https://softwarerecs.stackexchange.com/\">https://softwarerecs.stackexchange.com/</a></p>\n"}],"owner":{"account_id":7057423,"reputation":1105,"user_id":5404157,"accept_rate":100,"display_name":"Dasma"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695243567,"creation_date":1695195090,"question_id":77140232,"body_markdown":"I am facing issues while upgrading from Java EE to Jakarta, specifically with the webdav-servlet. It appears that the current version of webdav-servlet does not support Jakarta. Currently, I am using OpenJdk 11.\r\n\r\nThe problem arises in the servlet-class section of the web.xml file:\r\n\r\n```xml\r\n&lt;servlet&gt;\r\n...\r\n\t\t&lt;servlet-name&gt;webdav&lt;/servlet-name&gt;\r\n\t\t&lt;servlet-class&gt;\r\n\t\t\tnet.sf.webdav.WebdavServlet\r\n\t\t&lt;/servlet-class&gt;\r\n..\r\n&lt;/servlet&gt;\r\n```\r\n\r\nAny suggestions or workarounds on how to resolve this compatibility issue would be greatly appreciated.","title":"How to upgrade from Java EE to Jakarta with webdav-servlet compatibility?","body":"<p>I am facing issues while upgrading from Java EE to Jakarta, specifically with the webdav-servlet. It appears that the current version of webdav-servlet does not support Jakarta. Currently, I am using OpenJdk 11.</p>\n<p>The problem arises in the servlet-class section of the web.xml file:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;servlet&gt;\n...\n        &lt;servlet-name&gt;webdav&lt;/servlet-name&gt;\n        &lt;servlet-class&gt;\n            net.sf.webdav.WebdavServlet\n        &lt;/servlet-class&gt;\n..\n&lt;/servlet&gt;\n</code></pre>\n<p>Any suggestions or workarounds on how to resolve this compatibility issue would be greatly appreciated.</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":277416,"reputation":681878,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":10,"creation_date":1516876396,"post_id":48440669,"comment_id":83872595,"body_markdown":"You don&#39;t. You only declare the beans which have a concrete subclass of that abstract class.","body":"You don&#39;t. You only declare the beans which have a concrete subclass of that abstract class."},{"owner":{"account_id":10639687,"reputation":121,"user_id":7835214,"display_name":"Diego Krupitza"},"score":0,"creation_date":1517836193,"post_id":48440669,"comment_id":84243129,"body_markdown":"This [link](https://docs.spring.io/spring-javaconfig/docs/1.0.0.m3/reference/html/creating-bean-definitions.html) of the spring documentation could help you! It shows the old xml and the new Java way!","body":"This <a href=\"https://docs.spring.io/spring-javaconfig/docs/1.0.0.m3/reference/html/creating-bean-definitions.html\" rel=\"nofollow noreferrer\">link</a> of the spring documentation could help you! It shows the old xml and the new Java way!"},{"owner":{"account_id":2358514,"reputation":9644,"user_id":2065796,"accept_rate":62,"display_name":"Sasha Shpota"},"score":0,"creation_date":1518363209,"post_id":48440669,"comment_id":84465378,"body_markdown":"Possible duplicate of [Bean definition inheritance with annotations?](https://stackoverflow.com/questions/23266175/bean-definition-inheritance-with-annotations)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/23266175/bean-definition-inheritance-with-annotations\">Bean definition inheritance with annotations?</a>"}],"answers":[{"comments":[{"owner":{"account_id":100270,"reputation":127154,"user_id":270371,"accept_rate":33,"display_name":"davidxxx"},"score":0,"creation_date":1516877147,"post_id":48440850,"comment_id":83873065,"body_markdown":"You are welcome. Indeed. You can also read this question : https://stackoverflow.com/questions/42713799/use-autowired-in-abstract-base-class. It gives relevant information.","body":"You are welcome. Indeed. You can also read this question : <a href=\"https://stackoverflow.com/questions/42713799/use-autowired-in-abstract-base-class\" title=\"use autowired in abstract base class\">stackoverflow.com/questions/42713799/&hellip;</a>. It gives relevant information."}],"tags":[],"owner":{"account_id":100270,"reputation":127154,"user_id":270371,"accept_rate":33,"display_name":"davidxxx"},"comment_count":1,"down_vote_count":1,"up_vote_count":20,"is_accepted":false,"score":19,"last_activity_date":1517385759,"creation_date":1516876729,"answer_id":48440850,"question_id":48440669,"body_markdown":"Write your abstract base class in plain Java (without any Spring coupling) :\r\n\r\n    public abstract class AbstractClass{   \r\n        private Sample1 sample1;\r\n        private Sample2 sample2;\r\n       \r\n        public AbstractClass(Sample1 sample1, Sample1 sample2){\r\n           this.sample1 = sample1;\r\n           this.sample2 = sample2;\r\n       }\r\n       ... \r\n    }\r\n\r\nNote that adding a constructor with parameters (both for the abstract class and the concrete class) makes injection easier and dependencies clearer.&lt;br&gt;\r\n\r\nThen you have two ways :\r\n\r\n1) Annotate the concrete class(es) with `@Component`.  \r\nSuch as :  \r\n\r\n    @Component\r\n    public class MyClass extends AbstractClass{   \r\n        public MyClass (Sample1 sample1, Sample1 sample2){\r\n            super(sample1, sample2);\r\n        }\r\n    }\r\n\r\nThis first way has the advantage to be short : just an annotation to add.  \r\nBut it makes de facto the subclass as a bean that may potentially be loaded by the Spring context.\r\n\r\n\r\n2) Alternatively, declare the bean in a `Configuration` class.  \r\nSuch as :\r\n   \r\n\r\n    @Configuration\r\n    public class MyConfig{\r\n      @Bean\r\n       public MyClass myClass(Sample1 sample1, Sample1 sample2){\r\n          return new MyClass(sample1, sample1);\r\n       }\r\n    }\r\n\r\nThis second way is more verbose but has the advantage to not modify the subclass code and also let clients of the class to decide whether the class should be a bean.\r\n\r\nEach approach has its advantages and its drawbacks.  \r\nSo to use according to the concrete requirement.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/46502450/interfaces-are-annotated-with-component-annotation-in-spring-ioc-di-what-could\r\n\r\n","title":"How to create a bean using @Bean annotation in Spring Boot for abstract class","body":"<p>Write your abstract base class in plain Java (without any Spring coupling) :</p>\n\n<pre><code>public abstract class AbstractClass{   \n    private Sample1 sample1;\n    private Sample2 sample2;\n\n    public AbstractClass(Sample1 sample1, Sample1 sample2){\n       this.sample1 = sample1;\n       this.sample2 = sample2;\n   }\n   ... \n}\n</code></pre>\n\n<p>Note that adding a constructor with parameters (both for the abstract class and the concrete class) makes injection easier and dependencies clearer.<br></p>\n\n<p>Then you have two ways :</p>\n\n<p>1) Annotate the concrete class(es) with <code>@Component</code>.<br>\nSuch as :  </p>\n\n<pre><code>@Component\npublic class MyClass extends AbstractClass{   \n    public MyClass (Sample1 sample1, Sample1 sample2){\n        super(sample1, sample2);\n    }\n}\n</code></pre>\n\n<p>This first way has the advantage to be short : just an annotation to add.<br>\nBut it makes de facto the subclass as a bean that may potentially be loaded by the Spring context.</p>\n\n<p>2) Alternatively, declare the bean in a <code>Configuration</code> class.<br>\nSuch as :</p>\n\n<pre><code>@Configuration\npublic class MyConfig{\n  @Bean\n   public MyClass myClass(Sample1 sample1, Sample1 sample2){\n      return new MyClass(sample1, sample1);\n   }\n}\n</code></pre>\n\n<p>This second way is more verbose but has the advantage to not modify the subclass code and also let clients of the class to decide whether the class should be a bean.</p>\n\n<p>Each approach has its advantages and its drawbacks.<br>\nSo to use according to the concrete requirement.</p>\n"},{"tags":[],"owner":{"account_id":2358514,"reputation":9644,"user_id":2065796,"accept_rate":62,"display_name":"Sasha Shpota"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1517318927,"creation_date":1517318454,"answer_id":48522462,"question_id":48440669,"body_markdown":"There is no need in converting this code. You only need to make the classes that extend `com.test.core.common.AbstractClass` declared as spring managed beans by either annotating them with `@Component` or `@Service` or declaring a method annotated with `@Bean` in your configuration class.\r\n\r\nGenerally **&quot;abstract bean&quot; is not needed in Java Configuration**, there is even no equivalent. It was needed in xml configuration for parameter inheritance which is now achievable with plain java methods. Find [example from Stephane Nicoll][1] who is Spring Core developer.\r\n\r\n\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/23266686/2065796","title":"How to create a bean using @Bean annotation in Spring Boot for abstract class","body":"<p>There is no need in converting this code. You only need to make the classes that extend <code>com.test.core.common.AbstractClass</code> declared as spring managed beans by either annotating them with <code>@Component</code> or <code>@Service</code> or declaring a method annotated with <code>@Bean</code> in your configuration class.</p>\n\n<p>Generally <strong>\"abstract bean\" is not needed in Java Configuration</strong>, there is even no equivalent. It was needed in xml configuration for parameter inheritance which is now achievable with plain java methods. Find <a href=\"https://stackoverflow.com/a/23266686/2065796\">example from Stephane Nicoll</a> who is Spring Core developer.</p>\n"},{"tags":[],"owner":{"account_id":2864238,"reputation":10897,"user_id":2458858,"accept_rate":85,"display_name":"tryingToLearn"},"comment_count":0,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1517677515,"creation_date":1517677515,"answer_id":48599816,"question_id":48440669,"body_markdown":"Since Java has it&#39;s own mechanism of abstract classes and inheritance in place, you don&#39;t need to do the coupling of following code in your spring coupling.\r\n\r\n    &lt;bean id=&quot;sample&quot; class=&quot;com.test.core.common.AbstractClass&quot; abstract=&quot;true&quot;&gt;\r\n        &lt;property name=&quot;sample1&quot; ref=&quot;sample1&quot; /&gt;\r\n         &lt;property name=&quot;sample2&quot; ref=&quot;sample2&quot; /&gt;\r\n    &lt;/bean&gt;\r\n\r\nIn XML config, you needed to do this to specify the template for inheritance of child beans. But since Springboot uses Java configuration, this part is handled directly with Java inheritance.\r\n\r\nWhat it means is that you can declare this abstract class as a normal Java abstract class and treat only the child classes as beans without worrying about the abstract parent class.","title":"How to create a bean using @Bean annotation in Spring Boot for abstract class","body":"<p>Since Java has it's own mechanism of abstract classes and inheritance in place, you don't need to do the coupling of following code in your spring coupling.</p>\n\n<pre><code>&lt;bean id=\"sample\" class=\"com.test.core.common.AbstractClass\" abstract=\"true\"&gt;\n    &lt;property name=\"sample1\" ref=\"sample1\" /&gt;\n     &lt;property name=\"sample2\" ref=\"sample2\" /&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>In XML config, you needed to do this to specify the template for inheritance of child beans. But since Springboot uses Java configuration, this part is handled directly with Java inheritance.</p>\n\n<p>What it means is that you can declare this abstract class as a normal Java abstract class and treat only the child classes as beans without worrying about the abstract parent class.</p>\n"},{"comments":[{"owner":{"account_id":2842013,"reputation":1289,"user_id":2441441,"accept_rate":65,"display_name":"user2441441"},"score":0,"creation_date":1682346754,"post_id":70221074,"comment_id":134196436,"body_markdown":"I got this subclassing the abstract class in the Config. Not sure why you removed your answer to my question, was my question wrong? \n https://stackoverflow.com/questions/76082820/design-classes-using-spring-boot-jpa-using-callbacks-of-generic-type","body":"I got this subclassing the abstract class in the Config. Not sure why you removed your answer to my question, was my question wrong?   <a href=\"https://stackoverflow.com/questions/76082820/design-classes-using-spring-boot-jpa-using-callbacks-of-generic-type\" title=\"design classes using spring boot jpa using callbacks of generic type\">stackoverflow.com/questions/76082820/&hellip;</a>"}],"tags":[],"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1638568807,"creation_date":1638568499,"answer_id":70221074,"question_id":48440669,"body_markdown":"When we *want to* instantiate an `abstract class` or an `interface` as a `@Bean` (*with [tag:spring-java-config]*), we can generally:\r\n\r\n1. Instantiate an [anonymous inner class][1].\r\n\r\n2. Override all abstract methods! ;(\r\n\r\nSo for a [Method injection][2], it would look like:\r\n\r\n    @Configuration\r\n    class FreakyConfig {\r\n      @Bean\r\n      @RequestScope // !! (stateful)\r\n      public MyFooBarDelegate delegate() {\r\n        return MyFooBarDelegate.of(...);\r\n      }\r\n      @Bean // singleton, stateless, abstract (no spring deps.)! ;)\r\n      public MyFooBarAbstractSingletonBean() {\r\n        return new MyFooBarAbstractSingletonBean() { // anonymous inner class!\r\n          @Override\r\n          protected MyFooBarDelegate fooBarDelegate() { // ...and override the (injected)/prescribed methods.\r\n            return delegate();\r\n          }\r\n        };\r\n      }\r\n    } // (stress) tested ;)\r\n\r\n----------\r\n\r\n\r\nAnother good(?) question: Where is that latest (&quot;current&quot;) [&quot;spring-javaconfig/docs&quot;][3]???\r\n\r\nsee also:\r\n\r\n- [1.4.6. Method Injection][5]\r\n- [Method Injection Article][6]\r\n- [1.5.3. Singleton Beans with Prototype-bean Dependencies][4]\r\n\r\n\r\n----------\r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/java/javaOO/anonymousclasses.html\r\n  [2]: https://docs.spring.io/spring-javaconfig/docs/1.0.0.M4/reference/htmlsingle/spring-javaconfig-reference.html#method-injection\r\n  [3]: https://docs.spring.io/spring-javaconfig/docs/\r\n  [4]: https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-scopes-sing-prot-interaction\r\n  [5]: https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-method-injection\r\n  [6]: https://spring.io/blog/2004/08/06/method-injection/","title":"How to create a bean using @Bean annotation in Spring Boot for abstract class","body":"<p>When we <em>want to</em> instantiate an <code>abstract class</code> or an <code>interface</code> as a <code>@Bean</code> (<em>with <a href=\"/questions/tagged/spring-java-config\" class=\"post-tag\" title=\"show questions tagged &#39;spring-java-config&#39;\" rel=\"tag\">spring-java-config</a></em>), we can generally:</p>\n<ol>\n<li><p>Instantiate an <a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/anonymousclasses.html\" rel=\"nofollow noreferrer\">anonymous inner class</a>.</p>\n</li>\n<li><p>Override all abstract methods! ;(</p>\n</li>\n</ol>\n<p>So for a <a href=\"https://docs.spring.io/spring-javaconfig/docs/1.0.0.M4/reference/htmlsingle/spring-javaconfig-reference.html#method-injection\" rel=\"nofollow noreferrer\">Method injection</a>, it would look like:</p>\n<pre><code>@Configuration\nclass FreakyConfig {\n  @Bean\n  @RequestScope // !! (stateful)\n  public MyFooBarDelegate delegate() {\n    return MyFooBarDelegate.of(...);\n  }\n  @Bean // singleton, stateless, abstract (no spring deps.)! ;)\n  public MyFooBarAbstractSingletonBean() {\n    return new MyFooBarAbstractSingletonBean() { // anonymous inner class!\n      @Override\n      protected MyFooBarDelegate fooBarDelegate() { // ...and override the (injected)/prescribed methods.\n        return delegate();\n      }\n    };\n  }\n} // (stress) tested ;)\n</code></pre>\n<hr />\n<p>Another good(?) question: Where is that latest (&quot;current&quot;) <a href=\"https://docs.spring.io/spring-javaconfig/docs/\" rel=\"nofollow noreferrer\">&quot;spring-javaconfig/docs&quot;</a>???</p>\n<p>see also:</p>\n<ul>\n<li><a href=\"https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-method-injection\" rel=\"nofollow noreferrer\">1.4.6. Method Injection</a></li>\n<li><a href=\"https://spring.io/blog/2004/08/06/method-injection/\" rel=\"nofollow noreferrer\">Method Injection Article</a></li>\n<li><a href=\"https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-scopes-sing-prot-interaction\" rel=\"nofollow noreferrer\">1.5.3. Singleton Beans with Prototype-bean Dependencies</a></li>\n</ul>\n<hr />\n"}],"owner":{"account_id":1827567,"reputation":1054,"user_id":1659875,"display_name":"spandey"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":33634,"favorite_count":0,"down_vote_count":0,"up_vote_count":23,"answer_count":4,"score":23,"last_activity_date":1695243497,"creation_date":1516876163,"question_id":48440669,"body_markdown":"I have requirement to migrate old style Spring project to Spring Boot.  Assume below code snippet I have to migrate to Spring Boot style.\r\n\r\nHere my ask , how to convert below abstract bean to `@Bean` ?  \r\n\r\n    &lt;bean id=&quot;sample&quot; class=&quot;com.test.core.common.AbstractClass&quot; abstract=&quot;true&quot;&gt;\r\n        &lt;property name=&quot;sample1&quot; ref=&quot;sample1&quot; /&gt;\r\n        &lt;property name=&quot;sample2&quot; ref=&quot;sample2&quot; /&gt;\r\n    &lt;/bean&gt;\r\n     ","title":"How to create a bean using @Bean annotation in Spring Boot for abstract class","body":"<p>I have requirement to migrate old style Spring project to Spring Boot.  Assume below code snippet I have to migrate to Spring Boot style.</p>\n<p>Here my ask , how to convert below abstract bean to <code>@Bean</code> ?</p>\n<pre><code>&lt;bean id=&quot;sample&quot; class=&quot;com.test.core.common.AbstractClass&quot; abstract=&quot;true&quot;&gt;\n    &lt;property name=&quot;sample1&quot; ref=&quot;sample1&quot; /&gt;\n    &lt;property name=&quot;sample2&quot; ref=&quot;sample2&quot; /&gt;\n&lt;/bean&gt;\n \n</code></pre>\n"},{"tags":["java","flutter","macos","android-studio","java-runtime-compiler"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1695210722,"post_id":77142127,"comment_id":135993192,"body_markdown":"install a second jdk and configure your ide to use that","body":"install a second jdk and configure your ide to use that"},{"owner":{"account_id":29397161,"reputation":21,"user_id":22524251,"display_name":"Jaimin Modi"},"score":0,"creation_date":1695211839,"post_id":77142127,"comment_id":135993425,"body_markdown":"@Stultuske How to install, can you please guide? I need to use it inside Android Studio.","body":"@Stultuske How to install, can you please guide? I need to use it inside Android Studio."},{"owner":{"account_id":25676050,"reputation":64,"user_id":19439460,"display_name":"nickklon"},"score":0,"creation_date":1695218344,"post_id":77142127,"comment_id":135995168,"body_markdown":"If you need Java 17 for other projects, jenv works great to manage multiple java versions https://github.com/jenv/jenv","body":"If you need Java 17 for other projects, jenv works great to manage multiple java versions <a href=\"https://github.com/jenv/jenv\" rel=\"nofollow noreferrer\">github.com/jenv/jenv</a>"}],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695241936,"creation_date":1695241271,"answer_id":77145720,"question_id":77142127,"body_markdown":"## Install another JDK\r\n\r\nYou can install multiple JDKs on your Mac. You can have a [JDK][1] for [Java 11][2] as well as a JDK for [Java 17][3]. And perhaps you might want another JDK for the new [Java 21][4] that arrived yesterday. These can all live together, side-by-side.\r\n\r\nEach JDK is just a folder full of files. **You can add JDKs, and delete JDKs, at will.** \r\n\r\nThe [environment variable][5] `JAVA_HOME` is a hint various software as to which JDK you would like to use by default.\r\n\r\nYou might find a feature within [*Android Studio*][6] to install another JDK. (At least the sibling product, IntelliJ, offers such a feature.)\r\n\r\n### Configure project\r\n\r\nWithin your project in *Android Studio*, you need to set some settings to indicate which of your installed JDKs should be used for compiling, building, and executing your app. See the *Android Studio* [documentation][7]. \r\n\r\n### *SDKMAN!*\r\n\r\nPersonally, I find it easiest to install [SDKMAN!][8], a bunch of [shell scripts][9] that manage installing/uninstalling JDKs (and other such kits). This works well on [macOS][10]. \r\n\r\nSDKMAN! is designed to be utterly simple to use.\r\n\r\nOn a console such as [*Terminal.app*][11], execute:\r\n\r\n - `sdk list java`&lt;br/&gt;See a list of all JDK products from vendors who chose to submit their data to the SDKMAN! database. From this list you copy the exact name of the JDK product you want to install. The list of products indicates any you have currently installed.\r\n - `sdk install java product_name_goes_here`&lt;br/&gt;Install the JDK product of your choosing. Takes a moment to download and install. At the end, SDKMAN! prompts you to specify whether you want to make this newly installed JDK the default.\r\n - `sdk uninstall java product_name_goes_here`&lt;br/&gt;Removes that particular JDK product from your Mac.\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Java_Development_Kit\r\n  [2]: https://en.wikipedia.org/wiki/Java_version_history#Java_11\r\n  [3]: https://en.wikipedia.org/wiki/Java_version_history#Java_17\r\n  [4]: https://en.wikipedia.org/wiki/Java_version_history#Java_21\r\n  [5]: https://en.wikipedia.org/wiki/Environment_variable\r\n  [6]: https://en.wikipedia.org/wiki/Android_Studio\r\n  [7]: https://developer.android.com/studio\r\n  [8]: https://sdkman.io/\r\n  [9]: https://en.wikipedia.org/wiki/Shell_script\r\n  [10]: https://en.wikipedia.org/wiki/MacOS\r\n  [11]: https://en.wikipedia.org/wiki/Terminal_(macOS)","title":"How to downgrade Java version in Mac system?","body":"<h2>Install another JDK</h2>\n<p>You can install multiple JDKs on your Mac. You can have a <a href=\"https://en.wikipedia.org/wiki/Java_Development_Kit\" rel=\"nofollow noreferrer\">JDK</a> for <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_11\" rel=\"nofollow noreferrer\">Java 11</a> as well as a JDK for <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_17\" rel=\"nofollow noreferrer\">Java 17</a>. And perhaps you might want another JDK for the new <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_21\" rel=\"nofollow noreferrer\">Java 21</a> that arrived yesterday. These can all live together, side-by-side.</p>\n<p>Each JDK is just a folder full of files. <strong>You can add JDKs, and delete JDKs, at will.</strong></p>\n<p>The <a href=\"https://en.wikipedia.org/wiki/Environment_variable\" rel=\"nofollow noreferrer\">environment variable</a> <code>JAVA_HOME</code> is a hint various software as to which JDK you would like to use by default.</p>\n<p>You might find a feature within <a href=\"https://en.wikipedia.org/wiki/Android_Studio\" rel=\"nofollow noreferrer\"><em>Android Studio</em></a> to install another JDK. (At least the sibling product, IntelliJ, offers such a feature.)</p>\n<h3>Configure project</h3>\n<p>Within your project in <em>Android Studio</em>, you need to set some settings to indicate which of your installed JDKs should be used for compiling, building, and executing your app. See the <em>Android Studio</em> <a href=\"https://developer.android.com/studio\" rel=\"nofollow noreferrer\">documentation</a>.</p>\n<h3><em>SDKMAN!</em></h3>\n<p>Personally, I find it easiest to install <a href=\"https://sdkman.io/\" rel=\"nofollow noreferrer\">SDKMAN!</a>, a bunch of <a href=\"https://en.wikipedia.org/wiki/Shell_script\" rel=\"nofollow noreferrer\">shell scripts</a> that manage installing/uninstalling JDKs (and other such kits). This works well on <a href=\"https://en.wikipedia.org/wiki/MacOS\" rel=\"nofollow noreferrer\">macOS</a>.</p>\n<p>SDKMAN! is designed to be utterly simple to use.</p>\n<p>On a console such as <a href=\"https://en.wikipedia.org/wiki/Terminal_(macOS)\" rel=\"nofollow noreferrer\"><em>Terminal.app</em></a>, execute:</p>\n<ul>\n<li><code>sdk list java</code><br/>See a list of all JDK products from vendors who chose to submit their data to the SDKMAN! database. From this list you copy the exact name of the JDK product you want to install. The list of products indicates any you have currently installed.</li>\n<li><code>sdk install java product_name_goes_here</code><br/>Install the JDK product of your choosing. Takes a moment to download and install. At the end, SDKMAN! prompts you to specify whether you want to make this newly installed JDK the default.</li>\n<li><code>sdk uninstall java product_name_goes_here</code><br/>Removes that particular JDK product from your Mac.</li>\n</ul>\n"}],"owner":{"account_id":29397161,"reputation":21,"user_id":22524251,"display_name":"Jaimin Modi"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":326,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1695241936,"creation_date":1695210663,"question_id":77142127,"body_markdown":"I am using mac and inside mac using Android Stuidio, I have done all setup and now My project requires Java version 11 but currently I have Java version 17.\r\n\r\nI have checked Java version with this command as : **java --version** and it gives me below output in terminal : \r\n&gt; \r\n&gt; openjdk 17.0.6 2023-01-17\r\n&gt; OpenJDK Runtime Environment (build 17.0.6+0-17.0.6b829.9-10027231)\r\n&gt; OpenJDK 64-Bit Server VM (build 17.0.6+0-17.0.6b829.9-10027231, mixed mode)\r\n\r\nHow can I change this to:\r\n\r\n**openjdk 11.0.20.1 2023-08-24**\r\n\r\n\r\n\r\nI have tried explain my issue and expecting the solution for that.","title":"How to downgrade Java version in Mac system?","body":"<p>I am using mac and inside mac using Android Stuidio, I have done all setup and now My project requires Java version 11 but currently I have Java version 17.</p>\n<p>I have checked Java version with this command as : <strong>java --version</strong> and it gives me below output in terminal :</p>\n<blockquote>\n<p>openjdk 17.0.6 2023-01-17\nOpenJDK Runtime Environment (build 17.0.6+0-17.0.6b829.9-10027231)\nOpenJDK 64-Bit Server VM (build 17.0.6+0-17.0.6b829.9-10027231, mixed mode)</p>\n</blockquote>\n<p>How can I change this to:</p>\n<p><strong>openjdk 11.0.20.1 2023-08-24</strong></p>\n<p>I have tried explain my issue and expecting the solution for that.</p>\n"},{"tags":["java","automation","cucumber"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1694571998,"post_id":77088942,"comment_id":135907594,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":29422577,"reputation":1,"user_id":22543998,"display_name":"Gabriel Dias"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695241910,"creation_date":1694520340,"question_id":77088942,"body_markdown":"I&#39;m running WEB automation with the maven command, Ex: mvn clean install .... tag and etc..\r\n\r\nSo far ok, no problems, but when I run the Allure server to see the report, it is doubling the test values.\r\n\r\n1. It is the feature file with the scenarios.\r\n\r\nThe 2. It&#39;s the surefire suite.\r\n\r\nHow can I prevent surefire suite from being generated?\r\n\r\nRemove the maven sufire","title":"Allure server is generating 2 reports - Cucumber and Surefire Suite","body":"<p>I'm running WEB automation with the maven command, Ex: mvn clean install .... tag and etc..</p>\n<p>So far ok, no problems, but when I run the Allure server to see the report, it is doubling the test values.</p>\n<ol>\n<li>It is the feature file with the scenarios.</li>\n</ol>\n<p>The 2. It's the surefire suite.</p>\n<p>How can I prevent surefire suite from being generated?</p>\n<p>Remove the maven sufire</p>\n"},{"tags":["java","android","gradle"],"answers":[{"tags":[],"owner":{"account_id":3766160,"reputation":2568,"user_id":3129644,"accept_rate":83,"display_name":"Andrew"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695241462,"creation_date":1695241462,"answer_id":77145737,"question_id":77145736,"body_markdown":"This error arises due to a version mismatch between the JDK used by the Android Gradle Plugin (AGP) and the JDK that compiled certain classes in your project. Here&#39;s a breakdown of the issue and two potential solutions:\r\n\r\n## **Solution 1: Update JDK Version in Android Studio**\r\n\r\nIn Android Studio, go to &quot;Project Structure&quot; → &quot;Project&quot; → &quot;Gradle&quot; → &quot;Gradle JDK&quot; and choose or add a newer JDK version (like 17) that matches the requirements of the AGP version you are using.[![enter image description here][1]][1]\r\n\r\n\r\nBTW this solution may cause another issue. \r\n\r\n    The project is using an incompatible version (AGP 8.1.1) of the Android Gradle plugin. Latest supported version is AGP 7.3.0\r\n    See Android Studio &amp; AGP compatibility options.\r\nWhich means that Android Studio doesn&#39;t match the newest AGPT. This link [enter link description here][2] shows you that matching table Android Studio to AGP version.\r\n\r\nPlease note that modifying the JDK settings in Android Studio would only affect the current project, and it won&#39;t interfere with other projects that might be using different JDK versions.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/95VrX.png\r\n  [2]: https://developer.android.com/studio/releases#android_gradle_plugin_and_android_studio_compatibility\r\n\r\n## **Solution 2: Downgrade AGP and Related Plugins**\r\n\r\nModify your gradle-wrapper.properties file to specify a compatible Gradle distribution:\r\n\r\nBefore Change:\r\n\r\n    distributionUrl=https\\://services.gradle.org/distributions/gradle-8.0-bin.zip\r\n\r\nAfter Change:\r\n\r\n    distributionUrl=https\\://services.gradle.org/distributions/gradle-7.0.2-all.zip\r\n\r\nAdjust the versions of AGP and other plugins in your project-level build.gradle file:\r\n\r\nBefore Change:\r\n\r\n    plugins {\r\n        id &#39;com.android.application&#39; version &#39;8.1.1&#39; apply false\r\n        id &#39;com.android.library&#39; version &#39;8.1.1&#39; apply false\r\n        id &#39;org.jetbrains.kotlin.android&#39; version &#39;1.6.0&#39; apply false\r\n    }\r\n\r\nAfter Change: \r\n\r\n    plugins {\r\n            id &#39;com.android.application&#39; version &#39;7.0.4&#39; apply false\r\n            id &#39;com.android.library&#39; version &#39;7.0.4&#39; apply false\r\n            id &#39;org.jetbrains.kotlin.android&#39; version &#39;1.8.20&#39; apply false\r\n        }\r\n\r\nBy downgrading, you align the AGP version with the currently set default JDK version for your project, circumventing the compatibility issues without necessitating changes to the JDK setup.\r\n\r\n## **Understanding the Issue:**\r\n\r\nUnderstanding the Issue\r\nIn Android development, it&#39;s vital to recognize the distinction between the Java version used at the application level and the JDK version that the Android Gradle Plugin (AGP) utilizes during the build process. These two entities, though related, serve different purposes:\r\n\r\nJava Version at Application Level:\r\n\r\nThis version is specified in the build.gradle file at the app module level. It dictates the version of Java used to compile the code that will run on the Android device. This version doesn&#39;t have a direct correlation with the issue at hand. Here is an example of where you might specify the Java version in the app-level build.gradle file:\r\n\r\n    android {\r\n        compileOptions {\r\n            sourceCompatibility JavaVersion.VERSION_1_8\r\n            targetCompatibility JavaVersion.VERSION_1_8\r\n        }\r\n    }\r\n\r\nJDK Version Required by AGP:\r\n\r\nThe AGP, which runs on your development machine, requires a specific version of the JDK to function. This version is not necessarily the same as the Java version used to compile your application code. The error message you encountered pertains to this JDK version, which was incompatible with the AGP version you were using. Here is an example of where you might specify the AGP version in the project-level build.gradle file:\r\n\r\n    plugins {\r\n        id &#39;com.android.application&#39; version &#39;8.1.1&#39; apply false\r\n        id &#39;com.android.library&#39; version &#39;8.1.1&#39; apply false\r\n        id &#39;org.jetbrains.kotlin.android&#39; version &#39;1.8.20&#39; apply false\r\n    }\r\n\r\nManaging JDK Versions in Android Studio:\r\n\r\nAGP versions have specific JDK version requirements. For instance, AGP version 8.0 mandates the use of JDK 17. However, you don&#39;t necessarily need to alter the global JAVA_HOME setting on your machine to meet this requirement. Android Studio allows you to specify the JDK version at the project level, meaning changes will only affect the current project and not interfere with others. You can adjust this in the Android Studio project structure settings, thereby preventing conflicts with other projects that may require different JDK versions.\r\n","title":"Android Studio Error: Incompatible Java Runtime Version while Using Android Gradle Plugin","body":"<p>This error arises due to a version mismatch between the JDK used by the Android Gradle Plugin (AGP) and the JDK that compiled certain classes in your project. Here's a breakdown of the issue and two potential solutions:</p>\n<h2><strong>Solution 1: Update JDK Version in Android Studio</strong></h2>\n<p>In Android Studio, go to &quot;Project Structure&quot; → &quot;Project&quot; → &quot;Gradle&quot; → &quot;Gradle JDK&quot; and choose or add a newer JDK version (like 17) that matches the requirements of the AGP version you are using.<a href=\"https://i.stack.imgur.com/95VrX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/95VrX.png\" alt=\"enter image description here\" /></a></p>\n<p>BTW this solution may cause another issue.</p>\n<pre><code>The project is using an incompatible version (AGP 8.1.1) of the Android Gradle plugin. Latest supported version is AGP 7.3.0\nSee Android Studio &amp; AGP compatibility options.\n</code></pre>\n<p>Which means that Android Studio doesn't match the newest AGPT. This link <a href=\"https://developer.android.com/studio/releases#android_gradle_plugin_and_android_studio_compatibility\" rel=\"nofollow noreferrer\">enter link description here</a> shows you that matching table Android Studio to AGP version.</p>\n<p>Please note that modifying the JDK settings in Android Studio would only affect the current project, and it won't interfere with other projects that might be using different JDK versions.</p>\n<h2><strong>Solution 2: Downgrade AGP and Related Plugins</strong></h2>\n<p>Modify your gradle-wrapper.properties file to specify a compatible Gradle distribution:</p>\n<p>Before Change:</p>\n<pre><code>distributionUrl=https\\://services.gradle.org/distributions/gradle-8.0-bin.zip\n</code></pre>\n<p>After Change:</p>\n<pre><code>distributionUrl=https\\://services.gradle.org/distributions/gradle-7.0.2-all.zip\n</code></pre>\n<p>Adjust the versions of AGP and other plugins in your project-level build.gradle file:</p>\n<p>Before Change:</p>\n<pre><code>plugins {\n    id 'com.android.application' version '8.1.1' apply false\n    id 'com.android.library' version '8.1.1' apply false\n    id 'org.jetbrains.kotlin.android' version '1.6.0' apply false\n}\n</code></pre>\n<p>After Change:</p>\n<pre><code>plugins {\n        id 'com.android.application' version '7.0.4' apply false\n        id 'com.android.library' version '7.0.4' apply false\n        id 'org.jetbrains.kotlin.android' version '1.8.20' apply false\n    }\n</code></pre>\n<p>By downgrading, you align the AGP version with the currently set default JDK version for your project, circumventing the compatibility issues without necessitating changes to the JDK setup.</p>\n<h2><strong>Understanding the Issue:</strong></h2>\n<p>Understanding the Issue\nIn Android development, it's vital to recognize the distinction between the Java version used at the application level and the JDK version that the Android Gradle Plugin (AGP) utilizes during the build process. These two entities, though related, serve different purposes:</p>\n<p>Java Version at Application Level:</p>\n<p>This version is specified in the build.gradle file at the app module level. It dictates the version of Java used to compile the code that will run on the Android device. This version doesn't have a direct correlation with the issue at hand. Here is an example of where you might specify the Java version in the app-level build.gradle file:</p>\n<pre><code>android {\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n}\n</code></pre>\n<p>JDK Version Required by AGP:</p>\n<p>The AGP, which runs on your development machine, requires a specific version of the JDK to function. This version is not necessarily the same as the Java version used to compile your application code. The error message you encountered pertains to this JDK version, which was incompatible with the AGP version you were using. Here is an example of where you might specify the AGP version in the project-level build.gradle file:</p>\n<pre><code>plugins {\n    id 'com.android.application' version '8.1.1' apply false\n    id 'com.android.library' version '8.1.1' apply false\n    id 'org.jetbrains.kotlin.android' version '1.8.20' apply false\n}\n</code></pre>\n<p>Managing JDK Versions in Android Studio:</p>\n<p>AGP versions have specific JDK version requirements. For instance, AGP version 8.0 mandates the use of JDK 17. However, you don't necessarily need to alter the global JAVA_HOME setting on your machine to meet this requirement. Android Studio allows you to specify the JDK version at the project level, meaning changes will only affect the current project and not interfere with others. You can adjust this in the Android Studio project structure settings, thereby preventing conflicts with other projects that may require different JDK versions.</p>\n"}],"owner":{"account_id":3766160,"reputation":2568,"user_id":3129644,"accept_rate":83,"display_name":"Andrew"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":511,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695241462,"creation_date":1695241462,"question_id":77145736,"body_markdown":"I encountered an issue while working on my Android project. During the build process, Android Studio threw the following error:\r\n\r\n    An exception occurred applying plugin request [id: &#39;com.android.application&#39;]\r\n    &gt; Failed to apply plugin &#39;com.android.internal.application&#39;.\r\n       &gt; Could not create an instance of type com.android.build.gradle.internal.dsl.ApplicationExtensionImpl$AgpDecorated.\r\n          &gt; Could not create an instance of type com.android.build.gradle.internal.dsl.LintImpl$AgpDecorated.\r\n             &gt; Could not generate a decorated class for type LintImpl$AgpDecorated.\r\n                &gt; com/android/tools/lint/model/LintModelSeverity has been compiled by a more recent version of the Java Runtime (class file version 61.0), this version of the Java Runtime only recognizes class file versions up to 55.0\r\n\r\n\r\n**gradle-wrapper.properties**\r\n\r\n    distributionBase=GRADLE_USER_HOME\r\n    distributionPath=wrapper/dists\r\n    distributionUrl=https\\://services.gradle.org/distributions/gradle-8.0-bin.zip\r\n    zipStoreBase=GRADLE_USER_HOME\r\n    zipStorePath=wrapper/dists\r\n\r\n**Project Level build.gradle**\r\n\r\n    plugins {\r\n        id &#39;com.android.application&#39; version &#39;8.1.1&#39; apply false\r\n        id &#39;com.android.library&#39; version &#39;8.1.1&#39; apply false\r\n        id &#39;org.jetbrains.kotlin.android&#39; version &#39;1.8.20&#39; apply false\r\n    }\r\n\r\n**Java Version in Use**\r\nJDK 11.0.13 (as indicated in the project structure; accessible via &quot;Project Structure&quot; &gt; &quot;Project&quot; &gt; &quot;Gradle JDK&quot;)\r\n\r\nHow to fix this compatibility issue.\r\n","title":"Android Studio Error: Incompatible Java Runtime Version while Using Android Gradle Plugin","body":"<p>I encountered an issue while working on my Android project. During the build process, Android Studio threw the following error:</p>\n<pre><code>An exception occurred applying plugin request [id: 'com.android.application']\n&gt; Failed to apply plugin 'com.android.internal.application'.\n   &gt; Could not create an instance of type com.android.build.gradle.internal.dsl.ApplicationExtensionImpl$AgpDecorated.\n      &gt; Could not create an instance of type com.android.build.gradle.internal.dsl.LintImpl$AgpDecorated.\n         &gt; Could not generate a decorated class for type LintImpl$AgpDecorated.\n            &gt; com/android/tools/lint/model/LintModelSeverity has been compiled by a more recent version of the Java Runtime (class file version 61.0), this version of the Java Runtime only recognizes class file versions up to 55.0\n</code></pre>\n<p><strong>gradle-wrapper.properties</strong></p>\n<pre><code>distributionBase=GRADLE_USER_HOME\ndistributionPath=wrapper/dists\ndistributionUrl=https\\://services.gradle.org/distributions/gradle-8.0-bin.zip\nzipStoreBase=GRADLE_USER_HOME\nzipStorePath=wrapper/dists\n</code></pre>\n<p><strong>Project Level build.gradle</strong></p>\n<pre><code>plugins {\n    id 'com.android.application' version '8.1.1' apply false\n    id 'com.android.library' version '8.1.1' apply false\n    id 'org.jetbrains.kotlin.android' version '1.8.20' apply false\n}\n</code></pre>\n<p><strong>Java Version in Use</strong>\nJDK 11.0.13 (as indicated in the project structure; accessible via &quot;Project Structure&quot; &gt; &quot;Project&quot; &gt; &quot;Gradle JDK&quot;)</p>\n<p>How to fix this compatibility issue.</p>\n"},{"tags":["java","android","android-studio","telephony"],"owner":{"account_id":15182528,"reputation":1,"user_id":10955467,"display_name":"asbbafb"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695241255,"creation_date":1695241255,"question_id":77145716,"body_markdown":"I am working on an android app using the Telephony library built into the android SDK to test emergency alerts. I have a bunch of import statements.\r\n\r\nSuch as\r\n\r\n```\r\nimport com.android.cellbroadcastservice.CbGeoUtils;\r\nimport com.android.cellbroadcastservice.GsmAlphabet;\r\nimport com.android.cellbroadcastservice.SmsCbHeader;\r\nimport com.android.cellbroadcastservice.SmsCbHeader.DataCodingScheme;\r\nimport com.android.internal.telephony.SmsConstants;\r\nimport android.telephony.CbGeoUtils.Circle;\r\nimport android.telephony.CbGeoUtils.Geometry;\r\nimport android.telephony.CbGeoUtils.LatLng;\r\nimport android.telephony.CbGeoUtils.Polygon;\r\nimport android.telephony.Rlog;\r\nimport android.telephony.SmsCbLocation;\r\nimport android.telephony.SmsCbMessage;\r\nimport static android.telephony.SmsCbEtwsInfo.ETWS_WARNING_TYPE_EARTHQUAKE;\r\nimport static android.telephony.SmsCbEtwsInfo.ETWS_WARNING_TYPE_EARTHQUAKE_AND_TSUNAMI;\r\nimport static android.telephony.SmsCbEtwsInfo.ETWS_WARNING_TYPE_OTHER_EMERGENCY;\r\nimport static android.telephony.SmsCbEtwsInfo.ETWS_WARNING_TYPE_TEST_MESSAGE;\r\nimport static android.telephony.SmsCbEtwsInfo.ETWS_WARNING_TYPE_TSUNAMI;\r\n\r\n```\r\n\r\nHowever, these all show up as red and say that they cannot find the symbol after the telephony import. Some modules do exist, such as \r\n\r\n`import android.telephony.SubscriptionManager;`\r\n\r\n\r\nwhich works without problem.\r\n\r\n\r\nBuilding also gives me the error \r\n\r\n\r\n```\r\nerror: cannot find symbol\r\nimport static android.telephony.SmsCbEtwsInfo.ETWS_WARNING_TYPE_EARTHQUAKE;\r\n                               ^\r\n  symbol:   class SmsCbEtwsInfo\r\n  location: package android.telephony\r\n```\r\n\r\nSo I am rather stuck. I went into my SDK folder and files such as SmsCbEtwsInfo.java were in the telephony folder, along with other modules I could access. So I have no idea why I can&#39;t seem to import these specific modules. I have tried researching for similar instances of this but to no avail\r\n\r\n\r\n\r\n\r\nI also tried Invalidating and restarting the cache","title":"Android Studio - Cannot resolve symbol SmsCbEtwsInfo among others","body":"<p>I am working on an android app using the Telephony library built into the android SDK to test emergency alerts. I have a bunch of import statements.</p>\n<p>Such as</p>\n<pre><code>import com.android.cellbroadcastservice.CbGeoUtils;\nimport com.android.cellbroadcastservice.GsmAlphabet;\nimport com.android.cellbroadcastservice.SmsCbHeader;\nimport com.android.cellbroadcastservice.SmsCbHeader.DataCodingScheme;\nimport com.android.internal.telephony.SmsConstants;\nimport android.telephony.CbGeoUtils.Circle;\nimport android.telephony.CbGeoUtils.Geometry;\nimport android.telephony.CbGeoUtils.LatLng;\nimport android.telephony.CbGeoUtils.Polygon;\nimport android.telephony.Rlog;\nimport android.telephony.SmsCbLocation;\nimport android.telephony.SmsCbMessage;\nimport static android.telephony.SmsCbEtwsInfo.ETWS_WARNING_TYPE_EARTHQUAKE;\nimport static android.telephony.SmsCbEtwsInfo.ETWS_WARNING_TYPE_EARTHQUAKE_AND_TSUNAMI;\nimport static android.telephony.SmsCbEtwsInfo.ETWS_WARNING_TYPE_OTHER_EMERGENCY;\nimport static android.telephony.SmsCbEtwsInfo.ETWS_WARNING_TYPE_TEST_MESSAGE;\nimport static android.telephony.SmsCbEtwsInfo.ETWS_WARNING_TYPE_TSUNAMI;\n\n</code></pre>\n<p>However, these all show up as red and say that they cannot find the symbol after the telephony import. Some modules do exist, such as</p>\n<p><code>import android.telephony.SubscriptionManager;</code></p>\n<p>which works without problem.</p>\n<p>Building also gives me the error</p>\n<pre><code>error: cannot find symbol\nimport static android.telephony.SmsCbEtwsInfo.ETWS_WARNING_TYPE_EARTHQUAKE;\n                               ^\n  symbol:   class SmsCbEtwsInfo\n  location: package android.telephony\n</code></pre>\n<p>So I am rather stuck. I went into my SDK folder and files such as SmsCbEtwsInfo.java were in the telephony folder, along with other modules I could access. So I have no idea why I can't seem to import these specific modules. I have tried researching for similar instances of this but to no avail</p>\n<p>I also tried Invalidating and restarting the cache</p>\n"},{"tags":["java","class","parameters","constructor","properties"],"comments":[{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":1,"creation_date":1695240274,"post_id":77145611,"comment_id":135999714,"body_markdown":"Does it make a _technical_ difference? No. Does it make _any_ difference? Yes. Naming the constructor parameter `color` makes it clear what that parameter means. Readability is always important.","body":"Does it make a <i>technical</i> difference? No. Does it make <i>any</i> difference? Yes. Naming the constructor parameter <code>color</code> makes it clear what that parameter means. Readability is always important."},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":1,"creation_date":1695240475,"post_id":77145611,"comment_id":135999759,"body_markdown":"Technically it makes no difference, but if you have a class `Car` with properties `color`, `maxSpeed`  and `brand` and a constructor of that class with parameters `param1`, `param2` and `param3`:  do you know what parameter sets which property? Is `param1` the `color`, the `maxSpeed` or the `brand`? If one parameter is a distinct type that may help, but for the other parameters you are lost.","body":"Technically it makes no difference, but if you have a class <code>Car</code> with properties <code>color</code>, <code>maxSpeed</code>  and <code>brand</code> and a constructor of that class with parameters <code>param1</code>, <code>param2</code> and <code>param3</code>:  do you know what parameter sets which property? Is <code>param1</code> the <code>color</code>, the <code>maxSpeed</code> or the <code>brand</code>? If one parameter is a distinct type that may help, but for the other parameters you are lost."},{"owner":{"account_id":1352170,"reputation":34246,"user_id":1291492,"accept_rate":100,"display_name":"ControlAltDel"},"score":0,"creation_date":1695240702,"post_id":77145611,"comment_id":135999791,"body_markdown":"In general I hate having constructors with parameters and prefer using POJOs instead. IMO if you&#39;ve already got getter and setter methods, constructors with parameters are unnecessary.","body":"In general I hate having constructors with parameters and prefer using POJOs instead. IMO if you&#39;ve already got getter and setter methods, constructors with parameters are unnecessary."},{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1695244484,"post_id":77145611,"comment_id":136000346,"body_markdown":"Who the heck has setter methods?","body":"Who the heck has setter methods?"}],"answers":[{"tags":[],"owner":{"account_id":3588984,"reputation":115,"user_id":2995460,"display_name":"anteastra"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1695240754,"creation_date":1695240754,"answer_id":77145675,"question_id":77145611,"body_markdown":"If class has field and there is parameter in a method with same name then happens &quot;shadowing&quot;, meaning that in that part of code you can access field of the class with &quot;this.&quot; reference. Your code will work. For better readability and better code culture you should have same names for constructor parameters and fields.","title":"Do the parameters of a constructor in Java have any connection with the properties of the class?","body":"<p>If class has field and there is parameter in a method with same name then happens &quot;shadowing&quot;, meaning that in that part of code you can access field of the class with &quot;this.&quot; reference. Your code will work. For better readability and better code culture you should have same names for constructor parameters and fields.</p>\n"},{"tags":[],"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1695241028,"creation_date":1695241028,"answer_id":77145698,"question_id":77145611,"body_markdown":"**No, the parameters dont have any connection with the properties of the class**. \r\n\r\nBut, *does it make a difference*? Well, **yes and no**. Let me explain:\r\n\r\n```java\r\nprivate String color;\r\nprivate int maxSpeed;\r\nprivate String brand;\r\n\r\npublic Car(String somevar, int somevar2, String somevar3) {\r\n\tthis.color = somevar;\r\n\tthis.maxSpeed = somevar2;\r\n\tthis.brand = somevar3;\r\n}\r\n```\r\n\r\n**Technically** code this way doesn&#39;t make difference, it will works fine.\r\n\r\nBut, imagine that someone - *not you* - created the `Car` class, and you will use it:\r\n\r\n[![weird IDE suggestions][1]][1]\r\n\r\nReading the IDE suggestions, **can you understood what each parameter means**? Probably no.\r\n\r\nSo, you don&#39;t need to use the same name of the fields in the parameters, **but it will make your code be more readable and understandable**.\r\n\r\n  [1]: https://i.stack.imgur.com/6fmzf.png","title":"Do the parameters of a constructor in Java have any connection with the properties of the class?","body":"<p><strong>No, the parameters dont have any connection with the properties of the class</strong>.</p>\n<p>But, <em>does it make a difference</em>? Well, <strong>yes and no</strong>. Let me explain:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private String color;\nprivate int maxSpeed;\nprivate String brand;\n\npublic Car(String somevar, int somevar2, String somevar3) {\n    this.color = somevar;\n    this.maxSpeed = somevar2;\n    this.brand = somevar3;\n}\n</code></pre>\n<p><strong>Technically</strong> code this way doesn't make difference, it will works fine.</p>\n<p>But, imagine that someone - <em>not you</em> - created the <code>Car</code> class, and you will use it:</p>\n<p><a href=\"https://i.stack.imgur.com/6fmzf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6fmzf.png\" alt=\"weird IDE suggestions\" /></a></p>\n<p>Reading the IDE suggestions, <strong>can you understood what each parameter means</strong>? Probably no.</p>\n<p>So, you don't need to use the same name of the fields in the parameters, <strong>but it will make your code be more readable and understandable</strong>.</p>\n"}],"owner":{"account_id":19961607,"reputation":5,"user_id":14629073,"display_name":"Ruben Virtic"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77145698,"answer_count":2,"score":0,"last_activity_date":1695241028,"creation_date":1695240055,"question_id":77145611,"body_markdown":"I&#39;m confused...\r\n\r\n```\r\npackage car;\r\n\r\npublic class Car {\r\n\r\n    private String color;\r\n    private int maxSpeed;\r\n    private String brand;\r\n\r\n    public Car(String somethingElse, int maxSpeed, String brand) {\r\n       this.color = somethingElse;\r\n       this.maxSpeed = maxSpeed;\r\n       this.brand = brand;\r\n    }\r\n\r\n    public String getColor() {\r\n        return color;\r\n    }\r\n\r\n    public void setColor(String color) {\r\n        this.color = color;\r\n    }\r\n\r\n    public int getMaxSpeed() {\r\n        return maxSpeed;\r\n    }\r\n\r\n    public void setMaxSpeed(int maxSpeed) {\r\n        this.maxSpeed = maxSpeed;\r\n    }\r\n\r\n    public String getBrand() {\r\n        return brand;\r\n    }\r\n\r\n    public void setBrand(String brand) {\r\n        this.brand = brand;\r\n    }\r\n\r\n}\r\n```\r\n\r\nI&#39;ve got this class right here and my question is do the parameters of the constructor have any connection with the properties of the class? Someone tried to convince me that the parameter of the constructor must have the same name as the property of the class. So I tried to change the name of the parameter from &quot;color&quot; to &quot;somethingElse&quot; and it seems to work... Why?\r\n\r\nWhat I know is that the &quot;this&quot; keyword is used to make it clear to the compiler that with &quot;this.color&quot; I&#39;m refering to the property &quot;color&quot; of the class. And with &quot;= color&quot; I&#39;m assigning the constructor&#39;s parameter color to the object&#39;s property color. But what should I do now? Should I name the constructor&#39;s parameter to &quot;color&quot; instead of &quot;somethingElse&quot;? And does it make a difference?\r\n\r\n**I&#39;m a beginner!** I know professionals might think my question is &quot;stupid&quot;.","title":"Do the parameters of a constructor in Java have any connection with the properties of the class?","body":"<p>I'm confused...</p>\n<pre><code>package car;\n\npublic class Car {\n\n    private String color;\n    private int maxSpeed;\n    private String brand;\n\n    public Car(String somethingElse, int maxSpeed, String brand) {\n       this.color = somethingElse;\n       this.maxSpeed = maxSpeed;\n       this.brand = brand;\n    }\n\n    public String getColor() {\n        return color;\n    }\n\n    public void setColor(String color) {\n        this.color = color;\n    }\n\n    public int getMaxSpeed() {\n        return maxSpeed;\n    }\n\n    public void setMaxSpeed(int maxSpeed) {\n        this.maxSpeed = maxSpeed;\n    }\n\n    public String getBrand() {\n        return brand;\n    }\n\n    public void setBrand(String brand) {\n        this.brand = brand;\n    }\n\n}\n</code></pre>\n<p>I've got this class right here and my question is do the parameters of the constructor have any connection with the properties of the class? Someone tried to convince me that the parameter of the constructor must have the same name as the property of the class. So I tried to change the name of the parameter from &quot;color&quot; to &quot;somethingElse&quot; and it seems to work... Why?</p>\n<p>What I know is that the &quot;this&quot; keyword is used to make it clear to the compiler that with &quot;this.color&quot; I'm refering to the property &quot;color&quot; of the class. And with &quot;= color&quot; I'm assigning the constructor's parameter color to the object's property color. But what should I do now? Should I name the constructor's parameter to &quot;color&quot; instead of &quot;somethingElse&quot;? And does it make a difference?</p>\n<p><strong>I'm a beginner!</strong> I know professionals might think my question is &quot;stupid&quot;.</p>\n"},{"tags":["java","json","jackson"],"comments":[{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":2,"creation_date":1488526462,"post_id":42573120,"comment_id":72279488,"body_markdown":"Valid JSON doesn&#39;t have duplicate keys, so a parsing library shouldn&#39;t work the way you&#39;re asking","body":"Valid JSON doesn&#39;t have duplicate keys, so a parsing library shouldn&#39;t work the way you&#39;re asking"},{"owner":{"account_id":1223725,"reputation":5602,"user_id":1189800,"display_name":"Chetan Joshi"},"score":0,"creation_date":1488528134,"post_id":42573120,"comment_id":72280277,"body_markdown":"SyntaxError: Duplicate key &#39;a&#39; on line 3","body":"SyntaxError: Duplicate key &#39;a&#39; on line 3"},{"owner":{"account_id":222337,"reputation":176,"user_id":480857,"display_name":"Justin Dennahower"},"score":2,"creation_date":1581972135,"post_id":42573120,"comment_id":106608515,"body_markdown":"duplicate keys is valid json. https://tools.ietf.org/html/rfc7159 &quot;The names within an object SHOULD be unique&quot;, not required to be unique.","body":"duplicate keys is valid json. <a href=\"https://tools.ietf.org/html/rfc7159\" rel=\"nofollow noreferrer\">tools.ietf.org/html/rfc7159</a> &quot;The names within an object SHOULD be unique&quot;, not required to be unique."},{"owner":{"account_id":466379,"reputation":17103,"user_id":871096,"accept_rate":52,"display_name":"Robert Dodier"},"score":1,"creation_date":1611560807,"post_id":42573120,"comment_id":116480934,"body_markdown":"@OneCricketeer I dunno. ECMA-404 (linked from json.org) says: &quot;The JSON syntax does not impose any restrictions on the strings used as names, does not require that name strings be unique, and does not assign any significance to the ordering of name/value pairs. These are all semantic considerations that may be defined by JSON processors or in specifications defining specific uses of JSON for data interchange.&quot;","body":"@OneCricketeer I dunno. ECMA-404 (linked from json.org) says: &quot;The JSON syntax does not impose any restrictions on the strings used as names, does not require that name strings be unique, and does not assign any significance to the ordering of name/value pairs. These are all semantic considerations that may be defined by JSON processors or in specifications defining specific uses of JSON for data interchange.&quot;"}],"answers":[{"comments":[{"owner":{"account_id":7505,"reputation":7034,"user_id":13075,"accept_rate":83,"display_name":"Henrik Aasted S&#248;rensen"},"score":1,"creation_date":1488528782,"post_id":42573515,"comment_id":72280593,"body_markdown":"I believe that to be the only viable approach as well. There is some information to get started in this answer: http://stackoverflow.com/a/25426227/13075","body":"I believe that to be the only viable approach as well. There is some information to get started in this answer: <a href=\"http://stackoverflow.com/a/25426227/13075\">stackoverflow.com/a/25426227/13075</a>"}],"tags":[],"owner":{"account_id":5953740,"reputation":6324,"user_id":4681060,"accept_rate":75,"display_name":"Krzysztof Cichocki"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1695240843,"creation_date":1488527800,"answer_id":42573515,"question_id":42573120,"body_markdown":"In the Jackson library you can read the JSON message token by token in a streaming way, then it would not eat anything from the message.","title":"Parsing a json which contains duplicate keys","body":"<p>In the Jackson library you can read the JSON message token by token in a streaming way, then it would not eat anything from the message.</p>\n"},{"comments":[{"owner":{"account_id":396974,"reputation":4632,"user_id":760854,"accept_rate":50,"display_name":"Atul Soman"},"score":0,"creation_date":1505109040,"post_id":42574594,"comment_id":79259359,"body_markdown":"Is there a way we can remove the duplicates and keep it as a single object rather than an array","body":"Is there a way we can remove the duplicates and keep it as a single object rather than an array"},{"owner":{"account_id":1735752,"reputation":2511,"user_id":1588361,"accept_rate":54,"display_name":"Ravi MCA"},"score":0,"creation_date":1505110418,"post_id":42574594,"comment_id":79259926,"body_markdown":"@AtulSoman Not possible as long as you are using duplicate keys.","body":"@AtulSoman Not possible as long as you are using duplicate keys."}],"tags":[],"owner":{"account_id":1735752,"reputation":2511,"user_id":1588361,"accept_rate":54,"display_name":"Ravi MCA"},"comment_count":2,"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1611560065,"creation_date":1488531774,"answer_id":42574594,"question_id":42573120,"body_markdown":"If you are flexible with json library you can make use of `net.sf.json.JSONObject`.\r\n\r\nThis library will retain the duplicated values by storing them into arrays. If multiple same keys are available it will create one key with all the values as Array.\r\n\r\nAnd also the coding part is just a single line. Once you parsed the json using net.sf.json.JSONObject then you can supply this to jackson library.\r\n    \r\n    JSONObject jsonObject = JSONObject.fromObject( &quot;{ \\&quot;a\\&quot;: \\&quot;a\\&quot;, \\&quot;a\\&quot;: { \\&quot;b\\&quot;: {},\\&quot;b\\&quot;: true}}&quot; );\r\n    \r\n    System.out.println( &quot;net.sf.json.JSONObject: &quot; + jsonObject );\r\n    \r\n    JsonNode jsonNode = new ObjectMapper().readTree( jsonObject.toString() );\r\n    \r\n    System.out.println( &quot;com.fasterxml.jackson.databind.JsonNode&quot; + jsonNode );\r\n\r\n\r\n**Output:** \r\n\r\n    net.sf.json.JSONObject: {&quot;a&quot;:[&quot;a&quot;,{&quot;b&quot;:[{},true]}]}\r\n    com.fasterxml.jackson.databind.JsonNode{&quot;a&quot;:[&quot;a&quot;,{&quot;b&quot;:[{},true]}]}\r\n\r\n\r\n**Maven dependency of `net.sf.json`**\r\n\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;net.sf.json-lib&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;json-lib&lt;/artifactId&gt;\r\n    \t&lt;version&gt;2.4&lt;/version&gt;\r\n    \t&lt;classifier&gt;jdk15&lt;/classifier&gt;\r\n    &lt;/dependency&gt;","title":"Parsing a json which contains duplicate keys","body":"<p>If you are flexible with json library you can make use of <code>net.sf.json.JSONObject</code>.</p>\n<p>This library will retain the duplicated values by storing them into arrays. If multiple same keys are available it will create one key with all the values as Array.</p>\n<p>And also the coding part is just a single line. Once you parsed the json using net.sf.json.JSONObject then you can supply this to jackson library.</p>\n<pre><code>JSONObject jsonObject = JSONObject.fromObject( &quot;{ \\&quot;a\\&quot;: \\&quot;a\\&quot;, \\&quot;a\\&quot;: { \\&quot;b\\&quot;: {},\\&quot;b\\&quot;: true}}&quot; );\n\nSystem.out.println( &quot;net.sf.json.JSONObject: &quot; + jsonObject );\n\nJsonNode jsonNode = new ObjectMapper().readTree( jsonObject.toString() );\n\nSystem.out.println( &quot;com.fasterxml.jackson.databind.JsonNode&quot; + jsonNode );\n</code></pre>\n<p><strong>Output:</strong></p>\n<pre><code>net.sf.json.JSONObject: {&quot;a&quot;:[&quot;a&quot;,{&quot;b&quot;:[{},true]}]}\ncom.fasterxml.jackson.databind.JsonNode{&quot;a&quot;:[&quot;a&quot;,{&quot;b&quot;:[{},true]}]}\n</code></pre>\n<p><strong>Maven dependency of <code>net.sf.json</code></strong></p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;net.sf.json-lib&lt;/groupId&gt;\n    &lt;artifactId&gt;json-lib&lt;/artifactId&gt;\n    &lt;version&gt;2.4&lt;/version&gt;\n    &lt;classifier&gt;jdk15&lt;/classifier&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":3970188,"reputation":1992,"user_id":3274974,"accept_rate":85,"display_name":"Edd"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12569,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":42574594,"answer_count":2,"score":8,"last_activity_date":1695240843,"creation_date":1488526320,"question_id":42573120,"body_markdown":"I&#39;m trying to parse json with invalid structure which has duplicate keys using `Jackson` library. If a json has duplicate keys, I would like to extract them as a `Collection`. \r\n\r\nExample of what I&#39;m trying to parse (the actual json that I&#39;m trying to parse comes from `Wireshark` json export):\r\n\r\n    {\r\n        &quot;a&quot;: &quot;a&quot;,\r\n        &quot;a&quot;: {\r\n            &quot;b&quot;: {\r\n            \r\n            },\r\n            &quot;b&quot;: true\r\n        }\r\n    }\r\n\r\nHowever, since this json has duplicate keys, only the last value is retained:\r\n\r\n    JsonNode tree = new ObjectMapper().readTree(json);\r\n    System.out.println(tree); // {&quot;a&quot;:{&quot;b&quot;:true}}\r\n\r\nI&#39;ve also tried the `Guava` module which has `Multimap` support, however it doesn&#39;t work as expected for nested json objects. \r\n\r\nExample using Guava module for the json that I have shown before:\r\n\r\n    ObjectMapper mapper = new ObjectMapper();\r\n    mapper.registerModule(new GuavaModule());\r\n    mapper.configure(DeserializationFeature.ACCEPT_SINGLE_VALUE_AS_ARRAY, true);\r\n\r\n    Multimap read = mapper.readValue(json, Multimap.class);\r\n    System.out.println(read); // {a=[a, {b=true}]}\r\n\r\nHow should I tackle this problem using `Jackson` library? Are there any other libraries which would support parsing of such json structure for java?","title":"Parsing a json which contains duplicate keys","body":"<p>I'm trying to parse json with invalid structure which has duplicate keys using <code>Jackson</code> library. If a json has duplicate keys, I would like to extract them as a <code>Collection</code>. </p>\n\n<p>Example of what I'm trying to parse (the actual json that I'm trying to parse comes from <code>Wireshark</code> json export):</p>\n\n<pre><code>{\n    \"a\": \"a\",\n    \"a\": {\n        \"b\": {\n\n        },\n        \"b\": true\n    }\n}\n</code></pre>\n\n<p>However, since this json has duplicate keys, only the last value is retained:</p>\n\n<pre><code>JsonNode tree = new ObjectMapper().readTree(json);\nSystem.out.println(tree); // {\"a\":{\"b\":true}}\n</code></pre>\n\n<p>I've also tried the <code>Guava</code> module which has <code>Multimap</code> support, however it doesn't work as expected for nested json objects. </p>\n\n<p>Example using Guava module for the json that I have shown before:</p>\n\n<pre><code>ObjectMapper mapper = new ObjectMapper();\nmapper.registerModule(new GuavaModule());\nmapper.configure(DeserializationFeature.ACCEPT_SINGLE_VALUE_AS_ARRAY, true);\n\nMultimap read = mapper.readValue(json, Multimap.class);\nSystem.out.println(read); // {a=[a, {b=true}]}\n</code></pre>\n\n<p>How should I tackle this problem using <code>Jackson</code> library? Are there any other libraries which would support parsing of such json structure for java?</p>\n"},{"tags":["java","json"],"answers":[{"comments":[{"owner":{"account_id":13671230,"reputation":21,"user_id":9863842,"display_name":"sman001"},"score":0,"creation_date":1527592156,"post_id":50582793,"comment_id":88174753,"body_markdown":"Still same result.","body":"Still same result."},{"owner":{"account_id":8305547,"reputation":140,"user_id":6242707,"accept_rate":50,"display_name":"higz555"},"score":0,"creation_date":1527592301,"post_id":50582793,"comment_id":88174838,"body_markdown":"JSON works with a key - value approach. Keys are always unique, so it doesn&#39;t make sense to have duplicate keys.","body":"JSON works with a key - value approach. Keys are always unique, so it doesn&#39;t make sense to have duplicate keys."},{"owner":{"account_id":13671230,"reputation":21,"user_id":9863842,"display_name":"sman001"},"score":0,"creation_date":1527592509,"post_id":50582793,"comment_id":88174997,"body_markdown":"I know but I have to work with a json with duplicate keys.","body":"I know but I have to work with a json with duplicate keys."}],"tags":[],"owner":{"account_id":8305547,"reputation":140,"user_id":6242707,"accept_rate":50,"display_name":"higz555"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1527591888,"creation_date":1527591888,"answer_id":50582793,"question_id":50582743,"body_markdown":"You need to stringify your JSON object\r\n\r\n    a.toString()","title":"Parsing json with duplicate keys","body":"<p>You need to stringify your JSON object</p>\n\n<pre><code>a.toString()\n</code></pre>\n"},{"comments":[{"owner":{"account_id":13671230,"reputation":21,"user_id":9863842,"display_name":"sman001"},"score":0,"creation_date":1527593806,"post_id":50583370,"comment_id":88175907,"body_markdown":"I am using that.But instead of hardcoding it,I want to read it from a file.When I do that I am unable to achieve the same result.","body":"I am using that.But instead of hardcoding it,I want to read it from a file.When I do that I am unable to achieve the same result."}],"tags":[],"owner":{"account_id":2510547,"reputation":395,"user_id":2183141,"display_name":"Ravi Sapariya"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1527593673,"creation_date":1527593673,"answer_id":50583370,"question_id":50582743,"body_markdown":"If you do not have a constraint to use external JSON library than you can use `net.sf.json.JSONObject` to parse your JSON string, It will accept JSON with the duplicate key. It will retain the duplicated values by storing them into arrays.\r\n\r\n    JSONObject jsonObject = JSONObject.fromObject( &quot;{\\&quot;Data\\&quot;: {\\&quot;A\\&quot;: {\\&quot;B\\&quot;: {\\&quot;C\\&quot;: \\&quot;c\\&quot;,\\&quot;D\\&quot;: {}},\\&quot;E\\&quot;: {\\&quot;F\\&quot;: \\&quot;f\\&quot;},\\&quot;G\\&quot;: {\\&quot;H\\&quot;: \\&quot;h\\&quot;}},\\&quot;A\\&quot;: {\\&quot;B\\&quot;: {\\&quot;C\\&quot;: \\&quot;x\\&quot;,\\&quot;D\\&quot;: {}},\\&quot;E\\&quot;: {\\&quot;F\\&quot;: \\&quot;y\\&quot;},\\&quot;G\\&quot;: {\\&quot;H\\&quot;: \\&quot;z\\&quot;}}}}&quot; );\r\n    System.out.println( &quot;net.sf.json.JSONObject: &quot; + jsonObject );\r\n\r\n","title":"Parsing json with duplicate keys","body":"<p>If you do not have a constraint to use external JSON library than you can use <code>net.sf.json.JSONObject</code> to parse your JSON string, It will accept JSON with the duplicate key. It will retain the duplicated values by storing them into arrays.</p>\n\n<pre><code>JSONObject jsonObject = JSONObject.fromObject( \"{\\\"Data\\\": {\\\"A\\\": {\\\"B\\\": {\\\"C\\\": \\\"c\\\",\\\"D\\\": {}},\\\"E\\\": {\\\"F\\\": \\\"f\\\"},\\\"G\\\": {\\\"H\\\": \\\"h\\\"}},\\\"A\\\": {\\\"B\\\": {\\\"C\\\": \\\"x\\\",\\\"D\\\": {}},\\\"E\\\": {\\\"F\\\": \\\"y\\\"},\\\"G\\\": {\\\"H\\\": \\\"z\\\"}}}}\" );\nSystem.out.println( \"net.sf.json.JSONObject: \" + jsonObject );\n</code></pre>\n"}],"owner":{"account_id":13671230,"reputation":21,"user_id":9863842,"display_name":"sman001"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1925,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1695240786,"creation_date":1527591717,"question_id":50582743,"body_markdown":"I am trying to parse JSON file which contains duplicate keys in Java. I am using the method suggested in this answer https://stackoverflow.com/questions/42573120/parsing-a-json-which-contains-duplicate-keys.\r\n\r\nThe approach works fine if I hard-code the JSON but if I read it from a file,only the last duplicate key is read.\r\n\r\nCode:\r\n\r\n\r\n    public class am {\r\n        public static  void main(String args[]) throws Exception\r\n        {\r\n            JSONParser parser = new JSONParser();\r\n    \r\n    \r\n            Object obj = parser.parse(new FileReader(&quot;sample.json&quot;));\r\n    \r\n            JSONObject a=JSONObject.fromObject(obj);\r\n            JSONObject jsonObject=JSONObject.fromObject(&quot;{\\n&quot; +\r\n                    &quot;  \\&quot;Data\\&quot;: {\\n&quot; +\r\n                    &quot;    \\&quot;A\\&quot;: {\\n&quot; +\r\n                    &quot;      \\&quot;B\\&quot;: {\\n&quot; +\r\n                    &quot;        \\&quot;C\\&quot;: \\&quot;c\\&quot;,\\n&quot; +\r\n                    &quot;        \\&quot;D\\&quot;: {}\\n&quot; +\r\n                    &quot;      },\\n&quot; +\r\n                    &quot;      \\&quot;E\\&quot;: {\\n&quot; +\r\n                    &quot;        \\&quot;F\\&quot;: \\&quot;f\\&quot;\\n&quot; +\r\n                    &quot;      },\\n&quot; +\r\n                    &quot;      \\&quot;G\\&quot;: {\\n&quot; +\r\n                    &quot;        \\&quot;H\\&quot;: \\&quot;h\\&quot;\\n&quot; +\r\n                    &quot;      }\\n&quot; +\r\n                    &quot;    },\\&quot;A\\&quot;: {\\n&quot; +\r\n                    &quot;      \\&quot;B\\&quot;: {\\n&quot; +\r\n                    &quot;        \\&quot;C\\&quot;: \\&quot;x\\&quot;,\\n&quot; +\r\n                    &quot;        \\&quot;D\\&quot;: {}\\n&quot; +\r\n                    &quot;      },\\n&quot; +\r\n                    &quot;      \\&quot;E\\&quot;: {\\n&quot; +\r\n                    &quot;        \\&quot;F\\&quot;: \\&quot;y\\&quot;\\n&quot; +\r\n                    &quot;      },\\n&quot; +\r\n                    &quot;      \\&quot;G\\&quot;: {\\n&quot; +\r\n                    &quot;        \\&quot;H\\&quot;: \\&quot;z\\&quot;\\n&quot; +\r\n                    &quot;      }\\n&quot; +\r\n                    &quot;    },\\n&quot; +\r\n                    &quot;    \r\n                    &quot;\\n&quot; +\r\n                    &quot;  }\\n&quot; +\r\n                    &quot;}&quot;);\r\n            System.out.println(&quot;Json objects are:::&quot;+a);\r\n            System.out.println(&quot;Json objects are:::&quot;+jsonObject);\r\n           \r\n        }\r\n    }\r\n\r\nJson File:\r\n\r\n    {\r\n      &quot;Data&quot;: {\r\n        &quot;A&quot;: {\r\n          &quot;B&quot;: {\r\n            &quot;C&quot;: &quot;c&quot;,\r\n            &quot;D&quot;: {}\r\n          },\r\n          &quot;E&quot;: {\r\n            &quot;F&quot;: &quot;f&quot;\r\n          },\r\n          &quot;G&quot;: {\r\n            &quot;H&quot;: &quot;h&quot;\r\n          }\r\n        },&quot;A&quot;: {\r\n          &quot;B&quot;: {\r\n            &quot;C&quot;: &quot;x&quot;,\r\n            &quot;D&quot;: {}\r\n          },\r\n          &quot;E&quot;: {\r\n            &quot;F&quot;: &quot;y&quot;\r\n          },\r\n          &quot;G&quot;: {\r\n            &quot;H&quot;: &quot;z&quot;\r\n          }\r\n        },\r\n        \r\n      }\r\n    }\r\n\r\nOutput:\r\n\r\n    Json objects are:::{&quot;Data&quot;:{&quot;A&quot;:{&quot;B&quot;:{&quot;C&quot;:&quot;x&quot;,&quot;D&quot;:{}},&quot;E&quot;:{&quot;F&quot;:&quot;y&quot;},&quot;G&quot;:{&quot;H&quot;:&quot;z&quot;}}}}\r\n    Json objects are:::{&quot;Data&quot;:{&quot;A&quot;:[{&quot;B&quot;:{&quot;C&quot;:&quot;c&quot;,&quot;D&quot;:{}},&quot;E&quot;:{&quot;F&quot;:&quot;f&quot;},&quot;G&quot;:{&quot;H&quot;:&quot;h&quot;}},{&quot;B&quot;:{&quot;C&quot;:&quot;x&quot;,&quot;D&quot;:{}},&quot;E&quot;:{&quot;F&quot;:&quot;y&quot;},&quot;G&quot;:{&quot;H&quot;:&quot;z&quot;}}]}}","title":"Parsing json with duplicate keys","body":"<p>I am trying to parse JSON file which contains duplicate keys in Java. I am using the method suggested in this answer <a href=\"https://stackoverflow.com/questions/42573120/parsing-a-json-which-contains-duplicate-keys\">Parsing a json which contains duplicate keys</a>.</p>\n<p>The approach works fine if I hard-code the JSON but if I read it from a file,only the last duplicate key is read.</p>\n<p>Code:</p>\n<pre><code>public class am {\n    public static  void main(String args[]) throws Exception\n    {\n        JSONParser parser = new JSONParser();\n\n\n        Object obj = parser.parse(new FileReader(&quot;sample.json&quot;));\n\n        JSONObject a=JSONObject.fromObject(obj);\n        JSONObject jsonObject=JSONObject.fromObject(&quot;{\\n&quot; +\n                &quot;  \\&quot;Data\\&quot;: {\\n&quot; +\n                &quot;    \\&quot;A\\&quot;: {\\n&quot; +\n                &quot;      \\&quot;B\\&quot;: {\\n&quot; +\n                &quot;        \\&quot;C\\&quot;: \\&quot;c\\&quot;,\\n&quot; +\n                &quot;        \\&quot;D\\&quot;: {}\\n&quot; +\n                &quot;      },\\n&quot; +\n                &quot;      \\&quot;E\\&quot;: {\\n&quot; +\n                &quot;        \\&quot;F\\&quot;: \\&quot;f\\&quot;\\n&quot; +\n                &quot;      },\\n&quot; +\n                &quot;      \\&quot;G\\&quot;: {\\n&quot; +\n                &quot;        \\&quot;H\\&quot;: \\&quot;h\\&quot;\\n&quot; +\n                &quot;      }\\n&quot; +\n                &quot;    },\\&quot;A\\&quot;: {\\n&quot; +\n                &quot;      \\&quot;B\\&quot;: {\\n&quot; +\n                &quot;        \\&quot;C\\&quot;: \\&quot;x\\&quot;,\\n&quot; +\n                &quot;        \\&quot;D\\&quot;: {}\\n&quot; +\n                &quot;      },\\n&quot; +\n                &quot;      \\&quot;E\\&quot;: {\\n&quot; +\n                &quot;        \\&quot;F\\&quot;: \\&quot;y\\&quot;\\n&quot; +\n                &quot;      },\\n&quot; +\n                &quot;      \\&quot;G\\&quot;: {\\n&quot; +\n                &quot;        \\&quot;H\\&quot;: \\&quot;z\\&quot;\\n&quot; +\n                &quot;      }\\n&quot; +\n                &quot;    },\\n&quot; +\n                &quot;    \n                &quot;\\n&quot; +\n                &quot;  }\\n&quot; +\n                &quot;}&quot;);\n        System.out.println(&quot;Json objects are:::&quot;+a);\n        System.out.println(&quot;Json objects are:::&quot;+jsonObject);\n       \n    }\n}\n</code></pre>\n<p>Json File:</p>\n<pre><code>{\n  &quot;Data&quot;: {\n    &quot;A&quot;: {\n      &quot;B&quot;: {\n        &quot;C&quot;: &quot;c&quot;,\n        &quot;D&quot;: {}\n      },\n      &quot;E&quot;: {\n        &quot;F&quot;: &quot;f&quot;\n      },\n      &quot;G&quot;: {\n        &quot;H&quot;: &quot;h&quot;\n      }\n    },&quot;A&quot;: {\n      &quot;B&quot;: {\n        &quot;C&quot;: &quot;x&quot;,\n        &quot;D&quot;: {}\n      },\n      &quot;E&quot;: {\n        &quot;F&quot;: &quot;y&quot;\n      },\n      &quot;G&quot;: {\n        &quot;H&quot;: &quot;z&quot;\n      }\n    },\n    \n  }\n}\n</code></pre>\n<p>Output:</p>\n<pre><code>Json objects are:::{&quot;Data&quot;:{&quot;A&quot;:{&quot;B&quot;:{&quot;C&quot;:&quot;x&quot;,&quot;D&quot;:{}},&quot;E&quot;:{&quot;F&quot;:&quot;y&quot;},&quot;G&quot;:{&quot;H&quot;:&quot;z&quot;}}}}\nJson objects are:::{&quot;Data&quot;:{&quot;A&quot;:[{&quot;B&quot;:{&quot;C&quot;:&quot;c&quot;,&quot;D&quot;:{}},&quot;E&quot;:{&quot;F&quot;:&quot;f&quot;},&quot;G&quot;:{&quot;H&quot;:&quot;h&quot;}},{&quot;B&quot;:{&quot;C&quot;:&quot;x&quot;,&quot;D&quot;:{}},&quot;E&quot;:{&quot;F&quot;:&quot;y&quot;},&quot;G&quot;:{&quot;H&quot;:&quot;z&quot;}}]}}\n</code></pre>\n"},{"tags":["java","static","treemap","symbol-table"],"comments":[{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":1,"creation_date":1695241041,"post_id":77145677,"comment_id":135999832,"body_markdown":"The problem is you&#39;re trying to make a reference to `STTM` itself (which is an instance field) within a static `main` method. Why use a field at all? Just declare it as a local variable in `main`...","body":"The problem is you&#39;re trying to make a reference to <code>STTM</code> itself (which is an instance field) within a static <code>main</code> method. Why use a field at all? Just declare it as a local variable in <code>main</code>..."},{"owner":{"account_id":29494776,"reputation":1,"user_id":22603097,"display_name":"DomV_04"},"score":0,"creation_date":1695241385,"post_id":77145677,"comment_id":135999879,"body_markdown":"@JonSkeet How would I declare it as a local variable in &#39;main&#39; as opposed to creating an instance field while still creating a SymbolTableTM object?","body":"@JonSkeet How would I declare it as a local variable in &#39;main&#39; as opposed to creating an instance field while still creating a SymbolTableTM object?"},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1695241879,"post_id":77145677,"comment_id":135999951,"body_markdown":"Just move the declaration into the `main` method. (And provide some suitable type arguments.... you probably want `DriverTM` to be non-generic, as a generic entry point is a bit odd... Note that if you create a `SymbolTable&lt;Integer, Integer&gt;` I suspect you don&#39;t need the casts in `STTM.put`...","body":"Just move the declaration into the <code>main</code> method. (And provide some suitable type arguments.... you probably want <code>DriverTM</code> to be non-generic, as a generic entry point is a bit odd... Note that if you create a <code>SymbolTable&lt;Integer, Integer&gt;</code> I suspect you don&#39;t need the casts in <code>STTM.put</code>..."},{"owner":{"account_id":29494776,"reputation":1,"user_id":22603097,"display_name":"DomV_04"},"score":0,"creation_date":1695242280,"post_id":77145677,"comment_id":136000016,"body_markdown":"@JonSkeet I see now. That was pretty obvious in retrospect. Thanks for the help!","body":"@JonSkeet I see now. That was pretty obvious in retrospect. Thanks for the help!"}],"owner":{"account_id":29494776,"reputation":1,"user_id":22603097,"display_name":"DomV_04"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695240759,"creation_date":1695240759,"question_id":77145677,"body_markdown":"I&#39;m currently trying to create a symbol table using the Map and treeMap packages, but when I try to add an item into the table, I get this error: &quot;Cannot make a static reference to the non-static field STTM&quot;.\r\n\r\nSymbolTableTM class:\r\n\r\n\r\n```\r\nimport java.util.Map;\r\nimport java.util.TreeMap;\r\n\r\npublic class SymbolTableTM&lt;Key extends Comparable&lt;Key&gt;, Value&gt; {\r\n\t\r\n\tMap&lt;Key, Value&gt; treeMap = new TreeMap&lt;&gt;();\r\n\t\r\n\tpublic SymbolTableTM() {\r\n\t\t\r\n\t}\r\n\t\r\n\tpublic int[] min() {\r\n\t\tint min = Integer.MAX_VALUE;\r\n\t\tint[] min_arr = new int[2];\r\n\t\tfor(Map.Entry&lt;Key, Value&gt; entry: treeMap.entrySet()) {\r\n\t\t\tif((Integer) entry.getValue() &lt; min) {\r\n\t\t\t\tmin = (Integer) entry.getValue();\r\n\t\t\t\tmin_arr[0] = (Integer) entry.getKey();\r\n\t\t\t\tmin_arr[1] = min;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn min_arr;\r\n\t}\r\n\t\r\n\tpublic int[] max() {\r\n\t\tint max = Integer.MIN_VALUE;\r\n\t\tint[] max_arr = new int[2];\r\n\t\tfor(Map.Entry&lt;Key, Value&gt; entry: treeMap.entrySet()) {\r\n\t\t\tif((Integer) entry.getValue() &gt; max) {\r\n\t\t\t\tmax = (Integer) entry.getValue();\r\n\t\t\t\tmax_arr[0] = (Integer) entry.getKey();\r\n\t\t\t\tmax_arr[1] = max;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn max_arr;\r\n\t}\r\n\t\r\n\tpublic void delete(Key key) {\r\n\t\ttreeMap.remove(key);\r\n\t}\r\n\t\r\n\tpublic Value get(Key key) {\r\n\t\treturn treeMap.get(key);\r\n\t}\r\n\t\r\n\tpublic void put(Key key, Value val) {\r\n\t\ttreeMap.put(key, val);\r\n\t}\t\r\n}\r\n```\r\n\r\nDriverTM class:\r\n\r\n\r\n```\r\nimport java.io.File;\r\nimport java.io.FileNotFoundException;\r\nimport java.util.Scanner;\r\n\r\npublic class DriverTM&lt;Key extends Comparable&lt;Key&gt;, Value&gt; {\r\n\t\r\n\tSymbolTableTM&lt;Key, Value&gt; STTM = new SymbolTableTM&lt;&gt;();\r\n\t\r\n\tpublic static void main(String[] args) {\r\n\t\t\r\n\t\ttry {\r\n\t\t\tFile myFile = new File(&quot;lab3in.txt&quot;);\r\n\t\t\tScanner scanner = new Scanner(myFile);\r\n\t\t\twhile(scanner.hasNext()) {\r\n\t\t\t\t\r\n\t\t\t\tSTTM.put((Integer) scanner.nextInt(), (Integer) scanner.nextInt());\r\n\t\t\t}\r\n\t\t\tscanner.close();\r\n\t\t}\r\n\t\tcatch(FileNotFoundException e){\r\n\t\t\tSystem.out.println(&quot;An error occurred&quot;);\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t}\r\n}\r\n```\r\n\r\nMy issue is on line 16 of the DriverTM class.\r\n\r\nI thought using an object (STTM) to refer to a non static field wouldn&#39;t be an issue, but obviously I&#39;m missing something. Any help appreciated.","title":"How can I avoid making this static reference to a non-static field?","body":"<p>I'm currently trying to create a symbol table using the Map and treeMap packages, but when I try to add an item into the table, I get this error: &quot;Cannot make a static reference to the non-static field STTM&quot;.</p>\n<p>SymbolTableTM class:</p>\n<pre><code>import java.util.Map;\nimport java.util.TreeMap;\n\npublic class SymbolTableTM&lt;Key extends Comparable&lt;Key&gt;, Value&gt; {\n    \n    Map&lt;Key, Value&gt; treeMap = new TreeMap&lt;&gt;();\n    \n    public SymbolTableTM() {\n        \n    }\n    \n    public int[] min() {\n        int min = Integer.MAX_VALUE;\n        int[] min_arr = new int[2];\n        for(Map.Entry&lt;Key, Value&gt; entry: treeMap.entrySet()) {\n            if((Integer) entry.getValue() &lt; min) {\n                min = (Integer) entry.getValue();\n                min_arr[0] = (Integer) entry.getKey();\n                min_arr[1] = min;\n            }\n        }\n        return min_arr;\n    }\n    \n    public int[] max() {\n        int max = Integer.MIN_VALUE;\n        int[] max_arr = new int[2];\n        for(Map.Entry&lt;Key, Value&gt; entry: treeMap.entrySet()) {\n            if((Integer) entry.getValue() &gt; max) {\n                max = (Integer) entry.getValue();\n                max_arr[0] = (Integer) entry.getKey();\n                max_arr[1] = max;\n            }\n        }\n        return max_arr;\n    }\n    \n    public void delete(Key key) {\n        treeMap.remove(key);\n    }\n    \n    public Value get(Key key) {\n        return treeMap.get(key);\n    }\n    \n    public void put(Key key, Value val) {\n        treeMap.put(key, val);\n    }   \n}\n</code></pre>\n<p>DriverTM class:</p>\n<pre><code>import java.io.File;\nimport java.io.FileNotFoundException;\nimport java.util.Scanner;\n\npublic class DriverTM&lt;Key extends Comparable&lt;Key&gt;, Value&gt; {\n    \n    SymbolTableTM&lt;Key, Value&gt; STTM = new SymbolTableTM&lt;&gt;();\n    \n    public static void main(String[] args) {\n        \n        try {\n            File myFile = new File(&quot;lab3in.txt&quot;);\n            Scanner scanner = new Scanner(myFile);\n            while(scanner.hasNext()) {\n                \n                STTM.put((Integer) scanner.nextInt(), (Integer) scanner.nextInt());\n            }\n            scanner.close();\n        }\n        catch(FileNotFoundException e){\n            System.out.println(&quot;An error occurred&quot;);\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<p>My issue is on line 16 of the DriverTM class.</p>\n<p>I thought using an object (STTM) to refer to a non static field wouldn't be an issue, but obviously I'm missing something. Any help appreciated.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1447676478,"post_id":33735218,"comment_id":55238885,"body_markdown":"using try catch statements and Exception handling","body":"using try catch statements and Exception handling"},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1447676660,"post_id":33735218,"comment_id":55238999,"body_markdown":"Your `Exeption` populates through the `main` method and therefore your program aborts. You need to `catch` the exception and act accordingly. If an `Exception` occurs, execution is stopped immediately and the first matching `catch` block is entered. For more information you may want to look at the [Oracle trail about Exceptions](https://docs.oracle.com/javase/tutorial/essential/exceptions/).","body":"Your <code>Exeption</code> populates through the <code>main</code> method and therefore your program aborts. You need to <code>catch</code> the exception and act accordingly. If an <code>Exception</code> occurs, execution is stopped immediately and the first matching <code>catch</code> block is entered. For more information you may want to look at the <a href=\"https://docs.oracle.com/javase/tutorial/essential/exceptions/\" rel=\"nofollow noreferrer\">Oracle trail about Exceptions</a>."}],"answers":[{"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1447676543,"post_id":33735268,"comment_id":55238929,"body_markdown":"but add some Exception handling in the catch block, ignoring Exceptions is never a good thing.","body":"but add some Exception handling in the catch block, ignoring Exceptions is never a good thing."},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":1,"creation_date":1447676557,"post_id":33735268,"comment_id":55238939,"body_markdown":"This alone is probably not enough. I think OP should wrap the whole code within a loop to re-execute it in case of an `Exception`.","body":"This alone is probably not enough. I think OP should wrap the whole code within a loop to re-execute it in case of an <code>Exception</code>."},{"owner":{"account_id":2988754,"reputation":5716,"user_id":2536842,"accept_rate":64,"display_name":"Dylan Meeus"},"score":0,"creation_date":1447676643,"post_id":33735268,"comment_id":55238988,"body_markdown":"That is true @Turing85. This will just stop the program from stopping due to the error - but his program still stops after one execution.","body":"That is true @Turing85. This will just stop the program from stopping due to the error - but his program still stops after one execution."}],"tags":[],"owner":{"account_id":2988754,"reputation":5716,"user_id":2536842,"accept_rate":64,"display_name":"Dylan Meeus"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1447677070,"creation_date":1447676475,"answer_id":33735268,"question_id":33735218,"body_markdown":"You have to catch the exception as well. Wrap it in a try-catch. Furthermore you will also need to use a loop to run the code again. Such as..\r\n\r\n    while(true){\r\n        try{\r\n           // Code you want to execute that can throw an error&#163;\r\n          SquareEquation();\r\n\r\n          // Exit loop if execution ended without an exception\r\n          break;\r\n        }\r\n        catch(SquareEquationException ex){\r\n            // Exception logic (such as showing a message) or just printing the trace (but this doesn&#39;t help a user)\r\n            ex.printStackTrace();\r\n     \r\n        }\r\n    }","title":"keep program running after throwing exception in java","body":"<p>You have to catch the exception as well. Wrap it in a try-catch. Furthermore you will also need to use a loop to run the code again. Such as..</p>\n\n<pre><code>while(true){\n    try{\n       // Code you want to execute that can throw an error£\n      SquareEquation();\n\n      // Exit loop if execution ended without an exception\n      break;\n    }\n    catch(SquareEquationException ex){\n        // Exception logic (such as showing a message) or just printing the trace (but this doesn't help a user)\n        ex.printStackTrace();\n\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4326511,"reputation":8441,"user_id":3533191,"accept_rate":62,"display_name":"Syam S"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1447687547,"creation_date":1447687547,"answer_id":33738835,"question_id":33735218,"body_markdown":"You can wrap that in a try catch. Also you could avoid repeated codes and should close the scanner once done. Example\r\n\r\n\timport java.util.Scanner;\r\n\r\n\tpublic class SquareEquationException extends Exception {\r\n\t\tpublic SquareEquationException() {\r\n\t\t\tsuper(&quot;roots are not real numbers&quot;);\r\n\t\t}\r\n\r\n\t\tpublic static void SquareEquation() throws SquareEquationException {\r\n\t\t\tdouble a, b, c, sqr;\r\n\t\t\tint flag = 1;\r\n\t\t\tScanner in = new Scanner(System.in);\r\n\t\t\twhile (flag == 1) {\r\n\t\t\t\ttry{\r\n\t\t\t\t\tSystem.out.println(&quot;enter ax^2:&quot;);\r\n\t\t\t\t\ta = in.nextDouble();\r\n\t\t\t\t\tSystem.out.println(&quot;enter bx:&quot;);\r\n\t\t\t\t\tb = in.nextDouble();\r\n\t\t\t\t\tSystem.out.println(&quot;enter c:&quot;);\r\n\t\t\t\t\tc = in.nextDouble();\r\n\t\t\t\t\tsqr = ((b * b) - (4 * a * c));\r\n\t\t\t\t\tif (sqr &lt; 0)\r\n\t\t\t\t\t\tthrow new SquareEquationException();\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tsqr = Math.sqrt(sqr);\r\n\t\t\t\t\t\tdouble x1 = (-b + sqr) / (2 * a);\r\n\t\t\t\t\t\tdouble x2 = (-b - sqr) / (2 * a);\r\n\t\t\t\t\t\tif (x1 == x2)\r\n\t\t\t\t\t\t\tSystem.out.println(&quot;root is:&quot; + x1);\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\tSystem.out.println(&quot;x1 is:&quot; + x1 + &quot;\\n&quot; + &quot;x2 is:&quot; + x2);\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch(SquareEquationException e){\r\n\t\t\t\t\tSystem.out.println(e.getMessage());\r\n\t\t\t\t}\r\n\t\t\t\tSystem.out.println(&quot;enter 1 to continue or any key to exit&quot;);\r\n\t\t\t\tflag = in.nextInt();\r\n\t\t\t}\r\n\t\t\tin.close();\r\n\t\t}\r\n\r\n\t\tpublic static void main(String[] args) throws SquareEquationException {\r\n\t\t\tSquareEquation();\r\n\t\t}\r\n\t}","title":"keep program running after throwing exception in java","body":"<p>You can wrap that in a try catch. Also you could avoid repeated codes and should close the scanner once done. Example</p>\n\n<pre><code>import java.util.Scanner;\n\npublic class SquareEquationException extends Exception {\n    public SquareEquationException() {\n        super(\"roots are not real numbers\");\n    }\n\n    public static void SquareEquation() throws SquareEquationException {\n        double a, b, c, sqr;\n        int flag = 1;\n        Scanner in = new Scanner(System.in);\n        while (flag == 1) {\n            try{\n                System.out.println(\"enter ax^2:\");\n                a = in.nextDouble();\n                System.out.println(\"enter bx:\");\n                b = in.nextDouble();\n                System.out.println(\"enter c:\");\n                c = in.nextDouble();\n                sqr = ((b * b) - (4 * a * c));\n                if (sqr &lt; 0)\n                    throw new SquareEquationException();\n                else {\n                    sqr = Math.sqrt(sqr);\n                    double x1 = (-b + sqr) / (2 * a);\n                    double x2 = (-b - sqr) / (2 * a);\n                    if (x1 == x2)\n                        System.out.println(\"root is:\" + x1);\n                    else\n                        System.out.println(\"x1 is:\" + x1 + \"\\n\" + \"x2 is:\" + x2);\n\n                }\n            } catch(SquareEquationException e){\n                System.out.println(e.getMessage());\n            }\n            System.out.println(\"enter 1 to continue or any key to exit\");\n            flag = in.nextInt();\n        }\n        in.close();\n    }\n\n    public static void main(String[] args) throws SquareEquationException {\n        SquareEquation();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":6577690,"reputation":2466,"user_id":5083043,"accept_rate":48,"display_name":"gil"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8585,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1695240561,"creation_date":1447676335,"question_id":33735218,"body_markdown":"i&#39;ve wrote a code which i want to keep running after throwing an exception.\r\nhere&#39;s my code:\r\n\r\n        public class SquareEquationException extends Exception{\r\n         public SquareEquationException(){\r\n            super(&quot;roots are not real numbers&quot;);\r\n        }\r\n         public static void SquareEquation() throws SquareEquationException{\r\n             double a,b,c,sqr;\r\n             int flag;\r\n             Scanner in = new Scanner(System.in);\r\n             System.out.println(&quot;enter ax^2:&quot;);\r\n             a=in.nextDouble();\r\n             System.out.println(&quot;enter bx:&quot;);\r\n             b=in.nextDouble();\r\n             System.out.println(&quot;enter c:&quot;);\r\n             c=in.nextDouble();\r\n             sqr=((b*b)-(4*a*c));\r\n             if(sqr&lt;0)\r\n                 throw new SquareEquationException();\r\n             else{\r\n              sqr=Math.sqrt(sqr);\r\n              double x1=(-b+sqr)/(2*a);\r\n              double x2 = (-b-sqr)/(2*a);\r\n              if(x1==x2)\r\n                     System.out.println(&quot;root is:&quot; + x1);\r\n              else\r\n                     System.out.println(&quot;x1 is:&quot;+x1 +&quot;\\n&quot;+ &quot;x2 is:&quot;+x2 );\r\n              \r\n             }\r\n             System.out.println(&quot;enter 1 to continue or any key to exit&quot;);\r\n             flag = in.nextInt();\r\n             while(flag==1){\r\n                 System.out.println(&quot;enter ax^2:&quot;);\r\n             a=in.nextDouble();\r\n             System.out.println(&quot;enter bx:&quot;);\r\n             b=in.nextDouble();\r\n             System.out.println(&quot;enter c:&quot;);\r\n             c=in.nextDouble();\r\n             sqr=((b*b)-(4*a*c));\r\n             if(sqr&lt;0){\r\n                 throw new SquareEquationException();\r\n             }\r\n             else{\r\n              sqr=Math.sqrt(sqr);\r\n              double x1=(-b+sqr)/(2*a);\r\n              double x2 = (-b-sqr)/(2*a);\r\n              if(x1==x2)\r\n                     System.out.println(&quot;root is:&quot; + x1);\r\n              else\r\n                     System.out.println(&quot;x1 is:&quot;+x1 +&quot;\\n&quot;+ &quot;x2 is:&quot;+x2 );\r\n             }\r\n             System.out.println(&quot;enter 1 to continue or any key to exit&quot;);\r\n             flag=in.nextInt();\r\n         }\r\n         }\r\n         public static void main(String[] args) throws SquareEquationException{\r\n             SquareEquation();\r\n         }\r\n    }\r\n\r\n\r\nhow can i keep the menu/program running after throwing an exception?\r\nmenu&#39;s work: if 1 inserted by user program keeps on running, else program exits.\r\n\r\nEDIT:\r\n[i want to get the message in red and keep it running, so the menu will show right after/before and offer to continue][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/7iZcU.png","title":"keep program running after throwing exception in java","body":"<p>i've wrote a code which i want to keep running after throwing an exception.\nhere's my code:</p>\n\n<pre><code>    public class SquareEquationException extends Exception{\n     public SquareEquationException(){\n        super(\"roots are not real numbers\");\n    }\n     public static void SquareEquation() throws SquareEquationException{\n         double a,b,c,sqr;\n         int flag;\n         Scanner in = new Scanner(System.in);\n         System.out.println(\"enter ax^2:\");\n         a=in.nextDouble();\n         System.out.println(\"enter bx:\");\n         b=in.nextDouble();\n         System.out.println(\"enter c:\");\n         c=in.nextDouble();\n         sqr=((b*b)-(4*a*c));\n         if(sqr&lt;0)\n             throw new SquareEquationException();\n         else{\n          sqr=Math.sqrt(sqr);\n          double x1=(-b+sqr)/(2*a);\n          double x2 = (-b-sqr)/(2*a);\n          if(x1==x2)\n                 System.out.println(\"root is:\" + x1);\n          else\n                 System.out.println(\"x1 is:\"+x1 +\"\\n\"+ \"x2 is:\"+x2 );\n\n         }\n         System.out.println(\"enter 1 to continue or any key to exit\");\n         flag = in.nextInt();\n         while(flag==1){\n             System.out.println(\"enter ax^2:\");\n         a=in.nextDouble();\n         System.out.println(\"enter bx:\");\n         b=in.nextDouble();\n         System.out.println(\"enter c:\");\n         c=in.nextDouble();\n         sqr=((b*b)-(4*a*c));\n         if(sqr&lt;0){\n             throw new SquareEquationException();\n         }\n         else{\n          sqr=Math.sqrt(sqr);\n          double x1=(-b+sqr)/(2*a);\n          double x2 = (-b-sqr)/(2*a);\n          if(x1==x2)\n                 System.out.println(\"root is:\" + x1);\n          else\n                 System.out.println(\"x1 is:\"+x1 +\"\\n\"+ \"x2 is:\"+x2 );\n         }\n         System.out.println(\"enter 1 to continue or any key to exit\");\n         flag=in.nextInt();\n     }\n     }\n     public static void main(String[] args) throws SquareEquationException{\n         SquareEquation();\n     }\n}\n</code></pre>\n\n<p>how can i keep the menu/program running after throwing an exception?\nmenu's work: if 1 inserted by user program keeps on running, else program exits.</p>\n\n<p>EDIT:\n<a href=\"https://i.stack.imgur.com/7iZcU.png\" rel=\"nofollow\">i want to get the message in red and keep it running, so the menu will show right after/before and offer to continue</a></p>\n"},{"tags":["java","menu","switch-statement"],"answers":[{"tags":[],"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1695240473,"creation_date":1695229349,"answer_id":77144574,"question_id":77144543,"body_markdown":"## Don’t close `System.out`\r\n\r\nThe try-with-resources in `outputEmployees` closes [`System.out`][1], at least it probably does if [`Formatter`][2] forwards [`close()`][3] correctly. That&#39;s probably why you&#39;re not seeing any more output.\r\n\r\n    // Closing the `Formatter` also closes `System.out` (a `PrintStream`). \r\n    try(Formatter formatter = new Formatter(System.out)) {…} \r\n\r\nTo quote the Javadoc for [`Formatter#close`][3]:\r\n\r\n&gt;Closes this formatter. If the destination implements the `Closeable` interface, its `close` method will be invoked.\r\n\r\nOne way to fix it would be by using a single `Formatter` instance, just like you&#39;ve done with your `Scanner`.\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/System.html#out\r\n  [2]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Formatter.html\r\n  [3]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Formatter.html#close()","title":"How do I revert back to menu after switch case selection Java","body":"<h2>Don’t close <code>System.out</code></h2>\n<p>The try-with-resources in <code>outputEmployees</code> closes <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/System.html#out\" rel=\"nofollow noreferrer\"><code>System.out</code></a>, at least it probably does if <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Formatter.html\" rel=\"nofollow noreferrer\"><code>Formatter</code></a> forwards <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Formatter.html#close()\" rel=\"nofollow noreferrer\"><code>close()</code></a> correctly. That's probably why you're not seeing any more output.</p>\n<pre><code>// Closing the `Formatter` also closes `System.out` (a `PrintStream`). \ntry(Formatter formatter = new Formatter(System.out)) {…} \n</code></pre>\n<p>To quote the Javadoc for <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Formatter.html#close()\" rel=\"nofollow noreferrer\"><code>Formatter#close</code></a>:</p>\n<blockquote>\n<p>Closes this formatter. If the destination implements the <code>Closeable</code> interface, its <code>close</code> method will be invoked.</p>\n</blockquote>\n<p>One way to fix it would be by using a single <code>Formatter</code> instance, just like you've done with your <code>Scanner</code>.</p>\n"}],"owner":{"account_id":16689862,"reputation":457,"user_id":12062753,"display_name":"Noods"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77144574,"answer_count":1,"score":1,"last_activity_date":1695240473,"creation_date":1695229073,"question_id":77144543,"body_markdown":"Im creating a management program where I need to display a menu with options for the user to select. When the user select case 1 for example, I want to display some output, then automatically return to the main menu to complete more cases. However, every time I select a case, the output is printed but the menu never gets printed again. The program also never terminates unless I manually do so. I thought maybe there was an infinite loop bug so I put a debugging statement &quot;End of list&quot; under the method that runs when the user select 1. In the output, this line never appears either.\r\n\r\nHere is my code: \r\n\r\nTrip Management class: \r\n\r\n    public static void main(String[] args) {\r\n\t    TripManagement tm = new TripManagement();\r\n\r\n\t    // Load data into containers\r\n\t    tm.loadEmployees();\r\n\t    tm.loadTrucks();\r\n\t    tm.loadTrips();\r\n\r\n\t    Scanner scanner = new Scanner(System.in);\r\n\t    \r\n\t    boolean more = true;\r\n\t    int choice = -1;\r\n\t    \r\n\t\twhile(more) {\r\n\t\t\t\r\n\t\t\ttry {\r\n\t\t\t\t// Display the main menu\r\n\t\t\t\tSystem.out.println(&quot;-----------------------------------------&quot;);\r\n\t\t\t\tSystem.out.println(&quot;1. Display all employees&quot;);\r\n\t\t\t\tSystem.out.println(&quot;2. Display all trucks&quot;);\r\n\t\t\t\tSystem.out.println(&quot;3. Display all trips&quot;);\r\n\t\t\t\tSystem.out.println(&quot;4. Find an employee&quot;);\r\n\t\t\t\tSystem.out.println(&quot;5. Find a truck&quot;);\r\n\t\t\t\tSystem.out.println(&quot;6. Find a trip&quot;);\r\n\t\t\t\tSystem.out.println(&quot;7. Add a new employee&quot;);\r\n\t\t\t\tSystem.out.println(&quot;8. Add a new truck&quot;);\r\n\t\t\t\tSystem.out.println(&quot;9. Add a new trip&quot;);\r\n\t\t\t\tSystem.out.println(&quot;10. Save all data into files&quot;);\r\n\t\t\t\tSystem.out.println(&quot;0. Exit&quot;);\r\n\t\t\t\tSystem.out.println(&quot;Enter a choice: &quot;);\r\n\t\t        \r\n\t\t\t\t// Get user choice\r\n\t\t        if (scanner.hasNextInt()) {\r\n\t\t            choice = scanner.nextInt();\r\n\t\t            scanner.nextLine(); // Consume the newline character\r\n\t\t        } else {\r\n\t\t            // Clear the input buffer\r\n\t\t            scanner.nextLine();\r\n\t\t            System.out.println(&quot;Wrong input. Please enter a valid number.&quot;);\r\n\t\t            continue;\r\n\t\t        }\r\n\t\t \r\n\t\t        // Handle user choice\r\n\t\t        switch (choice) {\r\n\t\t        \tcase 0: \r\n\t\t\t        \tSystem.out.println(&quot;Bye!&quot;);\r\n\t\t\t        \tmore = false;\r\n\t\t\t        \tbreak;\r\n\t\t            case 1:\r\n\t\t                tm.outputEmployees();\r\n\t\t                System.out.println(&quot;End of list&quot;);\r\n\t\t                break;\r\n\t\t            case 2:\r\n\t\t                tm.outputTrucks();\r\n\t\t                break;\r\n\t\t            case 3:\r\n\t\t                tm.outputTrips();\r\n\t\t                break;\r\n\t\t            case 4:\r\n\t\t                // Implement logic for finding an employee\r\n\t\t                break;\r\n\t\t            case 5:\r\n\t\t                // Implement logic for finding a truck\r\n\t\t                break;\r\n\t\t            case 6:\r\n\t\t                // Implement logic for finding a trip\r\n\t\t                break;\r\n\t\t            case 7:\r\n\t\t                // Implement logic for adding a new employee\r\n\t\t                break;\r\n\t\t            case 8:\r\n\t\t                // Implement logic for adding a new truck\r\n\t\t                break;\r\n\t\t            case 9:\r\n\t\t                // Implement logic for adding a new trip\r\n\t\t                break;\r\n\t\t            case 10:\r\n\t\t                // Implement logic for saving data into files\r\n\t\t                break;\r\n\t\t            default:\r\n\t\t                System.out.println(&quot;Invalid choice. Please select a valid option.&quot;);\r\n\t\t                break;\r\n\t\t        }\r\n\t\t\t\t\r\n\t\t\t} catch(InputMismatchException e) {\r\n\t\t\t\tSystem.out.println(&quot;Wrong input type.&quot; + e);\r\n\t\t\t\t\r\n\t\t\t}\r\n\t        \r\n\t    } \r\n\t}\r\n\r\n    public void outputEmployees() {\r\n\t\ttry(Formatter formatter = new Formatter(System.out)) {\r\n\t\t\tfor(Employee employee : employees) {\r\n\t\t\t\temployee.outputFormatter(formatter);\r\n\t\t\t\tformatter.format(&quot;%n&quot;);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\nEmployee class: \r\n\r\n\r\n    public void outputFormatter(Formatter output) {\r\n\t\toutput.format(&quot;Employee Number: %d%n&quot;, getNumber());\r\n\t    output.format(&quot;Name: %s%n&quot;, name);\r\n\t    output.format(&quot;Date of Birth: %s%n&quot;, dob);\r\n\t    output.format(&quot;Address: %s%n&quot;, address); \r\n\t}\r\n\r\nHere is my output when selecting case 1: \r\n\r\n    -----------------------------------------\r\n    1. Display all employees\r\n    2. Display all trucks\r\n    3. Display all trips\r\n    4. Find an employee\r\n    5. Find a truck\r\n    6. Find a trip\r\n    7. Add a new employee\r\n    8. Add a new truck\r\n    9. Add a new trip\r\n    10. Save all data into files\r\n    0. Exit\r\n    Enter a choice: \r\n    1\r\n    Employee Number 1\r\n    Employee Number 2\r\n    Employee Number 3\r\n    ...\r\n\r\n\r\n","title":"How do I revert back to menu after switch case selection Java","body":"<p>Im creating a management program where I need to display a menu with options for the user to select. When the user select case 1 for example, I want to display some output, then automatically return to the main menu to complete more cases. However, every time I select a case, the output is printed but the menu never gets printed again. The program also never terminates unless I manually do so. I thought maybe there was an infinite loop bug so I put a debugging statement &quot;End of list&quot; under the method that runs when the user select 1. In the output, this line never appears either.</p>\n<p>Here is my code:</p>\n<p>Trip Management class:</p>\n<pre><code>public static void main(String[] args) {\n    TripManagement tm = new TripManagement();\n\n    // Load data into containers\n    tm.loadEmployees();\n    tm.loadTrucks();\n    tm.loadTrips();\n\n    Scanner scanner = new Scanner(System.in);\n    \n    boolean more = true;\n    int choice = -1;\n    \n    while(more) {\n        \n        try {\n            // Display the main menu\n            System.out.println(&quot;-----------------------------------------&quot;);\n            System.out.println(&quot;1. Display all employees&quot;);\n            System.out.println(&quot;2. Display all trucks&quot;);\n            System.out.println(&quot;3. Display all trips&quot;);\n            System.out.println(&quot;4. Find an employee&quot;);\n            System.out.println(&quot;5. Find a truck&quot;);\n            System.out.println(&quot;6. Find a trip&quot;);\n            System.out.println(&quot;7. Add a new employee&quot;);\n            System.out.println(&quot;8. Add a new truck&quot;);\n            System.out.println(&quot;9. Add a new trip&quot;);\n            System.out.println(&quot;10. Save all data into files&quot;);\n            System.out.println(&quot;0. Exit&quot;);\n            System.out.println(&quot;Enter a choice: &quot;);\n            \n            // Get user choice\n            if (scanner.hasNextInt()) {\n                choice = scanner.nextInt();\n                scanner.nextLine(); // Consume the newline character\n            } else {\n                // Clear the input buffer\n                scanner.nextLine();\n                System.out.println(&quot;Wrong input. Please enter a valid number.&quot;);\n                continue;\n            }\n     \n            // Handle user choice\n            switch (choice) {\n                case 0: \n                    System.out.println(&quot;Bye!&quot;);\n                    more = false;\n                    break;\n                case 1:\n                    tm.outputEmployees();\n                    System.out.println(&quot;End of list&quot;);\n                    break;\n                case 2:\n                    tm.outputTrucks();\n                    break;\n                case 3:\n                    tm.outputTrips();\n                    break;\n                case 4:\n                    // Implement logic for finding an employee\n                    break;\n                case 5:\n                    // Implement logic for finding a truck\n                    break;\n                case 6:\n                    // Implement logic for finding a trip\n                    break;\n                case 7:\n                    // Implement logic for adding a new employee\n                    break;\n                case 8:\n                    // Implement logic for adding a new truck\n                    break;\n                case 9:\n                    // Implement logic for adding a new trip\n                    break;\n                case 10:\n                    // Implement logic for saving data into files\n                    break;\n                default:\n                    System.out.println(&quot;Invalid choice. Please select a valid option.&quot;);\n                    break;\n            }\n            \n        } catch(InputMismatchException e) {\n            System.out.println(&quot;Wrong input type.&quot; + e);\n            \n        }\n        \n    } \n}\n\npublic void outputEmployees() {\n    try(Formatter formatter = new Formatter(System.out)) {\n        for(Employee employee : employees) {\n            employee.outputFormatter(formatter);\n            formatter.format(&quot;%n&quot;);\n        }\n    }\n}\n</code></pre>\n<p>Employee class:</p>\n<pre><code>public void outputFormatter(Formatter output) {\n    output.format(&quot;Employee Number: %d%n&quot;, getNumber());\n    output.format(&quot;Name: %s%n&quot;, name);\n    output.format(&quot;Date of Birth: %s%n&quot;, dob);\n    output.format(&quot;Address: %s%n&quot;, address); \n}\n</code></pre>\n<p>Here is my output when selecting case 1:</p>\n<pre><code>-----------------------------------------\n1. Display all employees\n2. Display all trucks\n3. Display all trips\n4. Find an employee\n5. Find a truck\n6. Find a trip\n7. Add a new employee\n8. Add a new truck\n9. Add a new trip\n10. Save all data into files\n0. Exit\nEnter a choice: \n1\nEmployee Number 1\nEmployee Number 2\nEmployee Number 3\n...\n</code></pre>\n"},{"tags":["java","state","single-sign-on","mismatch","msal"],"owner":{"account_id":7087354,"reputation":3,"user_id":5423757,"display_name":"ken edward"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695240462,"creation_date":1695240373,"question_id":77145641,"body_markdown":"We modified the servlet authentication example into a tomcat SSO valve using MSALJ 1.13.10. Works fine for all chrome browsers. However, our enterprise rolled out Edge browser &quot;account sync&quot; across devices,but then stopped due to license issues. So now, I have a user who has 4 computers each with edge browsers, and 2 of his 4 computers/devices show up in his Edge Account -&gt; settings -&gt; Manage Account -&gt; Device list, which are the Edge clients that DO NOT work with SSO (we get session/state mismatch errors from MSAL). The other edge browser clients are not in the device lilst, and DO work with MSAL SSO.\r\n\r\nSo I guess my question becomes how does MSALJ play with MS Edge browser account syncing with multiple devices?\r\n\r\nWe tried to have each edge browser peform SSO for a servlet based web app, but it seems if the edge browser account has multiple devices then SSO won&#39;t work due to MSAL reporting state mismatch errors.","title":"How does MSAL for java play with Edge browser accounts with multiple devices?","body":"<p>We modified the servlet authentication example into a tomcat SSO valve using MSALJ 1.13.10. Works fine for all chrome browsers. However, our enterprise rolled out Edge browser &quot;account sync&quot; across devices,but then stopped due to license issues. So now, I have a user who has 4 computers each with edge browsers, and 2 of his 4 computers/devices show up in his Edge Account -&gt; settings -&gt; Manage Account -&gt; Device list, which are the Edge clients that DO NOT work with SSO (we get session/state mismatch errors from MSAL). The other edge browser clients are not in the device lilst, and DO work with MSAL SSO.</p>\n<p>So I guess my question becomes how does MSALJ play with MS Edge browser account syncing with multiple devices?</p>\n<p>We tried to have each edge browser peform SSO for a servlet based web app, but it seems if the edge browser account has multiple devices then SSO won't work due to MSAL reporting state mismatch errors.</p>\n"},{"tags":["java","netbeans","input"],"answers":[{"comments":[{"owner":{"account_id":44586,"reputation":37547,"user_id":130964,"accept_rate":95,"display_name":"peter.murray.rust"},"score":0,"creation_date":1256981846,"post_id":1653888,"comment_id":1525330,"body_markdown":"Thanks for the answer. I can see it could work, but I probably want it character by character, so more ideas would be welcome.","body":"Thanks for the answer. I can see it could work, but I probably want it character by character, so more ideas would be welcome."}],"tags":[],"owner":{"account_id":70,"reputation":63620,"user_id":85,"accept_rate":71,"display_name":"Paul Wicks"},"comment_count":1,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1256981479,"creation_date":1256981479,"answer_id":1653888,"question_id":1653871,"body_markdown":"If you just want a small window to type some input into, then the easiest way is to use JOptionPane. For example:\r\n\r\n    import javax.swing.JOptionPane;\r\n    \r\n    public class TestClass {\r\n        public static void main(String[] args) {\r\n            String answer;\r\n            answer = JOptionPane.showInputDialog(null, &quot;What number to multiply by 3?&quot;);\r\n            int num = Integer.parseInt(answer);\r\n            num = num * 3;\r\n            JOptionPane.showMessageDialog(null, &quot;The answer is &quot; + num);\r\n        }\r\n    }\r\n\r\nNote that showInputDialog returns a String, so you&#39;ll have to convert the data to whatever format you need. If you have something more involved, then JOptionPane may not be the way to go.\r\n","title":"How do I get input from System.in (Java) in Netbeans?","body":"<p>If you just want a small window to type some input into, then the easiest way is to use JOptionPane. For example:</p>\n\n<pre><code>import javax.swing.JOptionPane;\n\npublic class TestClass {\n    public static void main(String[] args) {\n        String answer;\n        answer = JOptionPane.showInputDialog(null, \"What number to multiply by 3?\");\n        int num = Integer.parseInt(answer);\n        num = num * 3;\n        JOptionPane.showMessageDialog(null, \"The answer is \" + num);\n    }\n}\n</code></pre>\n\n<p>Note that showInputDialog returns a String, so you'll have to convert the data to whatever format you need. If you have something more involved, then JOptionPane may not be the way to go.</p>\n"},{"comments":[{"owner":{"account_id":44586,"reputation":37547,"user_id":130964,"accept_rate":95,"display_name":"peter.murray.rust"},"score":2,"creation_date":1256982616,"post_id":1653902,"comment_id":1525358,"body_markdown":"Thanks - that is exactly what I was after. You are right, it is certainly not obvious to type input into the &#39;Output&#39; console!","body":"Thanks - that is exactly what I was after. You are right, it is certainly not obvious to type input into the &#39;Output&#39; console!"}],"tags":[],"owner":{"account_id":19729,"reputation":404,"user_id":46475,"accept_rate":88,"display_name":"jercra"},"comment_count":1,"down_vote_count":0,"up_vote_count":12,"is_accepted":true,"score":12,"last_activity_date":1256982059,"creation_date":1256982059,"answer_id":1653902,"question_id":1653871,"body_markdown":"It may not be obvious but in Netbeans the Output tab at the bottom also takes input if your main thread is waiting for input.  Just type under the last output line and hit enter.  In other words, the Output tab is the same as a console window.","title":"How do I get input from System.in (Java) in Netbeans?","body":"<p>It may not be obvious but in Netbeans the Output tab at the bottom also takes input if your main thread is waiting for input.  Just type under the last output line and hit enter.  In other words, the Output tab is the same as a console window.</p>\n"},{"tags":[],"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1256982086,"creation_date":1256982086,"answer_id":1653903,"question_id":1653871,"body_markdown":"In Eclipse, you can just type in your console window. I suppose Netbeans would have a similar option.","title":"How do I get input from System.in (Java) in Netbeans?","body":"<p>In Eclipse, you can just type in your console window. I suppose Netbeans would have a similar option.</p>\n"},{"tags":[],"owner":{"account_id":42065,"reputation":53627,"user_id":122428,"display_name":"jitter"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1256982123,"creation_date":1256982123,"answer_id":1653905,"question_id":1653871,"body_markdown":"I&#39;m pretty confident the following worked in NB 6.5 Just type into the output window which happens to accept input\r\n\r\n    InputStreamReader inputStreamReader = new InputStreamReader(System.in);\r\n    BufferedReader reader = new BufferedReader(inputStreamReader);\r\n    System.out.println(&quot;Type name:&quot;);\r\n    String name = reader.readLine();\r\n    System.out.println(&quot;Hello &quot;+name);","title":"How do I get input from System.in (Java) in Netbeans?","body":"<p>I'm pretty confident the following worked in NB 6.5 Just type into the output window which happens to accept input</p>\n\n<pre><code>InputStreamReader inputStreamReader = new InputStreamReader(System.in);\nBufferedReader reader = new BufferedReader(inputStreamReader);\nSystem.out.println(\"Type name:\");\nString name = reader.readLine();\nSystem.out.println(\"Hello \"+name);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":45699,"reputation":19649,"user_id":134824,"accept_rate":93,"display_name":"evilReiko"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1256985268,"creation_date":1256985268,"answer_id":1654002,"question_id":1653871,"body_markdown":"if you are asking for a visual input, NetBeans provides a very easy way to manage visual components, as easy as drag-and-drop\r\n\r\nhow to do it:\r\n\r\n- Create a JFrame by right-click on your package &gt; New &gt; JFrame form\r\n- you can see a &quot;source&quot; tab and a &quot;design&quot; tab on top of the frame.\r\n- drag and drop your visual components (like Text Field from the Swing Control on the right menu)\r\n- after placing your component(s) on the Frame, right-click &gt; Events &gt; (then choose the type of event you want to handle for each component)\r\n\r\nit may look difficult and scary for first-timers, but once you start playing with it, few minutes and you will enjoy your experiments ;)","title":"How do I get input from System.in (Java) in Netbeans?","body":"<p>if you are asking for a visual input, NetBeans provides a very easy way to manage visual components, as easy as drag-and-drop</p>\n\n<p>how to do it:</p>\n\n<ul>\n<li>Create a JFrame by right-click on your package > New > JFrame form</li>\n<li>you can see a \"source\" tab and a \"design\" tab on top of the frame.</li>\n<li>drag and drop your visual components (like Text Field from the Swing Control on the right menu)</li>\n<li>after placing your component(s) on the Frame, right-click > Events > (then choose the type of event you want to handle for each component)</li>\n</ul>\n\n<p>it may look difficult and scary for first-timers, but once you start playing with it, few minutes and you will enjoy your experiments ;)</p>\n"},{"comments":[{"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"score":0,"creation_date":1695125652,"post_id":77124939,"comment_id":135979669,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/77124939/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":29470569,"reputation":1,"user_id":22583248,"display_name":"Mariel Alejandra Suarez"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695238964,"creation_date":1695018269,"answer_id":77124939,"question_id":1653871,"body_markdown":"```\r\npublic static void main(String[] args) {\r\n        // Mostrar un mensaje de bienvenida y pedir al usuario su nombre\r\n        System.out.print(&quot;Por favor, introduce tu nombre: &quot;);\r\n        Scanner scanner = new Scanner(System.in);\r\n        String nombre = scanner.nextLine();// luego definir otras variables\r\n\r\n```","title":"How do I get input from System.in (Java) in Netbeans?","body":"<pre><code>public static void main(String[] args) {\n        // Mostrar un mensaje de bienvenida y pedir al usuario su nombre\n        System.out.print(&quot;Por favor, introduce tu nombre: &quot;);\n        Scanner scanner = new Scanner(System.in);\n        String nombre = scanner.nextLine();// luego definir otras variables\n\n</code></pre>\n"}],"owner":{"account_id":44586,"reputation":37547,"user_id":130964,"accept_rate":95,"display_name":"peter.murray.rust"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59296,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":1653902,"answer_count":6,"score":5,"last_activity_date":1695238964,"creation_date":1256980828,"question_id":1653871,"body_markdown":"I have a small Java test app in Netbeans where the `main()` class reads input from `System.in`. How can I open a window into which I can type input? (I am using NB 6.7.1 on Windows 7).","title":"How do I get input from System.in (Java) in Netbeans?","body":"<p>I have a small Java test app in Netbeans where the <code>main()</code> class reads input from <code>System.in</code>. How can I open a window into which I can type input? (I am using NB 6.7.1 on Windows 7).</p>\n"},{"tags":["java","datetime","jpa","timestamp","playframework"],"comments":[{"owner":{"account_id":558023,"reputation":17978,"user_id":920607,"accept_rate":89,"display_name":"Piotr Nowicki"},"score":0,"creation_date":1321799821,"post_id":8202154,"comment_id":10080426,"body_markdown":"Do you have any requirement saying that the database is supposed to set &#39;now&#39; date value or can the JPA do that?","body":"Do you have any requirement saying that the database is supposed to set &#39;now&#39; date value or can the JPA do that?"},{"owner":{"account_id":6636,"reputation":224532,"user_id":11236,"accept_rate":76,"display_name":"ripper234"},"score":0,"creation_date":1321800197,"post_id":8202154,"comment_id":10080481,"body_markdown":"@PiotrNowicki - it can be done by JPA. Currently I&#39;m doing it inside my application code.","body":"@PiotrNowicki - it can be done by JPA. Currently I&#39;m doing it inside my application code."}],"answers":[{"comments":[{"owner":{"account_id":6636,"reputation":224532,"user_id":11236,"accept_rate":76,"display_name":"ripper234"},"score":1,"creation_date":1321801805,"post_id":8202324,"comment_id":10080699,"body_markdown":"Where would I mark the column updateable=false etc... ? Using an annotation?\n\nAlso, why do I need a defensive copy on getters? Getters will not call `save()` anyway, so how can the value change?","body":"Where would I mark the column updateable=false etc... ? Using an annotation?  Also, why do I need a defensive copy on getters? Getters will not call <code>save()</code> anyway, so how can the value change?"},{"owner":{"account_id":558023,"reputation":17978,"user_id":920607,"accept_rate":89,"display_name":"Piotr Nowicki"},"score":1,"creation_date":1321802192,"post_id":8202324,"comment_id":10080757,"body_markdown":"Yes, adding the `@Column` annotation on your date field (or doing in the `orm.xml` file if you use it). The `java.util.Date` is a mutable class. User can get it using getter, so he obtains a reference to your class Date field. He can invoke i.e. date.setTime(1) thus changing the date state. Then the JPA will persist your date object which was changed by the user.","body":"Yes, adding the <code>@Column</code> annotation on your date field (or doing in the <code>orm.xml</code> file if you use it). The <code>java.util.Date</code> is a mutable class. User can get it using getter, so he obtains a reference to your class Date field. He can invoke i.e. date.setTime(1) thus changing the date state. Then the JPA will persist your date object which was changed by the user."},{"owner":{"account_id":6636,"reputation":224532,"user_id":11236,"accept_rate":76,"display_name":"ripper234"},"score":0,"creation_date":1321802588,"post_id":8202324,"comment_id":10080833,"body_markdown":"JPA will only persist if you call `save()` explicitly. Anyway, if by &quot;users&quot; you mean &quot;people who are able to write Java code in my project&quot;, that&#39;s a non-issue for me. If you meant actual visitors to my site, I don&#39;t get how they can do anything to call `set` on the date object.","body":"JPA will only persist if you call <code>save()</code> explicitly. Anyway, if by &quot;users&quot; you mean &quot;people who are able to write Java code in my project&quot;, that&#39;s a non-issue for me. If you meant actual visitors to my site, I don&#39;t get how they can do anything to call <code>set</code> on the date object."},{"owner":{"account_id":558023,"reputation":17978,"user_id":920607,"accept_rate":89,"display_name":"Piotr Nowicki"},"score":0,"creation_date":1321802923,"post_id":8202324,"comment_id":10080889,"body_markdown":"1. I was referring not only to persist but to update of your entity (or do you plan not to update it ever?).  \n2. By &#39;user&#39; I mean &#39;user of your class&#39;, not the visitors of your website.","body":"1. I was referring not only to persist but to update of your entity (or do you plan not to update it ever?).   2. By &#39;user&#39; I mean &#39;user of your class&#39;, not the visitors of your website."},{"owner":{"account_id":558023,"reputation":17978,"user_id":920607,"accept_rate":89,"display_name":"Piotr Nowicki"},"score":0,"creation_date":1322169148,"post_id":8202324,"comment_id":10169308,"body_markdown":"A word of explanation. In EclipseLink, there is no need for defensive copy of a `java.util.Date` object. EclipseLink, by default, has `eclipselink.temporal.mutable` option set to `true` which requires it to treat Java-mutable `Date` field as JPA-immutable `Date` field. Every operation which tries to invoke `oldDate.setTime(-)` will be ignored and will not be reflected in persisted value. Don&#39;t know how Hibernate works in this case.","body":"A word of explanation. In EclipseLink, there is no need for defensive copy of a <code>java.util.Date</code> object. EclipseLink, by default, has <code>eclipselink.temporal.mutable</code> option set to <code>true</code> which requires it to treat Java-mutable <code>Date</code> field as JPA-immutable <code>Date</code> field. Every operation which tries to invoke <code>oldDate.setTime(-)</code> will be ignored and will not be reflected in persisted value. Don&#39;t know how Hibernate works in this case."}],"tags":[],"owner":{"account_id":558023,"reputation":17978,"user_id":920607,"accept_rate":89,"display_name":"Piotr Nowicki"},"comment_count":5,"down_vote_count":1,"up_vote_count":26,"is_accepted":false,"score":25,"last_activity_date":1695238957,"creation_date":1321800710,"answer_id":8202324,"question_id":8202154,"body_markdown":"I think you can achieve it in at least two ways.\r\n\r\n**Database default value**\r\n\r\nI think the easiest way would be to mark the column as `updatable=false, insertable=false` by using @Column (this will give you immutability - the JPA will not include this column into `INSERT` and `UPDATE` statements) and setting the database column to have a default value of NOW.\r\n\r\n**JPA Lifecycle callback methods**\r\n\r\nOther way would be to provide a `@PrePersist` lifecycle callback method which would set your date object to the actual date `new Date()`. Then you would need to make sure no one will edit this value, so you shouldn&#39;t provide any setters for this property.\r\n\r\nIf you want the date to be updated when entity is modified you could, similarly, implement `@PreUpdate` lifecycle callback method which would set the actual modification date.\r\n\r\nJust remember that if you&#39;re working with Date objects you should do a **defensive copy** of your Date object (so you should return something like `new Date(oldDate.getTime());` instead of plain `return oldDate`).  \r\nThis will prevent users from using getter of your Date and modifying its state.","title":"How to create an auto-generated Date/timestamp field in a Play! / JPA?","body":"<p>I think you can achieve it in at least two ways.</p>\n<p><strong>Database default value</strong></p>\n<p>I think the easiest way would be to mark the column as <code>updatable=false, insertable=false</code> by using @Column (this will give you immutability - the JPA will not include this column into <code>INSERT</code> and <code>UPDATE</code> statements) and setting the database column to have a default value of NOW.</p>\n<p><strong>JPA Lifecycle callback methods</strong></p>\n<p>Other way would be to provide a <code>@PrePersist</code> lifecycle callback method which would set your date object to the actual date <code>new Date()</code>. Then you would need to make sure no one will edit this value, so you shouldn't provide any setters for this property.</p>\n<p>If you want the date to be updated when entity is modified you could, similarly, implement <code>@PreUpdate</code> lifecycle callback method which would set the actual modification date.</p>\n<p>Just remember that if you're working with Date objects you should do a <strong>defensive copy</strong> of your Date object (so you should return something like <code>new Date(oldDate.getTime());</code> instead of plain <code>return oldDate</code>).<br />\nThis will prevent users from using getter of your Date and modifying its state.</p>\n"},{"comments":[{"owner":{"account_id":934222,"reputation":611,"user_id":1823408,"display_name":"Buminda"},"score":0,"creation_date":1515456619,"post_id":8207652,"comment_id":83299142,"body_markdown":"This worked, thanks. In addition to the above if you dont put the column property @Column(name = &quot;created_date&quot;, updatable = false)\n    during update it will be null.","body":"This worked, thanks. In addition to the above if you dont put the column property @Column(name = &quot;created_date&quot;, updatable = false)     during update it will be null."},{"owner":{"account_id":239367,"reputation":13188,"user_id":508907,"accept_rate":62,"display_name":"ntg"},"score":0,"creation_date":1623057403,"post_id":8207652,"comment_id":119960273,"body_markdown":"Will this set the system&#39;s time or the database system&#39;s time? I have the problem that sometimes the system time might be wrong and have no control over it, while the db system&#39;s time is correct (and more importantly unique)","body":"Will this set the system&#39;s time or the database system&#39;s time? I have the problem that sometimes the system time might be wrong and have no control over it, while the db system&#39;s time is correct (and more importantly unique)"},{"owner":{"account_id":3216,"reputation":12095,"user_id":4600,"display_name":"marcospereira"},"score":0,"creation_date":1623174425,"post_id":8207652,"comment_id":120001577,"body_markdown":"Hey @ntg, this will use the system time. I highly recommend that you use UTC to save the dates to avoid this problem between the system and the database. But, depending on the database, you can use default values too. For example, in PostgreSQL: https://www.postgresql.org/docs/8.4/ddl-default.html","body":"Hey @ntg, this will use the system time. I highly recommend that you use UTC to save the dates to avoid this problem between the system and the database. But, depending on the database, you can use default values too. For example, in PostgreSQL: <a href=\"https://www.postgresql.org/docs/8.4/ddl-default.html\" rel=\"nofollow noreferrer\">postgresql.org/docs/8.4/ddl-default.html</a>"},{"owner":{"account_id":239367,"reputation":13188,"user_id":508907,"accept_rate":62,"display_name":"ntg"},"score":0,"creation_date":1623233737,"post_id":8207652,"comment_id":120018794,"body_markdown":"@marcospereira Yes, I tried to fill date as default (e.g. https://stackoverflow.com/questions/16609724/using-current-time-in-utc-as-default-value-in-postgresql ) but the problem was I did not know how to add the value from JPA (https://stackoverflow.com/questions/67901807/adding-a-jpa-record-bean-with-defaults), even leaving the field null, it was trying to insert null in the column, ended up making a separate request to fill it... (https://stackoverflow.com/questions/1659030/how-to-get-the-database-time-with-jpql/67873402#67873402)","body":"@marcospereira Yes, I tried to fill date as default (e.g. <a href=\"https://stackoverflow.com/questions/16609724/using-current-time-in-utc-as-default-value-in-postgresql\" title=\"using current time in utc as default value in postgresql\">stackoverflow.com/questions/16609724/&hellip;</a> ) but the problem was I did not know how to add the value from JPA (<a href=\"https://stackoverflow.com/questions/67901807/adding-a-jpa-record-bean-with-defaults\" title=\"adding a jpa record bean with defaults\">stackoverflow.com/questions/67901807/&hellip;</a>), even leaving the field null, it was trying to insert null in the column, ended up making a separate request to fill it... (<a href=\"https://stackoverflow.com/questions/1659030/how-to-get-the-database-time-with-jpql/67873402#67873402\" title=\"how to get the database time with jpql\">stackoverflow.com/questions/1659030/&hellip;</a>)"}],"tags":[],"owner":{"account_id":3216,"reputation":12095,"user_id":4600,"display_name":"marcospereira"},"comment_count":4,"down_vote_count":0,"up_vote_count":41,"is_accepted":true,"score":41,"last_activity_date":1598642434,"creation_date":1321853295,"answer_id":8207652,"question_id":8202154,"body_markdown":"There is a code snippet that you can adapt to achieve what you want. Take a look:\r\n\r\n\r\n    \r\n    // Timestampable.java\r\n\r\n    package models;\r\n\r\n    import java.util.Date;\r\n\r\n    import javax.persistence.Column;\r\n    import javax.persistence.GeneratedValue;\r\n    import javax.persistence.Id;\r\n    import javax.persistence.MappedSuperclass;\r\n    import javax.persistence.PrePersist;\r\n    import javax.persistence.PreUpdate;\r\n    import javax.persistence.Version;\r\n\r\n    import play.db.ebean.Model;\r\n\r\n    @MappedSuperclass\r\n    public class Timestampable extends Model {\r\n\r\n      @Id\r\n      @GeneratedValue\r\n      public Long id;\r\n\r\n      @Column(name = &quot;created_at&quot;)\r\n      public Date createdAt;\r\n\r\n      @Column(name = &quot;updated_at&quot;)\r\n      public Date updatedAt;\r\n\r\n      @Version\r\n      public int version;\r\n\r\n      @Override\r\n      public void save() {\r\n        createdAt();\r\n        super.save();\r\n      }\r\n\r\n      @Override\r\n      public void update() {\r\n        updatedAt();\r\n        super.update();\r\n      }\r\n\r\n      @PrePersist\r\n      void createdAt() {\r\n        this.createdAt = this.updatedAt = new Date();\r\n      }\r\n\r\n      @PreUpdate\r\n      void updatedAt() {\r\n        this.updatedAt = new Date();\r\n      }\r\n    }\r\n\r\n\r\n","title":"How to create an auto-generated Date/timestamp field in a Play! / JPA?","body":"<p>There is a code snippet that you can adapt to achieve what you want. Take a look:</p>\n<pre><code>// Timestampable.java\n\npackage models;\n\nimport java.util.Date;\n\nimport javax.persistence.Column;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.Id;\nimport javax.persistence.MappedSuperclass;\nimport javax.persistence.PrePersist;\nimport javax.persistence.PreUpdate;\nimport javax.persistence.Version;\n\nimport play.db.ebean.Model;\n\n@MappedSuperclass\npublic class Timestampable extends Model {\n\n  @Id\n  @GeneratedValue\n  public Long id;\n\n  @Column(name = &quot;created_at&quot;)\n  public Date createdAt;\n\n  @Column(name = &quot;updated_at&quot;)\n  public Date updatedAt;\n\n  @Version\n  public int version;\n\n  @Override\n  public void save() {\n    createdAt();\n    super.save();\n  }\n\n  @Override\n  public void update() {\n    updatedAt();\n    super.update();\n  }\n\n  @PrePersist\n  void createdAt() {\n    this.createdAt = this.updatedAt = new Date();\n  }\n\n  @PreUpdate\n  void updatedAt() {\n    this.updatedAt = new Date();\n  }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":5240687,"reputation":1727,"user_id":4187837,"accept_rate":86,"display_name":"Gavin"},"score":1,"creation_date":1600851081,"post_id":59135627,"comment_id":113215561,"body_markdown":"Useful to know, however as far as I can tell those or Hibernate rather than JPA annotations","body":"Useful to know, however as far as I can tell those or Hibernate rather than JPA annotations"},{"owner":{"account_id":8621268,"reputation":953,"user_id":6456107,"display_name":"Alter"},"score":0,"creation_date":1632279639,"post_id":59135627,"comment_id":122446551,"body_markdown":"This solution looks like it has en issue when inserting the timestamp, because the last three digits of the timestamp, milliseconds digits are zero, example: 2021-07-09 12:09:10.820000","body":"This solution looks like it has en issue when inserting the timestamp, because the last three digits of the timestamp, milliseconds digits are zero, example: 2021-07-09 12:09:10.820000"}],"tags":[],"owner":{"account_id":11262226,"reputation":61,"user_id":8260191,"display_name":"lirugo"},"comment_count":2,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1575277791,"creation_date":1575277791,"answer_id":59135627,"question_id":8202154,"body_markdown":"I think it&#39;s a little bit clearly\r\n\r\n        @Column(name = &quot;created_at&quot;)\r\n        @CreationTimestamp\r\n        private LocalDateTime createdAt;\r\n    \r\n        @Column(name = &quot;updated_at&quot;)\r\n        @UpdateTimestamp\r\n        private LocalDateTime updatedAt;","title":"How to create an auto-generated Date/timestamp field in a Play! / JPA?","body":"<p>I think it's a little bit clearly</p>\n\n<pre><code>    @Column(name = \"created_at\")\n    @CreationTimestamp\n    private LocalDateTime createdAt;\n\n    @Column(name = \"updated_at\")\n    @UpdateTimestamp\n    private LocalDateTime updatedAt;\n</code></pre>\n"}],"owner":{"account_id":6636,"reputation":224532,"user_id":11236,"accept_rate":76,"display_name":"ripper234"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56507,"favorite_count":0,"down_vote_count":0,"up_vote_count":19,"accepted_answer_id":8207652,"answer_count":3,"score":19,"last_activity_date":1695238957,"creation_date":1321799127,"question_id":8202154,"body_markdown":"I&#39;d like to add a Date/DateTime/Timestamp field on an entity object, that will be automatically created when the entity is created/persisted and set to &quot;now&quot;, never to be updated again.\r\n\r\nOther use cases included fields that were always updated to contain the last modification date of the entity.\r\n\r\nI used to achieve such requirements [in the mysql schema][1].\r\n\r\nWhat&#39;s the best way to do this in Play! / JPA?\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/168736/how-do-you-set-a-default-value-for-a-mysql-datetime-column","title":"How to create an auto-generated Date/timestamp field in a Play! / JPA?","body":"<p>I'd like to add a Date/DateTime/Timestamp field on an entity object, that will be automatically created when the entity is created/persisted and set to \"now\", never to be updated again.</p>\n\n<p>Other use cases included fields that were always updated to contain the last modification date of the entity.</p>\n\n<p>I used to achieve such requirements <a href=\"https://stackoverflow.com/questions/168736/how-do-you-set-a-default-value-for-a-mysql-datetime-column\">in the mysql schema</a>.</p>\n\n<p>What's the best way to do this in Play! / JPA?</p>\n"},{"tags":["java","spring","spring-data","mongodb-java"],"comments":[{"owner":{"account_id":211811,"reputation":726,"user_id":464219,"accept_rate":17,"display_name":"Hamedz"},"score":0,"creation_date":1471469988,"post_id":10311061,"comment_id":65365083,"body_markdown":"When you put filedName (eg. startDate) more than once you get **InvalidMongoDbApiUsageException** ....you can&#39;t add a second &#39;startDate&#39;...","body":"When you put filedName (eg. startDate) more than once you get <b>InvalidMongoDbApiUsageException</b> ....you can&#39;t add a second &#39;startDate&#39;..."},{"owner":{"account_id":450009,"reputation":1499,"user_id":845117,"display_name":"Dirk Schumacher"},"score":1,"creation_date":1676930090,"post_id":10311061,"comment_id":133232754,"body_markdown":"What is the type of __startDate__ and __endDate__?","body":"What is the type of <b>startDate</b> and <b>endDate</b>?"}],"answers":[{"tags":[],"owner":{"account_id":1450175,"reputation":102,"user_id":1367351,"display_name":"user1367351"},"comment_count":0,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1335863687,"creation_date":1335863687,"answer_id":10395715,"question_id":10311061,"body_markdown":"This works on version 2.7.2 of the Java driver\r\n\r\n    DBCollection coll = db.getCollection(&quot;posts&quot;);\t\r\n    \r\n    BasicDBObject date = new BasicDBObject();\r\n    date.append(&quot;$gte&quot;, new Date(startDate));\r\n    date.append(&quot;$lte&quot;, new Date(endDate));\r\n    \t\t\t\r\n    DBObject query = new BasicDBObject();\r\n    query.put(&quot;date&quot;, date);\r\n    \t\t\t\r\n    DBCursor cursor = coll.find(query);\r\n\r\nAlso, for the record you have &quot;startDate&quot; for both the gte and the lte parameters.","title":"Spring Data MongoDB Date Between","body":"<p>This works on version 2.7.2 of the Java driver</p>\n\n<pre><code>DBCollection coll = db.getCollection(\"posts\");  \n\nBasicDBObject date = new BasicDBObject();\ndate.append(\"$gte\", new Date(startDate));\ndate.append(\"$lte\", new Date(endDate));\n\nDBObject query = new BasicDBObject();\nquery.put(\"date\", date);\n\nDBCursor cursor = coll.find(query);\n</code></pre>\n\n<p>Also, for the record you have \"startDate\" for both the gte and the lte parameters.</p>\n"},{"comments":[{"owner":{"account_id":217681,"reputation":2872,"user_id":473596,"accept_rate":75,"display_name":"Fredrik Wallenius"},"score":4,"creation_date":1355315777,"post_id":13125964,"comment_id":19049158,"body_markdown":"That is a completely correct answer and should be marked as correct.","body":"That is a completely correct answer and should be marked as correct."},{"owner":{"account_id":937110,"reputation":296,"user_id":965844,"display_name":"java25"},"score":4,"creation_date":1413086343,"post_id":13125964,"comment_id":41308493,"body_markdown":"just making a note here that &quot;startDate&quot; and &quot;endDate&quot; are java.util.Date objects and will produce a mongodb query like &quot;startDate&quot; : { &quot;$gte&quot; : { &quot;$date&quot; : &quot;2014-09-01T07:00:00.000Z&quot;} , &quot;$lt&quot; : { &quot;$date&quot; : &quot;2014-10-01T07:00:00.000Z&quot;}}}","body":"just making a note here that &quot;startDate&quot; and &quot;endDate&quot; are java.util.Date objects and will produce a mongodb query like &quot;startDate&quot; : { &quot;$gte&quot; : { &quot;$date&quot; : &quot;2014-09-01T07:00:00.000Z&quot;} , &quot;$lt&quot; : { &quot;$date&quot; : &quot;2014-10-01T07:00:00.000Z&quot;}}}"},{"owner":{"account_id":2982375,"reputation":1301,"user_id":2532078,"accept_rate":54,"display_name":"Deepak Agrawal"},"score":1,"creation_date":1430572547,"post_id":13125964,"comment_id":48123949,"body_markdown":"query.addCriteria(Criteria.where(&quot;dob&quot;).gte(startDate).lt(endDate)); did not work in my case. What i should use to find dob object in db like :\n&quot;dob&quot; : ISODate(&quot;1991-01-22T18:30:00Z&quot;),","body":"query.addCriteria(Criteria.where(&quot;dob&quot;).gte(startDate).lt(en&zwnj;&#8203;dDate)); did not work in my case. What i should use to find dob object in db like : &quot;dob&quot; : ISODate(&quot;1991-01-22T18:30:00Z&quot;),"},{"owner":{"account_id":2386817,"reputation":15505,"user_id":2087628,"accept_rate":42,"display_name":"JaskeyLam"},"score":1,"creation_date":1532923435,"post_id":13125964,"comment_id":90138914,"body_markdown":"@java25 so how do you fix it","body":"@java25 so how do you fix it"}],"tags":[],"owner":{"account_id":104480,"reputation":6890,"user_id":279320,"accept_rate":76,"display_name":"Yohan Liyanage"},"comment_count":4,"down_vote_count":0,"up_vote_count":114,"is_accepted":false,"score":114,"last_activity_date":1351528939,"creation_date":1351528939,"answer_id":13125964,"question_id":10311061,"body_markdown":"Do not include the &#39;**and(&quot;startDate&quot;)**&#39; part in your criteria. \r\n\r\nInstead of :\r\n\r\n    query.addCriteria(Criteria.where(&quot;startDate&quot;).gte(startDate).and(&quot;startDate&quot;).lt(endDate));\r\n\r\nYou should use:\r\n\r\n    query.addCriteria(Criteria.where(&quot;startDate&quot;).gte(startDate).lt(endDate));\r\n\r\nWhen you include the &#39;and(&quot;startDate&quot;)&#39; part, Mongo see&#39;s it as two different entries on the same property. ","title":"Spring Data MongoDB Date Between","body":"<p>Do not include the '<strong>and(\"startDate\")</strong>' part in your criteria. </p>\n\n<p>Instead of :</p>\n\n<pre><code>query.addCriteria(Criteria.where(\"startDate\").gte(startDate).and(\"startDate\").lt(endDate));\n</code></pre>\n\n<p>You should use:</p>\n\n<pre><code>query.addCriteria(Criteria.where(\"startDate\").gte(startDate).lt(endDate));\n</code></pre>\n\n<p>When you include the 'and(\"startDate\")' part, Mongo see's it as two different entries on the same property. </p>\n"},{"comments":[{"owner":{"account_id":2982375,"reputation":1301,"user_id":2532078,"accept_rate":54,"display_name":"Deepak Agrawal"},"score":0,"creation_date":1430569556,"post_id":18548772,"comment_id":48123127,"body_markdown":"I am trying something like to search for dob. But I could not find any user. Although their are 200 users in database. \ncriteria = Criteria.where(&quot;dob&quot;).lt(startDate.getTime()).gte(endDate.getTime());","body":"I am trying something like to search for dob. But I could not find any user. Although their are 200 users in database.  criteria = Criteria.where(&quot;dob&quot;).lt(startDate.getTime()).gte(endDate.ge&zwnj;&#8203;tTime());"}],"tags":[],"owner":{"account_id":3243161,"reputation":41,"user_id":2735611,"display_name":"user2735611"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1433784557,"creation_date":1377956392,"answer_id":18548772,"question_id":10311061,"body_markdown":"It works, he is some sample code:\r\n\r\n    Criteria criteria = Criteria.where(&quot;pt&quot;).gte(startDate)\r\n           .andOperator(Criteria.where(&quot;pt&quot;).lt(endDate));","title":"Spring Data MongoDB Date Between","body":"<p>It works, he is some sample code:</p>\n\n<pre><code>Criteria criteria = Criteria.where(\"pt\").gte(startDate)\n       .andOperator(Criteria.where(\"pt\").lt(endDate));\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4047023,"reputation":310,"user_id":3327951,"accept_rate":75,"display_name":"Chetan S. Choudhary"},"score":1,"creation_date":1490592898,"post_id":32806508,"comment_id":73162157,"body_markdown":"Thank you James, It really helpfull.","body":"Thank you James, It really helpfull."},{"owner":{"account_id":285638,"reputation":10283,"user_id":584420,"accept_rate":60,"display_name":"James Jithin"},"score":0,"creation_date":1490593030,"post_id":32806508,"comment_id":73162197,"body_markdown":"@user3327951, great to know. :) Thank you.","body":"@user3327951, great to know. :) Thank you."}],"tags":[],"owner":{"account_id":285638,"reputation":10283,"user_id":584420,"accept_rate":60,"display_name":"James Jithin"},"comment_count":2,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1443369933,"creation_date":1443346772,"answer_id":32806508,"question_id":10311061,"body_markdown":"I had to find dates between on field `publishedDate` and here is how I did it:\r\n\r\n        Criteria publishedDateCriteria = Criteria\r\n\t\t\t\t\t\t\t.where(&quot;publishedDateObject&quot;).gte(psDate)\r\n\t\t\t\t\t\t\t.lte(peDate);\r\n        Query query = new Query(publishedDateCriteria);\r\n        mongoTemplate.find(query,\r\n    \t\t\t\t\t\tMyDocumentObject.class));","title":"Spring Data MongoDB Date Between","body":"<p>I had to find dates between on field <code>publishedDate</code> and here is how I did it:</p>\n\n<pre><code>    Criteria publishedDateCriteria = Criteria\n                        .where(\"publishedDateObject\").gte(psDate)\n                        .lte(peDate);\n    Query query = new Query(publishedDateCriteria);\n    mongoTemplate.find(query,\n                        MyDocumentObject.class));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3855506,"reputation":354,"user_id":3194555,"display_name":"DarwinFernandez"},"comment_count":0,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1485811489,"creation_date":1485803922,"answer_id":41943785,"question_id":10311061,"body_markdown":"[Reference here][1]\r\n\r\n    Query query = new Query(\r\n\t  Criteria.where(&quot;ip&quot;).is(ip)\r\n\t  .andOperator(\r\n\t\tCriteria.where(&quot;createdDate&quot;).lt(endDate),\r\n\t\tCriteria.where(&quot;createdDate&quot;).gte(startDate)\r\n\t  )\r\n    );\r\n\r\n\r\n  [1]: https://www.mkyong.com/java/due-to-limitations-of-the-basicdbobject-you-cant-add-a-second-and/","title":"Spring Data MongoDB Date Between","body":"<p><a href=\"https://www.mkyong.com/java/due-to-limitations-of-the-basicdbobject-you-cant-add-a-second-and/\" rel=\"noreferrer\">Reference here</a></p>\n\n<pre><code>Query query = new Query(\n  Criteria.where(\"ip\").is(ip)\n  .andOperator(\n    Criteria.where(\"createdDate\").lt(endDate),\n    Criteria.where(\"createdDate\").gte(startDate)\n  )\n);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":5036338,"reputation":1142,"user_id":4044987,"display_name":"Sumanth Varada"},"score":1,"creation_date":1563893029,"post_id":53913269,"comment_id":100847094,"body_markdown":"how to add where condition on specific field on top of it?  for example. i want AnyObject.company=&quot;flipkart&quot; . It would be great if you can provide spring data signture for that","body":"how to add where condition on specific field on top of it?  for example. i want AnyObject.company=&quot;flipkart&quot; . It would be great if you can provide spring data signture for that"},{"owner":{"account_id":13265395,"reputation":1820,"user_id":9578419,"display_name":"S.Daineko"},"score":2,"creation_date":1563895701,"post_id":53913269,"comment_id":100848687,"body_markdown":"@Query (&quot;{&#39;date&#39; : { $gte: ?0, $lte: ?1 }, &#39;company&#39;: ?2  }&quot; and method  public List&lt;AnyYourObj&gt; findByDateBetweenAndCompany(Date from, Date to, String company);","body":"@Query (&quot;{&#39;date&#39; : { $gte: ?0, $lte: ?1 }, &#39;company&#39;: ?2  }&quot; and method  public List&lt;AnyYourObj&gt; findByDateBetweenAndCompany(Date from, Date to, String company);"}],"tags":[],"owner":{"account_id":13265395,"reputation":1820,"user_id":9578419,"display_name":"S.Daineko"},"comment_count":2,"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1545653373,"creation_date":1545653373,"answer_id":53913269,"question_id":10311061,"body_markdown":"You also can add query annotaion: \r\n\r\n    @Query(&quot;{&#39;date&#39; : { $gte: ?0, $lte: ?1 } }&quot;)                 \r\n    public List&lt;AnyYourObj&gt; getObjectByDate(Date from, Date to); \r\n\r\nOr proper spring data method signature:\r\n\r\n    public List&lt;AnyYourObj&gt; findByDateBetween(Date from, Date to);\r\n\r\nBoth of these approaches give the same result.\r\nYou can read more here https://www.baeldung.com/queries-in-spring-data-mongodb\r\nand here https://docs.spring.io/spring-data/mongodb/docs/current/reference/html/\r\n\r\n","title":"Spring Data MongoDB Date Between","body":"<p>You also can add query annotaion: </p>\n\n<pre><code>@Query(\"{'date' : { $gte: ?0, $lte: ?1 } }\")                 \npublic List&lt;AnyYourObj&gt; getObjectByDate(Date from, Date to); \n</code></pre>\n\n<p>Or proper spring data method signature:</p>\n\n<pre><code>public List&lt;AnyYourObj&gt; findByDateBetween(Date from, Date to);\n</code></pre>\n\n<p>Both of these approaches give the same result.\nYou can read more here <a href=\"https://www.baeldung.com/queries-in-spring-data-mongodb\" rel=\"noreferrer\">https://www.baeldung.com/queries-in-spring-data-mongodb</a>\nand here <a href=\"https://docs.spring.io/spring-data/mongodb/docs/current/reference/html/\" rel=\"noreferrer\">https://docs.spring.io/spring-data/mongodb/docs/current/reference/html/</a></p>\n"},{"tags":[],"owner":{"account_id":7487914,"reputation":115,"user_id":5690551,"display_name":"SVK PETO"},"comment_count":0,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1620420553,"creation_date":1565968377,"answer_id":57527093,"question_id":10311061,"body_markdown":"    public interface MyRepository extends MongoRepository&lt;MyObject, MyObjectId&gt; {\r\n    \tList&lt;MyObject&gt; findByMydatefieldBetween(DateTime startDate, DateTime endDate);\r\n    }\r\n\r\nhttps://docs.spring.io/spring-data/mongodb/docs/2.2.x-SNAPSHOT/reference/html/#mongodb.repositories.queries","title":"Spring Data MongoDB Date Between","body":"<pre><code>public interface MyRepository extends MongoRepository&lt;MyObject, MyObjectId&gt; {\n    List&lt;MyObject&gt; findByMydatefieldBetween(DateTime startDate, DateTime endDate);\n}\n</code></pre>\n<p><a href=\"https://docs.spring.io/spring-data/mongodb/docs/2.2.x-SNAPSHOT/reference/html/#mongodb.repositories.queries\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-data/mongodb/docs/2.2.x-SNAPSHOT/reference/html/#mongodb.repositories.queries</a></p>\n"},{"tags":[],"owner":{"account_id":6611458,"reputation":378,"user_id":5106413,"display_name":"Pradeep Sreeram"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1581318631,"creation_date":1567070974,"answer_id":57707143,"question_id":10311061,"body_markdown":"I did like this\r\n\r\n    public interface PolicyRepository extends MongoRepository&lt;Policy, String&gt; {\r\n        @Query(&quot;{&#39;lastDate&#39;:{$gt:?0,$lt:?1}}&quot;)\r\n        \tpublic List&lt;Policy&gt; findAllPolicies(Date today,Date somedate);\r\n    }","title":"Spring Data MongoDB Date Between","body":"<p>I did like this</p>\n\n<pre><code>public interface PolicyRepository extends MongoRepository&lt;Policy, String&gt; {\n    @Query(\"{'lastDate':{$gt:?0,$lt:?1}}\")\n        public List&lt;Policy&gt; findAllPolicies(Date today,Date somedate);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16062883,"reputation":1058,"user_id":11593292,"display_name":"Sandun Susantha"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1583322401,"creation_date":1583322401,"answer_id":60525339,"question_id":10311061,"body_markdown":"    if (metaData.getToValue() == null){\r\n    dynamicCriteria = Criteria.where(&quot;metaData.key&quot;).is(metaData.getKey()).andOperator(Criteria.where(&quot;metaData.value&quot;).is(metaData.getFromValue()));\r\n    }else {\r\n    dynamicCriteria = Criteria.where(&quot;metaData.key&quot;).is(metaData.getKey()).orOperator(Criteria.where(&quot;metaData.value&quot;).gte(metaData.getFromValue()).lt(metaData.getToValue()));\r\n    }","title":"Spring Data MongoDB Date Between","body":"<pre><code>if (metaData.getToValue() == null){\ndynamicCriteria = Criteria.where(\"metaData.key\").is(metaData.getKey()).andOperator(Criteria.where(\"metaData.value\").is(metaData.getFromValue()));\n}else {\ndynamicCriteria = Criteria.where(\"metaData.key\").is(metaData.getKey()).orOperator(Criteria.where(\"metaData.value\").gte(metaData.getFromValue()).lt(metaData.getToValue()));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1790177,"reputation":166,"user_id":1630783,"display_name":"JianrongChen"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1637140870,"creation_date":1637140870,"answer_id":70001739,"question_id":10311061,"body_markdown":"Use MongoRepository Query method like this:\r\n\r\n    List&lt;T&gt; findByStartDateBetween(Range&lt;Integer&gt; dataRange);\r\n\r\nuse Range for detail range settings.\r\n\r\n[simliar question][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/63848428/spring-data-mongodb-between-change-from-gt-lt-to-gte-lte/70001649#70001649","title":"Spring Data MongoDB Date Between","body":"<p>Use MongoRepository Query method like this:</p>\n<pre><code>List&lt;T&gt; findByStartDateBetween(Range&lt;Integer&gt; dataRange);\n</code></pre>\n<p>use Range for detail range settings.</p>\n<p><a href=\"https://stackoverflow.com/questions/63848428/spring-data-mongodb-between-change-from-gt-lt-to-gte-lte/70001649#70001649\">simliar question</a></p>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1653884072,"post_id":72423629,"comment_id":127951567,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/72423629/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":4507006,"reputation":1,"user_id":3664081,"display_name":"user3664081"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1653827562,"creation_date":1653827303,"answer_id":72423629,"question_id":10311061,"body_markdown":"[Search By Date Column in spring boot mongo db using criteria(Complex Query)][1][Search by date column in spring boot mongodb using criteria[\\]\\[1\\]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/nL6W2.png\r\n  [2]: https://i.stack.imgur.com/qoWlv.png","title":"Spring Data MongoDB Date Between","body":"<p><a href=\"https://i.stack.imgur.com/nL6W2.png\" rel=\"nofollow noreferrer\">Search By Date Column in spring boot mongo db using criteria(Complex Query)</a>[Search by date column in spring boot mongodb using criteria<a href=\"https://i.stack.imgur.com/qoWlv.png\" rel=\"nofollow noreferrer\">][1]</a></p>\n"},{"comments":[{"owner":{"account_id":3455742,"reputation":2315,"user_id":2894309,"accept_rate":56,"display_name":"Nishant Lakhara"},"score":0,"creation_date":1662458176,"post_id":73607388,"comment_id":130004465,"body_markdown":"can you try to explain the answer that you attempted along with the answer?","body":"can you try to explain the answer that you attempted along with the answer?"}],"tags":[],"owner":{"account_id":18327511,"reputation":1,"user_id":13346821,"display_name":"DoanTuyet"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662458368,"creation_date":1662370848,"answer_id":73607388,"question_id":10311061,"body_markdown":"Can you try this below query. This should work for your case.\r\n\r\n    Query query = new Query(\r\n    \t\tCriteria.andOperator(\r\n    \t\t\tCriteria.where(&quot;startDate&quot;).gte(startDate),\r\n    \t\t\tCriteria.where(&quot;startDate&quot;).lt(endDate)\r\n    \t\t)\r\n    \t);","title":"Spring Data MongoDB Date Between","body":"<p>Can you try this below query. This should work for your case.</p>\n<pre><code>Query query = new Query(\n        Criteria.andOperator(\n            Criteria.where(&quot;startDate&quot;).gte(startDate),\n            Criteria.where(&quot;startDate&quot;).lt(endDate)\n        )\n    );\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29483046,"reputation":11,"user_id":22593545,"display_name":"Balraj"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695238882,"creation_date":1695136085,"answer_id":77135787,"question_id":10311061,"body_markdown":"Another approach to this could be create a DateUtility class to get `LocalDateTime` from input `LocalDate`:\r\n    \r\n```java\r\npublic class DateUtility {\r\n    public static LocalDateTime toStartOfDay(LocalDate date) {\r\n        return Optional.ofNullable(date).map(LocalDate::atStartOfDay).orElse(null);\r\n    }\r\n\r\n    public static LocalDateTime toEndOfDay(LocalDate date) {\r\n        return Optional.ofNullable(date).map((localDate) -&gt;\r\n                localDate.atTime(LocalTime.MAX)).orElse(null);\r\n    }\r\n}\r\n```\r\n    \r\nThen use it in the query criteria:\r\n\r\n```java\r\nQuery query = new Query();  query.addCriteria(Criteria.where(&quot;startDate&quot;).gt(CommonUtils.toStartOfDay(startDate)).lt(CommonUtils.toEndOfDay(startDate)));\r\n```\r\n\r\n    \r\nThis query will give result from whole day for a given date.                        ","title":"Spring Data MongoDB Date Between","body":"<p>Another approach to this could be create a DateUtility class to get <code>LocalDateTime</code> from input <code>LocalDate</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class DateUtility {\n    public static LocalDateTime toStartOfDay(LocalDate date) {\n        return Optional.ofNullable(date).map(LocalDate::atStartOfDay).orElse(null);\n    }\n\n    public static LocalDateTime toEndOfDay(LocalDate date) {\n        return Optional.ofNullable(date).map((localDate) -&gt;\n                localDate.atTime(LocalTime.MAX)).orElse(null);\n    }\n}\n</code></pre>\n<p>Then use it in the query criteria:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Query query = new Query();  query.addCriteria(Criteria.where(&quot;startDate&quot;).gt(CommonUtils.toStartOfDay(startDate)).lt(CommonUtils.toEndOfDay(startDate)));\n</code></pre>\n<p>This query will give result from whole day for a given date.</p>\n"}],"owner":{"account_id":56295,"reputation":1856,"user_id":168621,"accept_rate":0,"display_name":"ujava"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":102620,"favorite_count":0,"down_vote_count":0,"up_vote_count":53,"answer_count":13,"score":53,"last_activity_date":1695238882,"creation_date":1335338303,"question_id":10311061,"body_markdown":"I use spring data mongodb.\r\n\r\nI want the records between two dates. The following MongoDB Query works:\r\n    \r\n    db.posts.find({startDate: {$gte: start, $lt: end}});\r\n\r\nMy attempted Spring data query object code translation does not work:\r\n\r\n    Query query = new Query();\r\n    query.addCriteria(Criteria.where(&quot;startDate&quot;).gte(startDate)\r\n                                .and(&quot;startDate&quot;).lt(endDate));\r\n\r\nWhat is the correct order of method calls to build the Mongo query I need?\r\n\t","title":"Spring Data MongoDB Date Between","body":"<p>I use spring data mongodb.</p>\n\n<p>I want the records between two dates. The following MongoDB Query works:</p>\n\n<pre><code>db.posts.find({startDate: {$gte: start, $lt: end}});\n</code></pre>\n\n<p>My attempted Spring data query object code translation does not work:</p>\n\n<pre><code>Query query = new Query();\nquery.addCriteria(Criteria.where(\"startDate\").gte(startDate)\n                            .and(\"startDate\").lt(endDate));\n</code></pre>\n\n<p>What is the correct order of method calls to build the Mongo query I need?</p>\n"},{"tags":["java","turtle-graphics"],"comments":[{"owner":{"account_id":8306545,"reputation":47696,"user_id":6243352,"display_name":"ggorlen"},"score":2,"creation_date":1694836107,"post_id":77116148,"comment_id":135947097,"body_markdown":"See [Turtle Java squares Pyramid](https://stackoverflow.com/questions/73698122/turtle-java-squares-pyramid/73707326#73707326)","body":"See <a href=\"https://stackoverflow.com/questions/73698122/turtle-java-squares-pyramid/73707326#73707326\">Turtle Java squares Pyramid</a>"},{"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"score":0,"creation_date":1694860391,"post_id":77116148,"comment_id":135948725,"body_markdown":"Welcome to Stack Overflow.\nPlease take the [tour] to learn how Stack Overflow works and read [ask] on how to improve the quality of your question.\nPlease see: [Why is “Can someone help me?” not an actual question?](https://meta.stackoverflow.com/q/284236).","body":"Welcome to Stack Overflow. Please take the <a href=\"https://stackoverflow.com/tour\">tour</a> to learn how Stack Overflow works and read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> on how to improve the quality of your question. Please see: <a href=\"https://meta.stackoverflow.com/q/284236\">Why is “Can someone help me?” not an actual question?</a>."}],"answers":[{"tags":[],"owner":{"account_id":7610133,"reputation":40891,"user_id":5771269,"display_name":"cdlane"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695230287,"creation_date":1695230287,"answer_id":77144669,"question_id":77116148,"body_markdown":"This has the look of a problem that can be programmed recursively with less complication:\r\n\r\n    class Pyramid extends Turtle {\r\n    \tpublic void construct(double base, int levels) {\r\n    \t\tint blocks_per_base = levels * 2 - 1;\r\n    \t\t\r\n    \t\tthis.construct_recursive(blocks_per_base, 1, base / blocks_per_base, levels);\r\n    \t}\r\n    \r\n    \tpublic void construct_recursive(int width, int height, double block, int levels) {\r\n    \t\tif (levels &gt; 0) {\r\n    \t\t\tthis.rectangle(width, height, block);\r\n    \t\t\tthis.forward(block);\r\n    \t\t\tthis.construct_recursive(width - 2, height + 1, block, levels - 1);\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tpublic void rectangle(int width, int height, double block) {\r\n    \t\tfor (int i=0; i&lt;2; i++) {\r\n    \t\t\tthis.forward(width * block);\r\n    \t\t\tthis.left(90);\r\n    \t\t\tthis.forward(height * block);\r\n    \t\t\tthis.left(90);\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tPyramid pyramid = new Pyramid();\r\n    \t\tpyramid.construct(200, 5);\r\n    \t}\r\n    }\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Jt52p.png","title":"Im trying to create a square pyramid using turtle graphics, but the turtle doesn&#39;t position itself correctly to start the next row","body":"<p>This has the look of a problem that can be programmed recursively with less complication:</p>\n<pre><code>class Pyramid extends Turtle {\n    public void construct(double base, int levels) {\n        int blocks_per_base = levels * 2 - 1;\n        \n        this.construct_recursive(blocks_per_base, 1, base / blocks_per_base, levels);\n    }\n\n    public void construct_recursive(int width, int height, double block, int levels) {\n        if (levels &gt; 0) {\n            this.rectangle(width, height, block);\n            this.forward(block);\n            this.construct_recursive(width - 2, height + 1, block, levels - 1);\n        }\n    }\n\n    public void rectangle(int width, int height, double block) {\n        for (int i=0; i&lt;2; i++) {\n            this.forward(width * block);\n            this.left(90);\n            this.forward(height * block);\n            this.left(90);\n        }\n    }\n\n    public static void main(String[] args) {\n        Pyramid pyramid = new Pyramid();\n        pyramid.construct(200, 5);\n    }\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/Jt52p.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Jt52p.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":29456934,"reputation":1,"user_id":22572596,"display_name":"Josh _"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695238741,"creation_date":1694831888,"question_id":77116148,"body_markdown":"I&#39;m trying to create a square pyramid (pictured below):\r\n\r\n[![enter image description here][1]][1]\r\n\r\nBut with the following code this is the result:\r\n\r\n[![enter image description here][2]][2]\r\n\r\nAny help would be appreciated! (note: I can&#39;t use the &quot;goTo&quot; command)\r\n\r\nMy code:\r\n\r\n    class Pyramid {\r\n        public static void main(String[] args) {\r\n            Turtle t = new Turtle();\r\n            t.delay(100);\r\n            pyramid(t, 200, 5);\r\n        }\r\n    \r\n        public static void pyramid(Turtle t, double base, int levels) {\r\n            for (int j=0; j&lt;levels; j++) {\r\n                for (int i=0; i&lt;((levels) * 2) - 1 - (j * 2); i++) {\r\n                    square(t, base, levels);\r\n                    t.forward(base / ((levels * 2) - 1));\r\n                }\r\n    \r\n                t.penup();\r\n                t.backward(base - ((base / ((levels * 2) - 1)) * (j * 2)));\r\n                t.left(90);\r\n                t.forward(base / ((levels * 2) - 1));\r\n                t.right(90);\r\n                t.pendown();\r\n            }\r\n        }\r\n    \r\n        public static void square(Turtle t, double base, int levels) {\r\n            for (int i=0; i&lt;4; i++) {\r\n                t.forward(base / ((levels * 2) - 1));\r\n                t.left(90);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/c4Ejt.png\r\n  [2]: https://i.stack.imgur.com/GoOgN.png","title":"Im trying to create a square pyramid using turtle graphics, but the turtle doesn&#39;t position itself correctly to start the next row","body":"<p>I'm trying to create a square pyramid (pictured below):</p>\n<p><a href=\"https://i.stack.imgur.com/c4Ejt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/c4Ejt.png\" alt=\"enter image description here\" /></a></p>\n<p>But with the following code this is the result:</p>\n<p><a href=\"https://i.stack.imgur.com/GoOgN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GoOgN.png\" alt=\"enter image description here\" /></a></p>\n<p>Any help would be appreciated! (note: I can't use the &quot;goTo&quot; command)</p>\n<p>My code:</p>\n<pre><code>class Pyramid {\n    public static void main(String[] args) {\n        Turtle t = new Turtle();\n        t.delay(100);\n        pyramid(t, 200, 5);\n    }\n\n    public static void pyramid(Turtle t, double base, int levels) {\n        for (int j=0; j&lt;levels; j++) {\n            for (int i=0; i&lt;((levels) * 2) - 1 - (j * 2); i++) {\n                square(t, base, levels);\n                t.forward(base / ((levels * 2) - 1));\n            }\n\n            t.penup();\n            t.backward(base - ((base / ((levels * 2) - 1)) * (j * 2)));\n            t.left(90);\n            t.forward(base / ((levels * 2) - 1));\n            t.right(90);\n            t.pendown();\n        }\n    }\n\n    public static void square(Turtle t, double base, int levels) {\n        for (int i=0; i&lt;4; i++) {\n            t.forward(base / ((levels * 2) - 1));\n            t.left(90);\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","android","onclick","screenshot","android-button"],"owner":{"account_id":18331583,"reputation":39,"user_id":13349991,"display_name":"Mirek"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695238475,"creation_date":1695238475,"question_id":77145465,"body_markdown":"I have two programs which are working. But I need to implement screenshot function into floating button (second) code.\r\n&lt;br&gt;&lt;br&gt;\r\nIn the first there is made screenshot after button click:&lt;br&gt;\r\n*MainActivity.java*\r\n\r\n```\r\npackage com.example.screenshotapp;\r\n\r\nimport android.Manifest;\r\nimport android.content.pm.PackageManager;\r\nimport android.graphics.Bitmap;\r\nimport android.os.Bundle;\r\nimport android.os.Environment;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.core.app.ActivityCompat;\r\nimport androidx.core.content.ContextCompat;\r\n\r\nimport java.io.File;\r\nimport java.io.FileOutputStream;\r\nimport java.util.Date;\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    private static final int REQUEST_CODE_PERMISSION = 101;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        Button screenshotButton = findViewById(R.id.screenshotButton);\r\n        screenshotButton.setOnClickListener(v -&gt; {\r\n            if (checkPermission()) {\r\n                takeScreenshot();\r\n            } else {\r\n                requestPermission();\r\n            }\r\n        });\r\n    }\r\n\r\n    private boolean checkPermission() {\r\n        int permission = ContextCompat.checkSelfPermission(this, Manifest.permission.WRITE_EXTERNAL_STORAGE);\r\n        return permission == PackageManager.PERMISSION_GRANTED;\r\n    }\r\n\r\n    private void requestPermission() {\r\n        ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.WRITE_EXTERNAL_STORAGE}, REQUEST_CODE_PERMISSION);\r\n    }\r\n\r\n    @Override\r\n    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {\r\n        super.onRequestPermissionsResult(requestCode, permissions, grantResults);\r\n        if (requestCode == REQUEST_CODE_PERMISSION) {\r\n            if (grantResults.length &gt; 0 &amp;&amp; grantResults[0] == PackageManager.PERMISSION_GRANTED) {\r\n                takeScreenshot();\r\n            } else {\r\n                Toast.makeText(this, &quot;Permission denied. Unable to take screenshot.&quot;, Toast.LENGTH_SHORT).show();\r\n            }\r\n        }\r\n    }\r\n\r\n    private void takeScreenshot() {\r\n        try {\r\n            View rootView = getWindow().getDecorView().getRootView();\r\n            rootView.setDrawingCacheEnabled(true);\r\n            Bitmap bitmap = Bitmap.createBitmap(rootView.getDrawingCache());\r\n            rootView.setDrawingCacheEnabled(false);\r\n\r\n            String fileName = &quot;screenshot_&quot; + new Date().getTime() + &quot;.png&quot;;\r\n            File screenshotFile = new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES), fileName);\r\n\r\n            FileOutputStream outputStream = new FileOutputStream(screenshotFile);\r\n            bitmap.compress(Bitmap.CompressFormat.PNG, 100, outputStream);\r\n            outputStream.flush();\r\n            outputStream.close();\r\n\r\n            Toast.makeText(this, &quot;Screenshot saved: &quot; + screenshotFile.getAbsolutePath(), Toast.LENGTH_SHORT).show();\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n            Toast.makeText(this, &quot;Error taking screenshot.&quot;, Toast.LENGTH_SHORT).show();\r\n        }\r\n    }\r\n}\r\n\r\n```\r\n*AndroidManifest.xml*\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    package=&quot;com.example.screenshotapp&quot;&gt;\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; /&gt;\r\n\r\n    &lt;application\r\n        android:allowBackup=&quot;true&quot;\r\n        android:icon=&quot;@mipmap/ic_launcher&quot;\r\n        android:label=&quot;@string/app_name&quot;\r\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\r\n        android:supportsRtl=&quot;true&quot;&gt;\r\n        &lt;activity android:name=&quot;com.example.screenshotapp.MainActivity&quot;\r\n            android:exported=&quot;true&quot;\r\n            android:theme=&quot;@style/Theme.AppCompat&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/activity&gt;\r\n    &lt;/application&gt;\r\n\r\n&lt;/manifest&gt;\r\n```\r\n\r\n*activity_main.xml*\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    android:padding=&quot;16dp&quot;\r\n    tools:context=&quot;.MainActivity&quot;&gt;\r\n\r\n    &lt;Button\r\n        android:id=&quot;@+id/screenshotButton&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:text=&quot;Udělat screenshot&quot;\r\n        android:layout_centerInParent=&quot;true&quot; /&gt;\r\n\r\n&lt;/RelativeLayout&gt;\r\n```\r\n\r\nAnd there is second code - floating button widget which is visible also through other apps:\r\n*MainAcivity.java*\r\n\r\n```\r\npackage com.example.mywidget2;\r\n\r\nimport android.app.Activity;\r\nimport android.os.Bundle;\r\nimport android.view.View;\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.view.View;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\n\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n\r\n        super.onCreate(savedInstanceState);\r\n\r\n        setContentView(R.layout.activity_main);\r\n\r\n        startFloatingWidgetService();\r\n    }\r\n    private void startFloatingWidgetService() {\r\n        Intent intent = new Intent(this, FloatingWidgetService.class);\r\n        startService(intent);\r\n    }\r\n}\r\n```\r\n\r\n*FloatingWidgetService.java*\r\n\r\n``` \r\npackage com.example.mywidget2;\r\n\r\nimport android.app.Service;\r\nimport android.content.Intent;\r\nimport android.graphics.PixelFormat;\r\nimport android.net.Uri;\r\nimport android.os.Build;\r\nimport android.os.IBinder;\r\nimport android.provider.Settings;\r\nimport android.view.Gravity;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.WindowManager;\r\nimport android.widget.Button;\r\n\r\nimport com.example.mywidget2.R;\r\n\r\npublic class FloatingWidgetService extends Service {\r\n\r\n\r\n    private WindowManager mWindowManager;\r\n    private View mFloatingWidgetView;\r\n    @Override\r\n    public IBinder onBind(Intent intent) {\r\n\r\n        return null;\r\n    }\r\n\r\n    // Method to request the SYSTEM_ALERT_WINDOW permission\r\n    private void requestOverlayPermission() {\r\n\r\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {\r\n            Intent intent = new Intent(Settings.ACTION_MANAGE_OVERLAY_PERMISSION);\r\n            intent.setData(Uri.parse(&quot;package:&quot; + getPackageName()));\r\n            intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\r\n            startActivity(intent);\r\n        }\r\n    }\r\n\r\n    // Method to create the floating widget\r\n    private void createFloatingWidget() {\r\n\r\n        // Inflate the layout for the floating widget\r\n        mFloatingWidgetView = LayoutInflater.from(this).inflate(R.layout.floating_widget_layout,\r\n                null);\r\n\r\n        // Initialize the button on the floating widget\r\n        Button button = mFloatingWidgetView.findViewById(R.id.floating_button);\r\n        button.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                // Handle the button click event\r\n                showTextDialog();\r\n                // You can perform other actions here as needed\r\n            }\r\n        });\r\n\r\n        // Initialize the WindowManager\r\n        mWindowManager = (WindowManager) getSystemService(WINDOW_SERVICE);\r\n\r\n        // Set up WindowManager.LayoutParams for the floating widget\r\n        WindowManager.LayoutParams params = new WindowManager.LayoutParams(\r\n                WindowManager.LayoutParams.WRAP_CONTENT,\r\n                WindowManager.LayoutParams.WRAP_CONTENT,\r\n                WindowManager.LayoutParams.TYPE_APPLICATION_OVERLAY,\r\n                WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE,\r\n                PixelFormat.TRANSLUCENT\r\n        );\r\n\r\n        // Set the gravity of the floating widget (position on the screen)\r\n        params.gravity = Gravity.BOTTOM | Gravity.END;\r\n\r\n        // Add the floating widget to the WindowManager\r\n        mWindowManager.addView(mFloatingWidgetView, params);\r\n    }\r\n\r\n    @Override\r\n    public void onCreate() {\r\n        super.onCreate();\r\n\r\n        // Check if the permission is granted (only for API level 23 and higher)\r\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M &amp;&amp; !Settings.canDrawOverlays(this)) {\r\n            // You don&#39;t have permission to draw overlays, so request it\r\n            requestOverlayPermission();\r\n        } else {\r\n            // Permission is granted, proceed with creating the floating widget\r\n            createFloatingWidget();\r\n        }\r\n\r\n\r\n\r\n    }\r\n\r\n    @Override\r\n    public void onDestroy() {\r\n        super.onDestroy();\r\n        if (mFloatingWidgetView != null &amp;&amp; mWindowManager != null) {\r\n            mWindowManager.removeView(mFloatingWidgetView);\r\n        }\r\n    }\r\n\r\n    private void showTextDialog() {\r\n\r\n    }\r\n}\r\n``` \r\n\r\n*AndroidManifest.xml*\r\n``` \r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.SYSTEM_ALERT_WINDOW&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; /&gt;\r\n\r\n    &lt;application\r\n        android:allowBackup=&quot;true&quot;\r\n        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\r\n        android:fullBackupContent=&quot;@xml/backup_rules&quot;\r\n        android:icon=&quot;@mipmap/ic_launcher&quot;\r\n        android:label=&quot;@string/app_name&quot;\r\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\r\n        android:supportsRtl=&quot;true&quot;\r\n        android:theme=&quot;@style/Theme.Mywidget2&quot;\r\n        tools:targetApi=&quot;31&quot;&gt;\r\n\r\n        &lt;service\r\n            android:name=&quot;.FloatingWidgetService&quot;\r\n            android:enabled=&quot;true&quot;\r\n            android:exported=&quot;true&quot; /&gt;\r\n\r\n        &lt;activity\r\n            android:name=&quot;.MainActivity&quot;\r\n            android:exported=&quot;true&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n\r\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/activity&gt;\r\n    &lt;/application&gt;\r\n\r\n&lt;/manifest&gt;\r\n``` \r\n*floating_widget_layout.xml*\r\n``` \r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    android:layout_width=&quot;wrap_content&quot;\r\n    android:layout_height=&quot;wrap_content&quot;\r\n    android:orientation=&quot;vertical&quot;&gt;\r\n\r\n    &lt;Button\r\n        android:id=&quot;@+id/floating_button&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:layout_gravity=&quot;end&quot;\r\n        android:background=&quot;@android:color/holo_red_light&quot;\r\n        android:text=&quot;asdasda&quot;\r\n        android:textColor=&quot;#212121&quot; /&gt;\r\n\r\n&lt;/LinearLayout&gt;\r\n``` ","title":"Android: Java - implement Screenshot code to floating button","body":"<p>I have two programs which are working. But I need to implement screenshot function into floating button (second) code.\n<br><br>\nIn the first there is made screenshot after button click:<br>\n<em>MainActivity.java</em></p>\n<pre><code>package com.example.screenshotapp;\n\nimport android.Manifest;\nimport android.content.pm.PackageManager;\nimport android.graphics.Bitmap;\nimport android.os.Bundle;\nimport android.os.Environment;\nimport android.view.View;\nimport android.widget.Button;\nimport android.widget.Toast;\n\nimport androidx.annotation.NonNull;\nimport androidx.appcompat.app.AppCompatActivity;\nimport androidx.core.app.ActivityCompat;\nimport androidx.core.content.ContextCompat;\n\nimport java.io.File;\nimport java.io.FileOutputStream;\nimport java.util.Date;\n\npublic class MainActivity extends AppCompatActivity {\n\n    private static final int REQUEST_CODE_PERMISSION = 101;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        Button screenshotButton = findViewById(R.id.screenshotButton);\n        screenshotButton.setOnClickListener(v -&gt; {\n            if (checkPermission()) {\n                takeScreenshot();\n            } else {\n                requestPermission();\n            }\n        });\n    }\n\n    private boolean checkPermission() {\n        int permission = ContextCompat.checkSelfPermission(this, Manifest.permission.WRITE_EXTERNAL_STORAGE);\n        return permission == PackageManager.PERMISSION_GRANTED;\n    }\n\n    private void requestPermission() {\n        ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.WRITE_EXTERNAL_STORAGE}, REQUEST_CODE_PERMISSION);\n    }\n\n    @Override\n    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {\n        super.onRequestPermissionsResult(requestCode, permissions, grantResults);\n        if (requestCode == REQUEST_CODE_PERMISSION) {\n            if (grantResults.length &gt; 0 &amp;&amp; grantResults[0] == PackageManager.PERMISSION_GRANTED) {\n                takeScreenshot();\n            } else {\n                Toast.makeText(this, &quot;Permission denied. Unable to take screenshot.&quot;, Toast.LENGTH_SHORT).show();\n            }\n        }\n    }\n\n    private void takeScreenshot() {\n        try {\n            View rootView = getWindow().getDecorView().getRootView();\n            rootView.setDrawingCacheEnabled(true);\n            Bitmap bitmap = Bitmap.createBitmap(rootView.getDrawingCache());\n            rootView.setDrawingCacheEnabled(false);\n\n            String fileName = &quot;screenshot_&quot; + new Date().getTime() + &quot;.png&quot;;\n            File screenshotFile = new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES), fileName);\n\n            FileOutputStream outputStream = new FileOutputStream(screenshotFile);\n            bitmap.compress(Bitmap.CompressFormat.PNG, 100, outputStream);\n            outputStream.flush();\n            outputStream.close();\n\n            Toast.makeText(this, &quot;Screenshot saved: &quot; + screenshotFile.getAbsolutePath(), Toast.LENGTH_SHORT).show();\n        } catch (Exception e) {\n            e.printStackTrace();\n            Toast.makeText(this, &quot;Error taking screenshot.&quot;, Toast.LENGTH_SHORT).show();\n        }\n    }\n}\n\n</code></pre>\n<p><em>AndroidManifest.xml</em></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    package=&quot;com.example.screenshotapp&quot;&gt;\n\n    &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; /&gt;\n\n    &lt;application\n        android:allowBackup=&quot;true&quot;\n        android:icon=&quot;@mipmap/ic_launcher&quot;\n        android:label=&quot;@string/app_name&quot;\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\n        android:supportsRtl=&quot;true&quot;&gt;\n        &lt;activity android:name=&quot;com.example.screenshotapp.MainActivity&quot;\n            android:exported=&quot;true&quot;\n            android:theme=&quot;@style/Theme.AppCompat&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n    &lt;/application&gt;\n\n&lt;/manifest&gt;\n</code></pre>\n<p><em>activity_main.xml</em></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:padding=&quot;16dp&quot;\n    tools:context=&quot;.MainActivity&quot;&gt;\n\n    &lt;Button\n        android:id=&quot;@+id/screenshotButton&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:text=&quot;Udělat screenshot&quot;\n        android:layout_centerInParent=&quot;true&quot; /&gt;\n\n&lt;/RelativeLayout&gt;\n</code></pre>\n<p>And there is second code - floating button widget which is visible also through other apps:\n<em>MainAcivity.java</em></p>\n<pre><code>package com.example.mywidget2;\n\nimport android.app.Activity;\nimport android.os.Bundle;\nimport android.view.View;\nimport android.content.Intent;\nimport android.os.Bundle;\nimport android.view.View;\nimport androidx.appcompat.app.AppCompatActivity;\n\n\n\npublic class MainActivity extends AppCompatActivity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n\n        super.onCreate(savedInstanceState);\n\n        setContentView(R.layout.activity_main);\n\n        startFloatingWidgetService();\n    }\n    private void startFloatingWidgetService() {\n        Intent intent = new Intent(this, FloatingWidgetService.class);\n        startService(intent);\n    }\n}\n</code></pre>\n<p><em>FloatingWidgetService.java</em></p>\n<pre><code>package com.example.mywidget2;\n\nimport android.app.Service;\nimport android.content.Intent;\nimport android.graphics.PixelFormat;\nimport android.net.Uri;\nimport android.os.Build;\nimport android.os.IBinder;\nimport android.provider.Settings;\nimport android.view.Gravity;\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.view.WindowManager;\nimport android.widget.Button;\n\nimport com.example.mywidget2.R;\n\npublic class FloatingWidgetService extends Service {\n\n\n    private WindowManager mWindowManager;\n    private View mFloatingWidgetView;\n    @Override\n    public IBinder onBind(Intent intent) {\n\n        return null;\n    }\n\n    // Method to request the SYSTEM_ALERT_WINDOW permission\n    private void requestOverlayPermission() {\n\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {\n            Intent intent = new Intent(Settings.ACTION_MANAGE_OVERLAY_PERMISSION);\n            intent.setData(Uri.parse(&quot;package:&quot; + getPackageName()));\n            intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\n            startActivity(intent);\n        }\n    }\n\n    // Method to create the floating widget\n    private void createFloatingWidget() {\n\n        // Inflate the layout for the floating widget\n        mFloatingWidgetView = LayoutInflater.from(this).inflate(R.layout.floating_widget_layout,\n                null);\n\n        // Initialize the button on the floating widget\n        Button button = mFloatingWidgetView.findViewById(R.id.floating_button);\n        button.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                // Handle the button click event\n                showTextDialog();\n                // You can perform other actions here as needed\n            }\n        });\n\n        // Initialize the WindowManager\n        mWindowManager = (WindowManager) getSystemService(WINDOW_SERVICE);\n\n        // Set up WindowManager.LayoutParams for the floating widget\n        WindowManager.LayoutParams params = new WindowManager.LayoutParams(\n                WindowManager.LayoutParams.WRAP_CONTENT,\n                WindowManager.LayoutParams.WRAP_CONTENT,\n                WindowManager.LayoutParams.TYPE_APPLICATION_OVERLAY,\n                WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE,\n                PixelFormat.TRANSLUCENT\n        );\n\n        // Set the gravity of the floating widget (position on the screen)\n        params.gravity = Gravity.BOTTOM | Gravity.END;\n\n        // Add the floating widget to the WindowManager\n        mWindowManager.addView(mFloatingWidgetView, params);\n    }\n\n    @Override\n    public void onCreate() {\n        super.onCreate();\n\n        // Check if the permission is granted (only for API level 23 and higher)\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M &amp;&amp; !Settings.canDrawOverlays(this)) {\n            // You don't have permission to draw overlays, so request it\n            requestOverlayPermission();\n        } else {\n            // Permission is granted, proceed with creating the floating widget\n            createFloatingWidget();\n        }\n\n\n\n    }\n\n    @Override\n    public void onDestroy() {\n        super.onDestroy();\n        if (mFloatingWidgetView != null &amp;&amp; mWindowManager != null) {\n            mWindowManager.removeView(mFloatingWidgetView);\n        }\n    }\n\n    private void showTextDialog() {\n\n    }\n}\n</code></pre>\n<p><em>AndroidManifest.xml</em></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\n\n    &lt;uses-permission android:name=&quot;android.permission.SYSTEM_ALERT_WINDOW&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; /&gt;\n\n    &lt;application\n        android:allowBackup=&quot;true&quot;\n        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\n        android:fullBackupContent=&quot;@xml/backup_rules&quot;\n        android:icon=&quot;@mipmap/ic_launcher&quot;\n        android:label=&quot;@string/app_name&quot;\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\n        android:supportsRtl=&quot;true&quot;\n        android:theme=&quot;@style/Theme.Mywidget2&quot;\n        tools:targetApi=&quot;31&quot;&gt;\n\n        &lt;service\n            android:name=&quot;.FloatingWidgetService&quot;\n            android:enabled=&quot;true&quot;\n            android:exported=&quot;true&quot; /&gt;\n\n        &lt;activity\n            android:name=&quot;.MainActivity&quot;\n            android:exported=&quot;true&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n    &lt;/application&gt;\n\n&lt;/manifest&gt;\n</code></pre>\n<p><em>floating_widget_layout.xml</em></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:layout_width=&quot;wrap_content&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:orientation=&quot;vertical&quot;&gt;\n\n    &lt;Button\n        android:id=&quot;@+id/floating_button&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_gravity=&quot;end&quot;\n        android:background=&quot;@android:color/holo_red_light&quot;\n        android:text=&quot;asdasda&quot;\n        android:textColor=&quot;#212121&quot; /&gt;\n\n&lt;/LinearLayout&gt;\n</code></pre>\n"},{"tags":["java","android","xml","android-studio"],"owner":{"account_id":24435711,"reputation":1,"user_id":18360024,"display_name":"beanz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695238275,"creation_date":1695238275,"question_id":77145447,"body_markdown":"To give a backstory, I am building an android app in android studio using java. This app serves as a digital RC controller for an RC airplane. My goal is to be able to connect to the airplane via bluetooth and controll the airplane from my android phone. Ive worked with android studio and java for a long time but I never worked with bluetooth connections/permissions before. I get the app to run and function but however my bluetooth functionality is janky. I have a button already created labeled as bluetooth but right now it does nothing. I tried to make it where when you click the bluetooth button and menu would pop up with bluetooths that are available to connect, however when doing so the app just crashes. Below is my MainActivity.Java code and my AndroidManifest.xml\r\n\r\n\r\n```\r\npackage com.example.rcair;\r\n\r\nimport android.Manifest;\r\nimport android.bluetooth.BluetoothAdapter;\r\nimport android.bluetooth.BluetoothDevice;\r\nimport android.bluetooth.BluetoothSocket;\r\nimport android.content.BroadcastReceiver;\r\nimport android.content.Context;\r\nimport android.content.Intent;\r\nimport android.content.IntentFilter;\r\nimport android.content.pm.PackageManager;\r\nimport android.os.BatteryManager;\r\nimport android.os.Bundle;\r\nimport android.view.MotionEvent;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.ImageView;\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.core.app.ActivityCompat;\r\nimport androidx.core.content.ContextCompat;\r\nimport java.io.IOException;\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    private Button dragLeftButton;\r\n    private Button dragRightButton;\r\n    private ImageView batteryIcon;\r\n    private Button bluetoothButton;\r\n\r\n    private int throttle = 0;\r\n    private int bodyRoll = 0;\r\n    private int yaw = 0;\r\n    private int pitch = 0;\r\n\r\n    // Bluetooth variables\r\n    private BluetoothAdapter bluetoothAdapter;\r\n    private BluetoothSocket bluetoothSocket;\r\n    private BluetoothDevice bluetoothDevice;\r\n\r\n    private static final int REQUEST_ENABLE_BT = 1;\r\n    private static final int REQUEST_PERMISSION_BLUETOOTH = 2;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        // Initialize views\r\n        dragLeftButton = findViewById(R.id.dragLeft);\r\n        dragRightButton = findViewById(R.id.dragRight);\r\n        batteryIcon = findViewById(R.id.batteryIcon);\r\n        bluetoothButton = findViewById(R.id.bluetoothButton);\r\n\r\n        // Initialize Bluetooth\r\n        initBluetooth();\r\n\r\n        // Set onTouchListener for the dragRightButton\r\n        dragRightButton.setOnTouchListener(new View.OnTouchListener() {\r\n            @Override\r\n            public boolean onTouch(View v, MotionEvent event) {\r\n                int action = event.getAction();\r\n\r\n                switch (action) {\r\n                    case MotionEvent.ACTION_DOWN:\r\n                        // Top part of the cross - Increase pitch\r\n                        if (event.getY() &lt; (float) v.getHeight() / 2) {\r\n                            pitch += 10; // Increase the pitch\r\n                            if (pitch &gt; 100) pitch = 100;\r\n                        }\r\n                        // Bottom part of the cross - Decrease pitch\r\n                        else {\r\n                            pitch -= 10; // Decrease pitch\r\n                            if (pitch &lt; 0) pitch = 0;\r\n                        }\r\n\r\n                        // Left part of the cross - Send power to the right (yaw right)\r\n                        if (event.getX() &lt; (float) v.getWidth() / 2) {\r\n                            yaw -= 10; // Yaw right\r\n                            if (yaw &lt; -100) yaw = -100;\r\n                        }\r\n                        // Right part of the cross - Send power to the left (yaw left)\r\n                        else {\r\n                            yaw += 10; // Yaw left\r\n                            if (yaw &gt; 100) yaw = 100;\r\n                        }\r\n\r\n                        // Update airplane control based on new values\r\n                        updateAirplaneControl(throttle, bodyRoll, yaw, pitch);\r\n                        break;\r\n\r\n                    case MotionEvent.ACTION_UP:\r\n                        // Stop applying pitch and yaw when the button is released\r\n                        pitch = 0;\r\n                        yaw = 0;\r\n                        updateAirplaneControl(throttle, bodyRoll, yaw, pitch);\r\n                        break;\r\n                }\r\n\r\n                return true;\r\n            }\r\n        });\r\n\r\n        // Registers a BroadcastReceiver to monitor battery level changes\r\n        registerBatteryLevelReceiver();\r\n\r\n        // Set onClickListener for the Bluetooth button\r\n        bluetoothButton.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                // Implement Bluetooth device discovery, pairing, and connection here\r\n                discoverBluetoothDevices();\r\n            }\r\n        });\r\n    }\r\n\r\n    private void initBluetooth() {\r\n        bluetoothAdapter = BluetoothAdapter.getDefaultAdapter();\r\n        if (bluetoothAdapter == null) {\r\n            // Device doesn&#39;t support Bluetooth\r\n            // Handle this case\r\n            return;\r\n        }\r\n\r\n        if (!bluetoothAdapter.isEnabled()) {\r\n            // Bluetooth is not enabled, request the user to enable it\r\n            Intent enableBtIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);\r\n            startActivityForResult(enableBtIntent, REQUEST_ENABLE_BT);\r\n            return;\r\n        }\r\n    }\r\n\r\n    private void discoverBluetoothDevices() {\r\n        // Check if Bluetooth is supported and if the necessary permission is granted\r\n        int permissionCheck = ContextCompat.checkSelfPermission(this,\r\n                Manifest.permission.BLUETOOTH);\r\n\r\n        if (permissionCheck != PackageManager.PERMISSION_GRANTED) {\r\n            // Bluetooth permission not granted, request it\r\n            ActivityCompat.requestPermissions(this,\r\n                    new String[]{Manifest.permission.BLUETOOTH},\r\n                    REQUEST_PERMISSION_BLUETOOTH);\r\n            return;\r\n        }\r\n\r\n        // Check if Bluetooth is available and enabled\r\n        if (bluetoothAdapter == null || !bluetoothAdapter.isEnabled()) {\r\n            System.out.println(&quot;Bluetooth is not available or not enabled.&quot;);\r\n            return;\r\n        }\r\n\r\n        // Start device discovery\r\n        if (bluetoothAdapter.startDiscovery()) {\r\n            // Register a BroadcastReceiver for discovery\r\n            IntentFilter filter = new IntentFilter(BluetoothDevice.ACTION_FOUND);\r\n            registerReceiver(new BroadcastReceiver() {\r\n                @Override\r\n                public void onReceive(Context context, Intent intent) {\r\n                    String action = intent.getAction();\r\n                    if (BluetoothDevice.ACTION_FOUND.equals(action)) {\r\n                        BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);\r\n                        // Handle the discovered device\r\n                        System.out.println(&quot;Discovered device: &quot; + device.getName() + &quot; (&quot; + device.getAddress() + &quot;)&quot;);\r\n                    }\r\n                }\r\n            }, filter);\r\n        } else {\r\n            System.out.println(&quot;Failed to start Bluetooth device discovery.&quot;);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions,\r\n                                           @NonNull int[] grantResults) {\r\n        super.onRequestPermissionsResult(requestCode, permissions, grantResults);\r\n\r\n        if (requestCode == REQUEST_PERMISSION_BLUETOOTH) {\r\n            if (grantResults.length &gt; 0 &amp;&amp; grantResults[0] == PackageManager.PERMISSION_GRANTED) {\r\n                // Permission granted, initialize Bluetooth\r\n                initBluetooth();\r\n            } else {\r\n                // Permission denied, handle accordingly (e.g., show a message)\r\n            }\r\n        }\r\n    }\r\n\r\n    private void updateAirplaneControl(int throttle, int bodyRoll, int yaw, int pitch) {\r\n        System.out.println(&quot;Throttle: &quot; + throttle + &quot;%&quot;);\r\n        System.out.println(&quot;Body Roll: &quot; + bodyRoll + &quot;%&quot;);\r\n        System.out.println(&quot;Yaw: &quot; + yaw + &quot;%&quot;);\r\n        System.out.println(&quot;Pitch: &quot; + pitch + &quot;%&quot;);\r\n    }\r\n\r\n    private void registerBatteryLevelReceiver() {\r\n        IntentFilter filter = new IntentFilter(Intent.ACTION_BATTERY_CHANGED);\r\n        BroadcastReceiver batteryLevelReceiver = new BroadcastReceiver() {\r\n            @Override\r\n            public void onReceive(Context context, Intent intent) {\r\n                int level = intent.getIntExtra(BatteryManager.EXTRA_LEVEL, -1);\r\n                int scale = intent.getIntExtra(BatteryManager.EXTRA_SCALE, -1);\r\n                int batteryLevel = (int) ((level / (float) scale) * 100);\r\n\r\n                updateBatteryIcon(batteryLevel);\r\n            }\r\n        };\r\n        registerReceiver(batteryLevelReceiver, filter);\r\n    }\r\n\r\n    private void updateBatteryIcon(int batteryLevel) {\r\n        if (batteryLevel &gt;= 90) {\r\n            batteryIcon.setImageResource(R.drawable.ic_battery_full);\r\n        } else if (batteryLevel &gt;= 50) {\r\n            batteryIcon.setImageResource(R.drawable.ic_battery_50);\r\n        } else if (batteryLevel &gt;= 20) {\r\n            batteryIcon.setImageResource(R.drawable.ic_battery_20);\r\n        } else {\r\n            batteryIcon.setImageResource(R.drawable.ic_battery_dead);\r\n        }\r\n    }\r\n}\r\n\r\n\r\n```\r\nand here is my AndroidManifest.xml\r\n\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH_ADMIN&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH_CONNECT&quot;/&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH_SCAN&quot;/&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH&quot;/&gt;\r\n\r\n    &lt;application\r\n        android:allowBackup=&quot;true&quot;\r\n        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\r\n        android:fullBackupContent=&quot;@xml/backup_rules&quot;\r\n        android:icon=&quot;@mipmap/ic_launcher&quot;\r\n        android:label=&quot;@string/app_name&quot;\r\n        android:roundIcon=&quot;@drawable/left_dpad&quot;\r\n        android:supportsRtl=&quot;true&quot;\r\n        android:theme=&quot;@style/Theme.RcAir&quot;\r\n        tools:targetApi=&quot;31&quot;&gt;\r\n        &lt;activity\r\n            android:name=&quot;.MainActivity&quot;\r\n            android:exported=&quot;true&quot;\r\n            android:screenOrientation=&quot;landscape&quot;&gt;\r\n\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n\r\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/activity&gt;\r\n    &lt;/application&gt;\r\n\r\n&lt;/manifest&gt;\r\n```\r\n\r\n\r\nIve been playing around with it, I already added permissions in my XML file and imported them to my java file. But no matter what I do, i constanly recieve Call requires permission which may be rejected by user: code should explicitly check to see if permission is available (with `checkPermission`) or explicitly handle a potential `SecurityException` and Call requires permission which may be rejected by user: code should explicitly check to see if permission is available (with `checkPermission`) or explicitly handle a potential `SecurityException`. As stated before the app runs as should but when clicking the bluetooth button it will crash the app entirely.","title":"Issue with Bluetooth Connection in Android Studio","body":"<p>To give a backstory, I am building an android app in android studio using java. This app serves as a digital RC controller for an RC airplane. My goal is to be able to connect to the airplane via bluetooth and controll the airplane from my android phone. Ive worked with android studio and java for a long time but I never worked with bluetooth connections/permissions before. I get the app to run and function but however my bluetooth functionality is janky. I have a button already created labeled as bluetooth but right now it does nothing. I tried to make it where when you click the bluetooth button and menu would pop up with bluetooths that are available to connect, however when doing so the app just crashes. Below is my MainActivity.Java code and my AndroidManifest.xml</p>\n<pre><code>package com.example.rcair;\n\nimport android.Manifest;\nimport android.bluetooth.BluetoothAdapter;\nimport android.bluetooth.BluetoothDevice;\nimport android.bluetooth.BluetoothSocket;\nimport android.content.BroadcastReceiver;\nimport android.content.Context;\nimport android.content.Intent;\nimport android.content.IntentFilter;\nimport android.content.pm.PackageManager;\nimport android.os.BatteryManager;\nimport android.os.Bundle;\nimport android.view.MotionEvent;\nimport android.view.View;\nimport android.widget.Button;\nimport android.widget.ImageView;\nimport androidx.annotation.NonNull;\nimport androidx.appcompat.app.AppCompatActivity;\nimport androidx.core.app.ActivityCompat;\nimport androidx.core.content.ContextCompat;\nimport java.io.IOException;\n\npublic class MainActivity extends AppCompatActivity {\n\n    private Button dragLeftButton;\n    private Button dragRightButton;\n    private ImageView batteryIcon;\n    private Button bluetoothButton;\n\n    private int throttle = 0;\n    private int bodyRoll = 0;\n    private int yaw = 0;\n    private int pitch = 0;\n\n    // Bluetooth variables\n    private BluetoothAdapter bluetoothAdapter;\n    private BluetoothSocket bluetoothSocket;\n    private BluetoothDevice bluetoothDevice;\n\n    private static final int REQUEST_ENABLE_BT = 1;\n    private static final int REQUEST_PERMISSION_BLUETOOTH = 2;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        // Initialize views\n        dragLeftButton = findViewById(R.id.dragLeft);\n        dragRightButton = findViewById(R.id.dragRight);\n        batteryIcon = findViewById(R.id.batteryIcon);\n        bluetoothButton = findViewById(R.id.bluetoothButton);\n\n        // Initialize Bluetooth\n        initBluetooth();\n\n        // Set onTouchListener for the dragRightButton\n        dragRightButton.setOnTouchListener(new View.OnTouchListener() {\n            @Override\n            public boolean onTouch(View v, MotionEvent event) {\n                int action = event.getAction();\n\n                switch (action) {\n                    case MotionEvent.ACTION_DOWN:\n                        // Top part of the cross - Increase pitch\n                        if (event.getY() &lt; (float) v.getHeight() / 2) {\n                            pitch += 10; // Increase the pitch\n                            if (pitch &gt; 100) pitch = 100;\n                        }\n                        // Bottom part of the cross - Decrease pitch\n                        else {\n                            pitch -= 10; // Decrease pitch\n                            if (pitch &lt; 0) pitch = 0;\n                        }\n\n                        // Left part of the cross - Send power to the right (yaw right)\n                        if (event.getX() &lt; (float) v.getWidth() / 2) {\n                            yaw -= 10; // Yaw right\n                            if (yaw &lt; -100) yaw = -100;\n                        }\n                        // Right part of the cross - Send power to the left (yaw left)\n                        else {\n                            yaw += 10; // Yaw left\n                            if (yaw &gt; 100) yaw = 100;\n                        }\n\n                        // Update airplane control based on new values\n                        updateAirplaneControl(throttle, bodyRoll, yaw, pitch);\n                        break;\n\n                    case MotionEvent.ACTION_UP:\n                        // Stop applying pitch and yaw when the button is released\n                        pitch = 0;\n                        yaw = 0;\n                        updateAirplaneControl(throttle, bodyRoll, yaw, pitch);\n                        break;\n                }\n\n                return true;\n            }\n        });\n\n        // Registers a BroadcastReceiver to monitor battery level changes\n        registerBatteryLevelReceiver();\n\n        // Set onClickListener for the Bluetooth button\n        bluetoothButton.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                // Implement Bluetooth device discovery, pairing, and connection here\n                discoverBluetoothDevices();\n            }\n        });\n    }\n\n    private void initBluetooth() {\n        bluetoothAdapter = BluetoothAdapter.getDefaultAdapter();\n        if (bluetoothAdapter == null) {\n            // Device doesn't support Bluetooth\n            // Handle this case\n            return;\n        }\n\n        if (!bluetoothAdapter.isEnabled()) {\n            // Bluetooth is not enabled, request the user to enable it\n            Intent enableBtIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);\n            startActivityForResult(enableBtIntent, REQUEST_ENABLE_BT);\n            return;\n        }\n    }\n\n    private void discoverBluetoothDevices() {\n        // Check if Bluetooth is supported and if the necessary permission is granted\n        int permissionCheck = ContextCompat.checkSelfPermission(this,\n                Manifest.permission.BLUETOOTH);\n\n        if (permissionCheck != PackageManager.PERMISSION_GRANTED) {\n            // Bluetooth permission not granted, request it\n            ActivityCompat.requestPermissions(this,\n                    new String[]{Manifest.permission.BLUETOOTH},\n                    REQUEST_PERMISSION_BLUETOOTH);\n            return;\n        }\n\n        // Check if Bluetooth is available and enabled\n        if (bluetoothAdapter == null || !bluetoothAdapter.isEnabled()) {\n            System.out.println(&quot;Bluetooth is not available or not enabled.&quot;);\n            return;\n        }\n\n        // Start device discovery\n        if (bluetoothAdapter.startDiscovery()) {\n            // Register a BroadcastReceiver for discovery\n            IntentFilter filter = new IntentFilter(BluetoothDevice.ACTION_FOUND);\n            registerReceiver(new BroadcastReceiver() {\n                @Override\n                public void onReceive(Context context, Intent intent) {\n                    String action = intent.getAction();\n                    if (BluetoothDevice.ACTION_FOUND.equals(action)) {\n                        BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);\n                        // Handle the discovered device\n                        System.out.println(&quot;Discovered device: &quot; + device.getName() + &quot; (&quot; + device.getAddress() + &quot;)&quot;);\n                    }\n                }\n            }, filter);\n        } else {\n            System.out.println(&quot;Failed to start Bluetooth device discovery.&quot;);\n        }\n    }\n\n    @Override\n    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions,\n                                           @NonNull int[] grantResults) {\n        super.onRequestPermissionsResult(requestCode, permissions, grantResults);\n\n        if (requestCode == REQUEST_PERMISSION_BLUETOOTH) {\n            if (grantResults.length &gt; 0 &amp;&amp; grantResults[0] == PackageManager.PERMISSION_GRANTED) {\n                // Permission granted, initialize Bluetooth\n                initBluetooth();\n            } else {\n                // Permission denied, handle accordingly (e.g., show a message)\n            }\n        }\n    }\n\n    private void updateAirplaneControl(int throttle, int bodyRoll, int yaw, int pitch) {\n        System.out.println(&quot;Throttle: &quot; + throttle + &quot;%&quot;);\n        System.out.println(&quot;Body Roll: &quot; + bodyRoll + &quot;%&quot;);\n        System.out.println(&quot;Yaw: &quot; + yaw + &quot;%&quot;);\n        System.out.println(&quot;Pitch: &quot; + pitch + &quot;%&quot;);\n    }\n\n    private void registerBatteryLevelReceiver() {\n        IntentFilter filter = new IntentFilter(Intent.ACTION_BATTERY_CHANGED);\n        BroadcastReceiver batteryLevelReceiver = new BroadcastReceiver() {\n            @Override\n            public void onReceive(Context context, Intent intent) {\n                int level = intent.getIntExtra(BatteryManager.EXTRA_LEVEL, -1);\n                int scale = intent.getIntExtra(BatteryManager.EXTRA_SCALE, -1);\n                int batteryLevel = (int) ((level / (float) scale) * 100);\n\n                updateBatteryIcon(batteryLevel);\n            }\n        };\n        registerReceiver(batteryLevelReceiver, filter);\n    }\n\n    private void updateBatteryIcon(int batteryLevel) {\n        if (batteryLevel &gt;= 90) {\n            batteryIcon.setImageResource(R.drawable.ic_battery_full);\n        } else if (batteryLevel &gt;= 50) {\n            batteryIcon.setImageResource(R.drawable.ic_battery_50);\n        } else if (batteryLevel &gt;= 20) {\n            batteryIcon.setImageResource(R.drawable.ic_battery_20);\n        } else {\n            batteryIcon.setImageResource(R.drawable.ic_battery_dead);\n        }\n    }\n}\n\n\n</code></pre>\n<p>and here is my AndroidManifest.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\n\n    &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH_ADMIN&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH_CONNECT&quot;/&gt;\n    &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH_SCAN&quot;/&gt;\n    &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH&quot;/&gt;\n\n    &lt;application\n        android:allowBackup=&quot;true&quot;\n        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\n        android:fullBackupContent=&quot;@xml/backup_rules&quot;\n        android:icon=&quot;@mipmap/ic_launcher&quot;\n        android:label=&quot;@string/app_name&quot;\n        android:roundIcon=&quot;@drawable/left_dpad&quot;\n        android:supportsRtl=&quot;true&quot;\n        android:theme=&quot;@style/Theme.RcAir&quot;\n        tools:targetApi=&quot;31&quot;&gt;\n        &lt;activity\n            android:name=&quot;.MainActivity&quot;\n            android:exported=&quot;true&quot;\n            android:screenOrientation=&quot;landscape&quot;&gt;\n\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n    &lt;/application&gt;\n\n&lt;/manifest&gt;\n</code></pre>\n<p>Ive been playing around with it, I already added permissions in my XML file and imported them to my java file. But no matter what I do, i constanly recieve Call requires permission which may be rejected by user: code should explicitly check to see if permission is available (with <code>checkPermission</code>) or explicitly handle a potential <code>SecurityException</code> and Call requires permission which may be rejected by user: code should explicitly check to see if permission is available (with <code>checkPermission</code>) or explicitly handle a potential <code>SecurityException</code>. As stated before the app runs as should but when clicking the bluetooth button it will crash the app entirely.</p>\n"},{"tags":["python","java","email","smtp","telegram-bot"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1695238579,"post_id":77145423,"comment_id":135999461,"body_markdown":"No, that&#39;s not allowed. You can&#39;t just send email from any random address the user enters. At least, not if you want it to arrive and not be blocked by all kinds of spam filters.","body":"No, that&#39;s not allowed. You can&#39;t just send email from any random address the user enters. At least, not if you want it to arrive and not be blocked by all kinds of spam filters."},{"owner":{"account_id":5582693,"reputation":587,"user_id":4424117,"display_name":"newuserua_ext"},"score":0,"creation_date":1695279658,"post_id":77145423,"comment_id":136003750,"body_markdown":"with your common credentials you may use his/her email string. i mean when you send email you may change sender name but not credentials.","body":"with your common credentials you may use his/her email string. i mean when you send email you may change sender name but not credentials."}],"owner":{"account_id":22993687,"reputation":1,"user_id":21972345,"display_name":"Andrey"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695237970,"creation_date":1695237970,"question_id":77145423,"body_markdown":"I want to implement this logic. The user enters his email, email subject, and email description into the bot. Then the bot processes this letter and sends it to Example@platform.gov.ru. The problem arises that to send a letter you need smtp_password, which is different from the regular mail password, maybe there are ways to get this password without requiring too much from the user?  \r\nMaybe there is a ready-made solution on Python or Java?\r\n\r\n```\r\nTried different code like this\r\n```\r\n\r\n    import smtplib\r\n    from email.mime.text import MIMEText\r\n    \r\n    def send_email(sender_email, recipient_email, subject, message):\r\n        smtp_server = &#39;smtp.google.com&#39;\r\n        smtp_port = 587\r\n        smtp_username = User_name\r\n        smtp_password = User_password\r\n    \r\n        msg = MIMEText(message)\r\n        msg[&#39;Subject&#39;] = subject\r\n        msg[&#39;From&#39;] = sender_email\r\n        msg[&#39;To&#39;] = recipient_email\r\n    \r\n        try:\r\n            with smtplib.SMTP(smtp_server, smtp_port) as server:\r\n                server.starttls()\r\n                server.login(smtp_username, smtp_password)\r\n                server.send_message(msg)\r\n            print(&#39;Email sent successfully.&#39;)\r\n        except Exception as e:\r\n            print(f&#39;Failed to send email. Error: {str(e)}&#39;)\r\n    \r\n    \r\n    sender_email = input(&#39;Enter your sender email: &#39;)\r\n    recipient_email = input(&#39;Enter recipients address: &#39;)\r\n    subject = input(&#39;Enter the subject of the message: &#39;)\r\n    message = input(&#39;Enter message text: &#39;)\r\n    \r\n    send_email(sender_email, recipient_email, subject, message)","title":"I want to send an email to an email address that will send users via Telegram bot","body":"<p>I want to implement this logic. The user enters his email, email subject, and email description into the bot. Then the bot processes this letter and sends it to Example@platform.gov.ru. The problem arises that to send a letter you need smtp_password, which is different from the regular mail password, maybe there are ways to get this password without requiring too much from the user?<br />\nMaybe there is a ready-made solution on Python or Java?</p>\n<pre><code>Tried different code like this\n</code></pre>\n<pre><code>import smtplib\nfrom email.mime.text import MIMEText\n\ndef send_email(sender_email, recipient_email, subject, message):\n    smtp_server = 'smtp.google.com'\n    smtp_port = 587\n    smtp_username = User_name\n    smtp_password = User_password\n\n    msg = MIMEText(message)\n    msg['Subject'] = subject\n    msg['From'] = sender_email\n    msg['To'] = recipient_email\n\n    try:\n        with smtplib.SMTP(smtp_server, smtp_port) as server:\n            server.starttls()\n            server.login(smtp_username, smtp_password)\n            server.send_message(msg)\n        print('Email sent successfully.')\n    except Exception as e:\n        print(f'Failed to send email. Error: {str(e)}')\n\n\nsender_email = input('Enter your sender email: ')\nrecipient_email = input('Enter recipients address: ')\nsubject = input('Enter the subject of the message: ')\nmessage = input('Enter message text: ')\n\nsend_email(sender_email, recipient_email, subject, message)\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":157346,"reputation":54254,"user_id":375232,"accept_rate":100,"display_name":"Landei"},"score":1,"creation_date":1283170453,"post_id":3590677,"comment_id":3779416,"body_markdown":"Again, you&#39;re talking about set functions, but you use lists. So your insert function is already wrong: You&#39;re not testing for duplicates.","body":"Again, you&#39;re talking about set functions, but you use lists. So your insert function is already wrong: You&#39;re not testing for duplicates."},{"owner":{"account_id":1671693,"reputation":2724,"user_id":1538041,"accept_rate":57,"display_name":"Martin H&#246;ller"},"score":0,"creation_date":1621504597,"post_id":3590677,"comment_id":119518215,"body_markdown":"Just for the records, there is also https://stackoverflow.com/questions/5283047, which handles the same topic and also has a lot of answers.","body":"Just for the records, there is also <a href=\"https://stackoverflow.com/questions/5283047\">stackoverflow.com/questions/5283047</a>, which handles the same topic and also has a lot of answers."},{"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"score":0,"creation_date":1695237860,"post_id":3590677,"comment_id":135999328,"body_markdown":"I notice that you ask for an implementation of the reverse operation, but your template to implement doesn&#39;t actually have a &quot;reverse&quot; method.","body":"I notice that you ask for an implementation of the reverse operation, but your template to implement doesn&#39;t actually have a &quot;reverse&quot; method."}],"answers":[{"comments":[{"owner":{"account_id":1063749,"reputation":14067,"user_id":1064809,"accept_rate":70,"display_name":"Natix"},"score":5,"creation_date":1412951267,"post_id":3590718,"comment_id":41272058,"body_markdown":"If you declared `a` and `b` as `NavigableSet`, then you could reverse their order using the `descendingSet()` method. For a general `Set`, there is no notion of order.","body":"If you declared <code>a</code> and <code>b</code> as <code>NavigableSet</code>, then you could reverse their order using the <code>descendingSet()</code> method. For a general <code>Set</code>, there is no notion of order."},{"owner":{"account_id":2243116,"reputation":5530,"user_id":1977151,"accept_rate":40,"display_name":"Vlasec"},"score":0,"creation_date":1510075131,"post_id":3590718,"comment_id":81277254,"body_markdown":"Nice answer, though the reverse part is nonsense. It originated in head of OP, but you didn&#39;t have to follow this. Or, you could provide a set with opposite comparator.","body":"Nice answer, though the reverse part is nonsense. It originated in head of OP, but you didn&#39;t have to follow this. Or, you could provide a set with opposite comparator."}],"tags":[],"owner":{"account_id":157346,"reputation":54254,"user_id":375232,"accept_rate":100,"display_name":"Landei"},"comment_count":2,"down_vote_count":0,"up_vote_count":81,"is_accepted":false,"score":81,"last_activity_date":1283082803,"creation_date":1282998011,"answer_id":3590718,"question_id":3590677,"body_markdown":"First, the operations you describe (except reverse) are set operations, not list operations, so use HashSet or (if you need an ordering) TreeSet.\r\n\r\n        Set&lt;Integer&gt; a = new TreeSet&lt;Integer&gt;(Arrays.asList(new Integer[]{0,2,4,5,6,8,10}));\r\n        Set&lt;Integer&gt; b = new TreeSet&lt;Integer&gt;(Arrays.asList(new Integer[]{5,6,7,8,9,10}));\r\n\r\n        //union\r\n        Set&lt;Integer&gt; c = new TreeSet&lt;Integer&gt;(a);\r\n        c.addAll(b);\r\n        System.out.println(c);\r\n\r\n        //intersection\r\n        Set&lt;Integer&gt; d = new TreeSet&lt;Integer&gt;(a);\r\n        d.retainAll(b);\r\n        System.out.println(d);\r\n\r\n        //difference\r\n        Set&lt;Integer&gt; e = new TreeSet&lt;Integer&gt;(a);\r\n        e.removeAll(b);\r\n        System.out.println(e);\r\n\r\n        //reverse\r\n        List&lt;Integer&gt; list = new ArrayList&lt;Integer&gt;(a);\r\n        java.util.Collections.reverse(list);\r\n        System.out.println(list);\r\n\r\n\r\n\r\n","title":"How to do union, intersect, difference and reverse data in java","body":"<p>First, the operations you describe (except reverse) are set operations, not list operations, so use HashSet or (if you need an ordering) TreeSet.</p>\n\n<pre><code>    Set&lt;Integer&gt; a = new TreeSet&lt;Integer&gt;(Arrays.asList(new Integer[]{0,2,4,5,6,8,10}));\n    Set&lt;Integer&gt; b = new TreeSet&lt;Integer&gt;(Arrays.asList(new Integer[]{5,6,7,8,9,10}));\n\n    //union\n    Set&lt;Integer&gt; c = new TreeSet&lt;Integer&gt;(a);\n    c.addAll(b);\n    System.out.println(c);\n\n    //intersection\n    Set&lt;Integer&gt; d = new TreeSet&lt;Integer&gt;(a);\n    d.retainAll(b);\n    System.out.println(d);\n\n    //difference\n    Set&lt;Integer&gt; e = new TreeSet&lt;Integer&gt;(a);\n    e.removeAll(b);\n    System.out.println(e);\n\n    //reverse\n    List&lt;Integer&gt; list = new ArrayList&lt;Integer&gt;(a);\n    java.util.Collections.reverse(list);\n    System.out.println(list);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":378830,"reputation":709,"user_id":731815,"accept_rate":17,"display_name":"Hari"},"score":2,"creation_date":1396481851,"post_id":3590725,"comment_id":34813020,"body_markdown":"+1 for a concise answer. Although I think you could have used Hashset instead of ArrayList to drive home the point.","body":"+1 for a concise answer. Although I think you could have used Hashset instead of ArrayList to drive home the point."},{"owner":{"account_id":2930175,"reputation":1582,"user_id":2510628,"display_name":"Dmytro Dzyubak"},"score":0,"creation_date":1401029530,"post_id":3590725,"comment_id":36716174,"body_markdown":"+1 But... This approach can reserve more space, then it is required for the resulted `List c`. Maybe, it would be better not to reserve that space during `new ArrayList` creation time at all?","body":"+1 But... This approach can reserve more space, then it is required for the resulted <code>List c</code>. Maybe, it would be better not to reserve that space during <code>new ArrayList</code> creation time at all?"},{"owner":{"account_id":283609,"reputation":45044,"user_id":581205,"accept_rate":72,"display_name":"maaartinus"},"score":0,"creation_date":1481370982,"post_id":3590725,"comment_id":69356831,"body_markdown":"@DmytroDzyubak The complexity of all methods is quadratic, which is usually much worse than using some extraneous space. It may be acceptable sometimes, but the solution at the very least clearly mention it.","body":"@DmytroDzyubak The complexity of all methods is quadratic, which is usually much worse than using some extraneous space. It may be acceptable sometimes, but the solution at the very least clearly mention it."}],"tags":[],"owner":{"account_id":645588,"reputation":482,"user_id":433683,"display_name":"anand"},"comment_count":3,"down_vote_count":2,"up_vote_count":47,"is_accepted":true,"score":45,"last_activity_date":1282998414,"creation_date":1282998112,"answer_id":3590725,"question_id":3590677,"body_markdown":"    //Union \r\n    List&lt;Integer&gt; c = new ArrayList&lt;Integer&gt;(a.size() + b.size());\r\n    addNoDups(c,a);\r\n    addNoDups(c,b);\r\n    \r\n    private void addNoDups(List&lt;Integer&gt; toAddTo,List&lt;Integer&gt; iterateOver) {\r\n        for(Integer num:iterateOver){\r\n            if(toAddTo.indexOf(num) == -1) {\r\n                toAddTo.add(num);\r\n            }\r\n        }\r\n    }\r\n    \r\n    //intersection\r\n    List&lt;Integer&gt; c = new ArrayList&lt;Integer&gt; (a.size() &gt; b.size() ?a.size():b.size());\r\n    c.addAll(a);\r\n    c.retainAll(b);\r\n    \r\n    //difference a-b\r\n    List&lt;Integer&gt; c = new ArrayList&lt;Integer&gt; (a.size());\r\n    c.addAll(a);\r\n    c.removeAll(b);\r\n\r\n","title":"How to do union, intersect, difference and reverse data in java","body":"<pre><code>//Union \nList&lt;Integer&gt; c = new ArrayList&lt;Integer&gt;(a.size() + b.size());\naddNoDups(c,a);\naddNoDups(c,b);\n\nprivate void addNoDups(List&lt;Integer&gt; toAddTo,List&lt;Integer&gt; iterateOver) {\n    for(Integer num:iterateOver){\n        if(toAddTo.indexOf(num) == -1) {\n            toAddTo.add(num);\n        }\n    }\n}\n\n//intersection\nList&lt;Integer&gt; c = new ArrayList&lt;Integer&gt; (a.size() &gt; b.size() ?a.size():b.size());\nc.addAll(a);\nc.retainAll(b);\n\n//difference a-b\nList&lt;Integer&gt; c = new ArrayList&lt;Integer&gt; (a.size());\nc.addAll(a);\nc.removeAll(b);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"score":0,"creation_date":1695238149,"post_id":3594918,"comment_id":135999392,"body_markdown":"The use of generics in the question tells me it&#39;s at least Java 5.","body":"The use of generics in the question tells me it&#39;s at least Java 5."}],"tags":[],"owner":{"account_id":49683,"reputation":9264,"user_id":148059,"display_name":"atk"},"comment_count":1,"down_vote_count":1,"up_vote_count":10,"is_accepted":false,"score":9,"last_activity_date":1506789736,"creation_date":1283088308,"answer_id":3594918,"question_id":3590677,"body_markdown":"A lot of the answers tell you to use libraries that will do the work for you.  While this is the right solution for the real world, keep in mind hat you&#39;re doing homework, and your teacher probably wants you to understand how the functions are written, not just how to find libraries to do the work for you.\r\n\r\nThat said, you&#39;ve got a good start with the code you&#39;ve shown.  Let&#39;s take the problem one step at a time.\r\n\r\nFirst, do you know where the Java documentation is located? http://download.oracle.com/javase/1.4.2/docs/api/ this is critical, as this is how you find out what functions do what.  Here&#39;s the link to Java 1.4.  I didn&#39;t notice what version you&#39;re using, but Java is backward compatible, so this should be sufficient.\r\n\r\nIn the docs, find the ArrayList entry.\r\n\r\n\r\nNow that we&#39;ve got the API docs, we need to break down your question.  you&#39;ve posted code, so I&#39;ll address it function by function.\r\n\r\ninsert() : do you have to have an ordered list, or does order not matter?  Or are you guaranteed that values will be provided to you in order?  Have you learned sorting algorithms yet?\r\n\r\nremove() : this function doesn&#39;t work.  take a look at the ArrayList API and see how to remove an item from the list.  Use that method.\r\n\r\nmember() : your member method doesn&#39;t work. You need to check every entry of the list and determine if the current member matches the function argument.  Have you learned about for loops?\r\n\r\nintersect() : ok, tell me in English what intersect is supposed to do.  Don&#39;t use the teacher&#39;s description if you can help it - use your own words (note to others, this is an exercise for the OP to learn to program, so please don&#39;t go answering it for him)\r\n\r\ndifference() : again, tell me in English what it&#39;s supposed to do.\r\n\r\nreverse() : again, give me the English description of what this is supposed to do.\r\n\r\n\r\nOnce you have english descriptions, describe an algorithm that can do the work. don&#39;t write it in Java yet.  just write an algorithm, in english, describing how you would do the work manaully, with pen and paper.\r\n\r\nat this point, try and convert the algorithm to Java code.\r\n\r\n\r\n\r\n\r\n\r\n\r\n ","title":"How to do union, intersect, difference and reverse data in java","body":"<p>A lot of the answers tell you to use libraries that will do the work for you.  While this is the right solution for the real world, keep in mind hat you're doing homework, and your teacher probably wants you to understand how the functions are written, not just how to find libraries to do the work for you.</p>\n\n<p>That said, you've got a good start with the code you've shown.  Let's take the problem one step at a time.</p>\n\n<p>First, do you know where the Java documentation is located? <a href=\"http://download.oracle.com/javase/1.4.2/docs/api/\" rel=\"nofollow noreferrer\">http://download.oracle.com/javase/1.4.2/docs/api/</a> this is critical, as this is how you find out what functions do what.  Here's the link to Java 1.4.  I didn't notice what version you're using, but Java is backward compatible, so this should be sufficient.</p>\n\n<p>In the docs, find the ArrayList entry.</p>\n\n<p>Now that we've got the API docs, we need to break down your question.  you've posted code, so I'll address it function by function.</p>\n\n<p>insert() : do you have to have an ordered list, or does order not matter?  Or are you guaranteed that values will be provided to you in order?  Have you learned sorting algorithms yet?</p>\n\n<p>remove() : this function doesn't work.  take a look at the ArrayList API and see how to remove an item from the list.  Use that method.</p>\n\n<p>member() : your member method doesn't work. You need to check every entry of the list and determine if the current member matches the function argument.  Have you learned about for loops?</p>\n\n<p>intersect() : ok, tell me in English what intersect is supposed to do.  Don't use the teacher's description if you can help it - use your own words (note to others, this is an exercise for the OP to learn to program, so please don't go answering it for him)</p>\n\n<p>difference() : again, tell me in English what it's supposed to do.</p>\n\n<p>reverse() : again, give me the English description of what this is supposed to do.</p>\n\n<p>Once you have english descriptions, describe an algorithm that can do the work. don't write it in Java yet.  just write an algorithm, in english, describing how you would do the work manaully, with pen and paper.</p>\n\n<p>at this point, try and convert the algorithm to Java code.</p>\n"},{"tags":[],"owner":{"account_id":138128,"reputation":294236,"user_id":342852,"accept_rate":97,"display_name":"Sean Patrick Floyd"},"comment_count":0,"down_vote_count":0,"up_vote_count":30,"is_accepted":false,"score":30,"last_activity_date":1470319353,"creation_date":1470319353,"answer_id":38769561,"question_id":3590677,"body_markdown":"If you are using Sets (as you should, for all of those except reverse are Set operations), [**Guava**][1] provides these operations in it&#39;s [**`Sets`**][2] class.\r\n\r\n\r\n    Set&lt;Integer&gt; union = Sets.union(set1, set2);\r\n    Set&lt;Integer&gt; intersection = Sets.intersection(set1, set2);\r\n    Set&lt;Integer&gt; difference = Sets.difference(set1, set2);\r\n\r\nAll of these return unmodifiable views, backed by the original Sets.\r\n\r\nSee [**Guava Explained** -&gt; **Collection Utilities** -&gt; **Sets**][3]\r\n\r\nIf Lists are what you have, you can convert them to a Set by using the copy constructor present in all standard collections:\r\n\r\n    List&lt;X&gt; list = new ArrayList&lt;&gt;();\r\n    // fill up list here\r\n    Set&lt;X&gt; set = new HashSet&lt;&gt;(list);\r\n\r\n  [1]: https://github.com/google/guava\r\n  [2]: https://google.github.io/guava/releases/snapshot/api/docs/com/google/common/collect/Sets.html\r\n  [3]: https://github.com/google/guava/wiki/CollectionUtilitiesExplained#sets\r\n","title":"How to do union, intersect, difference and reverse data in java","body":"<p>If you are using Sets (as you should, for all of those except reverse are Set operations), <a href=\"https://github.com/google/guava\" rel=\"noreferrer\"><strong>Guava</strong></a> provides these operations in it's <a href=\"https://google.github.io/guava/releases/snapshot/api/docs/com/google/common/collect/Sets.html\" rel=\"noreferrer\"><strong><code>Sets</code></strong></a> class.</p>\n\n<pre><code>Set&lt;Integer&gt; union = Sets.union(set1, set2);\nSet&lt;Integer&gt; intersection = Sets.intersection(set1, set2);\nSet&lt;Integer&gt; difference = Sets.difference(set1, set2);\n</code></pre>\n\n<p>All of these return unmodifiable views, backed by the original Sets.</p>\n\n<p>See <a href=\"https://github.com/google/guava/wiki/CollectionUtilitiesExplained#sets\" rel=\"noreferrer\"><strong>Guava Explained</strong> -> <strong>Collection Utilities</strong> -> <strong>Sets</strong></a></p>\n\n<p>If Lists are what you have, you can convert them to a Set by using the copy constructor present in all standard collections:</p>\n\n<pre><code>List&lt;X&gt; list = new ArrayList&lt;&gt;();\n// fill up list here\nSet&lt;X&gt; set = new HashSet&lt;&gt;(list);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":5752859,"reputation":767,"user_id":4541907,"accept_rate":88,"display_name":"sbowde4"},"score":0,"creation_date":1487737846,"post_id":42382480,"comment_id":71914196,"body_markdown":"this was asked six years ago","body":"this was asked six years ago"},{"owner":{"account_id":5275920,"reputation":1627,"user_id":4212710,"display_name":"typoerrpr"},"score":2,"creation_date":1526797951,"post_id":42382480,"comment_id":87878815,"body_markdown":"lucky for me this answer was posted, it helped me now","body":"lucky for me this answer was posted, it helped me now"}],"tags":[],"owner":{"account_id":5376903,"reputation":770,"user_id":4283455,"accept_rate":80,"display_name":"An Nguyen"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1487736119,"creation_date":1487736119,"answer_id":42382480,"question_id":3590677,"body_markdown":"This snippet will find the union of two collections using apache commons CollectionUtils.union method\r\n\r\n    Collection&lt;String&gt; totalFriends = CollectionUtils.union(yourFriends, myFriends);","title":"How to do union, intersect, difference and reverse data in java","body":"<p>This snippet will find the union of two collections using apache commons CollectionUtils.union method</p>\n\n<pre><code>Collection&lt;String&gt; totalFriends = CollectionUtils.union(yourFriends, myFriends);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8598286,"reputation":11087,"user_id":6440704,"display_name":"Anton Balaniuc"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1509971698,"creation_date":1509971698,"answer_id":47137182,"question_id":3590677,"body_markdown":"I just will leave it here. There is a new way with `java-8` and `streams`\r\n\r\n    List&lt;Integer&gt; listA = Arrays.asList(0, 2, 4, 5, 6, 8, 10);\r\n    List&lt;Integer&gt; listB = Arrays.asList(5, 6, 7, 8, 9, 10);\r\n    \r\n    List&lt;Integer&gt; intersection = listA.stream()\r\n            .filter(listB::contains)\r\n            .collect(Collectors.toList());\r\n    \r\n    List&lt;Integer&gt; union = Stream.concat(listA.stream(), listB.stream())\r\n            .distinct().sorted()\r\n            .collect(Collectors.toList());\r\n    \r\n    List&lt;Integer&gt; aDiffB = listA.stream()\r\n            .filter(i -&gt; !listB.contains(i))\r\n            .collect(Collectors.toList());\r\n    \r\n    System.out.println(intersection); // [5, 6, 8, 10]\r\n    System.out.println(union); // [0, 2, 4, 5, 6, 7, 8, 9, 10]\r\n    System.out.println(aDiffB); // [0, 2, 4]","title":"How to do union, intersect, difference and reverse data in java","body":"<p>I just will leave it here. There is a new way with <code>java-8</code> and <code>streams</code></p>\n\n<pre><code>List&lt;Integer&gt; listA = Arrays.asList(0, 2, 4, 5, 6, 8, 10);\nList&lt;Integer&gt; listB = Arrays.asList(5, 6, 7, 8, 9, 10);\n\nList&lt;Integer&gt; intersection = listA.stream()\n        .filter(listB::contains)\n        .collect(Collectors.toList());\n\nList&lt;Integer&gt; union = Stream.concat(listA.stream(), listB.stream())\n        .distinct().sorted()\n        .collect(Collectors.toList());\n\nList&lt;Integer&gt; aDiffB = listA.stream()\n        .filter(i -&gt; !listB.contains(i))\n        .collect(Collectors.toList());\n\nSystem.out.println(intersection); // [5, 6, 8, 10]\nSystem.out.println(union); // [0, 2, 4, 5, 6, 7, 8, 9, 10]\nSystem.out.println(aDiffB); // [0, 2, 4]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1712726,"reputation":6528,"user_id":1570415,"display_name":"Donald Raab"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1606519445,"creation_date":1606518888,"answer_id":65044839,"question_id":3590677,"body_markdown":"The methods `addAll`, `retainAll` and `removeAll` are the methods most commonly used to implement `union`, `intersect` and `difference` in Java. With Streams in Java 8+, you do have some more options for `intersect` and `difference` using `filter` as pointed out in a previous answer.  \r\n\r\nIf you&#39;re open to using a third-party library, the following code will work with primitive collections using [Eclipse Collections][1] when version 11.0 of the library is released.\r\n\r\n    @Test\r\n    public void unionIntersectDifferenceReverse()\r\n    {\r\n        IntList list1 = IntLists.immutable.with(0, 2, 4, 5, 6, 8, 10);\r\n        IntList list2 = IntLists.immutable.with(5, 6, 7, 8, 9, 10);\r\n    \r\n        MutableIntSet set1 = list1.toSet();\r\n        MutableIntSet set2 = list2.toSet();\r\n    \r\n        IntSet union = set1.union(set2);\r\n        IntSet intersection = set1.intersect(set2);\r\n        IntSet difference = set1.difference(set2);\r\n    \r\n        IntList reversed = list1.toReversed();\r\n    \r\n        Assert.assertEquals(IntSets.mutable.with(0, 2, 4, 5, 6, 7, 8, 9, 10), union);\r\n        Assert.assertEquals(IntSets.mutable.with(5, 6, 8, 10), intersection);\r\n        Assert.assertEquals(IntSets.mutable.with(0, 2, 4), difference);\r\n        Assert.assertEquals(IntLists.mutable.with(10, 8, 6, 5, 4, 2, 0), reversed);\r\n    }\r\n\r\nThis functionality was [recently contributed to primitive Sets in Eclipse Collections][2]. The linked blog describes how these methods are implemented on primitive sets.\r\n\r\nThe following code uses object collections with boxed Integers. This code will work with Eclipse Collections releases available today.\r\n\r\n    @Test\r\n    public void unionIntersectDifferenceReverseWithBoxedIntegers()\r\n    {\r\n        ImmutableList&lt;Integer&gt; list1 = Lists.immutable.with(0, 2, 4, 5, 6, 8, 10);\r\n        ImmutableList&lt;Integer&gt; list2 = Lists.immutable.with(5, 6, 7, 8, 9, 10);\r\n    \r\n        MutableSet&lt;Integer&gt; set1 = list1.toSet();\r\n        MutableSet&lt;Integer&gt; set2 = list2.toSet();\r\n    \r\n        MutableSet&lt;Integer&gt; union = set1.union(set2);\r\n        MutableSet&lt;Integer&gt; intersection = set1.intersect(set2);\r\n        MutableSet&lt;Integer&gt; difference = set1.difference(set2);\r\n    \r\n        ImmutableList reversed = list1.toReversed();\r\n    \r\n        Assert.assertEquals(Sets.mutable.with(0, 2, 4, 5, 6, 7, 8, 9, 10), union);\r\n        Assert.assertEquals(Sets.mutable.with(5, 6, 8, 10), intersection);\r\n        Assert.assertEquals(Sets.mutable.with(0, 2, 4), difference);\r\n        Assert.assertEquals(Lists.mutable.with(10, 8, 6, 5, 4, 2, 0), reversed);\r\n    }\r\n\r\nNote: I am a committer for Eclipse Collections.\r\n\r\n\r\n  [1]: https://github.com/eclipse/eclipse-collections\r\n  [2]: https://pratha-sirisha.medium.com/primitive-set-operations-in-eclipse-collections-b126c9121d15","title":"How to do union, intersect, difference and reverse data in java","body":"<p>The methods <code>addAll</code>, <code>retainAll</code> and <code>removeAll</code> are the methods most commonly used to implement <code>union</code>, <code>intersect</code> and <code>difference</code> in Java. With Streams in Java 8+, you do have some more options for <code>intersect</code> and <code>difference</code> using <code>filter</code> as pointed out in a previous answer.</p>\n<p>If you're open to using a third-party library, the following code will work with primitive collections using <a href=\"https://github.com/eclipse/eclipse-collections\" rel=\"nofollow noreferrer\">Eclipse Collections</a> when version 11.0 of the library is released.</p>\n<pre><code>@Test\npublic void unionIntersectDifferenceReverse()\n{\n    IntList list1 = IntLists.immutable.with(0, 2, 4, 5, 6, 8, 10);\n    IntList list2 = IntLists.immutable.with(5, 6, 7, 8, 9, 10);\n\n    MutableIntSet set1 = list1.toSet();\n    MutableIntSet set2 = list2.toSet();\n\n    IntSet union = set1.union(set2);\n    IntSet intersection = set1.intersect(set2);\n    IntSet difference = set1.difference(set2);\n\n    IntList reversed = list1.toReversed();\n\n    Assert.assertEquals(IntSets.mutable.with(0, 2, 4, 5, 6, 7, 8, 9, 10), union);\n    Assert.assertEquals(IntSets.mutable.with(5, 6, 8, 10), intersection);\n    Assert.assertEquals(IntSets.mutable.with(0, 2, 4), difference);\n    Assert.assertEquals(IntLists.mutable.with(10, 8, 6, 5, 4, 2, 0), reversed);\n}\n</code></pre>\n<p>This functionality was <a href=\"https://pratha-sirisha.medium.com/primitive-set-operations-in-eclipse-collections-b126c9121d15\" rel=\"nofollow noreferrer\">recently contributed to primitive Sets in Eclipse Collections</a>. The linked blog describes how these methods are implemented on primitive sets.</p>\n<p>The following code uses object collections with boxed Integers. This code will work with Eclipse Collections releases available today.</p>\n<pre><code>@Test\npublic void unionIntersectDifferenceReverseWithBoxedIntegers()\n{\n    ImmutableList&lt;Integer&gt; list1 = Lists.immutable.with(0, 2, 4, 5, 6, 8, 10);\n    ImmutableList&lt;Integer&gt; list2 = Lists.immutable.with(5, 6, 7, 8, 9, 10);\n\n    MutableSet&lt;Integer&gt; set1 = list1.toSet();\n    MutableSet&lt;Integer&gt; set2 = list2.toSet();\n\n    MutableSet&lt;Integer&gt; union = set1.union(set2);\n    MutableSet&lt;Integer&gt; intersection = set1.intersect(set2);\n    MutableSet&lt;Integer&gt; difference = set1.difference(set2);\n\n    ImmutableList reversed = list1.toReversed();\n\n    Assert.assertEquals(Sets.mutable.with(0, 2, 4, 5, 6, 7, 8, 9, 10), union);\n    Assert.assertEquals(Sets.mutable.with(5, 6, 8, 10), intersection);\n    Assert.assertEquals(Sets.mutable.with(0, 2, 4), difference);\n    Assert.assertEquals(Lists.mutable.with(10, 8, 6, 5, 4, 2, 0), reversed);\n}\n</code></pre>\n<p>Note: I am a committer for Eclipse Collections.</p>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695237761,"creation_date":1695237761,"answer_id":77145399,"question_id":3590677,"body_markdown":"For reversed, Java 21 added the [`reversed`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html#reversed()) method, which returns a reversed view of the list.\r\n\r\n```\r\nList&lt;Integer&gt; reversed = mySet.reversed();\r\n```\r\n\r\nNote that this is a view of the underlying list, such that changes to the view will change the original list, and vice versa.  If a separate copy of the data with no relation to the original is needed, copy the reversed view into the list.\r\n\r\n```lang-java\r\nList&lt;Integer&gt; reversed = new ArrayList&lt;&gt;(mySet.reversed());\r\n```","title":"How to do union, intersect, difference and reverse data in java","body":"<p>For reversed, Java 21 added the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html#reversed()\" rel=\"nofollow noreferrer\"><code>reversed</code></a> method, which returns a reversed view of the list.</p>\n<pre><code>List&lt;Integer&gt; reversed = mySet.reversed();\n</code></pre>\n<p>Note that this is a view of the underlying list, such that changes to the view will change the original list, and vice versa.  If a separate copy of the data with no relation to the original is needed, copy the reversed view into the list.</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;Integer&gt; reversed = new ArrayList&lt;&gt;(mySet.reversed());\n</code></pre>\n"}],"owner":{"account_id":107626,"reputation":3090,"user_id":286090,"accept_rate":51,"display_name":"Giffary"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":100440,"favorite_count":0,"down_vote_count":2,"up_vote_count":56,"accepted_answer_id":3590725,"answer_count":8,"score":54,"last_activity_date":1695237761,"creation_date":1282997121,"question_id":3590677,"body_markdown":"I want to implement the union, intersect, difference and reverse operations in Java.\r\n\r\nFirst I have 2 instances of `ArrayList&lt;Integer&gt;`\r\n\r\n```lang-none\r\na = [0,2,4,5,6,8,10]\r\nb = [5,6,7,8,9,10]\r\n```\r\n\r\na union b should return `c = [0,2,4,5,6,7,8,9,10]`\r\n\r\na intersect b should return `c = [5,8,10]`\r\n\r\na difference b should return `c = [0,2,4]`\r\n\r\nreverse `a = [10,8,6,5,4,2,0]`\r\n\r\nSomething like this.\r\n\r\nHow to implement that method in Java?\r\n\r\n---\r\n\r\nNote that I have to start with the following template:\r\n\r\n```lang-java\r\npackage IntSet;\r\nimport java.util.ArrayList;\r\nimport java.util.Collection;\r\n\r\n\r\npublic class IntSet {\r\n\t\r\n\tprivate ArrayList&lt;Integer&gt; intset;\r\n\t\r\n\tpublic IntSet(){\r\n\t\tintset = new ArrayList&lt;Integer&gt;();\r\n\t}\r\n\t\r\n\tpublic void insert(int x){\r\n\t\tintset.add(x);\r\n\t}\r\n\t\r\n\tpublic void remove(int x){\r\n\t\t//implement here\r\n\t\tintset.indexOf(x);\r\n\t}\r\n\t\r\n\tpublic boolean member(int x){\r\n\t\t//implement here\r\n\t\treturn true;\r\n\t}\r\n\t\r\n\tpublic IntSet intersect(IntSet a){\r\n\t\t//implement here\r\n\t\treturn a;\r\n\t}\r\n\t\r\n\tpublic IntSet union(IntSet a){\r\n\t\t//implement here\r\n\t\treturn a;\r\n\t}\r\n\t\r\n\tpublic IntSet difference(IntSet a){\r\n\t\t//implement here\r\n\t\tIntSet b = new IntSet();\r\n\t\treturn b; \r\n\t}\r\n}\r\n```","title":"How to do union, intersect, difference and reverse data in java","body":"<p>I want to implement the union, intersect, difference and reverse operations in Java.</p>\n<p>First I have 2 instances of <code>ArrayList&lt;Integer&gt;</code></p>\n<pre class=\"lang-none prettyprint-override\"><code>a = [0,2,4,5,6,8,10]\nb = [5,6,7,8,9,10]\n</code></pre>\n<p>a union b should return <code>c = [0,2,4,5,6,7,8,9,10]</code></p>\n<p>a intersect b should return <code>c = [5,8,10]</code></p>\n<p>a difference b should return <code>c = [0,2,4]</code></p>\n<p>reverse <code>a = [10,8,6,5,4,2,0]</code></p>\n<p>Something like this.</p>\n<p>How to implement that method in Java?</p>\n<hr />\n<p>Note that I have to start with the following template:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package IntSet;\nimport java.util.ArrayList;\nimport java.util.Collection;\n\n\npublic class IntSet {\n    \n    private ArrayList&lt;Integer&gt; intset;\n    \n    public IntSet(){\n        intset = new ArrayList&lt;Integer&gt;();\n    }\n    \n    public void insert(int x){\n        intset.add(x);\n    }\n    \n    public void remove(int x){\n        //implement here\n        intset.indexOf(x);\n    }\n    \n    public boolean member(int x){\n        //implement here\n        return true;\n    }\n    \n    public IntSet intersect(IntSet a){\n        //implement here\n        return a;\n    }\n    \n    public IntSet union(IntSet a){\n        //implement here\n        return a;\n    }\n    \n    public IntSet difference(IntSet a){\n        //implement here\n        IntSet b = new IntSet();\n        return b; \n    }\n}\n</code></pre>\n"},{"tags":["java","spring-boot","swagger","swagger-ui","springdoc"],"comments":[{"owner":{"account_id":4240367,"reputation":422,"user_id":3470438,"accept_rate":75,"display_name":"wimdetr"},"score":0,"creation_date":1675166964,"post_id":75296631,"comment_id":132866086,"body_markdown":"The code sample you posted is just an interface to configure OpenAPI. The documentation talks about providing server(s) but does not seem to provide the option you are looking after: https://swagger.io/docs/specification/api-host-and-base-path/","body":"The code sample you posted is just an interface to configure OpenAPI. The documentation talks about providing server(s) but does not seem to provide the option you are looking after: <a href=\"https://swagger.io/docs/specification/api-host-and-base-path/\" rel=\"nofollow noreferrer\">swagger.io/docs/specification/api-host-and-base-path</a>"}],"answers":[{"tags":[],"owner":{"account_id":6381445,"reputation":2031,"user_id":4950746,"accept_rate":0,"display_name":"shahidfoy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695237562,"creation_date":1695237562,"answer_id":77145385,"question_id":75296631,"body_markdown":"You could try replacing the `localUrl` variable and instead use the one generated by swagger open api.\r\n\r\n    @Bean\r\n    public OpenApiCustomiser openApiCustomiser() {\r\n        Server generatedServer = openApi.getServers().get(0);\r\n        return openApi -&gt; openApi\r\n            .servers(List.of(\r\n                    new Server()\r\n                            .url(generatedServer.getUrl())\r\n                            .description(&quot;Generated URL&quot;),\r\n                    new Server()\r\n                            .url(dsoUrl)\r\n                            .description(&quot;DSO&quot;),\r\n                    new Server()\r\n                            .url(iftUrl)\r\n                            .description(&quot;IFT&quot;),\r\n                    new Server()\r\n                            .url(prodUrl)\r\n                            .description(&quot;PROD&quot;)));\r\n    }\r\n\r\n\r\nAnother thing you can do is have your server list come from your properties file instead. ","title":"How to pre-select a server in a list of server in Swagger-ui?","body":"<p>You could try replacing the <code>localUrl</code> variable and instead use the one generated by swagger open api.</p>\n<pre><code>@Bean\npublic OpenApiCustomiser openApiCustomiser() {\n    Server generatedServer = openApi.getServers().get(0);\n    return openApi -&gt; openApi\n        .servers(List.of(\n                new Server()\n                        .url(generatedServer.getUrl())\n                        .description(&quot;Generated URL&quot;),\n                new Server()\n                        .url(dsoUrl)\n                        .description(&quot;DSO&quot;),\n                new Server()\n                        .url(iftUrl)\n                        .description(&quot;IFT&quot;),\n                new Server()\n                        .url(prodUrl)\n                        .description(&quot;PROD&quot;)));\n}\n</code></pre>\n<p>Another thing you can do is have your server list come from your properties file instead.</p>\n"}],"owner":{"account_id":4792887,"reputation":1023,"user_id":4003272,"accept_rate":88,"display_name":"Mikhail Geyer"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":871,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1695237562,"creation_date":1675165454,"question_id":75296631,"body_markdown":"How to pre-select a chosen server in a list of servers when visiting the swagger-ui page?\r\n\r\nI use Spring boot, and Springdoc to generate the swagger-ui. I have the following bean to add server list to swagger-ui:\r\n\r\n    @Bean\r\n    public OpenApiCustomiser openApiCustomiser() {\r\n        return openApi -&gt; openApi\r\n                .servers(List.of(\r\n                        new Server()\r\n                                .url(localUrl)\r\n                                .description(&quot;localhost&quot;),\r\n                        new Server()\r\n                                .url(dsoUrl)\r\n                                .description(&quot;DSO&quot;),\r\n                        new Server()\r\n                                .url(iftUrl)\r\n                                .description(&quot;IFT&quot;),\r\n                        new Server()\r\n                                .url(prodUrl)\r\n                                .description(&quot;PROD&quot;)));\r\n    }\r\n\r\nOn all environment hosts it will start by default from `localhost` option:\r\n\r\n[![Swagger-ui section for list of servers][1]][1]\r\n\r\nI want that on every environment host the swagger-ui shows the right url preselected. Is it possible? (The solution with list ordering differently on different environment hosts is not interesting for me, I want the list to keep one order on all envs). \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/aBUvd.png","title":"How to pre-select a server in a list of server in Swagger-ui?","body":"<p>How to pre-select a chosen server in a list of servers when visiting the swagger-ui page?</p>\n<p>I use Spring boot, and Springdoc to generate the swagger-ui. I have the following bean to add server list to swagger-ui:</p>\n<pre><code>@Bean\npublic OpenApiCustomiser openApiCustomiser() {\n    return openApi -&gt; openApi\n            .servers(List.of(\n                    new Server()\n                            .url(localUrl)\n                            .description(&quot;localhost&quot;),\n                    new Server()\n                            .url(dsoUrl)\n                            .description(&quot;DSO&quot;),\n                    new Server()\n                            .url(iftUrl)\n                            .description(&quot;IFT&quot;),\n                    new Server()\n                            .url(prodUrl)\n                            .description(&quot;PROD&quot;)));\n}\n</code></pre>\n<p>On all environment hosts it will start by default from <code>localhost</code> option:</p>\n<p><a href=\"https://i.stack.imgur.com/aBUvd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/aBUvd.png\" alt=\"Swagger-ui section for list of servers\" /></a></p>\n<p>I want that on every environment host the swagger-ui shows the right url preselected. Is it possible? (The solution with list ordering differently on different environment hosts is not interesting for me, I want the list to keep one order on all envs).</p>\n"},{"tags":["java","spring","docker","tomcat","dockerfile"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1695274278,"post_id":77145308,"comment_id":136002970,"body_markdown":"Why? Just ditch the tomcat deployment and run the embedded server that comes with Spring Boot. This is a lot easier for your docker container. Anyway apparently your cloudsuite configuration is wrong (or the files that it needs aren&#39;t in your container). This doesn&#39;t really have anything to do with your spring boot application.","body":"Why? Just ditch the tomcat deployment and run the embedded server that comes with Spring Boot. This is a lot easier for your docker container. Anyway apparently your cloudsuite configuration is wrong (or the files that it needs aren&#39;t in your container). This doesn&#39;t really have anything to do with your spring boot application."},{"owner":{"account_id":29471196,"reputation":1,"user_id":22583788,"display_name":"StefanoSKAL"},"score":0,"creation_date":1698754660,"post_id":77145308,"comment_id":136442969,"body_markdown":"how can I put the file in /home/vcap/cloudsuite/config, that is the path that docker wants?","body":"how can I put the file in /home/vcap/cloudsuite/config, that is the path that docker wants?"}],"owner":{"account_id":29471196,"reputation":1,"user_id":22583788,"display_name":"StefanoSKAL"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":13,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695237167,"creation_date":1695236598,"question_id":77145308,"body_markdown":"I have a Spring application as a war file deployed in Tomcat. All is done with a docker file. While running the app, I get an exception for this missing file `Script resource ste/SteCommon.groovy: not found at scripts/ste/SteCommon.groovy` and Script `resource ste/SteCommon.groovy: not found at /home/vcap/cloudsuite/config/scripts/ste/SteCommon.groovy`. \r\n\r\nI see in docker file there is an env variable with the path `/home/vcap/cloudsuite/config`, how can I put a file in it?\r\n\r\nBelow the dockerfile:\r\n\r\n    # Use the official Tomcat image as the base image\r\n    FROM tomcat:9-jdk17\r\n\r\n    # Set environment variables\r\n    ENV JBP_CONFIG_OPEN_JDK_JRE=&#39;{jre: {version: 1.17+}}&#39; \\\r\n    JBP_CONFIG_TOMCAT=&#39;{ tomcat: { version: 9.0.+ }, context_path: /cloudsuite-car/maker }&#39; \\\r\n    CLOUDSUITE_BASE_DIR=&#39;/home/vcap/cloudsuite/config&#39; \\\r\n    CLOUDSUITE_PROFILE_DIR=&#39;/home/vcap/cloudsuite/config&#39; \\\r\n    CLOUDSUITE_DATA_DIR=&#39;/home/vcap/cloudsuite/data&#39; \\\r\n    CLOUDSUITE_LOG_DIR=&#39;/home/vcap/cloudsuite/log&#39; \\\r\n    CLOUDSUITE_DATA_SHARED=&#39;/home/vcap/cloudsuite/data&#39; \\\r\n    JDBC_DRIVERCLASSNAME=&#39;org.postgresql.Driver&#39; \\\r\n    JDBC_URL=&#39;jdbc:postgresql://car-postgres:5432/car&#39; \\\r\n    JDBC_USERNAME=&#39;postgres&#39; \\\r\n    JDBC_PASSWORD=&#39;postgres&#39; \\\r\n    CLOUDSUITE_LOG_LEVEL=&#39;TRACE&#39; \\\r\n    AUTHENTICATION_ACTIVE=&#39;false&#39; \\\r\n    digsig.validation.validationContext.qualificationSeverity=&#39;info&#39;\r\n\r\n    # Set Java options\r\n    ENV JAVA_OPTS=&#39;-Duser.timezone=UTC -Djava.rmi.server.hostname=127.0.0.1 -    Dcom.sun.management.jmxremote.authenticate=false -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.port=5000 -Dcom.sun.management.jmxremote.rmi.port=5000&#39;\r\n\r\n    # Remove the default Tomcat webapps (optional)\r\n    RUN rm -rf /usr/local/tomcat/webapps/*\r\n\r\n    # Copy your WAR file to the webapps folder of the Tomcat container\r\n    COPY cloudsuite-car#maker.war /usr/local/tomcat/webapps/ROOT.war\r\n\r\n    # Expose the default Tomcat port (optional, as the base image already does this)\r\n    EXPOSE 8080\r\n\r\n\r\nI am not sure I can provide it.","title":"Provide dependency file to a Spring app deployed with Docker","body":"<p>I have a Spring application as a war file deployed in Tomcat. All is done with a docker file. While running the app, I get an exception for this missing file <code>Script resource ste/SteCommon.groovy: not found at scripts/ste/SteCommon.groovy</code> and Script <code>resource ste/SteCommon.groovy: not found at /home/vcap/cloudsuite/config/scripts/ste/SteCommon.groovy</code>.</p>\n<p>I see in docker file there is an env variable with the path <code>/home/vcap/cloudsuite/config</code>, how can I put a file in it?</p>\n<p>Below the dockerfile:</p>\n<pre><code># Use the official Tomcat image as the base image\nFROM tomcat:9-jdk17\n\n# Set environment variables\nENV JBP_CONFIG_OPEN_JDK_JRE='{jre: {version: 1.17+}}' \\\nJBP_CONFIG_TOMCAT='{ tomcat: { version: 9.0.+ }, context_path: /cloudsuite-car/maker }' \\\nCLOUDSUITE_BASE_DIR='/home/vcap/cloudsuite/config' \\\nCLOUDSUITE_PROFILE_DIR='/home/vcap/cloudsuite/config' \\\nCLOUDSUITE_DATA_DIR='/home/vcap/cloudsuite/data' \\\nCLOUDSUITE_LOG_DIR='/home/vcap/cloudsuite/log' \\\nCLOUDSUITE_DATA_SHARED='/home/vcap/cloudsuite/data' \\\nJDBC_DRIVERCLASSNAME='org.postgresql.Driver' \\\nJDBC_URL='jdbc:postgresql://car-postgres:5432/car' \\\nJDBC_USERNAME='postgres' \\\nJDBC_PASSWORD='postgres' \\\nCLOUDSUITE_LOG_LEVEL='TRACE' \\\nAUTHENTICATION_ACTIVE='false' \\\ndigsig.validation.validationContext.qualificationSeverity='info'\n\n# Set Java options\nENV JAVA_OPTS='-Duser.timezone=UTC -Djava.rmi.server.hostname=127.0.0.1 -    Dcom.sun.management.jmxremote.authenticate=false -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.port=5000 -Dcom.sun.management.jmxremote.rmi.port=5000'\n\n# Remove the default Tomcat webapps (optional)\nRUN rm -rf /usr/local/tomcat/webapps/*\n\n# Copy your WAR file to the webapps folder of the Tomcat container\nCOPY cloudsuite-car#maker.war /usr/local/tomcat/webapps/ROOT.war\n\n# Expose the default Tomcat port (optional, as the base image already does this)\nEXPOSE 8080\n</code></pre>\n<p>I am not sure I can provide it.</p>\n"},{"tags":["java","jython"],"owner":{"account_id":5880864,"reputation":111,"user_id":4630284,"display_name":"magicmq"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1695236638,"creation_date":1695236638,"question_id":77145313,"body_markdown":"Suppose I have a list of Python scripts, &#39;script1.py&#39;, &#39;script2.py&#39;, &#39;script3.py&#39;, etc. Using Jython (which is embedded into my Java application), my goal is to run each script when the Java program is started. Additionally, each script should run within its own environment (I.E. have its own global scope). Scripts may or may not implement multithreading, event logic, etc., so I cannot guarantee that a script terminates prior to running another script.\r\n\r\nMy understanding is that I should use Jython&#39;s [PythonInterpreter](https://www.javadoc.io/static/org.python/jython-standalone/2.7.3/org/python/util/PythonInterpreter.html), but all examples I can find on the usage of PythonInterpreter do not cover my specific use case. My understanding is that all code that is run through a single PythonInterpreter shares the same global scope. \r\n\r\nMy current methodology is to create a new PythonInterpreter for each script, to ensure each script is isolated. Additionally, I defer handling of the [PySystemState](https://www.javadoc.io/static/org.python/jython-standalone/2.7.3/org/python/core/PySystemState.html) (Jython&#39;s implementation of the `sys` module) to Jython, and it seems that Jython creates a &quot;default&quot; PySystemState that is being used for all of the PythonInterpreters I create. Is this sufficient, or should I also be initializing a new PySystemState for each PythonIntepreter?\r\n\r\nI am also unsure of the proper usage of the `PythonInterpreter#close()` method in my specific case, since this method appears to close the associated PySystemState as well. If Jython assigns a single PySystemState to each separate PythonInterpreter in my program, this could be problematic if I close the PythonInterpreter for one script (if it finished execution) while other scripts are still running.\r\n\r\nMy approach works as expected, so long as I do not close the PythonInterpreter once a script finishes execution; however, I am unsure if my approach is the correct/most efficient way.","title":"Proper usage of Jython&#39;s PythonInterpreter for multiple scripts","body":"<p>Suppose I have a list of Python scripts, 'script1.py', 'script2.py', 'script3.py', etc. Using Jython (which is embedded into my Java application), my goal is to run each script when the Java program is started. Additionally, each script should run within its own environment (I.E. have its own global scope). Scripts may or may not implement multithreading, event logic, etc., so I cannot guarantee that a script terminates prior to running another script.</p>\n<p>My understanding is that I should use Jython's <a href=\"https://www.javadoc.io/static/org.python/jython-standalone/2.7.3/org/python/util/PythonInterpreter.html\" rel=\"nofollow noreferrer\">PythonInterpreter</a>, but all examples I can find on the usage of PythonInterpreter do not cover my specific use case. My understanding is that all code that is run through a single PythonInterpreter shares the same global scope.</p>\n<p>My current methodology is to create a new PythonInterpreter for each script, to ensure each script is isolated. Additionally, I defer handling of the <a href=\"https://www.javadoc.io/static/org.python/jython-standalone/2.7.3/org/python/core/PySystemState.html\" rel=\"nofollow noreferrer\">PySystemState</a> (Jython's implementation of the <code>sys</code> module) to Jython, and it seems that Jython creates a &quot;default&quot; PySystemState that is being used for all of the PythonInterpreters I create. Is this sufficient, or should I also be initializing a new PySystemState for each PythonIntepreter?</p>\n<p>I am also unsure of the proper usage of the <code>PythonInterpreter#close()</code> method in my specific case, since this method appears to close the associated PySystemState as well. If Jython assigns a single PySystemState to each separate PythonInterpreter in my program, this could be problematic if I close the PythonInterpreter for one script (if it finished execution) while other scripts are still running.</p>\n<p>My approach works as expected, so long as I do not close the PythonInterpreter once a script finishes execution; however, I am unsure if my approach is the correct/most efficient way.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":483049,"reputation":6296,"user_id":897868,"accept_rate":90,"display_name":"onit"},"score":6,"creation_date":1320938516,"post_id":8081827,"comment_id":9904863,"body_markdown":"This is because doubles and floats cannot express every numerical value. They are really using approximations to represent the value.","body":"This is because doubles and floats cannot express every numerical value. They are really using approximations to represent the value."},{"owner":{"account_id":3658600,"reputation":417,"user_id":3048996,"display_name":"judovana"},"score":1,"creation_date":1596724877,"post_id":8081827,"comment_id":111908501,"body_markdown":"The title of question is very misleading. The Author of question is actually asking, how to do precise math operations on double typ. Answer is you cant. If you have to, use BigDecimalr or similar. Those have .... at least theoretically, unlimited precision.","body":"The title of question is very misleading. The Author of question is actually asking, how to do precise math operations on double typ. Answer is you cant. If you have to, use BigDecimalr or similar. Those have .... at least theoretically, unlimited precision."},{"owner":{"account_id":3457181,"reputation":762,"user_id":2895411,"display_name":"nikolai.serdiuk"},"score":2,"creation_date":1613580742,"post_id":8081827,"comment_id":117120562,"body_markdown":"Here is good article: https://www.baeldung.com/java-comparing-doubles","body":"Here is good article: <a href=\"https://www.baeldung.com/java-comparing-doubles\" rel=\"nofollow noreferrer\">baeldung.com/java-comparing-doubles</a>"}],"answers":[{"comments":[{"owner":{"account_id":892161,"reputation":11512,"user_id":930207,"display_name":"mcfinnigan"},"score":23,"creation_date":1320940670,"post_id":8081897,"comment_id":9905718,"body_markdown":"BigDecimal is sometimes not a viable solution.","body":"BigDecimal is sometimes not a viable solution."},{"owner":{"account_id":5275920,"reputation":1627,"user_id":4212710,"display_name":"typoerrpr"},"score":5,"creation_date":1525405668,"post_id":8081897,"comment_id":87351392,"body_markdown":"But the poster was specifically asking about comparing doubles","body":"But the poster was specifically asking about comparing doubles"},{"owner":{"account_id":15903012,"reputation":191,"user_id":11521880,"display_name":"bridgemnc"},"score":1,"creation_date":1675151504,"post_id":8081897,"comment_id":132861394,"body_markdown":"@mcfinnigan Could you please give an example when BigDecimal is not a viable solution? Because I am wondering what&#39;s the point of using double in production systems if it cannot perform such an easy operation as mentioned by original poster...","body":"@mcfinnigan Could you please give an example when BigDecimal is not a viable solution? Because I am wondering what&#39;s the point of using double in production systems if it cannot perform such an easy operation as mentioned by original poster..."},{"owner":{"account_id":4690640,"reputation":86,"user_id":3796844,"display_name":"tiz"},"score":0,"creation_date":1688264071,"post_id":8081897,"comment_id":135050116,"body_markdown":"@bridgemns Well, performance, memory footprint, multiplatform comes into mind. However fast BigDecimal is, it is still much slower than double which has it&#39;s own hardware implementation in the CPU. It uses more memory. And if you program multiplatform (in Kotlin for example), BigDecimal is not represented on all platforms (Javascript, Native). I agree that for money related calculations you should use BigDecimal. Other cases, it&#39;s not so simple.","body":"@bridgemns Well, performance, memory footprint, multiplatform comes into mind. However fast BigDecimal is, it is still much slower than double which has it&#39;s own hardware implementation in the CPU. It uses more memory. And if you program multiplatform (in Kotlin for example), BigDecimal is not represented on all platforms (Javascript, Native). I agree that for money related calculations you should use BigDecimal. Other cases, it&#39;s not so simple."}],"tags":[],"owner":{"account_id":120998,"reputation":642,"user_id":313766,"display_name":"Zaki Saadeh"},"comment_count":4,"down_vote_count":2,"up_vote_count":16,"is_accepted":false,"score":14,"last_activity_date":1320938695,"creation_date":1320938695,"answer_id":8081897,"question_id":8081827,"body_markdown":"Instead of using doubles for decimal arithemetic, please use  java.math.BigDecimal. It would produce the expected results.\r\n\r\nFor reference take a look at this [stackoverflow question][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/179427/how-to-resolve-a-java-rounding-double-issue","title":"How to compare two double values in Java?","body":"<p>Instead of using doubles for decimal arithemetic, please use  java.math.BigDecimal. It would produce the expected results.</p>\n\n<p>For reference take a look at this <a href=\"https://stackoverflow.com/questions/179427/how-to-resolve-a-java-rounding-double-issue\">stackoverflow question</a></p>\n"},{"comments":[{"owner":{"account_id":3935059,"reputation":135,"user_id":3251723,"display_name":"Tina T"},"score":15,"creation_date":1404104069,"post_id":8081911,"comment_id":37897129,"body_markdown":"You might want to take a look at the Double&#39;s compare method. Check this link : http://www.tutorialspoint.com/java/lang/double_compare.htm","body":"You might want to take a look at the Double&#39;s compare method. Check this link : <a href=\"http://www.tutorialspoint.com/java/lang/double_compare.htm\" rel=\"nofollow noreferrer\">tutorialspoint.com/java/lang/double_compare.htm</a>"},{"owner":{"account_id":535282,"reputation":551,"user_id":1710669,"accept_rate":67,"display_name":"shiggity"},"score":17,"creation_date":1410992549,"post_id":8081911,"comment_id":40539880,"body_markdown":"But if you use Double.compare, note that \n\n(1) If d1 and d2 both represent Double.NaN, then the method returns true, even though Double.NaN==Double.NaN has the value false; and\n\n\n(2) If d1 represents +0.0 while d2 represents -0.0, or vice versa, the method returns the value false, even though +0.0==-0.0 has the value true.\n\nThis definition allows hash tables to operate properly.","body":"But if you use Double.compare, note that   (1) If d1 and d2 both represent Double.NaN, then the method returns true, even though Double.NaN==Double.NaN has the value false; and   (2) If d1 represents +0.0 while d2 represents -0.0, or vice versa, the method returns the value false, even though +0.0==-0.0 has the value true.  This definition allows hash tables to operate properly."},{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":1,"creation_date":1569845248,"post_id":8081911,"comment_id":102716478,"body_markdown":"this could also use `Math.ulp()` instead of a fixed error like `0.000001` (despite ot that obvious)","body":"this could also use <code>Math.ulp()</code> instead of a fixed error like <code>0.000001</code> (despite ot that obvious)"},{"owner":{"account_id":2513351,"reputation":163,"user_id":2203113,"accept_rate":82,"display_name":"Ivan"},"score":0,"creation_date":1670243949,"post_id":8081911,"comment_id":131823812,"body_markdown":"Wait guys, okay, we can compare to doubles on the condition of equality considering desired accuracy, but how to compare which double variable is __bigger__? I don&#39;t totally get it.","body":"Wait guys, okay, we can compare to doubles on the condition of equality considering desired accuracy, but how to compare which double variable is <b>bigger</b>? I don&#39;t totally get it."}],"tags":[],"owner":{"account_id":297024,"reputation":25001,"user_id":602323,"accept_rate":80,"display_name":"Kevin"},"comment_count":4,"down_vote_count":0,"up_vote_count":109,"is_accepted":true,"score":109,"last_activity_date":1360853392,"creation_date":1320938760,"answer_id":8081911,"question_id":8081827,"body_markdown":"Basically you shouldn&#39;t do exact comparisons, you should do something like this:\r\n\r\n    double a = 1.000001;\r\n    double b = 0.000001;\r\n    double c = a-b;\r\n    if (Math.abs(c-1.0) &lt;= 0.000001) {...}","title":"How to compare two double values in Java?","body":"<p>Basically you shouldn't do exact comparisons, you should do something like this:</p>\n\n<pre><code>double a = 1.000001;\ndouble b = 0.000001;\ndouble c = a-b;\nif (Math.abs(c-1.0) &lt;= 0.000001) {...}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":5275920,"reputation":1627,"user_id":4212710,"display_name":"typoerrpr"},"score":16,"creation_date":1525405636,"post_id":48426347,"comment_id":87351382,"body_markdown":"I don&#39;t believe Double.compare in itself solves the problem that the poster was asking. You&#39;d still need the abs and threshold","body":"I don&#39;t believe Double.compare in itself solves the problem that the poster was asking. You&#39;d still need the abs and threshold"},{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":2,"creation_date":1569844309,"post_id":48426347,"comment_id":102716063,"body_markdown":"the *advantage* of `compare` is that it accounts for `NaN` and `-0.0` - questions problem is sure not solved by that","body":"the <i>advantage</i> of <code>compare</code> is that it accounts for <code>NaN</code> and <code>-0.0</code> - questions problem is sure not solved by that"},{"owner":{"account_id":3658600,"reputation":417,"user_id":3048996,"display_name":"judovana"},"score":2,"creation_date":1596721447,"post_id":48426347,"comment_id":111906617,"body_markdown":"I belive it does, jsut walk through: http://hg.openjdk.java.net/jdk/jdk11/file/1ddf9a99e4ad/src/java.base/share/classes/java/lang/Double.java#l1016 and  http://hg.openjdk.java.net/jdk/jdk11/file/1ddf9a99e4ad/src/java.base/share/classes/java/lang/Double.java#l815","body":"I belive it does, jsut walk through: <a href=\"http://hg.openjdk.java.net/jdk/jdk11/file/1ddf9a99e4ad/src/java.base/share/classes/java/lang/Double.java#l1016\" rel=\"nofollow noreferrer\">hg.openjdk.java.net/jdk/jdk11/file/1ddf9a99e4ad/src/java.bas&zwnj;&#8203;e/&hellip;</a> and  <a href=\"http://hg.openjdk.java.net/jdk/jdk11/file/1ddf9a99e4ad/src/java.base/share/classes/java/lang/Double.java#l815\" rel=\"nofollow noreferrer\">hg.openjdk.java.net/jdk/jdk11/file/1ddf9a99e4ad/src/java.bas&zwnj;&#8203;e/&hellip;</a>"}],"tags":[],"owner":{"account_id":2895395,"reputation":489,"user_id":2483289,"display_name":"Anand"},"comment_count":3,"down_vote_count":5,"up_vote_count":17,"is_accepted":false,"score":12,"last_activity_date":1516808622,"creation_date":1516808622,"answer_id":48426347,"question_id":8081827,"body_markdown":"You can use [Double.compare][1]; It compares the two specified double values.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/lang/Double.html#compare-double-double-","title":"How to compare two double values in Java?","body":"<p>You can use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Double.html#compare-double-double-\" rel=\"noreferrer\">Double.compare</a>; It compares the two specified double values.</p>\n"},{"tags":[],"owner":{"account_id":1055952,"reputation":106,"user_id":1058668,"display_name":"Splash"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1530880410,"creation_date":1530880410,"answer_id":51210595,"question_id":8081827,"body_markdown":"            int mid = 10;\r\n            for (double j = 2 * mid; j &gt;= 0; j = j - 0.1) {\r\n                if (j == mid) {\r\n                \tSystem.out.println(&quot;Never happens&quot;); // is NOT printed\r\n                }\r\n             \r\n                if (Double.compare(j, mid) == 0) {\r\n                \tSystem.out.println(&quot;No way!&quot;); // is NOT printed\r\n                }\r\n                \r\n                if (Math.abs(j - mid) &lt; 1e-6) {\r\n                \tSystem.out.println(&quot;Ha!&quot;); // printed\r\n                }\r\n            }\r\n            System.out.println(&quot;Gotcha!&quot;);\r\n\r\n","title":"How to compare two double values in Java?","body":"<pre><code>        int mid = 10;\n        for (double j = 2 * mid; j &gt;= 0; j = j - 0.1) {\n            if (j == mid) {\n                System.out.println(\"Never happens\"); // is NOT printed\n            }\n\n            if (Double.compare(j, mid) == 0) {\n                System.out.println(\"No way!\"); // is NOT printed\n            }\n\n            if (Math.abs(j - mid) &lt; 1e-6) {\n                System.out.println(\"Ha!\"); // printed\n            }\n        }\n        System.out.println(\"Gotcha!\");\n</code></pre>\n"},{"comments":[{"owner":{"account_id":5275920,"reputation":1627,"user_id":4212710,"display_name":"typoerrpr"},"score":4,"creation_date":1544576975,"post_id":52975932,"comment_id":94322886,"body_markdown":"you&#39;d still need the abs and threshold. Double.compare doesn&#39;t do anything magic; if you look at the javadoc it returns &quot;the value 0 if d1 is numerically equal to d2; a value less than 0 if d1 is numerically less than d2; and a value greater than 0 if d1 is numerically greater than d2.&quot;, effectively doing d1 == d2 in this case","body":"you&#39;d still need the abs and threshold. Double.compare doesn&#39;t do anything magic; if you look at the javadoc it returns &quot;the value 0 if d1 is numerically equal to d2; a value less than 0 if d1 is numerically less than d2; and a value greater than 0 if d1 is numerically greater than d2.&quot;, effectively doing d1 == d2 in this case"}],"tags":[],"owner":{"account_id":10038536,"reputation":2175,"user_id":7422255,"accept_rate":40,"display_name":"Chanaka Fernando"},"comment_count":1,"down_vote_count":5,"up_vote_count":1,"is_accepted":false,"score":-4,"last_activity_date":1540406504,"creation_date":1540406504,"answer_id":52975932,"question_id":8081827,"body_markdown":"Just use Double.compare() method to compare double values.  \r\n**Double.compare((d1,d2) == 0)**  \r\n\r\n    double d1 = 0.0;\r\n    double d2 = 0.0;\r\n\r\n    System.out.println(Double.compare((d1,d2) == 0))  // true","title":"How to compare two double values in Java?","body":"<p>Just use Double.compare() method to compare double values.<br>\n<strong>Double.compare((d1,d2) == 0)</strong>  </p>\n\n<pre><code>double d1 = 0.0;\ndouble d2 = 0.0;\n\nSystem.out.println(Double.compare((d1,d2) == 0))  // true\n</code></pre>\n"},{"comments":[{"owner":{"account_id":943688,"reputation":2561,"user_id":971355,"accept_rate":79,"display_name":"ka3ak"},"score":2,"creation_date":1562961747,"post_id":56246782,"comment_id":100558905,"body_markdown":"You can&#39;t call methods on primitive types which double is","body":"You can&#39;t call methods on primitive types which double is"},{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":0,"creation_date":1569845026,"post_id":56246782,"comment_id":102716372,"body_markdown":"and even if you could (or using `Double.valueOf()`, it surely will return that the numbers are different","body":"and even if you could (or using <code>Double.valueOf()</code>, it surely will return that the numbers are different"},{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":0,"creation_date":1569869868,"post_id":56246782,"comment_id":102728309,"body_markdown":"and I don&#39;t just mean comparing `a` with `b`, but `a-b` with `1.0`","body":"and I don&#39;t just mean comparing <code>a</code> with <code>b</code>, but <code>a-b</code> with <code>1.0</code>"},{"owner":{"display_name":"user7985234"},"score":0,"creation_date":1631866567,"post_id":56246782,"comment_id":122343433,"body_markdown":"This has seen my work. Thank you :)","body":"This has seen my work. Thank you :)"},{"owner":{"account_id":11924446,"reputation":148,"user_id":8726139,"display_name":"Bastien Gallienne"},"score":0,"creation_date":1667828188,"post_id":56246782,"comment_id":131253732,"body_markdown":"did the trick for me. thank you !","body":"did the trick for me. thank you !"}],"tags":[],"owner":{"account_id":9575021,"reputation":37,"user_id":7111743,"display_name":"Ibrahim"},"comment_count":5,"down_vote_count":5,"up_vote_count":1,"is_accepted":false,"score":-4,"last_activity_date":1558484408,"creation_date":1558475289,"answer_id":56246782,"question_id":8081827,"body_markdown":"    double a = 1.000001;\r\n    double b = 0.000001;\r\n    \r\n    System.out.println( a.compareTo(b) );\r\n\r\n**Returns**:&lt;br&gt;\r\n\r\n - -1 : &#39;a&#39; is numerically less than &#39;b&#39;.\r\n\r\n - 0 : &#39;a&#39; is equal to &#39;b&#39;.\r\n\r\n - 1 : &#39;a&#39; is greater than &#39;b&#39;.","title":"How to compare two double values in Java?","body":"<pre><code>double a = 1.000001;\ndouble b = 0.000001;\n\nSystem.out.println( a.compareTo(b) );\n</code></pre>\n\n<p><strong>Returns</strong>:<br></p>\n\n<ul>\n<li><p>-1 : 'a' is numerically less than 'b'.</p></li>\n<li><p>0 : 'a' is equal to 'b'.</p></li>\n<li><p>1 : 'a' is greater than 'b'.</p></li>\n</ul>\n"},{"comments":[{"owner":{"account_id":2203408,"reputation":5012,"user_id":1947216,"display_name":"mentallurg"},"score":1,"creation_date":1559600647,"post_id":56435011,"comment_id":99464724,"body_markdown":"There are already multiple posts about this. Search better in SO.","body":"There are already multiple posts about this. Search better in SO."},{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":1,"creation_date":1569844566,"post_id":56435011,"comment_id":102716167,"body_markdown":"and this is also returning `false` for questions data. Error with given data is about `1e-16`, `MIN_NORMAL` is about `2e-308` - way off  {{ maybe you meant to use `Math.ulp()` }}","body":"and this is also returning <code>false</code> for questions data. Error with given data is about <code>1e-16</code>, <code>MIN_NORMAL</code> is about <code>2e-308</code> - way off  {{ maybe you meant to use <code>Math.ulp()</code> }}"}],"tags":[],"owner":{"account_id":9323818,"reputation":51,"user_id":8386988,"display_name":"ThePC007"},"comment_count":2,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1559598934,"creation_date":1559598934,"answer_id":56435011,"question_id":8081827,"body_markdown":"Consider this line of code:\r\n\r\n    Math.abs(firstDouble - secondDouble) &lt; Double.MIN_NORMAL\r\n\r\nIt returns whether firstDouble is equal to secondDouble. I&#39;m unsure as to whether or not this would work in your exact case (as Kevin pointed out, performing any math on floating points can lead to imprecise results) however I was having difficulties with comparing two double which were, indeed, equal, and yet using the &#39;compareTo&#39; method didn&#39;t return 0.\r\n\r\nI&#39;m just leaving this there in case anyone needs to compare to check if they are indeed equal, and not just similar. ","title":"How to compare two double values in Java?","body":"<p>Consider this line of code:</p>\n\n<pre><code>Math.abs(firstDouble - secondDouble) &lt; Double.MIN_NORMAL\n</code></pre>\n\n<p>It returns whether firstDouble is equal to secondDouble. I'm unsure as to whether or not this would work in your exact case (as Kevin pointed out, performing any math on floating points can lead to imprecise results) however I was having difficulties with comparing two double which were, indeed, equal, and yet using the 'compareTo' method didn't return 0.</p>\n\n<p>I'm just leaving this there in case anyone needs to compare to check if they are indeed equal, and not just similar. </p>\n"},{"tags":[],"owner":{"account_id":357362,"reputation":2080,"user_id":697480,"display_name":"Adam Wise"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680614542,"creation_date":1680614542,"answer_id":75929896,"question_id":8081827,"body_markdown":"This should be built into Java. There are a couple libraries that do a good job of safely comparing doubles, with a third &#39;epsilon&#39; value:\r\n\r\n* Guava&#39;s DoubleMath:\r\n```\r\n// this returns true if roughlyOne is very close to 1\r\nDoubleMath.fuzzyEquals(1.0, roughlyOne, 0.0001d)\r\n```\r\n* Apache Common&#39;s has a very similar method, Precision.equals\r\n\r\nAnd for what its worth, JUnit recently deprecated the equality assert methods that involve doubles that don&#39;t also include an epsilon threshold.","title":"How to compare two double values in Java?","body":"<p>This should be built into Java. There are a couple libraries that do a good job of safely comparing doubles, with a third 'epsilon' value:</p>\n<ul>\n<li>Guava's DoubleMath:</li>\n</ul>\n<pre><code>// this returns true if roughlyOne is very close to 1\nDoubleMath.fuzzyEquals(1.0, roughlyOne, 0.0001d)\n</code></pre>\n<ul>\n<li>Apache Common's has a very similar method, Precision.equals</li>\n</ul>\n<p>And for what its worth, JUnit recently deprecated the equality assert methods that involve doubles that don't also include an epsilon threshold.</p>\n"},{"tags":[],"owner":{"account_id":29433965,"reputation":1,"user_id":22553146,"display_name":"Kevin Zhu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695236260,"creation_date":1695236260,"answer_id":77145274,"question_id":8081827,"body_markdown":"if you don&#39;t use Double.compare(), you may consider use the following:\r\n\r\n    double n1 = 0.1234567890123450;\r\n    double n2 = 0.1234567890123449;\r\n    boolean res = (Math.abs(n1 - n2) &lt;= 1e-16 * Math.max(Math.abs(n1), \r\n    Math.abs(n2)));\r\n    System.out.println(res);\r\n\r\nhowever, if you just compare |n1 - n2|, you may get True for the following comparison result:\r\n\r\n    boolean res = (Math.abs(n1 - n2) &lt;= 1e-16);\r\n    System.out.println(res);","title":"How to compare two double values in Java?","body":"<p>if you don't use Double.compare(), you may consider use the following:</p>\n<pre><code>double n1 = 0.1234567890123450;\ndouble n2 = 0.1234567890123449;\nboolean res = (Math.abs(n1 - n2) &lt;= 1e-16 * Math.max(Math.abs(n1), \nMath.abs(n2)));\nSystem.out.println(res);\n</code></pre>\n<p>however, if you just compare |n1 - n2|, you may get True for the following comparison result:</p>\n<pre><code>boolean res = (Math.abs(n1 - n2) &lt;= 1e-16);\nSystem.out.println(res);\n</code></pre>\n"}],"owner":{"account_id":1028420,"reputation":18799,"user_id":1037210,"accept_rate":100,"display_name":"Lion"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":267677,"favorite_count":0,"down_vote_count":0,"up_vote_count":82,"accepted_answer_id":8081911,"answer_count":9,"score":82,"last_activity_date":1695236260,"creation_date":1320938373,"question_id":8081827,"body_markdown":"A simple comparison of two double values in Java creates some problems. Let&#39;s consider the following simple code snippet in Java.\r\n\r\n    package doublecomparision;\r\n\r\n    final public class DoubleComparision \r\n    {\r\n        public static void main(String[] args) \r\n        {\r\n            double a = 1.000001;\r\n            double b = 0.000001;\r\n\r\n            System.out.println(&quot;\\n&quot;+((a-b)==1.0));\r\n        }\r\n    }\r\n\r\n\r\n----------\r\nThe above code appears to return `true`, the evaluation of the expression `((a-b)==1.0)` but it doesn&#39;t. It returns `false` instead because the evaluation of this expression is `0.9999999999999999` which was actually expected to be `1.0` which is not equal to `1.0` hence, the condition evaluates to boolean `false`. What is the best and suggested way to overcome such a situation?","title":"How to compare two double values in Java?","body":"<p>A simple comparison of two double values in Java creates some problems. Let's consider the following simple code snippet in Java.</p>\n\n<pre><code>package doublecomparision;\n\nfinal public class DoubleComparision \n{\n    public static void main(String[] args) \n    {\n        double a = 1.000001;\n        double b = 0.000001;\n\n        System.out.println(\"\\n\"+((a-b)==1.0));\n    }\n}\n</code></pre>\n\n<hr>\n\n<p>The above code appears to return <code>true</code>, the evaluation of the expression <code>((a-b)==1.0)</code> but it doesn't. It returns <code>false</code> instead because the evaluation of this expression is <code>0.9999999999999999</code> which was actually expected to be <code>1.0</code> which is not equal to <code>1.0</code> hence, the condition evaluates to boolean <code>false</code>. What is the best and suggested way to overcome such a situation?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":3435599,"reputation":4037,"user_id":2878796,"display_name":"UnholySheep"},"score":0,"creation_date":1479647553,"post_id":40704349,"comment_id":68636734,"body_markdown":"Define *&quot;results are incorrect&quot;*. What are the inputs and (incorrect) outputs. Also you should first try to step through it using a debugger. Finally I would recommend you to try to change the flow a bit - isolate the check of input from the check of `nbooksPurchased`","body":"Define <i>&quot;results are incorrect&quot;</i>. What are the inputs and (incorrect) outputs. Also you should first try to step through it using a debugger. Finally I would recommend you to try to change the flow a bit - isolate the check of input from the check of <code>nbooksPurchased</code>"},{"owner":{"account_id":6795544,"reputation":1900,"user_id":5231001,"accept_rate":75,"display_name":"n247s"},"score":1,"creation_date":1479647564,"post_id":40704349,"comment_id":68636736,"body_markdown":"Have you tried to debug your code to see where things go different from what you expected?","body":"Have you tried to debug your code to see where things go different from what you expected?"},{"owner":{"account_id":7793470,"reputation":203,"user_id":5895536,"accept_rate":40,"display_name":"Faraz Sultan"},"score":1,"creation_date":1479647914,"post_id":40704349,"comment_id":68636818,"body_markdown":"What is the result you expected? and What is the result you get?","body":"What is the result you expected? and What is the result you get?"},{"owner":{"account_id":9670029,"reputation":1,"user_id":7175291,"display_name":"Danny "},"score":0,"creation_date":1479648060,"post_id":40704349,"comment_id":68636858,"body_markdown":"Sorry guys like I said very new....not covered debugging on courses yet! An example input/ouput:    Input - &quot;24&quot; and &quot;Y&quot;   the expected output should be &quot;2&quot; but its comes back as &quot;1&quot;","body":"Sorry guys like I said very new....not covered debugging on courses yet! An example input/ouput:    Input - &quot;24&quot; and &quot;Y&quot;   the expected output should be &quot;2&quot; but its comes back as &quot;1&quot;"},{"owner":{"account_id":6082869,"reputation":638,"user_id":4748017,"display_name":"Herb"},"score":0,"creation_date":1479648073,"post_id":40704349,"comment_id":68636864,"body_markdown":"You should separate the code that assigns the isPremiumCustomer variable from the code assigning to the freebooks variable. It&#39;s muddling up you logic","body":"You should separate the code that assigns the isPremiumCustomer variable from the code assigning to the freebooks variable. It&#39;s muddling up you logic"},{"owner":{"account_id":7793470,"reputation":203,"user_id":5895536,"accept_rate":40,"display_name":"Faraz Sultan"},"score":1,"creation_date":1479649000,"post_id":40704349,"comment_id":68637146,"body_markdown":"((ans.equals(&quot;y&quot;) || ans.equals(&quot;Y&quot;))  use parenthesis on every OR condition.","body":"((ans.equals(&quot;y&quot;) || ans.equals(&quot;Y&quot;))  use parenthesis on every OR condition."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1479650594,"post_id":40704349,"comment_id":68637688,"body_markdown":"Try not to do everything in one long if-else construct, that gets more complicated than needed. Try one if statement to set `isPremiumCustomer` to true if this is a premium customer. Next do one if-else with just `if (isPremiumCustomer) {` … Inside each part of this if-else put a new but shorter if-else construct to set `freeBooks` to the correct value. Yes, you can put if-else inside another if-else; if only you keep your indentation nice, it shouldn’t be too hard to grasp.","body":"Try not to do everything in one long if-else construct, that gets more complicated than needed. Try one if statement to set <code>isPremiumCustomer</code> to true if this is a premium customer. Next do one if-else with just <code>if (isPremiumCustomer) {</code> … Inside each part of this if-else put a new but shorter if-else construct to set <code>freeBooks</code> to the correct value. Yes, you can put if-else inside another if-else; if only you keep your indentation nice, it shouldn’t be too hard to grasp."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1479650876,"post_id":40704349,"comment_id":68637787,"body_markdown":"@FarazSultan is correct: `ans.equals(&quot;y&quot;) || ans.equals(&quot;Y&quot;) &amp;&amp; (nbooksPurchased &gt;4 &amp;&amp; (nbooksPurchased &lt;8))` will be evaluated the same as `ans.equals(&quot;y&quot;) || (ans.equals(&quot;Y&quot;) &amp;&amp; nbooksPurchased &gt;4 &amp;&amp; nbooksPurchased &lt; 8)`.","body":"@FarazSultan is correct: <code>ans.equals(&quot;y&quot;) || ans.equals(&quot;Y&quot;) &amp;&amp; (nbooksPurchased &gt;4 &amp;&amp; (nbooksPurchased &lt;8))</code> will be evaluated the same as <code>ans.equals(&quot;y&quot;) || (ans.equals(&quot;Y&quot;) &amp;&amp; nbooksPurchased &gt;4 &amp;&amp; nbooksPurchased &lt; 8)</code>."},{"owner":{"account_id":9165235,"reputation":15414,"user_id":6815131,"display_name":"Joe C"},"score":0,"creation_date":1479653107,"post_id":40704349,"comment_id":68638473,"body_markdown":"Welcome to Stack Overflow! It looks like you need to learn to use a debugger.  Please help yourself to some [complementary debugging techniques](https://ericlippert.com/2014/03/05/how-to-debug-small-programs/).  If you still have issues afterwards, please feel free to come back with more details.","body":"Welcome to Stack Overflow! It looks like you need to learn to use a debugger.  Please help yourself to some <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">complementary debugging techniques</a>.  If you still have issues afterwards, please feel free to come back with more details."},{"owner":{"account_id":9670029,"reputation":1,"user_id":7175291,"display_name":"Danny "},"score":0,"creation_date":1479654353,"post_id":40704349,"comment_id":68638949,"body_markdown":"This is driving me nuts...`if (ans.equals(&quot;y&quot;) || ans.equals(&quot;Y&quot;)) {\n            isPremiumCustomer = true;\n        }\n        if (nbooksPurchased &gt;= 3 &amp;&amp; (nbooksPurchased &lt;= 7)) {\n            freeBooks = 1;\n        } else if (nbooksPurchased &gt;= 8) {\n            freeBooks = 2;\n        }\n        if (ans.equals(&quot;n&quot;) || ans.equals(&quot;N&quot;)) {\n            if ((nbooksPurchased &gt;= 7 &amp;&amp; (nbooksPurchased &lt;= 11))) {\n                freeBooks = 1;\n            } else if (nbooksPurchased &gt;= 12) {\n                freeBooks = 2;`","body":"This is driving me nuts...<code>if (ans.equals(&quot;y&quot;) || ans.equals(&quot;Y&quot;)) {             isPremiumCustomer = true;         }         if (nbooksPurchased &gt;= 3 &amp;&amp; (nbooksPurchased &lt;= 7)) {             freeBooks = 1;         } else if (nbooksPurchased &gt;= 8) {             freeBooks = 2;         }         if (ans.equals(&quot;n&quot;) || ans.equals(&quot;N&quot;)) {             if ((nbooksPurchased &gt;= 7 &amp;&amp; (nbooksPurchased &lt;= 11))) {                 freeBooks = 1;             } else if (nbooksPurchased &gt;= 12) {                 freeBooks = 2;</code>"}],"answers":[{"tags":[],"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695235881,"creation_date":1479669943,"answer_id":40708411,"question_id":40704349,"body_markdown":"Reading your code in the comment is hardly possible. So I formatted it and got:\r\n\r\n\t\tif (ans.equals(&quot;y&quot;) || ans.equals(&quot;Y&quot;)) {\r\n\t\t\tisPremiumCustomer = true;\r\n\t\t}\r\n\t\tif (nbooksPurchased &gt;= 3 &amp;&amp; (nbooksPurchased &lt;= 7)) {\r\n\t\t\tfreeBooks = 1;\r\n\t\t} else if (nbooksPurchased &gt;= 8) {\r\n\t\t\tfreeBooks = 2;\r\n\t\t}\r\n\t\tif (ans.equals(&quot;n&quot;) || ans.equals(&quot;N&quot;)) {\r\n\t\t\tif ((nbooksPurchased &gt;= 7 &amp;&amp; (nbooksPurchased &lt;= 11))) {\r\n\t\t\t\tfreeBooks = 1;\r\n\t\t\t} else if (nbooksPurchased &gt;= 12) {\r\n\t\t\t\tfreeBooks = 2;\r\n\t\t\t}\r\n\t\t}\r\n\r\nNow you’re clearly on the way compared to your code in the question. The main problem with this is that the middle if-else construct `if (nbooksPurchased &gt;= 3 &amp;&amp; (nbooksPurchased &lt;= 7)) {` is executed for all customers, not only premium customers. So regular customers that buy 3 or 6 books get the 1 free book that only premium customers should have had on such a purchase. If they buy 7 or more, the execution gets into `if (ans.equals(&quot;n&quot;) || ans.equals(&quot;N&quot;)) {`, and you’re saved. \r\n\r\nThe other problem is just a typo, `nbooksPurchased &gt;= 3` should have been 5 for premium customers.\r\n\r\nSo I believe most cases work correctly.\r\n\r\nI think that this would be clearer (and hence easier for yourself to correct errors in):\r\n\r\n\t\tif (isPremiumCustomer) {\r\n\t\t\t// put if-else for premium customers here\r\n\t\t} else {\r\n\t\t\t// put if-else for regular customers here\r\n\t\t}\r\n\r\nAlso I think this will better fulfil the requirement:\r\n\r\n&gt; Write the block of code that assigns freeBooks the appropriate value\r\n&gt; *based on* the values of the boolean variable isPremiumCustomer and …\r\n\r\n(my emphasis).","title":"Incorrect results from code written for basic Java exercise","body":"<p>Reading your code in the comment is hardly possible. So I formatted it and got:</p>\n<pre><code>    if (ans.equals(&quot;y&quot;) || ans.equals(&quot;Y&quot;)) {\n        isPremiumCustomer = true;\n    }\n    if (nbooksPurchased &gt;= 3 &amp;&amp; (nbooksPurchased &lt;= 7)) {\n        freeBooks = 1;\n    } else if (nbooksPurchased &gt;= 8) {\n        freeBooks = 2;\n    }\n    if (ans.equals(&quot;n&quot;) || ans.equals(&quot;N&quot;)) {\n        if ((nbooksPurchased &gt;= 7 &amp;&amp; (nbooksPurchased &lt;= 11))) {\n            freeBooks = 1;\n        } else if (nbooksPurchased &gt;= 12) {\n            freeBooks = 2;\n        }\n    }\n</code></pre>\n<p>Now you’re clearly on the way compared to your code in the question. The main problem with this is that the middle if-else construct <code>if (nbooksPurchased &gt;= 3 &amp;&amp; (nbooksPurchased &lt;= 7)) {</code> is executed for all customers, not only premium customers. So regular customers that buy 3 or 6 books get the 1 free book that only premium customers should have had on such a purchase. If they buy 7 or more, the execution gets into <code>if (ans.equals(&quot;n&quot;) || ans.equals(&quot;N&quot;)) {</code>, and you’re saved.</p>\n<p>The other problem is just a typo, <code>nbooksPurchased &gt;= 3</code> should have been 5 for premium customers.</p>\n<p>So I believe most cases work correctly.</p>\n<p>I think that this would be clearer (and hence easier for yourself to correct errors in):</p>\n<pre><code>    if (isPremiumCustomer) {\n        // put if-else for premium customers here\n    } else {\n        // put if-else for regular customers here\n    }\n</code></pre>\n<p>Also I think this will better fulfil the requirement:</p>\n<blockquote>\n<p>Write the block of code that assigns freeBooks the appropriate value\n<em>based on</em> the values of the boolean variable isPremiumCustomer and …</p>\n</blockquote>\n<p>(my emphasis).</p>\n"}],"owner":{"account_id":9670029,"reputation":1,"user_id":7175291,"display_name":"Danny "},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":191,"favorite_count":0,"down_vote_count":6,"up_vote_count":0,"answer_count":1,"score":-6,"last_activity_date":1695235993,"creation_date":1479647280,"question_id":40704349,"body_markdown":"Here are the instructions\r\n\r\n&gt;Online Book Depot offers premium customers 1 free book with every purchase of 5 or more books and offers 2 free books with every purchase of 8 or more books.  \r\n&gt;\r\n&gt;It offers regular customers 1 free book with every purchase of 7 or more books, and offers 2 free books with every purchase of 12 or more books.   \r\n&gt;\r\n&gt;Write the block of code that assigns freeBooks the appropriate value based on the values of the boolean variable isPremiumCustomer and the int variable nbooksPurchased\r\n\r\nThe code compiles without error but results are incorrect:\r\n\r\n    boolean isPremiumCustomer = false;\r\n        int freeBooks = 0;\r\n        Scanner scanner = new Scanner(System.in);\r\n        System.out.println(&quot;Enter the no of books:&quot;);\r\n        int nbooksPurchased = scanner.nextInt();\r\n        System.out.println(&quot;is Premium customer?(y/n):&quot;);\r\n        String ans = scanner.next();\r\n        if (ans.equals(&quot;y&quot;) || ans.equals(&quot;Y&quot;) &amp;&amp; (nbooksPurchased &gt;4 &amp;&amp; (nbooksPurchased &lt;8))) {\r\n            isPremiumCustomer = true;\r\n            freeBooks = 1;\r\n        }else if (ans.equals(&quot;y&quot;) || ans.equals(&quot;Y&quot;) &amp;&amp; (nbooksPurchased &gt;=8 )) {\r\n            isPremiumCustomer = true;\r\n            freeBooks = 2;\r\n        }else if (ans.equals(&quot;n&quot;) || ans.equals(&quot;N&quot;) &amp;&amp; (nbooksPurchased &gt;=7 &amp;&amp; (nbooksPurchased &lt;=11))) {\r\n            freeBooks = 1;\r\n        }else if (ans.equals(&quot;n&quot;) || ans.equals(&quot;N&quot;) &amp;&amp; (nbooksPurchased &gt;=12 )){\r\n            freeBooks = 2;\r\n            }\r\n            System.out.println(&quot;Free Books:&quot; + freeBooks);","title":"Incorrect results from code written for basic Java exercise","body":"<p>Here are the instructions</p>\n<blockquote>\n<p>Online Book Depot offers premium customers 1 free book with every purchase of 5 or more books and offers 2 free books with every purchase of 8 or more books.</p>\n<p>It offers regular customers 1 free book with every purchase of 7 or more books, and offers 2 free books with every purchase of 12 or more books.</p>\n<p>Write the block of code that assigns freeBooks the appropriate value based on the values of the boolean variable isPremiumCustomer and the int variable nbooksPurchased</p>\n</blockquote>\n<p>The code compiles without error but results are incorrect:</p>\n<pre><code>boolean isPremiumCustomer = false;\n    int freeBooks = 0;\n    Scanner scanner = new Scanner(System.in);\n    System.out.println(&quot;Enter the no of books:&quot;);\n    int nbooksPurchased = scanner.nextInt();\n    System.out.println(&quot;is Premium customer?(y/n):&quot;);\n    String ans = scanner.next();\n    if (ans.equals(&quot;y&quot;) || ans.equals(&quot;Y&quot;) &amp;&amp; (nbooksPurchased &gt;4 &amp;&amp; (nbooksPurchased &lt;8))) {\n        isPremiumCustomer = true;\n        freeBooks = 1;\n    }else if (ans.equals(&quot;y&quot;) || ans.equals(&quot;Y&quot;) &amp;&amp; (nbooksPurchased &gt;=8 )) {\n        isPremiumCustomer = true;\n        freeBooks = 2;\n    }else if (ans.equals(&quot;n&quot;) || ans.equals(&quot;N&quot;) &amp;&amp; (nbooksPurchased &gt;=7 &amp;&amp; (nbooksPurchased &lt;=11))) {\n        freeBooks = 1;\n    }else if (ans.equals(&quot;n&quot;) || ans.equals(&quot;N&quot;) &amp;&amp; (nbooksPurchased &gt;=12 )){\n        freeBooks = 2;\n        }\n        System.out.println(&quot;Free Books:&quot; + freeBooks);\n</code></pre>\n"},{"tags":["java","spring-boot","graalvm","graalvm-native-image","spring-native"],"comments":[{"owner":{"account_id":6821181,"reputation":3364,"user_id":5248299,"accept_rate":89,"display_name":"Kihats"},"score":0,"creation_date":1695288841,"post_id":77145242,"comment_id":136005584,"body_markdown":"Hey @Cesar Angiolucci\nI am facing the same issue with the same version of Spring Boot (3.1.3)","body":"Hey @Cesar Angiolucci I am facing the same issue with the same version of Spring Boot (3.1.3)"},{"owner":{"account_id":6821181,"reputation":3364,"user_id":5248299,"accept_rate":89,"display_name":"Kihats"},"score":0,"creation_date":1695299937,"post_id":77145242,"comment_id":136007862,"body_markdown":"It&#39;s trying to invoke a method `list()` on this line `at io.github.classgraph.ModuleReaderProxy.list(ModuleReaderProxy.java:107)`\n\n`final Object /* Stream&lt;String&gt; */ resourcesStream = ReflectionUtils\n                .invokeMethod(/* throwException = */ true, moduleReader, &quot;list&quot;);`\n\nThe `moduleReader` is of type `java.lang.AutoCloseable` an interface and I have no idea the specific concrete class the `moduleReader` is","body":"It&#39;s trying to invoke a method <code>list()</code> on this line <code>at io.github.classgraph.ModuleReaderProxy.list(ModuleReaderProx&zwnj;&#8203;y.java:107)</code>  <code>final Object &#47;* Stream&lt;String&gt; *&#47; resourcesStream = ReflectionUtils                 .invokeMethod(&#47;* throwException = *&#47; true, moduleReader, &quot;list&quot;);</code>  The <code>moduleReader</code> is of type <code>java.lang.AutoCloseable</code> an interface and I have no idea the specific concrete class the <code>moduleReader</code> is"},{"owner":{"account_id":13302065,"reputation":164,"user_id":9603261,"display_name":"Cesar Angiolucci"},"score":0,"creation_date":1695388566,"post_id":77145242,"comment_id":136021654,"body_markdown":"@Kihats i suspect it could be something to do with the springdoc-openapi, although im using its latest version (that supposedly should work fine). Are you using it also? Ill try to remove its dependency and code from the app and try again.","body":"@Kihats i suspect it could be something to do with the springdoc-openapi, although im using its latest version (that supposedly should work fine). Are you using it also? Ill try to remove its dependency and code from the app and try again."},{"owner":{"account_id":6821181,"reputation":3364,"user_id":5248299,"accept_rate":89,"display_name":"Kihats"},"score":0,"creation_date":1695484381,"post_id":77145242,"comment_id":136031903,"body_markdown":"Yeah, I have it as a dependency but I don&#39;t really have to use it. Let me try removing it","body":"Yeah, I have it as a dependency but I don&#39;t really have to use it. Let me try removing it"},{"owner":{"account_id":6821181,"reputation":3364,"user_id":5248299,"accept_rate":89,"display_name":"Kihats"},"score":0,"creation_date":1695914318,"post_id":77145242,"comment_id":136090148,"body_markdown":"Hey @Cesar, did you find a solution for this issue? I removed the dependency but still the error persists.","body":"Hey @Cesar, did you find a solution for this issue? I removed the dependency but still the error persists."},{"owner":{"account_id":13302065,"reputation":164,"user_id":9603261,"display_name":"Cesar Angiolucci"},"score":0,"creation_date":1695996409,"post_id":77145242,"comment_id":136101291,"body_markdown":"Hi @Kihats, yes actually i did resolve this specific issue (but now another one appeared). In my case, i had an internal dependency that was using and older version of a swagger dependency, in my case &quot;io.springfox.springfox-swagger-ui&quot;. I updated that project, changing that dependenc to the springdoc-openapi. Now, im facing another issue with the ModelMapper that im trying to resolve.","body":"Hi @Kihats, yes actually i did resolve this specific issue (but now another one appeared). In my case, i had an internal dependency that was using and older version of a swagger dependency, in my case &quot;io.springfox.springfox-swagger-ui&quot;. I updated that project, changing that dependenc to the springdoc-openapi. Now, im facing another issue with the ModelMapper that im trying to resolve."}],"owner":{"account_id":13302065,"reputation":164,"user_id":9603261,"display_name":"Cesar Angiolucci"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":92,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1695235957,"creation_date":1695235957,"question_id":77145242,"body_markdown":"I&#180;m trying to convert a spring boot 2.x project to spring boot 3.1.3 and compile it with the native profile for the graalvm.\r\n\r\nI have followed this guide so far: https://softwaremill.com/how-to-migrate-a-spring-boot-app-to-a-native-image/#before-migration\r\n\r\nI was able compile and run the project with spring AOT enabled, generating the reachability metadata and after that successfully built the native image. My current env is: W10 22H2 x64 | openJDK 17.0.8 | graalVM CE 22.3.3 | MSVC 14.16.27023.\r\n\r\nWhen i run the executable it starts very quickly, but when i try to make any requests to the http endpoints of the application i get the following error:\r\n\r\n```\r\n15:36:01.330 [ERROR] o.a.c.c.C.[.[localhost] - Exception Processing ErrorPage[errorCode=0, location=/error]\r\njakarta.servlet.ServletException: Servlet.init() for servlet [dispatcherServlet] threw exception\r\n        at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:960)\r\n        at org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:662)\r\n        at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:621)\r\n        at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:410)\r\n        at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:340)\r\n        at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:277)\r\n        at org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.java:359)\r\n        at org.apache.catalina.core.StandardHostValve.status(StandardHostValve.java:222)\r\n        at org.apache.catalina.core.StandardHostValve.throwable(StandardHostValve.java:305)\r\n        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:149)\r\n        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)\r\n        at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\r\n        at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n        at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894)\r\n        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)\r\n        at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n        at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n        at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n        at java.base@17.0.8/java.lang.Thread.run(Thread.java:833)\r\n        at org.graalvm.nativeimage.builder/com.oracle.svm.core.thread.PlatformThreads.threadStartRoutine(PlatformThreads.java:775)\r\n        at org.graalvm.nativeimage.builder/com.oracle.svm.core.windows.WindowsPlatformThreads.osThreadStartRoutine(WindowsPlatformThreads.java:178)\r\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;resourceHandlerMapping&#39;: Instantiation of supplied bean failed\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.obtainFromSupplier(AbstractAutowireCapableBeanFactory.java:1220)\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1158)\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:560)\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)\r\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)\r\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeansOfType(DefaultListableBeanFactory.java:663)\r\n        at org.springframework.context.support.AbstractApplicationContext.getBeansOfType(AbstractApplicationContext.java:1309)\r\n        at org.springframework.beans.factory.BeanFactoryUtils.beansOfTypeIncludingAncestors(BeanFactoryUtils.java:368)\r\n        at org.springframework.web.servlet.DispatcherServlet.initHandlerMappings(DispatcherServlet.java:602)\r\n        at org.springframework.web.servlet.DispatcherServlet.initStrategies(DispatcherServlet.java:508)\r\n        at org.springframework.web.servlet.DispatcherServlet.onRefresh(DispatcherServlet.java:497)\r\n        at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:603)\r\n        at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:537)\r\n        at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:169)\r\n        at jakarta.servlet.GenericServlet.init(GenericServlet.java:143)\r\n        at jakarta.servlet.http.HttpServlet.init(HttpServlet.java:121)\r\n        at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:944)\r\n        ... 23 common frames omitted\r\nCaused by: io.github.classgraph.ClassGraphException: Uncaught exception during scan\r\n        at io.github.classgraph.ClassGraph.scan(ClassGraph.java:1570)\r\n        at io.github.classgraph.ClassGraph.scan(ClassGraph.java:1587)\r\n        at io.github.classgraph.ClassGraph.scan(ClassGraph.java:1600)\r\n        at org.webjars.WebJarAssetLocator.scanForWebJars(WebJarAssetLocator.java:188)\r\n        at org.webjars.WebJarAssetLocator.&lt;init&gt;(WebJarAssetLocator.java:210)\r\n        at org.webjars.WebJarAssetLocator.&lt;init&gt;(WebJarAssetLocator.java:194)\r\n        at org.springframework.web.servlet.resource.WebJarsResourceResolver.&lt;init&gt;(WebJarsResourceResolver.java:63)\r\n        at org.springframework.web.servlet.config.annotation.ResourceChainRegistration.getResourceResolvers(ResourceChainRegistration.java:114)\r\n        at org.springframework.web.servlet.config.annotation.ResourceHandlerRegistration.getRequestHandler(ResourceHandlerRegistration.java:215)\r\n        at org.springframework.web.servlet.config.annotation.ResourceHandlerRegistry.getRequestHandler(ResourceHandlerRegistry.java:178)\r\n        at org.springframework.web.servlet.config.annotation.ResourceHandlerRegistry.getHandlerMapping(ResourceHandlerRegistry.java:168)\r\n        at org.springframework.web.servlet.config.annotation.WebMvcConfigurationSupport.resourceHandlerMapping(WebMvcConfigurationSupport.java:589)\r\n        at org.springframework.web.servlet.config.annotation.WebMvcConfigurationSupport__BeanDefinitions.lambda$getResourceHandlerMappingInstanceSupplier$7(WebMvcConfigurationSupport__BeanDefinitions.java:172)\r\n        at org.springframework.util.function.ThrowingBiFunction.apply(ThrowingBiFunction.java:68)\r\n        at org.springframework.util.function.ThrowingBiFunction.apply(ThrowingBiFunction.java:54)\r\n        at org.springframework.beans.factory.aot.BeanInstanceSupplier.lambda$get$2(BeanInstanceSupplier.java:202)\r\n        at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)\r\n        at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)\r\n        at org.springframework.beans.factory.aot.BeanInstanceSupplier.invokeBeanSupplier(BeanInstanceSupplier.java:214)\r\n        at org.springframework.beans.factory.aot.BeanInstanceSupplier.get(BeanInstanceSupplier.java:202)\r\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.obtainInstanceFromSupplier(DefaultListableBeanFactory.java:947)\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.obtainFromSupplier(AbstractAutowireCapableBeanFactory.java:1214)\r\n        ... 42 common frames omitted\r\nCaused by: java.lang.IllegalArgumentException: Exception while invoking method &quot;list&quot;\r\n        at nonapi.io.github.classgraph.utils.ReflectionUtils.invokeMethod(ReflectionUtils.java:268)\r\n        at nonapi.io.github.classgraph.utils.ReflectionUtils.invokeMethod(ReflectionUtils.java:301)\r\n        at io.github.classgraph.ModuleReaderProxy.list(ModuleReaderProxy.java:107)\r\n        at io.github.classgraph.ClasspathElementModule.scanPaths(ClasspathElementModule.java:286)\r\n        at io.github.classgraph.Scanner$5.processWorkUnit(Scanner.java:1095)\r\n        at io.github.classgraph.Scanner$5.processWorkUnit(Scanner.java:1089)\r\n        at nonapi.io.github.classgraph.concurrency.WorkQueue.runWorkLoop(WorkQueue.java:246)\r\n        at nonapi.io.github.classgraph.concurrency.WorkQueue.access$000(WorkQueue.java:50)\r\n        at nonapi.io.github.classgraph.concurrency.WorkQueue$1.call(WorkQueue.java:201)\r\n        at nonapi.io.github.classgraph.concurrency.WorkQueue$1.call(WorkQueue.java:198)\r\n        at java.base@17.0.8/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n        at java.base@17.0.8/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\r\n        at java.base@17.0.8/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\r\n        ... 3 common frames omitted\r\nCaused by: java.lang.reflect.InvocationTargetException: null\r\n        at java.base@17.0.8/java.lang.reflect.Method.invoke(Method.java:568)\r\n        at nonapi.io.github.classgraph.utils.ReflectionUtils.invokeMethod(ReflectionUtils.java:260)\r\n        ... 15 common frames omitted\r\nCaused by: com.oracle.svm.core.jdk.UnsupportedFeatureError: JRT file system is disabled\r\n        at org.graalvm.nativeimage.builder/com.oracle.svm.core.util.VMError.unsupportedFeature(VMError.java:89)\r\n        at java.base@17.0.8/jdk.internal.module.SystemModuleFinders$SystemImage.reader(SystemModuleFinders.java:139)\r\n        at java.base@17.0.8/jdk.internal.module.SystemModuleFinders$ModuleContentSpliterator.&lt;init&gt;(SystemModuleFinders.java:527)\r\n        at java.base@17.0.8/jdk.internal.module.SystemModuleFinders$SystemModuleReader.list(SystemModuleFinders.java:502)\r\n        ... 17 common frames omitted\r\n```","title":"Spring Boot GraalVM Native Image JRT File System is Disabled Error","body":"<p>I´m trying to convert a spring boot 2.x project to spring boot 3.1.3 and compile it with the native profile for the graalvm.</p>\n<p>I have followed this guide so far: <a href=\"https://softwaremill.com/how-to-migrate-a-spring-boot-app-to-a-native-image/#before-migration\" rel=\"nofollow noreferrer\">https://softwaremill.com/how-to-migrate-a-spring-boot-app-to-a-native-image/#before-migration</a></p>\n<p>I was able compile and run the project with spring AOT enabled, generating the reachability metadata and after that successfully built the native image. My current env is: W10 22H2 x64 | openJDK 17.0.8 | graalVM CE 22.3.3 | MSVC 14.16.27023.</p>\n<p>When i run the executable it starts very quickly, but when i try to make any requests to the http endpoints of the application i get the following error:</p>\n<pre><code>15:36:01.330 [ERROR] o.a.c.c.C.[.[localhost] - Exception Processing ErrorPage[errorCode=0, location=/error]\njakarta.servlet.ServletException: Servlet.init() for servlet [dispatcherServlet] threw exception\n        at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:960)\n        at org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:662)\n        at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:621)\n        at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:410)\n        at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:340)\n        at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:277)\n        at org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.java:359)\n        at org.apache.catalina.core.StandardHostValve.status(StandardHostValve.java:222)\n        at org.apache.catalina.core.StandardHostValve.throwable(StandardHostValve.java:305)\n        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:149)\n        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\n        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\n        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)\n        at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\n        at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\n        at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894)\n        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)\n        at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\n        at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\n        at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\n        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n        at java.base@17.0.8/java.lang.Thread.run(Thread.java:833)\n        at org.graalvm.nativeimage.builder/com.oracle.svm.core.thread.PlatformThreads.threadStartRoutine(PlatformThreads.java:775)\n        at org.graalvm.nativeimage.builder/com.oracle.svm.core.windows.WindowsPlatformThreads.osThreadStartRoutine(WindowsPlatformThreads.java:178)\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'resourceHandlerMapping': Instantiation of supplied bean failed\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.obtainFromSupplier(AbstractAutowireCapableBeanFactory.java:1220)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1158)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:560)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)\n        at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeansOfType(DefaultListableBeanFactory.java:663)\n        at org.springframework.context.support.AbstractApplicationContext.getBeansOfType(AbstractApplicationContext.java:1309)\n        at org.springframework.beans.factory.BeanFactoryUtils.beansOfTypeIncludingAncestors(BeanFactoryUtils.java:368)\n        at org.springframework.web.servlet.DispatcherServlet.initHandlerMappings(DispatcherServlet.java:602)\n        at org.springframework.web.servlet.DispatcherServlet.initStrategies(DispatcherServlet.java:508)\n        at org.springframework.web.servlet.DispatcherServlet.onRefresh(DispatcherServlet.java:497)\n        at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:603)\n        at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:537)\n        at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:169)\n        at jakarta.servlet.GenericServlet.init(GenericServlet.java:143)\n        at jakarta.servlet.http.HttpServlet.init(HttpServlet.java:121)\n        at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:944)\n        ... 23 common frames omitted\nCaused by: io.github.classgraph.ClassGraphException: Uncaught exception during scan\n        at io.github.classgraph.ClassGraph.scan(ClassGraph.java:1570)\n        at io.github.classgraph.ClassGraph.scan(ClassGraph.java:1587)\n        at io.github.classgraph.ClassGraph.scan(ClassGraph.java:1600)\n        at org.webjars.WebJarAssetLocator.scanForWebJars(WebJarAssetLocator.java:188)\n        at org.webjars.WebJarAssetLocator.&lt;init&gt;(WebJarAssetLocator.java:210)\n        at org.webjars.WebJarAssetLocator.&lt;init&gt;(WebJarAssetLocator.java:194)\n        at org.springframework.web.servlet.resource.WebJarsResourceResolver.&lt;init&gt;(WebJarsResourceResolver.java:63)\n        at org.springframework.web.servlet.config.annotation.ResourceChainRegistration.getResourceResolvers(ResourceChainRegistration.java:114)\n        at org.springframework.web.servlet.config.annotation.ResourceHandlerRegistration.getRequestHandler(ResourceHandlerRegistration.java:215)\n        at org.springframework.web.servlet.config.annotation.ResourceHandlerRegistry.getRequestHandler(ResourceHandlerRegistry.java:178)\n        at org.springframework.web.servlet.config.annotation.ResourceHandlerRegistry.getHandlerMapping(ResourceHandlerRegistry.java:168)\n        at org.springframework.web.servlet.config.annotation.WebMvcConfigurationSupport.resourceHandlerMapping(WebMvcConfigurationSupport.java:589)\n        at org.springframework.web.servlet.config.annotation.WebMvcConfigurationSupport__BeanDefinitions.lambda$getResourceHandlerMappingInstanceSupplier$7(WebMvcConfigurationSupport__BeanDefinitions.java:172)\n        at org.springframework.util.function.ThrowingBiFunction.apply(ThrowingBiFunction.java:68)\n        at org.springframework.util.function.ThrowingBiFunction.apply(ThrowingBiFunction.java:54)\n        at org.springframework.beans.factory.aot.BeanInstanceSupplier.lambda$get$2(BeanInstanceSupplier.java:202)\n        at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)\n        at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)\n        at org.springframework.beans.factory.aot.BeanInstanceSupplier.invokeBeanSupplier(BeanInstanceSupplier.java:214)\n        at org.springframework.beans.factory.aot.BeanInstanceSupplier.get(BeanInstanceSupplier.java:202)\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.obtainInstanceFromSupplier(DefaultListableBeanFactory.java:947)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.obtainFromSupplier(AbstractAutowireCapableBeanFactory.java:1214)\n        ... 42 common frames omitted\nCaused by: java.lang.IllegalArgumentException: Exception while invoking method &quot;list&quot;\n        at nonapi.io.github.classgraph.utils.ReflectionUtils.invokeMethod(ReflectionUtils.java:268)\n        at nonapi.io.github.classgraph.utils.ReflectionUtils.invokeMethod(ReflectionUtils.java:301)\n        at io.github.classgraph.ModuleReaderProxy.list(ModuleReaderProxy.java:107)\n        at io.github.classgraph.ClasspathElementModule.scanPaths(ClasspathElementModule.java:286)\n        at io.github.classgraph.Scanner$5.processWorkUnit(Scanner.java:1095)\n        at io.github.classgraph.Scanner$5.processWorkUnit(Scanner.java:1089)\n        at nonapi.io.github.classgraph.concurrency.WorkQueue.runWorkLoop(WorkQueue.java:246)\n        at nonapi.io.github.classgraph.concurrency.WorkQueue.access$000(WorkQueue.java:50)\n        at nonapi.io.github.classgraph.concurrency.WorkQueue$1.call(WorkQueue.java:201)\n        at nonapi.io.github.classgraph.concurrency.WorkQueue$1.call(WorkQueue.java:198)\n        at java.base@17.0.8/java.util.concurrent.FutureTask.run(FutureTask.java:264)\n        at java.base@17.0.8/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\n        at java.base@17.0.8/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\n        ... 3 common frames omitted\nCaused by: java.lang.reflect.InvocationTargetException: null\n        at java.base@17.0.8/java.lang.reflect.Method.invoke(Method.java:568)\n        at nonapi.io.github.classgraph.utils.ReflectionUtils.invokeMethod(ReflectionUtils.java:260)\n        ... 15 common frames omitted\nCaused by: com.oracle.svm.core.jdk.UnsupportedFeatureError: JRT file system is disabled\n        at org.graalvm.nativeimage.builder/com.oracle.svm.core.util.VMError.unsupportedFeature(VMError.java:89)\n        at java.base@17.0.8/jdk.internal.module.SystemModuleFinders$SystemImage.reader(SystemModuleFinders.java:139)\n        at java.base@17.0.8/jdk.internal.module.SystemModuleFinders$ModuleContentSpliterator.&lt;init&gt;(SystemModuleFinders.java:527)\n        at java.base@17.0.8/jdk.internal.module.SystemModuleFinders$SystemModuleReader.list(SystemModuleFinders.java:502)\n        ... 17 common frames omitted\n</code></pre>\n"},{"tags":["java","recursion"],"comments":[{"owner":{"account_id":682692,"reputation":49061,"user_id":535275,"accept_rate":91,"display_name":"Scott Hunter"},"score":0,"creation_date":1695234270,"post_id":77145096,"comment_id":135998684,"body_markdown":"What if instead of using `scan`, you just assign `&quot;Hello World&quot;` to `input6`?","body":"What if instead of using <code>scan</code>, you just assign <code>&quot;Hello World&quot;</code> to <code>input6</code>?"},{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":1,"creation_date":1695234645,"post_id":77145096,"comment_id":135998759,"body_markdown":"because `next()` reads only one word&#185;.... try printing the input just to check (is often helpful anyway) || **&#185;** `next()` actually returns the next token and, by default, whitespaces are used as delimiter || you can use `nextLine()` if you want to read the whole line (or change the delimiter)","body":"because <code>next()</code> reads only one word&#185;.... try printing the input just to check (is often helpful anyway) || <b>&#185;</b> <code>next()</code> actually returns the next token and, by default, whitespaces are used as delimiter || you can use <code>nextLine()</code> if you want to read the whole line (or change the delimiter)"},{"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"score":1,"creation_date":1695234736,"post_id":77145096,"comment_id":135998779,"body_markdown":"Why is your method recursive. Isn&#39;t it easier to traverse back the string? Where did you get `InputMismatchException`? Post a stacktrace.","body":"Why is your method recursive. Isn&#39;t it easier to traverse back the string? Where did you get <code>InputMismatchException</code>? Post a stacktrace."},{"owner":{"account_id":29494191,"reputation":13,"user_id":22602620,"display_name":"Robert Beletsky"},"score":0,"creation_date":1695235755,"post_id":77145096,"comment_id":135998960,"body_markdown":"Exception in thread &quot;main&quot; java.util.InputMismatchException\n\tat java.base/java.util.Scanner.throwFor(Scanner.java:939)\n\tat java.base/java.util.Scanner.next(Scanner.java:1594)\n\tat java.base/java.util.Scanner.nextInt(Scanner.java:2258)\n\tat java.base/java.util.Scanner.nextInt(Scanner.java:2212)\n\tat CSDS233/csds233.Palindrome.main(Palindrome.java:137) //I made a new scanner because this scanner was also being used to control the switch statement I think.","body":"Exception in thread &quot;main&quot; java.util.InputMismatchException \tat java.base/java.util.Scanner.throwFor(Scanner.java:939) \tat java.base/java.util.Scanner.next(Scanner.java:1594) \tat java.base/java.util.Scanner.nextInt(Scanner.java:2258) \tat java.base/java.util.Scanner.nextInt(Scanner.java:2212) \tat CSDS233/csds233.Palindrome.main(Palindrome.java:137) //I made a new scanner because this scanner was also being used to control the switch statement I think."}],"answers":[{"tags":[],"owner":{"account_id":25647583,"reputation":122,"user_id":19415431,"display_name":"Divyansh Gemini"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1695235516,"creation_date":1695235091,"answer_id":77145180,"question_id":77145096,"body_markdown":"**Solution:**\r\nUse `nextLine()` method instead of `next()` method.\r\n\r\n**Reason:**\r\n`next()` method is used to input String containing only 1 word whereas `nextLine()` method is used to input String containing multiple words. This is the reason your code is returning &#39;Hello&#39; instead of &#39;World Hello&#39; because it is taking only &#39;Hello&#39; as the input and ignoring &#39; World&#39;\r\n\r\n**Your updated code:**\r\n```\r\ncase 6:\r\n        System.out.println(&quot;Enter a string to reverse:&quot;);\r\n        String input6 = scan.nextLine();\r\n        System.out.println(sentenceReversal(input6));\r\n        break;\r\n```\r\n\r\nRefer more methods of Scanner class at the below page:\r\nhttps://docs.oracle.com/javase%2F7%2Fdocs%2Fapi%2F%2F/java/util/Scanner.html#method_summary","title":"Why does my method not work when I input a variable vs. inputting a string directly?","body":"<p><strong>Solution:</strong>\nUse <code>nextLine()</code> method instead of <code>next()</code> method.</p>\n<p><strong>Reason:</strong>\n<code>next()</code> method is used to input String containing only 1 word whereas <code>nextLine()</code> method is used to input String containing multiple words. This is the reason your code is returning 'Hello' instead of 'World Hello' because it is taking only 'Hello' as the input and ignoring ' World'</p>\n<p><strong>Your updated code:</strong></p>\n<pre><code>case 6:\n        System.out.println(&quot;Enter a string to reverse:&quot;);\n        String input6 = scan.nextLine();\n        System.out.println(sentenceReversal(input6));\n        break;\n</code></pre>\n<p>Refer more methods of Scanner class at the below page:\n<a href=\"https://docs.oracle.com/javase%2F7%2Fdocs%2Fapi%2F%2F/java/util/Scanner.html#method_summary\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase%2F7%2Fdocs%2Fapi%2F%2F/java/util/Scanner.html#method_summary</a></p>\n"}],"owner":{"account_id":29494191,"reputation":13,"user_id":22602620,"display_name":"Robert Beletsky"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77145180,"answer_count":1,"score":1,"last_activity_date":1695235516,"creation_date":1695234125,"question_id":77145096,"body_markdown":"```\r\n//method I&#39;m trying to call\r\nstatic String sentenceReversal(String input) {\r\n\t\t\r\n\t\t\tint x = input.indexOf(&quot; &quot;);\r\n\t\t    \r\n\t\t    //Base Case\r\n\t\t    if(x == -1)\r\n\t\t      return input;\r\n\t\t      \r\n\t\t     //Recursive Method\r\n\t\t    return sentenceReversal(input.substring(x+1)) +&quot; &quot;+ input.substring(0, x);\r\n```\r\n\r\n```\r\ncase 6:\r\n\t\t\tSystem.out.println(&quot;Enter a string to reverse:&quot;);\r\n\t\t\tString input6 = scan.next();\r\n\t\t\tSystem.out.println(sentenceReversal(input6));\r\n\t\t\tbreak;\r\n```\r\n\r\n\r\n\r\nCalling the method as `sentenceReversal(&quot;Hello World&quot;)`\r\n\r\nreturns `World Hello`, but calling it with `input6` returns `Hello` and nothing else, any ideas?\r\n\r\nI made a specific scanner only for this case as well because I was previously getting a `InputMismatchException`\r\n\r\nAlso when after inputting a number after the switch the next part of the string appears.","title":"Why does my method not work when I input a variable vs. inputting a string directly?","body":"<pre><code>//method I'm trying to call\nstatic String sentenceReversal(String input) {\n        \n            int x = input.indexOf(&quot; &quot;);\n            \n            //Base Case\n            if(x == -1)\n              return input;\n              \n             //Recursive Method\n            return sentenceReversal(input.substring(x+1)) +&quot; &quot;+ input.substring(0, x);\n</code></pre>\n<pre><code>case 6:\n            System.out.println(&quot;Enter a string to reverse:&quot;);\n            String input6 = scan.next();\n            System.out.println(sentenceReversal(input6));\n            break;\n</code></pre>\n<p>Calling the method as <code>sentenceReversal(&quot;Hello World&quot;)</code></p>\n<p>returns <code>World Hello</code>, but calling it with <code>input6</code> returns <code>Hello</code> and nothing else, any ideas?</p>\n<p>I made a specific scanner only for this case as well because I was previously getting a <code>InputMismatchException</code></p>\n<p>Also when after inputting a number after the switch the next part of the string appears.</p>\n"},{"tags":["java","json","serialization","enums","jackson"],"comments":[{"owner":{"account_id":8011176,"reputation":4010,"user_id":6042824,"accept_rate":94,"display_name":"Bilesh Ganguly"},"score":0,"creation_date":1465990183,"post_id":37833557,"comment_id":63129426,"body_markdown":"My jab at an annotation free implementation. Do reply. http://pastebin.com/raw/Mvf9Ygq1","body":"My jab at an annotation free implementation. Do reply. <a href=\"http://pastebin.com/raw/Mvf9Ygq1\" rel=\"nofollow noreferrer\">pastebin.com/raw/Mvf9Ygq1</a>"},{"owner":{"account_id":135385,"reputation":1785,"user_id":457589,"display_name":"Julien"},"score":8,"creation_date":1492677364,"post_id":37833557,"comment_id":74082023,"body_markdown":"`ON = 0`, `OFF = 1`, does NOT look like a friendly thing IMHO ... just saying ;-)","body":"<code>ON = 0</code>, <code>OFF = 1</code>, does NOT look like a friendly thing IMHO ... just saying ;-)"},{"owner":{"account_id":4038832,"reputation":11673,"user_id":3322273,"accept_rate":73,"display_name":"SomethingSomething"},"score":3,"creation_date":1619519703,"post_id":37833557,"comment_id":118924369,"body_markdown":"@Julien it took me 4 years, but I&#39;ve finally taken your advice and fixed it :P","body":"@Julien it took me 4 years, but I&#39;ve finally taken your advice and fixed it :P"}],"answers":[{"comments":[{"owner":{"account_id":4038832,"reputation":11673,"user_id":3322273,"accept_rate":73,"display_name":"SomethingSomething"},"score":0,"creation_date":1465989144,"post_id":37833695,"comment_id":63128691,"body_markdown":"I like this workaround. I&#39;ll wait for other answers, as there might be more elegant ways to do it","body":"I like this workaround. I&#39;ll wait for other answers, as there might be more elegant ways to do it"},{"owner":{"account_id":5694623,"reputation":6528,"user_id":4501480,"accept_rate":55,"display_name":"Vikrant Kashyap"},"score":0,"creation_date":1465990622,"post_id":37833695,"comment_id":63129777,"body_markdown":"@TomC your first line of code will prone to a compile time error because of argument (last) is integer in actual argument while Constructor having enum type actually .. Thank yo","body":"@TomC your first line of code will prone to a compile time error because of argument (last) is integer in actual argument while Constructor having enum type actually .. Thank yo"},{"owner":{"account_id":3495915,"reputation":804,"user_id":2924138,"accept_rate":92,"display_name":"Tom C"},"score":0,"creation_date":1465991002,"post_id":37833695,"comment_id":63130108,"body_markdown":"@VikrantKashyap I specifically stated in my answer that that the constructor would have to be changed from a type of `State` to `int`\n\nSee: _change your constructor to accept an `int` instead of `State`_","body":"@VikrantKashyap I specifically stated in my answer that that the constructor would have to be changed from a type of <code>State</code> to <code>int</code>  See: <i>change your constructor to accept an <code>int</code> instead of <code>State</code></i>"}],"tags":[],"owner":{"account_id":3495915,"reputation":804,"user_id":2924138,"accept_rate":92,"display_name":"Tom C"},"comment_count":3,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1619519841,"creation_date":1465988888,"answer_id":37833695,"question_id":37833557,"body_markdown":"If you want to print the ordinal of the enum you can change your constructor to accept an `int` instead of `State` and then in your call to `Machine` you can structure it in the following way:\r\n\r\n`Machine m = new Machine(&quot;Machine 1&quot;, 8, State.OFF.ordinal());`\r\n\r\nThis will get the enum ordinal value of the passed in state and print the following\r\n\r\n`{name=&#39;Machine 1&#39;, numCores=8, state=0}`\r\n","title":"Jackson: Serialize and deserialize enum values as integers","body":"<p>If you want to print the ordinal of the enum you can change your constructor to accept an <code>int</code> instead of <code>State</code> and then in your call to <code>Machine</code> you can structure it in the following way:</p>\n<p><code>Machine m = new Machine(&quot;Machine 1&quot;, 8, State.OFF.ordinal());</code></p>\n<p>This will get the enum ordinal value of the passed in state and print the following</p>\n<p><code>{name='Machine 1', numCores=8, state=0}</code></p>\n"},{"tags":[],"owner":{"account_id":3063445,"reputation":3948,"user_id":2595658,"accept_rate":64,"display_name":"Paco Abato"},"comment_count":0,"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1465989548,"creation_date":1465989041,"answer_id":37833755,"question_id":37833557,"body_markdown":"For completion I post another way: custom serializer:\r\n\r\n    public class StateSerializer extends JsonSerializer&lt;State&gt; {  \r\n        public void serialize(State value, JsonGenerator generator, SerializerProvider provider) throws IOException, JsonProcessingException {\r\n            generator.writeStartObject();\r\n            generator.writeFieldName(&quot;id&quot;);\r\n            generator.writeNumber(value.getId());\r\n            generator.writeEndObject();\r\n        }\r\n    }\r\n\r\n    @JsonSerialize(using = StateSerializer.class)\r\n    public enum State { \r\n        ...\r\n        public int getId(){...}\r\n    }","title":"Jackson: Serialize and deserialize enum values as integers","body":"<p>For completion I post another way: custom serializer:</p>\n\n<pre><code>public class StateSerializer extends JsonSerializer&lt;State&gt; {  \n    public void serialize(State value, JsonGenerator generator, SerializerProvider provider) throws IOException, JsonProcessingException {\n        generator.writeStartObject();\n        generator.writeFieldName(\"id\");\n        generator.writeNumber(value.getId());\n        generator.writeEndObject();\n    }\n}\n\n@JsonSerialize(using = StateSerializer.class)\npublic enum State { \n    ...\n    public int getId(){...}\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":231391,"reputation":6221,"user_id":495598,"display_name":"Manu Manjunath"},"score":2,"creation_date":1465990116,"post_id":37833901,"comment_id":63129384,"body_markdown":"In fact, if you put a debug statement on `toValue()` method above, you&#39;ll notice that Jackson makes as many calls to `toValue()` as many ENUM values are.","body":"In fact, if you put a debug statement on <code>toValue()</code> method above, you&#39;ll notice that Jackson makes as many calls to <code>toValue()</code> as many ENUM values are."},{"owner":{"account_id":4888255,"reputation":4312,"user_id":3940047,"accept_rate":80,"display_name":"Pavan Kumar"},"score":2,"creation_date":1519199749,"post_id":37833901,"comment_id":84806629,"body_markdown":"This solution works only if we are dealing with enum ordinals. If enums have an integer field, `@JsonValue` fails to work and we need to declare a static method with `@JsonCreator` annotation to resolve the appropriate enum. Here is an open bug for the same - https://github.com/FasterXML/jackson-databind/issues/1850","body":"This solution works only if we are dealing with enum ordinals. If enums have an integer field, <code>@JsonValue</code> fails to work and we need to declare a static method with <code>@JsonCreator</code> annotation to resolve the appropriate enum. Here is an open bug for the same - <a href=\"https://github.com/FasterXML/jackson-databind/issues/1850\" rel=\"nofollow noreferrer\">github.com/FasterXML/jackson-databind/issues/1850</a>"},{"owner":{"account_id":1311303,"reputation":254,"user_id":1259255,"display_name":"Valera Dubrava"},"score":1,"creation_date":1561801545,"post_id":37833901,"comment_id":100186547,"body_markdown":"Also it&#39;s possible to use Mixin for Enum, e.g. `interface EnumMixin { @JsonValue int ordinal(); }` - do not forget to register it in object mapper.","body":"Also it&#39;s possible to use Mixin for Enum, e.g. <code>interface EnumMixin { @JsonValue int ordinal(); }</code> - do not forget to register it in object mapper."}],"tags":[],"owner":{"account_id":460481,"reputation":5813,"user_id":861594,"display_name":"user861594"},"comment_count":3,"down_vote_count":1,"up_vote_count":91,"is_accepted":true,"score":90,"last_activity_date":1619519789,"creation_date":1465989401,"answer_id":37833901,"question_id":37833557,"body_markdown":"It should work by specifying `JsonValue` mapper. \r\n\r\n    public enum State {\r\n        OFF,\r\n        ON,\r\n        UNKNOWN;\r\n\r\n        @JsonValue\r\n        public int toValue() {\r\n            return ordinal();\r\n        }\r\n    }  \r\n\r\nThis works for deserialization also, as noted in Javadoc of `@JsonValue` annotation:\r\n\r\n&gt; NOTE: when use for Java enums, one additional feature is that value\r\n&gt; returned by annotated method is also considered to be the value to\r\n&gt; deserialize from, not just JSON String to serialize as. This is\r\n&gt; possible since set of Enum values is constant and it is possible to\r\n&gt; define mapping, but can not be done in general for POJO types; as\r\n&gt; such, this is not used for POJO deserialization","title":"Jackson: Serialize and deserialize enum values as integers","body":"<p>It should work by specifying <code>JsonValue</code> mapper.</p>\n<pre><code>public enum State {\n    OFF,\n    ON,\n    UNKNOWN;\n\n    @JsonValue\n    public int toValue() {\n        return ordinal();\n    }\n}  \n</code></pre>\n<p>This works for deserialization also, as noted in Javadoc of <code>@JsonValue</code> annotation:</p>\n<blockquote>\n<p>NOTE: when use for Java enums, one additional feature is that value\nreturned by annotated method is also considered to be the value to\ndeserialize from, not just JSON String to serialize as. This is\npossible since set of Enum values is constant and it is possible to\ndefine mapping, but can not be done in general for POJO types; as\nsuch, this is not used for POJO deserialization</p>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":3035191,"reputation":135,"user_id":2573467,"display_name":"OverMind"},"score":0,"creation_date":1578579093,"post_id":43781406,"comment_id":105490481,"body_markdown":"Excellent. This should be the accepted answer, less intrusive","body":"Excellent. This should be the accepted answer, less intrusive"},{"owner":{"account_id":3234420,"reputation":3542,"user_id":2728956,"accept_rate":66,"display_name":"Vadim Kirilchuk"},"score":4,"creation_date":1594197664,"post_id":43781406,"comment_id":111039012,"body_markdown":"It is more intrusive as affects ALL enums serialized by that ObjectMapper, so you lose ability to control it yourself...","body":"It is more intrusive as affects ALL enums serialized by that ObjectMapper, so you lose ability to control it yourself..."},{"owner":{"account_id":5601867,"reputation":193,"user_id":4528551,"accept_rate":77,"display_name":"SpaceNet"},"score":0,"creation_date":1665659073,"post_id":43781406,"comment_id":130753799,"body_markdown":"do I need @JsonSerialize at enum file?","body":"do I need @JsonSerialize at enum file?"}],"tags":[],"owner":{"account_id":1408651,"reputation":1395,"user_id":1335717,"accept_rate":70,"display_name":"Martin"},"comment_count":3,"down_vote_count":0,"up_vote_count":26,"is_accepted":false,"score":26,"last_activity_date":1493896972,"creation_date":1493896682,"answer_id":43781406,"question_id":37833557,"body_markdown":"You can use setting \r\n\r\n    objectMapper.enable(SerializationFeature.WRITE_ENUMS_USING_INDEX);\r\n\r\nSee https://github.com/FasterXML/jackson-databind/blob/master/src/test/java/com/fasterxml/jackson/databind/ser/TestEnumSerialization.java for complete test cases\r\n\r\nThanks to tip at https://righele.it/2016/01/30/jackson-deserialization-from-json-to-java-enums/","title":"Jackson: Serialize and deserialize enum values as integers","body":"<p>You can use setting </p>\n\n<pre><code>objectMapper.enable(SerializationFeature.WRITE_ENUMS_USING_INDEX);\n</code></pre>\n\n<p>See <a href=\"https://github.com/FasterXML/jackson-databind/blob/master/src/test/java/com/fasterxml/jackson/databind/ser/TestEnumSerialization.java\" rel=\"noreferrer\">https://github.com/FasterXML/jackson-databind/blob/master/src/test/java/com/fasterxml/jackson/databind/ser/TestEnumSerialization.java</a> for complete test cases</p>\n\n<p>Thanks to tip at <a href=\"https://righele.it/2016/01/30/jackson-deserialization-from-json-to-java-enums/\" rel=\"noreferrer\">https://righele.it/2016/01/30/jackson-deserialization-from-json-to-java-enums/</a></p>\n"},{"comments":[{"owner":{"account_id":4038832,"reputation":11673,"user_id":3322273,"accept_rate":73,"display_name":"SomethingSomething"},"score":1,"creation_date":1536231522,"post_id":52201603,"comment_id":91353901,"body_markdown":"It may work, but this also requires you to write `@JsonProperty` before each enum item and maintain the ordinal numbers by yourself. Implementing a method that just returns the ordinal, turns to be a much better practice and much more robust.","body":"It may work, but this also requires you to write <code>@JsonProperty</code> before each enum item and maintain the ordinal numbers by yourself. Implementing a method that just returns the ordinal, turns to be a much better practice and much more robust."},{"owner":{"account_id":2563377,"reputation":7174,"user_id":2224047,"display_name":"Nikolai  Shevchenko"},"score":2,"creation_date":1536241138,"post_id":52201603,"comment_id":91359852,"body_markdown":"@SomethingSomething from the other hand placing a new enum value between, say, *OFF* and *UNKNOWN* (or deleting existing one) will break the ordinal-based behavior, so maintenance will be required anyway","body":"@SomethingSomething from the other hand placing a new enum value between, say, <i>OFF</i> and <i>UNKNOWN</i> (or deleting existing one) will break the ordinal-based behavior, so maintenance will be required anyway"},{"owner":{"account_id":4038832,"reputation":11673,"user_id":3322273,"accept_rate":73,"display_name":"SomethingSomething"},"score":0,"creation_date":1536244895,"post_id":52201603,"comment_id":91362413,"body_markdown":"That&#39;s right. Agreed that your answer is worth being posted","body":"That&#39;s right. Agreed that your answer is worth being posted"}],"tags":[],"owner":{"account_id":2563377,"reputation":7174,"user_id":2224047,"display_name":"Nikolai  Shevchenko"},"comment_count":3,"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1619519822,"creation_date":1536228290,"answer_id":52201603,"question_id":37833557,"body_markdown":"Yet another way: \r\n\r\n    public enum State {\r\n    \r\n        @JsonProperty(&quot;0&quot;)\r\n        OFF,\r\n\r\n        @JsonProperty(&quot;1&quot;)\r\n        ON,\r\n\r\n        @JsonProperty(&quot;2&quot;)\r\n        UNKNOWN\r\n    }\r\n\r\nHowever, this will produce `{&quot;state&quot; : &quot;1&quot;}` instead of `{&quot;state&quot; : 1}` (string, not numeric). In most cases it&#39;s OK","title":"Jackson: Serialize and deserialize enum values as integers","body":"<p>Yet another way:</p>\n<pre><code>public enum State {\n\n    @JsonProperty(&quot;0&quot;)\n    OFF,\n\n    @JsonProperty(&quot;1&quot;)\n    ON,\n\n    @JsonProperty(&quot;2&quot;)\n    UNKNOWN\n}\n</code></pre>\n<p>However, this will produce <code>{&quot;state&quot; : &quot;1&quot;}</code> instead of <code>{&quot;state&quot; : 1}</code> (string, not numeric). In most cases it's OK</p>\n"},{"tags":[],"owner":{"account_id":13045395,"reputation":2899,"user_id":9427395,"display_name":"dasunse"},"comment_count":0,"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1619519802,"creation_date":1558668645,"answer_id":56285491,"question_id":37833557,"body_markdown":"You can use in this way\r\n\r\n    import com.fasterxml.jackson.annotation.JsonFormat;\r\n\r\n    @JsonFormat(shape = JsonFormat.Shape.NUMBER)\r\n    public enum State {\r\n           OFF,\r\n           ON,\r\n           UNKNOWN\r\n    }\r\n\r\n","title":"Jackson: Serialize and deserialize enum values as integers","body":"<p>You can use in this way</p>\n<pre><code>import com.fasterxml.jackson.annotation.JsonFormat;\n\n@JsonFormat(shape = JsonFormat.Shape.NUMBER)\npublic enum State {\n       OFF,\n       ON,\n       UNKNOWN\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":148507,"reputation":1161,"user_id":360327,"accept_rate":67,"display_name":"Udayaditya Barua"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658162788,"creation_date":1658162788,"answer_id":73025842,"question_id":37833557,"body_markdown":"    \r\nFor integer enums, in kotlin, this works well. In java as well. If you don&#39;t want to use ordinals. \r\n\r\n    enum class State(@get:JsonValue val state: Int) {\r\n              OFF(0),\r\n              ON(1),\r\n              UNKNOWN(-1)\r\n    }\r\n\r\nByte code generated is:\r\n\r\n    @JsonValue\r\n    public final int getState() {\r\n      return this.state;\r\n   }","title":"Jackson: Serialize and deserialize enum values as integers","body":"<p>For integer enums, in kotlin, this works well. In java as well. If you don't want to use ordinals.</p>\n<pre><code>enum class State(@get:JsonValue val state: Int) {\n          OFF(0),\n          ON(1),\n          UNKNOWN(-1)\n}\n</code></pre>\n<p>Byte code generated is:</p>\n<pre><code>@JsonValue\npublic final int getState() {\n  return this.state;\n</code></pre>\n<p>}</p>\n"},{"tags":[],"owner":{"account_id":28445630,"reputation":1,"user_id":21764376,"display_name":"J&#252;ri Raidma"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695235351,"creation_date":1695126925,"answer_id":77134610,"question_id":37833557,"body_markdown":"I had autogenerated enum classes, and could not add `@JsonValue` (or `@XmlValue`).\r\nI resolved this with custom serialize method, where I added:\r\n\r\n```\r\nobjectMapper.enable(SerializationFeature.WRITE_ENUMS_USING_TO_STRING);\r\n```\r\n\r\nComplete method was like this, for example:\r\n```\r\nprivate static ObjectMapper createXmlMapper() {\r\n  ObjectMapper objectMapper = new XmlMapper();\r\n  objectMapper.registerModule(new JaxbAnnotationModule());\r\n  JacksonXmlModule xmlModule = new JacksonXmlModule();\r\n  xmlModule.setDefaultUseWrapper(false);\r\n  objectMapper.registerModule(xmlModule);\r\n  objectMapper.disable(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS);\r\n  objectMapper.enable(SerializationFeature.WRITE_ENUMS_USING_TO_STRING);  // to overcome jackson enum serialization issue, where enum name is returned instead of value\r\n  objectMapper.registerModule(new JavaTimeModule());\r\n  return objectMapper;\r\n}\r\n\r\n// Method to serialize object to XML using XmlMapper\r\npublic static String serializeToXml(Object object) throws JsonProcessingException {\r\n  ObjectMapper objectMapper = createXmlMapper();\r\n  return objectMapper.writeValueAsString(object);\r\n}\r\n```","title":"Jackson: Serialize and deserialize enum values as integers","body":"<p>I had autogenerated enum classes, and could not add <code>@JsonValue</code> (or <code>@XmlValue</code>).\nI resolved this with custom serialize method, where I added:</p>\n<pre><code>objectMapper.enable(SerializationFeature.WRITE_ENUMS_USING_TO_STRING);\n</code></pre>\n<p>Complete method was like this, for example:</p>\n<pre><code>private static ObjectMapper createXmlMapper() {\n  ObjectMapper objectMapper = new XmlMapper();\n  objectMapper.registerModule(new JaxbAnnotationModule());\n  JacksonXmlModule xmlModule = new JacksonXmlModule();\n  xmlModule.setDefaultUseWrapper(false);\n  objectMapper.registerModule(xmlModule);\n  objectMapper.disable(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS);\n  objectMapper.enable(SerializationFeature.WRITE_ENUMS_USING_TO_STRING);  // to overcome jackson enum serialization issue, where enum name is returned instead of value\n  objectMapper.registerModule(new JavaTimeModule());\n  return objectMapper;\n}\n\n// Method to serialize object to XML using XmlMapper\npublic static String serializeToXml(Object object) throws JsonProcessingException {\n  ObjectMapper objectMapper = createXmlMapper();\n  return objectMapper.writeValueAsString(object);\n}\n</code></pre>\n"}],"owner":{"account_id":4038832,"reputation":11673,"user_id":3322273,"accept_rate":73,"display_name":"SomethingSomething"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58281,"favorite_count":0,"down_vote_count":0,"up_vote_count":49,"accepted_answer_id":37833901,"answer_count":8,"score":49,"last_activity_date":1695235351,"creation_date":1465988499,"question_id":37833557,"body_markdown":"Consider the following enum and class:\r\n\r\n    public enum State {\r\n        OFF,\r\n        ON,\r\n        UNKNOWN\r\n    }\r\n\r\n    public class Machine {\r\n        String name;\r\n        int numCores;\r\n        State state;\r\n\r\n        public Machine(String name, int numCores, State state) {\r\n            this.name = name;\r\n            this.numCores = numCores;\r\n            this.state = state;\r\n        }\r\n    }\r\n\r\n\r\nAnd consider the following main function:\r\n\r\n\r\n    public static void main(String args[]) {\r\n        Machine m = new Machine(&quot;Machine 1&quot;, 8, State.OFF);\r\n        ObjectMapper mapper = new ObjectMapper();\r\n        String machineAsJsonString = mapper.writeValueAsString(m);\r\n        System.out.println(machineAsJsonString);\r\n    }\r\n\r\nCurrently, the output of this main is:\r\n\r\n    {&quot;name&quot; : &quot;Machine 1&quot;, &quot;numCores&quot; : 8, &quot;state&quot; : &quot;OFF&quot;}\r\n\r\n\r\nThis output is not good for me, as instead of the string `&quot;OFF&quot;` for `state`, I would like it to be `0`, which is the ordinal value of `OFF` in the enum `State`. \r\n\r\n**So the actual result I want to get is:**\r\n\r\n    {&quot;name&quot; : &quot;Machine 1&quot;, &quot;numCores&quot; : 8, &quot;state&quot; : 0}\r\n\r\n\r\n\r\nIs there some elegant way to make it behave this way?","title":"Jackson: Serialize and deserialize enum values as integers","body":"<p>Consider the following enum and class:</p>\n<pre><code>public enum State {\n    OFF,\n    ON,\n    UNKNOWN\n}\n\npublic class Machine {\n    String name;\n    int numCores;\n    State state;\n\n    public Machine(String name, int numCores, State state) {\n        this.name = name;\n        this.numCores = numCores;\n        this.state = state;\n    }\n}\n</code></pre>\n<p>And consider the following main function:</p>\n<pre><code>public static void main(String args[]) {\n    Machine m = new Machine(&quot;Machine 1&quot;, 8, State.OFF);\n    ObjectMapper mapper = new ObjectMapper();\n    String machineAsJsonString = mapper.writeValueAsString(m);\n    System.out.println(machineAsJsonString);\n}\n</code></pre>\n<p>Currently, the output of this main is:</p>\n<pre><code>{&quot;name&quot; : &quot;Machine 1&quot;, &quot;numCores&quot; : 8, &quot;state&quot; : &quot;OFF&quot;}\n</code></pre>\n<p>This output is not good for me, as instead of the string <code>&quot;OFF&quot;</code> for <code>state</code>, I would like it to be <code>0</code>, which is the ordinal value of <code>OFF</code> in the enum <code>State</code>.</p>\n<p><strong>So the actual result I want to get is:</strong></p>\n<pre><code>{&quot;name&quot; : &quot;Machine 1&quot;, &quot;numCores&quot; : 8, &quot;state&quot; : 0}\n</code></pre>\n<p>Is there some elegant way to make it behave this way?</p>\n"},{"tags":["javascript","java","android","react-native"],"owner":{"account_id":20859297,"reputation":1,"user_id":15321895,"display_name":"Pablo Cabrera"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695234709,"creation_date":1695234642,"question_id":77145149,"body_markdown":"I am launching a native intent from Java and I need to catch if the user saves or cancel  a configuration made before inside the java code so I could send back the corresponding response to my React Native module.\r\n\r\nI am running the native intent `ACTION_WIFI_ADD_NETWORKS` but I don&#39;t know how to catch if the user press the `save` or `cancel` button in this code.\r\n\r\nmy module code:\r\n\r\n```java\r\npublic class MyConnection extends ReactContextBaseJavaModule {\r\n    private Context reactContext;\r\n\r\n    public MYConnection(ReactApplicationContext reactContext) {\r\n            super(reactContext);\r\n        this.reactContext = reactContext;\r\n        reactContext.startActivityForResult(intent, REQUEST_CODE);\r\n        this.connectivityManager = (ConnectivityManager)reactContext.getSystemService(reactContext.CONNECTIVITY_SERVICE);\r\n    }\r\n\r\n    @Override\r\n    public String getName() {\r\n        return &quot;AndroidConnection&quot;;\r\n    }\r\n\r\n    @ReactMethod\r\n    public void connect(String ssid,String userName, String passWord, boolean isHidden, Promise promise) {\r\n        try\r\n        {\r\n          // I Config a Wifi network to save the this code\r\n          \r\n          int status = wifiManager.addNetworkSuggestions(suggestionsList);\r\n          if (status == WifiManager.STATUS_NETWORK_SUGGESTIONS_SUCCESS) {\r\n            Bundle bundle = new Bundle();\r\n            bundle.putParcelableArrayList(EXTRA_WIFI_NETWORK_LIST,(ArrayList&lt;? extends\r\n              Parcelable&gt;) suggestionsList);\r\n            final Intent intent = new Intent(ACTION_WIFI_ADD_NETWORKS);\r\n            intent.putExtras(bundle);\r\n            intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\r\n            // I have try startActivityForResult but is not working cause reactContext does not have hat function\r\n            // this.reactContext.startActivityForResult(intent, REQUEST_CODE);\r\n            this.reactContext.startActivity(intent);\r\n\r\n            // here is where i want to check if user save or cancel to do different actions on my react native module\r\n            promise.resolve(&quot;success&quot;);\r\n          } else {\r\n            promise.reject(&quot;Error creating&quot;, &quot;Failed to add network suggestion&quot;);\r\n          }\r\n        } catch(e) {\r\n          promise.reject(&quot;Error creating&quot;, e.message);\r\n        }\r\n}\r\n```","title":"How to get user response from a native java module on react native?","body":"<p>I am launching a native intent from Java and I need to catch if the user saves or cancel  a configuration made before inside the java code so I could send back the corresponding response to my React Native module.</p>\n<p>I am running the native intent <code>ACTION_WIFI_ADD_NETWORKS</code> but I don't know how to catch if the user press the <code>save</code> or <code>cancel</code> button in this code.</p>\n<p>my module code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class MyConnection extends ReactContextBaseJavaModule {\n    private Context reactContext;\n\n    public MYConnection(ReactApplicationContext reactContext) {\n            super(reactContext);\n        this.reactContext = reactContext;\n        reactContext.startActivityForResult(intent, REQUEST_CODE);\n        this.connectivityManager = (ConnectivityManager)reactContext.getSystemService(reactContext.CONNECTIVITY_SERVICE);\n    }\n\n    @Override\n    public String getName() {\n        return &quot;AndroidConnection&quot;;\n    }\n\n    @ReactMethod\n    public void connect(String ssid,String userName, String passWord, boolean isHidden, Promise promise) {\n        try\n        {\n          // I Config a Wifi network to save the this code\n          \n          int status = wifiManager.addNetworkSuggestions(suggestionsList);\n          if (status == WifiManager.STATUS_NETWORK_SUGGESTIONS_SUCCESS) {\n            Bundle bundle = new Bundle();\n            bundle.putParcelableArrayList(EXTRA_WIFI_NETWORK_LIST,(ArrayList&lt;? extends\n              Parcelable&gt;) suggestionsList);\n            final Intent intent = new Intent(ACTION_WIFI_ADD_NETWORKS);\n            intent.putExtras(bundle);\n            intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\n            // I have try startActivityForResult but is not working cause reactContext does not have hat function\n            // this.reactContext.startActivityForResult(intent, REQUEST_CODE);\n            this.reactContext.startActivity(intent);\n\n            // here is where i want to check if user save or cancel to do different actions on my react native module\n            promise.resolve(&quot;success&quot;);\n          } else {\n            promise.reject(&quot;Error creating&quot;, &quot;Failed to add network suggestion&quot;);\n          }\n        } catch(e) {\n          promise.reject(&quot;Error creating&quot;, e.message);\n        }\n}\n</code></pre>\n"},{"tags":["java","spring","maven","querydsl"],"answers":[{"tags":[],"owner":{"account_id":7602721,"reputation":410,"user_id":5766691,"display_name":"Zaphod Beeblebrox"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695233539,"creation_date":1695233539,"answer_id":77145033,"question_id":74945512,"body_markdown":"Maybe my reply comes a bit late, but your post is still unanswered, so hopefully we may help someone else.\r\n\r\nWhile researching exactly the same problem I found the solution here: https://github.com/querydsl/querydsl/issues/3422\r\n\r\n=&gt; delete the apt-maven-plugin from your pom.xml","title":"Querydsl Spring 3 compilation problems","body":"<p>Maybe my reply comes a bit late, but your post is still unanswered, so hopefully we may help someone else.</p>\n<p>While researching exactly the same problem I found the solution here: <a href=\"https://github.com/querydsl/querydsl/issues/3422\" rel=\"nofollow noreferrer\">https://github.com/querydsl/querydsl/issues/3422</a></p>\n<p>=&gt; delete the apt-maven-plugin from your pom.xml</p>\n"}],"owner":{"account_id":27377714,"reputation":41,"user_id":20882776,"display_name":"pwaw"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":379,"favorite_count":0,"down_vote_count":1,"up_vote_count":4,"answer_count":1,"score":3,"last_activity_date":1695233539,"creation_date":1672266105,"question_id":74945512,"body_markdown":"When I am trying to build my project I get &quot;Compilation failure\r\n[ERROR] Attempt to recreate a file for type NoteApp.Repository.Entities.QNote\r\n&quot; error. My code is generating Qclass as expected, but I can&#39;t make it work past it. \r\n\r\nMy pom file \r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n   xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n   &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n   &lt;parent&gt;\r\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n      &lt;version&gt;3.0.1&lt;/version&gt;\r\n      &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n   &lt;/parent&gt;\r\n\r\n   &lt;groupId&gt;pl.wawrzyniak&lt;/groupId&gt;\r\n   &lt;artifactId&gt;NoteApp&lt;/artifactId&gt;\r\n   &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n   &lt;name&gt;NoteApp&lt;/name&gt;\r\n   &lt;description&gt;Simple note app for CV&lt;/description&gt;\r\n   &lt;properties&gt;\r\n      &lt;java.version&gt;17&lt;/java.version&gt;\r\n   &lt;/properties&gt;\r\n   &lt;dependencies&gt;\r\n      &lt;dependency&gt;\r\n         &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n         &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n      &lt;/dependency&gt;\r\n      &lt;dependency&gt;\r\n         &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n         &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n      &lt;/dependency&gt;\r\n\r\n      &lt;dependency&gt;\r\n         &lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n         &lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n         &lt;scope&gt;runtime&lt;/scope&gt;\r\n      &lt;/dependency&gt;\r\n\r\n      &lt;dependency&gt;\r\n         &lt;groupId&gt;com.querydsl&lt;/groupId&gt;\r\n         &lt;artifactId&gt;querydsl-apt&lt;/artifactId&gt;\r\n         &lt;version&gt;5.0.0&lt;/version&gt;\r\n         &lt;scope&gt;provided&lt;/scope&gt;\r\n         &lt;classifier&gt;jakarta&lt;/classifier&gt;\r\n      &lt;/dependency&gt;\r\n      &lt;dependency&gt;\r\n         &lt;groupId&gt;com.querydsl&lt;/groupId&gt;\r\n         &lt;artifactId&gt;querydsl-jpa&lt;/artifactId&gt;\r\n         &lt;version&gt;5.0.0&lt;/version&gt;\r\n         &lt;classifier&gt;jakarta&lt;/classifier&gt;\r\n      &lt;/dependency&gt;\r\n\r\n      &lt;dependency&gt;\r\n         &lt;groupId&gt;org.modelmapper&lt;/groupId&gt;\r\n         &lt;artifactId&gt;modelmapper&lt;/artifactId&gt;\r\n         &lt;version&gt;3.1.1&lt;/version&gt;\r\n      &lt;/dependency&gt;\r\n\r\n      &lt;dependency&gt;\r\n         &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n         &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n         &lt;optional&gt;true&lt;/optional&gt;\r\n      &lt;/dependency&gt;\r\n      &lt;dependency&gt;\r\n         &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n         &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n         &lt;scope&gt;test&lt;/scope&gt;\r\n      &lt;/dependency&gt;\r\n   &lt;/dependencies&gt;\r\n\r\n   &lt;build&gt;\r\n      &lt;plugins&gt;\r\n         &lt;plugin&gt;\r\n            &lt;groupId&gt;com.mysema.maven&lt;/groupId&gt;\r\n            &lt;artifactId&gt;apt-maven-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;1.1.3&lt;/version&gt;\r\n            &lt;executions&gt;\r\n               &lt;execution&gt;\r\n                  &lt;goals&gt;\r\n                     &lt;goal&gt;process&lt;/goal&gt;\r\n                  &lt;/goals&gt;\r\n                  &lt;configuration&gt;\r\n                     &lt;outputDirectory&gt;target/generated-sources/java&lt;/outputDirectory&gt;\r\n                     &lt;processor&gt;com.querydsl.apt.jpa.JPAAnnotationProcessor&lt;/processor&gt;\r\n                  &lt;/configuration&gt;\r\n               &lt;/execution&gt;\r\n            &lt;/executions&gt;\r\n         &lt;/plugin&gt;\r\n\r\n         &lt;plugin&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n            &lt;configuration&gt;\r\n               &lt;excludes&gt;\r\n                  &lt;exclude&gt;\r\n                     &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n                     &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n                  &lt;/exclude&gt;\r\n               &lt;/excludes&gt;\r\n            &lt;/configuration&gt;\r\n         &lt;/plugin&gt;\r\n\r\n      &lt;/plugins&gt;\r\n   &lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n\r\n```\r\n\r\n\r\nIs it something with my code? Or just problems with Spring 3 working with Querydsl?\r\n\r\nI don&#39;t know what else i can try, sometimes my project is building and compiling till the end, but only when QClasses are not generated at all (which is to expect when there is some problem with recreating them).","title":"Querydsl Spring 3 compilation problems","body":"<p>When I am trying to build my project I get &quot;Compilation failure\n[ERROR] Attempt to recreate a file for type NoteApp.Repository.Entities.QNote\n&quot; error. My code is generating Qclass as expected, but I can't make it work past it.</p>\n<p>My pom file</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n   xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n   &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n   &lt;parent&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n      &lt;version&gt;3.0.1&lt;/version&gt;\n      &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n   &lt;/parent&gt;\n\n   &lt;groupId&gt;pl.wawrzyniak&lt;/groupId&gt;\n   &lt;artifactId&gt;NoteApp&lt;/artifactId&gt;\n   &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n   &lt;name&gt;NoteApp&lt;/name&gt;\n   &lt;description&gt;Simple note app for CV&lt;/description&gt;\n   &lt;properties&gt;\n      &lt;java.version&gt;17&lt;/java.version&gt;\n   &lt;/properties&gt;\n   &lt;dependencies&gt;\n      &lt;dependency&gt;\n         &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n         &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n      &lt;/dependency&gt;\n      &lt;dependency&gt;\n         &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n         &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n      &lt;/dependency&gt;\n\n      &lt;dependency&gt;\n         &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n         &lt;artifactId&gt;h2&lt;/artifactId&gt;\n         &lt;scope&gt;runtime&lt;/scope&gt;\n      &lt;/dependency&gt;\n\n      &lt;dependency&gt;\n         &lt;groupId&gt;com.querydsl&lt;/groupId&gt;\n         &lt;artifactId&gt;querydsl-apt&lt;/artifactId&gt;\n         &lt;version&gt;5.0.0&lt;/version&gt;\n         &lt;scope&gt;provided&lt;/scope&gt;\n         &lt;classifier&gt;jakarta&lt;/classifier&gt;\n      &lt;/dependency&gt;\n      &lt;dependency&gt;\n         &lt;groupId&gt;com.querydsl&lt;/groupId&gt;\n         &lt;artifactId&gt;querydsl-jpa&lt;/artifactId&gt;\n         &lt;version&gt;5.0.0&lt;/version&gt;\n         &lt;classifier&gt;jakarta&lt;/classifier&gt;\n      &lt;/dependency&gt;\n\n      &lt;dependency&gt;\n         &lt;groupId&gt;org.modelmapper&lt;/groupId&gt;\n         &lt;artifactId&gt;modelmapper&lt;/artifactId&gt;\n         &lt;version&gt;3.1.1&lt;/version&gt;\n      &lt;/dependency&gt;\n\n      &lt;dependency&gt;\n         &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n         &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n         &lt;optional&gt;true&lt;/optional&gt;\n      &lt;/dependency&gt;\n      &lt;dependency&gt;\n         &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n         &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n         &lt;scope&gt;test&lt;/scope&gt;\n      &lt;/dependency&gt;\n   &lt;/dependencies&gt;\n\n   &lt;build&gt;\n      &lt;plugins&gt;\n         &lt;plugin&gt;\n            &lt;groupId&gt;com.mysema.maven&lt;/groupId&gt;\n            &lt;artifactId&gt;apt-maven-plugin&lt;/artifactId&gt;\n            &lt;version&gt;1.1.3&lt;/version&gt;\n            &lt;executions&gt;\n               &lt;execution&gt;\n                  &lt;goals&gt;\n                     &lt;goal&gt;process&lt;/goal&gt;\n                  &lt;/goals&gt;\n                  &lt;configuration&gt;\n                     &lt;outputDirectory&gt;target/generated-sources/java&lt;/outputDirectory&gt;\n                     &lt;processor&gt;com.querydsl.apt.jpa.JPAAnnotationProcessor&lt;/processor&gt;\n                  &lt;/configuration&gt;\n               &lt;/execution&gt;\n            &lt;/executions&gt;\n         &lt;/plugin&gt;\n\n         &lt;plugin&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n               &lt;excludes&gt;\n                  &lt;exclude&gt;\n                     &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                     &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                  &lt;/exclude&gt;\n               &lt;/excludes&gt;\n            &lt;/configuration&gt;\n         &lt;/plugin&gt;\n\n      &lt;/plugins&gt;\n   &lt;/build&gt;\n\n&lt;/project&gt;\n\n</code></pre>\n<p>Is it something with my code? Or just problems with Spring 3 working with Querydsl?</p>\n<p>I don't know what else i can try, sometimes my project is building and compiling till the end, but only when QClasses are not generated at all (which is to expect when there is some problem with recreating them).</p>\n"},{"tags":["java","arrays","arraylist","stack"],"comments":[{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":1,"creation_date":1350546870,"post_id":12949690,"comment_id":17553902,"body_markdown":"Do you mean like `remove` and `add`?","body":"Do you mean like <code>remove</code> and <code>add</code>?"},{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1350546960,"post_id":12949690,"comment_id":17553932,"body_markdown":"What are you using your `arraylist stack queue whatever` for as adding to the start of an array is best avoided and it sounds like you should be using a different collection.","body":"What are you using your <code>arraylist stack queue whatever</code> for as adding to the start of an array is best avoided and it sounds like you should be using a different collection."},{"owner":{"account_id":1054452,"reputation":882,"user_id":1057474,"accept_rate":90,"display_name":"Yegoshin Maxim"},"score":0,"creation_date":1350547498,"post_id":12949690,"comment_id":17554171,"body_markdown":"First, you should make something yourself.\nWhat have you done so far?","body":"First, you should make something yourself. What have you done so far?"}],"answers":[{"comments":[{"owner":{"account_id":1039514,"reputation":1970,"user_id":1045902,"accept_rate":100,"display_name":"DPM"},"score":10,"creation_date":1499968101,"post_id":12949719,"comment_id":77147838,"body_markdown":"I wouldn&#39;t touch any apache library with a ten foot pole, especially since guava&#39;s collection classes exist. Guava&#39;s EvictingQueue might be a good choice here.","body":"I wouldn&#39;t touch any apache library with a ten foot pole, especially since guava&#39;s collection classes exist. Guava&#39;s EvictingQueue might be a good choice here."}],"tags":[],"owner":{"account_id":1558798,"reputation":36540,"user_id":1449199,"accept_rate":95,"display_name":"Baz"},"comment_count":1,"down_vote_count":2,"up_vote_count":421,"is_accepted":true,"score":419,"last_activity_date":1476431548,"creation_date":1350546868,"answer_id":12949719,"question_id":12949690,"body_markdown":"`List` has the method [`add(int, E)`](http://docs.oracle.com/javase/7/docs/api/java/util/List.html), so you can use:\r\n\r\n    list.add(0, yourObject);\r\n\r\nAfterwards you can delete the last element with:\r\n\r\n    if(list.size() &gt; 10)\r\n        list.remove(list.size() - 1);\r\n\r\nHowever, you might want to rethink your requirements or use a different data structure, like a [`Queue`](http://docs.oracle.com/javase/7/docs/api/java/util/Queue.html)\r\n\r\n**EDIT**\r\n\r\nMaybe have a look at Apache&#39;s [`CircularFifoQueue`](https://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/queue/CircularFifoQueue.html):\r\n\r\n&gt;`CircularFifoQueue` is a first-in first-out queue with a fixed size that replaces its oldest element if full. \r\n\r\nJust initialize it with you maximum size:\r\n\r\n    CircularFifoQueue queue = new CircularFifoQueue(10);\r\n","title":"Java ArrayList how to add elements at the beginning","body":"<p><code>List</code> has the method <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/List.html\"><code>add(int, E)</code></a>, so you can use:</p>\n\n<pre><code>list.add(0, yourObject);\n</code></pre>\n\n<p>Afterwards you can delete the last element with:</p>\n\n<pre><code>if(list.size() &gt; 10)\n    list.remove(list.size() - 1);\n</code></pre>\n\n<p>However, you might want to rethink your requirements or use a different data structure, like a <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/Queue.html\"><code>Queue</code></a></p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Maybe have a look at Apache's <a href=\"https://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/queue/CircularFifoQueue.html\"><code>CircularFifoQueue</code></a>:</p>\n\n<blockquote>\n  <p><code>CircularFifoQueue</code> is a first-in first-out queue with a fixed size that replaces its oldest element if full. </p>\n</blockquote>\n\n<p>Just initialize it with you maximum size:</p>\n\n<pre><code>CircularFifoQueue queue = new CircularFifoQueue(10);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":88112,"reputation":51921,"user_id":243943,"accept_rate":89,"display_name":"npinti"},"comment_count":0,"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1350547038,"creation_date":1350547038,"answer_id":12949766,"question_id":12949690,"body_markdown":"You can take a look at the [add(int index, E element)][1]:\r\n\r\n&gt; Inserts the specified element at the specified position in this list.\r\n&gt; Shifts the element currently at that position (if any) and any\r\n&gt; subsequent elements to the right (adds one to their indices).\r\n\r\n\r\nOnce you add you can then check the size of the ArrayList and remove the ones at the end.\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html#add%28int,%20E%29","title":"Java ArrayList how to add elements at the beginning","body":"<p>You can take a look at the <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html#add%28int,%20E%29\" rel=\"noreferrer\">add(int index, E element)</a>:</p>\n\n<blockquote>\n  <p>Inserts the specified element at the specified position in this list.\n  Shifts the element currently at that position (if any) and any\n  subsequent elements to the right (adds one to their indices).</p>\n</blockquote>\n\n<p>Once you add you can then check the size of the ArrayList and remove the ones at the end.</p>\n"},{"tags":[],"owner":{"account_id":1853886,"reputation":210617,"user_id":1679863,"accept_rate":77,"display_name":"Rohit Jain"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1350548299,"creation_date":1350547238,"answer_id":12949816,"question_id":12949690,"body_markdown":"What you are describing, is an appropriate situation to use [`Queue`](http://docs.oracle.com/javase/7/docs/api/java/util/Queue.html).\r\n\r\nSince you want to `add` new element, and `remove` the old one. You can add at the end, and remove from the beginning. That will not make much of a difference.\r\n\r\nQueue has methods `add(e)` and `remove()` which adds at the end the new element, and removes from the beginning the old element, respectively.\r\n\r\n    Queue&lt;Integer&gt; queue = new LinkedList&lt;Integer&gt;();\r\n    queue.add(5);\r\n    queue.add(6);\r\n    queue.remove();  // Remove 5\r\n\r\nSo, every time you add an element to the `queue` you can back it up with a `remove` method call.\r\n\r\n\r\n----------\r\n\r\n**UPDATE**: -\r\n\r\nAnd if you want **to fix the size of the `Queue`**, then you can take a look at: - [`ApacheCommons#CircularFifoBuffer`](http://commons.apache.org/collections/apidocs/org/apache/commons/collections/buffer/CircularFifoBuffer.html)\r\n\r\nFrom the [`documentation`](http://commons.apache.org/collections/apidocs/org/apache/commons/collections/buffer/CircularFifoBuffer.html): -\r\n\r\n&gt; CircularFifoBuffer is a first in first out buffer with a fixed size\r\n&gt; that replaces its oldest element if full.\r\n\r\n\r\n    Buffer queue = new CircularFifoBuffer(2); // Max size\r\n    \r\n    queue.add(5);\r\n    queue.add(6);\r\n    queue.add(7);  // Automatically removes the first element `5`\r\n\r\nAs you can see, when the maximum size is reached, then adding new element automatically removes the first element inserted.\r\n","title":"Java ArrayList how to add elements at the beginning","body":"<p>What you are describing, is an appropriate situation to use <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/Queue.html\" rel=\"nofollow\"><code>Queue</code></a>.</p>\n\n<p>Since you want to <code>add</code> new element, and <code>remove</code> the old one. You can add at the end, and remove from the beginning. That will not make much of a difference.</p>\n\n<p>Queue has methods <code>add(e)</code> and <code>remove()</code> which adds at the end the new element, and removes from the beginning the old element, respectively.</p>\n\n<pre><code>Queue&lt;Integer&gt; queue = new LinkedList&lt;Integer&gt;();\nqueue.add(5);\nqueue.add(6);\nqueue.remove();  // Remove 5\n</code></pre>\n\n<p>So, every time you add an element to the <code>queue</code> you can back it up with a <code>remove</code> method call.</p>\n\n<hr>\n\n<p><strong>UPDATE</strong>: -</p>\n\n<p>And if you want <strong>to fix the size of the <code>Queue</code></strong>, then you can take a look at: - <a href=\"http://commons.apache.org/collections/apidocs/org/apache/commons/collections/buffer/CircularFifoBuffer.html\" rel=\"nofollow\"><code>ApacheCommons#CircularFifoBuffer</code></a></p>\n\n<p>From the <a href=\"http://commons.apache.org/collections/apidocs/org/apache/commons/collections/buffer/CircularFifoBuffer.html\" rel=\"nofollow\"><code>documentation</code></a>: -</p>\n\n<blockquote>\n  <p>CircularFifoBuffer is a first in first out buffer with a fixed size\n  that replaces its oldest element if full.</p>\n</blockquote>\n\n<pre><code>Buffer queue = new CircularFifoBuffer(2); // Max size\n\nqueue.add(5);\nqueue.add(6);\nqueue.add(7);  // Automatically removes the first element `5`\n</code></pre>\n\n<p>As you can see, when the maximum size is reached, then adding new element automatically removes the first element inserted.</p>\n"},{"tags":[],"owner":{"account_id":1476987,"reputation":17785,"user_id":1387157,"accept_rate":94,"display_name":"MaVRoSCy"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1350547260,"creation_date":1350547260,"answer_id":12949821,"question_id":12949690,"body_markdown":"you can use this code\r\n\r\n    private List myList = new ArrayList();\r\n    private void addItemToList(Object obj){\r\n        if(myList.size()&lt;10){\r\n          myList.add(0,obj);\r\n        }else{\r\n          myList.add(0,obj);\r\n          myList.remove(10);\r\n        }\r\n    }\r\n\r\n","title":"Java ArrayList how to add elements at the beginning","body":"<p>you can use this code</p>\n\n<pre><code>private List myList = new ArrayList();\nprivate void addItemToList(Object obj){\n    if(myList.size()&lt;10){\n      myList.add(0,obj);\n    }else{\n      myList.add(0,obj);\n      myList.remove(10);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":910157,"reputation":4964,"user_id":944190,"accept_rate":54,"display_name":"a Learner"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1350548138,"creation_date":1350547825,"answer_id":12949970,"question_id":12949690,"body_markdown":"You can use\r\n\r\n    public List&lt;E&gt; addToListStart(List&lt;E&gt; list, E obj){\r\n    list.add(0,obj);\r\n    return (List&lt;E&gt;)list;\r\n    \r\n    }\r\nChange E with your datatype\r\n\r\nIf  deleting the oldest element is necessary then you can add:\r\n\r\n    list.remove(list.size()-1); \r\n\r\nbefore return statement. Otherwise list will add your object at beginning and also retain oldest element.\r\n\r\n\r\nThis will delete last element in list.","title":"Java ArrayList how to add elements at the beginning","body":"<p>You can use</p>\n\n<pre><code>public List&lt;E&gt; addToListStart(List&lt;E&gt; list, E obj){\nlist.add(0,obj);\nreturn (List&lt;E&gt;)list;\n\n}\n</code></pre>\n\n<p>Change E with your datatype</p>\n\n<p>If  deleting the oldest element is necessary then you can add:</p>\n\n<pre><code>list.remove(list.size()-1); \n</code></pre>\n\n<p>before return statement. Otherwise list will add your object at beginning and also retain oldest element.</p>\n\n<p>This will delete last element in list.</p>\n"},{"tags":[],"owner":{"account_id":1213813,"reputation":344,"user_id":1181814,"accept_rate":89,"display_name":"feikiss"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1378893934,"creation_date":1350548594,"answer_id":12950161,"question_id":12949690,"body_markdown":"I think the implement should be easy, but considering about the efficiency, you should use LinkedList but not ArrayList as the container. You can refer to the following code:\r\n\r\n    import java.util.LinkedList;\r\n    import java.util.List;\r\n    \r\n    public class DataContainer {\r\n    \r\n        private List&lt;Integer&gt; list;\r\n        \r\n        int length = 10;\r\n        public void addDataToArrayList(int data){\r\n            list.add(0, data);\r\n            if(list.size()&gt;10){\r\n                list.remove(length);\r\n            }\r\n        }\r\n        \r\n        public static void main(String[] args) {\r\n            DataContainer comp = new DataContainer();\r\n            comp.list = new LinkedList&lt;Integer&gt;();\r\n            \r\n            int cycleCount = 100000000;\r\n            \r\n            for(int i = 0; i &lt; cycleCount; i ++){\r\n                comp.addDataToArrayList(i);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n","title":"Java ArrayList how to add elements at the beginning","body":"<p>I think the implement should be easy, but considering about the efficiency, you should use LinkedList but not ArrayList as the container. You can refer to the following code:</p>\n\n<pre><code>import java.util.LinkedList;\nimport java.util.List;\n\npublic class DataContainer {\n\n    private List&lt;Integer&gt; list;\n\n    int length = 10;\n    public void addDataToArrayList(int data){\n        list.add(0, data);\n        if(list.size()&gt;10){\n            list.remove(length);\n        }\n    }\n\n    public static void main(String[] args) {\n        DataContainer comp = new DataContainer();\n        comp.list = new LinkedList&lt;Integer&gt;();\n\n        int cycleCount = 100000000;\n\n        for(int i = 0; i &lt; cycleCount; i ++){\n            comp.addDataToArrayList(i);\n        }\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":5691667,"reputation":583,"user_id":4924700,"accept_rate":17,"display_name":"Samyak Upadhyay"},"score":0,"creation_date":1499952383,"post_id":28631202,"comment_id":77136665,"body_markdown":"Reversing a list twice. Will it add the run time of the algorithm by a big margin as compared to the above accepted solution?","body":"Reversing a list twice. Will it add the run time of the algorithm by a big margin as compared to the above accepted solution?"},{"owner":{"account_id":405484,"reputation":34324,"user_id":774398,"accept_rate":83,"display_name":"Patrick"},"score":0,"creation_date":1499975264,"post_id":28631202,"comment_id":77151916,"body_markdown":"It adds 2n, so yes, but if you have list of &lt;50 you wouldnt be able to micro benchmark the difference on most modern machines","body":"It adds 2n, so yes, but if you have list of &lt;50 you wouldnt be able to micro benchmark the difference on most modern machines"}],"tags":[],"owner":{"account_id":405484,"reputation":34324,"user_id":774398,"accept_rate":83,"display_name":"Patrick"},"comment_count":2,"down_vote_count":1,"up_vote_count":40,"is_accepted":false,"score":39,"last_activity_date":1512316027,"creation_date":1424442169,"answer_id":28631202,"question_id":12949690,"body_markdown":"## Using Specific Datastructures\r\n\r\nThere are various data structures which are optimized for adding elements at the first index. Mind though, that if you convert your collection to one of these, the conversation will probably need a time and space complexity of `O(n)` \r\n\r\n### Deque\r\n\r\nThe JDK includes the [`Deque`][1] structure which offers methods like [`addFirst(e)`][2] and [`offerFirst(e)`][3]\r\n\r\n    Deque&lt;String&gt; deque = new LinkedList&lt;&gt;();\r\n    deque.add(&quot;two&quot;);\r\n    deque.add(&quot;one&quot;);\r\n    deque.addFirst(&quot;three&quot;);\r\n    //prints &quot;three&quot;, &quot;two&quot;, &quot;one&quot;\r\n\r\n### Analysis\r\n\r\nSpace and time complexity of insertion is with `LinkedList` constant (`O(1)`). See the [Big-O cheatsheet][4].\r\n\r\n## Reversing the List\r\n\r\nA very easy but inefficient method is to use reverse:\r\n\r\n     Collections.reverse(list);\r\n     list.add(elementForTop);\r\n     Collections.reverse(list);\r\n\r\n[If you use Java 8 streams, this answer might interest you.][5]\r\n\r\n### Analysis\r\n\r\n* Time Complexity: `O(n)`\r\n* Space Complexity: `O(1)`\r\n\r\nLooking at the [JDK implementation][6] this has a `O(n)` time complexity so only suitable for very small lists.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/util/Deque.html\r\n  [2]: https://docs.oracle.com/javase/7/docs/api/java/util/Deque.html#addFirst(E)\r\n  [3]: http://offerFirst(e)\r\n  [4]: http://bigocheatsheet.com/\r\n  [5]: https://stackoverflow.com/a/24011264/774398\r\n  [6]: http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/Collections.java#Collections.reverse%28java.util.List%29","title":"Java ArrayList how to add elements at the beginning","body":"<h2>Using Specific Datastructures</h2>\n\n<p>There are various data structures which are optimized for adding elements at the first index. Mind though, that if you convert your collection to one of these, the conversation will probably need a time and space complexity of <code>O(n)</code> </p>\n\n<h3>Deque</h3>\n\n<p>The JDK includes the <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/Deque.html\" rel=\"noreferrer\"><code>Deque</code></a> structure which offers methods like <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/Deque.html#addFirst(E)\" rel=\"noreferrer\"><code>addFirst(e)</code></a> and <a href=\"http://offerFirst(e)\" rel=\"noreferrer\"><code>offerFirst(e)</code></a></p>\n\n<pre><code>Deque&lt;String&gt; deque = new LinkedList&lt;&gt;();\ndeque.add(\"two\");\ndeque.add(\"one\");\ndeque.addFirst(\"three\");\n//prints \"three\", \"two\", \"one\"\n</code></pre>\n\n<h3>Analysis</h3>\n\n<p>Space and time complexity of insertion is with <code>LinkedList</code> constant (<code>O(1)</code>). See the <a href=\"http://bigocheatsheet.com/\" rel=\"noreferrer\">Big-O cheatsheet</a>.</p>\n\n<h2>Reversing the List</h2>\n\n<p>A very easy but inefficient method is to use reverse:</p>\n\n<pre><code> Collections.reverse(list);\n list.add(elementForTop);\n Collections.reverse(list);\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/a/24011264/774398\">If you use Java 8 streams, this answer might interest you.</a></p>\n\n<h3>Analysis</h3>\n\n<ul>\n<li>Time Complexity: <code>O(n)</code></li>\n<li>Space Complexity: <code>O(1)</code></li>\n</ul>\n\n<p>Looking at the <a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/Collections.java#Collections.reverse%28java.util.List%29\" rel=\"noreferrer\">JDK implementation</a> this has a <code>O(n)</code> time complexity so only suitable for very small lists.</p>\n"},{"tags":[],"owner":{"account_id":3961498,"reputation":2173,"user_id":3268354,"display_name":"Mizuki"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1458318295,"creation_date":1458316912,"answer_id":36089004,"question_id":12949690,"body_markdown":"You can use list methods, remove and add\r\n\r\n    list.add(lowestIndex, element);\r\n    list.remove(highestIndex, element);","title":"Java ArrayList how to add elements at the beginning","body":"<p>You can use list methods, remove and add</p>\n\n<pre><code>list.add(lowestIndex, element);\nlist.remove(highestIndex, element);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":7119515,"reputation":6055,"user_id":5444618,"accept_rate":83,"display_name":"Guillaume F."},"score":1,"creation_date":1475482356,"post_id":38124157,"comment_id":66944138,"body_markdown":"I am surprised you are the only answer talking about Deque, this is obviously the best optimal solution.","body":"I am surprised you are the only answer talking about Deque, this is obviously the best optimal solution."}],"tags":[],"owner":{"account_id":107117,"reputation":480,"user_id":973085,"display_name":"Evvo"},"comment_count":1,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1467292247,"creation_date":1467292247,"answer_id":38124157,"question_id":12949690,"body_markdown":"You may want to look at Deque. it gives you direct access to both the first and last items in the list.","title":"Java ArrayList how to add elements at the beginning","body":"<p>You may want to look at Deque. it gives you direct access to both the first and last items in the list.</p>\n"},{"tags":[],"owner":{"account_id":1582132,"reputation":71,"user_id":1467279,"display_name":"thegman121"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1487053094,"creation_date":1487053094,"answer_id":42219171,"question_id":12949690,"body_markdown":"Java LinkedList provides both the addFirst(E e) and the push(E e) method that add an element to the front of the list.\r\n\r\nhttps://docs.oracle.com/javase/7/docs/api/java/util/LinkedList.html#addFirst(E)","title":"Java ArrayList how to add elements at the beginning","body":"<p>Java LinkedList provides both the addFirst(E e) and the push(E e) method that add an element to the front of the list.</p>\n\n<p><a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/LinkedList.html#addFirst(E)\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/7/docs/api/java/util/LinkedList.html#addFirst(E)</a></p>\n"},{"tags":[],"owner":{"account_id":5478630,"reputation":30,"user_id":4355871,"display_name":"FabianUx"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1502300281,"creation_date":1502300281,"answer_id":45597286,"question_id":12949690,"body_markdown":"I had a similar problem, trying to add an element at the beginning of an existing array, shift the existing elements to the right and discard the oldest one (array[length-1]).\r\nMy solution might not be very performant but it works for my purposes.\r\n\r\n     Method:\r\n\r\n       updateArray (Element to insert)\r\n\r\n         - for all the elements of the Array\r\n           - start from the end and replace with the one on the left; \r\n         - Array [0] &lt;- Element\r\n\r\nGood luck","title":"Java ArrayList how to add elements at the beginning","body":"<p>I had a similar problem, trying to add an element at the beginning of an existing array, shift the existing elements to the right and discard the oldest one (array[length-1]).\nMy solution might not be very performant but it works for my purposes.</p>\n\n<pre><code> Method:\n\n   updateArray (Element to insert)\n\n     - for all the elements of the Array\n       - start from the end and replace with the one on the left; \n     - Array [0] &lt;- Element\n</code></pre>\n\n<p>Good luck</p>\n"},{"tags":[],"owner":{"account_id":7416245,"reputation":679,"user_id":5641961,"display_name":"Machhindra Neupane"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1537852938,"creation_date":1537852938,"answer_id":52491082,"question_id":12949690,"body_markdown":"    import java.util.*:\r\n    public class Logic {\r\n      List&lt;String&gt; list = new ArrayList&lt;String&gt;();\r\n      public static void main(String...args) {\r\n      Scanner input = new Scanner(System.in);\r\n        Logic obj = new Logic();\r\n          for (int i=0;i&lt;=20;i++) {\r\n            String string = input.nextLine();\r\n            obj.myLogic(string);\r\n            obj.printList();\r\n          }\r\n     }\r\n     public void myLogic(String strObj) {\r\n       if (this.list.size()&gt;=10) {\r\n          this.list.remove(this.list.size()-1);\r\n       } else {\r\n         list.add(strObj); \r\n       }\r\n     }\r\n     public void printList() {\r\n     System.out.print(this.list);\r\n     }\r\n    }","title":"Java ArrayList how to add elements at the beginning","body":"<pre><code>import java.util.*:\npublic class Logic {\n  List&lt;String&gt; list = new ArrayList&lt;String&gt;();\n  public static void main(String...args) {\n  Scanner input = new Scanner(System.in);\n    Logic obj = new Logic();\n      for (int i=0;i&lt;=20;i++) {\n        String string = input.nextLine();\n        obj.myLogic(string);\n        obj.printList();\n      }\n }\n public void myLogic(String strObj) {\n   if (this.list.size()&gt;=10) {\n      this.list.remove(this.list.size()-1);\n   } else {\n     list.add(strObj); \n   }\n }\n public void printList() {\n System.out.print(this.list);\n }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15378912,"reputation":158,"user_id":11094859,"display_name":"Ashish Mehta"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1591790716,"creation_date":1591790716,"answer_id":62303161,"question_id":12949690,"body_markdown":"Take this example :-\r\n\r\n    List&lt;String&gt; element1 = new ArrayList&lt;&gt;();\r\n    element1.add(&quot;two&quot;);\r\n    element1.add(&quot;three&quot;);\r\n    List&lt;String&gt; element2 = new ArrayList&lt;&gt;();\r\n    element2.add(&quot;one&quot;);\r\n    element2.addAll(element1);","title":"Java ArrayList how to add elements at the beginning","body":"<p>Take this example :-</p>\n\n<pre><code>List&lt;String&gt; element1 = new ArrayList&lt;&gt;();\nelement1.add(\"two\");\nelement1.add(\"three\");\nList&lt;String&gt; element2 = new ArrayList&lt;&gt;();\nelement2.add(\"one\");\nelement2.addAll(element1);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17659919,"reputation":608,"user_id":12818585,"display_name":"Andrea Ciccotta"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1604924426,"creation_date":1604924426,"answer_id":64751552,"question_id":12949690,"body_markdown":"```\r\nimport com.google.common.collect.Lists;\r\n\r\nimport java.util.List;\r\n\r\n/**\r\n * @author Ciccotta Andrea on 06/11/2020.\r\n */\r\npublic class CollectionUtils {\r\n\r\n    /**\r\n     * It models the prepend O(1), used against the common append/add O(n)\r\n     * @param head first element of the list\r\n     * @param body rest of the elements of the list\r\n     * @return new list (with different memory-reference) made by [head, ...body]\r\n     */\r\n    public static &lt;E&gt; List&lt;Object&gt; prepend(final E head, List&lt;E&gt; final body){\r\n        return Lists.asList(head, body.toArray());\r\n    }\r\n\r\n    /**\r\n     * it models the typed version of prepend(E head, List&lt;E&gt; body)\r\n     * @param type the array into which the elements of this list are to be stored\r\n     */\r\n    public static &lt;E&gt; List&lt;E&gt; prepend(final E head, List&lt;E&gt; body, final E[] type){\r\n        return Lists.asList(head, body.toArray(type));\r\n    }\r\n}\r\n```","title":"Java ArrayList how to add elements at the beginning","body":"<pre><code>import com.google.common.collect.Lists;\n\nimport java.util.List;\n\n/**\n * @author Ciccotta Andrea on 06/11/2020.\n */\npublic class CollectionUtils {\n\n    /**\n     * It models the prepend O(1), used against the common append/add O(n)\n     * @param head first element of the list\n     * @param body rest of the elements of the list\n     * @return new list (with different memory-reference) made by [head, ...body]\n     */\n    public static &lt;E&gt; List&lt;Object&gt; prepend(final E head, List&lt;E&gt; final body){\n        return Lists.asList(head, body.toArray());\n    }\n\n    /**\n     * it models the typed version of prepend(E head, List&lt;E&gt; body)\n     * @param type the array into which the elements of this list are to be stored\n     */\n    public static &lt;E&gt; List&lt;E&gt; prepend(final E head, List&lt;E&gt; body, final E[] type){\n        return Lists.asList(head, body.toArray(type));\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1651488623,"post_id":72066879,"comment_id":127368763,"body_markdown":"As it’s currently written, your answer is unclear. Please [edit] to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"As it’s currently written, your answer is unclear. Please <a href=\"https://stackoverflow.com/posts/72066879/edit\">edit</a> to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":25153425,"reputation":41,"user_id":18998510,"display_name":"wromma"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1666207979,"creation_date":1651307431,"answer_id":72066879,"question_id":12949690,"body_markdown":"Bounded Circular Buffer With FIFO Discipline\r\n============================================\r\nIt seems that you need a circular buffer with limited capacity.\r\nYou prefer an array like behavior and you dislike a linked queue.\r\nAm I right?\r\nYou appear to need a capacity set to &#39;10&#39;.\r\nThis can achieved with a bounded structure.\r\nYou seem also to need a FIFO discipline.\r\n\r\nSolution with an ArrayBlockingQueue\r\n-----------------------------------\r\nFrom the docs: A [bounded blocking queue][1] backed by an array... orders elements FIFO (first-in-first-out). The head of the queue is that element that has been on the queue the longest time. The tail of the queue is that element that has been on the queue the shortest time. New elements are inserted at the tail of the queue, and the queue retrieval operations obtain elements at the head of the queue.\r\nPut, take are blocking . Offer, poll do not block.\r\n\r\nPriorityBlockingQueue\r\n---------------------\r\nYou can have a look at docs for [PriorityBlockingQueue][2]. There is an example of a class &quot;that applies first-in-first-out tie-breaking to comparable elements&quot;.  \r\n\r\n\r\nExample with an ArrayBlockingQueue\r\n-----------------------------------\r\n\r\n\tArrayBlockingQueue&lt;Integer&gt; queue = new ArrayBlockingQueue&lt;&gt;(10);\r\n\r\n\tfor (int i = 10; i &lt; 30; i++) {\r\n\t\tif (queue.remainingCapacity() &gt; 0) {\r\n\t\t\tqueue.offer(i);\r\n\t\t} else {\r\n\t\t\tqueue.poll();\r\n\t\t\tqueue.offer(i);\r\n\t\t}\r\n\t\tif (queue.size() &gt; 9) {\r\n\t\t\tSystem.out.println(queue);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/ArrayBlockingQueue.html\r\n  [2]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/PriorityBlockingQueue.html","title":"Java ArrayList how to add elements at the beginning","body":"<h1>Bounded Circular Buffer With FIFO Discipline</h1>\n<p>It seems that you need a circular buffer with limited capacity.\nYou prefer an array like behavior and you dislike a linked queue.\nAm I right?\nYou appear to need a capacity set to '10'.\nThis can achieved with a bounded structure.\nYou seem also to need a FIFO discipline.</p>\n<h2>Solution with an ArrayBlockingQueue</h2>\n<p>From the docs: A <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/ArrayBlockingQueue.html\" rel=\"nofollow noreferrer\">bounded blocking queue</a> backed by an array... orders elements FIFO (first-in-first-out). The head of the queue is that element that has been on the queue the longest time. The tail of the queue is that element that has been on the queue the shortest time. New elements are inserted at the tail of the queue, and the queue retrieval operations obtain elements at the head of the queue.\nPut, take are blocking . Offer, poll do not block.</p>\n<h2>PriorityBlockingQueue</h2>\n<p>You can have a look at docs for <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/PriorityBlockingQueue.html\" rel=\"nofollow noreferrer\">PriorityBlockingQueue</a>. There is an example of a class &quot;that applies first-in-first-out tie-breaking to comparable elements&quot;.</p>\n<h2>Example with an ArrayBlockingQueue</h2>\n<pre><code>ArrayBlockingQueue&lt;Integer&gt; queue = new ArrayBlockingQueue&lt;&gt;(10);\n\nfor (int i = 10; i &lt; 30; i++) {\n    if (queue.remainingCapacity() &gt; 0) {\n        queue.offer(i);\n    } else {\n        queue.poll();\n        queue.offer(i);\n    }\n    if (queue.size() &gt; 9) {\n        System.out.println(queue);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3155790,"reputation":14985,"user_id":2668232,"accept_rate":100,"display_name":"Oleksandr Pyrohov"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1695233471,"creation_date":1693781895,"answer_id":77034417,"question_id":12949690,"body_markdown":"Starting from Java 21, `List` extends [`SequencedCollection`][1] interface, which has the following methods:\r\n```\r\ninterface SequencedCollection&lt;E&gt; extends Collection&lt;E&gt; {\r\n  SequencedCollection&lt;E&gt; reversed();\r\n  void addFirst(E);\r\n  void addLast(E);\r\n  E getFirst();\r\n  E getLast();\r\n  E removeFirst();\r\n  E removeLast();\r\n}\r\n\r\n```\r\nAdditional details in [JEP 431: Sequenced Collections][2].\r\n\r\nSo, working with the first/last element becomes simpler:\r\n```\r\nlist.addFirst(new Object());\r\n\r\n...\r\n\r\nif (list.size() &gt; 10) {\r\n  list.removeLast();\r\n}\r\n```\r\n**Notes:**\r\n- Keep in mind that while the time complexity of removing the last element from `ArrayList` is O(1), adding an element to beginning of `ArrayList` is O(n), as it would require shifting all the existing elements by one position. So, might be worth checking [`ArrayDeque`][3] as suggested by others.\r\n- `List.removeLast` throws `NoSuchElementException` if the list is empty.\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedCollection.html\r\n  [2]: https://openjdk.org/jeps/431\r\n  [3]: https://docs.oracle.com/javase/8/docs/api/java/util/ArrayDeque.html","title":"Java ArrayList how to add elements at the beginning","body":"<p>Starting from Java 21, <code>List</code> extends <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedCollection.html\" rel=\"nofollow noreferrer\"><code>SequencedCollection</code></a> interface, which has the following methods:</p>\n<pre><code>interface SequencedCollection&lt;E&gt; extends Collection&lt;E&gt; {\n  SequencedCollection&lt;E&gt; reversed();\n  void addFirst(E);\n  void addLast(E);\n  E getFirst();\n  E getLast();\n  E removeFirst();\n  E removeLast();\n}\n\n</code></pre>\n<p>Additional details in <a href=\"https://openjdk.org/jeps/431\" rel=\"nofollow noreferrer\">JEP 431: Sequenced Collections</a>.</p>\n<p>So, working with the first/last element becomes simpler:</p>\n<pre><code>list.addFirst(new Object());\n\n...\n\nif (list.size() &gt; 10) {\n  list.removeLast();\n}\n</code></pre>\n<p><strong>Notes:</strong></p>\n<ul>\n<li>Keep in mind that while the time complexity of removing the last element from <code>ArrayList</code> is O(1), adding an element to beginning of <code>ArrayList</code> is O(n), as it would require shifting all the existing elements by one position. So, might be worth checking <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/ArrayDeque.html\" rel=\"nofollow noreferrer\"><code>ArrayDeque</code></a> as suggested by others.</li>\n<li><code>List.removeLast</code> throws <code>NoSuchElementException</code> if the list is empty.</li>\n</ul>\n"}],"owner":{"account_id":1940712,"reputation":5132,"user_id":1746975,"accept_rate":42,"display_name":"ZeDonDino"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":470914,"favorite_count":0,"down_vote_count":5,"up_vote_count":269,"accepted_answer_id":12949719,"answer_count":16,"score":264,"last_activity_date":1695233471,"creation_date":1350546763,"question_id":12949690,"body_markdown":"I need to add elements to an `ArrayList` queue whatever, but when I call the function to add an element, I want it to add the element at the beginning of the array (so it has the lowest index) and if the array has 10 elements adding a new results in deleting the oldest element (the one with the highest index).\r\n\r\nDoes anyone have any suggestions?\r\n","title":"Java ArrayList how to add elements at the beginning","body":"<p>I need to add elements to an <code>ArrayList</code> queue whatever, but when I call the function to add an element, I want it to add the element at the beginning of the array (so it has the lowest index) and if the array has 10 elements adding a new results in deleting the oldest element (the one with the highest index).</p>\n\n<p>Does anyone have any suggestions?</p>\n"},{"tags":["java","data-structures","collections","guava"],"comments":[{"owner":{"account_id":1126136,"reputation":17393,"user_id":1113392,"display_name":"A4L"},"score":0,"creation_date":1396458578,"post_id":22818319,"comment_id":34800790,"body_markdown":"Did you take at look a [LinkedHashSet](http://docs.oracle.com/javase/8/docs/api/java/util/LinkedHashSet.html) ?","body":"Did you take at look a <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/LinkedHashSet.html\" rel=\"nofollow noreferrer\">LinkedHashSet</a> ?"},{"owner":{"account_id":95910,"reputation":238649,"user_id":260990,"accept_rate":81,"display_name":"jmj"},"score":0,"creation_date":1396458622,"post_id":22818319,"comment_id":34800814,"body_markdown":"extend LinkedHashSet and maintain reverse order","body":"extend LinkedHashSet and maintain reverse order"},{"owner":{"account_id":3244487,"reputation":19947,"user_id":2736496,"accept_rate":74,"display_name":"aliteralmind"},"score":0,"creation_date":1396458627,"post_id":22818319,"comment_id":34800817,"body_markdown":"What collection should I use flow chart, by @TimB: http://stackoverflow.com/questions/21974361/what-java-collection-should-i-use","body":"What collection should I use flow chart, by @TimB: <a href=\"http://stackoverflow.com/questions/21974361/what-java-collection-should-i-use\" title=\"what java collection should i use\">stackoverflow.com/questions/21974361/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"score":0,"creation_date":1396459658,"post_id":22818399,"comment_id":34801448,"body_markdown":"Is there any way to reverse-iterate over the `LinkedHashSet`? Or are you required to create a reverse `LinkedList` representation of it?","body":"Is there any way to reverse-iterate over the <code>LinkedHashSet</code>? Or are you required to create a reverse <code>LinkedList</code> representation of it?"},{"owner":{"account_id":1398557,"reputation":9636,"user_id":1327788,"accept_rate":84,"display_name":"Giovanni Botta"},"score":2,"creation_date":1396459915,"post_id":22818399,"comment_id":34801596,"body_markdown":"I think you have to convert the set to a list and then you can use Guava&#39;s [`Lists.reverse`](https://code.google.com/p/guava-libraries/wiki/CollectionUtilitiesExplained#Lists) method to create a reversed view.","body":"I think you have to convert the set to a list and then you can use Guava&#39;s <a href=\"https://code.google.com/p/guava-libraries/wiki/CollectionUtilitiesExplained#Lists\" rel=\"nofollow noreferrer\"><code>Lists.reverse</code></a> method to create a reversed view."},{"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"score":0,"creation_date":1396461947,"post_id":22818399,"comment_id":34802788,"body_markdown":"Having reviewed a few other options (`descendingIterator()`, `Collections.reverse(List)` and `ListIterator.previous()` I guess that Guava&#39;s method is probably both the easiest to use and the most efficient at the same time.","body":"Having reviewed a few other options (<code>descendingIterator()</code>, <code>Collections.reverse(List)</code> and <code>ListIterator.previous()</code> I guess that Guava&#39;s method is probably both the easiest to use and the most efficient at the same time."},{"owner":{"account_id":5864,"reputation":31268,"user_id":9636,"accept_rate":81,"display_name":"Heath Borders"},"score":0,"creation_date":1396467557,"post_id":22818399,"comment_id":34806225,"body_markdown":"Creating a `LinkedList` representation of it will require an iteration of the entire `Set`. I want a collection that keeps this up to date itself.","body":"Creating a <code>LinkedList</code> representation of it will require an iteration of the entire <code>Set</code>. I want a collection that keeps this up to date itself."},{"owner":{"account_id":1398557,"reputation":9636,"user_id":1327788,"accept_rate":84,"display_name":"Giovanni Botta"},"score":0,"creation_date":1396467773,"post_id":22818399,"comment_id":34806336,"body_markdown":"Then `LinkedHashSet` is not the right tool for the job. How large can the set be?","body":"Then <code>LinkedHashSet</code> is not the right tool for the job. How large can the set be?"}],"tags":[],"owner":{"account_id":1398557,"reputation":9636,"user_id":1327788,"accept_rate":84,"display_name":"Giovanni Botta"},"comment_count":5,"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1396461702,"creation_date":1396458617,"answer_id":22818399,"question_id":22818319,"body_markdown":"How about using a [LinkedHashSet](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedHashSet.html) and whenever you detect that the item is in there you remove it and reinsert it? That&#39;s the only way to guarantee the insertion order is what you expect (or the inverse thereof).\r\n\r\nYou can [`iterate over the LinkedHashSet`](https://stackoverflow.com/questions/10741902/java-linkedhashset-backwards-iteration) by creating a `LinkedList` over the `LinkedHashSet` and reversing over it in any way you like, e.g. by using Guava&#39;s [`Lists.reverse`](https://code.google.com/p/guava-libraries/wiki/CollectionUtilitiesExplained#Lists) method.","title":"Collection that prevents duplicates but preserves reversible duplicate insertion order?","body":"<p>How about using a <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/LinkedHashSet.html\" rel=\"nofollow noreferrer\">LinkedHashSet</a> and whenever you detect that the item is in there you remove it and reinsert it? That's the only way to guarantee the insertion order is what you expect (or the inverse thereof).</p>\n\n<p>You can <a href=\"https://stackoverflow.com/questions/10741902/java-linkedhashset-backwards-iteration\"><code>iterate over the LinkedHashSet</code></a> by creating a <code>LinkedList</code> over the <code>LinkedHashSet</code> and reversing over it in any way you like, e.g. by using Guava's <a href=\"https://code.google.com/p/guava-libraries/wiki/CollectionUtilitiesExplained#Lists\" rel=\"nofollow noreferrer\"><code>Lists.reverse</code></a> method.</p>\n"},{"comments":[{"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"score":0,"creation_date":1396462182,"post_id":22818503,"comment_id":34802971,"body_markdown":"Somehow the Apache API&#39;s always make me itch a bit, using a special insertion method is not as clean as it should be, it&#39;s not a method that is part of the `Set` interface.","body":"Somehow the Apache API&#39;s always make me itch a bit, using a special insertion method is not as clean as it should be, it&#39;s not a method that is part of the <code>Set</code> interface."},{"owner":{"account_id":1398557,"reputation":9636,"user_id":1327788,"accept_rate":84,"display_name":"Giovanni Botta"},"score":0,"creation_date":1396468038,"post_id":22818503,"comment_id":34806503,"body_markdown":"Yeah, the Apache collections are quite obsolete. Also I don&#39;t think this will work. Per the javadoc for the add method: &quot;Inserts the specified element at the specified position if it is not yet contained in this ordered set (optional operation).&quot; meaning if it is in there already the position won&#39;t change.","body":"Yeah, the Apache collections are quite obsolete. Also I don&#39;t think this will work. Per the javadoc for the add method: &quot;Inserts the specified element at the specified position if it is not yet contained in this ordered set (optional operation).&quot; meaning if it is in there already the position won&#39;t change."}],"tags":[],"owner":{"account_id":2519746,"reputation":8347,"user_id":2190336,"display_name":"Prabhaker A"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1396458944,"creation_date":1396458944,"answer_id":22818503,"question_id":22818319,"body_markdown":"Try [ListOrderedSet](http://commons.apache.org/proper/commons-collections/javadocs/api-release/org/apache/commons/collections4/set/ListOrderedSet.html) class of `org.apache.commons.collections4.set`.  \r\n\r\nFor example:\r\n\r\n    listOrderedSet.add(1,1);\r\n    listOrderedSet.add(1,2);\r\n    listOrderedSet.add(1,3);\r\n    listOrderedSet.add(1,1);  \r\nThis will give you the expected out put.\r\n","title":"Collection that prevents duplicates but preserves reversible duplicate insertion order?","body":"<p>Try <a href=\"http://commons.apache.org/proper/commons-collections/javadocs/api-release/org/apache/commons/collections4/set/ListOrderedSet.html\" rel=\"nofollow\">ListOrderedSet</a> class of <code>org.apache.commons.collections4.set</code>.  </p>\n\n<p>For example:</p>\n\n<pre><code>listOrderedSet.add(1,1);\nlistOrderedSet.add(1,2);\nlistOrderedSet.add(1,3);\nlistOrderedSet.add(1,1);  \n</code></pre>\n\n<p>This will give you the expected out put.</p>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695233311,"creation_date":1668573890,"answer_id":74455291,"question_id":22818319,"body_markdown":"As of Java 21, the [`addFirst(E e)`](https://download.java.net/java/early_access/jdk21/docs/api/java.base/java/util/LinkedHashSet.html#addFirst(E)) method can be used to add an element to the front of a `LinkedHashSet`, relocating it if it already exists in the set.  Using this results in exactly the requested behavior.\r\n\r\n```lang-java\r\nSequencedSet&lt;Integer&gt; set = new LinkedHashSet&lt;&gt;();\r\nset.addFirst(1);\r\nset.addFirst(2);\r\nset.addFirst(3);\r\nset.addFirst(1);\r\n\r\n// 1 then 3 then 2\r\nfor (Integer i : set) {\r\n  System.out.println(i);\r\n}\r\n```\r\n\r\n---\r\n\r\nNote: Java 21 also has the [`reversed()`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/LinkedHashSet.html#reversed()) method on `LinkedHashSet`.  However, the [`add(E e)`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/HashSet.html#add(E)) method [doesn&#39;t change the order of existing elements](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/LinkedHashSet.html), so it won&#39;t quite work to solve the problem as described. \r\n\r\n&gt; Note that encounter order is _not_ affected if an element is _re-inserted_ into the set with the add method.\r\n\r\n```lang-java\r\nSequencedSet&lt;Integer&gt; set = new LinkedHashSet&lt;&gt;().reversed();\r\nset.add(1);\r\nset.add(2);\r\nset.add(3);\r\nset.add(1);\r\n\r\n// 3 then 2 then 1\r\nfor (Integer i : set) {\r\n  System.out.println(i);\r\n}\r\n```","title":"Collection that prevents duplicates but preserves reversible duplicate insertion order?","body":"<p>As of Java 21, the <a href=\"https://download.java.net/java/early_access/jdk21/docs/api/java.base/java/util/LinkedHashSet.html#addFirst(E)\" rel=\"nofollow noreferrer\"><code>addFirst(E e)</code></a> method can be used to add an element to the front of a <code>LinkedHashSet</code>, relocating it if it already exists in the set.  Using this results in exactly the requested behavior.</p>\n<pre class=\"lang-java prettyprint-override\"><code>SequencedSet&lt;Integer&gt; set = new LinkedHashSet&lt;&gt;();\nset.addFirst(1);\nset.addFirst(2);\nset.addFirst(3);\nset.addFirst(1);\n\n// 1 then 3 then 2\nfor (Integer i : set) {\n  System.out.println(i);\n}\n</code></pre>\n<hr />\n<p>Note: Java 21 also has the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/LinkedHashSet.html#reversed()\" rel=\"nofollow noreferrer\"><code>reversed()</code></a> method on <code>LinkedHashSet</code>.  However, the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/HashSet.html#add(E)\" rel=\"nofollow noreferrer\"><code>add(E e)</code></a> method <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/LinkedHashSet.html\" rel=\"nofollow noreferrer\">doesn't change the order of existing elements</a>, so it won't quite work to solve the problem as described.</p>\n<blockquote>\n<p>Note that encounter order is <em>not</em> affected if an element is <em>re-inserted</em> into the set with the add method.</p>\n</blockquote>\n<pre class=\"lang-java prettyprint-override\"><code>SequencedSet&lt;Integer&gt; set = new LinkedHashSet&lt;&gt;().reversed();\nset.add(1);\nset.add(2);\nset.add(3);\nset.add(1);\n\n// 3 then 2 then 1\nfor (Integer i : set) {\n  System.out.println(i);\n}\n</code></pre>\n"}],"owner":{"account_id":5864,"reputation":31268,"user_id":9636,"accept_rate":81,"display_name":"Heath Borders"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":304,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":22818503,"answer_count":3,"score":2,"last_activity_date":1695233311,"creation_date":1396458393,"question_id":22818319,"body_markdown":"Is there a collection that preserves reversible duplicate insertion order?\r\n\r\nSpecifically, if I insert the following items:\r\n\r\n    1\r\n    2\r\n    3\r\n    1\r\n\r\nI want to be able to iterate over them and receive them in the following order:\r\n\r\n    1\r\n    3\r\n    2\r\n\r\nThat is, I want them in descending insertion order with duplicate insertions causing a reorder. [Guava&#39;s LinkedListMultimap][1] is the closest I&#39;ve found, but it doesn&#39;t support descending traversal.\r\n\r\n[Java&#39;s LinkedHashSet][2] doesn&#39;t work because it doesn&#39;t allow descending traversal.\r\n\r\nI could also use an LRU cache, but most LRU libraries I&#39;ve found don&#39;t support retrieving objects in LRU order.\r\n\r\nDoes this thing have a standard name?\r\n\r\n\r\n  [1]: http://guava-libraries.googlecode.com/svn-history/r14/trunk/javadoc/com/google/common/collect/LinkedListMultimap.html\r\n  [2]: http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashSet.html","title":"Collection that prevents duplicates but preserves reversible duplicate insertion order?","body":"<p>Is there a collection that preserves reversible duplicate insertion order?</p>\n\n<p>Specifically, if I insert the following items:</p>\n\n<pre><code>1\n2\n3\n1\n</code></pre>\n\n<p>I want to be able to iterate over them and receive them in the following order:</p>\n\n<pre><code>1\n3\n2\n</code></pre>\n\n<p>That is, I want them in descending insertion order with duplicate insertions causing a reorder. <a href=\"http://guava-libraries.googlecode.com/svn-history/r14/trunk/javadoc/com/google/common/collect/LinkedListMultimap.html\" rel=\"nofollow\">Guava's LinkedListMultimap</a> is the closest I've found, but it doesn't support descending traversal.</p>\n\n<p><a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashSet.html\" rel=\"nofollow\">Java's LinkedHashSet</a> doesn't work because it doesn't allow descending traversal.</p>\n\n<p>I could also use an LRU cache, but most LRU libraries I've found don't support retrieving objects in LRU order.</p>\n\n<p>Does this thing have a standard name?</p>\n"},{"tags":["java","list","sorting","java-8","java-stream"],"comments":[{"owner":{"account_id":1101161,"reputation":119804,"user_id":1093528,"accept_rate":65,"display_name":"fge"},"score":2,"creation_date":1401783831,"post_id":24010109,"comment_id":37006195,"body_markdown":"An `IntStream` has no `.sorted(Comparator)` method; you have to go through a `Stream&lt;Integer&gt;` first and reverse there before yielding an `IntStream`","body":"An <code>IntStream</code> has no <code>.sorted(Comparator)</code> method; you have to go through a <code>Stream&lt;Integer&gt;</code> first and reverse there before yielding an <code>IntStream</code>"},{"owner":{"account_id":330599,"reputation":10771,"user_id":654799,"accept_rate":84,"display_name":"vach"},"score":0,"creation_date":1401783884,"post_id":24010109,"comment_id":37006217,"body_markdown":"Ok, I&#39;ve found it, you need to use .boxed() and then .sorted()","body":"Ok, I&#39;ve found it, you need to use .boxed() and then .sorted()"},{"owner":{"account_id":1548079,"reputation":128727,"user_id":1441122,"display_name":"Stuart Marks"},"score":5,"creation_date":1401784778,"post_id":24010109,"comment_id":37006672,"body_markdown":"To generate an `IntStream.range(0, n)` in reverse order, do something like `map(i -&gt; n - i - 1)`. No need to do boxing and sorting.","body":"To generate an <code>IntStream.range(0, n)</code> in reverse order, do something like <code>map(i -&gt; n - i - 1)</code>. No need to do boxing and sorting."},{"owner":{"account_id":22563,"reputation":14457,"user_id":55787,"accept_rate":78,"display_name":"chiccodoro"},"score":3,"creation_date":1401785651,"post_id":24010109,"comment_id":37007119,"body_markdown":"Your gerneral question and your specific question read like two completele different questions to me. The general speaks of reversing the *stream*, while the specific speaks of ordering numbers in descending order. If the stream produces the numbers in an unordered manner like `1, 3, 2`, what is your expected outcome? Do you want the reversed stream like `2, 3, 1` or the sorted stream like `3, 2, 1`?","body":"Your gerneral question and your specific question read like two completele different questions to me. The general speaks of reversing the <i>stream</i>, while the specific speaks of ordering numbers in descending order. If the stream produces the numbers in an unordered manner like <code>1, 3, 2</code>, what is your expected outcome? Do you want the reversed stream like <code>2, 3, 1</code> or the sorted stream like <code>3, 2, 1</code>?"},{"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"score":10,"creation_date":1401786070,"post_id":24010109,"comment_id":37007343,"body_markdown":"You can&#39;t reverse a stream in general - for example a stream may be inifinite.","body":"You can&#39;t reverse a stream in general - for example a stream may be inifinite."},{"owner":{"account_id":22563,"reputation":14457,"user_id":55787,"accept_rate":78,"display_name":"chiccodoro"},"score":0,"creation_date":1401786180,"post_id":24010109,"comment_id":37007398,"body_markdown":"To &quot;reverse the stream&quot; you will first need to collect all items. You might try to use a stack because its LIFO nature will reverse the items after pushing and pulling back, something like: `stream.collect(Collectors.toCollection(Stack::new)).stream()`. (As assylias commented, you can&#39;t do that on an infinite stream. But that holds for sorting, too.","body":"To &quot;reverse the stream&quot; you will first need to collect all items. You might try to use a stack because its LIFO nature will reverse the items after pushing and pulling back, something like: <code>stream.collect(Collectors.toCollection(Stack::new)).stream()</code>&zwnj;&#8203;. (As assylias commented, you can&#39;t do that on an infinite stream. But that holds for sorting, too."},{"owner":{"account_id":330599,"reputation":10771,"user_id":654799,"accept_rate":84,"display_name":"vach"},"score":0,"creation_date":1401786512,"post_id":24010109,"comment_id":37007567,"body_markdown":"Yes I&#39;ve come up with this, but I tought there will be a &quot;cleaner&quot; way to do that. I think you can put it as an answer, and guys above are right my questions are different indeed, one about reversing the other one about ordering. Anyway I think others who might search and navigate to this question will looking for reversing part of this discussion. So please post it as an answer.","body":"Yes I&#39;ve come up with this, but I tought there will be a &quot;cleaner&quot; way to do that. I think you can put it as an answer, and guys above are right my questions are different indeed, one about reversing the other one about ordering. Anyway I think others who might search and navigate to this question will looking for reversing part of this discussion. So please post it as an answer."},{"owner":{"account_id":231391,"reputation":6221,"user_id":495598,"display_name":"Manu Manjunath"},"score":1,"creation_date":1449752193,"post_id":24010109,"comment_id":56149526,"body_markdown":"You may want to rephrase the question as &quot;Iterate a collection in reverse order in Java 8 way&quot;. Answer may be beyond streams. Below answer from @venkata-raju solves the problem, but takes extra space. I&#39;m still waiting to see a good answer on this question.","body":"You may want to rephrase the question as &quot;Iterate a collection in reverse order in Java 8 way&quot;. Answer may be beyond streams. Below answer from @venkata-raju solves the problem, but takes extra space. I&#39;m still waiting to see a good answer on this question."},{"owner":{"account_id":8134250,"reputation":1092,"user_id":6126446,"accept_rate":100,"display_name":"tur11ng"},"score":0,"creation_date":1538231500,"post_id":24010109,"comment_id":92075575,"body_markdown":"@assylias This doesn&#39;t make sense. For the same reason there is no point on collecting a stream or using loops in general (cause we may run into the halting problem), but we can do both.","body":"@assylias This doesn&#39;t make sense. For the same reason there is no point on collecting a stream or using loops in general (cause we may run into the halting problem), but we can do both."},{"owner":{"account_id":1060118,"reputation":497,"user_id":1061929,"display_name":"bjmi"},"score":0,"creation_date":1632239435,"post_id":24010109,"comment_id":122436338,"body_markdown":"`IntStream.rangeClosed(-n, 0).map(i -&gt; -i)` will produce elements in reversed order i.e. `n, n-1, n-2, ... , 0`.","body":"<code>IntStream.rangeClosed(-n, 0).map(i -&gt; -i)</code> will produce elements in reversed order i.e. <code>n, n-1, n-2, ... , 0</code>."}],"answers":[{"comments":[{"owner":{"account_id":22563,"reputation":14457,"user_id":55787,"accept_rate":78,"display_name":"chiccodoro"},"score":2,"creation_date":1401785701,"post_id":24010541,"comment_id":37007147,"body_markdown":"This is only an answer to your &quot;specific question&quot; but not to your &quot;general question&quot;.","body":"This is only an answer to your &quot;specific question&quot; but not to your &quot;general question&quot;."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":14,"creation_date":1401795391,"post_id":24010541,"comment_id":37013064,"body_markdown":"[`Collections.reverseOrder()`](http://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#reverseOrder--) exists since Java 1.2 and works with `Integer`…","body":"<a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#reverseOrder--\" rel=\"nofollow noreferrer\"><code>Collections.reverseOrder()</code></a> exists since Java 1.2 and works with <code>Integer</code>…"}],"tags":[],"owner":{"account_id":330599,"reputation":10771,"user_id":654799,"accept_rate":84,"display_name":"vach"},"comment_count":2,"down_vote_count":2,"up_vote_count":9,"is_accepted":false,"score":7,"last_activity_date":1401784414,"creation_date":1401784414,"answer_id":24010541,"question_id":24010109,"body_markdown":"Here&#39;s the solution I&#39;ve come up with:\r\n\r\n    private static final Comparator&lt;Integer&gt; BY_ASCENDING_ORDER = Integer::compare;\r\n    private static final Comparator&lt;Integer&gt; BY_DESCENDING_ORDER = BY_ASCENDING_ORDER.reversed();\r\n\r\nthen using those comparators:\r\n\r\n    IntStream.range(-range, 0).boxed().sorted(BY_DESCENDING_ORDER).forEach(// etc...","title":"Java 8 stream reverse order","body":"<p>Here's the solution I've come up with:</p>\n\n<pre><code>private static final Comparator&lt;Integer&gt; BY_ASCENDING_ORDER = Integer::compare;\nprivate static final Comparator&lt;Integer&gt; BY_DESCENDING_ORDER = BY_ASCENDING_ORDER.reversed();\n</code></pre>\n\n<p>then using those comparators:</p>\n\n<pre><code>IntStream.range(-range, 0).boxed().sorted(BY_DESCENDING_ORDER).forEach(// etc...\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":20,"creation_date":1401795706,"post_id":24011264,"comment_id":37013255,"body_markdown":"Alternatively: `IntStream.iterate(to-1, i-&gt;i-1).limit(to-from)`","body":"Alternatively: <code>IntStream.iterate(to-1, i-&gt;i-1).limit(to-from)</code>"},{"owner":{"account_id":1283505,"reputation":2377,"user_id":1237044,"accept_rate":100,"display_name":"Brandon"},"score":4,"creation_date":1454025082,"post_id":24011264,"comment_id":57871761,"body_markdown":"@Holger Unfortunately, that solution doesn&#39;t handle overflow correctly.","body":"@Holger Unfortunately, that solution doesn&#39;t handle overflow correctly."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":6,"creation_date":1454060922,"post_id":24011264,"comment_id":57884827,"body_markdown":"@Brandon Mintern: indeed, you would have to use `.limit(endExcl-(long)startIncl)` instead, but for such large streams, it is very discouraged anyway as it’s much less efficient than the `range` based solution. At the time I wrote the comment, I wasn’t aware about the efficiency difference.","body":"@Brandon Mintern: indeed, you would have to use <code>.limit(endExcl-(long)startIncl)</code> instead, but for such large streams, it is very discouraged anyway as it’s much less efficient than the <code>range</code> based solution. At the time I wrote the comment, I wasn’t aware about the efficiency difference."},{"owner":{"account_id":4680926,"reputation":2259,"user_id":3789665,"accept_rate":57,"display_name":"greybeard"},"score":0,"creation_date":1641808955,"post_id":24011264,"comment_id":124894454,"body_markdown":"Or `IntStream.rangeClosed(1, to - from).map(i -&gt; to-i)` (see [bjmi&#39;s comment](https://stackoverflow.com/questions/24010109/java-8-stream-reverse-order/36192274#comment122436338_24010109), too).","body":"Or <code>IntStream.rangeClosed(1, to - from).map(i -&gt; to-i)</code> (see <a href=\"https://stackoverflow.com/questions/24010109/java-8-stream-reverse-order/36192274#comment122436338_24010109\">bjmi&#39;s comment</a>, too)."}],"tags":[],"owner":{"account_id":1548079,"reputation":128727,"user_id":1441122,"display_name":"Stuart Marks"},"comment_count":4,"down_vote_count":0,"up_vote_count":112,"is_accepted":true,"score":112,"last_activity_date":1454092308,"creation_date":1401786782,"answer_id":24011264,"question_id":24010109,"body_markdown":"For the specific question of generating a reverse `IntStream`, try something like this:\r\n\r\n    static IntStream revRange(int from, int to) {\r\n        return IntStream.range(from, to)\r\n                        .map(i -&gt; to - i + from - 1);\r\n    }\r\n\r\nThis avoids boxing and sorting.\r\n\r\nFor the general question of how to reverse a stream of any type, I don&#39;t know of there&#39;s a &quot;proper&quot; way. There are a couple ways I can think of. Both end up storing the stream elements. I don&#39;t know of a way to reverse a stream without storing the elements.\r\n\r\nThis first way stores the elements into an array and reads them out to a stream in reverse order. Note that since we don&#39;t know the runtime type of the stream elements, we can&#39;t type the array properly, requiring an unchecked cast.\r\n\r\n    @SuppressWarnings(&quot;unchecked&quot;)\r\n    static &lt;T&gt; Stream&lt;T&gt; reverse(Stream&lt;T&gt; input) {\r\n        Object[] temp = input.toArray();\r\n        return (Stream&lt;T&gt;) IntStream.range(0, temp.length)\r\n                                    .mapToObj(i -&gt; temp[temp.length - i - 1]);\r\n    }\r\n\r\nAnother technique uses collectors to accumulate the items into a reversed list. This does lots of insertions at the front of `ArrayList` objects, so there&#39;s lots of copying going on.\r\n\r\n    Stream&lt;T&gt; input = ... ;\r\n    List&lt;T&gt; output =\r\n        input.collect(ArrayList::new,\r\n                      (list, e) -&gt; list.add(0, e),\r\n                      (list1, list2) -&gt; list1.addAll(0, list2));\r\n\r\nIt&#39;s probably possible to write a much more efficient reversing collector using some kind of customized data structure.\r\n\r\n**UPDATE 2016-01-29**\r\n\r\nSince this question has gotten a bit of attention recently, I figure I should update my answer to solve the problem with inserting at the front of `ArrayList`. This will be horribly inefficient with a large number of elements, requiring O(N^2) copying.\r\n\r\nIt&#39;s preferable to use an `ArrayDeque` instead, which efficiently supports insertion at the front. A small wrinkle is that we can&#39;t use the three-arg form of `Stream.collect()`; it requires the contents of the second arg be merged into the first arg, and there&#39;s no &quot;add-all-at-front&quot; bulk operation on `Deque`. Instead, we use `addAll()` to append the contents of the first arg to the end of the second, and then we return the second. This requires using the `Collector.of()` factory method.\r\n\r\nThe complete code is this:\r\n\r\n    Deque&lt;String&gt; output =\r\n        input.collect(Collector.of(\r\n            ArrayDeque::new,\r\n            (deq, t) -&gt; deq.addFirst(t),\r\n            (d1, d2) -&gt; { d2.addAll(d1); return d2; }));\r\n\r\nThe result is a `Deque` instead of a `List`, but that shouldn&#39;t be much of an issue, as it can easily be iterated or streamed in the now-reversed order.\r\n","title":"Java 8 stream reverse order","body":"<p>For the specific question of generating a reverse <code>IntStream</code>, try something like this:</p>\n\n<pre><code>static IntStream revRange(int from, int to) {\n    return IntStream.range(from, to)\n                    .map(i -&gt; to - i + from - 1);\n}\n</code></pre>\n\n<p>This avoids boxing and sorting.</p>\n\n<p>For the general question of how to reverse a stream of any type, I don't know of there's a \"proper\" way. There are a couple ways I can think of. Both end up storing the stream elements. I don't know of a way to reverse a stream without storing the elements.</p>\n\n<p>This first way stores the elements into an array and reads them out to a stream in reverse order. Note that since we don't know the runtime type of the stream elements, we can't type the array properly, requiring an unchecked cast.</p>\n\n<pre><code>@SuppressWarnings(\"unchecked\")\nstatic &lt;T&gt; Stream&lt;T&gt; reverse(Stream&lt;T&gt; input) {\n    Object[] temp = input.toArray();\n    return (Stream&lt;T&gt;) IntStream.range(0, temp.length)\n                                .mapToObj(i -&gt; temp[temp.length - i - 1]);\n}\n</code></pre>\n\n<p>Another technique uses collectors to accumulate the items into a reversed list. This does lots of insertions at the front of <code>ArrayList</code> objects, so there's lots of copying going on.</p>\n\n<pre><code>Stream&lt;T&gt; input = ... ;\nList&lt;T&gt; output =\n    input.collect(ArrayList::new,\n                  (list, e) -&gt; list.add(0, e),\n                  (list1, list2) -&gt; list1.addAll(0, list2));\n</code></pre>\n\n<p>It's probably possible to write a much more efficient reversing collector using some kind of customized data structure.</p>\n\n<p><strong>UPDATE 2016-01-29</strong></p>\n\n<p>Since this question has gotten a bit of attention recently, I figure I should update my answer to solve the problem with inserting at the front of <code>ArrayList</code>. This will be horribly inefficient with a large number of elements, requiring O(N^2) copying.</p>\n\n<p>It's preferable to use an <code>ArrayDeque</code> instead, which efficiently supports insertion at the front. A small wrinkle is that we can't use the three-arg form of <code>Stream.collect()</code>; it requires the contents of the second arg be merged into the first arg, and there's no \"add-all-at-front\" bulk operation on <code>Deque</code>. Instead, we use <code>addAll()</code> to append the contents of the first arg to the end of the second, and then we return the second. This requires using the <code>Collector.of()</code> factory method.</p>\n\n<p>The complete code is this:</p>\n\n<pre><code>Deque&lt;String&gt; output =\n    input.collect(Collector.of(\n        ArrayDeque::new,\n        (deq, t) -&gt; deq.addFirst(t),\n        (d1, d2) -&gt; { d2.addAll(d1); return d2; }));\n</code></pre>\n\n<p>The result is a <code>Deque</code> instead of a <code>List</code>, but that shouldn't be much of an issue, as it can easily be iterated or streamed in the now-reversed order.</p>\n"},{"comments":[{"owner":{"account_id":204515,"reputation":11679,"user_id":452775,"accept_rate":63,"display_name":"Lii"},"score":5,"creation_date":1411636125,"post_id":24183443,"comment_id":40780791,"body_markdown":"Some stream operation, such as `sorted` and `distinct` actually store an intermediate result. See the [package API docs](http://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html#StreamOps) for some information about that.","body":"Some stream operation, such as <code>sorted</code> and <code>distinct</code> actually store an intermediate result. See the <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html#StreamOps\" rel=\"nofollow noreferrer\">package API docs</a> for some information about that."},{"owner":{"account_id":2027945,"reputation":4954,"user_id":1812434,"accept_rate":57,"display_name":"Venkata Raju"},"score":0,"creation_date":1445004792,"post_id":24183443,"comment_id":54152693,"body_markdown":"@Lii I see `No storage` in the same page. Even it stores we can&#39;t get access to that storage (so `No storage` is fine i guess)","body":"@Lii I see <code>No storage</code> in the same page. Even it stores we can&#39;t get access to that storage (so <code>No storage</code> is fine i guess)"},{"owner":{"account_id":231391,"reputation":6221,"user_id":495598,"display_name":"Manu Manjunath"},"score":0,"creation_date":1449752054,"post_id":24183443,"comment_id":56149432,"body_markdown":"Good answer. But since extra space is used, it many not be a great idea for programmers to use your approach on very large collection.","body":"Good answer. But since extra space is used, it many not be a great idea for programmers to use your approach on very large collection."},{"owner":{"account_id":3691593,"reputation":1094,"user_id":3074057,"display_name":"Beezer"},"score":0,"creation_date":1480654567,"post_id":24183443,"comment_id":69061525,"body_markdown":"I like the simplicity of the solution from an understandability perspective and leveraging an existing method on an existing data structure...the solution previous with a map implementation is harder to understand but for sure Manu is right, for large collections I would not use this intuitive, and would opt for the map one above.","body":"I like the simplicity of the solution from an understandability perspective and leveraging an existing method on an existing data structure...the solution previous with a map implementation is harder to understand but for sure Manu is right, for large collections I would not use this intuitive, and would opt for the map one above."},{"owner":{"account_id":903132,"reputation":15025,"user_id":938694,"accept_rate":59,"display_name":"Cubic"},"score":0,"creation_date":1570108405,"post_id":24183443,"comment_id":102815628,"body_markdown":"This is one of the few correct answers here. Most of the other ones don&#39;t actually reverse the stream, they try to avoid doing it somehow (which only works under peculiar sets of circumstances under which you normally wouldn&#39;t need to reverse in the first place).\n\nIf you try to reverse a stream that doesn&#39;t fit into memory you&#39;re doing it wrong anyway. Dump it into a DB and get a reversed stream using regular SQL.","body":"This is one of the few correct answers here. Most of the other ones don&#39;t actually reverse the stream, they try to avoid doing it somehow (which only works under peculiar sets of circumstances under which you normally wouldn&#39;t need to reverse in the first place).  If you try to reverse a stream that doesn&#39;t fit into memory you&#39;re doing it wrong anyway. Dump it into a DB and get a reversed stream using regular SQL."}],"tags":[],"owner":{"account_id":2027945,"reputation":4954,"user_id":1812434,"accept_rate":57,"display_name":"Venkata Raju"},"comment_count":5,"down_vote_count":1,"up_vote_count":59,"is_accepted":false,"score":58,"last_activity_date":1570108041,"creation_date":1402573258,"answer_id":24183443,"question_id":24010109,"body_markdown":"General Question:\r\n\r\nStream does not store any elements.\r\n\r\nSo iterating elements in the reverse order is not possible without storing the elements in some intermediate collection.\r\n\r\n    Stream.of(&quot;1&quot;, &quot;2&quot;, &quot;20&quot;, &quot;3&quot;)\r\n          .collect(Collectors.toCollection(ArrayDeque::new)) // or LinkedList\r\n          .descendingIterator()\r\n\t      .forEachRemaining(System.out::println);\r\n\r\nUpdate: Changed LinkedList to ArrayDeque (better) [see here for details](https://stackoverflow.com/questions/6163166/why-is-arraydeque-better-than-linkedlist)\r\n\r\nPrints:\r\n\r\n    3\r\n\r\n    20\r\n\r\n    2\r\n\r\n    1\r\n\r\nBy the way, using `sort` method is not correct as it sorts, NOT reverses (assuming stream may have unordered elements)\r\n\r\nSpecific Question: \r\n\r\nI found this simple, easier and intuitive(Copied @Holger [comment](https://stackoverflow.com/questions/24010109/java-8-stream-reverse-order/24183443#comment37013255_24011264))\r\n\r\n    IntStream.iterate(to - 1, i -&gt; i - 1).limit(to - from)\r\n","title":"Java 8 stream reverse order","body":"<p>General Question:</p>\n\n<p>Stream does not store any elements.</p>\n\n<p>So iterating elements in the reverse order is not possible without storing the elements in some intermediate collection.</p>\n\n<pre><code>Stream.of(\"1\", \"2\", \"20\", \"3\")\n      .collect(Collectors.toCollection(ArrayDeque::new)) // or LinkedList\n      .descendingIterator()\n      .forEachRemaining(System.out::println);\n</code></pre>\n\n<p>Update: Changed LinkedList to ArrayDeque (better) <a href=\"https://stackoverflow.com/questions/6163166/why-is-arraydeque-better-than-linkedlist\">see here for details</a></p>\n\n<p>Prints:</p>\n\n<pre><code>3\n\n20\n\n2\n\n1\n</code></pre>\n\n<p>By the way, using <code>sort</code> method is not correct as it sorts, NOT reverses (assuming stream may have unordered elements)</p>\n\n<p>Specific Question: </p>\n\n<p>I found this simple, easier and intuitive(Copied @Holger <a href=\"https://stackoverflow.com/questions/24010109/java-8-stream-reverse-order/24183443#comment37013255_24011264\">comment</a>)</p>\n\n<pre><code>IntStream.iterate(to - 1, i -&gt; i - 1).limit(to - from)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27543,"reputation":7198,"user_id":72810,"accept_rate":61,"display_name":"lexicalscope"},"comment_count":0,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1405199982,"creation_date":1405199982,"answer_id":24717422,"question_id":24010109,"body_markdown":"You could define your own collector that collects the elements in reverse order:\r\n\r\n    public static &lt;T&gt; Collector&lt;T, List&lt;T&gt;, List&lt;T&gt;&gt; inReverse() {\r\n        return Collector.of(\r\n            ArrayList::new,\r\n            (l, t) -&gt; l.add(t),\r\n            (l, r) -&gt; {l.addAll(r); return l;},\r\n            Lists::&lt;T&gt;reverse);\r\n    }\r\n\r\nAnd use it like:\r\n\r\n    stream.collect(inReverse()).forEach(t -&gt; ...)\r\n\r\nI use an ArrayList in forward order to efficiently insert collect the items (at the end of the list), and Guava Lists.reverse to efficiently give a reversed view of the list without making another copy of it.\r\n\r\nHere are some test cases for the custom collector:\r\n\r\n    import static org.hamcrest.MatcherAssert.assertThat;\r\n    import static org.hamcrest.Matchers.*;\r\n\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    import java.util.function.BiConsumer;\r\n    import java.util.function.BinaryOperator;\r\n    import java.util.function.Function;\r\n    import java.util.function.Supplier;\r\n    import java.util.stream.Collector;\r\n\r\n    import org.hamcrest.Matchers;\r\n    import org.junit.Test;\r\n\r\n    import com.google.common.collect.Lists;\r\n\r\n    public class TestReverseCollector {\r\n        private final Object t1 = new Object();\r\n        private final Object t2 = new Object();\r\n        private final Object t3 = new Object();\r\n        private final Object t4 = new Object();\r\n\r\n        private final Collector&lt;Object, List&lt;Object&gt;, List&lt;Object&gt;&gt; inReverse = inReverse();\r\n        private final Supplier&lt;List&lt;Object&gt;&gt; supplier = inReverse.supplier();\r\n        private final BiConsumer&lt;List&lt;Object&gt;, Object&gt; accumulator = inReverse.accumulator();\r\n        private final Function&lt;List&lt;Object&gt;, List&lt;Object&gt;&gt; finisher = inReverse.finisher();\r\n        private final BinaryOperator&lt;List&lt;Object&gt;&gt; combiner = inReverse.combiner();\r\n\r\n        @Test public void associative() {\r\n            final List&lt;Object&gt; a1 = supplier.get();\r\n            accumulator.accept(a1, t1);\r\n            accumulator.accept(a1, t2);\r\n            final List&lt;Object&gt; r1 = finisher.apply(a1);\r\n\r\n            final List&lt;Object&gt; a2 = supplier.get();\r\n            accumulator.accept(a2, t1);\r\n            final List&lt;Object&gt; a3 = supplier.get();\r\n            accumulator.accept(a3, t2);\r\n            final List&lt;Object&gt; r2 = finisher.apply(combiner.apply(a2, a3));\r\n\r\n            assertThat(r1, Matchers.equalTo(r2));\r\n        }\r\n\r\n        @Test public void identity() {\r\n            final List&lt;Object&gt; a1 = supplier.get();\r\n            accumulator.accept(a1, t1);\r\n            accumulator.accept(a1, t2);\r\n            final List&lt;Object&gt; r1 = finisher.apply(a1);\r\n\r\n            final List&lt;Object&gt; a2 = supplier.get();\r\n            accumulator.accept(a2, t1);\r\n            accumulator.accept(a2, t2);\r\n            final List&lt;Object&gt; r2 = finisher.apply(combiner.apply(a2, supplier.get()));\r\n\r\n            assertThat(r1, equalTo(r2));\r\n        }\r\n\r\n        @Test public void reversing() throws Exception {\r\n            final List&lt;Object&gt; a2 = supplier.get();\r\n            accumulator.accept(a2, t1);\r\n            accumulator.accept(a2, t2);\r\n\r\n            final List&lt;Object&gt; a3 = supplier.get();\r\n            accumulator.accept(a3, t3);\r\n            accumulator.accept(a3, t4);\r\n\r\n            final List&lt;Object&gt; r2 = finisher.apply(combiner.apply(a2, a3));\r\n\r\n            assertThat(r2, contains(t4, t3, t2, t1));\r\n        }\r\n\r\n        public static &lt;T&gt; Collector&lt;T, List&lt;T&gt;, List&lt;T&gt;&gt; inReverse() {\r\n            return Collector.of(\r\n                ArrayList::new,\r\n                (l, t) -&gt; l.add(t),\r\n                (l, r) -&gt; {l.addAll(r); return l;},\r\n                Lists::&lt;T&gt;reverse);\r\n        }\r\n    }\r\n","title":"Java 8 stream reverse order","body":"<p>You could define your own collector that collects the elements in reverse order:</p>\n\n<pre><code>public static &lt;T&gt; Collector&lt;T, List&lt;T&gt;, List&lt;T&gt;&gt; inReverse() {\n    return Collector.of(\n        ArrayList::new,\n        (l, t) -&gt; l.add(t),\n        (l, r) -&gt; {l.addAll(r); return l;},\n        Lists::&lt;T&gt;reverse);\n}\n</code></pre>\n\n<p>And use it like:</p>\n\n<pre><code>stream.collect(inReverse()).forEach(t -&gt; ...)\n</code></pre>\n\n<p>I use an ArrayList in forward order to efficiently insert collect the items (at the end of the list), and Guava Lists.reverse to efficiently give a reversed view of the list without making another copy of it.</p>\n\n<p>Here are some test cases for the custom collector:</p>\n\n<pre><code>import static org.hamcrest.MatcherAssert.assertThat;\nimport static org.hamcrest.Matchers.*;\n\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.function.BiConsumer;\nimport java.util.function.BinaryOperator;\nimport java.util.function.Function;\nimport java.util.function.Supplier;\nimport java.util.stream.Collector;\n\nimport org.hamcrest.Matchers;\nimport org.junit.Test;\n\nimport com.google.common.collect.Lists;\n\npublic class TestReverseCollector {\n    private final Object t1 = new Object();\n    private final Object t2 = new Object();\n    private final Object t3 = new Object();\n    private final Object t4 = new Object();\n\n    private final Collector&lt;Object, List&lt;Object&gt;, List&lt;Object&gt;&gt; inReverse = inReverse();\n    private final Supplier&lt;List&lt;Object&gt;&gt; supplier = inReverse.supplier();\n    private final BiConsumer&lt;List&lt;Object&gt;, Object&gt; accumulator = inReverse.accumulator();\n    private final Function&lt;List&lt;Object&gt;, List&lt;Object&gt;&gt; finisher = inReverse.finisher();\n    private final BinaryOperator&lt;List&lt;Object&gt;&gt; combiner = inReverse.combiner();\n\n    @Test public void associative() {\n        final List&lt;Object&gt; a1 = supplier.get();\n        accumulator.accept(a1, t1);\n        accumulator.accept(a1, t2);\n        final List&lt;Object&gt; r1 = finisher.apply(a1);\n\n        final List&lt;Object&gt; a2 = supplier.get();\n        accumulator.accept(a2, t1);\n        final List&lt;Object&gt; a3 = supplier.get();\n        accumulator.accept(a3, t2);\n        final List&lt;Object&gt; r2 = finisher.apply(combiner.apply(a2, a3));\n\n        assertThat(r1, Matchers.equalTo(r2));\n    }\n\n    @Test public void identity() {\n        final List&lt;Object&gt; a1 = supplier.get();\n        accumulator.accept(a1, t1);\n        accumulator.accept(a1, t2);\n        final List&lt;Object&gt; r1 = finisher.apply(a1);\n\n        final List&lt;Object&gt; a2 = supplier.get();\n        accumulator.accept(a2, t1);\n        accumulator.accept(a2, t2);\n        final List&lt;Object&gt; r2 = finisher.apply(combiner.apply(a2, supplier.get()));\n\n        assertThat(r1, equalTo(r2));\n    }\n\n    @Test public void reversing() throws Exception {\n        final List&lt;Object&gt; a2 = supplier.get();\n        accumulator.accept(a2, t1);\n        accumulator.accept(a2, t2);\n\n        final List&lt;Object&gt; a3 = supplier.get();\n        accumulator.accept(a3, t3);\n        accumulator.accept(a3, t4);\n\n        final List&lt;Object&gt; r2 = finisher.apply(combiner.apply(a2, a3));\n\n        assertThat(r2, contains(t4, t3, t2, t1));\n    }\n\n    public static &lt;T&gt; Collector&lt;T, List&lt;T&gt;, List&lt;T&gt;&gt; inReverse() {\n        return Collector.of(\n            ArrayList::new,\n            (l, t) -&gt; l.add(t),\n            (l, r) -&gt; {l.addAll(r); return l;},\n            Lists::&lt;T&gt;reverse);\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"score":1,"creation_date":1677777186,"post_id":27404228,"comment_id":133408930,"body_markdown":"`Collectors.toList()` explicitly does not guarantee that the resulting list will be mutable, which is something that `Collections.reverse` requires in order to change the list.  &quot;There are no guarantees on the […] mutability […] of the List returned; if more control over the returned List is required, use toCollection(Supplier).&quot;  `Collections.toCollection(ArrayList::new)` would be guaranteed to work, whereas `toList` just happens to work given current implementations of the Java libraries.","body":"<code>Collectors.toList()</code> explicitly does not guarantee that the resulting list will be mutable, which is something that <code>Collections.reverse</code> requires in order to change the list.  &quot;There are no guarantees on the […] mutability […] of the List returned; if more control over the returned List is required, use toCollection(Supplier).&quot;  <code>Collections.toCollection(ArrayList::new)</code> would be guaranteed to work, whereas <code>toList</code> just happens to work given current implementations of the Java libraries."}],"tags":[],"owner":{"account_id":209251,"reputation":5134,"user_id":460175,"display_name":"comonad"},"comment_count":1,"down_vote_count":1,"up_vote_count":23,"is_accepted":false,"score":22,"last_activity_date":1418223761,"creation_date":1418223761,"answer_id":27404228,"question_id":24010109,"body_markdown":"without external lib...\r\n\r\n    import java.util.List;\r\n    import java.util.Collections;\r\n    import java.util.stream.Collector;\r\n\r\n    public class MyCollectors {\r\n     \r\n        public static &lt;T&gt; Collector&lt;T, ?, List&lt;T&gt;&gt; toListReversed() {\r\n            return Collectors.collectingAndThen(Collectors.toList(), l -&gt; {\r\n                Collections.reverse(l);\r\n                return l;\r\n            });\r\n        }\r\n     \r\n    }\r\n","title":"Java 8 stream reverse order","body":"<p>without external lib...</p>\n\n<pre><code>import java.util.List;\nimport java.util.Collections;\nimport java.util.stream.Collector;\n\npublic class MyCollectors {\n\n    public static &lt;T&gt; Collector&lt;T, ?, List&lt;T&gt;&gt; toListReversed() {\n        return Collectors.collectingAndThen(Collectors.toList(), l -&gt; {\n            Collections.reverse(l);\n            return l;\n        });\n    }\n\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":330599,"reputation":10771,"user_id":654799,"accept_rate":84,"display_name":"vach"},"score":1,"creation_date":1434053218,"post_id":30786975,"comment_id":49630361,"body_markdown":"Nice didnt know about this project","body":"Nice didnt know about this project"},{"owner":{"account_id":5914036,"reputation":5245,"user_id":4653367,"display_name":"John McClean"},"score":1,"creation_date":1442351418,"post_id":30786975,"comment_id":53044913,"body_markdown":"cyclops now also comes with [Spliterators](http://static.javadoc.io/com.aol.cyclops/cyclops-sequence-api/6.0.1/com/aol/cyclops/sequence/spliterators/package-frame.html) for efficient Stream reversal (currently for Ranges, arrays and Lists). Creating cyclops [SequenceM](http://static.javadoc.io/com.aol.cyclops/cyclops-sequence-api/6.0.1/com/aol/cyclops/sequence/SequenceM.html) Stream extension with SequenceM.of, SequenceM.range or SequenceM.fromList will automatically take advantage of efficiently reversible spliterators.","body":"cyclops now also comes with <a href=\"http://static.javadoc.io/com.aol.cyclops/cyclops-sequence-api/6.0.1/com/aol/cyclops/sequence/spliterators/package-frame.html\" rel=\"nofollow noreferrer\">Spliterators</a> for efficient Stream reversal (currently for Ranges, arrays and Lists). Creating cyclops <a href=\"http://static.javadoc.io/com.aol.cyclops/cyclops-sequence-api/6.0.1/com/aol/cyclops/sequence/SequenceM.html\" rel=\"nofollow noreferrer\">SequenceM</a> Stream extension with SequenceM.of, SequenceM.range or SequenceM.fromList will automatically take advantage of efficiently reversible spliterators."}],"tags":[],"owner":{"account_id":5914036,"reputation":5245,"user_id":4653367,"display_name":"John McClean"},"comment_count":2,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1456744542,"creation_date":1434041900,"answer_id":30786975,"question_id":24010109,"body_markdown":"[cyclops-react][1] StreamUtils has a reverse Stream method ([javadoc][2]). \r\n   \r\n      StreamUtils.reverse(Stream.of(&quot;1&quot;, &quot;2&quot;, &quot;20&quot;, &quot;3&quot;))\r\n                 .forEach(System.out::println);\r\n\r\nIt works by collecting to an ArrayList and then making use of the ListIterator class which can iterate in either direction, to iterate backwards over the list. \r\n\r\nIf you already have a List, it will be more efficient\r\n\r\n      StreamUtils.reversedStream(Arrays.asList(&quot;1&quot;, &quot;2&quot;, &quot;20&quot;, &quot;3&quot;))\r\n                 .forEach(System.out::println);\r\n\r\n\r\n  [1]: https://github.com/aol/cyclops-react\r\n  [2]: http://static.javadoc.io/com.aol.simplereact/cyclops-react/1.0.0-RC1/com/aol/cyclops/util/stream/StreamUtils.html","title":"Java 8 stream reverse order","body":"<p><a href=\"https://github.com/aol/cyclops-react\" rel=\"nofollow\">cyclops-react</a> StreamUtils has a reverse Stream method (<a href=\"http://static.javadoc.io/com.aol.simplereact/cyclops-react/1.0.0-RC1/com/aol/cyclops/util/stream/StreamUtils.html\" rel=\"nofollow\">javadoc</a>). </p>\n\n<pre><code>  StreamUtils.reverse(Stream.of(\"1\", \"2\", \"20\", \"3\"))\n             .forEach(System.out::println);\n</code></pre>\n\n<p>It works by collecting to an ArrayList and then making use of the ListIterator class which can iterate in either direction, to iterate backwards over the list. </p>\n\n<p>If you already have a List, it will be more efficient</p>\n\n<pre><code>  StreamUtils.reversedStream(Arrays.asList(\"1\", \"2\", \"20\", \"3\"))\n             .forEach(System.out::println);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1888725,"reputation":1493,"user_id":1707382,"display_name":"SlavaSt"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1469507635,"creation_date":1440960562,"answer_id":32299976,"question_id":24010109,"body_markdown":"One could write a collector that collects elements in reversed order:\r\n\r\n    public static &lt;T&gt; Collector&lt;T, ?, Stream&lt;T&gt;&gt; reversed() {\r\n        return Collectors.collectingAndThen(Collectors.toList(), list -&gt; {\r\n            Collections.reverse(list);\r\n            return list.stream();\r\n        });\r\n    }\r\n\r\nAnd use it like this:\r\n\r\n    Stream.of(1, 2, 3, 4, 5).collect(reversed()).forEach(System.out::println);\r\n\r\n**Original answer** (contains a bug - it does not work correctly for parallel streams):\r\n\r\nA general purpose stream reverse method could look like:\r\n\r\n    public static &lt;T&gt; Stream&lt;T&gt; reverse(Stream&lt;T&gt; stream) {\r\n        LinkedList&lt;T&gt; stack = new LinkedList&lt;&gt;();\r\n        stream.forEach(stack::push);\r\n        return stack.stream();\r\n    }","title":"Java 8 stream reverse order","body":"<p>One could write a collector that collects elements in reversed order:</p>\n\n<pre><code>public static &lt;T&gt; Collector&lt;T, ?, Stream&lt;T&gt;&gt; reversed() {\n    return Collectors.collectingAndThen(Collectors.toList(), list -&gt; {\n        Collections.reverse(list);\n        return list.stream();\n    });\n}\n</code></pre>\n\n<p>And use it like this:</p>\n\n<pre><code>Stream.of(1, 2, 3, 4, 5).collect(reversed()).forEach(System.out::println);\n</code></pre>\n\n<p><strong>Original answer</strong> (contains a bug - it does not work correctly for parallel streams):</p>\n\n<p>A general purpose stream reverse method could look like:</p>\n\n<pre><code>public static &lt;T&gt; Stream&lt;T&gt; reverse(Stream&lt;T&gt; stream) {\n    LinkedList&lt;T&gt; stack = new LinkedList&lt;&gt;();\n    stream.forEach(stack::push);\n    return stack.stream();\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":6243460,"reputation":97907,"user_id":4856258,"accept_rate":100,"display_name":"Tagir Valeev"},"score":4,"creation_date":1445417495,"post_id":33249912,"comment_id":54311098,"body_markdown":"You violate the contract of `Comparator`. As a result nobody can guarantee you that this &quot;trick&quot; will work in any future Java version with any sorting algorithm. The same trick does not work for parallel stream, for example, as parallel sorting algorithm uses `Comparator` in different way. For sequential sort it works purely by chance. I would not recommend anybody to use this solution.","body":"You violate the contract of <code>Comparator</code>. As a result nobody can guarantee you that this &quot;trick&quot; will work in any future Java version with any sorting algorithm. The same trick does not work for parallel stream, for example, as parallel sorting algorithm uses <code>Comparator</code> in different way. For sequential sort it works purely by chance. I would not recommend anybody to use this solution."},{"owner":{"account_id":6243460,"reputation":97907,"user_id":4856258,"accept_rate":100,"display_name":"Tagir Valeev"},"score":1,"creation_date":1445417635,"post_id":33249912,"comment_id":54311185,"body_markdown":"Also it doesn&#39;t work when you set `System.setProperty(&quot;java.util.Arrays.useLegacyMergeSort&quot;, &quot;true&quot;);`","body":"Also it doesn&#39;t work when you set <code>System.setProperty(&quot;java.util.Arrays.useLegacyMergeSort&quot;, &quot;true&quot;);</code>"},{"owner":{"account_id":3847093,"reputation":71,"user_id":3188270,"display_name":"parmeshwor11"},"score":0,"creation_date":1445419667,"post_id":33249912,"comment_id":54312493,"body_markdown":"I thought it was about just printing things in reverse order not in sorted order (ie. descending order), and it works with parallel stream too :\n\n `public static &lt;T&gt; void reverseHelper(List&lt;T&gt; li){\n    li.parallelStream()\n    .sorted((x,y)-&gt;-1)\n    .collect(Collectors.toList())\n    .forEach(System.out::println);\n\t\t\n    }`","body":"I thought it was about just printing things in reverse order not in sorted order (ie. descending order), and it works with parallel stream too :   <code>public static &lt;T&gt; void reverseHelper(List&lt;T&gt; li){     li.parallelStream()     .sorted((x,y)-&gt;-1)     .collect(Collectors.toList())     .forEach(System.out::println); \t\t     }</code>"},{"owner":{"account_id":6243460,"reputation":97907,"user_id":4856258,"accept_rate":100,"display_name":"Tagir Valeev"},"score":1,"creation_date":1445424672,"post_id":33249912,"comment_id":54315755,"body_markdown":"Try `reverseHelper(IntStream.range(0, 8193).boxed().collect(Collectors.toList()))` (result may depend on number of cores though).","body":"Try <code>reverseHelper(IntStream.range(0, 8193).boxed().collect(Collectors.toList()))</code> (result may depend on number of cores though)."}],"tags":[],"owner":{"account_id":3847093,"reputation":71,"user_id":3188270,"display_name":"parmeshwor11"},"comment_count":4,"down_vote_count":3,"up_vote_count":2,"is_accepted":false,"score":-1,"last_activity_date":1445395593,"creation_date":1445394260,"answer_id":33249912,"question_id":24010109,"body_markdown":"The most generic and the easiest way to reverse a list will be :\r\n\r\n    public static &lt;T&gt; void reverseHelper(List&lt;T&gt; li){\r\n\t\t\r\n\t li.stream()\r\n    .sorted((x,y)-&gt; -1)\r\n    .collect(Collectors.toList())\r\n    .forEach(System.out::println);\r\n\t\t\r\n    \t}","title":"Java 8 stream reverse order","body":"<p>The most generic and the easiest way to reverse a list will be :</p>\n\n<pre><code>public static &lt;T&gt; void reverseHelper(List&lt;T&gt; li){\n\n li.stream()\n.sorted((x,y)-&gt; -1)\n.collect(Collectors.toList())\n.forEach(System.out::println);\n\n    }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":330599,"reputation":10771,"user_id":654799,"accept_rate":84,"display_name":"vach"},"score":0,"creation_date":1452073645,"post_id":34621495,"comment_id":57005289,"body_markdown":"awesome and simple. Is this from some opensource utilty? (the Estreams thing) or some piece of your code?","body":"awesome and simple. Is this from some opensource utilty? (the Estreams thing) or some piece of your code?"},{"owner":{"account_id":1283505,"reputation":2377,"user_id":1237044,"accept_rate":100,"display_name":"Brandon"},"score":0,"creation_date":1452113661,"post_id":34621495,"comment_id":57031040,"body_markdown":"Thanks! Unfortunately, I didn&#39;t intend to leak the `Estreams` name (I&#39;m going to remove it from the post). It&#39;s one of our company&#39;s internal utility classes, which we use to supplement `java.util.stream.Stream`&#39;s `static` methods.","body":"Thanks! Unfortunately, I didn&#39;t intend to leak the <code>Estreams</code> name (I&#39;m going to remove it from the post). It&#39;s one of our company&#39;s internal utility classes, which we use to supplement <code>java.util.stream.Stream</code>&#39;s <code>static</code> methods."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":4,"creation_date":1454009058,"post_id":34621495,"comment_id":57863442,"body_markdown":"Okay…“awesome and simple”… Is there any case that this solution handles, which [Stuart Marks’ even simpler solution](http://stackoverflow.com/a/24011264/2711488) didn’t already handle more than one and a half year ago?","body":"Okay…“awesome and simple”… Is there any case that this solution handles, which <a href=\"http://stackoverflow.com/a/24011264/2711488\">Stuart Marks’ even simpler solution</a> didn’t already handle more than one and a half year ago?"},{"owner":{"account_id":1283505,"reputation":2377,"user_id":1237044,"accept_rate":100,"display_name":"Brandon"},"score":0,"creation_date":1454024588,"post_id":34621495,"comment_id":57871596,"body_markdown":"I just tested his solution with my test method above; it passes. I was unnecessarily avoiding overflow instead of embracing it as he did. I agree that his is better. I&#39;ll edit mine to reflect that.","body":"I just tested his solution with my test method above; it passes. I was unnecessarily avoiding overflow instead of embracing it as he did. I agree that his is better. I&#39;ll edit mine to reflect that."},{"owner":{"account_id":1283505,"reputation":2377,"user_id":1237044,"accept_rate":100,"display_name":"Brandon"},"score":0,"creation_date":1454024909,"post_id":34621495,"comment_id":57871713,"body_markdown":"I encourage @vach to accept his instead of mine. Once my suggested edit of his post is accepted, I&#39;ll delete my answer altogether.","body":"I encourage @vach to accept his instead of mine. Once my suggested edit of his post is accepted, I&#39;ll delete my answer altogether."},{"owner":{"account_id":6243460,"reputation":97907,"user_id":4856258,"accept_rate":100,"display_name":"Tagir Valeev"},"score":1,"creation_date":1454032632,"post_id":34621495,"comment_id":57873933,"body_markdown":"@vach, you may use by [`StreamEx`](https://github.com/amaembo/streamex) specifying step: `IntStreamEx.rangeClosed(from-1, to, -1)`","body":"@vach, you may use by <a href=\"https://github.com/amaembo/streamex\" rel=\"nofollow noreferrer\"><code>StreamEx</code></a> specifying step: <code>IntStreamEx.rangeClosed(from-1, to, -1)</code>"},{"owner":{"account_id":330599,"reputation":10771,"user_id":654799,"accept_rate":84,"display_name":"vach"},"score":0,"creation_date":1454154200,"post_id":34621495,"comment_id":57923633,"body_markdown":"@TagirValeev thanks, i&#39;ve seen this lib few places, on habrahabr also, i&#39;m gonna check it out for sure, seems like a good tool","body":"@TagirValeev thanks, i&#39;ve seen this lib few places, on habrahabr also, i&#39;m gonna check it out for sure, seems like a good tool"},{"owner":{"account_id":187950,"reputation":2035,"user_id":426371,"accept_rate":82,"display_name":"neXus"},"score":0,"creation_date":1511861128,"post_id":34621495,"comment_id":82012164,"body_markdown":"What about `IntStream.range(-to, -from).map(i -&gt; -i-1)` or `IntStream.rangeClosed(-to, -from).map(i -&gt; -i)`?","body":"What about <code>IntStream.range(-to, -from).map(i -&gt; -i-1)</code> or <code>IntStream.rangeClosed(-to, -from).map(i -&gt; -i)</code>?"},{"owner":{"account_id":1283505,"reputation":2377,"user_id":1237044,"accept_rate":100,"display_name":"Brandon"},"score":0,"creation_date":1511899833,"post_id":34621495,"comment_id":82037180,"body_markdown":"@neXus: Both of your proposals fail on the second to last test above: `assertArrayEquals(revRange(MIN_VALUE, MIN_VALUE + 1).toArray(), new int[]{MIN_VALUE});`.","body":"@neXus: Both of your proposals fail on the second to last test above: <code>assertArrayEquals(revRange(MIN_VALUE, MIN_VALUE + 1).toArray(), new int[]{MIN_VALUE});</code>."}],"tags":[],"owner":{"account_id":1283505,"reputation":2377,"user_id":1237044,"accept_rate":100,"display_name":"Brandon"},"comment_count":9,"down_vote_count":1,"up_vote_count":42,"is_accepted":false,"score":41,"last_activity_date":1454024828,"creation_date":1452029114,"answer_id":34621495,"question_id":24010109,"body_markdown":"Many of the solutions here sort or reverse the `IntStream`, but that unnecessarily requires intermediate storage. [Stuart Marks&#39;s solution](https://stackoverflow.com/a/24011264/2711488) is the way to go:\r\n\r\n    static IntStream revRange(int from, int to) {\r\n        return IntStream.range(from, to).map(i -&gt; to - i + from - 1);\r\n    }\r\n\r\nIt correctly handles overflow as well, passing this test:\r\n\r\n    @Test\r\n    public void testRevRange() {\r\n        assertArrayEquals(revRange(0, 5).toArray(), new int[]{4, 3, 2, 1, 0});\r\n        assertArrayEquals(revRange(-5, 0).toArray(), new int[]{-1, -2, -3, -4, -5});\r\n        assertArrayEquals(revRange(1, 4).toArray(), new int[]{3, 2, 1});\r\n        assertArrayEquals(revRange(0, 0).toArray(), new int[0]);\r\n        assertArrayEquals(revRange(0, -1).toArray(), new int[0]);\r\n        assertArrayEquals(revRange(MIN_VALUE, MIN_VALUE).toArray(), new int[0]);\r\n        assertArrayEquals(revRange(MAX_VALUE, MAX_VALUE).toArray(), new int[0]);\r\n        assertArrayEquals(revRange(MIN_VALUE, MIN_VALUE + 1).toArray(), new int[]{MIN_VALUE});\r\n        assertArrayEquals(revRange(MAX_VALUE - 1, MAX_VALUE).toArray(), new int[]{MAX_VALUE - 1});\r\n    }","title":"Java 8 stream reverse order","body":"<p>Many of the solutions here sort or reverse the <code>IntStream</code>, but that unnecessarily requires intermediate storage. <a href=\"https://stackoverflow.com/a/24011264/2711488\">Stuart Marks's solution</a> is the way to go:</p>\n\n<pre><code>static IntStream revRange(int from, int to) {\n    return IntStream.range(from, to).map(i -&gt; to - i + from - 1);\n}\n</code></pre>\n\n<p>It correctly handles overflow as well, passing this test:</p>\n\n<pre><code>@Test\npublic void testRevRange() {\n    assertArrayEquals(revRange(0, 5).toArray(), new int[]{4, 3, 2, 1, 0});\n    assertArrayEquals(revRange(-5, 0).toArray(), new int[]{-1, -2, -3, -4, -5});\n    assertArrayEquals(revRange(1, 4).toArray(), new int[]{3, 2, 1});\n    assertArrayEquals(revRange(0, 0).toArray(), new int[0]);\n    assertArrayEquals(revRange(0, -1).toArray(), new int[0]);\n    assertArrayEquals(revRange(MIN_VALUE, MIN_VALUE).toArray(), new int[0]);\n    assertArrayEquals(revRange(MAX_VALUE, MAX_VALUE).toArray(), new int[0]);\n    assertArrayEquals(revRange(MIN_VALUE, MIN_VALUE + 1).toArray(), new int[]{MIN_VALUE});\n    assertArrayEquals(revRange(MAX_VALUE - 1, MAX_VALUE).toArray(), new int[]{MAX_VALUE - 1});\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":270764,"reputation":4103,"user_id":560902,"accept_rate":80,"display_name":"Jochen Bedersdorfer"},"score":4,"creation_date":1464036142,"post_id":35089581,"comment_id":62308985,"body_markdown":"This is sorting in reverse order, not reverting a list.","body":"This is sorting in reverse order, not reverting a list."}],"tags":[],"owner":{"account_id":69926,"reputation":12519,"user_id":203204,"accept_rate":72,"display_name":"Anthony"},"comment_count":1,"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1454085532,"creation_date":1454085532,"answer_id":35089581,"question_id":24010109,"body_markdown":"Java 8 way to do this:\r\n\r\n\t\tList&lt;Integer&gt; list = Arrays.asList(1,2,3,4);\r\n\t\tComparator&lt;Integer&gt; comparator = Integer::compare;\r\n\t\tlist.stream().sorted(comparator.reversed()).forEach(System.out::println);\r\n","title":"Java 8 stream reverse order","body":"<p>Java 8 way to do this:</p>\n\n<pre><code>    List&lt;Integer&gt; list = Arrays.asList(1,2,3,4);\n    Comparator&lt;Integer&gt; comparator = Integer::compare;\n    list.stream().sorted(comparator.reversed()).forEach(System.out::println);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":72569,"reputation":10656,"user_id":209502,"accept_rate":67,"display_name":"Krzysztof Wolny"},"score":14,"creation_date":1470323471,"post_id":36192274,"comment_id":64913726,"body_markdown":"It is elegant but not fully working as it seems as elements of the list are required to be `Comparable`...","body":"It is elegant but not fully working as it seems as elements of the list are required to be <code>Comparable</code>..."},{"owner":{"account_id":1699613,"reputation":1233,"user_id":1560086,"display_name":"Dillon Ryan Redding"},"score":107,"creation_date":1541341496,"post_id":36192274,"comment_id":93175244,"body_markdown":"That&#39;s assuming we want elements to be *sorted* in reverse order. The question is about reversing the order of a stream.","body":"That&#39;s assuming we want elements to be <i>sorted</i> in reverse order. The question is about reversing the order of a stream."},{"owner":{"account_id":13020031,"reputation":179,"user_id":9409790,"display_name":"D&#225;vid Leblay"},"score":0,"creation_date":1600692353,"post_id":36192274,"comment_id":113158347,"body_markdown":"@KrzysztofWolny you can pass a comparator function to reverseOrder(), so that shouldn&#39;t be too much of a bother","body":"@KrzysztofWolny you can pass a comparator function to reverseOrder(), so that shouldn&#39;t be too much of a bother"},{"owner":{"account_id":330599,"reputation":10771,"user_id":654799,"accept_rate":84,"display_name":"vach"},"score":1,"creation_date":1668277706,"post_id":36192274,"comment_id":131368277,"body_markdown":"i think we are missing the point of the question, the stream api is normally backed by finite source (an array/list whatever), its not like a hot observable stream. The purpose was to do this efficiently like you would write a for loop iterating down instead of up... which i think is possible with custom spliterator.","body":"i think we are missing the point of the question, the stream api is normally backed by finite source (an array/list whatever), its not like a hot observable stream. The purpose was to do this efficiently like you would write a for loop iterating down instead of up... which i think is possible with custom spliterator."}],"tags":[],"owner":{"account_id":4029140,"reputation":4907,"user_id":3316017,"display_name":"Kishan B"},"comment_count":4,"down_vote_count":41,"up_vote_count":114,"is_accepted":false,"score":73,"last_activity_date":1641834710,"creation_date":1458786757,"answer_id":36192274,"question_id":24010109,"body_markdown":"Elegant solution \r\n\r\n    List&lt;Integer&gt; list = Arrays.asList(1,2,3,4);\r\n    list.stream()\r\n        .sorted(Collections.reverseOrder()) // Method on Stream&lt;Integer&gt;\r\n        .forEach(System.out::println);","title":"Java 8 stream reverse order","body":"<p>Elegant solution</p>\n<pre><code>List&lt;Integer&gt; list = Arrays.asList(1,2,3,4);\nlist.stream()\n    .sorted(Collections.reverseOrder()) // Method on Stream&lt;Integer&gt;\n    .forEach(System.out::println);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":346470,"reputation":481,"user_id":680021,"display_name":"lukens"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1458845950,"creation_date":1458845950,"answer_id":36208024,"question_id":24010109,"body_markdown":"I would suggest using [jOOλ][1], it&#39;s a great library that adds lots of useful functionality to Java 8 streams and lambdas.\r\n\r\nYou can then do the following:\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    List&lt;Integer&gt; list = Arrays.asList(1,2,3,4);    \r\n    Seq.seq(list).reverse().forEach(System.out::println)\r\n\r\nSimple as that. It&#39;s a pretty lightweight library, and well worth adding to any Java 8 project.\r\n\r\n  [1]: https://github.com/jOOQ/jOOL","title":"Java 8 stream reverse order","body":"<p>I would suggest using <a href=\"https://github.com/jOOQ/jOOL\" rel=\"noreferrer\">jOOλ</a>, it's a great library that adds lots of useful functionality to Java 8 streams and lambdas.</p>\n\n<p>You can then do the following:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>List&lt;Integer&gt; list = Arrays.asList(1,2,3,4);    \nSeq.seq(list).reverse().forEach(System.out::println)\n</code></pre>\n\n<p>Simple as that. It's a pretty lightweight library, and well worth adding to any Java 8 project.</p>\n"},{"comments":[{"owner":{"account_id":8129122,"reputation":1496,"user_id":6122976,"display_name":"wilmol"},"score":28,"creation_date":1573787306,"post_id":41911784,"comment_id":104008332,"body_markdown":"This doesn&#39;t reverse the stream. It sorts the stream in reverse order. So if you had `Stream.of(1,3,2)` the result would be `Stream.of(3,2,1)` NOT `Stream.of(2,3,1)`","body":"This doesn&#39;t reverse the stream. It sorts the stream in reverse order. So if you had <code>Stream.of(1,3,2)</code> the result would be <code>Stream.of(3,2,1)</code> NOT <code>Stream.of(2,3,1)</code>"}],"tags":[],"owner":{"account_id":2182945,"reputation":1298,"user_id":1932017,"display_name":"YujiSoftware"},"comment_count":1,"down_vote_count":11,"up_vote_count":22,"is_accepted":false,"score":11,"last_activity_date":1549834489,"creation_date":1485619053,"answer_id":41911784,"question_id":24010109,"body_markdown":"If implemented `Comparable&lt;T&gt;` (ex. `Integer`, `String`, `Date`), you can do it using `Comparator.reverseOrder()`.\r\n\r\n    List&lt;Integer&gt; list = Arrays.asList(1, 2, 3, 4);\r\n    list.stream()\r\n         .sorted(Comparator.reverseOrder())\r\n         .forEach(System.out::println);","title":"Java 8 stream reverse order","body":"<p>If implemented <code>Comparable&lt;T&gt;</code> (ex. <code>Integer</code>, <code>String</code>, <code>Date</code>), you can do it using <code>Comparator.reverseOrder()</code>.</p>\n\n<pre><code>List&lt;Integer&gt; list = Arrays.asList(1, 2, 3, 4);\nlist.stream()\n     .sorted(Comparator.reverseOrder())\n     .forEach(System.out::println);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20228,"reputation":40720,"user_id":48136,"display_name":"bric3"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1503406712,"creation_date":1503406712,"answer_id":45818350,"question_id":24010109,"body_markdown":"For reference I was looking at the same problem, I wanted to join the string value of stream elements in the reverse order.\r\n\r\nitemList = { last, middle, first } =&gt; first,middle,last\r\n\r\nI started to use an intermediate collection with `collectingAndThen` from _comonad_ or the `ArrayDeque` collector of _Stuart Marks_, although I wasn&#39;t happy with intermediate collection, and streaming again\r\n\r\n    itemList.stream()\r\n            .map(TheObject::toString)\r\n            .collect(Collectors.collectingAndThen(Collectors.toList(),\r\n                                                  strings -&gt; {\r\n                                                          Collections.reverse(strings);\r\n                                                          return strings;\r\n                                                  }))\r\n            .stream()\r\n            .collect(Collector.joining());\r\n\r\nSo I iterated over Stuart Marks answer that was using the `Collector.of` factory, that has the interesting _finisher_ lambda.\r\n\r\n    itemList.stream()\r\n            .collect(Collector.of(StringBuilder::new,\r\n                                 (sb, o) -&gt; sb.insert(0, o),\r\n                                 (r1, r2) -&gt; { r1.insert(0, r2); return r1; },\r\n                                 StringBuilder::toString));\r\n\r\nSince in this case the stream is not parallel, the combiner is not relevant that much, I&#39;m using `insert` anyway for the sake of code consistency but it does not matter as it would depend of which stringbuilder is built first.\r\n\r\nI looked at the StringJoiner, however it does not have an `insert` method.","title":"Java 8 stream reverse order","body":"<p>For reference I was looking at the same problem, I wanted to join the string value of stream elements in the reverse order.</p>\n\n<p>itemList = { last, middle, first } => first,middle,last</p>\n\n<p>I started to use an intermediate collection with <code>collectingAndThen</code> from <em>comonad</em> or the <code>ArrayDeque</code> collector of <em>Stuart Marks</em>, although I wasn't happy with intermediate collection, and streaming again</p>\n\n<pre><code>itemList.stream()\n        .map(TheObject::toString)\n        .collect(Collectors.collectingAndThen(Collectors.toList(),\n                                              strings -&gt; {\n                                                      Collections.reverse(strings);\n                                                      return strings;\n                                              }))\n        .stream()\n        .collect(Collector.joining());\n</code></pre>\n\n<p>So I iterated over Stuart Marks answer that was using the <code>Collector.of</code> factory, that has the interesting <em>finisher</em> lambda.</p>\n\n<pre><code>itemList.stream()\n        .collect(Collector.of(StringBuilder::new,\n                             (sb, o) -&gt; sb.insert(0, o),\n                             (r1, r2) -&gt; { r1.insert(0, r2); return r1; },\n                             StringBuilder::toString));\n</code></pre>\n\n<p>Since in this case the stream is not parallel, the combiner is not relevant that much, I'm using <code>insert</code> anyway for the sake of code consistency but it does not matter as it would depend of which stringbuilder is built first.</p>\n\n<p>I looked at the StringJoiner, however it does not have an <code>insert</code> method.</p>\n"},{"tags":[],"owner":{"account_id":189283,"reputation":625,"user_id":428532,"accept_rate":75,"display_name":"Girish Jain"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1506025741,"creation_date":1506025741,"answer_id":46352674,"question_id":24010109,"body_markdown":"Answering specific question of reversing with IntStream, below worked for me:\r\n\r\n    IntStream.range(0, 10)\r\n      .map(x -&gt; x * -1)\r\n      .sorted()\r\n      .map(Math::abs)\r\n      .forEach(System.out::println);","title":"Java 8 stream reverse order","body":"<p>Answering specific question of reversing with IntStream, below worked for me:</p>\n\n<pre><code>IntStream.range(0, 10)\n  .map(x -&gt; x * -1)\n  .sorted()\n  .map(Math::abs)\n  .forEach(System.out::println);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11914266,"reputation":1165,"user_id":8718583,"accept_rate":75,"display_name":"Tet"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1508500048,"creation_date":1508488773,"answer_id":46845327,"question_id":24010109,"body_markdown":"**Simplest way** (simple collect - supports parallel streams):\r\n\r\n    public static &lt;T&gt; Stream&lt;T&gt; reverse(Stream&lt;T&gt; stream) {\r\n        return stream\r\n                .collect(Collector.of(\r\n                        () -&gt; new ArrayDeque&lt;T&gt;(),\r\n                        ArrayDeque::addFirst,\r\n                        (q1, q2) -&gt; { q2.addAll(q1); return q2; })\r\n                )\r\n                .stream();\r\n    }\r\n\r\n**Advanced way** (supports parallel streams in an ongoing way):\r\n\r\n    public static &lt;T&gt; Stream&lt;T&gt; reverse(Stream&lt;T&gt; stream) {\r\n        Objects.requireNonNull(stream, &quot;stream&quot;);\r\n\r\n        class ReverseSpliterator implements Spliterator&lt;T&gt; {\r\n            private Spliterator&lt;T&gt; spliterator;\r\n            private final Deque&lt;T&gt; deque = new ArrayDeque&lt;&gt;();\r\n\r\n            private ReverseSpliterator(Spliterator&lt;T&gt; spliterator) {\r\n                this.spliterator = spliterator;\r\n            }\r\n\r\n            @Override\r\n            @SuppressWarnings({&quot;StatementWithEmptyBody&quot;})\r\n            public boolean tryAdvance(Consumer&lt;? super T&gt; action) {\r\n                while(spliterator.tryAdvance(deque::addFirst));\r\n                if(!deque.isEmpty()) {\r\n                    action.accept(deque.remove());\r\n                    return true;\r\n                }\r\n                return false;\r\n            }\r\n\r\n            @Override\r\n            public Spliterator&lt;T&gt; trySplit() {\r\n                // After traveling started the spliterator don&#39;t contain elements!\r\n                Spliterator&lt;T&gt; prev = spliterator.trySplit();\r\n                if(prev == null) {\r\n                    return null;\r\n                }\r\n\r\n                Spliterator&lt;T&gt; me = spliterator;\r\n                spliterator = prev;\r\n                return new ReverseSpliterator(me);\r\n            }\r\n\r\n            @Override\r\n            public long estimateSize() {\r\n                return spliterator.estimateSize();\r\n            }\r\n\r\n            @Override\r\n            public int characteristics() {\r\n                return spliterator.characteristics();\r\n            }\r\n\r\n            @Override\r\n            public Comparator&lt;? super T&gt; getComparator() {\r\n                Comparator&lt;? super T&gt; comparator = spliterator.getComparator();\r\n                return (comparator != null) ? comparator.reversed() : null;\r\n            }\r\n\r\n            @Override\r\n            public void forEachRemaining(Consumer&lt;? super T&gt; action) {\r\n                // Ensure that tryAdvance is called at least once\r\n                if(!deque.isEmpty() || tryAdvance(action)) {\r\n                    deque.forEach(action);\r\n                }\r\n            }\r\n        }\r\n\r\n        return StreamSupport.stream(new ReverseSpliterator(stream.spliterator()), stream.isParallel());\r\n    }\r\n\r\nNote you can quickly extends to other type of streams (IntStream, ...).\r\n\r\n**Testing:**\r\n\r\n    // Use parallel if you wish only\r\n    revert(Stream.of(&quot;One&quot;, &quot;Two&quot;, &quot;Three&quot;, &quot;Four&quot;, &quot;Five&quot;, &quot;Six&quot;).parallel())\r\n        .forEachOrdered(System.out::println);\r\n\r\n**Results:**\r\n\r\n    Six\r\n    Five\r\n    Four\r\n    Three\r\n    Two\r\n    One\r\n\r\n**Additional notes:** The `simplest way` it isn&#39;t so useful when used with other stream operations (the collect join breaks the parallelism). The `advance way` doesn&#39;t have that issue, and it keeps also the initial characteristics of the stream, for example `SORTED`, and so, it&#39;s the way to go to use with other stream operations after the reverse.","title":"Java 8 stream reverse order","body":"<p><strong>Simplest way</strong> (simple collect - supports parallel streams):</p>\n\n<pre><code>public static &lt;T&gt; Stream&lt;T&gt; reverse(Stream&lt;T&gt; stream) {\n    return stream\n            .collect(Collector.of(\n                    () -&gt; new ArrayDeque&lt;T&gt;(),\n                    ArrayDeque::addFirst,\n                    (q1, q2) -&gt; { q2.addAll(q1); return q2; })\n            )\n            .stream();\n}\n</code></pre>\n\n<p><strong>Advanced way</strong> (supports parallel streams in an ongoing way):</p>\n\n<pre><code>public static &lt;T&gt; Stream&lt;T&gt; reverse(Stream&lt;T&gt; stream) {\n    Objects.requireNonNull(stream, \"stream\");\n\n    class ReverseSpliterator implements Spliterator&lt;T&gt; {\n        private Spliterator&lt;T&gt; spliterator;\n        private final Deque&lt;T&gt; deque = new ArrayDeque&lt;&gt;();\n\n        private ReverseSpliterator(Spliterator&lt;T&gt; spliterator) {\n            this.spliterator = spliterator;\n        }\n\n        @Override\n        @SuppressWarnings({\"StatementWithEmptyBody\"})\n        public boolean tryAdvance(Consumer&lt;? super T&gt; action) {\n            while(spliterator.tryAdvance(deque::addFirst));\n            if(!deque.isEmpty()) {\n                action.accept(deque.remove());\n                return true;\n            }\n            return false;\n        }\n\n        @Override\n        public Spliterator&lt;T&gt; trySplit() {\n            // After traveling started the spliterator don't contain elements!\n            Spliterator&lt;T&gt; prev = spliterator.trySplit();\n            if(prev == null) {\n                return null;\n            }\n\n            Spliterator&lt;T&gt; me = spliterator;\n            spliterator = prev;\n            return new ReverseSpliterator(me);\n        }\n\n        @Override\n        public long estimateSize() {\n            return spliterator.estimateSize();\n        }\n\n        @Override\n        public int characteristics() {\n            return spliterator.characteristics();\n        }\n\n        @Override\n        public Comparator&lt;? super T&gt; getComparator() {\n            Comparator&lt;? super T&gt; comparator = spliterator.getComparator();\n            return (comparator != null) ? comparator.reversed() : null;\n        }\n\n        @Override\n        public void forEachRemaining(Consumer&lt;? super T&gt; action) {\n            // Ensure that tryAdvance is called at least once\n            if(!deque.isEmpty() || tryAdvance(action)) {\n                deque.forEach(action);\n            }\n        }\n    }\n\n    return StreamSupport.stream(new ReverseSpliterator(stream.spliterator()), stream.isParallel());\n}\n</code></pre>\n\n<p>Note you can quickly extends to other type of streams (IntStream, ...).</p>\n\n<p><strong>Testing:</strong></p>\n\n<pre><code>// Use parallel if you wish only\nrevert(Stream.of(\"One\", \"Two\", \"Three\", \"Four\", \"Five\", \"Six\").parallel())\n    .forEachOrdered(System.out::println);\n</code></pre>\n\n<p><strong>Results:</strong></p>\n\n<pre><code>Six\nFive\nFour\nThree\nTwo\nOne\n</code></pre>\n\n<p><strong>Additional notes:</strong> The <code>simplest way</code> it isn't so useful when used with other stream operations (the collect join breaks the parallelism). The <code>advance way</code> doesn't have that issue, and it keeps also the initial characteristics of the stream, for example <code>SORTED</code>, and so, it's the way to go to use with other stream operations after the reverse.</p>\n"},{"tags":[],"owner":{"account_id":8241122,"reputation":389,"user_id":6198746,"display_name":"Brixomatic"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1515325658,"creation_date":1515325658,"answer_id":48136802,"question_id":24010109,"body_markdown":"This is how I do it.\r\n\r\nI don&#39;t like the idea of creating a new collection and reverse iterating it.\r\n\r\nThe IntStream#map idea is pretty neat, but I prefer the IntStream#iterate method, for I think the idea of a countdown to Zero better expressed with the iterate method and easier to understand in terms of walking the array from back to front.\r\n\r\n    import static java.lang.Math.max;\r\n\r\n    private static final double EXACT_MATCH = 0d;\r\n\r\n\tpublic static IntStream reverseStream(final int[] array) {\r\n\t\treturn countdownFrom(array.length - 1).map(index -&gt; array[index]);\r\n\t}\r\n\r\n\tpublic static DoubleStream reverseStream(final double[] array) {\r\n\t\treturn countdownFrom(array.length - 1).mapToDouble(index -&gt; array[index]);\r\n\t}\r\n\r\n\tpublic static &lt;T&gt; Stream&lt;T&gt; reverseStream(final T[] array) {\r\n\t\treturn countdownFrom(array.length - 1).mapToObj(index -&gt; array[index]);\r\n\t}\r\n\r\n\tpublic static IntStream countdownFrom(final int top) {\r\n\t\treturn IntStream.iterate(top, t -&gt; t - 1).limit(max(0, (long) top + 1));\r\n\t}\r\n\r\nHere are some tests to prove it works:\r\n\r\n    import static java.lang.Integer.MAX_VALUE;\r\n    import static org.junit.Assert.*;\r\n\r\n    @Test\r\n\tpublic void testReverseStream_emptyArrayCreatesEmptyStream() {\r\n\t\tAssert.assertEquals(0, reverseStream(new double[0]).count());\r\n\t}\r\n\r\n\t@Test\r\n\tpublic void testReverseStream_singleElementCreatesSingleElementStream() {\r\n\t\tAssert.assertEquals(1, reverseStream(new double[1]).count());\r\n        final double[] singleElementArray = new double[] { 123.4 };\r\n\t\tassertArrayEquals(singleElementArray, reverseStream(singleElementArray).toArray(), EXACT_MATCH);\r\n\t}\r\n\r\n\t@Test\r\n\tpublic void testReverseStream_multipleElementsAreStreamedInReversedOrder() {\r\n\t\tfinal double[] arr = new double[] { 1d, 2d, 3d };\r\n\t\tfinal double[] revArr = new double[] { 3d, 2d, 1d };\r\n\t\tAssert.assertEquals(arr.length, reverseStream(arr).count());\r\n\t\tAssert.assertArrayEquals(revArr, reverseStream(arr).toArray(), EXACT_MATCH);\r\n\t}\r\n\r\n\t@Test\r\n\tpublic void testCountdownFrom_returnsAllElementsFromTopToZeroInReverseOrder() {\r\n\t\tassertArrayEquals(new int[] { 4, 3, 2, 1, 0 }, countdownFrom(4).toArray());\r\n\t}\r\n\r\n\t@Test\r\n\tpublic void testCountdownFrom_countingDownStartingWithZeroOutputsTheNumberZero() {\r\n\t\tassertArrayEquals(new int[] { 0 }, countdownFrom(0).toArray());\r\n\t}\r\n\r\n\t@Test\r\n\tpublic void testCountdownFrom_doesNotChokeOnIntegerMaxValue() {\r\n\t\tassertEquals(true, countdownFrom(MAX_VALUE).anyMatch(x -&gt; x == MAX_VALUE));\r\n\t}\r\n\r\n\t@Test\r\n\tpublic void testCountdownFrom_givesZeroLengthCountForNegativeValues() {\r\n\t\tassertArrayEquals(new int[0], countdownFrom(-1).toArray());\r\n\t\tassertArrayEquals(new int[0], countdownFrom(-4).toArray());\r\n\t}\r\n","title":"Java 8 stream reverse order","body":"<p>This is how I do it.</p>\n\n<p>I don't like the idea of creating a new collection and reverse iterating it.</p>\n\n<p>The IntStream#map idea is pretty neat, but I prefer the IntStream#iterate method, for I think the idea of a countdown to Zero better expressed with the iterate method and easier to understand in terms of walking the array from back to front.</p>\n\n<pre><code>import static java.lang.Math.max;\n\nprivate static final double EXACT_MATCH = 0d;\n\npublic static IntStream reverseStream(final int[] array) {\n    return countdownFrom(array.length - 1).map(index -&gt; array[index]);\n}\n\npublic static DoubleStream reverseStream(final double[] array) {\n    return countdownFrom(array.length - 1).mapToDouble(index -&gt; array[index]);\n}\n\npublic static &lt;T&gt; Stream&lt;T&gt; reverseStream(final T[] array) {\n    return countdownFrom(array.length - 1).mapToObj(index -&gt; array[index]);\n}\n\npublic static IntStream countdownFrom(final int top) {\n    return IntStream.iterate(top, t -&gt; t - 1).limit(max(0, (long) top + 1));\n}\n</code></pre>\n\n<p>Here are some tests to prove it works:</p>\n\n<pre><code>import static java.lang.Integer.MAX_VALUE;\nimport static org.junit.Assert.*;\n\n@Test\npublic void testReverseStream_emptyArrayCreatesEmptyStream() {\n    Assert.assertEquals(0, reverseStream(new double[0]).count());\n}\n\n@Test\npublic void testReverseStream_singleElementCreatesSingleElementStream() {\n    Assert.assertEquals(1, reverseStream(new double[1]).count());\n    final double[] singleElementArray = new double[] { 123.4 };\n    assertArrayEquals(singleElementArray, reverseStream(singleElementArray).toArray(), EXACT_MATCH);\n}\n\n@Test\npublic void testReverseStream_multipleElementsAreStreamedInReversedOrder() {\n    final double[] arr = new double[] { 1d, 2d, 3d };\n    final double[] revArr = new double[] { 3d, 2d, 1d };\n    Assert.assertEquals(arr.length, reverseStream(arr).count());\n    Assert.assertArrayEquals(revArr, reverseStream(arr).toArray(), EXACT_MATCH);\n}\n\n@Test\npublic void testCountdownFrom_returnsAllElementsFromTopToZeroInReverseOrder() {\n    assertArrayEquals(new int[] { 4, 3, 2, 1, 0 }, countdownFrom(4).toArray());\n}\n\n@Test\npublic void testCountdownFrom_countingDownStartingWithZeroOutputsTheNumberZero() {\n    assertArrayEquals(new int[] { 0 }, countdownFrom(0).toArray());\n}\n\n@Test\npublic void testCountdownFrom_doesNotChokeOnIntegerMaxValue() {\n    assertEquals(true, countdownFrom(MAX_VALUE).anyMatch(x -&gt; x == MAX_VALUE));\n}\n\n@Test\npublic void testCountdownFrom_givesZeroLengthCountForNegativeValues() {\n    assertArrayEquals(new int[0], countdownFrom(-1).toArray());\n    assertArrayEquals(new int[0], countdownFrom(-4).toArray());\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":558561,"reputation":502,"user_id":893369,"display_name":"vitrums"},"score":1,"creation_date":1594061056,"post_id":48752167,"comment_id":110988874,"body_markdown":"I like this solution a lot. Most answers split into two categories: (1) Reverse the collection and .stream() it, (2) Appeal to custom collectors. Both are absolutely unnecessary. Otherwise, it would&#39;ve testified about some serious language expressiveness issue in JDK 8 itself. And your answer proves the opposite :)","body":"I like this solution a lot. Most answers split into two categories: (1) Reverse the collection and .stream() it, (2) Appeal to custom collectors. Both are absolutely unnecessary. Otherwise, it would&#39;ve testified about some serious language expressiveness issue in JDK 8 itself. And your answer proves the opposite :)"},{"owner":{"account_id":4680926,"reputation":2259,"user_id":3789665,"accept_rate":57,"display_name":"greybeard"},"score":0,"creation_date":1641810510,"post_id":48752167,"comment_id":124895089,"body_markdown":"(see [Adrian&#39;s May &#39;19 answer](https://stackoverflow.com/a/56289986/3789665), too.)","body":"(see <a href=\"https://stackoverflow.com/a/56289986/3789665\">Adrian&#39;s May &#39;19 answer</a>, too.)"}],"tags":[],"owner":{"account_id":2228321,"reputation":1225,"user_id":1966569,"accept_rate":82,"display_name":"Jerome"},"comment_count":2,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1518456520,"creation_date":1518456520,"answer_id":48752167,"question_id":24010109,"body_markdown":"How about this utility method?\r\n\r\n    public static &lt;T&gt; Stream&lt;T&gt; getReverseStream(List&lt;T&gt; list) {\r\n\t\tfinal ListIterator&lt;T&gt; listIt = list.listIterator(list.size());\r\n\t\tfinal Iterator&lt;T&gt; reverseIterator = new Iterator&lt;T&gt;() {\r\n            @Override\r\n            public boolean hasNext() {\r\n                return listIt.hasPrevious();\r\n            }\r\n\r\n            @Override\r\n            public T next() {\r\n                return listIt.previous();\r\n            }\r\n        };\r\n        return StreamSupport.stream(Spliterators.spliteratorUnknownSize(\r\n                reverseIterator,\r\n                Spliterator.ORDERED | Spliterator.IMMUTABLE), false);\r\n\t}\r\n\r\nSeems to work with all cases without duplication.","title":"Java 8 stream reverse order","body":"<p>How about this utility method?</p>\n\n<pre><code>public static &lt;T&gt; Stream&lt;T&gt; getReverseStream(List&lt;T&gt; list) {\n    final ListIterator&lt;T&gt; listIt = list.listIterator(list.size());\n    final Iterator&lt;T&gt; reverseIterator = new Iterator&lt;T&gt;() {\n        @Override\n        public boolean hasNext() {\n            return listIt.hasPrevious();\n        }\n\n        @Override\n        public T next() {\n            return listIt.previous();\n        }\n    };\n    return StreamSupport.stream(Spliterators.spliteratorUnknownSize(\n            reverseIterator,\n            Spliterator.ORDERED | Spliterator.IMMUTABLE), false);\n}\n</code></pre>\n\n<p>Seems to work with all cases without duplication.</p>\n"},{"tags":[],"owner":{"account_id":3155790,"reputation":14985,"user_id":2668232,"accept_rate":100,"display_name":"Oleksandr Pyrohov"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1559515740,"creation_date":1523825334,"answer_id":49846647,"question_id":24010109,"body_markdown":"With regard to the specific question of generating a reverse `IntStream`:\r\n\r\nstarting from **Java 9** you can use the three-argument version of the [`IntStream.iterate(...)`][1]:\r\n\r\n    IntStream.iterate(10, x -&gt; x &gt;= 0, x -&gt; x - 1).forEach(System.out::println);\r\n\r\n    // Out: 10 9 8 7 6 5 4 3 2 1 0\r\n\r\nwhere:\r\n\r\n`IntStream.iterate​(int seed, IntPredicate hasNext, IntUnaryOperator next);`\r\n\r\n - `seed` - the initial element;\r\n - `hasNext` - a predicate to apply to elements to determine when the\r\n   stream must terminate;\r\n - `next` - a function to be applied to the previous element to produce a\r\n   new element.\r\n\r\n  [1]: https://docs.oracle.com/javase/9/docs/api/java/util/stream/IntStream.html#iterate-int-java.util.function.IntPredicate-java.util.function.IntUnaryOperator-","title":"Java 8 stream reverse order","body":"<p>With regard to the specific question of generating a reverse <code>IntStream</code>:</p>\n\n<p>starting from <strong>Java 9</strong> you can use the three-argument version of the <a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/stream/IntStream.html#iterate-int-java.util.function.IntPredicate-java.util.function.IntUnaryOperator-\" rel=\"nofollow noreferrer\"><code>IntStream.iterate(...)</code></a>:</p>\n\n<pre><code>IntStream.iterate(10, x -&gt; x &gt;= 0, x -&gt; x - 1).forEach(System.out::println);\n\n// Out: 10 9 8 7 6 5 4 3 2 1 0\n</code></pre>\n\n<p>where:</p>\n\n<p><code>IntStream.iterate​(int seed, IntPredicate hasNext, IntUnaryOperator next);</code></p>\n\n<ul>\n<li><code>seed</code> - the initial element;</li>\n<li><code>hasNext</code> - a predicate to apply to elements to determine when the\nstream must terminate;</li>\n<li><code>next</code> - a function to be applied to the previous element to produce a\nnew element.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":37500,"reputation":1068,"user_id":107216,"accept_rate":18,"display_name":"Jeffrey"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1526488893,"creation_date":1526488893,"answer_id":50376064,"question_id":24010109,"body_markdown":"Not purely Java8 but if you use guava&#39;s Lists.reverse() method in conjunction, you can easily achieve this:\r\n\r\n    List&lt;Integer&gt; list = Arrays.asList(1,2,3,4);\r\n    Lists.reverse(list).stream().forEach(System.out::println);","title":"Java 8 stream reverse order","body":"<p>Not purely Java8 but if you use guava's Lists.reverse() method in conjunction, you can easily achieve this:</p>\n\n<pre><code>List&lt;Integer&gt; list = Arrays.asList(1,2,3,4);\nLists.reverse(list).stream().forEach(System.out::println);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7445,"reputation":62274,"user_id":12943,"accept_rate":84,"display_name":"Bill K"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1543516842,"creation_date":1543516842,"answer_id":53545594,"question_id":24010109,"body_markdown":"In all this I don&#39;t see the answer I would go to first.\r\n\r\nThis isn&#39;t exactly a direct answer to the question, but it&#39;s a potential solution to the problem.\r\n\r\nJust build the list backwards in the first place.  If you can, use a LinkedList instead of an ArrayList and when you add items use &quot;Push&quot; instead of add.  The list will be built in the reverse order and will then stream correctly without any manipulation.\r\n\r\nThis won&#39;t fit cases where you are dealing with primitive arrays or lists that are already used in various ways but does work well in a surprising number of cases.","title":"Java 8 stream reverse order","body":"<p>In all this I don't see the answer I would go to first.</p>\n\n<p>This isn't exactly a direct answer to the question, but it's a potential solution to the problem.</p>\n\n<p>Just build the list backwards in the first place.  If you can, use a LinkedList instead of an ArrayList and when you add items use \"Push\" instead of add.  The list will be built in the reverse order and will then stream correctly without any manipulation.</p>\n\n<p>This won't fit cases where you are dealing with primitive arrays or lists that are already used in various ways but does work well in a surprising number of cases.</p>\n"},{"tags":[],"owner":{"account_id":5369552,"reputation":403,"user_id":4278474,"display_name":"Dotista"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1545305553,"creation_date":1545301957,"answer_id":53866886,"question_id":24010109,"body_markdown":"`ArrayDeque` are faster in the stack than a Stack or LinkedList. &quot;push()&quot; inserts elements at the front of the Deque\r\n\r\n     protected &lt;T&gt; Stream&lt;T&gt; reverse(Stream&lt;T&gt; stream) {\r\n        ArrayDeque&lt;T&gt; stack = new ArrayDeque&lt;&gt;();\r\n        stream.forEach(stack::push);\r\n        return stack.stream();\r\n    }","title":"Java 8 stream reverse order","body":"<p><code>ArrayDeque</code> are faster in the stack than a Stack or LinkedList. \"push()\" inserts elements at the front of the Deque</p>\n\n<pre><code> protected &lt;T&gt; Stream&lt;T&gt; reverse(Stream&lt;T&gt; stream) {\n    ArrayDeque&lt;T&gt; stack = new ArrayDeque&lt;&gt;();\n    stream.forEach(stack::push);\n    return stack.stream();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15849762,"reputation":21,"user_id":11435928,"display_name":"sai manoj"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1556699328,"creation_date":1556694446,"answer_id":55932731,"question_id":24010109,"body_markdown":"Reversing string or any Array\r\n```\r\n(Stream.of(&quot;abcdefghijklm 1234567&quot;.split(&quot;&quot;)).collect(Collectors.collectingAndThen(Collectors.toList(),list -&gt; {Collections.reverse(list);return list;}))).stream().forEach(System.out::println);\r\n```\r\n\r\nsplit can be modified based on the delimiter or space","title":"Java 8 stream reverse order","body":"<p>Reversing string or any Array</p>\n\n<pre><code>(Stream.of(\"abcdefghijklm 1234567\".split(\"\")).collect(Collectors.collectingAndThen(Collectors.toList(),list -&gt; {Collections.reverse(list);return list;}))).stream().forEach(System.out::println);\n</code></pre>\n\n<p>split can be modified based on the delimiter or space</p>\n"},{"comments":[{"owner":{"account_id":3491742,"reputation":497,"user_id":2921256,"display_name":"andrebrait"},"score":0,"creation_date":1562316222,"post_id":56289986,"comment_id":100344397,"body_markdown":"It&#39;s worth adding that ```Stream.generate()``` generates in infinite stream, so the call to ```limit()``` is very important here.","body":"It&#39;s worth adding that <code>Stream.generate()</code> generates in infinite stream, so the call to <code>limit()</code> is very important here."}],"tags":[],"owner":{"account_id":11171121,"reputation":2994,"user_id":8198056,"display_name":"Adrian"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1558691084,"creation_date":1558691084,"answer_id":56289986,"question_id":24010109,"body_markdown":"the simplest solution is using `List::listIterator` and `Stream::generate`\r\n\r\n    List&lt;Integer&gt; list = Arrays.asList(1, 2, 3, 4, 5);\r\n    ListIterator&lt;Integer&gt; listIterator = list.listIterator(list.size());\r\n\r\n    Stream.generate(listIterator::previous)\r\n          .limit(list.size())\r\n          .forEach(System.out::println);","title":"Java 8 stream reverse order","body":"<p>the simplest solution is using <code>List::listIterator</code> and <code>Stream::generate</code></p>\n\n<pre><code>List&lt;Integer&gt; list = Arrays.asList(1, 2, 3, 4, 5);\nListIterator&lt;Integer&gt; listIterator = list.listIterator(list.size());\n\nStream.generate(listIterator::previous)\n      .limit(list.size())\n      .forEach(System.out::println);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1816815,"reputation":178,"user_id":1651744,"display_name":"siddmuk2005"},"comment_count":0,"down_vote_count":2,"up_vote_count":5,"is_accepted":false,"score":3,"last_activity_date":1581923771,"creation_date":1574612301,"answer_id":59019747,"question_id":24010109,"body_markdown":"  \r\n\r\n    List newStream = list.stream().sorted(Collections.reverseOrder()).collect(Collectors.toList());\r\n            newStream.forEach(System.out::println);","title":"Java 8 stream reverse order","body":"<pre><code>List newStream = list.stream().sorted(Collections.reverseOrder()).collect(Collectors.toList());\n        newStream.forEach(System.out::println);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":59435,"reputation":1210,"user_id":177832,"display_name":"David Larochette"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1584546161,"creation_date":1583857600,"answer_id":60621923,"question_id":24010109,"body_markdown":"This method works with any Stream and is Java 8 compliant:\r\n\r\n    Stream&lt;Integer&gt; myStream = Stream.of(1, 2, 3, 4, 5);\r\n    myStream.reduce(Stream.empty(),\r\n    \t\t(Stream&lt;Integer&gt; a, Integer b) -&gt; Stream.concat(Stream.of(b), a),\r\n    \t\t(a, b) -&gt; Stream.concat(b, a))\r\n    \t\t.forEach(System.out::println);","title":"Java 8 stream reverse order","body":"<p>This method works with any Stream and is Java 8 compliant:</p>\n\n<pre><code>Stream&lt;Integer&gt; myStream = Stream.of(1, 2, 3, 4, 5);\nmyStream.reduce(Stream.empty(),\n        (Stream&lt;Integer&gt; a, Integer b) -&gt; Stream.concat(Stream.of(b), a),\n        (a, b) -&gt; Stream.concat(b, a))\n        .forEach(System.out::println);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":129028,"reputation":39302,"user_id":327301,"accept_rate":66,"display_name":"yankee"},"score":2,"creation_date":1605186597,"post_id":63806719,"comment_id":114577416,"body_markdown":"`(a, b) -&gt; -1` breaks the contract for `Comparator`. Whether this works depends on the implementation of the sort algorithm. The next release of the JVM might break this. Actually I can already break this reproduciblly on my machine using `IntStream.range(0, 10000).parallel().boxed().sorted((a, b) -&gt; -1).forEachOrdered(System.out::println);`","body":"<code>(a, b) -&gt; -1</code> breaks the contract for <code>Comparator</code>. Whether this works depends on the implementation of the sort algorithm. The next release of the JVM might break this. Actually I can already break this reproduciblly on my machine using <code>IntStream.range(0, 10000).parallel().boxed().sorted((a, b) -&gt; -1).forEachOrdered(System.out::println);</code>"},{"owner":{"account_id":1845327,"reputation":3625,"user_id":1673775,"display_name":"luke"},"score":0,"creation_date":1605785207,"post_id":63806719,"comment_id":114761293,"body_markdown":"@yankee Yes you are right. It breaks `Comparator` contract and is kind of misuse of `Comparator`. It works fine for single thread, but even if you don&#39;t use `.parallel()` you can&#39;t rely on it, because you don&#39;t know how virtual machine will run this and you don&#39;t know which sorting algorithm will be used (maybe even sorting algorithm working on single thread might break with this implementation). Thank you for your comment. I will revise my answer in my free time.","body":"@yankee Yes you are right. It breaks <code>Comparator</code> contract and is kind of misuse of <code>Comparator</code>. It works fine for single thread, but even if you don&#39;t use <code>.parallel()</code> you can&#39;t rely on it, because you don&#39;t know how virtual machine will run this and you don&#39;t know which sorting algorithm will be used (maybe even sorting algorithm working on single thread might break with this implementation). Thank you for your comment. I will revise my answer in my free time."},{"owner":{"account_id":1845327,"reputation":3625,"user_id":1673775,"display_name":"luke"},"score":0,"creation_date":1606733187,"post_id":63806719,"comment_id":115040967,"body_markdown":"I revised my answer according to yankee comment. Now the answer should be correct.","body":"I revised my answer according to yankee comment. Now the answer should be correct."}],"tags":[],"owner":{"account_id":1845327,"reputation":3625,"user_id":1673775,"display_name":"luke"},"comment_count":3,"down_vote_count":0,"up_vote_count":41,"is_accepted":false,"score":41,"last_activity_date":1606733477,"creation_date":1599636599,"answer_id":63806719,"question_id":24010109,"body_markdown":"**How NOT to do it:**\r\n - Don&#39;t use `.sorted(Comparator.reverseOrder())` or `.sorted(Collections.reverseOrder())`, because it will just sort elements in the descending order.   \r\nUsing it for given Integer input:  \r\n`[1, 4, 2, 5, 3]`  \r\nthe output would be as follows:    \r\n`[5, 4, 3, 2, 1]`  \r\nFor String input:   \r\n`[&quot;A&quot;, &quot;D&quot;, &quot;B&quot;, &quot;E&quot;, &quot;C&quot;]`  \r\nthe output would be as follows:   \r\n`[E, D, C, B, A]`\r\n - Don&#39;t use `.sorted((a, b) -&gt; -1)` (explanation at the end)\r\n\r\n**The easiest way to do it properly:**  \r\n```\r\nList&lt;Integer&gt; list = Arrays.asList(1, 4, 2, 5, 3);\r\nCollections.reverse(list);\r\nSystem.out.println(list);\r\n```\r\nOutput:  \r\n`[3, 5, 2, 4, 1]`\r\n\r\nThe same for `String`:\r\n```\r\nList&lt;String&gt; stringList = Arrays.asList(&quot;A&quot;, &quot;D&quot;, &quot;B&quot;, &quot;E&quot;, &quot;C&quot;);\r\nCollections.reverse(stringList);\r\nSystem.out.println(stringList);\r\n```\r\nOutput:  \r\n`[C, E, B, D, A]`\r\n\r\n**Don&#39;t use `.sorted((a, b) -&gt; -1)`!**  \r\nIt breaks comparator contract and might work only for some cases ie. only on single thread but not in parallel.  \r\nyankee explanation:\r\n&gt; `(a, b) -&gt; -1` breaks the contract for `Comparator`. Whether this works depends on the implementation of the sort algorithm. The next release of the JVM might break this. Actually I can already break this reproduciblly on my machine using `IntStream.range(0, 10000).parallel().boxed().sorted((a, b) -&gt; -1).forEachOrdered(System.out::println);`\r\n\r\n```\r\n//Don&#39;t use this!!!\r\nList&lt;Integer&gt; list = Arrays.asList(1, 4, 2, 5, 3);\r\nList&lt;Integer&gt; reversedList = list.stream()\r\n        .sorted((a, b) -&gt; -1)\r\n        .collect(Collectors.toList());\r\nSystem.out.println(reversedList);\r\n```\r\nOutput in positive case:  \r\n`[3, 5, 2, 4, 1]`\r\n\r\nPossible output in parallel stream or with other JVM implementation:  \r\n`[4, 1, 2, 3, 5]`\r\n\r\nThe same for `String`:\r\n```\r\n//Don&#39;t use this!!!\r\nList&lt;String&gt; stringList = Arrays.asList(&quot;A&quot;, &quot;D&quot;, &quot;B&quot;, &quot;E&quot;, &quot;C&quot;);\r\nList&lt;String&gt; reversedStringList = stringList.stream()\r\n        .sorted((a, b) -&gt; -1)\r\n        .collect(Collectors.toList());\r\nSystem.out.println(reversedStringList);\r\n```\r\nOutput in positive case:  \r\n`[C, E, B, D, A]`  \r\n\r\nPossible output in parallel stream or with other JVM implementation:  \r\n`[A, E, B, D, C]`     ","title":"Java 8 stream reverse order","body":"<p><strong>How NOT to do it:</strong></p>\n<ul>\n<li>Don't use <code>.sorted(Comparator.reverseOrder())</code> or <code>.sorted(Collections.reverseOrder())</code>, because it will just sort elements in the descending order.<br />\nUsing it for given Integer input:<br />\n<code>[1, 4, 2, 5, 3]</code><br />\nthe output would be as follows:<br />\n<code>[5, 4, 3, 2, 1]</code><br />\nFor String input:<br />\n<code>[&quot;A&quot;, &quot;D&quot;, &quot;B&quot;, &quot;E&quot;, &quot;C&quot;]</code><br />\nthe output would be as follows:<br />\n<code>[E, D, C, B, A]</code></li>\n<li>Don't use <code>.sorted((a, b) -&gt; -1)</code> (explanation at the end)</li>\n</ul>\n<p><strong>The easiest way to do it properly:</strong></p>\n<pre><code>List&lt;Integer&gt; list = Arrays.asList(1, 4, 2, 5, 3);\nCollections.reverse(list);\nSystem.out.println(list);\n</code></pre>\n<p>Output:<br />\n<code>[3, 5, 2, 4, 1]</code></p>\n<p>The same for <code>String</code>:</p>\n<pre><code>List&lt;String&gt; stringList = Arrays.asList(&quot;A&quot;, &quot;D&quot;, &quot;B&quot;, &quot;E&quot;, &quot;C&quot;);\nCollections.reverse(stringList);\nSystem.out.println(stringList);\n</code></pre>\n<p>Output:<br />\n<code>[C, E, B, D, A]</code></p>\n<p><strong>Don't use <code>.sorted((a, b) -&gt; -1)</code>!</strong><br />\nIt breaks comparator contract and might work only for some cases ie. only on single thread but not in parallel.<br />\nyankee explanation:</p>\n<blockquote>\n<p><code>(a, b) -&gt; -1</code> breaks the contract for <code>Comparator</code>. Whether this works depends on the implementation of the sort algorithm. The next release of the JVM might break this. Actually I can already break this reproduciblly on my machine using <code>IntStream.range(0, 10000).parallel().boxed().sorted((a, b) -&gt; -1).forEachOrdered(System.out::println);</code></p>\n</blockquote>\n<pre><code>//Don't use this!!!\nList&lt;Integer&gt; list = Arrays.asList(1, 4, 2, 5, 3);\nList&lt;Integer&gt; reversedList = list.stream()\n        .sorted((a, b) -&gt; -1)\n        .collect(Collectors.toList());\nSystem.out.println(reversedList);\n</code></pre>\n<p>Output in positive case:<br />\n<code>[3, 5, 2, 4, 1]</code></p>\n<p>Possible output in parallel stream or with other JVM implementation:<br />\n<code>[4, 1, 2, 3, 5]</code></p>\n<p>The same for <code>String</code>:</p>\n<pre><code>//Don't use this!!!\nList&lt;String&gt; stringList = Arrays.asList(&quot;A&quot;, &quot;D&quot;, &quot;B&quot;, &quot;E&quot;, &quot;C&quot;);\nList&lt;String&gt; reversedStringList = stringList.stream()\n        .sorted((a, b) -&gt; -1)\n        .collect(Collectors.toList());\nSystem.out.println(reversedStringList);\n</code></pre>\n<p>Output in positive case:<br />\n<code>[C, E, B, D, A]</code></p>\n<p>Possible output in parallel stream or with other JVM implementation:<br />\n<code>[A, E, B, D, C]</code></p>\n"},{"tags":[],"owner":{"account_id":8460659,"reputation":2301,"user_id":6346531,"display_name":"aksh1618"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1603087714,"creation_date":1603087714,"answer_id":64421976,"question_id":24010109,"body_markdown":"Based on [@stuart-marks&#39;s answer](https://stackoverflow.com/a/24011264/6346531), but without casting, function returning stream of list elements starting from end:\r\n\r\n```java\r\npublic static &lt;T&gt; Stream&lt;T&gt; reversedStream(List&lt;T&gt; tList) {\r\n    final int size = tList.size();\r\n    return IntStream.range(0, size)\r\n            .mapToObj(i -&gt; tList.get(size - 1 - i));\r\n}\r\n\r\n// usage\r\nreversedStream(list).forEach(System.out::println);\r\n```","title":"Java 8 stream reverse order","body":"<p>Based on <a href=\"https://stackoverflow.com/a/24011264/6346531\">@stuart-marks's answer</a>, but without casting, function returning stream of list elements starting from end:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static &lt;T&gt; Stream&lt;T&gt; reversedStream(List&lt;T&gt; tList) {\n    final int size = tList.size();\n    return IntStream.range(0, size)\n            .mapToObj(i -&gt; tList.get(size - 1 - i));\n}\n\n// usage\nreversedStream(list).forEach(System.out::println);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12837682,"reputation":949,"user_id":9286715,"display_name":"levenshtein"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1677705274,"creation_date":1610268062,"answer_id":65651454,"question_id":24010109,"body_markdown":"How about reversing the Collection backing the stream prior?\r\n\r\n    import java.util.Collections;\r\n    import java.util.List;\r\n    \r\n    public void reverseTest(List&lt;Integer&gt; sampleCollection) {\r\n        Collections.reverse(sampleCollection); // remember this reverses the elements in the list, so if you want the original input collection to remain untouched clone it first.\r\n    \r\n        sampleCollection.stream().forEach(item -&gt; {\r\n          // you op here\r\n        });\r\n    }","title":"Java 8 stream reverse order","body":"<p>How about reversing the Collection backing the stream prior?</p>\n<pre><code>import java.util.Collections;\nimport java.util.List;\n\npublic void reverseTest(List&lt;Integer&gt; sampleCollection) {\n    Collections.reverse(sampleCollection); // remember this reverses the elements in the list, so if you want the original input collection to remain untouched clone it first.\n\n    sampleCollection.stream().forEach(item -&gt; {\n      // you op here\n    });\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4680926,"reputation":2259,"user_id":3789665,"accept_rate":57,"display_name":"greybeard"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1641809702,"creation_date":1641809702,"answer_id":70650767,"question_id":24010109,"body_markdown":"`What&#39;s the proper generic way to reverse a stream?`  \r\n\r\nIf the stream does not specify an [*encounter order*](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Spliterator.html#ORDERED), don&#39;t.\r\n(`!s.spliterator().hasCharacteristics(java.util.Spliterator.ORDERED)`)","title":"Java 8 stream reverse order","body":"<p><code>What's the proper generic way to reverse a stream?</code></p>\n<p>If the stream does not specify an <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Spliterator.html#ORDERED\" rel=\"nofollow noreferrer\"><em>encounter order</em></a>, don't.\n(<code>!s.spliterator().hasCharacteristics(java.util.Spliterator.ORDERED)</code>)</p>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695233068,"creation_date":1677774006,"answer_id":75618153,"question_id":24010109,"body_markdown":"The only way to reverse any general stream is to read through the stream, capturing all values, and then stream through the captured values in reverse order.  This means that at minimum, a full copy of the stream data must be stored in order to stream through it in reverse order.\r\n\r\nAs of Java 21, the [`reversed()`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html#reversed()) method on `List` makes reversing a general `Stream` a one-liner:\r\n\r\n```lang-java\r\nStream&lt;T&gt; reversed = myStream.stream().toList().reversed().toStream();\r\n```\r\n\r\nAccomplishing the same thing with Java version 20 without using a customized collection type is more verbose, typically requiring an extra step of reversing the resulting list.  The following Java 20 implementation streams to a `List`, reverses the list, and then return a stream using `.toStream()`.\r\n\r\n```lang-java\r\nList&lt;T&gt; list = myStream.stream().collect(Collectors.toCollection(ArrayList::new));\r\nCollections.reverse(list);\r\nStream&lt;T&gt; reversed = list.stream();\r\n```","title":"Java 8 stream reverse order","body":"<p>The only way to reverse any general stream is to read through the stream, capturing all values, and then stream through the captured values in reverse order.  This means that at minimum, a full copy of the stream data must be stored in order to stream through it in reverse order.</p>\n<p>As of Java 21, the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html#reversed()\" rel=\"nofollow noreferrer\"><code>reversed()</code></a> method on <code>List</code> makes reversing a general <code>Stream</code> a one-liner:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Stream&lt;T&gt; reversed = myStream.stream().toList().reversed().toStream();\n</code></pre>\n<p>Accomplishing the same thing with Java version 20 without using a customized collection type is more verbose, typically requiring an extra step of reversing the resulting list.  The following Java 20 implementation streams to a <code>List</code>, reverses the list, and then return a stream using <code>.toStream()</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;T&gt; list = myStream.stream().collect(Collectors.toCollection(ArrayList::new));\nCollections.reverse(list);\nStream&lt;T&gt; reversed = list.stream();\n</code></pre>\n"}],"owner":{"account_id":330599,"reputation":10771,"user_id":654799,"accept_rate":84,"display_name":"vach"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":334008,"favorite_count":0,"down_vote_count":0,"up_vote_count":233,"accepted_answer_id":24011264,"answer_count":31,"score":233,"last_activity_date":1695233068,"creation_date":1401782985,"question_id":24010109,"body_markdown":"General question: What&#39;s the proper way to reverse a stream? Assuming that we don&#39;t know what type of elements that stream consists of, what&#39;s the generic way to reverse any stream?\r\n\r\nSpecific question: \r\n\r\n`IntStream` provides range method to generate Integers in specific range `IntStream.range(-range, 0)`, now that I want to reverse it switching range from 0 to negative won&#39;t work, also I can&#39;t use `Integer::compare`\r\n\r\n\r\n    List&lt;Integer&gt; list = Arrays.asList(1,2,3,4);\r\n    list.stream().sorted(Integer::compare).forEach(System.out::println);\r\n\r\nwith `IntStream` I&#39;ll get this compiler error\r\n\r\n&gt; Error:(191, 0) ajc: The method `sorted()` in the type `IntStream` is not applicable for the arguments (`Integer::compare`)\r\n\r\nwhat am I missing here?","title":"Java 8 stream reverse order","body":"<p>General question: What's the proper way to reverse a stream? Assuming that we don't know what type of elements that stream consists of, what's the generic way to reverse any stream?</p>\n\n<p>Specific question: </p>\n\n<p><code>IntStream</code> provides range method to generate Integers in specific range <code>IntStream.range(-range, 0)</code>, now that I want to reverse it switching range from 0 to negative won't work, also I can't use <code>Integer::compare</code></p>\n\n<pre><code>List&lt;Integer&gt; list = Arrays.asList(1,2,3,4);\nlist.stream().sorted(Integer::compare).forEach(System.out::println);\n</code></pre>\n\n<p>with <code>IntStream</code> I'll get this compiler error</p>\n\n<blockquote>\n  <p>Error:(191, 0) ajc: The method <code>sorted()</code> in the type <code>IntStream</code> is not applicable for the arguments (<code>Integer::compare</code>)</p>\n</blockquote>\n\n<p>what am I missing here?</p>\n"},{"tags":["java","set","iteration","linkedhashset"],"comments":[{"owner":{"account_id":268135,"reputation":519,"user_id":556712,"accept_rate":42,"display_name":"Bhavesh"},"score":2,"creation_date":1396527351,"post_id":10741902,"comment_id":34834378,"body_markdown":"Why in Java Collection Framework it is not included. LinkedHashSet maintains FIFO order so an utility to convert the order into LIFO should be there which seems to be vary handy when requirement is to maintain insertion order at the same time we may need to iterate in reverse order. In my project there were couple time I needed this already. Unfortunately, I have to use List as intermediary to take advantage of Collections.reverse() utility. This is dirty isn&#39;t it!","body":"Why in Java Collection Framework it is not included. LinkedHashSet maintains FIFO order so an utility to convert the order into LIFO should be there which seems to be vary handy when requirement is to maintain insertion order at the same time we may need to iterate in reverse order. In my project there were couple time I needed this already. Unfortunately, I have to use List as intermediary to take advantage of Collections.reverse() utility. This is dirty isn&#39;t it!"},{"owner":{"account_id":37062,"reputation":1079,"user_id":105863,"accept_rate":67,"display_name":"Hollis Waite"},"score":0,"creation_date":1618627151,"post_id":10741902,"comment_id":118666165,"body_markdown":"This has been a problem since forever. There are [proposals](http://mail.openjdk.java.net/pipermail/core-libs-dev/2021-April/076461.html) floating around to address it.","body":"This has been a problem since forever. There are <a href=\"http://mail.openjdk.java.net/pipermail/core-libs-dev/2021-April/076461.html\" rel=\"nofollow noreferrer\">proposals</a> floating around to address it."}],"answers":[{"comments":[{"owner":{"account_id":3370948,"reputation":4617,"user_id":2830167,"accept_rate":100,"display_name":"ZhaoGang"},"score":1,"creation_date":1593351268,"post_id":10741952,"comment_id":110743739,"body_markdown":"your code seems cann&#39;t compile: `MyType[] asArray = mySet.toArray();`","body":"your code seems cann&#39;t compile: <code>MyType[] asArray = mySet.toArray();</code>"},{"owner":{"account_id":9679099,"reputation":101,"user_id":7700796,"display_name":"Soham De"},"score":0,"creation_date":1606629751,"post_id":10741952,"comment_id":115015637,"body_markdown":"Object array cannot be converted to MyType array. This code won&#39;t compile.","body":"Object array cannot be converted to MyType array. This code won&#39;t compile."},{"owner":{"account_id":4427390,"reputation":5224,"user_id":3605497,"display_name":"Tripp Kinetics"},"score":0,"creation_date":1655747543,"post_id":10741952,"comment_id":128400241,"body_markdown":"I just fixed that.","body":"I just fixed that."}],"tags":[],"owner":{"account_id":116580,"reputation":118713,"user_id":305644,"accept_rate":75,"display_name":"hvgotcodes"},"comment_count":3,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1655747533,"creation_date":1337878432,"answer_id":10741952,"question_id":10741902,"body_markdown":"er, assuming you mean LinkedHashSet...\r\n\r\nI would use [toArray][1] and just use a reverse for loop.\r\n\r\nThere might be a better way to do it, but that should work.  `toArray` guarantees any order is preserved\r\n\r\n&gt; If this set makes any guarantees as to what order its elements are\r\n&gt; returned by its iterator, this method must return the elements in the\r\n&gt; same order.\r\n\r\nSomething like\r\n\r\n    Set&lt;MyType&gt; mySet = new LinkedHashSet();\r\n    ...\r\n    MyType[] asArray = mySet.toArray(new MyType[0]);\r\n    \r\n    for (int i = asArray.length - 1; i&gt;=0; i--){\r\n    ..\r\n    }\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/api/java/util/Set.html#toArray%28T%5B%5D%29","title":"Java LinkedHashSet backwards iteration","body":"<p>er, assuming you mean LinkedHashSet...</p>\n<p>I would use <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/Set.html#toArray%28T%5B%5D%29\" rel=\"nofollow noreferrer\">toArray</a> and just use a reverse for loop.</p>\n<p>There might be a better way to do it, but that should work.  <code>toArray</code> guarantees any order is preserved</p>\n<blockquote>\n<p>If this set makes any guarantees as to what order its elements are\nreturned by its iterator, this method must return the elements in the\nsame order.</p>\n</blockquote>\n<p>Something like</p>\n<pre><code>Set&lt;MyType&gt; mySet = new LinkedHashSet();\n...\nMyType[] asArray = mySet.toArray(new MyType[0]);\n\nfor (int i = asArray.length - 1; i&gt;=0; i--){\n..\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":116580,"reputation":118713,"user_id":305644,"accept_rate":75,"display_name":"hvgotcodes"},"score":7,"creation_date":1337878690,"post_id":10742016,"comment_id":13957157,"body_markdown":"&quot;from the last one to the first one.&quot;","body":"&quot;from the last one to the first one.&quot;"}],"tags":[],"owner":{"account_id":110681,"reputation":112,"user_id":292795,"display_name":"sysoutnull"},"comment_count":1,"down_vote_count":11,"up_vote_count":1,"is_accepted":false,"score":-10,"last_activity_date":1337878645,"creation_date":1337878645,"answer_id":10742016,"question_id":10741902,"body_markdown":"From the javadoc: &quot;This linked list defines the iteration ordering, which is the order in which elements were inserted into the set (insertion-order).&quot;\r\n\r\nSo you can simply:\r\n\r\n    LinkedHashSet&lt;Integer&gt; numbers = new LinkedHashSet&lt;Integer&gt;();\r\n    numbers.add(1);\r\n    numbers.add(2);\r\n    numbers.add(33);\r\n    numbers.add(44);\r\n    numbers.add(108);\r\n    \r\n    for (Integer i : numbers) {\r\n        System.out.println(i);\r\n    }","title":"Java LinkedHashSet backwards iteration","body":"<p>From the javadoc: \"This linked list defines the iteration ordering, which is the order in which elements were inserted into the set (insertion-order).\"</p>\n\n<p>So you can simply:</p>\n\n<pre><code>LinkedHashSet&lt;Integer&gt; numbers = new LinkedHashSet&lt;Integer&gt;();\nnumbers.add(1);\nnumbers.add(2);\nnumbers.add(33);\nnumbers.add(44);\nnumbers.add(108);\n\nfor (Integer i : numbers) {\n    System.out.println(i);\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1521739,"reputation":3696,"user_id":1421194,"accept_rate":73,"display_name":"Sasha"},"score":0,"creation_date":1467891262,"post_id":10742031,"comment_id":63909731,"body_markdown":"The `new LinkedList&lt;&gt;(set)` will copy all items, won&#39;t it?","body":"The <code>new LinkedList&lt;&gt;(set)</code> will copy all items, won&#39;t it?"},{"owner":{"account_id":395357,"reputation":44547,"user_id":758280,"accept_rate":100,"display_name":"Jeffrey"},"score":0,"creation_date":1467904432,"post_id":10742031,"comment_id":63919530,"body_markdown":"@Sasha Yes, it will.","body":"@Sasha Yes, it will."}],"tags":[],"owner":{"account_id":395357,"reputation":44547,"user_id":758280,"accept_rate":100,"display_name":"Jeffrey"},"comment_count":2,"down_vote_count":0,"up_vote_count":29,"is_accepted":true,"score":29,"last_activity_date":1337878701,"creation_date":1337878701,"answer_id":10742031,"question_id":10741902,"body_markdown":"If you want to continue to use collections, you could use the following:\r\n\r\n    LinkedHashSet&lt;T&gt; set = ...\r\n\r\n    LinkedList&lt;T&gt; list = new LinkedList&lt;&gt;(set);\r\n    Iterator&lt;T&gt; itr = list.descendingIterator();\r\n    while(itr.hasNext()) {\r\n        T item = itr.next();\r\n        // do something\r\n    }\r\n\r\nIf you&#39;re fine with using an array instead, you could take a look at [hvgotcodes&#39; answer](https://stackoverflow.com/a/10741952/758280).","title":"Java LinkedHashSet backwards iteration","body":"<p>If you want to continue to use collections, you could use the following:</p>\n\n<pre><code>LinkedHashSet&lt;T&gt; set = ...\n\nLinkedList&lt;T&gt; list = new LinkedList&lt;&gt;(set);\nIterator&lt;T&gt; itr = list.descendingIterator();\nwhile(itr.hasNext()) {\n    T item = itr.next();\n    // do something\n}\n</code></pre>\n\n<p>If you're fine with using an array instead, you could take a look at <a href=\"https://stackoverflow.com/a/10741952/758280\">hvgotcodes' answer</a>.</p>\n"},{"tags":[],"owner":{"account_id":403847,"reputation":23234,"user_id":771837,"display_name":"trutheality"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1337878918,"creation_date":1337878918,"answer_id":10742080,"question_id":10741902,"body_markdown":"This is another way:\r\n\r\n    LinkedHashSet&lt;T&gt; set = ...\r\n    \r\n    List&lt;T&gt; list = new ArrayList&lt;&gt;(set);\r\n    Collections.reverse(list);\r\n    \r\n    for( T item : list ){\r\n       ...\r\n    }\r\n\r\n","title":"Java LinkedHashSet backwards iteration","body":"<p>This is another way:</p>\n\n<pre><code>LinkedHashSet&lt;T&gt; set = ...\n\nList&lt;T&gt; list = new ArrayList&lt;&gt;(set);\nCollections.reverse(list);\n\nfor( T item : list ){\n   ...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":217708,"reputation":23000,"user_id":473637,"accept_rate":88,"display_name":"Jeshurun"},"comment_count":0,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1337879239,"creation_date":1337879239,"answer_id":10742159,"question_id":10741902,"body_markdown":"If you really meant LinkedHashSet, you could put the elements into an ArrayList and then use the ArrayList&#39;s ListIterator.\r\n\r\n    ListIterator&lt;T&gt; l = new ArrayList&lt;T&gt;(yourLinkedHashList).listIterator();\r\n    // ListIterator can iterate in reverse\r\n    while(l.hasPrevious()) {\r\n    \tT obj = l.previous();\r\n    }","title":"Java LinkedHashSet backwards iteration","body":"<p>If you really meant LinkedHashSet, you could put the elements into an ArrayList and then use the ArrayList's ListIterator.</p>\n\n<pre><code>ListIterator&lt;T&gt; l = new ArrayList&lt;T&gt;(yourLinkedHashList).listIterator();\n// ListIterator can iterate in reverse\nwhile(l.hasPrevious()) {\n    T obj = l.previous();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1695232983,"creation_date":1682843455,"answer_id":76140253,"question_id":10741902,"body_markdown":"As of Java 21, the [`reversed()`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/LinkedHashSet.html#reversed()) method on `LinkedHashSet` can be used.  This reversed view of the set can be used to iterate in reverse order.\r\n\r\n```lang-java\r\nfor (Object o : myLinkedHashSet.reversed()) {\r\n  System.out.println(o);\r\n}","title":"Java LinkedHashSet backwards iteration","body":"<p>As of Java 21, the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/LinkedHashSet.html#reversed()\" rel=\"nofollow noreferrer\"><code>reversed()</code></a> method on <code>LinkedHashSet</code> can be used.  This reversed view of the set can be used to iterate in reverse order.</p>\n<pre class=\"lang-java prettyprint-override\"><code>for (Object o : myLinkedHashSet.reversed()) {\n  System.out.println(o);\n}\n</code></pre>\n"}],"owner":{"account_id":176550,"reputation":4165,"user_id":407315,"accept_rate":59,"display_name":"David Weng"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":27522,"favorite_count":0,"down_vote_count":0,"up_vote_count":29,"accepted_answer_id":10742031,"answer_count":6,"score":29,"last_activity_date":1695232983,"creation_date":1337878268,"question_id":10741902,"body_markdown":"How can I iterate through items of a `LinkedHashSet` from the last item to the first one?","title":"Java LinkedHashSet backwards iteration","body":"<p>How can I iterate through items of a <code>LinkedHashSet</code> from the last item to the first one?</p>\n"},{"tags":["java","apache-spark","data-binding","version"],"answers":[{"comments":[{"owner":{"account_id":21781141,"reputation":81,"user_id":16082828,"display_name":"Mathieu"},"score":0,"creation_date":1622532811,"post_id":67779035,"comment_id":119811932,"body_markdown":"Thanks for your answer.\n\nWhen I try your exact proposition, I have this error :\n\nCaused by: com.fasterxml.jackson.databind.JsonMappingException: Scala module 2.10.5 requires Jackson Databind version &gt;= 2.10.0 and &lt; 2.11.0\n\nI also tried to do :\n\n&lt;jackson-bom.version&gt;2.12.3&lt;/jackson-bom.version&gt;\n\nIn this case, I have the same error as the start. So :\n\nCaused by: com.fasterxml.jackson.databind.JsonMappingException: Scala module 2.12.3 requires Jackson Databind version &gt;= 2.12.0 and &lt; 2.13.0\n\nI don&#39;t undrestant because jackson databind is in 2.12.3","body":"Thanks for your answer.  When I try your exact proposition, I have this error :  Caused by: com.fasterxml.jackson.databind.JsonMappingException: Scala module 2.10.5 requires Jackson Databind version &gt;= 2.10.0 and &lt; 2.11.0  I also tried to do :  &lt;jackson-bom.version&gt;2.12.3&lt;/jackson-bom.version&gt;  In this case, I have the same error as the start. So :  Caused by: com.fasterxml.jackson.databind.JsonMappingException: Scala module 2.12.3 requires Jackson Databind version &gt;= 2.12.0 and &lt; 2.13.0  I don&#39;t undrestant because jackson databind is in 2.12.3"},{"owner":{"account_id":16426356,"reputation":1936,"user_id":11866308,"display_name":"Allen D. Ball"},"score":0,"creation_date":1622557261,"post_id":67779035,"comment_id":119822465,"body_markdown":"Please add your whole pom.xml to the question and the output of `mvn dependency:tree`.  Ideally, also please add a cut-and-paste of the exception you&#39;re getting.","body":"Please add your whole pom.xml to the question and the output of <code>mvn dependency:tree</code>.  Ideally, also please add a cut-and-paste of the exception you&#39;re getting."},{"owner":{"account_id":21781141,"reputation":81,"user_id":16082828,"display_name":"Mathieu"},"score":0,"creation_date":1623077562,"post_id":67779035,"comment_id":119969442,"body_markdown":"Hi,\nI respond to you in comments because it&#39;s too long. \nThanks","body":"Hi, I respond to you in comments because it&#39;s too long.  Thanks"}],"tags":[],"owner":{"account_id":16426356,"reputation":1936,"user_id":11866308,"display_name":"Allen D. Ball"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1623086335,"creation_date":1622487567,"answer_id":67779035,"question_id":67769492,"body_markdown":"Are you sure of the error?  Scala 2.12 requires Jackson 2.10.x.\r\n\r\nTo debug, run `mvn dependency:tree` to see what dependencies/versions are actually being dragged in.  You are probably getting other Jackson JARs that are not 2.10.x.\r\n\r\nIf you are building a Spring project (with parent POM spring-boot-dependencies), set:\r\n\r\n```xml\r\n&lt;jackson-bom.version&gt;2.10.5.20201202&lt;/jackson-bom.version&gt;\r\n```\r\n\r\nfor the latest Jackson that satisfies the Scala requirement.  Otherwise, you&#39;ll need to add the following to your `&lt;dependencyManagement/&gt;`:\r\n\r\n```xml\r\n  &lt;dependencyManagement&gt;                                                        \r\n    &lt;dependencies&gt;\r\n      ...\r\n      &lt;dependency&gt;                                                              \r\n        &lt;groupId&gt;com.fasterxml.jackson&lt;/groupId&gt;                                \r\n        &lt;artifactId&gt;jackson-bom&lt;/artifactId&gt;                                    \r\n        &lt;version&gt;${jackson-bom.version}&lt;/version&gt;                               \r\n        &lt;type&gt;pom&lt;/type&gt;                                                        \r\n        &lt;scope&gt;import&lt;/scope&gt;                                                   \r\n      &lt;/dependency&gt;\r\n      ...\r\n    &lt;/dependencies&gt;                                                             \r\n  &lt;/dependencyManagement&gt; \r\n```\r\n\r\nand remove the `&lt;version&gt;` from you Jackson dependencies.","title":"Scala module 2.12.3 requires Jackson Databind version &gt;= 2.12.0 and &lt; 2.13.0 but I have databind 2.12.3","body":"<p>Are you sure of the error?  Scala 2.12 requires Jackson 2.10.x.</p>\n<p>To debug, run <code>mvn dependency:tree</code> to see what dependencies/versions are actually being dragged in.  You are probably getting other Jackson JARs that are not 2.10.x.</p>\n<p>If you are building a Spring project (with parent POM spring-boot-dependencies), set:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;jackson-bom.version&gt;2.10.5.20201202&lt;/jackson-bom.version&gt;\n</code></pre>\n<p>for the latest Jackson that satisfies the Scala requirement.  Otherwise, you'll need to add the following to your <code>&lt;dependencyManagement/&gt;</code>:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>  &lt;dependencyManagement&gt;                                                        \n    &lt;dependencies&gt;\n      ...\n      &lt;dependency&gt;                                                              \n        &lt;groupId&gt;com.fasterxml.jackson&lt;/groupId&gt;                                \n        &lt;artifactId&gt;jackson-bom&lt;/artifactId&gt;                                    \n        &lt;version&gt;${jackson-bom.version}&lt;/version&gt;                               \n        &lt;type&gt;pom&lt;/type&gt;                                                        \n        &lt;scope&gt;import&lt;/scope&gt;                                                   \n      &lt;/dependency&gt;\n      ...\n    &lt;/dependencies&gt;                                                             \n  &lt;/dependencyManagement&gt; \n</code></pre>\n<p>and remove the <code>&lt;version&gt;</code> from you Jackson dependencies.</p>\n"},{"comments":[{"owner":{"account_id":16426356,"reputation":1936,"user_id":11866308,"display_name":"Allen D. Ball"},"score":0,"creation_date":1623086365,"post_id":67801058,"comment_id":119973467,"body_markdown":"In your pom.xml, change `&lt;jackson-bom.version&gt;2.12.3&lt;/jackson-bom.version&gt;` to `&lt;jackson-bom.version&gt;2.10.5.20201202&lt;/jackson-bom.version&gt;` per my answer above and you should be set,","body":"In your pom.xml, change <code>&lt;jackson-bom.version&gt;2.12.3&lt;&#47;jackson-bom.version&gt;</code> to <code>&lt;jackson-bom.version&gt;2.10.5.20201202&lt;&#47;jackson-bom.version&gt;</code> per my answer above and you should be set,"}],"tags":[],"owner":{"account_id":21781141,"reputation":81,"user_id":16082828,"display_name":"Mathieu"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1622620518,"creation_date":1622620518,"answer_id":67801058,"question_id":67769492,"body_markdown":"Allen D.Ball, my answer is too long for comment. So,\r\npom.xml : \r\n\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n\txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;fr.cnp.kfk&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;jee&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;/parent&gt;\r\n\r\n\t&lt;artifactId&gt;kfk-spark-structured-streams&lt;/artifactId&gt;\r\n\t&lt;packaging&gt;jar&lt;/packaging&gt;\r\n\r\n\t&lt;name&gt;Spark Structured Streams&lt;/name&gt;\r\n\r\n\t&lt;properties&gt;\r\n\t\t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n\t\t&lt;spark.version&gt;3.1.1&lt;/spark.version&gt;\r\n\t\t&lt;slf4j.version&gt;1.7.7&lt;/slf4j.version&gt;\r\n\t\t&lt;log4j.version&gt;1.2.17&lt;/log4j.version&gt;\r\n\t\t&lt;scala.version&gt;2.12&lt;/scala.version&gt;\r\n\t\t&lt;jackson-bom.version&gt;2.12.3&lt;/jackson-bom.version&gt;\r\n\t&lt;/properties&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;source&gt;1.8&lt;/source&gt;\r\n\t\t\t\t\t&lt;target&gt;1.8&lt;/target&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;3.0.0&lt;/version&gt;\r\n\t\t\t\t&lt;executions&gt;\r\n\t\t\t\t\t&lt;execution&gt;\r\n\t\t\t\t\t\t&lt;phase&gt;package&lt;/phase&gt;\r\n\t\t\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t\t\t&lt;goal&gt;shade&lt;/goal&gt;\r\n\t\t\t\t\t\t&lt;/goals&gt;\r\n\t\t\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t\t\t&lt;artifactSet&gt;\r\n\t\t\t\t\t\t\t\t&lt;excludes&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;exclude&gt;org.apache.flink:force-shading&lt;/exclude&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;exclude&gt;com.google.code.findbugs:jsr305&lt;/exclude&gt;\r\n\t\t\t\t\t\t\t\t&lt;/excludes&gt;\r\n\t\t\t\t\t\t\t&lt;/artifactSet&gt;\r\n\t\t\t\t\t\t\t&lt;filters&gt;\r\n\t\t\t\t\t\t\t\t&lt;filter&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;artifact&gt;*:*&lt;/artifact&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;excludes&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;exclude&gt;META-INF/*.SF&lt;/exclude&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;exclude&gt;META-INF/*.DSA&lt;/exclude&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;exclude&gt;META-INF/*.RSA&lt;/exclude&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;/excludes&gt;\r\n\t\t\t\t\t\t\t\t&lt;/filter&gt;\r\n\t\t\t\t\t\t\t&lt;/filters&gt;\r\n\t\t\t\t\t\t\t&lt;transformers&gt;\r\n\t\t\t\t\t\t\t\t&lt;transformer\r\n\t\t\t\t\t\t\t\t\timplementation=&quot;org.apache.maven.plugins.shade.resource.ManifestResourceTransformer&quot;&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;mainClass&gt;fr.cnp.kfk.streams.Application&lt;/mainClass&gt;\r\n\t\t\t\t\t\t\t\t&lt;/transformer&gt;\r\n\t\t\t\t\t\t\t&lt;/transformers&gt;\r\n\t\t\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t\t\t&lt;/execution&gt;\r\n\t\t\t\t&lt;/executions&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\r\n\t\t&lt;pluginManagement&gt;\r\n\t\t\t&lt;plugins&gt;\r\n\t\t\t\t&lt;plugin&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n\t\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t\t&lt;source&gt;1.8&lt;/source&gt;\r\n\t\t\t\t\t\t&lt;target&gt;1.8&lt;/target&gt;\r\n\t\t\t\t\t\t&lt;compilerId&gt;jdt&lt;/compilerId&gt;\r\n\t\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t\t\t&lt;dependencies&gt;\r\n\t\t\t\t\t\t&lt;dependency&gt;\r\n\t\t\t\t\t\t\t&lt;groupId&gt;org.eclipse.tycho&lt;/groupId&gt;\r\n\t\t\t\t\t\t\t&lt;artifactId&gt;tycho-compiler-jdt&lt;/artifactId&gt;\r\n\t\t\t\t\t\t\t&lt;version&gt;0.21.0&lt;/version&gt;\r\n\t\t\t\t\t\t&lt;/dependency&gt;\r\n\t\t\t\t\t&lt;/dependencies&gt;\r\n\t\t\t\t&lt;/plugin&gt;\r\n\t\t\t\t&lt;plugin&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.eclipse.m2e&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;lifecycle-mapping&lt;/artifactId&gt;\r\n\t\t\t\t\t&lt;version&gt;1.0.0&lt;/version&gt;\r\n\t\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t\t&lt;lifecycleMappingMetadata&gt;\r\n\t\t\t\t\t\t\t&lt;pluginExecutions&gt;\r\n\t\t\t\t\t\t\t\t&lt;pluginExecution&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;pluginExecutionFilter&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;versionRange&gt;[2.4,)&lt;/versionRange&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t\t\t\t\t\t\t&lt;goal&gt;single&lt;/goal&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;/goals&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;/pluginExecutionFilter&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;action&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;ignore /&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;/action&gt;\r\n\t\t\t\t\t\t\t\t&lt;/pluginExecution&gt;\r\n\t\t\t\t\t\t\t\t&lt;pluginExecution&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;pluginExecutionFilter&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;versionRange&gt;[3.1,)&lt;/versionRange&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t\t\t\t\t\t\t&lt;goal&gt;testCompile&lt;/goal&gt;\r\n\t\t\t\t\t\t\t\t\t\t\t&lt;goal&gt;compile&lt;/goal&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;/goals&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;/pluginExecutionFilter&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;action&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;ignore /&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;/action&gt;\r\n\t\t\t\t\t\t\t\t&lt;/pluginExecution&gt;\r\n\t\t\t\t\t\t\t&lt;/pluginExecutions&gt;\r\n\t\t\t\t\t\t&lt;/lifecycleMappingMetadata&gt;\r\n\t\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t\t&lt;/plugin&gt;\r\n\t\t\t&lt;/plugins&gt;\r\n\t\t&lt;/pluginManagement&gt;\r\n\t&lt;/build&gt;\r\n\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;fr.cnp.kfk&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;kfk-commons&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.spark&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spark-sql_${scala.version}&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${spark.version}&lt;/version&gt;\r\n\t\t\t&lt;exclusions&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.codehaus.janino&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;janino&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.codehaus.janino&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;commons-compiler&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t&lt;/exclusions&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.spark&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spark-sql-kafka-0-10_2.12&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.1.1&lt;/version&gt;\r\n\t\t\t&lt;exclusions&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;commons-pool2&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t&lt;/exclusions&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.spark&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spark-streaming_${scala.version}&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${spark.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.opencsv&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;opencsv&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.fasterxml.jackson.dataformat&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jackson-dataformat-yaml&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.fasterxml.jackson.module&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jackson-module-scala_${scala.version}&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- D&#233;pendences pour RecksDB --&gt;\r\n\t\t&lt;!-- &lt;dependency&gt; &lt;groupId&gt;org.apache.flink&lt;/groupId&gt; &lt;artifactId&gt;flink-statebackend-rocksdb_2.12&lt;/artifactId&gt; \r\n\t\t\t&lt;version&gt;${flink.version}&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;/dependency&gt; --&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;artifactId&gt;janino&lt;/artifactId&gt;\r\n\t\t\t&lt;groupId&gt;org.codehaus.janino&lt;/groupId&gt;\r\n\t\t\t&lt;version&gt;3.0.8&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;artifactId&gt;commons-compiler&lt;/artifactId&gt;\r\n\t\t\t&lt;groupId&gt;org.codehaus.janino&lt;/groupId&gt;\r\n\t\t\t&lt;version&gt;3.0.8&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;commons-pool2&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.9.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;dependencyManagement&gt;\r\n\t\t&lt;dependencies&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;com.fasterxml.jackson&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;jackson-bom&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;${jackson-bom.version}&lt;/version&gt;\r\n\t\t\t\t&lt;type&gt;pom&lt;/type&gt;\r\n\t\t\t\t&lt;scope&gt;import&lt;/scope&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t&lt;/dependencies&gt;\r\n\t&lt;/dependencyManagement&gt;\r\n&lt;/project&gt;\r\n\r\ndependency.tree : \r\n\r\n    [INFO] --- maven-dependency-plugin:3.0.2:tree (default-cli) @ kfk-spark-structured-streams --- \r\n    [INFO] fr.cnp.kfk:kfk-spark-structured-streams:jar:0.0.1-SNAPSHOT \r\n    [INFO] +- fr.cnp.kfk:kfk-commons:jar:0.0.1-SNAPSHOT:compile \r\n    [INFO] +- org.apache.spark:spark-sql_2.12:jar:3.1.1:compile \r\n    [INFO] |  +- com.univocity:univocity-parsers:jar:2.9.1:compile \r\n    [INFO] |  +- org.apache.spark:spark-sketch_2.12:jar:3.1.1:compile \r\n    [INFO] |  +- org.apache.spark:spark-core_2.12:jar:3.1.1:compile \r\n    [INFO] |  |  +- org.apache.avro:avro:jar:1.8.2:compile \r\n    [INFO] |  |  |  +- org.apache.commons:commons-compress:jar:1.8.1:compile \r\n    [INFO] |  |  |  \\- org.tukaani:xz:jar:1.5:compile \r\n    [INFO] |  |  +- org.apache.avro:avro-mapred:jar:hadoop2:1.8.2:compile \r\n    [INFO] |  |  |  \\- org.apache.avro:avro-ipc:jar:1.8.2:compile \r\n    [INFO] |  |  +- com.twitter:chill_2.12:jar:0.9.5:compile \r\n    [INFO] |  |  |  \\- com.esotericsoftware:kryo-shaded:jar:4.0.2:compile \r\n    [INFO] |  |  |        +- com.esotericsoftware:minlog:jar:1.3.0:compile \r\n    [INFO] |  |  |     \\- org.objenesis:objenesis:jar:2.6:compile \r\n    [INFO] |  |  +- com.twitter:chill-java:jar:0.9.5:compile \r\n    [INFO] |  |  +- org.apache.hadoop:hadoop-client:jar:3.2.0:compile \r\n    [INFO] |  |  |  +- org.apache.hadoop:hadoop-common:jar:3.2.0:compile \r\n    [INFO] |  |  |  |     +- com.google.guava:guava:jar:23.0:compile \r\n    [INFO] |  |  |  |  |  +- com.google.errorprone:error_prone_annotations:jar:2.0.18:compile\r\n    [INFO] |  |  |  |  |  +- com.google.j2objc:j2objc-annotations:jar:1.1:compile \r\n    [INFO] |  |  |  | |  \\- org.codehaus.mojo:animal-sniffer-annotations:jar:1.14:compile [INFO] |  |  |  |  +- commons-cli:commons-cli:jar:1.3.1:compile \r\n    [INFO] |  |  |  |  +- org.apache.httpcomponents:httpclient:jar:4.5.5:compile \r\n    [INFO] |  |  |  |  |  \\- org.apache.httpcomponents:httpcore:jar:4.4.9:compile \r\n    [INFO] |  |  |  |    +- commons-io:commons-io:jar:2.5:compile \r\n    [INFO] |  |  |  |  +- org.eclipse.jetty:jetty-servlet:jar:9.4.8.v20171121:compile \r\n    [INFO] |  |  |  |  +- javax.servlet.jsp:jsp-api:jar:2.2:provided \r\n    [INFO] |  |  |  |  +- org.apache.commons:commons-configuration2:jar:2.1.1:compile \r\n    [INFO] |  |  |  |  +- com.google.re2j:re2j:jar:1.1:compile \r\n    [INFO] |  | |  |  +- com.google.code.gson:gson:jar:2.8.2:compile \r\n    [INFO] |  |  |  |    +- org.apache.hadoop:hadoop-auth:jar:3.2.0:compile \r\n    [INFO] |  |  |  |  |  +- com.nimbusds:nimbus-jose-jwt:jar:4.41.1:compile \r\n    [INFO] |  |  |  |  |  |  \\- com.github.stephenc.jcip:jcip-annotations:jar:1.0-1:compile [INFO] |  |  |  |  |  \\- net.minidev:json-smart:jar:2.3:compile \r\n    [INFO] |  |  |  |  |     \\- net.minidev:accessors-smart:jar:1.2:compile \r\n    [INFO] |  |  | |  +- org.apache.curator:curator-client:jar:2.12.0:compile \r\n    [INFO] |  | |  |  +- org.apache.htrace:htrace-core4:jar:4.1.0-incubating:compile \r\n    [INFO] |  |  |  |  +- org.apache.kerby:kerb-simplekdc:jar:1.0.1:compile \r\n    [INFO] |  |  |  |  |    +- org.apache.kerby:kerb-client:jar:1.0.1:compile \r\n    [INFO] |  |  |  |  |  |  +- org.apache.kerby:kerby-config:jar:1.0.1:compile \r\n    [INFO] |  |  |  |  |  |  +- org.apache.kerby:kerb-core:jar:1.0.1:compile \r\n    [INFO] |  |  |  |  |  |  |  \\- org.apache.kerby:kerby-pkix:jar:1.0.1:compile \r\n    [INFO] |  |  |  |  |  |  |     +- org.apache.kerby:kerby-asn1:jar:1.0.1:compile \r\n    [INFO] |  |  |  |  |  |  |     \\- org.apache.kerby:kerby-util:jar:1.0.1:compile \r\n    [INFO] |  |  |  |  |  |  +- org.apache.kerby:kerb-common:jar:1.0.1:compile \r\n    [INFO] |  | |  |  |  |  |  \\- org.apache.kerby:kerb-crypto:jar:1.0.1:compile \r\n    [INFO] |  |  |  |  |  |  +- org.apache.kerby:kerb-util:jar:1.0.1:compile \r\n    [INFO] |  |  |  |  |  |  \\- org.apache.kerby:token-provider:jar:1.0.1:compile \r\n    [INFO] |  |  |  | |  \\- org.apache.kerby:kerb-admin:jar:1.0.1:compile \r\n    [INFO] |  |  |  |  |     +- org.apache.kerby:kerb-server:jar:1.0.1:compile \r\n    [INFO] |  |  | |  |     |  \\- org.apache.kerby:kerb-identity:jar:1.0.1:compile \r\n    [INFO] |  |  |  |  |     \\- org.apache.kerby:kerby-xdr:jar:1.0.1:compile \r\n    [INFO] |  |  |  |  +- org.codehaus.woodstox:stax2-api:jar:3.1.4:compile \r\n    [INFO] |  |  |  |     +- com.fasterxml.woodstox:woodstox-core:jar:5.0.3:compile \r\n    [INFO] |  |  |  |  \\- dnsjava:dnsjava:jar:2.1.7:compile \r\n    [INFO] |  |  |  +- org.apache.hadoop:hadoop-hdfs-client:jar:3.2.0:compile \r\n    [INFO] |  |  |  |  \\- com.squareup.okhttp:okhttp:jar:2.7.5:compile \r\n    [INFO] |  |  |  |   \\- com.squareup.okio:okio:jar:1.6.0:compile \r\n    [INFO] |  |  |  +- org.apache.hadoop:hadoop-yarn-api:jar:3.2.0:compile \r\n    [INFO] |  |  |  |  \\- javax.xml.bind:jaxb-api:jar:2.3.0:provided \r\n    [INFO] |  |  |  +- org.apache.hadoop:hadoop-yarn-client:jar:3.2.0:compile \r\n    [INFO] |  |  |     +- org.apache.hadoop:hadoop-mapreduce-client-core:jar:3.2.0:compile \r\n    [INFO] |  |  |  |  \\- org.apache.hadoop:hadoop-yarn-common:jar:3.2.0:compile \r\n    [INFO] |  |  |  |     +- com.fasterxml.jackson.module:jackson-module-jaxb-annotations:jar:2.12.3:compile \r\n    [INFO] |  |  |  |     |  +- jakarta.xml.bind:jakarta.xml.bind-api:jar:2.3.2:compile \r\n    [INFO] |  |  | |     |  \\- jakarta.activation:jakarta.activation-api:jar:1.2.1:compile [INFO] |  |  |  |     \\- com.fasterxml.jackson.jaxrs:jackson-jaxrs-json-provider:jar:2.12.3:compile \r\n    [INFO] |  |  |  |        \\- com.fasterxml.jackson.jaxrs:jackson-jaxrs-base:jar:2.12.3:compile \r\n    [INFO] |  |  |  +- org.apache.hadoop:hadoop-mapreduce-client-jobclient:jar:3.2.0:compile [INFO] |  |  |  |  \\- org.apache.hadoop:hadoop-mapreduce-client-common:jar:3.2.0:compile [INFO] |  |  |  \\- org.apache.hadoop:hadoop-annotations:jar:3.2.0:compile \r\n    [INFO] |  |  +- org.apache.spark:spark-launcher_2.12:jar:3.1.1:compile \r\n    [INFO] |  |  +- org.apache.spark:spark-kvstore_2.12:jar:3.1.1:compile \r\n    [INFO] |  |  |  \\- org.fusesource.leveldbjni:leveldbjni-all:jar:1.8:compile \r\n    [INFO] |  |  +- org.apache.spark:spark-network-common_2.12:jar:3.1.1:compile \r\n    [INFO] |  |  +- org.apache.spark:spark-network-shuffle_2.12:jar:3.1.1:compile \r\n    [INFO] | |  +- org.apache.spark:spark-unsafe_2.12:jar:3.1.1:compile \r\n    [INFO] |  |    +- javax.activation:activation:jar:1.1.1:provided \r\n    [INFO] |  |  +- org.apache.curator:curator-recipes:jar:2.13.0:compile \r\n    [INFO] |  |  |  \\- org.apache.curator:curator-framework:jar:2.13.0:compile \r\n    [INFO] |  |    +- org.apache.zookeeper:zookeeper:jar:3.4.14:compile \r\n    [INFO] |  |  |  \\- org.apache.yetus:audience-annotations:jar:0.5.0:compile \r\n    [INFO] |  |    +- jakarta.servlet:jakarta.servlet-api:jar:4.0.3:compile \r\n    [INFO] |  |  +- org.apache.commons:commons-math3:jar:3.4.1:compile \r\n    [INFO] |  |  +- com.google.code.findbugs:jsr305:jar:3.0.0:compile \r\n    [INFO] |  |  +- org.slf4j:slf4j-api:jar:1.7.25:compile \r\n    [INFO] |  |  +- org.slf4j:jul-to-slf4j:jar:1.7.25:compile \r\n    [INFO] |  |  +- org.slf4j:jcl-over-slf4j:jar:1.7.25:compile \r\n    [INFO] |  |  +- log4j:log4j:jar:1.2.17:compile \r\n    [INFO] |  |  +- org.slf4j:slf4j-log4j12:jar:1.7.25:compile \r\n    [INFO] |  |  +- com.ning:compress-lzf:jar:1.0.3:compile \r\n    [INFO] |  |  +- org.xerial.snappy:snappy-java:jar:1.1.8.2:compile \r\n    [INFO] |  |  +- org.lz4:lz4-java:jar:1.7.1:compile \r\n    [INFO] |  |  +- com.github.luben:zstd-jni:jar:1.4.8-1:compile \r\n    [INFO] |  |  +- org.roaringbitmap:RoaringBitmap:jar:0.9.0:compile \r\n    [INFO] |  |  |  \\- org.roaringbitmap:shims:jar:0.9.0:runtime \r\n    [INFO] |  |  +- commons-net:commons-net:jar:3.1:compile \r\n    [INFO] |  |  +- org.scala-lang.modules:scala-xml_2.12:jar:1.2.0:compile \r\n    [INFO] |  |     +- org.scala-lang:scala-reflect:jar:2.12.10:compile \r\n    [INFO] |  |  +- org.json4s:json4s-jackson_2.12:jar:3.7.0-M5:compile \r\n    [INFO] |  |  |  \\- org.json4s:json4s-core_2.12:jar:3.7.0-M5:compile \r\n    [INFO] |  |  |     +- org.json4s:json4s-ast_2.12:jar:3.7.0-M5:compile \r\n    [INFO] |  |  |     \\- org.json4s:json4s-scalap_2.12:jar:3.7.0-M5:compile \r\n    [INFO] |  |  +- org.glassfish.jersey.core:jersey-client:jar:2.25.1:compile \r\n    [INFO] |  | |  +- javax.ws.rs:javax.ws.rs-api:jar:2.1:provided \r\n    [INFO] |  |  |  +- org.glassfish.hk2:hk2-api:jar:2.5.0-b32:compile \r\n    [INFO] |  |  |  |  +- org.glassfish.hk2:hk2-utils:jar:2.5.0-b32:compile \r\n    [INFO] |  |  |  |  \\- org.glassfish.hk2.external:aopalliance-repackaged:jar:2.5.0-b32:compile \r\n    [INFO] |  |  |  +- org.glassfish.hk2.external:javax.inject:jar:2.5.0-b32:compile \r\n    [INFO] | |  |  \\- org.glassfish.hk2:hk2-locator:jar:2.5.0-b32:compile \r\n    [INFO] |  |  +- org.glassfish.jersey.core:jersey-common:jar:2.25.1:compile \r\n    [INFO] |  |  |  +- javax.annotation:javax.annotation-api:jar:1.2:compile \r\n    [INFO] |  |  |     +- org.glassfish.jersey.bundles.repackaged:jersey-guava:jar:2.25.1:compile \r\n    [INFO] |  |  |  \\- org.glassfish.hk2:osgi-resource-locator:jar:1.0.1:compile \r\n    [INFO] |  |     +- org.glassfish.jersey.core:jersey-server:jar:2.25.1:compile\r\n    [INFO] |  |  |  +- org.glassfish.jersey.media:jersey-media-jaxb:jar:2.25.1:compile \r\n    [INFO] |  |  |  \\- javax.validation:validation-api:jar:1.1.0.Final:compile \r\n    [INFO] |  |  +- org.glassfish.jersey.containers:jersey-container-servlet:jar:2.25.1:compile \r\n    [INFO] |  |  +- org.glassfish.jersey.containers:jersey-container-servlet-core:jar:2.25.1:compile \r\n    [INFO] |  |  +- org.glassfish.jersey.inject:jersey-hk2:jar:2.30:compile \r\n    [INFO] |  |  | \\- org.javassist:javassist:jar:3.21.0-GA:compile \r\n    [INFO] |  |  +- io.netty:netty-all:jar:4.1.51.Final:compile \r\n    [INFO] |  |  +- com.clearspring.analytics:stream:jar:2.9.6:compile \r\n    [INFO] |  |  +- io.dropwizard.metrics:metrics-core:jar:3.1.5:compile \r\n    [INFO] |  |  +- io.dropwizard.metrics:metrics-jvm:jar:3.1.5:compile \r\n    [INFO] |  |  +- io.dropwizard.metrics:metrics-json:jar:3.1.5:compile \r\n    [INFO] |  |  +- io.dropwizard.metrics:metrics-graphite:jar:3.1.5:compile \r\n    [INFO] |  |     +- io.dropwizard.metrics:metrics-jmx:jar:4.1.1:compile \r\n    [INFO] |  |  +- org.apache.ivy:ivy:jar:2.4.0:compile \r\n    [INFO] |  |  +- oro:oro:jar:2.0.8:compile \r\n    [INFO] |  |  +- net.razorvine:pyrolite:jar:4.30:compile \r\n    [INFO] |  |  +- net.sf.py4j:py4j:jar:0.10.9:compile \r\n    [INFO] |  |  \\- org.apache.commons:commons-crypto:jar:1.1.0:compile \r\n    [INFO] |  +- org.apache.spark:spark-catalyst_2.12:jar:3.1.1:compile \r\n    [INFO] |  |  +- org.scala-lang.modules:scala-parser-combinators_2.12:jar:1.1.2:compile [INFO] |  |  +- org.antlr:antlr4-runtime:jar:4.8-1:compile \r\n    [INFO] |  |    +- commons-codec:commons-codec:jar:1.10:compile \r\n    [INFO] |  |  +- org.apache.arrow:arrow-vector:jar:2.0.0:compile \r\n    [INFO] |  |  |  +- org.apache.arrow:arrow-format:jar:2.0.0:compile \r\n    [INFO] |  |  |  +- org.apache.arrow:arrow-memory-core:jar:2.0.0:compile \r\n    [INFO] |  |  |  \\- com.google.flatbuffers:flatbuffers-java:jar:1.9.0:compile \r\n    [INFO] |  |  \\- org.apache.arrow:arrow-memory-netty:jar:2.0.0:compile \r\n    [INFO] |     +- org.apache.spark:spark-tags_2.12:jar:3.1.1:compile \r\n    [INFO] |  +- org.apache.orc:orc-core:jar:1.5.12:compile \r\n    [INFO] |  |  +- org.apache.orc:orc-shims:jar:1.5.12:compile \r\n    [INFO] |  |  +- com.google.protobuf:protobuf-java:jar:2.5.0:compile \r\n    [INFO] |  |  +- commons-lang:commons-lang:jar:2.6:compile \r\n    [INFO] |  |  +- io.airlift:aircompressor:jar:0.10:compile \r\n    [INFO] |  |  \\- org.threeten:threeten-extra:jar:1.5.0:compile \r\n    [INFO] |  +- org.apache.orc:orc-mapreduce:jar:1.5.12:compile \r\n    [INFO] |  +- org.apache.hive:hive-storage-api:jar:2.7.2:compile \r\n    [INFO] |  +- org.apache.parquet:parquet-column:jar:1.10.1:compile \r\n    [INFO] |  |  +- org.apache.parquet:parquet-common:jar:1.10.1:compile \r\n    [INFO] |  |  \\- org.apache.parquet:parquet-encoding:jar:1.10.1:compile \r\n    [INFO] |  +- org.apache.parquet:parquet-hadoop:jar:1.10.1:compile \r\n    [INFO] |  |  +- org.apache.parquet:parquet-format:jar:2.4.0:compile \r\n    [INFO] |  |  +- org.apache.parquet:parquet-jackson:jar:1.10.1:compile \r\n    [INFO] |  |  +- org.codehaus.jackson:jackson-mapper-asl:jar:1.9.13:compile \r\n    [INFO] |  | \\- org.codehaus.jackson:jackson-core-asl:jar:1.9.13:compile \r\n    [INFO] |     +- org.apache.xbean:xbean-asm7-shaded:jar:4.15:compile \r\n    [INFO] |  \\- org.spark-project.spark:unused:jar:1.0.0:compile \r\n    [INFO] +- org.apache.spark:spark-sql-kafka-0-10_2.12:jar:3.1.1:compile \r\n    [INFO] |     +- org.apache.spark:spark-token-provider-kafka-0-10_2.12:jar:3.1.1:compile \r\n    [INFO] |  \\- org.apache.kafka:kafka-clients:jar:2.6.0:compile \r\n    [INFO]    +- org.apache.spark:spark-streaming_2.12:jar:3.1.1:compile \r\n    [INFO] |  \\- org.scala-lang:scala-library:jar:2.12.10:compile \r\n    [INFO] +- com.opencsv:opencsv:jar:4.1:compile \r\n    [INFO] |  +- org.apache.commons:commons-lang3:jar:3.5:compile \r\n    [INFO] |  +- org.apache.commons:commons-text:jar:1.1:compile \r\n    [INFO] |  \\- commons-beanutils:commons-beanutils:jar:1.9.3:compile \r\n    [INFO] |     \\- commons-collections:commons-collections:jar:3.2.2:compile \r\n    [INFO] +- com.fasterxml.jackson.dataformat:jackson-dataformat-yaml:jar:2.12.3:compile [INFO] |  +- org.yaml:snakeyaml:jar:1.17:compile \r\n    [INFO] |  \\- com.fasterxml.jackson.core:jackson-core:jar:2.12.3:compile \r\n    [INFO] +- com.fasterxml.jackson.module:jackson-module-scala_2.12:jar:2.12.3:runtime \r\n    [INFO] |  +- com.fasterxml.jackson.core:jackson-annotations:jar:2.12.3:compile \r\n    [INFO] |  \\- com.thoughtworks.paranamer:paranamer:jar:2.8:compile \r\n    [INFO] +- com.fasterxml.jackson.core:jackson-databind:jar:2.12.3:compile \r\n    [INFO]    +- org.codehaus.janino:janino:jar:3.0.8:compile \r\n    [INFO] +- org.codehaus.janino:commons-compiler:jar:3.0.8:compile \r\n    [INFO] \\- org.apache.commons:commons-pool2:jar:2.9.0:compile \r\n    [INFO]    ------------------------------------------------------------------------ \r\n    [INFO] BUILD SUCCESS \r\n    [INFO]    ------------------------------------------------------------------------ \r\n    [INFO] Total time:  7.334 s [INFO] Finished at: 2021-06-02T09:19:26+02:00 \r\n    [INFO]    ------------------------------------------------------------------------\r\n\r\nThe error :\r\n\r\n    Error: Bad target:null\r\n    java.lang.reflect.InvocationTargetException\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.lang.reflect.Method.invoke(Method.java:498)\r\n    \tat fr.cnp.kfk.streams.Application.main(Application.java:14)\r\n    Caused by: org.apache.spark.sql.streaming.StreamingQueryException: null\r\n\r\n    [...]\r\n    \r\n    \tat org.apache.spark.sql.execution.streaming.StreamExecution.org$apache$spark$sql$execution$streaming$StreamExecution$$runStream(StreamExecution.scala:354)\r\n    \tat org.apache.spark.sql.execution.streaming.StreamExecution$$anon$1.run(StreamExecution.scala:244)\r\n    Caused by: java.lang.ExceptionInInitializerError\r\n    \tat org.apache.spark.sql.execution.SparkPlan.executeQuery(SparkPlan.scala:215)\r\n    \tat org.apache.spark.sql.execution.SparkPlan.execute(SparkPlan.scala:176)\r\n    \tat org.apache.spark.sql.execution.datasources.v2.V2TableWriteExec.writeWithV2(WriteToDataSourceV2Exec.scala:338)\r\n    \tat org.apache.spark.sql.execution.datasources.v2.V2TableWriteExec.writeWithV2$(WriteToDataSourceV2Exec.scala:336)\r\n    \tat org.apache.spark.sql.execution.datasources.v2.WriteToDataSourceV2Exec.writeWithV2(WriteToDataSourceV2Exec.scala:297)\r\n    \tat org.apache.spark.sql.execution.datasources.v2.WriteToDataSourceV2Exec.run(WriteToDataSourceV2Exec.scala:304)\r\n    \tat org.apache.spark.sql.execution.datasources.v2.V2CommandExec.result$lzycompute(V2CommandExec.scala:40)\r\n    \tat org.apache.spark.sql.execution.datasources.v2.V2CommandExec.result(V2CommandExec.scala:40)\r\n    \tat org.apache.spark.sql.execution.datasources.v2.V2CommandExec.executeCollect(V2CommandExec.scala:46)\r\n    \tat org.apache.spark.sql.Dataset.collectFromPlan(Dataset.scala:3696)\r\n    \tat org.apache.spark.sql.Dataset.$anonfun$collect$1(Dataset.scala:2965)\r\n    \tat org.apache.spark.sql.Dataset.$anonfun$withAction$1(Dataset.scala:3687)\r\n    \tat org.apache.spark.sql.execution.SQLExecution$.$anonfun$withNewExecutionId$5(SQLExecution.scala:103)\r\n    \tat org.apache.spark.sql.execution.SQLExecution$.withSQLConfPropagated(SQLExecution.scala:163)\r\n    \tat org.apache.spark.sql.execution.SQLExecution$.$anonfun$withNewExecutionId$1(SQLExecution.scala:90)\r\n    \tat org.apache.spark.sql.SparkSession.withActive(SparkSession.scala:772)\r\n    \tat org.apache.spark.sql.execution.SQLExecution$.withNewExecutionId(SQLExecution.scala:64)\r\n    \tat org.apache.spark.sql.Dataset.withAction(Dataset.scala:3685)\r\n    \tat org.apache.spark.sql.Dataset.collect(Dataset.scala:2965)\r\n    \tat org.apache.spark.sql.execution.streaming.MicroBatchExecution.$anonfun$runBatch$16(MicroBatchExecution.scala:589)\r\n    \tat org.apache.spark.sql.execution.SQLExecution$.$anonfun$withNewExecutionId$5(SQLExecution.scala:103)\r\n    \tat org.apache.spark.sql.execution.SQLExecution$.withSQLConfPropagated(SQLExecution.scala:163)\r\n    \tat org.apache.spark.sql.execution.SQLExecution$.$anonfun$withNewExecutionId$1(SQLExecution.scala:90)\r\n    \tat org.apache.spark.sql.SparkSession.withActive(SparkSession.scala:772)\r\n    \tat org.apache.spark.sql.execution.SQLExecution$.withNewExecutionId(SQLExecution.scala:64)\r\n    \tat org.apache.spark.sql.execution.streaming.MicroBatchExecution.$anonfun$runBatch$15(MicroBatchExecution.scala:584)\r\n    \tat org.apache.spark.sql.execution.streaming.ProgressReporter.reportTimeTaken(ProgressReporter.scala:357)\r\n    \tat org.apache.spark.sql.execution.streaming.ProgressReporter.reportTimeTaken$(ProgressReporter.scala:355)\r\n    \tat org.apache.spark.sql.execution.streaming.StreamExecution.reportTimeTaken(StreamExecution.scala:68)\r\n    \tat org.apache.spark.sql.execution.streaming.MicroBatchExecution.runBatch(MicroBatchExecution.scala:584)\r\n    \tat org.apache.spark.sql.execution.streaming.MicroBatchExecution.$anonfun$runActivatedStream$2(MicroBatchExecution.scala:226)\r\n    \tat scala.runtime.java8.JFunction0$mcV$sp.apply(JFunction0$mcV$sp.java:23)\r\n    \tat org.apache.spark.sql.execution.streaming.ProgressReporter.reportTimeTaken(ProgressReporter.scala:357)\r\n    \tat org.apache.spark.sql.execution.streaming.ProgressReporter.reportTimeTaken$(ProgressReporter.scala:355)\r\n    \tat org.apache.spark.sql.execution.streaming.StreamExecution.reportTimeTaken(StreamExecution.scala:68)\r\n    \tat org.apache.spark.sql.execution.streaming.MicroBatchExecution.$anonfun$runActivatedStream$1(MicroBatchExecution.scala:194)\r\n    \tat org.apache.spark.sql.execution.streaming.ProcessingTimeExecutor.execute(TriggerExecutor.scala:57)\r\n    \tat org.apache.spark.sql.execution.streaming.MicroBatchExecution.runActivatedStream(MicroBatchExecution.scala:188)\r\n    \tat org.apache.spark.sql.execution.streaming.StreamExecution.org$apache$spark$sql$execution$streaming$StreamExecution$$runStream(StreamExecution.scala:333)\r\n    \t... 1 more\r\n    Caused by: com.fasterxml.jackson.databind.JsonMappingException: Scala module 2.10.5 requires Jackson Databind version &gt;= 2.10.0 and &lt; 2.11.0\r\n    \tat com.fasterxml.jackson.module.scala.JacksonModule.setupModule(JacksonModule.scala:61)\r\n    \tat com.fasterxml.jackson.module.scala.JacksonModule.setupModule$(JacksonModule.scala:46)\r\n    \tat com.fasterxml.jackson.module.scala.DefaultScalaModule.setupModule(DefaultScalaModule.scala:17)\r\n    \tat com.fasterxml.jackson.databind.ObjectMapper.registerModule(ObjectMapper.java:747)\r\n    \tat org.apache.spark.rdd.RDDOperationScope$.&lt;init&gt;(RDDOperationScope.scala:82)\r\n    \tat org.apache.spark.rdd.RDDOperationScope$.&lt;clinit&gt;(RDDOperationScope.scala)\r\n    \t... 40 more","title":"Scala module 2.12.3 requires Jackson Databind version &gt;= 2.12.0 and &lt; 2.13.0 but I have databind 2.12.3","body":"<p>Allen D.Ball, my answer is too long for comment. So,\npom.xml :</p>\n<p>\n4.0.0</p>\n<pre><code>&lt;parent&gt;\n    &lt;groupId&gt;fr.cnp.kfk&lt;/groupId&gt;\n    &lt;artifactId&gt;jee&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n&lt;/parent&gt;\n\n&lt;artifactId&gt;kfk-spark-structured-streams&lt;/artifactId&gt;\n&lt;packaging&gt;jar&lt;/packaging&gt;\n\n&lt;name&gt;Spark Structured Streams&lt;/name&gt;\n\n&lt;properties&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;spark.version&gt;3.1.1&lt;/spark.version&gt;\n    &lt;slf4j.version&gt;1.7.7&lt;/slf4j.version&gt;\n    &lt;log4j.version&gt;1.2.17&lt;/log4j.version&gt;\n    &lt;scala.version&gt;2.12&lt;/scala.version&gt;\n    &lt;jackson-bom.version&gt;2.12.3&lt;/jackson-bom.version&gt;\n&lt;/properties&gt;\n\n&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n                &lt;source&gt;1.8&lt;/source&gt;\n                &lt;target&gt;1.8&lt;/target&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.0.0&lt;/version&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;phase&gt;package&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;shade&lt;/goal&gt;\n                    &lt;/goals&gt;\n                    &lt;configuration&gt;\n                        &lt;artifactSet&gt;\n                            &lt;excludes&gt;\n                                &lt;exclude&gt;org.apache.flink:force-shading&lt;/exclude&gt;\n                                &lt;exclude&gt;com.google.code.findbugs:jsr305&lt;/exclude&gt;\n                            &lt;/excludes&gt;\n                        &lt;/artifactSet&gt;\n                        &lt;filters&gt;\n                            &lt;filter&gt;\n                                &lt;artifact&gt;*:*&lt;/artifact&gt;\n                                &lt;excludes&gt;\n                                    &lt;exclude&gt;META-INF/*.SF&lt;/exclude&gt;\n                                    &lt;exclude&gt;META-INF/*.DSA&lt;/exclude&gt;\n                                    &lt;exclude&gt;META-INF/*.RSA&lt;/exclude&gt;\n                                &lt;/excludes&gt;\n                            &lt;/filter&gt;\n                        &lt;/filters&gt;\n                        &lt;transformers&gt;\n                            &lt;transformer\n                                implementation=&quot;org.apache.maven.plugins.shade.resource.ManifestResourceTransformer&quot;&gt;\n                                &lt;mainClass&gt;fr.cnp.kfk.streams.Application&lt;/mainClass&gt;\n                            &lt;/transformer&gt;\n                        &lt;/transformers&gt;\n                    &lt;/configuration&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n\n    &lt;pluginManagement&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;1.8&lt;/source&gt;\n                    &lt;target&gt;1.8&lt;/target&gt;\n                    &lt;compilerId&gt;jdt&lt;/compilerId&gt;\n                &lt;/configuration&gt;\n                &lt;dependencies&gt;\n                    &lt;dependency&gt;\n                        &lt;groupId&gt;org.eclipse.tycho&lt;/groupId&gt;\n                        &lt;artifactId&gt;tycho-compiler-jdt&lt;/artifactId&gt;\n                        &lt;version&gt;0.21.0&lt;/version&gt;\n                    &lt;/dependency&gt;\n                &lt;/dependencies&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.eclipse.m2e&lt;/groupId&gt;\n                &lt;artifactId&gt;lifecycle-mapping&lt;/artifactId&gt;\n                &lt;version&gt;1.0.0&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;lifecycleMappingMetadata&gt;\n                        &lt;pluginExecutions&gt;\n                            &lt;pluginExecution&gt;\n                                &lt;pluginExecutionFilter&gt;\n                                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                                    &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n                                    &lt;versionRange&gt;[2.4,)&lt;/versionRange&gt;\n                                    &lt;goals&gt;\n                                        &lt;goal&gt;single&lt;/goal&gt;\n                                    &lt;/goals&gt;\n                                &lt;/pluginExecutionFilter&gt;\n                                &lt;action&gt;\n                                    &lt;ignore /&gt;\n                                &lt;/action&gt;\n                            &lt;/pluginExecution&gt;\n                            &lt;pluginExecution&gt;\n                                &lt;pluginExecutionFilter&gt;\n                                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                                    &lt;versionRange&gt;[3.1,)&lt;/versionRange&gt;\n                                    &lt;goals&gt;\n                                        &lt;goal&gt;testCompile&lt;/goal&gt;\n                                        &lt;goal&gt;compile&lt;/goal&gt;\n                                    &lt;/goals&gt;\n                                &lt;/pluginExecutionFilter&gt;\n                                &lt;action&gt;\n                                    &lt;ignore /&gt;\n                                &lt;/action&gt;\n                            &lt;/pluginExecution&gt;\n                        &lt;/pluginExecutions&gt;\n                    &lt;/lifecycleMappingMetadata&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/pluginManagement&gt;\n&lt;/build&gt;\n\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;fr.cnp.kfk&lt;/groupId&gt;\n        &lt;artifactId&gt;kfk-commons&lt;/artifactId&gt;\n        &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.spark&lt;/groupId&gt;\n        &lt;artifactId&gt;spark-sql_${scala.version}&lt;/artifactId&gt;\n        &lt;version&gt;${spark.version}&lt;/version&gt;\n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;org.codehaus.janino&lt;/groupId&gt;\n                &lt;artifactId&gt;janino&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;org.codehaus.janino&lt;/groupId&gt;\n                &lt;artifactId&gt;commons-compiler&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.spark&lt;/groupId&gt;\n        &lt;artifactId&gt;spark-sql-kafka-0-10_2.12&lt;/artifactId&gt;\n        &lt;version&gt;3.1.1&lt;/version&gt;\n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n                &lt;artifactId&gt;commons-pool2&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.spark&lt;/groupId&gt;\n        &lt;artifactId&gt;spark-streaming_${scala.version}&lt;/artifactId&gt;\n        &lt;version&gt;${spark.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.opencsv&lt;/groupId&gt;\n        &lt;artifactId&gt;opencsv&lt;/artifactId&gt;\n        &lt;version&gt;4.1&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.fasterxml.jackson.dataformat&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-dataformat-yaml&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.fasterxml.jackson.module&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-module-scala_${scala.version}&lt;/artifactId&gt;\n        &lt;scope&gt;runtime&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- Dépendences pour RecksDB --&gt;\n    &lt;!-- &lt;dependency&gt; &lt;groupId&gt;org.apache.flink&lt;/groupId&gt; &lt;artifactId&gt;flink-statebackend-rocksdb_2.12&lt;/artifactId&gt; \n        &lt;version&gt;${flink.version}&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;/dependency&gt; --&gt;\n\n    &lt;dependency&gt;\n        &lt;artifactId&gt;janino&lt;/artifactId&gt;\n        &lt;groupId&gt;org.codehaus.janino&lt;/groupId&gt;\n        &lt;version&gt;3.0.8&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;artifactId&gt;commons-compiler&lt;/artifactId&gt;\n        &lt;groupId&gt;org.codehaus.janino&lt;/groupId&gt;\n        &lt;version&gt;3.0.8&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n        &lt;artifactId&gt;commons-pool2&lt;/artifactId&gt;\n        &lt;version&gt;2.9.0&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n\n&lt;dependencyManagement&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-bom&lt;/artifactId&gt;\n            &lt;version&gt;${jackson-bom.version}&lt;/version&gt;\n            &lt;type&gt;pom&lt;/type&gt;\n            &lt;scope&gt;import&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n&lt;/dependencyManagement&gt;\n</code></pre>\n\n<p>dependency.tree :</p>\n<pre><code>[INFO] --- maven-dependency-plugin:3.0.2:tree (default-cli) @ kfk-spark-structured-streams --- \n[INFO] fr.cnp.kfk:kfk-spark-structured-streams:jar:0.0.1-SNAPSHOT \n[INFO] +- fr.cnp.kfk:kfk-commons:jar:0.0.1-SNAPSHOT:compile \n[INFO] +- org.apache.spark:spark-sql_2.12:jar:3.1.1:compile \n[INFO] |  +- com.univocity:univocity-parsers:jar:2.9.1:compile \n[INFO] |  +- org.apache.spark:spark-sketch_2.12:jar:3.1.1:compile \n[INFO] |  +- org.apache.spark:spark-core_2.12:jar:3.1.1:compile \n[INFO] |  |  +- org.apache.avro:avro:jar:1.8.2:compile \n[INFO] |  |  |  +- org.apache.commons:commons-compress:jar:1.8.1:compile \n[INFO] |  |  |  \\- org.tukaani:xz:jar:1.5:compile \n[INFO] |  |  +- org.apache.avro:avro-mapred:jar:hadoop2:1.8.2:compile \n[INFO] |  |  |  \\- org.apache.avro:avro-ipc:jar:1.8.2:compile \n[INFO] |  |  +- com.twitter:chill_2.12:jar:0.9.5:compile \n[INFO] |  |  |  \\- com.esotericsoftware:kryo-shaded:jar:4.0.2:compile \n[INFO] |  |  |        +- com.esotericsoftware:minlog:jar:1.3.0:compile \n[INFO] |  |  |     \\- org.objenesis:objenesis:jar:2.6:compile \n[INFO] |  |  +- com.twitter:chill-java:jar:0.9.5:compile \n[INFO] |  |  +- org.apache.hadoop:hadoop-client:jar:3.2.0:compile \n[INFO] |  |  |  +- org.apache.hadoop:hadoop-common:jar:3.2.0:compile \n[INFO] |  |  |  |     +- com.google.guava:guava:jar:23.0:compile \n[INFO] |  |  |  |  |  +- com.google.errorprone:error_prone_annotations:jar:2.0.18:compile\n[INFO] |  |  |  |  |  +- com.google.j2objc:j2objc-annotations:jar:1.1:compile \n[INFO] |  |  |  | |  \\- org.codehaus.mojo:animal-sniffer-annotations:jar:1.14:compile [INFO] |  |  |  |  +- commons-cli:commons-cli:jar:1.3.1:compile \n[INFO] |  |  |  |  +- org.apache.httpcomponents:httpclient:jar:4.5.5:compile \n[INFO] |  |  |  |  |  \\- org.apache.httpcomponents:httpcore:jar:4.4.9:compile \n[INFO] |  |  |  |    +- commons-io:commons-io:jar:2.5:compile \n[INFO] |  |  |  |  +- org.eclipse.jetty:jetty-servlet:jar:9.4.8.v20171121:compile \n[INFO] |  |  |  |  +- javax.servlet.jsp:jsp-api:jar:2.2:provided \n[INFO] |  |  |  |  +- org.apache.commons:commons-configuration2:jar:2.1.1:compile \n[INFO] |  |  |  |  +- com.google.re2j:re2j:jar:1.1:compile \n[INFO] |  | |  |  +- com.google.code.gson:gson:jar:2.8.2:compile \n[INFO] |  |  |  |    +- org.apache.hadoop:hadoop-auth:jar:3.2.0:compile \n[INFO] |  |  |  |  |  +- com.nimbusds:nimbus-jose-jwt:jar:4.41.1:compile \n[INFO] |  |  |  |  |  |  \\- com.github.stephenc.jcip:jcip-annotations:jar:1.0-1:compile [INFO] |  |  |  |  |  \\- net.minidev:json-smart:jar:2.3:compile \n[INFO] |  |  |  |  |     \\- net.minidev:accessors-smart:jar:1.2:compile \n[INFO] |  |  | |  +- org.apache.curator:curator-client:jar:2.12.0:compile \n[INFO] |  | |  |  +- org.apache.htrace:htrace-core4:jar:4.1.0-incubating:compile \n[INFO] |  |  |  |  +- org.apache.kerby:kerb-simplekdc:jar:1.0.1:compile \n[INFO] |  |  |  |  |    +- org.apache.kerby:kerb-client:jar:1.0.1:compile \n[INFO] |  |  |  |  |  |  +- org.apache.kerby:kerby-config:jar:1.0.1:compile \n[INFO] |  |  |  |  |  |  +- org.apache.kerby:kerb-core:jar:1.0.1:compile \n[INFO] |  |  |  |  |  |  |  \\- org.apache.kerby:kerby-pkix:jar:1.0.1:compile \n[INFO] |  |  |  |  |  |  |     +- org.apache.kerby:kerby-asn1:jar:1.0.1:compile \n[INFO] |  |  |  |  |  |  |     \\- org.apache.kerby:kerby-util:jar:1.0.1:compile \n[INFO] |  |  |  |  |  |  +- org.apache.kerby:kerb-common:jar:1.0.1:compile \n[INFO] |  | |  |  |  |  |  \\- org.apache.kerby:kerb-crypto:jar:1.0.1:compile \n[INFO] |  |  |  |  |  |  +- org.apache.kerby:kerb-util:jar:1.0.1:compile \n[INFO] |  |  |  |  |  |  \\- org.apache.kerby:token-provider:jar:1.0.1:compile \n[INFO] |  |  |  | |  \\- org.apache.kerby:kerb-admin:jar:1.0.1:compile \n[INFO] |  |  |  |  |     +- org.apache.kerby:kerb-server:jar:1.0.1:compile \n[INFO] |  |  | |  |     |  \\- org.apache.kerby:kerb-identity:jar:1.0.1:compile \n[INFO] |  |  |  |  |     \\- org.apache.kerby:kerby-xdr:jar:1.0.1:compile \n[INFO] |  |  |  |  +- org.codehaus.woodstox:stax2-api:jar:3.1.4:compile \n[INFO] |  |  |  |     +- com.fasterxml.woodstox:woodstox-core:jar:5.0.3:compile \n[INFO] |  |  |  |  \\- dnsjava:dnsjava:jar:2.1.7:compile \n[INFO] |  |  |  +- org.apache.hadoop:hadoop-hdfs-client:jar:3.2.0:compile \n[INFO] |  |  |  |  \\- com.squareup.okhttp:okhttp:jar:2.7.5:compile \n[INFO] |  |  |  |   \\- com.squareup.okio:okio:jar:1.6.0:compile \n[INFO] |  |  |  +- org.apache.hadoop:hadoop-yarn-api:jar:3.2.0:compile \n[INFO] |  |  |  |  \\- javax.xml.bind:jaxb-api:jar:2.3.0:provided \n[INFO] |  |  |  +- org.apache.hadoop:hadoop-yarn-client:jar:3.2.0:compile \n[INFO] |  |  |     +- org.apache.hadoop:hadoop-mapreduce-client-core:jar:3.2.0:compile \n[INFO] |  |  |  |  \\- org.apache.hadoop:hadoop-yarn-common:jar:3.2.0:compile \n[INFO] |  |  |  |     +- com.fasterxml.jackson.module:jackson-module-jaxb-annotations:jar:2.12.3:compile \n[INFO] |  |  |  |     |  +- jakarta.xml.bind:jakarta.xml.bind-api:jar:2.3.2:compile \n[INFO] |  |  | |     |  \\- jakarta.activation:jakarta.activation-api:jar:1.2.1:compile [INFO] |  |  |  |     \\- com.fasterxml.jackson.jaxrs:jackson-jaxrs-json-provider:jar:2.12.3:compile \n[INFO] |  |  |  |        \\- com.fasterxml.jackson.jaxrs:jackson-jaxrs-base:jar:2.12.3:compile \n[INFO] |  |  |  +- org.apache.hadoop:hadoop-mapreduce-client-jobclient:jar:3.2.0:compile [INFO] |  |  |  |  \\- org.apache.hadoop:hadoop-mapreduce-client-common:jar:3.2.0:compile [INFO] |  |  |  \\- org.apache.hadoop:hadoop-annotations:jar:3.2.0:compile \n[INFO] |  |  +- org.apache.spark:spark-launcher_2.12:jar:3.1.1:compile \n[INFO] |  |  +- org.apache.spark:spark-kvstore_2.12:jar:3.1.1:compile \n[INFO] |  |  |  \\- org.fusesource.leveldbjni:leveldbjni-all:jar:1.8:compile \n[INFO] |  |  +- org.apache.spark:spark-network-common_2.12:jar:3.1.1:compile \n[INFO] |  |  +- org.apache.spark:spark-network-shuffle_2.12:jar:3.1.1:compile \n[INFO] | |  +- org.apache.spark:spark-unsafe_2.12:jar:3.1.1:compile \n[INFO] |  |    +- javax.activation:activation:jar:1.1.1:provided \n[INFO] |  |  +- org.apache.curator:curator-recipes:jar:2.13.0:compile \n[INFO] |  |  |  \\- org.apache.curator:curator-framework:jar:2.13.0:compile \n[INFO] |  |    +- org.apache.zookeeper:zookeeper:jar:3.4.14:compile \n[INFO] |  |  |  \\- org.apache.yetus:audience-annotations:jar:0.5.0:compile \n[INFO] |  |    +- jakarta.servlet:jakarta.servlet-api:jar:4.0.3:compile \n[INFO] |  |  +- org.apache.commons:commons-math3:jar:3.4.1:compile \n[INFO] |  |  +- com.google.code.findbugs:jsr305:jar:3.0.0:compile \n[INFO] |  |  +- org.slf4j:slf4j-api:jar:1.7.25:compile \n[INFO] |  |  +- org.slf4j:jul-to-slf4j:jar:1.7.25:compile \n[INFO] |  |  +- org.slf4j:jcl-over-slf4j:jar:1.7.25:compile \n[INFO] |  |  +- log4j:log4j:jar:1.2.17:compile \n[INFO] |  |  +- org.slf4j:slf4j-log4j12:jar:1.7.25:compile \n[INFO] |  |  +- com.ning:compress-lzf:jar:1.0.3:compile \n[INFO] |  |  +- org.xerial.snappy:snappy-java:jar:1.1.8.2:compile \n[INFO] |  |  +- org.lz4:lz4-java:jar:1.7.1:compile \n[INFO] |  |  +- com.github.luben:zstd-jni:jar:1.4.8-1:compile \n[INFO] |  |  +- org.roaringbitmap:RoaringBitmap:jar:0.9.0:compile \n[INFO] |  |  |  \\- org.roaringbitmap:shims:jar:0.9.0:runtime \n[INFO] |  |  +- commons-net:commons-net:jar:3.1:compile \n[INFO] |  |  +- org.scala-lang.modules:scala-xml_2.12:jar:1.2.0:compile \n[INFO] |  |     +- org.scala-lang:scala-reflect:jar:2.12.10:compile \n[INFO] |  |  +- org.json4s:json4s-jackson_2.12:jar:3.7.0-M5:compile \n[INFO] |  |  |  \\- org.json4s:json4s-core_2.12:jar:3.7.0-M5:compile \n[INFO] |  |  |     +- org.json4s:json4s-ast_2.12:jar:3.7.0-M5:compile \n[INFO] |  |  |     \\- org.json4s:json4s-scalap_2.12:jar:3.7.0-M5:compile \n[INFO] |  |  +- org.glassfish.jersey.core:jersey-client:jar:2.25.1:compile \n[INFO] |  | |  +- javax.ws.rs:javax.ws.rs-api:jar:2.1:provided \n[INFO] |  |  |  +- org.glassfish.hk2:hk2-api:jar:2.5.0-b32:compile \n[INFO] |  |  |  |  +- org.glassfish.hk2:hk2-utils:jar:2.5.0-b32:compile \n[INFO] |  |  |  |  \\- org.glassfish.hk2.external:aopalliance-repackaged:jar:2.5.0-b32:compile \n[INFO] |  |  |  +- org.glassfish.hk2.external:javax.inject:jar:2.5.0-b32:compile \n[INFO] | |  |  \\- org.glassfish.hk2:hk2-locator:jar:2.5.0-b32:compile \n[INFO] |  |  +- org.glassfish.jersey.core:jersey-common:jar:2.25.1:compile \n[INFO] |  |  |  +- javax.annotation:javax.annotation-api:jar:1.2:compile \n[INFO] |  |  |     +- org.glassfish.jersey.bundles.repackaged:jersey-guava:jar:2.25.1:compile \n[INFO] |  |  |  \\- org.glassfish.hk2:osgi-resource-locator:jar:1.0.1:compile \n[INFO] |  |     +- org.glassfish.jersey.core:jersey-server:jar:2.25.1:compile\n[INFO] |  |  |  +- org.glassfish.jersey.media:jersey-media-jaxb:jar:2.25.1:compile \n[INFO] |  |  |  \\- javax.validation:validation-api:jar:1.1.0.Final:compile \n[INFO] |  |  +- org.glassfish.jersey.containers:jersey-container-servlet:jar:2.25.1:compile \n[INFO] |  |  +- org.glassfish.jersey.containers:jersey-container-servlet-core:jar:2.25.1:compile \n[INFO] |  |  +- org.glassfish.jersey.inject:jersey-hk2:jar:2.30:compile \n[INFO] |  |  | \\- org.javassist:javassist:jar:3.21.0-GA:compile \n[INFO] |  |  +- io.netty:netty-all:jar:4.1.51.Final:compile \n[INFO] |  |  +- com.clearspring.analytics:stream:jar:2.9.6:compile \n[INFO] |  |  +- io.dropwizard.metrics:metrics-core:jar:3.1.5:compile \n[INFO] |  |  +- io.dropwizard.metrics:metrics-jvm:jar:3.1.5:compile \n[INFO] |  |  +- io.dropwizard.metrics:metrics-json:jar:3.1.5:compile \n[INFO] |  |  +- io.dropwizard.metrics:metrics-graphite:jar:3.1.5:compile \n[INFO] |  |     +- io.dropwizard.metrics:metrics-jmx:jar:4.1.1:compile \n[INFO] |  |  +- org.apache.ivy:ivy:jar:2.4.0:compile \n[INFO] |  |  +- oro:oro:jar:2.0.8:compile \n[INFO] |  |  +- net.razorvine:pyrolite:jar:4.30:compile \n[INFO] |  |  +- net.sf.py4j:py4j:jar:0.10.9:compile \n[INFO] |  |  \\- org.apache.commons:commons-crypto:jar:1.1.0:compile \n[INFO] |  +- org.apache.spark:spark-catalyst_2.12:jar:3.1.1:compile \n[INFO] |  |  +- org.scala-lang.modules:scala-parser-combinators_2.12:jar:1.1.2:compile [INFO] |  |  +- org.antlr:antlr4-runtime:jar:4.8-1:compile \n[INFO] |  |    +- commons-codec:commons-codec:jar:1.10:compile \n[INFO] |  |  +- org.apache.arrow:arrow-vector:jar:2.0.0:compile \n[INFO] |  |  |  +- org.apache.arrow:arrow-format:jar:2.0.0:compile \n[INFO] |  |  |  +- org.apache.arrow:arrow-memory-core:jar:2.0.0:compile \n[INFO] |  |  |  \\- com.google.flatbuffers:flatbuffers-java:jar:1.9.0:compile \n[INFO] |  |  \\- org.apache.arrow:arrow-memory-netty:jar:2.0.0:compile \n[INFO] |     +- org.apache.spark:spark-tags_2.12:jar:3.1.1:compile \n[INFO] |  +- org.apache.orc:orc-core:jar:1.5.12:compile \n[INFO] |  |  +- org.apache.orc:orc-shims:jar:1.5.12:compile \n[INFO] |  |  +- com.google.protobuf:protobuf-java:jar:2.5.0:compile \n[INFO] |  |  +- commons-lang:commons-lang:jar:2.6:compile \n[INFO] |  |  +- io.airlift:aircompressor:jar:0.10:compile \n[INFO] |  |  \\- org.threeten:threeten-extra:jar:1.5.0:compile \n[INFO] |  +- org.apache.orc:orc-mapreduce:jar:1.5.12:compile \n[INFO] |  +- org.apache.hive:hive-storage-api:jar:2.7.2:compile \n[INFO] |  +- org.apache.parquet:parquet-column:jar:1.10.1:compile \n[INFO] |  |  +- org.apache.parquet:parquet-common:jar:1.10.1:compile \n[INFO] |  |  \\- org.apache.parquet:parquet-encoding:jar:1.10.1:compile \n[INFO] |  +- org.apache.parquet:parquet-hadoop:jar:1.10.1:compile \n[INFO] |  |  +- org.apache.parquet:parquet-format:jar:2.4.0:compile \n[INFO] |  |  +- org.apache.parquet:parquet-jackson:jar:1.10.1:compile \n[INFO] |  |  +- org.codehaus.jackson:jackson-mapper-asl:jar:1.9.13:compile \n[INFO] |  | \\- org.codehaus.jackson:jackson-core-asl:jar:1.9.13:compile \n[INFO] |     +- org.apache.xbean:xbean-asm7-shaded:jar:4.15:compile \n[INFO] |  \\- org.spark-project.spark:unused:jar:1.0.0:compile \n[INFO] +- org.apache.spark:spark-sql-kafka-0-10_2.12:jar:3.1.1:compile \n[INFO] |     +- org.apache.spark:spark-token-provider-kafka-0-10_2.12:jar:3.1.1:compile \n[INFO] |  \\- org.apache.kafka:kafka-clients:jar:2.6.0:compile \n[INFO]    +- org.apache.spark:spark-streaming_2.12:jar:3.1.1:compile \n[INFO] |  \\- org.scala-lang:scala-library:jar:2.12.10:compile \n[INFO] +- com.opencsv:opencsv:jar:4.1:compile \n[INFO] |  +- org.apache.commons:commons-lang3:jar:3.5:compile \n[INFO] |  +- org.apache.commons:commons-text:jar:1.1:compile \n[INFO] |  \\- commons-beanutils:commons-beanutils:jar:1.9.3:compile \n[INFO] |     \\- commons-collections:commons-collections:jar:3.2.2:compile \n[INFO] +- com.fasterxml.jackson.dataformat:jackson-dataformat-yaml:jar:2.12.3:compile [INFO] |  +- org.yaml:snakeyaml:jar:1.17:compile \n[INFO] |  \\- com.fasterxml.jackson.core:jackson-core:jar:2.12.3:compile \n[INFO] +- com.fasterxml.jackson.module:jackson-module-scala_2.12:jar:2.12.3:runtime \n[INFO] |  +- com.fasterxml.jackson.core:jackson-annotations:jar:2.12.3:compile \n[INFO] |  \\- com.thoughtworks.paranamer:paranamer:jar:2.8:compile \n[INFO] +- com.fasterxml.jackson.core:jackson-databind:jar:2.12.3:compile \n[INFO]    +- org.codehaus.janino:janino:jar:3.0.8:compile \n[INFO] +- org.codehaus.janino:commons-compiler:jar:3.0.8:compile \n[INFO] \\- org.apache.commons:commons-pool2:jar:2.9.0:compile \n[INFO]    ------------------------------------------------------------------------ \n[INFO] BUILD SUCCESS \n[INFO]    ------------------------------------------------------------------------ \n[INFO] Total time:  7.334 s [INFO] Finished at: 2021-06-02T09:19:26+02:00 \n[INFO]    ------------------------------------------------------------------------\n</code></pre>\n<p>The error :</p>\n<pre><code>Error: Bad target:null\njava.lang.reflect.InvocationTargetException\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at fr.cnp.kfk.streams.Application.main(Application.java:14)\nCaused by: org.apache.spark.sql.streaming.StreamingQueryException: null\n\n[...]\n\n    at org.apache.spark.sql.execution.streaming.StreamExecution.org$apache$spark$sql$execution$streaming$StreamExecution$$runStream(StreamExecution.scala:354)\n    at org.apache.spark.sql.execution.streaming.StreamExecution$$anon$1.run(StreamExecution.scala:244)\nCaused by: java.lang.ExceptionInInitializerError\n    at org.apache.spark.sql.execution.SparkPlan.executeQuery(SparkPlan.scala:215)\n    at org.apache.spark.sql.execution.SparkPlan.execute(SparkPlan.scala:176)\n    at org.apache.spark.sql.execution.datasources.v2.V2TableWriteExec.writeWithV2(WriteToDataSourceV2Exec.scala:338)\n    at org.apache.spark.sql.execution.datasources.v2.V2TableWriteExec.writeWithV2$(WriteToDataSourceV2Exec.scala:336)\n    at org.apache.spark.sql.execution.datasources.v2.WriteToDataSourceV2Exec.writeWithV2(WriteToDataSourceV2Exec.scala:297)\n    at org.apache.spark.sql.execution.datasources.v2.WriteToDataSourceV2Exec.run(WriteToDataSourceV2Exec.scala:304)\n    at org.apache.spark.sql.execution.datasources.v2.V2CommandExec.result$lzycompute(V2CommandExec.scala:40)\n    at org.apache.spark.sql.execution.datasources.v2.V2CommandExec.result(V2CommandExec.scala:40)\n    at org.apache.spark.sql.execution.datasources.v2.V2CommandExec.executeCollect(V2CommandExec.scala:46)\n    at org.apache.spark.sql.Dataset.collectFromPlan(Dataset.scala:3696)\n    at org.apache.spark.sql.Dataset.$anonfun$collect$1(Dataset.scala:2965)\n    at org.apache.spark.sql.Dataset.$anonfun$withAction$1(Dataset.scala:3687)\n    at org.apache.spark.sql.execution.SQLExecution$.$anonfun$withNewExecutionId$5(SQLExecution.scala:103)\n    at org.apache.spark.sql.execution.SQLExecution$.withSQLConfPropagated(SQLExecution.scala:163)\n    at org.apache.spark.sql.execution.SQLExecution$.$anonfun$withNewExecutionId$1(SQLExecution.scala:90)\n    at org.apache.spark.sql.SparkSession.withActive(SparkSession.scala:772)\n    at org.apache.spark.sql.execution.SQLExecution$.withNewExecutionId(SQLExecution.scala:64)\n    at org.apache.spark.sql.Dataset.withAction(Dataset.scala:3685)\n    at org.apache.spark.sql.Dataset.collect(Dataset.scala:2965)\n    at org.apache.spark.sql.execution.streaming.MicroBatchExecution.$anonfun$runBatch$16(MicroBatchExecution.scala:589)\n    at org.apache.spark.sql.execution.SQLExecution$.$anonfun$withNewExecutionId$5(SQLExecution.scala:103)\n    at org.apache.spark.sql.execution.SQLExecution$.withSQLConfPropagated(SQLExecution.scala:163)\n    at org.apache.spark.sql.execution.SQLExecution$.$anonfun$withNewExecutionId$1(SQLExecution.scala:90)\n    at org.apache.spark.sql.SparkSession.withActive(SparkSession.scala:772)\n    at org.apache.spark.sql.execution.SQLExecution$.withNewExecutionId(SQLExecution.scala:64)\n    at org.apache.spark.sql.execution.streaming.MicroBatchExecution.$anonfun$runBatch$15(MicroBatchExecution.scala:584)\n    at org.apache.spark.sql.execution.streaming.ProgressReporter.reportTimeTaken(ProgressReporter.scala:357)\n    at org.apache.spark.sql.execution.streaming.ProgressReporter.reportTimeTaken$(ProgressReporter.scala:355)\n    at org.apache.spark.sql.execution.streaming.StreamExecution.reportTimeTaken(StreamExecution.scala:68)\n    at org.apache.spark.sql.execution.streaming.MicroBatchExecution.runBatch(MicroBatchExecution.scala:584)\n    at org.apache.spark.sql.execution.streaming.MicroBatchExecution.$anonfun$runActivatedStream$2(MicroBatchExecution.scala:226)\n    at scala.runtime.java8.JFunction0$mcV$sp.apply(JFunction0$mcV$sp.java:23)\n    at org.apache.spark.sql.execution.streaming.ProgressReporter.reportTimeTaken(ProgressReporter.scala:357)\n    at org.apache.spark.sql.execution.streaming.ProgressReporter.reportTimeTaken$(ProgressReporter.scala:355)\n    at org.apache.spark.sql.execution.streaming.StreamExecution.reportTimeTaken(StreamExecution.scala:68)\n    at org.apache.spark.sql.execution.streaming.MicroBatchExecution.$anonfun$runActivatedStream$1(MicroBatchExecution.scala:194)\n    at org.apache.spark.sql.execution.streaming.ProcessingTimeExecutor.execute(TriggerExecutor.scala:57)\n    at org.apache.spark.sql.execution.streaming.MicroBatchExecution.runActivatedStream(MicroBatchExecution.scala:188)\n    at org.apache.spark.sql.execution.streaming.StreamExecution.org$apache$spark$sql$execution$streaming$StreamExecution$$runStream(StreamExecution.scala:333)\n    ... 1 more\nCaused by: com.fasterxml.jackson.databind.JsonMappingException: Scala module 2.10.5 requires Jackson Databind version &gt;= 2.10.0 and &lt; 2.11.0\n    at com.fasterxml.jackson.module.scala.JacksonModule.setupModule(JacksonModule.scala:61)\n    at com.fasterxml.jackson.module.scala.JacksonModule.setupModule$(JacksonModule.scala:46)\n    at com.fasterxml.jackson.module.scala.DefaultScalaModule.setupModule(DefaultScalaModule.scala:17)\n    at com.fasterxml.jackson.databind.ObjectMapper.registerModule(ObjectMapper.java:747)\n    at org.apache.spark.rdd.RDDOperationScope$.&lt;init&gt;(RDDOperationScope.scala:82)\n    at org.apache.spark.rdd.RDDOperationScope$.&lt;clinit&gt;(RDDOperationScope.scala)\n    ... 40 more\n</code></pre>\n"}],"owner":{"account_id":21781141,"reputation":81,"user_id":16082828,"display_name":"Mathieu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18478,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"answer_count":2,"score":8,"last_activity_date":1695232895,"creation_date":1622446038,"question_id":67769492,"body_markdown":"For a project, I&#39;m using spark structured streaming with kafka.\r\n\r\nI have this conf :\r\n\r\n\t\t&lt;spark.version&gt;3.1.1&lt;/spark.version&gt;\r\n\t\t&lt;slf4j.version&gt;1.7.7&lt;/slf4j.version&gt;\r\n\t\t&lt;log4j.version&gt;1.2.17&lt;/log4j.version&gt;\r\n\t\t&lt;scala.version&gt;2.12&lt;/scala.version&gt;\r\n\r\nBut when I run, I have this error :\r\n\r\nCaused by: com.fasterxml.jackson.databind.JsonMappingException: Scala module 2.12.3 requires Jackson Databind version &gt;= 2.12.0 and &lt; 2.13.0\r\n\r\nI&#39;m confused because I alrady import databind in 2.12.3.\r\nJust here, an extract of my pom.xml :\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.fasterxml.jackson.dataformat&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jackson-dataformat-yaml&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.fasterxml.jackson.module&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jackson-module-scala_${scala.version}&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.12.3&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.12.3&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\nthank you in advance for helping","title":"Scala module 2.12.3 requires Jackson Databind version &gt;= 2.12.0 and &lt; 2.13.0 but I have databind 2.12.3","body":"<p>For a project, I'm using spark structured streaming with kafka.</p>\n<p>I have this conf :</p>\n<pre><code>    &lt;spark.version&gt;3.1.1&lt;/spark.version&gt;\n    &lt;slf4j.version&gt;1.7.7&lt;/slf4j.version&gt;\n    &lt;log4j.version&gt;1.2.17&lt;/log4j.version&gt;\n    &lt;scala.version&gt;2.12&lt;/scala.version&gt;\n</code></pre>\n<p>But when I run, I have this error :</p>\n<p>Caused by: com.fasterxml.jackson.databind.JsonMappingException: Scala module 2.12.3 requires Jackson Databind version &gt;= 2.12.0 and &lt; 2.13.0</p>\n<p>I'm confused because I alrady import databind in 2.12.3.\nJust here, an extract of my pom.xml :</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;com.fasterxml.jackson.dataformat&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-dataformat-yaml&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.fasterxml.jackson.module&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-module-scala_${scala.version}&lt;/artifactId&gt;\n        &lt;version&gt;2.12.3&lt;/version&gt;\n        &lt;scope&gt;runtime&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n        &lt;version&gt;2.12.3&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>thank you in advance for helping</p>\n"},{"tags":["java","android","hashmap","linkedhashmap"],"comments":[{"owner":{"account_id":12975459,"reputation":1665,"user_id":9379617,"display_name":"Ben"},"score":1,"creation_date":1531134950,"post_id":51244219,"comment_id":89466900,"body_markdown":"Do you actually need the reversed `LinkedHashMap`? Wouldn&#39;t it be simpler to just iterate over it in reverse order where needed?","body":"Do you actually need the reversed <code>LinkedHashMap</code>? Wouldn&#39;t it be simpler to just iterate over it in reverse order where needed?"},{"owner":{"account_id":1710326,"reputation":10640,"user_id":1568530,"accept_rate":60,"display_name":"Vladyslav Matviienko"},"score":2,"creation_date":1531135171,"post_id":51244219,"comment_id":89467021,"body_markdown":"Any map is non-ordered structure. You can&#39;t expect **any** order from the map. It&#39;s only purpose is to store key-value pairs. The order of keys in a set can easily change in runtime, and you should never expect any order from the map","body":"Any map is non-ordered structure. You can&#39;t expect <b>any</b> order from the map. It&#39;s only purpose is to store key-value pairs. The order of keys in a set can easily change in runtime, and you should never expect any order from the map"},{"owner":{"account_id":12975459,"reputation":1665,"user_id":9379617,"display_name":"Ben"},"score":2,"creation_date":1531135251,"post_id":51244219,"comment_id":89467071,"body_markdown":"@VladyslavMatviienko well that&#39;s exactly why you use a `LinkedHashMap` which has a predictable iteration order...","body":"@VladyslavMatviienko well that&#39;s exactly why you use a <code>LinkedHashMap</code> which has a predictable iteration order..."},{"owner":{"account_id":6959911,"reputation":108,"user_id":7447629,"display_name":"Tiago Vitorino"},"score":0,"creation_date":1531135563,"post_id":51244219,"comment_id":89467260,"body_markdown":"@VladyslavMatviienko That&#39;s why I used a LinkedHasMap as Ben explained it","body":"@VladyslavMatviienko That&#39;s why I used a LinkedHasMap as Ben explained it"}],"answers":[{"comments":[{"owner":{"account_id":9725613,"reputation":53332,"user_id":7212686,"accept_rate":100,"display_name":"azro"},"score":1,"creation_date":1531135584,"post_id":51244421,"comment_id":89467275,"body_markdown":"Why not store in `String[]` it would avoid the bad `toString()`","body":"Why not store in <code>String[]</code> it would avoid the bad <code>toString()</code>"},{"owner":{"account_id":12975459,"reputation":1665,"user_id":9379617,"display_name":"Ben"},"score":0,"creation_date":1531135676,"post_id":51244421,"comment_id":89467344,"body_markdown":"Also using `get(i)` on any `Linked` map or list is generally something you want to avoid... This could be massively improved in many ways. You could use an iterator for starters","body":"Also using <code>get(i)</code> on any <code>Linked</code> map or list is generally something you want to avoid... This could be massively improved in many ways. You could use an iterator for starters"},{"owner":{"account_id":9725613,"reputation":53332,"user_id":7212686,"accept_rate":100,"display_name":"azro"},"score":0,"creation_date":1531135766,"post_id":51244421,"comment_id":89467398,"body_markdown":"You can simply do `System.out.println(reversed)` and paste the result instead of a picture, if would be better","body":"You can simply do <code>System.out.println(reversed)</code> and paste the result instead of a picture, if would be better"},{"owner":{"account_id":9725613,"reputation":53332,"user_id":7212686,"accept_rate":100,"display_name":"azro"},"score":0,"creation_date":1531135835,"post_id":51244421,"comment_id":89467438,"body_markdown":"We are not downvoting, others do, please take in consideration our comment to improve your post (and your lvl)","body":"We are not downvoting, others do, please take in consideration our comment to improve your post (and your lvl)"},{"owner":{"account_id":12975459,"reputation":1665,"user_id":9379617,"display_name":"Ben"},"score":0,"creation_date":1531135876,"post_id":51244421,"comment_id":89467465,"body_markdown":"It&#39;s a quite terribly inefficient solution, which is probably why it&#39;s receiving downvotes.","body":"It&#39;s a quite terribly inefficient solution, which is probably why it&#39;s receiving downvotes."},{"owner":{"account_id":9725613,"reputation":53332,"user_id":7212686,"accept_rate":100,"display_name":"azro"},"score":0,"creation_date":1531136034,"post_id":51244421,"comment_id":89467577,"body_markdown":"Seriously ? Did you not read the first part of my comment : &#39;I did not downvote&#39; so please be kind, we give improvements","body":"Seriously ? Did you not read the first part of my comment : &#39;I did not downvote&#39; so please be kind, we give improvements"}],"tags":[],"owner":{"account_id":3801583,"reputation":523,"user_id":3155082,"display_name":"Jawad Zeb"},"comment_count":6,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1531136575,"creation_date":1531135521,"answer_id":51244421,"question_id":51244219,"body_markdown":"Here Is My Own Written Logic for you. without using any built in functions to reverse:\r\n\r\n\r\n \r\n\r\n  \r\n\r\n     LinkedHashMap&lt;String, String&gt; map = new LinkedHashMap&lt;&gt;();\r\n        map.put(&quot;10/10/2010 10:10:10&quot;, &quot;SomeText1&quot;);\r\n        map.put(&quot;10/10/2019 10:10:19&quot;, &quot;SomeText2&quot;);\r\n        map.put(&quot;10/10/2020 10:10:20&quot;, &quot;SomeText3&quot;);\r\n        map.put(&quot;10/10/2021 10:10:21&quot;, &quot;SomeText4&quot;);\r\n    \r\n        LinkedHashMap&lt;String, String&gt; reversed = new LinkedHashMap&lt;&gt;();\r\n    \r\n        String[] keys = map.keySet().toArray(new String[map.size()]);\r\n    \r\n        for (int i = keys.length - 1; i &gt;= 0; i--) {\r\n            reversed.put(keys[i], map.get(keys[i]));\r\n        }\r\n\r\n\r\n","title":"Reverse order of LinkedHashMap to LinkedHashMap or ArrayList","body":"<p>Here Is My Own Written Logic for you. without using any built in functions to reverse:</p>\n\n<pre><code> LinkedHashMap&lt;String, String&gt; map = new LinkedHashMap&lt;&gt;();\n    map.put(\"10/10/2010 10:10:10\", \"SomeText1\");\n    map.put(\"10/10/2019 10:10:19\", \"SomeText2\");\n    map.put(\"10/10/2020 10:10:20\", \"SomeText3\");\n    map.put(\"10/10/2021 10:10:21\", \"SomeText4\");\n\n    LinkedHashMap&lt;String, String&gt; reversed = new LinkedHashMap&lt;&gt;();\n\n    String[] keys = map.keySet().toArray(new String[map.size()]);\n\n    for (int i = keys.length - 1; i &gt;= 0; i--) {\n        reversed.put(keys[i], map.get(keys[i]));\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1531136094,"creation_date":1531135926,"answer_id":51244564,"question_id":51244219,"body_markdown":"A LinkedHashMap orders by insertion; it would be more logical to sort on the associated date time:\r\n\r\n    private SortedMap&lt;LocalDateTime, String&gt; map = new TreeMap&lt;&gt;(Comparator.naturalOrder()\r\n                                                                           .reversed());\r\n\r\n    LocalDateTimeFormatter formatter = LocalDateTimeFormatter.ofPattern(&quot;MM/dd/uuuu HH:mm:ss&quot;);\r\n    map.put(LocalDateTime.parse(&quot;10/10/2010 10:10:10&quot;, formatter), &quot;...&quot;);\r\n\r\nTo specify that the map is sorted, there is the interface SortedMap. Better use an interface, which is more versatile. The implementation class for a sorted map is the TreeMap. However you want a reversed comparison.\r\n\r\nYou could use a Local specific pattern. Mind that above I chose Month/Day and not the British Day/Month.","title":"Reverse order of LinkedHashMap to LinkedHashMap or ArrayList","body":"<p>A LinkedHashMap orders by insertion; it would be more logical to sort on the associated date time:</p>\n\n<pre><code>private SortedMap&lt;LocalDateTime, String&gt; map = new TreeMap&lt;&gt;(Comparator.naturalOrder()\n                                                                       .reversed());\n\nLocalDateTimeFormatter formatter = LocalDateTimeFormatter.ofPattern(\"MM/dd/uuuu HH:mm:ss\");\nmap.put(LocalDateTime.parse(\"10/10/2010 10:10:10\", formatter), \"...\");\n</code></pre>\n\n<p>To specify that the map is sorted, there is the interface SortedMap. Better use an interface, which is more versatile. The implementation class for a sorted map is the TreeMap. However you want a reversed comparison.</p>\n\n<p>You could use a Local specific pattern. Mind that above I chose Month/Day and not the British Day/Month.</p>\n"},{"tags":[],"owner":{"account_id":12975459,"reputation":1665,"user_id":9379617,"display_name":"Ben"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1531137057,"creation_date":1531136677,"answer_id":51244812,"question_id":51244219,"body_markdown":"If you want to keep using a `LinkedHashMap` reversing it while keeping it somewhat efficient is not as easy. This is a solution that reverses a given `LinkedHashMap` using the iterator order (which is predictable for a `LinkedHashMap` and therefore probably what you are looking for).\r\n\r\nNote that other solutions like using a `SortedMap` or a `TreeMap` are probably still better. Yet, for the sake of sticking to your original question, here is a solution:\r\n\r\n\tpublic static &lt;K, V&gt; LinkedHashMap&lt;K, V&gt; reverse(LinkedHashMap&lt;K, V&gt; map)\r\n\t{\r\n\t\tLinkedHashMap&lt;K, V&gt; reversedMap = new LinkedHashMap&lt;K, V&gt;();\r\n\t\t\r\n\t\tListIterator&lt;Entry&lt;K, V&gt;&gt; it = new ArrayList&lt;&gt;(map.entrySet()).listIterator(map.entrySet().size());\r\n\t\t\r\n\t\twhile (it.hasPrevious())\r\n\t\t{\r\n\t\t\tEntry&lt;K, V&gt; el = it.previous();\r\n\t\t\treversedMap.put(el.getKey(), el.getValue());\r\n\t\t}\r\n\t\t\r\n\t\treturn reversedMap;\r\n\t}\r\n\r\nNote that you won&#39;t get around wrapping the entry set into an `ArrayList` sadly as only that provides you with an `ListIterator` which can be initialized to any point other than the first element. Having something like a `reverseIterator()` method would simplify life a lot - sadly there is none available.\r\n\r\nComplexity wise you iterate the list twice with this approach, first for the `listIterator` call from start to the last element and then once more from the back to the front when using `previous`. So you are looking at **O(2n)** here.","title":"Reverse order of LinkedHashMap to LinkedHashMap or ArrayList","body":"<p>If you want to keep using a <code>LinkedHashMap</code> reversing it while keeping it somewhat efficient is not as easy. This is a solution that reverses a given <code>LinkedHashMap</code> using the iterator order (which is predictable for a <code>LinkedHashMap</code> and therefore probably what you are looking for).</p>\n\n<p>Note that other solutions like using a <code>SortedMap</code> or a <code>TreeMap</code> are probably still better. Yet, for the sake of sticking to your original question, here is a solution:</p>\n\n<pre><code>public static &lt;K, V&gt; LinkedHashMap&lt;K, V&gt; reverse(LinkedHashMap&lt;K, V&gt; map)\n{\n    LinkedHashMap&lt;K, V&gt; reversedMap = new LinkedHashMap&lt;K, V&gt;();\n\n    ListIterator&lt;Entry&lt;K, V&gt;&gt; it = new ArrayList&lt;&gt;(map.entrySet()).listIterator(map.entrySet().size());\n\n    while (it.hasPrevious())\n    {\n        Entry&lt;K, V&gt; el = it.previous();\n        reversedMap.put(el.getKey(), el.getValue());\n    }\n\n    return reversedMap;\n}\n</code></pre>\n\n<p>Note that you won't get around wrapping the entry set into an <code>ArrayList</code> sadly as only that provides you with an <code>ListIterator</code> which can be initialized to any point other than the first element. Having something like a <code>reverseIterator()</code> method would simplify life a lot - sadly there is none available.</p>\n\n<p>Complexity wise you iterate the list twice with this approach, first for the <code>listIterator</code> call from start to the last element and then once more from the back to the front when using <code>previous</code>. So you are looking at <strong>O(2n)</strong> here.</p>\n"},{"tags":[],"owner":{"account_id":13704384,"reputation":401,"user_id":9888491,"display_name":"vb.stack"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1531140745,"creation_date":1531140745,"answer_id":51246073,"question_id":51244219,"body_markdown":"If your motive is just to reverse the map ( show in descending order ) you can use \r\n**Java.util.TreeMap.descendingMap() :**  It returns a reverse order view of the mappings contained in the map`\r\n\r\n    LinkedHashMap&lt;String,String&gt; map = .... //this is your intial hashmap\r\n    TreeMap&lt;String,String&gt; tmap = new TreeMap&lt;&gt;(map);\r\n    map.clear();\r\n    map.putAll(tmap.descendingMap());\r\n\r\n*This will do the trick.*\r\n\r\n\r\n","title":"Reverse order of LinkedHashMap to LinkedHashMap or ArrayList","body":"<p>If your motive is just to reverse the map ( show in descending order ) you can use \n<strong>Java.util.TreeMap.descendingMap() :</strong>  It returns a reverse order view of the mappings contained in the map`</p>\n\n<pre><code>LinkedHashMap&lt;String,String&gt; map = .... //this is your intial hashmap\nTreeMap&lt;String,String&gt; tmap = new TreeMap&lt;&gt;(map);\nmap.clear();\nmap.putAll(tmap.descendingMap());\n</code></pre>\n\n<p><em>This will do the trick.</em></p>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695232893,"creation_date":1683001785,"answer_id":76151732,"question_id":51244219,"body_markdown":"As of Java 21, the [`reversed()`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/LinkedHashMap.html#reversed()) method on `LinkedHashMap` can be used to a reversed view of the map.\r\n\r\n```lang-java\r\nLinkedHashMap&lt;String, String&gt; map = ...;\r\nLinkedHashMap&lt;String, String&gt; reversed = map.reversed();\r\n```\r\n\r\nThis reversed view will be a `SequencedMap`.  While it won&#39;t be a `LinkedHashMap`, it shares most characteristics with it (e.g. it is mutable, ordered, allows null).\r\n\r\nIf an `ArrayList` or `LinkedHashMap` are specifically needed, this reversed map can be converted to them in one of the many standard manners of converting a `Map` to one of those types.","title":"Reverse order of LinkedHashMap to LinkedHashMap or ArrayList","body":"<p>As of Java 21, the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/LinkedHashMap.html#reversed()\" rel=\"nofollow noreferrer\"><code>reversed()</code></a> method on <code>LinkedHashMap</code> can be used to a reversed view of the map.</p>\n<pre class=\"lang-java prettyprint-override\"><code>LinkedHashMap&lt;String, String&gt; map = ...;\nLinkedHashMap&lt;String, String&gt; reversed = map.reversed();\n</code></pre>\n<p>This reversed view will be a <code>SequencedMap</code>.  While it won't be a <code>LinkedHashMap</code>, it shares most characteristics with it (e.g. it is mutable, ordered, allows null).</p>\n<p>If an <code>ArrayList</code> or <code>LinkedHashMap</code> are specifically needed, this reversed map can be converted to them in one of the many standard manners of converting a <code>Map</code> to one of those types.</p>\n"}],"owner":{"account_id":6959911,"reputation":108,"user_id":7447629,"display_name":"Tiago Vitorino"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4111,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":51244564,"answer_count":5,"score":2,"last_activity_date":1695232893,"creation_date":1531134845,"question_id":51244219,"body_markdown":"I have a `LinkedHashMap&lt;String,String&gt;` which looks something like this (don&#39;t really know how to illustrate a HashMap):\r\n\r\n    {\r\n      &quot;10/10/2010 10:10:10&quot; =&gt; &quot;SomeText1&quot;,\r\n      &quot;10/10/2019 10:10:19&quot; =&gt; &quot;SomeText2&quot;,\r\n      &quot;10/10/2020 10:10:20&quot; =&gt; &quot;SomeText3&quot;,\r\n      &quot;10/10/2021 10:10:21&quot; =&gt; &quot;SomeText4&quot;\r\n    }\r\n\r\nAnd I want to put it like this:\r\n\r\n    {\r\n      &quot;10/10/2021 10:10:21&quot; =&gt; &quot;SomeText4&quot;,\r\n      &quot;10/10/2020 10:10:20&quot; =&gt; &quot;SomeText3&quot;,\r\n      &quot;10/10/2019 10:10:19&quot; =&gt; &quot;SomeText2&quot;,\r\n      &quot;10/10/2010 10:10:10&quot; =&gt; &quot;SomeText1&quot;\r\n    }\r\nI have written this solution which works because the result I want is an ArrayList, but i was thinking if there was an easier way to reverse the LinkedHashMap maintaining the same type using a tool like **sort** for example.\r\n\r\n    private LinkedHashMap&lt;String, String&gt; map = new LinkedHashMap&lt;&gt;();\r\n    int sizeOfHashMap = map.size();\r\n    ArrayList reversedHashToArrayList = new ArrayList(map.size());\r\n       for (Map.Entry&lt;String,String&gt; entry : map.entrySet()) {\r\n       String key = entry.getKey();\r\n       String value = entry.getValue();\r\n    \r\n       reversedHashToArrayList.add(0,entry);\r\n    }\r\n\r\n","title":"Reverse order of LinkedHashMap to LinkedHashMap or ArrayList","body":"<p>I have a <code>LinkedHashMap&lt;String,String&gt;</code> which looks something like this (don't really know how to illustrate a HashMap):</p>\n\n<pre><code>{\n  \"10/10/2010 10:10:10\" =&gt; \"SomeText1\",\n  \"10/10/2019 10:10:19\" =&gt; \"SomeText2\",\n  \"10/10/2020 10:10:20\" =&gt; \"SomeText3\",\n  \"10/10/2021 10:10:21\" =&gt; \"SomeText4\"\n}\n</code></pre>\n\n<p>And I want to put it like this:</p>\n\n<pre><code>{\n  \"10/10/2021 10:10:21\" =&gt; \"SomeText4\",\n  \"10/10/2020 10:10:20\" =&gt; \"SomeText3\",\n  \"10/10/2019 10:10:19\" =&gt; \"SomeText2\",\n  \"10/10/2010 10:10:10\" =&gt; \"SomeText1\"\n}\n</code></pre>\n\n<p>I have written this solution which works because the result I want is an ArrayList, but i was thinking if there was an easier way to reverse the LinkedHashMap maintaining the same type using a tool like <strong>sort</strong> for example.</p>\n\n<pre><code>private LinkedHashMap&lt;String, String&gt; map = new LinkedHashMap&lt;&gt;();\nint sizeOfHashMap = map.size();\nArrayList reversedHashToArrayList = new ArrayList(map.size());\n   for (Map.Entry&lt;String,String&gt; entry : map.entrySet()) {\n   String key = entry.getKey();\n   String value = entry.getValue();\n\n   reversedHashToArrayList.add(0,entry);\n}\n</code></pre>\n"},{"tags":["java","hazelcast","payara"],"answers":[{"comments":[{"owner":{"account_id":29494088,"reputation":1,"user_id":22602542,"display_name":"raman77"},"score":0,"creation_date":1695233437,"post_id":77144960,"comment_id":135998535,"body_markdown":"Maybe we can share some ideas or experiences about this problem?","body":"Maybe we can share some ideas or experiences about this problem?"},{"owner":{"account_id":447540,"reputation":445,"user_id":841210,"accept_rate":33,"display_name":"drame"},"score":1,"creation_date":1695293922,"post_id":77144960,"comment_id":136006657,"body_markdown":"My very anoying and unsatisfying work around is to move every operation that interacts with the hazelcast map to a seperate thread which is not managed by the container, either by starting the Thread manually with new Thread(()-&gt; hazelcastMap.put()).start(); or by using a non managed Executor from Executos.newCachedThreadPool();","body":"My very anoying and unsatisfying work around is to move every operation that interacts with the hazelcast map to a seperate thread which is not managed by the container, either by starting the Thread manually with new Thread(()-&gt; hazelcastMap.put()).start(); or by using a non managed Executor from Executos.newCachedThreadPool();"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1695607547,"post_id":77144960,"comment_id":136042428,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/77144960/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":29494088,"reputation":1,"user_id":22602542,"display_name":"raman77"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695232874,"creation_date":1695232874,"answer_id":77144960,"question_id":76927067,"body_markdown":"The same here with Payara 5.2022.5. JCache fails nearly all the time when requesting (more precisely, when performing then get opration of hazelcast). As of my research it, it was introduced into Payara when they switched to Hazelcast 4.2.* implementation after Payara 5.2021.2.","title":"Hazelcast and Payara 5 - Tries to close entityManager if hazelcast is used in a transactional context","body":"<p>The same here with Payara 5.2022.5. JCache fails nearly all the time when requesting (more precisely, when performing then get opration of hazelcast). As of my research it, it was introduced into Payara when they switched to Hazelcast 4.2.* implementation after Payara 5.2021.2.</p>\n"}],"owner":{"account_id":447540,"reputation":445,"user_id":841210,"accept_rate":33,"display_name":"drame"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1695232874,"creation_date":1692341849,"question_id":76927067,"body_markdown":"we are currently trying to use Hazelcast in our Jakarta EE 8 Application running on Payara 5.2022.x.\r\nWe have huge problems when trying to access IMap instances when using hazelcast in any method that is even remotely in a transactional context. \r\nThe problem seems to be that the Payara Tenant that is user in combination with Hazelcast tries to tear down everything after each and every access to the Hazelcast Map. \r\nThis fails nearly 100% of the time resulting in this Stack:\r\n\r\n ```\r\n  [2023-08-18T08:42:24.310+0200] [Payara 5.2022.2] [SCHWERWIEGEND] [] [com.hazelcast.spi.impl.operationexecutor.impl.OperationExecutorImpl] [tid: _ThreadID=72 _ThreadName=hz.priceless_meitner.partition-operation.thread-9] [timeMillis: 1692340944310] [levelValue: 1000] [[\r\n  [192.168.100.70]:4900 [development] [4.2] Failed to process: com.hazelcast.map.impl.operation.PutOperation{serviceName=&#39;hz:impl:mapService&#39;, identityHash=353117872, partitionId=105, replicaIndex=0, callId=-1914, invocationTime=1692340944309 (2023-08-18 08:42:24.309), waitTimeout=-1, callTimeout=60000, tenantControl=fish.payara.nucleus.hazelcast.PayaraHazelcastTenant@30695580, name=statefulRoomSOSChangeListenerMap} on: hz.priceless_meitner.partition-operation.thread-9\r\njava.lang.IllegalStateException: Attempting to execute an operation on a closed EntityManager.\r\n\tat org.eclipse.persistence.internal.jpa.EntityManagerImpl.verifyOpen(EntityManagerImpl.java:2067)\r\n\tat org.eclipse.persistence.internal.jpa.EntityManagerImpl.close(EntityManagerImpl.java:1908)\r\n\tat com.sun.enterprise.container.common.impl.EntityManagerWrapper$NonTxEMCleaner.beforePostInvoke(EntityManagerWrapper.java:1241)\r\n\tat org.glassfish.api.invocation.InvocationManagerImpl$ListComponentInvocationHandler.lambda$beforePostInvoke$2(InvocationManagerImpl.java:430)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n\tat org.glassfish.api.invocation.InvocationManagerImpl$ListComponentInvocationHandler.beforePostInvoke(InvocationManagerImpl.java:430)\r\n\tat org.glassfish.api.invocation.InvocationManagerImpl.postInvoke(InvocationManagerImpl.java:198)\r\n\tat fish.payara.appserver.context.ContextImpl$Context.close(ContextImpl.java:61)\r\n\tat fish.payara.appserver.context.ContextImpl$RequestContext.close(ContextImpl.java:126)\r\n\tat com.hazelcast.spi.impl.operationservice.Operation.popThreadContext(Operation.java:822)\r\n\tat com.hazelcast.spi.impl.operationservice.impl.OperationRunnerImpl.run(OperationRunnerImpl.java:258)\r\n\tat com.hazelcast.spi.impl.operationservice.impl.OperationRunnerImpl.run(OperationRunnerImpl.java:213)\r\n\tat com.hazelcast.spi.impl.operationexecutor.impl.OperationThread.process(OperationThread.java:175)\r\n\tat com.hazelcast.spi.impl.operationexecutor.impl.OperationThread.process(OperationThread.java:139)\r\n\tat com.hazelcast.spi.impl.operationexecutor.impl.OperationThread.executeRun(OperationThread.java:123)\r\n\tat com.hazelcast.internal.util.executor.HazelcastManagedThread.run(HazelcastManagedThread.java:102)\r\n]]\r\n```\r\n\r\nIn many instances I was able to mitigate the problem by switching from \r\n`javax.enterprise.concurrent.ManagedScheduledExecutorService` to using regular `Executors.newSingleThreadScheduledExecutor()`.\r\nSometimes I was able to annotate the enclosing method with `@Transactional(TxType.NOT_SUPPORTED)`. \r\n\r\nBut this can&#39;t be the correct way. There must be a way to use Hazelcast in Payara without avoiding every bit of transactional container magic.\r\n\r\nEvery bit of help would be appreciated.\r\n\r\n","title":"Hazelcast and Payara 5 - Tries to close entityManager if hazelcast is used in a transactional context","body":"<p>we are currently trying to use Hazelcast in our Jakarta EE 8 Application running on Payara 5.2022.x.\nWe have huge problems when trying to access IMap instances when using hazelcast in any method that is even remotely in a transactional context.\nThe problem seems to be that the Payara Tenant that is user in combination with Hazelcast tries to tear down everything after each and every access to the Hazelcast Map.\nThis fails nearly 100% of the time resulting in this Stack:</p>\n<pre><code> [2023-08-18T08:42:24.310+0200] [Payara 5.2022.2] [SCHWERWIEGEND] [] [com.hazelcast.spi.impl.operationexecutor.impl.OperationExecutorImpl] [tid: _ThreadID=72 _ThreadName=hz.priceless_meitner.partition-operation.thread-9] [timeMillis: 1692340944310] [levelValue: 1000] [[\n [192.168.100.70]:4900 [development] [4.2] Failed to process: com.hazelcast.map.impl.operation.PutOperation{serviceName='hz:impl:mapService', identityHash=353117872, partitionId=105, replicaIndex=0, callId=-1914, invocationTime=1692340944309 (2023-08-18 08:42:24.309), waitTimeout=-1, callTimeout=60000, tenantControl=fish.payara.nucleus.hazelcast.PayaraHazelcastTenant@30695580, name=statefulRoomSOSChangeListenerMap} on: hz.priceless_meitner.partition-operation.thread-9\njava.lang.IllegalStateException: Attempting to execute an operation on a closed EntityManager.\n   at org.eclipse.persistence.internal.jpa.EntityManagerImpl.verifyOpen(EntityManagerImpl.java:2067)\n   at org.eclipse.persistence.internal.jpa.EntityManagerImpl.close(EntityManagerImpl.java:1908)\n   at com.sun.enterprise.container.common.impl.EntityManagerWrapper$NonTxEMCleaner.beforePostInvoke(EntityManagerWrapper.java:1241)\n   at org.glassfish.api.invocation.InvocationManagerImpl$ListComponentInvocationHandler.lambda$beforePostInvoke$2(InvocationManagerImpl.java:430)\n   at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\n   at org.glassfish.api.invocation.InvocationManagerImpl$ListComponentInvocationHandler.beforePostInvoke(InvocationManagerImpl.java:430)\n   at org.glassfish.api.invocation.InvocationManagerImpl.postInvoke(InvocationManagerImpl.java:198)\n   at fish.payara.appserver.context.ContextImpl$Context.close(ContextImpl.java:61)\n   at fish.payara.appserver.context.ContextImpl$RequestContext.close(ContextImpl.java:126)\n   at com.hazelcast.spi.impl.operationservice.Operation.popThreadContext(Operation.java:822)\n   at com.hazelcast.spi.impl.operationservice.impl.OperationRunnerImpl.run(OperationRunnerImpl.java:258)\n   at com.hazelcast.spi.impl.operationservice.impl.OperationRunnerImpl.run(OperationRunnerImpl.java:213)\n   at com.hazelcast.spi.impl.operationexecutor.impl.OperationThread.process(OperationThread.java:175)\n   at com.hazelcast.spi.impl.operationexecutor.impl.OperationThread.process(OperationThread.java:139)\n   at com.hazelcast.spi.impl.operationexecutor.impl.OperationThread.executeRun(OperationThread.java:123)\n   at com.hazelcast.internal.util.executor.HazelcastManagedThread.run(HazelcastManagedThread.java:102)\n]]\n</code></pre>\n<p>In many instances I was able to mitigate the problem by switching from\n<code>javax.enterprise.concurrent.ManagedScheduledExecutorService</code> to using regular <code>Executors.newSingleThreadScheduledExecutor()</code>.\nSometimes I was able to annotate the enclosing method with <code>@Transactional(TxType.NOT_SUPPORTED)</code>.</p>\n<p>But this can't be the correct way. There must be a way to use Hazelcast in Payara without avoiding every bit of transactional container magic.</p>\n<p>Every bit of help would be appreciated.</p>\n"},{"tags":["java","android","android-edittext"],"answers":[{"tags":[],"owner":{"account_id":91056,"reputation":124874,"user_id":250260,"accept_rate":80,"display_name":"Jorgesys"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1695232807,"creation_date":1695232807,"answer_id":77144949,"question_id":76495996,"body_markdown":"The problem indicates that there is no text to play when the user uses the wizard, you need to add a description of the content so that the user can learn information about the view.\r\n\r\nIn addition to adding\r\n\r\n    android:hint=&quot;@string/password&quot;\r\n\r\nAlso add your &quot;Content description&quot;:\r\n\r\n    android:contentDescription=&quot;@string/view_description&quot;","title":"Error &quot;No speakable text present&quot; although having android:hint","body":"<p>The problem indicates that there is no text to play when the user uses the wizard, you need to add a description of the content so that the user can learn information about the view.</p>\n<p>In addition to adding</p>\n<pre><code>android:hint=&quot;@string/password&quot;\n</code></pre>\n<p>Also add your &quot;Content description&quot;:</p>\n<pre><code>android:contentDescription=&quot;@string/view_description&quot;\n</code></pre>\n"}],"owner":{"account_id":22788336,"reputation":65,"user_id":16943070,"display_name":"HaNgocHieu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1273,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1695232807,"creation_date":1687001648,"question_id":76495996,"body_markdown":"Even though I already have the android:hint field but still got the error message &quot;No speakable text present. This item may not have a label readable by screen readers.&quot;\r\n\r\n[![enter image description here](https://i.stack.imgur.com/3li8J.png)](https://i.stack.imgur.com/3li8J.png)\r\n[![enter image description here](https://i.stack.imgur.com/tOqst.png)](https://i.stack.imgur.com/tOqst.png)\r\n\r\nI want to a few solutions for this problem. Thank you.","title":"Error &quot;No speakable text present&quot; although having android:hint","body":"<p>Even though I already have the android:hint field but still got the error message &quot;No speakable text present. This item may not have a label readable by screen readers.&quot;</p>\n<p><a href=\"https://i.stack.imgur.com/3li8J.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3li8J.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.stack.imgur.com/tOqst.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tOqst.png\" alt=\"enter image description here\" /></a></p>\n<p>I want to a few solutions for this problem. Thank you.</p>\n"},{"tags":["java","groovy","jvm"],"answers":[{"comments":[{"owner":{"account_id":1333316,"reputation":26958,"user_id":1276664,"accept_rate":17,"display_name":"daggett"},"score":0,"creation_date":1695130395,"post_id":77134133,"comment_id":135980731,"body_markdown":"actually you can use groovy to run compiled script: `groovy -cp . Hello`","body":"actually you can use groovy to run compiled script: <code>groovy -cp . Hello</code>"},{"owner":{"account_id":3837378,"reputation":35488,"user_id":3181392,"display_name":"cfrick"},"score":1,"creation_date":1695130644,"post_id":77134133,"comment_id":135980782,"body_markdown":"@daggett No you can&#39;t (I made the same error in my deleted answer): you still have the `Hello.groovy` file in that directory this get&#39;s used.  It&#39;s the same problem with `groovy Hello`","body":"@daggett No you can&#39;t (I made the same error in my deleted answer): you still have the <code>Hello.groovy</code> file in that directory this get&#39;s used.  It&#39;s the same problem with <code>groovy Hello</code>"},{"owner":{"account_id":1333316,"reputation":26958,"user_id":1276664,"accept_rate":17,"display_name":"daggett"},"score":1,"creation_date":1695130718,"post_id":77134133,"comment_id":135980808,"body_markdown":"my bad. you are right )","body":"my bad. you are right )"}],"tags":[],"owner":{"account_id":4358,"reputation":168420,"user_id":6509,"display_name":"tim_yates"},"comment_count":3,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1695122771,"creation_date":1695122771,"answer_id":77134133,"question_id":77133499,"body_markdown":"The `groovy` cli app runs groovy scripts\r\n\r\nThe `groovyc` cli app compiles groovy scripts to JVM bytecode\r\n\r\nYou can&#39;t run JVM bytecode directly with the `groovy` cli app.\r\n\r\nTo run it, use the `java` command:\r\n\r\n```\r\njava -cp ~/path/to/groovy/lib/groovy-4.0.11.jar:. Hello\r\n```","title":"Groovy Class Files not working with `groovy` command","body":"<p>The <code>groovy</code> cli app runs groovy scripts</p>\n<p>The <code>groovyc</code> cli app compiles groovy scripts to JVM bytecode</p>\n<p>You can't run JVM bytecode directly with the <code>groovy</code> cli app.</p>\n<p>To run it, use the <code>java</code> command:</p>\n<pre><code>java -cp ~/path/to/groovy/lib/groovy-4.0.11.jar:. Hello\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3837378,"reputation":35488,"user_id":3181392,"display_name":"cfrick"},"score":1,"creation_date":1695241677,"post_id":77144945,"comment_id":135999918,"body_markdown":"Because you still have the `.groovy` file around. What is the point of `groovyc` before then? And what has &quot;creating jar files&quot; to with that?","body":"Because you still have the <code>.groovy</code> file around. What is the point of <code>groovyc</code> before then? And what has &quot;creating jar files&quot; to with that?"}],"tags":[],"owner":{"account_id":15474021,"reputation":1,"user_id":11194469,"display_name":"Luke McCartney"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695232759,"creation_date":1695232759,"answer_id":77144945,"question_id":77133499,"body_markdown":"[dagget&#39;s][1] response the answer above works flawlessly and is exactly what I was looking for. As far as I am aware, `groovy` does not create jar files.  \r\n\r\n  [1]: https://stackoverflow.com/users/1276664/daggett","title":"Groovy Class Files not working with `groovy` command","body":"<p><a href=\"https://stackoverflow.com/users/1276664/daggett\">dagget's</a> response the answer above works flawlessly and is exactly what I was looking for. As far as I am aware, <code>groovy</code> does not create jar files.</p>\n"}],"owner":{"account_id":15474021,"reputation":1,"user_id":11194469,"display_name":"Luke McCartney"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1695232759,"creation_date":1695117099,"question_id":77133499,"body_markdown":"I am currently struggling with installation/getting started with Groovy.\r\n\r\nWith a file called `Hello.groovy` I have written:\r\n``println &quot;Hello, Groovy!&quot;``\r\nWhen I use `groovyc Hello.groovy` to create the class file, the compilation works. However, when I try to run the class file using `groovy Hello.class` I get the following error:\r\n``\r\norg.codehaus.groovy.control.MultipleCompilationErrorsException: startup failed:\r\n/Users/lukemccartney/Desktop/apache-groovy-course/getting-started/groovyc/Hello.class: 1: Unexpected character: &#39;�&#39; @ line 1, column 1.\r\n   ����@YHellogroovy/lang/Script\r\n                                Hello.groovy$staticClassInfo*Lorg/codehaus/groovy/reflection/ClassInfo;__$stMCZ&lt;init&gt;()V\r\n\r\n   ^\r\n\r\n1 error\r\n``\r\n\r\nI tried installing groovy via `sudo apt-get install groovy` on my Ubuntu VM and I get the same problem when I run `groovyc Hello.groovy` and `groovy Hello.class`.","title":"Groovy Class Files not working with `groovy` command","body":"<p>I am currently struggling with installation/getting started with Groovy.</p>\n<p>With a file called <code>Hello.groovy</code> I have written:\n<code>println &quot;Hello, Groovy!&quot;</code>\nWhen I use <code>groovyc Hello.groovy</code> to create the class file, the compilation works. However, when I try to run the class file using <code>groovy Hello.class</code> I get the following error:\n``\norg.codehaus.groovy.control.MultipleCompilationErrorsException: startup failed:\n/Users/lukemccartney/Desktop/apache-groovy-course/getting-started/groovyc/Hello.class: 1: Unexpected character: '�' @ line 1, column 1.\n����@YHellogroovy/lang/Script\nHello.groovy$staticClassInfo*Lorg/codehaus/groovy/reflection/ClassInfo;__$stMCZ()V</p>\n<p>^</p>\n<p>1 error\n``</p>\n<p>I tried installing groovy via <code>sudo apt-get install groovy</code> on my Ubuntu VM and I get the same problem when I run <code>groovyc Hello.groovy</code> and <code>groovy Hello.class</code>.</p>\n"},{"tags":["java","hashmap","linkedhashmap"],"comments":[{"owner":{"account_id":460525,"reputation":18289,"user_id":861679,"accept_rate":68,"display_name":"Android Killer"},"score":0,"creation_date":1314164158,"post_id":7170871,"comment_id":8606830,"body_markdown":"Do you know the keys of all items or not ?","body":"Do you know the keys of all items or not ?"},{"owner":{"account_id":48946,"reputation":14899,"user_id":145567,"accept_rate":78,"display_name":"Dominic Bou-Samra"},"score":0,"creation_date":1314164270,"post_id":7170871,"comment_id":8606837,"body_markdown":"I do. Suggesting I iterate through once, add to a list, then iterate that backwards using them as keys? Suppose that would work","body":"I do. Suggesting I iterate through once, add to a list, then iterate that backwards using them as keys? Suppose that would work"},{"owner":{"account_id":15387,"reputation":63718,"user_id":32453,"accept_rate":92,"display_name":"rogerdpack"},"score":1,"creation_date":1449679126,"post_id":7170871,"comment_id":56114553,"body_markdown":"I assume you just want to iterate in reverse in &quot;order of insertion&quot; here, or do you want real ordering based on some natural ordering? See also http://stackoverflow.com/a/1936472/32453","body":"I assume you just want to iterate in reverse in &quot;order of insertion&quot; here, or do you want real ordering based on some natural ordering? See also <a href=\"http://stackoverflow.com/a/1936472/32453\">stackoverflow.com/a/1936472/32453</a>"}],"answers":[{"comments":[{"owner":{"account_id":8394,"reputation":5773,"user_id":15100,"accept_rate":78,"display_name":"Shimi Bandiel"},"score":5,"creation_date":1314165414,"post_id":7170975,"comment_id":8606997,"body_markdown":"Instead of keyList.indexOf(...) use listIterator with the position. and iterate with previous()","body":"Instead of keyList.indexOf(...) use listIterator with the position. and iterate with previous()"},{"owner":{"account_id":69149,"reputation":233552,"user_id":201359,"accept_rate":100,"display_name":"&#211;scar L&#243;pez"},"score":0,"creation_date":1326798547,"post_id":7170975,"comment_id":11120301,"body_markdown":"Instead of keyList.indexOf(...) use keyList.size()-1","body":"Instead of keyList.indexOf(...) use keyList.size()-1"},{"owner":{"account_id":316665,"reputation":87011,"user_id":632951,"accept_rate":83,"display_name":"Pacerier"},"score":7,"creation_date":1330020528,"post_id":7170975,"comment_id":11905408,"body_markdown":"@Kal The operation of your solution is O(n), which is well.. *horrible*.","body":"@Kal The operation of your solution is O(n), which is well.. <i>horrible</i>."},{"owner":{"account_id":160739,"reputation":1442,"user_id":381031,"display_name":"Anton"},"score":0,"creation_date":1336406140,"post_id":7170975,"comment_id":13549878,"body_markdown":"Well doing so you create unnecessary overhead by copying the key set. Consider using TreeMap.","body":"Well doing so you create unnecessary overhead by copying the key set. Consider using TreeMap."},{"owner":{"account_id":424558,"reputation":935,"user_id":804616,"accept_rate":75,"display_name":"trss"},"score":0,"creation_date":1412881778,"post_id":7170975,"comment_id":41243895,"body_markdown":"Doesn&#39;t a `Set` destroy the order? Consequently, wouldn&#39;t `keyList` contain the keys in random order?","body":"Doesn&#39;t a <code>Set</code> destroy the order? Consequently, wouldn&#39;t <code>keyList</code> contain the keys in random order?"},{"owner":{"account_id":424558,"reputation":935,"user_id":804616,"accept_rate":75,"display_name":"trss"},"score":0,"creation_date":1412883790,"post_id":7170975,"comment_id":41244907,"body_markdown":"I suppose it works because the documentation says the returned `Set` is backed by the `LinkedHashMap`. Seems flaky though, since there is generally no guarantee on the order of iteration of a `Set`.","body":"I suppose it works because the documentation says the returned <code>Set</code> is backed by the <code>LinkedHashMap</code>. Seems flaky though, since there is generally no guarantee on the order of iteration of a <code>Set</code>."},{"owner":{"account_id":995810,"reputation":8236,"user_id":1011791,"accept_rate":86,"display_name":"Chthonic Project"},"score":3,"creation_date":1435437286,"post_id":7170975,"comment_id":50202930,"body_markdown":"The `LinkedHashMap#keySet()` returns a `Set` backed by a `LinkedKeySet`, which is a nested class with package-local visibility. The iteration order is defined by its `Spliterator`, which is ordered in the same order as the map entries. So, in this case, the order IS guaranteed.","body":"The <code>LinkedHashMap#keySet()</code> returns a <code>Set</code> backed by a <code>LinkedKeySet</code>, which is a nested class with package-local visibility. The iteration order is defined by its <code>Spliterator</code>, which is ordered in the same order as the map entries. So, in this case, the order IS guaranteed."}],"tags":[],"owner":{"account_id":373975,"reputation":24834,"user_id":723920,"accept_rate":60,"display_name":"Kal"},"comment_count":7,"down_vote_count":2,"up_vote_count":11,"is_accepted":true,"score":9,"last_activity_date":1314164855,"creation_date":1314164855,"answer_id":7170975,"question_id":7170871,"body_markdown":"You don&#39;t have to iterate through it. But it would be handy to pull the keys off and store it in a list. Thats the only way you can do indexOf() type operations.\r\n\r\n    List&lt;String&gt; keyList = new ArrayList&lt;String&gt;(map.keySet());\r\n    // Given 10th element&#39;s key\r\n    String key = &quot;aKey&quot;;\r\n    int idx = keyList.indexOf(key);\r\n    for ( int i = idx ; i &gt;= 0 ; i-- ) \r\n     System.out.println(map.get(keyList.get(i)));","title":"Iterating through a LinkedHashMap in reverse order","body":"<p>You don't have to iterate through it. But it would be handy to pull the keys off and store it in a list. Thats the only way you can do indexOf() type operations.</p>\n\n<pre><code>List&lt;String&gt; keyList = new ArrayList&lt;String&gt;(map.keySet());\n// Given 10th element's key\nString key = \"aKey\";\nint idx = keyList.indexOf(key);\nfor ( int i = idx ; i &gt;= 0 ; i-- ) \n System.out.println(map.get(keyList.get(i)));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":480291,"reputation":21721,"user_id":893432,"accept_rate":66,"display_name":"Ali"},"comment_count":0,"down_vote_count":1,"up_vote_count":12,"is_accepted":false,"score":11,"last_activity_date":1595857576,"creation_date":1407832730,"answer_id":25259730,"question_id":7170871,"body_markdown":"The HashMap:\r\n\r\n    HashMap&lt;Integer, String&gt; map = new HashMap&lt;Integer, String&gt;();\r\n\r\nReverse iterating over values:\r\n\r\n    ListIterator&lt;Sprite&gt; iterator = new ArrayList&lt;String&gt;(map.values()).listIterator(map.size());\r\n    while (iterator.hasPrevious()) String value = iterator.previous();\r\n\r\nReverse iterating over keys:\r\n\r\n    ListIterator&lt;Integer&gt; iterator = new ArrayList(map.keySet()).listIterator(map.size());\r\n    while (iterator.hasPrevious()) Integer key = iterator.previous();\r\n\r\nReverse iterating over both:\r\n\r\n    ListIterator&lt;Map.Entry&lt;Integer, String&gt;&gt; iterator = new ArrayList&lt;Map.Entry&lt;Integer, String&gt;&gt;(map.entrySet()).listIterator(map.size());\r\n    while (iterator.hasPrevious()) Map.Entry&lt;Integer, String&gt; entry = iterator.previous();\r\n\r\n","title":"Iterating through a LinkedHashMap in reverse order","body":"<p>The HashMap:</p>\n<pre><code>HashMap&lt;Integer, String&gt; map = new HashMap&lt;Integer, String&gt;();\n</code></pre>\n<p>Reverse iterating over values:</p>\n<pre><code>ListIterator&lt;Sprite&gt; iterator = new ArrayList&lt;String&gt;(map.values()).listIterator(map.size());\nwhile (iterator.hasPrevious()) String value = iterator.previous();\n</code></pre>\n<p>Reverse iterating over keys:</p>\n<pre><code>ListIterator&lt;Integer&gt; iterator = new ArrayList(map.keySet()).listIterator(map.size());\nwhile (iterator.hasPrevious()) Integer key = iterator.previous();\n</code></pre>\n<p>Reverse iterating over both:</p>\n<pre><code>ListIterator&lt;Map.Entry&lt;Integer, String&gt;&gt; iterator = new ArrayList&lt;Map.Entry&lt;Integer, String&gt;&gt;(map.entrySet()).listIterator(map.size());\nwhile (iterator.hasPrevious()) Map.Entry&lt;Integer, String&gt; entry = iterator.previous();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2627844,"reputation":263,"user_id":2274508,"display_name":"user2274508"},"comment_count":0,"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1455702180,"creation_date":1455702180,"answer_id":35452967,"question_id":7170871,"body_markdown":"The question requires a LinkedHashMap in reverse order, some answers suggesting using a TreeSet but this will reorder the map based upon the key.\r\n\r\nThis solution allows the iteration over the original LinkedHashMap not the new ArrayList as has also been proposed:\r\n\r\n    List&lt;String&gt; reverseOrderedKeys = new ArrayList&lt;String&gt;(linkedHashMap.keySet());\r\n    Collections.reverse(reverseOrderedKeys);\r\n    for (String key : reverseOrderedKeys) {\r\n    \tRecordItemElement line = linkedHashMap.get(key);\r\n    }","title":"Iterating through a LinkedHashMap in reverse order","body":"<p>The question requires a LinkedHashMap in reverse order, some answers suggesting using a TreeSet but this will reorder the map based upon the key.</p>\n\n<p>This solution allows the iteration over the original LinkedHashMap not the new ArrayList as has also been proposed:</p>\n\n<pre><code>List&lt;String&gt; reverseOrderedKeys = new ArrayList&lt;String&gt;(linkedHashMap.keySet());\nCollections.reverse(reverseOrderedKeys);\nfor (String key : reverseOrderedKeys) {\n    RecordItemElement line = linkedHashMap.get(key);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3980453,"reputation":98,"user_id":3282474,"display_name":"Hernanibus"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1487044922,"creation_date":1487044922,"answer_id":42217651,"question_id":7170871,"body_markdown":"Using &quot;user22745008&quot; solution and labdas with some generics you can have a very neat solution as a method:\r\n\r\n      public static &lt;T, Q&gt; LinkedHashMap&lt;T, Q&gt; reverseMap(LinkedHashMap&lt;T, Q&gt; toReverse)\r\n      {\r\n          LinkedHashMap&lt;T, Q&gt; reversedMap = new LinkedHashMap&lt;&gt;();\r\n          List&lt;T&gt; reverseOrderedKeys = new ArrayList&lt;&gt;(toReverse.keySet());\r\n          Collections.reverse(reverseOrderedKeys);\r\n          reverseOrderedKeys.forEach((key)-&gt;reversedMap.put(key,toReverse.get(key)));\r\n          return reversedMap;\r\n        }","title":"Iterating through a LinkedHashMap in reverse order","body":"<p>Using \"user22745008\" solution and labdas with some generics you can have a very neat solution as a method:</p>\n\n<pre><code>  public static &lt;T, Q&gt; LinkedHashMap&lt;T, Q&gt; reverseMap(LinkedHashMap&lt;T, Q&gt; toReverse)\n  {\n      LinkedHashMap&lt;T, Q&gt; reversedMap = new LinkedHashMap&lt;&gt;();\n      List&lt;T&gt; reverseOrderedKeys = new ArrayList&lt;&gt;(toReverse.keySet());\n      Collections.reverse(reverseOrderedKeys);\n      reverseOrderedKeys.forEach((key)-&gt;reversedMap.put(key,toReverse.get(key)));\n      return reversedMap;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2111403,"reputation":33698,"user_id":1876620,"accept_rate":94,"display_name":"fps"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1516567024,"creation_date":1516564881,"answer_id":48371131,"question_id":7170871,"body_markdown":"This is an old question, but I think it&#39;s lacking an answer that takes a newer approach. The following uses Java 9 features:\r\n\r\n    Deque&lt;Map.Entry&lt;String, RecordItemElement&gt;&gt; top = map.entrySet().stream()\r\n            .takeWhile(e -&gt; !givenKey.equals(e.getKey()))\r\n            .collect(Collectors.toCollection(ArrayDeque::new));\r\n\r\nThe code above streams the map&#39;s entryset, keeping entries until a key equal to the given key is found. Then, the entries are collected to an `ArrayDeque`.\r\n\r\nOne detail is missing, though. Depending on whether you need the entry that matches the given key to also be included in the result or not, you might need to manually add it to the deque. If you don&#39;t want it added, then you&#39;re done. Otherwise, simply do:\r\n\r\n    top.add(Map.entry(givenKey, map.get(givenKey)));\r\n\r\nNow, to iterate the `Deque` in reverse order, simply use its `descendingIterator()`:\r\n\r\n    Iterator&lt;Map.Entry&lt;String, RecordItemElement&gt;&gt; descIt = top.descendingIterator();\r\n\r\n*It&#39;s worth mentioning that this approach only works if the stream is **sequential**.* Anyways, we wouldn&#39;t have gained anything using a parallel stream here.","title":"Iterating through a LinkedHashMap in reverse order","body":"<p>This is an old question, but I think it's lacking an answer that takes a newer approach. The following uses Java 9 features:</p>\n\n<pre><code>Deque&lt;Map.Entry&lt;String, RecordItemElement&gt;&gt; top = map.entrySet().stream()\n        .takeWhile(e -&gt; !givenKey.equals(e.getKey()))\n        .collect(Collectors.toCollection(ArrayDeque::new));\n</code></pre>\n\n<p>The code above streams the map's entryset, keeping entries until a key equal to the given key is found. Then, the entries are collected to an <code>ArrayDeque</code>.</p>\n\n<p>One detail is missing, though. Depending on whether you need the entry that matches the given key to also be included in the result or not, you might need to manually add it to the deque. If you don't want it added, then you're done. Otherwise, simply do:</p>\n\n<pre><code>top.add(Map.entry(givenKey, map.get(givenKey)));\n</code></pre>\n\n<p>Now, to iterate the <code>Deque</code> in reverse order, simply use its <code>descendingIterator()</code>:</p>\n\n<pre><code>Iterator&lt;Map.Entry&lt;String, RecordItemElement&gt;&gt; descIt = top.descendingIterator();\n</code></pre>\n\n<p><em>It's worth mentioning that this approach only works if the stream is <strong>sequential</strong>.</em> Anyways, we wouldn't have gained anything using a parallel stream here.</p>\n"},{"tags":[],"owner":{"account_id":44321,"reputation":9248,"user_id":130028,"accept_rate":79,"display_name":"marcolopes"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1572560340,"creation_date":1572560340,"answer_id":58651855,"question_id":7170871,"body_markdown":"    new LinkedList(linkedHashMap.keySet()).descendingIterator();","title":"Iterating through a LinkedHashMap in reverse order","body":"<pre><code>new LinkedList(linkedHashMap.keySet()).descendingIterator();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695232603,"creation_date":1683002242,"answer_id":76151763,"question_id":7170871,"body_markdown":"As of Java 21, `LinkedHashMap` has the [`reversed()`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/LinkedHashMap.html#reversed()) method, which returns a reversed view of the map.  This can be iterated over in the standard manner.\r\n\r\n```lang-java\r\nmyLinkedHashMap.reversed().forEach(key, value -&gt; {\r\n  // Do something with the key and/or value\r\n});\r\n```\r\n\r\nTo specifically start with a given key as requested, a `Stream` over the reversed map&#39;s entry set could be used, using the [`dropWhile`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/stream/Stream.html#dropWhile(java.util.function.Predicate)) method to skip all elements encountered prior to that key:\r\n\r\n```lang-java\r\nString matchingKey = &quot;someKey&quot;;\r\nmyLinkedHashMap.entrySet().stream()\r\n        .dropWhile(e -&gt; !matchingKey.equals(e.getKey()))\r\n        .forEach(e -&gt; {\r\n            String key = e.getKey();\r\n            RecordItemElement value = e.getValue();\r\n            // Do something with key &amp; value\r\n        });\r\n```","title":"Iterating through a LinkedHashMap in reverse order","body":"<p>As of Java 21, <code>LinkedHashMap</code> has the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/LinkedHashMap.html#reversed()\" rel=\"nofollow noreferrer\"><code>reversed()</code></a> method, which returns a reversed view of the map.  This can be iterated over in the standard manner.</p>\n<pre class=\"lang-java prettyprint-override\"><code>myLinkedHashMap.reversed().forEach(key, value -&gt; {\n  // Do something with the key and/or value\n});\n</code></pre>\n<p>To specifically start with a given key as requested, a <code>Stream</code> over the reversed map's entry set could be used, using the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/stream/Stream.html#dropWhile(java.util.function.Predicate)\" rel=\"nofollow noreferrer\"><code>dropWhile</code></a> method to skip all elements encountered prior to that key:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String matchingKey = &quot;someKey&quot;;\nmyLinkedHashMap.entrySet().stream()\n        .dropWhile(e -&gt; !matchingKey.equals(e.getKey()))\n        .forEach(e -&gt; {\n            String key = e.getKey();\n            RecordItemElement value = e.getValue();\n            // Do something with key &amp; value\n        });\n</code></pre>\n"}],"owner":{"account_id":48946,"reputation":14899,"user_id":145567,"accept_rate":78,"display_name":"Dominic Bou-Samra"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32203,"favorite_count":0,"down_vote_count":0,"up_vote_count":44,"accepted_answer_id":7170975,"answer_count":7,"score":44,"last_activity_date":1695232603,"creation_date":1314163999,"question_id":7170871,"body_markdown":"I have a LinkedHashMap:\r\n\r\n    LinkedHashMap&lt;String, RecordItemElement&gt;\r\n\r\nthat I need to iterate through from a given key&#39;s position, backwards. So if I was given the 10th item&#39;s key, I&#39;d need iterate backwards through the hashmap 9, 8, 7 etc.\r\n","title":"Iterating through a LinkedHashMap in reverse order","body":"<p>I have a LinkedHashMap:</p>\n\n<pre><code>LinkedHashMap&lt;String, RecordItemElement&gt;\n</code></pre>\n\n<p>that I need to iterate through from a given key's position, backwards. So if I was given the 10th item's key, I'd need iterate backwards through the hashmap 9, 8, 7 etc.</p>\n"},{"tags":["java","kotlin","frp","device-policy-manager","android-device-owner"],"owner":{"account_id":15370579,"reputation":3,"user_id":11088721,"display_name":"Udit Sharma"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":192,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695231934,"creation_date":1674450184,"question_id":75205812,"body_markdown":"How to add extra protection in my device owner application so that if someone tries bypassing the FRP they can&#39;t use the phone.\r\nI have seen this in some devices. they show a notification &#39;Device managed by admin automatically resetting soon&#39; like this:\r\n[screenshot1](https://i.stack.imgur.com/WrIlP.jpg)\r\n\r\n[screenshot2](https://i.stack.imgur.com/4bGAT.jpg)\r\n\r\nThe app that showed this was using &#39;Android Management API&#39;. I read about this but what I understood is that I think they install their own app as device owner in the device to add the FRP policy. In that case I think I will not be able to install my device owner app (or is it possible?).\r\n\r\n\r\nI am using this code and it adds FRP (asks for the required gMail address during device setup) but it can be easily bypassed by following some YouTube videos and after that device does not show above notification.\r\n\r\n```\r\ntry {\r\n\tBundle bundle = new Bundle();\r\n\tbundle.putString(&quot;factoryResetProtectionAdmin&quot;, 432112340987654321234);//google Id\r\n\tdevicePolicyManager.setApplicationRestrictions(adminComponentName, &quot;com.google.android.gms&quot;, bundle);\r\n\r\n\t// send broadcast\r\n\tIntent broadcastIntent = new Intent(&quot;com.google.android.gms.auth.FRP_CONFIG_CHANGED&quot;);\r\n\tbroadcastIntent.setPackage(&quot;com.google.android.gms&quot;);\r\n\tbroadcastIntent.addFlags(Intent.FLAG_RECEIVER_FOREGROUND);\r\n\tgetApplicationContext().sendBroadcast(broadcastIntent);\r\n} catch (Exception e) {\r\n\tLog.d(&quot;FRP&quot;, e.getLocalizedMessage());\r\n\te.printStackTrace();\r\n}\r\n```\r\n","title":"Android - Protection from FRP bybass","body":"<p>How to add extra protection in my device owner application so that if someone tries bypassing the FRP they can't use the phone.\nI have seen this in some devices. they show a notification 'Device managed by admin automatically resetting soon' like this:\n<a href=\"https://i.stack.imgur.com/WrIlP.jpg\" rel=\"nofollow noreferrer\">screenshot1</a></p>\n<p><a href=\"https://i.stack.imgur.com/4bGAT.jpg\" rel=\"nofollow noreferrer\">screenshot2</a></p>\n<p>The app that showed this was using 'Android Management API'. I read about this but what I understood is that I think they install their own app as device owner in the device to add the FRP policy. In that case I think I will not be able to install my device owner app (or is it possible?).</p>\n<p>I am using this code and it adds FRP (asks for the required gMail address during device setup) but it can be easily bypassed by following some YouTube videos and after that device does not show above notification.</p>\n<pre><code>try {\n    Bundle bundle = new Bundle();\n    bundle.putString(&quot;factoryResetProtectionAdmin&quot;, 432112340987654321234);//google Id\n    devicePolicyManager.setApplicationRestrictions(adminComponentName, &quot;com.google.android.gms&quot;, bundle);\n\n    // send broadcast\n    Intent broadcastIntent = new Intent(&quot;com.google.android.gms.auth.FRP_CONFIG_CHANGED&quot;);\n    broadcastIntent.setPackage(&quot;com.google.android.gms&quot;);\n    broadcastIntent.addFlags(Intent.FLAG_RECEIVER_FOREGROUND);\n    getApplicationContext().sendBroadcast(broadcastIntent);\n} catch (Exception e) {\n    Log.d(&quot;FRP&quot;, e.getLocalizedMessage());\n    e.printStackTrace();\n}\n</code></pre>\n"},{"tags":["java","collections","linked-list","iteration","hashset"],"comments":[{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":1,"creation_date":1585770466,"post_id":60979085,"comment_id":107883596,"body_markdown":"No. Just a regular forward-going iterator.","body":"No. Just a regular forward-going iterator."}],"answers":[{"comments":[{"owner":{"account_id":13482973,"reputation":1362,"user_id":9727674,"display_name":"Moritz Gro&#223;"},"score":1,"creation_date":1585770920,"post_id":60979204,"comment_id":107883823,"body_markdown":"Yea I&#39;m definetly not gonna do that. But: Why is it doubly-linked then? Because elsewise the linkedList couln&#39;t be fixed when elements are removed?","body":"Yea I&#39;m definetly not gonna do that. But: Why is it doubly-linked then? Because elsewise the linkedList couln&#39;t be fixed when elements are removed?"}],"tags":[],"owner":{"account_id":2818342,"reputation":299906,"user_id":2422776,"display_name":"Mureinik"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1585770698,"creation_date":1585770698,"answer_id":60979204,"question_id":60979085,"body_markdown":"`LinkedHashSet` doesn&#39;t expose any API to iterate over it backwards. Although this would have a really bad performance impact, you could copy the `LinkedHashSet` to a `List` (retaining its order) and then iterate backwards on it:\r\n\r\n```java\r\nLinkedHashSet&lt;SomeClass&gt; myLinkedHashSet = ...;\r\nList&lt;SomeClass&gt; myList = new ArrayList&lt;&gt;(myLinkedHashSet); // Order is retained\r\nListIterator&lt;SomeClass&gt; myIter = myList.listIterator(myList.size());\r\nwhile (myIter.hasPrevious()) {\r\n    System.out.println(myIter.previous());\r\n}\r\n```","title":"The Java LinkedHashSet uses a doubly-linked list. Can it also be iterated backwards?","body":"<p><code>LinkedHashSet</code> doesn't expose any API to iterate over it backwards. Although this would have a really bad performance impact, you could copy the <code>LinkedHashSet</code> to a <code>List</code> (retaining its order) and then iterate backwards on it:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>LinkedHashSet&lt;SomeClass&gt; myLinkedHashSet = ...;\nList&lt;SomeClass&gt; myList = new ArrayList&lt;&gt;(myLinkedHashSet); // Order is retained\nListIterator&lt;SomeClass&gt; myIter = myList.listIterator(myList.size());\nwhile (myIter.hasPrevious()) {\n    System.out.println(myIter.previous());\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":13482973,"reputation":1362,"user_id":9727674,"display_name":"Moritz Gro&#223;"},"score":0,"creation_date":1585772114,"post_id":60979384,"comment_id":107884312,"body_markdown":"Thanks for the second paragraph, this clarifies my comment on the top answer.","body":"Thanks for the second paragraph, this clarifies my comment on the top answer."},{"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"score":0,"creation_date":1683003033,"post_id":60979384,"comment_id":134296383,"body_markdown":"Your answer refers to `LinkedHashMap` when the original question was `LinkedHashSet`.  All your points are pretty much still applicable, though.","body":"Your answer refers to <code>LinkedHashMap</code> when the original question was <code>LinkedHashSet</code>.  All your points are pretty much still applicable, though."}],"tags":[],"owner":{"account_id":123958,"reputation":109295,"user_id":318758,"accept_rate":100,"display_name":"Joni"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1585771535,"creation_date":1585771535,"answer_id":60979384,"question_id":60979085,"body_markdown":"The LinkedHashMap iterator only supports going forward. You can read its implementation in [OpenJDK in the github mirror](https://github.com/openjdk/jdk/blob/9d764ee48ee7c2e7be7a25aee2ed7bed2fcd2000/src/java.base/share/classes/java/util/LinkedHashMap.java#L740). It&#39;s not like the implementation privately implemented `ListIterator` and secretly supported iterating backwards.\r\n\r\nThe hash table lookup gives you a pointer to an entry that&#39;s somewhere in the list.  To remove it, you need a reference to the previous list entry. That&#39;s why LinkedHashMap needs to use a doubly linked list.","title":"The Java LinkedHashSet uses a doubly-linked list. Can it also be iterated backwards?","body":"<p>The LinkedHashMap iterator only supports going forward. You can read its implementation in <a href=\"https://github.com/openjdk/jdk/blob/9d764ee48ee7c2e7be7a25aee2ed7bed2fcd2000/src/java.base/share/classes/java/util/LinkedHashMap.java#L740\" rel=\"nofollow noreferrer\">OpenJDK in the github mirror</a>. It's not like the implementation privately implemented <code>ListIterator</code> and secretly supported iterating backwards.</p>\n\n<p>The hash table lookup gives you a pointer to an entry that's somewhere in the list.  To remove it, you need a reference to the previous list entry. That's why LinkedHashMap needs to use a doubly linked list.</p>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695231841,"creation_date":1683003250,"answer_id":76151822,"question_id":60979085,"body_markdown":"Starting with Java 21, `LinkedHashSet` has the [`reversed()`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/LinkedHashSet.html#reversed()) method, which returns a reversed view of the set.\r\n\r\nAn iterator can be retrieved from this reversed view, same as for any collection:\r\n\r\n```lang-java\r\nIterator&lt;Object&gt; iterator = myLinkedHashSet.reversed().iterator();\r\n```\r\n\r\nAdditionally, as with any `Iterable`, there are various ways to iterate over this reversed view, including the [`forEach`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Iterable.html#forEach(java.util.function.Consumer)) method:\r\n\r\n```lang-java\r\nmyLinkedHashSet.reversed().forEach(element -&gt; {\r\n  // Do something with the element\r\n});\r\n```","title":"The Java LinkedHashSet uses a doubly-linked list. Can it also be iterated backwards?","body":"<p>Starting with Java 21, <code>LinkedHashSet</code> has the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/LinkedHashSet.html#reversed()\" rel=\"nofollow noreferrer\"><code>reversed()</code></a> method, which returns a reversed view of the set.</p>\n<p>An iterator can be retrieved from this reversed view, same as for any collection:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Iterator&lt;Object&gt; iterator = myLinkedHashSet.reversed().iterator();\n</code></pre>\n<p>Additionally, as with any <code>Iterable</code>, there are various ways to iterate over this reversed view, including the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Iterable.html#forEach(java.util.function.Consumer)\" rel=\"nofollow noreferrer\"><code>forEach</code></a> method:</p>\n<pre class=\"lang-java prettyprint-override\"><code>myLinkedHashSet.reversed().forEach(element -&gt; {\n  // Do something with the element\n});\n</code></pre>\n"}],"owner":{"account_id":13482973,"reputation":1362,"user_id":9727674,"display_name":"Moritz Gro&#223;"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":549,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":60979204,"answer_count":3,"score":2,"last_activity_date":1695231841,"creation_date":1585770231,"question_id":60979085,"body_markdown":"Oracle-Documentation says following about LinkedHashSet: &quot;Hash table and linked list implementation of the Set interface, with predictable iteration order. This implementation differs from HashSet in that it maintains a doubly-linked list running through all of its entries.&quot;\r\n\r\nThe iterator you can get is in insertion order. Iteration in reverse-insertion order would also be technicially feasable thought, as it&#39;s a **doubly**-linked. \r\n\r\nCan such a reverse-Iterator be created (or even a ListIterator which does both)?","title":"The Java LinkedHashSet uses a doubly-linked list. Can it also be iterated backwards?","body":"<p>Oracle-Documentation says following about LinkedHashSet: \"Hash table and linked list implementation of the Set interface, with predictable iteration order. This implementation differs from HashSet in that it maintains a doubly-linked list running through all of its entries.\"</p>\n\n<p>The iterator you can get is in insertion order. Iteration in reverse-insertion order would also be technicially feasable thought, as it's a <strong>doubly</strong>-linked. </p>\n\n<p>Can such a reverse-Iterator be created (or even a ListIterator which does both)?</p>\n"},{"tags":["java","linked-list","deque","linkedhashset"],"comments":[{"owner":{"account_id":6606163,"reputation":494,"user_id":5102932,"display_name":"Roy Shahaf"},"score":0,"creation_date":1545353812,"post_id":53877927,"comment_id":94603175,"body_markdown":"adding to a linked hash set has the same meaning as addFirst would","body":"adding to a linked hash set has the same meaning as addFirst would"},{"owner":{"account_id":13546471,"reputation":3498,"user_id":9772691,"display_name":"John McClane"},"score":1,"creation_date":1545354065,"post_id":53877927,"comment_id":94603212,"body_markdown":"@RoyShahaf Are you sure? `add` for `LinkedList` is equivalent to `addLast`. `addFirst` has different meaning.","body":"@RoyShahaf Are you sure? <code>add</code> for <code>LinkedList</code> is equivalent to <code>addLast</code>. <code>addFirst</code> has different meaning."},{"owner":{"account_id":2141010,"reputation":118249,"user_id":1899640,"display_name":"that other guy"},"score":2,"creation_date":1545354103,"post_id":53877927,"comment_id":94603217,"body_markdown":"When would an `addFirst` function be useful?","body":"When would an <code>addFirst</code> function be useful?"},{"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"score":4,"creation_date":1545354134,"post_id":53877927,"comment_id":94603224,"body_markdown":"Because `LinkedHashSet` preserves insertion order. That&#39;s it. There isn&#39;t a way to manipulate that order. Also, if you add methods not in the interface, then you can&#39;t program to the common interface anymore.","body":"Because <code>LinkedHashSet</code> preserves insertion order. That&#39;s it. There isn&#39;t a way to manipulate that order. Also, if you add methods not in the interface, then you can&#39;t program to the common interface anymore."},{"owner":{"account_id":13546471,"reputation":3498,"user_id":9772691,"display_name":"John McClane"},"score":0,"creation_date":1545354422,"post_id":53877927,"comment_id":94603275,"body_markdown":"@thatotherguy In the same cases when it is useful with `LinkedList`. For example, to create LIFO queue.","body":"@thatotherguy In the same cases when it is useful with <code>LinkedList</code>. For example, to create LIFO queue."},{"owner":{"account_id":1223835,"reputation":75878,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":1,"creation_date":1545354493,"post_id":53877927,"comment_id":94603285,"body_markdown":"@ElliottFrisch If traversal order matters, you&#39;re usually already using a more specific type.","body":"@ElliottFrisch If traversal order matters, you&#39;re usually already using a more specific type."},{"owner":{"account_id":13546471,"reputation":3498,"user_id":9772691,"display_name":"John McClane"},"score":0,"creation_date":1545354604,"post_id":53877927,"comment_id":94603306,"body_markdown":"@ElliottFrisch `TreeSet` contains a bunch of methods not present in `Set`.","body":"@ElliottFrisch <code>TreeSet</code> contains a bunch of methods not present in <code>Set</code>."},{"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"score":2,"creation_date":1545354786,"post_id":53877927,"comment_id":94603346,"body_markdown":"[Javadoc](https://docs.oracle.com/javase/7/docs/api/java/util/LinkedHashSet.html) says (in part) *This linked list defines the iteration ordering, which is the order in which elements were inserted into the set (insertion-order).* Did you want a [`ArrayDeque`](https://docs.oracle.com/javase/7/docs/api/java/util/ArrayDeque.html)?","body":"<a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/LinkedHashSet.html\" rel=\"nofollow noreferrer\">Javadoc</a> says (in part) <i>This linked list defines the iteration ordering, which is the order in which elements were inserted into the set (insertion-order).</i> Did you want a <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/ArrayDeque.html\" rel=\"nofollow noreferrer\"><code>ArrayDeque</code></a>?"},{"owner":{"account_id":6606163,"reputation":494,"user_id":5102932,"display_name":"Roy Shahaf"},"score":0,"creation_date":1545355226,"post_id":53877927,"comment_id":94603439,"body_markdown":"@JohnMcClane my bad :)","body":"@JohnMcClane my bad :)"},{"owner":{"account_id":13546471,"reputation":3498,"user_id":9772691,"display_name":"John McClane"},"score":0,"creation_date":1545355702,"post_id":53877927,"comment_id":94603534,"body_markdown":"@ElliottFrisch This sentence concerns ordinary insertion, via `Set.add` method. They could have added to it that `addFirst` changes this order. By the way, this phrase is not completely correct. Try to add 1, then 2 to `LinkedHashSet&lt;Integer&gt;`, then remove 1, then add it again, and you&#39;ll see that the iteration order is now `2, 1` that contradicts the fact that 1 was inserted **earlier** than 2.","body":"@ElliottFrisch This sentence concerns ordinary insertion, via <code>Set.add</code> method. They could have added to it that <code>addFirst</code> changes this order. By the way, this phrase is not completely correct. Try to add 1, then 2 to <code>LinkedHashSet&lt;Integer&gt;</code>, then remove 1, then add it again, and you&#39;ll see that the iteration order is now <code>2, 1</code> that contradicts the fact that 1 was inserted <b>earlier</b> than 2."},{"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"score":2,"creation_date":1545355773,"post_id":53877927,"comment_id":94603555,"body_markdown":"You removed an element in the middle. Should it have infinite memory to store all of the values that you have removed? Regardless, what problem are you trying solve?","body":"You removed an element in the middle. Should it have infinite memory to store all of the values that you have removed? Regardless, what problem are you trying solve?"},{"owner":{"account_id":5860066,"reputation":13485,"user_id":4616087,"display_name":"Marvin"},"score":1,"creation_date":1545355878,"post_id":53877927,"comment_id":94603576,"body_markdown":"I don&#39;t think anyone except the original authors can answer this. We cannot even tell for sure whether it was a deliberate decision, let alone any potential reasons.","body":"I don&#39;t think anyone except the original authors can answer this. We cannot even tell for sure whether it was a deliberate decision, let alone any potential reasons."},{"owner":{"account_id":13546471,"reputation":3498,"user_id":9772691,"display_name":"John McClane"},"score":0,"creation_date":1545356616,"post_id":53877927,"comment_id":94603704,"body_markdown":"@Marvin I think such decisions are always considered. Even if it was overlooked at the earlier versions of Java, nothing prevents from adding this method, as it was with `String.isBlank()` in Java 11. For me, it seems natural to include it. But maybe there was some reason not to do this?","body":"@Marvin I think such decisions are always considered. Even if it was overlooked at the earlier versions of Java, nothing prevents from adding this method, as it was with <code>String.isBlank()</code> in Java 11. For me, it seems natural to include it. But maybe there was some reason not to do this?"},{"owner":{"account_id":6606163,"reputation":494,"user_id":5102932,"display_name":"Roy Shahaf"},"score":0,"creation_date":1545356694,"post_id":53877927,"comment_id":94603721,"body_markdown":"a general rule is to keep interfaces as thin as possible","body":"a general rule is to keep interfaces as thin as possible"},{"owner":{"account_id":13546471,"reputation":3498,"user_id":9772691,"display_name":"John McClane"},"score":0,"creation_date":1545356906,"post_id":53877927,"comment_id":94603752,"body_markdown":"@RoyShahaf I agree with this, but here we&#39;re not expanding the `Set` interface, but only adding one class-specific method.","body":"@RoyShahaf I agree with this, but here we&#39;re not expanding the <code>Set</code> interface, but only adding one class-specific method."},{"owner":{"account_id":6606163,"reputation":494,"user_id":5102932,"display_name":"Roy Shahaf"},"score":0,"creation_date":1545357659,"post_id":53877927,"comment_id":94603866,"body_markdown":"When you write a library, any API you make available must be supported (pretty much) forever.\nThis is even more so when writing a language and its base libraries.\nThe use-case for a LinkedHashSet is obvious, the use-case for addFirst in a LinkedHashSet is not.","body":"When you write a library, any API you make available must be supported (pretty much) forever. This is even more so when writing a language and its base libraries. The use-case for a LinkedHashSet is obvious, the use-case for addFirst in a LinkedHashSet is not."}],"answers":[{"tags":[],"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1545362078,"creation_date":1545361374,"answer_id":53878661,"question_id":53877927,"body_markdown":"As Eliott Frisch said, the answer is in the next sentence of the paragraph you quoted:\r\n\r\n&gt; … This linked list defines the iteration ordering, which is the order\r\n&gt; in which elements were inserted into the set (*insertion-order*). …\r\n\r\nAn `addFirst` method would break the insertion order and thereby the design idea of `LinkedHashSet`.\r\n\r\nIf I may add a bit of guesswork too, other possible reasons might include:\r\n\r\n - It’s not so simple to implement as it appears since a `LinkedHashSet` is really implemented as a `LinkedHasMap` where the values mapped to are not used. At least you would have to change that class too (which in turn would also break *its* insertion order and thereby its design idea).\r\n - As that other guy may have intended in a comment, they didn’t find it useful.\r\n\r\nThat said, you are asking the question the wrong way around. They designed a class with a functionality for which they saw a need. They moved on to implement it using a hash table and a linked list. You are starting out from the implementation and using it as a basis for a design discussion. While that may occasionally add something useful, generally it’s not the way to good designs.\r\n\r\nWhile I can in theory follow your point that there might be a situation where you want a double-ended queue with set property (duplicates are ignored/eliminated), I have a hard time imagining when a `Deque` would not fulfil your needs in this case (Eliott Frisch mentioned the under-used `ArrayDeque`). You need pretty large amounts of data and/or pretty strict performance requirements before the linear complexity of `contains` and `remove` would be prohibitive. And in that case you may already be better off custom designing your own data structure.","title":"Why doesn&#39;t LinkedHashSet have addFirst method?","body":"<p>As Eliott Frisch said, the answer is in the next sentence of the paragraph you quoted:</p>\n\n<blockquote>\n  <p>… This linked list defines the iteration ordering, which is the order\n  in which elements were inserted into the set (<em>insertion-order</em>). …</p>\n</blockquote>\n\n<p>An <code>addFirst</code> method would break the insertion order and thereby the design idea of <code>LinkedHashSet</code>.</p>\n\n<p>If I may add a bit of guesswork too, other possible reasons might include:</p>\n\n<ul>\n<li>It’s not so simple to implement as it appears since a <code>LinkedHashSet</code> is really implemented as a <code>LinkedHasMap</code> where the values mapped to are not used. At least you would have to change that class too (which in turn would also break <em>its</em> insertion order and thereby its design idea).</li>\n<li>As that other guy may have intended in a comment, they didn’t find it useful.</li>\n</ul>\n\n<p>That said, you are asking the question the wrong way around. They designed a class with a functionality for which they saw a need. They moved on to implement it using a hash table and a linked list. You are starting out from the implementation and using it as a basis for a design discussion. While that may occasionally add something useful, generally it’s not the way to good designs.</p>\n\n<p>While I can in theory follow your point that there might be a situation where you want a double-ended queue with set property (duplicates are ignored/eliminated), I have a hard time imagining when a <code>Deque</code> would not fulfil your needs in this case (Eliott Frisch mentioned the under-used <code>ArrayDeque</code>). You need pretty large amounts of data and/or pretty strict performance requirements before the linear complexity of <code>contains</code> and <code>remove</code> would be prohibitive. And in that case you may already be better off custom designing your own data structure.</p>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695231488,"creation_date":1683005496,"answer_id":76151958,"question_id":53877927,"body_markdown":"As of Java 21, `LinkedHashSet` does have an [`addFirst`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/LinkedHashSet.html#addFirst(E)) method.\r\n\r\n&gt; `public void addFirst(E e)`\r\n&gt;\r\n&gt; Adds an element as the first element of this collection (optional operation). After this operation completes normally, the given element will be a member of this collection, and it will be the first element in encounter order.\r\n&gt;\r\n&gt; If this set already contains the element, it is relocated if necessary so that it is first in encounter order.\r\n&gt;\r\n&gt; **Specified by:**  \r\n&gt; [`addFirst`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedCollection.html#addFirst(E)) in interface [`SequencedCollection&lt;E&gt;`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedCollection.html)`\r\n&gt;\r\n&gt; **Parameters:**  \r\n&gt; `e` - the element to be added  \r\n&gt;\r\n&gt; **Since:**  \r\n&gt; 21\r\n\r\nThe `addFirst` method was added as part of the [JEP 431: Sequenced Collections](https://openjdk.org/jeps/431) feature added in Java 21.\r\n\r\nThe sequenced collections feature adds three new interfaces: [`SequencedCollection`](https://download.java.net/java/early_access/jdk21/docs/api/java.base/java/util/SequencedCollection.html), [`SequencedSet`](https://download.java.net/java/early_access/jdk21/docs/api/java.base/java/util/SequencedCollection.html) (which extends `SequencedCollection`), and [`SequencedMap`](https://download.java.net/java/early_access/jdk21/docs/api/java.base/java/util/SequencedCollection.html).  Existing classes and interfaces have been retrofitted to used the new interfaces: `SortedSet` &amp; `LinkedHashSet` implement `SequencedSet`, `List` and `Deque` implement `SequencedCollection`, and `SortedMap` and `LinkedHashMap` implement `SequencedMap`.\r\n\r\nThe `addFirst` method on `LinkedHashSet` is defined in `SequencedCollection`.\r\n\r\nThe JDK enhancement proposal does not explain why `LinkedHashSet` didn&#39;t have an `addFirst` method before.  But in its [motivation](https://openjdk.org/jeps/431#Motivation) section, it explains why it and the other sequence-related methods were added by the feature.\r\n\r\n&gt; Java’s [collections framework](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/doc-files/coll-index.html) lacks a collection type that represents a sequence of elements with a defined encounter order. It also lacks a uniform set of operations that apply across such collections. These gaps have been a repeated source of problems and complaints.\r\n&gt;\r\n&gt; […]\r\n&gt; \r\n&gt; This is an unfortunate state of affairs. The concept of a collection with defined encounter order exists in multiple places in the collections framework, but there is no single type that represents it. As a result, some operations on such collections are inconsistent or missing, and processing elements in reverse order ranges from inconvenient to impossible. We should fill these gaps.","title":"Why doesn&#39;t LinkedHashSet have addFirst method?","body":"<p>As of Java 21, <code>LinkedHashSet</code> does have an <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/LinkedHashSet.html#addFirst(E)\" rel=\"nofollow noreferrer\"><code>addFirst</code></a> method.</p>\n<blockquote>\n<p><code>public void addFirst(E e)</code></p>\n<p>Adds an element as the first element of this collection (optional operation). After this operation completes normally, the given element will be a member of this collection, and it will be the first element in encounter order.</p>\n<p>If this set already contains the element, it is relocated if necessary so that it is first in encounter order.</p>\n<p><strong>Specified by:</strong><br />\n<a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedCollection.html#addFirst(E)\" rel=\"nofollow noreferrer\"><code>addFirst</code></a> in interface <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedCollection.html\" rel=\"nofollow noreferrer\"><code>SequencedCollection&lt;E&gt;</code></a>`</p>\n<p><strong>Parameters:</strong><br />\n<code>e</code> - the element to be added</p>\n<p><strong>Since:</strong><br />\n21</p>\n</blockquote>\n<p>The <code>addFirst</code> method was added as part of the <a href=\"https://openjdk.org/jeps/431\" rel=\"nofollow noreferrer\">JEP 431: Sequenced Collections</a> feature added in Java 21.</p>\n<p>The sequenced collections feature adds three new interfaces: <a href=\"https://download.java.net/java/early_access/jdk21/docs/api/java.base/java/util/SequencedCollection.html\" rel=\"nofollow noreferrer\"><code>SequencedCollection</code></a>, <a href=\"https://download.java.net/java/early_access/jdk21/docs/api/java.base/java/util/SequencedCollection.html\" rel=\"nofollow noreferrer\"><code>SequencedSet</code></a> (which extends <code>SequencedCollection</code>), and <a href=\"https://download.java.net/java/early_access/jdk21/docs/api/java.base/java/util/SequencedCollection.html\" rel=\"nofollow noreferrer\"><code>SequencedMap</code></a>.  Existing classes and interfaces have been retrofitted to used the new interfaces: <code>SortedSet</code> &amp; <code>LinkedHashSet</code> implement <code>SequencedSet</code>, <code>List</code> and <code>Deque</code> implement <code>SequencedCollection</code>, and <code>SortedMap</code> and <code>LinkedHashMap</code> implement <code>SequencedMap</code>.</p>\n<p>The <code>addFirst</code> method on <code>LinkedHashSet</code> is defined in <code>SequencedCollection</code>.</p>\n<p>The JDK enhancement proposal does not explain why <code>LinkedHashSet</code> didn't have an <code>addFirst</code> method before.  But in its <a href=\"https://openjdk.org/jeps/431#Motivation\" rel=\"nofollow noreferrer\">motivation</a> section, it explains why it and the other sequence-related methods were added by the feature.</p>\n<blockquote>\n<p>Java’s <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/doc-files/coll-index.html\" rel=\"nofollow noreferrer\">collections framework</a> lacks a collection type that represents a sequence of elements with a defined encounter order. It also lacks a uniform set of operations that apply across such collections. These gaps have been a repeated source of problems and complaints.</p>\n<p>[…]</p>\n<p>This is an unfortunate state of affairs. The concept of a collection with defined encounter order exists in multiple places in the collections framework, but there is no single type that represents it. As a result, some operations on such collections are inconsistent or missing, and processing elements in reverse order ranges from inconvenient to impossible. We should fill these gaps.</p>\n</blockquote>\n"}],"owner":{"account_id":13546471,"reputation":3498,"user_id":9772691,"display_name":"John McClane"},"comment_count":16,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1269,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":53878661,"answer_count":2,"score":1,"last_activity_date":1695231488,"creation_date":1545353598,"question_id":53877927,"body_markdown":"As the documentation of `LinkedHashSet` states, it is\r\n\r\n&gt; Hash table and linked list implementation of the Set interface, with\r\n&gt; predictable iteration order. This implementation differs from HashSet\r\n&gt; in that it maintains a doubly-linked list running through all of its\r\n&gt; entries.\r\n\r\nSo it&#39;s essentially a `HashSet` with FIFO queue of keys implemented by a linked list. Considering that `LinkedList` is `Deque` and permits, in particular, insertion at the beginning, I wonder why doesn&#39;t `LinkedHashSet` have the `addFirst(E e)` method in addition to the methods present in the `Set` interface. It seems not hard to implement this.","title":"Why doesn&#39;t LinkedHashSet have addFirst method?","body":"<p>As the documentation of <code>LinkedHashSet</code> states, it is</p>\n\n<blockquote>\n  <p>Hash table and linked list implementation of the Set interface, with\n  predictable iteration order. This implementation differs from HashSet\n  in that it maintains a doubly-linked list running through all of its\n  entries.</p>\n</blockquote>\n\n<p>So it's essentially a <code>HashSet</code> with FIFO queue of keys implemented by a linked list. Considering that <code>LinkedList</code> is <code>Deque</code> and permits, in particular, insertion at the beginning, I wonder why doesn't <code>LinkedHashSet</code> have the <code>addFirst(E e)</code> method in addition to the methods present in the <code>Set</code> interface. It seems not hard to implement this.</p>\n"},{"tags":["java","spring-boot","spring-test"],"answers":[{"tags":[],"owner":{"account_id":27816216,"reputation":306,"user_id":21237557,"display_name":"Ruslan Zinovyev"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1695231389,"creation_date":1695231389,"answer_id":77144784,"question_id":77144500,"body_markdown":"From my perspective, your understanding is quite close to how **@SpringBootTest** works in the Spring Framework, especially when focusing on how the application context is loaded and what beans are initialized. \r\nThis annotation is often used for integration tests and ensures that the Spring context is loaded, mimicking the behavior of an actual running Spring Boot application. \r\n\r\nIf you provide an explicit **@Configuration** class using the classes attribute of **@SpringBootTest**, then only that configuration is used, and no scanning occurs. \r\nAll the required beans must be defined within that configuration class.\r\n\r\n    @SpringBootTest(classes = CustomConfiguration.class)\r\n\r\nIf you don&#39;t specify any **@Configuration** or **@TestConfiguration**, Spring will look for the primary configuration. It will scan upwards in the package structure starting from the package where your test class is defined until it finds a class annotated with **@SpringBootApplication**\r\n\r\n    @SpringBootTest\r\n\r\nOnce it locates the primary configuration, it will scan downwards from that point for all classes annotated with **@Configuration**, **@Component**, **@Service**, etc. and initialize the corresponding beans.\r\n\r\n\r\nIf you use **@TestConfiguration**, this is a special case. This annotation is used in conjunction with **@SpringBootTest** to define additional beans or to override existing beans for the test context only.\r\n\r\n\r\n    @TestConfiguration\r\n    public static class TestConfig {\r\n     &#160;&#160; // some beans\r\n    }\r\n\r\nWhen you use **@TestConfiguration**, Spring Boot still scans for the primary configuration in the manner described above. But the beans defined in **@TestConfiguration** will take precedence overriding any similarly named beans in the primary configuration.\r\n","title":"When and how exactly does @SpringBootTest scan?","body":"<p>From my perspective, your understanding is quite close to how <strong>@SpringBootTest</strong> works in the Spring Framework, especially when focusing on how the application context is loaded and what beans are initialized.\nThis annotation is often used for integration tests and ensures that the Spring context is loaded, mimicking the behavior of an actual running Spring Boot application.</p>\n<p>If you provide an explicit <strong>@Configuration</strong> class using the classes attribute of <strong>@SpringBootTest</strong>, then only that configuration is used, and no scanning occurs.\nAll the required beans must be defined within that configuration class.</p>\n<pre><code>@SpringBootTest(classes = CustomConfiguration.class)\n</code></pre>\n<p>If you don't specify any <strong>@Configuration</strong> or <strong>@TestConfiguration</strong>, Spring will look for the primary configuration. It will scan upwards in the package structure starting from the package where your test class is defined until it finds a class annotated with <strong>@SpringBootApplication</strong></p>\n<pre><code>@SpringBootTest\n</code></pre>\n<p>Once it locates the primary configuration, it will scan downwards from that point for all classes annotated with <strong>@Configuration</strong>, <strong>@Component</strong>, <strong>@Service</strong>, etc. and initialize the corresponding beans.</p>\n<p>If you use <strong>@TestConfiguration</strong>, this is a special case. This annotation is used in conjunction with <strong>@SpringBootTest</strong> to define additional beans or to override existing beans for the test context only.</p>\n<pre><code>@TestConfiguration\npublic static class TestConfig {\n    // some beans\n}\n</code></pre>\n<p>When you use <strong>@TestConfiguration</strong>, Spring Boot still scans for the primary configuration in the manner described above. But the beans defined in <strong>@TestConfiguration</strong> will take precedence overriding any similarly named beans in the primary configuration.</p>\n"}],"owner":{"account_id":28965224,"reputation":321,"user_id":22186847,"display_name":"JoreJoh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1695231389,"creation_date":1695228771,"question_id":77144500,"body_markdown":"How exactly does `@SpringBootTest` scan? My current understanding is this:\r\n\r\n1. **If you pass a `@Configuration`**, it doesn&#39;t scan at all and is happy with that configuration class&#39;s beans\r\n\r\n2. **If you don&#39;t pass any configuration or pass a `@TestConfiguration`**, it scans down (the test root) and then up (the source root) until it finds a `@SpringBootConfiguration` class (or `@SpringBootApplication` that incorporates it) and then scans down for &quot;real&quot; configuration classes (those marked with `@Configuration`) and takes their beans (both declared and scanned)\r\n\r\nWhat actually happens?","title":"When and how exactly does @SpringBootTest scan?","body":"<p>How exactly does <code>@SpringBootTest</code> scan? My current understanding is this:</p>\n<ol>\n<li><p><strong>If you pass a <code>@Configuration</code></strong>, it doesn't scan at all and is happy with that configuration class's beans</p>\n</li>\n<li><p><strong>If you don't pass any configuration or pass a <code>@TestConfiguration</code></strong>, it scans down (the test root) and then up (the source root) until it finds a <code>@SpringBootConfiguration</code> class (or <code>@SpringBootApplication</code> that incorporates it) and then scans down for &quot;real&quot; configuration classes (those marked with <code>@Configuration</code>) and takes their beans (both declared and scanned)</p>\n</li>\n</ol>\n<p>What actually happens?</p>\n"},{"tags":["java","elasticsearch","spring-data-elasticsearch"],"answers":[{"comments":[{"owner":{"account_id":7307904,"reputation":37,"user_id":6295841,"display_name":"User1254"},"score":0,"creation_date":1695356124,"post_id":77144781,"comment_id":136016198,"body_markdown":"Which version you would recommend? Also seems spring boot cannot autowire ReactiveElasticsearchIndicesClient. Instead I used reactiveElasticsearchClient.indices().stats(). Thanks for answer. :)","body":"Which version you would recommend? Also seems spring boot cannot autowire ReactiveElasticsearchIndicesClient. Instead I used reactiveElasticsearchClient.indices().stats(). Thanks for answer. :)"}],"tags":[],"owner":{"account_id":5534873,"reputation":18496,"user_id":4393565,"accept_rate":67,"display_name":"P.J.Meisch"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1695231357,"creation_date":1695231357,"answer_id":77144781,"question_id":77103134,"body_markdown":"You need to use `ReactiveElasticsearchIndicesClient.stats(IndicesStatsRequest)` to get the information about index statistics.\r\n\r\nbtw, using Spring Data Elasticsearch 5.1 against Elasticsearch is not tested.","title":"Spring data elasticsearch document count info using built in reactive client","body":"<p>You need to use <code>ReactiveElasticsearchIndicesClient.stats(IndicesStatsRequest)</code> to get the information about index statistics.</p>\n<p>btw, using Spring Data Elasticsearch 5.1 against Elasticsearch is not tested.</p>\n"}],"owner":{"account_id":7307904,"reputation":37,"user_id":6295841,"display_name":"User1254"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":112,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77144781,"answer_count":1,"score":0,"last_activity_date":1695231357,"creation_date":1694680653,"question_id":77103134,"body_markdown":"My problem:\r\n\r\nI am trying to get indices information:\r\n\r\n```\r\nIndexName\r\nIndexCreationDate\r\nIndexAlias\r\nIndexDocumentCount\r\nIndexSize\r\n```\r\nI am able to get some of that information via ```GetIndexResponse``` mentioned below. Which holds alias, mapping and setting objects. However none of them have ```IndexDocumentCount``` and ```IndexSize```. How to get that info using ```ReactiveElasticSearchClient```? \r\n\r\nI know there is a curl call which holds everything I need, but I thought there are posibilities using spring boot elastic built in java objects? \r\n```\r\n{{elastic-search-url}}/_cat/indices?v\r\n```\r\n\r\nI am using: \r\n\r\n```\r\nELK : 7.17\r\nSpring boot: spring-data-elasticsearch 5.1.3\r\n```\r\n```\r\nReactiveElasticsearchIndicesClient indices = reactiveElasticsearchClient.indices();\r\n\r\nMono&lt;GetIndexResponse&gt; getIndexResponseMono = indices.get(new GetIndexRequest.Builder().index(&quot;*&quot;).build());\r\nGetIndexResponse block = getIndexResponseMono.block();\r\n```\r\n\r\n","title":"Spring data elasticsearch document count info using built in reactive client","body":"<p>My problem:</p>\n<p>I am trying to get indices information:</p>\n<pre><code>IndexName\nIndexCreationDate\nIndexAlias\nIndexDocumentCount\nIndexSize\n</code></pre>\n<p>I am able to get some of that information via <code>GetIndexResponse</code> mentioned below. Which holds alias, mapping and setting objects. However none of them have <code>IndexDocumentCount</code> and <code>IndexSize</code>. How to get that info using <code>ReactiveElasticSearchClient</code>?</p>\n<p>I know there is a curl call which holds everything I need, but I thought there are posibilities using spring boot elastic built in java objects?</p>\n<pre><code>{{elastic-search-url}}/_cat/indices?v\n</code></pre>\n<p>I am using:</p>\n<pre><code>ELK : 7.17\nSpring boot: spring-data-elasticsearch 5.1.3\n</code></pre>\n<pre><code>ReactiveElasticsearchIndicesClient indices = reactiveElasticsearchClient.indices();\n\nMono&lt;GetIndexResponse&gt; getIndexResponseMono = indices.get(new GetIndexRequest.Builder().index(&quot;*&quot;).build());\nGetIndexResponse block = getIndexResponseMono.block();\n</code></pre>\n"},{"tags":["java","sorting","set"],"comments":[{"owner":{"account_id":324610,"reputation":18889,"user_id":645270,"accept_rate":100,"display_name":"keyser"},"score":4,"creation_date":1337941781,"post_id":10752753,"comment_id":13973986,"body_markdown":"&quot;The elements are returned in no particular order (unless this set is an instance of some class that provides a guarantee).&quot; is what the iterator method for a set says. found [here](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Set.html)","body":"&quot;The elements are returned in no particular order (unless this set is an instance of some class that provides a guarantee).&quot; is what the iterator method for a set says. found <a href=\"http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Set.html\" rel=\"nofollow noreferrer\">here</a>"}],"answers":[{"comments":[{"owner":{"account_id":68984,"reputation":7426,"user_id":200985,"accept_rate":97,"display_name":"lmat - Reinstate Monica"},"score":46,"creation_date":1370556219,"post_id":10752792,"comment_id":24516037,"body_markdown":"A `List` is not a `Set` (it doesn&#39;t guarantee uniqueness of membership).","body":"A <code>List</code> is not a <code>Set</code> (it doesn&#39;t guarantee uniqueness of membership)."},{"owner":{"account_id":1098776,"reputation":439,"user_id":1091740,"display_name":"gubs"},"score":14,"creation_date":1436456091,"post_id":10752792,"comment_id":50630913,"body_markdown":"In many business unique cases List can&#39;t be used just to retain order instead of Set.  LinkedHashSet maintains order and stores unique.","body":"In many business unique cases List can&#39;t be used just to retain order instead of Set.  LinkedHashSet maintains order and stores unique."}],"tags":[],"owner":{"account_id":317159,"reputation":8327,"user_id":633684,"display_name":"xiaofeng.li"},"comment_count":2,"down_vote_count":1,"up_vote_count":148,"is_accepted":false,"score":147,"last_activity_date":1463163309,"creation_date":1337941760,"answer_id":10752792,"question_id":10752753,"body_markdown":"[LinkedHashSet][1] is what you need.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashSet.html","title":"Java Set retain order?","body":"<p><a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashSet.html\">LinkedHashSet</a> is what you need.</p>\n"},{"tags":[],"owner":{"account_id":1469954,"reputation":1916,"user_id":1381767,"accept_rate":75,"display_name":"javatutorial"},"comment_count":0,"down_vote_count":1,"up_vote_count":19,"is_accepted":false,"score":18,"last_activity_date":1337941785,"creation_date":1337941785,"answer_id":10752796,"question_id":10752753,"body_markdown":"Set is just an interface. In order to retain order, you have to use a specific implementation of that interface and the sub-interface SortedSet, for example TreeSet or LinkedHashSet. You can wrap your Set this way:\r\n\r\n    Set myOrderedSet = new LinkedHashSet(mySet);","title":"Java Set retain order?","body":"<p>Set is just an interface. In order to retain order, you have to use a specific implementation of that interface and the sub-interface SortedSet, for example TreeSet or LinkedHashSet. You can wrap your Set this way:</p>\n\n<pre><code>Set myOrderedSet = new LinkedHashSet(mySet);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1024230,"reputation":120585,"user_id":1033896,"accept_rate":71,"display_name":"hmjd"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1337941811,"creation_date":1337941811,"answer_id":10752803,"question_id":10752753,"body_markdown":"From the javadoc for `Set.iterator()`:\r\n\r\n&gt;Returns an iterator over the elements in this set. The elements are returned in no particular order (unless this set is an instance of some class that provides a guarantee). \r\n\r\nAnd, as already stated by [shuuchan](https://stackoverflow.com/users/1381767/shuuchan), a `TreeSet` is an implemention of `Set` that has a guaranteed order:\r\n\r\n&gt;The elements are ordered using their natural ordering, or by a Comparator provided at set creation time, depending on which constructor is used. \r\n\r\n","title":"Java Set retain order?","body":"<p>From the javadoc for <code>Set.iterator()</code>:</p>\n\n<blockquote>\n  <p>Returns an iterator over the elements in this set. The elements are returned in no particular order (unless this set is an instance of some class that provides a guarantee). </p>\n</blockquote>\n\n<p>And, as already stated by <a href=\"https://stackoverflow.com/users/1381767/shuuchan\">shuuchan</a>, a <code>TreeSet</code> is an implemention of <code>Set</code> that has a guaranteed order:</p>\n\n<blockquote>\n  <p>The elements are ordered using their natural ordering, or by a Comparator provided at set creation time, depending on which constructor is used. </p>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":225072,"reputation":81659,"user_id":485343,"accept_rate":75,"display_name":"rustyx"},"score":25,"creation_date":1416240913,"post_id":10752804,"comment_id":42488509,"body_markdown":"Furthermore, due to the [different String hashing](http://permalink.gmane.org/gmane.comp.java.openjdk.core-libs.devel/10361) in Java 8, the default (unsorted) ordering in Sets and Maps will change. If you rely on unsorted ordering, your code will behave differently under Java 8.","body":"Furthermore, due to the <a href=\"http://permalink.gmane.org/gmane.comp.java.openjdk.core-libs.devel/10361\" rel=\"nofollow noreferrer\">different String hashing</a> in Java 8, the default (unsorted) ordering in Sets and Maps will change. If you rely on unsorted ordering, your code will behave differently under Java 8."},{"owner":{"account_id":1212752,"reputation":746,"user_id":1180993,"display_name":"White_King"},"score":0,"creation_date":1551083957,"post_id":10752804,"comment_id":96495152,"body_markdown":"I get that the class not ordering is normal, but the behavior I was expecting was to leave them as they were introduced and not mess with the order, instead it is just shuffling the elements each time one is aggregated.\nYour solution is not optimal wither because then I will have to implement a whole structure for them to be sorted THE SAME WAY they were introduced :S","body":"I get that the class not ordering is normal, but the behavior I was expecting was to leave them as they were introduced and not mess with the order, instead it is just shuffling the elements each time one is aggregated. Your solution is not optimal wither because then I will have to implement a whole structure for them to be sorted THE SAME WAY they were introduced :S"},{"owner":{"account_id":171499,"reputation":11291,"user_id":398963,"accept_rate":60,"display_name":"Konrad H&#246;ffner"},"score":1,"creation_date":1565347988,"post_id":10752804,"comment_id":101334979,"body_markdown":"@White_King: A set is a mathematical concept that does not contain the notion of &quot;insertion order&quot; so it makes sense for the Java interface to follow its conventions. There are ordered sets but the order is specified by a relation (comparator in Java), again matching the definition in set theory with the definition in Java. Your expectation of it keeping insertion order probably comes from lists but sets are not lists.","body":"@White_King: A set is a mathematical concept that does not contain the notion of &quot;insertion order&quot; so it makes sense for the Java interface to follow its conventions. There are ordered sets but the order is specified by a relation (comparator in Java), again matching the definition in set theory with the definition in Java. Your expectation of it keeping insertion order probably comes from lists but sets are not lists."}],"tags":[],"owner":{"account_id":152622,"reputation":490044,"user_id":367273,"accept_rate":96,"display_name":"NPE"},"comment_count":3,"down_vote_count":0,"up_vote_count":357,"is_accepted":true,"score":357,"last_activity_date":1537696576,"creation_date":1337941812,"answer_id":10752804,"question_id":10752753,"body_markdown":"The [`Set`][1] interface does not provide any ordering guarantees.\r\n\r\nIts sub-interface [`SortedSet`][2] represents a set that is sorted according to some criterion. In Java 6, there are two standard containers that implement `SortedSet`. They are [`TreeSet`][3] and [`ConcurrentSkipListSet`][4].\r\n\r\nIn addition to the `SortedSet` interface, there is also the [`LinkedHashSet`][5] class. It remembers the order in which the elements were inserted into the set, and returns its elements in that order.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/api/java/util/Set.html\r\n  [2]: http://docs.oracle.com/javase/6/docs/api/java/util/SortedSet.html\r\n  [3]: http://docs.oracle.com/javase/6/docs/api/java/util/TreeSet.html\r\n  [4]: http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentSkipListSet.html\r\n  [5]: http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashSet.html","title":"Java Set retain order?","body":"<p>The <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/Set.html\" rel=\"noreferrer\"><code>Set</code></a> interface does not provide any ordering guarantees.</p>\n\n<p>Its sub-interface <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/SortedSet.html\" rel=\"noreferrer\"><code>SortedSet</code></a> represents a set that is sorted according to some criterion. In Java 6, there are two standard containers that implement <code>SortedSet</code>. They are <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/TreeSet.html\" rel=\"noreferrer\"><code>TreeSet</code></a> and <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentSkipListSet.html\" rel=\"noreferrer\"><code>ConcurrentSkipListSet</code></a>.</p>\n\n<p>In addition to the <code>SortedSet</code> interface, there is also the <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashSet.html\" rel=\"noreferrer\"><code>LinkedHashSet</code></a> class. It remembers the order in which the elements were inserted into the set, and returns its elements in that order.</p>\n"},{"tags":[],"owner":{"account_id":1408752,"reputation":1082,"user_id":1335794,"accept_rate":17,"display_name":"user1335794"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1337941844,"creation_date":1337941844,"answer_id":10752813,"question_id":10752753,"body_markdown":"Normally set does not keep the order, such as HashSet in order to quickly find a emelent, but you can try LinkedHashSet it will keep the order which you put in.","title":"Java Set retain order?","body":"<p>Normally set does not keep the order, such as HashSet in order to quickly find a emelent, but you can try LinkedHashSet it will keep the order which you put in.</p>\n"},{"tags":[],"owner":{"account_id":71958,"reputation":753,"user_id":207935,"display_name":"Jens Borgland"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1337941858,"creation_date":1337941858,"answer_id":10752818,"question_id":10752753,"body_markdown":"The Set interface itself does not stipulate any particular order. The [SortedSet][1] does however. \r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/api/java/util/SortedSet.html","title":"Java Set retain order?","body":"<p>The Set interface itself does not stipulate any particular order. The <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/SortedSet.html\" rel=\"nofollow\">SortedSet</a> does however. </p>\n"},{"comments":[{"owner":{"account_id":1114067,"reputation":196801,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":1,"creation_date":1337943137,"post_id":10752821,"comment_id":13974464,"body_markdown":"It&#39;s `LinkedHashSet`, not ...`Map`.","body":"It&#39;s <code>LinkedHashSet</code>, not ...<code>Map</code>."},{"owner":{"account_id":1212752,"reputation":746,"user_id":1180993,"display_name":"White_King"},"score":0,"creation_date":1565360510,"post_id":10752821,"comment_id":101342198,"body_markdown":"I need a Set not a List, I need a Set that ALSO retains the order of injection of the objects I guess","body":"I need a Set not a List, I need a Set that ALSO retains the order of injection of the objects I guess"}],"tags":[],"owner":{"account_id":1458820,"reputation":7821,"user_id":1373711,"accept_rate":83,"display_name":"JHS"},"comment_count":2,"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1337943211,"creation_date":1337941864,"answer_id":10752821,"question_id":10752753,"body_markdown":"To retain the order use `List` or a `LinkedHashSet`.","title":"Java Set retain order?","body":"<p>To retain the order use <code>List</code> or a <code>LinkedHashSet</code>.</p>\n"},{"tags":[],"owner":{"account_id":1503465,"reputation":1125,"user_id":1407398,"display_name":"ejb_guy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1337941906,"creation_date":1337941906,"answer_id":10752826,"question_id":10752753,"body_markdown":"Iterator returned by Set is not suppose to return data in Ordered way. \r\nSee this https://stackoverflow.com/questions/10734953/two-java-util-iterators-to-the-same-collection-do-they-have-to-return-elements/10735036#10735036","title":"Java Set retain order?","body":"<p>Iterator returned by Set is not suppose to return data in Ordered way. \nSee this <a href=\"https://stackoverflow.com/questions/10734953/two-java-util-iterators-to-the-same-collection-do-they-have-to-return-elements/10735036#10735036\">Two java.util.Iterators to the same collection: do they have to return elements in the same order?</a></p>\n"},{"comments":[{"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"score":0,"creation_date":1337942576,"post_id":10752848,"comment_id":13974298,"body_markdown":"The question is about retaining the insertion order (which happens to be sorted).","body":"The question is about retaining the insertion order (which happens to be sorted)."}],"tags":[],"owner":{"display_name":"user1417163"},"comment_count":1,"down_vote_count":3,"up_vote_count":1,"is_accepted":false,"score":-2,"last_activity_date":1337941995,"creation_date":1337941995,"answer_id":10752848,"question_id":10752753,"body_markdown":"Only `SortedSet` can do the ordering of the `Set`","title":"Java Set retain order?","body":"<p>Only <code>SortedSet</code> can do the ordering of the <code>Set</code></p>\n"},{"tags":[],"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1337942478,"creation_date":1337942160,"answer_id":10752900,"question_id":10752753,"body_markdown":"Here is a quick summary of the order characteristics of the standard `Set` implementations available in Java:\r\n\r\n1. keep the insertion order: [LinkedHashSet][1] and [CopyOnWriteArraySet][4] (thread-safe)\r\n2. keep the items sorted within the set: [TreeSet][2], [EnumSet][5] (specific to enums) and [ConcurrentSkipListSet][3] (thread-safe)\r\n3. does not keep the items in any specific order: [HashSet][6] (the one you tried)\r\n\r\nFor your specific case, you can either sort the items first and then use any of 1 or 2 (most likely `LinkedHashSet` or `TreeSet`). Or alternatively and **more efficiently**, you can just add unsorted data to a `TreeSet` which will take care of the sorting automatically for you.\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/util/LinkedHashSet.html\r\n  [2]: http://docs.oracle.com/javase/7/docs/api/java/util/TreeSet.html\r\n  [3]: http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ConcurrentSkipListSet.html\r\n  [4]: http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CopyOnWriteArraySet.html\r\n  [5]: http://docs.oracle.com/javase/7/docs/api/java/util/EnumSet.html\r\n  [6]: http://docs.oracle.com/javase/7/docs/api/java/util/HashSet.html","title":"Java Set retain order?","body":"<p>Here is a quick summary of the order characteristics of the standard <code>Set</code> implementations available in Java:</p>\n\n<ol>\n<li>keep the insertion order: <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/LinkedHashSet.html\" rel=\"noreferrer\">LinkedHashSet</a> and <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CopyOnWriteArraySet.html\" rel=\"noreferrer\">CopyOnWriteArraySet</a> (thread-safe)</li>\n<li>keep the items sorted within the set: <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/TreeSet.html\" rel=\"noreferrer\">TreeSet</a>, <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/EnumSet.html\" rel=\"noreferrer\">EnumSet</a> (specific to enums) and <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ConcurrentSkipListSet.html\" rel=\"noreferrer\">ConcurrentSkipListSet</a> (thread-safe)</li>\n<li>does not keep the items in any specific order: <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/HashSet.html\" rel=\"noreferrer\">HashSet</a> (the one you tried)</li>\n</ol>\n\n<p>For your specific case, you can either sort the items first and then use any of 1 or 2 (most likely <code>LinkedHashSet</code> or <code>TreeSet</code>). Or alternatively and <strong>more efficiently</strong>, you can just add unsorted data to a <code>TreeSet</code> which will take care of the sorting automatically for you.</p>\n"},{"tags":[],"owner":{"account_id":2036969,"reputation":300,"user_id":1819092,"display_name":"Lakshman"},"comment_count":0,"down_vote_count":1,"up_vote_count":20,"is_accepted":false,"score":19,"last_activity_date":1511547806,"creation_date":1354865430,"answer_id":13758779,"question_id":10752753,"body_markdown":"As many of the members suggested use **LinkedHashSet** to retain the order of the collection.\r\nU can wrap your set using this implementation.\r\n\r\n**SortedSet** implementation can be used for sorted order but for your purpose use **LinkedHashSet**.\r\n\r\nAlso from the docs, \r\n\r\n&quot;This implementation spares its clients from the unspecified, generally chaotic ordering provided by HashSet, without incurring the increased cost associated with TreeSet. It can be used to produce a copy of a set that has the same order as the original, regardless of the original set&#39;s implementation:&quot;\r\n\r\nSource : http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashSet.html","title":"Java Set retain order?","body":"<p>As many of the members suggested use <strong>LinkedHashSet</strong> to retain the order of the collection.\nU can wrap your set using this implementation.</p>\n\n<p><strong>SortedSet</strong> implementation can be used for sorted order but for your purpose use <strong>LinkedHashSet</strong>.</p>\n\n<p>Also from the docs, </p>\n\n<p>\"This implementation spares its clients from the unspecified, generally chaotic ordering provided by HashSet, without incurring the increased cost associated with TreeSet. It can be used to produce a copy of a set that has the same order as the original, regardless of the original set's implementation:\"</p>\n\n<p>Source : <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashSet.html\" rel=\"noreferrer\">http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashSet.html</a></p>\n"},{"tags":[],"owner":{"account_id":7406733,"reputation":633,"user_id":5635466,"display_name":"Danail Tsvetanov"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1522843092,"creation_date":1522843092,"answer_id":49650415,"question_id":10752753,"body_markdown":"A LinkedHashSet is an ordered version of HashSet that maintains a doubly-linked List across all elements. Use this class instead of HashSet when you care about the iteration order.","title":"Java Set retain order?","body":"<p>A LinkedHashSet is an ordered version of HashSet that maintains a doubly-linked List across all elements. Use this class instead of HashSet when you care about the iteration order.</p>\n"},{"tags":[],"owner":{"account_id":3349506,"reputation":76,"user_id":2813820,"display_name":"Aruna"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1572464295,"creation_date":1570031058,"answer_id":58204944,"question_id":10752753,"body_markdown":"There are 2 different things.\r\n\r\n1. Sort the elements in a set. For which we have SortedSet and similar implementations. \r\n2. Maintain insertion order in a set. For which LinkedHashSet and CopyOnWriteArraySet (thread-safe) can be used.","title":"Java Set retain order?","body":"<p>There are 2 different things.</p>\n\n<ol>\n<li>Sort the elements in a set. For which we have SortedSet and similar implementations. </li>\n<li>Maintain insertion order in a set. For which LinkedHashSet and CopyOnWriteArraySet (thread-safe) can be used.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695231079,"creation_date":1686602973,"answer_id":76460236,"question_id":10752753,"body_markdown":"The `Set` interface does not require a well-defined encounter order, a fact which is explicitly called out in the Javadocs for its [`iterator`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Set.html#iterator()) method:\r\n\r\n&gt; Returns an iterator over the elements in this set. The elements are returned in no particular order (unless this set is an instance of some class that provides a guarantee).\r\n\r\nJava 21 introduced the [`SequencedSet`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Set.html) interface, which is a subinterface of `Set` that also requires that the implementation have a well-defined encounter order.  Both `LinkedHashSet` and `SortedSet` implement/extend this new interface.\r\n\r\nIf both encounter order and `Set` semantics are important, an implementation of `SequencedSet` can be used to achieve the desired behavior.","title":"Java Set retain order?","body":"<p>The <code>Set</code> interface does not require a well-defined encounter order, a fact which is explicitly called out in the Javadocs for its <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Set.html#iterator()\" rel=\"nofollow noreferrer\"><code>iterator</code></a> method:</p>\n<blockquote>\n<p>Returns an iterator over the elements in this set. The elements are returned in no particular order (unless this set is an instance of some class that provides a guarantee).</p>\n</blockquote>\n<p>Java 21 introduced the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Set.html\" rel=\"nofollow noreferrer\"><code>SequencedSet</code></a> interface, which is a subinterface of <code>Set</code> that also requires that the implementation have a well-defined encounter order.  Both <code>LinkedHashSet</code> and <code>SortedSet</code> implement/extend this new interface.</p>\n<p>If both encounter order and <code>Set</code> semantics are important, an implementation of <code>SequencedSet</code> can be used to achieve the desired behavior.</p>\n"}],"owner":{"account_id":447352,"reputation":5292,"user_id":840930,"accept_rate":82,"display_name":"user840930"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":287990,"favorite_count":0,"down_vote_count":4,"up_vote_count":247,"accepted_answer_id":10752804,"answer_count":14,"score":243,"last_activity_date":1695231079,"creation_date":1337941621,"question_id":10752753,"body_markdown":"Does a Java Set retain order?  A method is returning a Set to me and supposedly the data is ordered but iterating over the Set, the data is unordered.  Is there a better way to manage this? Does the method need to be changed to return something other than a Set?","title":"Java Set retain order?","body":"<p>Does a Java Set retain order?  A method is returning a Set to me and supposedly the data is ordered but iterating over the Set, the data is unordered.  Is there a better way to manage this? Does the method need to be changed to return something other than a Set?</p>\n"},{"tags":["java","eclipse","fonts"],"answers":[{"comments":[{"owner":{"account_id":2651121,"reputation":4898,"user_id":2292766,"accept_rate":80,"display_name":"Hannes Schneidermayer"},"score":4,"creation_date":1534940019,"post_id":27583444,"comment_id":90883121,"body_markdown":"In my version of Eclipse Photon with Dark theme `Consolas` is the right answer.","body":"In my version of Eclipse Photon with Dark theme <code>Consolas</code> is the right answer."}],"tags":[],"owner":{"account_id":2818342,"reputation":299906,"user_id":2422776,"display_name":"Mureinik"},"comment_count":1,"down_vote_count":1,"up_vote_count":16,"is_accepted":true,"score":15,"last_activity_date":1419102693,"creation_date":1419102693,"answer_id":27583444,"question_id":27583403,"body_markdown":"The default font Eclipse uses for (Java) code is Monospace.","title":"Eclipse Default Font name","body":"<p>The default font Eclipse uses for (Java) code is Monospace.</p>\n"},{"tags":[],"owner":{"account_id":5851030,"reputation":526,"user_id":4609700,"display_name":"Crenguta S"},"comment_count":0,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1457503172,"creation_date":1457503172,"answer_id":35884068,"question_id":27583403,"body_markdown":"Depending on your Eclipse version, the font might differ. Go to Window-&gt; Preferences-&gt;General-&gt;Appearance-&gt;Color and Fonts. Choose Basic-&gt;Text Font and you can hit the Edit button to change font type and font size. It will be used by several other properties below that default to this font.","title":"Eclipse Default Font name","body":"<p>Depending on your Eclipse version, the font might differ. Go to Window-> Preferences->General->Appearance->Color and Fonts. Choose Basic->Text Font and you can hit the Edit button to change font type and font size. It will be used by several other properties below that default to this font.</p>\n"},{"tags":[],"owner":{"account_id":11913918,"reputation":183,"user_id":8718319,"display_name":"Rajiv"},"comment_count":0,"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1513773127,"creation_date":1513768910,"answer_id":47904863,"question_id":27583403,"body_markdown":"The default font style eclipse is using is `Consolas` however `Courier New` is also a good option to go with.","title":"Eclipse Default Font name","body":"<p>The default font style eclipse is using is <code>Consolas</code> however <code>Courier New</code> is also a good option to go with.</p>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1695354414,"post_id":77144756,"comment_id":136016085,"body_markdown":"As it’s currently written, your answer is unclear. Please [edit] to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"As it’s currently written, your answer is unclear. Please <a href=\"https://stackoverflow.com/posts/77144756/edit\">edit</a> to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":10490756,"reputation":1,"user_id":7732729,"display_name":"Vishal Sharma"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695231048,"creation_date":1695231048,"answer_id":77144756,"question_id":27583403,"body_markdown":"For the Code, we see It&#39;s Menlo with font size as 14","title":"Eclipse Default Font name","body":"<p>For the Code, we see It's Menlo with font size as 14</p>\n"}],"owner":{"display_name":"user3265784"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":28893,"favorite_count":0,"down_vote_count":0,"up_vote_count":19,"accepted_answer_id":27583444,"answer_count":4,"score":19,"last_activity_date":1695231048,"creation_date":1419102287,"question_id":27583403,"body_markdown":"What&#39;s the default font that Eclipse uses for Java code?","title":"Eclipse Default Font name","body":"<p>What's the default font that Eclipse uses for Java code?</p>\n"},{"tags":["java","hashset","sublist","linkedhashset"],"answers":[{"comments":[{"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"score":0,"creation_date":1694710567,"post_id":36526438,"comment_id":135930506,"body_markdown":"You can have this return a `LinkedHashSet` by changing the collector: `.collect(toCollection(LinkedHashSet::new))`.","body":"You can have this return a <code>LinkedHashSet</code> by changing the collector: <code>.collect(toCollection(LinkedHashSet::new))</code>."}],"tags":[],"owner":{"account_id":6130581,"reputation":511,"user_id":4780910,"display_name":"grebesche"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1460268292,"creation_date":1460268292,"answer_id":36526438,"question_id":36526324,"body_markdown":"If you use Java 8 and you are ok to get back a `HashSet` (instead of a `LinkedHashSet`), you can use the Stream API:\r\n\r\n    Set&lt;String&gt; newSet = set.stream()\r\n                            .skip(set.size() - 5)\r\n                            .collect(Collectors.&lt;String&gt;toSet());","title":"Get a sublist last 5 elements of LinkedHashSet?","body":"<p>If you use Java 8 and you are ok to get back a <code>HashSet</code> (instead of a <code>LinkedHashSet</code>), you can use the Stream API:</p>\n\n<pre><code>Set&lt;String&gt; newSet = set.stream()\n                        .skip(set.size() - 5)\n                        .collect(Collectors.&lt;String&gt;toSet());\n</code></pre>\n"},{"comments":[{"owner":{"account_id":12404,"reputation":62016,"user_id":24396,"accept_rate":74,"display_name":"Steve Kuo"},"score":0,"creation_date":1460270057,"post_id":36526566,"comment_id":60657560,"body_markdown":"Your test is flawed. The second test case benefits from the first case having warmed up the cache. Each test needs to be run in its own runtime invocation.","body":"Your test is flawed. The second test case benefits from the first case having warmed up the cache. Each test needs to be run in its own runtime invocation."},{"owner":{"account_id":1646146,"reputation":253,"user_id":1517668,"display_name":"muzahidbechara"},"score":0,"creation_date":1460270218,"post_id":36526566,"comment_id":60657589,"body_markdown":"@SteveKuo No matter I ran both individually And got better performance :)","body":"@SteveKuo No matter I ran both individually And got better performance :)"}],"tags":[],"owner":{"account_id":1646146,"reputation":253,"user_id":1517668,"display_name":"muzahidbechara"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1460269969,"creation_date":1460269437,"answer_id":36526566,"question_id":36526324,"body_markdown":"Using ``ArrayList`` you could get a better performance:\r\n\r\n\tlong s1 = System.nanoTime();\r\n\tLinkedHashSet&lt;String&gt; last5 = new LinkedHashSet&lt;String&gt;(new LinkedList&lt;String&gt;(set)\r\n\t\t\t.subList(Math.max(0, set.size() - 5), set.size()));\r\n\tSystem.out.println(System.nanoTime() - s1);\r\n\t\r\n\ts1 = System.nanoTime();\r\n\tLinkedHashSet&lt;String&gt; usingArrayList = new LinkedHashSet&lt;String&gt;(new ArrayList&lt;String&gt;(set)\r\n\t\t\t.subList(Math.max(0, set.size() - 5), set.size()));\r\n\tSystem.out.println(System.nanoTime() - s1);","title":"Get a sublist last 5 elements of LinkedHashSet?","body":"<p>Using <code>ArrayList</code> you could get a better performance:</p>\n\n<pre><code>long s1 = System.nanoTime();\nLinkedHashSet&lt;String&gt; last5 = new LinkedHashSet&lt;String&gt;(new LinkedList&lt;String&gt;(set)\n        .subList(Math.max(0, set.size() - 5), set.size()));\nSystem.out.println(System.nanoTime() - s1);\n\ns1 = System.nanoTime();\nLinkedHashSet&lt;String&gt; usingArrayList = new LinkedHashSet&lt;String&gt;(new ArrayList&lt;String&gt;(set)\n        .subList(Math.max(0, set.size() - 5), set.size()));\nSystem.out.println(System.nanoTime() - s1);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1460272060,"creation_date":1460271660,"answer_id":36526891,"question_id":36526324,"body_markdown":"Here&#39;s the problem.  The iterators for a `LinkedHashSet` are unidirectional; i.e. you can&#39;t iterate backwards, even though the underlying data structure has a doubly-linked list.  That means to get the last N you need to iterate to the end of the list.  That is `O(N)`.\r\n\r\nIn your algorithm, the `LinkedList` constructor is copying the set into a new data structure using (probably) the iterator.\r\n\r\nBy contrast, the `TreeSet` API has an `descendingIterator()` method that returns an `Iterator` that iterates backwards through the list.  If you use that correctly, you can get the last 5 elements of the set in `O(1)`.  The downside is that adding elements to the set will be `O(logN)` instead of `O(1)` for a hash-based set.","title":"Get a sublist last 5 elements of LinkedHashSet?","body":"<p>Here's the problem.  The iterators for a <code>LinkedHashSet</code> are unidirectional; i.e. you can't iterate backwards, even though the underlying data structure has a doubly-linked list.  That means to get the last N you need to iterate to the end of the list.  That is <code>O(N)</code>.</p>\n\n<p>In your algorithm, the <code>LinkedList</code> constructor is copying the set into a new data structure using (probably) the iterator.</p>\n\n<p>By contrast, the <code>TreeSet</code> API has an <code>descendingIterator()</code> method that returns an <code>Iterator</code> that iterates backwards through the list.  If you use that correctly, you can get the last 5 elements of the set in <code>O(1)</code>.  The downside is that adding elements to the set will be <code>O(logN)</code> instead of <code>O(1)</code> for a hash-based set.</p>\n"},{"comments":[{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1460327873,"post_id":36528221,"comment_id":60676305,"body_markdown":"Please explain how this relates to the question that you asked.  How does it meet your stated requirements / actual requirements?  How are you using it?","body":"Please explain how this relates to the question that you asked.  How does it meet your stated requirements / actual requirements?  How are you using it?"}],"tags":[],"owner":{"account_id":3536268,"reputation":1201,"user_id":2954496,"accept_rate":88,"display_name":"Bob"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1460281682,"creation_date":1460281682,"answer_id":36528221,"question_id":36526324,"body_markdown":"I ended up using this:\r\n\r\n    com.google.common.collect.EvictingQueue&lt;E&gt;\r\n    \r\n\r\nwith this you get to keep only the **last x elements**.\r\n\r\n    EvictingQueue&lt;String&gt; queue = EvictingQueue.create(5);","title":"Get a sublist last 5 elements of LinkedHashSet?","body":"<p>I ended up using this:</p>\n\n<pre><code>com.google.common.collect.EvictingQueue&lt;E&gt;\n</code></pre>\n\n<p>with this you get to keep only the <strong>last x elements</strong>.</p>\n\n<pre><code>EvictingQueue&lt;String&gt; queue = EvictingQueue.create(5);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695230983,"creation_date":1686603698,"answer_id":76460309,"question_id":36526324,"body_markdown":"This can be efficiently achieved using the [`reversed()`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/LinkedHashSet.html#reversed()) method added to `LinkedHashSet` in Java 21 as part of the [`SequencedSet`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedSet.html) interface.\r\n\r\n```lang-java\r\nLinkedHashSet&lt;String&gt; lastFive = new LinkedHashSet&lt;&gt;(set.reversed().stream()\r\n        .limit(5).toCollection(LinkedHashSet::new).reversed());\r\n```\r\n\r\nThis can be simplified to use the `reversed` `Set` directly if the returned set doesn&#39;t need to be a `LinkedHashSet`, but just a mutable `Set` with a well-defined iteration order and near-identical characteristics of a `LinkedHashSet`:\r\n\r\n```lang-java\r\nSequencedSet&lt;String&gt; lastFive = set.reversed().stream()\r\n        .limit(5).toCollection(LinkedHashSet::new).reversed();\r\n```","title":"Get a sublist last 5 elements of LinkedHashSet?","body":"<p>This can be efficiently achieved using the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/LinkedHashSet.html#reversed()\" rel=\"nofollow noreferrer\"><code>reversed()</code></a> method added to <code>LinkedHashSet</code> in Java 21 as part of the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedSet.html\" rel=\"nofollow noreferrer\"><code>SequencedSet</code></a> interface.</p>\n<pre class=\"lang-java prettyprint-override\"><code>LinkedHashSet&lt;String&gt; lastFive = new LinkedHashSet&lt;&gt;(set.reversed().stream()\n        .limit(5).toCollection(LinkedHashSet::new).reversed());\n</code></pre>\n<p>This can be simplified to use the <code>reversed</code> <code>Set</code> directly if the returned set doesn't need to be a <code>LinkedHashSet</code>, but just a mutable <code>Set</code> with a well-defined iteration order and near-identical characteristics of a <code>LinkedHashSet</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>SequencedSet&lt;String&gt; lastFive = set.reversed().stream()\n        .limit(5).toCollection(LinkedHashSet::new).reversed();\n</code></pre>\n"}],"owner":{"account_id":3536268,"reputation":1201,"user_id":2954496,"accept_rate":88,"display_name":"Bob"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1400,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":36528221,"answer_count":5,"score":1,"last_activity_date":1695230983,"creation_date":1460267315,"question_id":36526324,"body_markdown":"Is there a one liner to get the last 5 elements of a LinkedHashSet in a new LinkedHashSet?\r\n\r\nThis is what I currently have, but it&#39;s not very efficient:\r\n\r\n    new LinkedHashSet&lt;String&gt;(new LinkedList&lt;String&gt;(set)\r\n    .subList(Math.max(0, set.size() - 5), set.size());\r\n\r\nOr should I use for this case a TreeSet, SortedSet, HashSet ?","title":"Get a sublist last 5 elements of LinkedHashSet?","body":"<p>Is there a one liner to get the last 5 elements of a LinkedHashSet in a new LinkedHashSet?</p>\n\n<p>This is what I currently have, but it's not very efficient:</p>\n\n<pre><code>new LinkedHashSet&lt;String&gt;(new LinkedList&lt;String&gt;(set)\n.subList(Math.max(0, set.size() - 5), set.size());\n</code></pre>\n\n<p>Or should I use for this case a TreeSet, SortedSet, HashSet ?</p>\n"},{"tags":["java","oop","collections"],"comments":[{"owner":{"account_id":3282,"reputation":146296,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"score":0,"creation_date":1324041985,"post_id":8534763,"comment_id":10570963,"body_markdown":"Ordered or sorted? Ordered, you&#39;re probably best off with a `List`.","body":"Ordered or sorted? Ordered, you&#39;re probably best off with a <code>List</code>."},{"owner":{"account_id":23699,"reputation":5769,"user_id":59572,"display_name":"Fredrik"},"score":0,"creation_date":1324042033,"post_id":8534763,"comment_id":10570981,"body_markdown":"Because I cannot imagine why it would matter it is hard to answer but another alternative is to return a Set and write in the javadoc that it is ordered. The caller wouldn&#39;t typically care, would he? It is the same interface.","body":"Because I cannot imagine why it would matter it is hard to answer but another alternative is to return a Set and write in the javadoc that it is ordered. The caller wouldn&#39;t typically care, would he? It is the same interface."}],"answers":[{"comments":[{"owner":{"account_id":1047162,"reputation":4175,"user_id":1051927,"accept_rate":77,"display_name":"narek.gevorgyan"},"score":0,"creation_date":1324042535,"post_id":8534803,"comment_id":10571129,"body_markdown":"Thank you for SetUniqueList , good type, but it does not answers my question.","body":"Thank you for SetUniqueList , good type, but it does not answers my question."},{"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"score":0,"creation_date":1324042652,"post_id":8534803,"comment_id":10571164,"body_markdown":"It was a suggestion. The rest answers your question - that LinkedHashSet doesn&#39;t mean anything to the client.","body":"It was a suggestion. The rest answers your question - that LinkedHashSet doesn&#39;t mean anything to the client."}],"tags":[],"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"comment_count":2,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1324042769,"creation_date":1324041904,"answer_id":8534803,"question_id":8534763,"body_markdown":"You can return `SortedSet` - it means the items are sorted, and are unique.\r\n\r\nYou can also use `SetUniqueList` (from commons-collection) and return `List` (indicating in the javadoc that the elements are unique), or any set and return `Set` (and indicate the ordered property in javadoc)\r\n\r\n`LinkedHashSet` retains the insertion order, but since your object is likely doing the inserts, it means nothing to the client.","title":"LinkedHashSet as a returning type of API public method","body":"<p>You can return <code>SortedSet</code> - it means the items are sorted, and are unique.</p>\n\n<p>You can also use <code>SetUniqueList</code> (from commons-collection) and return <code>List</code> (indicating in the javadoc that the elements are unique), or any set and return <code>Set</code> (and indicate the ordered property in javadoc)</p>\n\n<p><code>LinkedHashSet</code> retains the insertion order, but since your object is likely doing the inserts, it means nothing to the client.</p>\n"},{"tags":[],"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1324041967,"creation_date":1324041967,"answer_id":8534817,"question_id":8534763,"body_markdown":"It you want to make it clear they are unique and are ordered purely based on the order of insertion, you could return `LinkedHashSet` However, `Set` is usually the better choice.","title":"LinkedHashSet as a returning type of API public method","body":"<p>It you want to make it clear they are unique and are ordered purely based on the order of insertion, you could return <code>LinkedHashSet</code> However, <code>Set</code> is usually the better choice.</p>\n"},{"comments":[{"owner":{"account_id":347037,"reputation":79658,"user_id":680925,"display_name":"Perception"},"score":0,"creation_date":1324042063,"post_id":8534822,"comment_id":10570985,"body_markdown":"Meh, I like @Bozho&#39;s answer better, actually!","body":"Meh, I like @Bozho&#39;s answer better, actually!"},{"owner":{"account_id":953149,"reputation":177303,"user_id":978917,"accept_rate":86,"display_name":"ruakh"},"score":0,"creation_date":1324042212,"post_id":8534822,"comment_id":10571037,"body_markdown":"+1. I think your answer is much better than Bozho&#39;s, in that it actually answers the question. ;-)","body":"+1. I think your answer is much better than Bozho&#39;s, in that it actually answers the question. ;-)"}],"tags":[],"owner":{"account_id":347037,"reputation":79658,"user_id":680925,"display_name":"Perception"},"comment_count":2,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1324041978,"creation_date":1324041978,"answer_id":8534822,"question_id":8534763,"body_markdown":"If you&#39;re items are unique then I would return a Set. Then include in the Javadoc for the method that the items are guaranteed to be in sorted order.","title":"LinkedHashSet as a returning type of API public method","body":"<p>If you're items are unique then I would return a Set. Then include in the Javadoc for the method that the items are guaranteed to be in sorted order.</p>\n"},{"tags":[],"owner":{"account_id":953149,"reputation":177303,"user_id":978917,"accept_rate":86,"display_name":"ruakh"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1324042095,"creation_date":1324042095,"answer_id":8534845,"question_id":8534763,"body_markdown":"I would only give a method the return type `LinkedHashSet&lt;...&gt;` if it&#39;s part of the method&#39;s *contract* that its return-value is a `Set&lt;...&gt;` with a consistent ordering. And even then I&#39;d be a bit wary of doing that unless it&#39;s *also* part of the method&#39;s contract that its return-value is modifiable, since otherwise `LinkedHashSet&lt;...&gt;` also precludes the use of `Collections.unmodifiableSet(...)`.\r\n\r\nIn most cases, I think `Set&lt;...&gt;` is a better return-type. Alternatively, if the consistent ordering is particularly important, then you can use `SortedSet&lt;...&gt;` and switch to one of the implementations of that (such as `TreeSet&lt;...&gt;`); that still allows `Collections.unmodifiableSortedSet(...)`.","title":"LinkedHashSet as a returning type of API public method","body":"<p>I would only give a method the return type <code>LinkedHashSet&lt;...&gt;</code> if it's part of the method's <em>contract</em> that its return-value is a <code>Set&lt;...&gt;</code> with a consistent ordering. And even then I'd be a bit wary of doing that unless it's <em>also</em> part of the method's contract that its return-value is modifiable, since otherwise <code>LinkedHashSet&lt;...&gt;</code> also precludes the use of <code>Collections.unmodifiableSet(...)</code>.</p>\n\n<p>In most cases, I think <code>Set&lt;...&gt;</code> is a better return-type. Alternatively, if the consistent ordering is particularly important, then you can use <code>SortedSet&lt;...&gt;</code> and switch to one of the implementations of that (such as <code>TreeSet&lt;...&gt;</code>); that still allows <code>Collections.unmodifiableSortedSet(...)</code>.</p>\n"},{"tags":[],"owner":{"account_id":50396,"reputation":37361,"user_id":150339,"accept_rate":71,"display_name":"Bruno Reis"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1324042484,"creation_date":1324042154,"answer_id":8534862,"question_id":8534763,"body_markdown":"To answer your question, you should ask yourself: **&quot;What is the most generic type that specifies the characteristcs of what this method returns?&quot;**\r\n\r\nIf the characteristic of the method is to return a a handful of *unique* objects, *sorted* in some way, then the most generic standard class that represents this is `SortedSet`.\r\n\r\nIf you return a `TreeSet`, then the method is giving details on the implementation of what it returns (ie, TreeSet is a concrete class, not an interface), which often you want to avoid in OOP.\r\n\r\nIf you return a `Collection`, you are not stating that the objects are unique, nor that they are sorted in some way.\r\n\r\nIf you return a `LinkedHashSet`, not only you fail to state that the returned collection is somehow sorted, but you also fail in the abstraction aspect of OOP (this is a concrete class, so you are leaking implementation details; always try to return interfaces, unless you have a good reason).","title":"LinkedHashSet as a returning type of API public method","body":"<p>To answer your question, you should ask yourself: <strong>\"What is the most generic type that specifies the characteristcs of what this method returns?\"</strong></p>\n\n<p>If the characteristic of the method is to return a a handful of <em>unique</em> objects, <em>sorted</em> in some way, then the most generic standard class that represents this is <code>SortedSet</code>.</p>\n\n<p>If you return a <code>TreeSet</code>, then the method is giving details on the implementation of what it returns (ie, TreeSet is a concrete class, not an interface), which often you want to avoid in OOP.</p>\n\n<p>If you return a <code>Collection</code>, you are not stating that the objects are unique, nor that they are sorted in some way.</p>\n\n<p>If you return a <code>LinkedHashSet</code>, not only you fail to state that the returned collection is somehow sorted, but you also fail in the abstraction aspect of OOP (this is a concrete class, so you are leaking implementation details; always try to return interfaces, unless you have a good reason).</p>\n"},{"tags":[],"owner":{"account_id":220781,"reputation":2881,"user_id":478380,"accept_rate":89,"display_name":"Gnat"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1324043076,"creation_date":1324042166,"answer_id":8534866,"question_id":8534763,"body_markdown":"I&#39;d recommend against returning `LinkedHashSet` (unless you have a very good justification for it). If you return `Set`, you can change the `Set` implementation as you see fit, e.g. `HashSet`, `TreeSet` etc\r\n\r\nIn this case, I think your suggestion of returning `Set` is a good one as it does indicate that the items are unique. This also indicates that `contains` will generally be fast (O(1) or O(log n)).\r\n\r\nOn the other hand, `Collection` is very generic, but all it tells the caller is that it is a plain old group of somethings without any special constraints on ordering or uniqueness. Specifying `Set` means that there isn&#39;t any confusion about uniqueness, and you can use it anywhere where a `Collection` can be used anyway.","title":"LinkedHashSet as a returning type of API public method","body":"<p>I'd recommend against returning <code>LinkedHashSet</code> (unless you have a very good justification for it). If you return <code>Set</code>, you can change the <code>Set</code> implementation as you see fit, e.g. <code>HashSet</code>, <code>TreeSet</code> etc</p>\n\n<p>In this case, I think your suggestion of returning <code>Set</code> is a good one as it does indicate that the items are unique. This also indicates that <code>contains</code> will generally be fast (O(1) or O(log n)).</p>\n\n<p>On the other hand, <code>Collection</code> is very generic, but all it tells the caller is that it is a plain old group of somethings without any special constraints on ordering or uniqueness. Specifying <code>Set</code> means that there isn't any confusion about uniqueness, and you can use it anywhere where a <code>Collection</code> can be used anyway.</p>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695230939,"creation_date":1686606653,"answer_id":76460533,"question_id":8534763,"body_markdown":"Starting with Java 21 you could return a [`SequencedSet`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedSet.html).  This would indicate that the result is both a `Set` with unique elements, and a [`SequencedCollection`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedCollection.html) with a well-defined encounter order.\r\n\r\nThis has the additional benefits involved with having method signatures defined in terms of interfaces rather than concrete classes.  For instance, by not declaring the specific implementation type returned gives latitude to future changes to the method to return a different type of collection that may make more sense to the future implementation, while still guaranteeing that be a `Set` with a well-defined ordering.","title":"LinkedHashSet as a returning type of API public method","body":"<p>Starting with Java 21 you could return a <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedSet.html\" rel=\"nofollow noreferrer\"><code>SequencedSet</code></a>.  This would indicate that the result is both a <code>Set</code> with unique elements, and a <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedCollection.html\" rel=\"nofollow noreferrer\"><code>SequencedCollection</code></a> with a well-defined encounter order.</p>\n<p>This has the additional benefits involved with having method signatures defined in terms of interfaces rather than concrete classes.  For instance, by not declaring the specific implementation type returned gives latitude to future changes to the method to return a different type of collection that may make more sense to the future implementation, while still guaranteeing that be a <code>Set</code> with a well-defined ordering.</p>\n"}],"owner":{"account_id":1047162,"reputation":4175,"user_id":1051927,"accept_rate":77,"display_name":"narek.gevorgyan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":530,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":8534866,"answer_count":7,"score":3,"last_activity_date":1695230939,"creation_date":1324041673,"question_id":8534763,"body_markdown":"Let&#39;s consider the following example.\r\n\r\nWriting API which has public method which returns Collection of unique Objects.\r\nI believe that is is good to write return type of that method `Set` to show to user that the items are unique. \r\nIn case when these items are unique and ordered is it a right idea to write return type `LinkedHashSet` or it is good to be `Collection`?\r\n\r\nI know collections which are unique and sorted. I what to know it is a good idea to set public method&#39;s return type class(TreeSet,SortedSet,LinkedHashSet). In in terms of oop.","title":"LinkedHashSet as a returning type of API public method","body":"<p>Let's consider the following example.</p>\n\n<p>Writing API which has public method which returns Collection of unique Objects.\nI believe that is is good to write return type of that method <code>Set</code> to show to user that the items are unique. \nIn case when these items are unique and ordered is it a right idea to write return type <code>LinkedHashSet</code> or it is good to be <code>Collection</code>?</p>\n\n<p>I know collections which are unique and sorted. I what to know it is a good idea to set public method's return type class(TreeSet,SortedSet,LinkedHashSet). In in terms of oop.</p>\n"},{"tags":["java","arrays","sorting","arraylist","set"],"comments":[{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":0,"creation_date":1567870402,"post_id":57835045,"comment_id":102098776,"body_markdown":"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/AbstractCollection.html#toArray(), specifically regarding iteration order.","body":"<a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/AbstractCollection.html#toArray()\" rel=\"nofollow noreferrer\">docs.oracle.com/en/java/javase/11/docs/api/java.base/java/ut&zwnj;&#8203;il/&hellip;</a>, specifically regarding iteration order."}],"answers":[{"tags":[],"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1567869860,"creation_date":1567869860,"answer_id":57835075,"question_id":57835045,"body_markdown":"Not sorted. `LinkedHashSet` preserves insertion order; `HashSet` is going to be ordered by the `hashCode()` internally. If you want a sorted `Set`, use a `TreeSet` (which implements `SortedSet`).\r\n\r\n\tSortedSet&lt;Object&gt; objectsSet = new TreeSet&lt;&gt;();\r\n\tObjects[] objectsArray = (Objects[]) objectsSet.toArray();\r\n\r\nAs for changing the order (ascending or descending), you can use [`TreeSet(Comparator&lt;? super E&gt; comparator)`](https://docs.oracle.com/javase/8/docs/api/java/util/TreeSet.html#TreeSet-java.util.Comparator-) when constructing the `Set`. For example, to sort integers in reverse order;\r\n\r\n    SortedSet&lt;Integer&gt; intSet = new TreeSet&lt;&gt;(Comparator.reverseOrder());\r\n","title":"In what order Set items are sorted when converting to Array","body":"<p>Not sorted. <code>LinkedHashSet</code> preserves insertion order; <code>HashSet</code> is going to be ordered by the <code>hashCode()</code> internally. If you want a sorted <code>Set</code>, use a <code>TreeSet</code> (which implements <code>SortedSet</code>).</p>\n\n<pre><code>SortedSet&lt;Object&gt; objectsSet = new TreeSet&lt;&gt;();\nObjects[] objectsArray = (Objects[]) objectsSet.toArray();\n</code></pre>\n\n<p>As for changing the order (ascending or descending), you can use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/TreeSet.html#TreeSet-java.util.Comparator-\" rel=\"nofollow noreferrer\"><code>TreeSet(Comparator&lt;? super E&gt; comparator)</code></a> when constructing the <code>Set</code>. For example, to sort integers in reverse order;</p>\n\n<pre><code>SortedSet&lt;Integer&gt; intSet = new TreeSet&lt;&gt;(Comparator.reverseOrder());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695230890,"creation_date":1686610142,"answer_id":76460749,"question_id":57835045,"body_markdown":"The [`Set.toArray` method Javadocs](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Set.html#toArray()) specify the iteration behavior of a given `Set`:\r\n\r\n&gt; If this set makes any guarantees as to what order its elements are returned by its iterator, this method must return the elements in the same order.\r\n\r\nOne thing that is specifically left undefined is the order of elements in the array if the set does not guarantee the order of elements returned by the iterator.\r\n\r\nIf the set has a well-defined encounter order (e.g. it implements the [`SequencedSet`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedSet.html) interface added in Java 21), then the order of the elements in the array will match the encounter order of that type of set.","title":"In what order Set items are sorted when converting to Array","body":"<p>The <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Set.html#toArray()\" rel=\"nofollow noreferrer\"><code>Set.toArray</code> method Javadocs</a> specify the iteration behavior of a given <code>Set</code>:</p>\n<blockquote>\n<p>If this set makes any guarantees as to what order its elements are returned by its iterator, this method must return the elements in the same order.</p>\n</blockquote>\n<p>One thing that is specifically left undefined is the order of elements in the array if the set does not guarantee the order of elements returned by the iterator.</p>\n<p>If the set has a well-defined encounter order (e.g. it implements the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedSet.html\" rel=\"nofollow noreferrer\"><code>SequencedSet</code></a> interface added in Java 21), then the order of the elements in the array will match the encounter order of that type of set.</p>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686610254,"creation_date":1686610254,"answer_id":76460753,"question_id":57835045,"body_markdown":"Regarding the second part of the question, the ordering could be overridden by sorting as part of a [stream](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Collection.html#stream()) operation that constructs the array:\r\n\r\n```lang-java\r\nComparator&lt;Object&gt; myComparator = // ... Something that sorts this type of value\r\nobjectsSet.stream().sorted(someComparator).toArray();\r\n```","title":"In what order Set items are sorted when converting to Array","body":"<p>Regarding the second part of the question, the ordering could be overridden by sorting as part of a <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Collection.html#stream()\" rel=\"nofollow noreferrer\">stream</a> operation that constructs the array:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Comparator&lt;Object&gt; myComparator = // ... Something that sorts this type of value\nobjectsSet.stream().sorted(someComparator).toArray();\n</code></pre>\n"}],"owner":{"account_id":6681896,"reputation":113,"user_id":6366608,"display_name":"Dines"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":579,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":3,"score":4,"last_activity_date":1695230890,"creation_date":1567869665,"question_id":57835045,"body_markdown":"I&#39;m interested in what criteria are used to sort Set when converting? And how can this be overridden? Because, as I understand it, Set does not store sorting information. An example of the conversion I&#39;m talking about:\r\n\r\n```java\r\n    Set&lt;Object&gt; objectsSet = new HashSet&lt;&gt;();\r\n    Objects[] objectsArray = (Objects[]) objectsSet.toArray();\r\n\r\n```","title":"In what order Set items are sorted when converting to Array","body":"<p>I'm interested in what criteria are used to sort Set when converting? And how can this be overridden? Because, as I understand it, Set does not store sorting information. An example of the conversion I'm talking about:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>    Set&lt;Object&gt; objectsSet = new HashSet&lt;&gt;();\n    Objects[] objectsArray = (Objects[]) objectsSet.toArray();\n\n</code></pre>\n"},{"tags":["java","dictionary","linkedhashmap"],"comments":[{"owner":{"account_id":69527,"reputation":40466,"user_id":202214,"display_name":"Kevin Bourrillion"},"score":6,"creation_date":1261444272,"post_id":1936462,"comment_id":7781524,"body_markdown":"The situation is indeed unfortunate. Here is the (low-priority) feature request that would provide what you need: http://bugs.sun.com/view_bug.do?bug_id=6266354","body":"The situation is indeed unfortunate. Here is the (low-priority) feature request that would provide what you need: <a href=\"http://bugs.sun.com/view_bug.do?bug_id=6266354\" rel=\"nofollow noreferrer\">bugs.sun.com/view_bug.do?bug_id=6266354</a>"},{"owner":{"account_id":2023117,"reputation":8402,"user_id":1808829,"accept_rate":80,"display_name":"Ayaz Alifov"},"score":1,"creation_date":1525108569,"post_id":1936462,"comment_id":87227594,"body_markdown":"https://stackoverflow.com/a/30984049/1808829 could help you","body":"<a href=\"https://stackoverflow.com/a/30984049/1808829\">stackoverflow.com/a/30984049/1808829</a> could help you"},{"owner":{"account_id":2256125,"reputation":1387,"user_id":2172566,"display_name":"forresthopkinsa"},"score":0,"creation_date":1642621859,"post_id":1936462,"comment_id":125122971,"body_markdown":"I don&#39;t understand why `LinkedHashMap` doesn&#39;t implement `Deque`. It might as well.","body":"I don&#39;t understand why <code>LinkedHashMap</code> doesn&#39;t implement <code>Deque</code>. It might as well."},{"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"score":3,"creation_date":1686630505,"post_id":1936462,"comment_id":134821582,"body_markdown":"To follow up on @KevinBourrillion&#39;s comment from 13 years ago, this is finally being added in Java 21 by the [sequenced collections](https://openjdk.org/jeps/431) feature ([JDK-8280836](https://bugs.openjdk.org/browse/JDK-8280836)).  I&#39;ve added this as an answer (https://stackoverflow.com/a/76461679/1108305).","body":"To follow up on @KevinBourrillion&#39;s comment from 13 years ago, this is finally being added in Java 21 by the <a href=\"https://openjdk.org/jeps/431\" rel=\"nofollow noreferrer\">sequenced collections</a> feature (<a href=\"https://bugs.openjdk.org/browse/JDK-8280836\" rel=\"nofollow noreferrer\">JDK-8280836</a>).  I&#39;ve added this as an answer (<a href=\"https://stackoverflow.com/a/76461679/1108305\">stackoverflow.com/a/76461679/1108305</a>)."}],"answers":[{"comments":[{"owner":{"account_id":543250,"reputation":18874,"user_id":912319,"accept_rate":62,"display_name":"Kanagavelu Sugumar"},"score":0,"creation_date":1403246420,"post_id":1936472,"comment_id":37592984,"body_markdown":"I have to insert entry(key, value) as a first entry in my linked map; OR something like index based insertion. is that possible with Apache collections?","body":"I have to insert entry(key, value) as a first entry in my linked map; OR something like index based insertion. is that possible with Apache collections?"},{"owner":{"account_id":3436613,"reputation":1309,"user_id":2879594,"accept_rate":96,"display_name":"Josh"},"score":2,"creation_date":1411359035,"post_id":1936472,"comment_id":40656904,"body_markdown":"The &quot;LinkedMap,&quot; &quot;firstKey,&quot; and &quot;lastKey&quot; links are stale, fyi.","body":"The &quot;LinkedMap,&quot; &quot;firstKey,&quot; and &quot;lastKey&quot; links are stale, fyi."},{"owner":{"account_id":15387,"reputation":63718,"user_id":32453,"accept_rate":92,"display_name":"rogerdpack"},"score":0,"creation_date":1449678487,"post_id":1936472,"comment_id":56114063,"body_markdown":"Appears you actually maybe can even use the Commons LinkedMap to traverse it in reverse order, by getting lastKey then using previousKey after that to step backward...nice.","body":"Appears you actually maybe can even use the Commons LinkedMap to traverse it in reverse order, by getting lastKey then using previousKey after that to step backward...nice."},{"owner":{"account_id":15387,"reputation":63718,"user_id":32453,"accept_rate":92,"display_name":"rogerdpack"},"score":0,"creation_date":1449680357,"post_id":1936472,"comment_id":56115403,"body_markdown":"Appears you actually maybe can even use the Commons LinkedMap to traverse it in reverse order, by getting lastKey then using previousKey after that to step backward...nice. You could then even write your own Iterable if you wanted to use it in foreach loops ex: http://stackoverflow.com/a/1098153/32453","body":"Appears you actually maybe can even use the Commons LinkedMap to traverse it in reverse order, by getting lastKey then using previousKey after that to step backward...nice. You could then even write your own Iterable if you wanted to use it in foreach loops ex: <a href=\"http://stackoverflow.com/a/1098153/32453\">stackoverflow.com/a/1098153/32453</a>"},{"owner":{"account_id":174626,"reputation":1059,"user_id":404109,"accept_rate":62,"display_name":"Jason"},"score":0,"creation_date":1454058115,"post_id":1936472,"comment_id":57883071,"body_markdown":"results in infinite loop, because lastentry .next returns the first entry","body":"results in infinite loop, because lastentry .next returns the first entry"},{"owner":{"account_id":5318746,"reputation":1294,"user_id":4242757,"accept_rate":85,"display_name":"Shai M."},"score":0,"creation_date":1481785189,"post_id":1936472,"comment_id":69517563,"body_markdown":"how can i convert from LinkedHashMap to apache LinkedMap?","body":"how can i convert from LinkedHashMap to apache LinkedMap?"},{"owner":{"account_id":10553436,"reputation":764,"user_id":7775414,"display_name":"tkrishtop"},"score":2,"creation_date":1550781401,"post_id":1936472,"comment_id":96407941,"body_markdown":"@skaffman , could you please help : what is `mylinkedmap.entrySet().iterator().next()` time complexity? Is it O(1) ?","body":"@skaffman , could you please help : what is <code>mylinkedmap.entrySet().iterator().next()</code> time complexity? Is it O(1) ?"},{"owner":{"account_id":10042541,"reputation":2660,"user_id":7424948,"display_name":"Ricola"},"score":1,"creation_date":1607273269,"post_id":1936472,"comment_id":115214649,"body_markdown":"@tkrishtop late answer but I believe it should be O(1) as the LinkedHashMap has a pointer to the head of the queue.","body":"@tkrishtop late answer but I believe it should be O(1) as the LinkedHashMap has a pointer to the head of the queue."}],"tags":[],"owner":{"account_id":11089,"reputation":400050,"user_id":21234,"accept_rate":91,"display_name":"skaffman"},"comment_count":8,"down_vote_count":0,"up_vote_count":196,"is_accepted":true,"score":196,"last_activity_date":1570012914,"creation_date":1261331881,"answer_id":1936472,"question_id":1936462,"body_markdown":"The semantics of `LinkedHashMap` are still those of a Map, rather than that of a `LinkedList`. It retains insertion order, yes, but that&#39;s an implementation detail, rather than an aspect of its interface.\r\n\r\nThe quickest way to get the &quot;first&quot; entry is still `entrySet().iterator().next()`. Getting the &quot;last&quot; entry is possible, but will entail iterating over the whole entry set by calling `.next()` until you reach the last.  `while (iterator.hasNext()) { lastElement = iterator.next() }`\r\n\r\n**edit**: However, if you&#39;re willing to go beyond the JavaSE API, [Apache Commons Collections][1] has its own [`LinkedMap`][2] implementation, which has methods like [`firstKey`][3] and [`lastKey`][4], which do what you&#39;re looking for. The interface is considerably richer.  \r\n\r\n\r\n  [1]: https://commons.apache.org/proper/commons-collections/apidocs/\r\n  [2]: https://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/map/LinkedMap.html\r\n  [3]: https://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/map/AbstractLinkedMap.html#firstKey--\r\n  [4]: https://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/map/AbstractLinkedMap.html#lastKey--","title":"Java LinkedHashMap get first or last entry","body":"<p>The semantics of <code>LinkedHashMap</code> are still those of a Map, rather than that of a <code>LinkedList</code>. It retains insertion order, yes, but that's an implementation detail, rather than an aspect of its interface.</p>\n\n<p>The quickest way to get the \"first\" entry is still <code>entrySet().iterator().next()</code>. Getting the \"last\" entry is possible, but will entail iterating over the whole entry set by calling <code>.next()</code> until you reach the last.  <code>while (iterator.hasNext()) { lastElement = iterator.next() }</code></p>\n\n<p><strong>edit</strong>: However, if you're willing to go beyond the JavaSE API, <a href=\"https://commons.apache.org/proper/commons-collections/apidocs/\" rel=\"noreferrer\">Apache Commons Collections</a> has its own <a href=\"https://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/map/LinkedMap.html\" rel=\"noreferrer\"><code>LinkedMap</code></a> implementation, which has methods like <a href=\"https://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/map/AbstractLinkedMap.html#firstKey--\" rel=\"noreferrer\"><code>firstKey</code></a> and <a href=\"https://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/map/AbstractLinkedMap.html#lastKey--\" rel=\"noreferrer\"><code>lastKey</code></a>, which do what you're looking for. The interface is considerably richer.  </p>\n"},{"comments":[{"owner":{"account_id":275137,"reputation":2090,"user_id":567812,"accept_rate":74,"display_name":"Durin"},"score":4,"creation_date":1338304439,"post_id":1938327,"comment_id":14053956,"body_markdown":"the toArray method itself will iterate over the hashmap again :)\nSo its rather more inefficient because of the few extra cycles wasted in creating array and the space allocated for the array.","body":"the toArray method itself will iterate over the hashmap again :) So its rather more inefficient because of the few extra cycles wasted in creating array and the space allocated for the array."}],"tags":[],"owner":{"account_id":23282,"reputation":28065,"user_id":58220,"accept_rate":75,"display_name":"sateesh"},"comment_count":1,"down_vote_count":2,"up_vote_count":8,"is_accepted":false,"score":6,"last_activity_date":1599511019,"creation_date":1261372339,"answer_id":1938327,"question_id":1936462,"body_markdown":"One more way to get first and last entry of a LinkedHashMap is to use `toArray()` method of Set interface.\r\n\r\nBut I think iterating over the entries in the entry set and getting the first and last entry is a better approach. \r\n\r\nThe usage of array methods leads to warning of the form &lt;i&gt;&quot; ...needs unchecked conversion to conform to ...&quot; &lt;/i&gt; which cannot be fixed [but can be only be suppressed by using the annotation `@SuppressWarnings(&quot;unchecked&quot;)`].\r\n\r\nHere is a small example to demonstrate the usage of `toArray()` method:\r\n\r\n```\r\n    public static void main(final String[] args) {\r\n        final Map&lt;Integer,String&gt; orderMap = new LinkedHashMap&lt;Integer,String&gt;();\r\n        orderMap.put(6, &quot;Six&quot;);\r\n        orderMap.put(7, &quot;Seven&quot;);\r\n        orderMap.put(3, &quot;Three&quot;);\r\n        orderMap.put(100, &quot;Hundered&quot;);\r\n        orderMap.put(10, &quot;Ten&quot;);\r\n\r\n        final Set&lt;Entry&lt;Integer, String&gt;&gt; mapValues = orderMap.entrySet();\r\n        final int maplength = mapValues.size();\r\n        final Entry&lt;Integer,String&gt;[] test = new Entry[maplength];\r\n        mapValues.toArray(test);\r\n\r\n        System.out.print(&quot;First Key:&quot;+test[0].getKey());\r\n        System.out.println(&quot; First Value:&quot;+test[0].getValue());\r\n\r\n        System.out.print(&quot;Last Key:&quot;+test[maplength-1].getKey());\r\n        System.out.println(&quot; Last Value:&quot;+test[maplength-1].getValue());\r\n    }\r\n\r\n    // the output geneated is :\r\n    First Key:6 First Value:Six\r\n    Last Key:10 Last Value:Ten\r\n```","title":"Java LinkedHashMap get first or last entry","body":"<p>One more way to get first and last entry of a LinkedHashMap is to use <code>toArray()</code> method of Set interface.</p>\n<p>But I think iterating over the entries in the entry set and getting the first and last entry is a better approach.</p>\n<p>The usage of array methods leads to warning of the form <i>&quot; ...needs unchecked conversion to conform to ...&quot; </i> which cannot be fixed [but can be only be suppressed by using the annotation <code>@SuppressWarnings(&quot;unchecked&quot;)</code>].</p>\n<p>Here is a small example to demonstrate the usage of <code>toArray()</code> method:</p>\n<pre><code>    public static void main(final String[] args) {\n        final Map&lt;Integer,String&gt; orderMap = new LinkedHashMap&lt;Integer,String&gt;();\n        orderMap.put(6, &quot;Six&quot;);\n        orderMap.put(7, &quot;Seven&quot;);\n        orderMap.put(3, &quot;Three&quot;);\n        orderMap.put(100, &quot;Hundered&quot;);\n        orderMap.put(10, &quot;Ten&quot;);\n\n        final Set&lt;Entry&lt;Integer, String&gt;&gt; mapValues = orderMap.entrySet();\n        final int maplength = mapValues.size();\n        final Entry&lt;Integer,String&gt;[] test = new Entry[maplength];\n        mapValues.toArray(test);\n\n        System.out.print(&quot;First Key:&quot;+test[0].getKey());\n        System.out.println(&quot; First Value:&quot;+test[0].getValue());\n\n        System.out.print(&quot;Last Key:&quot;+test[maplength-1].getKey());\n        System.out.println(&quot; Last Value:&quot;+test[maplength-1].getValue());\n    }\n\n    // the output geneated is :\n    First Key:6 First Value:Six\n    Last Key:10 Last Value:Ten\n</code></pre>\n"},{"comments":[{"owner":{"account_id":193707,"reputation":34691,"user_id":435605,"accept_rate":45,"display_name":"AlikElzin-kilaka"},"score":1,"creation_date":1348402643,"post_id":12503916,"comment_id":16905162,"body_markdown":"ConcurrentSkipListMap requires a comparator (or natural comparator), so you need to do extra work to save the order in which entries are put.","body":"ConcurrentSkipListMap requires a comparator (or natural comparator), so you need to do extra work to save the order in which entries are put."},{"owner":{"account_id":193707,"reputation":34691,"user_id":435605,"accept_rate":45,"display_name":"AlikElzin-kilaka"},"score":0,"creation_date":1348405348,"post_id":12503916,"comment_id":16905618,"body_markdown":"HashMap and specifically LinkedHashMap provides access in average of O(1) - contrary to a SkipList, which provides access in average of O(logn).","body":"HashMap and specifically LinkedHashMap provides access in average of O(1) - contrary to a SkipList, which provides access in average of O(logn)."},{"owner":{"display_name":"user1743310"},"score":1,"creation_date":1493299545,"post_id":12503916,"comment_id":74365556,"body_markdown":"&quot;The map is sorted according to the natural ordering of its keys&quot;","body":"&quot;The map is sorted according to the natural ordering of its keys&quot;"}],"tags":[],"owner":{"account_id":367804,"reputation":10671,"user_id":714211,"accept_rate":72,"display_name":"Doua Beri"},"comment_count":3,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1348094635,"creation_date":1348094635,"answer_id":12503916,"question_id":1936462,"body_markdown":"I would recommend using [ConcurrentSkipListMap][1] which has `firstKey()` and `lastKey()` methods\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentSkipListMap.html","title":"Java LinkedHashMap get first or last entry","body":"<p>I would recommend using <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentSkipListMap.html\" rel=\"nofollow\">ConcurrentSkipListMap</a> which has <code>firstKey()</code> and <code>lastKey()</code> methods</p>\n"},{"tags":[],"owner":{"account_id":1923293,"reputation":10359,"user_id":1734279,"accept_rate":75,"display_name":"rai.skumar"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1599550026,"creation_date":1352272482,"answer_id":13264863,"question_id":1936462,"body_markdown":"Though linkedHashMap doesn&#39;t provide any method to get first, last or any specific object. \r\n\r\nBut its pretty trivial to get :\r\n\r\n```\r\nMap&lt;Integer,String&gt; orderMap = new LinkedHashMap&lt;Integer,String&gt;();  \r\nSet&lt;Integer&gt; al =   orderMap.keySet();\r\n```\r\n\r\nnow using iterator on `al` object ; you can get any object.","title":"Java LinkedHashMap get first or last entry","body":"<p>Though linkedHashMap doesn't provide any method to get first, last or any specific object.</p>\n<p>But its pretty trivial to get :</p>\n<pre><code>Map&lt;Integer,String&gt; orderMap = new LinkedHashMap&lt;Integer,String&gt;();  \nSet&lt;Integer&gt; al =   orderMap.keySet();\n</code></pre>\n<p>now using iterator on <code>al</code> object ; you can get any object.</p>\n"},{"tags":[],"owner":{"account_id":2438391,"reputation":51,"user_id":2127649,"display_name":"user2127649"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1363910622,"creation_date":1363910622,"answer_id":15560408,"question_id":1936462,"body_markdown":"Perhaps something like this :\r\n\r\n    LinkedHashMap&lt;Integer, String&gt; myMap;\r\n\r\n    public String getFirstKey() {\r\n      String out = null;\r\n      for (int key : myMap.keySet()) {\r\n        out = myMap.get(key);\r\n        break;\r\n      }\r\n      return out;\r\n    }\r\n\r\n    public String getLastKey() {\r\n      String out = null;\r\n      for (int key : myMap.keySet()) {\r\n        out = myMap.get(key);\r\n      }\r\n      return out;\r\n    }","title":"Java LinkedHashMap get first or last entry","body":"<p>Perhaps something like this :</p>\n\n<pre><code>LinkedHashMap&lt;Integer, String&gt; myMap;\n\npublic String getFirstKey() {\n  String out = null;\n  for (int key : myMap.keySet()) {\n    out = myMap.get(key);\n    break;\n  }\n  return out;\n}\n\npublic String getLastKey() {\n  String out = null;\n  for (int key : myMap.keySet()) {\n    out = myMap.get(key);\n  }\n  return out;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1353343,"reputation":1238,"user_id":1292233,"accept_rate":77,"display_name":"shecodesthings"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1374851096,"creation_date":1374851096,"answer_id":17884883,"question_id":1936462,"body_markdown":"Yea I came across the same problem, but luckily I only need the first element... - This is what I did for it.\r\n\r\n    private String getDefaultPlayerType()\r\n\t{\r\n\t\tString defaultPlayerType = &quot;&quot;;\r\n\t\tfor(LinkedHashMap.Entry&lt;String,Integer&gt; entry : getLeagueByName(currentLeague).getStatisticsOrder().entrySet())\r\n\t\t{\r\n\t\t\tdefaultPlayerType = entry.getKey();\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\treturn defaultPlayerType;\r\n\t}\r\nIf you need the last element as well - I&#39;d look into how to reverse the order of your map - store it in a temp variable, access the first element in the reversed map(therefore it would be your last element), kill the temp variable. \r\n\r\nHere&#39;s some good answers on how to reverse order a hashmap: \r\n\r\nhttps://stackoverflow.com/questions/10596132/how-to-iterate-hashmap-in-reverse-order-in-java\r\n\r\nIf you use help from the above link, please give them up-votes :)\r\nHope this can help someone.","title":"Java LinkedHashMap get first or last entry","body":"<p>Yea I came across the same problem, but luckily I only need the first element... - This is what I did for it.</p>\n\n<pre><code>private String getDefaultPlayerType()\n{\n    String defaultPlayerType = \"\";\n    for(LinkedHashMap.Entry&lt;String,Integer&gt; entry : getLeagueByName(currentLeague).getStatisticsOrder().entrySet())\n    {\n        defaultPlayerType = entry.getKey();\n        break;\n    }\n    return defaultPlayerType;\n}\n</code></pre>\n\n<p>If you need the last element as well - I'd look into how to reverse the order of your map - store it in a temp variable, access the first element in the reversed map(therefore it would be your last element), kill the temp variable. </p>\n\n<p>Here's some good answers on how to reverse order a hashmap: </p>\n\n<p><a href=\"https://stackoverflow.com/questions/10596132/how-to-iterate-hashmap-in-reverse-order-in-java\">How to iterate hashmap in reverse order in Java</a></p>\n\n<p>If you use help from the above link, please give them up-votes :)\nHope this can help someone.</p>\n"},{"comments":[{"owner":{"account_id":4934454,"reputation":37277,"user_id":3973077,"accept_rate":77,"display_name":"Paul Boddington"},"score":1,"creation_date":1448637543,"post_id":33960155,"comment_id":55678132,"body_markdown":"I think I&#39;d add `ClassCastException` to the `catch` just in case `tail` is not an `Entry` in a subclass (or a future implementation).","body":"I think I&#39;d add <code>ClassCastException</code> to the <code>catch</code> just in case <code>tail</code> is not an <code>Entry</code> in a subclass (or a future implementation)."},{"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"score":0,"creation_date":1448637763,"post_id":33960155,"comment_id":55678257,"body_markdown":"@PaulBoddington I&#39;ve replaced it with a catch all - not recommended in general but probably appropriate here.","body":"@PaulBoddington I&#39;ve replaced it with a catch all - not recommended in general but probably appropriate here."},{"owner":{"account_id":15387,"reputation":63718,"user_id":32453,"accept_rate":92,"display_name":"rogerdpack"},"score":7,"creation_date":1449644649,"post_id":33960155,"comment_id":56092151,"body_markdown":"ahh the &quot;dirty&quot; answer :)","body":"ahh the &quot;dirty&quot; answer :)"}],"tags":[],"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"comment_count":3,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1448637706,"creation_date":1448636709,"answer_id":33960155,"question_id":1936462,"body_markdown":"`LinkedHashMap` current implementation (Java 8) keeps track of its tail. If performance is a concern and/or the map is large in size, you could access that field via reflection.\r\n\r\nBecause the implementation may change it is probably a good idea to have a fallback strategy too. You may want to log something if an exception is thrown so you know that the implementation has changed.\r\n\r\nIt could look like:\r\n\r\n    public static &lt;K, V&gt; Entry&lt;K, V&gt; getFirst(Map&lt;K, V&gt; map) {\r\n      if (map.isEmpty()) return null;\r\n      return map.entrySet().iterator().next();\r\n    }\r\n\r\n    public static &lt;K, V&gt; Entry&lt;K, V&gt; getLast(Map&lt;K, V&gt; map) {\r\n      try {\r\n        if (map instanceof LinkedHashMap) return getLastViaReflection(map);\r\n      } catch (Exception ignore) { }\r\n      return getLastByIterating(map);\r\n    }\r\n\r\n    private static &lt;K, V&gt; Entry&lt;K, V&gt; getLastByIterating(Map&lt;K, V&gt; map) {\r\n      Entry&lt;K, V&gt; last = null;\r\n      for (Entry&lt;K, V&gt; e : map.entrySet()) last = e;\r\n      return last;\r\n    }\r\n\r\n    private static &lt;K, V&gt; Entry&lt;K, V&gt; getLastViaReflection(Map&lt;K, V&gt; map) throws NoSuchFieldException, IllegalAccessException {\r\n      Field tail = map.getClass().getDeclaredField(&quot;tail&quot;);\r\n      tail.setAccessible(true);\r\n      return (Entry&lt;K, V&gt;) tail.get(map);\r\n    }\r\n","title":"Java LinkedHashMap get first or last entry","body":"<p><code>LinkedHashMap</code> current implementation (Java 8) keeps track of its tail. If performance is a concern and/or the map is large in size, you could access that field via reflection.</p>\n\n<p>Because the implementation may change it is probably a good idea to have a fallback strategy too. You may want to log something if an exception is thrown so you know that the implementation has changed.</p>\n\n<p>It could look like:</p>\n\n<pre><code>public static &lt;K, V&gt; Entry&lt;K, V&gt; getFirst(Map&lt;K, V&gt; map) {\n  if (map.isEmpty()) return null;\n  return map.entrySet().iterator().next();\n}\n\npublic static &lt;K, V&gt; Entry&lt;K, V&gt; getLast(Map&lt;K, V&gt; map) {\n  try {\n    if (map instanceof LinkedHashMap) return getLastViaReflection(map);\n  } catch (Exception ignore) { }\n  return getLastByIterating(map);\n}\n\nprivate static &lt;K, V&gt; Entry&lt;K, V&gt; getLastByIterating(Map&lt;K, V&gt; map) {\n  Entry&lt;K, V&gt; last = null;\n  for (Entry&lt;K, V&gt; e : map.entrySet()) last = e;\n  return last;\n}\n\nprivate static &lt;K, V&gt; Entry&lt;K, V&gt; getLastViaReflection(Map&lt;K, V&gt; map) throws NoSuchFieldException, IllegalAccessException {\n  Field tail = map.getClass().getDeclaredField(\"tail\");\n  tail.setAccessible(true);\n  return (Entry&lt;K, V&gt;) tail.get(map);\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1055908,"reputation":995,"user_id":1058629,"accept_rate":71,"display_name":"vishr"},"score":0,"creation_date":1479944605,"post_id":35298683,"comment_id":68775612,"body_markdown":"Good try, but the eldest entry is updated when map.get is invoked. So eldestEntry will not be updated in those cases, unless put is called after that.","body":"Good try, but the eldest entry is updated when map.get is invoked. So eldestEntry will not be updated in those cases, unless put is called after that."},{"owner":{"account_id":2006311,"reputation":1571,"user_id":1796112,"accept_rate":88,"display_name":"Shiji.J"},"score":0,"creation_date":1573830226,"post_id":35298683,"comment_id":104026402,"body_markdown":"@vishr eldest entry is updated when put is invoked. (get and put for access order LinkedHashMap)","body":"@vishr eldest entry is updated when put is invoked. (get and put for access order LinkedHashMap)"}],"tags":[],"owner":{"account_id":177955,"reputation":4667,"user_id":409638,"accept_rate":78,"display_name":"robert"},"comment_count":2,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1455103197,"creation_date":1455039986,"answer_id":35298683,"question_id":1936462,"body_markdown":"It&#39;s a bit dirty, but you can override the `removeEldestEntry` method of LinkedHashMap, which it might suit you to do as a private anonymous member:\r\n\r\n\tprivate Splat eldest = null;\r\n\tprivate LinkedHashMap&lt;Integer, Splat&gt; pastFutures = new LinkedHashMap&lt;Integer, Splat&gt;() {\r\n\r\n\t\t@Override\r\n\t\tprotected boolean removeEldestEntry(Map.Entry&lt;Integer, Splat&gt; eldest) {\r\n\r\n\t\t\teldest = eldest.getValue();\r\n\t\t\treturn false;\r\n\t\t}\r\n\t};\r\n\r\nSo you will always be able to get the first entry at your `eldest` member. It will be updated every time you perform a `put`.\r\n\r\nIt should also be easy to override `put` and set `youngest` ...\r\n\r\n\t\t@Override\r\n\t\tpublic Splat put(Integer key, Splat value) {\r\n\r\n\t\t\tyoungest = value;\r\n\t\t\treturn super.put(key, value);\r\n\t\t}\r\n\r\nIt all breaks down when you start removing entries though; haven&#39;t figured out a way to kludge that.\r\n\r\nIt&#39;s very annoying that you can&#39;t otherwise get access to head or tail in a sensible way ...\r\n\r\n","title":"Java LinkedHashMap get first or last entry","body":"<p>It's a bit dirty, but you can override the <code>removeEldestEntry</code> method of LinkedHashMap, which it might suit you to do as a private anonymous member:</p>\n\n<pre><code>private Splat eldest = null;\nprivate LinkedHashMap&lt;Integer, Splat&gt; pastFutures = new LinkedHashMap&lt;Integer, Splat&gt;() {\n\n    @Override\n    protected boolean removeEldestEntry(Map.Entry&lt;Integer, Splat&gt; eldest) {\n\n        eldest = eldest.getValue();\n        return false;\n    }\n};\n</code></pre>\n\n<p>So you will always be able to get the first entry at your <code>eldest</code> member. It will be updated every time you perform a <code>put</code>.</p>\n\n<p>It should also be easy to override <code>put</code> and set <code>youngest</code> ...</p>\n\n<pre><code>    @Override\n    public Splat put(Integer key, Splat value) {\n\n        youngest = value;\n        return super.put(key, value);\n    }\n</code></pre>\n\n<p>It all breaks down when you start removing entries though; haven't figured out a way to kludge that.</p>\n\n<p>It's very annoying that you can't otherwise get access to head or tail in a sensible way ...</p>\n"},{"comments":[{"owner":{"account_id":2727282,"reputation":1056,"user_id":2351981,"accept_rate":70,"display_name":"E A"},"score":0,"creation_date":1587762094,"post_id":36337639,"comment_id":108647525,"body_markdown":"it gives the first inserted key in the map. Finding the first key will be in O(1). The problem here is finding a way in O(1) for finding the last inserted key.","body":"it gives the first inserted key in the map. Finding the first key will be in O(1). The problem here is finding a way in O(1) for finding the last inserted key."}],"tags":[],"owner":{"account_id":3002414,"reputation":361,"user_id":2547647,"display_name":"Tadeu Jr."},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1459438061,"creation_date":1459438061,"answer_id":36337639,"question_id":1936462,"body_markdown":"Suggestion:\r\n\r\n    map.remove(map.keySet().iterator().next());","title":"Java LinkedHashMap get first or last entry","body":"<p>Suggestion:</p>\n\n<pre><code>map.remove(map.keySet().iterator().next());\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3116542,"reputation":1299,"user_id":3450840,"accept_rate":56,"display_name":"Florian F"},"score":8,"creation_date":1501158594,"post_id":36711368,"comment_id":77662583,"body_markdown":"It is still faster to iterate and keep the last item.  `T last = null ; for( T item : linkedHashMap.values() ) last = item;`  Or something like that.  It is O(N) in time but O(1) in memory.","body":"It is still faster to iterate and keep the last item.  <code>T last = null ; for( T item : linkedHashMap.values() ) last = item;</code>  Or something like that.  It is O(N) in time but O(1) in memory."},{"owner":{"account_id":2744151,"reputation":470,"user_id":2364907,"accept_rate":83,"display_name":"skinny_jones"},"score":0,"creation_date":1526497774,"post_id":36711368,"comment_id":87772831,"body_markdown":"@FlorianF So it depends how big is your list. The array solution would be faster and wouldn&#39;t compromise memory if the collection is not that big, otherwise it&#39;s better taking longer to iterate thru it... I wonder if there&#39;s a bit of both as a solution, especially since Java 8.","body":"@FlorianF So it depends how big is your list. The array solution would be faster and wouldn&#39;t compromise memory if the collection is not that big, otherwise it&#39;s better taking longer to iterate thru it... I wonder if there&#39;s a bit of both as a solution, especially since Java 8."},{"owner":{"account_id":953149,"reputation":177303,"user_id":978917,"accept_rate":86,"display_name":"ruakh"},"score":2,"creation_date":1554152840,"post_id":36711368,"comment_id":97639440,"body_markdown":"@skinny_jones: Why would the array solution be faster? It still involves iterating over the whole map, it&#39;s just that now the iteration is inside a JDK method instead of explicit.","body":"@skinny_jones: Why would the array solution be faster? It still involves iterating over the whole map, it&#39;s just that now the iteration is inside a JDK method instead of explicit."}],"tags":[],"owner":{"account_id":2206457,"reputation":13823,"user_id":1949554,"accept_rate":74,"display_name":"frankelot"},"comment_count":3,"down_vote_count":1,"up_vote_count":31,"is_accepted":false,"score":30,"last_activity_date":1586271340,"creation_date":1461050757,"answer_id":36711368,"question_id":1936462,"body_markdown":"Can you try doing something like (to get the last entry):\r\n\r\n    linkedHashMap.entrySet().toArray()[linkedHashMap.size() -1];","title":"Java LinkedHashMap get first or last entry","body":"<p>Can you try doing something like (to get the last entry):</p>\n\n<pre><code>linkedHashMap.entrySet().toArray()[linkedHashMap.size() -1];\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3813919,"reputation":2989,"user_id":3163824,"accept_rate":62,"display_name":"Panagiotis Drakatos"},"comment_count":0,"down_vote_count":0,"up_vote_count":28,"is_accepted":false,"score":28,"last_activity_date":1523889488,"creation_date":1523889488,"answer_id":49859972,"question_id":1936462,"body_markdown":"&lt;p&gt;I know that I came too late but I would like to offer some alternatives, not something extraordinary but some cases that none mentioned here. In case that someone doesn&#39;t care so much for efficiency but he wants something with more simplicity(perhaps find the last entry value with one line of code), all this will get quite simplified with the arrival of\r\n &lt;a href=&quot;https://docs.oracle.com/javase/8/docs/api/&quot;&gt; Java 8 &lt;/a&gt;. I provide some useful scenarios. &lt;/p&gt;\r\n&lt;p&gt;For the sake of the completeness, I compare these alternatives with the solution of arrays that already mentioned in this post by others users. I sum up all the cases and i think they would be useful(when performance does matter or no) especially for new developers, always depends on the matter of each problem&lt;/p&gt;\r\n\r\n&lt;h2&gt;Possible Alternatives&lt;/h2&gt;\r\n\r\n&lt;h3&gt;Usage of Array Method&lt;/h3&gt;\r\n&lt;p&gt;I took it from the previous answer to to make the follow comparisons. This solution belongs @feresr.&lt;/p&gt;\r\n\r\n      public static String FindLasstEntryWithArrayMethod() {\r\n            return String.valueOf(linkedmap.entrySet().toArray()[linkedmap.size() - 1]);\r\n        }\r\n\r\n&lt;h3&gt;Usage of ArrayList Method&lt;/h3&gt;\r\n&lt;p&gt;Similar to the first solution with a little bit different performance&lt;/p&gt;\r\n\r\n    public static String FindLasstEntryWithArrayListMethod() {\r\n            List&lt;Entry&lt;Integer, String&gt;&gt; entryList = new ArrayList&lt;Map.Entry&lt;Integer, String&gt;&gt;(linkedmap.entrySet());\r\n            return entryList.get(entryList.size() - 1).getValue();\r\n        }\r\n\r\n&lt;h3&gt;Reduce Method&lt;/h3&gt;\r\n&lt;p&gt;This method will reduce the set of elements until getting the last element of stream. In addition, it will  return only deterministic results &lt;/p&gt;\r\n\r\n \r\n\r\n    public static String FindLasstEntryWithReduceMethod() {\r\n            return linkedmap.entrySet().stream().reduce((first, second) -&gt; second).orElse(null).getValue();\r\n        }\r\n\r\n&lt;h3&gt;SkipFunction Method&lt;/h3&gt;\r\n&lt;p&gt;This method will get the last element of the stream  by simply skipping all the elements before it&lt;/p&gt;\r\n\r\n \r\n\r\n    public static String FindLasstEntryWithSkipFunctionMethod() {\r\n            final long count = linkedmap.entrySet().stream().count();\r\n            return linkedmap.entrySet().stream().skip(count - 1).findFirst().get().getValue();\r\n        }\r\n\r\n&lt;h3&gt;Iterable Alternative&lt;/h3&gt;\r\n\r\n&gt; Iterables.getLast from Google Guava. It has some optimization for\r\n&gt; Lists and SortedSets too\r\n\r\n&lt;p&gt;&lt;/p&gt;\r\n\r\n    public static String FindLasstEntryWithGuavaIterable() {\r\n            return Iterables.getLast(linkedmap.entrySet()).getValue();\r\n        }\r\n\r\n\r\n&lt;p&gt;Here is the full source code&lt;/p&gt; \r\n\r\n    import com.google.common.collect.Iterables;\r\n    import java.math.BigDecimal;\r\n    import java.math.RoundingMode;\r\n    import java.util.ArrayList;\r\n    import java.util.LinkedHashMap;\r\n    import java.util.List;\r\n    import java.util.Map;\r\n    import java.util.Map.Entry;\r\n    \r\n    public class PerformanceTest {\r\n    \r\n        private static long startTime;\r\n        private static long endTime;\r\n        private static LinkedHashMap&lt;Integer, String&gt; linkedmap;\r\n    \r\n        public static void main(String[] args) {\r\n            linkedmap = new LinkedHashMap&lt;Integer, String&gt;();\r\n          \r\n            linkedmap.put(12, &quot;Chaitanya&quot;);\r\n            linkedmap.put(2, &quot;Rahul&quot;);\r\n            linkedmap.put(7, &quot;Singh&quot;);\r\n            linkedmap.put(49, &quot;Ajeet&quot;);\r\n            linkedmap.put(76, &quot;Anuj&quot;);\r\n    \r\n            //call a useless action  so that the caching occurs before the jobs starts.\r\n            linkedmap.entrySet().forEach(x -&gt; {});\r\n    \r\n           \r\n            \r\n            startTime = System.nanoTime();\r\n            FindLasstEntryWithArrayListMethod();\r\n            endTime = System.nanoTime();\r\n            System.out.println(&quot;FindLasstEntryWithArrayListMethod : &quot; + &quot;took &quot; + new BigDecimal((endTime - startTime) / 1000000.000).setScale(3, RoundingMode.CEILING) + &quot; milliseconds&quot;);\r\n           \r\n            \r\n             startTime = System.nanoTime();\r\n            FindLasstEntryWithArrayMethod();\r\n            endTime = System.nanoTime();\r\n            System.out.println(&quot;FindLasstEntryWithArrayMethod : &quot; + &quot;took &quot; + new BigDecimal((endTime - startTime) / 1000000.000).setScale(3, RoundingMode.CEILING) + &quot; milliseconds&quot;);\r\n            \r\n            startTime = System.nanoTime();\r\n            FindLasstEntryWithReduceMethod();\r\n            endTime = System.nanoTime();\r\n    \r\n            System.out.println(&quot;FindLasstEntryWithReduceMethod : &quot; + &quot;took &quot; + new BigDecimal((endTime - startTime) / 1000000.000).setScale(3, RoundingMode.CEILING) + &quot; milliseconds&quot;);\r\n            \r\n            startTime = System.nanoTime();\r\n            FindLasstEntryWithSkipFunctionMethod();\r\n            endTime = System.nanoTime();\r\n    \r\n            System.out.println(&quot;FindLasstEntryWithSkipFunctionMethod : &quot; + &quot;took &quot; + new BigDecimal((endTime - startTime) / 1000000.000).setScale(3, RoundingMode.CEILING) + &quot; milliseconds&quot;);\r\n            \r\n            startTime = System.currentTimeMillis();\r\n            FindLasstEntryWithGuavaIterable();\r\n            endTime = System.currentTimeMillis();\r\n            System.out.println(&quot;FindLasstEntryWithGuavaIterable : &quot; + &quot;took &quot; + (endTime - startTime) + &quot; milliseconds&quot;);\r\n    \r\n            \r\n        }\r\n    \r\n        public static String FindLasstEntryWithReduceMethod() {\r\n            return linkedmap.entrySet().stream().reduce((first, second) -&gt; second).orElse(null).getValue();\r\n        }\r\n    \r\n        public static String FindLasstEntryWithSkipFunctionMethod() {\r\n            final long count = linkedmap.entrySet().stream().count();\r\n            return linkedmap.entrySet().stream().skip(count - 1).findFirst().get().getValue();\r\n        }\r\n    \r\n        public static String FindLasstEntryWithGuavaIterable() {\r\n            return Iterables.getLast(linkedmap.entrySet()).getValue();\r\n        }\r\n    \r\n        public static String FindLasstEntryWithArrayListMethod() {\r\n            List&lt;Entry&lt;Integer, String&gt;&gt; entryList = new ArrayList&lt;Map.Entry&lt;Integer, String&gt;&gt;(linkedmap.entrySet());\r\n            return entryList.get(entryList.size() - 1).getValue();\r\n        }\r\n    \r\n        public static String FindLasstEntryWithArrayMethod() {\r\n            return String.valueOf(linkedmap.entrySet().toArray()[linkedmap.size() - 1]);\r\n        }\r\n    }\r\n\r\n&lt;p&gt;Here is the output with performance of each method&lt;/p&gt; \r\n\r\n    FindLasstEntryWithArrayListMethod : took 0.162 milliseconds\r\n    FindLasstEntryWithArrayMethod : took 0.025 milliseconds\r\n    FindLasstEntryWithReduceMethod : took 2.776 milliseconds\r\n    FindLasstEntryWithSkipFunctionMethod : took 3.396 milliseconds\r\n    FindLasstEntryWithGuavaIterable : took 11 milliseconds","title":"Java LinkedHashMap get first or last entry","body":"<p>I know that I came too late but I would like to offer some alternatives, not something extraordinary but some cases that none mentioned here. In case that someone doesn't care so much for efficiency but he wants something with more simplicity(perhaps find the last entry value with one line of code), all this will get quite simplified with the arrival of\n <a href=\"https://docs.oracle.com/javase/8/docs/api/\" rel=\"noreferrer\"> Java 8 </a>. I provide some useful scenarios. </p>\n\n<p>For the sake of the completeness, I compare these alternatives with the solution of arrays that already mentioned in this post by others users. I sum up all the cases and i think they would be useful(when performance does matter or no) especially for new developers, always depends on the matter of each problem</p>\n\n<h2>Possible Alternatives</h2>\n\n<h3>Usage of Array Method</h3>\n\n<p>I took it from the previous answer to to make the follow comparisons. This solution belongs @feresr.</p>\n\n<pre><code>  public static String FindLasstEntryWithArrayMethod() {\n        return String.valueOf(linkedmap.entrySet().toArray()[linkedmap.size() - 1]);\n    }\n</code></pre>\n\n<h3>Usage of ArrayList Method</h3>\n\n<p>Similar to the first solution with a little bit different performance</p>\n\n<pre><code>public static String FindLasstEntryWithArrayListMethod() {\n        List&lt;Entry&lt;Integer, String&gt;&gt; entryList = new ArrayList&lt;Map.Entry&lt;Integer, String&gt;&gt;(linkedmap.entrySet());\n        return entryList.get(entryList.size() - 1).getValue();\n    }\n</code></pre>\n\n<h3>Reduce Method</h3>\n\n<p>This method will reduce the set of elements until getting the last element of stream. In addition, it will  return only deterministic results </p>\n\n<pre><code>public static String FindLasstEntryWithReduceMethod() {\n        return linkedmap.entrySet().stream().reduce((first, second) -&gt; second).orElse(null).getValue();\n    }\n</code></pre>\n\n<h3>SkipFunction Method</h3>\n\n<p>This method will get the last element of the stream  by simply skipping all the elements before it</p>\n\n<pre><code>public static String FindLasstEntryWithSkipFunctionMethod() {\n        final long count = linkedmap.entrySet().stream().count();\n        return linkedmap.entrySet().stream().skip(count - 1).findFirst().get().getValue();\n    }\n</code></pre>\n\n<h3>Iterable Alternative</h3>\n\n<blockquote>\n  <p>Iterables.getLast from Google Guava. It has some optimization for\n  Lists and SortedSets too</p>\n</blockquote>\n\n<p></p>\n\n<pre><code>public static String FindLasstEntryWithGuavaIterable() {\n        return Iterables.getLast(linkedmap.entrySet()).getValue();\n    }\n</code></pre>\n\n<p>Here is the full source code</p> \n\n<pre><code>import com.google.common.collect.Iterables;\nimport java.math.BigDecimal;\nimport java.math.RoundingMode;\nimport java.util.ArrayList;\nimport java.util.LinkedHashMap;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.Map.Entry;\n\npublic class PerformanceTest {\n\n    private static long startTime;\n    private static long endTime;\n    private static LinkedHashMap&lt;Integer, String&gt; linkedmap;\n\n    public static void main(String[] args) {\n        linkedmap = new LinkedHashMap&lt;Integer, String&gt;();\n\n        linkedmap.put(12, \"Chaitanya\");\n        linkedmap.put(2, \"Rahul\");\n        linkedmap.put(7, \"Singh\");\n        linkedmap.put(49, \"Ajeet\");\n        linkedmap.put(76, \"Anuj\");\n\n        //call a useless action  so that the caching occurs before the jobs starts.\n        linkedmap.entrySet().forEach(x -&gt; {});\n\n\n\n        startTime = System.nanoTime();\n        FindLasstEntryWithArrayListMethod();\n        endTime = System.nanoTime();\n        System.out.println(\"FindLasstEntryWithArrayListMethod : \" + \"took \" + new BigDecimal((endTime - startTime) / 1000000.000).setScale(3, RoundingMode.CEILING) + \" milliseconds\");\n\n\n         startTime = System.nanoTime();\n        FindLasstEntryWithArrayMethod();\n        endTime = System.nanoTime();\n        System.out.println(\"FindLasstEntryWithArrayMethod : \" + \"took \" + new BigDecimal((endTime - startTime) / 1000000.000).setScale(3, RoundingMode.CEILING) + \" milliseconds\");\n\n        startTime = System.nanoTime();\n        FindLasstEntryWithReduceMethod();\n        endTime = System.nanoTime();\n\n        System.out.println(\"FindLasstEntryWithReduceMethod : \" + \"took \" + new BigDecimal((endTime - startTime) / 1000000.000).setScale(3, RoundingMode.CEILING) + \" milliseconds\");\n\n        startTime = System.nanoTime();\n        FindLasstEntryWithSkipFunctionMethod();\n        endTime = System.nanoTime();\n\n        System.out.println(\"FindLasstEntryWithSkipFunctionMethod : \" + \"took \" + new BigDecimal((endTime - startTime) / 1000000.000).setScale(3, RoundingMode.CEILING) + \" milliseconds\");\n\n        startTime = System.currentTimeMillis();\n        FindLasstEntryWithGuavaIterable();\n        endTime = System.currentTimeMillis();\n        System.out.println(\"FindLasstEntryWithGuavaIterable : \" + \"took \" + (endTime - startTime) + \" milliseconds\");\n\n\n    }\n\n    public static String FindLasstEntryWithReduceMethod() {\n        return linkedmap.entrySet().stream().reduce((first, second) -&gt; second).orElse(null).getValue();\n    }\n\n    public static String FindLasstEntryWithSkipFunctionMethod() {\n        final long count = linkedmap.entrySet().stream().count();\n        return linkedmap.entrySet().stream().skip(count - 1).findFirst().get().getValue();\n    }\n\n    public static String FindLasstEntryWithGuavaIterable() {\n        return Iterables.getLast(linkedmap.entrySet()).getValue();\n    }\n\n    public static String FindLasstEntryWithArrayListMethod() {\n        List&lt;Entry&lt;Integer, String&gt;&gt; entryList = new ArrayList&lt;Map.Entry&lt;Integer, String&gt;&gt;(linkedmap.entrySet());\n        return entryList.get(entryList.size() - 1).getValue();\n    }\n\n    public static String FindLasstEntryWithArrayMethod() {\n        return String.valueOf(linkedmap.entrySet().toArray()[linkedmap.size() - 1]);\n    }\n}\n</code></pre>\n\n<p>Here is the output with performance of each method</p> \n\n<pre><code>FindLasstEntryWithArrayListMethod : took 0.162 milliseconds\nFindLasstEntryWithArrayMethod : took 0.025 milliseconds\nFindLasstEntryWithReduceMethod : took 2.776 milliseconds\nFindLasstEntryWithSkipFunctionMethod : took 3.396 milliseconds\nFindLasstEntryWithGuavaIterable : took 11 milliseconds\n</code></pre>\n"},{"tags":[],"owner":{"account_id":336321,"reputation":11,"user_id":1348441,"display_name":"unknownwill"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1534570214,"creation_date":1534570214,"answer_id":51905569,"question_id":1936462,"body_markdown":"right, you have to manually enumerate keyset till the end of the linkedlist, then retrieve the entry by key and return this entry.","title":"Java LinkedHashMap get first or last entry","body":"<p>right, you have to manually enumerate keyset till the end of the linkedlist, then retrieve the entry by key and return this entry.</p>\n"},{"tags":[],"owner":{"account_id":17396429,"reputation":31,"user_id":12606069,"display_name":"Владислав Шестернин"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1589746350,"creation_date":1589746350,"answer_id":61858157,"question_id":1936462,"body_markdown":"    public static List&lt;Fragment&gt; pullToBackStack() {\r\n        List&lt;Fragment&gt; fragments = new ArrayList&lt;&gt;();\r\n        List&lt;Map.Entry&lt;String, Fragment&gt;&gt; entryList = new ArrayList&lt;&gt;(backMap.entrySet());\r\n        int size = entryList.size();\r\n        if (size &gt; 0) {\r\n            for (int i = size - 1; i &gt;= 0; i--) {// last Fragments\r\n                fragments.add(entryList.get(i).getValue());\r\n                backMap.remove(entryList.get(i).getKey());\r\n            }\r\n            return fragments;\r\n        }\r\n        return null;\r\n    }","title":"Java LinkedHashMap get first or last entry","body":"<pre><code>public static List&lt;Fragment&gt; pullToBackStack() {\n    List&lt;Fragment&gt; fragments = new ArrayList&lt;&gt;();\n    List&lt;Map.Entry&lt;String, Fragment&gt;&gt; entryList = new ArrayList&lt;&gt;(backMap.entrySet());\n    int size = entryList.size();\n    if (size &gt; 0) {\n        for (int i = size - 1; i &gt;= 0; i--) {// last Fragments\n            fragments.add(entryList.get(i).getValue());\n            backMap.remove(entryList.get(i).getKey());\n        }\n        return fragments;\n    }\n    return null;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18973488,"reputation":41,"user_id":13846462,"display_name":"Arnab"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1593598686,"creation_date":1593598686,"answer_id":62674620,"question_id":1936462,"body_markdown":"For first element use `entrySet().iterator().next()` and stop iterating after 1 iteration.\r\nFor last one the easiest way is to preserve the key in a variable whenever you do a map.put.","title":"Java LinkedHashMap get first or last entry","body":"<p>For first element use <code>entrySet().iterator().next()</code> and stop iterating after 1 iteration.\nFor last one the easiest way is to preserve the key in a variable whenever you do a map.put.</p>\n"},{"comments":[{"owner":{"account_id":17010632,"reputation":1359,"user_id":12305715,"display_name":"zerbene"},"score":0,"creation_date":1605001782,"post_id":64765141,"comment_id":114512881,"body_markdown":"Can you maybe add explanation to your answer, to explain what do you have do different/ what do you add or remove.","body":"Can you maybe add explanation to your answer, to explain what do you have do different/ what do you add or remove."}],"tags":[],"owner":{"account_id":4756599,"reputation":11,"user_id":3845213,"display_name":"Atlilo"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1604996208,"creation_date":1604996208,"answer_id":64765141,"question_id":1936462,"body_markdown":"            import java.util.Arrays;\r\n\t\t\timport java.util.LinkedHashMap;\r\n\t\t\timport java.util.List;\r\n\t\t\timport java.util.Map;\r\n\r\n\t\t\tpublic class Scratch {\r\n\t\t\t   public static void main(String[] args) {\r\n\r\n\t\t\t      // Plain java version\r\n\r\n\t\t\t      Map&lt;String, List&lt;Integer&gt;&gt; linked = new LinkedHashMap&lt;&gt;();\r\n\t\t\t      linked.put(&quot;a&quot;, Arrays.asList(1, 2, 3));\r\n\t\t\t      linked.put(&quot;aa&quot;, Arrays.asList(1, 2, 3, 4));\r\n\t\t\t      linked.put(&quot;b&quot;, Arrays.asList(1, 2, 3, 4, 5));\r\n\t\t\t      linked.put(&quot;bb&quot;, Arrays.asList(1, 2, 3, 4, 5, 6));\r\n\r\n\t\t\t      System.out.println(&quot;linked = &quot; + linked);\r\n\r\n\t\t\t      String firstKey = getFirstKey(linked);\r\n\t\t\t      System.out.println(&quot;firstKey = &quot; + firstKey);\r\n\t\t\t      List&lt;Integer&gt; firstEntry = linked.get(firstKey);\r\n\t\t\t      System.out.println(&quot;firstEntry = &quot; + firstEntry);\r\n\r\n\t\t\t      String lastKey = getLastKey(linked);\r\n\t\t\t      System.out.println(&quot;lastKey = &quot; + lastKey);\r\n\t\t\t      List&lt;Integer&gt; lastEntry = linked.get(lastKey);\r\n\t\t\t      System.out.println(&quot;lastEntry = &quot; + lastEntry);\r\n\r\n\r\n\r\n\t\t\t   }\r\n\r\n\t\t\t   private static String getLastKey(Map&lt;String, List&lt;Integer&gt;&gt; linked) {\r\n\t\t\t      int index = 0;\r\n\t\t\t      for (String key : linked.keySet()) {\r\n\t\t\t\t index++;\r\n\t\t\t\t if (index == linked.size()) {\r\n\t\t\t\t    return key;\r\n\t\t\t\t }\r\n\t\t\t      }\r\n\t\t\t      return null;\r\n\t\t\t   }\r\n\r\n\t\t\t   private static String getFirstKey(Map&lt;String, List&lt;Integer&gt;&gt; linked) {\r\n\t\t\t      for (String key : linked.keySet()) {\r\n\t\t\t\t return key;\r\n\t\t\t      }\r\n\t\t\t      return null;\r\n\t\t\t   }\r\n\t\t\t}","title":"Java LinkedHashMap get first or last entry","body":"<pre><code>        import java.util.Arrays;\n        import java.util.LinkedHashMap;\n        import java.util.List;\n        import java.util.Map;\n\n        public class Scratch {\n           public static void main(String[] args) {\n\n              // Plain java version\n\n              Map&lt;String, List&lt;Integer&gt;&gt; linked = new LinkedHashMap&lt;&gt;();\n              linked.put(&quot;a&quot;, Arrays.asList(1, 2, 3));\n              linked.put(&quot;aa&quot;, Arrays.asList(1, 2, 3, 4));\n              linked.put(&quot;b&quot;, Arrays.asList(1, 2, 3, 4, 5));\n              linked.put(&quot;bb&quot;, Arrays.asList(1, 2, 3, 4, 5, 6));\n\n              System.out.println(&quot;linked = &quot; + linked);\n\n              String firstKey = getFirstKey(linked);\n              System.out.println(&quot;firstKey = &quot; + firstKey);\n              List&lt;Integer&gt; firstEntry = linked.get(firstKey);\n              System.out.println(&quot;firstEntry = &quot; + firstEntry);\n\n              String lastKey = getLastKey(linked);\n              System.out.println(&quot;lastKey = &quot; + lastKey);\n              List&lt;Integer&gt; lastEntry = linked.get(lastKey);\n              System.out.println(&quot;lastEntry = &quot; + lastEntry);\n\n\n\n           }\n\n           private static String getLastKey(Map&lt;String, List&lt;Integer&gt;&gt; linked) {\n              int index = 0;\n              for (String key : linked.keySet()) {\n             index++;\n             if (index == linked.size()) {\n                return key;\n             }\n              }\n              return null;\n           }\n\n           private static String getFirstKey(Map&lt;String, List&lt;Integer&gt;&gt; linked) {\n              for (String key : linked.keySet()) {\n             return key;\n              }\n              return null;\n           }\n        }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3030480,"reputation":727,"user_id":2569613,"display_name":"Neetesh Dadwariya"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1641574133,"creation_date":1641574133,"answer_id":70624549,"question_id":1936462,"body_markdown":"Using [Java8 stream][1] this can be done very easily:\r\n\r\n    LinkedHashMap&lt;String, Integer&gt; linkedHashMap = new LinkedHashMap&lt;&gt;();\r\n    linkedHashMap.put(&quot;A&quot;, 1);\r\n    linkedHashMap.put(&quot;B&quot;, 2);\r\n    linkedHashMap.put(&quot;C&quot;, 3);\r\n    linkedHashMap.put(&quot;D&quot;, 4);\r\n\r\n    //First entry\r\n    Map.Entry&lt;String, Integer&gt; firstEntry = linkedHashMap.entrySet().stream().findFirst().get();\r\n\r\n    //Last entry\r\n    Map.Entry&lt;String, Integer&gt; lastEntry = linkedHashMap.entrySet().stream().skip(linkedHashMap.size() - 1).findFirst().get();\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html","title":"Java LinkedHashMap get first or last entry","body":"<p>Using <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html\" rel=\"nofollow noreferrer\">Java8 stream</a> this can be done very easily:</p>\n<pre><code>LinkedHashMap&lt;String, Integer&gt; linkedHashMap = new LinkedHashMap&lt;&gt;();\nlinkedHashMap.put(&quot;A&quot;, 1);\nlinkedHashMap.put(&quot;B&quot;, 2);\nlinkedHashMap.put(&quot;C&quot;, 3);\nlinkedHashMap.put(&quot;D&quot;, 4);\n\n//First entry\nMap.Entry&lt;String, Integer&gt; firstEntry = linkedHashMap.entrySet().stream().findFirst().get();\n\n//Last entry\nMap.Entry&lt;String, Integer&gt; lastEntry = linkedHashMap.entrySet().stream().skip(linkedHashMap.size() - 1).findFirst().get();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1695230818,"creation_date":1686630219,"answer_id":76461679,"question_id":1936462,"body_markdown":"As of Java 21, the first and last entry can be easily accessed using the [`firstEntry()`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedMap.html#firstEntry()) and [`lastEntry()`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedMap.html#lastEntry()) methods on `LinkedHashMap`:\r\n\r\n```lang-java\r\nLinkedHashMap&lt;Integer, String&gt; linkedHashMap = // ...\r\n\r\nEntry&lt;Integer, String&gt; firstEntry = linkedHashMap.firstEntry();\r\nEntry&lt;Integer, String&gt; lastValue = linkedHashMap.lastEntry();\r\n\r\nInteger firstKey = firstEntry.getKey();\r\nInteger lastKey = lastEntry.getKey();\r\nString firstValue = firstEntry.getValue();\r\nString lastValue = lastEntry.getValue();\r\n```\r\n","title":"Java LinkedHashMap get first or last entry","body":"<p>As of Java 21, the first and last entry can be easily accessed using the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedMap.html#firstEntry()\" rel=\"nofollow noreferrer\"><code>firstEntry()</code></a> and <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedMap.html#lastEntry()\" rel=\"nofollow noreferrer\"><code>lastEntry()</code></a> methods on <code>LinkedHashMap</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>LinkedHashMap&lt;Integer, String&gt; linkedHashMap = // ...\n\nEntry&lt;Integer, String&gt; firstEntry = linkedHashMap.firstEntry();\nEntry&lt;Integer, String&gt; lastValue = linkedHashMap.lastEntry();\n\nInteger firstKey = firstEntry.getKey();\nInteger lastKey = lastEntry.getKey();\nString firstValue = firstEntry.getValue();\nString lastValue = lastEntry.getValue();\n</code></pre>\n"}],"owner":{"account_id":59543,"reputation":3523,"user_id":178132,"accept_rate":58,"display_name":"maiky"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":182590,"favorite_count":0,"down_vote_count":0,"up_vote_count":184,"accepted_answer_id":1936472,"answer_count":17,"score":184,"last_activity_date":1695230818,"creation_date":1261331642,"question_id":1936462,"body_markdown":"I have used [`LinkedHashMap`][1] because it is important the order in which keys entered in the map.\r\n\r\nBut now I want to get the value of key in the first place (the first entered entry) or the last.\r\n\r\nShould there be a method like `first()` and `last()` or something like that?\r\n\r\nDo I need to have an iterator to just get the first key entry? That is why I used [`LinkedHashMap`][1]! \r\n\r\nThanks!\r\n\r\n\r\n  [1]: http://java.sun.com/j2se/1.5.0/docs/api/java/util/LinkedHashMap.html","title":"Java LinkedHashMap get first or last entry","body":"<p>I have used <a href=\"http://java.sun.com/j2se/1.5.0/docs/api/java/util/LinkedHashMap.html\" rel=\"noreferrer\"><code>LinkedHashMap</code></a> because it is important the order in which keys entered in the map.</p>\n\n<p>But now I want to get the value of key in the first place (the first entered entry) or the last.</p>\n\n<p>Should there be a method like <code>first()</code> and <code>last()</code> or something like that?</p>\n\n<p>Do I need to have an iterator to just get the first key entry? That is why I used <a href=\"http://java.sun.com/j2se/1.5.0/docs/api/java/util/LinkedHashMap.html\" rel=\"noreferrer\"><code>LinkedHashMap</code></a>! </p>\n\n<p>Thanks!</p>\n"},{"tags":["java","cucumber"],"comments":[{"owner":{"account_id":2562742,"reputation":5917,"user_id":2851311,"display_name":"hfontanez"},"score":0,"creation_date":1694797185,"post_id":77114128,"comment_id":135943119,"body_markdown":"This doesn&#39;t look like a real use case. If a business user was tasked to create a BDD test case, how is this user supposed to know that `Given a employee is created` actually means `Given no employee is created`? While I think I get what you are trying to do, the over complication seems to be pointless. Creating an employee should have a 1-many result.","body":"This doesn&#39;t look like a real use case. If a business user was tasked to create a BDD test case, how is this user supposed to know that <code>Given a employee is created</code> actually means <code>Given no employee is created</code>? While I think I get what you are trying to do, the over complication seems to be pointless. Creating an employee should have a 1-many result."},{"owner":{"account_id":11088478,"reputation":53,"user_id":8141279,"display_name":"Pruthvi Lalji"},"score":0,"creation_date":1694799897,"post_id":77114128,"comment_id":135943578,"body_markdown":"`Given a employee is created` will always create an employee, if would use the default values if not presented in the dataTable","body":"<code>Given a employee is created</code> will always create an employee, if would use the default values if not presented in the dataTable"},{"owner":{"account_id":2562742,"reputation":5917,"user_id":2851311,"display_name":"hfontanez"},"score":0,"creation_date":1694800891,"post_id":77114128,"comment_id":135943752,"body_markdown":"I stand corrected. I missed that detail in your code example.","body":"I stand corrected. I missed that detail in your code example."},{"owner":{"account_id":2562742,"reputation":5917,"user_id":2851311,"display_name":"hfontanez"},"score":0,"creation_date":1694802136,"post_id":77114128,"comment_id":135943963,"body_markdown":"By the way, what happens when you run your code?","body":"By the way, what happens when you run your code?"},{"owner":{"account_id":11088478,"reputation":53,"user_id":8141279,"display_name":"Pruthvi Lalji"},"score":0,"creation_date":1695022097,"post_id":77114128,"comment_id":135963216,"body_markdown":"io.cucumber.core.exception.CucumberException: Step [Given a employee is created] is defined with 1 parameters at &#39;com. createEmployee.steps. employeeStep. createEmployee(io.cucumber.datatable.DataTable)&#39;.\nHowever, the gherkin step has 0 arguments.","body":"io.cucumber.core.exception.CucumberException: Step [Given a employee is created] is defined with 1 parameters at &#39;com. createEmployee.steps. employeeStep. createEmployee(io.cucumber.datatable.DataTable)&#39;. However, the gherkin step has 0 arguments."},{"owner":{"account_id":2562742,"reputation":5917,"user_id":2851311,"display_name":"hfontanez"},"score":0,"creation_date":1695039089,"post_id":77114128,"comment_id":135966440,"body_markdown":"I took the liberty to edit your question and put the exception as part of it. For future reference, this is relevant part of the issue and should always be included in the description of your problem so that other people have the complete picture before attempting to answer your questions.","body":"I took the liberty to edit your question and put the exception as part of it. For future reference, this is relevant part of the issue and should always be included in the description of your problem so that other people have the complete picture before attempting to answer your questions."},{"owner":{"account_id":2562742,"reputation":5917,"user_id":2851311,"display_name":"hfontanez"},"score":1,"creation_date":1695042700,"post_id":77114128,"comment_id":135967230,"body_markdown":"I hope my answer is clear enough. I would appreciate an upvote if the answer is helpful and to select it as the answer if it fully addressed your issue.","body":"I hope my answer is clear enough. I would appreciate an upvote if the answer is helpful and to select it as the answer if it fully addressed your issue."},{"owner":{"account_id":11088478,"reputation":53,"user_id":8141279,"display_name":"Pruthvi Lalji"},"score":1,"creation_date":1695234934,"post_id":77114128,"comment_id":135998820,"body_markdown":"Yh, its the Gherkin issue, I&#39;ve decided to go ahead with multiple step","body":"Yh, its the Gherkin issue, I&#39;ve decided to go ahead with multiple step"}],"answers":[{"comments":[{"owner":{"account_id":2562742,"reputation":5917,"user_id":2851311,"display_name":"hfontanez"},"score":0,"creation_date":1695251998,"post_id":77127072,"comment_id":136001123,"body_markdown":"@PruthviLalji make sure you add comments to your scenario that the empty row is to support &quot;default user&quot; creation. You and your current teammates know that now, but if someone new comes in and you aren&#39;t there to explain it, it might take a while for them to figure this out. Make the intent clear with good comments!","body":"@PruthviLalji make sure you add comments to your scenario that the empty row is to support &quot;default user&quot; creation. You and your current teammates know that now, but if someone new comes in and you aren&#39;t there to explain it, it might take a while for them to figure this out. Make the intent clear with good comments!"},{"owner":{"account_id":11088478,"reputation":53,"user_id":8141279,"display_name":"Pruthvi Lalji"},"score":1,"creation_date":1695299879,"post_id":77127072,"comment_id":136007846,"body_markdown":"good shout. Thank @hfontanez","body":"good shout. Thank @hfontanez"}],"tags":[],"owner":{"account_id":2562742,"reputation":5917,"user_id":2851311,"display_name":"hfontanez"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1695230800,"creation_date":1695038862,"answer_id":77127072,"question_id":77114128,"body_markdown":"You defined a step definition that takes a `DataTable` argument but your example to use a default employee uses a step with zero arguments. That is not valid in Gherkins. In fact, this is not valid in Java!\r\n\r\nWhen you create a function in Java\r\n\r\n```\r\npublic void myMethod(String arg) {\r\n...\r\n}\r\n```\r\n\r\nEven if the method accept a `null` value, I must pass a reference to something when I call that method, even if the value is `null`. This\r\n\r\n```\r\nmyObj.myMethod();\r\n```\r\nis not the same as\r\n```\r\nmyObj.myMethod(null);\r\n```\r\nThose are two different methods. Don&#39;t you agree? **Passing no arguments to a function is not the same as passing null arguments.** To make it more relevant to your specific issue, passing no `DataTable` is not the same as passing a null `DataTable`, or passing no `DataTable` rows is not the same as passing empty or null rows. This is what the exception is telling you. You are passing nothing to a function that expects something to be passed to it.\r\n\r\nAlthough I have never taken this approach, I believe you MUST add an empty row to your `DataTable` for your default case to work and I am not even sure if that would work either. Try something like this\r\n\r\n```\r\nGiven a employee is created\r\n| employeeName | employeeNumber |\r\n|              |                |\r\n| John         | 123.           | \r\n```\r\nNow it is up to Gherkin to see if the above case is supported. But the above is the equivalent (in Java) of passing **null** or empty arguments rather than **no** arguments. That said, the above, if it works, I am not sure if it will create a null map. For starters, I don&#39;t know what version of Cucumber you are using. I think newer versions replace empty cells with `null` but I am not certain how this will work, even if you use a newer version, since the key value is null in the above example. This solution may not fully work, but it should get you close.","title":"Java Cucumber with optional Datatable parameter","body":"<p>You defined a step definition that takes a <code>DataTable</code> argument but your example to use a default employee uses a step with zero arguments. That is not valid in Gherkins. In fact, this is not valid in Java!</p>\n<p>When you create a function in Java</p>\n<pre><code>public void myMethod(String arg) {\n...\n}\n</code></pre>\n<p>Even if the method accept a <code>null</code> value, I must pass a reference to something when I call that method, even if the value is <code>null</code>. This</p>\n<pre><code>myObj.myMethod();\n</code></pre>\n<p>is not the same as</p>\n<pre><code>myObj.myMethod(null);\n</code></pre>\n<p>Those are two different methods. Don't you agree? <strong>Passing no arguments to a function is not the same as passing null arguments.</strong> To make it more relevant to your specific issue, passing no <code>DataTable</code> is not the same as passing a null <code>DataTable</code>, or passing no <code>DataTable</code> rows is not the same as passing empty or null rows. This is what the exception is telling you. You are passing nothing to a function that expects something to be passed to it.</p>\n<p>Although I have never taken this approach, I believe you MUST add an empty row to your <code>DataTable</code> for your default case to work and I am not even sure if that would work either. Try something like this</p>\n<pre><code>Given a employee is created\n| employeeName | employeeNumber |\n|              |                |\n| John         | 123.           | \n</code></pre>\n<p>Now it is up to Gherkin to see if the above case is supported. But the above is the equivalent (in Java) of passing <strong>null</strong> or empty arguments rather than <strong>no</strong> arguments. That said, the above, if it works, I am not sure if it will create a null map. For starters, I don't know what version of Cucumber you are using. I think newer versions replace empty cells with <code>null</code> but I am not certain how this will work, even if you use a newer version, since the key value is null in the above example. This solution may not fully work, but it should get you close.</p>\n"}],"owner":{"account_id":11088478,"reputation":53,"user_id":8141279,"display_name":"Pruthvi Lalji"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":83,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77127072,"answer_count":1,"score":0,"last_activity_date":1695230800,"creation_date":1694796646,"question_id":77114128,"body_markdown":"I am trying to write a component test were it would be ideal where I can either pass in the values if needed to configure or else use a default values. \r\n\r\nEmployee.class\r\n\r\n    public class Employee {\r\n    public static final Employee DEFAULT_EMPLOYEE = Employee.builder()\r\n    .employeName(&quot;Jack&quot;)\r\n    .employeNumber(01)\r\n    .build();\r\n\r\n \r\n      String employeeName;\r\n      Integer employeeNumber;\r\n    ....\r\n    }\r\n\r\nemployee.feature\r\n\r\n    Given a employee is created\r\n    or\r\n    Given a employee is created\r\n    | employeeName | employeeNumber | \r\n    | John         | 123.           | \r\n\r\nemployeeStep.java\r\n\r\n    @When(&quot;a/the employee is created&quot;)\r\n      public void createEmployee(Employee employee){\r\n      service.createEmpoyee(employee);\r\n    }\r\n\r\nEmployeeTransformer.java\r\n\r\n    public class EmployeeTransformer {\r\n    \r\n    @DataTableType\r\n    public Employee transform(Map&lt;String, String&gt; data) {\r\n      EmployeeBuilder eb = DEFAULT_EMPLOYEE.toBuilder();\r\n    \r\n      Optional.ofNullable(data.get(EMPLOYEEE_NAME))\r\n      .map(String::valueOf)\r\n      .ifPresent(eb::employeeName);\r\n    \r\n      ....\r\n    \r\n      return eb.build();\r\n     }\r\n    }\r\n\r\nAbove transformer handles the step when dataTable parameters is passed in the step. The problem is that when a step with no data table is added to a scenario, it throws the following exception:\r\n\r\n```\r\nio.cucumber.core.exception.CucumberException: Step [Given a employee is created] is defined with 1 parameters at &#39;com. createEmployee.steps. employeeStep. createEmployee(io.cucumber.datatable.DataTable)&#39;. However, the gherkin step has 0 arguments.\r\n```\r\n","title":"Java Cucumber with optional Datatable parameter","body":"<p>I am trying to write a component test were it would be ideal where I can either pass in the values if needed to configure or else use a default values.</p>\n<p>Employee.class</p>\n<pre><code>public class Employee {\npublic static final Employee DEFAULT_EMPLOYEE = Employee.builder()\n.employeName(&quot;Jack&quot;)\n.employeNumber(01)\n.build();\n\n\n  String employeeName;\n  Integer employeeNumber;\n....\n}\n</code></pre>\n<p>employee.feature</p>\n<pre><code>Given a employee is created\nor\nGiven a employee is created\n| employeeName | employeeNumber | \n| John         | 123.           | \n</code></pre>\n<p>employeeStep.java</p>\n<pre><code>@When(&quot;a/the employee is created&quot;)\n  public void createEmployee(Employee employee){\n  service.createEmpoyee(employee);\n}\n</code></pre>\n<p>EmployeeTransformer.java</p>\n<pre><code>public class EmployeeTransformer {\n\n@DataTableType\npublic Employee transform(Map&lt;String, String&gt; data) {\n  EmployeeBuilder eb = DEFAULT_EMPLOYEE.toBuilder();\n\n  Optional.ofNullable(data.get(EMPLOYEEE_NAME))\n  .map(String::valueOf)\n  .ifPresent(eb::employeeName);\n\n  ....\n\n  return eb.build();\n }\n}\n</code></pre>\n<p>Above transformer handles the step when dataTable parameters is passed in the step. The problem is that when a step with no data table is added to a scenario, it throws the following exception:</p>\n<pre><code>io.cucumber.core.exception.CucumberException: Step [Given a employee is created] is defined with 1 parameters at 'com. createEmployee.steps. employeeStep. createEmployee(io.cucumber.datatable.DataTable)'. However, the gherkin step has 0 arguments.\n</code></pre>\n"},{"tags":["java","arrays","loops","arraylist","nested-loops"],"comments":[{"owner":{"account_id":17773243,"reputation":1720,"user_id":12906246,"display_name":"rootkonda"},"score":1,"creation_date":1597699326,"post_id":63458798,"comment_id":112214183,"body_markdown":"You want to return only unique values ?","body":"You want to return only unique values ?"},{"owner":{"account_id":17827664,"reputation":63,"user_id":12949744,"display_name":"eldlit"},"score":0,"creation_date":1597699545,"post_id":63458798,"comment_id":112214259,"body_markdown":"I want to remove all the duplicates before the last one. For example  - 7,7,4,5,7,2,7( input)  and 4,5,2,7( output). As you see last &#39;7&#39; stays","body":"I want to remove all the duplicates before the last one. For example  - 7,7,4,5,7,2,7( input)  and 4,5,2,7( output). As you see last &#39;7&#39; stays"},{"owner":{"account_id":17773243,"reputation":1720,"user_id":12906246,"display_name":"rootkonda"},"score":0,"creation_date":1597699747,"post_id":63458798,"comment_id":112214332,"body_markdown":"Well, its nothing but returning unique elements in the given array right? The position of any last duplicate element means after which there are unique elements only. Or do you want to remove only the duplicate elements of the last duplicate and leave other duplicate elements before last duplicate element unchanged. Which one is it ?","body":"Well, its nothing but returning unique elements in the given array right? The position of any last duplicate element means after which there are unique elements only. Or do you want to remove only the duplicate elements of the last duplicate and leave other duplicate elements before last duplicate element unchanged. Which one is it ?"},{"owner":{"account_id":17827664,"reputation":63,"user_id":12949744,"display_name":"eldlit"},"score":0,"creation_date":1597699917,"post_id":63458798,"comment_id":112214380,"body_markdown":"Yes, i think you get it right","body":"Yes, i think you get it right"},{"owner":{"account_id":17773243,"reputation":1720,"user_id":12906246,"display_name":"rootkonda"},"score":0,"creation_date":1597700030,"post_id":63458798,"comment_id":112214415,"body_markdown":"I said 2 options. If you say my 2nd explanation is right then the output you showed is working as expected right. or for my 1st option if you just want unique elements just use HashSet","body":"I said 2 options. If you say my 2nd explanation is right then the output you showed is working as expected right. or for my 1st option if you just want unique elements just use HashSet"}],"answers":[{"tags":[],"owner":{"account_id":19254723,"reputation":2061,"user_id":14071914,"display_name":"JustAnotherDeveloper"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1597699782,"creation_date":1597699782,"answer_id":63458899,"question_id":63458798,"body_markdown":"You can create a second list, iterate through your input list and for each element of your input list check if the second list contains it. If it doesn&#39;t, add it to the second list. This passes the test case that you mention in your original post:\r\n\r\n```\r\nimport java.util.*;\r\n\r\npublic class MyClass {\r\n    public static void main(String args[]) {\r\n      List&lt;Integer&gt; test = new ArrayList&lt;&gt;();\r\n      List&lt;Integer&gt; noduplicates = new ArrayList&lt;&gt;();\r\n      test.add(1);\r\n      test.add(2);\r\n      test.add(1);\r\n      test.add(2);\r\n      test.add(1);\r\n      test.add(2);\r\n      test.add(3);\r\n      \r\n      for (Integer i : test) {\r\n          if (!noduplicates.contains(i)) {\r\n              noduplicates.add(i);\r\n          }\r\n      }\r\n      System.out.println(noduplicates);\r\n    }\r\n}\r\n```","title":"Removing left sided duplicates from array","body":"<p>You can create a second list, iterate through your input list and for each element of your input list check if the second list contains it. If it doesn't, add it to the second list. This passes the test case that you mention in your original post:</p>\n<pre><code>import java.util.*;\n\npublic class MyClass {\n    public static void main(String args[]) {\n      List&lt;Integer&gt; test = new ArrayList&lt;&gt;();\n      List&lt;Integer&gt; noduplicates = new ArrayList&lt;&gt;();\n      test.add(1);\n      test.add(2);\n      test.add(1);\n      test.add(2);\n      test.add(1);\n      test.add(2);\n      test.add(3);\n      \n      for (Integer i : test) {\n          if (!noduplicates.contains(i)) {\n              noduplicates.add(i);\n          }\n      }\n      System.out.println(noduplicates);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6936824,"reputation":41,"user_id":5324463,"display_name":"Muhammet Keleş"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1597699876,"creation_date":1597699876,"answer_id":63458913,"question_id":63458798,"body_markdown":"[HashSet][1] can do this since you cant put duplicate elements to [HashSet][1], all you need to do is put your array into [HashSet][1].\r\n\r\n    List&lt;Integer&gt; arr2 = new ArrayList&lt;&gt;(new HashSet&lt;&gt;(arr));\r\n\r\n[1]: https://www.w3schools.com/java/java_hashset.asp","title":"Removing left sided duplicates from array","body":"<p><a href=\"https://www.w3schools.com/java/java_hashset.asp\" rel=\"nofollow noreferrer\">HashSet</a> can do this since you cant put duplicate elements to <a href=\"https://www.w3schools.com/java/java_hashset.asp\" rel=\"nofollow noreferrer\">HashSet</a>, all you need to do is put your array into <a href=\"https://www.w3schools.com/java/java_hashset.asp\" rel=\"nofollow noreferrer\">HashSet</a>.</p>\n<pre><code>List&lt;Integer&gt; arr2 = new ArrayList&lt;&gt;(new HashSet&lt;&gt;(arr));\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"score":0,"creation_date":1686636870,"post_id":63459023,"comment_id":134822191,"body_markdown":"Java 21 is adding an `addLast` method to `LinkedHashSet`, which allows for a simplified version of this approach: https://stackoverflow.com/a/76462109/1108305","body":"Java 21 is adding an <code>addLast</code> method to <code>LinkedHashSet</code>, which allows for a simplified version of this approach: <a href=\"https://stackoverflow.com/a/76462109/1108305\">stackoverflow.com/a/76462109/1108305</a>"}],"tags":[],"owner":{"account_id":2179728,"reputation":73077,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1597700948,"creation_date":1597700540,"answer_id":63459023,"question_id":63458798,"body_markdown":"A simple way will be to\r\n\r\n 1. Add the numbers of the array in reverse order to a `LinkedHashSet` in order to keep only unique numbers as well as to preserve the last entry of each unique number.\r\n 2. Create a `List` out of the `LinkedHashSet`.\r\n 3. Reverse the `List` using `Collections#reverse`.\r\n\r\n\r\n\t\timport java.util.ArrayList;\r\n\t\timport java.util.Collections;\r\n\t\timport java.util.LinkedHashSet;\r\n\t\timport java.util.List;\r\n\t\timport java.util.Set;\r\n\r\n\t\tpublic class Main {\r\n\t\t\tpublic static void main(String[] args) {\r\n\t\t\t\tSet&lt;Integer&gt; set = new LinkedHashSet&lt;&gt;();\r\n\t\t\t\tint[] arr = { 7, 7, 4, 5, 7, 2, 7 };\r\n\r\n\t\t\t\t// Add the numbers of the array in reverse order to a LinkedHashSet in order to remove\r\n\t\t\t\t// duplicates as well as to preserve the last entry of each unique number.\r\n\t\t\t\tfor (int i = arr.length - 1; i &gt;= 0; i--) {\r\n\t\t\t\t\tset.add(arr[i]);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Create a List out of the LinkedHashSet\r\n\t\t\t\tList&lt;Integer&gt; list = new ArrayList&lt;&gt;(set);\r\n\r\n\t\t\t\t// Reverse the List\r\n\t\t\t\tCollections.reverse(list);\r\n\r\n\t\t\t\t// Display the result\r\n\t\t\t\tSystem.out.println(list);\r\n\t\t\t}\r\n\t\t}\r\n\r\n**Output:**\r\n\r\n    [4, 5, 2, 7]\r\n\r\n","title":"Removing left sided duplicates from array","body":"<p>A simple way will be to</p>\n<ol>\n<li><p>Add the numbers of the array in reverse order to a <code>LinkedHashSet</code> in order to keep only unique numbers as well as to preserve the last entry of each unique number.</p>\n</li>\n<li><p>Create a <code>List</code> out of the <code>LinkedHashSet</code>.</p>\n</li>\n<li><p>Reverse the <code>List</code> using <code>Collections#reverse</code>.</p>\n<pre><code>import java.util.ArrayList;\nimport java.util.Collections;\nimport java.util.LinkedHashSet;\nimport java.util.List;\nimport java.util.Set;\n\npublic class Main {\n    public static void main(String[] args) {\n        Set&lt;Integer&gt; set = new LinkedHashSet&lt;&gt;();\n        int[] arr = { 7, 7, 4, 5, 7, 2, 7 };\n\n        // Add the numbers of the array in reverse order to a LinkedHashSet in order to remove\n        // duplicates as well as to preserve the last entry of each unique number.\n        for (int i = arr.length - 1; i &gt;= 0; i--) {\n            set.add(arr[i]);\n        }\n\n        // Create a List out of the LinkedHashSet\n        List&lt;Integer&gt; list = new ArrayList&lt;&gt;(set);\n\n        // Reverse the List\n        Collections.reverse(list);\n\n        // Display the result\n        System.out.println(list);\n    }\n}\n</code></pre>\n</li>\n</ol>\n<p><strong>Output:</strong></p>\n<pre><code>[4, 5, 2, 7]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695230771,"creation_date":1686636829,"answer_id":76462109,"question_id":63458798,"body_markdown":"As of Java 21, a [`LinkedHashSet`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/LinkedHashSet.html) can be used with its [`addLast(e)`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/LinkedHashSet.html#addLast(E)) method.\r\n\r\n```lang-java\r\npublic static int[] solve(int[] arr) {\r\n    SequencedSet&lt;Integer&gt; set = new LinkedHashSet&lt;&gt;();\r\n    for (int i : arr) {\r\n        set.addLast(i);\r\n    }\r\n    return set.stream().mapToInt(Integer::intValue).toArray();\r\n}\r\n```\r\n\r\n`LinkedHashSet` is a collection class which disallows duplicates (due to being a [`Set`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Set.html)) while preserving order (due to being a [`SequencedCollection`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedCollection.html)).  The `addLast` method adds the given item to the end of the set if it isn&#39;t already present, or moves it to the end if it is.","title":"Removing left sided duplicates from array","body":"<p>As of Java 21, a <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/LinkedHashSet.html\" rel=\"nofollow noreferrer\"><code>LinkedHashSet</code></a> can be used with its <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/LinkedHashSet.html#addLast(E)\" rel=\"nofollow noreferrer\"><code>addLast(e)</code></a> method.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static int[] solve(int[] arr) {\n    SequencedSet&lt;Integer&gt; set = new LinkedHashSet&lt;&gt;();\n    for (int i : arr) {\n        set.addLast(i);\n    }\n    return set.stream().mapToInt(Integer::intValue).toArray();\n}\n</code></pre>\n<p><code>LinkedHashSet</code> is a collection class which disallows duplicates (due to being a <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Set.html\" rel=\"nofollow noreferrer\"><code>Set</code></a>) while preserving order (due to being a <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedCollection.html\" rel=\"nofollow noreferrer\"><code>SequencedCollection</code></a>).  The <code>addLast</code> method adds the given item to the end of the set if it isn't already present, or moves it to the end if it is.</p>\n"}],"owner":{"account_id":17827664,"reputation":63,"user_id":12949744,"display_name":"eldlit"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":430,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"accepted_answer_id":63459023,"answer_count":4,"score":2,"last_activity_date":1695230771,"creation_date":1597699113,"question_id":63458798,"body_markdown":"I&#39;m trying to find mistakes in my code and i wonder if you could help me. My task is to write a method that would take an array as an input and return this array without left duplicates(last numbers stay). My code doesn&#39;t work in case when input is( 1,2,1,2,1,2,3 ) It returns (1, 1, 2, 3) instead of 1,2,3. Here is the code \r\n```\r\n     public static int [] solve(int [] arr){\r\n          boolean check=false;\r\n        ArrayList&lt;Integer&gt; test = new ArrayList&lt;&gt;(); // idk how to compete this task without ArrayList\r\n          for (int i = 0; i &lt; arr.length; i++) { // Here i pass my array to ArrayList\r\n             test.add(arr[i]);\r\n             }\r\n             \r\n            while(check==false) {\r\n                for (int i = 0; i &lt; test.size(); i++) {\r\n                   for (int j = i + 1; j &lt; test.size(); j++) { // Somewhere here must be my mistake that i can&#39;t find \r\n                       check=true;\r\n                       if (test.get(i) == test.get(j)) {\r\n                           test.remove(i);\r\n                          check=false;\r\n                       }\r\n                   }\r\n               }\r\n           }\r\n      // i created second array to return array without duplcates. \r\n           int arr2[];\r\n             arr2=new int[test.size()];\r\n             for(int i=0;i&lt;arr2.length;i++){\r\n                 arr2[i]=test.get(i);\r\n             }\r\n        \r\n        return arr2;\r\n    \r\n       }\r\n     }\r\n```\r\nI tried to complete this task on my own, so i didnt use Google to get help until now. If you know how to improve my code feel free to change everything you want to. Thank you in advance! ","title":"Removing left sided duplicates from array","body":"<p>I'm trying to find mistakes in my code and i wonder if you could help me. My task is to write a method that would take an array as an input and return this array without left duplicates(last numbers stay). My code doesn't work in case when input is( 1,2,1,2,1,2,3 ) It returns (1, 1, 2, 3) instead of 1,2,3. Here is the code</p>\n<pre><code>     public static int [] solve(int [] arr){\n          boolean check=false;\n        ArrayList&lt;Integer&gt; test = new ArrayList&lt;&gt;(); // idk how to compete this task without ArrayList\n          for (int i = 0; i &lt; arr.length; i++) { // Here i pass my array to ArrayList\n             test.add(arr[i]);\n             }\n             \n            while(check==false) {\n                for (int i = 0; i &lt; test.size(); i++) {\n                   for (int j = i + 1; j &lt; test.size(); j++) { // Somewhere here must be my mistake that i can't find \n                       check=true;\n                       if (test.get(i) == test.get(j)) {\n                           test.remove(i);\n                          check=false;\n                       }\n                   }\n               }\n           }\n      // i created second array to return array without duplcates. \n           int arr2[];\n             arr2=new int[test.size()];\n             for(int i=0;i&lt;arr2.length;i++){\n                 arr2[i]=test.get(i);\n             }\n        \n        return arr2;\n    \n       }\n     }\n</code></pre>\n<p>I tried to complete this task on my own, so i didnt use Google to get help until now. If you know how to improve my code feel free to change everything you want to. Thank you in advance!</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":195331,"reputation":275428,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":5,"creation_date":1394065711,"post_id":22212412,"comment_id":33724243,"body_markdown":"A `Set` doesn&#39;t have an order. Can you clarify? Also, `reverse` takes a `List`.","body":"A <code>Set</code> doesn&#39;t have an order. Can you clarify? Also, <code>reverse</code> takes a <code>List</code>."},{"owner":{"account_id":405356,"reputation":31611,"user_id":774183,"accept_rate":78,"display_name":"carlspring"},"score":1,"creation_date":1394065900,"post_id":22212412,"comment_id":33724310,"body_markdown":"Okay... I mean a `LinkedHashSet` (which is ordered). What&#39;s the best way to reverse it? Do I need to get the iterator and just iterate over it, or is there a smarter way?","body":"Okay... I mean a <code>LinkedHashSet</code> (which is ordered). What&#39;s the best way to reverse it? Do I need to get the iterator and just iterate over it, or is there a smarter way?"},{"owner":{"account_id":343645,"reputation":48152,"user_id":675502,"display_name":"dlev"},"score":3,"creation_date":1394065900,"post_id":22212412,"comment_id":33724311,"body_markdown":"@SotiriosDelimanolis In Java, `TreeSet`s keep their items in sorted order. To get at the elements in reverse order, you can use the `descendingSet()` method. For `LinkedHashSet`, see this answer: http://stackoverflow.com/questions/10741902/java-linkedhashset-backwards-iteration","body":"@SotiriosDelimanolis In Java, <code>TreeSet</code>s keep their items in sorted order. To get at the elements in reverse order, you can use the <code>descendingSet()</code> method. For <code>LinkedHashSet</code>, see this answer: <a href=\"http://stackoverflow.com/questions/10741902/java-linkedhashset-backwards-iteration\" title=\"java linkedhashset backwards iteration\">stackoverflow.com/questions/10741902/&hellip;</a>"},{"owner":{"account_id":2366187,"reputation":60162,"user_id":2071828,"accept_rate":88,"display_name":"Boris the Spider"},"score":4,"creation_date":1394065965,"post_id":22212412,"comment_id":33724333,"body_markdown":"A `LinkedHashSet` is not _ordered_ it is `Linked`. If you want to loop over the items in reverse order of insertion use an `Iterator`.","body":"A <code>LinkedHashSet</code> is not <i>ordered</i> it is <code>Linked</code>. If you want to loop over the items in reverse order of insertion use an <code>Iterator</code>."},{"owner":{"account_id":343645,"reputation":48152,"user_id":675502,"display_name":"dlev"},"score":2,"creation_date":1394066025,"post_id":22212412,"comment_id":33724362,"body_markdown":"@BoristheSpider It&#39;s really dependent on what you mean by &quot;ordered&quot;. `TreeSet` maintains a &quot;sorted&quot; order, whereas `LinkedHashSet` maintains the insertion order (and thus does have a predictable iteration order.)","body":"@BoristheSpider It&#39;s really dependent on what you mean by &quot;ordered&quot;. <code>TreeSet</code> maintains a &quot;sorted&quot; order, whereas <code>LinkedHashSet</code> maintains the insertion order (and thus does have a predictable iteration order.)"},{"owner":{"account_id":2366187,"reputation":60162,"user_id":2071828,"accept_rate":88,"display_name":"Boris the Spider"},"score":1,"creation_date":1394066226,"post_id":22212412,"comment_id":33724439,"body_markdown":"@dlev you&#39;re right - it&#39;s mainly semantics.","body":"@dlev you&#39;re right - it&#39;s mainly semantics."}],"answers":[{"comments":[{"owner":{"account_id":405356,"reputation":31611,"user_id":774183,"accept_rate":78,"display_name":"carlspring"},"score":0,"creation_date":1394066311,"post_id":22212472,"comment_id":33724463,"body_markdown":"Wouldn&#39;t the `TreeSet` re-order them after I have added them (and mix up the order)...?","body":"Wouldn&#39;t the <code>TreeSet</code> re-order them after I have added them (and mix up the order)...?"},{"owner":{"account_id":1878140,"reputation":8733,"user_id":1698887,"accept_rate":50,"display_name":"Daniel Williams"},"score":0,"creation_date":1394066535,"post_id":22212472,"comment_id":33724528,"body_markdown":"No that is why requires a comparator to maintain the order. If the comparator isn&#39;t correctly implemented then yes your order can be very strange.","body":"No that is why requires a comparator to maintain the order. If the comparator isn&#39;t correctly implemented then yes your order can be very strange."},{"owner":{"account_id":2366187,"reputation":60162,"user_id":2071828,"accept_rate":88,"display_name":"Boris the Spider"},"score":1,"creation_date":1394067686,"post_id":22212472,"comment_id":33724908,"body_markdown":"The OP is using a `LinkedHashSet` - this maintains insertion order. Putting the items into a `TreeSet` would obviously break this. Unless you supplied an explicit ordering comparator - which defeats the object somewhat.","body":"The OP is using a <code>LinkedHashSet</code> - this maintains insertion order. Putting the items into a <code>TreeSet</code> would obviously break this. Unless you supplied an explicit ordering comparator - which defeats the object somewhat."},{"owner":{"account_id":1878140,"reputation":8733,"user_id":1698887,"accept_rate":50,"display_name":"Daniel Williams"},"score":1,"creation_date":1394068063,"post_id":22212472,"comment_id":33725024,"body_markdown":"Ah that was added in an edit. I&#39;m surprised LinkedHashSet doesn&#39;t have a reverse iterator since the docs say the implementation is backed by a doubly linked list.","body":"Ah that was added in an edit. I&#39;m surprised LinkedHashSet doesn&#39;t have a reverse iterator since the docs say the implementation is backed by a doubly linked list."},{"owner":{"account_id":405356,"reputation":31611,"user_id":774183,"accept_rate":78,"display_name":"carlspring"},"score":0,"creation_date":1394068176,"post_id":22212472,"comment_id":33725062,"body_markdown":"That was indeed added a minute, or two after I added the post. Sorry about that.","body":"That was indeed added a minute, or two after I added the post. Sorry about that."}],"tags":[],"owner":{"account_id":1878140,"reputation":8733,"user_id":1698887,"accept_rate":50,"display_name":"Daniel Williams"},"comment_count":5,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1394066002,"creation_date":1394066002,"answer_id":22212472,"question_id":22212412,"body_markdown":"Check this out\r\n\r\nhttp://docs.oracle.com/javase/7/docs/api/java/util/TreeSet.html#descendingSet()\r\n\r\nIf you use a TreeSet you can get reverse order by calling descendingSet.","title":"Sort a Set in reverse order","body":"<p>Check this out</p>\n\n<p><a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/TreeSet.html#descendingSet()\" rel=\"nofollow\">http://docs.oracle.com/javase/7/docs/api/java/util/TreeSet.html#descendingSet()</a></p>\n\n<p>If you use a TreeSet you can get reverse order by calling descendingSet.</p>\n"},{"comments":[{"owner":{"account_id":405356,"reputation":31611,"user_id":774183,"accept_rate":78,"display_name":"carlspring"},"score":0,"creation_date":1394066493,"post_id":22212477,"comment_id":33724518,"body_markdown":"Wouldn&#39;t this be inefficient (memory-wise) with larger sets of data (as you&#39;ll end up having the same data in memory twice)? My input is a `Set`, not a `List`.","body":"Wouldn&#39;t this be inefficient (memory-wise) with larger sets of data (as you&#39;ll end up having the same data in memory twice)? My input is a <code>Set</code>, not a <code>List</code>."},{"owner":{"account_id":320410,"reputation":982,"user_id":638674,"display_name":"Peter"},"score":0,"creation_date":1396399499,"post_id":22212477,"comment_id":34767013,"body_markdown":"The Java Collections API doesn&#39;t seem to allow for a constant space sorting or an arbitrary Set. You may need to limit yourself to the SortedSet API to expect that from what I can tell.","body":"The Java Collections API doesn&#39;t seem to allow for a constant space sorting or an arbitrary Set. You may need to limit yourself to the SortedSet API to expect that from what I can tell."}],"tags":[],"owner":{"account_id":320410,"reputation":982,"user_id":638674,"display_name":"Peter"},"comment_count":2,"down_vote_count":0,"up_vote_count":19,"is_accepted":true,"score":19,"last_activity_date":1394066020,"creation_date":1394066020,"answer_id":22212477,"question_id":22212412,"body_markdown":"Sets are not ordered in general, so to preserve the sorting, after sorting the set as a list, you would need to use a known iteration order implementation of Set, such as LinkedHashSet\r\n\r\n    List list = new ArrayList(set);\r\n    Collections.sort(list, Collections.reverseOrder());\r\n    Set resultSet = new LinkedHashSet(list);\r\n\r\nYou could also use TreeSet with a comparator, but that is not as fast as the ArrayList method above.","title":"Sort a Set in reverse order","body":"<p>Sets are not ordered in general, so to preserve the sorting, after sorting the set as a list, you would need to use a known iteration order implementation of Set, such as LinkedHashSet</p>\n\n<pre><code>List list = new ArrayList(set);\nCollections.sort(list, Collections.reverseOrder());\nSet resultSet = new LinkedHashSet(list);\n</code></pre>\n\n<p>You could also use TreeSet with a comparator, but that is not as fast as the ArrayList method above.</p>\n"},{"tags":[],"owner":{"account_id":7363021,"reputation":1618,"user_id":5605687,"accept_rate":100,"display_name":"Onic Team"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1486632337,"creation_date":1486631536,"answer_id":42132413,"question_id":22212412,"body_markdown":"    public class LargestArray {\r\n\tpublic static void main(String[] args) {\r\n\r\n\t\tArrayList&lt;Integer&gt; al = new ArrayList&lt;&gt;();\r\n\t\tSet&lt;Integer&gt; set = new TreeSet&lt;&gt;();\r\n\t\tset.add(10);\r\n\t\tset.add(20);\r\n\t\tset.add(7);\r\n\t\tset.add(4);\r\n\t\tset.add(1);\r\n\t\tset.add(2);\r\n\t\tset.add(3);\r\n\t\tset.add(4);\r\n\t\tSystem.out.println(&quot;after Sorting&quot;);\r\n\t\tfor(int i : set) {\r\n\t\t\tSystem.out.print(&quot;  &quot; + i);\r\n\t\t}\r\n\t\tal.addAll(set);\r\n\t\tset.clear();\r\n\t\tCollections.reverse(al);\r\n\t\tSystem.out.println();\r\n\t\tSystem.out.println(&quot;After Reverse&quot;);\r\n\t\tfor (int i : al) {\r\n\t\t\tSystem.out.print(&quot; &quot; + i);\r\n\t\t}\r\n\r\n\t}\r\n\r\n    }\r\n&gt;output = after Sorting \r\n  1  2  3  4  7  10  20\r\nAfter Reverse\r\n 20 10 7 4 3 2 1","title":"Sort a Set in reverse order","body":"<pre><code>public class LargestArray {\npublic static void main(String[] args) {\n\n    ArrayList&lt;Integer&gt; al = new ArrayList&lt;&gt;();\n    Set&lt;Integer&gt; set = new TreeSet&lt;&gt;();\n    set.add(10);\n    set.add(20);\n    set.add(7);\n    set.add(4);\n    set.add(1);\n    set.add(2);\n    set.add(3);\n    set.add(4);\n    System.out.println(\"after Sorting\");\n    for(int i : set) {\n        System.out.print(\"  \" + i);\n    }\n    al.addAll(set);\n    set.clear();\n    Collections.reverse(al);\n    System.out.println();\n    System.out.println(\"After Reverse\");\n    for (int i : al) {\n        System.out.print(\" \" + i);\n    }\n\n}\n\n}\n</code></pre>\n\n<blockquote>\n  <p>output = after Sorting \n    1  2  3  4  7  10  20\n  After Reverse\n   20 10 7 4 3 2 1</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":4850593,"reputation":276,"user_id":3912972,"display_name":"Manjunatha B"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1512567674,"creation_date":1512567521,"answer_id":47675708,"question_id":22212412,"body_markdown":"I will explain you with an example. Comments are added in mid of the code for better understanding.\r\n\r\n    public class ReverseLinkedHashSet {\r\n     \r\n        public static void main(String[] args) {\r\n     \r\n            // creating a LinkedHashSet object which is\r\n            // of type String or any. Will take a example of String.\r\n            HashSet&lt;String&gt; cars = new LinkedHashSet&lt;String&gt;();\r\n     \r\n            // adding car elements to LinkedHashSet object as below\r\n            cars.add(&quot;Toyato&quot;);\r\n            cars.add(&quot;Hundai&quot;);\r\n            cars.add(&quot;Porshe&quot;);\r\n            cars.add(&quot;BMW&quot;);\r\n     \r\n            // Iterating using enhanced for-loop to see the order.\r\n            System.out.println(&quot;Insertion Order: Iterating LinkedHashSet\\n&quot;);\r\n            for(String car : cars) {\r\n                System.out.println(car);\r\n    \t\t\t\r\n    \t\t// Output will be as below\t\r\n    \t\t//Toyato\r\n            //Hundai\r\n            //Porshe\r\n            //BMW\r\n            }\r\n     \r\n            // Now convert to ArrayList to rearrange to reverse\r\n            // the linkedHashset\r\n            List&lt;String&gt; listOfCars = new ArrayList&lt;String&gt;(cars);\r\n     \r\n            // to reverse LinkedHashSet contents\r\n            Collections.reverse(listOfCars);\r\n     \r\n            // reverse order of LinkedHashSet contents\r\n            // can be done as below\r\n            System.out.println(&quot;\\n\\n\\nReverse Order of LinkedHashSet\\n&quot;);\r\n            for(String car : listOfCars) {\r\n                System.out.println(car);\r\n    \t\t\t\r\n    \t\t// Output will be as below\t\r\n    \t\t//BMW\r\n            //Porshe\r\n            //Hundai\r\n            //Toyato\t\r\n            }\r\n        }\r\n    }\r\n\r\nAlso, I suggest not to use `LinkedhashSet` without a strong reason. For a complex application, it will reduce the performance. Use `HashSet` instead.\r\n","title":"Sort a Set in reverse order","body":"<p>I will explain you with an example. Comments are added in mid of the code for better understanding.</p>\n\n<pre><code>public class ReverseLinkedHashSet {\n\n    public static void main(String[] args) {\n\n        // creating a LinkedHashSet object which is\n        // of type String or any. Will take a example of String.\n        HashSet&lt;String&gt; cars = new LinkedHashSet&lt;String&gt;();\n\n        // adding car elements to LinkedHashSet object as below\n        cars.add(\"Toyato\");\n        cars.add(\"Hundai\");\n        cars.add(\"Porshe\");\n        cars.add(\"BMW\");\n\n        // Iterating using enhanced for-loop to see the order.\n        System.out.println(\"Insertion Order: Iterating LinkedHashSet\\n\");\n        for(String car : cars) {\n            System.out.println(car);\n\n        // Output will be as below  \n        //Toyato\n        //Hundai\n        //Porshe\n        //BMW\n        }\n\n        // Now convert to ArrayList to rearrange to reverse\n        // the linkedHashset\n        List&lt;String&gt; listOfCars = new ArrayList&lt;String&gt;(cars);\n\n        // to reverse LinkedHashSet contents\n        Collections.reverse(listOfCars);\n\n        // reverse order of LinkedHashSet contents\n        // can be done as below\n        System.out.println(\"\\n\\n\\nReverse Order of LinkedHashSet\\n\");\n        for(String car : listOfCars) {\n            System.out.println(car);\n\n        // Output will be as below  \n        //BMW\n        //Porshe\n        //Hundai\n        //Toyato    \n        }\n    }\n}\n</code></pre>\n\n<p>Also, I suggest not to use <code>LinkedhashSet</code> without a strong reason. For a complex application, it will reduce the performance. Use <code>HashSet</code> instead.</p>\n"},{"tags":[],"owner":{"account_id":4781484,"reputation":3736,"user_id":3863070,"display_name":"bamossza"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1544282985,"creation_date":1544282985,"answer_id":53683999,"question_id":22212412,"body_markdown":"Java 8, I using solution below,\r\n\r\n    Set&lt;String&gt; setTest = new HashSet&lt;&gt;();\r\n    \r\n    setTest.add(&quot;1&quot;);\r\n    setTest.add(&quot;2&quot;);\r\n    setTest.add(&quot;3&quot;);\r\n    \r\n    List&lt;String&gt; list = new ArrayList&lt;&gt;(setTest);\r\n    list.sort(Collections.reverseOrder());\r\n    Set&lt;String&gt; result = new LinkedHashSet&lt;&gt;(list);\r\n    \r\n    for (String item: result) {\r\n        System.out.println(&quot;---&gt; &quot; + item);\r\n    }\r\n    \r\n    Result:\r\n    \r\n    ---&gt; 3\r\n    ---&gt; 2\r\n    ---&gt; 1\r\n\r\nWork for me.","title":"Sort a Set in reverse order","body":"<p>Java 8, I using solution below,</p>\n\n<pre><code>Set&lt;String&gt; setTest = new HashSet&lt;&gt;();\n\nsetTest.add(\"1\");\nsetTest.add(\"2\");\nsetTest.add(\"3\");\n\nList&lt;String&gt; list = new ArrayList&lt;&gt;(setTest);\nlist.sort(Collections.reverseOrder());\nSet&lt;String&gt; result = new LinkedHashSet&lt;&gt;(list);\n\nfor (String item: result) {\n    System.out.println(\"---&gt; \" + item);\n}\n\nResult:\n\n---&gt; 3\n---&gt; 2\n---&gt; 1\n</code></pre>\n\n<p>Work for me.</p>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695230692,"creation_date":1686711632,"answer_id":76469868,"question_id":22212412,"body_markdown":"Java 21 introduced the [`SequencedSet`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedSet.html) interface for reversible sets which have a well defined insertion order.  `LinkedHashSet` implements the interface and `SortedSet` extends it.  For such a set, the [`reversed()`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedSet.html#reversed()) method will return a reversed view of it.\r\n\r\n```lang-java\r\nSequencedSet&lt;String&gt; set = new LinkedHashSet&lt;&gt;(List.of(&quot;A&quot;, &quot;B&quot;, &quot;C&quot;));\r\nSequencedSet&lt;String&gt; reversedSet = set.reversed();\r\nSystem.out.println(reversedSet); // [C, B, A]\r\n```","title":"Sort a Set in reverse order","body":"<p>Java 21 introduced the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedSet.html\" rel=\"nofollow noreferrer\"><code>SequencedSet</code></a> interface for reversible sets which have a well defined insertion order.  <code>LinkedHashSet</code> implements the interface and <code>SortedSet</code> extends it.  For such a set, the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedSet.html#reversed()\" rel=\"nofollow noreferrer\"><code>reversed()</code></a> method will return a reversed view of it.</p>\n<pre class=\"lang-java prettyprint-override\"><code>SequencedSet&lt;String&gt; set = new LinkedHashSet&lt;&gt;(List.of(&quot;A&quot;, &quot;B&quot;, &quot;C&quot;));\nSequencedSet&lt;String&gt; reversedSet = set.reversed();\nSystem.out.println(reversedSet); // [C, B, A]\n</code></pre>\n"}],"owner":{"account_id":405356,"reputation":31611,"user_id":774183,"accept_rate":78,"display_name":"carlspring"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46695,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":22212477,"answer_count":6,"score":6,"last_activity_date":1695230692,"creation_date":1394065685,"question_id":22212412,"body_markdown":"Apologies for the newbie question, but what&#39;s the proper way to get a `Set` (say `LinkedHashSet`) in reverse order? For `Collection`s there&#39;s `Collections.reverse(Collection c)`, but how does one do it for a `Set` with ordered elements (like a `LinkedHashSet`)?","title":"Sort a Set in reverse order","body":"<p>Apologies for the newbie question, but what's the proper way to get a <code>Set</code> (say <code>LinkedHashSet</code>) in reverse order? For <code>Collection</code>s there's <code>Collections.reverse(Collection c)</code>, but how does one do it for a <code>Set</code> with ordered elements (like a <code>LinkedHashSet</code>)?</p>\n"},{"tags":["java","java-8","java-stream"],"comments":[{"owner":{"account_id":77782,"reputation":4807,"user_id":221781,"accept_rate":100,"display_name":"izilotti"},"score":1,"creation_date":1427943295,"post_id":29403614,"comment_id":46983550,"body_markdown":"This article covers several possibilities: http://www.leveluplunch.com/java/tutorials/028-reverse-order-stream-elements-java8/","body":"This article covers several possibilities: <a href=\"http://www.leveluplunch.com/java/tutorials/028-reverse-order-stream-elements-java8/\" rel=\"nofollow noreferrer\">leveluplunch.com/java/tutorials/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":395375,"reputation":7111,"user_id":3591528,"display_name":"teppic"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1488830635,"creation_date":1427941148,"answer_id":29403969,"question_id":29403614,"body_markdown":"Google&#39;s Guava library provides a reverse view of a list ([`Lists#reverse(List)`][1]). There&#39;s a [`ReverseListIterator`][2] in the Apache Commons Collection library, too. \r\n\r\n\r\n  [1]: https://google.github.io/guava/releases/21.0/api/docs/com/google/common/collect/Lists.html#reverse-java.util.List-\r\n  [2]: https://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/iterators/ReverseListIterator.html","title":"How to get ordered stream from a list in reverse order in Java 8","body":"<p>Google's Guava library provides a reverse view of a list (<a href=\"https://google.github.io/guava/releases/21.0/api/docs/com/google/common/collect/Lists.html#reverse-java.util.List-\" rel=\"nofollow noreferrer\"><code>Lists#reverse(List)</code></a>). There's a <a href=\"https://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/iterators/ReverseListIterator.html\" rel=\"nofollow noreferrer\"><code>ReverseListIterator</code></a> in the Apache Commons Collection library, too. </p>\n"},{"tags":[],"owner":{"account_id":20061,"reputation":20239,"user_id":47552,"accept_rate":91,"display_name":"Matt McHenry"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1427942886,"creation_date":1427942000,"answer_id":29404098,"question_id":29403614,"body_markdown":"I tend to like @teppic&#39;s answer of using a third-party library to do this.  However, it&#39;s an interesting exercise to try to come up with a solution using only the Java 8 APIs.  Delegating to a `ListIterator` is the cleanest thing I could come up with, but it&#39;s not really much cleaner than implementing your own `Iterator` from scratch.\r\n\r\n    public static void main(String[] args){\r\n        List&lt;String&gt; l = Arrays.asList(&quot;first&quot;, &quot;second&quot;, &quot;third&quot;);\r\n\r\n        StreamSupport.stream(Spliterators.spliterator(revit(l), l.size(), 0), false)\r\n                     .forEachOrdered(System.out::println);\r\n    }\r\n\r\n    private static final &lt;T&gt; Iterator&lt;T&gt; revit(List&lt;T&gt; l){\r\n        ListIterator&lt;T&gt; li = l.listIterator(l.size());\r\n\r\n        return new Iterator&lt;T&gt;(){\r\n            @Override\r\n            public boolean hasNext(){\r\n                return li.hasPrevious();\r\n            }\r\n\r\n            @Override\r\n            public T next(){\r\n                return li.previous();\r\n            }\r\n        };\r\n    }\r\n","title":"How to get ordered stream from a list in reverse order in Java 8","body":"<p>I tend to like @teppic's answer of using a third-party library to do this.  However, it's an interesting exercise to try to come up with a solution using only the Java 8 APIs.  Delegating to a <code>ListIterator</code> is the cleanest thing I could come up with, but it's not really much cleaner than implementing your own <code>Iterator</code> from scratch.</p>\n\n<pre><code>public static void main(String[] args){\n    List&lt;String&gt; l = Arrays.asList(\"first\", \"second\", \"third\");\n\n    StreamSupport.stream(Spliterators.spliterator(revit(l), l.size(), 0), false)\n                 .forEachOrdered(System.out::println);\n}\n\nprivate static final &lt;T&gt; Iterator&lt;T&gt; revit(List&lt;T&gt; l){\n    ListIterator&lt;T&gt; li = l.listIterator(l.size());\n\n    return new Iterator&lt;T&gt;(){\n        @Override\n        public boolean hasNext(){\n            return li.hasPrevious();\n        }\n\n        @Override\n        public T next(){\n            return li.previous();\n        }\n    };\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":309680,"reputation":4046,"user_id":622266,"accept_rate":60,"display_name":"Pawel Veselov"},"score":1,"creation_date":1427958682,"post_id":29405174,"comment_id":46988377,"body_markdown":"So, using `AbstractSpliterator` is somehow better than `IteratorSpliterator`?","body":"So, using <code>AbstractSpliterator</code> is somehow better than <code>IteratorSpliterator</code>?"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1427966313,"post_id":29405174,"comment_id":46992016,"body_markdown":"I don’t think that `SIZED` is pointless. `SUBSIZED` would be pointless though.","body":"I don’t think that <code>SIZED</code> is pointless. <code>SUBSIZED</code> would be pointless though."},{"owner":{"account_id":1548079,"reputation":128727,"user_id":1441122,"display_name":"Stuart Marks"},"score":1,"creation_date":1427987369,"post_id":29405174,"comment_id":47004811,"body_markdown":"@PawelVeselov I think that `AbstractSpliterator` is a bit easier than writing your own iterator. But if you already have an iterator, then using `Spliterators.spliteratorUnknownSize(iterator, ...)` -- which uses `IteratorSpliterator` underneath -- is certainly easier to code.","body":"@PawelVeselov I think that <code>AbstractSpliterator</code> is a bit easier than writing your own iterator. But if you already have an iterator, then using <code>Spliterators.spliteratorUnknownSize(iterator, ...)</code> -- which uses <code>IteratorSpliterator</code> underneath -- is certainly easier to code."},{"owner":{"account_id":1548079,"reputation":128727,"user_id":1441122,"display_name":"Stuart Marks"},"score":1,"creation_date":1427987583,"post_id":29405174,"comment_id":47004953,"body_markdown":"@Holger Yes, `SIZED` might allow the stream to do better buffering, but I&#39;m not sure. Well, in JDK 9 it would allow `count()` to short-circuit.","body":"@Holger Yes, <code>SIZED</code> might allow the stream to do better buffering, but I&#39;m not sure. Well, in JDK 9 it would allow <code>count()</code> to short-circuit."},{"owner":{"account_id":309680,"reputation":4046,"user_id":622266,"accept_rate":60,"display_name":"Pawel Veselov"},"score":0,"creation_date":1427996889,"post_id":29405174,"comment_id":47010394,"body_markdown":"@StuartMarks I was more wondering about any implementation execution advantages. The only disadvantage of `AbstractIterator` that I see that its `trySplit()` method costs one more object creation (`HoldingConsumer`). (long time no see, btw:) )","body":"@StuartMarks I was more wondering about any implementation execution advantages. The only disadvantage of <code>AbstractIterator</code> that I see that its <code>trySplit()</code> method costs one more object creation (<code>HoldingConsumer</code>). (long time no see, btw:) )"},{"owner":{"account_id":1548079,"reputation":128727,"user_id":1441122,"display_name":"Stuart Marks"},"score":2,"creation_date":1428005866,"post_id":29405174,"comment_id":47015038,"body_markdown":"@PawelVeselov (I think you mean `AbstractSpliterator`?) There are some tradeoffs. The `IteratorSpliterator` doesn&#39;t need a `HoldingConsumer` but it does require an extra method call (hasNext+next) for each element. But that might be offset by the `Consumer.accept` call... hmmm. Well I think the only real way to find out is to measure. (And yes, it&#39;s been a while!) :-)","body":"@PawelVeselov (I think you mean <code>AbstractSpliterator</code>?) There are some tradeoffs. The <code>IteratorSpliterator</code> doesn&#39;t need a <code>HoldingConsumer</code> but it does require an extra method call (hasNext+next) for each element. But that might be offset by the <code>Consumer.accept</code> call... hmmm. Well I think the only real way to find out is to measure. (And yes, it&#39;s been a while!) :-)"}],"tags":[],"owner":{"account_id":1548079,"reputation":128727,"user_id":1441122,"display_name":"Stuart Marks"},"comment_count":6,"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1427987403,"creation_date":1427950243,"answer_id":29405174,"question_id":29403614,"body_markdown":"**NOTE:** If you have an `ArrayList` or other list that allows random-access retrieval by index (`get(i)`) then [Holger&#39;s approach][1] is preferable. The approach below is only necessary if you have a data structure that allows reverse traversal but not indexed access.\r\n\r\n----------\r\n\r\nUnfortunately there doesn&#39;t seem to be a really simple (i.e., a one-liner) way to do this. But getting a reversed stream using `AbstractSpliterator` isn&#39;t too difficult, given that `List` already has the ability to iterate in reverse. Here&#39;s a utility method to do that:\r\n\r\n    static &lt;T&gt; Stream&lt;T&gt; reversedStream(List&lt;? extends T&gt; input) {\r\n        ListIterator&lt;? extends T&gt; li = input.listIterator(input.size());\r\n        return StreamSupport.stream(\r\n            new Spliterators.AbstractSpliterator&lt;T&gt;(input.size(), Spliterator.ORDERED) {\r\n                @Override public boolean tryAdvance(Consumer&lt;? super T&gt; action) {\r\n                    if (li.hasPrevious()) {\r\n                        action.accept(li.previous());\r\n                        return true;\r\n                    } else {\r\n                        return false;\r\n                    }\r\n                }\r\n            },\r\n            false);\r\n    }\r\n\r\n(I suppose the Spliterator could be `SIZED`, but that&#39;s mostly pointless because this is an [unsplittable spliterator][2].)\r\n\r\nAs it stands, this can afford a limited degree of parallelism, as `AbstractSpliterator` will call `tryAdvance` multiple times and batch up work to hand off to fork-join tasks. But it&#39;s not as efficient as being able to split.\r\n\r\nIf parallel efficiency is a great concern, one could write a spliterator that can actually split, where the splits are traversed in reverse order. \r\n\r\n\r\n  [1]: https://stackoverflow.com/a/29409584/1441122\r\n  [2]: https://stackoverflow.com/questions/28869111/unsplittable-spliterators","title":"How to get ordered stream from a list in reverse order in Java 8","body":"<p><strong>NOTE:</strong> If you have an <code>ArrayList</code> or other list that allows random-access retrieval by index (<code>get(i)</code>) then <a href=\"https://stackoverflow.com/a/29409584/1441122\">Holger's approach</a> is preferable. The approach below is only necessary if you have a data structure that allows reverse traversal but not indexed access.</p>\n\n<hr>\n\n<p>Unfortunately there doesn't seem to be a really simple (i.e., a one-liner) way to do this. But getting a reversed stream using <code>AbstractSpliterator</code> isn't too difficult, given that <code>List</code> already has the ability to iterate in reverse. Here's a utility method to do that:</p>\n\n<pre><code>static &lt;T&gt; Stream&lt;T&gt; reversedStream(List&lt;? extends T&gt; input) {\n    ListIterator&lt;? extends T&gt; li = input.listIterator(input.size());\n    return StreamSupport.stream(\n        new Spliterators.AbstractSpliterator&lt;T&gt;(input.size(), Spliterator.ORDERED) {\n            @Override public boolean tryAdvance(Consumer&lt;? super T&gt; action) {\n                if (li.hasPrevious()) {\n                    action.accept(li.previous());\n                    return true;\n                } else {\n                    return false;\n                }\n            }\n        },\n        false);\n}\n</code></pre>\n\n<p>(I suppose the Spliterator could be <code>SIZED</code>, but that's mostly pointless because this is an <a href=\"https://stackoverflow.com/questions/28869111/unsplittable-spliterators\">unsplittable spliterator</a>.)</p>\n\n<p>As it stands, this can afford a limited degree of parallelism, as <code>AbstractSpliterator</code> will call <code>tryAdvance</code> multiple times and batch up work to hand off to fork-join tasks. But it's not as efficient as being able to split.</p>\n\n<p>If parallel efficiency is a great concern, one could write a spliterator that can actually split, where the splits are traversed in reverse order. </p>\n"},{"comments":[{"owner":{"account_id":1548079,"reputation":128727,"user_id":1441122,"display_name":"Stuart Marks"},"score":2,"creation_date":1427987617,"post_id":29409584,"comment_id":47004980,"body_markdown":"Heh, I should have thought of this first. +1. I guess I was too enamored with the idea of writing a reversing spliterator.","body":"Heh, I should have thought of this first. +1. I guess I was too enamored with the idea of writing a reversing spliterator."},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":2,"creation_date":1472785325,"post_id":29409584,"comment_id":65901783,"body_markdown":"Or `IntStream.rangeClosed(1, list.size()).mapToObj(i -&gt; list.get(list.size() - i))`.","body":"Or <code>IntStream.rangeClosed(1, list.size()).mapToObj(i -&gt; list.get(list.size() - i))</code>."}],"tags":[],"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"comment_count":2,"down_vote_count":0,"up_vote_count":23,"is_accepted":false,"score":23,"last_activity_date":1427967266,"creation_date":1427967266,"answer_id":29409584,"question_id":29403614,"body_markdown":"If your `List` is a random access list, you may simply use\r\n\r\n    int num=list.size()-1;\r\n    IntStream.rangeClosed(0, num).mapToObj(i-&gt;list.get(num-i))\r\n\r\nto create a `Stream` which has the characteristics `ORDERED | SIZED | SUBSIZED` and offers full splitting support.\r\n\r\nFor a non-random access list like `LinkedList` it would be a performance disaster, however, who uses `LinkedList` anyway?\r\n\r\nYou may also check via `list instanceof`[`RandomAccess`](http://docs.oracle.com/javase/8/docs/api/java/util/RandomAccess.html) first…\r\n","title":"How to get ordered stream from a list in reverse order in Java 8","body":"<p>If your <code>List</code> is a random access list, you may simply use</p>\n\n<pre><code>int num=list.size()-1;\nIntStream.rangeClosed(0, num).mapToObj(i-&gt;list.get(num-i))\n</code></pre>\n\n<p>to create a <code>Stream</code> which has the characteristics <code>ORDERED | SIZED | SUBSIZED</code> and offers full splitting support.</p>\n\n<p>For a non-random access list like <code>LinkedList</code> it would be a performance disaster, however, who uses <code>LinkedList</code> anyway?</p>\n\n<p>You may also check via <code>list instanceof</code><a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/RandomAccess.html\" rel=\"noreferrer\"><code>RandomAccess</code></a> first…</p>\n"},{"comments":[{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1694677266,"post_id":76400019,"comment_id":135923248,"body_markdown":"Not a good idea. `Stream.generate(…)` creates an *unordered* stream. Further, a Stream stage should not rely on the effect of a subsequent stage. In other words, there is no guaranty that the supplier is only evaluated as often as specified by the limit. It may happen to do the desired thing in sequential contexts but may fail with parallel execution in practice. But on the formal level, it’s wrong in either case.","body":"Not a good idea. <code>Stream.generate(…)</code> creates an <i>unordered</i> stream. Further, a Stream stage should not rely on the effect of a subsequent stage. In other words, there is no guaranty that the supplier is only evaluated as often as specified by the limit. It may happen to do the desired thing in sequential contexts but may fail with parallel execution in practice. But on the formal level, it’s wrong in either case."}],"tags":[],"owner":{"account_id":28748928,"reputation":51,"user_id":22017415,"display_name":"Karl Karlson"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1685875932,"creation_date":1685875932,"answer_id":76400019,"question_id":29403614,"body_markdown":"I found this solution quite recently.\r\n\r\n    public &lt;T&gt; Stream&lt;T&gt; toReverseStream(List&lt;T&gt; list) {\r\n\t\tListIterator&lt;T&gt; listIterator = list.listIterator(list.size());\r\n\t\treturn Stream.generate(listIterator::previous)\r\n\t\t\t\t.limit(list.size());\r\n\t}","title":"How to get ordered stream from a list in reverse order in Java 8","body":"<p>I found this solution quite recently.</p>\n<pre><code>public &lt;T&gt; Stream&lt;T&gt; toReverseStream(List&lt;T&gt; list) {\n    ListIterator&lt;T&gt; listIterator = list.listIterator(list.size());\n    return Stream.generate(listIterator::previous)\n            .limit(list.size());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1695230648,"creation_date":1686713388,"answer_id":76469975,"question_id":29403614,"body_markdown":"Starting with Java 21, the [`reversed()`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html#reversed()) method can be used to return a reversed view on the list, which can then be streamed over:\r\n\r\n```lang-java\r\nStream&lt;Object&gt; reversedStream = list.reversed().stream();\r\n```\r\n\r\nAs requested, this doesn&#39;t buffer or copy the data, as this is merely a reversed view of the original list.","title":"How to get ordered stream from a list in reverse order in Java 8","body":"<p>Starting with Java 21, the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html#reversed()\" rel=\"nofollow noreferrer\"><code>reversed()</code></a> method can be used to return a reversed view on the list, which can then be streamed over:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Stream&lt;Object&gt; reversedStream = list.reversed().stream();\n</code></pre>\n<p>As requested, this doesn't buffer or copy the data, as this is merely a reversed view of the original list.</p>\n"}],"owner":{"account_id":309680,"reputation":4046,"user_id":622266,"accept_rate":60,"display_name":"Pawel Veselov"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20308,"favorite_count":0,"down_vote_count":0,"up_vote_count":22,"accepted_answer_id":29405174,"answer_count":6,"score":22,"last_activity_date":1695230648,"creation_date":1427938460,"question_id":29403614,"body_markdown":"Is there a sane way to get an ordered stream from a list (array list specifically, but it shouldn&#39;t matter) that streams elements in reverse of how they are in the original list?\r\n\r\nI&#39;m looking for a solution that doesn&#39;t involve buffering data in anything (collector, another list, array, etc, because they copy the container which is wasteful), or uses `Collections.reverse` (because it modifies the list).\r\n\r\nSo far, the cleanest ways that I see here is to implement my own version of `Spliterator` that&#39;s `ORDERED` and advances through the list in reverse, or implement an `Iterator` that iterates in reverse, and use `Spliterators.spliteratorUnknownSize(iterator,ORDERED)` on it.\r\n\r\nNote this question is different from https://stackoverflow.com/questions/24010109/java-8-stream-reverse-order : that other question asks on how to reverse a stream (which is impossible in general case), and answers offer to reverse the source somehow (which I don&#39;t want to do), and then stream that reversed source. The cost of reversing the source is O(N), and I want to avoid it at all if possible.","title":"How to get ordered stream from a list in reverse order in Java 8","body":"<p>Is there a sane way to get an ordered stream from a list (array list specifically, but it shouldn't matter) that streams elements in reverse of how they are in the original list?</p>\n\n<p>I'm looking for a solution that doesn't involve buffering data in anything (collector, another list, array, etc, because they copy the container which is wasteful), or uses <code>Collections.reverse</code> (because it modifies the list).</p>\n\n<p>So far, the cleanest ways that I see here is to implement my own version of <code>Spliterator</code> that's <code>ORDERED</code> and advances through the list in reverse, or implement an <code>Iterator</code> that iterates in reverse, and use <code>Spliterators.spliteratorUnknownSize(iterator,ORDERED)</code> on it.</p>\n\n<p>Note this question is different from <a href=\"https://stackoverflow.com/questions/24010109/java-8-stream-reverse-order\">Java 8 stream reverse order</a> : that other question asks on how to reverse a stream (which is impossible in general case), and answers offer to reverse the source somehow (which I don't want to do), and then stream that reversed source. The cost of reversing the source is O(N), and I want to avoid it at all if possible.</p>\n"},{"tags":["java","spring-jdbc","spring-retry"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1634647272,"post_id":69630964,"comment_id":123076771,"body_markdown":"As far as I can see, [`SQLRecoverableException`](https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/SQLRecoverableException.html) is not a `RuntimeException` and should thus not be caught by the `catch`-block (if the `catch`-block only catches `RuntimeException`s). Please [edit] the post and add the relevant code.","body":"As far as I can see, <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/SQLRecoverableException.html\" rel=\"nofollow noreferrer\"><code>SQLRecoverableException</code></a> is not a <code>RuntimeException</code> and should thus not be caught by the <code>catch</code>-block (if the <code>catch</code>-block only catches <code>RuntimeException</code>s). Please <a href=\"https://stackoverflow.com/posts/69630964/edit\">edit</a> the post and add the relevant code."},{"owner":{"account_id":3084600,"reputation":5860,"user_id":2612030,"display_name":"ewramner"},"score":0,"creation_date":1634649871,"post_id":69630964,"comment_id":123078041,"body_markdown":"Please post the code. If you catch the exception in the method itself then of course Spring cannot act on it. If you catch it in another method that calls the method in question it should work.","body":"Please post the code. If you catch the exception in the method itself then of course Spring cannot act on it. If you catch it in another method that calls the method in question it should work."}],"answers":[{"tags":[],"owner":{"account_id":12305345,"reputation":450,"user_id":8978587,"display_name":"ShaharT"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1635375942,"creation_date":1635375942,"answer_id":69746436,"question_id":69630964,"body_markdown":"With Retry can be handled not only via annotation, so maybe this can help:\r\n\r\n    try {\r\n        withRetry().execute(context -&gt; {\r\n            myMethodThatCatchException();\r\n            return null;\r\n        });\r\n    } catch (RuntimeException re) {\r\n        // ..\r\n    }\r\n\r\n    private RetryTemplate withRetry() {\r\n        RetryTemplate retryTemplate = new RetryTemplate();\r\n        BackOffPolicy backOffPolicy = new FixedBackOffPolicy();\r\n        retryTemplate.setBackOffPolicy(backOffPolicy);\r\n        SimpleRetryPolicy retryPolicy = new SimpleRetryPolicy(3, Collections.singletonMap(SQLRecoverableException.class, true));\r\n        retryTemplate.setRetryPolicy(retryPolicy);\r\n        return retryTemplate;\r\n    }","title":"Spring Retry doesn&#39;t work with a try-catch block","body":"<p>With Retry can be handled not only via annotation, so maybe this can help:</p>\n<pre><code>try {\n    withRetry().execute(context -&gt; {\n        myMethodThatCatchException();\n        return null;\n    });\n} catch (RuntimeException re) {\n    // ..\n}\n\nprivate RetryTemplate withRetry() {\n    RetryTemplate retryTemplate = new RetryTemplate();\n    BackOffPolicy backOffPolicy = new FixedBackOffPolicy();\n    retryTemplate.setBackOffPolicy(backOffPolicy);\n    SimpleRetryPolicy retryPolicy = new SimpleRetryPolicy(3, Collections.singletonMap(SQLRecoverableException.class, true));\n    retryTemplate.setRetryPolicy(retryPolicy);\n    return retryTemplate;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2563377,"reputation":7174,"user_id":2224047,"display_name":"Nikolai  Shevchenko"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635389357,"creation_date":1635389357,"answer_id":69747695,"question_id":69630964,"body_markdown":"You can catch and rethrow specific exceptions inside try-catch block\r\n\r\n```\r\n@Retryable(value={SQLRecoverableException.class})\r\nvoid someMethod() {\r\n   try {\r\n      ...\r\n   } catch (SQLRecoverableException retryable) { \r\n       // don&#39;t handle here, let it be handled by @Retryable-mechanism\r\n       throw retryable;\r\n   } catch (RuntimeException other) {\r\n       // handle other non-retryable exceptions\r\n   }\r\n}\r\n```","title":"Spring Retry doesn&#39;t work with a try-catch block","body":"<p>You can catch and rethrow specific exceptions inside try-catch block</p>\n<pre><code>@Retryable(value={SQLRecoverableException.class})\nvoid someMethod() {\n   try {\n      ...\n   } catch (SQLRecoverableException retryable) { \n       // don't handle here, let it be handled by @Retryable-mechanism\n       throw retryable;\n   } catch (RuntimeException other) {\n       // handle other non-retryable exceptions\n   }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18392292,"reputation":21,"user_id":13397692,"display_name":"Py_Patience"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695230607,"creation_date":1642744368,"answer_id":70796960,"question_id":69630964,"body_markdown":"\r\n    @Retryable(value={SQLRecoverableException.class},maxAttempts=3)\r\n    public boolean methodA(){\r\n    try{.....}\r\n    catch(RuntimeException ex){ // apart from given above one\r\n    \\\\handle catch exception\r\n    } \r\n    }\r\n    \r\n    @Recover\r\n    public boolean recoverMethodA(SQLRecoverableException a){\r\n     logger.info(a.getMessage());\r\n    return false;\r\n    }\r\n\r\n\r\n\r\n\r\n\r\nAfter some Observations i found - \r\n\r\n - Retryable will not work with handled exception that you passing in retryable value.\r\n - Retryable will not work if you are calling retryable method within another method in same class.\r\nex  - boolean methodA() --&gt; boolean retryableMethodB() \r\nin case you should to apply retryable on methodA.(if using controller)","title":"Spring Retry doesn&#39;t work with a try-catch block","body":"<pre><code>@Retryable(value={SQLRecoverableException.class},maxAttempts=3)\npublic boolean methodA(){\ntry{.....}\ncatch(RuntimeException ex){ // apart from given above one\n\\\\handle catch exception\n} \n}\n\n@Recover\npublic boolean recoverMethodA(SQLRecoverableException a){\n logger.info(a.getMessage());\nreturn false;\n}\n</code></pre>\n<p>After some Observations i found -</p>\n<ul>\n<li>Retryable will not work with handled exception that you passing in retryable value.</li>\n<li>Retryable will not work if you are calling retryable method within another method in same class.\nex  - boolean methodA() --&gt; boolean retryableMethodB()\nin case you should to apply retryable on methodA.(if using controller)</li>\n</ul>\n"}],"owner":{"account_id":15644818,"reputation":1,"user_id":11287227,"display_name":"L Mo"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4455,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1695230607,"creation_date":1634647074,"question_id":69630964,"body_markdown":"I have a method that I want to retry when SQLRecoverableException occurs. I annotated the method with `@Retryable(value={SQLRecoverableException.class})` and enabled Retry in my application. However, this specific method includes a try-catch block to handle RuntimeException. The Retry is now not working because any exception gets caught in the try-catch block. I want the method to be retried for 3 times before the error handling. Is this possible with Spring Retry out of the box, or would I have to go for a more custom solution?","title":"Spring Retry doesn&#39;t work with a try-catch block","body":"<p>I have a method that I want to retry when SQLRecoverableException occurs. I annotated the method with <code>@Retryable(value={SQLRecoverableException.class})</code> and enabled Retry in my application. However, this specific method includes a try-catch block to handle RuntimeException. The Retry is now not working because any exception gets caught in the try-catch block. I want the method to be retried for 3 times before the error handling. Is this possible with Spring Retry out of the box, or would I have to go for a more custom solution?</p>\n"},{"tags":["java","android"],"answers":[{"comments":[{"owner":{"account_id":9280732,"reputation":59,"user_id":6891998,"accept_rate":14,"display_name":"sss"},"score":0,"creation_date":1561394415,"post_id":56740606,"comment_id":100040424,"body_markdown":"It would be great help,if you&#39;ll add some code,if you can.","body":"It would be great help,if you&#39;ll add some code,if you can."}],"tags":[],"owner":{"account_id":13859796,"reputation":10065,"user_id":10005707,"display_name":"Jaswant Singh"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1561393618,"creation_date":1561393618,"answer_id":56740606,"question_id":56740454,"body_markdown":"To achieve this, you can use a \r\n\r\n    Hashmap&lt;String, ArrayList&lt;Model&gt;&gt; \r\n\r\nWhere the String is &#39;id&#39;\r\n\r\n(Model class has 2 variables, 1.Name, 2. msg)\r\nIf the id is already present in the hashmap, just Create a new model, assign values and append it in the arraylist correnponding to that id  else, insert a new id in the hashmap and create a new arraylist with a new model and add it to the hashmap. \r\n\r\nNow to get the last element corresponding to every id is simple, \r\njust iterate through the hashmap and take the last element for each array list, Simple right? \r\nIf you dont understand, let me know, i&#39;ll try to add some code.\r\n","title":"Compare arraylist item and get last index of each common object","body":"<p>To achieve this, you can use a </p>\n\n<pre><code>Hashmap&lt;String, ArrayList&lt;Model&gt;&gt; \n</code></pre>\n\n<p>Where the String is 'id'</p>\n\n<p>(Model class has 2 variables, 1.Name, 2. msg)\nIf the id is already present in the hashmap, just Create a new model, assign values and append it in the arraylist correnponding to that id  else, insert a new id in the hashmap and create a new arraylist with a new model and add it to the hashmap. </p>\n\n<p>Now to get the last element corresponding to every id is simple, \njust iterate through the hashmap and take the last element for each array list, Simple right? \nIf you dont understand, let me know, i'll try to add some code.</p>\n"},{"tags":[],"owner":{"account_id":183255,"reputation":1197,"user_id":3243275,"display_name":"Jason Grife"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1561395633,"creation_date":1561395633,"answer_id":56741025,"question_id":56740454,"body_markdown":"In Kotlin you could use [`Array&lt;out T&gt;.takeLastWhile { id == &quot;id-1&quot; || id == &quot;id-2&quot; }`][1]\r\n\r\n\r\n  [1]: https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/take-last-while.html","title":"Compare arraylist item and get last index of each common object","body":"<p>In Kotlin you could use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/take-last-while.html\" rel=\"nofollow noreferrer\"><code>Array&lt;out T&gt;.takeLastWhile { id == \"id-1\" || id == \"id-2\" }</code></a></p>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695230466,"creation_date":1686721066,"answer_id":76470398,"question_id":56740454,"body_markdown":"This can be achieved by combining the [`reversed`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html#reversed()) method that was added in Java 21 with streams.  Assuming the objects in the list have a `getId()` method that return the ID:\r\n\r\n```lang-java\r\nObject last = list.reversed().stream()\r\n        .filter(o -&gt; o.getId() == 1)\r\n        .findFirst()\r\n        .orElseThrow();\r\n```","title":"Compare arraylist item and get last index of each common object","body":"<p>This can be achieved by combining the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html#reversed()\" rel=\"nofollow noreferrer\"><code>reversed</code></a> method that was added in Java 21 with streams.  Assuming the objects in the list have a <code>getId()</code> method that return the ID:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Object last = list.reversed().stream()\n        .filter(o -&gt; o.getId() == 1)\n        .findFirst()\n        .orElseThrow();\n</code></pre>\n"}],"owner":{"account_id":9280732,"reputation":59,"user_id":6891998,"accept_rate":14,"display_name":"sss"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":148,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":3,"score":0,"last_activity_date":1695230466,"creation_date":1561392894,"question_id":56740454,"body_markdown":"I have json object type `ArrayList`, and i want to get last item of specific id from arraylist. Suppose `ArrayList` contains 3 object of id 1 and two object of id 2 ,so how can i get last object of id1 and last object of id 2.\r\n\r\nHere is `ArrayList` \r\n\r\n    id-1,name-one,msg-hello,\r\n    id-1,name-one,msg-how,\r\n    id-2,name-one,msg-hi,\r\n    id-1,name-one,msg-are,\r\n    id-2,name-one,msg-test\r\n    id-1,name-one,msg-you\r\n\r\nNow my requirement is to get below `ArrayList` ,that has last `jsonObject` of id 2 and id 1.\r\n\r\n    id-2,name-one,msg-test,\r\n    id-1,name-one,msg-you","title":"Compare arraylist item and get last index of each common object","body":"<p>I have json object type <code>ArrayList</code>, and i want to get last item of specific id from arraylist. Suppose <code>ArrayList</code> contains 3 object of id 1 and two object of id 2 ,so how can i get last object of id1 and last object of id 2.</p>\n\n<p>Here is <code>ArrayList</code> </p>\n\n<pre><code>id-1,name-one,msg-hello,\nid-1,name-one,msg-how,\nid-2,name-one,msg-hi,\nid-1,name-one,msg-are,\nid-2,name-one,msg-test\nid-1,name-one,msg-you\n</code></pre>\n\n<p>Now my requirement is to get below <code>ArrayList</code> ,that has last <code>jsonObject</code> of id 2 and id 1.</p>\n\n<pre><code>id-2,name-one,msg-test,\nid-1,name-one,msg-you\n</code></pre>\n"},{"tags":["java","hashmap","linkedhashmap","ordereddictionary"],"comments":[{"owner":{"account_id":10878617,"reputation":2606,"user_id":7998319,"display_name":"gati sahu"},"score":0,"creation_date":1497108484,"post_id":44474971,"comment_id":75945445,"body_markdown":"TreeHashMap will not work","body":"TreeHashMap will not work"},{"owner":{"account_id":2139538,"reputation":42521,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":0,"creation_date":1497109297,"post_id":44474971,"comment_id":75945672,"body_markdown":"Wait. So how does LinkedHashMap not satisfy your requirements...?","body":"Wait. So how does LinkedHashMap not satisfy your requirements...?"},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1497109489,"post_id":44474971,"comment_id":75945727,"body_markdown":"As far as I can tell, a normal `LinkedHashMap` will give you what you want if you just remove a key before each time you put it. You may even consider a subclass where this behaviour is built into the put method.It doesn’t give you the reverse order, though, as far as I can see. A pity since a *doubly-linked*  list is maintained for the order, so it shouldn’t be expensive.","body":"As far as I can tell, a normal <code>LinkedHashMap</code> will give you what you want if you just remove a key before each time you put it. You may even consider a subclass where this behaviour is built into the put method.It doesn’t give you the reverse order, though, as far as I can see. A pity since a <i>doubly-linked</i>  list is maintained for the order, so it shouldn’t be expensive."},{"owner":{"account_id":1876431,"reputation":1569,"user_id":1697566,"accept_rate":80,"display_name":"xpages-noob"},"score":0,"creation_date":1497121001,"post_id":44474971,"comment_id":75949218,"body_markdown":"@Michael: The LinkedHashMap only changes sorting on the first insertion of a key/value, but not if you update that key/value. You would always have to call Map.remove before every Map.put...","body":"@Michael: The LinkedHashMap only changes sorting on the first insertion of a key/value, but not if you update that key/value. You would always have to call Map.remove before every Map.put..."},{"owner":{"account_id":1876431,"reputation":1569,"user_id":1697566,"accept_rate":80,"display_name":"xpages-noob"},"score":0,"creation_date":1497121426,"post_id":44474971,"comment_id":75949327,"body_markdown":"@OleV.V. : Thanks for the advice. I&#39;m aware that I could for example create an extension class which simply overrides the LinkedHashMap&#39;s put methods. Yet I thought someone might have already written a Java class that fulfills my requirements (reverse iterator, synchronized).","body":"@OleV.V. : Thanks for the advice. I&#39;m aware that I could for example create an extension class which simply overrides the LinkedHashMap&#39;s put methods. Yet I thought someone might have already written a Java class that fulfills my requirements (reverse iterator, synchronized)."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1497122279,"post_id":44474971,"comment_id":75949550,"body_markdown":"I am not saying no one has. There are some collection collections out there (Guava, Eclipse collections and more), so I agree with you it’s worth asking. Sorry I don’t know of one.","body":"I am not saying no one has. There are some collection collections out there (Guava, Eclipse collections and more), so I agree with you it’s worth asking. Sorry I don’t know of one."},{"owner":{"account_id":2139538,"reputation":42521,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":0,"creation_date":1497122361,"post_id":44474971,"comment_id":75949578,"body_markdown":"Sounds incredibly niche. There&#39;s nothing like that in `java.util`, Guava, or joda-collect. In my opinion, if you&#39;re relying too much on the iteration order of a non-sorted map, you&#39;re probably doing something wrong.","body":"Sounds incredibly niche. There&#39;s nothing like that in <code>java.util</code>, Guava, or joda-collect. In my opinion, if you&#39;re relying too much on the iteration order of a non-sorted map, you&#39;re probably doing something wrong."},{"owner":{"account_id":1876431,"reputation":1569,"user_id":1697566,"accept_rate":80,"display_name":"xpages-noob"},"score":1,"creation_date":1497122690,"post_id":44474971,"comment_id":75949666,"body_markdown":"Thanks guys for your help. I&#39;ll keep searching and will come back here in case I find something that &quot;fulfills my needs&quot; :)","body":"Thanks guys for your help. I&#39;ll keep searching and will come back here in case I find something that &quot;fulfills my needs&quot; :)"}],"answers":[{"tags":[],"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695230356,"creation_date":1686798005,"answer_id":76478796,"question_id":44474971,"body_markdown":"Java 21 added functionality to `LinkedHashMap` that allows the addition of elements to the end of the map, as well as return a reversed view of the map.  Both of these methods are defined by the new [`SequencedMap`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedMap.html) interface that `LinkedHashMap` now implements.\r\n\r\n```lang-java\r\nSequencedMap&lt;String, Integer&gt; map = new LinkedHashMap&lt;&gt;();\r\nmap.putLast(&quot;A&quot;, 1);\r\nmap.putLast(&quot;B&quot;, 2);\r\nmap.putLast(&quot;A&quot;, 3);\r\nmap.putLast(&quot;C&quot;, 4);\r\n\r\nSystem.out.println(map); // {B=2, A=3, C=4}\r\nSystem.out.println(map.reversed()); // {C=4, A=3, B=2}\r\n```\r\n\r\nThe [`putLast`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/LinkedHashMap.html#putLast(K,V)) method adds the element to the end of the map, moving it to the end if it&#39;s already present:\r\n\r\n&gt; Inserts the given mapping into the map if it is not already present, or replaces the value of a mapping if it is already present (optional operation). After this operation completes normally, the given mapping will be present in this map, and it will be the last mapping in this map&#39;s encounter order.\r\n&gt;\r\n&gt; If this map already contains a mapping for this key, the mapping is relocated if necessary so that it is last in encounter order.\r\n\r\nNote that this does require using the `putLast` method, and not the `put` or `putAll` methods, so it doesn&#39;t quite meet your stated requirements.  But depending on how you&#39;re using the map, this might be sufficient.\r\n\r\nThe [`reversed`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/LinkedHashMap.html#reversed()) method returns a reversed view of the `LinkedHashMap`:\r\n\r\n&gt; Returns a reverse-ordered view of this map. The encounter order of mappings in the returned view is the inverse of the encounter order of mappings in this map. The reverse ordering affects all order-sensitive operations, including those on the view collections of the returned view. If the implementation permits modifications to this view, the modifications &quot;write through&quot; to the underlying map. Changes to the underlying map might or might not be visible in this reversed view, depending upon the implementation.\r\n&gt;\r\n&gt; Modifications to the reversed view and its map views are permitted and will be propagated to this map. In addition, modifications to this map will be visible in the reversed view and its map views.","title":"Is there a LinkedHashMap-like class where the entry that is PUT last is also the last in order?","body":"<p>Java 21 added functionality to <code>LinkedHashMap</code> that allows the addition of elements to the end of the map, as well as return a reversed view of the map.  Both of these methods are defined by the new <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedMap.html\" rel=\"nofollow noreferrer\"><code>SequencedMap</code></a> interface that <code>LinkedHashMap</code> now implements.</p>\n<pre class=\"lang-java prettyprint-override\"><code>SequencedMap&lt;String, Integer&gt; map = new LinkedHashMap&lt;&gt;();\nmap.putLast(&quot;A&quot;, 1);\nmap.putLast(&quot;B&quot;, 2);\nmap.putLast(&quot;A&quot;, 3);\nmap.putLast(&quot;C&quot;, 4);\n\nSystem.out.println(map); // {B=2, A=3, C=4}\nSystem.out.println(map.reversed()); // {C=4, A=3, B=2}\n</code></pre>\n<p>The <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/LinkedHashMap.html#putLast(K,V)\" rel=\"nofollow noreferrer\"><code>putLast</code></a> method adds the element to the end of the map, moving it to the end if it's already present:</p>\n<blockquote>\n<p>Inserts the given mapping into the map if it is not already present, or replaces the value of a mapping if it is already present (optional operation). After this operation completes normally, the given mapping will be present in this map, and it will be the last mapping in this map's encounter order.</p>\n<p>If this map already contains a mapping for this key, the mapping is relocated if necessary so that it is last in encounter order.</p>\n</blockquote>\n<p>Note that this does require using the <code>putLast</code> method, and not the <code>put</code> or <code>putAll</code> methods, so it doesn't quite meet your stated requirements.  But depending on how you're using the map, this might be sufficient.</p>\n<p>The <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/LinkedHashMap.html#reversed()\" rel=\"nofollow noreferrer\"><code>reversed</code></a> method returns a reversed view of the <code>LinkedHashMap</code>:</p>\n<blockquote>\n<p>Returns a reverse-ordered view of this map. The encounter order of mappings in the returned view is the inverse of the encounter order of mappings in this map. The reverse ordering affects all order-sensitive operations, including those on the view collections of the returned view. If the implementation permits modifications to this view, the modifications &quot;write through&quot; to the underlying map. Changes to the underlying map might or might not be visible in this reversed view, depending upon the implementation.</p>\n<p>Modifications to the reversed view and its map views are permitted and will be propagated to this map. In addition, modifications to this map will be visible in the reversed view and its map views.</p>\n</blockquote>\n"}],"owner":{"account_id":1876431,"reputation":1569,"user_id":1697566,"accept_rate":80,"display_name":"xpages-noob"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":95,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1695230356,"creation_date":1497108246,"question_id":44474971,"body_markdown":"In a LinkedHashMap the entries are by default sorted by insertion order. The construction parameter &quot;accessOrder&quot; allows to change the sorting such that the last entry is the one that was ACCESSED last. \r\n\r\nHowever, I do need a map where the sorting only changes when entries are added or overwritten via **PUT** (put, putAll, ...). Furthermore, the given map should directly provide a **reverse iterator**, i.e. without having to create a reversed array of the map&#39;s keySet to iterate over.\r\n\r\n\r\nDoes anyone know an existing Java class that provides what I&#39;m searching for?\r\n\r\n\r\n----------\r\n\r\n\r\nPS: It would be great if the map would allow concurrent modifications, but that is not essential as I can also synchronize the access manually.","title":"Is there a LinkedHashMap-like class where the entry that is PUT last is also the last in order?","body":"<p>In a LinkedHashMap the entries are by default sorted by insertion order. The construction parameter \"accessOrder\" allows to change the sorting such that the last entry is the one that was ACCESSED last. </p>\n\n<p>However, I do need a map where the sorting only changes when entries are added or overwritten via <strong>PUT</strong> (put, putAll, ...). Furthermore, the given map should directly provide a <strong>reverse iterator</strong>, i.e. without having to create a reversed array of the map's keySet to iterate over.</p>\n\n<p>Does anyone know an existing Java class that provides what I'm searching for?</p>\n\n<hr>\n\n<p>PS: It would be great if the map would allow concurrent modifications, but that is not essential as I can also synchronize the access manually.</p>\n"},{"tags":["java","performance"],"comments":[{"owner":{"account_id":2399479,"reputation":6729,"user_id":2097529,"accept_rate":76,"display_name":"Kick Buttowski"},"score":0,"creation_date":1421130549,"post_id":27916018,"comment_id":44230800,"body_markdown":"I do not think doubly linked list help the ordering , it just makes traversing the list easier","body":"I do not think doubly linked list help the ordering , it just makes traversing the list easier"},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":2,"creation_date":1421202718,"post_id":27916018,"comment_id":44267300,"body_markdown":"It doesn&#39;t make traversal easier.  It simply makes removal of map entries more efficient.","body":"It doesn&#39;t make traversal easier.  It simply makes removal of map entries more efficient."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1524907634,"post_id":27916018,"comment_id":87166191,"body_markdown":"So that you can go backwards.","body":"So that you can go backwards."}],"answers":[{"comments":[{"owner":{"account_id":2399479,"reputation":6729,"user_id":2097529,"accept_rate":76,"display_name":"Kick Buttowski"},"score":2,"creation_date":1421130570,"post_id":27916077,"comment_id":44230807,"body_markdown":"I do not think doubly linked list help the ordering , it just makes traversing the list easier","body":"I do not think doubly linked list help the ordering , it just makes traversing the list easier"},{"owner":{"account_id":3579096,"reputation":2576,"user_id":2987706,"accept_rate":90,"display_name":"Prashant"},"score":0,"creation_date":1421130899,"post_id":27916077,"comment_id":44230928,"body_markdown":"If you see internally HashMap is based on linkedList. so if you are having information like which node was inserted before or after then that is simply an ordering.","body":"If you see internally HashMap is based on linkedList. so if you are having information like which node was inserted before or after then that is simply an ordering."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1421139198,"post_id":27916077,"comment_id":44234349,"body_markdown":"A singly linked list is sufficient to maintain an order.  This is not the correct explanation for why they have used a doubly linked list in this context.","body":"A singly linked list is sufficient to maintain an order.  This is not the correct explanation for why they have used a doubly linked list in this context."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":2,"creation_date":1421202604,"post_id":27916077,"comment_id":44267262,"body_markdown":"And it should be noted that `LinkedHashMap.keySet().iterator()` returns an plain `Iterator` not a `ListIterator`.  You CANNOT iterate the keys in reverse insertion order ... irrespective of the fact that a doubly-linked list is used.  The APIs don&#39;t allow it.","body":"And it should be noted that <code>LinkedHashMap.keySet().iterator()</code> returns an plain <code>Iterator</code> not a <code>ListIterator</code>.  You CANNOT iterate the keys in reverse insertion order ... irrespective of the fact that a doubly-linked list is used.  The APIs don&#39;t allow it."}],"tags":[],"owner":{"account_id":3579096,"reputation":2576,"user_id":2987706,"accept_rate":90,"display_name":"Prashant"},"comment_count":4,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1421130274,"creation_date":1421130274,"answer_id":27916077,"question_id":27916018,"body_markdown":"To maintain **Insertion Order** there is doubly LinkedList. AT any point of time you can move ahead node or backward Node. But if you are having single LinkedList  if your Pointer moved to last element you again need to start from initial point and you can not moved on previous node. ","title":"why linkedhashmap maintains doubly linked list for iteration","body":"<p>To maintain <strong>Insertion Order</strong> there is doubly LinkedList. AT any point of time you can move ahead node or backward Node. But if you are having single LinkedList  if your Pointer moved to last element you again need to start from initial point and you can not moved on previous node. </p>\n"},{"tags":[],"owner":{"account_id":4689599,"reputation":197,"user_id":3796068,"display_name":"Puneet_Techie"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1421131109,"creation_date":1421131109,"answer_id":27916243,"question_id":27916018,"body_markdown":"The LinkedHashMap basically maintains two pointers for each entry namely -:\r\n**Before , After** \r\n\r\nas the name suggest both the pointers are used for the ordering purpose and are used to adjust the pointers in case of insertions or deletions.","title":"why linkedhashmap maintains doubly linked list for iteration","body":"<p>The LinkedHashMap basically maintains two pointers for each entry namely -:\n<strong>Before , After</strong> </p>\n\n<p>as the name suggest both the pointers are used for the ordering purpose and are used to adjust the pointers in case of insertions or deletions.</p>\n"},{"comments":[{"owner":{"account_id":2992300,"reputation":115,"user_id":2539633,"accept_rate":43,"display_name":"Basixp"},"score":0,"creation_date":1566502539,"post_id":27916645,"comment_id":101686974,"body_markdown":"Nice and simply put.","body":"Nice and simply put."},{"owner":{"account_id":3170177,"reputation":147,"user_id":2679339,"display_name":"aatif"},"score":0,"creation_date":1610688332,"post_id":27916645,"comment_id":116216486,"body_markdown":"Thank you so much!! Now i understood why singly Linked list was not enough.","body":"Thank you so much!! Now i understood why singly Linked list was not enough."}],"tags":[],"owner":{"account_id":4934454,"reputation":37277,"user_id":3973077,"accept_rate":77,"display_name":"Paul Boddington"},"comment_count":2,"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1421163492,"creation_date":1421132973,"answer_id":27916645,"question_id":27916018,"body_markdown":"You are right that you only need to maintain a singly linked list to keep track of insertion order. But in order to efficiently maintain a singly linked list, you actually need a doubly linked list.\r\n\r\nConsider three entries in order\r\n\r\n    A ---&gt; B ---&gt; C\r\n\r\nSuppose you remove `B`. Obviously `A` should now point to `C`. But unless you know the entry before `B` you cannot efficiently say which entry should now point to `C`. To fix this, you need entries to point in both directions.\r\n\r\n      ---&gt;   ---&gt; \r\n    A      B      C\r\n      &lt;---   &lt;---\r\n\r\nThis way, when you remove `B` you can just look at the entries before and after `B` (`A` and `C`) and update so that `A` and `C` point to each other.\r\n\r\nThe reason `LinkedHashMap` maintains insertion order while `HashMap` doesn&#39;t, despite the fact that all but 4 methods are inherited, is that it&#39;s very cleverly written. Most implementation-specific operations are members of `HashMap.Entry`, not `HashMap`. `LinkedHashMap` has a `private static` class `LinkedHashMap.Entry` which extends the `static` class `HashMap.Entry` of `HashMap`. When you call `put` or `remove`, for example, the code for `LinkedHashMap` can be the same as the code for `HashMap` because it is the *entries themselves* that keep track of before and after information. As an example, here is the code in full for `LinkedHashMap.Entry.remove()` that I was explaining above\r\n\r\n    private void remove() {\r\n        before.after = after;\r\n        after.before = before;\r\n    }","title":"why linkedhashmap maintains doubly linked list for iteration","body":"<p>You are right that you only need to maintain a singly linked list to keep track of insertion order. But in order to efficiently maintain a singly linked list, you actually need a doubly linked list.</p>\n\n<p>Consider three entries in order</p>\n\n<pre><code>A ---&gt; B ---&gt; C\n</code></pre>\n\n<p>Suppose you remove <code>B</code>. Obviously <code>A</code> should now point to <code>C</code>. But unless you know the entry before <code>B</code> you cannot efficiently say which entry should now point to <code>C</code>. To fix this, you need entries to point in both directions.</p>\n\n<pre><code>  ---&gt;   ---&gt; \nA      B      C\n  &lt;---   &lt;---\n</code></pre>\n\n<p>This way, when you remove <code>B</code> you can just look at the entries before and after <code>B</code> (<code>A</code> and <code>C</code>) and update so that <code>A</code> and <code>C</code> point to each other.</p>\n\n<p>The reason <code>LinkedHashMap</code> maintains insertion order while <code>HashMap</code> doesn't, despite the fact that all but 4 methods are inherited, is that it's very cleverly written. Most implementation-specific operations are members of <code>HashMap.Entry</code>, not <code>HashMap</code>. <code>LinkedHashMap</code> has a <code>private static</code> class <code>LinkedHashMap.Entry</code> which extends the <code>static</code> class <code>HashMap.Entry</code> of <code>HashMap</code>. When you call <code>put</code> or <code>remove</code>, for example, the code for <code>LinkedHashMap</code> can be the same as the code for <code>HashMap</code> because it is the <em>entries themselves</em> that keep track of before and after information. As an example, here is the code in full for <code>LinkedHashMap.Entry.remove()</code> that I was explaining above</p>\n\n<pre><code>private void remove() {\n    before.after = after;\n    after.before = before;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1578439,"reputation":9,"user_id":1464350,"display_name":"user1464350"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1513623308,"creation_date":1513623308,"answer_id":47874726,"question_id":27916018,"body_markdown":"LinkedHashMap can be used for maintaining the insertion order and for maintaining the access order.\r\nLinkedHashMap inherited the same functionality of hashmap for maintain list in bucket,so used **next** reference.\r\n\r\nFor maintaining the insertion order they used doubly linked list(used **before** and **after** reference),but that can be done by using singly linked list. At the same time they have to achieve the access order functionality and in that they need frequent movement of the element to the end and that require frequent deletion for frequent deletion they used doubly linked list .","title":"why linkedhashmap maintains doubly linked list for iteration","body":"<p>LinkedHashMap can be used for maintaining the insertion order and for maintaining the access order.\nLinkedHashMap inherited the same functionality of hashmap for maintain list in bucket,so used <strong>next</strong> reference.</p>\n\n<p>For maintaining the insertion order they used doubly linked list(used <strong>before</strong> and <strong>after</strong> reference),but that can be done by using singly linked list. At the same time they have to achieve the access order functionality and in that they need frequent movement of the element to the end and that require frequent deletion for frequent deletion they used doubly linked list .</p>\n"},{"tags":[],"owner":{"account_id":5421403,"reputation":943,"user_id":4314917,"accept_rate":80,"display_name":"Gurinder"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1524905998,"creation_date":1524893345,"answer_id":50073188,"question_id":27916018,"body_markdown":"One thing I would also like to add is that LinkedHashMap can also be used as an LRU Cache by setting it&#39;s accessOrder boolean to true via its constructor.\r\n\r\nNow LinkedHashMap maintains two pointers `head`(eldest of the LinkedHashMap) and `tails`(youngest of the LinkedHashMap). So keep in mind when you set accessOrder to true it stops maintaining the insertion-order and starts behaving like a proper LRU cache.\r\n\r\nNow when LRU cache exceeds its limit and we want to remove the eldest entry, as it maintains DoublyLinkedList internally the removal of eldest entry is comparatively fast, as it maintains two pointers(head and tails)  which can move in both directions or we can say if it was a Singly LinkedList for removing eldest entry we need to traverse all the nodes and then remove it. Thanks to pointers `head` and `tails` it can easily be done by just removing the last node(eldest one) by reaching there with help of `tails` pointer and taking that last node&#39;s previous pointer to make second last node `tail` of the DoublyLinkedList in LinkedHashMap.","title":"why linkedhashmap maintains doubly linked list for iteration","body":"<p>One thing I would also like to add is that LinkedHashMap can also be used as an LRU Cache by setting it's accessOrder boolean to true via its constructor.</p>\n\n<p>Now LinkedHashMap maintains two pointers <code>head</code>(eldest of the LinkedHashMap) and <code>tails</code>(youngest of the LinkedHashMap). So keep in mind when you set accessOrder to true it stops maintaining the insertion-order and starts behaving like a proper LRU cache.</p>\n\n<p>Now when LRU cache exceeds its limit and we want to remove the eldest entry, as it maintains DoublyLinkedList internally the removal of eldest entry is comparatively fast, as it maintains two pointers(head and tails)  which can move in both directions or we can say if it was a Singly LinkedList for removing eldest entry we need to traverse all the nodes and then remove it. Thanks to pointers <code>head</code> and <code>tails</code> it can easily be done by just removing the last node(eldest one) by reaching there with help of <code>tails</code> pointer and taking that last node's previous pointer to make second last node <code>tail</code> of the DoublyLinkedList in LinkedHashMap.</p>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695230205,"creation_date":1686799490,"answer_id":76478884,"question_id":27916018,"body_markdown":"The other answers cover why the doubly linked list is currently needed.  Java 21 has an additional reason: the [`reversed`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedMap.html#reversed()) method on `LinkedHashMap` which provides a reversed view of the map.  The backwards links are needed to efficiently iterate through the list backwards to provide this view.","title":"why linkedhashmap maintains doubly linked list for iteration","body":"<p>The other answers cover why the doubly linked list is currently needed.  Java 21 has an additional reason: the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedMap.html#reversed()\" rel=\"nofollow noreferrer\"><code>reversed</code></a> method on <code>LinkedHashMap</code> which provides a reversed view of the map.  The backwards links are needed to efficiently iterate through the list backwards to provide this view.</p>\n"}],"owner":{"account_id":5117147,"reputation":161,"user_id":4101896,"display_name":"Mohamed Rafic S"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3904,"favorite_count":0,"down_vote_count":0,"up_vote_count":15,"answer_count":6,"score":15,"last_activity_date":1695230205,"creation_date":1421129983,"question_id":27916018,"body_markdown":"As there is no internal and reasonable explanation in any thread.\r\nPlease give me exact reason.\r\n\r\n1. for the insertion order it is enough to maintain with singly linked list but why not?\r\n\r\n2. how doubly linked list increases performance in this scenario?\r\n\r\n3. all the methods are inherited from the hashmap xpt 4 methods then an iterator for hashmap not maintains the order whereas the linkedhashmap maintains the order?\r\n","title":"why linkedhashmap maintains doubly linked list for iteration","body":"<p>As there is no internal and reasonable explanation in any thread.\nPlease give me exact reason.</p>\n\n<ol>\n<li><p>for the insertion order it is enough to maintain with singly linked list but why not?</p></li>\n<li><p>how doubly linked list increases performance in this scenario?</p></li>\n<li><p>all the methods are inherited from the hashmap xpt 4 methods then an iterator for hashmap not maintains the order whereas the linkedhashmap maintains the order?</p></li>\n</ol>\n"},{"tags":["java","spring-boot","spring-integration","messaging","spring-integration-dsl"],"comments":[{"owner":{"account_id":3273937,"reputation":114870,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"score":0,"creation_date":1695229840,"post_id":77144457,"comment_id":135997820,"body_markdown":"I think it fails because there is that `foo` remote directory on your SFTP server.","body":"I think it fails because there is that <code>foo</code> remote directory on your SFTP server."}],"answers":[{"tags":[],"owner":{"account_id":3273937,"reputation":114870,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1695230151,"creation_date":1695230151,"answer_id":77144651,"question_id":77144457,"body_markdown":"It fails because there is just no that `foo` remote directory to upload file into.\r\n\r\nSee `autoCreateDirectory(true)` option:\r\n\r\n\t/**\r\n\t * A {@code boolean} flag to indicate automatically create the directory or not.\r\n\t * @param autoCreateDirectory true to automatically create the directory.\r\n\t * @return the current Spec\r\n\t */\r\n\tpublic S autoCreateDirectory(boolean autoCreateDirectory) {\r\n\r\nIt is `false` by default on the `RemoteFileTemplate`.\r\n\r\nTherefore your config must be like this:\r\n\r\n    Sftp.outboundAdapter(ftp()).remoteDirectory(&quot;foo&quot;).autoCreateDirectory(true)","title":"Spring Integration error: Failure to write to &#39;foo/002.txt.writing&#39; while uploading the file","body":"<p>It fails because there is just no that <code>foo</code> remote directory to upload file into.</p>\n<p>See <code>autoCreateDirectory(true)</code> option:</p>\n<pre><code>/**\n * A {@code boolean} flag to indicate automatically create the directory or not.\n * @param autoCreateDirectory true to automatically create the directory.\n * @return the current Spec\n */\npublic S autoCreateDirectory(boolean autoCreateDirectory) {\n</code></pre>\n<p>It is <code>false</code> by default on the <code>RemoteFileTemplate</code>.</p>\n<p>Therefore your config must be like this:</p>\n<pre><code>Sftp.outboundAdapter(ftp()).remoteDirectory(&quot;foo&quot;).autoCreateDirectory(true)\n</code></pre>\n"}],"owner":{"account_id":106565,"reputation":18790,"user_id":283837,"accept_rate":70,"display_name":"Simeon Leyzerzon"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77144651,"answer_count":1,"score":0,"last_activity_date":1695230151,"creation_date":1695228272,"question_id":77144457,"body_markdown":"I&#39;m experimenting with the following sample setup from [SI samples][1] to understand its inner workings with a goal to then adapt it to similar set of tasks in upper environments.\r\n\r\n**DailyCashReportApplication.java**\r\n```\r\n@Slf4j\r\n@SpringBootApplication\r\n@PropertySource(value = &quot;classpath:feeds-config.yml&quot;, factory = com.pru.globalpayments.feeds.downstream.YamlPropertySourceFactory.class)\r\npublic class DailyCashReportApplication  implements CommandLineRunner  {\r\n\t\r\n//\t@Autowired\r\n//\t@Qualifier(&quot;syntheticRunner&quot;) //TODO: to be replaced by runners consuming from appropriate data sources\r\n//\tprivate AbstractRunner runner; \r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tlog.info(&quot;DailyCashReportApplication running...&quot;);\r\n\t\r\n\t\tnew SpringApplicationBuilder(DailyCashReportApplication.class).web(WebApplicationType.NONE).run(args);\r\n\t\t\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void run(String... args) throws Exception {\r\n\t\t//runner.run(args);\r\n\t}\r\n```\r\n\r\n**DcrConfig.java**:\r\n```\r\n@Configuration\r\npublic class DcrConfig {\r\n\r\n\tprivate final static String EMAIL_SUCCESS_SUFFIX = &quot;emailSuccessSuffix&quot;;\r\n\t\r\n\t// sftp\r\n\r\n\t@Value(&quot;${sftp.in.host}&quot;)\r\n\t@Getter\r\n\tprivate String host;\r\n\r\n\t@Value(&quot;${sftp.in.port}&quot;)\r\n\tprivate int port;\r\n\r\n\t@Value(&quot;${sftp.in.user}&quot;)\r\n\tprivate String user;\r\n\r\n\t@Value(&quot;${sftp.in.privateKey}&quot;)\r\n\t@Getter\r\n\tprivate String privateKeyLocation;\r\n\r\n\t@Value(&quot;${sftp.in.remoteDir}&quot;)\r\n\t@Getter\r\n\tprivate String remoteDir;\r\n\r\n\r\n\r\n\t@Value(&quot;${sftp.in.localDir}&quot;)\r\n\t@Getter\r\n\tprivate String localDir;\r\n\r\n\t@Value(&quot;${sftp.in.chmod}&quot;)\r\n\tprivate String chmod;\r\n\r\n\t@Value(&quot;${sftp.in.maxFetchSize}&quot;)\r\n\t@Getter\r\n\tprivate int maxFetchSize;\r\n\r\n\t@Value(&quot;${sftp.in.file.filter}&quot;)\r\n\tprivate String fileFilter;\r\n\r\n\t@Autowired\r\n\tprivate ResourceLoader resourceLoader;\r\n\t\r\n\t@Bean(name = &quot;downloadSftpSessionFactory&quot;)\r\n\tpublic SessionFactory&lt;LsEntry&gt; sftpSessionFactory() throws IOException {\r\n\r\n\t\tResource keyFileResource = resourceLoader.getResource(privateKeyLocation);\r\n\r\n\t\tDefaultSftpSessionFactory factory = new DefaultSftpSessionFactory();\r\n\t\tfactory.setHost(host);\r\n\t\tfactory.setPort(port);\r\n\t\tfactory.setUser(user);\r\n\t\tfactory.setPrivateKey(keyFileResource);\r\n\t\tfactory.setAllowUnknownKeys(true);\r\n\t\treturn new CachingSessionFactory&lt;LsEntry&gt;(factory);\r\n\t}\r\n\r\n\t\r\n\t\r\n\t@Bean\r\n\tpublic IntegrationFlow fromFile() {\r\n\t\treturn IntegrationFlows.from(Files.inboundAdapter(new File(remoteDir))\r\n\t\t\t\t\t\t\t\t\t\t.preventDuplicates(false)\r\n\t\t\t\t\t\t\t\t\t\t.patternFilter(&quot;*.txt&quot;), \r\n\t\t\t\te -&gt; e.poller(Pollers.fixedDelay(5000))\r\n\t\t\t\t\t\t\t\t\t\t.id(&quot;fileInboundChannelAdapter&quot;))\r\n\t\t\t\t.handle(Files.splitter(true, true))\r\n\t\t\t\t.&lt;Object, Class&lt;?&gt;&gt;route(Object::getClass, m-&gt;m\r\n\t\t\t\t\t\t.channelMapping(FileSplitter.FileMarker.class, &quot;markers.input&quot;)\r\n\t\t\t\t\t\t.channelMapping(String.class, &quot;lines.input&quot;))\r\n\t\t\t\t.get();\r\n\t}\r\n\t\r\n\t@Bean\r\n\tpublic FileWritingMessageHandlerSpec fileOut() {\r\n\t\treturn Files.outboundAdapter(&quot;&#39;&quot;+localDir+&quot;&#39;&quot;)\r\n\t\t\t\t.appendNewLine(true)\r\n\t\t\t\t.fileNameExpression(&quot;payload.substring(1,4) + &#39;.txt&#39;&quot;);\r\n\t}\r\n\t\r\n\t@Bean\r\n\tpublic IntegrationFlow lines(FileWritingMessageHandler fileOut) {\r\n\t\treturn f -&gt; f.handle(fileOut); \r\n\t}\r\n\t\r\n\r\n\t\r\n\t@Bean\r\n\tpublic IntegrationFlow markers() throws IOException{\r\n\t\treturn f -&gt; f.&lt;FileSplitter.FileMarker&gt;filter(m -&gt; m.getMark().equals(FileSplitter.FileMarker.Mark.END),\r\n\t\t\t\t\t\te -&gt; e.id(&quot;markerFilter&quot;))\r\n\t\t\t\t.publishSubscribeChannel(s -&gt; s\r\n\r\n\t\t\t\t\t\t// first trigger file flushes\r\n\t\t\t\t\t\t.subscribe(sf -&gt; sf.transform(&quot;&#39;tmp/out/.*\\\\.txt&#39;&quot;, e -&gt; e.id(&quot;toTriggerPattern&quot;))\r\n\t\t\t\t\t\t\t\t.trigger(&quot;fileOut&quot;, e -&gt; e.id(&quot;flusher&quot;)))\r\n\r\n\t\t\t\t\t\t// send the first file\r\n\t\t\t\t\t\t.subscribe(sf -&gt; {\r\n\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\tsf.&lt;FileSplitter.FileMarker, File&gt;transform(p -&gt; new File(&quot;tmp/out/002.txt&quot;))\r\n\t\t\t\t\t\t\t\t\t\t.enrichHeaders(h -&gt; h.header(FileHeaders.FILENAME, &quot;002.txt&quot;, true))\r\n\t\t\t\t\t\t\t\t\t\t.handle(Sftp.outboundAdapter(ftp()).remoteDirectory(&quot;foo&quot;), e -&gt; e.id(&quot;ftp002&quot;));\r\n\t\t\t\t\t\t\t} catch (IOException e1) {\r\n\t\t\t\t\t\t\t\t// TODO Auto-generated catch block\r\n\t\t\t\t\t\t\t\te1.printStackTrace();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\t// send the second file\r\n\t\t\t\t\t\t.subscribe(sf -&gt; {\r\n\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\tsf.&lt;FileSplitter.FileMarker, File&gt;transform(p -&gt; new File(&quot;/tmp/out/006.txt&quot;))\r\n\t\t\t\t\t\t\t\t\t\t.enrichHeaders(h -&gt; h.header(FileHeaders.FILENAME, &quot;006.txt&quot;, true))\r\n\t\t\t\t\t\t\t\t\t\t.handle(Sftp.outboundAdapter(ftp()).remoteDirectory(&quot;foo&quot;), e -&gt; e.id(&quot;ftp006&quot;));\r\n\t\t\t\t\t\t\t} catch (IOException e1) {\r\n\t\t\t\t\t\t\t\t// TODO Auto-generated catch block\r\n\t\t\t\t\t\t\t\te1.printStackTrace();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\t// send the third file\r\n\t\t\t\t\t\t.subscribe(sf -&gt; {\r\n\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\tsf.&lt;FileSplitter.FileMarker, File&gt;transform(p -&gt; new File(&quot;/tmp/out/009.txt&quot;))\r\n\t\t\t\t\t\t\t\t\t\t.enrichHeaders(h -&gt; h.header(FileHeaders.FILENAME, &quot;009.txt&quot;, true))\r\n\t\t\t\t\t\t\t\t\t\t.handle(Sftp.outboundAdapter(ftp()).remoteDirectory(&quot;foo&quot;), e -&gt; e.id(&quot;ftp009&quot;));\r\n\t\t\t\t\t\t\t} catch (IOException e1) {\r\n\t\t\t\t\t\t\t\t// TODO Auto-generated catch block\r\n\t\t\t\t\t\t\t\te1.printStackTrace();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\r\n\r\n\t\t\t\t\t\t);\r\n\t}\r\n\t\r\n\r\n\t\r\n\t\r\n\r\n\t\r\n\r\n\t\r\n\t@Bean\r\n\tpublic SessionFactory&lt;LsEntry&gt; ftp() throws IOException {\r\n\r\n\t\tResource keyFileResource = resourceLoader.getResource(privateKeyLocation);\r\n\r\n\r\n\t\tDefaultSftpSessionFactory factory = new DefaultSftpSessionFactory();\r\n\t\tfactory.setHost(host);\r\n\t\tfactory.setPort(port);\r\n\t\tfactory.setUser(user);\r\n\t\tfactory.setPrivateKey(keyFileResource);\r\n\t\tfactory.setAllowUnknownKeys(true);\r\n\t\treturn new CachingSessionFactory&lt;LsEntry&gt;(factory);\r\n\t}\r\n\t\r\n\t@Bean\r\n\tpublic MethodInterceptor afterMailAdvice() {\r\n\t\treturn invocation -&gt; {\r\n\t\t\tMessage&lt;?&gt; message = (Message&lt;?&gt;) invocation.getArguments()[0];\r\n\t\t\tMessageHeaders headers = message.getHeaders();\r\n\t\t\tFile originalFile = headers.get(FileHeaders.ORIGINAL_FILE, File.class);\r\n\t\t\ttry {\r\n\t\t\t\tinvocation.proceed();\r\n\t\t\t\toriginalFile.renameTo(new File(originalFile.getAbsolutePath() + headers.get(EMAIL_SUCCESS_SUFFIX)));\r\n\t\t\t}\r\n\t\t\tcatch(Exception e) {\r\n\t\t\t\toriginalFile.renameTo(new File(originalFile.getAbsolutePath() + headers.get(EMAIL_SUCCESS_SUFFIX)+&quot;email.failed&quot;));\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t};\r\n\t}\r\n\t\r\n}\r\n\r\n```\r\n**application-dev.yml**\r\n```\r\nspring:\r\n  application:\r\n    name: daily-cash-report-application\r\n\r\nsftp:\r\n  in:\r\n    host: eafdev\r\n    port: 22\r\n    user: eafdev\r\n    remoteDir: tmp/in \r\n    tmpDir: \r\n    localDir: tmp/out \r\n    maxFetchSize: 1    \r\n    privateKey: file:///C:/Users/x12345/AppData/Roaming/SSH/UserKeys/distributessh\r\n    chmod: 664 \r\n    poller:\r\n      fixedDelay: 10000\r\n    file:\r\n      filter: A.B.*    #TODO: calibrate once spec is known\r\n  out:\r\n    host: eafdev\r\n    port: 22\r\n    user: eafdev\r\n    remoteDir: tmp/out  \r\n    privateKey: file:///C:/Users/x12345/AppData/Roaming/SSH/UserKeys/distributessh\r\n    chmod: 664 \r\n\r\nfile: \r\n  out:   \r\n    targetDir: \r\n    tmpDir:\r\n```\r\n\r\n**DailyCashReportApplicationTest.java**:\r\n```\r\n@DirtiesContext(classMode = DirtiesContext.ClassMode.AFTER_EACH_TEST_METHOD)\r\n@SpringIntegrationTest(noAutoStartup = &quot;fileInboundChannelAdapter&quot;)\r\n@SpringJUnitConfig(classes = { \r\n        DailyCashReportApplication.class,\r\n        DcrConfig.class,\r\n        })\r\n@EnableConfigurationProperties\r\n@PropertySource(value = &quot;application-dev.yml&quot;, factory = YamlPropertySourceFactory.class)\r\n@Slf4j\r\nclass DailyCashReportApplicationTest {\r\n\r\n    @Test\r\n    @SneakyThrows\r\n    void test()  {\r\n\r\n        File in = new File(&quot;tmp/in/&quot;, &quot;foo&quot;);\r\n        FileOutputStream fos = new FileOutputStream(in);\r\n        fos.write(&quot;*002,foo,bar\\n*006,baz,qux\\n*009,fiz,buz\\n&quot;.getBytes());\r\n        fos.close();\r\n        in.renameTo(new File(&quot;tmp/in/&quot;, &quot;foo.txt&quot;));\r\n\r\n        File out = new File(&quot;tmp/out/002.txt&quot;);\r\n        int n = 0;\r\n        while (n++ &lt; 100 &amp;&amp; (!out.exists() || out.length() &lt; 12)) {\r\n            Thread.sleep(100);\r\n        }\r\n        assertThat(out.exists()).isTrue();\r\n\r\n    }\r\n\r\n}\r\n```\r\n\r\nRegardless if run via *ApplicationTest.java, or via executing the above *Application.java file in the IDE and dropping the same foo.txt content in the pre-created `tmp/in` folder, I&#39;m seeing **partially** correct behavior in terms of `tmp\\in\\foo.txt` being picked up and 3 files being created in the `tmp/out` accompanied by the following error: \r\n\r\n```\r\n2023-09-20 11:40:21.384 [scheduling-1] ERROR o.s.i.handler.LoggingHandler - org.springframework.messaging.MessageDeliveryException: Error handling message for file [C:\\code\\STS\\daily-cash-report\\tmp\\out\\002.txt -&gt; 002.txt]; nested exception is org.springframework.messaging.MessagingException: Failed to write to &#39;foo/002.txt.writing&#39; while uploading the file; nested exception is java.io.IOException: failed to write file, failedMessage=GenericMessage [payload=tmp\\out\\002.txt, headers={file_lineCount=3, file_name=002.txt, file_originalFile=tmp\\in\\foo.txt, id=365e346c-78d4-47ab-d6c0-e4f0f5f72f43, file_marker=END, file_relativePath=foo.txt, timestamp=1695224420443}]\r\n\tat org.springframework.integration.file.remote.RemoteFileTemplate.doSend(RemoteFileTemplate.java:368)\r\n\tat org.springframework.integration.file.remote.RemoteFileTemplate.lambda$send$0(RemoteFileTemplate.java:314)\r\n\tat org.springframework.integration.file.remote.RemoteFileTemplate.execute(RemoteFileTemplate.java:452)\r\n\tat org.springframework.integration.file.remote.RemoteFileTemplate.send(RemoteFileTemplate.java:314)\r\n\tat org.springframework.integration.file.remote.RemoteFileTemplate.send(RemoteFileTemplate.java:302)\r\n\tat org.springframework.integration.file.remote.RemoteFileTemplate.send(RemoteFileTemplate.java:294)\r\n\tat org.springframework.integration.file.remote.handler.FileTransferringMessageHandler.handleMessageInternal(FileTransferringMessageHandler.java:207)\r\n\tat org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:55)\r\n\tat org.springframework.integration.dispatcher.AbstractDispatcher.tryOptimizedDispatch(AbstractDispatcher.java:115)\r\n\tat org.springframework.integration.dispatcher.UnicastingDispatcher.doDispatch(UnicastingDispatcher.java:133)\r\n\tat org.springframework.integration.dispatcher.UnicastingDispatcher.dispatch(UnicastingDispatcher.java:106)\r\n\tat org.springframework.integration.channel.AbstractSubscribableChannel.doSend(AbstractSubscribableChannel.java:72)\r\n\tat org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:317)\r\n\tat org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:272)\r\n\tat org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:187)\r\n\tat org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:166)\r\n\tat org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:47)\r\n\tat org.springframework.messaging.core.AbstractMessageSendingTemplate.send(AbstractMessageSendingTemplate.java:109)\r\n\tat org.springframework.integration.handler.AbstractMessageProducingHandler.sendOutput(AbstractMessageProducingHandler.java:456)\r\n\tat org.springframework.integration.handler.AbstractMessageProducingHandler.doProduceOutput(AbstractMessageProducingHandler.java:324)\r\n\tat org.springframework.integration.handler.AbstractMessageProducingHandler.produceOutput(AbstractMessageProducingHandler.java:267)\r\n\tat org.springframework.integration.handler.AbstractMessageProducingHandler.sendOutputs(AbstractMessageProducingHandler.java:231)\r\n\tat org.springframework.integration.handler.AbstractReplyProducingMessageHandler.handleMessageInternal(AbstractReplyProducingMessageHandler.java:142)\r\n\tat org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:55)\r\n\tat org.springframework.integration.dispatcher.AbstractDispatcher.tryOptimizedDispatch(AbstractDispatcher.java:115)\r\n\tat org.springframework.integration.dispatcher.UnicastingDispatcher.doDispatch(UnicastingDispatcher.java:133)\r\n\tat org.springframework.integration.dispatcher.UnicastingDispatcher.dispatch(UnicastingDispatcher.java:106)\r\n\tat org.springframework.integration.channel.AbstractSubscribableChannel.doSend(AbstractSubscribableChannel.java:72)\r\n\tat org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:317)\r\n\tat org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:272)\r\n\tat org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:187)\r\n\tat org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:166)\r\n\tat org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:47)\r\n\tat org.springframework.messaging.core.AbstractMessageSendingTemplate.send(AbstractMessageSendingTemplate.java:109)\r\n\tat org.springframework.integration.handler.AbstractMessageProducingHandler.sendOutput(AbstractMessageProducingHandler.java:456)\r\n\tat org.springframework.integration.handler.AbstractMessageProducingHandler.doProduceOutput(AbstractMessageProducingHandler.java:324)\r\n\tat org.springframework.integration.handler.AbstractMessageProducingHandler.produceOutput(AbstractMessageProducingHandler.java:267)\r\n\tat org.springframework.integration.handler.AbstractMessageProducingHandler.sendOutputs(AbstractMessageProducingHandler.java:231)\r\n\tat org.springframework.integration.handler.AbstractReplyProducingMessageHandler.handleMessageInternal(AbstractReplyProducingMessageHandler.java:142)\r\n\tat org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:55)\r\n\tat org.springframework.integration.dispatcher.AbstractDispatcher.tryOptimizedDispatch(AbstractDispatcher.java:115)\r\n\tat org.springframework.integration.dispatcher.UnicastingDispatcher.doDispatch(UnicastingDispatcher.java:133)\r\n\tat org.springframework.integration.dispatcher.UnicastingDispatcher.dispatch(UnicastingDispatcher.java:106)\r\n\tat org.springframework.integration.channel.AbstractSubscribableChannel.doSend(AbstractSubscribableChannel.java:72)\r\n\tat org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:317)\r\n\tat org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:272)\r\n\tat org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:187)\r\n\tat org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:166)\r\n\tat org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:47)\r\n\tat org.springframework.messaging.core.AbstractMessageSendingTemplate.send(AbstractMessageSendingTemplate.java:109)\r\n\tat org.springframework.integration.handler.AbstractMessageProducingHandler.sendOutput(AbstractMessageProducingHandler.java:456)\r\n\tat org.springframework.integration.handler.AbstractMessageProducingHandler.doProduceOutput(AbstractMessageProducingHandler.java:324)\r\n\tat org.springframework.integration.handler.AbstractMessageProducingHandler.produceOutput(AbstractMessageProducingHandler.java:267)\r\n\tat org.springframework.integration.handler.AbstractMessageProducingHandler.sendOutputs(AbstractMessageProducingHandler.java:231)\r\n\tat org.springframework.integration.handler.AbstractReplyProducingMessageHandler.handleMessageInternal(AbstractReplyProducingMessageHandler.java:142)\r\n\tat org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:55)\r\n\tat org.springframework.integration.dispatcher.BroadcastingDispatcher.invokeHandler(BroadcastingDispatcher.java:222)\r\n\tat org.springframework.integration.dispatcher.BroadcastingDispatcher.dispatch(BroadcastingDispatcher.java:178)\r\n\tat org.springframework.integration.channel.AbstractSubscribableChannel.doSend(AbstractSubscribableChannel.java:72)\r\n\tat org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:317)\r\n\tat org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:272)\r\n\tat org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:187)\r\n\tat org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:166)\r\n\tat org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:47)\r\n\tat org.springframework.messaging.core.AbstractMessageSendingTemplate.send(AbstractMessageSendingTemplate.java:109)\r\n\tat org.springframework.integration.handler.AbstractMessageProducingHandler.sendOutput(AbstractMessageProducingHandler.java:456)\r\n\tat org.springframework.integration.handler.AbstractMessageProducingHandler.doProduceOutput(AbstractMessageProducingHandler.java:324)\r\n\tat org.springframework.integration.handler.AbstractMessageProducingHandler.produceOutput(AbstractMessageProducingHandler.java:267)\r\n\tat org.springframework.integration.handler.AbstractMessageProducingHandler.sendOutputs(AbstractMessageProducingHandler.java:231)\r\n\tat org.springframework.integration.handler.AbstractReplyProducingMessageHandler.handleMessageInternal(AbstractReplyProducingMessageHandler.java:142)\r\n\tat org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:55)\r\n\tat org.springframework.integration.dispatcher.AbstractDispatcher.tryOptimizedDispatch(AbstractDispatcher.java:115)\r\n\tat org.springframework.integration.dispatcher.UnicastingDispatcher.doDispatch(UnicastingDispatcher.java:133)\r\n\tat org.springframework.integration.dispatcher.UnicastingDispatcher.dispatch(UnicastingDispatcher.java:106)\r\n\tat org.springframework.integration.channel.AbstractSubscribableChannel.doSend(AbstractSubscribableChannel.java:72)\r\n\tat org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:317)\r\n\tat org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:272)\r\n\tat org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:187)\r\n\tat org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:166)\r\n\tat org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:47)\r\n\tat org.springframework.messaging.core.AbstractMessageSendingTemplate.send(AbstractMessageSendingTemplate.java:109)\r\n\tat org.springframework.integration.router.AbstractMessageRouter.doSend(AbstractMessageRouter.java:213)\r\n\tat org.springframework.integration.router.AbstractMessageRouter.handleMessageInternal(AbstractMessageRouter.java:195)\r\n\tat org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:55)\r\n\tat org.springframework.integration.dispatcher.AbstractDispatcher.tryOptimizedDispatch(AbstractDispatcher.java:115)\r\n\tat org.springframework.integration.dispatcher.UnicastingDispatcher.doDispatch(UnicastingDispatcher.java:133)\r\n\tat org.springframework.integration.dispatcher.UnicastingDispatcher.dispatch(UnicastingDispatcher.java:106)\r\n\tat org.springframework.integration.channel.AbstractSubscribableChannel.doSend(AbstractSubscribableChannel.java:72)\r\n\tat org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:317)\r\n\tat org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:272)\r\n\tat org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:187)\r\n\tat org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:166)\r\n\tat org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:47)\r\n\tat org.springframework.messaging.core.AbstractMessageSendingTemplate.send(AbstractMessageSendingTemplate.java:109)\r\n\tat org.springframework.integration.handler.AbstractMessageProducingHandler.sendOutput(AbstractMessageProducingHandler.java:456)\r\n\tat org.springframework.integration.handler.AbstractMessageProducingHandler.doProduceOutput(AbstractMessageProducingHandler.java:324)\r\n\tat org.springframework.integration.handler.AbstractMessageProducingHandler.produceOutput(AbstractMessageProducingHandler.java:267)\r\n\tat org.springframework.integration.splitter.AbstractMessageSplitter.produceOutput(AbstractMessageSplitter.java:317)\r\n\tat org.springframework.integration.handler.AbstractMessageProducingHandler.sendOutputs(AbstractMessageProducingHandler.java:231)\r\n\tat org.springframework.integration.handler.AbstractReplyProducingMessageHandler.handleMessageInternal(AbstractReplyProducingMessageHandler.java:142)\r\n\tat org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:55)\r\n\tat org.springframework.integration.dispatcher.AbstractDispatcher.tryOptimizedDispatch(AbstractDispatcher.java:115)\r\n\tat org.springframework.integration.dispatcher.UnicastingDispatcher.doDispatch(UnicastingDispatcher.java:133)\r\n\tat org.springframework.integration.dispatcher.UnicastingDispatcher.dispatch(UnicastingDispatcher.java:106)\r\n\tat org.springframework.integration.channel.AbstractSubscribableChannel.doSend(AbstractSubscribableChannel.java:72)\r\n\tat org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:317)\r\n\tat org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:272)\r\n\tat org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:187)\r\n\tat org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:166)\r\n\tat org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:47)\r\n\tat org.springframework.messaging.core.AbstractMessageSendingTemplate.send(AbstractMessageSendingTemplate.java:109)\r\n\tat org.springframework.integration.endpoint.SourcePollingChannelAdapter.handleMessage(SourcePollingChannelAdapter.java:196)\r\n\tat org.springframework.integration.endpoint.AbstractPollingEndpoint.messageReceived(AbstractPollingEndpoint.java:474)\r\n\tat org.springframework.integration.endpoint.AbstractPollingEndpoint.doPoll(AbstractPollingEndpoint.java:460)\r\n\tat org.springframework.integration.endpoint.AbstractPollingEndpoint.pollForMessage(AbstractPollingEndpoint.java:412)\r\n\tat org.springframework.integration.endpoint.AbstractPollingEndpoint.lambda$createPoller$4(AbstractPollingEndpoint.java:347)\r\n\tat org.springframework.integration.util.ErrorHandlingTaskExecutor.lambda$execute$0(ErrorHandlingTaskExecutor.java:57)\r\n\tat org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:50)\r\n\tat org.springframework.integration.util.ErrorHandlingTaskExecutor.execute(ErrorHandlingTaskExecutor.java:55)\r\n\tat org.springframework.integration.endpoint.AbstractPollingEndpoint.lambda$createPoller$5(AbstractPollingEndpoint.java:340)\r\n\tat org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)\r\n\tat org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:95)\r\n\tat java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)\r\n\tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n\tat java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\n\tat java.base/java.lang.Thread.run(Thread.java:829)\r\nCaused by: org.springframework.messaging.MessagingException: Failed to write to &#39;foo/002.txt.writing&#39; while uploading the file; nested exception is java.io.IOException: failed to write file\r\n\tat org.springframework.integration.file.remote.RemoteFileTemplate.sendFileToRemoteDirectory(RemoteFileTemplate.java:573)\r\n\tat org.springframework.integration.file.remote.RemoteFileTemplate.doSend(RemoteFileTemplate.java:353)\r\n\t... 127 more\r\nCaused by: java.io.IOException: failed to write file\r\n\tat org.springframework.integration.sftp.session.SftpSession.write(SftpSession.java:175)\r\n\tat org.springframework.integration.file.remote.session.CachingSessionFactory$CachedSession.write(CachingSessionFactory.java:237)\r\n\tat org.springframework.integration.file.remote.RemoteFileTemplate.doSend(RemoteFileTemplate.java:582)\r\n\tat org.springframework.integration.file.remote.RemoteFileTemplate.sendFileToRemoteDirectory(RemoteFileTemplate.java:570)\r\n\t... 128 more\r\nCaused by: 2: No such file\r\n\tat com.jcraft.jsch.ChannelSftp.throwStatusError(ChannelSftp.java:2873)\r\n\tat com.jcraft.jsch.ChannelSftp._put(ChannelSftp.java:594)\r\n\tat com.jcraft.jsch.ChannelSftp.put(ChannelSftp.java:540)\r\n\tat com.jcraft.jsch.ChannelSftp.put(ChannelSftp.java:492)\r\n\tat org.springframework.integration.sftp.session.SftpSession.write(SftpSession.java:172)\r\n\t... 131 more\r\n```\r\n\r\nThe gist seems to be: ```Failed to write to &#39;foo/002.txt.writing&#39; while uploading the file; nested exception is java.io.IOException: failed to write file, failedMessage=GenericMessage [payload=tmp\\out\\002.txt, headers={file_lineCount=3, file_name=002.txt, file_originalFile=tmp\\in\\foo.txt, id=365e346c-78d4-47ab-d6c0-e4f0f5f72f43, file_marker=END, file_relativePath=foo.txt, timestamp=1695224420443}]```\r\n\r\nIt is thrown on a brand-new file being dropped in the `tmp\\in` folder and then repeatedly on every  poller execution while the split into the 3 resulting files: `002.txt`, `006.txt` and `009.txt` happens correctly, as mentioned above.\r\n\r\nI&#39;m aware of the `.writing` extension (as per [docs][2]), however this doesn&#39;t seem like an expected behavior.  While playing with that SI sample, I&#39;d like to get to the bottom of why this error is happening so I can eliminate it migrating the app from this experimental environment into the real ones.\r\n\r\n\r\n  [1]: https://github.com/spring-projects/spring-integration-samples/blob/main/applications/file-split-ftp/src/main/java/org/springframework/integration/samples/filesplit/Application.java\r\n  [2]: https://docs.spring.io/spring-integration/docs/current/reference/html/file.html#file-incomplete","title":"Spring Integration error: Failure to write to &#39;foo/002.txt.writing&#39; while uploading the file","body":"<p>I'm experimenting with the following sample setup from <a href=\"https://github.com/spring-projects/spring-integration-samples/blob/main/applications/file-split-ftp/src/main/java/org/springframework/integration/samples/filesplit/Application.java\" rel=\"nofollow noreferrer\">SI samples</a> to understand its inner workings with a goal to then adapt it to similar set of tasks in upper environments.</p>\n<p><strong>DailyCashReportApplication.java</strong></p>\n<pre><code>@Slf4j\n@SpringBootApplication\n@PropertySource(value = &quot;classpath:feeds-config.yml&quot;, factory = com.pru.globalpayments.feeds.downstream.YamlPropertySourceFactory.class)\npublic class DailyCashReportApplication  implements CommandLineRunner  {\n    \n//  @Autowired\n//  @Qualifier(&quot;syntheticRunner&quot;) //TODO: to be replaced by runners consuming from appropriate data sources\n//  private AbstractRunner runner; \n\n    public static void main(String[] args) {\n        log.info(&quot;DailyCashReportApplication running...&quot;);\n    \n        new SpringApplicationBuilder(DailyCashReportApplication.class).web(WebApplicationType.NONE).run(args);\n        \n    }\n\n    @Override\n    public void run(String... args) throws Exception {\n        //runner.run(args);\n    }\n</code></pre>\n<p><strong>DcrConfig.java</strong>:</p>\n<pre><code>@Configuration\npublic class DcrConfig {\n\n    private final static String EMAIL_SUCCESS_SUFFIX = &quot;emailSuccessSuffix&quot;;\n    \n    // sftp\n\n    @Value(&quot;${sftp.in.host}&quot;)\n    @Getter\n    private String host;\n\n    @Value(&quot;${sftp.in.port}&quot;)\n    private int port;\n\n    @Value(&quot;${sftp.in.user}&quot;)\n    private String user;\n\n    @Value(&quot;${sftp.in.privateKey}&quot;)\n    @Getter\n    private String privateKeyLocation;\n\n    @Value(&quot;${sftp.in.remoteDir}&quot;)\n    @Getter\n    private String remoteDir;\n\n\n\n    @Value(&quot;${sftp.in.localDir}&quot;)\n    @Getter\n    private String localDir;\n\n    @Value(&quot;${sftp.in.chmod}&quot;)\n    private String chmod;\n\n    @Value(&quot;${sftp.in.maxFetchSize}&quot;)\n    @Getter\n    private int maxFetchSize;\n\n    @Value(&quot;${sftp.in.file.filter}&quot;)\n    private String fileFilter;\n\n    @Autowired\n    private ResourceLoader resourceLoader;\n    \n    @Bean(name = &quot;downloadSftpSessionFactory&quot;)\n    public SessionFactory&lt;LsEntry&gt; sftpSessionFactory() throws IOException {\n\n        Resource keyFileResource = resourceLoader.getResource(privateKeyLocation);\n\n        DefaultSftpSessionFactory factory = new DefaultSftpSessionFactory();\n        factory.setHost(host);\n        factory.setPort(port);\n        factory.setUser(user);\n        factory.setPrivateKey(keyFileResource);\n        factory.setAllowUnknownKeys(true);\n        return new CachingSessionFactory&lt;LsEntry&gt;(factory);\n    }\n\n    \n    \n    @Bean\n    public IntegrationFlow fromFile() {\n        return IntegrationFlows.from(Files.inboundAdapter(new File(remoteDir))\n                                        .preventDuplicates(false)\n                                        .patternFilter(&quot;*.txt&quot;), \n                e -&gt; e.poller(Pollers.fixedDelay(5000))\n                                        .id(&quot;fileInboundChannelAdapter&quot;))\n                .handle(Files.splitter(true, true))\n                .&lt;Object, Class&lt;?&gt;&gt;route(Object::getClass, m-&gt;m\n                        .channelMapping(FileSplitter.FileMarker.class, &quot;markers.input&quot;)\n                        .channelMapping(String.class, &quot;lines.input&quot;))\n                .get();\n    }\n    \n    @Bean\n    public FileWritingMessageHandlerSpec fileOut() {\n        return Files.outboundAdapter(&quot;'&quot;+localDir+&quot;'&quot;)\n                .appendNewLine(true)\n                .fileNameExpression(&quot;payload.substring(1,4) + '.txt'&quot;);\n    }\n    \n    @Bean\n    public IntegrationFlow lines(FileWritingMessageHandler fileOut) {\n        return f -&gt; f.handle(fileOut); \n    }\n    \n\n    \n    @Bean\n    public IntegrationFlow markers() throws IOException{\n        return f -&gt; f.&lt;FileSplitter.FileMarker&gt;filter(m -&gt; m.getMark().equals(FileSplitter.FileMarker.Mark.END),\n                        e -&gt; e.id(&quot;markerFilter&quot;))\n                .publishSubscribeChannel(s -&gt; s\n\n                        // first trigger file flushes\n                        .subscribe(sf -&gt; sf.transform(&quot;'tmp/out/.*\\\\.txt'&quot;, e -&gt; e.id(&quot;toTriggerPattern&quot;))\n                                .trigger(&quot;fileOut&quot;, e -&gt; e.id(&quot;flusher&quot;)))\n\n                        // send the first file\n                        .subscribe(sf -&gt; {\n                            try {\n                                sf.&lt;FileSplitter.FileMarker, File&gt;transform(p -&gt; new File(&quot;tmp/out/002.txt&quot;))\n                                        .enrichHeaders(h -&gt; h.header(FileHeaders.FILENAME, &quot;002.txt&quot;, true))\n                                        .handle(Sftp.outboundAdapter(ftp()).remoteDirectory(&quot;foo&quot;), e -&gt; e.id(&quot;ftp002&quot;));\n                            } catch (IOException e1) {\n                                // TODO Auto-generated catch block\n                                e1.printStackTrace();\n                            }\n                        })\n\n                        // send the second file\n                        .subscribe(sf -&gt; {\n                            try {\n                                sf.&lt;FileSplitter.FileMarker, File&gt;transform(p -&gt; new File(&quot;/tmp/out/006.txt&quot;))\n                                        .enrichHeaders(h -&gt; h.header(FileHeaders.FILENAME, &quot;006.txt&quot;, true))\n                                        .handle(Sftp.outboundAdapter(ftp()).remoteDirectory(&quot;foo&quot;), e -&gt; e.id(&quot;ftp006&quot;));\n                            } catch (IOException e1) {\n                                // TODO Auto-generated catch block\n                                e1.printStackTrace();\n                            }\n                        })\n\n                        // send the third file\n                        .subscribe(sf -&gt; {\n                            try {\n                                sf.&lt;FileSplitter.FileMarker, File&gt;transform(p -&gt; new File(&quot;/tmp/out/009.txt&quot;))\n                                        .enrichHeaders(h -&gt; h.header(FileHeaders.FILENAME, &quot;009.txt&quot;, true))\n                                        .handle(Sftp.outboundAdapter(ftp()).remoteDirectory(&quot;foo&quot;), e -&gt; e.id(&quot;ftp009&quot;));\n                            } catch (IOException e1) {\n                                // TODO Auto-generated catch block\n                                e1.printStackTrace();\n                            }\n                        })\n\n\n                        );\n    }\n    \n\n    \n    \n\n    \n\n    \n    @Bean\n    public SessionFactory&lt;LsEntry&gt; ftp() throws IOException {\n\n        Resource keyFileResource = resourceLoader.getResource(privateKeyLocation);\n\n\n        DefaultSftpSessionFactory factory = new DefaultSftpSessionFactory();\n        factory.setHost(host);\n        factory.setPort(port);\n        factory.setUser(user);\n        factory.setPrivateKey(keyFileResource);\n        factory.setAllowUnknownKeys(true);\n        return new CachingSessionFactory&lt;LsEntry&gt;(factory);\n    }\n    \n    @Bean\n    public MethodInterceptor afterMailAdvice() {\n        return invocation -&gt; {\n            Message&lt;?&gt; message = (Message&lt;?&gt;) invocation.getArguments()[0];\n            MessageHeaders headers = message.getHeaders();\n            File originalFile = headers.get(FileHeaders.ORIGINAL_FILE, File.class);\n            try {\n                invocation.proceed();\n                originalFile.renameTo(new File(originalFile.getAbsolutePath() + headers.get(EMAIL_SUCCESS_SUFFIX)));\n            }\n            catch(Exception e) {\n                originalFile.renameTo(new File(originalFile.getAbsolutePath() + headers.get(EMAIL_SUCCESS_SUFFIX)+&quot;email.failed&quot;));\n            }\n            return null;\n        };\n    }\n    \n}\n\n</code></pre>\n<p><strong>application-dev.yml</strong></p>\n<pre><code>spring:\n  application:\n    name: daily-cash-report-application\n\nsftp:\n  in:\n    host: eafdev\n    port: 22\n    user: eafdev\n    remoteDir: tmp/in \n    tmpDir: \n    localDir: tmp/out \n    maxFetchSize: 1    \n    privateKey: file:///C:/Users/x12345/AppData/Roaming/SSH/UserKeys/distributessh\n    chmod: 664 \n    poller:\n      fixedDelay: 10000\n    file:\n      filter: A.B.*    #TODO: calibrate once spec is known\n  out:\n    host: eafdev\n    port: 22\n    user: eafdev\n    remoteDir: tmp/out  \n    privateKey: file:///C:/Users/x12345/AppData/Roaming/SSH/UserKeys/distributessh\n    chmod: 664 \n\nfile: \n  out:   \n    targetDir: \n    tmpDir:\n</code></pre>\n<p><strong>DailyCashReportApplicationTest.java</strong>:</p>\n<pre><code>@DirtiesContext(classMode = DirtiesContext.ClassMode.AFTER_EACH_TEST_METHOD)\n@SpringIntegrationTest(noAutoStartup = &quot;fileInboundChannelAdapter&quot;)\n@SpringJUnitConfig(classes = { \n        DailyCashReportApplication.class,\n        DcrConfig.class,\n        })\n@EnableConfigurationProperties\n@PropertySource(value = &quot;application-dev.yml&quot;, factory = YamlPropertySourceFactory.class)\n@Slf4j\nclass DailyCashReportApplicationTest {\n\n    @Test\n    @SneakyThrows\n    void test()  {\n\n        File in = new File(&quot;tmp/in/&quot;, &quot;foo&quot;);\n        FileOutputStream fos = new FileOutputStream(in);\n        fos.write(&quot;*002,foo,bar\\n*006,baz,qux\\n*009,fiz,buz\\n&quot;.getBytes());\n        fos.close();\n        in.renameTo(new File(&quot;tmp/in/&quot;, &quot;foo.txt&quot;));\n\n        File out = new File(&quot;tmp/out/002.txt&quot;);\n        int n = 0;\n        while (n++ &lt; 100 &amp;&amp; (!out.exists() || out.length() &lt; 12)) {\n            Thread.sleep(100);\n        }\n        assertThat(out.exists()).isTrue();\n\n    }\n\n}\n</code></pre>\n<p>Regardless if run via *ApplicationTest.java, or via executing the above *Application.java file in the IDE and dropping the same foo.txt content in the pre-created <code>tmp/in</code> folder, I'm seeing <strong>partially</strong> correct behavior in terms of <code>tmp\\in\\foo.txt</code> being picked up and 3 files being created in the <code>tmp/out</code> accompanied by the following error:</p>\n<pre><code>2023-09-20 11:40:21.384 [scheduling-1] ERROR o.s.i.handler.LoggingHandler - org.springframework.messaging.MessageDeliveryException: Error handling message for file [C:\\code\\STS\\daily-cash-report\\tmp\\out\\002.txt -&gt; 002.txt]; nested exception is org.springframework.messaging.MessagingException: Failed to write to 'foo/002.txt.writing' while uploading the file; nested exception is java.io.IOException: failed to write file, failedMessage=GenericMessage [payload=tmp\\out\\002.txt, headers={file_lineCount=3, file_name=002.txt, file_originalFile=tmp\\in\\foo.txt, id=365e346c-78d4-47ab-d6c0-e4f0f5f72f43, file_marker=END, file_relativePath=foo.txt, timestamp=1695224420443}]\n    at org.springframework.integration.file.remote.RemoteFileTemplate.doSend(RemoteFileTemplate.java:368)\n    at org.springframework.integration.file.remote.RemoteFileTemplate.lambda$send$0(RemoteFileTemplate.java:314)\n    at org.springframework.integration.file.remote.RemoteFileTemplate.execute(RemoteFileTemplate.java:452)\n    at org.springframework.integration.file.remote.RemoteFileTemplate.send(RemoteFileTemplate.java:314)\n    at org.springframework.integration.file.remote.RemoteFileTemplate.send(RemoteFileTemplate.java:302)\n    at org.springframework.integration.file.remote.RemoteFileTemplate.send(RemoteFileTemplate.java:294)\n    at org.springframework.integration.file.remote.handler.FileTransferringMessageHandler.handleMessageInternal(FileTransferringMessageHandler.java:207)\n    at org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:55)\n    at org.springframework.integration.dispatcher.AbstractDispatcher.tryOptimizedDispatch(AbstractDispatcher.java:115)\n    at org.springframework.integration.dispatcher.UnicastingDispatcher.doDispatch(UnicastingDispatcher.java:133)\n    at org.springframework.integration.dispatcher.UnicastingDispatcher.dispatch(UnicastingDispatcher.java:106)\n    at org.springframework.integration.channel.AbstractSubscribableChannel.doSend(AbstractSubscribableChannel.java:72)\n    at org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:317)\n    at org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:272)\n    at org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:187)\n    at org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:166)\n    at org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:47)\n    at org.springframework.messaging.core.AbstractMessageSendingTemplate.send(AbstractMessageSendingTemplate.java:109)\n    at org.springframework.integration.handler.AbstractMessageProducingHandler.sendOutput(AbstractMessageProducingHandler.java:456)\n    at org.springframework.integration.handler.AbstractMessageProducingHandler.doProduceOutput(AbstractMessageProducingHandler.java:324)\n    at org.springframework.integration.handler.AbstractMessageProducingHandler.produceOutput(AbstractMessageProducingHandler.java:267)\n    at org.springframework.integration.handler.AbstractMessageProducingHandler.sendOutputs(AbstractMessageProducingHandler.java:231)\n    at org.springframework.integration.handler.AbstractReplyProducingMessageHandler.handleMessageInternal(AbstractReplyProducingMessageHandler.java:142)\n    at org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:55)\n    at org.springframework.integration.dispatcher.AbstractDispatcher.tryOptimizedDispatch(AbstractDispatcher.java:115)\n    at org.springframework.integration.dispatcher.UnicastingDispatcher.doDispatch(UnicastingDispatcher.java:133)\n    at org.springframework.integration.dispatcher.UnicastingDispatcher.dispatch(UnicastingDispatcher.java:106)\n    at org.springframework.integration.channel.AbstractSubscribableChannel.doSend(AbstractSubscribableChannel.java:72)\n    at org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:317)\n    at org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:272)\n    at org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:187)\n    at org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:166)\n    at org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:47)\n    at org.springframework.messaging.core.AbstractMessageSendingTemplate.send(AbstractMessageSendingTemplate.java:109)\n    at org.springframework.integration.handler.AbstractMessageProducingHandler.sendOutput(AbstractMessageProducingHandler.java:456)\n    at org.springframework.integration.handler.AbstractMessageProducingHandler.doProduceOutput(AbstractMessageProducingHandler.java:324)\n    at org.springframework.integration.handler.AbstractMessageProducingHandler.produceOutput(AbstractMessageProducingHandler.java:267)\n    at org.springframework.integration.handler.AbstractMessageProducingHandler.sendOutputs(AbstractMessageProducingHandler.java:231)\n    at org.springframework.integration.handler.AbstractReplyProducingMessageHandler.handleMessageInternal(AbstractReplyProducingMessageHandler.java:142)\n    at org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:55)\n    at org.springframework.integration.dispatcher.AbstractDispatcher.tryOptimizedDispatch(AbstractDispatcher.java:115)\n    at org.springframework.integration.dispatcher.UnicastingDispatcher.doDispatch(UnicastingDispatcher.java:133)\n    at org.springframework.integration.dispatcher.UnicastingDispatcher.dispatch(UnicastingDispatcher.java:106)\n    at org.springframework.integration.channel.AbstractSubscribableChannel.doSend(AbstractSubscribableChannel.java:72)\n    at org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:317)\n    at org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:272)\n    at org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:187)\n    at org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:166)\n    at org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:47)\n    at org.springframework.messaging.core.AbstractMessageSendingTemplate.send(AbstractMessageSendingTemplate.java:109)\n    at org.springframework.integration.handler.AbstractMessageProducingHandler.sendOutput(AbstractMessageProducingHandler.java:456)\n    at org.springframework.integration.handler.AbstractMessageProducingHandler.doProduceOutput(AbstractMessageProducingHandler.java:324)\n    at org.springframework.integration.handler.AbstractMessageProducingHandler.produceOutput(AbstractMessageProducingHandler.java:267)\n    at org.springframework.integration.handler.AbstractMessageProducingHandler.sendOutputs(AbstractMessageProducingHandler.java:231)\n    at org.springframework.integration.handler.AbstractReplyProducingMessageHandler.handleMessageInternal(AbstractReplyProducingMessageHandler.java:142)\n    at org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:55)\n    at org.springframework.integration.dispatcher.BroadcastingDispatcher.invokeHandler(BroadcastingDispatcher.java:222)\n    at org.springframework.integration.dispatcher.BroadcastingDispatcher.dispatch(BroadcastingDispatcher.java:178)\n    at org.springframework.integration.channel.AbstractSubscribableChannel.doSend(AbstractSubscribableChannel.java:72)\n    at org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:317)\n    at org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:272)\n    at org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:187)\n    at org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:166)\n    at org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:47)\n    at org.springframework.messaging.core.AbstractMessageSendingTemplate.send(AbstractMessageSendingTemplate.java:109)\n    at org.springframework.integration.handler.AbstractMessageProducingHandler.sendOutput(AbstractMessageProducingHandler.java:456)\n    at org.springframework.integration.handler.AbstractMessageProducingHandler.doProduceOutput(AbstractMessageProducingHandler.java:324)\n    at org.springframework.integration.handler.AbstractMessageProducingHandler.produceOutput(AbstractMessageProducingHandler.java:267)\n    at org.springframework.integration.handler.AbstractMessageProducingHandler.sendOutputs(AbstractMessageProducingHandler.java:231)\n    at org.springframework.integration.handler.AbstractReplyProducingMessageHandler.handleMessageInternal(AbstractReplyProducingMessageHandler.java:142)\n    at org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:55)\n    at org.springframework.integration.dispatcher.AbstractDispatcher.tryOptimizedDispatch(AbstractDispatcher.java:115)\n    at org.springframework.integration.dispatcher.UnicastingDispatcher.doDispatch(UnicastingDispatcher.java:133)\n    at org.springframework.integration.dispatcher.UnicastingDispatcher.dispatch(UnicastingDispatcher.java:106)\n    at org.springframework.integration.channel.AbstractSubscribableChannel.doSend(AbstractSubscribableChannel.java:72)\n    at org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:317)\n    at org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:272)\n    at org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:187)\n    at org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:166)\n    at org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:47)\n    at org.springframework.messaging.core.AbstractMessageSendingTemplate.send(AbstractMessageSendingTemplate.java:109)\n    at org.springframework.integration.router.AbstractMessageRouter.doSend(AbstractMessageRouter.java:213)\n    at org.springframework.integration.router.AbstractMessageRouter.handleMessageInternal(AbstractMessageRouter.java:195)\n    at org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:55)\n    at org.springframework.integration.dispatcher.AbstractDispatcher.tryOptimizedDispatch(AbstractDispatcher.java:115)\n    at org.springframework.integration.dispatcher.UnicastingDispatcher.doDispatch(UnicastingDispatcher.java:133)\n    at org.springframework.integration.dispatcher.UnicastingDispatcher.dispatch(UnicastingDispatcher.java:106)\n    at org.springframework.integration.channel.AbstractSubscribableChannel.doSend(AbstractSubscribableChannel.java:72)\n    at org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:317)\n    at org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:272)\n    at org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:187)\n    at org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:166)\n    at org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:47)\n    at org.springframework.messaging.core.AbstractMessageSendingTemplate.send(AbstractMessageSendingTemplate.java:109)\n    at org.springframework.integration.handler.AbstractMessageProducingHandler.sendOutput(AbstractMessageProducingHandler.java:456)\n    at org.springframework.integration.handler.AbstractMessageProducingHandler.doProduceOutput(AbstractMessageProducingHandler.java:324)\n    at org.springframework.integration.handler.AbstractMessageProducingHandler.produceOutput(AbstractMessageProducingHandler.java:267)\n    at org.springframework.integration.splitter.AbstractMessageSplitter.produceOutput(AbstractMessageSplitter.java:317)\n    at org.springframework.integration.handler.AbstractMessageProducingHandler.sendOutputs(AbstractMessageProducingHandler.java:231)\n    at org.springframework.integration.handler.AbstractReplyProducingMessageHandler.handleMessageInternal(AbstractReplyProducingMessageHandler.java:142)\n    at org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:55)\n    at org.springframework.integration.dispatcher.AbstractDispatcher.tryOptimizedDispatch(AbstractDispatcher.java:115)\n    at org.springframework.integration.dispatcher.UnicastingDispatcher.doDispatch(UnicastingDispatcher.java:133)\n    at org.springframework.integration.dispatcher.UnicastingDispatcher.dispatch(UnicastingDispatcher.java:106)\n    at org.springframework.integration.channel.AbstractSubscribableChannel.doSend(AbstractSubscribableChannel.java:72)\n    at org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:317)\n    at org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:272)\n    at org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:187)\n    at org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:166)\n    at org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:47)\n    at org.springframework.messaging.core.AbstractMessageSendingTemplate.send(AbstractMessageSendingTemplate.java:109)\n    at org.springframework.integration.endpoint.SourcePollingChannelAdapter.handleMessage(SourcePollingChannelAdapter.java:196)\n    at org.springframework.integration.endpoint.AbstractPollingEndpoint.messageReceived(AbstractPollingEndpoint.java:474)\n    at org.springframework.integration.endpoint.AbstractPollingEndpoint.doPoll(AbstractPollingEndpoint.java:460)\n    at org.springframework.integration.endpoint.AbstractPollingEndpoint.pollForMessage(AbstractPollingEndpoint.java:412)\n    at org.springframework.integration.endpoint.AbstractPollingEndpoint.lambda$createPoller$4(AbstractPollingEndpoint.java:347)\n    at org.springframework.integration.util.ErrorHandlingTaskExecutor.lambda$execute$0(ErrorHandlingTaskExecutor.java:57)\n    at org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:50)\n    at org.springframework.integration.util.ErrorHandlingTaskExecutor.execute(ErrorHandlingTaskExecutor.java:55)\n    at org.springframework.integration.endpoint.AbstractPollingEndpoint.lambda$createPoller$5(AbstractPollingEndpoint.java:340)\n    at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)\n    at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:95)\n    at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)\n    at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\n    at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\n    at java.base/java.lang.Thread.run(Thread.java:829)\nCaused by: org.springframework.messaging.MessagingException: Failed to write to 'foo/002.txt.writing' while uploading the file; nested exception is java.io.IOException: failed to write file\n    at org.springframework.integration.file.remote.RemoteFileTemplate.sendFileToRemoteDirectory(RemoteFileTemplate.java:573)\n    at org.springframework.integration.file.remote.RemoteFileTemplate.doSend(RemoteFileTemplate.java:353)\n    ... 127 more\nCaused by: java.io.IOException: failed to write file\n    at org.springframework.integration.sftp.session.SftpSession.write(SftpSession.java:175)\n    at org.springframework.integration.file.remote.session.CachingSessionFactory$CachedSession.write(CachingSessionFactory.java:237)\n    at org.springframework.integration.file.remote.RemoteFileTemplate.doSend(RemoteFileTemplate.java:582)\n    at org.springframework.integration.file.remote.RemoteFileTemplate.sendFileToRemoteDirectory(RemoteFileTemplate.java:570)\n    ... 128 more\nCaused by: 2: No such file\n    at com.jcraft.jsch.ChannelSftp.throwStatusError(ChannelSftp.java:2873)\n    at com.jcraft.jsch.ChannelSftp._put(ChannelSftp.java:594)\n    at com.jcraft.jsch.ChannelSftp.put(ChannelSftp.java:540)\n    at com.jcraft.jsch.ChannelSftp.put(ChannelSftp.java:492)\n    at org.springframework.integration.sftp.session.SftpSession.write(SftpSession.java:172)\n    ... 131 more\n</code></pre>\n<p>The gist seems to be: <code>Failed to write to 'foo/002.txt.writing' while uploading the file; nested exception is java.io.IOException: failed to write file, failedMessage=GenericMessage [payload=tmp\\out\\002.txt, headers={file_lineCount=3, file_name=002.txt, file_originalFile=tmp\\in\\foo.txt, id=365e346c-78d4-47ab-d6c0-e4f0f5f72f43, file_marker=END, file_relativePath=foo.txt, timestamp=1695224420443}]</code></p>\n<p>It is thrown on a brand-new file being dropped in the <code>tmp\\in</code> folder and then repeatedly on every  poller execution while the split into the 3 resulting files: <code>002.txt</code>, <code>006.txt</code> and <code>009.txt</code> happens correctly, as mentioned above.</p>\n<p>I'm aware of the <code>.writing</code> extension (as per <a href=\"https://docs.spring.io/spring-integration/docs/current/reference/html/file.html#file-incomplete\" rel=\"nofollow noreferrer\">docs</a>), however this doesn't seem like an expected behavior.  While playing with that SI sample, I'd like to get to the bottom of why this error is happening so I can eliminate it migrating the app from this experimental environment into the real ones.</p>\n"},{"tags":["java","dictionary","hashmap"],"comments":[{"owner":{"account_id":33849,"reputation":3935,"user_id":95103,"accept_rate":50,"display_name":"Soundlink"},"score":2,"creation_date":1283094297,"post_id":3527216,"comment_id":3773456,"body_markdown":"Can you explain, why you want to do this? Maybe using a HashMap is not the best solution to your problem.","body":"Can you explain, why you want to do this? Maybe using a HashMap is not the best solution to your problem."},{"owner":{"account_id":15387,"reputation":63718,"user_id":32453,"accept_rate":92,"display_name":"rogerdpack"},"score":0,"creation_date":1449679784,"post_id":3527216,"comment_id":56115027,"body_markdown":"See also http://stackoverflow.com/questions/1936462/java-linkedhashmap-get-first-or-last-entry","body":"See also <a href=\"http://stackoverflow.com/questions/1936462/java-linkedhashmap-get-first-or-last-entry\" title=\"java linkedhashmap get first or last entry\">stackoverflow.com/questions/1936462/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":15387,"reputation":63718,"user_id":32453,"accept_rate":92,"display_name":"rogerdpack"},"score":1,"creation_date":1449645816,"post_id":3538092,"comment_id":56092666,"body_markdown":"see also http://stackoverflow.com/questions/1936462/java-linkedhashmap-get-first-or-last-entry","body":"see also <a href=\"http://stackoverflow.com/questions/1936462/java-linkedhashmap-get-first-or-last-entry\" title=\"java linkedhashmap get first or last entry\">stackoverflow.com/questions/1936462/&hellip;</a>"}],"tags":[],"owner":{"account_id":109733,"reputation":31428,"user_id":290629,"accept_rate":88,"display_name":"卢声远 Shengyuan Lu"},"comment_count":1,"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1472623854,"creation_date":1282405785,"answer_id":3538092,"question_id":3527216,"body_markdown":"HashMap doesn&#39;t have *&quot;the last position&quot;*, as it is not sorted.\r\n\r\nYou may use other `Map` which implements `java.util.SortedMap`, most popular one is `TreeMap`.\r\n","title":"How can I move a particular HashMap entry to the end of the map?","body":"<p>HashMap doesn't have <em>\"the last position\"</em>, as it is not sorted.</p>\n\n<p>You may use other <code>Map</code> which implements <code>java.util.SortedMap</code>, most popular one is <code>TreeMap</code>.</p>\n"},{"comments":[{"owner":{"account_id":2617541,"reputation":688,"user_id":2266298,"accept_rate":100,"display_name":"nckbrz"},"score":0,"creation_date":1400083437,"post_id":3549555,"comment_id":36341345,"body_markdown":"Why would implementing the comparable interface and then using a TreeMap not be your first choice? You seem to know more about Maps than I do, so just wondering","body":"Why would implementing the comparable interface and then using a TreeMap not be your first choice? You seem to know more about Maps than I do, so just wondering"},{"owner":{"account_id":138128,"reputation":294236,"user_id":342852,"accept_rate":97,"display_name":"Sean Patrick Floyd"},"score":0,"creation_date":1400136947,"post_id":3549555,"comment_id":36363695,"body_markdown":"@nixxbb it *is* my first choice, that&#39;s why it appears directly after the literal answer","body":"@nixxbb it <i>is</i> my first choice, that&#39;s why it appears directly after the literal answer"},{"owner":{"account_id":138128,"reputation":294236,"user_id":342852,"accept_rate":97,"display_name":"Sean Patrick Floyd"},"score":0,"creation_date":1400137083,"post_id":3549555,"comment_id":36363765,"body_markdown":"oh, I see, you are talking about Comparable vs Comparator. In the OP&#39;s case, the keys are Strings, but he requires a custom order. That&#39;s why. Otherwise I&#39;d agree with you","body":"oh, I see, you are talking about Comparable vs Comparator. In the OP&#39;s case, the keys are Strings, but he requires a custom order. That&#39;s why. Otherwise I&#39;d agree with you"},{"owner":{"account_id":2617541,"reputation":688,"user_id":2266298,"accept_rate":100,"display_name":"nckbrz"},"score":0,"creation_date":1400329145,"post_id":3549555,"comment_id":36439477,"body_markdown":"Oh, I see. Very nicely done. Thank you for the reply, I learned a lot just from your answer...","body":"Oh, I see. Very nicely done. Thank you for the reply, I learned a lot just from your answer..."}],"tags":[],"owner":{"account_id":138128,"reputation":294236,"user_id":342852,"accept_rate":97,"display_name":"Sean Patrick Floyd"},"comment_count":4,"down_vote_count":0,"up_vote_count":168,"is_accepted":true,"score":168,"last_activity_date":1287875706,"creation_date":1282580654,"answer_id":3549555,"question_id":3527216,"body_markdown":"To answer your question in one sentence:\r\n\r\n**Per default, Maps don&#39;t have a last entry, it&#39;s not part of their contract.**\r\n\r\n----------\r\n\r\nAnd a side note: it&#39;s good practice to code against interfaces, not the implementation classes (see [Effective Java by Joshua Bloch][1], Chapter 8, Item 52: **Refer to objects by their interfaces**).\r\n\r\nSo your declaration should read:\r\n\r\n    Map&lt;String,Integer&gt; map = new HashMap&lt;String,Integer&gt;();\r\n\r\n(All maps share a common contract, so the client need not know what kind of map it is, unless he specifies a sub interface with an extended contract).\r\n\r\n----------\r\n\r\n##Possible Solutions##\r\n\r\n###Sorted Maps:###\r\nThere is a sub interface [SortedMap][2] that extends the map interface with order-based lookup methods and it has a sub interface [NavigableMap][3] that extends it even further. The standard implementation of this interface, [TreeMap][4], allows you to sort entries either by natural ordering (if they implement the [Comparable][5] interface) or by a supplied [Comparator][6].\r\n\r\nYou can access the last entry through the [lastEntry][7] method:\r\n\r\n    NavigableMap&lt;String,Integer&gt; map = new TreeMap&lt;String, Integer&gt;();\r\n    // add some entries\r\n    Entry&lt;String, Integer&gt; lastEntry = map.lastEntry();\r\n\r\n###Linked maps:###\r\nThere is also the special case of [LinkedHashMap][8], a HashMap implementation that stores the order in which keys are inserted. There is however no interface to back up this functionality, nor is there a  direct way to access the last key. You can only do it through tricks such as using a List in between:\r\n\r\n    Map&lt;String,String&gt; map = new LinkedHashMap&lt;String, Integer&gt;();\r\n    // add some entries\r\n    List&lt;Entry&lt;String,Integer&gt;&gt; entryList =\r\n        new ArrayList&lt;Map.Entry&lt;String, Integer&gt;&gt;(map.entrySet());\r\n    Entry&lt;String, Integer&gt; lastEntry =\r\n        entryList.get(entryList.size()-1);\r\n\r\n###Proper Solution:###\r\nSince you don&#39;t control the insertion order, you should go with the NavigableMap interface, i.e. you would write a comparator that positions the `Not-Specified` entry last.\r\n\r\nHere is an example:\r\n\r\n\tfinal NavigableMap&lt;String,Integer&gt; map = \r\n            new TreeMap&lt;String, Integer&gt;(new Comparator&lt;String&gt;() {\r\n\t\tpublic int compare(final String o1, final String o2) {\r\n\t\t\tint result;\r\n\t\t\tif(&quot;Not-Specified&quot;.equals(o1)) {\r\n\t\t\t\tresult=1;\r\n\t\t\t} else if(&quot;Not-Specified&quot;.equals(o2)) {\r\n\t\t\t\tresult=-1;\r\n\t\t\t} else {\r\n\t\t\t\tresult =o1.compareTo(o2);\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t}\r\n\r\n\t});\r\n\tmap.put(&quot;test&quot;, Integer.valueOf(2));\r\n\tmap.put(&quot;Not-Specified&quot;, Integer.valueOf(1));\r\n\tmap.put(&quot;testtest&quot;, Integer.valueOf(3));\r\n\tfinal Entry&lt;String, Integer&gt; lastEntry = map.lastEntry();\r\n\tSystem.out.println(&quot;Last key: &quot;+lastEntry.getKey()\r\n             + &quot;, last value: &quot;+lastEntry.getValue());\r\n\r\nOutput:\r\n\r\n&gt; Last key: Not-Specified, last value: 1\r\n\r\n###Solution using HashMap:###\r\n\r\nIf you must rely on HashMaps, there is still a solution, using a) a modified version of the above comparator, b) a [List][9] initialized with the Map&#39;s [entrySet][10] and c) the [Collections.sort()][11] helper method:\r\n\r\n        final Map&lt;String, Integer&gt; map = new HashMap&lt;String, Integer&gt;();\r\n        map.put(&quot;test&quot;, Integer.valueOf(2));\r\n        map.put(&quot;Not-Specified&quot;, Integer.valueOf(1));\r\n        map.put(&quot;testtest&quot;, Integer.valueOf(3));\r\n\r\n        final List&lt;Entry&lt;String, Integer&gt;&gt; entries =\r\n            new ArrayList&lt;Entry&lt;String, Integer&gt;&gt;(map.entrySet());\r\n        Collections.sort(entries, new Comparator&lt;Entry&lt;String, Integer&gt;&gt;(){\r\n\r\n            public int compareKeys(final String o1, final String o2){\r\n                int result;\r\n                if(&quot;Not-Specified&quot;.equals(o1)){\r\n                    result = 1;\r\n                } else if(&quot;Not-Specified&quot;.equals(o2)){\r\n                    result = -1;\r\n                } else{\r\n                    result = o1.compareTo(o2);\r\n                }\r\n                return result;\r\n            }\r\n\r\n            @Override\r\n            public int compare(final Entry&lt;String, Integer&gt; o1,\r\n                final Entry&lt;String, Integer&gt; o2){\r\n                return this.compareKeys(o1.getKey(), o2.getKey());\r\n            }\r\n\r\n        });\r\n\r\n        final Entry&lt;String, Integer&gt; lastEntry =\r\n            entries.get(entries.size() - 1);\r\n        System.out.println(&quot;Last key: &quot; + lastEntry.getKey() + &quot;, last value: &quot;\r\n            + lastEntry.getValue());\r\n\r\n    }\r\n\r\nOutput:\r\n\r\n&gt; Last key: Not-Specified, last value: 1\r\n\r\n\r\n  [1]: http://java.sun.com/docs/books/effective/\r\n  [2]: http://download.oracle.com/javase/6/docs/api/java/util/SortedMap.html\r\n  [3]: http://download.oracle.com/javase/6/docs/api/java/util/NavigableMap.html\r\n  [4]: http://download.oracle.com/javase/6/docs/api/java/util/TreeMap.html\r\n  [5]: http://download.oracle.com/javase/6/docs/api/java/util/Comparator.html\r\n  [6]: http://download.oracle.com/javase/6/docs/api/java/util/Comparator.html\r\n  [7]: http://download.oracle.com/javase/6/docs/api/java/util/TreeMap.html#lastEntry()\r\n  [8]: http://download.oracle.com/javase/6/docs/api/java/util/LinkedHashMap.html\r\n  [9]: http://download.oracle.com/javase/6/docs/api/java/util/List.html\r\n  [10]: http://download.oracle.com/javase/6/docs/api/java/util/Map.html#entrySet()\r\n  [11]: http://download.oracle.com/javase/6/docs/api/java/util/Collections.html#sort%28java.util.List,%20java.util.Comparator%29","title":"How can I move a particular HashMap entry to the end of the map?","body":"<p>To answer your question in one sentence:</p>\n\n<p><strong>Per default, Maps don't have a last entry, it's not part of their contract.</strong></p>\n\n<hr>\n\n<p>And a side note: it's good practice to code against interfaces, not the implementation classes (see <a href=\"http://java.sun.com/docs/books/effective/\" rel=\"noreferrer\">Effective Java by Joshua Bloch</a>, Chapter 8, Item 52: <strong>Refer to objects by their interfaces</strong>).</p>\n\n<p>So your declaration should read:</p>\n\n<pre><code>Map&lt;String,Integer&gt; map = new HashMap&lt;String,Integer&gt;();\n</code></pre>\n\n<p>(All maps share a common contract, so the client need not know what kind of map it is, unless he specifies a sub interface with an extended contract).</p>\n\n<hr>\n\n<h2>Possible Solutions</h2>\n\n<h3>Sorted Maps:</h3>\n\n<p>There is a sub interface <a href=\"http://download.oracle.com/javase/6/docs/api/java/util/SortedMap.html\" rel=\"noreferrer\">SortedMap</a> that extends the map interface with order-based lookup methods and it has a sub interface <a href=\"http://download.oracle.com/javase/6/docs/api/java/util/NavigableMap.html\" rel=\"noreferrer\">NavigableMap</a> that extends it even further. The standard implementation of this interface, <a href=\"http://download.oracle.com/javase/6/docs/api/java/util/TreeMap.html\" rel=\"noreferrer\">TreeMap</a>, allows you to sort entries either by natural ordering (if they implement the <a href=\"http://download.oracle.com/javase/6/docs/api/java/util/Comparator.html\" rel=\"noreferrer\">Comparable</a> interface) or by a supplied <a href=\"http://download.oracle.com/javase/6/docs/api/java/util/Comparator.html\" rel=\"noreferrer\">Comparator</a>.</p>\n\n<p>You can access the last entry through the <a href=\"http://download.oracle.com/javase/6/docs/api/java/util/TreeMap.html#lastEntry()\" rel=\"noreferrer\">lastEntry</a> method:</p>\n\n<pre><code>NavigableMap&lt;String,Integer&gt; map = new TreeMap&lt;String, Integer&gt;();\n// add some entries\nEntry&lt;String, Integer&gt; lastEntry = map.lastEntry();\n</code></pre>\n\n<h3>Linked maps:</h3>\n\n<p>There is also the special case of <a href=\"http://download.oracle.com/javase/6/docs/api/java/util/LinkedHashMap.html\" rel=\"noreferrer\">LinkedHashMap</a>, a HashMap implementation that stores the order in which keys are inserted. There is however no interface to back up this functionality, nor is there a  direct way to access the last key. You can only do it through tricks such as using a List in between:</p>\n\n<pre><code>Map&lt;String,String&gt; map = new LinkedHashMap&lt;String, Integer&gt;();\n// add some entries\nList&lt;Entry&lt;String,Integer&gt;&gt; entryList =\n    new ArrayList&lt;Map.Entry&lt;String, Integer&gt;&gt;(map.entrySet());\nEntry&lt;String, Integer&gt; lastEntry =\n    entryList.get(entryList.size()-1);\n</code></pre>\n\n<h3>Proper Solution:</h3>\n\n<p>Since you don't control the insertion order, you should go with the NavigableMap interface, i.e. you would write a comparator that positions the <code>Not-Specified</code> entry last.</p>\n\n<p>Here is an example:</p>\n\n<pre><code>final NavigableMap&lt;String,Integer&gt; map = \n        new TreeMap&lt;String, Integer&gt;(new Comparator&lt;String&gt;() {\n    public int compare(final String o1, final String o2) {\n        int result;\n        if(\"Not-Specified\".equals(o1)) {\n            result=1;\n        } else if(\"Not-Specified\".equals(o2)) {\n            result=-1;\n        } else {\n            result =o1.compareTo(o2);\n        }\n        return result;\n    }\n\n});\nmap.put(\"test\", Integer.valueOf(2));\nmap.put(\"Not-Specified\", Integer.valueOf(1));\nmap.put(\"testtest\", Integer.valueOf(3));\nfinal Entry&lt;String, Integer&gt; lastEntry = map.lastEntry();\nSystem.out.println(\"Last key: \"+lastEntry.getKey()\n         + \", last value: \"+lastEntry.getValue());\n</code></pre>\n\n<p>Output:</p>\n\n<blockquote>\n  <p>Last key: Not-Specified, last value: 1</p>\n</blockquote>\n\n<h3>Solution using HashMap:</h3>\n\n<p>If you must rely on HashMaps, there is still a solution, using a) a modified version of the above comparator, b) a <a href=\"http://download.oracle.com/javase/6/docs/api/java/util/List.html\" rel=\"noreferrer\">List</a> initialized with the Map's <a href=\"http://download.oracle.com/javase/6/docs/api/java/util/Map.html#entrySet()\" rel=\"noreferrer\">entrySet</a> and c) the <a href=\"http://download.oracle.com/javase/6/docs/api/java/util/Collections.html#sort%28java.util.List,%20java.util.Comparator%29\" rel=\"noreferrer\">Collections.sort()</a> helper method:</p>\n\n<pre><code>    final Map&lt;String, Integer&gt; map = new HashMap&lt;String, Integer&gt;();\n    map.put(\"test\", Integer.valueOf(2));\n    map.put(\"Not-Specified\", Integer.valueOf(1));\n    map.put(\"testtest\", Integer.valueOf(3));\n\n    final List&lt;Entry&lt;String, Integer&gt;&gt; entries =\n        new ArrayList&lt;Entry&lt;String, Integer&gt;&gt;(map.entrySet());\n    Collections.sort(entries, new Comparator&lt;Entry&lt;String, Integer&gt;&gt;(){\n\n        public int compareKeys(final String o1, final String o2){\n            int result;\n            if(\"Not-Specified\".equals(o1)){\n                result = 1;\n            } else if(\"Not-Specified\".equals(o2)){\n                result = -1;\n            } else{\n                result = o1.compareTo(o2);\n            }\n            return result;\n        }\n\n        @Override\n        public int compare(final Entry&lt;String, Integer&gt; o1,\n            final Entry&lt;String, Integer&gt; o2){\n            return this.compareKeys(o1.getKey(), o2.getKey());\n        }\n\n    });\n\n    final Entry&lt;String, Integer&gt; lastEntry =\n        entries.get(entries.size() - 1);\n    System.out.println(\"Last key: \" + lastEntry.getKey() + \", last value: \"\n        + lastEntry.getValue());\n\n}\n</code></pre>\n\n<p>Output:</p>\n\n<blockquote>\n  <p>Last key: Not-Specified, last value: 1</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1472623875,"creation_date":1282946123,"answer_id":3588391,"question_id":3527216,"body_markdown":"A `SortedMap` is the logical/best choice, however another option is to use a `LinkedHashMap` which maintains two order modes, most-recently-added goes last, and most-recently-accessed goes last. See the Javadocs for more details.","title":"How can I move a particular HashMap entry to the end of the map?","body":"<p>A <code>SortedMap</code> is the logical/best choice, however another option is to use a <code>LinkedHashMap</code> which maintains two order modes, most-recently-added goes last, and most-recently-accessed goes last. See the Javadocs for more details.</p>\n"},{"comments":[{"owner":{"account_id":138128,"reputation":294236,"user_id":342852,"accept_rate":97,"display_name":"Sean Patrick Floyd"},"score":0,"creation_date":1284698107,"post_id":3594667,"comment_id":3942543,"body_markdown":"you can&#39;t &quot;pass in a custom comparator&quot; with a TreeMap after creation. You can only use it as a constructor parameter.","body":"you can&#39;t &quot;pass in a custom comparator&quot; with a TreeMap after creation. You can only use it as a constructor parameter."}],"tags":[],"owner":{"account_id":192835,"reputation":26,"user_id":434202,"display_name":"anand"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1283084052,"creation_date":1283084052,"answer_id":3594667,"question_id":3527216,"body_markdown":"move does not make sense for a hashmap since its a dictionary with a hashcode for bucketing based on key and then a linked list for colliding hashcodes resolved via equals.\r\nUse a TreeMap for sorted maps and then pass in a custom comparator.  ","title":"How can I move a particular HashMap entry to the end of the map?","body":"<p>move does not make sense for a hashmap since its a dictionary with a hashcode for bucketing based on key and then a linked list for colliding hashcodes resolved via equals.\nUse a TreeMap for sorted maps and then pass in a custom comparator.  </p>\n"},{"tags":[],"owner":{"account_id":7102719,"reputation":1304,"user_id":5473627,"accept_rate":91,"display_name":"Yoshua Nahar"},"comment_count":0,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1504761925,"creation_date":1486223100,"answer_id":42042255,"question_id":3527216,"body_markdown":"When using numbers as the key, I suppose you could also try this:\r\n    \r\n    \t\tMap&lt;Long, String&gt; map = new HashMap&lt;&gt;();\r\n    \t\tmap.put(4L, &quot;The First&quot;);\r\n    \t\tmap.put(6L, &quot;The Second&quot;);\r\n    \t\tmap.put(11L, &quot;The Last&quot;);\r\n    \r\n    \t\tlong lastKey = 0;\r\n            //you entered Map&lt;Long, String&gt; entry\r\n    \t\tfor (Map.Entry&lt;Long, String&gt; entry : map.entrySet()) {\r\n    \t\t\tlastKey = entry.getKey();\r\n    \t\t}\r\n    \t\tSystem.out.println(lastKey); // 11","title":"How can I move a particular HashMap entry to the end of the map?","body":"<p>When using numbers as the key, I suppose you could also try this:</p>\n\n<pre><code>        Map&lt;Long, String&gt; map = new HashMap&lt;&gt;();\n        map.put(4L, \"The First\");\n        map.put(6L, \"The Second\");\n        map.put(11L, \"The Last\");\n\n        long lastKey = 0;\n        //you entered Map&lt;Long, String&gt; entry\n        for (Map.Entry&lt;Long, String&gt; entry : map.entrySet()) {\n            lastKey = entry.getKey();\n        }\n        System.out.println(lastKey); // 11\n</code></pre>\n"},{"comments":[{"owner":{"account_id":331432,"reputation":3297,"user_id":656094,"accept_rate":40,"display_name":"Panthro"},"score":0,"creation_date":1551363684,"post_id":54927624,"comment_id":96620128,"body_markdown":"Hi Mad Calm, remember to try to keep your examples concise and simple so anyone reading the question/answer can easily understand. Pasting code without much explanation usually is not a good idea :-) \nThank you for your contribution.","body":"Hi Mad Calm, remember to try to keep your examples concise and simple so anyone reading the question/answer can easily understand. Pasting code without much explanation usually is not a good idea :-)  Thank you for your contribution."}],"tags":[],"owner":{"account_id":15429207,"reputation":52,"user_id":11131109,"display_name":"Mad Calm"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1551363063,"creation_date":1551363063,"answer_id":54927624,"question_id":3527216,"body_markdown":"In such scenario last used key is usually known so it can be used for accessing last value (inserted with the one):\r\n\r\n    class PostIndexData {\r\n        String _office_name;\r\n        Boolean _isGov;\r\n        public PostIndexData(String name, Boolean gov) {\r\n            _office_name = name;\r\n            _isGov = gov;\r\n        }\r\n    }\r\n    //-----------------------\r\n    class KgpData {\r\n        String _postIndex;\r\n        PostIndexData _postIndexData;\r\n        public KgpData(String postIndex, PostIndexData postIndexData) {\r\n            _postIndex = postIndex;\r\n            _postIndexData = postIndexData;;\r\n        }\r\n    }\r\n    \r\n    public class Office2ASMPro {\r\n        private HashMap&lt;String,PostIndexData&gt; _postIndexMap = new HashMap&lt;&gt;();\r\n        private HashMap&lt;String,KgpData&gt; _kgpMap = new HashMap&lt;&gt;();\r\n    ...\r\n    private void addOffice(String kgp, String postIndex, String officeName, Boolean gov) {\r\n                if (_postIndexMap.get(postIndex) == null) {\r\n                    _postIndexMap.put(postIndex, new PostIndexData(officeName, gov));\r\n                }\r\n                _kgpMap.put( kgp, new KgpData(postIndex, _postIndexMap.get(postIndex)) );\r\n            }","title":"How can I move a particular HashMap entry to the end of the map?","body":"<p>In such scenario last used key is usually known so it can be used for accessing last value (inserted with the one):</p>\n\n<pre><code>class PostIndexData {\n    String _office_name;\n    Boolean _isGov;\n    public PostIndexData(String name, Boolean gov) {\n        _office_name = name;\n        _isGov = gov;\n    }\n}\n//-----------------------\nclass KgpData {\n    String _postIndex;\n    PostIndexData _postIndexData;\n    public KgpData(String postIndex, PostIndexData postIndexData) {\n        _postIndex = postIndex;\n        _postIndexData = postIndexData;;\n    }\n}\n\npublic class Office2ASMPro {\n    private HashMap&lt;String,PostIndexData&gt; _postIndexMap = new HashMap&lt;&gt;();\n    private HashMap&lt;String,KgpData&gt; _kgpMap = new HashMap&lt;&gt;();\n...\nprivate void addOffice(String kgp, String postIndex, String officeName, Boolean gov) {\n            if (_postIndexMap.get(postIndex) == null) {\n                _postIndexMap.put(postIndex, new PostIndexData(officeName, gov));\n            }\n            _kgpMap.put( kgp, new KgpData(postIndex, _postIndexMap.get(postIndex)) );\n        }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":12654863,"reputation":97,"user_id":9197698,"display_name":"Muruganandam C"},"score":0,"creation_date":1556689838,"post_id":55932145,"comment_id":98517231,"body_markdown":"Find missing all the elements from the array","body":"Find missing all the elements from the array"},{"owner":{"account_id":5919781,"reputation":29352,"user_id":4657412,"display_name":"DavidW"},"score":0,"creation_date":1570695116,"post_id":55932145,"comment_id":102996209,"body_markdown":"This doesn&#39;t look to have much to do with the question that was asked.","body":"This doesn&#39;t look to have much to do with the question that was asked."}],"tags":[],"owner":{"account_id":12654863,"reputation":97,"user_id":9197698,"display_name":"Muruganandam C"},"comment_count":2,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1556689776,"creation_date":1556689776,"answer_id":55932145,"question_id":3527216,"body_markdown":"    Find missing all elements from array\r\n            int[] array = {3,5,7,8,2,1,32,5,7,9,30,5};\r\n    \t\tTreeMap&lt;Integer, Integer&gt; map = new TreeMap&lt;&gt;();\r\n    \t\tfor(int i=0;i&lt;array.length;i++) {\r\n    \t\t\tmap.put(array[i], 1);\r\n    \t\t}\r\n    \t\tint maxSize = map.lastKey();\r\n    \t\tfor(int j=0;j&lt;maxSize;j++) {\r\n    \t\t\tif(null == map.get(j))\r\n    \t\t\t\tSystem.out.println(&quot;Missing `enter code here`No:&quot;+j);\r\n    \t\t}","title":"How can I move a particular HashMap entry to the end of the map?","body":"<pre><code>Find missing all elements from array\n        int[] array = {3,5,7,8,2,1,32,5,7,9,30,5};\n        TreeMap&lt;Integer, Integer&gt; map = new TreeMap&lt;&gt;();\n        for(int i=0;i&lt;array.length;i++) {\n            map.put(array[i], 1);\n        }\n        int maxSize = map.lastKey();\n        for(int j=0;j&lt;maxSize;j++) {\n            if(null == map.get(j))\n                System.out.println(\"Missing `enter code here`No:\"+j);\n        }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695230131,"creation_date":1689743766,"answer_id":76718169,"question_id":3527216,"body_markdown":"`HashMap` explicitly does not define a key order.  Per the class [Javadocs](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/HashMap.html):\r\n\r\n&gt; This class makes no guarantees as to the order of the map; in particular, it does not guarantee that the order will remain constant over time.\r\n\r\nA number other map types do define a key order, including [`LinkedHashMap`](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/LinkedHashMap.html) and maps which implement the [`SortedMap`](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/SortedMap.html) interface.  Java 21 introduced the [`SequencedMap`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedMap.html) interface for maps such as these which have a a well-defined encounter order.\r\n\r\nPer [its Javadocs](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedMap.html), a `SequencedMap` is:\r\n\r\n&gt; A `Map` that has a well-defined encounter order, that supports operations at both ends, and that is reversible.\r\n\r\nOne of the operations on `SequencedMap` is [`putLast`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedMap.html#putLast(K,V)).  This optional operation, for `SequencedMap` types that support it, inserts an entry at the end of the map, or moves it to the end if the key is already present.  `LinkedHashMap` supports this method, but `SortedMap` does not.  Per [the method Javadocs](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedMap.html#putLast(K,V)):\r\n\r\n&gt; Inserts the given mapping into the map if it is not already present, or replaces the value of a mapping if it is already present (optional operation). After this operation completes normally, the given mapping will be present in this map, and it will be the last mapping in this map&#39;s encounter order.\r\n\r\n# Scenario in question\r\n\r\nApplying the above to your scenario in question, we get:\r\n\r\n```lang-java\r\nLinkedHashMap&lt;String,Integer&gt; map = new LinkedHashMap&lt;String,Integer&gt;();\r\n\r\npopulateMap(map); // Populate the map as: {Not-Specified 1, test 2, testtest 3};\r\n\r\nmap.putLast(&quot;Not-Specified&quot;, map.get(&quot;Not-Specified&quot;));\r\n```","title":"How can I move a particular HashMap entry to the end of the map?","body":"<p><code>HashMap</code> explicitly does not define a key order.  Per the class <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/HashMap.html\" rel=\"nofollow noreferrer\">Javadocs</a>:</p>\n<blockquote>\n<p>This class makes no guarantees as to the order of the map; in particular, it does not guarantee that the order will remain constant over time.</p>\n</blockquote>\n<p>A number other map types do define a key order, including <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/LinkedHashMap.html\" rel=\"nofollow noreferrer\"><code>LinkedHashMap</code></a> and maps which implement the <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/SortedMap.html\" rel=\"nofollow noreferrer\"><code>SortedMap</code></a> interface.  Java 21 introduced the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedMap.html\" rel=\"nofollow noreferrer\"><code>SequencedMap</code></a> interface for maps such as these which have a a well-defined encounter order.</p>\n<p>Per <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedMap.html\" rel=\"nofollow noreferrer\">its Javadocs</a>, a <code>SequencedMap</code> is:</p>\n<blockquote>\n<p>A <code>Map</code> that has a well-defined encounter order, that supports operations at both ends, and that is reversible.</p>\n</blockquote>\n<p>One of the operations on <code>SequencedMap</code> is <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedMap.html#putLast(K,V)\" rel=\"nofollow noreferrer\"><code>putLast</code></a>.  This optional operation, for <code>SequencedMap</code> types that support it, inserts an entry at the end of the map, or moves it to the end if the key is already present.  <code>LinkedHashMap</code> supports this method, but <code>SortedMap</code> does not.  Per <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedMap.html#putLast(K,V)\" rel=\"nofollow noreferrer\">the method Javadocs</a>:</p>\n<blockquote>\n<p>Inserts the given mapping into the map if it is not already present, or replaces the value of a mapping if it is already present (optional operation). After this operation completes normally, the given mapping will be present in this map, and it will be the last mapping in this map's encounter order.</p>\n</blockquote>\n<h1>Scenario in question</h1>\n<p>Applying the above to your scenario in question, we get:</p>\n<pre class=\"lang-java prettyprint-override\"><code>LinkedHashMap&lt;String,Integer&gt; map = new LinkedHashMap&lt;String,Integer&gt;();\n\npopulateMap(map); // Populate the map as: {Not-Specified 1, test 2, testtest 3};\n\nmap.putLast(&quot;Not-Specified&quot;, map.get(&quot;Not-Specified&quot;));\n</code></pre>\n"}],"owner":{"account_id":30976,"reputation":8154,"user_id":84761,"accept_rate":80,"display_name":"Gnaniyar Zubair"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":147639,"favorite_count":0,"down_vote_count":2,"up_vote_count":70,"accepted_answer_id":3549555,"answer_count":8,"score":68,"last_activity_date":1695230131,"creation_date":1282262241,"question_id":3527216,"body_markdown":"How to move a particular `HashMap` entry to the last position?\r\n\r\nFor example, I have `HashMap` values like this:\r\n\r\n```lang-java\r\nHashMap&lt;String,Integer&gt; map = new HashMap&lt;String,Integer&gt;();\r\n\r\n// map = {Not-Specified 1, test 2, testtest 3};\r\n```\r\n\r\n&quot;Not-Specified&quot; may come in any position. it may come first or in the middle of the map. But I want to move the &quot;Not-Specified&quot; to the last position.\r\n\r\nHow can I do that?","title":"How can I move a particular HashMap entry to the end of the map?","body":"<p>How to move a particular <code>HashMap</code> entry to the last position?</p>\n<p>For example, I have <code>HashMap</code> values like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>HashMap&lt;String,Integer&gt; map = new HashMap&lt;String,Integer&gt;();\n\n// map = {Not-Specified 1, test 2, testtest 3};\n</code></pre>\n<p>&quot;Not-Specified&quot; may come in any position. it may come first or in the middle of the map. But I want to move the &quot;Not-Specified&quot; to the last position.</p>\n<p>How can I do that?</p>\n"},{"tags":["java","reverse","foreach"],"comments":[{"owner":{"account_id":35463,"reputation":654,"user_id":100443,"accept_rate":100,"display_name":"muusbolla"},"score":8,"creation_date":1247060779,"post_id":1098117,"comment_id":912664,"body_markdown":"The point of the &quot;for-each&quot; loop is that you just need to perform an operation on each element, and order is not important. For-each could process the elements in completely random order, and it would still be doing what it was designed for. If you need to process the elements in a particular way, I would suggest doing it manually.","body":"The point of the &quot;for-each&quot; loop is that you just need to perform an operation on each element, and order is not important. For-each could process the elements in completely random order, and it would still be doing what it was designed for. If you need to process the elements in a particular way, I would suggest doing it manually."},{"owner":{"account_id":3282,"reputation":146296,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"score":1,"creation_date":1247061059,"post_id":1098117,"comment_id":912694,"body_markdown":"Java collections library. Not really anything to do with the language. Blame Josh Bloch.","body":"Java collections library. Not really anything to do with the language. Blame Josh Bloch."},{"owner":{"account_id":14881,"reputation":11621,"user_id":30945,"display_name":"Lee Kowalkowski"},"score":9,"creation_date":1300805777,"post_id":1098117,"comment_id":6098710,"body_markdown":"@muusbolla: But as a List is an _ordered_ collection, surely its order will be honoured, regardless?  Therefore for-each will not process the elements of a List in a random order.","body":"@muusbolla: But as a List is an <i>ordered</i> collection, surely its order will be honoured, regardless?  Therefore for-each will not process the elements of a List in a random order."},{"owner":{"account_id":177955,"reputation":4667,"user_id":409638,"accept_rate":78,"display_name":"robert"},"score":8,"creation_date":1407920285,"post_id":1098117,"comment_id":39397691,"body_markdown":"@muusbolla that is not true. Maybe in the case of `Set` derived collections. `foreach` guarantees iteration in the order of the iterator returned from the `iterator()` method of the collection. http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html","body":"@muusbolla that is not true. Maybe in the case of <code>Set</code> derived collections. <code>foreach</code> guarantees iteration in the order of the iterator returned from the <code>iterator()</code> method of the collection. <a href=\"http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.htm&zwnj;&#8203;l</a>"},{"owner":{"account_id":14062814,"reputation":1724,"user_id":10158398,"display_name":"Zhou Haibo"},"score":0,"creation_date":1616416187,"post_id":1098117,"comment_id":117986684,"body_markdown":"I want this build-in too, in Python we could write this `for row in rows[::-1]` to do reversing iteration. Why not in Java?","body":"I want this build-in too, in Python we could write this <code>for row in rows[::-1]</code> to do reversing iteration. Why not in Java?"}],"answers":[{"comments":[{"owner":{"account_id":3282,"reputation":146296,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"score":0,"creation_date":1247061138,"post_id":1098129,"comment_id":912700,"body_markdown":"You can run a ListIterator backwards, which can be wrapped up within an Iterator.","body":"You can run a ListIterator backwards, which can be wrapped up within an Iterator."},{"owner":{"account_id":11857,"reputation":88771,"user_id":23072,"accept_rate":74,"display_name":"Uri"},"score":0,"creation_date":1247061693,"post_id":1098129,"comment_id":912754,"body_markdown":"@Tom: Good point. However, with the iterator you are still doing the annoying old-style for loops, and you may still pay the cost to get to the last element to begin with... I added the qualifier in my answer, though, thanks.","body":"@Tom: Good point. However, with the iterator you are still doing the annoying old-style for loops, and you may still pay the cost to get to the last element to begin with... I added the qualifier in my answer, though, thanks."},{"owner":{"account_id":107057,"reputation":3790,"user_id":284830,"accept_rate":20,"display_name":"Michael Munsey"},"score":0,"creation_date":1272408013,"post_id":1098129,"comment_id":2752427,"body_markdown":"Deque has a reverse iterator.","body":"Deque has a reverse iterator."}],"tags":[],"owner":{"account_id":11857,"reputation":88771,"user_id":23072,"accept_rate":74,"display_name":"Uri"},"comment_count":3,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1247061342,"creation_date":1247060261,"answer_id":1098129,"question_id":1098117,"body_markdown":"AFAIK there isn&#39;t a standard &quot;reverse_iterator&quot; sort of thing in the standard library that supports the for-each syntax which is already a syntactic sugar they brought late into the language. \r\n\r\nYou could do something like for(Item element: myList.clone().reverse()) and pay the associated price. \r\n\r\nThis also seems fairly consistent with the apparent phenomenon of not giving you convenient ways to do expensive operations - since a list, by definition, could have O(N) random access complexity (you could implement the interface with a single-link), reverse iteration could end up being O(N^2). Of course, if you have an ArrayList, you don&#39;t pay that price. ","title":"Can one do a for each loop in java in reverse order?","body":"<p>AFAIK there isn't a standard \"reverse_iterator\" sort of thing in the standard library that supports the for-each syntax which is already a syntactic sugar they brought late into the language. </p>\n\n<p>You could do something like for(Item element: myList.clone().reverse()) and pay the associated price. </p>\n\n<p>This also seems fairly consistent with the apparent phenomenon of not giving you convenient ways to do expensive operations - since a list, by definition, could have O(N) random access complexity (you could implement the interface with a single-link), reverse iteration could end up being O(N^2). Of course, if you have an ArrayList, you don't pay that price. </p>\n"},{"tags":[],"owner":{"account_id":21018,"reputation":73866,"user_id":50776,"accept_rate":84,"display_name":"casperOne"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1247060277,"creation_date":1247060277,"answer_id":1098130,"question_id":1098117,"body_markdown":"Not without writing some custom code which will give you an enumerator which will reverse the elements for you.\r\n\r\nYou should be able to do it in Java by creating a custom implementation of Iterable which will return the elements in reverse order.\r\n\r\nThen, you would instantiate the wrapper (or call the method, what-have-you) which would return the Iterable implementation which reverses the element in the for each loop.","title":"Can one do a for each loop in java in reverse order?","body":"<p>Not without writing some custom code which will give you an enumerator which will reverse the elements for you.</p>\n\n<p>You should be able to do it in Java by creating a custom implementation of Iterable which will return the elements in reverse order.</p>\n\n<p>Then, you would instantiate the wrapper (or call the method, what-have-you) which would return the Iterable implementation which reverses the element in the for each loop.</p>\n"},{"tags":[],"owner":{"account_id":41034,"reputation":2889,"user_id":119179,"accept_rate":73,"display_name":"Allan"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1596632320,"creation_date":1247060318,"answer_id":1098133,"question_id":1098117,"body_markdown":"You can use the [Collections](https://docs.oracle.com/javase/1.5.0/docs/api/java/util/Collections.html) class to reverse the list then loop.","title":"Can one do a for each loop in java in reverse order?","body":"<p>You can use the <a href=\"https://docs.oracle.com/javase/1.5.0/docs/api/java/util/Collections.html\" rel=\"nofollow noreferrer\">Collections</a> class to reverse the list then loop.</p>\n"},{"tags":[],"owner":{"account_id":1574,"reputation":22507,"user_id":2109,"accept_rate":100,"display_name":"Owen"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1247060353,"creation_date":1247060353,"answer_id":1098135,"question_id":1098117,"body_markdown":"You&#39;d need to reverse your collection if you want to use the for each syntax out of the box and go in reverse order.","title":"Can one do a for each loop in java in reverse order?","body":"<p>You'd need to reverse your collection if you want to use the for each syntax out of the box and go in reverse order.</p>\n"},{"comments":[{"owner":{"account_id":11089,"reputation":400050,"user_id":21234,"accept_rate":91,"display_name":"skaffman"},"score":1,"creation_date":1247060669,"post_id":1098137,"comment_id":912653,"body_markdown":"Our codebase makes heavy use of the generified version of Commons Collections released by larvalabs (http://larvalabs.com/collections/). Looking through the SVN repo for Apache Commons, it&#39;s clear that most of the work in releasing a java 5 version of Commons Collections is done, they just haven&#39;t released it yet.","body":"Our codebase makes heavy use of the generified version of Commons Collections released by larvalabs (<a href=\"http://larvalabs.com/collections/\" rel=\"nofollow noreferrer\">larvalabs.com/collections</a>). Looking through the SVN repo for Apache Commons, it&#39;s clear that most of the work in releasing a java 5 version of Commons Collections is done, they just haven&#39;t released it yet."},{"owner":{"account_id":20857,"reputation":40723,"user_id":50214,"accept_rate":97,"display_name":"geowa4"},"score":0,"creation_date":1247060869,"post_id":1098137,"comment_id":912676,"body_markdown":"I like it. If it weren&#39;t so useful, I&#39;d call that a plug.","body":"I like it. If it weren&#39;t so useful, I&#39;d call that a plug."},{"owner":{"account_id":11857,"reputation":88771,"user_id":23072,"accept_rate":74,"display_name":"Uri"},"score":0,"creation_date":1247061326,"post_id":1098137,"comment_id":912720,"body_markdown":"I wonder why Jakarta never bothered to update Apache Commons.","body":"I wonder why Jakarta never bothered to update Apache Commons."},{"owner":{"account_id":11089,"reputation":400050,"user_id":21234,"accept_rate":91,"display_name":"skaffman"},"score":3,"creation_date":1247061414,"post_id":1098137,"comment_id":912727,"body_markdown":"They have updated it, that&#39;s what I&#39;m saying. They just haven&#39;t released it.","body":"They have updated it, that&#39;s what I&#39;m saying. They just haven&#39;t released it."},{"owner":{"account_id":267053,"reputation":29704,"user_id":554988,"accept_rate":86,"display_name":"Garrett Hall"},"score":23,"creation_date":1318949658,"post_id":1098137,"comment_id":9515347,"body_markdown":"Iterables.reverse has been deprecated, use Lists.reverse or ImmutableList.reverse instead.","body":"Iterables.reverse has been deprecated, use Lists.reverse or ImmutableList.reverse instead."},{"owner":{"account_id":1033144,"reputation":3625,"user_id":1041046,"accept_rate":78,"display_name":"AaA"},"score":0,"creation_date":1467186320,"post_id":1098137,"comment_id":63621791,"body_markdown":"it seems Guava (19.0) does not have any implementation of Reverse anymore. is there any other alternative for the Lists.Reverse?","body":"it seems Guava (19.0) does not have any implementation of Reverse anymore. is there any other alternative for the Lists.Reverse?"},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1467187113,"post_id":1098137,"comment_id":63622279,"body_markdown":"@AaA: What makes you say that? https://github.com/google/guava/blob/master/guava/src/com/google/common/collect/Lists.java#L823","body":"@AaA: What makes you say that? <a href=\"https://github.com/google/guava/blob/master/guava/src/com/google/common/collect/Lists.java#L823\" rel=\"nofollow noreferrer\">github.com/google/guava/blob/master/guava/src/com/google/com&zwnj;&#8203;mon/&hellip;</a>"},{"owner":{"account_id":1033144,"reputation":3625,"user_id":1041046,"accept_rate":78,"display_name":"AaA"},"score":0,"creation_date":1467188865,"post_id":1098137,"comment_id":63623384,"body_markdown":"I downloaded guava from [here](http://central.maven.org/maven2/com/google/guava/guava/19.0/) and my code give me `cannot find symbol` with arrow under `reverse`. here is my code:\n`private final List&lt;Class2&gt; MyClasses;\n    public void aMethod() {\n        for (Class2 MC1: com.google.common.collect.Lists.reverse(MyClasses)) {\n                MC1.method();\n            }\n        }`","body":"I downloaded guava from <a href=\"http://central.maven.org/maven2/com/google/guava/guava/19.0/\" rel=\"nofollow noreferrer\">here</a> and my code give me <code>cannot find symbol</code> with arrow under <code>reverse</code>. here is my code: <code>private final List&lt;Class2&gt; MyClasses;     public void aMethod() {         for (Class2 MC1: com.google.common.collect.Lists.reverse(MyClasses)) {                 MC1.method();             }         }</code>"},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1467189150,"post_id":1098137,"comment_id":63623590,"body_markdown":"@AaA: Well I&#39;ve just downloaded the jar file and tried it myself, and it&#39;s fine for me. I can&#39;t tell what you&#39;re doing wrong - I suggest you ask a new question with a [mcve].","body":"@AaA: Well I&#39;ve just downloaded the jar file and tried it myself, and it&#39;s fine for me. I can&#39;t tell what you&#39;re doing wrong - I suggest you ask a new question with a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."},{"owner":{"account_id":1033144,"reputation":3625,"user_id":1041046,"accept_rate":78,"display_name":"AaA"},"score":0,"creation_date":1467191085,"post_id":1098137,"comment_id":63624843,"body_markdown":"Someone from my team included the [google-collections-1.0](http://central.maven.org/maven2/com/google/collections/google-collections/1.0/google-collections-1.0.jar) in project which has a different definition of `com.google.common.collect.Lists`. removing that library fixed the issue.","body":"Someone from my team included the <a href=\"http://central.maven.org/maven2/com/google/collections/google-collections/1.0/google-collections-1.0.jar\" rel=\"nofollow noreferrer\">google-collections-1.0</a> in project which has a different definition of <code>com.google.common.collect.Lists</code>. removing that library fixed the issue."},{"owner":{"account_id":1170478,"reputation":2410,"user_id":1147783,"display_name":"laszlok"},"score":0,"creation_date":1494429093,"post_id":1098137,"comment_id":74826926,"body_markdown":"Further, you can use Guava&#39;s Lists.reverse to iterate arrays by combining with Arrays.asList (a non-copying List wrapper over the array) or, for primitive types, the various Guava asList methods such as e.g. Ints.asList (although in the latter case you&#39;ll end up wastefully boxing and unboxing each primitive).","body":"Further, you can use Guava&#39;s Lists.reverse to iterate arrays by combining with Arrays.asList (a non-copying List wrapper over the array) or, for primitive types, the various Guava asList methods such as e.g. Ints.asList (although in the latter case you&#39;ll end up wastefully boxing and unboxing each primitive)."}],"tags":[],"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"comment_count":11,"down_vote_count":1,"up_vote_count":102,"is_accepted":false,"score":101,"last_activity_date":1467187151,"creation_date":1247060366,"answer_id":1098137,"question_id":1098117,"body_markdown":"For a list, you could use the [Google Guava Library][1]:\r\n\r\n    for (String item : Lists.reverse(stringList))\r\n    {\r\n        // ...\r\n    }\r\n\r\nNote that [`Lists.reverse`][2] *doesn&#39;t* reverse the whole collection, or do anything like it - it just allows iteration and random access, in the reverse order. This is more efficient than reversing the collection first.\r\n\r\nTo reverse an arbitrary iterable, you&#39;d have to read it all and then &quot;replay&quot; it backwards.\r\n\r\n(If you&#39;re not already using it, I&#39;d *thoroughly* recommend you have a look at the [Guava][1]. It&#39;s great stuff.)\r\n\r\n\r\n  [1]: https://github.com/google/guava/\r\n  [2]: http://google.github.io/guava/releases/19.0/api/docs/com/google/common/collect/Lists.html#reverse(java.util.List)","title":"Can one do a for each loop in java in reverse order?","body":"<p>For a list, you could use the <a href=\"https://github.com/google/guava/\" rel=\"noreferrer\">Google Guava Library</a>:</p>\n\n<pre><code>for (String item : Lists.reverse(stringList))\n{\n    // ...\n}\n</code></pre>\n\n<p>Note that <a href=\"http://google.github.io/guava/releases/19.0/api/docs/com/google/common/collect/Lists.html#reverse(java.util.List)\" rel=\"noreferrer\"><code>Lists.reverse</code></a> <em>doesn't</em> reverse the whole collection, or do anything like it - it just allows iteration and random access, in the reverse order. This is more efficient than reversing the collection first.</p>\n\n<p>To reverse an arbitrary iterable, you'd have to read it all and then \"replay\" it backwards.</p>\n\n<p>(If you're not already using it, I'd <em>thoroughly</em> recommend you have a look at the <a href=\"https://github.com/google/guava/\" rel=\"noreferrer\">Guava</a>. It's great stuff.)</p>\n"},{"comments":[{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":23,"creation_date":1247061030,"post_id":1098153,"comment_id":912689,"body_markdown":"That&#39;s basically what Google&#39;s Iterables.reverse does, yes :)","body":"That&#39;s basically what Google&#39;s Iterables.reverse does, yes :)"},{"owner":{"account_id":717,"reputation":54118,"user_id":939,"accept_rate":81,"display_name":"Ron Tuffin"},"score":10,"creation_date":1247062882,"post_id":1098153,"comment_id":912877,"body_markdown":"I know there is a &#39;rule&#39; that we have to accept Jon&#39;s answer :) but.. I want to accept this one (even though they are essentially the same) because it does not require me to include another 3rd party library (even though some could argue that that reason breaks one of the prime advantages of OO - reusability).","body":"I know there is a &#39;rule&#39; that we have to accept Jon&#39;s answer :) but.. I want to accept this one (even though they are essentially the same) because it does not require me to include another 3rd party library (even though some could argue that that reason breaks one of the prime advantages of OO - reusability)."},{"owner":{"account_id":45934,"reputation":203679,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"score":0,"creation_date":1250156586,"post_id":1098153,"comment_id":1099259,"body_markdown":"Small error: In public void remove(), there should not be a return statement, it should be just: i.remove();","body":"Small error: In public void remove(), there should not be a return statement, it should be just: i.remove();"},{"owner":{"account_id":69447,"reputation":4731,"user_id":202020,"accept_rate":84,"display_name":"er4z0r"},"score":12,"creation_date":1336592543,"post_id":1098153,"comment_id":13609718,"body_markdown":"Collections.reverse() does NOT return a reversed copy but acts on the List passed to it as a parameter. Like your solution with the iterator, though. Really elegant.","body":"Collections.reverse() does NOT return a reversed copy but acts on the List passed to it as a parameter. Like your solution with the iterator, though. Really elegant."}],"tags":[],"owner":{"account_id":876937,"reputation":9851,"user_id":99389,"display_name":"Nat"},"comment_count":4,"down_vote_count":0,"up_vote_count":159,"is_accepted":true,"score":159,"last_activity_date":1567103912,"creation_date":1247060491,"answer_id":1098153,"question_id":1098117,"body_markdown":"The Collections.reverse method actually returns a new list with the elements of the original list copied into it in reverse order, so this has O(n) performance with regards to the size of the original list.\r\n\r\nAs a more efficient solution, you could write a decorator that presents a reversed view of a List as an Iterable. The iterator returned by your decorator would use the ListIterator of the decorated list to walk over the elements in reverse order.\r\n\r\nFor example:\r\n\r\n    public class Reversed&lt;T&gt; implements Iterable&lt;T&gt; {\r\n        private final List&lt;T&gt; original;\r\n\r\n        public Reversed(List&lt;T&gt; original) {\r\n            this.original = original;\r\n        }\r\n\r\n        public Iterator&lt;T&gt; iterator() {\r\n            final ListIterator&lt;T&gt; i = original.listIterator(original.size());\r\n            \r\n            return new Iterator&lt;T&gt;() {\r\n                public boolean hasNext() { return i.hasPrevious(); }\r\n                public T next() { return i.previous(); }\r\n                public void remove() { i.remove(); }\r\n            };\r\n        }\r\n\r\n        public static &lt;T&gt; Reversed&lt;T&gt; reversed(List&lt;T&gt; original) {\r\n            return new Reversed&lt;T&gt;(original);\r\n        }\r\n    }\r\n\r\nAnd you would use it like:\r\n\r\n    import static Reversed.reversed;\r\n    \r\n    ...\r\n    \r\n    List&lt;String&gt; someStrings = getSomeStrings();\r\n    for (String s : reversed(someStrings)) {\r\n        doSomethingWith(s);\r\n    }\r\n","title":"Can one do a for each loop in java in reverse order?","body":"<p>The Collections.reverse method actually returns a new list with the elements of the original list copied into it in reverse order, so this has O(n) performance with regards to the size of the original list.</p>\n\n<p>As a more efficient solution, you could write a decorator that presents a reversed view of a List as an Iterable. The iterator returned by your decorator would use the ListIterator of the decorated list to walk over the elements in reverse order.</p>\n\n<p>For example:</p>\n\n<pre><code>public class Reversed&lt;T&gt; implements Iterable&lt;T&gt; {\n    private final List&lt;T&gt; original;\n\n    public Reversed(List&lt;T&gt; original) {\n        this.original = original;\n    }\n\n    public Iterator&lt;T&gt; iterator() {\n        final ListIterator&lt;T&gt; i = original.listIterator(original.size());\n\n        return new Iterator&lt;T&gt;() {\n            public boolean hasNext() { return i.hasPrevious(); }\n            public T next() { return i.previous(); }\n            public void remove() { i.remove(); }\n        };\n    }\n\n    public static &lt;T&gt; Reversed&lt;T&gt; reversed(List&lt;T&gt; original) {\n        return new Reversed&lt;T&gt;(original);\n    }\n}\n</code></pre>\n\n<p>And you would use it like:</p>\n\n<pre><code>import static Reversed.reversed;\n\n...\n\nList&lt;String&gt; someStrings = getSomeStrings();\nfor (String s : reversed(someStrings)) {\n    doSomethingWith(s);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":28780,"reputation":523,"user_id":77187,"accept_rate":40,"display_name":"Phillip Gibb"},"comment_count":0,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1321894158,"creation_date":1247061047,"answer_id":1098204,"question_id":1098117,"body_markdown":"This will mess with the original list and also needs to be called outside of the loop.\r\nAlso you don&#39;t want to perform a reverse every time you loop - would that be true if one of the `Iterables.reverse ideas` was applied?\r\n\r\n    Collections.reverse(stringList);\r\n    \r\n    for(String string: stringList){\r\n    //...do something\r\n    }\r\n","title":"Can one do a for each loop in java in reverse order?","body":"<p>This will mess with the original list and also needs to be called outside of the loop.\nAlso you don't want to perform a reverse every time you loop - would that be true if one of the <code>Iterables.reverse ideas</code> was applied?</p>\n\n<pre><code>Collections.reverse(stringList);\n\nfor(String string: stringList){\n//...do something\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":0,"creation_date":1653317478,"post_id":4740681,"comment_id":127816320,"body_markdown":"The better way is `a.listIterator(a.size())`.","body":"The better way is <code>a.listIterator(a.size())</code>."}],"tags":[],"owner":{"account_id":32212,"reputation":158,"user_id":89154,"display_name":"Krishna"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1330606502,"creation_date":1295470679,"answer_id":4740681,"question_id":1098117,"body_markdown":"This may be an option. Hope there is a better way to start from last element than to while loop to the end.\r\n\r\n\tpublic static void main(String[] args) {\t\t\r\n\t\tList&lt;String&gt; a = new ArrayList&lt;String&gt;();\r\n\t\ta.add(&quot;1&quot;);a.add(&quot;2&quot;);a.add(&quot;3&quot;);a.add(&quot;4&quot;);a.add(&quot;5&quot;);\r\n\t\t\r\n\t\tListIterator&lt;String&gt; aIter=a.listIterator();\t\t\r\n\t\twhile(aIter.hasNext()) aIter.next();\r\n\t\t\r\n\t\tfor (;aIter.hasPrevious();)\r\n\t\t{\r\n\t\t\tString aVal = aIter.previous();\r\n\t\t\tSystem.out.println(aVal);\t\t\t\r\n\t\t}\r\n\t}\r\n","title":"Can one do a for each loop in java in reverse order?","body":"<p>This may be an option. Hope there is a better way to start from last element than to while loop to the end.</p>\n\n<pre><code>public static void main(String[] args) {        \n    List&lt;String&gt; a = new ArrayList&lt;String&gt;();\n    a.add(\"1\");a.add(\"2\");a.add(\"3\");a.add(\"4\");a.add(\"5\");\n\n    ListIterator&lt;String&gt; aIter=a.listIterator();        \n    while(aIter.hasNext()) aIter.next();\n\n    for (;aIter.hasPrevious();)\n    {\n        String aVal = aIter.previous();\n        System.out.println(aVal);           \n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":108005,"reputation":4460,"user_id":286881,"accept_rate":88,"display_name":"Chris"},"score":4,"creation_date":1305914081,"post_id":6074603,"comment_id":7037365,"body_markdown":"This approach may be fine for array based lists (such as ArrayList) but it would be sub-optimal for Linked Lists as each get would have to traverse the list from beginning to end (or possibly end to beginning) for each get. It is better to use a smarter iterator as in Nat&#39;s solution (optimal for all implementations of List).","body":"This approach may be fine for array based lists (such as ArrayList) but it would be sub-optimal for Linked Lists as each get would have to traverse the list from beginning to end (or possibly end to beginning) for each get. It is better to use a smarter iterator as in Nat&#39;s solution (optimal for all implementations of List)."},{"owner":{"account_id":349379,"reputation":1039,"user_id":684635,"display_name":"Paul W"},"score":1,"creation_date":1305946270,"post_id":6074603,"comment_id":7042339,"body_markdown":"Further, it strays from the request in the OP which explicitly asks for the `for each` syntax","body":"Further, it strays from the request in the OP which explicitly asks for the <code>for each</code> syntax"},{"owner":{"account_id":3590306,"reputation":184,"user_id":2996528,"display_name":"j-hap"},"score":0,"creation_date":1635485893,"post_id":6074603,"comment_id":123316089,"body_markdown":"better readability: `for (int i = stack.size(); i-- &gt;0;) {`","body":"better readability: <code>for (int i = stack.size(); i-- &gt;0;) {</code>"}],"tags":[],"owner":{"account_id":755146,"reputation":469,"user_id":763043,"display_name":"Gopi Reddy"},"comment_count":3,"down_vote_count":1,"up_vote_count":47,"is_accepted":false,"score":46,"last_activity_date":1305907313,"creation_date":1305907313,"answer_id":6074603,"question_id":1098117,"body_markdown":"The List (unlike the Set) is an ordered collection and iterating over it does preserve the order by contract. I would have expected a Stack to iterate in the reverse order but unfortunately it doesn&#39;t. So the simplest solution I can think of is this:\r\n\r\n\tfor (int i = stack.size() - 1; i &gt;= 0; i--) {\r\n\t\tSystem.out.println(stack.get(i));\r\n\t}\r\n\r\nI realize that this is not a &quot;for each&quot; loop solution. I&#39;d rather use the for loop than introducing a new library like the Google Collections.\r\n\r\nCollections.reverse() also does the job but it updates the list as opposed to returning a copy in reverse order.\r\n\r\n","title":"Can one do a for each loop in java in reverse order?","body":"<p>The List (unlike the Set) is an ordered collection and iterating over it does preserve the order by contract. I would have expected a Stack to iterate in the reverse order but unfortunately it doesn't. So the simplest solution I can think of is this:</p>\n\n<pre><code>for (int i = stack.size() - 1; i &gt;= 0; i--) {\n    System.out.println(stack.get(i));\n}\n</code></pre>\n\n<p>I realize that this is not a \"for each\" loop solution. I'd rather use the for loop than introducing a new library like the Google Collections.</p>\n\n<p>Collections.reverse() also does the job but it updates the list as opposed to returning a copy in reverse order.</p>\n"},{"comments":[{"owner":{"account_id":5897549,"reputation":101,"user_id":5206471,"display_name":"Roland Nordborg-L&#248;vstad"},"score":1,"creation_date":1626256050,"post_id":35018637,"comment_id":120842077,"body_markdown":"In later java versions, you can use this shorthand:  \nIterable&lt;String&gt; reverse = () -&gt; new ReverseListIterator&lt;&gt;(stringList)","body":"In later java versions, you can use this shorthand:   Iterable&lt;String&gt; reverse = () -&gt; new ReverseListIterator&lt;&gt;(stringList)"}],"tags":[],"owner":{"account_id":1734438,"reputation":36275,"user_id":1587329,"accept_rate":94,"display_name":"serv-inc"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1626418680,"creation_date":1453825284,"answer_id":35018637,"question_id":1098117,"body_markdown":"As of [the comment][1]: You should be able to use Apache Commons [`ReverseListIterator`][2]\r\n\r\n    Iterable&lt;String&gt; reverse \r\n        = new IteratorIterable(new ReverseListIterator(stringList));\r\n\r\n    for(String string: reverse ){\r\n        //...do something\r\n    }\r\n\r\nAs [@rogerdpack said][3], you need to wrap the `ReverseListIterator` as an `Iterable`.\r\n\r\nAs [recommended by Roland Nordborg-L&#248;vstad in the comments][4], you can simplify with Lambdas in current Java\r\n\r\n    Iterable&lt;String&gt; reverse = () -&gt; new ReverseListIterator&lt;&gt;(stringList)\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/1098117/can-one-do-a-for-each-loop-in-java-in-reverse-order#comment912727_1098137\r\n  [2]: https://commons.apache.org/proper/commons-collections/javadocs/api-release/org/apache/commons/collections4/iterators/ReverseListIterator.html#ReverseListIterator(java.util.List)\r\n  [3]: https://stackoverflow.com/questions/1098117/can-one-do-a-for-each-loop-in-java-in-reverse-order#comment59368098_35018637\r\n  [4]: https://stackoverflow.com/questions/1098117/can-one-do-a-for-each-loop-in-java-in-reverse-order/35018637?noredirect=1#comment120842077_35018637","title":"Can one do a for each loop in java in reverse order?","body":"<p>As of <a href=\"https://stackoverflow.com/questions/1098117/can-one-do-a-for-each-loop-in-java-in-reverse-order#comment912727_1098137\">the comment</a>: You should be able to use Apache Commons <a href=\"https://commons.apache.org/proper/commons-collections/javadocs/api-release/org/apache/commons/collections4/iterators/ReverseListIterator.html#ReverseListIterator(java.util.List)\" rel=\"nofollow noreferrer\"><code>ReverseListIterator</code></a></p>\n<pre><code>Iterable&lt;String&gt; reverse \n    = new IteratorIterable(new ReverseListIterator(stringList));\n\nfor(String string: reverse ){\n    //...do something\n}\n</code></pre>\n<p>As <a href=\"https://stackoverflow.com/questions/1098117/can-one-do-a-for-each-loop-in-java-in-reverse-order#comment59368098_35018637\">@rogerdpack said</a>, you need to wrap the <code>ReverseListIterator</code> as an <code>Iterable</code>.</p>\n<p>As <a href=\"https://stackoverflow.com/questions/1098117/can-one-do-a-for-each-loop-in-java-in-reverse-order/35018637?noredirect=1#comment120842077_35018637\">recommended by Roland Nordborg-Løvstad in the comments</a>, you can simplify with Lambdas in current Java</p>\n<pre><code>Iterable&lt;String&gt; reverse = () -&gt; new ReverseListIterator&lt;&gt;(stringList)\n</code></pre>\n"},{"comments":[{"owner":{"account_id":10288322,"reputation":11,"user_id":7590813,"display_name":"qiwen li"},"score":0,"creation_date":1489490304,"post_id":42784492,"comment_id":72683138,"body_markdown":"why is the `int current = size() - 1` right? why not the `int current = this.size() - 1` or `int current = super.size() - 1`","body":"why is the <code>int current = size() - 1</code> right? why not the <code>int current = this.size() - 1</code> or <code>int current = super.size() - 1</code>"}],"tags":[],"owner":{"account_id":10288322,"reputation":11,"user_id":7590813,"display_name":"qiwen li"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1489490134,"creation_date":1489490134,"answer_id":42784492,"question_id":1098117,"body_markdown":"All answers above only fulfill the requirement, either by wrapping another method or calling some foreign code outside;\r\n\r\nHere is the solution copied from the *Thinking in Java 4th edition*, chapter 11.13.1 *AdapterMethodIdiom*;\r\n\r\nHere is the code:\r\n\r\n  \r\n\r\n        \r\n    // The &quot;Adapter Method&quot; idiom allows you to use foreach\r\n    // with additional kinds of Iterables.\r\n    package holding;\r\n    import java.util.*;\r\n    \r\n    @SuppressWarnings(&quot;serial&quot;)\r\n    class ReversibleArrayList&lt;T&gt; extends ArrayList&lt;T&gt; {\r\n      public ReversibleArrayList(Collection&lt;T&gt; c) { super(c); }\r\n      public Iterable&lt;T&gt; reversed() {\r\n        return new Iterable&lt;T&gt;() {\r\n          public Iterator&lt;T&gt; iterator() {\r\n            return new Iterator&lt;T&gt;() {\r\n              int current = size() - 1; //why this.size() or super.size() wrong?\r\n              public boolean hasNext() { return current &gt; -1; }\r\n              public T next() { return get(current--); }\r\n              public void remove() { // Not implemented\r\n                throw new UnsupportedOperationException();\r\n              }\r\n            };\r\n          }\r\n        };\r\n      }\r\n    }\t\r\n    \r\n    public class AdapterMethodIdiom {\r\n      public static void main(String[] args) {\r\n        ReversibleArrayList&lt;String&gt; ral =\r\n          new ReversibleArrayList&lt;String&gt;(\r\n            Arrays.asList(&quot;To be or not to be&quot;.split(&quot; &quot;)));\r\n        // Grabs the ordinary iterator via iterator():\r\n        for(String s : ral)\r\n          System.out.print(s + &quot; &quot;);\r\n        System.out.println();\r\n        // Hand it the Iterable of your choice\r\n        for(String s : ral.reversed())\r\n          System.out.print(s + &quot; &quot;);\r\n      }\r\n    } /* Output:\r\n    To be or not to be\r\n    be to not or be To\r\n    *///:~\r\n\r\n","title":"Can one do a for each loop in java in reverse order?","body":"<p>All answers above only fulfill the requirement, either by wrapping another method or calling some foreign code outside;</p>\n\n<p>Here is the solution copied from the <em>Thinking in Java 4th edition</em>, chapter 11.13.1 <em>AdapterMethodIdiom</em>;</p>\n\n<p>Here is the code:</p>\n\n<pre><code>// The \"Adapter Method\" idiom allows you to use foreach\n// with additional kinds of Iterables.\npackage holding;\nimport java.util.*;\n\n@SuppressWarnings(\"serial\")\nclass ReversibleArrayList&lt;T&gt; extends ArrayList&lt;T&gt; {\n  public ReversibleArrayList(Collection&lt;T&gt; c) { super(c); }\n  public Iterable&lt;T&gt; reversed() {\n    return new Iterable&lt;T&gt;() {\n      public Iterator&lt;T&gt; iterator() {\n        return new Iterator&lt;T&gt;() {\n          int current = size() - 1; //why this.size() or super.size() wrong?\n          public boolean hasNext() { return current &gt; -1; }\n          public T next() { return get(current--); }\n          public void remove() { // Not implemented\n            throw new UnsupportedOperationException();\n          }\n        };\n      }\n    };\n  }\n}   \n\npublic class AdapterMethodIdiom {\n  public static void main(String[] args) {\n    ReversibleArrayList&lt;String&gt; ral =\n      new ReversibleArrayList&lt;String&gt;(\n        Arrays.asList(\"To be or not to be\".split(\" \")));\n    // Grabs the ordinary iterator via iterator():\n    for(String s : ral)\n      System.out.print(s + \" \");\n    System.out.println();\n    // Hand it the Iterable of your choice\n    for(String s : ral.reversed())\n      System.out.print(s + \" \");\n  }\n} /* Output:\nTo be or not to be\nbe to not or be To\n*///:~\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2430820,"reputation":343,"user_id":2121765,"display_name":"ScottMichaud"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1535839695,"creation_date":1535839695,"answer_id":52132535,"question_id":1098117,"body_markdown":"Definitely a late answer to this question. One possibility is to use the ListIterator in a for loop. It&#39;s not as clean as colon-syntax, but it works.\r\n\r\n    List&lt;String&gt; exampleList = new ArrayList&lt;&gt;();\r\n    exampleList.add(&quot;One&quot;);\r\n    exampleList.add(&quot;Two&quot;);\r\n    exampleList.add(&quot;Three&quot;);\r\n    \r\n    //Forward iteration\r\n    for (String currentString : exampleList) {\r\n    \tSystem.out.println(currentString); \r\n    }\r\n    \r\n    //Reverse iteration\r\n    for (ListIterator&lt;String&gt; itr = exampleList.listIterator(exampleList.size()); itr.hasPrevious(); /*no-op*/ ) {\r\n      \tString currentString = itr.previous();\r\n    \tSystem.out.println(currentString); \r\n    }\r\n\r\nCredit for the ListIterator syntax goes to [&quot;Ways to iterate over a list in Java&quot;][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/18410035/ways-to-iterate-over-a-list-in-java &quot;Ways to iterate over a list in Java&quot;","title":"Can one do a for each loop in java in reverse order?","body":"<p>Definitely a late answer to this question. One possibility is to use the ListIterator in a for loop. It's not as clean as colon-syntax, but it works.</p>\n\n<pre><code>List&lt;String&gt; exampleList = new ArrayList&lt;&gt;();\nexampleList.add(\"One\");\nexampleList.add(\"Two\");\nexampleList.add(\"Three\");\n\n//Forward iteration\nfor (String currentString : exampleList) {\n    System.out.println(currentString); \n}\n\n//Reverse iteration\nfor (ListIterator&lt;String&gt; itr = exampleList.listIterator(exampleList.size()); itr.hasPrevious(); /*no-op*/ ) {\n    String currentString = itr.previous();\n    System.out.println(currentString); \n}\n</code></pre>\n\n<p>Credit for the ListIterator syntax goes to <a href=\"https://stackoverflow.com/questions/18410035/ways-to-iterate-over-a-list-in-java\" title=\"Ways to iterate over a list in Java\">\"Ways to iterate over a list in Java\"</a></p>\n"},{"tags":[],"owner":{"account_id":4443197,"reputation":8014,"user_id":3617234,"accept_rate":89,"display_name":"EssaidiM"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1568627328,"creation_date":1568627328,"answer_id":57954262,"question_id":1098117,"body_markdown":"A work Around : \r\n\r\n    Collections.reverse(stringList).forEach(str -&gt; ...);\r\n\r\nOr with [guava][1] : \r\n\r\n    Lists.reverse(stringList).forEach(str -&gt; ...);\r\n\r\n\r\n  [1]: https://github.com/google/guava/","title":"Can one do a for each loop in java in reverse order?","body":"<p>A work Around : </p>\n\n<pre><code>Collections.reverse(stringList).forEach(str -&gt; ...);\n</code></pre>\n\n<p>Or with <a href=\"https://github.com/google/guava/\" rel=\"nofollow noreferrer\">guava</a> : </p>\n\n<pre><code>Lists.reverse(stringList).forEach(str -&gt; ...);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8238840,"reputation":637,"user_id":6197069,"display_name":"Hanamant Jadhav"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1622298462,"creation_date":1622298462,"answer_id":67752501,"question_id":1098117,"body_markdown":"E.g.\r\n\r\n    Integer[][] a = {\r\n    \t\t\t\t{ 1, 2, 3 }, \r\n    \t\t\t\t{ 4, 5, 6 }, \r\n    \t\t\t\t{ 9, 8, 9 }, \r\n    \t\t\t\t};\r\n    \r\n    List&lt;List&lt;Integer&gt;&gt; arr = Arrays.stream(a)\r\n                    .map(Arrays::asList)\r\n                    .collect(Collectors.toList());\r\n\r\nReverse it now.\r\n\r\n    Collections.reverse(arr);\r\n\tSystem.out.println(&quot;Reverse Array&quot; + arr);\r\n\tfor (List&lt;Integer&gt; obj : arr) {\r\n\t\t// TODO\r\n\t}\r\n\r\n","title":"Can one do a for each loop in java in reverse order?","body":"<p>E.g.</p>\n<pre><code>Integer[][] a = {\n                { 1, 2, 3 }, \n                { 4, 5, 6 }, \n                { 9, 8, 9 }, \n                };\n\nList&lt;List&lt;Integer&gt;&gt; arr = Arrays.stream(a)\n                .map(Arrays::asList)\n                .collect(Collectors.toList());\n</code></pre>\n<p>Reverse it now.</p>\n<pre><code>Collections.reverse(arr);\nSystem.out.println(&quot;Reverse Array&quot; + arr);\nfor (List&lt;Integer&gt; obj : arr) {\n    // TODO\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695230012,"creation_date":1689744279,"answer_id":76718202,"question_id":1098117,"body_markdown":"Starting with Java 21, the [`reversed()`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html#reversed()) method can be used to return a reversed view on the list, which can then be iterated over using an enhanced `for` statement:\r\n\r\n```lang-java\r\nfor (String string : stringList.reversed()) {\r\n    //...do something\r\n}\r\n```\r\n","title":"Can one do a for each loop in java in reverse order?","body":"<p>Starting with Java 21, the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html#reversed()\" rel=\"nofollow noreferrer\"><code>reversed()</code></a> method can be used to return a reversed view on the list, which can then be iterated over using an enhanced <code>for</code> statement:</p>\n<pre class=\"lang-java prettyprint-override\"><code>for (String string : stringList.reversed()) {\n    //...do something\n}\n</code></pre>\n"}],"owner":{"account_id":717,"reputation":54118,"user_id":939,"accept_rate":81,"display_name":"Ron Tuffin"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":161315,"favorite_count":0,"down_vote_count":0,"up_vote_count":172,"accepted_answer_id":1098153,"answer_count":15,"score":172,"last_activity_date":1695230012,"creation_date":1247060047,"question_id":1098117,"body_markdown":"I need to run through a List in reverse order using Java. \r\n\r\nSo where this does it forwards:\r\n\r\n    for(String string: stringList){\r\n    //...do something\r\n    }\r\n\r\nIs there some way to iterate the stringList in reverse order using the *for each* syntax?\r\n\r\nFor clarity: I know how to iterate a list in reverse order but would like to know (for curiosity&#39;s sake ) how to do it in the *for each* style.","title":"Can one do a for each loop in java in reverse order?","body":"<p>I need to run through a List in reverse order using Java. </p>\n\n<p>So where this does it forwards:</p>\n\n<pre><code>for(String string: stringList){\n//...do something\n}\n</code></pre>\n\n<p>Is there some way to iterate the stringList in reverse order using the <em>for each</em> syntax?</p>\n\n<p>For clarity: I know how to iterate a list in reverse order but would like to know (for curiosity's sake ) how to do it in the <em>for each</em> style.</p>\n"},{"tags":["java","treeset","sortedset"],"comments":[{"owner":{"account_id":2993703,"reputation":3071,"user_id":2540669,"display_name":"augray"},"score":0,"creation_date":1454296686,"post_id":35122490,"comment_id":57965596,"body_markdown":"Are you against placing the items from the set in another data structure? Additionally, are you required to have the items in the `SortedSet` in the specific order they&#39;re already in, or would you be okay with storing them in reverse order?","body":"Are you against placing the items from the set in another data structure? Additionally, are you required to have the items in the <code>SortedSet</code> in the specific order they&#39;re already in, or would you be okay with storing them in reverse order?"},{"owner":{"account_id":2415455,"reputation":187,"user_id":2109581,"accept_rate":0,"display_name":"user2109581"},"score":0,"creation_date":1454296909,"post_id":35122490,"comment_id":57965654,"body_markdown":"I just want to print the list. There is no requirement to SortedSet if there is a better way. It is ok if I can store items in reverse order.","body":"I just want to print the list. There is no requirement to SortedSet if there is a better way. It is ok if I can store items in reverse order."}],"answers":[{"tags":[],"owner":{"account_id":7230662,"reputation":8299,"user_id":5517633,"display_name":"Abdelhak"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1454297184,"creation_date":1454296800,"answer_id":35122546,"question_id":35122490,"body_markdown":"Try to use `NavigableSet`:\r\n      \r\n     public NavigableSet&lt;E&gt; descendingSet()\r\nLike this:\r\n       \r\n      SortedSet&lt;Float&gt; orderlist = new TreeSet&lt;Float&gt;(mylist.keySet());\r\n      SortedSet&lt;Float&gt; treereverse = new TreeSet&lt;Float&gt;();\r\n      // creating reverse set\r\n      treereverse=(TreeSet)orderlist.descendingSet();\r\nFinally you have `treereverse` with the reverse order.","title":"How to reverse the order of SortedSet","body":"<p>Try to use <code>NavigableSet</code>:</p>\n\n<pre><code> public NavigableSet&lt;E&gt; descendingSet()\n</code></pre>\n\n<p>Like this:</p>\n\n<pre><code>  SortedSet&lt;Float&gt; orderlist = new TreeSet&lt;Float&gt;(mylist.keySet());\n  SortedSet&lt;Float&gt; treereverse = new TreeSet&lt;Float&gt;();\n  // creating reverse set\n  treereverse=(TreeSet)orderlist.descendingSet();\n</code></pre>\n\n<p>Finally you have <code>treereverse</code> with the reverse order.</p>\n"},{"comments":[{"owner":{"account_id":2415455,"reputation":187,"user_id":2109581,"accept_rate":0,"display_name":"user2109581"},"score":0,"creation_date":1454298134,"post_id":35122576,"comment_id":57965919,"body_markdown":"Thanks, that is awesome!","body":"Thanks, that is awesome!"},{"owner":{"account_id":2993703,"reputation":3071,"user_id":2540669,"display_name":"augray"},"score":5,"creation_date":1454298262,"post_id":35122576,"comment_id":57965954,"body_markdown":"No problem! [SO etiquette for a thank-you is an upvote and a &quot;mark as answer&quot;](http://meta.stackexchange.com/questions/126180/is-it-acceptable-to-write-a-thank-you-in-a-comment) ;-)","body":"No problem! <a href=\"http://meta.stackexchange.com/questions/126180/is-it-acceptable-to-write-a-thank-you-in-a-comment\">SO etiquette for a thank-you is an upvote and a &quot;mark as answer&quot;</a> ;-)"}],"tags":[],"owner":{"account_id":2993703,"reputation":3071,"user_id":2540669,"display_name":"augray"},"comment_count":2,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1454297625,"creation_date":1454297149,"answer_id":35122576,"question_id":35122490,"body_markdown":"If you&#39;re willing to store the elements in the `SortedSet` in reverse order, the only change you need to make is to construct the `TreeSet` with [an appropriate constructor](https://docs.oracle.com/javase/7/docs/api/java/util/TreeSet.html#TreeSet(java.util.Comparator)) which takes a custom [`Comparator`](https://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html):\r\n\r\n    Map&lt;Float, String&gt; mylist = new HashMap&lt;&gt;();\r\n\r\n    mylist.put(10.5, a);\r\n    mylist.put(12.3, b);\r\n    mylist.put(5.1, c);\r\n\r\n    SortedSet&lt;Float&gt; orderlist = new TreeSet&lt;Float&gt;(Collections.reverseOrder());\r\n    orderList.addAll(mylist.keySet());\r\n\r\n    for (Float i : orderlist) {\r\n        System.out.println(i+&quot; &quot;+mylist.get(i));\r\n    }\r\n\r\nNote the neat method here is [`Collections.reverseOrder()`](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#reverseOrder()) which returns a `Comparator` which compares in the opposite of the natural ordering of elements.","title":"How to reverse the order of SortedSet","body":"<p>If you're willing to store the elements in the <code>SortedSet</code> in reverse order, the only change you need to make is to construct the <code>TreeSet</code> with <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/TreeSet.html#TreeSet(java.util.Comparator)\" rel=\"noreferrer\">an appropriate constructor</a> which takes a custom <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html\" rel=\"noreferrer\"><code>Comparator</code></a>:</p>\n\n<pre><code>Map&lt;Float, String&gt; mylist = new HashMap&lt;&gt;();\n\nmylist.put(10.5, a);\nmylist.put(12.3, b);\nmylist.put(5.1, c);\n\nSortedSet&lt;Float&gt; orderlist = new TreeSet&lt;Float&gt;(Collections.reverseOrder());\norderList.addAll(mylist.keySet());\n\nfor (Float i : orderlist) {\n    System.out.println(i+\" \"+mylist.get(i));\n}\n</code></pre>\n\n<p>Note the neat method here is <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#reverseOrder()\" rel=\"noreferrer\"><code>Collections.reverseOrder()</code></a> which returns a <code>Comparator</code> which compares in the opposite of the natural ordering of elements.</p>\n"},{"tags":[],"owner":{"account_id":7749818,"reputation":175,"user_id":5866097,"display_name":"Niks"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1454305975,"creation_date":1454305975,"answer_id":35123793,"question_id":35122490,"body_markdown":"You can also try this : \r\n\r\n\r\n        Map&lt;Float, String&gt; mylist = new HashMap&lt;Float, String&gt;();\r\n        mylist.put(10.5, a);\r\n        mylist.put(12.3, b);\r\n        mylist.put(5.1, c);\r\n\r\n        SortedSet&lt;Float&gt; orderlist = new TreeSet&lt;Float&gt;(mylist.keySet()).descendingSet();\r\n\r\n        for (Float i : orderlist) {\r\n            System.out.println(i+&quot; &quot;+mylist.get(i));\r\n        }\r\n    ","title":"How to reverse the order of SortedSet","body":"<p>You can also try this : </p>\n\n<pre><code>    Map&lt;Float, String&gt; mylist = new HashMap&lt;Float, String&gt;();\n    mylist.put(10.5, a);\n    mylist.put(12.3, b);\n    mylist.put(5.1, c);\n\n    SortedSet&lt;Float&gt; orderlist = new TreeSet&lt;Float&gt;(mylist.keySet()).descendingSet();\n\n    for (Float i : orderlist) {\n        System.out.println(i+\" \"+mylist.get(i));\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4646767,"reputation":17781,"user_id":3764804,"accept_rate":59,"display_name":"BullyWiiPlaza"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1564965703,"creation_date":1564965703,"answer_id":57351123,"question_id":35122490,"body_markdown":"You can try this implementation ([source][1]):\r\n\r\n    public sealed class OrderedSet&lt;T&gt; : ICollection&lt;T&gt;\r\n    {\r\n    \tprivate readonly IDictionary&lt;T, LinkedListNode&lt;T&gt;&gt; _dictionary;\r\n    \tprivate readonly LinkedList&lt;T&gt; _linkedList;\r\n    \r\n    \tpublic OrderedSet()\r\n    \t\t: this(EqualityComparer&lt;T&gt;.Default)\r\n    \t{\r\n    \t}\r\n    \r\n    \tprivate OrderedSet(IEqualityComparer&lt;T&gt; comparer)\r\n    \t{\r\n    \t\t_dictionary = new Dictionary&lt;T, LinkedListNode&lt;T&gt;&gt;(comparer);\r\n    \t\t_linkedList = new LinkedList&lt;T&gt;();\r\n    \t}\r\n    \r\n    \tpublic int Count =&gt; _dictionary.Count;\r\n    \r\n    \tpublic bool IsReadOnly =&gt; _dictionary.IsReadOnly;\r\n    \r\n    \tvoid ICollection&lt;T&gt;.Add(T item)\r\n    \t{\r\n    \t\tAdd(item);\r\n    \t}\r\n    \r\n    \tpublic void Clear()\r\n    \t{\r\n    \t\t_linkedList.Clear();\r\n    \t\t_dictionary.Clear();\r\n    \t}\r\n    \r\n    \tpublic bool Remove(T item)\r\n    \t{\r\n    \t\tvar found = _dictionary.TryGetValue(item, out var node);\r\n    \t\tif (!found)\r\n    \t\t{\r\n    \t\t\treturn false;\r\n    \t\t}\r\n    \r\n    \t\t_dictionary.Remove(item);\r\n    \t\t_linkedList.Remove(node);\r\n    \t\treturn true;\r\n    \t}\r\n    \r\n    \tpublic IEnumerator&lt;T&gt; GetEnumerator()\r\n    \t{\r\n    \t\treturn _linkedList.GetEnumerator();\r\n    \t}\r\n    \r\n    \tIEnumerator IEnumerable.GetEnumerator()\r\n    \t{\r\n    \t\treturn GetEnumerator();\r\n    \t}\r\n    \r\n    \tpublic bool Contains(T item)\r\n    \t{\r\n    \t\treturn _dictionary.ContainsKey(item);\r\n    \t}\r\n    \r\n    \tpublic void CopyTo(T[] array, int arrayIndex)\r\n    \t{\r\n    \t\t_linkedList.CopyTo(array, arrayIndex);\r\n    \t}\r\n    \r\n    \tpublic void Add(T item)\r\n    \t{\r\n    \t\tif (_dictionary.ContainsKey(item))\r\n    \t\t{\r\n    \t\t\treturn;\r\n    \t\t}\r\n    \r\n    \t\tvar node = _linkedList.AddLast(item);\r\n    \t\t_dictionary.Add(item, node);\r\n    \t}\r\n    \r\n    \tpublic void Reverse()\r\n    \t{\r\n    \t\tvar head = _linkedList.First;\r\n    \t\twhile (head.Next != null)\r\n    \t\t{\r\n    \t\t\tvar next = head.Next;\r\n    \t\t\t_linkedList.Remove(next);\r\n    \t\t\t_linkedList.AddFirst(next.Value);\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\nPlease note that this is an `OrderSet` which preserves the insertion order unlike [`SortedSet`][2] which keeps the set sorted according to some comparator (e.g. alphabetically).\r\n\r\nI added the `Reverse()` method from [here][3].\r\n\r\n  [1]: https://stackoverflow.com/a/17853085/3764804\r\n  [2]: https://learn.microsoft.com/en-us/dotnet/api/system.collections.generic.sortedset-1?view=netframework-4.8\r\n  [3]: https://stackoverflow.com/a/25571033/3764804","title":"How to reverse the order of SortedSet","body":"<p>You can try this implementation (<a href=\"https://stackoverflow.com/a/17853085/3764804\">source</a>):</p>\n\n<pre><code>public sealed class OrderedSet&lt;T&gt; : ICollection&lt;T&gt;\n{\n    private readonly IDictionary&lt;T, LinkedListNode&lt;T&gt;&gt; _dictionary;\n    private readonly LinkedList&lt;T&gt; _linkedList;\n\n    public OrderedSet()\n        : this(EqualityComparer&lt;T&gt;.Default)\n    {\n    }\n\n    private OrderedSet(IEqualityComparer&lt;T&gt; comparer)\n    {\n        _dictionary = new Dictionary&lt;T, LinkedListNode&lt;T&gt;&gt;(comparer);\n        _linkedList = new LinkedList&lt;T&gt;();\n    }\n\n    public int Count =&gt; _dictionary.Count;\n\n    public bool IsReadOnly =&gt; _dictionary.IsReadOnly;\n\n    void ICollection&lt;T&gt;.Add(T item)\n    {\n        Add(item);\n    }\n\n    public void Clear()\n    {\n        _linkedList.Clear();\n        _dictionary.Clear();\n    }\n\n    public bool Remove(T item)\n    {\n        var found = _dictionary.TryGetValue(item, out var node);\n        if (!found)\n        {\n            return false;\n        }\n\n        _dictionary.Remove(item);\n        _linkedList.Remove(node);\n        return true;\n    }\n\n    public IEnumerator&lt;T&gt; GetEnumerator()\n    {\n        return _linkedList.GetEnumerator();\n    }\n\n    IEnumerator IEnumerable.GetEnumerator()\n    {\n        return GetEnumerator();\n    }\n\n    public bool Contains(T item)\n    {\n        return _dictionary.ContainsKey(item);\n    }\n\n    public void CopyTo(T[] array, int arrayIndex)\n    {\n        _linkedList.CopyTo(array, arrayIndex);\n    }\n\n    public void Add(T item)\n    {\n        if (_dictionary.ContainsKey(item))\n        {\n            return;\n        }\n\n        var node = _linkedList.AddLast(item);\n        _dictionary.Add(item, node);\n    }\n\n    public void Reverse()\n    {\n        var head = _linkedList.First;\n        while (head.Next != null)\n        {\n            var next = head.Next;\n            _linkedList.Remove(next);\n            _linkedList.AddFirst(next.Value);\n        }\n    }\n}\n</code></pre>\n\n<p>Please note that this is an <code>OrderSet</code> which preserves the insertion order unlike <a href=\"https://learn.microsoft.com/en-us/dotnet/api/system.collections.generic.sortedset-1?view=netframework-4.8\" rel=\"nofollow noreferrer\"><code>SortedSet</code></a> which keeps the set sorted according to some comparator (e.g. alphabetically).</p>\n\n<p>I added the <code>Reverse()</code> method from <a href=\"https://stackoverflow.com/a/25571033/3764804\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695229935,"creation_date":1689745781,"answer_id":76718313,"question_id":35122490,"body_markdown":"Starting with Java 21, the [`reversed()`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SortedSet.html#reversed()) method can be used to return a reversed view on the set, which can then be iterated over using an enhanced `for` statement:\r\n\r\n```lang-java\r\nfor (Float i : orderlist) {\r\n    System.out.println(i+&quot; &quot;+mylist.get(i));\r\n}\r\n```\r\n","title":"How to reverse the order of SortedSet","body":"<p>Starting with Java 21, the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SortedSet.html#reversed()\" rel=\"nofollow noreferrer\"><code>reversed()</code></a> method can be used to return a reversed view on the set, which can then be iterated over using an enhanced <code>for</code> statement:</p>\n<pre class=\"lang-java prettyprint-override\"><code>for (Float i : orderlist) {\n    System.out.println(i+&quot; &quot;+mylist.get(i));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689746220,"creation_date":1689746220,"answer_id":76718346,"question_id":35122490,"body_markdown":"Rather than creating a `SortedSet` for just the keys and looking up the value for each key, you can use a `SortedMap` and iterate over the map&#39;s entries.  The map can be sorted in reversed order using the [`Comparator.reversed()`](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Comparator.html#reversed()) comparator.\r\n\r\n```lang-java\r\nMap&lt;Float, String&gt; mylist = new HashMap&lt;&gt;();\r\n\r\nmylist.put(10.5, a);\r\nmylist.put(12.3, b);\r\nmylist.put(5.1, c);\r\n\r\nSortedMap&lt;Float, String&gt; orderlist = new TreeMap&lt;Float&gt;(Comparator.reversed());\r\norderlist.putAll(mylist);\r\n\r\nfor (Map.Entry&lt;Float, String&gt; e : orderlist.entrySet()) {\r\n    System.out.println(e.getKey() + &quot; &quot; + e.getValue());\r\n}\r\n```\r\n\r\nIf you aren&#39;t using `mylist` as a `HashMap` separately from this iteration, the `SortedMap` can be used directly.\r\n\r\n```lang-java\r\nSortedMap&lt;Float, String&gt; mylist = new TreeMap&lt;&gt;(Comparator.reversed());\r\n\r\nmylist.put(10.5, a);\r\nmylist.put(12.3, b);\r\nmylist.put(5.1, c);\r\n\r\nfor (Map.Entry&lt;Float, String&gt; e : mylist.entrySet()) {\r\n    System.out.println(e.getKey() + &quot; &quot; + e.getValue());\r\n}\r\n```","title":"How to reverse the order of SortedSet","body":"<p>Rather than creating a <code>SortedSet</code> for just the keys and looking up the value for each key, you can use a <code>SortedMap</code> and iterate over the map's entries.  The map can be sorted in reversed order using the <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Comparator.html#reversed()\" rel=\"nofollow noreferrer\"><code>Comparator.reversed()</code></a> comparator.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt;Float, String&gt; mylist = new HashMap&lt;&gt;();\n\nmylist.put(10.5, a);\nmylist.put(12.3, b);\nmylist.put(5.1, c);\n\nSortedMap&lt;Float, String&gt; orderlist = new TreeMap&lt;Float&gt;(Comparator.reversed());\norderlist.putAll(mylist);\n\nfor (Map.Entry&lt;Float, String&gt; e : orderlist.entrySet()) {\n    System.out.println(e.getKey() + &quot; &quot; + e.getValue());\n}\n</code></pre>\n<p>If you aren't using <code>mylist</code> as a <code>HashMap</code> separately from this iteration, the <code>SortedMap</code> can be used directly.</p>\n<pre class=\"lang-java prettyprint-override\"><code>SortedMap&lt;Float, String&gt; mylist = new TreeMap&lt;&gt;(Comparator.reversed());\n\nmylist.put(10.5, a);\nmylist.put(12.3, b);\nmylist.put(5.1, c);\n\nfor (Map.Entry&lt;Float, String&gt; e : mylist.entrySet()) {\n    System.out.println(e.getKey() + &quot; &quot; + e.getValue());\n}\n</code></pre>\n"}],"owner":{"account_id":2415455,"reputation":187,"user_id":2109581,"accept_rate":0,"display_name":"user2109581"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10476,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"answer_count":6,"score":10,"last_activity_date":1695229935,"creation_date":1454296344,"question_id":35122490,"body_markdown":"I want to print an ordered list in Map using the following:\r\n\r\n    Map&lt;Float, String&gt; mylist = new HashMap&lt;&gt;();\r\n\r\n    mylist.put(10.5, a);\r\n    mylist.put(12.3, b);\r\n    mylist.put(5.1, c);\r\n\r\n    SortedSet&lt;Float&gt; orderlist = new TreeSet&lt;Float&gt;(mylist.keySet());\r\n\r\n    for (Float i : orderlist) {\r\n\t    System.out.println(i+&quot; &quot;+mylist.get(i));\r\n\t}\r\n\r\nThe above code prints:\r\n\r\n    5.1 c\r\n    10.5 a\r\n    12.3 b    \r\n\r\nBut how do I the print the orderlist in reverse order like below:\r\n\r\n    12.3 b\r\n    10.5 a\r\n    5.1 c\r\n","title":"How to reverse the order of SortedSet","body":"<p>I want to print an ordered list in Map using the following:</p>\n\n<pre><code>Map&lt;Float, String&gt; mylist = new HashMap&lt;&gt;();\n\nmylist.put(10.5, a);\nmylist.put(12.3, b);\nmylist.put(5.1, c);\n\nSortedSet&lt;Float&gt; orderlist = new TreeSet&lt;Float&gt;(mylist.keySet());\n\nfor (Float i : orderlist) {\n    System.out.println(i+\" \"+mylist.get(i));\n}\n</code></pre>\n\n<p>The above code prints:</p>\n\n<pre><code>5.1 c\n10.5 a\n12.3 b    \n</code></pre>\n\n<p>But how do I the print the orderlist in reverse order like below:</p>\n\n<pre><code>12.3 b\n10.5 a\n5.1 c\n</code></pre>\n"},{"tags":["java","linkedhashmap"],"comments":[{"owner":{"account_id":426969,"reputation":61751,"user_id":808486,"accept_rate":100,"display_name":"Tudor"},"score":1,"creation_date":1331204794,"post_id":9616642,"comment_id":12202081,"body_markdown":"The last element in which order? Lexicographic?","body":"The last element in which order? Lexicographic?"},{"owner":{"account_id":955989,"reputation":10476,"user_id":981284,"accept_rate":94,"display_name":"rlegendi"},"score":0,"creation_date":1331204835,"post_id":9616642,"comment_id":12202094,"body_markdown":"As you said, there is no ordering on sets (hence the name). How do you define *last* if you have no ordering? The one with the highest `hashCode()` value? Or, the one you put into the map? Or, the one which is in the *deepest* bin?","body":"As you said, there is no ordering on sets (hence the name). How do you define <i>last</i> if you have no ordering? The one with the highest <code>hashCode()</code> value? Or, the one you put into the map? Or, the one which is in the <i>deepest</i> bin?"},{"owner":{"account_id":1001687,"reputation":12271,"user_id":1016403,"accept_rate":56,"display_name":"user1016403"},"score":0,"creation_date":1331204920,"post_id":9616642,"comment_id":12202118,"body_markdown":"Hi rlegendi, Thanks for your reply. i need the one which is in the deepest bin.","body":"Hi rlegendi, Thanks for your reply. i need the one which is in the deepest bin."},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":1,"creation_date":1331204985,"post_id":9616642,"comment_id":12202139,"body_markdown":"@rlegendi: Although sets don&#39;t *generally* support ordering, several *implementations* do. `LinkedHashMap` maintains insertion order, so I&#39;d *expect* its key and value sets to do likewise.","body":"@rlegendi: Although sets don&#39;t <i>generally</i> support ordering, several <i>implementations</i> do. <code>LinkedHashMap</code> maintains insertion order, so I&#39;d <i>expect</i> its key and value sets to do likewise."},{"owner":{"account_id":955989,"reputation":10476,"user_id":981284,"accept_rate":94,"display_name":"rlegendi"},"score":0,"creation_date":1331205923,"post_id":9616642,"comment_id":12202412,"body_markdown":"@JonSkeet Oh, true, sry, I forgot we are speaking of a `LinkedHashMap`. Surely, `SortedSet` implementations support ordering, but I saw not that was used. The ordering of a `LinkedHashMap` might also trick you if an existing element is put into it again (it will be not re-inserted).","body":"@JonSkeet Oh, true, sry, I forgot we are speaking of a <code>LinkedHashMap</code>. Surely, <code>SortedSet</code> implementations support ordering, but I saw not that was used. The ordering of a <code>LinkedHashMap</code> might also trick you if an existing element is put into it again (it will be not re-inserted)."},{"owner":{"account_id":15387,"reputation":63718,"user_id":32453,"accept_rate":92,"display_name":"rogerdpack"},"score":0,"creation_date":1449645714,"post_id":9616642,"comment_id":56092599,"body_markdown":"see also http://stackoverflow.com/questions/1936462/java-linkedhashmap-get-first-or-last-entry","body":"see also <a href=\"http://stackoverflow.com/questions/1936462/java-linkedhashmap-get-first-or-last-entry\" title=\"java linkedhashmap get first or last entry\">stackoverflow.com/questions/1936462/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":6,"creation_date":1331206145,"post_id":9616782,"comment_id":12202470,"body_markdown":"There are better ways to get the last value of an iterable - ways which *don&#39;t* take O(n) space. See Guava&#39;s Iterables.getLast for example.","body":"There are better ways to get the last value of an iterable - ways which <i>don&#39;t</i> take O(n) space. See Guava&#39;s Iterables.getLast for example."},{"owner":{"account_id":220789,"reputation":114430,"user_id":478399,"accept_rate":83,"display_name":"AlexR"},"score":0,"creation_date":1331206233,"post_id":9616782,"comment_id":12202497,"body_markdown":"Good point, @Jon Skeet. But I wrapped set with `ArrayList` that does not have such problem.","body":"Good point, @Jon Skeet. But I wrapped set with <code>ArrayList</code> that does not have such problem."},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":2,"creation_date":1331206693,"post_id":9616782,"comment_id":12202632,"body_markdown":"Well the code you&#39;ve given won&#39;t even compile, but if it were `new ArrayList&lt;TheType&gt;(map.getKeys())` then it *would* exhibit that problem - because that constructor copies all the elements.","body":"Well the code you&#39;ve given won&#39;t even compile, but if it were <code>new ArrayList&lt;TheType&gt;(map.getKeys())</code> then it <i>would</i> exhibit that problem - because that constructor copies all the elements."},{"owner":{"account_id":193707,"reputation":34691,"user_id":435605,"accept_rate":45,"display_name":"AlikElzin-kilaka"},"score":0,"creation_date":1348415302,"post_id":9616782,"comment_id":16907722,"body_markdown":"@JonSkeet can you post a link to a better solution or just post an Answer? I don&#39;t see &#39;Guava&#39;s Iterables.getLast&#39; :(","body":"@JonSkeet can you post a link to a better solution or just post an Answer? I don&#39;t see &#39;Guava&#39;s Iterables.getLast&#39; :("},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1348465557,"post_id":9616782,"comment_id":16917455,"body_markdown":"@kilaka: If you search for Guava Iterables I&#39;m sure you&#39;ll find it.","body":"@kilaka: If you search for Guava Iterables I&#39;m sure you&#39;ll find it."},{"owner":{"account_id":116952,"reputation":21661,"user_id":306488,"accept_rate":78,"display_name":"lisak"},"score":1,"creation_date":1380555883,"post_id":9616782,"comment_id":28235910,"body_markdown":"As I see it, Iterables#getLast  calls Iterators#getLast method in case of LinkedHashSet, so that O(n) is guaranteed...  LinkedHashSet is not SortedSet","body":"As I see it, Iterables#getLast  calls Iterators#getLast method in case of LinkedHashSet, so that O(n) is guaranteed...  LinkedHashSet is not SortedSet"}],"tags":[],"owner":{"account_id":220789,"reputation":114430,"user_id":478399,"accept_rate":83,"display_name":"AlexR"},"comment_count":6,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1460029623,"creation_date":1331205338,"answer_id":9616782,"question_id":9616642,"body_markdown":"`keySet()` being executed on `LinkedHashMap` returns `LinkedHashSet` that is indeed `Set` but &quot;remembers&quot; the order of elements. \r\n\r\nYou can get the last element as following: \r\n\r\n    Map&lt;TheType&gt; map = .....\r\n    .................\r\n    TheType theLastKey = new ArrayList&lt;&gt;(map.keySet()).get(map.size() - 1)\r\n\r\n","title":"Getting last key from a LinkedHashMap","body":"<p><code>keySet()</code> being executed on <code>LinkedHashMap</code> returns <code>LinkedHashSet</code> that is indeed <code>Set</code> but \"remembers\" the order of elements. </p>\n\n<p>You can get the last element as following: </p>\n\n<pre><code>Map&lt;TheType&gt; map = .....\n.................\nTheType theLastKey = new ArrayList&lt;&gt;(map.keySet()).get(map.size() - 1)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3532342,"reputation":359,"user_id":2951479,"display_name":"DiTap"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1402588674,"creation_date":1402586323,"answer_id":24188059,"question_id":9616642,"body_markdown":"Answer from a different post helped me with this answer. Pls refer\r\nhttps://stackoverflow.com/questions/3973512/java-hashmap-how-to-get-the-first-keys-value for the original post.\r\n\r\n    Object myKey = myHashMap.keySet().toArray()[0];\r\n\r\nwhere i have replaced the 0\r\n\r\n    toArray()[0]  - (where 0 represents the first item in the keyset)\r\nwith the size of the keyset\r\n\r\n    toArray()[(keyset().size)-1] \r\n\r\nNote : Without the -1 at the end, you would get a ArrayIndexOutOfBoundsException.\r\n","title":"Getting last key from a LinkedHashMap","body":"<p>Answer from a different post helped me with this answer. Pls refer\n<a href=\"https://stackoverflow.com/questions/3973512/java-hashmap-how-to-get-the-first-keys-value\">Java HashMap: How to get a key and value by index?</a> for the original post.</p>\n\n<pre><code>Object myKey = myHashMap.keySet().toArray()[0];\n</code></pre>\n\n<p>where i have replaced the 0</p>\n\n<pre><code>toArray()[0]  - (where 0 represents the first item in the keyset)\n</code></pre>\n\n<p>with the size of the keyset</p>\n\n<pre><code>toArray()[(keyset().size)-1] \n</code></pre>\n\n<p>Note : Without the -1 at the end, you would get a ArrayIndexOutOfBoundsException.</p>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695229893,"creation_date":1691818910,"answer_id":76887909,"question_id":9616642,"body_markdown":"The last entry of a `LinkedHashMap` can be easily accessed using the [`lastEntry()`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedMap.html#lastEntry()) method which was added in Java 21.  The last key can be retrieved from this `Entry`.\r\n\r\n```lang-java\r\nLinkedHashMap&lt;String,String&gt; map = someDao.getMap(String input);\r\n\r\nEntry&lt;String,String&gt; lastValue = map.lastEntry();\r\nString lastKey = lastEntry.getKey();\r\n```\r\n","title":"Getting last key from a LinkedHashMap","body":"<p>The last entry of a <code>LinkedHashMap</code> can be easily accessed using the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedMap.html#lastEntry()\" rel=\"nofollow noreferrer\"><code>lastEntry()</code></a> method which was added in Java 21.  The last key can be retrieved from this <code>Entry</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>LinkedHashMap&lt;String,String&gt; map = someDao.getMap(String input);\n\nEntry&lt;String,String&gt; lastValue = map.lastEntry();\nString lastKey = lastEntry.getKey();\n</code></pre>\n"}],"owner":{"account_id":1001687,"reputation":12271,"user_id":1016403,"accept_rate":56,"display_name":"user1016403"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9976,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":9616782,"answer_count":3,"score":2,"last_activity_date":1695229893,"creation_date":1331204642,"question_id":9616642,"body_markdown":"I have `LinkedHashMap` returning from DB. From this map I need to get the last key. If I get all keys using `keySet` method it returns `Set` of keys but `Set` does not guarantee the order. I need to take exactly last key from the `LinkedHashMap` returned from DB. How can I do that ?\r\n\r\nBelow is the code how I get data from database.\r\n\r\n```lang-java\r\nLinkedHashMap&lt;String,String&gt; map = someDao.getMap(String input);\r\n```\r\n\r\nFrom this map I need to take last key.","title":"Getting last key from a LinkedHashMap","body":"<p>I have <code>LinkedHashMap</code> returning from DB. From this map I need to get the last key. If I get all keys using <code>keySet</code> method it returns <code>Set</code> of keys but <code>Set</code> does not guarantee the order. I need to take exactly last key from the <code>LinkedHashMap</code> returned from DB. How can I do that ?</p>\n<p>Below is the code how I get data from database.</p>\n<pre class=\"lang-java prettyprint-override\"><code>LinkedHashMap&lt;String,String&gt; map = someDao.getMap(String input);\n</code></pre>\n<p>From this map I need to take last key.</p>\n"},{"tags":["java","collections","linkedhashmap"],"comments":[{"owner":{"account_id":1750515,"reputation":6073,"user_id":1599699,"accept_rate":80,"display_name":"Andrew"},"score":0,"creation_date":1544467102,"post_id":7679819,"comment_id":94277791,"body_markdown":"From the docs: &quot;Note that insertion order is not affected if a key is re-inserted into the map. (A key k is reinserted into a map m if m.put(k, v) is invoked when m.containsKey(k) would return true immediately prior to the invocation.)&quot;","body":"From the docs: &quot;Note that insertion order is not affected if a key is re-inserted into the map. (A key k is reinserted into a map m if m.put(k, v) is invoked when m.containsKey(k) would return true immediately prior to the invocation.)&quot;"}],"answers":[{"comments":[{"owner":{"account_id":25300,"reputation":13294,"user_id":64967,"accept_rate":75,"display_name":"Dilum Ranatunga"},"score":7,"creation_date":1317934230,"post_id":7679873,"comment_id":9335695,"body_markdown":"Since `Map` doesn&#39;t define order of entries during iteration, a `LinkedHashMap` is an OO-wise correct implementation and refinement of the contract. The question being asked is whether the contract extends to insertion into the linked list somewhere other than tail. So the argument that Map is not supposed to allow control of insertion location doesn&#39;t hold.","body":"Since <code>Map</code> doesn&#39;t define order of entries during iteration, a <code>LinkedHashMap</code> is an OO-wise correct implementation and refinement of the contract. The question being asked is whether the contract extends to insertion into the linked list somewhere other than tail. So the argument that Map is not supposed to allow control of insertion location doesn&#39;t hold."},{"owner":{"account_id":116580,"reputation":118713,"user_id":305644,"accept_rate":75,"display_name":"hvgotcodes"},"score":1,"creation_date":1317934504,"post_id":7679873,"comment_id":9335783,"body_markdown":"@dilum, I completely disagree with your last sentence.  The OP said &quot;I have an ordered LinkedHashMap and i want to add element at specific index&quot;.  That makes no sense.  Map&#39;s dont have indexes, they have keys, which have completely different semantics.  Also, I didn&#39;t argue &quot;...that Map is not supposed to allow control of insertion location&quot;.  All I said is it doesn&#39;t use an index.  As a matter of fact, you control the insertion location via the key.","body":"@dilum, I completely disagree with your last sentence.  The OP said &quot;I have an ordered LinkedHashMap and i want to add element at specific index&quot;.  That makes no sense.  Map&#39;s dont have indexes, they have keys, which have completely different semantics.  Also, I didn&#39;t argue &quot;...that Map is not supposed to allow control of insertion location&quot;.  All I said is it doesn&#39;t use an index.  As a matter of fact, you control the insertion location via the key."},{"owner":{"account_id":25300,"reputation":13294,"user_id":64967,"accept_rate":75,"display_name":"Dilum Ranatunga"},"score":1,"creation_date":1317935379,"post_id":7679873,"comment_id":9336001,"body_markdown":"I see your point. When I read index, i didn&#39;t take it as a number as much as an location pointer (e.g other key, well known head/tail, or semi-consumed iterator.) At the same time, it is quite possible to have O(1) key-based lookups and O(log n) index based lookup / insertion using hash based composite structure.","body":"I see your point. When I read index, i didn&#39;t take it as a number as much as an location pointer (e.g other key, well known head/tail, or semi-consumed iterator.) At the same time, it is quite possible to have O(1) key-based lookups and O(log n) index based lookup / insertion using hash based composite structure."},{"owner":{"account_id":2840575,"reputation":686,"user_id":2465463,"accept_rate":100,"display_name":"minmaxavg"},"score":0,"creation_date":1381482599,"post_id":7679873,"comment_id":28606373,"body_markdown":"@hvgotcodes Maps are supposed to have no index, however LinkedHashMap supports both insertion-ordered indexes and keys, as what the javadoc describes. http://docs.oracle.com/javase/1.4.2/docs/api/java/util/LinkedHashMap.html","body":"@hvgotcodes Maps are supposed to have no index, however LinkedHashMap supports both insertion-ordered indexes and keys, as what the javadoc describes. <a href=\"http://docs.oracle.com/javase/1.4.2/docs/api/java/util/LinkedHashMap.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/1.4.2/docs/api/java/util/&hellip;</a>"}],"tags":[],"owner":{"account_id":116580,"reputation":118713,"user_id":305644,"accept_rate":75,"display_name":"hvgotcodes"},"comment_count":4,"down_vote_count":3,"up_vote_count":4,"is_accepted":false,"score":1,"last_activity_date":1317932130,"creation_date":1317931643,"answer_id":7679873,"question_id":7679819,"body_markdown":"It&#39;s a `Map`, it doesn&#39;t have indexes.  It has buckets.  The way it works is when you do a \r\n\r\n`put(key, val)`\r\n\r\nIt hashes the key to find out which bucket to put the val in.\r\n\r\nThe `LinkedHashMap` maintains a doubly linked list so it can record the order in which entries are inserted (or accessed, depending on how you instantiate the map).  There is no method on the API on the Map to insert a key,val pair at a certain index of the linked list, because that is not the purpose it serves.","title":"How to add element at specific index/position in LinkedHashMap?","body":"<p>It's a <code>Map</code>, it doesn't have indexes.  It has buckets.  The way it works is when you do a </p>\n\n<p><code>put(key, val)</code></p>\n\n<p>It hashes the key to find out which bucket to put the val in.</p>\n\n<p>The <code>LinkedHashMap</code> maintains a doubly linked list so it can record the order in which entries are inserted (or accessed, depending on how you instantiate the map).  There is no method on the API on the Map to insert a key,val pair at a certain index of the linked list, because that is not the purpose it serves.</p>\n"},{"comments":[{"owner":{"account_id":257029,"reputation":3131,"user_id":538160,"accept_rate":62,"display_name":"supernova"},"score":1,"creation_date":1317932220,"post_id":7679884,"comment_id":9335233,"body_markdown":"Tks. It means ONLY order which i can add an element is LAST place. As u mentioned it maintain order, so i assumed it will add any new element at the last index! Actually I just needed to add elements at FIRST or LAST place. Last place i can get , for to add at first place may be i can  add this to so other map at the end?","body":"Tks. It means ONLY order which i can add an element is LAST place. As u mentioned it maintain order, so i assumed it will add any new element at the last index! Actually I just needed to add elements at FIRST or LAST place. Last place i can get , for to add at first place may be i can  add this to so other map at the end?"},{"owner":{"account_id":940849,"reputation":9220,"user_id":968951,"display_name":"Tobias"},"score":1,"creation_date":1317932426,"post_id":7679884,"comment_id":9335273,"body_markdown":"You could create a new list with the new element and the the complete other list after with addAll(); but that is waste of memory and the map is not created for this purpose.","body":"You could create a new list with the new element and the the complete other list after with addAll(); but that is waste of memory and the map is not created for this purpose."},{"owner":{"account_id":257029,"reputation":3131,"user_id":538160,"accept_rate":62,"display_name":"supernova"},"score":0,"creation_date":1317932838,"post_id":7679884,"comment_id":9335375,"body_markdown":"Tks.That looks like the only solution with LinkedHashMap.","body":"Tks.That looks like the only solution with LinkedHashMap."},{"owner":{"account_id":316665,"reputation":87011,"user_id":632951,"accept_rate":83,"display_name":"Pacerier"},"score":1,"creation_date":1335306390,"post_id":7679884,"comment_id":13265619,"body_markdown":"@supernova You can always build your own, this is not a limitation of a LinkedHashMap, but a limitation of Java&#39;s LinkedHashMap implementation","body":"@supernova You can always build your own, this is not a limitation of a LinkedHashMap, but a limitation of Java&#39;s LinkedHashMap implementation"}],"tags":[],"owner":{"account_id":940849,"reputation":9220,"user_id":968951,"display_name":"Tobias"},"comment_count":4,"down_vote_count":0,"up_vote_count":27,"is_accepted":true,"score":27,"last_activity_date":1477143432,"creation_date":1317931692,"answer_id":7679884,"question_id":7679819,"body_markdown":"You can not change the order. It is `insert-order` (by default) or `access-order` with this constructor:\r\n\r\n&gt; `public LinkedHashMap(int initialCapacity, float loadFactor, boolean accessOrder)`\r\n&gt; \r\n&gt; * Constructs an empty LinkedHashMap instance with the specified initial capacity, load factor and ordering mode.\r\n&gt; \r\n&gt; * Parameters:\r\n&gt;         initialCapacity - the initial capacity\r\n&gt;         loadFactor - the load factor\r\n&gt;         accessOrder - the ordering mode - true for access-order, false for insertion-order\r\n&gt; \r\n&gt; * Throws:\r\n&gt;         IllegalArgumentException - if the initial capacity is negative or the load factor is nonpositive\r\n\r\nSee: [`LinkedHashMap`](http://download.oracle.com/javase/6/docs/api/java/util/LinkedHashMap.html#LinkedHashMap%28int,%20float,%20boolean%29)","title":"How to add element at specific index/position in LinkedHashMap?","body":"<p>You can not change the order. It is <code>insert-order</code> (by default) or <code>access-order</code> with this constructor:</p>\n\n<blockquote>\n  <p><code>public LinkedHashMap(int initialCapacity, float loadFactor, boolean accessOrder)</code></p>\n  \n  <ul>\n  <li><p>Constructs an empty LinkedHashMap instance with the specified initial capacity, load factor and ordering mode.</p></li>\n  <li><p>Parameters:\n      initialCapacity - the initial capacity\n      loadFactor - the load factor\n      accessOrder - the ordering mode - true for access-order, false for insertion-order</p></li>\n  <li><p>Throws:\n      IllegalArgumentException - if the initial capacity is negative or the load factor is nonpositive</p></li>\n  </ul>\n</blockquote>\n\n<p>See: <a href=\"http://download.oracle.com/javase/6/docs/api/java/util/LinkedHashMap.html#LinkedHashMap%28int,%20float,%20boolean%29\" rel=\"noreferrer\"><code>LinkedHashMap</code></a></p>\n"},{"tags":[],"owner":{"account_id":1706910,"reputation":463,"user_id":1565796,"accept_rate":62,"display_name":"rock_walker"},"comment_count":0,"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1351602009,"creation_date":1351602009,"answer_id":13139544,"question_id":7679819,"body_markdown":"Just divide you `LinkedHashMap` on 2 arrays. Make first array with size `index - 1` and put at the end new `Entry`. Then fill first array with entries from the second one","title":"How to add element at specific index/position in LinkedHashMap?","body":"<p>Just divide you <code>LinkedHashMap</code> on 2 arrays. Make first array with size <code>index - 1</code> and put at the end new <code>Entry</code>. Then fill first array with entries from the second one</p>\n"},{"tags":[],"owner":{"account_id":513732,"reputation":657,"user_id":1118562,"display_name":"tamalet"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1389640316,"creation_date":1389387460,"answer_id":21054277,"question_id":7679819,"body_markdown":"    public static &lt;K, V&gt; void add(LinkedHashMap&lt;K, V&gt; map, int index, K key, V value) {\r\n      assert (map != null);\r\n      assert !map.containsKey(key);\r\n      assert (index &gt;= 0) &amp;&amp; (index &lt; map.size());\r\n\r\n      int i = 0;\r\n      List&lt;Entry&lt;K, V&gt;&gt; rest = new ArrayList&lt;Entry&lt;K, V&gt;&gt;();\r\n      for (Entry&lt;K, V&gt; entry : map.entrySet()) {\r\n        if (i++ &gt;= index) {\r\n          rest.add(entry);\r\n        }\r\n      }\r\n      map.put(key, value);\r\n      for (int j = 0; j &lt; rest.size(); j++) {\r\n        Entry&lt;K, V&gt; entry = rest.get(j);\r\n        map.remove(entry.getKey());\r\n        map.put(entry.getKey(), entry.getValue());\r\n      }\r\n    }\r\n","title":"How to add element at specific index/position in LinkedHashMap?","body":"<pre><code>public static &lt;K, V&gt; void add(LinkedHashMap&lt;K, V&gt; map, int index, K key, V value) {\n  assert (map != null);\n  assert !map.containsKey(key);\n  assert (index &gt;= 0) &amp;&amp; (index &lt; map.size());\n\n  int i = 0;\n  List&lt;Entry&lt;K, V&gt;&gt; rest = new ArrayList&lt;Entry&lt;K, V&gt;&gt;();\n  for (Entry&lt;K, V&gt; entry : map.entrySet()) {\n    if (i++ &gt;= index) {\n      rest.add(entry);\n    }\n  }\n  map.put(key, value);\n  for (int j = 0; j &lt; rest.size(); j++) {\n    Entry&lt;K, V&gt; entry = rest.get(j);\n    map.remove(entry.getKey());\n    map.put(entry.getKey(), entry.getValue());\n  }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1113119,"reputation":833,"user_id":1103153,"display_name":"Omaraf"},"score":0,"creation_date":1501744354,"post_id":27214791,"comment_id":77914872,"body_markdown":"Be aware that using this method creates a copy of the objects in the map. Something might break if you are using this objects elsewhere.","body":"Be aware that using this method creates a copy of the objects in the map. Something might break if you are using this objects elsewhere."},{"owner":{"account_id":5981952,"reputation":1949,"user_id":5320300,"accept_rate":76,"display_name":"Simon Baars"},"score":1,"creation_date":1507286318,"post_id":27214791,"comment_id":80159271,"body_markdown":"Be aware of the memory overhead created by doing this. Best to avoid using this.","body":"Be aware of the memory overhead created by doing this. Best to avoid using this."},{"owner":{"account_id":297677,"reputation":3564,"user_id":603314,"accept_rate":88,"display_name":"bugs_"},"score":0,"creation_date":1627291499,"post_id":27214791,"comment_id":121107538,"body_markdown":"@Omaraf it creates shallow copy of the map. In the end &quot;map&quot; is the same object and keys and values are the same objects as well. If map have not many keys memory overhead will not be huge. But of cause - if you can - use another data structure for this :)","body":"@Omaraf it creates shallow copy of the map. In the end &quot;map&quot; is the same object and keys and values are the same objects as well. If map have not many keys memory overhead will not be huge. But of cause - if you can - use another data structure for this :)"}],"tags":[],"owner":{"account_id":4232920,"reputation":1116,"user_id":3464870,"accept_rate":100,"display_name":"gyurix"},"comment_count":3,"down_vote_count":0,"up_vote_count":31,"is_accepted":false,"score":31,"last_activity_date":1629354921,"creation_date":1417360938,"answer_id":27214791,"question_id":7679819,"body_markdown":"You could do this element adding to 1. or last place:\r\n\r\n\r\n**Adding to last place ►** You just need to remove the previous entry from the map like this:\r\n\r\n    map.remove(key);\r\n    map.put(key,value);\r\n\r\n**Adding to first place ►** It&#39;s a bit more complicated, you need to clone the map, clear it, put the 1. value to it, and put the new map to it, like this:\r\n\r\nI&#39;m using maps with String keys and Group (my custom class) values:\r\n\r\n    LinkedHashMap&lt;String, Group&gt; newMap=(LinkedHashMap&lt;String, Group&gt;) map.clone();\r\n    map.clear();\r\n    map.put(key, value);\r\n    map.putAll(newMap);\r\n\r\nAs you see, with these methods you can add unlimited amount of things to the begin and to the end of the map.","title":"How to add element at specific index/position in LinkedHashMap?","body":"<p>You could do this element adding to 1. or last place:</p>\n<p><strong>Adding to last place ►</strong> You just need to remove the previous entry from the map like this:</p>\n<pre><code>map.remove(key);\nmap.put(key,value);\n</code></pre>\n<p><strong>Adding to first place ►</strong> It's a bit more complicated, you need to clone the map, clear it, put the 1. value to it, and put the new map to it, like this:</p>\n<p>I'm using maps with String keys and Group (my custom class) values:</p>\n<pre><code>LinkedHashMap&lt;String, Group&gt; newMap=(LinkedHashMap&lt;String, Group&gt;) map.clone();\nmap.clear();\nmap.put(key, value);\nmap.putAll(newMap);\n</code></pre>\n<p>As you see, with these methods you can add unlimited amount of things to the begin and to the end of the map.</p>\n"},{"tags":[],"owner":{"account_id":2612960,"reputation":13092,"user_id":2378217,"accept_rate":43,"display_name":"Manish Kumar Sharma"},"comment_count":0,"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1497184626,"creation_date":1497184626,"answer_id":44483952,"question_id":7679819,"body_markdown":"Apache Commons solution : `ListOrderedMap`\r\n-----------------------\r\n\r\nSince the JDK&#39;s `LinkedHashMap` ensures only insertion order retrieval, in case you we want to insert at an index, we can use alternatively Apache Commons&#39; `ListOrderedMap`. It does it as it sounds - by having a list to maintain the order of insertion with the corresponding index and a normal map to insert as we generally do. Here is what the [docs][1] say:\r\n\r\n&gt;     public class ListOrderedMap&lt;K,V&gt;\r\n&gt;     extends AbstractMapDecorator&lt;K,V&gt;\r\n&gt;     implements OrderedMap&lt;K,V&gt;, Serializable\r\n&gt; \r\n&gt; Decorates a `Map` to ensure that the order of addition is retained\r\n&gt; using a List to maintain order.\r\n&gt; \r\n&gt; The order will be used via the iterators and `toArray` methods on the\r\n&gt; views. The order is also returned by the `MapIterator`. The\r\n&gt; `orderedMapIterator()` method accesses an iterator that can iterate\r\n&gt; both forwards and backwards through the map. In addition,\r\n&gt; non-interface methods are provided to access the map by index.\r\n&gt; \r\n&gt; If an object is added to the Map for a second time, it will remain in\r\n&gt; the original position in the iteration.\r\n&gt; \r\n&gt; Note that `ListOrderedMap` is not synchronized and is not thread-safe.\r\n&gt; If you wish to use this map from multiple threads concurrently, you\r\n&gt; must use appropriate synchronization. The simplest approach is to wrap\r\n&gt; this map using `Collections.synchronizedMap(Map)`. This class may\r\n&gt; throw exceptions when accessed by concurrent threads without\r\n&gt; synchronization.\r\n&gt; \r\n&gt; Note that `ListOrderedMap` doesn&#39;t work with `IdentityHashMap`,\r\n&gt; `CaseInsensitiveMap`, or similar maps that violate the general\r\n&gt; contract of `Map`. The `ListOrderedMap` (or, more precisely, the\r\n&gt; underlying `List`) is relying on `equals()`. This is fine, as long as\r\n&gt; the decorated `Map` is also based on `equals()`, and `hashCode()`,\r\n&gt; which `IdentityHashMap`, and `CaseInsensitiveMap` don&#39;t: The former\r\n&gt; uses `==`, and the latter uses `equals()` on a lower-cased key.\r\n\r\nHere is its implementation for adding to a position:\r\n\r\n            /**\r\n    428     * Puts a key-value mapping into the map at the specified index.\r\n    429     * &lt;p&gt;\r\n    430     * If the map already contains the key, then the original mapping\r\n    431     * is removed and the new mapping added at the specified index.\r\n    432     * The remove may change the effect of the index. The index is\r\n    433     * always calculated relative to the original state of the map.\r\n    434     * &lt;p&gt;\r\n    435     * Thus the steps are: (1) remove the existing key-value mapping,\r\n    436     * then (2) insert the new key-value mapping at the position it\r\n    437     * would have been inserted had the remove not occurred.\r\n    438     *\r\n    439     * @param index  the index at which the mapping should be inserted\r\n    440     * @param key  the key\r\n    441     * @param value  the value\r\n    442     * @return the value previously mapped to the key\r\n    443     * @throws IndexOutOfBoundsException if the index is out of range [0, size]\r\n    444     * @since 3.2\r\n    445     */\r\n    446    public V put(int index, final K key, final V value) {\r\n    447        if (index &lt; 0 || index &gt; insertOrder.size()) {\r\n    448            throw new IndexOutOfBoundsException(&quot;Index: &quot; + index + &quot;, Size: &quot; + insertOrder.size());\r\n    449        }\r\n    450\r\n    451        final Map&lt;K, V&gt; m = decorated();\r\n    452        if (m.containsKey(key)) {\r\n    453            final V result = m.remove(key);\r\n    454            final int pos = insertOrder.indexOf(key);\r\n    455            insertOrder.remove(pos);\r\n    456            if (pos &lt; index) {\r\n    457                index--;\r\n    458            }\r\n    459            insertOrder.add(index, key);\r\n    460            m.put(key, value);\r\n    461            return result;\r\n    462        }\r\n    463        insertOrder.add(index, key);\r\n    464        m.put(key, value);\r\n    465        return null;\r\n    466    }\r\n\r\n\r\n  [1]: https://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/map/ListOrderedMap.html#put(int,%20K,%20V)","title":"How to add element at specific index/position in LinkedHashMap?","body":"<h2>Apache Commons solution : <code>ListOrderedMap</code></h2>\n\n<p>Since the JDK's <code>LinkedHashMap</code> ensures only insertion order retrieval, in case you we want to insert at an index, we can use alternatively Apache Commons' <code>ListOrderedMap</code>. It does it as it sounds - by having a list to maintain the order of insertion with the corresponding index and a normal map to insert as we generally do. Here is what the <a href=\"https://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/map/ListOrderedMap.html#put(int,%20K,%20V)\" rel=\"noreferrer\">docs</a> say:</p>\n\n<blockquote>\n<pre><code>public class ListOrderedMap&lt;K,V&gt;\nextends AbstractMapDecorator&lt;K,V&gt;\nimplements OrderedMap&lt;K,V&gt;, Serializable\n</code></pre>\n  \n  <p>Decorates a <code>Map</code> to ensure that the order of addition is retained\n  using a List to maintain order.</p>\n  \n  <p>The order will be used via the iterators and <code>toArray</code> methods on the\n  views. The order is also returned by the <code>MapIterator</code>. The\n  <code>orderedMapIterator()</code> method accesses an iterator that can iterate\n  both forwards and backwards through the map. In addition,\n  non-interface methods are provided to access the map by index.</p>\n  \n  <p>If an object is added to the Map for a second time, it will remain in\n  the original position in the iteration.</p>\n  \n  <p>Note that <code>ListOrderedMap</code> is not synchronized and is not thread-safe.\n  If you wish to use this map from multiple threads concurrently, you\n  must use appropriate synchronization. The simplest approach is to wrap\n  this map using <code>Collections.synchronizedMap(Map)</code>. This class may\n  throw exceptions when accessed by concurrent threads without\n  synchronization.</p>\n  \n  <p>Note that <code>ListOrderedMap</code> doesn't work with <code>IdentityHashMap</code>,\n  <code>CaseInsensitiveMap</code>, or similar maps that violate the general\n  contract of <code>Map</code>. The <code>ListOrderedMap</code> (or, more precisely, the\n  underlying <code>List</code>) is relying on <code>equals()</code>. This is fine, as long as\n  the decorated <code>Map</code> is also based on <code>equals()</code>, and <code>hashCode()</code>,\n  which <code>IdentityHashMap</code>, and <code>CaseInsensitiveMap</code> don't: The former\n  uses <code>==</code>, and the latter uses <code>equals()</code> on a lower-cased key.</p>\n</blockquote>\n\n<p>Here is its implementation for adding to a position:</p>\n\n<pre><code>        /**\n428     * Puts a key-value mapping into the map at the specified index.\n429     * &lt;p&gt;\n430     * If the map already contains the key, then the original mapping\n431     * is removed and the new mapping added at the specified index.\n432     * The remove may change the effect of the index. The index is\n433     * always calculated relative to the original state of the map.\n434     * &lt;p&gt;\n435     * Thus the steps are: (1) remove the existing key-value mapping,\n436     * then (2) insert the new key-value mapping at the position it\n437     * would have been inserted had the remove not occurred.\n438     *\n439     * @param index  the index at which the mapping should be inserted\n440     * @param key  the key\n441     * @param value  the value\n442     * @return the value previously mapped to the key\n443     * @throws IndexOutOfBoundsException if the index is out of range [0, size]\n444     * @since 3.2\n445     */\n446    public V put(int index, final K key, final V value) {\n447        if (index &lt; 0 || index &gt; insertOrder.size()) {\n448            throw new IndexOutOfBoundsException(\"Index: \" + index + \", Size: \" + insertOrder.size());\n449        }\n450\n451        final Map&lt;K, V&gt; m = decorated();\n452        if (m.containsKey(key)) {\n453            final V result = m.remove(key);\n454            final int pos = insertOrder.indexOf(key);\n455            insertOrder.remove(pos);\n456            if (pos &lt; index) {\n457                index--;\n458            }\n459            insertOrder.add(index, key);\n460            m.put(key, value);\n461            return result;\n462        }\n463        insertOrder.add(index, key);\n464        m.put(key, value);\n465        return null;\n466    }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3578561,"reputation":2945,"user_id":2987273,"display_name":"Alexander"},"score":0,"creation_date":1525210377,"post_id":50123835,"comment_id":87266407,"body_markdown":"That&#39;s a bit long for such a simple question.","body":"That&#39;s a bit long for such a simple question."},{"owner":{"account_id":10753682,"reputation":13,"user_id":7912222,"display_name":"Nauman Aejaz"},"score":0,"creation_date":1525321414,"post_id":50123835,"comment_id":87311981,"body_markdown":"Agreed. I had the same problem and didn&#39;t find a better way.","body":"Agreed. I had the same problem and didn&#39;t find a better way."}],"tags":[],"owner":{"account_id":10753682,"reputation":13,"user_id":7912222,"display_name":"Nauman Aejaz"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1525208768,"creation_date":1525208768,"answer_id":50123835,"question_id":7679819,"body_markdown":"    ...\r\n\r\n    LinkedHashMap&lt;String, StringExtension&gt; map = new LinkedHashMap&lt;&gt;();\r\n\r\n    map.put(&quot;4&quot;, new StringExtension(&quot;4&quot;, &quot;a&quot;));\r\n    map.put(&quot;1&quot;, new StringExtension(&quot;1&quot;, &quot;b&quot;));\r\n    map.put(&quot;3&quot;, new StringExtension(&quot;3&quot;, &quot;c&quot;));\r\n    map.put(&quot;2&quot;, new StringExtension(&quot;2&quot;, &quot;d&quot;));\r\n    \r\n    for (Map.Entry&lt;String, StringExtension&gt; entry : map.entrySet()) {\r\n        Log.e(&quot;Test&quot;, &quot;&quot; + entry.getKey() + &quot; - &quot;+ entry.getValue().value);\r\n    }\r\n    \r\n    \r\n    Collection&lt;StringExtension&gt; temp = new ArrayList&lt;&gt;(map.values());\r\n    StringExtension value = map.remove(&quot;3&quot;);\r\n    map.clear();\r\n    map.put(value.key, value);\r\n    \r\n    for (StringExtension val : temp) {\r\n        map.put(val.key, val);\r\n    }\r\n    \r\n    Log.e(&quot;Test&quot;, &quot;---&quot;);\r\n    \r\n    for (Map.Entry&lt;String, StringExtension&gt; entry : map.entrySet()) {\r\n        Log.e(&quot;Test&quot;, &quot;&quot; + entry.getKey() + &quot; - &quot;+ entry.getValue().value);\r\n    }\r\n    \r\n    ...\r\n\r\n    private class StringExtension\r\n    {\r\n        String key;\r\n        String value;\r\n    \r\n        public StringExtension(String key, String value) {\r\n            this.key = key;\r\n            this.value = value;\r\n        }\r\n    }\r\n\r\n","title":"How to add element at specific index/position in LinkedHashMap?","body":"<pre><code>...\n\nLinkedHashMap&lt;String, StringExtension&gt; map = new LinkedHashMap&lt;&gt;();\n\nmap.put(\"4\", new StringExtension(\"4\", \"a\"));\nmap.put(\"1\", new StringExtension(\"1\", \"b\"));\nmap.put(\"3\", new StringExtension(\"3\", \"c\"));\nmap.put(\"2\", new StringExtension(\"2\", \"d\"));\n\nfor (Map.Entry&lt;String, StringExtension&gt; entry : map.entrySet()) {\n    Log.e(\"Test\", \"\" + entry.getKey() + \" - \"+ entry.getValue().value);\n}\n\n\nCollection&lt;StringExtension&gt; temp = new ArrayList&lt;&gt;(map.values());\nStringExtension value = map.remove(\"3\");\nmap.clear();\nmap.put(value.key, value);\n\nfor (StringExtension val : temp) {\n    map.put(val.key, val);\n}\n\nLog.e(\"Test\", \"---\");\n\nfor (Map.Entry&lt;String, StringExtension&gt; entry : map.entrySet()) {\n    Log.e(\"Test\", \"\" + entry.getKey() + \" - \"+ entry.getValue().value);\n}\n\n...\n\nprivate class StringExtension\n{\n    String key;\n    String value;\n\n    public StringExtension(String key, String value) {\n        this.key = key;\n        this.value = value;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5984797,"reputation":14686,"user_id":5730321,"accept_rate":69,"display_name":"Leo DroidCoder"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1605987349,"creation_date":1605987349,"answer_id":64947263,"question_id":7679819,"body_markdown":"As suggested in other answers, it is certainly not recommended as by inserting a value you will go against the system.\r\n\r\n**Why?**  \r\nBecause LinkedHashMap is backed by a HashMap and a LinkedList.  \r\nThe last is used in order to preserve insertion order.  \r\nObviously, LinkedList is pretty good in insertion to the head and to the tale (doubly-linked). \r\nIt provides O(1) time complexity for this operation.   \r\nHowever, it is very slow in insertion to a certain position as in order to find this position you got to iterate all over the list, which in the worst case will take O(n) what is quite expensive especially for large datasets.\r\n\r\n\r\nI personally do not recommend it as it is quite inefficient, \r\nbut if you understand the cons and it is what you want,  \r\nyou may use this extension function in order to **insert a key-pair onto a certain position**.\r\n\r\n    fun &lt;K, V&gt; LinkedHashMap&lt;K, V&gt;.insertAtIndex(key: K, value: V, index: Int) {\r\n        if (index &lt; 0) {\r\n            throw IllegalArgumentException(&quot;Cannot insert into negative index&quot;)\r\n        }\r\n        if (index &gt; size) {\r\n            put(key, value)\r\n            return\r\n        }\r\n        val holderMap = LinkedHashMap&lt;K, V&gt;(size + 1)\r\n        entries.forEachIndexed { i, entry-&gt;\r\n            if (i == index) {\r\n                holderMap.put(key, value)\r\n            }\r\n            holderMap.put(entry.key, entry.value)\r\n        }\r\n        clear()\r\n        putAll(holderMap)\r\n    }\r\n\r\nIt will take O(n) time and  O(n) space.\r\n","title":"How to add element at specific index/position in LinkedHashMap?","body":"<p>As suggested in other answers, it is certainly not recommended as by inserting a value you will go against the system.</p>\n<p><strong>Why?</strong><br />\nBecause LinkedHashMap is backed by a HashMap and a LinkedList.<br />\nThe last is used in order to preserve insertion order.<br />\nObviously, LinkedList is pretty good in insertion to the head and to the tale (doubly-linked).\nIt provides O(1) time complexity for this operation.<br />\nHowever, it is very slow in insertion to a certain position as in order to find this position you got to iterate all over the list, which in the worst case will take O(n) what is quite expensive especially for large datasets.</p>\n<p>I personally do not recommend it as it is quite inefficient,\nbut if you understand the cons and it is what you want,<br />\nyou may use this extension function in order to <strong>insert a key-pair onto a certain position</strong>.</p>\n<pre><code>fun &lt;K, V&gt; LinkedHashMap&lt;K, V&gt;.insertAtIndex(key: K, value: V, index: Int) {\n    if (index &lt; 0) {\n        throw IllegalArgumentException(&quot;Cannot insert into negative index&quot;)\n    }\n    if (index &gt; size) {\n        put(key, value)\n        return\n    }\n    val holderMap = LinkedHashMap&lt;K, V&gt;(size + 1)\n    entries.forEachIndexed { i, entry-&gt;\n        if (i == index) {\n            holderMap.put(key, value)\n        }\n        holderMap.put(entry.key, entry.value)\n    }\n    clear()\n    putAll(holderMap)\n}\n</code></pre>\n<p>It will take O(n) time and  O(n) space.</p>\n"},{"tags":[],"owner":{"account_id":9878926,"reputation":119,"user_id":7315640,"display_name":"Moz"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1616769588,"creation_date":1616769588,"answer_id":66819012,"question_id":7679819,"body_markdown":"Let&#39;s assume the data being applied on the `Map` comes from a `List` (Collection), then you should create a reversed *loop* that starts reading from the end of that list till it gets to the first like this:\r\n`for (int key = collection.size()-1; key &gt; map.size(); key--) {\r\n    Data data = collection.get(key);\r\n    map.put(key, data);\r\n }`","title":"How to add element at specific index/position in LinkedHashMap?","body":"<p>Let's assume the data being applied on the <code>Map</code> comes from a <code>List</code> (Collection), then you should create a reversed <em>loop</em> that starts reading from the end of that list till it gets to the first like this:\n<code>for (int key = collection.size()-1; key &gt; map.size(); key--) { Data data = collection.get(key); map.put(key, data); }</code></p>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695229845,"creation_date":1691820920,"answer_id":76888014,"question_id":7679819,"body_markdown":"An element can be added as the first or last element using the [`putFirst()`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedMap.html#putFirst(K,V)) and [`putLast()`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedMap.html#putLast(K,V)) methods which were added to `LinkedHashMap` in Java 21.\r\n\r\n```lang-java\r\nLinkedHashMap&lt;String, Integer&gt; linkedHashMap = // ...\r\n\r\nlinkedHashMap.put(&quot;A&quot;, 1);\r\nlinkedHashMap.putLast(&quot;B&quot;, 2);\r\nlinkedHashMap.putFirst(&quot;C&quot;, 3);\r\n\r\n// linkedHashMap is now [C=3, A=1, B=2]\r\n```\r\n","title":"How to add element at specific index/position in LinkedHashMap?","body":"<p>An element can be added as the first or last element using the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedMap.html#putFirst(K,V)\" rel=\"nofollow noreferrer\"><code>putFirst()</code></a> and <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedMap.html#putLast(K,V)\" rel=\"nofollow noreferrer\"><code>putLast()</code></a> methods which were added to <code>LinkedHashMap</code> in Java 21.</p>\n<pre class=\"lang-java prettyprint-override\"><code>LinkedHashMap&lt;String, Integer&gt; linkedHashMap = // ...\n\nlinkedHashMap.put(&quot;A&quot;, 1);\nlinkedHashMap.putLast(&quot;B&quot;, 2);\nlinkedHashMap.putFirst(&quot;C&quot;, 3);\n\n// linkedHashMap is now [C=3, A=1, B=2]\n</code></pre>\n"}],"owner":{"account_id":257029,"reputation":3131,"user_id":538160,"accept_rate":62,"display_name":"supernova"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":114394,"favorite_count":0,"down_vote_count":0,"up_vote_count":64,"accepted_answer_id":7679884,"answer_count":10,"score":64,"last_activity_date":1695229845,"creation_date":1317931317,"question_id":7679819,"body_markdown":"I have an ordered LinkedHashMap  and i want to add element at specific index , say at first place or last place in the map.\r\nHow can i add element in LinkedHashMap at an specific position?\r\n\r\nEven if I could add an element to FIRST or LAST position in LinkedHashMap would help! ","title":"How to add element at specific index/position in LinkedHashMap?","body":"<p>I have an ordered LinkedHashMap  and i want to add element at specific index , say at first place or last place in the map.\nHow can i add element in LinkedHashMap at an specific position?</p>\n\n<p>Even if I could add an element to FIRST or LAST position in LinkedHashMap would help! </p>\n"},{"tags":["java","linkedhashset"],"answers":[{"comments":[{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1365461703,"post_id":15890401,"comment_id":22626297,"body_markdown":"+1 - The analysis is spot on.  The elements have to be removed from the hash table individually, and that makes this O(N) ... no matter how you deal with the &quot;linking&quot; or &quot;ordering&quot; requirement.","body":"+1 - The analysis is spot on.  The elements have to be removed from the hash table individually, and that makes this O(N) ... no matter how you deal with the &quot;linking&quot; or &quot;ordering&quot; requirement."},{"owner":{"account_id":1196241,"reputation":1200,"user_id":1167918,"accept_rate":72,"display_name":"Jazib"},"score":0,"creation_date":1365523708,"post_id":15890401,"comment_id":22654038,"body_markdown":"Actually I have no issue with the O(n) as my data is not that large to worry about it. The real problem I&#39;m facing is that LinkedHashSet does not implements get(index) function. Neither does it tells me which is the last element. So, I can&#39;t really traverse the list as u told.","body":"Actually I have no issue with the O(n) as my data is not that large to worry about it. The real problem I&#39;m facing is that LinkedHashSet does not implements get(index) function. Neither does it tells me which is the last element. So, I can&#39;t really traverse the list as u told."},{"owner":{"account_id":197752,"reputation":2956,"user_id":815977,"accept_rate":100,"display_name":"Anil Vaitla"},"score":0,"creation_date":1365603892,"post_id":15890401,"comment_id":22690712,"body_markdown":"It may just be easiest to write your own class which wraps the hashset and linkedlist data structure, so that you can expose exactly what methods you want to use on the underlying data structures.","body":"It may just be easiest to write your own class which wraps the hashset and linkedlist data structure, so that you can expose exactly what methods you want to use on the underlying data structures."}],"tags":[],"owner":{"account_id":197752,"reputation":2956,"user_id":815977,"accept_rate":100,"display_name":"Anil Vaitla"},"comment_count":3,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1365461943,"creation_date":1365461381,"answer_id":15890401,"question_id":15890248,"body_markdown":"I think you may need to use an iterator to do the removal if you are using a LinkedHashSet. That is to say find the element, then keep removing until you get to the tail. This will be O(n), but even if you wrote your own LinkedHashSet (with a doubly linked list and hashset) you would have access to the raw linking structure so that you could cut the linked list in O(1), but you would still need to remove all elements that you just cut from the linked list from the HashSet which is where the O(n) cost would arise again.\r\n\r\nSo in summary, remove the element, then keep an iterator to that element and continue to walk down removing elements until you get to the end. I&#39;m not sure if LinkedHashSet exposes the required calls, but you can probably figure that out.","title":"Java LinkedHashSet remove some elements from the end","body":"<p>I think you may need to use an iterator to do the removal if you are using a LinkedHashSet. That is to say find the element, then keep removing until you get to the tail. This will be O(n), but even if you wrote your own LinkedHashSet (with a doubly linked list and hashset) you would have access to the raw linking structure so that you could cut the linked list in O(1), but you would still need to remove all elements that you just cut from the linked list from the HashSet which is where the O(n) cost would arise again.</p>\n\n<p>So in summary, remove the element, then keep an iterator to that element and continue to walk down removing elements until you get to the end. I'm not sure if LinkedHashSet exposes the required calls, but you can probably figure that out.</p>\n"},{"comments":[{"owner":{"account_id":916642,"reputation":15473,"user_id":949300,"accept_rate":65,"display_name":"user949300"},"score":0,"creation_date":1365464512,"post_id":15890637,"comment_id":22626996,"body_markdown":"In this example there is no &quot;map&quot;, just values.  That said, I agree with your analysis that this is likely to be O(N) no matter what...","body":"In this example there is no &quot;map&quot;, just values.  That said, I agree with your analysis that this is likely to be O(N) no matter what..."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1365479487,"post_id":15890637,"comment_id":22630532,"body_markdown":"@user949300 - True ... sort of.  However, there is conceptually a second data structure.  And in the standard HashSet implementation, the set is implemented using HashMap.  See http://www.docjar.com/html/api/java/util/HashSet.java.html ... line 102.","body":"@user949300 - True ... sort of.  However, there is conceptually a second data structure.  And in the standard HashSet implementation, the set is implemented using HashMap.  See <a href=\"http://www.docjar.com/html/api/java/util/HashSet.java.html\" rel=\"nofollow noreferrer\">docjar.com/html/api/java/util/HashSet.java.html</a> ... line 102."}],"tags":[],"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1365479906,"creation_date":1365462587,"answer_id":15890637,"question_id":15890248,"body_markdown":"The basic problem here is that you have to maintain two data structures, a &quot;map&quot; one representing the key / value mapping, and a &quot;list&quot; other representing the insertion order.\r\n\r\nThere are &quot;map&quot; and &quot;list&quot; organizations that offer fast removal of a elements after a given point; e.g. ordered trees of various kinds and both array and chain-based lists (modulo the cost of locating the point.)\r\n\r\nHowever, it seems impossible to remove N elements from the two data structures in better than `O(N)`.  You have to visit all of the elements being removed to remove them from the 2nd data structure.  (In fact, I suspect one could prove this mathematically ...)\r\n\r\nIn short, there is no data structure that has better complexity than what you are currently using.\r\n\r\nThe area where it is possible to improve performance (with a custom collection class!) is in avoiding an explicit use of an iterator.  Using an iterator and the standard iterator API, the cost is `O(N)` on the total number of elements in the data structure.  You could make this `O(N)` on the number of elements removed ... if the hash entry nodes also had next/prev links for the sequence.","title":"Java LinkedHashSet remove some elements from the end","body":"<p>The basic problem here is that you have to maintain two data structures, a \"map\" one representing the key / value mapping, and a \"list\" other representing the insertion order.</p>\n\n<p>There are \"map\" and \"list\" organizations that offer fast removal of a elements after a given point; e.g. ordered trees of various kinds and both array and chain-based lists (modulo the cost of locating the point.)</p>\n\n<p>However, it seems impossible to remove N elements from the two data structures in better than <code>O(N)</code>.  You have to visit all of the elements being removed to remove them from the 2nd data structure.  (In fact, I suspect one could prove this mathematically ...)</p>\n\n<p>In short, there is no data structure that has better complexity than what you are currently using.</p>\n\n<p>The area where it is possible to improve performance (with a custom collection class!) is in avoiding an explicit use of an iterator.  Using an iterator and the standard iterator API, the cost is <code>O(N)</code> on the total number of elements in the data structure.  You could make this <code>O(N)</code> on the number of elements removed ... if the hash entry nodes also had next/prev links for the sequence.</p>\n"},{"comments":[{"owner":{"account_id":1196241,"reputation":1200,"user_id":1167918,"accept_rate":72,"display_name":"Jazib"},"score":0,"creation_date":1365523911,"post_id":15890921,"comment_id":22654149,"body_markdown":"you mean to say I should write my own logic to stop duplicating? I can do that, but from learning perspective can u please elaborate in which other scenario one uses the LinkedHashSet if not this?","body":"you mean to say I should write my own logic to stop duplicating? I can do that, but from learning perspective can u please elaborate in which other scenario one uses the LinkedHashSet if not this?"},{"owner":{"account_id":916642,"reputation":15473,"user_id":949300,"accept_rate":65,"display_name":"user949300"},"score":0,"creation_date":1365534084,"post_id":15890921,"comment_id":22659874,"body_markdown":"Not necessarily should, but could - an ArrayList can be more efficient depending on what is happening.  LinkedHashSet is useful if you need to maintain the order in which items were added.  I usually use HashSet (don&#39;t care about order) or TreeSet (use the natural order, e.g. alphabetical of the elements).","body":"Not necessarily should, but could - an ArrayList can be more efficient depending on what is happening.  LinkedHashSet is useful if you need to maintain the order in which items were added.  I usually use HashSet (don&#39;t care about order) or TreeSet (use the natural order, e.g. alphabetical of the elements)."}],"tags":[],"owner":{"account_id":916642,"reputation":15473,"user_id":949300,"accept_rate":65,"display_name":"user949300"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1365464425,"creation_date":1365464425,"answer_id":15890921,"question_id":15890248,"body_markdown":"You could write your own version of an ArrayList that doesn&#39;t allow for duplicates, by overriding `add()` and `addAll()`.  To my knowledge, there is no &quot;common&quot; 3rd party version of such, which has always surprised me.  Anybody know of one?\r\n\r\nThen the remove code is pretty simple (no need to use an `ListIterator`)\r\n\r\n    int idx = this.indexOf(&quot;D&quot;);\r\n    if (idx &gt;= 0) {\r\n      for (int goInReverse = this.size()-1; goInReverse &gt; idx; goInReverse--)\r\n        this.remove(goInReverse);\r\n    }\r\n\r\nHowever, this is still O(N), cause you loop through every element of the List.","title":"Java LinkedHashSet remove some elements from the end","body":"<p>You could write your own version of an ArrayList that doesn't allow for duplicates, by overriding <code>add()</code> and <code>addAll()</code>.  To my knowledge, there is no \"common\" 3rd party version of such, which has always surprised me.  Anybody know of one?</p>\n\n<p>Then the remove code is pretty simple (no need to use an <code>ListIterator</code>)</p>\n\n<pre><code>int idx = this.indexOf(\"D\");\nif (idx &gt;= 0) {\n  for (int goInReverse = this.size()-1; goInReverse &gt; idx; goInReverse--)\n    this.remove(goInReverse);\n}\n</code></pre>\n\n<p>However, this is still O(N), cause you loop through every element of the List.</p>\n"},{"tags":[],"owner":{"account_id":1196241,"reputation":1200,"user_id":1167918,"accept_rate":72,"display_name":"Jazib"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1374774368,"creation_date":1374774368,"answer_id":17865164,"question_id":15890248,"body_markdown":"So, after trying a couple of things mentioned above, I chose to implement a different Data structure. Since I did not have any issue with the O(n) for this problem (as my data is very small)\r\n\r\nI used Graphs, this library came in really handy: http://jgrapht.org/\r\n\r\nWhat I am doing is adding all elements as vertices to a `DirectedGraph` also creating edges between them (edges helped me solve another non-related problem as well). And when it&#39;s time to remove the elements I use a recursive function with the following pseudo code:\r\n\r\n    removeElements(element) {\r\n    \r\n    tempEdge = graph.getOutgoingEdgeFrom(element)\r\n    if(tempEdge !=null)\r\n       return;\r\n    tempVertex = graph.getTargetVertex(tempEdge)\r\n    removeElements(tempVertex)\r\n    graph.remove(tempVertex)\r\n\r\n    }\r\n\r\nI agree that graph DS is not good for these kind of problems, but under my conditions, this works perfectly... Cheers! ","title":"Java LinkedHashSet remove some elements from the end","body":"<p>So, after trying a couple of things mentioned above, I chose to implement a different Data structure. Since I did not have any issue with the O(n) for this problem (as my data is very small)</p>\n\n<p>I used Graphs, this library came in really handy: <a href=\"http://jgrapht.org/\" rel=\"nofollow\">http://jgrapht.org/</a></p>\n\n<p>What I am doing is adding all elements as vertices to a <code>DirectedGraph</code> also creating edges between them (edges helped me solve another non-related problem as well). And when it's time to remove the elements I use a recursive function with the following pseudo code:</p>\n\n<pre><code>removeElements(element) {\n\ntempEdge = graph.getOutgoingEdgeFrom(element)\nif(tempEdge !=null)\n   return;\ntempVertex = graph.getTargetVertex(tempEdge)\nremoveElements(tempVertex)\ngraph.remove(tempVertex)\n\n}\n</code></pre>\n\n<p>I agree that graph DS is not good for these kind of problems, but under my conditions, this works perfectly... Cheers! </p>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695229748,"creation_date":1691891925,"answer_id":76891684,"question_id":15890248,"body_markdown":"The last element can be retrieved or removed using the [`getLast()`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedCollection.html#getLast()) and [`removeLast()`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedCollection.html#removeLast()) methods that were added added to `LinkedHashSet` in Java 21.  This can be combined with a `while` loop to remove elements from the end of the set until the desired element is encountered.\r\n\r\n```lang-java\r\nif (hs.contains(&quot;D&quot;)) {\r\n    while (!&quot;D&quot;.equals(hs.getLast())) {\r\n        hs.removeLast();\r\n    }\r\n}\r\n```\r\n","title":"Java LinkedHashSet remove some elements from the end","body":"<p>The last element can be retrieved or removed using the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedCollection.html#getLast()\" rel=\"nofollow noreferrer\"><code>getLast()</code></a> and <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedCollection.html#removeLast()\" rel=\"nofollow noreferrer\"><code>removeLast()</code></a> methods that were added added to <code>LinkedHashSet</code> in Java 21.  This can be combined with a <code>while</code> loop to remove elements from the end of the set until the desired element is encountered.</p>\n<pre class=\"lang-java prettyprint-override\"><code>if (hs.contains(&quot;D&quot;)) {\n    while (!&quot;D&quot;.equals(hs.getLast())) {\n        hs.removeLast();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":1196241,"reputation":1200,"user_id":1167918,"accept_rate":72,"display_name":"Jazib"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2418,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":17865164,"answer_count":5,"score":2,"last_activity_date":1695229748,"creation_date":1365460564,"question_id":15890248,"body_markdown":"I am working on a problem where i&#39;m required to store elements with requirements of No Duplication and Maintaining order. I chose to go with `LinkedHashSet` Since it fulfilled both my requirements.\r\n \r\nLet&#39;s say I have this code: \r\n\r\n     LinkedHashSet hs = new LinkedHashSet();\r\n      hs.add(&quot;B&quot;);\r\n      hs.add(&quot;A&quot;);\r\n      hs.add(&quot;D&quot;);\r\n      hs.add(&quot;E&quot;);\r\n      hs.add(&quot;C&quot;);\r\n      hs.add(&quot;F&quot;);\r\n      if(hs.contains(&quot;D&quot;)){\r\n           //do something to remove elements added after&quot;D&quot; i-e remove &quot;E&quot;, &quot;C&quot; and &quot;F&quot;\r\n           //maybe hs.removeAll(Collection&lt;?&gt;c) ??\r\n       }\r\n\r\nCan anyone please guide me with the logic to remove these elements?\r\n\r\nAm I using the wrong datastructure? If so, then what would be a better alternative?","title":"Java LinkedHashSet remove some elements from the end","body":"<p>I am working on a problem where i'm required to store elements with requirements of No Duplication and Maintaining order. I chose to go with <code>LinkedHashSet</code> Since it fulfilled both my requirements.</p>\n\n<p>Let's say I have this code: </p>\n\n<pre><code> LinkedHashSet hs = new LinkedHashSet();\n  hs.add(\"B\");\n  hs.add(\"A\");\n  hs.add(\"D\");\n  hs.add(\"E\");\n  hs.add(\"C\");\n  hs.add(\"F\");\n  if(hs.contains(\"D\")){\n       //do something to remove elements added after\"D\" i-e remove \"E\", \"C\" and \"F\"\n       //maybe hs.removeAll(Collection&lt;?&gt;c) ??\n   }\n</code></pre>\n\n<p>Can anyone please guide me with the logic to remove these elements?</p>\n\n<p>Am I using the wrong datastructure? If so, then what would be a better alternative?</p>\n"},{"tags":["java","list","linkedhashset"],"comments":[{"owner":{"account_id":4873312,"reputation":2203,"user_id":3929133,"display_name":"ortis"},"score":0,"creation_date":1459764967,"post_id":36399845,"comment_id":60416386,"body_markdown":"What about an `ArrayList` and use of `contains` method before inserting ?","body":"What about an <code>ArrayList</code> and use of <code>contains</code> method before inserting ?"},{"owner":{"account_id":740820,"reputation":47963,"user_id":2353911,"accept_rate":100,"display_name":"Mena"},"score":0,"creation_date":1459765030,"post_id":36399845,"comment_id":60416435,"body_markdown":"I suspect you&#39;re going to have to implement your own algorithm for this, likely backed by a `HashSet`.","body":"I suspect you&#39;re going to have to implement your own algorithm for this, likely backed by a <code>HashSet</code>."},{"owner":{"account_id":740820,"reputation":47963,"user_id":2353911,"accept_rate":100,"display_name":"Mena"},"score":0,"creation_date":1459765095,"post_id":36399845,"comment_id":60416485,"body_markdown":"@AvihooMamka `TreeSet` keeps elements sorted based on natural or given order, it doesn&#39;t per se retain insertion order.","body":"@AvihooMamka <code>TreeSet</code> keeps elements sorted based on natural or given order, it doesn&#39;t per se retain insertion order."},{"owner":{"account_id":740820,"reputation":47963,"user_id":2353911,"accept_rate":100,"display_name":"Mena"},"score":0,"creation_date":1459765164,"post_id":36399845,"comment_id":60416527,"body_markdown":"Note that `LinkedHashSet` is not `final`, but you won&#39;t have access by the backing map used to store/retrieve elements.","body":"Note that <code>LinkedHashSet</code> is not <code>final</code>, but you won&#39;t have access by the backing map used to store/retrieve elements."},{"owner":{"account_id":2937822,"reputation":136,"user_id":2516376,"accept_rate":80,"display_name":"dneranjan"},"score":0,"creation_date":1459765215,"post_id":36399845,"comment_id":60416568,"body_markdown":"You can use map . Each time the user enters a letter, you would update this map.","body":"You can use map . Each time the user enters a letter, you would update this map."},{"owner":{"account_id":119129,"reputation":3846,"user_id":310626,"accept_rate":53,"display_name":"duduamar"},"score":0,"creation_date":1459765317,"post_id":36399845,"comment_id":60416630,"body_markdown":"As others said, you need your own implementation. Should rely on LinkedHashSet, just remove element on add to get the behavior you want","body":"As others said, you need your own implementation. Should rely on LinkedHashSet, just remove element on add to get the behavior you want"},{"owner":{"account_id":4321138,"reputation":2844,"user_id":3529323,"accept_rate":50,"display_name":"bcsb1001"},"score":0,"creation_date":1459765429,"post_id":36399845,"comment_id":60416720,"body_markdown":"Misunderstood the question and thought it printed `one, three, two` and you wanted `one, two, three`. Fail.","body":"Misunderstood the question and thought it printed <code>one, three, two</code> and you wanted <code>one, two, three</code>. Fail."},{"owner":{"account_id":2122612,"reputation":4116,"user_id":1885562,"accept_rate":59,"display_name":"rafakob"},"score":0,"creation_date":1459765607,"post_id":36399845,"comment_id":60416836,"body_markdown":"Thanks, guys. Just as I thought there&#39;s no collection that provides this behavior.","body":"Thanks, guys. Just as I thought there&#39;s no collection that provides this behavior."},{"owner":{"account_id":2937822,"reputation":136,"user_id":2516376,"accept_rate":80,"display_name":"dneranjan"},"score":0,"creation_date":1459765723,"post_id":36399845,"comment_id":60416898,"body_markdown":"HashMap replace the old value.but in the case of HashSet the item is not inserted.","body":"HashMap replace the old value.but in the case of HashSet the item is not inserted."}],"answers":[{"tags":[],"owner":{"account_id":8173726,"reputation":394,"user_id":6153247,"display_name":"Toonijn"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1459765964,"creation_date":1459765964,"answer_id":36400245,"question_id":36399845,"body_markdown":"When initializing you&#39;re LinkedHashSet you could override the add method. \r\n\r\n    Set&lt;String&gt; set = new LinkedHashSet&lt;String&gt;(){\r\n        @Override\r\n        public boolean add(String s) {\r\n            if(contains(s))\r\n                remove(s);\r\n            return super.add(s);\r\n        }\r\n    };\r\n\r\nNow it gives you:\r\n\r\n    set.add(&quot;1&quot;);\r\n    set.add(&quot;2&quot;);\r\n    set.add(&quot;3&quot;);\r\n    set.add(&quot;1&quot;);\r\n    set.addAll(Collections.singleton(&quot;2&quot;));\r\n    \r\n    // [3, 1 ,2]\r\n\r\neven the addAll method is working.\r\n\r\n\r\n","title":"LinkedHashSet - insertion order and duplicates - keep newest &quot;on top&quot;","body":"<p>When initializing you're LinkedHashSet you could override the add method. </p>\n\n<pre><code>Set&lt;String&gt; set = new LinkedHashSet&lt;String&gt;(){\n    @Override\n    public boolean add(String s) {\n        if(contains(s))\n            remove(s);\n        return super.add(s);\n    }\n};\n</code></pre>\n\n<p>Now it gives you:</p>\n\n<pre><code>set.add(\"1\");\nset.add(\"2\");\nset.add(\"3\");\nset.add(\"1\");\nset.addAll(Collections.singleton(\"2\"));\n\n// [3, 1 ,2]\n</code></pre>\n\n<p>even the addAll method is working.</p>\n"},{"comments":[{"owner":{"account_id":2122612,"reputation":4116,"user_id":1885562,"accept_rate":59,"display_name":"rafakob"},"score":0,"creation_date":1459767456,"post_id":36400290,"comment_id":60417892,"body_markdown":"It&#39;s working as I want. The same could be applied to ArrayList. In that case, is there any reason why I should use LinkedHashSet?","body":"It&#39;s working as I want. The same could be applied to ArrayList. In that case, is there any reason why I should use LinkedHashSet?"},{"owner":{"account_id":775068,"reputation":64803,"user_id":823393,"accept_rate":86,"display_name":"OldCurmudgeon"},"score":1,"creation_date":1459767565,"post_id":36400290,"comment_id":60417976,"body_markdown":"@rafakob - `ArrayList` allows duplicates.","body":"@rafakob - <code>ArrayList</code> allows duplicates."},{"owner":{"account_id":88816,"reputation":3033,"user_id":245452,"accept_rate":73,"display_name":"ytoledano"},"score":2,"creation_date":1459768385,"post_id":36400290,"comment_id":60418465,"body_markdown":"@OldCurmudgeon: not if you remove before inserting","body":"@OldCurmudgeon: not if you remove before inserting"},{"owner":{"account_id":2933712,"reputation":6419,"user_id":2513200,"accept_rate":83,"display_name":"Hulk"},"score":6,"creation_date":1459770318,"post_id":36400290,"comment_id":60419802,"body_markdown":"@rafakob the remove should be more efficient in the `LinkedHashSet`, but you&#39;ll have to profile to be sure (depends on the quality of the typical `hashCode` implementation of your `T`s and the typical size of your Collection among other things)","body":"@rafakob the remove should be more efficient in the <code>LinkedHashSet</code>, but you&#39;ll have to profile to be sure (depends on the quality of the typical <code>hashCode</code> implementation of your <code>T</code>s and the typical size of your Collection among other things)"},{"owner":{"account_id":130645,"reputation":81705,"user_id":330057,"accept_rate":77,"display_name":"corsiKa"},"score":1,"creation_date":1459786653,"post_id":36400290,"comment_id":60431561,"body_markdown":"@hulk aside from the `remove` and `contains` functionality, `ArrayList` will undoubtedly outperform `LinkedHashSet` everywhere else. Having the entire structure in a contiguous memory block helps with memory access and JIT optimization. That said, you&#39;re 100% correct that profiling is the way to go - my suspicion is that the performance boost will be 3 or 4x, which in all honesty isn&#39;t enough for me to care unless it&#39;s in a very critical code block. Most times, I care a lot more about correctness than a 3-4x lookup speed in a data structure.","body":"@hulk aside from the <code>remove</code> and <code>contains</code> functionality, <code>ArrayList</code> will undoubtedly outperform <code>LinkedHashSet</code> everywhere else. Having the entire structure in a contiguous memory block helps with memory access and JIT optimization. That said, you&#39;re 100% correct that profiling is the way to go - my suspicion is that the performance boost will be 3 or 4x, which in all honesty isn&#39;t enough for me to care unless it&#39;s in a very critical code block. Most times, I care a lot more about correctness than a 3-4x lookup speed in a data structure."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1459787073,"post_id":36400290,"comment_id":60431827,"body_markdown":"@corsiKa: the difference is not a factor like 3 or 4 but the *scaling*, so given a large enough collection, there will be a performance difference that hurts. But of course, we don’t know anything about the OP’s maximum collection size and how often a lookup/modification will happen, compared to iterations…","body":"@corsiKa: the difference is not a factor like 3 or 4 but the <i>scaling</i>, so given a large enough collection, there will be a performance difference that hurts. But of course, we don’t know anything about the OP’s maximum collection size and how often a lookup/modification will happen, compared to iterations…"},{"owner":{"account_id":130645,"reputation":81705,"user_id":330057,"accept_rate":77,"display_name":"corsiKa"},"score":0,"creation_date":1459787605,"post_id":36400290,"comment_id":60432126,"body_markdown":"@Holger I was only ever considering a large collection (because in a small collection, who cares?) In core collection behaviors, But `LinkedHashSet` will be faster in `remove` and `contains` and slower in `add` and `iterator`, regardless of scale. It is true that as scales get bigger, the badness of remove in `ArrayList` is worse than the badness of iteration in `LinkedHashSet`. Like I agreed to with hulk, profiling is key.","body":"@Holger I was only ever considering a large collection (because in a small collection, who cares?) In core collection behaviors, But <code>LinkedHashSet</code> will be faster in <code>remove</code> and <code>contains</code> and slower in <code>add</code> and <code>iterator</code>, regardless of scale. It is true that as scales get bigger, the badness of remove in <code>ArrayList</code> is worse than the badness of iteration in <code>LinkedHashSet</code>. Like I agreed to with hulk, profiling is key."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1459787836,"post_id":36400290,"comment_id":60432261,"body_markdown":"@corsiKa: in principle, we agree on that. For a particular application, profiling is the key *and* an analysis regarding the question, whether a significantly higher number of elements can appear in a different scenario/ in production environment/ at a different customer/ etc. If you know there’s an intrinsic limit in your task, test and profile with your expected maximum…","body":"@corsiKa: in principle, we agree on that. For a particular application, profiling is the key <i>and</i> an analysis regarding the question, whether a significantly higher number of elements can appear in a different scenario/ in production environment/ at a different customer/ etc. If you know there’s an intrinsic limit in your task, test and profile with your expected maximum…"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1462878706,"post_id":36400290,"comment_id":61812325,"body_markdown":"You can simplify the method to `return !remove(e) &amp;&amp; super.add(e);` as `super.add(e);` will always return `true`…","body":"You can simplify the method to <code>return !remove(e) &amp;&amp; super.add(e);</code> as <code>super.add(e);</code> will always return <code>true</code>…"},{"owner":{"account_id":227111,"reputation":5543,"user_id":488579,"accept_rate":75,"display_name":"niksvp"},"score":0,"creation_date":1467875454,"post_id":36400290,"comment_id":63899813,"body_markdown":"@Holger - `&amp;&amp;` will not add if already there, will just remove the object. instead `&amp;` should be used.","body":"@Holger - <code>&amp;&amp;</code> will not add if already there, will just remove the object. instead <code>&amp;</code> should be used."},{"owner":{"account_id":775068,"reputation":64803,"user_id":823393,"accept_rate":86,"display_name":"OldCurmudgeon"},"score":0,"creation_date":1467875637,"post_id":36400290,"comment_id":63899940,"body_markdown":"@niksvp - `&amp;` is bitwise - we want logical and here.","body":"@niksvp - <code>&amp;</code> is bitwise - we want logical and here."},{"owner":{"account_id":227111,"reputation":5543,"user_id":488579,"accept_rate":75,"display_name":"niksvp"},"score":0,"creation_date":1467876195,"post_id":36400290,"comment_id":63900267,"body_markdown":"@OldCurmudgeon - `logical` will not add (evaluate the second statement) if the element is already present in the set. it will just remove the element. test the sample data in the question. you will remain with `one, three` in the output. while it is expected to add back the element after removing if already present. bitwise operator will suffice that.","body":"@OldCurmudgeon - <code>logical</code> will not add (evaluate the second statement) if the element is already present in the set. it will just remove the element. test the sample data in the question. you will remain with <code>one, three</code> in the output. while it is expected to add back the element after removing if already present. bitwise operator will suffice that."},{"owner":{"account_id":775068,"reputation":64803,"user_id":823393,"accept_rate":86,"display_name":"OldCurmudgeon"},"score":0,"creation_date":1467877156,"post_id":36400290,"comment_id":63900852,"body_markdown":"@niksvp - Good call on the logic - IMHO using subtle language hacks like bitwise logic is not the solution - does that work now?","body":"@niksvp - Good call on the logic - IMHO using subtle language hacks like bitwise logic is not the solution - does that work now?"},{"owner":{"account_id":227111,"reputation":5543,"user_id":488579,"accept_rate":75,"display_name":"niksvp"},"score":0,"creation_date":1467877823,"post_id":36400290,"comment_id":63901230,"body_markdown":"@OldCurmudgeon - Using logical OR will again end in another problem. it will never add any values if not present. So, the collection remains empty all the time. To simplify `bitwise` is the only solution, but as you claimed above, revision 4 is the alternate correct solution.","body":"@OldCurmudgeon - Using logical OR will again end in another problem. it will never add any values if not present. So, the collection remains empty all the time. To simplify <code>bitwise</code> is the only solution, but as you claimed above, revision 4 is the alternate correct solution."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1467881963,"post_id":36400290,"comment_id":63903683,"body_markdown":"@niksvp: correct, it should be `return !remove(e) &amp; super.add(e);` here, small typo, big impact.","body":"@niksvp: correct, it should be <code>return !remove(e) &amp; super.add(e);</code> here, small typo, big impact."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1467882183,"post_id":36400290,"comment_id":63903808,"body_markdown":"@OldCurmudgeon: the fact that the operator `&amp;` can be used as bitwise operator for `int` values doesn’t make that it’s primary role. For `boolean` arguments, it’s a logical operator, as officially stated, see [JLS&#160;&#167;15.22.2](https://docs.oracle.com/javase/specs/jls/se8/html/jls-15.html#jls-15.22.2). In fact, the operator `&amp;&amp;` is described as “*The conditional-and operator `&amp;&amp;` is like `&amp;` (&#167;15.22.2), but evaluates its right-hand operand only if the value of its left-hand operand is `true`*”.","body":"@OldCurmudgeon: the fact that the operator <code>&amp;</code> can be used as bitwise operator for <code>int</code> values doesn’t make that it’s primary role. For <code>boolean</code> arguments, it’s a logical operator, as officially stated, see <a href=\"https://docs.oracle.com/javase/specs/jls/se8/html/jls-15.html#jls-15.22.2\" rel=\"nofollow noreferrer\">JLS &#167;15.22.2</a>. In fact, the operator <code>&amp;&amp;</code> is described as “<i>The conditional-and operator <code>&amp;&amp;</code> is like <code>&amp;</code> (&#167;15.22.2), but evaluates its right-hand operand only if the value of its left-hand operand is <code>true</code></i>”."},{"owner":{"account_id":775068,"reputation":64803,"user_id":823393,"accept_rate":86,"display_name":"OldCurmudgeon"},"score":0,"creation_date":1467882300,"post_id":36400290,"comment_id":63903886,"body_markdown":"@Holger - Acknowledged - I hereby humbly invoke the clarity/brevity argument in this case.","body":"@Holger - Acknowledged - I hereby humbly invoke the clarity/brevity argument in this case."}],"tags":[],"owner":{"account_id":775068,"reputation":64803,"user_id":823393,"accept_rate":86,"display_name":"OldCurmudgeon"},"comment_count":17,"down_vote_count":0,"up_vote_count":36,"is_accepted":true,"score":36,"last_activity_date":1467878041,"creation_date":1459766111,"answer_id":36400290,"question_id":36399845,"body_markdown":"Most of the [Java Collections][1] can be extended for tweaking. \r\n\r\nSubclass [`LinkedHashSet`][2], overriding the [`add`][3] method.\r\n\r\n    class TweakedHashSet&lt;T&gt; extends LinkedHashSet&lt;T&gt; {\r\n\r\n        @Override\r\n        public boolean add(T e) {\r\n            // Get rid of old one.\r\n            boolean wasThere = remove(e);\r\n            // Add it.\r\n            super.add(e);\r\n            // Contract is &quot;true if this set did not already contain the specified element&quot;\r\n            return !wasThere;\r\n        }\r\n\r\n    }\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Java_collections_framework\r\n  [2]: http://docs.oracle.com/javase/8/docs/api/java/util/LinkedHashSet.html\r\n  [3]: http://docs.oracle.com/javase/8/docs/api/java/util/HashSet.html#add-E-","title":"LinkedHashSet - insertion order and duplicates - keep newest &quot;on top&quot;","body":"<p>Most of the <a href=\"https://en.wikipedia.org/wiki/Java_collections_framework\" rel=\"noreferrer\">Java Collections</a> can be extended for tweaking. </p>\n\n<p>Subclass <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/LinkedHashSet.html\" rel=\"noreferrer\"><code>LinkedHashSet</code></a>, overriding the <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/HashSet.html#add-E-\" rel=\"noreferrer\"><code>add</code></a> method.</p>\n\n<pre><code>class TweakedHashSet&lt;T&gt; extends LinkedHashSet&lt;T&gt; {\n\n    @Override\n    public boolean add(T e) {\n        // Get rid of old one.\n        boolean wasThere = remove(e);\n        // Add it.\n        super.add(e);\n        // Contract is \"true if this set did not already contain the specified element\"\n        return !wasThere;\n    }\n\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2933712,"reputation":6419,"user_id":2513200,"accept_rate":83,"display_name":"Hulk"},"score":1,"creation_date":1459788461,"post_id":36407571,"comment_id":60432649,"body_markdown":"+1 I like this approach. But I&#39;d recommend putting the creation of this Set into a well-named method (`createAccessOrderSet`?) and adding a few unit tests that make very clear what this does.","body":"+1 I like this approach. But I&#39;d recommend putting the creation of this Set into a well-named method (<code>createAccessOrderSet</code>?) and adding a few unit tests that make very clear what this does."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1459788815,"post_id":36407571,"comment_id":60432890,"body_markdown":"@Hulk: sure, that’s the right thing for production code. Then, you likely will provide overloads for providing the capacity and load factor parameters. I used the same values as the default constructor here, but without a documented factory method, they’ll look like magic literals to the reader…","body":"@Hulk: sure, that’s the right thing for production code. Then, you likely will provide overloads for providing the capacity and load factor parameters. I used the same values as the default constructor here, but without a documented factory method, they’ll look like magic literals to the reader…"}],"tags":[],"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"comment_count":2,"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1479622090,"creation_date":1459785892,"answer_id":36407571,"question_id":36399845,"body_markdown":"You can simply use a special feature of `LinkedHashMap`:\r\n\r\n    Set&lt;String&gt; set = Collections.newSetFromMap(new LinkedHashMap&lt;&gt;(16, 0.75f, true));\r\n    set.add(&quot;one&quot;);\r\n    set.add(&quot;two&quot;);\r\n    set.add(&quot;three&quot;);\r\n    set.add(&quot;two&quot;);\r\n    System.out.println(set); // prints [one, three, two]\r\n\r\nIn Oracle’s JRE the `LinkedHashSet` is backed by a `LinkedHashMap` anyway, so there’s not much functional difference, but the special constructor used here configures the `LinkedHashMap` to change the order on every *access* not only on *insertion*. This might sound as being too much, but in fact affects the insertion of already contained keys (values in the sense of the `Set`) only. The other affected `Map` operations (namely `get`) are not used by the returned `Set`.\r\n\r\nIf you’re not using Java&#160;8, you have to help the compiler a bit due to the limited type inference:\r\n\r\n    Set&lt;String&gt; set\r\n        = Collections.newSetFromMap(new LinkedHashMap&lt;String, Boolean&gt;(16, 0.75f, true));\r\n\r\nbut the functionality is the same.\r\n","title":"LinkedHashSet - insertion order and duplicates - keep newest &quot;on top&quot;","body":"<p>You can simply use a special feature of <code>LinkedHashMap</code>:</p>\n\n<pre><code>Set&lt;String&gt; set = Collections.newSetFromMap(new LinkedHashMap&lt;&gt;(16, 0.75f, true));\nset.add(\"one\");\nset.add(\"two\");\nset.add(\"three\");\nset.add(\"two\");\nSystem.out.println(set); // prints [one, three, two]\n</code></pre>\n\n<p>In Oracle’s JRE the <code>LinkedHashSet</code> is backed by a <code>LinkedHashMap</code> anyway, so there’s not much functional difference, but the special constructor used here configures the <code>LinkedHashMap</code> to change the order on every <em>access</em> not only on <em>insertion</em>. This might sound as being too much, but in fact affects the insertion of already contained keys (values in the sense of the <code>Set</code>) only. The other affected <code>Map</code> operations (namely <code>get</code>) are not used by the returned <code>Set</code>.</p>\n\n<p>If you’re not using Java 8, you have to help the compiler a bit due to the limited type inference:</p>\n\n<pre><code>Set&lt;String&gt; set\n    = Collections.newSetFromMap(new LinkedHashMap&lt;String, Boolean&gt;(16, 0.75f, true));\n</code></pre>\n\n<p>but the functionality is the same.</p>\n"},{"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1484188969,"post_id":40701361,"comment_id":70410892,"body_markdown":"Nice and simple. But I&#39;m not sure why you&#39;re using list instead of a `LinkedHashSet` as per the question.","body":"Nice and simple. But I&#39;m not sure why you&#39;re using list instead of a <code>LinkedHashSet</code> as per the question."},{"owner":{"account_id":2374287,"reputation":4246,"user_id":2078093,"accept_rate":62,"display_name":"Naresh Joshi"},"score":0,"creation_date":1484286215,"post_id":40701361,"comment_id":70456585,"body_markdown":"Thanks @shmosel, I have considered ArrayList for my code sample because LinkedHashSet was not maintaining the order which user wants plus ArrayList is also the simplest and fastest way solve this problem.","body":"Thanks @shmosel, I have considered ArrayList for my code sample because LinkedHashSet was not maintaining the order which user wants plus ArrayList is also the simplest and fastest way solve this problem."},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1484286351,"post_id":40701361,"comment_id":70456626,"body_markdown":"`LinkedHashSet` maintains insertion order, just like an `ArrayList`. And it&#39;s more efficient at removals.","body":"<code>LinkedHashSet</code> maintains insertion order, just like an <code>ArrayList</code>. And it&#39;s more efficient at removals."},{"owner":{"account_id":64338,"reputation":2980,"user_id":189976,"accept_rate":100,"display_name":"Danny C"},"score":1,"creation_date":1615881223,"post_id":40701361,"comment_id":117821713,"body_markdown":"The `list.remove(element)` runs in O(N) time. As your list gets large performance will quickly degrade for your `addToList` method. HashSet on the other hand runs `contains(element)` in O(1) regardless of the size.","body":"The <code>list.remove(element)</code> runs in O(N) time. As your list gets large performance will quickly degrade for your <code>addToList</code> method. HashSet on the other hand runs <code>contains(element)</code> in O(1) regardless of the size."}],"tags":[],"owner":{"account_id":2374287,"reputation":4246,"user_id":2078093,"accept_rate":62,"display_name":"Naresh Joshi"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1479623593,"creation_date":1479623593,"answer_id":40701361,"question_id":36399845,"body_markdown":"All solution provided above are excellent but if we don&#39;t want to override already implemented collections. We can solve this problem simply by using an ArrayList with a little trick\r\n\r\nWe can create a method which you will use to insert data into your list\r\n\r\n    public static &lt;T&gt; void addToList(List&lt;T&gt; list, T element) {\r\n    \tlist.remove(element); // Will remove element from list, if list contains it\r\n    \tlist.add(element); // Will add element again to the list \r\n    }\r\n\r\n And we can call this method to add element to our list\r\n\r\n    List&lt;String&gt; list = new ArrayList&lt;&gt;();\r\n    \r\n    addToList(list, &quot;one&quot;);\r\n    addToList(list, &quot;two&quot;);\r\n    addToList(list, &quot;three&quot;);\r\n    addToList(list, &quot;two&quot;);\r\n\r\nOnly disadvantage here is we need to call our custom `addToList()` method everytime instead of `list.add()`","title":"LinkedHashSet - insertion order and duplicates - keep newest &quot;on top&quot;","body":"<p>All solution provided above are excellent but if we don't want to override already implemented collections. We can solve this problem simply by using an ArrayList with a little trick</p>\n\n<p>We can create a method which you will use to insert data into your list</p>\n\n<pre><code>public static &lt;T&gt; void addToList(List&lt;T&gt; list, T element) {\n    list.remove(element); // Will remove element from list, if list contains it\n    list.add(element); // Will add element again to the list \n}\n</code></pre>\n\n<p>And we can call this method to add element to our list</p>\n\n<pre><code>List&lt;String&gt; list = new ArrayList&lt;&gt;();\n\naddToList(list, \"one\");\naddToList(list, \"two\");\naddToList(list, \"three\");\naddToList(list, \"two\");\n</code></pre>\n\n<p>Only disadvantage here is we need to call our custom <code>addToList()</code> method everytime instead of <code>list.add()</code></p>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695229690,"creation_date":1691892228,"answer_id":76891690,"question_id":36399845,"body_markdown":"Java 21 added the [`addLast`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedCollection.html#addLast(E)) method to `LinkedHashSet`.\r\n\r\n&gt; Adds an element as the last element of this collection (optional operation). After this operation completes normally, the given element will be a member of this collection, and it will be the last element in encounter order.\r\n\r\nUsing this method instead of `add` achieves the desired goal of moving duplicate entries to the end of the set.\r\n\r\n```lang-java\r\nset.addLast(&quot;one&quot;);\r\nset.addLast(&quot;two&quot;);\r\nset.addLast(&quot;three&quot;);\r\nset.addLast(&quot;two&quot;);\r\n```","title":"LinkedHashSet - insertion order and duplicates - keep newest &quot;on top&quot;","body":"<p>Java 21 added the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedCollection.html#addLast(E)\" rel=\"nofollow noreferrer\"><code>addLast</code></a> method to <code>LinkedHashSet</code>.</p>\n<blockquote>\n<p>Adds an element as the last element of this collection (optional operation). After this operation completes normally, the given element will be a member of this collection, and it will be the last element in encounter order.</p>\n</blockquote>\n<p>Using this method instead of <code>add</code> achieves the desired goal of moving duplicate entries to the end of the set.</p>\n<pre class=\"lang-java prettyprint-override\"><code>set.addLast(&quot;one&quot;);\nset.addLast(&quot;two&quot;);\nset.addLast(&quot;three&quot;);\nset.addLast(&quot;two&quot;);\n</code></pre>\n"}],"owner":{"account_id":2122612,"reputation":4116,"user_id":1885562,"accept_rate":59,"display_name":"rafakob"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14752,"favorite_count":0,"down_vote_count":0,"up_vote_count":35,"accepted_answer_id":36400290,"answer_count":5,"score":35,"last_activity_date":1695229690,"creation_date":1459764651,"question_id":36399845,"body_markdown":"I need a collection that keeps insertion order and has unique values. LinkedHashSet looks like the way to go, but there&#39;s one problem - when two items are equal, it removes the newest one (which makes sense), here&#39;s an example:\r\n\r\n    set.add(&quot;one&quot;);\r\n    set.add(&quot;two&quot;);\r\n    set.add(&quot;three&quot;);\r\n    set.add(&quot;two&quot;);\r\n\r\nThe `LinkedHashSet` will print: \r\n\r\n&gt;`one`, `two`, `three` \r\n\r\nBut what I need is: \r\n\r\n&gt;**`one`, `three`, `two`**\r\n\r\nWhat would be the best solution here? Is there any collection/collections method that can do this or should I implement it manually?","title":"LinkedHashSet - insertion order and duplicates - keep newest &quot;on top&quot;","body":"<p>I need a collection that keeps insertion order and has unique values. LinkedHashSet looks like the way to go, but there's one problem - when two items are equal, it removes the newest one (which makes sense), here's an example:</p>\n\n<pre><code>set.add(\"one\");\nset.add(\"two\");\nset.add(\"three\");\nset.add(\"two\");\n</code></pre>\n\n<p>The <code>LinkedHashSet</code> will print: </p>\n\n<blockquote>\n  <p><code>one</code>, <code>two</code>, <code>three</code> </p>\n</blockquote>\n\n<p>But what I need is: </p>\n\n<blockquote>\n  <p><strong><code>one</code>, <code>three</code>, <code>two</code></strong></p>\n</blockquote>\n\n<p>What would be the best solution here? Is there any collection/collections method that can do this or should I implement it manually?</p>\n"},{"tags":["java","collections","linkedhashmap","linkedhashset"],"answers":[{"comments":[{"owner":{"account_id":1571474,"reputation":3851,"user_id":1459075,"accept_rate":91,"display_name":"Brandon Ling"},"score":0,"creation_date":1454954178,"post_id":35275647,"comment_id":58263822,"body_markdown":"although your second portion is right, the first is not necessarily true  just because the Map interface specifies Set doesn&#39;t mean that it can&#39;t override with LinkedKeySet","body":"although your second portion is right, the first is not necessarily true  just because the Map interface specifies Set doesn&#39;t mean that it can&#39;t override with LinkedKeySet"},{"owner":{"account_id":4688412,"reputation":8118,"user_id":3795219,"accept_rate":70,"display_name":"Austin"},"score":0,"creation_date":1454954391,"post_id":35275647,"comment_id":58263921,"body_markdown":"My point was to highlight that the `LinkedKeySet` provides ordering over its elements. I didn&#39;t want to imply that a `Set` can&#39;t also implement the  `List` interface. @Andreas answer addresses your question of the &quot;why&quot;; I tried to address the *what do we do about it* side.","body":"My point was to highlight that the <code>LinkedKeySet</code> provides ordering over its elements. I didn&#39;t want to imply that a <code>Set</code> can&#39;t also implement the  <code>List</code> interface. @Andreas answer addresses your question of the &quot;why&quot;; I tried to address the <i>what do we do about it</i> side."}],"tags":[],"owner":{"account_id":4688412,"reputation":8118,"user_id":3795219,"accept_rate":70,"display_name":"Austin"},"comment_count":2,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1454952804,"creation_date":1454952382,"answer_id":35275647,"question_id":35275493,"body_markdown":"It returns a `Set` as defined by the `Map` interface. A `Set` is simply collection that contains no duplicate elements. On the other hand, a `List` is an ordered collection (also known as a sequence). The `List` interface does not specify that elements be unique.\r\n\r\nStill, the `LinkedHashMap` implementation actually returns the underlying keySet which is a `LinkedKeySet`, and the `forEach()` method of the `LinkedKeySet` is order-preserving, i.e.:\r\n\r\n    //from the source code for the LinkedHashMap:\r\n    public Set&lt;K&gt; keySet() {\r\n        Set&lt;K&gt; ks;\r\n        return (ks = keySet) == null ? (keySet = new LinkedKeySet()) : ks;\r\n    }\r\n\r\nSo, in this case, the elements are both unique and ordered.","title":"Why doesn&#39;t LinkedHashMap keyset() return LinkedHashSet vs Set?","body":"<p>It returns a <code>Set</code> as defined by the <code>Map</code> interface. A <code>Set</code> is simply collection that contains no duplicate elements. On the other hand, a <code>List</code> is an ordered collection (also known as a sequence). The <code>List</code> interface does not specify that elements be unique.</p>\n\n<p>Still, the <code>LinkedHashMap</code> implementation actually returns the underlying keySet which is a <code>LinkedKeySet</code>, and the <code>forEach()</code> method of the <code>LinkedKeySet</code> is order-preserving, i.e.:</p>\n\n<pre><code>//from the source code for the LinkedHashMap:\npublic Set&lt;K&gt; keySet() {\n    Set&lt;K&gt; ks;\n    return (ks = keySet) == null ? (keySet = new LinkedKeySet()) : ks;\n}\n</code></pre>\n\n<p>So, in this case, the elements are both unique and ordered.</p>\n"},{"tags":[],"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1454953499,"creation_date":1454953499,"answer_id":35275980,"question_id":35275493,"body_markdown":"*&quot;why doesn&#39;t the source code of `LinkedHashMap` return an `Object` of type `Set` that guarantees order like `LinkedHashSet`?&quot;*\r\n\r\nBecause `LinkedHashSet` is a concrete class with it&#39;s own implementation maintaining its own data, and the [`keyset()`][1] method must return a view of the `Map`, so it cannot just copy the key data to a `LinkedHashSet`. See javadoc:\r\n\r\n &gt; Returns a `Set` view of the keys contained in this map. The **set is backed by the map**, so changes to the map are reflected in the set, and vice-versa.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/util/Map.html#keySet%28%29","title":"Why doesn&#39;t LinkedHashMap keyset() return LinkedHashSet vs Set?","body":"<p><em>\"why doesn't the source code of <code>LinkedHashMap</code> return an <code>Object</code> of type <code>Set</code> that guarantees order like <code>LinkedHashSet</code>?\"</em></p>\n\n<p>Because <code>LinkedHashSet</code> is a concrete class with it's own implementation maintaining its own data, and the <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/Map.html#keySet%28%29\" rel=\"noreferrer\"><code>keyset()</code></a> method must return a view of the <code>Map</code>, so it cannot just copy the key data to a <code>LinkedHashSet</code>. See javadoc:</p>\n\n<blockquote>\n  <p>Returns a <code>Set</code> view of the keys contained in this map. The <strong>set is backed by the map</strong>, so changes to the map are reflected in the set, and vice-versa.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":2792262,"reputation":163877,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1454954497,"creation_date":1454954497,"answer_id":35276224,"question_id":35275493,"body_markdown":"&gt; if it guarantees order then why doesn&#39;t the source code of LinkedHashMap return an Object of type Set that guarantees order like LinkedHashSet?\r\n\r\nThe *declared* type of the key set is drawn from that declared by `Map.keySet()`.  `LinkedHashMap` was added to the standard library before covariant return types were added to the Java language.  At that time, there was no alternative to using type `Set`.\r\n\r\nIn any event, just because the key set must have the same order as the underlying map does not mean that it must be a `LinkedHashSet`, and in fact it cannot be, because it must not support element additions.  Its class is instead a private nested class of class `LinkedHashMap`.  There is no public type between that class and `Set` that would be any more useful than `Set` as a return type.\r\n\r\nIndeed, I don&#39;t think it would be easy to define one.  What would be the essential characteristics that distinguish it from any other set?  You cannot merely say &quot;iteration order&quot; without specifying *what* iteration order instances would have, and that order depends on the `LinkedHashMap` instance from which the set is obtained.  In other words, iteration order is an instance characteristic, not a class characteristic.  A declared type that expresses the nature of being the key set of a `LinkedHashMap` would therefore provide almost no information of any practical use beyond what `Set` provides.\r\n\r\nAnyway, I do not find the excerpt you quoted about returning a `List` vs a `Collection` to be very persuasive.  The fact is that ambiguity about an object&#39;s specific class is not inherently a problem.  In the `Collection` vs. `List` example, if type `Collection` captures the return-type requirements of the method well, such that there is no particular reason that the characteristic features of a `List` are required, then `Collection` is a good choice of return type.  It is especially good if the requirements could also be satisfied by a `Set`, because then the API is not making an essentially arbitrary choice between two equally good alternatives.\r\n\r\nThere is a school of thought that holds that methods should be as general as possible in the types of their arguments and as specific as possible in their return types.  I attribute a lot of merit to that idea, but it is rather more of a guideline than a rule, and there is quite a lot of room for interpretation as to how specific &quot;as specific as possible&quot; is.","title":"Why doesn&#39;t LinkedHashMap keyset() return LinkedHashSet vs Set?","body":"<blockquote>\n  <p>if it guarantees order then why doesn't the source code of LinkedHashMap return an Object of type Set that guarantees order like LinkedHashSet?</p>\n</blockquote>\n\n<p>The <em>declared</em> type of the key set is drawn from that declared by <code>Map.keySet()</code>.  <code>LinkedHashMap</code> was added to the standard library before covariant return types were added to the Java language.  At that time, there was no alternative to using type <code>Set</code>.</p>\n\n<p>In any event, just because the key set must have the same order as the underlying map does not mean that it must be a <code>LinkedHashSet</code>, and in fact it cannot be, because it must not support element additions.  Its class is instead a private nested class of class <code>LinkedHashMap</code>.  There is no public type between that class and <code>Set</code> that would be any more useful than <code>Set</code> as a return type.</p>\n\n<p>Indeed, I don't think it would be easy to define one.  What would be the essential characteristics that distinguish it from any other set?  You cannot merely say \"iteration order\" without specifying <em>what</em> iteration order instances would have, and that order depends on the <code>LinkedHashMap</code> instance from which the set is obtained.  In other words, iteration order is an instance characteristic, not a class characteristic.  A declared type that expresses the nature of being the key set of a <code>LinkedHashMap</code> would therefore provide almost no information of any practical use beyond what <code>Set</code> provides.</p>\n\n<p>Anyway, I do not find the excerpt you quoted about returning a <code>List</code> vs a <code>Collection</code> to be very persuasive.  The fact is that ambiguity about an object's specific class is not inherently a problem.  In the <code>Collection</code> vs. <code>List</code> example, if type <code>Collection</code> captures the return-type requirements of the method well, such that there is no particular reason that the characteristic features of a <code>List</code> are required, then <code>Collection</code> is a good choice of return type.  It is especially good if the requirements could also be satisfied by a <code>Set</code>, because then the API is not making an essentially arbitrary choice between two equally good alternatives.</p>\n\n<p>There is a school of thought that holds that methods should be as general as possible in the types of their arguments and as specific as possible in their return types.  I attribute a lot of merit to that idea, but it is rather more of a guideline than a rule, and there is quite a lot of room for interpretation as to how specific \"as specific as possible\" is.</p>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695229621,"creation_date":1691896225,"answer_id":76891792,"question_id":35275493,"body_markdown":"Java 21 added the [`sequencedKeySet`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedMap.html#sequencedKeySet()) method to `LinkedHashMap`, which returns the key set as a [`SequencedSet`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedSet.html) (i.e. a `Set` with a well-defined encounter order).  While the `keySet` method continues to be a `Set` to maintain backwards compatibility, the `sequencedKeySet` method returns the `SequencedKeySet` type that specifically guarantees a well-defined iteration order.","title":"Why doesn&#39;t LinkedHashMap keyset() return LinkedHashSet vs Set?","body":"<p>Java 21 added the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedMap.html#sequencedKeySet()\" rel=\"nofollow noreferrer\"><code>sequencedKeySet</code></a> method to <code>LinkedHashMap</code>, which returns the key set as a <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedSet.html\" rel=\"nofollow noreferrer\"><code>SequencedSet</code></a> (i.e. a <code>Set</code> with a well-defined encounter order).  While the <code>keySet</code> method continues to be a <code>Set</code> to maintain backwards compatibility, the <code>sequencedKeySet</code> method returns the <code>SequencedKeySet</code> type that specifically guarantees a well-defined iteration order.</p>\n"}],"owner":{"account_id":1571474,"reputation":3851,"user_id":1459075,"accept_rate":91,"display_name":"Brandon Ling"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2356,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":35275980,"answer_count":4,"score":3,"last_activity_date":1695229621,"creation_date":1454951934,"question_id":35275493,"body_markdown":"I&#39;ve read in java documentation and also in this post that LinkedHashMaps&#39; `keyset()` maintains order.\r\n[https://stackoverflow.com/questions/2923856/is-the-order-guaranteed-for-the-return-of-keys-and-values-from-a-linkedhashmap-o][1]\r\n\r\n\r\nMy question is, if it guarantees order then why doesn&#39;t the source code of `LinkedHashMap` return an Object of type `Set` that guarantees order like `LinkedHashSet`? \r\n\r\nOne reason I can maybe think of is that LinkedHashSet uses a map which would increase memory allocation (depending on how AbstractSet is implemented). Is it also because it future proofs implementation of keyset? \r\n\r\nLike this answer says in this post : [Is it better to use List or Collection?][2]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/2923856/is-the-order-guaranteed-for-the-return-of-keys-and-values-from-a-linkedhashmap-o\r\n  [2]: https://stackoverflow.com/questions/2917627/is-it-better-to-use-list-or-collection\r\n\r\n&gt; Returning a List is in line with programming to the Highest Suitable\r\n&gt; Interface.\r\n&gt; \r\n&gt; Returning a Collection would cause ambiguity to the user, as a\r\n&gt; returned collection could be either: Set, List or Queue.\r\n\r\nSo, without reading the documentation of the `keyset()` isn&#39;t this ambiguous?\r\n\r\n`keyset()` source code: \r\n\r\n    public Set&lt;K&gt; keySet() {\r\n        Set&lt;K&gt; ks = keySet;\r\n        return (ks != null ? ks : (keySet = new KeySet()));\r\n    }\r\n\r\n    private final class KeySet extends AbstractSet&lt;K&gt; {\r\n        public Iterator&lt;K&gt; iterator() {\r\n            return newKeyIterator();\r\n        }\r\n        public int size() {\r\n            return size;\r\n        }\r\n        public boolean contains(Object o) {\r\n            return containsKey(o);\r\n        }\r\n        public boolean remove(Object o) {\r\n            return HashMap.this.removeEntryForKey(o) != null;\r\n        }\r\n        public void clear() {\r\n            HashMap.this.clear();\r\n        }\r\n    }","title":"Why doesn&#39;t LinkedHashMap keyset() return LinkedHashSet vs Set?","body":"<p>I've read in java documentation and also in this post that LinkedHashMaps' <code>keyset()</code> maintains order.\n<a href=\"https://stackoverflow.com/questions/2923856/is-the-order-guaranteed-for-the-return-of-keys-and-values-from-a-linkedhashmap-o\">Is the order guaranteed for the return of keys and values from a LinkedHashMap object?</a></p>\n\n<p>My question is, if it guarantees order then why doesn't the source code of <code>LinkedHashMap</code> return an Object of type <code>Set</code> that guarantees order like <code>LinkedHashSet</code>? </p>\n\n<p>One reason I can maybe think of is that LinkedHashSet uses a map which would increase memory allocation (depending on how AbstractSet is implemented). Is it also because it future proofs implementation of keyset? </p>\n\n<p>Like this answer says in this post : <a href=\"https://stackoverflow.com/questions/2917627/is-it-better-to-use-list-or-collection\">Is it better to use List or Collection?</a></p>\n\n<blockquote>\n  <p>Returning a List is in line with programming to the Highest Suitable\n  Interface.</p>\n  \n  <p>Returning a Collection would cause ambiguity to the user, as a\n  returned collection could be either: Set, List or Queue.</p>\n</blockquote>\n\n<p>So, without reading the documentation of the <code>keyset()</code> isn't this ambiguous?</p>\n\n<p><code>keyset()</code> source code: </p>\n\n<pre><code>public Set&lt;K&gt; keySet() {\n    Set&lt;K&gt; ks = keySet;\n    return (ks != null ? ks : (keySet = new KeySet()));\n}\n\nprivate final class KeySet extends AbstractSet&lt;K&gt; {\n    public Iterator&lt;K&gt; iterator() {\n        return newKeyIterator();\n    }\n    public int size() {\n        return size;\n    }\n    public boolean contains(Object o) {\n        return containsKey(o);\n    }\n    public boolean remove(Object o) {\n        return HashMap.this.removeEntryForKey(o) != null;\n    }\n    public void clear() {\n        HashMap.this.clear();\n    }\n}\n</code></pre>\n"},{"tags":["java","collections"],"answers":[{"comments":[{"owner":{"account_id":808033,"reputation":240,"user_id":891370,"accept_rate":60,"display_name":"BobTurbo"},"score":0,"creation_date":1314163809,"post_id":7170827,"comment_id":8606778,"body_markdown":"I only need removal/insertion at one end, doesn&#39;t matter which. Updated question to remove the ambiguity somewhat.","body":"I only need removal/insertion at one end, doesn&#39;t matter which. Updated question to remove the ambiguity somewhat."}],"tags":[],"owner":{"account_id":53772,"reputation":22307,"user_id":160811,"accept_rate":100,"display_name":"Jeremy"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1314163636,"creation_date":1314163636,"answer_id":7170827,"question_id":7170772,"body_markdown":"If you&#39;re willing to give up a little performance for no duplicates, you can always extend [`ArrayDeque`][1] and override all the methods that insert into the collection to see if the element already exists.\r\n\r\n\r\n  [1]: http://download.oracle.com/javase/6/docs/api/java/util/ArrayDeque.html","title":"Java data structure that retains order, does not allow duplicates, and allows removal and insertion at start and end","body":"<p>If you're willing to give up a little performance for no duplicates, you can always extend <a href=\"http://download.oracle.com/javase/6/docs/api/java/util/ArrayDeque.html\" rel=\"nofollow\"><code>ArrayDeque</code></a> and override all the methods that insert into the collection to see if the element already exists.</p>\n"},{"tags":[],"owner":{"account_id":330601,"reputation":24990,"user_id":654801,"display_name":"sbridges"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1314164450,"creation_date":1314164102,"answer_id":7170886,"question_id":7170772,"body_markdown":"LinkedHashSet will allow removal of the first element, just do \r\n\r\n\r\n    Iterator iter = linkedHashSet.iterator();\r\n    if(iter.next()) {\r\n       iter.remove();\r\n    }","title":"Java data structure that retains order, does not allow duplicates, and allows removal and insertion at start and end","body":"<p>LinkedHashSet will allow removal of the first element, just do </p>\n\n<pre><code>Iterator iter = linkedHashSet.iterator();\nif(iter.next()) {\n   iter.remove();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695229527,"creation_date":1691896569,"answer_id":76891801,"question_id":7170772,"body_markdown":"As of Java 21, `LinkedHashSet` meets the stated requirements.\r\n\r\n`LinkedHashSet` was updated to have [`addFirst`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedCollection.html#addFirst(E)), [`addLast`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedCollection.html#addLast(E)), [`removeFirst`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedCollection.html#removeFirst()), and [`removeLast`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedCollection.html#removeLast()) methods.  This, when combined with the previously existing capabilities of `LinkedHashSet`, meets the stated requirements.","title":"Java data structure that retains order, does not allow duplicates, and allows removal and insertion at start and end","body":"<p>As of Java 21, <code>LinkedHashSet</code> meets the stated requirements.</p>\n<p><code>LinkedHashSet</code> was updated to have <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedCollection.html#addFirst(E)\" rel=\"nofollow noreferrer\"><code>addFirst</code></a>, <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedCollection.html#addLast(E)\" rel=\"nofollow noreferrer\"><code>addLast</code></a>, <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedCollection.html#removeFirst()\" rel=\"nofollow noreferrer\"><code>removeFirst</code></a>, and <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedCollection.html#removeLast()\" rel=\"nofollow noreferrer\"><code>removeLast</code></a> methods.  This, when combined with the previously existing capabilities of <code>LinkedHashSet</code>, meets the stated requirements.</p>\n"}],"owner":{"account_id":808033,"reputation":240,"user_id":891370,"accept_rate":60,"display_name":"BobTurbo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2159,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":7170886,"answer_count":3,"score":4,"last_activity_date":1695229527,"creation_date":1314163201,"question_id":7170772,"body_markdown":"Is there a Java data structure that:\r\n\r\n - does not allow duplicates\r\n - retains insertion order\r\n - allows removal and insertion at either the start or end of the collection\r\n\r\nThere is `LinkedHashSet`, but it only allows `remove(object)`, `add(object)` as per `Set`.","title":"Java data structure that retains order, does not allow duplicates, and allows removal and insertion at start and end","body":"<p>Is there a Java data structure that:</p>\n<ul>\n<li>does not allow duplicates</li>\n<li>retains insertion order</li>\n<li>allows removal and insertion at either the start or end of the collection</li>\n</ul>\n<p>There is <code>LinkedHashSet</code>, but it only allows <code>remove(object)</code>, <code>add(object)</code> as per <code>Set</code>.</p>\n"},{"tags":["java","performance","linkedhashset"],"comments":[{"owner":{"account_id":2779425,"reputation":1569,"user_id":2392258,"display_name":"Nitin Dandriyal"},"score":1,"creation_date":1432695498,"post_id":30472307,"comment_id":49024912,"body_markdown":"No its not worth to check, brings in check-then-act problems alongwith it","body":"No its not worth to check, brings in check-then-act problems alongwith it"},{"owner":{"account_id":1064245,"reputation":85256,"user_id":1065197,"accept_rate":88,"display_name":"Luiggi Mendoza"},"score":0,"creation_date":1432695553,"post_id":30472307,"comment_id":49024927,"body_markdown":"@NitinDandriyal it depends if the `Set` may be reused in several threads or not.","body":"@NitinDandriyal it depends if the <code>Set</code> may be reused in several threads or not."},{"owner":{"account_id":2779425,"reputation":1569,"user_id":2392258,"display_name":"Nitin Dandriyal"},"score":1,"creation_date":1432696007,"post_id":30472307,"comment_id":49025034,"body_markdown":"@LuiggiMendoza Changing comment to - No its not worth to check as its redundant, also brings in check-then-act problems along with it in case of when multiple threads access the set.","body":"@LuiggiMendoza Changing comment to - No its not worth to check as its redundant, also brings in check-then-act problems along with it in case of when multiple threads access the set."},{"owner":{"account_id":2993703,"reputation":3071,"user_id":2540669,"display_name":"augray"},"score":0,"creation_date":1432696754,"post_id":30472307,"comment_id":49025252,"body_markdown":"For concurrency, you can always use `Collections.synchronizedSet(set);` to get a thread safe set from an existing one.","body":"For concurrency, you can always use <code>Collections.synchronizedSet(set);</code> to get a thread safe set from an existing one."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1691900499,"post_id":30472307,"comment_id":135552376,"body_markdown":"@LuiggiMendoza It is never worthwhile to check, and, if there are multiple threads, checking will make it *worse,* by introducing timing-window errors. `Set.remove()` already has to check, obviously, and it even returns a `boolean` telling you whether it was there or not.","body":"@LuiggiMendoza It is never worthwhile to check, and, if there are multiple threads, checking will make it <i>worse,</i> by introducing timing-window errors. <code>Set.remove()</code> already has to check, obviously, and it even returns a <code>boolean</code> telling you whether it was there or not."},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":0,"creation_date":1691909880,"post_id":30472307,"comment_id":135552912,"body_markdown":"I would *guess*  that: if `contains` is called, the element must be searched once; when then `remove` is called, the element must be searched a second time; and when `add` is called, it must be searched a third time. (sure the `Hash` part *helps* a bit - no full scan needed)","body":"I would <i>guess</i>  that: if <code>contains</code> is called, the element must be searched once; when then <code>remove</code> is called, the element must be searched a second time; and when <code>add</code> is called, it must be searched a third time. (sure the <code>Hash</code> part <i>helps</i> a bit - no full scan needed)"}],"answers":[{"tags":[],"owner":{"account_id":2993703,"reputation":3071,"user_id":2540669,"display_name":"augray"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1432696550,"creation_date":1432695602,"answer_id":30472404,"question_id":30472307,"body_markdown":"I would recommend against calling both contains and remove. Both calls have to search through the chains to find the element, and `contains` does this no faster than `remove`. So you are potentially doubling your required time for a call each time.\r\n\r\nYou can browse through the code for [`contains`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8u40-b25/java/util/HashSet.java#HashSet.contains%28java.lang.Object%29) and [`remove`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8u40-b25/java/util/HashSet.java#HashSet.remove%28java.lang.Object%29) yourself.\r\n\r\nYou&#39;ll find that both end up possibly iterating through the hash chains at some point (`remove` in HashMap&#39;s [`removeNode`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8u40-b25/java/util/HashMap.java#HashMap.removeNode%28int%2Cjava.lang.Object%2Cjava.lang.Object%2Cboolean%2Cboolean%29) and `contains` in HashMap&#39;s [`getNode`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8u40-b25/java/util/HashMap.java#HashMap.removeNode%28int%2Cjava.lang.Object%2Cjava.lang.Object%2Cboolean%2Cboolean%29)), which could be a performance hit if your set is under heavy load.\r\n\r\nIf your set isn&#39;t under heavy load, then it still probably isn&#39;t worth it, but doesn&#39;t matter so much since in a sparse hash chains set the expected lookup/remove is O(1) (i.e. will be just as fast regardless of whether you have 5 elements or 5000 in it).\r\n    ","title":"Is it worth it to check LinkedHashSet.contains(...) before adding?","body":"<p>I would recommend against calling both contains and remove. Both calls have to search through the chains to find the element, and <code>contains</code> does this no faster than <code>remove</code>. So you are potentially doubling your required time for a call each time.</p>\n\n<p>You can browse through the code for <a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8u40-b25/java/util/HashSet.java#HashSet.contains%28java.lang.Object%29\" rel=\"nofollow\"><code>contains</code></a> and <a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8u40-b25/java/util/HashSet.java#HashSet.remove%28java.lang.Object%29\" rel=\"nofollow\"><code>remove</code></a> yourself.</p>\n\n<p>You'll find that both end up possibly iterating through the hash chains at some point (<code>remove</code> in HashMap's <a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8u40-b25/java/util/HashMap.java#HashMap.removeNode%28int%2Cjava.lang.Object%2Cjava.lang.Object%2Cboolean%2Cboolean%29\" rel=\"nofollow\"><code>removeNode</code></a> and <code>contains</code> in HashMap's <a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8u40-b25/java/util/HashMap.java#HashMap.removeNode%28int%2Cjava.lang.Object%2Cjava.lang.Object%2Cboolean%2Cboolean%29\" rel=\"nofollow\"><code>getNode</code></a>), which could be a performance hit if your set is under heavy load.</p>\n\n<p>If your set isn't under heavy load, then it still probably isn't worth it, but doesn't matter so much since in a sparse hash chains set the expected lookup/remove is O(1) (i.e. will be just as fast regardless of whether you have 5 elements or 5000 in it).</p>\n"},{"comments":[{"owner":{"account_id":3838375,"reputation":10942,"user_id":3182188,"accept_rate":75,"display_name":"Raniz"},"score":0,"creation_date":1432696541,"post_id":30472507,"comment_id":49025187,"body_markdown":"`LinkedHashSet` is not thread safe so should not be used for multithreaded access if you&#39;re modifying it in the first place.","body":"<code>LinkedHashSet</code> is not thread safe so should not be used for multithreaded access if you&#39;re modifying it in the first place."},{"owner":{"account_id":2779425,"reputation":1569,"user_id":2392258,"display_name":"Nitin Dandriyal"},"score":0,"creation_date":1432696612,"post_id":30472507,"comment_id":49025209,"body_markdown":"@Raniz That doesn&#39;t mean that you can not use `LinkedHashSet` while multiple threads are supposed to use it","body":"@Raniz That doesn&#39;t mean that you can not use <code>LinkedHashSet</code> while multiple threads are supposed to use it"},{"owner":{"account_id":3838375,"reputation":10942,"user_id":3182188,"accept_rate":75,"display_name":"Raniz"},"score":0,"creation_date":1432696758,"post_id":30472507,"comment_id":49025253,"body_markdown":"Only if you *never* modify it. Calling `add` from multiple threads simultaneously is bound to mess up the internal state of the underlying `HashMap` eventually.","body":"Only if you <i>never</i> modify it. Calling <code>add</code> from multiple threads simultaneously is bound to mess up the internal state of the underlying <code>HashMap</code> eventually."},{"owner":{"account_id":2779425,"reputation":1569,"user_id":2392258,"display_name":"Nitin Dandriyal"},"score":0,"creation_date":1432697111,"post_id":30472507,"comment_id":49025357,"body_markdown":"exactly that&#39;s why synchronization techniques are useful, even for modifying. Have you ever built a simple cache using `LinkeedHashSet` if yes you&#39;ll understand","body":"exactly that&#39;s why synchronization techniques are useful, even for modifying. Have you ever built a simple cache using <code>LinkeedHashSet</code> if yes you&#39;ll understand"},{"owner":{"account_id":3838375,"reputation":10942,"user_id":3182188,"accept_rate":75,"display_name":"Raniz"},"score":0,"creation_date":1432697615,"post_id":30472507,"comment_id":49025476,"body_markdown":"But if you&#39;re already synchronising on your object you won&#39;t have any &quot;check-then-act&quot; issues  - unless you do them in separate synchronised blocks of course which would just be outright stupid.","body":"But if you&#39;re already synchronising on your object you won&#39;t have any &quot;check-then-act&quot; issues  - unless you do them in separate synchronised blocks of course which would just be outright stupid."},{"owner":{"account_id":2779425,"reputation":1569,"user_id":2392258,"display_name":"Nitin Dandriyal"},"score":0,"creation_date":1432697864,"post_id":30472507,"comment_id":49025538,"body_markdown":"@Raniz If by synchronizing on object you mean synchronizing on `this`, its almost never a good idea, exposes to client side locking, and how are synchronized blocks stupid(how do you even make such perceptions)?","body":"@Raniz If by synchronizing on object you mean synchronizing on <code>this</code>, its almost never a good idea, exposes to client side locking, and how are synchronized blocks stupid(how do you even make such perceptions)?"},{"owner":{"account_id":3838375,"reputation":10942,"user_id":3182188,"accept_rate":75,"display_name":"Raniz"},"score":0,"creation_date":1432698433,"post_id":30472507,"comment_id":49025712,"body_markdown":"I did not advocate any synchronisation method at all, especially not on `this` - you&#39;re the one who brought up synchronisation. I also said that *separate synchronised blocks* - as in: gain exclusive access; check; leave exclusive access; gain exclusive access again; modify; leave exclusive access; - were stupid. Read my comment again.","body":"I did not advocate any synchronisation method at all, especially not on <code>this</code> - you&#39;re the one who brought up synchronisation. I also said that <i>separate synchronised blocks</i> - as in: gain exclusive access; check; leave exclusive access; gain exclusive access again; modify; leave exclusive access; - were stupid. Read my comment again."},{"owner":{"account_id":2779425,"reputation":1569,"user_id":2392258,"display_name":"Nitin Dandriyal"},"score":1,"creation_date":1432698742,"post_id":30472507,"comment_id":49025802,"body_markdown":"Vague discussion without any direction, let&#39;s close this here. Editing my  answer to remove multi-threaded part, anyways doesn&#39;t contribute to answer much.","body":"Vague discussion without any direction, let&#39;s close this here. Editing my  answer to remove multi-threaded part, anyways doesn&#39;t contribute to answer much."}],"tags":[],"owner":{"account_id":2779425,"reputation":1569,"user_id":2392258,"display_name":"Nitin Dandriyal"},"comment_count":8,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1432698748,"creation_date":1432696450,"answer_id":30472507,"question_id":30472307,"body_markdown":"`LinkedHashSet` uses `HashMap` behind the scenes `remove(Object)` will remove the `Object` only if it `contains` the Object hence its unnecessary and will increase time complexity in case Object exists in set.\r\n\r\n","title":"Is it worth it to check LinkedHashSet.contains(...) before adding?","body":"<p><code>LinkedHashSet</code> uses <code>HashMap</code> behind the scenes <code>remove(Object)</code> will remove the <code>Object</code> only if it <code>contains</code> the Object hence its unnecessary and will increase time complexity in case Object exists in set.</p>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695229470,"creation_date":1691897794,"answer_id":76891831,"question_id":30472307,"body_markdown":"Java 21 added the [`addLast`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedCollection.html#addLast(E)) method to `LinkedHashSet`, which will move the element to the end of the set if it is not already present.\r\n\r\n&gt; Adds an element as the last element of this collection (optional operation). After this operation completes normally, the given element will be a member of this collection, and it will be the last element in encounter order.\r\n\r\nUsing this method instead of `add` solves the stated requirement without having to also call `remove`.\r\n\r\n```lang-java\r\nSet&lt;Integer&gt; set = new LinkedHashSet&lt;&gt;();\r\n\r\nset.addLast(entry);\r\n```","title":"Is it worth it to check LinkedHashSet.contains(...) before adding?","body":"<p>Java 21 added the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedCollection.html#addLast(E)\" rel=\"nofollow noreferrer\"><code>addLast</code></a> method to <code>LinkedHashSet</code>, which will move the element to the end of the set if it is not already present.</p>\n<blockquote>\n<p>Adds an element as the last element of this collection (optional operation). After this operation completes normally, the given element will be a member of this collection, and it will be the last element in encounter order.</p>\n</blockquote>\n<p>Using this method instead of <code>add</code> solves the stated requirement without having to also call <code>remove</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Set&lt;Integer&gt; set = new LinkedHashSet&lt;&gt;();\n\nset.addLast(entry);\n</code></pre>\n"}],"owner":{"account_id":6000975,"reputation":165,"user_id":4714270,"accept_rate":40,"display_name":"Fred"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":679,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":3,"score":3,"last_activity_date":1695229470,"creation_date":1432694972,"question_id":30472307,"body_markdown":"I&#39;m using a `LinkedHashSet` to implement a set ordered by entry. If a duplicate element is added, it should go at the end and the entry already in the set should be removed.\r\n\r\nI&#39;m debating whether it&#39;s worth it to check `set.contains(entry)` before I call `set.remove(entry)`? Essentially does checking `contains()` each time offer any time/space benefit over just blindly calling `remove()` each time?\r\n\r\n```lang-java\r\nSet&lt;Integer&gt; set = new LinkedHashSet&lt;&gt;();\r\n\r\n// The below\r\nset.remove(entry);\r\nset.add(entry);\r\n\r\n// Versus the below\r\nif (set.contains(entry)) {\r\n  set.remove(entry);\r\n}\r\nset.add(entry);\r\n```","title":"Is it worth it to check LinkedHashSet.contains(...) before adding?","body":"<p>I'm using a <code>LinkedHashSet</code> to implement a set ordered by entry. If a duplicate element is added, it should go at the end and the entry already in the set should be removed.</p>\n<p>I'm debating whether it's worth it to check <code>set.contains(entry)</code> before I call <code>set.remove(entry)</code>? Essentially does checking <code>contains()</code> each time offer any time/space benefit over just blindly calling <code>remove()</code> each time?</p>\n<pre class=\"lang-java prettyprint-override\"><code>Set&lt;Integer&gt; set = new LinkedHashSet&lt;&gt;();\n\n// The below\nset.remove(entry);\nset.add(entry);\n\n// Versus the below\nif (set.contains(entry)) {\n  set.remove(entry);\n}\nset.add(entry);\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":130930,"reputation":67596,"user_id":330565,"accept_rate":79,"display_name":"Nikita Rybak"},"score":2,"creation_date":1286999136,"post_id":3927355,"comment_id":4189875,"body_markdown":"Where did you find add(int, Object) method for LinkedHashSet?","body":"Where did you find add(int, Object) method for LinkedHashSet?"},{"owner":{"account_id":110195,"reputation":38781,"user_id":291701,"accept_rate":66,"display_name":"user291701"},"score":0,"creation_date":1286999203,"post_id":3927355,"comment_id":4189885,"body_markdown":"Ah yeah sorry just updated the post with that, really messed that one up..","body":"Ah yeah sorry just updated the post with that, really messed that one up.."},{"owner":{"account_id":130930,"reputation":67596,"user_id":330565,"accept_rate":79,"display_name":"Nikita Rybak"},"score":0,"creation_date":1286999494,"post_id":3927355,"comment_id":4189943,"body_markdown":"Reverse? Doesn&#39;t look like anything in the API is gonna help you.","body":"Reverse? Doesn&#39;t look like anything in the API is gonna help you."},{"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"score":0,"creation_date":1691906008,"post_id":3927355,"comment_id":135552614,"body_markdown":"Voting to close as needing more focus/having multiple questions in one.  Alternatively, with the edit this is a duplicate of https://stackoverflow.com/q/23722650/1108305.","body":"Voting to close as needing more focus/having multiple questions in one.  Alternatively, with the edit this is a duplicate of <a href=\"https://stackoverflow.com/q/23722650/1108305\">stackoverflow.com/q/23722650/1108305</a>."}],"answers":[{"comments":[{"owner":{"account_id":42982,"reputation":753,"user_id":125434,"display_name":"Kevin"},"score":1,"creation_date":1359587699,"post_id":3927428,"comment_id":20410301,"body_markdown":"This answer is misleading.  Inserts are indeed cheap.  But to the original question, there is no means by which to insert to the &quot;head&quot; of the linked list aspect of your linked hash set object, only to the &quot;tail&quot;.","body":"This answer is misleading.  Inserts are indeed cheap.  But to the original question, there is no means by which to insert to the &quot;head&quot; of the linked list aspect of your linked hash set object, only to the &quot;tail&quot;."}],"tags":[],"owner":{"account_id":36420,"reputation":2827,"user_id":103867,"accept_rate":100,"display_name":"Nick"},"comment_count":1,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1286999402,"creation_date":1286999402,"answer_id":3927428,"question_id":3927355,"body_markdown":"Judging by the source code of LinkedHashMap (which backs LinkedHashSet -- see http://www.docjar.com/html/api/java/util/LinkedHashMap.java.html ), inserts are cheap, like in a linked list.","title":"Cost of inserting element at 0th position of LinkedHashSet?","body":"<p>Judging by the source code of LinkedHashMap (which backs LinkedHashSet -- see <a href=\"http://www.docjar.com/html/api/java/util/LinkedHashMap.java.html\" rel=\"nofollow\">http://www.docjar.com/html/api/java/util/LinkedHashMap.java.html</a> ), inserts are cheap, like in a linked list.</p>\n"},{"tags":[],"owner":{"account_id":7848,"reputation":108920,"user_id":13792,"accept_rate":100,"display_name":"ColinD"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1287000343,"creation_date":1286999440,"answer_id":3927436,"question_id":3927355,"body_markdown":"You can&#39;t add elements to the front of a `LinkedHashSet`... it has no method such as `add(int, Object)` nor any other methods that make use of the concept of an &quot;index&quot; in the set (that&#39;s a `List` concept). It only provides consistent iteration order, based on the order in which elements were inserted. The most recently inserted element that was not already in the set will be the last element when you iterate over it.\r\n\r\nAnd the Javadoc for `LinkedHashSet` explicitly states:\r\n\r\n&gt; Like HashSet, it provides constant-time performance for the basic operations (add, contains and remove), assuming the hash function disperses elements properly among the buckets.\r\n\r\n**Edit**: There is not any way to iterate over a `LinkedHashSet` in reverse short of something like copying it to a `List` and iterating over that in reverse. Using [Guava][1] you could do that like:\r\n\r\n    for (String s : Lists.reverse(ImmutableList.copyOf(set))) { ... }\r\n\r\nNote that while creating the `ImmutableList` does require iterating over each element of the original set, the `reverse` method simply provides a reverse view and doesn&#39;t iterate at all itself.\r\n\r\n\r\n  [1]: http://code.google.com/p/guava-libraries/","title":"Cost of inserting element at 0th position of LinkedHashSet?","body":"<p>You can't add elements to the front of a <code>LinkedHashSet</code>... it has no method such as <code>add(int, Object)</code> nor any other methods that make use of the concept of an \"index\" in the set (that's a <code>List</code> concept). It only provides consistent iteration order, based on the order in which elements were inserted. The most recently inserted element that was not already in the set will be the last element when you iterate over it.</p>\n\n<p>And the Javadoc for <code>LinkedHashSet</code> explicitly states:</p>\n\n<blockquote>\n  <p>Like HashSet, it provides constant-time performance for the basic operations (add, contains and remove), assuming the hash function disperses elements properly among the buckets.</p>\n</blockquote>\n\n<p><strong>Edit</strong>: There is not any way to iterate over a <code>LinkedHashSet</code> in reverse short of something like copying it to a <code>List</code> and iterating over that in reverse. Using <a href=\"http://code.google.com/p/guava-libraries/\" rel=\"nofollow\">Guava</a> you could do that like:</p>\n\n<pre><code>for (String s : Lists.reverse(ImmutableList.copyOf(set))) { ... }\n</code></pre>\n\n<p>Note that while creating the <code>ImmutableList</code> does require iterating over each element of the original set, the <code>reverse</code> method simply provides a reverse view and doesn't iterate at all itself.</p>\n"},{"tags":[],"owner":{"account_id":112931,"reputation":77772,"user_id":297696,"accept_rate":100,"display_name":"wkl"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1286999586,"creation_date":1286999586,"answer_id":3927460,"question_id":3927355,"body_markdown":"To answer your latest question, there is no reverse iterator feature available from `LinkedHashSet`, even though internally the implementation uses a doubly linked list.\r\n\r\nThere is an open Request For Enhancement about this:\r\n\r\nhttps://bugs.java.com/bugdatabase/view_bug?bug_id=4848853\r\n\r\nMark Peters links to functionality available in guava, though their reverse list actually generates a reverse list.","title":"Cost of inserting element at 0th position of LinkedHashSet?","body":"<p>To answer your latest question, there is no reverse iterator feature available from <code>LinkedHashSet</code>, even though internally the implementation uses a doubly linked list.</p>\n<p>There is an open Request For Enhancement about this:</p>\n<p><a href=\"https://bugs.java.com/bugdatabase/view_bug?bug_id=4848853\" rel=\"nofollow noreferrer\">https://bugs.java.com/bugdatabase/view_bug?bug_id=4848853</a></p>\n<p>Mark Peters links to functionality available in guava, though their reverse list actually generates a reverse list.</p>\n"},{"tags":[],"owner":{"account_id":208548,"reputation":4277,"user_id":459093,"display_name":"Gaurav Saxena"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1287001206,"creation_date":1286999685,"answer_id":3927475,"question_id":3927355,"body_markdown":"Sets are, by definition, independent of order. Thus, Set doesn&#39;t have add(int , Object) method available. \r\n\r\nThis is also true of LinkedHashSet [http://download.oracle.com/javase/6/docs/api/java/util/LinkedHashSet.html][1]\r\n\r\nLinkedHashSet maintains insertion order and thus all elements are added at the end of the linked list. This is achieved using the LinkedHashMap. You can have a look at the method linkEntry in LinkedHashMap [http://www.docjar.com/html/api/java/util/LinkedHashMap.java.html][2]\r\n\r\n\r\n  [1]: http://download.oracle.com/javase/6/docs/api/java/util/LinkedHashSet.html\r\n  [2]: http://www.docjar.com/html/api/java/util/LinkedHashMap.java.html\r\n\r\n**Edit: in response to edited question**\r\n\r\nThere is no API method available to do this. But you can do the following\r\n\r\n 1. Add Set to a List using new `ArrayList(Set)`\r\n 2. Use `Collections.reverse(List)`\r\n 3. Iterate this list","title":"Cost of inserting element at 0th position of LinkedHashSet?","body":"<p>Sets are, by definition, independent of order. Thus, Set doesn't have add(int , Object) method available. </p>\n\n<p>This is also true of LinkedHashSet <a href=\"http://download.oracle.com/javase/6/docs/api/java/util/LinkedHashSet.html\" rel=\"noreferrer\">http://download.oracle.com/javase/6/docs/api/java/util/LinkedHashSet.html</a></p>\n\n<p>LinkedHashSet maintains insertion order and thus all elements are added at the end of the linked list. This is achieved using the LinkedHashMap. You can have a look at the method linkEntry in LinkedHashMap <a href=\"http://www.docjar.com/html/api/java/util/LinkedHashMap.java.html\" rel=\"noreferrer\">http://www.docjar.com/html/api/java/util/LinkedHashMap.java.html</a></p>\n\n<p><strong>Edit: in response to edited question</strong></p>\n\n<p>There is no API method available to do this. But you can do the following</p>\n\n<ol>\n<li>Add Set to a List using new <code>ArrayList(Set)</code></li>\n<li>Use <code>Collections.reverse(List)</code></li>\n<li>Iterate this list</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":217125,"reputation":1717,"user_id":472772,"accept_rate":78,"display_name":"Stas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1287000326,"creation_date":1287000326,"answer_id":3927561,"question_id":3927355,"body_markdown":"As already mentioned, LinkedHashSet is build on LinkedHashMap, which is built on HashMap :) Javadocs says that it takes constant time to add an element into HashMap, assuming that your hash function is implemented properly. If your hash function is not implemented well, it may take up to O(n). \r\nIteration backwards in not supported at this moment.","title":"Cost of inserting element at 0th position of LinkedHashSet?","body":"<p>As already mentioned, LinkedHashSet is build on LinkedHashMap, which is built on HashMap :) Javadocs says that it takes constant time to add an element into HashMap, assuming that your hash function is implemented properly. If your hash function is not implemented well, it may take up to O(n). \nIteration backwards in not supported at this moment.</p>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695229441,"creation_date":1691905864,"answer_id":76892093,"question_id":3927355,"body_markdown":"Java 21 added the [`addFirst`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedCollection.html#addFirst(E)) method to `LinkedHashSet`, which adds an element to the start of the set.\r\n\r\n&gt; Adds an element as the first element of this collection (optional operation). After this operation completes normally, the given element will be a member of this collection, and it will be the first element in encounter order.","title":"Cost of inserting element at 0th position of LinkedHashSet?","body":"<p>Java 21 added the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedCollection.html#addFirst(E)\" rel=\"nofollow noreferrer\"><code>addFirst</code></a> method to <code>LinkedHashSet</code>, which adds an element to the start of the set.</p>\n<blockquote>\n<p>Adds an element as the first element of this collection (optional operation). After this operation completes normally, the given element will be a member of this collection, and it will be the first element in encounter order.</p>\n</blockquote>\n"}],"owner":{"account_id":110195,"reputation":38781,"user_id":291701,"accept_rate":66,"display_name":"user291701"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9734,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":3927475,"answer_count":6,"score":3,"last_activity_date":1695229441,"creation_date":1286998851,"question_id":3927355,"body_markdown":"I&#39;m using LinkedHashSet. I want to insert items at the 0th position, like:\r\n\r\n    Set&lt;String&gt; set = new LinkedHashSet&lt;String&gt;();\r\n    for (int i = 0; i &lt; n; i++) {\r\n        set.add(0, &quot;blah&quot; + i);\r\n    }\r\n\r\nI&#39;m not sure how linked hash set is implemented, is inserting going to physically move all addresses of current items, or is it the same cost as inserting as in a linked-list implementation?\r\n\r\nThank you\r\n\r\n------ Edit ---------------\r\n\r\nComplete mess up by me, was referencing ArrayList docs. The Set interface has no add(index, object) method. Is there a way to iterate over the set backwards then? Right now to iterate I&#39;m doing:\r\n\r\n    for (String it : set) {\r\n    }\r\n\r\ncan we do that in reverse?\r\n\r\nThanks","title":"Cost of inserting element at 0th position of LinkedHashSet?","body":"<p>I'm using LinkedHashSet. I want to insert items at the 0th position, like:</p>\n\n<pre><code>Set&lt;String&gt; set = new LinkedHashSet&lt;String&gt;();\nfor (int i = 0; i &lt; n; i++) {\n    set.add(0, \"blah\" + i);\n}\n</code></pre>\n\n<p>I'm not sure how linked hash set is implemented, is inserting going to physically move all addresses of current items, or is it the same cost as inserting as in a linked-list implementation?</p>\n\n<p>Thank you</p>\n\n<p>------ Edit ---------------</p>\n\n<p>Complete mess up by me, was referencing ArrayList docs. The Set interface has no add(index, object) method. Is there a way to iterate over the set backwards then? Right now to iterate I'm doing:</p>\n\n<pre><code>for (String it : set) {\n}\n</code></pre>\n\n<p>can we do that in reverse?</p>\n\n<p>Thanks</p>\n"},{"tags":["java","list","java-8","java-stream"],"comments":[{"owner":{"account_id":1175385,"reputation":22626,"user_id":1151521,"accept_rate":77,"display_name":"Aleksandr Dubinsky"},"score":12,"creation_date":1391622889,"post_id":21426843,"comment_id":32606762,"body_markdown":"Guava provides `Iterables.getLast` which takes Iterable but is optimized to work with `List`. A pet peeve is that it doesn&#39;t have `getFirst`. The `Stream` API in general is horribly anal, omitting lots of convenience methods. C#&#39;s LINQ, by constrast, is happy to provide `.Last()` and even `.Last(Func&lt;T,Boolean&gt; predicate)`, even though it supports infinite Enumerables too.","body":"Guava provides <code>Iterables.getLast</code> which takes Iterable but is optimized to work with <code>List</code>. A pet peeve is that it doesn&#39;t have <code>getFirst</code>. The <code>Stream</code> API in general is horribly anal, omitting lots of convenience methods. C#&#39;s LINQ, by constrast, is happy to provide <code>.Last()</code> and even <code>.Last(Func&lt;T,Boolean&gt; predicate)</code>, even though it supports infinite Enumerables too."},{"owner":{"account_id":2452410,"reputation":2272,"user_id":2138356,"accept_rate":88,"display_name":"fasth"},"score":0,"creation_date":1427078999,"post_id":21426843,"comment_id":46616936,"body_markdown":"@AleksandrDubinsky upvoted, but one note for readers. `Stream` API is not fully comparable to `LINQ` since both done in a very different paradigm. It is not worse or better it is just different. And definitely some methods are absent not because oracle devs are incompetent or mean :)","body":"@AleksandrDubinsky upvoted, but one note for readers. <code>Stream</code> API is not fully comparable to <code>LINQ</code> since both done in a very different paradigm. It is not worse or better it is just different. And definitely some methods are absent not because oracle devs are incompetent or mean :)"},{"owner":{"account_id":100622,"reputation":3010,"user_id":271149,"accept_rate":90,"display_name":"quantum"},"score":1,"creation_date":1433523003,"post_id":21426843,"comment_id":49405615,"body_markdown":"For a true one-liner, [this thread](http://stackoverflow.com/questions/27547519/most-efficient-way-to-get-the-last-element-of-a-stream) may be of use.","body":"For a true one-liner, <a href=\"http://stackoverflow.com/questions/27547519/most-efficient-way-to-get-the-last-element-of-a-stream\">this thread</a> may be of use."}],"answers":[{"comments":[{"owner":{"account_id":2347441,"reputation":67550,"user_id":2057294,"accept_rate":63,"display_name":"skiwi"},"score":0,"creation_date":1391026719,"post_id":21441634,"comment_id":32352800,"body_markdown":"Nice one, thanks! Do you by the way know if it is possibly to omit a name (perhaps by using a `_` or similar) in cases where you do not need a parameter? So would be: `.reduce((_, current) -&gt; current)` if only that aws valid syntax.","body":"Nice one, thanks! Do you by the way know if it is possibly to omit a name (perhaps by using a <code>_</code> or similar) in cases where you do not need a parameter? So would be: <code>.reduce((_, current) -&gt; current)</code> if only that aws valid syntax."},{"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"score":2,"creation_date":1391079130,"post_id":21441634,"comment_id":32375067,"body_markdown":"@skiwi you can use any legal variable name, for example: `.reduce(($, current) -&gt; current)` or `.reduce((__, current) -&gt; current)` (double underscore).","body":"@skiwi you can use any legal variable name, for example: <code>.reduce(($, current) -&gt; current)</code> or <code>.reduce((__, current) -&gt; current)</code> (double underscore)."},{"owner":{"account_id":1175385,"reputation":22626,"user_id":1151521,"accept_rate":77,"display_name":"Aleksandr Dubinsky"},"score":0,"creation_date":1391623099,"post_id":21441634,"comment_id":32606879,"body_markdown":"I doubt this will work for parallel streams, even if they&#39;re ordered.","body":"I doubt this will work for parallel streams, even if they&#39;re ordered."},{"owner":{"account_id":1370027,"reputation":49130,"user_id":1305501,"accept_rate":77,"display_name":"nosid"},"score":0,"creation_date":1391635841,"post_id":21441634,"comment_id":32614637,"body_markdown":"@AleksandrDubinsky: Why shouldn&#39;t it work for parallel streams? Take a look at the documentation: [Reduction Operations](http://download.java.net/jdk8/docs/api/java/util/stream/package-summary.html#Reduction).","body":"@AleksandrDubinsky: Why shouldn&#39;t it work for parallel streams? Take a look at the documentation: <a href=\"http://download.java.net/jdk8/docs/api/java/util/stream/package-summary.html#Reduction\" rel=\"nofollow noreferrer\">Reduction Operations</a>."},{"owner":{"account_id":1175385,"reputation":22626,"user_id":1151521,"accept_rate":77,"display_name":"Aleksandr Dubinsky"},"score":2,"creation_date":1391637985,"post_id":21441634,"comment_id":32615779,"body_markdown":"Technically, it may not work for any streams. The documentation that you point to, as well as for `Stream.reduce(BinaryOperator&lt;T&gt;)` makes no mention if `reduce` obeys encounter order, and a terminal operation is free to ignore encounter order even if the stream is ordered. As an aside, the word &quot;commutative&quot; doesn&#39;t appear in the Stream javadocs, so its absence does not tell us much.","body":"Technically, it may not work for any streams. The documentation that you point to, as well as for <code>Stream.reduce(BinaryOperator&lt;T&gt;)</code> makes no mention if <code>reduce</code> obeys encounter order, and a terminal operation is free to ignore encounter order even if the stream is ordered. As an aside, the word &quot;commutative&quot; doesn&#39;t appear in the Stream javadocs, so its absence does not tell us much."},{"owner":{"account_id":1370027,"reputation":49130,"user_id":1305501,"accept_rate":77,"display_name":"nosid"},"score":2,"creation_date":1391640199,"post_id":21441634,"comment_id":32616851,"body_markdown":"@AleksandrDubinsky: Exactly, the documentation doesn&#39;t mention _commutative_, because it is not relevant for the _reduce_ operation. The important part is: &quot;[..] A properly constructed reduce operation is inherently parallelizable, so long as the function(s) used to process the elements are associative [..].&quot;","body":"@AleksandrDubinsky: Exactly, the documentation doesn&#39;t mention <i>commutative</i>, because it is not relevant for the <i>reduce</i> operation. The important part is: &quot;[..] A properly constructed reduce operation is inherently parallelizable, so long as the function(s) used to process the elements are associative [..].&quot;"},{"owner":{"account_id":1175385,"reputation":22626,"user_id":1151521,"accept_rate":77,"display_name":"Aleksandr Dubinsky"},"score":0,"creation_date":1391694794,"post_id":21441634,"comment_id":32641235,"body_markdown":"The documentation doesn&#39;t mention &quot;commutative&quot; *anywhere*, even though it&#39;s relevant to many functions. The terminology that it uses is &quot;encounter order&quot;, and the `reduce` documentation makes no mention of it one way or the other. Therefore, we must assume that `reduce` does not obey ordering, and that a non-commutative function will produce undefined results.","body":"The documentation doesn&#39;t mention &quot;commutative&quot; <i>anywhere</i>, even though it&#39;s relevant to many functions. The terminology that it uses is &quot;encounter order&quot;, and the <code>reduce</code> documentation makes no mention of it one way or the other. Therefore, we must assume that <code>reduce</code> does not obey ordering, and that a non-commutative function will produce undefined results."},{"owner":{"account_id":1175385,"reputation":22626,"user_id":1151521,"accept_rate":77,"display_name":"Aleksandr Dubinsky"},"score":0,"creation_date":1391696088,"post_id":21441634,"comment_id":32642081,"body_markdown":"That said, the current implementation (from looking at `java.util.stream.ReduceOps`) seems to obey encounter order.","body":"That said, the current implementation (from looking at <code>java.util.stream.ReduceOps</code>) seems to obey encounter order."},{"owner":{"account_id":2024343,"reputation":924,"user_id":1809799,"display_name":"Ren&#233;"},"score":0,"creation_date":1417078259,"post_id":21441634,"comment_id":42824899,"body_markdown":"The class-comment of `java.util.Stream` says &quot;Note that if it is important that the elements for a given key appear in the order they appear in the source, then we cannot use a concurrent reduction, as ordering is one of the casualties of concurrent insertion. We would then be constrained to implement either a sequential reduction or a merge-based parallel reduction.&quot;","body":"The class-comment of <code>java.util.Stream</code> says &quot;Note that if it is important that the elements for a given key appear in the order they appear in the source, then we cannot use a concurrent reduction, as ordering is one of the casualties of concurrent insertion. We would then be constrained to implement either a sequential reduction or a merge-based parallel reduction.&quot;"},{"owner":{"account_id":1969329,"reputation":1414,"user_id":1768736,"accept_rate":74,"display_name":"FBB"},"score":0,"creation_date":1452774658,"post_id":21441634,"comment_id":57322524,"body_markdown":"I added an answer trying to address the concerns in these comments.","body":"I added an answer trying to address the concerns in these comments."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":0,"creation_date":1460986133,"post_id":21441634,"comment_id":60978862,"body_markdown":"@Aleksandr Dubinsky: there is no relevance of commutativity to *any* function in the Stream API. If you want to claim otherwise, name at least *one* for which it is.","body":"@Aleksandr Dubinsky: there is no relevance of commutativity to <i>any</i> function in the Stream API. If you want to claim otherwise, name at least <i>one</i> for which it is."},{"owner":{"account_id":1175385,"reputation":22626,"user_id":1151521,"accept_rate":77,"display_name":"Aleksandr Dubinsky"},"score":0,"creation_date":1461075324,"post_id":21441634,"comment_id":61026895,"body_markdown":"@Holger Define &quot;relevance.&quot; Anyway, to reiterate my point, which noone except @FBB seems to have appreciated, is that &quot;orderness&quot; of a Stream means nothing to a terminal operation, which is free to not declaring itself as preserving &quot;encounter order.&quot; Search for this term in the [javadocs](https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html). `reduce` happily leaves this aspect undefined. We must conclude, therefore, that conformant implementations are free to produce somewhat undefined results if the lambda is not commutative. Stream API sucks. All this drama over a trifle.","body":"@Holger Define &quot;relevance.&quot; Anyway, to reiterate my point, which noone except @FBB seems to have appreciated, is that &quot;orderness&quot; of a Stream means nothing to a terminal operation, which is free to not declaring itself as preserving &quot;encounter order.&quot; Search for this term in the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html\" rel=\"nofollow noreferrer\">javadocs</a>. <code>reduce</code> happily leaves this aspect undefined. We must conclude, therefore, that conformant implementations are free to produce somewhat undefined results if the lambda is not commutative. Stream API sucks. All this drama over a trifle."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":0,"creation_date":1461076660,"post_id":21441634,"comment_id":61027913,"body_markdown":"@Aleksandr Dubinsky: I like how you interpret the absence of a statement as “the implementor is free to do something undocumented”. That contradicts the fact that every method which is allowed to ignore the encounter order has an explicit statement about it, but never mind. Note that [the documentation regarding Associativity](https://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html#Associativity) clearly explains how that property relates to concurrent execution strategies and `reduce((a,b)-&gt;b)` is [an acknowledged solution](http://stackoverflow.com/a/27547525/2711488)…","body":"@Aleksandr Dubinsky: I like how you interpret the absence of a statement as “the implementor is free to do something undocumented”. That contradicts the fact that every method which is allowed to ignore the encounter order has an explicit statement about it, but never mind. Note that <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html#Associativity\" rel=\"nofollow noreferrer\">the documentation regarding Associativity</a> clearly explains how that property relates to concurrent execution strategies and <code>reduce((a,b)-&gt;b)</code> is <a href=\"http://stackoverflow.com/a/27547525/2711488\">an acknowledged solution</a>…"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":0,"creation_date":1461076939,"post_id":21441634,"comment_id":61028093,"body_markdown":"@Aleksandr Dubinsky: don’t get me wrong, I have to admit that the documentation has room for improvements, similar to [this issue](http://stackoverflow.com/q/36711845/2711488), but if someone like the Java Language Architect involved in the development of that API acknowledges that it is the intended way it should work, I’ll consider the deficiencies of the documentation as exactly that, documentation flaws, rather than room for contradicting implementations.","body":"@Aleksandr Dubinsky: don’t get me wrong, I have to admit that the documentation has room for improvements, similar to <a href=\"http://stackoverflow.com/q/36711845/2711488\">this issue</a>, but if someone like the Java Language Architect involved in the development of that API acknowledges that it is the intended way it should work, I’ll consider the deficiencies of the documentation as exactly that, documentation flaws, rather than room for contradicting implementations."},{"owner":{"account_id":1175385,"reputation":22626,"user_id":1151521,"accept_rate":77,"display_name":"Aleksandr Dubinsky"},"score":0,"creation_date":1461080518,"post_id":21441634,"comment_id":61030852,"body_markdown":"@Holger Whether reduce does or does not respect encounter order is not just a theoretical question of the spec. It&#39;s hugely important, because when a terminal operation does not respect encounter order, the whole pipeline becomes unordered. For example, the operation `skip` goes crazy on unordered parallel streams and can **skip the last element** for a short stream. This answer is possibly/likely wrong in the general case. The fact this isn&#39;t defined in the javadoc or the spec is criminal. Stream API sucks.","body":"@Holger Whether reduce does or does not respect encounter order is not just a theoretical question of the spec. It&#39;s hugely important, because when a terminal operation does not respect encounter order, the whole pipeline becomes unordered. For example, the operation <code>skip</code> goes crazy on unordered parallel streams and can <b>skip the last element</b> for a short stream. This answer is possibly/likely wrong in the general case. The fact this isn&#39;t defined in the javadoc or the spec is criminal. Stream API sucks."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1461081722,"post_id":21441634,"comment_id":61031736,"body_markdown":"@Aleksandr Dubinsky: of course, it’s not a “theoretical question of the spec”. It makes the difference between `reduce((a,b)-&gt;b)` being a correct solution for getting the last element (of an ordered stream,of course) or not. The statement of Brian Goetz makes a point, further the [API documentation](https://docs.oracle.com/javase/8/docs/api/?java/util/stream/package-summary.html) states that `reduce(&quot;&quot;, String::concat)` is an inefficient but correct solution for string concatenation, which implies maintenance of the encounter order.The intention is well-known,the documentation has to catch up.","body":"@Aleksandr Dubinsky: of course, it’s not a “theoretical question of the spec”. It makes the difference between <code>reduce((a,b)-&gt;b)</code> being a correct solution for getting the last element (of an ordered stream,of course) or not. The statement of Brian Goetz makes a point, further the <a href=\"https://docs.oracle.com/javase/8/docs/api/?java/util/stream/package-summary.html\" rel=\"nofollow noreferrer\">API documentation</a> states that <code>reduce(&quot;&quot;, String::concat)</code> is an inefficient but correct solution for string concatenation, which implies maintenance of the encounter order.The intention is well-known,the documentation has to catch up."},{"owner":{"account_id":4608728,"reputation":1184,"user_id":3737468,"accept_rate":100,"display_name":"devssh"},"score":0,"creation_date":1522683038,"post_id":21441634,"comment_id":86234634,"body_markdown":"What is the efficiency of this approach? Linear complexity is pretty bad. It seems to be going over the list reducing till it reaches the last element. What if the list is really big? Wouldn&#39;t it be faster if it was hashed and there was an inbuilt method to just get the last element","body":"What is the efficiency of this approach? Linear complexity is pretty bad. It seems to be going over the list reducing till it reaches the last element. What if the list is really big? Wouldn&#39;t it be faster if it was hashed and there was an inbuilt method to just get the last element"},{"owner":{"account_id":370416,"reputation":7024,"user_id":718333,"accept_rate":73,"display_name":"fernandohur"},"score":0,"creation_date":1527859092,"post_id":21441634,"comment_id":88298990,"body_markdown":"@devssh Streams are lazy constructs, you cannot assume that you have all elements in the stream in memory at all times so you can&#39;t do better than `O(n)` in general.","body":"@devssh Streams are lazy constructs, you cannot assume that you have all elements in the stream in memory at all times so you can&#39;t do better than <code>O(n)</code> in general."},{"owner":{"account_id":4608728,"reputation":1184,"user_id":3737468,"accept_rate":100,"display_name":"devssh"},"score":0,"creation_date":1528193602,"post_id":21441634,"comment_id":88404139,"body_markdown":"@fernandohur Yes I agree, but this feels like a mapreduce to get the last element while all it needs is to access the last element by memory. Looks like the job of an array but arrays are inherently imperative instead of declarative. Fits the criteria for an inbuilt method called last()?","body":"@fernandohur Yes I agree, but this feels like a mapreduce to get the last element while all it needs is to access the last element by memory. Looks like the job of an array but arrays are inherently imperative instead of declarative. Fits the criteria for an inbuilt method called last()?"},{"owner":{"account_id":238684,"reputation":22543,"user_id":507738,"accept_rate":71,"display_name":"MC Emperor"},"score":0,"creation_date":1592659129,"post_id":21441634,"comment_id":110506778,"body_markdown":"For readers for which it is not immediately clear where `get()` comes from: `reduce(BinaryOperator)` returns an `Optional` containing the element, or an empty optional if the stream is empty. `get()` will in such case throw a `NoSuchElementException`.","body":"For readers for which it is not immediately clear where <code>get()</code> comes from: <code>reduce(BinaryOperator)</code> returns an <code>Optional</code> containing the element, or an empty optional if the stream is empty. <code>get()</code> will in such case throw a <code>NoSuchElementException</code>."}],"tags":[],"owner":{"account_id":1370027,"reputation":49130,"user_id":1305501,"accept_rate":77,"display_name":"nosid"},"comment_count":20,"down_vote_count":0,"up_vote_count":254,"is_accepted":true,"score":254,"last_activity_date":1547520841,"creation_date":1391026384,"answer_id":21441634,"question_id":21426843,"body_markdown":"It is possible to get the last element with the method [Stream::reduce][1]. The following listing contains a minimal example for the general case:\r\n\r\n    Stream&lt;T&gt; stream = ...; // sequential or parallel stream\r\n    Optional&lt;T&gt; last = stream.reduce((first, second) -&gt; second);\r\n\r\nThis implementations works for all [ordered streams][2] (including streams created from [Lists][3]). For [unordered][4] streams it is for obvious reasons unspecified which element will be returned.\r\n\r\nThe implementation works for both **sequential** and **parallel streams**. That might be surprising at first glance, and unfortunately the documentation doesn&#39;t state it explicitly. However, it is an important feature of streams, and I try to clarify it:\r\n\r\n- The Javadoc for the method [Stream::reduce][1] states, that it _&quot;is **not** constrained to execute **sequentially**&quot;_.\r\n- The Javadoc also requires that the _&quot;accumulator function must be an **associative**, **non-interfering**, **stateless** function for combining two values&quot;_, which is obviously the case for the lambda expression `(first, second) -&gt; second`.\r\n- The Javadoc for [reduction operations][5] states: _&quot;The streams classes have multiple forms of general reduction operations, called [reduce()][1] and [collect()][6] [..]&quot;_ and _&quot;a properly constructed reduce operation is **inherently parallelizable**, so long as the function(s) used to process the elements are [associative][7] and [stateless][8].&quot;_\r\n\r\nThe documentation for the closely related [Collectors][9] is even more explicit: _&quot;To ensure that **sequential** and **parallel executions** produce **equivalent results**, the collector functions must satisfy an identity and an [associativity][7] constraints.&quot;_\r\n\r\n---\r\n\r\nBack to the original question: The following code stores a reference to the last element in the variable `last` and throws an exception if the stream is empty. The complexity is linear in the length of the stream.\r\n\r\n    CArea last = data.careas\r\n                     .stream()\r\n                     .filter(c -&gt; c.bbox.orientationHorizontal)\r\n                     .reduce((first, second) -&gt; second).get();\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#reduce-java.util.function.BinaryOperator-\r\n  [2]: http://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html#Ordering\r\n  [3]: http://docs.oracle.com/javase/8/docs/api/java/util/List.html\r\n  [4]: http://docs.oracle.com/javase/8/docs/api/java/util/stream/BaseStream.html#unordered--\r\n  [5]: http://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html#Reduction\r\n  [6]: http://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#collect-java.util.stream.Collector-\r\n  [7]: http://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html#Associativity\r\n  [8]: http://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html#NonInterfering\r\n  [9]: http://docs.oracle.com/javase/8/docs/api/java/util/stream/Collector.html","title":"Get last element of Stream/List in a one-liner","body":"<p>It is possible to get the last element with the method <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#reduce-java.util.function.BinaryOperator-\" rel=\"noreferrer\">Stream::reduce</a>. The following listing contains a minimal example for the general case:</p>\n\n<pre><code>Stream&lt;T&gt; stream = ...; // sequential or parallel stream\nOptional&lt;T&gt; last = stream.reduce((first, second) -&gt; second);\n</code></pre>\n\n<p>This implementations works for all <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html#Ordering\" rel=\"noreferrer\">ordered streams</a> (including streams created from <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/List.html\" rel=\"noreferrer\">Lists</a>). For <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/stream/BaseStream.html#unordered--\" rel=\"noreferrer\">unordered</a> streams it is for obvious reasons unspecified which element will be returned.</p>\n\n<p>The implementation works for both <strong>sequential</strong> and <strong>parallel streams</strong>. That might be surprising at first glance, and unfortunately the documentation doesn't state it explicitly. However, it is an important feature of streams, and I try to clarify it:</p>\n\n<ul>\n<li>The Javadoc for the method <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#reduce-java.util.function.BinaryOperator-\" rel=\"noreferrer\">Stream::reduce</a> states, that it <em>\"is <strong>not</strong> constrained to execute <strong>sequentially</strong>\"</em>.</li>\n<li>The Javadoc also requires that the <em>\"accumulator function must be an <strong>associative</strong>, <strong>non-interfering</strong>, <strong>stateless</strong> function for combining two values\"</em>, which is obviously the case for the lambda expression <code>(first, second) -&gt; second</code>.</li>\n<li>The Javadoc for <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html#Reduction\" rel=\"noreferrer\">reduction operations</a> states: <em>\"The streams classes have multiple forms of general reduction operations, called <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#reduce-java.util.function.BinaryOperator-\" rel=\"noreferrer\">reduce()</a> and <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#collect-java.util.stream.Collector-\" rel=\"noreferrer\">collect()</a> [..]\"</em> and <em>\"a properly constructed reduce operation is <strong>inherently parallelizable</strong>, so long as the function(s) used to process the elements are <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html#Associativity\" rel=\"noreferrer\">associative</a> and <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html#NonInterfering\" rel=\"noreferrer\">stateless</a>.\"</em></li>\n</ul>\n\n<p>The documentation for the closely related <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/stream/Collector.html\" rel=\"noreferrer\">Collectors</a> is even more explicit: <em>\"To ensure that <strong>sequential</strong> and <strong>parallel executions</strong> produce <strong>equivalent results</strong>, the collector functions must satisfy an identity and an <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html#Associativity\" rel=\"noreferrer\">associativity</a> constraints.\"</em></p>\n\n<hr>\n\n<p>Back to the original question: The following code stores a reference to the last element in the variable <code>last</code> and throws an exception if the stream is empty. The complexity is linear in the length of the stream.</p>\n\n<pre><code>CArea last = data.careas\n                 .stream()\n                 .filter(c -&gt; c.bbox.orientationHorizontal)\n                 .reduce((first, second) -&gt; second).get();\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":1,"creation_date":1581540931,"post_id":32986329,"comment_id":106473627,"body_markdown":"And you can easily convert a stream to an iterable: `Iterables.getLast(() -&gt; data.careas.stream().filter(c -&gt; c.bbox.orientationHorizontal).iterator())`","body":"And you can easily convert a stream to an iterable: <code>Iterables.getLast(() -&gt; data.careas.stream().filter(c -&gt; c.bbox.orientationHorizontal).iterator())</code>"}],"tags":[],"owner":{"account_id":1831014,"reputation":1670,"user_id":1662412,"accept_rate":75,"display_name":"Peti"},"comment_count":1,"down_vote_count":2,"up_vote_count":56,"is_accepted":false,"score":54,"last_activity_date":1444203293,"creation_date":1444203293,"answer_id":32986329,"question_id":21426843,"body_markdown":"If you have a Collection (or more general an Iterable) you can use Google Guava&#39;s \r\n\r\n    Iterables.getLast(myIterable)\r\n\r\nas handy oneliner.","title":"Get last element of Stream/List in a one-liner","body":"<p>If you have a Collection (or more general an Iterable) you can use Google Guava's </p>\n\n<pre><code>Iterables.getLast(myIterable)\n</code></pre>\n\n<p>as handy oneliner.</p>\n"},{"tags":[],"owner":{"account_id":1336579,"reputation":5252,"user_id":1279180,"accept_rate":74,"display_name":"nimo23"},"comment_count":0,"down_vote_count":9,"up_vote_count":26,"is_accepted":false,"score":17,"last_activity_date":1623710514,"creation_date":1504079280,"answer_id":45954796,"question_id":21426843,"body_markdown":"One liner (no need for stream;):\r\n\r\n    Object lastElement = list.isEmpty() ? null : list.get(list.size()-1);","title":"Get last element of Stream/List in a one-liner","body":"<p>One liner (no need for stream;):</p>\n<pre><code>Object lastElement = list.isEmpty() ? null : list.get(list.size()-1);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":62626,"reputation":10896,"user_id":185919,"accept_rate":89,"display_name":"java.is.for.desktop"},"score":3,"creation_date":1543655496,"post_id":51152724,"comment_id":94003565,"body_markdown":"Note: you shouldn&#39;t rely on stream&#39;s &quot;skip&quot; when dealing with huge collections (millions of entries), because &quot;skip&quot; is implemented by iterating through all elements until the Nth number is reached. Tried it. Was very disappointed by the performance, compared to a simple get-by-index operation.","body":"Note: you shouldn&#39;t rely on stream&#39;s &quot;skip&quot; when dealing with huge collections (millions of entries), because &quot;skip&quot; is implemented by iterating through all elements until the Nth number is reached. Tried it. Was very disappointed by the performance, compared to a simple get-by-index operation."},{"owner":{"account_id":9685252,"reputation":81,"user_id":7185323,"display_name":"Jindra Vysock&#253;"},"score":3,"creation_date":1576259637,"post_id":51152724,"comment_id":104854499,"body_markdown":"also if list is empty, it will throw `ArrayIndexOutOfBoundsException`","body":"also if list is empty, it will throw <code>ArrayIndexOutOfBoundsException</code>"},{"owner":{"account_id":5606695,"reputation":130,"user_id":4441019,"accept_rate":62,"display_name":"Don Woodward"},"score":1,"creation_date":1604192935,"post_id":51152724,"comment_id":114271894,"body_markdown":"What if its not a list ? Get wont be available , I had a requirement to take a set and stream it and then the above solution was working. There is no option in linkedhashset to get last or nth element from back without iterating thru elements. I upvoted this to save the author from drowning :D","body":"What if its not a list ? Get wont be available , I had a requirement to take a set and stream it and then the above solution was working. There is no option in linkedhashset to get last or nth element from back without iterating thru elements. I upvoted this to save the author from drowning :D"}],"tags":[],"owner":{"account_id":3375164,"reputation":81,"user_id":2833429,"display_name":"Parag Vaidya"},"comment_count":3,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1530615002,"creation_date":1530615002,"answer_id":51152724,"question_id":21426843,"body_markdown":"You can also use skip() function as below...\r\n\r\n    long count = data.careas.count();\r\n    CArea last = data.careas.stream().skip(count - 1).findFirst().get();\r\n\r\nit&#39;s super simple to use.","title":"Get last element of Stream/List in a one-liner","body":"<p>You can also use skip() function as below...</p>\n\n<pre><code>long count = data.careas.count();\nCArea last = data.careas.stream().skip(count - 1).findFirst().get();\n</code></pre>\n\n<p>it's super simple to use.</p>\n"},{"comments":[{"owner":{"account_id":362885,"reputation":37276,"user_id":706317,"accept_rate":70,"display_name":"ZhekaKozlov"},"score":1,"creation_date":1560587189,"post_id":56028497,"comment_id":99792566,"body_markdown":"This should be an accepted answer","body":"This should be an accepted answer"},{"owner":{"account_id":1056871,"reputation":117749,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":1,"creation_date":1564606114,"post_id":56028497,"comment_id":101091227,"body_markdown":"@ZhekaKozlov sort of... Holger&#39;s showed some flaws with it [here](https://stackoverflow.com/questions/55490332/guavas-streamsfindlast-implementation)","body":"@ZhekaKozlov sort of... Holger&#39;s showed some flaws with it <a href=\"https://stackoverflow.com/questions/55490332/guavas-streamsfindlast-implementation\">here</a>"}],"tags":[],"owner":{"account_id":9490046,"reputation":4121,"user_id":7055206,"accept_rate":56,"display_name":"k13i"},"comment_count":2,"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1557253476,"creation_date":1557253476,"answer_id":56028497,"question_id":21426843,"body_markdown":"Guava has dedicated method for this case:\r\n\r\n    Stream&lt;T&gt; stream = ...;\r\n    Optional&lt;T&gt; lastItem = Streams.findLast(stream);\r\nIt&#39;s equivalent to `stream.reduce((a, b) -&gt; b)` but creators claim it has much better performance.\r\n\r\nFrom [documentation][1]:\r\n\r\n&gt; This method&#39;s runtime will be between O(log n) and O(n), performing\r\n&gt; better on efficiently splittable streams.\r\n\r\nIt&#39;s worth to mention that if stream is unordered this method behaves like `findAny()`.\r\n  [1]: https://google.github.io/guava/releases/21.0/api/docs/com/google/common/collect/Streams.html#findLast-java.util.stream.Stream-","title":"Get last element of Stream/List in a one-liner","body":"<p>Guava has dedicated method for this case:</p>\n\n<pre><code>Stream&lt;T&gt; stream = ...;\nOptional&lt;T&gt; lastItem = Streams.findLast(stream);\n</code></pre>\n\n<p>It's equivalent to <code>stream.reduce((a, b) -&gt; b)</code> but creators claim it has much better performance.</p>\n\n<p>From <a href=\"https://google.github.io/guava/releases/21.0/api/docs/com/google/common/collect/Streams.html#findLast-java.util.stream.Stream-\" rel=\"noreferrer\">documentation</a>:</p>\n\n<blockquote>\n  <p>This method's runtime will be between O(log n) and O(n), performing\n  better on efficiently splittable streams.</p>\n</blockquote>\n\n<p>It's worth to mention that if stream is unordered this method behaves like <code>findAny()</code>.</p>\n"},{"tags":[],"owner":{"account_id":6000028,"reputation":677,"user_id":4713594,"display_name":"Himanshu Ahire"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1588697460,"creation_date":1588697460,"answer_id":61618504,"question_id":21426843,"body_markdown":"If you need to get the last N number of elements. Closure can be used.\r\nThe below code maintains an external queue of fixed size until, the stream reaches the end.\r\n\r\n        final Queue&lt;Integer&gt; queue = new LinkedList&lt;&gt;();\r\n        final int N=5;\r\n        list.stream().peek((z) -&gt; {\r\n            queue.offer(z);\r\n            if (queue.size() &gt; N)\r\n                queue.poll();\r\n        }).count();\r\n\r\nAnother option could be to use reduce operation using identity as a Queue.\r\n\r\n        final int lastN=3;\r\n        Queue&lt;Integer&gt; reduce1 = list.stream()\r\n        .reduce( \r\n            (Queue&lt;Integer&gt;)new LinkedList&lt;Integer&gt;(), \r\n            (m, n) -&gt; {\r\n                m.offer(n);\r\n                if (m.size() &gt; lastN)\r\n                   m.poll();\r\n                return m;\r\n        }, (m, n) -&gt; m);\r\n\r\n        System.out.println(&quot;reduce1 = &quot; + reduce1);","title":"Get last element of Stream/List in a one-liner","body":"<p>If you need to get the last N number of elements. Closure can be used.\nThe below code maintains an external queue of fixed size until, the stream reaches the end.</p>\n\n<pre><code>    final Queue&lt;Integer&gt; queue = new LinkedList&lt;&gt;();\n    final int N=5;\n    list.stream().peek((z) -&gt; {\n        queue.offer(z);\n        if (queue.size() &gt; N)\n            queue.poll();\n    }).count();\n</code></pre>\n\n<p>Another option could be to use reduce operation using identity as a Queue.</p>\n\n<pre><code>    final int lastN=3;\n    Queue&lt;Integer&gt; reduce1 = list.stream()\n    .reduce( \n        (Queue&lt;Integer&gt;)new LinkedList&lt;Integer&gt;(), \n        (m, n) -&gt; {\n            m.offer(n);\n            if (m.size() &gt; lastN)\n               m.poll();\n            return m;\n    }, (m, n) -&gt; m);\n\n    System.out.println(\"reduce1 = \" + reduce1);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11213388,"reputation":51,"user_id":11719375,"display_name":"sumit singh"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1604462209,"creation_date":1604462209,"answer_id":64674044,"question_id":21426843,"body_markdown":"Another way to get the last element is by using sort.\r\n\r\n        Optional&lt;CArea&gt; num=data.careas.stream().sorted((a,b)-&gt;-1).findFirst();\r\n\r\n","title":"Get last element of Stream/List in a one-liner","body":"<p>Another way to get the last element is by using sort.</p>\n<pre><code>    Optional&lt;CArea&gt; num=data.careas.stream().sorted((a,b)-&gt;-1).findFirst();\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3407058,"reputation":125,"user_id":2857885,"display_name":"Jeff"},"score":1,"creation_date":1675243234,"post_id":68295391,"comment_id":132884483,"body_markdown":"You can use max() like this : list.stream().max(Comparator.comparing(obj::getSequence)).get();","body":"You can use max() like this : list.stream().max(Comparator.comparing(obj::getSequence)).ge&zwnj;&#8203;t();"}],"tags":[],"owner":{"account_id":10603787,"reputation":63,"user_id":7809939,"display_name":"elesg"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1625716190,"creation_date":1625716190,"answer_id":68295391,"question_id":21426843,"body_markdown":"    list.stream().sorted(Comparator.comparing(obj::getSequence).reversed()).findFirst().get();\r\n\r\nreverse the order and get the first element from the list. here object has sequence number, Comparator provides multiple functionalities can be used as per logic.","title":"Get last element of Stream/List in a one-liner","body":"<pre><code>list.stream().sorted(Comparator.comparing(obj::getSequence).reversed()).findFirst().get();\n</code></pre>\n<p>reverse the order and get the first element from the list. here object has sequence number, Comparator provides multiple functionalities can be used as per logic.</p>\n"},{"tags":[],"owner":{"account_id":938378,"reputation":9,"user_id":966905,"display_name":"spyr01d"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1654353625,"creation_date":1654352937,"answer_id":72500570,"question_id":21426843,"body_markdown":"One more approach. Pair will have first and last elements: \r\n\r\n        List&lt;Object&gt; pair = new ArrayList&lt;&gt;();\r\n        dataStream.ForEach(o -&gt; {\r\n            if (pair.size() == 0) {\r\n                pair.add(o);\r\n                pair.add(o);\r\n            }\r\n            pair.set(1, o);\r\n        });\r\n","title":"Get last element of Stream/List in a one-liner","body":"<p>One more approach. Pair will have first and last elements:</p>\n<pre><code>    List&lt;Object&gt; pair = new ArrayList&lt;&gt;();\n    dataStream.ForEach(o -&gt; {\n        if (pair.size() == 0) {\n            pair.add(o);\n            pair.add(o);\n        }\n        pair.set(1, o);\n    });\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3155790,"reputation":14985,"user_id":2668232,"accept_rate":100,"display_name":"Oleksandr Pyrohov"},"score":1,"creation_date":1693946584,"post_id":76896422,"comment_id":135826087,"body_markdown":"As it&#39;s Java 21, then `collect(Collectors.toList())` can be replaced with just `toList()`. But also note that it will throw NoSuchElementException if the list will be empty.","body":"As it&#39;s Java 21, then <code>collect(Collectors.toList())</code> can be replaced with just <code>toList()</code>. But also note that it will throw NoSuchElementException if the list will be empty."}],"tags":[],"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"comment_count":1,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1695229397,"creation_date":1691990316,"answer_id":76896422,"question_id":21426843,"body_markdown":"Java 21 added the [`getLast()`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html#getLast()) method to the `List` interface, which returns the last element of the list.\r\n\r\n```lang-java\r\nCArea last = data.careas.stream()\r\n                 .filter(c -&gt; c.bbox.orientationHorizontal)\r\n                 .collect(Collectors.toList())\r\n                 .getLast();\r\n```\r\n\r\nAlso added was the [`getFirst()`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html#getFirst()) method, which addresses your point about not having this functionality on the `List` interface being a pain.","title":"Get last element of Stream/List in a one-liner","body":"<p>Java 21 added the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html#getLast()\" rel=\"nofollow noreferrer\"><code>getLast()</code></a> method to the <code>List</code> interface, which returns the last element of the list.</p>\n<pre class=\"lang-java prettyprint-override\"><code>CArea last = data.careas.stream()\n                 .filter(c -&gt; c.bbox.orientationHorizontal)\n                 .collect(Collectors.toList())\n                 .getLast();\n</code></pre>\n<p>Also added was the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html#getFirst()\" rel=\"nofollow noreferrer\"><code>getFirst()</code></a> method, which addresses your point about not having this functionality on the <code>List</code> interface being a pain.</p>\n"}],"owner":{"account_id":2347441,"reputation":67550,"user_id":2057294,"accept_rate":63,"display_name":"skiwi"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":160427,"favorite_count":0,"down_vote_count":1,"up_vote_count":164,"accepted_answer_id":21441634,"answer_count":10,"score":163,"last_activity_date":1695229397,"creation_date":1390987507,"question_id":21426843,"body_markdown":"How can I get the last element of a stream or list in the following code?\r\n\r\nWhere `data.careas` is a `List&lt;CArea&gt;`:\r\n\r\n    CArea first = data.careas.stream()\r\n                      .filter(c -&gt; c.bbox.orientationHorizontal).findFirst().get();\r\n\r\n    CArea last = data.careas.stream()\r\n                     .filter(c -&gt; c.bbox.orientationHorizontal)\r\n                     .collect(Collectors.toList()).; //how to?\r\n\r\nAs you can see getting the first element, with a certain `filter`, is not hard.\r\n\r\nHowever getting the last element in a one-liner is a real pain:\r\n\r\n- It seems I cannot obtain it directly from a `Stream`. (It would only make sense for finite streams)\r\n- It also seems that you cannot get things like `first()` and `last()` from the `List` interface, which is really a pain.\r\n\r\nI do not see any argument for not providing a `first()` and `last()` method in the `List` interface, as the elements in there, are ordered, and moreover the size is known.\r\n\r\nBut as per the original answer: How to get the last element of a finite `Stream`?\r\n\r\nPersonally, this is the closest I could get:\r\n\r\n    int lastIndex = data.careas.stream()\r\n            .filter(c -&gt; c.bbox.orientationHorizontal)\r\n            .mapToInt(c -&gt; data.careas.indexOf(c)).max().getAsInt();\r\n    CArea last = data.careas.get(lastIndex);\r\n\r\nHowever it does involve, using an `indexOf` on every element, which is most likely not you generally want as it can impair performance.","title":"Get last element of Stream/List in a one-liner","body":"<p>How can I get the last element of a stream or list in the following code?</p>\n\n<p>Where <code>data.careas</code> is a <code>List&lt;CArea&gt;</code>:</p>\n\n<pre><code>CArea first = data.careas.stream()\n                  .filter(c -&gt; c.bbox.orientationHorizontal).findFirst().get();\n\nCArea last = data.careas.stream()\n                 .filter(c -&gt; c.bbox.orientationHorizontal)\n                 .collect(Collectors.toList()).; //how to?\n</code></pre>\n\n<p>As you can see getting the first element, with a certain <code>filter</code>, is not hard.</p>\n\n<p>However getting the last element in a one-liner is a real pain:</p>\n\n<ul>\n<li>It seems I cannot obtain it directly from a <code>Stream</code>. (It would only make sense for finite streams)</li>\n<li>It also seems that you cannot get things like <code>first()</code> and <code>last()</code> from the <code>List</code> interface, which is really a pain.</li>\n</ul>\n\n<p>I do not see any argument for not providing a <code>first()</code> and <code>last()</code> method in the <code>List</code> interface, as the elements in there, are ordered, and moreover the size is known.</p>\n\n<p>But as per the original answer: How to get the last element of a finite <code>Stream</code>?</p>\n\n<p>Personally, this is the closest I could get:</p>\n\n<pre><code>int lastIndex = data.careas.stream()\n        .filter(c -&gt; c.bbox.orientationHorizontal)\n        .mapToInt(c -&gt; data.careas.indexOf(c)).max().getAsInt();\nCArea last = data.careas.get(lastIndex);\n</code></pre>\n\n<p>However it does involve, using an <code>indexOf</code> on every element, which is most likely not you generally want as it can impair performance.</p>\n"},{"tags":["java","collections"],"answers":[{"comments":[{"owner":{"account_id":277416,"reputation":681878,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":0,"creation_date":1492211558,"post_id":43420365,"comment_id":73899824,"body_markdown":"A Deque doesn&#39;t allow setting the first and last element. Only inserting at the head/tail of the queue.","body":"A Deque doesn&#39;t allow setting the first and last element. Only inserting at the head/tail of the queue."},{"owner":{"account_id":3942908,"reputation":350,"user_id":3256585,"display_name":"JBWanscher"},"score":0,"creation_date":1492211868,"post_id":43420365,"comment_id":73899909,"body_markdown":"That is easily solved by using the RemoveLast and RemoveFirst before inserting with AddLast and AddFirst.","body":"That is easily solved by using the RemoveLast and RemoveFirst before inserting with AddLast and AddFirst."}],"tags":[],"owner":{"account_id":3942908,"reputation":350,"user_id":3256585,"display_name":"JBWanscher"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1514869486,"creation_date":1492211465,"answer_id":43420365,"question_id":43420337,"body_markdown":"In the case that first and last are the only elements you actually access I would suggest that you use a `java.util.Deque&lt;T&gt;` instead of a `List`.","title":"Java List addressing first and last elements","body":"<p>In the case that first and last are the only elements you actually access I would suggest that you use a <code>java.util.Deque&lt;T&gt;</code> instead of a <code>List</code>.</p>\n"},{"comments":[{"owner":{"account_id":53783,"reputation":2967,"user_id":160831,"accept_rate":75,"display_name":"Pradyot"},"score":0,"creation_date":1492212085,"post_id":43420380,"comment_id":73899957,"body_markdown":"But then i assume get would be O(n). I guess what I am really looking for is the convenience of a C++ vector (which supports a front() and back() along with constant time access to random indices). From what i can tell that doesn&#39;t exist. Just wanted to be sure.","body":"But then i assume get would be O(n). I guess what I am really looking for is the convenience of a C++ vector (which supports a front() and back() along with constant time access to random indices). From what i can tell that doesn&#39;t exist. Just wanted to be sure."}],"tags":[],"owner":{"account_id":435799,"reputation":22985,"user_id":822588,"accept_rate":94,"display_name":"Sleiman Jneidi"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1492211543,"creation_date":1492211543,"answer_id":43420380,"question_id":43420337,"body_markdown":"If you use `LinkedList` you can get the last and first elements.\r\n\r\n    LinkedList&lt;String&gt; linkedList = new LinkedList&lt;&gt;();\r\n    linkedList.add(&quot;element&quot;);\r\n    \r\n    String last = linkedList.getLast();\r\n    String first = linkedList.getFirst();\r\n\r\nBoth operations are constant time, but a `NoSuchElementException` will be thrown if the list is empty.\r\n","title":"Java List addressing first and last elements","body":"<p>If you use <code>LinkedList</code> you can get the last and first elements.</p>\n\n<pre><code>LinkedList&lt;String&gt; linkedList = new LinkedList&lt;&gt;();\nlinkedList.add(\"element\");\n\nString last = linkedList.getLast();\nString first = linkedList.getFirst();\n</code></pre>\n\n<p>Both operations are constant time, but a <code>NoSuchElementException</code> will be thrown if the list is empty.</p>\n"},{"tags":[],"owner":{"account_id":4475914,"reputation":14398,"user_id":3641067,"accept_rate":73,"display_name":"bur&#230;quete"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1492212832,"creation_date":1492212183,"answer_id":43420468,"question_id":43420337,"body_markdown":"I&#39;d prefer to use Google Guava&#39;s `Iterables` [util class][1];\r\n\r\n    Iterables.getFirst(myList);\r\n    Iterables.getLast(myList);\r\n\r\nOn top of this, it has a safe logic where you can give a default value in case the list is empty/null.\r\n\r\n    Iterables.getFirst(myList, defaultVal);\r\n    Iterables.getLast(myList, defaultVal);\r\n\r\n\r\n  [1]: https://google.github.io/guava/releases/snapshot/api/docs/com/google/common/collect/Iterables.html","title":"Java List addressing first and last elements","body":"<p>I'd prefer to use Google Guava's <code>Iterables</code> <a href=\"https://google.github.io/guava/releases/snapshot/api/docs/com/google/common/collect/Iterables.html\" rel=\"nofollow noreferrer\">util class</a>;</p>\n\n<pre><code>Iterables.getFirst(myList);\nIterables.getLast(myList);\n</code></pre>\n\n<p>On top of this, it has a safe logic where you can give a default value in case the list is empty/null.</p>\n\n<pre><code>Iterables.getFirst(myList, defaultVal);\nIterables.getLast(myList, defaultVal);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1695229348,"creation_date":1691990944,"answer_id":76896453,"question_id":43420337,"body_markdown":"Regarding retrieving the first and last elements, Java 21 added methods [`getFirst()`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html#getFirst()) and [`getLast()`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html#getLast()) to the `List` interface.\r\n\r\n```lang-java\r\ncurr.getLast();\r\ncurr.getFirst();\r\n```\r\n","title":"Java List addressing first and last elements","body":"<p>Regarding retrieving the first and last elements, Java 21 added methods <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html#getFirst()\" rel=\"nofollow noreferrer\"><code>getFirst()</code></a> and <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html#getLast()\" rel=\"nofollow noreferrer\"><code>getLast()</code></a> to the <code>List</code> interface.</p>\n<pre class=\"lang-java prettyprint-override\"><code>curr.getLast();\ncurr.getFirst();\n</code></pre>\n"}],"owner":{"account_id":53783,"reputation":2967,"user_id":160831,"accept_rate":75,"display_name":"Pradyot"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":977,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":43420380,"answer_count":4,"score":3,"last_activity_date":1695229348,"creation_date":1492211203,"question_id":43420337,"body_markdown":"Is there any better way to access the first and last locations on a java list other than\r\n\r\n    curr.set(curr.size()-1, 10);\r\n    curr.get(curr.size()-1);\r\n    curr.set(0, 10);\r\n    curr.get(0);\r\nWhere curr can be assumed to be a list.\r\n","title":"Java List addressing first and last elements","body":"<p>Is there any better way to access the first and last locations on a java list other than</p>\n\n<pre><code>curr.set(curr.size()-1, 10);\ncurr.get(curr.size()-1);\ncurr.set(0, 10);\ncurr.get(0);\n</code></pre>\n\n<p>Where curr can be assumed to be a list.</p>\n"},{"tags":["java","collections"],"comments":[{"owner":{"account_id":2496,"reputation":266244,"user_id":3474,"accept_rate":83,"display_name":"erickson"},"score":1,"creation_date":1237241448,"post_id":652311,"comment_id":465647,"body_markdown":"You mean, you need to iterate it forwards *and* backwards? Otherwise, just reverse your Comparator.","body":"You mean, you need to iterate it forwards <i>and</i> backwards? Otherwise, just reverse your Comparator."}],"answers":[{"tags":[],"owner":{"account_id":28164,"reputation":60109,"user_id":74939,"display_name":"Stephan202"},"comment_count":0,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1237242094,"creation_date":1237241568,"answer_id":652341,"question_id":652311,"body_markdown":"You could define a SortedMap such as a [TreeMap][1] with a custom [Comparator][2] that reverses the sorting order. If you need to iterate in both directions, then maybe it&#39;s feasible to keep *two* copies of the data structure in memory?\r\n\r\n  [1]: http://java.sun.com/javase/6/docs/api/java/util/TreeMap.html\r\n  [2]: http://java.sun.com/javase/6/docs/api/java/util/Comparator.html","title":"The best way to iterate SortedSet / SortedMap in Java backwards","body":"<p>You could define a SortedMap such as a <a href=\"http://java.sun.com/javase/6/docs/api/java/util/TreeMap.html\" rel=\"nofollow noreferrer\">TreeMap</a> with a custom <a href=\"http://java.sun.com/javase/6/docs/api/java/util/Comparator.html\" rel=\"nofollow noreferrer\">Comparator</a> that reverses the sorting order. If you need to iterate in both directions, then maybe it's feasible to keep <em>two</em> copies of the data structure in memory?</p>\n"},{"comments":[{"owner":{"account_id":27967,"reputation":2654,"user_id":74275,"accept_rate":94,"display_name":"Alexander Temerev"},"score":0,"creation_date":1237241976,"post_id":652359,"comment_id":465671,"body_markdown":"Array copy — every method call, more than 1000 times a second?! :)","body":"Array copy — every method call, more than 1000 times a second?! :)"},{"owner":{"account_id":18835,"reputation":82201,"user_id":43582,"accept_rate":83,"display_name":"Bombe"},"score":0,"creation_date":1237243577,"post_id":652359,"comment_id":465744,"body_markdown":"Of course. Copying an array is about the fastest thing you can do in Java. Short benchmark: Copying a SortedSet with 1000 Objects and a custom Comparator that reverses the sort order takes about 0.8 ms. And that’s not even “just” a copy but also reverses the sort order. So, yes, it’s fast.","body":"Of course. Copying an array is about the fastest thing you can do in Java. Short benchmark: Copying a SortedSet with 1000 Objects and a custom Comparator that reverses the sort order takes about 0.8 ms. And that’s not even “just” a copy but also reverses the sort order. So, yes, it’s fast."},{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1237325414,"post_id":652359,"comment_id":469605,"body_markdown":"I said &quot;you need to update it as well as your collection whenever it changes.&quot; not every method call. And you don&#39;t need to reverse sort an array if its already sorted.","body":"I said &quot;you need to update it as well as your collection whenever it changes.&quot; not every method call. And you don&#39;t need to reverse sort an array if its already sorted."},{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1237326782,"post_id":652359,"comment_id":469703,"body_markdown":"Doing a toArray() of a sorted set with 1000 elements takes less than 14 micro-seconds (not that you should need to do this often)  I don&#39;t know how you get 0.8 ms. ;)","body":"Doing a toArray() of a sorted set with 1000 elements takes less than 14 micro-seconds (not that you should need to do this often)  I don&#39;t know how you get 0.8 ms. ;)"}],"tags":[],"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"comment_count":4,"down_vote_count":2,"up_vote_count":7,"is_accepted":false,"score":5,"last_activity_date":1237328242,"creation_date":1237241832,"answer_id":652359,"question_id":652311,"body_markdown":"A faster way to iterate a collection is to take an array copy of it. This can be iterated forward and backwards without creating an object or even a method call.  The downside is you need to update it as well as your collection whenever it changes.\r\n\r\nIn the following example, it takes an average of 1,208 ns to iterate over 1000 element either forward or backward.\r\n\r\n    import java.util.Comparator;\r\n    import java.util.Random;\r\n    import java.util.NavigableSet;\r\n    import java.util.TreeSet;\r\n    \r\n    /*\r\n    Average time for iteration of 1000 elements was 1,208 ns\r\n    */\r\n    public class Main {\r\n        public static void main(String... args) {\r\n            doPerfTest(true);\r\n            doPerfTest(false);\r\n        }\r\n    \r\n        private static void doPerfTest(boolean warmup) {\r\n            NavigableSet&lt;MyData&gt; set = new TreeSet&lt;MyData&gt;(new MyCompataror());\r\n            Random random = new Random();\r\n            for (int i = 0; i &lt; 1000; i++) {\r\n                set.add(new MyData(&quot;text-&quot; + random.nextLong(), random.nextInt()));\r\n            }\r\n            MyData[] myDatas = set.toArray(new MyData[set.size()]);\r\n            long start = System.nanoTime();\r\n            final int runs = 500 * 1000;\r\n            for (int i = 0; i &lt; runs; i+=2) {\r\n                // forward iteration\r\n                for (MyData md : myDatas) {\r\n    \r\n                }\r\n                // reverse iteration\r\n                for (int j = myDatas.length - 1; j &gt;= 0; j--) {\r\n                    MyData md = myDatas[j];\r\n                }\r\n            }\r\n            long time = System.nanoTime() - start;\r\n            if (!warmup)\r\n                System.out.printf(&quot;Average time for iteration of 1000 elements was %,d ns&quot;, time / runs);\r\n        }\r\n    \r\n        static class MyCompataror implements Comparator&lt;MyData&gt; {\r\n            public int compare(MyData o1, MyData o2) {\r\n                int cmp = o1.text.compareTo(o2.text);\r\n                if (cmp != 0)\r\n                    return cmp;\r\n                return o1.value &gt; o2.value ? +1 :\r\n                        o1.value &lt; o2.value ? -1 : 0;\r\n            }\r\n        }\r\n    \r\n        static class MyData {\r\n            String text;\r\n            int value;\r\n    \r\n            MyData(String text, int value) {\r\n                this.text = text;\r\n                this.value = value;\r\n            }\r\n        }\r\n    }\r\n\r\nNow replace the main loop with and the average time becomes 20,493.\r\n\r\n    // forward iteration\r\n    for(Iterator&lt;MyData&gt; it = set.iterator(); it.hasNext();) {\r\n        MyData md = it.next();\r\n    }\r\n    // reverse iteration\r\n    for(Iterator&lt;MyData&gt; it = set.descendingIterator(); it.hasNext();) {\r\n        MyData md = it.next();\r\n    }\r\n\r\nNow lets compare this with taking a copy every time (which I have stated is not as optimal as taking a copy only when changed), the time drops to 15,134 ns!\r\n\r\nSo using NavigableSet could be the **slowest** of the three options discussed.\r\n\r\n\r\n","title":"The best way to iterate SortedSet / SortedMap in Java backwards","body":"<p>A faster way to iterate a collection is to take an array copy of it. This can be iterated forward and backwards without creating an object or even a method call.  The downside is you need to update it as well as your collection whenever it changes.</p>\n\n<p>In the following example, it takes an average of 1,208 ns to iterate over 1000 element either forward or backward.</p>\n\n<pre><code>import java.util.Comparator;\nimport java.util.Random;\nimport java.util.NavigableSet;\nimport java.util.TreeSet;\n\n/*\nAverage time for iteration of 1000 elements was 1,208 ns\n*/\npublic class Main {\n    public static void main(String... args) {\n        doPerfTest(true);\n        doPerfTest(false);\n    }\n\n    private static void doPerfTest(boolean warmup) {\n        NavigableSet&lt;MyData&gt; set = new TreeSet&lt;MyData&gt;(new MyCompataror());\n        Random random = new Random();\n        for (int i = 0; i &lt; 1000; i++) {\n            set.add(new MyData(\"text-\" + random.nextLong(), random.nextInt()));\n        }\n        MyData[] myDatas = set.toArray(new MyData[set.size()]);\n        long start = System.nanoTime();\n        final int runs = 500 * 1000;\n        for (int i = 0; i &lt; runs; i+=2) {\n            // forward iteration\n            for (MyData md : myDatas) {\n\n            }\n            // reverse iteration\n            for (int j = myDatas.length - 1; j &gt;= 0; j--) {\n                MyData md = myDatas[j];\n            }\n        }\n        long time = System.nanoTime() - start;\n        if (!warmup)\n            System.out.printf(\"Average time for iteration of 1000 elements was %,d ns\", time / runs);\n    }\n\n    static class MyCompataror implements Comparator&lt;MyData&gt; {\n        public int compare(MyData o1, MyData o2) {\n            int cmp = o1.text.compareTo(o2.text);\n            if (cmp != 0)\n                return cmp;\n            return o1.value &gt; o2.value ? +1 :\n                    o1.value &lt; o2.value ? -1 : 0;\n        }\n    }\n\n    static class MyData {\n        String text;\n        int value;\n\n        MyData(String text, int value) {\n            this.text = text;\n            this.value = value;\n        }\n    }\n}\n</code></pre>\n\n<p>Now replace the main loop with and the average time becomes 20,493.</p>\n\n<pre><code>// forward iteration\nfor(Iterator&lt;MyData&gt; it = set.iterator(); it.hasNext();) {\n    MyData md = it.next();\n}\n// reverse iteration\nfor(Iterator&lt;MyData&gt; it = set.descendingIterator(); it.hasNext();) {\n    MyData md = it.next();\n}\n</code></pre>\n\n<p>Now lets compare this with taking a copy every time (which I have stated is not as optimal as taking a copy only when changed), the time drops to 15,134 ns!</p>\n\n<p>So using NavigableSet could be the <strong>slowest</strong> of the three options discussed.</p>\n"},{"comments":[{"owner":{"account_id":12404,"reputation":62016,"user_id":24396,"accept_rate":74,"display_name":"Steve Kuo"},"score":5,"creation_date":1237242164,"post_id":652365,"comment_id":465678,"body_markdown":"NavigableSet descendingIterator()","body":"NavigableSet descendingIterator()"},{"owner":{"account_id":16298,"reputation":10964,"user_id":35322,"display_name":"Adam Jaskiewicz"},"score":1,"creation_date":1237242229,"post_id":652365,"comment_id":465683,"body_markdown":"Yep. Specifically, using NavigableSet.descendingIterator(). Or you can use NavigableSet.descendingSet() to get a view of the elements in reverse order which is backed by the existing set.","body":"Yep. Specifically, using NavigableSet.descendingIterator(). Or you can use NavigableSet.descendingSet() to get a view of the elements in reverse order which is backed by the existing set."},{"owner":{"account_id":108817,"reputation":111656,"user_id":288671,"display_name":"Vitalii Fedorenko"},"score":1,"creation_date":1403475780,"post_id":652365,"comment_id":37660266,"body_markdown":"[According to Josh Bloch](https://www.youtube.com/watch?v=aAb7hSCtvGw#t=1258), the author of both interfaces, ability to easily iterate in a reverse order is one of the main reasons why NavigableSet was introduced in Java 6.","body":"<a href=\"https://www.youtube.com/watch?v=aAb7hSCtvGw#t=1258\" rel=\"nofollow noreferrer\">According to Josh Bloch</a>, the author of both interfaces, ability to easily iterate in a reverse order is one of the main reasons why NavigableSet was introduced in Java 6."},{"owner":{"account_id":2674923,"reputation":9479,"user_id":2311528,"accept_rate":59,"display_name":"Lonzak"},"score":0,"creation_date":1433939986,"post_id":652365,"comment_id":49566269,"body_markdown":"Can you give an code example how to iterate a SortedSet with the help of the NavigableSet?","body":"Can you give an code example how to iterate a SortedSet with the help of the NavigableSet?"},{"owner":{"account_id":20562,"reputation":55673,"user_id":49246,"accept_rate":73,"display_name":"starblue"},"score":0,"creation_date":1433940859,"post_id":652365,"comment_id":49566929,"body_markdown":"You replace the interfaces SortedMap and SortedSet by NavigableMap and NavigableSet, respectively.  With a SortedSet alone it is not possible, strictly speaking. (You might know that the underlying implementation supports NavigableMap and use a cast, but that would be a rather bad hack, and might break when the implementation changes.)","body":"You replace the interfaces SortedMap and SortedSet by NavigableMap and NavigableSet, respectively.  With a SortedSet alone it is not possible, strictly speaking. (You might know that the underlying implementation supports NavigableMap and use a cast, but that would be a rather bad hack, and might break when the implementation changes.)"}],"tags":[],"owner":{"account_id":20562,"reputation":55673,"user_id":49246,"accept_rate":73,"display_name":"starblue"},"comment_count":5,"down_vote_count":2,"up_vote_count":28,"is_accepted":true,"score":26,"last_activity_date":1237241921,"creation_date":1237241921,"answer_id":652365,"question_id":652311,"body_markdown":"In Java 1.6 you can use &lt;a href=&quot;http://java.sun.com/javase/6/docs/api/java/util/NavigableSet.html&quot;&gt;NavigableSet&lt;/a&gt;.","title":"The best way to iterate SortedSet / SortedMap in Java backwards","body":"<p>In Java 1.6 you can use <a href=\"http://java.sun.com/javase/6/docs/api/java/util/NavigableSet.html\" rel=\"noreferrer\">NavigableSet</a>.</p>\n"},{"comments":[{"owner":{"account_id":322655,"reputation":2022,"user_id":642185,"accept_rate":85,"display_name":"Liron"},"score":0,"creation_date":1455010790,"post_id":13451372,"comment_id":58287068,"body_markdown":"Thanks! Much easier to add that than change the implementation to NavigableSet.","body":"Thanks! Much easier to add that than change the implementation to NavigableSet."}],"tags":[],"owner":{"account_id":1818620,"reputation":318,"user_id":1653195,"display_name":"user1653195"},"comment_count":1,"down_vote_count":0,"up_vote_count":22,"is_accepted":false,"score":22,"last_activity_date":1353319073,"creation_date":1353319073,"answer_id":13451372,"question_id":652311,"body_markdown":"\r\n\r\nuse this before you fill your map :\r\n\r\n    SortedMap sortedMap = new TreeMap(java.util.Collections.reverseOrder());","title":"The best way to iterate SortedSet / SortedMap in Java backwards","body":"<p>use this before you fill your map :</p>\n\n<pre><code>SortedMap sortedMap = new TreeMap(java.util.Collections.reverseOrder());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695229276,"creation_date":1692081009,"answer_id":76903796,"question_id":652311,"body_markdown":"Java 21 added the [`reversed`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SortedMap.html#reversed()) method to `SortedMap`, which returns a reversed view of the map.\r\n\r\n```lang-java\r\nfor (Map.Entry&lt;String, Integer&gt; entry : sortedMap.reversed().entrySet()) {\r\n  // ...\r\n}\r\n```","title":"The best way to iterate SortedSet / SortedMap in Java backwards","body":"<p>Java 21 added the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SortedMap.html#reversed()\" rel=\"nofollow noreferrer\"><code>reversed</code></a> method to <code>SortedMap</code>, which returns a reversed view of the map.</p>\n<pre class=\"lang-java prettyprint-override\"><code>for (Map.Entry&lt;String, Integer&gt; entry : sortedMap.reversed().entrySet()) {\n  // ...\n}\n</code></pre>\n"}],"owner":{"account_id":27967,"reputation":2654,"user_id":74275,"accept_rate":94,"display_name":"Alexander Temerev"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":30697,"favorite_count":0,"down_vote_count":0,"up_vote_count":21,"accepted_answer_id":652365,"answer_count":5,"score":21,"last_activity_date":1695229276,"creation_date":1237241122,"question_id":652311,"body_markdown":"I need to iterate through SortedMap&#39;s entry set (which is a SortedSet) backwards. The code I&#39;m writing is extremely performance-sensitive, as it&#39;s going to be called from many places thousands times per second, maybe more. Any advice on doing it the fastest way?","title":"The best way to iterate SortedSet / SortedMap in Java backwards","body":"<p>I need to iterate through SortedMap's entry set (which is a SortedSet) backwards. The code I'm writing is extremely performance-sensitive, as it's going to be called from many places thousands times per second, maybe more. Any advice on doing it the fastest way?</p>\n"},{"tags":["java","collections"],"comments":[{"owner":{"account_id":85022,"reputation":13917,"user_id":237321,"accept_rate":75,"display_name":"x4u"},"score":12,"creation_date":1264003237,"post_id":2102499,"comment_id":2036632,"body_markdown":"What&#39;s so bad about using an explicit index to iterate over a indexed data structure? At least it shows you what&#39;s exactly going on. For iterating backwards I always the following slightly shorter idiom: `for (int i = nodes.size(); --i &gt;= 0;)`","body":"What&#39;s so bad about using an explicit index to iterate over a indexed data structure? At least it shows you what&#39;s exactly going on. For iterating backwards I always the following slightly shorter idiom: <code>for (int i = nodes.size(); --i &gt;= 0;)</code>"},{"owner":{"account_id":1781,"reputation":91962,"user_id":2443,"accept_rate":82,"display_name":"Allain Lalonde"},"score":5,"creation_date":1264003482,"post_id":2102499,"comment_id":2036671,"body_markdown":"Nothing particularly, I&#39;d just rather program to an interface and not know about what kind of list I&#39;m using. Though I like your short hand greatly. (+1 comment)","body":"Nothing particularly, I&#39;d just rather program to an interface and not know about what kind of list I&#39;m using. Though I like your short hand greatly. (+1 comment)"},{"owner":{"account_id":43577,"reputation":54129,"user_id":127479,"accept_rate":95,"display_name":"Adamski"},"score":1,"creation_date":1264005434,"post_id":2102499,"comment_id":2037026,"body_markdown":"@x4u: There&#39;s not much in it although Iterator is fail-fast and also allows elements to be easily removed during the iteration.","body":"@x4u: There&#39;s not much in it although Iterator is fail-fast and also allows elements to be easily removed during the iteration."},{"owner":{"account_id":69527,"reputation":40466,"user_id":202214,"display_name":"Kevin Bourrillion"},"score":2,"creation_date":1264023384,"post_id":2102499,"comment_id":2039607,"body_markdown":"This class is broken, because the user might want to iterate a second time over the same Iterable, or the list might change between when the iterable is constructed and when it&#39;s iterated. I&#39;m sure for your purposes you&#39;ll just make sure not to do that, but it wouldn&#39;t be too hard to fix the code; or just steal the code from Guava (Apache 2.0 license):\n\nhttp://code.google.com/p/guava-libraries/source/browse/trunk/src/com/google/common/collect/Iterables.java#674","body":"This class is broken, because the user might want to iterate a second time over the same Iterable, or the list might change between when the iterable is constructed and when it&#39;s iterated. I&#39;m sure for your purposes you&#39;ll just make sure not to do that, but it wouldn&#39;t be too hard to fix the code; or just steal the code from Guava (Apache 2.0 license):  <a href=\"http://code.google.com/p/guava-libraries/source/browse/trunk/src/com/google/common/collect/Iterables.java#674\" rel=\"nofollow noreferrer\">code.google.com/p/guava-libraries/source/browse/trunk/src/co&zwnj;&#8203;m/&hellip;</a>"},{"owner":{"account_id":1781,"reputation":91962,"user_id":2443,"accept_rate":82,"display_name":"Allain Lalonde"},"score":1,"creation_date":1264097720,"post_id":2102499,"comment_id":2047097,"body_markdown":"Fair enough, but even the Guava one is susceptible to the same thing if I&#39;m reading it right. Were a user to keep a copy of the result from reverse, it&#39;d have the same problem.","body":"Fair enough, but even the Guava one is susceptible to the same thing if I&#39;m reading it right. Were a user to keep a copy of the result from reverse, it&#39;d have the same problem."},{"owner":{"account_id":24536,"reputation":6582,"user_id":62479,"accept_rate":68,"display_name":"Geoffrey Zheng"},"score":0,"creation_date":1362668322,"post_id":2102499,"comment_id":21548236,"body_markdown":"I suspect @KevinBourrillion&#39;s link pointed to the deprecated Iterables#reverse, for which I just found a fascinating discussion on Guava philosophy: https://code.google.com/p/guava-libraries/issues/detail?id=980","body":"I suspect @KevinBourrillion&#39;s link pointed to the deprecated Iterables#reverse, for which I just found a fascinating discussion on Guava philosophy: <a href=\"https://code.google.com/p/guava-libraries/issues/detail?id=980\" rel=\"nofollow noreferrer\">code.google.com/p/guava-libraries/issues/detail?id=980</a>"},{"owner":{"account_id":2366187,"reputation":60162,"user_id":2071828,"accept_rate":88,"display_name":"Boris the Spider"},"score":1,"creation_date":1377761201,"post_id":2102499,"comment_id":27207360,"body_markdown":"@AllainLalonde I know this is an old question but I would just point out that this breaks the `Iterable` interface. It should return a new `Iterator` each time otherwise if you use the `Iterable` in two loops the second won&#39;t work as the `Iterator` is already spent.","body":"@AllainLalonde I know this is an old question but I would just point out that this breaks the <code>Iterable</code> interface. It should return a new <code>Iterator</code> each time otherwise if you use the <code>Iterable</code> in two loops the second won&#39;t work as the <code>Iterator</code> is already spent."},{"owner":{"account_id":87772,"reputation":376,"user_id":1368122,"accept_rate":80,"display_name":"Xian Stannard"},"score":1,"creation_date":1397730516,"post_id":2102499,"comment_id":35363406,"body_markdown":"@x4u iterating using an index can be slower. See the API doc for java.util.RandomAccess","body":"@x4u iterating using an index can be slower. See the API doc for java.util.RandomAccess"},{"owner":{"account_id":31682,"reputation":22471,"user_id":87197,"accept_rate":81,"display_name":"Chris Dennett"},"score":0,"creation_date":1411576701,"post_id":2102499,"comment_id":40758009,"body_markdown":"`List.reverseIterator()` now exists, if it helps.","body":"<code>List.reverseIterator()</code> now exists, if it helps."},{"owner":{"account_id":15387,"reputation":63718,"user_id":32453,"accept_rate":92,"display_name":"rogerdpack"},"score":0,"creation_date":1449643365,"post_id":2102499,"comment_id":56091603,"body_markdown":"@ChrisDennett do you have a link to it by chance?","body":"@ChrisDennett do you have a link to it by chance?"},{"owner":{"account_id":31682,"reputation":22471,"user_id":87197,"accept_rate":81,"display_name":"Chris Dennett"},"score":0,"creation_date":1449653013,"post_id":2102499,"comment_id":56096819,"body_markdown":"Ah sorry, got mixed up - use `while(li.hasPrevious()) {\n  System.out.println(li.previous());\n}`. I think you could write a wrapper to put it in the normal form (using `next()` and `hasNext()`. I&#39;ll check if a wrapper already exists.","body":"Ah sorry, got mixed up - use <code>while(li.hasPrevious()) {   System.out.println(li.previous()); }</code>. I think you could write a wrapper to put it in the normal form (using <code>next()</code> and <code>hasNext()</code>. I&#39;ll check if a wrapper already exists."},{"owner":{"account_id":15387,"reputation":63718,"user_id":32453,"accept_rate":92,"display_name":"rogerdpack"},"score":0,"creation_date":1449680479,"post_id":2102499,"comment_id":56115490,"body_markdown":"To the OP you should probably split your &quot;inline answer&quot; out into its own answer, so that comments left differentiate between your question and answer :) See also similar answer here: http://stackoverflow.com/a/1098153/32453","body":"To the OP you should probably split your &quot;inline answer&quot; out into its own answer, so that comments left differentiate between your question and answer :) See also similar answer here: <a href=\"http://stackoverflow.com/a/1098153/32453\">stackoverflow.com/a/1098153/32453</a>"},{"owner":{"account_id":2068268,"reputation":42279,"user_id":1843331,"accept_rate":100,"display_name":"Tim"},"score":0,"creation_date":1458313952,"post_id":2102499,"comment_id":59820180,"body_markdown":"I removed your solution from the question body. Answers don&#39;t belong in questions. The solution proposed is represented in multiple other answers as well, which is why I did not convert it to a community wiki answer.","body":"I removed your solution from the question body. Answers don&#39;t belong in questions. The solution proposed is represented in multiple other answers as well, which is why I did not convert it to a community wiki answer."},{"owner":{"account_id":1673709,"reputation":1424,"user_id":1539652,"display_name":"user1539652"},"score":0,"creation_date":1524142799,"post_id":2102499,"comment_id":86859068,"body_markdown":"@x4u you can get ConcurrentModificationException  when you use loop with explicit index and remove an element inside the loop.","body":"@x4u you can get ConcurrentModificationException  when you use loop with explicit index and remove an element inside the loop."}],"answers":[{"comments":[{"owner":{"account_id":1781,"reputation":91962,"user_id":2443,"accept_rate":82,"display_name":"Allain Lalonde"},"score":1,"creation_date":1264001808,"post_id":2102524,"comment_id":2036366,"body_markdown":"Don&#39;t know why this is getting down voted, I might just make a wrapper for the list that does this.","body":"Don&#39;t know why this is getting down voted, I might just make a wrapper for the list that does this."},{"owner":{"account_id":43577,"reputation":54129,"user_id":127479,"accept_rate":95,"display_name":"Adamski"},"score":0,"creation_date":1264002041,"post_id":2102524,"comment_id":2036417,"body_markdown":"This is no less clean than calling Collections.reverse() IMHO.","body":"This is no less clean than calling Collections.reverse() IMHO."},{"owner":{"account_id":43577,"reputation":54129,"user_id":127479,"accept_rate":95,"display_name":"Adamski"},"score":0,"creation_date":1264002119,"post_id":2102524,"comment_id":2036425,"body_markdown":"@Allain: Agreed re. the downvotes although I don&#39;t see why you view a call to listIterator(list.size()) as &quot;not clean&quot;.  Even if you wrap it you&#39;re still having to make the same method call somewhere.","body":"@Allain: Agreed re. the downvotes although I don&#39;t see why you view a call to listIterator(list.size()) as &quot;not clean&quot;.  Even if you wrap it you&#39;re still having to make the same method call somewhere."},{"owner":{"account_id":1781,"reputation":91962,"user_id":2443,"accept_rate":82,"display_name":"Allain Lalonde"},"score":0,"creation_date":1264002158,"post_id":2102524,"comment_id":2036435,"body_markdown":"Suppose not, just not willing to take the performance hit, for cleanliness.","body":"Suppose not, just not willing to take the performance hit, for cleanliness."},{"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"score":20,"creation_date":1396460815,"post_id":2102524,"comment_id":34802113,"body_markdown":"Voted down as I don&#39;t think consider this a complete answer.","body":"Voted down as I don&#39;t think consider this a complete answer."},{"owner":{"account_id":15387,"reputation":63718,"user_id":32453,"accept_rate":92,"display_name":"rogerdpack"},"score":0,"creation_date":1457374641,"post_id":2102524,"comment_id":59367584,"body_markdown":"see Kevin&#39;s answer for an implementation, or http://stackoverflow.com/a/1098153/32453","body":"see Kevin&#39;s answer for an implementation, or <a href=\"http://stackoverflow.com/a/1098153/32453\">stackoverflow.com/a/1098153/32453</a>"},{"owner":{"account_id":446482,"reputation":8211,"user_id":839554,"accept_rate":79,"display_name":"giannis christofakis"},"score":0,"creation_date":1529912817,"post_id":2102524,"comment_id":89029553,"body_markdown":"This should be a comment, or a complete answer with code.","body":"This should be a comment, or a complete answer with code."}],"tags":[],"owner":{"account_id":51415,"reputation":24508,"user_id":153621,"accept_rate":88,"display_name":"nanda"},"comment_count":7,"down_vote_count":13,"up_vote_count":15,"is_accepted":false,"score":2,"last_activity_date":1529581432,"creation_date":1264001504,"answer_id":2102524,"question_id":2102499,"body_markdown":"Create a custom `reverseIterable`.  ","title":"Iterating through a list in reverse order in java","body":"<p>Create a custom <code>reverseIterable</code>.  </p>\n"},{"comments":[{"owner":{"account_id":1781,"reputation":91962,"user_id":2443,"accept_rate":82,"display_name":"Allain Lalonde"},"score":1,"creation_date":1264001693,"post_id":2102539,"comment_id":2036336,"body_markdown":"Have thought about it, but there cost of reversing it is prohibitive. \nAlso, it only requires this kind of iteration about half the time. Flipping it would just move the problem to the other half.","body":"Have thought about it, but there cost of reversing it is prohibitive.  Also, it only requires this kind of iteration about half the time. Flipping it would just move the problem to the other half."},{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":3,"creation_date":1264014113,"post_id":2102539,"comment_id":2038399,"body_markdown":"+ for Deque; typical implementations have `descendingIterator()`.","body":"+ for Deque; typical implementations have <code>descendingIterator()</code>."},{"owner":{"account_id":248860,"reputation":2568,"user_id":524504,"accept_rate":75,"display_name":"masterxilo"},"score":0,"creation_date":1401134774,"post_id":2102539,"comment_id":36754687,"body_markdown":"This would perform terrible for linked lists, the OP&#39;s variant is better.","body":"This would perform terrible for linked lists, the OP&#39;s variant is better."},{"owner":{"account_id":1406015,"reputation":2323,"user_id":1333713,"accept_rate":82,"display_name":"David Groomes"},"score":1,"creation_date":1405913033,"post_id":2102539,"comment_id":38601271,"body_markdown":"Using a `for each` expression is the most idiomatic solution in my opinion. It&#39;s nice to realize that this is possible if your List implements Iterable in a way that iterates backwards. I&#39;m going to use this approach and use the ReverseListIterator class from Apache Commons Collections.","body":"Using a <code>for each</code> expression is the most idiomatic solution in my opinion. It&#39;s nice to realize that this is possible if your List implements Iterable in a way that iterates backwards. I&#39;m going to use this approach and use the ReverseListIterator class from Apache Commons Collections."}],"tags":[],"owner":{"account_id":13299,"reputation":30181,"user_id":26620,"accept_rate":83,"display_name":"Kevin"},"comment_count":4,"down_vote_count":4,"up_vote_count":20,"is_accepted":false,"score":16,"last_activity_date":1457374800,"creation_date":1264001584,"answer_id":2102539,"question_id":2102499,"body_markdown":"Option 1: Have you thought about reversing the List with [Collections#reverse()][1] and then using foreach?\r\n\r\nOf course, you may also want to refactor your code such that the list is ordered correctly so you don&#39;t have to reverse it, which uses extra space/time.\r\n\r\n---\r\n\r\nEDIT:\r\n\r\nOption 2: Alternatively, could you use a [Deque][2] instead of an ArrayList?  It will allow you to iterate forwards and backwards\r\n\r\n---\r\n\r\nEDIT:\r\n\r\nOption 3: As others have suggested, you could write an Iterator that will go through the list in reverse, here is an example:\r\n\r\n    import java.util.Iterator;\r\n    import java.util.List;\r\n    \r\n    public class ReverseIterator&lt;T&gt; implements Iterator&lt;T&gt;, Iterable&lt;T&gt; {\r\n        \r\n        private final List&lt;T&gt; list;\r\n        private int position;\r\n        \r\n        public ReverseIterator(List&lt;T&gt; list) {\r\n            this.list = list;\r\n            this.position = list.size() - 1;\r\n        }\r\n        \r\n        @Override\r\n        public Iterator&lt;T&gt; iterator() {\r\n            return this;\r\n        }\r\n    \r\n        @Override\r\n        public boolean hasNext() {\r\n            return position &gt;= 0;\r\n        }\r\n    \r\n        @Override\r\n        public T next() {\r\n            return list.get(position--);\r\n        }\r\n    \r\n        @Override\r\n        public void remove() {\r\n            throw new UnsupportedOperationException();\r\n        }\r\n    \r\n    }\r\n\r\n\r\n    List&lt;String&gt; list = new ArrayList&lt;String&gt;();\r\n    list.add(&quot;A&quot;);\r\n    list.add(&quot;B&quot;);\r\n    list.add(&quot;C&quot;);\r\n    list.add(&quot;D&quot;);\r\n    list.add(&quot;E&quot;);\r\n    \r\n    for (String s : new ReverseIterator&lt;String&gt;(list)) {\r\n        System.out.println(s);\r\n    }\r\n\r\n  [1]: http://java.sun.com/javase/6/docs/api/java/util/Collections.html#reverse%28java.util.List%29\r\n  [2]: http://java.sun.com/javase/6/docs/api/java/util/Deque.html","title":"Iterating through a list in reverse order in java","body":"<p>Option 1: Have you thought about reversing the List with <a href=\"http://java.sun.com/javase/6/docs/api/java/util/Collections.html#reverse%28java.util.List%29\" rel=\"noreferrer\">Collections#reverse()</a> and then using foreach?</p>\n\n<p>Of course, you may also want to refactor your code such that the list is ordered correctly so you don't have to reverse it, which uses extra space/time.</p>\n\n<hr>\n\n<p>EDIT:</p>\n\n<p>Option 2: Alternatively, could you use a <a href=\"http://java.sun.com/javase/6/docs/api/java/util/Deque.html\" rel=\"noreferrer\">Deque</a> instead of an ArrayList?  It will allow you to iterate forwards and backwards</p>\n\n<hr>\n\n<p>EDIT:</p>\n\n<p>Option 3: As others have suggested, you could write an Iterator that will go through the list in reverse, here is an example:</p>\n\n<pre><code>import java.util.Iterator;\nimport java.util.List;\n\npublic class ReverseIterator&lt;T&gt; implements Iterator&lt;T&gt;, Iterable&lt;T&gt; {\n\n    private final List&lt;T&gt; list;\n    private int position;\n\n    public ReverseIterator(List&lt;T&gt; list) {\n        this.list = list;\n        this.position = list.size() - 1;\n    }\n\n    @Override\n    public Iterator&lt;T&gt; iterator() {\n        return this;\n    }\n\n    @Override\n    public boolean hasNext() {\n        return position &gt;= 0;\n    }\n\n    @Override\n    public T next() {\n        return list.get(position--);\n    }\n\n    @Override\n    public void remove() {\n        throw new UnsupportedOperationException();\n    }\n\n}\n\n\nList&lt;String&gt; list = new ArrayList&lt;String&gt;();\nlist.add(\"A\");\nlist.add(\"B\");\nlist.add(\"C\");\nlist.add(\"D\");\nlist.add(\"E\");\n\nfor (String s : new ReverseIterator&lt;String&gt;(list)) {\n    System.out.println(s);\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":290705,"reputation":7460,"user_id":592392,"accept_rate":75,"display_name":"jolivier"},"score":33,"creation_date":1392404689,"post_id":2102550,"comment_id":32964496,"body_markdown":"and it also changes in place the list you traverse, which is quite a huge side-effect. (Say you wrap this in a method, each time it is called you traverse the list the other way ^^)","body":"and it also changes in place the list you traverse, which is quite a huge side-effect. (Say you wrap this in a method, each time it is called you traverse the list the other way ^^)"},{"owner":{"account_id":2078190,"reputation":1221,"user_id":1850930,"display_name":"jfajunior"},"score":1,"creation_date":1583942436,"post_id":2102550,"comment_id":107283995,"body_markdown":"This is the cleanest solution.","body":"This is the cleanest solution."}],"tags":[],"owner":{"account_id":43577,"reputation":54129,"user_id":127479,"accept_rate":95,"display_name":"Adamski"},"comment_count":2,"down_vote_count":10,"up_vote_count":36,"is_accepted":false,"score":26,"last_activity_date":1264001670,"creation_date":1264001670,"answer_id":2102550,"question_id":2102499,"body_markdown":"I don&#39;t think it&#39;s possible using the for loop syntax.  The only thing I can suggest is to do something like:\r\n\r\n    Collections.reverse(list);\r\n    for (Object o : list) {\r\n      ...\r\n    }\r\n\r\n... but I wouldn&#39;t say this is &quot;cleaner&quot; given that it&#39;s going to be less efficient.","title":"Iterating through a list in reverse order in java","body":"<p>I don't think it's possible using the for loop syntax.  The only thing I can suggest is to do something like:</p>\n\n<pre><code>Collections.reverse(list);\nfor (Object o : list) {\n  ...\n}\n</code></pre>\n\n<p>... but I wouldn't say this is \"cleaner\" given that it's going to be less efficient.</p>\n"},{"comments":[{"owner":{"account_id":1781,"reputation":91962,"user_id":2443,"accept_rate":82,"display_name":"Allain Lalonde"},"score":4,"creation_date":1264001747,"post_id":2102552,"comment_id":2036351,"body_markdown":"Not bad. Doesn&#39;t use the index, but loses the elegance of the for each syntax. +1 anyway.","body":"Not bad. Doesn&#39;t use the index, but loses the elegance of the for each syntax. +1 anyway."},{"owner":{"account_id":43577,"reputation":54129,"user_id":127479,"accept_rate":95,"display_name":"Adamski"},"score":30,"creation_date":1264001755,"post_id":2102552,"comment_id":2036354,"body_markdown":"Calling listIterator() without an index argument will give an Iterator at the beginning of the list and so hasPrevious() will return false on the first call.","body":"Calling listIterator() without an index argument will give an Iterator at the beginning of the list and so hasPrevious() will return false on the first call."},{"owner":{"account_id":3282,"reputation":146296,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"score":2,"creation_date":1264001760,"post_id":2102552,"comment_id":2036352,"body_markdown":"You want an index on the `listIterator` call, I think.","body":"You want an index on the <code>listIterator</code> call, I think."},{"owner":{"account_id":3282,"reputation":146296,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"score":1,"creation_date":1264001853,"post_id":2102552,"comment_id":2036375,"body_markdown":"You can write an `Iterator` that uses a `ListIterator` in reverse, but that may not be worth it for one loop.","body":"You can write an <code>Iterator</code> that uses a <code>ListIterator</code> in reverse, but that may not be worth it for one loop."},{"owner":{"account_id":1781,"reputation":91962,"user_id":2443,"accept_rate":82,"display_name":"Allain Lalonde"},"score":1,"creation_date":1264002754,"post_id":2102552,"comment_id":2036537,"body_markdown":"It&#39;s not one loop, so I&#39;ve taken this and wrapped it. http://pastebin.ca/1759041 so, now I can do `for (Node each : new ListReverse&lt;Node&gt;(nodes)) { }`","body":"It&#39;s not one loop, so I&#39;ve taken this and wrapped it. <a href=\"http://pastebin.ca/1759041\" rel=\"nofollow noreferrer\">pastebin.ca/1759041</a> so, now I can do <code>for (Node each : new ListReverse&lt;Node&gt;(nodes)) { }</code>"},{"owner":{"display_name":"user2943324"},"score":0,"creation_date":1388075120,"post_id":2102552,"comment_id":31161194,"body_markdown":"John&#39;s answer is by far better than a for-each wrapper. for-each loop hides the fact that the elements **must** be visited in certain order.","body":"John&#39;s answer is by far better than a for-each wrapper. for-each loop hides the fact that the elements <b>must</b> be visited in certain order."},{"owner":{"account_id":2474748,"reputation":6549,"user_id":2155605,"accept_rate":85,"display_name":"Ogen"},"score":1,"creation_date":1429846419,"post_id":2102552,"comment_id":47802887,"body_markdown":"I feel like this may warrant a new Java keyword. Something like `foreverse (node : nodes) {}`","body":"I feel like this may warrant a new Java keyword. Something like <code>foreverse (node : nodes) {}</code>"},{"owner":{"account_id":1985735,"reputation":3193,"user_id":1781024,"accept_rate":84,"display_name":"Vikas Prasad"},"score":0,"creation_date":1477068133,"post_id":2102552,"comment_id":67630621,"body_markdown":"@John Feminella\nOne question: any performance difference between `listIterator(index)` vs `descendingIterator()`","body":"@John Feminella One question: any performance difference between <code>listIterator(index)</code> vs <code>descendingIterator()</code>"},{"owner":{"account_id":135067,"reputation":9676,"user_id":337621,"accept_rate":70,"display_name":"G&#225;bor Lipt&#225;k"},"score":0,"creation_date":1524815782,"post_id":2102552,"comment_id":87132133,"body_markdown":"Genial. No second list is created.","body":"Genial. No second list is created."},{"owner":{"account_id":1266843,"reputation":93064,"user_id":1223975,"accept_rate":54,"display_name":"Alexander Mills"},"score":0,"creation_date":1550389224,"post_id":2102552,"comment_id":96245201,"body_markdown":"What about more general? Using Iterable and Iterator?","body":"What about more general? Using Iterable and Iterator?"},{"owner":{"account_id":1296670,"reputation":643,"user_id":3833423,"accept_rate":40,"display_name":"G 1"},"score":0,"creation_date":1588728152,"post_id":2102552,"comment_id":109008795,"body_markdown":"is remove() operation safe in this ListIterator?","body":"is remove() operation safe in this ListIterator?"}],"tags":[],"owner":{"account_id":28214,"reputation":305280,"user_id":75170,"accept_rate":72,"display_name":"John Feminella"},"comment_count":11,"down_vote_count":0,"up_vote_count":473,"is_accepted":true,"score":473,"last_activity_date":1264002847,"creation_date":1264001691,"answer_id":2102552,"question_id":2102499,"body_markdown":"Try this:\r\n\r\n    // Substitute appropriate type.\r\n    ArrayList&lt;...&gt; a = new ArrayList&lt;...&gt;();\r\n    \r\n    // Add elements to list.\r\n    \r\n    // Generate an iterator. Start just after the last element.\r\n    ListIterator li = a.listIterator(a.size());\r\n    \r\n    // Iterate in reverse.\r\n    while(li.hasPrevious()) {\r\n      System.out.println(li.previous());\r\n    }","title":"Iterating through a list in reverse order in java","body":"<p>Try this:</p>\n\n<pre><code>// Substitute appropriate type.\nArrayList&lt;...&gt; a = new ArrayList&lt;...&gt;();\n\n// Add elements to list.\n\n// Generate an iterator. Start just after the last element.\nListIterator li = a.listIterator(a.size());\n\n// Iterate in reverse.\nwhile(li.hasPrevious()) {\n  System.out.println(li.previous());\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":69527,"reputation":40466,"user_id":202214,"display_name":"Kevin Bourrillion"},"score":0,"creation_date":1264023526,"post_id":2103037,"comment_id":2039624,"body_markdown":"Looks right to me, though exposing it as a static method instead of a public constructor would (in most cases) avoid the need for the client to specify the type parameter.  This is how Guava does it..","body":"Looks right to me, though exposing it as a static method instead of a public constructor would (in most cases) avoid the need for the client to specify the type parameter.  This is how Guava does it.."},{"owner":{"account_id":68665,"reputation":8103,"user_id":200224,"accept_rate":64,"display_name":"Andy"},"score":2,"creation_date":1393378099,"post_id":2103037,"comment_id":33397154,"body_markdown":"This is the best implementation, however `ReverseIterator` is missing the necessary constructor and the code should use `List` instead of `ArrayList`.","body":"This is the best implementation, however <code>ReverseIterator</code> is missing the necessary constructor and the code should use <code>List</code> instead of <code>ArrayList</code>."}],"tags":[],"owner":{"account_id":43577,"reputation":54129,"user_id":127479,"accept_rate":95,"display_name":"Adamski"},"comment_count":2,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1264005132,"creation_date":1264005132,"answer_id":2103037,"question_id":2102499,"body_markdown":"Here is an (untested) implementation of a `ReverseIterable`.  When `iterator()` is called it creates and returns a private `ReverseIterator` implementation, which simply maps calls to `hasNext()` to `hasPrevious()` and calls to `next()` are mapped to `previous()`.  It means you could iterate over an `ArrayList` in reverse as follows:\r\n\r\n    ArrayList&lt;String&gt; l = ...\r\n    for (String s : new ReverseIterable(l)) {\r\n      System.err.println(s);\r\n    }\r\n\r\n**Class Definition**\r\n\r\n    public class ReverseIterable&lt;T&gt; implements Iterable&lt;T&gt; {\r\n      private static class ReverseIterator&lt;T&gt; implements Iterator {\r\n        private final ListIterator&lt;T&gt; it;\r\n    \r\n        public boolean hasNext() {\r\n          return it.hasPrevious();\r\n        }\r\n    \r\n        public T next() {\r\n          return it.previous();\r\n        }\r\n    \r\n        public void remove() {\r\n          it.remove();\r\n        }\r\n      }\r\n    \r\n      private final ArrayList&lt;T&gt; l;\r\n    \r\n      public ReverseIterable(ArrayList&lt;T&gt; l) {\r\n        this.l = l;\r\n      }\r\n    \r\n      public Iterator&lt;T&gt; iterator() {\r\n        return new ReverseIterator(l.listIterator(l.size()));\r\n      }\r\n    }\r\n\r\n","title":"Iterating through a list in reverse order in java","body":"<p>Here is an (untested) implementation of a <code>ReverseIterable</code>.  When <code>iterator()</code> is called it creates and returns a private <code>ReverseIterator</code> implementation, which simply maps calls to <code>hasNext()</code> to <code>hasPrevious()</code> and calls to <code>next()</code> are mapped to <code>previous()</code>.  It means you could iterate over an <code>ArrayList</code> in reverse as follows:</p>\n\n<pre><code>ArrayList&lt;String&gt; l = ...\nfor (String s : new ReverseIterable(l)) {\n  System.err.println(s);\n}\n</code></pre>\n\n<p><strong>Class Definition</strong></p>\n\n<pre><code>public class ReverseIterable&lt;T&gt; implements Iterable&lt;T&gt; {\n  private static class ReverseIterator&lt;T&gt; implements Iterator {\n    private final ListIterator&lt;T&gt; it;\n\n    public boolean hasNext() {\n      return it.hasPrevious();\n    }\n\n    public T next() {\n      return it.previous();\n    }\n\n    public void remove() {\n      it.remove();\n    }\n  }\n\n  private final ArrayList&lt;T&gt; l;\n\n  public ReverseIterable(ArrayList&lt;T&gt; l) {\n    this.l = l;\n  }\n\n  public Iterator&lt;T&gt; iterator() {\n    return new ReverseIterator(l.listIterator(l.size()));\n  }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1033144,"reputation":3625,"user_id":1041046,"accept_rate":78,"display_name":"AaA"},"score":1,"creation_date":1467182144,"post_id":2103082,"comment_id":63619301,"body_markdown":"Which version of google collection? your link does not exists anymore.","body":"Which version of google collection? your link does not exists anymore."}],"tags":[],"owner":{"account_id":1781,"reputation":91962,"user_id":2443,"accept_rate":82,"display_name":"Allain Lalonde"},"comment_count":1,"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1264005420,"creation_date":1264005420,"answer_id":2103082,"question_id":2102499,"body_markdown":"Also found google collections [reverse][1] method.\r\n\r\n\r\n  [1]: http://google-collections.googlecode.com/svn/trunk/javadoc/com/google/common/collect/Iterables.html#reverse(java.util.List)","title":"Iterating through a list in reverse order in java","body":"<p>Also found google collections <a href=\"http://google-collections.googlecode.com/svn/trunk/javadoc/com/google/common/collect/Iterables.html#reverse(java.util.List)\" rel=\"nofollow noreferrer\">reverse</a> method.</p>\n"},{"tags":[],"owner":{"account_id":57077,"reputation":39235,"user_id":170974,"accept_rate":70,"display_name":"tangens"},"comment_count":0,"down_vote_count":1,"up_vote_count":13,"is_accepted":false,"score":12,"last_activity_date":1278955479,"creation_date":1278924759,"answer_id":3227002,"question_id":2102499,"body_markdown":"You could use the concrete class `LinkedList` instead of the general interface `List`. Then you have a [`descendingIterator`][1] for iterating with the reverse direction.\r\n\r\n    LinkedList&lt;String &gt; linkedList;\r\n    for( Iterator&lt;String &gt; it = linkedList.descendingIterator(); it.hasNext(); ) {\r\n        String text = it.next();\r\n    }\r\n\r\nDon&#39;t know why there is no `descendingIterator` with `ArrayList`...\r\n\r\n  [1]: http://download.oracle.com/docs/cd/E17409_01/javase/6/docs/api/java/util/LinkedList.html#descendingIterator%28%29\r\n","title":"Iterating through a list in reverse order in java","body":"<p>You could use the concrete class <code>LinkedList</code> instead of the general interface <code>List</code>. Then you have a <a href=\"http://download.oracle.com/docs/cd/E17409_01/javase/6/docs/api/java/util/LinkedList.html#descendingIterator%28%29\" rel=\"noreferrer\"><code>descendingIterator</code></a> for iterating with the reverse direction.</p>\n\n<pre><code>LinkedList&lt;String &gt; linkedList;\nfor( Iterator&lt;String &gt; it = linkedList.descendingIterator(); it.hasNext(); ) {\n    String text = it.next();\n}\n</code></pre>\n\n<p>Don't know why there is no <code>descendingIterator</code> with <code>ArrayList</code>...</p>\n"},{"tags":[],"owner":{"account_id":1472741,"reputation":31,"user_id":1422983,"display_name":"Ravi Kant Soni"},"comment_count":0,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1340801168,"creation_date":1340800587,"answer_id":11226370,"question_id":2102499,"body_markdown":"Very simple Example:\r\n\r\n    List&lt;String&gt; list = new ArrayList&lt;String&gt;();\r\n    \r\n    list.add(&quot;ravi&quot;);\r\n    \r\n    list.add(&quot;kant&quot;);\r\n    \r\n    list.add(&quot;soni&quot;);\r\n    \r\n    // Iterate to disply : result will be as ---     ravi kant soni\r\n    \r\n    for (String name : list) {\r\n      ...\r\n    }\r\n    \r\n    //Now call this method\r\n    \r\n    Collections.reverse(list);\r\n    \r\n    // iterate and print index wise : result will be as ---     soni kant ravi\r\n    \r\n    for (String name : list) {\r\n      ...\r\n    }","title":"Iterating through a list in reverse order in java","body":"<p>Very simple Example:</p>\n\n<pre><code>List&lt;String&gt; list = new ArrayList&lt;String&gt;();\n\nlist.add(\"ravi\");\n\nlist.add(\"kant\");\n\nlist.add(\"soni\");\n\n// Iterate to disply : result will be as ---     ravi kant soni\n\nfor (String name : list) {\n  ...\n}\n\n//Now call this method\n\nCollections.reverse(list);\n\n// iterate and print index wise : result will be as ---     soni kant ravi\n\nfor (String name : list) {\n  ...\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":130645,"reputation":81705,"user_id":330057,"accept_rate":77,"display_name":"corsiKa"},"score":5,"creation_date":1357254458,"post_id":11227109,"comment_id":19595972,"body_markdown":"&quot;Since array list doesnot keep the list in the same order as data has been added to list&quot; umm, yes it does, at least it does in the same manner as a linked list does. Can you provide an example of how they don&#39;t?","body":"&quot;Since array list doesnot keep the list in the same order as data has been added to list&quot; umm, yes it does, at least it does in the same manner as a linked list does. Can you provide an example of how they don&#39;t?"},{"owner":{"account_id":7445,"reputation":62274,"user_id":12943,"accept_rate":84,"display_name":"Bill K"},"score":0,"creation_date":1357262977,"post_id":11227109,"comment_id":19597860,"body_markdown":"Yes, ArrayList and LinkedList (The List contract in general) keep items in insertion in order.  the Set contract is unordered or ordered by sort (TreeSet).  The reverse idea isn&#39;t bad but remember that it actually reorders the list which could be slowish.","body":"Yes, ArrayList and LinkedList (The List contract in general) keep items in insertion in order.  the Set contract is unordered or ordered by sort (TreeSet).  The reverse idea isn&#39;t bad but remember that it actually reorders the list which could be slowish."},{"owner":{"account_id":1560281,"reputation":6593,"user_id":1450294,"accept_rate":61,"display_name":"Michael Scheper"},"score":3,"creation_date":1363652398,"post_id":11227109,"comment_id":21927333,"body_markdown":"I downvoted this answer because it erroneously states that ArrayLists do not keep items in insertion order. As @bill-k notes, all Lists are ordered collections by definition. The suggestion to use a LinkedList instead has merit, since it features the descendingIterator() method, but only if performance is a bigger concern than memory and abstraction.","body":"I downvoted this answer because it erroneously states that ArrayLists do not keep items in insertion order. As @bill-k notes, all Lists are ordered collections by definition. The suggestion to use a LinkedList instead has merit, since it features the descendingIterator() method, but only if performance is a bigger concern than memory and abstraction."}],"tags":[],"owner":{"account_id":1472741,"reputation":31,"user_id":1422983,"display_name":"Ravi Kant Soni"},"comment_count":3,"down_vote_count":14,"up_vote_count":3,"is_accepted":false,"score":-11,"last_activity_date":1340806000,"creation_date":1340802937,"answer_id":11227109,"question_id":2102499,"body_markdown":"Reason : &quot;Don&#39;t know why there is no descendingIterator with ArrayList...&quot;\r\n\r\nSince array list doesnot keep the list in the same order as data has been added to list. So, never use Arraylist .\r\n\r\nLinked list will keep the data in same order of ADD to list.\r\n\r\nSo , above in my example, i used ArrayList() in order to make user to twist their mind and make them to workout something from their side.\r\n\r\nInstead of this\r\n\r\n    List&lt;String&gt; list = new ArrayList&lt;String&gt;();\r\n\r\nUSE:\r\n\r\n    List&lt;String&gt; list = new LinkedList&lt;String&gt;();\r\n    \r\n    list.add(&quot;ravi&quot;);\r\n    \r\n    list.add(&quot;kant&quot;);\r\n    \r\n    list.add(&quot;soni&quot;);\r\n    \r\n    // Iterate to disply : result will be as ---     ravi kant soni\r\n    \r\n    for (String name : list) {\r\n      ...\r\n    }\r\n    \r\n    //Now call this method\r\n    \r\n    Collections.reverse(list);\r\n    \r\n    // iterate and print index wise : result will be as ---     soni kant ravi\r\n    \r\n    for (String name : list) {\r\n      ...\r\n    }\r\n\r\n\r\n\r\n","title":"Iterating through a list in reverse order in java","body":"<p>Reason : \"Don't know why there is no descendingIterator with ArrayList...\"</p>\n\n<p>Since array list doesnot keep the list in the same order as data has been added to list. So, never use Arraylist .</p>\n\n<p>Linked list will keep the data in same order of ADD to list.</p>\n\n<p>So , above in my example, i used ArrayList() in order to make user to twist their mind and make them to workout something from their side.</p>\n\n<p>Instead of this</p>\n\n<pre><code>List&lt;String&gt; list = new ArrayList&lt;String&gt;();\n</code></pre>\n\n<p>USE:</p>\n\n<pre><code>List&lt;String&gt; list = new LinkedList&lt;String&gt;();\n\nlist.add(\"ravi\");\n\nlist.add(\"kant\");\n\nlist.add(\"soni\");\n\n// Iterate to disply : result will be as ---     ravi kant soni\n\nfor (String name : list) {\n  ...\n}\n\n//Now call this method\n\nCollections.reverse(list);\n\n// iterate and print index wise : result will be as ---     soni kant ravi\n\nfor (String name : list) {\n  ...\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":68665,"reputation":8103,"user_id":200224,"accept_rate":64,"display_name":"Andy"},"score":1,"creation_date":1393378329,"post_id":12334827,"comment_id":33397221,"body_markdown":"This has been mentioned elsewhere in the thread, but the `listIterator` field needs to be inside the `Iterator` implementation, not the `Iterable` implementation.","body":"This has been mentioned elsewhere in the thread, but the <code>listIterator</code> field needs to be inside the <code>Iterator</code> implementation, not the <code>Iterable</code> implementation."},{"owner":{"account_id":1781872,"reputation":14665,"user_id":1624376,"accept_rate":76,"display_name":"Aubin"},"score":1,"creation_date":1407490184,"post_id":12334827,"comment_id":39244506,"body_markdown":"Why using an enum type, not a class?","body":"Why using an enum type, not a class?"},{"owner":{"account_id":451370,"reputation":2890,"user_id":847235,"accept_rate":92,"display_name":"intrepidis"},"score":1,"creation_date":1407659853,"post_id":12334827,"comment_id":39294544,"body_markdown":"It makes the &#39;In&#39; class non-instantiable, without having to write a private default constructor. Good for classes that only have static methods.","body":"It makes the &#39;In&#39; class non-instantiable, without having to write a private default constructor. Good for classes that only have static methods."},{"owner":{"account_id":1269357,"reputation":8769,"user_id":1226020,"accept_rate":41,"display_name":"JHH"},"score":0,"creation_date":1520248448,"post_id":12334827,"comment_id":85223190,"body_markdown":"I would say that abusing enums just to avoid writing a private default constructor is confusing at best. How about using enums for enums and classes for classes? By making a class into an enum it also implicitly gets a `name()` method, an `ordinal()` method and a `static valueOf()` method, for example.","body":"I would say that abusing enums just to avoid writing a private default constructor is confusing at best. How about using enums for enums and classes for classes? By making a class into an enum it also implicitly gets a <code>name()</code> method, an <code>ordinal()</code> method and a <code>static valueOf()</code> method, for example."},{"owner":{"account_id":451370,"reputation":2890,"user_id":847235,"accept_rate":92,"display_name":"intrepidis"},"score":1,"creation_date":1520756587,"post_id":12334827,"comment_id":85439914,"body_markdown":"Yes you can continue with your opinion and that will work fine too, but I think to the contrary. Classes are for instantiating objects and abusing them by including a private default constructor to inhibit their instantiation is confusing at best. In Java, enums actually are classes, but ones that can never be instantiated by design.","body":"Yes you can continue with your opinion and that will work fine too, but I think to the contrary. Classes are for instantiating objects and abusing them by including a private default constructor to inhibit their instantiation is confusing at best. In Java, enums actually are classes, but ones that can never be instantiated by design."}],"tags":[],"owner":{"account_id":451370,"reputation":2890,"user_id":847235,"accept_rate":92,"display_name":"intrepidis"},"comment_count":5,"down_vote_count":4,"up_vote_count":5,"is_accepted":false,"score":1,"last_activity_date":1407490129,"creation_date":1347141622,"answer_id":12334827,"question_id":2102499,"body_markdown":"To have code which looks like this:\r\n\r\n    List&lt;Item&gt; items;\r\n    ...\r\n    for (Item item : In.reverse(items))\r\n    {\r\n        ...\r\n    }\r\n\r\nPut this code into a file called &quot;In.java&quot;:\r\n\r\n    import java.util.*;\r\n\r\n    public enum In {;\r\n        public static final &lt;T&gt; Iterable&lt;T&gt; reverse(final List&lt;T&gt; list) {\r\n            return new ListReverseIterable&lt;T&gt;(list);\r\n        }\r\n\r\n        class ListReverseIterable&lt;T&gt; implements Iterable&lt;T&gt; {\r\n            private final List&lt;T&gt; mList;\r\n\r\n            public ListReverseIterable(final List&lt;T&gt; list) {\r\n                mList = list;\r\n            }\r\n\r\n            public Iterator&lt;T&gt; iterator() {\r\n                return new Iterator&lt;T&gt;() {\r\n                    final ListIterator&lt;T&gt; it = mList.listIterator(mList.size());\r\n\r\n                    public boolean hasNext() {\r\n                        return it.hasPrevious();\r\n                    }\r\n                    public T next() {\r\n                        return it.previous();\r\n                    }\r\n                    public void remove() {\r\n                        it.remove();\r\n                    }\r\n                };\r\n            }\r\n        }\r\n    }\r\n","title":"Iterating through a list in reverse order in java","body":"<p>To have code which looks like this:</p>\n\n<pre><code>List&lt;Item&gt; items;\n...\nfor (Item item : In.reverse(items))\n{\n    ...\n}\n</code></pre>\n\n<p>Put this code into a file called \"In.java\":</p>\n\n<pre><code>import java.util.*;\n\npublic enum In {;\n    public static final &lt;T&gt; Iterable&lt;T&gt; reverse(final List&lt;T&gt; list) {\n        return new ListReverseIterable&lt;T&gt;(list);\n    }\n\n    class ListReverseIterable&lt;T&gt; implements Iterable&lt;T&gt; {\n        private final List&lt;T&gt; mList;\n\n        public ListReverseIterable(final List&lt;T&gt; list) {\n            mList = list;\n        }\n\n        public Iterator&lt;T&gt; iterator() {\n            return new Iterator&lt;T&gt;() {\n                final ListIterator&lt;T&gt; it = mList.listIterator(mList.size());\n\n                public boolean hasNext() {\n                    return it.hasPrevious();\n                }\n                public T next() {\n                    return it.previous();\n                }\n                public void remove() {\n                    it.remove();\n                }\n            };\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24536,"reputation":6582,"user_id":62479,"accept_rate":68,"display_name":"Geoffrey Zheng"},"comment_count":0,"down_vote_count":3,"up_vote_count":42,"is_accepted":false,"score":39,"last_activity_date":1518431621,"creation_date":1362668886,"answer_id":15274617,"question_id":2102499,"body_markdown":"[Guava][1] offers [`Lists#reverse(List)`][2] and [`ImmutableList#reverse()`][3]. As in most cases for Guava, the former delegates to the latter if the argument is an `ImmutableList`, so you can use the former in all cases.  These do not create new copies of the list but just &quot;reversed views&quot; of it.\r\n\r\nExample\r\n\r\n    List reversed = ImmutableList.copyOf(myList).reverse();\r\n\r\n\r\n  [1]: https://code.google.com/p/guava-libraries/wiki/CollectionUtilitiesExplained\r\n  [2]: https://google.github.io/guava/releases/snapshot-jre/api/docs/com/google/common/collect/Lists.html#reverse-java.util.List-\r\n  [3]: https://google.github.io/guava/releases/snapshot-jre/api/docs/com/google/common/collect/ImmutableList.html#reverse--","title":"Iterating through a list in reverse order in java","body":"<p><a href=\"https://code.google.com/p/guava-libraries/wiki/CollectionUtilitiesExplained\" rel=\"noreferrer\">Guava</a> offers <a href=\"https://google.github.io/guava/releases/snapshot-jre/api/docs/com/google/common/collect/Lists.html#reverse-java.util.List-\" rel=\"noreferrer\"><code>Lists#reverse(List)</code></a> and <a href=\"https://google.github.io/guava/releases/snapshot-jre/api/docs/com/google/common/collect/ImmutableList.html#reverse--\" rel=\"noreferrer\"><code>ImmutableList#reverse()</code></a>. As in most cases for Guava, the former delegates to the latter if the argument is an <code>ImmutableList</code>, so you can use the former in all cases.  These do not create new copies of the list but just \"reversed views\" of it.</p>\n\n<p>Example</p>\n\n<pre><code>List reversed = ImmutableList.copyOf(myList).reverse();\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1033144,"reputation":3625,"user_id":1041046,"accept_rate":78,"display_name":"AaA"},"score":1,"creation_date":1467182270,"post_id":22304460,"comment_id":63619365,"body_markdown":"Your link does not exists anymore","body":"Your link does not exists anymore"},{"owner":{"account_id":11974210,"reputation":165,"user_id":11944425,"display_name":"David Golembiowski"},"score":1,"creation_date":1608665352,"post_id":22304460,"comment_id":115650697,"body_markdown":"Thank you @AaA ; it looks like the `ReverseListIterator` link does work at this point. (Updated Dec 2020)","body":"Thank you @AaA ; it looks like the <code>ReverseListIterator</code> link does work at this point. (Updated Dec 2020)"}],"tags":[],"owner":{"account_id":1212298,"reputation":27085,"user_id":1180621,"accept_rate":100,"display_name":"Andrejs"},"comment_count":2,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1563993131,"creation_date":1394465634,"answer_id":22304460,"question_id":2102499,"body_markdown":"You could use `ReverseListIterator` from Apache Commons-Collections:\r\n\r\nhttps://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/iterators/ReverseListIterator.html\r\n","title":"Iterating through a list in reverse order in java","body":"<p>You could use <code>ReverseListIterator</code> from Apache Commons-Collections:</p>\n\n<p><a href=\"https://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/iterators/ReverseListIterator.html\" rel=\"nofollow noreferrer\">https://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/iterators/ReverseListIterator.html</a></p>\n"},{"tags":[],"owner":{"account_id":248860,"reputation":2568,"user_id":524504,"accept_rate":75,"display_name":"masterxilo"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1401135053,"creation_date":1401135053,"answer_id":23877084,"question_id":2102499,"body_markdown":"As has been suggested at least twice, you can use `descendingIterator` with a `Deque`, in particular with a `LinkedList`. If you want to use the for-each loop (i.e., have an `Iterable`), you can construct and use a wraper like this:\r\n\r\n    import java.util.*;\r\n\r\n    public class Main {\r\n\r\n        public static class ReverseIterating&lt;T&gt; implements Iterable&lt;T&gt; {\r\n            private final LinkedList&lt;T&gt; list;\r\n\r\n            public ReverseIterating(LinkedList&lt;T&gt; list) {\r\n                this.list = list;\r\n            }\r\n\r\n            @Override\r\n            public Iterator&lt;T&gt; iterator() {\r\n                return list.descendingIterator();\r\n            }\r\n        }\r\n\r\n        public static void main(String... args) {\r\n            LinkedList&lt;String&gt; list = new LinkedList&lt;String&gt;();\r\n            list.add(&quot;A&quot;);\r\n            list.add(&quot;B&quot;);\r\n            list.add(&quot;C&quot;);\r\n            list.add(&quot;D&quot;);\r\n            list.add(&quot;E&quot;);\r\n\r\n            for (String s : new ReverseIterating&lt;String&gt;(list)) {\r\n                System.out.println(s);\r\n            }\r\n        }\r\n    }\r\n ","title":"Iterating through a list in reverse order in java","body":"<p>As has been suggested at least twice, you can use <code>descendingIterator</code> with a <code>Deque</code>, in particular with a <code>LinkedList</code>. If you want to use the for-each loop (i.e., have an <code>Iterable</code>), you can construct and use a wraper like this:</p>\n\n<pre><code>import java.util.*;\n\npublic class Main {\n\n    public static class ReverseIterating&lt;T&gt; implements Iterable&lt;T&gt; {\n        private final LinkedList&lt;T&gt; list;\n\n        public ReverseIterating(LinkedList&lt;T&gt; list) {\n            this.list = list;\n        }\n\n        @Override\n        public Iterator&lt;T&gt; iterator() {\n            return list.descendingIterator();\n        }\n    }\n\n    public static void main(String... args) {\n        LinkedList&lt;String&gt; list = new LinkedList&lt;String&gt;();\n        list.add(\"A\");\n        list.add(\"B\");\n        list.add(\"C\");\n        list.add(\"D\");\n        list.add(\"E\");\n\n        for (String s : new ReverseIterating&lt;String&gt;(list)) {\n            System.out.println(s);\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1049814,"reputation":11925,"user_id":1054021,"accept_rate":81,"display_name":"Tobb"},"comment_count":0,"down_vote_count":2,"up_vote_count":6,"is_accepted":false,"score":4,"last_activity_date":1457376551,"creation_date":1401180609,"answer_id":23884932,"question_id":2102499,"body_markdown":"If the lists are fairly small so that performance is not a real issue, one can use the `reverse`-metod of the `Lists`-class in `Google Guava`. Yields pretty `for-each`-code, and the original list stays the same. Also, the reversed list is backed by the original list, so any change to the original list will be reflected in the reversed one.\r\n\r\n    import com.google.common.collect.Lists;\r\n\r\n    [...]\r\n\r\n    final List&lt;String&gt; myList = Lists.newArrayList(&quot;one&quot;, &quot;two&quot;, &quot;three&quot;);\r\n    final List&lt;String&gt; myReverseList = Lists.reverse(myList);\r\n\r\n    System.out.println(myList);\r\n    System.out.println(myReverseList);\r\n\r\n    myList.add(&quot;four&quot;);\r\n\r\n    System.out.println(myList);\r\n    System.out.println(myReverseList);\r\n\r\nYields the following result:\r\n\r\n    [one, two, three]\r\n    [three, two, one]\r\n    [one, two, three, four]\r\n    [four, three, two, one]\r\n\r\n\r\nWhich means that reverse iteration of myList can be written as:\r\n\r\n    for (final String someString : Lists.reverse(myList)) {\r\n        //do something\r\n    }","title":"Iterating through a list in reverse order in java","body":"<p>If the lists are fairly small so that performance is not a real issue, one can use the <code>reverse</code>-metod of the <code>Lists</code>-class in <code>Google Guava</code>. Yields pretty <code>for-each</code>-code, and the original list stays the same. Also, the reversed list is backed by the original list, so any change to the original list will be reflected in the reversed one.</p>\n\n<pre><code>import com.google.common.collect.Lists;\n\n[...]\n\nfinal List&lt;String&gt; myList = Lists.newArrayList(\"one\", \"two\", \"three\");\nfinal List&lt;String&gt; myReverseList = Lists.reverse(myList);\n\nSystem.out.println(myList);\nSystem.out.println(myReverseList);\n\nmyList.add(\"four\");\n\nSystem.out.println(myList);\nSystem.out.println(myReverseList);\n</code></pre>\n\n<p>Yields the following result:</p>\n\n<pre><code>[one, two, three]\n[three, two, one]\n[one, two, three, four]\n[four, three, two, one]\n</code></pre>\n\n<p>Which means that reverse iteration of myList can be written as:</p>\n\n<pre><code>for (final String someString : Lists.reverse(myList)) {\n    //do something\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4396854,"reputation":1866,"user_id":3583589,"display_name":"benez"},"score":2,"creation_date":1454281118,"post_id":32076116,"comment_id":57961786,"body_markdown":"very nice, just a cosmetic change:\nint size = list.size();\nListIterator&lt;Integer&gt; it = list.listIterator(size);\nStream.generate(it::previous).limit(size).forEach(System.out::println);","body":"very nice, just a cosmetic change: int size = list.size(); ListIterator&lt;Integer&gt; it = list.listIterator(size); Stream.generate(it::previous).limit(size).forEach(System.out&zwnj;&#8203;::println);"}],"tags":[],"owner":{"account_id":2111403,"reputation":33698,"user_id":1876620,"accept_rate":94,"display_name":"fps"},"comment_count":1,"down_vote_count":1,"up_vote_count":12,"is_accepted":false,"score":11,"last_activity_date":1532435880,"creation_date":1439910408,"answer_id":32076116,"question_id":2102499,"body_markdown":"This is an old question, but it&#39;s lacking a java8-friendly answer. Here are some ways of reverse-iterating the list, with the help of the Streaming API:\r\n\r\n    List&lt;Integer&gt; list = new ArrayList&lt;Integer&gt;(Arrays.asList(1, 3, 3, 7, 5));\r\n    list.stream().forEach(System.out::println); // 1 3 3 7 5\r\n\r\n    int size = list.size();\r\n\r\n    ListIterator&lt;Integer&gt; it = list.listIterator(size);\r\n    Stream.generate(it::previous).limit(size)\r\n        .forEach(System.out::println); // 5 7 3 3 1\r\n\r\n    ListIterator&lt;Integer&gt; it2 = list.listIterator(size);\r\n    Stream.iterate(it2.previous(), i -&gt; it2.previous()).limit(size)\r\n        .forEach(System.out::println); // 5 7 3 3 1\r\n\r\n    // If list is RandomAccess (i.e. an ArrayList)\r\n    IntStream.range(0, size).map(i -&gt; size - i - 1).map(list::get)\r\n        .forEach(System.out::println); // 5 7 3 3 1\r\n\r\n    // If list is RandomAccess (i.e. an ArrayList), less efficient due to sorting\r\n    IntStream.range(0, size).boxed().sorted(Comparator.reverseOrder())\r\n        .map(list::get).forEach(System.out::println); // 5 7 3 3 1\r\n","title":"Iterating through a list in reverse order in java","body":"<p>This is an old question, but it's lacking a java8-friendly answer. Here are some ways of reverse-iterating the list, with the help of the Streaming API:</p>\n\n<pre><code>List&lt;Integer&gt; list = new ArrayList&lt;Integer&gt;(Arrays.asList(1, 3, 3, 7, 5));\nlist.stream().forEach(System.out::println); // 1 3 3 7 5\n\nint size = list.size();\n\nListIterator&lt;Integer&gt; it = list.listIterator(size);\nStream.generate(it::previous).limit(size)\n    .forEach(System.out::println); // 5 7 3 3 1\n\nListIterator&lt;Integer&gt; it2 = list.listIterator(size);\nStream.iterate(it2.previous(), i -&gt; it2.previous()).limit(size)\n    .forEach(System.out::println); // 5 7 3 3 1\n\n// If list is RandomAccess (i.e. an ArrayList)\nIntStream.range(0, size).map(i -&gt; size - i - 1).map(list::get)\n    .forEach(System.out::println); // 5 7 3 3 1\n\n// If list is RandomAccess (i.e. an ArrayList), less efficient due to sorting\nIntStream.range(0, size).boxed().sorted(Comparator.reverseOrder())\n    .map(list::get).forEach(System.out::println); // 5 7 3 3 1\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6671334,"reputation":1,"user_id":16078083,"display_name":"Rupesh Goyal"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1622394665,"creation_date":1622394665,"answer_id":67763852,"question_id":2102499,"body_markdown":"    Valid for Java 9+\r\n    \r\n    List&lt;String&gt; strList = List.of(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;);\r\n    \r\n    IntStream.iterate(strList.size() - 1, i -&gt; i &gt;= 0, i -&gt; --i)\r\n             .mapToObj(strList::get)\r\n             .forEach(System.out::println);","title":"Iterating through a list in reverse order in java","body":"<pre><code>Valid for Java 9+\n\nList&lt;String&gt; strList = List.of(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;);\n\nIntStream.iterate(strList.size() - 1, i -&gt; i &gt;= 0, i -&gt; --i)\n         .mapToObj(strList::get)\n         .forEach(System.out::println);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24390162,"reputation":11,"user_id":18320250,"display_name":"Chengen Zhao"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660718396,"creation_date":1660224709,"answer_id":73321568,"question_id":2102499,"body_markdown":"How about using DeQue:\r\n\r\n\r\n      var queue = new ArrayDeque&lt;&gt;(list);\r\n      while (!queue.isEmpty()) {\r\n        var first = reversed ? queue.removeLast() : queue.removeFirst();\r\n        var second = reversed ? queue.peekLast() : queue.peekFirst();\r\n        if (second != null) {\r\n          //your code goes here\r\n        }\r\n      }\r\n","title":"Iterating through a list in reverse order in java","body":"<p>How about using DeQue:</p>\n<pre><code>  var queue = new ArrayDeque&lt;&gt;(list);\n  while (!queue.isEmpty()) {\n    var first = reversed ? queue.removeLast() : queue.removeFirst();\n    var second = reversed ? queue.peekLast() : queue.peekFirst();\n    if (second != null) {\n      //your code goes here\n    }\n  }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1695229155,"creation_date":1691991149,"answer_id":76896466,"question_id":2102499,"body_markdown":"Java 21 added a [`reversed()`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html#reversed()) method to `List`, which returns a reversed view of the list.  This can be used to iterate in reverse order.\r\n\r\n```lang-java\r\nfor (Node each : nodes.reversed()) {\r\n   ...\r\n}\r\n```","title":"Iterating through a list in reverse order in java","body":"<p>Java 21 added a <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html#reversed()\" rel=\"nofollow noreferrer\"><code>reversed()</code></a> method to <code>List</code>, which returns a reversed view of the list.  This can be used to iterate in reverse order.</p>\n<pre class=\"lang-java prettyprint-override\"><code>for (Node each : nodes.reversed()) {\n   ...\n}\n</code></pre>\n"}],"owner":{"account_id":1781,"reputation":91962,"user_id":2443,"accept_rate":82,"display_name":"Allain Lalonde"},"comment_count":14,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":270699,"favorite_count":0,"down_vote_count":0,"up_vote_count":273,"accepted_answer_id":2102552,"answer_count":18,"score":273,"last_activity_date":1695229155,"creation_date":1264001304,"question_id":2102499,"body_markdown":"I&#39;m migrating a piece of code to make use of generics. One argument for doing so is that the for loop is much cleaner than keeping track of indexes, or using an explicit iterator.\r\n\r\nIn about half the cases, the list (an ArrayList) is being iterated in reverse order by using an index today.\r\n\r\nCan someone suggest a cleaner way of doing this (since I dislike the `indexed for loop` when working with collections), though it does work?\r\n\r\n     for (int i = nodes.size() - 1; i &gt;= 0; i--) {\r\n        final Node each = (Node) nodes.get(i);\r\n        ...\r\n     }\r\n\r\n**Note:** I can&#39;t add any new dependencies outside the JDK.","title":"Iterating through a list in reverse order in java","body":"<p>I'm migrating a piece of code to make use of generics. One argument for doing so is that the for loop is much cleaner than keeping track of indexes, or using an explicit iterator.</p>\n\n<p>In about half the cases, the list (an ArrayList) is being iterated in reverse order by using an index today.</p>\n\n<p>Can someone suggest a cleaner way of doing this (since I dislike the <code>indexed for loop</code> when working with collections), though it does work?</p>\n\n<pre><code> for (int i = nodes.size() - 1; i &gt;= 0; i--) {\n    final Node each = (Node) nodes.get(i);\n    ...\n }\n</code></pre>\n\n<p><strong>Note:</strong> I can't add any new dependencies outside the JDK.</p>\n"},{"tags":["java","spring-boot","bearer-token","spring-cloud-feign"],"comments":[{"owner":{"account_id":17916680,"reputation":684,"user_id":13017474,"display_name":"priyranjan"},"score":0,"creation_date":1606385756,"post_id":65019801,"comment_id":114950433,"body_markdown":"ohk got now what problem are you facing?","body":"ohk got now what problem are you facing?"},{"owner":{"account_id":3153451,"reputation":3590,"user_id":2666368,"accept_rate":79,"display_name":"Ke Vin"},"score":0,"creation_date":1606400063,"post_id":65019801,"comment_id":114956849,"body_markdown":"How do i get the bearer token value that submitted from postman (client)? As get it as string to replace &quot;tokenString&quot; value so i can use it to submit to another request","body":"How do i get the bearer token value that submitted from postman (client)? As get it as string to replace &quot;tokenString&quot; value so i can use it to submit to another request"},{"owner":{"account_id":19092422,"reputation":51311,"user_id":13942448,"display_name":"jccampanero"},"score":0,"creation_date":1606665246,"post_id":65019801,"comment_id":115023122,"body_markdown":"Are you using this token for any other purpose? For instance, for authenticating users in the application that calls the Feign client?","body":"Are you using this token for any other purpose? For instance, for authenticating users in the application that calls the Feign client?"},{"owner":{"account_id":3153451,"reputation":3590,"user_id":2666368,"accept_rate":79,"display_name":"Ke Vin"},"score":0,"creation_date":1606666474,"post_id":65019801,"comment_id":115023500,"body_markdown":"yes i use it to call another microservice using feign client, and in the same gateway which is require same token because it&#39;s behind the same spring security","body":"yes i use it to call another microservice using feign client, and in the same gateway which is require same token because it&#39;s behind the same spring security"},{"owner":{"account_id":13760652,"reputation":716,"user_id":9930478,"display_name":"da-sha1"},"score":0,"creation_date":1607119987,"post_id":65019801,"comment_id":115182234,"body_markdown":"Do I understand correctly, that your first microservice, exposing &#39;/store&#39; endpoint, is using the token for authentication? If so, is it a standard authentication sceme (for example OAuth2) or a custom one (a custom JWT token authentication)?","body":"Do I understand correctly, that your first microservice, exposing &#39;/store&#39; endpoint, is using the token for authentication? If so, is it a standard authentication sceme (for example OAuth2) or a custom one (a custom JWT token authentication)?"}],"answers":[{"tags":[],"owner":{"account_id":3153451,"reputation":3590,"user_id":2666368,"accept_rate":79,"display_name":"Ke Vin"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1606657981,"creation_date":1606657981,"answer_id":65060872,"question_id":65019801,"body_markdown":"i got the answer but i think there i will still wait for better option, since my answer here is i have to add @RequestHeader in every controller to get the value of my token and get the token with `String token = headers.getFirst(HttpHeaders.AUTHORIZATION);`, and here is my complete controller :\r\n\r\n    @Operation(summary = &quot;Save new&quot;)\r\n    @PostMapping(&quot;/store&quot;)\r\n    public ResponseEntity&lt;ResponseRequest&lt;TransDeliveryPlanning&gt;&gt; saveNewTransDeliveryPlanning(@RequestHeader HttpHeaders headers, \r\n            @Valid @RequestBody InputRequest&lt;TransDeliveryPlanningDto&gt; request) {\r\n\r\n        String token = headers.getFirst(HttpHeaders.AUTHORIZATION);\r\n    \r\n        TransDeliveryPlanning newTransDeliveryPlanning = transDeliveryPlanningService.save(token, request);\r\n    \r\n        ResponseRequest&lt;TransDeliveryPlanning&gt; response = new ResponseRequest&lt;TransDeliveryPlanning&gt;();\r\n    \r\n        if (newTransDeliveryPlanning != null) {\r\n            response.setMessage(PESAN_SIMPAN_BERHASIL);\r\n            response.setData(newTransDeliveryPlanning);\r\n        } else {\r\n            response.setMessage(PESAN_SIMPAN_GAGAL);\r\n        }\r\n    \r\n        return ResponseEntity.ok(response);\r\n    }\r\n\r\nand i read somewhere there is something called `Interceptor` so we don&#39;t have to type @RequestHeader in every controller i think, but i dunno if that the solution or how to use it properly. if someone can do this with something better, i will accept yours as answer","title":"How to get bearer token from header of a request in java spring boot?","body":"<p>i got the answer but i think there i will still wait for better option, since my answer here is i have to add @RequestHeader in every controller to get the value of my token and get the token with <code>String token = headers.getFirst(HttpHeaders.AUTHORIZATION);</code>, and here is my complete controller :</p>\n<pre><code>@Operation(summary = &quot;Save new&quot;)\n@PostMapping(&quot;/store&quot;)\npublic ResponseEntity&lt;ResponseRequest&lt;TransDeliveryPlanning&gt;&gt; saveNewTransDeliveryPlanning(@RequestHeader HttpHeaders headers, \n        @Valid @RequestBody InputRequest&lt;TransDeliveryPlanningDto&gt; request) {\n\n    String token = headers.getFirst(HttpHeaders.AUTHORIZATION);\n\n    TransDeliveryPlanning newTransDeliveryPlanning = transDeliveryPlanningService.save(token, request);\n\n    ResponseRequest&lt;TransDeliveryPlanning&gt; response = new ResponseRequest&lt;TransDeliveryPlanning&gt;();\n\n    if (newTransDeliveryPlanning != null) {\n        response.setMessage(PESAN_SIMPAN_BERHASIL);\n        response.setData(newTransDeliveryPlanning);\n    } else {\n        response.setMessage(PESAN_SIMPAN_GAGAL);\n    }\n\n    return ResponseEntity.ok(response);\n}\n</code></pre>\n<p>and i read somewhere there is something called <code>Interceptor</code> so we don't have to type @RequestHeader in every controller i think, but i dunno if that the solution or how to use it properly. if someone can do this with something better, i will accept yours as answer</p>\n"},{"comments":[{"owner":{"account_id":19092422,"reputation":51311,"user_id":13942448,"display_name":"jccampanero"},"score":0,"creation_date":1606861994,"post_id":65063678,"comment_id":115090502,"body_markdown":"@KeVin Could you try any of the proposed solutions?","body":"@KeVin Could you try any of the proposed solutions?"},{"owner":{"account_id":3153451,"reputation":3590,"user_id":2666368,"accept_rate":79,"display_name":"Ke Vin"},"score":0,"creation_date":1606977917,"post_id":65063678,"comment_id":115128388,"body_markdown":"wait i trying another solution, but if the bounty expired before i can pick one of the solution here, i will start the bounty again to reward one of you","body":"wait i trying another solution, but if the bounty expired before i can pick one of the solution here, i will start the bounty again to reward one of you"},{"owner":{"account_id":19092422,"reputation":51311,"user_id":13942448,"display_name":"jccampanero"},"score":1,"creation_date":1607001527,"post_id":65063678,"comment_id":115138427,"body_markdown":"Thank you very much @KeVin, I really appreciate that.","body":"Thank you very much @KeVin, I really appreciate that."},{"owner":{"account_id":5940200,"reputation":721,"user_id":4671737,"accept_rate":50,"display_name":"Tony Murphy"},"score":0,"creation_date":1615050228,"post_id":65063678,"comment_id":117574184,"body_markdown":"This was a very helpful answer.. I&#39;ve got a more complicated problem as I&#39;m using Feign Hystrix with Spring Boot. For those with similar problems to solve, checkout this write up on Hystrix and Threadlocals https://medium.com/@saurav24081996/java-hystrix-and-threadlocals-95ea9e194e83 and Hystrix plugins -  https://github.com/Netflix/Hystrix/wiki/Plugins#concurrencystrategy","body":"This was a very helpful answer.. I&#39;ve got a more complicated problem as I&#39;m using Feign Hystrix with Spring Boot. For those with similar problems to solve, checkout this write up on Hystrix and Threadlocals <a href=\"https://medium.com/@saurav24081996/java-hystrix-and-threadlocals-95ea9e194e83\" rel=\"nofollow noreferrer\">medium.com/@saurav24081996/&hellip;</a> and Hystrix plugins -  <a href=\"https://github.com/Netflix/Hystrix/wiki/Plugins#concurrencystrategy\" rel=\"nofollow noreferrer\">github.com/Netflix/Hystrix/wiki/Plugins#concurrencystrategy</a>"},{"owner":{"account_id":19092422,"reputation":51311,"user_id":13942448,"display_name":"jccampanero"},"score":0,"creation_date":1615054453,"post_id":65063678,"comment_id":117575448,"body_markdown":"Thank you very much @TonyMurphy, I really appreciate the comment.","body":"Thank you very much @TonyMurphy, I really appreciate the comment."},{"owner":{"account_id":5940200,"reputation":721,"user_id":4671737,"accept_rate":50,"display_name":"Tony Murphy"},"score":0,"creation_date":1615140098,"post_id":65063678,"comment_id":117593564,"body_markdown":"welcome @jccampanero.. just an extra update, solution with feign hystrix seems quite easy - just need to use Servlet filter to initiate the context, retrieve the bearer token from the servlet request header and then use HystrixRequestVariableDefault to store the token for later use https://github.com/Netflix/Hystrix/issues/92#issuecomment-260548068","body":"welcome @jccampanero.. just an extra update, solution with feign hystrix seems quite easy - just need to use Servlet filter to initiate the context, retrieve the bearer token from the servlet request header and then use HystrixRequestVariableDefault to store the token for later use <a href=\"https://github.com/Netflix/Hystrix/issues/92#issuecomment-260548068\" rel=\"nofollow noreferrer\">github.com/Netflix/Hystrix/issues/92#issuecomment-260548068</a>"}],"tags":[],"owner":{"account_id":19092422,"reputation":51311,"user_id":13942448,"display_name":"jccampanero"},"comment_count":6,"down_vote_count":1,"up_vote_count":18,"is_accepted":false,"score":17,"last_activity_date":1606675494,"creation_date":1606674684,"answer_id":65063678,"question_id":65019801,"body_markdown":"You have several options here.\r\n\r\nFor example, you can use a [request scoped bean](https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-scopes-request) and, as you suggest, one [MVC interceptor](https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc-handlermapping-interceptor).\r\n\r\nBasically, you need to define a wrapper for the token value:\r\n\r\n```java\r\npublic class BearerTokenWrapper {\r\n   private String token;\r\n\r\n   // setters and getters\r\n}\r\n```\r\n\r\nThen, provide an implementation of an MVC [`HandlerInterceptor`](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/servlet/HandlerInterceptor.html):\r\n\r\n```java\r\npublic class BearerTokenInterceptor extends HandlerInterceptorAdapter {\r\n\r\n  private BearerTokenWrapper tokenWrapper;\r\n\r\n  public BearerTokenInterceptor(BearerTokenWrapper tokenWrapper) {\r\n    this.tokenWrapper = tokenWrapper;\r\n  }\r\n\r\n  @Override\r\n  public boolean preHandle(HttpServletRequest request,\r\n          HttpServletResponse response, Object handler) throws Exception {\r\n    final String authorizationHeaderValue = request.getHeader(&quot;Authorization&quot;);\r\n    if (authorizationHeaderValue != null &amp;&amp; authorizationHeaderValue.startsWith(&quot;Bearer&quot;)) {\r\n      String token = authorizationHeaderValue.substring(7, authorizationHeaderValue.length());\r\n      tokenWrapper.setToken(token);\r\n    }\r\n    \r\n    return true;\r\n  }\r\n}\r\n```\r\n\r\nThis interceptor should be registered in your MVC configuration. For instance:\r\n\r\n```java\r\n@EnableWebMvc\r\n@Configuration\r\npublic class WebConfiguration extends WebConfigurer { /* or WebMvcConfigurerAdapter for Spring 4 */\r\n\r\n  @Override\r\n  public void addInterceptors(InterceptorRegistry registry) {\r\n    registry.addInterceptor(bearerTokenInterceptor());\r\n  }\r\n\r\n  @Bean\r\n  public BearerTokenInterceptor bearerTokenInterceptor() {\r\n      return new BearerTokenInterceptor(bearerTokenWrapper());\r\n  }\r\n\r\n  @Bean\r\n  @Scope(value = WebApplicationContext.SCOPE_REQUEST, proxyMode = ScopedProxyMode.TARGET_CLASS)\r\n  public BearerTokenWrapper bearerTokenWrapper() {\r\n    return new BearerTokenWrapper();\r\n  }\r\n\r\n}\r\n```\r\n\r\nWith this setup, you can use the bean in your `Service` autowiring the corresponding bean:\r\n\r\n```java\r\n@Autowired\r\nprivate BearerTokenWrapper tokenWrapper;\r\n\r\n//...\r\n\r\n\r\npublic TransDeliveryPlanning save(InputRequest&lt;TransDeliveryPlanningDto&gt; request) {\r\n       Future&lt;List&lt;PartnerDto&gt;&gt; initPartners = execs.submit(getDataFromAccount(transDeliveryPlanningDtSoDtoPartnerIdsSets));\r\n\r\n}\r\n\r\npublic Callable&lt;List&lt;PartnerDto&gt;&gt; getDataFromAccount(Set&lt;Long&gt; ids) {\r\n\r\n    String tokenString = tokenWrapper.getToken();\r\n    List&lt;PartnerDto&gt; partnerDtoResponse = accountFeignClient.getData(&quot;Bearer &quot; + tokenString, ids);\r\n    \r\n    return () -&gt; partnerDtoResponse;\r\n}\r\n```\r\n\r\nSimilar solutions has been provided here in stack overflow. See, for instance, [this related question](https://stackoverflow.com/questions/36295095/how-to-decorate-all-requests-to-take-a-value-from-header-and-add-it-in-the-body).\r\n\r\nIn addition to this Spring based approach, you can try something similar to the solution exposed in [this other stackoverflow question](https://stackoverflow.com/questions/37066331/using-headers-with-dynamic-values-in-feign-client-spring-cloud-brixton-rc2).\r\n\r\nHonestly I have never tested it, but it seems that you can provide the request header value right in the Feign client definition, in your case something like:\r\n\r\n```java\r\n@FeignClient(name=&quot;AccountFeignClient&quot;)\r\npublic interface AccountFeignClient {    \r\n    @RequestMapping(method = RequestMethod.GET, value = &quot;/data&quot;)\r\n    List&lt;PartnerDto&gt; getData(@RequestHeader(&quot;Authorization&quot;) String token, Set&lt;Long&gt; ids);\r\n}\r\n```\r\n\r\nOf course, you can also a common `Controller` that other `Controller`s can extend. This `Controller` will provide the logic necessary to obtain the bearer token from the `Authorization` header and the HTTP request provided, but in my opinion any of the aforementioned solutions are better.\r\n","title":"How to get bearer token from header of a request in java spring boot?","body":"<p>You have several options here.</p>\n<p>For example, you can use a <a href=\"https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-scopes-request\" rel=\"noreferrer\">request scoped bean</a> and, as you suggest, one <a href=\"https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc-handlermapping-interceptor\" rel=\"noreferrer\">MVC interceptor</a>.</p>\n<p>Basically, you need to define a wrapper for the token value:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class BearerTokenWrapper {\n   private String token;\n\n   // setters and getters\n}\n</code></pre>\n<p>Then, provide an implementation of an MVC <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/servlet/HandlerInterceptor.html\" rel=\"noreferrer\"><code>HandlerInterceptor</code></a>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class BearerTokenInterceptor extends HandlerInterceptorAdapter {\n\n  private BearerTokenWrapper tokenWrapper;\n\n  public BearerTokenInterceptor(BearerTokenWrapper tokenWrapper) {\n    this.tokenWrapper = tokenWrapper;\n  }\n\n  @Override\n  public boolean preHandle(HttpServletRequest request,\n          HttpServletResponse response, Object handler) throws Exception {\n    final String authorizationHeaderValue = request.getHeader(&quot;Authorization&quot;);\n    if (authorizationHeaderValue != null &amp;&amp; authorizationHeaderValue.startsWith(&quot;Bearer&quot;)) {\n      String token = authorizationHeaderValue.substring(7, authorizationHeaderValue.length());\n      tokenWrapper.setToken(token);\n    }\n    \n    return true;\n  }\n}\n</code></pre>\n<p>This interceptor should be registered in your MVC configuration. For instance:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@EnableWebMvc\n@Configuration\npublic class WebConfiguration extends WebConfigurer { /* or WebMvcConfigurerAdapter for Spring 4 */\n\n  @Override\n  public void addInterceptors(InterceptorRegistry registry) {\n    registry.addInterceptor(bearerTokenInterceptor());\n  }\n\n  @Bean\n  public BearerTokenInterceptor bearerTokenInterceptor() {\n      return new BearerTokenInterceptor(bearerTokenWrapper());\n  }\n\n  @Bean\n  @Scope(value = WebApplicationContext.SCOPE_REQUEST, proxyMode = ScopedProxyMode.TARGET_CLASS)\n  public BearerTokenWrapper bearerTokenWrapper() {\n    return new BearerTokenWrapper();\n  }\n\n}\n</code></pre>\n<p>With this setup, you can use the bean in your <code>Service</code> autowiring the corresponding bean:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Autowired\nprivate BearerTokenWrapper tokenWrapper;\n\n//...\n\n\npublic TransDeliveryPlanning save(InputRequest&lt;TransDeliveryPlanningDto&gt; request) {\n       Future&lt;List&lt;PartnerDto&gt;&gt; initPartners = execs.submit(getDataFromAccount(transDeliveryPlanningDtSoDtoPartnerIdsSets));\n\n}\n\npublic Callable&lt;List&lt;PartnerDto&gt;&gt; getDataFromAccount(Set&lt;Long&gt; ids) {\n\n    String tokenString = tokenWrapper.getToken();\n    List&lt;PartnerDto&gt; partnerDtoResponse = accountFeignClient.getData(&quot;Bearer &quot; + tokenString, ids);\n    \n    return () -&gt; partnerDtoResponse;\n}\n</code></pre>\n<p>Similar solutions has been provided here in stack overflow. See, for instance, <a href=\"https://stackoverflow.com/questions/36295095/how-to-decorate-all-requests-to-take-a-value-from-header-and-add-it-in-the-body\">this related question</a>.</p>\n<p>In addition to this Spring based approach, you can try something similar to the solution exposed in <a href=\"https://stackoverflow.com/questions/37066331/using-headers-with-dynamic-values-in-feign-client-spring-cloud-brixton-rc2\">this other stackoverflow question</a>.</p>\n<p>Honestly I have never tested it, but it seems that you can provide the request header value right in the Feign client definition, in your case something like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@FeignClient(name=&quot;AccountFeignClient&quot;)\npublic interface AccountFeignClient {    \n    @RequestMapping(method = RequestMethod.GET, value = &quot;/data&quot;)\n    List&lt;PartnerDto&gt; getData(@RequestHeader(&quot;Authorization&quot;) String token, Set&lt;Long&gt; ids);\n}\n</code></pre>\n<p>Of course, you can also a common <code>Controller</code> that other <code>Controller</code>s can extend. This <code>Controller</code> will provide the logic necessary to obtain the bearer token from the <code>Authorization</code> header and the HTTP request provided, but in my opinion any of the aforementioned solutions are better.</p>\n"},{"tags":[],"owner":{"account_id":10592234,"reputation":776,"user_id":7802372,"accept_rate":50,"display_name":"f.trajkovski"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1607519571,"creation_date":1606676760,"answer_id":65064010,"question_id":65019801,"body_markdown":"I had a similar case. I was intercepting the requests from one microservice, getting the token and setting it my new ApiClient and calling endpoint from another microservice using this ApiClient. But I really don&#39;t know if there is possibility to pre-configure feign client. One thing that you can do is to create DefaultApiFilter, intercept the request, save the token in your database (or set it to some static variable, some singleton class or something similar) and then call in it your service method when trying to use the FeignClient:\r\n\r\n    package com.north.config;\r\n\r\n    import org.springframework.stereotype.Component;\r\n\r\n    import javax.servlet.*;\r\n    import javax.servlet.http.HttpServletRequest;\r\n    import java.io.IOException;\r\n\r\n    @Component\r\n    public class DefaultApiFilter implements Filter {\r\n\r\n\r\n    @Override\r\n    public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, \r\n    FilterChain filterChain) throws IOException, ServletException {\r\n        HttpServletRequest req = (HttpServletRequest) servletRequest;\r\n\r\n        String auth = req.getHeader(&quot;Authorization&quot;);\r\n\r\n        //TODO if you want you can persist your token here and use it on other place\r\n\r\n        //TODO This may be used for verification if it comes from the right endpoint and if you should save the token\r\n        final String requestURI = ((RequestFacade) servletRequest).getRequestURI();\r\n\r\n        filterChain.doFilter(servletRequest, servletResponse);\r\n        }\r\n    }\r\n\r\nThis `doFilter` method will always be executed before any endpoint is called, and later the endpoint will be called.\r\n\r\nAnd later use it when calling the `accountFeignClient.getData(&quot;Bearer &quot; + tokenString, ids);` you can get it from your database (or from any other place that you kept it) and set it here.\r\n","title":"How to get bearer token from header of a request in java spring boot?","body":"<p>I had a similar case. I was intercepting the requests from one microservice, getting the token and setting it my new ApiClient and calling endpoint from another microservice using this ApiClient. But I really don't know if there is possibility to pre-configure feign client. One thing that you can do is to create DefaultApiFilter, intercept the request, save the token in your database (or set it to some static variable, some singleton class or something similar) and then call in it your service method when trying to use the FeignClient:</p>\n<pre><code>package com.north.config;\n\nimport org.springframework.stereotype.Component;\n\nimport javax.servlet.*;\nimport javax.servlet.http.HttpServletRequest;\nimport java.io.IOException;\n\n@Component\npublic class DefaultApiFilter implements Filter {\n\n\n@Override\npublic void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, \nFilterChain filterChain) throws IOException, ServletException {\n    HttpServletRequest req = (HttpServletRequest) servletRequest;\n\n    String auth = req.getHeader(&quot;Authorization&quot;);\n\n    //TODO if you want you can persist your token here and use it on other place\n\n    //TODO This may be used for verification if it comes from the right endpoint and if you should save the token\n    final String requestURI = ((RequestFacade) servletRequest).getRequestURI();\n\n    filterChain.doFilter(servletRequest, servletResponse);\n    }\n}\n</code></pre>\n<p>This <code>doFilter</code> method will always be executed before any endpoint is called, and later the endpoint will be called.</p>\n<p>And later use it when calling the <code>accountFeignClient.getData(&quot;Bearer &quot; + tokenString, ids);</code> you can get it from your database (or from any other place that you kept it) and set it here.</p>\n"},{"tags":[],"owner":{"account_id":10315815,"reputation":278,"user_id":7610175,"display_name":"Abhijay"},"comment_count":0,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1606896154,"creation_date":1606895488,"answer_id":65104103,"question_id":65019801,"body_markdown":"You could create this simple static method in a utility class, and reuse this method directly.\r\n\r\n    import org.springframework.web.context.request.RequestContextHolder;\r\n    import org.springframework.web.context.request.ServletRequestAttributes;\r\n    \r\n    public class BearerTokenUtil {\r\n    \r\n      public static String getBearerTokenHeader() {\r\n        return ((ServletRequestAttributes) RequestContextHolder.getRequestAttributes()).getRequest().getHeader(&quot;Authorization&quot;);\r\n      }\r\n    }\r\n\r\nYour service would then look like this \r\n\r\n    public TransDeliveryPlanning save(InputRequest&lt;TransDeliveryPlanningDto&gt; request) {\r\n           Future&lt;List&lt;PartnerDto&gt;&gt; initPartners = execs.submit(getDataFromAccount(transDeliveryPlanningDtSoDtoPartnerIdsSets));\r\n    }\r\n    \r\n    public Callable&lt;List&lt;PartnerDto&gt;&gt; getDataFromAccount(Set&lt;Long&gt; ids) {\r\n        List&lt;PartnerDto&gt; partnerDtoResponse = accountFeignClient.getData(BearerTokenUtil.getBearerTokenHeader(), ids);\r\n        return () -&gt; partnerDtoResponse;\r\n    }","title":"How to get bearer token from header of a request in java spring boot?","body":"<p>You could create this simple static method in a utility class, and reuse this method directly.</p>\n<pre><code>import org.springframework.web.context.request.RequestContextHolder;\nimport org.springframework.web.context.request.ServletRequestAttributes;\n\npublic class BearerTokenUtil {\n\n  public static String getBearerTokenHeader() {\n    return ((ServletRequestAttributes) RequestContextHolder.getRequestAttributes()).getRequest().getHeader(&quot;Authorization&quot;);\n  }\n}\n</code></pre>\n<p>Your service would then look like this</p>\n<pre><code>public TransDeliveryPlanning save(InputRequest&lt;TransDeliveryPlanningDto&gt; request) {\n       Future&lt;List&lt;PartnerDto&gt;&gt; initPartners = execs.submit(getDataFromAccount(transDeliveryPlanningDtSoDtoPartnerIdsSets));\n}\n\npublic Callable&lt;List&lt;PartnerDto&gt;&gt; getDataFromAccount(Set&lt;Long&gt; ids) {\n    List&lt;PartnerDto&gt; partnerDtoResponse = accountFeignClient.getData(BearerTokenUtil.getBearerTokenHeader(), ids);\n    return () -&gt; partnerDtoResponse;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14766609,"reputation":4337,"user_id":10664446,"display_name":"stacker"},"comment_count":0,"down_vote_count":0,"up_vote_count":31,"is_accepted":true,"score":31,"last_activity_date":1607081461,"creation_date":1607007522,"answer_id":65128439,"question_id":65019801,"body_markdown":"Although the suggested answers work, passing the token each time to `FeignClient` calls still not the best way to do it.\r\nI would suggest to create an interceptor for feign requests and there you can extract the token from `RequestContextHolder` and add it to request header directly.\r\n like this: \r\n\r\n        @Component\r\n        public class FeignClientInterceptor implements RequestInterceptor {\r\n        \r\n          private static final String AUTHORIZATION_HEADER = &quot;Authorization&quot;;\r\n    \r\n          public static String getBearerTokenHeader() {\r\n            return ((ServletRequestAttributes) RequestContextHolder.getRequestAttributes()).getRequest().getHeader(&quot;Authorization&quot;);\r\n          }\r\n        \r\n          @Override\r\n          public void apply(RequestTemplate requestTemplate) {\r\n    \r\n              requestTemplate.header(AUTHORIZATION_HEADER, getBearerTokenHeader());\r\n           \r\n          }\r\n        }\r\n\r\nthis way you have a clean solution for your issue","title":"How to get bearer token from header of a request in java spring boot?","body":"<p>Although the suggested answers work, passing the token each time to <code>FeignClient</code> calls still not the best way to do it.\nI would suggest to create an interceptor for feign requests and there you can extract the token from <code>RequestContextHolder</code> and add it to request header directly.\nlike this:</p>\n<pre><code>    @Component\n    public class FeignClientInterceptor implements RequestInterceptor {\n    \n      private static final String AUTHORIZATION_HEADER = &quot;Authorization&quot;;\n\n      public static String getBearerTokenHeader() {\n        return ((ServletRequestAttributes) RequestContextHolder.getRequestAttributes()).getRequest().getHeader(&quot;Authorization&quot;);\n      }\n    \n      @Override\n      public void apply(RequestTemplate requestTemplate) {\n\n          requestTemplate.header(AUTHORIZATION_HEADER, getBearerTokenHeader());\n       \n      }\n    }\n</code></pre>\n<p>this way you have a clean solution for your issue</p>\n"},{"tags":[],"owner":{"account_id":7231318,"reputation":89,"user_id":5518031,"accept_rate":83,"display_name":"Randy Hector"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1607450124,"creation_date":1607105973,"answer_id":65148734,"question_id":65019801,"body_markdown":"I think the answer below from @stacker is correct but also I think is somehow incomplete and missing the &quot;how to use it in Feign&quot;.\r\n\r\nFor the sake of the example, I will provide a real use case where you can intercept the `User-Agent` of the caller to your service and forward this in the `Feign` call\r\n\r\nAssuming that you use `Feign` clients based on annotations this is how you can use the interceptor in all your Feign clients calls without any extra code\r\n\r\n```\r\n@Configuration\r\n@EnableFeignClients(\r\n    defaultConfiguration = DefaultFeignConfiguration.class\r\n)\r\npublic class FeignConfig\r\n{\r\n}\r\n```\r\n \r\n```\r\n@Configuration\r\n@Import(FeignClientsConfiguration.class)\r\npublic class DefaultFeignConfiguration\r\n{\r\n    @Bean\r\n    public RequestInterceptor userAgentHeaderInterceptor() {\r\n        return UserAgentHeaderInterceptor();\r\n    } \r\n}\r\n```\r\n\r\nThis is the User-Agent interceptor class\r\n\r\n```\r\npublic class UserAgentHeaderInterceptor extends BaseHeaderInterceptor\r\n{\r\n\r\n    private static final String USER_AGENT = &quot;User-Agent&quot;;\r\n\r\n\r\n    public UserAgentHeaderInterceptor()\r\n    {\r\n        super(USER_AGENT);\r\n    }\r\n}\r\n```\r\n\r\n```\r\npublic class BaseHeaderInterceptor implements RequestInterceptor\r\n{\r\n\r\n    private final String[] headerNames;\r\n\r\n\r\n    public BaseHeaderInterceptor(String... headerNames)\r\n    {\r\n        this.headerNames = headerNames;\r\n    }\r\n\r\n\r\n    @Override\r\n    public void apply(RequestTemplate template)\r\n    {\r\n        ServletRequestAttributes attributes = (ServletRequestAttributes) RequestContextHolder.getRequestAttributes();\r\n\r\n        if (attributes != null)\r\n        {\r\n            HttpServletRequest httpServletRequest = attributes.getRequest();\r\n\r\n            for (String headerName : headerNames)\r\n            {\r\n                String headerValue = httpServletRequest.getHeader(headerName);\r\n                if (headerValue != null &amp;&amp; !headerValue.isEmpty())\r\n                {\r\n                    template.header(headerName, headerValue);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nIn your case, you just need to either take this base class and create your own interceptor the same way as the `UserAgentHeaderInterceptor`","title":"How to get bearer token from header of a request in java spring boot?","body":"<p>I think the answer below from @stacker is correct but also I think is somehow incomplete and missing the &quot;how to use it in Feign&quot;.</p>\n<p>For the sake of the example, I will provide a real use case where you can intercept the <code>User-Agent</code> of the caller to your service and forward this in the <code>Feign</code> call</p>\n<p>Assuming that you use <code>Feign</code> clients based on annotations this is how you can use the interceptor in all your Feign clients calls without any extra code</p>\n<pre><code>@Configuration\n@EnableFeignClients(\n    defaultConfiguration = DefaultFeignConfiguration.class\n)\npublic class FeignConfig\n{\n}\n</code></pre>\n<pre><code>@Configuration\n@Import(FeignClientsConfiguration.class)\npublic class DefaultFeignConfiguration\n{\n    @Bean\n    public RequestInterceptor userAgentHeaderInterceptor() {\n        return UserAgentHeaderInterceptor();\n    } \n}\n</code></pre>\n<p>This is the User-Agent interceptor class</p>\n<pre><code>public class UserAgentHeaderInterceptor extends BaseHeaderInterceptor\n{\n\n    private static final String USER_AGENT = &quot;User-Agent&quot;;\n\n\n    public UserAgentHeaderInterceptor()\n    {\n        super(USER_AGENT);\n    }\n}\n</code></pre>\n<pre><code>public class BaseHeaderInterceptor implements RequestInterceptor\n{\n\n    private final String[] headerNames;\n\n\n    public BaseHeaderInterceptor(String... headerNames)\n    {\n        this.headerNames = headerNames;\n    }\n\n\n    @Override\n    public void apply(RequestTemplate template)\n    {\n        ServletRequestAttributes attributes = (ServletRequestAttributes) RequestContextHolder.getRequestAttributes();\n\n        if (attributes != null)\n        {\n            HttpServletRequest httpServletRequest = attributes.getRequest();\n\n            for (String headerName : headerNames)\n            {\n                String headerValue = httpServletRequest.getHeader(headerName);\n                if (headerValue != null &amp;&amp; !headerValue.isEmpty())\n                {\n                    template.header(headerName, headerValue);\n                }\n            }\n        }\n    }\n}\n</code></pre>\n<p>In your case, you just need to either take this base class and create your own interceptor the same way as the <code>UserAgentHeaderInterceptor</code></p>\n"},{"tags":[],"owner":{"account_id":12257428,"reputation":385,"user_id":8946107,"display_name":"Rocard Fonji"},"comment_count":0,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1654125532,"creation_date":1654125532,"answer_id":72468976,"question_id":65019801,"body_markdown":"An easy way to get **Bearer Token** from the header is to use **@RequestHeader** with the header name.\r\n\r\nSee code sample below\r\n```\r\n@PostMapping(&quot;/some-endpoint&quot;)\r\npublic ResponseEntity&lt;String&gt; someClassNmae(@RequestHeader(&quot;Authorization&quot;) String bearerToken) {\r\n\r\n   System.out.println(bearerToken); // print out bearer token\r\n\r\n   // some more code\r\n}\r\n```","title":"How to get bearer token from header of a request in java spring boot?","body":"<p>An easy way to get <strong>Bearer Token</strong> from the header is to use <strong>@RequestHeader</strong> with the header name.</p>\n<p>See code sample below</p>\n<pre><code>@PostMapping(&quot;/some-endpoint&quot;)\npublic ResponseEntity&lt;String&gt; someClassNmae(@RequestHeader(&quot;Authorization&quot;) String bearerToken) {\n\n   System.out.println(bearerToken); // print out bearer token\n\n   // some more code\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24213809,"reputation":51,"user_id":18169953,"display_name":"Wenlong Feng"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1663559097,"creation_date":1663559097,"answer_id":73768275,"question_id":65019801,"body_markdown":"Use this annotations to get the header information returned by the front end:\r\n**@RequestHeader(&quot;Authorization&quot;) String token**\r\n\r\nExample:\r\n```\r\n@GetMapping(&quot;/hello&quot;)\r\n    public void hello(@RequestHeader(&quot;Authorization&quot;) String token){\r\n```\r\n\r\n","title":"How to get bearer token from header of a request in java spring boot?","body":"<p>Use this annotations to get the header information returned by the front end:\n<strong>@RequestHeader(&quot;Authorization&quot;) String token</strong></p>\n<p>Example:</p>\n<pre><code>@GetMapping(&quot;/hello&quot;)\n    public void hello(@RequestHeader(&quot;Authorization&quot;) String token){\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25798468,"reputation":74,"user_id":19541281,"display_name":"sbrajchuk"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695227967,"creation_date":1695227360,"answer_id":77144373,"question_id":65019801,"body_markdown":"You can obtain a token from the security context using the following Java code:\r\n\r\n```Java\r\nimport org.springframework.security.core.context.SecurityContextHolder;\r\nimport org.springframework.security.oauth2.jwt.Jwt;\r\n ...\r\n\r\nJwt authenticationToken = (Jwt) SecurityContextHolder.getContext()\r\n                                                     .getAuthentication()\r\n                                                     .getCredentials();\r\nString tokenString = authenticationToken.getTokenValue();\r\n```","title":"How to get bearer token from header of a request in java spring boot?","body":"<p>You can obtain a token from the security context using the following Java code:</p>\n<pre><code>import org.springframework.security.core.context.SecurityContextHolder;\nimport org.springframework.security.oauth2.jwt.Jwt;\n ...\n\nJwt authenticationToken = (Jwt) SecurityContextHolder.getContext()\n                                                     .getAuthentication()\n                                                     .getCredentials();\nString tokenString = authenticationToken.getTokenValue();\n</code></pre>\n"}],"owner":{"account_id":3153451,"reputation":3590,"user_id":2666368,"accept_rate":79,"display_name":"Ke Vin"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":105043,"favorite_count":0,"down_vote_count":0,"up_vote_count":30,"accepted_answer_id":65128439,"answer_count":9,"score":30,"last_activity_date":1695227967,"creation_date":1606385110,"question_id":65019801,"body_markdown":"Hi what trying to achieve is to get bearer token that submited from front end in java spring boot RESTApi controller and do another request using feign client to another microservices? here is what i do\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/4bU6m.png\r\n\r\nimage above is how i do my request from postman, and here is my controller code :\r\n\r\n    @Operation(summary = &quot;Save new&quot;)\r\n    @PostMapping(&quot;/store&quot;)\r\n    public ResponseEntity&lt;ResponseRequest&lt;TransDeliveryPlanning&gt;&gt; saveNewTransDeliveryPlanning(\r\n    \t\t@Valid @RequestBody InputRequest&lt;TransDeliveryPlanningDto&gt; request) {\r\n    \r\n    \tTransDeliveryPlanning newTransDeliveryPlanning = transDeliveryPlanningService.save(request);\r\n    \r\n    \tResponseRequest&lt;TransDeliveryPlanning&gt; response = new ResponseRequest&lt;TransDeliveryPlanning&gt;();\r\n    \r\n    \tif (newTransDeliveryPlanning != null) {\r\n    \t\tresponse.setMessage(PESAN_SIMPAN_BERHASIL);\r\n    \t\tresponse.setData(newTransDeliveryPlanning);\r\n    \t} else {\r\n    \t\tresponse.setMessage(PESAN_SIMPAN_GAGAL);\r\n    \t}\r\n    \r\n    \treturn ResponseEntity.ok(response);\r\n    }\r\n\r\nand here is how my service look like :\r\n\r\n    public TransDeliveryPlanning save(InputRequest&lt;TransDeliveryPlanningDto&gt; request) {\r\n           Future&lt;List&lt;PartnerDto&gt;&gt; initPartners = execs.submit(getDataFromAccount(transDeliveryPlanningDtSoDtoPartnerIdsSets));\r\n    \r\n    }\r\n    \r\n    public Callable&lt;List&lt;PartnerDto&gt;&gt; getDataFromAccount(Set&lt;Long&gt; ids) {\r\n    \r\n    \tString tokenString = &quot;i should get the token from postman, how do i get it to here?&quot;;\r\n    \tList&lt;PartnerDto&gt; partnerDtoResponse = accountFeignClient.getData(&quot;Bearer &quot; + tokenString, ids);\r\n    \t\r\n    \treturn () -&gt; partnerDtoResponse;\r\n    }\r\n\r\nas you can see, in &quot;tokenString&quot; there i put a string that i questioned about, how do i get it to there from postman?","title":"How to get bearer token from header of a request in java spring boot?","body":"<p>Hi what trying to achieve is to get bearer token that submited from front end in java spring boot RESTApi controller and do another request using feign client to another microservices? here is what i do</p>\n<p><a href=\"https://i.stack.imgur.com/4bU6m.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/4bU6m.png\" alt=\"enter image description here\" /></a></p>\n<p>image above is how i do my request from postman, and here is my controller code :</p>\n<pre><code>@Operation(summary = &quot;Save new&quot;)\n@PostMapping(&quot;/store&quot;)\npublic ResponseEntity&lt;ResponseRequest&lt;TransDeliveryPlanning&gt;&gt; saveNewTransDeliveryPlanning(\n        @Valid @RequestBody InputRequest&lt;TransDeliveryPlanningDto&gt; request) {\n\n    TransDeliveryPlanning newTransDeliveryPlanning = transDeliveryPlanningService.save(request);\n\n    ResponseRequest&lt;TransDeliveryPlanning&gt; response = new ResponseRequest&lt;TransDeliveryPlanning&gt;();\n\n    if (newTransDeliveryPlanning != null) {\n        response.setMessage(PESAN_SIMPAN_BERHASIL);\n        response.setData(newTransDeliveryPlanning);\n    } else {\n        response.setMessage(PESAN_SIMPAN_GAGAL);\n    }\n\n    return ResponseEntity.ok(response);\n}\n</code></pre>\n<p>and here is how my service look like :</p>\n<pre><code>public TransDeliveryPlanning save(InputRequest&lt;TransDeliveryPlanningDto&gt; request) {\n       Future&lt;List&lt;PartnerDto&gt;&gt; initPartners = execs.submit(getDataFromAccount(transDeliveryPlanningDtSoDtoPartnerIdsSets));\n\n}\n\npublic Callable&lt;List&lt;PartnerDto&gt;&gt; getDataFromAccount(Set&lt;Long&gt; ids) {\n\n    String tokenString = &quot;i should get the token from postman, how do i get it to here?&quot;;\n    List&lt;PartnerDto&gt; partnerDtoResponse = accountFeignClient.getData(&quot;Bearer &quot; + tokenString, ids);\n    \n    return () -&gt; partnerDtoResponse;\n}\n</code></pre>\n<p>as you can see, in &quot;tokenString&quot; there i put a string that i questioned about, how do i get it to there from postman?</p>\n"},{"tags":["java","spring"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1695275279,"post_id":77144415,"comment_id":136003087,"body_markdown":"You ofcourse did read the migration guides for all the versions you skipped? Which would have lead you to https://docs.spring.io/spring-framework/reference/web/webmvc/mvc-controller/ann-requestmapping.html#mvc-ann-requestmapping-suffix-pattern-match. Which explains what to do. In short do `configurer. useSuffixPatternMatching(true);` (as the default is `false`).","body":"You ofcourse did read the migration guides for all the versions you skipped? Which would have lead you to <a href=\"https://docs.spring.io/spring-framework/reference/web/webmvc/mvc-controller/ann-requestmapping.html#mvc-ann-requestmapping-suffix-pattern-match\" rel=\"nofollow noreferrer\">docs.spring.io/spring-framework/reference/web/webmvc/&hellip;</a>. Which explains what to do. In short do <code>configurer. useSuffixPatternMatching(true);</code> (as the default is <code>false</code>)."},{"owner":{"account_id":1707831,"reputation":1627,"user_id":1566537,"accept_rate":82,"display_name":"Bernie"},"score":0,"creation_date":1695280585,"post_id":77144415,"comment_id":136003895,"body_markdown":"You&#39;re right, thanks. Something of note: I had in my code\n`configurer.setUseSuffixPatternMatch(true);``configurer.setUseRegisteredSuffixPatternMatch(true);`\nand it didn&#39;t work. Removing the latter and it works.","body":"You&#39;re right, thanks. Something of note: I had in my code <code>configurer.setUseSuffixPatternMatch(true);``configurer.setUs&zwnj;&#8203;eRegisteredSuffixPat&zwnj;&#8203;ternMatch(true);</code> and it didn&#39;t work. Removing the latter and it works."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1695281718,"post_id":77144415,"comment_id":136004098,"body_markdown":"The one you used requires explicit setting of the suffixes that are supported and is used in conjuction with content negotiation.","body":"The one you used requires explicit setting of the suffixes that are supported and is used in conjuction with content negotiation."}],"owner":{"account_id":1707831,"reputation":1627,"user_id":1566537,"accept_rate":82,"display_name":"Bernie"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1695227756,"creation_date":1695227756,"question_id":77144415,"body_markdown":"I&#39;m migrating a Spring Project from v4.30 with Java 8 to v5.3.x with Java 11 (NOT Spring Boot).\r\n\r\nAll our RequestMappings used the suffix .do via Configuration, the endpoint in this class \r\n\r\n    @Controller\r\n    public class WelcomeWebController \r\n    \t@GetMapping(&quot;welcome&quot;) public String welcome() { ... } // -&gt; welcome.do\r\n    \t@GetMapping(&quot;hello&quot;)   public String hello()   { ... } // -&gt; hello.do\r\n\r\nwas actually a welcome.do or a hello.do, although the `@GetMapping(&quot;welcome&quot;)` has no &quot;.do&quot;.\r\n\r\nWe configured this suffix (among others) in a Spring derived configuration class like that:\r\n\r\n\tpublic class MyWebAppInitializer extends AbstractDispatcherServletInitializer {\r\n\t\t@Override\r\n\t\tprotected String[] getServletMappings() {\r\n\t\t  return new String[] { &quot;*.do&quot;, &quot;*.xyz&quot;, &quot;/webresources/*&quot; };\r\n\t\t}\r\n\t\t\r\nThis worked fine in Spring4, but no longer in Spring 5 (although the debugger stops at `getServletMappings`).\r\n\r\nA possible workaround would be to add the .do to all RequestMappings, \r\n\t\r\n\r\n    @GetMapping(value={&quot;welcome&quot;,&quot;welcome.do&quot;})\r\n\r\nbut I think, there&#39;s a better way, as we have 100+ endpoints.\r\n\r\nReading along, I think the way to go in Spring 5 is to derive from WebMvcConfigurer like that:\r\n\r\n\tpublic class MyWebConfig implements WebMvcConfigurer {\r\n\t\t@Override\r\n\t\tpublic void configurePathMatch(PathMatchConfigurer configurer) {\r\n\t\t\t// Should I use setPathMatcher or setPatternParser? Or am I completely wrong here?\r\n\t\t\t// Is configurer.setUseSuffixPatternMatch(true) relevant here?\r\n\t\t\t\r\nThat&#39;s where I&#39;m struggling, I don&#39;t quite get how to use it.   \r\nHow do I override this method? Is this the right place to add the suffix?  \r\nOr can I somehow continue to use my old `MyWebAppInitializer` (see above) with the servlet mappings?  \r\n\r\nThanks","title":"Spring 5 Migration: How to add the suffix .do to all RequestMappings?","body":"<p>I'm migrating a Spring Project from v4.30 with Java 8 to v5.3.x with Java 11 (NOT Spring Boot).</p>\n<p>All our RequestMappings used the suffix .do via Configuration, the endpoint in this class</p>\n<pre><code>@Controller\npublic class WelcomeWebController \n    @GetMapping(&quot;welcome&quot;) public String welcome() { ... } // -&gt; welcome.do\n    @GetMapping(&quot;hello&quot;)   public String hello()   { ... } // -&gt; hello.do\n</code></pre>\n<p>was actually a welcome.do or a hello.do, although the <code>@GetMapping(&quot;welcome&quot;)</code> has no &quot;.do&quot;.</p>\n<p>We configured this suffix (among others) in a Spring derived configuration class like that:</p>\n<pre><code>public class MyWebAppInitializer extends AbstractDispatcherServletInitializer {\n    @Override\n    protected String[] getServletMappings() {\n      return new String[] { &quot;*.do&quot;, &quot;*.xyz&quot;, &quot;/webresources/*&quot; };\n    }\n    \n</code></pre>\n<p>This worked fine in Spring4, but no longer in Spring 5 (although the debugger stops at <code>getServletMappings</code>).</p>\n<p>A possible workaround would be to add the .do to all RequestMappings,</p>\n<pre><code>@GetMapping(value={&quot;welcome&quot;,&quot;welcome.do&quot;})\n</code></pre>\n<p>but I think, there's a better way, as we have 100+ endpoints.</p>\n<p>Reading along, I think the way to go in Spring 5 is to derive from WebMvcConfigurer like that:</p>\n<pre><code>public class MyWebConfig implements WebMvcConfigurer {\n    @Override\n    public void configurePathMatch(PathMatchConfigurer configurer) {\n        // Should I use setPathMatcher or setPatternParser? Or am I completely wrong here?\n        // Is configurer.setUseSuffixPatternMatch(true) relevant here?\n        \n</code></pre>\n<p>That's where I'm struggling, I don't quite get how to use it.<br />\nHow do I override this method? Is this the right place to add the suffix?<br />\nOr can I somehow continue to use my old <code>MyWebAppInitializer</code> (see above) with the servlet mappings?</p>\n<p>Thanks</p>\n"},{"tags":["java","spring-boot","springdoc-openapi-ui","openapi-generator-maven-plugin"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1695229554,"post_id":77144414,"comment_id":135997772,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"owner":{"account_id":29492216,"reputation":1,"user_id":22601041,"display_name":"tjam"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695227751,"creation_date":1695227751,"question_id":77144414,"body_markdown":"# I am pretty new with openApi generator. I generated a simple code using a yaml file. everything seems to run fine but when i am accessing the swagger page i am getting &quot;No operations defined in spec!&quot;, i am unsure if i am missing a dependency or something in the code. \r\n[(https://i.stack.imgur.com/FsghM.png)](https://i.stack.imgur.com/Hjx1p.png)\r\n[enter image description here](https://i.stack.imgur.com/6a33T.png)\r\n\r\nI wrote the yaml file, added all the dependencies then did a mvn clean install which generated the code in my target folder and the code ran and compile. I was hoping to be able to render the swagger page properly for testing purposes\r\n\r\n```\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;11&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.data&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-data-jpa&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.4.6&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.openapitools&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jackson-databind-nullable&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;0.2.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springdoc&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;springdoc-openapi-ui&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.7.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n                &lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;io.springfox&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;springfox-oas&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.0.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\r\n\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.openapitools&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;openapi-generator-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;5.3.0&lt;/version&gt;\r\n\t\t\t\t&lt;executions&gt;\r\n\t\t\t\t\t&lt;execution&gt;\r\n\t\t\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t\t\t&lt;goal&gt;generate&lt;/goal&gt;\r\n\t\t\t\t\t\t&lt;/goals&gt;\r\n\t\t\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t\t\t&lt;inputSpec&gt;\r\n\t\t\t\t\t\t\t\t${project.basedir}/src/main/resources/demoFile.yml\r\n\t\t\t\t\t\t\t&lt;/inputSpec&gt;\r\n\t\t\t\t\t\t\t&lt;generatorName&gt;spring&lt;/generatorName&gt;\r\n\t\t\t\t\t\t\t&lt;apiPackage&gt;com.code.openapi.api&lt;/apiPackage&gt;\r\n\t\t\t\t\t\t\t&lt;modelPackage&gt;com.code.openapi.model&lt;/modelPackage&gt;\r\n\t\t\t\t\t\t\t&lt;supportingFilesToGenerate&gt;\r\n\t\t\t\t\t\t\t\tApiUtil.java\r\n\t\t\t\t\t\t\t&lt;/supportingFilesToGenerate&gt;\r\n\t\t\t\t\t\t\t&lt;configOptions&gt;\r\n\t\t\t\t\t\t\t\t&lt;interfaceOnly&gt;true&lt;/interfaceOnly&gt;\r\n\t\t\t\t\t\t\t\t&lt;delegatePattern&gt;false&lt;/delegatePattern&gt;\r\n\t\t\t\t\t\t\t&lt;/configOptions&gt;\r\n\t\t\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t\t\t&lt;/execution&gt;\r\n\t\t\t\t&lt;/executions&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;excludes&gt;\r\n\t\t\t\t\t\t&lt;exclude&gt;\r\n\t\t\t\t\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t\t\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t\t\t\t&lt;/exclude&gt;\r\n\t\t\t\t\t&lt;/excludes&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;```\r\n```","title":"simple code using OpenAPI and spring. However, my swagger page keep saying &quot;No operations defined in spec!&quot;","body":"<h1>I am pretty new with openApi generator. I generated a simple code using a yaml file. everything seems to run fine but when i am accessing the swagger page i am getting &quot;No operations defined in spec!&quot;, i am unsure if i am missing a dependency or something in the code.</h1>\n<p><a href=\"https://i.stack.imgur.com/Hjx1p.png\" rel=\"nofollow noreferrer\">(https://i.stack.imgur.com/FsghM.png)</a>\n<a href=\"https://i.stack.imgur.com/6a33T.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>I wrote the yaml file, added all the dependencies then did a mvn clean install which generated the code in my target folder and the code ran and compile. I was hoping to be able to render the swagger page properly for testing purposes</p>\n<pre><code>    &lt;properties&gt;\n        &lt;java.version&gt;11&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-data-jpa&lt;/artifactId&gt;\n            &lt;version&gt;2.4.6&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.openapitools&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-databind-nullable&lt;/artifactId&gt;\n            &lt;version&gt;0.2.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\n            &lt;artifactId&gt;springdoc-openapi-ui&lt;/artifactId&gt;\n            &lt;version&gt;1.7.0&lt;/version&gt;\n        &lt;/dependency&gt;\n                &lt;dependency&gt;\n            &lt;groupId&gt;io.springfox&lt;/groupId&gt;\n            &lt;artifactId&gt;springfox-oas&lt;/artifactId&gt;\n            &lt;version&gt;3.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n\n\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.openapitools&lt;/groupId&gt;\n                &lt;artifactId&gt;openapi-generator-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;5.3.0&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;generate&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;inputSpec&gt;\n                                ${project.basedir}/src/main/resources/demoFile.yml\n                            &lt;/inputSpec&gt;\n                            &lt;generatorName&gt;spring&lt;/generatorName&gt;\n                            &lt;apiPackage&gt;com.code.openapi.api&lt;/apiPackage&gt;\n                            &lt;modelPackage&gt;com.code.openapi.model&lt;/modelPackage&gt;\n                            &lt;supportingFilesToGenerate&gt;\n                                ApiUtil.java\n                            &lt;/supportingFilesToGenerate&gt;\n                            &lt;configOptions&gt;\n                                &lt;interfaceOnly&gt;true&lt;/interfaceOnly&gt;\n                                &lt;delegatePattern&gt;false&lt;/delegatePattern&gt;\n                            &lt;/configOptions&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;```\n</code></pre>\n"},{"tags":["java","try-with-resources"],"comments":[{"owner":{"account_id":334987,"reputation":9182,"user_id":661797,"accept_rate":88,"display_name":"nullpotent"},"score":1,"creation_date":1348409338,"post_id":12552863,"comment_id":16906360,"body_markdown":"Your first example isn&#39;t really demonstrative. If FileWriter throws an exception, then the resource certainly isn&#39;t opened and need not to be closed.","body":"Your first example isn&#39;t really demonstrative. If FileWriter throws an exception, then the resource certainly isn&#39;t opened and need not to be closed."},{"owner":{"account_id":1063749,"reputation":14067,"user_id":1064809,"accept_rate":70,"display_name":"Natix"},"score":6,"creation_date":1348410402,"post_id":12552863,"comment_id":16906606,"body_markdown":"Of course, if the underlying FileWriter&#39;s constructor throws an exception, it doesn&#39;t get even opened and everything is OK. What the 1st example is about, is what happens if the FileWriter gets created, but the BufferedWriter&#39;s constructor throws an exception.","body":"Of course, if the underlying FileWriter&#39;s constructor throws an exception, it doesn&#39;t get even opened and everything is OK. What the 1st example is about, is what happens if the FileWriter gets created, but the BufferedWriter&#39;s constructor throws an exception."},{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":8,"creation_date":1348410561,"post_id":12552863,"comment_id":16906641,"body_markdown":"Its worth noting that BufferedWriter will not throw an Exception. Is there an example you can think of where this question not pure academic.","body":"Its worth noting that BufferedWriter will not throw an Exception. Is there an example you can think of where this question not pure academic."},{"owner":{"account_id":1063749,"reputation":14067,"user_id":1064809,"accept_rate":70,"display_name":"Natix"},"score":12,"creation_date":1348411215,"post_id":12552863,"comment_id":16906781,"body_markdown":"@PeterLawrey Yes, your&#39;re right that the BufferedWriter&#39;s constructor  in this scenario most probably will not throw an exception, but as I&#39;ve pointed out, this question concerns any decorator-style resources. But for example `public BufferedWriter(Writer out, int sz)` can throw an `IllegalArgumentException`. Also, I can extend BufferedWriter with a class that would throw something from its constructor or create a whatever custom wrapper that I need.","body":"@PeterLawrey Yes, your&#39;re right that the BufferedWriter&#39;s constructor  in this scenario most probably will not throw an exception, but as I&#39;ve pointed out, this question concerns any decorator-style resources. But for example <code>public BufferedWriter(Writer out, int sz)</code> can throw an <code>IllegalArgumentException</code>. Also, I can extend BufferedWriter with a class that would throw something from its constructor or create a whatever custom wrapper that I need."},{"owner":{"account_id":3282,"reputation":146296,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"score":6,"creation_date":1348412619,"post_id":12552863,"comment_id":16907129,"body_markdown":"The `BufferedWriter` constructor can easily throw an exception. `OutOfMemoryError` is probably the most common one as it allocates a fair chunk of memory for the buffer (although may indicate you want to restart the entire process). / You need to `flush` your `BufferedWriter` if you don&#39;t close and want to keep the contents (generally **only** the non-exception case). `FileWriter` picks up whatever happens to be the &quot;default&quot; file encoding - it&#39;s better to be explicit.","body":"The <code>BufferedWriter</code> constructor can easily throw an exception. <code>OutOfMemoryError</code> is probably the most common one as it allocates a fair chunk of memory for the buffer (although may indicate you want to restart the entire process). / You need to <code>flush</code> your <code>BufferedWriter</code> if you don&#39;t close and want to keep the contents (generally <b>only</b> the non-exception case). <code>FileWriter</code> picks up whatever happens to be the &quot;default&quot; file encoding - it&#39;s better to be explicit."},{"owner":{"account_id":1658137,"reputation":26719,"user_id":1527084,"accept_rate":81,"display_name":"Geek"},"score":12,"creation_date":1406054233,"post_id":12552863,"comment_id":38672897,"body_markdown":"@Natix I wish all question in SO are as well researched and clear as this one is. I wish I could up vote this 100 times.","body":"@Natix I wish all question in SO are as well researched and clear as this one is. I wish I could up vote this 100 times."}],"answers":[{"tags":[],"owner":{"account_id":162467,"reputation":12176,"user_id":383936,"display_name":"Jeanne Boyarsky"},"comment_count":0,"down_vote_count":2,"up_vote_count":7,"is_accepted":false,"score":5,"last_activity_date":1480096193,"creation_date":1348423277,"answer_id":12554785,"question_id":12552863,"body_markdown":"**Option 4**\r\n\r\nChange your resources to be Closeable, not AutoClosable if you can.  The fact that the constructors can be chained implies it isn&#39;t unheard of to close the resource twice.  (This was true before ARM too.)  More on this below.\r\n\r\n**Option 5**\r\n\r\nDon&#39;t use ARM and code very carefully to ensure close() isn&#39;t called twice!\r\n\r\n**Option 6**\r\n\r\nDon&#39;t use ARM and have your finally close() calls in a try/catch themselves.\r\n\r\n**Why I don&#39;t think this problem is unique to ARM**\r\n\r\nIn all these examples, the finally close() calls should be in a catch block.  Left out for readability.\r\n\r\nNo good because fw can be closed twice.  (which is fine for FileWriter but not in your hypothetial example):\r\n\r\n    FileWriter fw = null;\r\n    BufferedWriter bw = null;\r\n    try {\r\n      fw = new FileWriter(file);\r\n      bw = new BufferedWriter(fw);\r\n      bw.write(text);\r\n    } finally {\r\n      if ( fw != null ) fw.close();\r\n      if ( bw != null ) bw.close();\r\n    }\r\n\r\nNo good because fw not closed if exception on constructing a BufferedWriter.  (again, can&#39;t happen, but in your hypothetical example):\r\n\r\n    FileWriter fw = null;\r\n    BufferedWriter bw = null;\r\n    try {\r\n      fw = new FileWriter(file);\r\n      bw = new BufferedWriter(fw);\r\n      bw.write(text);\r\n    } finally {\r\n      if ( bw != null ) bw.close();\r\n    }","title":"Correct idiom for managing multiple chained resources in try-with-resources block?","body":"<p><strong>Option 4</strong></p>\n\n<p>Change your resources to be Closeable, not AutoClosable if you can.  The fact that the constructors can be chained implies it isn't unheard of to close the resource twice.  (This was true before ARM too.)  More on this below.</p>\n\n<p><strong>Option 5</strong></p>\n\n<p>Don't use ARM and code very carefully to ensure close() isn't called twice!</p>\n\n<p><strong>Option 6</strong></p>\n\n<p>Don't use ARM and have your finally close() calls in a try/catch themselves.</p>\n\n<p><strong>Why I don't think this problem is unique to ARM</strong></p>\n\n<p>In all these examples, the finally close() calls should be in a catch block.  Left out for readability.</p>\n\n<p>No good because fw can be closed twice.  (which is fine for FileWriter but not in your hypothetial example):</p>\n\n<pre><code>FileWriter fw = null;\nBufferedWriter bw = null;\ntry {\n  fw = new FileWriter(file);\n  bw = new BufferedWriter(fw);\n  bw.write(text);\n} finally {\n  if ( fw != null ) fw.close();\n  if ( bw != null ) bw.close();\n}\n</code></pre>\n\n<p>No good because fw not closed if exception on constructing a BufferedWriter.  (again, can't happen, but in your hypothetical example):</p>\n\n<pre><code>FileWriter fw = null;\nBufferedWriter bw = null;\ntry {\n  fw = new FileWriter(file);\n  bw = new BufferedWriter(fw);\n  bw.write(text);\n} finally {\n  if ( bw != null ) bw.close();\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1063749,"reputation":14067,"user_id":1064809,"accept_rate":70,"display_name":"Natix"},"score":5,"creation_date":1348674943,"post_id":12605251,"comment_id":16991623,"body_markdown":"This is pretty much similar to my 2nd example. If no exception occurs, the FileWriter&#39;s `close` will be called twice.","body":"This is pretty much similar to my 2nd example. If no exception occurs, the FileWriter&#39;s <code>close</code> will be called twice."}],"tags":[],"owner":{"account_id":1738665,"reputation":189,"user_id":1590666,"display_name":"poison"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1348673328,"creation_date":1348673328,"answer_id":12605251,"question_id":12552863,"body_markdown":"Since your resources are nested, your try-with clauses should also be:\r\n\r\n    try (FileWriter fw=new FileWriter(file)) {\r\n        try (BufferedWriter bw=new BufferedWriter(fw)) {\r\n            bw.write(text);\r\n        } catch (IOException ex) {\r\n            // handle ex\r\n        }\r\n    } catch (IOException ex) {\r\n        // handle ex\r\n    }","title":"Correct idiom for managing multiple chained resources in try-with-resources block?","body":"<p>Since your resources are nested, your try-with clauses should also be:</p>\n\n<pre><code>try (FileWriter fw=new FileWriter(file)) {\n    try (BufferedWriter bw=new BufferedWriter(fw)) {\n        bw.write(text);\n    } catch (IOException ex) {\n        // handle ex\n    }\n} catch (IOException ex) {\n    // handle ex\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1344625,"reputation":3248,"user_id":1285615,"accept_rate":55,"display_name":"sakthisundar"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1348743518,"creation_date":1348743518,"answer_id":12619799,"question_id":12552863,"body_markdown":"I would say don&#39;t use ARM and go on with Closeable. Use method like,\r\n\r\n\r\n    public void close(Closeable... closeables) {\r\n        for (Closeable closeable: closeables) {\r\n           try {\r\n               closeable.close();\r\n             } catch (IOException e) {\r\n               // you can&#39;t much for this\r\n              }\r\n        }\r\n    \r\n    }\r\n\r\nAlso you should consider calling close of `BufferedWriter` as it is not just delegating the close to `FileWriter` , but it does some cleanup like `flushBuffer`.","title":"Correct idiom for managing multiple chained resources in try-with-resources block?","body":"<p>I would say don't use ARM and go on with Closeable. Use method like,</p>\n\n<pre><code>public void close(Closeable... closeables) {\n    for (Closeable closeable: closeables) {\n       try {\n           closeable.close();\n         } catch (IOException e) {\n           // you can't much for this\n          }\n    }\n\n}\n</code></pre>\n\n<p>Also you should consider calling close of <code>BufferedWriter</code> as it is not just delegating the close to <code>FileWriter</code> , but it does some cleanup like <code>flushBuffer</code>.</p>\n"},{"comments":[{"owner":{"account_id":364125,"reputation":4665,"user_id":708333,"display_name":"TimK"},"score":5,"creation_date":1395875890,"post_id":12665271,"comment_id":34542953,"body_markdown":"In version 3, how do you know that bw doesn&#39;t require its close to be called?  And even if you can be sure if it, isn&#39;t that also &quot;obscure knowledge&quot; like you mention for version 1?","body":"In version 3, how do you know that bw doesn&#39;t require its close to be called?  And even if you can be sure if it, isn&#39;t that also &quot;obscure knowledge&quot; like you mention for version 1?"},{"owner":{"account_id":218057,"reputation":67738,"user_id":474189,"accept_rate":72,"display_name":"Duncan Jones"},"score":3,"creation_date":1409038254,"post_id":12665271,"comment_id":39803597,"body_markdown":"&quot;*software development reasons make 2 the better choice*&quot; Can you explain this statement in more detail?","body":"&quot;<i>software development reasons make 2 the better choice</i>&quot; Can you explain this statement in more detail?"},{"owner":{"account_id":2046019,"reputation":690,"user_id":1826075,"accept_rate":47,"display_name":"Markus"},"score":8,"creation_date":1432720721,"post_id":12665271,"comment_id":49037156,"body_markdown":"Can you give an example of the &quot;Execute Around idiom with closures&quot;","body":"Can you give an example of the &quot;Execute Around idiom with closures&quot;"},{"owner":{"account_id":492994,"reputation":3705,"user_id":1271412,"accept_rate":78,"display_name":"petertc"},"score":2,"creation_date":1441085196,"post_id":12665271,"comment_id":52522745,"body_markdown":"Can you explain what&#39;s &quot;clearer syntax with closures in Java SE 8&quot;?","body":"Can you explain what&#39;s &quot;clearer syntax with closures in Java SE 8&quot;?"},{"owner":{"account_id":94872,"reputation":17207,"user_id":258772,"display_name":"mrts"},"score":1,"creation_date":1488035829,"post_id":12665271,"comment_id":72058109,"body_markdown":"Example of &quot;Execute Around idiom&quot; is here: http://stackoverflow.com/a/342016/258772","body":"Example of &quot;Execute Around idiom&quot; is here: <a href=\"http://stackoverflow.com/a/342016/258772\">stackoverflow.com/a/342016/258772</a>"}],"tags":[],"owner":{"account_id":3282,"reputation":146296,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"comment_count":5,"down_vote_count":1,"up_vote_count":83,"is_accepted":false,"score":82,"last_activity_date":1695227005,"creation_date":1349040478,"answer_id":12665271,"question_id":12552863,"body_markdown":"Here&#39;s my take on the alternatives:\r\n\r\n## 1) ##\r\n\r\n    try (BufferedWriter bw = new BufferedWriter(new FileWriter(file))) {\r\n        bw.write(text);\r\n    }\r\n\r\nFor me, the best thing coming to Java from traditional C++ 15 years ago was that you could trust your program. Even if things are in the muck and going wrong, which they often do, I want the rest of the code to be on best behaviour and smelling of roses. Indeed, the `BufferedWriter` might throw an exception here. Running out of memory wouldn&#39;t be unusual, for instance. For other decorators, do you know which of the `java.io` wrapper classes throw a checked exception from their constructors? I don&#39;t. Doesn&#39;t do code understandability much good if you rely upon that sort of obscure knowledge.\r\n\r\nAlso there&#39;s the &quot;destruction&quot;. If there is an error condition, then you probably don&#39;t want to be flushing rubbish to a file that needs deleting (code for that not shown). Although, of course, deleting the file is also another interesting operation to do as error handling.\r\n\r\nGenerally you want `finally` blocks to be as short and reliable as possible. Adding flushes does not help this goal. For many releases some of the buffering classes in the JDK had a bug where an exception from `flush` within `close` caused `close` on the decorated object not be called. Whilst that has been fixed for some time, expect it from other implementations.\r\n\r\n## 2) ##\r\n\r\n    try (\r\n        FileWriter fw = new FileWriter(file);\r\n        BufferedWriter bw = new BufferedWriter(fw)\r\n    ) {\r\n        bw.write(text);\r\n    }\r\n\r\nWe&#39;re still flushing in the implicit finally block (now with repeated `close` - this gets worse as you add more decorators), but the construction is safe and we have two implicit finally blocks so even a failed `flush` doesn&#39;t prevent resource release.\r\n\r\n## 3) ##\r\n\r\n    try (FileWriter fw = new FileWriter(file)) {\r\n        BufferedWriter bw = new BufferedWriter(fw);\r\n        bw.write(text);\r\n    }\r\n\r\nThere&#39;s a bug here. Should be:\r\n\r\n    try (FileWriter fw = new FileWriter(file)) {\r\n        BufferedWriter bw = new BufferedWriter(fw);\r\n        bw.write(text);\r\n        bw.flush();\r\n    }\r\n\r\nSome poorly implemented decorators are in fact resource and will need to be closed reliably. Also some streams may need to be closed in a particular way (perhaps they are doing compression and need to write bits to finish off, and can&#39;t just flush everything.\r\n\r\n## Verdict ##\r\n\r\nAlthough 3 is a technically superior solution, software development reasons make 2 the better choice. However, try-with-resource is still an inadequate fix and you should stick with the [Execute Around idiom][1], which should have a clearer syntax with closures in Java SE 8.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/341971/what-is-the-execute-around-idiom","title":"Correct idiom for managing multiple chained resources in try-with-resources block?","body":"<p>Here's my take on the alternatives:</p>\n<h2>1)</h2>\n<pre><code>try (BufferedWriter bw = new BufferedWriter(new FileWriter(file))) {\n    bw.write(text);\n}\n</code></pre>\n<p>For me, the best thing coming to Java from traditional C++ 15 years ago was that you could trust your program. Even if things are in the muck and going wrong, which they often do, I want the rest of the code to be on best behaviour and smelling of roses. Indeed, the <code>BufferedWriter</code> might throw an exception here. Running out of memory wouldn't be unusual, for instance. For other decorators, do you know which of the <code>java.io</code> wrapper classes throw a checked exception from their constructors? I don't. Doesn't do code understandability much good if you rely upon that sort of obscure knowledge.</p>\n<p>Also there's the &quot;destruction&quot;. If there is an error condition, then you probably don't want to be flushing rubbish to a file that needs deleting (code for that not shown). Although, of course, deleting the file is also another interesting operation to do as error handling.</p>\n<p>Generally you want <code>finally</code> blocks to be as short and reliable as possible. Adding flushes does not help this goal. For many releases some of the buffering classes in the JDK had a bug where an exception from <code>flush</code> within <code>close</code> caused <code>close</code> on the decorated object not be called. Whilst that has been fixed for some time, expect it from other implementations.</p>\n<h2>2)</h2>\n<pre><code>try (\n    FileWriter fw = new FileWriter(file);\n    BufferedWriter bw = new BufferedWriter(fw)\n) {\n    bw.write(text);\n}\n</code></pre>\n<p>We're still flushing in the implicit finally block (now with repeated <code>close</code> - this gets worse as you add more decorators), but the construction is safe and we have two implicit finally blocks so even a failed <code>flush</code> doesn't prevent resource release.</p>\n<h2>3)</h2>\n<pre><code>try (FileWriter fw = new FileWriter(file)) {\n    BufferedWriter bw = new BufferedWriter(fw);\n    bw.write(text);\n}\n</code></pre>\n<p>There's a bug here. Should be:</p>\n<pre><code>try (FileWriter fw = new FileWriter(file)) {\n    BufferedWriter bw = new BufferedWriter(fw);\n    bw.write(text);\n    bw.flush();\n}\n</code></pre>\n<p>Some poorly implemented decorators are in fact resource and will need to be closed reliably. Also some streams may need to be closed in a particular way (perhaps they are doing compression and need to write bits to finish off, and can't just flush everything.</p>\n<h2>Verdict</h2>\n<p>Although 3 is a technically superior solution, software development reasons make 2 the better choice. However, try-with-resource is still an inadequate fix and you should stick with the <a href=\"https://stackoverflow.com/questions/341971/what-is-the-execute-around-idiom\">Execute Around idiom</a>, which should have a clearer syntax with closures in Java SE 8.</p>\n"},{"comments":[{"owner":{"account_id":968413,"reputation":3817,"user_id":991432,"display_name":"rxg"},"score":6,"creation_date":1370953622,"post_id":12665318,"comment_id":24640063,"body_markdown":"If both your `try` and `finally` blocks throw exceptions, this construct will lose the first (and potentially more useful) one.","body":"If both your <code>try</code> and <code>finally</code> blocks throw exceptions, this construct will lose the first (and potentially more useful) one."}],"tags":[],"owner":{"account_id":1892791,"reputation":101,"user_id":1710421,"display_name":"AmyGamy"},"comment_count":1,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1349040800,"creation_date":1349040800,"answer_id":12665318,"question_id":12552863,"body_markdown":"I just wanted to build on Jeanne Boyarsky&#39;s suggestion of not using ARM but making sure the FileWriter is always closed exactly once. Don&#39;t think there are any problems here...\r\n\r\n    FileWriter fw = null;\r\n    BufferedWriter bw = null;\r\n    try {\r\n        fw = new FileWriter(file);\r\n        bw = new BufferedWriter(fw);\r\n        bw.write(text);\r\n    } finally {\r\n        if (bw != null) bw.close();\r\n        else if (fw != null) fw.close();\r\n    }\r\n\r\nI guess since ARM is just syntactic sugar, we can&#39;t always use it to replace finally blocks. Just like we can&#39;t always use a for-each loop to do something that is possible with iterators.","title":"Correct idiom for managing multiple chained resources in try-with-resources block?","body":"<p>I just wanted to build on Jeanne Boyarsky's suggestion of not using ARM but making sure the FileWriter is always closed exactly once. Don't think there are any problems here...</p>\n\n<pre><code>FileWriter fw = null;\nBufferedWriter bw = null;\ntry {\n    fw = new FileWriter(file);\n    bw = new BufferedWriter(fw);\n    bw.write(text);\n} finally {\n    if (bw != null) bw.close();\n    else if (fw != null) fw.close();\n}\n</code></pre>\n\n<p>I guess since ARM is just syntactic sugar, we can't always use it to replace finally blocks. Just like we can't always use a for-each loop to do something that is possible with iterators.</p>\n"},{"comments":[{"owner":{"account_id":1328773,"reputation":37883,"user_id":1273080,"accept_rate":100,"display_name":"Petr Janeček"},"score":0,"creation_date":1386070784,"post_id":16229988,"comment_id":30376661,"body_markdown":"The warning has its meaning: Can we be sure here that the `bw` will actually write tha data out? It _is_ buffered afterall, so it only has to write to disk sometimes (when the buffer is full and/or on `flush()` and `close()` methods). I guess the `flush()` method should be called. But then there&#39;s no need to use the buffered writer, anyway, when we&#39;re writing it out immediatelly in one batch. And if you don&#39;t fix the code, you could end up with data written to the file in a wrong order, or even not written to the file at all.","body":"The warning has its meaning: Can we be sure here that the <code>bw</code> will actually write tha data out? It <i>is</i> buffered afterall, so it only has to write to disk sometimes (when the buffer is full and/or on <code>flush()</code> and <code>close()</code> methods). I guess the <code>flush()</code> method should be called. But then there&#39;s no need to use the buffered writer, anyway, when we&#39;re writing it out immediatelly in one batch. And if you don&#39;t fix the code, you could end up with data written to the file in a wrong order, or even not written to the file at all."},{"owner":{"account_id":429244,"reputation":10164,"user_id":812034,"accept_rate":64,"display_name":"Earth Engine"},"score":0,"creation_date":1386207366,"post_id":16229988,"comment_id":30445558,"body_markdown":"If `flush()` is required to be called, it shall happen whenever before the caller decided to close the `FileWriter`. So this should happen in `printToFile` right before any `return`s in the try block. This shall not be a part of `writeFileWriter` and thus the warning is not about anything inside that function, but the caller of that function. If we have an annotation `@LiftWarningToCaller(&quot;wanrningXXX&quot;)` it will help this case and similar.","body":"If <code>flush()</code> is required to be called, it shall happen whenever before the caller decided to close the <code>FileWriter</code>. So this should happen in <code>printToFile</code> right before any <code>return</code>s in the try block. This shall not be a part of <code>writeFileWriter</code> and thus the warning is not about anything inside that function, but the caller of that function. If we have an annotation <code>@LiftWarningToCaller(&quot;wanrningXXX&quot;)</code> it will help this case and similar."}],"tags":[],"owner":{"account_id":429244,"reputation":10164,"user_id":812034,"accept_rate":64,"display_name":"Earth Engine"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1386209877,"creation_date":1366957383,"answer_id":16229988,"question_id":12552863,"body_markdown":"My solution is to do a &quot;extract method&quot; refactoring, as following:\r\n\r\n\tstatic AutoCloseable writeFileWriter(FileWriter fw, String txt) throws IOException{\r\n\t    final BufferedWriter bw  = new BufferedWriter(fw);\r\n\t    bw.write(txt);\r\n\t    return new AutoCloseable(){\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic void close() throws IOException {\r\n\t\t\t\tbw.flush();\r\n\t\t\t}\r\n    \t\r\n\t    };\r\n\t}\r\n\r\n`printToFile` can be written either\r\n\r\n\tstatic void printToFile(String text, File file) {\r\n\t    try (FileWriter fw = new FileWriter(file)) {\r\n\t    \tAutoCloseable w = writeFileWriter(fw, text);\r\n\t        w.close();\r\n\t    } catch (Exception ex) {\r\n\t        // handle ex\r\n\t    }\r\n\t}\r\n\r\nor\r\n\r\n\tstatic void printToFile(String text, File file) {\r\n\t    try (FileWriter fw = new FileWriter(file);\r\n\t    \tAutoCloseable w = writeFileWriter(fw, text)){\r\n\r\n\t    } catch (Exception ex) {\r\n\t        // handle ex\r\n\t    }\r\n\t}\r\n\r\nFor class lib designers, I will suggest them extend the `AutoClosable` interface with an additional method to suppress the close. In this case we can then manually control the close behavior.\r\n\r\nFor language designers, the lesson is that adding a new feature could mean adding a lot others. In this Java case, obviously ARM feature will work better with a resource ownership transfer mechanism. \r\n\r\n**UPDATE**\r\n\r\nOriginally the code above requires `@SuppressWarning` since the `BufferedWriter` inside the function requires `close()`.\r\n\r\nAs suggested by a comment, if `flush()` to be called before close the writer, we need to do so before any `return` (implicit or explicit) statements inside the try block. There is currently no way to ensure the caller doing this I think, so this must be documented for `writeFileWriter`.\r\n\r\n**UPDATE AGAIN**\r\n\r\nThe above update makes `@SuppressWarning` unnecessary since it require the function to return the resource to the caller, so itself does not necessary being closed. Unfortunately, this pull us back to the beginning of the situation: the warning is now moved back to the caller side.\r\n\r\nSo to properly solve this, we need a customised `AutoClosable` that whenever it closes, the underline `BufferedWriter` shall be `flush()`ed. Actually, this shows us another way to bypass the warning, since the `BufferWriter` is never closed in either way.","title":"Correct idiom for managing multiple chained resources in try-with-resources block?","body":"<p>My solution is to do a \"extract method\" refactoring, as following:</p>\n\n<pre><code>static AutoCloseable writeFileWriter(FileWriter fw, String txt) throws IOException{\n    final BufferedWriter bw  = new BufferedWriter(fw);\n    bw.write(txt);\n    return new AutoCloseable(){\n\n        @Override\n        public void close() throws IOException {\n            bw.flush();\n        }\n\n    };\n}\n</code></pre>\n\n<p><code>printToFile</code> can be written either</p>\n\n<pre><code>static void printToFile(String text, File file) {\n    try (FileWriter fw = new FileWriter(file)) {\n        AutoCloseable w = writeFileWriter(fw, text);\n        w.close();\n    } catch (Exception ex) {\n        // handle ex\n    }\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>static void printToFile(String text, File file) {\n    try (FileWriter fw = new FileWriter(file);\n        AutoCloseable w = writeFileWriter(fw, text)){\n\n    } catch (Exception ex) {\n        // handle ex\n    }\n}\n</code></pre>\n\n<p>For class lib designers, I will suggest them extend the <code>AutoClosable</code> interface with an additional method to suppress the close. In this case we can then manually control the close behavior.</p>\n\n<p>For language designers, the lesson is that adding a new feature could mean adding a lot others. In this Java case, obviously ARM feature will work better with a resource ownership transfer mechanism. </p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>Originally the code above requires <code>@SuppressWarning</code> since the <code>BufferedWriter</code> inside the function requires <code>close()</code>.</p>\n\n<p>As suggested by a comment, if <code>flush()</code> to be called before close the writer, we need to do so before any <code>return</code> (implicit or explicit) statements inside the try block. There is currently no way to ensure the caller doing this I think, so this must be documented for <code>writeFileWriter</code>.</p>\n\n<p><strong>UPDATE AGAIN</strong></p>\n\n<p>The above update makes <code>@SuppressWarning</code> unnecessary since it require the function to return the resource to the caller, so itself does not necessary being closed. Unfortunately, this pull us back to the beginning of the situation: the warning is now moved back to the caller side.</p>\n\n<p>So to properly solve this, we need a customised <code>AutoClosable</code> that whenever it closes, the underline <code>BufferedWriter</code> shall be <code>flush()</code>ed. Actually, this shows us another way to bypass the warning, since the <code>BufferWriter</code> is never closed in either way.</p>\n"},{"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":2,"creation_date":1521350679,"post_id":18496449,"comment_id":85689572,"body_markdown":"It&#39;s also the recommended approach in the 3rd edition of Effective Java.","body":"It&#39;s also the recommended approach in the 3rd edition of Effective Java."}],"tags":[],"owner":{"account_id":21713,"reputation":295602,"user_id":53013,"accept_rate":78,"display_name":"Daniel C. Sobral"},"comment_count":1,"down_vote_count":0,"up_vote_count":24,"is_accepted":false,"score":24,"last_activity_date":1377717512,"creation_date":1377717512,"answer_id":18496449,"question_id":12552863,"body_markdown":"The first style is the one [suggested by Oracle](http://docs.oracle.com/javase/7/docs/technotes/guides/language/try-with-resources.html). `BufferedWriter` doesn&#39;t throw checked exceptions, so if any exception is thrown, the program is not expected to recover from it, making resource recover mostly moot.\r\n\r\nMostly because it could happen in a thread, with the thread dieing but the program still continuing -- say, there was a temporary memory outage that wasn&#39;t long enough to seriously impair the rest of the program. It&#39;s a rather corner case, though, and if it happens often enough to make resource leak a problem, the try-with-resources is the least of your problems.","title":"Correct idiom for managing multiple chained resources in try-with-resources block?","body":"<p>The first style is the one <a href=\"http://docs.oracle.com/javase/7/docs/technotes/guides/language/try-with-resources.html\">suggested by Oracle</a>. <code>BufferedWriter</code> doesn't throw checked exceptions, so if any exception is thrown, the program is not expected to recover from it, making resource recover mostly moot.</p>\n\n<p>Mostly because it could happen in a thread, with the thread dieing but the program still continuing -- say, there was a temporary memory outage that wasn't long enough to seriously impair the rest of the program. It's a rather corner case, though, and if it happens often enough to make resource leak a problem, the try-with-resources is the least of your problems.</p>\n"},{"comments":[{"owner":{"account_id":23089,"reputation":49201,"user_id":57611,"accept_rate":82,"display_name":"ErikE"},"score":0,"creation_date":1511071835,"post_id":32302353,"comment_id":81700936,"body_markdown":"Am I gathering correctly that one still needs to use try-with-resource, as in `try (BufferedWriter writer = &lt;BufferedWriter, FileWriter&gt;createChainedResource(file)) { /* work with writer */ }`?","body":"Am I gathering correctly that one still needs to use try-with-resource, as in <code>try (BufferedWriter writer = &lt;BufferedWriter, FileWriter&gt;createChainedResource(file)) { &#47;* work with writer *&#47; }</code>?"},{"owner":{"account_id":2306167,"reputation":3279,"user_id":2025416,"display_name":"Nils von Barth"},"score":0,"creation_date":1511583912,"post_id":32302353,"comment_id":81920015,"body_markdown":"@ErikE Yes, you would still need to use try-with-resources, but you would only need to use a single function for the chained resource: the factory function _encapsulates_ the chaining. I&#39;ve added an example of use; thanks!","body":"@ErikE Yes, you would still need to use try-with-resources, but you would only need to use a single function for the chained resource: the factory function <i>encapsulates</i> the chaining. I&#39;ve added an example of use; thanks!"}],"tags":[],"owner":{"account_id":2306167,"reputation":3279,"user_id":2025416,"display_name":"Nils von Barth"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1511583852,"creation_date":1440979068,"answer_id":32302353,"question_id":12552863,"body_markdown":"To concur with earlier comments: simplest is **(2)** to use `Closeable` resources and declare them in order in the try-with-resources clause. If you only have `AutoCloseable`, you can wrap them in another (nested) class that just checks that `close` is only called once (Facade Pattern), e.g. by having `private bool isClosed;`. In practice even Oracle just **(1)** chains the constructors and doesn&#39;t correctly handle exceptions partway through the chain.\r\n\r\nAlternatively, you can manually create a chained resource, using a static factory method; this encapsulates the chain, and handle cleanup if it fails part-way:\r\n\r\n    static BufferedWriter createBufferedWriterFromFile(File file)\r\n      throws IOException {\r\n      // If constructor throws an exception, no resource acquired, so no release required.\r\n      FileWriter fileWriter = new FileWriter(file);\r\n      try {\r\n        return new BufferedWriter(fileWriter);  \r\n      } catch (IOException newBufferedWriterException) {\r\n        try {\r\n          fileWriter.close();\r\n        } catch (IOException closeException) {\r\n          // Exceptions in cleanup code are secondary to exceptions in primary code (body of try),\r\n          // as in try-with-resources.\r\n          newBufferedWriterException.addSuppressed(closeException);\r\n        }\r\n        throw newBufferedWriterException;\r\n      }\r\n    }\r\n\r\nYou can then use it as a single resource in a try-with-resources clause:\r\n\r\n    try (BufferedWriter writer = createBufferedWriterFromFile(file)) {\r\n      // Work with writer.\r\n    }\r\n\r\nThe complexity comes from handling multiple exceptions; otherwise it&#39;s just &quot;close resources that you&#39;ve acquired so far&quot;. A common practice seems to be to first initialize the variable that holds the object that holds the resource to `null` (here `fileWriter`), and then include a null check in the cleanup, but that seems unnecessary: if the constructor fails, there&#39;s nothing to clean up, so we can just let that exception propagate, which simplifies the code a little.\r\n\r\nYou could probably do this generically:\r\n\r\n    static &lt;T extends AutoCloseable, U extends AutoCloseable, V&gt;\r\n        T createChainedResource(V v) throws Exception {\r\n      // If constructor throws an exception, no resource acquired, so no release required.\r\n      U u = new U(v);\r\n      try {\r\n        return new T(u);  \r\n      } catch (Exception newTException) {\r\n        try {\r\n          u.close();\r\n        } catch (Exception closeException) {\r\n          // Exceptions in cleanup code are secondary to exceptions in primary code (body of try),\r\n          // as in try-with-resources.\r\n          newTException.addSuppressed(closeException);\r\n        }\r\n        throw newTException;\r\n      }\r\n    }\r\n\r\nSimilarly, you can chain three resources, etc.\r\n\r\nAs a mathematical aside, you could even chain three times by chaining two resources at a time, and it would be associative, meaning you would get the same object on success (because the constructors are associative), and same exceptions if there were a failure in any of the constructors. Assuming you added an _S_ to the above chain (so you start with a _V_ and end with an _S_, by applying _U_, _T_, and _S_ in turn), you get the same either if you first chain _S_ and _T_, then _U_, corresponding to _(ST)U_, or if you first chained _T_ and _U_, then _S_, corresponding to _S(TU)_. However, it would be clearer to just write out an explicit three-fold chain in a single factory function.\r\n","title":"Correct idiom for managing multiple chained resources in try-with-resources block?","body":"<p>To concur with earlier comments: simplest is <strong>(2)</strong> to use <code>Closeable</code> resources and declare them in order in the try-with-resources clause. If you only have <code>AutoCloseable</code>, you can wrap them in another (nested) class that just checks that <code>close</code> is only called once (Facade Pattern), e.g. by having <code>private bool isClosed;</code>. In practice even Oracle just <strong>(1)</strong> chains the constructors and doesn't correctly handle exceptions partway through the chain.</p>\n\n<p>Alternatively, you can manually create a chained resource, using a static factory method; this encapsulates the chain, and handle cleanup if it fails part-way:</p>\n\n<pre><code>static BufferedWriter createBufferedWriterFromFile(File file)\n  throws IOException {\n  // If constructor throws an exception, no resource acquired, so no release required.\n  FileWriter fileWriter = new FileWriter(file);\n  try {\n    return new BufferedWriter(fileWriter);  \n  } catch (IOException newBufferedWriterException) {\n    try {\n      fileWriter.close();\n    } catch (IOException closeException) {\n      // Exceptions in cleanup code are secondary to exceptions in primary code (body of try),\n      // as in try-with-resources.\n      newBufferedWriterException.addSuppressed(closeException);\n    }\n    throw newBufferedWriterException;\n  }\n}\n</code></pre>\n\n<p>You can then use it as a single resource in a try-with-resources clause:</p>\n\n<pre><code>try (BufferedWriter writer = createBufferedWriterFromFile(file)) {\n  // Work with writer.\n}\n</code></pre>\n\n<p>The complexity comes from handling multiple exceptions; otherwise it's just \"close resources that you've acquired so far\". A common practice seems to be to first initialize the variable that holds the object that holds the resource to <code>null</code> (here <code>fileWriter</code>), and then include a null check in the cleanup, but that seems unnecessary: if the constructor fails, there's nothing to clean up, so we can just let that exception propagate, which simplifies the code a little.</p>\n\n<p>You could probably do this generically:</p>\n\n<pre><code>static &lt;T extends AutoCloseable, U extends AutoCloseable, V&gt;\n    T createChainedResource(V v) throws Exception {\n  // If constructor throws an exception, no resource acquired, so no release required.\n  U u = new U(v);\n  try {\n    return new T(u);  \n  } catch (Exception newTException) {\n    try {\n      u.close();\n    } catch (Exception closeException) {\n      // Exceptions in cleanup code are secondary to exceptions in primary code (body of try),\n      // as in try-with-resources.\n      newTException.addSuppressed(closeException);\n    }\n    throw newTException;\n  }\n}\n</code></pre>\n\n<p>Similarly, you can chain three resources, etc.</p>\n\n<p>As a mathematical aside, you could even chain three times by chaining two resources at a time, and it would be associative, meaning you would get the same object on success (because the constructors are associative), and same exceptions if there were a failure in any of the constructors. Assuming you added an <em>S</em> to the above chain (so you start with a <em>V</em> and end with an <em>S</em>, by applying <em>U</em>, <em>T</em>, and <em>S</em> in turn), you get the same either if you first chain <em>S</em> and <em>T</em>, then <em>U</em>, corresponding to <em>(ST)U</em>, or if you first chained <em>T</em> and <em>U</em>, then <em>S</em>, corresponding to <em>S(TU)</em>. However, it would be clearer to just write out an explicit three-fold chain in a single factory function.</p>\n"}],"owner":{"account_id":1063749,"reputation":14067,"user_id":1064809,"accept_rate":70,"display_name":"Natix"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37989,"favorite_count":0,"down_vote_count":1,"up_vote_count":190,"answer_count":8,"score":189,"last_activity_date":1695227005,"creation_date":1348408029,"question_id":12552863,"body_markdown":"The Java 7 *try-with-resources* syntax (also known as ARM block (*Automatic Resource Management*)) is nice, short and straightforward when using only one `AutoCloseable` resource. However, I am not sure what is the correct idiom when I need to declare multiple resources that are dependent on each other, for example a `FileWriter` and a `BufferedWriter` that wraps it. Of course, this question concerns any case when some `AutoCloseable` resources are wrapped, not only these two specific classes.\r\n\r\nI came up with the three following alternatives:\r\n\r\n## 1) ##\r\n\r\nThe naive idiom I have seen is to declare only the top-level wrapper in the ARM-managed variable:\r\n\r\n\tstatic void printToFile1(String text, File file) {\r\n\t\ttry (BufferedWriter bw = new BufferedWriter(new FileWriter(file))) {\r\n\t\t\tbw.write(text);\r\n\t\t} catch (IOException ex) {\r\n\t\t\t// handle ex\r\n\t\t}\r\n\t}\r\n\r\nThis is nice and short, but it is broken. Because the underlying `FileWriter` is not declared in a variable, it will never be closed directly in the generated `finally` block. It will be closed only through the `close` method of the wrapping `BufferedWriter`. The problem is, that if an exception is thrown from the `bw`&#39;s constructor, its `close` will not be called and therefore the underlying `FileWriter` **will not be closed**.\r\n\r\n## 2) ##\r\n\r\n\tstatic void printToFile2(String text, File file) {\r\n\t\ttry (FileWriter fw = new FileWriter(file);\r\n\t\t\t\tBufferedWriter bw = new BufferedWriter(fw)) {\r\n\t\t\tbw.write(text);\r\n\t\t} catch (IOException ex) {\r\n\t\t\t// handle ex\r\n\t\t}\r\n\t}\r\n\r\nHere, both the underlying and the wrapping resource are declared in the ARM-managed variables, so both of them will certainly be closed, but the underlying `fw.close()` **will be called twice**: not only directly, but also through the wrapping `bw.close()`.\r\n\r\nThis should not be a problem for these two specific classes that both implement `Closeable` (which is a subtype of `AutoCloseable`), whose contract states that multiple calls to `close` are permitted:\r\n\r\n&gt; Closes this stream and releases any system resources associated with it. If the stream is already closed then invoking this method has no effect.\r\n\r\nHowever, in a general case, I can have resources that implement only `AutoCloseable` (and not `Closeable`), which doesn&#39;t guarantee that `close` can be called multiple times:\r\n\r\n&gt; Note that unlike the close method of java.io.Closeable, this close method is not required to be idempotent. In other words, calling this close method more than once may have some visible side effect, unlike Closeable.close which is required to have no effect if called more than once. However, implementers of this interface are strongly encouraged to make their close methods idempotent.\r\n\r\n## 3) ##\r\n\r\n\tstatic void printToFile3(String text, File file) {\r\n\t\ttry (FileWriter fw = new FileWriter(file)) {\r\n\t\t\tBufferedWriter bw = new BufferedWriter(fw);\r\n\t\t\tbw.write(text);\r\n\t\t} catch (IOException ex) {\r\n\t\t\t// handle ex\r\n\t\t}\r\n\t}\r\n\r\nThis version should be theoretically correct, because only the `fw` represents a real resource that needs to be cleaned up. The `bw` doesn&#39;t itself hold any resource, it only delegates to the `fw`, so it should be sufficient to only close the underlying `fw`.\r\n\r\nOn the other hand, the syntax is a bit irregular and also, Eclipse issues a warning, which I believe is a false alarm, but it is still a warning that one has to deal with:\r\n\r\n&gt; Resource leak: &#39;bw&#39; is never closed\r\n\r\n----------\r\n\r\nSo, which approach to go for? Or have I missed some other idiom that is *the correct* one?","title":"Correct idiom for managing multiple chained resources in try-with-resources block?","body":"<p>The Java 7 <em>try-with-resources</em> syntax (also known as ARM block (<em>Automatic Resource Management</em>)) is nice, short and straightforward when using only one <code>AutoCloseable</code> resource. However, I am not sure what is the correct idiom when I need to declare multiple resources that are dependent on each other, for example a <code>FileWriter</code> and a <code>BufferedWriter</code> that wraps it. Of course, this question concerns any case when some <code>AutoCloseable</code> resources are wrapped, not only these two specific classes.</p>\n\n<p>I came up with the three following alternatives:</p>\n\n<h2>1)</h2>\n\n<p>The naive idiom I have seen is to declare only the top-level wrapper in the ARM-managed variable:</p>\n\n<pre><code>static void printToFile1(String text, File file) {\n    try (BufferedWriter bw = new BufferedWriter(new FileWriter(file))) {\n        bw.write(text);\n    } catch (IOException ex) {\n        // handle ex\n    }\n}\n</code></pre>\n\n<p>This is nice and short, but it is broken. Because the underlying <code>FileWriter</code> is not declared in a variable, it will never be closed directly in the generated <code>finally</code> block. It will be closed only through the <code>close</code> method of the wrapping <code>BufferedWriter</code>. The problem is, that if an exception is thrown from the <code>bw</code>'s constructor, its <code>close</code> will not be called and therefore the underlying <code>FileWriter</code> <strong>will not be closed</strong>.</p>\n\n<h2>2)</h2>\n\n<pre><code>static void printToFile2(String text, File file) {\n    try (FileWriter fw = new FileWriter(file);\n            BufferedWriter bw = new BufferedWriter(fw)) {\n        bw.write(text);\n    } catch (IOException ex) {\n        // handle ex\n    }\n}\n</code></pre>\n\n<p>Here, both the underlying and the wrapping resource are declared in the ARM-managed variables, so both of them will certainly be closed, but the underlying <code>fw.close()</code> <strong>will be called twice</strong>: not only directly, but also through the wrapping <code>bw.close()</code>.</p>\n\n<p>This should not be a problem for these two specific classes that both implement <code>Closeable</code> (which is a subtype of <code>AutoCloseable</code>), whose contract states that multiple calls to <code>close</code> are permitted:</p>\n\n<blockquote>\n  <p>Closes this stream and releases any system resources associated with it. If the stream is already closed then invoking this method has no effect.</p>\n</blockquote>\n\n<p>However, in a general case, I can have resources that implement only <code>AutoCloseable</code> (and not <code>Closeable</code>), which doesn't guarantee that <code>close</code> can be called multiple times:</p>\n\n<blockquote>\n  <p>Note that unlike the close method of java.io.Closeable, this close method is not required to be idempotent. In other words, calling this close method more than once may have some visible side effect, unlike Closeable.close which is required to have no effect if called more than once. However, implementers of this interface are strongly encouraged to make their close methods idempotent.</p>\n</blockquote>\n\n<h2>3)</h2>\n\n<pre><code>static void printToFile3(String text, File file) {\n    try (FileWriter fw = new FileWriter(file)) {\n        BufferedWriter bw = new BufferedWriter(fw);\n        bw.write(text);\n    } catch (IOException ex) {\n        // handle ex\n    }\n}\n</code></pre>\n\n<p>This version should be theoretically correct, because only the <code>fw</code> represents a real resource that needs to be cleaned up. The <code>bw</code> doesn't itself hold any resource, it only delegates to the <code>fw</code>, so it should be sufficient to only close the underlying <code>fw</code>.</p>\n\n<p>On the other hand, the syntax is a bit irregular and also, Eclipse issues a warning, which I believe is a false alarm, but it is still a warning that one has to deal with:</p>\n\n<blockquote>\n  <p>Resource leak: 'bw' is never closed</p>\n</blockquote>\n\n<hr>\n\n<p>So, which approach to go for? Or have I missed some other idiom that is <em>the correct</em> one?</p>\n"},{"tags":["java","spring-integration","sftp"],"answers":[{"comments":[{"owner":{"account_id":182665,"reputation":851,"user_id":417541,"accept_rate":42,"display_name":"Do Will"},"score":0,"creation_date":1695227401,"post_id":77144196,"comment_id":135997356,"body_markdown":"Thank you ! Trying this and got this exception -\n\nAn `AcceptAllServerKeyVerifier` must be configured on the externally provided SshClient instance","body":"Thank you ! Trying this and got this exception -  An <code>AcceptAllServerKeyVerifier</code> must be configured on the externally provided SshClient instance"},{"owner":{"account_id":182665,"reputation":851,"user_id":417541,"accept_rate":42,"display_name":"Do Will"},"score":0,"creation_date":1695227862,"post_id":77144196,"comment_id":135997432,"body_markdown":"Seems that was from the factory.setAllowUnknownKeys(true). After removing that line, I am getting this error - A password must be configured on the externally provided SshClient instance - while setting the password on the factory. Looks like I ned more confirguration on the client. Reading up on that. Thank you !","body":"Seems that was from the factory.setAllowUnknownKeys(true). After removing that line, I am getting this error - A password must be configured on the externally provided SshClient instance - while setting the password on the factory. Looks like I ned more confirguration on the client. Reading up on that. Thank you !"},{"owner":{"account_id":3273937,"reputation":114870,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"score":0,"creation_date":1695227888,"post_id":77144196,"comment_id":135997438,"body_markdown":"Correct. When you provide an external client, everything has to be configured on it: our policy is not to mutate external objects from our components.","body":"Correct. When you provide an external client, everything has to be configured on it: our policy is not to mutate external objects from our components."}],"tags":[],"owner":{"account_id":3273937,"reputation":114870,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"comment_count":3,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1695226790,"creation_date":1695225822,"answer_id":77144196,"question_id":77143594,"body_markdown":"Apparently those algorithms have been deprecated: https://issues.apache.org/jira/browse/SSHD-1004.\r\n\r\nThis SO thread explains how to enable those old keys: https://stackoverflow.com/questions/66986656/mina-sshd-enable-kex-with-sha1-in-version-2-6-0.\r\n\r\nThe `DefaultSftpSessionFactory` supports an external `SshClient`:\r\n\r\n\t/**\r\n\t * Instantiate based on the provided {@link SshClient}, e.g. some extension for HTTP/SOCKS.\r\n\t * @param sshClient the {@link SshClient} instance.\r\n\t * @param isSharedSession true if the session is to be shared.\r\n\t */\r\n\tpublic DefaultSftpSessionFactory(SshClient sshClient, boolean isSharedSession) {\r\n\r\n\r\nSo, you need to do like this:\r\n\r\n    SshClient client = SshClient.setUpDefaultClient();\r\n    client.setKeyExchangeFactories(NamedFactory.setUpTransformedFactories(\r\n            false,\r\n            BuiltinDHFactories.VALUES,\r\n            ClientBuilder.DH2KEX\r\n        ));\r\n    client.setSignatureFactories(new ArrayList&lt;&gt;(BuiltinSignatures.VALUES))\r\n\r\nand inject that `client` into `DefaultSftpSessionFactory`.","title":"Spring Integration SFTP connection fails - Unable to negotiate key exchange for kex algorithms","body":"<p>Apparently those algorithms have been deprecated: <a href=\"https://issues.apache.org/jira/browse/SSHD-1004\" rel=\"nofollow noreferrer\">https://issues.apache.org/jira/browse/SSHD-1004</a>.</p>\n<p>This SO thread explains how to enable those old keys: <a href=\"https://stackoverflow.com/questions/66986656/mina-sshd-enable-kex-with-sha1-in-version-2-6-0\">Mina SSHD enable KEX with SHA1 in version 2.6.0</a>.</p>\n<p>The <code>DefaultSftpSessionFactory</code> supports an external <code>SshClient</code>:</p>\n<pre><code>/**\n * Instantiate based on the provided {@link SshClient}, e.g. some extension for HTTP/SOCKS.\n * @param sshClient the {@link SshClient} instance.\n * @param isSharedSession true if the session is to be shared.\n */\npublic DefaultSftpSessionFactory(SshClient sshClient, boolean isSharedSession) {\n</code></pre>\n<p>So, you need to do like this:</p>\n<pre><code>SshClient client = SshClient.setUpDefaultClient();\nclient.setKeyExchangeFactories(NamedFactory.setUpTransformedFactories(\n        false,\n        BuiltinDHFactories.VALUES,\n        ClientBuilder.DH2KEX\n    ));\nclient.setSignatureFactories(new ArrayList&lt;&gt;(BuiltinSignatures.VALUES))\n</code></pre>\n<p>and inject that <code>client</code> into <code>DefaultSftpSessionFactory</code>.</p>\n"}],"owner":{"account_id":182665,"reputation":851,"user_id":417541,"accept_rate":42,"display_name":"Do Will"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":347,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77144196,"answer_count":1,"score":1,"last_activity_date":1695226790,"creation_date":1695221076,"question_id":77143594,"body_markdown":"I am using Spring Integration (Version: 6.1.2) to connect to an SFTP server. While creating an SFTPSession, I get this exception - \r\n\r\n    java.lang.IllegalStateException: failed to create SFTP Session\r\n    ....\r\n    Caused by: org.apache.sshd.common.SshException: Unable to negotiate key exchange for kex algorithms (\r\n    \r\n    client: \r\n    curve25519-sha256,\r\n    curve25519-sha256@libssh.org,\r\n    curve448-sha512,\r\n    ecdh-sha2-nistp521,\r\n    ecdh-sha2-nistp384,\r\n    ecdh-sha2-nistp256,\r\n    diffie-hellman-group-exchange-sha256,\r\n    diffie-hellman-group18-sha512,\r\n    diffie-hellman-group17-sha512,\r\n    diffie-hellman-group16-sha512,\r\n    diffie-hellman-group15-sha512,\r\n    diffie-hellman-group14-sha256,\r\n    ext-info-c\r\n    \r\n    server: \r\n    diffie-hellman-group1-sha1,\r\n    diffie-hellman-group14-sha1)\r\n\r\nObviously, the server only supports the old algorithms. How do I add support for these algorithms on my SFTP session?\r\n\r\nHere is my code -\r\n\r\n    DefaultSftpSessionFactory factory = new DefaultSftpSessionFactory();\r\n    factory.setHost(&quot;ftp.sssss.com&quot;);\r\n    factory.setPort(Integer.valueOf(22));\r\n    factory.setAllowUnknownKeys(true);\r\n    factory.setUser(&quot;user&quot;);\r\n    factory.setPassword(&quot;password&quot;);\r\n    \r\n    SftpSession sftpSession = factory.getSession();\r\n\r\n\r\n","title":"Spring Integration SFTP connection fails - Unable to negotiate key exchange for kex algorithms","body":"<p>I am using Spring Integration (Version: 6.1.2) to connect to an SFTP server. While creating an SFTPSession, I get this exception -</p>\n<pre><code>java.lang.IllegalStateException: failed to create SFTP Session\n....\nCaused by: org.apache.sshd.common.SshException: Unable to negotiate key exchange for kex algorithms (\n\nclient: \ncurve25519-sha256,\ncurve25519-sha256@libssh.org,\ncurve448-sha512,\necdh-sha2-nistp521,\necdh-sha2-nistp384,\necdh-sha2-nistp256,\ndiffie-hellman-group-exchange-sha256,\ndiffie-hellman-group18-sha512,\ndiffie-hellman-group17-sha512,\ndiffie-hellman-group16-sha512,\ndiffie-hellman-group15-sha512,\ndiffie-hellman-group14-sha256,\next-info-c\n\nserver: \ndiffie-hellman-group1-sha1,\ndiffie-hellman-group14-sha1)\n</code></pre>\n<p>Obviously, the server only supports the old algorithms. How do I add support for these algorithms on my SFTP session?</p>\n<p>Here is my code -</p>\n<pre><code>DefaultSftpSessionFactory factory = new DefaultSftpSessionFactory();\nfactory.setHost(&quot;ftp.sssss.com&quot;);\nfactory.setPort(Integer.valueOf(22));\nfactory.setAllowUnknownKeys(true);\nfactory.setUser(&quot;user&quot;);\nfactory.setPassword(&quot;password&quot;);\n\nSftpSession sftpSession = factory.getSession();\n</code></pre>\n"},{"tags":["java","spring","concurrency","jvm","java.util.concurrent"],"comments":[{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1695286426,"post_id":77144179,"comment_id":136005043,"body_markdown":"Letting handling of `InterruptedException` aside, it’s equivalent to `CompletableFuture&lt;String&gt; future = CompletableFuture.completedFuture(new Service()) .thenComposeAsync(Service::helloFuture);`","body":"Letting handling of <code>InterruptedException</code> aside, it’s equivalent to <code>CompletableFuture&lt;String&gt; future = CompletableFuture.completedFuture(new Service()) .thenComposeAsync(Service::helloFuture);</code>"}],"answers":[{"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":4,"creation_date":1695226698,"post_id":77144293,"comment_id":135997212,"body_markdown":"... and now I noticed the `Async` annotation which probably means Spring is providing magic. F&#39;ing Spring, always making intuitive, easy to read code harder to understand...","body":"... and now I noticed the <code>Async</code> annotation which probably means Spring is providing magic. F&#39;ing Spring, always making intuitive, easy to read code harder to understand..."},{"owner":{"account_id":293433,"reputation":8693,"user_id":596720,"accept_rate":78,"display_name":"Abe"},"score":0,"creation_date":1695243286,"post_id":77144293,"comment_id":136000193,"body_markdown":"https://stackoverflow.com/a/47351924/596720 - looks like it.","body":"<a href=\"https://stackoverflow.com/a/47351924/596720\">stackoverflow.com/a/47351924/596720</a> - looks like it."}],"tags":[],"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695226613,"creation_date":1695226613,"answer_id":77144293,"question_id":77144179,"body_markdown":"In the code you&#39;ve shown, you only create the `Future` after `helloFuture` has finished executing. There is no magic going on there: The method runs in exactly the order you think it does by reading the code. The method uses `CompletableFuture.completedFuture`, which does exactly what you think: It returns a new `Future` instance in an already-completed state. And the `helloFuture` call in the `Test` class will block until all of that is done.","title":"How does the jvm return a Future object reference before the asynchronous method has completed","body":"<p>In the code you've shown, you only create the <code>Future</code> after <code>helloFuture</code> has finished executing. There is no magic going on there: The method runs in exactly the order you think it does by reading the code. The method uses <code>CompletableFuture.completedFuture</code>, which does exactly what you think: It returns a new <code>Future</code> instance in an already-completed state. And the <code>helloFuture</code> call in the <code>Test</code> class will block until all of that is done.</p>\n"}],"owner":{"account_id":293433,"reputation":8693,"user_id":596720,"accept_rate":78,"display_name":"Abe"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695226613,"creation_date":1695225656,"question_id":77144179,"body_markdown":"Consider the following code\r\n```java\r\nclass Test {\r\n  public void method1() {\r\n    CompletableFuture&lt;String&gt; future = helloFuture();\r\n    assertEquals(&quot;done&quot;, future.get());\r\n  }\r\n}\r\n\r\nclass Service {\r\n  @Async\r\n  public CompletableFuture&lt;String&gt; helloFuture() throws InterruptedException {\r\n    System.out.println(&quot;hello future&quot;);\r\n    Thread.sleep(100);\r\n    return CompletableFuture.completedFuture(&quot;done&quot;);\r\n  }\r\n}\r\n```\r\n\r\nThe `helloFuture` method only returns the CompletableFuture in the last line **after** it has done its work. But we get a reference to the returned CompletableFuture in the test method **when** the `helloFuture` starts executing and start to wait for it in the main thread (using the `get` method). So how does the calling method get a reference to the `CompletableFuture` even before it is created in the `helloFuture` method?\r\n\r\nThis is in the context of Spring, but even for regular `ExecutorService.submit` I have the same question. I guess it is possible that in a regular `ExecutorService` the internal implementation first creates and returns a `Future` object in the calling thread and queues up the task to be executed in the thread pool.","title":"How does the jvm return a Future object reference before the asynchronous method has completed","body":"<p>Consider the following code</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Test {\n  public void method1() {\n    CompletableFuture&lt;String&gt; future = helloFuture();\n    assertEquals(&quot;done&quot;, future.get());\n  }\n}\n\nclass Service {\n  @Async\n  public CompletableFuture&lt;String&gt; helloFuture() throws InterruptedException {\n    System.out.println(&quot;hello future&quot;);\n    Thread.sleep(100);\n    return CompletableFuture.completedFuture(&quot;done&quot;);\n  }\n}\n</code></pre>\n<p>The <code>helloFuture</code> method only returns the CompletableFuture in the last line <strong>after</strong> it has done its work. But we get a reference to the returned CompletableFuture in the test method <strong>when</strong> the <code>helloFuture</code> starts executing and start to wait for it in the main thread (using the <code>get</code> method). So how does the calling method get a reference to the <code>CompletableFuture</code> even before it is created in the <code>helloFuture</code> method?</p>\n<p>This is in the context of Spring, but even for regular <code>ExecutorService.submit</code> I have the same question. I guess it is possible that in a regular <code>ExecutorService</code> the internal implementation first creates and returns a <code>Future</code> object in the calling thread and queues up the task to be executed in the thread pool.</p>\n"},{"tags":["java","gitlab","dockerfile","cicd"],"owner":{"account_id":29493214,"reputation":1,"user_id":22601858,"display_name":"Mohamed Attia"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695226541,"creation_date":1695226541,"question_id":77144286,"body_markdown":"Greetings,\r\n\r\nI need a support on this issue, I got totally mad about this issue, I tried to use the well known code of Pet Clinc and I forked it to my Gitlab repo, the problem I am facing as attached [enter image description here](https://i.stack.imgur.com/R4fT1.jpg)\r\n\r\nI did made the code below on the CI.yml file as usual, \r\n**\r\n#start of code##########**\r\n\r\nstages:\r\n  - build\r\n  - package\r\n  - deploy\r\n\r\nmaven-build:\r\n  stage: build\r\n  image: maven:latest #ubuntu:22.04\r\n  cache:\r\n    paths:\r\n      - target\r\n  script:\r\n    - echo &quot;Compiling the code...&quot;\r\n    - echo &quot;Compile complete.&quot;   \r\n    - apt-get update -y \r\n    - &#39;command -v ssh-agent &gt;/dev/null || ( apt-get update -y &amp;&amp; apt-get install openssh-client -y )&#39;\r\n    - apt-get install software-properties-common -y\r\n    - apt-get install curl -y\r\n    - apt-get install wget -y\r\n    - apt-get install make -y\r\n    - apt-get install gcc -y\r\n    - apt-get install libc6-dev -y\r\n    - add-apt-repository ppa:git-core/ppa -y\r\n    - apt-get install libssl-dev -y\r\n    - apt install build-essential procps curl file git -y\r\n    - apt install bash-completion -y\r\n    - apt-get install curl -y\r\n    #- /bin/bash -c &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)&quot;\r\n    - apt-get install openjdk-17-jdk -y\r\n    - apt-get install -y ruby openjdk-8-jdk openjdk-11-jdk openjdk-17-jdk\r\n    - update-alternatives --set java /usr/lib/jvm/java-17-openjdk-amd64/bin/java\r\n    - update-alternatives --set javac /usr/lib/jvm/java-17-openjdk-amd64/bin/javac\r\n    - apt-get install wget -y\r\n    - apt-get install -y openjdk-17-jdk\r\n    - mvn -version\r\n    - git clone https://github.com/spring-projects/spring-petclinic.git\r\n    - cd spring-petclinic\r\n    - ./mvnw package\r\n    -  java -jar target/*.jar &amp;\r\n    #- mvn package\r\n    #- java -jar -e -X -spring-javaformat:apply target1/spring-petclinic-2.1.0.jar &amp;  \r\n                                                 \r\n  artifacts:\r\n    paths:\r\n      - target/*.jar\r\n#\r\ndocker-package:\r\n  \r\n  image: docker:20.10.16\r\n  stage: package\r\n  services:\r\n    - docker:20.10.16-dind\r\n  script:\r\n    - docker login -u $CI_REGISTRY_USER -p $CI_REGISTRY_PASSWORD $CI_REGISTRY\r\n    - docker build -t $CI_REGISTRY/group/project/image:latest .\r\n    - docker push $CI_REGISTRY/group/project/image:latest\r\n\r\n\r\nand I prepared another File for Dockerfile and used the usual command for build the image as per the CI/CD files above, \r\n\r\n**##Start of the code###**\r\n\r\nFROM maven:latest\r\n\r\nWORKDIR /src\r\n\r\nCOPY .mvn/ .mvn\r\nCOPY mvnw pom.xml ./\r\n\r\ngit clone https://github.com/spring-projects/spring-petclinic.git\r\ncd spring-petclinic\r\n\r\nCOPY src ./src\r\n \r\nRUN ./mvnw package\r\nRUN java -jar target/*.jar\r\n\r\n\r\n\r\nENV PORT 5000\r\nEXPOSE $PORT\r\nCMD [ &quot;sh&quot;, &quot;-c&quot;, &quot;mvn -Dserver.port=${PORT} spring-boot:run&quot; ]\r\n\r\n\r\nany clue how can I fix it? \r\n\r\n\r\n\r\nI tried to edit the file I mean the Pipeline file but it was working just fine, the problem I believe is on my Docker file, I used this repo for my project... \r\n\r\nhttps://spring-petclinic.github.io/","title":"&quot;Failed to build and Push Java app Docker image to Gitlab Registry","body":"<p>Greetings,</p>\n<p>I need a support on this issue, I got totally mad about this issue, I tried to use the well known code of Pet Clinc and I forked it to my Gitlab repo, the problem I am facing as attached <a href=\"https://i.stack.imgur.com/R4fT1.jpg\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>I did made the code below on the CI.yml file as usual,\n**\n#start of code##########**</p>\n<p>stages:</p>\n<ul>\n<li>build</li>\n<li>package</li>\n<li>deploy</li>\n</ul>\n<p>maven-build:\nstage: build\nimage: maven:latest #ubuntu:22.04\ncache:\npaths:\n- target\nscript:\n- echo &quot;Compiling the code...&quot;\n- echo &quot;Compile complete.&quot;<br />\n- apt-get update -y\n- 'command -v ssh-agent &gt;/dev/null || ( apt-get update -y &amp;&amp; apt-get install openssh-client -y )'\n- apt-get install software-properties-common -y\n- apt-get install curl -y\n- apt-get install wget -y\n- apt-get install make -y\n- apt-get install gcc -y\n- apt-get install libc6-dev -y\n- add-apt-repository ppa:git-core/ppa -y\n- apt-get install libssl-dev -y\n- apt install build-essential procps curl file git -y\n- apt install bash-completion -y\n- apt-get install curl -y\n#- /bin/bash -c &quot;$(curl -fsSL <a href=\"https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh\" rel=\"nofollow noreferrer\">https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh</a>)&quot;\n- apt-get install openjdk-17-jdk -y\n- apt-get install -y ruby openjdk-8-jdk openjdk-11-jdk openjdk-17-jdk\n- update-alternatives --set java /usr/lib/jvm/java-17-openjdk-amd64/bin/java\n- update-alternatives --set javac /usr/lib/jvm/java-17-openjdk-amd64/bin/javac\n- apt-get install wget -y\n- apt-get install -y openjdk-17-jdk\n- mvn -version\n- git clone <a href=\"https://github.com/spring-projects/spring-petclinic.git\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-petclinic.git</a>\n- cd spring-petclinic\n- ./mvnw package\n-  java -jar target/*.jar &amp;\n#- mvn package\n#- java -jar -e -X -spring-javaformat:apply target1/spring-petclinic-2.1.0.jar &amp;</p>\n<p>artifacts:\npaths:\n- target/*.jar</p>\n<h1></h1>\n<p>docker-package:</p>\n<p>image: docker:20.10.16\nstage: package\nservices:\n- docker:20.10.16-dind\nscript:\n- docker login -u $CI_REGISTRY_USER -p $CI_REGISTRY_PASSWORD $CI_REGISTRY\n- docker build -t $CI_REGISTRY/group/project/image:latest .\n- docker push $CI_REGISTRY/group/project/image:latest</p>\n<p>and I prepared another File for Dockerfile and used the usual command for build the image as per the CI/CD files above,</p>\n<p><strong>##Start of the code###</strong></p>\n<p>FROM maven:latest</p>\n<p>WORKDIR /src</p>\n<p>COPY .mvn/ .mvn\nCOPY mvnw pom.xml ./</p>\n<p>git clone <a href=\"https://github.com/spring-projects/spring-petclinic.git\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-petclinic.git</a>\ncd spring-petclinic</p>\n<p>COPY src ./src</p>\n<p>RUN ./mvnw package\nRUN java -jar target/*.jar</p>\n<p>ENV PORT 5000\nEXPOSE $PORT\nCMD [ &quot;sh&quot;, &quot;-c&quot;, &quot;mvn -Dserver.port=${PORT} spring-boot:run&quot; ]</p>\n<p>any clue how can I fix it?</p>\n<p>I tried to edit the file I mean the Pipeline file but it was working just fine, the problem I believe is on my Docker file, I used this repo for my project...</p>\n<p><a href=\"https://spring-petclinic.github.io/\" rel=\"nofollow noreferrer\">https://spring-petclinic.github.io/</a></p>\n"},{"tags":["java","hibernate","jpa","orm"],"answers":[{"tags":[],"owner":{"account_id":2540497,"reputation":616,"user_id":2206401,"accept_rate":81,"display_name":"Shikhar Subedi"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1378880735,"creation_date":1378880735,"answer_id":18734060,"question_id":18733872,"body_markdown":"thats because in the database, the many side has the foreign key. for example consider tables \r\nUser and Transaction with relation user has many transactions. In the transaction table, every transaction has a user_id which is a foreign key to the user table not the other way round. User table does not have a transaction_id.\r\n","title":"Why is in many to one bidirectional relation many side is always the owning side of the relationship?","body":"<p>thats because in the database, the many side has the foreign key. for example consider tables \nUser and Transaction with relation user has many transactions. In the transaction table, every transaction has a user_id which is a foreign key to the user table not the other way round. User table does not have a transaction_id.</p>\n"},{"tags":[],"owner":{"account_id":2271272,"reputation":732,"user_id":1998602,"display_name":"reggert"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1378881021,"creation_date":1378881021,"answer_id":18734129,"question_id":18733872,"body_markdown":"Each of the (potentially many) rows representing the entity on the &quot;many&quot; side contain (foreign key) references back to single row representing the entity on the &quot;one&quot; side of the relationship as a single database column. In order for the &quot;one&quot; side to own the relationship, the keys for all of the rows corresponding to the &quot;many&quot; side would have to fit into a single database table row, which isn&#39;t practical.\r\n\r\nIn other words, if `A` is the &quot;many&quot; side and `B` is the &quot;one side&quot;, for each row in the `B` table, there are potentially several rows in table `A` that contain a reference to it. Each of those B rows can store the key of the linked A row in a single column. There&#39;s no way for that one A row to store the keys of all those B rows.\r\n\r\nFor the same reason, in the case of a many-to-many relationship, a join table always ends up getting used in addition to the tables representing the entities in order to link the foreign key references as single columns.","title":"Why is in many to one bidirectional relation many side is always the owning side of the relationship?","body":"<p>Each of the (potentially many) rows representing the entity on the \"many\" side contain (foreign key) references back to single row representing the entity on the \"one\" side of the relationship as a single database column. In order for the \"one\" side to own the relationship, the keys for all of the rows corresponding to the \"many\" side would have to fit into a single database table row, which isn't practical.</p>\n\n<p>In other words, if <code>A</code> is the \"many\" side and <code>B</code> is the \"one side\", for each row in the <code>B</code> table, there are potentially several rows in table <code>A</code> that contain a reference to it. Each of those B rows can store the key of the linked A row in a single column. There's no way for that one A row to store the keys of all those B rows.</p>\n\n<p>For the same reason, in the case of a many-to-many relationship, a join table always ends up getting used in addition to the tables representing the entities in order to link the foreign key references as single columns.</p>\n"},{"tags":[],"owner":{"account_id":26055092,"reputation":1,"user_id":19757596,"display_name":"Ali-Hassan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695226331,"creation_date":1695212688,"answer_id":77142403,"question_id":18733872,"body_markdown":"This makes sense. \r\n\r\nAssume you have two entities: **Post**, which represents the &quot;one&quot; side, and **Comments**, which represents the &quot;many&quot; side of the relationship.\r\nConsider that the JPA allows us to specify the mappedBy attribute in the @**ManyToOne** annotation. Thus, it means **Post** will be the owning side and **Comment** will be the inverse side and in the database, the table **post** will have a foreign key referring to the primary key of the table **comments**.\r\n In this scenario, the issue is that one instance of the entity **Post** has to store multiple instances of the entity **Comments**, and an ORM framework will fail to reflect this relationship in the relational database because one record cannot contain multiple foreign key values(practically).\r\n\r\nThat&#39;s why the &quot;one&quot; side in a one to many bi-directional relationship can&#39;t be the owning side. \r\n","title":"Why is in many to one bidirectional relation many side is always the owning side of the relationship?","body":"<p>This makes sense.</p>\n<p>Assume you have two entities: <strong>Post</strong>, which represents the &quot;one&quot; side, and <strong>Comments</strong>, which represents the &quot;many&quot; side of the relationship.\nConsider that the JPA allows us to specify the mappedBy attribute in the @<strong>ManyToOne</strong> annotation. Thus, it means <strong>Post</strong> will be the owning side and <strong>Comment</strong> will be the inverse side and in the database, the table <strong>post</strong> will have a foreign key referring to the primary key of the table <strong>comments</strong>.\nIn this scenario, the issue is that one instance of the entity <strong>Post</strong> has to store multiple instances of the entity <strong>Comments</strong>, and an ORM framework will fail to reflect this relationship in the relational database because one record cannot contain multiple foreign key values(practically).</p>\n<p>That's why the &quot;one&quot; side in a one to many bi-directional relationship can't be the owning side.</p>\n"}],"owner":{"account_id":3286612,"reputation":643,"user_id":2765953,"accept_rate":56,"display_name":"homeAccount"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":700,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":3,"score":3,"last_activity_date":1695226331,"creation_date":1378879955,"question_id":18733872,"body_markdown":"documentation says:\r\n\r\n \r\n\r\n&gt;    The many side of many-to-one bidirectional relationships must not\r\n&gt; define the mappedBy element. The many side is always the owning side\r\n&gt; of the relationship.\r\n\r\nCan you explain why? what the reason?","title":"Why is in many to one bidirectional relation many side is always the owning side of the relationship?","body":"<p>documentation says:</p>\n\n<blockquote>\n  <p>The many side of many-to-one bidirectional relationships must not\n  define the mappedBy element. The many side is always the owning side\n  of the relationship.</p>\n</blockquote>\n\n<p>Can you explain why? what the reason?</p>\n"},{"tags":["java","android-studio"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1695226386,"post_id":77144253,"comment_id":135997143,"body_markdown":"I have no idea if that&#39;s possible, but I added the `android-studio` tag so that someone who does know can find this question more easily","body":"I have no idea if that&#39;s possible, but I added the <code>android-studio</code> tag so that someone who does know can find this question more easily"}],"owner":{"account_id":9903257,"reputation":37,"user_id":7332575,"display_name":"Wayne Lampiasi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1695226306,"creation_date":1695226257,"question_id":77144253,"body_markdown":"I am legally blind.  i have a visual issue in android studio. \r\ni set most of my fonts to bold.\r\nbut, the squiggly red line under any incorrect \r\ncode would be easier to see if it were also bold.\r\nis there any way in android studio to make the red\r\nline bold?","title":"Visual isssue with Red line in Android Studio","body":"<p>I am legally blind.  i have a visual issue in android studio.\ni set most of my fonts to bold.\nbut, the squiggly red line under any incorrect\ncode would be easier to see if it were also bold.\nis there any way in android studio to make the red\nline bold?</p>\n"},{"tags":["java","selenium-webdriver"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1695199173,"post_id":77135669,"comment_id":135990793,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"comments":[{"owner":{"account_id":29482948,"reputation":1,"user_id":22593465,"display_name":"stranger"},"score":1,"creation_date":1695227205,"post_id":77140367,"comment_id":135997311,"body_markdown":"That does not work neither does pageLoadTimeout because the page is getting loaded without any lag. If I run the code by putting a debugger it works, putting a thread.sleep after landing on each page works, or if use the ExpectedConditions.numberOfElementsToBeMoreThan","body":"That does not work neither does pageLoadTimeout because the page is getting loaded without any lag. If I run the code by putting a debugger it works, putting a thread.sleep after landing on each page works, or if use the ExpectedConditions.numberOfElementsToBeMoreThan"}],"tags":[],"owner":{"account_id":27938804,"reputation":102,"user_id":21335232,"display_name":"Bhairu"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695211649,"creation_date":1695196252,"answer_id":77140367,"question_id":77135669,"body_markdown":"Increase the wait time, when Selenium lands on any new page, or you can use the below mechanism and manipulate these codes after reaching every search result page.\r\n    \r\n    driver.manage().timeouts().scriptTimeout(Duration.ofSeconds(30));","title":"Not able to get all the search results from each page","body":"<p>Increase the wait time, when Selenium lands on any new page, or you can use the below mechanism and manipulate these codes after reaching every search result page.</p>\n<pre><code>driver.manage().timeouts().scriptTimeout(Duration.ofSeconds(30));\n</code></pre>\n"}],"owner":{"account_id":29482948,"reputation":1,"user_id":22593465,"display_name":"stranger"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":23,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1695226114,"creation_date":1695135206,"question_id":77135669,"body_markdown":"I was trying to automate a scenario: From amazon.com search for iphone and get the title of all the search results. In each page I do see that there are 18 search results and on the last page that is on 20th page it gives sometimes less than 10 results.\r\n\r\nI am able to get the results but the numbers are not consistent. Sometimes I do get 18 for a page but then on other pages I get less than 18 as well.\r\n\r\nI did try wait with expected conditions like presenceOfAllElementsLocated and visibility as well but both of them did not work. `numberOfElementsToBeMoreThan` did work but again the last page that os 20th page gives less than 10 results.\r\nOne more thing, using Thread.sleep also provide correct results. I am using Java. Any help would be appreciated.\r\n\r\nEdit adding the code what I did:\r\n\r\n    public static void main(String[] args) throws InterruptedException {\r\n    \r\n            browserUtil.openURL(&quot;https://amazon.in&quot;);\r\n            ElementUtils elementUtils = new ElementUtils(driver);\r\n    \r\n            By searchField = By.id(&quot;twotabsearchtextbox&quot;);\r\n            By searchButton = By.id(&quot;nav-search-submit-button&quot;);\r\n            By eachResult = By.xpath(&quot;//div[starts-with(@cel_widget_id, &#39;MAIN-SEARCH_RESULTS&#39;)]//h2//span&quot;);\r\n            By nextButton = By.className(&quot;s-pagination-next&quot;);\r\n    \r\n            elementUtils.sendKeysToTextField(searchField, &quot;iPhone&quot;);\r\n            elementUtils.clickOnElement(searchButton);\r\n            System.out.println(elementUtils.getAllElementsTextBySize(eachResult, 17));\r\n    \r\n            while(!Objects.equals(elementUtils.getWebElement(nextButton).getAttribute(&quot;aria-disabled&quot;), &quot;true&quot;)){\r\n                elementUtils.clickOnElement(nextButton);\r\n                System.out.println(elementUtils.getAllElementsTextBySize(eachResult, 17));\r\n            }\r\n    \r\n            browserUtil.closeBrowser();\r\n\r\nMy elements utility looks like this:\r\n\r\n    public ElementUtils(WebDriver driver){\r\n            this.driver = driver;\r\n            wait = new WebDriverWait(driver, Duration.ofSeconds(20));\r\n            actions = new Actions(driver);\r\n        }\r\n    \r\n        public WebElement getWebElement(By locator){\r\n            return wait.until(ExpectedConditions.presenceOfElementLocated(locator));\r\n        }\r\n    \r\n        public List&lt;WebElement&gt; getWebElements(By locator){\r\n            return wait.until(ExpectedConditions.presenceOfAllElementsLocatedBy(locator));\r\n        }\r\n        public List&lt;WebElement&gt; getWebElementsBySize(By locator, int size){\r\n            return wait.until(ExpectedConditions.numberOfElementsToBeMoreThan(locator, size));\r\n    }\r\n","title":"Not able to get all the search results from each page","body":"<p>I was trying to automate a scenario: From amazon.com search for iphone and get the title of all the search results. In each page I do see that there are 18 search results and on the last page that is on 20th page it gives sometimes less than 10 results.</p>\n<p>I am able to get the results but the numbers are not consistent. Sometimes I do get 18 for a page but then on other pages I get less than 18 as well.</p>\n<p>I did try wait with expected conditions like presenceOfAllElementsLocated and visibility as well but both of them did not work. <code>numberOfElementsToBeMoreThan</code> did work but again the last page that os 20th page gives less than 10 results.\nOne more thing, using Thread.sleep also provide correct results. I am using Java. Any help would be appreciated.</p>\n<p>Edit adding the code what I did:</p>\n<pre><code>public static void main(String[] args) throws InterruptedException {\n\n        browserUtil.openURL(&quot;https://amazon.in&quot;);\n        ElementUtils elementUtils = new ElementUtils(driver);\n\n        By searchField = By.id(&quot;twotabsearchtextbox&quot;);\n        By searchButton = By.id(&quot;nav-search-submit-button&quot;);\n        By eachResult = By.xpath(&quot;//div[starts-with(@cel_widget_id, 'MAIN-SEARCH_RESULTS')]//h2//span&quot;);\n        By nextButton = By.className(&quot;s-pagination-next&quot;);\n\n        elementUtils.sendKeysToTextField(searchField, &quot;iPhone&quot;);\n        elementUtils.clickOnElement(searchButton);\n        System.out.println(elementUtils.getAllElementsTextBySize(eachResult, 17));\n\n        while(!Objects.equals(elementUtils.getWebElement(nextButton).getAttribute(&quot;aria-disabled&quot;), &quot;true&quot;)){\n            elementUtils.clickOnElement(nextButton);\n            System.out.println(elementUtils.getAllElementsTextBySize(eachResult, 17));\n        }\n\n        browserUtil.closeBrowser();\n</code></pre>\n<p>My elements utility looks like this:</p>\n<pre><code>public ElementUtils(WebDriver driver){\n        this.driver = driver;\n        wait = new WebDriverWait(driver, Duration.ofSeconds(20));\n        actions = new Actions(driver);\n    }\n\n    public WebElement getWebElement(By locator){\n        return wait.until(ExpectedConditions.presenceOfElementLocated(locator));\n    }\n\n    public List&lt;WebElement&gt; getWebElements(By locator){\n        return wait.until(ExpectedConditions.presenceOfAllElementsLocatedBy(locator));\n    }\n    public List&lt;WebElement&gt; getWebElementsBySize(By locator, int size){\n        return wait.until(ExpectedConditions.numberOfElementsToBeMoreThan(locator, size));\n}\n</code></pre>\n"},{"tags":["java","spring","gradle","mapstruct"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1659545540,"post_id":73223385,"comment_id":129321571,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."},{"owner":{"account_id":5636901,"reputation":171,"user_id":4462119,"display_name":"Thomas Carlisle"},"score":0,"creation_date":1697226259,"post_id":73223385,"comment_id":136258297,"body_markdown":"While it does seem to be lacking without code, this isn&#39;t even a problem with the code. I had a project that compiled fine 2 hrs ago, made no changes, and now it can&#39;t compile. The answer below explaining how mapstruct creates file in the build dir, is spot on correct.","body":"While it does seem to be lacking without code, this isn&#39;t even a problem with the code. I had a project that compiled fine 2 hrs ago, made no changes, and now it can&#39;t compile. The answer below explaining how mapstruct creates file in the build dir, is spot on correct."}],"answers":[{"tags":[],"owner":{"account_id":15089540,"reputation":141,"user_id":10889826,"display_name":"William Buron"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1659622324,"creation_date":1659622324,"answer_id":73237439,"question_id":73223385,"body_markdown":"It seems that you already have a file call RecipeMapperImpl if i look your image.  \r\nBut the file didn&#39;t appear on the left in project explorer.  \r\n\r\nMapStruct will create a file RecipeMapperImpl so he wont success if one already exist.\r\n\r\nI suggest to remove the file RecipeMapperImpl in your project if he still exist and run a clean compile with gradle.  \r\n\r\nI faced the same error for this reason. Hope it help.\r\n","title":"Problem with Internal error in the mapping procesor while using mapstruct","body":"<p>It seems that you already have a file call RecipeMapperImpl if i look your image.<br />\nBut the file didn't appear on the left in project explorer.</p>\n<p>MapStruct will create a file RecipeMapperImpl so he wont success if one already exist.</p>\n<p>I suggest to remove the file RecipeMapperImpl in your project if he still exist and run a clean compile with gradle.</p>\n<p>I faced the same error for this reason. Hope it help.</p>\n"},{"tags":[],"owner":{"account_id":25290436,"reputation":1,"user_id":19116658,"display_name":"Lucas Gutierrez"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678102074,"creation_date":1678102074,"answer_id":75650303,"question_id":73223385,"body_markdown":"MapStruct automatically creates in the folder target/generated-sources/... the basic implementation to the methods declared in your interface. Try to delete the .java file autogenerated and compile again.\r\n","title":"Problem with Internal error in the mapping procesor while using mapstruct","body":"<p>MapStruct automatically creates in the folder target/generated-sources/... the basic implementation to the methods declared in your interface. Try to delete the .java file autogenerated and compile again.</p>\n"},{"tags":[],"owner":{"account_id":9069635,"reputation":91,"user_id":6753339,"display_name":"dalag32"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695225979,"creation_date":1695225979,"answer_id":77144210,"question_id":73223385,"body_markdown":"I had the same problem when I was using one more plugin for code generation. In my case, it was `com.sun.xml.ws:jaxws-maven-plugin:4.0.1`, which generates java classes from WSDL. When I changed sourceDestinationDir for `jaxws-maven-plugin` to new destination `{project.baseDir}/target/generated-source/xjc/` (instead of `{project.baseDir}/target/generated-source/`, it solved my problem. \r\n\r\nSo try to check if you are not using some different plugin/processor that generates code to the same location as mapstruct.","title":"Problem with Internal error in the mapping procesor while using mapstruct","body":"<p>I had the same problem when I was using one more plugin for code generation. In my case, it was <code>com.sun.xml.ws:jaxws-maven-plugin:4.0.1</code>, which generates java classes from WSDL. When I changed sourceDestinationDir for <code>jaxws-maven-plugin</code> to new destination <code>{project.baseDir}/target/generated-source/xjc/</code> (instead of <code>{project.baseDir}/target/generated-source/</code>, it solved my problem.</p>\n<p>So try to check if you are not using some different plugin/processor that generates code to the same location as mapstruct.</p>\n"}],"owner":{"account_id":25968330,"reputation":21,"user_id":19683969,"display_name":"Miedzic"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9162,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1695225979,"creation_date":1659537428,"question_id":73223385,"body_markdown":"it was my first attempt using gradle and i got some weird problem i never heard of. Google didn&#39;t help me too much so i am humbly asking for some help. I started using mapstruct after i got some problems with my dao Recipe after adding annotation entity.\r\n\r\nI have 2 dependencies related to mapstruct on my gradle file\r\n\r\nimplementation &#39;org.mapstruct:mapstruct:1.5.2.Final&#39;\r\n\r\nannotationProcessor &#39;org.mapstruct:mapstruct-processor:1.5.2.Final&#39;\r\n\r\nthis is my code error, what is interesting is that code works perfectly, but i can&#39;t compile it again. If u need some code i&#39;ll be happy to provide, as u can see on the screen i have some code generated, but i&#39;m unsure when and why it stopped working.\r\n\r\n\r\n    Internal error in the mapping processor: java.lang.RuntimeException: javax.annotation.processing.FilerException: Attempt to recreate a file for type recipes.mapper.RecipeMapperImpl  \tat org.mapstruct.ap.internal.processor.MapperRenderingProcessor.createSourceFile(MapperRenderingProcessor.java:59)  \tat org.mapstruct.ap.internal.processor.MapperRenderingProcessor.writeToSourceFile(MapperRenderingProcessor.java:39)  \tat org.mapstruct.ap.internal.processor.MapperRenderingProcessor.process(MapperRenderingProcessor.java:29)  \tat org.mapstruct.ap.internal.processor.MapperRenderingProcessor.process(MapperRenderingProcessor.java:24)  \tat org.mapstruct.ap.MappingProcessor.process(MappingProcessor.java:350)  \tat org.mapstruct.ap.MappingProcessor.processMapperTypeElement(MappingProcessor.java:330)  \tat org.mapstruct.ap.MappingProcessor.processMapperElements(MappingProcessor.java:279)  \tat org.mapstruct.ap.MappingProcessor.process(MappingProcessor.java:174)  \tat org.gradle.api.internal.tasks.compile.processing.DelegatingProcessor.process(DelegatingProcessor.java:62)  \tat org.gradle.api.internal.tasks.compile.processing.IsolatingProcessor.process(IsolatingProcessor.java:50)  \tat org.gradle.api.internal.tasks.compile.processing.DelegatingProcessor.process(DelegatingProcessor.java:62)  \tat org.gradle.api.internal.tasks.compile.processing.TimeTrackingProcessor.access$401(TimeTrackingProcessor.java:37)  \tat org.gradle.api.internal.tasks.compile.processing.TimeTrackingProcessor$5.create(TimeTrackingProcessor.java:99)  \tat org.gradle.api.internal.tasks.compile.processing.TimeTrackingProcessor$5.create(TimeTrackingProcessor.java:96)  \tat org.gradle.api.internal.tasks.compile.processing.TimeTrackingProcessor.track(TimeTrackingProcessor.java:117)  \tat org.gradle.api.internal.tasks.compile.processing.TimeTrackingProcessor.process(TimeTrackingProcessor.java:96)  \tat jdk.compiler/com.sun.tools.javac.processing.JavacProcessingEnvironment.callProcessor(JavacProcessingEnvironment.java:985)  \tat jdk.compiler/com.sun.tools.javac.processing.JavacProcessingEnvironment.discoverAndRunProcs(JavacProcessingEnvironment.java:901)  \tat jdk.compiler/com.sun.tools.javac.processing.JavacProcessingEnvironment$Round.run(JavacProcessingEnvironment.java:1227)  \tat jdk.compiler/com.sun.tools.javac.processing.JavacProcessingEnvironment.doProcessing(JavacProcessingEnvironment.java:1340)  \tat jdk.compiler/com.sun.tools.javac.main.JavaCompiler.processAnnotations(JavaCompiler.java:1258)  \tat jdk.compiler/com.sun.tools.javac.main.JavaCompiler.compile(JavaCompiler.java:936)  \tat jdk.compiler/com.sun.tools.javac.api.JavacTaskImpl.lambda$doCall$0(JavacTaskImpl.java:104)  \tat jdk.compiler/com.sun.tools.javac.api.JavacTaskImpl.handleExceptions(JavacTaskImpl.java:147)  \tat jdk.compiler/com.sun.tools.javac.api.JavacTaskImpl.doCall(JavacTaskImpl.java:100)  \tat jdk.compiler/com.sun.tools.javac.api.JavacTaskImpl.call(JavacTaskImpl.java:94)  \tat org.gradle.internal.compiler.java.IncrementalCompileTask.call(IncrementalCompileTask.java:89)  \tat org.gradle.api.internal.tasks.compile.AnnotationProcessingCompileTask.call(AnnotationProcessingCompileTask.java:94)  \tat org.gradle.api.internal.tasks.compile.ResourceCleaningCompilationTask.call(ResourceCleaningCompilationTask.java:57)  \tat org.gradle.api.internal.tasks.compile.JdkJavaCompiler.execute(JdkJavaCompiler.java:54)  \tat org.gradle.api.internal.tasks.compile.JdkJavaCompiler.execute(JdkJavaCompiler.java:39)  \tat org.gradle.api.internal.tasks.compile.NormalizingJavaCompiler.delegateAndHandleErrors(NormalizingJavaCompiler.java:97)  \tat org.gradle.api.internal.tasks.compile.NormalizingJavaCompiler.execute(NormalizingJavaCompiler.java:51)  \tat org.gradle.api.internal.tasks.compile.NormalizingJavaCompiler.execute(NormalizingJavaCompiler.java:37)  \tat org.gradle.api.internal.tasks.compile.AnnotationProcessorDiscoveringCompiler.execute(AnnotationProcessorDiscoveringCompiler.java:51)  \tat org.gradle.api.internal.tasks.compile.AnnotationProcessorDiscoveringCompiler.execute(AnnotationProcessorDiscoveringCompiler.java:37)  \tat org.gradle.api.internal.tasks.compile.ModuleApplicationNameWritingCompiler.execute(ModuleApplicationNameWritingCompiler.java:46)  \tat org.gradle.api.internal.tasks.compile.ModuleApplicationNameWritingCompiler.execute(ModuleApplicationNameWritingCompiler.java:36)  \tat org.gradle.jvm.toolchain.internal.DefaultToolchainJavaCompiler.execute(DefaultToolchainJavaCompiler.java:57)  \tat org.gradle.api.tasks.compile.JavaCompile.lambda$createToolchainCompiler$1(JavaCompile.java:232)  \tat org.gradle.api.internal.tasks.compile.CleaningJavaCompiler.execute(CleaningJavaCompiler.java:53)  \tat org.gradle.api.internal.tasks.compile.incremental.IncrementalCompilerFactory.lambda$createRebuildAllCompiler$0(IncrementalCompilerFactory.java:52)  \tat org.gradle.api.internal.tasks.compile.incremental.SelectiveCompiler.execute(SelectiveCompiler.java:67)  \tat org.gradle.api.internal.tasks.compile.incremental.SelectiveCompiler.execute(SelectiveCompiler.java:41)  \tat org.gradle.api.internal.tasks.compile.incremental.IncrementalResultStoringCompiler.execute(IncrementalResultStoringCompiler.java:66)  \tat org.gradle.api.internal.tasks.compile.incremental.IncrementalResultStoringCompiler.execute(IncrementalResultStoringCompiler.java:52)  \tat org.gradle.api.internal.tasks.compile.CompileJavaBuildOperationReportingCompiler$2.call(CompileJavaBuildOperationReportingCompiler.java:59)  \tat org.gradle.api.internal.tasks.compile.CompileJavaBuildOperationReportingCompiler$2.call(CompileJavaBuildOperationReportingCompiler.java:51)  \tat org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:204)  \tat org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:199)  \tat org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)  \tat org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)  \tat org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)  \tat org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)  \tat org.gradle.internal.operations.DefaultBuildOperationRunner.call(DefaultBuildOperationRunner.java:53)  \tat org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:73)  \tat org.gradle.api.internal.tasks.compile.CompileJavaBuildOperationReportingCompiler.execute(CompileJavaBuildOperationReportingCompiler.java:51)  \tat org.gradle.api.tasks.compile.JavaCompile.performCompilation(JavaCompile.java:279)  \tat org.gradle.api.tasks.compile.JavaCompile.performIncrementalCompilation(JavaCompile.java:165)  \tat org.gradle.api.tasks.compile.JavaCompile.compile(JavaCompile.java:146)  \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)  \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)  \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)  \tat java.base/java.lang.reflect.Method.invoke(Method.java:566)  \tat org.gradle.internal.reflect.JavaMethod.invoke(JavaMethod.java:104)  \tat org.gradle.api.internal.project.taskfactory.IncrementalInputsTaskAction.doExecute(IncrementalInputsTaskAction.java:32)  \tat org.gradle.api.internal.project.taskfactory.StandardTaskAction.execute(StandardTaskAction.java:51)  \tat org.gradle.api.internal.project.taskfactory.AbstractIncrementalTaskAction.execute(AbstractIncrementalTaskAction.java:25)  \tat org.gradle.api.internal.project.taskfactory.StandardTaskAction.execute(StandardTaskAction.java:29)  \tat org.gradle.api.internal.tasks.execution.TaskExecution$2.run(TaskExecution.java:239)  \tat org.gradle.internal.operations.DefaultBuildOperationRunner$1.execute(DefaultBuildOperationRunner.java:29)  \tat org.gradle.internal.operations.DefaultBuildOperationRunner$1.execute(DefaultBuildOperationRunner.java:26)  \tat org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)  \tat org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)  \tat org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)  \tat org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)  \tat org.gradle.internal.operations.DefaultBuildOperationRunner.run(DefaultBuildOperationRunner.java:47)  \tat org.gradle.internal.operations.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:68)  \tat org.gradle.api.internal.tasks.execution.TaskExecution.executeAction(TaskExecution.java:224)  \tat org.gradle.api.internal.tasks.execution.TaskExecution.executeActions(TaskExecution.java:207)  \tat org.gradle.api.internal.tasks.execution.TaskExecution.executeWithPreviousOutputFiles(TaskExecution.java:190)  \tat org.gradle.api.internal.tasks.execution.TaskExecution.execute(TaskExecution.java:168)  \tat org.gradle.internal.execution.steps.ExecuteStep.executeInternal(ExecuteStep.java:89)  \tat org.gradle.internal.execution.steps.ExecuteStep.access$000(ExecuteStep.java:40)  \tat org.gradle.internal.execution.steps.ExecuteStep$1.call(ExecuteStep.java:53)  \tat org.gradle.internal.execution.steps.ExecuteStep$1.call(ExecuteStep.java:50)  \tat org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:204)  \tat org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:199)  \tat org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)  \tat org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)  \tat org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)  \tat org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)  \tat org.gradle.internal.operations.DefaultBuildOperationRunner.call(DefaultBuildOperationRunner.java:53)  \tat org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:73)  \tat org.gradle.internal.execution.steps.ExecuteStep.execute(ExecuteStep.java:50)  \tat org.gradle.internal.execution.steps.ExecuteStep.execute(ExecuteStep.java:40)  \tat org.gradle.internal.execution.steps.RemovePreviousOutputsStep.execute(RemovePreviousOutputsStep.java:68)  \tat org.gradle.internal.execution.steps.RemovePreviousOutputsStep.execute(RemovePreviousOutputsStep.java:38)  \tat org.gradle.internal.execution.steps.ResolveInputChangesStep.execute(ResolveInputChangesStep.java:48)  \tat org.gradle.internal.execution.steps.ResolveInputChangesStep.execute(ResolveInputChangesStep.java:36)  \tat org.gradle.internal.execution.steps.CancelExecutionStep.execute(CancelExecutionStep.java:41)  \tat org.gradle.internal.execution.steps.TimeoutStep.executeWithoutTimeout(TimeoutStep.java:74)  \tat org.gradle.internal.execution.steps.TimeoutStep.execute(TimeoutStep.java:55)  \tat org.gradle.internal.execution.steps.CreateOutputsStep.execute(CreateOutputsStep.java:51)  \tat org.gradle.internal.execution.steps.CreateOutputsStep.execute(CreateOutputsStep.java:29)  \tat org.gradle.internal.execution.steps.CaptureStateAfterExecutionStep.execute(CaptureStateAfterExecutionStep.java:61)  \tat org.gradle.internal.execution.steps.CaptureStateAfterExecutionStep.execute(CaptureStateAfterExecutionStep.java:42)  \tat org.gradle.internal.execution.steps.BroadcastChangingOutputsStep.execute(BroadcastChangingOutputsStep.java:60)  \tat org.gradle.internal.execution.steps.BroadcastChangingOutputsStep.execute(BroadcastChangingOutputsStep.java:27)  \tat org.gradle.internal.execution.steps.BuildCacheStep.executeWithoutCache(BuildCacheStep.java:188)  \tat org.gradle.internal.execution.steps.BuildCacheStep.lambda$execute$1(BuildCacheStep.java:75)  \tat org.gradle.internal.Either$Right.fold(Either.java:175)  \tat org.gradle.internal.execution.caching.CachingState.fold(CachingState.java:59)  \tat org.gradle.internal.execution.steps.BuildCacheStep.execute(BuildCacheStep.java:73)  \tat org.gradle.internal.execution.steps.BuildCacheStep.execute(BuildCacheStep.java:48)  \tat org.gradle.internal.execution.steps.StoreExecutionStateStep.execute(StoreExecutionStateStep.java:38)  \tat org.gradle.internal.execution.steps.StoreExecutionStateStep.execute(StoreExecutionStateStep.java:27)  \tat org.gradle.internal.execution.steps.RecordOutputsStep.execute(RecordOutputsStep.java:36)  \tat org.gradle.internal.execution.steps.RecordOutputsStep.execute(RecordOutputsStep.java:22)  \tat org.gradle.internal.execution.steps.SkipUpToDateStep.executeBecause(SkipUpToDateStep.java:109)  \tat org.gradle.internal.execution.steps.SkipUpToDateStep.lambda$execute$2(SkipUpToDateStep.java:56)  \tat java.base/java.util.Optional.orElseGet(Optional.java:369)  \tat org.gradle.internal.execution.steps.SkipUpToDateStep.execute(SkipUpToDateStep.java:56)  \tat org.gradle.internal.execution.steps.SkipUpToDateStep.execute(SkipUpToDateStep.java:38)  \tat org.gradle.internal.execution.steps.ResolveChangesStep.execute(ResolveChangesStep.java:73)  \tat org.gradle.internal.execution.steps.ResolveChangesStep.execute(ResolveChangesStep.java:44)  \tat org.gradle.internal.execution.steps.legacy.MarkSnapshottingInputsFinishedStep.execute(MarkSnapshottingInputsFinishedStep.java:37)  \tat org.gradle.internal.execution.steps.legacy.MarkSnapshottingInputsFinishedStep.execute(MarkSnapshottingInputsFinishedStep.java:27)  \tat org.gradle.internal.execution.steps.ResolveCachingStateStep.execute(ResolveCachingStateStep.java:89)  \tat org.gradle.internal.execution.steps.ResolveCachingStateStep.execute(ResolveCachingStateStep.java:50)  \tat org.gradle.internal.execution.steps.ValidateStep.execute(ValidateStep.java:114)  \tat org.gradle.internal.execution.steps.ValidateStep.execute(ValidateStep.java:57)  \tat org.gradle.internal.execution.steps.CaptureStateBeforeExecutionStep.execute(CaptureStateBeforeExecutionStep.java:76)  \tat org.gradle.internal.execution.steps.CaptureStateBeforeExecutionStep.execute(CaptureStateBeforeExecutionStep.java:50)  \tat org.gradle.internal.execution.steps.SkipEmptyWorkStep.lambda$execute$2(SkipEmptyWorkStep.java:93)  \tat java.base/java.util.Optional.orElseGet(Optional.java:369)  \tat org.gradle.internal.execution.steps.SkipEmptyWorkStep.execute(SkipEmptyWorkStep.java:93)  \tat org.gradle.internal.execution.steps.SkipEmptyWorkStep.execute(SkipEmptyWorkStep.java:34)  \tat org.gradle.internal.execution.steps.legacy.MarkSnapshottingInputsStartedStep.execute(MarkSnapshottingInputsStartedStep.java:38)  \tat org.gradle.internal.execution.steps.LoadPreviousExecutionStateStep.execute(LoadPreviousExecutionStateStep.java:43)  \tat org.gradle.internal.execution.steps.LoadPreviousExecutionStateStep.execute(LoadPreviousExecutionStateStep.java:31)  \tat org.gradle.internal.execution.steps.AssignWorkspaceStep.lambda$execute$0(AssignWorkspaceStep.java:40)  \tat org.gradle.api.internal.tasks.execution.TaskExecution$3.withWorkspace(TaskExecution.java:284)  \tat org.gradle.internal.execution.steps.AssignWorkspaceStep.execute(AssignWorkspaceStep.java:40)  \tat org.gradle.internal.execution.steps.AssignWorkspaceStep.execute(AssignWorkspaceStep.java:30)  \tat org.gradle.internal.execution.steps.IdentityCacheStep.execute(IdentityCacheStep.java:37)  \tat org.gradle.internal.execution.steps.IdentityCacheStep.execute(IdentityCacheStep.java:27)  \tat org.gradle.internal.execution.steps.IdentifyStep.execute(IdentifyStep.java:44)  \tat org.gradle.internal.execution.steps.IdentifyStep.execute(IdentifyStep.java:33)  \tat org.gradle.internal.execution.impl.DefaultExecutionEngine$1.execute(DefaultExecutionEngine.java:76)  \tat org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeIfValid(ExecuteActionsTaskExecuter.java:142)  \tat org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:131)  \tat org.gradle.api.internal.tasks.execution.CleanupStaleOutputsExecuter.execute(CleanupStaleOutputsExecuter.java:77)  \tat org.gradle.api.internal.tasks.execution.FinalizePropertiesTaskExecuter.execute(FinalizePropertiesTaskExecuter.java:46)  \tat org.gradle.api.internal.tasks.execution.ResolveTaskExecutionModeExecuter.execute(ResolveTaskExecutionModeExecuter.java:51)  \tat org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.java:57)  \tat org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:56)  \tat org.gradle.api.internal.tasks.execution.CatchExceptionTaskExecuter.execute(CatchExceptionTaskExecuter.java:36)  \tat org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.executeTask(EventFiringTaskExecuter.java:77)  \tat org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.call(EventFiringTaskExecuter.java:55)  \tat org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.call(EventFiringTaskExecuter.java:52)  \tat org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:204)  \tat org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:199)  \tat org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)  \tat org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)  \tat org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)  \tat org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)  \tat org.gradle.internal.operations.DefaultBuildOperationRunner.call(DefaultBuildOperationRunner.java:53)  \tat org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:73)  \tat org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter.execute(EventFiringTaskExecuter.java:52)  \tat org.gradle.execution.plan.LocalTaskNodeExecutor.execute(LocalTaskNodeExecutor.java:74)  \tat org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$InvokeNodeExecutorsAction.execute(DefaultTaskExecutionGraph.java:402)  \tat org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$InvokeNodeExecutorsAction.execute(DefaultTaskExecutionGraph.java:389)  \tat org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareExecutionAction.execute(DefaultTaskExecutionGraph.java:382)  \tat org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareExecutionAction.execute(DefaultTaskExecutionGraph.java:368)  \tat org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.lambda$run$0(DefaultPlanExecutor.java:127)  \tat org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.execute(DefaultPlanExecutor.java:191)  \tat org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.executeNextNode(DefaultPlanExecutor.java:182)  \tat org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.run(DefaultPlanExecutor.java:124)  \tat org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:64)  \tat org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:48)  \tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)  \tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)  \tat org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:61)  \tat java.base/java.lang.Thread.run(Thread.java:829)  Caused by: javax.annotation.processing.FilerException: Attempt to recreate a file for type recipes.mapper.RecipeMapperImpl  \tat jdk.compiler/com.sun.tools.javac.processing.JavacFiler.checkNameAndExistence(JavacFiler.java:724)  \tat jdk.compiler/com.sun.tools.javac.processing.JavacFiler.createSourceOrClassFile(JavacFiler.java:489)  \tat jdk.compiler/com.sun.tools.javac.processing.JavacFiler.createSourceFile(JavacFiler.java:426)  \tat org.gradle.api.internal.tasks.compile.processing.IncrementalFiler.createSourceFile(IncrementalFiler.java:45)  \tat org.mapstruct.ap.internal.processor.MapperRenderingProcessor.createSourceFile(MapperRenderingProcessor.java:56)  \t... 184 more\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n[image of error][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/zDtOA.png","title":"Problem with Internal error in the mapping procesor while using mapstruct","body":"<p>it was my first attempt using gradle and i got some weird problem i never heard of. Google didn't help me too much so i am humbly asking for some help. I started using mapstruct after i got some problems with my dao Recipe after adding annotation entity.</p>\n<p>I have 2 dependencies related to mapstruct on my gradle file</p>\n<p>implementation 'org.mapstruct:mapstruct:1.5.2.Final'</p>\n<p>annotationProcessor 'org.mapstruct:mapstruct-processor:1.5.2.Final'</p>\n<p>this is my code error, what is interesting is that code works perfectly, but i can't compile it again. If u need some code i'll be happy to provide, as u can see on the screen i have some code generated, but i'm unsure when and why it stopped working.</p>\n<pre><code>Internal error in the mapping processor: java.lang.RuntimeException: javax.annotation.processing.FilerException: Attempt to recreate a file for type recipes.mapper.RecipeMapperImpl    at org.mapstruct.ap.internal.processor.MapperRenderingProcessor.createSourceFile(MapperRenderingProcessor.java:59)      at org.mapstruct.ap.internal.processor.MapperRenderingProcessor.writeToSourceFile(MapperRenderingProcessor.java:39)     at org.mapstruct.ap.internal.processor.MapperRenderingProcessor.process(MapperRenderingProcessor.java:29)   at org.mapstruct.ap.internal.processor.MapperRenderingProcessor.process(MapperRenderingProcessor.java:24)   at org.mapstruct.ap.MappingProcessor.process(MappingProcessor.java:350)     at org.mapstruct.ap.MappingProcessor.processMapperTypeElement(MappingProcessor.java:330)    at org.mapstruct.ap.MappingProcessor.processMapperElements(MappingProcessor.java:279)   at org.mapstruct.ap.MappingProcessor.process(MappingProcessor.java:174)     at org.gradle.api.internal.tasks.compile.processing.DelegatingProcessor.process(DelegatingProcessor.java:62)    at org.gradle.api.internal.tasks.compile.processing.IsolatingProcessor.process(IsolatingProcessor.java:50)      at org.gradle.api.internal.tasks.compile.processing.DelegatingProcessor.process(DelegatingProcessor.java:62)    at org.gradle.api.internal.tasks.compile.processing.TimeTrackingProcessor.access$401(TimeTrackingProcessor.java:37)     at org.gradle.api.internal.tasks.compile.processing.TimeTrackingProcessor$5.create(TimeTrackingProcessor.java:99)   at org.gradle.api.internal.tasks.compile.processing.TimeTrackingProcessor$5.create(TimeTrackingProcessor.java:96)   at org.gradle.api.internal.tasks.compile.processing.TimeTrackingProcessor.track(TimeTrackingProcessor.java:117)     at org.gradle.api.internal.tasks.compile.processing.TimeTrackingProcessor.process(TimeTrackingProcessor.java:96)    at jdk.compiler/com.sun.tools.javac.processing.JavacProcessingEnvironment.callProcessor(JavacProcessingEnvironment.java:985)    at jdk.compiler/com.sun.tools.javac.processing.JavacProcessingEnvironment.discoverAndRunProcs(JavacProcessingEnvironment.java:901)      at jdk.compiler/com.sun.tools.javac.processing.JavacProcessingEnvironment$Round.run(JavacProcessingEnvironment.java:1227)   at jdk.compiler/com.sun.tools.javac.processing.JavacProcessingEnvironment.doProcessing(JavacProcessingEnvironment.java:1340)    at jdk.compiler/com.sun.tools.javac.main.JavaCompiler.processAnnotations(JavaCompiler.java:1258)    at jdk.compiler/com.sun.tools.javac.main.JavaCompiler.compile(JavaCompiler.java:936)    at jdk.compiler/com.sun.tools.javac.api.JavacTaskImpl.lambda$doCall$0(JavacTaskImpl.java:104)   at jdk.compiler/com.sun.tools.javac.api.JavacTaskImpl.handleExceptions(JavacTaskImpl.java:147)      at jdk.compiler/com.sun.tools.javac.api.JavacTaskImpl.doCall(JavacTaskImpl.java:100)    at jdk.compiler/com.sun.tools.javac.api.JavacTaskImpl.call(JavacTaskImpl.java:94)   at org.gradle.internal.compiler.java.IncrementalCompileTask.call(IncrementalCompileTask.java:89)    at org.gradle.api.internal.tasks.compile.AnnotationProcessingCompileTask.call(AnnotationProcessingCompileTask.java:94)      at org.gradle.api.internal.tasks.compile.ResourceCleaningCompilationTask.call(ResourceCleaningCompilationTask.java:57)      at org.gradle.api.internal.tasks.compile.JdkJavaCompiler.execute(JdkJavaCompiler.java:54)   at org.gradle.api.internal.tasks.compile.JdkJavaCompiler.execute(JdkJavaCompiler.java:39)   at org.gradle.api.internal.tasks.compile.NormalizingJavaCompiler.delegateAndHandleErrors(NormalizingJavaCompiler.java:97)   at org.gradle.api.internal.tasks.compile.NormalizingJavaCompiler.execute(NormalizingJavaCompiler.java:51)   at org.gradle.api.internal.tasks.compile.NormalizingJavaCompiler.execute(NormalizingJavaCompiler.java:37)   at org.gradle.api.internal.tasks.compile.AnnotationProcessorDiscoveringCompiler.execute(AnnotationProcessorDiscoveringCompiler.java:51)     at org.gradle.api.internal.tasks.compile.AnnotationProcessorDiscoveringCompiler.execute(AnnotationProcessorDiscoveringCompiler.java:37)     at org.gradle.api.internal.tasks.compile.ModuleApplicationNameWritingCompiler.execute(ModuleApplicationNameWritingCompiler.java:46)     at org.gradle.api.internal.tasks.compile.ModuleApplicationNameWritingCompiler.execute(ModuleApplicationNameWritingCompiler.java:36)     at org.gradle.jvm.toolchain.internal.DefaultToolchainJavaCompiler.execute(DefaultToolchainJavaCompiler.java:57)     at org.gradle.api.tasks.compile.JavaCompile.lambda$createToolchainCompiler$1(JavaCompile.java:232)      at org.gradle.api.internal.tasks.compile.CleaningJavaCompiler.execute(CleaningJavaCompiler.java:53)     at org.gradle.api.internal.tasks.compile.incremental.IncrementalCompilerFactory.lambda$createRebuildAllCompiler$0(IncrementalCompilerFactory.java:52)   at org.gradle.api.internal.tasks.compile.incremental.SelectiveCompiler.execute(SelectiveCompiler.java:67)   at org.gradle.api.internal.tasks.compile.incremental.SelectiveCompiler.execute(SelectiveCompiler.java:41)   at org.gradle.api.internal.tasks.compile.incremental.IncrementalResultStoringCompiler.execute(IncrementalResultStoringCompiler.java:66)     at org.gradle.api.internal.tasks.compile.incremental.IncrementalResultStoringCompiler.execute(IncrementalResultStoringCompiler.java:52)     at org.gradle.api.internal.tasks.compile.CompileJavaBuildOperationReportingCompiler$2.call(CompileJavaBuildOperationReportingCompiler.java:59)      at org.gradle.api.internal.tasks.compile.CompileJavaBuildOperationReportingCompiler$2.call(CompileJavaBuildOperationReportingCompiler.java:51)      at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:204)    at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:199)    at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)    at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)    at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)     at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)      at org.gradle.internal.operations.DefaultBuildOperationRunner.call(DefaultBuildOperationRunner.java:53)     at org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:73)     at org.gradle.api.internal.tasks.compile.CompileJavaBuildOperationReportingCompiler.execute(CompileJavaBuildOperationReportingCompiler.java:51)     at org.gradle.api.tasks.compile.JavaCompile.performCompilation(JavaCompile.java:279)    at org.gradle.api.tasks.compile.JavaCompile.performIncrementalCompilation(JavaCompile.java:165)     at org.gradle.api.tasks.compile.JavaCompile.compile(JavaCompile.java:146)   at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)   at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)     at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)     at java.base/java.lang.reflect.Method.invoke(Method.java:566)   at org.gradle.internal.reflect.JavaMethod.invoke(JavaMethod.java:104)   at org.gradle.api.internal.project.taskfactory.IncrementalInputsTaskAction.doExecute(IncrementalInputsTaskAction.java:32)   at org.gradle.api.internal.project.taskfactory.StandardTaskAction.execute(StandardTaskAction.java:51)   at org.gradle.api.internal.project.taskfactory.AbstractIncrementalTaskAction.execute(AbstractIncrementalTaskAction.java:25)     at org.gradle.api.internal.project.taskfactory.StandardTaskAction.execute(StandardTaskAction.java:29)   at org.gradle.api.internal.tasks.execution.TaskExecution$2.run(TaskExecution.java:239)      at org.gradle.internal.operations.DefaultBuildOperationRunner$1.execute(DefaultBuildOperationRunner.java:29)    at org.gradle.internal.operations.DefaultBuildOperationRunner$1.execute(DefaultBuildOperationRunner.java:26)    at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)    at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)    at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)     at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)      at org.gradle.internal.operations.DefaultBuildOperationRunner.run(DefaultBuildOperationRunner.java:47)      at org.gradle.internal.operations.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:68)      at org.gradle.api.internal.tasks.execution.TaskExecution.executeAction(TaskExecution.java:224)      at org.gradle.api.internal.tasks.execution.TaskExecution.executeActions(TaskExecution.java:207)     at org.gradle.api.internal.tasks.execution.TaskExecution.executeWithPreviousOutputFiles(TaskExecution.java:190)     at org.gradle.api.internal.tasks.execution.TaskExecution.execute(TaskExecution.java:168)    at org.gradle.internal.execution.steps.ExecuteStep.executeInternal(ExecuteStep.java:89)     at org.gradle.internal.execution.steps.ExecuteStep.access$000(ExecuteStep.java:40)      at org.gradle.internal.execution.steps.ExecuteStep$1.call(ExecuteStep.java:53)      at org.gradle.internal.execution.steps.ExecuteStep$1.call(ExecuteStep.java:50)      at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:204)    at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:199)    at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)    at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)    at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)     at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)      at org.gradle.internal.operations.DefaultBuildOperationRunner.call(DefaultBuildOperationRunner.java:53)     at org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:73)     at org.gradle.internal.execution.steps.ExecuteStep.execute(ExecuteStep.java:50)     at org.gradle.internal.execution.steps.ExecuteStep.execute(ExecuteStep.java:40)     at org.gradle.internal.execution.steps.RemovePreviousOutputsStep.execute(RemovePreviousOutputsStep.java:68)     at org.gradle.internal.execution.steps.RemovePreviousOutputsStep.execute(RemovePreviousOutputsStep.java:38)     at org.gradle.internal.execution.steps.ResolveInputChangesStep.execute(ResolveInputChangesStep.java:48)     at org.gradle.internal.execution.steps.ResolveInputChangesStep.execute(ResolveInputChangesStep.java:36)     at org.gradle.internal.execution.steps.CancelExecutionStep.execute(CancelExecutionStep.java:41)     at org.gradle.internal.execution.steps.TimeoutStep.executeWithoutTimeout(TimeoutStep.java:74)   at org.gradle.internal.execution.steps.TimeoutStep.execute(TimeoutStep.java:55)     at org.gradle.internal.execution.steps.CreateOutputsStep.execute(CreateOutputsStep.java:51)     at org.gradle.internal.execution.steps.CreateOutputsStep.execute(CreateOutputsStep.java:29)     at org.gradle.internal.execution.steps.CaptureStateAfterExecutionStep.execute(CaptureStateAfterExecutionStep.java:61)   at org.gradle.internal.execution.steps.CaptureStateAfterExecutionStep.execute(CaptureStateAfterExecutionStep.java:42)   at org.gradle.internal.execution.steps.BroadcastChangingOutputsStep.execute(BroadcastChangingOutputsStep.java:60)   at org.gradle.internal.execution.steps.BroadcastChangingOutputsStep.execute(BroadcastChangingOutputsStep.java:27)   at org.gradle.internal.execution.steps.BuildCacheStep.executeWithoutCache(BuildCacheStep.java:188)      at org.gradle.internal.execution.steps.BuildCacheStep.lambda$execute$1(BuildCacheStep.java:75)      at org.gradle.internal.Either$Right.fold(Either.java:175)   at org.gradle.internal.execution.caching.CachingState.fold(CachingState.java:59)    at org.gradle.internal.execution.steps.BuildCacheStep.execute(BuildCacheStep.java:73)   at org.gradle.internal.execution.steps.BuildCacheStep.execute(BuildCacheStep.java:48)   at org.gradle.internal.execution.steps.StoreExecutionStateStep.execute(StoreExecutionStateStep.java:38)     at org.gradle.internal.execution.steps.StoreExecutionStateStep.execute(StoreExecutionStateStep.java:27)     at org.gradle.internal.execution.steps.RecordOutputsStep.execute(RecordOutputsStep.java:36)     at org.gradle.internal.execution.steps.RecordOutputsStep.execute(RecordOutputsStep.java:22)     at org.gradle.internal.execution.steps.SkipUpToDateStep.executeBecause(SkipUpToDateStep.java:109)   at org.gradle.internal.execution.steps.SkipUpToDateStep.lambda$execute$2(SkipUpToDateStep.java:56)      at java.base/java.util.Optional.orElseGet(Optional.java:369)    at org.gradle.internal.execution.steps.SkipUpToDateStep.execute(SkipUpToDateStep.java:56)   at org.gradle.internal.execution.steps.SkipUpToDateStep.execute(SkipUpToDateStep.java:38)   at org.gradle.internal.execution.steps.ResolveChangesStep.execute(ResolveChangesStep.java:73)   at org.gradle.internal.execution.steps.ResolveChangesStep.execute(ResolveChangesStep.java:44)   at org.gradle.internal.execution.steps.legacy.MarkSnapshottingInputsFinishedStep.execute(MarkSnapshottingInputsFinishedStep.java:37)    at org.gradle.internal.execution.steps.legacy.MarkSnapshottingInputsFinishedStep.execute(MarkSnapshottingInputsFinishedStep.java:27)    at org.gradle.internal.execution.steps.ResolveCachingStateStep.execute(ResolveCachingStateStep.java:89)     at org.gradle.internal.execution.steps.ResolveCachingStateStep.execute(ResolveCachingStateStep.java:50)     at org.gradle.internal.execution.steps.ValidateStep.execute(ValidateStep.java:114)      at org.gradle.internal.execution.steps.ValidateStep.execute(ValidateStep.java:57)   at org.gradle.internal.execution.steps.CaptureStateBeforeExecutionStep.execute(CaptureStateBeforeExecutionStep.java:76)     at org.gradle.internal.execution.steps.CaptureStateBeforeExecutionStep.execute(CaptureStateBeforeExecutionStep.java:50)     at org.gradle.internal.execution.steps.SkipEmptyWorkStep.lambda$execute$2(SkipEmptyWorkStep.java:93)    at java.base/java.util.Optional.orElseGet(Optional.java:369)    at org.gradle.internal.execution.steps.SkipEmptyWorkStep.execute(SkipEmptyWorkStep.java:93)     at org.gradle.internal.execution.steps.SkipEmptyWorkStep.execute(SkipEmptyWorkStep.java:34)     at org.gradle.internal.execution.steps.legacy.MarkSnapshottingInputsStartedStep.execute(MarkSnapshottingInputsStartedStep.java:38)      at org.gradle.internal.execution.steps.LoadPreviousExecutionStateStep.execute(LoadPreviousExecutionStateStep.java:43)   at org.gradle.internal.execution.steps.LoadPreviousExecutionStateStep.execute(LoadPreviousExecutionStateStep.java:31)   at org.gradle.internal.execution.steps.AssignWorkspaceStep.lambda$execute$0(AssignWorkspaceStep.java:40)    at org.gradle.api.internal.tasks.execution.TaskExecution$3.withWorkspace(TaskExecution.java:284)    at org.gradle.internal.execution.steps.AssignWorkspaceStep.execute(AssignWorkspaceStep.java:40)     at org.gradle.internal.execution.steps.AssignWorkspaceStep.execute(AssignWorkspaceStep.java:30)     at org.gradle.internal.execution.steps.IdentityCacheStep.execute(IdentityCacheStep.java:37)     at org.gradle.internal.execution.steps.IdentityCacheStep.execute(IdentityCacheStep.java:27)     at org.gradle.internal.execution.steps.IdentifyStep.execute(IdentifyStep.java:44)   at org.gradle.internal.execution.steps.IdentifyStep.execute(IdentifyStep.java:33)   at org.gradle.internal.execution.impl.DefaultExecutionEngine$1.execute(DefaultExecutionEngine.java:76)      at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeIfValid(ExecuteActionsTaskExecuter.java:142)   at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:131)      at org.gradle.api.internal.tasks.execution.CleanupStaleOutputsExecuter.execute(CleanupStaleOutputsExecuter.java:77)     at org.gradle.api.internal.tasks.execution.FinalizePropertiesTaskExecuter.execute(FinalizePropertiesTaskExecuter.java:46)   at org.gradle.api.internal.tasks.execution.ResolveTaskExecutionModeExecuter.execute(ResolveTaskExecutionModeExecuter.java:51)   at org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.java:57)     at org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:56)   at org.gradle.api.internal.tasks.execution.CatchExceptionTaskExecuter.execute(CatchExceptionTaskExecuter.java:36)   at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.executeTask(EventFiringTaskExecuter.java:77)   at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.call(EventFiringTaskExecuter.java:55)      at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.call(EventFiringTaskExecuter.java:52)      at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:204)    at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:199)    at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)    at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)    at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)     at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)      at org.gradle.internal.operations.DefaultBuildOperationRunner.call(DefaultBuildOperationRunner.java:53)     at org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:73)     at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter.execute(EventFiringTaskExecuter.java:52)     at org.gradle.execution.plan.LocalTaskNodeExecutor.execute(LocalTaskNodeExecutor.java:74)   at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$InvokeNodeExecutorsAction.execute(DefaultTaskExecutionGraph.java:402)   at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$InvokeNodeExecutorsAction.execute(DefaultTaskExecutionGraph.java:389)   at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareExecutionAction.execute(DefaultTaskExecutionGraph.java:382)      at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareExecutionAction.execute(DefaultTaskExecutionGraph.java:368)      at org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.lambda$run$0(DefaultPlanExecutor.java:127)      at org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.execute(DefaultPlanExecutor.java:191)   at org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.executeNextNode(DefaultPlanExecutor.java:182)   at org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.run(DefaultPlanExecutor.java:124)   at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:64)   at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:48)    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)    at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:61)    at java.base/java.lang.Thread.run(Thread.java:829)  Caused by: javax.annotation.processing.FilerException: Attempt to recreate a file for type recipes.mapper.RecipeMapperImpl      at jdk.compiler/com.sun.tools.javac.processing.JavacFiler.checkNameAndExistence(JavacFiler.java:724)    at jdk.compiler/com.sun.tools.javac.processing.JavacFiler.createSourceOrClassFile(JavacFiler.java:489)      at jdk.compiler/com.sun.tools.javac.processing.JavacFiler.createSourceFile(JavacFiler.java:426)     at org.gradle.api.internal.tasks.compile.processing.IncrementalFiler.createSourceFile(IncrementalFiler.java:45)     at org.mapstruct.ap.internal.processor.MapperRenderingProcessor.createSourceFile(MapperRenderingProcessor.java:56)      ... 184 more\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/zDtOA.png\" rel=\"nofollow noreferrer\">image of error</a></p>\n"},{"tags":["java","xml","spring","maven","jsp"],"answers":[{"comments":[{"owner":{"account_id":14870544,"reputation":49,"user_id":10738174,"display_name":"Busra Sunar"},"score":0,"creation_date":1580733683,"post_id":60038895,"comment_id":106182558,"body_markdown":"thanks, I didn&#39;t really notice that. But that didn&#39;t solve my issue. I&#39;m still getting 404 not found when I&#39;m submitting to my form.","body":"thanks, I didn&#39;t really notice that. But that didn&#39;t solve my issue. I&#39;m still getting 404 not found when I&#39;m submitting to my form."},{"owner":{"account_id":10307070,"reputation":2201,"user_id":7604006,"accept_rate":60,"display_name":"NikNik"},"score":0,"creation_date":1580735901,"post_id":60038895,"comment_id":106183711,"body_markdown":"@noselessxXxXxX Is adding &quot;/&quot; in the &lt;form action=&quot;/add&quot;&gt; solving the issue?","body":"@noselessxXxXxX Is adding &quot;/&quot; in the &lt;form action=&quot;/add&quot;&gt; solving the issue?"},{"owner":{"account_id":14870544,"reputation":49,"user_id":10738174,"display_name":"Busra Sunar"},"score":0,"creation_date":1580738479,"post_id":60038895,"comment_id":106185169,"body_markdown":"@NikNik nope it didn&#39;t work but thank you for trying.","body":"@NikNik nope it didn&#39;t work but thank you for trying."}],"tags":[],"owner":{"account_id":17190715,"reputation":563,"user_id":12444527,"display_name":"Trushit Shekhda"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1580731763,"creation_date":1580731449,"answer_id":60038895,"question_id":60036205,"body_markdown":"return type : `void`\r\n\r\nrequired type : `String`\r\n\r\n**AddController.java** : \r\n\r\n    package com.telusko;\r\n    import org.springframework.stereotype.Controller;\r\n    import org.springframework.web.bind.annotation.RequestMapping;\r\n    \r\n    @Controller\r\n    public class addController {\r\n        @RequestMapping(&quot;/add&quot;)\r\n        public String add() {\r\n            return &quot;display.jsp&quot;;\r\n        }\r\n    }\r\nor else you can do this : \r\n\r\n    package com.telusko;\r\n    import org.springframework.stereotype.Controller;\r\n    import org.springframework.web.bind.annotation.RequestMapping;\r\n    \r\n    @Controller\r\n    public class addController {\r\n        @RequestMapping(&quot;/add&quot;)\r\n        public ModelAndView add() {\r\n            return new ModelAndView(&quot;display.jsp&quot;);\r\n        }\r\n    }","title":"WARNING: No mapping found for HTTP request with URI[] in DispatcherServlet with name []","body":"<p>return type : <code>void</code></p>\n\n<p>required type : <code>String</code></p>\n\n<p><strong>AddController.java</strong> : </p>\n\n<pre><code>package com.telusko;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.RequestMapping;\n\n@Controller\npublic class addController {\n    @RequestMapping(\"/add\")\n    public String add() {\n        return \"display.jsp\";\n    }\n}\n</code></pre>\n\n<p>or else you can do this : </p>\n\n<pre><code>package com.telusko;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.RequestMapping;\n\n@Controller\npublic class addController {\n    @RequestMapping(\"/add\")\n    public ModelAndView add() {\n        return new ModelAndView(\"display.jsp\");\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12978653,"reputation":316,"user_id":9381872,"display_name":"Berthol Yvano"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1580811361,"creation_date":1580810194,"answer_id":60054812,"question_id":60036205,"body_markdown":"This is the servlet you created. You have created a `telusko` servlet on the `DispatcherServlet` class. And then you mapped it with **`/`**. When the application starts, it does not find a function mapped to `/`. So you will have to readjust your web.xml file","title":"WARNING: No mapping found for HTTP request with URI[] in DispatcherServlet with name []","body":"<p>This is the servlet you created. You have created a <code>telusko</code> servlet on the <code>DispatcherServlet</code> class. And then you mapped it with <strong><code>/</code></strong>. When the application starts, it does not find a function mapped to <code>/</code>. So you will have to readjust your web.xml file</p>\n"},{"tags":[],"owner":{"account_id":14870544,"reputation":49,"user_id":10738174,"display_name":"Busra Sunar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1580890456,"creation_date":1580890456,"answer_id":60071507,"question_id":60036205,"body_markdown":"After two days I have finally decided to create a new project and start from new. I guess i had some configuration problems because after I created my new project everything worked smoothly but thanks for your answers.","title":"WARNING: No mapping found for HTTP request with URI[] in DispatcherServlet with name []","body":"<p>After two days I have finally decided to create a new project and start from new. I guess i had some configuration problems because after I created my new project everything worked smoothly but thanks for your answers.</p>\n"},{"tags":[],"owner":{"account_id":26314862,"reputation":41,"user_id":19977803,"display_name":"Heena Patidar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695225886,"creation_date":1695225886,"answer_id":77144205,"question_id":60036205,"body_markdown":"internalResourceViewResolver bean in servlet could resolve this issue. The InternalResourceViewResolver is a class typically used in a Spring MVC web application to resolve view names to actual view implementations. \r\n\r\n    &lt;bean name=&quot;internalResourceViewResolver&quot; class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt;\r\n        \t&lt;property name=&quot;prefix&quot;&gt;\r\n        \t\t&lt;value&gt;/WEB-INF/views/&lt;/value&gt;\r\n        \t&lt;/property&gt;\r\n        \t&lt;property name=&quot;suffix&quot;&gt;\r\n        \t\t&lt;value&gt;.jsp&lt;/value&gt;\r\n        \t&lt;/property&gt;\r\n        &lt;/bean&gt;","title":"WARNING: No mapping found for HTTP request with URI[] in DispatcherServlet with name []","body":"<p>internalResourceViewResolver bean in servlet could resolve this issue. The InternalResourceViewResolver is a class typically used in a Spring MVC web application to resolve view names to actual view implementations.</p>\n<pre><code>&lt;bean name=&quot;internalResourceViewResolver&quot; class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt;\n        &lt;property name=&quot;prefix&quot;&gt;\n            &lt;value&gt;/WEB-INF/views/&lt;/value&gt;\n        &lt;/property&gt;\n        &lt;property name=&quot;suffix&quot;&gt;\n            &lt;value&gt;.jsp&lt;/value&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n</code></pre>\n"}],"owner":{"account_id":14870544,"reputation":49,"user_id":10738174,"display_name":"Busra Sunar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1483,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":60054812,"answer_count":4,"score":1,"last_activity_date":1695225886,"creation_date":1580721557,"question_id":60036205,"body_markdown":"I&#39;m really new to Spring framework and I&#39;m struggling why I&#39;m getting this warning. I have looked at the questions at StackOverflow and coderanch but it seems that I can&#39;t find my error. I even tried to watch a youtube Spring MVC tutorial twice and I&#39;m doing the same thing as the Youtuber does but I&#39;m still getting this error. I would really appreciate it if you guys could help me. I will put my codes below.\r\n\r\n**pom.xml**\r\n```&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\r\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n  &lt;groupId&gt;com.telusko&lt;/groupId&gt;\r\n  &lt;artifactId&gt;DemoMVC2&lt;/artifactId&gt;\r\n  &lt;packaging&gt;war&lt;/packaging&gt;\r\n  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n  &lt;name&gt;DemoMVC2 Maven Webapp&lt;/name&gt;\r\n  &lt;url&gt;http://maven.apache.org&lt;/url&gt;\r\n  &lt;dependencies&gt;\r\n     &lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;junit&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.8.1&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-context&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.1.8.RELEASE&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.1.8.RELEASE&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;mysql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;5.1.36&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jstl&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.2&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n  &lt;/dependencies&gt;\r\n  &lt;build&gt;\r\n    &lt;finalName&gt;DemoMVC2&lt;/finalName&gt;\r\n  &lt;/build&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\n**web.xml**\r\n```\r\n&lt;!DOCTYPE web-app PUBLIC\r\n &quot;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&quot;\r\n &quot;http://java.sun.com/dtd/web-app_2_3.dtd&quot; &gt;\r\n\r\n&lt;web-app&gt;\r\n  &lt;display-name&gt;Archetype Created Web Application&lt;/display-name&gt;\r\n  \r\n  &lt;servlet&gt;\r\n\t\t&lt;servlet-name&gt;telusko&lt;/servlet-name&gt;\r\n\t\t&lt;servlet-class&gt;\r\n\t\t\torg.springframework.web.servlet.DispatcherServlet\r\n\t\t&lt;/servlet-class&gt;\r\n\t&lt;/servlet&gt;\r\n\t&lt;servlet-mapping&gt;\r\n\t\t&lt;servlet-name&gt;telusko&lt;/servlet-name&gt;\r\n\t\t&lt;url-pattern&gt;/&lt;/url-pattern&gt;\r\n\t&lt;/servlet-mapping&gt;\r\n&lt;/web-app&gt;\r\n```\r\n\r\n**telusko-servlet.xml**\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n\txmlns:ctx=&quot;http://www.springframework.org/schema/context&quot;\r\n\txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot;\r\n\txsi:schemaLocation=&quot;http://www.springframework.org/schema/beans \r\n\thttp://www.springframework.org/schema/beans/spring-beans-2.5.xsd\r\n\thttp://www.springframework.org/schema/mvc\r\n\thttp://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd\r\n\thttp://www.springframework.org/schema/context\r\n\thttp://www.springframework.org/schema/context/spring-context-2.5.xsd &quot;&gt;\r\n\t\r\n\t\r\n\t&lt;mvc:annotation-driven/&gt;\r\n\t&lt;ctx:component-scan base-package=&quot;com.telusko&quot;&gt;&lt;/ctx:component-scan&gt;\r\n&lt;/beans&gt;\r\n```\r\n**index.jsp**\r\n```\r\n&lt;html&gt;\r\n&lt;body&gt;\r\n&lt;form action=&quot;add&quot;&gt;\r\n\t&lt;input type=&quot;text&quot; name=&quot;t1&quot;&gt;&lt;/input&gt;&lt;br&gt;\r\n\t&lt;input type=&quot;text&quot; name=&quot;t2&quot;&gt;&lt;/input&gt;&lt;br&gt;\r\n\t&lt;input type=&quot;submit&quot;&gt;&lt;/input&gt;\r\n&lt;/form&gt;\r\n&lt;/body&gt;\r\n&lt;/html&gt;\r\n ```\r\n\r\n**addController.java**\r\n```\r\npackage com.telusko;\r\n\r\nimport org.springframework.stereotype.Controller;\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\n\r\n@Controller\r\npublic class addController {\r\n\t@RequestMapping(&quot;/add&quot;)\r\n\tpublic void add() {\r\n\t\treturn &quot;display.jsp&quot;;\r\n\t}\r\n}\r\n```\r\n**display.jsp**\r\n```\r\n&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=ISO-8859-1&quot;\r\n    pageEncoding=&quot;ISO-8859-1&quot;%&gt;\r\n&lt;!DOCTYPE html&gt;\r\n&lt;html&gt;\r\n&lt;head&gt;\r\n&lt;meta charset=&quot;ISO-8859-1&quot;&gt;\r\n&lt;title&gt;Insert title here&lt;/title&gt;\r\n&lt;/head&gt;\r\n&lt;body&gt;\r\n\r\n\tI&#39;m here\r\n\r\n&lt;/body&gt;\r\n&lt;/html&gt;\r\n```\r\n\r\n","title":"WARNING: No mapping found for HTTP request with URI[] in DispatcherServlet with name []","body":"<p>I'm really new to Spring framework and I'm struggling why I'm getting this warning. I have looked at the questions at StackOverflow and coderanch but it seems that I can't find my error. I even tried to watch a youtube Spring MVC tutorial twice and I'm doing the same thing as the Youtuber does but I'm still getting this error. I would really appreciate it if you guys could help me. I will put my codes below.</p>\n\n<p><strong>pom.xml</strong></p>\n\n<pre><code>  xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd\"&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n  &lt;groupId&gt;com.telusko&lt;/groupId&gt;\n  &lt;artifactId&gt;DemoMVC2&lt;/artifactId&gt;\n  &lt;packaging&gt;war&lt;/packaging&gt;\n  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n  &lt;name&gt;DemoMVC2 Maven Webapp&lt;/name&gt;\n  &lt;url&gt;http://maven.apache.org&lt;/url&gt;\n  &lt;dependencies&gt;\n     &lt;dependency&gt;\n            &lt;groupId&gt;junit&lt;/groupId&gt;\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\n            &lt;version&gt;3.8.1&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\n            &lt;version&gt;4.1.8.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\n            &lt;version&gt;4.1.8.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n            &lt;version&gt;5.1.36&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n            &lt;artifactId&gt;jstl&lt;/artifactId&gt;\n            &lt;version&gt;1.2&lt;/version&gt;\n        &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n  &lt;build&gt;\n    &lt;finalName&gt;DemoMVC2&lt;/finalName&gt;\n  &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n\n<p><strong>web.xml</strong></p>\n\n<pre><code>&lt;!DOCTYPE web-app PUBLIC\n \"-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN\"\n \"http://java.sun.com/dtd/web-app_2_3.dtd\" &gt;\n\n&lt;web-app&gt;\n  &lt;display-name&gt;Archetype Created Web Application&lt;/display-name&gt;\n\n  &lt;servlet&gt;\n        &lt;servlet-name&gt;telusko&lt;/servlet-name&gt;\n        &lt;servlet-class&gt;\n            org.springframework.web.servlet.DispatcherServlet\n        &lt;/servlet-class&gt;\n    &lt;/servlet&gt;\n    &lt;servlet-mapping&gt;\n        &lt;servlet-name&gt;telusko&lt;/servlet-name&gt;\n        &lt;url-pattern&gt;/&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n&lt;/web-app&gt;\n</code></pre>\n\n<p><strong>telusko-servlet.xml</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n    xmlns:ctx=\"http://www.springframework.org/schema/context\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xmlns:mvc=\"http://www.springframework.org/schema/mvc\"\n    xsi:schemaLocation=\"http://www.springframework.org/schema/beans \n    http://www.springframework.org/schema/beans/spring-beans-2.5.xsd\n    http://www.springframework.org/schema/mvc\n    http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd\n    http://www.springframework.org/schema/context\n    http://www.springframework.org/schema/context/spring-context-2.5.xsd \"&gt;\n\n\n    &lt;mvc:annotation-driven/&gt;\n    &lt;ctx:component-scan base-package=\"com.telusko\"&gt;&lt;/ctx:component-scan&gt;\n&lt;/beans&gt;\n</code></pre>\n\n<p><strong>index.jsp</strong></p>\n\n<pre><code>&lt;html&gt;\n&lt;body&gt;\n&lt;form action=\"add\"&gt;\n    &lt;input type=\"text\" name=\"t1\"&gt;&lt;/input&gt;&lt;br&gt;\n    &lt;input type=\"text\" name=\"t2\"&gt;&lt;/input&gt;&lt;br&gt;\n    &lt;input type=\"submit\"&gt;&lt;/input&gt;\n&lt;/form&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p><strong>addController.java</strong></p>\n\n<pre><code>package com.telusko;\n\nimport org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.RequestMapping;\n\n@Controller\npublic class addController {\n    @RequestMapping(\"/add\")\n    public void add() {\n        return \"display.jsp\";\n    }\n}\n</code></pre>\n\n<p><strong>display.jsp</strong></p>\n\n<pre><code>&lt;%@ page language=\"java\" contentType=\"text/html; charset=ISO-8859-1\"\n    pageEncoding=\"ISO-8859-1\"%&gt;\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;meta charset=\"ISO-8859-1\"&gt;\n&lt;title&gt;Insert title here&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n\n    I'm here\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n"},{"tags":["java","swing","jtable"],"comments":[{"owner":{"account_id":8362430,"reputation":856,"user_id":6280255,"display_name":"Just another Java programmer"},"score":2,"creation_date":1694633362,"post_id":77099876,"comment_id":135918461,"body_markdown":"You don&#39;t show how the updates to the model and scrolling are done. Are you making sure that those changes are done in AWT event thread?","body":"You don&#39;t show how the updates to the model and scrolling are done. Are you making sure that those changes are done in AWT event thread?"},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1694633945,"post_id":77099876,"comment_id":135918573,"body_markdown":"Have you reviewed the tutorial? _[How to Use Scroll Panes (The Java™ Tutorials &gt; Creating a GUI With Swing &gt; Using Swing Components)](https://docs.oracle.com/javase/tutorial/uiswing/components/scrollpane.html)_.","body":"Have you reviewed the tutorial? <i><a href=\"https://docs.oracle.com/javase/tutorial/uiswing/components/scrollpane.html\" rel=\"nofollow noreferrer\">How to Use Scroll Panes (The Java™ Tutorials &gt; Creating a GUI With Swing &gt; Using Swing Components)</a></i>."},{"owner":{"account_id":8648244,"reputation":367,"user_id":6474819,"accept_rate":89,"display_name":"M. Rogers"},"score":0,"creation_date":1694634472,"post_id":77099876,"comment_id":135918648,"body_markdown":"@JustanotherJavaprogrammer Yes I confirmed it&#39;s getting executed on AWT Event Thread.","body":"@JustanotherJavaprogrammer Yes I confirmed it&#39;s getting executed on AWT Event Thread."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":2,"creation_date":1694637745,"post_id":77099876,"comment_id":135919206,"body_markdown":"Post an [mre] demonstrating the problem. We can&#39;t guess what your application is doing.","body":"Post an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> demonstrating the problem. We can&#39;t guess what your application is doing."},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1694642000,"post_id":77099876,"comment_id":135919823,"body_markdown":"I did a quick test, loading a file with 8150 lines and then paging through the table a screen full at a time without issue. Without a [mcve], there&#39;s not much more we can do for you","body":"I did a quick test, loading a file with 8150 lines and then paging through the table a screen full at a time without issue. Without a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, there&#39;s not much more we can do for you"}],"answers":[{"tags":[],"owner":{"account_id":8648244,"reputation":367,"user_id":6474819,"accept_rate":89,"display_name":"M. Rogers"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695224734,"creation_date":1695224734,"answer_id":77144091,"question_id":77099876,"body_markdown":"By calling a manual repaint fixed the issue. \r\n\r\n    jTable1.setRowSelectionInterval(index, index);\r\n    int viewPortIndex = index+3 &gt; jTable1.getRowCount()-1 ? jTable1.getRowCount()-1 : index+3;\r\n    jTable1.scrollRectToVisible(new Rectangle(jTable1.getCellRect(viewPortIndex, 0, true)));\r\n    jTable1.repaint();\r\n\r\nIt&#39;s probably not the cleanest solution but it worked in my case.","title":"Java JTable &quot;scrollRectToVisible&quot; Bad Graphics?","body":"<p>By calling a manual repaint fixed the issue.</p>\n<pre><code>jTable1.setRowSelectionInterval(index, index);\nint viewPortIndex = index+3 &gt; jTable1.getRowCount()-1 ? jTable1.getRowCount()-1 : index+3;\njTable1.scrollRectToVisible(new Rectangle(jTable1.getCellRect(viewPortIndex, 0, true)));\njTable1.repaint();\n</code></pre>\n<p>It's probably not the cleanest solution but it worked in my case.</p>\n"}],"owner":{"account_id":8648244,"reputation":367,"user_id":6474819,"accept_rate":89,"display_name":"M. Rogers"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695224734,"creation_date":1694631877,"question_id":77099876,"body_markdown":"I am trying to consectively scroll a JTable, and scroll to the given cell by index with the following code...\r\n\r\n    public void UpdateCurrentStep(final int index) {\r\n        jTable1.setRowSelectionInterval(index, index);\r\n        int viewPortIndex = index+3 &gt; jTable1.getRowCount()-1 ? jTable1.getRowCount()-1 : index+3;\r\n        jTable1.scrollRectToVisible(new Rectangle(jTable1.getCellRect(viewPortIndex, 0, true)));\r\n    }\r\n\r\nThis scrolls like you would expect. However, occasionally when the JTable updates the graphics can get pretty bad and sometimes unreadable (Shown below).\r\n\r\nNormal Refresh:\r\n[![enter image description here][1]][1]\r\n\r\nBad Refresh:\r\n[![enter image description here][2]][2]\r\n\r\nThe problem is inconsistent. Any ideas or suggestions how to fix this would be appreciated.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/C5G4I.png\r\n  [2]: https://i.stack.imgur.com/cmw56.png","title":"Java JTable &quot;scrollRectToVisible&quot; Bad Graphics?","body":"<p>I am trying to consectively scroll a JTable, and scroll to the given cell by index with the following code...</p>\n<pre><code>public void UpdateCurrentStep(final int index) {\n    jTable1.setRowSelectionInterval(index, index);\n    int viewPortIndex = index+3 &gt; jTable1.getRowCount()-1 ? jTable1.getRowCount()-1 : index+3;\n    jTable1.scrollRectToVisible(new Rectangle(jTable1.getCellRect(viewPortIndex, 0, true)));\n}\n</code></pre>\n<p>This scrolls like you would expect. However, occasionally when the JTable updates the graphics can get pretty bad and sometimes unreadable (Shown below).</p>\n<p>Normal Refresh:\n<a href=\"https://i.stack.imgur.com/C5G4I.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/C5G4I.png\" alt=\"enter image description here\" /></a></p>\n<p>Bad Refresh:\n<a href=\"https://i.stack.imgur.com/cmw56.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cmw56.png\" alt=\"enter image description here\" /></a></p>\n<p>The problem is inconsistent. Any ideas or suggestions how to fix this would be appreciated.</p>\n"},{"tags":["java","snapshot","rational-team-concert"],"comments":[{"owner":{"account_id":22351107,"reputation":33,"user_id":16569213,"display_name":"angelo"},"score":0,"creation_date":1695053664,"post_id":77124017,"comment_id":135969656,"body_markdown":"i mean that code is for workitems, i can&#39;t adapt it for snapshot.","body":"i mean that code is for workitems, i can&#39;t adapt it for snapshot."}],"owner":{"account_id":22351107,"reputation":33,"user_id":16569213,"display_name":"angelo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":0,"score":1,"last_activity_date":1695224527,"creation_date":1694995751,"question_id":77124017,"body_markdown":"How can I get the date of a snapshot in rtc (EWM) using API in Java?\r\nI found this:\r\n\r\n```java\r\n    IWorkItem workItem = workItemClient.findWorkItemById(id, IWorkItem.FULL_PROFILE, monitor);\r\n    System.out.println(&quot;Last modified date: &quot;+workItem.modified()+&quot;\\n&quot;);\r\n\r\n    IItemManager itm = teamRepository.itemManager(); \r\n    List history = itm.fetchAllStateHandles((IAuditableHandle) workItem.getStateHandle(), monitor);\r\n    System.out.println(&quot;Record history details:-&quot;);\r\n    for(int i = history.size() -1; i &gt;= 0; i--){\r\n        IAuditableHandle audit = (IAuditableHandle) history.get(i);\r\n        IWorkItem workItemPrevious = (IWorkItem) teamRepository.itemManager().fetchCompleteState(audit,null);\r\n        Date recordModifiedDate = workItemPrevious.modified();\r\n        System.out.println(&quot;Record modification date: &quot;+recordModifiedDate);\r\n    }\r\n```\r\n\r\nbut it is for work items. I was unable to adapt it for snapshots.","title":"Using RTC Java API, how to get the date of snapshot","body":"<p>How can I get the date of a snapshot in rtc (EWM) using API in Java?\nI found this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    IWorkItem workItem = workItemClient.findWorkItemById(id, IWorkItem.FULL_PROFILE, monitor);\n    System.out.println(&quot;Last modified date: &quot;+workItem.modified()+&quot;\\n&quot;);\n\n    IItemManager itm = teamRepository.itemManager(); \n    List history = itm.fetchAllStateHandles((IAuditableHandle) workItem.getStateHandle(), monitor);\n    System.out.println(&quot;Record history details:-&quot;);\n    for(int i = history.size() -1; i &gt;= 0; i--){\n        IAuditableHandle audit = (IAuditableHandle) history.get(i);\n        IWorkItem workItemPrevious = (IWorkItem) teamRepository.itemManager().fetchCompleteState(audit,null);\n        Date recordModifiedDate = workItemPrevious.modified();\n        System.out.println(&quot;Record modification date: &quot;+recordModifiedDate);\n    }\n</code></pre>\n<p>but it is for work items. I was unable to adapt it for snapshots.</p>\n"},{"tags":["java","hashmap","collectors"],"comments":[{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":0,"creation_date":1695221908,"post_id":77143664,"comment_id":135996083,"body_markdown":"You definitely need a third map as none of the input maps are a `Map&lt;String, Values&gt;`.","body":"You definitely need a third map as none of the input maps are a <code>Map&lt;String, Values&gt;</code>."},{"owner":{"account_id":11104856,"reputation":1527,"user_id":8152324,"display_name":"ndc85430"},"score":0,"creation_date":1695222292,"post_id":77143664,"comment_id":135996188,"body_markdown":"Can you show what you tried and where you got stuck?","body":"Can you show what you tried and where you got stuck?"},{"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1695224962,"post_id":77143664,"comment_id":135996856,"body_markdown":"Using static initializers for maps is considered bad form. I changed it to use `Map.of` which was introduced in Java 9.","body":"Using static initializers for maps is considered bad form. I changed it to use <code>Map.of</code> which was introduced in Java 9."}],"answers":[{"tags":[],"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1695222250,"creation_date":1695222250,"answer_id":77143736,"question_id":77143664,"body_markdown":"Just iterate over one of the input `Map`s:\r\n```\r\n    private static Map&lt;String, Values&gt; mergeMaps(Map&lt;String, Double&gt; map1Map&lt;String, Double&gt; map2) {\r\n        Map&lt;String, Values&gt; result = new HashMap&lt;&gt;();\r\n        for(Map.Entry&lt;String, Double&gt; e1:map1.entrySet()) {\r\n            BigDecimal a = BigDecimal.valueOf(e1.getValue());\r\n            BigDecimal b = BigDecimal.valueOf(map2.get(e1.getKey()));\r\n            result.put(e1.getKey(), new Values(a, b));\r\n        }\r\n        return result;\r\n    }\r\n```\r\n\r\nThis makes use of a AllArgsConstructor of `Values` which can be easily done if you make use of java&#39;s `record`:\r\n\r\n```\r\npublic record Values (BigDecimal a, BigDecimal b){}\r\n```\r\n\r\nPlease note that this code assumes that both input maps have the same set of keys.","title":"Merging two hashmaps with their values combined as object of specific class","body":"<p>Just iterate over one of the input <code>Map</code>s:</p>\n<pre><code>    private static Map&lt;String, Values&gt; mergeMaps(Map&lt;String, Double&gt; map1Map&lt;String, Double&gt; map2) {\n        Map&lt;String, Values&gt; result = new HashMap&lt;&gt;();\n        for(Map.Entry&lt;String, Double&gt; e1:map1.entrySet()) {\n            BigDecimal a = BigDecimal.valueOf(e1.getValue());\n            BigDecimal b = BigDecimal.valueOf(map2.get(e1.getKey()));\n            result.put(e1.getKey(), new Values(a, b));\n        }\n        return result;\n    }\n</code></pre>\n<p>This makes use of a AllArgsConstructor of <code>Values</code> which can be easily done if you make use of java's <code>record</code>:</p>\n<pre><code>public record Values (BigDecimal a, BigDecimal b){}\n</code></pre>\n<p>Please note that this code assumes that both input maps have the same set of keys.</p>\n"},{"tags":[],"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695224207,"creation_date":1695223305,"answer_id":77143894,"question_id":77143664,"body_markdown":"As [@f1sh](https://stackoverflow.com/a/77143736/1552534) suggested, just use one map and use its key to get the other value from the second map.  Here is a stream approach.\r\n```\r\nMap&lt;String, Values&gt; map = map1.entrySet().stream()\r\n         .collect(Collectors.toMap(Entry::getKey,\r\n                 e -&gt; new Values(BigDecimal.valueOf(e.getValue()),\r\n                         BigDecimal.valueOf(map2.get(e.getKey())))));\r\n\r\n map.entrySet().forEach(System.out::println);\r\n```\r\nprints\r\n```\r\nA=123.1, 543.5\r\nB=345.2, 432.2\r\nC=678.3, 654.3\r\n","title":"Merging two hashmaps with their values combined as object of specific class","body":"<p>As <a href=\"https://stackoverflow.com/a/77143736/1552534\">@f1sh</a> suggested, just use one map and use its key to get the other value from the second map.  Here is a stream approach.</p>\n<pre><code>Map&lt;String, Values&gt; map = map1.entrySet().stream()\n         .collect(Collectors.toMap(Entry::getKey,\n                 e -&gt; new Values(BigDecimal.valueOf(e.getValue()),\n                         BigDecimal.valueOf(map2.get(e.getKey())))));\n\n map.entrySet().forEach(System.out::println);\n</code></pre>\n<p>prints</p>\n<pre><code>A=123.1, 543.5\nB=345.2, 432.2\nC=678.3, 654.3\n</code></pre>\n"}],"owner":{"account_id":29490881,"reputation":13,"user_id":22599915,"display_name":"Alexander Konev"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77143736,"answer_count":2,"score":1,"last_activity_date":1695224358,"creation_date":1695221628,"question_id":77143664,"body_markdown":"I have a class like\r\n\r\n```\r\npublic class Values {\r\n\r\n    BigDecimal a;\r\n    BigDecimal b;\r\n}\r\n```\r\nAnd two maps with the same keys like\r\n```\r\nMap&lt;String, Double&gt; map1 = Map.of(&quot;A&quot;, 123.1, &quot;B&quot;, 345.2, &quot;C&quot;, 678.3);\r\n\r\nMap&lt;String, Double&gt; map2 = Map.of(&quot;A&quot;, 543.5, &quot;B&quot;, 432.2, &quot;C&quot;, 654.3);\r\n```\r\n\r\nI want to merge those maps into one `Map&lt;String, Values&gt;` converting `Doubles` to `BigDecimals` on the way How can I achieve that? And maybe it&#39;s even possible without explicitly creating third map? \r\n\r\n\r\nExample of desired output (`Doubles` are now `BigDecimals` as fields a and b of Values class)\r\n\r\n```\r\nMap&lt;String, Values&gt; map3\r\n&quot;A&quot;, {123.1, 543.5}\r\n&quot;B&quot;, {345.2, 345.2}\r\n&quot;C&quot;, {678.3, 654.3}\r\n```\r\n\r\n\r\n\r\n\r\nTried solutions from close topics with stream and collectors and i guess i just cant figure it out. \r\n","title":"Merging two hashmaps with their values combined as object of specific class","body":"<p>I have a class like</p>\n<pre><code>public class Values {\n\n    BigDecimal a;\n    BigDecimal b;\n}\n</code></pre>\n<p>And two maps with the same keys like</p>\n<pre><code>Map&lt;String, Double&gt; map1 = Map.of(&quot;A&quot;, 123.1, &quot;B&quot;, 345.2, &quot;C&quot;, 678.3);\n\nMap&lt;String, Double&gt; map2 = Map.of(&quot;A&quot;, 543.5, &quot;B&quot;, 432.2, &quot;C&quot;, 654.3);\n</code></pre>\n<p>I want to merge those maps into one <code>Map&lt;String, Values&gt;</code> converting <code>Doubles</code> to <code>BigDecimals</code> on the way How can I achieve that? And maybe it's even possible without explicitly creating third map?</p>\n<p>Example of desired output (<code>Doubles</code> are now <code>BigDecimals</code> as fields a and b of Values class)</p>\n<pre><code>Map&lt;String, Values&gt; map3\n&quot;A&quot;, {123.1, 543.5}\n&quot;B&quot;, {345.2, 345.2}\n&quot;C&quot;, {678.3, 654.3}\n</code></pre>\n<p>Tried solutions from close topics with stream and collectors and i guess i just cant figure it out.</p>\n"},{"tags":["java","inheritance","static-import"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":1,"creation_date":1695204472,"post_id":77141362,"comment_id":135991901,"body_markdown":"Some lines of code are better than a long description","body":"Some lines of code are better than a long description"},{"owner":{"account_id":5150443,"reputation":34158,"user_id":4125191,"display_name":"RealSkeptic"},"score":6,"creation_date":1695204507,"post_id":77141362,"comment_id":135991913,"body_markdown":"You can&#39;t do that. An import is not inherited. It makes no sense. An import is merely saying &quot;I want to use a shorter name for these classes/methods in this file&quot;.","body":"You can&#39;t do that. An import is not inherited. It makes no sense. An import is merely saying &quot;I want to use a shorter name for these classes/methods in this file&quot;."},{"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"score":0,"creation_date":1695205399,"post_id":77141362,"comment_id":135992087,"body_markdown":"Not to your question, but **please** change `NL` to use `System.lineSeparator();` -- hardcoding for Windows is not a best practice.","body":"Not to your question, but <b>please</b> change <code>NL</code> to use <code>System.lineSeparator();</code> -- hardcoding for Windows is not a best practice."},{"owner":{"account_id":2622976,"reputation":4185,"user_id":2270610,"accept_rate":80,"display_name":"Lo&#239;c Gammaitoni"},"score":0,"creation_date":1695205461,"post_id":77141362,"comment_id":135992095,"body_markdown":"@Eliott, it&#39;s not windows related. It&#39;s actually for Jira at the moment, but we want to centralize those formatting rules to make the migration easier in case we decide not to use jira anymore","body":"@Eliott, it&#39;s not windows related. It&#39;s actually for Jira at the moment, but we want to centralize those formatting rules to make the migration easier in case we decide not to use jira anymore"},{"owner":{"account_id":2622976,"reputation":4185,"user_id":2270610,"accept_rate":80,"display_name":"Lo&#239;c Gammaitoni"},"score":0,"creation_date":1695205749,"post_id":77141362,"comment_id":135992151,"body_markdown":"@RealSkeptic Makes sense, I&#39;m so not used to write imports (as they are automatically generated) that I thought what was already imported in the abstract class was directly accessible to the children classes (as I imagined children classes as a direct extension of the mother class).\nHow would you solve this problem then ?is there any paradigm I&#39;m unfamiliar with that could be used there ?\n\nThat&#39;s why I&#39;d expect the static imports to be visible &quot;usable&quot; in the children classes","body":"@RealSkeptic Makes sense, I&#39;m so not used to write imports (as they are automatically generated) that I thought what was already imported in the abstract class was directly accessible to the children classes (as I imagined children classes as a direct extension of the mother class). How would you solve this problem then ?is there any paradigm I&#39;m unfamiliar with that could be used there ?  That&#39;s why I&#39;d expect the static imports to be visible &quot;usable&quot; in the children classes"},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1695208334,"post_id":77141362,"comment_id":135992681,"body_markdown":"I would just type the name of the method and then let the IDE suggest the import and accept that suggestion. Also for future reference, if people make suggestion in the comments, 1) don&#39;t make assumptions they are the downvoter (you have no way of knowing that unless they explicitly say they downvoted you), and 2) don&#39;t include snarky replies/comments in your edit: that will only invite more downvotes and is unlikely to get your question reopened (not to mention that it is technically a violation of the &quot;be nice&quot; policy, and could get you suspended).","body":"I would just type the name of the method and then let the IDE suggest the import and accept that suggestion. Also for future reference, if people make suggestion in the comments, 1) don&#39;t make assumptions they are the downvoter (you have no way of knowing that unless they explicitly say they downvoted you), and 2) don&#39;t include snarky replies/comments in your edit: that will only invite more downvotes and is unlikely to get your question reopened (not to mention that it is technically a violation of the &quot;be nice&quot; policy, and could get you suspended)."},{"owner":{"account_id":5998820,"reputation":12676,"user_id":4712734,"display_name":"DuncG"},"score":0,"creation_date":1695209650,"post_id":77141362,"comment_id":135992969,"body_markdown":"I&#39;ve known programmers that would use ` interface FormatHelper` with final static fields, default methods (replace static), and then add `implements FormatHelper` everywhere. It does what you asked for but IMO style is ugly (and I would fail it in code review), These days &quot;import static FormatHelper.* with good IDE code organiser will cleanup the dependencies neatly.","body":"I&#39;ve known programmers that would use ` interface FormatHelper` with final static fields, default methods (replace static), and then add <code>implements FormatHelper</code> everywhere. It does what you asked for but IMO style is ugly (and I would fail it in code review), These days &quot;import static FormatHelper.* with good IDE code organiser will cleanup the dependencies neatly."},{"owner":{"account_id":2622976,"reputation":4185,"user_id":2270610,"accept_rate":80,"display_name":"Lo&#239;c Gammaitoni"},"score":0,"creation_date":1695209842,"post_id":77141362,"comment_id":135993001,"body_markdown":"@DuncG Thanks for your input. To tell you the truth, I thought of doing it, but it doesn&#39;t really work in my case as I have also methods I&#39;d like to share that way.\n\nAt the end of the day, I think I&#39;ll refactorize this Helper into a Builder class. It&#39;s a bit more effort, but it&#39;s certainly what&#39;s cleanest.\nThat builder can then be instantiated once in the abstract class and once in each other class that used to refer to the helper.","body":"@DuncG Thanks for your input. To tell you the truth, I thought of doing it, but it doesn&#39;t really work in my case as I have also methods I&#39;d like to share that way.  At the end of the day, I think I&#39;ll refactorize this Helper into a Builder class. It&#39;s a bit more effort, but it&#39;s certainly what&#39;s cleanest. That builder can then be instantiated once in the abstract class and once in each other class that used to refer to the helper."},{"owner":{"account_id":5998820,"reputation":12676,"user_id":4712734,"display_name":"DuncG"},"score":0,"creation_date":1695215170,"post_id":77141362,"comment_id":135994303,"body_markdown":"@Lo&#239;cGammaitoni - methods also work via the interface, but `bold` would have to be `default` rather than `static`","body":"@Lo&#239;cGammaitoni - methods also work via the interface, but <code>bold</code> would have to be <code>default</code> rather than <code>static</code>"},{"owner":{"account_id":2622976,"reputation":4185,"user_id":2270610,"accept_rate":80,"display_name":"Lo&#239;c Gammaitoni"},"score":0,"creation_date":1695216290,"post_id":77141362,"comment_id":135994617,"body_markdown":"ooh, I wasn&#39;t aware the keyword default was a thing. That&#39;s actually pretty neat. Thanks for the pointer.","body":"ooh, I wasn&#39;t aware the keyword default was a thing. That&#39;s actually pretty neat. Thanks for the pointer."}],"answers":[{"tags":[],"owner":{"account_id":5998820,"reputation":12676,"user_id":4712734,"display_name":"DuncG"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1695224293,"creation_date":1695223108,"answer_id":77143855,"question_id":77141362,"body_markdown":"Another way you could specify the format helper code is in an interface. You would need to change the static methods to default methods to allow the methods to be accessible in other classes without `ClassName.` prefix:\r\n\r\n    public interface FormatHelper {\r\n        public static final String NL= System.lineSeparator() ; // or &quot;\\r\\n&quot; if targetting Windows from non-Windows\r\n    \r\n        public default String bold(String val) {\r\n            return &quot;*&quot; + val + &quot;*&quot;;\r\n        }\r\n    \r\n        public default String underline(String val) {\r\n            return &quot;+&quot; + val + &quot;+&quot;;\r\n        }\r\n    }\r\n\r\nThen the helper code definitions can be accessed from any implementing classes (abstract or otherwise):\r\n\r\n    import xyz.FormatHelper;\r\n\r\n    public class MyBusinessClass implements FormatHelper {\r\n        public String doSomething(){\r\n            return bold(&quot;much wow&quot;)+NL;\r\n        }\r\n    }\r\n\r\nAny class derived from `MyBusinessClass` would be able to access the same methods and fields without further imports, and without &quot;FormatHelper.&quot; prefix.\r\n\r\nNOTE: this mechanism would not work within static methods of the calling classes, which may be a significant problem.","title":"accessing static import of mother class in children class","body":"<p>Another way you could specify the format helper code is in an interface. You would need to change the static methods to default methods to allow the methods to be accessible in other classes without <code>ClassName.</code> prefix:</p>\n<pre><code>public interface FormatHelper {\n    public static final String NL= System.lineSeparator() ; // or &quot;\\r\\n&quot; if targetting Windows from non-Windows\n\n    public default String bold(String val) {\n        return &quot;*&quot; + val + &quot;*&quot;;\n    }\n\n    public default String underline(String val) {\n        return &quot;+&quot; + val + &quot;+&quot;;\n    }\n}\n</code></pre>\n<p>Then the helper code definitions can be accessed from any implementing classes (abstract or otherwise):</p>\n<pre><code>import xyz.FormatHelper;\n\npublic class MyBusinessClass implements FormatHelper {\n    public String doSomething(){\n        return bold(&quot;much wow&quot;)+NL;\n    }\n}\n</code></pre>\n<p>Any class derived from <code>MyBusinessClass</code> would be able to access the same methods and fields without further imports, and without &quot;FormatHelper.&quot; prefix.</p>\n<p>NOTE: this mechanism would not work within static methods of the calling classes, which may be a significant problem.</p>\n"}],"owner":{"account_id":2622976,"reputation":4185,"user_id":2270610,"accept_rate":80,"display_name":"Lo&#239;c Gammaitoni"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"accepted_answer_id":77143855,"answer_count":1,"score":-2,"last_activity_date":1695224293,"creation_date":1695204360,"question_id":77141362,"body_markdown":"We have a helper class that we often include via static import to be able to concisely access its static methods and fields.\r\n\r\nWe have an abstract class whose children could benefit from this helper.\r\nI was hoping to do the static import of the helper in the abstract class so that every sub-class can benefit from it, but it seems that Eclipse doesn&#39;t let me (import is deleted every time I save). Is it an Eclipse configuration problem? Or is it that the scope of the static import is limited to the class itself (and not its children).\r\n\r\nIs there any other way to make the elements in the helper accessible to all the children classes without having to modify them each individually? \r\n\r\nThe helper:\r\n\r\n```java\r\npublic class FormatHelper {\r\n    \r\n    public static final NL=&quot;\\r\\n&quot;;\r\n\r\n    public static String bold(String val) {\r\n        return &quot;*&quot; + val + &quot;*&quot;;\r\n    }\r\n   \r\n    public static String underline(String val) {\r\n        return &quot;+&quot; + val + &quot;+&quot;;\r\n    }\r\n}\r\n```\r\n\r\nNormal use of this helper:\r\n\r\n```java\r\nimport static org.whatever.FormatHelper.NL\r\nimport static org.whatever.FormatHelper.bold\r\n    \r\npublic class MyBusinessClass{\r\n  \r\n    public String doSomething(){\r\n        return bold(&quot;much wow&quot;)+NL;  \r\n    }\r\n}\r\n```\r\n\r\nNow, I have an abstract class with around 20 subclasses, each of them needing to access bold/underline and some other static methods of FormatHelper.\r\n\r\nI&#39;d prefer not to have to write FormatHelper.NL every time, hence my wish to work with static imports.\r\n\r\nI&#39;d also prefer to have those elements in the subclasses scope from the get go. As, when creating new sub classes, I&#39;d like to have a direct access to those methods, without having to think to add a static import.\r\n","title":"accessing static import of mother class in children class","body":"<p>We have a helper class that we often include via static import to be able to concisely access its static methods and fields.</p>\n<p>We have an abstract class whose children could benefit from this helper.\nI was hoping to do the static import of the helper in the abstract class so that every sub-class can benefit from it, but it seems that Eclipse doesn't let me (import is deleted every time I save). Is it an Eclipse configuration problem? Or is it that the scope of the static import is limited to the class itself (and not its children).</p>\n<p>Is there any other way to make the elements in the helper accessible to all the children classes without having to modify them each individually?</p>\n<p>The helper:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class FormatHelper {\n    \n    public static final NL=&quot;\\r\\n&quot;;\n\n    public static String bold(String val) {\n        return &quot;*&quot; + val + &quot;*&quot;;\n    }\n   \n    public static String underline(String val) {\n        return &quot;+&quot; + val + &quot;+&quot;;\n    }\n}\n</code></pre>\n<p>Normal use of this helper:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import static org.whatever.FormatHelper.NL\nimport static org.whatever.FormatHelper.bold\n    \npublic class MyBusinessClass{\n  \n    public String doSomething(){\n        return bold(&quot;much wow&quot;)+NL;  \n    }\n}\n</code></pre>\n<p>Now, I have an abstract class with around 20 subclasses, each of them needing to access bold/underline and some other static methods of FormatHelper.</p>\n<p>I'd prefer not to have to write FormatHelper.NL every time, hence my wish to work with static imports.</p>\n<p>I'd also prefer to have those elements in the subclasses scope from the get go. As, when creating new sub classes, I'd like to have a direct access to those methods, without having to think to add a static import.</p>\n"},{"tags":["java","slf4j"],"comments":[{"owner":{"account_id":350117,"reputation":8663,"user_id":685806,"accept_rate":44,"display_name":"Pino"},"score":0,"creation_date":1695216985,"post_id":77142965,"comment_id":135994795,"body_markdown":"`isTraceEnabled()` is just for performance optimization.","body":"<code>isTraceEnabled()</code> is just for performance optimization."},{"owner":{"account_id":143734,"reputation":791,"user_id":352290,"accept_rate":100,"display_name":"user352290"},"score":0,"creation_date":1695217142,"post_id":77142965,"comment_id":135994828,"body_markdown":"yes, should I add so that the entire method gets stubbed out","body":"yes, should I add so that the entire method gets stubbed out"},{"owner":{"account_id":2139538,"reputation":42521,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":1,"creation_date":1695217148,"post_id":77142965,"comment_id":135994830,"body_markdown":"https://www.slf4j.org/faq.html#logging_performance","body":"<a href=\"https://www.slf4j.org/faq.html#logging_performance\" rel=\"nofollow noreferrer\">slf4j.org/faq.html#logging_performance</a>"},{"owner":{"account_id":2803497,"reputation":25202,"user_id":2411243,"display_name":"Zabuzard"},"score":1,"creation_date":1695218499,"post_id":77142965,"comment_id":135995207,"body_markdown":"It is important to note though that the method input is evaluated. Hence why its so crucial to use the loggers formatter instead of formatting the string urself. So if you would write `log.trace(&quot;Result: &quot; + result)`, this string concatenation is computed. `isTraceEnabled` is used to guard expensive logger calls. for example if u have `log.trace(&quot;...&quot;, expensiveMethod())`, the only way to ensure that u dont pay the price when trace is disabled, is to guard it with `if (log.isTraceEnabled()) { log.trace(...); }`.","body":"It is important to note though that the method input is evaluated. Hence why its so crucial to use the loggers formatter instead of formatting the string urself. So if you would write <code>log.trace(&quot;Result: &quot; + result)</code>, this string concatenation is computed. <code>isTraceEnabled</code> is used to guard expensive logger calls. for example if u have <code>log.trace(&quot;...&quot;, expensiveMethod())</code>, the only way to ensure that u dont pay the price when trace is disabled, is to guard it with <code>if (log.isTraceEnabled()) { log.trace(...); }</code>."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1695220573,"post_id":77142965,"comment_id":135995728,"body_markdown":"I can’t tell whether you’re asking about optimization, or just asking whether log statements which use the trace level will be seen when the logger’s level is set to debug.  The answer to your first sentence is yes, that is indeed what it means.","body":"I can’t tell whether you’re asking about optimization, or just asking whether log statements which use the trace level will be seen when the logger’s level is set to debug.  The answer to your first sentence is yes, that is indeed what it means."}],"answers":[{"tags":[],"owner":{"account_id":2712341,"reputation":1106,"user_id":2340484,"display_name":"charlb"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1695217138,"creation_date":1695217138,"answer_id":77143026,"question_id":77142965,"body_markdown":"When the application runs at Debug log level nothing at trace level will be logged.","title":"isTraceEnabled needed or just trace is enough for logging","body":"<p>When the application runs at Debug log level nothing at trace level will be logged.</p>\n"},{"tags":[],"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1695224019,"creation_date":1695224019,"answer_id":77143991,"question_id":77142965,"body_markdown":"Java cannot magically sniff that this code is going to end up doing nothing. It&#39;ll be run - that for loop is going to invoke `foreignMarkups.iterator()`, so an interator will be made (an object is instantiated, but its small, and fast garbage soon after), and this code will loop through every element, fetching pointers to the various strings that those 3 get methods are pointing at.\r\n\r\nNone of that is particularly expensive, but, if `foreignMarkups` has more than, say, 1000 or so elements, it&#39;ll take non-instant time at that point.\r\n\r\nIf you actually want this code to just be skipped entirely, and not incur those relatively small costs as outlined above, you have 2 options:\r\n\r\n## avoid string concat\r\n\r\nSpecifically to avoid the cost of string concat, you do this:\r\n\r\n```\r\nlog.trace(&quot;Hey there {} {}&quot;, firstName, lastName);\r\n```\r\n\r\nand not:\r\n\r\n```\r\nlog.trace(&quot;Hey there &quot; + firstName + &quot; &quot; + lastName);\r\n```\r\n\r\nBecause string concat is non-trivial (at the very least, it means a new string is created with the full content), and the logging framework will simply not concatenate the parts together if trace isn&#39;t enabled. In the second snippet, java will generate the code to do it, which will concatenate the string (with all costs associated with this), and then send it to the log framework which then immediately ignores it as trace isn&#39;t enabled.\r\n\r\n## Lambdas\r\n\r\nYou can pass lambdas to `log.trace` and friends instead of values; the lambdas will be invoked __only__ if needed, i.e. only if that log level is relevant:\r\n\r\nDo this:\r\n\r\n```\r\nlog.trace(&quot;Hey, {}&quot;, () -&gt; makePriceyDbCallToLookupFirstName(obj));\r\n```\r\n\r\nnot:\r\n\r\n```\r\nlog.trace(&quot;Hey, {}&quot;, makePriceyDbCallToLookupFirstName(obj));\r\n```\r\n\r\n## isXEnabled\r\n\r\nNone of the previous 2 plans seem particularly relevant for you. You can use the lambda trick, but only if you compress your 3 log.trace outs into a single log.trace, and the lambda calculates the entire string. You can do that. Or just use the final fallback, `isXEnabled`. Do this:\r\n\r\n```\r\nif (log.isTraceEnabled()) {\r\n  log.trace(priceLookup1());\r\n  log.trace(priceLookup2());\r\n}\r\n```\r\n\r\n","title":"isTraceEnabled needed or just trace is enough for logging","body":"<p>Java cannot magically sniff that this code is going to end up doing nothing. It'll be run - that for loop is going to invoke <code>foreignMarkups.iterator()</code>, so an interator will be made (an object is instantiated, but its small, and fast garbage soon after), and this code will loop through every element, fetching pointers to the various strings that those 3 get methods are pointing at.</p>\n<p>None of that is particularly expensive, but, if <code>foreignMarkups</code> has more than, say, 1000 or so elements, it'll take non-instant time at that point.</p>\n<p>If you actually want this code to just be skipped entirely, and not incur those relatively small costs as outlined above, you have 2 options:</p>\n<h2>avoid string concat</h2>\n<p>Specifically to avoid the cost of string concat, you do this:</p>\n<pre><code>log.trace(&quot;Hey there {} {}&quot;, firstName, lastName);\n</code></pre>\n<p>and not:</p>\n<pre><code>log.trace(&quot;Hey there &quot; + firstName + &quot; &quot; + lastName);\n</code></pre>\n<p>Because string concat is non-trivial (at the very least, it means a new string is created with the full content), and the logging framework will simply not concatenate the parts together if trace isn't enabled. In the second snippet, java will generate the code to do it, which will concatenate the string (with all costs associated with this), and then send it to the log framework which then immediately ignores it as trace isn't enabled.</p>\n<h2>Lambdas</h2>\n<p>You can pass lambdas to <code>log.trace</code> and friends instead of values; the lambdas will be invoked <strong>only</strong> if needed, i.e. only if that log level is relevant:</p>\n<p>Do this:</p>\n<pre><code>log.trace(&quot;Hey, {}&quot;, () -&gt; makePriceyDbCallToLookupFirstName(obj));\n</code></pre>\n<p>not:</p>\n<pre><code>log.trace(&quot;Hey, {}&quot;, makePriceyDbCallToLookupFirstName(obj));\n</code></pre>\n<h2>isXEnabled</h2>\n<p>None of the previous 2 plans seem particularly relevant for you. You can use the lambda trick, but only if you compress your 3 log.trace outs into a single log.trace, and the lambda calculates the entire string. You can do that. Or just use the final fallback, <code>isXEnabled</code>. Do this:</p>\n<pre><code>if (log.isTraceEnabled()) {\n  log.trace(priceLookup1());\n  log.trace(priceLookup2());\n}\n</code></pre>\n"}],"owner":{"account_id":143734,"reputation":791,"user_id":352290,"accept_rate":100,"display_name":"user352290"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1695224019,"creation_date":1695216744,"question_id":77142965,"body_markdown":"My application runs on DEBUG log level, does this mean all of the following will be evaluated and trace will not be printed out.\r\n\r\nor do I need to enable https://www.slf4j.org/api/org/slf4j/Logger.html#isTraceEnabled-- before logging this snippet\r\n\r\n        for (Element element : foreignMarkups) {\r\n            log.trace(&quot;Foreign Markup name = {}&quot;, element.getName());\r\n            log.trace(&quot;Foreign Markup value = {}&quot;, element.getText());\r\n            log.trace(&quot;Foreign Markup namespace = {}&quot;, element.getNamespace());\r\n        }\r\n\r\n","title":"isTraceEnabled needed or just trace is enough for logging","body":"<p>My application runs on DEBUG log level, does this mean all of the following will be evaluated and trace will not be printed out.</p>\n<p>or do I need to enable <a href=\"https://www.slf4j.org/api/org/slf4j/Logger.html#isTraceEnabled--\" rel=\"nofollow noreferrer\">https://www.slf4j.org/api/org/slf4j/Logger.html#isTraceEnabled--</a> before logging this snippet</p>\n<pre><code>    for (Element element : foreignMarkups) {\n        log.trace(&quot;Foreign Markup name = {}&quot;, element.getName());\n        log.trace(&quot;Foreign Markup value = {}&quot;, element.getText());\n        log.trace(&quot;Foreign Markup namespace = {}&quot;, element.getNamespace());\n    }\n</code></pre>\n"},{"tags":["java","security","encryption","x509certificate","digital-certificate"],"answers":[{"tags":[],"owner":{"account_id":4576437,"reputation":161,"user_id":3714760,"display_name":"MorAdan"},"comment_count":0,"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1695223930,"creation_date":1402055475,"answer_id":24081198,"question_id":21794117,"body_markdown":"PFX isn&#39;t a certificate but a keystore in itself.\r\n\r\nTo get the certificate you have to load the pfx into a keystore and then get the certificate:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    InputStream certIs=new FileInputStream(&quot;suresh.pfx&quot;);\r\n    KeyStore ks=KeyStore.getInstance(&quot;PKCS12&quot;);\r\n    ks.load(certIs.getInputStream(),&quot;password&quot;.toCharArray());\r\n    Certificate cert=ks.getCertificate(&quot;alias&quot;);\r\n\r\nRegards","title":"java.security.cert.CertificateParsingException: signed fields invalid","body":"<p>PFX isn't a certificate but a keystore in itself.</p>\n<p>To get the certificate you have to load the pfx into a keystore and then get the certificate:</p>\n<pre class=\"lang-java prettyprint-override\"><code>InputStream certIs=new FileInputStream(&quot;suresh.pfx&quot;);\nKeyStore ks=KeyStore.getInstance(&quot;PKCS12&quot;);\nks.load(certIs.getInputStream(),&quot;password&quot;.toCharArray());\nCertificate cert=ks.getCertificate(&quot;alias&quot;);\n</code></pre>\n<p>Regards</p>\n"}],"owner":{"account_id":2177522,"reputation":120796,"user_id":1927832,"accept_rate":49,"display_name":"Suresh Atta"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":33902,"favorite_count":0,"down_vote_count":1,"up_vote_count":10,"answer_count":1,"score":9,"last_activity_date":1695223930,"creation_date":1392444891,"question_id":21794117,"body_markdown":"I&#39;m trying to read a   `X509 certificate`  \r\n\r\n\r\n\tFileInputStream fr = new FileInputStream(&quot;suresh.pfx&quot;);\r\n    CertificateFactory cf =   CertificateFactory.getInstance(&quot;X509&quot;);\r\n    X509Certificate c = (X509Certificate) cf.generateCertificate(fr); \r\n\r\nAnd run in to the exception\r\n\r\n\r\n    java.security.cert.CertificateParsingException: signed fields invalid\r\n    \tat sun.security.x509.X509CertImpl.parse(Unknown Source)\r\n    \tat sun.security.x509.X509CertImpl.&lt;init&gt;(Unknown Source)\r\n    \tat sun.security.provider.X509Factory.engineGenerateCertificate(Unknown Source)\r\n    \tat java.security.cert.CertificateFactory.generateCertificate(Unknown Source)\r\n    \tat com.nextenders.certificategeenrator.CertificateGenerator.testGenerateSignCertWithKeyStore(CertificateGenerator.java:102)\r\n    \tat com.nextenders.certificategeenrator.CertificateGenerator.main(CertificateGenerator.java:65)\r\n     \r\n\r\nFound something related to it from [Oracle  forum][1] with no solution.\r\n\r\n Any hints ?\r\n\r\n\r\n  [1]: https://community.oracle.com/thread/1539590?tstart=1495","title":"java.security.cert.CertificateParsingException: signed fields invalid","body":"<p>I'm trying to read a   <code>X509 certificate</code>  </p>\n\n<pre><code>FileInputStream fr = new FileInputStream(\"suresh.pfx\");\nCertificateFactory cf =   CertificateFactory.getInstance(\"X509\");\nX509Certificate c = (X509Certificate) cf.generateCertificate(fr); \n</code></pre>\n\n<p>And run in to the exception</p>\n\n<pre><code>java.security.cert.CertificateParsingException: signed fields invalid\n    at sun.security.x509.X509CertImpl.parse(Unknown Source)\n    at sun.security.x509.X509CertImpl.&lt;init&gt;(Unknown Source)\n    at sun.security.provider.X509Factory.engineGenerateCertificate(Unknown Source)\n    at java.security.cert.CertificateFactory.generateCertificate(Unknown Source)\n    at com.nextenders.certificategeenrator.CertificateGenerator.testGenerateSignCertWithKeyStore(CertificateGenerator.java:102)\n    at com.nextenders.certificategeenrator.CertificateGenerator.main(CertificateGenerator.java:65)\n</code></pre>\n\n<p>Found something related to it from <a href=\"https://community.oracle.com/thread/1539590?tstart=1495\" rel=\"noreferrer\">Oracle  forum</a> with no solution.</p>\n\n<p>Any hints ?</p>\n"},{"tags":["java","maven","openapi","openapi-generator-maven-plugin"],"owner":{"account_id":14271910,"reputation":333,"user_id":10309166,"display_name":"nixfuerdiecharts"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":178,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695223872,"creation_date":1675669926,"question_id":75358603,"body_markdown":"I have following open-api spec\r\n```openapi\r\n...\r\ndepartureTime:\r\n      description: Start time of your trip request. Defaults to current time if omitted.\r\n      format: date-time\r\n      type: string\r\n...\r\n```\r\nThe maven swagger codegen plugin generates the model class with the org.threeten.bp.OffsetDateTime library but I have the requirement to use java.time.OffsetDateTime.\r\nI&#39;ve tried following configuration\r\n\r\n```\r\n&lt;configuration&gt;\r\n...\r\n   &lt;typeMappings&gt;\r\n      &lt;typeMapping&gt;org.threeten.bp.OffsetDateTime=java.time.OffsetDateTime&lt;/typeMapping&gt;\r\n   &lt;/typeMappings&gt;\r\n   &lt;importMappings&gt;\r\n      &lt;importMapping&gt;org.threeten.bp.OffsetDateTime=java.time.OffsetDateTime&lt;/importMapping&gt;\r\n   &lt;/importMappings&gt;\r\n...\r\n&lt;/configuration&gt;\r\n```\r\nThis at least added the requiered library java.time.OffsetDateTime to my generated model classed, but now both imports are present which leads to a import conflict\r\n\r\n```java\r\n...\r\nimport org.threeten.bp.OffsetDateTime;\r\nimport java.time.OffsetDateTime;\r\n...\r\n```\r\n\r\nI&#39;ve also tried adding this to my configuration, since I&#39;ve read it&#39;s needed in some cases. But after adding it, maven has generated nothing anymore.\r\n\r\n```\r\n...\r\n&lt;configOptions&gt;\r\n   &lt;java8&gt;true&lt;/java8&gt;\r\n   &lt;dateLibrary&gt;custom&lt;/dateLibrary&gt;\r\n&lt;/configOptions&gt;\r\n...\r\n```\r\n\r\nHow can I properly change the used libraries for generated sources?","title":"Swagger codegen use different library","body":"<p>I have following open-api spec</p>\n<pre><code>...\ndepartureTime:\n      description: Start time of your trip request. Defaults to current time if omitted.\n      format: date-time\n      type: string\n...\n</code></pre>\n<p>The maven swagger codegen plugin generates the model class with the org.threeten.bp.OffsetDateTime library but I have the requirement to use java.time.OffsetDateTime.\nI've tried following configuration</p>\n<pre><code>&lt;configuration&gt;\n...\n   &lt;typeMappings&gt;\n      &lt;typeMapping&gt;org.threeten.bp.OffsetDateTime=java.time.OffsetDateTime&lt;/typeMapping&gt;\n   &lt;/typeMappings&gt;\n   &lt;importMappings&gt;\n      &lt;importMapping&gt;org.threeten.bp.OffsetDateTime=java.time.OffsetDateTime&lt;/importMapping&gt;\n   &lt;/importMappings&gt;\n...\n&lt;/configuration&gt;\n</code></pre>\n<p>This at least added the requiered library java.time.OffsetDateTime to my generated model classed, but now both imports are present which leads to a import conflict</p>\n<pre class=\"lang-java prettyprint-override\"><code>...\nimport org.threeten.bp.OffsetDateTime;\nimport java.time.OffsetDateTime;\n...\n</code></pre>\n<p>I've also tried adding this to my configuration, since I've read it's needed in some cases. But after adding it, maven has generated nothing anymore.</p>\n<pre><code>...\n&lt;configOptions&gt;\n   &lt;java8&gt;true&lt;/java8&gt;\n   &lt;dateLibrary&gt;custom&lt;/dateLibrary&gt;\n&lt;/configOptions&gt;\n...\n</code></pre>\n<p>How can I properly change the used libraries for generated sources?</p>\n"},{"tags":["java","swagger","schema","swagger-ui","openapi"],"comments":[{"owner":{"account_id":29293095,"reputation":840,"user_id":22443070,"display_name":"xPetersue"},"score":0,"creation_date":1695228188,"post_id":77136838,"comment_id":135997493,"body_markdown":"Could you please format your question to make it more readable? It&#39;s a bit difficult to read in its current form.","body":"Could you please format your question to make it more readable? It&#39;s a bit difficult to read in its current form."}],"answers":[{"tags":[],"owner":{"account_id":11698906,"reputation":1250,"user_id":8564731,"display_name":"Jeremy Fiel"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695223463,"creation_date":1695161268,"answer_id":77138208,"question_id":77136838,"body_markdown":"Not sure you can get rid of the `type` because a schema in JSON Schema is implicitly `type: any`, if no schema is defined. If it&#39;s only because you can&#39;t have the string `type`, I think the best way would be to manually edit the file.\r\n\r\nI don&#39;t believe you can have an empty method. \r\n```js\r\nschema = @Schema()\r\n``` \r\n\r\nRegarding the validity of JSON Schema... \r\n```json\r\n&quot;schema&quot;: {}\r\n```\r\n\r\nis the same as \r\n\r\n```json\r\n&quot;schema&quot;: {&quot;type&quot;: &quot;any&quot;}\r\n```","title":"Open API v3- get rid of type from schema","body":"<p>Not sure you can get rid of the <code>type</code> because a schema in JSON Schema is implicitly <code>type: any</code>, if no schema is defined. If it's only because you can't have the string <code>type</code>, I think the best way would be to manually edit the file.</p>\n<p>I don't believe you can have an empty method.</p>\n<pre class=\"lang-js prettyprint-override\"><code>schema = @Schema()\n</code></pre>\n<p>Regarding the validity of JSON Schema...</p>\n<pre class=\"lang-json prettyprint-override\"><code>&quot;schema&quot;: {}\n</code></pre>\n<p>is the same as</p>\n<pre class=\"lang-json prettyprint-override\"><code>&quot;schema&quot;: {&quot;type&quot;: &quot;any&quot;}\n</code></pre>\n"}],"owner":{"account_id":29484154,"reputation":1,"user_id":22594453,"display_name":"Prathyusha"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695223463,"creation_date":1695145641,"question_id":77136838,"body_markdown":"we are migrating one of our project from swagger v2 to OpenAPI v3 version and we are facing a scenario where the header has no type. i.e., manually updating the generated swagger file for the header with  `“schema”:{}` or  `“schema”:{example:”null”}` or  `“schema”:{nullable:true}`  are working as expected and able to upload those swagger versions in the api portal successfully. So now the question is, while making the same change using swagger annotations such as `schema = @Schema(example = “null”)` or `schema = @Schema(nullable = true)` is generating the `“type”:”string”` by default which looks like `“schema”:{“type”:”string”, Example: null}` or `“schema”:{“type”:”string”,nullable: true}`  which is considering as a breaking change in the api portal. Could anyone please assist on how to get rid of the `type` under schema.","title":"Open API v3- get rid of type from schema","body":"<p>we are migrating one of our project from swagger v2 to OpenAPI v3 version and we are facing a scenario where the header has no type. i.e., manually updating the generated swagger file for the header with  <code>“schema”:{}</code> or  <code>“schema”:{example:”null”}</code> or  <code>“schema”:{nullable:true}</code>  are working as expected and able to upload those swagger versions in the api portal successfully. So now the question is, while making the same change using swagger annotations such as <code>schema = @Schema(example = “null”)</code> or <code>schema = @Schema(nullable = true)</code> is generating the <code>“type”:”string”</code> by default which looks like <code>“schema”:{“type”:”string”, Example: null}</code> or <code>“schema”:{“type”:”string”,nullable: true}</code>  which is considering as a breaking change in the api portal. Could anyone please assist on how to get rid of the <code>type</code> under schema.</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9961,"page":173,"page_size":100}
