{"items":[{"tags":["java","spring","spring-boot","itext","html-to-pdf"],"answers":[{"tags":[],"owner":{"account_id":8891655,"reputation":25,"user_id":8680946,"display_name":"fmut"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1615458659,"creation_date":1615373234,"answer_id":66563133,"question_id":66555404,"body_markdown":"i resolved with this code .\r\n\r\n    FontProvider fontProvider = new DefaultFontProvider(false, false, false);\r\n    fontProvider.addFont(FONT);\r\n    properties.setFontProvider(fontProvider);\r\n\r\nbut I couldn&#39;t make my font bold","title":"Can&#39;t add font when converting from html to pdf with iText Library.Using spring boot","body":"<p>i resolved with this code .</p>\n<pre><code>FontProvider fontProvider = new DefaultFontProvider(false, false, false);\nfontProvider.addFont(FONT);\nproperties.setFontProvider(fontProvider);\n</code></pre>\n<p>but I couldn't make my font bold</p>\n"},{"tags":[],"owner":{"account_id":7667393,"reputation":121,"user_id":5810752,"accept_rate":100,"display_name":"tiempo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695208879,"creation_date":1695197853,"answer_id":77140560,"question_id":66555404,"body_markdown":"Using the following gradle dependencies:\r\n\r\n```\r\n    implementation group: &#39;org.springframework.boot&#39;, name: &#39;spring-boot-starter-thymeleaf&#39;\r\n    implementation group: &#39;com.itextpdf&#39;, name: &#39;itext7-core&#39;, version: &#39;7.2.5&#39;\r\n    implementation group: &#39;com.itextpdf&#39;, name: &#39;html2pdf&#39;, version: &#39;5.0.0&#39;\r\n    implementation group: &#39;ognl&#39;, name: &#39;ognl&#39;, version: &#39;3.1.12&#39;\r\n```\r\n\r\nI am attaching the solution that worked for me:\r\n\r\n\r\n```\r\n    // file is inside resources at the path specified here\r\n    public static final String FONT = &quot;templates/fonts/Sans-Serif-Medium.ttf&quot;;\r\n\r\n    // font set up\r\n    FontProvider fontProvider = new DefaultFontProvider(false, false, false);\r\n    FontProgram fontProgram = FontProgramFactory.createFont(FONT);\r\n    fontProvider.addFont(fontProgram);\r\n    converterProperties.setFontProvider(fontProvider);\r\n```\r\n\r\nBold does not work unfortunately.\r\n\r\n**EDIT**\r\n\r\nIn order for bold to work, you need to add the bold font. So the code working for bold is the following:\r\n\r\n```\r\n    public static final String FONT = &quot;templates/fonts/arial.ttf&quot;;\r\n    public static final String FONT_BOLD = &quot;templates/fonts/arial-bold.ttf&quot;;\r\n\r\n    // font set up\r\n    FontProvider fontProvider = new DefaultFontProvider(false, false, false);\r\n    FontProgram fontProgram = FontProgramFactory.createFont(FONT);\r\n    FontProgram fontProgramBold = FontProgramFactory.createFont(FONT_BOLD);\r\n    fontProvider.addFont(fontProgram);\r\n    ontProvider.addFont(fontProgramBold);\r\n    converterProperties.setFontProvider(fontProvider);\r\n```","title":"Can&#39;t add font when converting from html to pdf with iText Library.Using spring boot","body":"<p>Using the following gradle dependencies:</p>\n<pre><code>    implementation group: 'org.springframework.boot', name: 'spring-boot-starter-thymeleaf'\n    implementation group: 'com.itextpdf', name: 'itext7-core', version: '7.2.5'\n    implementation group: 'com.itextpdf', name: 'html2pdf', version: '5.0.0'\n    implementation group: 'ognl', name: 'ognl', version: '3.1.12'\n</code></pre>\n<p>I am attaching the solution that worked for me:</p>\n<pre><code>    // file is inside resources at the path specified here\n    public static final String FONT = &quot;templates/fonts/Sans-Serif-Medium.ttf&quot;;\n\n    // font set up\n    FontProvider fontProvider = new DefaultFontProvider(false, false, false);\n    FontProgram fontProgram = FontProgramFactory.createFont(FONT);\n    fontProvider.addFont(fontProgram);\n    converterProperties.setFontProvider(fontProvider);\n</code></pre>\n<p>Bold does not work unfortunately.</p>\n<p><strong>EDIT</strong></p>\n<p>In order for bold to work, you need to add the bold font. So the code working for bold is the following:</p>\n<pre><code>    public static final String FONT = &quot;templates/fonts/arial.ttf&quot;;\n    public static final String FONT_BOLD = &quot;templates/fonts/arial-bold.ttf&quot;;\n\n    // font set up\n    FontProvider fontProvider = new DefaultFontProvider(false, false, false);\n    FontProgram fontProgram = FontProgramFactory.createFont(FONT);\n    FontProgram fontProgramBold = FontProgramFactory.createFont(FONT_BOLD);\n    fontProvider.addFont(fontProgram);\n    ontProvider.addFont(fontProgramBold);\n    converterProperties.setFontProvider(fontProvider);\n</code></pre>\n"}],"owner":{"account_id":8891655,"reputation":25,"user_id":8680946,"display_name":"fmut"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":970,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1695208879,"creation_date":1615327225,"question_id":66555404,"body_markdown":"&gt; i am using itext library for convert html to pdf. i can convert properly, but can&#39;t add the font.My converter code is here\r\n\r\n```\r\nConfiguration cfg = new Configuration(Configuration.DEFAULT_INCOMPATIBLE_IMPROVEMENTS);\r\ncfg.setObjectWrapper(new DefaultObjectWrapper(Configuration.DEFAULT_INCOMPATIBLE_IMPROVEMENTS));\r\nTemplate t = new Template(&quot;templateName&quot;, new StringReader(templateHTML), cfg);\r\nWriter out = new FileWriter(new File(TARGET + documentName + &quot;.html&quot;));\r\nt.process(model, out);\r\nout.close();\r\n\r\nConverterProperties properties = new ConverterProperties();\r\nproperties.setBaseUri(TARGET);\r\nFile output = new File(TARGET + documentName + &quot;.pdf&quot;);\r\n\r\nFontProvider fontProvider = new DefaultFontProvider();\r\nFontProgram fontProgram = FontProgramFactory.createFont(FONT);\r\nfontProvider.addFont(fontProgram);\r\nproperties.setFontProvider(fontProvider);\r\nHtmlConverter.convertToPdf(\r\n    new FileInputStream(TARGET + documentName + &quot;.html&quot;),\r\n    new FileOutputStream(TARGET + documentName + &quot;.pdf&quot;),\r\n    properties);\r\n```\r\n\r\n&gt; My Target and Font is here\r\n```\r\n  public static String TARGET = &quot;target/classes/documentsTemplate/&quot;;\r\n  public static final String FONT = &quot;./src/main/resources/fonts/special.ttf&quot;;\r\n```\r\n&gt; I also tried adding font to html like this\r\n\r\n```\r\n* {\r\n    font-family: myFirstFont;\r\n    src: local(&quot;C:/font/special.ttf&quot;);\r\n}\r\n\r\n.text-font {\r\n    font-family: &quot;myFirstFont&quot;;\r\n}\r\n```","title":"Can&#39;t add font when converting from html to pdf with iText Library.Using spring boot","body":"<blockquote>\n<p>i am using itext library for convert html to pdf. i can convert properly, but can't add the font.My converter code is here</p>\n</blockquote>\n<pre><code>Configuration cfg = new Configuration(Configuration.DEFAULT_INCOMPATIBLE_IMPROVEMENTS);\ncfg.setObjectWrapper(new DefaultObjectWrapper(Configuration.DEFAULT_INCOMPATIBLE_IMPROVEMENTS));\nTemplate t = new Template(&quot;templateName&quot;, new StringReader(templateHTML), cfg);\nWriter out = new FileWriter(new File(TARGET + documentName + &quot;.html&quot;));\nt.process(model, out);\nout.close();\n\nConverterProperties properties = new ConverterProperties();\nproperties.setBaseUri(TARGET);\nFile output = new File(TARGET + documentName + &quot;.pdf&quot;);\n\nFontProvider fontProvider = new DefaultFontProvider();\nFontProgram fontProgram = FontProgramFactory.createFont(FONT);\nfontProvider.addFont(fontProgram);\nproperties.setFontProvider(fontProvider);\nHtmlConverter.convertToPdf(\n    new FileInputStream(TARGET + documentName + &quot;.html&quot;),\n    new FileOutputStream(TARGET + documentName + &quot;.pdf&quot;),\n    properties);\n</code></pre>\n<blockquote>\n<p>My Target and Font is here</p>\n</blockquote>\n<pre><code>  public static String TARGET = &quot;target/classes/documentsTemplate/&quot;;\n  public static final String FONT = &quot;./src/main/resources/fonts/special.ttf&quot;;\n</code></pre>\n<blockquote>\n<p>I also tried adding font to html like this</p>\n</blockquote>\n<pre><code>* {\n    font-family: myFirstFont;\n    src: local(&quot;C:/font/special.ttf&quot;);\n}\n\n.text-font {\n    font-family: &quot;myFirstFont&quot;;\n}\n</code></pre>\n"},{"tags":["java","parsing","jackson","yaml"],"answers":[{"tags":[],"owner":{"account_id":141151,"reputation":36461,"user_id":347964,"accept_rate":79,"display_name":"flyx"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1695208817,"creation_date":1507733004,"answer_id":46691196,"question_id":46689801,"body_markdown":"`&lt;&lt;` is not a core YAML feature and has only been specified as an optional tag to outdated YAML 1.1 (see [here](http://yaml.org/type/merge.html)). Therefore, Jackson has every right not to support it. Instead, it tries to parse `&lt;&lt;` as a field name, which obviously fails because there is no such field.\r\n\r\nYour second approach is more appropriate because it only uses core YAML features. The error you get is because Jackson is [known not to support anchors and aliases](https://github.com/FasterXML/jackson-dataformats-text/issues/98) and incorrectly treats the alias `*a` as a String instead of resolving it.\r\n\r\nNow you call Jackson a *YAML parser* in your question which it is not. It merely uses SnakeYaml as parser. SnakeYaml can load YAML to user-defined classes by itself, so you may be better of to directly use the [SnakeYaml API](https://bitbucket.org/asomov/snakeyaml/wiki/Documentation). Afaik it handles aliases correctly.","title":"YAML Jackson - Anchor keys of Array","body":"<p><code>&lt;&lt;</code> is not a core YAML feature and has only been specified as an optional tag to outdated YAML 1.1 (see <a href=\"http://yaml.org/type/merge.html\" rel=\"nofollow noreferrer\">here</a>). Therefore, Jackson has every right not to support it. Instead, it tries to parse <code>&lt;&lt;</code> as a field name, which obviously fails because there is no such field.</p>\n<p>Your second approach is more appropriate because it only uses core YAML features. The error you get is because Jackson is <a href=\"https://github.com/FasterXML/jackson-dataformats-text/issues/98\" rel=\"nofollow noreferrer\">known not to support anchors and aliases</a> and incorrectly treats the alias <code>*a</code> as a String instead of resolving it.</p>\n<p>Now you call Jackson a <em>YAML parser</em> in your question which it is not. It merely uses SnakeYaml as parser. SnakeYaml can load YAML to user-defined classes by itself, so you may be better of to directly use the <a href=\"https://bitbucket.org/asomov/snakeyaml/wiki/Documentation\" rel=\"nofollow noreferrer\">SnakeYaml API</a>. Afaik it handles aliases correctly.</p>\n"}],"owner":{"account_id":10388927,"reputation":540,"user_id":7660935,"accept_rate":80,"display_name":"Namoz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2208,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":46691196,"answer_count":1,"score":2,"last_activity_date":1695208817,"creation_date":1507729376,"question_id":46689801,"body_markdown":"I am trying to parse a YAML file into an object.\r\n\r\nEven though Online YAML Parser tells me that it is parsable the way I want, Jackson YAML parser refuses to give me what I want.\r\n\r\nHere is the YAML File :\r\n\r\n    - nom: &quot;service1&quot;\r\n      etats : &amp;e1s1\r\n        - nom: &quot;e1&quot;\r\n          childs:\r\n            - nom: &quot;e2&quot;\r\n              childs:\r\n                - nom: &quot;e3&quot;\r\n                  childs:\r\n                  - &amp;a\r\n                    nom: &quot;e5&quot;\r\n            - nom: &quot;e4&quot;\r\n              childs:\r\n                - &lt;&lt;: *a\r\n\r\nOnline YAML Parser tells me that &quot;e4&quot; and &quot;e3&quot; have &quot;e5&quot; as a child.\r\n\r\nHowever when I try to parse this with Jackson, I get the following error :\r\n\r\n    com.fasterxml.jackson.databind.exc.UnrecognizedPropertyException: Unrecognized field &quot;&lt;&lt;&quot; (class Etat), not marked as ignorable (4 known properties: &quot;dependsOnAnotherService&quot;, &quot;nom&quot;, &quot;hasToken&quot;, &quot;childs&quot;])\r\n    at [Source: (File); line: 13, column: 21] (through reference chain: java.lang.Object[][0]-&gt;Service[&quot;etats&quot;]-&gt;java.util.ArrayList[0]-&gt;Etat[&quot;childs&quot;]-&gt;java.util.ArrayList[1]-&gt;Etat[&quot;childs&quot;]-&gt;java.util.ArrayList[0]-&gt;Etat[&quot;&lt;&lt;&quot;])\r\n\r\n\r\nSo, I&#39;d like to know if anybody have a way to do this where Jackson will accept it ?\r\n\r\n**Update**\r\n\r\nI also tried this :\r\n\r\n    - nom: &quot;service1&quot;\r\n      etats : &amp;e1s1\r\n        - nom: &quot;e1&quot;\r\n          childs:\r\n            - nom: &quot;e2&quot;\r\n              childs:\r\n                - nom: &quot;e3&quot;\r\n                  childs:\r\n                  - &amp;a\r\n                    nom: &quot;e5&quot;\r\n            - nom: &quot;e4&quot;\r\n              childs:\r\n                - *a\r\n\r\nBut get :\r\n\r\n    com.fasterxml.jackson.databind.exc.MismatchedInputException: Cannot construct instance of `Etat` (although at least one Creator exists): no String-argument constructor/factory method to deserialize from String value (&#39;a&#39;)\r\n    at [Source: (File); line: 13, column: 15] (through reference chain: java.lang.Object[][0]-&gt;Service[&quot;etats&quot;]-&gt;java.util.ArrayList[0]-&gt;Etat[&quot;childs&quot;]-&gt;java.util.ArrayList[1]-&gt;Etat[&quot;childs&quot;]-&gt;java.util.ArrayList[0])\r\n","title":"YAML Jackson - Anchor keys of Array","body":"<p>I am trying to parse a YAML file into an object.</p>\n\n<p>Even though Online YAML Parser tells me that it is parsable the way I want, Jackson YAML parser refuses to give me what I want.</p>\n\n<p>Here is the YAML File :</p>\n\n<pre><code>- nom: \"service1\"\n  etats : &amp;e1s1\n    - nom: \"e1\"\n      childs:\n        - nom: \"e2\"\n          childs:\n            - nom: \"e3\"\n              childs:\n              - &amp;a\n                nom: \"e5\"\n        - nom: \"e4\"\n          childs:\n            - &lt;&lt;: *a\n</code></pre>\n\n<p>Online YAML Parser tells me that \"e4\" and \"e3\" have \"e5\" as a child.</p>\n\n<p>However when I try to parse this with Jackson, I get the following error :</p>\n\n<pre><code>com.fasterxml.jackson.databind.exc.UnrecognizedPropertyException: Unrecognized field \"&lt;&lt;\" (class Etat), not marked as ignorable (4 known properties: \"dependsOnAnotherService\", \"nom\", \"hasToken\", \"childs\"])\nat [Source: (File); line: 13, column: 21] (through reference chain: java.lang.Object[][0]-&gt;Service[\"etats\"]-&gt;java.util.ArrayList[0]-&gt;Etat[\"childs\"]-&gt;java.util.ArrayList[1]-&gt;Etat[\"childs\"]-&gt;java.util.ArrayList[0]-&gt;Etat[\"&lt;&lt;\"])\n</code></pre>\n\n<p>So, I'd like to know if anybody have a way to do this where Jackson will accept it ?</p>\n\n<p><strong>Update</strong></p>\n\n<p>I also tried this :</p>\n\n<pre><code>- nom: \"service1\"\n  etats : &amp;e1s1\n    - nom: \"e1\"\n      childs:\n        - nom: \"e2\"\n          childs:\n            - nom: \"e3\"\n              childs:\n              - &amp;a\n                nom: \"e5\"\n        - nom: \"e4\"\n          childs:\n            - *a\n</code></pre>\n\n<p>But get :</p>\n\n<pre><code>com.fasterxml.jackson.databind.exc.MismatchedInputException: Cannot construct instance of `Etat` (although at least one Creator exists): no String-argument constructor/factory method to deserialize from String value ('a')\nat [Source: (File); line: 13, column: 15] (through reference chain: java.lang.Object[][0]-&gt;Service[\"etats\"]-&gt;java.util.ArrayList[0]-&gt;Etat[\"childs\"]-&gt;java.util.ArrayList[1]-&gt;Etat[\"childs\"]-&gt;java.util.ArrayList[0])\n</code></pre>\n"},{"tags":["java","security","ssl","micronaut","tls1.3"],"owner":{"account_id":1346130,"reputation":33,"user_id":1286847,"display_name":"Hut"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695208387,"creation_date":1695208387,"question_id":77141833,"body_markdown":"I can not find anything in the micronaut docs about how to whitelist/blacklist  \r\ndifferent Cipher suites. Does anyone know how to do this?\r\n\r\nMy Goal is to accept only suites included in TLSv1.3.\r\n\r\nAlso i can not find anything on how to specify CRLs...\r\n\r\nAny help would be greatly appreciated ;-)\r\n\r\nI have looked through the documentation at https://micronaut.io/,\r\nbut i could not find anything regarding CRLs and Cipher suite configuration...","title":"Restrict Micronaut to TLSv1.3 only","body":"<p>I can not find anything in the micronaut docs about how to whitelist/blacklist<br />\ndifferent Cipher suites. Does anyone know how to do this?</p>\n<p>My Goal is to accept only suites included in TLSv1.3.</p>\n<p>Also i can not find anything on how to specify CRLs...</p>\n<p>Any help would be greatly appreciated ;-)</p>\n<p>I have looked through the documentation at <a href=\"https://micronaut.io/\" rel=\"nofollow noreferrer\">https://micronaut.io/</a>,\nbut i could not find anything regarding CRLs and Cipher suite configuration...</p>\n"},{"tags":["java","java-8","java-stream"],"answers":[{"tags":[],"owner":{"account_id":1114067,"reputation":196781,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"down_vote_count":0,"up_vote_count":130,"is_accepted":true,"score":130,"last_activity_date":1695208142,"creation_date":1439479316,"answer_id":31992391,"question_id":31992290,"body_markdown":"Basically, you want to concatenate all the nested streams into one flat stream, without affecting the members themselves. You&#39;ll use\r\n\r\n    objectStreams.flatMap(Function.identity());\r\n\r\nbecause you must provide _some_ mapping function for each stream member, and in this case it is the identity function.\r\n\r\n---\r\n\r\nUsually we end up with the nested streams because we apply a function that maps an item to a stream:\r\n\r\n```\r\nStream&lt;Stream&lt;Object&gt;&gt; objectStreams = srcStream.map(itemToStreamFunction);\r\n```\r\n\r\nIf this is your case, just change `map` to `flatMap`:\r\n\r\n```\r\nStream&lt;Object&gt; flatMappedStream = srcStream.flatMap(itemToStreamFunction);\r\n```\r\n","title":"How to flatmap a stream of streams in Java?","body":"<p>Basically, you want to concatenate all the nested streams into one flat stream, without affecting the members themselves. You'll use</p>\n<pre><code>objectStreams.flatMap(Function.identity());\n</code></pre>\n<p>because you must provide <em>some</em> mapping function for each stream member, and in this case it is the identity function.</p>\n<hr />\n<p>Usually we end up with the nested streams because we apply a function that maps an item to a stream:</p>\n<pre><code>Stream&lt;Stream&lt;Object&gt;&gt; objectStreams = srcStream.map(itemToStreamFunction);\n</code></pre>\n<p>If this is your case, just change <code>map</code> to <code>flatMap</code>:</p>\n<pre><code>Stream&lt;Object&gt; flatMappedStream = srcStream.flatMap(itemToStreamFunction);\n</code></pre>\n"}],"owner":{"account_id":4226501,"reputation":13484,"user_id":3459910,"accept_rate":73,"display_name":"winklerrr"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52998,"favorite_count":0,"down_vote_count":1,"up_vote_count":76,"closed_date":1439479384,"accepted_answer_id":31992391,"answer_count":1,"score":75,"last_activity_date":1695208142,"creation_date":1439479053,"question_id":31992290,"body_markdown":"I want to transform the stream of streams of objects to a single stream of objects. I know that I have to use the `flatMap` method, but I&#39;m not able to achieve that, look at:\r\n\r\n    Stream&lt;Stream&lt;Object&gt;&gt; objectStreams = ...\r\n    Stream&lt;Object&gt; flatMappedStream = objectStreams.flatMap( ... );\r\n\r\nCould anyone please help me?\r\n\r\n","title":"How to flatmap a stream of streams in Java?","body":"<p>I want to transform the stream of streams of objects to a single stream of objects. I know that I have to use the <code>flatMap</code> method, but I'm not able to achieve that, look at:</p>\n\n<pre><code>Stream&lt;Stream&lt;Object&gt;&gt; objectStreams = ...\nStream&lt;Object&gt; flatMappedStream = objectStreams.flatMap( ... );\n</code></pre>\n\n<p>Could anyone please help me?</p>\n"},{"tags":["java","android","c++","java-native-interface"],"comments":[{"owner":{"account_id":15268897,"reputation":1894,"user_id":11016652,"display_name":"zomega"},"score":2,"creation_date":1695202156,"post_id":77140914,"comment_id":135991396,"body_markdown":"You have to use CallBooleanMethod not CallVoidMethod.","body":"You have to use CallBooleanMethod not CallVoidMethod."},{"owner":{"account_id":15268897,"reputation":1894,"user_id":11016652,"display_name":"zomega"},"score":2,"creation_date":1695202328,"post_id":77140914,"comment_id":135991429,"body_markdown":"Also the signature ()V is wrong. See this: https://docs.oracle.com/en/java/javase/21/docs/specs/jni/types.html","body":"Also the signature ()V is wrong. See this: <a href=\"https://docs.oracle.com/en/java/javase/21/docs/specs/jni/types.html\" rel=\"nofollow noreferrer\">docs.oracle.com/en/java/javase/21/docs/specs/jni/types.html</a>"},{"owner":{"account_id":1684984,"reputation":27030,"user_id":1548468,"display_name":"Botje"},"score":2,"creation_date":1695204336,"post_id":77140914,"comment_id":135991868,"body_markdown":"The error could not be clearer: you are using a JNIEnv from a different thread. This is an error. You should use the `AttachCurrentThread` invocation API instead to get a `JNIEnv*`. Also note that non-main threads cannot use `FindClass`, this is a [FAQ](https://developer.android.com/training/articles/perf-jni.html#faq:-why-didnt-findclass-find-my-class)","body":"The error could not be clearer: you are using a JNIEnv from a different thread. This is an error. You should use the <code>AttachCurrentThread</code> invocation API instead to get a <code>JNIEnv*</code>. Also note that non-main threads cannot use <code>FindClass</code>, this is a <a href=\"https://developer.android.com/training/articles/perf-jni.html#faq:-why-didnt-findclass-find-my-class\" rel=\"nofollow noreferrer\">FAQ</a>"}],"answers":[{"tags":[],"owner":{"account_id":9506410,"reputation":97,"user_id":7065776,"accept_rate":50,"display_name":"Isla"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1695205664,"creation_date":1695205664,"answer_id":77141515,"question_id":77140914,"body_markdown":"The error you&#39;re encountering typically occurs when you&#39;re trying to use a JNIEnv pointer obtained from one thread in another thread. The JNIEnv is specific to the thread it is obtained in and should not be used in a different thread.\r\n\r\nIn your &quot;callJavaFun&quot; function, you&#39;re passing the jniEnv parameter, which is presumably obtained in another thread, to jniEnv-&gt;FindClass(&quot;com/test/testQ/Yolov8Ncnn&quot;) and subsequently trying to use it to find the class and call a method in a different thread. This is not allowed in JNI.\r\n\r\nIf you need to call JNI functions from another thread, you should obtain a new JNIEnv pointer specifically for that thread using JavaVM functions like AttachCurrentThread and DetachCurrentThread. AttachCurrentThread is used to obtain a JNIEnv pointer for the current thread, perform the JNI operations, and then DetachCurrentThread is used to release the JNIEnv when we&#39;re done. This ensures that you&#39;re using the JNIEnv in a thread-safe manner. Here&#39;s an example of how you can modify your code to correctly call JNI functions in another thread:\r\n\r\n    void callJavaFun(\r\n            JNIEnv *jniEnv,\r\n            jobject thiz,\r\n            JavaVM *jniGvm,\r\n            jmethodID methodID,\r\n            jclass globalClass,\r\n            cv::Mat &amp;rgb\r\n    ) {\r\n        JNIEnv *threadEnv = nullptr;\r\n        if (jniGvm-&gt;AttachCurrentThread(&amp;threadEnv, NULL) == JNI_OK) {\r\n            jclass clazz = threadEnv-&gt;FindClass(&quot;com/test/testQ/Yolov8Ncnn&quot;);\r\n            jmethodID methodID = threadEnv-&gt;GetMethodID(clazz, &quot;test&quot;, &quot;()V&quot;);\r\n            if (methodID != NULL) {\r\n                threadEnv-&gt;CallVoidMethod(thiz, methodID);\r\n            }\r\n    \r\n            jniGvm-&gt;DetachCurrentThread();\r\n        }\r\n    }","title":"JNI DETECTED ERROR IN APPLICATION: Thread using JNIEnv* from different thread","body":"<p>The error you're encountering typically occurs when you're trying to use a JNIEnv pointer obtained from one thread in another thread. The JNIEnv is specific to the thread it is obtained in and should not be used in a different thread.</p>\n<p>In your &quot;callJavaFun&quot; function, you're passing the jniEnv parameter, which is presumably obtained in another thread, to jniEnv-&gt;FindClass(&quot;com/test/testQ/Yolov8Ncnn&quot;) and subsequently trying to use it to find the class and call a method in a different thread. This is not allowed in JNI.</p>\n<p>If you need to call JNI functions from another thread, you should obtain a new JNIEnv pointer specifically for that thread using JavaVM functions like AttachCurrentThread and DetachCurrentThread. AttachCurrentThread is used to obtain a JNIEnv pointer for the current thread, perform the JNI operations, and then DetachCurrentThread is used to release the JNIEnv when we're done. This ensures that you're using the JNIEnv in a thread-safe manner. Here's an example of how you can modify your code to correctly call JNI functions in another thread:</p>\n<pre><code>void callJavaFun(\n        JNIEnv *jniEnv,\n        jobject thiz,\n        JavaVM *jniGvm,\n        jmethodID methodID,\n        jclass globalClass,\n        cv::Mat &amp;rgb\n) {\n    JNIEnv *threadEnv = nullptr;\n    if (jniGvm-&gt;AttachCurrentThread(&amp;threadEnv, NULL) == JNI_OK) {\n        jclass clazz = threadEnv-&gt;FindClass(&quot;com/test/testQ/Yolov8Ncnn&quot;);\n        jmethodID methodID = threadEnv-&gt;GetMethodID(clazz, &quot;test&quot;, &quot;()V&quot;);\n        if (methodID != NULL) {\n            threadEnv-&gt;CallVoidMethod(thiz, methodID);\n        }\n\n        jniGvm-&gt;DetachCurrentThread();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":20937041,"reputation":323,"user_id":15381986,"display_name":"Mustafa Maden"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":159,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1695208025,"creation_date":1695200815,"question_id":77140914,"body_markdown":"When I try to call the function in the java class, I get the following error.\r\n\r\n    ava_vm_ext.cc:579] JNI DETECTED ERROR IN APPLICATION: thread Thread[21,tid=15479,Native,Thread*=0x7d932413a0,peer=0x12f00038,&quot;ImageReader-640x480f23u3m2-15444-0&quot;] using JNIEnv* from thread Thread[1,tid=15444,Runnable,Thread*=0x7d931f4be0,peer=0x71d8ae98,&quot;main&quot;]\r\n                                                                                                      java_vm_ext.cc:579]     in call to FindClass.\r\n\r\n\r\nCode;\r\n\r\n    void callJavaFun(\r\n            JNIEnv *jniEnv,\r\n            jobject thiz,\r\n            JavaVM *jniGvm,\r\n            jmethodID methodID,\r\n            jclass globalClass,\r\n            cv::Mat &amp;rgb\r\n    ) {\r\n        jclass clazz = jniEnv-&gt;FindClass(&quot;com/test/testQ/Yolov8Ncnn&quot;);\r\n        jmethodID methodID = jniEnv-&gt;GetMethodID(clazz, &quot;test&quot;, &quot;()V&quot;);\r\n        if (methodID != NULL) {\r\n            jniEnv-&gt;CallVoidMethod(thiz, methodID);\r\n        }\r\n    }\r\n\r\nWhen I run the code in the following line of code I don&#39;t have any problem.\r\n\r\n    JNIEXPORT jboolean JNICALL\r\n    Java_com_test_testQ_Yolov8Ncnn_test(JNIEnv *env, jobject thiz, jobject surface) {\r\n        ...\r\n        return JNI_TRUE;\r\n    }\r\n\r\nWhat is the reason?","title":"JNI DETECTED ERROR IN APPLICATION: Thread using JNIEnv* from different thread","body":"<p>When I try to call the function in the java class, I get the following error.</p>\n<pre><code>ava_vm_ext.cc:579] JNI DETECTED ERROR IN APPLICATION: thread Thread[21,tid=15479,Native,Thread*=0x7d932413a0,peer=0x12f00038,&quot;ImageReader-640x480f23u3m2-15444-0&quot;] using JNIEnv* from thread Thread[1,tid=15444,Runnable,Thread*=0x7d931f4be0,peer=0x71d8ae98,&quot;main&quot;]\n                                                                                                  java_vm_ext.cc:579]     in call to FindClass.\n</code></pre>\n<p>Code;</p>\n<pre><code>void callJavaFun(\n        JNIEnv *jniEnv,\n        jobject thiz,\n        JavaVM *jniGvm,\n        jmethodID methodID,\n        jclass globalClass,\n        cv::Mat &amp;rgb\n) {\n    jclass clazz = jniEnv-&gt;FindClass(&quot;com/test/testQ/Yolov8Ncnn&quot;);\n    jmethodID methodID = jniEnv-&gt;GetMethodID(clazz, &quot;test&quot;, &quot;()V&quot;);\n    if (methodID != NULL) {\n        jniEnv-&gt;CallVoidMethod(thiz, methodID);\n    }\n}\n</code></pre>\n<p>When I run the code in the following line of code I don't have any problem.</p>\n<pre><code>JNIEXPORT jboolean JNICALL\nJava_com_test_testQ_Yolov8Ncnn_test(JNIEnv *env, jobject thiz, jobject surface) {\n    ...\n    return JNI_TRUE;\n}\n</code></pre>\n<p>What is the reason?</p>\n"},{"tags":["java","android","background-process"],"answers":[{"tags":[],"owner":{"account_id":263656,"reputation":1,"user_id":549372,"accept_rate":100,"display_name":"Martin Zeitler"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1522272004,"creation_date":1516964287,"answer_id":48460009,"question_id":48459894,"body_markdown":"you also need to add the corresponding repository into the project&#39;s `build.gradle`:\r\n    \r\n    allprojects {\r\n        repositories {\r\n            jcenter()\r\n            google()\r\n            maven { url &quot;https://jitpack.io&quot; } // that&#39;s the one missing.\r\n        }\r\n    }\r\n\r\n[GmailBackground][1]\r\n\r\n\r\n  [1]: https://github.com/yesidlazaro/GmailBackground","title":"Error while adding Gmail Background dependency","body":"<p>you also need to add the corresponding repository into the project's <code>build.gradle</code>:</p>\n\n<pre><code>allprojects {\n    repositories {\n        jcenter()\n        google()\n        maven { url \"https://jitpack.io\" } // that's the one missing.\n    }\n}\n</code></pre>\n\n<p><a href=\"https://github.com/yesidlazaro/GmailBackground\" rel=\"nofollow noreferrer\">GmailBackground</a></p>\n"},{"tags":[],"owner":{"account_id":29432948,"reputation":13,"user_id":22552276,"display_name":"DavidDev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695207995,"creation_date":1694966515,"answer_id":77122627,"question_id":48459894,"body_markdown":"Try to change &quot;compile&quot; by &quot;implementation&quot; as explained in the [documentation][1]\r\n\r\n&gt; The compile and runtime configurations have been removed with Gradle\r\n&gt; 7.0. Please refer to the upgrade guide how to migrate to implementation and api configurations`.\r\n\r\n\r\n\r\n\r\n  [1]: https://docs.gradle.org/current/userguide/java_library_plugin.html#sec:java_library_separation","title":"Error while adding Gmail Background dependency","body":"<p>Try to change &quot;compile&quot; by &quot;implementation&quot; as explained in the <a href=\"https://docs.gradle.org/current/userguide/java_library_plugin.html#sec:java_library_separation\" rel=\"nofollow noreferrer\">documentation</a></p>\n<blockquote>\n<p>The compile and runtime configurations have been removed with Gradle\n7.0. Please refer to the upgrade guide how to migrate to implementation and api configurations`.</p>\n</blockquote>\n"}],"owner":{"account_id":2113491,"reputation":536,"user_id":6854117,"accept_rate":72,"display_name":"Moeez"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":844,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":48460009,"answer_count":2,"score":1,"last_activity_date":1695207995,"creation_date":1516963809,"question_id":48459894,"body_markdown":"I want to send an email in background in my android app. For this I am using [Gmail Background][1]. \r\n\r\nBut when I try to add ` compile &#39;com.github.yesidlazaro:GmailBackground:1.2.0&#39;` in dependencies it gives me error \r\n\r\n&gt; Error:(41, 13) Failed to resolve: com.github.yesidlazaro:GmailBackground:1.2.0\r\n\r\nWhat should I do to resolve this error ? \r\n\r\nAny help would be highly appreciated.\r\n\r\n\r\n\r\n\r\n  [1]: https://github.com/yesidlazaro/GmailBackground","title":"Error while adding Gmail Background dependency","body":"<p>I want to send an email in background in my android app. For this I am using <a href=\"https://github.com/yesidlazaro/GmailBackground\" rel=\"nofollow noreferrer\">Gmail Background</a>. </p>\n\n<p>But when I try to add <code>compile 'com.github.yesidlazaro:GmailBackground:1.2.0'</code> in dependencies it gives me error </p>\n\n<blockquote>\n  <p>Error:(41, 13) Failed to resolve: com.github.yesidlazaro:GmailBackground:1.2.0</p>\n</blockquote>\n\n<p>What should I do to resolve this error ? </p>\n\n<p>Any help would be highly appreciated.</p>\n"},{"tags":["java","jenkins","command-line-interface","jenkins-plugins","jenkins-cli"],"answers":[{"tags":[],"owner":{"account_id":27274165,"reputation":154,"user_id":20795061,"display_name":"Nguyễn Tri Mẫn"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695033291,"creation_date":1695033291,"answer_id":77126463,"question_id":77096022,"body_markdown":"I found another workaround solution is using REST api to install specific Jenkins plugin version (downgrade/upgrade Jenkins plugin version)\r\n\r\n    curl -vu user:token -F &quot;filename=plugin-name&quot; -F &quot;pluginUrl=https://updates.jenkins.io/download/plugins/plugin-name/plugin-version/plugin-name.hpi&quot; http://jenkins-url/manage/pluginManager/uploadPlugin\r\n\r\nE.g:\r\n\r\n    curl -vu admin:11ba4f5453eed5ea3aa7d3c5307199e3e9 -F &quot;filename=thinBackup&quot; -F &quot;pluginUrl=https://updates.jenkins.io/download/plugins/thinBackup/1.15/thinBackup.hpi&quot; http://localhost:8080/manage/pluginManager/uploadPlugin\r\n\r\nThen restart Jenkins [![enter image description here][1]][1]\r\n\r\n✨Tada!!! the result [![enter image description here][2]][2]\r\n\r\nP/S: I want to use REST api instead of using GUI because with REST api we can write an automation script to install plugins versions list list as per requirement.\r\n\r\n  [1]: https://i.stack.imgur.com/pn6tf.png\r\n  [2]: https://i.stack.imgur.com/1NHOc.png","title":"Jenkins CLI to install Jenkins plugins - error UnknownHostException","body":"<p>I found another workaround solution is using REST api to install specific Jenkins plugin version (downgrade/upgrade Jenkins plugin version)</p>\n<pre><code>curl -vu user:token -F &quot;filename=plugin-name&quot; -F &quot;pluginUrl=https://updates.jenkins.io/download/plugins/plugin-name/plugin-version/plugin-name.hpi&quot; http://jenkins-url/manage/pluginManager/uploadPlugin\n</code></pre>\n<p>E.g:</p>\n<pre><code>curl -vu admin:11ba4f5453eed5ea3aa7d3c5307199e3e9 -F &quot;filename=thinBackup&quot; -F &quot;pluginUrl=https://updates.jenkins.io/download/plugins/thinBackup/1.15/thinBackup.hpi&quot; http://localhost:8080/manage/pluginManager/uploadPlugin\n</code></pre>\n<p>Then restart Jenkins <a href=\"https://i.stack.imgur.com/pn6tf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pn6tf.png\" alt=\"enter image description here\" /></a></p>\n<p>✨Tada!!! the result <a href=\"https://i.stack.imgur.com/1NHOc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1NHOc.png\" alt=\"enter image description here\" /></a></p>\n<p>P/S: I want to use REST api instead of using GUI because with REST api we can write an automation script to install plugins versions list list as per requirement.</p>\n"},{"tags":[],"owner":{"account_id":27274165,"reputation":154,"user_id":20795061,"display_name":"Nguyễn Tri Mẫn"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1695207713,"creation_date":1695207713,"answer_id":77141751,"question_id":77096022,"body_markdown":"This url is outdate: https://updates.jenkins.io/download/plugins and it migrate to the new url: https://get.jenkins.io/plugins\r\n\r\nPlease try the new url","title":"Jenkins CLI to install Jenkins plugins - error UnknownHostException","body":"<p>This url is outdate: <a href=\"https://updates.jenkins.io/download/plugins\" rel=\"nofollow noreferrer\">https://updates.jenkins.io/download/plugins</a> and it migrate to the new url: <a href=\"https://get.jenkins.io/plugins\" rel=\"nofollow noreferrer\">https://get.jenkins.io/plugins</a></p>\n<p>Please try the new url</p>\n"}],"owner":{"account_id":27274165,"reputation":154,"user_id":20795061,"display_name":"Nguyễn Tri Mẫn"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77141751,"answer_count":2,"score":0,"last_activity_date":1695207713,"creation_date":1694599105,"question_id":77096022,"body_markdown":"I&#39;m trying to use Jenkins CLI to install a Jenkins plugin with command:\r\n```\r\njava -jar jenkins-cli.jar -s http://localhost:8080 -auth @cred install-plugin https://updates.jenkins.io/download/plugins/htmlpublisher/1.31/htmlpublisher.hpi\r\n```\r\nand got the error\r\n\r\n```\r\nInstalling a plugin from https://updates.jenkins.io/download/plugins/htmlpublisher/1.31/htmlpublisher.hpi\r\n\r\nERROR: Unexpected exception occurred while performing install-plugin command.\r\njava.net.UnknownHostException: updates.jenkins.io\r\n        at java.base/java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:229)\r\n        at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)\r\n        at java.base/java.net.Socket.connect(Socket.java:609)\r\n        at java.base/sun.security.ssl.SSLSocketImpl.connect(SSLSocketImpl.java:305)\r\n        at java.base/sun.security.ssl.BaseSSLSocketImpl.connect(BaseSSLSocketImpl.java:173)\r\n        at java.base/sun.net.NetworkClient.doConnect(NetworkClient.java:182)\r\n        at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:507)\r\n        at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:602)\r\n        at java.base/sun.net.www.protocol.https.HttpsClient.&lt;init&gt;(HttpsClient.java:266)\r\n        at java.base/sun.net.www.protocol.https.HttpsClient.New(HttpsClient.java:373)\r\n        at java.base/sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.getNewHttpClient(AbstractDelegateHttpsURLConnection.java:207)\r\n        at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1187)\r\n        at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1081)\r\n        at java.base/sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:193)\r\n        at java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream0(HttpURLConnection.java:1592)\r\n        at java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1520)\r\n        at java.base/sun.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:250)\r\n        at java.base/java.net.URL.openStream(URL.java:1165)\r\n        at org.apache.commons.io.FileUtils.copyURLToFile(FileUtils.java:1068)\r\n        at hudson.cli.InstallPluginCommand.run(InstallPluginCommand.java:110)\r\n        at hudson.cli.CLICommand.main(CLICommand.java:251)\r\n        at hudson.cli.CLIAction$ServerSideImpl.run(CLIAction.java:299)\r\n        at hudson.cli.CLIAction$1.lambda$opened$0(CLIAction.java:154)\r\n        at java.base/java.lang.Thread.run(Thread.java:829)\r\n```\r\n\r\n\r\nWhat I have tried out:\r\n- Using another server: \r\n**java -jar jenkins-cli.jar -s http://localhost:8080 -auth @cred install-plugin https://get.jenkins.io/plugins/htmlpublisher/1.31/htmlpublisher.hpi** and got the same error\r\n- Install a similar plugin from the Jenkins UI and this worked successfully.\r\n\r\nJenkins version: Jenkins 2.401.2\r\n\r\nAppreciate for your help.","title":"Jenkins CLI to install Jenkins plugins - error UnknownHostException","body":"<p>I'm trying to use Jenkins CLI to install a Jenkins plugin with command:</p>\n<pre><code>java -jar jenkins-cli.jar -s http://localhost:8080 -auth @cred install-plugin https://updates.jenkins.io/download/plugins/htmlpublisher/1.31/htmlpublisher.hpi\n</code></pre>\n<p>and got the error</p>\n<pre><code>Installing a plugin from https://updates.jenkins.io/download/plugins/htmlpublisher/1.31/htmlpublisher.hpi\n\nERROR: Unexpected exception occurred while performing install-plugin command.\njava.net.UnknownHostException: updates.jenkins.io\n        at java.base/java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:229)\n        at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)\n        at java.base/java.net.Socket.connect(Socket.java:609)\n        at java.base/sun.security.ssl.SSLSocketImpl.connect(SSLSocketImpl.java:305)\n        at java.base/sun.security.ssl.BaseSSLSocketImpl.connect(BaseSSLSocketImpl.java:173)\n        at java.base/sun.net.NetworkClient.doConnect(NetworkClient.java:182)\n        at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:507)\n        at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:602)\n        at java.base/sun.net.www.protocol.https.HttpsClient.&lt;init&gt;(HttpsClient.java:266)\n        at java.base/sun.net.www.protocol.https.HttpsClient.New(HttpsClient.java:373)\n        at java.base/sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.getNewHttpClient(AbstractDelegateHttpsURLConnection.java:207)\n        at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1187)\n        at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1081)\n        at java.base/sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:193)\n        at java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream0(HttpURLConnection.java:1592)\n        at java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1520)\n        at java.base/sun.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:250)\n        at java.base/java.net.URL.openStream(URL.java:1165)\n        at org.apache.commons.io.FileUtils.copyURLToFile(FileUtils.java:1068)\n        at hudson.cli.InstallPluginCommand.run(InstallPluginCommand.java:110)\n        at hudson.cli.CLICommand.main(CLICommand.java:251)\n        at hudson.cli.CLIAction$ServerSideImpl.run(CLIAction.java:299)\n        at hudson.cli.CLIAction$1.lambda$opened$0(CLIAction.java:154)\n        at java.base/java.lang.Thread.run(Thread.java:829)\n</code></pre>\n<p>What I have tried out:</p>\n<ul>\n<li>Using another server:\n<strong>java -jar jenkins-cli.jar -s http://localhost:8080 -auth @cred install-plugin <a href=\"https://get.jenkins.io/plugins/htmlpublisher/1.31/htmlpublisher.hpi\" rel=\"nofollow noreferrer\">https://get.jenkins.io/plugins/htmlpublisher/1.31/htmlpublisher.hpi</a></strong> and got the same error</li>\n<li>Install a similar plugin from the Jenkins UI and this worked successfully.</li>\n</ul>\n<p>Jenkins version: Jenkins 2.401.2</p>\n<p>Appreciate for your help.</p>\n"},{"tags":["java","android","android-actionbar"],"answers":[{"tags":[],"owner":{"account_id":445336,"reputation":9179,"user_id":837722,"accept_rate":87,"display_name":"Si8"},"down_vote_count":3,"up_vote_count":147,"is_accepted":true,"score":144,"last_activity_date":1650801607,"creation_date":1382540647,"answer_id":19545450,"question_id":19545370,"body_markdown":"Apply the following in your Theme for the Activity in `AndroidManifest.xml`:\r\n\r\n    &lt;activity android:name=&quot;.Activity&quot;\r\n        android:label=&quot;@string/app_name&quot;\r\n        android:theme=&quot;@android:style/Theme.NoTitleBar&quot;&gt;\r\n        &lt;intent-filter&gt;\r\n            &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n            &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n        &lt;/intent-filter&gt;\r\n    &lt;/activity&gt;","title":"Android: how to hide ActionBar on certain activities","body":"<p>Apply the following in your Theme for the Activity in <code>AndroidManifest.xml</code>:</p>\n<pre><code>&lt;activity android:name=&quot;.Activity&quot;\n    android:label=&quot;@string/app_name&quot;\n    android:theme=&quot;@android:style/Theme.NoTitleBar&quot;&gt;\n    &lt;intent-filter&gt;\n        &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n        &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n    &lt;/intent-filter&gt;\n&lt;/activity&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":971023,"reputation":6146,"user_id":993600,"accept_rate":87,"display_name":"TMH"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1492443542,"creation_date":1382540743,"answer_id":19545488,"question_id":19545370,"body_markdown":"You can use Low Profile mode\r\n[See here][1]\r\n\r\n\r\n  [1]: http://developer.android.com/about/versions/android-4.0.html\r\n\r\nJust search for `SYSTEM_UI_FLAG_LOW_PROFILE` that also dims the navigation buttons if they are present of screen.","title":"Android: how to hide ActionBar on certain activities","body":"<p>You can use Low Profile mode\n<a href=\"http://developer.android.com/about/versions/android-4.0.html\" rel=\"nofollow noreferrer\">See here</a></p>\n\n<p>Just search for <code>SYSTEM_UI_FLAG_LOW_PROFILE</code> that also dims the navigation buttons if they are present of screen.</p>\n"},{"tags":[],"owner":{"account_id":3045528,"reputation":18505,"user_id":2581314,"accept_rate":82,"display_name":"erluxman"},"down_vote_count":0,"up_vote_count":168,"is_accepted":false,"score":168,"last_activity_date":1554251619,"creation_date":1394580251,"answer_id":22338837,"question_id":19545370,"body_markdown":"As you are asking about how to **hide** in a **certain activity**, this is what you need :\r\n\r\n    getSupportActionBar().hide(); \r\n\r\n   ","title":"Android: how to hide ActionBar on certain activities","body":"<p>As you are asking about how to <strong>hide</strong> in a <strong>certain activity</strong>, this is what you need :</p>\n\n<pre><code>getSupportActionBar().hide(); \n</code></pre>\n"},{"tags":[],"owner":{"account_id":194597,"reputation":41281,"user_id":437039,"accept_rate":89,"display_name":"sandalone"},"down_vote_count":1,"up_vote_count":18,"is_accepted":false,"score":17,"last_activity_date":1582035186,"creation_date":1412267615,"answer_id":26165331,"question_id":19545370,"body_markdown":"The `ActionBar` usually exists along `Fragments` so from the `Activity` you can hide it\r\n\r\n    getActionBar().hide();\r\n    getActionBar().show();\r\n\r\nand from the `Fragment` you can do it    \r\n\r\n    getActivity().getActionBar().hide();\r\n    getActivity().getActionBar().show();","title":"Android: how to hide ActionBar on certain activities","body":"<p>The <code>ActionBar</code> usually exists along <code>Fragments</code> so from the <code>Activity</code> you can hide it</p>\n\n<pre><code>getActionBar().hide();\ngetActionBar().show();\n</code></pre>\n\n<p>and from the <code>Fragment</code> you can do it    </p>\n\n<pre><code>getActivity().getActionBar().hide();\ngetActivity().getActionBar().show();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5374207,"reputation":3969,"user_id":4281711,"accept_rate":63,"display_name":"Prateek Joshi"},"down_vote_count":0,"up_vote_count":44,"is_accepted":false,"score":44,"last_activity_date":1435720699,"creation_date":1435720699,"answer_id":31151988,"question_id":19545370,"body_markdown":"1.Go to your `manifest.xml` file.\r\n\r\n2.`Find` the `activity tag` for which you want to hide your ActionBar and then `add` ,\r\n\r\n&gt;  android:theme=&quot;@style/Theme.AppCompat.NoActionBar&quot;\r\n\r\n               &lt;activity\r\n                android:name=&quot;.MainActivity&quot;\r\n                android:theme=&quot;@style/Theme.AppCompat.NoActionBar&quot;\r\n                &gt;","title":"Android: how to hide ActionBar on certain activities","body":"<p>1.Go to your <code>manifest.xml</code> file.</p>\n\n<p>2.<code>Find</code> the <code>activity tag</code> for which you want to hide your ActionBar and then <code>add</code> ,</p>\n\n<blockquote>\n  <p>android:theme=\"@style/Theme.AppCompat.NoActionBar\"</p>\n</blockquote>\n\n<pre><code>           &lt;activity\n            android:name=\".MainActivity\"\n            android:theme=\"@style/Theme.AppCompat.NoActionBar\"\n            &gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1753695,"reputation":4626,"user_id":1602207,"accept_rate":81,"display_name":"joshgoldeneagle"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1436480875,"creation_date":1436480875,"answer_id":31329359,"question_id":19545370,"body_markdown":"If you were using Theme.AppCompat.Light, a better equivalent would be Theme.AppCompat.Light.NoActionBar.\r\n\r\nI found that using Theme.AppCompat.NoTitleBar caused my button text to be invisible so I am using Theme.AppCompat.Light.NoActionBar.\r\n\r\n    &lt;activity android:name=&quot;.Activity&quot;\r\n        android:label=&quot;@string/app_name&quot;\r\n        android:theme=&quot;@android:style/Theme.AppCompat.Light.NoActionBar&quot;&gt;\r\n        &lt;intent-filter&gt;\r\n            &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n            &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n        &lt;/intent-filter&gt;\r\n    &lt;/activity&gt;\r\n\r\n","title":"Android: how to hide ActionBar on certain activities","body":"<p>If you were using Theme.AppCompat.Light, a better equivalent would be Theme.AppCompat.Light.NoActionBar.</p>\n\n<p>I found that using Theme.AppCompat.NoTitleBar caused my button text to be invisible so I am using Theme.AppCompat.Light.NoActionBar.</p>\n\n<pre><code>&lt;activity android:name=\".Activity\"\n    android:label=\"@string/app_name\"\n    android:theme=\"@android:style/Theme.AppCompat.Light.NoActionBar\"&gt;\n    &lt;intent-filter&gt;\n        &lt;action android:name=\"android.intent.action.MAIN\" /&gt;\n        &lt;category android:name=\"android.intent.category.LAUNCHER\" /&gt;\n    &lt;/intent-filter&gt;\n&lt;/activity&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3066037,"reputation":6008,"user_id":2597706,"accept_rate":50,"display_name":"reza.cse08"},"down_vote_count":0,"up_vote_count":30,"is_accepted":false,"score":30,"last_activity_date":1446822080,"creation_date":1446822080,"answer_id":33569646,"question_id":19545370,"body_markdown":"If you want to get full screen without actionBar and Title.\r\n\r\nAdd it in style.xml\r\n\r\n    &lt;style name=&quot;AppTheme.NoActionBar&quot; parent=&quot;Theme.AppCompat.Light.DarkActionBar&quot;&gt;\r\n          &lt;item name=&quot;windowActionBar&quot;&gt;false&lt;/item&gt;\r\n          &lt;item name=&quot;windowNoTitle&quot;&gt;true&lt;/item&gt;\r\n          &lt;item name=&quot;android:windowFullscreen&quot;&gt;true&lt;/item&gt;\r\n    &lt;/style&gt;\r\n\r\nand use the style at activity of manifest.xml.\r\n\r\n    &lt;activity ....\r\n          android:theme=&quot;@style/AppTheme.NoActionBar&quot; &gt; ......\r\n    &lt;/activity&gt; ","title":"Android: how to hide ActionBar on certain activities","body":"<p>If you want to get full screen without actionBar and Title.</p>\n\n<p>Add it in style.xml</p>\n\n<pre><code>&lt;style name=\"AppTheme.NoActionBar\" parent=\"Theme.AppCompat.Light.DarkActionBar\"&gt;\n      &lt;item name=\"windowActionBar\"&gt;false&lt;/item&gt;\n      &lt;item name=\"windowNoTitle\"&gt;true&lt;/item&gt;\n      &lt;item name=\"android:windowFullscreen\"&gt;true&lt;/item&gt;\n&lt;/style&gt;\n</code></pre>\n\n<p>and use the style at activity of manifest.xml.</p>\n\n<pre><code>&lt;activity ....\n      android:theme=\"@style/AppTheme.NoActionBar\" &gt; ......\n&lt;/activity&gt; \n</code></pre>\n"},{"tags":[],"owner":{"account_id":4308351,"reputation":210,"user_id":3520157,"accept_rate":60,"display_name":"BlueLeaf"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1448552405,"creation_date":1448552405,"answer_id":33942383,"question_id":19545370,"body_markdown":"The above answers would help with the ActionBar thing. To add to it, use the following code in case you are using the Splash Screen:\r\nUse this before you set the content view:\r\n\r\n        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);\r\n\r\nJust to clarify, here&#39;s how you do it:\r\n\r\n        super.onCreate(savedInstanceState);\r\n        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN);&#160;&#160;&#160;&#160;&#160;&#160;&#160; &#160;\r\n        setContentView(R.layout.activity_main);\r\n\r\nThis would make your screen a full screen, i.e remove the top bar where you see the network bar, etc","title":"Android: how to hide ActionBar on certain activities","body":"<p>The above answers would help with the ActionBar thing. To add to it, use the following code in case you are using the Splash Screen:\nUse this before you set the content view:</p>\n\n<pre><code>    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);\n</code></pre>\n\n<p>Just to clarify, here's how you do it:</p>\n\n<pre><code>    super.onCreate(savedInstanceState);\n    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN);         \n    setContentView(R.layout.activity_main);\n</code></pre>\n\n<p>This would make your screen a full screen, i.e remove the top bar where you see the network bar, etc</p>\n"},{"tags":[],"owner":{"account_id":4838224,"reputation":3812,"user_id":3904109,"accept_rate":71,"display_name":"DragonFire"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1516248708,"creation_date":1516248708,"answer_id":48313727,"question_id":19545370,"body_markdown":"This works in API 27\r\n\r\nIn the styles.xml replace code to the following....\r\n\r\n    &lt;resources&gt;\r\n        &lt;!-- No Action Bar --&gt;\r\n        &lt;style name=&quot;AppTheme&quot; parent=&quot;Theme.AppCompat.Light.NoActionBar&quot;&gt;\r\n            &lt;!-- Customize your theme here. --&gt;\r\n            &lt;item name=&quot;colorPrimary&quot;&gt;@color/colorPrimary&lt;/item&gt;\r\n            &lt;item name=&quot;colorPrimaryDark&quot;&gt;@color/colorPrimaryDark&lt;/item&gt;\r\n            &lt;item name=&quot;colorAccent&quot;&gt;@color/colorAccent&lt;/item&gt;\r\n        &lt;/style&gt;\r\n    &lt;/resources&gt;\r\n\r\nThen in the files (eg. activity_list.xml) in which you do want to have a toolbar put the following code.\r\n\r\n    &lt;android.support.v7.widget.Toolbar\r\n    android:id=&quot;@+id/toolbar&quot;\r\n    android:layout_height=&quot;wrap_content&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:background=&quot;@color/colorPrimary&quot;/&gt;\r\n\r\nIf you have problems switch to linear layout (because that is what this code is tested on)","title":"Android: how to hide ActionBar on certain activities","body":"<p>This works in API 27</p>\n\n<p>In the styles.xml replace code to the following....</p>\n\n<pre><code>&lt;resources&gt;\n    &lt;!-- No Action Bar --&gt;\n    &lt;style name=\"AppTheme\" parent=\"Theme.AppCompat.Light.NoActionBar\"&gt;\n        &lt;!-- Customize your theme here. --&gt;\n        &lt;item name=\"colorPrimary\"&gt;@color/colorPrimary&lt;/item&gt;\n        &lt;item name=\"colorPrimaryDark\"&gt;@color/colorPrimaryDark&lt;/item&gt;\n        &lt;item name=\"colorAccent\"&gt;@color/colorAccent&lt;/item&gt;\n    &lt;/style&gt;\n&lt;/resources&gt;\n</code></pre>\n\n<p>Then in the files (eg. activity_list.xml) in which you do want to have a toolbar put the following code.</p>\n\n<pre><code>&lt;android.support.v7.widget.Toolbar\nandroid:id=\"@+id/toolbar\"\nandroid:layout_height=\"wrap_content\"\nandroid:layout_width=\"match_parent\"\nandroid:background=\"@color/colorPrimary\"/&gt;\n</code></pre>\n\n<p>If you have problems switch to linear layout (because that is what this code is tested on)</p>\n"},{"tags":[],"owner":{"account_id":10225897,"reputation":551,"user_id":7548514,"display_name":"Kyo Huu"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1521512301,"creation_date":1521512301,"answer_id":49375355,"question_id":19545370,"body_markdown":"This works for me! Put this in your Activity in manifests\r\n\r\n    &lt;activity\r\n       // ...\r\n       android:theme=&quot;@style/Theme.AppCompat.Light.NoActionBar&quot;\r\n       // ...\r\n       &lt;/activity&gt;\r\n\r\nYou can also make your custom theme in styles.xml like this:\r\n\r\n    &lt;style name=&quot;Theme.MyCustomTheme&quot; parent=&quot;@style/Theme.AppCompat.Light.NoActionBar&quot;&gt;\r\n            &lt;item name = &quot;android:windowActionBar&quot;&gt;false&lt;/item&gt;\r\n            &lt;item name = &quot;android:windowNoTitle&quot;&gt;true&lt;/item&gt;\r\n            // more custom...\r\n        &lt;/style&gt;\r\n  \r\nHope this help.","title":"Android: how to hide ActionBar on certain activities","body":"<p>This works for me! Put this in your Activity in manifests</p>\n\n<pre><code>&lt;activity\n   // ...\n   android:theme=\"@style/Theme.AppCompat.Light.NoActionBar\"\n   // ...\n   &lt;/activity&gt;\n</code></pre>\n\n<p>You can also make your custom theme in styles.xml like this:</p>\n\n<pre><code>&lt;style name=\"Theme.MyCustomTheme\" parent=\"@style/Theme.AppCompat.Light.NoActionBar\"&gt;\n        &lt;item name = \"android:windowActionBar\"&gt;false&lt;/item&gt;\n        &lt;item name = \"android:windowNoTitle\"&gt;true&lt;/item&gt;\n        // more custom...\n    &lt;/style&gt;\n</code></pre>\n\n<p>Hope this help.</p>\n"},{"tags":[],"owner":{"account_id":2847174,"reputation":1500,"user_id":2445273,"accept_rate":75,"display_name":"LoMaPh"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1528339443,"creation_date":1528339443,"answer_id":50732250,"question_id":19545370,"body_markdown":"From [here][1]:\n\n&gt; Beginning with Android 3.0 (API level 11), all activities that use the default theme have an ActionBar as an app bar. However, app bar features have gradually been added to the native ActionBar over various Android releases. As a result, **the native ActionBar behaves differently depending on what version of the Android system a device may be using**. By contrast, the most recent features are added to the support library&#39;s version of **Toolbar**, and they are available on any device that can use the support library. \n\nSo one option is to disable ActionBar completely (in the app manifest.xml file) and then add Toolbar in every page that needs an ActionBar.\n\n(follow the above link for step-by-step explanation)\n\n  [1]: https://developer.android.com/training/appbar/setting-up","title":"Android: how to hide ActionBar on certain activities","body":"<p>From <a href=\"https://developer.android.com/training/appbar/setting-up\" rel=\"nofollow noreferrer\">here</a>:</p>\n<blockquote>\n<p>Beginning with Android 3.0 (API level 11), all activities that use the default theme have an ActionBar as an app bar. However, app bar features have gradually been added to the native ActionBar over various Android releases. As a result, <strong>the native ActionBar behaves differently depending on what version of the Android system a device may be using</strong>. By contrast, the most recent features are added to the support library's version of <strong>Toolbar</strong>, and they are available on any device that can use the support library.</p>\n</blockquote>\n<p>So one option is to disable ActionBar completely (in the app manifest.xml file) and then add Toolbar in every page that needs an ActionBar.</p>\n<p>(follow the above link for step-by-step explanation)</p>\n"},{"tags":[],"owner":{"account_id":15176308,"reputation":59,"user_id":10950955,"display_name":"Kanaiyalal Badal"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1548264884,"creation_date":1548264884,"answer_id":54332710,"question_id":19545370,"body_markdown":"Apply the following in your Theme for the Activity in AndroidManifest.xml:\r\n\r\n    &lt;activity android:name=&quot;.DashboardActivity&quot;\r\n            android:theme=&quot;@style/AppFullScreenTheme&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n\r\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/activity&gt;\r\n\r\nThen Apply the following in your Style in style.xml\r\n\r\n    &lt;style name=&quot;AppFullScreenTheme&quot; parent=&quot;Theme.AppCompat.Light.NoActionBar&quot;&gt;\r\n        &lt;item name=&quot;android:windowNoTitle&quot;&gt;true&lt;/item&gt;\r\n        &lt;item name=&quot;android:windowActionBar&quot;&gt;false&lt;/item&gt;\r\n        &lt;item name=&quot;android:windowFullscreen&quot;&gt;true&lt;/item&gt;\r\n        &lt;item name=&quot;android:windowContentOverlay&quot;&gt;@null&lt;/item&gt;\r\n    &lt;/style&gt;","title":"Android: how to hide ActionBar on certain activities","body":"<p>Apply the following in your Theme for the Activity in AndroidManifest.xml:</p>\n\n<pre><code>&lt;activity android:name=\".DashboardActivity\"\n        android:theme=\"@style/AppFullScreenTheme\"&gt;\n        &lt;intent-filter&gt;\n            &lt;action android:name=\"android.intent.action.MAIN\" /&gt;\n\n            &lt;category android:name=\"android.intent.category.LAUNCHER\" /&gt;\n        &lt;/intent-filter&gt;\n    &lt;/activity&gt;\n</code></pre>\n\n<p>Then Apply the following in your Style in style.xml</p>\n\n<pre><code>&lt;style name=\"AppFullScreenTheme\" parent=\"Theme.AppCompat.Light.NoActionBar\"&gt;\n    &lt;item name=\"android:windowNoTitle\"&gt;true&lt;/item&gt;\n    &lt;item name=\"android:windowActionBar\"&gt;false&lt;/item&gt;\n    &lt;item name=\"android:windowFullscreen\"&gt;true&lt;/item&gt;\n    &lt;item name=\"android:windowContentOverlay\"&gt;@null&lt;/item&gt;\n&lt;/style&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7675309,"reputation":137,"user_id":5816379,"display_name":"Tarik Billa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1559072015,"creation_date":1559072015,"answer_id":56348964,"question_id":19545370,"body_markdown":"Replace AndroidManifest.xml\r\n\r\n    android:theme=&quot;@style/FullscreenTheme&quot;\r\nto \r\n\r\n    android:theme=&quot;@style/Theme.Design.NoActionBar&quot;","title":"Android: how to hide ActionBar on certain activities","body":"<p>Replace AndroidManifest.xml</p>\n\n<pre><code>android:theme=\"@style/FullscreenTheme\"\n</code></pre>\n\n<p>to </p>\n\n<pre><code>android:theme=\"@style/Theme.Design.NoActionBar\"\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17197010,"reputation":11,"user_id":12449525,"display_name":"Suraj Gupta"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1574914028,"creation_date":1574914028,"answer_id":59081621,"question_id":19545370,"body_markdown":"Add New Style in your style.xml\r\n\r\n&lt;resources&gt;\r\n\r\n    &lt;!-- Base application theme. --&gt;\r\n    &lt;style name=&quot;AppTheme&quot; parent=&quot;Theme.AppCompat.Light.DarkActionBar&quot;&gt;\r\n\r\n        &lt;!-- Customize your theme here. --&gt;\r\n        &lt;item name=&quot;colorPrimary&quot;&gt;@color/colorPrimary&lt;/item&gt;\r\n        &lt;item name=&quot;colorPrimaryDark&quot;&gt;@color/colorPrimaryDark&lt;/item&gt;\r\n        &lt;item name=&quot;colorAccent&quot;&gt;@color/colorAccent&lt;/item&gt;\r\n    &lt;/style&gt;\r\n    \r\n    &lt;style name=&quot;LoginTheme&quot; parent=&quot;Theme.AppCompat.Light.NoActionBar&quot;&gt;\r\n        &lt;item name=&quot;colorPrimary&quot;&gt;@color/colorPrimary&lt;/item&gt;\r\n        &lt;item name=&quot;colorPrimaryDark&quot;&gt;@color/colorPrimaryDark&lt;/item&gt;\r\n        &lt;item name=&quot;colorAccent&quot;&gt;@color/colorAccent&lt;/item&gt;\r\n    &lt;/style&gt;\r\n\r\n&lt;/resources&gt;\r\n\r\n\r\n\r\nand then add following line in your manifest\r\n\r\n\r\n    &lt;activity android:name=&quot;.Login&quot;\r\n            android:label=&quot;@string/app_name&quot;\r\n            android:theme=&quot;@style/LoginTheme&quot;\r\n            &gt;","title":"Android: how to hide ActionBar on certain activities","body":"<p>Add New Style in your style.xml</p>\n\n<p></p>\n\n<pre><code>&lt;!-- Base application theme. --&gt;\n&lt;style name=\"AppTheme\" parent=\"Theme.AppCompat.Light.DarkActionBar\"&gt;\n\n    &lt;!-- Customize your theme here. --&gt;\n    &lt;item name=\"colorPrimary\"&gt;@color/colorPrimary&lt;/item&gt;\n    &lt;item name=\"colorPrimaryDark\"&gt;@color/colorPrimaryDark&lt;/item&gt;\n    &lt;item name=\"colorAccent\"&gt;@color/colorAccent&lt;/item&gt;\n&lt;/style&gt;\n\n&lt;style name=\"LoginTheme\" parent=\"Theme.AppCompat.Light.NoActionBar\"&gt;\n    &lt;item name=\"colorPrimary\"&gt;@color/colorPrimary&lt;/item&gt;\n    &lt;item name=\"colorPrimaryDark\"&gt;@color/colorPrimaryDark&lt;/item&gt;\n    &lt;item name=\"colorAccent\"&gt;@color/colorAccent&lt;/item&gt;\n&lt;/style&gt;\n</code></pre>\n\n<p></p>\n\n<p>and then add following line in your manifest</p>\n\n<pre><code>&lt;activity android:name=\".Login\"\n        android:label=\"@string/app_name\"\n        android:theme=\"@style/LoginTheme\"\n        &gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17226471,"reputation":1,"user_id":12471986,"display_name":"Aravindhan Kumar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1575350103,"creation_date":1575349880,"answer_id":59150528,"question_id":19545370,"body_markdown":"Check for padding attribute if the issue still exists after changing theme. \r\n\r\nPadding Issue creating a white space on top of fragment window / app window\r\n\r\n![Padding Issue creating a white space on top of fragment window / app window][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/4dfOi.png\r\n\r\nOnce you remove the padding - top value automatically the white space is removed.","title":"Android: how to hide ActionBar on certain activities","body":"<p>Check for padding attribute if the issue still exists after changing theme. </p>\n\n<p>Padding Issue creating a white space on top of fragment window / app window</p>\n\n<p><img src=\"https://i.stack.imgur.com/4dfOi.png\" alt=\"Padding Issue creating a white space on top of fragment window / app window\"></p>\n\n<p>Once you remove the padding - top value automatically the white space is removed.</p>\n"},{"tags":[],"owner":{"account_id":16484644,"reputation":149,"user_id":11910379,"display_name":"AJAY KACHHIYAPATEL"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1607270724,"creation_date":1593355121,"answer_id":62623997,"question_id":19545370,"body_markdown":"To hide the ActionBar add this code into java file.\r\n\r\n        ActionBar actionBar = getSupportActionBar();\r\n        actionBar.hide();","title":"Android: how to hide ActionBar on certain activities","body":"<p>To hide the ActionBar add this code into java file.</p>\n<pre><code>    ActionBar actionBar = getSupportActionBar();\n    actionBar.hide();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18179556,"reputation":17,"user_id":13227609,"display_name":"Monirul Islam Prince"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1607550057,"creation_date":1607550057,"answer_id":65225320,"question_id":19545370,"body_markdown":"First cheek MainActivity for activity tag,Like -\r\n\r\n&gt; public class MainActivity extends **AppCompatActivity**\r\n\r\nThen goto menifest xml file and write-\r\n\r\n&gt; android:theme=&quot;@style/Theme.AppCompat.Light.NoActionBar&quot;\r\n\r\nin activity tag","title":"Android: how to hide ActionBar on certain activities","body":"<p>First cheek MainActivity for activity tag,Like -</p>\n<blockquote>\n<p>public class MainActivity extends <strong>AppCompatActivity</strong></p>\n</blockquote>\n<p>Then goto menifest xml file and write-</p>\n<blockquote>\n<p>android:theme=&quot;@style/Theme.AppCompat.Light.NoActionBar&quot;</p>\n</blockquote>\n<p>in activity tag</p>\n"},{"tags":[],"owner":{"account_id":6088315,"reputation":321,"user_id":4751508,"display_name":"an0nym0use"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1613673372,"creation_date":1613673372,"answer_id":66266093,"question_id":19545370,"body_markdown":"For selectively hiding Actionbar in activities:\r\n\r\nAdd the following code to onCreate (preferably on the last line of the function)\r\n\r\nKotlin:\r\n\r\n`supportActionBar?.hide()`\r\n\r\nJava:\r\n\r\n`getSupportActionBar().hide(); `\r\n\r\n","title":"Android: how to hide ActionBar on certain activities","body":"<p>For selectively hiding Actionbar in activities:</p>\n<p>Add the following code to onCreate (preferably on the last line of the function)</p>\n<p>Kotlin:</p>\n<p><code>supportActionBar?.hide()</code></p>\n<p>Java:</p>\n<p><code>getSupportActionBar().hide(); </code></p>\n"},{"tags":[],"owner":{"account_id":15231136,"reputation":101,"user_id":10990241,"display_name":"nanaboison"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1617257043,"creation_date":1617257043,"answer_id":66899173,"question_id":19545370,"body_markdown":"If you activity extends **AppCompatActivity** then you can add this line\r\n**super.getSupportActionBar().hide();** before **setContentView()**","title":"Android: how to hide ActionBar on certain activities","body":"<p>If you activity extends <strong>AppCompatActivity</strong> then you can add this line\n<strong>super.getSupportActionBar().hide();</strong> before <strong>setContentView()</strong></p>\n"},{"tags":[],"owner":{"account_id":20360698,"reputation":51,"user_id":14935110,"display_name":"Abdulkerim Yıldırım"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1619389359,"creation_date":1619389359,"answer_id":67258797,"question_id":19545370,"body_markdown":"    @Override\r\n        public void onResume() {\r\n            super.onResume();\r\n            getSupportActionBar().hide();\r\n        }\r\n    \r\n        @Override\r\n        public void onStop() {\r\n            super.onStop();\r\n            getSupportActionBar().show();\r\n        }","title":"Android: how to hide ActionBar on certain activities","body":"<pre><code>@Override\n    public void onResume() {\n        super.onResume();\n        getSupportActionBar().hide();\n    }\n\n    @Override\n    public void onStop() {\n        super.onStop();\n        getSupportActionBar().show();\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27627442,"reputation":31,"user_id":21087148,"display_name":"ilaiyaraja MCA"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695207293,"creation_date":1695207293,"answer_id":77141696,"question_id":19545370,"body_markdown":"**getsupportactionbar.hide();**\r\n\r\n100% it&#39;s will work any version android studio based on java language.","title":"Android: how to hide ActionBar on certain activities","body":"<p><strong>getsupportactionbar.hide();</strong></p>\n<p>100% it's will work any version android studio based on java language.</p>\n"}],"owner":{"account_id":773362,"reputation":17857,"user_id":812303,"accept_rate":71,"display_name":"Tomer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":229021,"favorite_count":0,"down_vote_count":0,"up_vote_count":128,"accepted_answer_id":19545450,"answer_count":21,"score":128,"last_activity_date":1695207293,"creation_date":1382540467,"question_id":19545370,"body_markdown":"I&#39;ve developed a simple demo application with a splash screen a map and some regular screens.\r\n\r\nI have an action bar at the top that contains a logo. It all looks fine on my phone (Galaxy s1 I9000 V2.3) but when i test it on Galaxy s2 v4 the action bar appears also in the splash screen and in the map screen.\r\n\r\nThe spalsh and map activity are not even inheriting from ActionBarActivity so how is that possible and how can i make it go away?\r\n\r\nManifest:\r\n\r\n    &lt;application\r\n            android:allowBackup=&quot;true&quot;\r\n            android:icon=&quot;@drawable/ic_launcher&quot;\r\n            android:theme=&quot;@style/Theme.AppCompat.Light&quot; &gt;\r\n            &lt;activity\r\n                android:name=&quot;.HomeActivity&quot;\r\n                android:icon=&quot;@drawable/android_logo&quot;\r\n                android:label=&quot;&quot;\r\n                android:logo=&quot;@drawable/android_logo&quot; &gt;\r\n    \r\n                &lt;!--\r\n                &lt;intent-filter&gt;\r\n                    &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n    \r\n                    &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n                &lt;/intent-filter&gt;\r\n                --&gt;\r\n            &lt;/activity&gt;\r\n            &lt;activity\r\n                android:name=&quot;.MapActivity&quot;\r\n                android:label=&quot;&quot; &gt;\r\n            &lt;/activity&gt;\r\n            &lt;activity\r\n                android:name=&quot;.PackageActivity&quot;\r\n                android:icon=&quot;@drawable/android_logo&quot;\r\n                android:label=&quot;&quot;\r\n                android:logo=&quot;@drawable/android_logo&quot; &gt;\r\n            &lt;/activity&gt;\r\n            &lt;activity\r\n                android:name=&quot;.SplashActivity&quot;\r\n                android:label=&quot;&quot; &gt;\r\n                &lt;intent-filter&gt;\r\n                    &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n    \r\n                    &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n                &lt;/intent-filter&gt;\r\n            &lt;/activity&gt;\r\n    \r\n        &lt;/application&gt;\r\n\r\nMapActivity definition (it&#39;s a long one so i included just the definition):\r\n\r\n    public class MapActivity extends FragmentActivity implements LocationListener\r\n\r\nSplash Activity:\r\n\r\n    import android.app.Activity;\r\n    import android.content.Intent;\r\n    import android.os.Bundle;\r\n    import android.os.Handler;\r\n    import android.support.v7.app.ActionBar;\r\n    import android.support.v7.app.ActionBarActivity;\r\n    \r\n    public class SplashActivity extends Activity{\r\n    \r\n    \tprivate static final long SPLASH_DISPLAY_LENGTH = 2000;\r\n    \r\n    \t@Override\r\n    \tprotected void onCreate(Bundle savedInstanceState) {\r\n    \t\tsuper.onCreate(savedInstanceState);\r\n    \t\tsetContentView(R.layout.activity_splash);\r\n    \t\t\r\n            new Handler().postDelayed(new Runnable(){\r\n                @Override\r\n                public void run() {\r\n                    Intent mainIntent = new Intent(SplashActivity.this,HomeActivity.class);\r\n                    SplashActivity.this.startActivity(mainIntent);\r\n                    SplashActivity.this.finish();\r\n                }\r\n            }, SPLASH_DISPLAY_LENGTH);\r\n    \r\n    \t}\r\n    \r\n    }\r\n\r\n\r\n\r\n","title":"Android: how to hide ActionBar on certain activities","body":"<p>I've developed a simple demo application with a splash screen a map and some regular screens.</p>\n\n<p>I have an action bar at the top that contains a logo. It all looks fine on my phone (Galaxy s1 I9000 V2.3) but when i test it on Galaxy s2 v4 the action bar appears also in the splash screen and in the map screen.</p>\n\n<p>The spalsh and map activity are not even inheriting from ActionBarActivity so how is that possible and how can i make it go away?</p>\n\n<p>Manifest:</p>\n\n<pre><code>&lt;application\n        android:allowBackup=\"true\"\n        android:icon=\"@drawable/ic_launcher\"\n        android:theme=\"@style/Theme.AppCompat.Light\" &gt;\n        &lt;activity\n            android:name=\".HomeActivity\"\n            android:icon=\"@drawable/android_logo\"\n            android:label=\"\"\n            android:logo=\"@drawable/android_logo\" &gt;\n\n            &lt;!--\n            &lt;intent-filter&gt;\n                &lt;action android:name=\"android.intent.action.MAIN\" /&gt;\n\n                &lt;category android:name=\"android.intent.category.LAUNCHER\" /&gt;\n            &lt;/intent-filter&gt;\n            --&gt;\n        &lt;/activity&gt;\n        &lt;activity\n            android:name=\".MapActivity\"\n            android:label=\"\" &gt;\n        &lt;/activity&gt;\n        &lt;activity\n            android:name=\".PackageActivity\"\n            android:icon=\"@drawable/android_logo\"\n            android:label=\"\"\n            android:logo=\"@drawable/android_logo\" &gt;\n        &lt;/activity&gt;\n        &lt;activity\n            android:name=\".SplashActivity\"\n            android:label=\"\" &gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=\"android.intent.action.MAIN\" /&gt;\n\n                &lt;category android:name=\"android.intent.category.LAUNCHER\" /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n\n    &lt;/application&gt;\n</code></pre>\n\n<p>MapActivity definition (it's a long one so i included just the definition):</p>\n\n<pre><code>public class MapActivity extends FragmentActivity implements LocationListener\n</code></pre>\n\n<p>Splash Activity:</p>\n\n<pre><code>import android.app.Activity;\nimport android.content.Intent;\nimport android.os.Bundle;\nimport android.os.Handler;\nimport android.support.v7.app.ActionBar;\nimport android.support.v7.app.ActionBarActivity;\n\npublic class SplashActivity extends Activity{\n\n    private static final long SPLASH_DISPLAY_LENGTH = 2000;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_splash);\n\n        new Handler().postDelayed(new Runnable(){\n            @Override\n            public void run() {\n                Intent mainIntent = new Intent(SplashActivity.this,HomeActivity.class);\n                SplashActivity.this.startActivity(mainIntent);\n                SplashActivity.this.finish();\n            }\n        }, SPLASH_DISPLAY_LENGTH);\n\n    }\n\n}\n</code></pre>\n"},{"tags":["java","arrays","char"],"comments":[{"owner":{"account_id":384206,"reputation":50386,"user_id":740553,"accept_rate":46,"display_name":"Mike &#39;Pomax&#39; Kamermans"},"score":3,"creation_date":1695168005,"post_id":77138565,"comment_id":135987171,"body_markdown":"If you have a string, and you need to discard the first and last character, just use [the `substring` method](https://docs.oracle.com/javase/8/docs/api/java/lang/String.html#substring-int-int-)?","body":"If you have a string, and you need to discard the first and last character, just use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/String.html#substring-int-int-\" rel=\"nofollow noreferrer\">the <code>substring</code> method</a>?"},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1695168116,"post_id":77138565,"comment_id":135987182,"body_markdown":"Or `StringBuilder#deleteCharAt`","body":"Or <code>StringBuilder#deleteCharAt</code>"},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1695168118,"post_id":77138565,"comment_id":135987183,"body_markdown":"`str = str.replaceAll(&quot;.(.)(.)(.).&quot;, &quot;$3$2$1&quot;)`","body":"<code>str = str.replaceAll(&quot;.(.)(.)(.).&quot;, &quot;$3$2$1&quot;)</code>"},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1695169341,"post_id":77138565,"comment_id":135987294,"body_markdown":"_s = s.substring(1, 4)_.","body":"<i>s = s.substring(1, 4)</i>."}],"answers":[{"tags":[],"owner":{"account_id":216120,"reputation":49213,"user_id":471160,"accept_rate":90,"display_name":"marcinj"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695197914,"creation_date":1695195270,"answer_id":77140256,"question_id":77138565,"body_markdown":"You can use StringBuilder.substring method:\r\n    \r\n        String str = &quot;Hello&quot;;\r\n        str = new StringBuilder(str)\r\n                .reverse()\r\n                .substring(1, str.length() - 1);\r\n        System.out.println(str);\r\n\r\ncheck the str length before executing it to prevent from exceptions. The reason to use StringBuilder is because it makes string manipulation efficient - less copying and whats most important less memory allocations.","title":"How to remove the first and last character out of a 5 character String","body":"<p>You can use StringBuilder.substring method:</p>\n<pre><code>    String str = &quot;Hello&quot;;\n    str = new StringBuilder(str)\n            .reverse()\n            .substring(1, str.length() - 1);\n    System.out.println(str);\n</code></pre>\n<p>check the str length before executing it to prevent from exceptions. The reason to use StringBuilder is because it makes string manipulation efficient - less copying and whats most important less memory allocations.</p>\n"},{"tags":[],"owner":{"account_id":29490259,"reputation":1,"user_id":22599374,"display_name":"FLUFFY_BIRD"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695207268,"creation_date":1695207095,"answer_id":77141676,"question_id":77138565,"body_markdown":"String is immutable so you cant change it, but you can remove first and last characters by creating new String with:\r\n\r\n    String name = &quot;Anna&quot;;\r\n    String newName = name.substring(1, name.length()-1));\r\n\r\nResult is going to be: &quot;nn&quot;","title":"How to remove the first and last character out of a 5 character String","body":"<p>String is immutable so you cant change it, but you can remove first and last characters by creating new String with:</p>\n<pre><code>String name = &quot;Anna&quot;;\nString newName = name.substring(1, name.length()-1));\n</code></pre>\n<p>Result is going to be: &quot;nn&quot;</p>\n"}],"owner":{"account_id":29486294,"reputation":1,"user_id":22596128,"display_name":"Felipe Ramirez"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":69,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1695207268,"creation_date":1695167916,"question_id":77138565,"body_markdown":"I am creating a program in which you recieve a 5 character String from the user and not only do you turn it around, but you also remove both the first and last character of said String. I&#39;ve gotten it to turn around, but I can figure out how to remove the characters, can anyone help please?\r\n\r\nI tried multiple options, from using arrays, from other methods but nothing seems to delete them","title":"How to remove the first and last character out of a 5 character String","body":"<p>I am creating a program in which you recieve a 5 character String from the user and not only do you turn it around, but you also remove both the first and last character of said String. I've gotten it to turn around, but I can figure out how to remove the characters, can anyone help please?</p>\n<p>I tried multiple options, from using arrays, from other methods but nothing seems to delete them</p>\n"},{"tags":["java","eclipse","user-interface"],"comments":[{"owner":{"account_id":27834272,"reputation":688,"user_id":21252090,"display_name":"Grinding For Reputation"},"score":0,"creation_date":1695207382,"post_id":77141654,"comment_id":135992471,"body_markdown":"Use Alt+Shift+X then J (for running the Java build)","body":"Use Alt+Shift+X then J (for running the Java build)"},{"owner":{"account_id":29490412,"reputation":1,"user_id":22599515,"display_name":"CaptainBread42"},"score":0,"creation_date":1695207710,"post_id":77141654,"comment_id":135992545,"body_markdown":"It still comes up with the error, it might have something to do with WindowBuilder as I&#39;m using that to make the Gui","body":"It still comes up with the error, it might have something to do with WindowBuilder as I&#39;m using that to make the Gui"},{"owner":{"account_id":27834272,"reputation":688,"user_id":21252090,"display_name":"Grinding For Reputation"},"score":0,"creation_date":1695208788,"post_id":77141654,"comment_id":135992776,"body_markdown":"It works fine for me. Not sure why you get the error. Let me also try using WindowBuilder and see if that causes an error","body":"It works fine for me. Not sure why you get the error. Let me also try using WindowBuilder and see if that causes an error"},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1695219835,"post_id":77141654,"comment_id":135995528,"body_markdown":"Please prove with a screenshot that the code is in a source folder of a Java project without errors and opened in the active editor.","body":"Please prove with a screenshot that the code is in a source folder of a Java project without errors and opened in the active editor."}],"owner":{"account_id":29490412,"reputation":1,"user_id":22599515,"display_name":"CaptainBread42"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695206881,"creation_date":1695206881,"question_id":77141654,"body_markdown":"I have a main class in the code but it comes up with the error &#39;Editor does not contain main class&#39; , I have written the code again in a separate file but it still does not seem to work.\r\n(I am making a game where 2 players roll 2 die and after 5 rounds the player with the highest score wins)\r\nHere is my code below:             \r\n```\r\npackage game;\r\n\r\nimport java.awt.EventQueue;\r\n\r\nimport javax.swing.JFrame;\r\nimport javax.swing.JLabel;\r\nimport java.awt.Font;\r\nimport javax.swing.JTextField;\r\nimport javax.swing.JButton;\r\nimport java.awt.event.ActionListener;\r\nimport java.awt.event.ActionEvent;\r\n\r\npublic class GUI {\r\n\r\n\tprivate JFrame frame;\r\n\tprivate JTextField textField;\r\n\r\n\t// Launch the application.\r\n\tpublic static void main(String[] args) {\r\n\t\tEventQueue.invokeLater(new Runnable() {\r\n\t\t\tpublic void run() {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tGUI window = new GUI();\r\n\t\t\t\t\twindow.frame.setVisible(true);\r\n\t\t\t\t} catch (Exception e) {\r\n\t\t\t\t\te.printStackTrace();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// Create the application.\r\n\r\n\tpublic GUI() {\r\n\t\tinitialize();\r\n\t}\r\n\r\n\t//Initialise the contents of the frame.\r\n\tprivate void initialize() {\r\n\t\tframe = new JFrame();\r\n\t\tframe.setBounds(100, 100, 589, 402);\r\n\t\tframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n\t\tframe.getContentPane().setLayout(null);\r\n\t\t\r\n\t\tJLabel enterName = new JLabel(&quot;Player1 enter your name&quot;);\r\n\t\tenterName.setFont(new Font(&quot;Tahoma&quot;, Font.PLAIN, 32));\r\n\t\tenterName.setBounds(76, 11, 387, 93);\r\n\t\tframe.getContentPane().add(enterName);\r\n\t\t\r\n\t\ttextField = new JTextField();\r\n\t\ttextField.setFont(new Font(&quot;Tahoma&quot;, Font.PLAIN, 20));\r\n\t\ttextField.setBounds(86, 99, 381, 35);\r\n\t\tframe.getContentPane().add(textField);\r\n\t\ttextField.setColumns(10);\r\n\t\t\r\n\t\tJButton confirmButton = new JButton(&quot;Confirm name&quot;);\r\n\t\tconfirmButton.addActionListener(new ActionListener() {\r\n\t\t\tpublic void actionPerformed(ActionEvent e) {\r\n\t\t\t\tString p1 = &quot; &quot;;\r\n\t\t\t\tString p2 = &quot; &quot;;\r\n\t\t\t\tint count = 0;\r\n\t\t\t\tif (count == 0) {\r\n\t\t\t\t\tp1 = textField.getText();\r\n\t\t\t\t\ttextField.setText(&quot;&quot;);\r\n\t\t\t\t\tSystem.out.println(p1);\r\n\t\t\t\t}\r\n\t\t\t\tif (count &gt; 1) {\r\n\t\t\t\t\tp2 = textField.getText();\r\n\t\t\t\t\tSystem.out.println(p2);\r\n\t\t\t\t}\r\n\t\t\t\tSystem.out.println(p1 + p2);\r\n\t\t\t\tenterName.setText(&quot;Player2 enter your name&quot;);\r\n\t\t\t\tcount = count+1;\r\n\t\t\t}\r\n\t\t});\r\n\t\tconfirmButton.setFont(new Font(&quot;Tahoma&quot;, Font.PLAIN, 20));\r\n\t\tconfirmButton.setBounds(184, 145, 185, 35);\r\n\t\tframe.getContentPane().add(confirmButton);\r\n\t\t\r\n\t\tJLabel winnerText = new JLabel(&quot;&quot;);\r\n\t\twinnerText.setFont(new Font(&quot;Tahoma&quot;, Font.PLAIN, 38));\r\n\t\twinnerText.setBounds(76, 191, 468, 38);\r\n\t\tframe.getContentPane().add(winnerText);\r\n\t}\r\n}\r\n\r\n```\r\n\r\n\r\n\r\nI ran the code to see if the GUI would appear and function correctly but every time I just got the same error, I have restarted Eclipse multiple times and it did not fix the issue, I have searched for a fix online but have yet to find one that works.","title":"&#39;Editor does not contain main class&#39; error appears when I run my GUI code to test if it functions correctly","body":"<p>I have a main class in the code but it comes up with the error 'Editor does not contain main class' , I have written the code again in a separate file but it still does not seem to work.\n(I am making a game where 2 players roll 2 die and after 5 rounds the player with the highest score wins)\nHere is my code below:</p>\n<pre><code>package game;\n\nimport java.awt.EventQueue;\n\nimport javax.swing.JFrame;\nimport javax.swing.JLabel;\nimport java.awt.Font;\nimport javax.swing.JTextField;\nimport javax.swing.JButton;\nimport java.awt.event.ActionListener;\nimport java.awt.event.ActionEvent;\n\npublic class GUI {\n\n    private JFrame frame;\n    private JTextField textField;\n\n    // Launch the application.\n    public static void main(String[] args) {\n        EventQueue.invokeLater(new Runnable() {\n            public void run() {\n                try {\n                    GUI window = new GUI();\n                    window.frame.setVisible(true);\n                } catch (Exception e) {\n                    e.printStackTrace();\n                }\n            }\n        });\n    }\n\n    // Create the application.\n\n    public GUI() {\n        initialize();\n    }\n\n    //Initialise the contents of the frame.\n    private void initialize() {\n        frame = new JFrame();\n        frame.setBounds(100, 100, 589, 402);\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        frame.getContentPane().setLayout(null);\n        \n        JLabel enterName = new JLabel(&quot;Player1 enter your name&quot;);\n        enterName.setFont(new Font(&quot;Tahoma&quot;, Font.PLAIN, 32));\n        enterName.setBounds(76, 11, 387, 93);\n        frame.getContentPane().add(enterName);\n        \n        textField = new JTextField();\n        textField.setFont(new Font(&quot;Tahoma&quot;, Font.PLAIN, 20));\n        textField.setBounds(86, 99, 381, 35);\n        frame.getContentPane().add(textField);\n        textField.setColumns(10);\n        \n        JButton confirmButton = new JButton(&quot;Confirm name&quot;);\n        confirmButton.addActionListener(new ActionListener() {\n            public void actionPerformed(ActionEvent e) {\n                String p1 = &quot; &quot;;\n                String p2 = &quot; &quot;;\n                int count = 0;\n                if (count == 0) {\n                    p1 = textField.getText();\n                    textField.setText(&quot;&quot;);\n                    System.out.println(p1);\n                }\n                if (count &gt; 1) {\n                    p2 = textField.getText();\n                    System.out.println(p2);\n                }\n                System.out.println(p1 + p2);\n                enterName.setText(&quot;Player2 enter your name&quot;);\n                count = count+1;\n            }\n        });\n        confirmButton.setFont(new Font(&quot;Tahoma&quot;, Font.PLAIN, 20));\n        confirmButton.setBounds(184, 145, 185, 35);\n        frame.getContentPane().add(confirmButton);\n        \n        JLabel winnerText = new JLabel(&quot;&quot;);\n        winnerText.setFont(new Font(&quot;Tahoma&quot;, Font.PLAIN, 38));\n        winnerText.setBounds(76, 191, 468, 38);\n        frame.getContentPane().add(winnerText);\n    }\n}\n\n</code></pre>\n<p>I ran the code to see if the GUI would appear and function correctly but every time I just got the same error, I have restarted Eclipse multiple times and it did not fix the issue, I have searched for a fix online but have yet to find one that works.</p>\n"},{"tags":["java","linked-list"],"answers":[{"tags":[],"owner":{"account_id":2011141,"reputation":7317,"user_id":1799530,"accept_rate":47,"display_name":"SomeJavaGuy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1428388974,"creation_date":1428388974,"answer_id":29485401,"question_id":29485351,"body_markdown":"Because `removeFirst` is a method defined by the exact implementation of the interface `List` in the class `LinkedList` and is not part of the methods beeing defined in the interface. If you are saving the Object `LinkedList` in a more general variable of the type `List`, then you are allowed to use all the methods that the interface `List` does know, which `removeFirst` is not part of.","title":"How to remove first element from the Linked List?","body":"<p>Because <code>removeFirst</code> is a method defined by the exact implementation of the interface <code>List</code> in the class <code>LinkedList</code> and is not part of the methods beeing defined in the interface. If you are saving the Object <code>LinkedList</code> in a more general variable of the type <code>List</code>, then you are allowed to use all the methods that the interface <code>List</code> does know, which <code>removeFirst</code> is not part of.</p>\n"},{"tags":[],"owner":{"account_id":6070815,"reputation":146,"user_id":4739715,"display_name":"Frank Andres"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1428389126,"creation_date":1428389126,"answer_id":29485447,"question_id":29485351,"body_markdown":"`removeFirst()` is defined for `LinkedList` which implements `List` but it is not defined in the `interface` `List`. In the first approach it works because servers is defined as a `LinkedList`. In the second approach it can not work because servers could be any `List` for example `ArrayList` for which `removeFirst()` is not defined.","title":"How to remove first element from the Linked List?","body":"<p><code>removeFirst()</code> is defined for <code>LinkedList</code> which implements <code>List</code> but it is not defined in the <code>interface</code> <code>List</code>. In the first approach it works because servers is defined as a <code>LinkedList</code>. In the second approach it can not work because servers could be any <code>List</code> for example <code>ArrayList</code> for which <code>removeFirst()</code> is not defined.</p>\n"},{"tags":[],"owner":{"account_id":2540468,"reputation":443,"user_id":2206374,"accept_rate":20,"display_name":"Musaddique"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1428389970,"creation_date":1428389970,"answer_id":29485669,"question_id":29485351,"body_markdown":"LinkedList implement List interface. In List interface removeFirst(0 method is not define. removeFirst() is define and implemented in LinkedList class only. so when you create Object like\r\n\r\nList&lt;&gt; list=new LinkedList&lt;&gt;();\r\n\r\nthen list will access only those method that are declared in List Interface.\r\nso you are unable to access removeFirst() by using list.\r\n\r\nif you required all methods of LinkedList then used below format:\r\n\r\n**LinkedList&lt;&gt; lList =  new LinkedList&lt;&gt;();**\r\n\r\n    import java.util.*;\r\n    \r\n    public class MyClass\r\n    {\r\n        public static void main(String[] args)\r\n        {\r\n            // Create a linked list object:\r\n            LinkedList lList =  new LinkedList();\r\n    \r\n            // Add some elements:\r\n            lList.add(&quot;Isabella&quot;);\r\n            lList.add(&quot;Angelina&quot;);\r\n            lList.add(&quot;Pille&quot;);\r\n            lList.add(&quot;Anabella&quot;);\r\n    \r\n            // Display the elements:\r\n            System.out.println(&quot;The old list:&quot;);\r\n            for (int i=0; i&lt;lList.size(); i++)\r\n                System.out.println(i + &quot; = &quot; + lList.get(i));\r\n    \r\n            // Remove the first element:\r\n               System.out.println(\r\n                      &quot;\\nThe following element has been removed: &quot;\r\n                      + lList.removeFirst());\r\n    \r\n            // Display the new elements:\r\n            System.out.println(&quot;\\nThe new list:&quot;);\r\n            for (int i=0; i&lt;lList.size(); i++)\r\n                System.out.println(i + &quot; = &quot; + lList.get(i));\r\n        }\r\n    }\r\n\r\n","title":"How to remove first element from the Linked List?","body":"<p>LinkedList implement List interface. In List interface removeFirst(0 method is not define. removeFirst() is define and implemented in LinkedList class only. so when you create Object like</p>\n\n<p>List&lt;> list=new LinkedList&lt;>();</p>\n\n<p>then list will access only those method that are declared in List Interface.\nso you are unable to access removeFirst() by using list.</p>\n\n<p>if you required all methods of LinkedList then used below format:</p>\n\n<p><strong>LinkedList&lt;> lList =  new LinkedList&lt;>();</strong></p>\n\n<pre><code>import java.util.*;\n\npublic class MyClass\n{\n    public static void main(String[] args)\n    {\n        // Create a linked list object:\n        LinkedList lList =  new LinkedList();\n\n        // Add some elements:\n        lList.add(\"Isabella\");\n        lList.add(\"Angelina\");\n        lList.add(\"Pille\");\n        lList.add(\"Anabella\");\n\n        // Display the elements:\n        System.out.println(\"The old list:\");\n        for (int i=0; i&lt;lList.size(); i++)\n            System.out.println(i + \" = \" + lList.get(i));\n\n        // Remove the first element:\n           System.out.println(\n                  \"\\nThe following element has been removed: \"\n                  + lList.removeFirst());\n\n        // Display the new elements:\n        System.out.println(\"\\nThe new list:\");\n        for (int i=0; i&lt;lList.size(); i++)\n            System.out.println(i + \" = \" + lList.get(i));\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1922396,"reputation":1,"user_id":1733549,"display_name":"Shivsagar Mitkari"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1428400414,"creation_date":1428391039,"answer_id":29485958,"question_id":29485351,"body_markdown":"in the second approach if u have to use removeFirst() method of LinkedList for List, u have to cast list as follows: \r\n\r\n    List&lt;String&gt; servers = new LinkedList&lt;String&gt;();\r\n    ((LinkedList&lt;String&gt;) servers).removeFirst();\r\n\r\nelse to achieve same can use remove() method\r\n\r\n    servers.remove(0);","title":"How to remove first element from the Linked List?","body":"<p>in the second approach if u have to use removeFirst() method of LinkedList for List, u have to cast list as follows: </p>\n\n<pre><code>List&lt;String&gt; servers = new LinkedList&lt;String&gt;();\n((LinkedList&lt;String&gt;) servers).removeFirst();\n</code></pre>\n\n<p>else to achieve same can use remove() method</p>\n\n<pre><code>servers.remove(0);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9376049,"reputation":3355,"user_id":7643517,"display_name":"Nolequen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695205726,"creation_date":1695205726,"answer_id":77141521,"question_id":29485351,"body_markdown":"Since Java 21 there is a [SequencedCollection][1] interface, a superinteface for `List`. Among other it provides `removeFirst()` method:\r\n\r\n    List.of(1, 2, 3, 4, 5).removeFirst()\r\n\r\n\r\n  [1]: https://openjdk.org/jeps/431","title":"How to remove first element from the Linked List?","body":"<p>Since Java 21 there is a <a href=\"https://openjdk.org/jeps/431\" rel=\"nofollow noreferrer\">SequencedCollection</a> interface, a superinteface for <code>List</code>. Among other it provides <code>removeFirst()</code> method:</p>\n<pre><code>List.of(1, 2, 3, 4, 5).removeFirst()\n</code></pre>\n"}],"owner":{"account_id":3344039,"reputation":11379,"user_id":2809564,"accept_rate":82,"display_name":"john"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5689,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":29485447,"answer_count":5,"score":1,"last_activity_date":1695205726,"creation_date":1428388817,"question_id":29485351,"body_markdown":"I am trying to remove first element from the LinkedList. Below are the two options. I can see only one works but with the other I see compilation error in my eclipse -\r\n\r\n**First Approach:**\r\nThis works fine\r\n\r\n    LinkedList&lt;String&gt; servers = new LinkedList&lt;String&gt;();\r\n    ....\r\n    String firstServerName = servers.removeFirst();\r\n\r\n**Second Approach**\r\nIn this, I get compilation error in my eclipse as - \r\n\r\n&gt; The method removeFirst() is undefined for the type List&lt;String&gt;\r\n\r\n    List&lt;String&gt; servers = new LinkedList&lt;String&gt;();\r\n    ....\r\n    String firstServerName = servers.removeFirst();\r\n\r\nWhat is the difference between the above two? And why first one works but not the second one? \r\n\r\nAlso what is the most efficient way to remove first element from the linked list in Java? I need to do this operation more frequently on my LinkedList.","title":"How to remove first element from the Linked List?","body":"<p>I am trying to remove first element from the LinkedList. Below are the two options. I can see only one works but with the other I see compilation error in my eclipse -</p>\n\n<p><strong>First Approach:</strong>\nThis works fine</p>\n\n<pre><code>LinkedList&lt;String&gt; servers = new LinkedList&lt;String&gt;();\n....\nString firstServerName = servers.removeFirst();\n</code></pre>\n\n<p><strong>Second Approach</strong>\nIn this, I get compilation error in my eclipse as - </p>\n\n<blockquote>\n  <p>The method removeFirst() is undefined for the type List</p>\n</blockquote>\n\n<pre><code>List&lt;String&gt; servers = new LinkedList&lt;String&gt;();\n....\nString firstServerName = servers.removeFirst();\n</code></pre>\n\n<p>What is the difference between the above two? And why first one works but not the second one? </p>\n\n<p>Also what is the most efficient way to remove first element from the linked list in Java? I need to do this operation more frequently on my LinkedList.</p>\n"},{"tags":["java","spring","web-services","soap"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":1,"creation_date":1411981189,"post_id":26095881,"comment_id":40893763,"body_markdown":"Can you add the implementation of your `UserDao` class? Is that annotated as `Reporitory`?","body":"Can you add the implementation of your <code>UserDao</code> class? Is that annotated as <code>Reporitory</code>?"},{"owner":{"account_id":3145069,"reputation":1190,"user_id":2659694,"accept_rate":42,"display_name":"user2659694"},"score":0,"creation_date":1411981803,"post_id":26095881,"comment_id":40894061,"body_markdown":"Sorry, I missed to attach implementation for Dao . I updated as above.","body":"Sorry, I missed to attach implementation for Dao . I updated as above."},{"owner":{"account_id":103314,"reputation":4147,"user_id":276783,"accept_rate":71,"display_name":"Nilesh"},"score":1,"creation_date":1411982061,"post_id":26095881,"comment_id":40894213,"body_markdown":"Please add Repository annotation as requested by @Jens. Also make an entry in the mapping file.","body":"Please add Repository annotation as requested by @Jens. Also make an entry in the mapping file."},{"owner":{"account_id":3145069,"reputation":1190,"user_id":2659694,"accept_rate":42,"display_name":"user2659694"},"score":0,"creation_date":1411982258,"post_id":26095881,"comment_id":40894322,"body_markdown":"+nILESH:I added implementation method. Please check again.","body":"+nILESH:I added implementation method. Please check again."},{"owner":{"account_id":3441337,"reputation":16524,"user_id":2883245,"accept_rate":88,"display_name":"erip"},"score":0,"creation_date":1443020123,"post_id":26095881,"comment_id":53326649,"body_markdown":"@user2659694 Did you figure this out? I&#39;m having a similar problem.","body":"@user2659694 Did you figure this out? I&#39;m having a similar problem."},{"owner":{"account_id":6375963,"reputation":351,"user_id":4946904,"display_name":"bzzhuh"},"score":1,"creation_date":1465969914,"post_id":26095881,"comment_id":73034504,"body_markdown":"Sorry piggybacking off this google result to say: if you&#39;re having trouble figuring out where the problem is after you&#39;ve refactored some stuff around, check to make sure that you haven&#39;t maybe moved a method that called a service... into that same service. Then if you&#39;re tired enough maybe you made the mistake of trying to autowire that service into itself.","body":"Sorry piggybacking off this google result to say: if you&#39;re having trouble figuring out where the problem is after you&#39;ve refactored some stuff around, check to make sure that you haven&#39;t maybe moved a method that called a service... into that same service. Then if you&#39;re tired enough maybe you made the mistake of trying to autowire that service into itself."}],"answers":[{"tags":[],"owner":{"account_id":103314,"reputation":4147,"user_id":276783,"accept_rate":71,"display_name":"Nilesh"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1524532096,"creation_date":1411981083,"answer_id":26096034,"question_id":26095881,"body_markdown":"You seems to be missing implementation for interface UserDao. If you look at the exception closely it says \r\n\r\n\r\n&gt; No qualifying bean of type [edu.java.spring.ws.dao.UserDao] found for\r\n&gt; dependency:\r\n\r\n\r\nThe way `@Autowired` works is that it would automatically look for implementation of a dependency you inject via an interface. In this case since there is no valid implementation of interface UserDao you get the error.Ensure you have a valid implementation for this class and your error should go.\r\n\r\nHope that helps.\r\n\r\n","title":"No found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations:","body":"<p>You seems to be missing implementation for interface UserDao. If you look at the exception closely it says </p>\n\n<blockquote>\n  <p>No qualifying bean of type [edu.java.spring.ws.dao.UserDao] found for\n  dependency:</p>\n</blockquote>\n\n<p>The way <code>@Autowired</code> works is that it would automatically look for implementation of a dependency you inject via an interface. In this case since there is no valid implementation of interface UserDao you get the error.Ensure you have a valid implementation for this class and your error should go.</p>\n\n<p>Hope that helps.</p>\n"},{"tags":[],"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"down_vote_count":1,"up_vote_count":18,"is_accepted":false,"score":17,"last_activity_date":1420403200,"creation_date":1411982355,"answer_id":26096450,"question_id":26095881,"body_markdown":"Add the annotation `@Repository` to the implementation of `UserDaoImpl`\r\n\r\n\r\n    @Repository\r\n    public class UserDaoImpl implements UserDao {\r\n        private static Log log = LogFactory.getLog(UserDaoImpl.class);\r\n    \r\n        @Autowired\r\n        @Qualifier(&quot;sessionFactory&quot;)\r\n        private LocalSessionFactoryBean sessionFactory;\r\n        \r\n        //...\r\n\r\n    }","title":"No found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations:","body":"<p>Add the annotation <code>@Repository</code> to the implementation of <code>UserDaoImpl</code></p>\n\n<pre><code>@Repository\npublic class UserDaoImpl implements UserDao {\n    private static Log log = LogFactory.getLog(UserDaoImpl.class);\n\n    @Autowired\n    @Qualifier(\"sessionFactory\")\n    private LocalSessionFactoryBean sessionFactory;\n\n    //...\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2610591,"reputation":3597,"user_id":2260761,"accept_rate":69,"display_name":"diegomtassis"},"down_vote_count":2,"up_vote_count":73,"is_accepted":false,"score":71,"last_activity_date":1411984114,"creation_date":1411982730,"answer_id":26096574,"question_id":26095881,"body_markdown":"Look at the exception:\r\n\r\n    No qualifying bean of type [edu.java.spring.ws.dao.UserDao] found for dependency\r\n\r\nThis means that there&#39;s no bean available to fulfill that dependency. Yes, you have an implementation of the interface, but you haven&#39;t created a bean for that implementation. You have two options:\r\n\r\n - Annotate `UserDaoImpl` with `@Component` or `@Repository`, and let the component scan do the work for you, exactly as you have done with `UserService`.\r\n - Add the bean manually to your xml file, the same you have done with `UserBoImpl`.\r\n\r\nRemember that if you create the bean explicitly you need to put the definition before the component scan. In this case the order is important.","title":"No found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations:","body":"<p>Look at the exception:</p>\n\n<pre><code>No qualifying bean of type [edu.java.spring.ws.dao.UserDao] found for dependency\n</code></pre>\n\n<p>This means that there's no bean available to fulfill that dependency. Yes, you have an implementation of the interface, but you haven't created a bean for that implementation. You have two options:</p>\n\n<ul>\n<li>Annotate <code>UserDaoImpl</code> with <code>@Component</code> or <code>@Repository</code>, and let the component scan do the work for you, exactly as you have done with <code>UserService</code>.</li>\n<li>Add the bean manually to your xml file, the same you have done with <code>UserBoImpl</code>.</li>\n</ul>\n\n<p>Remember that if you create the bean explicitly you need to put the definition before the component scan. In this case the order is important.</p>\n"},{"tags":[],"owner":{"account_id":3145069,"reputation":1190,"user_id":2659694,"accept_rate":42,"display_name":"user2659694"},"down_vote_count":6,"up_vote_count":3,"is_accepted":false,"score":-3,"last_activity_date":1490098290,"creation_date":1411984265,"answer_id":26097053,"question_id":26095881,"body_markdown":"I missed to add \r\n\r\n    @Controller(&quot;userBo&quot;) into UserBoImpl class.\r\nThe solution for this is adding this controller into Impl class.","title":"No found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations:","body":"<p>I missed to add </p>\n\n<pre><code>@Controller(\"userBo\") into UserBoImpl class.\n</code></pre>\n\n<p>The solution for this is adding this controller into Impl class.</p>\n"},{"tags":[],"owner":{"account_id":4964617,"reputation":185,"user_id":3994426,"display_name":"Kumar Gaurav Sharma"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1497010212,"creation_date":1497010212,"answer_id":44457496,"question_id":26095881,"body_markdown":"Add repository annotation before your DAO Implementation Class.\r\nexample:\r\n\r\n    @Repository\r\n    public class EmpDAOImpl extends BaseNamedParameterJdbcDaoSupportUAM \r\n    implements EmpDAO{ \r\n    }","title":"No found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations:","body":"<p>Add repository annotation before your DAO Implementation Class.\nexample:</p>\n\n<pre><code>@Repository\npublic class EmpDAOImpl extends BaseNamedParameterJdbcDaoSupportUAM \nimplements EmpDAO{ \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7998057,"reputation":362,"user_id":6033741,"display_name":"Georgi Georgiev"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1500277698,"creation_date":1500277698,"answer_id":45138655,"question_id":26095881,"body_markdown":"I added `@Service` before impl class and the error is gone.\r\n\r\n    @Service\r\n    public class FCSPAnalysisImpl implements FCSPAnalysis\r\n    {}","title":"No found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations:","body":"<p>I added <code>@Service</code> before impl class and the error is gone.</p>\n\n<pre><code>@Service\npublic class FCSPAnalysisImpl implements FCSPAnalysis\n{}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1608053,"reputation":141,"user_id":1487697,"display_name":"Jitendra Nandre"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1506690793,"creation_date":1506690793,"answer_id":46489590,"question_id":26095881,"body_markdown":"**We face this issue but had different reason, here is the reason:**\r\n\r\nIn our project found multiple bean entry with same bean name. 1 in applicationcontext.xml &amp; 1 in dispatcherServlet.xml\r\n\r\n**Example:** \r\n\r\n    &lt;bean name=&quot;dataService&quot; class=&quot;com.app.DataServiceImpl&quot;&gt;\r\n    &lt;bean name=&quot;dataService&quot; class=&quot;com.app.DataServiceController&quot;&gt;\r\n\r\n&amp; \r\nwe are trying to autowired by dataService name.\r\n\r\n**Solution:**\r\nwe changed the bean name &amp; its solved.","title":"No found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations:","body":"<p><strong>We face this issue but had different reason, here is the reason:</strong></p>\n\n<p>In our project found multiple bean entry with same bean name. 1 in applicationcontext.xml &amp; 1 in dispatcherServlet.xml</p>\n\n<p><strong>Example:</strong> </p>\n\n<pre><code>&lt;bean name=\"dataService\" class=\"com.app.DataServiceImpl\"&gt;\n&lt;bean name=\"dataService\" class=\"com.app.DataServiceController\"&gt;\n</code></pre>\n\n<p>&amp; \nwe are trying to autowired by dataService name.</p>\n\n<p><strong>Solution:</strong>\nwe changed the bean name &amp; its solved.</p>\n"},{"tags":[],"owner":{"account_id":10932492,"reputation":105,"user_id":8035169,"display_name":"OAM"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1550839681,"creation_date":1525260939,"answer_id":50133748,"question_id":26095881,"body_markdown":"In my case I had to move the `@Service` annotation from the interface to the implementation class.","title":"No found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations:","body":"<p>In my case I had to move the <code>@Service</code> annotation from the interface to the implementation class.</p>\n"},{"tags":[],"owner":{"account_id":5745825,"reputation":11543,"user_id":4537090,"accept_rate":79,"display_name":"WesternGun"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1543921659,"creation_date":1543921659,"answer_id":53611584,"question_id":26095881,"body_markdown":"In my case, the application context is not loaded because I add `@DataJpaTest` annotation. When I change it to `@SpringBootTest` it works.\r\n\r\n`@DataJpaTest` only loads the JPA part of a Spring Boot application. In the JavaDoc: \r\n\r\n&gt; Annotation that can be used in combination with `@RunWith(SpringRunner.class)` for a typical JPA test. Can be used when a test focuses **only** on JPA components.\r\nUsing this annotation will disable full auto-configuration and instead apply only configuration relevant to JPA tests.\r\n\r\n&gt; By default, tests annotated with `@DataJpaTest` will use an embedded in-memory database (replacing any explicit or usually auto-configured DataSource). The `@AutoConfigureTestDatabase` annotation can be used to override these settings.\r\nIf you are looking to load your full application configuration, but use an embedded database, you should consider `@SpringBootTest` combined with `@AutoConfigureTestDatabase` rather than this annotation.","title":"No found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations:","body":"<p>In my case, the application context is not loaded because I add <code>@DataJpaTest</code> annotation. When I change it to <code>@SpringBootTest</code> it works.</p>\n\n<p><code>@DataJpaTest</code> only loads the JPA part of a Spring Boot application. In the JavaDoc: </p>\n\n<blockquote>\n  <p>Annotation that can be used in combination with <code>@RunWith(SpringRunner.class)</code> for a typical JPA test. Can be used when a test focuses <strong>only</strong> on JPA components.\n  Using this annotation will disable full auto-configuration and instead apply only configuration relevant to JPA tests.</p>\n  \n  <p>By default, tests annotated with <code>@DataJpaTest</code> will use an embedded in-memory database (replacing any explicit or usually auto-configured DataSource). The <code>@AutoConfigureTestDatabase</code> annotation can be used to override these settings.\n  If you are looking to load your full application configuration, but use an embedded database, you should consider <code>@SpringBootTest</code> combined with <code>@AutoConfigureTestDatabase</code> rather than this annotation.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":14699788,"reputation":1019,"user_id":10616141,"display_name":"kris"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1569317572,"creation_date":1569317572,"answer_id":58077253,"question_id":26095881,"body_markdown":"Could me multiple reason for this. But you want might forget to add as @Bean for component which you have did @Autowired.\r\n\r\nIn my case, i have forgot to decorate with @Bean which causing this issue.","title":"No found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations:","body":"<p>Could me multiple reason for this. But you want might forget to add as @Bean for component which you have did @Autowired.</p>\n\n<p>In my case, i have forgot to decorate with @Bean which causing this issue.</p>\n"},{"tags":[],"owner":{"account_id":4900434,"reputation":3375,"user_id":3948917,"display_name":"Marcin T.P. Łuczyński"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1583765952,"creation_date":1583765952,"answer_id":60603196,"question_id":26095881,"body_markdown":"In my case, I had the following structure of a project:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nWhen I was running the test, I kept receiving problems with auro-wiring both *facade* and *kafka* attributes - error came back with information about missing instances, even though the test and the API classes reside in the very same package. Apparently those were not scanned.\r\n\r\nWhat actually helped was **adding *@Import* annotation** bringing the missing classes to Spring classpath and making them being instantiated.\r\n\r\n  [1]: https://i.stack.imgur.com/0Pmyd.png","title":"No found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations:","body":"<p>In my case, I had the following structure of a project:</p>\n\n<p><a href=\"https://i.stack.imgur.com/0Pmyd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0Pmyd.png\" alt=\"enter image description here\"></a></p>\n\n<p>When I was running the test, I kept receiving problems with auro-wiring both <em>facade</em> and <em>kafka</em> attributes - error came back with information about missing instances, even though the test and the API classes reside in the very same package. Apparently those were not scanned.</p>\n\n<p>What actually helped was <strong>adding <em>@Import</em> annotation</strong> bringing the missing classes to Spring classpath and making them being instantiated.</p>\n"},{"tags":[],"owner":{"account_id":4602432,"reputation":193,"user_id":3732766,"accept_rate":43,"display_name":"Jack"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1591042573,"creation_date":1591042573,"answer_id":62140330,"question_id":26095881,"body_markdown":"When you use @DataJpaTest you need to load classes using @Import explicitly. It wouldn&#39;t load you for auto.","title":"No found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations:","body":"<p>When you use @DataJpaTest you need to load classes using @Import explicitly. It wouldn't load you for auto.</p>\n"},{"tags":[],"owner":{"account_id":4323208,"reputation":2481,"user_id":3530707,"display_name":"julianm"},"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1607054663,"creation_date":1607054663,"answer_id":65137777,"question_id":26095881,"body_markdown":"I just **solved this error happening in my tests.**   \r\n\r\nJust make sure your test class has all dependencies in the attributes of the class being tested annotated with `@MockBean` so SpringBoot test context can wire your classes correctly.\r\n\r\n**Only** if you are testing controller: you need also **class annotations** to load the Controller context propertly.  \r\n\r\n**Check it out:**\r\n\r\n    @DisplayName(&quot;UserController Adapter Test&quot;)\r\n    @WebMvcTest(UserController.class)\r\n    @AutoConfigureMockMvc(addFilters = false)\r\n    @Import(TestConfig.class)\r\n    public class UserControllerTest {\r\n    \r\n    @Autowired\r\n    private MockMvc mockMvc;\r\n\r\n    @Autowired\r\n    private ObjectMapper objectMapper;\r\n\r\n    @MockBean\r\n    private CreateUserCommand createUserCommand;\r\n\r\n    @MockBean\r\n    private GetUserListQuery getUserListQuery;\r\n\r\n    @MockBean\r\n    private GetUserQuery getUserQuery;\r\n\r\n\r\n\r\n\r\n","title":"No found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations:","body":"<p>I just <strong>solved this error happening in my tests.</strong></p>\n<p>Just make sure your test class has all dependencies in the attributes of the class being tested annotated with <code>@MockBean</code> so SpringBoot test context can wire your classes correctly.</p>\n<p><strong>Only</strong> if you are testing controller: you need also <strong>class annotations</strong> to load the Controller context propertly.</p>\n<p><strong>Check it out:</strong></p>\n<pre><code>@DisplayName(&quot;UserController Adapter Test&quot;)\n@WebMvcTest(UserController.class)\n@AutoConfigureMockMvc(addFilters = false)\n@Import(TestConfig.class)\npublic class UserControllerTest {\n\n@Autowired\nprivate MockMvc mockMvc;\n\n@Autowired\nprivate ObjectMapper objectMapper;\n\n@MockBean\nprivate CreateUserCommand createUserCommand;\n\n@MockBean\nprivate GetUserListQuery getUserListQuery;\n\n@MockBean\nprivate GetUserQuery getUserQuery;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3077176,"reputation":178,"user_id":2606228,"display_name":"nikhil2000"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1619535306,"creation_date":1619535306,"answer_id":67285525,"question_id":26095881,"body_markdown":"for me, the culprit was the size of dependencies.\r\n\r\nsome of the project related dependencies were not downloaded properly, and it caused this error. checked with a teammate with similar setup and added the jars again.","title":"No found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations:","body":"<p>for me, the culprit was the size of dependencies.</p>\n<p>some of the project related dependencies were not downloaded properly, and it caused this error. checked with a teammate with similar setup and added the jars again.</p>\n"},{"tags":[],"owner":{"account_id":13603498,"reputation":188,"user_id":9813464,"display_name":"Ash"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1631721420,"creation_date":1631721420,"answer_id":69196375,"question_id":26095881,"body_markdown":"In my case, I solved it by importing all the autowired dependencies (with @Autowired annotation) from the controller class with @MockBean annotator in the test class. Ex.:\r\n\r\n**Controller.java**\r\n\r\n    @Autowired\r\n    private Service service\r\n\r\n    @Autowired\r\n    private Dao daoService\r\n\r\n**ControllerTest.java**\r\n\r\n    @MockBean\r\n    private Service service\r\n    \r\n    @MockBean\r\n    private Dao daoService\r\n\r\nKeep in mind that this is only needed if you have tests focusing on classes rather than the entire app. Another approach to avoid this error is by loading the entire app at once with @SprintTest instead of @WebMvcTest(Controller.class). This [guide][1] has some more info on testing basics that could help.\r\n\r\n\r\n  [1]: https://www.baeldung.com/spring-boot-testing","title":"No found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations:","body":"<p>In my case, I solved it by importing all the autowired dependencies (with @Autowired annotation) from the controller class with @MockBean annotator in the test class. Ex.:</p>\n<p><strong>Controller.java</strong></p>\n<pre><code>@Autowired\nprivate Service service\n\n@Autowired\nprivate Dao daoService\n</code></pre>\n<p><strong>ControllerTest.java</strong></p>\n<pre><code>@MockBean\nprivate Service service\n\n@MockBean\nprivate Dao daoService\n</code></pre>\n<p>Keep in mind that this is only needed if you have tests focusing on classes rather than the entire app. Another approach to avoid this error is by loading the entire app at once with @SprintTest instead of @WebMvcTest(Controller.class). This <a href=\"https://www.baeldung.com/spring-boot-testing\" rel=\"nofollow noreferrer\">guide</a> has some more info on testing basics that could help.</p>\n"},{"tags":[],"owner":{"account_id":11389854,"reputation":6022,"user_id":8370915,"display_name":"invzbl3"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1645056011,"creation_date":1645056011,"answer_id":71150819,"question_id":26095881,"body_markdown":"I&#39;ve encountered similar issue in multi-module project w/ `expected at least 1 bean which qualifies as autowire candidate` like:\r\n\r\n    Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type &#39;com.example.stockclient.repository.StockPriceRepository&#39; available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}\r\n\r\nAnd in my use case the cause of issue was missing annotation `@EnableJpaRepositories`, which is used for enabling auto configuration support for `Spring Data JPA` required to know the path of `JPA` repositories. \r\n\r\nBy default, it will scan only the main application package and its sub packages for detecting the `JPA` repositories.\r\n\r\nFor more details you can refer, for instance, to this [article][1].\r\n\r\n  [1]: https://chathurangat.wordpress.com/2017/11/13/what-are-the-uses-of-entityscan-and-enablejparepositories-annotations/","title":"No found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations:","body":"<p>I've encountered similar issue in multi-module project w/ <code>expected at least 1 bean which qualifies as autowire candidate</code> like:</p>\n<pre><code>Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'com.example.stockclient.repository.StockPriceRepository' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}\n</code></pre>\n<p>And in my use case the cause of issue was missing annotation <code>@EnableJpaRepositories</code>, which is used for enabling auto configuration support for <code>Spring Data JPA</code> required to know the path of <code>JPA</code> repositories.</p>\n<p>By default, it will scan only the main application package and its sub packages for detecting the <code>JPA</code> repositories.</p>\n<p>For more details you can refer, for instance, to this <a href=\"https://chathurangat.wordpress.com/2017/11/13/what-are-the-uses-of-entityscan-and-enablejparepositories-annotations/\" rel=\"nofollow noreferrer\">article</a>.</p>\n"},{"tags":[],"owner":{"account_id":7027585,"reputation":305,"user_id":5384491,"display_name":"Arutsudar Arut"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695205644,"creation_date":1695205644,"answer_id":77141512,"question_id":26095881,"body_markdown":"If this issue happens for an interface which extends JpaRepository, then, make sure you don&#39;t have `@EnableAutoConfiguration(exclude={DataSourceAutoConfiguration.class})` in the main Application class.","title":"No found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations:","body":"<p>If this issue happens for an interface which extends JpaRepository, then, make sure you don't have <code>@EnableAutoConfiguration(exclude={DataSourceAutoConfiguration.class})</code> in the main Application class.</p>\n"}],"owner":{"account_id":3145069,"reputation":1190,"user_id":2659694,"accept_rate":42,"display_name":"user2659694"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":586581,"favorite_count":0,"down_vote_count":1,"up_vote_count":94,"answer_count":17,"score":93,"last_activity_date":1695205644,"creation_date":1411980562,"question_id":26095881,"body_markdown":"I am trying to write a SOAP service using Spring, however I receive a Dependency Injection issue. I&#39;m having problems using `@Autowired` through the Service like this:\r\n\r\n        public interface UserDao {\r\n    \tUser getUser(String username);\r\n    }\r\n\r\nImplementation for Dao as below:\r\n\r\n  \r\n\r\n      @Controller(&quot;userDao&quot;)\r\n        public class UserDaoImpl implements UserDao {\r\n    \tprivate static Log log = LogFactory.getLog(UserDaoImpl.class);\r\n    \r\n    \t@Autowired\r\n    \t@Qualifier(&quot;sessionFactory&quot;)\r\n    \tprivate LocalSessionFactoryBean sessionFactory;\r\n    \r\n    \t@Override\r\n    \tpublic User getUser(String username) {\r\n    \t\tSession session = sessionFactory.getObject().openSession();\r\n    \t\t// Criteria query = session.createCriteria(Student.class);\r\n    \t\tQuery query = session\r\n    \t\t\t\t.createQuery(&quot;from User where username = :username&quot;);\r\n    \t\tquery.setParameter(&quot;username&quot;, username);\r\n    \t\ttry {\r\n    \t\t\tSystem.out.println(&quot;\\n Load Student by ID query is running...&quot;);\r\n    \t\t\t/*\r\n    \t\t\t * query.add(Restrictions.like(&quot;id&quot;, &quot;%&quot; + id + &quot;%&quot;,\r\n    \t\t\t * MatchMode.ANYWHERE)); return (Student) query.list();\r\n    \t\t\t */\r\n    \t\t\treturn (User) query.uniqueResult();\r\n    \t\t} catch (Exception e) {\r\n    \t\t\t// TODO: handle exception\r\n    \t\t\tlog.info(e.toString());\r\n    \t\t} finally {\r\n    \t\t\tsession.close();\r\n    \t\t}\r\n    \t\treturn null;\r\n    \t}\r\n    \r\n    }\r\n\r\nand \r\n\r\n    \r\n\r\n    public interface UserBo {\r\n    \tUser loadUser(String username);\r\n    }\r\n\r\nand \r\n\r\n    public class UserBoImpl implements UserBo {\r\n    \t@Autowired\r\n    \tprivate UserDao userDao;\r\n    \r\n    \t@Override\r\n    \tpublic User loadUser(String username) {\r\n    \t\t// TODO Auto-generated method stub\r\n    \t\treturn userDao.getUser(username);\r\n    \t}\r\n    \r\n    }\r\n\r\n\r\n    @WebService\r\n    @Component\r\n    public class UserService {\r\n    \r\n    \t@Autowired\r\n    \tprivate UserBo userBo;\r\n    \r\n    \t@WebMethod(operationName = &quot;say&quot;)\r\n    \tpublic String sayHello(String name) {\r\n    \t\treturn (&quot;Hello Java to &quot; + name);\r\n    \t}\r\n    \r\n    \t@WebMethod(operationName = &quot;getUser&quot;)\r\n    \tpublic User getUser(String username) {\r\n    \t\treturn userBo.loadUser(username);\r\n    \t}\r\n    }\r\n\r\n\r\nThe below is xml mapping file\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n    \txmlns:context=&quot;http://www.springframework.org/schema/context&quot;\r\n    \txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:ws=&quot;http://jax-ws.dev.java.net/spring/core&quot;\r\n    \txmlns:wss=&quot;http://jax-ws.dev.java.net/spring/servlet&quot;\r\n    \txsi:schemaLocation=&quot;\r\n        http://www.springframework.org/schema/beans \r\n        http://www.springframework.org/schema/beans/spring-beans-4.0.xsd\r\n        http://jax-ws.dev.java.net/spring/core\r\n        http://jax-ws.java.net/spring/core.xsd\r\n        http://jax-ws.dev.java.net/spring/servlet\r\n        http://jax-ws.java.net/spring/servlet.xsd\r\n        \r\n        http://www.springframework.org/schema/context \r\n        http://www.springframework.org/schema/context/spring-context-4.0.xsd&quot;&gt;\r\n    \t&lt;context:annotation-config /&gt;\r\n    \t\r\n    \t&lt;context:component-scan base-package=&quot;edu.java.spring.ws&quot;&gt;&lt;/context:component-scan&gt;\r\n    \t&lt;context:component-scan base-package=&quot;edu.java.spring.ws.dao&quot;&gt;&lt;/context:component-scan&gt;\r\n\t    &lt;bean id=&quot;userDao&quot; class=&quot;edu.java.spring.ws.dao.UserDaoImpl&quot;&gt;&lt;/bean&gt;\r\n    \t&lt;!-- &lt;context:component-scan base-package=&quot;edu.java.spring.ws.bo&quot;&gt;&lt;/context:component-scan&gt;\r\n    \t --&gt;\r\n    \t&lt;wss:binding url=&quot;/user&quot;&gt;\r\n    \t\t&lt;wss:service&gt;\r\n    \t\t\t&lt;ws:service bean=&quot;#userService&quot; /&gt;\r\n    \t\t&lt;/wss:service&gt;\r\n    \t&lt;/wss:binding&gt;\r\n    \t&lt;bean id=&quot;userBo&quot; class=&quot;edu.java.spring.ws.bo.impl.UserBoImpl&quot;&gt;&lt;/bean&gt;\r\n    \t&lt;bean id=&quot;dataSource&quot;\r\n    \t\tclass=&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;&gt;\r\n    \t\t&lt;property name=&quot;driverClassName&quot; value=&quot;com.mysql.jdbc.Driver&quot; /&gt;\r\n    \t\t&lt;property name=&quot;url&quot; value=&quot;jdbc:mysql://localhost:3306/contentdb&quot; /&gt;\r\n    \t\t&lt;property name=&quot;username&quot; value=&quot;root&quot; /&gt;\r\n    \t\t&lt;property name=&quot;password&quot; value=&quot;123456&quot; /&gt;\r\n    \t&lt;/bean&gt;\r\n    \t&lt;bean id=&quot;sessionFactory&quot;\r\n    \t\tclass=&quot;org.springframework.orm.hibernate4.LocalSessionFactoryBean&quot;&gt;\r\n    \t\t&lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;&gt;&lt;/property&gt;\r\n    \t\t&lt;property name=&quot;hibernateProperties&quot;&gt;\r\n    \t\t\t&lt;props&gt;\r\n    \t\t\t\t&lt;prop key=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.MySQLDialect&lt;/prop&gt;\r\n    \t\t\t\t&lt;prop key=&quot;hibernate.show_sql&quot;&gt;true&lt;/prop&gt;\r\n    \t\t\t&lt;/props&gt;\r\n    \t\t&lt;/property&gt;\r\n    \t\t&lt;property name=&quot;packagesToScan&quot; value=&quot;edu.java.spring.ws.model&quot; /&gt;\r\n    \t&lt;/bean&gt;\r\n    &lt;/beans&gt;\r\n\r\n\r\n**And the error thrown when deploying is:\r\nHere is the updated stack trace:**\r\n\r\n    org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;com.sun.xml.ws.transport.http.servlet.SpringBinding#0&#39; defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Cannot create inner bean &#39;(inner bean)#538071ba&#39; of type [org.jvnet.jax_ws_commons.spring.SpringService] while setting bean property &#39;service&#39;; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;(inner bean)#538071ba&#39; defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Cannot resolve reference to bean &#39;userService&#39; while setting bean property &#39;bean&#39;; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;userService&#39;: Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private edu.java.spring.ws.bo.UserBo edu.java.spring.ws.UserService.userBo; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;userBo&#39;: Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private edu.java.spring.ws.dao.UserDao edu.java.spring.ws.bo.impl.UserBoImpl.userDao; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type [edu.java.spring.ws.dao.UserDao] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}\r\n    \tat org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveInnerBean(BeanDefinitionValueResolver.java:290)\r\n    \tat org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:129)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1456)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1197)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:537)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:475)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:304)\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:228)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:300)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:195)\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:703)\r\n    \tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:760)\r\n    \tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:482)\r\n    \tat org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:403)\r\n    \tat org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:306)\r\n    \tat org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:106)\r\n    \tat org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4992)\r\n    \tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5490)\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\r\n    \tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1575)\r\n    \tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1565)\r\n    \tat java.util.concurrent.FutureTask.run(Unknown Source)\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\r\n    \tat java.lang.Thread.run(Unknown Source)\r\n    Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;(inner bean)#538071ba&#39; defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Cannot resolve reference to bean &#39;userService&#39; while setting bean property &#39;bean&#39;; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;userService&#39;: Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private edu.java.spring.ws.bo.UserBo edu.java.spring.ws.UserService.userBo; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;userBo&#39;: Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private edu.java.spring.ws.dao.UserDao edu.java.spring.ws.bo.impl.UserBoImpl.userDao; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type [edu.java.spring.ws.dao.UserDao] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}\r\n    \tat org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:336)\r\n    \tat org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:108)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1456)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1197)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:537)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:475)\r\n    \tat org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveInnerBean(BeanDefinitionValueResolver.java:276)\r\n    \t... 24 more\r\n    Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;userService&#39;: Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private edu.java.spring.ws.bo.UserBo edu.java.spring.ws.UserService.userBo; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;userBo&#39;: Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private edu.java.spring.ws.dao.UserDao edu.java.spring.ws.bo.impl.UserBoImpl.userDao; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type [edu.java.spring.ws.dao.UserDao] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}\r\n    \tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:292)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1185)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:537)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:475)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:304)\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:228)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:300)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:195)\r\n    \tat org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:328)\r\n    \t... 30 more\r\n    Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: private edu.java.spring.ws.bo.UserBo edu.java.spring.ws.UserService.userBo; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;userBo&#39;: Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private edu.java.spring.ws.dao.UserDao edu.java.spring.ws.bo.impl.UserBoImpl.userDao; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type [edu.java.spring.ws.dao.UserDao] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}\r\n    \tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:508)\r\n    \tat org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87)\r\n    \tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:289)\r\n    \t... 38 more\r\n    Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;userBo&#39;: Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private edu.java.spring.ws.dao.UserDao edu.java.spring.ws.bo.impl.UserBoImpl.userDao; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type [edu.java.spring.ws.dao.UserDao] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}\r\n    \tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:292)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1185)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:537)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:475)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:304)\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:228)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:300)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:195)\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:1017)\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:960)\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:858)\r\n    \tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:480)\r\n    \t... 40 more\r\n    Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: private edu.java.spring.ws.dao.UserDao edu.java.spring.ws.bo.impl.UserBoImpl.userDao; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type [edu.java.spring.ws.dao.UserDao] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}\r\n    \tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:508)\r\n    \tat org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87)\r\n    \tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:289)\r\n    \t... 51 more\r\n    Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type [edu.java.spring.ws.dao.UserDao] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoSuchBeanDefinitionException(DefaultListableBeanFactory.java:1103)\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:963)\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:858)\r\n    \tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:480)\r\n    \t... 53 more\r\n\r\n\r\n","title":"No found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations:","body":"<p>I am trying to write a SOAP service using Spring, however I receive a Dependency Injection issue. I'm having problems using <code>@Autowired</code> through the Service like this:</p>\n\n<pre><code>    public interface UserDao {\n    User getUser(String username);\n}\n</code></pre>\n\n<p>Implementation for Dao as below:</p>\n\n<pre><code>  @Controller(\"userDao\")\n    public class UserDaoImpl implements UserDao {\n    private static Log log = LogFactory.getLog(UserDaoImpl.class);\n\n    @Autowired\n    @Qualifier(\"sessionFactory\")\n    private LocalSessionFactoryBean sessionFactory;\n\n    @Override\n    public User getUser(String username) {\n        Session session = sessionFactory.getObject().openSession();\n        // Criteria query = session.createCriteria(Student.class);\n        Query query = session\n                .createQuery(\"from User where username = :username\");\n        query.setParameter(\"username\", username);\n        try {\n            System.out.println(\"\\n Load Student by ID query is running...\");\n            /*\n             * query.add(Restrictions.like(\"id\", \"%\" + id + \"%\",\n             * MatchMode.ANYWHERE)); return (Student) query.list();\n             */\n            return (User) query.uniqueResult();\n        } catch (Exception e) {\n            // TODO: handle exception\n            log.info(e.toString());\n        } finally {\n            session.close();\n        }\n        return null;\n    }\n\n}\n</code></pre>\n\n<p>and </p>\n\n<pre><code>public interface UserBo {\n    User loadUser(String username);\n}\n</code></pre>\n\n<p>and </p>\n\n<pre><code>public class UserBoImpl implements UserBo {\n    @Autowired\n    private UserDao userDao;\n\n    @Override\n    public User loadUser(String username) {\n        // TODO Auto-generated method stub\n        return userDao.getUser(username);\n    }\n\n}\n\n\n@WebService\n@Component\npublic class UserService {\n\n    @Autowired\n    private UserBo userBo;\n\n    @WebMethod(operationName = \"say\")\n    public String sayHello(String name) {\n        return (\"Hello Java to \" + name);\n    }\n\n    @WebMethod(operationName = \"getUser\")\n    public User getUser(String username) {\n        return userBo.loadUser(username);\n    }\n}\n</code></pre>\n\n<p>The below is xml mapping file</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n    xmlns:context=\"http://www.springframework.org/schema/context\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:ws=\"http://jax-ws.dev.java.net/spring/core\"\n    xmlns:wss=\"http://jax-ws.dev.java.net/spring/servlet\"\n    xsi:schemaLocation=\"\n    http://www.springframework.org/schema/beans \n    http://www.springframework.org/schema/beans/spring-beans-4.0.xsd\n    http://jax-ws.dev.java.net/spring/core\n    http://jax-ws.java.net/spring/core.xsd\n    http://jax-ws.dev.java.net/spring/servlet\n    http://jax-ws.java.net/spring/servlet.xsd\n\n    http://www.springframework.org/schema/context \n    http://www.springframework.org/schema/context/spring-context-4.0.xsd\"&gt;\n    &lt;context:annotation-config /&gt;\n\n    &lt;context:component-scan base-package=\"edu.java.spring.ws\"&gt;&lt;/context:component-scan&gt;\n    &lt;context:component-scan base-package=\"edu.java.spring.ws.dao\"&gt;&lt;/context:component-scan&gt;\n    &lt;bean id=\"userDao\" class=\"edu.java.spring.ws.dao.UserDaoImpl\"&gt;&lt;/bean&gt;\n    &lt;!-- &lt;context:component-scan base-package=\"edu.java.spring.ws.bo\"&gt;&lt;/context:component-scan&gt;\n     --&gt;\n    &lt;wss:binding url=\"/user\"&gt;\n        &lt;wss:service&gt;\n            &lt;ws:service bean=\"#userService\" /&gt;\n        &lt;/wss:service&gt;\n    &lt;/wss:binding&gt;\n    &lt;bean id=\"userBo\" class=\"edu.java.spring.ws.bo.impl.UserBoImpl\"&gt;&lt;/bean&gt;\n    &lt;bean id=\"dataSource\"\n        class=\"org.springframework.jdbc.datasource.DriverManagerDataSource\"&gt;\n        &lt;property name=\"driverClassName\" value=\"com.mysql.jdbc.Driver\" /&gt;\n        &lt;property name=\"url\" value=\"jdbc:mysql://localhost:3306/contentdb\" /&gt;\n        &lt;property name=\"username\" value=\"root\" /&gt;\n        &lt;property name=\"password\" value=\"123456\" /&gt;\n    &lt;/bean&gt;\n    &lt;bean id=\"sessionFactory\"\n        class=\"org.springframework.orm.hibernate4.LocalSessionFactoryBean\"&gt;\n        &lt;property name=\"dataSource\" ref=\"dataSource\"&gt;&lt;/property&gt;\n        &lt;property name=\"hibernateProperties\"&gt;\n            &lt;props&gt;\n                &lt;prop key=\"hibernate.dialect\"&gt;org.hibernate.dialect.MySQLDialect&lt;/prop&gt;\n                &lt;prop key=\"hibernate.show_sql\"&gt;true&lt;/prop&gt;\n            &lt;/props&gt;\n        &lt;/property&gt;\n        &lt;property name=\"packagesToScan\" value=\"edu.java.spring.ws.model\" /&gt;\n    &lt;/bean&gt;\n&lt;/beans&gt;\n</code></pre>\n\n<p><strong>And the error thrown when deploying is:\nHere is the updated stack trace:</strong></p>\n\n<pre><code>org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'com.sun.xml.ws.transport.http.servlet.SpringBinding#0' defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Cannot create inner bean '(inner bean)#538071ba' of type [org.jvnet.jax_ws_commons.spring.SpringService] while setting bean property 'service'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name '(inner bean)#538071ba' defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Cannot resolve reference to bean 'userService' while setting bean property 'bean'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userService': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private edu.java.spring.ws.bo.UserBo edu.java.spring.ws.UserService.userBo; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userBo': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private edu.java.spring.ws.dao.UserDao edu.java.spring.ws.bo.impl.UserBoImpl.userDao; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type [edu.java.spring.ws.dao.UserDao] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}\n    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveInnerBean(BeanDefinitionValueResolver.java:290)\n    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:129)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1456)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1197)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:537)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:475)\n    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:304)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:228)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:300)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:195)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:703)\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:760)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:482)\n    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:403)\n    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:306)\n    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:106)\n    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4992)\n    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5490)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1575)\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1565)\n    at java.util.concurrent.FutureTask.run(Unknown Source)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\n    at java.lang.Thread.run(Unknown Source)\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name '(inner bean)#538071ba' defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Cannot resolve reference to bean 'userService' while setting bean property 'bean'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userService': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private edu.java.spring.ws.bo.UserBo edu.java.spring.ws.UserService.userBo; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userBo': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private edu.java.spring.ws.dao.UserDao edu.java.spring.ws.bo.impl.UserBoImpl.userDao; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type [edu.java.spring.ws.dao.UserDao] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}\n    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:336)\n    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:108)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1456)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1197)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:537)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:475)\n    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveInnerBean(BeanDefinitionValueResolver.java:276)\n    ... 24 more\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userService': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private edu.java.spring.ws.bo.UserBo edu.java.spring.ws.UserService.userBo; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userBo': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private edu.java.spring.ws.dao.UserDao edu.java.spring.ws.bo.impl.UserBoImpl.userDao; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type [edu.java.spring.ws.dao.UserDao] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:292)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1185)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:537)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:475)\n    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:304)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:228)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:300)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:195)\n    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:328)\n    ... 30 more\nCaused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: private edu.java.spring.ws.bo.UserBo edu.java.spring.ws.UserService.userBo; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userBo': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private edu.java.spring.ws.dao.UserDao edu.java.spring.ws.bo.impl.UserBoImpl.userDao; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type [edu.java.spring.ws.dao.UserDao] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:508)\n    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87)\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:289)\n    ... 38 more\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userBo': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private edu.java.spring.ws.dao.UserDao edu.java.spring.ws.bo.impl.UserBoImpl.userDao; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type [edu.java.spring.ws.dao.UserDao] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:292)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1185)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:537)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:475)\n    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:304)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:228)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:300)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:195)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:1017)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:960)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:858)\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:480)\n    ... 40 more\nCaused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: private edu.java.spring.ws.dao.UserDao edu.java.spring.ws.bo.impl.UserBoImpl.userDao; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type [edu.java.spring.ws.dao.UserDao] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:508)\n    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87)\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:289)\n    ... 51 more\nCaused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type [edu.java.spring.ws.dao.UserDao] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoSuchBeanDefinitionException(DefaultListableBeanFactory.java:1103)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:963)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:858)\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:480)\n    ... 53 more\n</code></pre>\n"},{"tags":["java","eclipse","maven","tomcat","pom.xml"],"comments":[{"owner":{"account_id":350117,"reputation":8653,"user_id":685806,"accept_rate":44,"display_name":"Pino"},"score":0,"creation_date":1695196038,"post_id":77139967,"comment_id":135990123,"body_markdown":"If you have a Maven-based applicaton don&#39;t modify &quot;Java Build Path&quot; manually in Eclipse: it must be managed by Maven.","body":"If you have a Maven-based applicaton don&#39;t modify &quot;Java Build Path&quot; manually in Eclipse: it must be managed by Maven."},{"owner":{"account_id":350117,"reputation":8653,"user_id":685806,"accept_rate":44,"display_name":"Pino"},"score":0,"creation_date":1695196162,"post_id":77139967,"comment_id":135990147,"body_markdown":"&quot;Eclipse deploys the application somewhere&quot; is too vague.  Configure a Tomcat instance in Eclipse so that Eclipse uses it.","body":"&quot;Eclipse deploys the application somewhere&quot; is too vague.  Configure a Tomcat instance in Eclipse so that Eclipse uses it."},{"owner":{"account_id":25616696,"reputation":11,"user_id":19389194,"display_name":"kortex"},"score":0,"creation_date":1695204592,"post_id":77139967,"comment_id":135991929,"body_markdown":"&quot;somewhere&quot;: sorry for the confusion\nI wanted to say:\n  - I configured a Tomcat instance in Eclipse\n  - the directories used by Eclipse and/or Tomcat are managed by Eclipse and/or Tomcat: I don&#39;t fix them\n--&gt; the app is deployed in the right directory automatically :)","body":"&quot;somewhere&quot;: sorry for the confusion I wanted to say:   - I configured a Tomcat instance in Eclipse   - the directories used by Eclipse and/or Tomcat are managed by Eclipse and/or Tomcat: I don&#39;t fix them --&gt; the app is deployed in the right directory automatically :)"}],"answers":[{"tags":[],"owner":{"account_id":25616696,"reputation":11,"user_id":19389194,"display_name":"kortex"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695204476,"creation_date":1695204476,"answer_id":77141377,"question_id":77139967,"body_markdown":"I found a solution which work for the moment.\r\n\r\nIn the pom.xml of myLibrary, I had this:\r\n\r\n```\r\n    &lt;properties&gt;\r\n        &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n        &lt;revision&gt;${revision}&lt;/revision&gt;\r\n[...]\r\n    &lt;/properties&gt;\r\n```\r\n\r\nThe solution was to replace the variable ${revision} with a hardcoded value:\r\n\r\n```\r\n    &lt;properties&gt;\r\n        &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n        &lt;revision&gt;1.0&lt;/revision&gt;\r\n[...]\r\n    &lt;/properties&gt;\r\n```\r\n\r\nAnd now it seems it works.","title":"NoClassDefFoundError when we execute a Java Web application within Eclipse","body":"<p>I found a solution which work for the moment.</p>\n<p>In the pom.xml of myLibrary, I had this:</p>\n<pre><code>    &lt;properties&gt;\n        &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;revision&gt;${revision}&lt;/revision&gt;\n[...]\n    &lt;/properties&gt;\n</code></pre>\n<p>The solution was to replace the variable ${revision} with a hardcoded value:</p>\n<pre><code>    &lt;properties&gt;\n        &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;revision&gt;1.0&lt;/revision&gt;\n[...]\n    &lt;/properties&gt;\n</code></pre>\n<p>And now it seems it works.</p>\n"}],"owner":{"account_id":25616696,"reputation":11,"user_id":19389194,"display_name":"kortex"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1695204476,"creation_date":1695192849,"question_id":77139967,"body_markdown":"I have a problem to submit because I&#39;m pretty sure it exist a simple solution.\r\n\r\nPrecisions:\r\n- I am a system administrator\r\n- I publish this message because I tried to help my colleagues developers without success for the moment\r\n\r\nWe have a homemade shared library we will call &quot;myLibrary&quot;: it is a Java library (a JAR when builded) we share between many of standalone applications (not modular applications).\r\n\r\nThis library provides, for example, a homemade abstract class to connect to MongoDB.\r\nIn its pom.xml:\r\n- we have many dependencies\r\n- one of these dependencies is mongodb-driver-sync:\r\n\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.mongodb&lt;/groupId&gt;\r\n    &lt;artifactId&gt;mongodb-driver-sync&lt;/artifactId&gt;\r\n    &lt;version&gt;4.9.1&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nOne of our application is a Java web server:\r\n- we will call it &quot;myApplication&quot;\r\n- in production we deploy the application within a Tomcat server\r\n\r\nIn the pom.xml of myApplication:\r\n- we have many dependencies explicitely declared\r\n- we have a dependency on &quot;myLibrary&quot; explicitely declared\r\n\r\nWhen we build the WAR (with Eclipse thanks to the &#39;Maven Build&#39; feature and/or through our CI/CD pipeline), we got a WAR which contain:\r\n- all the dependencies explicitely declared\r\n- the library myLibrary explicitely declared\r\n- and implicitely we got the dependencies of myLibrary: thefore, in WEB-INF/lib, we have the JAR files for mongodb-driver-sync\r\n\r\nAt this level, it works perfectly.\r\n\r\nBut we have a problem when we try to execute this application directly in Eclipse (live development session/debug).\r\n\r\nIn this context, we got an error NoClassDefFoundError related to MongoDB.\r\nWe analysed a lot and the result is this one:\r\n- when we execute the application in Eclipse, Eclipse deploys the application somewhere. We found the directory in which the application was deployed:\r\n  - this directory contains a directory WEB-INF/lib\r\n    - this WEB-INF/lib directory contains only the dependencies declared explicitely in pom.xml of myApplication: the dependencies of myLibrary are not embedded\r\n    - if we add manually the missing JAR (example: MongoDB driver): it works\r\n\r\nWe tested many things but nothing seems to work except if we add explicitely the dependency in the pom.xml of myApplication:\r\n\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.mongodb&lt;/groupId&gt;\r\n    &lt;artifactId&gt;mongodb-driver-sync&lt;/artifactId&gt;\r\n    &lt;version&gt;4.9.1&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nWe would like to avoid this for many reasons.\r\n\r\nDetails about our environment:\r\n- Eclipse: 2023-03\r\n- JDK: 1.8\r\n- Maven : 3.8.7\r\n\r\nIs someone has an idea to suggest please?\r\n\r\nThank you very much.\r\n\r\nWe tried to execute mvn [...] eclipse:eclipse but it failed + we broke our project in Eclipse.\r\n\r\nWe tried to play with the feature &quot;Java Build Path&quot;:\r\n- adding &quot;Maven Dependencies&quot;\r\n- removing &quot;Maven Dependencies&quot;\r\n-&gt; it failed but maybe we missed something\r\n\r\nWe tried to play with the feature &quot;Deployment Assembly&quot;:\r\n- adding &quot;myLibrary&quot;\r\n- removing &quot;myLibrary&quot;\r\n-&gt; it failed but maybe we missed something","title":"NoClassDefFoundError when we execute a Java Web application within Eclipse","body":"<p>I have a problem to submit because I'm pretty sure it exist a simple solution.</p>\n<p>Precisions:</p>\n<ul>\n<li>I am a system administrator</li>\n<li>I publish this message because I tried to help my colleagues developers without success for the moment</li>\n</ul>\n<p>We have a homemade shared library we will call &quot;myLibrary&quot;: it is a Java library (a JAR when builded) we share between many of standalone applications (not modular applications).</p>\n<p>This library provides, for example, a homemade abstract class to connect to MongoDB.\nIn its pom.xml:</p>\n<ul>\n<li>we have many dependencies</li>\n<li>one of these dependencies is mongodb-driver-sync:</li>\n</ul>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.mongodb&lt;/groupId&gt;\n    &lt;artifactId&gt;mongodb-driver-sync&lt;/artifactId&gt;\n    &lt;version&gt;4.9.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>One of our application is a Java web server:</p>\n<ul>\n<li>we will call it &quot;myApplication&quot;</li>\n<li>in production we deploy the application within a Tomcat server</li>\n</ul>\n<p>In the pom.xml of myApplication:</p>\n<ul>\n<li>we have many dependencies explicitely declared</li>\n<li>we have a dependency on &quot;myLibrary&quot; explicitely declared</li>\n</ul>\n<p>When we build the WAR (with Eclipse thanks to the 'Maven Build' feature and/or through our CI/CD pipeline), we got a WAR which contain:</p>\n<ul>\n<li>all the dependencies explicitely declared</li>\n<li>the library myLibrary explicitely declared</li>\n<li>and implicitely we got the dependencies of myLibrary: thefore, in WEB-INF/lib, we have the JAR files for mongodb-driver-sync</li>\n</ul>\n<p>At this level, it works perfectly.</p>\n<p>But we have a problem when we try to execute this application directly in Eclipse (live development session/debug).</p>\n<p>In this context, we got an error NoClassDefFoundError related to MongoDB.\nWe analysed a lot and the result is this one:</p>\n<ul>\n<li>when we execute the application in Eclipse, Eclipse deploys the application somewhere. We found the directory in which the application was deployed:\n<ul>\n<li>this directory contains a directory WEB-INF/lib\n<ul>\n<li>this WEB-INF/lib directory contains only the dependencies declared explicitely in pom.xml of myApplication: the dependencies of myLibrary are not embedded</li>\n<li>if we add manually the missing JAR (example: MongoDB driver): it works</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p>We tested many things but nothing seems to work except if we add explicitely the dependency in the pom.xml of myApplication:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.mongodb&lt;/groupId&gt;\n    &lt;artifactId&gt;mongodb-driver-sync&lt;/artifactId&gt;\n    &lt;version&gt;4.9.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>We would like to avoid this for many reasons.</p>\n<p>Details about our environment:</p>\n<ul>\n<li>Eclipse: 2023-03</li>\n<li>JDK: 1.8</li>\n<li>Maven : 3.8.7</li>\n</ul>\n<p>Is someone has an idea to suggest please?</p>\n<p>Thank you very much.</p>\n<p>We tried to execute mvn [...] eclipse:eclipse but it failed + we broke our project in Eclipse.</p>\n<p>We tried to play with the feature &quot;Java Build Path&quot;:</p>\n<ul>\n<li>adding &quot;Maven Dependencies&quot;</li>\n<li>removing &quot;Maven Dependencies&quot;\n-&gt; it failed but maybe we missed something</li>\n</ul>\n<p>We tried to play with the feature &quot;Deployment Assembly&quot;:</p>\n<ul>\n<li>adding &quot;myLibrary&quot;</li>\n<li>removing &quot;myLibrary&quot;\n-&gt; it failed but maybe we missed something</li>\n</ul>\n"},{"tags":["java","google-chrome","selenium","selenium-webdriver","selenium-chromedriver"],"answers":[{"tags":[],"owner":{"account_id":10049107,"reputation":186627,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1581199859,"creation_date":1524583999,"answer_id":50005648,"question_id":50005248,"body_markdown":"This error message...\r\n\r\n\torg.openqa.selenium.NoSuchSessionException: no such session\r\n\r\n...implies that the _chromedriver=2.38_ wasn&#39;t able to initiate an active session with the WebClient i.e _Chrome_ browser.\r\n\r\nYour main issue is the **version compatibility** between the binaries you are using as follows :\r\n\r\n - Though you are using latest _Selenium Client_ version **3.11.0**, _Chrome Driver_ version _2.38_ and _Chrome_ version _v66.0_.\r\n - Your _JDK version_ is **1.8.0_144** which is pretty **ancient**.\r\n\r\n\r\n----------\r\n\r\n\r\n \r\nSolution\r\n--------\r\n - Upgrade _JDK_ to  recent levels [JDK 8u241](https://www.oracle.com/technetwork/java/javase/downloads/index.html).\r\n - _Clean_ your _Project Workspace_ through your _IDE_ and _Rebuild_ your project with required dependencies only.\r\n - If your base _Web Client_ version is too old, then uninstall it and install a recent GA and released version of _Web Client_.\r\n - Take a _System Reboot_.\r\n - Execute your `@Test`.","title":"org.openqa.selenium.NoSuchSessionException: no such session","body":"<p>This error message...</p>\n\n<pre><code>org.openqa.selenium.NoSuchSessionException: no such session\n</code></pre>\n\n<p>...implies that the <em>chromedriver=2.38</em> wasn't able to initiate an active session with the WebClient i.e <em>Chrome</em> browser.</p>\n\n<p>Your main issue is the <strong>version compatibility</strong> between the binaries you are using as follows :</p>\n\n<ul>\n<li>Though you are using latest <em>Selenium Client</em> version <strong>3.11.0</strong>, <em>Chrome Driver</em> version <em>2.38</em> and <em>Chrome</em> version <em>v66.0</em>.</li>\n<li>Your <em>JDK version</em> is <strong>1.8.0_144</strong> which is pretty <strong>ancient</strong>.</li>\n</ul>\n\n<hr>\n\n<h2>Solution</h2>\n\n<ul>\n<li>Upgrade <em>JDK</em> to  recent levels <a href=\"https://www.oracle.com/technetwork/java/javase/downloads/index.html\" rel=\"nofollow noreferrer\">JDK 8u241</a>.</li>\n<li><em>Clean</em> your <em>Project Workspace</em> through your <em>IDE</em> and <em>Rebuild</em> your project with required dependencies only.</li>\n<li>If your base <em>Web Client</em> version is too old, then uninstall it and install a recent GA and released version of <em>Web Client</em>.</li>\n<li>Take a <em>System Reboot</em>.</li>\n<li>Execute your <code>@Test</code>.</li>\n</ul>\n"}],"owner":{"account_id":10221888,"reputation":471,"user_id":7545818,"display_name":"Learner"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":10067,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1695204430,"creation_date":1524582989,"question_id":50005248,"body_markdown":"Getting &quot;No Such Session&quot; exception while accessing the below method in selenium. I know there are lot of same questions with different answers online but none seems to be worked out in my case. Any assistance?\r\n\r\nChrome Driver Version:- 2.38\r\nChrome version:-66.0.3359.117\r\n\r\nException message is:-\r\n\r\n    org.openqa.selenium.NoSuchSessionException: no such session\r\n      (Driver info: chromedriver=2.38.552522 (437e6fbedfa8762dec75e2c5b3ddb86763dc9dcb),platform=Windows NT 10.0.10240 x86_64) (WARNING: The server did not provide any stacktrace information)\r\n    Command duration or timeout: 0 milliseconds\r\n    Build info: version: &#39;3.11.0&#39;, revision: &#39;e59cfb3&#39;, time: &#39;2018-03-11T20:26:55.152Z&#39;\r\n    System info: host: &#39;XXYYXX&#39;, ip: &#39;XXYYXX&#39;, os.name: &#39;Windows 10&#39;, os.arch: &#39;amd64&#39;, os.version: &#39;10.0&#39;, java.version: &#39;1.8.0_144&#39;\r\n    Driver info: org.openqa.selenium.chrome.ChromeDriver\r\n    Capabilities {acceptInsecureCerts: false, acceptSslCerts: false, applicationCacheEnabled: false, browserConnectionEnabled: false, browserName: chrome, chrome: {chromedriverVersion: 2.38.552522 (437e6fbedfa876..., userDataDir: C:\\Users\\XXYYXX\\AppData\\L...}, cssSelectorsEnabled: true, databaseEnabled: false, handlesAlerts: true, hasTouchScreen: false, javascriptEnabled: true, locationContextEnabled: true, mobileEmulationEnabled: false, nativeEvents: true, networkConnectionEnabled: false, pageLoadStrategy: normal, platform: XP, platformName: XP, rotatable: false, setWindowRect: true, takesHeapSnapshot: true, takesScreenshot: true, unexpectedAlertBehaviour: , unhandledPromptBehavior: , version: 66.0.3359.117, webStorageEnabled: true}\r\n    Session ID: 6db82d5d19891c00f783fd9b7cebd234\r\n    *** Element info: {Using=xpath, value=html/body/div[1]/div/div/div[2]/div/div[2]/div/div/p}\r\n    \tat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n    \tat sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\r\n    \tat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n    \tat java.lang.reflect.Constructor.newInstance(Constructor.java:423)\r\n    \tat org.openqa.selenium.remote.ErrorHandler.createThrowable(ErrorHandler.java:214)\r\n    \tat org.openqa.selenium.remote.ErrorHandler.throwIfResponseFailed(ErrorHandler.java:166)\r\n    \tat org.openqa.selenium.remote.http.JsonHttpResponseCodec.reconstructValue(JsonHttpResponseCodec.java:40)\r\n    \tat org.openqa.selenium.remote.http.AbstractHttpResponseCodec.decode(AbstractHttpResponseCodec.java:80)\r\n    \tat org.openqa.selenium.remote.http.AbstractHttpResponseCodec.decode(AbstractHttpResponseCodec.java:44)\r\n    \tat org.openqa.selenium.remote.HttpCommandExecutor.execute(HttpCommandExecutor.java:158)\r\n    \tat org.openqa.selenium.remote.service.DriverCommandExecutor.execute(DriverCommandExecutor.java:83)\r\n    \tat org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:545)\r\n    \tat org.openqa.selenium.remote.RemoteWebDriver.findElements(RemoteWebDriver.java:346)\r\n    \tat org.openqa.selenium.remote.RemoteWebDriver.findElementsByXPath(RemoteWebDriver.java:425)\r\n    \tat org.openqa.selenium.By$ByXPath.findElements(By.java:356)\r\n    \tat org.openqa.selenium.remote.RemoteWebDriver.findElements(RemoteWebDriver.java:307)\r\n    \tat org.openqa.selenium.support.ui.ExpectedConditions.findElement(ExpectedConditions.java:895)\r\n    \tat org.openqa.selenium.support.ui.ExpectedConditions.access$000(ExpectedConditions.java:44)\r\n    \tat org.openqa.selenium.support.ui.ExpectedConditions$7.apply(ExpectedConditions.java:206)\r\n    \tat org.openqa.selenium.support.ui.ExpectedConditions$7.apply(ExpectedConditions.java:202)\r\n    \tat org.openqa.selenium.support.ui.FluentWait.until(FluentWait.java:248)\r\n    \tat UserInterfaceTesting.LoginValidator.validation(LoginValidator.java:31)\r\n    \tat HybridFrameWork.test1.validation_of_server_response_at_something_page(test1.java:41)\r\n    \tat ?.And Validation of server response at &quot;Login&quot; Page(Userlogin.feature:14)\r\n\r\nMy Program:-\r\n\r\n     else if (CommonObjRepository.getMessage().contentEquals(&quot;Login&quot;)) {\r\n    \t\t\t\r\n    \r\n    // This is where exception is being thrown //\r\n    \t\t\tString Message = wait\r\n    \t\t\t\t\t.until(ExpectedConditions\r\n    \t\t\t\t\t\t\t.visibilityOfElementLocated(By.xpath(&quot;html/body/div[1]/div/div/div[2]/div/div[2]/div/div/p&quot;)))\r\n    \t\t\t\t\t.getText();\r\n    \r\n    \t\t\tassertEquals(ReadProperties.GetConstant(&quot;XXTTX&quot;), Message);\r\n    \t\t\tCommonObjRepository.getLog().info(&quot;***** XXXYYYZZZ *****&quot;);\r\n    \r\n    \t\t}","title":"org.openqa.selenium.NoSuchSessionException: no such session","body":"<p>Getting \"No Such Session\" exception while accessing the below method in selenium. I know there are lot of same questions with different answers online but none seems to be worked out in my case. Any assistance?</p>\n\n<p>Chrome Driver Version:- 2.38\nChrome version:-66.0.3359.117</p>\n\n<p>Exception message is:-</p>\n\n<pre><code>org.openqa.selenium.NoSuchSessionException: no such session\n  (Driver info: chromedriver=2.38.552522 (437e6fbedfa8762dec75e2c5b3ddb86763dc9dcb),platform=Windows NT 10.0.10240 x86_64) (WARNING: The server did not provide any stacktrace information)\nCommand duration or timeout: 0 milliseconds\nBuild info: version: '3.11.0', revision: 'e59cfb3', time: '2018-03-11T20:26:55.152Z'\nSystem info: host: 'XXYYXX', ip: 'XXYYXX', os.name: 'Windows 10', os.arch: 'amd64', os.version: '10.0', java.version: '1.8.0_144'\nDriver info: org.openqa.selenium.chrome.ChromeDriver\nCapabilities {acceptInsecureCerts: false, acceptSslCerts: false, applicationCacheEnabled: false, browserConnectionEnabled: false, browserName: chrome, chrome: {chromedriverVersion: 2.38.552522 (437e6fbedfa876..., userDataDir: C:\\Users\\XXYYXX\\AppData\\L...}, cssSelectorsEnabled: true, databaseEnabled: false, handlesAlerts: true, hasTouchScreen: false, javascriptEnabled: true, locationContextEnabled: true, mobileEmulationEnabled: false, nativeEvents: true, networkConnectionEnabled: false, pageLoadStrategy: normal, platform: XP, platformName: XP, rotatable: false, setWindowRect: true, takesHeapSnapshot: true, takesScreenshot: true, unexpectedAlertBehaviour: , unhandledPromptBehavior: , version: 66.0.3359.117, webStorageEnabled: true}\nSession ID: 6db82d5d19891c00f783fd9b7cebd234\n*** Element info: {Using=xpath, value=html/body/div[1]/div/div/div[2]/div/div[2]/div/div/p}\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\n    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n    at java.lang.reflect.Constructor.newInstance(Constructor.java:423)\n    at org.openqa.selenium.remote.ErrorHandler.createThrowable(ErrorHandler.java:214)\n    at org.openqa.selenium.remote.ErrorHandler.throwIfResponseFailed(ErrorHandler.java:166)\n    at org.openqa.selenium.remote.http.JsonHttpResponseCodec.reconstructValue(JsonHttpResponseCodec.java:40)\n    at org.openqa.selenium.remote.http.AbstractHttpResponseCodec.decode(AbstractHttpResponseCodec.java:80)\n    at org.openqa.selenium.remote.http.AbstractHttpResponseCodec.decode(AbstractHttpResponseCodec.java:44)\n    at org.openqa.selenium.remote.HttpCommandExecutor.execute(HttpCommandExecutor.java:158)\n    at org.openqa.selenium.remote.service.DriverCommandExecutor.execute(DriverCommandExecutor.java:83)\n    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:545)\n    at org.openqa.selenium.remote.RemoteWebDriver.findElements(RemoteWebDriver.java:346)\n    at org.openqa.selenium.remote.RemoteWebDriver.findElementsByXPath(RemoteWebDriver.java:425)\n    at org.openqa.selenium.By$ByXPath.findElements(By.java:356)\n    at org.openqa.selenium.remote.RemoteWebDriver.findElements(RemoteWebDriver.java:307)\n    at org.openqa.selenium.support.ui.ExpectedConditions.findElement(ExpectedConditions.java:895)\n    at org.openqa.selenium.support.ui.ExpectedConditions.access$000(ExpectedConditions.java:44)\n    at org.openqa.selenium.support.ui.ExpectedConditions$7.apply(ExpectedConditions.java:206)\n    at org.openqa.selenium.support.ui.ExpectedConditions$7.apply(ExpectedConditions.java:202)\n    at org.openqa.selenium.support.ui.FluentWait.until(FluentWait.java:248)\n    at UserInterfaceTesting.LoginValidator.validation(LoginValidator.java:31)\n    at HybridFrameWork.test1.validation_of_server_response_at_something_page(test1.java:41)\n    at ?.And Validation of server response at \"Login\" Page(Userlogin.feature:14)\n</code></pre>\n\n<p>My Program:-</p>\n\n<pre><code> else if (CommonObjRepository.getMessage().contentEquals(\"Login\")) {\n\n\n// This is where exception is being thrown //\n            String Message = wait\n                    .until(ExpectedConditions\n                            .visibilityOfElementLocated(By.xpath(\"html/body/div[1]/div/div/div[2]/div/div[2]/div/div/p\")))\n                    .getText();\n\n            assertEquals(ReadProperties.GetConstant(\"XXTTX\"), Message);\n            CommonObjRepository.getLog().info(\"***** XXXYYYZZZ *****\");\n\n        }\n</code></pre>\n"},{"tags":["java","rest","jersey","multipartform-data","jersey-2.0"],"answers":[{"tags":[],"owner":{"account_id":3013228,"reputation":205797,"user_id":2587435,"accept_rate":88,"display_name":"Paul Samsotha"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1430268257,"creation_date":1430268257,"answer_id":29932427,"question_id":29923938,"body_markdown":"You need to register the `MultiPartFeature` in your web.xml. You can simply add an `&lt;init-param&gt;` to the Jersey servlet\r\n\r\n    &lt;init-param&gt;\r\n        &lt;param-name&gt;jersey.config.server.provider.classnames&lt;/param-name&gt;\r\n        &lt;param-value&gt;org.glassfish.jersey.media.multipart.MultiPartFeature&lt;/param-value&gt;\r\n    &lt;/init-param&gt;\r\n\r\n* See explanation of problem [here](https://stackoverflow.com/a/29406656/2587435)\r\n\r\n* See other configuring options [here](https://stackoverflow.com/a/29534950/2587435)","title":"Problem with my Servlet and @FormDataParam Jersey","body":"<p>You need to register the <code>MultiPartFeature</code> in your web.xml. You can simply add an <code>&lt;init-param&gt;</code> to the Jersey servlet</p>\n\n<pre><code>&lt;init-param&gt;\n    &lt;param-name&gt;jersey.config.server.provider.classnames&lt;/param-name&gt;\n    &lt;param-value&gt;org.glassfish.jersey.media.multipart.MultiPartFeature&lt;/param-value&gt;\n&lt;/init-param&gt;\n</code></pre>\n\n<ul>\n<li><p>See explanation of problem <a href=\"https://stackoverflow.com/a/29406656/2587435\">here</a></p></li>\n<li><p>See other configuring options <a href=\"https://stackoverflow.com/a/29534950/2587435\">here</a></p></li>\n</ul>\n"}],"owner":{"account_id":6223839,"reputation":51,"user_id":4842750,"display_name":"Quentin Moreaux"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1838,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":29932427,"answer_count":1,"score":3,"last_activity_date":1695204428,"creation_date":1430235915,"question_id":29923938,"body_markdown":"I have a problem with my web-services using Jersey. I have a form composed of two inputs, one of type &quot;file&quot; and one of type &quot;text&quot;.\r\n\r\nThe problem is that when I only use the input of type &quot;file&quot;, everything works fine, but when I add the second one, of type &quot;text&quot;, my servlet can&#39;t even start properly.\r\n\r\nHere is the exception I have when I start my servlet:\r\n```\r\n    avr. 28, 2015 5:16:17 PM org.apache.catalina.core.StandardContext loadOnStartup\r\n    GRAVE: La servlet /SemRecSysWS a g&#233;n&#233;r&#233; une exception &quot;load()&quot;\r\n    org.glassfish.jersey.server.model.ModelValidationException: Validation of the application resource model has failed during application initialization.\r\n    [[FATAL] No injection source found for a parameter of type public java.lang.String fr.checksem.semrecsys.Gestion.insertSKOS(java.io.InputStream,org.openrdf.rio.RDFFormat) at index 0.; source=&#39;ResourceMethod{httpMethod=POST, consumedTypes=[multipart/form-data], producedTypes=[text/plain; charset=utf-8], suspended=false, suspendTimeout=0, suspendTimeoutUnit=MILLISECONDS, invocable=Invocable{handler=ClassBasedMethodHandler{handlerClass=class fr.checksem.semrecsys.Gestion, handlerConstructors=[org.glassfish.jersey.server.model.HandlerConstructor@1a533161]}, definitionMethod=public java.lang.String fr.checksem.semrecsys.Gestion.insertSKOS(java.io.InputStream,org.openrdf.rio.RDFFormat), parameters=[Parameter [type=class java.io.InputStream, source=fichier, defaultValue=null], Parameter [type=class org.openrdf.rio.RDFFormat, source=Format, defaultValue=null]], responseType=class java.lang.String}, nameBindings=[]}&#39;]\r\n\tat org.glassfish.jersey.server.ApplicationHandler.initialize(ApplicationHandler.java:500)\r\n\tat org.glassfish.jersey.server.ApplicationHandler.access$500(ApplicationHandler.java:167)\r\n\tat org.glassfish.jersey.server.ApplicationHandler$3.run(ApplicationHandler.java:327)\r\n\tat org.glassfish.jersey.internal.Errors$2.call(Errors.java:289)\r\n\tat org.glassfish.jersey.internal.Errors$2.call(Errors.java:286)\r\n\tat org.glassfish.jersey.internal.Errors.process(Errors.java:315)\r\n\tat org.glassfish.jersey.internal.Errors.process(Errors.java:297)\r\n\tat org.glassfish.jersey.internal.Errors.processWithException(Errors.java:286)\r\n\tat org.glassfish.jersey.server.ApplicationHandler.&lt;init&gt;(ApplicationHandler.java:324)\r\n\tat org.glassfish.jersey.servlet.WebComponent.&lt;init&gt;(WebComponent.java:315)\r\n\tat org.glassfish.jersey.servlet.ServletContainer.init(ServletContainer.java:170)\r\n\tat org.glassfish.jersey.servlet.ServletContainer.init(ServletContainer.java:358)\r\n\tat javax.servlet.GenericServlet.init(GenericServlet.java:160)\r\n\tat org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1280)\r\n\tat org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1193)\r\n\tat org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1088)\r\n\tat org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:5176)\r\n\tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5460)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\r\n\tat org.apache.catalina.core.StandardContext.reload(StandardContext.java:3954)\r\n\tat org.apache.catalina.loader.WebappLoader.backgroundProcess(WebappLoader.java:426)\r\n\tat org.apache.catalina.core.ContainerBase.backgroundProcess(ContainerBase.java:1345)\r\n\tat org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1530)\r\n\tat org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1540)\r\n\tat org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1540)\r\n\tat org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.run(ContainerBase.java:1519)\r\n\tat java.lang.Thread.run(Unknown Source)\r\n```\r\n\r\nHere is the function where I try to access to the file and the text\r\n\r\n    @POST\r\n\t@Path(&quot;/initSKOS&quot;)\r\n\t@Consumes(MediaType.MULTIPART_FORM_DATA)\r\n\t@Produces(MediaType.TEXT_PLAIN + &quot;;charset=utf-8&quot;)\t\r\n\tpublic String insertSKOS(@FormDataParam(&quot;fichier&quot;) InputStream uploadedInputStream, @FormDataParam(&quot;Format&quot;) RDFFormat format) {\r\n    ....\r\n    }\r\n\r\nI have tried with every type for my variable format, but that doesn&#39;t change anything.\r\n\r\nAnd here is my web.xml file :\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;web-app xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot; xmlns:web=&quot;http://java.sun.com/xml/ns/javaee&quot; xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd&quot; id=&quot;SemRecSysWS&quot; version=&quot;3.0&quot;&gt;\r\n        &lt;display-name&gt;RecWS&lt;/display-name&gt;\r\n        &lt;servlet&gt;\r\n            &lt;servlet-name&gt;fr.checksem.semrecsys.TestWS&lt;/servlet-name&gt;\r\n            &lt;servlet-class&gt;org.glassfish.jersey.servlet.ServletContainer&lt;/servlet-class&gt;\r\n            &lt;init-param&gt;\r\n                &lt;param-name&gt;jersey.config.server.provider.packages&lt;/param-name&gt;\r\n                &lt;param-value&gt;fr.checksem.semrecsys&lt;/param-value&gt;\r\n            &lt;/init-param&gt;\r\n            &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\r\n        &lt;/servlet&gt;\r\n        &lt;servlet-mapping&gt;\r\n        &lt;servlet-name&gt;fr.checksem.semrecsys.TestWS&lt;/servlet-name&gt;\r\n        &lt;url-pattern&gt;/rest/*&lt;/url-pattern&gt;\r\n        &lt;/servlet-mapping&gt;\r\n    &lt;/web-app&gt;\r\n\r\nI don&#39;t know if you completely understood my problem, I tried to be as clear as possible.","title":"Problem with my Servlet and @FormDataParam Jersey","body":"<p>I have a problem with my web-services using Jersey. I have a form composed of two inputs, one of type &quot;file&quot; and one of type &quot;text&quot;.</p>\n<p>The problem is that when I only use the input of type &quot;file&quot;, everything works fine, but when I add the second one, of type &quot;text&quot;, my servlet can't even start properly.</p>\n<p>Here is the exception I have when I start my servlet:</p>\n<pre><code>    avr. 28, 2015 5:16:17 PM org.apache.catalina.core.StandardContext loadOnStartup\n    GRAVE: La servlet /SemRecSysWS a généré une exception &quot;load()&quot;\n    org.glassfish.jersey.server.model.ModelValidationException: Validation of the application resource model has failed during application initialization.\n    [[FATAL] No injection source found for a parameter of type public java.lang.String fr.checksem.semrecsys.Gestion.insertSKOS(java.io.InputStream,org.openrdf.rio.RDFFormat) at index 0.; source='ResourceMethod{httpMethod=POST, consumedTypes=[multipart/form-data], producedTypes=[text/plain; charset=utf-8], suspended=false, suspendTimeout=0, suspendTimeoutUnit=MILLISECONDS, invocable=Invocable{handler=ClassBasedMethodHandler{handlerClass=class fr.checksem.semrecsys.Gestion, handlerConstructors=[org.glassfish.jersey.server.model.HandlerConstructor@1a533161]}, definitionMethod=public java.lang.String fr.checksem.semrecsys.Gestion.insertSKOS(java.io.InputStream,org.openrdf.rio.RDFFormat), parameters=[Parameter [type=class java.io.InputStream, source=fichier, defaultValue=null], Parameter [type=class org.openrdf.rio.RDFFormat, source=Format, defaultValue=null]], responseType=class java.lang.String}, nameBindings=[]}']\n    at org.glassfish.jersey.server.ApplicationHandler.initialize(ApplicationHandler.java:500)\n    at org.glassfish.jersey.server.ApplicationHandler.access$500(ApplicationHandler.java:167)\n    at org.glassfish.jersey.server.ApplicationHandler$3.run(ApplicationHandler.java:327)\n    at org.glassfish.jersey.internal.Errors$2.call(Errors.java:289)\n    at org.glassfish.jersey.internal.Errors$2.call(Errors.java:286)\n    at org.glassfish.jersey.internal.Errors.process(Errors.java:315)\n    at org.glassfish.jersey.internal.Errors.process(Errors.java:297)\n    at org.glassfish.jersey.internal.Errors.processWithException(Errors.java:286)\n    at org.glassfish.jersey.server.ApplicationHandler.&lt;init&gt;(ApplicationHandler.java:324)\n    at org.glassfish.jersey.servlet.WebComponent.&lt;init&gt;(WebComponent.java:315)\n    at org.glassfish.jersey.servlet.ServletContainer.init(ServletContainer.java:170)\n    at org.glassfish.jersey.servlet.ServletContainer.init(ServletContainer.java:358)\n    at javax.servlet.GenericServlet.init(GenericServlet.java:160)\n    at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1280)\n    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1193)\n    at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1088)\n    at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:5176)\n    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5460)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\n    at org.apache.catalina.core.StandardContext.reload(StandardContext.java:3954)\n    at org.apache.catalina.loader.WebappLoader.backgroundProcess(WebappLoader.java:426)\n    at org.apache.catalina.core.ContainerBase.backgroundProcess(ContainerBase.java:1345)\n    at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1530)\n    at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1540)\n    at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1540)\n    at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.run(ContainerBase.java:1519)\n    at java.lang.Thread.run(Unknown Source)\n</code></pre>\n<p>Here is the function where I try to access to the file and the text</p>\n<pre><code>@POST\n@Path(&quot;/initSKOS&quot;)\n@Consumes(MediaType.MULTIPART_FORM_DATA)\n@Produces(MediaType.TEXT_PLAIN + &quot;;charset=utf-8&quot;)  \npublic String insertSKOS(@FormDataParam(&quot;fichier&quot;) InputStream uploadedInputStream, @FormDataParam(&quot;Format&quot;) RDFFormat format) {\n....\n}\n</code></pre>\n<p>I have tried with every type for my variable format, but that doesn't change anything.</p>\n<p>And here is my web.xml file :</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;web-app xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot; xmlns:web=&quot;http://java.sun.com/xml/ns/javaee&quot; xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd&quot; id=&quot;SemRecSysWS&quot; version=&quot;3.0&quot;&gt;\n    &lt;display-name&gt;RecWS&lt;/display-name&gt;\n    &lt;servlet&gt;\n        &lt;servlet-name&gt;fr.checksem.semrecsys.TestWS&lt;/servlet-name&gt;\n        &lt;servlet-class&gt;org.glassfish.jersey.servlet.ServletContainer&lt;/servlet-class&gt;\n        &lt;init-param&gt;\n            &lt;param-name&gt;jersey.config.server.provider.packages&lt;/param-name&gt;\n            &lt;param-value&gt;fr.checksem.semrecsys&lt;/param-value&gt;\n        &lt;/init-param&gt;\n        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n    &lt;/servlet&gt;\n    &lt;servlet-mapping&gt;\n    &lt;servlet-name&gt;fr.checksem.semrecsys.TestWS&lt;/servlet-name&gt;\n    &lt;url-pattern&gt;/rest/*&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n&lt;/web-app&gt;\n</code></pre>\n<p>I don't know if you completely understood my problem, I tried to be as clear as possible.</p>\n"},{"tags":["java","greenfoot"],"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":1,"creation_date":1695194614,"post_id":77140159,"comment_id":135989836,"body_markdown":"Don&#39;t juts reverse the motion. Also move the ball to a point where it&#39;s not hitting the walls/paddle anymore.","body":"Don&#39;t juts reverse the motion. Also move the ball to a point where it&#39;s not hitting the walls/paddle anymore."},{"owner":{"account_id":15654001,"reputation":11419,"user_id":11294831,"display_name":"the busybee"},"score":2,"creation_date":1695195026,"post_id":77140159,"comment_id":135989914,"body_markdown":"Did you try to include the direction of move into the detection of touch? (I&#39;m running a &quot;SIG computer science&quot; in a high school, and we had this issue multiple times.)","body":"Did you try to include the direction of move into the detection of touch? (I&#39;m running a &quot;SIG computer science&quot; in a high school, and we had this issue multiple times.)"},{"owner":{"account_id":15654001,"reputation":11419,"user_id":11294831,"display_name":"the busybee"},"score":0,"creation_date":1695210625,"post_id":77140159,"comment_id":135993178,"body_markdown":"Please take the [tour] to learn how this site works. Then come back and [edit] your question and separate the solution into an actual answer.","body":"Please take the <a href=\"https://stackoverflow.com/tour\">tour</a> to learn how this site works. Then come back and <a href=\"https://stackoverflow.com/posts/77140159/edit\">edit</a> your question and separate the solution into an actual answer."}],"owner":{"account_id":29488739,"reputation":31,"user_id":22598090,"display_name":"D R O P"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":0,"score":3,"last_activity_date":1695204203,"creation_date":1695194481,"question_id":77140159,"body_markdown":"My classmates and I are making a pong game and we have run into a problem.\r\nThe bug is that when the pong ball intersects with either the walls or player paddles, the ball will sometimes collide multiple times so that it looks like the ball is gliding on the paddle.\r\nIf anyone has run into this same problem or has any knowledge of what causes this I would much appreciate the help.\r\n\r\nWe found a solution to the problem which is putting a cooldown on the ball after hitting an object (wall and or paddle) that way it won&#39;t get that weird gliding bug, thank you everyone for posting suggestions and helping us out ;)\r\n\r\n```\r\nimport greenfoot.*;\r\nimport java.awt.*;\r\n\r\n/**\r\n * A Ball is a thing that bounces of walls and paddles (or at least i should).\r\n * \r\n * @author The teachers \r\n * @version 1\r\n */\r\npublic class Ball extends Actor\r\n{\r\n    private static final int BALL_SIZE = 50;\r\n    private static final int BOUNCE_DEVIANCE_MAX = 5;\r\n    private static final int STARTING_ANGLE_WIDTH = 90;\r\n    private static final int DELAY_TIME = 200;\r\n\r\n    private int speed;\r\n    private boolean hasBouncedHorizontally;\r\n    private boolean hasBouncedVertically;\r\n    private int delay;\r\n    private int touchCounter;\r\n\r\n    /**\r\n     * Contructs the ball and sets it in motion!\r\n     */\r\n    public Ball()\r\n    {\r\n        // createImage();\r\n        init();\r\n    }\r\n\r\n    /**\r\n     * Creates and sets an image of a black ball to this actor.\r\n     */\r\n    /*\r\n    private void createImage()\r\n    {\r\n        GreenfootImage ballImage = new GreenfootImage(BALL_SIZE,BALL_SIZE);\r\n        ballImage.setColor(Color.RED);\r\n        ballImage.fillOval(0, 0, BALL_SIZE, BALL_SIZE);\r\n        setImage(ballImage);\r\n    }\r\n    */\r\n\r\n    /**\r\n     * Act - do whatever the Ball wants to do. This method is called whenever\r\n     * the &#39;Act&#39; or &#39;Run&#39; button gets pressed in the environment.\r\n     */\r\n    public void act() \r\n    {\r\n        if (delay &gt; 0)\r\n        {\r\n            delay--;\r\n        }\r\n        else\r\n        {\r\n            move(speed);\r\n            checkBounceOffWalls();\r\n            checkBounceOffCeiling();\r\n            checkRestart();\r\n            bounceOffPaddles();\r\n        }\r\n    }    \r\n\r\n    /**\r\n     * Returns true if the ball is touching one of the side walls.\r\n     */\r\n    private boolean isTouchingSides()\r\n    {\r\n        return getX() &lt;= BALL_SIZE/2 || getX() &gt;= getWorld().getWidth() - BALL_SIZE/2;\r\n    }\r\n\r\n    /**\r\n     * Returns true if the ball is touching the ceiling.\r\n     */\r\n    private boolean isTouchingCeiling()\r\n    {\r\n        return (getY() &lt;= BALL_SIZE/2);\r\n    }\r\n\r\n    /**\r\n     * Returns true if the ball is touching the floor.\r\n     */\r\n    private boolean isTouchingFloor()\r\n    { \r\n        return (getY() &gt;= getWorld().getHeight() - BALL_SIZE/2);\r\n    }\r\n\r\n    /**\r\n     * Check to see if the ball should bounce off one of the walls.\r\n     * If touching one of the walls, the ball is bouncing off.\r\n     */\r\n    private void checkBounceOffWalls()\r\n    {\r\n        if (isTouchingSides())\r\n        {\r\n            if (! hasBouncedHorizontally)\r\n            {\r\n                revertHorizontally();\r\n            }\r\n        }\r\n        else\r\n        {\r\n            hasBouncedHorizontally = false;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Check to see if the ball should bounce off the ceiling.\r\n     * If touching the ceiling the ball is bouncing off.\r\n     */\r\n    private void checkBounceOffCeiling()\r\n    {\r\n        if (isTouchingCeiling())\r\n        {\r\n            if (! hasBouncedVertically)\r\n            {\r\n                revertVertically();\r\n            }\r\n        }\r\n        // Removed for purpose of solving Task 3\r\n        /*\r\n        else\r\n        {\r\n            hasBouncedVertically = false;\r\n        }\r\n        */\r\n    }\r\n\r\n    /**\r\n     * Check to see if the ball should be restarted.\r\n     * If touching the floor the ball is restarted in initial position and speed.\r\n     */\r\n    private void checkRestart()\r\n    {\r\n        if (isTouchingFloor())\r\n        {\r\n            PingWorld theWorld = (PingWorld) getWorld();\r\n            theWorld.resetGameLevel();\r\n            init();\r\n            setLocation(getWorld().getWidth() / 2, getWorld().getHeight() / 2);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Bounces the ball back from a vertical surface.\r\n     */\r\n    private void revertHorizontally()\r\n    {\r\n        int randomness = Greenfoot.getRandomNumber(BOUNCE_DEVIANCE_MAX)- BOUNCE_DEVIANCE_MAX / 2;\r\n        setRotation((180 - getRotation()+ randomness + 360) % 360);\r\n        Greenfoot.playSound(&quot;pewsoundeffect.mp3&quot;);\r\n        hasBouncedHorizontally = true;\r\n    }\r\n\r\n    /**\r\n     * Bounces the bal back from a horizontal surface.\r\n     */\r\n    private void revertVertically()\r\n    {\r\n        int randomness = Greenfoot.getRandomNumber(BOUNCE_DEVIANCE_MAX)- BOUNCE_DEVIANCE_MAX / 2;\r\n        setRotation((360 - getRotation()+ randomness + 360) % 360);\r\n        Greenfoot.playSound(&quot;pewsoundeffect.mp3&quot;);\r\n        hasBouncedVertically = true;\r\n    }\r\n    \r\n    // Checking for the paddles if they intersect with the ball, if touching, revert vertically.\r\n    public void bounceOffPaddles() \r\n    {\r\n        Actor paddle = getOneIntersectingObject(Paddle.class);\r\n        Actor enemyPaddle = getOneIntersectingObject(EnemyPaddle.class);\r\n        \r\n        if (paddle != null) {\r\n            revertVertically();\r\n            hasBouncedVertically = false;\r\n            speedIncreaser();\r\n        }\r\n        if (hasBouncedVertically == false &amp;&amp; enemyPaddle != null) {\r\n            revertVertically();\r\n        }\r\n    }\r\n    \r\n    // Increases speed\r\n    public void speedIncreaser() {\r\n        touchCounter++;\r\n            if (touchCounter == 10) {\r\n                speed++;\r\n                PingWorld theWorld = (PingWorld) getWorld();\r\n                theWorld.increaseGameLevel();\r\n                touchCounter = 0;\r\n            }\r\n    }\r\n\r\n    /**\r\n     * Initialize the ball settings.\r\n     */\r\n    private void init()\r\n    {\r\n        speed = 2;\r\n        delay = DELAY_TIME;\r\n        hasBouncedHorizontally = false;\r\n        hasBouncedVertically = false;\r\n        setRotation(Greenfoot.getRandomNumber(STARTING_ANGLE_WIDTH)+STARTING_ANGLE_WIDTH/2);\r\n    }\r\n\r\n}      else\r\n        {\r\n            hasBouncedVertically = false;\r\n        }\r\n        */\r\n    }\r\n\r\n    /**\r\n     * Check to see if the ball should be restarted.\r\n     * If touching the floor the ball is restarted in initial position and speed.\r\n     */\r\n    private void checkRestart()\r\n    {\r\n        if (isTouchingFloor())\r\n        {\r\n            PingWorld theWorld = (PingWorld) getWorld();\r\n            theWorld.resetGameLevel();\r\n            init();\r\n            setLocation(getWorld().getWidth() / 2, getWorld().getHeight() / 2);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Bounces the ball back from a vertical surface.\r\n     */\r\n    private void revertHorizontally()\r\n    {\r\n        int randomness = Greenfoot.getRandomNumber(BOUNCE_DEVIANCE_MAX)- BOUNCE_DEVIANCE_MAX / 2;\r\n        setRotation((180 - getRotation()+ randomness + 360) % 360);\r\n        Greenfoot.playSound(&quot;pewsoundeffect.mp3&quot;);\r\n        hasBouncedHorizontally = true;\r\n    }\r\n\r\n    /**\r\n     * Bounces the bal back from a horizontal surface.\r\n     */\r\n    private void revertVertically()\r\n    {\r\n        int randomness = Greenfoot.getRandomNumber(BOUNCE_DEVIANCE_MAX)- BOUNCE_DEVIANCE_MAX / 2;\r\n        setRotation((360 - getRotation()+ randomness + 360) % 360);\r\n        Greenfoot.playSound(&quot;pewsoundeffect.mp3&quot;);\r\n        hasBouncedVertically = true;\r\n    }\r\n    \r\n    // Checking for the paddles if they intersect with the ball, if touching, revert vertically.\r\n    public void bounceOffPaddles() \r\n    {\r\n        Actor paddle = getOneIntersectingObject(Paddle.class);\r\n        Actor enemyPaddle = getOneIntersectingObject(EnemyPaddle.class);\r\n        \r\n        if (paddle != null) {\r\n            revertVertically();\r\n            hasBouncedVertically = false;\r\n            speedIncreaser();\r\n        }\r\n        if (hasBouncedVertically == false &amp;&amp; enemyPaddle != null) {\r\n            revertVertically();\r\n        }\r\n    }\r\n    \r\n    // Increases speed\r\n    public void speedIncreaser() {\r\n        touchCounter++;\r\n            if (touchCounter == 10) {\r\n                speed++;\r\n                PingWorld theWorld = (PingWorld) getWorld();\r\n                theWorld.increaseGameLevel();\r\n                touchCounter = 0;\r\n            }\r\n    }\r\n\r\n    /**\r\n     * Initialize the ball settings.\r\n     */\r\n    private void init()\r\n    {\r\n        speed = 2;\r\n        delay = DELAY_TIME;\r\n        hasBouncedHorizontally = false;\r\n        hasBouncedVertically = false;\r\n        setRotation(Greenfoot.getRandomNumber(STARTING_ANGLE_WIDTH)+STARTING_ANGLE_WIDTH/2);\r\n    }\r\n\r\n}\r\n```","title":"Java Pong ball gliding on the paddles","body":"<p>My classmates and I are making a pong game and we have run into a problem.\nThe bug is that when the pong ball intersects with either the walls or player paddles, the ball will sometimes collide multiple times so that it looks like the ball is gliding on the paddle.\nIf anyone has run into this same problem or has any knowledge of what causes this I would much appreciate the help.</p>\n<p>We found a solution to the problem which is putting a cooldown on the ball after hitting an object (wall and or paddle) that way it won't get that weird gliding bug, thank you everyone for posting suggestions and helping us out ;)</p>\n<pre><code>import greenfoot.*;\nimport java.awt.*;\n\n/**\n * A Ball is a thing that bounces of walls and paddles (or at least i should).\n * \n * @author The teachers \n * @version 1\n */\npublic class Ball extends Actor\n{\n    private static final int BALL_SIZE = 50;\n    private static final int BOUNCE_DEVIANCE_MAX = 5;\n    private static final int STARTING_ANGLE_WIDTH = 90;\n    private static final int DELAY_TIME = 200;\n\n    private int speed;\n    private boolean hasBouncedHorizontally;\n    private boolean hasBouncedVertically;\n    private int delay;\n    private int touchCounter;\n\n    /**\n     * Contructs the ball and sets it in motion!\n     */\n    public Ball()\n    {\n        // createImage();\n        init();\n    }\n\n    /**\n     * Creates and sets an image of a black ball to this actor.\n     */\n    /*\n    private void createImage()\n    {\n        GreenfootImage ballImage = new GreenfootImage(BALL_SIZE,BALL_SIZE);\n        ballImage.setColor(Color.RED);\n        ballImage.fillOval(0, 0, BALL_SIZE, BALL_SIZE);\n        setImage(ballImage);\n    }\n    */\n\n    /**\n     * Act - do whatever the Ball wants to do. This method is called whenever\n     * the 'Act' or 'Run' button gets pressed in the environment.\n     */\n    public void act() \n    {\n        if (delay &gt; 0)\n        {\n            delay--;\n        }\n        else\n        {\n            move(speed);\n            checkBounceOffWalls();\n            checkBounceOffCeiling();\n            checkRestart();\n            bounceOffPaddles();\n        }\n    }    \n\n    /**\n     * Returns true if the ball is touching one of the side walls.\n     */\n    private boolean isTouchingSides()\n    {\n        return getX() &lt;= BALL_SIZE/2 || getX() &gt;= getWorld().getWidth() - BALL_SIZE/2;\n    }\n\n    /**\n     * Returns true if the ball is touching the ceiling.\n     */\n    private boolean isTouchingCeiling()\n    {\n        return (getY() &lt;= BALL_SIZE/2);\n    }\n\n    /**\n     * Returns true if the ball is touching the floor.\n     */\n    private boolean isTouchingFloor()\n    { \n        return (getY() &gt;= getWorld().getHeight() - BALL_SIZE/2);\n    }\n\n    /**\n     * Check to see if the ball should bounce off one of the walls.\n     * If touching one of the walls, the ball is bouncing off.\n     */\n    private void checkBounceOffWalls()\n    {\n        if (isTouchingSides())\n        {\n            if (! hasBouncedHorizontally)\n            {\n                revertHorizontally();\n            }\n        }\n        else\n        {\n            hasBouncedHorizontally = false;\n        }\n    }\n\n    /**\n     * Check to see if the ball should bounce off the ceiling.\n     * If touching the ceiling the ball is bouncing off.\n     */\n    private void checkBounceOffCeiling()\n    {\n        if (isTouchingCeiling())\n        {\n            if (! hasBouncedVertically)\n            {\n                revertVertically();\n            }\n        }\n        // Removed for purpose of solving Task 3\n        /*\n        else\n        {\n            hasBouncedVertically = false;\n        }\n        */\n    }\n\n    /**\n     * Check to see if the ball should be restarted.\n     * If touching the floor the ball is restarted in initial position and speed.\n     */\n    private void checkRestart()\n    {\n        if (isTouchingFloor())\n        {\n            PingWorld theWorld = (PingWorld) getWorld();\n            theWorld.resetGameLevel();\n            init();\n            setLocation(getWorld().getWidth() / 2, getWorld().getHeight() / 2);\n        }\n    }\n\n    /**\n     * Bounces the ball back from a vertical surface.\n     */\n    private void revertHorizontally()\n    {\n        int randomness = Greenfoot.getRandomNumber(BOUNCE_DEVIANCE_MAX)- BOUNCE_DEVIANCE_MAX / 2;\n        setRotation((180 - getRotation()+ randomness + 360) % 360);\n        Greenfoot.playSound(&quot;pewsoundeffect.mp3&quot;);\n        hasBouncedHorizontally = true;\n    }\n\n    /**\n     * Bounces the bal back from a horizontal surface.\n     */\n    private void revertVertically()\n    {\n        int randomness = Greenfoot.getRandomNumber(BOUNCE_DEVIANCE_MAX)- BOUNCE_DEVIANCE_MAX / 2;\n        setRotation((360 - getRotation()+ randomness + 360) % 360);\n        Greenfoot.playSound(&quot;pewsoundeffect.mp3&quot;);\n        hasBouncedVertically = true;\n    }\n    \n    // Checking for the paddles if they intersect with the ball, if touching, revert vertically.\n    public void bounceOffPaddles() \n    {\n        Actor paddle = getOneIntersectingObject(Paddle.class);\n        Actor enemyPaddle = getOneIntersectingObject(EnemyPaddle.class);\n        \n        if (paddle != null) {\n            revertVertically();\n            hasBouncedVertically = false;\n            speedIncreaser();\n        }\n        if (hasBouncedVertically == false &amp;&amp; enemyPaddle != null) {\n            revertVertically();\n        }\n    }\n    \n    // Increases speed\n    public void speedIncreaser() {\n        touchCounter++;\n            if (touchCounter == 10) {\n                speed++;\n                PingWorld theWorld = (PingWorld) getWorld();\n                theWorld.increaseGameLevel();\n                touchCounter = 0;\n            }\n    }\n\n    /**\n     * Initialize the ball settings.\n     */\n    private void init()\n    {\n        speed = 2;\n        delay = DELAY_TIME;\n        hasBouncedHorizontally = false;\n        hasBouncedVertically = false;\n        setRotation(Greenfoot.getRandomNumber(STARTING_ANGLE_WIDTH)+STARTING_ANGLE_WIDTH/2);\n    }\n\n}      else\n        {\n            hasBouncedVertically = false;\n        }\n        */\n    }\n\n    /**\n     * Check to see if the ball should be restarted.\n     * If touching the floor the ball is restarted in initial position and speed.\n     */\n    private void checkRestart()\n    {\n        if (isTouchingFloor())\n        {\n            PingWorld theWorld = (PingWorld) getWorld();\n            theWorld.resetGameLevel();\n            init();\n            setLocation(getWorld().getWidth() / 2, getWorld().getHeight() / 2);\n        }\n    }\n\n    /**\n     * Bounces the ball back from a vertical surface.\n     */\n    private void revertHorizontally()\n    {\n        int randomness = Greenfoot.getRandomNumber(BOUNCE_DEVIANCE_MAX)- BOUNCE_DEVIANCE_MAX / 2;\n        setRotation((180 - getRotation()+ randomness + 360) % 360);\n        Greenfoot.playSound(&quot;pewsoundeffect.mp3&quot;);\n        hasBouncedHorizontally = true;\n    }\n\n    /**\n     * Bounces the bal back from a horizontal surface.\n     */\n    private void revertVertically()\n    {\n        int randomness = Greenfoot.getRandomNumber(BOUNCE_DEVIANCE_MAX)- BOUNCE_DEVIANCE_MAX / 2;\n        setRotation((360 - getRotation()+ randomness + 360) % 360);\n        Greenfoot.playSound(&quot;pewsoundeffect.mp3&quot;);\n        hasBouncedVertically = true;\n    }\n    \n    // Checking for the paddles if they intersect with the ball, if touching, revert vertically.\n    public void bounceOffPaddles() \n    {\n        Actor paddle = getOneIntersectingObject(Paddle.class);\n        Actor enemyPaddle = getOneIntersectingObject(EnemyPaddle.class);\n        \n        if (paddle != null) {\n            revertVertically();\n            hasBouncedVertically = false;\n            speedIncreaser();\n        }\n        if (hasBouncedVertically == false &amp;&amp; enemyPaddle != null) {\n            revertVertically();\n        }\n    }\n    \n    // Increases speed\n    public void speedIncreaser() {\n        touchCounter++;\n            if (touchCounter == 10) {\n                speed++;\n                PingWorld theWorld = (PingWorld) getWorld();\n                theWorld.increaseGameLevel();\n                touchCounter = 0;\n            }\n    }\n\n    /**\n     * Initialize the ball settings.\n     */\n    private void init()\n    {\n        speed = 2;\n        delay = DELAY_TIME;\n        hasBouncedHorizontally = false;\n        hasBouncedVertically = false;\n        setRotation(Greenfoot.getRandomNumber(STARTING_ANGLE_WIDTH)+STARTING_ANGLE_WIDTH/2);\n    }\n\n}\n</code></pre>\n"},{"tags":["java","android","xml","kotlin","user-interface"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1695070105,"post_id":77125693,"comment_id":135972465,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."},{"owner":{"account_id":26840344,"reputation":134,"user_id":20426969,"display_name":"Sarmad Ali"},"score":0,"creation_date":1695106167,"post_id":77125693,"comment_id":135975894,"body_markdown":"look for chat bubble that are kind of v shaped from top left or right corners but you can play with the code and try to create the shape you want see this **https://stackoverflow.com/questions/7974847/android-drawable-speech-bubble**","body":"look for chat bubble that are kind of v shaped from top left or right corners but you can play with the code and try to create the shape you want see this <b><a href=\"https://stackoverflow.com/questions/7974847/android-drawable-speech-bubble\" title=\"android drawable speech bubble\">stackoverflow.com/questions/7974847/&hellip;</a></b>"},{"owner":{"account_id":12705507,"reputation":21,"user_id":9230940,"display_name":"Angel"},"score":0,"creation_date":1695113201,"post_id":77125693,"comment_id":135977303,"body_markdown":"@SarmadAli Thanks a lot, it really helps with the drawings and I really appreciate it but I need to be able to move that v shape to the top of the achor ( for example if someone clicks one of the other bottom nav options in the picture, I need the v to stick to top of that option ). I know the popup menus in flutter work that way but in kotlin/java I couldn&#39;t find any equivalant, got any idea for that too?","body":"@SarmadAli Thanks a lot, it really helps with the drawings and I really appreciate it but I need to be able to move that v shape to the top of the achor ( for example if someone clicks one of the other bottom nav options in the picture, I need the v to stick to top of that option ). I know the popup menus in flutter work that way but in kotlin/java I couldn&#39;t find any equivalant, got any idea for that too?"}],"answers":[{"tags":[],"owner":{"account_id":22432165,"reputation":1234,"user_id":16637863,"display_name":"Pawan Harariya"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695153422,"creation_date":1695153422,"answer_id":77137617,"question_id":77125693,"body_markdown":"You can draw a custom drawable for the background, and set is a background of the root view that holds the layout.\r\n\r\nDrawable-Code \r\n\r\nPS. The drawable doesn&#39;t look right, but when you set is as background it looks like required.\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;layer-list xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\r\n    &lt;item\r\n        android:bottom=&quot;12dp&quot;\r\n        android:gravity=&quot;bottom|center_horizontal&quot;&gt;\r\n        &lt;rotate\r\n            android:fromDegrees=&quot;45&quot;\r\n            android:pivotX=&quot;50%&quot;\r\n            android:pivotY=&quot;50%&quot;&gt;\r\n            &lt;shape android:shape=&quot;rectangle&quot;&gt;\r\n                &lt;size\r\n                    android:width=&quot;60dp&quot;\r\n                    android:height=&quot;60dp&quot; /&gt;\r\n                &lt;corners android:bottomRightRadius=&quot;2dp&quot; /&gt;\r\n                &lt;solid android:color=&quot;@color/black&quot; /&gt;\r\n            &lt;/shape&gt;\r\n        &lt;/rotate&gt;\r\n    &lt;/item&gt;\r\n\r\n    &lt;item android:bottom=&quot;14dp&quot;&gt;\r\n        &lt;shape android:shape=&quot;rectangle&quot;&gt;\r\n            &lt;solid android:color=&quot;@color/black&quot; /&gt;\r\n            &lt;corners\r\n                android:topLeftRadius=&quot;12dp&quot;\r\n                android:topRightRadius=&quot;12dp&quot; /&gt;\r\n        &lt;/shape&gt;\r\n    &lt;/item&gt;\r\n&lt;/layer-list&gt;\r\n```\r\n\r\nCreate your layout : I have used a `LinearLayout` and set its background to the above drawable. I have put `TextView` inside the `LinearLayout`, you can use other as per requirements.\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    tools:context=&quot;.MainActivity&quot;&gt;\r\n\r\n    &lt;LinearLayout\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:layout_margin=&quot;64dp&quot;\r\n        android:background=&quot;@drawable/background&quot;\r\n        android:orientation=&quot;vertical&quot;\r\n        android:paddingTop=&quot;16dp&quot;\r\n        android:paddingBottom=&quot;32dp&quot;\r\n        android:paddingHorizontal=&quot;16dp&quot;&gt;\r\n\r\n        &lt;TextView\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:text=&quot;TextView 1&quot;\r\n            android:textColor=&quot;@color/white&quot;\r\n            android:textSize=&quot;22sp&quot; /&gt;\r\n\r\n        &lt;TextView\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:text=&quot;TextView 2&quot;\r\n            android:textColor=&quot;@color/white&quot;\r\n            android:textSize=&quot;22sp&quot; /&gt;\r\n\r\n        &lt;TextView\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:text=&quot;TextView 3&quot;\r\n            android:textColor=&quot;@color/white&quot;\r\n            android:textSize=&quot;22sp&quot; /&gt;\r\n    &lt;/LinearLayout&gt;\r\n\r\n&lt;/RelativeLayout&gt;\r\n```\r\nSample Outputs:\r\n\r\nDrawable shape\r\n\r\n[![Drawable shape][1]][1]\r\n\r\nLayout with drawable background\r\n\r\n[![Layout with drawable background][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/c6aq4.png\r\n  [2]: https://i.stack.imgur.com/uiOYZ.png","title":"Custom popup menu android","body":"<p>You can draw a custom drawable for the background, and set is a background of the root view that holds the layout.</p>\n<p>Drawable-Code</p>\n<p>PS. The drawable doesn't look right, but when you set is as background it looks like required.</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;layer-list xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\n    &lt;item\n        android:bottom=&quot;12dp&quot;\n        android:gravity=&quot;bottom|center_horizontal&quot;&gt;\n        &lt;rotate\n            android:fromDegrees=&quot;45&quot;\n            android:pivotX=&quot;50%&quot;\n            android:pivotY=&quot;50%&quot;&gt;\n            &lt;shape android:shape=&quot;rectangle&quot;&gt;\n                &lt;size\n                    android:width=&quot;60dp&quot;\n                    android:height=&quot;60dp&quot; /&gt;\n                &lt;corners android:bottomRightRadius=&quot;2dp&quot; /&gt;\n                &lt;solid android:color=&quot;@color/black&quot; /&gt;\n            &lt;/shape&gt;\n        &lt;/rotate&gt;\n    &lt;/item&gt;\n\n    &lt;item android:bottom=&quot;14dp&quot;&gt;\n        &lt;shape android:shape=&quot;rectangle&quot;&gt;\n            &lt;solid android:color=&quot;@color/black&quot; /&gt;\n            &lt;corners\n                android:topLeftRadius=&quot;12dp&quot;\n                android:topRightRadius=&quot;12dp&quot; /&gt;\n        &lt;/shape&gt;\n    &lt;/item&gt;\n&lt;/layer-list&gt;\n</code></pre>\n<p>Create your layout : I have used a <code>LinearLayout</code> and set its background to the above drawable. I have put <code>TextView</code> inside the <code>LinearLayout</code>, you can use other as per requirements.</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    tools:context=&quot;.MainActivity&quot;&gt;\n\n    &lt;LinearLayout\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_margin=&quot;64dp&quot;\n        android:background=&quot;@drawable/background&quot;\n        android:orientation=&quot;vertical&quot;\n        android:paddingTop=&quot;16dp&quot;\n        android:paddingBottom=&quot;32dp&quot;\n        android:paddingHorizontal=&quot;16dp&quot;&gt;\n\n        &lt;TextView\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:text=&quot;TextView 1&quot;\n            android:textColor=&quot;@color/white&quot;\n            android:textSize=&quot;22sp&quot; /&gt;\n\n        &lt;TextView\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:text=&quot;TextView 2&quot;\n            android:textColor=&quot;@color/white&quot;\n            android:textSize=&quot;22sp&quot; /&gt;\n\n        &lt;TextView\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:text=&quot;TextView 3&quot;\n            android:textColor=&quot;@color/white&quot;\n            android:textSize=&quot;22sp&quot; /&gt;\n    &lt;/LinearLayout&gt;\n\n&lt;/RelativeLayout&gt;\n</code></pre>\n<p>Sample Outputs:</p>\n<p>Drawable shape</p>\n<p><a href=\"https://i.stack.imgur.com/c6aq4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/c6aq4.png\" alt=\"Drawable shape\" /></a></p>\n<p>Layout with drawable background</p>\n<p><a href=\"https://i.stack.imgur.com/uiOYZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uiOYZ.png\" alt=\"Layout with drawable background\" /></a></p>\n"},{"tags":[],"owner":{"account_id":22432165,"reputation":1234,"user_id":16637863,"display_name":"Pawan Harariya"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695204032,"creation_date":1695204032,"answer_id":77141333,"question_id":77125693,"body_markdown":"One way to do this is manually changing the background drawable, whenever the selected item changes. You can create a custom view for easy handling. You can follow [this site][1] for more information on custom views. \r\n\r\nYou can create a separate drawable for the `V` shaped indicator, since it changes and the curved background of the pop-menu remains same.\r\nCreate the required drawable.\r\n```\r\n&lt;vector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    android:width=&quot;40dp&quot;\r\n    android:height=&quot;40dp&quot;\r\n    android:viewportWidth=&quot;100&quot;\r\n    android:viewportHeight=&quot;100&quot;&gt;\r\n    &lt;path\r\n        android:fillColor=&quot;@color/black&quot;\r\n        android:pathData=&quot;m 50,100 l 50,-100 -100,0 z&quot; /&gt;\r\n&lt;/vector&gt;\r\n```\r\n[![Triangle Drawable][2]][2]\r\n\r\n\r\nCreate a custom view layout. Here I have used `LinearLayout` with five views for the five options, you can change padding and margins according to you.\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;merge xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\r\n\r\n    &lt;LinearLayout\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;40dp&quot;\r\n        android:orientation=&quot;horizontal&quot;\r\n        android:paddingHorizontal=&quot;12dp&quot;&gt;\r\n\r\n        &lt;View\r\n            android:id=&quot;@+id/option1&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_marginHorizontal=&quot;20dp&quot;\r\n            android:layout_weight=&quot;1&quot; /&gt;\r\n\r\n        &lt;View\r\n            android:id=&quot;@+id/option2&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_marginHorizontal=&quot;20dp&quot;\r\n            android:layout_weight=&quot;1&quot; /&gt;\r\n\r\n        &lt;View\r\n            android:id=&quot;@+id/option3&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_marginHorizontal=&quot;20dp&quot;\r\n            android:layout_weight=&quot;1&quot;\r\n            android:background=&quot;@drawable/triangle_indicator&quot; /&gt;\r\n\r\n        &lt;View\r\n            android:id=&quot;@+id/option4&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_marginHorizontal=&quot;20dp&quot;\r\n            android:layout_weight=&quot;1&quot; /&gt;\r\n\r\n        &lt;View\r\n            android:id=&quot;@+id/option5&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_marginHorizontal=&quot;20dp&quot;\r\n            android:layout_weight=&quot;1&quot; /&gt;\r\n\r\n    &lt;/LinearLayout&gt;\r\n&lt;/merge&gt;\r\n```\r\n\r\n[![Custom Indicator Layout][3]][3]\r\n\r\nCreate a custom view for based on the layout\r\n```\r\nimport android.content.Context;\r\nimport android.util.AttributeSet;\r\nimport android.view.View;\r\nimport android.widget.LinearLayout;\r\n\r\npublic class CustomIndicator extends LinearLayout {\r\n    private final View option1, option2, option3, option4, option5;\r\n    private int selectedOption = 3;\r\n    private final int indicatorBackground;\r\n    public CustomIndicator(Context context, AttributeSet attrs) {\r\n        super(context, attrs);\r\n        inflate(context, R.layout.custom_indicator, this);\r\n        option1 = findViewById(R.id.option1);\r\n        option2 = findViewById(R.id.option2);\r\n        option3 = findViewById(R.id.option3);\r\n        option4 = findViewById(R.id.option4);\r\n        option5 = findViewById(R.id.option5);\r\n        indicatorBackground = R.drawable.triangle_indicator;\r\n    }\r\n\r\n    public CustomIndicator(Context context) {\r\n        this(context, null);\r\n    }\r\n\r\n    public void setSelectedIndex(int index){\r\n        // expose a public method to update the index of selected view\r\n        selectedOption = index;\r\n        updateSelection();\r\n    }\r\n\r\n    private void updateSelection(){\r\n        // sets the background to selected view index\r\n        option1.setBackground(null);\r\n        option2.setBackground(null);\r\n        option3.setBackground(null);\r\n        option4.setBackground(null);\r\n        option5.setBackground(null);\r\n\r\n        switch (selectedOption){\r\n            case 1: option1.setBackgroundResource(indicatorBackground); break;\r\n            case 2: option2.setBackgroundResource(indicatorBackground); break;\r\n            case 3: option3.setBackgroundResource(indicatorBackground); break;\r\n            case 4: option4.setBackgroundResource(indicatorBackground); break;\r\n            case 5: option5.setBackgroundResource(indicatorBackground); break;\r\n        }\r\n    }\r\n}\r\n\r\n```\r\nUse the custom view in your layout, you may have to change dimens of layout file and height of the view according to your needs\r\n```\r\n&lt;com.example.motionlayoutexample.CustomIndicator\r\n        android:id=&quot;@+id/custom_indicator&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_centerInParent=&quot;true&quot;\r\n        android:layout_height=&quot;40dp&quot;/&gt;\r\n```\r\nUpdate the selection whenever the selection of bottom navigation bar changes.\r\n```\r\n// Whenever the selection of bottom navigation changes update the index here.\r\ncustomIndicator = findViewById(R.id.custom_indicator)\r\ncustomIndicator.setSelectedIndex(4)\r\n```\r\nNOTE : \r\n\r\n - You may want to use proper names instead of option1, option2... for layout ID. \r\n - You should also use enum class for selection instead of `int` for better code quality.\r\n\r\n  [1]: https://www.vogella.com/tutorials/AndroidCustomViews/article.html\r\n  [2]: https://i.stack.imgur.com/HiHkL.png\r\n  [3]: https://i.stack.imgur.com/OuVz5.png","title":"Custom popup menu android","body":"<p>One way to do this is manually changing the background drawable, whenever the selected item changes. You can create a custom view for easy handling. You can follow <a href=\"https://www.vogella.com/tutorials/AndroidCustomViews/article.html\" rel=\"nofollow noreferrer\">this site</a> for more information on custom views.</p>\n<p>You can create a separate drawable for the <code>V</code> shaped indicator, since it changes and the curved background of the pop-menu remains same.\nCreate the required drawable.</p>\n<pre><code>&lt;vector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:width=&quot;40dp&quot;\n    android:height=&quot;40dp&quot;\n    android:viewportWidth=&quot;100&quot;\n    android:viewportHeight=&quot;100&quot;&gt;\n    &lt;path\n        android:fillColor=&quot;@color/black&quot;\n        android:pathData=&quot;m 50,100 l 50,-100 -100,0 z&quot; /&gt;\n&lt;/vector&gt;\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/HiHkL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HiHkL.png\" alt=\"Triangle Drawable\" /></a></p>\n<p>Create a custom view layout. Here I have used <code>LinearLayout</code> with five views for the five options, you can change padding and margins according to you.</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;merge xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\n\n    &lt;LinearLayout\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;40dp&quot;\n        android:orientation=&quot;horizontal&quot;\n        android:paddingHorizontal=&quot;12dp&quot;&gt;\n\n        &lt;View\n            android:id=&quot;@+id/option1&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_marginHorizontal=&quot;20dp&quot;\n            android:layout_weight=&quot;1&quot; /&gt;\n\n        &lt;View\n            android:id=&quot;@+id/option2&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_marginHorizontal=&quot;20dp&quot;\n            android:layout_weight=&quot;1&quot; /&gt;\n\n        &lt;View\n            android:id=&quot;@+id/option3&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_marginHorizontal=&quot;20dp&quot;\n            android:layout_weight=&quot;1&quot;\n            android:background=&quot;@drawable/triangle_indicator&quot; /&gt;\n\n        &lt;View\n            android:id=&quot;@+id/option4&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_marginHorizontal=&quot;20dp&quot;\n            android:layout_weight=&quot;1&quot; /&gt;\n\n        &lt;View\n            android:id=&quot;@+id/option5&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_marginHorizontal=&quot;20dp&quot;\n            android:layout_weight=&quot;1&quot; /&gt;\n\n    &lt;/LinearLayout&gt;\n&lt;/merge&gt;\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/OuVz5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OuVz5.png\" alt=\"Custom Indicator Layout\" /></a></p>\n<p>Create a custom view for based on the layout</p>\n<pre><code>import android.content.Context;\nimport android.util.AttributeSet;\nimport android.view.View;\nimport android.widget.LinearLayout;\n\npublic class CustomIndicator extends LinearLayout {\n    private final View option1, option2, option3, option4, option5;\n    private int selectedOption = 3;\n    private final int indicatorBackground;\n    public CustomIndicator(Context context, AttributeSet attrs) {\n        super(context, attrs);\n        inflate(context, R.layout.custom_indicator, this);\n        option1 = findViewById(R.id.option1);\n        option2 = findViewById(R.id.option2);\n        option3 = findViewById(R.id.option3);\n        option4 = findViewById(R.id.option4);\n        option5 = findViewById(R.id.option5);\n        indicatorBackground = R.drawable.triangle_indicator;\n    }\n\n    public CustomIndicator(Context context) {\n        this(context, null);\n    }\n\n    public void setSelectedIndex(int index){\n        // expose a public method to update the index of selected view\n        selectedOption = index;\n        updateSelection();\n    }\n\n    private void updateSelection(){\n        // sets the background to selected view index\n        option1.setBackground(null);\n        option2.setBackground(null);\n        option3.setBackground(null);\n        option4.setBackground(null);\n        option5.setBackground(null);\n\n        switch (selectedOption){\n            case 1: option1.setBackgroundResource(indicatorBackground); break;\n            case 2: option2.setBackgroundResource(indicatorBackground); break;\n            case 3: option3.setBackgroundResource(indicatorBackground); break;\n            case 4: option4.setBackgroundResource(indicatorBackground); break;\n            case 5: option5.setBackgroundResource(indicatorBackground); break;\n        }\n    }\n}\n\n</code></pre>\n<p>Use the custom view in your layout, you may have to change dimens of layout file and height of the view according to your needs</p>\n<pre><code>&lt;com.example.motionlayoutexample.CustomIndicator\n        android:id=&quot;@+id/custom_indicator&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_centerInParent=&quot;true&quot;\n        android:layout_height=&quot;40dp&quot;/&gt;\n</code></pre>\n<p>Update the selection whenever the selection of bottom navigation bar changes.</p>\n<pre><code>// Whenever the selection of bottom navigation changes update the index here.\ncustomIndicator = findViewById(R.id.custom_indicator)\ncustomIndicator.setSelectedIndex(4)\n</code></pre>\n<p>NOTE :</p>\n<ul>\n<li>You may want to use proper names instead of option1, option2... for layout ID.</li>\n<li>You should also use enum class for selection instead of <code>int</code> for better code quality.</li>\n</ul>\n"}],"owner":{"account_id":12705507,"reputation":21,"user_id":9230940,"display_name":"Angel"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1695204032,"creation_date":1695026837,"question_id":77125693,"body_markdown":"Is it possible to make such custom popup Menu in android studio? (not flutter) \r\nMy actual problem is making that small &quot;v&quot; attach to the button as anchor. [![The background is blurred but it doesn&#39;t matter that much if it doesn&#39;t look like that, thing is that I just want to to stick a &quot;v&quot; shaped type of thing at bottom to the anchor](https://i.stack.imgur.com/LFbZY.png)](https://i.stack.imgur.com/LFbZY.png)\r\n\r\nI tried anything I found on the internet and I can do the background color and shape with defining a style but can&#39;t implement the bottom &quot;v&quot; kinda thing. The background is blurred but it doesn&#39;t matter that much if it doesn&#39;t look like that, thing is that I just want to to stick a &quot;v&quot; shaped type of thing at bottom to the anchor\r\nAny help would be appreciated and thanks in advance !\r\n\r\n**EDIT :**\r\n\r\n**The actual problem is attaching the small &quot;V&quot; shape to any of the options or buttons down there.** The drawable can be made using layer-list as dear Pawan also mentioned is his answer. Here&#39;s another example: If someone clicks the services button, the  popupMenu should look like this: [![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Re3Ye.png\r\n\r\nAs you can see, the background is the same, but **the little &quot;V&quot; is gone to the location of the services item/button.** I tried using popupWindow but then again some of these popup menu items have sub-menus (as shown in the first picture) and that causes some difficulties. ","title":"Custom popup menu android","body":"<p>Is it possible to make such custom popup Menu in android studio? (not flutter)\nMy actual problem is making that small &quot;v&quot; attach to the button as anchor. <a href=\"https://i.stack.imgur.com/LFbZY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LFbZY.png\" alt=\"The background is blurred but it doesn't matter that much if it doesn't look like that, thing is that I just want to to stick a &quot;v&quot; shaped type of thing at bottom to the anchor\" /></a></p>\n<p>I tried anything I found on the internet and I can do the background color and shape with defining a style but can't implement the bottom &quot;v&quot; kinda thing. The background is blurred but it doesn't matter that much if it doesn't look like that, thing is that I just want to to stick a &quot;v&quot; shaped type of thing at bottom to the anchor\nAny help would be appreciated and thanks in advance !</p>\n<p><strong>EDIT :</strong></p>\n<p><strong>The actual problem is attaching the small &quot;V&quot; shape to any of the options or buttons down there.</strong> The drawable can be made using layer-list as dear Pawan also mentioned is his answer. Here's another example: If someone clicks the services button, the  popupMenu should look like this: <a href=\"https://i.stack.imgur.com/Re3Ye.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Re3Ye.png\" alt=\"enter image description here\" /></a></p>\n<p>As you can see, the background is the same, but <strong>the little &quot;V&quot; is gone to the location of the services item/button.</strong> I tried using popupWindow but then again some of these popup menu items have sub-menus (as shown in the first picture) and that causes some difficulties.</p>\n"},{"tags":["java","testing","mockito"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":1,"creation_date":1695203963,"post_id":77141282,"comment_id":135991772,"body_markdown":"It is only necessary in the second test  not in the first test. So move the stubbing to the related tests","body":"It is only necessary in the second test  not in the first test. So move the stubbing to the related tests"},{"owner":{"account_id":2139538,"reputation":42501,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":0,"creation_date":1695204294,"post_id":77141282,"comment_id":135991851,"body_markdown":"The way the unnecessary stubbing detection works is by, for each test case, calculating which stubbings were provided and which were required. If those 2 things are different, it will throw. You seem to be under the impression that Mockito should understand which stubbings were specifically provided in `setup`, and consider them separately. I suppose it could do that, but it doesn&#39;t.","body":"The way the unnecessary stubbing detection works is by, for each test case, calculating which stubbings were provided and which were required. If those 2 things are different, it will throw. You seem to be under the impression that Mockito should understand which stubbings were specifically provided in <code>setup</code>, and consider them separately. I suppose it could do that, but it doesn&#39;t."}],"answers":[{"tags":[],"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1695204006,"creation_date":1695204006,"answer_id":77141327,"question_id":77141282,"body_markdown":"The stubbings are only related to one of both tests, so for the otherone is unneccesary, thats why you get the error.\r\nSo move the stubbing to the related tests or use `@MockitoSettings(strictness = Strictness.LENIENT)`\r\n\r\n    @ExtendWith(MockitoExtension.class)\r\n    class RoleServiceImplTest {\r\n        @InjectMocks\r\n        RoleServiceImpl roleService;\r\n        @Mock\r\n        RoleDao roleDao;\r\n        static final String USER = &quot;USER&quot;;\r\n        static final String ADMIN = &quot;ADMIN&quot;;\r\n    \r\n        @Test\r\n        void getRoleByName() {\r\n            when(roleDao.findByAuthority(USER)).thenReturn(new Role(USER));\r\n            assertThat(roleService.getRoleByName(USER)).extracting(Role::getAuthority).isEqualTo(USER);\r\n            verify(roleDao, times(1)).findByAuthority(USER);\r\n        }\r\n    \r\n        @Test\r\n        void getAdminRoleSet() {\r\n            when(roleDao.findByAuthorityOrAuthority(USER, ADMIN))\r\n                    .thenReturn(List.of(new Role(USER), new Role(ADMIN)));\r\n            var adminRoles = roleService.getAdminRoleSet().stream()\r\n                    .map(Role::getAuthority)\r\n                    .toList();\r\n            assertThat(adminRoles.size()).isEqualTo(2);\r\n            assertThat(adminRoles).asList().contains(ADMIN, USER);\r\n            verify(roleDao, times(1)).findByAuthorityOrAuthority(USER, ADMIN);\r\n        }\r\n    }\r\n\r\nor \r\n\r\n    @MockitoSettings(strictness = Strictness.LENIENT)\r\n    class RoleServiceImplTest {\r\n","title":"UnnecessaryStubbingException: Unnecessary stubbings detected","body":"<p>The stubbings are only related to one of both tests, so for the otherone is unneccesary, thats why you get the error.\nSo move the stubbing to the related tests or use <code>@MockitoSettings(strictness = Strictness.LENIENT)</code></p>\n<pre><code>@ExtendWith(MockitoExtension.class)\nclass RoleServiceImplTest {\n    @InjectMocks\n    RoleServiceImpl roleService;\n    @Mock\n    RoleDao roleDao;\n    static final String USER = &quot;USER&quot;;\n    static final String ADMIN = &quot;ADMIN&quot;;\n\n    @Test\n    void getRoleByName() {\n        when(roleDao.findByAuthority(USER)).thenReturn(new Role(USER));\n        assertThat(roleService.getRoleByName(USER)).extracting(Role::getAuthority).isEqualTo(USER);\n        verify(roleDao, times(1)).findByAuthority(USER);\n    }\n\n    @Test\n    void getAdminRoleSet() {\n        when(roleDao.findByAuthorityOrAuthority(USER, ADMIN))\n                .thenReturn(List.of(new Role(USER), new Role(ADMIN)));\n        var adminRoles = roleService.getAdminRoleSet().stream()\n                .map(Role::getAuthority)\n                .toList();\n        assertThat(adminRoles.size()).isEqualTo(2);\n        assertThat(adminRoles).asList().contains(ADMIN, USER);\n        verify(roleDao, times(1)).findByAuthorityOrAuthority(USER, ADMIN);\n    }\n}\n</code></pre>\n<p>or</p>\n<pre><code>@MockitoSettings(strictness = Strictness.LENIENT)\nclass RoleServiceImplTest {\n</code></pre>\n"}],"owner":{"account_id":28965224,"reputation":321,"user_id":22186847,"display_name":"JoreJoh"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":77141327,"answer_count":1,"score":-1,"last_activity_date":1695204006,"creation_date":1695203701,"question_id":77141282,"body_markdown":"I tried to test this:\r\n```java\r\npackage pp.spring_bootstrap.service;\r\n\r\nimport org.springframework.stereotype.Service;\r\nimport org.springframework.transaction.annotation.Transactional;\r\nimport pp.spring_bootstrap.dao.RoleDao;\r\nimport pp.spring_bootstrap.models.Role;\r\n\r\nimport java.util.HashSet;\r\nimport java.util.Set;\r\n\r\n@Service\r\n@Transactional(readOnly = true)\r\npublic class RoleServiceImpl implements RoleService {\r\n    private final RoleDao roleDao;\r\n\r\n    public RoleServiceImpl(RoleDao roleDao) {\r\n        this.roleDao = roleDao;\r\n    }\r\n\r\n    @Override\r\n    public Role getRoleByName(String name) {\r\n        return roleDao.findByAuthority(name);\r\n    }\r\n\r\n    @Override\r\n    public Set&lt;Role&gt; getAdminRoleSet() {\r\n        return new HashSet&lt;&gt;(roleDao.findByAuthorityOrAuthority(&quot;USER&quot;, &quot;ADMIN&quot;));\r\n    }\r\n}\r\n```\r\nHere&#39;s my test:\r\n```java\r\n@ExtendWith(MockitoExtension.class)\r\nclass RoleServiceImplTest {\r\n    @InjectMocks\r\n    RoleServiceImpl roleService;\r\n    @Mock\r\n    RoleDao roleDao;\r\n    static final String USER = &quot;USER&quot;;\r\n    static final String ADMIN = &quot;ADMIN&quot;;\r\n\r\n    @BeforeEach\r\n    void setUp() {\r\n        when(roleDao.findByAuthority(USER)).thenReturn(new Role(USER));\r\n        when(roleDao.findByAuthorityOrAuthority(USER, ADMIN))\r\n                .thenReturn(List.of(new Role(USER), new Role(ADMIN)));\r\n    }\r\n\r\n    @Test\r\n    void getRoleByName() {\r\n        assertThat(roleService.getRoleByName(USER)).extracting(Role::getAuthority).isEqualTo(USER);\r\n        verify(roleDao, times(1)).findByAuthority(USER);\r\n    }\r\n\r\n    @Test\r\n    void getAdminRoleSet() {\r\n        var adminRoles = roleService.getAdminRoleSet().stream()\r\n                .map(Role::getAuthority)\r\n                .toList();\r\n        assertThat(adminRoles.size()).isEqualTo(2);\r\n        assertThat(adminRoles).asList().contains(ADMIN, USER);\r\n        verify(roleDao, times(1)).findByAuthorityOrAuthority(USER, ADMIN);\r\n    }\r\n}\r\n```\r\nThe tests don&#39;t pass due to this exception:\r\n```\r\norg.mockito.exceptions.misusing.UnnecessaryStubbingException: \r\nUnnecessary stubbings detected.\r\nClean &amp; maintainable test code requires zero unnecessary code.\r\nFollowing stubbings are unnecessary (click to navigate to relevant line of code):\r\n  1. -&gt; at pp.spring_bootstrap.service.RoleServiceImplTest.setUp(RoleServiceImplTest.java:29)\r\nPlease remove unnecessary stubbings or use &#39;lenient&#39; strictness. More info: javadoc for UnnecessaryStubbingException class.\r\n```\r\nLine 29 is the first `when()` invocation:\r\n```java\r\n    @BeforeEach\r\n    void setUp() {\r\n        when(roleDao.findByAuthority(USER)).thenReturn(new Role(USER)); // this is line 29\r\n        when(roleDao.findByAuthorityOrAuthority(USER, ADMIN))\r\n                .thenReturn(List.of(new Role(USER), new Role(ADMIN)));\r\n    }\r\n```\r\nI don&#39;t see anything unnecessary about it since it&#39;s required for the `getRoleByName()` test. As you may see in the code snippet, the class method indeed invokes it\r\n\r\nWhat is the reason for this unusual behavior and what should I do to fix it?","title":"UnnecessaryStubbingException: Unnecessary stubbings detected","body":"<p>I tried to test this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package pp.spring_bootstrap.service;\n\nimport org.springframework.stereotype.Service;\nimport org.springframework.transaction.annotation.Transactional;\nimport pp.spring_bootstrap.dao.RoleDao;\nimport pp.spring_bootstrap.models.Role;\n\nimport java.util.HashSet;\nimport java.util.Set;\n\n@Service\n@Transactional(readOnly = true)\npublic class RoleServiceImpl implements RoleService {\n    private final RoleDao roleDao;\n\n    public RoleServiceImpl(RoleDao roleDao) {\n        this.roleDao = roleDao;\n    }\n\n    @Override\n    public Role getRoleByName(String name) {\n        return roleDao.findByAuthority(name);\n    }\n\n    @Override\n    public Set&lt;Role&gt; getAdminRoleSet() {\n        return new HashSet&lt;&gt;(roleDao.findByAuthorityOrAuthority(&quot;USER&quot;, &quot;ADMIN&quot;));\n    }\n}\n</code></pre>\n<p>Here's my test:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ExtendWith(MockitoExtension.class)\nclass RoleServiceImplTest {\n    @InjectMocks\n    RoleServiceImpl roleService;\n    @Mock\n    RoleDao roleDao;\n    static final String USER = &quot;USER&quot;;\n    static final String ADMIN = &quot;ADMIN&quot;;\n\n    @BeforeEach\n    void setUp() {\n        when(roleDao.findByAuthority(USER)).thenReturn(new Role(USER));\n        when(roleDao.findByAuthorityOrAuthority(USER, ADMIN))\n                .thenReturn(List.of(new Role(USER), new Role(ADMIN)));\n    }\n\n    @Test\n    void getRoleByName() {\n        assertThat(roleService.getRoleByName(USER)).extracting(Role::getAuthority).isEqualTo(USER);\n        verify(roleDao, times(1)).findByAuthority(USER);\n    }\n\n    @Test\n    void getAdminRoleSet() {\n        var adminRoles = roleService.getAdminRoleSet().stream()\n                .map(Role::getAuthority)\n                .toList();\n        assertThat(adminRoles.size()).isEqualTo(2);\n        assertThat(adminRoles).asList().contains(ADMIN, USER);\n        verify(roleDao, times(1)).findByAuthorityOrAuthority(USER, ADMIN);\n    }\n}\n</code></pre>\n<p>The tests don't pass due to this exception:</p>\n<pre><code>org.mockito.exceptions.misusing.UnnecessaryStubbingException: \nUnnecessary stubbings detected.\nClean &amp; maintainable test code requires zero unnecessary code.\nFollowing stubbings are unnecessary (click to navigate to relevant line of code):\n  1. -&gt; at pp.spring_bootstrap.service.RoleServiceImplTest.setUp(RoleServiceImplTest.java:29)\nPlease remove unnecessary stubbings or use 'lenient' strictness. More info: javadoc for UnnecessaryStubbingException class.\n</code></pre>\n<p>Line 29 is the first <code>when()</code> invocation:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @BeforeEach\n    void setUp() {\n        when(roleDao.findByAuthority(USER)).thenReturn(new Role(USER)); // this is line 29\n        when(roleDao.findByAuthorityOrAuthority(USER, ADMIN))\n                .thenReturn(List.of(new Role(USER), new Role(ADMIN)));\n    }\n</code></pre>\n<p>I don't see anything unnecessary about it since it's required for the <code>getRoleByName()</code> test. As you may see in the code snippet, the class method indeed invokes it</p>\n<p>What is the reason for this unusual behavior and what should I do to fix it?</p>\n"},{"tags":["java","android","gradle"],"answers":[{"tags":[],"owner":{"account_id":12678426,"reputation":1029,"user_id":9213148,"display_name":"Pexers"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1666489374,"creation_date":1666488964,"answer_id":74168173,"question_id":74168118,"body_markdown":"Just add this code to your `build.gradle` file:\r\n\r\n```\r\nplugins {\r\n    id &#39;com.android.application&#39; \r\n}\r\n```\r\nThe `com.android.application` plugin already includes the task `run`, so your error should be fixed.\r\n\r\nFor more information regarding this plugin, read the official documentation [here][1] (Android), and [here][2].\r\n\r\n\r\n  [1]: https://developer.android.com/studio/build#module-level\r\n  [2]: https://docs.gradle.org/current/userguide/application_plugin.html","title":"gradlew run in terminal gives Run Task not Found","body":"<p>Just add this code to your <code>build.gradle</code> file:</p>\n<pre><code>plugins {\n    id 'com.android.application' \n}\n</code></pre>\n<p>The <code>com.android.application</code> plugin already includes the task <code>run</code>, so your error should be fixed.</p>\n<p>For more information regarding this plugin, read the official documentation <a href=\"https://developer.android.com/studio/build#module-level\" rel=\"nofollow noreferrer\">here</a> (Android), and <a href=\"https://docs.gradle.org/current/userguide/application_plugin.html\" rel=\"nofollow noreferrer\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":16280277,"reputation":91,"user_id":11756439,"display_name":"Archiee"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1695203258,"creation_date":1667296094,"answer_id":74274056,"question_id":74168118,"body_markdown":"This is the plugin needed to have `run ` task available ! \r\n\r\n```\r\n// root build.gradle\r\nplugins {\r\n    id(&#39;application&#39;)\r\n}\r\n```\r\n\r\n- Now re-running `./gradlew build` does add the **run** task, provided by the plugin above . \r\n\r\n","title":"gradlew run in terminal gives Run Task not Found","body":"<p>This is the plugin needed to have <code>run </code> task available !</p>\n<pre><code>// root build.gradle\nplugins {\n    id('application')\n}\n</code></pre>\n<ul>\n<li>Now re-running <code>./gradlew build</code> does add the <strong>run</strong> task, provided by the plugin above .</li>\n</ul>\n"}],"owner":{"account_id":16280277,"reputation":91,"user_id":11756439,"display_name":"Archiee"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":521,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":74274056,"answer_count":2,"score":0,"last_activity_date":1695203258,"creation_date":1666488045,"question_id":74168118,"body_markdown":"I am currently experimenting with a mobile java Project, it&#39;s a google ar core , you can check it&#39;s Git Repository here   :\r\n [GoogleArcore][1]\r\n\r\n\r\n  [1]: https://github.com/google-ar/arcore-android-sdk/tree/master/samples/augmented_faces_java\r\n\r\n\r\nI managed to run the app successfully while using android studio. \r\n\r\n\r\nI cloned this project and opened it with ***vscode***, \r\nand run \r\n\r\n`./gradlew clean build` \r\n\r\nthis goes as expected!! \r\n\r\n***Problem:***  : running `./gradelw run`  gives bellow error :    \r\n\r\n\r\n ***run task is not found in the root project*** \r\n\r\n\r\nany approach to solving this !!?\r\n","title":"gradlew run in terminal gives Run Task not Found","body":"<p>I am currently experimenting with a mobile java Project, it's a google ar core , you can check it's Git Repository here   :\n<a href=\"https://github.com/google-ar/arcore-android-sdk/tree/master/samples/augmented_faces_java\" rel=\"nofollow noreferrer\">GoogleArcore</a></p>\n<p>I managed to run the app successfully while using android studio.</p>\n<p>I cloned this project and opened it with <em><strong>vscode</strong></em>,\nand run</p>\n<p><code>./gradlew clean build</code></p>\n<p>this goes as expected!!</p>\n<p><em><strong>Problem:</strong></em>  : running <code>./gradelw run</code>  gives bellow error :</p>\n<p><em><strong>run task is not found in the root project</strong></em></p>\n<p>any approach to solving this !!?</p>\n"},{"tags":["java","ffmpeg","javacv","bytedeco-javacv"],"comments":[{"owner":{"account_id":1117539,"reputation":2100,"user_id":1106547,"accept_rate":63,"display_name":"mortalis"},"score":0,"creation_date":1695316538,"post_id":77141166,"comment_id":136011549,"body_markdown":"What is line 31 in imageToVideo.java?","body":"What is line 31 in imageToVideo.java?"},{"owner":{"account_id":1117539,"reputation":2100,"user_id":1106547,"accept_rate":63,"display_name":"mortalis"},"score":0,"creation_date":1695316897,"post_id":77141166,"comment_id":136011623,"body_markdown":"There&#39;s `PacketRecorderTest.java` in the samples of the bytedeco-javacv library. Try to start from there, first with a video to video conversion (with `frameRecord()`). Then change input to a wav audio. Does it give the same error?","body":"There&#39;s <code>PacketRecorderTest.java</code> in the samples of the bytedeco-javacv library. Try to start from there, first with a video to video conversion (with <code>frameRecord()</code>). Then change input to a wav audio. Does it give the same error?"},{"owner":{"account_id":248409,"reputation":4974,"user_id":523744,"display_name":"Samuel Audet"},"score":0,"creation_date":1695466235,"post_id":77141166,"comment_id":136030215,"body_markdown":"Try to call `recorder.setAudioChannels(grabber.getAudioChannels())` after `grabber.start()` but before `recorder.start()`.","body":"Try to call <code>recorder.setAudioChannels(grabber.getAudioChannels())</code> after <code>grabber.start()</code> but before <code>recorder.start()</code>."}],"owner":{"account_id":25047248,"reputation":21,"user_id":18903536,"display_name":"Lazzza"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695202740,"creation_date":1695202740,"question_id":77141166,"body_markdown":"I am attempting to combine an Audio source with Buffered images to create a video like so:\r\n```java\r\npublic static void compileVideo(BufferedImage[] bufferedImages, String audioPath , String savePath) throws FFmpegFrameRecorder.Exception, FrameGrabber.Exception {\r\n        FrameGrabber grabber = new FFmpegFrameGrabber(audioPath); // need this for audio\r\n        FFmpegFrameRecorder recorder = new FFmpegFrameRecorder(savePath, 316, 100, grabber.getAudioChannels());\r\n        FFmpegLogCallback.set();\r\n\r\n        \r\n        //grabber.setAudioChannels(grabber.getAudioChannels());\r\n        System.out.println(grabber.getAudioChannels());\r\n        // set up the recorder video info\r\n        recorder.setFrameRate(60);\r\n        recorder.setFormat(&quot;mp4&quot;);\r\n        recorder.setVideoQuality(0); // highest quality\r\n\r\n        // set recorder audio info\r\n        recorder.setSampleFormat(grabber.getSampleFormat());\r\n        recorder.setSampleRate(grabber.getSampleRate());\r\n        recorder.setAudioQuality(0); // highest quality\r\n        \r\n        grabber.start();\r\n        recorder.start();\r\n\r\n        for (BufferedImage image: bufferedImages) {\r\n            recorder.record(Java2DFrameUtils.toFrame(image)); // convert buffered image to frame and record it\r\n            recorder.record(grabber.grabFrame()); //TODO: Grab multiple audio frames because there are more audio frames than video frames (BufferedImages)\r\n        }\r\n        recorder.stop();\r\n        grabber.stop();\r\n    }\r\n```\r\n\r\nHowever, it throws the following error:\r\n```\r\nException in thread &quot;main&quot; org.bytedeco.javacv.FFmpegFrameRecorder$Exception: No audio output stream (Is audioChannels &gt; 0 and has start() been called?) (For more details, make sure FFmpegLogCallback.set() has been called.)\r\n\tat org.bytedeco.javacv.FFmpegFrameRecorder.recordSamples(FFmpegFrameRecorder.java:1154)\r\n\tat org.bytedeco.javacv.FFmpegFrameRecorder.record(FFmpegFrameRecorder.java:1021)\r\n\tat org.bytedeco.javacv.FFmpegFrameRecorder.record(FFmpegFrameRecorder.java:1010)\r\n\tat com.Lazzza.imageToVideo.compileVideo(imageToVideo.java:31)\r\n\tat com.Lazzza.Main.main(Main.java:22)\r\n```\r\n```grabber.getAudioChannels``` returns 2.\r\nWill also note that the file format I am using is .wav\r\n\r\nAny help would be appreciated thanks\r\n\t","title":"Error recording audio with FFmpegFrameGrabber","body":"<p>I am attempting to combine an Audio source with Buffered images to create a video like so:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void compileVideo(BufferedImage[] bufferedImages, String audioPath , String savePath) throws FFmpegFrameRecorder.Exception, FrameGrabber.Exception {\n        FrameGrabber grabber = new FFmpegFrameGrabber(audioPath); // need this for audio\n        FFmpegFrameRecorder recorder = new FFmpegFrameRecorder(savePath, 316, 100, grabber.getAudioChannels());\n        FFmpegLogCallback.set();\n\n        \n        //grabber.setAudioChannels(grabber.getAudioChannels());\n        System.out.println(grabber.getAudioChannels());\n        // set up the recorder video info\n        recorder.setFrameRate(60);\n        recorder.setFormat(&quot;mp4&quot;);\n        recorder.setVideoQuality(0); // highest quality\n\n        // set recorder audio info\n        recorder.setSampleFormat(grabber.getSampleFormat());\n        recorder.setSampleRate(grabber.getSampleRate());\n        recorder.setAudioQuality(0); // highest quality\n        \n        grabber.start();\n        recorder.start();\n\n        for (BufferedImage image: bufferedImages) {\n            recorder.record(Java2DFrameUtils.toFrame(image)); // convert buffered image to frame and record it\n            recorder.record(grabber.grabFrame()); //TODO: Grab multiple audio frames because there are more audio frames than video frames (BufferedImages)\n        }\n        recorder.stop();\n        grabber.stop();\n    }\n</code></pre>\n<p>However, it throws the following error:</p>\n<pre><code>Exception in thread &quot;main&quot; org.bytedeco.javacv.FFmpegFrameRecorder$Exception: No audio output stream (Is audioChannels &gt; 0 and has start() been called?) (For more details, make sure FFmpegLogCallback.set() has been called.)\n    at org.bytedeco.javacv.FFmpegFrameRecorder.recordSamples(FFmpegFrameRecorder.java:1154)\n    at org.bytedeco.javacv.FFmpegFrameRecorder.record(FFmpegFrameRecorder.java:1021)\n    at org.bytedeco.javacv.FFmpegFrameRecorder.record(FFmpegFrameRecorder.java:1010)\n    at com.Lazzza.imageToVideo.compileVideo(imageToVideo.java:31)\n    at com.Lazzza.Main.main(Main.java:22)\n</code></pre>\n<p><code>grabber.getAudioChannels</code> returns 2.\nWill also note that the file format I am using is .wav</p>\n<p>Any help would be appreciated thanks</p>\n"},{"tags":["java","spring-boot","graalvm-native-image"],"comments":[{"owner":{"account_id":23020603,"reputation":341,"user_id":17141716,"display_name":"peterz"},"score":1,"creation_date":1678085436,"post_id":75634047,"comment_id":133457974,"body_markdown":"Try setting `GRAALVM_HOME` and/or setting `JAVA_HOME` to point to GraalVM rather than plain JDK","body":"Try setting <code>GRAALVM_HOME</code> and/or setting <code>JAVA_HOME</code> to point to GraalVM rather than plain JDK"},{"owner":{"account_id":27200213,"reputation":41,"user_id":20732552,"display_name":"ImaginativeGoldfish"},"score":0,"creation_date":1678167477,"post_id":75634047,"comment_id":133476327,"body_markdown":"@peterz I just tried setting my GRAALVM_HOME and my JAVA_HOME (which is already set for local and global), but still the same issue. For the record, I also tried this on linux with a different graalvm setup and had the same issue.","body":"@peterz I just tried setting my GRAALVM_HOME and my JAVA_HOME (which is already set for local and global), but still the same issue. For the record, I also tried this on linux with a different graalvm setup and had the same issue."}],"answers":[{"tags":[],"owner":{"account_id":1295413,"reputation":617,"user_id":1246600,"display_name":"Michael"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682325449,"creation_date":1682325449,"answer_id":76090066,"question_id":75634047,"body_markdown":"The `gu.cmd` must be in your `PATH` environment variable.\r\n\r\nTo do so, you need to add the `GRAALVM_HOME/bin` folder to your `PATH` variable.","title":"Issue Compiling Spring Boot to Native Image","body":"<p>The <code>gu.cmd</code> must be in your <code>PATH</code> environment variable.</p>\n<p>To do so, you need to add the <code>GRAALVM_HOME/bin</code> folder to your <code>PATH</code> variable.</p>\n"}],"owner":{"account_id":27200213,"reputation":41,"user_id":20732552,"display_name":"ImaginativeGoldfish"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3597,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":1,"score":4,"last_activity_date":1695202612,"creation_date":1677911178,"question_id":75634047,"body_markdown":"I would like to preface this with how I&#39;m relatively new to Spring Boot and GraalVM, and have been having issues with it. (I set it up using spring intializer). Whenever I try to use the Spring Boot native image to make my program into a native image, it gives me the following error (when running `mvn clean package -Pnative`):\r\n\r\n\r\n```\r\n&#39;gu.cmd&#39; tool wasn&#39;t found. This probably means that JDK at isn&#39;t a GraalVM distribution.\r\n```\r\n\r\n\r\nAdditionally, if this helps at all I would like to generate a native image to be able to run locally or on a deployment server since I&#39;m building an API.\r\n\r\nSo far, I&#39;ve tried reinstalling GraalVM and the required plugins (I&#39;m on Windows). I have installed the native-image in GraalVM using gu, and used the Spring Initializer to set up my project. Below are some outputs you may find useful:\r\n\r\nHere&#39;s java version:\r\n\r\n```\r\nopenjdk 19.0.2 2023-01-17\r\nOpenJDK Runtime Environment GraalVM CE 22.3.1 (build 19.0.2+7-jvmci-22.3-b12)\r\nOpenJDK 64-Bit Server VM GraalVM CE 22.3.1 (build 19.0.2+7-jvmci-22.3-b12, mixed mode, sharing)\r\n```\r\n\r\nHere&#39;s my output when running `native-image --version`\r\n\r\n```\r\nGraalVM 22.3.1 Java 19 CE (Java Version 19.0.2+7-jvmci-22.3-b12)\r\n```\r\n\r\n\r\nHere&#39;s my pom.xml:\r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.0.4&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;org.example&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;peoplegeneratorapi&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;peoplegeneratorapi&lt;/name&gt;\r\n\t&lt;description&gt;People generator API with Spring Boot&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;19&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.restdocs&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-restdocs-mockmvc&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.github.javafaker&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;javafaker&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.0.2&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.vaadin.external.google&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;android-json&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;0.0.20131108.vaadin1&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;compile&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.opencsv&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;opencsv&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;5.7.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.graalvm.buildtools&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;native-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.asciidoctor&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;asciidoctor-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;2.2.1&lt;/version&gt;\r\n\t\t\t\t&lt;executions&gt;\r\n\t\t\t\t\t&lt;execution&gt;\r\n\t\t\t\t\t\t&lt;id&gt;generate-docs&lt;/id&gt;\r\n\t\t\t\t\t\t&lt;phase&gt;prepare-package&lt;/phase&gt;\r\n\t\t\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t\t\t&lt;goal&gt;process-asciidoc&lt;/goal&gt;\r\n\t\t\t\t\t\t&lt;/goals&gt;\r\n\t\t\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t\t\t&lt;backend&gt;html&lt;/backend&gt;\r\n\t\t\t\t\t\t\t&lt;doctype&gt;book&lt;/doctype&gt;\r\n\t\t\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t\t\t&lt;/execution&gt;\r\n\t\t\t\t&lt;/executions&gt;\r\n\t\t\t\t&lt;dependencies&gt;\r\n\t\t\t\t\t&lt;dependency&gt;\r\n\t\t\t\t\t\t&lt;groupId&gt;org.springframework.restdocs&lt;/groupId&gt;\r\n\t\t\t\t\t\t&lt;artifactId&gt;spring-restdocs-asciidoctor&lt;/artifactId&gt;\r\n\t\t\t\t\t\t&lt;version&gt;${spring-restdocs.version}&lt;/version&gt;\r\n\t\t\t\t\t&lt;/dependency&gt;\r\n\t\t\t\t&lt;/dependencies&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;excludes&gt;\r\n\t\t\t\t\t\t&lt;exclude&gt;\r\n\t\t\t\t\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t\t\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t\t\t\t&lt;/exclude&gt;\r\n\t\t\t\t\t&lt;/excludes&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n\t&lt;profiles&gt;\r\n\t\t&lt;profile&gt;\r\n\t\t\t&lt;id&gt;native&lt;/id&gt;\r\n\t\t\t&lt;build&gt;\r\n\t\t\t\t&lt;plugins&gt;\r\n\t\t\t\t\t&lt;plugin&gt;\r\n\t\t\t\t\t\t&lt;groupId&gt;org.graalvm.buildtools&lt;/groupId&gt;\r\n\t\t\t\t\t\t&lt;artifactId&gt;native-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t\t\t&lt;executions&gt;\r\n\t\t\t\t\t\t\t&lt;execution&gt;\r\n\t\t\t\t\t\t\t\t&lt;id&gt;build-native&lt;/id&gt;\r\n\t\t\t\t\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;goal&gt;compile-no-fork&lt;/goal&gt;\r\n\t\t\t\t\t\t\t\t&lt;/goals&gt;\r\n\t\t\t\t\t\t\t\t&lt;phase&gt;package&lt;/phase&gt;\r\n\t\t\t\t\t\t\t&lt;/execution&gt;\r\n\t\t\t\t\t\t&lt;/executions&gt;\r\n\t\t\t\t\t&lt;/plugin&gt;\r\n\t\t\t\t&lt;/plugins&gt;\r\n\t\t\t&lt;/build&gt;\r\n\t\t&lt;/profile&gt;\r\n\t&lt;/profiles&gt;\r\n&lt;/project&gt;\r\n\r\n```\r\n\r\nAnd here&#39;s a working `mvn spring-boot:start` if this helps any:\r\n\r\n```\r\nC:\\Users\\XX\\.jdks\\graalvm-ce-19\\bin\\java.exe -Dmaven.multiModuleProjectDirectory=C:\\Users\\XX\\Documents\\Code\\peoplegeneratorapi -Djansi.passthrough=true -Dmaven.home=C:\\Users\\XX\\.m2\\wrapper\\dists\\apache-maven-3.8.7-bin\\1ktonn2lleg549uah6ngl1r74r\\apache-maven-3.8.7 -Dclassworlds.conf=C:\\Users\\XX\\.m2\\wrapper\\dists\\apache-maven-3.8.7-bin\\1ktonn2lleg549uah6ngl1r74r\\apache-maven-3.8.7\\bin\\m2.conf &quot;-Dmaven.ext.class.path=C:\\Program Files\\JetBrains\\IntelliJ IDEA 2022.3.2\\plugins\\maven\\lib\\maven-event-listener.jar&quot; &quot;-javaagent:C:\\Program Files\\JetBrains\\IntelliJ IDEA 2022.3.2\\lib\\idea_rt.jar=65445:C:\\Program Files\\JetBrains\\IntelliJ IDEA 2022.3.2\\bin&quot; -Dfile.encoding=UTF-8 -Dsun.stdout.encoding=UTF-8 -Dsun.stderr.encoding=UTF-8 -classpath C:\\Users\\XX\\.m2\\wrapper\\dists\\apache-maven-3.8.7-bin\\1ktonn2lleg549uah6ngl1r74r\\apache-maven-3.8.7\\boot\\plexus-classworlds-2.6.0.jar;C:\\Users\\XX\\.m2\\wrapper\\dists\\apache-maven-3.8.7-bin\\1ktonn2lleg549uah6ngl1r74r\\apache-maven-3.8.7\\boot\\plexus-classworlds.license org.codehaus.classworlds.Launcher -Didea.version=2022.3.2 spring-boot:start\r\n[INFO] Scanning for projects...\r\n[INFO] \r\n[INFO] ---------------&lt; org.example:peoplegeneratorapi &gt;---------------\r\n[INFO] Building peoplegeneratorapi 0.0.1-SNAPSHOT\r\n[INFO] --------------------------------[ jar ]---------------------------------\r\n[INFO] \r\n[INFO] --- spring-boot-maven-plugin:3.0.4:start (default-cli) @ peoplegeneratorapi ---\r\n[INFO] Attaching agents: []\r\n  .   ____          _            __ _ _\r\n /\\\\ / ___&#39;_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\r\n( ( )\\___ | &#39;_ | &#39;_| | &#39;_ \\/ _` | \\ \\ \\ \\\r\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\r\n  &#39;  |____| .__|_| |_|_| |_\\__, | / / / /\r\n =========|_|==============|___/=/_/_/_/\r\n :: Spring Boot ::                (v3.0.4)\r\n\r\n2023-03-04T12:15:52.890+05:30  INFO 12652 --- [  restartedMain] o.example.peoplegenerator.Main   : Starting Main using Java 19.0.2 with PID 12652 (C:\\Users\\XX\\Documents\\Code\\peoplegeneratorapi\\target\\classes started by XX in C:\\Users\\XX\\Documents\\Code\\peoplegeneratorapi)\r\n2023-03-04T12:15:52.893+05:30  INFO 12652 --- [  restartedMain] o.example.peoplegenerator.Main   : No active profile set, falling back to 1 default profile: &quot;default&quot;\r\n2023-03-04T12:15:52.959+05:30  INFO 12652 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set &#39;spring.devtools.add-properties&#39; to &#39;false&#39; to disable\r\n2023-03-04T12:15:52.959+05:30  INFO 12652 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the &#39;logging.level.web&#39; property to &#39;DEBUG&#39;\r\n2023-03-04T12:15:53.826+05:30  INFO 12652 --- [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)\r\n2023-03-04T12:15:53.835+05:30  INFO 12652 --- [  restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\r\n2023-03-04T12:15:53.835+05:30  INFO 12652 --- [  restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.5]\r\n2023-03-04T12:15:53.889+05:30  INFO 12652 --- [  restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\r\n2023-03-04T12:15:53.889+05:30  INFO 12652 --- [  restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 929 ms\r\n2023-03-04T12:15:54.229+05:30  INFO 12652 --- [  restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729\r\n2023-03-04T12:15:54.254+05:30  INFO 12652 --- [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path &#39;&#39;\r\n2023-03-04T12:15:54.263+05:30  INFO 12652 --- [  restartedMain] o.example.peoplegenerator.Main   : Started Main in 1.741 seconds (process running for 21.409)\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD SUCCESS\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Total time:  23.047 s\r\n[INFO] Finished at: 2023-03-04T12:15:54+05:30\r\n[INFO] ------------------------------------------------------------------------\r\n\r\n```\r\n\r\nAnd the output when running `mvn clean package -Pnative`:\r\n```\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD FAILURE\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Total time:  22.665 s\r\n[INFO] Finished at: 2023-03-04T12:40:38+05:30\r\n[INFO] ------------------------------------------------------------------------\r\n[ERROR] Failed to execute goal org.graalvm.buildtools:native-maven-plugin:0.9.20:compile-no-fork (build-native) on project peoplegeneratorapi: &#39;gu.cmd&#39; tool wasn&#39;t found. This probably means that JDK at isn&#39;t a GraalVM distribution. -&gt; [Help 1]\r\n[ERROR]\r\n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\r\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\r\n[ERROR]\r\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\r\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException\r\n```\r\n\r\nEdit: I&#39;m not too sure how I might give a minimal reproducible example for this, so I tried my best to describe the issue as descriptively as possible.","title":"Issue Compiling Spring Boot to Native Image","body":"<p>I would like to preface this with how I'm relatively new to Spring Boot and GraalVM, and have been having issues with it. (I set it up using spring intializer). Whenever I try to use the Spring Boot native image to make my program into a native image, it gives me the following error (when running <code>mvn clean package -Pnative</code>):</p>\n<pre><code>'gu.cmd' tool wasn't found. This probably means that JDK at isn't a GraalVM distribution.\n</code></pre>\n<p>Additionally, if this helps at all I would like to generate a native image to be able to run locally or on a deployment server since I'm building an API.</p>\n<p>So far, I've tried reinstalling GraalVM and the required plugins (I'm on Windows). I have installed the native-image in GraalVM using gu, and used the Spring Initializer to set up my project. Below are some outputs you may find useful:</p>\n<p>Here's java version:</p>\n<pre><code>openjdk 19.0.2 2023-01-17\nOpenJDK Runtime Environment GraalVM CE 22.3.1 (build 19.0.2+7-jvmci-22.3-b12)\nOpenJDK 64-Bit Server VM GraalVM CE 22.3.1 (build 19.0.2+7-jvmci-22.3-b12, mixed mode, sharing)\n</code></pre>\n<p>Here's my output when running <code>native-image --version</code></p>\n<pre><code>GraalVM 22.3.1 Java 19 CE (Java Version 19.0.2+7-jvmci-22.3-b12)\n</code></pre>\n<p>Here's my pom.xml:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.0.4&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;org.example&lt;/groupId&gt;\n    &lt;artifactId&gt;peoplegeneratorapi&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;peoplegeneratorapi&lt;/name&gt;\n    &lt;description&gt;People generator API with Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;19&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.restdocs&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-restdocs-mockmvc&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.github.javafaker&lt;/groupId&gt;\n            &lt;artifactId&gt;javafaker&lt;/artifactId&gt;\n            &lt;version&gt;1.0.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.vaadin.external.google&lt;/groupId&gt;\n            &lt;artifactId&gt;android-json&lt;/artifactId&gt;\n            &lt;version&gt;0.0.20131108.vaadin1&lt;/version&gt;\n            &lt;scope&gt;compile&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.opencsv&lt;/groupId&gt;\n            &lt;artifactId&gt;opencsv&lt;/artifactId&gt;\n            &lt;version&gt;5.7.1&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.graalvm.buildtools&lt;/groupId&gt;\n                &lt;artifactId&gt;native-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.asciidoctor&lt;/groupId&gt;\n                &lt;artifactId&gt;asciidoctor-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.2.1&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;generate-docs&lt;/id&gt;\n                        &lt;phase&gt;prepare-package&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;process-asciidoc&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;backend&gt;html&lt;/backend&gt;\n                            &lt;doctype&gt;book&lt;/doctype&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n                &lt;dependencies&gt;\n                    &lt;dependency&gt;\n                        &lt;groupId&gt;org.springframework.restdocs&lt;/groupId&gt;\n                        &lt;artifactId&gt;spring-restdocs-asciidoctor&lt;/artifactId&gt;\n                        &lt;version&gt;${spring-restdocs.version}&lt;/version&gt;\n                    &lt;/dependency&gt;\n                &lt;/dependencies&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n    &lt;profiles&gt;\n        &lt;profile&gt;\n            &lt;id&gt;native&lt;/id&gt;\n            &lt;build&gt;\n                &lt;plugins&gt;\n                    &lt;plugin&gt;\n                        &lt;groupId&gt;org.graalvm.buildtools&lt;/groupId&gt;\n                        &lt;artifactId&gt;native-maven-plugin&lt;/artifactId&gt;\n                        &lt;executions&gt;\n                            &lt;execution&gt;\n                                &lt;id&gt;build-native&lt;/id&gt;\n                                &lt;goals&gt;\n                                    &lt;goal&gt;compile-no-fork&lt;/goal&gt;\n                                &lt;/goals&gt;\n                                &lt;phase&gt;package&lt;/phase&gt;\n                            &lt;/execution&gt;\n                        &lt;/executions&gt;\n                    &lt;/plugin&gt;\n                &lt;/plugins&gt;\n            &lt;/build&gt;\n        &lt;/profile&gt;\n    &lt;/profiles&gt;\n&lt;/project&gt;\n\n</code></pre>\n<p>And here's a working <code>mvn spring-boot:start</code> if this helps any:</p>\n<pre><code>C:\\Users\\XX\\.jdks\\graalvm-ce-19\\bin\\java.exe -Dmaven.multiModuleProjectDirectory=C:\\Users\\XX\\Documents\\Code\\peoplegeneratorapi -Djansi.passthrough=true -Dmaven.home=C:\\Users\\XX\\.m2\\wrapper\\dists\\apache-maven-3.8.7-bin\\1ktonn2lleg549uah6ngl1r74r\\apache-maven-3.8.7 -Dclassworlds.conf=C:\\Users\\XX\\.m2\\wrapper\\dists\\apache-maven-3.8.7-bin\\1ktonn2lleg549uah6ngl1r74r\\apache-maven-3.8.7\\bin\\m2.conf &quot;-Dmaven.ext.class.path=C:\\Program Files\\JetBrains\\IntelliJ IDEA 2022.3.2\\plugins\\maven\\lib\\maven-event-listener.jar&quot; &quot;-javaagent:C:\\Program Files\\JetBrains\\IntelliJ IDEA 2022.3.2\\lib\\idea_rt.jar=65445:C:\\Program Files\\JetBrains\\IntelliJ IDEA 2022.3.2\\bin&quot; -Dfile.encoding=UTF-8 -Dsun.stdout.encoding=UTF-8 -Dsun.stderr.encoding=UTF-8 -classpath C:\\Users\\XX\\.m2\\wrapper\\dists\\apache-maven-3.8.7-bin\\1ktonn2lleg549uah6ngl1r74r\\apache-maven-3.8.7\\boot\\plexus-classworlds-2.6.0.jar;C:\\Users\\XX\\.m2\\wrapper\\dists\\apache-maven-3.8.7-bin\\1ktonn2lleg549uah6ngl1r74r\\apache-maven-3.8.7\\boot\\plexus-classworlds.license org.codehaus.classworlds.Launcher -Didea.version=2022.3.2 spring-boot:start\n[INFO] Scanning for projects...\n[INFO] \n[INFO] ---------------&lt; org.example:peoplegeneratorapi &gt;---------------\n[INFO] Building peoplegeneratorapi 0.0.1-SNAPSHOT\n[INFO] --------------------------------[ jar ]---------------------------------\n[INFO] \n[INFO] --- spring-boot-maven-plugin:3.0.4:start (default-cli) @ peoplegeneratorapi ---\n[INFO] Attaching agents: []\n  .   ____          _            __ _ _\n /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n  '  |____| .__|_| |_|_| |_\\__, | / / / /\n =========|_|==============|___/=/_/_/_/\n :: Spring Boot ::                (v3.0.4)\n\n2023-03-04T12:15:52.890+05:30  INFO 12652 --- [  restartedMain] o.example.peoplegenerator.Main   : Starting Main using Java 19.0.2 with PID 12652 (C:\\Users\\XX\\Documents\\Code\\peoplegeneratorapi\\target\\classes started by XX in C:\\Users\\XX\\Documents\\Code\\peoplegeneratorapi)\n2023-03-04T12:15:52.893+05:30  INFO 12652 --- [  restartedMain] o.example.peoplegenerator.Main   : No active profile set, falling back to 1 default profile: &quot;default&quot;\n2023-03-04T12:15:52.959+05:30  INFO 12652 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable\n2023-03-04T12:15:52.959+05:30  INFO 12652 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'\n2023-03-04T12:15:53.826+05:30  INFO 12652 --- [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)\n2023-03-04T12:15:53.835+05:30  INFO 12652 --- [  restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\n2023-03-04T12:15:53.835+05:30  INFO 12652 --- [  restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.5]\n2023-03-04T12:15:53.889+05:30  INFO 12652 --- [  restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\n2023-03-04T12:15:53.889+05:30  INFO 12652 --- [  restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 929 ms\n2023-03-04T12:15:54.229+05:30  INFO 12652 --- [  restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729\n2023-03-04T12:15:54.254+05:30  INFO 12652 --- [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path ''\n2023-03-04T12:15:54.263+05:30  INFO 12652 --- [  restartedMain] o.example.peoplegenerator.Main   : Started Main in 1.741 seconds (process running for 21.409)\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD SUCCESS\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  23.047 s\n[INFO] Finished at: 2023-03-04T12:15:54+05:30\n[INFO] ------------------------------------------------------------------------\n\n</code></pre>\n<p>And the output when running <code>mvn clean package -Pnative</code>:</p>\n<pre><code>[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  22.665 s\n[INFO] Finished at: 2023-03-04T12:40:38+05:30\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.graalvm.buildtools:native-maven-plugin:0.9.20:compile-no-fork (build-native) on project peoplegeneratorapi: 'gu.cmd' tool wasn't found. This probably means that JDK at isn't a GraalVM distribution. -&gt; [Help 1]\n[ERROR]\n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR]\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException\n</code></pre>\n<p>Edit: I'm not too sure how I might give a minimal reproducible example for this, so I tried my best to describe the issue as descriptively as possible.</p>\n"},{"tags":["java","activemq","failover"],"comments":[{"owner":{"account_id":11434008,"reputation":30690,"user_id":8381946,"display_name":"Justin Bertram"},"score":0,"creation_date":1695129519,"post_id":77133599,"comment_id":135980490,"body_markdown":"What version of ActiveMQ are you using?","body":"What version of ActiveMQ are you using?"}],"answers":[{"tags":[],"owner":{"account_id":11434008,"reputation":30690,"user_id":8381946,"display_name":"Justin Bertram"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695129480,"creation_date":1695129480,"answer_id":77134909,"question_id":77133599,"body_markdown":"It appears you have an extra `//` in the failover URL. Try using this instead:\r\n```java\r\nprivate static String url = &quot;failover:(tcp://1.2.2.4:61616,tcp://17.3.2.50:61616,tcp://14.3.8.6:61616,tcp://2.3.0.4:61616,tcp://7.2.2.5:61616,tcp://32.33.1.6:61616)?randomize=false&quot;;\r\n```","title":"ActiveMQ failover connection not working but works with single IP","body":"<p>It appears you have an extra <code>//</code> in the failover URL. Try using this instead:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private static String url = &quot;failover:(tcp://1.2.2.4:61616,tcp://17.3.2.50:61616,tcp://14.3.8.6:61616,tcp://2.3.0.4:61616,tcp://7.2.2.5:61616,tcp://32.33.1.6:61616)?randomize=false&quot;;\n</code></pre>\n"}],"owner":{"account_id":4112149,"reputation":1,"user_id":21115947,"display_name":"user61815"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695202409,"creation_date":1695117886,"question_id":77133599,"body_markdown":"I&#39;m new to Java and writing a microservice that connects to an ActiveMQ cluster. I can connect to the cluster and read messages successfully when I use one single broker IP address. However, the connection doesn&#39;t work when I pass all IP&#39;s as a failover config.\r\n\r\nWorking config:\r\n```java\r\n    private static String url = &quot;tcp://1.2.3.4:61616&quot;;\r\n    ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory(url);\r\n    connectionFactory.setUserName(&quot;abc@abc&quot;);\r\n    connectionFactory.setPassword(&quot;abc&quot;);\r\n    connectionFactory.setClientID(&quot;testingClient&quot;);\r\n```\r\nFailed config:\r\n```java\r\n    private static String url = &quot;failover://(tcp://1.2.2.4:61616,tcp://17.3.2.50:61616,tcp://14.3.8.6:61616,tcp://2.3.0.4:61616,tcp://7.2.2.5:61616,tcp://32.33.1.6:61616)?randomize=false&quot;;\r\n    ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory(url);\r\n    connectionFactory.setUserName(&quot;abc@abc&quot;);\r\n    connectionFactory.setPassword(&quot;abc&quot;);\r\n    connectionFactory.setClientID(&quot;testingClient&quot;); \r\n```","title":"ActiveMQ failover connection not working but works with single IP","body":"<p>I'm new to Java and writing a microservice that connects to an ActiveMQ cluster. I can connect to the cluster and read messages successfully when I use one single broker IP address. However, the connection doesn't work when I pass all IP's as a failover config.</p>\n<p>Working config:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    private static String url = &quot;tcp://1.2.3.4:61616&quot;;\n    ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory(url);\n    connectionFactory.setUserName(&quot;abc@abc&quot;);\n    connectionFactory.setPassword(&quot;abc&quot;);\n    connectionFactory.setClientID(&quot;testingClient&quot;);\n</code></pre>\n<p>Failed config:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    private static String url = &quot;failover://(tcp://1.2.2.4:61616,tcp://17.3.2.50:61616,tcp://14.3.8.6:61616,tcp://2.3.0.4:61616,tcp://7.2.2.5:61616,tcp://32.33.1.6:61616)?randomize=false&quot;;\n    ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory(url);\n    connectionFactory.setUserName(&quot;abc@abc&quot;);\n    connectionFactory.setPassword(&quot;abc&quot;);\n    connectionFactory.setClientID(&quot;testingClient&quot;); \n</code></pre>\n"},{"tags":["java","microservices","circuit-breaker","resilience4j"],"answers":[{"tags":[],"owner":{"account_id":2012119,"reputation":485,"user_id":1800319,"display_name":"Raghvendra Garg"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695202155,"creation_date":1695202155,"answer_id":77141082,"question_id":76940489,"body_markdown":"according to Resilience4j Doc.\r\n\r\n&gt; The fallback method mechanism works like a try/catch block. If a fallback method is configured, every exception is forwarded to a fallback method executor. The fallback method executor is searching for the best matching fallback method that can handle the exception. Similar to a catch block. The fallback is executed independently of the current state of the circuit breaker.\r\n\r\nYour fallback method will be invoked when `createNotificationsAboutUpcomingDeadlines` throws a RuntimeException and since ConnectException is not a runtime exception so fallback is not getting invoked, if you want to catch all Exceptions change the fallback method like below.\r\n\r\n    public void fallbackMethod(Exception exception) {\r\n        System.out.println(&quot;Not working&quot;);\r\n    }","title":"Spring boot resilience4j circuit breaker fallback method not being called","body":"<p>according to Resilience4j Doc.</p>\n<blockquote>\n<p>The fallback method mechanism works like a try/catch block. If a fallback method is configured, every exception is forwarded to a fallback method executor. The fallback method executor is searching for the best matching fallback method that can handle the exception. Similar to a catch block. The fallback is executed independently of the current state of the circuit breaker.</p>\n</blockquote>\n<p>Your fallback method will be invoked when <code>createNotificationsAboutUpcomingDeadlines</code> throws a RuntimeException and since ConnectException is not a runtime exception so fallback is not getting invoked, if you want to catch all Exceptions change the fallback method like below.</p>\n<pre><code>public void fallbackMethod(Exception exception) {\n    System.out.println(&quot;Not working&quot;);\n}\n</code></pre>\n"}],"owner":{"account_id":23142893,"reputation":5,"user_id":17246090,"display_name":"StuckyBoy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":592,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695202155,"creation_date":1692551058,"question_id":76940489,"body_markdown":"In my project, I followed instructions from tutorial and ended up with a not working circuit breaker. Here is the code: \r\n**application.properties**\r\n```\r\n## circuit breaker\r\nmanagement.endpoints.web.exposure.include=*\r\nmanagement.endpoint.health.show-details=always\r\nmanagement.health.circuitbreakers.enabled=true\r\n\r\nresilience4j.circuitbreaker.instances.reservation.failure-rate-threshold=50\r\nresilience4j.circuitbreaker.instances.reservation.minimum-number-of-calls=5\r\nresilience4j.circuitbreaker.instances.reservation.automatic-transition-from-open-to-half-open-enabled=true\r\nresilience4j.circuitbreaker.instances.reservation.wait-duration-in-open-state=5s\r\nresilience4j.circuitbreaker.instances.reservation.permitted-number-of-calls-in-half-open-state=3\r\nresilience4j.circuitbreaker.instances.reservation.sliding-window-size=10\r\nresilience4j.circuitbreaker.instances.reservation.sliding-window-type=count_based\r\nresilience4j.circuitbreaker.configs.default.registerHealthIndicator=true\r\n```\r\n\r\n**NotificationController.java**\r\n```\r\n@RestController\r\n@RequestMapping(&quot;/api/notification&quot;)\r\npublic class NotificationApiController {\r\n\r\n    @Autowired\r\n    private NotificationService notificationService;\r\n\r\n    @PostMapping\r\n    @ResponseStatus(HttpStatus.OK)\r\n    @CircuitBreaker(name = &quot;reservation&quot;, fallbackMethod = &quot;fallbackMethod&quot;)\r\n    public void createNotificationsAboutUpcomingDeadlines() {\r\n        notificationService.createNotificationsAboutUpcomingDeadlines();\r\n    }\r\n\r\n    public void fallbackMethod(RuntimeException runtimeException) {\r\n        System.out.println(&quot;Not working&quot;);\r\n    }\r\n}\r\n```\r\n\r\nand the fragment of **NotificationService** that is calling another microservice:\r\n\r\n```\r\n    private List&lt;BookDto&gt; queryCatalogServiceForItemsDetails(List&lt;ReservationDto&gt; reservationItemDtoList){\r\n        List&lt;Integer&gt; bookIsbnList = reservationItemDtoList.stream()\r\n                .flatMap(reservation -&gt; reservation.getReservationItemList().stream())\r\n                .map(ReservationItemDto::getBookIsbn)\r\n                .collect(Collectors.toList());\r\n\r\n        Object[] x = webClientBuilder.build().get()\r\n                .uri(String.format(&quot;http://catalogService/api/catalog?ids=%s&quot;, bookIsbnList.stream()\r\n                        .map(Object::toString)\r\n                        .collect(Collectors.joining(&quot;, &quot;))))\r\n                .retrieve()\r\n                .bodyToMono(Object[].class)\r\n                .block();\r\n        return Arrays.stream(x)\r\n                .map(object -&gt; mapper.convertValue(object, BookDto.class))\r\n                .collect(Collectors.toList());\r\n    }\r\n```\r\n\r\nThe problem is that when the catalogService is down, the notificationService ends up with:\r\n```java.net.ConnectException: Connection refused: no further information``` \r\nInstead of triggering fallback method. Any ideas why? ","title":"Spring boot resilience4j circuit breaker fallback method not being called","body":"<p>In my project, I followed instructions from tutorial and ended up with a not working circuit breaker. Here is the code:\n<strong>application.properties</strong></p>\n<pre><code>## circuit breaker\nmanagement.endpoints.web.exposure.include=*\nmanagement.endpoint.health.show-details=always\nmanagement.health.circuitbreakers.enabled=true\n\nresilience4j.circuitbreaker.instances.reservation.failure-rate-threshold=50\nresilience4j.circuitbreaker.instances.reservation.minimum-number-of-calls=5\nresilience4j.circuitbreaker.instances.reservation.automatic-transition-from-open-to-half-open-enabled=true\nresilience4j.circuitbreaker.instances.reservation.wait-duration-in-open-state=5s\nresilience4j.circuitbreaker.instances.reservation.permitted-number-of-calls-in-half-open-state=3\nresilience4j.circuitbreaker.instances.reservation.sliding-window-size=10\nresilience4j.circuitbreaker.instances.reservation.sliding-window-type=count_based\nresilience4j.circuitbreaker.configs.default.registerHealthIndicator=true\n</code></pre>\n<p><strong>NotificationController.java</strong></p>\n<pre><code>@RestController\n@RequestMapping(&quot;/api/notification&quot;)\npublic class NotificationApiController {\n\n    @Autowired\n    private NotificationService notificationService;\n\n    @PostMapping\n    @ResponseStatus(HttpStatus.OK)\n    @CircuitBreaker(name = &quot;reservation&quot;, fallbackMethod = &quot;fallbackMethod&quot;)\n    public void createNotificationsAboutUpcomingDeadlines() {\n        notificationService.createNotificationsAboutUpcomingDeadlines();\n    }\n\n    public void fallbackMethod(RuntimeException runtimeException) {\n        System.out.println(&quot;Not working&quot;);\n    }\n}\n</code></pre>\n<p>and the fragment of <strong>NotificationService</strong> that is calling another microservice:</p>\n<pre><code>    private List&lt;BookDto&gt; queryCatalogServiceForItemsDetails(List&lt;ReservationDto&gt; reservationItemDtoList){\n        List&lt;Integer&gt; bookIsbnList = reservationItemDtoList.stream()\n                .flatMap(reservation -&gt; reservation.getReservationItemList().stream())\n                .map(ReservationItemDto::getBookIsbn)\n                .collect(Collectors.toList());\n\n        Object[] x = webClientBuilder.build().get()\n                .uri(String.format(&quot;http://catalogService/api/catalog?ids=%s&quot;, bookIsbnList.stream()\n                        .map(Object::toString)\n                        .collect(Collectors.joining(&quot;, &quot;))))\n                .retrieve()\n                .bodyToMono(Object[].class)\n                .block();\n        return Arrays.stream(x)\n                .map(object -&gt; mapper.convertValue(object, BookDto.class))\n                .collect(Collectors.toList());\n    }\n</code></pre>\n<p>The problem is that when the catalogService is down, the notificationService ends up with:\n<code>java.net.ConnectException: Connection refused: no further information</code>\nInstead of triggering fallback method. Any ideas why?</p>\n"},{"tags":["java","android","android-recyclerview","android-mvp","bottomsheetdialogfragment"],"owner":{"account_id":26226531,"reputation":1,"user_id":19903153,"display_name":"Aysha"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":12,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695201909,"creation_date":1695201909,"question_id":77141048,"body_markdown":"I have a bottomsheet fragment and I have implemented two recyclerviews in it. The bottomsheet takes the argument of a arraylist of a custom datatype &quot;UserMedicalData&quot;. This custom type has an argument of type boolean .If the boolean is true it should be added to the dataset of recyclerview b and should be check marked in recyclerview A. if we click on an item in recyclerview A , it should change it&#39;s boolean status . If the boolean is true it should be added to the recyclerview B anmd should be marked checked in recyclerview A. If it was already marked checked , it should tutn its boolean status to false, uncheck itself and remove itself from the recyclerview B. \r\nAlso if the item is clicked in recyclerview B ,it should turn its boolean status to false and delete itself from recyclerview B&#39;s dataset and uncheck itslef from the recyclerview A.\r\nIn simple terms , if the item&#39;s boolean is true it should be added to recyclerview B , iof not it should be removed from recyclerview B. In all cases, the boolean status should be reflected in the recyclerview A. I have implemented a soultion , please help me optimize it .Here are the files\r\n\r\nThe bottomsheet fragment:\r\n```\r\npublic class DiseasesBottomSheetFragment  extends BottomSheetDialogFragment implements SelectDiseaseBottomSheetView, View.OnTouchListener, TextWatcher, View.OnClickListener  {\r\n\r\n    private SelectDiseaseBottomSheetViewHolder holder;\r\n    private SelectDiseaseBottomSheetPresenter presenter;\r\n\r\n    private AllDiseasesAdapter adapter;\r\n    private SelectedDiseaseBottomSheetAdapter selectedDiseasesAdapter;\r\n    private DiseaseFragmentCallback callback;\r\n    private BottomSheetBehavior&lt;View&gt; bottomSheetBehavior;\r\n\r\n\r\n    public DiseasesBottomSheetFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n    }\r\n\r\n    @Override\r\n    public void onViewCreated(@NonNull View view, @Nullable Bundle savedInstanceState) {\r\n        super.onViewCreated(view, savedInstanceState);\r\n        WindowManager windowManager = requireActivity().getWindowManager();\r\n        DisplayMetrics displayMetrics = new DisplayMetrics();\r\n        windowManager.getDefaultDisplay().getMetrics(displayMetrics);\r\n        int screenHeight = displayMetrics.heightPixels;\r\n        int desiredHeight = (int) (screenHeight * 0.94);\r\n\r\n\r\n        CoordinatorLayout.LayoutParams params = (CoordinatorLayout.LayoutParams) ((View) view.getParent()).getLayoutParams();\r\n        bottomSheetBehavior = (BottomSheetBehavior&lt;View&gt;) params.getBehavior();\r\n        assert bottomSheetBehavior != null;\r\n        bottomSheetBehavior.setPeekHeight(desiredHeight);\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        View view = inflater.inflate(R.layout.fragment_diseases_bottom_sheet, container, false);\r\n        initGui(view);\r\n        initVariables();\r\n        recieveArguments();\r\n        setItemsForAllDiseasesRV();\r\n        setItemsForSelectedDiseasesRV();\r\n        setListeners();\r\n        return view;\r\n    }\r\n    private void setItemsForSelectedDiseasesRV() {\r\n        if (!getSelectedItems().isEmpty()){\r\n            setSelectedDiseasesRV(presenter.getItems());\r\n        }\r\n    }\r\n    private void setItemsForAllDiseasesRV() {\r\n        if (Objects.requireNonNull(holder.getSearchEditText().getText()).toString().isEmpty()){\r\n            if (!presenter.getAllDiseasesList().isEmpty()){\r\n                setAllDiseasesRV(presenter.getAllDiseasesList());\r\n            }\r\n            else{\r\n                Toast.makeText(getContext(), &quot;Please retry again later.&quot;, Toast.LENGTH_SHORT).show();\r\n            }\r\n        }\r\n        else{\r\n            setUpFilteredRV();\r\n        }\r\n    }\r\n\r\n    private void setUpFilteredRV() {\r\n    }\r\n\r\n    private void recieveArguments() {\r\n        // Retrieve arguments\r\n        Bundle args = getArguments();\r\n        if (args != null) {\r\n            presenter.ProcessArguments(args);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void addToSelectedItems(int position) {\r\n        if (!getSelectedItems().contains(getAllItems().get(position))){\r\n            getSelectedItems().add(getAllItems().get(position));\r\n        }\r\n    }\r\n\r\n    private void setListeners() {\r\n        holder.getDoneButton().setOnClickListener(this);\r\n        holder.getSearchEditText().setOnTouchListener(this);\r\n        holder.getSearchEditText().addTextChangedListener(this);\r\n\r\n    }\r\n    private void initGui(View view) {\r\n        holder = new SelectDiseaseBottomSheetViewHolder(view);\r\n    }\r\n    private void initVariables() {presenter = new SelectDiseaseBottomSheetPresenter( this, getContext());}\r\n\r\n    private AdpaterViewItemClickedListener adpaterViewItemClickedListener = new AdpaterViewItemClickedListener() {\r\n        @Override\r\n        public void onAdatviewItemClicked(int position) {}\r\n\r\n        @Override\r\n        public void onAdatviewItemClicked(int position, int requestID) {\r\n            if (requestID == AppConstants.DISEASE_CLICKED_TO_ADD_TO_LIST) {\r\n                getAllItems().get(position).setSelected(true);\r\n                if (!getSelectedItems().contains(getAllItems().get(position))){\r\n                    addToSelectedItems(position);\r\n                    if (!getSelectedItems().isEmpty()){\r\n                        setItemsForSelectedDiseasesRV();\r\n                        selectedDiseasesAdapter.notifyDataSetChanged();\r\n                    }\r\n                }\r\n            }\r\n            if (requestID == AppConstants.DISEASE_CLICKED_TO_REMOVE_FROM_LIST) {\r\n                getAllItems().get(position).setSelected(false);\r\n                if (!getSelectedItems().isEmpty() &amp;&amp; getSelectedItems().contains(getAllItems().get(position))){\r\n                    getSelectedItems().remove(getAllItems().get(position));\r\n                    selectedDiseasesAdapter.notifyDataSetChanged();\r\n                }\r\n\r\n            }\r\n            if (requestID == AppConstants.SELECTED_DISEASE_CLICKED) {\r\n                try {\r\n                    if(getSelectedItems() != null &amp;&amp; getSelectedItems().size() &gt; 0) {\r\n                        uncheckRemovedItemFromAllItemList(getSelectedItems().get(position).getId());\r\n                    }\r\n                    getSelectedItems().remove(getSelectedItems().get(position));\r\n                    selectedDiseasesAdapter.notifyItemRemoved(position);\r\n                } catch (IndexOutOfBoundsException e) {\r\n                    System.out.println(&quot;Disease already deleted&quot;);\r\n                }\r\n            }\r\n        }\r\n        public void uncheckRemovedItemFromAllItemList(int removedItemId) {\r\n            for(int i=0; i&lt;getAllItems().size(); i++) {\r\n                if(getAllItems().get(i).getId() == removedItemId) {\r\n                    getAllItems().get(i).setSelected(false);\r\n                    adapter.notifyItemChanged(i);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        @Override\r\n        public void onAdatviewItemClicked(int position, int requestID, String s) {}\r\n\r\n        @Override\r\n        public void onAdatviewItemClicked(UserMedicalData userMedicalData, int requestID) {\r\n            if (requestID == AppConstants.DISEASE_CLICKED_TO_ADD_TO_LIST) {\r\n                for (int i=0; i&lt;=getAllItems().size();i++){\r\n                    if (getAllItems().get(i).getId()==userMedicalData.getId()){\r\n                        getAllItems().get(i).setSelected(true);\r\n                        addToSelectedItems(i);\r\n                        if (!getSelectedItems().isEmpty()){\r\n                            setItemsForSelectedDiseasesRV();\r\n                            selectedDiseasesAdapter.notifyDataSetChanged();\r\n                        }\r\n\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            if (requestID == AppConstants.DISEASE_CLICKED_TO_REMOVE_FROM_LIST) {\r\n                for (int i=0; i&lt;=getAllItems().size();i++){\r\n                    if (getAllItems().get(i).getId()==userMedicalData.getId()){\r\n                        getAllItems().get(i).setSelected(false);\r\n                        if (!getSelectedItems().isEmpty() &amp;&amp; getSelectedItems().contains(getAllItems().get(i))){\r\n                            getSelectedItems().remove(getAllItems().get(i));\r\n                            selectedDiseasesAdapter.notifyDataSetChanged();\r\n                        }\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n\r\n    @Override\r\n    public void filterList() {\r\n        if (presenter.getFilteredArrayList() != null) {\r\n            if (adapter != null) {\r\n                adapter.filter(presenter.getFilteredArrayList());\r\n            }\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void setNoRecordsVisibility(boolean isVisible) {\r\n        if (isVisible){\r\n            holder.getNoRecordsFound().setVisibility(View.VISIBLE);\r\n        }else {\r\n            holder.getNoRecordsFound().setVisibility(View.GONE);\r\n        }\r\n    }\r\n    @Override\r\n    public void onClick(View view) {\r\n        switch (view.getId()) {\r\n            case R.id.search_text_view:\r\n                break;\r\n            case R.id.done_button:\r\n                sendDataToActivity();\r\n                dismiss();\r\n                break;\r\n        }\r\n    }\r\n    @Override\r\n    public void onDismiss(@NonNull DialogInterface dialog) {\r\n        Bundle args = new Bundle();\r\n        args.putParcelableArrayList(&quot;selectedArray&quot;,new ArrayList&lt;&gt;(getSelectedItems()));\r\n        setArguments(args);\r\n        super.onDismiss(dialog);\r\n    }\r\n\r\n    @Override\r\n    public List&lt;UserMedicalData&gt; getAllItems() {return presenter.getAllDiseasesList();}\r\n\r\n    @Override\r\n    public List&lt;UserMedicalData&gt; getSelectedItems() {return presenter.getItems();}\r\n\r\n    @Override\r\n    public void setAllDiseasesRV(List&lt;UserMedicalData&gt; data) {\r\n        if (!data.isEmpty()) {\r\n            adapter = new AllDiseasesAdapter(getContext(),adpaterViewItemClickedListener, data);\r\n            holder.getAllDiseasesRV().setAdapter(adapter);\r\n        }\r\n    }\r\n    @Override\r\n    public void setSelectedDiseasesRV(List&lt;UserMedicalData&gt; items) {\r\n        if (!items.isEmpty()) {\r\n            selectedDiseasesAdapter = new SelectedDiseaseBottomSheetAdapter(getContext(), items,adpaterViewItemClickedListener);\r\n            holder.getSelectedDiseasesRV().setAdapter(selectedDiseasesAdapter);\r\n        }\r\n    }\r\n    @Override\r\n    public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {}\r\n    @Override\r\n    public boolean onTouch(View view, MotionEvent motionEvent) {\r\n        view.setFocusable(true);\r\n        view.setFocusableInTouchMode(true);\r\n        return false;\r\n    }\r\n    @Override\r\n    public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {}\r\n    @Override\r\n    public void afterTextChanged(Editable editable) {\r\n        if (editable != null) {\r\n            presenter.filter(editable.toString());\r\n        }\r\n        InputMethodManager imm = (InputMethodManager) getContext().getSystemService(Context.INPUT_METHOD_SERVICE);\r\n        if (imm != null) {\r\n            imm.toggleSoftInput(0, InputMethodManager.HIDE_IMPLICIT_ONLY);\r\n        }\r\n    }\r\n    @Override\r\n    public void onAttach(Context context) {\r\n        super.onAttach(context);\r\n        if (context instanceof DiseaseFragmentCallback) {\r\n            callback = (DiseaseFragmentCallback) context;\r\n        } else {\r\n            throw new RuntimeException(context.toString()\r\n                    + &quot; must implement FragmentCallback&quot;);\r\n        }\r\n    }\r\n    private void sendDataToActivity() {\r\n        if (callback != null) {\r\n            callback.onDataReceived(presenter.getItems());\r\n        }\r\n    }\r\n}\r\n```\r\nIt&#39;s presenter:\r\n\r\n```\r\npublic class SelectDiseaseBottomSheetPresenter implements ServerConnectListener {\r\n\r\n    private SelectDiseaseBottomSheetView view;\r\n    private Context context;\r\n    private List&lt;UserMedicalData&gt; allDiseasesList;\r\n    private List&lt;UserMedicalData&gt; items = new ArrayList&lt;&gt;();\r\n    private List&lt;UserMedicalData&gt; filteredArrayList = new ArrayList&lt;&gt;();\r\n\r\n    public SelectDiseaseBottomSheetPresenter(SelectDiseaseBottomSheetView view, Context context) {\r\n        this.view = view;\r\n        this.context = context;\r\n    }\r\n\r\n    public Context getContext() {\r\n        return context;\r\n    }\r\n\r\n    public void setContext(Context context) {\r\n        this.context = context;\r\n    }\r\n\r\n    public List&lt;UserMedicalData&gt; getAllDiseasesList() {\r\n        return allDiseasesList;\r\n    }\r\n\r\n    public void setAllDiseasesList(List&lt;UserMedicalData&gt; allDiseasesList) {\r\n        this.allDiseasesList = allDiseasesList;\r\n    }\r\n\r\n    public List&lt;UserMedicalData&gt; getItems() {\r\n        return items;\r\n    }\r\n\r\n    public void setItems(List&lt;UserMedicalData&gt; items) {\r\n        this.items = items;\r\n    }\r\n\r\n    public List&lt;UserMedicalData&gt; getFilteredArrayList() {\r\n        return filteredArrayList;\r\n    }\r\n\r\n    public void setFilteredArrayList(List&lt;UserMedicalData&gt; filteredArrayList) {\r\n        this.filteredArrayList = filteredArrayList;\r\n    }\r\n\r\n    public void filter(String toString) {\r\n        filteredArrayList = new ArrayList&lt;&gt;();\r\n        for (UserMedicalData item : view.getAllItems()) {\r\n            if (item.getTitle().toLowerCase().contains(toString.toLowerCase())) {\r\n                view.setNoRecordsVisibility(false);\r\n                filteredArrayList.add(item);\r\n            }\r\n        }\r\n        if (filteredArrayList.size() == 0) {\r\n            view.setNoRecordsVisibility(true);\r\n        }else {\r\n            view.setNoRecordsVisibility(false);\r\n        }\r\n        view.filterList();\r\n    }\r\n\r\n    public void ProcessArguments(Bundle args){\r\n        if (args.containsKey(&quot;all_items_array&quot;)){\r\n            allDiseasesList = args.getParcelableArrayList(&quot;all_items_array&quot;);\r\n            for (int i = 0; i &lt; allDiseasesList.size(); i++){\r\n                if (allDiseasesList.get(i).getSelected()){\r\n                    view.addToSelectedItems(i);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    @Override\r\n    public void onSuccess(ServerResponse response) {\r\n\r\n    }\r\n    @Override\r\n    public void onFailure(ServerResponse response) {\r\n\r\n    }\r\n    @Override\r\n    public void onSessionExpiry(ServerResponse response) {\r\n\r\n    }\r\n}\r\n\r\n\r\n```\r\nIt&#39;s view interface:\r\n```\r\npublic interface SelectDiseaseBottomSheetView {\r\n    List&lt;UserMedicalData&gt; getAllItems();\r\n    List&lt;UserMedicalData&gt; getSelectedItems();\r\n    void setAllDiseasesRV(List&lt;UserMedicalData&gt; items);\r\n    void setSelectedDiseasesRV(List&lt;UserMedicalData&gt; items);\r\n    void filterList();\r\n    void setNoRecordsVisibility(boolean isVisible);\r\n    void addToSelectedItems(int position);\r\n}\r\n```\r\nThe adatViewClickListener interface:\r\n\r\n```\r\npublic interface AdpaterViewItemClickedListener {\r\n\r\n    void onAdatviewItemClicked(int position);\r\n\r\n    void onAdatviewItemClicked(int position, int requestID);\r\n\r\n    void onAdatviewItemClicked(int position, int requestID, String s);\r\n    default void onAdatviewItemClicked(UserMedicalData userMedicalData, int requestID){\r\n\r\n    }\r\n\r\n}\r\n```\r\nThe AllDiseases Adapter for recyclerview A:\r\n\r\n```\r\npublic class AllDiseasesAdapter extends RecyclerView.Adapter&lt;AllDiseasesViewHolder&gt;{\r\n\r\n    private Context context;\r\n    private AdpaterViewItemClickedListener listener;\r\n    private List&lt;UserMedicalData&gt; data;\r\n\r\n    public AllDiseasesAdapter(Context context, AdpaterViewItemClickedListener listener, List&lt;UserMedicalData&gt; data) {\r\n        this.context = context;\r\n        this.listener = listener;\r\n        this.data = data;\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public AllDiseasesViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n        View view = LayoutInflater.from(context).inflate(R.layout.items_with_checkbox_layout, parent, false);\r\n        return new AllDiseasesViewHolder(view, listener, context);\r\n    }\r\n\r\n    @Override\r\n    public void onBindViewHolder(@NonNull AllDiseasesViewHolder holder, int position) {\r\n        holder.getItemText().setText(data.get(position).getTitle());\r\n        holder.bindData(data.get(position));\r\n        if (data.get(position).getSelected()){\r\n            holder.getCheckBox().setChecked(data.get(position).getSelected());\r\n        }else{\r\n            holder.getCheckBox().setChecked(false);\r\n\r\n        }\r\n    }\r\n    public void filter(List&lt;UserMedicalData&gt; filteredArrayList) {\r\n        data = new ArrayList&lt;&gt;();\r\n        if (filteredArrayList != null) {\r\n            data = filteredArrayList;\r\n            notifyDataSetChanged();\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public int getItemCount() {\r\n        return data.size();\r\n    }\r\n}\r\n\r\n```\r\nIt&#39;s viewholder:\r\n\r\n\r\n```\r\npublic class AllDiseasesViewHolder extends RecyclerView.ViewHolder implements View.OnClickListener {\r\n    private AdpaterViewItemClickedListener listener;\r\n    private Context context;\r\n    public ConstraintLayout itemLayout;\r\n    public TextView itemText;\r\n    public CheckBox checkBox;\r\n    public UserMedicalData userMedicalData;\r\n\r\n    public AllDiseasesViewHolder(@NonNull View view, AdpaterViewItemClickedListener listener, Context context) {\r\n        super(view);\r\n        initGui(view);\r\n        initVariables(listener, context);\r\n        setListeners();\r\n    }\r\n\r\n    private void initVariables(AdpaterViewItemClickedListener listener, Context context) {\r\n        this.listener = listener;\r\n        this.context = context;\r\n    }\r\n\r\n    public TextView getItemText() {\r\n        return itemText;\r\n    }\r\n\r\n    public CheckBox getCheckBox() {\r\n        return checkBox;\r\n    }\r\n\r\n    private void initGui(View view) {\r\n        itemLayout = view.findViewById(R.id.item_layout);\r\n        itemText = view.findViewById(R.id.text);\r\n        checkBox = view.findViewById(R.id.checkbox);\r\n    }\r\n\r\n    private void setListeners() {\r\n        itemLayout.setOnClickListener(this);\r\n    }\r\n\r\n    public void bindData(UserMedicalData userMedicalData){\r\n        this.userMedicalData=userMedicalData;\r\n\r\n    }\r\n\r\n\r\n    @Override\r\n    public void onClick(View view) {\r\n        int viewId = view.getId();\r\n        if (viewId == itemLayout.getId()) {\r\n            if (getCheckBox().isChecked()){\r\n                listener.onAdatviewItemClicked(userMedicalData, AppConstants.DISEASE_CLICKED_TO_REMOVE_FROM_LIST);\r\n                getCheckBox().setChecked(false);\r\n            }\r\n            else{\r\n                listener.onAdatviewItemClicked(userMedicalData, AppConstants.DISEASE_CLICKED_TO_ADD_TO_LIST);\r\n                getCheckBox().setChecked(true);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n```\r\nThe selecteddisease Adapter for recyclerview B:\r\n\r\n```\r\npublic class SelectedDiseaseBottomSheetAdapter extends RecyclerView.Adapter&lt;SelectedDiseaseViewHolder&gt; {\r\n\r\n    private List&lt;UserMedicalData&gt; data;\r\n    private Context context;\r\n    private AdpaterViewItemClickedListener listener;\r\n\r\n\r\n    public SelectedDiseaseBottomSheetAdapter(Context context, List&lt;UserMedicalData&gt; data, AdpaterViewItemClickedListener listener) {\r\n        this.context = context;\r\n        this.data = data;\r\n        this.listener = listener;\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public SelectedDiseaseViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n        View view = LayoutInflater.from(context).inflate(R.layout.selected_disease_bottomsheet_layout, parent, false);\r\n        return new SelectedDiseaseViewHolder(view, listener, context);\r\n    }\r\n\r\n    @Override\r\n    public void onBindViewHolder(@NonNull SelectedDiseaseViewHolder holder, int position) {\r\n        holder.getItemText().setText(data.get(position).getTitle());\r\n\r\n    }\r\n\r\n    @Override\r\n    public int getItemCount() {\r\n        return data.size();\r\n    }\r\n}\r\n```\r\nAnd it&#39;s viewholder:\r\n\r\n```\r\npublic class SelectedDiseaseViewHolder extends RecyclerView.ViewHolder implements View.OnClickListener{\r\n\r\n    public TextView itemText;\r\n    private AdpaterViewItemClickedListener listener;\r\n    private Context context;\r\n\r\n    public SelectedDiseaseViewHolder(@NonNull View view, AdpaterViewItemClickedListener listener, Context context) {\r\n        super(view);\r\n        initGui(view);\r\n        initVariables(listener, context);\r\n        setListeners();\r\n    }\r\n\r\n    private void initVariables(AdpaterViewItemClickedListener listener, Context context) {\r\n        this.listener = listener;\r\n        this.context = context;\r\n    }\r\n\r\n    public TextView getItemText() {\r\n        return itemText;\r\n    }\r\n\r\n    private void initGui(View view) {\r\n        itemText = view.findViewById(R.id.text);\r\n    }\r\n\r\n    private void setListeners() {\r\n        itemText.setOnClickListener(this);\r\n    }\r\n\r\n    @Override\r\n    public void onClick(View view) {\r\n        int viewId = view.getId();\r\n        if (viewId == itemText.getId()) {\r\n            listener.onAdatviewItemClicked(getAbsoluteAdapterPosition(), AppConstants.SELECTED_DISEASE_CLICKED);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nLastly here is the datamodel for the items of the arraylist set as dataset of these recyclerviews:\r\n\r\n\r\n```\r\n@Keep\r\npublic class UserMedicalData implements Parcelable {\r\n    private int id;\r\n    private String title;\r\n    private String type;\r\n    private boolean selected;\r\n\r\n    protected UserMedicalData(Parcel in) {\r\n        id = in.readInt();\r\n        title = in.readString();\r\n        type = in.readString();\r\n        selected = in.readByte() != 0;\r\n    }\r\n\r\n    public static final Creator&lt;UserMedicalData&gt; CREATOR = new Creator&lt;UserMedicalData&gt;() {\r\n        @Override\r\n        public UserMedicalData createFromParcel(Parcel in) {\r\n            return new UserMedicalData(in);\r\n        }\r\n\r\n        @Override\r\n        public UserMedicalData[] newArray(int size) {\r\n            return new UserMedicalData[size];\r\n        }\r\n    };\r\n\r\n    public int getId () {return id;}\r\n\r\n    public void setId (int id) {this.id = id;}\r\n\r\n    public String getTitle () {return title;}\r\n\r\n    public void setTitle (String title) {this.title = title;}\r\n\r\n    public String getType () {return type;}\r\n\r\n    public void setType (String type) {this.type = type;}\r\n\r\n    public boolean getSelected () {return selected;}\r\n\r\n    public void setSelected (boolean selected) {this.selected = selected;}\r\n\r\n    @Override\r\n    public int describeContents() {\r\n        return 0;\r\n    }\r\n\r\n    @Override\r\n    public void writeToParcel(Parcel parcel, int i) {\r\n        parcel.writeInt(id);\r\n        parcel.writeString(title);\r\n        parcel.writeString(type);\r\n        parcel.writeByte((byte) (selected ? 1 : 0));\r\n    }\r\n}\r\n```\r\nThis solution works fine for toggling the views and Booleans , but I want to know if there is a simpler more concise method to do so.\r\nSometimes ,using the filter on recyclerview A and toggling between data , triggers some data&#39;s booleans to turn true automatically . I have tried various ways to debug this issue and handle it but it&#39;s to no avail working for me. Please let me know if I am doing something wrong or if anything can be improved for the best .\r\n\r\nI have tried toggling the Booleans and updating dataset using &quot;notifyDataSetChanged&quot; and &quot;notifyItemRemoved&quot; and &quot;notifyItemAdded&quot; methods to update the recyclerviews but during robust testing , the main recyclerview shows weird behavior that I am unable to debug or resolve.","title":"Syncing Data Between Two RecyclerViews in Android BottomsheetDialogueFragment","body":"<p>I have a bottomsheet fragment and I have implemented two recyclerviews in it. The bottomsheet takes the argument of a arraylist of a custom datatype &quot;UserMedicalData&quot;. This custom type has an argument of type boolean .If the boolean is true it should be added to the dataset of recyclerview b and should be check marked in recyclerview A. if we click on an item in recyclerview A , it should change it's boolean status . If the boolean is true it should be added to the recyclerview B anmd should be marked checked in recyclerview A. If it was already marked checked , it should tutn its boolean status to false, uncheck itself and remove itself from the recyclerview B.\nAlso if the item is clicked in recyclerview B ,it should turn its boolean status to false and delete itself from recyclerview B's dataset and uncheck itslef from the recyclerview A.\nIn simple terms , if the item's boolean is true it should be added to recyclerview B , iof not it should be removed from recyclerview B. In all cases, the boolean status should be reflected in the recyclerview A. I have implemented a soultion , please help me optimize it .Here are the files</p>\n<p>The bottomsheet fragment:</p>\n<pre><code>public class DiseasesBottomSheetFragment  extends BottomSheetDialogFragment implements SelectDiseaseBottomSheetView, View.OnTouchListener, TextWatcher, View.OnClickListener  {\n\n    private SelectDiseaseBottomSheetViewHolder holder;\n    private SelectDiseaseBottomSheetPresenter presenter;\n\n    private AllDiseasesAdapter adapter;\n    private SelectedDiseaseBottomSheetAdapter selectedDiseasesAdapter;\n    private DiseaseFragmentCallback callback;\n    private BottomSheetBehavior&lt;View&gt; bottomSheetBehavior;\n\n\n    public DiseasesBottomSheetFragment() {\n        // Required empty public constructor\n    }\n\n    @Override\n    public void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n    }\n\n    @Override\n    public void onViewCreated(@NonNull View view, @Nullable Bundle savedInstanceState) {\n        super.onViewCreated(view, savedInstanceState);\n        WindowManager windowManager = requireActivity().getWindowManager();\n        DisplayMetrics displayMetrics = new DisplayMetrics();\n        windowManager.getDefaultDisplay().getMetrics(displayMetrics);\n        int screenHeight = displayMetrics.heightPixels;\n        int desiredHeight = (int) (screenHeight * 0.94);\n\n\n        CoordinatorLayout.LayoutParams params = (CoordinatorLayout.LayoutParams) ((View) view.getParent()).getLayoutParams();\n        bottomSheetBehavior = (BottomSheetBehavior&lt;View&gt;) params.getBehavior();\n        assert bottomSheetBehavior != null;\n        bottomSheetBehavior.setPeekHeight(desiredHeight);\n    }\n\n    @Override\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\n                             Bundle savedInstanceState) {\n        View view = inflater.inflate(R.layout.fragment_diseases_bottom_sheet, container, false);\n        initGui(view);\n        initVariables();\n        recieveArguments();\n        setItemsForAllDiseasesRV();\n        setItemsForSelectedDiseasesRV();\n        setListeners();\n        return view;\n    }\n    private void setItemsForSelectedDiseasesRV() {\n        if (!getSelectedItems().isEmpty()){\n            setSelectedDiseasesRV(presenter.getItems());\n        }\n    }\n    private void setItemsForAllDiseasesRV() {\n        if (Objects.requireNonNull(holder.getSearchEditText().getText()).toString().isEmpty()){\n            if (!presenter.getAllDiseasesList().isEmpty()){\n                setAllDiseasesRV(presenter.getAllDiseasesList());\n            }\n            else{\n                Toast.makeText(getContext(), &quot;Please retry again later.&quot;, Toast.LENGTH_SHORT).show();\n            }\n        }\n        else{\n            setUpFilteredRV();\n        }\n    }\n\n    private void setUpFilteredRV() {\n    }\n\n    private void recieveArguments() {\n        // Retrieve arguments\n        Bundle args = getArguments();\n        if (args != null) {\n            presenter.ProcessArguments(args);\n        }\n    }\n\n    @Override\n    public void addToSelectedItems(int position) {\n        if (!getSelectedItems().contains(getAllItems().get(position))){\n            getSelectedItems().add(getAllItems().get(position));\n        }\n    }\n\n    private void setListeners() {\n        holder.getDoneButton().setOnClickListener(this);\n        holder.getSearchEditText().setOnTouchListener(this);\n        holder.getSearchEditText().addTextChangedListener(this);\n\n    }\n    private void initGui(View view) {\n        holder = new SelectDiseaseBottomSheetViewHolder(view);\n    }\n    private void initVariables() {presenter = new SelectDiseaseBottomSheetPresenter( this, getContext());}\n\n    private AdpaterViewItemClickedListener adpaterViewItemClickedListener = new AdpaterViewItemClickedListener() {\n        @Override\n        public void onAdatviewItemClicked(int position) {}\n\n        @Override\n        public void onAdatviewItemClicked(int position, int requestID) {\n            if (requestID == AppConstants.DISEASE_CLICKED_TO_ADD_TO_LIST) {\n                getAllItems().get(position).setSelected(true);\n                if (!getSelectedItems().contains(getAllItems().get(position))){\n                    addToSelectedItems(position);\n                    if (!getSelectedItems().isEmpty()){\n                        setItemsForSelectedDiseasesRV();\n                        selectedDiseasesAdapter.notifyDataSetChanged();\n                    }\n                }\n            }\n            if (requestID == AppConstants.DISEASE_CLICKED_TO_REMOVE_FROM_LIST) {\n                getAllItems().get(position).setSelected(false);\n                if (!getSelectedItems().isEmpty() &amp;&amp; getSelectedItems().contains(getAllItems().get(position))){\n                    getSelectedItems().remove(getAllItems().get(position));\n                    selectedDiseasesAdapter.notifyDataSetChanged();\n                }\n\n            }\n            if (requestID == AppConstants.SELECTED_DISEASE_CLICKED) {\n                try {\n                    if(getSelectedItems() != null &amp;&amp; getSelectedItems().size() &gt; 0) {\n                        uncheckRemovedItemFromAllItemList(getSelectedItems().get(position).getId());\n                    }\n                    getSelectedItems().remove(getSelectedItems().get(position));\n                    selectedDiseasesAdapter.notifyItemRemoved(position);\n                } catch (IndexOutOfBoundsException e) {\n                    System.out.println(&quot;Disease already deleted&quot;);\n                }\n            }\n        }\n        public void uncheckRemovedItemFromAllItemList(int removedItemId) {\n            for(int i=0; i&lt;getAllItems().size(); i++) {\n                if(getAllItems().get(i).getId() == removedItemId) {\n                    getAllItems().get(i).setSelected(false);\n                    adapter.notifyItemChanged(i);\n                    break;\n                }\n            }\n        }\n\n        @Override\n        public void onAdatviewItemClicked(int position, int requestID, String s) {}\n\n        @Override\n        public void onAdatviewItemClicked(UserMedicalData userMedicalData, int requestID) {\n            if (requestID == AppConstants.DISEASE_CLICKED_TO_ADD_TO_LIST) {\n                for (int i=0; i&lt;=getAllItems().size();i++){\n                    if (getAllItems().get(i).getId()==userMedicalData.getId()){\n                        getAllItems().get(i).setSelected(true);\n                        addToSelectedItems(i);\n                        if (!getSelectedItems().isEmpty()){\n                            setItemsForSelectedDiseasesRV();\n                            selectedDiseasesAdapter.notifyDataSetChanged();\n                        }\n\n                        break;\n                    }\n                }\n            }\n            if (requestID == AppConstants.DISEASE_CLICKED_TO_REMOVE_FROM_LIST) {\n                for (int i=0; i&lt;=getAllItems().size();i++){\n                    if (getAllItems().get(i).getId()==userMedicalData.getId()){\n                        getAllItems().get(i).setSelected(false);\n                        if (!getSelectedItems().isEmpty() &amp;&amp; getSelectedItems().contains(getAllItems().get(i))){\n                            getSelectedItems().remove(getAllItems().get(i));\n                            selectedDiseasesAdapter.notifyDataSetChanged();\n                        }\n                        break;\n                    }\n                }\n            }\n        }\n    };\n\n\n    @Override\n    public void filterList() {\n        if (presenter.getFilteredArrayList() != null) {\n            if (adapter != null) {\n                adapter.filter(presenter.getFilteredArrayList());\n            }\n        }\n    }\n\n    @Override\n    public void setNoRecordsVisibility(boolean isVisible) {\n        if (isVisible){\n            holder.getNoRecordsFound().setVisibility(View.VISIBLE);\n        }else {\n            holder.getNoRecordsFound().setVisibility(View.GONE);\n        }\n    }\n    @Override\n    public void onClick(View view) {\n        switch (view.getId()) {\n            case R.id.search_text_view:\n                break;\n            case R.id.done_button:\n                sendDataToActivity();\n                dismiss();\n                break;\n        }\n    }\n    @Override\n    public void onDismiss(@NonNull DialogInterface dialog) {\n        Bundle args = new Bundle();\n        args.putParcelableArrayList(&quot;selectedArray&quot;,new ArrayList&lt;&gt;(getSelectedItems()));\n        setArguments(args);\n        super.onDismiss(dialog);\n    }\n\n    @Override\n    public List&lt;UserMedicalData&gt; getAllItems() {return presenter.getAllDiseasesList();}\n\n    @Override\n    public List&lt;UserMedicalData&gt; getSelectedItems() {return presenter.getItems();}\n\n    @Override\n    public void setAllDiseasesRV(List&lt;UserMedicalData&gt; data) {\n        if (!data.isEmpty()) {\n            adapter = new AllDiseasesAdapter(getContext(),adpaterViewItemClickedListener, data);\n            holder.getAllDiseasesRV().setAdapter(adapter);\n        }\n    }\n    @Override\n    public void setSelectedDiseasesRV(List&lt;UserMedicalData&gt; items) {\n        if (!items.isEmpty()) {\n            selectedDiseasesAdapter = new SelectedDiseaseBottomSheetAdapter(getContext(), items,adpaterViewItemClickedListener);\n            holder.getSelectedDiseasesRV().setAdapter(selectedDiseasesAdapter);\n        }\n    }\n    @Override\n    public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {}\n    @Override\n    public boolean onTouch(View view, MotionEvent motionEvent) {\n        view.setFocusable(true);\n        view.setFocusableInTouchMode(true);\n        return false;\n    }\n    @Override\n    public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {}\n    @Override\n    public void afterTextChanged(Editable editable) {\n        if (editable != null) {\n            presenter.filter(editable.toString());\n        }\n        InputMethodManager imm = (InputMethodManager) getContext().getSystemService(Context.INPUT_METHOD_SERVICE);\n        if (imm != null) {\n            imm.toggleSoftInput(0, InputMethodManager.HIDE_IMPLICIT_ONLY);\n        }\n    }\n    @Override\n    public void onAttach(Context context) {\n        super.onAttach(context);\n        if (context instanceof DiseaseFragmentCallback) {\n            callback = (DiseaseFragmentCallback) context;\n        } else {\n            throw new RuntimeException(context.toString()\n                    + &quot; must implement FragmentCallback&quot;);\n        }\n    }\n    private void sendDataToActivity() {\n        if (callback != null) {\n            callback.onDataReceived(presenter.getItems());\n        }\n    }\n}\n</code></pre>\n<p>It's presenter:</p>\n<pre><code>public class SelectDiseaseBottomSheetPresenter implements ServerConnectListener {\n\n    private SelectDiseaseBottomSheetView view;\n    private Context context;\n    private List&lt;UserMedicalData&gt; allDiseasesList;\n    private List&lt;UserMedicalData&gt; items = new ArrayList&lt;&gt;();\n    private List&lt;UserMedicalData&gt; filteredArrayList = new ArrayList&lt;&gt;();\n\n    public SelectDiseaseBottomSheetPresenter(SelectDiseaseBottomSheetView view, Context context) {\n        this.view = view;\n        this.context = context;\n    }\n\n    public Context getContext() {\n        return context;\n    }\n\n    public void setContext(Context context) {\n        this.context = context;\n    }\n\n    public List&lt;UserMedicalData&gt; getAllDiseasesList() {\n        return allDiseasesList;\n    }\n\n    public void setAllDiseasesList(List&lt;UserMedicalData&gt; allDiseasesList) {\n        this.allDiseasesList = allDiseasesList;\n    }\n\n    public List&lt;UserMedicalData&gt; getItems() {\n        return items;\n    }\n\n    public void setItems(List&lt;UserMedicalData&gt; items) {\n        this.items = items;\n    }\n\n    public List&lt;UserMedicalData&gt; getFilteredArrayList() {\n        return filteredArrayList;\n    }\n\n    public void setFilteredArrayList(List&lt;UserMedicalData&gt; filteredArrayList) {\n        this.filteredArrayList = filteredArrayList;\n    }\n\n    public void filter(String toString) {\n        filteredArrayList = new ArrayList&lt;&gt;();\n        for (UserMedicalData item : view.getAllItems()) {\n            if (item.getTitle().toLowerCase().contains(toString.toLowerCase())) {\n                view.setNoRecordsVisibility(false);\n                filteredArrayList.add(item);\n            }\n        }\n        if (filteredArrayList.size() == 0) {\n            view.setNoRecordsVisibility(true);\n        }else {\n            view.setNoRecordsVisibility(false);\n        }\n        view.filterList();\n    }\n\n    public void ProcessArguments(Bundle args){\n        if (args.containsKey(&quot;all_items_array&quot;)){\n            allDiseasesList = args.getParcelableArrayList(&quot;all_items_array&quot;);\n            for (int i = 0; i &lt; allDiseasesList.size(); i++){\n                if (allDiseasesList.get(i).getSelected()){\n                    view.addToSelectedItems(i);\n                }\n            }\n        }\n    }\n    @Override\n    public void onSuccess(ServerResponse response) {\n\n    }\n    @Override\n    public void onFailure(ServerResponse response) {\n\n    }\n    @Override\n    public void onSessionExpiry(ServerResponse response) {\n\n    }\n}\n\n\n</code></pre>\n<p>It's view interface:</p>\n<pre><code>public interface SelectDiseaseBottomSheetView {\n    List&lt;UserMedicalData&gt; getAllItems();\n    List&lt;UserMedicalData&gt; getSelectedItems();\n    void setAllDiseasesRV(List&lt;UserMedicalData&gt; items);\n    void setSelectedDiseasesRV(List&lt;UserMedicalData&gt; items);\n    void filterList();\n    void setNoRecordsVisibility(boolean isVisible);\n    void addToSelectedItems(int position);\n}\n</code></pre>\n<p>The adatViewClickListener interface:</p>\n<pre><code>public interface AdpaterViewItemClickedListener {\n\n    void onAdatviewItemClicked(int position);\n\n    void onAdatviewItemClicked(int position, int requestID);\n\n    void onAdatviewItemClicked(int position, int requestID, String s);\n    default void onAdatviewItemClicked(UserMedicalData userMedicalData, int requestID){\n\n    }\n\n}\n</code></pre>\n<p>The AllDiseases Adapter for recyclerview A:</p>\n<pre><code>public class AllDiseasesAdapter extends RecyclerView.Adapter&lt;AllDiseasesViewHolder&gt;{\n\n    private Context context;\n    private AdpaterViewItemClickedListener listener;\n    private List&lt;UserMedicalData&gt; data;\n\n    public AllDiseasesAdapter(Context context, AdpaterViewItemClickedListener listener, List&lt;UserMedicalData&gt; data) {\n        this.context = context;\n        this.listener = listener;\n        this.data = data;\n    }\n\n    @NonNull\n    @Override\n    public AllDiseasesViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\n        View view = LayoutInflater.from(context).inflate(R.layout.items_with_checkbox_layout, parent, false);\n        return new AllDiseasesViewHolder(view, listener, context);\n    }\n\n    @Override\n    public void onBindViewHolder(@NonNull AllDiseasesViewHolder holder, int position) {\n        holder.getItemText().setText(data.get(position).getTitle());\n        holder.bindData(data.get(position));\n        if (data.get(position).getSelected()){\n            holder.getCheckBox().setChecked(data.get(position).getSelected());\n        }else{\n            holder.getCheckBox().setChecked(false);\n\n        }\n    }\n    public void filter(List&lt;UserMedicalData&gt; filteredArrayList) {\n        data = new ArrayList&lt;&gt;();\n        if (filteredArrayList != null) {\n            data = filteredArrayList;\n            notifyDataSetChanged();\n        }\n    }\n\n    @Override\n    public int getItemCount() {\n        return data.size();\n    }\n}\n\n</code></pre>\n<p>It's viewholder:</p>\n<pre><code>public class AllDiseasesViewHolder extends RecyclerView.ViewHolder implements View.OnClickListener {\n    private AdpaterViewItemClickedListener listener;\n    private Context context;\n    public ConstraintLayout itemLayout;\n    public TextView itemText;\n    public CheckBox checkBox;\n    public UserMedicalData userMedicalData;\n\n    public AllDiseasesViewHolder(@NonNull View view, AdpaterViewItemClickedListener listener, Context context) {\n        super(view);\n        initGui(view);\n        initVariables(listener, context);\n        setListeners();\n    }\n\n    private void initVariables(AdpaterViewItemClickedListener listener, Context context) {\n        this.listener = listener;\n        this.context = context;\n    }\n\n    public TextView getItemText() {\n        return itemText;\n    }\n\n    public CheckBox getCheckBox() {\n        return checkBox;\n    }\n\n    private void initGui(View view) {\n        itemLayout = view.findViewById(R.id.item_layout);\n        itemText = view.findViewById(R.id.text);\n        checkBox = view.findViewById(R.id.checkbox);\n    }\n\n    private void setListeners() {\n        itemLayout.setOnClickListener(this);\n    }\n\n    public void bindData(UserMedicalData userMedicalData){\n        this.userMedicalData=userMedicalData;\n\n    }\n\n\n    @Override\n    public void onClick(View view) {\n        int viewId = view.getId();\n        if (viewId == itemLayout.getId()) {\n            if (getCheckBox().isChecked()){\n                listener.onAdatviewItemClicked(userMedicalData, AppConstants.DISEASE_CLICKED_TO_REMOVE_FROM_LIST);\n                getCheckBox().setChecked(false);\n            }\n            else{\n                listener.onAdatviewItemClicked(userMedicalData, AppConstants.DISEASE_CLICKED_TO_ADD_TO_LIST);\n                getCheckBox().setChecked(true);\n            }\n        }\n    }\n}\n\n</code></pre>\n<p>The selecteddisease Adapter for recyclerview B:</p>\n<pre><code>public class SelectedDiseaseBottomSheetAdapter extends RecyclerView.Adapter&lt;SelectedDiseaseViewHolder&gt; {\n\n    private List&lt;UserMedicalData&gt; data;\n    private Context context;\n    private AdpaterViewItemClickedListener listener;\n\n\n    public SelectedDiseaseBottomSheetAdapter(Context context, List&lt;UserMedicalData&gt; data, AdpaterViewItemClickedListener listener) {\n        this.context = context;\n        this.data = data;\n        this.listener = listener;\n    }\n\n    @NonNull\n    @Override\n    public SelectedDiseaseViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\n        View view = LayoutInflater.from(context).inflate(R.layout.selected_disease_bottomsheet_layout, parent, false);\n        return new SelectedDiseaseViewHolder(view, listener, context);\n    }\n\n    @Override\n    public void onBindViewHolder(@NonNull SelectedDiseaseViewHolder holder, int position) {\n        holder.getItemText().setText(data.get(position).getTitle());\n\n    }\n\n    @Override\n    public int getItemCount() {\n        return data.size();\n    }\n}\n</code></pre>\n<p>And it's viewholder:</p>\n<pre><code>public class SelectedDiseaseViewHolder extends RecyclerView.ViewHolder implements View.OnClickListener{\n\n    public TextView itemText;\n    private AdpaterViewItemClickedListener listener;\n    private Context context;\n\n    public SelectedDiseaseViewHolder(@NonNull View view, AdpaterViewItemClickedListener listener, Context context) {\n        super(view);\n        initGui(view);\n        initVariables(listener, context);\n        setListeners();\n    }\n\n    private void initVariables(AdpaterViewItemClickedListener listener, Context context) {\n        this.listener = listener;\n        this.context = context;\n    }\n\n    public TextView getItemText() {\n        return itemText;\n    }\n\n    private void initGui(View view) {\n        itemText = view.findViewById(R.id.text);\n    }\n\n    private void setListeners() {\n        itemText.setOnClickListener(this);\n    }\n\n    @Override\n    public void onClick(View view) {\n        int viewId = view.getId();\n        if (viewId == itemText.getId()) {\n            listener.onAdatviewItemClicked(getAbsoluteAdapterPosition(), AppConstants.SELECTED_DISEASE_CLICKED);\n        }\n    }\n}\n</code></pre>\n<p>Lastly here is the datamodel for the items of the arraylist set as dataset of these recyclerviews:</p>\n<pre><code>@Keep\npublic class UserMedicalData implements Parcelable {\n    private int id;\n    private String title;\n    private String type;\n    private boolean selected;\n\n    protected UserMedicalData(Parcel in) {\n        id = in.readInt();\n        title = in.readString();\n        type = in.readString();\n        selected = in.readByte() != 0;\n    }\n\n    public static final Creator&lt;UserMedicalData&gt; CREATOR = new Creator&lt;UserMedicalData&gt;() {\n        @Override\n        public UserMedicalData createFromParcel(Parcel in) {\n            return new UserMedicalData(in);\n        }\n\n        @Override\n        public UserMedicalData[] newArray(int size) {\n            return new UserMedicalData[size];\n        }\n    };\n\n    public int getId () {return id;}\n\n    public void setId (int id) {this.id = id;}\n\n    public String getTitle () {return title;}\n\n    public void setTitle (String title) {this.title = title;}\n\n    public String getType () {return type;}\n\n    public void setType (String type) {this.type = type;}\n\n    public boolean getSelected () {return selected;}\n\n    public void setSelected (boolean selected) {this.selected = selected;}\n\n    @Override\n    public int describeContents() {\n        return 0;\n    }\n\n    @Override\n    public void writeToParcel(Parcel parcel, int i) {\n        parcel.writeInt(id);\n        parcel.writeString(title);\n        parcel.writeString(type);\n        parcel.writeByte((byte) (selected ? 1 : 0));\n    }\n}\n</code></pre>\n<p>This solution works fine for toggling the views and Booleans , but I want to know if there is a simpler more concise method to do so.\nSometimes ,using the filter on recyclerview A and toggling between data , triggers some data's booleans to turn true automatically . I have tried various ways to debug this issue and handle it but it's to no avail working for me. Please let me know if I am doing something wrong or if anything can be improved for the best .</p>\n<p>I have tried toggling the Booleans and updating dataset using &quot;notifyDataSetChanged&quot; and &quot;notifyItemRemoved&quot; and &quot;notifyItemAdded&quot; methods to update the recyclerviews but during robust testing , the main recyclerview shows weird behavior that I am unable to debug or resolve.</p>\n"},{"tags":["java","performance","reflection","methodhandle"],"comments":[{"owner":{"account_id":1010971,"reputation":11524,"user_id":1023553,"accept_rate":59,"display_name":"NoDataFound"},"score":2,"creation_date":1695155879,"post_id":77137831,"comment_id":135985543,"body_markdown":"Not sure it will change but your `methodHandle()` and `methodHandleInvokeExact()` both returns  Number, which imply a cast from `Number` to `Object`: you are not exactly testing the same thing.","body":"Not sure it will change but your <code>methodHandle()</code> and <code>methodHandleInvokeExact()</code> both returns  Number, which imply a cast from <code>Number</code> to <code>Object</code>: you are not exactly testing the same thing."},{"owner":{"account_id":27243397,"reputation":1316,"user_id":20769158,"display_name":"scrhartley"},"score":3,"creation_date":1695155962,"post_id":77137831,"comment_id":135985557,"body_markdown":"Note: reflection was reimplemented to use method handles in [Java 18](https://openjdk.org/jeps/416)","body":"Note: reflection was reimplemented to use method handles in <a href=\"https://openjdk.org/jeps/416\" rel=\"nofollow noreferrer\">Java 18</a>"},{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":3,"creation_date":1695156074,"post_id":77137831,"comment_id":135985580,"body_markdown":"Didn’t you ask this earlier?","body":"Didn’t you ask this earlier?"},{"owner":{"account_id":3736112,"reputation":988,"user_id":3107019,"display_name":"JackPGreen"},"score":0,"creation_date":1695156340,"post_id":77137831,"comment_id":135985620,"body_markdown":"@DaveNewton that was about primitives - where it turned out my benchmark was wrong and the code was right. But this scenario the benchmark is right (I think!) and I still have an unexpected result.","body":"@DaveNewton that was about primitives - where it turned out my benchmark was wrong and the code was right. But this scenario the benchmark is right (I think!) and I still have an unexpected result."},{"owner":{"account_id":3736112,"reputation":988,"user_id":3107019,"display_name":"JackPGreen"},"score":0,"creation_date":1695156352,"post_id":77137831,"comment_id":135985623,"body_markdown":"@NoDataFound good spot, fixed. Same results though.","body":"@NoDataFound good spot, fixed. Same results though."},{"owner":{"account_id":1352170,"reputation":34246,"user_id":1291492,"accept_rate":100,"display_name":"ControlAltDel"},"score":0,"creation_date":1695156907,"post_id":77137831,"comment_id":135985731,"body_markdown":"Can I ask why you want to call a method by reflection in the first place?","body":"Can I ask why you want to call a method by reflection in the first place?"},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":1,"creation_date":1695161630,"post_id":77137831,"comment_id":135986420,"body_markdown":"The difference between these times is not even 1 _nanosecond_. Does it really matter? Choose the API that provides what you need and is easier to use. Plus, as noted, reflection uses method handles under the hood in Java 18+.","body":"The difference between these times is not even 1 <i>nanosecond</i>. Does it really matter? Choose the API that provides what you need and is easier to use. Plus, as noted, reflection uses method handles under the hood in Java 18+."}],"answers":[{"tags":[],"owner":{"account_id":27243397,"reputation":1316,"user_id":20769158,"display_name":"scrhartley"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1695156750,"creation_date":1695156750,"answer_id":77137922,"question_id":77137831,"body_markdown":"You need to make your method handles `static final` so that they can be constant folded (apparently).\r\n\r\nSee this article [Java Reflection, but much faster](https://www.optaplanner.org/blog/2018/01/09/JavaReflectionButMuchFaster.html#_static_methodhandles_update_on_2018_01_11), which explores reflection vs. method handle performance as you want.","title":"`MethodHandle` slower than Reflection when accessing Object","body":"<p>You need to make your method handles <code>static final</code> so that they can be constant folded (apparently).</p>\n<p>See this article <a href=\"https://www.optaplanner.org/blog/2018/01/09/JavaReflectionButMuchFaster.html#_static_methodhandles_update_on_2018_01_11\" rel=\"nofollow noreferrer\">Java Reflection, but much faster</a>, which explores reflection vs. method handle performance as you want.</p>\n"},{"tags":[],"owner":{"account_id":5998820,"reputation":12656,"user_id":4712734,"display_name":"DuncG"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695201720,"creation_date":1695199075,"answer_id":77140693,"question_id":77137831,"body_markdown":"See answer by scrhartley. Two additional benchmarks for direct call, and with lookup method handle directly as static final field (not via reflection) shows better results:\r\n\r\n    /** Test POJO directly */\r\n    @Benchmark\r\n    public Number direct() throws Throwable {\r\n        return source.getNumber();\r\n    }\r\n    private static final Lookup     LOOKUP = MethodHandles.lookup();\r\n    /** Lookup details of an instance method handle on a Java class */\r\n    static MethodHandle findInstanceMH(Class&lt;?&gt; cls, String callback, MethodType methodType) {\r\n        try {\r\n            return LOOKUP.findVirtual(cls, callback, methodType);\r\n        } catch (NoSuchMethodException | IllegalAccessException e) {\r\n            throw new Error(&quot;Not found callback: &quot;+callback);\r\n        }\r\n    }\r\n    private static final MethodHandle MH  = findInstanceMH(POJO.class, &quot;getNumber&quot;, MethodType.methodType(AtomicInteger.class));\r\n    private static final MethodHandle MHN = MH.asType(MH.type().changeReturnType(Number.class));\r\n\r\n    /** Test static final MethodHandle obtained by MH lookup */\r\n    @Benchmark\r\n    public Number methodHandleNormal() throws Throwable {\r\n        return  (Number) MHN.invokeExact(source);\r\n    }\r\n\r\nWith the new benchmarks you should see method handle version much quicker than reflection and compares well with direct call:\r\n\r\n    Benchmark                                  Mode   Cnt   Score   Error  Units\r\n    AccessorBenchmark.direct                   avgt  1000   4.925 &#177; 0.047  ns/op\r\n    AccessorBenchmark.methodHandle             avgt  1000  10.327 &#177; 0.066  ns/op\r\n    AccessorBenchmark.methodHandleInvokeExact  avgt  1000   9.478 &#177; 0.066  ns/op\r\n    AccessorBenchmark.methodHandleNormal       avgt  1000   5.063 &#177; 0.054  ns/op\r\n    AccessorBenchmark.reflection               avgt  1000  17.477 &#177; 0.116  ns/op\r\n","title":"`MethodHandle` slower than Reflection when accessing Object","body":"<p>See answer by scrhartley. Two additional benchmarks for direct call, and with lookup method handle directly as static final field (not via reflection) shows better results:</p>\n<pre><code>/** Test POJO directly */\n@Benchmark\npublic Number direct() throws Throwable {\n    return source.getNumber();\n}\nprivate static final Lookup     LOOKUP = MethodHandles.lookup();\n/** Lookup details of an instance method handle on a Java class */\nstatic MethodHandle findInstanceMH(Class&lt;?&gt; cls, String callback, MethodType methodType) {\n    try {\n        return LOOKUP.findVirtual(cls, callback, methodType);\n    } catch (NoSuchMethodException | IllegalAccessException e) {\n        throw new Error(&quot;Not found callback: &quot;+callback);\n    }\n}\nprivate static final MethodHandle MH  = findInstanceMH(POJO.class, &quot;getNumber&quot;, MethodType.methodType(AtomicInteger.class));\nprivate static final MethodHandle MHN = MH.asType(MH.type().changeReturnType(Number.class));\n\n/** Test static final MethodHandle obtained by MH lookup */\n@Benchmark\npublic Number methodHandleNormal() throws Throwable {\n    return  (Number) MHN.invokeExact(source);\n}\n</code></pre>\n<p>With the new benchmarks you should see method handle version much quicker than reflection and compares well with direct call:</p>\n<pre><code>Benchmark                                  Mode   Cnt   Score   Error  Units\nAccessorBenchmark.direct                   avgt  1000   4.925 ± 0.047  ns/op\nAccessorBenchmark.methodHandle             avgt  1000  10.327 ± 0.066  ns/op\nAccessorBenchmark.methodHandleInvokeExact  avgt  1000   9.478 ± 0.066  ns/op\nAccessorBenchmark.methodHandleNormal       avgt  1000   5.063 ± 0.054  ns/op\nAccessorBenchmark.reflection               avgt  1000  17.477 ± 0.116  ns/op\n</code></pre>\n"}],"owner":{"account_id":3736112,"reputation":988,"user_id":3107019,"display_name":"JackPGreen"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":94,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1695201720,"creation_date":1695155700,"question_id":77137831,"body_markdown":"I would like to call a method via reflection in the most performant way possible.\r\n\r\nThe method returns an Object.\r\n\r\nI&#39;ve implemented this using both reflection and MethodHandles, I was expecting MethodHandle to be faster - but that&#39;s not what I&#39;m seeing (~20-40% slower).\r\n\r\nTake the following JMH benchmark:\r\n\r\n```\r\nimport org.openjdk.jmh.annotations.*;\r\nimport java.lang.invoke.MethodHandle;\r\nimport java.lang.invoke.MethodHandles;\r\nimport java.lang.reflect.Method;\r\nimport java.util.concurrent.TimeUnit;\r\nimport java.util.concurrent.atomic.AtomicInteger;\r\n\r\n@BenchmarkMode(Mode.AverageTime)\r\n@OutputTimeUnit(TimeUnit.NANOSECONDS)\r\n@Warmup(iterations = 5, time = 1, timeUnit = TimeUnit.SECONDS)\r\n@Measurement(iterations = 200, time = 10, timeUnit = TimeUnit.MILLISECONDS)\r\n@State(Scope.Benchmark)\r\npublic class AccessorBenchmark {\r\n    private static final Object[] EMPTY_ARGS = new Object[0];\r\n\r\n    private POJO source;\r\n    private Method method;\r\n    private MethodHandle methodHandle;\r\n    private MethodHandle methodHandleModifiedReturnType;\r\n\r\n    @Setup\r\n    public void setup() throws ReflectiveOperationException {\r\n        source = new POJO();\r\n\r\n        method = source.getClass().getDeclaredMethod(&quot;getNumber&quot;);\r\n        \r\n        methodHandle = MethodHandles.lookup().unreflect(method);\r\n        methodHandleModifiedReturnType = methodHandle.asType(methodHandle.type().changeReturnType(Number.class));\r\n    }\r\n\r\n    @Benchmark\r\n    public Number reflection() throws Throwable {\r\n        return (Number) method.invoke(source, EMPTY_ARGS);\r\n    }\r\n\r\n    @Benchmark\r\n    public Number methodHandle() throws Throwable {\r\n        return (Number) methodHandle.invoke(source);\r\n    }\r\n\r\n    @Benchmark\r\n    public Number methodHandleInvokeExact() throws Throwable {\r\n        return  (Number) methodHandleModifiedReturnType.invokeExact(source);\r\n    }\r\n\r\n    public class POJO {\r\n        private final AtomicInteger counter = new AtomicInteger();\r\n\r\n        public AtomicInteger getNumber() {\r\n            return counter;\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nThe following result is returned with Java 17:\r\n\r\n```\r\nBenchmark                                     Mode   Cnt   Score    Error   Units\r\nAccessorBenchmark.methodHandle                avgt  1000   2.856 &#177;  0.004   ns/op\r\nAccessorBenchmark.methodHandleInvokeExact     avgt  1000   2.359 &#177;  0.003   ns/op\r\nAccessorBenchmark.reflection                  avgt  1000   2.017 &#177;  0.002   ns/op\r\n```\r\n\r\nAny ideas?","title":"`MethodHandle` slower than Reflection when accessing Object","body":"<p>I would like to call a method via reflection in the most performant way possible.</p>\n<p>The method returns an Object.</p>\n<p>I've implemented this using both reflection and MethodHandles, I was expecting MethodHandle to be faster - but that's not what I'm seeing (~20-40% slower).</p>\n<p>Take the following JMH benchmark:</p>\n<pre><code>import org.openjdk.jmh.annotations.*;\nimport java.lang.invoke.MethodHandle;\nimport java.lang.invoke.MethodHandles;\nimport java.lang.reflect.Method;\nimport java.util.concurrent.TimeUnit;\nimport java.util.concurrent.atomic.AtomicInteger;\n\n@BenchmarkMode(Mode.AverageTime)\n@OutputTimeUnit(TimeUnit.NANOSECONDS)\n@Warmup(iterations = 5, time = 1, timeUnit = TimeUnit.SECONDS)\n@Measurement(iterations = 200, time = 10, timeUnit = TimeUnit.MILLISECONDS)\n@State(Scope.Benchmark)\npublic class AccessorBenchmark {\n    private static final Object[] EMPTY_ARGS = new Object[0];\n\n    private POJO source;\n    private Method method;\n    private MethodHandle methodHandle;\n    private MethodHandle methodHandleModifiedReturnType;\n\n    @Setup\n    public void setup() throws ReflectiveOperationException {\n        source = new POJO();\n\n        method = source.getClass().getDeclaredMethod(&quot;getNumber&quot;);\n        \n        methodHandle = MethodHandles.lookup().unreflect(method);\n        methodHandleModifiedReturnType = methodHandle.asType(methodHandle.type().changeReturnType(Number.class));\n    }\n\n    @Benchmark\n    public Number reflection() throws Throwable {\n        return (Number) method.invoke(source, EMPTY_ARGS);\n    }\n\n    @Benchmark\n    public Number methodHandle() throws Throwable {\n        return (Number) methodHandle.invoke(source);\n    }\n\n    @Benchmark\n    public Number methodHandleInvokeExact() throws Throwable {\n        return  (Number) methodHandleModifiedReturnType.invokeExact(source);\n    }\n\n    public class POJO {\n        private final AtomicInteger counter = new AtomicInteger();\n\n        public AtomicInteger getNumber() {\n            return counter;\n        }\n    }\n}\n</code></pre>\n<p>The following result is returned with Java 17:</p>\n<pre><code>Benchmark                                     Mode   Cnt   Score    Error   Units\nAccessorBenchmark.methodHandle                avgt  1000   2.856 ±  0.004   ns/op\nAccessorBenchmark.methodHandleInvokeExact     avgt  1000   2.359 ±  0.003   ns/op\nAccessorBenchmark.reflection                  avgt  1000   2.017 ±  0.002   ns/op\n</code></pre>\n<p>Any ideas?</p>\n"},{"tags":["java","spring","testing"],"comments":[{"owner":{"account_id":2139538,"reputation":42501,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":1,"creation_date":1695201966,"post_id":77140967,"comment_id":135991355,"body_markdown":"&quot;How was RoleServiceImpl obtained then?&quot; Do you noticed any particular annotation on that field?","body":"&quot;How was RoleServiceImpl obtained then?&quot; Do you noticed any particular annotation on that field?"},{"owner":{"account_id":1658807,"reputation":31819,"user_id":1527544,"accept_rate":54,"display_name":"Antoniossss"},"score":0,"creation_date":1695202062,"post_id":77140967,"comment_id":135991379,"body_markdown":"You want to switch to `@MockBean` and `@Autowire` so less questions will be asked in the future.","body":"You want to switch to <code>@MockBean</code> and <code>@Autowire</code> so less questions will be asked in the future."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1695202469,"post_id":77140967,"comment_id":135991448,"body_markdown":"Spring Boot enables support for Mockito, so mockito. However this test doesn&#39;t make sense and would work the same with a simple `@ExtendWith(MockitoExtension.class)` instead and it would run much faster as well.","body":"Spring Boot enables support for Mockito, so mockito. However this test doesn&#39;t make sense and would work the same with a simple <code>@ExtendWith(MockitoExtension.class)</code> instead and it would run much faster as well."},{"owner":{"account_id":28965224,"reputation":321,"user_id":22186847,"display_name":"JoreJoh"},"score":0,"creation_date":1695202479,"post_id":77140967,"comment_id":135991451,"body_markdown":"@Antoniossss actually, that would be less preferable since it&#39;s a unit test. I don&#39;t want my service test to fail just because the DAO is acting up","body":"@Antoniossss actually, that would be less preferable since it&#39;s a unit test. I don&#39;t want my service test to fail just because the DAO is acting up"},{"owner":{"account_id":28965224,"reputation":321,"user_id":22186847,"display_name":"JoreJoh"},"score":0,"creation_date":1695202512,"post_id":77140967,"comment_id":135991455,"body_markdown":"@Michael `@InjectMocks` doesn&#39;t tell me who creates the instance","body":"@Michael <code>@InjectMocks</code> doesn&#39;t tell me who creates the instance"},{"owner":{"account_id":1658807,"reputation":31819,"user_id":1527544,"accept_rate":54,"display_name":"Antoniossss"},"score":0,"creation_date":1695202551,"post_id":77140967,"comment_id":135991468,"body_markdown":"@JoreJoh no it is not, it is `@springboot` test and as such it is far from unit. (unless something changed that I am not aware of)","body":"@JoreJoh no it is not, it is <code>@springboot</code> test and as such it is far from unit. (unless something changed that I am not aware of)"},{"owner":{"account_id":28965224,"reputation":321,"user_id":22186847,"display_name":"JoreJoh"},"score":0,"creation_date":1695202611,"post_id":77140967,"comment_id":135991486,"body_markdown":"@M.Deinum `@ExtendWith(MockitoExtension.class)` gives an exception: `org.mockito.exceptions.misusing.UnnecessaryStubbingException: \nUnnecessary stubbings detected.\nClean &amp; maintainable test code requires zero unnecessary code.\nFollowing stubbings are unnecessary (click to navigate to relevant line of code):\n  1. -&gt; at pp.spring_bootstrap.service.RoleServiceImplTest.setUp(RoleServiceImplTest.java:29)\nPlease remove unnecessary stubbings or use &#39;lenient&#39; strictness. More info: javadoc for UnnecessaryStubbingException class.`","body":"@M.Deinum <code>@ExtendWith(MockitoExtension.class)</code> gives an exception: <code>org.mockito.exceptions.misusing.UnnecessaryStubbingException&zwnj;&#8203;:  Unnecessary stubbings detected. Clean &amp; maintainable test code requires zero unnecessary code. Following stubbings are unnecessary (click to navigate to relevant line of code):   1. -&gt; at pp.spring_bootstrap.service.RoleServiceImplTest.setUp(RoleSe&zwnj;&#8203;rviceImplTest.java:2&zwnj;&#8203;9) Please remove unnecessary stubbings or use &#39;lenient&#39; strictness. More info: javadoc for UnnecessaryStubbingException class.</code>"},{"owner":{"account_id":28965224,"reputation":321,"user_id":22186847,"display_name":"JoreJoh"},"score":0,"creation_date":1695202724,"post_id":77140967,"comment_id":135991508,"body_markdown":"@Antoniossss I understand what you mean, but the purpose of the test is to test the service. I haven&#39;t removed `@SpringBootTest` because the test doesn&#39;t work without it","body":"@Antoniossss I understand what you mean, but the purpose of the test is to test the service. I haven&#39;t removed <code>@SpringBootTest</code> because the test doesn&#39;t work without it"},{"owner":{"account_id":2139538,"reputation":42501,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":0,"creation_date":1695202750,"post_id":77140967,"comment_id":135991512,"body_markdown":"&quot;*@InjectMocks doesn&#39;t tell me who creates the instance*&quot; Please, read the linked question. &quot;**@InjectMocks creates an instance of the class**&quot;","body":"&quot;<i>@InjectMocks doesn&#39;t tell me who creates the instance</i>&quot; Please, read the linked question. &quot;<b>@InjectMocks creates an instance of the class</b>&quot;"},{"owner":{"account_id":1658807,"reputation":31819,"user_id":1527544,"accept_rate":54,"display_name":"Antoniossss"},"score":0,"creation_date":1695202772,"post_id":77140967,"comment_id":135991515,"body_markdown":"Remove `SpringBootTest` and run it as plain junit tests if you want it to be real unit test(with Mockito extension so test actually will care about your mockito annotattion). Otherwise it will try to boot full spring context which you will not even use.","body":"Remove <code>SpringBootTest</code> and run it as plain junit tests if you want it to be real unit test(with Mockito extension so test actually will care about your mockito annotattion). Otherwise it will try to boot full spring context which you will not even use."},{"owner":{"account_id":28965224,"reputation":321,"user_id":22186847,"display_name":"JoreJoh"},"score":0,"creation_date":1695203718,"post_id":77140967,"comment_id":135991724,"body_markdown":"@Michael then why doesn&#39;t it work without the annotation? See [this question](https://stackoverflow.com/questions/77141282/unnecessarystubbingexception-unnecessary-stubbings-detected) for more info","body":"@Michael then why doesn&#39;t it work without the annotation? See <a href=\"https://stackoverflow.com/questions/77141282/unnecessarystubbingexception-unnecessary-stubbings-detected\">this question</a> for more info"},{"owner":{"account_id":28965224,"reputation":321,"user_id":22186847,"display_name":"JoreJoh"},"score":0,"creation_date":1695203830,"post_id":77140967,"comment_id":135991750,"body_markdown":"@Antoniossss I [tried](https://stackoverflow.com/questions/77141282/unnecessarystubbingexception-unnecessary-stubbings-detected)","body":"@Antoniossss I <a href=\"https://stackoverflow.com/questions/77141282/unnecessarystubbingexception-unnecessary-stubbings-detected\">tried</a>"},{"owner":{"account_id":1658807,"reputation":31819,"user_id":1527544,"accept_rate":54,"display_name":"Antoniossss"},"score":0,"creation_date":1695204642,"post_id":77140967,"comment_id":135991942,"body_markdown":"And you have unused stubbing excetpion which is &quot;fine&quot; in terms of this post.","body":"And you have unused stubbing excetpion which is &quot;fine&quot; in terms of this post."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1695219342,"post_id":77140967,"comment_id":135995390,"body_markdown":"The error from mockito is due to setting to much behavior which isn&#39;t used. Spring Boot will by default create lenient mocks (it configures mockito that way) which doesn&#39;t throw an exception.","body":"The error from mockito is due to setting to much behavior which isn&#39;t used. Spring Boot will by default create lenient mocks (it configures mockito that way) which doesn&#39;t throw an exception."}],"owner":{"account_id":28965224,"reputation":321,"user_id":22186847,"display_name":"JoreJoh"},"comment_count":14,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1695202007,"answer_count":0,"score":0,"last_activity_date":1695201644,"creation_date":1695201268,"question_id":77140967,"body_markdown":"I tried to test this:\r\n```java\r\npackage pp.spring_bootstrap.service;\r\n\r\nimport org.springframework.stereotype.Service;\r\nimport org.springframework.transaction.annotation.Transactional;\r\nimport pp.spring_bootstrap.dao.RoleDao;\r\nimport pp.spring_bootstrap.models.Role;\r\n\r\nimport java.util.HashSet;\r\nimport java.util.Set;\r\n\r\n@Service\r\n@Transactional(readOnly = true)\r\npublic class RoleServiceImpl implements RoleService {\r\n    private final RoleDao roleDao;\r\n\r\n    public RoleServiceImpl(RoleDao roleDao) {\r\n        this.roleDao = roleDao;\r\n    }\r\n\r\n    @Override\r\n    public Role getRoleByName(String name) {\r\n        return roleDao.findByAuthority(name);\r\n    }\r\n\r\n    @Override\r\n    public Set&lt;Role&gt; getAdminRoleSet() {\r\n        return new HashSet&lt;&gt;(roleDao.findByAuthorityOrAuthority(&quot;USER&quot;, &quot;ADMIN&quot;));\r\n    }\r\n}\r\n```\r\nHere&#39;s my test:\r\n```java\r\n@SpringBootTest\r\nclass RoleServiceImplTest {\r\n    @InjectMocks\r\n    RoleServiceImpl roleService;\r\n    @Mock\r\n    RoleDao roleDao;\r\n    static final String USER = &quot;USER&quot;;\r\n    static final String ADMIN = &quot;ADMIN&quot;;\r\n\r\n    @BeforeEach\r\n    void setUp() {\r\n        when(roleDao.findByAuthority(USER)).thenReturn(new Role(USER));\r\n        when(roleDao.findByAuthorityOrAuthority(USER, ADMIN))\r\n                .thenReturn(List.of(new Role(USER), new Role(ADMIN)));\r\n    }\r\n\r\n    @Test\r\n    void getRoleByName() {\r\n        assertThat(roleService.getRoleByName(USER)).extracting(Role::getAuthority).isEqualTo(USER);\r\n        verify(roleDao, times(1)).findByAuthority(USER);\r\n    }\r\n\r\n    @Test\r\n    void getAdminRoleSet() {\r\n        var adminRoles = roleService.getAdminRoleSet().stream()\r\n                .map(Role::getAuthority)\r\n                .toList();\r\n        assertThat(adminRoles.size()).isEqualTo(2);\r\n        assertThat(adminRoles).asList().contains(ADMIN, USER);\r\n        verify(roleDao, times(1)).findByAuthorityOrAuthority(USER, ADMIN);\r\n    }\r\n}\r\n```\r\nIt passes, but there&#39;s something wrong. For instance, notice I didn&#39;t explicitly autowire test fields. Nevertheless, I didn&#39;t get any NPEs. **1) How was `RoleServiceImpl` obtained then?** Since I didn&#39;t autowire anything, not explicity at least, it seems it was created by Mockito using a regular `new` (as opposed to being received from a Spring container). However, if I remove `@SpringBootTest`, I start to get NPEs. **2) Does `@SpringBootTest` implicitly autowire my fields?**\r\n\r\n[This answer][1] may be useful, but doesn&#39;t address the questions I have\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/66388593/22186847","title":"Who creates instances I inject mocks into: Mockito or Spring?","body":"<p>I tried to test this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package pp.spring_bootstrap.service;\n\nimport org.springframework.stereotype.Service;\nimport org.springframework.transaction.annotation.Transactional;\nimport pp.spring_bootstrap.dao.RoleDao;\nimport pp.spring_bootstrap.models.Role;\n\nimport java.util.HashSet;\nimport java.util.Set;\n\n@Service\n@Transactional(readOnly = true)\npublic class RoleServiceImpl implements RoleService {\n    private final RoleDao roleDao;\n\n    public RoleServiceImpl(RoleDao roleDao) {\n        this.roleDao = roleDao;\n    }\n\n    @Override\n    public Role getRoleByName(String name) {\n        return roleDao.findByAuthority(name);\n    }\n\n    @Override\n    public Set&lt;Role&gt; getAdminRoleSet() {\n        return new HashSet&lt;&gt;(roleDao.findByAuthorityOrAuthority(&quot;USER&quot;, &quot;ADMIN&quot;));\n    }\n}\n</code></pre>\n<p>Here's my test:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootTest\nclass RoleServiceImplTest {\n    @InjectMocks\n    RoleServiceImpl roleService;\n    @Mock\n    RoleDao roleDao;\n    static final String USER = &quot;USER&quot;;\n    static final String ADMIN = &quot;ADMIN&quot;;\n\n    @BeforeEach\n    void setUp() {\n        when(roleDao.findByAuthority(USER)).thenReturn(new Role(USER));\n        when(roleDao.findByAuthorityOrAuthority(USER, ADMIN))\n                .thenReturn(List.of(new Role(USER), new Role(ADMIN)));\n    }\n\n    @Test\n    void getRoleByName() {\n        assertThat(roleService.getRoleByName(USER)).extracting(Role::getAuthority).isEqualTo(USER);\n        verify(roleDao, times(1)).findByAuthority(USER);\n    }\n\n    @Test\n    void getAdminRoleSet() {\n        var adminRoles = roleService.getAdminRoleSet().stream()\n                .map(Role::getAuthority)\n                .toList();\n        assertThat(adminRoles.size()).isEqualTo(2);\n        assertThat(adminRoles).asList().contains(ADMIN, USER);\n        verify(roleDao, times(1)).findByAuthorityOrAuthority(USER, ADMIN);\n    }\n}\n</code></pre>\n<p>It passes, but there's something wrong. For instance, notice I didn't explicitly autowire test fields. Nevertheless, I didn't get any NPEs. <strong>1) How was <code>RoleServiceImpl</code> obtained then?</strong> Since I didn't autowire anything, not explicity at least, it seems it was created by Mockito using a regular <code>new</code> (as opposed to being received from a Spring container). However, if I remove <code>@SpringBootTest</code>, I start to get NPEs. <strong>2) Does <code>@SpringBootTest</code> implicitly autowire my fields?</strong></p>\n<p><a href=\"https://stackoverflow.com/a/66388593/22186847\">This answer</a> may be useful, but doesn't address the questions I have</p>\n"},{"tags":["java","spring","resilience4j","bulkhead"],"answers":[{"tags":[],"owner":{"account_id":2012119,"reputation":485,"user_id":1800319,"display_name":"Raghvendra Garg"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1695201581,"creation_date":1695201581,"answer_id":77141004,"question_id":76966352,"body_markdown":"Resilience4j uses spring-aop to manage aspects which means when invoked from the same class will not result in invoking the aspect code. in your case code in @Bulkhead aspect does not comes into picture when invoking from the same class but when you invoke from another bean it comes into play.\r\nHere is the excerpt from Spring documentation\r\n\r\n&gt; The key thing to understand here is that the client code inside the main(..) of the Main class has a reference to the proxy. This means that method calls on that object reference will be calls on the proxy, and as such the proxy will be able to delegate to all of the interceptors (advice) that are relevant to that particular method call. However, once the call has finally reached the target object, the SimplePojo reference in this case, any method calls that it may make on itself, such as this.bar() or this.foo(), are going to be invoked against the this reference, and not the proxy. This has important implications. It means that self-invocation is not going to result in the advice associated with a method invocation getting a chance to execute.\r\n\r\nhttps://docs.spring.io/spring-framework/reference/core/aop/proxying.html#aop-understanding-aop-proxies\r\n\r\n ","title":"Why @Bulkhead method not working when I call it from the same class","body":"<p>Resilience4j uses spring-aop to manage aspects which means when invoked from the same class will not result in invoking the aspect code. in your case code in @Bulkhead aspect does not comes into picture when invoking from the same class but when you invoke from another bean it comes into play.\nHere is the excerpt from Spring documentation</p>\n<blockquote>\n<p>The key thing to understand here is that the client code inside the main(..) of the Main class has a reference to the proxy. This means that method calls on that object reference will be calls on the proxy, and as such the proxy will be able to delegate to all of the interceptors (advice) that are relevant to that particular method call. However, once the call has finally reached the target object, the SimplePojo reference in this case, any method calls that it may make on itself, such as this.bar() or this.foo(), are going to be invoked against the this reference, and not the proxy. This has important implications. It means that self-invocation is not going to result in the advice associated with a method invocation getting a chance to execute.</p>\n</blockquote>\n<p><a href=\"https://docs.spring.io/spring-framework/reference/core/aop/proxying.html#aop-understanding-aop-proxies\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-framework/reference/core/aop/proxying.html#aop-understanding-aop-proxies</a></p>\n"}],"owner":{"account_id":15579574,"reputation":17,"user_id":11239777,"display_name":"myfidan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77141004,"answer_count":1,"score":0,"last_activity_date":1695201581,"creation_date":1692853795,"question_id":76966352,"body_markdown":"I have a @Bulkhead method like this\r\n\r\n    @GetMapping(&quot;/bulkhead&quot;)\r\n    @Bulkhead(name = USER_SERVICE, fallbackMethod = &quot;bulkheadDefault&quot;)\r\n    public ResponseEntity&lt;String&gt; testBulkhead(){\r\n        logger.info(&quot;call &quot; + Thread.currentThread().getName());\r\n        String response = restTemplate.getForObject(BASEURL_BULKHEAD, String.class);\r\n        logger.info(LocalTime.now() + &quot; Call processing finished = &quot; + Thread.currentThread().getName());\r\n        return ResponseEntity.ok(response);\r\n    }\r\n\r\nWhen I call this method from another class by creating 10 threads it works fine\r\n\r\n    for (int i=0; i&lt;10; i++)\r\n            new Thread(()-&gt; userServiceApplication.testBulkhead()).start();\r\n\r\nBut when I call it like above in the same class all threads call bulkhead method sequentially.\r\nAnyone can explain why this is happening?","title":"Why @Bulkhead method not working when I call it from the same class","body":"<p>I have a @Bulkhead method like this</p>\n<pre><code>@GetMapping(&quot;/bulkhead&quot;)\n@Bulkhead(name = USER_SERVICE, fallbackMethod = &quot;bulkheadDefault&quot;)\npublic ResponseEntity&lt;String&gt; testBulkhead(){\n    logger.info(&quot;call &quot; + Thread.currentThread().getName());\n    String response = restTemplate.getForObject(BASEURL_BULKHEAD, String.class);\n    logger.info(LocalTime.now() + &quot; Call processing finished = &quot; + Thread.currentThread().getName());\n    return ResponseEntity.ok(response);\n}\n</code></pre>\n<p>When I call this method from another class by creating 10 threads it works fine</p>\n<pre><code>for (int i=0; i&lt;10; i++)\n        new Thread(()-&gt; userServiceApplication.testBulkhead()).start();\n</code></pre>\n<p>But when I call it like above in the same class all threads call bulkhead method sequentially.\nAnyone can explain why this is happening?</p>\n"},{"tags":["java","azure","azure-blob-storage"],"comments":[{"owner":{"account_id":9273165,"reputation":3381,"user_id":6886501,"display_name":"Markus Meyer"},"score":0,"creation_date":1695197169,"post_id":77140432,"comment_id":135990367,"body_markdown":"Are you using [Azure Blob Storage client library for Java](https://learn.microsoft.com/en-us/azure/storage/blobs/storage-quickstart-blobs-java?tabs=powershell%2Cmanaged-identity%2Croles-azure-portal%2Csign-in-azure-cli#code-examples)? Can you please share your current code?","body":"Are you using <a href=\"https://learn.microsoft.com/en-us/azure/storage/blobs/storage-quickstart-blobs-java?tabs=powershell%2Cmanaged-identity%2Croles-azure-portal%2Csign-in-azure-cli#code-examples\" rel=\"nofollow noreferrer\">Azure Blob Storage client library for Java</a>? Can you please share your current code?"},{"owner":{"account_id":14548690,"reputation":11,"user_id":10508252,"display_name":"Jelena"},"score":0,"creation_date":1695200498,"post_id":77140432,"comment_id":135991043,"body_markdown":"I&#39;ve updated the question with the code.","body":"I&#39;ve updated the question with the code."}],"answers":[{"tags":[],"owner":{"account_id":8001335,"reputation":570,"user_id":6036058,"display_name":"Florian Vuillemot"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695199693,"creation_date":1695199693,"answer_id":77140775,"question_id":77140432,"body_markdown":"You can use the `downloadToFile` method of the [BlobClientBase][1] class.\r\n\r\n[Here an example][3] from the [Markus][2] documentation link.\r\n\r\n\r\n  [1]: https://learn.microsoft.com/en-us/java/api/com.azure.storage.blob.specialized.blobclientbase?view=azure-java-stable\r\n  [2]: https://stackoverflow.com/users/6886501/markus-meyer\r\n  [3]: https://learn.microsoft.com/en-us/azure/storage/blobs/storage-quickstart-blobs-java?tabs=powershell%2Cmanaged-identity%2Croles-azure-portal%2Csign-in-azure-cli#download-blobs","title":"How to read data from specific block in azure blob?","body":"<p>You can use the <code>downloadToFile</code> method of the <a href=\"https://learn.microsoft.com/en-us/java/api/com.azure.storage.blob.specialized.blobclientbase?view=azure-java-stable\" rel=\"nofollow noreferrer\">BlobClientBase</a> class.</p>\n<p><a href=\"https://learn.microsoft.com/en-us/azure/storage/blobs/storage-quickstart-blobs-java?tabs=powershell%2Cmanaged-identity%2Croles-azure-portal%2Csign-in-azure-cli#download-blobs\" rel=\"nofollow noreferrer\">Here an example</a> from the <a href=\"https://stackoverflow.com/users/6886501/markus-meyer\">Markus</a> documentation link.</p>\n"}],"owner":{"account_id":14548690,"reputation":11,"user_id":10508252,"display_name":"Jelena"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1695217281,"answer_count":1,"score":0,"last_activity_date":1695201424,"creation_date":1695196861,"question_id":77140432,"body_markdown":"Is there a way to read data from specific block in azure blob using Java?\r\n\r\nCan someone help me with this?\r\n\r\nI managed to read the whole blob and to list the blocks in it, but cannot find a way to read data from the specific block.\r\n\r\n\r\n   \r\n\r\n     public class App2 {\r\n    \r\n        public static void main(String[] args) {\r\n    \r\n            DefaultAzureCredential defaultCredential = new DefaultAzureCredentialBuilder().build();\r\n    \r\n            BlobServiceClient blobServiceClient = new BlobServiceClientBuilder()\r\n                    .endpoint(&quot;https://{storage-account}.blob.core.windows.net/&quot;)\r\n                    .credential(defaultCredential)\r\n                    .buildClient();\r\n    \r\n            BlobContainerClient blobContainerClient = blobServiceClient.getBlobContainerClient(&quot;insights-logs-networksecuritygroupflowevent&quot;);\r\n    \r\n            for (BlobItem blobItem : blobContainerClient.listBlobs()) {\r\n                BlobClient blobClient = blobContainerClient.getBlobClient(blobItem.getName());\r\n    \r\n                BlockBlobClient blockBlobClient = blobClient.getBlockBlobClient();\r\n                List&lt;Block&gt; list = blockBlobClient.listBlocks(BlockListType.COMMITTED).getCommittedBlocks();\r\n    \r\n                list.forEach(block -&gt; {\r\n                    System.out.println(block.getName() + &quot;, &quot; + block.getSizeLong());\r\n                });\r\n    \r\n                blobClient.downloadToFile(&quot;blob&quot; + UUID.randomUUID() + &quot;.json&quot;);\r\n            }\r\n        }\r\n    \r\n    }","title":"How to read data from specific block in azure blob?","body":"<p>Is there a way to read data from specific block in azure blob using Java?</p>\n<p>Can someone help me with this?</p>\n<p>I managed to read the whole blob and to list the blocks in it, but cannot find a way to read data from the specific block.</p>\n<pre><code> public class App2 {\n\n    public static void main(String[] args) {\n\n        DefaultAzureCredential defaultCredential = new DefaultAzureCredentialBuilder().build();\n\n        BlobServiceClient blobServiceClient = new BlobServiceClientBuilder()\n                .endpoint(&quot;https://{storage-account}.blob.core.windows.net/&quot;)\n                .credential(defaultCredential)\n                .buildClient();\n\n        BlobContainerClient blobContainerClient = blobServiceClient.getBlobContainerClient(&quot;insights-logs-networksecuritygroupflowevent&quot;);\n\n        for (BlobItem blobItem : blobContainerClient.listBlobs()) {\n            BlobClient blobClient = blobContainerClient.getBlobClient(blobItem.getName());\n\n            BlockBlobClient blockBlobClient = blobClient.getBlockBlobClient();\n            List&lt;Block&gt; list = blockBlobClient.listBlocks(BlockListType.COMMITTED).getCommittedBlocks();\n\n            list.forEach(block -&gt; {\n                System.out.println(block.getName() + &quot;, &quot; + block.getSizeLong());\n            });\n\n            blobClient.downloadToFile(&quot;blob&quot; + UUID.randomUUID() + &quot;.json&quot;);\n        }\n    }\n\n}\n</code></pre>\n"},{"tags":["java","protocol-buffers","grpc","protoc"],"comments":[{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":0,"creation_date":1594638235,"post_id":62874455,"comment_id":111185073,"body_markdown":"&quot;I am not sure why its checking for &quot;csharp_namespace&quot;&quot; Because that&#39;s in the timestamp.proto file.","body":"&quot;I am not sure why its checking for &quot;csharp_namespace&quot;&quot; Because that&#39;s in the timestamp.proto file."},{"owner":{"account_id":5199414,"reputation":1366,"user_id":4159389,"accept_rate":0,"display_name":"Rahul Vedpathak"},"score":0,"creation_date":1594638371,"post_id":62874455,"comment_id":111185134,"body_markdown":"Yeah but why its looking for that. And I dont want to generate any classes for csharp. So how to get rid of this error ?","body":"Yeah but why its looking for that. And I dont want to generate any classes for csharp. So how to get rid of this error ?"},{"owner":{"account_id":301516,"reputation":34141,"user_id":609290,"accept_rate":62,"display_name":"DazWilkin"},"score":0,"creation_date":1594661758,"post_id":62874455,"comment_id":111197371,"body_markdown":"I suspect it&#39;s red-herring and the issue is really `&quot;google.protobuf.Timestamp&quot; is not defined`. You&#39;ll want to reference `google/protobuf/timestamp.proto` in your `--proto_path` when you generate your source. Timestamp is bundled with protoc in `./include/google/protobuf/timestamp.proto`. And then you&#39;ll want to import [Timestamps](https://developers.google.com/protocol-buffers/docs/reference/java/com/google/protobuf/util/Timestamps) in your implementation.","body":"I suspect it&#39;s red-herring and the issue is really <code>&quot;google.protobuf.Timestamp&quot; is not defined</code>. You&#39;ll want to reference <code>google&#47;protobuf&#47;timestamp.proto</code> in your <code>--proto_path</code> when you generate your source. Timestamp is bundled with protoc in <code>.&#47;include&#47;google&#47;protobuf&#47;timestamp.proto</code>. And then you&#39;ll want to import <a href=\"https://developers.google.com/protocol-buffers/docs/reference/java/com/google/protobuf/util/Timestamps\" rel=\"nofollow noreferrer\">Timestamps</a> in your implementation."},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":0,"creation_date":1594725286,"post_id":62874455,"comment_id":111219985,"body_markdown":"@RahulVedpathak it is importing the file you asked it to import, via the import statement. That file contains things that may or may not be relevant to you, but all are processed, because there is no way to know that they are not relevant to you.","body":"@RahulVedpathak it is importing the file you asked it to import, via the import statement. That file contains things that may or may not be relevant to you, but all are processed, because there is no way to know that they are not relevant to you."}],"answers":[{"tags":[],"owner":{"account_id":17343428,"reputation":310,"user_id":12563520,"display_name":"Austin Pe&#241;a"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1648642880,"creation_date":1595971186,"answer_id":63142927,"question_id":62874455,"body_markdown":"If you want protoc to automatically import something, it needs to be in an /include folder next to your protoc binary.\r\n\r\n[Reference][1]\r\n\r\n&gt; If I remember correctly, protoc looks for includes relative to the protoc binary. So if protoc is in /usr/local/bin, then it will look in /usr/local/include.\r\n\r\nThis worked perfectly for me on Windows to solve:\r\n\r\n```\r\nImport &quot;google/protobuf/wrappers.proto&quot; was not found or had errors.\r\n```\r\n\r\n\r\n  [1]: https://github.com/golang/protobuf/issues/694#issuecomment-431522402","title":"Import &quot;google/protobuf/timestamp.proto&quot; was not found or had errors","body":"<p>If you want protoc to automatically import something, it needs to be in an /include folder next to your protoc binary.</p>\n<p><a href=\"https://github.com/golang/protobuf/issues/694#issuecomment-431522402\" rel=\"nofollow noreferrer\">Reference</a></p>\n<blockquote>\n<p>If I remember correctly, protoc looks for includes relative to the protoc binary. So if protoc is in /usr/local/bin, then it will look in /usr/local/include.</p>\n</blockquote>\n<p>This worked perfectly for me on Windows to solve:</p>\n<pre><code>Import &quot;google/protobuf/wrappers.proto&quot; was not found or had errors.\n</code></pre>\n"}],"owner":{"account_id":5199414,"reputation":1366,"user_id":4159389,"accept_rate":0,"display_name":"Rahul Vedpathak"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11555,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":63142927,"answer_count":1,"score":2,"last_activity_date":1695200999,"creation_date":1594638104,"question_id":62874455,"body_markdown":"I am trying to use Timestamp and have imported it in protobuf message - \r\n\r\n    import &quot;google/protobuf/timestamp.proto&quot;;\r\n\r\n    message TriggerDataMsg {\r\n        google.protobuf.Timestamp start_time = 1;\r\n        google.protobuf.Timestamp end_time = 2;\r\n        google.protobuf.Timestamp next_fire_time = 3;\r\n        google.protobuf.Timestamp previous_fire_time = 4;\r\n        sint32 priority = 13;\r\n    }\r\n\r\n\r\nWhen trying to compile with protoc compiler to generate Java classes, its failing with the below error - \r\n\r\n     [echo] compiling proto sources...\r\n     [exec] google/protobuf/timestamp.proto:35:8: Option &quot;csharp_namespace&quot; unknown.\r\n     [exec] com/vmware/nsx/management/backup/model/trigger_data.proto: Import &quot;google/protobuf/timestamp.proto&quot; was not found or had errors.\r\n     [exec] com/vmware/nsx/management/backup/model/trigger_data.proto:24:5: &quot;google.protobuf.Timestamp&quot; is not defined.\r\n     [exec] com/vmware/nsx/management/backup/model/trigger_data.proto:25:5: &quot;google.protobuf.Timestamp&quot; is not defined.\r\n     [exec] com/vmware/nsx/management/backup/model/trigger_data.proto:26:5: &quot;google.protobuf.Timestamp&quot; is not defined.\r\n     [exec] com/vmware/nsx/management/backup/model/trigger_data.proto:27:5: &quot;google.protobuf.Timestamp&quot; is not defined.\r\n\r\n\r\nI am not sure why its checking for &quot;csharp_namespace&quot; even though I am generating Java classes.\r\nAny workaround which I can try to get rid of this error ?","title":"Import &quot;google/protobuf/timestamp.proto&quot; was not found or had errors","body":"<p>I am trying to use Timestamp and have imported it in protobuf message -</p>\n<pre><code>import &quot;google/protobuf/timestamp.proto&quot;;\n\nmessage TriggerDataMsg {\n    google.protobuf.Timestamp start_time = 1;\n    google.protobuf.Timestamp end_time = 2;\n    google.protobuf.Timestamp next_fire_time = 3;\n    google.protobuf.Timestamp previous_fire_time = 4;\n    sint32 priority = 13;\n}\n</code></pre>\n<p>When trying to compile with protoc compiler to generate Java classes, its failing with the below error -</p>\n<pre><code> [echo] compiling proto sources...\n [exec] google/protobuf/timestamp.proto:35:8: Option &quot;csharp_namespace&quot; unknown.\n [exec] com/vmware/nsx/management/backup/model/trigger_data.proto: Import &quot;google/protobuf/timestamp.proto&quot; was not found or had errors.\n [exec] com/vmware/nsx/management/backup/model/trigger_data.proto:24:5: &quot;google.protobuf.Timestamp&quot; is not defined.\n [exec] com/vmware/nsx/management/backup/model/trigger_data.proto:25:5: &quot;google.protobuf.Timestamp&quot; is not defined.\n [exec] com/vmware/nsx/management/backup/model/trigger_data.proto:26:5: &quot;google.protobuf.Timestamp&quot; is not defined.\n [exec] com/vmware/nsx/management/backup/model/trigger_data.proto:27:5: &quot;google.protobuf.Timestamp&quot; is not defined.\n</code></pre>\n<p>I am not sure why its checking for &quot;csharp_namespace&quot; even though I am generating Java classes.\nAny workaround which I can try to get rid of this error ?</p>\n"},{"tags":["java","selenium-webdriver","google-chrome-headless"],"comments":[{"owner":{"account_id":10049107,"reputation":186627,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"score":0,"creation_date":1691101798,"post_id":76830379,"comment_id":135450278,"body_markdown":"At which line are you exactly stuck?","body":"At which line are you exactly stuck?"},{"owner":{"account_id":12444331,"reputation":11,"user_id":11066850,"display_name":"Orgest Likaj"},"score":0,"creation_date":1691137671,"post_id":76830379,"comment_id":135453998,"body_markdown":"@undetectedSelenium I am stuck at the line where I have to get the link from the clipboard which becomes unavailable in headless mode.\n\nString dynamicLink = getLinkFromClipboard();\n    driver.get(dynamicLink);","body":"@undetectedSelenium I am stuck at the line where I have to get the link from the clipboard which becomes unavailable in headless mode.  String dynamicLink = getLinkFromClipboard();     driver.get(dynamicLink);"}],"answers":[{"tags":[],"owner":{"account_id":12444331,"reputation":11,"user_id":11066850,"display_name":"Orgest Likaj"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695200641,"creation_date":1695200641,"answer_id":77140891,"question_id":76830379,"body_markdown":"Found the answer!\r\nWhile you work in headless mode your clipboard becomes unavailable, so I created a method to copy the link and one a new tab.","title":"How to click on a dynamic link using Selenium Webdriver + Java in headless mode","body":"<p>Found the answer!\nWhile you work in headless mode your clipboard becomes unavailable, so I created a method to copy the link and one a new tab.</p>\n"}],"owner":{"account_id":12444331,"reputation":11,"user_id":11066850,"display_name":"Orgest Likaj"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1695200641,"creation_date":1691083909,"question_id":76830379,"body_markdown":"**I am trying to click a dynamic link with Selenium where when I run the tests in GUI they are perfectly fine because I am using a method where I copy the link from the clipboard but in headless mode the usage of the clipboard is not possible.\r\n\r\nI am using several options but so far I haven&#39;t been successful. Any hint I would appreciate it\r\n\r\n\r\n\r\n\r\n\r\n        WebElement dynamicLinkElement = driver.findElement(By.cssSelector(&quot;button[data-test-share-portal-url]&quot;));\r\n        dynamicLinkElement.click();\r\n        Thread.sleep(1000);\r\n\r\n        ((JavascriptExecutor) driver).executeScript(&quot;window.open()&quot;);\r\n\r\n        ArrayList&lt;String&gt; tabs1 = new ArrayList&lt;&gt;(driver.getWindowHandles());\r\n        driver.switchTo().window(tabs1.get(1));\r\n\r\n        String dynamicLink = getLinkFromClipboard();\r\n        driver.get(dynamicLink);\r\n        Thread.sleep(5000);\r\n\r\n        int retryCount = 0;\r\n\r\n        // Define the maximum number of retries\r\n        int maxRetries = 10; // Adjust this value as needed\r\n\r\n        // Define the URL to check for &quot;not found&quot;\r\n\r\n        System.out.println(driver.getCurrentUrl());\r\n\r\n        // Retry until the URL is no longer &quot;not found&quot; or the maximum retries are reached\r\n        while (driver.getCurrentUrl().contains(&quot;not-found&quot;) &amp;&amp; (retryCount &lt; maxRetries)) {\r\n            // Wait for 5 seconds before the next retry\r\n            // Refresh the page to try again\r\n            driver.get(dynamicLink);\r\n\r\n            Thread.sleep(5000);\r\n\r\n            // Increment the retry count\r\n            retryCount++;\r\n        }\r\n\r\n        ArrayList&lt;String&gt; tabs0 = new ArrayList&lt;&gt;(driver.getWindowHandles());\r\n        driver.switchTo().window(tabs0.get(0));\r\n\r\n        Thread.sleep(3000);\r\n    }\r\n\r\n\r\n\r\n*******************************************************************************************************************************************\r\n\r\n\r\n     WebElement dynamicLinkElement = driver.findElement(By.cssSelector(&quot;button[data-test-share-portal-url]&quot;));\r\n        dynamicLinkElement.click();\r\n        Thread.sleep(1000);\r\n\r\n        // Open a new tab using JavaScript\r\n        ((JavascriptExecutor) driver).executeScript(&quot;window.open()&quot;);\r\n\r\n        ArrayList&lt;String&gt; tabs = new ArrayList&lt;&gt;(driver.getWindowHandles());\r\n        driver.switchTo().window(tabs.get(1)); // Switch to the new tab\r\n\r\n\r\n        // Parse the HTML content of the new tab to extract the dynamic link\r\n        String dynamicLink = extractDynamicLinkFromPageSource(driver.getPageSource());\r\n\r\n        if (dynamicLink != null) {\r\n            driver.get(dynamicLink);\r\n            Thread.sleep(5000);\r\n\r\n            // Rest of your retry and assertion logic\r\n        } else {\r\n            // Handle the case where dynamicLink is not found\r\n        }\r\n\r\n        Thread.sleep(3000);\r\n    }\r\n\r\n    private String extractDynamicLinkFromPageSource(String pageSource) {\r\n        Document document = Jsoup.parse(pageSource);\r\n\r\n        // Modify this selector based on your actual HTML structure\r\n        Elements linkElements = document.select(&quot;a[data-test-share-portal-url]&quot;);\r\n\r\n        if (!linkElements.isEmpty()) {\r\n            Element linkElement = linkElements.first();\r\n            String dynamicLink = linkElement.attr(&quot;href&quot;);\r\n            return dynamicLink;\r\n        }\r\n\r\n        return null;\r\n    }","title":"How to click on a dynamic link using Selenium Webdriver + Java in headless mode","body":"<p>**I am trying to click a dynamic link with Selenium where when I run the tests in GUI they are perfectly fine because I am using a method where I copy the link from the clipboard but in headless mode the usage of the clipboard is not possible.</p>\n<p>I am using several options but so far I haven't been successful. Any hint I would appreciate it</p>\n<pre><code>    WebElement dynamicLinkElement = driver.findElement(By.cssSelector(&quot;button[data-test-share-portal-url]&quot;));\n    dynamicLinkElement.click();\n    Thread.sleep(1000);\n\n    ((JavascriptExecutor) driver).executeScript(&quot;window.open()&quot;);\n\n    ArrayList&lt;String&gt; tabs1 = new ArrayList&lt;&gt;(driver.getWindowHandles());\n    driver.switchTo().window(tabs1.get(1));\n\n    String dynamicLink = getLinkFromClipboard();\n    driver.get(dynamicLink);\n    Thread.sleep(5000);\n\n    int retryCount = 0;\n\n    // Define the maximum number of retries\n    int maxRetries = 10; // Adjust this value as needed\n\n    // Define the URL to check for &quot;not found&quot;\n\n    System.out.println(driver.getCurrentUrl());\n\n    // Retry until the URL is no longer &quot;not found&quot; or the maximum retries are reached\n    while (driver.getCurrentUrl().contains(&quot;not-found&quot;) &amp;&amp; (retryCount &lt; maxRetries)) {\n        // Wait for 5 seconds before the next retry\n        // Refresh the page to try again\n        driver.get(dynamicLink);\n\n        Thread.sleep(5000);\n\n        // Increment the retry count\n        retryCount++;\n    }\n\n    ArrayList&lt;String&gt; tabs0 = new ArrayList&lt;&gt;(driver.getWindowHandles());\n    driver.switchTo().window(tabs0.get(0));\n\n    Thread.sleep(3000);\n}\n</code></pre>\n<hr />\n<pre><code> WebElement dynamicLinkElement = driver.findElement(By.cssSelector(&quot;button[data-test-share-portal-url]&quot;));\n    dynamicLinkElement.click();\n    Thread.sleep(1000);\n\n    // Open a new tab using JavaScript\n    ((JavascriptExecutor) driver).executeScript(&quot;window.open()&quot;);\n\n    ArrayList&lt;String&gt; tabs = new ArrayList&lt;&gt;(driver.getWindowHandles());\n    driver.switchTo().window(tabs.get(1)); // Switch to the new tab\n\n\n    // Parse the HTML content of the new tab to extract the dynamic link\n    String dynamicLink = extractDynamicLinkFromPageSource(driver.getPageSource());\n\n    if (dynamicLink != null) {\n        driver.get(dynamicLink);\n        Thread.sleep(5000);\n\n        // Rest of your retry and assertion logic\n    } else {\n        // Handle the case where dynamicLink is not found\n    }\n\n    Thread.sleep(3000);\n}\n\nprivate String extractDynamicLinkFromPageSource(String pageSource) {\n    Document document = Jsoup.parse(pageSource);\n\n    // Modify this selector based on your actual HTML structure\n    Elements linkElements = document.select(&quot;a[data-test-share-portal-url]&quot;);\n\n    if (!linkElements.isEmpty()) {\n        Element linkElement = linkElements.first();\n        String dynamicLink = linkElement.attr(&quot;href&quot;);\n        return dynamicLink;\n    }\n\n    return null;\n}\n</code></pre>\n"},{"tags":["java","spring-boot","velocity"],"owner":{"account_id":29483963,"reputation":1,"user_id":22594306,"display_name":"yosr ben daly"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695200630,"creation_date":1695200630,"question_id":77140889,"body_markdown":"I have email template .vm which contains msg with message key from messages_en.properties:\r\n\r\n```\r\n#msg(&quot;email-ePwdReminder-salutation&quot;)\r\n```\r\nand created the velocity context as follow:\r\n```\r\nVelocityContext context = new VelocityContext();\r\ncontext.put(&quot;email-ePwdReminder-salutation&quot;,messageSource.getMessage(&quot;email.ePwdReminder.salutation&quot;,null,locale));\r\nMerge the template with the context to generate the HTML body\r\nStringWriter writer = new StringWriter();\r\n\r\nReplace with logic to fetch the correct template\r\nTemplate template = velocityEngine.getTemplate(templateName);\r\ntemplate.process();\r\ntemplate.merge(context, writer);\r\n\r\nString htmlBody = writer.toString();\r\n```\r\n\r\n**#msg** seems not be a predefined directive for velocity engine, so how can I create a custom directive **#msg** and be able to replace **email.ePwdReminder.salutation** variable in the email template.","title":"Velocity template - message key #msg","body":"<p>I have email template .vm which contains msg with message key from messages_en.properties:</p>\n<pre><code>#msg(&quot;email-ePwdReminder-salutation&quot;)\n</code></pre>\n<p>and created the velocity context as follow:</p>\n<pre><code>VelocityContext context = new VelocityContext();\ncontext.put(&quot;email-ePwdReminder-salutation&quot;,messageSource.getMessage(&quot;email.ePwdReminder.salutation&quot;,null,locale));\nMerge the template with the context to generate the HTML body\nStringWriter writer = new StringWriter();\n\nReplace with logic to fetch the correct template\nTemplate template = velocityEngine.getTemplate(templateName);\ntemplate.process();\ntemplate.merge(context, writer);\n\nString htmlBody = writer.toString();\n</code></pre>\n<p><strong>#msg</strong> seems not be a predefined directive for velocity engine, so how can I create a custom directive <strong>#msg</strong> and be able to replace <strong>email.ePwdReminder.salutation</strong> variable in the email template.</p>\n"},{"tags":["java","spring-boot","spring-batch","batch-processing","spring-batch-tasklet"],"comments":[{"owner":{"account_id":6482932,"reputation":29552,"user_id":5019386,"display_name":"Mahmoud Ben Hassine"},"score":0,"creation_date":1694008257,"post_id":77035530,"comment_id":135834819,"body_markdown":"With Spring Boot 3, adding `@EnableBatchProcessing` makes the batch auto-configuration to back-off (properties under `spring.batch.*` are not taken into account). That said, since you have added `@EnableBatchProcessing`, the job should not start automatically. Therefore, there is something running it automatically which you did not share. Please provide a [minimal complete example](https://stackoverflow.com/help/minimal-reproducible-example) that reproduces the issue to be able to help you efficiently.","body":"With Spring Boot 3, adding <code>@EnableBatchProcessing</code> makes the batch auto-configuration to back-off (properties under <code>spring.batch.*</code> are not taken into account). That said, since you have added <code>@EnableBatchProcessing</code>, the job should not start automatically. Therefore, there is something running it automatically which you did not share. Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal complete example</a> that reproduces the issue to be able to help you efficiently."}],"answers":[{"tags":[],"owner":{"account_id":29033046,"reputation":11,"user_id":22239522,"display_name":"vaibhav burgute"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695200551,"creation_date":1695200551,"answer_id":77140882,"question_id":77035530,"body_markdown":"@MahmoudBenHassine Thank you for your comment, Actually we can use @StepScope over Processor, because all queries declared in processor and @Bean responsible for configuring it and running my job. That helped me.","title":"How to stop Spring Batch job Executing automatically","body":"<p>@MahmoudBenHassine Thank you for your comment, Actually we can use @StepScope over Processor, because all queries declared in processor and @Bean responsible for configuring it and running my job. That helped me.</p>\n"}],"owner":{"account_id":29033046,"reputation":11,"user_id":22239522,"display_name":"vaibhav burgute"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695200551,"creation_date":1693809188,"question_id":77035530,"body_markdown":"```java\r\n@ComponentScan({\r\n  &quot;com.&quot;\r\n})@Configuration@EnableBatchProcessing\r\npublic class InterestDateUpdationConfiguration {@Autowired\r\n  private DataSource dataSource;\r\n\r\n  @Autowired\r\n  private JdbcTemplate jdbcTemplate;\r\n\r\n  @Bean\r\n  public Job runJob(Step step1, JobRepository jobRepository) {\r\n    System.out.println(&quot;Runner&quot;);\r\n    return new JobBuilder(&quot;job&quot;, jobRepository).incrementer(new RunIdIncrementer()).flow(step1).end().build();\r\n  }\r\n\r\n  @Bean\r\n  public Step step1(JobRepository jobRepository, PlatformTransactionManager transactionManager, JdbcBatchItemWriter &lt; InterestDateUpdationEntity &gt; writer) {\r\n    System.out.println(&quot;Step&quot;);\r\n    return new StepBuilder(&quot;step1&quot;, jobRepository). &lt; InterestDateUpdationEntity,\r\n    InterestDateUpdationEntity &gt; chunk(10, transactionManager).reader(JdbcCursorItemReader(dataSource)).processor(processor()).writer(writer).build();\r\n  }\r\n\r\n  @Bean\r\n  public ItemReader &lt; InterestDateUpdationEntity &gt; JdbcCursorItemReader(DataSource dataSource) {\r\n    System.out.println(&quot;reader&quot;);\r\n    JdbcCursorItemReader &lt; InterestDateUpdationEntity &gt; itemReader = new JdbcCursorItemReader &lt; &gt;();\r\n    itemReader.setDataSource(dataSource);\r\n    itemReader.setSql(&quot;SELECT SYSDATE FROM DUAL&quot;);\r\n    itemReader.setRowMapper(new InterestDateUpdationRowMapper());\r\n    return itemReader;\r\n  }\r\n\r\n  @Bean\r\n  public JdbcBatchItemWriter &lt; InterestDateUpdationEntity &gt; jdbcBatchItemWriter() {\r\n    JdbcBatchItemWriter &lt; InterestDateUpdationEntity &gt; itemWriter = new JdbcBatchItemWriter &lt; &gt;();\r\n    itemWriter.setDataSource(dataSource);\r\n    itemWriter.setSql(&quot;SELECT SYSDATE FROM DUAL&quot;);\r\n    itemWriter.setItemPreparedStatementSetter(new ItemPreparedStatementSetter &lt; InterestDateUpdationEntity &gt; () {@Override\r\n      public void setValues(InterestDateUpdationEntity item, PreparedStatement ps) throws SQLException {}\r\n    });\r\n    return itemWriter;\r\n  }\r\n\r\n  @Bean\r\n  public JobExecutionListener listener() {\r\n    return new JobExecutionListener() {@Override\r\n      public void beforeJob(JobExecution jobExecution) {\r\n        System.out.println(&quot;Started date and time&quot; + new Date());\r\n        System.out.println(&quot;Batch Status&quot; + jobExecution.getStatus());\r\n      }@Override\r\n      public void afterJob(JobExecution jobExecution) {\r\n        System.out.println(&quot;Ended date and time&quot; + new Date());\r\n        System.out.println(&quot;Batch Status&quot; + jobExecution.getStatus());\r\n      }\r\n    };\r\n  }\r\n\r\n  @Bean\r\n  public ItemProcessor &lt; InterestDateUpdationEntity,\r\n  InterestDateUpdationEntity &gt; processor() {\r\n    String insertSql = &quot;INSERT INTO MT_INSTRUMENT_TEMP_VAIBHAV (select I.INSTR_CODE, I.FREQ_CODE, I.INSTR_FST_PYMT_DT, I.NEXT_PAY_DATE, I.LAST_PYMT_DATE, I.ISSUE_DATE,I.MATURE_DT, I.INSTR_INT_RATE,&#39;&#39; from MT_INSTRUMENT I where I.FREQ_CODE IS NOT NULL AND I.INSTR_FST_PYMT_DT IS NOT NULL AND I.MATURE_DT IS NOT NULL AND I.NEXT_PAY_DATE IS NOT NULL AND I.FREQ_CODE != &#39;X&#39; AND I.NEXT_PAY_DATE &lt;= (SELECT SYS_DATE FROM PRO_SYS_DATE))&quot;;\r\n    String updateSql = &quot;UPDATE MT_INSTRUMENT_TEMP_VAIBHAV SET NEXT_PAY_DATE_NEW = ADD_MONTHS(NEXT_PAY_DATE ,(CASE FREQ_CODE WHEN &#39;A&#39; THEN 12 WHEN &#39;M&#39; THEN 1 WHEN &#39;Q&#39; THEN 3 WHEN &#39;S&#39; THEN 6 ELSE 0   END ))&quot;;\r\n    String updateByFirstDate = &quot;update MT_INSTRUMENT_TEMP_VAIBHAV set NEXT_PAY_DATE_NEW = to_date(SUBSTR(INSTR_FST_PYMT_DT,0,2) ||SUBSTR(NEXT_PAY_DATE_NEW,3),&#39;dd/mm/yyyy hh24:mi:ss&#39;) where to_number(SUBSTR(INSTR_FST_PYMT_DT,0,2)) &lt; to_number(SUBSTR(NEXT_PAY_DATE_NEW,0,2))&quot;;\r\n    String updateByInstrDetails = &quot;UPDATE MT_INSTRUMENT_TEMP_VAIBHAV A SET A.NEXT_PAY_DATE_NEW = ( SELECT INTEREST_DATE FROM MT_INSTRUMENT_DETAILS B WHERE A.INSTR_CODE = B.INSTR_CODE ) WHERE EXISTS ( SELECT * FROM MT_INSTRUMENT_DETAILS B WHERE A.INSTR_CODE = B.INSTR_CODE)&quot;;\r\n    String updateByMatureDate = &quot;UPDATE MT_INSTRUMENT_TEMP_VAIBHAV SET NEXT_PAY_DATE_NEW = CASE WHEN NEXT_PAY_DATE_NEW &gt; MATURE_DT THEN MATURE_DT ELSE NEXT_PAY_DATE_NEW END&quot;;\r\n    String mergerSql = &quot;MERGE INTO MT_INSTRUMENT_VAIBHAV_BACKUP A USING MT_INSTRUMENT_TEMP_VAIBHAV B ON (A.INSTR_CODE = B.INSTR_CODE) WHEN MATCHED THEN UPDATE SET A.LAST_INCOM_RT = B.INSTR_INT_RATE, A.NEXT_PAY_DATE = B.NEXT_PAY_DATE_NEW, A.OLD_LST_PAYDT = B.LAST_PYMT_DATE, A.LAST_PYMT_DATE = B.NEXT_PAY_DATE, A.MOD_LAST_PAYDT = &#39;Y&#39; &quot;;\r\n    jdbcTemplate.update(insertSql);\r\n    jdbcTemplate.update(updateSql);\r\n    jdbcTemplate.update(updateByFirstDate);\r\n    jdbcTemplate.update(updateByInstrDetails);\r\n    jdbcTemplate.update(updateByMatureDate);\r\n    jdbcTemplate.update(mergerSql);\r\n    return null;\r\n  }\r\n}`\r\n\r\npackage com;\r\nimport org.springframework.batch.core.Job;@RestController@RequestMapping(&quot;/api/job&quot;)\r\npublic class InterestDateUpdationController {\r\n\r\n  @Autowired\r\n  private JobLauncher jobLauncher;\r\n\r\n  @Autowired\r\n  private Job runJob;\r\n\r\n  @PostMapping(&quot;/run-job&quot;)\r\n  public ResponseEntity &lt; String &gt; runJob() {\r\n    try {\r\n      JobParameters jobParameters = new JobParametersBuilder().addLong(&quot;time&quot;, System.currentTimeMillis()).toJobParameters();\r\n\r\n      jobLauncher.run(runJob, jobParameters);\r\n      return ResponseEntity.ok(&quot;Job executed successfully&quot;);\r\n    } catch(Exception e) {\r\n      return ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR).body(&quot;Failed to execute job&quot;);\r\n    }\r\n  }\r\n\r\n}\r\n```\r\n\r\nMy Batch job is triggering automatically even if I have set `spring.batch.job.enabled=false`. Also, I am not using any Job Runner but at the time of running application it&#39;s saving data into the database by executing Reader, writer and processor.\r\n\r\nI have tried to set `spring.batch.job.enabled=false`, and I have commented all `Runner` related code including `CommandLineRunner`.","title":"How to stop Spring Batch job Executing automatically","body":"<pre class=\"lang-java prettyprint-override\"><code>@ComponentScan({\n  &quot;com.&quot;\n})@Configuration@EnableBatchProcessing\npublic class InterestDateUpdationConfiguration {@Autowired\n  private DataSource dataSource;\n\n  @Autowired\n  private JdbcTemplate jdbcTemplate;\n\n  @Bean\n  public Job runJob(Step step1, JobRepository jobRepository) {\n    System.out.println(&quot;Runner&quot;);\n    return new JobBuilder(&quot;job&quot;, jobRepository).incrementer(new RunIdIncrementer()).flow(step1).end().build();\n  }\n\n  @Bean\n  public Step step1(JobRepository jobRepository, PlatformTransactionManager transactionManager, JdbcBatchItemWriter &lt; InterestDateUpdationEntity &gt; writer) {\n    System.out.println(&quot;Step&quot;);\n    return new StepBuilder(&quot;step1&quot;, jobRepository). &lt; InterestDateUpdationEntity,\n    InterestDateUpdationEntity &gt; chunk(10, transactionManager).reader(JdbcCursorItemReader(dataSource)).processor(processor()).writer(writer).build();\n  }\n\n  @Bean\n  public ItemReader &lt; InterestDateUpdationEntity &gt; JdbcCursorItemReader(DataSource dataSource) {\n    System.out.println(&quot;reader&quot;);\n    JdbcCursorItemReader &lt; InterestDateUpdationEntity &gt; itemReader = new JdbcCursorItemReader &lt; &gt;();\n    itemReader.setDataSource(dataSource);\n    itemReader.setSql(&quot;SELECT SYSDATE FROM DUAL&quot;);\n    itemReader.setRowMapper(new InterestDateUpdationRowMapper());\n    return itemReader;\n  }\n\n  @Bean\n  public JdbcBatchItemWriter &lt; InterestDateUpdationEntity &gt; jdbcBatchItemWriter() {\n    JdbcBatchItemWriter &lt; InterestDateUpdationEntity &gt; itemWriter = new JdbcBatchItemWriter &lt; &gt;();\n    itemWriter.setDataSource(dataSource);\n    itemWriter.setSql(&quot;SELECT SYSDATE FROM DUAL&quot;);\n    itemWriter.setItemPreparedStatementSetter(new ItemPreparedStatementSetter &lt; InterestDateUpdationEntity &gt; () {@Override\n      public void setValues(InterestDateUpdationEntity item, PreparedStatement ps) throws SQLException {}\n    });\n    return itemWriter;\n  }\n\n  @Bean\n  public JobExecutionListener listener() {\n    return new JobExecutionListener() {@Override\n      public void beforeJob(JobExecution jobExecution) {\n        System.out.println(&quot;Started date and time&quot; + new Date());\n        System.out.println(&quot;Batch Status&quot; + jobExecution.getStatus());\n      }@Override\n      public void afterJob(JobExecution jobExecution) {\n        System.out.println(&quot;Ended date and time&quot; + new Date());\n        System.out.println(&quot;Batch Status&quot; + jobExecution.getStatus());\n      }\n    };\n  }\n\n  @Bean\n  public ItemProcessor &lt; InterestDateUpdationEntity,\n  InterestDateUpdationEntity &gt; processor() {\n    String insertSql = &quot;INSERT INTO MT_INSTRUMENT_TEMP_VAIBHAV (select I.INSTR_CODE, I.FREQ_CODE, I.INSTR_FST_PYMT_DT, I.NEXT_PAY_DATE, I.LAST_PYMT_DATE, I.ISSUE_DATE,I.MATURE_DT, I.INSTR_INT_RATE,'' from MT_INSTRUMENT I where I.FREQ_CODE IS NOT NULL AND I.INSTR_FST_PYMT_DT IS NOT NULL AND I.MATURE_DT IS NOT NULL AND I.NEXT_PAY_DATE IS NOT NULL AND I.FREQ_CODE != 'X' AND I.NEXT_PAY_DATE &lt;= (SELECT SYS_DATE FROM PRO_SYS_DATE))&quot;;\n    String updateSql = &quot;UPDATE MT_INSTRUMENT_TEMP_VAIBHAV SET NEXT_PAY_DATE_NEW = ADD_MONTHS(NEXT_PAY_DATE ,(CASE FREQ_CODE WHEN 'A' THEN 12 WHEN 'M' THEN 1 WHEN 'Q' THEN 3 WHEN 'S' THEN 6 ELSE 0   END ))&quot;;\n    String updateByFirstDate = &quot;update MT_INSTRUMENT_TEMP_VAIBHAV set NEXT_PAY_DATE_NEW = to_date(SUBSTR(INSTR_FST_PYMT_DT,0,2) ||SUBSTR(NEXT_PAY_DATE_NEW,3),'dd/mm/yyyy hh24:mi:ss') where to_number(SUBSTR(INSTR_FST_PYMT_DT,0,2)) &lt; to_number(SUBSTR(NEXT_PAY_DATE_NEW,0,2))&quot;;\n    String updateByInstrDetails = &quot;UPDATE MT_INSTRUMENT_TEMP_VAIBHAV A SET A.NEXT_PAY_DATE_NEW = ( SELECT INTEREST_DATE FROM MT_INSTRUMENT_DETAILS B WHERE A.INSTR_CODE = B.INSTR_CODE ) WHERE EXISTS ( SELECT * FROM MT_INSTRUMENT_DETAILS B WHERE A.INSTR_CODE = B.INSTR_CODE)&quot;;\n    String updateByMatureDate = &quot;UPDATE MT_INSTRUMENT_TEMP_VAIBHAV SET NEXT_PAY_DATE_NEW = CASE WHEN NEXT_PAY_DATE_NEW &gt; MATURE_DT THEN MATURE_DT ELSE NEXT_PAY_DATE_NEW END&quot;;\n    String mergerSql = &quot;MERGE INTO MT_INSTRUMENT_VAIBHAV_BACKUP A USING MT_INSTRUMENT_TEMP_VAIBHAV B ON (A.INSTR_CODE = B.INSTR_CODE) WHEN MATCHED THEN UPDATE SET A.LAST_INCOM_RT = B.INSTR_INT_RATE, A.NEXT_PAY_DATE = B.NEXT_PAY_DATE_NEW, A.OLD_LST_PAYDT = B.LAST_PYMT_DATE, A.LAST_PYMT_DATE = B.NEXT_PAY_DATE, A.MOD_LAST_PAYDT = 'Y' &quot;;\n    jdbcTemplate.update(insertSql);\n    jdbcTemplate.update(updateSql);\n    jdbcTemplate.update(updateByFirstDate);\n    jdbcTemplate.update(updateByInstrDetails);\n    jdbcTemplate.update(updateByMatureDate);\n    jdbcTemplate.update(mergerSql);\n    return null;\n  }\n}`\n\npackage com;\nimport org.springframework.batch.core.Job;@RestController@RequestMapping(&quot;/api/job&quot;)\npublic class InterestDateUpdationController {\n\n  @Autowired\n  private JobLauncher jobLauncher;\n\n  @Autowired\n  private Job runJob;\n\n  @PostMapping(&quot;/run-job&quot;)\n  public ResponseEntity &lt; String &gt; runJob() {\n    try {\n      JobParameters jobParameters = new JobParametersBuilder().addLong(&quot;time&quot;, System.currentTimeMillis()).toJobParameters();\n\n      jobLauncher.run(runJob, jobParameters);\n      return ResponseEntity.ok(&quot;Job executed successfully&quot;);\n    } catch(Exception e) {\n      return ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR).body(&quot;Failed to execute job&quot;);\n    }\n  }\n\n}\n</code></pre>\n<p>My Batch job is triggering automatically even if I have set <code>spring.batch.job.enabled=false</code>. Also, I am not using any Job Runner but at the time of running application it's saving data into the database by executing Reader, writer and processor.</p>\n<p>I have tried to set <code>spring.batch.job.enabled=false</code>, and I have commented all <code>Runner</code> related code including <code>CommandLineRunner</code>.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":3318693,"reputation":8181,"user_id":2790364,"accept_rate":89,"display_name":"Santhosh"},"score":2,"creation_date":1423652545,"post_id":28452599,"comment_id":45232498,"body_markdown":"Can you show us the code you are trying to attach the file ?","body":"Can you show us the code you are trying to attach the file ?"}],"answers":[{"tags":[],"owner":{"account_id":2756352,"reputation":10990,"user_id":2374302,"accept_rate":86,"display_name":"Axel Amthor"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1423652582,"creation_date":1423652582,"answer_id":28452719,"question_id":28452599,"body_markdown":"MIME Headers (like `Subject` or `Content-Disposition`) must be mime-encoded, if they contain non-ascii chars.\r\n\r\nEncoding is either &quot;`quoted printable`&quot; or &quot;`base64`&quot;. I recommend for `quoted-printable`.\r\n\r\nSee here: https://stackoverflow.com/questions/21574745/java-encode-string-in-quoted-printable","title":"JavaMail - Attachment filename not displaying UTF-8 characters correctly","body":"<p>MIME Headers (like <code>Subject</code> or <code>Content-Disposition</code>) must be mime-encoded, if they contain non-ascii chars.</p>\n\n<p>Encoding is either \"<code>quoted printable</code>\" or \"<code>base64</code>\". I recommend for <code>quoted-printable</code>.</p>\n\n<p>See here: <a href=\"https://stackoverflow.com/questions/21574745/java-encode-string-in-quoted-printable\">Java: Encode String in quoted-printable</a></p>\n"}],"owner":{"account_id":5770919,"reputation":131,"user_id":4554384,"display_name":"Tonia"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9559,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"answer_count":1,"score":13,"last_activity_date":1695200470,"creation_date":1423652242,"question_id":28452599,"body_markdown":"I am trying to send mails that may contain UTF-8 characters in subject, message body and in the attachment file name.\r\n\r\nI am able to send UTF-8 characters as a part of Subject as well as Mesage body. However when I am sending an attachment having UTF-8 characters as a attachment file name, it is not displaying it correctly.\r\n\r\nSo my question is how can I set attachement filename as UTF-8?\r\n\r\nHere is part of my code:\r\n\r\n    MimeBodyPart pdfPart = new MimeBodyPart();\r\n    pdfPart.setDataHandler(new DataHandler(ds));\r\n    pdfPart.setFileName(filename);\r\n    mimeMultipart.addBodyPart(pdfPart);\r\n\r\n\r\n  Later edit: \r\n\r\nI replaced \r\n\r\n    pdfPart.setFileName(filename);\r\n\r\nwith\r\n\r\n    pdfPart.setFileName(MimeUtility.encodeText(filename, &quot;UTF-8&quot;, null));\r\n\r\nand it is working perfectly. \r\nThanks all.\r\n\r\n\r\n","title":"JavaMail - Attachment filename not displaying UTF-8 characters correctly","body":"<p>I am trying to send mails that may contain UTF-8 characters in subject, message body and in the attachment file name.</p>\n\n<p>I am able to send UTF-8 characters as a part of Subject as well as Mesage body. However when I am sending an attachment having UTF-8 characters as a attachment file name, it is not displaying it correctly.</p>\n\n<p>So my question is how can I set attachement filename as UTF-8?</p>\n\n<p>Here is part of my code:</p>\n\n<pre><code>MimeBodyPart pdfPart = new MimeBodyPart();\npdfPart.setDataHandler(new DataHandler(ds));\npdfPart.setFileName(filename);\nmimeMultipart.addBodyPart(pdfPart);\n</code></pre>\n\n<p>Later edit: </p>\n\n<p>I replaced </p>\n\n<pre><code>pdfPart.setFileName(filename);\n</code></pre>\n\n<p>with</p>\n\n<pre><code>pdfPart.setFileName(MimeUtility.encodeText(filename, \"UTF-8\", null));\n</code></pre>\n\n<p>and it is working perfectly. \nThanks all.</p>\n"},{"tags":["java","excel","apache-poi"],"comments":[{"owner":{"account_id":2003270,"reputation":939,"user_id":1793799,"accept_rate":62,"display_name":"Woody"},"score":0,"creation_date":1382350517,"post_id":19491231,"comment_id":28910469,"body_markdown":"Post your tried code.","body":"Post your tried code."},{"owner":{"account_id":310816,"reputation":9919,"user_id":624003,"display_name":"Sankumarsingh"},"score":1,"creation_date":1382353869,"post_id":19491231,"comment_id":28912382,"body_markdown":"@AAA: Your code seems correct... what you are getting in this case... default it is showing 64 on my end...","body":"@AAA: Your code seems correct... what you are getting in this case... default it is showing 64 on my end..."},{"owner":{"account_id":1431512,"reputation":348,"user_id":1353830,"accept_rate":27,"display_name":"AAA"},"score":0,"creation_date":1382355459,"post_id":19491231,"comment_id":28913260,"body_markdown":"@Sankumarsingh I am also getting 64 which is AUTOMATIC Color code it doesn&#39;t make any sense while your workbook is having some different color.","body":"@Sankumarsingh I am also getting 64 which is AUTOMATIC Color code it doesn&#39;t make any sense while your workbook is having some different color."},{"owner":{"account_id":310816,"reputation":9919,"user_id":624003,"display_name":"Sankumarsingh"},"score":0,"creation_date":1382355561,"post_id":19491231,"comment_id":28913306,"body_markdown":"but try this \n`cell.getCellStyle().setFillForegroundColor(HSSFColor.GOLD.index);`\n\t\t\t`System.out.println(cell.getCellStyle().getFillForegroundColor());`\n\nWill give you 51... means it&#39;s working and changing as per the color it gets.","body":"but try this  <code>cell.getCellStyle().setFillForegroundColor(HSSFColor.GOLD.in&zwnj;&#8203;dex);</code> \t\t\t<code>System.out.println(cell.getCellStyle().getFillForegroundC&zwnj;&#8203;olor());</code>  Will give you 51... means it&#39;s working and changing as per the color it gets."},{"owner":{"account_id":1431512,"reputation":348,"user_id":1353830,"accept_rate":27,"display_name":"AAA"},"score":0,"creation_date":1382359336,"post_id":19491231,"comment_id":28915667,"body_markdown":"@Sankumarsingh I tried this one also I am able to get other values other than 64 but if I set in Excel using any tool but not POI I am not able to fetch the background color. The excel files I am using are not made through POI but tool like Microsoft Excel.","body":"@Sankumarsingh I tried this one also I am able to get other values other than 64 but if I set in Excel using any tool but not POI I am not able to fetch the background color. The excel files I am using are not made through POI but tool like Microsoft Excel."},{"owner":{"account_id":1864114,"reputation":764,"user_id":1688064,"display_name":"Larsen"},"score":0,"creation_date":1586061543,"post_id":19491231,"comment_id":107984342,"body_markdown":"Did you find an answer for this?","body":"Did you find an answer for this?"}],"answers":[{"tags":[],"owner":{"account_id":2825145,"reputation":2520,"user_id":2427937,"accept_rate":56,"display_name":"YoBre"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1382353199,"creation_date":1382353199,"answer_id":19492694,"question_id":19491231,"body_markdown":"I&#39;m working in scala but it&#39;s the same. Your code is right.\r\n\r\nThis is my, see if you can find differences:\r\n\r\n    val wb = new XSSFWorkbook(path)\r\n    for (id &lt;- 0.until(sheetTot)) {\r\n        val sh = wb.getSheetAt(id)    \r\n        print(sh.rowIterator().next().cellIterator().next().getCellStyle().getFillBackgroundColor())\r\n    }\r\n\r\nin my case the result is 64","title":"How to get cell&#39;s background color using apache poi?","body":"<p>I'm working in scala but it's the same. Your code is right.</p>\n\n<p>This is my, see if you can find differences:</p>\n\n<pre><code>val wb = new XSSFWorkbook(path)\nfor (id &lt;- 0.until(sheetTot)) {\n    val sh = wb.getSheetAt(id)    \n    print(sh.rowIterator().next().cellIterator().next().getCellStyle().getFillBackgroundColor())\n}\n</code></pre>\n\n<p>in my case the result is 64</p>\n"},{"tags":[],"owner":{"account_id":989232,"reputation":422,"user_id":1006964,"display_name":"Kartik Narayana Maringanti"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1388390120,"creation_date":1388390120,"answer_id":20835582,"question_id":19491231,"body_markdown":"Checkout this URL:\r\n\r\nhttps://issues.apache.org/bugzilla/show_bug.cgi?id=45492\r\n\r\n\r\n\r\n    Cell cell = row.getCell(1);\r\n    \t\t\tCellStyle cellStyle = cell.getCellStyle();\t\t\t\r\n    \t\t\tSystem.out.println(&quot;color = &quot; + getColorPattern(cellStyle.getFillForegroundColor()));\r\n\r\n\t\t\r\n\r\n\r\n    private short[] getColorPattern(short colorIdx){\t\t\r\n\t\tshort[] triplet = null;\r\n\t\tHSSFColor color = palette.getColor(colorIdx);\r\n\t\ttriplet = color.getTriplet();\t\t\r\n\t\tSystem.out.println(&quot;color : &quot; + triplet[0] +&quot;,&quot; + triplet[1] + &quot;,&quot; + triplet[2]);\r\n\t\treturn triplet;\r\n\t}\r\n\r\n\r\nThis returns the RGB codes but not exact ones. But its more or less the same color returned when compared with the actual color code in the XLS custom color picker.\r\n","title":"How to get cell&#39;s background color using apache poi?","body":"<p>Checkout this URL:</p>\n\n<p><a href=\"https://issues.apache.org/bugzilla/show_bug.cgi?id=45492\" rel=\"nofollow\">https://issues.apache.org/bugzilla/show_bug.cgi?id=45492</a></p>\n\n<pre><code>Cell cell = row.getCell(1);\n            CellStyle cellStyle = cell.getCellStyle();          \n            System.out.println(\"color = \" + getColorPattern(cellStyle.getFillForegroundColor()));\n\n\n\n\nprivate short[] getColorPattern(short colorIdx){        \n    short[] triplet = null;\n    HSSFColor color = palette.getColor(colorIdx);\n    triplet = color.getTriplet();       \n    System.out.println(\"color : \" + triplet[0] +\",\" + triplet[1] + \",\" + triplet[2]);\n    return triplet;\n}\n</code></pre>\n\n<p>This returns the RGB codes but not exact ones. But its more or less the same color returned when compared with the actual color code in the XLS custom color picker.</p>\n"},{"tags":[],"owner":{"account_id":25389,"reputation":14608,"user_id":65230,"accept_rate":84,"display_name":"Ascalonian"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1419345085,"creation_date":1419343593,"answer_id":27621997,"question_id":19491231,"body_markdown":"Try this:\r\n\r\n    row.getCell(0).getCellStyle().getFillForegroundColorColor().getARGBHex()\r\n\r\nNotice that `Color` is used twice","title":"How to get cell&#39;s background color using apache poi?","body":"<p>Try this:</p>\n\n<pre><code>row.getCell(0).getCellStyle().getFillForegroundColorColor().getARGBHex()\n</code></pre>\n\n<p>Notice that <code>Color</code> is used twice</p>\n"},{"tags":[],"owner":{"account_id":1854856,"reputation":160,"user_id":1680670,"accept_rate":80,"display_name":"Anthony Holland"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1444128055,"creation_date":1444128055,"answer_id":32967910,"question_id":19491231,"body_markdown":"The following is in Scala but it does show exactly how to get the colour from the object model. I wanted to instantiate a java.awt.Color object from the actual rgb values (which is useful partly because my debugger displays for me the actual colour of the object when I stop at breakpoints, and partly because this is for export to systems that have nothing to do with Excel). I&#39;m ignoring the colour&#39;s alpha value and my Scala may be a bit naive. I&#39;d suggest that if this doesn&#39;t work for you, you should set a break-point and examine the result of closely related method calls such as getFillBackgroundColorColor()\r\n\r\n    val rgb: Array[Byte] = cell.getCellStyle.getFillForegroundColorColor.getRgb\r\n    def toInt(b: Byte): Int = {\r\n      if (b&lt;0) 256+b else b\r\n    }\r\n    val rgbInts = rgb.map(toInt)\r\n    val color = new Color(rgbInts(0),rgbInts(1),rgbInts(2))","title":"How to get cell&#39;s background color using apache poi?","body":"<p>The following is in Scala but it does show exactly how to get the colour from the object model. I wanted to instantiate a java.awt.Color object from the actual rgb values (which is useful partly because my debugger displays for me the actual colour of the object when I stop at breakpoints, and partly because this is for export to systems that have nothing to do with Excel). I'm ignoring the colour's alpha value and my Scala may be a bit naive. I'd suggest that if this doesn't work for you, you should set a break-point and examine the result of closely related method calls such as getFillBackgroundColorColor()</p>\n\n<pre><code>val rgb: Array[Byte] = cell.getCellStyle.getFillForegroundColorColor.getRgb\ndef toInt(b: Byte): Int = {\n  if (b&lt;0) 256+b else b\n}\nval rgbInts = rgb.map(toInt)\nval color = new Color(rgbInts(0),rgbInts(1),rgbInts(2))\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13654018,"reputation":25,"user_id":9851070,"display_name":"shivaji"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1534750488,"creation_date":1534750488,"answer_id":51926002,"question_id":19491231,"body_markdown":"All the time its giving me no 64 \r\nthis is my code\r\n\r\n       for(Row r : my_sheet) {\r\n            for (Cell c : r) {\r\n\r\n                System.out.println(c.getCellStyle().getFillBackgroundColor() );\r\n                //if foreground filter color is not green then hide the record\r\n                if ( c.getColumnIndex()==1  &amp;&amp; c.getCellStyle().getFillBackgroundColor() !=17){\r\n                    r1=(XSSFRow) c.getRow();\r\n                    if (r1.getRowNum()!=0) { /* Ignore top row */\r\n                        /* Hide Row that does not meet Filter Criteria */\r\n                        r1.getCTRow().setHidden(true); }\r\n                }\r\n            }\r\n        }\r\n","title":"How to get cell&#39;s background color using apache poi?","body":"<p>All the time its giving me no 64 \nthis is my code</p>\n\n<pre><code>   for(Row r : my_sheet) {\n        for (Cell c : r) {\n\n            System.out.println(c.getCellStyle().getFillBackgroundColor() );\n            //if foreground filter color is not green then hide the record\n            if ( c.getColumnIndex()==1  &amp;&amp; c.getCellStyle().getFillBackgroundColor() !=17){\n                r1=(XSSFRow) c.getRow();\n                if (r1.getRowNum()!=0) { /* Ignore top row */\n                    /* Hide Row that does not meet Filter Criteria */\n                    r1.getCTRow().setHidden(true); }\n            }\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":658880,"reputation":6056,"user_id":1354879,"display_name":"Balazs Zsoldos"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658729743,"creation_date":1658729743,"answer_id":73104715,"question_id":19491231,"body_markdown":"There seem to be several options of getting the background color. When the color of the cell is specified in the following way:\r\n\r\n[![Background color selection in excel][1]][1]\r\n\r\nThe following returns the color code:\r\n\r\n    public static String getBackgroundColor(XSSFCell cell) {\r\n      byte[] rgbWithTint = cell.getCellStyle().getFillForegroundColorColor().getRGBWithTint();\r\n      if (rgbWithTint == null) {\r\n        return null;\r\n      }\r\n      return Hex.encodeHexString(rgbWithTint);\r\n    }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/uGodi.png","title":"How to get cell&#39;s background color using apache poi?","body":"<p>There seem to be several options of getting the background color. When the color of the cell is specified in the following way:</p>\n<p><a href=\"https://i.stack.imgur.com/uGodi.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uGodi.png\" alt=\"Background color selection in excel\" /></a></p>\n<p>The following returns the color code:</p>\n<pre><code>public static String getBackgroundColor(XSSFCell cell) {\n  byte[] rgbWithTint = cell.getCellStyle().getFillForegroundColorColor().getRGBWithTint();\n  if (rgbWithTint == null) {\n    return null;\n  }\n  return Hex.encodeHexString(rgbWithTint);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6714591,"reputation":490,"user_id":5176800,"accept_rate":80,"display_name":"Filou"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695200465,"creation_date":1695200465,"answer_id":77140870,"question_id":19491231,"body_markdown":"I also had the problem to only get the color index **64** every time I tried to read a color from a cell.\r\n\r\nAfter a lot of try-and-error I found out, that the worksheet had _conditionally coloring_ activated. It seems that you can not read the background color by `cell.getCellStyle().getFillForegroundColorColor()` if that is the case.\r\n\r\nAfter this realization, in my use case, I simply looked at the conditions the color is based on and extracted the information I needed. So I had no need to read the actual color I only needed to distinguish between states. \r\n\r\nAnyway I am sure that there is a possibility to read such a conditionally filled color with Apache POI. A good starting point might be the [ Quick-Guide to conditionally coloring][1].\r\n\r\n\r\n  [1]: https://poi.apache.org/components/spreadsheet/quick-guide.html#ConditionalFormatting","title":"How to get cell&#39;s background color using apache poi?","body":"<p>I also had the problem to only get the color index <strong>64</strong> every time I tried to read a color from a cell.</p>\n<p>After a lot of try-and-error I found out, that the worksheet had <em>conditionally coloring</em> activated. It seems that you can not read the background color by <code>cell.getCellStyle().getFillForegroundColorColor()</code> if that is the case.</p>\n<p>After this realization, in my use case, I simply looked at the conditions the color is based on and extracted the information I needed. So I had no need to read the actual color I only needed to distinguish between states.</p>\n<p>Anyway I am sure that there is a possibility to read such a conditionally filled color with Apache POI. A good starting point might be the <a href=\"https://poi.apache.org/components/spreadsheet/quick-guide.html#ConditionalFormatting\" rel=\"nofollow noreferrer\"> Quick-Guide to conditionally coloring</a>.</p>\n"}],"owner":{"account_id":1431512,"reputation":348,"user_id":1353830,"accept_rate":27,"display_name":"AAA"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13521,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"answer_count":7,"score":10,"last_activity_date":1695200465,"creation_date":1382349059,"question_id":19491231,"body_markdown":"How do we get `background color` of a `XSSFCell`. I tried using `XSSFCellStyle` but no luck.\r\n\r\n    FileInputStream fis = new FileInputStream(fileName);\r\n    XSSFWorkbook book = new XSSFWorkbook(fis);\r\n    XSSFSheet sheet = book.getSheetAt(0);\r\n    XSSFRow row = sheet.getRow(0);\r\n\t\t\r\n    System.out.println(row.getCell(0).getCellStyle().getFillForegroundColor());\r\n\r\nUsing these steps I am not able to get background color representation in `Short` type.","title":"How to get cell&#39;s background color using apache poi?","body":"<p>How do we get <code>background color</code> of a <code>XSSFCell</code>. I tried using <code>XSSFCellStyle</code> but no luck.</p>\n\n<pre><code>FileInputStream fis = new FileInputStream(fileName);\nXSSFWorkbook book = new XSSFWorkbook(fis);\nXSSFSheet sheet = book.getSheetAt(0);\nXSSFRow row = sheet.getRow(0);\n\nSystem.out.println(row.getCell(0).getCellStyle().getFillForegroundColor());\n</code></pre>\n\n<p>Using these steps I am not able to get background color representation in <code>Short</code> type.</p>\n"},{"tags":["java","visitor-pattern","compareto","double-dispatch"],"answers":[{"tags":[],"owner":{"account_id":14335361,"reputation":1220,"user_id":10355015,"display_name":"Dmitry Barskov"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1613147244,"creation_date":1613147244,"answer_id":66175475,"question_id":66175231,"body_markdown":"I&#39;m afraid visitor pattern is not applicable here, since it requires 2 interfaces (parent types/classes): Visitor and Element. But you have only one parent type.\r\n\r\nIn your case you can just create an integer number property `size` and use it for comparison.","title":"How to use a Double Dispatch with compareTo in JAVA?","body":"<p>I'm afraid visitor pattern is not applicable here, since it requires 2 interfaces (parent types/classes): Visitor and Element. But you have only one parent type.</p>\n<p>In your case you can just create an integer number property <code>size</code> and use it for comparison.</p>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1613155581,"creation_date":1613148751,"answer_id":66175873,"question_id":66175231,"body_markdown":"The [Answer by Barskov][1] is correct and wise. Probably the best solution for your scenario is to simply add a final static `relativeSize` field to each of the four classes. \r\n\r\nFor fun, let’s look at an alternative approach using an upcoming Java feature.\r\n\r\n\r\n# Sealed classes\r\n\r\nThe new [sealed classes][2] feature being [previewed][3] in [Java 16][4] makes this simpler. \r\n\r\nWhen all your allowed concrete types are known at compile-time, you can communicate that fact to the compiler. Mark the class or interface as `sealed`. Add `permits` with the names of implementing/extending classes. The compiler then enforces your claim, verifying that *all* the designated classes, and *only* the designated classes, extend/implement the sealed class/interface.\r\n\r\nWe also use [default methods][5]. Modern Java allows an interface to have code, as a `default` method to be run if the implementing classes lack that method.\r\n\r\n\r\nHere is some example code.\r\n\r\nNotice the keywords: `sealed`, `permits`, and `default`. \r\n\r\n```java\r\npackage work.basil.example.animalkingdom;\r\n\r\nimport java.util.List;\r\n\r\npublic sealed interface Animal                    // &#129092; sealed\r\n        extends Comparable &lt; Animal &gt;\r\n        permits Mouse, Bunny, Cat, Dog            // &#129092; permits\r\n{\r\n    void makeSound ( );\r\n\r\n    @Override\r\n    default public int compareTo ( Animal o )     // &#129092; default\r\n    {\r\n        List &lt; Class &gt; animalClasses = List.of( Mouse.class , Bunny.class , Cat.class , Dog.class );\r\n        return\r\n                Integer.compare\r\n                        (\r\n                                animalClasses.indexOf( this.getClass() ) ,\r\n                                animalClasses.indexOf( o.getClass() )\r\n                        )\r\n                ;\r\n    }\r\n}\r\n```\r\n\r\nThe concrete classes look like the following. We use `record` here, where the compiler implicitly creates the constructor, getters, `equals` &amp; `hashCode`, and `toString`. You could just as well use a conventional class.\r\n\r\n```java\r\npackage work.basil.example.animalkingdom;\r\n\r\nfinal public record Mouse(String name) implements Animal\r\n{\r\n    @Override\r\n    public void makeSound ( )\r\n    {\r\n        System.out.println( &quot;Squeak.&quot; );\r\n    }\r\n}\r\n```\r\n\r\nSee that in action.\r\n\r\n```java\r\npackage work.basil.example.animalkingdom;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.Collections;\r\nimport java.util.List;\r\n\r\npublic class App\r\n{\r\n    public static void main ( String[] args )\r\n    {\r\n        List &lt; Animal &gt; animals =\r\n                new ArrayList &lt;&gt;(\r\n                        List.of(\r\n                                new Mouse( &quot;Alice&quot; ) ,\r\n                                new Bunny( &quot;Bob&quot; ) ,\r\n                                new Cat( &quot;Carol&quot; ) ,\r\n                                new Dog( &quot;David&quot; ) ,\r\n                                new Mouse( &quot;Erin&quot; ) ,\r\n                                new Bunny( &quot;Frank&quot; ) ,\r\n                                new Cat( &quot;Grace&quot; ) ,\r\n                                new Dog( &quot;Heidi&quot; )\r\n                        )\r\n                );\r\n        System.out.println( &quot;animals = &quot; + animals );\r\n\r\n        Collections.sort( animals );\r\n        System.out.println( &quot;animals = &quot; + animals );\r\n    }\r\n}\r\n```\r\n\r\nWhen run.\r\n\r\n```none\r\nanimals = [Mouse[name=Alice], Bunny[name=Bob], Cat[name=Carol], Dog[name=David], Mouse[name=Erin], Bunny[name=Frank], Cat[name=Grace], Dog[name=Heidi]]\r\nanimals = [Mouse[name=Alice], Mouse[name=Erin], Bunny[name=Bob], Bunny[name=Frank], Cat[name=Carol], Cat[name=Grace], Dog[name=David], Dog[name=Heidi]]\r\n```\r\n\r\n## Do not use mere class comparison as built-in `compareTo`\r\n\r\nThe above code works, and was fun to try. But in real work you should not do this, not build-in such a `compareTo` implementation that merely looks at class only. \r\n\r\nRead the [`Comparable`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Comparable.html) Javadoc. You will see a discussion of how the `compareTo` method should be *consistent with `equals`*. \r\n\r\nYou would not consider two `Bunny` instances to be equal merely because they are both of the same class. You would also compare their content, the state of their contained data. In the case of a `record`, the default implementation of `equals` (and `hashCode`) examines each and every member field. In a conventional class, you would implement something similar, examining an `id` field or a `name` field or some such. \r\n\r\nWhen you do want to compare solely by class, use an external [`Comparator`][6] rather than implementing [`Comparable`][7] internally. Something like this:\r\n\r\n```java\r\npackage work.basil.example.animalkingdom;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.Collections;\r\nimport java.util.Comparator;\r\nimport java.util.List;\r\n\r\npublic class App\r\n{\r\n    public static void main ( String[] args )\r\n    {\r\n        List &lt; Animal &gt; animals =\r\n                new ArrayList &lt;&gt;(\r\n                        List.of(\r\n                                new Mouse( &quot;Alice&quot; ) ,\r\n                                new Bunny( &quot;Bob&quot; ) ,\r\n                                new Cat( &quot;Carol&quot; ) ,\r\n                                new Dog( &quot;David&quot; ) ,\r\n                                new Mouse( &quot;Erin&quot; ) ,\r\n                                new Bunny( &quot;Frank&quot; ) ,\r\n                                new Cat( &quot;Grace&quot; ) ,\r\n                                new Dog( &quot;Heidi&quot; )\r\n                        )\r\n                );\r\n        System.out.println( &quot;animals = &quot; + animals );\r\n\r\n        Collections.sort(\r\n                animals ,\r\n                new Comparator &lt; Animal &gt;()\r\n                {\r\n                    @Override\r\n                    public int compare ( Animal o1 , Animal o2 )\r\n                    {\r\n                        List &lt; Class &gt; animalClasses = List.of( Mouse.class , Bunny.class , Cat.class , Dog.class );\r\n                        return\r\n                                Integer.compare\r\n                                        (\r\n                                                animalClasses.indexOf( o1.getClass() ) ,\r\n                                                animalClasses.indexOf( o2.getClass() )\r\n                                        )\r\n                                ;\r\n                    }\r\n                } );\r\n        System.out.println( &quot;animals = &quot; + animals );\r\n    }\r\n}\r\n``` \r\n\r\nOr use the shorter lambda syntax.\r\n\r\n```java\r\n        Collections.sort(\r\n                animals ,\r\n                ( o1 , o2 ) -&gt; {\r\n                    List &lt; Class &gt; animalClasses = List.of( Mouse.class , Bunny.class , Cat.class , Dog.class );\r\n                    return\r\n                            Integer.compare\r\n                                    (\r\n                                            animalClasses.indexOf( o1.getClass() ) ,\r\n                                            animalClasses.indexOf( o2.getClass() )\r\n                                    )\r\n                            ;\r\n                } );\r\n```\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/66175475/642706\r\n  [2]: https://openjdk.java.net/jeps/397\r\n  [3]: https://openjdk.java.net/jeps/12\r\n  [4]: https://en.m.wikipedia.org/wiki/Java_version_history#Java_SE_16\r\n  [5]: https://docs.oracle.com/javase/tutorial/java/IandI/defaultmethods.html\r\n  [6]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Comparator.html\r\n  [7]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Comparable.html","title":"How to use a Double Dispatch with compareTo in JAVA?","body":"<p>The <a href=\"https://stackoverflow.com/a/66175475/642706\">Answer by Barskov</a> is correct and wise. Probably the best solution for your scenario is to simply add a final static <code>relativeSize</code> field to each of the four classes.</p>\n<p>For fun, let’s look at an alternative approach using an upcoming Java feature.</p>\n<h1>Sealed classes</h1>\n<p>The new <a href=\"https://openjdk.java.net/jeps/397\" rel=\"nofollow noreferrer\">sealed classes</a> feature being <a href=\"https://openjdk.java.net/jeps/12\" rel=\"nofollow noreferrer\">previewed</a> in <a href=\"https://en.m.wikipedia.org/wiki/Java_version_history#Java_SE_16\" rel=\"nofollow noreferrer\">Java 16</a> makes this simpler.</p>\n<p>When all your allowed concrete types are known at compile-time, you can communicate that fact to the compiler. Mark the class or interface as <code>sealed</code>. Add <code>permits</code> with the names of implementing/extending classes. The compiler then enforces your claim, verifying that <em>all</em> the designated classes, and <em>only</em> the designated classes, extend/implement the sealed class/interface.</p>\n<p>We also use <a href=\"https://docs.oracle.com/javase/tutorial/java/IandI/defaultmethods.html\" rel=\"nofollow noreferrer\">default methods</a>. Modern Java allows an interface to have code, as a <code>default</code> method to be run if the implementing classes lack that method.</p>\n<p>Here is some example code.</p>\n<p>Notice the keywords: <code>sealed</code>, <code>permits</code>, and <code>default</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package work.basil.example.animalkingdom;\n\nimport java.util.List;\n\npublic sealed interface Animal                    // 🡄 sealed\n        extends Comparable &lt; Animal &gt;\n        permits Mouse, Bunny, Cat, Dog            // 🡄 permits\n{\n    void makeSound ( );\n\n    @Override\n    default public int compareTo ( Animal o )     // 🡄 default\n    {\n        List &lt; Class &gt; animalClasses = List.of( Mouse.class , Bunny.class , Cat.class , Dog.class );\n        return\n                Integer.compare\n                        (\n                                animalClasses.indexOf( this.getClass() ) ,\n                                animalClasses.indexOf( o.getClass() )\n                        )\n                ;\n    }\n}\n</code></pre>\n<p>The concrete classes look like the following. We use <code>record</code> here, where the compiler implicitly creates the constructor, getters, <code>equals</code> &amp; <code>hashCode</code>, and <code>toString</code>. You could just as well use a conventional class.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package work.basil.example.animalkingdom;\n\nfinal public record Mouse(String name) implements Animal\n{\n    @Override\n    public void makeSound ( )\n    {\n        System.out.println( &quot;Squeak.&quot; );\n    }\n}\n</code></pre>\n<p>See that in action.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package work.basil.example.animalkingdom;\n\nimport java.util.ArrayList;\nimport java.util.Collections;\nimport java.util.List;\n\npublic class App\n{\n    public static void main ( String[] args )\n    {\n        List &lt; Animal &gt; animals =\n                new ArrayList &lt;&gt;(\n                        List.of(\n                                new Mouse( &quot;Alice&quot; ) ,\n                                new Bunny( &quot;Bob&quot; ) ,\n                                new Cat( &quot;Carol&quot; ) ,\n                                new Dog( &quot;David&quot; ) ,\n                                new Mouse( &quot;Erin&quot; ) ,\n                                new Bunny( &quot;Frank&quot; ) ,\n                                new Cat( &quot;Grace&quot; ) ,\n                                new Dog( &quot;Heidi&quot; )\n                        )\n                );\n        System.out.println( &quot;animals = &quot; + animals );\n\n        Collections.sort( animals );\n        System.out.println( &quot;animals = &quot; + animals );\n    }\n}\n</code></pre>\n<p>When run.</p>\n<pre class=\"lang-none prettyprint-override\"><code>animals = [Mouse[name=Alice], Bunny[name=Bob], Cat[name=Carol], Dog[name=David], Mouse[name=Erin], Bunny[name=Frank], Cat[name=Grace], Dog[name=Heidi]]\nanimals = [Mouse[name=Alice], Mouse[name=Erin], Bunny[name=Bob], Bunny[name=Frank], Cat[name=Carol], Cat[name=Grace], Dog[name=David], Dog[name=Heidi]]\n</code></pre>\n<h2>Do not use mere class comparison as built-in <code>compareTo</code></h2>\n<p>The above code works, and was fun to try. But in real work you should not do this, not build-in such a <code>compareTo</code> implementation that merely looks at class only.</p>\n<p>Read the <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Comparable.html\" rel=\"nofollow noreferrer\"><code>Comparable</code></a> Javadoc. You will see a discussion of how the <code>compareTo</code> method should be <em>consistent with <code>equals</code></em>.</p>\n<p>You would not consider two <code>Bunny</code> instances to be equal merely because they are both of the same class. You would also compare their content, the state of their contained data. In the case of a <code>record</code>, the default implementation of <code>equals</code> (and <code>hashCode</code>) examines each and every member field. In a conventional class, you would implement something similar, examining an <code>id</code> field or a <code>name</code> field or some such.</p>\n<p>When you do want to compare solely by class, use an external <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Comparator.html\" rel=\"nofollow noreferrer\"><code>Comparator</code></a> rather than implementing <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Comparable.html\" rel=\"nofollow noreferrer\"><code>Comparable</code></a> internally. Something like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package work.basil.example.animalkingdom;\n\nimport java.util.ArrayList;\nimport java.util.Collections;\nimport java.util.Comparator;\nimport java.util.List;\n\npublic class App\n{\n    public static void main ( String[] args )\n    {\n        List &lt; Animal &gt; animals =\n                new ArrayList &lt;&gt;(\n                        List.of(\n                                new Mouse( &quot;Alice&quot; ) ,\n                                new Bunny( &quot;Bob&quot; ) ,\n                                new Cat( &quot;Carol&quot; ) ,\n                                new Dog( &quot;David&quot; ) ,\n                                new Mouse( &quot;Erin&quot; ) ,\n                                new Bunny( &quot;Frank&quot; ) ,\n                                new Cat( &quot;Grace&quot; ) ,\n                                new Dog( &quot;Heidi&quot; )\n                        )\n                );\n        System.out.println( &quot;animals = &quot; + animals );\n\n        Collections.sort(\n                animals ,\n                new Comparator &lt; Animal &gt;()\n                {\n                    @Override\n                    public int compare ( Animal o1 , Animal o2 )\n                    {\n                        List &lt; Class &gt; animalClasses = List.of( Mouse.class , Bunny.class , Cat.class , Dog.class );\n                        return\n                                Integer.compare\n                                        (\n                                                animalClasses.indexOf( o1.getClass() ) ,\n                                                animalClasses.indexOf( o2.getClass() )\n                                        )\n                                ;\n                    }\n                } );\n        System.out.println( &quot;animals = &quot; + animals );\n    }\n}\n</code></pre>\n<p>Or use the shorter lambda syntax.</p>\n<pre class=\"lang-java prettyprint-override\"><code>        Collections.sort(\n                animals ,\n                ( o1 , o2 ) -&gt; {\n                    List &lt; Class &gt; animalClasses = List.of( Mouse.class , Bunny.class , Cat.class , Dog.class );\n                    return\n                            Integer.compare\n                                    (\n                                            animalClasses.indexOf( o1.getClass() ) ,\n                                            animalClasses.indexOf( o2.getClass() )\n                                    )\n                            ;\n                } );\n</code></pre>\n"}],"owner":{"account_id":9750085,"reputation":164,"user_id":8035528,"display_name":"user140536"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":313,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":66175873,"answer_count":2,"score":1,"last_activity_date":1695200253,"creation_date":1613146329,"question_id":66175231,"body_markdown":"A beginner of Java... I&#39;m a bit confused by how to apply double dispatch (and visitor pattern) together with the compareTo method in JAVA.  \r\n\r\nExample Scenario:  \r\nLet&#39;s say I have an `Animal` interface where I will implement 4 classes: *dog, cat, mouse, and bunny*.  \r\nI want to make sure that if I sort a list of these animals, mouse &lt; bunny &lt; cat &lt; dog.  \r\nWondering how I shall achieve it?  \r\nRight now the best I can think of is adding some if-elseif into the compareTo... but this is obviously not dispatchy...\r\nThanks!  \r\n\r\nThe `Animal` interface\r\n```\r\npackage animals;\r\n\r\npublic interface Animal extends Comparable&lt;Animal&gt; {\r\n  void makeSound();\r\n}\r\n\r\n```\r\n\r\nThe `Dog` class\r\n```\r\npackage animals;\r\n\r\npublic class Dog implements Animal {\r\n  @Override public void makeSound() {\r\n    System.out.println(&quot;wow&quot;);\r\n  }\r\n\r\n  @Override public int compareTo(Animal o) {\r\n    return 0; // ???? if (o instanceof Cat) {return 1}\r\n  }\r\n}\r\n\r\n```\r\n\r\n","title":"How to use a Double Dispatch with compareTo in JAVA?","body":"<p>A beginner of Java... I'm a bit confused by how to apply double dispatch (and visitor pattern) together with the compareTo method in JAVA.</p>\n<p>Example Scenario:<br />\nLet's say I have an <code>Animal</code> interface where I will implement 4 classes: <em>dog, cat, mouse, and bunny</em>.<br />\nI want to make sure that if I sort a list of these animals, mouse &lt; bunny &lt; cat &lt; dog.<br />\nWondering how I shall achieve it?<br />\nRight now the best I can think of is adding some if-elseif into the compareTo... but this is obviously not dispatchy...\nThanks!</p>\n<p>The <code>Animal</code> interface</p>\n<pre><code>package animals;\n\npublic interface Animal extends Comparable&lt;Animal&gt; {\n  void makeSound();\n}\n\n</code></pre>\n<p>The <code>Dog</code> class</p>\n<pre><code>package animals;\n\npublic class Dog implements Animal {\n  @Override public void makeSound() {\n    System.out.println(&quot;wow&quot;);\n  }\n\n  @Override public int compareTo(Animal o) {\n    return 0; // ???? if (o instanceof Cat) {return 1}\n  }\n}\n\n</code></pre>\n"},{"tags":["java","android","xml"],"comments":[{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1695198201,"post_id":77140515,"comment_id":135990588,"body_markdown":"Post complete stacktrace please of the exception.","body":"Post complete stacktrace please of the exception."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1695198260,"post_id":77140515,"comment_id":135990604,"body_markdown":"Are you saying a video file is created?","body":"Are you saying a video file is created?"},{"owner":{"account_id":26002491,"reputation":1,"user_id":19712762,"display_name":"Priyabrata Nayak"},"score":0,"creation_date":1695199743,"post_id":77140515,"comment_id":135990889,"body_markdown":"@blackapps Yes the file is created","body":"@blackapps Yes the file is created"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1695199810,"post_id":77140515,"comment_id":135990903,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1695200425,"post_id":77140515,"comment_id":135991029,"body_markdown":"The file can be created but what is its size? 0 bytes? As `java.lang.RuntimeException: start failed.` would imply that no recording is done. Can you play that file?","body":"The file can be created but what is its size? 0 bytes? As <code>java.lang.RuntimeException: start failed.</code> would imply that no recording is done. Can you play that file?"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1695200700,"post_id":77140515,"comment_id":135991090,"body_markdown":"`the app crashes with a RuntimeException: ` Catch that exception and display a toast() to the user to inform.","body":"<code>the app crashes with a RuntimeException: </code> Catch that exception and display a toast() to the user to inform."},{"owner":{"account_id":15268897,"reputation":1894,"user_id":11016652,"display_name":"zomega"},"score":0,"creation_date":1695201270,"post_id":77140515,"comment_id":135991192,"body_markdown":"This question has already been asked here: https://stackoverflow.com/questions/47266765/mediarecorder-start-failed-22","body":"This question has already been asked here: <a href=\"https://stackoverflow.com/questions/47266765/mediarecorder-start-failed-22\" title=\"mediarecorder start failed 22\">stackoverflow.com/questions/47266765/&hellip;</a>"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1695204485,"post_id":77140515,"comment_id":135991907,"body_markdown":"`start failed: -22` find out what error code -22 means.","body":"<code>start failed: -22</code> find out what error code -22 means."},{"owner":{"account_id":26002491,"reputation":1,"user_id":19712762,"display_name":"Priyabrata Nayak"},"score":0,"creation_date":1695211197,"post_id":77140515,"comment_id":135993305,"body_markdown":"@blackapps The file size is 0 bytes only. And for the error code -22 I searched on internet a lot but not able to find anywhere.","body":"@blackapps The file size is 0 bytes only. And for the error code -22 I searched on internet a lot but not able to find anywhere."},{"owner":{"account_id":26002491,"reputation":1,"user_id":19712762,"display_name":"Priyabrata Nayak"},"score":0,"creation_date":1695211267,"post_id":77140515,"comment_id":135993323,"body_markdown":"@zomega Yeah but the answer is not there","body":"@zomega Yeah but the answer is not there"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1695216557,"post_id":77140515,"comment_id":135994690,"body_markdown":"Yes the answer is there and also the error code description for -22.","body":"Yes the answer is there and also the error code description for -22."}],"answers":[{"tags":[],"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695198011,"creation_date":1695198011,"answer_id":77140583,"question_id":77140515,"body_markdown":"&gt;&gt;        String outputFilePath = Environment.getExternalStorageDirectory() + &quot;/my_video.mp4&quot;;\r\n\r\nIn Android 11+ devices your app cannot create files in root of external storage.\r\n\r\n(You could have tried just to create that file yourself to see that it does not go).\r\n\r\nInstead use one of the public directories on external storage that are already there like Movies of Videos. (have a look first which is available)\r\n\r\nAnd try to create a file there yourself for a test.","title":"Android Application using java which can record the video and audio with just one click of a button","body":"<blockquote>\n<blockquote>\n<pre><code>   String outputFilePath = Environment.getExternalStorageDirectory() + &quot;/my_video.mp4&quot;;\n</code></pre>\n</blockquote>\n</blockquote>\n<p>In Android 11+ devices your app cannot create files in root of external storage.</p>\n<p>(You could have tried just to create that file yourself to see that it does not go).</p>\n<p>Instead use one of the public directories on external storage that are already there like Movies of Videos. (have a look first which is available)</p>\n<p>And try to create a file there yourself for a test.</p>\n"}],"owner":{"account_id":26002491,"reputation":1,"user_id":19712762,"display_name":"Priyabrata Nayak"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695200142,"creation_date":1695197562,"question_id":77140515,"body_markdown":"I am working on a project which can record the video with just single click of a button. I am able to record the audio easily but when I try to record the video the app crashes with a RuntimeException: start failed -22. Please help me on this.\r\n\r\n\r\nBelow is my code. Thanks for support\r\n\r\n\r\nactivity_video_recorder.xml\r\n```\r\n&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;&gt;\r\n\r\n    &lt;Button\r\n        android:id=&quot;@+id/recordButton&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:text=&quot;Start Recording&quot;\r\n        android:layout_centerInParent=&quot;true&quot; /&gt;\r\n\r\n&lt;/RelativeLayout&gt;\r\n\r\n```\r\n\r\n\r\n\r\nVideoRecorderActivity.java\r\n```\r\npackage com.pns.loginregisterapp;\r\n\r\nimport android.Manifest;\r\nimport android.content.pm.PackageManager;\r\nimport android.os.Bundle;\r\nimport android.os.Handler;\r\nimport android.widget.Button;\r\n\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.core.app.ActivityCompat;\r\nimport androidx.core.content.ContextCompat;\r\n\r\npublic class VideoRecorderActivity extends AppCompatActivity {\r\n\r\n    private static final int REQUEST_PERMISSIONS = 1;\r\n\r\n    @Override\r\n    protected void onCreate(@Nullable Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_video_recorder);\r\n\r\n        Button recordButton = findViewById(R.id.recordButton);\r\n        recordButton.setOnClickListener(view -&gt;{\r\n                VideoRecorder videoRecorder = new VideoRecorder();\r\n                videoRecorder.startRecording();\r\n\r\n                // Stop recording after 10sec\r\n                Handler handler = new Handler();\r\n                handler.postDelayed(() -&gt; videoRecorder.stopRecording(), 10000);\r\n        });\r\n\r\n        if (!hasPermissions()) {\r\n            requestPermissions();\r\n        }\r\n    }\r\n\r\n    private boolean hasPermissions() {\r\n        return ContextCompat.checkSelfPermission(this, Manifest.permission.RECORD_AUDIO) == PackageManager.PERMISSION_GRANTED\r\n                &amp;&amp; ContextCompat.checkSelfPermission(this, Manifest.permission.WRITE_EXTERNAL_STORAGE) == PackageManager.PERMISSION_GRANTED\r\n                &amp;&amp; ContextCompat.checkSelfPermission(this, Manifest.permission.CAMERA) == PackageManager.PERMISSION_GRANTED;\r\n    }\r\n\r\n    private void requestPermissions() {\r\n        ActivityCompat.requestPermissions(this,\r\n                new String[]{Manifest.permission.RECORD_AUDIO, Manifest.permission.CAMERA, Manifest.permission.WRITE_EXTERNAL_STORAGE},\r\n                REQUEST_PERMISSIONS);\r\n    }\r\n}\r\n\r\n\r\n```\r\n\r\n\r\n\r\nVideoRecorder.java\r\n```\r\npackage com.pns.loginregisterapp;\r\n\r\nimport android.media.MediaRecorder;\r\nimport android.os.Environment;\r\nimport android.util.Log;\r\n\r\nimport java.io.IOException;\r\n\r\npublic class VideoRecorder {\r\n\r\n    private MediaRecorder mediaRecorder;\r\n    private boolean isRecording = false;\r\n\r\n    public void startRecording() {\r\n        if (isRecording) {\r\n            Log.e(&quot;VideoRecorder&quot;, &quot;Already recording.&quot;);\r\n            return;\r\n        }\r\n        \r\n        mediaRecorder = new MediaRecorder();\r\n        mediaRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);\r\n        mediaRecorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);\r\n        mediaRecorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);\r\n        mediaRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AAC);\r\n        mediaRecorder.setVideoEncoder(MediaRecorder.VideoEncoder.DEFAULT);\r\n//        mediaRecorder.setVideoFrameRate(30);\r\n//        mediaRecorder.setVideoSize(1280,720);\r\n\r\n\r\n        String outputFilePath = Environment.getExternalStorageDirectory() + &quot;/my_video.mp4&quot;;\r\n        Log.e(&quot;TAG&quot;,outputFilePath);\r\n        mediaRecorder.setOutputFile(outputFilePath);\r\n\r\n        try {\r\n            mediaRecorder.prepare();\r\n            mediaRecorder.start();\r\n            isRecording = true;\r\n            Log.d(&quot;VideoRecorder&quot;, &quot;Recording started.&quot;);\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n            Log.e(&quot;VideoRecorder&quot;, &quot;startRecording() failed: &quot; + e.getMessage());\r\n        }\r\n    }\r\n\r\n    public void stopRecording() {\r\n        if (!isRecording) {\r\n            Log.e(&quot;VideoRecorder&quot;, &quot;Not recording.&quot;);\r\n            return;\r\n        }\r\n\r\n        try {\r\n            mediaRecorder.stop();\r\n            mediaRecorder.release();\r\n            isRecording = false;\r\n            Log.d(&quot;VideoRecorder&quot;, &quot;Recording stopped.&quot;);\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n            Log.e(&quot;VideoRecorder&quot;, &quot;stopRecording() failed: &quot; + e.getMessage());\r\n        }\r\n    }\r\n}\r\n\r\n```\r\nEdit:\r\nDetailed Logcat\r\n```\r\n---------------------------- PROCESS STARTED (19819) for package com.pns.loginregisterapp ----------------------------\r\n--------- beginning of system\r\n--------- beginning of main\r\n2023-09-20 14:18:06.268 19819-19819 zygote64                com.pns.loginregisterapp             I  Late-enabling -Xcheck:jni\r\n2023-09-20 14:18:07.033 19819-19819 AppCompatDelegate       com.pns.loginregisterapp             D  Checking for metadata for AppLocalesMetadataHolderService : Service not found\r\n2023-09-20 14:18:07.077 19819-19819 FtBuild                 com.pns.loginregisterapp             I  getRomVersion mRomVer=4.0\r\n2023-09-20 14:18:07.235 19819-19819 DecorView               com.pns.loginregisterapp             I  setWindowBackground mBackgroundPadding = Rect(0, 0 - 0, 0), mFramePadding = Rect(0, 0 - 0, 0), pkg = com.pns.loginregisterapp\r\n2023-09-20 14:18:07.462 19819-19904 OpenGLRenderer          com.pns.loginregisterapp             D  HWUI GL Pipeline\r\n2023-09-20 14:18:07.501 19819-19819 TouchMotionHandler      com.pns.loginregisterapp             I  handler onAttached\r\n2023-09-20 14:18:07.582 19819-19904 Adreno-EGL              com.pns.loginregisterapp             I  &lt;qeglDrvAPI_eglInitialize:379&gt;: QUALCOMM Build: 11/14/18, f979681, I4e9dba44e5\r\n2023-09-20 14:18:07.593 19819-19904 zygote64                com.pns.loginregisterapp             I  android::hardware::configstore::V1_0::ISurfaceFlingerConfigs::hasWideColorDisplay retrieved: 0\r\n2023-09-20 14:18:07.594 19819-19904 OpenGLRenderer          com.pns.loginregisterapp             I  Initialized EGL, version 1.4\r\n2023-09-20 14:18:07.594 19819-19904 OpenGLRenderer          com.pns.loginregisterapp             D  Swap behavior 1\r\n2023-09-20 14:18:07.595 19819-19819 RenderThread            com.pns.loginregisterapp             W  type=1400 audit(0.0:582): avc: denied { search } for name=&quot;kgsl-3d0&quot; dev=&quot;sysfs&quot; ino=22816 scontext=u:r:untrusted_app:s0:c512,c768 tcontext=u:object_r:sysfs_kgsl:s0 tclass=dir permissive=0\r\n2023-09-20 14:18:07.596 19819-19904 Adreno-ES20             com.pns.loginregisterapp             W  &lt;get_gpu_clk:229&gt;: open failed: errno 13\r\n2023-09-20 14:18:07.598 19819-19904 Adreno-EGL              com.pns.loginregisterapp             W  &lt;qeglDrvAPI_eglGetConfigAttrib:612&gt;: EGL_BAD_ATTRIBUTE\r\n2023-09-20 14:18:07.613 19819-19904 Adreno-EGL              com.pns.loginregisterapp             W  &lt;qeglDrvAPI_eglGetConfigAttrib:612&gt;: EGL_BAD_ATTRIBUTE\r\n2023-09-20 14:18:17.001 19819-19819 MediaRecorder           com.pns.loginregisterapp             V  constructor\r\n2023-09-20 14:18:17.003 19819-19819 MediaRecorder           com.pns.loginregisterapp             V  doCleanUp\r\n2023-09-20 14:18:17.003 19819-19819 MediaRecorder           com.pns.loginregisterapp             V  setListener\r\n2023-09-20 14:18:17.003 19819-19819 MediaRecorder           com.pns.loginregisterapp             V  setClientName\r\n2023-09-20 14:18:17.004 19819-19819 MediaRecorder           com.pns.loginregisterapp             V  setAudioSource(1)\r\n2023-09-20 14:18:17.004 19819-19819 MediaRecorder           com.pns.loginregisterapp             V  Call init() since the media recorder is not initialized yet\r\n2023-09-20 14:18:17.004 19819-19819 MediaRecorder           com.pns.loginregisterapp             V  init\r\n2023-09-20 14:18:17.009 19819-19819 MediaRecorder           com.pns.loginregisterapp             V  setVideoSource(1)\r\n2023-09-20 14:18:17.010 19819-19819 MediaRecorder           com.pns.loginregisterapp             V  setOutputFormat(2)\r\n2023-09-20 14:18:17.011 19819-19819 MediaRecorder           com.pns.loginregisterapp             V  setAudioEncoder(3)\r\n2023-09-20 14:18:17.012 19819-19819 MediaRecorder           com.pns.loginregisterapp             V  setVideoEncoder(0)\r\n2023-09-20 14:18:17.015 19819-19819 TAG                     com.pns.loginregisterapp             E  /storage/emulated/0/my_video.mp4\r\n2023-09-20 14:18:17.017 19819-19819 MediaRecorder           com.pns.loginregisterapp             V  setOutputFile(57)\r\n2023-09-20 14:18:17.018 19819-19819 MediaRecorder           com.pns.loginregisterapp             V  prepare\r\n2023-09-20 14:18:17.018 19819-19819 MediaRecorder           com.pns.loginregisterapp             V  start\r\n2023-09-20 14:18:17.371 19819-19819 MediaRecorder           com.pns.loginregisterapp             E  start failed: -22\r\n--------- beginning of crash\r\n2023-09-20 14:18:17.372 19819-19819 AndroidRuntime          com.pns.loginregisterapp             D  Shutting down VM\r\n2023-09-20 14:18:17.377 19819-19819 AndroidRuntime          com.pns.loginregisterapp             E  FATAL EXCEPTION: main\r\n                                                                                                    Process: com.pns.loginregisterapp, PID: 19819\r\n                                                                                                    java.lang.RuntimeException: start failed.\r\n                                                                                                    \tat android.media.MediaRecorder.start(Native Method)\r\n                                                                                                    \tat com.pns.loginregisterapp.VideoRecorder.startRecording(VideoRecorder.java:36)\r\n                                                                                                    \tat com.pns.loginregisterapp.VideoRecorderActivity.lambda$onCreate$1(VideoRecorderActivity.java:26)\r\n                                                                                                    \tat com.pns.loginregisterapp.VideoRecorderActivity$$ExternalSyntheticLambda0.onClick(Unknown Source:0)\r\n                                                                                                    \tat android.view.View.performClick(View.java:6319)\r\n                                                                                                    \tat com.google.android.material.button.MaterialButton.performClick(MaterialButton.java:1131)\r\n                                                                                                    \tat android.view.View$PerformClick.run(View.java:24955)\r\n                                                                                                    \tat android.os.Handler.handleCallback(Handler.java:790)\r\n                                                                                                    \tat android.os.Handler.dispatchMessage(Handler.java:99)\r\n                                                                                                    \tat android.os.Looper.loop(Looper.java:192)\r\n                                                                                                    \tat android.app.ActivityThread.main(ActivityThread.java:6702)\r\n                                                                                                    \tat java.lang.reflect.Method.invoke(Native Method)\r\n                                                                                                    \tat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:549)\r\n                                                                                                    \tat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:826)\r\n---------------------------- PROCESS ENDED (19819) for package com.pns.loginregisterapp ----------------------------\r\n2023-09-20 14:18:17.421 19819-19819 Process                 com.pns.loginregisterapp             I  Sending signal. PID: 19819 SIG: 9\r\n\r\n```\r\n\r\n\r\nI am trying to get both video and audio in a MP4 file but able to record only audio","title":"Android Application using java which can record the video and audio with just one click of a button","body":"<p>I am working on a project which can record the video with just single click of a button. I am able to record the audio easily but when I try to record the video the app crashes with a RuntimeException: start failed -22. Please help me on this.</p>\n<p>Below is my code. Thanks for support</p>\n<p>activity_video_recorder.xml</p>\n<pre><code>&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;&gt;\n\n    &lt;Button\n        android:id=&quot;@+id/recordButton&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:text=&quot;Start Recording&quot;\n        android:layout_centerInParent=&quot;true&quot; /&gt;\n\n&lt;/RelativeLayout&gt;\n\n</code></pre>\n<p>VideoRecorderActivity.java</p>\n<pre><code>package com.pns.loginregisterapp;\n\nimport android.Manifest;\nimport android.content.pm.PackageManager;\nimport android.os.Bundle;\nimport android.os.Handler;\nimport android.widget.Button;\n\nimport androidx.annotation.Nullable;\nimport androidx.appcompat.app.AppCompatActivity;\nimport androidx.core.app.ActivityCompat;\nimport androidx.core.content.ContextCompat;\n\npublic class VideoRecorderActivity extends AppCompatActivity {\n\n    private static final int REQUEST_PERMISSIONS = 1;\n\n    @Override\n    protected void onCreate(@Nullable Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_video_recorder);\n\n        Button recordButton = findViewById(R.id.recordButton);\n        recordButton.setOnClickListener(view -&gt;{\n                VideoRecorder videoRecorder = new VideoRecorder();\n                videoRecorder.startRecording();\n\n                // Stop recording after 10sec\n                Handler handler = new Handler();\n                handler.postDelayed(() -&gt; videoRecorder.stopRecording(), 10000);\n        });\n\n        if (!hasPermissions()) {\n            requestPermissions();\n        }\n    }\n\n    private boolean hasPermissions() {\n        return ContextCompat.checkSelfPermission(this, Manifest.permission.RECORD_AUDIO) == PackageManager.PERMISSION_GRANTED\n                &amp;&amp; ContextCompat.checkSelfPermission(this, Manifest.permission.WRITE_EXTERNAL_STORAGE) == PackageManager.PERMISSION_GRANTED\n                &amp;&amp; ContextCompat.checkSelfPermission(this, Manifest.permission.CAMERA) == PackageManager.PERMISSION_GRANTED;\n    }\n\n    private void requestPermissions() {\n        ActivityCompat.requestPermissions(this,\n                new String[]{Manifest.permission.RECORD_AUDIO, Manifest.permission.CAMERA, Manifest.permission.WRITE_EXTERNAL_STORAGE},\n                REQUEST_PERMISSIONS);\n    }\n}\n\n\n</code></pre>\n<p>VideoRecorder.java</p>\n<pre><code>package com.pns.loginregisterapp;\n\nimport android.media.MediaRecorder;\nimport android.os.Environment;\nimport android.util.Log;\n\nimport java.io.IOException;\n\npublic class VideoRecorder {\n\n    private MediaRecorder mediaRecorder;\n    private boolean isRecording = false;\n\n    public void startRecording() {\n        if (isRecording) {\n            Log.e(&quot;VideoRecorder&quot;, &quot;Already recording.&quot;);\n            return;\n        }\n        \n        mediaRecorder = new MediaRecorder();\n        mediaRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);\n        mediaRecorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);\n        mediaRecorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);\n        mediaRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AAC);\n        mediaRecorder.setVideoEncoder(MediaRecorder.VideoEncoder.DEFAULT);\n//        mediaRecorder.setVideoFrameRate(30);\n//        mediaRecorder.setVideoSize(1280,720);\n\n\n        String outputFilePath = Environment.getExternalStorageDirectory() + &quot;/my_video.mp4&quot;;\n        Log.e(&quot;TAG&quot;,outputFilePath);\n        mediaRecorder.setOutputFile(outputFilePath);\n\n        try {\n            mediaRecorder.prepare();\n            mediaRecorder.start();\n            isRecording = true;\n            Log.d(&quot;VideoRecorder&quot;, &quot;Recording started.&quot;);\n        } catch (IOException e) {\n            e.printStackTrace();\n            Log.e(&quot;VideoRecorder&quot;, &quot;startRecording() failed: &quot; + e.getMessage());\n        }\n    }\n\n    public void stopRecording() {\n        if (!isRecording) {\n            Log.e(&quot;VideoRecorder&quot;, &quot;Not recording.&quot;);\n            return;\n        }\n\n        try {\n            mediaRecorder.stop();\n            mediaRecorder.release();\n            isRecording = false;\n            Log.d(&quot;VideoRecorder&quot;, &quot;Recording stopped.&quot;);\n        } catch (Exception e) {\n            e.printStackTrace();\n            Log.e(&quot;VideoRecorder&quot;, &quot;stopRecording() failed: &quot; + e.getMessage());\n        }\n    }\n}\n\n</code></pre>\n<p>Edit:\nDetailed Logcat</p>\n<pre><code>---------------------------- PROCESS STARTED (19819) for package com.pns.loginregisterapp ----------------------------\n--------- beginning of system\n--------- beginning of main\n2023-09-20 14:18:06.268 19819-19819 zygote64                com.pns.loginregisterapp             I  Late-enabling -Xcheck:jni\n2023-09-20 14:18:07.033 19819-19819 AppCompatDelegate       com.pns.loginregisterapp             D  Checking for metadata for AppLocalesMetadataHolderService : Service not found\n2023-09-20 14:18:07.077 19819-19819 FtBuild                 com.pns.loginregisterapp             I  getRomVersion mRomVer=4.0\n2023-09-20 14:18:07.235 19819-19819 DecorView               com.pns.loginregisterapp             I  setWindowBackground mBackgroundPadding = Rect(0, 0 - 0, 0), mFramePadding = Rect(0, 0 - 0, 0), pkg = com.pns.loginregisterapp\n2023-09-20 14:18:07.462 19819-19904 OpenGLRenderer          com.pns.loginregisterapp             D  HWUI GL Pipeline\n2023-09-20 14:18:07.501 19819-19819 TouchMotionHandler      com.pns.loginregisterapp             I  handler onAttached\n2023-09-20 14:18:07.582 19819-19904 Adreno-EGL              com.pns.loginregisterapp             I  &lt;qeglDrvAPI_eglInitialize:379&gt;: QUALCOMM Build: 11/14/18, f979681, I4e9dba44e5\n2023-09-20 14:18:07.593 19819-19904 zygote64                com.pns.loginregisterapp             I  android::hardware::configstore::V1_0::ISurfaceFlingerConfigs::hasWideColorDisplay retrieved: 0\n2023-09-20 14:18:07.594 19819-19904 OpenGLRenderer          com.pns.loginregisterapp             I  Initialized EGL, version 1.4\n2023-09-20 14:18:07.594 19819-19904 OpenGLRenderer          com.pns.loginregisterapp             D  Swap behavior 1\n2023-09-20 14:18:07.595 19819-19819 RenderThread            com.pns.loginregisterapp             W  type=1400 audit(0.0:582): avc: denied { search } for name=&quot;kgsl-3d0&quot; dev=&quot;sysfs&quot; ino=22816 scontext=u:r:untrusted_app:s0:c512,c768 tcontext=u:object_r:sysfs_kgsl:s0 tclass=dir permissive=0\n2023-09-20 14:18:07.596 19819-19904 Adreno-ES20             com.pns.loginregisterapp             W  &lt;get_gpu_clk:229&gt;: open failed: errno 13\n2023-09-20 14:18:07.598 19819-19904 Adreno-EGL              com.pns.loginregisterapp             W  &lt;qeglDrvAPI_eglGetConfigAttrib:612&gt;: EGL_BAD_ATTRIBUTE\n2023-09-20 14:18:07.613 19819-19904 Adreno-EGL              com.pns.loginregisterapp             W  &lt;qeglDrvAPI_eglGetConfigAttrib:612&gt;: EGL_BAD_ATTRIBUTE\n2023-09-20 14:18:17.001 19819-19819 MediaRecorder           com.pns.loginregisterapp             V  constructor\n2023-09-20 14:18:17.003 19819-19819 MediaRecorder           com.pns.loginregisterapp             V  doCleanUp\n2023-09-20 14:18:17.003 19819-19819 MediaRecorder           com.pns.loginregisterapp             V  setListener\n2023-09-20 14:18:17.003 19819-19819 MediaRecorder           com.pns.loginregisterapp             V  setClientName\n2023-09-20 14:18:17.004 19819-19819 MediaRecorder           com.pns.loginregisterapp             V  setAudioSource(1)\n2023-09-20 14:18:17.004 19819-19819 MediaRecorder           com.pns.loginregisterapp             V  Call init() since the media recorder is not initialized yet\n2023-09-20 14:18:17.004 19819-19819 MediaRecorder           com.pns.loginregisterapp             V  init\n2023-09-20 14:18:17.009 19819-19819 MediaRecorder           com.pns.loginregisterapp             V  setVideoSource(1)\n2023-09-20 14:18:17.010 19819-19819 MediaRecorder           com.pns.loginregisterapp             V  setOutputFormat(2)\n2023-09-20 14:18:17.011 19819-19819 MediaRecorder           com.pns.loginregisterapp             V  setAudioEncoder(3)\n2023-09-20 14:18:17.012 19819-19819 MediaRecorder           com.pns.loginregisterapp             V  setVideoEncoder(0)\n2023-09-20 14:18:17.015 19819-19819 TAG                     com.pns.loginregisterapp             E  /storage/emulated/0/my_video.mp4\n2023-09-20 14:18:17.017 19819-19819 MediaRecorder           com.pns.loginregisterapp             V  setOutputFile(57)\n2023-09-20 14:18:17.018 19819-19819 MediaRecorder           com.pns.loginregisterapp             V  prepare\n2023-09-20 14:18:17.018 19819-19819 MediaRecorder           com.pns.loginregisterapp             V  start\n2023-09-20 14:18:17.371 19819-19819 MediaRecorder           com.pns.loginregisterapp             E  start failed: -22\n--------- beginning of crash\n2023-09-20 14:18:17.372 19819-19819 AndroidRuntime          com.pns.loginregisterapp             D  Shutting down VM\n2023-09-20 14:18:17.377 19819-19819 AndroidRuntime          com.pns.loginregisterapp             E  FATAL EXCEPTION: main\n                                                                                                    Process: com.pns.loginregisterapp, PID: 19819\n                                                                                                    java.lang.RuntimeException: start failed.\n                                                                                                        at android.media.MediaRecorder.start(Native Method)\n                                                                                                        at com.pns.loginregisterapp.VideoRecorder.startRecording(VideoRecorder.java:36)\n                                                                                                        at com.pns.loginregisterapp.VideoRecorderActivity.lambda$onCreate$1(VideoRecorderActivity.java:26)\n                                                                                                        at com.pns.loginregisterapp.VideoRecorderActivity$$ExternalSyntheticLambda0.onClick(Unknown Source:0)\n                                                                                                        at android.view.View.performClick(View.java:6319)\n                                                                                                        at com.google.android.material.button.MaterialButton.performClick(MaterialButton.java:1131)\n                                                                                                        at android.view.View$PerformClick.run(View.java:24955)\n                                                                                                        at android.os.Handler.handleCallback(Handler.java:790)\n                                                                                                        at android.os.Handler.dispatchMessage(Handler.java:99)\n                                                                                                        at android.os.Looper.loop(Looper.java:192)\n                                                                                                        at android.app.ActivityThread.main(ActivityThread.java:6702)\n                                                                                                        at java.lang.reflect.Method.invoke(Native Method)\n                                                                                                        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:549)\n                                                                                                        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:826)\n---------------------------- PROCESS ENDED (19819) for package com.pns.loginregisterapp ----------------------------\n2023-09-20 14:18:17.421 19819-19819 Process                 com.pns.loginregisterapp             I  Sending signal. PID: 19819 SIG: 9\n\n</code></pre>\n<p>I am trying to get both video and audio in a MP4 file but able to record only audio</p>\n"},{"tags":["java","apache-spark","apache-spark-sql"],"answers":[{"tags":[],"owner":{"account_id":34938,"reputation":604,"user_id":98804,"accept_rate":71,"display_name":"xenodevil"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695200083,"creation_date":1695200083,"answer_id":77140833,"question_id":77133105,"body_markdown":"While submitting the Spark application, you can include files to distribute. These files are submitted and placed on each worker&#39;s working directory. Obviously this isn&#39;t a good approach with large files; only small files should be distributed this way which aren&#39;t well suited for storage on HDFS or an equivalent storage.\r\n\r\nI couldn&#39;t find the full list of arguments that are available with `spark-submit` from the official docs in a hurry, but I found a link from [CDP docs][1].\r\n\r\n    spark-submit ./bin/spark-submit \\\r\n      --class &lt;main-class&gt; \\\r\n      --master &lt;master-url&gt; \\\r\n      --deploy-mode &lt;deploy-mode&gt; \\\r\n      --conf &lt;key&gt;=&lt;value&gt; \\\r\n      ... # other options, here you can place --files &lt;filepath/name&gt;\r\n      &lt;application-jar&gt; \\\r\n      [application-arguments]\r\n\r\n\r\n  [1]: https://docs.cloudera.com/runtime/7.2.7/running-spark-applications/topics/spark-submit-options.html","title":"Spark worker node doesn&#39;t see added files","body":"<p>While submitting the Spark application, you can include files to distribute. These files are submitted and placed on each worker's working directory. Obviously this isn't a good approach with large files; only small files should be distributed this way which aren't well suited for storage on HDFS or an equivalent storage.</p>\n<p>I couldn't find the full list of arguments that are available with <code>spark-submit</code> from the official docs in a hurry, but I found a link from <a href=\"https://docs.cloudera.com/runtime/7.2.7/running-spark-applications/topics/spark-submit-options.html\" rel=\"nofollow noreferrer\">CDP docs</a>.</p>\n<pre><code>spark-submit ./bin/spark-submit \\\n  --class &lt;main-class&gt; \\\n  --master &lt;master-url&gt; \\\n  --deploy-mode &lt;deploy-mode&gt; \\\n  --conf &lt;key&gt;=&lt;value&gt; \\\n  ... # other options, here you can place --files &lt;filepath/name&gt;\n  &lt;application-jar&gt; \\\n  [application-arguments]\n</code></pre>\n"}],"owner":{"account_id":12250053,"reputation":9,"user_id":8940701,"display_name":"P. Kobędza"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1695200083,"creation_date":1695113892,"question_id":77133105,"body_markdown":"i have problem in running Java Spark application on my local machine. I&#39;m running Spark master and 1 spark worker node as docker images with below config:\r\n```\r\nversion: &#39;2.2&#39;\r\n\r\nservices:\r\n  spark:\r\n    image: docker.io/bitnami/spark:latest\r\n    environment:\r\n      - SPARK_MODE=master\r\n      - SPARK_RPC_AUTHENTICATION_ENABLED=no\r\n      - SPARK_RPC_ENCRYPTION_ENABLED=no\r\n      - SPARK_LOCAL_STORAGE_ENCRYPTION_ENABLED=no\r\n      - SPARK_SSL_ENABLED=no\r\n      - SPARK_USER=spark\r\n    ports:\r\n      - &#39;8010:8080&#39;\r\n      - &#39;7077:7077&#39;\r\n    network_mode: bridge\r\n  spark-worker:\r\n    image: docker.io/bitnami/spark:latest\r\n    environment:\r\n      - SPARK_MODE=worker\r\n      - SPARK_MASTER_URL=spark://172.17.0.2:7077\r\n      - SPARK_WORKER_MEMORY=8G\r\n      - SPARK_WORKER_CORES=4\r\n      - SPARK_RPC_AUTHENTICATION_ENABLED=no\r\n      - SPARK_RPC_ENCRYPTION_ENABLED=no\r\n      - SPARK_LOCAL_STORAGE_ENCRYPTION_ENABLED=no\r\n      - SPARK_SSL_ENABLED=no\r\n      - SPARK_USER=spark\r\n    ports:\r\n      - &#39;8081:8081&#39;\r\n      - &#39;65040:65040&#39;\r\n    network_mode: bridge\r\n```\r\n\r\nMy local java app which is driver itself is configured as below:\r\n \r\n```\r\n SparkConf conf =\r\n                new SparkConf()\r\n                        .setAppName(&quot;Simple Application&quot;)\r\n                        .set(&quot;spark.driver.port&quot;, &quot;65040&quot;)\r\n                        .set(&quot;spark.driver.host&quot;, &quot;192.168.18.15&quot;)\r\n                        .set(&quot;spark.files.overwrite&quot;, &quot;true&quot;)\r\n                        .setMaster(&quot;spark://localhost:7077&quot;);\r\n\r\n        sparkContext = new SparkContext(conf);\r\n        String path = getClass().getResource(&quot;/addresses.csv&quot;).getPath();\r\n\r\n        sparkContext.addFile(path);\r\n        sparkContext.addedFiles();\r\n        spark = new SparkSession(sparkContext);\r\n        \r\n        Dataset&lt;Row&gt; csv = spark.read().csv(SparkFiles.get(&quot;addresses.csv&quot;));\r\n```\r\nmaster/workers and local app are communicating without problems, but there is problem with accessing `addresses.csv` file on workers, they are trying to access it using my local machine path, as in worker logs bellow:\r\n`23/09/19 08:44:09 ERROR Executor: Exception in task 0.3 in stage 0.0 (TID 3)\r\norg.apache.spark.SparkFileNotFoundException: File file:/C:/Users/patry/AppData/Local/Temp/spark-fc24a898-45ad-47fe-bf10-41c109a8c46c/userFiles-ab6c8b5c-fc69-4f75-9627-7639860df8bf/addresses.csv does not exist\r\n` \r\nAny idea how i can upload and process my file at worker node without using HDFS?\r\n\r\nI&#39;ve tried to use different paths, ways of passing file to app, but without success","title":"Spark worker node doesn&#39;t see added files","body":"<p>i have problem in running Java Spark application on my local machine. I'm running Spark master and 1 spark worker node as docker images with below config:</p>\n<pre><code>version: '2.2'\n\nservices:\n  spark:\n    image: docker.io/bitnami/spark:latest\n    environment:\n      - SPARK_MODE=master\n      - SPARK_RPC_AUTHENTICATION_ENABLED=no\n      - SPARK_RPC_ENCRYPTION_ENABLED=no\n      - SPARK_LOCAL_STORAGE_ENCRYPTION_ENABLED=no\n      - SPARK_SSL_ENABLED=no\n      - SPARK_USER=spark\n    ports:\n      - '8010:8080'\n      - '7077:7077'\n    network_mode: bridge\n  spark-worker:\n    image: docker.io/bitnami/spark:latest\n    environment:\n      - SPARK_MODE=worker\n      - SPARK_MASTER_URL=spark://172.17.0.2:7077\n      - SPARK_WORKER_MEMORY=8G\n      - SPARK_WORKER_CORES=4\n      - SPARK_RPC_AUTHENTICATION_ENABLED=no\n      - SPARK_RPC_ENCRYPTION_ENABLED=no\n      - SPARK_LOCAL_STORAGE_ENCRYPTION_ENABLED=no\n      - SPARK_SSL_ENABLED=no\n      - SPARK_USER=spark\n    ports:\n      - '8081:8081'\n      - '65040:65040'\n    network_mode: bridge\n</code></pre>\n<p>My local java app which is driver itself is configured as below:</p>\n<pre><code> SparkConf conf =\n                new SparkConf()\n                        .setAppName(&quot;Simple Application&quot;)\n                        .set(&quot;spark.driver.port&quot;, &quot;65040&quot;)\n                        .set(&quot;spark.driver.host&quot;, &quot;192.168.18.15&quot;)\n                        .set(&quot;spark.files.overwrite&quot;, &quot;true&quot;)\n                        .setMaster(&quot;spark://localhost:7077&quot;);\n\n        sparkContext = new SparkContext(conf);\n        String path = getClass().getResource(&quot;/addresses.csv&quot;).getPath();\n\n        sparkContext.addFile(path);\n        sparkContext.addedFiles();\n        spark = new SparkSession(sparkContext);\n        \n        Dataset&lt;Row&gt; csv = spark.read().csv(SparkFiles.get(&quot;addresses.csv&quot;));\n</code></pre>\n<p>master/workers and local app are communicating without problems, but there is problem with accessing <code>addresses.csv</code> file on workers, they are trying to access it using my local machine path, as in worker logs bellow:\n<code>23/09/19 08:44:09 ERROR Executor: Exception in task 0.3 in stage 0.0 (TID 3) org.apache.spark.SparkFileNotFoundException: File file:/C:/Users/patry/AppData/Local/Temp/spark-fc24a898-45ad-47fe-bf10-41c109a8c46c/userFiles-ab6c8b5c-fc69-4f75-9627-7639860df8bf/addresses.csv does not exist </code>\nAny idea how i can upload and process my file at worker node without using HDFS?</p>\n<p>I've tried to use different paths, ways of passing file to app, but without success</p>\n"},{"tags":["java","android","kotlin","realm"],"answers":[{"tags":[],"owner":{"account_id":7929014,"reputation":1086,"user_id":5987537,"display_name":"Cristofer"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1695200071,"creation_date":1585349921,"answer_id":60895217,"question_id":60895216,"body_markdown":"Note: It is appear again if i&#39;m using proguard on my release buildTypes\r\n\r\n[I am just posting why Realm said:][1]\r\n\r\n**Couldn’t load `librealm-jni.so`**\r\nIf your app uses other native libraries that don’t ship with support for 64-bit architectures, Android will fail to load Realm’s librealm-jni.so file on ARM64 devices. This is because Android cannot load 32-bit and 64-bit native libraries concurrently. The best solution would be to have all libraries provide the same set of supported ABIs, but sometimes that may not be doable if you are using a 3rd-party library. See VLC and Realm Library conflicts.\r\n\r\nThe workaround to this issue is to exclude Realm’s ARM64 library from the APK file by adding the following code to the app’s build.gradle. You can refer to Mixing 32- and 64-bit Dependencies in Android for more information.\r\n\r\n    android {\r\n        //...\r\n        packagingOptions {\r\n            exclude &quot;lib/arm64-v8a/librealm-jni.so&quot;\r\n        }\r\n        //...\r\n    }\r\n\r\nAlso, there is a bug with Android Gradle Plugin 1.4.0 betas that leads it to improperly pack .so files included in jar files (see Realm Java issue 1421). To solve this problem, you can revert to Android Gradle Plugin 1.3.0 or use Android Gradle Plugin 1.5.0+.\r\n\r\nWe are aware of a number of 3rd party libraries, frameworks and management apps which do not have 64-bit support yet:\r\n\r\nParallel Space – but you can advice your users to install the 64 bit version instead.\r\nRenderScript—NDK r14 will probably support 64 bit.\r\nUnity3d.\r\n\r\n\r\n  [1]: https://www.mongodb.com/docs/realm/sdk/java/test-and-debug/troubleshooting/","title":"com.getkeepsafe.relinker.MissingLibraryException: librealm-jni.so","body":"<p>Note: It is appear again if i'm using proguard on my release buildTypes</p>\n<p><a href=\"https://www.mongodb.com/docs/realm/sdk/java/test-and-debug/troubleshooting/\" rel=\"nofollow noreferrer\">I am just posting why Realm said:</a></p>\n<p><strong>Couldn’t load <code>librealm-jni.so</code></strong>\nIf your app uses other native libraries that don’t ship with support for 64-bit architectures, Android will fail to load Realm’s librealm-jni.so file on ARM64 devices. This is because Android cannot load 32-bit and 64-bit native libraries concurrently. The best solution would be to have all libraries provide the same set of supported ABIs, but sometimes that may not be doable if you are using a 3rd-party library. See VLC and Realm Library conflicts.</p>\n<p>The workaround to this issue is to exclude Realm’s ARM64 library from the APK file by adding the following code to the app’s build.gradle. You can refer to Mixing 32- and 64-bit Dependencies in Android for more information.</p>\n<pre><code>android {\n    //...\n    packagingOptions {\n        exclude &quot;lib/arm64-v8a/librealm-jni.so&quot;\n    }\n    //...\n}\n</code></pre>\n<p>Also, there is a bug with Android Gradle Plugin 1.4.0 betas that leads it to improperly pack .so files included in jar files (see Realm Java issue 1421). To solve this problem, you can revert to Android Gradle Plugin 1.3.0 or use Android Gradle Plugin 1.5.0+.</p>\n<p>We are aware of a number of 3rd party libraries, frameworks and management apps which do not have 64-bit support yet:</p>\n<p>Parallel Space – but you can advice your users to install the 64 bit version instead.\nRenderScript—NDK r14 will probably support 64 bit.\nUnity3d.</p>\n"}],"owner":{"account_id":7929014,"reputation":1086,"user_id":5987537,"display_name":"Cristofer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5567,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"answer_count":1,"score":9,"last_activity_date":1695200071,"creation_date":1585349921,"question_id":60895216,"body_markdown":"I sent a new version to the store and when i was opening it was crashing. In debug mode did not happen but in relese buildtype I can reproduce it.\r\n\r\nThe exception was:\r\n\r\n    Fatal Exception: java.lang.RuntimeException: Unable to create application asd.esa.persistent.ESApp: com.getkeepsafe.relinker.MissingLibraryException: librealm-jni.so\r\n           at android.app.ActivityThread.handleBindApplication(ActivityThread.java:6123)\r\n           at android.app.ActivityThread.access$1200(ActivityThread.java:213)\r\n           at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1807)\r\n           at android.os.Handler.dispatchMessage(Handler.java:106)\r\n           at android.os.Looper.loop(Looper.java:193)\r\n           at android.app.ActivityThread.main(ActivityThread.java:6923)\r\n           at java.lang.reflect.Method.invoke(Method.java)\r\n           at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:493)\r\n           at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:870)","title":"com.getkeepsafe.relinker.MissingLibraryException: librealm-jni.so","body":"<p>I sent a new version to the store and when i was opening it was crashing. In debug mode did not happen but in relese buildtype I can reproduce it.</p>\n\n<p>The exception was:</p>\n\n<pre><code>Fatal Exception: java.lang.RuntimeException: Unable to create application asd.esa.persistent.ESApp: com.getkeepsafe.relinker.MissingLibraryException: librealm-jni.so\n       at android.app.ActivityThread.handleBindApplication(ActivityThread.java:6123)\n       at android.app.ActivityThread.access$1200(ActivityThread.java:213)\n       at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1807)\n       at android.os.Handler.dispatchMessage(Handler.java:106)\n       at android.os.Looper.loop(Looper.java:193)\n       at android.app.ActivityThread.main(ActivityThread.java:6923)\n       at java.lang.reflect.Method.invoke(Method.java)\n       at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:493)\n       at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:870)\n</code></pre>\n"},{"tags":["java","complexity-theory"],"comments":[{"owner":{"account_id":5169747,"reputation":11586,"user_id":4138801,"accept_rate":97,"display_name":"Clashsoft"},"score":2,"creation_date":1695200136,"post_id":77140811,"comment_id":135990975,"body_markdown":"See https://stackoverflow.com/questions/2759256/what-is-the-time-complexity-of-treeset-iteration. Since you can implement toString with a single iteration, it is also O(n).","body":"See <a href=\"https://stackoverflow.com/questions/2759256/what-is-the-time-complexity-of-treeset-iteration\" title=\"what is the time complexity of treeset iteration\">stackoverflow.com/questions/2759256/&hellip;</a>. Since you can implement toString with a single iteration, it is also O(n)."},{"owner":{"account_id":19958876,"reputation":1,"user_id":14626955,"display_name":"Oleguito Swagbucks"},"score":0,"creation_date":1695200511,"post_id":77140811,"comment_id":135991045,"body_markdown":"yeah hurry to tag this question duplicate. great job.","body":"yeah hurry to tag this question duplicate. great job."},{"owner":{"account_id":5169747,"reputation":11586,"user_id":4138801,"accept_rate":97,"display_name":"Clashsoft"},"score":0,"creation_date":1695215620,"post_id":77140811,"comment_id":135994426,"body_markdown":"I wouldn&#39;t argue that this is definitely a duplicate, but let me know if my comment does not answer the question sufficiently.","body":"I wouldn&#39;t argue that this is definitely a duplicate, but let me know if my comment does not answer the question sufficiently."}],"owner":{"account_id":19958876,"reputation":1,"user_id":14626955,"display_name":"Oleguito Swagbucks"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1695200176,"answer_count":0,"score":0,"last_activity_date":1695199918,"creation_date":1695199918,"question_id":77140811,"body_markdown":"I was thinking, since it is a tree and it must traverse it all in sorted order, then it means the algorithm goes log(n) n times, making complexity n log(n). Am I right??\r\n\r\ni asked someone and they couldn&#39;t respond, i also googled and didn&#39;t find answer","title":"What is computational complexity of toString method of an object of TreeSet class","body":"<p>I was thinking, since it is a tree and it must traverse it all in sorted order, then it means the algorithm goes log(n) n times, making complexity n log(n). Am I right??</p>\n<p>i asked someone and they couldn't respond, i also googled and didn't find answer</p>\n"},{"tags":["java","spring-boot","neo4j","spring-data-neo4j"],"comments":[{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1647476325,"post_id":71505607,"comment_id":126383870,"body_markdown":"So *have* you ensured that?","body":"So <i>have</i> you ensured that?"},{"owner":{"account_id":24526125,"reputation":21,"user_id":18438558,"display_name":"Maha Messaoud"},"score":0,"creation_date":1647476477,"post_id":71505607,"comment_id":126383891,"body_markdown":"@user207421 yes","body":"@user207421 yes"},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1647479937,"post_id":71505607,"comment_id":126384419,"body_markdown":"Where is the evidence of that?","body":"Where is the evidence of that?"},{"owner":{"account_id":3133300,"reputation":7957,"user_id":2650436,"accept_rate":80,"display_name":"meistermeier"},"score":0,"creation_date":1647528215,"post_id":71505607,"comment_id":126397963,"body_markdown":"Could you please specify the database and Spring Data Neo4j version, you are using?","body":"Could you please specify the database and Spring Data Neo4j version, you are using?"}],"answers":[{"tags":[],"owner":{"account_id":4900086,"reputation":3091,"user_id":3948697,"accept_rate":67,"display_name":"Atul"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695199644,"creation_date":1695182103,"answer_id":77139195,"question_id":71505607,"body_markdown":"I have same issue and I was solve it by these steps. (There may be another approach as well but this works for me).\r\n\r\n1. Created new database(local) in Neo4j\r\n2. Set the password for the database\r\n3. Use the database name in connection, username as &quot;neo4j&quot; and the password which is used to create a project.\r\n\r\nAfter these steps I am able to connect to the Neo4j DB.\r\n\r\nThanks,\r\n\r\nAtul","title":"Cannot connect to database with Neo4j","body":"<p>I have same issue and I was solve it by these steps. (There may be another approach as well but this works for me).</p>\n<ol>\n<li>Created new database(local) in Neo4j</li>\n<li>Set the password for the database</li>\n<li>Use the database name in connection, username as &quot;neo4j&quot; and the password which is used to create a project.</li>\n</ol>\n<p>After these steps I am able to connect to the Neo4j DB.</p>\n<p>Thanks,</p>\n<p>Atul</p>\n"}],"owner":{"account_id":24526125,"reputation":21,"user_id":18438558,"display_name":"Maha Messaoud"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":570,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"answer_count":1,"score":0,"last_activity_date":1695199644,"creation_date":1647475391,"question_id":71505607,"body_markdown":"im trying to make a java springboot project using Neo4j in DataBase , when i try to execute and test my Api in postman this error it diplayed to me :\r\n\r\n    Connection to the database terminated. Please ensure that your database is listening on the correct host and port and that you have compatible encryption settings both on Neo4j server and driver. Note that the default encryption setting has changed in Neo4j 4.0.\r\n\r\ni had verified what it want for the encryption by adding this line in the **application.properties**:\r\n\r\n    spring.data.neo4j.uri=bolt://localhost:7687\r\n    spring.data.neo4j.username=Example1\r\n    spring.data.neo4j.password=secret\r\n    spring.data.neo4j.database =stud\r\n    org.neo4j.driver.config.encrypted=true\r\n\r\nhow can i find a solution for my problem \r\n**Thanks**","title":"Cannot connect to database with Neo4j","body":"<p>im trying to make a java springboot project using Neo4j in DataBase , when i try to execute and test my Api in postman this error it diplayed to me :</p>\n<pre><code>Connection to the database terminated. Please ensure that your database is listening on the correct host and port and that you have compatible encryption settings both on Neo4j server and driver. Note that the default encryption setting has changed in Neo4j 4.0.\n</code></pre>\n<p>i had verified what it want for the encryption by adding this line in the <strong>application.properties</strong>:</p>\n<pre><code>spring.data.neo4j.uri=bolt://localhost:7687\nspring.data.neo4j.username=Example1\nspring.data.neo4j.password=secret\nspring.data.neo4j.database =stud\norg.neo4j.driver.config.encrypted=true\n</code></pre>\n<p>how can i find a solution for my problem\n<strong>Thanks</strong></p>\n"},{"tags":["javascript","java","des"],"comments":[{"owner":{"account_id":12359353,"reputation":42427,"user_id":9014097,"display_name":"Topaco"},"score":0,"creation_date":1695122899,"post_id":77133029,"comment_id":135979179,"body_markdown":"Have you had a look at the CryptoJS documentation? CryptoJS uses a key derivation when the key is passed as string. In the Java code this key derivation is missing.","body":"Have you had a look at the CryptoJS documentation? CryptoJS uses a key derivation when the key is passed as string. In the Java code this key derivation is missing."},{"owner":{"account_id":25576483,"reputation":1,"user_id":19355837,"display_name":"Fate"},"score":0,"creation_date":1695176412,"post_id":77133029,"comment_id":135987875,"body_markdown":"I&#39;m a pure back-end development engineer, not too good with front-end source code. Can you help point out the source code for the secret key derivation part? And the source code for why the encryption result is different each time.","body":"I&#39;m a pure back-end development engineer, not too good with front-end source code. Can you help point out the source code for the secret key derivation part? And the source code for why the encryption result is different each time."}],"answers":[{"tags":[],"owner":{"account_id":27650244,"reputation":207,"user_id":21105343,"display_name":"NotARobot"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1695199364,"creation_date":1695199364,"answer_id":77140730,"question_id":77133029,"body_markdown":"CryptoJS uses the key derivation function `EVP_BytesToKey()` when key is passed as a string. You need an implementation of this function for the Java side, e.g. BouncyCastle (but you can find others on the web). \r\n\r\n-----------\r\n\r\nFor encryption CryptoJS generates a random salt during key derivation from which together with the password key and IV are derived. The encryption is done with DES in CBC mode and PKCS#7 padding. Salt and ciphertext are concatenated and prefixed with `Salted__`. \r\n\r\nExample - Encryption with Java:\r\n\r\n```java\r\nimport java.nio.ByteBuffer;\r\nimport java.nio.charset.StandardCharsets;\r\nimport java.security.SecureRandom;\r\nimport java.util.Base64;\r\nimport javax.crypto.Cipher;\r\nimport javax.crypto.spec.IvParameterSpec;\r\nimport javax.crypto.spec.SecretKeySpec;\r\nimport org.bouncycastle.crypto.digests.MD5Digest;\r\nimport org.bouncycastle.crypto.generators.OpenSSLPBEParametersGenerator;\r\nimport org.bouncycastle.crypto.params.KeyParameter;\r\nimport org.bouncycastle.crypto.params.ParametersWithIV;\r\n\r\n...\r\n\r\n// create random salt\r\nSecureRandom secureRandom = new SecureRandom();\r\nbyte[] salt = new byte[8];\r\nsecureRandom.nextBytes(salt);\r\n\r\n// key/IV derivation\r\nOpenSSLPBEParametersGenerator pbeGenerator = new OpenSSLPBEParametersGenerator(new MD5Digest());\r\npbeGenerator.init(&quot;my passphrase&quot;.getBytes(StandardCharsets.UTF_8), salt);\r\nParametersWithIV parameters = (ParametersWithIV)pbeGenerator.generateDerivedParameters(64, 64);\r\nbyte[] key = ((KeyParameter)parameters.getParameters()).getKey();\r\nbyte[] iv = parameters.getIV();\r\n\r\n// encryption\r\nCipher cipher = Cipher.getInstance(&quot;DES/CBC/PKCS5Padding&quot;);\r\ncipher.init(Cipher.ENCRYPT_MODE, new SecretKeySpec(key, &quot;DES&quot;), new IvParameterSpec(iv));\r\nbyte[] ciphertext = cipher.doFinal(&quot;The quick brown fox jumps over the lazy dog&quot;.getBytes(StandardCharsets.UTF_8));\r\n\r\n// concatenation\r\nByteBuffer saltCiphertextBuf = ByteBuffer.allocate(16 + ciphertext.length);\r\nbyte[] saltCiphertext = saltCiphertextBuf.put(&quot;Salted__&quot;.getBytes(StandardCharsets.UTF_8)).put(salt).put(ciphertext).array();\r\nSystem.out.println(Base64.getEncoder().encodeToString(saltCiphertext)); // e.g. U2FsdGVkX19HEoeGxD/2PAQYTCQM6sTD/vs4QcihRE38g9kr/JCFil3fnmq9wo3bvFdZosDyPCzEbttrZMlC1A==\r\n```\r\n\r\nTest - Decryption with CryptoJS:\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    var desstr = CryptoJS.DES.decrypt(&quot;U2FsdGVkX19HEoeGxD/2PAQYTCQM6sTD/vs4QcihRE38g9kr/JCFil3fnmq9wo3bvFdZosDyPCzEbttrZMlC1A==&quot;, &quot;my passphrase&quot;).toString(CryptoJS.enc.Utf8);\r\n    console.log(&quot;result：&quot; + desstr);\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js&quot;&gt;&lt;/script&gt;\r\n\r\n\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n---------\r\n\r\nFor decryption, separate salt and ciphertext, then derive key and IV, and decrypt the ciphertext.  \r\nThe implementation is pretty much analog apart from separating, and I&#39;ll leave it up to you.\r\n\r\n---------\r\n\r\nNote that DES is insecure (retired for decades) and `EVP_BytesToKey()` is also considered insecure. More secure alternatives are AES and PBKDF2.","title":"How to pan the default encryption methods in CryptoJS DES to java code","body":"<p>CryptoJS uses the key derivation function <code>EVP_BytesToKey()</code> when key is passed as a string. You need an implementation of this function for the Java side, e.g. BouncyCastle (but you can find others on the web).</p>\n<hr />\n<p>For encryption CryptoJS generates a random salt during key derivation from which together with the password key and IV are derived. The encryption is done with DES in CBC mode and PKCS#7 padding. Salt and ciphertext are concatenated and prefixed with <code>Salted__</code>.</p>\n<p>Example - Encryption with Java:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.nio.ByteBuffer;\nimport java.nio.charset.StandardCharsets;\nimport java.security.SecureRandom;\nimport java.util.Base64;\nimport javax.crypto.Cipher;\nimport javax.crypto.spec.IvParameterSpec;\nimport javax.crypto.spec.SecretKeySpec;\nimport org.bouncycastle.crypto.digests.MD5Digest;\nimport org.bouncycastle.crypto.generators.OpenSSLPBEParametersGenerator;\nimport org.bouncycastle.crypto.params.KeyParameter;\nimport org.bouncycastle.crypto.params.ParametersWithIV;\n\n...\n\n// create random salt\nSecureRandom secureRandom = new SecureRandom();\nbyte[] salt = new byte[8];\nsecureRandom.nextBytes(salt);\n\n// key/IV derivation\nOpenSSLPBEParametersGenerator pbeGenerator = new OpenSSLPBEParametersGenerator(new MD5Digest());\npbeGenerator.init(&quot;my passphrase&quot;.getBytes(StandardCharsets.UTF_8), salt);\nParametersWithIV parameters = (ParametersWithIV)pbeGenerator.generateDerivedParameters(64, 64);\nbyte[] key = ((KeyParameter)parameters.getParameters()).getKey();\nbyte[] iv = parameters.getIV();\n\n// encryption\nCipher cipher = Cipher.getInstance(&quot;DES/CBC/PKCS5Padding&quot;);\ncipher.init(Cipher.ENCRYPT_MODE, new SecretKeySpec(key, &quot;DES&quot;), new IvParameterSpec(iv));\nbyte[] ciphertext = cipher.doFinal(&quot;The quick brown fox jumps over the lazy dog&quot;.getBytes(StandardCharsets.UTF_8));\n\n// concatenation\nByteBuffer saltCiphertextBuf = ByteBuffer.allocate(16 + ciphertext.length);\nbyte[] saltCiphertext = saltCiphertextBuf.put(&quot;Salted__&quot;.getBytes(StandardCharsets.UTF_8)).put(salt).put(ciphertext).array();\nSystem.out.println(Base64.getEncoder().encodeToString(saltCiphertext)); // e.g. U2FsdGVkX19HEoeGxD/2PAQYTCQM6sTD/vs4QcihRE38g9kr/JCFil3fnmq9wo3bvFdZosDyPCzEbttrZMlC1A==\n</code></pre>\n<p>Test - Decryption with CryptoJS:</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>var desstr = CryptoJS.DES.decrypt(\"U2FsdGVkX19HEoeGxD/2PAQYTCQM6sTD/vs4QcihRE38g9kr/JCFil3fnmq9wo3bvFdZosDyPCzEbttrZMlC1A==\", \"my passphrase\").toString(CryptoJS.enc.Utf8);\nconsole.log(\"result：\" + desstr);</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;script src=\"https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js\"&gt;&lt;/script&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<hr />\n<p>For decryption, separate salt and ciphertext, then derive key and IV, and decrypt the ciphertext.<br />\nThe implementation is pretty much analog apart from separating, and I'll leave it up to you.</p>\n<hr />\n<p>Note that DES is insecure (retired for decades) and <code>EVP_BytesToKey()</code> is also considered insecure. More secure alternatives are AES and PBKDF2.</p>\n"}],"owner":{"account_id":25576483,"reputation":1,"user_id":19355837,"display_name":"Fate"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":87,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695199364,"creation_date":1695113361,"question_id":77133029,"body_markdown":"How do I go about implementing `CryptoJS.DES.encrypt(&quot;123456&quot;, &quot;12345678&quot;)` in js in java. Because the result is still different every time I run it, and the decrypted value is still the same for different results.  \r\nthis is my test code:\r\n```\r\n&lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js&quot; integrity=&quot;sha512-E8QSvWZ0eCLGk4km3hxSsNmGWbLtSCSUcewDQPQWZF6pEU8GlT8a5fF32wOl1i8ftdMhssTrF/OhyGWwonTcXA==&quot; crossorigin=&quot;anonymous&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/script&gt;\r\n&lt;script type=&quot;text/javascript&quot; src=&quot;http://www.osctools.net/js/CryptoJS/components/core-min.js&quot;&gt;&lt;/script&gt;\r\n&lt;script type=&quot;text/javascript&quot;&gt;\r\n\r\n\r\n  // var desstr = CryptoJS.DES.decrypt(&quot;U2FsdGVkX19Z3jzZ3NvmJey7mrbU2qhT&quot;, &quot;12345678&quot;).toString(CryptoJS.enc.Utf8);\r\n  // alert(&quot;result：&quot;+desstr);\r\n\t\r\n  var encryptResult =CryptoJS.DES.encrypt(&quot;123456&quot;, &quot;12345678&quot;);\r\n  alert(&quot;result：&quot;+encryptResult);\r\n  \r\n&lt;/script&gt;\r\n```\r\n\r\nI need the equivalent Java implementation of the encryption and decryption code\r\n\r\nMy util class \r\n\r\n```java\r\nimport javax.crypto.Cipher;\r\nimport javax.crypto.SecretKey;\r\nimport javax.crypto.SecretKeyFactory;\r\nimport javax.crypto.spec.DESKeySpec;\r\nimport javax.crypto.spec.SecretKeySpec;\r\nimport java.util.Arrays;\r\nimport java.util.Base64;\r\n\r\npublic class DESUtil {\r\n\r\n    private static final String ALGORITHM = &quot;DES&quot;;\r\n    private static final int DES_KEY_SIZE = 8;\r\n    private static final String DES_MODE  = &quot; DES/ECB/PKCS5Padding&quot;;\r\n\r\n    public static byte[] encrypt(byte[] data, byte[] key) throws Exception {\r\n        DESKeySpec desKeySpec = new DESKeySpec(key);\r\n        SecretKeyFactory keyFactory = SecretKeyFactory.getInstance(ALGORITHM);\r\n        SecretKey secretKey = keyFactory.generateSecret(desKeySpec);\r\n        Cipher cipher = Cipher.getInstance(ALGORITHM);\r\n        cipher.init(Cipher.ENCRYPT_MODE, secretKey);\r\n        return cipher.doFinal(data);\r\n    }\r\n\r\n    public static byte[] decrypt(byte[] data, byte[] key) throws Exception {\r\n        DESKeySpec desKeySpec = new DESKeySpec(key);\r\n        SecretKeyFactory keyFactory = SecretKeyFactory.getInstance(ALGORITHM);\r\n        SecretKey secretKey = keyFactory.generateSecret(desKeySpec);\r\n        Cipher cipher = Cipher.getInstance(ALGORITHM);\r\n        cipher.init(Cipher.DECRYPT_MODE, secretKey);\r\n        return cipher.doFinal(data);\r\n    }\r\n\r\n    public static String encryptJs(String plainText, String secretKey) throws Exception {\r\n        byte[] keyBytes = Arrays.copyOf(secretKey.getBytes(), DES_KEY_SIZE);\r\n        byte[] plainTextBytes = plainText.getBytes();\r\n        SecretKeySpec desKeySpec = new SecretKeySpec(keyBytes, &quot;DES&quot;);\r\n        Cipher desCipher = Cipher.getInstance(DES_MODE);\r\n        desCipher.init(Cipher.ENCRYPT_MODE, desKeySpec);\r\n        byte[] encryptedText = desCipher.doFinal(plainTextBytes);\r\n        String data = Base64.getEncoder().encodeToString(encryptedText);\r\n        return data;\r\n    }\r\n\r\n    public static String decryptJs(String cipherText, String secretKey) throws Exception {\r\n        byte[] keyBytes = Arrays.copyOf(secretKey.getBytes(), DES_KEY_SIZE);\r\n        byte[] encryptedTextBytes = Base64.getDecoder().decode(cipherText);\r\n        SecretKeySpec desKeySpec = new SecretKeySpec(keyBytes, &quot;DES&quot;);\r\n        Cipher desCipher = Cipher.getInstance(DES_MODE);\r\n        desCipher.init(Cipher.DECRYPT_MODE, desKeySpec);\r\n        String data = new String(desCipher.doFinal(encryptedTextBytes));\r\n        return data;\r\n    }\r\n\r\n}\r\n```","title":"How to pan the default encryption methods in CryptoJS DES to java code","body":"<p>How do I go about implementing <code>CryptoJS.DES.encrypt(&quot;123456&quot;, &quot;12345678&quot;)</code> in js in java. Because the result is still different every time I run it, and the decrypted value is still the same for different results.<br />\nthis is my test code:</p>\n<pre><code>&lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js&quot; integrity=&quot;sha512-E8QSvWZ0eCLGk4km3hxSsNmGWbLtSCSUcewDQPQWZF6pEU8GlT8a5fF32wOl1i8ftdMhssTrF/OhyGWwonTcXA==&quot; crossorigin=&quot;anonymous&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/script&gt;\n&lt;script type=&quot;text/javascript&quot; src=&quot;http://www.osctools.net/js/CryptoJS/components/core-min.js&quot;&gt;&lt;/script&gt;\n&lt;script type=&quot;text/javascript&quot;&gt;\n\n\n  // var desstr = CryptoJS.DES.decrypt(&quot;U2FsdGVkX19Z3jzZ3NvmJey7mrbU2qhT&quot;, &quot;12345678&quot;).toString(CryptoJS.enc.Utf8);\n  // alert(&quot;result：&quot;+desstr);\n    \n  var encryptResult =CryptoJS.DES.encrypt(&quot;123456&quot;, &quot;12345678&quot;);\n  alert(&quot;result：&quot;+encryptResult);\n  \n&lt;/script&gt;\n</code></pre>\n<p>I need the equivalent Java implementation of the encryption and decryption code</p>\n<p>My util class</p>\n<pre class=\"lang-java prettyprint-override\"><code>import javax.crypto.Cipher;\nimport javax.crypto.SecretKey;\nimport javax.crypto.SecretKeyFactory;\nimport javax.crypto.spec.DESKeySpec;\nimport javax.crypto.spec.SecretKeySpec;\nimport java.util.Arrays;\nimport java.util.Base64;\n\npublic class DESUtil {\n\n    private static final String ALGORITHM = &quot;DES&quot;;\n    private static final int DES_KEY_SIZE = 8;\n    private static final String DES_MODE  = &quot; DES/ECB/PKCS5Padding&quot;;\n\n    public static byte[] encrypt(byte[] data, byte[] key) throws Exception {\n        DESKeySpec desKeySpec = new DESKeySpec(key);\n        SecretKeyFactory keyFactory = SecretKeyFactory.getInstance(ALGORITHM);\n        SecretKey secretKey = keyFactory.generateSecret(desKeySpec);\n        Cipher cipher = Cipher.getInstance(ALGORITHM);\n        cipher.init(Cipher.ENCRYPT_MODE, secretKey);\n        return cipher.doFinal(data);\n    }\n\n    public static byte[] decrypt(byte[] data, byte[] key) throws Exception {\n        DESKeySpec desKeySpec = new DESKeySpec(key);\n        SecretKeyFactory keyFactory = SecretKeyFactory.getInstance(ALGORITHM);\n        SecretKey secretKey = keyFactory.generateSecret(desKeySpec);\n        Cipher cipher = Cipher.getInstance(ALGORITHM);\n        cipher.init(Cipher.DECRYPT_MODE, secretKey);\n        return cipher.doFinal(data);\n    }\n\n    public static String encryptJs(String plainText, String secretKey) throws Exception {\n        byte[] keyBytes = Arrays.copyOf(secretKey.getBytes(), DES_KEY_SIZE);\n        byte[] plainTextBytes = plainText.getBytes();\n        SecretKeySpec desKeySpec = new SecretKeySpec(keyBytes, &quot;DES&quot;);\n        Cipher desCipher = Cipher.getInstance(DES_MODE);\n        desCipher.init(Cipher.ENCRYPT_MODE, desKeySpec);\n        byte[] encryptedText = desCipher.doFinal(plainTextBytes);\n        String data = Base64.getEncoder().encodeToString(encryptedText);\n        return data;\n    }\n\n    public static String decryptJs(String cipherText, String secretKey) throws Exception {\n        byte[] keyBytes = Arrays.copyOf(secretKey.getBytes(), DES_KEY_SIZE);\n        byte[] encryptedTextBytes = Base64.getDecoder().decode(cipherText);\n        SecretKeySpec desKeySpec = new SecretKeySpec(keyBytes, &quot;DES&quot;);\n        Cipher desCipher = Cipher.getInstance(DES_MODE);\n        desCipher.init(Cipher.DECRYPT_MODE, desKeySpec);\n        String data = new String(desCipher.doFinal(encryptedTextBytes));\n        return data;\n    }\n\n}\n</code></pre>\n"},{"tags":["java","memory","memory-leaks"],"comments":[{"owner":{"account_id":3795627,"reputation":15269,"user_id":3150802,"accept_rate":55,"display_name":"Peter - Reinstate Monica"},"score":48,"creation_date":1620831600,"post_id":6470651,"comment_id":119318671,"body_markdown":"Ironically, the harder question for every non-trivial Java program is how *not* to create a memory leak!","body":"Ironically, the harder question for every non-trivial Java program is how <i>not</i> to create a memory leak!"},{"owner":{"account_id":4705420,"reputation":47683,"user_id":3807729,"display_name":"Galik"},"score":3,"creation_date":1627016314,"post_id":6470651,"comment_id":121049995,"body_markdown":"Keep adding new objects to a container, but forget to add the code that removes them or implement partially working code that doesn&#39;t clean up all of them as the program progresses.","body":"Keep adding new objects to a container, but forget to add the code that removes them or implement partially working code that doesn&#39;t clean up all of them as the program progresses."},{"owner":{"account_id":401940,"reputation":13996,"user_id":768795,"display_name":"Thomas W"},"score":5,"creation_date":1643855878,"post_id":6470651,"comment_id":125452832,"body_markdown":"The most common memory leaks in Java server systems are in _shared state_ -- caches and services which are shared between requests. Many of the answers here seem to be over-complex, ignoring this obvious and common area. One rather common leak pattern is probably an application-scoped Map with request-scoped keys (eg, some kind of hand-rolled cache).","body":"The most common memory leaks in Java server systems are in <i>shared state</i> -- caches and services which are shared between requests. Many of the answers here seem to be over-complex, ignoring this obvious and common area. One rather common leak pattern is probably an application-scoped Map with request-scoped keys (eg, some kind of hand-rolled cache)."}],"answers":[{"tags":[],"owner":{"account_id":225531,"reputation":26310,"user_id":486057,"accept_rate":94,"display_name":"Rogach"},"down_vote_count":5,"up_vote_count":43,"is_accepted":false,"score":38,"last_activity_date":1308952128,"creation_date":1308932069,"answer_id":6470679,"question_id":6470651,"body_markdown":"Maybe by using external native code through JNI?\r\n\r\nWith pure Java, it is almost impossible.\r\n\r\nBut that is about a &quot;standard&quot; type of memory leak, when you cannot access the memory anymore, but it is still owned by the application. You can instead keep references to unused objects, or open streams without closing them afterwards.\r\n","title":"How can I create a memory leak in Java?","body":"<p>Maybe by using external native code through JNI?</p>\n\n<p>With pure Java, it is almost impossible.</p>\n\n<p>But that is about a \"standard\" type of memory leak, when you cannot access the memory anymore, but it is still owned by the application. You can instead keep references to unused objects, or open streams without closing them afterwards.</p>\n"},{"tags":[],"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"down_vote_count":22,"up_vote_count":526,"is_accepted":false,"score":504,"last_activity_date":1308952256,"creation_date":1308932189,"answer_id":6470695,"question_id":6470651,"body_markdown":"A simple thing to do is to use a HashSet with an incorrect (or non-existent) `hashCode()` or `equals()`, and then keep adding &quot;duplicates&quot;.  Instead of ignoring duplicates as it should, the set will only ever grow and you won&#39;t be able to remove them.\r\n\r\nIf you want these bad keys/elements to hang around you can use a static field like \r\n\r\n    class BadKey {\r\n       // no hashCode or equals();\r\n       public final String key;\r\n       public BadKey(String key) { this.key = key; }\r\n    }\r\n\r\n    Map map = System.getProperties();\r\n    map.put(new BadKey(&quot;key&quot;), &quot;value&quot;); // Memory leak even if your threads die.\r\n","title":"How can I create a memory leak in Java?","body":"<p>A simple thing to do is to use a HashSet with an incorrect (or non-existent) <code>hashCode()</code> or <code>equals()</code>, and then keep adding \"duplicates\".  Instead of ignoring duplicates as it should, the set will only ever grow and you won't be able to remove them.</p>\n\n<p>If you want these bad keys/elements to hang around you can use a static field like </p>\n\n<pre><code>class BadKey {\n   // no hashCode or equals();\n   public final String key;\n   public BadKey(String key) { this.key = key; }\n}\n\nMap map = System.getProperties();\nmap.put(new BadKey(\"key\"), \"value\"); // Memory leak even if your threads die.\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16878,"reputation":306133,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"down_vote_count":33,"up_vote_count":54,"is_accepted":false,"score":21,"last_activity_date":1605938991,"creation_date":1308932263,"answer_id":6470712,"question_id":6470651,"body_markdown":"Create a static Map and keep adding hard references to it.  Those will never be garbage collected.\r\n\r\n    public class Leaker {\r\n        private static final Map&lt;String, Object&gt; CACHE = new HashMap&lt;String, Object&gt;();\r\n\r\n        // Keep adding until failure.\r\n        public static void addToCache(String key, Object value) { Leaker.CACHE.put(key, value); }\r\n    }\r\n","title":"How can I create a memory leak in Java?","body":"<p>Create a static Map and keep adding hard references to it.  Those will never be garbage collected.</p>\n<pre><code>public class Leaker {\n    private static final Map&lt;String, Object&gt; CACHE = new HashMap&lt;String, Object&gt;();\n\n    // Keep adding until failure.\n    public static void addToCache(String key, Object value) { Leaker.CACHE.put(key, value); }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":970,"reputation":399857,"user_id":1288,"accept_rate":93,"display_name":"Bill the Lizard"},"down_vote_count":2,"up_vote_count":78,"is_accepted":false,"score":76,"last_activity_date":1695199331,"creation_date":1308932287,"answer_id":6470716,"question_id":6470651,"body_markdown":"Any time you keep references around to objects that you no longer need you have a memory leak.  See [Handling memory leaks in Java programs][1] for examples of how memory leaks manifest themselves in Java and what you can do about it.\r\n\r\n\r\n  [1]: https://developer.ibm.com/articles/j-leaks/","title":"How can I create a memory leak in Java?","body":"<p>Any time you keep references around to objects that you no longer need you have a memory leak.  See <a href=\"https://developer.ibm.com/articles/j-leaks/\" rel=\"nofollow noreferrer\">Handling memory leaks in Java programs</a> for examples of how memory leaks manifest themselves in Java and what you can do about it.</p>\n"},{"tags":[],"owner":{"account_id":2785,"reputation":76174,"user_id":3916,"accept_rate":100,"display_name":"Vineet Reynolds"},"down_vote_count":0,"up_vote_count":149,"is_accepted":false,"score":149,"last_activity_date":1665396132,"creation_date":1308932518,"answer_id":6470756,"question_id":6470651,"body_markdown":"The following is a pretty pointless example if you do not understand [JDBC][1]. Or at least how JDBC expects a developer to close `Connection,` `Statement`, and `ResultSet` instances before discarding them or losing references to them, instead of relying on implementing the `finalize` method.\r\n```\r\nvoid doWork() {\r\n    try {\r\n        Connection conn = ConnectionFactory.getConnection();\r\n        PreparedStatement stmt = conn.preparedStatement(&quot;some query&quot;);\r\n        // executes a valid query\r\n        ResultSet rs = stmt.executeQuery();\r\n        while(rs.hasNext()) {\r\n            // ... process the result set\r\n        }\r\n    } catch(SQLException sqlEx) {\r\n        log(sqlEx);\r\n    }\r\n}\r\n```\r\nThe problem with the above is that the `Connection` object is not closed, and hence the physical `Connection` will remain open until the garbage collector comes around and sees that it is unreachable. GC will invoke the `finalize` method, but there are JDBC drivers that do not implement the `finalize,` at least not in the same way that `Connection.close` is implemented. The resulting behavior is that while the JVM will reclaim memory due to unreachable objects being collected, resources (including memory) associated with the `Connection` object might not be reclaimed.\r\n\r\nAs such, Connection&#39;s final method does not clean up everything. One might find that the physical `Connection` to the database server will last several garbage collection cycles until the database server eventually figures out that the `Connection` is not alive (if it does) and should be closed.\r\n\r\nEven if the JDBC driver implemented `finalize`, the compiler can throw exceptions during finalization. The resulting behavior is that any memory associated with the now &quot;dormant&quot; object will not be reclaimed by the compiler, as `finalize` is guaranteed to be invoked only once.\r\n\r\nThe above scenario of encountering exceptions during object finalization is related to another scenario that could lead to a memory leak - object resurrection. Object resurrection is often done intentionally by creating a strong reference to the object from being finalized, from another object. When object resurrection is misused it will lead to a memory leak in combination with other sources of memory leaks.\r\n\r\nThere are plenty more examples that you can conjure up - like\r\n\r\n* Managing a `List` instance where you are only adding to the list and not deleting from it (although you should be getting rid of elements you no longer need), or\r\n* Opening `Sockets` or `Files,` but not closing them when they are no longer needed (similar to the above example involving the `Connection` class).\r\n* Not unloading Singletons when bringing down a Java EE application. The Classloader that loaded the singleton class will retain a reference to the class, and hence the singleton instance will never be collected by the JVM. When a new instance of the application is deployed, a new class loader is usually created, and the former class loader will continue to exist due to the singleton.\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Java_Database_Connectivity","title":"How can I create a memory leak in Java?","body":"<p>The following is a pretty pointless example if you do not understand <a href=\"http://en.wikipedia.org/wiki/Java_Database_Connectivity\" rel=\"nofollow noreferrer\">JDBC</a>. Or at least how JDBC expects a developer to close <code>Connection,</code> <code>Statement</code>, and <code>ResultSet</code> instances before discarding them or losing references to them, instead of relying on implementing the <code>finalize</code> method.</p>\n<pre><code>void doWork() {\n    try {\n        Connection conn = ConnectionFactory.getConnection();\n        PreparedStatement stmt = conn.preparedStatement(&quot;some query&quot;);\n        // executes a valid query\n        ResultSet rs = stmt.executeQuery();\n        while(rs.hasNext()) {\n            // ... process the result set\n        }\n    } catch(SQLException sqlEx) {\n        log(sqlEx);\n    }\n}\n</code></pre>\n<p>The problem with the above is that the <code>Connection</code> object is not closed, and hence the physical <code>Connection</code> will remain open until the garbage collector comes around and sees that it is unreachable. GC will invoke the <code>finalize</code> method, but there are JDBC drivers that do not implement the <code>finalize,</code> at least not in the same way that <code>Connection.close</code> is implemented. The resulting behavior is that while the JVM will reclaim memory due to unreachable objects being collected, resources (including memory) associated with the <code>Connection</code> object might not be reclaimed.</p>\n<p>As such, Connection's final method does not clean up everything. One might find that the physical <code>Connection</code> to the database server will last several garbage collection cycles until the database server eventually figures out that the <code>Connection</code> is not alive (if it does) and should be closed.</p>\n<p>Even if the JDBC driver implemented <code>finalize</code>, the compiler can throw exceptions during finalization. The resulting behavior is that any memory associated with the now &quot;dormant&quot; object will not be reclaimed by the compiler, as <code>finalize</code> is guaranteed to be invoked only once.</p>\n<p>The above scenario of encountering exceptions during object finalization is related to another scenario that could lead to a memory leak - object resurrection. Object resurrection is often done intentionally by creating a strong reference to the object from being finalized, from another object. When object resurrection is misused it will lead to a memory leak in combination with other sources of memory leaks.</p>\n<p>There are plenty more examples that you can conjure up - like</p>\n<ul>\n<li>Managing a <code>List</code> instance where you are only adding to the list and not deleting from it (although you should be getting rid of elements you no longer need), or</li>\n<li>Opening <code>Sockets</code> or <code>Files,</code> but not closing them when they are no longer needed (similar to the above example involving the <code>Connection</code> class).</li>\n<li>Not unloading Singletons when bringing down a Java EE application. The Classloader that loaded the singleton class will retain a reference to the class, and hence the singleton instance will never be collected by the JVM. When a new instance of the application is deployed, a new class loader is usually created, and the former class loader will continue to exist due to the singleton.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":43861,"reputation":59776,"user_id":128397,"accept_rate":82,"display_name":"Daniel Pryden"},"down_vote_count":5,"up_vote_count":2592,"is_accepted":true,"score":2587,"last_activity_date":1574782304,"creation_date":1308938710,"answer_id":6471947,"question_id":6470651,"body_markdown":"Here&#39;s a good way to create a true memory leak (objects inaccessible by running code but still stored in memory) in pure Java:\r\n\r\n1. The application creates a long-running thread (or use a thread pool to leak even faster).\r\n2. The thread loads a class via an (optionally custom) `ClassLoader`.\r\n3. The class allocates a large chunk of memory (e.g. `new byte[1000000]`), stores a strong reference to it in a static field, and then stores a reference to itself in a `ThreadLocal`.  Allocating the extra memory is optional (leaking the class instance is enough), but it will make the leak work that much faster.\r\n4. The application clears all references to the custom class or the `ClassLoader` it was loaded from.\r\n5. Repeat.\r\n\r\nDue to the way `ThreadLocal` is implemented in Oracle&#39;s JDK, this creates a memory leak:\r\n\r\n - Each `Thread` has a private field `threadLocals`, which actually stores the thread-local values.\r\n - Each _key_ in this map is a weak reference to a `ThreadLocal` object, so after that `ThreadLocal` object is garbage-collected, its entry is removed from the map.\r\n - But each _value_ is a strong reference, so when a value (directly or indirectly) points to the `ThreadLocal` object that is its _key_, that object will neither be garbage-collected nor removed from the map as long as the thread lives.\r\n\r\nIn this example, the chain of strong references looks like this:\r\n\r\n`Thread` object → `threadLocals` map → instance of example class → example class → static `ThreadLocal` field → `ThreadLocal` object.\r\n\r\n(The `ClassLoader` doesn&#39;t really play a role in creating the leak, it just makes the leak worse because of this additional reference chain: example class → `ClassLoader` → all the classes it has loaded. It was even worse in many JVM implementations, especially prior to Java 7, because classes and `ClassLoader`s were allocated straight into permgen and were never garbage-collected at all.)\r\n\r\nA variation on this pattern is why application containers (like Tomcat) can leak memory like a sieve if you frequently redeploy applications which happen to use `ThreadLocal`s that in some way point back to themselves. This can happen for a number of subtle reasons and is often hard to debug and/or fix.\r\n\r\n**Update**: Since lots of people keep asking for it, [here&#39;s some example code that shows this behavior in action](https://gist.github.com/dpryden/b2bb29ee2d146901b4ae).\r\n\r\n&lt;!-- Note to future editors: do NOT add the code from the above Gist into this answer. See this discussion on Meta: https://meta.stackoverflow.com/questions/289814 --&gt;\r\n","title":"How can I create a memory leak in Java?","body":"<p>Here's a good way to create a true memory leak (objects inaccessible by running code but still stored in memory) in pure Java:</p>\n\n<ol>\n<li>The application creates a long-running thread (or use a thread pool to leak even faster).</li>\n<li>The thread loads a class via an (optionally custom) <code>ClassLoader</code>.</li>\n<li>The class allocates a large chunk of memory (e.g. <code>new byte[1000000]</code>), stores a strong reference to it in a static field, and then stores a reference to itself in a <code>ThreadLocal</code>.  Allocating the extra memory is optional (leaking the class instance is enough), but it will make the leak work that much faster.</li>\n<li>The application clears all references to the custom class or the <code>ClassLoader</code> it was loaded from.</li>\n<li>Repeat.</li>\n</ol>\n\n<p>Due to the way <code>ThreadLocal</code> is implemented in Oracle's JDK, this creates a memory leak:</p>\n\n<ul>\n<li>Each <code>Thread</code> has a private field <code>threadLocals</code>, which actually stores the thread-local values.</li>\n<li>Each <em>key</em> in this map is a weak reference to a <code>ThreadLocal</code> object, so after that <code>ThreadLocal</code> object is garbage-collected, its entry is removed from the map.</li>\n<li>But each <em>value</em> is a strong reference, so when a value (directly or indirectly) points to the <code>ThreadLocal</code> object that is its <em>key</em>, that object will neither be garbage-collected nor removed from the map as long as the thread lives.</li>\n</ul>\n\n<p>In this example, the chain of strong references looks like this:</p>\n\n<p><code>Thread</code> object → <code>threadLocals</code> map → instance of example class → example class → static <code>ThreadLocal</code> field → <code>ThreadLocal</code> object.</p>\n\n<p>(The <code>ClassLoader</code> doesn't really play a role in creating the leak, it just makes the leak worse because of this additional reference chain: example class → <code>ClassLoader</code> → all the classes it has loaded. It was even worse in many JVM implementations, especially prior to Java 7, because classes and <code>ClassLoader</code>s were allocated straight into permgen and were never garbage-collected at all.)</p>\n\n<p>A variation on this pattern is why application containers (like Tomcat) can leak memory like a sieve if you frequently redeploy applications which happen to use <code>ThreadLocal</code>s that in some way point back to themselves. This can happen for a number of subtle reasons and is often hard to debug and/or fix.</p>\n\n<p><strong>Update</strong>: Since lots of people keep asking for it, <a href=\"https://gist.github.com/dpryden/b2bb29ee2d146901b4ae\" rel=\"noreferrer\">here's some example code that shows this behavior in action</a>.</p>\n\n\n"},{"tags":[],"owner":{"account_id":61566,"reputation":68924,"user_id":183406,"accept_rate":74,"display_name":"meriton"},"down_vote_count":1,"up_vote_count":131,"is_accepted":false,"score":130,"last_activity_date":1605938830,"creation_date":1308950917,"answer_id":6473952,"question_id":6470651,"body_markdown":"Probably one of the simplest examples of a potential memory leak, and how to avoid it, is the implementation of ArrayList.remove(int):\r\n\r\n\r\n\tpublic E remove(int index) {\r\n\t\tRangeCheck(index);\r\n\r\n\t\tmodCount++;\r\n\t\tE oldValue = (E) elementData[index];\r\n\r\n\t\tint numMoved = size - index - 1;\r\n\t\tif (numMoved &gt; 0)\r\n\t\t\tSystem.arraycopy(elementData, index + 1, elementData, index,\r\n\t\t\t\t\tnumMoved);\r\n\t\telementData[--size] = null; // (!) Let gc do its work\r\n\r\n\t\treturn oldValue;\r\n\t}\r\n\r\nIf you were implementing it yourself, would you have thought to clear the array element that is no longer used (`elementData[--size] = null`)? That reference might keep a huge object alive ...\r\n\r\n\r\n\r\n","title":"How can I create a memory leak in Java?","body":"<p>Probably one of the simplest examples of a potential memory leak, and how to avoid it, is the implementation of ArrayList.remove(int):</p>\n<pre><code>public E remove(int index) {\n    RangeCheck(index);\n\n    modCount++;\n    E oldValue = (E) elementData[index];\n\n    int numMoved = size - index - 1;\n    if (numMoved &gt; 0)\n        System.arraycopy(elementData, index + 1, elementData, index,\n                numMoved);\n    elementData[--size] = null; // (!) Let gc do its work\n\n    return oldValue;\n}\n</code></pre>\n<p>If you were implementing it yourself, would you have thought to clear the array element that is no longer used (<code>elementData[--size] = null</code>)? That reference might keep a huge object alive ...</p>\n"},{"tags":[],"owner":{"account_id":72987,"reputation":3238,"user_id":210445,"accept_rate":70,"display_name":"pillingworth"},"down_vote_count":0,"up_vote_count":41,"is_accepted":false,"score":41,"last_activity_date":1455637224,"creation_date":1309268843,"answer_id":6507454,"question_id":6470651,"body_markdown":"A common example of this in GUI code is when creating a widget/component and adding a listener to some static/application scoped object and then not removing the listener when the widget is destroyed. Not only do you get a memory leak, but also a performance hit as when whatever you are listening to fires events, all your old listeners are called too.\r\n","title":"How can I create a memory leak in Java?","body":"<p>A common example of this in GUI code is when creating a widget/component and adding a listener to some static/application scoped object and then not removing the listener when the widget is destroyed. Not only do you get a memory leak, but also a performance hit as when whatever you are listening to fires events, all your old listeners are called too.</p>\n"},{"tags":[],"owner":{"account_id":136008,"reputation":682,"user_id":339243,"display_name":"Ron"},"down_vote_count":0,"up_vote_count":36,"is_accepted":false,"score":36,"last_activity_date":1455637464,"creation_date":1309423159,"answer_id":6532172,"question_id":6470651,"body_markdown":"I have had a nice &quot;memory leak&quot; in relation to PermGen and XML parsing once.\r\nThe XML parser we used (I can&#39;t remember which one it was) did a String.intern() on tag names, to make comparison faster.\r\nOne of our customers had the great idea to store data values not in XML attributes or text, but as tagnames, so we had a document like:\r\n\r\n    &lt;data&gt;\r\n       &lt;1&gt;bla&lt;/1&gt;\r\n       &lt;2&gt;foo&lt;/&gt;\r\n       ...\r\n    &lt;/data&gt;\r\n\r\nIn fact, they did not use numbers but longer textual IDs (around 20 characters), which were unique and came in at a rate of 10-15 million a day. That makes 200&amp;nbsp;MB of rubbish a day, which is never needed again, and never GCed (since it is in PermGen). We had permgen set to 512&amp;nbsp;MB, so it took around two days for the out-of-memory exception (OOME) to arrive...\r\n","title":"How can I create a memory leak in Java?","body":"<p>I have had a nice \"memory leak\" in relation to PermGen and XML parsing once.\nThe XML parser we used (I can't remember which one it was) did a String.intern() on tag names, to make comparison faster.\nOne of our customers had the great idea to store data values not in XML attributes or text, but as tagnames, so we had a document like:</p>\n\n<pre><code>&lt;data&gt;\n   &lt;1&gt;bla&lt;/1&gt;\n   &lt;2&gt;foo&lt;/&gt;\n   ...\n&lt;/data&gt;\n</code></pre>\n\n<p>In fact, they did not use numbers but longer textual IDs (around 20 characters), which were unique and came in at a rate of 10-15 million a day. That makes 200&nbsp;MB of rubbish a day, which is never needed again, and never GCed (since it is in PermGen). We had permgen set to 512&nbsp;MB, so it took around two days for the out-of-memory exception (OOME) to arrive...</p>\n"},{"tags":[],"owner":{"account_id":266709,"reputation":11846,"user_id":554431,"display_name":"bestsss"},"down_vote_count":0,"up_vote_count":298,"is_accepted":false,"score":298,"last_activity_date":1455637946,"creation_date":1309463113,"answer_id":6540248,"question_id":6470651,"body_markdown":"Below there will be a non-obvious case where Java leaks, besides the standard case of forgotten listeners, static references, bogus/modifiable keys in hashmaps, or just threads stuck without any chance to end their life-cycle.\r\n\r\n- `File.deleteOnExit()` - always leaks the string, &lt;del&gt;if the string is a substring, the leak is even worse (the underlying char[] is also leaked)&lt;/del&gt; - *in Java&amp;nbsp;7 substring also copies the `char[]`, so the later doesn&#39;t apply*; @Daniel, no needs for votes, though.\r\n\r\nI&#39;ll concentrate on threads to show the danger of unmanaged threads mostly, don&#39;t wish to even touch swing.\r\n\r\n- `Runtime.addShutdownHook` and not remove... and then even with removeShutdownHook due to a bug in ThreadGroup class regarding unstarted threads it may not get collected, effectively leak the ThreadGroup. JGroup has the leak in GossipRouter.\r\n\r\n- Creating, but not starting, a `Thread` goes into the same category as above.\r\n\r\n- Creating a thread inherits the `ContextClassLoader` and `AccessControlContext`, plus the `ThreadGroup` and any `InheritedThreadLocal`, all those references are potential leaks, along with the entire classes loaded by the classloader and all static references, and ja-ja. The effect is especially visible with the entire j.u.c.Executor framework that features a super simple `ThreadFactory` interface, yet most developers have no clue of the lurking danger. Also a lot of libraries do start threads upon request (way too many industry popular libraries).\r\n\r\n- `ThreadLocal` caches; those are evil in many cases. I am sure everyone has seen quite a bit of simple caches based on ThreadLocal, well the bad news: if the thread keeps going more than expected the life the context ClassLoader, it is a pure nice little leak. Do not use ThreadLocal caches unless really needed.\r\n\r\n- Calling `ThreadGroup.destroy()` when the ThreadGroup has no threads itself, but it still keeps child ThreadGroups. A bad leak that will prevent the ThreadGroup to remove from its parent, but all the children become un-enumerateable.\r\n\r\n- Using WeakHashMap and the value (in)directly references the key. This is a hard one to find without a heap dump. That applies to all extended `Weak/SoftReference` that might keep a hard reference back to the guarded object.\r\n\r\n- Using `java.net.URL` with the HTTP(S) protocol and loading the resource from(!). This one is special, the `KeepAliveCache` creates a new thread in the system ThreadGroup which leaks the current thread&#39;s context classloader. The thread is created upon the first request when no alive thread exists, so either you may get lucky or just leak. *The leak is already fixed in Java&amp;nbsp;7 and the code that creates thread properly removes the context classloader.* There are few more cases (&lt;del&gt;like ImageFetcher&lt;/del&gt;, *also fixed*) of creating similar threads.\r\n\r\n- Using `InflaterInputStream` passing `new java.util.zip.Inflater()` in the constructor (`PNGImageDecoder` for instance) and not calling `end()` of the inflater. Well, if you pass in the constructor with just `new`, no chance... And yes, calling `close()` on the stream does not close the inflater if it&#39;s manually passed as constructor parameter. This is not a true leak since it&#39;d be released by the finalizer... when it deems it necessary. Till that moment it eats native memory so badly it can cause Linux oom_killer to kill the process with impunity. The main issue is that finalization in Java is very unreliable and G1 made it worse till 7.0.2. Moral of the story: release native resources as soon as you can; the finalizer is just too poor.\r\n\r\n- The same case with `java.util.zip.Deflater`. This one is far worse since Deflater is memory hungry in Java, i.e. always uses 15&amp;nbsp;bits (max) and 8&amp;nbsp;memory levels (9 is max) allocating several hundreds KB of native memory. Fortunately, `Deflater` is not widely used and to my knowledge JDK contains no misuses. Always call `end()` if you manually create a `Deflater` or `Inflater`. The best part of the last two: *you can&#39;t find them via normal profiling tools available.*\r\n\r\n*(I can add some more time wasters I have encountered upon request.)*\r\n\r\nGood luck and stay safe; leaks are evil!\r\n","title":"How can I create a memory leak in Java?","body":"<p>Below there will be a non-obvious case where Java leaks, besides the standard case of forgotten listeners, static references, bogus/modifiable keys in hashmaps, or just threads stuck without any chance to end their life-cycle.</p>\n\n<ul>\n<li><code>File.deleteOnExit()</code> - always leaks the string, <del>if the string is a substring, the leak is even worse (the underlying char[] is also leaked)</del> - <em>in Java&nbsp;7 substring also copies the <code>char[]</code>, so the later doesn't apply</em>; @Daniel, no needs for votes, though.</li>\n</ul>\n\n<p>I'll concentrate on threads to show the danger of unmanaged threads mostly, don't wish to even touch swing.</p>\n\n<ul>\n<li><p><code>Runtime.addShutdownHook</code> and not remove... and then even with removeShutdownHook due to a bug in ThreadGroup class regarding unstarted threads it may not get collected, effectively leak the ThreadGroup. JGroup has the leak in GossipRouter.</p></li>\n<li><p>Creating, but not starting, a <code>Thread</code> goes into the same category as above.</p></li>\n<li><p>Creating a thread inherits the <code>ContextClassLoader</code> and <code>AccessControlContext</code>, plus the <code>ThreadGroup</code> and any <code>InheritedThreadLocal</code>, all those references are potential leaks, along with the entire classes loaded by the classloader and all static references, and ja-ja. The effect is especially visible with the entire j.u.c.Executor framework that features a super simple <code>ThreadFactory</code> interface, yet most developers have no clue of the lurking danger. Also a lot of libraries do start threads upon request (way too many industry popular libraries).</p></li>\n<li><p><code>ThreadLocal</code> caches; those are evil in many cases. I am sure everyone has seen quite a bit of simple caches based on ThreadLocal, well the bad news: if the thread keeps going more than expected the life the context ClassLoader, it is a pure nice little leak. Do not use ThreadLocal caches unless really needed.</p></li>\n<li><p>Calling <code>ThreadGroup.destroy()</code> when the ThreadGroup has no threads itself, but it still keeps child ThreadGroups. A bad leak that will prevent the ThreadGroup to remove from its parent, but all the children become un-enumerateable.</p></li>\n<li><p>Using WeakHashMap and the value (in)directly references the key. This is a hard one to find without a heap dump. That applies to all extended <code>Weak/SoftReference</code> that might keep a hard reference back to the guarded object.</p></li>\n<li><p>Using <code>java.net.URL</code> with the HTTP(S) protocol and loading the resource from(!). This one is special, the <code>KeepAliveCache</code> creates a new thread in the system ThreadGroup which leaks the current thread's context classloader. The thread is created upon the first request when no alive thread exists, so either you may get lucky or just leak. <em>The leak is already fixed in Java&nbsp;7 and the code that creates thread properly removes the context classloader.</em> There are few more cases (<del>like ImageFetcher</del>, <em>also fixed</em>) of creating similar threads.</p></li>\n<li><p>Using <code>InflaterInputStream</code> passing <code>new java.util.zip.Inflater()</code> in the constructor (<code>PNGImageDecoder</code> for instance) and not calling <code>end()</code> of the inflater. Well, if you pass in the constructor with just <code>new</code>, no chance... And yes, calling <code>close()</code> on the stream does not close the inflater if it's manually passed as constructor parameter. This is not a true leak since it'd be released by the finalizer... when it deems it necessary. Till that moment it eats native memory so badly it can cause Linux oom_killer to kill the process with impunity. The main issue is that finalization in Java is very unreliable and G1 made it worse till 7.0.2. Moral of the story: release native resources as soon as you can; the finalizer is just too poor.</p></li>\n<li><p>The same case with <code>java.util.zip.Deflater</code>. This one is far worse since Deflater is memory hungry in Java, i.e. always uses 15&nbsp;bits (max) and 8&nbsp;memory levels (9 is max) allocating several hundreds KB of native memory. Fortunately, <code>Deflater</code> is not widely used and to my knowledge JDK contains no misuses. Always call <code>end()</code> if you manually create a <code>Deflater</code> or <code>Inflater</code>. The best part of the last two: <em>you can't find them via normal profiling tools available.</em></p></li>\n</ul>\n\n<p><em>(I can add some more time wasters I have encountered upon request.)</em></p>\n\n<p>Good luck and stay safe; leaks are evil!</p>\n"},{"tags":[],"owner":{"account_id":272843,"reputation":4000,"user_id":564145,"display_name":"Nicolas Bousquet"},"down_vote_count":1,"up_vote_count":250,"is_accepted":false,"score":249,"last_activity_date":1518506867,"creation_date":1309506841,"answer_id":6545142,"question_id":6470651,"body_markdown":"Most examples here are &quot;too complex&quot;. They are edge cases. With these examples, the programmer made a mistake (like don&#39;t redefining equals/hashcode), or has been bitten by a corner case of the JVM/JAVA (load of class with static...). I think that&#39;s not the type of example an interviewer want or even the most common case.\r\n\r\nBut there are really simpler cases for memory leaks. The garbage collector only frees what is no longer referenced. We as Java developers don&#39;t care about memory. We allocate it when needed and let it be freed automatically. Fine.\r\n\r\nBut any long-lived application tend to have shared state. It can be anything, statics, singletons... Often non-trivial applications tend to make complex objects graphs. Just forgetting to set a reference to null or more often forgetting to remove one object from a collection is enough to make a memory leak.\r\n\r\nOf course all sort of listeners (like UI listeners), caches, or any long-lived shared state tend to produce memory leak if not properly handled. What shall be understood is that this is not a Java corner case, or a problem with the garbage collector. It is a design problem. We design that we add a listener to a long-lived object, but we don&#39;t remove the listener when no longer needed. We cache objects, but we have no strategy to remove them from the cache.\r\n\r\nWe maybe have a complex graph that store the previous state that is needed by a computation. But the previous state is itself linked to the state before and so on.\r\n\r\nLike we have to close SQL connections or files. We need to set proper references to null and remove elements from the collection. We shall have proper caching strategies (maximum memory size, number of elements, or timers). All objects that allow a listener to be notified must provide both a addListener and removeListener method. And when these notifiers are no longer used, they must clear their listener list.\r\n\r\nA memory leak is indeed truly possible and is perfectly predictable. No need for special language features or corner cases. Memory leaks are either an indicator that something is maybe missing or even of design problems.\r\n","title":"How can I create a memory leak in Java?","body":"<p>Most examples here are \"too complex\". They are edge cases. With these examples, the programmer made a mistake (like don't redefining equals/hashcode), or has been bitten by a corner case of the JVM/JAVA (load of class with static...). I think that's not the type of example an interviewer want or even the most common case.</p>\n\n<p>But there are really simpler cases for memory leaks. The garbage collector only frees what is no longer referenced. We as Java developers don't care about memory. We allocate it when needed and let it be freed automatically. Fine.</p>\n\n<p>But any long-lived application tend to have shared state. It can be anything, statics, singletons... Often non-trivial applications tend to make complex objects graphs. Just forgetting to set a reference to null or more often forgetting to remove one object from a collection is enough to make a memory leak.</p>\n\n<p>Of course all sort of listeners (like UI listeners), caches, or any long-lived shared state tend to produce memory leak if not properly handled. What shall be understood is that this is not a Java corner case, or a problem with the garbage collector. It is a design problem. We design that we add a listener to a long-lived object, but we don't remove the listener when no longer needed. We cache objects, but we have no strategy to remove them from the cache.</p>\n\n<p>We maybe have a complex graph that store the previous state that is needed by a computation. But the previous state is itself linked to the state before and so on.</p>\n\n<p>Like we have to close SQL connections or files. We need to set proper references to null and remove elements from the collection. We shall have proper caching strategies (maximum memory size, number of elements, or timers). All objects that allow a listener to be notified must provide both a addListener and removeListener method. And when these notifiers are no longer used, they must clear their listener list.</p>\n\n<p>A memory leak is indeed truly possible and is perfectly predictable. No need for special language features or corner cases. Memory leaks are either an indicator that something is maybe missing or even of design problems.</p>\n"},{"tags":[],"owner":{"account_id":350533,"reputation":10937,"user_id":686478,"accept_rate":59,"display_name":"Prashant Bhate"},"down_vote_count":26,"up_vote_count":1374,"is_accepted":false,"score":1348,"last_activity_date":1672295805,"creation_date":1309527235,"answer_id":6548647,"question_id":6470651,"body_markdown":"**Static field holding an object reference [especially a** *final* **field]**\r\n```\r\nclass MemorableClass {\r\n    static final ArrayList list = new ArrayList(100);\r\n}\r\n```\r\n**(Unclosed) open streams (file , network, etc.)**\r\n```\r\ntry {\r\n    BufferedReader br = new BufferedReader(new FileReader(inputFile));\r\n    ...\r\n    ...\r\n} catch (Exception e) {\r\n    e.printStackTrace();\r\n}\r\n```\r\n**Unclosed connections**\r\n```\r\ntry {\r\n    Connection conn = ConnectionFactory.getConnection();\r\n    ...\r\n    ...\r\n} catch (Exception e) {\r\n    e.printStackTrace();\r\n}\r\n```\r\n**Areas that are unreachable from JVM&#39;s garbage collector**, such as memory allocated through native methods.\r\n\r\nIn web applications, some objects are stored in application scope until the application is explicitly stopped or removed.\r\n```\r\ngetServletContext().setAttribute(&quot;SOME_MAP&quot;, map);\r\n```\r\n**Incorrect or inappropriate JVM options**, such as the `noclassgc` option on IBM JDK that prevents unused class garbage collection\r\n\r\nSee [IBM JDK settings][2].\r\n\r\n  [1]: http://download.oracle.com/javase/6/docs/api/java/lang/String.html#intern%28%29\r\n  [2]: http://publib.boulder.ibm.com/infocenter/wasinfo/v6r0/index.jsp?topic=/com.ibm.websphere.express.doc/info/exp/ae/tprf_tunejvm.html","title":"How can I create a memory leak in Java?","body":"<p><strong>Static field holding an object reference [especially a</strong> <em>final</em> <strong>field]</strong></p>\n<pre><code>class MemorableClass {\n    static final ArrayList list = new ArrayList(100);\n}\n</code></pre>\n<p><strong>(Unclosed) open streams (file , network, etc.)</strong></p>\n<pre><code>try {\n    BufferedReader br = new BufferedReader(new FileReader(inputFile));\n    ...\n    ...\n} catch (Exception e) {\n    e.printStackTrace();\n}\n</code></pre>\n<p><strong>Unclosed connections</strong></p>\n<pre><code>try {\n    Connection conn = ConnectionFactory.getConnection();\n    ...\n    ...\n} catch (Exception e) {\n    e.printStackTrace();\n}\n</code></pre>\n<p><strong>Areas that are unreachable from JVM's garbage collector</strong>, such as memory allocated through native methods.</p>\n<p>In web applications, some objects are stored in application scope until the application is explicitly stopped or removed.</p>\n<pre><code>getServletContext().setAttribute(&quot;SOME_MAP&quot;, map);\n</code></pre>\n<p><strong>Incorrect or inappropriate JVM options</strong>, such as the <code>noclassgc</code> option on IBM JDK that prevents unused class garbage collection</p>\n<p>See <a href=\"http://publib.boulder.ibm.com/infocenter/wasinfo/v6r0/index.jsp?topic=/com.ibm.websphere.express.doc/info/exp/ae/tprf_tunejvm.html\" rel=\"noreferrer\">IBM JDK settings</a>.</p>\n"},{"tags":[],"owner":{"account_id":403802,"reputation":228,"user_id":771769,"display_name":"PlayTank"},"down_vote_count":4,"up_vote_count":181,"is_accepted":false,"score":177,"last_activity_date":1564782378,"creation_date":1309550770,"answer_id":6552732,"question_id":6470651,"body_markdown":"The answer depends entirely on what the interviewer thought they were asking. \r\n\r\nIs it possible in practice to make Java leak? Of course it is, and there are plenty of examples in the other answers.\r\n\r\nBut there are multiple meta-questions that may have been being asked?\r\n\r\n- Is a theoretically &quot;perfect&quot; Java implementation vulnerable to leaks?\r\n- Does the candidate understand the difference between theory and reality?\r\n- Does the candidate understand how garbage collection works?\r\n- Or how garbage collection is supposed to work in an ideal case?\r\n- Do they know they can call other languages through native interfaces?\r\n- Do they know to leak memory in those other languages?\r\n- Does the candidate even know what memory management is, and what is going on behind the scene in Java?\r\n\r\nI&#39;m reading your meta-question as &quot;What&#39;s an answer I could have used in this interview situation&quot;. And hence, I&#39;m going to focus on interview skills instead of Java. I believe you&#39;re more likely to repeat the situation of not knowing the answer to a question in an interview than you are to be in a place of needing to know how to make Java leak. So, hopefully, this will help.\r\n\r\nOne of the most important skills you can develop for interviewing is learning to actively listen to the questions and working with the interviewer to extract their intent. Not only does this let you answer their question the way they want, but also shows that you have some vital communication skills. And when it comes down to a choice between many equally talented developers, I&#39;ll hire the one who listens, thinks, and understands before they respond every time.","title":"How can I create a memory leak in Java?","body":"<p>The answer depends entirely on what the interviewer thought they were asking. </p>\n\n<p>Is it possible in practice to make Java leak? Of course it is, and there are plenty of examples in the other answers.</p>\n\n<p>But there are multiple meta-questions that may have been being asked?</p>\n\n<ul>\n<li>Is a theoretically \"perfect\" Java implementation vulnerable to leaks?</li>\n<li>Does the candidate understand the difference between theory and reality?</li>\n<li>Does the candidate understand how garbage collection works?</li>\n<li>Or how garbage collection is supposed to work in an ideal case?</li>\n<li>Do they know they can call other languages through native interfaces?</li>\n<li>Do they know to leak memory in those other languages?</li>\n<li>Does the candidate even know what memory management is, and what is going on behind the scene in Java?</li>\n</ul>\n\n<p>I'm reading your meta-question as \"What's an answer I could have used in this interview situation\". And hence, I'm going to focus on interview skills instead of Java. I believe you're more likely to repeat the situation of not knowing the answer to a question in an interview than you are to be in a place of needing to know how to make Java leak. So, hopefully, this will help.</p>\n\n<p>One of the most important skills you can develop for interviewing is learning to actively listen to the questions and working with the interviewer to extract their intent. Not only does this let you answer their question the way they want, but also shows that you have some vital communication skills. And when it comes down to a choice between many equally talented developers, I'll hire the one who listens, thinks, and understands before they respond every time.</p>\n"},{"tags":[],"owner":{"account_id":129028,"reputation":39302,"user_id":327301,"accept_rate":66,"display_name":"yankee"},"down_vote_count":14,"up_vote_count":62,"is_accepted":false,"score":48,"last_activity_date":1620853601,"creation_date":1309602216,"answer_id":6556426,"question_id":6470651,"body_markdown":"I can copy my answer from here:\r\nhttps://stackoverflow.com/questions/4948529/easiest-way-to-cause-memory-leak-in-java/4948763\r\n\r\n&quot;A memory leak, in computer science (or leakage, in this context), occurs when a computer program consumes memory but is unable to release it back to the operating system.&quot; (Wikipedia)\r\n\r\nThe easy answer is: You can&#39;t. Java does automatic memory management and will free resources that are not needed for you. You can&#39;t stop this from happening. It will *always* be able to release the resources. In programs with manual memory management, this is different. You can get some memory in C using malloc(). To free the memory, you need the pointer that malloc returned and call free() on it. But if you don&#39;t have the pointer any more (overwritten, or lifetime exceeded), then you are unfortunately incapable of freeing this memory and thus you have a memory leak.\r\n\r\nAll the other answers so far are in my definition not really memory leaks. They all aim at filling the memory with pointless stuff real fast. But at any time you could still dereference the objects you created and thus freeing the memory --&gt; *no leak*. [acconrad&#39;s answer][1] comes pretty close though as I have to admit since his solution is effectively to just &quot;crash&quot; the garbage collector by forcing it in an endless loop).\r\n\r\nThe long answer is: You can get a memory leak by writing a library for Java using the JNI, which can have manual memory management and thus have memory leaks. If you call this library, your Java process will leak memory. Or, you can have bugs in the JVM, so that the JVM looses memory. There are probably bugs in the JVM, there may even be some known ones since garbage collection is not that trivial, but then it&#39;s still a bug. By design this is not possible. You may be asking for some Java code that is effected by such a bug. Sorry I don&#39;t know one and it might well not be a bug any more in the next Java version anyway.\r\n\r\n  [1]: https://stackoverflow.com/questions/4948529/easiest-way-to-cause-memory-leak-in-java/4948560#4948560\r\n\r\n\r\n","title":"How can I create a memory leak in Java?","body":"<p>I can copy my answer from here:\n<a href=\"https://stackoverflow.com/questions/4948529/easiest-way-to-cause-memory-leak-in-java/4948763\">Easiest way to cause memory leak in Java</a></p>\n<p>&quot;A memory leak, in computer science (or leakage, in this context), occurs when a computer program consumes memory but is unable to release it back to the operating system.&quot; (Wikipedia)</p>\n<p>The easy answer is: You can't. Java does automatic memory management and will free resources that are not needed for you. You can't stop this from happening. It will <em>always</em> be able to release the resources. In programs with manual memory management, this is different. You can get some memory in C using malloc(). To free the memory, you need the pointer that malloc returned and call free() on it. But if you don't have the pointer any more (overwritten, or lifetime exceeded), then you are unfortunately incapable of freeing this memory and thus you have a memory leak.</p>\n<p>All the other answers so far are in my definition not really memory leaks. They all aim at filling the memory with pointless stuff real fast. But at any time you could still dereference the objects you created and thus freeing the memory --&gt; <em>no leak</em>. <a href=\"https://stackoverflow.com/questions/4948529/easiest-way-to-cause-memory-leak-in-java/4948560#4948560\">acconrad's answer</a> comes pretty close though as I have to admit since his solution is effectively to just &quot;crash&quot; the garbage collector by forcing it in an endless loop).</p>\n<p>The long answer is: You can get a memory leak by writing a library for Java using the JNI, which can have manual memory management and thus have memory leaks. If you call this library, your Java process will leak memory. Or, you can have bugs in the JVM, so that the JVM looses memory. There are probably bugs in the JVM, there may even be some known ones since garbage collection is not that trivial, but then it's still a bug. By design this is not possible. You may be asking for some Java code that is effected by such a bug. Sorry I don't know one and it might well not be a bug any more in the next Java version anyway.</p>\n"},{"tags":[],"owner":{"account_id":153349,"reputation":7272,"user_id":368544,"accept_rate":80,"display_name":"Mart&#237;n Schonaker"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1309675791,"creation_date":1309675791,"answer_id":6561539,"question_id":6470651,"body_markdown":"I think that a valid example could be using ThreadLocal variables in an environment where threads are pooled. \r\n\r\nFor instance, using ThreadLocal variables in Servlets to communicate with other web components, having the threads being created by the container and maintaining the idle ones in a pool. ThreadLocal variables, if not correctly cleaned up, will live there until, possibly, the same web component overwrites their values.\r\n\r\nOf course, once identified, the problem can be solved easily.","title":"How can I create a memory leak in Java?","body":"<p>I think that a valid example could be using ThreadLocal variables in an environment where threads are pooled. </p>\n\n<p>For instance, using ThreadLocal variables in Servlets to communicate with other web components, having the threads being created by the container and maintaining the idle ones in a pool. ThreadLocal variables, if not correctly cleaned up, will live there until, possibly, the same web component overwrites their values.</p>\n\n<p>Of course, once identified, the problem can be solved easily.</p>\n"},{"tags":[],"owner":{"account_id":391221,"reputation":2460,"user_id":751751,"accept_rate":88,"display_name":"Ben"},"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1309714618,"creation_date":1309714618,"answer_id":6564426,"question_id":6470651,"body_markdown":"I don&#39;t think anyone has said this yet: you can resurrect an object by overriding the finalize() method such that finalize() stores a reference of this somewhere. The garbage collector will only be called once on the object so after that the object will never destroyed. ","title":"How can I create a memory leak in Java?","body":"<p>I don't think anyone has said this yet: you can resurrect an object by overriding the finalize() method such that finalize() stores a reference of this somewhere. The garbage collector will only be called once on the object so after that the object will never destroyed. </p>\n"},{"tags":[],"owner":{"account_id":135620,"reputation":12665,"user_id":338614,"accept_rate":22,"display_name":"Harald Wellmann"},"down_vote_count":1,"up_vote_count":42,"is_accepted":false,"score":41,"last_activity_date":1620853771,"creation_date":1309732877,"answer_id":6565985,"question_id":6470651,"body_markdown":"Take any web application running in any servlet container ([Tomcat][1], [Jetty][2], [GlassFish][3], whatever...). Redeploy the application 10 or 20 times in a row (it may be enough to simply touch the [WAR][4] in the server&#39;s autodeploy directory.\r\n\r\nUnless anybody has actually tested this, chances are high that you&#39;ll get an OutOfMemoryError after a couple of redeployments, because the application did not take care to clean up after itself. You may even find a bug in your server with this test.\r\n\r\nThe problem is, the lifetime of the container is longer than the lifetime of your application. You have to make sure that all references the container might have to objects or classes of your application can be garbage collected.\r\n\r\nIf there is just one reference surviving the undeployment of your web application, the corresponding classloader and by consequence all classes of your web application cannot be garbage collected.\r\n\r\nThreads started by your application, ThreadLocal variables, logging appenders are some of the usual suspects to cause classloader leaks.\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Apache_Tomcat\r\n  [2]: https://en.wikipedia.org/wiki/Jetty_%28web_server%29\r\n  [3]: https://en.wikipedia.org/wiki/GlassFish\r\n  [4]: https://en.wikipedia.org/wiki/WAR_%28Sun_file_format%29\r\n\r\n\r\n\r\n","title":"How can I create a memory leak in Java?","body":"<p>Take any web application running in any servlet container (<a href=\"https://en.wikipedia.org/wiki/Apache_Tomcat\" rel=\"noreferrer\">Tomcat</a>, <a href=\"https://en.wikipedia.org/wiki/Jetty_%28web_server%29\" rel=\"noreferrer\">Jetty</a>, <a href=\"https://en.wikipedia.org/wiki/GlassFish\" rel=\"noreferrer\">GlassFish</a>, whatever...). Redeploy the application 10 or 20 times in a row (it may be enough to simply touch the <a href=\"https://en.wikipedia.org/wiki/WAR_%28Sun_file_format%29\" rel=\"noreferrer\">WAR</a> in the server's autodeploy directory.</p>\n<p>Unless anybody has actually tested this, chances are high that you'll get an OutOfMemoryError after a couple of redeployments, because the application did not take care to clean up after itself. You may even find a bug in your server with this test.</p>\n<p>The problem is, the lifetime of the container is longer than the lifetime of your application. You have to make sure that all references the container might have to objects or classes of your application can be garbage collected.</p>\n<p>If there is just one reference surviving the undeployment of your web application, the corresponding classloader and by consequence all classes of your web application cannot be garbage collected.</p>\n<p>Threads started by your application, ThreadLocal variables, logging appenders are some of the usual suspects to cause classloader leaks.</p>\n"},{"tags":[],"owner":{"account_id":9277,"reputation":658,"user_id":17057,"display_name":"Wesley Tarle"},"down_vote_count":2,"up_vote_count":14,"is_accepted":false,"score":12,"last_activity_date":1620853818,"creation_date":1309792018,"answer_id":6573191,"question_id":6470651,"body_markdown":"The interviewer might have been looking for a circular reference solution:\r\n\r\n        public static void main(String[] args) {\r\n            while (true) {\r\n                Element first = new Element();\r\n                first.next = new Element();\r\n                first.next.next = first;\r\n            }\r\n        }\r\n\r\nThis is a classic problem with reference counting garbage collectors.  You would then politely explain that JVMs use a much more sophisticated algorithm that doesn&#39;t have this limitation.\r\n","title":"How can I create a memory leak in Java?","body":"<p>The interviewer might have been looking for a circular reference solution:</p>\n<pre><code>    public static void main(String[] args) {\n        while (true) {\n            Element first = new Element();\n            first.next = new Element();\n            first.next.next = first;\n        }\n    }\n</code></pre>\n<p>This is a classic problem with reference counting garbage collectors.  You would then politely explain that JVMs use a much more sophisticated algorithm that doesn't have this limitation.</p>\n"},{"tags":[],"owner":{"account_id":25199,"reputation":4345,"user_id":64626,"accept_rate":60,"display_name":"Suroot"},"down_vote_count":0,"up_vote_count":23,"is_accepted":false,"score":23,"last_activity_date":1310174635,"creation_date":1310174635,"answer_id":6632102,"question_id":6470651,"body_markdown":"I thought it was interesting that no one used the internal class examples.  If you have an internal class; it inherently maintains a reference to the containing class.  Of course it is not technically a memory leak because Java WILL eventually clean it up; but this can cause classes to hang around longer than anticipated.\r\n\r\n    public class Example1 {\r\n      public Example2 getNewExample2() {\r\n        return this.new Example2();\r\n      }\r\n      public class Example2 {\r\n        public Example2() {}\r\n      }\r\n    }\r\n\r\nNow if you call Example1 and get an Example2 discarding Example1, you will inherently still have a link to an Example1 object.\r\n\r\n    public class Referencer {\r\n      public static Example2 GetAnExample2() {\r\n        Example1 ex = new Example1();\r\n        return ex.getNewExample2();\r\n      }\r\n    \r\n      public static void main(String[] args) {\r\n        Example2 ex = Referencer.GetAnExample2();\r\n        // As long as ex is reachable; Example1 will always remain in memory.\r\n      }\r\n    }\r\n\r\nI&#39;ve also heard a rumor that if you have a variable that exists for longer than a specific amount of time; Java assumes that it will always exist and will actually never try to clean it up if cannot be reached in code anymore.  But that is completely unverified.","title":"How can I create a memory leak in Java?","body":"<p>I thought it was interesting that no one used the internal class examples.  If you have an internal class; it inherently maintains a reference to the containing class.  Of course it is not technically a memory leak because Java WILL eventually clean it up; but this can cause classes to hang around longer than anticipated.</p>\n\n<pre><code>public class Example1 {\n  public Example2 getNewExample2() {\n    return this.new Example2();\n  }\n  public class Example2 {\n    public Example2() {}\n  }\n}\n</code></pre>\n\n<p>Now if you call Example1 and get an Example2 discarding Example1, you will inherently still have a link to an Example1 object.</p>\n\n<pre><code>public class Referencer {\n  public static Example2 GetAnExample2() {\n    Example1 ex = new Example1();\n    return ex.getNewExample2();\n  }\n\n  public static void main(String[] args) {\n    Example2 ex = Referencer.GetAnExample2();\n    // As long as ex is reachable; Example1 will always remain in memory.\n  }\n}\n</code></pre>\n\n<p>I've also heard a rumor that if you have a variable that exists for longer than a specific amount of time; Java assumes that it will always exist and will actually never try to clean it up if cannot be reached in code anymore.  But that is completely unverified.</p>\n"},{"tags":[],"owner":{"account_id":408170,"reputation":1289,"user_id":778659,"accept_rate":82,"display_name":"Ben Xu"},"down_vote_count":2,"up_vote_count":12,"is_accepted":false,"score":10,"last_activity_date":1620854020,"creation_date":1310283963,"answer_id":6639894,"question_id":6470651,"body_markdown":"There are many different situations memory will leak. One I encountered, which expose a map that should not be exposed and used in other place.\r\n\r\n    public class ServiceFactory {\r\n\r\n        private Map&lt;String, Service&gt; services;\r\n\r\n        private static ServiceFactory singleton;\r\n\r\n        private ServiceFactory() {\r\n            services = new HashMap&lt;String, Service&gt;();\r\n        }\r\n\r\n        public static synchronized ServiceFactory getDefault() {\r\n\r\n            if (singleton == null) {\r\n                singleton = new ServiceFactory();\r\n            }\r\n            return singleton;\r\n        }\r\n\r\n        public void addService(String name, Service serv) {\r\n            services.put(name, serv);\r\n        }\r\n\r\n        public void removeService(String name) {\r\n            services.remove(name);\r\n        }\r\n\r\n        public Service getService(String name, Service serv) {\r\n            return services.get(name);\r\n        }\r\n\r\n        // The problematic API, which exposes the map.\r\n        // and user can do quite a lot of thing from this API.\r\n        // for example, create service reference and forget to dispose or set it null\r\n        // in all this is a dangerous API, and should not expose\r\n        public Map&lt;String, Service&gt; getAllServices() {\r\n            return services;\r\n        }\r\n\r\n    }\r\n\r\n    // Resource class is a heavy class\r\n    class Service {\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n","title":"How can I create a memory leak in Java?","body":"<p>There are many different situations memory will leak. One I encountered, which expose a map that should not be exposed and used in other place.</p>\n<pre><code>public class ServiceFactory {\n\n    private Map&lt;String, Service&gt; services;\n\n    private static ServiceFactory singleton;\n\n    private ServiceFactory() {\n        services = new HashMap&lt;String, Service&gt;();\n    }\n\n    public static synchronized ServiceFactory getDefault() {\n\n        if (singleton == null) {\n            singleton = new ServiceFactory();\n        }\n        return singleton;\n    }\n\n    public void addService(String name, Service serv) {\n        services.put(name, serv);\n    }\n\n    public void removeService(String name) {\n        services.remove(name);\n    }\n\n    public Service getService(String name, Service serv) {\n        return services.get(name);\n    }\n\n    // The problematic API, which exposes the map.\n    // and user can do quite a lot of thing from this API.\n    // for example, create service reference and forget to dispose or set it null\n    // in all this is a dangerous API, and should not expose\n    public Map&lt;String, Service&gt; getAllServices() {\n        return services;\n    }\n\n}\n\n// Resource class is a heavy class\nclass Service {\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":329794,"reputation":5980,"user_id":653511,"accept_rate":86,"display_name":"stemm"},"down_vote_count":1,"up_vote_count":60,"is_accepted":false,"score":59,"last_activity_date":1672295853,"creation_date":1310388959,"answer_id":6650413,"question_id":6470651,"body_markdown":"You are able to make memory leak with **sun.misc.Unsafe** class. In fact this service class is used in different standard classes (for example in **java.nio** classes). **You can&#39;t create instances of this class directly**, but you may **use reflection to get an instance**.\r\n\r\nCode doesn&#39;t compile in the [Eclipse][1] IDE - compile it using command `javac` (during compilation you&#39;ll get warnings)\r\n```\r\nimport java.lang.reflect.Constructor;\r\nimport java.lang.reflect.Field;\r\nimport sun.misc.Unsafe;\r\n\r\npublic class TestUnsafe {\r\n\r\n    public static void main(String[] args) throws Exception{\r\n        Class unsafeClass = Class.forName(&quot;sun.misc.Unsafe&quot;);\r\n        Field f = unsafeClass.getDeclaredField(&quot;theUnsafe&quot;);\r\n        f.setAccessible(true);\r\n        Unsafe unsafe = (Unsafe) f.get(null);\r\n        System.out.print(&quot;4..3..2..1...&quot;);\r\n        try\r\n        {\r\n            for(;;)\r\n                unsafe.allocateMemory(1024*1024);\r\n        } catch(Error e) {\r\n            System.out.println(&quot;Boom :)&quot;);\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n}\r\n```\r\n  [1]: https://en.wikipedia.org/wiki/Eclipse_%28software%29\r\n","title":"How can I create a memory leak in Java?","body":"<p>You are able to make memory leak with <strong>sun.misc.Unsafe</strong> class. In fact this service class is used in different standard classes (for example in <strong>java.nio</strong> classes). <strong>You can't create instances of this class directly</strong>, but you may <strong>use reflection to get an instance</strong>.</p>\n<p>Code doesn't compile in the <a href=\"https://en.wikipedia.org/wiki/Eclipse_%28software%29\" rel=\"nofollow noreferrer\">Eclipse</a> IDE - compile it using command <code>javac</code> (during compilation you'll get warnings)</p>\n<pre><code>import java.lang.reflect.Constructor;\nimport java.lang.reflect.Field;\nimport sun.misc.Unsafe;\n\npublic class TestUnsafe {\n\n    public static void main(String[] args) throws Exception{\n        Class unsafeClass = Class.forName(&quot;sun.misc.Unsafe&quot;);\n        Field f = unsafeClass.getDeclaredField(&quot;theUnsafe&quot;);\n        f.setAccessible(true);\n        Unsafe unsafe = (Unsafe) f.get(null);\n        System.out.print(&quot;4..3..2..1...&quot;);\n        try\n        {\n            for(;;)\n                unsafe.allocateMemory(1024*1024);\n        } catch(Error e) {\n            System.out.println(&quot;Boom :)&quot;);\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":451433,"reputation":2706,"user_id":847333,"accept_rate":73,"display_name":"Gravity"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1310776157,"creation_date":1310776157,"answer_id":6714461,"question_id":6470651,"body_markdown":"One possibility is to create a wrapper for an ArrayList that only provides one method: one that adds things to the ArrayList.  Make the ArrayList itself private.  Now, construct one of these wrapper objects in global scope (as a static object in a class) and qualify it with the **final** keyword (e.g. `public static final ArrayListWrapper wrapperClass = new ArrayListWrapper()`).  So now the reference cannot be altered.  That is, `wrapperClass = null` won&#39;t work and can&#39;t be used to free the memory.  But there&#39;s also no way to do anything with `wrapperClass` other than add objects to it.  Therefore, any objects you do add to `wrapperClass` are impossible to recycle.","title":"How can I create a memory leak in Java?","body":"<p>One possibility is to create a wrapper for an ArrayList that only provides one method: one that adds things to the ArrayList.  Make the ArrayList itself private.  Now, construct one of these wrapper objects in global scope (as a static object in a class) and qualify it with the <strong>final</strong> keyword (e.g. <code>public static final ArrayListWrapper wrapperClass = new ArrayListWrapper()</code>).  So now the reference cannot be altered.  That is, <code>wrapperClass = null</code> won't work and can't be used to free the memory.  But there's also no way to do anything with <code>wrapperClass</code> other than add objects to it.  Therefore, any objects you do add to <code>wrapperClass</code> are impossible to recycle.</p>\n"},{"tags":[],"owner":{"account_id":788604,"reputation":1,"user_id":856547,"display_name":"Scott"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1311270098,"creation_date":1311270098,"answer_id":6780310,"question_id":6470651,"body_markdown":"An example I recently fixed is creating new GC and Image objects, but forgetting to call dispose() method.\r\n\r\nGC javadoc snippet:\r\n\r\n&gt; Application code must explicitly invoke the GC.dispose() method to\r\n&gt; release the operating system resources managed by each instance when\r\n&gt; those instances are no longer required. This is particularly important\r\n&gt; on Windows95 and Windows98 where the operating system has a limited\r\n&gt; number of device contexts available.\r\n\r\nImage javadoc snippet:\r\n\r\n&gt; Application code must explicitly invoke the Image.dispose() method to\r\n&gt; release the operating system resources managed by each instance when\r\n&gt; those instances are no longer required.\r\n\r\n","title":"How can I create a memory leak in Java?","body":"<p>An example I recently fixed is creating new GC and Image objects, but forgetting to call dispose() method.</p>\n\n<p>GC javadoc snippet:</p>\n\n<blockquote>\n  <p>Application code must explicitly invoke the GC.dispose() method to\n  release the operating system resources managed by each instance when\n  those instances are no longer required. This is particularly important\n  on Windows95 and Windows98 where the operating system has a limited\n  number of device contexts available.</p>\n</blockquote>\n\n<p>Image javadoc snippet:</p>\n\n<blockquote>\n  <p>Application code must explicitly invoke the Image.dispose() method to\n  release the operating system resources managed by each instance when\n  those instances are no longer required.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":198731,"reputation":644,"user_id":443572,"accept_rate":83,"display_name":"Jon Chambers"},"down_vote_count":0,"up_vote_count":44,"is_accepted":false,"score":44,"last_activity_date":1311274835,"creation_date":1311270700,"answer_id":6780439,"question_id":6470651,"body_markdown":"Here&#39;s a simple/sinister one via http://wiki.eclipse.org/Performance_Bloopers#String.substring.28.29.\r\n\r\n    public class StringLeaker\r\n    {\r\n        private final String muchSmallerString;\r\n    \r\n        public StringLeaker()\r\n        {\r\n            // Imagine the whole Declaration of Independence here\r\n            String veryLongString = &quot;We hold these truths to be self-evident...&quot;;\r\n        \r\n            // The substring here maintains a reference to the internal char[]\r\n            // representation of the original string.\r\n            this.muchSmallerString = veryLongString.substring(0, 1);\r\n        }\r\n    }\r\n\r\nBecause the substring refers to the internal representation of the original, much longer string, the original stays in memory. Thus, as long as you have a StringLeaker in play, you have the whole original string in memory, too, even though you might think you&#39;re just holding on to a single-character string.\r\n\r\nThe way to avoid storing an unwanted reference to the original string is to do something like this:\r\n\r\n    ...\r\n    this.muchSmallerString = new String(veryLongString.substring(0, 1));\r\n    ...\r\n\r\nFor added badness, you might also `.intern()` the substring:\r\n\r\n    ...\r\n    this.muchSmallerString = veryLongString.substring(0, 1).intern();\r\n    ...\r\n\r\nDoing so will keep both the original long string and the derived substring in memory even after the StringLeaker instance has been discarded.","title":"How can I create a memory leak in Java?","body":"<p>Here's a simple/sinister one via <a href=\"http://wiki.eclipse.org/Performance_Bloopers#String.substring.28.29\" rel=\"noreferrer\">http://wiki.eclipse.org/Performance_Bloopers#String.substring.28.29</a>.</p>\n\n<pre><code>public class StringLeaker\n{\n    private final String muchSmallerString;\n\n    public StringLeaker()\n    {\n        // Imagine the whole Declaration of Independence here\n        String veryLongString = \"We hold these truths to be self-evident...\";\n\n        // The substring here maintains a reference to the internal char[]\n        // representation of the original string.\n        this.muchSmallerString = veryLongString.substring(0, 1);\n    }\n}\n</code></pre>\n\n<p>Because the substring refers to the internal representation of the original, much longer string, the original stays in memory. Thus, as long as you have a StringLeaker in play, you have the whole original string in memory, too, even though you might think you're just holding on to a single-character string.</p>\n\n<p>The way to avoid storing an unwanted reference to the original string is to do something like this:</p>\n\n<pre><code>...\nthis.muchSmallerString = new String(veryLongString.substring(0, 1));\n...\n</code></pre>\n\n<p>For added badness, you might also <code>.intern()</code> the substring:</p>\n\n<pre><code>...\nthis.muchSmallerString = veryLongString.substring(0, 1).intern();\n...\n</code></pre>\n\n<p>Doing so will keep both the original long string and the derived substring in memory even after the StringLeaker instance has been discarded.</p>\n"},{"tags":[],"owner":{"account_id":23739,"reputation":4125,"user_id":59724,"accept_rate":33,"display_name":"Graham"},"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1620854195,"creation_date":1311270951,"answer_id":6780483,"question_id":6470651,"body_markdown":"As a lot of people have suggested, *resource leaks* are fairly easy to cause - like the [JDBC][1] examples. Actual *memory* leaks are a bit harder - especially if you aren&#39;t relying on broken bits of the JVM to do it for you...\r\n\r\nThe ideas of creating objects that have a very large footprint and then not being able to access them aren&#39;t real memory leaks either. If nothing can access it then it will be garbage collected, and if something can access it then it&#39;s not a leak...\r\n\r\nOne way that *used* to work though - and I don&#39;t know if it still does - is to have a three-deep circular chain. As in Object A has a reference to Object B, Object B has a reference to Object C and Object C has a reference to Object A. The GC was clever enough to know that a two deep chain - as in A &lt;--&gt; B - can safely be collected if A and B aren&#39;t accessible by anything else, but couldn&#39;t handle the three-way chain...\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Java_Database_Connectivity\r\n","title":"How can I create a memory leak in Java?","body":"<p>As a lot of people have suggested, <em>resource leaks</em> are fairly easy to cause - like the <a href=\"https://en.wikipedia.org/wiki/Java_Database_Connectivity\" rel=\"nofollow noreferrer\">JDBC</a> examples. Actual <em>memory</em> leaks are a bit harder - especially if you aren't relying on broken bits of the JVM to do it for you...</p>\n<p>The ideas of creating objects that have a very large footprint and then not being able to access them aren't real memory leaks either. If nothing can access it then it will be garbage collected, and if something can access it then it's not a leak...</p>\n<p>One way that <em>used</em> to work though - and I don't know if it still does - is to have a three-deep circular chain. As in Object A has a reference to Object B, Object B has a reference to Object C and Object C has a reference to Object A. The GC was clever enough to know that a two deep chain - as in A &lt;--&gt; B - can safely be collected if A and B aren't accessible by anything else, but couldn't handle the three-way chain...</p>\n"},{"tags":[],"owner":{"account_id":49866,"reputation":736,"user_id":148631,"display_name":"Puneet"},"down_vote_count":0,"up_vote_count":23,"is_accepted":false,"score":23,"last_activity_date":1394227779,"creation_date":1311277172,"answer_id":6781750,"question_id":6470651,"body_markdown":"I recently encountered a memory leak situation caused in a way by log4j.\r\n\r\nLog4j has this mechanism called [Nested Diagnostic Context(NDC)](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/NDC.html)  which is an instrument to distinguish interleaved log output from different sources. The granularity at which NDC works is threads, so it distinguishes log outputs from different threads separately.\r\n\r\nIn order to store thread specific tags, log4j&#39;s NDC class uses a Hashtable which is keyed by the Thread object itself (as opposed to say the thread id), and thus till the NDC tag stays in memory all the objects that hang off of the thread object also stay in memory. In our web application we use NDC to tag logoutputs with a request id to distinguish logs from a single request separately. The container that associates the NDC tag with a thread, also removes it while returning the response from a request. The problem occurred when during the course of processing a request, a child thread was spawned, something like the following code:\r\n\r\n    pubclic class RequestProcessor {\r\n        private static final Logger logger = Logger.getLogger(RequestProcessor.class);\r\n        public void doSomething()  {\r\n            ....\r\n            final List&lt;String&gt; hugeList = new ArrayList&lt;String&gt;(10000);\r\n            new Thread() {\r\n               public void run() {\r\n                   logger.info(&quot;Child thread spawned&quot;)\r\n                   for(String s:hugeList) {\r\n                       ....\r\n                   }\r\n               }\r\n            }.start();\r\n        }\r\n    }    \r\n\r\nSo an NDC context was associated with inline thread that was spawned. The thread object that was the key for this NDC context, is the inline thread which has the hugeList object hanging off of it. Hence even after the thread finished doing what it was doing, the reference to the hugeList was kept alive by the NDC context Hastable, thus causing a memory leak.","title":"How can I create a memory leak in Java?","body":"<p>I recently encountered a memory leak situation caused in a way by log4j.</p>\n\n<p>Log4j has this mechanism called <a href=\"http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/NDC.html\">Nested Diagnostic Context(NDC)</a>  which is an instrument to distinguish interleaved log output from different sources. The granularity at which NDC works is threads, so it distinguishes log outputs from different threads separately.</p>\n\n<p>In order to store thread specific tags, log4j's NDC class uses a Hashtable which is keyed by the Thread object itself (as opposed to say the thread id), and thus till the NDC tag stays in memory all the objects that hang off of the thread object also stay in memory. In our web application we use NDC to tag logoutputs with a request id to distinguish logs from a single request separately. The container that associates the NDC tag with a thread, also removes it while returning the response from a request. The problem occurred when during the course of processing a request, a child thread was spawned, something like the following code:</p>\n\n<pre><code>pubclic class RequestProcessor {\n    private static final Logger logger = Logger.getLogger(RequestProcessor.class);\n    public void doSomething()  {\n        ....\n        final List&lt;String&gt; hugeList = new ArrayList&lt;String&gt;(10000);\n        new Thread() {\n           public void run() {\n               logger.info(\"Child thread spawned\")\n               for(String s:hugeList) {\n                   ....\n               }\n           }\n        }.start();\n    }\n}    \n</code></pre>\n\n<p>So an NDC context was associated with inline thread that was spawned. The thread object that was the key for this NDC context, is the inline thread which has the hugeList object hanging off of it. Hence even after the thread finished doing what it was doing, the reference to the hugeList was kept alive by the NDC context Hastable, thus causing a memory leak.</p>\n"},{"tags":[],"owner":{"account_id":27671,"reputation":15568,"user_id":73274,"accept_rate":100,"display_name":"Paul Morie"},"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1620854242,"creation_date":1311281560,"answer_id":6782636,"question_id":6470651,"body_markdown":"Everyone always forgets the native code route.  Here&#39;s a simple formula for a leak:\r\n\r\n1. Declare a native method.\r\n2. In the native method, call `malloc`. Don&#39;t call `free`.\r\n3. Call the native method.\r\n\r\nRemember, memory allocations in native code come from the JVM heap.\r\n\r\n\r\n","title":"How can I create a memory leak in Java?","body":"<p>Everyone always forgets the native code route.  Here's a simple formula for a leak:</p>\n<ol>\n<li>Declare a native method.</li>\n<li>In the native method, call <code>malloc</code>. Don't call <code>free</code>.</li>\n<li>Call the native method.</li>\n</ol>\n<p>Remember, memory allocations in native code come from the JVM heap.</p>\n"},{"tags":[],"owner":{"account_id":220237,"reputation":21,"user_id":477534,"display_name":"Artur Ventura"},"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1620854379,"creation_date":1311289629,"answer_id":6783910,"question_id":6470651,"body_markdown":"Theoretically you can&#39;t. The Java memory model prevents it. However, because Java has to be implemented, there are some caveats you can use. It depends on what you can use:\r\n\r\n- If you can use native, you can allocate memory that you do not relinquish later.\r\n\r\n- If that is not available, there is a dirty little secret about Java that not much people know. You can ask for a direct access array that is not managed by GC, and therefore can be easily used to make a memory leak. This is provided by DirectByteBuffer (http://download.oracle.com/javase/1.5.0/docs/api/java/nio/ByteBuffer.html#allocateDirect(int)).\r\n\r\n- If you can&#39;t use any of those, you still can make a memory leak by tricking the GC. The JVM is implemented using a *generational* garbage collection. What this means is that the heap is divided into areas: young, adults and elders. An object when its created starts at the young area. As it is used more and more, it progresses into adults up to elders. An object that reaches the eldery area most likely will not be garbage collected. You cannot be sure that an object is leaked and if you ask for a stop and clean GC it may clean it, but for a long period of time it will be leaked. More information is at (http://java.sun.com/docs/hotspot/gc1.4.2/faq.html)\r\n\r\n- Also, class objects are not required to be GC&#39;ed. There might be a way to do it.\r\n\r\n","title":"How can I create a memory leak in Java?","body":"<p>Theoretically you can't. The Java memory model prevents it. However, because Java has to be implemented, there are some caveats you can use. It depends on what you can use:</p>\n<ul>\n<li><p>If you can use native, you can allocate memory that you do not relinquish later.</p>\n</li>\n<li><p>If that is not available, there is a dirty little secret about Java that not much people know. You can ask for a direct access array that is not managed by GC, and therefore can be easily used to make a memory leak. This is provided by DirectByteBuffer (<a href=\"http://download.oracle.com/javase/1.5.0/docs/api/java/nio/ByteBuffer.html#allocateDirect(int)\" rel=\"nofollow noreferrer\">http://download.oracle.com/javase/1.5.0/docs/api/java/nio/ByteBuffer.html#allocateDirect(int)</a>).</p>\n</li>\n<li><p>If you can't use any of those, you still can make a memory leak by tricking the GC. The JVM is implemented using a <em>generational</em> garbage collection. What this means is that the heap is divided into areas: young, adults and elders. An object when its created starts at the young area. As it is used more and more, it progresses into adults up to elders. An object that reaches the eldery area most likely will not be garbage collected. You cannot be sure that an object is leaked and if you ask for a stop and clean GC it may clean it, but for a long period of time it will be leaked. More information is at (<a href=\"http://java.sun.com/docs/hotspot/gc1.4.2/faq.html\" rel=\"nofollow noreferrer\">http://java.sun.com/docs/hotspot/gc1.4.2/faq.html</a>)</p>\n</li>\n<li><p>Also, class objects are not required to be GC'ed. There might be a way to do it.</p>\n</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":446377,"reputation":999,"user_id":839379,"display_name":"sethobrien"},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1311321907,"creation_date":1311321907,"answer_id":6787206,"question_id":6470651,"body_markdown":"You can create a moving memory leak by creating a new instance of a class in that class&#39;s finalize method. Bonus points if the finalizer creates multiple instances. Here&#39;s a simple program that leaks the entire heap in sometime between a few seconds and a few minutes depending on your heap size:\r\n\r\n\tclass Leakee {\r\n\t\tpublic void check() {\r\n\t\t\tif (depth &gt; 2) {\r\n\t\t\t\tLeaker.done();\r\n\t\t\t}\r\n\t\t}\r\n\t\tprivate int depth;\r\n\t\tpublic Leakee(int d) {\r\n\t\t\tdepth = d;\r\n\t\t}\r\n\t\tprotected void finalize() {\r\n\t\t\tnew Leakee(depth + 1).check();\r\n\t\t\tnew Leakee(depth + 1).check();\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublic class Leaker {\r\n\t\tprivate static boolean makeMore = true;\r\n\t\tpublic static void done() {\r\n\t\t\tmakeMore = false;\r\n\t\t}\r\n\t\tpublic static void main(String[] args) throws InterruptedException {\r\n\t\t\t// make a bunch of them until the garbage collector gets active\r\n\t\t\twhile (makeMore) {\r\n\t\t\t\tnew Leakee(0).check();\r\n\t\t\t}\r\n\t\t\t// sit back and watch the finalizers chew through memory\r\n\t\t\twhile (true) {\r\n\t\t\t\tThread.sleep(1000);\r\n\t\t\t\tSystem.out.println(&quot;memory=&quot; +\r\n\t\t\t\t\t\tRuntime.getRuntime().freeMemory() + &quot; / &quot; +\r\n\t\t\t\t\t\tRuntime.getRuntime().totalMemory());\r\n\t\t\t}\r\n\t\t}\r\n\t}","title":"How can I create a memory leak in Java?","body":"<p>You can create a moving memory leak by creating a new instance of a class in that class's finalize method. Bonus points if the finalizer creates multiple instances. Here's a simple program that leaks the entire heap in sometime between a few seconds and a few minutes depending on your heap size:</p>\n\n<pre><code>class Leakee {\n    public void check() {\n        if (depth &gt; 2) {\n            Leaker.done();\n        }\n    }\n    private int depth;\n    public Leakee(int d) {\n        depth = d;\n    }\n    protected void finalize() {\n        new Leakee(depth + 1).check();\n        new Leakee(depth + 1).check();\n    }\n}\n\npublic class Leaker {\n    private static boolean makeMore = true;\n    public static void done() {\n        makeMore = false;\n    }\n    public static void main(String[] args) throws InterruptedException {\n        // make a bunch of them until the garbage collector gets active\n        while (makeMore) {\n            new Leakee(0).check();\n        }\n        // sit back and watch the finalizers chew through memory\n        while (true) {\n            Thread.sleep(1000);\n            System.out.println(\"memory=\" +\n                    Runtime.getRuntime().freeMemory() + \" / \" +\n                    Runtime.getRuntime().totalMemory());\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":458052,"reputation":9149,"user_id":857727,"display_name":"arnt"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1620854623,"creation_date":1311330284,"answer_id":6788650,"question_id":6470651,"body_markdown":"Most of the memory leaks I&#39;ve seen in Java concern processes getting out of sync.\r\n\r\nProcess A talks to B via [TCP][1], and tells process B to create something. B issues the resource an ID, say 432423, which A stores in an object and uses while talking to B. At some point the object in A is reclaimed by garbage collection (maybe due to a bug), but A never tells B that (maybe another bug).\r\n\r\nNow A doesn&#39;t have the ID of the object it&#39;s created in B&#39;s RAM any more, and B doesn&#39;t know that A has no more reference to the object. In effect, the object is leaked.\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Transmission_Control_Protocol\r\n\r\n","title":"How can I create a memory leak in Java?","body":"<p>Most of the memory leaks I've seen in Java concern processes getting out of sync.</p>\n<p>Process A talks to B via <a href=\"https://en.wikipedia.org/wiki/Transmission_Control_Protocol\" rel=\"nofollow noreferrer\">TCP</a>, and tells process B to create something. B issues the resource an ID, say 432423, which A stores in an object and uses while talking to B. At some point the object in A is reclaimed by garbage collection (maybe due to a bug), but A never tells B that (maybe another bug).</p>\n<p>Now A doesn't have the ID of the object it's created in B's RAM any more, and B doesn't know that A has no more reference to the object. In effect, the object is leaked.</p>\n"},{"tags":[],"owner":{"account_id":357752,"reputation":1292,"user_id":698121,"display_name":"Peter"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1620855025,"creation_date":1311345525,"answer_id":6791637,"question_id":6470651,"body_markdown":"A few suggestions:\r\n\r\n - use commons-logging in a servlet container (a bit provocative perhaps)\r\n - start a thread in a servlet container and don&#39;t return from its run method\r\n - load animated GIF images in a servlet container (this will start an animation thread)\r\n\r\nThe above effects could be &#39;improved&#39; by redeploying the application ;)\r\n\r\nI recently stumbled upon this:\r\n\r\n - Calling &quot;new java.util.zip.Inflater();&quot; without calling &quot;Inflater.end()&quot; ever\r\n\r\nRead [https://bugs.java.com/bugdatabase/view_bug?bug_id=5072161][1] and linked issues for an in-depth-discussion.\r\n\r\n  [1]: https://bugs.java.com/bugdatabase/view_bug?bug_id=5072161\r\n\r\n\r\n","title":"How can I create a memory leak in Java?","body":"<p>A few suggestions:</p>\n<ul>\n<li>use commons-logging in a servlet container (a bit provocative perhaps)</li>\n<li>start a thread in a servlet container and don't return from its run method</li>\n<li>load animated GIF images in a servlet container (this will start an animation thread)</li>\n</ul>\n<p>The above effects could be 'improved' by redeploying the application ;)</p>\n<p>I recently stumbled upon this:</p>\n<ul>\n<li>Calling &quot;new java.util.zip.Inflater();&quot; without calling &quot;Inflater.end()&quot; ever</li>\n</ul>\n<p>Read <a href=\"https://bugs.java.com/bugdatabase/view_bug?bug_id=5072161\" rel=\"nofollow noreferrer\">https://bugs.java.com/bugdatabase/view_bug?bug_id=5072161</a> and linked issues for an in-depth-discussion.</p>\n"},{"tags":[],"owner":{"account_id":45053,"reputation":3163,"user_id":132565,"accept_rate":67,"display_name":"Chase"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1620855242,"creation_date":1338504647,"answer_id":10842325,"question_id":6470651,"body_markdown":"In Java a &quot;memory leak&quot; is primarily just you using too much memory which is different than in C where you are no longer using the memory but forget to return (free) it. When an interviewer asks about Java memory leaks they are asking about JVM memory usage just appearing to keep going up and they determined that restarting the JVM on a regular basis is the best fix (unless the interviewer is *extremely* technically savvy).\r\n\r\nSo answer this question as if they asked what makes JVM memory usage grow over time. Good answers would be storing too much data in a HttpSessions with overly long timeout or a poorly implemented in-memory cache (singleton) that never flushes old entries. Another potential answer is having lots of JSPs or dynamically generated classes. Classes are loaded into an area of memory called PermGen that is usually small and most JVMs don&#39;t implement class unloading.\r\n\r\n\r\n\r\n","title":"How can I create a memory leak in Java?","body":"<p>In Java a &quot;memory leak&quot; is primarily just you using too much memory which is different than in C where you are no longer using the memory but forget to return (free) it. When an interviewer asks about Java memory leaks they are asking about JVM memory usage just appearing to keep going up and they determined that restarting the JVM on a regular basis is the best fix (unless the interviewer is <em>extremely</em> technically savvy).</p>\n<p>So answer this question as if they asked what makes JVM memory usage grow over time. Good answers would be storing too much data in a HttpSessions with overly long timeout or a poorly implemented in-memory cache (singleton) that never flushes old entries. Another potential answer is having lots of JSPs or dynamically generated classes. Classes are loaded into an area of memory called PermGen that is usually small and most JVMs don't implement class unloading.</p>\n"},{"tags":[],"owner":{"account_id":657002,"reputation":33,"user_id":469070,"display_name":"Jay"},"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1347480457,"creation_date":1347480457,"answer_id":12395504,"question_id":6470651,"body_markdown":"I came across a more subtle kind of resource leak recently.\r\nWe open resources via class loader&#39;s getResourceAsStream and it happened that the input stream handles were not closed.\r\n\r\nUhm, you might say, what an idiot. \r\n\r\nWell, what makes this interesting is: this way, you can leak heap memory of the underlying process, rather than from JVM&#39;s heap.\r\n\r\nAll you need is a jar file with a file inside which will be referenced from Java code. The bigger the jar file, the quicker memory gets allocated.\r\n\r\nYou can easily create such a jar with the following class:\r\n\r\n    import java.io.File;\r\n    import java.io.FileOutputStream;\r\n    import java.io.IOException;\r\n    import java.util.zip.ZipEntry;\r\n    import java.util.zip.ZipOutputStream;\r\n\r\n    public class BigJarCreator {\r\n        public static void main(String[] args) throws IOException {\r\n            ZipOutputStream zos = new ZipOutputStream(new FileOutputStream(new File(&quot;big.jar&quot;)));\r\n            zos.putNextEntry(new ZipEntry(&quot;resource.txt&quot;));\r\n            zos.write(&quot;not too much in here&quot;.getBytes());\r\n            zos.closeEntry();\r\n            zos.putNextEntry(new ZipEntry(&quot;largeFile.out&quot;));\r\n            for (int i=0 ; i&lt;10000000 ; i++) {\r\n                zos.write((int) (Math.round(Math.random()*100)+20));\r\n            }\r\n            zos.closeEntry();\r\n            zos.close();\r\n        }\r\n    }\r\n\r\nJust paste into a file named BigJarCreator.java, compile and run it from command line: \r\n\r\n    javac BigJarCreator.java\r\n    java -cp . BigJarCreator\r\n\r\nEt voil&#224;: you find a jar archive in your current working directory with two files inside.\r\n\r\nLet&#39;s create a second class:\r\n\r\n    public class MemLeak {\r\n        public static void main(String[] args) throws InterruptedException {\r\n            int ITERATIONS=100000;\r\n            for (int i=0 ; i&lt;ITERATIONS ; i++) {\r\n                MemLeak.class.getClassLoader().getResourceAsStream(&quot;resource.txt&quot;);\r\n            }\r\n            System.out.println(&quot;finished creation of streams, now waiting to be killed&quot;);\r\n    \r\n            Thread.sleep(Long.MAX_VALUE);\r\n        }\r\n    \r\n    }\r\n\r\nThis class basically does nothing, but create unreferenced InputStream objects. Those objects will be garbage collected immediately and thus, do not contribute to heap size.\r\nIt is important for our example to load an existing resource from a jar file, and size does matter here!\r\n\r\nIf you&#39;re doubtful, try to compile and start the class above, but make sure to chose a decent heap size (2 MB):\r\n\r\n    javac MemLeak.java\r\n    java -Xmx2m -classpath .:big.jar MemLeak\r\n\r\nYou will not encounter an OOM error here, as no references are kept, the application will keep running no matter how large you chose ITERATIONS in the above example.\r\nThe memory consumption of your process (visible in top (RES/RSS) or process explorer) grows unless the application gets to the wait command. In the setup above, it will allocate around 150 MB in memory.\r\n\r\nIf you want the application to play safe, close the input stream right where it&#39;s created:\r\n\r\n    MemLeak.class.getClassLoader().getResourceAsStream(&quot;resource.txt&quot;).close();\r\n\r\nand your process will not exceed 35 MB, independent of the iteration count.\r\n\r\nQuite simple and surprising.","title":"How can I create a memory leak in Java?","body":"<p>I came across a more subtle kind of resource leak recently.\nWe open resources via class loader's getResourceAsStream and it happened that the input stream handles were not closed.</p>\n\n<p>Uhm, you might say, what an idiot. </p>\n\n<p>Well, what makes this interesting is: this way, you can leak heap memory of the underlying process, rather than from JVM's heap.</p>\n\n<p>All you need is a jar file with a file inside which will be referenced from Java code. The bigger the jar file, the quicker memory gets allocated.</p>\n\n<p>You can easily create such a jar with the following class:</p>\n\n<pre><code>import java.io.File;\nimport java.io.FileOutputStream;\nimport java.io.IOException;\nimport java.util.zip.ZipEntry;\nimport java.util.zip.ZipOutputStream;\n\npublic class BigJarCreator {\n    public static void main(String[] args) throws IOException {\n        ZipOutputStream zos = new ZipOutputStream(new FileOutputStream(new File(\"big.jar\")));\n        zos.putNextEntry(new ZipEntry(\"resource.txt\"));\n        zos.write(\"not too much in here\".getBytes());\n        zos.closeEntry();\n        zos.putNextEntry(new ZipEntry(\"largeFile.out\"));\n        for (int i=0 ; i&lt;10000000 ; i++) {\n            zos.write((int) (Math.round(Math.random()*100)+20));\n        }\n        zos.closeEntry();\n        zos.close();\n    }\n}\n</code></pre>\n\n<p>Just paste into a file named BigJarCreator.java, compile and run it from command line: </p>\n\n<pre><code>javac BigJarCreator.java\njava -cp . BigJarCreator\n</code></pre>\n\n<p>Et voilà: you find a jar archive in your current working directory with two files inside.</p>\n\n<p>Let's create a second class:</p>\n\n<pre><code>public class MemLeak {\n    public static void main(String[] args) throws InterruptedException {\n        int ITERATIONS=100000;\n        for (int i=0 ; i&lt;ITERATIONS ; i++) {\n            MemLeak.class.getClassLoader().getResourceAsStream(\"resource.txt\");\n        }\n        System.out.println(\"finished creation of streams, now waiting to be killed\");\n\n        Thread.sleep(Long.MAX_VALUE);\n    }\n\n}\n</code></pre>\n\n<p>This class basically does nothing, but create unreferenced InputStream objects. Those objects will be garbage collected immediately and thus, do not contribute to heap size.\nIt is important for our example to load an existing resource from a jar file, and size does matter here!</p>\n\n<p>If you're doubtful, try to compile and start the class above, but make sure to chose a decent heap size (2 MB):</p>\n\n<pre><code>javac MemLeak.java\njava -Xmx2m -classpath .:big.jar MemLeak\n</code></pre>\n\n<p>You will not encounter an OOM error here, as no references are kept, the application will keep running no matter how large you chose ITERATIONS in the above example.\nThe memory consumption of your process (visible in top (RES/RSS) or process explorer) grows unless the application gets to the wait command. In the setup above, it will allocate around 150 MB in memory.</p>\n\n<p>If you want the application to play safe, close the input stream right where it's created:</p>\n\n<pre><code>MemLeak.class.getClassLoader().getResourceAsStream(\"resource.txt\").close();\n</code></pre>\n\n<p>and your process will not exceed 35 MB, independent of the iteration count.</p>\n\n<p>Quite simple and surprising.</p>\n"},{"tags":[],"owner":{"account_id":213056,"reputation":689,"user_id":466250,"accept_rate":57,"display_name":"jorgeu"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1620855588,"creation_date":1348778734,"answer_id":12629746,"question_id":6470651,"body_markdown":"[Swing][1] has it very easy with dialogs. Create a JDialog, show it, the user closes it, and leak!\r\n\r\nYou have to call `dispose()` or configure `setDefaultCloseOperation(DISPOSE_ON_CLOSE)`.\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Swing_%28Java%29\r\n","title":"How can I create a memory leak in Java?","body":"<p><a href=\"https://en.wikipedia.org/wiki/Swing_%28Java%29\" rel=\"nofollow noreferrer\">Swing</a> has it very easy with dialogs. Create a JDialog, show it, the user closes it, and leak!</p>\n<p>You have to call <code>dispose()</code> or configure <code>setDefaultCloseOperation(DISPOSE_ON_CLOSE)</code>.</p>\n"},{"tags":[],"owner":{"account_id":1705684,"reputation":7431,"user_id":1564766,"accept_rate":15,"display_name":"abishkar bhattarai"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1620855736,"creation_date":1354519089,"answer_id":13678802,"question_id":6470651,"body_markdown":"If the maximum heap size is X.  Y1....Yn  no of instances\r\n\r\nSo, total memory = number of instances X bytes per instance. If X1......Xn is bytes per instances, then total memory(M)=Y1 * X1+.....+Yn *Xn. So, if M&gt;X, it exceeds the heap space.\r\n\r\nThe following can be the problems in code\r\n\r\n1. Use of more instances variable then local one.\r\n2. Creating instances every time instead of pooling object.\r\n3. Not creating the object on demand.\r\n4. Making the object reference null after the completion of operation. Again, recreating when it is demanded in program.\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"How can I create a memory leak in Java?","body":"<p>If the maximum heap size is X.  Y1....Yn  no of instances</p>\n<p>So, total memory = number of instances X bytes per instance. If X1......Xn is bytes per instances, then total memory(M)=Y1 * X1+.....+Yn *Xn. So, if M&gt;X, it exceeds the heap space.</p>\n<p>The following can be the problems in code</p>\n<ol>\n<li>Use of more instances variable then local one.</li>\n<li>Creating instances every time instead of pooling object.</li>\n<li>Not creating the object on demand.</li>\n<li>Making the object reference null after the completion of operation. Again, recreating when it is demanded in program.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":966511,"reputation":8668,"user_id":989857,"accept_rate":0,"display_name":"stones333"},"down_vote_count":14,"up_vote_count":7,"is_accepted":false,"score":-7,"last_activity_date":1358420303,"creation_date":1357276935,"answer_id":14151509,"question_id":6470651,"body_markdown":"Here is a very simple Java program that will run out of space\r\n\r\n    public class OutOfMemory {\r\n    \t\r\n    \tpublic static void main(String[] arg) {\r\n    \t\t\r\n    \t    List&lt;Long&gt; mem = new LinkedList&lt;Long&gt;();\r\n    \t    while (true) {\r\n    \t        mem.add(new Long(Long.MAX_VALUE));\r\n    \t    }\r\n    \t}\r\n    }\r\n\r\n","title":"How can I create a memory leak in Java?","body":"<p>Here is a very simple Java program that will run out of space</p>\n\n<pre><code>public class OutOfMemory {\n\n    public static void main(String[] arg) {\n\n        List&lt;Long&gt; mem = new LinkedList&lt;Long&gt;();\n        while (true) {\n            mem.add(new Long(Long.MAX_VALUE));\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1045732,"reputation":11348,"user_id":1050755,"accept_rate":51,"display_name":"user1050755"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1362622503,"creation_date":1362622503,"answer_id":15261858,"question_id":6470651,"body_markdown":"If you don&#39;t use a compacting garbage collector, you can have some sort of a memory leak due to heap fragmentation.","title":"How can I create a memory leak in Java?","body":"<p>If you don't use a compacting garbage collector, you can have some sort of a memory leak due to heap fragmentation.</p>\n"},{"tags":[],"owner":{"account_id":967624,"reputation":10828,"user_id":990750,"accept_rate":50,"display_name":"Tarik"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1373352321,"creation_date":1373352321,"answer_id":17541704,"question_id":6470651,"body_markdown":"Lapsed Listerners is a good example of memory leaks: Object is added as a Listener. All references to the object are nulled when the object is not needed anymore. However, forgetting to remove the object from the Listener list keeps the object alive and even responding to events, thereby wasting both memory and CPU. See http://www.drdobbs.com/jvm/java-qa/184404011","title":"How can I create a memory leak in Java?","body":"<p>Lapsed Listerners is a good example of memory leaks: Object is added as a Listener. All references to the object are nulled when the object is not needed anymore. However, forgetting to remove the object from the Listener list keeps the object alive and even responding to events, thereby wasting both memory and CPU. See <a href=\"http://www.drdobbs.com/jvm/java-qa/184404011\" rel=\"nofollow\">http://www.drdobbs.com/jvm/java-qa/184404011</a></p>\n"},{"tags":[],"owner":{"account_id":388401,"reputation":6292,"user_id":747320,"accept_rate":100,"display_name":"Basanth Roy"},"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1377778239,"creation_date":1377778239,"answer_id":18510634,"question_id":6470651,"body_markdown":"Throw an unhandled exception from the finalize method.","title":"How can I create a memory leak in Java?","body":"<p>Throw an unhandled exception from the finalize method.</p>\n"},{"tags":[],"owner":{"account_id":935202,"reputation":49046,"user_id":964243,"accept_rate":66,"display_name":"Boann"},"down_vote_count":3,"up_vote_count":16,"is_accepted":false,"score":13,"last_activity_date":1620855953,"creation_date":1377925827,"answer_id":18544736,"question_id":6470651,"body_markdown":"Threads are not collected until they terminate. They serve as [roots](https://stackoverflow.com/questions/6366211/what-are-the-roots) of garbage collection. They are one of the few objects that won&#39;t be reclaimed simply by forgetting about them or clearing references to them.\r\n\r\nConsider: the basic pattern to terminate a worker thread is to set some condition variable seen by the thread. The thread can check the variable periodically and use that as a signal to terminate. If the variable is not declared `volatile`, then the change to the variable might not be seen by the thread, so it won&#39;t know to terminate. Or imagine if some threads want to update a shared object, but deadlock while trying to lock on it.\r\n\r\nIf you only have a handful of threads these bugs will probably be obvious because your program will stop working properly. If you have a thread pool that creates more threads as needed, then the obsolete/stuck threads might not be noticed, and will accumulate indefinitely, causing a memory leak. Threads are likely to use other data in your application, so will also prevent anything they directly reference from ever being collected.\r\n\r\nAs a toy example:\r\n\r\n    static void leakMe(final Object object) {\r\n        new Thread() {\r\n            public void run() {\r\n                Object o = object;\r\n                for (;;) {\r\n                    try {\r\n                        sleep(Long.MAX_VALUE);\r\n                    } catch (InterruptedException e) {}\r\n                }\r\n            }\r\n        }.start();\r\n    }\r\n\r\nCall `System.gc()` all you like, but the object passed to `leakMe` will never die.\r\n\r\n\r\n","title":"How can I create a memory leak in Java?","body":"<p>Threads are not collected until they terminate. They serve as <a href=\"https://stackoverflow.com/questions/6366211/what-are-the-roots\">roots</a> of garbage collection. They are one of the few objects that won't be reclaimed simply by forgetting about them or clearing references to them.</p>\n<p>Consider: the basic pattern to terminate a worker thread is to set some condition variable seen by the thread. The thread can check the variable periodically and use that as a signal to terminate. If the variable is not declared <code>volatile</code>, then the change to the variable might not be seen by the thread, so it won't know to terminate. Or imagine if some threads want to update a shared object, but deadlock while trying to lock on it.</p>\n<p>If you only have a handful of threads these bugs will probably be obvious because your program will stop working properly. If you have a thread pool that creates more threads as needed, then the obsolete/stuck threads might not be noticed, and will accumulate indefinitely, causing a memory leak. Threads are likely to use other data in your application, so will also prevent anything they directly reference from ever being collected.</p>\n<p>As a toy example:</p>\n<pre><code>static void leakMe(final Object object) {\n    new Thread() {\n        public void run() {\n            Object o = object;\n            for (;;) {\n                try {\n                    sleep(Long.MAX_VALUE);\n                } catch (InterruptedException e) {}\n            }\n        }\n    }.start();\n}\n</code></pre>\n<p>Call <code>System.gc()</code> all you like, but the object passed to <code>leakMe</code> will never die.</p>\n"},{"tags":[],"owner":{"account_id":167824,"reputation":21098,"user_id":1439305,"accept_rate":81,"display_name":"Audrius Meškauskas"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1620856051,"creation_date":1389099397,"answer_id":20972237,"question_id":6470651,"body_markdown":"A thread that does not terminate (say sleeps indefinitely in its run method). It will not be garbage collected even if we lose a reference to it. You can add fields to make the thread object is a big as you want.\r\n\r\nThe currently top answer lists more tricks around this, but these seem redundant.\r\n","title":"How can I create a memory leak in Java?","body":"<p>A thread that does not terminate (say sleeps indefinitely in its run method). It will not be garbage collected even if we lose a reference to it. You can add fields to make the thread object is a big as you want.</p>\n<p>The currently top answer lists more tricks around this, but these seem redundant.</p>\n"},{"tags":[],"owner":{"account_id":557322,"reputation":8250,"user_id":919710,"accept_rate":80,"display_name":"Alexandre Santos"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1402005281,"creation_date":1402005281,"answer_id":24070827,"question_id":6470651,"body_markdown":"There are many answers on how to create a memory leak in Java, but please note the point asked during the interview.\r\n\r\n&quot;how to create a memory leak with Java?&quot; is an open-ended question, whose purpose is to evaluate the degree of experience a developer has.\r\n\r\nIf I ask you &quot;Do you have experience troubleshooting memory leaks in Java?&quot;, your answer would be a simple &quot;Yes&quot;.\r\nI would have then to follow up with &quot;Could you give me examples where you hat to troubleshoot memory leaks?&quot;, to which you would give me one or two examples.\r\n\r\nHowever, when the interviewer asks &quot;how to create a memory leak with Java?&quot; the expected answer should follow alongs these lines:\r\n\r\n- I&#39;ve encountered a memory leak ... (say when) [that shows me experience]\r\n- The code that was causing it was... (explain code) [you fixed it yourself]\r\n- The fix I applied was based on ... (explain fix) [this gives me a chance to ask specifics about the fix]\r\n- The test I did was ... [gives me the chance of asking other testing methodologies]\r\n- I documented it this way ... [extra points. Good if you documented it]\r\n- So, it is reasonable to think that, if we follow this in reverse order, which is, get the code I fixed, and remove my fix, that we would have a memory leak.\r\n\r\n\r\n\r\nWhen the developer fails to follow this line of thought I try to guide him/her asking &quot;Could you give me an example of how could Java leak memory?&quot;, followed by &quot;Did you ever have to fix any memory leak in Java?&quot;\r\n\r\nNote that I am **not** asking for an example on how to leak memory in Java. That would be silly. Who would be interested in a developer who can effectively write code that leaks memory?\r\n\r\n","title":"How can I create a memory leak in Java?","body":"<p>There are many answers on how to create a memory leak in Java, but please note the point asked during the interview.</p>\n\n<p>\"how to create a memory leak with Java?\" is an open-ended question, whose purpose is to evaluate the degree of experience a developer has.</p>\n\n<p>If I ask you \"Do you have experience troubleshooting memory leaks in Java?\", your answer would be a simple \"Yes\".\nI would have then to follow up with \"Could you give me examples where you hat to troubleshoot memory leaks?\", to which you would give me one or two examples.</p>\n\n<p>However, when the interviewer asks \"how to create a memory leak with Java?\" the expected answer should follow alongs these lines:</p>\n\n<ul>\n<li>I've encountered a memory leak ... (say when) [that shows me experience]</li>\n<li>The code that was causing it was... (explain code) [you fixed it yourself]</li>\n<li>The fix I applied was based on ... (explain fix) [this gives me a chance to ask specifics about the fix]</li>\n<li>The test I did was ... [gives me the chance of asking other testing methodologies]</li>\n<li>I documented it this way ... [extra points. Good if you documented it]</li>\n<li>So, it is reasonable to think that, if we follow this in reverse order, which is, get the code I fixed, and remove my fix, that we would have a memory leak.</li>\n</ul>\n\n<p>When the developer fails to follow this line of thought I try to guide him/her asking \"Could you give me an example of how could Java leak memory?\", followed by \"Did you ever have to fix any memory leak in Java?\"</p>\n\n<p>Note that I am <strong>not</strong> asking for an example on how to leak memory in Java. That would be silly. Who would be interested in a developer who can effectively write code that leaks memory?</p>\n"},{"tags":[],"owner":{"account_id":1979243,"reputation":5103,"user_id":1817435,"accept_rate":67,"display_name":"Viraj"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1620856147,"creation_date":1403092394,"answer_id":24284882,"question_id":6470651,"body_markdown":"The *String.substring* method in Java 1.6 create a memory leak. This blog post explains it:\r\n\r\n*[How SubString method works in Java - Memory Leak Fixed in JDK 1.7][1]*\r\n\r\n  [1]: http://javarevisited.blogspot.com/2011/10/how-substring-in-java-works.html\r\n\r\n\r\n","title":"How can I create a memory leak in Java?","body":"<p>The <em>String.substring</em> method in Java 1.6 create a memory leak. This blog post explains it:</p>\n<p><em><a href=\"http://javarevisited.blogspot.com/2011/10/how-substring-in-java-works.html\" rel=\"nofollow noreferrer\">How SubString method works in Java - Memory Leak Fixed in JDK 1.7</a></em></p>\n"},{"tags":[],"owner":{"account_id":2056278,"reputation":23340,"user_id":1833961,"accept_rate":54,"display_name":"bvdb"},"down_vote_count":0,"up_vote_count":27,"is_accepted":false,"score":27,"last_activity_date":1414502330,"creation_date":1405711476,"answer_id":24832345,"question_id":6470651,"body_markdown":"What&#39;s a memory leak:\r\n\r\n - It&#39;s caused by a **bug** or **bad design.**\r\n - It&#39;s a waste of memory.\r\n - **It gets worse over time.**\r\n - **The garbage collector cannot clean it.**\r\n\r\n*Typical example:*\r\n\r\nA cache of objects is a good starting point to mess things up.\r\n\r\n    private static final Map&lt;String, Info&gt; myCache = new HashMap&lt;&gt;();\r\n    \r\n    public void getInfo(String key)\r\n    {\r\n        // uses cache\r\n        Info info = myCache.get(key);\r\n        if (info != null) return info;\r\n        \r\n        // if it&#39;s not in cache, then fetch it from the database\r\n        info = Database.fetch(key);\r\n        if (info == null) return null;\r\n\r\n        // and store it in the cache\r\n        myCache.put(key, info);\r\n        return info;\r\n    }\r\n\r\nYour cache grows and grows. And pretty soon the entire database gets sucked into memory. A better design uses an LRUMap (Only keeps recently used objects in cache).\r\n\r\nSure, you can make things a lot more complicated: \r\n\r\n - using **ThreadLocal** constructions.\r\n - adding more **complex reference trees**. \r\n - or leaks caused by **3rd party libraries**.\r\n\r\n*What often happens:* \r\n\r\nIf this Info object has references to other objects, which again have references to other objects. In a way you could also consider this to be some kind of memory leak, (caused by bad design).","title":"How can I create a memory leak in Java?","body":"<p>What's a memory leak:</p>\n\n<ul>\n<li>It's caused by a <strong>bug</strong> or <strong>bad design.</strong></li>\n<li>It's a waste of memory.</li>\n<li><strong>It gets worse over time.</strong></li>\n<li><strong>The garbage collector cannot clean it.</strong></li>\n</ul>\n\n<p><em>Typical example:</em></p>\n\n<p>A cache of objects is a good starting point to mess things up.</p>\n\n<pre><code>private static final Map&lt;String, Info&gt; myCache = new HashMap&lt;&gt;();\n\npublic void getInfo(String key)\n{\n    // uses cache\n    Info info = myCache.get(key);\n    if (info != null) return info;\n\n    // if it's not in cache, then fetch it from the database\n    info = Database.fetch(key);\n    if (info == null) return null;\n\n    // and store it in the cache\n    myCache.put(key, info);\n    return info;\n}\n</code></pre>\n\n<p>Your cache grows and grows. And pretty soon the entire database gets sucked into memory. A better design uses an LRUMap (Only keeps recently used objects in cache).</p>\n\n<p>Sure, you can make things a lot more complicated: </p>\n\n<ul>\n<li>using <strong>ThreadLocal</strong> constructions.</li>\n<li>adding more <strong>complex reference trees</strong>. </li>\n<li>or leaks caused by <strong>3rd party libraries</strong>.</li>\n</ul>\n\n<p><em>What often happens:</em> </p>\n\n<p>If this Info object has references to other objects, which again have references to other objects. In a way you could also consider this to be some kind of memory leak, (caused by bad design).</p>\n"},{"tags":[],"owner":{"account_id":2386817,"reputation":15505,"user_id":2087628,"accept_rate":42,"display_name":"JaskeyLam"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1620856357,"creation_date":1408418421,"answer_id":25375224,"question_id":6470651,"body_markdown":"**Carelessly using a non-static inner class inside a class which has its own life cycle.**\r\n\r\nIn Java, **non-static inner and anonymous classes** hold an **implicit reference** to their outer class. Static inner classes, on the other hand, **do not**.\r\n\r\nHere is a common example to have memory leak in Android, which is not obvious though:\r\n\r\n    public class SampleActivity extends Activity {\r\n\r\n      private final Handler mLeakyHandler = new Handler() { // Non-static inner class, holds the reference to the SampleActivity outer class\r\n        @Override\r\n        public void handleMessage(Message msg) {\r\n          // ...\r\n        }\r\n      }\r\n\r\n      @Override\r\n      protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n\r\n        // Post a message and delay its execution for a long time.\r\n        mLeakyHandler.postDelayed(new Runnable() {//here, the anonymous inner class holds the reference to the SampleActivity class too\r\n          @Override\r\n          public void run() {\r\n         //....\r\n          }\r\n        }, SOME_TOME_TIME);\r\n\r\n        // Go back to the previous Activity.\r\n        finish();\r\n      }}\r\n\r\nThis will prevent the activity context from being garbage collected.\r\n\r\n\r\n\r\n","title":"How can I create a memory leak in Java?","body":"<p><strong>Carelessly using a non-static inner class inside a class which has its own life cycle.</strong></p>\n<p>In Java, <strong>non-static inner and anonymous classes</strong> hold an <strong>implicit reference</strong> to their outer class. Static inner classes, on the other hand, <strong>do not</strong>.</p>\n<p>Here is a common example to have memory leak in Android, which is not obvious though:</p>\n<pre><code>public class SampleActivity extends Activity {\n\n  private final Handler mLeakyHandler = new Handler() { // Non-static inner class, holds the reference to the SampleActivity outer class\n    @Override\n    public void handleMessage(Message msg) {\n      // ...\n    }\n  }\n\n  @Override\n  protected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n\n    // Post a message and delay its execution for a long time.\n    mLeakyHandler.postDelayed(new Runnable() {//here, the anonymous inner class holds the reference to the SampleActivity class too\n      @Override\n      public void run() {\n     //....\n      }\n    }, SOME_TOME_TIME);\n\n    // Go back to the previous Activity.\n    finish();\n  }}\n</code></pre>\n<p>This will prevent the activity context from being garbage collected.</p>\n"},{"tags":[],"owner":{"account_id":5920664,"reputation":25,"user_id":4658182,"display_name":"TV Trailers"},"down_vote_count":9,"up_vote_count":2,"is_accepted":false,"score":-7,"last_activity_date":1426084687,"creation_date":1426084687,"answer_id":28989529,"question_id":6470651,"body_markdown":"There&#39;s no such thing as a memory leak in Java. Memory leak is a phrase borrowed from C et al. Java deals with memory allocation internally with the help of the GC. There&#39;s *memory wastefulness* (ie. leaving stranded objects), but not *memory leak*.","title":"How can I create a memory leak in Java?","body":"<p>There's no such thing as a memory leak in Java. Memory leak is a phrase borrowed from C et al. Java deals with memory allocation internally with the help of the GC. There's <em>memory wastefulness</em> (ie. leaving stranded objects), but not <em>memory leak</em>.</p>\n"},{"tags":[],"owner":{"display_name":"user1529891"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1620856887,"creation_date":1492531917,"answer_id":43477232,"question_id":6470651,"body_markdown":"A memory leak in Java is not your typical C/C++ memory leak.\r\n\r\nTo understand how the JVM works, read the [Understanding Memory Management][1].\r\n\r\nBasically, the important part is:\r\n\r\n&gt; The Mark and Sweep Model\r\n&gt;\r\n&gt; The JRockit JVM uses the mark and sweep garbage collection model for\r\n&gt; performing garbage collections of the whole heap. A mark and sweep\r\n&gt; garbage collection consists of two phases, the mark phase and the\r\n&gt; sweep phase.\r\n&gt;\r\n&gt; During the mark phase **all objects that are reachable from Java\r\n&gt; threads, native handles and other root sources are marked as alive**, as\r\n&gt; well as the objects that are reachable from these objects and so\r\n&gt; forth. **This process identifies and marks all objects that are still\r\n&gt; used, and the rest can be considered garbage.**\r\n&gt;\r\n&gt; During the sweep phase the heap is traversed to find the gaps between\r\n&gt; the live objects. These gaps are recorded in a free list and are made\r\n&gt; available for new object allocation.\r\n&gt;\r\n&gt; The JRockit JVM uses two improved versions of the mark and sweep\r\n&gt; model. One is mostly concurrent mark and sweep and the other is\r\n&gt; parallel mark and sweep. You can also mix the two strategies, running\r\n&gt; for example mostly concurrent mark and parallel sweep.\r\n\r\nSo, to create a memory leak in Java; the easiest way to do that is to create a database connection, do some work, and simply not `Close()` it; then generate a new database connection while staying in scope. This isn&#39;t hard to do in a loop for example. If you have a worker that pulls from a queue and pushes to a database you can easily create a memory leak by forgetting to `Close()` connections or opening them when not necessary, and so forth.\r\n\r\nEventually, you&#39;ll consume the heap that has been allocated to the JVM by forgetting to `Close()` the connection. This will result in the JVM garbage collecting like crazy; eventually resulting in `java.lang.OutOfMemoryError: Java heap space` errors. It should be noted that the error may not mean there is a memory leak; it could just mean you don&#39;t have enough memory; databases like [Cassandra][2] and [Elasticsearch][3] for example can throw that error because they don&#39;t have enough heap space.\r\n\r\nIt&#39;s worth noting that this is true for all GC languages. Below, are some examples I&#39;ve seen working as an SRE:\r\n\r\n - [Node.js][4] using [Redis][5] as a queue; the development team created new connections every 12 hours and forgot to close the old ones. Eventually node was OOMd because it consumed all the memory.\r\n - [Go][6] (I&#39;m guilty of this one); parsing large JSON files with `json.Unmarshal` and then passing the results by reference and keeping them open. Eventually, this resulted in the entire heap being consumed by accidental references I kept open to decode JSON.\r\n\r\n  [1]: https://docs.oracle.com/cd/E13150_01/jrockit_jvm/jrockit/geninfo/diagnos/garbage_collect.html\r\n  [2]: https://en.wikipedia.org/wiki/Apache_Cassandra\r\n  [3]: https://en.wikipedia.org/wiki/Elasticsearch\r\n  [4]: https://en.wikipedia.org/wiki/Node.js\r\n  [5]: https://en.wikipedia.org/wiki/Redis_%28data_store%29\r\n  [6]: https://en.wikipedia.org/wiki/Go_%28programming_language%29\r\n\r\n\r\n\r\n","title":"How can I create a memory leak in Java?","body":"<p>A memory leak in Java is not your typical C/C++ memory leak.</p>\n<p>To understand how the JVM works, read the <a href=\"https://docs.oracle.com/cd/E13150_01/jrockit_jvm/jrockit/geninfo/diagnos/garbage_collect.html\" rel=\"nofollow noreferrer\">Understanding Memory Management</a>.</p>\n<p>Basically, the important part is:</p>\n<blockquote>\n<p>The Mark and Sweep Model</p>\n<p>The JRockit JVM uses the mark and sweep garbage collection model for\nperforming garbage collections of the whole heap. A mark and sweep\ngarbage collection consists of two phases, the mark phase and the\nsweep phase.</p>\n<p>During the mark phase <strong>all objects that are reachable from Java\nthreads, native handles and other root sources are marked as alive</strong>, as\nwell as the objects that are reachable from these objects and so\nforth. <strong>This process identifies and marks all objects that are still\nused, and the rest can be considered garbage.</strong></p>\n<p>During the sweep phase the heap is traversed to find the gaps between\nthe live objects. These gaps are recorded in a free list and are made\navailable for new object allocation.</p>\n<p>The JRockit JVM uses two improved versions of the mark and sweep\nmodel. One is mostly concurrent mark and sweep and the other is\nparallel mark and sweep. You can also mix the two strategies, running\nfor example mostly concurrent mark and parallel sweep.</p>\n</blockquote>\n<p>So, to create a memory leak in Java; the easiest way to do that is to create a database connection, do some work, and simply not <code>Close()</code> it; then generate a new database connection while staying in scope. This isn't hard to do in a loop for example. If you have a worker that pulls from a queue and pushes to a database you can easily create a memory leak by forgetting to <code>Close()</code> connections or opening them when not necessary, and so forth.</p>\n<p>Eventually, you'll consume the heap that has been allocated to the JVM by forgetting to <code>Close()</code> the connection. This will result in the JVM garbage collecting like crazy; eventually resulting in <code>java.lang.OutOfMemoryError: Java heap space</code> errors. It should be noted that the error may not mean there is a memory leak; it could just mean you don't have enough memory; databases like <a href=\"https://en.wikipedia.org/wiki/Apache_Cassandra\" rel=\"nofollow noreferrer\">Cassandra</a> and <a href=\"https://en.wikipedia.org/wiki/Elasticsearch\" rel=\"nofollow noreferrer\">Elasticsearch</a> for example can throw that error because they don't have enough heap space.</p>\n<p>It's worth noting that this is true for all GC languages. Below, are some examples I've seen working as an SRE:</p>\n<ul>\n<li><a href=\"https://en.wikipedia.org/wiki/Node.js\" rel=\"nofollow noreferrer\">Node.js</a> using <a href=\"https://en.wikipedia.org/wiki/Redis_%28data_store%29\" rel=\"nofollow noreferrer\">Redis</a> as a queue; the development team created new connections every 12 hours and forgot to close the old ones. Eventually node was OOMd because it consumed all the memory.</li>\n<li><a href=\"https://en.wikipedia.org/wiki/Go_%28programming_language%29\" rel=\"nofollow noreferrer\">Go</a> (I'm guilty of this one); parsing large JSON files with <code>json.Unmarshal</code> and then passing the results by reference and keeping them open. Eventually, this resulted in the entire heap being consumed by accidental references I kept open to decode JSON.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":2650729,"reputation":640,"user_id":2292492,"accept_rate":50,"display_name":"deltamind106"},"down_vote_count":2,"up_vote_count":31,"is_accepted":false,"score":29,"last_activity_date":1665395934,"creation_date":1507921764,"answer_id":46736578,"question_id":6470651,"body_markdown":"The interviewer was probably looking for a circular reference like the code below (which incidentally only leak memory in very old JVMs that used reference counting, which isn&#39;t the case anymore).  But it&#39;s a pretty vague question, so it&#39;s a prime opportunity to show off your understanding of JVM memory management.\r\n```\r\nclass A {\r\n    B bRef;\r\n}\r\n\r\nclass B {\r\n    A aRef;\r\n}\r\n\r\npublic class Main {\r\n    public static void main(String args[]) {\r\n        A myA = new A();\r\n        B myB = new B();\r\n        myA.bRef = myB;\r\n        myB.aRef = myA;\r\n        myA=null;\r\n        myB=null;\r\n        /* at this point, there is no access to the myA and myB objects, */\r\n        /* even though both objects still have active references. */\r\n    } /* main */\r\n}\r\n```\r\nThen you can explain that with reference counting, the above code would leak memory.  But most modern JVMs don&#39;t use reference counting any longer. Most use a sweep garbage collector, which will in fact collect this memory.\r\n\r\nNext, you might explain creating an Object that has an underlying native resource, like this:\r\n```\r\npublic class Main {\r\n    public static void main(String args[]) {\r\n        Socket s = new Socket(InetAddress.getByName(&quot;google.com&quot;),80);\r\n        s=null;\r\n        /* at this point, because you didn&#39;t close the socket properly, */\r\n        /* you have a leak of a native descriptor, which uses memory. */\r\n    }\r\n}\r\n```\r\nThen you can explain this is technically a memory leak, but really the leak is caused by native code in the JVM allocating underlying native resources, which weren&#39;t freed by your Java code.\r\n\r\nAt the end of the day, with a modern JVM, you need to write some Java code that allocates a native resource outside the normal scope of the JVM&#39;s awareness.\r\n","title":"How can I create a memory leak in Java?","body":"<p>The interviewer was probably looking for a circular reference like the code below (which incidentally only leak memory in very old JVMs that used reference counting, which isn't the case anymore).  But it's a pretty vague question, so it's a prime opportunity to show off your understanding of JVM memory management.</p>\n<pre><code>class A {\n    B bRef;\n}\n\nclass B {\n    A aRef;\n}\n\npublic class Main {\n    public static void main(String args[]) {\n        A myA = new A();\n        B myB = new B();\n        myA.bRef = myB;\n        myB.aRef = myA;\n        myA=null;\n        myB=null;\n        /* at this point, there is no access to the myA and myB objects, */\n        /* even though both objects still have active references. */\n    } /* main */\n}\n</code></pre>\n<p>Then you can explain that with reference counting, the above code would leak memory.  But most modern JVMs don't use reference counting any longer. Most use a sweep garbage collector, which will in fact collect this memory.</p>\n<p>Next, you might explain creating an Object that has an underlying native resource, like this:</p>\n<pre><code>public class Main {\n    public static void main(String args[]) {\n        Socket s = new Socket(InetAddress.getByName(&quot;google.com&quot;),80);\n        s=null;\n        /* at this point, because you didn't close the socket properly, */\n        /* you have a leak of a native descriptor, which uses memory. */\n    }\n}\n</code></pre>\n<p>Then you can explain this is technically a memory leak, but really the leak is caused by native code in the JVM allocating underlying native resources, which weren't freed by your Java code.</p>\n<p>At the end of the day, with a modern JVM, you need to write some Java code that allocates a native resource outside the normal scope of the JVM's awareness.</p>\n"},{"tags":[],"owner":{"account_id":6023634,"reputation":65,"user_id":4738608,"display_name":"akhambir"},"down_vote_count":11,"up_vote_count":4,"is_accepted":false,"score":-7,"last_activity_date":1511794285,"creation_date":1511794285,"answer_id":47513757,"question_id":6470651,"body_markdown":"Just like this!\r\n\r\n    public static void main(String[] args) {\r\n        List&lt;Object&gt; objects = new ArrayList&lt;&gt;();\r\n        while(true) {\r\n            objects.add(new Object());\r\n        }\r\n    }","title":"How can I create a memory leak in Java?","body":"<p>Just like this!</p>\n\n<pre><code>public static void main(String[] args) {\n    List&lt;Object&gt; objects = new ArrayList&lt;&gt;();\n    while(true) {\n        objects.add(new Object());\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5355951,"reputation":15,"user_id":4268603,"display_name":"Praveen Kumar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665395850,"creation_date":1517913829,"answer_id":48641078,"question_id":6470651,"body_markdown":"A real-time example of a memory leak before JDK 1.7:\r\n\r\nSuppose you read a file of 1000 lines of text and keep them in String objects:\r\n```\r\nString fileText = 1000 characters from file\r\nfileText = fileText.subString(900, fileText.length());\r\n```\r\nIn the above code, I initially read 1000 characters and then did substring to get only the 100 last characters. Now `fileText` should only refer to 100 characters and all other characters should get garbage collected as I lost the reference, but before JDK 1.7 the substring function indirectly referred to the original string of the last 100 characters and prevents the whole string from garbage collection and the whole 1000 characters will be there in memory until you lose reference of the substring.\r\n\r\nYou can create a memory leak example like the above.","title":"How can I create a memory leak in Java?","body":"<p>A real-time example of a memory leak before JDK 1.7:</p>\n<p>Suppose you read a file of 1000 lines of text and keep them in String objects:</p>\n<pre><code>String fileText = 1000 characters from file\nfileText = fileText.subString(900, fileText.length());\n</code></pre>\n<p>In the above code, I initially read 1000 characters and then did substring to get only the 100 last characters. Now <code>fileText</code> should only refer to 100 characters and all other characters should get garbage collected as I lost the reference, but before JDK 1.7 the substring function indirectly referred to the original string of the last 100 characters and prevents the whole string from garbage collection and the whole 1000 characters will be there in memory until you lose reference of the substring.</p>\n<p>You can create a memory leak example like the above.</p>\n"},{"tags":[],"owner":{"account_id":3883061,"reputation":3764,"user_id":8524301,"accept_rate":89,"display_name":"payloc91"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1529306910,"creation_date":1524745313,"answer_id":50042877,"question_id":6470651,"body_markdown":"Another way to create potentially huge memory leaks is to hold references to `Map.Entry&lt;K,V&gt;` of a `TreeMap`.\r\n\r\nIt is hard to asses why this applies only to `TreeMap`s, but by looking at the implementation the reason might be that: a `TreeMap.Entry` stores references to its siblings, therefore if a `TreeMap` is ready to be collected, but some other class holds a reference to any of its `Map.Entry`, then the **entire** Map will be retained into memory.\r\n\r\n\r\n----------\r\n\r\n\r\n**Real-life scenario:**\r\n\r\nImagine having a db query that returns a big `TreeMap` data structure. People usually use `TreeMap`s as the element insertion order is retained.\r\n\r\n    public static Map&lt;String, Integer&gt; pseudoQueryDatabase();\r\n\r\nIf the query was called lots of times and, for each query (so, for each `Map` returned) you save an `Entry` somewhere, the memory would constantly keep growing.\r\n\r\nConsider the following wrapper class:\r\n\r\n    class EntryHolder {\r\n        Map.Entry&lt;String, Integer&gt; entry;\r\n\r\n        EntryHolder(Map.Entry&lt;String, Integer&gt; entry) {\r\n            this.entry = entry;\r\n        }\r\n    }\r\n\r\n\r\nApplication:\r\n\r\n    public class LeakTest {\r\n\r\n        private final List&lt;EntryHolder&gt; holdersCache = new ArrayList&lt;&gt;();\r\n        private static final int MAP_SIZE = 100_000;\r\n\r\n        public void run() {\r\n            // create 500 entries each holding a reference to an Entry of a TreeMap\r\n            IntStream.range(0, 500).forEach(value -&gt; {\r\n                // create map\r\n                final Map&lt;String, Integer&gt; map = pseudoQueryDatabase();\r\n\r\n                final int index = new Random().nextInt(MAP_SIZE);\r\n\r\n                // get random entry from map\r\n                for (Map.Entry&lt;String, Integer&gt; entry : map.entrySet()) {\r\n                    if (entry.getValue().equals(index)) {\r\n                        holdersCache.add(new EntryHolder(entry));\r\n                        break;\r\n                    }\r\n                }\r\n                // to observe behavior in visualvm\r\n                try {\r\n                    Thread.sleep(500);\r\n                } catch (InterruptedException e) {\r\n                    e.printStackTrace();\r\n                }\r\n            });\r\n\r\n        }\r\n\r\n        public static Map&lt;String, Integer&gt; pseudoQueryDatabase() {\r\n            final Map&lt;String, Integer&gt; map = new TreeMap&lt;&gt;();\r\n            IntStream.range(0, MAP_SIZE).forEach(i -&gt; map.put(String.valueOf(i), i));\r\n            return map;\r\n        }\r\n\r\n        public static void main(String[] args) throws Exception {\r\n            new LeakTest().run();\r\n        }\r\n    }\r\n\r\n\r\nAfter each `pseudoQueryDatabase()` call, the `map` instances should be ready for collection, but it won&#39;t happen, as at least one `Entry` is stored somewhere else.\r\n\r\nDepending on your `jvm` settings, the application may crash in the early stage due to a `OutOfMemoryError`.\r\n\r\nYou can see from this `visualvm` graph how the memory keeps growing.\r\n\r\n[![Memory dump - TreeMap][1]][1]\r\n\r\n\r\n\r\nThe same does not happen with a hashed data-structure (`HashMap`).\r\n\r\nThis is the graph when using a `HashMap`.\r\n\r\n[![Memory dump - HashMap][2]][2]\r\n\r\n\r\n\r\n**The solution?** Just directly save the key / value (as you probably already do) rather than saving the `Map.Entry`.\r\n\r\n----------\r\n\r\n\r\nI have written a more extensive benchmark [here][3].\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Byiwn.png\r\n  [2]: https://i.stack.imgur.com/Yr3eC.png\r\n  [3]: https://stackoverflow.com/a/49430255/8524301","title":"How can I create a memory leak in Java?","body":"<p>Another way to create potentially huge memory leaks is to hold references to <code>Map.Entry&lt;K,V&gt;</code> of a <code>TreeMap</code>.</p>\n\n<p>It is hard to asses why this applies only to <code>TreeMap</code>s, but by looking at the implementation the reason might be that: a <code>TreeMap.Entry</code> stores references to its siblings, therefore if a <code>TreeMap</code> is ready to be collected, but some other class holds a reference to any of its <code>Map.Entry</code>, then the <strong>entire</strong> Map will be retained into memory.</p>\n\n<hr>\n\n<p><strong>Real-life scenario:</strong></p>\n\n<p>Imagine having a db query that returns a big <code>TreeMap</code> data structure. People usually use <code>TreeMap</code>s as the element insertion order is retained.</p>\n\n<pre><code>public static Map&lt;String, Integer&gt; pseudoQueryDatabase();\n</code></pre>\n\n<p>If the query was called lots of times and, for each query (so, for each <code>Map</code> returned) you save an <code>Entry</code> somewhere, the memory would constantly keep growing.</p>\n\n<p>Consider the following wrapper class:</p>\n\n<pre><code>class EntryHolder {\n    Map.Entry&lt;String, Integer&gt; entry;\n\n    EntryHolder(Map.Entry&lt;String, Integer&gt; entry) {\n        this.entry = entry;\n    }\n}\n</code></pre>\n\n<p>Application:</p>\n\n<pre><code>public class LeakTest {\n\n    private final List&lt;EntryHolder&gt; holdersCache = new ArrayList&lt;&gt;();\n    private static final int MAP_SIZE = 100_000;\n\n    public void run() {\n        // create 500 entries each holding a reference to an Entry of a TreeMap\n        IntStream.range(0, 500).forEach(value -&gt; {\n            // create map\n            final Map&lt;String, Integer&gt; map = pseudoQueryDatabase();\n\n            final int index = new Random().nextInt(MAP_SIZE);\n\n            // get random entry from map\n            for (Map.Entry&lt;String, Integer&gt; entry : map.entrySet()) {\n                if (entry.getValue().equals(index)) {\n                    holdersCache.add(new EntryHolder(entry));\n                    break;\n                }\n            }\n            // to observe behavior in visualvm\n            try {\n                Thread.sleep(500);\n            } catch (InterruptedException e) {\n                e.printStackTrace();\n            }\n        });\n\n    }\n\n    public static Map&lt;String, Integer&gt; pseudoQueryDatabase() {\n        final Map&lt;String, Integer&gt; map = new TreeMap&lt;&gt;();\n        IntStream.range(0, MAP_SIZE).forEach(i -&gt; map.put(String.valueOf(i), i));\n        return map;\n    }\n\n    public static void main(String[] args) throws Exception {\n        new LeakTest().run();\n    }\n}\n</code></pre>\n\n<p>After each <code>pseudoQueryDatabase()</code> call, the <code>map</code> instances should be ready for collection, but it won't happen, as at least one <code>Entry</code> is stored somewhere else.</p>\n\n<p>Depending on your <code>jvm</code> settings, the application may crash in the early stage due to a <code>OutOfMemoryError</code>.</p>\n\n<p>You can see from this <code>visualvm</code> graph how the memory keeps growing.</p>\n\n<p><a href=\"https://i.stack.imgur.com/Byiwn.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/Byiwn.png\" alt=\"Memory dump - TreeMap\"></a></p>\n\n<p>The same does not happen with a hashed data-structure (<code>HashMap</code>).</p>\n\n<p>This is the graph when using a <code>HashMap</code>.</p>\n\n<p><a href=\"https://i.stack.imgur.com/Yr3eC.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/Yr3eC.png\" alt=\"Memory dump - HashMap\"></a></p>\n\n<p><strong>The solution?</strong> Just directly save the key / value (as you probably already do) rather than saving the <code>Map.Entry</code>.</p>\n\n<hr>\n\n<p>I have written a more extensive benchmark <a href=\"https://stackoverflow.com/a/49430255/8524301\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":261278,"reputation":2329,"user_id":545353,"display_name":"Pavel Molchanov"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1620857441,"creation_date":1529614032,"answer_id":50977188,"question_id":6470651,"body_markdown":"I want to give advice on how to monitor an application for the memory leaks with the tools that are available in the JVM. It doesn&#39;t show how to generate the memory leak, but explains how to detect it with the minimum tools available.\r\n\r\nYou need to monitor Java memory consumption first.\r\n\r\nThe simplest way to do this is to use the *jstat* utility that comes with JVM:\r\n\r\n    jstat -gcutil &lt;process_id&gt; &lt;timeout&gt;\r\n\r\nIt will report memory consumption for each generation (*young*, *eldery* and *old*) and garbage collection times (*young* and *full*).\r\n\r\nAs soon as you spot that a *full garbage collection* is executed too often and takes too much time, you can assume that application is leaking memory.\r\n\r\nThen you need to create a memory dump using the *jmap* utility:\r\n\r\n    jmap -dump:live,format=b,file=heap.bin &lt;process_id&gt;\r\n\r\nThen you need to analyse the heap.bin file with a *memory analyser*, *Eclipse Memory Analyzer* (MAT) for example.\r\n\r\nMAT will analyze the memory and provide you suspect information about memory leaks.\r\n\r\n\r\n\r\n","title":"How can I create a memory leak in Java?","body":"<p>I want to give advice on how to monitor an application for the memory leaks with the tools that are available in the JVM. It doesn't show how to generate the memory leak, but explains how to detect it with the minimum tools available.</p>\n<p>You need to monitor Java memory consumption first.</p>\n<p>The simplest way to do this is to use the <em>jstat</em> utility that comes with JVM:</p>\n<pre><code>jstat -gcutil &lt;process_id&gt; &lt;timeout&gt;\n</code></pre>\n<p>It will report memory consumption for each generation (<em>young</em>, <em>eldery</em> and <em>old</em>) and garbage collection times (<em>young</em> and <em>full</em>).</p>\n<p>As soon as you spot that a <em>full garbage collection</em> is executed too often and takes too much time, you can assume that application is leaking memory.</p>\n<p>Then you need to create a memory dump using the <em>jmap</em> utility:</p>\n<pre><code>jmap -dump:live,format=b,file=heap.bin &lt;process_id&gt;\n</code></pre>\n<p>Then you need to analyse the heap.bin file with a <em>memory analyser</em>, <em>Eclipse Memory Analyzer</em> (MAT) for example.</p>\n<p>MAT will analyze the memory and provide you suspect information about memory leaks.</p>\n"},{"tags":[],"owner":{"account_id":2739457,"reputation":7470,"user_id":2361308,"accept_rate":71,"display_name":"Hearen"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1620863989,"creation_date":1553757930,"answer_id":55392154,"question_id":6470651,"body_markdown":"&gt; a memory leak is a type of resource leak that occurs when a computer program incorrectly manages memory allocations in such a way that memory which is **no longer needed is not released** =&gt; [Wikipedia definition](https://en.wikipedia.org/wiki/Memory_leak)\r\n\r\n&lt;sub&gt; It&#39;s kind of relatively context-based topic, you can just create one based on your taste as long as the unused references will never be used by clients, but still stay alive.&lt;/sub&gt;\r\n\r\nThe first example should be a custom stack without *nulling* the obsolete references in [Effective Java, item 6][1].\r\n\r\nOf course there are many more as long as you want, but if we just take look at the Java built-in classes, it could be some as\r\n\r\n[`subList()`][2]\r\n\r\nLet&#39;s check some *super silly* code to produce the leak.\r\n\r\n    public class MemoryLeak {\r\n        private static final int HUGE_SIZE = 10_000;\r\n\r\n        public static void main(String... args) {\r\n            letsLeakNow();\r\n        }\r\n\r\n        private static void letsLeakNow() {\r\n            Map&lt;Integer, Object&gt; leakMap = new HashMap&lt;&gt;();\r\n            for (int i = 0; i &lt; HUGE_SIZE; ++i) {\r\n                leakMap.put(i * 2, getListWithRandomNumber());\r\n            }\r\n        }\r\n\r\n\r\n\r\n        private static List&lt;Integer&gt; getListWithRandomNumber() {\r\n            List&lt;Integer&gt; originalHugeIntList = new ArrayList&lt;&gt;();\r\n            for (int i = 0; i &lt; HUGE_SIZE; ++i) {\r\n                originalHugeIntList.add(new Random().nextInt());\r\n            }\r\n            return originalHugeIntList.subList(0, 1);\r\n        }\r\n    }\r\n\r\nActually there is another trick we can cause memory leak using [HashMap][3] by taking advantage of its looking process. There are actually two types:\r\n\r\n- `hashCode()` is always the same but `equals()` are different;\r\n- use *random* `hashCode()` and `equals()` always true;\r\n\r\nWhy?\r\n\r\n[**`hashCode()` -&gt; bucket =&gt; `equals()` to locate the pair**][4]\r\n\r\n----\r\n\r\nI was about to mention [`substring()`][5] first and then `subList()` but it seems this issue is already fixed as its source presents in JDK 8.\r\n\r\n    public String substring(int beginIndex, int endIndex) {\r\n        if (beginIndex &lt; 0) {\r\n            throw new StringIndexOutOfBoundsException(beginIndex);\r\n        }\r\n        if (endIndex &gt; value.length) {\r\n            throw new StringIndexOutOfBoundsException(endIndex);\r\n        }\r\n        int subLen = endIndex - beginIndex;\r\n        if (subLen &lt; 0) {\r\n            throw new StringIndexOutOfBoundsException(subLen);\r\n        }\r\n        return ((beginIndex == 0) &amp;&amp; (endIndex == value.length)) ? this\r\n                : new String(value, beginIndex, subLen);\r\n    }\r\n\r\n  [1]: https://www.codeproject.com/Articles/30593/Effective-Java#pre30076\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/util/List.html#subList-int-int-\r\n  [3]: https://docs.oracle.com/javase/8/docs/api/java/util/HashMap.html\r\n  [4]: https://stackoverflow.com/a/6493946/2361308\r\n  [5]: https://docs.oracle.com/javase/8/docs/api/java/lang/String.html#substring-int-int-\r\n\r\n\r\n\r\n","title":"How can I create a memory leak in Java?","body":"<blockquote>\n<p>a memory leak is a type of resource leak that occurs when a computer program incorrectly manages memory allocations in such a way that memory which is <strong>no longer needed is not released</strong> =&gt; <a href=\"https://en.wikipedia.org/wiki/Memory_leak\" rel=\"nofollow noreferrer\">Wikipedia definition</a></p>\n</blockquote>\n<p><sub> It's kind of relatively context-based topic, you can just create one based on your taste as long as the unused references will never be used by clients, but still stay alive.</sub></p>\n<p>The first example should be a custom stack without <em>nulling</em> the obsolete references in <a href=\"https://www.codeproject.com/Articles/30593/Effective-Java#pre30076\" rel=\"nofollow noreferrer\">Effective Java, item 6</a>.</p>\n<p>Of course there are many more as long as you want, but if we just take look at the Java built-in classes, it could be some as</p>\n<p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/List.html#subList-int-int-\" rel=\"nofollow noreferrer\"><code>subList()</code></a></p>\n<p>Let's check some <em>super silly</em> code to produce the leak.</p>\n<pre><code>public class MemoryLeak {\n    private static final int HUGE_SIZE = 10_000;\n\n    public static void main(String... args) {\n        letsLeakNow();\n    }\n\n    private static void letsLeakNow() {\n        Map&lt;Integer, Object&gt; leakMap = new HashMap&lt;&gt;();\n        for (int i = 0; i &lt; HUGE_SIZE; ++i) {\n            leakMap.put(i * 2, getListWithRandomNumber());\n        }\n    }\n\n\n\n    private static List&lt;Integer&gt; getListWithRandomNumber() {\n        List&lt;Integer&gt; originalHugeIntList = new ArrayList&lt;&gt;();\n        for (int i = 0; i &lt; HUGE_SIZE; ++i) {\n            originalHugeIntList.add(new Random().nextInt());\n        }\n        return originalHugeIntList.subList(0, 1);\n    }\n}\n</code></pre>\n<p>Actually there is another trick we can cause memory leak using <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/HashMap.html\" rel=\"nofollow noreferrer\">HashMap</a> by taking advantage of its looking process. There are actually two types:</p>\n<ul>\n<li><code>hashCode()</code> is always the same but <code>equals()</code> are different;</li>\n<li>use <em>random</em> <code>hashCode()</code> and <code>equals()</code> always true;</li>\n</ul>\n<p>Why?</p>\n<p><a href=\"https://stackoverflow.com/a/6493946/2361308\"><strong><code>hashCode()</code> -&gt; bucket =&gt; <code>equals()</code> to locate the pair</strong></a></p>\n<hr />\n<p>I was about to mention <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/String.html#substring-int-int-\" rel=\"nofollow noreferrer\"><code>substring()</code></a> first and then <code>subList()</code> but it seems this issue is already fixed as its source presents in JDK 8.</p>\n<pre><code>public String substring(int beginIndex, int endIndex) {\n    if (beginIndex &lt; 0) {\n        throw new StringIndexOutOfBoundsException(beginIndex);\n    }\n    if (endIndex &gt; value.length) {\n        throw new StringIndexOutOfBoundsException(endIndex);\n    }\n    int subLen = endIndex - beginIndex;\n    if (subLen &lt; 0) {\n        throw new StringIndexOutOfBoundsException(subLen);\n    }\n    return ((beginIndex == 0) &amp;&amp; (endIndex == value.length)) ? this\n            : new String(value, beginIndex, subLen);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10273010,"reputation":5363,"user_id":7580839,"accept_rate":75,"display_name":"Amir Fo"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1620864060,"creation_date":1568820272,"answer_id":57996188,"question_id":6470651,"body_markdown":"One of the Java memory leakings examples is [MySQLs memory leaking bug][1] resulting when ResultSets close method is forgotten to be called. For example:\r\n\r\n    while(true) {\r\n        ResultSet rs = database.select(query);\r\n        ...\r\n        // going to next step of loop and leaving resultset without calling rs.close();\r\n    }\r\n\r\n\r\n  [1]: https://bugs.mysql.com/bug.php?id=5022\r\n\r\n\r\n","title":"How can I create a memory leak in Java?","body":"<p>One of the Java memory leakings examples is <a href=\"https://bugs.mysql.com/bug.php?id=5022\" rel=\"nofollow noreferrer\">MySQLs memory leaking bug</a> resulting when ResultSets close method is forgotten to be called. For example:</p>\n<pre><code>while(true) {\n    ResultSet rs = database.select(query);\n    ...\n    // going to next step of loop and leaving resultset without calling rs.close();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16224013,"reputation":1568,"user_id":11714860,"display_name":"Sapphire_Brick"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1614293568,"creation_date":1588555342,"answer_id":61583798,"question_id":6470651,"body_markdown":"```Java\r\n\r\nimport sun.misc.Unsafe;\r\nimport java.lang.reflect.Field;\r\n\r\npublic class Main {\r\n    public static void main(String args[]) {\r\n        try {\r\n            Field f = Unsafe.class.getDeclaredField(&quot;theUnsafe&quot;);\r\n            f.setAccessible(true);\r\n            ((Unsafe) f.get(null)).allocateMemory(2000000000);\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n}\r\n```","title":"How can I create a memory leak in Java?","body":"<pre><code>\nimport sun.misc.Unsafe;\nimport java.lang.reflect.Field;\n\npublic class Main {\n    public static void main(String args[]) {\n        try {\n            Field f = Unsafe.class.getDeclaredField(&quot;theUnsafe&quot;);\n            f.setAccessible(true);\n            ((Unsafe) f.get(null)).allocateMemory(2000000000);\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15004766,"reputation":1323,"user_id":10831193,"display_name":"Jessie Lesbian"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1589621250,"creation_date":1589621250,"answer_id":61834624,"question_id":6470651,"body_markdown":"Create a JNI function containing just a while-true loop and call it with a large object from another thread. The GC doesn&#39;t like JNI very much and is going to keep the object in memory forever.","title":"How can I create a memory leak in Java?","body":"<p>Create a JNI function containing just a while-true loop and call it with a large object from another thread. The GC doesn't like JNI very much and is going to keep the object in memory forever.</p>\n"},{"tags":[],"owner":{"account_id":17722379,"reputation":2112,"user_id":12867091,"display_name":"Tashkhisi"},"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1663164356,"creation_date":1598637860,"answer_id":63638868,"question_id":6470651,"body_markdown":"There are many good examples of memory leaks in Java, and I will mention two of them in this answer.\r\n\r\n**Example 1:**\r\n\r\nHere is a good example of a memory leak from the book *Effective Java, Third Edition* (item 7: Eliminate obsolete object references):\r\n```\r\n// Can you spot the &quot;memory leak&quot;?\r\npublic class Stack {\r\n    private static final int DEFAULT_INITIAL_CAPACITY = 16;\r\n    private Object[] elements;\r\n    private int size = 0;\r\n\r\n    public Stack() {\r\n        elements = new Object[DEFAULT_INITIAL_CAPACITY];\r\n    }\r\n\r\n    public void push(Object e) {\r\n        ensureCapacity();\r\n        elements[size++] = e;\r\n    }\r\n\r\n    public Object pop() {\r\n        if (size == 0) throw new EmptyStackException();\r\n        return elements[--size];\r\n    }\r\n\r\n    /*** Ensure space for at least one more element, roughly* doubling the capacity each time the array needs to grow.*/\r\n    private void ensureCapacity() {\r\n        if (elements.length == size) elements = Arrays.copyOf(elements, 2 * size + 1);\r\n    }\r\n}\r\n```\r\nThis is the paragraph of the book that describes why this implementation will cause a memory leak:\r\n\r\n&gt; If a stack grows and then shrinks, the objects that were popped off the\r\n&gt; stack will not be garbage collected, even if the program using  the\r\n&gt; stack  has  no  more  references  to  them.  This  is  because  the\r\n&gt; stack  maintains obsolete references to these objects. An obsolete\r\n&gt; reference is simply a reference that will never be dereferenced\r\n&gt; again. In this case, any references outside of the “active portion” of\r\n&gt; the element array are obsolete. The active portion consists of the\r\n&gt; elements whose index is less than size\r\n\r\nHere is the solution of the book to tackle this memory leak:\r\n\r\n&gt; The  fix  for  this  sort  of  problem  is  simple:  null  out\r\n&gt; references  once  they become obsolete. In the case of our Stack class,\r\n&gt; the reference to an item becomes obsolete  as  soon  as  it’s  popped\r\n&gt; off  the  stack. The  corrected  version  of  the  pop method looks like this:\r\n```\r\npublic Object pop() {\r\n    if (size == 0) throw new EmptyStackException();\r\n    Object result = elements[--size];\r\n    elements[size] = null; // Eliminate obsolete reference\r\n    return result;\r\n}\r\n```\r\nBut how can we prevent a memory leak from happening? This is a good caveat from the book:\r\n\r\n&gt; Generally  speaking,  whenever  a  class  manages  its  own  memory,\r\n&gt; the  programmer should be alert for memory leaks. Whenever an element\r\n&gt; is freed, any object references contained in the element should be\r\n&gt; nulled out.\r\n\r\n**Example 2:**\r\n\r\nThe [observer pattern][1] also can cause a memory leak. You can read about this pattern in the following link: [Observer pattern][1].\r\n\r\nThis is one implementation of the Observer pattern:\r\n```\r\nclass EventSource {\r\n    public interface Observer {\r\n        void update(String event);\r\n    }\r\n\r\n    private final List&lt;Observer&gt; observers = new ArrayList&lt;&gt;();\r\n\r\n    private void notifyObservers(String event) {\r\n        observers.forEach(observer -&gt; observer.update(event)); //alternative lambda expression: observers.forEach(Observer::update);\r\n    }\r\n\r\n    public void addObserver(Observer observer) {\r\n        observers.add(observer);\r\n    }\r\n\r\n    public void scanSystemIn() {\r\n        Scanner scanner = new Scanner(System.in);\r\n        while (scanner.hasNextLine()) {\r\n            String line = scanner.nextLine();\r\n            notifyObservers(line);\r\n        }\r\n    }\r\n}\r\n```\r\nIn this implementation, `EventSource`, which is Observable in the Observer design pattern, can hold links to `Observer` objects, but this link is never removed from the `observers` field in `EventSource`. So they will never be collected by the garbage collector. One solution to tackle this problem is providing another method to the client for removing the aforementioned observers from the `observers` field when they don&#39;t need those observers anymore:\r\n```\r\npublic void removeObserver(Observer observer) {\r\n    observers.remove(observer);\r\n}\r\n```\r\n  [1]: https://en.wikipedia.org/wiki/Observer_pattern","title":"How can I create a memory leak in Java?","body":"<p>There are many good examples of memory leaks in Java, and I will mention two of them in this answer.</p>\n<p><strong>Example 1:</strong></p>\n<p>Here is a good example of a memory leak from the book <em>Effective Java, Third Edition</em> (item 7: Eliminate obsolete object references):</p>\n<pre><code>// Can you spot the &quot;memory leak&quot;?\npublic class Stack {\n    private static final int DEFAULT_INITIAL_CAPACITY = 16;\n    private Object[] elements;\n    private int size = 0;\n\n    public Stack() {\n        elements = new Object[DEFAULT_INITIAL_CAPACITY];\n    }\n\n    public void push(Object e) {\n        ensureCapacity();\n        elements[size++] = e;\n    }\n\n    public Object pop() {\n        if (size == 0) throw new EmptyStackException();\n        return elements[--size];\n    }\n\n    /*** Ensure space for at least one more element, roughly* doubling the capacity each time the array needs to grow.*/\n    private void ensureCapacity() {\n        if (elements.length == size) elements = Arrays.copyOf(elements, 2 * size + 1);\n    }\n}\n</code></pre>\n<p>This is the paragraph of the book that describes why this implementation will cause a memory leak:</p>\n<blockquote>\n<p>If a stack grows and then shrinks, the objects that were popped off the\nstack will not be garbage collected, even if the program using  the\nstack  has  no  more  references  to  them.  This  is  because  the\nstack  maintains obsolete references to these objects. An obsolete\nreference is simply a reference that will never be dereferenced\nagain. In this case, any references outside of the “active portion” of\nthe element array are obsolete. The active portion consists of the\nelements whose index is less than size</p>\n</blockquote>\n<p>Here is the solution of the book to tackle this memory leak:</p>\n<blockquote>\n<p>The  fix  for  this  sort  of  problem  is  simple:  null  out\nreferences  once  they become obsolete. In the case of our Stack class,\nthe reference to an item becomes obsolete  as  soon  as  it’s  popped\noff  the  stack. The  corrected  version  of  the  pop method looks like this:</p>\n</blockquote>\n<pre><code>public Object pop() {\n    if (size == 0) throw new EmptyStackException();\n    Object result = elements[--size];\n    elements[size] = null; // Eliminate obsolete reference\n    return result;\n}\n</code></pre>\n<p>But how can we prevent a memory leak from happening? This is a good caveat from the book:</p>\n<blockquote>\n<p>Generally  speaking,  whenever  a  class  manages  its  own  memory,\nthe  programmer should be alert for memory leaks. Whenever an element\nis freed, any object references contained in the element should be\nnulled out.</p>\n</blockquote>\n<p><strong>Example 2:</strong></p>\n<p>The <a href=\"https://en.wikipedia.org/wiki/Observer_pattern\" rel=\"nofollow noreferrer\">observer pattern</a> also can cause a memory leak. You can read about this pattern in the following link: <a href=\"https://en.wikipedia.org/wiki/Observer_pattern\" rel=\"nofollow noreferrer\">Observer pattern</a>.</p>\n<p>This is one implementation of the Observer pattern:</p>\n<pre><code>class EventSource {\n    public interface Observer {\n        void update(String event);\n    }\n\n    private final List&lt;Observer&gt; observers = new ArrayList&lt;&gt;();\n\n    private void notifyObservers(String event) {\n        observers.forEach(observer -&gt; observer.update(event)); //alternative lambda expression: observers.forEach(Observer::update);\n    }\n\n    public void addObserver(Observer observer) {\n        observers.add(observer);\n    }\n\n    public void scanSystemIn() {\n        Scanner scanner = new Scanner(System.in);\n        while (scanner.hasNextLine()) {\n            String line = scanner.nextLine();\n            notifyObservers(line);\n        }\n    }\n}\n</code></pre>\n<p>In this implementation, <code>EventSource</code>, which is Observable in the Observer design pattern, can hold links to <code>Observer</code> objects, but this link is never removed from the <code>observers</code> field in <code>EventSource</code>. So they will never be collected by the garbage collector. One solution to tackle this problem is providing another method to the client for removing the aforementioned observers from the <code>observers</code> field when they don't need those observers anymore:</p>\n<pre><code>public void removeObserver(Observer observer) {\n    observers.remove(observer);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":406368,"reputation":61,"user_id":775838,"display_name":"Hoang TO"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1625553886,"creation_date":1625553886,"answer_id":68265741,"question_id":6470651,"body_markdown":"A little improvement to previous answers (to generate memory leak faster) is to use instances of DOM Document loaded from big XML files.","title":"How can I create a memory leak in Java?","body":"<p>A little improvement to previous answers (to generate memory leak faster) is to use instances of DOM Document loaded from big XML files.</p>\n"},{"tags":[],"owner":{"account_id":3014209,"reputation":1479,"user_id":2556867,"accept_rate":44,"display_name":"degr"},"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1663163918,"creation_date":1640872159,"answer_id":70532541,"question_id":6470651,"body_markdown":"It&#39;s pretty easy:\r\n```\r\nObject[] o = new Object[]{};\r\nwhile(true) {\r\n    o = new Object[]{o};\r\n}\r\n```\r\n","title":"How can I create a memory leak in Java?","body":"<p>It's pretty easy:</p>\n<pre><code>Object[] o = new Object[]{};\nwhile(true) {\n    o = new Object[]{o};\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23649881,"reputation":141,"user_id":17678908,"display_name":"TheWaterWave222"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1651019876,"creation_date":1651019876,"answer_id":72022022,"question_id":6470651,"body_markdown":"You can try making many buffered readers try to open the same file at once with a ```while``` loop with a condition that is never false. And the cherry on top is these are never closed.","title":"How can I create a memory leak in Java?","body":"<p>You can try making many buffered readers try to open the same file at once with a <code>while</code> loop with a condition that is never false. And the cherry on top is these are never closed.</p>\n"},{"tags":[],"owner":{"account_id":935202,"reputation":49046,"user_id":964243,"accept_rate":66,"display_name":"Boann"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1671875989,"creation_date":1671873939,"answer_id":74906695,"question_id":6470651,"body_markdown":"I experienced a very real memory leak with [`javax.swing.JPopupMenu`](https://docs.oracle.com/javase/8/docs/api/javax/swing/JPopupMenu.html).\r\n\r\nI have a GUI application which displays multiple tabbed documents. After closing a document, it lingered in memory if a right-click context menu had been used on any component on the tab. The menus were shared among tabs, and it turns out that after you call [`popupMenu.show(Component invoker, int x, int y)`](https://docs.oracle.com/javase/8/docs/api/javax/swing/JPopupMenu.html#show-java.awt.Component-int-int-), the component quietly persists as the menu&#39;s &quot;invoker&quot; until it is next changed, or cleared by `setInvoker(null)`. Indirectly, the invoker reference was persisting the entire document and everything associated with it.\r\n\r\nIt&#39;s worth noting that a menu can only hold one reference to an old component this way, so this memory leak cannot grow without bound.","title":"How can I create a memory leak in Java?","body":"<p>I experienced a very real memory leak with <a href=\"https://docs.oracle.com/javase/8/docs/api/javax/swing/JPopupMenu.html\" rel=\"nofollow noreferrer\"><code>javax.swing.JPopupMenu</code></a>.</p>\n<p>I have a GUI application which displays multiple tabbed documents. After closing a document, it lingered in memory if a right-click context menu had been used on any component on the tab. The menus were shared among tabs, and it turns out that after you call <a href=\"https://docs.oracle.com/javase/8/docs/api/javax/swing/JPopupMenu.html#show-java.awt.Component-int-int-\" rel=\"nofollow noreferrer\"><code>popupMenu.show(Component invoker, int x, int y)</code></a>, the component quietly persists as the menu's &quot;invoker&quot; until it is next changed, or cleared by <code>setInvoker(null)</code>. Indirectly, the invoker reference was persisting the entire document and everything associated with it.</p>\n<p>It's worth noting that a menu can only hold one reference to an old component this way, so this memory leak cannot grow without bound.</p>\n"}],"owner":{"account_id":212390,"reputation":26536,"user_id":465179,"accept_rate":99,"display_name":"MatBanik"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":746167,"favorite_count":0,"down_vote_count":12,"up_vote_count":3733,"accepted_answer_id":6471947,"answer_count":61,"score":3721,"last_activity_date":1695199331,"creation_date":1308931912,"question_id":6470651,"body_markdown":"I just had an interview where I was asked to create a ***memory leak*** with Java. \r\n\r\nNeedless to say, I felt pretty dumb, having no idea how to start creating one.\r\n\r\nWhat would an example be?","title":"How can I create a memory leak in Java?","body":"<p>I just had an interview where I was asked to create a <em><strong>memory leak</strong></em> with Java.</p>\n<p>Needless to say, I felt pretty dumb, having no idea how to start creating one.</p>\n<p>What would an example be?</p>\n"},{"tags":["java","elasticsearch","kibana","elastic-stack","elk"],"answers":[{"tags":[],"owner":{"account_id":5742767,"reputation":9235,"user_id":4534923,"display_name":"Paulo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695199146,"creation_date":1695199146,"answer_id":77140700,"question_id":77140157,"body_markdown":"# Tldr;\r\n\r\nYou can not change the values in a field without:\r\n\r\n - Update by query\r\n - Re indexing\r\n\r\nBut you could leverage the runtime fields.\r\n\r\n# Solution\r\n## Runtime fields\r\n\r\nWhat are they:\r\n\r\nCreated on-the-fly fields during queries without altering index mapping. They are great for dynamic data transformations and calculations. \r\n\r\nBUT: They&#39;re temporary, and can impact query performance.\r\n\r\nPlease find below an example on how to use it for you use case.\r\n\r\n```json\r\nPUT 77140157\r\n{\r\n  &quot;mappings&quot;: {\r\n    &quot;properties&quot;: {\r\n      &quot;@timestamp&quot;:{\r\n        &quot;type&quot;: &quot;date&quot;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nPUT /77140157/_doc/1\r\n{\r\n  &quot;@timestamp&quot;: 1695197861930\r\n}\r\n\r\nGET 77140157/_search\r\n{\r\n  &quot;fields&quot;: [\r\n    &quot;formated_date&quot;\r\n  ], \r\n  &quot;runtime_mappings&quot;: {\r\n    &quot;formated_date&quot;: {\r\n      &quot;type&quot;: &quot;keyword&quot;,\r\n      &quot;script&quot;: {\r\n        &quot;source&quot;: &quot;&quot;&quot;\r\n        ZonedDateTime zonedDateTime = doc[&#39;@timestamp&#39;].value;\r\n          def formatter = DateTimeFormatter.ofPattern(&#39;yyyy-MM-dd HH:mm:ss&#39;).withZone(ZoneOffset.UTC);\r\n        emit(zonedDateTime.format(formatter));\r\n          &quot;&quot;&quot;\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nGiving you\r\n\r\n```json\r\n{\r\n  &quot;took&quot;: 22,\r\n  &quot;timed_out&quot;: false,\r\n  &quot;_shards&quot;: {\r\n    &quot;total&quot;: 1,\r\n    &quot;successful&quot;: 1,\r\n    &quot;skipped&quot;: 0,\r\n    &quot;failed&quot;: 0\r\n  },\r\n  &quot;hits&quot;: {\r\n    &quot;total&quot;: {\r\n      &quot;value&quot;: 1,\r\n      &quot;relation&quot;: &quot;eq&quot;\r\n    },\r\n    &quot;max_score&quot;: 1,\r\n    &quot;hits&quot;: [\r\n      {\r\n        &quot;_index&quot;: &quot;77140157&quot;,\r\n        &quot;_id&quot;: &quot;1&quot;,\r\n        &quot;_score&quot;: 1,\r\n        &quot;_source&quot;: {\r\n          &quot;@timestamp&quot;: 1695197861930\r\n        },\r\n        &quot;fields&quot;: {\r\n          &quot;formated_date&quot;: [\r\n            &quot;2023-09-20 08:17:41&quot;\r\n          ]\r\n        }\r\n      }\r\n    ]\r\n  }\r\n}\r\n```","title":"How to change date field format in elasticsearch in existing indexes as well","body":"<h1>Tldr;</h1>\n<p>You can not change the values in a field without:</p>\n<ul>\n<li>Update by query</li>\n<li>Re indexing</li>\n</ul>\n<p>But you could leverage the runtime fields.</p>\n<h1>Solution</h1>\n<h2>Runtime fields</h2>\n<p>What are they:</p>\n<p>Created on-the-fly fields during queries without altering index mapping. They are great for dynamic data transformations and calculations.</p>\n<p>BUT: They're temporary, and can impact query performance.</p>\n<p>Please find below an example on how to use it for you use case.</p>\n<pre class=\"lang-json prettyprint-override\"><code>PUT 77140157\n{\n  &quot;mappings&quot;: {\n    &quot;properties&quot;: {\n      &quot;@timestamp&quot;:{\n        &quot;type&quot;: &quot;date&quot;\n      }\n    }\n  }\n}\n\nPUT /77140157/_doc/1\n{\n  &quot;@timestamp&quot;: 1695197861930\n}\n\nGET 77140157/_search\n{\n  &quot;fields&quot;: [\n    &quot;formated_date&quot;\n  ], \n  &quot;runtime_mappings&quot;: {\n    &quot;formated_date&quot;: {\n      &quot;type&quot;: &quot;keyword&quot;,\n      &quot;script&quot;: {\n        &quot;source&quot;: &quot;&quot;&quot;\n        ZonedDateTime zonedDateTime = doc['@timestamp'].value;\n          def formatter = DateTimeFormatter.ofPattern('yyyy-MM-dd HH:mm:ss').withZone(ZoneOffset.UTC);\n        emit(zonedDateTime.format(formatter));\n          &quot;&quot;&quot;\n      }\n    }\n  }\n}\n</code></pre>\n<p>Giving you</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;took&quot;: 22,\n  &quot;timed_out&quot;: false,\n  &quot;_shards&quot;: {\n    &quot;total&quot;: 1,\n    &quot;successful&quot;: 1,\n    &quot;skipped&quot;: 0,\n    &quot;failed&quot;: 0\n  },\n  &quot;hits&quot;: {\n    &quot;total&quot;: {\n      &quot;value&quot;: 1,\n      &quot;relation&quot;: &quot;eq&quot;\n    },\n    &quot;max_score&quot;: 1,\n    &quot;hits&quot;: [\n      {\n        &quot;_index&quot;: &quot;77140157&quot;,\n        &quot;_id&quot;: &quot;1&quot;,\n        &quot;_score&quot;: 1,\n        &quot;_source&quot;: {\n          &quot;@timestamp&quot;: 1695197861930\n        },\n        &quot;fields&quot;: {\n          &quot;formated_date&quot;: [\n            &quot;2023-09-20 08:17:41&quot;\n          ]\n        }\n      }\n    ]\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":26466408,"reputation":31,"user_id":20107530,"display_name":"Inderjeet Chawla"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":88,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695199146,"creation_date":1695194472,"question_id":77140157,"body_markdown":"So I have quite lots of documents/indexes , in elastic search .\r\n\r\n They have a mapping for a date field , and its format is &quot;epoch_millis&quot; . \r\nI have been asked to change its format to some readable format , because when debugging and querying directly on kibaana es. \r\n\r\nThis epoch millis is not readable . so have been asked to use a readable format . \r\nI get it that i can use format &quot;yyyy-MM-dd&quot; something like this , but how to change in existing documents. \r\nFrom what i see i have few options :\r\nI can create new field with readable date format , (but again how to add it to existing indexes )\r\nI can Reindex the document , but again It may involve downtime . \r\n\r\nCan anyone sugggest me the best option to go around here? \r\nAnd for FYI , i dont have just one field , here , i have about 8 date type fields , whose format needs to be changed.\r\n\r\nCan I do something where , while querying on es , i simply get to see the readable format on date fields , so we don&#39;t have to change stuff in mapping at all. ??","title":"How to change date field format in elasticsearch in existing indexes as well","body":"<p>So I have quite lots of documents/indexes , in elastic search .</p>\n<p>They have a mapping for a date field , and its format is &quot;epoch_millis&quot; .\nI have been asked to change its format to some readable format , because when debugging and querying directly on kibaana es.</p>\n<p>This epoch millis is not readable . so have been asked to use a readable format .\nI get it that i can use format &quot;yyyy-MM-dd&quot; something like this , but how to change in existing documents.\nFrom what i see i have few options :\nI can create new field with readable date format , (but again how to add it to existing indexes )\nI can Reindex the document , but again It may involve downtime .</p>\n<p>Can anyone sugggest me the best option to go around here?\nAnd for FYI , i dont have just one field , here , i have about 8 date type fields , whose format needs to be changed.</p>\n<p>Can I do something where , while querying on es , i simply get to see the readable format on date fields , so we don't have to change stuff in mapping at all. ??</p>\n"},{"tags":["java","eclipse","eclipse-marketplace"],"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":0,"creation_date":1695198734,"post_id":77140613,"comment_id":135990698,"body_markdown":"Are you behind a proxy that intercepts https calls and injects its own certificate?","body":"Are you behind a proxy that intercepts https calls and injects its own certificate?"},{"owner":{"account_id":16419854,"reputation":13,"user_id":11861330,"display_name":"Runtime21"},"score":0,"creation_date":1695200362,"post_id":77140613,"comment_id":135991019,"body_markdown":"No i dont think so.","body":"No i dont think so."},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1695204462,"post_id":77140613,"comment_id":135991900,"body_markdown":"Please upgrade, since Eclipse 2022-12 is three releases behind. Your problem might caused by a too old Java with which you run your outdated Eclipse. Better use the current version of Eclipse which is currently 2023-09 with included Java.","body":"Please upgrade, since Eclipse 2022-12 is three releases behind. Your problem might caused by a too old Java with which you run your outdated Eclipse. Better use the current version of Eclipse which is currently 2023-09 with included Java."},{"owner":{"account_id":16419854,"reputation":13,"user_id":11861330,"display_name":"Runtime21"},"score":0,"creation_date":1695289863,"post_id":77140613,"comment_id":136005825,"body_markdown":"I installed the 2023 - 09 version and initially it was working good for me. But it started giving me the same error. I have installed the necessary software from the marketplace but now i get the same error if i open the marketplace again. So i am facing the same problem again. @howlger","body":"I installed the 2023 - 09 version and initially it was working good for me. But it started giving me the same error. I have installed the necessary software from the marketplace but now i get the same error if i open the marketplace again. So i am facing the same problem again. @howlger"},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1695290067,"post_id":77140613,"comment_id":136005868,"body_markdown":"Please go to the _Error Log_ view, select the error (do not open it, just select it), hit Ctrl+C and paste it into your question formatted as _Sample Code_.","body":"Please go to the <i>Error Log</i> view, select the error (do not open it, just select it), hit Ctrl+C and paste it into your question formatted as <i>Sample Code</i>."}],"owner":{"account_id":16419854,"reputation":13,"user_id":11861330,"display_name":"Runtime21"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695199040,"creation_date":1695198240,"question_id":77140613,"body_markdown":"Eclipse version that i have installed is: \r\nhttps://www.eclipse.org/downloads/packages/release/2022-12/r\r\n\r\nI want to access to the eclipse market place and I am getting the following error: \r\n\r\n[enter image description here](https://i.stack.imgur.com/N09yr.png)\r\n\r\n\r\n\r\n\r\n\r\nI have tried different solutions from the internet. \r\na. Have tried to change the network connections to Manual and selected the following options: \r\n\r\n[enter image description here](https://i.stack.imgur.com/rub1a.png)\r\nas suggested by other users. \r\n\r\nb. I have tried to add this in environment variables: \r\n_JAVA_OPTIONS -Djava.net.preferIPv4Stack=true\r\n\r\nc. I have tried to add the following in the eclipse.ini file:\r\n-Djava.net.preferIPv4Stack=true\r\n\r\nbut still my error is not getting resolved. \r\nPlease help me with the solution to this problem. ","title":"Eclipse Market Place Not Opening","body":"<p>Eclipse version that i have installed is:\n<a href=\"https://www.eclipse.org/downloads/packages/release/2022-12/r\" rel=\"nofollow noreferrer\">https://www.eclipse.org/downloads/packages/release/2022-12/r</a></p>\n<p>I want to access to the eclipse market place and I am getting the following error:</p>\n<p><a href=\"https://i.stack.imgur.com/N09yr.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>I have tried different solutions from the internet.\na. Have tried to change the network connections to Manual and selected the following options:</p>\n<p><a href=\"https://i.stack.imgur.com/rub1a.png\" rel=\"nofollow noreferrer\">enter image description here</a>\nas suggested by other users.</p>\n<p>b. I have tried to add this in environment variables:\n_JAVA_OPTIONS -Djava.net.preferIPv4Stack=true</p>\n<p>c. I have tried to add the following in the eclipse.ini file:\n-Djava.net.preferIPv4Stack=true</p>\n<p>but still my error is not getting resolved.\nPlease help me with the solution to this problem.</p>\n"},{"tags":["java","spring","spring-boot","elasticsearch","spring-data-jpa"],"owner":{"account_id":20929807,"reputation":161,"user_id":15376457,"display_name":"gcbox999"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695198692,"creation_date":1695198692,"question_id":77140655,"body_markdown":"I have a problem with my Spring-Boot 3.1.1 application + spring-boot-starter-data-elasticsearch version 3.1.1.\r\n\r\nThe index of my cluster is configured as follows:\r\n\r\n    {\r\n        &quot;mappings&quot;: {\r\n            &quot;properties&quot;: {\r\n                &quot;id&quot;: {\r\n                    &quot;type&quot;: &quot;long&quot;\r\n                },\r\n                &quot;brand&quot;: {\r\n                    &quot;type&quot;: &quot;keyword&quot;\r\n                },\r\n                &quot;tradename&quot;: {\r\n                    &quot;type&quot;: &quot;text&quot;\r\n                },\r\n                &quot;date&quot;: {\r\n                    &quot;type&quot;: &quot;date&quot;,\r\n                    &quot;format&quot;: &quot;strict_date_optional_time&quot;\r\n                },\r\n                &quot;color&quot;: {\r\n                    &quot;type&quot;: &quot;text&quot;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\nMy service:\r\n\r\n    @Service\r\n    public class VehicleService {\r\n    \r\n        @Autowired\r\n        private VehicleRepository vehicleRepository;\r\n    \r\n        public List&lt;BrandDTO&gt; getBrands() {\r\n            List&lt;Vehicle&gt; vehicleList = vehicleRepository.findDistinctBrandsOrdered();\r\n            System.out.println(vehicleList);\r\n    \r\n            List&lt;BrandDTO&gt; brandDTOList = vehicleList.stream()\r\n                    .map(Vehicle::getBrand)\r\n                    .distinct()\r\n                    .sorted()\r\n                    .map(brand -&gt; {\r\n                        BrandDTO brandDTO = new BrandDTO();\r\n                        brandDTO.setBrand(brand);\r\n                        return brandDTO;\r\n                    })\r\n                    .collect(Collectors.toList());\r\n    \r\n            return brandDTOList;\r\n        }\r\n    }\r\n\r\nAnd my repository:\r\n\r\n    import org.springframework.data.elasticsearch.annotations.Query;\r\n    import org.springframework.data.elasticsearch.repository.ElasticsearchRepository;\r\n    ...\r\n    \r\n    @Repository\r\n    public interface VehicleRepository extends ElasticsearchRepository&lt;Vehicle, Long&gt; {\r\n    \r\n        Vehicle findByCountryAndPlate(String country, String plate);\r\n    \r\n        @Query(&quot;{\\&quot;match_all\\&quot;: {}},\\&quot;size\\&quot;: 0,\\&quot;aggs\\&quot;: &quot; +\r\n                &quot;{\\&quot;distinct_brand\\&quot;: {\\&quot;terms\\&quot;: {\\&quot;field\\&quot;: &quot; +\r\n                &quot;\\&quot;brand\\&quot;,\\&quot;size\\&quot;: 10000,\\&quot;order\\&quot;: {\\&quot;_key\\&quot;: &quot; +\r\n                &quot;\\&quot;asc\\&quot;}}}}&quot;)\r\n        List&lt;Vehicle&gt; findDistinctBrandsOrdered();\r\n    \r\n    }\r\n\r\nIf my index has 50 documents, the results are returned perfectly. But if my index has several hundred documents, I get the following message:\r\n\r\nServlet.service() for servlet [dispatcherServlet] in context with path [] threw exception \r\n[Request processing failed: org.springframework.data.elasticsearch.UncategorizedElasticsearchException: [es/search] failed: [search_phase_execution_exception] all shards failed] with root cause\r\nco.elastic.clients.elasticsearch._types.ElasticsearchException: [es/search] failed: [search_phase_execution_exception] all shards failed\r\n\r\nIf I test my query on the same index with several hundred documents by sending:\r\n\r\n    {\r\n      &quot;query&quot;: {\r\n        &quot;match_all&quot;: {}\r\n      },\r\n      &quot;size&quot;: 0,\r\n      &quot;aggs&quot;: {\r\n        &quot;distinct_brand&quot;: {\r\n          &quot;terms&quot;: {\r\n            &quot;field&quot;: &quot;brand&quot;,\r\n            &quot;size&quot;: 10000,\r\n            &quot;order&quot;: {\r\n              &quot;_key&quot;: &quot;asc&quot;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\nI still get the results.\r\n\r\nWhy doesn&#39;t this work with Spring Boot and the same query? \r\n\r\nAnd more importantly, why does it work on Spring Boot just by reducing the number of documents in my index?\r\n\r\nI corrected the yellow to green status by modifying the index with:\r\nPUT /_all/_settings\r\n\r\n    {\r\n       &quot;index&quot;: {\r\n         &quot;number_of_replicas&quot;: 0\r\n       }\r\n    }\r\n\r\nBut that didn&#39;t change anything.","title":"How to return an aggregate on many elasticsearch documents with Spring Boot Data Elasicsearch?","body":"<p>I have a problem with my Spring-Boot 3.1.1 application + spring-boot-starter-data-elasticsearch version 3.1.1.</p>\n<p>The index of my cluster is configured as follows:</p>\n<pre><code>{\n    &quot;mappings&quot;: {\n        &quot;properties&quot;: {\n            &quot;id&quot;: {\n                &quot;type&quot;: &quot;long&quot;\n            },\n            &quot;brand&quot;: {\n                &quot;type&quot;: &quot;keyword&quot;\n            },\n            &quot;tradename&quot;: {\n                &quot;type&quot;: &quot;text&quot;\n            },\n            &quot;date&quot;: {\n                &quot;type&quot;: &quot;date&quot;,\n                &quot;format&quot;: &quot;strict_date_optional_time&quot;\n            },\n            &quot;color&quot;: {\n                &quot;type&quot;: &quot;text&quot;\n            }\n        }\n    }\n}\n</code></pre>\n<p>My service:</p>\n<pre><code>@Service\npublic class VehicleService {\n\n    @Autowired\n    private VehicleRepository vehicleRepository;\n\n    public List&lt;BrandDTO&gt; getBrands() {\n        List&lt;Vehicle&gt; vehicleList = vehicleRepository.findDistinctBrandsOrdered();\n        System.out.println(vehicleList);\n\n        List&lt;BrandDTO&gt; brandDTOList = vehicleList.stream()\n                .map(Vehicle::getBrand)\n                .distinct()\n                .sorted()\n                .map(brand -&gt; {\n                    BrandDTO brandDTO = new BrandDTO();\n                    brandDTO.setBrand(brand);\n                    return brandDTO;\n                })\n                .collect(Collectors.toList());\n\n        return brandDTOList;\n    }\n}\n</code></pre>\n<p>And my repository:</p>\n<pre><code>import org.springframework.data.elasticsearch.annotations.Query;\nimport org.springframework.data.elasticsearch.repository.ElasticsearchRepository;\n...\n\n@Repository\npublic interface VehicleRepository extends ElasticsearchRepository&lt;Vehicle, Long&gt; {\n\n    Vehicle findByCountryAndPlate(String country, String plate);\n\n    @Query(&quot;{\\&quot;match_all\\&quot;: {}},\\&quot;size\\&quot;: 0,\\&quot;aggs\\&quot;: &quot; +\n            &quot;{\\&quot;distinct_brand\\&quot;: {\\&quot;terms\\&quot;: {\\&quot;field\\&quot;: &quot; +\n            &quot;\\&quot;brand\\&quot;,\\&quot;size\\&quot;: 10000,\\&quot;order\\&quot;: {\\&quot;_key\\&quot;: &quot; +\n            &quot;\\&quot;asc\\&quot;}}}}&quot;)\n    List&lt;Vehicle&gt; findDistinctBrandsOrdered();\n\n}\n</code></pre>\n<p>If my index has 50 documents, the results are returned perfectly. But if my index has several hundred documents, I get the following message:</p>\n<p>Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception\n[Request processing failed: org.springframework.data.elasticsearch.UncategorizedElasticsearchException: [es/search] failed: [search_phase_execution_exception] all shards failed] with root cause\nco.elastic.clients.elasticsearch._types.ElasticsearchException: [es/search] failed: [search_phase_execution_exception] all shards failed</p>\n<p>If I test my query on the same index with several hundred documents by sending:</p>\n<pre><code>{\n  &quot;query&quot;: {\n    &quot;match_all&quot;: {}\n  },\n  &quot;size&quot;: 0,\n  &quot;aggs&quot;: {\n    &quot;distinct_brand&quot;: {\n      &quot;terms&quot;: {\n        &quot;field&quot;: &quot;brand&quot;,\n        &quot;size&quot;: 10000,\n        &quot;order&quot;: {\n          &quot;_key&quot;: &quot;asc&quot;\n        }\n      }\n    }\n  }\n}\n</code></pre>\n<p>I still get the results.</p>\n<p>Why doesn't this work with Spring Boot and the same query?</p>\n<p>And more importantly, why does it work on Spring Boot just by reducing the number of documents in my index?</p>\n<p>I corrected the yellow to green status by modifying the index with:\nPUT /_all/_settings</p>\n<pre><code>{\n   &quot;index&quot;: {\n     &quot;number_of_replicas&quot;: 0\n   }\n}\n</code></pre>\n<p>But that didn't change anything.</p>\n"},{"tags":["java","spring","hibernate","spring-boot","logging"],"comments":[{"owner":{"account_id":145555,"reputation":21469,"user_id":355438,"display_name":"Ilya Serbis"},"score":3,"creation_date":1612467088,"post_id":30118683,"comment_id":116783396,"body_markdown":"Follow instructions on https://www.baeldung.com/sql-logging-spring-boot","body":"Follow instructions on <a href=\"https://www.baeldung.com/sql-logging-spring-boot\" rel=\"nofollow noreferrer\">baeldung.com/sql-logging-spring-boot</a>"}],"answers":[{"tags":[],"owner":{"account_id":1223736,"reputation":6849,"user_id":1189806,"display_name":"Paul Woods"},"down_vote_count":1,"up_vote_count":656,"is_accepted":true,"score":655,"last_activity_date":1654006862,"creation_date":1436197170,"answer_id":31249985,"question_id":30118683,"body_markdown":"Try using this in your properties file:\r\n\r\n    logging.level.org.hibernate.SQL=DEBUG\r\n    logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE\r\n\r\n\r\n","title":"How can I log SQL statements in Spring Boot?","body":"<p>Try using this in your properties file:</p>\n<pre><code>logging.level.org.hibernate.SQL=DEBUG\nlogging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2445369,"reputation":794,"user_id":2132895,"display_name":"Javier Z."},"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1654007041,"creation_date":1458588561,"answer_id":36139921,"question_id":30118683,"body_markdown":"For the [SQL Server][1] driver (Microsoft SQL Server [JDBC][2] Driver), try using:\r\n\r\n    logging.level.com.microsoft.sqlserver.jdbc=debug\r\n\r\nin your application.properties file.\r\n\r\nMy personal preference is to set:\r\n\r\n    logging.level.com.microsoft.sqlserver.jdbc=info\r\n    logging.level.com.microsoft.sqlserver.jdbc.internals=debug\r\n\r\nYou can look at these links for reference:\r\n\r\n - *[Tracing driver operation][3]*\r\n - *[“How-to” Guides, 7. Logging][4]*\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Microsoft_SQL_Server\r\n  [2]: https://en.wikipedia.org/wiki/Java_Database_Connectivity\r\n  [3]: https://learn.microsoft.com/en-us/sql/connect/jdbc/tracing-driver-operation?redirectedfrom=MSDN&amp;view=sql-server-ver16\r\n  [4]: https://docs.spring.io/spring-boot/docs/current/reference/html/howto.html#howto.logging\r\n\r\n\r\n","title":"How can I log SQL statements in Spring Boot?","body":"<p>For the <a href=\"https://en.wikipedia.org/wiki/Microsoft_SQL_Server\" rel=\"nofollow noreferrer\">SQL Server</a> driver (Microsoft SQL Server <a href=\"https://en.wikipedia.org/wiki/Java_Database_Connectivity\" rel=\"nofollow noreferrer\">JDBC</a> Driver), try using:</p>\n<pre><code>logging.level.com.microsoft.sqlserver.jdbc=debug\n</code></pre>\n<p>in your application.properties file.</p>\n<p>My personal preference is to set:</p>\n<pre><code>logging.level.com.microsoft.sqlserver.jdbc=info\nlogging.level.com.microsoft.sqlserver.jdbc.internals=debug\n</code></pre>\n<p>You can look at these links for reference:</p>\n<ul>\n<li><em><a href=\"https://learn.microsoft.com/en-us/sql/connect/jdbc/tracing-driver-operation?redirectedfrom=MSDN&amp;view=sql-server-ver16\" rel=\"nofollow noreferrer\">Tracing driver operation</a></em></li>\n<li><em><a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/howto.html#howto.logging\" rel=\"nofollow noreferrer\">“How-to” Guides, 7. Logging</a></em></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":4153318,"reputation":19445,"user_id":3405171,"display_name":"v.ladynev"},"down_vote_count":1,"up_vote_count":309,"is_accepted":false,"score":308,"last_activity_date":1654007876,"creation_date":1464276032,"answer_id":37464963,"question_id":30118683,"body_markdown":"This works for standard output too:\r\n\r\n```lang-none\r\nspring.jpa.properties.hibernate.show_sql=true\r\nspring.jpa.properties.hibernate.use_sql_comments=true\r\nspring.jpa.properties.hibernate.format_sql=true\r\n```\r\n\r\nTo log values:\r\n\r\n```lang-none\r\nlogging.level.org.hibernate.type=trace\r\n```\r\n\r\nJust add this to `application.properties`.\r\n\r\n","title":"How can I log SQL statements in Spring Boot?","body":"<p>This works for standard output too:</p>\n<pre class=\"lang-none prettyprint-override\"><code>spring.jpa.properties.hibernate.show_sql=true\nspring.jpa.properties.hibernate.use_sql_comments=true\nspring.jpa.properties.hibernate.format_sql=true\n</code></pre>\n<p>To log values:</p>\n<pre class=\"lang-none prettyprint-override\"><code>logging.level.org.hibernate.type=trace\n</code></pre>\n<p>Just add this to <code>application.properties</code>.</p>\n"},{"tags":[],"owner":{"account_id":65983,"reputation":9310,"user_id":193850,"accept_rate":85,"display_name":"Michel"},"down_vote_count":0,"up_vote_count":159,"is_accepted":false,"score":159,"last_activity_date":1654007148,"creation_date":1484149077,"answer_id":41594913,"question_id":30118683,"body_markdown":"This works for me ([YAML][1]):\r\n\r\n```lang-none\r\nspring:\r\n  jpa:\r\n    properties:\r\n      hibernate:\r\n        show_sql: true\r\n        format_sql: true\r\nlogging:\r\n  level:\r\n    org:\r\n      hibernate:\r\n        type: trace\r\n```\r\n\r\n  [1]: https://en.wikipedia.org/wiki/YAML\r\n\r\n\r\n\r\n","title":"How can I log SQL statements in Spring Boot?","body":"<p>This works for me (<a href=\"https://en.wikipedia.org/wiki/YAML\" rel=\"noreferrer\">YAML</a>):</p>\n<pre class=\"lang-none prettyprint-override\"><code>spring:\n  jpa:\n    properties:\n      hibernate:\n        show_sql: true\n        format_sql: true\nlogging:\n  level:\n    org:\n      hibernate:\n        type: trace\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9916748,"reputation":404,"user_id":7341286,"display_name":"Edye Chan"},"down_vote_count":0,"up_vote_count":26,"is_accepted":false,"score":26,"last_activity_date":1654007234,"creation_date":1500273706,"answer_id":45137516,"question_id":30118683,"body_markdown":"If you have a `logback-spring.xml` file or something like that, add the following code to it:\r\n\r\n```lang-xml\r\n&lt;logger name=&quot;org.hibernate.SQL&quot; level=&quot;trace&quot; additivity=&quot;false&quot;&gt;\r\n    &lt;appender-ref ref=&quot;file&quot; /&gt;\r\n&lt;/logger&gt;\r\n```\r\n\r\nThat works for me.\r\n\r\nTo get bind variables as well:\r\n\r\n```lang-xml\r\n&lt;logger name=&quot;org.hibernate.type.descriptor.sql&quot; level=&quot;trace&quot;&gt;\r\n    &lt;appender-ref ref=&quot;file&quot; /&gt;\r\n&lt;/logger&gt;\r\n```\r\n\r\n","title":"How can I log SQL statements in Spring Boot?","body":"<p>If you have a <code>logback-spring.xml</code> file or something like that, add the following code to it:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;logger name=&quot;org.hibernate.SQL&quot; level=&quot;trace&quot; additivity=&quot;false&quot;&gt;\n    &lt;appender-ref ref=&quot;file&quot; /&gt;\n&lt;/logger&gt;\n</code></pre>\n<p>That works for me.</p>\n<p>To get bind variables as well:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;logger name=&quot;org.hibernate.type.descriptor.sql&quot; level=&quot;trace&quot;&gt;\n    &lt;appender-ref ref=&quot;file&quot; /&gt;\n&lt;/logger&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6883244,"reputation":2541,"user_id":5289288,"display_name":"Max Farsikov"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1654007264,"creation_date":1511297666,"answer_id":47422537,"question_id":30118683,"body_markdown":"According to [documentation][1] it is:\r\n\r\n```lang-none\r\nspring.jpa.show-sql=true # Enable logging of SQL statements.\r\n```\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/reference/html/common-application-properties.html","title":"How can I log SQL statements in Spring Boot?","body":"<p>According to <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/common-application-properties.html\" rel=\"nofollow noreferrer\">documentation</a> it is:</p>\n<pre class=\"lang-none prettyprint-override\"><code>spring.jpa.show-sql=true # Enable logging of SQL statements.\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4060161,"reputation":1370,"user_id":3336921,"display_name":"rahulnikhare"},"down_vote_count":0,"up_vote_count":29,"is_accepted":false,"score":29,"last_activity_date":1654007297,"creation_date":1513846214,"answer_id":47921228,"question_id":30118683,"body_markdown":"Please use:\r\n    \r\n```lang-none\r\nlogging.level.org.hibernate.SQL=DEBUG\r\nlogging.level.org.hibernate.type=TRACE\r\nspring.jpa.show-sql=true\r\n```\r\n\r\n","title":"How can I log SQL statements in Spring Boot?","body":"<p>Please use:</p>\n<pre class=\"lang-none prettyprint-override\"><code>logging.level.org.hibernate.SQL=DEBUG\nlogging.level.org.hibernate.type=TRACE\nspring.jpa.show-sql=true\n</code></pre>\n"},{"tags":[],"owner":{"account_id":145672,"reputation":6289,"user_id":355634,"accept_rate":50,"display_name":"Udara S.S Liyanage"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1654007449,"creation_date":1533622624,"answer_id":51720009,"question_id":30118683,"body_markdown":"If you want to view the actual parameters used to query you can use\r\n\r\n```lang-none\r\nlogging.level.org.hibernate.SQL=DEBUG\r\nlogging.level.org.hibernate.type.descriptor.sql=TRACE\r\n```\r\n\r\nThen notice that actual parameter value is shown as `binding parameter`...:\r\n \r\n   ```lang-none\r\n   2018-08-07 14:14:36.079 DEBUG 44804 --- [           main] org.hibernate.SQL                        : select employee0_.id as id1_0_, employee0_.department as departme2_0_, employee0_.joining_date as joining_3_0_, employee0_.name as name4_0_ from employee employee0_ where employee0_.joining_date=?\r\n    2018-08-07 14:14:36.079 TRACE 44804 --- [           main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [TIMESTAMP] - [Tue Aug 07 00:00:00 SGT 2018]\r\n   ```\r\n\r\n\r\n","title":"How can I log SQL statements in Spring Boot?","body":"<p>If you want to view the actual parameters used to query you can use</p>\n<pre class=\"lang-none prettyprint-override\"><code>logging.level.org.hibernate.SQL=DEBUG\nlogging.level.org.hibernate.type.descriptor.sql=TRACE\n</code></pre>\n<p>Then notice that actual parameter value is shown as <code>binding parameter</code>...:</p>\n<pre class=\"lang-none prettyprint-override\"><code>    2018-08-07 14:14:36.079 DEBUG 44804 --- [           main] org.hibernate.SQL                        : select employee0_.id as id1_0_, employee0_.department as departme2_0_, employee0_.joining_date as joining_3_0_, employee0_.name as name4_0_ from employee employee0_ where employee0_.joining_date=?\n     2018-08-07 14:14:36.079 TRACE 44804 --- [           main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [TIMESTAMP] - [Tue Aug 07 00:00:00 SGT 2018]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6833305,"reputation":3084,"user_id":5256337,"display_name":"Lova Chittumuri"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1654008423,"creation_date":1542956325,"answer_id":53441972,"question_id":30118683,"body_markdown":"We can use any one of these in the *application.properties* file:\r\n\r\n```lang-none\r\nspring.jpa.show-sql=true\r\n```\r\n\r\nExample:\r\n\r\n```lang-none\r\n//Hibernate: select country0_.id as id1_0_, country0_.name as name2_0_ from country country0_\r\n```\r\n\r\nor\r\n\r\n```lang-none\r\nlogging.level.org.hibernate.SQL=debug\r\n```\r\n\r\nExample:\r\n\r\n```lang-none\r\n2018-11-23 12:28:02.990 DEBUG 12972 --- [nio-8086-exec-2] org.hibernate.SQL   : select country0_.id as id1_0_, country0_.name as name2_0_ from country country0_\r\n```\r\n\r\n\r\n\r\n\r\n","title":"How can I log SQL statements in Spring Boot?","body":"<p>We can use any one of these in the <em>application.properties</em> file:</p>\n<pre class=\"lang-none prettyprint-override\"><code>spring.jpa.show-sql=true\n</code></pre>\n<p>Example:</p>\n<pre class=\"lang-none prettyprint-override\"><code>//Hibernate: select country0_.id as id1_0_, country0_.name as name2_0_ from country country0_\n</code></pre>\n<p>or</p>\n<pre class=\"lang-none prettyprint-override\"><code>logging.level.org.hibernate.SQL=debug\n</code></pre>\n<p>Example:</p>\n<pre class=\"lang-none prettyprint-override\"><code>2018-11-23 12:28:02.990 DEBUG 12972 --- [nio-8086-exec-2] org.hibernate.SQL   : select country0_.id as id1_0_, country0_.name as name2_0_ from country country0_\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3334749,"reputation":169,"user_id":2802664,"display_name":"Robert.Li"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1552426794,"creation_date":1552426794,"answer_id":55131043,"question_id":30118683,"body_markdown":"Translated accepted answer to YAML works for me\r\n\r\n    logging:\r\n      level:\r\n        org:\r\n          hibernate:\r\n            SQL:\r\n              TRACE\r\n            type:\r\n              descriptor:\r\n                sql:\r\n                  BasicBinder:\r\n                    TRACE","title":"How can I log SQL statements in Spring Boot?","body":"<p>Translated accepted answer to YAML works for me</p>\n\n<pre><code>logging:\n  level:\n    org:\n      hibernate:\n        SQL:\n          TRACE\n        type:\n          descriptor:\n            sql:\n              BasicBinder:\n                TRACE\n</code></pre>\n"},{"tags":[],"owner":{"account_id":874712,"reputation":19505,"user_id":924597,"accept_rate":79,"display_name":"Shorn"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1567996755,"creation_date":1567996755,"answer_id":57847245,"question_id":30118683,"body_markdown":"If you&#39;re having trouble with this setting and it seems to work sometimes and not other times - consider if the times where it doesn&#39;t work are during unit tests.\r\n\r\nMany people declare custom test-time properties via the `@TestPropertySources` annotation declared somewhere in your test inheritance hierarchy.  This will override whatever you put in your `application.properties` or other production properties settings so those values you&#39;re setting are effectively being ignored at test-time.","title":"How can I log SQL statements in Spring Boot?","body":"<p>If you're having trouble with this setting and it seems to work sometimes and not other times - consider if the times where it doesn't work are during unit tests.</p>\n\n<p>Many people declare custom test-time properties via the <code>@TestPropertySources</code> annotation declared somewhere in your test inheritance hierarchy.  This will override whatever you put in your <code>application.properties</code> or other production properties settings so those values you're setting are effectively being ignored at test-time.</p>\n"},{"tags":[],"owner":{"account_id":2635164,"reputation":1119,"user_id":2280067,"display_name":"SJX"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1568642449,"creation_date":1568642449,"answer_id":57958501,"question_id":30118683,"body_markdown":"Putting `spring.jpa.properties.hibernate.show_sql=true` in application.properties didn&#39;t help always.\r\n\r\nYou can try to add `properties.put(&quot;hibernate.show_sql&quot;, &quot;true&quot;);` to the properties of the database configuration.\r\n\r\n    public class DbConfig {\r\n    \r\n        @Primary\r\n        @Bean(name = &quot;entityManagerFactory&quot;)\r\n        public LocalContainerEntityManagerFactoryBean\r\n        entityManagerFactory(\r\n                EntityManagerFactoryBuilder builder,\r\n                @Qualifier(&quot;dataSource&quot;) DataSource dataSource\r\n        ) {\r\n            Map&lt;String, Object&gt; properties = new HashMap();\r\n            properties.put(&quot;hibernate.hbm2ddl.auto&quot;, &quot;validate&quot;);\r\n            properties.put(&quot;hibernate.show_sql&quot;, &quot;true&quot;);\r\n    \r\n            return builder\r\n                    .dataSource(dataSource)\r\n                    .packages(&quot;com.test.dbsource.domain&quot;)\r\n                    .persistenceUnit(&quot;dbsource&quot;).properties(properties)\r\n                    .build();\r\n        }\r\n\r\n","title":"How can I log SQL statements in Spring Boot?","body":"<p>Putting <code>spring.jpa.properties.hibernate.show_sql=true</code> in application.properties didn't help always.</p>\n\n<p>You can try to add <code>properties.put(\"hibernate.show_sql\", \"true\");</code> to the properties of the database configuration.</p>\n\n<pre><code>public class DbConfig {\n\n    @Primary\n    @Bean(name = \"entityManagerFactory\")\n    public LocalContainerEntityManagerFactoryBean\n    entityManagerFactory(\n            EntityManagerFactoryBuilder builder,\n            @Qualifier(\"dataSource\") DataSource dataSource\n    ) {\n        Map&lt;String, Object&gt; properties = new HashMap();\n        properties.put(\"hibernate.hbm2ddl.auto\", \"validate\");\n        properties.put(\"hibernate.show_sql\", \"true\");\n\n        return builder\n                .dataSource(dataSource)\n                .packages(\"com.test.dbsource.domain\")\n                .persistenceUnit(\"dbsource\").properties(properties)\n                .build();\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3731659,"reputation":3183,"user_id":3103802,"accept_rate":73,"display_name":"Saveendra Ekanayake"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1655588435,"creation_date":1571812106,"answer_id":58516696,"question_id":30118683,"body_markdown":"# **Log in to standard output**\r\n\r\nAdd to `application.properties`\r\n\r\n    ### To enable\r\n    spring.jpa.show-sql=true\r\n\r\n    ### To make the printing SQL beautify\r\n    spring.jpa.properties.hibernate.format_sql=true\r\n\r\nThis is the simplest way to print the SQL queries, though it doesn&#39;t log the parameters of prepared statements.\r\n\r\nAnd it’s not recommended since it’s not such as optimized logging framework.\r\n\r\n### Using a logging framework\r\n\r\nAdd to `application.properties`\r\n\r\n    ### Logs the SQL queries\r\n    logging.level.org.hibernate.SQL=DEBUG\r\n    ### Logs the prepared statement parameters\r\n    logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE\r\n\r\n    ### To make the printing SQL beautify\r\n    spring.jpa.properties.hibernate.format_sql=true\r\n\r\nBy specifying the above properties, log entries will be sent to the configured log appender, such as log-back or [Log4j][1].\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Log4j\r\n\r\n\r\n\r\n","title":"How can I log SQL statements in Spring Boot?","body":"<h1><strong>Log in to standard output</strong></h1>\n<p>Add to <code>application.properties</code></p>\n<pre><code>### To enable\nspring.jpa.show-sql=true\n\n### To make the printing SQL beautify\nspring.jpa.properties.hibernate.format_sql=true\n</code></pre>\n<p>This is the simplest way to print the SQL queries, though it doesn't log the parameters of prepared statements.</p>\n<p>And it’s not recommended since it’s not such as optimized logging framework.</p>\n<h3>Using a logging framework</h3>\n<p>Add to <code>application.properties</code></p>\n<pre><code>### Logs the SQL queries\nlogging.level.org.hibernate.SQL=DEBUG\n### Logs the prepared statement parameters\nlogging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE\n\n### To make the printing SQL beautify\nspring.jpa.properties.hibernate.format_sql=true\n</code></pre>\n<p>By specifying the above properties, log entries will be sent to the configured log appender, such as log-back or <a href=\"https://en.wikipedia.org/wiki/Log4j\" rel=\"nofollow noreferrer\">Log4j</a>.</p>\n"},{"tags":[],"owner":{"account_id":1012936,"reputation":145168,"user_id":1025118,"accept_rate":100,"display_name":"Vlad Mihalcea"},"down_vote_count":0,"up_vote_count":149,"is_accepted":false,"score":149,"last_activity_date":1655592029,"creation_date":1582057998,"answer_id":60289026,"question_id":30118683,"body_markdown":"Settings to avoid\r\n-----------------\r\n\r\nYou should not use this setting:\r\n\r\n```lang-none\r\nspring.jpa.show-sql=true\r\n```\r\n\r\nThe problem with `show-sql` is that the SQL statements are printed in the console, so there is no way to filter them, as you&#39;d normally do with a Logging framework.\r\n\r\nUsing Hibernate logging\r\n-----------------------\r\n\r\nIn your log configuration file, if you add the following logger:\r\n\r\n```lang-xml\r\n&lt;logger name=&quot;org.hibernate.SQL&quot; level=&quot;debug&quot;/&gt;\r\n```\r\n\r\nThen, Hibernate will print the SQL statements when the JDBC `PreparedStatement` is created. That&#39;s why the statement will be logged using parameter placeholders:\r\n\r\n```lang-sql\r\nINSERT INTO post (title, version, id) VALUES (?, ?, ?)\r\n```\r\n\r\nIf you want to log the bind parameter values, just add the following logger as well:\r\n\r\n```lang-xml\r\n&lt;logger name=&quot;org.hibernate.type.descriptor.sql.BasicBinder&quot; level=&quot;trace&quot;/&gt;\r\n```\r\n\r\nOnce you set the `BasicBinder` logger, you will see that the bind parameter values are logged as well:\r\n\r\n```lang-none\r\nDEBUG [main]: o.h.SQL - insert into post (title, version, id) values (?, ?, ?)\r\nTRACE [main]: o.h.t.d.s.BasicBinder - binding parameter [1] as [VARCHAR] - [High-Performance Java Persistence, part 1]\r\nTRACE [main]: o.h.t.d.s.BasicBinder - binding parameter [2] as [INTEGER] - [0]\r\nTRACE [main]: o.h.t.d.s.BasicBinder - binding parameter [3] as [BIGINT] - [1]\r\n```\r\n\r\nUsing datasource-proxy\r\n----------------------\r\n\r\nThe [datasource-proxy][1] OSS framework allows you to proxy the actual JDBC `DataSource`, as illustrated by the following diagram:\r\n\r\n[![DataSource-Proxy][2]](https://vladmihalcea.com/the-best-way-to-log-jdbc-statements/)\r\n\r\nYou can define the `dataSource` bean that will be used by Hibernate as follows:\r\n\r\n    @Bean\r\n    public DataSource dataSource(DataSource actualDataSource) {\r\n        SLF4JQueryLoggingListener loggingListener = new SLF4JQueryLoggingListener();\r\n        loggingListener.setQueryLogEntryCreator(new InlineQueryLogEntryCreator());\r\n        return ProxyDataSourceBuilder\r\n            .create(actualDataSource)\r\n            .name(DATA_SOURCE_PROXY_NAME)\r\n            .listener(loggingListener)\r\n            .build();\r\n    }\r\n\r\nNotice that the `actualDataSource` must be the `DataSource` defined by the [connection pool][2] you are using in your application.\r\n\r\nNext, you need to set the `net.ttddyy.dsproxy.listener` log level to `debug` in your logging framework configuration file. For instance, if you&#39;re using Logback, you can add the following logger:\r\n\r\n```lang-xml\r\n&lt;logger name=&quot;net.ttddyy.dsproxy.listener&quot; level=&quot;debug&quot;/&gt;\r\n```\r\n\r\nOnce you enable `datasource-proxy`, the SQL statement are going to be logged as follows:\r\n\r\n```lang-none\r\nName:DATA_SOURCE_PROXY, Time:6, Success:True,\r\nType:Prepared, Batch:True, QuerySize:1, BatchSize:3,\r\nQuery:[&quot;insert into post (title, version, id) values (?, ?, ?)&quot;],\r\nParams:[(Post no. 0, 0, 0), (Post no. 1, 0, 1), (Post no. 2, 0, 2)]\r\n```\r\n\r\n  [1]: https://github.com/ttddyy/datasource-proxy\r\n  [2]: https://i.stack.imgur.com/c67Gb.png\r\n\r\n","title":"How can I log SQL statements in Spring Boot?","body":"<h2>Settings to avoid</h2>\n<p>You should not use this setting:</p>\n<pre class=\"lang-none prettyprint-override\"><code>spring.jpa.show-sql=true\n</code></pre>\n<p>The problem with <code>show-sql</code> is that the SQL statements are printed in the console, so there is no way to filter them, as you'd normally do with a Logging framework.</p>\n<h2>Using Hibernate logging</h2>\n<p>In your log configuration file, if you add the following logger:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;logger name=&quot;org.hibernate.SQL&quot; level=&quot;debug&quot;/&gt;\n</code></pre>\n<p>Then, Hibernate will print the SQL statements when the JDBC <code>PreparedStatement</code> is created. That's why the statement will be logged using parameter placeholders:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>INSERT INTO post (title, version, id) VALUES (?, ?, ?)\n</code></pre>\n<p>If you want to log the bind parameter values, just add the following logger as well:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;logger name=&quot;org.hibernate.type.descriptor.sql.BasicBinder&quot; level=&quot;trace&quot;/&gt;\n</code></pre>\n<p>Once you set the <code>BasicBinder</code> logger, you will see that the bind parameter values are logged as well:</p>\n<pre class=\"lang-none prettyprint-override\"><code>DEBUG [main]: o.h.SQL - insert into post (title, version, id) values (?, ?, ?)\nTRACE [main]: o.h.t.d.s.BasicBinder - binding parameter [1] as [VARCHAR] - [High-Performance Java Persistence, part 1]\nTRACE [main]: o.h.t.d.s.BasicBinder - binding parameter [2] as [INTEGER] - [0]\nTRACE [main]: o.h.t.d.s.BasicBinder - binding parameter [3] as [BIGINT] - [1]\n</code></pre>\n<h2>Using datasource-proxy</h2>\n<p>The <a href=\"https://github.com/ttddyy/datasource-proxy\" rel=\"noreferrer\">datasource-proxy</a> OSS framework allows you to proxy the actual JDBC <code>DataSource</code>, as illustrated by the following diagram:</p>\n<p><a href=\"https://vladmihalcea.com/the-best-way-to-log-jdbc-statements/\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/c67Gb.png\" alt=\"DataSource-Proxy\" /></a></p>\n<p>You can define the <code>dataSource</code> bean that will be used by Hibernate as follows:</p>\n<pre><code>@Bean\npublic DataSource dataSource(DataSource actualDataSource) {\n    SLF4JQueryLoggingListener loggingListener = new SLF4JQueryLoggingListener();\n    loggingListener.setQueryLogEntryCreator(new InlineQueryLogEntryCreator());\n    return ProxyDataSourceBuilder\n        .create(actualDataSource)\n        .name(DATA_SOURCE_PROXY_NAME)\n        .listener(loggingListener)\n        .build();\n}\n</code></pre>\n<p>Notice that the <code>actualDataSource</code> must be the <code>DataSource</code> defined by the <a href=\"https://i.stack.imgur.com/c67Gb.png\" rel=\"noreferrer\">connection pool</a> you are using in your application.</p>\n<p>Next, you need to set the <code>net.ttddyy.dsproxy.listener</code> log level to <code>debug</code> in your logging framework configuration file. For instance, if you're using Logback, you can add the following logger:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;logger name=&quot;net.ttddyy.dsproxy.listener&quot; level=&quot;debug&quot;/&gt;\n</code></pre>\n<p>Once you enable <code>datasource-proxy</code>, the SQL statement are going to be logged as follows:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Name:DATA_SOURCE_PROXY, Time:6, Success:True,\nType:Prepared, Batch:True, QuerySize:1, BatchSize:3,\nQuery:[&quot;insert into post (title, version, id) values (?, ?, ?)&quot;],\nParams:[(Post no. 0, 0, 0), (Post no. 1, 0, 1), (Post no. 2, 0, 2)]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17789506,"reputation":369,"user_id":12918869,"display_name":"noob"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1655592286,"creation_date":1592223470,"answer_id":62388082,"question_id":30118683,"body_markdown":"You just need to set `spring.jpa.show-sql=true` in *application.properties*.\r\n\r\nFor example, you may refer to *[ConfigServerRepo/application.yaml][1]*.\r\n\r\n  [1]: https://github.com/007anwar/ConfigServerRepo/blob/master/application.yaml\r\n\r\n\r\n","title":"How can I log SQL statements in Spring Boot?","body":"<p>You just need to set <code>spring.jpa.show-sql=true</code> in <em>application.properties</em>.</p>\n<p>For example, you may refer to <em><a href=\"https://github.com/007anwar/ConfigServerRepo/blob/master/application.yaml\" rel=\"nofollow noreferrer\">ConfigServerRepo/application.yaml</a></em>.</p>\n"},{"tags":[],"owner":{"account_id":9608243,"reputation":87,"user_id":7133567,"display_name":"BRAIEK AYEMN"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1655592838,"creation_date":1596459476,"answer_id":63229899,"question_id":30118683,"body_markdown":"Use this code in the file *application.properties*:\r\n\r\n```lang-none\r\n# Enable logging for configuration troubleshooting\r\nlogging.level.org.hibernate.SQL=DEBUG\r\nlogging.level.com.zaxxer.hikari.HikariConfig=DEBUG\r\nlogging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE\r\n```\r\n","title":"How can I log SQL statements in Spring Boot?","body":"<p>Use this code in the file <em>application.properties</em>:</p>\n<pre class=\"lang-none prettyprint-override\"><code># Enable logging for configuration troubleshooting\nlogging.level.org.hibernate.SQL=DEBUG\nlogging.level.com.zaxxer.hikari.HikariConfig=DEBUG\nlogging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10749177,"reputation":602,"user_id":7909340,"display_name":"shenyu1997"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1655592511,"creation_date":1630388423,"answer_id":68993405,"question_id":30118683,"body_markdown":"In my YAML file:\r\n\r\n    logging:\r\n      level:\r\n        org.hibernate.SQL: DEBUG\r\n        org.hibernate.type.descriptor.sql: TRACE\r\n\r\nSpring Boot version: 2.3.5.RELEASE\r\n\r\n\r\n","title":"How can I log SQL statements in Spring Boot?","body":"<p>In my YAML file:</p>\n<pre><code>logging:\n  level:\n    org.hibernate.SQL: DEBUG\n    org.hibernate.type.descriptor.sql: TRACE\n</code></pre>\n<p>Spring Boot version: 2.3.5.RELEASE</p>\n"},{"tags":[],"owner":{"account_id":17623291,"reputation":19,"user_id":12788765,"display_name":"Souradeep Banerjee"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1655592999,"creation_date":1633678016,"answer_id":69492066,"question_id":30118683,"body_markdown":"The basic way is to add the following lines in your `application.properties`. This will enable Spring Boot to log all your SQL queries that get executed:\r\n\r\n```lang-none\r\nspring.jpa.show-sql=true\r\nspring.jpa.properties.hibernate.format_sql=true\r\n```\r\n\r\nThe second line is used to beautify the SQL statements.\r\n\r\nIf you want to use loggers, you can use the following lines:\r\n\r\n    logging.level.org.hibernate.SQL=DEBUG\r\n    logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE\r\n\r\nThe second line is used to print all the parameters that get bound with your queries.\r\n\r\n\r\n\r\n\r\n","title":"How can I log SQL statements in Spring Boot?","body":"<p>The basic way is to add the following lines in your <code>application.properties</code>. This will enable Spring Boot to log all your SQL queries that get executed:</p>\n<pre class=\"lang-none prettyprint-override\"><code>spring.jpa.show-sql=true\nspring.jpa.properties.hibernate.format_sql=true\n</code></pre>\n<p>The second line is used to beautify the SQL statements.</p>\n<p>If you want to use loggers, you can use the following lines:</p>\n<pre><code>logging.level.org.hibernate.SQL=DEBUG\nlogging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE\n</code></pre>\n<p>The second line is used to print all the parameters that get bound with your queries.</p>\n"},{"tags":[],"owner":{"account_id":3281258,"reputation":1,"user_id":2942841,"display_name":"AnkitSingh2099"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1655592666,"creation_date":1637259182,"answer_id":70024761,"question_id":30118683,"body_markdown":"Add these in the properties. Quoting [Hibernate Show SQL](https://springframework.guru/hibernate-show-sql/):\r\n\r\n```\r\n# Show SQL statement\r\nlogging.level.org.hibernate.SQL=debug\r\n\r\n# Show SQL values\r\nlogging.level.org.hibernate.type.descriptor.sql=trace\r\n```\r\n","title":"How can I log SQL statements in Spring Boot?","body":"<p>Add these in the properties. Quoting <a href=\"https://springframework.guru/hibernate-show-sql/\" rel=\"nofollow noreferrer\">Hibernate Show SQL</a>:</p>\n<pre><code># Show SQL statement\nlogging.level.org.hibernate.SQL=debug\n\n# Show SQL values\nlogging.level.org.hibernate.type.descriptor.sql=trace\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23595282,"reputation":151,"user_id":17632474,"display_name":"Mohit Kaushal"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1639030569,"creation_date":1639027771,"answer_id":70285117,"question_id":30118683,"body_markdown":"You can simply add the below lines in application.properties for stdout SQL queries:\r\n```\r\nspring.jpa.properties.hibernate.show_sql=true\r\n```","title":"How can I log SQL statements in Spring Boot?","body":"<p>You can simply add the below lines in application.properties for stdout SQL queries:</p>\n<pre><code>spring.jpa.properties.hibernate.show_sql=true\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2714004,"reputation":1472,"user_id":2341765,"accept_rate":20,"display_name":"Shafiul"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1655592813,"creation_date":1643393716,"answer_id":70898399,"question_id":30118683,"body_markdown":"If you are using JdbcTemplate, add the below in `application.properties` file to log SQL and parameter values.\r\n\r\n    logging.level.org.springframework.jdbc.core.JdbcTemplate=DEBUG\r\n    logging.level.org.springframework.jdbc.core.StatementCreatorUtils=TRACE\r\n\r\n\r\n\r\n","title":"How can I log SQL statements in Spring Boot?","body":"<p>If you are using JdbcTemplate, add the below in <code>application.properties</code> file to log SQL and parameter values.</p>\n<pre><code>logging.level.org.springframework.jdbc.core.JdbcTemplate=DEBUG\nlogging.level.org.springframework.jdbc.core.StatementCreatorUtils=TRACE\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23595282,"reputation":151,"user_id":17632474,"display_name":"Mohit Kaushal"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1656487636,"creation_date":1656487636,"answer_id":72797383,"question_id":30118683,"body_markdown":"We can log SQL statements using two approaches in Spring boot:\r\n1: using logger\r\n2: standard approach\r\n\r\n----------\r\n**For logger**\r\nYou should add this line to application.properties file:\r\n```\r\nlogging.level.org.hibernate.SQL=DEBUG\r\n```\r\n----------\r\n**Standard Approach**\r\nYou should add these lines in application.properties file:\r\n```\r\nspring.jpa.show-sql=true\r\nspring.jpa.properties.hibernate.format_sql=true\r\n```","title":"How can I log SQL statements in Spring Boot?","body":"<p>We can log SQL statements using two approaches in Spring boot:\n1: using logger\n2: standard approach</p>\n<hr />\n<p><strong>For logger</strong>\nYou should add this line to application.properties file:</p>\n<pre><code>logging.level.org.hibernate.SQL=DEBUG\n</code></pre>\n<hr />\n<p><strong>Standard Approach</strong>\nYou should add these lines in application.properties file:</p>\n<pre><code>spring.jpa.show-sql=true\nspring.jpa.properties.hibernate.format_sql=true\n</code></pre>\n"},{"tags":[],"owner":{"account_id":208183,"reputation":7392,"user_id":458509,"accept_rate":71,"display_name":"storm_buster"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1668175530,"creation_date":1668175530,"answer_id":74403667,"question_id":30118683,"body_markdown":"For hibernate 6:\r\nit is:\r\n\r\n    spring.jpa.properties.hibernate.show_sql=true\r\n    logging.level.org.hibernate.orm.jdbc.bind = trace","title":"How can I log SQL statements in Spring Boot?","body":"<p>For hibernate 6:\nit is:</p>\n<pre><code>spring.jpa.properties.hibernate.show_sql=true\nlogging.level.org.hibernate.orm.jdbc.bind = trace\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15153969,"reputation":394,"user_id":10935450,"display_name":"Muhammed_G"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1679581670,"creation_date":1679581670,"answer_id":75824296,"question_id":30118683,"body_markdown":"I was able to solve that problem by adding these variables lines in **application.properties** file:\r\n\r\n    logging.level.org.hibernate.SQL=DEBUG\r\n    logging.level.org.hibernate.orm.jdbc.bind=TRACE\r\n    spring.jpa.properties.hibernate.format_sql=true\r\n\r\nThat made me able to see debugging SQL queries (in formatted shape) and the passed variables (parameters) values.\r\n\r\nAnd my log output was like this: \r\n\r\n    17:21:45.965 [http-nio-7001-exec-5] DEBUG org.hibernate.SQL - \r\n        select\r\n            a1_0.action_id,\r\n            a1_0.action_nr,\r\n            a1_0.app_version\r\n        from\r\n            action a1_0 \r\n        where\r\n            a1_0.guid=? limit ?\r\n    17:21:45.965 [http-nio-7001-exec-5] TRACE org.hibernate.orm.jdbc.bind - binding parameter [1] as [VARCHAR] - [60154cd5-3f51-4c45-9c65-2af724c5c693]\r\n    17:21:45.965 [http-nio-7001-exec-5] TRACE org.hibernate.orm.jdbc.bind - binding parameter [2] as [INTEGER] - [1]","title":"How can I log SQL statements in Spring Boot?","body":"<p>I was able to solve that problem by adding these variables lines in <strong>application.properties</strong> file:</p>\n<pre><code>logging.level.org.hibernate.SQL=DEBUG\nlogging.level.org.hibernate.orm.jdbc.bind=TRACE\nspring.jpa.properties.hibernate.format_sql=true\n</code></pre>\n<p>That made me able to see debugging SQL queries (in formatted shape) and the passed variables (parameters) values.</p>\n<p>And my log output was like this:</p>\n<pre><code>17:21:45.965 [http-nio-7001-exec-5] DEBUG org.hibernate.SQL - \n    select\n        a1_0.action_id,\n        a1_0.action_nr,\n        a1_0.app_version\n    from\n        action a1_0 \n    where\n        a1_0.guid=? limit ?\n17:21:45.965 [http-nio-7001-exec-5] TRACE org.hibernate.orm.jdbc.bind - binding parameter [1] as [VARCHAR] - [60154cd5-3f51-4c45-9c65-2af724c5c693]\n17:21:45.965 [http-nio-7001-exec-5] TRACE org.hibernate.orm.jdbc.bind - binding parameter [2] as [INTEGER] - [1]\n</code></pre>\n"}],"owner":{"account_id":23734,"reputation":20692,"user_id":59704,"accept_rate":92,"display_name":"Oleg Pavliv"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":645196,"favorite_count":0,"down_vote_count":2,"up_vote_count":527,"accepted_answer_id":31249985,"answer_count":24,"score":525,"last_activity_date":1695197996,"creation_date":1431071748,"question_id":30118683,"body_markdown":"I want to log SQL statements to a file.\r\n\r\nI have the following properties in `application.properties`:\r\n\r\n```lang-none\r\nspring.datasource.url=...\r\nspring.datasource.username=user\r\nspring.datasource.password=1234\r\nspring.datasource.driver-class-name=net.sourceforge.jtds.jdbc.Driver\r\n\r\nspring.jpa.show-sql=true\r\nspring.jpa.properties.hibernate.format_sql=true\r\n\r\nsecurity.ignored=true\r\nsecurity.basic.enabled=false\r\n\r\nlogging.level.org.springframework.web=INFO\r\nlogging.level.org.hibernate=INFO\r\nlogging.file=c:/temp/my-log/app.log\r\n```\r\n\r\nWhen I run my application,\r\n\r\n```lang-none\r\ncmd&gt; mvn spring-boot:run\r\n```\r\n\r\nI can see SQL statements in the console, but they don&#39;t appear in *app.log*. The file contains only basic logs from Spring.\r\n\r\nWhat should I do to see SQL statements in the log file?\r\n","title":"How can I log SQL statements in Spring Boot?","body":"<p>I want to log SQL statements to a file.</p>\n<p>I have the following properties in <code>application.properties</code>:</p>\n<pre class=\"lang-none prettyprint-override\"><code>spring.datasource.url=...\nspring.datasource.username=user\nspring.datasource.password=1234\nspring.datasource.driver-class-name=net.sourceforge.jtds.jdbc.Driver\n\nspring.jpa.show-sql=true\nspring.jpa.properties.hibernate.format_sql=true\n\nsecurity.ignored=true\nsecurity.basic.enabled=false\n\nlogging.level.org.springframework.web=INFO\nlogging.level.org.hibernate=INFO\nlogging.file=c:/temp/my-log/app.log\n</code></pre>\n<p>When I run my application,</p>\n<pre class=\"lang-none prettyprint-override\"><code>cmd&gt; mvn spring-boot:run\n</code></pre>\n<p>I can see SQL statements in the console, but they don't appear in <em>app.log</em>. The file contains only basic logs from Spring.</p>\n<p>What should I do to see SQL statements in the log file?</p>\n"},{"tags":["java","cassandra","ttl","astyanax"],"comments":[{"owner":{"account_id":5357170,"reputation":14233,"user_id":4269535,"display_name":"Erick Ramirez"},"score":0,"creation_date":1695196112,"post_id":77140283,"comment_id":135990138,"body_markdown":"We need additional info to be able to answer. Please update your original question with (1) the table schema, and (2) the Cassandra version. Cheers!","body":"We need additional info to be able to answer. Please update your original question with (1) the table schema, and (2) the Cassandra version. Cheers!"},{"owner":{"account_id":3999781,"reputation":55,"user_id":3296104,"display_name":"Lucifer893"},"score":0,"creation_date":1695198004,"post_id":77140283,"comment_id":135990531,"body_markdown":"Updated, thank you.","body":"Updated, thank you."}],"owner":{"account_id":3999781,"reputation":55,"user_id":3296104,"display_name":"Lucifer893"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695197965,"creation_date":1695195526,"question_id":77140283,"body_markdown":"I am writing data into a Cassandra cluster using Astyanax like so:\r\n\r\n    private void writeToBatch(Collection&lt;Program&gt; programBatch, MutationBatch batch) {\r\n    \tColumnFamily&lt;UUID, String&gt; programsCF = keyspaceProvider.getColumnFamily(PROGRAMS_COLUMN_FAMILY);\r\n    \tprogramBatch.forEach(program -&gt; {\r\n    \t\tbatch.withRow(programsCF, program.getProgramId())\r\n    \t\t\t\t.putColumn(COLUMN_NAME_TITLE, program.getTitle())\r\n    \t\t\t\t.putColumn(COLUMN_NAME_LANGUAGE, program.getLanguage().getShortCode())\r\n    \t\t\t\t.putColumn(COLUMN_NAME_COUNTRY, program.getCountry().getCode())\r\n    \t\t\t\t.putColumn(COLUMN_NAME_START, program.getStart())\r\n    \t\t\t\t.putColumn(COLUMN_NAME_STOP, program.getStop())\r\n    \t\t\t\t.putColumn(COLUMN_NAME_STREAM, program.getStream());\r\n    \t});\r\n    }\r\n    ...\r\n    batch.execute();\r\n\r\nTable schema:\r\n\r\n    CREATE TABLE &quot;RS&quot;.&quot;Programs&quot; (\r\n        key uuid,\r\n        column1 text,\r\n        value blob,\r\n        PRIMARY KEY (key, column1)\r\n    ) WITH COMPACT STORAGE\r\n        AND CLUSTERING ORDER BY (column1 ASC)\r\n        AND bloom_filter_fp_chance = 0.01\r\n        AND caching = {&#39;keys&#39;: &#39;ALL&#39;, &#39;rows_per_partition&#39;: &#39;NONE&#39;}\r\n        AND comment = &#39;&#39;\r\n        AND compaction = {&#39;class&#39;: &#39;org.apache.cassandra.db.compaction.SizeTieredCompactionStrategy&#39;, &#39;max_threshold&#39;: &#39;32&#39;, &#39;min_threshold&#39;: &#39;4&#39;}\r\n        AND compression = {&#39;chunk_length_in_kb&#39;: &#39;64&#39;, &#39;class&#39;: &#39;org.apache.cassandra.io.compress.LZ4Compressor&#39;}\r\n        AND crc_check_chance = 1.0\r\n        AND dclocal_read_repair_chance = 0.1\r\n        AND default_time_to_live = 2592000\r\n        AND gc_grace_seconds = 864000\r\n        AND max_index_interval = 2048\r\n        AND memtable_flush_period_in_ms = 0\r\n        AND min_index_interval = 128\r\n        AND read_repair_chance = 0.0\r\n        AND speculative_retry = &#39;NONE&#39;;\r\n\r\nVersion: [cqlsh 5.0.1 | Cassandra 3.0.9 | CQL spec 3.4.0 | Native protocol v4]\r\n\r\nThe table that I write into has a `default_time_to_live` of 30 days, but the data that is being written in there seems to have TTL `null` and is never deleted. I was under the assumption that if I don&#39;t specify a TTL in the write, the default one of the table will be used?","title":"Does Astyanax write use &quot;default_time_to_live&quot;?","body":"<p>I am writing data into a Cassandra cluster using Astyanax like so:</p>\n<pre><code>private void writeToBatch(Collection&lt;Program&gt; programBatch, MutationBatch batch) {\n    ColumnFamily&lt;UUID, String&gt; programsCF = keyspaceProvider.getColumnFamily(PROGRAMS_COLUMN_FAMILY);\n    programBatch.forEach(program -&gt; {\n        batch.withRow(programsCF, program.getProgramId())\n                .putColumn(COLUMN_NAME_TITLE, program.getTitle())\n                .putColumn(COLUMN_NAME_LANGUAGE, program.getLanguage().getShortCode())\n                .putColumn(COLUMN_NAME_COUNTRY, program.getCountry().getCode())\n                .putColumn(COLUMN_NAME_START, program.getStart())\n                .putColumn(COLUMN_NAME_STOP, program.getStop())\n                .putColumn(COLUMN_NAME_STREAM, program.getStream());\n    });\n}\n...\nbatch.execute();\n</code></pre>\n<p>Table schema:</p>\n<pre><code>CREATE TABLE &quot;RS&quot;.&quot;Programs&quot; (\n    key uuid,\n    column1 text,\n    value blob,\n    PRIMARY KEY (key, column1)\n) WITH COMPACT STORAGE\n    AND CLUSTERING ORDER BY (column1 ASC)\n    AND bloom_filter_fp_chance = 0.01\n    AND caching = {'keys': 'ALL', 'rows_per_partition': 'NONE'}\n    AND comment = ''\n    AND compaction = {'class': 'org.apache.cassandra.db.compaction.SizeTieredCompactionStrategy', 'max_threshold': '32', 'min_threshold': '4'}\n    AND compression = {'chunk_length_in_kb': '64', 'class': 'org.apache.cassandra.io.compress.LZ4Compressor'}\n    AND crc_check_chance = 1.0\n    AND dclocal_read_repair_chance = 0.1\n    AND default_time_to_live = 2592000\n    AND gc_grace_seconds = 864000\n    AND max_index_interval = 2048\n    AND memtable_flush_period_in_ms = 0\n    AND min_index_interval = 128\n    AND read_repair_chance = 0.0\n    AND speculative_retry = 'NONE';\n</code></pre>\n<p>Version: [cqlsh 5.0.1 | Cassandra 3.0.9 | CQL spec 3.4.0 | Native protocol v4]</p>\n<p>The table that I write into has a <code>default_time_to_live</code> of 30 days, but the data that is being written in there seems to have TTL <code>null</code> and is never deleted. I was under the assumption that if I don't specify a TTL in the write, the default one of the table will be used?</p>\n"},{"tags":["java","spring","spring-boot","annotations","lombok"],"comments":[{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":2,"creation_date":1578070154,"post_id":59582135,"comment_id":105330843,"body_markdown":"It is more the order of _annotation scanners_ that might effect things; every scanner looking for its own annotations. The bizar: 5 annotations and then `{}`.","body":"It is more the order of <i>annotation scanners</i> that might effect things; every scanner looking for its own annotations. The bizar: 5 annotations and then <code>{}</code>."},{"owner":{"account_id":6794864,"reputation":1053,"user_id":5230585,"display_name":"Katy"},"score":0,"creation_date":1578070414,"post_id":59582135,"comment_id":105330964,"body_markdown":"@JoopEggen, thank you for comment. \nThe class contains several lines which I have removed from the question. (Since we are focusing on annotation)","body":"@JoopEggen, thank you for comment.  The class contains several lines which I have removed from the question. (Since we are focusing on annotation)"},{"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"score":0,"creation_date":1578070804,"post_id":59582135,"comment_id":105331177,"body_markdown":"Since the Java Reflection API used to get annotations of a class doesn&#39;t guarantee any particular order for the returned annotations, the **question is moot**.","body":"Since the Java Reflection API used to get annotations of a class doesn&#39;t guarantee any particular order for the returned annotations, the <b>question is moot</b>."},{"owner":{"account_id":13887193,"reputation":7307,"user_id":10026074,"display_name":"Jan Rieke"},"score":2,"creation_date":1578079347,"post_id":59582135,"comment_id":105334648,"body_markdown":"That is incorrect, Andreas. https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/reflect/AnnotatedElement.html explains how the order is computed.","body":"That is incorrect, Andreas. <a href=\"https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/reflect/AnnotatedElement.html\" rel=\"nofollow noreferrer\">docs.oracle.com/en/java/javase/12/docs/api/java.base/java/la&zwnj;&#8203;ng/&hellip;</a> explains how the order is computed."}],"answers":[{"tags":[],"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1578071686,"creation_date":1578070238,"answer_id":59582312,"question_id":59582135,"body_markdown":"&quot;*Is there any impacts or benefits from a specific order ?*&quot; - Not as far as I know of, no. As was pointed out by Joop Eggen, the order of annotation processors or annotation scanners it the important part.\r\n \r\n--- \r\n&quot;*What&#39;s the recommended order of annotations ?*&quot; - If one is able to identify a pattern of annotations commonly used together, I would recommend to group them in a new annotation and use the new annotation instead. One can achieve this by creating a new `publice @interface MyAnnotation` and annotate this new annotation with the annotations one wants to group. See [this answer][Answer] for an example.\r\n\r\n[Answer]: https://stackoverflow.com/a/18585833/4216641","title":"Does annotations order matter?","body":"<p>\"<em>Is there any impacts or benefits from a specific order ?</em>\" - Not as far as I know of, no. As was pointed out by Joop Eggen, the order of annotation processors or annotation scanners it the important part.</p>\n\n<hr>\n\n<p>\"<em>What's the recommended order of annotations ?</em>\" - If one is able to identify a pattern of annotations commonly used together, I would recommend to group them in a new annotation and use the new annotation instead. One can achieve this by creating a new <code>publice @interface MyAnnotation</code> and annotate this new annotation with the annotations one wants to group. See <a href=\"https://stackoverflow.com/a/18585833/4216641\">this answer</a> for an example.</p>\n"},{"tags":[],"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1578080466,"creation_date":1578070385,"answer_id":59582349,"question_id":59582135,"body_markdown":"&gt; Is there any impact or benefit from a specific order ?\r\n\r\nNot that I am aware of. Remember how annotations work: some piece of code &quot;looks&quot; at your code, and checks for the presence of an annotation. Meaning: it &quot;gets&quot; an array of annotations, and checks whether the one it cares about is in that array. So order *should* be irrelevant. \r\n\r\nOf course, when we talk about annotations that have compile-time effects, the story might be different. Such annotations have effects on the compilation process itself, so worst case, order of annotations changes the compilation process. \r\n\r\n&gt; What&#39;s the recommended order of annotations?\r\n\r\nThe one that works for you. Meaning: sit down with your team, and ask yourself &quot;do we prefer a specific order&quot;. If so, write that down, and have people follow that rule.\r\n\r\nReal world example: we use annotations to &quot;describe&quot; the &quot;properties&quot; of our &quot;objects&quot;. At some point, we saw that we often forgot annotation X when adding new properties. Because properties were written down in random order, thus hard to process manually (and we have plenty of different annotations, sometimes 5 to 10 on a single property). \r\n\r\nOur &quot;solution&quot;: annotations must be sorted alphabetically (when used for such &quot;property&quot; definitions). And we even have a unit test that checks for that sorting order. Since then: all &quot;property&quot; definitions follow the same rule. And that works nicely for us, because everybody comes with the same expectation and mindset.\r\n","title":"Does annotations order matter?","body":"<blockquote>\n  <p>Is there any impact or benefit from a specific order ?</p>\n</blockquote>\n\n<p>Not that I am aware of. Remember how annotations work: some piece of code \"looks\" at your code, and checks for the presence of an annotation. Meaning: it \"gets\" an array of annotations, and checks whether the one it cares about is in that array. So order <em>should</em> be irrelevant. </p>\n\n<p>Of course, when we talk about annotations that have compile-time effects, the story might be different. Such annotations have effects on the compilation process itself, so worst case, order of annotations changes the compilation process. </p>\n\n<blockquote>\n  <p>What's the recommended order of annotations?</p>\n</blockquote>\n\n<p>The one that works for you. Meaning: sit down with your team, and ask yourself \"do we prefer a specific order\". If so, write that down, and have people follow that rule.</p>\n\n<p>Real world example: we use annotations to \"describe\" the \"properties\" of our \"objects\". At some point, we saw that we often forgot annotation X when adding new properties. Because properties were written down in random order, thus hard to process manually (and we have plenty of different annotations, sometimes 5 to 10 on a single property). </p>\n\n<p>Our \"solution\": annotations must be sorted alphabetically (when used for such \"property\" definitions). And we even have a unit test that checks for that sorting order. Since then: all \"property\" definitions follow the same rule. And that works nicely for us, because everybody comes with the same expectation and mindset.</p>\n"},{"tags":[],"owner":{"account_id":13887193,"reputation":7307,"user_id":10026074,"display_name":"Jan Rieke"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1578080294,"creation_date":1578080294,"answer_id":59584382,"question_id":59582135,"body_markdown":"In almost all cases the answer is *No, the order has no effect.*\r\n\r\nBut in fact it is a bit more complicated.\r\n\r\n 1. Considering annotations that are processed by annotation processors, it was already stated in the other answers that it more depends on the order in which the processors run. However, the processors have access to the AST, which allows them to determine the order of annotations in the source code. So theoretically annotation processors can make the generated code dependent on the order, but I don&#39;t know any example for this and would call this bad practice.\r\n\r\n 2. When getting the annotation of an element during runtime, you also have access to the order. [The docs][1] have more info on how the order is determined. So again, an implementation could make its behaviour dependent on the order.\r\nAgain I would consider this bad practice. The only exception may be repeatable annotations, where I can think of use cases where this could be reasonable.\r\n\r\nIf there is any dependence on the order of annotations, which is very unlikely, this should be made very clear in the JavaDoc of the annotation.\r\n\r\nSo typically you are free to order them as you like. I don&#39;t know of any style guide on the order of annotations, so just make it reasonable for you.\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/reflect/AnnotatedElement.html","title":"Does annotations order matter?","body":"<p>In almost all cases the answer is <em>No, the order has no effect.</em></p>\n\n<p>But in fact it is a bit more complicated.</p>\n\n<ol>\n<li><p>Considering annotations that are processed by annotation processors, it was already stated in the other answers that it more depends on the order in which the processors run. However, the processors have access to the AST, which allows them to determine the order of annotations in the source code. So theoretically annotation processors can make the generated code dependent on the order, but I don't know any example for this and would call this bad practice.</p></li>\n<li><p>When getting the annotation of an element during runtime, you also have access to the order. <a href=\"https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/reflect/AnnotatedElement.html\" rel=\"noreferrer\">The docs</a> have more info on how the order is determined. So again, an implementation could make its behaviour dependent on the order.\nAgain I would consider this bad practice. The only exception may be repeatable annotations, where I can think of use cases where this could be reasonable.</p></li>\n</ol>\n\n<p>If there is any dependence on the order of annotations, which is very unlikely, this should be made very clear in the JavaDoc of the annotation.</p>\n\n<p>So typically you are free to order them as you like. I don't know of any style guide on the order of annotations, so just make it reasonable for you.</p>\n"},{"tags":[],"owner":{"account_id":21739251,"reputation":179,"user_id":16046846,"display_name":"Konstantinos K."},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695197451,"creation_date":1695197451,"answer_id":77140505,"question_id":59582135,"body_markdown":"Always it depends.\r\n\r\nImagine you have an annotation that initializes a class with specific configurations labeled as &#39;a,&#39; &#39;b,&#39; and &#39;c.&#39; If your goal is to create another annotation that injects the previously configured class with additional settings, such as &#39;d,&#39; the sequence in which you apply these annotations becomes significant.\r\n","title":"Does annotations order matter?","body":"<p>Always it depends.</p>\n<p>Imagine you have an annotation that initializes a class with specific configurations labeled as 'a,' 'b,' and 'c.' If your goal is to create another annotation that injects the previously configured class with additional settings, such as 'd,' the sequence in which you apply these annotations becomes significant.</p>\n"}],"owner":{"account_id":6794864,"reputation":1053,"user_id":5230585,"display_name":"Katy"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6841,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"accepted_answer_id":59582349,"answer_count":4,"score":13,"last_activity_date":1695197451,"creation_date":1578069457,"question_id":59582135,"body_markdown":"As you know, the annotation driven programming is more and more incorporated in the majority of frameworks that we are using nowadays (i.e. Spring, Lombok etc).\r\n\r\nBesides, we need sometimes to create our custom annotation. (i.g. Logging enter/exit traces for all public methods of a given class using an aspect - `@LogAroundMethods`)\r\n\r\nHence, a given class can hold plenty of annotations.\r\n\r\n    @LogAroundMethod // My custom annotation\r\n    @Slf4j // Lombok annotation\r\n    @Component // Spring annotation\r\n    public class ClientNotificationProxy {\r\n    //Code\r\n    }\r\n\r\n    @LogAroundMethod // My custom annotation\r\n    @Configuration // Spring annotation\r\n    @ConditionalOnClass(NotificationSender.class) // Spring annotation\r\n    @EnableConfigurationProperties(MessagingProperties.class) // Spring annotation\r\n    @Import({ MongoConfiguration.class, SpringRetryConfiguration.class }) // Spring annotation\r\n    public class StarterClientAutoConfiguration {\r\n    // Code \r\n    }\r\n\r\n - What&#39;s the recommended order of annotations ?  \r\n - Is there any impact or benefit from a specific order ?\r\n\r\n\r\n\r\n\r\n","title":"Does annotations order matter?","body":"<p>As you know, the annotation driven programming is more and more incorporated in the majority of frameworks that we are using nowadays (i.e. Spring, Lombok etc).</p>\n\n<p>Besides, we need sometimes to create our custom annotation. (i.g. Logging enter/exit traces for all public methods of a given class using an aspect - <code>@LogAroundMethods</code>)</p>\n\n<p>Hence, a given class can hold plenty of annotations.</p>\n\n<pre><code>@LogAroundMethod // My custom annotation\n@Slf4j // Lombok annotation\n@Component // Spring annotation\npublic class ClientNotificationProxy {\n//Code\n}\n\n@LogAroundMethod // My custom annotation\n@Configuration // Spring annotation\n@ConditionalOnClass(NotificationSender.class) // Spring annotation\n@EnableConfigurationProperties(MessagingProperties.class) // Spring annotation\n@Import({ MongoConfiguration.class, SpringRetryConfiguration.class }) // Spring annotation\npublic class StarterClientAutoConfiguration {\n// Code \n}\n</code></pre>\n\n<ul>\n<li>What's the recommended order of annotations ?  </li>\n<li>Is there any impact or benefit from a specific order ?</li>\n</ul>\n"},{"tags":["java","unit-testing","docker","gradle","plugins"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1527540601,"post_id":50573242,"comment_id":88156097,"body_markdown":"The [Java Plugin User Guide](https://docs.gradle.org/current/userguide/java_plugin.html) has it covered.","body":"The <a href=\"https://docs.gradle.org/current/userguide/java_plugin.html\" rel=\"nofollow noreferrer\">Java Plugin User Guide</a> has it covered."},{"owner":{"account_id":49789,"reputation":1549,"user_id":148397,"accept_rate":36,"display_name":"Gadi"},"score":0,"creation_date":1527541404,"post_id":50573242,"comment_id":88156339,"body_markdown":"Thanks @Turing85 but I already have a gradle script that can do this, I would like to have this in java plugin code so I don&#39;t have to configre this on each project.","body":"Thanks @Turing85 but I already have a gradle script that can do this, I would like to have this in java plugin code so I don&#39;t have to configre this on each project."},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1527541695,"post_id":50573242,"comment_id":88156416,"body_markdown":"Something like [this](https://github.com/pedjak/gradle-dockerized-test-plugin)?","body":"Something like <a href=\"https://github.com/pedjak/gradle-dockerized-test-plugin\" rel=\"nofollow noreferrer\">this</a>?"},{"owner":{"account_id":49789,"reputation":1549,"user_id":148397,"accept_rate":36,"display_name":"Gadi"},"score":1,"creation_date":1527542139,"post_id":50573242,"comment_id":88156537,"body_markdown":"not sure, I just need to set the sourcesets correctly and add some dependencies. the rest of the docker stuff is done in the test class code not in the plugin. make sense?","body":"not sure, I just need to set the sourcesets correctly and add some dependencies. the rest of the docker stuff is done in the test class code not in the plugin. make sense?"},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1527542330,"post_id":50573242,"comment_id":88156588,"body_markdown":"In this  case, please re-check the link I posted. There is an explicit example for creating an integration test source set (under &quot;Defining new source sets&quot;).","body":"In this  case, please re-check the link I posted. There is an explicit example for creating an integration test source set (under &quot;Defining new source sets&quot;)."},{"owner":{"account_id":49789,"reputation":1549,"user_id":148397,"accept_rate":36,"display_name":"Gadi"},"score":0,"creation_date":1527575640,"post_id":50573242,"comment_id":88164507,"body_markdown":"that is exactly what I do, see above. doesn&#39;t work :(","body":"that is exactly what I do, see above. doesn&#39;t work :("},{"owner":{"account_id":9291622,"reputation":11361,"user_id":6899896,"display_name":"M.Ricciuti"},"score":1,"creation_date":1597595930,"post_id":50573242,"comment_id":112178336,"body_markdown":"I used the following post to build my own integrationTest plugin for my custom projects: https://www.petrikainulainen.net/programming/gradle/getting-started-with-gradle-integration-testing/","body":"I used the following post to build my own integrationTest plugin for my custom projects: <a href=\"https://www.petrikainulainen.net/programming/gradle/getting-started-with-gradle-integration-testing/\" rel=\"nofollow noreferrer\">petrikainulainen.net/programming/gradle/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":312160,"reputation":12370,"user_id":626084,"accept_rate":71,"display_name":"Zasz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1598118695,"creation_date":1598118380,"answer_id":63539288,"question_id":50573242,"body_markdown":"I had added a new sourceSet with groovy - I hope it can act as reference for the java equivalent you are trying. Consider writing the plugin itself in groovy.\r\n\r\n    class CustomPlugin implements Plugin&lt;Project&gt; {\r\n      @Override\r\n      void apply(final Project project) {   \r\n            // add a source set\r\n            File sourcesDir = project.file(&quot;/some/path&quot;)    \r\n            project.sourceSets {\r\n              myNewEndToEndTest {\r\n                java.srcDirs += [sourcesDir]\r\n              }\r\n            }\r\n    \r\n            project.configurations.create(&#39;yourNewConfig&#39;)\r\n            project.dependencies {\r\n                // Add some dependencies here that your e2e test run needs\r\n                // Example: yourNewConfig &quot;org.junit:junit-core:5.0&quot;\r\n            }              \r\n            // you can also use the project object to create tasks, taskDependencies, configurations etc\r\n      }\r\n    \r\n    }\r\n\r\n","title":"how to add sourceset in gradle java custom plugin","body":"<p>I had added a new sourceSet with groovy - I hope it can act as reference for the java equivalent you are trying. Consider writing the plugin itself in groovy.</p>\n<pre><code>class CustomPlugin implements Plugin&lt;Project&gt; {\n  @Override\n  void apply(final Project project) {   \n        // add a source set\n        File sourcesDir = project.file(&quot;/some/path&quot;)    \n        project.sourceSets {\n          myNewEndToEndTest {\n            java.srcDirs += [sourcesDir]\n          }\n        }\n\n        project.configurations.create('yourNewConfig')\n        project.dependencies {\n            // Add some dependencies here that your e2e test run needs\n            // Example: yourNewConfig &quot;org.junit:junit-core:5.0&quot;\n        }              \n        // you can also use the project object to create tasks, taskDependencies, configurations etc\n  }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":300068,"reputation":2069,"user_id":1211920,"accept_rate":56,"display_name":"Igor"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695197383,"creation_date":1695197383,"answer_id":77140496,"question_id":50573242,"body_markdown":"Use [The JVM Test Suite](https://docs.gradle.org/current/userguide/jvm_test_suite_plugin.html) official Gradle plugin:\r\n\r\n```\r\nplugins {\r\n    java\r\n    `jvm-test-suite`\r\n}\r\n\r\ntesting {\r\n    suites {\r\n        dependencies {\r\n            // add deps for all test source sets\r\n        }\r\n\r\n        register(&quot;integrationTest&quot;, JvmTestSuite::class) {\r\n            dependencies {\r\n                // add for new test source set\r\n            }\r\n        }\r\n    }\r\n}\r\n```","title":"how to add sourceset in gradle java custom plugin","body":"<p>Use <a href=\"https://docs.gradle.org/current/userguide/jvm_test_suite_plugin.html\" rel=\"nofollow noreferrer\">The JVM Test Suite</a> official Gradle plugin:</p>\n<pre><code>plugins {\n    java\n    `jvm-test-suite`\n}\n\ntesting {\n    suites {\n        dependencies {\n            // add deps for all test source sets\n        }\n\n        register(&quot;integrationTest&quot;, JvmTestSuite::class) {\n            dependencies {\n                // add for new test source set\n            }\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":49789,"reputation":1549,"user_id":148397,"accept_rate":36,"display_name":"Gadi"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":4407,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":2,"score":6,"last_activity_date":1695197383,"creation_date":1527540299,"question_id":50573242,"body_markdown":"using gradle 4.7\r\n\r\nI would like to add new sourceset for test integration classes. Seperated from the main test sourceset it will have some other dependencies and would have seperate task to run the tests.\r\n\r\nCan it be done using a custom java gradle plugin?\r\n\r\nHere is the code and the project using it.\r\n\r\nhttps://github.com/gadieichhorn/gradle-java-multimodule/tree/master/buildSrc\r\n\r\nbeacuse these tests use the docker image produced from the build it should only run after the build, not like the normal tests would.\r\n\r\nany sample or contribution will be appreciated.\r\n \r\n\r\n            project.getPlugins().withType(JavaPlugin.class, javaPlugin -&gt; {\r\n    \r\n                JavaPluginConvention javaConvention = project.getConvention().getPlugin(JavaPluginConvention.class);\r\n    \r\n                SourceSet main = javaConvention.getSourceSets().getByName(SourceSet.MAIN_SOURCE_SET_NAME);\r\n                SourceSet test = javaConvention.getSourceSets().getByName(SourceSet.TEST_SOURCE_SET_NAME);\r\n    \r\n                final Configuration integrationImplementation = project.getConfigurations().create(&quot;integrationImplementation&quot;)\r\n                        .setExtendsFrom(Arrays.asList(project.getConfigurations().getByName(&quot;testImplementation&quot;)))\r\n                        .setVisible(false)\r\n                        .setDescription(&quot;Integration Implementation&quot;);\r\n    \r\n                project.getDependencies().add(integrationImplementation.getName(), &quot;org.testcontainers:testcontainers:1.7.1&quot;);\r\n    \r\n                final Configuration integrationRuntimeOnly = project.getConfigurations().create(&quot;integrationRuntimeOnly&quot;)\r\n                        .setExtendsFrom(Arrays.asList(project.getConfigurations().getByName(&quot;testRuntimeOnly&quot;)))\r\n                        .setVisible(false)\r\n                        .setDescription(&quot;Integration Runtime Only &quot;);\r\n    \r\n    //            project.getDependencies().add(integrationRuntimeOnly.getName(), &quot;org.testcontainers:testcontainers:1.7.1&quot;);\r\n    \r\n                final SourceSet integration = javaConvention.getSourceSets().create(&quot;integration&quot;, sourceSet -&gt; {\r\n                    sourceSet.getJava().srcDir(Arrays.asList(&quot;src/integration/java&quot;));\r\n                    sourceSet.getResources().srcDir(&quot;src/integration/resources&quot;);\r\n                    sourceSet.setCompileClasspath(project.files(main.getOutput(), test.getOutput()));\r\n                    sourceSet.setRuntimeClasspath(project.files(main.getOutput(), test.getOutput()));\r\n                    sourceSet.setRuntimeClasspath(sourceSet.getOutput());\r\n                });\r\n    \r\n                project.getTasks().create(&quot;e2e&quot;, Test.class, e2e -&gt; {\r\n                    e2e.setTestClassesDirs(integration.getOutput().getClassesDirs());\r\n                    e2e.setClasspath(integration.getRuntimeClasspath());\r\n                });\r\n    \r\n            });\r\n\r\n","title":"how to add sourceset in gradle java custom plugin","body":"<p>using gradle 4.7</p>\n\n<p>I would like to add new sourceset for test integration classes. Seperated from the main test sourceset it will have some other dependencies and would have seperate task to run the tests.</p>\n\n<p>Can it be done using a custom java gradle plugin?</p>\n\n<p>Here is the code and the project using it.</p>\n\n<p><a href=\"https://github.com/gadieichhorn/gradle-java-multimodule/tree/master/buildSrc\" rel=\"noreferrer\">https://github.com/gadieichhorn/gradle-java-multimodule/tree/master/buildSrc</a></p>\n\n<p>beacuse these tests use the docker image produced from the build it should only run after the build, not like the normal tests would.</p>\n\n<p>any sample or contribution will be appreciated.</p>\n\n<pre><code>        project.getPlugins().withType(JavaPlugin.class, javaPlugin -&gt; {\n\n            JavaPluginConvention javaConvention = project.getConvention().getPlugin(JavaPluginConvention.class);\n\n            SourceSet main = javaConvention.getSourceSets().getByName(SourceSet.MAIN_SOURCE_SET_NAME);\n            SourceSet test = javaConvention.getSourceSets().getByName(SourceSet.TEST_SOURCE_SET_NAME);\n\n            final Configuration integrationImplementation = project.getConfigurations().create(\"integrationImplementation\")\n                    .setExtendsFrom(Arrays.asList(project.getConfigurations().getByName(\"testImplementation\")))\n                    .setVisible(false)\n                    .setDescription(\"Integration Implementation\");\n\n            project.getDependencies().add(integrationImplementation.getName(), \"org.testcontainers:testcontainers:1.7.1\");\n\n            final Configuration integrationRuntimeOnly = project.getConfigurations().create(\"integrationRuntimeOnly\")\n                    .setExtendsFrom(Arrays.asList(project.getConfigurations().getByName(\"testRuntimeOnly\")))\n                    .setVisible(false)\n                    .setDescription(\"Integration Runtime Only \");\n\n//            project.getDependencies().add(integrationRuntimeOnly.getName(), \"org.testcontainers:testcontainers:1.7.1\");\n\n            final SourceSet integration = javaConvention.getSourceSets().create(\"integration\", sourceSet -&gt; {\n                sourceSet.getJava().srcDir(Arrays.asList(\"src/integration/java\"));\n                sourceSet.getResources().srcDir(\"src/integration/resources\");\n                sourceSet.setCompileClasspath(project.files(main.getOutput(), test.getOutput()));\n                sourceSet.setRuntimeClasspath(project.files(main.getOutput(), test.getOutput()));\n                sourceSet.setRuntimeClasspath(sourceSet.getOutput());\n            });\n\n            project.getTasks().create(\"e2e\", Test.class, e2e -&gt; {\n                e2e.setTestClassesDirs(integration.getOutput().getClassesDirs());\n                e2e.setClasspath(integration.getRuntimeClasspath());\n            });\n\n        });\n</code></pre>\n"},{"tags":["java","android","firebase","google-cloud-platform","firebase-storage"],"answers":[{"tags":[],"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695195441,"creation_date":1695195441,"answer_id":77140274,"question_id":77137665,"body_markdown":"&gt; I can&#39;t get access to the file or &#39;READ_EXTERNAL_STORAGE&#39; by Karumi Dexter. It is working till Sdk-32 but it&#39;s not working on the 33.\r\n\r\nAs it is mentioned on the official page, the [Dexter library][1]:\r\n\r\n&gt; Is no longer under active development.\r\n\r\nAnd this has been happening for 2 years now. So it can work with Sdk-32 but not with Sdk-33 because it isn&#39;t maintained anymore. My recommendation in such cases would be to use your own logic regarding permission as it is mentioned in the [official Android documentation][2]. Please also see that there is a note there regarding the `READ_EXTERNAL_STORAGE` that says:\r\n\r\n&gt; **Starting in API level 33, this permission has no effect.** If your app accesses other apps&#39; media files, request one or more of these permissions instead: [READ_MEDIA_IMAGES][3], [READ_MEDIA_VIDEO][4], [READ_MEDIA_AUDIO][5]. Learn more about the [storage permissions][6] that are associated with media files.\r\n\r\nSo most likely that&#39;s the reason why you get that behavior.\r\n\r\n  [1]: https://github.com/Karumi/Dexter\r\n  [2]: https://developer.android.com/reference/android/Manifest.permission#READ_EXTERNAL_STORAGE\r\n  [3]: https://developer.android.com/reference/android/Manifest.permission#READ_MEDIA_IMAGES\r\n  [4]: https://developer.android.com/reference/android/Manifest.permission#READ_MEDIA_VIDEO\r\n  [5]: https://developer.android.com/reference/android/Manifest.permission#READ_MEDIA_AUDIO\r\n  [6]: https://developer.android.com/training/data-storage/shared/media#storage-permission","title":"I can&#39;t get access to the file or &#39;READ_EXTERNAL_STORAGE&#39; by Karumi Dexter. It is working till Sdk-32 properly but it&#39;s not working on 33","body":"<blockquote>\n<p>I can't get access to the file or 'READ_EXTERNAL_STORAGE' by Karumi Dexter. It is working till Sdk-32 but it's not working on the 33.</p>\n</blockquote>\n<p>As it is mentioned on the official page, the <a href=\"https://github.com/Karumi/Dexter\" rel=\"nofollow noreferrer\">Dexter library</a>:</p>\n<blockquote>\n<p>Is no longer under active development.</p>\n</blockquote>\n<p>And this has been happening for 2 years now. So it can work with Sdk-32 but not with Sdk-33 because it isn't maintained anymore. My recommendation in such cases would be to use your own logic regarding permission as it is mentioned in the <a href=\"https://developer.android.com/reference/android/Manifest.permission#READ_EXTERNAL_STORAGE\" rel=\"nofollow noreferrer\">official Android documentation</a>. Please also see that there is a note there regarding the <code>READ_EXTERNAL_STORAGE</code> that says:</p>\n<blockquote>\n<p><strong>Starting in API level 33, this permission has no effect.</strong> If your app accesses other apps' media files, request one or more of these permissions instead: <a href=\"https://developer.android.com/reference/android/Manifest.permission#READ_MEDIA_IMAGES\" rel=\"nofollow noreferrer\">READ_MEDIA_IMAGES</a>, <a href=\"https://developer.android.com/reference/android/Manifest.permission#READ_MEDIA_VIDEO\" rel=\"nofollow noreferrer\">READ_MEDIA_VIDEO</a>, <a href=\"https://developer.android.com/reference/android/Manifest.permission#READ_MEDIA_AUDIO\" rel=\"nofollow noreferrer\">READ_MEDIA_AUDIO</a>. Learn more about the <a href=\"https://developer.android.com/training/data-storage/shared/media#storage-permission\" rel=\"nofollow noreferrer\">storage permissions</a> that are associated with media files.</p>\n</blockquote>\n<p>So most likely that's the reason why you get that behavior.</p>\n"},{"tags":[],"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695197354,"creation_date":1695197354,"answer_id":77140492,"question_id":77137665,"body_markdown":"For using `Intent.ACTION_GET_CONTENT` you have never needed permission `READ_EXTERNAL_STORAGE`.\r\n\r\nFor no Android version.\r\n\r\nSo remove the check and just launch the intent.","title":"I can&#39;t get access to the file or &#39;READ_EXTERNAL_STORAGE&#39; by Karumi Dexter. It is working till Sdk-32 properly but it&#39;s not working on 33","body":"<p>For using <code>Intent.ACTION_GET_CONTENT</code> you have never needed permission <code>READ_EXTERNAL_STORAGE</code>.</p>\n<p>For no Android version.</p>\n<p>So remove the check and just launch the intent.</p>\n"}],"owner":{"account_id":26487773,"reputation":1,"user_id":20126083,"display_name":"MD MEHEDI FAKIR"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1695197354,"creation_date":1695153959,"question_id":77137665,"body_markdown":"Function for choosing video .   \r\n\r\nprivate void ChooseVideo(){\r\n\r\n        Dexter.withContext(this)\r\n                .withPermission(Manifest.permission.READ_EXTERNAL_STORAGE)\r\n                .withListener(new PermissionListener() {\r\n\r\n                    @Override public void onPermissionGranted(PermissionGrantedResponse response) {\r\n                        Intent intent = new Intent(  );\r\n                        //new line added\r\n                        intent.addCategory(Intent.CATEGORY_OPENABLE);\r\n                        intent.setType( &quot;video/*&quot; );\r\n\r\n                        intent.setAction( Intent.ACTION_GET_CONTENT );\r\n                        startActivityForResult( intent,102 );\r\n                    }\r\n                    @Override public void onPermissionDenied(PermissionDeniedResponse response) {\r\n\r\n                    }\r\n                    @Override public void onPermissionRationaleShouldBeShown(PermissionRequest permission, PermissionToken token) {\r\n                       token.continuePermissionRequest();\r\n                    }\r\n                }).check();\r\n\r\n    }\r\n\r\n\r\n\r\n//on activity result\r\n\r\n    @Override\r\n    protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\r\n        super.onActivityResult( requestCode, resultCode, data );\r\n        if (requestCode==102 &amp;resultCode==RESULT_OK);\r\n        videoUri=data.getData();\r\n        binding.VideoViewAVA.setVisibility(View.VISIBLE);\r\n        binding.VideoViewAVA.setVideoURI(videoUri);\r\n\r\n        Cursor mCursor =  getApplicationContext().getContentResolver().query( videoUri,null,null,null,null );\r\n        int indexedName =mCursor.getColumnIndex( OpenableColumns.DISPLAY_NAME );\r\n        mCursor.moveToFirst();\r\n        songName = mCursor.getString(indexedName);\r\n        finalSongTitle = songName.replace(&quot;.mp4&quot;,&quot;&quot;)\r\n                                .replace(&quot;.wmv&quot;,&quot;&quot;)\r\n                                .replace(&quot;.webm&quot;,&quot;&quot;)\r\n                                .replace(&quot;.mkv&quot;,&quot; &quot;);\r\n        mCursor.close();\r\n\r\n        binding.btnUploadVideo.setEnabled(true);\r\n        binding.vTitle.setText(finalSongTitle);\r\n\r\n    }\r\n\r\n\r\n\r\n[Output should be look Like This]\r\n**But it&#39;s not working properly.**\r\n(https://i.stack.imgur.com/bAsZu.png)","title":"I can&#39;t get access to the file or &#39;READ_EXTERNAL_STORAGE&#39; by Karumi Dexter. It is working till Sdk-32 properly but it&#39;s not working on 33","body":"<p>Function for choosing video .</p>\n<p>private void ChooseVideo(){</p>\n<pre><code>    Dexter.withContext(this)\n            .withPermission(Manifest.permission.READ_EXTERNAL_STORAGE)\n            .withListener(new PermissionListener() {\n\n                @Override public void onPermissionGranted(PermissionGrantedResponse response) {\n                    Intent intent = new Intent(  );\n                    //new line added\n                    intent.addCategory(Intent.CATEGORY_OPENABLE);\n                    intent.setType( &quot;video/*&quot; );\n\n                    intent.setAction( Intent.ACTION_GET_CONTENT );\n                    startActivityForResult( intent,102 );\n                }\n                @Override public void onPermissionDenied(PermissionDeniedResponse response) {\n\n                }\n                @Override public void onPermissionRationaleShouldBeShown(PermissionRequest permission, PermissionToken token) {\n                   token.continuePermissionRequest();\n                }\n            }).check();\n\n}\n</code></pre>\n<p>//on activity result</p>\n<pre><code>@Override\nprotected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\n    super.onActivityResult( requestCode, resultCode, data );\n    if (requestCode==102 &amp;resultCode==RESULT_OK);\n    videoUri=data.getData();\n    binding.VideoViewAVA.setVisibility(View.VISIBLE);\n    binding.VideoViewAVA.setVideoURI(videoUri);\n\n    Cursor mCursor =  getApplicationContext().getContentResolver().query( videoUri,null,null,null,null );\n    int indexedName =mCursor.getColumnIndex( OpenableColumns.DISPLAY_NAME );\n    mCursor.moveToFirst();\n    songName = mCursor.getString(indexedName);\n    finalSongTitle = songName.replace(&quot;.mp4&quot;,&quot;&quot;)\n                            .replace(&quot;.wmv&quot;,&quot;&quot;)\n                            .replace(&quot;.webm&quot;,&quot;&quot;)\n                            .replace(&quot;.mkv&quot;,&quot; &quot;);\n    mCursor.close();\n\n    binding.btnUploadVideo.setEnabled(true);\n    binding.vTitle.setText(finalSongTitle);\n\n}\n</code></pre>\n<p>[Output should be look Like This]\n<strong>But it's not working properly.</strong>\n(<a href=\"https://i.stack.imgur.com/bAsZu.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/bAsZu.png</a>)</p>\n"},{"tags":["java","aes"],"comments":[{"owner":{"account_id":2006972,"reputation":43182,"user_id":1796579,"display_name":"Henry"},"score":0,"creation_date":1515141115,"post_id":48109791,"comment_id":83194823,"body_markdown":"Don&#39;t read the whole file into memory, instead do the encryption block by block.","body":"Don&#39;t read the whole file into memory, instead do the encryption block by block."},{"owner":{"account_id":3421244,"reputation":35863,"user_id":2868801,"display_name":"dave_thompson_085"},"score":0,"creation_date":1515145245,"post_id":48109791,"comment_id":83197084,"body_markdown":"(1) Your links are not correctly formatted to be URLs (2) Java `Cipher` API handles both stream or stream-mode and block-mode ciphers with the same methods, and necessarily handles block buffering internally, so byte-at-a-time does work -- although chunk-at-a-time like Maurice&#39;s 4k is better. (3) Using any human-readable or even printable string as a (symmetric) key is weak (in any language) and fragile (in Java using defaulted charset, which varies) but that&#39;s offtopic for SO and belongs on security.SX or crypto.SX","body":"(1) Your links are not correctly formatted to be URLs (2) Java <code>Cipher</code> API handles both stream or stream-mode and block-mode ciphers with the same methods, and necessarily handles block buffering internally, so byte-at-a-time does work -- although chunk-at-a-time like Maurice&#39;s 4k is better. (3) Using any human-readable or even printable string as a (symmetric) key is weak (in any language) and fragile (in Java using defaulted charset, which varies) but that&#39;s offtopic for SO and belongs on security.SX or crypto.SX"}],"answers":[{"tags":[],"owner":{"account_id":12060587,"reputation":3933,"user_id":8819761,"display_name":"Jeroen Steenbeeke"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1515140950,"creation_date":1515140950,"answer_id":48109827,"question_id":48109791,"body_markdown":"I think you should look into using CipherOutputStream. This way you won&#39;t need to load the file into memory:\r\n\r\nhttps://docs.oracle.com/javase/9/docs/api/javax/crypto/CipherOutputStream.html","title":"java encrypting large file cause java.lang.OutOfMemoryError: Java heap space,possible solutions","body":"<p>I think you should look into using CipherOutputStream. This way you won't need to load the file into memory:</p>\n\n<p><a href=\"https://docs.oracle.com/javase/9/docs/api/javax/crypto/CipherOutputStream.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/9/docs/api/javax/crypto/CipherOutputStream.html</a></p>\n"},{"tags":[],"owner":{"account_id":9463219,"reputation":9357,"user_id":7036419,"display_name":"Maurice Perry"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1515141688,"creation_date":1515141311,"answer_id":48109914,"question_id":48109791,"body_markdown":"Don&#39;t process the whole file at once: use a buffer:\r\n\r\n    try (FileInputStream inputStream = new FileInputStream(inputFile);\r\n            FileOutputStream outputStream = new FileOutputStream(outputFile)) {\r\n        byte[] inputBytes = new byte[4096];\r\n        for (int n = inputStream.read(inputBytes); n &gt; 0; n = inputStream.read(inputBytes)) {\r\n            byte[] outputBytes = cipher.update(inputBytes, 0, n);\r\n            outputStream.write(outputBytes);\r\n        }\r\n\r\n        byte[] outputBytes = cipher.doFinal();\r\n        outputStream.write(outputBytes);\r\n    }","title":"java encrypting large file cause java.lang.OutOfMemoryError: Java heap space,possible solutions","body":"<p>Don't process the whole file at once: use a buffer:</p>\n\n<pre><code>try (FileInputStream inputStream = new FileInputStream(inputFile);\n        FileOutputStream outputStream = new FileOutputStream(outputFile)) {\n    byte[] inputBytes = new byte[4096];\n    for (int n = inputStream.read(inputBytes); n &gt; 0; n = inputStream.read(inputBytes)) {\n        byte[] outputBytes = cipher.update(inputBytes, 0, n);\n        outputStream.write(outputBytes);\n    }\n\n    byte[] outputBytes = cipher.doFinal();\n    outputStream.write(outputBytes);\n}\n</code></pre>\n"}],"owner":{"account_id":11119200,"reputation":1394,"user_id":8380779,"display_name":"kenn"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":836,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1695196901,"creation_date":1515140798,"question_id":48109791,"body_markdown":"I am writing java program to encrypt video files,with small video files it performs as expected however when i try on a huge file approximately 800 Megabyte,it throws an exception \r\n`java.lang.OutOfMemoryError: Java heap space`.\r\nI have researched on the topic getting more information about the garbage collector from [here][1] and reviewing similar problems [here][2]. According to the best chosen answer how can you &quot;Encrypt a byte at a time&quot;: With block ciphers encryption is by the block (AES: 16-bytes)`.\r\nThe contents of my source code\r\n\r\n&gt; main.java\r\n\r\n    public static void main(String[] args) {\r\n        String key = &quot;Mary has one cat&quot;;\r\n        File inputFile = new File(&quot;C:\\\\Users\\\\xyz\\\\Music\\\\test\\\\-.mp4&quot;);\r\n        File encryptedFile = new File(&quot;C:\\\\Users\\\\xyz\\\\Music\\\\test\\\\-.mp4.encrypted&quot;);\r\n        File decryptedFile = new File(&quot;C:\\\\Users\\\\xyz\\\\Music\\\\test\\\\decrypted.mp4&quot;);\r\n\r\n        try {\r\n            CryptoUtils.encrypt(key, inputFile, encryptedFile);\r\n            CryptoUtils.decrypt(key, encryptedFile, decryptedFile);\r\n        } catch (CryptoException ex) {\r\n            System.out.println(ex.getMessage());\r\n            ex.printStackTrace();\r\n        }\r\n    }\r\n\r\n&gt; CryptoUtils.java\r\n\r\n     private static final String ALGORITHM = &quot;AES&quot;;\r\n    private static final String TRANSFORMATION = &quot;AES&quot;;\r\n \r\n    public static void encrypt(String key, File inputFile, File outputFile)\r\n            throws CryptoException {\r\n        doCrypto(Cipher.ENCRYPT_MODE, key, inputFile, outputFile);\r\n    }\r\n \r\n    public static void decrypt(String key, File inputFile, File outputFile)\r\n            throws CryptoException {\r\n        doCrypto(Cipher.DECRYPT_MODE, key, inputFile, outputFile);\r\n    }\r\n \r\n    private static void doCrypto(int cipherMode, String key, File inputFile,\r\n            File outputFile) throws CryptoException {\r\n        try {\r\n            Key secretKey = new SecretKeySpec(key.getBytes(), ALGORITHM);\r\n            Cipher cipher = Cipher.getInstance(TRANSFORMATION);\r\n            cipher.init(cipherMode, secretKey);\r\n             \r\n            FileInputStream inputStream = new FileInputStream(inputFile);\r\n            byte[] inputBytes = new byte[(int) inputFile.length()];\r\n            inputStream.read(inputBytes);\r\n             \r\n            byte[] outputBytes = cipher.doFinal(inputBytes);\r\n             \r\n            FileOutputStream outputStream = new FileOutputStream(outputFile);\r\n            outputStream.write(outputBytes);\r\n             \r\n            inputStream.close();\r\n            outputStream.close();\r\n             \r\n        } catch (NoSuchPaddingException | NoSuchAlgorithmException\r\n                | InvalidKeyException | BadPaddingException\r\n                | IllegalBlockSizeException | IOException ex) {\r\n            throw new CryptoException(&quot;Error encrypting/decrypting file&quot;, ex);\r\n        }\r\n    }\r\n\r\n&gt; CryptoException.java\r\n\r\n    public class CryptoException extends Exception {\r\n \r\n    public CryptoException() {\r\n    }\r\n \r\n    public CryptoException(String message, Throwable throwable) {\r\n        super(message, throwable);\r\n    }}\r\n\r\n  [1]: https://web.archive.org/web/20220119143107/https://haritibcoblog.com/2016/11/22/java-lang-outofmemoryerror-types-and-causes/\r\n  [2]: https://stackoverflow.com/questions/34447037/encrypting-a-large-file-with-aes-using-java/39336692","title":"java encrypting large file cause java.lang.OutOfMemoryError: Java heap space,possible solutions","body":"<p>I am writing java program to encrypt video files,with small video files it performs as expected however when i try on a huge file approximately 800 Megabyte,it throws an exception\n<code>java.lang.OutOfMemoryError: Java heap space</code>.\nI have researched on the topic getting more information about the garbage collector from <a href=\"https://web.archive.org/web/20220119143107/https://haritibcoblog.com/2016/11/22/java-lang-outofmemoryerror-types-and-causes/\" rel=\"nofollow noreferrer\">here</a> and reviewing similar problems <a href=\"https://stackoverflow.com/questions/34447037/encrypting-a-large-file-with-aes-using-java/39336692\">here</a>. According to the best chosen answer how can you &quot;Encrypt a byte at a time&quot;: With block ciphers encryption is by the block (AES: 16-bytes)`.\nThe contents of my source code</p>\n<blockquote>\n<p>main.java</p>\n</blockquote>\n<pre><code>public static void main(String[] args) {\n    String key = &quot;Mary has one cat&quot;;\n    File inputFile = new File(&quot;C:\\\\Users\\\\xyz\\\\Music\\\\test\\\\-.mp4&quot;);\n    File encryptedFile = new File(&quot;C:\\\\Users\\\\xyz\\\\Music\\\\test\\\\-.mp4.encrypted&quot;);\n    File decryptedFile = new File(&quot;C:\\\\Users\\\\xyz\\\\Music\\\\test\\\\decrypted.mp4&quot;);\n\n    try {\n        CryptoUtils.encrypt(key, inputFile, encryptedFile);\n        CryptoUtils.decrypt(key, encryptedFile, decryptedFile);\n    } catch (CryptoException ex) {\n        System.out.println(ex.getMessage());\n        ex.printStackTrace();\n    }\n}\n</code></pre>\n<blockquote>\n<p>CryptoUtils.java</p>\n</blockquote>\n<pre><code> private static final String ALGORITHM = &quot;AES&quot;;\nprivate static final String TRANSFORMATION = &quot;AES&quot;;\n\npublic static void encrypt(String key, File inputFile, File outputFile)\n        throws CryptoException {\n    doCrypto(Cipher.ENCRYPT_MODE, key, inputFile, outputFile);\n}\n\npublic static void decrypt(String key, File inputFile, File outputFile)\n        throws CryptoException {\n    doCrypto(Cipher.DECRYPT_MODE, key, inputFile, outputFile);\n}\n\nprivate static void doCrypto(int cipherMode, String key, File inputFile,\n        File outputFile) throws CryptoException {\n    try {\n        Key secretKey = new SecretKeySpec(key.getBytes(), ALGORITHM);\n        Cipher cipher = Cipher.getInstance(TRANSFORMATION);\n        cipher.init(cipherMode, secretKey);\n         \n        FileInputStream inputStream = new FileInputStream(inputFile);\n        byte[] inputBytes = new byte[(int) inputFile.length()];\n        inputStream.read(inputBytes);\n         \n        byte[] outputBytes = cipher.doFinal(inputBytes);\n         \n        FileOutputStream outputStream = new FileOutputStream(outputFile);\n        outputStream.write(outputBytes);\n         \n        inputStream.close();\n        outputStream.close();\n         \n    } catch (NoSuchPaddingException | NoSuchAlgorithmException\n            | InvalidKeyException | BadPaddingException\n            | IllegalBlockSizeException | IOException ex) {\n        throw new CryptoException(&quot;Error encrypting/decrypting file&quot;, ex);\n    }\n}\n</code></pre>\n<blockquote>\n<p>CryptoException.java</p>\n</blockquote>\n<pre><code>public class CryptoException extends Exception {\n\npublic CryptoException() {\n}\n\npublic CryptoException(String message, Throwable throwable) {\n    super(message, throwable);\n}}\n</code></pre>\n"},{"tags":["java","jackson","yaml","snakeyaml"],"comments":[{"owner":{"account_id":305757,"reputation":1584,"user_id":5851520,"accept_rate":100,"display_name":"SusanW"},"score":0,"creation_date":1695206604,"post_id":77138735,"comment_id":135992317,"body_markdown":"@hc_dev although that&#39;s a good answer, there&#39;s little in the other question or its text about anchor extensions or overrides - it&#39;s all about anchors in arrays, which isn&#39;t the problem here. I spent most of last night looking for an answer and didn&#39;t find that - annoyingly, its mention of `&lt;&lt;` is buried in the code example, and you have to scroll right in an example to see the exception detail. If we close this, shall I go over there and edit the question to be more findable?","body":"@hc_dev although that&#39;s a good answer, there&#39;s little in the other question or its text about anchor extensions or overrides - it&#39;s all about anchors in arrays, which isn&#39;t the problem here. I spent most of last night looking for an answer and didn&#39;t find that - annoyingly, its mention of <code>&lt;&lt;</code> is buried in the code example, and you have to scroll right in an example to see the exception detail. If we close this, shall I go over there and edit the question to be more findable?"},{"owner":{"account_id":141151,"reputation":36461,"user_id":347964,"accept_rate":79,"display_name":"flyx"},"score":1,"creation_date":1695208933,"post_id":77138735,"comment_id":135992802,"body_markdown":"Closed questions stay findable so yours can still serve as pointer to the other question, I&#39;d say that&#39;s good enough","body":"Closed questions stay findable so yours can still serve as pointer to the other question, I&#39;d say that&#39;s good enough"},{"owner":{"account_id":305757,"reputation":1584,"user_id":5851520,"accept_rate":100,"display_name":"SusanW"},"score":0,"creation_date":1695209808,"post_id":77138735,"comment_id":135992994,"body_markdown":"@flyx Yes, of course - ok, cool thanks :-)","body":"@flyx Yes, of course - ok, cool thanks :-)"}],"answers":[{"tags":[],"owner":{"account_id":141151,"reputation":36461,"user_id":347964,"accept_rate":79,"display_name":"flyx"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1695196827,"creation_date":1695196827,"answer_id":77140429,"question_id":77138735,"body_markdown":"Jackson is known to [not handle references correctly](https://github.com/FasterXML/jackson-dataformats-text/issues/98).\r\n\r\nYou can use SnakeYAML directly which does support references and the merge key `&lt;&lt;`. Jackson uses SnakeYAML under the hood anyway but somehow screws this up.\r\n\r\nSnakeYAML has pretty much the same capabilities as Jackson so there isn&#39;t much of a reason why you&#39;d need to stick to Jackson.","title":"Jackson YAML: support for anchor extensions/overrides","body":"<p>Jackson is known to <a href=\"https://github.com/FasterXML/jackson-dataformats-text/issues/98\" rel=\"nofollow noreferrer\">not handle references correctly</a>.</p>\n<p>You can use SnakeYAML directly which does support references and the merge key <code>&lt;&lt;</code>. Jackson uses SnakeYAML under the hood anyway but somehow screws this up.</p>\n<p>SnakeYAML has pretty much the same capabilities as Jackson so there isn't much of a reason why you'd need to stick to Jackson.</p>\n"}],"owner":{"account_id":305757,"reputation":1584,"user_id":5851520,"accept_rate":100,"display_name":"SusanW"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":76,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1695208851,"accepted_answer_id":77140429,"answer_count":1,"score":1,"last_activity_date":1695196827,"creation_date":1695172533,"question_id":77138735,"body_markdown":"I&#39;m trying to use Jackson 2.15.2 `YAMLFactory` to parse the anchor extension syntax:\r\n\r\n    sections:\r\n    - &amp;packetInfo\r\n        name: packetInfo\r\n        description: information on a received UDP packet\r\n\r\nand then later:\r\n\r\n    sections:\r\n    -   &lt;&lt;: *packetInfo\r\n        description: something else\r\n\r\nBut I&#39;m getting:\r\n    `com.fasterxml.jackson.databind.exc.UnrecognizedPropertyException: Unrecognized field &quot;&lt;&lt;&quot; `, and it&#39;s giving all the signs of treating the `&lt;&lt;` as any other field name.\r\n\r\nIf I remove the `&lt;&lt;:` like this, it loads ok (without the option to override, of course), so the anchor/reference system is working:\r\n\r\n    sections:\r\n    -   *packetInfo\r\n\r\nDoes Jackson not support `&lt;&lt;:` extension/overrides? Or is there a Feature switch I need to turn on that I haven&#39;t found yet? I&#39;ve read that handling these is done by a schema, rather than the parser itself.\r\n\r\n\r\n","title":"Jackson YAML: support for anchor extensions/overrides","body":"<p>I'm trying to use Jackson 2.15.2 <code>YAMLFactory</code> to parse the anchor extension syntax:</p>\n<pre><code>sections:\n- &amp;packetInfo\n    name: packetInfo\n    description: information on a received UDP packet\n</code></pre>\n<p>and then later:</p>\n<pre><code>sections:\n-   &lt;&lt;: *packetInfo\n    description: something else\n</code></pre>\n<p>But I'm getting:\n<code>com.fasterxml.jackson.databind.exc.UnrecognizedPropertyException: Unrecognized field &quot;&lt;&lt;&quot; </code>, and it's giving all the signs of treating the <code>&lt;&lt;</code> as any other field name.</p>\n<p>If I remove the <code>&lt;&lt;:</code> like this, it loads ok (without the option to override, of course), so the anchor/reference system is working:</p>\n<pre><code>sections:\n-   *packetInfo\n</code></pre>\n<p>Does Jackson not support <code>&lt;&lt;:</code> extension/overrides? Or is there a Feature switch I need to turn on that I haven't found yet? I've read that handling these is done by a schema, rather than the parser itself.</p>\n"},{"tags":["java","serial-port","modbus"],"comments":[{"owner":{"account_id":7247195,"reputation":742,"user_id":5528725,"accept_rate":60,"display_name":"Thomas W."},"score":0,"creation_date":1694511847,"post_id":77082035,"comment_id":135897130,"body_markdown":"What exactly goes wrong? Is an exception thrown or are just the registers not written?","body":"What exactly goes wrong? Is an exception thrown or are just the registers not written?"},{"owner":{"account_id":29414824,"reputation":13,"user_id":22537897,"display_name":"Capitan Latinamerica"},"score":0,"creation_date":1694517234,"post_id":77082035,"comment_id":135898270,"body_markdown":"New variable of type Wreq = new WriteMultipleRegistersRequest(); doesn&#39;t accept the data I want to send. I don&#39;t understand where to write the value I want to pass","body":"New variable of type Wreq = new WriteMultipleRegistersRequest(); doesn&#39;t accept the data I want to send. I don&#39;t understand where to write the value I want to pass"}],"answers":[{"tags":[],"owner":{"account_id":7247195,"reputation":742,"user_id":5528725,"accept_rate":60,"display_name":"Thomas W."},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1694527084,"creation_date":1694518969,"answer_id":77088770,"question_id":77082035,"body_markdown":"Please give the following a try. I cannot reproduce it, because of the lack of a Modbus Serial setup.\r\n\r\nAccording to the API, the WriteMultipleRegistersRequest can be constructed with an array of Registers: https://jamod.sourceforge.net/api/net/wimpi/modbus/msg/WriteMultipleRegistersRequest.html#WriteMultipleRegistersRequest(int,%20net.wimpi.modbus.procimg.Register[])\r\n\r\nTherefore create an array of SimpleRegisteres and call the constructor\r\nhttps://jamod.sourceforge.net/api/net/wimpi/modbus/procimg/SimpleRegister.html\r\n\r\n...something like:\r\n\r\n    ...\r\n    final Register[] registers = {new SimpleRegister(42)};\r\n    Wreq = new  WriteMultipleRegistersRequest(ref, registers);\r\n    ...\r\n","title":"Java ModbusRTU writing registers","body":"<p>Please give the following a try. I cannot reproduce it, because of the lack of a Modbus Serial setup.</p>\n<p>According to the API, the WriteMultipleRegistersRequest can be constructed with an array of Registers: <a href=\"https://jamod.sourceforge.net/api/net/wimpi/modbus/msg/WriteMultipleRegistersRequest.html#WriteMultipleRegistersRequest(int,%20net.wimpi.modbus.procimg.Register%5B%5D)\" rel=\"nofollow noreferrer\">https://jamod.sourceforge.net/api/net/wimpi/modbus/msg/WriteMultipleRegistersRequest.html#WriteMultipleRegistersRequest(int,%20net.wimpi.modbus.procimg.Register[])</a></p>\n<p>Therefore create an array of SimpleRegisteres and call the constructor\n<a href=\"https://jamod.sourceforge.net/api/net/wimpi/modbus/procimg/SimpleRegister.html\" rel=\"nofollow noreferrer\">https://jamod.sourceforge.net/api/net/wimpi/modbus/procimg/SimpleRegister.html</a></p>\n<p>...something like:</p>\n<pre><code>...\nfinal Register[] registers = {new SimpleRegister(42)};\nWreq = new  WriteMultipleRegistersRequest(ref, registers);\n...\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29414824,"reputation":13,"user_id":22537897,"display_name":"Capitan Latinamerica"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695196648,"creation_date":1695196648,"answer_id":77140409,"question_id":77082035,"body_markdown":"For those who need the function of recording data via Modbus-RTU. Here is the working code with comments in Russian.\r\n**Thanks for the help Thomas W.**\r\nI have shown an example of writing two registers in the int format; we send the system time to the device\r\n\r\n    public static void WriteTime(int Low, int High) throws IOException {\r\n\t\tSerialConnection con = null;\t\t\t\t//Создаём пока пустое соединение\r\n\t    ModbusSerialTransaction trans = null;\t\t//Создаём пустую транзакцию\r\n\t    WriteMultipleRegistersRequest Wreq = null; \t//Создаём пустой запрос\r\n   \r\n\t    int unitid = 1; //идентификатор юнита, с которым мы будем разговаривать\r\n\t    int ref = 55; //ссылка, с чего начать читать\r\n\t    int repeat = 2; //цикл для повторения транзакции\r\n\t    \r\n\t /* Настройка параметров порта */   \r\n\t    SerialParameters params = new SerialParameters();\t\t\t\t\t\t//Создаём объект с параметрами\r\n\t    params.setPortName(SelectCOM.ComPortBox.getSelectedItem().toString());\t//Задать порт\r\n\t    params.setBaudRate(SelectCOM.BaudRateBox.getSelectedItem().toString());\t//Задать скорость\r\n\t    params.setDatabits(SelectCOM.DataBitBox.getSelectedItem().toString());\t//Задать количество бит данных\r\n\t    params.setParity(SelectCOM.ParityBox.getSelectedItem().toString());\t\t//Задать паритет\r\n\t    params.setStopbits(SelectCOM.StopBitBox.getSelectedItem().toString());\t//Задать стопбит\r\n\t    params.setEncoding(&quot;rtu&quot;);\t\t\t\t\t\t\t\t\t\t\t\t//Задать кодировку\r\n\t    params.setEcho(false);\t\t\t\t\t\t\t\t\t\t\t\t\t//Выключить эхо\r\n\r\n\t    // Открываем соединение\r\n\t    con = new SerialConnection(params);\t\t\t\t\t\t\t\t\t\t//Открыть соединение с заданными параметрами порта\r\n\t    try {\r\n\t        con.open();\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//Открыть порт\r\n\t    } catch (Exception e) {\r\n\t        e.printStackTrace();\r\n\t    }\r\n\t // подготавливаем запрос\r\n\t    final Register[] registers = {new SimpleRegister(Low), new SimpleRegister(High)};\t\t\t// Создаём регистр со значением, которое нужно передать в устройство\r\n\t    Wreq = new  WriteMultipleRegistersRequest(ref, registers);\t\t\t// Создаём запрос с параметрами: (ссылка на регистр; значение, которое туда надо передать)\r\n\t    Wreq.setUnitID(unitid);\t\t\t\t\t\t\t\t\t\t\t\t// Задать идентификатор устройства\r\n\t    Wreq.setHeadless();\t\t\t\t\t\t\t\t\t\t\t\t\t// Сделать его без головы\r\n\t    \r\n\t    trans = new ModbusSerialTransaction(con);\t\t\t\t\t\t\t// Создать Транзакцию с параметрами открытого соединения\r\n\t    trans.setRequest(Wreq);\t\t\t\t\t\t\t\t\t\t\t\t// Положить запрос в транзакцию\r\n\r\n\t    // Выполнить транзакцию нужное количество раз (см. repeat)\r\n\t    int k = 0;\t\t// Счётчик циклов\r\n\t    do {\r\n\t        try {\r\n\t            trans.execute();\t\t\t// Выполнить транзакцию\r\n\t        } catch (ModbusException e) {\r\n\t            e.printStackTrace();\r\n\t        }\r\n\t        k++;\t\t\t\t\t\t\t//Увеличить счётчик попыток\r\n\t    } while (k &lt; repeat);\r\n\t    con.close();\t\t\t\t\t\t//Закрыть соединение\r\n\t}","title":"Java ModbusRTU writing registers","body":"<p>For those who need the function of recording data via Modbus-RTU. Here is the working code with comments in Russian.\n<strong>Thanks for the help Thomas W.</strong>\nI have shown an example of writing two registers in the int format; we send the system time to the device</p>\n<pre><code>public static void WriteTime(int Low, int High) throws IOException {\n    SerialConnection con = null;                //Создаём пока пустое соединение\n    ModbusSerialTransaction trans = null;       //Создаём пустую транзакцию\n    WriteMultipleRegistersRequest Wreq = null;  //Создаём пустой запрос\n\n    int unitid = 1; //идентификатор юнита, с которым мы будем разговаривать\n    int ref = 55; //ссылка, с чего начать читать\n    int repeat = 2; //цикл для повторения транзакции\n    \n /* Настройка параметров порта */   \n    SerialParameters params = new SerialParameters();                       //Создаём объект с параметрами\n    params.setPortName(SelectCOM.ComPortBox.getSelectedItem().toString());  //Задать порт\n    params.setBaudRate(SelectCOM.BaudRateBox.getSelectedItem().toString()); //Задать скорость\n    params.setDatabits(SelectCOM.DataBitBox.getSelectedItem().toString());  //Задать количество бит данных\n    params.setParity(SelectCOM.ParityBox.getSelectedItem().toString());     //Задать паритет\n    params.setStopbits(SelectCOM.StopBitBox.getSelectedItem().toString());  //Задать стопбит\n    params.setEncoding(&quot;rtu&quot;);                                              //Задать кодировку\n    params.setEcho(false);                                                  //Выключить эхо\n\n    // Открываем соединение\n    con = new SerialConnection(params);                                     //Открыть соединение с заданными параметрами порта\n    try {\n        con.open();                                                         //Открыть порт\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n // подготавливаем запрос\n    final Register[] registers = {new SimpleRegister(Low), new SimpleRegister(High)};           // Создаём регистр со значением, которое нужно передать в устройство\n    Wreq = new  WriteMultipleRegistersRequest(ref, registers);          // Создаём запрос с параметрами: (ссылка на регистр; значение, которое туда надо передать)\n    Wreq.setUnitID(unitid);                                             // Задать идентификатор устройства\n    Wreq.setHeadless();                                                 // Сделать его без головы\n    \n    trans = new ModbusSerialTransaction(con);                           // Создать Транзакцию с параметрами открытого соединения\n    trans.setRequest(Wreq);                                             // Положить запрос в транзакцию\n\n    // Выполнить транзакцию нужное количество раз (см. repeat)\n    int k = 0;      // Счётчик циклов\n    do {\n        try {\n            trans.execute();            // Выполнить транзакцию\n        } catch (ModbusException e) {\n            e.printStackTrace();\n        }\n        k++;                            //Увеличить счётчик попыток\n    } while (k &lt; repeat);\n    con.close();                        //Закрыть соединение\n}\n</code></pre>\n"}],"owner":{"account_id":29414824,"reputation":13,"user_id":22537897,"display_name":"Capitan Latinamerica"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77088770,"answer_count":2,"score":1,"last_activity_date":1695196648,"creation_date":1694438780,"question_id":77082035,"body_markdown":"I need to write 2 registers of slave device using serialport, protocol ModbusRTU. I can read all registers using libs net.wimpi.modbus. I need to write the current time value into the holding register, which is located at address 55 in the device. I am reading the values using the following method\r\n\r\n```\r\npublic static void MGo() {\r\n\t\tSerialConnection con = null;\r\n\t    ModbusSerialTransaction trans = null;\r\n\t    ReadInputRegistersRequest req = null; //the request\r\n\t    ReadInputRegistersResponse res = null; //the response\r\n\t    \r\n\t    ReadMultipleRegistersRequest Mreq = null;\r\n\t    ReadMultipleRegistersResponse Mres = null;\r\n\r\n\t    int unitid = 1; //идентификатор юнита, с которым мы будем разговаривать\r\n\t    int ref = 0; //ссылка, с чего начать читать\r\n\t    int count = 57; //количество IR для чтения\r\n\t    int repeat = 1; //цикл для повторения транзакции\r\n\r\n\t    //ModbusCoupler.createModbusCoupler(null);\r\n\t    ModbusCoupler.getReference().setUnitID(1);\r\n\r\n\t    SerialParameters params = new SerialParameters();\r\n\t    params.setPortName(SelectCOM.ComPortBox.getSelectedItem().toString());\r\n\t    params.setBaudRate(SelectCOM.BaudRateBox.getSelectedItem().toString());\r\n\t    params.setDatabits(SelectCOM.DataBitBox.getSelectedItem().toString());\r\n\t    params.setParity(SelectCOM.ParityBox.getSelectedItem().toString());\r\n\t    params.setStopbits(SelectCOM.StopBitBox.getSelectedItem().toString());\r\n\t    params.setEncoding(&quot;rtu&quot;);\r\n\t    params.setEcho(false);\r\n\r\n\t    // Открываем соединение\r\n\t    con = new SerialConnection(params);\r\n\t    try {\r\n\t        con.open();\r\n//\t        System.out.println(con.getSerialPort());\r\n\t    } catch (Exception e) {\r\n\t        e.printStackTrace();\r\n\t    }\r\n\t // подготавливаем запрос\r\n\t    Mreq = new ReadMultipleRegistersRequest(ref, count);\r\n\t    Mreq.setUnitID(unitid);\r\n\t    Mreq.setHeadless();\r\n\r\n\t    trans = new ModbusSerialTransaction(con);\r\n\t    trans.setRequest(Mreq);\r\n\r\n\t    //7. Execute the transaction repeat times\r\n\t    int k = 0;\r\n\t    do {\r\n\t        try {\r\n\t            trans.execute();\r\n\t        } catch (ModbusException e) {\r\n\t            e.printStackTrace();\r\n\t        }\r\n/*\t        res = (ReadInputRegistersResponse) trans.getResponse();*/\r\n\t        Mres = (ReadMultipleRegistersResponse) trans.getResponse();\r\n\t        for (int n = 0; n &lt; Mres.getWordCount(); n++) {\r\n\t        \tHoldingRegs[n] = Mres.getRegisterValue(n);\r\n\t        }\r\n\t        k++;\r\n\t    } while (k &lt; repeat);\r\n\t\r\n\r\n\t    con.close();\r\n\t\r\n\t}\r\n```\r\n\r\n\r\nI tried to write a similar method for WriteMultipleRegistersRequest\r\n\r\n```\r\npublic static void WriteRTU(int RegAdr) throws IOException {\r\n\t\tSerialConnection con = null;\r\n\t    ModbusSerialTransaction trans = null;\r\n\t    WriteMultipleRegistersRequest Wreq = null; //the request\r\n   \r\n\r\n\t    int unitid = 1; //идентификатор юнита, с которым мы будем разговаривать\r\n\t    int ref = RegAdr; //ссылка, с чего начать читать\r\n\t    int count = 57; //количество IR для чтения\r\n\t    int repeat = 1; //цикл для повторения транзакции\r\n\r\n\t    ModbusCoupler.getReference().setUnitID(1);\r\n\r\n\t    SerialParameters params = new SerialParameters();\r\n\t    params.setPortName(SelectCOM.ComPortBox.getSelectedItem().toString());\r\n\t    params.setBaudRate(SelectCOM.BaudRateBox.getSelectedItem().toString());\r\n\t    params.setDatabits(SelectCOM.DataBitBox.getSelectedItem().toString());\r\n\t    params.setParity(SelectCOM.ParityBox.getSelectedItem().toString());\r\n\t    params.setStopbits(SelectCOM.StopBitBox.getSelectedItem().toString());\r\n\t    params.setEncoding(&quot;rtu&quot;);\r\n\t    params.setEcho(false);\r\n\r\n\t    // Открываем соединение\r\n\t    con = new SerialConnection(params);\r\n\t    try {\r\n\t        con.open();\r\n//\t        System.out.println(con.getSerialPort());\r\n\t    } catch (Exception e) {\r\n\t        e.printStackTrace();\r\n\t    }\r\n\t // подготавливаем запрос\r\n\t    Wreq = new  WriteMultipleRegistersRequest();\r\n\t    Wreq.setUnitID(unitid);\r\n\t    Wreq.setHeadless();\r\n\t    ModbusRequest.createModbusRequest(0x05);\r\n\r\n\t    trans = new ModbusSerialTransaction(con);\r\n\t    trans.setRequest(Wreq);\r\n\r\n\t    //7. Execute the transaction repeat times\r\n\t    int k = 0;\r\n\t    do {\r\n\t        try {\r\n\t            trans.execute();\r\n\t        } catch (ModbusException e) {\r\n\t            e.printStackTrace();\r\n\t        }\r\n\r\n\t        k++;\r\n\t    } while (k &lt; repeat);\r\n\t    con.close();\r\n\t\r\n\t}\r\n```\r\nIt does&#39;nt working","title":"Java ModbusRTU writing registers","body":"<p>I need to write 2 registers of slave device using serialport, protocol ModbusRTU. I can read all registers using libs net.wimpi.modbus. I need to write the current time value into the holding register, which is located at address 55 in the device. I am reading the values using the following method</p>\n<pre><code>public static void MGo() {\n        SerialConnection con = null;\n        ModbusSerialTransaction trans = null;\n        ReadInputRegistersRequest req = null; //the request\n        ReadInputRegistersResponse res = null; //the response\n        \n        ReadMultipleRegistersRequest Mreq = null;\n        ReadMultipleRegistersResponse Mres = null;\n\n        int unitid = 1; //идентификатор юнита, с которым мы будем разговаривать\n        int ref = 0; //ссылка, с чего начать читать\n        int count = 57; //количество IR для чтения\n        int repeat = 1; //цикл для повторения транзакции\n\n        //ModbusCoupler.createModbusCoupler(null);\n        ModbusCoupler.getReference().setUnitID(1);\n\n        SerialParameters params = new SerialParameters();\n        params.setPortName(SelectCOM.ComPortBox.getSelectedItem().toString());\n        params.setBaudRate(SelectCOM.BaudRateBox.getSelectedItem().toString());\n        params.setDatabits(SelectCOM.DataBitBox.getSelectedItem().toString());\n        params.setParity(SelectCOM.ParityBox.getSelectedItem().toString());\n        params.setStopbits(SelectCOM.StopBitBox.getSelectedItem().toString());\n        params.setEncoding(&quot;rtu&quot;);\n        params.setEcho(false);\n\n        // Открываем соединение\n        con = new SerialConnection(params);\n        try {\n            con.open();\n//          System.out.println(con.getSerialPort());\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n     // подготавливаем запрос\n        Mreq = new ReadMultipleRegistersRequest(ref, count);\n        Mreq.setUnitID(unitid);\n        Mreq.setHeadless();\n\n        trans = new ModbusSerialTransaction(con);\n        trans.setRequest(Mreq);\n\n        //7. Execute the transaction repeat times\n        int k = 0;\n        do {\n            try {\n                trans.execute();\n            } catch (ModbusException e) {\n                e.printStackTrace();\n            }\n/*          res = (ReadInputRegistersResponse) trans.getResponse();*/\n            Mres = (ReadMultipleRegistersResponse) trans.getResponse();\n            for (int n = 0; n &lt; Mres.getWordCount(); n++) {\n                HoldingRegs[n] = Mres.getRegisterValue(n);\n            }\n            k++;\n        } while (k &lt; repeat);\n    \n\n        con.close();\n    \n    }\n</code></pre>\n<p>I tried to write a similar method for WriteMultipleRegistersRequest</p>\n<pre><code>public static void WriteRTU(int RegAdr) throws IOException {\n        SerialConnection con = null;\n        ModbusSerialTransaction trans = null;\n        WriteMultipleRegistersRequest Wreq = null; //the request\n   \n\n        int unitid = 1; //идентификатор юнита, с которым мы будем разговаривать\n        int ref = RegAdr; //ссылка, с чего начать читать\n        int count = 57; //количество IR для чтения\n        int repeat = 1; //цикл для повторения транзакции\n\n        ModbusCoupler.getReference().setUnitID(1);\n\n        SerialParameters params = new SerialParameters();\n        params.setPortName(SelectCOM.ComPortBox.getSelectedItem().toString());\n        params.setBaudRate(SelectCOM.BaudRateBox.getSelectedItem().toString());\n        params.setDatabits(SelectCOM.DataBitBox.getSelectedItem().toString());\n        params.setParity(SelectCOM.ParityBox.getSelectedItem().toString());\n        params.setStopbits(SelectCOM.StopBitBox.getSelectedItem().toString());\n        params.setEncoding(&quot;rtu&quot;);\n        params.setEcho(false);\n\n        // Открываем соединение\n        con = new SerialConnection(params);\n        try {\n            con.open();\n//          System.out.println(con.getSerialPort());\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n     // подготавливаем запрос\n        Wreq = new  WriteMultipleRegistersRequest();\n        Wreq.setUnitID(unitid);\n        Wreq.setHeadless();\n        ModbusRequest.createModbusRequest(0x05);\n\n        trans = new ModbusSerialTransaction(con);\n        trans.setRequest(Wreq);\n\n        //7. Execute the transaction repeat times\n        int k = 0;\n        do {\n            try {\n                trans.execute();\n            } catch (ModbusException e) {\n                e.printStackTrace();\n            }\n\n            k++;\n        } while (k &lt; repeat);\n        con.close();\n    \n    }\n</code></pre>\n<p>It does'nt working</p>\n"},{"tags":["java","spring","spring-boot","spring-boot-starter"],"answers":[{"tags":[],"owner":{"account_id":11512222,"reputation":87,"user_id":8436642,"display_name":"Nico S."},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695196644,"creation_date":1695196644,"answer_id":77140408,"question_id":77097758,"body_markdown":"We do the same currently by using a application-custom.yml in our lib and in the yml-file we seperate in default dev and so on...\r\n\r\nWhen you then activate the custom profile with spring.profiles.include in your main app spring picks up the applicaiton-custom.yml in your dependency","title":"Load custom starter properties files based on profile","body":"<p>We do the same currently by using a application-custom.yml in our lib and in the yml-file we seperate in default dev and so on...</p>\n<p>When you then activate the custom profile with spring.profiles.include in your main app spring picks up the applicaiton-custom.yml in your dependency</p>\n"}],"owner":{"account_id":7844116,"reputation":912,"user_id":5929690,"accept_rate":50,"display_name":"Rahul Sharma"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1695196644,"creation_date":1694613338,"question_id":77097758,"body_markdown":"With spring boot v2.3.4 I could use `ConfigFileApplicationListener` to load properties files from my custom starters by writing a environment post processor like\r\n```\r\npublic class StarterEnvironmentPostProcessor implements EnvironmentPostProcessor {\r\n    private final ConfigFileApplicationListener environmentPostProcessor = new ConfigFileApplicationListener();\r\n\r\n    public StarterEnvironmentPostProcessor(String name) {\r\n        environmentPostProcessor.setSearchNames(name);\r\n    }\r\n\r\n    @Override\r\n    public void postProcessEnvironment(ConfigurableEnvironment environment, SpringApplication application) {\r\n        environmentPostProcessor.postProcessEnvironment(environment, application);\r\n    }\r\n}\r\n```\r\n\r\nAnd then from each starter I could subclass this environment post processor like\r\n```\r\npublic class MyStarterEnvironmentPostProcessor extends StarterEnvironmentPostProcessor {\r\n\r\n    public MyStarterEnvironmentPostProcessor() {\r\n        super(&quot;my-starter&quot;);\r\n    }\r\n}\r\n```\r\nThis would result in properties being loaded appropriately i.e. if I ran the application that consumes this starter, with profile `dev`, then properties would be loaded from `my-starter.properties`, `my-starter-dev.properties`, `application.properties` and `application-dev.properties`, where the first two come from the starter and the last 2 come from the consuming project.\r\n\r\n`ConfigFileApplicationListener` has been removed in spring boot v3.0.\r\nThe deprecation warning on the class suggests to use `ConfigDataEnvironmentPostProcessor` instead.\r\n\r\nAfter debugging I found that `StandardConfigDataLocationResolver` is used to resolve the properties files to be loaded.\r\nIt constructs config file names like\r\n```\r\nString[] configNames = binder.bind(CONFIG_NAME_PROPERTY, String[].class).orElse(DEFAULT_CONFIG_NAMES);\r\n```\r\nmeaning there isn&#39;t a way for me to inject `my-starter` config name here.\r\nI do not want the project that consumes the custom starters (there are multiple custom starters) to be aware of the config locations.\r\nRather I want the auto configured custom starters to be responsible for loading the appropriate properties.\r\n\r\nHow can I achieve this in spring boot v3.0?","title":"Load custom starter properties files based on profile","body":"<p>With spring boot v2.3.4 I could use <code>ConfigFileApplicationListener</code> to load properties files from my custom starters by writing a environment post processor like</p>\n<pre><code>public class StarterEnvironmentPostProcessor implements EnvironmentPostProcessor {\n    private final ConfigFileApplicationListener environmentPostProcessor = new ConfigFileApplicationListener();\n\n    public StarterEnvironmentPostProcessor(String name) {\n        environmentPostProcessor.setSearchNames(name);\n    }\n\n    @Override\n    public void postProcessEnvironment(ConfigurableEnvironment environment, SpringApplication application) {\n        environmentPostProcessor.postProcessEnvironment(environment, application);\n    }\n}\n</code></pre>\n<p>And then from each starter I could subclass this environment post processor like</p>\n<pre><code>public class MyStarterEnvironmentPostProcessor extends StarterEnvironmentPostProcessor {\n\n    public MyStarterEnvironmentPostProcessor() {\n        super(&quot;my-starter&quot;);\n    }\n}\n</code></pre>\n<p>This would result in properties being loaded appropriately i.e. if I ran the application that consumes this starter, with profile <code>dev</code>, then properties would be loaded from <code>my-starter.properties</code>, <code>my-starter-dev.properties</code>, <code>application.properties</code> and <code>application-dev.properties</code>, where the first two come from the starter and the last 2 come from the consuming project.</p>\n<p><code>ConfigFileApplicationListener</code> has been removed in spring boot v3.0.\nThe deprecation warning on the class suggests to use <code>ConfigDataEnvironmentPostProcessor</code> instead.</p>\n<p>After debugging I found that <code>StandardConfigDataLocationResolver</code> is used to resolve the properties files to be loaded.\nIt constructs config file names like</p>\n<pre><code>String[] configNames = binder.bind(CONFIG_NAME_PROPERTY, String[].class).orElse(DEFAULT_CONFIG_NAMES);\n</code></pre>\n<p>meaning there isn't a way for me to inject <code>my-starter</code> config name here.\nI do not want the project that consumes the custom starters (there are multiple custom starters) to be aware of the config locations.\nRather I want the auto configured custom starters to be responsible for loading the appropriate properties.</p>\n<p>How can I achieve this in spring boot v3.0?</p>\n"},{"tags":["java","spring","rest"],"comments":[{"owner":{"account_id":2390644,"reputation":4058,"user_id":2090555,"accept_rate":83,"display_name":"Himanshu Bhardwaj"},"score":0,"creation_date":1545111495,"post_id":53826462,"comment_id":94502450,"body_markdown":"This question will get closed, if you don&#39;t put in clear details what you are asking.","body":"This question will get closed, if you don&#39;t put in clear details what you are asking."}],"answers":[{"tags":[],"owner":{"account_id":7084651,"reputation":447,"user_id":5421812,"display_name":"isudarsan"},"down_vote_count":4,"up_vote_count":0,"is_accepted":false,"score":-4,"last_activity_date":1545111204,"creation_date":1545111204,"answer_id":53826921,"question_id":53826462,"body_markdown":"    HttpStatus.OK.value() will return the integer value of the status code.\r\nProbably this will help your query, this is from `org.springframework.http` package","title":"Any method to get constant for HTTP and HTTPS values","body":"<pre><code>HttpStatus.OK.value() will return the integer value of the status code.\n</code></pre>\n\n<p>Probably this will help your query, this is from <code>org.springframework.http</code> package</p>\n"},{"tags":[],"owner":{"account_id":239878,"reputation":300,"user_id":509756,"display_name":"luskwater"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1629400739,"creation_date":1629400739,"answer_id":68853500,"question_id":53826462,"body_markdown":"As far as I can tell (as of JDK 8 which I have handy), the best you can do _within_ the Java JDK is \r\n\r\n`javax.print.attribute.standard.ReferenceUriSchemesSupported`\r\n\r\nwhich provides a number of URI-Schemes:\r\n\r\n    import javax.print.attribute.standard.ReferenceUriSchemesSupported;\r\n    // ...\r\n    System.out.println(ReferenceUriSchemesSupported.HTTPS); // =&gt; &quot;https&quot;\r\n\r\nOf course, it also has `GOPHER`, `NNTP`, `NEWS`, and a few other out-of-date schemes, but it _does_ provide what you want.\r\n\r\nOther answers on the web suggest other frameworks, many of which _do_ define the two protocols.\r\n\r\nOtherwise, you just need something like this:\r\n\r\n    package demo;\r\n\r\n    public enum Scheme {\r\n        HTTP(&quot;http&quot;),\r\n        HTTPS(&quot;https&quot;);\r\n        private final String scheme;\r\n\r\n        private Scheme(String scheme) {\r\n            this.scheme = scheme;\r\n        }\r\n\r\n        @Override\r\n        public String toString() {\r\n            return scheme;\r\n        }\r\n    }\r\n","title":"Any method to get constant for HTTP and HTTPS values","body":"<p>As far as I can tell (as of JDK 8 which I have handy), the best you can do <em>within</em> the Java JDK is</p>\n<p><code>javax.print.attribute.standard.ReferenceUriSchemesSupported</code></p>\n<p>which provides a number of URI-Schemes:</p>\n<pre><code>import javax.print.attribute.standard.ReferenceUriSchemesSupported;\n// ...\nSystem.out.println(ReferenceUriSchemesSupported.HTTPS); // =&gt; &quot;https&quot;\n</code></pre>\n<p>Of course, it also has <code>GOPHER</code>, <code>NNTP</code>, <code>NEWS</code>, and a few other out-of-date schemes, but it <em>does</em> provide what you want.</p>\n<p>Other answers on the web suggest other frameworks, many of which <em>do</em> define the two protocols.</p>\n<p>Otherwise, you just need something like this:</p>\n<pre><code>package demo;\n\npublic enum Scheme {\n    HTTP(&quot;http&quot;),\n    HTTPS(&quot;https&quot;);\n    private final String scheme;\n\n    private Scheme(String scheme) {\n        this.scheme = scheme;\n    }\n\n    @Override\n    public String toString() {\n        return scheme;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9267,"reputation":13505,"user_id":17035,"accept_rate":100,"display_name":"An̲̳̳drew"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1645644430,"creation_date":1645644430,"answer_id":71242968,"question_id":53826462,"body_markdown":"A little clunky, but these work.\r\n\r\n`String.valueOf(org.apache.commons.httpclient.HttpURL.DEFAULT_SCHEME)`\r\n`String.valueOf(org.apache.commons.httpclient.HttpsURL.DEFAULT_SCHEME)`\r\n\r\nThere&#39;s also `org.mortbay.jetty.HttpSchemes.HTTP` and `org.mortbay.jetty.HttpSchemes.HTTPS`.","title":"Any method to get constant for HTTP and HTTPS values","body":"<p>A little clunky, but these work.</p>\n<p><code>String.valueOf(org.apache.commons.httpclient.HttpURL.DEFAULT_SCHEME)</code>\n<code>String.valueOf(org.apache.commons.httpclient.HttpsURL.DEFAULT_SCHEME)</code></p>\n<p>There's also <code>org.mortbay.jetty.HttpSchemes.HTTP</code> and <code>org.mortbay.jetty.HttpSchemes.HTTPS</code>.</p>\n"},{"tags":[],"owner":{"account_id":13705513,"reputation":11,"user_id":9889270,"display_name":"Sachin Sharma"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695195847,"creation_date":1695195847,"answer_id":77140321,"question_id":53826462,"body_markdown":"In Apache HttpClient, we have the ENUM UriScheme (org.apache.hc.core5.http.UriScheme)","title":"Any method to get constant for HTTP and HTTPS values","body":"<p>In Apache HttpClient, we have the ENUM UriScheme (org.apache.hc.core5.http.UriScheme)</p>\n"}],"owner":{"account_id":10643013,"reputation":300,"user_id":7837411,"accept_rate":0,"display_name":"Bhawna Joshi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2116,"favorite_count":0,"down_vote_count":1,"up_vote_count":4,"answer_count":4,"score":3,"last_activity_date":1695195847,"creation_date":1545107836,"question_id":53826462,"body_markdown":"Is there a class whene HTTP and HTTPs constant value is defined. As of now I have created a custom class.\r\n\r\n       public static class UrlConstants {\r\n\r\n        private UrlConstants() {\r\n            super();\r\n        }\r\n\r\n        /** The Constant HTTP. */\r\n        public static final String HTTP = &quot;http&quot;;\r\n    }","title":"Any method to get constant for HTTP and HTTPS values","body":"<p>Is there a class whene HTTP and HTTPs constant value is defined. As of now I have created a custom class.</p>\n\n<pre><code>   public static class UrlConstants {\n\n    private UrlConstants() {\n        super();\n    }\n\n    /** The Constant HTTP. */\n    public static final String HTTP = \"http\";\n}\n</code></pre>\n"},{"tags":["java","eclipse","maven","java-10"],"comments":[{"owner":{"account_id":10098519,"reputation":5323,"user_id":7463126,"display_name":"Alan Bateman"},"score":1,"creation_date":1530254132,"post_id":51094274,"comment_id":89178991,"body_markdown":"I don&#39;t know anything about Eclipse but the classes you list are in the java.xml module. If you were previously deploying xml-apis-1.4.01 on the class path then I assume the classes were never actually loaded from that JAR file, they were loaded (and continue to be loaded) from the JDK. Does your project build/run outside of Eclipse?","body":"I don&#39;t know anything about Eclipse but the classes you list are in the java.xml module. If you were previously deploying xml-apis-1.4.01 on the class path then I assume the classes were never actually loaded from that JAR file, they were loaded (and continue to be loaded) from the JDK. Does your project build/run outside of Eclipse?"},{"owner":{"account_id":61330,"reputation":4234,"user_id":182837,"accept_rate":62,"display_name":"Carsten"},"score":0,"creation_date":1530256577,"post_id":51094274,"comment_id":89180125,"body_markdown":"Yes, a maven command line build, or even a explicit maven build within Eclipse both work. It&#39;s just the Eclipse built-in build that fails.","body":"Yes, a maven command line build, or even a explicit maven build within Eclipse both work. It&#39;s just the Eclipse built-in build that fails."},{"owner":{"account_id":13796,"reputation":19353,"user_id":27905,"display_name":"nitind"},"score":0,"creation_date":1530257862,"post_id":51094274,"comment_id":89180855,"body_markdown":"You have to use Oxygen.1a or newer, the original Oxygen release simply doesn&#39;t support Jigsaw. Your best bet is to stay on Photon while you try to figure this out. As a Maven project, shouldn&#39;t you be setting compiler versions in the `pom.xml`?","body":"You have to use Oxygen.1a or newer, the original Oxygen release simply doesn&#39;t support Jigsaw. Your best bet is to stay on Photon while you try to figure this out. As a Maven project, shouldn&#39;t you be setting compiler versions in the <code>pom.xml</code>?"},{"owner":{"account_id":61330,"reputation":4234,"user_id":182837,"accept_rate":62,"display_name":"Carsten"},"score":0,"creation_date":1530410119,"post_id":51094274,"comment_id":89225296,"body_markdown":"@nitind pom.xml sets the compiier to 10, but you can overwrite this in the Eclipse build preferences.","body":"@nitind pom.xml sets the compiier to 10, but you can overwrite this in the Eclipse build preferences."},{"owner":{"account_id":5853491,"reputation":8043,"user_id":4611488,"display_name":"Stephan Herrmann"},"score":0,"creation_date":1545091465,"post_id":51094274,"comment_id":94498382,"body_markdown":"@AlanBateman are you aware of any excuse why `javac` would be allowed to accept a package that is not uniquely visible? (see also my answer).  I could not find anything that would define named vs. unnamed module conflicts as being exempted from the rule. Am I missing s.t.?","body":"@AlanBateman are you aware of any excuse why <code>javac</code> would be allowed to accept a package that is not uniquely visible? (see also my answer).  I could not find anything that would define named vs. unnamed module conflicts as being exempted from the rule. Am I missing s.t.?"},{"owner":{"account_id":10098519,"reputation":5323,"user_id":7463126,"display_name":"Alan Bateman"},"score":1,"creation_date":1545118942,"post_id":51094274,"comment_id":94505150,"body_markdown":"Stephan - can you bring your question to to jigsaw-dev?","body":"Stephan - can you bring your question to to jigsaw-dev?"},{"owner":{"account_id":5853491,"reputation":8043,"user_id":4611488,"display_name":"Stephan Herrmann"},"score":0,"creation_date":1545160228,"post_id":51094274,"comment_id":94527415,"body_markdown":"@AlanBateman, done, see http://mail.openjdk.java.net/pipermail/jigsaw-dev/2018-December/014076.html (I didn&#39;t see your reply earlier since you didn&#39;t &quot;mention&quot; me).","body":"@AlanBateman, done, see <a href=\"http://mail.openjdk.java.net/pipermail/jigsaw-dev/2018-December/014076.html\" rel=\"nofollow noreferrer\">mail.openjdk.java.net/pipermail/jigsaw-dev/2018-December/&hellip;</a> (I didn&#39;t see your reply earlier since you didn&#39;t &quot;mention&quot; me)."},{"owner":{"account_id":4218123,"reputation":9899,"user_id":3453898,"accept_rate":75,"display_name":"pixel"},"score":0,"creation_date":1635279152,"post_id":51094274,"comment_id":123253763,"body_markdown":"I am having same issue in 2021, Eclipse 2021-03, OpenJDK 11 and Oracle JDK11.  I read below answer and it is great answer but I dont know how to fix it, specifically refering to Solution #3 provided by @StephanHerrmann.  The answer is great but I wish there were more details, I was not able to follow with my version of Eclipse.","body":"I am having same issue in 2021, Eclipse 2021-03, OpenJDK 11 and Oracle JDK11.  I read below answer and it is great answer but I dont know how to fix it, specifically refering to Solution #3 provided by @StephanHerrmann.  The answer is great but I wish there were more details, I was not able to follow with my version of Eclipse."}],"answers":[{"tags":[],"owner":{"account_id":11382286,"reputation":1591,"user_id":8344882,"display_name":"gagan singh"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1530248217,"creation_date":1530248217,"answer_id":51094559,"question_id":51094274,"body_markdown":"jdk 9+ brought in changes related to project jigsaw. JDK was broken down into various modules and some modules, javaee, jaxb and xml related, are no more loaded by default. You should add these to your maven build directly, instead of expecting them to be in jre classpath. see this [SO question](https://stackoverflow.com/questions/43574426/how-to-resolve-java-lang-noclassdeffounderror-javax-xml-bind-jaxbexception-in-j/46455026)","title":"Eclipse can&#39;t find XML related classes after switching build path to JDK 10","body":"<p>jdk 9+ brought in changes related to project jigsaw. JDK was broken down into various modules and some modules, javaee, jaxb and xml related, are no more loaded by default. You should add these to your maven build directly, instead of expecting them to be in jre classpath. see this <a href=\"https://stackoverflow.com/questions/43574426/how-to-resolve-java-lang-noclassdeffounderror-javax-xml-bind-jaxbexception-in-j/46455026\">SO question</a></p>\n"},{"tags":[],"owner":{"account_id":184786,"reputation":18896,"user_id":421049,"accept_rate":50,"display_name":"Garret Wilson"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1544466914,"creation_date":1544466914,"answer_id":53711657,"question_id":51094274,"body_markdown":"This seems to have been reported as [Eclipse Bug 536928][1]. Maybe if everyone were to go vote on it it would get them to raise the priority.\r\n\r\n\r\n  [1]: https://bugs.eclipse.org/bugs/show_bug.cgi?id=536928","title":"Eclipse can&#39;t find XML related classes after switching build path to JDK 10","body":"<p>This seems to have been reported as <a href=\"https://bugs.eclipse.org/bugs/show_bug.cgi?id=536928\" rel=\"noreferrer\">Eclipse Bug 536928</a>. Maybe if everyone were to go vote on it it would get them to raise the priority.</p>\n"},{"tags":[],"owner":{"account_id":12566014,"reputation":134,"user_id":9141985,"display_name":"Yossi"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1544469915,"creation_date":1544469915,"answer_id":53712306,"question_id":51094274,"body_markdown":"This is more of a work-around, but from my experience it can be resolved by going to the &quot;Java Build Path&quot;, the &quot;Order and Export&quot; tab, and sending the &quot;Maven Dependencies&quot; to the bottom (so it&#39;s below the &quot;JRE System Library&quot;).","title":"Eclipse can&#39;t find XML related classes after switching build path to JDK 10","body":"<p>This is more of a work-around, but from my experience it can be resolved by going to the \"Java Build Path\", the \"Order and Export\" tab, and sending the \"Maven Dependencies\" to the bottom (so it's below the \"JRE System Library\").</p>\n"},{"tags":[],"owner":{"account_id":2004139,"reputation":10783,"user_id":1794485,"display_name":"df778899"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1544564687,"creation_date":1544563248,"answer_id":53732518,"question_id":51094274,"body_markdown":"Have seen something very similar under Eclipse 4.8.0 and JDK 10.  E.g.\r\n\r\n    import org.w3c.dom.Element;\r\n\r\nwas failing to compile in Eclipse with: `The import org.w3c.dom.Element cannot be resolved`\r\n\r\nEven so, pressing &lt;kbd&gt;F3&lt;/kbd&gt; (Open Declaration) on that import, Eclipse was able to open the interface definition - in this case under `xml-apis-1.4.01.jar`.\r\n\r\nMeanwhile, builds from Maven direct were working fine.\r\n\r\nIn this case the fix was to remove this dependency from the `pom.xml`:\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t    &lt;groupId&gt;xml-apis&lt;/groupId&gt;\r\n\t\t    &lt;artifactId&gt;xml-apis&lt;/artifactId&gt;\r\n\t\t    &lt;version&gt;1.4.01&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\nThen the compile errors in Eclipse melted away.  Following &lt;kbd&gt;F3&lt;/kbd&gt; again showed the `Element` interface - now under the `java.xml` module, under the JRE System Library under the project.  Also the Maven build remained fine.\r\n\r\nThis feels like a problem with Eclipse resolving a class that it finds in both a JDK module and dependent .jar file.\r\n\r\nInterestingly, in a separate environment, this time under Eclipse 4.9.0 and JDK 11, all is fine, with or without the `xml-apis:1.4.01` dependency.","title":"Eclipse can&#39;t find XML related classes after switching build path to JDK 10","body":"<p>Have seen something very similar under Eclipse 4.8.0 and JDK 10.  E.g.</p>\n\n<pre><code>import org.w3c.dom.Element;\n</code></pre>\n\n<p>was failing to compile in Eclipse with: <code>The import org.w3c.dom.Element cannot be resolved</code></p>\n\n<p>Even so, pressing <kbd>F3</kbd> (Open Declaration) on that import, Eclipse was able to open the interface definition - in this case under <code>xml-apis-1.4.01.jar</code>.</p>\n\n<p>Meanwhile, builds from Maven direct were working fine.</p>\n\n<p>In this case the fix was to remove this dependency from the <code>pom.xml</code>:</p>\n\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;xml-apis&lt;/groupId&gt;\n        &lt;artifactId&gt;xml-apis&lt;/artifactId&gt;\n        &lt;version&gt;1.4.01&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n\n<p>Then the compile errors in Eclipse melted away.  Following <kbd>F3</kbd> again showed the <code>Element</code> interface - now under the <code>java.xml</code> module, under the JRE System Library under the project.  Also the Maven build remained fine.</p>\n\n<p>This feels like a problem with Eclipse resolving a class that it finds in both a JDK module and dependent .jar file.</p>\n\n<p>Interestingly, in a separate environment, this time under Eclipse 4.9.0 and JDK 11, all is fine, with or without the <code>xml-apis:1.4.01</code> dependency.</p>\n"},{"tags":[],"owner":{"account_id":5853491,"reputation":8043,"user_id":4611488,"display_name":"Stephan Herrmann"},"down_vote_count":0,"up_vote_count":117,"is_accepted":true,"score":117,"last_activity_date":1671723221,"creation_date":1545091317,"answer_id":53824670,"question_id":51094274,"body_markdown":"I assume that the project being migrated from Java 1.8 still has no `module-info.java`. This implies you are compiling code in the &quot;unnamed module&quot;.\r\n\r\nCode in the unnamed module &quot;reads&quot; all observable named and unnamed modules, in particular it reads module &quot;java.xml&quot; from the JRE System Library. This module exports package like `java.xml.xpath`.\r\n\r\nAdditionally, you have `xml-apis.java` on the classpath, which contributes another set of packages of the same names (`java.xml.xpath` and friends). These are said to be associated to the unnamed module, like your own code.\r\n\r\nThis situation violates the **requirement of &quot;unique visibility&quot;** as defined in [JLS &#167;7.4.3][1] (last paragraph). In particular every qualified type name Q.Id ([JSL &#167;6.5.5.2][2]) requires that its prefix Q is a uniquely visible package (I&#39;m disregarding the case of nested types for simplicity). Ergo: the program is illegal and must be rejected by compilers.\r\n\r\nThis leaves us with one question and two solutions:\r\n\r\n(1) Question: Why is javac accepting the program?\r\n\r\n(2) Solution: If you add `module-info.java` to your project, you can control via **requires** which module your project reads, either ` requires java.xml;`  or `requires xml.apis;` (where &quot;xml.apis&quot; is the automatic module name of &quot;xml-apis-1.4.01.jar).\r\n\r\n(3) Solution: Short of turning your project into a module, you can still avoid the conflict by excluding `java.xml` from the set of observable modules. On the command line this would be done using `--limit-modules`. The equivalent in Eclipse is the [&quot;Modularity Details&quot; dialog][3], see also the [JDT 4.8 New&amp;Noteworthy][4] (look for **Contents** tab). Since `java.xml` is implicitly required via a lot of other default-observable modules, it may be a good idea to push everything except for `java.base` from right (&quot;Explicitly included modules&quot;) to left (&quot;Available modules&quot;) (and selectively re-add those modules that your project needs).\r\n\r\nPS: Eclipse still doesn&#39;t provide an ideal error message, instead of &quot;cannot be resolved&quot; it should actually say: &quot;The package javax.xml.xpath is accessible from more than one module: javax.xml, &amp;lt;unnamed&gt;.\r\n\r\nPPS: Also weird: how come that changing the order between JRE and a jar on the classpath (such ordering is not a concept supported by javac nor JEP 261) changes the behavior of the compiler.\r\n\r\n**EDITs:**\r\n\r\n - Alex Buckley [confirmed][5] that the given situation is illegal, despite what javac says. Bug against javac has been raised as [JDK-8215739][6]. This bug has been acknowledged months before the release of Java 12. As of 2019-06 it has been decided that also Java 13 will ship without a fix. Similarly for Java 14. The bug was temporarily scheduled for Java 15, but this plan has been dropped on 2020-04-20.\r\n - Eclipse error message [has been improved][7] to mention the real problem.\r\n - In Eclipse 2019-06 the UI used for Solution (3) has been [revamped][8]. Up-to-date documentation can be found in the [online help][9].\r\n - As of 2022-12 there&#39;s yet another perspective on this issue as described in [my other answer][10]. It doesn&#39;t invalidate what&#39;s said here, but let&#39;s things appear in a different light.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/specs/jls/se11/html/jls-7.html#jls-7.4.3\r\n  [2]: https://docs.oracle.com/javase/specs/jls/se11/html/jls-6.html#jls-6.5.5.2\r\n  [3]: https://help.eclipse.org/2018-09/topic/org.eclipse.jdt.doc.user/reference/propertypages/ref-properties-buildpath-modularity.htm?cp=1_4_3_1_0\r\n  [4]: https://www.eclipse.org/eclipse/news/4.8/jdt.php#Java9\r\n  [5]: http://mail.openjdk.java.net/pipermail/jigsaw-dev/2018-December/014077.html\r\n  [6]: https://bugs.openjdk.java.net/browse/JDK-8215739\r\n  [7]: https://bugs.eclipse.org/bugs/show_bug.cgi?id=536928#c32\r\n  [8]: https://www.eclipse.org/eclipse/news/4.12/jdt.php#buildpath-module-dependencies\r\n  [9]: https://help.eclipse.org/2019-06/topic/org.eclipse.jdt.doc.user/reference/ref-properties-build-path.htm#module-dependencies\r\n  [10]: https://stackoverflow.com/a/74890645/4611488","title":"Eclipse can&#39;t find XML related classes after switching build path to JDK 10","body":"<p>I assume that the project being migrated from Java 1.8 still has no <code>module-info.java</code>. This implies you are compiling code in the &quot;unnamed module&quot;.</p>\n<p>Code in the unnamed module &quot;reads&quot; all observable named and unnamed modules, in particular it reads module &quot;java.xml&quot; from the JRE System Library. This module exports package like <code>java.xml.xpath</code>.</p>\n<p>Additionally, you have <code>xml-apis.java</code> on the classpath, which contributes another set of packages of the same names (<code>java.xml.xpath</code> and friends). These are said to be associated to the unnamed module, like your own code.</p>\n<p>This situation violates the <strong>requirement of &quot;unique visibility&quot;</strong> as defined in <a href=\"https://docs.oracle.com/javase/specs/jls/se11/html/jls-7.html#jls-7.4.3\" rel=\"noreferrer\">JLS §7.4.3</a> (last paragraph). In particular every qualified type name Q.Id (<a href=\"https://docs.oracle.com/javase/specs/jls/se11/html/jls-6.html#jls-6.5.5.2\" rel=\"noreferrer\">JSL §6.5.5.2</a>) requires that its prefix Q is a uniquely visible package (I'm disregarding the case of nested types for simplicity). Ergo: the program is illegal and must be rejected by compilers.</p>\n<p>This leaves us with one question and two solutions:</p>\n<p>(1) Question: Why is javac accepting the program?</p>\n<p>(2) Solution: If you add <code>module-info.java</code> to your project, you can control via <strong>requires</strong> which module your project reads, either <code> requires java.xml;</code>  or <code>requires xml.apis;</code> (where &quot;xml.apis&quot; is the automatic module name of &quot;xml-apis-1.4.01.jar).</p>\n<p>(3) Solution: Short of turning your project into a module, you can still avoid the conflict by excluding <code>java.xml</code> from the set of observable modules. On the command line this would be done using <code>--limit-modules</code>. The equivalent in Eclipse is the <a href=\"https://help.eclipse.org/2018-09/topic/org.eclipse.jdt.doc.user/reference/propertypages/ref-properties-buildpath-modularity.htm?cp=1_4_3_1_0\" rel=\"noreferrer\">&quot;Modularity Details&quot; dialog</a>, see also the <a href=\"https://www.eclipse.org/eclipse/news/4.8/jdt.php#Java9\" rel=\"noreferrer\">JDT 4.8 New&amp;Noteworthy</a> (look for <strong>Contents</strong> tab). Since <code>java.xml</code> is implicitly required via a lot of other default-observable modules, it may be a good idea to push everything except for <code>java.base</code> from right (&quot;Explicitly included modules&quot;) to left (&quot;Available modules&quot;) (and selectively re-add those modules that your project needs).</p>\n<p>PS: Eclipse still doesn't provide an ideal error message, instead of &quot;cannot be resolved&quot; it should actually say: &quot;The package javax.xml.xpath is accessible from more than one module: javax.xml, &lt;unnamed&gt;.</p>\n<p>PPS: Also weird: how come that changing the order between JRE and a jar on the classpath (such ordering is not a concept supported by javac nor JEP 261) changes the behavior of the compiler.</p>\n<p><strong>EDITs:</strong></p>\n<ul>\n<li>Alex Buckley <a href=\"http://mail.openjdk.java.net/pipermail/jigsaw-dev/2018-December/014077.html\" rel=\"noreferrer\">confirmed</a> that the given situation is illegal, despite what javac says. Bug against javac has been raised as <a href=\"https://bugs.openjdk.java.net/browse/JDK-8215739\" rel=\"noreferrer\">JDK-8215739</a>. This bug has been acknowledged months before the release of Java 12. As of 2019-06 it has been decided that also Java 13 will ship without a fix. Similarly for Java 14. The bug was temporarily scheduled for Java 15, but this plan has been dropped on 2020-04-20.</li>\n<li>Eclipse error message <a href=\"https://bugs.eclipse.org/bugs/show_bug.cgi?id=536928#c32\" rel=\"noreferrer\">has been improved</a> to mention the real problem.</li>\n<li>In Eclipse 2019-06 the UI used for Solution (3) has been <a href=\"https://www.eclipse.org/eclipse/news/4.12/jdt.php#buildpath-module-dependencies\" rel=\"noreferrer\">revamped</a>. Up-to-date documentation can be found in the <a href=\"https://help.eclipse.org/2019-06/topic/org.eclipse.jdt.doc.user/reference/ref-properties-build-path.htm#module-dependencies\" rel=\"noreferrer\">online help</a>.</li>\n<li>As of 2022-12 there's yet another perspective on this issue as described in <a href=\"https://stackoverflow.com/a/74890645/4611488\">my other answer</a>. It doesn't invalidate what's said here, but let's things appear in a different light.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":785462,"reputation":16343,"user_id":845034,"accept_rate":57,"display_name":"steffen"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1574097210,"creation_date":1574097210,"answer_id":58919790,"question_id":51094274,"body_markdown":"**What happens here** is you have a wildcard import like `import org.w3c.dom.*`, stating you want to import all classes from package `org.w3c.dom`. Now, if there&#39;s at least one class in `org.w3c.dom` provided by a second source, Java must not start (as pointed out [here][1]).\r\n\r\n(By the way, the message &quot;*... cannot be resolved*&quot; is replaced by a more accurate error message &quot;*The package org.w3c.dom is accessible from more than one module: &amp;lt;unnamed&amp;gt;, java.xml*&quot; in more recent Eclipse versions, see this merged [change request][2] by Stephan Herrmann.)\r\n\r\n**To resolve this problem**\r\n\r\n 1. Open the &quot;Open Type&quot; dialog (&lt;kbd&gt;Ctrl&lt;/kbd&gt;+&lt;kbd&gt;Shift&lt;/kbd&gt;+&lt;kbd&gt;T&lt;/kbd&gt;).\r\n 2. Enter the *complete* import, so `org.w3c.dom.*` or `org.w3c.dom.`.\r\n 3. Check the entire list for multiple sources. All entries here should contain only something like &quot;jdk-11-...&quot;.\r\n 4. Gather all JARs that contain classes you have multiple sources for.\r\n 5. Open the &quot;Dependency Hirarchy&quot; tab from `pom.xml`.\r\n 6. Search for the JAR file.\r\n 7. Add an exlusion (right click or edit the `pom.xml` manually).\r\n\r\n**Example**\r\n\r\nI had this findbugs dependency in my `pom.xml`:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.google.code.findbugs&lt;/groupId&gt;\r\n        &lt;artifactId&gt;findbugs&lt;/artifactId&gt;\r\n        &lt;version&gt;${findbugs.version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nFindbugs has two dependencies that need to be excluded:\r\n\r\n    &lt;dependency&gt;\r\n\t\t&lt;groupId&gt;com.google.code.findbugs&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;findbugs&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;${findbugs.version}&lt;/version&gt;\r\n\t\t&lt;exclusion&gt;\r\n\t\t\t&lt;groupId&gt;xml-apis&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;xml-apis&lt;/artifactId&gt;\r\n\t\t&lt;/exclusion&gt;\r\n\t\t&lt;exclusion&gt;\r\n\t\t\t&lt;groupId&gt;jaxen&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jaxen&lt;/artifactId&gt;\r\n\t\t&lt;/exclusion&gt;\r\n\t&lt;/dependency&gt;\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/53824670/845034\r\n  [2]: https://git.eclipse.org/r/#/c/134161/","title":"Eclipse can&#39;t find XML related classes after switching build path to JDK 10","body":"<p><strong>What happens here</strong> is you have a wildcard import like <code>import org.w3c.dom.*</code>, stating you want to import all classes from package <code>org.w3c.dom</code>. Now, if there's at least one class in <code>org.w3c.dom</code> provided by a second source, Java must not start (as pointed out <a href=\"https://stackoverflow.com/a/53824670/845034\">here</a>).</p>\n\n<p>(By the way, the message \"<em>... cannot be resolved</em>\" is replaced by a more accurate error message \"<em>The package org.w3c.dom is accessible from more than one module: &lt;unnamed&gt;, java.xml</em>\" in more recent Eclipse versions, see this merged <a href=\"https://git.eclipse.org/r/#/c/134161/\" rel=\"noreferrer\">change request</a> by Stephan Herrmann.)</p>\n\n<p><strong>To resolve this problem</strong></p>\n\n<ol>\n<li>Open the \"Open Type\" dialog (<kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>T</kbd>).</li>\n<li>Enter the <em>complete</em> import, so <code>org.w3c.dom.*</code> or <code>org.w3c.dom.</code>.</li>\n<li>Check the entire list for multiple sources. All entries here should contain only something like \"jdk-11-...\".</li>\n<li>Gather all JARs that contain classes you have multiple sources for.</li>\n<li>Open the \"Dependency Hirarchy\" tab from <code>pom.xml</code>.</li>\n<li>Search for the JAR file.</li>\n<li>Add an exlusion (right click or edit the <code>pom.xml</code> manually).</li>\n</ol>\n\n<p><strong>Example</strong></p>\n\n<p>I had this findbugs dependency in my <code>pom.xml</code>:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.google.code.findbugs&lt;/groupId&gt;\n    &lt;artifactId&gt;findbugs&lt;/artifactId&gt;\n    &lt;version&gt;${findbugs.version}&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>Findbugs has two dependencies that need to be excluded:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.google.code.findbugs&lt;/groupId&gt;\n    &lt;artifactId&gt;findbugs&lt;/artifactId&gt;\n    &lt;version&gt;${findbugs.version}&lt;/version&gt;\n    &lt;exclusion&gt;\n        &lt;groupId&gt;xml-apis&lt;/groupId&gt;\n        &lt;artifactId&gt;xml-apis&lt;/artifactId&gt;\n    &lt;/exclusion&gt;\n    &lt;exclusion&gt;\n        &lt;groupId&gt;jaxen&lt;/groupId&gt;\n        &lt;artifactId&gt;jaxen&lt;/artifactId&gt;\n    &lt;/exclusion&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":120777,"reputation":14376,"user_id":313400,"display_name":"Guillaume"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1594228599,"creation_date":1579102049,"answer_id":59754594,"question_id":51094274,"body_markdown":"In my case the problem was that `xercesImpl : 2.10.0` was a (transient) dependency. This jar bundles `org.w3c.dom.html.HTMLDOMImplementation`.\r\n\r\nAs far as I understand the `org.w3c.dom` package then becomes available from two modules, causing the build to fail.\r\nIn case one of the dependencies (direct or transient) has classes in one of the 25 packages exported by the [java.xml module][1] your build will fail.\r\n\r\nExcluding xercesImpl (and also the offenders listed below) in Maven solved the issue for me:\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;xyz&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;xyz&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.0&lt;/version&gt;\r\n\t\t\t&lt;exclusions&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;xerces&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;xercesImpl&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;xml-apis&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;xml-apis&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t...\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t&lt;/exclusions&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\nThanks to Rune Flobakk for giving the hint here: https://bugs.eclipse.org/bugs/show_bug.cgi?id=536928#c73\r\n\r\nOther offenders:\r\n    \r\n\r\n - `batik-ext : 1.9` (bundles org.w3c.dom.Window)\r\n - `xom : 1.2.5` (bundles org.w3c.dom.UserDataHandler)\r\n - `stax-api : 1.0.2` (bundles javax.xml.stream.EventFilter)\r\n - `xml-apis : 1.4.01` (bundles org.w3c.dom.Document)\r\n - `xml-beans : 2.3.0` (bundles org.w3c.dom.TypeInfo)\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/9/docs/api/java.xml-summary.html","title":"Eclipse can&#39;t find XML related classes after switching build path to JDK 10","body":"<p>In my case the problem was that <code>xercesImpl : 2.10.0</code> was a (transient) dependency. This jar bundles <code>org.w3c.dom.html.HTMLDOMImplementation</code>.</p>\n<p>As far as I understand the <code>org.w3c.dom</code> package then becomes available from two modules, causing the build to fail.\nIn case one of the dependencies (direct or transient) has classes in one of the 25 packages exported by the <a href=\"https://docs.oracle.com/javase/9/docs/api/java.xml-summary.html\" rel=\"noreferrer\">java.xml module</a> your build will fail.</p>\n<p>Excluding xercesImpl (and also the offenders listed below) in Maven solved the issue for me:</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;xyz&lt;/groupId&gt;\n        &lt;artifactId&gt;xyz&lt;/artifactId&gt;\n        &lt;version&gt;1.0&lt;/version&gt;\n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;xerces&lt;/groupId&gt;\n                &lt;artifactId&gt;xercesImpl&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;xml-apis&lt;/groupId&gt;\n                &lt;artifactId&gt;xml-apis&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n            &lt;exclusion&gt;\n                ...\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>Thanks to Rune Flobakk for giving the hint here: <a href=\"https://bugs.eclipse.org/bugs/show_bug.cgi?id=536928#c73\" rel=\"noreferrer\">https://bugs.eclipse.org/bugs/show_bug.cgi?id=536928#c73</a></p>\n<p>Other offenders:</p>\n<ul>\n<li><code>batik-ext : 1.9</code> (bundles org.w3c.dom.Window)</li>\n<li><code>xom : 1.2.5</code> (bundles org.w3c.dom.UserDataHandler)</li>\n<li><code>stax-api : 1.0.2</code> (bundles javax.xml.stream.EventFilter)</li>\n<li><code>xml-apis : 1.4.01</code> (bundles org.w3c.dom.Document)</li>\n<li><code>xml-beans : 2.3.0</code> (bundles org.w3c.dom.TypeInfo)</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":1367462,"reputation":1563,"user_id":1303612,"display_name":"jebeaudet"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1591966254,"creation_date":1591966254,"answer_id":62344651,"question_id":51094274,"body_markdown":"While Stephan Herrmann&#39;s answer is the correct one, I&#39;ll post my error and how I got it solved if it can help others. I had the error `The package javax.xml.namespace is accessible from more than one module: &lt;unnamed&gt;, java.xml` and after inspecting the class with the error, it was the `javax.xml.namespace.QName` import that was complaining. With the &quot;Open Type&quot; dialog, I found out that it was pulled from `stax-api` through eureka client. This solved it for me : \r\n```xml\r\n&lt;exclusion&gt;\r\n   &lt;groupId&gt;stax&lt;/groupId&gt;\r\n   &lt;artifactId&gt;stax-api&lt;/artifactId&gt;\r\n&lt;/exclusion&gt;\r\n```","title":"Eclipse can&#39;t find XML related classes after switching build path to JDK 10","body":"<p>While Stephan Herrmann's answer is the correct one, I'll post my error and how I got it solved if it can help others. I had the error <code>The package javax.xml.namespace is accessible from more than one module: &lt;unnamed&gt;, java.xml</code> and after inspecting the class with the error, it was the <code>javax.xml.namespace.QName</code> import that was complaining. With the \"Open Type\" dialog, I found out that it was pulled from <code>stax-api</code> through eureka client. This solved it for me : </p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;exclusion&gt;\n   &lt;groupId&gt;stax&lt;/groupId&gt;\n   &lt;artifactId&gt;stax-api&lt;/artifactId&gt;\n&lt;/exclusion&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2481957,"reputation":43,"user_id":2161258,"display_name":"user2161258"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1614376106,"creation_date":1614376106,"answer_id":66393209,"question_id":51094274,"body_markdown":"Thanks for this clue. I was having trouble identifying where the conflicting reference was coming from for org.w3c.dom.Document. Found it easily in Eclipse 2020-12 this way: Selected org.w3c.dom.Document within the import statement that Eclipse flagged, right-click and choose Open Type Hierarchy, in the Type Hierarchy dialog right click Document at the top and choose Implementors &gt; Workspace to reveal all the JARs in all projects in the workspace which are bringing in org.w3c.dom.Document (or whatever type you have selected that is accessible from more than one module – MikeOnline yesterday\r\n\r\nfollowing the directions above from one of the earlier posts helped us solve our issue. \r\nwhat we did was replace Document with GenericDocument and Element with GenericElement from batik - and compile errors are gone - now we just have to test to make sure the implementation matches what we had under java 8.   Thanks MikeOnline","title":"Eclipse can&#39;t find XML related classes after switching build path to JDK 10","body":"<p>Thanks for this clue. I was having trouble identifying where the conflicting reference was coming from for org.w3c.dom.Document. Found it easily in Eclipse 2020-12 this way: Selected org.w3c.dom.Document within the import statement that Eclipse flagged, right-click and choose Open Type Hierarchy, in the Type Hierarchy dialog right click Document at the top and choose Implementors &gt; Workspace to reveal all the JARs in all projects in the workspace which are bringing in org.w3c.dom.Document (or whatever type you have selected that is accessible from more than one module – MikeOnline yesterday</p>\n<p>following the directions above from one of the earlier posts helped us solve our issue.\nwhat we did was replace Document with GenericDocument and Element with GenericElement from batik - and compile errors are gone - now we just have to test to make sure the implementation matches what we had under java 8.   Thanks MikeOnline</p>\n"},{"tags":[],"owner":{"account_id":5853491,"reputation":8043,"user_id":4611488,"display_name":"Stephan Herrmann"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1678121081,"creation_date":1671723010,"answer_id":74890645,"question_id":51094274,"body_markdown":"While the accepted answer (by myself) is still _correct_, a further twist of the story was recently [brought to my attention][1]:\r\n\r\nThe original _intention_ may have been to actually support the situation at hand. \r\n\r\nSee this quote in the original design document &quot;[The State of the Module System][2]&quot; (SotMS):\r\n\r\n&gt; If a package is defined in both a named module and the unnamed module then the package in the unnamed module is ignored.\r\n\r\nThat document is dated 2016/3/8 08:18, and already at that time was marked &quot;*This document is slightly out of date*&quot;. Moreover, it is not legally binding for any implementation. Still that document has some relevance since what&#39;s quoted above is precisely what `javac` appears to implement (and still implements many years after [JDK-8215739][3] was filed).\r\n\r\nIOW, the conflict is not so much a conflict between 1st and 2nd implementation, but a conflict even within Oracle, so it seems. 2 Votes for supporting the situation (SotMS and javac) and only one vote for disallowing (JLS).\r\n\r\nSince Eclipse committers are not inclined to resolve this conflict within Oracle, the recent 2022-12 release of Eclipse has a new compiler option: by adding the following line to a project&#39;s `.settings/org.eclipse.jdt.core.prefs`, a user may opt to ignore JLS in this regard:\r\n\r\n    org.eclipse.jdt.core.compiler.ignoreUnnamedModuleForSplitPackage=enabled\r\n\r\n\r\nThis option puts the decision into the user&#39;s hands: do they want JLS-semantics or SotMS/javac semantics (in this particular issue)? Still we were not quite ready to provide a UI option for it, to avoid that users made this choice thoughtlessly, without the background information as provided here.\r\n\r\n*Personally, I&#39;m not particularly happy about this situation, as it aggravates the fact that Java is not one, but [several languages][4].*\r\n\r\n\r\n  [1]: https://github.com/eclipse-jdt/eclipse.jdt.core/issues/415#issuecomment-1256956523\r\n  [2]: https://openjdk.org/projects/jigsaw/spec/sotms/#the-unnamed-module\r\n  [3]: https://bugs.openjdk.org/browse/JDK-8215739\r\n  [4]: https://objectteams.wordpress.com/2017/04/02/several-languages-java-8/","title":"Eclipse can&#39;t find XML related classes after switching build path to JDK 10","body":"<p>While the accepted answer (by myself) is still <em>correct</em>, a further twist of the story was recently <a href=\"https://github.com/eclipse-jdt/eclipse.jdt.core/issues/415#issuecomment-1256956523\" rel=\"noreferrer\">brought to my attention</a>:</p>\n<p>The original <em>intention</em> may have been to actually support the situation at hand.</p>\n<p>See this quote in the original design document &quot;<a href=\"https://openjdk.org/projects/jigsaw/spec/sotms/#the-unnamed-module\" rel=\"noreferrer\">The State of the Module System</a>&quot; (SotMS):</p>\n<blockquote>\n<p>If a package is defined in both a named module and the unnamed module then the package in the unnamed module is ignored.</p>\n</blockquote>\n<p>That document is dated 2016/3/8 08:18, and already at that time was marked &quot;<em>This document is slightly out of date</em>&quot;. Moreover, it is not legally binding for any implementation. Still that document has some relevance since what's quoted above is precisely what <code>javac</code> appears to implement (and still implements many years after <a href=\"https://bugs.openjdk.org/browse/JDK-8215739\" rel=\"noreferrer\">JDK-8215739</a> was filed).</p>\n<p>IOW, the conflict is not so much a conflict between 1st and 2nd implementation, but a conflict even within Oracle, so it seems. 2 Votes for supporting the situation (SotMS and javac) and only one vote for disallowing (JLS).</p>\n<p>Since Eclipse committers are not inclined to resolve this conflict within Oracle, the recent 2022-12 release of Eclipse has a new compiler option: by adding the following line to a project's <code>.settings/org.eclipse.jdt.core.prefs</code>, a user may opt to ignore JLS in this regard:</p>\n<pre><code>org.eclipse.jdt.core.compiler.ignoreUnnamedModuleForSplitPackage=enabled\n</code></pre>\n<p>This option puts the decision into the user's hands: do they want JLS-semantics or SotMS/javac semantics (in this particular issue)? Still we were not quite ready to provide a UI option for it, to avoid that users made this choice thoughtlessly, without the background information as provided here.</p>\n<p><em>Personally, I'm not particularly happy about this situation, as it aggravates the fact that Java is not one, but <a href=\"https://objectteams.wordpress.com/2017/04/02/several-languages-java-8/\" rel=\"noreferrer\">several languages</a>.</em></p>\n"}],"owner":{"account_id":61330,"reputation":4234,"user_id":182837,"accept_rate":62,"display_name":"Carsten"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":72603,"favorite_count":0,"down_vote_count":0,"up_vote_count":81,"accepted_answer_id":53824670,"answer_count":10,"score":81,"last_activity_date":1695195384,"creation_date":1530246257,"question_id":51094274,"body_markdown":"I&#39;m developing on a [Maven project][1] (branch  platform-bom_brussels-sr7) in Eclipse. When I recently tried switching the Java Build Path for the project to JDK 10, Eclipse build can no longer find classes such as `javax.xml.xpath.XPath`, `org.w3c.dom.Document`, or `org.xml.sax.SAXException`. It seems only XML related classes are impacted, mostly from the Maven dependency `xml-apis-1.4.01`.\r\n\r\nTrying a Maven build from Eclipse works without errors. Ctrl-LeftClick on one of the supposedly missing classes finds the class and opens it in the Eclipse editor. It seems only the Eclipse build is impacted.\r\n\r\nI tried several things, but none helped. I tried:\r\n\r\n* Project Clean\r\n* Different Eclipse Versions: Oxygen and Photon.\r\n* Running Eclipse itself with JDK 8 and JDK 10.\r\n* Changing Compiler Compliance level for the project. It builds with compliance level 8 and 10 under JDK 8 build path and fails for both with JDK 10 in build path.\r\n\r\n  [1]: https://github.com/fcarsten/portal-core.git","title":"Eclipse can&#39;t find XML related classes after switching build path to JDK 10","body":"<p>I'm developing on a <a href=\"https://github.com/fcarsten/portal-core.git\" rel=\"noreferrer\">Maven project</a> (branch  platform-bom_brussels-sr7) in Eclipse. When I recently tried switching the Java Build Path for the project to JDK 10, Eclipse build can no longer find classes such as <code>javax.xml.xpath.XPath</code>, <code>org.w3c.dom.Document</code>, or <code>org.xml.sax.SAXException</code>. It seems only XML related classes are impacted, mostly from the Maven dependency <code>xml-apis-1.4.01</code>.</p>\n\n<p>Trying a Maven build from Eclipse works without errors. Ctrl-LeftClick on one of the supposedly missing classes finds the class and opens it in the Eclipse editor. It seems only the Eclipse build is impacted.</p>\n\n<p>I tried several things, but none helped. I tried:</p>\n\n<ul>\n<li>Project Clean</li>\n<li>Different Eclipse Versions: Oxygen and Photon.</li>\n<li>Running Eclipse itself with JDK 8 and JDK 10.</li>\n<li>Changing Compiler Compliance level for the project. It builds with compliance level 8 and 10 under JDK 8 build path and fails for both with JDK 10 in build path.</li>\n</ul>\n"},{"tags":["java","json","gradle","cucumber","testng"],"comments":[{"owner":{"account_id":10489136,"reputation":2762,"user_id":7731623,"display_name":"Nandan A"},"score":0,"creation_date":1695192637,"post_id":77135116,"comment_id":135989453,"body_markdown":"You said &quot;for each feature, we have a separate runner class.&quot; Why? why can&#39;t you use tags to run the cases?","body":"You said &quot;for each feature, we have a separate runner class.&quot; Why? why can&#39;t you use tags to run the cases?"}],"answers":[{"tags":[],"owner":{"account_id":7460660,"reputation":2741,"user_id":5672261,"accept_rate":72,"display_name":"Nitin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695195318,"creation_date":1695195318,"answer_id":77140262,"question_id":77135116,"body_markdown":"I resolved this by writing a custom gradle task.\r\n\r\nHere is my solution:\r\n\r\nGradle task:\r\n```\r\ntask aggregatReport(type: JavaExec) {\r\n    println(&quot;Running aggregatReport task&quot;)\r\n    description &#39;Combine multiple cucumber report json file into one json file&#39;\r\n    classpath sourceSets.main.runtimeClasspath\r\n    mainClass = &quot;com.ReportAggregator&quot;\r\n    def reportFolderPath = &quot;./build/cucumber-reports/&quot;;\r\n    File file = file(reportFolderPath);\r\n    args file.toPath().toAbsolutePath().toString()\r\n}\r\n```\r\n\r\nThe code:\r\n\r\n```\r\npublic class ReportAggregator {\r\n    public static void main(String[] args) throws IOException {\r\n        System.out.println(&quot;ReportAggregator with argument -&gt; &quot; + Arrays.toString(args));\r\n        ObjectMapper objectMapper = new ObjectMapper();\r\n        File reportFolder = new File(args[0]);\r\n        System.out.println(&quot;Report folder  -&gt; &quot; + reportFolder.isDirectory() + &quot; &quot; + reportFolder.exists());\r\n        List&lt;Path&gt; reportFiles = Files.walk(reportFolder.toPath()).filter(file -&gt; file.toFile().getName().endsWith(&quot;.json&quot;)).toList();\r\n        List&lt;Map&lt;String, Object&gt;&gt; finalReportList = new ArrayList&lt;&gt;();\r\n        if (CollectionUtil.isNotEmpty(reportFiles)) {\r\n            System.out.println(&quot;Total report file -&gt;&quot; + reportFiles.size());\r\n            reportFiles.forEach(path -&gt; {\r\n                try {\r\n                    String jsonString = FileUtils.readFileToString(path.toFile(), Charset.defaultCharset());\r\n                    TypeReference&lt;List&lt;Map&lt;String, Object&gt;&gt;&gt; typeRef = new TypeReference&lt;&gt;() {\r\n                    };\r\n                    List&lt;Map&lt;String, Object&gt;&gt; hashMaps = objectMapper.readValue(jsonString, typeRef);\r\n                    finalReportList.addAll(hashMaps);\r\n                } catch (IOException e) {\r\n                    System.err.println(&quot;Can not read file -&gt; &quot; + path.toFile().getAbsolutePath());\r\n                }\r\n            });\r\n\r\n            if (CollectionUtil.isNotEmpty(finalReportList)) {\r\n                String finalReportFileName = reportFolder.getAbsolutePath() + &quot;/final.json&quot;;\r\n                File finalReportFile = new File(finalReportFileName);\r\n                if (finalReportFile.exists()) {\r\n                    boolean delete = finalReportFile.delete();\r\n                    System.out.println(&quot;File is deleted -&gt; &quot; + delete);\r\n                }\r\n                FileUtils.writeStringToFile(finalReportFile, objectMapper.writeValueAsString(finalReportList), Charset.defaultCharset());\r\n                System.out.println(&quot;Report file created&quot;);\r\n            } else {\r\n                System.err.println(&quot;Empty report is created&quot;);\r\n                throw new ReportException(&quot;Empty report created&quot;);\r\n            }\r\n        } else {\r\n            throw new ReportException(&quot;No report file found under folder -&gt;&quot; + reportFolder.getAbsolutePath());\r\n        }\r\n    }\r\n}\r\n\r\n```\r\n\r\nand gralde task dependency settings:\r\n\r\n```\r\ntest {\r\n    println(&quot;Running test task&quot;)\r\n    useTestNG() {\r\n        suites &#39;src/test/testng.xml&#39;\r\n    }\r\n    finalizedBy aggregatReport\r\n}\r\n\r\n\r\ntask importJunitResultsToXrayCloud() {\r\n    dependsOn &#39;test&#39;\r\n    description &#39;Imports Cucumber test results to Xray Test Management for Jira Cloud.&#39;\r\n\r\n    doLast {\r\n       //code to upload report\r\n    }\r\n}\r\n```\r\n\r\nand to upload report just run  `./gradlew importJunitResultsToXrayCloud`\r\n","title":"Combine cucumber json reports","body":"<p>I resolved this by writing a custom gradle task.</p>\n<p>Here is my solution:</p>\n<p>Gradle task:</p>\n<pre><code>task aggregatReport(type: JavaExec) {\n    println(&quot;Running aggregatReport task&quot;)\n    description 'Combine multiple cucumber report json file into one json file'\n    classpath sourceSets.main.runtimeClasspath\n    mainClass = &quot;com.ReportAggregator&quot;\n    def reportFolderPath = &quot;./build/cucumber-reports/&quot;;\n    File file = file(reportFolderPath);\n    args file.toPath().toAbsolutePath().toString()\n}\n</code></pre>\n<p>The code:</p>\n<pre><code>public class ReportAggregator {\n    public static void main(String[] args) throws IOException {\n        System.out.println(&quot;ReportAggregator with argument -&gt; &quot; + Arrays.toString(args));\n        ObjectMapper objectMapper = new ObjectMapper();\n        File reportFolder = new File(args[0]);\n        System.out.println(&quot;Report folder  -&gt; &quot; + reportFolder.isDirectory() + &quot; &quot; + reportFolder.exists());\n        List&lt;Path&gt; reportFiles = Files.walk(reportFolder.toPath()).filter(file -&gt; file.toFile().getName().endsWith(&quot;.json&quot;)).toList();\n        List&lt;Map&lt;String, Object&gt;&gt; finalReportList = new ArrayList&lt;&gt;();\n        if (CollectionUtil.isNotEmpty(reportFiles)) {\n            System.out.println(&quot;Total report file -&gt;&quot; + reportFiles.size());\n            reportFiles.forEach(path -&gt; {\n                try {\n                    String jsonString = FileUtils.readFileToString(path.toFile(), Charset.defaultCharset());\n                    TypeReference&lt;List&lt;Map&lt;String, Object&gt;&gt;&gt; typeRef = new TypeReference&lt;&gt;() {\n                    };\n                    List&lt;Map&lt;String, Object&gt;&gt; hashMaps = objectMapper.readValue(jsonString, typeRef);\n                    finalReportList.addAll(hashMaps);\n                } catch (IOException e) {\n                    System.err.println(&quot;Can not read file -&gt; &quot; + path.toFile().getAbsolutePath());\n                }\n            });\n\n            if (CollectionUtil.isNotEmpty(finalReportList)) {\n                String finalReportFileName = reportFolder.getAbsolutePath() + &quot;/final.json&quot;;\n                File finalReportFile = new File(finalReportFileName);\n                if (finalReportFile.exists()) {\n                    boolean delete = finalReportFile.delete();\n                    System.out.println(&quot;File is deleted -&gt; &quot; + delete);\n                }\n                FileUtils.writeStringToFile(finalReportFile, objectMapper.writeValueAsString(finalReportList), Charset.defaultCharset());\n                System.out.println(&quot;Report file created&quot;);\n            } else {\n                System.err.println(&quot;Empty report is created&quot;);\n                throw new ReportException(&quot;Empty report created&quot;);\n            }\n        } else {\n            throw new ReportException(&quot;No report file found under folder -&gt;&quot; + reportFolder.getAbsolutePath());\n        }\n    }\n}\n\n</code></pre>\n<p>and gralde task dependency settings:</p>\n<pre><code>test {\n    println(&quot;Running test task&quot;)\n    useTestNG() {\n        suites 'src/test/testng.xml'\n    }\n    finalizedBy aggregatReport\n}\n\n\ntask importJunitResultsToXrayCloud() {\n    dependsOn 'test'\n    description 'Imports Cucumber test results to Xray Test Management for Jira Cloud.'\n\n    doLast {\n       //code to upload report\n    }\n}\n</code></pre>\n<p>and to upload report just run  <code>./gradlew importJunitResultsToXrayCloud</code></p>\n"}],"owner":{"account_id":7460660,"reputation":2741,"user_id":5672261,"accept_rate":72,"display_name":"Nitin"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":171,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695195318,"creation_date":1695131024,"question_id":77135116,"body_markdown":"I am writing test cases using cucumber, and testNG using Java 17.\r\n\r\nWe created multiple feature files and for each feature, we have a separate runner class. \r\n\r\nConfucurtion of the runner class looks as below:\r\n\r\n```\r\n@CucumberOptions(features = {&quot;src/test/resources/features/wallet/A.feature&quot;},\r\n        glue = {&quot;com.test.a&quot;},\r\n        plugin = {&quot;pretty&quot;, &quot;json:build/cucumber-reports/a.json&quot;})\r\n@Test(groups = {&quot;A&quot;, &quot;regression&quot;}, alwaysRun = true)\r\npublic class RunnerA extends AbstractTestNGCucumberTests {\r\n\r\n}\r\n\r\n@CucumberOptions(features = {&quot;src/test/resources/features/wallet/B.feature&quot;},\r\n        glue = {&quot;com.test.b&quot;},\r\n        plugin = {&quot;pretty&quot;, &quot;json:build/cucumber-reports/b.json&quot;})\r\n@Test(groups = {&quot;B&quot;, &quot;regression&quot;}, alwaysRun = true)\r\npublic class RunnerB extends AbstractTestNGCucumberTests {\r\n\r\n}\r\n```\r\n\r\nWhen I run the test case it generates 2 JSON files in `cucumber-reports` folder as `a.json` and `b.json`.\r\n\r\nHow can I merge these two json files in one single json file ie. `report.json`\r\n\r\nI am using `gradle 7` as a build tool with `cucumber 7.11.0`\r\n\r\nEnd goal: I want to upload json file in [Xray][1] using [API][2]\r\n\r\n\r\n  [1]: https://www.getxray.app/\r\n  [2]: https://docs.getxray.app/display/XRAYCLOUD/Import+Execution+Results+-+REST+v2#ImportExecutionResultsRESTv2-CucumberJSONresults","title":"Combine cucumber json reports","body":"<p>I am writing test cases using cucumber, and testNG using Java 17.</p>\n<p>We created multiple feature files and for each feature, we have a separate runner class.</p>\n<p>Confucurtion of the runner class looks as below:</p>\n<pre><code>@CucumberOptions(features = {&quot;src/test/resources/features/wallet/A.feature&quot;},\n        glue = {&quot;com.test.a&quot;},\n        plugin = {&quot;pretty&quot;, &quot;json:build/cucumber-reports/a.json&quot;})\n@Test(groups = {&quot;A&quot;, &quot;regression&quot;}, alwaysRun = true)\npublic class RunnerA extends AbstractTestNGCucumberTests {\n\n}\n\n@CucumberOptions(features = {&quot;src/test/resources/features/wallet/B.feature&quot;},\n        glue = {&quot;com.test.b&quot;},\n        plugin = {&quot;pretty&quot;, &quot;json:build/cucumber-reports/b.json&quot;})\n@Test(groups = {&quot;B&quot;, &quot;regression&quot;}, alwaysRun = true)\npublic class RunnerB extends AbstractTestNGCucumberTests {\n\n}\n</code></pre>\n<p>When I run the test case it generates 2 JSON files in <code>cucumber-reports</code> folder as <code>a.json</code> and <code>b.json</code>.</p>\n<p>How can I merge these two json files in one single json file ie. <code>report.json</code></p>\n<p>I am using <code>gradle 7</code> as a build tool with <code>cucumber 7.11.0</code></p>\n<p>End goal: I want to upload json file in <a href=\"https://www.getxray.app/\" rel=\"nofollow noreferrer\">Xray</a> using <a href=\"https://docs.getxray.app/display/XRAYCLOUD/Import+Execution+Results+-+REST+v2#ImportExecutionResultsRESTv2-CucumberJSONresults\" rel=\"nofollow noreferrer\">API</a></p>\n"},{"tags":["java","algorithm","list","unique"],"comments":[{"owner":{"account_id":392404,"reputation":5663,"user_id":753642,"display_name":"grodzi"},"score":1,"creation_date":1571742656,"post_id":58502853,"comment_id":103334350,"body_markdown":"has your resulting list to keep its order?","body":"has your resulting list to keep its order?"},{"owner":{"account_id":14709639,"reputation":966,"user_id":10623338,"display_name":"John Allison"},"score":1,"creation_date":1571742752,"post_id":58502853,"comment_id":103334399,"body_markdown":"@user753642, nope.","body":"@user753642, nope."},{"owner":{"account_id":16430474,"reputation":153,"user_id":11869461,"display_name":"ialam"},"score":2,"creation_date":1571742965,"post_id":58502853,"comment_id":103334518,"body_markdown":"If you are not constrained to use O(n) extra space then this is elegant solution.\nIf you can&#39;t use extra O(n) space then you can sort the list and then traverse and delete the nodes which have duplicate neighbor node along with the current node. This will be O(nlogn) solution because of sorting but yeah there will always a trade off between space and time and you need to choose one or the other.","body":"If you are not constrained to use O(n) extra space then this is elegant solution. If you can&#39;t use extra O(n) space then you can sort the list and then traverse and delete the nodes which have duplicate neighbor node along with the current node. This will be O(nlogn) solution because of sorting but yeah there will always a trade off between space and time and you need to choose one or the other."},{"owner":{"account_id":4728704,"reputation":17022,"user_id":3824919,"display_name":"Tom"},"score":0,"creation_date":1571745511,"post_id":58502853,"comment_id":103335921,"body_markdown":"Possible duplicate of [Want non duplicate elements from list](https://stackoverflow.com/questions/14225302/want-non-duplicate-elements-from-list)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/14225302/want-non-duplicate-elements-from-list\">Want non duplicate elements from list</a>"}],"answers":[{"tags":[],"owner":{"account_id":9847991,"reputation":56906,"user_id":7294900,"accept_rate":94,"display_name":"Ori Marko"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1571743992,"creation_date":1571742631,"answer_id":58502941,"question_id":58502853,"body_markdown":"You can use [Bag][1] to count occurrences (`getCount(1)` for unique)\r\n\r\n&gt;Bag is a collection that allows storing multiple items along with their repetition count:\r\n\r\n&gt;     public void whenAdded_thenCountIsKept() {\r\n       Bag&lt;Integer&gt; bag = new HashBag&lt;&gt;(\r\n       Arrays.asList(1, 2, 3, 3, 3, 1, 4));         \r\n       assertThat(2, equalTo(bag.getCount(1)));\r\n    }\r\n\r\nOr `CollectionBag`\r\n&gt; Apache Collections&#39; library provides a decorator called the CollectionBag. We can use this to make our bag collections compliant with the Java Collection contract:\r\n\r\nAnd get [unique set][2]:\r\n\r\n    bag.uniqueSet();\r\n\r\n&gt;Returns a Set of unique elements in the Bag.\r\n[1]:https://www.baeldung.com/apache-commons-bag\r\n[2]:https://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/Bag.html#uniqueSet--","title":"Filter List for unique elements","body":"<p>You can use <a href=\"https://www.baeldung.com/apache-commons-bag\" rel=\"nofollow noreferrer\">Bag</a> to count occurrences (<code>getCount(1)</code> for unique)</p>\n\n<blockquote>\n  <p>Bag is a collection that allows storing multiple items along with their repetition count:</p>\n\n<pre><code>public void whenAdded_thenCountIsKept() {\n   Bag&lt;Integer&gt; bag = new HashBag&lt;&gt;(\n   Arrays.asList(1, 2, 3, 3, 3, 1, 4));         \n   assertThat(2, equalTo(bag.getCount(1)));\n}\n</code></pre>\n</blockquote>\n\n<p>Or <code>CollectionBag</code></p>\n\n<blockquote>\n  <p>Apache Collections' library provides a decorator called the CollectionBag. We can use this to make our bag collections compliant with the Java Collection contract:</p>\n</blockquote>\n\n<p>And get <a href=\"https://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/Bag.html#uniqueSet--\" rel=\"nofollow noreferrer\">unique set</a>:</p>\n\n<pre><code>bag.uniqueSet();\n</code></pre>\n\n<blockquote>\n  <p>Returns a Set of unique elements in the Bag.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":2803497,"reputation":25202,"user_id":2411243,"display_name":"Zabuzard"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1571744155,"creation_date":1571743506,"answer_id":58503201,"question_id":58502853,"body_markdown":"I doubt there is a better approach than actually counting and filtering for the ones that only appeared once. At least, all approaches I can think of will use _something similar_ to that under the hood.\r\n\r\nAlso, it is not clear what you mean by elegant, readability or performance? So I will just dump some approaches.\r\n\r\n----------\r\n## `Stream` counting ##\r\n\r\nHere is a stream-variant that computes number of occurrences (`Map`) and then filters for elements that appear only once. It is essentially the same as what you described already, or what `Bag`s do under the hood:\r\n\r\n    List&lt;E&gt; result = elements.stream() // Stream&lt;E&gt;\r\n        .collect(Collectors.groupingBy(Function.identity(), Collectors.counting())) // Map&lt;E, Long&gt;\r\n        .entries() // Set&lt;Entry&lt;E, Long&gt;&gt;\r\n        .stream()  // Stream&lt;Entry&lt;E, Long&gt;&gt;\r\n        .filter(entry -&gt; entry.getValue() == 1)\r\n        .map(Entry::getKey)\r\n        .collect(Collectors.toList());\r\n\r\nIt requires two full iterations over the data-set. Since it uses the Stream-API, the operations support multi-threading right from the get-go though. So if you have lots of elements, this might be pretty fast due to that.\r\n\r\n----------\r\n## Manual `Set` ##\r\n\r\nHere is another approach that reduces iteration and lookup time by manually collecting into a `Set` to identify duplicates as fast as possible:\r\n\r\n    Set&lt;E&gt; result = new HashSet&lt;&gt;();\r\n    Set&lt;E&gt; appeared = new HashSet&lt;&gt;();\r\n\r\n    for (E element : elements) {\r\n        if (result.contains(element)) { // 2nd occurrence\r\n            result.remove(element);\r\n            appeared.add(element);\r\n            continue;\r\n        }\r\n        if (appeared.contains(element)) { // &gt;2nd occurrence\r\n            continue;\r\n        }\r\n\r\n        result.add(element); // 1st occurrence\r\n    }\r\n\r\nAs you see, this only requires one iteration over the `elements` instead of multiple.\r\n\r\nThis approach is elegant in a sense that it does not compute unnecessary information. For what you want, it is completely irrelevant to compute how often exactly elements appear. We only care for *&quot;does it appear once or more often?&quot;* and not if it appears 5 times or 11 times.","title":"Filter List for unique elements","body":"<p>I doubt there is a better approach than actually counting and filtering for the ones that only appeared once. At least, all approaches I can think of will use <em>something similar</em> to that under the hood.</p>\n\n<p>Also, it is not clear what you mean by elegant, readability or performance? So I will just dump some approaches.</p>\n\n<hr>\n\n<h2><code>Stream</code> counting</h2>\n\n<p>Here is a stream-variant that computes number of occurrences (<code>Map</code>) and then filters for elements that appear only once. It is essentially the same as what you described already, or what <code>Bag</code>s do under the hood:</p>\n\n<pre><code>List&lt;E&gt; result = elements.stream() // Stream&lt;E&gt;\n    .collect(Collectors.groupingBy(Function.identity(), Collectors.counting())) // Map&lt;E, Long&gt;\n    .entries() // Set&lt;Entry&lt;E, Long&gt;&gt;\n    .stream()  // Stream&lt;Entry&lt;E, Long&gt;&gt;\n    .filter(entry -&gt; entry.getValue() == 1)\n    .map(Entry::getKey)\n    .collect(Collectors.toList());\n</code></pre>\n\n<p>It requires two full iterations over the data-set. Since it uses the Stream-API, the operations support multi-threading right from the get-go though. So if you have lots of elements, this might be pretty fast due to that.</p>\n\n<hr>\n\n<h2>Manual <code>Set</code></h2>\n\n<p>Here is another approach that reduces iteration and lookup time by manually collecting into a <code>Set</code> to identify duplicates as fast as possible:</p>\n\n<pre><code>Set&lt;E&gt; result = new HashSet&lt;&gt;();\nSet&lt;E&gt; appeared = new HashSet&lt;&gt;();\n\nfor (E element : elements) {\n    if (result.contains(element)) { // 2nd occurrence\n        result.remove(element);\n        appeared.add(element);\n        continue;\n    }\n    if (appeared.contains(element)) { // &gt;2nd occurrence\n        continue;\n    }\n\n    result.add(element); // 1st occurrence\n}\n</code></pre>\n\n<p>As you see, this only requires one iteration over the <code>elements</code> instead of multiple.</p>\n\n<p>This approach is elegant in a sense that it does not compute unnecessary information. For what you want, it is completely irrelevant to compute how often exactly elements appear. We only care for <em>\"does it appear once or more often?\"</em> and not if it appears 5 times or 11 times.</p>\n"},{"tags":[],"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1571743734,"creation_date":1571743734,"answer_id":58503257,"question_id":58502853,"body_markdown":"One need first to collect all, reached the end for deleting groups of more than 1 element.\r\n\r\n    Map&lt;String, Long&gt; map = Stream.of(&quot;a&quot;, &quot;b&quot;, &quot;a&quot;, &quot;a&quot;, &quot;c&quot;, &quot;d&quot;, &quot;c&quot;)\r\n                .collect(Collectors.groupingBy(Function.identity(), \r\n                         Collectors.counting()));\r\n    map.entrySet()\r\n        .stream()\r\n        .filter(e -&gt; e.getValue() == 1L)\r\n        .map(e -&gt; e.getKey())\r\n        .forEach(System.out::println);\r\n    \r\n\r\nOr in one go:\r\n\r\n            Stream.of(&quot;a&quot;, &quot;b&quot;, &quot;a&quot;, &quot;a&quot;, &quot;c&quot;, &quot;d&quot;, &quot;c&quot;)\r\n                    .collect(Collectors.groupingBy(Function.identity(), Collectors.counting()))\r\n                    .entrySet()\r\n                    .stream()\r\n                    .filter(e -&gt; e.getValue() == 1L)\r\n                    .map(e -&gt; e.getKey())\r\n                    .forEach(System.out::println);\r\n\r\n","title":"Filter List for unique elements","body":"<p>One need first to collect all, reached the end for deleting groups of more than 1 element.</p>\n\n<pre><code>Map&lt;String, Long&gt; map = Stream.of(\"a\", \"b\", \"a\", \"a\", \"c\", \"d\", \"c\")\n            .collect(Collectors.groupingBy(Function.identity(), \n                     Collectors.counting()));\nmap.entrySet()\n    .stream()\n    .filter(e -&gt; e.getValue() == 1L)\n    .map(e -&gt; e.getKey())\n    .forEach(System.out::println);\n</code></pre>\n\n<p>Or in one go:</p>\n\n<pre><code>        Stream.of(\"a\", \"b\", \"a\", \"a\", \"c\", \"d\", \"c\")\n                .collect(Collectors.groupingBy(Function.identity(), Collectors.counting()))\n                .entrySet()\n                .stream()\n                .filter(e -&gt; e.getValue() == 1L)\n                .map(e -&gt; e.getKey())\n                .forEach(System.out::println);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8397558,"reputation":4568,"user_id":6304094,"display_name":"Kevin Anderson"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1571746739,"creation_date":1571746739,"answer_id":58504149,"question_id":58502853,"body_markdown":"The idea of using a map to accumulate frequency counts sounds like a good one: it runs in roughly linear (O(_n_)) time and only requires O(_n_) extra space.  \r\n\r\nHere&#39;s an algorithm that requires _**zero** extra space_, at the expense of running in O(_n^2_) time:\r\n\r\n\r\n    public static &lt;T&gt; void retainSingletons(List&lt;T&gt; list)\r\n    {\r\n        int i = 0;\r\n        while (i &lt; list.size()) {\r\n            boolean foundDup = false;\r\n            int j = i + 1;\r\n            while (j &lt; list.size()) {\r\n                if (list.get(i).equals(list.get(j))) {\r\n                    list.remove(j);\r\n                    foundDup = true;\r\n                } else {\r\n                    ++j;\r\n                }\r\n            }\r\n            if (foundDup) {\r\n                list.remove(i);\r\n            } else {\r\n                ++i;\r\n            }\r\n        }\r\n    }\r\n\r\nThe idea is straightforward: step a slow pointer, `i`, over the list until it runs off the end; for each value of `i`, run a fast pointer `j` from `i+1` until the end of the list,  removing any `list[j]` that&#39;s a duplicate of `list[i]`; after `j` runs out, if any duplicates of `list[i]` were found and removed, also remove `list[i]`.","title":"Filter List for unique elements","body":"<p>The idea of using a map to accumulate frequency counts sounds like a good one: it runs in roughly linear (O(<em>n</em>)) time and only requires O(<em>n</em>) extra space.  </p>\n\n<p>Here's an algorithm that requires <em><strong>zero</strong> extra space</em>, at the expense of running in O(<em>n^2</em>) time:</p>\n\n<pre><code>public static &lt;T&gt; void retainSingletons(List&lt;T&gt; list)\n{\n    int i = 0;\n    while (i &lt; list.size()) {\n        boolean foundDup = false;\n        int j = i + 1;\n        while (j &lt; list.size()) {\n            if (list.get(i).equals(list.get(j))) {\n                list.remove(j);\n                foundDup = true;\n            } else {\n                ++j;\n            }\n        }\n        if (foundDup) {\n            list.remove(i);\n        } else {\n            ++i;\n        }\n    }\n}\n</code></pre>\n\n<p>The idea is straightforward: step a slow pointer, <code>i</code>, over the list until it runs off the end; for each value of <code>i</code>, run a fast pointer <code>j</code> from <code>i+1</code> until the end of the list,  removing any <code>list[j]</code> that's a duplicate of <code>list[i]</code>; after <code>j</code> runs out, if any duplicates of <code>list[i]</code> were found and removed, also remove <code>list[i]</code>.</p>\n"},{"tags":[],"owner":{"account_id":1712726,"reputation":6528,"user_id":1570415,"display_name":"Donald Raab"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1572059569,"creation_date":1572059569,"answer_id":58567758,"question_id":58502853,"body_markdown":"The following will work using [Eclipse Collections][1]:\r\n\r\n    IntList list = IntLists.mutable.with(1, 2, 2, 3, 1, 4);\r\n    IntSet unique = list.toBag().selectUnique();\r\n    System.out.println(unique);\r\n\r\nUsing an `IntList` removes the need to box the `int` values and `Integer` objects.\r\n\r\nNote: I am a committer for Eclipse Collections.\r\n\r\n\r\n  [1]: https://github.com/eclipse/eclipse-collections","title":"Filter List for unique elements","body":"<p>The following will work using <a href=\"https://github.com/eclipse/eclipse-collections\" rel=\"nofollow noreferrer\">Eclipse Collections</a>:</p>\n\n<pre><code>IntList list = IntLists.mutable.with(1, 2, 2, 3, 1, 4);\nIntSet unique = list.toBag().selectUnique();\nSystem.out.println(unique);\n</code></pre>\n\n<p>Using an <code>IntList</code> removes the need to box the <code>int</code> values and <code>Integer</code> objects.</p>\n\n<p>Note: I am a committer for Eclipse Collections.</p>\n"},{"tags":[],"owner":{"account_id":29488850,"reputation":1,"user_id":22598189,"display_name":"Developer007"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695194946,"creation_date":1695194946,"answer_id":77140212,"question_id":58502853,"body_markdown":"Please find the correct code below. Implemented in Java by using Stream API and Functional Interfaces.\r\n\r\n```\r\n// Code to Print Only Non Duplicate Elements\r\nimport java.util.*;\r\nimport java.util.function.Predicate;\r\nimport java.util.stream.Collectors;\r\n\r\npublic class NonDuplicateElements {\r\n    public static void main(String[] args) {\r\n        List&lt;Integer&gt; numbers = Arrays.asList(1, 2, 2, 3, 4, 4, 5, 6, 6, 7);\r\n\r\n        // Use a Predicate to check for duplicates\r\n        Predicate&lt;Integer&gt; isDuplicate = new Predicate&lt;Integer&gt;() {\r\n            Set&lt;Integer&gt; seen = new HashSet&lt;&gt;();\r\n\r\n            @Override\r\n            public boolean test(Integer number) {\r\n                return !seen.add(number); // Returns true if number is already seen (duplicate)\r\n            }\r\n        };\r\n\r\n        // Filter the list to get duplicate elements\r\n        List&lt;Integer&gt; duplicateNumbers = numbers.stream()\r\n                .filter(isDuplicate)\r\n                .collect(Collectors.toList());\r\n\r\n        // Print the non-duplicate elements\r\n        List&lt;Integer&gt; finalResult = new ArrayList&lt;Integer&gt;();\r\n\t\tfor (int number : numbers) {\r\n\t\t\tif (!duplicateNumbers.contains(number)) {\r\n\t\t\t\tfinalResult.add(number);\r\n\t\t\t}\r\n\t\t}\r\n\t\tSystem.out.println(finalResult);\r\n    }\r\n}\r\n```","title":"Filter List for unique elements","body":"<p>Please find the correct code below. Implemented in Java by using Stream API and Functional Interfaces.</p>\n<pre><code>// Code to Print Only Non Duplicate Elements\nimport java.util.*;\nimport java.util.function.Predicate;\nimport java.util.stream.Collectors;\n\npublic class NonDuplicateElements {\n    public static void main(String[] args) {\n        List&lt;Integer&gt; numbers = Arrays.asList(1, 2, 2, 3, 4, 4, 5, 6, 6, 7);\n\n        // Use a Predicate to check for duplicates\n        Predicate&lt;Integer&gt; isDuplicate = new Predicate&lt;Integer&gt;() {\n            Set&lt;Integer&gt; seen = new HashSet&lt;&gt;();\n\n            @Override\n            public boolean test(Integer number) {\n                return !seen.add(number); // Returns true if number is already seen (duplicate)\n            }\n        };\n\n        // Filter the list to get duplicate elements\n        List&lt;Integer&gt; duplicateNumbers = numbers.stream()\n                .filter(isDuplicate)\n                .collect(Collectors.toList());\n\n        // Print the non-duplicate elements\n        List&lt;Integer&gt; finalResult = new ArrayList&lt;Integer&gt;();\n        for (int number : numbers) {\n            if (!duplicateNumbers.contains(number)) {\n                finalResult.add(number);\n            }\n        }\n        System.out.println(finalResult);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":14709639,"reputation":966,"user_id":10623338,"display_name":"John Allison"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1755,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"accepted_answer_id":58503201,"answer_count":6,"score":2,"last_activity_date":1695194946,"creation_date":1571742362,"question_id":58502853,"body_markdown":"I am searching for an elegant way to filter a list for only the elements that are unique. An example:\r\n\r\n       [1, 2, 2, 3, 1, 4]\r\n    -&gt; [3, 4] // 1 and 2 occur more than once\r\n\r\nMost solutions I found manually compute the occurrences of all elements and then filter by the elements that have exactly one occurrence.\r\n\r\nThat does not sound too elegant to me, maybe there is a better solution, a best practice or a name for a data-structure that solves this already? I was also thinking about maybe utilizing streams, but I do not know how.\r\n\r\n----------\r\n\r\nNote that I am not asking for duplicate removal, i.e. `[1, 2, 3, 4]` but for keeping only the unique elements, so `[3, 4]`.\r\n\r\nThe order of the resulting list or what type of `Collection` exactly does not matter to me.","title":"Filter List for unique elements","body":"<p>I am searching for an elegant way to filter a list for only the elements that are unique. An example:</p>\n\n<pre><code>   [1, 2, 2, 3, 1, 4]\n-&gt; [3, 4] // 1 and 2 occur more than once\n</code></pre>\n\n<p>Most solutions I found manually compute the occurrences of all elements and then filter by the elements that have exactly one occurrence.</p>\n\n<p>That does not sound too elegant to me, maybe there is a better solution, a best practice or a name for a data-structure that solves this already? I was also thinking about maybe utilizing streams, but I do not know how.</p>\n\n<hr>\n\n<p>Note that I am not asking for duplicate removal, i.e. <code>[1, 2, 3, 4]</code> but for keeping only the unique elements, so <code>[3, 4]</code>.</p>\n\n<p>The order of the resulting list or what type of <code>Collection</code> exactly does not matter to me.</p>\n"},{"tags":["java","for-loop","java-8","java-stream"],"comments":[{"owner":{"account_id":9735171,"reputation":2264,"user_id":7218656,"accept_rate":75,"display_name":"Arun Sudhakaran"},"score":1,"creation_date":1695189181,"post_id":77139292,"comment_id":135988931,"body_markdown":"Does this answer your question? [Local variable log defined in an enclosing scope must be final or effectively final](https://stackoverflow.com/questions/38402493/local-variable-log-defined-in-an-enclosing-scope-must-be-final-or-effectively-fi)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/38402493/local-variable-log-defined-in-an-enclosing-scope-must-be-final-or-effectively-fi\">Local variable log defined in an enclosing scope must be final or effectively final</a>"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1695218212,"post_id":77139292,"comment_id":135995126,"body_markdown":"If you “practice algorithms” you should note that this is a very inefficient approach. Hiding the second loop in a Stream operation does not change the fact that you have two nested loops here. Compare with `for(Character c: list) { switch(c) { case &#39;n&#39; -&gt; counts[0]++; case &#39;s&#39; -&gt; counts[1]++; case &#39;e&#39; -&gt; counts[2]++; case &#39;w&#39; -&gt; counts[3]++; } }` which does just a single loop. But your question looks like an [xy problem](https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem/66378#66378) anyway, as your `return true;` hides the actual goal (which might have a better solution)","body":"If you “practice algorithms” you should note that this is a very inefficient approach. Hiding the second loop in a Stream operation does not change the fact that you have two nested loops here. Compare with <code>for(Character c: list) { switch(c) { case &#39;n&#39; -&gt; counts[0]++; case &#39;s&#39; -&gt; counts[1]++; case &#39;e&#39; -&gt; counts[2]++; case &#39;w&#39; -&gt; counts[3]++; } }</code> which does just a single loop. But your question looks like an <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem/66378#66378\">xy problem</a> anyway, as your <code>return true;</code> hides the actual goal (which might have a better solution)"}],"answers":[{"tags":[],"owner":{"account_id":16346339,"reputation":1,"user_id":11805977,"display_name":"An Nguyễn"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695186140,"creation_date":1695186116,"answer_id":77139400,"question_id":77139292,"body_markdown":"just like the error message said, you are trying to pass a local variable into a lambda expression, which not allow if the variable in case that variable was not a final or effectively final. \r\n\r\nyou can try to fix it which this one \r\n\r\n    for(int x = 0; x&lt;counts.length; x++) {\r\n        final int finalValue = x;\r\n        counts[x] = (int) list.stream().\r\n                filter(i -&gt; i==cp[finalValue])\r\n                .count();\r\n    }","title":"How I add a stream into a loop, using filter to compare a global variable?","body":"<p>just like the error message said, you are trying to pass a local variable into a lambda expression, which not allow if the variable in case that variable was not a final or effectively final.</p>\n<p>you can try to fix it which this one</p>\n<pre><code>for(int x = 0; x&lt;counts.length; x++) {\n    final int finalValue = x;\n    counts[x] = (int) list.stream().\n            filter(i -&gt; i==cp[finalValue])\n            .count();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695191165,"creation_date":1695189354,"answer_id":77139625,"question_id":77139292,"body_markdown":"&gt; _&quot;... I get an error in cp[x], with the message &quot;local variable x defined in an enclosing scope must be final or effectively final&quot; ...&quot;_\r\n\r\nThe following is from the _[Java Language Specification](https://docs.oracle.com/javase/specs/jls/se20/html/index.html)_.\r\n\r\n_[8.1.3. Inner Classes and Enclosing Instances](https://docs.oracle.com/javase/specs/jls/se20/html/jls-8.html#jls-8.1.3)_,\r\n\r\n&gt; _&quot;... Any local variable, formal parameter, or exception parameter used but not declared in an inner class must either be final or effectively final ([&#167;4.12.4](https://docs.oracle.com/javase/specs/jls/se20/html/jls-4.html#jls-4.12.4)), as specified in [&#167;6.5.6.1](https://docs.oracle.com/javase/specs/jls/se20/html/jls-6.html#jls-6.5.6.1). ...&quot;_\r\n\r\n&gt; _&quot;... Anyone can help me to how can I resolve this?&quot;_\r\n\r\nThe advanced _[for-loop](https://docs.oracle.com/javase/tutorial/java/nutsandbolts/for.html)_ will produce _effectively-final_ values, so iterate on _cp_.\r\n\r\n```java\r\nCharacter[] list = { &#39;n&#39;, &#39;s&#39;, &#39;s&#39;, &#39;w&#39;, &#39;e&#39;, &#39;n&#39;, &#39;n&#39;, &#39;w&#39;, &#39;w&#39;, &#39;w&#39; };\r\nint[] counts = {0,0,0,0};\r\nchar [] cp = {&#39;n&#39;, &#39;s&#39;, &#39;e&#39;, &#39;w&#39;};\r\nint i = 0;\r\nfor (char c : cp)\r\n    counts[i++] = (int) Stream.of(list).filter(x -&gt; x == c).count();\r\n```\r\n\r\nOutput\r\n\r\n```none\r\n[3, 2, 1, 4]\r\n```","title":"How I add a stream into a loop, using filter to compare a global variable?","body":"<blockquote>\n<p><em>&quot;... I get an error in cp[x], with the message &quot;local variable x defined in an enclosing scope must be final or effectively final&quot; ...&quot;</em></p>\n</blockquote>\n<p>The following is from the <em><a href=\"https://docs.oracle.com/javase/specs/jls/se20/html/index.html\" rel=\"nofollow noreferrer\">Java Language Specification</a></em>.</p>\n<p><em><a href=\"https://docs.oracle.com/javase/specs/jls/se20/html/jls-8.html#jls-8.1.3\" rel=\"nofollow noreferrer\">8.1.3. Inner Classes and Enclosing Instances</a></em>,</p>\n<blockquote>\n<p><em>&quot;... Any local variable, formal parameter, or exception parameter used but not declared in an inner class must either be final or effectively final (<a href=\"https://docs.oracle.com/javase/specs/jls/se20/html/jls-4.html#jls-4.12.4\" rel=\"nofollow noreferrer\">§4.12.4</a>), as specified in <a href=\"https://docs.oracle.com/javase/specs/jls/se20/html/jls-6.html#jls-6.5.6.1\" rel=\"nofollow noreferrer\">§6.5.6.1</a>. ...&quot;</em></p>\n</blockquote>\n<blockquote>\n<p><em>&quot;... Anyone can help me to how can I resolve this?&quot;</em></p>\n</blockquote>\n<p>The advanced <em><a href=\"https://docs.oracle.com/javase/tutorial/java/nutsandbolts/for.html\" rel=\"nofollow noreferrer\">for-loop</a></em> will produce <em>effectively-final</em> values, so iterate on <em>cp</em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Character[] list = { 'n', 's', 's', 'w', 'e', 'n', 'n', 'w', 'w', 'w' };\nint[] counts = {0,0,0,0};\nchar [] cp = {'n', 's', 'e', 'w'};\nint i = 0;\nfor (char c : cp)\n    counts[i++] = (int) Stream.of(list).filter(x -&gt; x == c).count();\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>[3, 2, 1, 4]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3449265,"reputation":389,"user_id":2889269,"accept_rate":83,"display_name":"kusama"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695190612,"creation_date":1695190612,"answer_id":77139737,"question_id":77139292,"body_markdown":"Maybe the below code is helpful\r\n\r\n                import java.util.Arrays;\r\n                import java.util.List;\r\n\r\n                public class Main {\r\n                    public static void main(String[] args) {\r\n                        List&lt;Character&gt; charList = Arrays.asList(&#39;n&#39;, &#39;s&#39;, &#39;s&#39;, &#39;w&#39;, &#39;e&#39;, &#39;n&#39;, &#39;n&#39;, &#39;w&#39;, &#39;w&#39;, &#39;w&#39;);\r\n                        \r\n                        boolean result = getReturnOrigin(charList);\r\n                        \r\n                        System.out.println(&quot;Result: &quot; + result);\r\n                    }\r\n\r\n                    public static boolean getReturnOrigin(List&lt;Character&gt; list) {\r\n\r\n                        // list:[&#39;n&#39;, &#39;s&#39;, &#39;s&#39;, &#39;w&#39;, &#39;e&#39;, &#39;n&#39;, &#39;n&#39;, &#39;w&#39;, &#39;w&#39;, &#39;w&#39;]\r\n\r\n                        // counts: {n, s, e, w}\r\n                        int[] counts = {0, 0, 0, 0};\r\n                        char[] cp = {&#39;n&#39;, &#39;s&#39;, &#39;e&#39;, &#39;w&#39;};\r\n\r\n                        for (int x = 0; x &lt; counts.length; x++) {\r\n                            int finalX = x; // Create an effectively final copy of x\r\n                            counts[x] = (int) list.stream()\r\n                                    .filter(i -&gt; i == cp[finalX]) // Use the finalX copy here\r\n                                    .count();\r\n                        }\r\n\r\n                        return true;\r\n                    }\r\n                }\r\n\r\nThe error you are facing, \r\n**&quot;local variable x defined in an enclosing scope must be final or effectively final&quot;** \r\n\r\nis because you&#39;re trying to access the variable x inside the lambda expression of the filter method, but x is not effectively final within the loop. In Java, lambda expressions can only access local variables that are effectively final, which means they should not be modified after their initial assignment.\r\n\r\nTo work around this, you can create a copy of x that is effectively final and can be used within the lambda expression. ","title":"How I add a stream into a loop, using filter to compare a global variable?","body":"<p>Maybe the below code is helpful</p>\n<pre><code>            import java.util.Arrays;\n            import java.util.List;\n\n            public class Main {\n                public static void main(String[] args) {\n                    List&lt;Character&gt; charList = Arrays.asList('n', 's', 's', 'w', 'e', 'n', 'n', 'w', 'w', 'w');\n                    \n                    boolean result = getReturnOrigin(charList);\n                    \n                    System.out.println(&quot;Result: &quot; + result);\n                }\n\n                public static boolean getReturnOrigin(List&lt;Character&gt; list) {\n\n                    // list:['n', 's', 's', 'w', 'e', 'n', 'n', 'w', 'w', 'w']\n\n                    // counts: {n, s, e, w}\n                    int[] counts = {0, 0, 0, 0};\n                    char[] cp = {'n', 's', 'e', 'w'};\n\n                    for (int x = 0; x &lt; counts.length; x++) {\n                        int finalX = x; // Create an effectively final copy of x\n                        counts[x] = (int) list.stream()\n                                .filter(i -&gt; i == cp[finalX]) // Use the finalX copy here\n                                .count();\n                    }\n\n                    return true;\n                }\n            }\n</code></pre>\n<p>The error you are facing,\n<strong>&quot;local variable x defined in an enclosing scope must be final or effectively final&quot;</strong></p>\n<p>is because you're trying to access the variable x inside the lambda expression of the filter method, but x is not effectively final within the loop. In Java, lambda expressions can only access local variables that are effectively final, which means they should not be modified after their initial assignment.</p>\n<p>To work around this, you can create a copy of x that is effectively final and can be used within the lambda expression.</p>\n"},{"tags":[],"owner":{"account_id":216120,"reputation":49213,"user_id":471160,"accept_rate":90,"display_name":"marcinj"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695194578,"creation_date":1695194140,"answer_id":77140101,"question_id":77139292,"body_markdown":"&gt; error: local variables referenced from a lambda expression must be final or effectively final\r\n\r\nthis error is because you&#39;re trying to access the non-final variable `x` inside the lambda expression. In Java, only final or effectively final variables can be accessed in a lambda expression. Final variables are those declared with final modifier:\r\n\r\n    final int x2 = 0;\r\n\r\nand effectively-final are those which dont have final modifier, but are assigned only once:\r\n\r\n    int x2 = 0; // not modified later on\r\n\r\nYou can fix this error by creating a final copy of `x` inside the loop, and use that in your lambda expression:\r\n\r\n    for(int x = 0; x&lt;counts.length; x++) {\r\n        final int finalX = x; //actually, final is not required \r\n                              //here, but makes it clear why the copy is made.\r\n                              //also, final here prevents accidental modify of this variable if the code grows.\r\n        counts[x] = (int) list.stream().\r\n                filter(i -&gt; i==cp[finalX])\r\n                .count();\r\n    }\r\n\r\nAnother solution would be to use `IntStream.range` instead of for loop:\r\n\r\n        IntStream.range(0, counts.length).forEach(x -&gt;\r\n                counts[x] = (int) list.stream().filter(i -&gt; i == cp[x]).count()\r\n        );","title":"How I add a stream into a loop, using filter to compare a global variable?","body":"<blockquote>\n<p>error: local variables referenced from a lambda expression must be final or effectively final</p>\n</blockquote>\n<p>this error is because you're trying to access the non-final variable <code>x</code> inside the lambda expression. In Java, only final or effectively final variables can be accessed in a lambda expression. Final variables are those declared with final modifier:</p>\n<pre><code>final int x2 = 0;\n</code></pre>\n<p>and effectively-final are those which dont have final modifier, but are assigned only once:</p>\n<pre><code>int x2 = 0; // not modified later on\n</code></pre>\n<p>You can fix this error by creating a final copy of <code>x</code> inside the loop, and use that in your lambda expression:</p>\n<pre><code>for(int x = 0; x&lt;counts.length; x++) {\n    final int finalX = x; //actually, final is not required \n                          //here, but makes it clear why the copy is made.\n                          //also, final here prevents accidental modify of this variable if the code grows.\n    counts[x] = (int) list.stream().\n            filter(i -&gt; i==cp[finalX])\n            .count();\n}\n</code></pre>\n<p>Another solution would be to use <code>IntStream.range</code> instead of for loop:</p>\n<pre><code>    IntStream.range(0, counts.length).forEach(x -&gt;\n            counts[x] = (int) list.stream().filter(i -&gt; i == cp[x]).count()\n    );\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9463219,"reputation":9357,"user_id":7036419,"display_name":"Maurice Perry"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695194847,"creation_date":1695194847,"answer_id":77140200,"question_id":77139292,"body_markdown":"Consider using a `Map`:\r\n\r\n        Map&lt;Character,Integer&gt; map = list.stream().collect(\r\n                Collectors.toMap(\r\n                        Function.identity(), e -&gt; 1, (a,b) -&gt; a + b));\r\n","title":"How I add a stream into a loop, using filter to compare a global variable?","body":"<p>Consider using a <code>Map</code>:</p>\n<pre><code>    Map&lt;Character,Integer&gt; map = list.stream().collect(\n            Collectors.toMap(\n                    Function.identity(), e -&gt; 1, (a,b) -&gt; a + b));\n</code></pre>\n"}],"owner":{"account_id":29487517,"reputation":1,"user_id":22597099,"display_name":"Luis Fernando Ch&#225;vez Morales"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":82,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":5,"score":0,"last_activity_date":1695194847,"creation_date":1695184230,"question_id":77139292,"body_markdown":"I&#39;m practice algorithms and I&#39;m trying to make a stream inside a loop where the length is equals to the size of another array. There I made 2 arrays: counts[] and cp[]\r\n\r\n    public static boolean getReturnOrigin(List&lt;Character&gt; list) {\r\n    \t\t\r\n    \t//list:[&#39;n&#39;, &#39;s&#39;, &#39;s&#39;, &#39;w&#39;, &#39;e&#39;, &#39;n&#39;, &#39;n&#39;, &#39;w&#39;, &#39;w&#39;, &#39;w&#39;]\r\n    \t\t\t\r\n    \t// counts: {n, s, e, w}\r\n    \tint[] counts = {0,0,0,0};\r\n    \tchar [] cp = {&#39;n&#39;, &#39;s&#39;, &#39;e&#39;, &#39;w&#39;};\r\n    \t\t\r\n    \tfor(int x = 0; x&lt;counts.length; x++) {\r\n    \t\tcounts[x] = (int) list.stream().\r\n    \t\t\t\tfilter(i -&gt; i==cp[x])\r\n    \t\t\t\t.count();\r\n    \t}\r\n    \t\t\r\n    \treturn true;\r\n    }\r\n\r\nI&#39;m trying to store intengers in counts[] using a loop, adding a stream inside. In the stream I want to use filter to compare with each cp[x].\r\n\r\nBut I get an error in cp[x], with the message &quot;local variable x defined in an enclosing scope must be final or effectively final&quot;\r\n\r\nAnyone can help me to how can I resolve this?","title":"How I add a stream into a loop, using filter to compare a global variable?","body":"<p>I'm practice algorithms and I'm trying to make a stream inside a loop where the length is equals to the size of another array. There I made 2 arrays: counts[] and cp[]</p>\n<pre><code>public static boolean getReturnOrigin(List&lt;Character&gt; list) {\n        \n    //list:['n', 's', 's', 'w', 'e', 'n', 'n', 'w', 'w', 'w']\n            \n    // counts: {n, s, e, w}\n    int[] counts = {0,0,0,0};\n    char [] cp = {'n', 's', 'e', 'w'};\n        \n    for(int x = 0; x&lt;counts.length; x++) {\n        counts[x] = (int) list.stream().\n                filter(i -&gt; i==cp[x])\n                .count();\n    }\n        \n    return true;\n}\n</code></pre>\n<p>I'm trying to store intengers in counts[] using a loop, adding a stream inside. In the stream I want to use filter to compare with each cp[x].</p>\n<p>But I get an error in cp[x], with the message &quot;local variable x defined in an enclosing scope must be final or effectively final&quot;</p>\n<p>Anyone can help me to how can I resolve this?</p>\n"},{"tags":["java","hashset","deque","sub-array"],"answers":[{"tags":[],"owner":{"account_id":19955535,"reputation":1594,"user_id":14624235,"display_name":"Vlad L"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1606210836,"creation_date":1606210836,"answer_id":64983830,"question_id":64983328,"body_markdown":"What is the point of this line?\r\n```\r\n                   set.add((Integer)deque.peek());\r\n```\r\n\r\nI don&#39;t see anything in your code that is slow. I just wonder how you can keep track of unique numbers by using a set, given that a set only tells you if there is such a number (but not how many occurrences of the same number there are). And you don&#39;t want to keep scanning the deque to see if the number being removed is the last one.\r\n\r\nI don&#39;t think this is great/fast code, but it seems to pass the test-cases. I keep a count of how many of each integer there is in the window by using a map (and use some of your code).\r\n```\r\nimport java.util.*;\r\n\r\npublic class Main {\r\n\r\n    public static void main(String[] args) {\r\n        Scanner in = new Scanner(System.in);\r\n        Deque&lt;Integer&gt; deque = new ArrayDeque&lt;&gt;();\r\n        HashMap&lt;Integer, Integer&gt; counts = new HashMap&lt;&gt;();\r\n        int n = in.nextInt();\r\n        int m = in.nextInt();\r\n        int max = 0;\r\n        for (int i = 0; i &lt; n; i++) {\r\n            int num = in.nextInt();\r\n            deque.add(num);\r\n            int count = counts.getOrDefault(num, 0);\r\n            counts.put(num, ++count);\r\n            if (i &gt;= m - 1) {\r\n                if (counts.size() &gt; max) max = counts.size();\r\n                Integer removed = deque.removeFirst();\r\n                int removing = counts.get(removed);\r\n                removing--;\r\n                if (removing == 0) {\r\n                    counts.remove(removed);\r\n                } else {\r\n                    counts.put(removed, removing);\r\n                }\r\n            }\r\n        }\r\n        System.out.println(max);\r\n    }\r\n\r\n}\r\n\r\n```","title":"Java Deque (Finding the max number of unique integers from subarrays.)","body":"<p>What is the point of this line?</p>\n<pre><code>                   set.add((Integer)deque.peek());\n</code></pre>\n<p>I don't see anything in your code that is slow. I just wonder how you can keep track of unique numbers by using a set, given that a set only tells you if there is such a number (but not how many occurrences of the same number there are). And you don't want to keep scanning the deque to see if the number being removed is the last one.</p>\n<p>I don't think this is great/fast code, but it seems to pass the test-cases. I keep a count of how many of each integer there is in the window by using a map (and use some of your code).</p>\n<pre><code>import java.util.*;\n\npublic class Main {\n\n    public static void main(String[] args) {\n        Scanner in = new Scanner(System.in);\n        Deque&lt;Integer&gt; deque = new ArrayDeque&lt;&gt;();\n        HashMap&lt;Integer, Integer&gt; counts = new HashMap&lt;&gt;();\n        int n = in.nextInt();\n        int m = in.nextInt();\n        int max = 0;\n        for (int i = 0; i &lt; n; i++) {\n            int num = in.nextInt();\n            deque.add(num);\n            int count = counts.getOrDefault(num, 0);\n            counts.put(num, ++count);\n            if (i &gt;= m - 1) {\n                if (counts.size() &gt; max) max = counts.size();\n                Integer removed = deque.removeFirst();\n                int removing = counts.get(removed);\n                removing--;\n                if (removing == 0) {\n                    counts.remove(removed);\n                } else {\n                    counts.put(removed, removing);\n                }\n            }\n        }\n        System.out.println(max);\n    }\n\n}\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4732700,"reputation":2877,"user_id":3827850,"accept_rate":58,"display_name":"Ezio"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1622135960,"creation_date":1622135587,"answer_id":67726958,"question_id":64983328,"body_markdown":"We can optimize the space a little bit by avoiding the hashmap all together, but it seems like Hackerrank does not care about that. Any how I am putting my solution here which can solve this problem by using using a map.\r\n\r\n\r\n```\r\nprivate int countUniqueNumsInSubarrays(int[] nums, int m) {\r\n        Deque&lt;Integer&gt; deque = new LinkedList&lt;&gt;();\r\n\r\n        int maxUniqueCount = 0;\r\n\r\n        for (int i = 0; i &lt; nums.length; i++) {\r\n            // if deque&#39;s left entry is outside the window then pop it out\r\n            while (!deque.isEmpty() &amp;&amp; i - deque.peekFirst() &gt;= m) {\r\n                deque.removeFirst();\r\n            }\r\n\r\n            // this will make sure that the deque only contains unique numbers,\r\n            // this is essentially helps us avoid that extra hash map  \r\n            while (!deque.isEmpty() &amp;&amp; nums[deque.peekLast()] == nums[i]) {\r\n                deque.removeLast();\r\n            }\r\n\r\n            deque.addLast(i);\r\n\r\n            if (i &gt;= m - 1) {\r\n                maxUniqueCount = Math.max(maxUniqueCount, deque.size());\r\n            }\r\n        }\r\n\r\n        return maxUniqueCount;\r\n    }\r\n```","title":"Java Deque (Finding the max number of unique integers from subarrays.)","body":"<p>We can optimize the space a little bit by avoiding the hashmap all together, but it seems like Hackerrank does not care about that. Any how I am putting my solution here which can solve this problem by using using a map.</p>\n<pre><code>private int countUniqueNumsInSubarrays(int[] nums, int m) {\n        Deque&lt;Integer&gt; deque = new LinkedList&lt;&gt;();\n\n        int maxUniqueCount = 0;\n\n        for (int i = 0; i &lt; nums.length; i++) {\n            // if deque's left entry is outside the window then pop it out\n            while (!deque.isEmpty() &amp;&amp; i - deque.peekFirst() &gt;= m) {\n                deque.removeFirst();\n            }\n\n            // this will make sure that the deque only contains unique numbers,\n            // this is essentially helps us avoid that extra hash map  \n            while (!deque.isEmpty() &amp;&amp; nums[deque.peekLast()] == nums[i]) {\n                deque.removeLast();\n            }\n\n            deque.addLast(i);\n\n            if (i &gt;= m - 1) {\n                maxUniqueCount = Math.max(maxUniqueCount, deque.size());\n            }\n        }\n\n        return maxUniqueCount;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4040732,"reputation":93,"user_id":3323675,"accept_rate":67,"display_name":"aexposito"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1639785698,"creation_date":1639785698,"answer_id":70399986,"question_id":64983328,"body_markdown":"Just wanted to share how I solved it in case it helps.\r\n\r\n    public static void main(String[] args) {\r\n        Scanner in = new Scanner(System.in);\r\n        Deque deque = new ArrayDeque();\r\n        Set&lt;Integer&gt; integers = new HashSet&lt;&gt;();\r\n        int n = in.nextInt();\r\n        int m = in.nextInt();\r\n        long result = 0;\r\n        for (int i = 0; i &lt; n; i++) {\r\n            int num = in.nextInt();\r\n            deque.add(num);\r\n            integers.add(num);\r\n            if (deque.size() == m) {\r\n                long currentSize = integers.size();\r\n                if (currentSize &gt; result) {\r\n                    result = currentSize;\r\n                }\r\n                Integer removed = (Integer) deque.pollFirst();\r\n                if (!deque.contains(removed)) {\r\n                    integers.remove(removed);\r\n                }\r\n            }\r\n        }\r\n        System.out.println(result);\r\n    }","title":"Java Deque (Finding the max number of unique integers from subarrays.)","body":"<p>Just wanted to share how I solved it in case it helps.</p>\n<pre><code>public static void main(String[] args) {\n    Scanner in = new Scanner(System.in);\n    Deque deque = new ArrayDeque();\n    Set&lt;Integer&gt; integers = new HashSet&lt;&gt;();\n    int n = in.nextInt();\n    int m = in.nextInt();\n    long result = 0;\n    for (int i = 0; i &lt; n; i++) {\n        int num = in.nextInt();\n        deque.add(num);\n        integers.add(num);\n        if (deque.size() == m) {\n            long currentSize = integers.size();\n            if (currentSize &gt; result) {\n                result = currentSize;\n            }\n            Integer removed = (Integer) deque.pollFirst();\n            if (!deque.contains(removed)) {\n                integers.remove(removed);\n            }\n        }\n    }\n    System.out.println(result);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26415303,"reputation":1,"user_id":20063805,"display_name":"Rafaelbf84"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663867497,"creation_date":1663867497,"answer_id":73818585,"question_id":64983328,"body_markdown":"    import java.io.*;\r\nimport java.util.*;\r\nimport java.util.stream.Stream;\r\n\r\npublic class Solution {\r\n\r\n    public static void main(String[] args) {\r\n        var sc = new Scanner(System.in);\r\n        \r\n        var split = sc.nextLine().split(&quot; &quot;);\r\n        int n = Integer.parseInt(split[0]);\r\n        int m = Integer.parseInt(split[1]);\r\n        \r\n        if (!(1 &lt;= n &amp;&amp; n &lt;= 100_000)) {\r\n            System.exit(0);\r\n        }\r\n        if (!(1 &lt;= m &amp;&amp; m &lt;= 100_000)) {\r\n            System.exit(0);\r\n        }\r\n        if (!(m &lt;= n)) {\r\n            System.exit(0);\r\n        }\r\n        \r\n        split = sc.nextLine().split(&quot; &quot;);\r\n        \r\n        sc.close();\r\n        int maxNumUniqueInt = 0;\r\n        HashSet&lt;Integer&gt; dist = new HashSet&lt;&gt;();\r\n        Deque&lt;Integer&gt; deque = new ArrayDeque&lt;&gt;();\r\n        int[] arr = Stream.of(split).mapToInt(Integer::parseInt).toArray();\r\n        \r\n        for (int i = 0; i &lt; m; i++) {\r\n            deque.addLast(arr[i]);\r\n            dist.add(arr[i]);\r\n        }\r\n        int num = dist.size();\r\n        if (maxNumUniqueInt &lt; num) {\r\n            maxNumUniqueInt = num;\r\n        }\r\n        for (int i = m; i &lt; n; i++) {\r\n            deque.addLast(arr[i]);\r\n            dist.add(arr[i]);\r\n            int remove = deque.removeFirst();\r\n            if (!deque.contains(remove)) {\r\n                dist.remove(remove);\r\n            }\r\n            num = dist.size();\r\n            if (maxNumUniqueInt &lt; num) {\r\n                maxNumUniqueInt = num;\r\n            }\r\n           // System.out.println(i + &quot;  |  &quot; + deque + &quot;  |  &quot; + dist + &quot;  |  &quot; + maxNumUniqueInt);\r\n        }\r\n        \r\n        System.out.println(maxNumUniqueInt);\r\n    }\r\n \r\n}","title":"Java Deque (Finding the max number of unique integers from subarrays.)","body":"<pre><code>import java.io.*;\n</code></pre>\n<p>import java.util.*;\nimport java.util.stream.Stream;</p>\n<p>public class Solution {</p>\n<pre><code>public static void main(String[] args) {\n    var sc = new Scanner(System.in);\n    \n    var split = sc.nextLine().split(&quot; &quot;);\n    int n = Integer.parseInt(split[0]);\n    int m = Integer.parseInt(split[1]);\n    \n    if (!(1 &lt;= n &amp;&amp; n &lt;= 100_000)) {\n        System.exit(0);\n    }\n    if (!(1 &lt;= m &amp;&amp; m &lt;= 100_000)) {\n        System.exit(0);\n    }\n    if (!(m &lt;= n)) {\n        System.exit(0);\n    }\n    \n    split = sc.nextLine().split(&quot; &quot;);\n    \n    sc.close();\n    int maxNumUniqueInt = 0;\n    HashSet&lt;Integer&gt; dist = new HashSet&lt;&gt;();\n    Deque&lt;Integer&gt; deque = new ArrayDeque&lt;&gt;();\n    int[] arr = Stream.of(split).mapToInt(Integer::parseInt).toArray();\n    \n    for (int i = 0; i &lt; m; i++) {\n        deque.addLast(arr[i]);\n        dist.add(arr[i]);\n    }\n    int num = dist.size();\n    if (maxNumUniqueInt &lt; num) {\n        maxNumUniqueInt = num;\n    }\n    for (int i = m; i &lt; n; i++) {\n        deque.addLast(arr[i]);\n        dist.add(arr[i]);\n        int remove = deque.removeFirst();\n        if (!deque.contains(remove)) {\n            dist.remove(remove);\n        }\n        num = dist.size();\n        if (maxNumUniqueInt &lt; num) {\n            maxNumUniqueInt = num;\n        }\n       // System.out.println(i + &quot;  |  &quot; + deque + &quot;  |  &quot; + dist + &quot;  |  &quot; + maxNumUniqueInt);\n    }\n    \n    System.out.println(maxNumUniqueInt);\n}\n</code></pre>\n<p>}</p>\n"},{"tags":[],"owner":{"account_id":15382846,"reputation":1,"user_id":11097785,"display_name":"Suresh Nayak"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675471951,"creation_date":1675471174,"answer_id":75342262,"question_id":64983328,"body_markdown":"    import java.util.*;\r\n    public class test {\r\n        public static void main(String[] args) {\r\n            Scanner in = new Scanner(System.in);\r\n            Deque&lt;Integer&gt; deque = new ArrayDeque&lt;&gt;();\r\n            int n = in.nextInt();\r\n            int m = in.nextInt();\r\n            int maxUnique = 0;\r\n            Map&lt;Integer, Boolean&gt; uniqSet = new HashMap&lt;&gt;();\r\n            for (int i = 0; i &lt; n; i++) {\r\n              int num = in.nextInt();\r\n               deque.addLast(num);\r\n               uniqSet.put(num, true);\r\n               if(deque.size() == m){\r\n                //  int uniqueSize = new HashSet&lt;&gt;(deque).size();\r\n                int uniqueSize = uniqSet.size();\r\n                 maxUnique = Math.max(maxUnique, uniqueSize);\r\n      \r\n                 int x = deque.removeFirst();\r\n                 if(!deque.contains(x)){\r\n                   uniqSet.remove(x);\r\n                 }\r\n               }\r\n            }\r\n            in.close();\r\n            System.out.println(maxUnique);\r\n        }\r\n    }\r\n","title":"Java Deque (Finding the max number of unique integers from subarrays.)","body":"<pre><code>import java.util.*;\npublic class test {\n    public static void main(String[] args) {\n        Scanner in = new Scanner(System.in);\n        Deque&lt;Integer&gt; deque = new ArrayDeque&lt;&gt;();\n        int n = in.nextInt();\n        int m = in.nextInt();\n        int maxUnique = 0;\n        Map&lt;Integer, Boolean&gt; uniqSet = new HashMap&lt;&gt;();\n        for (int i = 0; i &lt; n; i++) {\n          int num = in.nextInt();\n           deque.addLast(num);\n           uniqSet.put(num, true);\n           if(deque.size() == m){\n            //  int uniqueSize = new HashSet&lt;&gt;(deque).size();\n            int uniqueSize = uniqSet.size();\n             maxUnique = Math.max(maxUnique, uniqueSize);\n  \n             int x = deque.removeFirst();\n             if(!deque.contains(x)){\n               uniqSet.remove(x);\n             }\n           }\n        }\n        in.close();\n        System.out.println(maxUnique);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29488796,"reputation":1,"user_id":22598142,"display_name":"Vijay Kumar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695194778,"creation_date":1695194778,"answer_id":77140194,"question_id":64983328,"body_markdown":"Instead of trying to remove elements from hashSet, we only remove elements from deque that are no longer in the window. If an element is not present in the deque, it means it is no longer within the window, so we remove it from hashSet.\r\n\r\nWe check if hashSet.size() is greater than max to update the maximum count of unique elements.\r\n\r\n    public class test {\r\n        public static void main(String[] args) {\r\n            Scanner in = new Scanner(System.in);\r\n            Deque deque = new ArrayDeque&lt;Integer&gt;();\r\n            HashSet hashSet = new HashSet&lt;Integer&gt;();\r\n            int n = in.nextInt();\r\n            int m = in.nextInt();\r\n            int max = 1; \r\n            for (int i = 0; i &lt; n; i++) {\r\n                int num = in.nextInt();\r\n                deque.add(num);\r\n                hashSet.add(num);\r\n                if (i &gt;= m-1) {\r\n                    if (hashSet.size() &gt; max) max = hashSet.size();\r\n                    int removeElement = (Integer)deque.remove();\r\n                    if (!deque.contains(removeElement)) {\r\n                        hashSet.remove(removeElement);\r\n                    }\r\n                }\r\n            }\r\n            System.out.println(max);\r\n        }\r\n    }","title":"Java Deque (Finding the max number of unique integers from subarrays.)","body":"<p>Instead of trying to remove elements from hashSet, we only remove elements from deque that are no longer in the window. If an element is not present in the deque, it means it is no longer within the window, so we remove it from hashSet.</p>\n<p>We check if hashSet.size() is greater than max to update the maximum count of unique elements.</p>\n<pre><code>public class test {\n    public static void main(String[] args) {\n        Scanner in = new Scanner(System.in);\n        Deque deque = new ArrayDeque&lt;Integer&gt;();\n        HashSet hashSet = new HashSet&lt;Integer&gt;();\n        int n = in.nextInt();\n        int m = in.nextInt();\n        int max = 1; \n        for (int i = 0; i &lt; n; i++) {\n            int num = in.nextInt();\n            deque.add(num);\n            hashSet.add(num);\n            if (i &gt;= m-1) {\n                if (hashSet.size() &gt; max) max = hashSet.size();\n                int removeElement = (Integer)deque.remove();\n                if (!deque.contains(removeElement)) {\n                    hashSet.remove(removeElement);\n                }\n            }\n        }\n        System.out.println(max);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":19942423,"reputation":43,"user_id":14613880,"display_name":"Code Hard"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2141,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":6,"score":3,"last_activity_date":1695194778,"creation_date":1606208911,"question_id":64983328,"body_markdown":"I was trying to solve a HackerRank problem on Java Deque. My code passed all the cases apart from the ones which have 100,000 inputs.\r\n\r\nProblem: In this problem, you are given N integers. You need to find the maximum number of unique integers among all the possible contiguous subarrays of size M.\r\n---&gt;So we wre given N integers, and need to find the number of &quot;unique integers&quot; in each contagious subarray(of size M). And then print the maximum number of those &quot;unique Integers&quot;.\r\n\r\n```\r\nlink: https://www.hackerrank.com/challenges/java-dequeue/problem\r\n```\r\n\r\nMy Code:\r\n```\r\npublic static void main(String[] args) {\r\n            Scanner in = new Scanner(System.in);\r\n            Deque deque = new ArrayDeque&lt;&gt;();\r\n            HashSet&lt;Integer&gt; set = new HashSet&lt;&gt;();\r\n            int n = in.nextInt();\r\n            int m = in.nextInt();\r\n            int max=0;\r\n            for (int i = 0; i &lt; n; i++) {\r\n                int num = in.nextInt();\r\n                deque.add(num);\r\n                set.add(num);\r\n                if(i&gt;=m-1){\r\n                    if(set.size()&gt;max)max=set.size();\r\n                    Integer removed=(Integer)deque.removeFirst();\r\n                    set.remove(removed);\r\n                   set.add((Integer)deque.peek());\r\n                }\r\n                \r\n            }\r\n            System.out.println(max);\r\n        }\r\n\r\n```\r\nPlease tell me where my code went wrong.","title":"Java Deque (Finding the max number of unique integers from subarrays.)","body":"<p>I was trying to solve a HackerRank problem on Java Deque. My code passed all the cases apart from the ones which have 100,000 inputs.</p>\n<p>Problem: In this problem, you are given N integers. You need to find the maximum number of unique integers among all the possible contiguous subarrays of size M.\n---&gt;So we wre given N integers, and need to find the number of &quot;unique integers&quot; in each contagious subarray(of size M). And then print the maximum number of those &quot;unique Integers&quot;.</p>\n<pre><code>link: https://www.hackerrank.com/challenges/java-dequeue/problem\n</code></pre>\n<p>My Code:</p>\n<pre><code>public static void main(String[] args) {\n            Scanner in = new Scanner(System.in);\n            Deque deque = new ArrayDeque&lt;&gt;();\n            HashSet&lt;Integer&gt; set = new HashSet&lt;&gt;();\n            int n = in.nextInt();\n            int m = in.nextInt();\n            int max=0;\n            for (int i = 0; i &lt; n; i++) {\n                int num = in.nextInt();\n                deque.add(num);\n                set.add(num);\n                if(i&gt;=m-1){\n                    if(set.size()&gt;max)max=set.size();\n                    Integer removed=(Integer)deque.removeFirst();\n                    set.remove(removed);\n                   set.add((Integer)deque.peek());\n                }\n                \n            }\n            System.out.println(max);\n        }\n\n</code></pre>\n<p>Please tell me where my code went wrong.</p>\n"},{"tags":["java","reflection","final"],"comments":[{"owner":{"account_id":214894,"reputation":9047,"user_id":469153,"accept_rate":71,"display_name":"iirekm"},"score":0,"creation_date":1436273365,"post_id":4516381,"comment_id":50532501,"body_markdown":"See this: http://stackoverflow.com/questions/3301635/change-private-static-final-field-using-java-reflection/31268945#31268945","body":"See this: <a href=\"http://stackoverflow.com/questions/3301635/change-private-static-final-field-using-java-reflection/31268945#31268945\" title=\"change private static final field using java reflection\">stackoverflow.com/questions/3301635/&hellip;</a>"},{"owner":{"account_id":214894,"reputation":9047,"user_id":469153,"accept_rate":71,"display_name":"iirekm"},"score":0,"creation_date":1436273428,"post_id":4516381,"comment_id":50532561,"body_markdown":"http://stackoverflow.com/questions/3301635/change-private-static-final-field-using-java-reflection/31268945#31268945","body":"<a href=\"http://stackoverflow.com/questions/3301635/change-private-static-final-field-using-java-reflection/31268945#31268945\" title=\"change private static final field using java reflection\">stackoverflow.com/questions/3301635/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":115173,"reputation":3150,"user_id":302517,"display_name":"JiP"},"down_vote_count":1,"up_vote_count":73,"is_accepted":true,"score":72,"last_activity_date":1695194563,"creation_date":1293088440,"answer_id":4516608,"question_id":4516381,"body_markdown":"[This answer][1] is more than exhaustive on the topic.\r\n\r\n\r\nJLS 17.5.3 Subsequent Modification of Final Fields\r\n\r\n&gt; Even then, there are a number of complications. If a final field is\r\n&gt; initialized to a compile-time constant in the field declaration,\r\n&gt; changes to the final field may not be observed, since uses of that\r\n&gt; final field are replaced at compile time with the compile-time\r\n&gt; constant.\r\n\r\nBut, if you read the paragraph above very carefully, you may find a way around here (set the `private final` field in the constructor instead of in the field definition):\r\n\r\n\r\n    import java.lang.reflect.Field;\r\n    \r\n    \r\n    public class Test {\r\n    \r\n      public static void main(String[] args) throws Exception {\r\n        WithPrivateFinalField pf = new WithPrivateFinalField();\r\n        System.out.println(pf);\r\n        Field f = pf.getClass().getDeclaredField(&quot;s&quot;);\r\n        f.setAccessible(true);\r\n        System.out.println(&quot;f.get(pf): &quot; + f.get(pf));\r\n        f.set(pf, &quot;No, you’re not!&quot;);\r\n        System.out.println(pf);\r\n        System.out.println(&quot;f.get(pf): &quot; + f.get(pf));\r\n      }\r\n    \r\n      private static class WithPrivateFinalField {\r\n        private final String s;\r\n    \r\n        public WithPrivateFinalField() {\r\n          this.s = &quot;I’m totally safe&quot;;\r\n        }\r\n        public String toString() {\r\n          return &quot;s = &quot; + s;\r\n        }\r\n      }\r\n    \r\n    }\r\n\r\nThe output is then as follows:\r\n\r\n    s = I’m totally safe\r\n    f.get(pf): I’m totally safe\r\n    s = No, you’re not!\r\n    f.get(pf): No, you’re not!\r\n\r\nHope this helps a bit.\r\n\r\n[1]: https://stackoverflow.com/questions/3301635/change-private-static-final-field-using-java-reflection\r\n","title":"Changing private final fields via reflection","body":"<p><a href=\"https://stackoverflow.com/questions/3301635/change-private-static-final-field-using-java-reflection\">This answer</a> is more than exhaustive on the topic.</p>\n<p>JLS 17.5.3 Subsequent Modification of Final Fields</p>\n<blockquote>\n<p>Even then, there are a number of complications. If a final field is\ninitialized to a compile-time constant in the field declaration,\nchanges to the final field may not be observed, since uses of that\nfinal field are replaced at compile time with the compile-time\nconstant.</p>\n</blockquote>\n<p>But, if you read the paragraph above very carefully, you may find a way around here (set the <code>private final</code> field in the constructor instead of in the field definition):</p>\n<pre><code>import java.lang.reflect.Field;\n\n\npublic class Test {\n\n  public static void main(String[] args) throws Exception {\n    WithPrivateFinalField pf = new WithPrivateFinalField();\n    System.out.println(pf);\n    Field f = pf.getClass().getDeclaredField(&quot;s&quot;);\n    f.setAccessible(true);\n    System.out.println(&quot;f.get(pf): &quot; + f.get(pf));\n    f.set(pf, &quot;No, you’re not!&quot;);\n    System.out.println(pf);\n    System.out.println(&quot;f.get(pf): &quot; + f.get(pf));\n  }\n\n  private static class WithPrivateFinalField {\n    private final String s;\n\n    public WithPrivateFinalField() {\n      this.s = &quot;I’m totally safe&quot;;\n    }\n    public String toString() {\n      return &quot;s = &quot; + s;\n    }\n  }\n\n}\n</code></pre>\n<p>The output is then as follows:</p>\n<pre><code>s = I’m totally safe\nf.get(pf): I’m totally safe\ns = No, you’re not!\nf.get(pf): No, you’re not!\n</code></pre>\n<p>Hope this helps a bit.</p>\n"},{"tags":[],"owner":{"account_id":119097,"reputation":85328,"user_id":310574,"accept_rate":80,"display_name":"Gabe"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1293088536,"creation_date":1293088536,"answer_id":4516617,"question_id":4516381,"body_markdown":"Being `final`, the compiler expected the value not to change, so it probably hardcoded the string directly into your `toString` method.","title":"Changing private final fields via reflection","body":"<p>Being <code>final</code>, the compiler expected the value not to change, so it probably hardcoded the string directly into your <code>toString</code> method.</p>\n"},{"tags":[],"owner":{"account_id":23611,"reputation":36322,"user_id":59279,"accept_rate":85,"display_name":"Joonas Pulakka"},"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1293088935,"creation_date":1293088935,"answer_id":4516654,"question_id":4516381,"body_markdown":"This\r\n\r\n    class WithPrivateFinalField {\r\n        private final String s = &quot;I’m totally safe&quot;;\r\n        public String toString() {\r\n            return &quot;s = &quot; + s;\r\n        }  \r\n    } \r\n\r\nactually compiles like this:\r\n\r\n    class WithPrivateFinalField {\r\n        private final String s = &quot;I’m totally safe&quot;;\r\n        public String toString() {\r\n            return &quot;s = I’m totally safe&quot;;\r\n        }  \r\n    }\r\n\r\nThat is, **compile-time constants get inlined.** See [this](https://stackoverflow.com/questions/377819/are-all-compile-time-constants-inlined) question. The easiest way to avoid inlining is to declare the `String` like this:\r\n\r\n    private final String s = &quot;I’m totally safe&quot;.intern();\r\n\r\nFor other types, a trivial method call does the trick:\r\n\r\n    private final int integerConstant = identity(42);\r\n    private static int identity(int number) {\r\n        return number;\r\n    }","title":"Changing private final fields via reflection","body":"<p>This</p>\n\n<pre><code>class WithPrivateFinalField {\n    private final String s = \"I’m totally safe\";\n    public String toString() {\n        return \"s = \" + s;\n    }  \n} \n</code></pre>\n\n<p>actually compiles like this:</p>\n\n<pre><code>class WithPrivateFinalField {\n    private final String s = \"I’m totally safe\";\n    public String toString() {\n        return \"s = I’m totally safe\";\n    }  \n}\n</code></pre>\n\n<p>That is, <strong>compile-time constants get inlined.</strong> See <a href=\"https://stackoverflow.com/questions/377819/are-all-compile-time-constants-inlined\">this</a> question. The easiest way to avoid inlining is to declare the <code>String</code> like this:</p>\n\n<pre><code>private final String s = \"I’m totally safe\".intern();\n</code></pre>\n\n<p>For other types, a trivial method call does the trick:</p>\n\n<pre><code>private final int integerConstant = identity(42);\nprivate static int identity(int number) {\n    return number;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6664,"reputation":85917,"user_id":11296,"display_name":"Bert F"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1293089726,"creation_date":1293089726,"answer_id":4516724,"question_id":4516381,"body_markdown":"Here&#39;s a decompile of `WithPrivateFinalField` class file (I put it in a separate class for simplicity):\r\n\r\n      WithPrivateFinalField();\r\n         0  aload_0 [this]\r\n         1  invokespecial java.lang.Object() [13]\r\n         4  aload_0 [this]\r\n         5  ldc &lt;String &quot;I’m totally safe&quot;&gt; [8]\r\n         7  putfield WithPrivateFinalField.s : java.lang.String [15]\r\n        10  return\r\n          Line numbers:\r\n            [pc: 0, line: 2]\r\n            [pc: 4, line: 3]\r\n            [pc: 10, line: 2]\r\n          Local variable table:\r\n            [pc: 0, pc: 11] local: this index: 0 type: WithPrivateFinalField\r\n      \r\n      // Method descriptor #22 ()Ljava/lang/String;\r\n      // Stack: 1, Locals: 1\r\n      public java.lang.String toString();\r\n        0  ldc &lt;String &quot;s = I’m totally safe&quot;&gt; [23]\r\n        2  areturn\r\n          Line numbers:\r\n            [pc: 0, line: 6]\r\n          Local variable table:\r\n            [pc: 0, pc: 3] local: this index: 0 type: WithPrivateFinalField\r\n\r\nNote in the `toString()` method, the constant used at address 0 [`0  ldc &lt;String &quot;s = I’m totally safe&quot;&gt; [23]`] shows the compiler already concatenated the string literal `&quot;s = &quot;` and the private final field `&quot; I’m totally safe&quot;` together in advance and stored it.  The toString() method will always return `&quot;s = I’m totally safe&quot;` regardless of how the instance variable `s` changes.","title":"Changing private final fields via reflection","body":"<p>Here's a decompile of <code>WithPrivateFinalField</code> class file (I put it in a separate class for simplicity):</p>\n\n<pre><code>  WithPrivateFinalField();\n     0  aload_0 [this]\n     1  invokespecial java.lang.Object() [13]\n     4  aload_0 [this]\n     5  ldc &lt;String \"I’m totally safe\"&gt; [8]\n     7  putfield WithPrivateFinalField.s : java.lang.String [15]\n    10  return\n      Line numbers:\n        [pc: 0, line: 2]\n        [pc: 4, line: 3]\n        [pc: 10, line: 2]\n      Local variable table:\n        [pc: 0, pc: 11] local: this index: 0 type: WithPrivateFinalField\n\n  // Method descriptor #22 ()Ljava/lang/String;\n  // Stack: 1, Locals: 1\n  public java.lang.String toString();\n    0  ldc &lt;String \"s = I’m totally safe\"&gt; [23]\n    2  areturn\n      Line numbers:\n        [pc: 0, line: 6]\n      Local variable table:\n        [pc: 0, pc: 3] local: this index: 0 type: WithPrivateFinalField\n</code></pre>\n\n<p>Note in the <code>toString()</code> method, the constant used at address 0 [<code>0  ldc &lt;String \"s = I’m totally safe\"&gt; [23]</code>] shows the compiler already concatenated the string literal <code>\"s = \"</code> and the private final field <code>\" I’m totally safe\"</code> together in advance and stored it.  The toString() method will always return <code>\"s = I’m totally safe\"</code> regardless of how the instance variable <code>s</code> changes.</p>\n"}],"owner":{"account_id":241158,"reputation":9333,"user_id":511804,"accept_rate":56,"display_name":"Alexandr"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58561,"favorite_count":0,"down_vote_count":0,"up_vote_count":55,"accepted_answer_id":4516608,"answer_count":4,"score":55,"last_activity_date":1695194563,"creation_date":1293085534,"question_id":4516381,"body_markdown":"class WithPrivateFinalField {\r\n        private final String s = &quot;I’m totally safe&quot;;\r\n        public String toString() {\r\n            return &quot;s = &quot; + s;\r\n        }\r\n    }\r\n    WithPrivateFinalField pf = new WithPrivateFinalField();\r\n    System.out.println(pf);\r\n    Field f = pf.getClass().getDeclaredField(&quot;s&quot;);\r\n    f.setAccessible(true);\r\n    System.out.println(&quot;f.get(pf): &quot; + f.get(pf));\r\n    f.set(pf, &quot;No, you’re not!&quot;);\r\n    System.out.println(pf);\r\n    System.out.println(f.get(pf));\r\n\r\nOutput:\r\n\r\n    s = I’m totally safe\r\n    f.get(pf): I’m totally safe\r\n    s = I’m totally safe\r\n    No, you’re not!\r\n\r\nWhy does it work by this way, can you please explain? The first print tells us that the private &quot;s&quot; field has not been changed, as I expect. But if we get the field via reflection, the second print shows, it is updated.","title":"Changing private final fields via reflection","body":"<pre><code>class WithPrivateFinalField {\n    private final String s = \"I’m totally safe\";\n    public String toString() {\n        return \"s = \" + s;\n    }\n}\nWithPrivateFinalField pf = new WithPrivateFinalField();\nSystem.out.println(pf);\nField f = pf.getClass().getDeclaredField(\"s\");\nf.setAccessible(true);\nSystem.out.println(\"f.get(pf): \" + f.get(pf));\nf.set(pf, \"No, you’re not!\");\nSystem.out.println(pf);\nSystem.out.println(f.get(pf));\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>s = I’m totally safe\nf.get(pf): I’m totally safe\ns = I’m totally safe\nNo, you’re not!\n</code></pre>\n\n<p>Why does it work by this way, can you please explain? The first print tells us that the private \"s\" field has not been changed, as I expect. But if we get the field via reflection, the second print shows, it is updated.</p>\n"},{"tags":["java","assembly","linker","virtual-machine","loader"],"owner":{"account_id":19030219,"reputation":957,"user_id":13892487,"display_name":"Midhun Raj"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695194256,"creation_date":1695194256,"question_id":77140117,"body_markdown":"\r\n\r\nI was able to successfully make an object file of a sic assembly program\r\n\r\n\r\nThe command i did for that was\r\n\r\n     java -cp sictools-java.jar sic.Asm a.asm\r\n\r\n\r\n**But i am having trouble in linking it\r\n**To run linker****\r\n\r\n    java -cp out/make/sictools.jar sic.Link -o out.obj in1.obj in2.obj ...\r\n\r\nI was trying with this set of codes\r\n\r\nI cant figure out what is sic.Link\r\n\r\n\r\nhttps://github.com/jurem/SicTools\r\n\r\n\r\n\r\nTo be frank i am very very new to assembly set of coding \r\n\r\n\r\nI am fiddle with sets of tools to get familar and to have some hands on experience with low level programming\r\n\r\n[![enter image description here][1]][1]\r\n\r\nCan you please guide me on how to set these up and make it running and find what all vallues are there in  each registers of this virtual machine\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/rsHAm.png\r\n\r\nI would be very thankful for a guidence on how to make this system work and figure out what all values are left in the registers after the porgram execition in the graphics mode .. which according to documentaion can be obtained from\r\n\r\n    java -cp out/make/sictools.jar sic.Link -g","title":"Trouble in linking code to an object file of an assembly language","body":"<p>I was able to successfully make an object file of a sic assembly program</p>\n<p>The command i did for that was</p>\n<pre><code> java -cp sictools-java.jar sic.Asm a.asm\n</code></pre>\n<p><strong>But i am having trouble in linking it\n<strong>To run linker</strong></strong></p>\n<pre><code>java -cp out/make/sictools.jar sic.Link -o out.obj in1.obj in2.obj ...\n</code></pre>\n<p>I was trying with this set of codes</p>\n<p>I cant figure out what is sic.Link</p>\n<p><a href=\"https://github.com/jurem/SicTools\" rel=\"nofollow noreferrer\">https://github.com/jurem/SicTools</a></p>\n<p>To be frank i am very very new to assembly set of coding</p>\n<p>I am fiddle with sets of tools to get familar and to have some hands on experience with low level programming</p>\n<p><a href=\"https://i.stack.imgur.com/rsHAm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rsHAm.png\" alt=\"enter image description here\" /></a></p>\n<p>Can you please guide me on how to set these up and make it running and find what all vallues are there in  each registers of this virtual machine</p>\n<p>I would be very thankful for a guidence on how to make this system work and figure out what all values are left in the registers after the porgram execition in the graphics mode .. which according to documentaion can be obtained from</p>\n<pre><code>java -cp out/make/sictools.jar sic.Link -g\n</code></pre>\n"},{"tags":["java","eclipse","maven","plugins","tycho"],"comments":[{"owner":{"account_id":4846374,"reputation":2570,"user_id":3909896,"accept_rate":100,"display_name":"Cribber"},"score":0,"creation_date":1439882601,"post_id":32066048,"comment_id":52029473,"body_markdown":"I should probably mention, that I don&#39;t call maven install on this part of the project, but on the &quot;super&quot; project which then in turn tries to clean/install this one.","body":"I should probably mention, that I don&#39;t call maven install on this part of the project, but on the &quot;super&quot; project which then in turn tries to clean/install this one."},{"owner":{"account_id":1483039,"reputation":8759,"user_id":1391924,"accept_rate":41,"display_name":"Chandrayya G K"},"score":0,"creation_date":1439887549,"post_id":32066048,"comment_id":52032426,"body_markdown":"I think its due to the version mismatch of plugin/feature inside MANIFEST.MF and in updatesite/repository","body":"I think its due to the version mismatch of plugin/feature inside MANIFEST.MF and in updatesite/repository"},{"owner":{"account_id":4846374,"reputation":2570,"user_id":3909896,"accept_rate":100,"display_name":"Cribber"},"score":0,"creation_date":1439898104,"post_id":32066048,"comment_id":52039427,"body_markdown":"could you explain it to me further? The version of my own plugin or the version of tycho/used tools?  Also the myproject.repository has no MANIFEST.MF,  it basically is just used so two other parts (feature and featurepatch) are put together into one","body":"could you explain it to me further? The version of my own plugin or the version of tycho/used tools?  Also the myproject.repository has no MANIFEST.MF,  it basically is just used so two other parts (feature and featurepatch) are put together into one"},{"owner":{"account_id":1483039,"reputation":8759,"user_id":1391924,"accept_rate":41,"display_name":"Chandrayya G K"},"score":0,"creation_date":1439904317,"post_id":32066048,"comment_id":52043858,"body_markdown":"attach the whole maven build log. I think its not full log.","body":"attach the whole maven build log. I think its not full log."},{"owner":{"account_id":4846374,"reputation":2570,"user_id":3909896,"accept_rate":100,"display_name":"Cribber"},"score":0,"creation_date":1440054354,"post_id":32066048,"comment_id":52116558,"body_markdown":"the entire log in the console of eclipse after a maven install is about 6 DIn4 pages... or what are you looking for?","body":"the entire log in the console of eclipse after a maven install is about 6 DIn4 pages... or what are you looking for?"}],"answers":[{"tags":[],"owner":{"account_id":6235501,"reputation":3140,"user_id":4850949,"accept_rate":57,"display_name":"not2savvy"},"down_vote_count":1,"up_vote_count":2,"is_accepted":true,"score":1,"last_activity_date":1695193971,"creation_date":1439928631,"answer_id":32081749,"question_id":32066048,"body_markdown":"`org.myproject.featurepatch.feature.group` seems to have a requirement for `de.uka.ipd.sdq.simucom.feature.feature.group` which is probably found in its manifest.mf of the former (Require-Bundle). I guess the version info of the requirement is not correct, since the log says it requires exactly version 0.0.0. ","title":"Maven + Tycho: unresolved dependencies","body":"<p><code>org.myproject.featurepatch.feature.group</code> seems to have a requirement for <code>de.uka.ipd.sdq.simucom.feature.feature.group</code> which is probably found in its manifest.mf of the former (Require-Bundle). I guess the version info of the requirement is not correct, since the log says it requires exactly version 0.0.0.</p>\n"}],"owner":{"account_id":4846374,"reputation":2570,"user_id":3909896,"accept_rate":100,"display_name":"Cribber"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2603,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":32081749,"answer_count":1,"score":3,"last_activity_date":1695193971,"creation_date":1439882500,"question_id":32066048,"body_markdown":"I&#39;m working on a project lately which goal it is to build an eclipse plugin for palladio. My Project is built out of several seperate parts and i managed to eliminate all errors but the last package still doesn&#39;t want to go through. \r\n\r\nI&#39;m using maven (&quot;clean&quot; works perfectly, the error appears when i try maven install) with tycho and some parts of Palladio. \r\nI&#39;ve tried to call mvn clean via the console as well as in eclipse - the error stays the same. \r\n\r\nI suspect there is something missing/wrong in the pom.xml of the last part of the plugin, as all the other parts work and maven can clean/Install them without an error message. \r\n\r\nI&#39;ve been working on this for the past week but cant seem to solve it. Any help is appreciated. \r\n\r\nThe following is the pom: (i changed user name + project name so don&#39;t mind that)\r\n\r\n\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.myproject&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;org.myproject.build&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;\r\n\t\t&lt;relativePath&gt;../org.myproject.build/pom.xml&lt;/relativePath&gt;\r\n\t&lt;/parent&gt;\r\n\r\n\t&lt;artifactId&gt;org.myproject.repository&lt;/artifactId&gt;\r\n\t&lt;packaging&gt;eclipse-repository&lt;/packaging&gt;\r\n\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.eclipse.tycho.extras&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;tycho-p2-extras-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;${tycho-version}&lt;/version&gt;\r\n\t\t\t\t&lt;executions&gt;\r\n\t\t\t\t\t&lt;execution&gt;\r\n\t\t\t\t\t\t&lt;phase&gt;prepare-package&lt;/phase&gt;\r\n\t\t\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t\t\t&lt;goal&gt;mirror&lt;/goal&gt;\r\n\t\t\t\t\t\t&lt;/goals&gt;\r\n\t\t\t\t\t&lt;/execution&gt;\r\n\t\t\t\t&lt;/executions&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;source&gt;\r\n\t\t\t\t\t\t&lt;repository&gt;\r\n\t\t\t\t\t\t\t&lt;url&gt;https://sdqweb.ipd.kit.edu/eclipse/palladio/core/pcm/releases/3.4.1/&lt;/url&gt;\r\n\t\t\t\t\t\t\t&lt;layout&gt;p2&lt;/layout&gt;\r\n\t\t\t\t\t\t&lt;/repository&gt;\r\n\t\t\t\t\t&lt;/source&gt;\r\n\t\t\t\t\t&lt;ius&gt;\r\n\t\t\t\t\t\t&lt;iu&gt;\r\n\t\t\t\t\t\t\t&lt;id&gt;de.uka.ipd.sdq.simucom.feature.feature.group&lt;/id&gt;\r\n\r\n\t\t\t\t\t\t&lt;/iu&gt;\r\n\t\t\t\t\t&lt;/ius&gt;\r\n\t\t\t\t\t&lt;destination&gt;${project.build.directory}/repository&lt;/destination&gt;\r\n\t\t\t\t\t&lt;followStrictOnly&gt;true&lt;/followStrictOnly&gt;\r\n\t\t\t\t\t&lt;includeOptional&gt;false&lt;/includeOptional&gt;\r\n\t\t\t\t\t&lt;includeNonGreedy&gt;false&lt;/includeNonGreedy&gt;\r\n\t\t\t\t\t&lt;latestVersionOnly&gt;false&lt;/latestVersionOnly&gt;\r\n\t\t\t\t\t&lt;mirrorMetadataOnly&gt;false&lt;/mirrorMetadataOnly&gt;\r\n\t\t\t\t\t&lt;compress&gt;true&lt;/compress&gt;\r\n\t\t\t\t\t&lt;append&gt;true&lt;/append&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n&lt;/project&gt;\r\n\r\n----------\r\n\r\nand here is the error I&#39;m getting: \r\n\r\n----------\r\n\r\n    [INFO] Building org.myprojectrepository 1.0.0-SNAPSHOT\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] \r\n    [INFO] --- tycho-packaging-plugin:0.21.0:build-qualifier-aggregator (default-build-qualifier-aggregator) @ org.myproject.repository ---\r\n    [INFO] The project&#39;s OSGi version is 1.0.0.201508180656\r\n    [INFO] \r\n    [INFO] --- maven-clean-plugin:2.4.1:clean (default-clean-1) @ org.myproject.repository ---\r\n    [INFO] \r\n    [INFO] --- tycho-p2-extras-plugin:0.21.0:mirror (default) @ org.myproject.repository ---\r\n    [INFO] Mirroring to /home/user/lib/eclipse EE/eclipse-ee-workspace/org.myproject.repository/target/repository...\r\n    –- Mirroring –--\r\n    \r\n     (Descriptor: canonical: osgi.bundle,de.uka.ipd.sdq.simucomframework.variables,1.0.0.201309282203)\r\n    [INFO] \r\n    [INFO] --- target-platform-configuration:0.21.0:target-platform (default-target-platform) @ org.myproject.repository ---\r\n    [INFO] \r\n    [INFO] --- tycho-p2-publisher-plugin:0.21.0:publish-products (default-publish-products) @ org.myproject.repository ---\r\n    [INFO] Cannot complete the request.  Generating details.\r\n    [INFO] Cannot complete the request.  Generating details.\r\n    [INFO] {osgi.ws=gtk, osgi.os=linux, osgi.arch=x86_64, org.eclipse.update.install.features=true}\r\n    [ERROR] Cannot resolve project dependencies:\r\n    [ERROR]   Software being installed: org.X.repository raw:1.0.0.&#39;SNAPSHOT&#39;/format(n[.n=0;[.n=0;[-S]]]):1.0.0-SNAPSHOT\r\n    [ERROR]   Missing requirement: org.myproject.featurepatch.feature.group 1.0.0.201508180656 requires &#39;de.uka.ipd.sdq.simucom.feature.feature.group 0.0.0&#39; but it could not be found\r\n    [ERROR]   Cannot satisfy dependency: org.myproject.repository raw:1.0.0.&#39;SNAPSHOT&#39;/format(n[.n=0;[.n=0;[-S]]]):1.0.0-SNAPSHOT depends on: org.myproject.featurepatch.feature.group 0.0.0\r\n    [ERROR] \r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] Reactor Summary:\r\n    [INFO] ....\r\n    [INFO] ....\r\n    [INFO] ....\r\n    [INFO] [six other project parts]  ................. SUCCESS [0.218s]\r\n    [INFO] org.myproject.repository ................... FAILURE [7.073s]\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] BUILD FAILURE\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] Total time: 1:34.649s\r\n    [INFO] Finished at: Tue Aug 18 08:56:40 CEST 2015\r\n    [INFO] Final Memory: 170M/2870M\r\n    [INFO] ------------------------------------------------------------------------\r\n    [ERROR] Failed to execute goal org.eclipse.tycho:tycho-p2-publisher-plugin:0.21.0:publish-products (default-publish-products) on project org.myproject.repository: Execution default-publish-products of goal org.eclipse.tycho:tycho-p2-publisher-plugin:0.21.0:publish-products failed: No solution found because the problem is unsatisfiable.: [Unable to satisfy dependency from org.eclipse.jdt.core 3.8.1.v_OTDT_r210_201206090452 to org.eclipse.objectteams.otdt.core.patch.feature.group [2.0.0,3.0.0).; Unable to satisfy dependency from org.eclipse.jdt.core 3.8.2.v_OTDT_r211_201209011847 to org.eclipse.objectteams.otdt.core.patch.feature.group [2.0.0,3.0.0).; Unable to satisfy dependency from org.eclipse.jdt.core 3.8.3.v_OTDT_r212_201301271217 to org.eclipse.objectteams.otdt.core.patch.feature.group [2.0.0,3.0.0).; Unable to satisfy dependency from org.myproject.featurepatch.feature.group 1.0.0.201508180656 to de.uka.ipd.sdq.simucom.feature.feature.group 0.0.0.; No solution found because the problem is unsatisfiable.] -&gt; [Help 1]\r\n    [ERROR] \r\n\r\n\r\n\r\n\r\n\r\nfeature.xml of myproject.featurepatch\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;feature\r\n          id=&quot;org.myproject.featurepatch&quot;\r\n          label=&quot;SDC Patch for SimuCom CBSE Simulation&quot;\r\n          version=&quot;1.0.0.qualifier&quot;\r\n          provider-name=&quot;myproject.org&quot;&gt;\r\n    \r\n       &lt;description url=&quot;http://myproject.org&quot;&gt;\r\n          Patches the SimuCom CBSE Simulation feature.\r\n    Adds configuration options required for the SDS plugin.\r\n       &lt;/description&gt;\r\n    \r\n       &lt;license url=&quot;https://www.eclipse.org/legal/epl-v10.html&quot;&gt;\r\n          Eclipse Public License - v 1.0\r\n    \r\n       &lt;/license&gt;\r\n    \r\n       &lt;requires&gt;\r\n          &lt;import feature=&quot;de.uka.ipd.sdq.simucom.feature&quot; version=&quot;3.4.1.201309282203&quot; patch=&quot;true&quot;/&gt;\r\n       &lt;/requires&gt;\r\n    \r\n       &lt;plugin\r\n             id=&quot;de.uka.ipd.sdq.codegen.simucontroller&quot;\r\n             download-size=&quot;0&quot;\r\n             install-size=&quot;0&quot;\r\n             version=&quot;0.0.0&quot;\r\n             unpack=&quot;false&quot;/&gt;\r\n    \r\n       &lt;plugin\r\n             id=&quot;de.uka.ipd.sdq.simulation&quot;\r\n             download-size=&quot;0&quot;\r\n             install-size=&quot;0&quot;\r\n             version=&quot;0.0.0&quot;\r\n             unpack=&quot;false&quot;/&gt;\r\n    \r\n    &lt;/feature&gt;\r\n\r\n\r\nfeature xml of simucom:\r\n\r\n        &lt;feature id=&quot;de.uka.ipd.sdq.simucom.feature&quot; label=&quot;SimuCom CBSE Simulation&quot; version=&quot;3.4.1.201309282203&quot; provider-name=&quot;sdq.ipd.kit.edu&quot; plugin=&quot;de.uka.ipd.sdq.branding&quot;&gt;&lt;description url=&quot;http://sdq.ipd.kit.edu&quot;&gt;\r\n              Simulation framework for PCM instances. Uses Model-2-Text transformation\r\n        to generate a plugin which is executed directly using OSGi dynamic\r\n        loader.\r\n           &lt;/description&gt;&lt;copyright&gt;\r\n              This plugin is protected by copyright held by the members of\r\n        the Palladio Research Group, University of Karlsruhe.\r\n           &lt;/copyright&gt;&lt;license url=&quot;http://www.eclipse.org/legal/epl-v10.html&quot;&gt;\r\n        &lt;/license&gt;&lt;url&gt;&lt;update label=&quot;Palladio Update Site&quot; url=&quot;http://sdqweb.ipd.uka.de/eclipse/PCM/&quot;/&gt;&lt;/url&gt;&lt;requires&gt;&lt;import plugin=&quot;de.uka.ipd.sdq.identifier&quot;/&gt;&lt;import plugin=&quot;de.uka.ipd.sdq.probfunction&quot;/&gt;&lt;import plugin=&quot;de.uka.ipd.sdq.stoex&quot;/&gt;&lt;import plugin=&quot;de.uka.ipd.sdq.pcm&quot; version=&quot;3.1.0&quot; match=&quot;greaterOrEqual&quot;/&gt;&lt;import plugin=&quot;de.uka.ipd.sdq.completions&quot; version=&quot;1.0.0&quot; match=&quot;greaterOrEqual&quot;/&gt;&lt;import plugin=&quot;de.uka.ipd.sdq.featureconfig&quot; version=&quot;1.0.0&quot; match=&quot;greaterOrEqual&quot;/&gt;&lt;import plugin=&quot;de.uka.ipd.sdq.featuremodel&quot;/&gt;&lt;import plugin=&quot;de.uka.ipd.sdq.pcm.resources&quot;/&gt;&lt;import plugin=&quot;de.uka.ipd.sdq.pcm.stochasticexpressions&quot;/&gt;&lt;import plugin=&quot;org.eclipse.ocl&quot;/&gt;&lt;import plugin=&quot;org.eclipse.ocl.ecore&quot; version=&quot;1.2.1&quot; match=&quot;greaterOrEqual&quot;/&gt;&lt;import plugin=&quot;org.eclipse.xtend.typesystem.emf&quot;/&gt;&lt;import plugin=&quot;org.eclipse.xpand&quot;/&gt;&lt;import plugin=&quot;org.eclipse.xtend&quot;/&gt;&lt;import plugin=&quot;org.eclipse.uml2.uml.ecore.importer&quot;/&gt;&lt;import plugin=&quot;de.uka.ipd.sdq.scheduler&quot; version=&quot;1.0.0&quot; match=&quot;greaterOrEqual&quot;/&gt;&lt;import plugin=&quot;de.fzi.se.quality&quot; version=&quot;1.0.0&quot; match=&quot;greaterOrEqual&quot;/&gt;&lt;import plugin=&quot;org.eclipse.xtend.util.stdlib&quot; version=&quot;1.0.1&quot; match=&quot;greaterOrEqual&quot;/&gt;&lt;import plugin=&quot;de.uka.ipd.sdq.sensorframework&quot;/&gt;&lt;import plugin=&quot;org.apache.log4j&quot; version=&quot;1.2.13&quot; match=&quot;greaterOrEqual&quot;/&gt;&lt;import plugin=&quot;org.eclipse.core.runtime&quot;/&gt;&lt;import plugin=&quot;org.eclipse.emf.ecore.change&quot;/&gt;&lt;import plugin=&quot;de.uka.ipd.sdq.statistics&quot; version=&quot;1.0.0&quot; match=&quot;greaterOrEqual&quot;/&gt;&lt;import plugin=&quot;de.uka.ipd.sdq.probfunction.math&quot; version=&quot;2.0.0&quot; match=&quot;greaterOrEqual&quot;/&gt;&lt;import plugin=&quot;de.uka.ipd.sdq.workflow.pcm&quot; version=&quot;1.0.0&quot; match=&quot;greaterOrEqual&quot;/&gt;&lt;import plugin=&quot;de.uka.ipd.sdq.probespec.framework&quot; version=&quot;1.0.0&quot; match=&quot;greaterOrEqual&quot;/&gt;&lt;import plugin=&quot;de.uka.ipd.sdq.pipesandfilters&quot; version=&quot;1.0.0&quot; match=&quot;greaterOrEqual&quot;/&gt;&lt;import plugin=&quot;de.uka.ipd.sdq.pipesandfilters.framework&quot; version=&quot;1.0.0&quot; match=&quot;greaterOrEqual&quot;/&gt;&lt;import plugin=&quot;org.jscience&quot; version=&quot;4.1.3&quot; match=&quot;greaterOrEqual&quot;/&gt;&lt;import plugin=&quot;de.uka.ipd.sdq.pipesandfilters.framework.recorder.sensorframework&quot; version=&quot;1.0.0&quot; match=&quot;greaterOrEqual&quot;/&gt;&lt;import plugin=&quot;de.uka.ipd.sdq.simulation.abstractsimengine&quot; version=&quot;1.0.0&quot; match=&quot;greaterOrEqual&quot;/&gt;&lt;import plugin=&quot;de.uka.ipd.sdq.errorhandling&quot; version=&quot;1.0.0&quot; match=&quot;greaterOrEqual&quot;/&gt;&lt;import plugin=&quot;de.fzi.se.accuracy&quot; version=&quot;1.0.0&quot; match=&quot;greaterOrEqual&quot;/&gt;&lt;import plugin=&quot;de.uka.ipd.sdq.reliability.core&quot; version=&quot;3.1.0&quot; match=&quot;greaterOrEqual&quot;/&gt;&lt;import plugin=&quot;de.uka.ipd.sdq.featuremodel&quot; version=&quot;2.0.0&quot; match=&quot;greaterOrEqual&quot;/&gt;&lt;import plugin=&quot;de.uka.ipd.sdq.simulation&quot; version=&quot;1.0.0&quot; match=&quot;greaterOrEqual&quot;/&gt;&lt;import plugin=&quot;de.uka.ipd.sdq.stoex.analyser&quot;/&gt;&lt;import plugin=&quot;org.eclipse.debug.ui&quot;/&gt;&lt;import plugin=&quot;org.eclipse.jdt.core&quot;/&gt;\r\n    &lt;import plugin=&quot;org.eclipse.jdt.launching&quot;/&gt;\r\n    &lt;import plugin=&quot;org.eclipse.pde.ui&quot;/&gt;&lt;import plugin=&quot;org.eclipse.emf.common.ui&quot;/&gt;\r\n    &lt;import plugin=&quot;de.uka.ipd.sdq.workflow.launchconfig&quot; version=&quot;1.1.0&quot; match=&quot;greaterOrEqual&quot;/&gt;\r\n    &lt;import plugin=&quot;de.uka.ipd.sdq.sensorframework.dialogs&quot;/&gt;\r\n    &lt;import plugin=&quot;de.uka.ipd.sdq.pcm.dialogs&quot;/&gt;\r\n    &lt;import plugin=&quot;org.eclipse.osgi.services&quot;/&gt;\r\n    &lt;import plugin=&quot;ch.ethz.iks.r_osgi.remote&quot; version=&quot;1.0.0&quot; match=&quot;greaterOrEqual&quot;/&gt;\r\n    &lt;import plugin=&quot;org.junit4&quot; version=&quot;4.3.1&quot; match=&quot;greaterOrEqual&quot;/&gt;\r\n    &lt;import plugin=&quot;org.eclipse.emf.query.ocl&quot; version=&quot;1.2.0&quot; match=&quot;greaterOrEqual&quot;/&gt;\r\n    &lt;import plugin=&quot;de.uka.ipd.sdq.workflow.mdsd&quot; version=&quot;1.0.0&quot; match=&quot;greaterOrEqual&quot;/&gt;\r\n    &lt;import plugin=&quot;org.eclipse.emf.mwe.core&quot; version=&quot;0.7.0&quot; match=&quot;greaterOrEqual&quot;/&gt;\r\n    &lt;import plugin=&quot;org.eclipse.xpand&quot; version=&quot;0.7.0&quot; match=&quot;greaterOrEqual&quot;/&gt;&lt;import plugin=&quot;org.eclipse.xtend&quot; version=&quot;0.7.0&quot; match=&quot;greaterOrEqual&quot;/&gt;&lt;import plugin=&quot;de.uka.ipd.sdq.dialogs&quot; version=&quot;2.0.1&quot; match=&quot;greaterOrEqual&quot;/&gt;\r\n    &lt;import plugin=&quot;org.eclipse.ui.ide&quot; version=&quot;3.5.0&quot; match=&quot;greaterOrEqual&quot;/&gt;&lt;import plugin=&quot;de.uka.ipd.sdq.featureinstance.editor&quot; version=&quot;1.0.0&quot; match=&quot;greaterOrEqual&quot;/&gt;\r\n    &lt;import plugin=&quot;de.uka.ipd.sdq.pcm.edit&quot;/&gt;\r\n    &lt;import plugin=&quot;org.eclipse.emf.edit.ui&quot; version=&quot;2.5.0&quot; match=&quot;greaterOrEqual&quot;/&gt;\r\n    &lt;import plugin=&quot;de.uka.ipd.sdq.pcmbench.ui&quot; version=&quot;2.0.0&quot; match=&quot;greaterOrEqual&quot;/&gt;\r\n    &lt;import plugin=&quot;org.apache.commons.lang&quot; version=&quot;2.3.0&quot; match=&quot;greaterOrEqual&quot;/&gt;\r\n    &lt;import plugin=&quot;de.uka.ipd.sdq.sensorframework.storage&quot;/&gt;\r\n    &lt;import plugin=&quot;org.eclipse.core.runtime&quot; version=&quot;3.5.0&quot; match=&quot;greaterOrEqual&quot;/&gt;\r\n    &lt;import plugin=&quot;org.eclipse.emf.ecore&quot;/&gt;&lt;import plugin=&quot;org.eclipse.equinox.event&quot; version=&quot;1.1.0&quot; match=&quot;greaterOrEqual&quot;/&gt;\r\n    &lt;import plugin=&quot;org.eclipse.osgi&quot;/&gt;\r\n    &lt;import plugin=&quot;org.eclipse.emf.ecore.xmi&quot;/&gt;\r\n    &lt;import plugin=&quot;org.eclipse.emf.query&quot;/&gt;\r\n    &lt;import plugin=&quot;de.uka.ipd.sdq.units&quot;/&gt;\r\n    &lt;import plugin=&quot;org.eclipse.emf.edit&quot;/&gt;\r\n    &lt;import plugin=&quot;de.uka.ipd.sdq.identifier.edit&quot;/&gt;\r\n    &lt;import plugin=&quot;de.uka.ipd.sdq.probfunction.edit&quot;/&gt;\r\n    &lt;import plugin=&quot;de.uka.ipd.sdq.stoex.edit&quot;/&gt;\r\n    &lt;import plugin=&quot;de.uka.ipd.sdq.units.edit&quot;/&gt;\r\n    &lt;import plugin=&quot;org.eclipse.uml2.common.edit&quot;/&gt;\r\n    &lt;import plugin=&quot;org.eclipse.core.resources&quot;/&gt;\r\n    &lt;import plugin=&quot;org.eclipse.ui&quot;/&gt;&lt;import plugin=&quot;de.uka.ipd.sdq.simucomframework.simucomstatus&quot; version=&quot;1.0.0&quot; match=&quot;greaterOrEqual&quot;/&gt;\r\n    &lt;import feature=&quot;de.uka.ipd.sdq.simulation.abstractsimengine.feature&quot; version=&quot;3.3.0&quot; match=&quot;greaterOrEqual&quot;/&gt;\r\n    &lt;import plugin=&quot;org.eclipse.core.runtime&quot; version=&quot;3.7.0&quot; match=&quot;compatible&quot;/&gt;&lt;/requires&gt;&lt;plugin id=&quot;de.uka.ipd.sdq.pcm.codegen.m2m&quot; download-size=&quot;0&quot; install-size=&quot;0&quot; version=&quot;3.1.0.201309282203&quot;/&gt;\r\n    &lt;plugin id=&quot;de.uka.ipd.sdq.simucomframework&quot; download-size=&quot;0&quot; install-size=&quot;0&quot; version=&quot;1.0.0.201309282203&quot; unpack=&quot;false&quot;/&gt;\r\n    &lt;plugin id=&quot;de.uka.ipd.sdq.simucomframework.variables&quot; download-size=&quot;0&quot; install-size=&quot;0&quot; version=&quot;1.0.0.201309282203&quot; unpack=&quot;false&quot;/&gt;\r\n    &lt;plugin id=&quot;de.uka.ipd.sdq.codegen.simucontroller&quot; download-size=&quot;0&quot; install-size=&quot;0&quot; version=&quot;1.0.0.201309282203&quot; unpack=&quot;false&quot;/&gt;\r\n    &lt;plugin id=&quot;de.uka.ipd.sdq.scheduler&quot; download-size=&quot;0&quot; install-size=&quot;0&quot; version=&quot;1.0.0.201309282203&quot; unpack=&quot;false&quot;/&gt;\r\n    &lt;plugin id=&quot;de.uka.ipd.sdq.branding&quot; download-size=&quot;0&quot; install-size=&quot;0&quot; version=&quot;1.0.0.201309282203&quot; unpack=&quot;false&quot;/&gt;\r\n    &lt;plugin id=&quot;ch.ethz.iks.r_osgi.remote&quot; download-size=&quot;0&quot; install-size=&quot;0&quot; version=&quot;1.0.0.201309282203&quot; unpack=&quot;false&quot;/&gt;\r\n    &lt;plugin id=&quot;de.uka.ipd.sdq.simucomframework.simulationdock&quot; download-size=&quot;0&quot; install-size=&quot;0&quot; version=&quot;1.0.0.201309282203&quot; unpack=&quot;false&quot;/&gt;\r\n    &lt;plugin id=&quot;de.uka.ipd.sdq.simucomframework.simucomstatus&quot; download-size=&quot;0&quot; install-size=&quot;0&quot; version=&quot;1.0.0.201309282203&quot; unpack=&quot;false&quot;/&gt;\r\n    &lt;plugin id=&quot;de.uka.ipd.sdq.reliability.core&quot; download-size=&quot;0&quot; install-size=&quot;0&quot; version=&quot;3.1.0.201309282203&quot; unpack=&quot;false&quot;/&gt;\r\n    &lt;plugin id=&quot;de.fzi.se.quality&quot; download-size=&quot;0&quot; install-size=&quot;0&quot; version=&quot;1.0.0.201309282203&quot; unpack=&quot;false&quot;/&gt;\r\n    &lt;plugin id=&quot;de.fzi.se.quality.edit&quot; download-size=&quot;0&quot; install-size=&quot;0&quot; version=&quot;1.0.0.201309282203&quot; unpack=&quot;false&quot;/&gt;\r\n    &lt;plugin id=&quot;de.fzi.se.quality.editor&quot; download-size=&quot;0&quot; install-size=&quot;0&quot; version=&quot;1.0.0.201309282203&quot; unpack=&quot;false&quot;/&gt;\r\n    &lt;plugin id=&quot;de.fzi.se.accuracy&quot; download-size=&quot;0&quot; install-size=&quot;0&quot; version=&quot;1.0.0.201309282203&quot; unpack=&quot;false&quot;/&gt;\r\n    &lt;plugin id=&quot;de.uka.ipd.sdq.statistics&quot; download-size=&quot;0&quot; install-size=&quot;0&quot; version=&quot;1.0.0.201309191158&quot; unpack=&quot;false&quot;/&gt;\r\n    &lt;plugin id=&quot;de.uka.ipd.sdq.simulation&quot; download-size=&quot;0&quot; install-size=&quot;0&quot; version=&quot;1.0.0.201309282203&quot; unpack=&quot;false&quot;/&gt;\r\n    &lt;/feature&gt;\r\n\r\n","title":"Maven + Tycho: unresolved dependencies","body":"<p>I'm working on a project lately which goal it is to build an eclipse plugin for palladio. My Project is built out of several seperate parts and i managed to eliminate all errors but the last package still doesn't want to go through. </p>\n\n<p>I'm using maven (\"clean\" works perfectly, the error appears when i try maven install) with tycho and some parts of Palladio. \nI've tried to call mvn clean via the console as well as in eclipse - the error stays the same. </p>\n\n<p>I suspect there is something missing/wrong in the pom.xml of the last part of the plugin, as all the other parts work and maven can clean/Install them without an error message. </p>\n\n<p>I've been working on this for the past week but cant seem to solve it. Any help is appreciated. </p>\n\n<p>The following is the pom: (i changed user name + project name so don't mind that)</p>\n\n<pre><code>&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\nxsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n&lt;parent&gt;\n    &lt;groupId&gt;org.myproject&lt;/groupId&gt;\n    &lt;artifactId&gt;org.myproject.build&lt;/artifactId&gt;\n    &lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;\n    &lt;relativePath&gt;../org.myproject.build/pom.xml&lt;/relativePath&gt;\n&lt;/parent&gt;\n\n&lt;artifactId&gt;org.myproject.repository&lt;/artifactId&gt;\n&lt;packaging&gt;eclipse-repository&lt;/packaging&gt;\n\n\n&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.eclipse.tycho.extras&lt;/groupId&gt;\n            &lt;artifactId&gt;tycho-p2-extras-plugin&lt;/artifactId&gt;\n            &lt;version&gt;${tycho-version}&lt;/version&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;phase&gt;prepare-package&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;mirror&lt;/goal&gt;\n                    &lt;/goals&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n            &lt;configuration&gt;\n                &lt;source&gt;\n                    &lt;repository&gt;\n                        &lt;url&gt;https://sdqweb.ipd.kit.edu/eclipse/palladio/core/pcm/releases/3.4.1/&lt;/url&gt;\n                        &lt;layout&gt;p2&lt;/layout&gt;\n                    &lt;/repository&gt;\n                &lt;/source&gt;\n                &lt;ius&gt;\n                    &lt;iu&gt;\n                        &lt;id&gt;de.uka.ipd.sdq.simucom.feature.feature.group&lt;/id&gt;\n\n                    &lt;/iu&gt;\n                &lt;/ius&gt;\n                &lt;destination&gt;${project.build.directory}/repository&lt;/destination&gt;\n                &lt;followStrictOnly&gt;true&lt;/followStrictOnly&gt;\n                &lt;includeOptional&gt;false&lt;/includeOptional&gt;\n                &lt;includeNonGreedy&gt;false&lt;/includeNonGreedy&gt;\n                &lt;latestVersionOnly&gt;false&lt;/latestVersionOnly&gt;\n                &lt;mirrorMetadataOnly&gt;false&lt;/mirrorMetadataOnly&gt;\n                &lt;compress&gt;true&lt;/compress&gt;\n                &lt;append&gt;true&lt;/append&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n\n<p></p>\n\n<hr>\n\n<p>and here is the error I'm getting: </p>\n\n<hr>\n\n<pre><code>[INFO] Building org.myprojectrepository 1.0.0-SNAPSHOT\n[INFO] ------------------------------------------------------------------------\n[INFO] \n[INFO] --- tycho-packaging-plugin:0.21.0:build-qualifier-aggregator (default-build-qualifier-aggregator) @ org.myproject.repository ---\n[INFO] The project's OSGi version is 1.0.0.201508180656\n[INFO] \n[INFO] --- maven-clean-plugin:2.4.1:clean (default-clean-1) @ org.myproject.repository ---\n[INFO] \n[INFO] --- tycho-p2-extras-plugin:0.21.0:mirror (default) @ org.myproject.repository ---\n[INFO] Mirroring to /home/user/lib/eclipse EE/eclipse-ee-workspace/org.myproject.repository/target/repository...\n–- Mirroring –--\n\n (Descriptor: canonical: osgi.bundle,de.uka.ipd.sdq.simucomframework.variables,1.0.0.201309282203)\n[INFO] \n[INFO] --- target-platform-configuration:0.21.0:target-platform (default-target-platform) @ org.myproject.repository ---\n[INFO] \n[INFO] --- tycho-p2-publisher-plugin:0.21.0:publish-products (default-publish-products) @ org.myproject.repository ---\n[INFO] Cannot complete the request.  Generating details.\n[INFO] Cannot complete the request.  Generating details.\n[INFO] {osgi.ws=gtk, osgi.os=linux, osgi.arch=x86_64, org.eclipse.update.install.features=true}\n[ERROR] Cannot resolve project dependencies:\n[ERROR]   Software being installed: org.X.repository raw:1.0.0.'SNAPSHOT'/format(n[.n=0;[.n=0;[-S]]]):1.0.0-SNAPSHOT\n[ERROR]   Missing requirement: org.myproject.featurepatch.feature.group 1.0.0.201508180656 requires 'de.uka.ipd.sdq.simucom.feature.feature.group 0.0.0' but it could not be found\n[ERROR]   Cannot satisfy dependency: org.myproject.repository raw:1.0.0.'SNAPSHOT'/format(n[.n=0;[.n=0;[-S]]]):1.0.0-SNAPSHOT depends on: org.myproject.featurepatch.feature.group 0.0.0\n[ERROR] \n[INFO] ------------------------------------------------------------------------\n[INFO] Reactor Summary:\n[INFO] ....\n[INFO] ....\n[INFO] ....\n[INFO] [six other project parts]  ................. SUCCESS [0.218s]\n[INFO] org.myproject.repository ................... FAILURE [7.073s]\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time: 1:34.649s\n[INFO] Finished at: Tue Aug 18 08:56:40 CEST 2015\n[INFO] Final Memory: 170M/2870M\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.eclipse.tycho:tycho-p2-publisher-plugin:0.21.0:publish-products (default-publish-products) on project org.myproject.repository: Execution default-publish-products of goal org.eclipse.tycho:tycho-p2-publisher-plugin:0.21.0:publish-products failed: No solution found because the problem is unsatisfiable.: [Unable to satisfy dependency from org.eclipse.jdt.core 3.8.1.v_OTDT_r210_201206090452 to org.eclipse.objectteams.otdt.core.patch.feature.group [2.0.0,3.0.0).; Unable to satisfy dependency from org.eclipse.jdt.core 3.8.2.v_OTDT_r211_201209011847 to org.eclipse.objectteams.otdt.core.patch.feature.group [2.0.0,3.0.0).; Unable to satisfy dependency from org.eclipse.jdt.core 3.8.3.v_OTDT_r212_201301271217 to org.eclipse.objectteams.otdt.core.patch.feature.group [2.0.0,3.0.0).; Unable to satisfy dependency from org.myproject.featurepatch.feature.group 1.0.0.201508180656 to de.uka.ipd.sdq.simucom.feature.feature.group 0.0.0.; No solution found because the problem is unsatisfiable.] -&gt; [Help 1]\n[ERROR] \n</code></pre>\n\n<p>feature.xml of myproject.featurepatch</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;feature\n      id=\"org.myproject.featurepatch\"\n      label=\"SDC Patch for SimuCom CBSE Simulation\"\n      version=\"1.0.0.qualifier\"\n      provider-name=\"myproject.org\"&gt;\n\n   &lt;description url=\"http://myproject.org\"&gt;\n      Patches the SimuCom CBSE Simulation feature.\nAdds configuration options required for the SDS plugin.\n   &lt;/description&gt;\n\n   &lt;license url=\"https://www.eclipse.org/legal/epl-v10.html\"&gt;\n      Eclipse Public License - v 1.0\n\n   &lt;/license&gt;\n\n   &lt;requires&gt;\n      &lt;import feature=\"de.uka.ipd.sdq.simucom.feature\" version=\"3.4.1.201309282203\" patch=\"true\"/&gt;\n   &lt;/requires&gt;\n\n   &lt;plugin\n         id=\"de.uka.ipd.sdq.codegen.simucontroller\"\n         download-size=\"0\"\n         install-size=\"0\"\n         version=\"0.0.0\"\n         unpack=\"false\"/&gt;\n\n   &lt;plugin\n         id=\"de.uka.ipd.sdq.simulation\"\n         download-size=\"0\"\n         install-size=\"0\"\n         version=\"0.0.0\"\n         unpack=\"false\"/&gt;\n\n&lt;/feature&gt;\n</code></pre>\n\n<p>feature xml of simucom:</p>\n\n<pre><code>    &lt;feature id=\"de.uka.ipd.sdq.simucom.feature\" label=\"SimuCom CBSE Simulation\" version=\"3.4.1.201309282203\" provider-name=\"sdq.ipd.kit.edu\" plugin=\"de.uka.ipd.sdq.branding\"&gt;&lt;description url=\"http://sdq.ipd.kit.edu\"&gt;\n          Simulation framework for PCM instances. Uses Model-2-Text transformation\n    to generate a plugin which is executed directly using OSGi dynamic\n    loader.\n       &lt;/description&gt;&lt;copyright&gt;\n          This plugin is protected by copyright held by the members of\n    the Palladio Research Group, University of Karlsruhe.\n       &lt;/copyright&gt;&lt;license url=\"http://www.eclipse.org/legal/epl-v10.html\"&gt;\n    &lt;/license&gt;&lt;url&gt;&lt;update label=\"Palladio Update Site\" url=\"http://sdqweb.ipd.uka.de/eclipse/PCM/\"/&gt;&lt;/url&gt;&lt;requires&gt;&lt;import plugin=\"de.uka.ipd.sdq.identifier\"/&gt;&lt;import plugin=\"de.uka.ipd.sdq.probfunction\"/&gt;&lt;import plugin=\"de.uka.ipd.sdq.stoex\"/&gt;&lt;import plugin=\"de.uka.ipd.sdq.pcm\" version=\"3.1.0\" match=\"greaterOrEqual\"/&gt;&lt;import plugin=\"de.uka.ipd.sdq.completions\" version=\"1.0.0\" match=\"greaterOrEqual\"/&gt;&lt;import plugin=\"de.uka.ipd.sdq.featureconfig\" version=\"1.0.0\" match=\"greaterOrEqual\"/&gt;&lt;import plugin=\"de.uka.ipd.sdq.featuremodel\"/&gt;&lt;import plugin=\"de.uka.ipd.sdq.pcm.resources\"/&gt;&lt;import plugin=\"de.uka.ipd.sdq.pcm.stochasticexpressions\"/&gt;&lt;import plugin=\"org.eclipse.ocl\"/&gt;&lt;import plugin=\"org.eclipse.ocl.ecore\" version=\"1.2.1\" match=\"greaterOrEqual\"/&gt;&lt;import plugin=\"org.eclipse.xtend.typesystem.emf\"/&gt;&lt;import plugin=\"org.eclipse.xpand\"/&gt;&lt;import plugin=\"org.eclipse.xtend\"/&gt;&lt;import plugin=\"org.eclipse.uml2.uml.ecore.importer\"/&gt;&lt;import plugin=\"de.uka.ipd.sdq.scheduler\" version=\"1.0.0\" match=\"greaterOrEqual\"/&gt;&lt;import plugin=\"de.fzi.se.quality\" version=\"1.0.0\" match=\"greaterOrEqual\"/&gt;&lt;import plugin=\"org.eclipse.xtend.util.stdlib\" version=\"1.0.1\" match=\"greaterOrEqual\"/&gt;&lt;import plugin=\"de.uka.ipd.sdq.sensorframework\"/&gt;&lt;import plugin=\"org.apache.log4j\" version=\"1.2.13\" match=\"greaterOrEqual\"/&gt;&lt;import plugin=\"org.eclipse.core.runtime\"/&gt;&lt;import plugin=\"org.eclipse.emf.ecore.change\"/&gt;&lt;import plugin=\"de.uka.ipd.sdq.statistics\" version=\"1.0.0\" match=\"greaterOrEqual\"/&gt;&lt;import plugin=\"de.uka.ipd.sdq.probfunction.math\" version=\"2.0.0\" match=\"greaterOrEqual\"/&gt;&lt;import plugin=\"de.uka.ipd.sdq.workflow.pcm\" version=\"1.0.0\" match=\"greaterOrEqual\"/&gt;&lt;import plugin=\"de.uka.ipd.sdq.probespec.framework\" version=\"1.0.0\" match=\"greaterOrEqual\"/&gt;&lt;import plugin=\"de.uka.ipd.sdq.pipesandfilters\" version=\"1.0.0\" match=\"greaterOrEqual\"/&gt;&lt;import plugin=\"de.uka.ipd.sdq.pipesandfilters.framework\" version=\"1.0.0\" match=\"greaterOrEqual\"/&gt;&lt;import plugin=\"org.jscience\" version=\"4.1.3\" match=\"greaterOrEqual\"/&gt;&lt;import plugin=\"de.uka.ipd.sdq.pipesandfilters.framework.recorder.sensorframework\" version=\"1.0.0\" match=\"greaterOrEqual\"/&gt;&lt;import plugin=\"de.uka.ipd.sdq.simulation.abstractsimengine\" version=\"1.0.0\" match=\"greaterOrEqual\"/&gt;&lt;import plugin=\"de.uka.ipd.sdq.errorhandling\" version=\"1.0.0\" match=\"greaterOrEqual\"/&gt;&lt;import plugin=\"de.fzi.se.accuracy\" version=\"1.0.0\" match=\"greaterOrEqual\"/&gt;&lt;import plugin=\"de.uka.ipd.sdq.reliability.core\" version=\"3.1.0\" match=\"greaterOrEqual\"/&gt;&lt;import plugin=\"de.uka.ipd.sdq.featuremodel\" version=\"2.0.0\" match=\"greaterOrEqual\"/&gt;&lt;import plugin=\"de.uka.ipd.sdq.simulation\" version=\"1.0.0\" match=\"greaterOrEqual\"/&gt;&lt;import plugin=\"de.uka.ipd.sdq.stoex.analyser\"/&gt;&lt;import plugin=\"org.eclipse.debug.ui\"/&gt;&lt;import plugin=\"org.eclipse.jdt.core\"/&gt;\n&lt;import plugin=\"org.eclipse.jdt.launching\"/&gt;\n&lt;import plugin=\"org.eclipse.pde.ui\"/&gt;&lt;import plugin=\"org.eclipse.emf.common.ui\"/&gt;\n&lt;import plugin=\"de.uka.ipd.sdq.workflow.launchconfig\" version=\"1.1.0\" match=\"greaterOrEqual\"/&gt;\n&lt;import plugin=\"de.uka.ipd.sdq.sensorframework.dialogs\"/&gt;\n&lt;import plugin=\"de.uka.ipd.sdq.pcm.dialogs\"/&gt;\n&lt;import plugin=\"org.eclipse.osgi.services\"/&gt;\n&lt;import plugin=\"ch.ethz.iks.r_osgi.remote\" version=\"1.0.0\" match=\"greaterOrEqual\"/&gt;\n&lt;import plugin=\"org.junit4\" version=\"4.3.1\" match=\"greaterOrEqual\"/&gt;\n&lt;import plugin=\"org.eclipse.emf.query.ocl\" version=\"1.2.0\" match=\"greaterOrEqual\"/&gt;\n&lt;import plugin=\"de.uka.ipd.sdq.workflow.mdsd\" version=\"1.0.0\" match=\"greaterOrEqual\"/&gt;\n&lt;import plugin=\"org.eclipse.emf.mwe.core\" version=\"0.7.0\" match=\"greaterOrEqual\"/&gt;\n&lt;import plugin=\"org.eclipse.xpand\" version=\"0.7.0\" match=\"greaterOrEqual\"/&gt;&lt;import plugin=\"org.eclipse.xtend\" version=\"0.7.0\" match=\"greaterOrEqual\"/&gt;&lt;import plugin=\"de.uka.ipd.sdq.dialogs\" version=\"2.0.1\" match=\"greaterOrEqual\"/&gt;\n&lt;import plugin=\"org.eclipse.ui.ide\" version=\"3.5.0\" match=\"greaterOrEqual\"/&gt;&lt;import plugin=\"de.uka.ipd.sdq.featureinstance.editor\" version=\"1.0.0\" match=\"greaterOrEqual\"/&gt;\n&lt;import plugin=\"de.uka.ipd.sdq.pcm.edit\"/&gt;\n&lt;import plugin=\"org.eclipse.emf.edit.ui\" version=\"2.5.0\" match=\"greaterOrEqual\"/&gt;\n&lt;import plugin=\"de.uka.ipd.sdq.pcmbench.ui\" version=\"2.0.0\" match=\"greaterOrEqual\"/&gt;\n&lt;import plugin=\"org.apache.commons.lang\" version=\"2.3.0\" match=\"greaterOrEqual\"/&gt;\n&lt;import plugin=\"de.uka.ipd.sdq.sensorframework.storage\"/&gt;\n&lt;import plugin=\"org.eclipse.core.runtime\" version=\"3.5.0\" match=\"greaterOrEqual\"/&gt;\n&lt;import plugin=\"org.eclipse.emf.ecore\"/&gt;&lt;import plugin=\"org.eclipse.equinox.event\" version=\"1.1.0\" match=\"greaterOrEqual\"/&gt;\n&lt;import plugin=\"org.eclipse.osgi\"/&gt;\n&lt;import plugin=\"org.eclipse.emf.ecore.xmi\"/&gt;\n&lt;import plugin=\"org.eclipse.emf.query\"/&gt;\n&lt;import plugin=\"de.uka.ipd.sdq.units\"/&gt;\n&lt;import plugin=\"org.eclipse.emf.edit\"/&gt;\n&lt;import plugin=\"de.uka.ipd.sdq.identifier.edit\"/&gt;\n&lt;import plugin=\"de.uka.ipd.sdq.probfunction.edit\"/&gt;\n&lt;import plugin=\"de.uka.ipd.sdq.stoex.edit\"/&gt;\n&lt;import plugin=\"de.uka.ipd.sdq.units.edit\"/&gt;\n&lt;import plugin=\"org.eclipse.uml2.common.edit\"/&gt;\n&lt;import plugin=\"org.eclipse.core.resources\"/&gt;\n&lt;import plugin=\"org.eclipse.ui\"/&gt;&lt;import plugin=\"de.uka.ipd.sdq.simucomframework.simucomstatus\" version=\"1.0.0\" match=\"greaterOrEqual\"/&gt;\n&lt;import feature=\"de.uka.ipd.sdq.simulation.abstractsimengine.feature\" version=\"3.3.0\" match=\"greaterOrEqual\"/&gt;\n&lt;import plugin=\"org.eclipse.core.runtime\" version=\"3.7.0\" match=\"compatible\"/&gt;&lt;/requires&gt;&lt;plugin id=\"de.uka.ipd.sdq.pcm.codegen.m2m\" download-size=\"0\" install-size=\"0\" version=\"3.1.0.201309282203\"/&gt;\n&lt;plugin id=\"de.uka.ipd.sdq.simucomframework\" download-size=\"0\" install-size=\"0\" version=\"1.0.0.201309282203\" unpack=\"false\"/&gt;\n&lt;plugin id=\"de.uka.ipd.sdq.simucomframework.variables\" download-size=\"0\" install-size=\"0\" version=\"1.0.0.201309282203\" unpack=\"false\"/&gt;\n&lt;plugin id=\"de.uka.ipd.sdq.codegen.simucontroller\" download-size=\"0\" install-size=\"0\" version=\"1.0.0.201309282203\" unpack=\"false\"/&gt;\n&lt;plugin id=\"de.uka.ipd.sdq.scheduler\" download-size=\"0\" install-size=\"0\" version=\"1.0.0.201309282203\" unpack=\"false\"/&gt;\n&lt;plugin id=\"de.uka.ipd.sdq.branding\" download-size=\"0\" install-size=\"0\" version=\"1.0.0.201309282203\" unpack=\"false\"/&gt;\n&lt;plugin id=\"ch.ethz.iks.r_osgi.remote\" download-size=\"0\" install-size=\"0\" version=\"1.0.0.201309282203\" unpack=\"false\"/&gt;\n&lt;plugin id=\"de.uka.ipd.sdq.simucomframework.simulationdock\" download-size=\"0\" install-size=\"0\" version=\"1.0.0.201309282203\" unpack=\"false\"/&gt;\n&lt;plugin id=\"de.uka.ipd.sdq.simucomframework.simucomstatus\" download-size=\"0\" install-size=\"0\" version=\"1.0.0.201309282203\" unpack=\"false\"/&gt;\n&lt;plugin id=\"de.uka.ipd.sdq.reliability.core\" download-size=\"0\" install-size=\"0\" version=\"3.1.0.201309282203\" unpack=\"false\"/&gt;\n&lt;plugin id=\"de.fzi.se.quality\" download-size=\"0\" install-size=\"0\" version=\"1.0.0.201309282203\" unpack=\"false\"/&gt;\n&lt;plugin id=\"de.fzi.se.quality.edit\" download-size=\"0\" install-size=\"0\" version=\"1.0.0.201309282203\" unpack=\"false\"/&gt;\n&lt;plugin id=\"de.fzi.se.quality.editor\" download-size=\"0\" install-size=\"0\" version=\"1.0.0.201309282203\" unpack=\"false\"/&gt;\n&lt;plugin id=\"de.fzi.se.accuracy\" download-size=\"0\" install-size=\"0\" version=\"1.0.0.201309282203\" unpack=\"false\"/&gt;\n&lt;plugin id=\"de.uka.ipd.sdq.statistics\" download-size=\"0\" install-size=\"0\" version=\"1.0.0.201309191158\" unpack=\"false\"/&gt;\n&lt;plugin id=\"de.uka.ipd.sdq.simulation\" download-size=\"0\" install-size=\"0\" version=\"1.0.0.201309282203\" unpack=\"false\"/&gt;\n&lt;/feature&gt;\n</code></pre>\n"},{"tags":["java","multithreading","buffer","buffer-overflow","java-threads"],"comments":[{"owner":{"account_id":5399448,"reputation":1859,"user_id":4847311,"display_name":"Sven Nilsson"},"score":0,"creation_date":1695228745,"post_id":77139307,"comment_id":135997599,"body_markdown":"I&#39;m just guessing the queue is filled up by the producer before the consumer has even started, so the producers notify() will never reach the consumer.","body":"I&#39;m just guessing the queue is filled up by the producer before the consumer has even started, so the producers notify() will never reach the consumer."}],"answers":[{"tags":[],"owner":{"account_id":216120,"reputation":49213,"user_id":471160,"accept_rate":90,"display_name":"marcinj"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695193520,"creation_date":1695193520,"answer_id":77140043,"question_id":77139307,"body_markdown":"Both - Producer and Consumer classes are extending the SharedBuffer class, and this way they each have their own separate instance of the queue - so when you add new tasks in Producer, Consumer dont see them. \r\n\r\nQueue should be shared between instances of Producer and Consumer. To do it pass the same instance of SharedBuffer to both the Producer and Consumer classes. Below is example of how you can modify your main method:\r\n\r\n    public class driver {\r\n    \r\n        public static void main(String[] args) throws InterruptedException {\r\n            \r\n            SharedBuffer sharedBuffer = new SharedBuffer();\r\n            \r\n            Producer producer = new Producer(sharedBuffer);\r\n            Consumer consumer = new Consumer(sharedBuffer);\r\n            \r\n            Thread producerThread = new Thread(producer);\r\n            Thread consumerThread = new Thread(consumer);\r\n            \r\n            consumerThread.start();\r\n            producerThread.start();\r\n            \r\n            \r\n            producerThread.join();\r\n            consumerThread.join();\r\n    \r\n        }\r\n    \r\n    }\r\n\r\n... and of course, modify the constructors of your Producer and Consumer classes to accept a SharedBuffer instance and use it instead of creating a new one.\r\n\r\nI also suggest you to change `synchronized(this) {` to `synchronized(queue) {`, to make code thread safe.\r\n","title":"Bounded buffer problem - Producer producing the data but consumer not consuming it","body":"<p>Both - Producer and Consumer classes are extending the SharedBuffer class, and this way they each have their own separate instance of the queue - so when you add new tasks in Producer, Consumer dont see them.</p>\n<p>Queue should be shared between instances of Producer and Consumer. To do it pass the same instance of SharedBuffer to both the Producer and Consumer classes. Below is example of how you can modify your main method:</p>\n<pre><code>public class driver {\n\n    public static void main(String[] args) throws InterruptedException {\n        \n        SharedBuffer sharedBuffer = new SharedBuffer();\n        \n        Producer producer = new Producer(sharedBuffer);\n        Consumer consumer = new Consumer(sharedBuffer);\n        \n        Thread producerThread = new Thread(producer);\n        Thread consumerThread = new Thread(consumer);\n        \n        consumerThread.start();\n        producerThread.start();\n        \n        \n        producerThread.join();\n        consumerThread.join();\n\n    }\n\n}\n</code></pre>\n<p>... and of course, modify the constructors of your Producer and Consumer classes to accept a SharedBuffer instance and use it instead of creating a new one.</p>\n<p>I also suggest you to change <code>synchronized(this) {</code> to <code>synchronized(queue) {</code>, to make code thread safe.</p>\n"}],"owner":{"account_id":21969644,"reputation":1,"user_id":21945937,"display_name":"Harkirat Saran"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695193520,"creation_date":1695184404,"question_id":77139307,"body_markdown":"I am writing a bound buffer program, the producer produces the data based on the size of the buffer, but the consumer is not consuming it, thus not solving the problem. What am I missing?\r\n\r\nBuffer class:\r\n\r\n\r\n```\r\nimport java.util.Queue;\r\nimport java.util.LinkedList;\r\n\r\npublic class SharedBuffer {\r\n\t\r\n\tQueue&lt;Integer&gt; queue = new LinkedList&lt;&gt;();\r\n\t\r\n\tint bufferCapacity = 5;\r\n\r\n}\r\n\r\n```\r\n\r\nProducer class:\r\n\r\n\r\n```\r\npublic class Producer extends SharedBuffer implements Runnable {\r\n\t\r\n\t@Override\r\n\tpublic void run() {\r\n\t\tint currentValue = 0;\r\n\t\twhile(true) {\r\n\t\t\tsynchronized(this){\r\n\t\t\t\t\r\n\t\t\t\twhile(queue.size() == bufferCapacity) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\twait();\r\n\t\t\t\t\t} catch (InterruptedException e) {\r\n\t\t\t\t\t\t// TODO Auto-generated catch block\r\n\t\t\t\t\t\te.printStackTrace();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tSystem.out.println(&quot;Producer produced: &quot; + currentValue);\r\n\t\t\t\t\r\n\t\t\t\tqueue.add(currentValue++);\r\n\t\t\t\t\r\n\t\t\t\tnotify();\r\n\t\t\t\t\r\n\t\t\t\ttry {\r\n\t\t\t\t\tThread.sleep(1000);\r\n\t\t\t\t} catch (InterruptedException e) {\r\n\t\t\t\t\t// TODO Auto-generated catch block\r\n\t\t\t\t\te.printStackTrace();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\n}\r\n\r\n```\r\n\r\nConsumer class:\r\n\r\n\r\n```\r\npublic class Consumer extends SharedBuffer implements Runnable{\r\n\r\n\t@Override\r\n\tpublic void run() {\r\n\t\t// TODO Auto-generated method stub\r\n\t\tint currentItem;\r\n\t\t\r\n\t\twhile(true) {\r\n\t\t\tsynchronized(this) {\r\n\t\t\t\t\r\n\t\t\t\twhile(queue.size() == 0) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\twait();\r\n\t\t\t\t\t} catch (InterruptedException e) {\r\n\t\t\t\t\t\t// TODO Auto-generated catch block\r\n\t\t\t\t\t\te.printStackTrace();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tcurrentItem = queue.remove();\r\n\t\t\t\t\r\n\t\t\t\tSystem.out.println(&quot;Consumer consumed: &quot; + currentItem);\r\n\t\t\t\t\r\n\t\t\t\tnotify();\r\n\t\t\t\t\r\n\t\t\t\ttry {\r\n\t\t\t\t\tThread.sleep(1000);\r\n\t\t\t\t} catch (InterruptedException e) {\r\n\t\t\t\t\t// TODO Auto-generated catch block\r\n\t\t\t\t\te.printStackTrace();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\n\t\r\n}\r\n\r\n```\r\n\r\nMain/Driver class:\r\n\r\n\r\n```\r\npublic class driver {\r\n\r\n\tpublic static void main(String[] args) throws InterruptedException {\r\n\t\t// TODO Auto-generated method stub\r\n\t\t\r\n\t\tProducer producer = new Producer();\r\n\t\tConsumer consumer = new Consumer();\r\n\t\t\r\n\t\tThread producerThread = new Thread(producer);\r\n\t\tThread consumerThread = new Thread(consumer);\r\n\t\t\r\n\t\tconsumerThread.start();\r\n\t\tproducerThread.start();\r\n\t\t\r\n\t\t\r\n\t\tproducerThread.join();\r\n\t\tconsumerThread.join();\r\n\r\n\t}\r\n\r\n}\r\n```\r\n\r\nOutput (The loop continues without exiting):\r\n\r\n\r\n```\r\nProducer produced: 0\r\nProducer produced: 1\r\nProducer produced: 2\r\nProducer produced: 3\r\nProducer produced: 4\r\n\r\n```\r\n\r\n\r\n\r\nThe threads should be synchronized so that the buffer doesn&#39;t overflow with producer producing overflow data or goes underflow with the consumer trying to consume more data than it is present.","title":"Bounded buffer problem - Producer producing the data but consumer not consuming it","body":"<p>I am writing a bound buffer program, the producer produces the data based on the size of the buffer, but the consumer is not consuming it, thus not solving the problem. What am I missing?</p>\n<p>Buffer class:</p>\n<pre><code>import java.util.Queue;\nimport java.util.LinkedList;\n\npublic class SharedBuffer {\n    \n    Queue&lt;Integer&gt; queue = new LinkedList&lt;&gt;();\n    \n    int bufferCapacity = 5;\n\n}\n\n</code></pre>\n<p>Producer class:</p>\n<pre><code>public class Producer extends SharedBuffer implements Runnable {\n    \n    @Override\n    public void run() {\n        int currentValue = 0;\n        while(true) {\n            synchronized(this){\n                \n                while(queue.size() == bufferCapacity) {\n                    try {\n                        wait();\n                    } catch (InterruptedException e) {\n                        // TODO Auto-generated catch block\n                        e.printStackTrace();\n                    }\n                }\n                \n                System.out.println(&quot;Producer produced: &quot; + currentValue);\n                \n                queue.add(currentValue++);\n                \n                notify();\n                \n                try {\n                    Thread.sleep(1000);\n                } catch (InterruptedException e) {\n                    // TODO Auto-generated catch block\n                    e.printStackTrace();\n                }\n            }\n        }\n        \n    }\n\n}\n\n</code></pre>\n<p>Consumer class:</p>\n<pre><code>public class Consumer extends SharedBuffer implements Runnable{\n\n    @Override\n    public void run() {\n        // TODO Auto-generated method stub\n        int currentItem;\n        \n        while(true) {\n            synchronized(this) {\n                \n                while(queue.size() == 0) {\n                    try {\n                        wait();\n                    } catch (InterruptedException e) {\n                        // TODO Auto-generated catch block\n                        e.printStackTrace();\n                    }\n                }\n                \n                currentItem = queue.remove();\n                \n                System.out.println(&quot;Consumer consumed: &quot; + currentItem);\n                \n                notify();\n                \n                try {\n                    Thread.sleep(1000);\n                } catch (InterruptedException e) {\n                    // TODO Auto-generated catch block\n                    e.printStackTrace();\n                }\n            }\n        }\n        \n    }\n\n    \n}\n\n</code></pre>\n<p>Main/Driver class:</p>\n<pre><code>public class driver {\n\n    public static void main(String[] args) throws InterruptedException {\n        // TODO Auto-generated method stub\n        \n        Producer producer = new Producer();\n        Consumer consumer = new Consumer();\n        \n        Thread producerThread = new Thread(producer);\n        Thread consumerThread = new Thread(consumer);\n        \n        consumerThread.start();\n        producerThread.start();\n        \n        \n        producerThread.join();\n        consumerThread.join();\n\n    }\n\n}\n</code></pre>\n<p>Output (The loop continues without exiting):</p>\n<pre><code>Producer produced: 0\nProducer produced: 1\nProducer produced: 2\nProducer produced: 3\nProducer produced: 4\n\n</code></pre>\n<p>The threads should be synchronized so that the buffer doesn't overflow with producer producing overflow data or goes underflow with the consumer trying to consume more data than it is present.</p>\n"},{"tags":["java","sql","spring","oracle","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":1390639,"reputation":23879,"user_id":1321564,"accept_rate":71,"display_name":"Benjamin M"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1489586283,"creation_date":1489586063,"answer_id":42811819,"question_id":42810067,"body_markdown":"Multiple Possibilities:\r\n\r\n**1. The generated Query**\r\n\r\nThe generated query looks pretty fine to me. It&#39;s exactly the same as the query within your `@Query` annotation.\r\n\r\n**2. SQL Result to Java Object conversion**\r\n\r\nI don&#39;t know how big your tables are, but: Converting SQL Results to Java Objects takes some time. For small tables this could increase query time by 0-5%.\r\n\r\n**3. Lazy loading**\r\n\r\nYou didn&#39;t show the code for your entities. If you have `@OneToMany` or `@ManyToMany` relations, JPA will by default use Lazy Loading. This can really slow down everything by magnitudes.\r\n\r\n**4. Latency**\r\n\r\nIf you execute the SQL Query on the same machine where the SQL DB is, but your Java Application communicates over network with the SQL DB, it can result in much slower queries, too.\r\n\r\n(5. Wrong kind of DB. Seems like you build an object graph. Maybe have a look at Neo4j **`;-)`**)","title":"Query on DB is fast, but fetching by JPARepository is slow","body":"<p>Multiple Possibilities:</p>\n\n<p><strong>1. The generated Query</strong></p>\n\n<p>The generated query looks pretty fine to me. It's exactly the same as the query within your <code>@Query</code> annotation.</p>\n\n<p><strong>2. SQL Result to Java Object conversion</strong></p>\n\n<p>I don't know how big your tables are, but: Converting SQL Results to Java Objects takes some time. For small tables this could increase query time by 0-5%.</p>\n\n<p><strong>3. Lazy loading</strong></p>\n\n<p>You didn't show the code for your entities. If you have <code>@OneToMany</code> or <code>@ManyToMany</code> relations, JPA will by default use Lazy Loading. This can really slow down everything by magnitudes.</p>\n\n<p><strong>4. Latency</strong></p>\n\n<p>If you execute the SQL Query on the same machine where the SQL DB is, but your Java Application communicates over network with the SQL DB, it can result in much slower queries, too.</p>\n\n<p>(5. Wrong kind of DB. Seems like you build an object graph. Maybe have a look at Neo4j <strong><code>;-)</code></strong>)</p>\n"},{"tags":[],"owner":{"account_id":11087231,"reputation":1019,"user_id":8140473,"display_name":"Rohim Chou"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695192539,"creation_date":1695192539,"answer_id":77139929,"question_id":42810067,"body_markdown":"Had the same problem, expanding the jdbc `fetchSize` property resolved the issue for me:\r\n\r\n```java\r\n// adding the fetchSize QueryHint for the query\r\n@QueryHints(@QueryHint(name=&quot;org.hibernate.fetchSize&quot;, value=&quot;200&quot;))\r\n@Query(&quot;SELECT person.uuid FROM ....&quot;)\r\nSet&lt;String&gt; findByGrandParentId(final String parentId);\r\n\r\n// or set it globally, e.g., through application.properties\r\nspring.jpa.properties.hibernate.jdbc.fetch_size=200\r\n```\r\n\r\nThrough profiling, found that the bottleneck occurred while matching each ResultSet row to Entity object. Seems that each round trip to the DB slow down the overall performance in my case.\r\n\r\nFrom [Oracle JDBC Developer&#39;s Guide](https://docs.oracle.com/cd/E11882_01/java.112/e16548/resltset.htm#JJDBC28611) (emphasis mine):\r\n\r\n&gt; **By default, when Oracle JDBC runs a query, it retrieves a result set**\r\n&gt; **of 10 rows at a time** from the database cursor. This is the default\r\n&gt; Oracle row fetch size value. You can change the number of rows\r\n&gt; retrieved with each trip to the database cursor by changing the row\r\n&gt; fetch size value.\r\n&gt; \r\n&gt; Standard **JDBC also enables you to specify the number of rows fetched**\r\n&gt; **with each database round-trip for a query**, and this number is referred\r\n&gt; to as the fetch size. In Oracle JDBC, the row-prefetch value is used\r\n&gt; as the default fetch size in a statement object. Setting the fetch\r\n&gt; size overrides the row-prefetch setting and affects subsequent queries\r\n&gt; run through that statement object.\r\n\r\n\r\n","title":"Query on DB is fast, but fetching by JPARepository is slow","body":"<p>Had the same problem, expanding the jdbc <code>fetchSize</code> property resolved the issue for me:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// adding the fetchSize QueryHint for the query\n@QueryHints(@QueryHint(name=&quot;org.hibernate.fetchSize&quot;, value=&quot;200&quot;))\n@Query(&quot;SELECT person.uuid FROM ....&quot;)\nSet&lt;String&gt; findByGrandParentId(final String parentId);\n\n// or set it globally, e.g., through application.properties\nspring.jpa.properties.hibernate.jdbc.fetch_size=200\n</code></pre>\n<p>Through profiling, found that the bottleneck occurred while matching each ResultSet row to Entity object. Seems that each round trip to the DB slow down the overall performance in my case.</p>\n<p>From <a href=\"https://docs.oracle.com/cd/E11882_01/java.112/e16548/resltset.htm#JJDBC28611\" rel=\"nofollow noreferrer\">Oracle JDBC Developer's Guide</a> (emphasis mine):</p>\n<blockquote>\n<p><strong>By default, when Oracle JDBC runs a query, it retrieves a result set</strong>\n<strong>of 10 rows at a time</strong> from the database cursor. This is the default\nOracle row fetch size value. You can change the number of rows\nretrieved with each trip to the database cursor by changing the row\nfetch size value.</p>\n<p>Standard <strong>JDBC also enables you to specify the number of rows fetched</strong>\n<strong>with each database round-trip for a query</strong>, and this number is referred\nto as the fetch size. In Oracle JDBC, the row-prefetch value is used\nas the default fetch size in a statement object. Setting the fetch\nsize overrides the row-prefetch setting and affects subsequent queries\nrun through that statement object.</p>\n</blockquote>\n"}],"owner":{"account_id":6076754,"reputation":6728,"user_id":4743869,"accept_rate":68,"display_name":"ByeBye"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10358,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":42811819,"answer_count":2,"score":3,"last_activity_date":1695192539,"creation_date":1489581659,"question_id":42810067,"body_markdown":"I have following tables in DB:\r\n\r\n`Person`, \r\n`Parent`, \r\n`GrandParent`\r\n`Parent - Person` is `OneToMany` relation (`Person` has `parentId`)\r\n`GrandParent - Parent` is `ManyToMany` relation (`grandparent_parent` table)\r\n\r\nI created in `PersonRepository` which extends `JPARepository` :\r\n\r\n\t@Query(&quot;SELECT person.uuid FROM Person person JOIN person.parent parent JOIN parent.grandparents grandparent WHERE grandparent.uuid = ?1&quot;)\r\n\tSet&lt;String&gt; findByGrandParentId(final String parentId);\r\n\r\nFor fetching all ids of `Person` which are under given `GrandParent`.\r\nThis SQL is created:\r\n\r\n\tSELECT\r\n\t   person0_.uuid as col_0_0_ \r\n\tFROM\r\n\t\tperson person0_ \r\n\tINNER JOIN\r\n\t\tparent parent1_ \r\n\t\t\ton person0_.parentid=parent1_.uuid \r\n\tINNER JOIN\r\n\t\tgrandparent_parent grandaparent_parent2_ \r\n\t\t\ton parent1_.uuid=grandaparent_parent2_.parentid \r\n\tINNER JOIN\r\n\t\tgrandparent parent3_ \r\n\t\t\ton grandaparent_parent2_.grandparentid=parent3_.uuid \r\n\tWHERE\r\n\t\tparent3_.uuid=&#39;13906f55-441c-45bd-bef6-8beefa4119c4&#39;\r\n\t\t\r\n\t\t\r\nI logged how much time repository needs fetch data, and it took (average) *~400ms* to fetch *~400* records.\r\nThen I execute the same SQL query on DB and each time query took no more than *50ms*.\r\n\r\nI know that this generated query is not optimized because we can only join two tables `GRANDPARENT_PARENT` and `PERSON`, but this is not the problem here, because such query is executed also below *50ms*.\r\n\r\nWhy I have such differences between fetching by repository and fetching in db? Is it possible to fix that?\r\n","title":"Query on DB is fast, but fetching by JPARepository is slow","body":"<p>I have following tables in DB:</p>\n\n<p><code>Person</code>, \n<code>Parent</code>, \n<code>GrandParent</code>\n<code>Parent - Person</code> is <code>OneToMany</code> relation (<code>Person</code> has <code>parentId</code>)\n<code>GrandParent - Parent</code> is <code>ManyToMany</code> relation (<code>grandparent_parent</code> table)</p>\n\n<p>I created in <code>PersonRepository</code> which extends <code>JPARepository</code> :</p>\n\n<pre><code>@Query(\"SELECT person.uuid FROM Person person JOIN person.parent parent JOIN parent.grandparents grandparent WHERE grandparent.uuid = ?1\")\nSet&lt;String&gt; findByGrandParentId(final String parentId);\n</code></pre>\n\n<p>For fetching all ids of <code>Person</code> which are under given <code>GrandParent</code>.\nThis SQL is created:</p>\n\n<pre><code>SELECT\n   person0_.uuid as col_0_0_ \nFROM\n    person person0_ \nINNER JOIN\n    parent parent1_ \n        on person0_.parentid=parent1_.uuid \nINNER JOIN\n    grandparent_parent grandaparent_parent2_ \n        on parent1_.uuid=grandaparent_parent2_.parentid \nINNER JOIN\n    grandparent parent3_ \n        on grandaparent_parent2_.grandparentid=parent3_.uuid \nWHERE\n    parent3_.uuid='13906f55-441c-45bd-bef6-8beefa4119c4'\n</code></pre>\n\n<p>I logged how much time repository needs fetch data, and it took (average) <em>~400ms</em> to fetch <em>~400</em> records.\nThen I execute the same SQL query on DB and each time query took no more than <em>50ms</em>.</p>\n\n<p>I know that this generated query is not optimized because we can only join two tables <code>GRANDPARENT_PARENT</code> and <code>PERSON</code>, but this is not the problem here, because such query is executed also below <em>50ms</em>.</p>\n\n<p>Why I have such differences between fetching by repository and fetching in db? Is it possible to fix that?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":115344,"reputation":76329,"user_id":302916,"display_name":"Brian Roach"},"score":0,"creation_date":1391324159,"post_id":21507858,"comment_id":32470468,"body_markdown":"http://docs.oracle.com/javase/tutorial/essential/concurrency/sync.html","body":"<a href=\"http://docs.oracle.com/javase/tutorial/essential/concurrency/sync.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/tutorial/essential/concurrency/sync.h&zwnj;&#8203;tml</a>"},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1391325408,"post_id":21507858,"comment_id":32470647,"body_markdown":"The synchronized ones are, err, synchronized. There is no such thing as &#39;ASynchronized&#39;.","body":"The synchronized ones are, err, synchronized. There is no such thing as &#39;ASynchronized&#39;."},{"owner":{"account_id":4802848,"reputation":2464,"user_id":3878948,"accept_rate":86,"display_name":"Rishabh Agarwal"},"score":0,"creation_date":1513016257,"post_id":21507858,"comment_id":82479082,"body_markdown":"Solution: https://stackoverflow.com/questions/1085709/what-does-synchronized-mean","body":"Solution: <a href=\"https://stackoverflow.com/questions/1085709/what-does-synchronized-mean\" title=\"what does synchronized mean\">stackoverflow.com/questions/1085709/what-does-synchronized-m&zwnj;&#8203;ean</a>"},{"owner":{"account_id":10896024,"reputation":299,"user_id":8009979,"display_name":"ADev"},"score":0,"creation_date":1628587305,"post_id":21507858,"comment_id":121454554,"body_markdown":"I was reading about HashSet in Java and I found out that HashSet is also a non synchronized class in Java.","body":"I was reading about HashSet in Java and I found out that HashSet is also a non synchronized class in Java."}],"answers":[{"tags":[],"owner":{"account_id":1252466,"reputation":79539,"user_id":1212596,"accept_rate":52,"display_name":"Paul Draper"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1516109945,"creation_date":1391323521,"answer_id":21507875,"question_id":21507858,"body_markdown":"A synchronized collection implies that the class is thread safe. (You can have non-synchronized collections that are also thread safe, but that is a topic for about thousand theses another day.)\r\n\r\nThe collections synchronize mutations by obtaining locks to make sure that other threads don&#39;t corrupt the state.\r\n\r\nBasically, use the non-synchronized versions, unless you have multiple threads.\r\n\r\n(And if you don&#39;t know, a thread is essentially a line of execution within a program. Some programs have multiple threads, all sharing the same code and memory.)","title":"What is the difference between synchronized and non-synchronized collection classes in Java?","body":"<p>A synchronized collection implies that the class is thread safe. (You can have non-synchronized collections that are also thread safe, but that is a topic for about thousand theses another day.)</p>\n\n<p>The collections synchronize mutations by obtaining locks to make sure that other threads don't corrupt the state.</p>\n\n<p>Basically, use the non-synchronized versions, unless you have multiple threads.</p>\n\n<p>(And if you don't know, a thread is essentially a line of execution within a program. Some programs have multiple threads, all sharing the same code and memory.)</p>\n"},{"tags":[],"owner":{"account_id":2265631,"reputation":984,"user_id":1994394,"display_name":"spgodara"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1391323949,"creation_date":1391323949,"answer_id":21507925,"question_id":21507858,"body_markdown":"Collection classes are not synchronized by default. But if you want a synchronized collection, you can use static method  `java.util.Collections.synchronizedCollection(Collection&lt;T&gt; c)`. It will create wrapper over your collection object. So, actually, your collection object will not be synchronized, but you will access your object&#39;s method via synchronized methods in wrapper object.","title":"What is the difference between synchronized and non-synchronized collection classes in Java?","body":"<p>Collection classes are not synchronized by default. But if you want a synchronized collection, you can use static method  <code>java.util.Collections.synchronizedCollection(Collection&lt;T&gt; c)</code>. It will create wrapper over your collection object. So, actually, your collection object will not be synchronized, but you will access your object's method via synchronized methods in wrapper object.</p>\n"},{"tags":[],"owner":{"account_id":13598455,"reputation":1,"user_id":9809742,"display_name":"shubham gaikwad"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1527586345,"creation_date":1527586345,"answer_id":50580971,"question_id":21507858,"body_markdown":"**Non synchronized** -It is not-thread safe and can&#39;t be shared between many threads without proper synchronization code.\r\nWhile,\r\n **Synchronized**- It is thread-safe and can be shared with many threads.","title":"What is the difference between synchronized and non-synchronized collection classes in Java?","body":"<p><strong>Non synchronized</strong> -It is not-thread safe and can't be shared between many threads without proper synchronization code.\nWhile,\n <strong>Synchronized</strong>- It is thread-safe and can be shared with many threads.</p>\n"},{"tags":[],"owner":{"account_id":9607057,"reputation":331,"user_id":7132764,"accept_rate":33,"display_name":"A.N.Gupta"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1552475606,"creation_date":1552475606,"answer_id":55140561,"question_id":21507858,"body_markdown":"In Synchronization, If we are executing something then we need to wait for it to finish before moving to the another task. \r\n   \r\nCollection classes are not synchronized by default. The collection object is mutable that means once creating the object and that object is calling two threads at a time but one thread is changing the value of the object then it can be effected by another object.  So, it is not thread safe.\r\n\r\nWe can explicitly synchronized collection using static method    **_java.util.Collections.synchronizedCollection(Collection&lt;&lt;T&gt;T&gt; c)_**\r\n\r\n","title":"What is the difference between synchronized and non-synchronized collection classes in Java?","body":"<p>In Synchronization, If we are executing something then we need to wait for it to finish before moving to the another task. </p>\n\n<p>Collection classes are not synchronized by default. The collection object is mutable that means once creating the object and that object is calling two threads at a time but one thread is changing the value of the object then it can be effected by another object.  So, it is not thread safe.</p>\n\n<p>We can explicitly synchronized collection using static method    <strong><em>java.util.Collections.synchronizedCollection(Collection&lt;T> c)</em></strong></p>\n"},{"tags":[],"owner":{"account_id":14640428,"reputation":2276,"user_id":10573167,"display_name":"Sahan Amarsha"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1580647268,"creation_date":1580628938,"answer_id":60024101,"question_id":21507858,"body_markdown":"Synchronized basically means that **only one thread** can access methods of that particular class at any given time. StringBuffer is an example of a synchronized class. A Synchronized class is a thread-safe class.\r\n\r\nNon-Synchronized means that **two or more threads** can access the methods of that particular class at any given time. StringBuilder is an example of a non-synchronized class. Generally, a non-synchronized class is not thread-safe. (but some non-synchronized classes are thread-safe)","title":"What is the difference between synchronized and non-synchronized collection classes in Java?","body":"<p>Synchronized basically means that <strong>only one thread</strong> can access methods of that particular class at any given time. StringBuffer is an example of a synchronized class. A Synchronized class is a thread-safe class.</p>\n\n<p>Non-Synchronized means that <strong>two or more threads</strong> can access the methods of that particular class at any given time. StringBuilder is an example of a non-synchronized class. Generally, a non-synchronized class is not thread-safe. (but some non-synchronized classes are thread-safe)</p>\n"}],"owner":{"account_id":2096654,"reputation":351,"user_id":3036311,"accept_rate":33,"display_name":"Incredible"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50802,"favorite_count":0,"down_vote_count":2,"up_vote_count":11,"answer_count":5,"score":9,"last_activity_date":1695192521,"creation_date":1391323390,"question_id":21507858,"body_markdown":"I was reading about Java&#39;s collections and then I read this line:\r\n\r\n&gt; &quot;None of the collection classes are synchronized, but as you will see\r\n&gt; later in this chapter, it is possible to obtain synchronized\r\n&gt; versions.&quot;\r\n\r\nCan anyone tell me what is the difference between synchronized and non-synchronized collections in Java?","title":"What is the difference between synchronized and non-synchronized collection classes in Java?","body":"<p>I was reading about Java's collections and then I read this line:</p>\n\n<blockquote>\n  <p>\"None of the collection classes are synchronized, but as you will see\n  later in this chapter, it is possible to obtain synchronized\n  versions.\"</p>\n</blockquote>\n\n<p>Can anyone tell me what is the difference between synchronized and non-synchronized collections in Java?</p>\n"},{"tags":["java","xpath","jaxb"],"owner":{"account_id":2185983,"reputation":2728,"user_id":1934402,"accept_rate":92,"display_name":"yaserso"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695192425,"creation_date":1695192425,"question_id":77139917,"body_markdown":"I have a JAXB annotated class:\r\n```java\r\npackage com.stackexchange.question;\r\n\r\nimport jakarta.xml.bind.annotation.*;\r\n\r\nimport lombok.experimental.FieldNameConstants;\r\nimport lombok.Data;\r\n\r\nimport org.eclipse.persistance.oxm.annotations.XmlCDATA;\r\n\r\n@Data\r\n@FieldNameConstants\r\n@XmlRootElement(name = &quot;root&quot;)\r\n@XmlAccessorType(XmlAccessType.FIELD)\r\npublic class Sample {\r\n    @XmlCDATA\r\n    @XmlElement(name = &quot;fall&quot;, nillable = true)\r\n    private String fall;\r\n\r\n    @XmlElement(name = &quot;number&quot;)\r\n    private Number number;\r\n}\r\n\r\n@Data\r\n@FieldNameConstants\r\n@XmlAccessorType(XmlAccessType.FIELD)\r\npublic class Number {\r\n    @XmlCDATA\r\n    @XmlElement(name = &quot;classroom&quot;, nillable = true)\r\n    private String classroom;\r\n}\r\n```\r\n\r\nI need a way to generate the XPath at compile-time. For example, I want a way to go about it in a type-safe manner. Currently, I&#39;m encapsulating all of the field classes within the parent class so I can do `Sample.Number.class` + `Sample.Fields.number` and then looping through using `getEnclosingClass` before using the annotations to get the names, and finally generate the XPath through that.\r\n\r\nIs there a better way to do it? I already have all the JAXB annotated classes, so I essentially have a skeleton of the XML through the class, but I can&#39;t generate the XPath without a hacky way of doing it.\r\n\r\nI don&#39;t mind using a library if it provides this feature.","title":"How to get XPath from a JAXB annotated class at compile time without an instance of the class?","body":"<p>I have a JAXB annotated class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.stackexchange.question;\n\nimport jakarta.xml.bind.annotation.*;\n\nimport lombok.experimental.FieldNameConstants;\nimport lombok.Data;\n\nimport org.eclipse.persistance.oxm.annotations.XmlCDATA;\n\n@Data\n@FieldNameConstants\n@XmlRootElement(name = &quot;root&quot;)\n@XmlAccessorType(XmlAccessType.FIELD)\npublic class Sample {\n    @XmlCDATA\n    @XmlElement(name = &quot;fall&quot;, nillable = true)\n    private String fall;\n\n    @XmlElement(name = &quot;number&quot;)\n    private Number number;\n}\n\n@Data\n@FieldNameConstants\n@XmlAccessorType(XmlAccessType.FIELD)\npublic class Number {\n    @XmlCDATA\n    @XmlElement(name = &quot;classroom&quot;, nillable = true)\n    private String classroom;\n}\n</code></pre>\n<p>I need a way to generate the XPath at compile-time. For example, I want a way to go about it in a type-safe manner. Currently, I'm encapsulating all of the field classes within the parent class so I can do <code>Sample.Number.class</code> + <code>Sample.Fields.number</code> and then looping through using <code>getEnclosingClass</code> before using the annotations to get the names, and finally generate the XPath through that.</p>\n<p>Is there a better way to do it? I already have all the JAXB annotated classes, so I essentially have a skeleton of the XML through the class, but I can't generate the XPath without a hacky way of doing it.</p>\n<p>I don't mind using a library if it provides this feature.</p>\n"},{"tags":["java","maven","exception","gemfire","geode"],"answers":[{"tags":[],"owner":{"account_id":24204646,"reputation":3,"user_id":18162025,"display_name":"ash22"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1695192272,"creation_date":1695192272,"answer_id":77139897,"question_id":77116919,"body_markdown":"For anyone who might face this issue in future, it was because of the geode-log4j jar. I had another folder where I add slf4j jars in the project. Due to technical reasons, I am not allowed to remove those.Once I removed the jar this exception disappeared. ","title":"ClassCastException when creating geode ClientCacheFactory object","body":"<p>For anyone who might face this issue in future, it was because of the geode-log4j jar. I had another folder where I add slf4j jars in the project. Due to technical reasons, I am not allowed to remove those.Once I removed the jar this exception disappeared.</p>\n"}],"owner":{"account_id":24204646,"reputation":3,"user_id":18162025,"display_name":"ash22"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77139897,"answer_count":1,"score":0,"last_activity_date":1695192272,"creation_date":1694851765,"question_id":77116919,"body_markdown":"I am using gemfire and trying to load client cache using apache geode in my maven project. When ClientCacheFactory is created, I am getting a ClassCastException\r\n\r\n```\r\njava.lang.ClassCastException: org.apache.logging.slf4j.SLF4JLogger cannot be cast to org.apache.logging.log4j.core.Logger\r\n  at org.apache.geode.logging.log4j.internal.impl.Log4jLoggingProvider.getRootLoggerContext(Log4jLoggingProvider.java:105) ~[geode-log4j-9.10.5.jar:na] \r\n\r\n  at org.apache.geode.logging.log4j.internal.impl.Log4jloggingProvider.getConfiguration (Log4jloggingProvider. java:109) ~[geode-log4j-9.10.5.jar:na]\r\n\r\nat org.apache.geode.logging.log4j.internāl.impl.log4jloggingProvider.isUsingGemFireDefaultConfig (Log4jloggingProvider.java:94) ~[geode-log4j-9.10.5.jar:na]\r\n\r\nat org.apache.geode.logging.log4j.internal.impl.Log4jloggingProvider.shouldUpdateLoglevels (Log4jloggingProvider.java:143) ~[geode-logj-9.10.5.jar:na]\r\n\r\nat org.apache.geode.logging.log4j.internal.impl.log4jloggingProvider.configure (Log4jLoggingProvider.Java:121) &quot;[geode-log4j-9.10.5.jar:na]\r\n\r\nat org.apache.geode.logging.internal.Configuration.configChanged (Configuration. Java:143) &quot; [geode-core-9.10.5.jar:na]\r\n\r\nat org.apache.geode.logging.internal.Configuration. initialize (Configuration.java:132) &quot; [geode-core-9.10.5.jar:na]\r\n\r\nat org.apache.geode.logging.internal.LoggingSession.createSession (LoggingSession.java:69) &quot;[geode-core-9.10.5.jar:na]\r\n\r\nat org.apache.geode.distributed.internal.InternalDistributedSystem.initialize (InternalDistributedSystem. java:704) ~[geode-core-9.10.5.jar:na]\r\n\r\nat org.apache.geode.distributed.internal. InternalDistributedSystem.access$200 (InternalDistributedSystem. java:135) ~[geode-core-9.10.5.]ar:na\r\n\r\nat org.apache.geode.distributed.internal. InternalDistributedSystemșBuilder.build (InternalDistributedSystem. java:3036) ~[geode-core-9.10.5.jar:na]\r\n\r\nat org.apache.geode.distributed. internal.InternalDistributedSystem.connectInternal (InternalDistributedSystem.java:290) ~[geode-core-9.10.5.jar:na]\r\n\r\nat org.apache.geode.distributed.&#238;nternal.InternalDistributedSystem.connectInternal (InternalDistributedsystem. java:216) ~[geode-core-9.10.5.jar:na]\r\n\r\nat org.apache.geode.cache.client.ClientCacheFactory.connectInternalDistributedSystem (ClientCacheFactory. java:280) ~ [geode-core-9.10.5.jar:na]\r\n\r\nat org.apache.geode.cache.client.ClientCacheFactory.basicCreate (ClientCacheFactory.java:250) - [geode-core-9.10.5.jar:na]\r\n\r\nat org.apache.geode.cache.client.ClientCacheFactory.create (ClientCacheFactory. java:216) &quot;[geode-core-9.10.5.jar:na]\r\n.....\r\n\r\n```\r\n\r\n\r\n\r\n\r\n\r\n\r\nI have tried removing log4j-over-slf4j,log4j-api and log4j-core and tried adding slf4j-log4j12 but still I get this exception. Now I know geode-core internally includes log4j, so I have excluded log4j and log4j-to-slf4j dependencies as well. But issue still persists. It would be really helpful if I could get some pointers regrading the exception.\r\n\r\nCurrently I have the following dependencies :\r\n1.log4j-slf4j-impl\r\n2.log4j-api\r\n3.log4j-core\r\n4.log4j-over-slf4j\r\n5.slf4j-api\r\n6.slf4j-log4j12 \r\n\r\nI am using geode-core-9.10.5 with both geode-log4j and geode-logging included as well.","title":"ClassCastException when creating geode ClientCacheFactory object","body":"<p>I am using gemfire and trying to load client cache using apache geode in my maven project. When ClientCacheFactory is created, I am getting a ClassCastException</p>\n<pre><code>java.lang.ClassCastException: org.apache.logging.slf4j.SLF4JLogger cannot be cast to org.apache.logging.log4j.core.Logger\n  at org.apache.geode.logging.log4j.internal.impl.Log4jLoggingProvider.getRootLoggerContext(Log4jLoggingProvider.java:105) ~[geode-log4j-9.10.5.jar:na] \n\n  at org.apache.geode.logging.log4j.internal.impl.Log4jloggingProvider.getConfiguration (Log4jloggingProvider. java:109) ~[geode-log4j-9.10.5.jar:na]\n\nat org.apache.geode.logging.log4j.internāl.impl.log4jloggingProvider.isUsingGemFireDefaultConfig (Log4jloggingProvider.java:94) ~[geode-log4j-9.10.5.jar:na]\n\nat org.apache.geode.logging.log4j.internal.impl.Log4jloggingProvider.shouldUpdateLoglevels (Log4jloggingProvider.java:143) ~[geode-logj-9.10.5.jar:na]\n\nat org.apache.geode.logging.log4j.internal.impl.log4jloggingProvider.configure (Log4jLoggingProvider.Java:121) &quot;[geode-log4j-9.10.5.jar:na]\n\nat org.apache.geode.logging.internal.Configuration.configChanged (Configuration. Java:143) &quot; [geode-core-9.10.5.jar:na]\n\nat org.apache.geode.logging.internal.Configuration. initialize (Configuration.java:132) &quot; [geode-core-9.10.5.jar:na]\n\nat org.apache.geode.logging.internal.LoggingSession.createSession (LoggingSession.java:69) &quot;[geode-core-9.10.5.jar:na]\n\nat org.apache.geode.distributed.internal.InternalDistributedSystem.initialize (InternalDistributedSystem. java:704) ~[geode-core-9.10.5.jar:na]\n\nat org.apache.geode.distributed.internal. InternalDistributedSystem.access$200 (InternalDistributedSystem. java:135) ~[geode-core-9.10.5.]ar:na\n\nat org.apache.geode.distributed.internal. InternalDistributedSystemșBuilder.build (InternalDistributedSystem. java:3036) ~[geode-core-9.10.5.jar:na]\n\nat org.apache.geode.distributed. internal.InternalDistributedSystem.connectInternal (InternalDistributedSystem.java:290) ~[geode-core-9.10.5.jar:na]\n\nat org.apache.geode.distributed.înternal.InternalDistributedSystem.connectInternal (InternalDistributedsystem. java:216) ~[geode-core-9.10.5.jar:na]\n\nat org.apache.geode.cache.client.ClientCacheFactory.connectInternalDistributedSystem (ClientCacheFactory. java:280) ~ [geode-core-9.10.5.jar:na]\n\nat org.apache.geode.cache.client.ClientCacheFactory.basicCreate (ClientCacheFactory.java:250) - [geode-core-9.10.5.jar:na]\n\nat org.apache.geode.cache.client.ClientCacheFactory.create (ClientCacheFactory. java:216) &quot;[geode-core-9.10.5.jar:na]\n.....\n\n</code></pre>\n<p>I have tried removing log4j-over-slf4j,log4j-api and log4j-core and tried adding slf4j-log4j12 but still I get this exception. Now I know geode-core internally includes log4j, so I have excluded log4j and log4j-to-slf4j dependencies as well. But issue still persists. It would be really helpful if I could get some pointers regrading the exception.</p>\n<p>Currently I have the following dependencies :\n1.log4j-slf4j-impl\n2.log4j-api\n3.log4j-core\n4.log4j-over-slf4j\n5.slf4j-api\n6.slf4j-log4j12</p>\n<p>I am using geode-core-9.10.5 with both geode-log4j and geode-logging included as well.</p>\n"},{"tags":["java","mapping","warnings","mapstruct","ignore"],"comments":[{"owner":{"account_id":29073167,"reputation":1013,"user_id":22270964,"display_name":"Maksim Eliseev"},"score":0,"creation_date":1693832796,"post_id":77037058,"comment_id":135808306,"body_markdown":"`I am mapping with mapstruct from B to A class` - No, you are mapping A to B","body":"<code>I am mapping with mapstruct from B to A class</code> - No, you are mapping A to B"},{"owner":{"account_id":3052937,"reputation":17914,"user_id":2587166,"accept_rate":83,"display_name":"Luca Basso Ricci"},"score":0,"creation_date":1693833824,"post_id":77037058,"comment_id":135808528,"body_markdown":"ignore t3 is way to solve this problem","body":"ignore t3 is way to solve this problem"}],"answers":[{"tags":[],"owner":{"account_id":22581348,"reputation":113,"user_id":16765942,"display_name":"Gabriela83"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1693824741,"creation_date":1693824741,"answer_id":77037123,"question_id":77037058,"body_markdown":"You can use `@Mapping(target = &quot;t3&quot;, ignore = true)` even if it belongs to the &quot;source&quot; not the &quot;target&quot; of the mapping. ","title":"Mapstruct ignore field, warning unmapped target properties","body":"<p>You can use <code>@Mapping(target = &quot;t3&quot;, ignore = true)</code> even if it belongs to the &quot;source&quot; not the &quot;target&quot; of the mapping.</p>\n"},{"tags":[],"owner":{"account_id":7673258,"reputation":1688,"user_id":6200354,"display_name":"atish.s"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694050907,"creation_date":1694050907,"answer_id":77056112,"question_id":77037058,"body_markdown":"I made unmapped policies (for source and target) to throw errors and ignore the field `t3` for both mappings.\r\n\r\nIt worked fine with my testing.\r\n\r\n    import org.mapstruct.BeanMapping;\r\n    import org.mapstruct.Mapper;\r\n    import org.mapstruct.Mapping;\r\n    import org.mapstruct.ReportingPolicy;\r\n    import org.mapstruct.factory.Mappers;\r\n    \r\n    \r\n    @Mapper(unmappedTargetPolicy = ReportingPolicy.ERROR, unmappedSourcePolicy = ReportingPolicy.ERROR)\r\n    public interface ABMapper {\r\n    \r\n        ABMapper mapper = Mappers.getMapper(ABMapper.class);\r\n    \r\n        @Mapping(source = &quot;t1&quot;, target = &quot;t1&quot;)\r\n        @Mapping(source = &quot;t2&quot;, target = &quot;t2&quot;)\r\n        @Mapping(target = &quot;t3&quot;, ignore = true)\r\n        B toB(A a);\r\n    \r\n        @Mapping(source = &quot;t1&quot;, target = &quot;t1&quot;)\r\n        @Mapping(source = &quot;t2&quot;, target = &quot;t2&quot;)\r\n        @BeanMapping(ignoreUnmappedSourceProperties = { &quot;t3&quot; })\r\n        A toA(B b);\r\n    }\r\n\r\nSource: https://github.com/mapstruct/mapstruct/issues/1718","title":"Mapstruct ignore field, warning unmapped target properties","body":"<p>I made unmapped policies (for source and target) to throw errors and ignore the field <code>t3</code> for both mappings.</p>\n<p>It worked fine with my testing.</p>\n<pre><code>import org.mapstruct.BeanMapping;\nimport org.mapstruct.Mapper;\nimport org.mapstruct.Mapping;\nimport org.mapstruct.ReportingPolicy;\nimport org.mapstruct.factory.Mappers;\n\n\n@Mapper(unmappedTargetPolicy = ReportingPolicy.ERROR, unmappedSourcePolicy = ReportingPolicy.ERROR)\npublic interface ABMapper {\n\n    ABMapper mapper = Mappers.getMapper(ABMapper.class);\n\n    @Mapping(source = &quot;t1&quot;, target = &quot;t1&quot;)\n    @Mapping(source = &quot;t2&quot;, target = &quot;t2&quot;)\n    @Mapping(target = &quot;t3&quot;, ignore = true)\n    B toB(A a);\n\n    @Mapping(source = &quot;t1&quot;, target = &quot;t1&quot;)\n    @Mapping(source = &quot;t2&quot;, target = &quot;t2&quot;)\n    @BeanMapping(ignoreUnmappedSourceProperties = { &quot;t3&quot; })\n    A toA(B b);\n}\n</code></pre>\n<p>Source: <a href=\"https://github.com/mapstruct/mapstruct/issues/1718\" rel=\"nofollow noreferrer\">https://github.com/mapstruct/mapstruct/issues/1718</a></p>\n"}],"owner":{"account_id":29362670,"reputation":11,"user_id":22497094,"display_name":"JohnN"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":205,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1695192246,"creation_date":1693824131,"question_id":77037058,"body_markdown":"I am using mapstruct in Java and I need to get rid of warning: Warning: Unmapped target properties: &quot;t3&quot;. I have the following structure:\r\n```java\r\nclass A {\r\n\tString t1;\r\n\tString t2;\r\n}\r\n\r\nclass B {\r\n\tString t1;\r\n\tString t2;\r\n\tString t3;\r\n}\r\n```\r\n\r\nI am mapping with mapstruct from B to A class.\r\n```\r\nB toB(A a);\r\n```\r\n\r\nI would like to ignore just one field (t3), but `@Mapping` required target property, so I cannot use `@Mapping(source = &quot;t3&quot;, ignore = true)`. Is there any solution for that?\r\n\r\n\r\nTRYING: I was trying to use `@Mapping` and use `unmappedTargetPolicy = ReportingPolicy.IGNORE`, but I want to ignore only specific field.\r\n\r\nEXPECT: I would like to ignore just one field (t3), but `@Mapping` required target property, so I cannot use `@Mapping(source = &quot;t3&quot;, ignore = true)`. Is there any solution for that?","title":"Mapstruct ignore field, warning unmapped target properties","body":"<p>I am using mapstruct in Java and I need to get rid of warning: Warning: Unmapped target properties: &quot;t3&quot;. I have the following structure:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class A {\n    String t1;\n    String t2;\n}\n\nclass B {\n    String t1;\n    String t2;\n    String t3;\n}\n</code></pre>\n<p>I am mapping with mapstruct from B to A class.</p>\n<pre><code>B toB(A a);\n</code></pre>\n<p>I would like to ignore just one field (t3), but <code>@Mapping</code> required target property, so I cannot use <code>@Mapping(source = &quot;t3&quot;, ignore = true)</code>. Is there any solution for that?</p>\n<p>TRYING: I was trying to use <code>@Mapping</code> and use <code>unmappedTargetPolicy = ReportingPolicy.IGNORE</code>, but I want to ignore only specific field.</p>\n<p>EXPECT: I would like to ignore just one field (t3), but <code>@Mapping</code> required target property, so I cannot use <code>@Mapping(source = &quot;t3&quot;, ignore = true)</code>. Is there any solution for that?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":1,"creation_date":1660732075,"post_id":73385913,"comment_id":129600283,"body_markdown":"I believe this will help you: [How to get a list of current open windows/process with Java?](https://stackoverflow.com/questions/54686/how-to-get-a-list-of-current-open-windows-process-with-java) Alternatively, try [jps](https://docs.oracle.com/en/java/javase/17/docs/specs/man/jps.html).","body":"I believe this will help you: <a href=\"https://stackoverflow.com/questions/54686/how-to-get-a-list-of-current-open-windows-process-with-java\">How to get a list of current open windows/process with Java?</a> Alternatively, try <a href=\"https://docs.oracle.com/en/java/javase/17/docs/specs/man/jps.html\" rel=\"nofollow noreferrer\">jps</a>."}],"answers":[{"tags":[],"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1660745417,"creation_date":1660729197,"answer_id":73386190,"question_id":73385913,"body_markdown":"You could run\r\n\r\n    wmic process where caption=&quot;java.exe&quot; get commandline,description,processid\r\n\r\nto get the list of processes and their associated command line like in your screenshot. Then you get the ID of the command you want to kill and kill it with `taskkill /pid xxx`.","title":"How to find and close running Win-Process which is Java app from within other Java app?","body":"<p>You could run</p>\n<pre><code>wmic process where caption=&quot;java.exe&quot; get commandline,description,processid\n</code></pre>\n<p>to get the list of processes and their associated command line like in your screenshot. Then you get the ID of the command you want to kill and kill it with <code>taskkill /pid xxx</code>.</p>\n"}],"owner":{"account_id":7693984,"reputation":6097,"user_id":5829191,"accept_rate":63,"display_name":"rozerro"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":108,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":73386190,"answer_count":1,"score":3,"last_activity_date":1695191948,"creation_date":1660727994,"question_id":73385913,"body_markdown":"There is windows process which is actually a java application (java.exe). I need to close it from within other java application (other running .jar) which is probably will also be named as `java.exe` in windows taskbar. \r\n\r\nTo do the task we would normally do it this way\r\n\r\n    Runtime.getRuntime().exec(KILL + `java.exe`);\r\n\r\nBut there would be some `java.exe` processes in windows taskbar. So how to find the one I need? In this case it is `forum.jar`.\r\n\r\nActually this jar was started from .bat file (if it makes any difference) - it is `process.bat` as it seen in the screenshot. \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/lZhH7.png","title":"How to find and close running Win-Process which is Java app from within other Java app?","body":"<p>There is windows process which is actually a java application (java.exe). I need to close it from within other java application (other running .jar) which is probably will also be named as <code>java.exe</code> in windows taskbar.</p>\n<p>To do the task we would normally do it this way</p>\n<pre><code>Runtime.getRuntime().exec(KILL + `java.exe`);\n</code></pre>\n<p>But there would be some <code>java.exe</code> processes in windows taskbar. So how to find the one I need? In this case it is <code>forum.jar</code>.</p>\n<p>Actually this jar was started from .bat file (if it makes any difference) - it is <code>process.bat</code> as it seen in the screenshot.</p>\n<p><a href=\"https://i.stack.imgur.com/lZhH7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lZhH7.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","lombok"],"answers":[{"tags":[],"owner":{"account_id":2139538,"reputation":42501,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"down_vote_count":2,"up_vote_count":56,"is_accepted":false,"score":54,"last_activity_date":1644364629,"creation_date":1516268917,"answer_id":48318222,"question_id":48318097,"body_markdown":"`@Builder` already produces public methods, it&#39;s just the constructor that&#39;s package-private. The reason is that they intend for you to use the static `builder()` method, which is public, instead of using the constructor directly:\r\n\r\n    Foo foo = Foo.builder()\r\n        .property(&quot;hello, world&quot;)\r\n        .build();\r\n\r\nIf you really, really, *really* want the constructor to be public (there seems to be some suggestion that other reflection-based libraries might require it), then Lombok will never override anything that you&#39;ve already declared explicitly, so you can declare a skeleton like this with a public constructor and Lombok will fill in the rest, without changing the constructor to package-private or anything.\r\n\r\n    @Builder\r\n    public class Foo\r\n    {\r\n        private final String property;\r\n    \r\n        public static class FooBuilder\r\n        {\r\n            public FooBuilder() { }\r\n    \r\n            // Lombok will fill in the fields and methods\r\n        }\r\n    }\r\n\r\nThis general strategy of allowing partial implementations to override default behaviour applies to most (maybe all) other Lombok annotations too. If your class is annotated with `@ToString` but you already declared a `toString` method, it will leave yours alone.\r\n\r\nJust to show you everything that gets generated, I wrote the following class:\r\n\r\n    @Builder\r\n    public class Foo\r\n    {\r\n        private final String property;\r\n    }\r\n\r\nI then ran it through [delombok](https://projectlombok.org/features/delombok) to see everything that was generated. As you can see, everything is public:\r\n\r\n    public class Foo\r\n    {\r\n        private final String property;\r\n    \r\n        @java.beans.ConstructorProperties({&quot;property&quot;})\r\n        Foo(final String property) {\r\n            this.property = property;\r\n        }\r\n    \r\n        public static FooBuilder builder() {\r\n            return new FooBuilder();\r\n        }\r\n    \r\n        public static class FooBuilder\r\n        {\r\n            private String property;\r\n    \r\n            FooBuilder() { }\r\n    \r\n            public FooBuilder property(final String property) {\r\n                this.property = property;\r\n                return this;\r\n            }\r\n    \r\n            public Foo build() {\r\n                return new Foo(property);\r\n            }\r\n    \r\n            public String toString() {\r\n                return &quot;Foo.FooBuilder(property=&quot; + this.property + &quot;)&quot;;\r\n            }\r\n        }\r\n    }\r\n\r\n","title":"Is it possible to make Lombok&#39;s builder public?","body":"<p><code>@Builder</code> already produces public methods, it's just the constructor that's package-private. The reason is that they intend for you to use the static <code>builder()</code> method, which is public, instead of using the constructor directly:</p>\n<pre><code>Foo foo = Foo.builder()\n    .property(&quot;hello, world&quot;)\n    .build();\n</code></pre>\n<p>If you really, really, <em>really</em> want the constructor to be public (there seems to be some suggestion that other reflection-based libraries might require it), then Lombok will never override anything that you've already declared explicitly, so you can declare a skeleton like this with a public constructor and Lombok will fill in the rest, without changing the constructor to package-private or anything.</p>\n<pre><code>@Builder\npublic class Foo\n{\n    private final String property;\n\n    public static class FooBuilder\n    {\n        public FooBuilder() { }\n\n        // Lombok will fill in the fields and methods\n    }\n}\n</code></pre>\n<p>This general strategy of allowing partial implementations to override default behaviour applies to most (maybe all) other Lombok annotations too. If your class is annotated with <code>@ToString</code> but you already declared a <code>toString</code> method, it will leave yours alone.</p>\n<p>Just to show you everything that gets generated, I wrote the following class:</p>\n<pre><code>@Builder\npublic class Foo\n{\n    private final String property;\n}\n</code></pre>\n<p>I then ran it through <a href=\"https://projectlombok.org/features/delombok\" rel=\"noreferrer\">delombok</a> to see everything that was generated. As you can see, everything is public:</p>\n<pre><code>public class Foo\n{\n    private final String property;\n\n    @java.beans.ConstructorProperties({&quot;property&quot;})\n    Foo(final String property) {\n        this.property = property;\n    }\n\n    public static FooBuilder builder() {\n        return new FooBuilder();\n    }\n\n    public static class FooBuilder\n    {\n        private String property;\n\n        FooBuilder() { }\n\n        public FooBuilder property(final String property) {\n            this.property = property;\n            return this;\n        }\n\n        public Foo build() {\n            return new Foo(property);\n        }\n\n        public String toString() {\n            return &quot;Foo.FooBuilder(property=&quot; + this.property + &quot;)&quot;;\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2599898,"reputation":103,"user_id":2507373,"display_name":"S&#233;rgio Andaluz Ramos"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1536833101,"creation_date":1536833101,"answer_id":52311386,"question_id":48318097,"body_markdown":"The problem with this builder annotation is that, if you delombok you&#39;ll see, the generated constructor for the builder has no access indicator (public, private, protected) therefore is only visible within the same package.\r\nThis would work if the extended classes were in the same package.\r\n\r\nI&#39;m having the same problem and I think that lombok does not support this, for now.\r\nI was able to find the feature request in here https://github.com/rzwitserloot/lombok/issues/1489\r\n\r\nMy suggestion is to hard implement builder pattern in this class.","title":"Is it possible to make Lombok&#39;s builder public?","body":"<p>The problem with this builder annotation is that, if you delombok you'll see, the generated constructor for the builder has no access indicator (public, private, protected) therefore is only visible within the same package.\nThis would work if the extended classes were in the same package.</p>\n\n<p>I'm having the same problem and I think that lombok does not support this, for now.\nI was able to find the feature request in here <a href=\"https://github.com/rzwitserloot/lombok/issues/1489\" rel=\"nofollow noreferrer\">https://github.com/rzwitserloot/lombok/issues/1489</a></p>\n\n<p>My suggestion is to hard implement builder pattern in this class.</p>\n"},{"tags":[],"owner":{"account_id":9818803,"reputation":958,"user_id":7274408,"display_name":"Brad"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1542376296,"creation_date":1542376296,"answer_id":53339189,"question_id":48318097,"body_markdown":"I have found this neat workaround:\r\n\r\n    import lombok.Builder;\r\n    import lombok.Getter;\r\n    import lombok.Setter;\r\n    \r\n    @Getter\r\n    @Setter\r\n    @Builder\r\n    public class Customer {\r\n        private String id;\r\n        private String name;\r\n    \r\n        public static MessageBuilder builder() {return new CustomerBuilder();}\r\n    }","title":"Is it possible to make Lombok&#39;s builder public?","body":"<p>I have found this neat workaround:</p>\n\n<pre><code>import lombok.Builder;\nimport lombok.Getter;\nimport lombok.Setter;\n\n@Getter\n@Setter\n@Builder\npublic class Customer {\n    private String id;\n    private String name;\n\n    public static MessageBuilder builder() {return new CustomerBuilder();}\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14888517,"reputation":237,"user_id":10750980,"display_name":"J.Luan"},"down_vote_count":2,"up_vote_count":20,"is_accepted":false,"score":18,"last_activity_date":1550777656,"creation_date":1550777656,"answer_id":54814876,"question_id":48318097,"body_markdown":"The problem is you are using @Builder in the wrong way.\r\n\r\nWhen `Builder Pattern` is used, you only need to use the static method to invoke it and then build, for example:  \r\n \r\n`MyClass instance = MyClass.builder().build();` . \r\n\r\nPlease do not `new` the `MyClassBuilder` again, it breaks the encapsulation the pattern has since you are directly using the inner `MyClassBuilder` class. This constructor is been hided from outside, that&#39;s why you get the not accessible error. Instead it provides you the static method `builder()`. \r\n","title":"Is it possible to make Lombok&#39;s builder public?","body":"<p>The problem is you are using @Builder in the wrong way.</p>\n\n<p>When <code>Builder Pattern</code> is used, you only need to use the static method to invoke it and then build, for example:  </p>\n\n<p><code>MyClass instance = MyClass.builder().build();</code> . </p>\n\n<p>Please do not <code>new</code> the <code>MyClassBuilder</code> again, it breaks the encapsulation the pattern has since you are directly using the inner <code>MyClassBuilder</code> class. This constructor is been hided from outside, that's why you get the not accessible error. Instead it provides you the static method <code>builder()</code>. </p>\n"},{"tags":[],"owner":{"account_id":3795830,"reputation":6437,"user_id":3150948,"accept_rate":70,"display_name":"Amer Qarabsa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1570808356,"creation_date":1570808356,"answer_id":58344545,"question_id":48318097,"body_markdown":"as mentioned you can use the builder, now instead of user property builder() will return the instance create so you can treat as normal builder ( no need to use property)\r\n\r\n    instance = MyClass.MyClassBuilder().property1(value1).property1(value2).build();\r\n\r\n","title":"Is it possible to make Lombok&#39;s builder public?","body":"<p>as mentioned you can use the builder, now instead of user property builder() will return the instance create so you can treat as normal builder ( no need to use property)</p>\n\n<pre><code>instance = MyClass.MyClassBuilder().property1(value1).property1(value2).build();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26503501,"reputation":51,"user_id":20140048,"display_name":"Chetan Patil"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1695191799,"creation_date":1694880091,"answer_id":77118548,"question_id":48318097,"body_markdown":"You can simply change access level using \r\n\r\n    @Builder(access = AccessLevel.PUBLIC)\r\n\r\n","title":"Is it possible to make Lombok&#39;s builder public?","body":"<p>You can simply change access level using</p>\n<pre><code>@Builder(access = AccessLevel.PUBLIC)\n</code></pre>\n"}],"owner":{"account_id":8909757,"reputation":589,"user_id":6650434,"accept_rate":75,"display_name":"H.abidi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":22500,"favorite_count":0,"down_vote_count":0,"up_vote_count":32,"answer_count":6,"score":32,"last_activity_date":1695191799,"creation_date":1516268557,"question_id":48318097,"body_markdown":"I am using Lombok library in my project and I am not able to use a class annotated with `@Builder` in outer packages.\r\n\r\nIs there a way to make the builder public?\r\n\r\n    MyClass instance = new MyClass.MyClassBuilder().build();\r\n\r\nThe error is:\r\n\r\n&gt; &#39;MyClassBuilder()&#39; is not public in\r\n&gt; &#39;com.foo.MyClass.MyClassBuilder&#39;. Cannot be accessed\r\n&gt; from outside package","title":"Is it possible to make Lombok&#39;s builder public?","body":"<p>I am using Lombok library in my project and I am not able to use a class annotated with <code>@Builder</code> in outer packages.</p>\n\n<p>Is there a way to make the builder public?</p>\n\n<pre><code>MyClass instance = new MyClass.MyClassBuilder().build();\n</code></pre>\n\n<p>The error is:</p>\n\n<blockquote>\n  <p>'MyClassBuilder()' is not public in\n  'com.foo.MyClass.MyClassBuilder'. Cannot be accessed\n  from outside package</p>\n</blockquote>\n"},{"tags":["java","android","kotlin","unit-testing","jacoco"],"owner":{"account_id":21456851,"reputation":21,"user_id":15808334,"display_name":"Jay Patel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":121,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695191535,"creation_date":1695186910,"question_id":77139458,"body_markdown":"So here i want to exclude all files of `cc.mekanism.chatconcept.databinding` in my project and here is my file filter:\r\n\r\n```\r\ndef fileFilter = [\r\n        // data binding\r\n        &#39;android/databinding/**/*.class&#39;,\r\n        &#39;**/android/databinding/*Binding.class&#39;,\r\n        &#39;**/android/databinding/*&#39;,\r\n        &#39;**/androidx/databinding/*&#39;,\r\n        &#39;**/BR.*&#39;,\r\n        // android\r\n        &#39;**/R.class&#39;,\r\n        &#39;**/R$*.class&#39;,\r\n        &#39;**/BuildConfig.*&#39;,\r\n        &#39;**/Manifest*.*&#39;,\r\n        &#39;**/*Test*.*&#39;,\r\n        &#39;**/Binding/**&#39;,\r\n        &#39;android/**/*.*&#39;,\r\n        // kotlin\r\n        &#39;**/*MapperImpl*.*&#39;,\r\n        &#39;**/*$ViewInjector*.*&#39;,\r\n        &#39;**/*$ViewBinder*.*&#39;,\r\n        &#39;**/BuildConfig.*&#39;,\r\n        &#39;**/*Component*.*&#39;,\r\n        &#39;**/*BR*.*&#39;,\r\n        &#39;**/Manifest*.*&#39;,\r\n        &#39;**/*$Lambda$*.*&#39;,\r\n        &#39;**/*Companion*.*&#39;,\r\n        &#39;**/*Module*.*&#39;,\r\n        &#39;**/*Dagger*.*&#39;,\r\n        &#39;**/*Hilt*.*&#39;,\r\n        &#39;**/*MembersInjector*.*&#39;,\r\n        &#39;**/*_MembersInjector.class&#39;,\r\n        &#39;**/*_Factory*.*&#39;,\r\n        &#39;**/*_Provide*Factory*.*&#39;,\r\n        &#39;**/*Extensions*.*&#39;,\r\n        // sealed and data classes\r\n        &#39;**/*$Result.*&#39;,\r\n        &#39;**/*$Result$*.*&#39;,\r\n        // adapters generated by moshi\r\n        &#39;**/*JsonAdapter.*&#39;\r\n]\r\n```\r\n\r\nIs there any working way to exclude whole package from test or specific files like in compose we have files like ListScreen.kt, tried all ways but nothing seems working. My gradle version is ***8.0.2.***\r\n\r\ntried adding package like:\r\n\r\n```\r\n cc/mekanism/chatconcept/databinding/**\r\n```\r\n\r\nbut this also doesn&#39;t work.","title":"In jacoco test coverage report how to exclude whole packages?? or some specific files?","body":"<p>So here i want to exclude all files of <code>cc.mekanism.chatconcept.databinding</code> in my project and here is my file filter:</p>\n<pre><code>def fileFilter = [\n        // data binding\n        'android/databinding/**/*.class',\n        '**/android/databinding/*Binding.class',\n        '**/android/databinding/*',\n        '**/androidx/databinding/*',\n        '**/BR.*',\n        // android\n        '**/R.class',\n        '**/R$*.class',\n        '**/BuildConfig.*',\n        '**/Manifest*.*',\n        '**/*Test*.*',\n        '**/Binding/**',\n        'android/**/*.*',\n        // kotlin\n        '**/*MapperImpl*.*',\n        '**/*$ViewInjector*.*',\n        '**/*$ViewBinder*.*',\n        '**/BuildConfig.*',\n        '**/*Component*.*',\n        '**/*BR*.*',\n        '**/Manifest*.*',\n        '**/*$Lambda$*.*',\n        '**/*Companion*.*',\n        '**/*Module*.*',\n        '**/*Dagger*.*',\n        '**/*Hilt*.*',\n        '**/*MembersInjector*.*',\n        '**/*_MembersInjector.class',\n        '**/*_Factory*.*',\n        '**/*_Provide*Factory*.*',\n        '**/*Extensions*.*',\n        // sealed and data classes\n        '**/*$Result.*',\n        '**/*$Result$*.*',\n        // adapters generated by moshi\n        '**/*JsonAdapter.*'\n]\n</code></pre>\n<p>Is there any working way to exclude whole package from test or specific files like in compose we have files like ListScreen.kt, tried all ways but nothing seems working. My gradle version is <em><strong>8.0.2.</strong></em></p>\n<p>tried adding package like:</p>\n<pre><code> cc/mekanism/chatconcept/databinding/**\n</code></pre>\n<p>but this also doesn't work.</p>\n"},{"tags":["java","parallel-processing","testng","testng-dataprovider"],"owner":{"account_id":14014033,"reputation":699,"user_id":10121996,"display_name":"Sobhit Sharma"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695191332,"creation_date":1695191332,"question_id":77139805,"body_markdown":"I am writing tests for my apis using testng in parallel. I have also used dataprovider to data insertion. But while running in parallel, my assertions failing due to mismatch where as api response is correct but its the data provider which is returning the value. Example\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    @Test(groups = {\r\n                &quot;QA-CRE&quot;, &quot;Regression&quot;, &quot;BuildVerification&quot;}, priority = 86,\r\n                dataProvider = &quot;listC&quot;,\r\n                dataProviderClass = country.class)\r\n        public void test1(String usecase) throws IOException {\r\n\r\n            this.responseData = coreRestapi(cspUid, readExcel(TEST_DATA_PATH, 3, 9, 1), usecase);\r\n\r\n            if (this.responseData.getStatusCode() == 200) {\r\n                this.responseData.then().\r\n                        assertThat()\r\n                        //fails here where as api response matches while coming from data provider to usecase but here it fails\r\n                        .body(&quot;usecase&quot;, equalTo(usecase));\r\n            } else {\r\n                Assert.fail(&quot;&quot;);\r\n            }\r\n       }\r\n       \r\n\r\n    @DataProvider(name = &quot;listC&quot;)\r\n        public static Object[][] listC() {\r\n            return new Object[][]{\r\n                    {\r\n                            &quot;USA&quot;\r\n                    },\r\n                    {\r\n                            INDIA.toString()\r\n                    },\r\n            };\r\n        }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n\r\nSo as per my debug, it works fine in sending right usecase and like wise response comes from the server but while assertion it fails. What could be the reason and also how to make my tests thread safe. \r\nI am testng.xml to run by providing parallel=&quot;methods&quot; thread-count=&quot;5&quot;","title":"Testng parallel execution fails due to variable value mismatch","body":"<p>I am writing tests for my apis using testng in parallel. I have also used dataprovider to data insertion. But while running in parallel, my assertions failing due to mismatch where as api response is correct but its the data provider which is returning the value. Example</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>@Test(groups = {\n            \"QA-CRE\", \"Regression\", \"BuildVerification\"}, priority = 86,\n            dataProvider = \"listC\",\n            dataProviderClass = country.class)\n    public void test1(String usecase) throws IOException {\n\n        this.responseData = coreRestapi(cspUid, readExcel(TEST_DATA_PATH, 3, 9, 1), usecase);\n\n        if (this.responseData.getStatusCode() == 200) {\n            this.responseData.then().\n                    assertThat()\n                    //fails here where as api response matches while coming from data provider to usecase but here it fails\n                    .body(\"usecase\", equalTo(usecase));\n        } else {\n            Assert.fail(\"\");\n        }\n   }\n   \n\n@DataProvider(name = \"listC\")\n    public static Object[][] listC() {\n        return new Object[][]{\n                {\n                        \"USA\"\n                },\n                {\n                        INDIA.toString()\n                },\n        };\n    }</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>So as per my debug, it works fine in sending right usecase and like wise response comes from the server but while assertion it fails. What could be the reason and also how to make my tests thread safe.\nI am testng.xml to run by providing parallel=&quot;methods&quot; thread-count=&quot;5&quot;</p>\n"},{"tags":["java","eclipse","jar"],"comments":[{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":5,"creation_date":1554721373,"post_id":55571046,"comment_id":97842536,"body_markdown":"That&#39;s a restriction by the [Java Platform Module System (JPMS)](https://en.wikipedia.org/wiki/Java_Platform_Module_System), not by Eclipse (so don&#39;t shut the messenger). If you delete the file `module-info.java` in your default package (which disables JPMS) it should work with Java 9 or higher.","body":"That&#39;s a restriction by the <a href=\"https://en.wikipedia.org/wiki/Java_Platform_Module_System\" rel=\"nofollow noreferrer\">Java Platform Module System (JPMS)</a>, not by Eclipse (so don&#39;t shut the messenger). If you delete the file <code>module-info.java</code> in your default package (which disables JPMS) it should work with Java 9 or higher."},{"owner":{"account_id":14316872,"reputation":963,"user_id":10341428,"display_name":"Krann Sock"},"score":6,"creation_date":1554722355,"post_id":55571046,"comment_id":97843059,"body_markdown":"This happens when not creating the module-info.java.","body":"This happens when not creating the module-info.java."},{"owner":{"account_id":14316872,"reputation":963,"user_id":10341428,"display_name":"Krann Sock"},"score":0,"creation_date":1554722940,"post_id":55571046,"comment_id":97843424,"body_markdown":"I uploaded a video showing my problem on a freshly installed 2019-03: https://youtu.be/6fQ8ZPprVyo","body":"I uploaded a video showing my problem on a freshly installed 2019-03: <a href=\"https://youtu.be/6fQ8ZPprVyo\" rel=\"nofollow noreferrer\">youtu.be/6fQ8ZPprVyo</a>"},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":1,"creation_date":1554723674,"post_id":55571046,"comment_id":97843873,"body_markdown":"I see. Solves moving the _JRE System Library_ from the _Modulepath_ to the _Classpath_ your issue?","body":"I see. Solves moving the <i>JRE System Library</i> from the <i>Modulepath</i> to the <i>Classpath</i> your issue?"},{"owner":{"account_id":14316872,"reputation":963,"user_id":10341428,"display_name":"Krann Sock"},"score":0,"creation_date":1554723918,"post_id":55571046,"comment_id":97844013,"body_markdown":"As you can see at roughly 34 seconds into the video, it&#39;s inside the classpath already (I never had it anywhere else). Funnily, after moving it to the module path, the errors disappear. This does not work on the real project, however, where I originally found the error.","body":"As you can see at roughly 34 seconds into the video, it&#39;s inside the classpath already (I never had it anywhere else). Funnily, after moving it to the module path, the errors disappear. This does not work on the real project, however, where I originally found the error."},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":3,"creation_date":1554724025,"post_id":55571046,"comment_id":97844073,"body_markdown":"Everything must be on the classpath, the JAR and the _JRE System Library_ (the video shows only the JAR being on the classpath).","body":"Everything must be on the classpath, the JAR and the <i>JRE System Library</i> (the video shows only the JAR being on the classpath)."}],"answers":[{"tags":[],"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"down_vote_count":0,"up_vote_count":57,"is_accepted":true,"score":57,"last_activity_date":1574509241,"creation_date":1554724559,"answer_id":55572922,"question_id":55571046,"body_markdown":"This is **caused by**\r\n\r\n - a **JAR on the *Classpath*** that contains the **package** `java.awt` **that also exists in the system library** but the\r\n - ***JRE System Library*** is **on the *Modulepath***\r\n\r\nIn the [Java Platform Module System (JPMS)][1] it is not allowed to use the same package in more than one module. If the *Modulepath* and the *Classpath* is used, everything on the *Classpath* is handled as the `&lt;unnamed&gt;` module (in your case the package `java.awt` exists in the system module `java.desktop` and also via the JAR on the *Classpath* in the module `&lt;unnamed&gt;`).\r\n\r\nSince the *JRE System Library* cannot be moved from the *Modulepath* to the *Classpath* (see [this answer by Stephan Herrmann for details][2]), you only have the following options:\r\n\r\n - Set the compiler compliance to 1.8 (as you already mentioned)\r\n - **Rebuilt the JAR** to **avoid Java system library package names inside the JAR** (if reflection is used, additional code changes may be necessary):\r\n  - If you have the source code, change the package names (e.g. change the package and subpackae `java` to `java_util` and `javax` to `javax_util`) and recreate the JAR\r\n  - If you have only the `.class` files you have to decompile the `.class` files first\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Java_Platform_Module_System\r\n  [2]: https://stackoverflow.com/a/53824670/6505250","title":"Eclipse is confused by imports (&quot;accessible from more than one module&quot;)","body":"<p>This is <strong>caused by</strong></p>\n\n<ul>\n<li>a <strong>JAR on the <em>Classpath</em></strong> that contains the <strong>package</strong> <code>java.awt</code> <strong>that also exists in the system library</strong> but the</li>\n<li><strong><em>JRE System Library</em></strong> is <strong>on the <em>Modulepath</em></strong></li>\n</ul>\n\n<p>In the <a href=\"https://en.wikipedia.org/wiki/Java_Platform_Module_System\" rel=\"noreferrer\">Java Platform Module System (JPMS)</a> it is not allowed to use the same package in more than one module. If the <em>Modulepath</em> and the <em>Classpath</em> is used, everything on the <em>Classpath</em> is handled as the <code>&lt;unnamed&gt;</code> module (in your case the package <code>java.awt</code> exists in the system module <code>java.desktop</code> and also via the JAR on the <em>Classpath</em> in the module <code>&lt;unnamed&gt;</code>).</p>\n\n<p>Since the <em>JRE System Library</em> cannot be moved from the <em>Modulepath</em> to the <em>Classpath</em> (see <a href=\"https://stackoverflow.com/a/53824670/6505250\">this answer by Stephan Herrmann for details</a>), you only have the following options:</p>\n\n<ul>\n<li>Set the compiler compliance to 1.8 (as you already mentioned)</li>\n<li><strong>Rebuilt the JAR</strong> to <strong>avoid Java system library package names inside the JAR</strong> (if reflection is used, additional code changes may be necessary):\n\n<ul>\n<li>If you have the source code, change the package names (e.g. change the package and subpackae <code>java</code> to <code>java_util</code> and <code>javax</code> to <code>javax_util</code>) and recreate the JAR</li>\n<li>If you have only the <code>.class</code> files you have to decompile the <code>.class</code> files first</li>\n</ul></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":12214233,"reputation":451,"user_id":8915165,"display_name":"K. Taylor"},"down_vote_count":1,"up_vote_count":35,"is_accepted":false,"score":34,"last_activity_date":1660820579,"creation_date":1576101281,"answer_id":59294690,"question_id":55571046,"body_markdown":"Since I&#39;ll bet lots of people will be running into this problem with modular Java, I&#39;ll help and give the real answer.  \r\n\r\nThis error happens when \r\n\r\n- you have a dependency in your project \r\n- that contains code \r\n- using packages \r\n- that are also in the modules \r\n- being referenced by your project\r\n\r\nIf your project has set the source compatibility to something like Java 12, it will start enforcing the rule, that has been there all along in Java:\r\n\r\n&gt; &quot;Don&#39;t use packages that belong to the JDK in your own code.&quot; \r\n\r\nUnfortunately, lots of developers and vendors have done that over the years. Can&#39;t do that anymore.  \r\n\r\nIf you set your project to Java 12 source compatibility, Eclipse adds the JDK modules which include everything &quot;java.\\*&quot; and &quot;javax.\\*&quot; and even &quot;jdk.\\*&quot;, &quot;org.w3c.\\*&quot;. These packages may be in use by your dependencies or their transitive dependencies. \r\n\r\nHow to fix\r\n-------------\r\n\r\nYou need to:\r\n\r\n- look at which package its complaining about\r\n- and expand the **&quot;Projects and External Dependencies&quot;** node in the **Package Explorer**. \r\n- Find out which dependency is using that package. \r\n- Then you can simply exclude that dependency from your project. \r\n\r\nOr you could get the source of that dependency, if available, and rebuild the jar with changed packages. Otherwise you have to remove that dependency and find a replacement for that technology. Pain huh?\r\n\r\nIf its a transitive dependency you can often just exclude it. Here is an example of that for Gradle based projects.\r\n\r\n\r\n**GradleConfig.xml**:\r\n\r\n```\r\nconfigurations {\r\n   all*.exclude group: &#39;xml-apis&#39;\r\n}\r\n```\r\n","title":"Eclipse is confused by imports (&quot;accessible from more than one module&quot;)","body":"<p>Since I'll bet lots of people will be running into this problem with modular Java, I'll help and give the real answer.</p>\n<p>This error happens when</p>\n<ul>\n<li>you have a dependency in your project</li>\n<li>that contains code</li>\n<li>using packages</li>\n<li>that are also in the modules</li>\n<li>being referenced by your project</li>\n</ul>\n<p>If your project has set the source compatibility to something like Java 12, it will start enforcing the rule, that has been there all along in Java:</p>\n<blockquote>\n<p>&quot;Don't use packages that belong to the JDK in your own code.&quot;</p>\n</blockquote>\n<p>Unfortunately, lots of developers and vendors have done that over the years. Can't do that anymore.</p>\n<p>If you set your project to Java 12 source compatibility, Eclipse adds the JDK modules which include everything &quot;java.*&quot; and &quot;javax.*&quot; and even &quot;jdk.*&quot;, &quot;org.w3c.*&quot;. These packages may be in use by your dependencies or their transitive dependencies.</p>\n<h2>How to fix</h2>\n<p>You need to:</p>\n<ul>\n<li>look at which package its complaining about</li>\n<li>and expand the <strong>&quot;Projects and External Dependencies&quot;</strong> node in the <strong>Package Explorer</strong>.</li>\n<li>Find out which dependency is using that package.</li>\n<li>Then you can simply exclude that dependency from your project.</li>\n</ul>\n<p>Or you could get the source of that dependency, if available, and rebuild the jar with changed packages. Otherwise you have to remove that dependency and find a replacement for that technology. Pain huh?</p>\n<p>If its a transitive dependency you can often just exclude it. Here is an example of that for Gradle based projects.</p>\n<p><strong>GradleConfig.xml</strong>:</p>\n<pre><code>configurations {\n   all*.exclude group: 'xml-apis'\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":910835,"reputation":561,"user_id":944746,"display_name":"MSillence"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1594277444,"creation_date":1594277444,"answer_id":62809052,"question_id":55571046,"body_markdown":"See also: https://stackoverflow.com/q/57286825/944746 where I answered:\r\n\r\nDisappointingly I don&#39;t see any compiler flags to show what jar the problem is with\r\nEven -Xlint:module doesn&#39;t seem to show up anything useful and eclipse doesn&#39;t shed any light on the issue\r\n\r\nInstead to find where java.awt comes from I&#39;ve been using this script:\r\n\r\n    mvn dependency:copy-dependencies -DincludeScope=test -DoutputDirectory=deps\r\n    for i in deps/*.jar; do if unzip -l $i| grep -q java.awt; then echo $i; fi ; done\r\n\r\nStrictly you don&#39;t have to specify the scope test as that&#39;s the default but I&#39;ve included it as you might want to use `compile` instead","title":"Eclipse is confused by imports (&quot;accessible from more than one module&quot;)","body":"<p>See also: <a href=\"https://stackoverflow.com/q/57286825/944746\">The package org.w3c.dom is accessible from more than one module: &lt;unnamed&gt;, java.xml</a> where I answered:</p>\n<p>Disappointingly I don't see any compiler flags to show what jar the problem is with\nEven -Xlint:module doesn't seem to show up anything useful and eclipse doesn't shed any light on the issue</p>\n<p>Instead to find where java.awt comes from I've been using this script:</p>\n<pre><code>mvn dependency:copy-dependencies -DincludeScope=test -DoutputDirectory=deps\nfor i in deps/*.jar; do if unzip -l $i| grep -q java.awt; then echo $i; fi ; done\n</code></pre>\n<p>Strictly you don't have to specify the scope test as that's the default but I've included it as you might want to use <code>compile</code> instead</p>\n"},{"tags":[],"owner":{"account_id":1282997,"reputation":502,"user_id":1236668,"display_name":"JZarzuela"},"down_vote_count":0,"up_vote_count":26,"is_accepted":false,"score":26,"last_activity_date":1597687518,"creation_date":1597687518,"answer_id":63456316,"question_id":55571046,"body_markdown":"In my case, it was because I included a dependency (Apache Tika) in the POM.xml file.\r\n\r\nI had to force the exclusion of the module that contained the classes with errors while imported at that dependency:\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.tika&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;tika-parsers&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.24.1&lt;/version&gt;\r\n\t\t\t&lt;exclusions&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;xml-apis&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;xml-apis&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t&lt;/exclusions&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\nIt worked for me that way.","title":"Eclipse is confused by imports (&quot;accessible from more than one module&quot;)","body":"<p>In my case, it was because I included a dependency (Apache Tika) in the POM.xml file.</p>\n<p>I had to force the exclusion of the module that contained the classes with errors while imported at that dependency:</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.tika&lt;/groupId&gt;\n        &lt;artifactId&gt;tika-parsers&lt;/artifactId&gt;\n        &lt;version&gt;1.24.1&lt;/version&gt;\n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;xml-apis&lt;/groupId&gt;\n                &lt;artifactId&gt;xml-apis&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>It worked for me that way.</p>\n"},{"tags":[],"owner":{"account_id":251709,"reputation":2827,"user_id":529286,"accept_rate":84,"display_name":"zakmck"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1664871249,"creation_date":1598614090,"answer_id":63632910,"question_id":55571046,"body_markdown":"I think my flavour of the problem might be useful.\r\n\r\nI got this error for classes under `javax.xml.stream`, by old Maven projects that depend on artifacts like `xml-apis`, `stax-api`, or `geronimo-stax-api`.\r\n\r\nTechnically, the problem is what others have already said: those artifacts expose the `javax.xml.*` package without any awareness of Java modules (they were invented later), so the package is automatically assigned to the unnamed module, which conflicts with **the same package** being included in the JDK&#39;s most recent versions, where the package has its own module name, and therefore the same package results in two different modules, which is forbidden.\r\n\r\nThat said, the practical solution is essentially to work with [Maven exclusions][10] to remove those dependencies from your project and let it use the JDK version instead (or, of course, remove them as direct dependencies, if that&#39;s your case). Use the equivalent if you&#39;re working with another build system.  \r\n\r\nIn theory, the more recent flavours of these packages offered by the JDK might be non backward-compatible, in practice, I doubt such JSR specifications changed much over the years and so far, I haven&#39;t seen any issue with their replacement.\r\n\r\n\r\n[10]: https://maven.apache.org/guides/introduction/introduction-to-optional-and-excludes-dependencies.html","title":"Eclipse is confused by imports (&quot;accessible from more than one module&quot;)","body":"<p>I think my flavour of the problem might be useful.</p>\n<p>I got this error for classes under <code>javax.xml.stream</code>, by old Maven projects that depend on artifacts like <code>xml-apis</code>, <code>stax-api</code>, or <code>geronimo-stax-api</code>.</p>\n<p>Technically, the problem is what others have already said: those artifacts expose the <code>javax.xml.*</code> package without any awareness of Java modules (they were invented later), so the package is automatically assigned to the unnamed module, which conflicts with <strong>the same package</strong> being included in the JDK's most recent versions, where the package has its own module name, and therefore the same package results in two different modules, which is forbidden.</p>\n<p>That said, the practical solution is essentially to work with <a href=\"https://maven.apache.org/guides/introduction/introduction-to-optional-and-excludes-dependencies.html\" rel=\"nofollow noreferrer\">Maven exclusions</a> to remove those dependencies from your project and let it use the JDK version instead (or, of course, remove them as direct dependencies, if that's your case). Use the equivalent if you're working with another build system.</p>\n<p>In theory, the more recent flavours of these packages offered by the JDK might be non backward-compatible, in practice, I doubt such JSR specifications changed much over the years and so far, I haven't seen any issue with their replacement.</p>\n"},{"tags":[],"owner":{"account_id":95581,"reputation":10145,"user_id":260229,"accept_rate":50,"display_name":"Mahmoud"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1601663291,"creation_date":1601663291,"answer_id":64176586,"question_id":55571046,"body_markdown":"You can do what other people suggest which is to exclude `xml-apis` which worked fine with me, but if your are using and an old `jaxb-api` replace them with `jakarta.xml.bind-api`:\r\n\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;jakarta.xml.bind&lt;/groupId&gt;\r\n    &lt;artifactId&gt;jakarta.xml.bind-api&lt;/artifactId&gt;\r\n    &lt;version&gt;2.3.3&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nand of course upgrade your `jaxb-impl` to match the same api:\r\n\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\r\n    &lt;artifactId&gt;jaxb-impl&lt;/artifactId&gt;\r\n    &lt;version&gt;2.3.3&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```","title":"Eclipse is confused by imports (&quot;accessible from more than one module&quot;)","body":"<p>You can do what other people suggest which is to exclude <code>xml-apis</code> which worked fine with me, but if your are using and an old <code>jaxb-api</code> replace them with <code>jakarta.xml.bind-api</code>:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;jakarta.xml.bind&lt;/groupId&gt;\n    &lt;artifactId&gt;jakarta.xml.bind-api&lt;/artifactId&gt;\n    &lt;version&gt;2.3.3&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>and of course upgrade your <code>jaxb-impl</code> to match the same api:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\n    &lt;artifactId&gt;jaxb-impl&lt;/artifactId&gt;\n    &lt;version&gt;2.3.3&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3737042,"reputation":423,"user_id":3107765,"accept_rate":88,"display_name":"lordscales91"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1693098877,"creation_date":1615379556,"answer_id":66564871,"question_id":55571046,"body_markdown":"\r\nI&#39;ve found some interesting behaviour with Java 11 and the xmlbeans library. The xmlbeans library is a transitive dependency of [Apache POI](https://poi.apache.org/), a very popular library for working with Microsoft Office documents, it is used to handle the internal XML structures of the newer Office formats. I&#39;ve tested it with **Apache POI 3.9 and it works perfectly fine**, despite the error shown by Eclipse. So, I guess in Java 11 this rule it&#39;s not fully enforced.","title":"Eclipse is confused by imports (&quot;accessible from more than one module&quot;)","body":"<p>I've found some interesting behaviour with Java 11 and the xmlbeans library. The xmlbeans library is a transitive dependency of <a href=\"https://poi.apache.org/\" rel=\"nofollow noreferrer\">Apache POI</a>, a very popular library for working with Microsoft Office documents, it is used to handle the internal XML structures of the newer Office formats. I've tested it with <strong>Apache POI 3.9 and it works perfectly fine</strong>, despite the error shown by Eclipse. So, I guess in Java 11 this rule it's not fully enforced.</p>\n"},{"tags":[],"owner":{"account_id":332245,"reputation":16487,"user_id":657427,"accept_rate":67,"display_name":"Christophe Roussy"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1637141597,"creation_date":1637140810,"answer_id":70001722,"question_id":55571046,"body_markdown":"For **Apache POI** version 5.0.0 using **Maven**, in the **pom.xml**:\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\r\n      &lt;artifactId&gt;poi&lt;/artifactId&gt;\r\n      &lt;version&gt;5.0.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\r\n      &lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\r\n      &lt;version&gt;5.0.0&lt;/version&gt;\r\n      &lt;exclusions&gt;\r\n        &lt;exclusion&gt;\r\n          &lt;groupId&gt;xml-apis&lt;/groupId&gt;\r\n          &lt;artifactId&gt;xml-apis&lt;/artifactId&gt;\r\n        &lt;/exclusion&gt;\r\n      &lt;/exclusions&gt;\r\n    &lt;/dependency&gt;\r\n\r\nFixed: &quot;The package javax.xml.parsers is accessible from more than one module&quot;","title":"Eclipse is confused by imports (&quot;accessible from more than one module&quot;)","body":"<p>For <strong>Apache POI</strong> version 5.0.0 using <strong>Maven</strong>, in the <strong>pom.xml</strong>:</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n  &lt;artifactId&gt;poi&lt;/artifactId&gt;\n  &lt;version&gt;5.0.0&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n  &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n  &lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\n  &lt;version&gt;5.0.0&lt;/version&gt;\n  &lt;exclusions&gt;\n    &lt;exclusion&gt;\n      &lt;groupId&gt;xml-apis&lt;/groupId&gt;\n      &lt;artifactId&gt;xml-apis&lt;/artifactId&gt;\n    &lt;/exclusion&gt;\n  &lt;/exclusions&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Fixed: &quot;The package javax.xml.parsers is accessible from more than one module&quot;</p>\n"},{"tags":[],"owner":{"account_id":23486916,"reputation":21,"user_id":17538355,"display_name":"Jiang Bo Kang"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1638170037,"creation_date":1638170037,"answer_id":70150897,"question_id":55571046,"body_markdown":"I met a similar issue with the eclipse IDE while upgrading JDK from 1.8 to 11, &quot;The package org.w3c.dom is accessible from more than one module: &lt;unnamed&gt;, java.xml&quot;.  upgrading eclipse from 2019 to 2021 and setting system JDK home to 11 does not solve it.  I don&#39;t think it&#39;s caused by &quot;org.w3c.dom&quot; existing in different jars of the classpath,dut to &quot;Order and Export&quot; should ordered the search sequence.\r\n\r\nAfter several hours of searching and investigating, this issue is fixed by setting the Java Compiler - Compiler compliance level to 1.8(default is 11). ","title":"Eclipse is confused by imports (&quot;accessible from more than one module&quot;)","body":"<p>I met a similar issue with the eclipse IDE while upgrading JDK from 1.8 to 11, &quot;The package org.w3c.dom is accessible from more than one module: , java.xml&quot;.  upgrading eclipse from 2019 to 2021 and setting system JDK home to 11 does not solve it.  I don't think it's caused by &quot;org.w3c.dom&quot; existing in different jars of the classpath,dut to &quot;Order and Export&quot; should ordered the search sequence.</p>\n<p>After several hours of searching and investigating, this issue is fixed by setting the Java Compiler - Compiler compliance level to 1.8(default is 11).</p>\n"},{"tags":[],"owner":{"account_id":9324571,"reputation":837,"user_id":6922308,"accept_rate":55,"display_name":"Anu Shibin Joseph Raj"},"down_vote_count":0,"up_vote_count":31,"is_accepted":false,"score":31,"last_activity_date":1679033696,"creation_date":1648625772,"answer_id":71673277,"question_id":55571046,"body_markdown":"I found a simple solution to troubleshoot this in Eclipse.\r\n1. Hit `Ctrl + Shift + T` in Eclipse to open the `Open Type` prompt.\r\n2. Type the name of the package that is causing the issue. For me, it was `org.w3c.dom`\r\n3. The search results will show all the locations from where this package is being loaded.\r\n4. Remove every JAR from the classpath that comes in the result other than the JDK 11 library.\r\n\r\nMy project being a legacy one, I had to remove a lot of JARs from the build path. Also, my project does not use Maven. So removing the JARs was a fairly straightforward step. The steps might vary for other build tools like ANT, Maven, Gradle, etc. I have just explained the troubleshooting steps above.","title":"Eclipse is confused by imports (&quot;accessible from more than one module&quot;)","body":"<p>I found a simple solution to troubleshoot this in Eclipse.</p>\n<ol>\n<li>Hit <code>Ctrl + Shift + T</code> in Eclipse to open the <code>Open Type</code> prompt.</li>\n<li>Type the name of the package that is causing the issue. For me, it was <code>org.w3c.dom</code></li>\n<li>The search results will show all the locations from where this package is being loaded.</li>\n<li>Remove every JAR from the classpath that comes in the result other than the JDK 11 library.</li>\n</ol>\n<p>My project being a legacy one, I had to remove a lot of JARs from the build path. Also, my project does not use Maven. So removing the JARs was a fairly straightforward step. The steps might vary for other build tools like ANT, Maven, Gradle, etc. I have just explained the troubleshooting steps above.</p>\n"},{"tags":[],"owner":{"account_id":904735,"reputation":377,"user_id":939857,"accept_rate":0,"display_name":"user939857"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1693098523,"creation_date":1654056666,"answer_id":72456368,"question_id":55571046,"body_markdown":"First of all, make sure your pom is actually correct by running \r\n   mvn install\r\n\r\nif that works, and eclipse still complains look at build path and find the library it is holding onto that is not in your pom.\r\n\r\nSometimes I just \r\n\r\n    rm .classpath\r\n    rm -rf .settings\r\n    rm -rf project\r\n    mvn eclipse:clean eclipse:eclipse\r\n","title":"Eclipse is confused by imports (&quot;accessible from more than one module&quot;)","body":"<p>First of all, make sure your pom is actually correct by running\nmvn install</p>\n<p>if that works, and eclipse still complains look at build path and find the library it is holding onto that is not in your pom.</p>\n<p>Sometimes I just</p>\n<pre><code>rm .classpath\nrm -rf .settings\nrm -rf project\nmvn eclipse:clean eclipse:eclipse\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25891263,"reputation":21,"user_id":19618625,"display_name":"Stav Farajun"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1693098832,"creation_date":1658761312,"answer_id":73111364,"question_id":55571046,"body_markdown":"Steps below helped me:\r\n\r\nRight click Eclipse project &gt; Properties &gt; Java Build Path\r\nIn Libraries tab, remove all the external jar files under Modulepath and add them under Classpath (you can just select all the jars and drag them under Classpath)\r\nClick Apply and Close\r\n\r\n","title":"Eclipse is confused by imports (&quot;accessible from more than one module&quot;)","body":"<p>Steps below helped me:</p>\n<p>Right click Eclipse project &gt; Properties &gt; Java Build Path\nIn Libraries tab, remove all the external jar files under Modulepath and add them under Classpath (you can just select all the jars and drag them under Classpath)\nClick Apply and Close</p>\n"},{"tags":[],"owner":{"account_id":3158846,"reputation":3608,"user_id":2670571,"accept_rate":52,"display_name":"John"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1663957533,"creation_date":1663957533,"answer_id":73831632,"question_id":55571046,"body_markdown":"Wow, this was a tough one!\r\n\r\n**Some helpful tips (a summary of my journey through this maze):**\r\n\r\n**This started when I migrated from Java 1.8 to 11.0.11**\r\n\r\nRight out of the gate this caused problems.  I needed to change the syntax for how to specify the Java version for the maven build plug in as shown below:\r\n\r\n*Before*\r\n\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;3.7.0&lt;/version&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;source&gt;1.8&lt;/source&gt;\r\n\t\t\t\t\t&lt;target&gt;1.8&lt;/target&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\r\n\r\n\r\n*After*\r\n\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;3.8.0&lt;/version&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;release&gt;11&lt;/release&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\t\t\r\n\r\n\r\nAfter that, everything compiled at a command prompt.  However, when opening the project in Eclipse, I got a bunch of errors as shown in the next section.  \r\n\r\n**Getting &quot;&amp;lt;class&amp;gt; cannot be resolved to a type&quot; errors**\r\n\r\nWhen I got errors in Eclipse and not at the command line I immediately started looking at configuration settings in Eclipse to no avail.  After some googling I came to this post.  The post at https://www.eclipse.org/forums/index.php/t/1110036/ was also very helpful.  \r\n\r\n**Finding what resources were the problem**\r\n\r\nThe answer to this post by @Anu suggesting using &amp;lt;shift&amp;gt;&amp;lt;ctrl&amp;gt;T to bring up the type search window was very helpful using this I was able to see what resources were causing the problem (i.e. any resource that is also included in the JDK, in my case it was the ErrorHandler in the xml-apis jar). Type the name of one of the resources giving a &quot;cannot be resolved to type&quot; to see the name of the jar file, in my case the jar is xml-apis-1.4.01.jar.  \r\n\r\nAll of this is shown in the screen shot below (click on the image to get a cleaner view).  \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n\r\n\r\n**Finding the Dependency that contains the offending jar**\r\n\r\nWe can now use the information from https://www.eclipse.org/forums/index.php/t/1110036/ to find the dependency in our pom.xml file that contains the offending resource.  \r\n\r\nOpen the pom.xml file in Eclipse and select the &quot;Dependency Hierarchy&quot;.  In the filter type the name of the jar file we found in the previous step (in my case it was xml-apis).  \r\n\r\nThis will pull up the dependencies creating the problem.  A screen shot of the Dependencies Hierarchy filtered for &quot;xml-apis&quot;.  From this we can see the offending dependencies in our pom.xml file are xercesImpl and xlsx-streamer.  \r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n**Solving the problem**\r\n\r\nWe can now add exclusions to these dependencies that will resolve the problem as shown below.  \r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t    &lt;groupId&gt;com.monitorjbl&lt;/groupId&gt;\r\n\t\t    &lt;artifactId&gt;xlsx-streamer&lt;/artifactId&gt;\r\n\t\t    &lt;version&gt;2.1.0&lt;/version&gt;\r\n\t        &lt;exclusions&gt;\r\n\t            &lt;exclusion&gt;\r\n\t                &lt;groupId&gt;xml-apis&lt;/groupId&gt;\r\n\t                &lt;artifactId&gt;xml-apis&lt;/artifactId&gt;\r\n\t            &lt;/exclusion&gt;\r\n\t        &lt;/exclusions&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t    &lt;groupId&gt;xerces&lt;/groupId&gt;\r\n\t\t    &lt;artifactId&gt;xercesImpl&lt;/artifactId&gt;\r\n\t\t    &lt;version&gt;2.12.0&lt;/version&gt;\r\n\t        &lt;exclusions&gt;\r\n\t            &lt;exclusion&gt;\r\n\t                &lt;groupId&gt;xml-apis&lt;/groupId&gt;\r\n\t                &lt;artifactId&gt;xml-apis&lt;/artifactId&gt;\r\n\t            &lt;/exclusion&gt;\r\n\t        &lt;/exclusions&gt;\r\n        &lt;/dependency&gt;\r\n \r\nAnd this fixes the current problem.  \r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ltwl6.png\r\n  [2]: https://i.stack.imgur.com/63wBB.png\r\n  [3]: https://i.stack.imgur.com/j9Ph7.png","title":"Eclipse is confused by imports (&quot;accessible from more than one module&quot;)","body":"<p>Wow, this was a tough one!</p>\n<p><strong>Some helpful tips (a summary of my journey through this maze):</strong></p>\n<p><strong>This started when I migrated from Java 1.8 to 11.0.11</strong></p>\n<p>Right out of the gate this caused problems.  I needed to change the syntax for how to specify the Java version for the maven build plug in as shown below:</p>\n<p><em>Before</em></p>\n<pre><code>        &lt;plugin&gt;\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.7.0&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;source&gt;1.8&lt;/source&gt;\n                &lt;target&gt;1.8&lt;/target&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n</code></pre>\n<p><em>After</em></p>\n<pre><code>        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.8.0&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;release&gt;11&lt;/release&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;       \n</code></pre>\n<p>After that, everything compiled at a command prompt.  However, when opening the project in Eclipse, I got a bunch of errors as shown in the next section.</p>\n<p><strong>Getting &quot;&lt;class&gt; cannot be resolved to a type&quot; errors</strong></p>\n<p>When I got errors in Eclipse and not at the command line I immediately started looking at configuration settings in Eclipse to no avail.  After some googling I came to this post.  The post at <a href=\"https://www.eclipse.org/forums/index.php/t/1110036/\" rel=\"nofollow noreferrer\">https://www.eclipse.org/forums/index.php/t/1110036/</a> was also very helpful.</p>\n<p><strong>Finding what resources were the problem</strong></p>\n<p>The answer to this post by @Anu suggesting using &lt;shift&gt;&lt;ctrl&gt;T to bring up the type search window was very helpful using this I was able to see what resources were causing the problem (i.e. any resource that is also included in the JDK, in my case it was the ErrorHandler in the xml-apis jar). Type the name of one of the resources giving a &quot;cannot be resolved to type&quot; to see the name of the jar file, in my case the jar is xml-apis-1.4.01.jar.</p>\n<p>All of this is shown in the screen shot below (click on the image to get a cleaner view).</p>\n<p><a href=\"https://i.stack.imgur.com/ltwl6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ltwl6.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>Finding the Dependency that contains the offending jar</strong></p>\n<p>We can now use the information from <a href=\"https://www.eclipse.org/forums/index.php/t/1110036/\" rel=\"nofollow noreferrer\">https://www.eclipse.org/forums/index.php/t/1110036/</a> to find the dependency in our pom.xml file that contains the offending resource.</p>\n<p>Open the pom.xml file in Eclipse and select the &quot;Dependency Hierarchy&quot;.  In the filter type the name of the jar file we found in the previous step (in my case it was xml-apis).</p>\n<p>This will pull up the dependencies creating the problem.  A screen shot of the Dependencies Hierarchy filtered for &quot;xml-apis&quot;.  From this we can see the offending dependencies in our pom.xml file are xercesImpl and xlsx-streamer.</p>\n<p><a href=\"https://i.stack.imgur.com/63wBB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/63wBB.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>Solving the problem</strong></p>\n<p>We can now add exclusions to these dependencies that will resolve the problem as shown below.</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;com.monitorjbl&lt;/groupId&gt;\n        &lt;artifactId&gt;xlsx-streamer&lt;/artifactId&gt;\n        &lt;version&gt;2.1.0&lt;/version&gt;\n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;xml-apis&lt;/groupId&gt;\n                &lt;artifactId&gt;xml-apis&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n\n\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;xerces&lt;/groupId&gt;\n        &lt;artifactId&gt;xercesImpl&lt;/artifactId&gt;\n        &lt;version&gt;2.12.0&lt;/version&gt;\n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;xml-apis&lt;/groupId&gt;\n                &lt;artifactId&gt;xml-apis&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>And this fixes the current problem.</p>\n<p><a href=\"https://i.stack.imgur.com/j9Ph7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/j9Ph7.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":2593755,"reputation":1,"user_id":2247843,"display_name":"lejon"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676819362,"creation_date":1676204406,"answer_id":75426939,"question_id":55571046,"body_markdown":"I had this problem with the Stanford Core NLP package. As mentioned above adding an exclusion in the pom.xml solved the problem:\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;edu.stanford.nlp&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;stanford-corenlp&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.5.2&lt;/version&gt;\r\n\t\t\t&lt;exclusions&gt;\r\n               &lt;exclusion&gt;\r\n                 &lt;groupId&gt;xml-apis&lt;/groupId&gt;\r\n                 &lt;artifactId&gt;xml-apis&lt;/artifactId&gt;\r\n               &lt;/exclusion&gt;\r\n            &lt;/exclusions&gt;\r\n         &lt;/dependency&gt;","title":"Eclipse is confused by imports (&quot;accessible from more than one module&quot;)","body":"<p>I had this problem with the Stanford Core NLP package. As mentioned above adding an exclusion in the pom.xml solved the problem:</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;edu.stanford.nlp&lt;/groupId&gt;\n        &lt;artifactId&gt;stanford-corenlp&lt;/artifactId&gt;\n        &lt;version&gt;4.5.2&lt;/version&gt;\n        &lt;exclusions&gt;\n           &lt;exclusion&gt;\n             &lt;groupId&gt;xml-apis&lt;/groupId&gt;\n             &lt;artifactId&gt;xml-apis&lt;/artifactId&gt;\n           &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n     &lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":201558,"reputation":20189,"user_id":448078,"accept_rate":61,"display_name":"Mike"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677238810,"creation_date":1677176197,"answer_id":75548788,"question_id":55571046,"body_markdown":"Configuration property [was added](https://github.com/eclipse-jdt/eclipse.jdt.core/pull/424) to Eclipse. Full discussion [here](https://github.com/eclipse-jdt/eclipse.jdt.core/issues/415).  \r\n\r\n**File:** \r\n `&lt;workspace&gt;\\.metadata\\.plugins\\org.eclipse.core.runtime\\.settings\\org.eclipse.jdt.core.prefs`   \r\n**Property:**  \r\n`org.eclipse.jdt.core.compiler.ignoreUnnamedModuleForSplitPackage=enabled`","title":"Eclipse is confused by imports (&quot;accessible from more than one module&quot;)","body":"<p>Configuration property <a href=\"https://github.com/eclipse-jdt/eclipse.jdt.core/pull/424\" rel=\"nofollow noreferrer\">was added</a> to Eclipse. Full discussion <a href=\"https://github.com/eclipse-jdt/eclipse.jdt.core/issues/415\" rel=\"nofollow noreferrer\">here</a>.</p>\n<p><strong>File:</strong>\n<code>&lt;workspace&gt;\\.metadata\\.plugins\\org.eclipse.core.runtime\\.settings\\org.eclipse.jdt.core.prefs</code><br />\n<strong>Property:</strong><br />\n<code>org.eclipse.jdt.core.compiler.ignoreUnnamedModuleForSplitPackage=enabled</code></p>\n"},{"tags":[],"owner":{"account_id":19231547,"reputation":385,"user_id":14053303,"display_name":"Abhishek Chauhan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687176046,"creation_date":1687176046,"answer_id":76506425,"question_id":55571046,"body_markdown":"For me adding JRE into classpath solved the problem.\r\n\r\nproject -&gt; build path -&gt; configure build path -&gt; then adding JRE into class path","title":"Eclipse is confused by imports (&quot;accessible from more than one module&quot;)","body":"<p>For me adding JRE into classpath solved the problem.</p>\n<p>project -&gt; build path -&gt; configure build path -&gt; then adding JRE into class path</p>\n"},{"tags":[],"owner":{"account_id":6387352,"reputation":159,"user_id":4954816,"display_name":"Eder Armando Anillo Lora"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694623665,"creation_date":1694623665,"answer_id":77099043,"question_id":55571046,"body_markdown":"I know that the question is for Maven. However, I&#39;m going to post the solution  for my case in gradle. In the configuration section of build.gradle file(version 7.4), just we need to add:\r\n\r\n    configurations.all {\r\n         exclude group: &#39;xml-apis&#39;, module: &#39;xml-apis&#39;\r\n    }\r\n\r\nYou must add the line for the projects that have the error.","title":"Eclipse is confused by imports (&quot;accessible from more than one module&quot;)","body":"<p>I know that the question is for Maven. However, I'm going to post the solution  for my case in gradle. In the configuration section of build.gradle file(version 7.4), just we need to add:</p>\n<pre><code>configurations.all {\n     exclude group: 'xml-apis', module: 'xml-apis'\n}\n</code></pre>\n<p>You must add the line for the projects that have the error.</p>\n"},{"tags":[],"owner":{"account_id":9604605,"reputation":121,"user_id":7131009,"display_name":"Girija Panda"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695190818,"creation_date":1695190818,"answer_id":77139757,"question_id":55571046,"body_markdown":"**Eclipse Error:** **The package javax.xml.namespace is accessible from more than one module: unnamed,java.xml**\r\n\r\nAfter a huge search, I&#39;ve applied below workaround on my **Eclipse(2023) &amp; JDK-20** project and it worked very smoothly. Here is my experience:\r\n- My latest Eclipse version: eclipse-jee-2023-09-R-win32-x86_64 with inbuilt &quot;JustJ JRE for IDE Packages&quot; plugin was installed.\r\n- JDK Installed: java version &quot;20.0.2&quot;, Java(TM) SE Runtime Environment (build 20.0.2+9-78)\r\n\r\n**Root-cause:** Same &#39;javax.xml.namespace&#39; package is used on both JARs, which are available on both &#39;Maven Dependencies&#39;(i.e. axis.jaxrpc.jar) and &#39;JRE System Library&#39;(i.e. java.xml.jar)  \r\n\r\n**Debug/Troubleshoot:** We must have to find all the referenced jars used in your eclipse project which having same package/class &#39;javax.xml.namespace&#39;.\r\n\r\nFrom your Eclipse IDE:\r\n**1.** Press **Ctrl+Shift+T** to open the **Type**\r\n**2.** Type the package.class name: *javax.xml.namespace* and identify the jars\r\n[![enter image description here][1]][1]\r\n\r\n**3.** Search and identify the package/class from the jars available under **Maven Dependencies** &amp; **JRE System Library** tree of your Eclipse IDE\r\n[![enter image description here][2]][2]\r\n\r\n**How to fix:**\r\nHere is the work-around can be applied on your Eclipse Java project\r\n**1.** Right-click on your eclipse java project, Click **Properties**-&gt;**Java Build Path**-&gt;**Order and Export** tab, Select **Maven Dependencies**, Click **Down** or **Bottom**:\r\n[![enter image description here][3]][3]\r\n\r\n**2.** Sending the **Maven Dependencies** to the bottom, means below the **JRE System Library** then click **Apply** like below:\r\n[![enter image description here][4]][4]\r\n\r\n  [1]: https://i.stack.imgur.com/ssLoC.png\r\n  [2]: https://i.stack.imgur.com/fi5TT.png\r\n  [3]: https://i.stack.imgur.com/LZmPJ.png\r\n  [4]: https://i.stack.imgur.com/ZWTrv.png","title":"Eclipse is confused by imports (&quot;accessible from more than one module&quot;)","body":"<p><strong>Eclipse Error:</strong> <strong>The package javax.xml.namespace is accessible from more than one module: unnamed,java.xml</strong></p>\n<p>After a huge search, I've applied below workaround on my <strong>Eclipse(2023) &amp; JDK-20</strong> project and it worked very smoothly. Here is my experience:</p>\n<ul>\n<li>My latest Eclipse version: eclipse-jee-2023-09-R-win32-x86_64 with inbuilt &quot;JustJ JRE for IDE Packages&quot; plugin was installed.</li>\n<li>JDK Installed: java version &quot;20.0.2&quot;, Java(TM) SE Runtime Environment (build 20.0.2+9-78)</li>\n</ul>\n<p><strong>Root-cause:</strong> Same 'javax.xml.namespace' package is used on both JARs, which are available on both 'Maven Dependencies'(i.e. axis.jaxrpc.jar) and 'JRE System Library'(i.e. java.xml.jar)</p>\n<p><strong>Debug/Troubleshoot:</strong> We must have to find all the referenced jars used in your eclipse project which having same package/class 'javax.xml.namespace'.</p>\n<p>From your Eclipse IDE:\n<strong>1.</strong> Press <strong>Ctrl+Shift+T</strong> to open the <strong>Type</strong>\n<strong>2.</strong> Type the package.class name: <em>javax.xml.namespace</em> and identify the jars\n<a href=\"https://i.stack.imgur.com/ssLoC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ssLoC.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>3.</strong> Search and identify the package/class from the jars available under <strong>Maven Dependencies</strong> &amp; <strong>JRE System Library</strong> tree of your Eclipse IDE\n<a href=\"https://i.stack.imgur.com/fi5TT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fi5TT.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>How to fix:</strong>\nHere is the work-around can be applied on your Eclipse Java project\n<strong>1.</strong> Right-click on your eclipse java project, Click <strong>Properties</strong>-&gt;<strong>Java Build Path</strong>-&gt;<strong>Order and Export</strong> tab, Select <strong>Maven Dependencies</strong>, Click <strong>Down</strong> or <strong>Bottom</strong>:\n<a href=\"https://i.stack.imgur.com/LZmPJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LZmPJ.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>2.</strong> Sending the <strong>Maven Dependencies</strong> to the bottom, means below the <strong>JRE System Library</strong> then click <strong>Apply</strong> like below:\n<a href=\"https://i.stack.imgur.com/ZWTrv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZWTrv.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":14316872,"reputation":963,"user_id":10341428,"display_name":"Krann Sock"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":183321,"favorite_count":0,"down_vote_count":0,"up_vote_count":72,"accepted_answer_id":55572922,"answer_count":18,"score":72,"last_activity_date":1695190818,"creation_date":1554718423,"question_id":55571046,"body_markdown":"When referencing simple .jar files, Eclipse shows an error stating:\r\n&gt; The package java.awt is accessible from more than one module: &amp;lt;unnamed&amp;gt;, java.desktop\r\n\r\nThis happens for instance when `javax.awt` or `javax.swing` is included in the .jar files.\r\n\r\nThe simplest example would be the following:\r\n\r\n    package test;\r\n    \r\n    import javax.swing.JDialog;\r\n\r\n    public class Test {\r\n        public static void main(String[] args) {\r\n            new JDialog();\r\n        }\r\n    }\r\n\r\nAdding a .jar file to the classpath with only the folder structure `javax/swing` (no files needed) will cause the error to appear. I&#39;m using JDK 10/12 (neither works). Setting the compiler compliance to `1.8` makes the whole thing work again.\r\nOn another machine with `Eclipse 2018-09` this works with compiler compliance set to `10`.\r\n\r\nI&#39;m on Eclipse `2019-03`, on a (for testing purposes) freshly installed `Eclipse 2018-09` it works fine. Why?\r\n\r\n\r\n**Edit June/2020 (Solution)**\r\n\r\nAs the answers correctly stated, this is a restriction built into Java ages ago and only recently was forced upon us. I came into contact with it while migrating a big project with dozens of dependencies to Maven. There were libraries from around the year 2000! There were &#39;meta libraries&#39; which consisted of several libraries packaged together.\r\nSo there was no other way than to identify what was still needed (into the trash with the rest!), update libraries which violate the rules or find replacements for them. This took me many, many hours.\r\n\r\nIn the end it worked out and we&#39;ve got a nice Maven project to work with.","title":"Eclipse is confused by imports (&quot;accessible from more than one module&quot;)","body":"<p>When referencing simple .jar files, Eclipse shows an error stating:</p>\n\n<blockquote>\n  <p>The package java.awt is accessible from more than one module: &lt;unnamed&gt;, java.desktop</p>\n</blockquote>\n\n<p>This happens for instance when <code>javax.awt</code> or <code>javax.swing</code> is included in the .jar files.</p>\n\n<p>The simplest example would be the following:</p>\n\n<pre><code>package test;\n\nimport javax.swing.JDialog;\n\npublic class Test {\n    public static void main(String[] args) {\n        new JDialog();\n    }\n}\n</code></pre>\n\n<p>Adding a .jar file to the classpath with only the folder structure <code>javax/swing</code> (no files needed) will cause the error to appear. I'm using JDK 10/12 (neither works). Setting the compiler compliance to <code>1.8</code> makes the whole thing work again.\nOn another machine with <code>Eclipse 2018-09</code> this works with compiler compliance set to <code>10</code>.</p>\n\n<p>I'm on Eclipse <code>2019-03</code>, on a (for testing purposes) freshly installed <code>Eclipse 2018-09</code> it works fine. Why?</p>\n\n<p><strong>Edit June/2020 (Solution)</strong></p>\n\n<p>As the answers correctly stated, this is a restriction built into Java ages ago and only recently was forced upon us. I came into contact with it while migrating a big project with dozens of dependencies to Maven. There were libraries from around the year 2000! There were 'meta libraries' which consisted of several libraries packaged together.\nSo there was no other way than to identify what was still needed (into the trash with the rest!), update libraries which violate the rules or find replacements for them. This took me many, many hours.</p>\n\n<p>In the end it worked out and we've got a nice Maven project to work with.</p>\n"},{"tags":["java","spring","oauth-2.0","azure-active-directory","microsoft-graph-mail"],"comments":[{"owner":{"account_id":1053202,"reputation":59956,"user_id":1056563,"accept_rate":90,"display_name":"WestCoastProjects"},"score":0,"creation_date":1695190723,"post_id":76002924,"comment_id":135989139,"body_markdown":"I am also getting this error - in a quite different scenario: trying to access `kusto` server from within `synapse`","body":"I am also getting this error - in a quite different scenario: trying to access <code>kusto</code> server from within <code>synapse</code>"}],"owner":{"account_id":15256071,"reputation":11,"user_id":11007756,"display_name":"Amit Jha"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":714,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1695190667,"creation_date":1681372238,"question_id":76002924,"body_markdown":"\r\n```\r\nimport com.microsoft.aad.msal4j.ClientCredentialFactory;\r\nimport com.microsoft.aad.msal4j.ClientCredentialParameters;\r\nimport com.microsoft.aad.msal4j.ConfidentialClientApplication;\r\nimport com.microsoft.aad.msal4j.IAuthenticationResult;\r\nimport com.microsoft.aad.msal4j.IClientCredential;\r\nimport org.apache.commons.lang.StringUtils;\r\nimport org.slf4j.Logger;\r\nimport org.slf4j.LoggerFactory;\r\n\r\n\r\npublic class DefaultEmailReaderGraph implements CreationService {\r\n    DefaultEmailReaderGraph () {\r\n    }\r\n    public static final String CLIENT_ID = &quot;800e0bd6-7848-4027-****-************&quot;;\r\n    private static final  String AUTHORITY = &quot;https://login.microsoftonline.com/1a6b5a68-46e7-****-****-************/&quot;;\r\n    private static final  String CLIENT_SECRET = &quot;******ZNodD*****ShmFB2yG46zi************&quot;;\r\n    private static final  String TENANT_GUID=&quot;7370fc8f-4ead-****-****-************&quot;;\r\n    private static final Set&lt;String&gt; SCOPES = Collections.singleton(&quot;https://graph.microsoft.com/.default&quot;);\r\n    private static final Logger LOG = LoggerFactory.getLogger(DefaultEmailReaderGraph.class);\r\n    private static IAuthenticationResult getAccessToken() throws Exception {\r\n    \r\n        IAuthenticationResult result = null;\r\n        try{\r\n            IClientCredential credential = ClientCredentialFactory.createFromSecret(CLIENT_SECRET);\r\n            ConfidentialClientApplication app = ConfidentialClientApplication\r\n                    .builder(CLIENT_ID, credential)\r\n                    .authority(AUTHORITY)\r\n                    .build();\r\n            ClientCredentialParameters clientCredentialParameter = ClientCredentialParameters\r\n                    .builder(SCOPES)\r\n                    .build();\r\n            CompletableFuture&lt;IAuthenticationResult&gt; future=app.acquireToken(clientCredentialParameter);\r\n            result=future.get();\r\n            final String  accessToken=result.accessToken();\r\n            if(StringUtils.isBlank(accessToken)){\r\n                LOG.error(&quot;Access Token :&quot;+accessToken);\r\n            }\r\n            LOG.info(&quot;Token is :  &quot;+app.acquireToken(clientCredentialParameter).join());\r\n        }catch (Exception e){\r\n            LOG.error(&quot;Exception in acquiring token: &quot;+e.getMessage(),e);\r\n        }\r\n        return result;\r\n    }\r\n\t\r\n    @Override\r\n    public void createTicketFromEmail(Date lastEmailReadTime) throws Exception {\r\n        IAuthenticationResult accessToke= getAccessToken();\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\n\r\n\r\nFor the above code I am getting the below error in the console,\r\n\r\n```\r\nCaught throwable com/nimbusds/oauth2/sdk/auth/ClientAuthentication\r\njava.lang.NoClassDefFoundError: com/nimbusds/oauth2/sdk/auth/ClientAuthentication\r\n&#160;&#160;&#160; at\r\n```\r\n\r\nEven thought I have added the jar for the `nimbusds` (`nimbus-jose-jwt-9.31.wso2v1`) to the lib folder.\r\n\r\nI am trying to generate the access token from the above code so I can further use it to read the email from the Azure AD Mailbox","title":"Getting the error java.lang.NoClassDefFoundError: com/nimbusds/oauth2/sdk/auth/ClientAuthentication while trying to read the mails from Graph API","body":"<pre><code>import com.microsoft.aad.msal4j.ClientCredentialFactory;\nimport com.microsoft.aad.msal4j.ClientCredentialParameters;\nimport com.microsoft.aad.msal4j.ConfidentialClientApplication;\nimport com.microsoft.aad.msal4j.IAuthenticationResult;\nimport com.microsoft.aad.msal4j.IClientCredential;\nimport org.apache.commons.lang.StringUtils;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n\n\npublic class DefaultEmailReaderGraph implements CreationService {\n    DefaultEmailReaderGraph () {\n    }\n    public static final String CLIENT_ID = &quot;800e0bd6-7848-4027-****-************&quot;;\n    private static final  String AUTHORITY = &quot;https://login.microsoftonline.com/1a6b5a68-46e7-****-****-************/&quot;;\n    private static final  String CLIENT_SECRET = &quot;******ZNodD*****ShmFB2yG46zi************&quot;;\n    private static final  String TENANT_GUID=&quot;7370fc8f-4ead-****-****-************&quot;;\n    private static final Set&lt;String&gt; SCOPES = Collections.singleton(&quot;https://graph.microsoft.com/.default&quot;);\n    private static final Logger LOG = LoggerFactory.getLogger(DefaultEmailReaderGraph.class);\n    private static IAuthenticationResult getAccessToken() throws Exception {\n    \n        IAuthenticationResult result = null;\n        try{\n            IClientCredential credential = ClientCredentialFactory.createFromSecret(CLIENT_SECRET);\n            ConfidentialClientApplication app = ConfidentialClientApplication\n                    .builder(CLIENT_ID, credential)\n                    .authority(AUTHORITY)\n                    .build();\n            ClientCredentialParameters clientCredentialParameter = ClientCredentialParameters\n                    .builder(SCOPES)\n                    .build();\n            CompletableFuture&lt;IAuthenticationResult&gt; future=app.acquireToken(clientCredentialParameter);\n            result=future.get();\n            final String  accessToken=result.accessToken();\n            if(StringUtils.isBlank(accessToken)){\n                LOG.error(&quot;Access Token :&quot;+accessToken);\n            }\n            LOG.info(&quot;Token is :  &quot;+app.acquireToken(clientCredentialParameter).join());\n        }catch (Exception e){\n            LOG.error(&quot;Exception in acquiring token: &quot;+e.getMessage(),e);\n        }\n        return result;\n    }\n    \n    @Override\n    public void createTicketFromEmail(Date lastEmailReadTime) throws Exception {\n        IAuthenticationResult accessToke= getAccessToken();\n    }\n}\n\n</code></pre>\n<p>For the above code I am getting the below error in the console,</p>\n<pre><code>Caught throwable com/nimbusds/oauth2/sdk/auth/ClientAuthentication\njava.lang.NoClassDefFoundError: com/nimbusds/oauth2/sdk/auth/ClientAuthentication\n    at\n</code></pre>\n<p>Even thought I have added the jar for the <code>nimbusds</code> (<code>nimbus-jose-jwt-9.31.wso2v1</code>) to the lib folder.</p>\n<p>I am trying to generate the access token from the above code so I can further use it to read the email from the Azure AD Mailbox</p>\n"},{"tags":["java","android","react-native","kotlin","bluetooth"],"comments":[{"owner":{"account_id":13445819,"reputation":1965,"user_id":9701793,"display_name":"rahat"},"score":0,"creation_date":1695210997,"post_id":77139512,"comment_id":135993263,"body_markdown":"Does this answer your question? [Programmatically connect to bluetooth headset from android app](https://stackoverflow.com/questions/24468010/programmatically-connect-to-bluetooth-headset-from-android-app)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/24468010/programmatically-connect-to-bluetooth-headset-from-android-app\">Programmatically connect to bluetooth headset from android app</a>"},{"owner":{"account_id":26158177,"reputation":21,"user_id":19845155,"display_name":"Atharva Solaskar"},"score":0,"creation_date":1695299961,"post_id":77139512,"comment_id":136007873,"body_markdown":"Nope, it Connects Headsets which are the BLE Devices. I Need a Solution to Connect Classic Bluetooth.","body":"Nope, it Connects Headsets which are the BLE Devices. I Need a Solution to Connect Classic Bluetooth."}],"answers":[{"tags":[],"owner":{"account_id":10114718,"reputation":2216,"user_id":7473793,"display_name":"Michael Kotzjan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695190665,"creation_date":1695190665,"answer_id":77139741,"question_id":77139512,"body_markdown":"Bluetooth Classic is often referred to by the name Bluetooth Serial. The package [react-native-bluetooth-serial](https://www.npmjs.com/package/react-native-bluetooth-serial) seems to be a choice for you.\r\n\r\nRegarding Bluetooth Classic using Kotlin you could start by following the [Android Developer Guide](https://developer.android.com/guide/topics/connectivity/bluetooth/setup).","title":"Is it possible to Scan and Connect to the Classic Bluetooth Devices In React native or Kotlin for Android? if yes then How?","body":"<p>Bluetooth Classic is often referred to by the name Bluetooth Serial. The package <a href=\"https://www.npmjs.com/package/react-native-bluetooth-serial\" rel=\"nofollow noreferrer\">react-native-bluetooth-serial</a> seems to be a choice for you.</p>\n<p>Regarding Bluetooth Classic using Kotlin you could start by following the <a href=\"https://developer.android.com/guide/topics/connectivity/bluetooth/setup\" rel=\"nofollow noreferrer\">Android Developer Guide</a>.</p>\n"}],"owner":{"account_id":26158177,"reputation":21,"user_id":19845155,"display_name":"Atharva Solaskar"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":76,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1695190665,"creation_date":1695187652,"question_id":77139512,"body_markdown":"Is it possible to Scan and Connect to the Classic Bluetooth Devices In React native or Kotlin for Android? if yes then How?\r\n\r\nI tried installing with React native Libraries but they are not providing Scanning Functionality to Scan for Classic Bluetooth. I am getting a lot information regarding the BLE Device but there isn&#39;t info regarding Classic Bluetooth.","title":"Is it possible to Scan and Connect to the Classic Bluetooth Devices In React native or Kotlin for Android? if yes then How?","body":"<p>Is it possible to Scan and Connect to the Classic Bluetooth Devices In React native or Kotlin for Android? if yes then How?</p>\n<p>I tried installing with React native Libraries but they are not providing Scanning Functionality to Scan for Classic Bluetooth. I am getting a lot information regarding the BLE Device but there isn't info regarding Classic Bluetooth.</p>\n"},{"tags":["java","android","storage"],"comments":[{"owner":{"account_id":18999437,"reputation":2463,"user_id":13867124,"display_name":"AztecCodes"},"score":0,"creation_date":1695163507,"post_id":77138320,"comment_id":135986680,"body_markdown":"The issue you&#39;re encountering is a consequence of Android&#39;s app sandboxing for external storage, especially on older Android versions. Apps have access to their own directory within the external storage, but they cannot write to another app&#39;s directory.","body":"The issue you&#39;re encountering is a consequence of Android&#39;s app sandboxing for external storage, especially on older Android versions. Apps have access to their own directory within the external storage, but they cannot write to another app&#39;s directory."},{"owner":{"account_id":29485927,"reputation":1,"user_id":22595845,"display_name":"shibashiba"},"score":0,"creation_date":1695167137,"post_id":77138320,"comment_id":135987085,"body_markdown":"That&#39;s right.\nHowever, file manager apps (ex. Cx File Manager) can manipulate directories of other apps even if they are not system apps. Do you know how this is done?","body":"That&#39;s right. However, file manager apps (ex. Cx File Manager) can manipulate directories of other apps even if they are not system apps. Do you know how this is done?"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1695189082,"post_id":77138320,"comment_id":135988919,"body_markdown":"`to transfer data saved on the SD card from the old app to the new app` The files are on the removable micro sd card. They are there for both old and new app. So what is it what you wanna do as no data is lost.","body":"<code>to transfer data saved on the SD card from the old app to the new app</code> The files are on the removable micro sd card. They are there for both old and new app. So what is it what you wanna do as no data is lost."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1695189331,"post_id":77138320,"comment_id":135988952,"body_markdown":"`the button will transfer data to the new app. ` Impossible. One cannot transfer files to apps. One can instead copy and move files from one storage location to another one.","body":"<code>the button will transfer data to the new app. </code> Impossible. One cannot transfer files to apps. One can instead copy and move files from one storage location to another one."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1695189559,"post_id":77138320,"comment_id":135988978,"body_markdown":"The new app is not an update of the old app? It has a different getPackageName() value?","body":"The new app is not an update of the old app? It has a different getPackageName() value?"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1695198570,"post_id":77138320,"comment_id":135990666,"body_markdown":"`We have confirmed that files can be moved using Storage Access Framework&#39;s DocumentsContract.moveDocument() on Android7 and above. ` Then you did not test on Android 13+ devices as there you have not access to Android folder on removable micro sd card.","body":"<code>We have confirmed that files can be moved using Storage Access Framework&#39;s DocumentsContract.moveDocument() on Android7 and above. </code> Then you did not test on Android 13+ devices as there you have not access to Android folder on removable micro sd card."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1695198914,"post_id":77138320,"comment_id":135990731,"body_markdown":"`String appBExternalFileDirPath = appAExternalFileDirPath.replace(&quot;com.example.testAppA&quot;, &quot;testAppB&quot;);` ? That will never do.","body":"<code>String appBExternalFileDirPath = appAExternalFileDirPath.replace(&quot;com.example.testAppA&quot;, &quot;testAppB&quot;);</code> ? That will never do."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1695199108,"post_id":77138320,"comment_id":135990777,"body_markdown":"`the above method cannot be used on my Android 5 device` Well with SAF on Android 5 devices you can read and write all files and directories in Android directory on a removable micro sd card. You do not need `DocumentsContract.moveDocument()` method to copy or move files but can do it in another way. Please elaborate.","body":"<code>the above method cannot be used on my Android 5 device</code> Well with SAF on Android 5 devices you can read and write all files and directories in Android directory on a removable micro sd card. You do not need <code>DocumentsContract.moveDocument()</code> method to copy or move files but can do it in another way. Please elaborate."}],"answers":[{"tags":[],"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695190526,"creation_date":1695190526,"answer_id":77139729,"question_id":77138320,"body_markdown":"As since Android 4 KitKat removable micro sd cards are read only except for app specific directories on it you should let the new app copy files from old to new location.\r\n\r\nOn Android 5 apps can read all files in Android directory on card. But they can only write in their own specific files dir.","title":"How to move files in SDCard","body":"<p>As since Android 4 KitKat removable micro sd cards are read only except for app specific directories on it you should let the new app copy files from old to new location.</p>\n<p>On Android 5 apps can read all files in Android directory on card. But they can only write in their own specific files dir.</p>\n"}],"owner":{"account_id":29485927,"reputation":1,"user_id":22595845,"display_name":"shibashiba"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695190526,"creation_date":1695162959,"question_id":77138320,"body_markdown":"I&#39;m currently running an app. The app is not released on the store, but distributed as an apk for users to download.\r\nWe have decided to release the renewed app on the Google Play Store. At the time of release, we are trying to implement a function to transfer data saved on the SD card from the old app to the new app, but I didn&#39;t know how to do it so I asked a question.\r\n\r\nThe functionality I am trying to implement is as follows.\r\n\r\n- Added a data transfer button to the old app, and clicking the button will transfer data to the new app.\r\n  ・Do not perform any migration operations using the new app.\r\n\r\nWe have confirmed that files can be moved using Storage Access Framework&#39;s DocumentsContract.moveDocument() on Android7 and above. However, the above method cannot be used on my Android 5 device, so I implemented it in a different way. However, I was told permission denied and could not migrate the data.\r\n\r\nBelow is part of the code I implemented.\r\n\r\nThe method that is performing the processing\r\n\r\n```\r\nvoid forTEST() {\r\n        File fileDir = getExternalFilesDir(null);\r\n        File[] fileDirs = getExternalFilesDirs(null);\r\n\r\n        File appAExternalFileDir = null;\r\n        for (File dir : fileDirs) {\r\n            if ( dir != null &amp;&amp; !fileDir.equals(dir) &amp;&amp; Environment.isExternalStorageRemovable(dir)) {\r\n                appAExternalFileDir = dir;\r\n            }\r\n        }\r\n\r\n        if (appAExternalFileDir == null) return;\r\n\r\n        String appAExternalFileDirPath = appAExternalFileDir.getAbsolutePath();\r\n        Log.d(&quot;testlog&quot;, &quot;externalFileDirPath:&quot; + appAExternalFileDir.getAbsolutePath()); // externalFileDirPath:/storage/MicroSD/Android/data/com.example.testAppA/files\r\n        Log.d(&quot;testlog&quot;, appAExternalFileDir.canRead() ? &quot;true&quot; : &quot;false&quot;); // true\r\n        Log.d(&quot;testlog&quot;, appAExternalFileDir.canWrite() ? &quot;true&quot; : &quot;false&quot;); // true\r\n\r\n        String appBExternalFileDirPath = \r\n        String appBExternalFileDirPath = appAExternalFileDirPath.replace(&quot;com.example.testAppA&quot;, &quot;testAppB&quot;);\r\n        File appBExternalFileDir = new File(appBExternalFileDirPath);\r\n        Log.d(&quot;testlog&quot;, &quot;externalFileDirPath:&quot; + appBExternalFileDir.getAbsolutePath());// externalFileDirPath:/storage/MicroSD/Android/data/com.example.testAppB/files\r\n        Log.d(&quot;testlog&quot;, appBExternalFileDir.canRead() ? &quot;true&quot; : &quot;false&quot;); // true\r\n        Log.d(&quot;testlog&quot;, appBExternalFileDir.canWrite() ? &quot;true&quot; : &quot;false&quot;); // true\r\n\r\n        File[] appAFiles = appAExternalFileDir.listFiles();\r\n        for(int i=0; i&lt;appAFiles.length; i++) {\r\n            String fileName = appAFiles[i].getName();\r\n            File destFile = new File(appBExternalFileDir, appAFiles[i].getName());\r\n\r\n            moveFileToDest(appAFiles[i], destFile);\r\n\r\n// I tried renameTo() but only found true/false, so I created moveFileToDest() and executed it.\r\n// renameTo() returned false.\r\n//            if (appAFiles[i].renameTo(destFile)) {\r\n//                Log.d(&quot;testLog&quot;, &quot;success to renameTo()&quot;);\r\n//            } else {\r\n//                Log.d(&quot;testlog&quot;, &quot;failure to renameTo()&quot;);\r\n//            }\r\n        }\r\n    }\r\n\r\n    void moveFileToDest(File sourceFile, File destinationFile) {\r\n        try {\r\n            // When I performed the move process described below without creating a new file first, a FileNotFoundException occurred, so I added createNewFile().\r\n            if (destinationFile.createNewFile()) { // throw java.io.IOException: open failed: EACCES (Permission denied)\r\n                Log.d(&quot;testlog&quot;, &quot;create success!!&quot;);\r\n            } else {\r\n                Log.d(&quot;testlog&quot;, &quot;create failed&quot;);\r\n            }\r\n\r\n            FileInputStream fis = new FileInputStream(sourceFile);\r\n            FileOutputStream fos = new FileOutputStream(destinationFile);\r\n\r\n            FileChannel sourceChannel = fis.getChannel();\r\n            FileChannel destinationChannel = fos.getChannel();\r\n\r\n            sourceChannel.transferTo(0, sourceChannel.size(), destinationChannel);\r\n\r\n            sourceChannel.close();\r\n            fis.close();\r\n            destinationChannel.close();\r\n            fos.close();\r\n\r\n            sourceFile.delete();\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n```\r\n\r\nAndroidManifest.xml(Excerpt)\r\n\r\n```\r\n    &lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot;/&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;/&gt;\r\n```\r\n\r\ncanRead() and canWrite() of appAExternalFileDir and appBExternalFileDir are both true.\r\nBut when I try to create a file inside appBExternalFileDir I get an IOException and it says Permission Denied.\r\n\r\nwhat should i do.\r\nI am glad if you could tell me.\r\n(If there is any missing information, please let me know so I can add it)","title":"How to move files in SDCard","body":"<p>I'm currently running an app. The app is not released on the store, but distributed as an apk for users to download.\nWe have decided to release the renewed app on the Google Play Store. At the time of release, we are trying to implement a function to transfer data saved on the SD card from the old app to the new app, but I didn't know how to do it so I asked a question.</p>\n<p>The functionality I am trying to implement is as follows.</p>\n<ul>\n<li>Added a data transfer button to the old app, and clicking the button will transfer data to the new app.\n・Do not perform any migration operations using the new app.</li>\n</ul>\n<p>We have confirmed that files can be moved using Storage Access Framework's DocumentsContract.moveDocument() on Android7 and above. However, the above method cannot be used on my Android 5 device, so I implemented it in a different way. However, I was told permission denied and could not migrate the data.</p>\n<p>Below is part of the code I implemented.</p>\n<p>The method that is performing the processing</p>\n<pre><code>void forTEST() {\n        File fileDir = getExternalFilesDir(null);\n        File[] fileDirs = getExternalFilesDirs(null);\n\n        File appAExternalFileDir = null;\n        for (File dir : fileDirs) {\n            if ( dir != null &amp;&amp; !fileDir.equals(dir) &amp;&amp; Environment.isExternalStorageRemovable(dir)) {\n                appAExternalFileDir = dir;\n            }\n        }\n\n        if (appAExternalFileDir == null) return;\n\n        String appAExternalFileDirPath = appAExternalFileDir.getAbsolutePath();\n        Log.d(&quot;testlog&quot;, &quot;externalFileDirPath:&quot; + appAExternalFileDir.getAbsolutePath()); // externalFileDirPath:/storage/MicroSD/Android/data/com.example.testAppA/files\n        Log.d(&quot;testlog&quot;, appAExternalFileDir.canRead() ? &quot;true&quot; : &quot;false&quot;); // true\n        Log.d(&quot;testlog&quot;, appAExternalFileDir.canWrite() ? &quot;true&quot; : &quot;false&quot;); // true\n\n        String appBExternalFileDirPath = \n        String appBExternalFileDirPath = appAExternalFileDirPath.replace(&quot;com.example.testAppA&quot;, &quot;testAppB&quot;);\n        File appBExternalFileDir = new File(appBExternalFileDirPath);\n        Log.d(&quot;testlog&quot;, &quot;externalFileDirPath:&quot; + appBExternalFileDir.getAbsolutePath());// externalFileDirPath:/storage/MicroSD/Android/data/com.example.testAppB/files\n        Log.d(&quot;testlog&quot;, appBExternalFileDir.canRead() ? &quot;true&quot; : &quot;false&quot;); // true\n        Log.d(&quot;testlog&quot;, appBExternalFileDir.canWrite() ? &quot;true&quot; : &quot;false&quot;); // true\n\n        File[] appAFiles = appAExternalFileDir.listFiles();\n        for(int i=0; i&lt;appAFiles.length; i++) {\n            String fileName = appAFiles[i].getName();\n            File destFile = new File(appBExternalFileDir, appAFiles[i].getName());\n\n            moveFileToDest(appAFiles[i], destFile);\n\n// I tried renameTo() but only found true/false, so I created moveFileToDest() and executed it.\n// renameTo() returned false.\n//            if (appAFiles[i].renameTo(destFile)) {\n//                Log.d(&quot;testLog&quot;, &quot;success to renameTo()&quot;);\n//            } else {\n//                Log.d(&quot;testlog&quot;, &quot;failure to renameTo()&quot;);\n//            }\n        }\n    }\n\n    void moveFileToDest(File sourceFile, File destinationFile) {\n        try {\n            // When I performed the move process described below without creating a new file first, a FileNotFoundException occurred, so I added createNewFile().\n            if (destinationFile.createNewFile()) { // throw java.io.IOException: open failed: EACCES (Permission denied)\n                Log.d(&quot;testlog&quot;, &quot;create success!!&quot;);\n            } else {\n                Log.d(&quot;testlog&quot;, &quot;create failed&quot;);\n            }\n\n            FileInputStream fis = new FileInputStream(sourceFile);\n            FileOutputStream fos = new FileOutputStream(destinationFile);\n\n            FileChannel sourceChannel = fis.getChannel();\n            FileChannel destinationChannel = fos.getChannel();\n\n            sourceChannel.transferTo(0, sourceChannel.size(), destinationChannel);\n\n            sourceChannel.close();\n            fis.close();\n            destinationChannel.close();\n            fos.close();\n\n            sourceFile.delete();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n</code></pre>\n<p>AndroidManifest.xml(Excerpt)</p>\n<pre><code>    &lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot;/&gt;\n    &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;/&gt;\n</code></pre>\n<p>canRead() and canWrite() of appAExternalFileDir and appBExternalFileDir are both true.\nBut when I try to create a file inside appBExternalFileDir I get an IOException and it says Permission Denied.</p>\n<p>what should i do.\nI am glad if you could tell me.\n(If there is any missing information, please let me know so I can add it)</p>\n"},{"tags":["java","android","animation"],"comments":[{"owner":{"account_id":6024742,"reputation":19213,"user_id":4730812,"accept_rate":100,"display_name":"piotrek1543"},"score":0,"creation_date":1451604131,"post_id":34552122,"comment_id":56847309,"body_markdown":"Check this https://android-arsenal.com/tag/173","body":"Check this <a href=\"https://android-arsenal.com/tag/173\" rel=\"nofollow noreferrer\">android-arsenal.com/tag/173</a>"},{"owner":{"account_id":6515001,"reputation":2582,"user_id":5041124,"accept_rate":68,"display_name":"Nick Mowen"},"score":1,"creation_date":1451608260,"post_id":34552122,"comment_id":56848040,"body_markdown":"Holy Crap, that is amazing. Welp I just found something that I like, thanks!","body":"Holy Crap, that is amazing. Welp I just found something that I like, thanks!"},{"owner":{"account_id":6024742,"reputation":19213,"user_id":4730812,"accept_rate":100,"display_name":"piotrek1543"},"score":0,"creation_date":1451608473,"post_id":34552122,"comment_id":56848076,"body_markdown":"nice to hear. I&#39;ve already added this as answer","body":"nice to hear. I&#39;ve already added this as answer"}],"answers":[{"tags":[],"owner":{"account_id":6024742,"reputation":19213,"user_id":4730812,"accept_rate":100,"display_name":"piotrek1543"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1451608772,"creation_date":1451608453,"answer_id":34552703,"question_id":34552122,"body_markdown":"If you don&#39;t want to spend much time to create a custom `xml` animation to your Floating Action Button, please check this additional FAB collections:\r\n\r\nhttps://android-arsenal.com/tag/173\r\n\r\nI think one of these looks pretty similar to your desired one.\r\n\r\nYou may also visit this tutorial: http://www.learn2crack.com/2015/10/android-floating-action-button-animations.html\r\n\r\nAlso check on StackOverflow:\r\n\r\n - https://stackoverflow.com/questions/27922191/floating-action-button-animation\r\n - https://stackoverflow.com/questions/29951833/grow-animation-for-floating-action-button\r\n\r\nHope it help ","title":"Animation xml for FAB to AlertDialog?","body":"<p>If you don't want to spend much time to create a custom <code>xml</code> animation to your Floating Action Button, please check this additional FAB collections:</p>\n\n<p><a href=\"https://android-arsenal.com/tag/173\" rel=\"nofollow noreferrer\">https://android-arsenal.com/tag/173</a></p>\n\n<p>I think one of these looks pretty similar to your desired one.</p>\n\n<p>You may also visit this tutorial: <a href=\"http://www.learn2crack.com/2015/10/android-floating-action-button-animations.html\" rel=\"nofollow noreferrer\">http://www.learn2crack.com/2015/10/android-floating-action-button-animations.html</a></p>\n\n<p>Also check on StackOverflow:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/27922191/floating-action-button-animation\">Floating Action Button Animation</a></li>\n<li><a href=\"https://stackoverflow.com/questions/29951833/grow-animation-for-floating-action-button\">Grow Animation for Floating Action Button</a></li>\n</ul>\n\n<p>Hope it help </p>\n"}],"owner":{"account_id":6515001,"reputation":2582,"user_id":5041124,"accept_rate":68,"display_name":"Nick Mowen"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2540,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":34552703,"answer_count":1,"score":3,"last_activity_date":1695190482,"creation_date":1451601120,"question_id":34552122,"body_markdown":"I am trying to create an animation [like this one][1] to go from an fab to alert dialog. I am not sure how to define this animation whether it is via xml or an Animation Class. I am a big noob when it comes to defining animations so any and all help is greatly appreciated!\r\n\r\n\r\n\r\n  [1]: http://gfycat.com/AnyEverlastingHairstreakbutterfly","title":"Animation xml for FAB to AlertDialog?","body":"<p>I am trying to create an animation <a href=\"http://gfycat.com/AnyEverlastingHairstreakbutterfly\" rel=\"nofollow\">like this one</a> to go from an fab to alert dialog. I am not sure how to define this animation whether it is via xml or an Animation Class. I am a big noob when it comes to defining animations so any and all help is greatly appreciated!</p>\n"},{"tags":["java","email","jaxb"],"owner":{"account_id":29488040,"reputation":1,"user_id":22597517,"display_name":"hanbom"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695190344,"creation_date":1695190344,"question_id":77139713,"body_markdown":"I&#39;m writing an MVC Java program, using JAXB to generate XML and send to a display jsp. The code runs and the XML is displayed correctly in the browser, but I&#39;m still getting a JAXBException in the IDE console.\r\n\r\nMy java version is 11 therefore i add jaxb-api-2.3.1.jar to dependencies\r\n\r\nCan anyone help?\r\n\r\n**Web Send**\r\n```\r\npublic class MailService{\r\n\t\r\n\t@Autowired\r\n\tprivate ModuleConfig config;\r\n\t\r\n\t@Override\r\n\tpublic void mailSend() throws Exception {\r\n\t\tSendMail mail = new SendMail();\r\n\t\tmail.setSenderID(&quot;Email&quot;);\r\n\t\tmail.setMsgTo(&quot;Email&quot;);\r\n\t\tmail.setSubject(&quot;subject.&quot;);\r\n\t\tmail.setContents(&quot;test conents&quot;);\r\n\r\n\t\t\r\n\t\tSaajSoapMessageFactory messageFactory = new SaajSoapMessageFactory(\r\n                MessageFactory.newInstance());\r\n        messageFactory.afterPropertiesSet();\r\n\r\n        WebServiceTemplate webServiceTemplate = new WebServiceGatewaySupport() {}.getWebServiceTemplate();\r\n        Jaxb2Marshaller marshaller = new Jaxb2Marshaller();\r\n\r\n        marshaller.setPackagesToScan(&quot;package.SendMail&quot;);\r\n        marshaller.afterPropertiesSet();\r\n        webServiceTemplate.setDefaultUri(URL);\r\n        webServiceTemplate.setMarshaller(marshaller);\r\n        webServiceTemplate.setUnmarshaller(marshaller);\r\n        webServiceTemplate.afterPropertiesSet();\r\n\r\n       webServiceTemplate\r\n                .marshalSendAndReceive(\r\n                \t\tSendURL\r\n                \t\t, mail\r\n                \t\t,new SoapActionCallback(CallbackURL));\r\n\t}\r\n}\r\n```\r\n\r\n**SendMail Class**\r\n```\r\n@XmlAccessorType(XmlAccessType.FIELD)\r\n@XmlType(name = &quot;&quot;, propOrder = {\r\n    &quot;senderID&quot;,\r\n    &quot;msgTo&quot;,\r\n    &quot;msgCC&quot;,\r\n    &quot;msgBcc&quot;,\r\n    &quot;subject&quot;,\r\n    &quot;contents&quot;,\r\n    &quot;attachments&quot;,\r\n    &quot;attachmentUrl&quot;\r\n})\r\n@XmlRootElement(name = &quot;SendMail&quot;)\r\npublic class SendMail {\r\n\r\n    protected String senderID;\r\n    protected String msgTo;\r\n    protected String msgCC;\r\n    protected String msgBcc;\r\n    protected String subject;\r\n    protected String contents;\r\n    protected String attachments;\r\n    protected String attachmentUrl;\r\n}\r\n```\r\n\r\n**Xml Data Format**\r\n```\r\n&lt;SendMail&gt;\r\n  &lt;senderID&gt;string&lt;/senderID&gt;\r\n  &lt;msgTo&gt;string&lt;/msgTo&gt;\r\n  &lt;msgCC&gt;string&lt;/msgCC&gt;\r\n  &lt;msgBcc&gt;string&lt;/msgBcc&gt;\r\n  &lt;subject&gt;string&lt;/subject&gt;\r\n  &lt;contents&gt;string&lt;/contents&gt;\r\n  &lt;attachments&gt;string&lt;/attachments&gt;\r\n  &lt;attachmentUrl&gt;string&lt;/attachmentUrl&gt;\r\n&lt;/SendMail&gt;\r\n```\r\n\r\n**Stack Trace**\r\n```\r\njavax.xml.bind.JAXBException: javax.xml.bind.JAXBException: class SendMail nor any of its super class is known to this context.\r\n\tat com.sun.xml.bind.v2.runtime.JAXBContextImpl.getBeanInfo(JAXBContextImpl.java:593)\r\n\tat com.sun.xml.bind.v2.runtime.XMLSerializer.childAsRoot(XMLSerializer.java:482)\r\n\tat com.sun.xml.bind.v2.runtime.MarshallerImpl.write(MarshallerImpl.java:328)\r\n\tat com.sun.xml.bind.v2.runtime.MarshallerImpl.marshal(MarshallerImpl.java:256)\r\n\tat org.springframework.oxm.jaxb.Jaxb2Marshaller.marshal(Jaxb2Marshaller.java:709)\r\n\tat org.springframework.ws.support.MarshallingUtils.marshal(MarshallingUtils.java:81)\r\n\tat org.springframework.ws.client.core.WebServiceTemplate$2.doWithMessage(WebServiceTemplate.java:399)\r\n\tat org.springframework.ws.client.core.WebServiceTemplate.doSendAndReceive(WebServiceTemplate.java:590)\r\n\tat org.springframework.ws.client.core.WebServiceTemplate.sendAndReceive(WebServiceTemplate.java:555)\r\n\tat org.springframework.ws.client.core.WebServiceTemplate.marshalSendAndReceive(WebServiceTemplate.java:390)\r\n# \tat com.edu.test.scheduler.domain.mailPoller.launcher.MailService.mailSend(MailService.java:52)\r\n\tat com.edu.test.scheduler.domain.mailPoller.launcher.MailLancher.MailStart(MailLancher.java:27)\r\n\tat com.edu.test.scheduler.core.controller.BatchJobController.sync(BatchJobController.java:181)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:190)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:138)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:105)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:878)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:792)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1040)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:652)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:733)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n\tat org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:209)\r\n\tat org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:868)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1590)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:833)\r\n```\r\n\r\nI tried to send mail,\r\nI expected the mail to go normally.","title":"javax.xml.bind.JAXBException : SendMail of its super class is known to this context (gradle)","body":"<p>I'm writing an MVC Java program, using JAXB to generate XML and send to a display jsp. The code runs and the XML is displayed correctly in the browser, but I'm still getting a JAXBException in the IDE console.</p>\n<p>My java version is 11 therefore i add jaxb-api-2.3.1.jar to dependencies</p>\n<p>Can anyone help?</p>\n<p><strong>Web Send</strong></p>\n<pre><code>public class MailService{\n    \n    @Autowired\n    private ModuleConfig config;\n    \n    @Override\n    public void mailSend() throws Exception {\n        SendMail mail = new SendMail();\n        mail.setSenderID(&quot;Email&quot;);\n        mail.setMsgTo(&quot;Email&quot;);\n        mail.setSubject(&quot;subject.&quot;);\n        mail.setContents(&quot;test conents&quot;);\n\n        \n        SaajSoapMessageFactory messageFactory = new SaajSoapMessageFactory(\n                MessageFactory.newInstance());\n        messageFactory.afterPropertiesSet();\n\n        WebServiceTemplate webServiceTemplate = new WebServiceGatewaySupport() {}.getWebServiceTemplate();\n        Jaxb2Marshaller marshaller = new Jaxb2Marshaller();\n\n        marshaller.setPackagesToScan(&quot;package.SendMail&quot;);\n        marshaller.afterPropertiesSet();\n        webServiceTemplate.setDefaultUri(URL);\n        webServiceTemplate.setMarshaller(marshaller);\n        webServiceTemplate.setUnmarshaller(marshaller);\n        webServiceTemplate.afterPropertiesSet();\n\n       webServiceTemplate\n                .marshalSendAndReceive(\n                        SendURL\n                        , mail\n                        ,new SoapActionCallback(CallbackURL));\n    }\n}\n</code></pre>\n<p><strong>SendMail Class</strong></p>\n<pre><code>@XmlAccessorType(XmlAccessType.FIELD)\n@XmlType(name = &quot;&quot;, propOrder = {\n    &quot;senderID&quot;,\n    &quot;msgTo&quot;,\n    &quot;msgCC&quot;,\n    &quot;msgBcc&quot;,\n    &quot;subject&quot;,\n    &quot;contents&quot;,\n    &quot;attachments&quot;,\n    &quot;attachmentUrl&quot;\n})\n@XmlRootElement(name = &quot;SendMail&quot;)\npublic class SendMail {\n\n    protected String senderID;\n    protected String msgTo;\n    protected String msgCC;\n    protected String msgBcc;\n    protected String subject;\n    protected String contents;\n    protected String attachments;\n    protected String attachmentUrl;\n}\n</code></pre>\n<p><strong>Xml Data Format</strong></p>\n<pre><code>&lt;SendMail&gt;\n  &lt;senderID&gt;string&lt;/senderID&gt;\n  &lt;msgTo&gt;string&lt;/msgTo&gt;\n  &lt;msgCC&gt;string&lt;/msgCC&gt;\n  &lt;msgBcc&gt;string&lt;/msgBcc&gt;\n  &lt;subject&gt;string&lt;/subject&gt;\n  &lt;contents&gt;string&lt;/contents&gt;\n  &lt;attachments&gt;string&lt;/attachments&gt;\n  &lt;attachmentUrl&gt;string&lt;/attachmentUrl&gt;\n&lt;/SendMail&gt;\n</code></pre>\n<p><strong>Stack Trace</strong></p>\n<pre><code>javax.xml.bind.JAXBException: javax.xml.bind.JAXBException: class SendMail nor any of its super class is known to this context.\n    at com.sun.xml.bind.v2.runtime.JAXBContextImpl.getBeanInfo(JAXBContextImpl.java:593)\n    at com.sun.xml.bind.v2.runtime.XMLSerializer.childAsRoot(XMLSerializer.java:482)\n    at com.sun.xml.bind.v2.runtime.MarshallerImpl.write(MarshallerImpl.java:328)\n    at com.sun.xml.bind.v2.runtime.MarshallerImpl.marshal(MarshallerImpl.java:256)\n    at org.springframework.oxm.jaxb.Jaxb2Marshaller.marshal(Jaxb2Marshaller.java:709)\n    at org.springframework.ws.support.MarshallingUtils.marshal(MarshallingUtils.java:81)\n    at org.springframework.ws.client.core.WebServiceTemplate$2.doWithMessage(WebServiceTemplate.java:399)\n    at org.springframework.ws.client.core.WebServiceTemplate.doSendAndReceive(WebServiceTemplate.java:590)\n    at org.springframework.ws.client.core.WebServiceTemplate.sendAndReceive(WebServiceTemplate.java:555)\n    at org.springframework.ws.client.core.WebServiceTemplate.marshalSendAndReceive(WebServiceTemplate.java:390)\n#   at com.edu.test.scheduler.domain.mailPoller.launcher.MailService.mailSend(MailService.java:52)\n    at com.edu.test.scheduler.domain.mailPoller.launcher.MailLancher.MailStart(MailLancher.java:27)\n    at com.edu.test.scheduler.core.controller.BatchJobController.sync(BatchJobController.java:181)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:190)\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:138)\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:105)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:878)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:792)\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1040)\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943)\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)\n    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:652)\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:733)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:209)\n    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)\n    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)\n    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:868)\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1590)\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n    at java.base/java.lang.Thread.run(Thread.java:833)\n</code></pre>\n<p>I tried to send mail,\nI expected the mail to go normally.</p>\n"},{"tags":["java","mongodb","codec","bson","quarkus-panache"],"answers":[{"tags":[],"owner":{"account_id":4843120,"reputation":731,"user_id":3907616,"display_name":"Yuna Braska"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1622897191,"creation_date":1622897191,"answer_id":67849755,"question_id":67849754,"body_markdown":"So I created the following hack, since my debug time and patience is really limited and I want to continue working instead of endless debugging others code\r\n\r\n**CODEC:**\r\n```java\r\nimport org.bson.BsonDocument;\r\nimport org.bson.BsonDocumentWriter;\r\nimport org.bson.BsonReader;\r\nimport org.bson.BsonType;\r\nimport org.bson.BsonWriter;\r\nimport org.bson.codecs.Codec;\r\nimport org.bson.codecs.DecoderContext;\r\nimport org.bson.codecs.EncoderContext;\r\nimport org.bson.codecs.configuration.CodecConfigurationException;\r\nimport org.bson.json.JsonReader;\r\n\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\nimport java.util.UUID;\r\n\r\npublic class MapCodec&lt;K, T&gt; implements Codec&lt;Map&lt;K, T&gt;&gt; {\r\n    private final Class&lt;Map&lt;K, T&gt;&gt; encoderClass;\r\n    private final Codec&lt;K&gt; keyCodec;\r\n    private final Codec&lt;T&gt; valueCodec;\r\n\r\n    MapCodec(final Class&lt;Map&lt;K, T&gt;&gt; encoderClass, final Codec&lt;K&gt; keyCodec, final Codec&lt;T&gt; valueCodec) {\r\n        this.encoderClass = encoderClass;\r\n        this.keyCodec = keyCodec;\r\n        this.valueCodec = valueCodec;\r\n    }\r\n\r\n    @Override\r\n    public void encode(final BsonWriter writer, final Map&lt;K, T&gt; map, final EncoderContext encoderContext) {\r\n        try (var dummyWriter = new BsonDocumentWriter(new BsonDocument())) {\r\n            dummyWriter.writeStartDocument();\r\n            writer.writeStartDocument();\r\n            for (final Map.Entry&lt;K, T&gt; entry : map.entrySet()) {\r\n                var dummyId = UUID.randomUUID().toString();\r\n                dummyWriter.writeName(dummyId);\r\n                keyCodec.encode(dummyWriter, entry.getKey(), encoderContext);\r\n                //TODO: could it be simpler by something like JsonWriter?\r\n                writer.writeName(dummyWriter.getDocument().asDocument().get(dummyId).asString().getValue());\r\n                valueCodec.encode(writer, entry.getValue(), encoderContext);\r\n            }\r\n            dummyWriter.writeEndDocument();\r\n        }\r\n        writer.writeEndDocument();\r\n    }\r\n\r\n    @Override\r\n    public Map&lt;K, T&gt; decode(final BsonReader reader, final DecoderContext context) {\r\n        reader.readStartDocument();\r\n        Map&lt;K, T&gt; map = getInstance();\r\n        while (reader.readBsonType() != BsonType.END_OF_DOCUMENT) {\r\n            //TODO: what if the key is not a String aka not wrapped in double quotes?\r\n            var nameReader = new JsonReader(&quot;{\\&quot;key:\\&quot;:\\&quot;&quot; + reader.readName() + &quot;\\&quot;}&quot;);\r\n            nameReader.readStartDocument();\r\n            nameReader.readBsonType();\r\n            if (reader.getCurrentBsonType() == BsonType.NULL) {\r\n                map.put(keyCodec.decode(nameReader, context), null);\r\n                reader.readNull();\r\n            } else {\r\n                map.put(keyCodec.decode(nameReader, context), valueCodec.decode(reader, context));\r\n            }\r\n            nameReader.readEndDocument();\r\n        }\r\n        reader.readEndDocument();\r\n        return map;\r\n    }\r\n\r\n    @Override\r\n    public Class&lt;Map&lt;K, T&gt;&gt; getEncoderClass() {\r\n        return encoderClass;\r\n    }\r\n\r\n    private Map&lt;K, T&gt; getInstance() {\r\n        if (encoderClass.isInterface()) {\r\n            return new HashMap&lt;&gt;();\r\n        }\r\n        try {\r\n            return encoderClass.getDeclaredConstructor().newInstance();\r\n        } catch (final Exception e) {\r\n            throw new CodecConfigurationException(e.getMessage(), e);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n**PROVIDER:**\r\n```java\r\nimport org.bson.BsonReader;\r\nimport org.bson.BsonType;\r\nimport org.bson.BsonWriter;\r\nimport org.bson.codecs.Codec;\r\nimport org.bson.codecs.DecoderContext;\r\nimport org.bson.codecs.EncoderContext;\r\nimport org.bson.codecs.configuration.CodecConfigurationException;\r\nimport org.bson.codecs.pojo.PropertyCodecProvider;\r\nimport org.bson.codecs.pojo.PropertyCodecRegistry;\r\nimport org.bson.codecs.pojo.TypeWithTypeParameters;\r\n\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\n\r\npublic class MapCodecProvider implements PropertyCodecProvider {\r\n\r\n    @Override\r\n    @SuppressWarnings({&quot;rawtypes&quot;, &quot;unchecked&quot;})\r\n    public &lt;T&gt; Codec&lt;T&gt; get(final TypeWithTypeParameters&lt;T&gt; type, final PropertyCodecRegistry registry) {\r\n        if (Map.class.isAssignableFrom(type.getType()) &amp;&amp; type.getTypeParameters().size() == 2) {\r\n            return new berlin.yuna.royaltanks.config.db.MapCodec(type.getType(), registry.get(type.getTypeParameters().get(0)), registry.get(type.getTypeParameters().get(1)));\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    private static class MapCodec&lt;T&gt; implements Codec&lt;Map&lt;String, T&gt;&gt; {\r\n        private final Class&lt;Map&lt;String, T&gt;&gt; encoderClass;\r\n        private final Codec&lt;T&gt; codec;\r\n\r\n        MapCodec(final Class&lt;Map&lt;String, T&gt;&gt; encoderClass, final Codec&lt;T&gt; codec) {\r\n            this.encoderClass = encoderClass;\r\n            this.codec = codec;\r\n        }\r\n\r\n        @Override\r\n        public void encode(final BsonWriter writer, final Map&lt;String, T&gt; map, final EncoderContext encoderContext) {\r\n            writer.writeStartDocument();\r\n            for (final Map.Entry&lt;String, T&gt; entry : map.entrySet()) {\r\n                writer.writeName(entry.getKey());\r\n                if (entry.getValue() == null) {\r\n                    writer.writeNull();\r\n                } else {\r\n                    codec.encode(writer, entry.getValue(), encoderContext);\r\n                }\r\n            }\r\n            writer.writeEndDocument();\r\n        }\r\n\r\n        @Override\r\n        public Map&lt;String, T&gt; decode(final BsonReader reader, final DecoderContext context) {\r\n            reader.readStartDocument();\r\n            Map&lt;String, T&gt; map = getInstance();\r\n            while (reader.readBsonType() != BsonType.END_OF_DOCUMENT) {\r\n                if (reader.getCurrentBsonType() == BsonType.NULL) {\r\n                    map.put(reader.readName(), null);\r\n                    reader.readNull();\r\n                } else {\r\n                    map.put(reader.readName(), codec.decode(reader, context));\r\n                }\r\n            }\r\n            reader.readEndDocument();\r\n            return map;\r\n        }\r\n\r\n        @Override\r\n        public Class&lt;Map&lt;String, T&gt;&gt; getEncoderClass() {\r\n            return encoderClass;\r\n        }\r\n\r\n        private Map&lt;String, T&gt; getInstance() {\r\n            if (encoderClass.isInterface()) {\r\n                return new HashMap&lt;&gt;();\r\n            }\r\n            try {\r\n                return encoderClass.getDeclaredConstructor().newInstance();\r\n            } catch (final Exception e) {\r\n                throw new CodecConfigurationException(e.getMessage(), e);\r\n            }\r\n        }\r\n    }\r\n}\r\n```","title":"MongoDb Map&lt;K, V&gt; codec - Maps MUST have string keys FIX","body":"<p>So I created the following hack, since my debug time and patience is really limited and I want to continue working instead of endless debugging others code</p>\n<p><strong>CODEC:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.bson.BsonDocument;\nimport org.bson.BsonDocumentWriter;\nimport org.bson.BsonReader;\nimport org.bson.BsonType;\nimport org.bson.BsonWriter;\nimport org.bson.codecs.Codec;\nimport org.bson.codecs.DecoderContext;\nimport org.bson.codecs.EncoderContext;\nimport org.bson.codecs.configuration.CodecConfigurationException;\nimport org.bson.json.JsonReader;\n\nimport java.util.HashMap;\nimport java.util.Map;\nimport java.util.UUID;\n\npublic class MapCodec&lt;K, T&gt; implements Codec&lt;Map&lt;K, T&gt;&gt; {\n    private final Class&lt;Map&lt;K, T&gt;&gt; encoderClass;\n    private final Codec&lt;K&gt; keyCodec;\n    private final Codec&lt;T&gt; valueCodec;\n\n    MapCodec(final Class&lt;Map&lt;K, T&gt;&gt; encoderClass, final Codec&lt;K&gt; keyCodec, final Codec&lt;T&gt; valueCodec) {\n        this.encoderClass = encoderClass;\n        this.keyCodec = keyCodec;\n        this.valueCodec = valueCodec;\n    }\n\n    @Override\n    public void encode(final BsonWriter writer, final Map&lt;K, T&gt; map, final EncoderContext encoderContext) {\n        try (var dummyWriter = new BsonDocumentWriter(new BsonDocument())) {\n            dummyWriter.writeStartDocument();\n            writer.writeStartDocument();\n            for (final Map.Entry&lt;K, T&gt; entry : map.entrySet()) {\n                var dummyId = UUID.randomUUID().toString();\n                dummyWriter.writeName(dummyId);\n                keyCodec.encode(dummyWriter, entry.getKey(), encoderContext);\n                //TODO: could it be simpler by something like JsonWriter?\n                writer.writeName(dummyWriter.getDocument().asDocument().get(dummyId).asString().getValue());\n                valueCodec.encode(writer, entry.getValue(), encoderContext);\n            }\n            dummyWriter.writeEndDocument();\n        }\n        writer.writeEndDocument();\n    }\n\n    @Override\n    public Map&lt;K, T&gt; decode(final BsonReader reader, final DecoderContext context) {\n        reader.readStartDocument();\n        Map&lt;K, T&gt; map = getInstance();\n        while (reader.readBsonType() != BsonType.END_OF_DOCUMENT) {\n            //TODO: what if the key is not a String aka not wrapped in double quotes?\n            var nameReader = new JsonReader(&quot;{\\&quot;key:\\&quot;:\\&quot;&quot; + reader.readName() + &quot;\\&quot;}&quot;);\n            nameReader.readStartDocument();\n            nameReader.readBsonType();\n            if (reader.getCurrentBsonType() == BsonType.NULL) {\n                map.put(keyCodec.decode(nameReader, context), null);\n                reader.readNull();\n            } else {\n                map.put(keyCodec.decode(nameReader, context), valueCodec.decode(reader, context));\n            }\n            nameReader.readEndDocument();\n        }\n        reader.readEndDocument();\n        return map;\n    }\n\n    @Override\n    public Class&lt;Map&lt;K, T&gt;&gt; getEncoderClass() {\n        return encoderClass;\n    }\n\n    private Map&lt;K, T&gt; getInstance() {\n        if (encoderClass.isInterface()) {\n            return new HashMap&lt;&gt;();\n        }\n        try {\n            return encoderClass.getDeclaredConstructor().newInstance();\n        } catch (final Exception e) {\n            throw new CodecConfigurationException(e.getMessage(), e);\n        }\n    }\n}\n</code></pre>\n<p><strong>PROVIDER:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.bson.BsonReader;\nimport org.bson.BsonType;\nimport org.bson.BsonWriter;\nimport org.bson.codecs.Codec;\nimport org.bson.codecs.DecoderContext;\nimport org.bson.codecs.EncoderContext;\nimport org.bson.codecs.configuration.CodecConfigurationException;\nimport org.bson.codecs.pojo.PropertyCodecProvider;\nimport org.bson.codecs.pojo.PropertyCodecRegistry;\nimport org.bson.codecs.pojo.TypeWithTypeParameters;\n\nimport java.util.HashMap;\nimport java.util.Map;\n\npublic class MapCodecProvider implements PropertyCodecProvider {\n\n    @Override\n    @SuppressWarnings({&quot;rawtypes&quot;, &quot;unchecked&quot;})\n    public &lt;T&gt; Codec&lt;T&gt; get(final TypeWithTypeParameters&lt;T&gt; type, final PropertyCodecRegistry registry) {\n        if (Map.class.isAssignableFrom(type.getType()) &amp;&amp; type.getTypeParameters().size() == 2) {\n            return new berlin.yuna.royaltanks.config.db.MapCodec(type.getType(), registry.get(type.getTypeParameters().get(0)), registry.get(type.getTypeParameters().get(1)));\n        } else {\n            return null;\n        }\n    }\n\n    private static class MapCodec&lt;T&gt; implements Codec&lt;Map&lt;String, T&gt;&gt; {\n        private final Class&lt;Map&lt;String, T&gt;&gt; encoderClass;\n        private final Codec&lt;T&gt; codec;\n\n        MapCodec(final Class&lt;Map&lt;String, T&gt;&gt; encoderClass, final Codec&lt;T&gt; codec) {\n            this.encoderClass = encoderClass;\n            this.codec = codec;\n        }\n\n        @Override\n        public void encode(final BsonWriter writer, final Map&lt;String, T&gt; map, final EncoderContext encoderContext) {\n            writer.writeStartDocument();\n            for (final Map.Entry&lt;String, T&gt; entry : map.entrySet()) {\n                writer.writeName(entry.getKey());\n                if (entry.getValue() == null) {\n                    writer.writeNull();\n                } else {\n                    codec.encode(writer, entry.getValue(), encoderContext);\n                }\n            }\n            writer.writeEndDocument();\n        }\n\n        @Override\n        public Map&lt;String, T&gt; decode(final BsonReader reader, final DecoderContext context) {\n            reader.readStartDocument();\n            Map&lt;String, T&gt; map = getInstance();\n            while (reader.readBsonType() != BsonType.END_OF_DOCUMENT) {\n                if (reader.getCurrentBsonType() == BsonType.NULL) {\n                    map.put(reader.readName(), null);\n                    reader.readNull();\n                } else {\n                    map.put(reader.readName(), codec.decode(reader, context));\n                }\n            }\n            reader.readEndDocument();\n            return map;\n        }\n\n        @Override\n        public Class&lt;Map&lt;String, T&gt;&gt; getEncoderClass() {\n            return encoderClass;\n        }\n\n        private Map&lt;String, T&gt; getInstance() {\n            if (encoderClass.isInterface()) {\n                return new HashMap&lt;&gt;();\n            }\n            try {\n                return encoderClass.getDeclaredConstructor().newInstance();\n            } catch (final Exception e) {\n                throw new CodecConfigurationException(e.getMessage(), e);\n            }\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":21074717,"reputation":1,"user_id":15490217,"display_name":"benjamon"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663303446,"creation_date":1663303446,"answer_id":73739948,"question_id":67849754,"body_markdown":"For others running into this problem, I&#39;ve made a public repository based on your solution with added handling of codecs that don&#39;t accept BsonString using PropertyEditors: https://github.com/benjamonnguyen/mongodb-bson-codec\r\n\r\nGrain of salt, this is my first public &quot;contribution&quot; to the community... all criticisms welcome!","title":"MongoDb Map&lt;K, V&gt; codec - Maps MUST have string keys FIX","body":"<p>For others running into this problem, I've made a public repository based on your solution with added handling of codecs that don't accept BsonString using PropertyEditors: <a href=\"https://github.com/benjamonnguyen/mongodb-bson-codec\" rel=\"nofollow noreferrer\">https://github.com/benjamonnguyen/mongodb-bson-codec</a></p>\n<p>Grain of salt, this is my first public &quot;contribution&quot; to the community... all criticisms welcome!</p>\n"}],"owner":{"account_id":4843120,"reputation":731,"user_id":3907616,"display_name":"Yuna Braska"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1638,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1695190221,"creation_date":1622897191,"question_id":67849754,"body_markdown":"While using the mongo DB driver, got a really silly exception `Maps MUST have string keys, found class Enum instead`. \r\nI have found many issues like [this][1] where others failed like me.\r\n\r\n\r\nI can&#39;t really understand why the mondoDb driver does not encode the known key types like the values.\r\nMy wish would be that the mongoDB driver fixes this issue and also that the Frameworks like Quarkus could just provide a fix for that like me.\r\nFor all others, feel free to contribute and cleanup my hack as I am sure It can be done better.\r\n\r\n\r\n  [1]: https://jira.mongodb.org/browse/JAVA-2620","title":"MongoDb Map&lt;K, V&gt; codec - Maps MUST have string keys FIX","body":"<p>While using the mongo DB driver, got a really silly exception <code>Maps MUST have string keys, found class Enum instead</code>.\nI have found many issues like <a href=\"https://jira.mongodb.org/browse/JAVA-2620\" rel=\"nofollow noreferrer\">this</a> where others failed like me.</p>\n<p>I can't really understand why the mondoDb driver does not encode the known key types like the values.\nMy wish would be that the mongoDB driver fixes this issue and also that the Frameworks like Quarkus could just provide a fix for that like me.\nFor all others, feel free to contribute and cleanup my hack as I am sure It can be done better.</p>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":2161358,"reputation":42669,"user_id":1915448,"accept_rate":96,"display_name":"g00glen00b"},"score":0,"creation_date":1695191511,"post_id":77139676,"comment_id":135989256,"body_markdown":"Can you show us how you use the `MyDTO` class? I created a new Spring Boot project and copied your code and it works fine for me. So I guess something is different about the way you construct or use `MyDTO`.","body":"Can you show us how you use the <code>MyDTO</code> class? I created a new Spring Boot project and copied your code and it works fine for me. So I guess something is different about the way you construct or use <code>MyDTO</code>."},{"owner":{"account_id":2161358,"reputation":42669,"user_id":1915448,"accept_rate":96,"display_name":"g00glen00b"},"score":1,"creation_date":1695191544,"post_id":77139676,"comment_id":135989262,"body_markdown":"@时间只会一直走 You do realize that Hexy is using the top voted answer on that question right?","body":"@时间只会一直走 You do realize that Hexy is using the top voted answer on that question right?"},{"owner":{"account_id":2597640,"reputation":836,"user_id":2250934,"accept_rate":64,"display_name":"Hexy"},"score":0,"creation_date":1695223446,"post_id":77139676,"comment_id":135996517,"body_markdown":"Do you mind sharing your repo where this is working?","body":"Do you mind sharing your repo where this is working?"}],"owner":{"account_id":2597640,"reputation":836,"user_id":2250934,"accept_rate":64,"display_name":"Hexy"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":103,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1695189871,"creation_date":1695189871,"question_id":77139676,"body_markdown":"I have a Springboot application.\r\n\r\nI am trying to convert a string in application.properties file to a Map in a DTO.\r\n\r\nMy application.properties looks like this:\r\n```\r\n...\r\ncom.myapp.someMap={&#39;key1&#39;:&#39;value1&#39;,&#39;key2&#39;:&#39;value2&#39;}\r\n```\r\n\r\nDTO.java\r\n```\r\nclass MyDTO {\r\n\r\n...\r\n@Value(&quot;#{${com.myapp.someMap}}&quot;)\r\nMap&lt;String, String&gt; someMap = new HashMap&lt;&gt;();\r\n\r\n}\r\n```\r\n\r\nI get this error when the Application tries to start\r\n\r\n```\r\nFailed to bind properties under &#39;com.myapp.someMap&#39; to java.util.Map&lt;java.lang.String, java.lang.String&gt;:\r\n\r\n\r\n    Reason: org.springframework.core.convert.ConverterNotFoundException: No converter found capable of converting from type [java.lang.String] to type [java.util.Map&lt;java.lang.String, java.lang.String&gt;]\r\n\r\n```","title":"No converter found capable of converting from type [java.lang.String] to type [java.util.Map&lt;java.lang.String, java.lang.String&gt;]","body":"<p>I have a Springboot application.</p>\n<p>I am trying to convert a string in application.properties file to a Map in a DTO.</p>\n<p>My application.properties looks like this:</p>\n<pre><code>...\ncom.myapp.someMap={'key1':'value1','key2':'value2'}\n</code></pre>\n<p>DTO.java</p>\n<pre><code>class MyDTO {\n\n...\n@Value(&quot;#{${com.myapp.someMap}}&quot;)\nMap&lt;String, String&gt; someMap = new HashMap&lt;&gt;();\n\n}\n</code></pre>\n<p>I get this error when the Application tries to start</p>\n<pre><code>Failed to bind properties under 'com.myapp.someMap' to java.util.Map&lt;java.lang.String, java.lang.String&gt;:\n\n\n    Reason: org.springframework.core.convert.ConverterNotFoundException: No converter found capable of converting from type [java.lang.String] to type [java.util.Map&lt;java.lang.String, java.lang.String&gt;]\n\n</code></pre>\n"},{"tags":["java","apache-poi","footer","poi-hssf","hssfworkbook"],"comments":[{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":0,"creation_date":1695119997,"post_id":77133458,"comment_id":135978693,"body_markdown":"Each Excel header and/or footer has three columns (left, center and right). Have you tried [HeaderFooter.setLeft](https://poi.apache.org/apidocs/dev/org/apache/poi/hssf/usermodel/HeaderFooter.html#setLeft-java.lang.String-), `.setCenter` and `.setRight`? If you tried, please show the used code and please tell us what problems you got.","body":"Each Excel header and/or footer has three columns (left, center and right). Have you tried <a href=\"https://poi.apache.org/apidocs/dev/org/apache/poi/hssf/usermodel/HeaderFooter.html#setLeft-java.lang.String-\" rel=\"nofollow noreferrer\">HeaderFooter.setLeft</a>, <code>.setCenter</code> and <code>.setRight</code>? If you tried, please show the used code and please tell us what problems you got."},{"owner":{"account_id":10082595,"reputation":49,"user_id":7452363,"display_name":"Shabrina Nurdiani S"},"score":0,"creation_date":1695177005,"post_id":77133458,"comment_id":135987929,"body_markdown":"hello @AxelRichter , I think the Excel footer just have one line, so I can&#39;t make a signature column in footer","body":"hello @AxelRichter , I think the Excel footer just have one line, so I can&#39;t make a signature column in footer"},{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":0,"creation_date":1695180276,"post_id":77133458,"comment_id":135988151,"body_markdown":"Seems you are not clear with the terms column and line in your question. And you seems not to know what Excel sheet footers are. Excel sheet footers consist of **one** line having **three** columns. Texts in columns may have line breaks but not really single table rows. How would you create your needed sheet footer using Excel GUI? Looks as if your screen shot shows Excel sheet cells but not a sheet footer.","body":"Seems you are not clear with the terms column and line in your question. And you seems not to know what Excel sheet footers are. Excel sheet footers consist of <b>one</b> line having <b>three</b> columns. Texts in columns may have line breaks but not really single table rows. How would you create your needed sheet footer using Excel GUI? Looks as if your screen shot shows Excel sheet cells but not a sheet footer."},{"owner":{"account_id":10082595,"reputation":49,"user_id":7452363,"display_name":"Shabrina Nurdiani S"},"score":0,"creation_date":1695184954,"post_id":77133458,"comment_id":135988508,"body_markdown":"hi @AxelRichter the first picture is column in the body, but I want move it into the footer, but I dont know how. If it possible when I try to create multiple lines in footer?","body":"hi @AxelRichter the first picture is column in the body, but I want move it into the footer, but I dont know how. If it possible when I try to create multiple lines in footer?"}],"answers":[{"tags":[],"owner":{"account_id":1096470,"reputation":26066,"user_id":1089967,"accept_rate":59,"display_name":"lance-java"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695119230,"creation_date":1695119230,"answer_id":77133748,"question_id":77133458,"body_markdown":"Have you considered using [JXLS](https://jxls.sourceforge.net/getting_started.html)?\r\n\r\nJXLS is a small wrapper around [Apache POI](https://poi.apache.org/) that allows you to define a template using Microsoft Excel instead of doing everything in java code. You have small fragments of markup (for loops, value placeholders etc) in your template but the majority of the presentation logic (eg colours, bold, headers, footers, images etc) can be done in excel.","title":"How to create column in footer of Excel using HSSFFooter in Java","body":"<p>Have you considered using <a href=\"https://jxls.sourceforge.net/getting_started.html\" rel=\"nofollow noreferrer\">JXLS</a>?</p>\n<p>JXLS is a small wrapper around <a href=\"https://poi.apache.org/\" rel=\"nofollow noreferrer\">Apache POI</a> that allows you to define a template using Microsoft Excel instead of doing everything in java code. You have small fragments of markup (for loops, value placeholders etc) in your template but the majority of the presentation logic (eg colours, bold, headers, footers, images etc) can be done in excel.</p>\n"},{"tags":[],"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1695189516,"creation_date":1695189516,"answer_id":77139638,"question_id":77133458,"body_markdown":"Excel sheet footers consist of one line having three columns - left, center and right. Texts in columns may have line breaks but not really single table rows. That is how Excel provides sheet footers and even using Excel GUI one cannot really put table rows into a sheet footer.\r\n\r\nSo what one can create using Excel and comes closest to your requirement is the following:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nCode:\r\n\r\n    import java.io.FileOutputStream ;\r\n    \r\n    import org.apache.poi.ss.usermodel.*;\r\n    import org.apache.poi.xssf.usermodel.*;\r\n    import org.apache.poi.hssf.usermodel.*;\r\n    import org.apache.poi.hssf.usermodel.HeaderFooter;\r\n    \r\n    public class CreateExcelFooterText {\r\n    \r\n     public static void main(String[] args) throws Exception {\r\n    \r\n      StringBuilder strFooterLeftText = new StringBuilder();\r\n      strFooterLeftText.append(&quot;\\n&quot;);\r\n      strFooterLeftText.append(HeaderFooter.date());\r\n      strFooterLeftText.append(&quot;\\n&quot;);\r\n      strFooterLeftText.append(&quot;Dibuat oleh&quot;);\r\n      \r\n      StringBuilder strFooterCenterText = new StringBuilder();\r\n      strFooterCenterText.append(HeaderFooter.startBold());\r\n      strFooterCenterText.append(&quot;KOLOM PROSES PENIJURNALAN&quot;);\r\n      strFooterCenterText.append(HeaderFooter.endBold());\r\n      strFooterCenterText.append(&quot;\\n&quot;);\r\n      strFooterCenterText.append(HeaderFooter.date());\r\n      strFooterCenterText.append(&quot;\\n&quot;);\r\n      strFooterCenterText.append(&quot;Diperiksa oleh&quot;);\r\n      \r\n      StringBuilder strFooterRightText = new StringBuilder();\r\n      strFooterRightText.append(&quot;\\n&quot;);\r\n      strFooterRightText.append(HeaderFooter.date());\r\n      strFooterRightText.append(&quot;\\n&quot;);\r\n      strFooterRightText.append(&quot;Diahkan oleh&quot;);\r\n    \r\n      //Workbook workbook = new XSSFWorkbook(); String filePath = &quot;./CreateExcelFooterText.xlsx&quot;;\r\n      Workbook workbook = new HSSFWorkbook(); String filePath = &quot;./CreateExcelFooterText.xls&quot;;\r\n    \r\n      Sheet sheet = workbook.createSheet();\r\n      sheet.createRow(0).createCell(0).setCellValue(&quot;A1&quot;);\r\n    \r\n      //we need more margin for the footer than the default\r\n      sheet.setMargin(Sheet.BottomMargin, 1.5); //bottom page margin 1.5 inch\r\n      sheet.setMargin(Sheet.FooterMargin, .75); //footer marginb 0.75 inch\r\n      //from version 5.2.3\r\n      // sheet.setMargin(PageMargin.BOTTOM, 1.5); //bottom page margin 1.5 inch\r\n      // sheet.setMargin(PageMargin.FOOTER, .75); //footer marginb 0.75 inch\r\n      Footer footer = sheet.getFooter();\r\n      footer.setLeft(strFooterLeftText.toString());  \r\n      footer.setCenter(strFooterCenterText.toString());\r\n      footer.setRight(strFooterRightText.toString());\r\n    \r\n      FileOutputStream out = new FileOutputStream(filePath);\r\n      workbook.write(out);\r\n      out.close();\r\n      workbook.close();\r\n    \r\n     }\r\n    }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/52q0r.png","title":"How to create column in footer of Excel using HSSFFooter in Java","body":"<p>Excel sheet footers consist of one line having three columns - left, center and right. Texts in columns may have line breaks but not really single table rows. That is how Excel provides sheet footers and even using Excel GUI one cannot really put table rows into a sheet footer.</p>\n<p>So what one can create using Excel and comes closest to your requirement is the following:</p>\n<p><a href=\"https://i.stack.imgur.com/52q0r.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/52q0r.png\" alt=\"enter image description here\" /></a></p>\n<p>Code:</p>\n<pre><code>import java.io.FileOutputStream ;\n\nimport org.apache.poi.ss.usermodel.*;\nimport org.apache.poi.xssf.usermodel.*;\nimport org.apache.poi.hssf.usermodel.*;\nimport org.apache.poi.hssf.usermodel.HeaderFooter;\n\npublic class CreateExcelFooterText {\n\n public static void main(String[] args) throws Exception {\n\n  StringBuilder strFooterLeftText = new StringBuilder();\n  strFooterLeftText.append(&quot;\\n&quot;);\n  strFooterLeftText.append(HeaderFooter.date());\n  strFooterLeftText.append(&quot;\\n&quot;);\n  strFooterLeftText.append(&quot;Dibuat oleh&quot;);\n  \n  StringBuilder strFooterCenterText = new StringBuilder();\n  strFooterCenterText.append(HeaderFooter.startBold());\n  strFooterCenterText.append(&quot;KOLOM PROSES PENIJURNALAN&quot;);\n  strFooterCenterText.append(HeaderFooter.endBold());\n  strFooterCenterText.append(&quot;\\n&quot;);\n  strFooterCenterText.append(HeaderFooter.date());\n  strFooterCenterText.append(&quot;\\n&quot;);\n  strFooterCenterText.append(&quot;Diperiksa oleh&quot;);\n  \n  StringBuilder strFooterRightText = new StringBuilder();\n  strFooterRightText.append(&quot;\\n&quot;);\n  strFooterRightText.append(HeaderFooter.date());\n  strFooterRightText.append(&quot;\\n&quot;);\n  strFooterRightText.append(&quot;Diahkan oleh&quot;);\n\n  //Workbook workbook = new XSSFWorkbook(); String filePath = &quot;./CreateExcelFooterText.xlsx&quot;;\n  Workbook workbook = new HSSFWorkbook(); String filePath = &quot;./CreateExcelFooterText.xls&quot;;\n\n  Sheet sheet = workbook.createSheet();\n  sheet.createRow(0).createCell(0).setCellValue(&quot;A1&quot;);\n\n  //we need more margin for the footer than the default\n  sheet.setMargin(Sheet.BottomMargin, 1.5); //bottom page margin 1.5 inch\n  sheet.setMargin(Sheet.FooterMargin, .75); //footer marginb 0.75 inch\n  //from version 5.2.3\n  // sheet.setMargin(PageMargin.BOTTOM, 1.5); //bottom page margin 1.5 inch\n  // sheet.setMargin(PageMargin.FOOTER, .75); //footer marginb 0.75 inch\n  Footer footer = sheet.getFooter();\n  footer.setLeft(strFooterLeftText.toString());  \n  footer.setCenter(strFooterCenterText.toString());\n  footer.setRight(strFooterRightText.toString());\n\n  FileOutputStream out = new FileOutputStream(filePath);\n  workbook.write(out);\n  out.close();\n  workbook.close();\n\n }\n}\n</code></pre>\n"}],"owner":{"account_id":10082595,"reputation":49,"user_id":7452363,"display_name":"Shabrina Nurdiani S"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":73,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77139638,"answer_count":2,"score":1,"last_activity_date":1695189516,"creation_date":1695116827,"question_id":77133458,"body_markdown":"I will create an Excel file using footer. In this case, the contents of the footer are three columns for signature. Is it possible to create a column in footer using .apache.poi.hssf.usermodel.HSSFFooter?\r\n\r\nThe footer I will create is like this picture [![enter image description here][1]][1]\r\n\r\n\r\nBut when I try to using the HSSFFooter, I only contain one line. Like this pict \r\n[![enter image description here][2]][2]\r\n\r\nthe first line is replace by the second line that I declare, \r\n\r\nHere&#39;s my code :\r\n\r\n \r\n\r\n    HSSFFooter rowSignature0 = sheet0.getFooter();\r\n    rowSignature0.setCenter(&quot;KOLOM PROSES PENJURNALAN&quot;);\r\n\r\n    // tanggal\r\n    String now = new SimpleDateFormat(&quot;dd/MM/yyyy&quot;).format(new Date());\r\n    counter+=1;\r\n    rowSignature0.setLeft(now);\r\n    rowSignature0.setCenter(now);\r\n    rowSignature0.setRight(now);\r\n\r\n  [1]: https://i.stack.imgur.com/6KFLS.png\r\n  [2]: https://i.stack.imgur.com/NG2on.png\r\n\r\nSo, do you have any idea to create this footer?","title":"How to create column in footer of Excel using HSSFFooter in Java","body":"<p>I will create an Excel file using footer. In this case, the contents of the footer are three columns for signature. Is it possible to create a column in footer using .apache.poi.hssf.usermodel.HSSFFooter?</p>\n<p>The footer I will create is like this picture <a href=\"https://i.stack.imgur.com/6KFLS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6KFLS.png\" alt=\"enter image description here\" /></a></p>\n<p>But when I try to using the HSSFFooter, I only contain one line. Like this pict\n<a href=\"https://i.stack.imgur.com/NG2on.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NG2on.png\" alt=\"enter image description here\" /></a></p>\n<p>the first line is replace by the second line that I declare,</p>\n<p>Here's my code :</p>\n<pre><code>HSSFFooter rowSignature0 = sheet0.getFooter();\nrowSignature0.setCenter(&quot;KOLOM PROSES PENJURNALAN&quot;);\n\n// tanggal\nString now = new SimpleDateFormat(&quot;dd/MM/yyyy&quot;).format(new Date());\ncounter+=1;\nrowSignature0.setLeft(now);\nrowSignature0.setCenter(now);\nrowSignature0.setRight(now);\n</code></pre>\n<p>So, do you have any idea to create this footer?</p>\n"},{"tags":["java","netbeans","text-files","filewriter"],"comments":[{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1695189701,"post_id":77139613,"comment_id":135989002,"body_markdown":"It is only writing the file _if (!file.exists())_.","body":"It is only writing the file <i>if (!file.exists())</i>."},{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":0,"creation_date":1695190224,"post_id":77139613,"comment_id":135989070,"body_markdown":"BTW there is no need to call `createNewFile` - the file will be created by `FileWriter` if needed (and possible/allowed)  **And** you must work on correct indentation of code - this would eventually even make the error easier to find/see (most IDEs have a format function to do that for you...)","body":"BTW there is no need to call <code>createNewFile</code> - the file will be created by <code>FileWriter</code> if needed (and possible/allowed)  <b>And</b> you must work on correct indentation of code - this would eventually even make the error easier to find/see (most IDEs have a format function to do that for you...)"},{"owner":{"account_id":29488069,"reputation":1,"user_id":22597538,"display_name":"rudy5699"},"score":0,"creation_date":1695191753,"post_id":77139613,"comment_id":135989298,"body_markdown":"Yeah I thought so too, I don&#39;t know why bard made me add that, and the indentation is bad cuz I did copy and paste some code snippets, sorry :3","body":"Yeah I thought so too, I don&#39;t know why bard made me add that, and the indentation is bad cuz I did copy and paste some code snippets, sorry :3"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1695198282,"post_id":77139613,"comment_id":135990612,"body_markdown":"Huge amount of redundant boilerplate code there. Also, how are you going to use a file that will consist of *one continuous string*?","body":"Huge amount of redundant boilerplate code there. Also, how are you going to use a file that will consist of <i>one continuous string</i>?"},{"owner":{"account_id":29488069,"reputation":1,"user_id":22597538,"display_name":"rudy5699"},"score":0,"creation_date":1695244807,"post_id":77139613,"comment_id":136000388,"body_markdown":"The purpose of using the text file is as an alternative to MySQL, Oracle etc, because im not allowed to use them. It&#39;s a university project. So I want to use text files to store usernames and passwords of users who will register and then login using those credentials","body":"The purpose of using the text file is as an alternative to MySQL, Oracle etc, because im not allowed to use them. It&#39;s a university project. So I want to use text files to store usernames and passwords of users who will register and then login using those credentials"}],"owner":{"account_id":29488069,"reputation":1,"user_id":22597538,"display_name":"rudy5699"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695189343,"creation_date":1695189181,"question_id":77139613,"body_markdown":"I am using netbeans windows 11, I just want to save input entered to a text file without it getting overwritten ideally. It works fine on the first run, text file gets created, input gets written to the file, but any entries after that don&#39;t get saved and neither does the file get overwritten with the new entry.\r\n\r\n```private void RegisterActionPerformed(java.awt.event.ActionEvent evt) {                                         \r\n        if (!newUsername.getText().equals(&quot;&quot;) &amp;&amp; (!newPass.getText().equals(&quot;&quot;))){\r\n            // Check to see if the Username.txt file already exists\r\n            File file = new File(&quot;Username.txt&quot;);\r\n            if (!file.exists()) {\r\n        try {\r\n            file.createNewFile();\r\n        } catch (IOException e) {\r\n            // Handle the exception\r\n            e.printStackTrace();\r\n        }\r\n         FileWriter fileWriter = null;\r\n    try {\r\n        fileWriter = new FileWriter(file, true);\r\n\r\n        // Write the newUsername variable information to the text file\r\n        fileWriter.write(newUsername.getText());\r\n    } catch (IOException e) {\r\n        // Handle the exception\r\n        e.printStackTrace();\r\n    } finally {\r\n        // Close the FileWriter object\r\n        if (fileWriter != null) {\r\n            try {\r\n                fileWriter.close();\r\n            } catch (IOException e) {\r\n                // Handle the exception\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    }\r\n    }\r\n            \r\n            \r\n            new Splash().setVisible(true);\r\n            System.out.println(System.getProperty(&quot;user.dir&quot;));\r\n            dispose();\r\n        }else {\r\n            feedback.setText(&quot;Fields can&#39;t be blank&quot;);\r\n        }\r\n        \r\n        \r\n    }\r\n```\r\n\r\nI didn&#39;t try anything else I mean I asked google Bard, it said it might be a file permissions issue but that doesnt make sense because like I said it does work fine on the first run, file gets created gets written as expected, so can&#39;t be a  file permissions issue i think.","title":"Input won&#39;t save to a text file after the first run, won&#39;t append or overwrite after the first run","body":"<p>I am using netbeans windows 11, I just want to save input entered to a text file without it getting overwritten ideally. It works fine on the first run, text file gets created, input gets written to the file, but any entries after that don't get saved and neither does the file get overwritten with the new entry.</p>\n<pre><code>        if (!newUsername.getText().equals(&quot;&quot;) &amp;&amp; (!newPass.getText().equals(&quot;&quot;))){\n            // Check to see if the Username.txt file already exists\n            File file = new File(&quot;Username.txt&quot;);\n            if (!file.exists()) {\n        try {\n            file.createNewFile();\n        } catch (IOException e) {\n            // Handle the exception\n            e.printStackTrace();\n        }\n         FileWriter fileWriter = null;\n    try {\n        fileWriter = new FileWriter(file, true);\n\n        // Write the newUsername variable information to the text file\n        fileWriter.write(newUsername.getText());\n    } catch (IOException e) {\n        // Handle the exception\n        e.printStackTrace();\n    } finally {\n        // Close the FileWriter object\n        if (fileWriter != null) {\n            try {\n                fileWriter.close();\n            } catch (IOException e) {\n                // Handle the exception\n                e.printStackTrace();\n            }\n        }\n    }\n    }\n            \n            \n            new Splash().setVisible(true);\n            System.out.println(System.getProperty(&quot;user.dir&quot;));\n            dispose();\n        }else {\n            feedback.setText(&quot;Fields can't be blank&quot;);\n        }\n        \n        \n    }\n</code></pre>\n<p>I didn't try anything else I mean I asked google Bard, it said it might be a file permissions issue but that doesnt make sense because like I said it does work fine on the first run, file gets created gets written as expected, so can't be a  file permissions issue i think.</p>\n"},{"tags":["java","react-native"],"owner":{"account_id":26158177,"reputation":21,"user_id":19845155,"display_name":"Atharva Solaskar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":13,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1695188358,"creation_date":1695188358,"question_id":77139558,"body_markdown":"Is it Possible to Run Java Bluetooth Adapter Functionality on React native Application for Android? if yes then how?\r\n\r\nI am Not getting Any idea that how can i create an environment to Run JAVA Application on React I searched for multile solutions but nothing worked properly.","title":"Is it Possible to Run Java Bluetooth Adapter Functionality on React native Application for Android? if yes then how?","body":"<p>Is it Possible to Run Java Bluetooth Adapter Functionality on React native Application for Android? if yes then how?</p>\n<p>I am Not getting Any idea that how can i create an environment to Run JAVA Application on React I searched for multile solutions but nothing worked properly.</p>\n"},{"tags":["java","android","google-play","in-app-billing","android-billing"],"answers":[{"tags":[],"owner":{"account_id":9772337,"reputation":2264,"user_id":7243748,"accept_rate":45,"display_name":"stavros.3p"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695187621,"creation_date":1682856973,"answer_id":76141220,"question_id":76141204,"body_markdown":"Ok so You have to make below change:\r\n\r\n\r\n    List&lt;BillingFlowParams.ProductDetailsParams&gt; productDetailsParamsList = ImmutableList.from(\r\n                BillingFlowParams.ProductDetailsParams.newBuilder()\r\n                        .setOfferToken(productDetails.getSubscriptionOfferDetails().get(0).getOfferToken())\r\n                        .setProductDetails(productDetails)\r\n                        .build()\r\n        );\r\n\r\nI added this line:\r\n\r\n     .setOfferToken(productDetails.getSubscriptionOfferDetails().get(0).getOfferToken())","title":"Android Play Store Subscription Billing doesn&#39;t trigger any action","body":"<p>Ok so You have to make below change:</p>\n<pre><code>List&lt;BillingFlowParams.ProductDetailsParams&gt; productDetailsParamsList = ImmutableList.from(\n            BillingFlowParams.ProductDetailsParams.newBuilder()\n                    .setOfferToken(productDetails.getSubscriptionOfferDetails().get(0).getOfferToken())\n                    .setProductDetails(productDetails)\n                    .build()\n    );\n</code></pre>\n<p>I added this line:</p>\n<pre><code> .setOfferToken(productDetails.getSubscriptionOfferDetails().get(0).getOfferToken())\n</code></pre>\n"},{"tags":[],"owner":{"account_id":91888,"reputation":6445,"user_id":252080,"accept_rate":60,"display_name":"Sterling"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691009072,"creation_date":1691009072,"answer_id":76823394,"question_id":76141204,"body_markdown":"For anyone else who&#39;s running into this issue: The OP had the right idea, but didn&#39;t really explain it - and their solution doesn&#39;t help if you don&#39;t have an offer on your subscription.\r\n\r\nThe root issue seems to be that `BillingFlowParams.ProductDetailsParams.Builder` actually _hangs_ if you don&#39;t supply an `offerToken` for a subscription. This is pretty egregious, IMHO, but fortunately it&#39;s also pretty easy to get around:\r\n```\r\nval productBuilder = BillingFlowParams.ProductDetailsParams.newBuilder()\r\n    .setProductDetails(productDetails)\r\n    .setOfferToken(token)\r\n```\r\n...where `token` is a `String` that&#39;s set to a real offer token from `BillingClient` (using code like the OP&#39;s) if you have one, or **an empty string (`&quot;&quot;`) if you don&#39;t**.\r\n\r\nThe important bit being that you _must_ call `setOfferToken()` with a (non-null) value, or the `Builder` will hang.\r\n\r\n[The official docs][1] say &quot;Calling this method is not needed for One-time products&quot;, which _could_ be taken to mean that it **is** needed for subscription products - but that&#39;s not explicitly stated. Like I said, a pretty egregious fail in API design (and documentation).\r\n\r\n\r\n  [1]: https://developer.android.com/reference/com/android/billingclient/api/BillingFlowParams.ProductDetailsParams.Builder#setOfferToken(java.lang.String)","title":"Android Play Store Subscription Billing doesn&#39;t trigger any action","body":"<p>For anyone else who's running into this issue: The OP had the right idea, but didn't really explain it - and their solution doesn't help if you don't have an offer on your subscription.</p>\n<p>The root issue seems to be that <code>BillingFlowParams.ProductDetailsParams.Builder</code> actually <em>hangs</em> if you don't supply an <code>offerToken</code> for a subscription. This is pretty egregious, IMHO, but fortunately it's also pretty easy to get around:</p>\n<pre><code>val productBuilder = BillingFlowParams.ProductDetailsParams.newBuilder()\n    .setProductDetails(productDetails)\n    .setOfferToken(token)\n</code></pre>\n<p>...where <code>token</code> is a <code>String</code> that's set to a real offer token from <code>BillingClient</code> (using code like the OP's) if you have one, or <strong>an empty string (<code>&quot;&quot;</code>) if you don't</strong>.</p>\n<p>The important bit being that you <em>must</em> call <code>setOfferToken()</code> with a (non-null) value, or the <code>Builder</code> will hang.</p>\n<p><a href=\"https://developer.android.com/reference/com/android/billingclient/api/BillingFlowParams.ProductDetailsParams.Builder#setOfferToken(java.lang.String)\" rel=\"nofollow noreferrer\">The official docs</a> say &quot;Calling this method is not needed for One-time products&quot;, which <em>could</em> be taken to mean that it <strong>is</strong> needed for subscription products - but that's not explicitly stated. Like I said, a pretty egregious fail in API design (and documentation).</p>\n"}],"owner":{"account_id":9772337,"reputation":2264,"user_id":7243748,"accept_rate":45,"display_name":"stavros.3p"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":175,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1695187621,"creation_date":1682856637,"question_id":76141204,"body_markdown":"I have successfully implemented the in-app purchase flow, now I am trying to switch to the subscription model but something is wrong in the makePurchase() method, it doesn&#39;t open the window for the user to make the payment. \r\n\r\n    private void createPurchaseFlow(String productID, PostTaskListener&lt;String&gt; callback)\r\n    {\r\n        Print.e(&quot;createPurchaseFlow productID: &quot;+ productID);\r\n        PurchasesUpdatedListener purchasesUpdatedListener = new PurchasesUpdatedListener()\r\n        {\r\n            @Override\r\n            public void onPurchasesUpdated(@NonNull BillingResult billingResult,\r\n                                           List&lt;Purchase&gt; purchases)\r\n            {\r\n                if (billingResult.getResponseCode() == BillingClient.BillingResponseCode.OK\r\n                        &amp;&amp; purchases != null)\r\n                {\r\n                    for (Purchase purchase : purchases)\r\n                    {\r\n                        consumePurchase(purchase,productID,callback);\r\n                    }\r\n                }\r\n                else if (billingResult.getResponseCode() ==\r\n                        BillingClient.BillingResponseCode.USER_CANCELED)\r\n                {\r\n                    callback.onPostTask(&quot;User Canceled&quot;);\r\n                    Print.e(&quot;onPurchasesUpdated: Purchase Canceled&quot;);\r\n                }\r\n                else\r\n                {\r\n                    callback.onPostTask(&quot;Purchase Failed&quot;);\r\n                    Print.e(&quot;onPurchasesUpdated: Error&quot;);\r\n                }\r\n            }\r\n        };\r\n\r\n        billingClient = BillingClient.newBuilder(activity)\r\n                .setListener(purchasesUpdatedListener)\r\n                .enablePendingPurchases()\r\n                .build();\r\n\r\n        billingClient.startConnection(new BillingClientStateListener()\r\n        {\r\n            @Override\r\n            public void onBillingSetupFinished(@NonNull BillingResult billingResult)\r\n            {\r\n                if (billingResult.getResponseCode() ==\r\n                        BillingClient.BillingResponseCode.OK)\r\n                {\r\n                    Print.e(&quot;OnBillingSetupFinish connected&quot;);\r\n                    queryProduct(productID,callback);\r\n                }\r\n                else\r\n                {\r\n                    Print.e(&quot;OnBillingSetupFinish failed&quot;);\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onBillingServiceDisconnected()\r\n            {\r\n                // Try to restart the connection on the next request to\r\n                // Google Play by calling the startConnection() method.\r\n                Print.e(&quot;onBillingServiceDisconnected&quot;);\r\n                callback.onPostTask(&quot;Billing Service Disconnected&quot;);\r\n            }\r\n        });\r\n    }\r\n\r\n    private void queryProduct(String subscriptionID, PostTaskListener&lt;String&gt; callback)\r\n    {\r\n        QueryProductDetailsParams queryProductDetailsParams =\r\n                QueryProductDetailsParams.newBuilder()\r\n                        .setProductList(\r\n                                ImmutableList.from(\r\n                                        QueryProductDetailsParams.Product.newBuilder()\r\n                                                .setProductId(subscriptionID)\r\n                                                .setProductType(\r\n                                                        BillingClient.ProductType.SUBS)\r\n                                                .build()))\r\n                        .build();\r\n\r\n        billingClient.queryProductDetailsAsync(\r\n                queryProductDetailsParams,\r\n                new ProductDetailsResponseListener()\r\n                {\r\n                    @Override\r\n                    public void onProductDetailsResponse(@NonNull BillingResult billingResult,\r\n                                                         @NonNull List&lt;ProductDetails&gt; productDetailsList)\r\n                    {\r\n                        if (!productDetailsList.isEmpty())\r\n                        {\r\n                            Print.e(&quot;onProductDetailsResponse&quot;);\r\n                            ProductDetails productDetails = productDetailsList.get(0);\r\n                            makePurchase(productDetails);\r\n                        }\r\n                        else\r\n                        {\r\n                            callback.onPostTask(null);\r\n                            Print.e(&quot;onProductDetailsResponse: No subscriptions&quot;);\r\n                        }\r\n                    }\r\n                }\r\n        );\r\n    }\r\n\r\n    private void makePurchase(ProductDetails productDetails)\r\n    {\r\n        Print.e(&quot;makePurchase: &quot; + productDetails.getName());\r\n\r\n        List&lt;BillingFlowParams.ProductDetailsParams&gt; productDetailsParamsList = ImmutableList.from(\r\n                BillingFlowParams.ProductDetailsParams.newBuilder()\r\n                        .setProductDetails(productDetails)\r\n                        .build()\r\n        );\r\n\r\n        BillingFlowParams billingFlowParams =\r\n                BillingFlowParams.newBuilder()\r\n                        .setProductDetailsParamsList(productDetailsParamsList)\r\n                        .build();\r\n\r\n        BillingResult billingResult = billingClient.launchBillingFlow(activity, billingFlowParams);\r\n\r\n\r\n        Print.e(&quot;billingResult: &quot; + billingResult.getResponseCode() +\r\n                &quot; getDebugMessage: &quot; +  billingResult.getDebugMessage() +\r\n                &quot; toString: &quot; +  billingResult.toString());\r\n    }\r\n\r\nIt doesn&#39;t print the messages after this line\r\n\r\n    BillingResult billingResult = billingClient.launchBillingFlow(activity, billingFlowParams);\r\n\r\nso I placed breakpoints and the code run until this code:\r\n\r\n            List&lt;BillingFlowParams.ProductDetailsParams&gt; productDetailsParamsList = ImmutableList.from(\r\n                BillingFlowParams.ProductDetailsParams.newBuilder()\r\n                        .setProductDetails(productDetails)\r\n                        .build()\r\n        );\r\n\r\nand then nothing happens, no errors, zero logs. What is going on?","title":"Android Play Store Subscription Billing doesn&#39;t trigger any action","body":"<p>I have successfully implemented the in-app purchase flow, now I am trying to switch to the subscription model but something is wrong in the makePurchase() method, it doesn't open the window for the user to make the payment.</p>\n<pre><code>private void createPurchaseFlow(String productID, PostTaskListener&lt;String&gt; callback)\n{\n    Print.e(&quot;createPurchaseFlow productID: &quot;+ productID);\n    PurchasesUpdatedListener purchasesUpdatedListener = new PurchasesUpdatedListener()\n    {\n        @Override\n        public void onPurchasesUpdated(@NonNull BillingResult billingResult,\n                                       List&lt;Purchase&gt; purchases)\n        {\n            if (billingResult.getResponseCode() == BillingClient.BillingResponseCode.OK\n                    &amp;&amp; purchases != null)\n            {\n                for (Purchase purchase : purchases)\n                {\n                    consumePurchase(purchase,productID,callback);\n                }\n            }\n            else if (billingResult.getResponseCode() ==\n                    BillingClient.BillingResponseCode.USER_CANCELED)\n            {\n                callback.onPostTask(&quot;User Canceled&quot;);\n                Print.e(&quot;onPurchasesUpdated: Purchase Canceled&quot;);\n            }\n            else\n            {\n                callback.onPostTask(&quot;Purchase Failed&quot;);\n                Print.e(&quot;onPurchasesUpdated: Error&quot;);\n            }\n        }\n    };\n\n    billingClient = BillingClient.newBuilder(activity)\n            .setListener(purchasesUpdatedListener)\n            .enablePendingPurchases()\n            .build();\n\n    billingClient.startConnection(new BillingClientStateListener()\n    {\n        @Override\n        public void onBillingSetupFinished(@NonNull BillingResult billingResult)\n        {\n            if (billingResult.getResponseCode() ==\n                    BillingClient.BillingResponseCode.OK)\n            {\n                Print.e(&quot;OnBillingSetupFinish connected&quot;);\n                queryProduct(productID,callback);\n            }\n            else\n            {\n                Print.e(&quot;OnBillingSetupFinish failed&quot;);\n            }\n        }\n\n        @Override\n        public void onBillingServiceDisconnected()\n        {\n            // Try to restart the connection on the next request to\n            // Google Play by calling the startConnection() method.\n            Print.e(&quot;onBillingServiceDisconnected&quot;);\n            callback.onPostTask(&quot;Billing Service Disconnected&quot;);\n        }\n    });\n}\n\nprivate void queryProduct(String subscriptionID, PostTaskListener&lt;String&gt; callback)\n{\n    QueryProductDetailsParams queryProductDetailsParams =\n            QueryProductDetailsParams.newBuilder()\n                    .setProductList(\n                            ImmutableList.from(\n                                    QueryProductDetailsParams.Product.newBuilder()\n                                            .setProductId(subscriptionID)\n                                            .setProductType(\n                                                    BillingClient.ProductType.SUBS)\n                                            .build()))\n                    .build();\n\n    billingClient.queryProductDetailsAsync(\n            queryProductDetailsParams,\n            new ProductDetailsResponseListener()\n            {\n                @Override\n                public void onProductDetailsResponse(@NonNull BillingResult billingResult,\n                                                     @NonNull List&lt;ProductDetails&gt; productDetailsList)\n                {\n                    if (!productDetailsList.isEmpty())\n                    {\n                        Print.e(&quot;onProductDetailsResponse&quot;);\n                        ProductDetails productDetails = productDetailsList.get(0);\n                        makePurchase(productDetails);\n                    }\n                    else\n                    {\n                        callback.onPostTask(null);\n                        Print.e(&quot;onProductDetailsResponse: No subscriptions&quot;);\n                    }\n                }\n            }\n    );\n}\n\nprivate void makePurchase(ProductDetails productDetails)\n{\n    Print.e(&quot;makePurchase: &quot; + productDetails.getName());\n\n    List&lt;BillingFlowParams.ProductDetailsParams&gt; productDetailsParamsList = ImmutableList.from(\n            BillingFlowParams.ProductDetailsParams.newBuilder()\n                    .setProductDetails(productDetails)\n                    .build()\n    );\n\n    BillingFlowParams billingFlowParams =\n            BillingFlowParams.newBuilder()\n                    .setProductDetailsParamsList(productDetailsParamsList)\n                    .build();\n\n    BillingResult billingResult = billingClient.launchBillingFlow(activity, billingFlowParams);\n\n\n    Print.e(&quot;billingResult: &quot; + billingResult.getResponseCode() +\n            &quot; getDebugMessage: &quot; +  billingResult.getDebugMessage() +\n            &quot; toString: &quot; +  billingResult.toString());\n}\n</code></pre>\n<p>It doesn't print the messages after this line</p>\n<pre><code>BillingResult billingResult = billingClient.launchBillingFlow(activity, billingFlowParams);\n</code></pre>\n<p>so I placed breakpoints and the code run until this code:</p>\n<pre><code>        List&lt;BillingFlowParams.ProductDetailsParams&gt; productDetailsParamsList = ImmutableList.from(\n            BillingFlowParams.ProductDetailsParams.newBuilder()\n                    .setProductDetails(productDetails)\n                    .build()\n    );\n</code></pre>\n<p>and then nothing happens, no errors, zero logs. What is going on?</p>\n"},{"tags":["java","sliding-tile-puzzle"],"comments":[{"owner":{"account_id":44195,"reputation":269033,"user_id":129570,"accept_rate":79,"display_name":"Oliver Charlesworth"},"score":2,"creation_date":1451766315,"post_id":34570344,"comment_id":56885235,"body_markdown":"What did you learn when you stepped through this with a debugger?","body":"What did you learn when you stepped through this with a debugger?"},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1451766852,"post_id":34570344,"comment_id":56885408,"body_markdown":"Define &quot;odd parity&quot;. There are 2 moves that are required to solve that puzzle. Is that not &quot;even parity&quot;?","body":"Define &quot;odd parity&quot;. There are 2 moves that are required to solve that puzzle. Is that not &quot;even parity&quot;?"},{"owner":{"account_id":180181,"reputation":76380,"user_id":413337,"accept_rate":64,"display_name":"Codo"},"score":2,"creation_date":1451767055,"post_id":34570344,"comment_id":56885460,"body_markdown":"If I&#39;m not mistaken, the position of the empty square is also relevant. It needs to go into the parity somehow.","body":"If I&#39;m not mistaken, the position of the empty square is also relevant. It needs to go into the parity somehow."},{"owner":{"account_id":2663825,"reputation":21876,"user_id":2302862,"accept_rate":100,"display_name":"Siguza"},"score":0,"creation_date":1451767075,"post_id":34570344,"comment_id":56885467,"body_markdown":"@cricket_007 OP is referring to &quot;amount of choosable pairs where the left value is greater than the right one, and neither are zero&quot;.","body":"@cricket_007 OP is referring to &quot;amount of choosable pairs where the left value is greater than the right one, and neither are zero&quot;."},{"owner":{"account_id":2663825,"reputation":21876,"user_id":2302862,"accept_rate":100,"display_name":"Siguza"},"score":0,"creation_date":1451767142,"post_id":34570344,"comment_id":56885482,"body_markdown":"@Codo Could it be the row the empty square is in...?","body":"@Codo Could it be the row the empty square is in...?"},{"owner":{"account_id":2413237,"reputation":31164,"user_id":2107876,"accept_rate":88,"display_name":"laune"},"score":0,"creation_date":1451767178,"post_id":34570344,"comment_id":56885493,"body_markdown":"Rearrange the squares so that the free position is in the lower right hand corner, and then compute even/odd for the permutation.","body":"Rearrange the squares so that the free position is in the lower right hand corner, and then compute even/odd for the permutation."},{"owner":{"display_name":"user4918296"},"score":0,"creation_date":1451767481,"post_id":34570344,"comment_id":56885582,"body_markdown":"@laune It does not matter where the blank square is located.","body":"@laune It does not matter where the blank square is located."},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1451767697,"post_id":34570344,"comment_id":56885648,"body_markdown":"Would making the parity be 1 if it is not in the bottom right help?","body":"Would making the parity be 1 if it is not in the bottom right help?"},{"owner":{"display_name":"user4918296"},"score":0,"creation_date":1451769559,"post_id":34570344,"comment_id":56886183,"body_markdown":"@cricket_007 It is not about manipulating the parity. The parity is calculated and its value is used to determine if the puzzle can be solved.","body":"@cricket_007 It is not about manipulating the parity. The parity is calculated and its value is used to determine if the puzzle can be solved."},{"owner":{"account_id":2413237,"reputation":31164,"user_id":2107876,"accept_rate":88,"display_name":"laune"},"score":0,"creation_date":1451807798,"post_id":34570344,"comment_id":56893572,"body_markdown":"@nautical You contradict yourself since &quot;these conditions&quot; you found and your code both take heed of the location of the blank square. Note that my &quot;rearrange&quot; merely eliminates the need to consider its position in the even/odd computation, which the rearrangement does not affect.","body":"@nautical You contradict yourself since &quot;these conditions&quot; you found and your code both take heed of the location of the blank square. Note that my &quot;rearrange&quot; merely eliminates the need to consider its position in the even/odd computation, which the rearrangement does not affect."},{"owner":{"display_name":"user4918296"},"score":0,"creation_date":1451827736,"post_id":34570344,"comment_id":56898715,"body_markdown":"@laune Poorly phrased on my part. What I mean is, that the algorithm is not about a possible way to solve it or making any rearrangements. The algorithm must only determine if it is solvable at all. In order to determine this the blank tile may be in any position that could be reached from its initial position; by legal moves only. The algorithm must yield the same result for any of those legal positions without the need of rearranging the tiles. So to render my previous statement more precisely: The applicability of the algorithm does not depend on the tile being in a particular position.","body":"@laune Poorly phrased on my part. What I mean is, that the algorithm is not about a possible way to solve it or making any rearrangements. The algorithm must only determine if it is solvable at all. In order to determine this the blank tile may be in any position that could be reached from its initial position; by legal moves only. The algorithm must yield the same result for any of those legal positions without the need of rearranging the tiles. So to render my previous statement more precisely: The applicability of the algorithm does not depend on the tile being in a particular position."}],"answers":[{"tags":[],"owner":{"display_name":"user4918296"},"down_vote_count":0,"up_vote_count":14,"is_accepted":true,"score":14,"last_activity_date":1572921880,"creation_date":1451767283,"answer_id":34570524,"question_id":34570344,"body_markdown":"[I found these][1] conditions that need to be checked for any `N x N` puzzle in order to determine if it is solvable.\r\n\r\nApparently, since your blank tile is on an even row (counting from the bottom), parity is odd and your grid-width is even, this puzzle is solvable.\r\n\r\nThis is the algorithm that checks according to the rules in the link:\r\n\r\n    public boolean isSolvable(int[] puzzle)\r\n    {\r\n        int parity = 0;\r\n        int gridWidth = (int) Math.sqrt(puzzle.length);\r\n        int row = 0; // the current row we are on\r\n        int blankRow = 0; // the row with the blank tile\r\n    \r\n        for (int i = 0; i &lt; puzzle.length; i++)\r\n        {\r\n        \tif (i % gridWidth == 0) { // advance to next row\r\n        \t\trow++;\r\n        \t}\r\n        \tif (puzzle[i] == 0) { // the blank tile\r\n        \t\tblankRow = row; // save the row on which encountered\r\n                continue;\r\n        \t}\r\n            for (int j = i + 1; j &lt; puzzle.length; j++)\r\n            {\r\n                if (puzzle[i] &gt; puzzle[j] &amp;&amp; puzzle[j] != 0)\r\n                {\r\n                    parity++;\r\n                }\r\n            }\r\n        }\r\n    \r\n        if (gridWidth % 2 == 0) { // even grid\r\n        \tif (blankRow % 2 == 0) { // blank on odd row; counting from bottom\r\n        \t\treturn parity % 2 == 0;\r\n        \t} else { // blank on even row; counting from bottom\r\n        \t\treturn parity % 2 != 0;\r\n        \t}\r\n        } else { // odd grid\r\n            return parity % 2 == 0;\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://www.cs.bham.ac.uk/~mdr/teaching/modules04/java2/TilesSolvability.html\r\n","title":"Check if 15 puzzle is solvable","body":"<p><a href=\"https://www.cs.bham.ac.uk/~mdr/teaching/modules04/java2/TilesSolvability.html\" rel=\"nofollow noreferrer\">I found these</a> conditions that need to be checked for any <code>N x N</code> puzzle in order to determine if it is solvable.</p>\n\n<p>Apparently, since your blank tile is on an even row (counting from the bottom), parity is odd and your grid-width is even, this puzzle is solvable.</p>\n\n<p>This is the algorithm that checks according to the rules in the link:</p>\n\n<pre><code>public boolean isSolvable(int[] puzzle)\n{\n    int parity = 0;\n    int gridWidth = (int) Math.sqrt(puzzle.length);\n    int row = 0; // the current row we are on\n    int blankRow = 0; // the row with the blank tile\n\n    for (int i = 0; i &lt; puzzle.length; i++)\n    {\n        if (i % gridWidth == 0) { // advance to next row\n            row++;\n        }\n        if (puzzle[i] == 0) { // the blank tile\n            blankRow = row; // save the row on which encountered\n            continue;\n        }\n        for (int j = i + 1; j &lt; puzzle.length; j++)\n        {\n            if (puzzle[i] &gt; puzzle[j] &amp;&amp; puzzle[j] != 0)\n            {\n                parity++;\n            }\n        }\n    }\n\n    if (gridWidth % 2 == 0) { // even grid\n        if (blankRow % 2 == 0) { // blank on odd row; counting from bottom\n            return parity % 2 == 0;\n        } else { // blank on even row; counting from bottom\n            return parity % 2 != 0;\n        }\n    } else { // odd grid\n        return parity % 2 == 0;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8229005,"reputation":223,"user_id":6190320,"display_name":"Nnnes"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691260071,"creation_date":1691260071,"answer_id":76843002,"question_id":34570344,"body_markdown":"The existing answer should work but does not address the question\r\n\r\n&gt; What am i doing wrong?\r\n\r\nYou have the right idea. The parity of the permutation of the 15 numbered tiles should indicate solubility (if even) or insolubility (if odd) regardless of the position of the &quot;blank&quot;/`0` tile - see [1].\r\n\r\nThe problem is that the solved state of the puzzle should be numbered such that you can trace a continuous path from low to high, e.g.\r\n```\r\n 4  3  2  1\r\n 5  6  7  8\r\n12 11 10  9\r\n13 14 15  0\r\n```\r\nThis makes it more obvious why the position of the blank tile is unimportant - it can be moved along the path from beginning to end without changing the order of the other tiles.\r\n\r\nAfter your two moves, the puzzle will look like this:\r\n```\r\n 4  3  2  1\r\n 5  6  7  8\r\n12 11  0 10\r\n13 14 15  9\r\n```\r\nwhich has 6 inversions (only the `9` is out of place) and so even parity.\r\n\r\nYou&#39;d have to either change how the puzzle is displayed in two dimensions or change the order in which you check tiles to count inversions. This solution should extend to any `M`x`N` rectangular grid where `M &gt;= 2` and `N &gt;= 2`, and any position of the blank tile.\r\n\r\n[1] Archer, Aaron F. (1999), &quot;A modern treatment of the 15 puzzle&quot;, The American Mathematical Monthly, 106 (9): 793–799","title":"Check if 15 puzzle is solvable","body":"<p>The existing answer should work but does not address the question</p>\n<blockquote>\n<p>What am i doing wrong?</p>\n</blockquote>\n<p>You have the right idea. The parity of the permutation of the 15 numbered tiles should indicate solubility (if even) or insolubility (if odd) regardless of the position of the &quot;blank&quot;/<code>0</code> tile - see [1].</p>\n<p>The problem is that the solved state of the puzzle should be numbered such that you can trace a continuous path from low to high, e.g.</p>\n<pre><code> 4  3  2  1\n 5  6  7  8\n12 11 10  9\n13 14 15  0\n</code></pre>\n<p>This makes it more obvious why the position of the blank tile is unimportant - it can be moved along the path from beginning to end without changing the order of the other tiles.</p>\n<p>After your two moves, the puzzle will look like this:</p>\n<pre><code> 4  3  2  1\n 5  6  7  8\n12 11  0 10\n13 14 15  9\n</code></pre>\n<p>which has 6 inversions (only the <code>9</code> is out of place) and so even parity.</p>\n<p>You'd have to either change how the puzzle is displayed in two dimensions or change the order in which you check tiles to count inversions. This solution should extend to any <code>M</code>x<code>N</code> rectangular grid where <code>M &gt;= 2</code> and <code>N &gt;= 2</code>, and any position of the blank tile.</p>\n<p>[1] Archer, Aaron F. (1999), &quot;A modern treatment of the 15 puzzle&quot;, The American Mathematical Monthly, 106 (9): 793–799</p>\n"},{"tags":[],"owner":{"account_id":1449978,"reputation":31,"user_id":1367205,"display_name":"rmarquez"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695187196,"creation_date":1695187196,"answer_id":77139475,"question_id":34570344,"body_markdown":"&gt; What am I doing wrong?\r\n\r\nFor your regular 15-puzzle, you have to arrange the tiles such that the blank space is in the lower right corner. For example, in your case,\r\n\r\n     1   2    3   4   \r\n     5   6    7   8   \r\n    13   9   10  11  \r\n    14  15   12 \r\n\r\n(I removed the `0` tile.)\r\n\r\nIn this way, you can check the parity of this permutation:\r\n\r\n    1   2   3   4   5   6    7   8   13   9   10  11  14  15   12\r\n\r\nwhich is not the same one you are using. This permutation is even, thus solvable, as you may check. In this way, your intuition is right, it should be even parity. \r\n\r\nThis is true for square puzzles of any dimension. Consider, for example,  a game not solvable of only 3 tiles (2 by 2): \r\n\r\n    2 \r\n    3  1\r\n\r\nYou may say the permutation `2 3 1` is even (which is true). But it is not the right permutation for \r\n\r\n    2  1\r\n    3\r\n\r\nwhich is `2 1 3` and this, in fact, is odd, and so not solvable.","title":"Check if 15 puzzle is solvable","body":"<blockquote>\n<p>What am I doing wrong?</p>\n</blockquote>\n<p>For your regular 15-puzzle, you have to arrange the tiles such that the blank space is in the lower right corner. For example, in your case,</p>\n<pre><code> 1   2    3   4   \n 5   6    7   8   \n13   9   10  11  \n14  15   12 \n</code></pre>\n<p>(I removed the <code>0</code> tile.)</p>\n<p>In this way, you can check the parity of this permutation:</p>\n<pre><code>1   2   3   4   5   6    7   8   13   9   10  11  14  15   12\n</code></pre>\n<p>which is not the same one you are using. This permutation is even, thus solvable, as you may check. In this way, your intuition is right, it should be even parity.</p>\n<p>This is true for square puzzles of any dimension. Consider, for example,  a game not solvable of only 3 tiles (2 by 2):</p>\n<pre><code>2 \n3  1\n</code></pre>\n<p>You may say the permutation <code>2 3 1</code> is even (which is true). But it is not the right permutation for</p>\n<pre><code>2  1\n3\n</code></pre>\n<p>which is <code>2 1 3</code> and this, in fact, is odd, and so not solvable.</p>\n"}],"owner":{"account_id":2978728,"reputation":349,"user_id":2529214,"accept_rate":50,"display_name":"Eknoes"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12429,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":34570524,"answer_count":3,"score":5,"last_activity_date":1695187196,"creation_date":1451766153,"question_id":34570344,"body_markdown":"I&#39;m trying to test whether a 15 puzzle is solvable. I wrote a method which is working for most puzzles, but for some not.\r\n\r\nFor example this puzzle can be solved with two moves (0, 11), (0, 12)\r\n\r\n    1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 0, 11, 13, 14, 15, 12\r\n\r\nHere is the puzzle better visualized:\r\n\r\n    1\t2\t3\t4\t\r\n    \r\n    5\t6\t7\t8\t\r\n    \r\n    9\t10\t0\t11\t\r\n    \r\n    13\t14\t15\t12\t\r\n\r\n\r\n\r\n   But the puzzle has a odd parity of 3 and so should not be solvable.\r\n\r\n    public boolean isSolvable(int[] puzzle)\r\n\t{\r\n\t\tint parity = 0;\r\n\r\n\t\tfor (int i = 0; i &lt; puzzle.length; i++)\r\n\t\t{\r\n\t\t\tfor (int j = i + 1; j &lt; puzzle.length; j++)\r\n\t\t\t{\r\n\t\t\t\tif (puzzle[i] &gt; puzzle[j] &amp;&amp; puzzle[i] != 0 &amp;&amp; puzzle[j] != 0)\r\n\t\t\t\t{\r\n\t\t\t\t\tparity++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (parity % 2 == 0)\r\n\t\t{\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\nWhat am i doing wrong?","title":"Check if 15 puzzle is solvable","body":"<p>I'm trying to test whether a 15 puzzle is solvable. I wrote a method which is working for most puzzles, but for some not.</p>\n\n<p>For example this puzzle can be solved with two moves (0, 11), (0, 12)</p>\n\n<pre><code>1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 0, 11, 13, 14, 15, 12\n</code></pre>\n\n<p>Here is the puzzle better visualized:</p>\n\n<pre><code>1   2   3   4   \n\n5   6   7   8   \n\n9   10  0   11  \n\n13  14  15  12  \n</code></pre>\n\n<p>But the puzzle has a odd parity of 3 and so should not be solvable.</p>\n\n<pre><code>public boolean isSolvable(int[] puzzle)\n{\n    int parity = 0;\n\n    for (int i = 0; i &lt; puzzle.length; i++)\n    {\n        for (int j = i + 1; j &lt; puzzle.length; j++)\n        {\n            if (puzzle[i] &gt; puzzle[j] &amp;&amp; puzzle[i] != 0 &amp;&amp; puzzle[j] != 0)\n            {\n                parity++;\n            }\n        }\n    }\n\n    if (parity % 2 == 0)\n    {\n        return true;\n    }\n    return false;\n}\n</code></pre>\n\n<p>What am i doing wrong?</p>\n"},{"tags":["java","spring","jpa","spring-el"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1695114637,"post_id":77133167,"comment_id":135977618,"body_markdown":"Please add the complete stacktrace","body":"Please add the complete stacktrace"}],"answers":[{"tags":[],"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1695147634,"creation_date":1695114723,"answer_id":77133203,"question_id":77133167,"body_markdown":"I think the problem is in query syntax:\r\n\r\nYou should have next one `@Query` body\r\n\r\n    @Query(&quot;select distinct product from Product product where product.name in (:#{#filters.names})&quot;)\r\n    Set&lt;Product&gt; findAllForFilter(Filters filters);\r\n\r\n**Update**\r\n\r\nIt should generated something like this:\r\n\r\n    from Product product where product.name in (?, ?…)\r\n\r\nBut I am not sure in it, I need to test it. As solution you also can write the query in this one way:\r\n\r\n    @Query(&quot;select distinct product from Product product where product.name in (:filters)&quot;)\r\n        Set&lt;Product&gt; findAllForFilter(@Param(“filters”) Set&lt;String&gt; filters);\r\n\r\n\r\nAnd when you are going to invoke the method you will pass a Set of strings aka filters, I think it is better than SPEL","title":"SPEL doesn&#39;t work with &#39;in&#39; operator for collections inside an object","body":"<p>I think the problem is in query syntax:</p>\n<p>You should have next one <code>@Query</code> body</p>\n<pre><code>@Query(&quot;select distinct product from Product product where product.name in (:#{#filters.names})&quot;)\nSet&lt;Product&gt; findAllForFilter(Filters filters);\n</code></pre>\n<p><strong>Update</strong></p>\n<p>It should generated something like this:</p>\n<pre><code>from Product product where product.name in (?, ?…)\n</code></pre>\n<p>But I am not sure in it, I need to test it. As solution you also can write the query in this one way:</p>\n<pre><code>@Query(&quot;select distinct product from Product product where product.name in (:filters)&quot;)\n    Set&lt;Product&gt; findAllForFilter(@Param(“filters”) Set&lt;String&gt; filters);\n</code></pre>\n<p>And when you are going to invoke the method you will pass a Set of strings aka filters, I think it is better than SPEL</p>\n"}],"owner":{"account_id":12166101,"reputation":101,"user_id":8899648,"display_name":"Mitya"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":77133203,"answer_count":1,"score":-2,"last_activity_date":1695187175,"creation_date":1695114461,"question_id":77133167,"body_markdown":"```\r\n@Query(&quot;select distinct product from Product product where :#{#activeFilters.flowerSorts} is null or product.name in :#{#filters.names}&quot;)\r\nSet&lt;Product&gt; findAllForFilter(Filters filters);\r\n```\r\n\r\n```\r\npublic class Filters {\r\n    private Set&lt;String&gt; names;\r\n}\r\n```\r\n[![enter image description here](https://i.stack.imgur.com/aGT0o.png)](https://i.stack.imgur.com/aGT0o.png)\r\n\r\n[![enter image description here](https://i.stack.imgur.com/8DWPr.png)](https://i.stack.imgur.com/8DWPr.png)\r\n\r\n&gt; 2023-09-19 12:02:17.183  WARN 6316 --- [nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.dao.InvalidDataAccessApiUsageException: org.hibernate.hql.internal.ast.QuerySyntaxException: unexpected AST node: {vector} [select distinct product from ...\r\n\r\nHello, I&#39;m trying to execute query with several elements in my collections. However it doesn&#39;t work, but it does with single elements.","title":"SPEL doesn&#39;t work with &#39;in&#39; operator for collections inside an object","body":"<pre><code>@Query(&quot;select distinct product from Product product where :#{#activeFilters.flowerSorts} is null or product.name in :#{#filters.names}&quot;)\nSet&lt;Product&gt; findAllForFilter(Filters filters);\n</code></pre>\n<pre><code>public class Filters {\n    private Set&lt;String&gt; names;\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/aGT0o.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/aGT0o.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/8DWPr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8DWPr.png\" alt=\"enter image description here\" /></a></p>\n<blockquote>\n<p>2023-09-19 12:02:17.183  WARN 6316 --- [nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.dao.InvalidDataAccessApiUsageException: org.hibernate.hql.internal.ast.QuerySyntaxException: unexpected AST node: {vector} [select distinct product from ...</p>\n</blockquote>\n<p>Hello, I'm trying to execute query with several elements in my collections. However it doesn't work, but it does with single elements.</p>\n"},{"tags":["java","intellij-idea"],"comments":[{"owner":{"account_id":4706948,"reputation":101,"user_id":3808734,"display_name":"Philip Schiff"},"score":7,"creation_date":1501288510,"post_id":44265670,"comment_id":77729438,"body_markdown":"I also googled it; google also links to SO...","body":"I also googled it; google also links to SO..."},{"owner":{"account_id":2468343,"reputation":1927,"user_id":2150879,"accept_rate":77,"display_name":"Fiddle Freak"},"score":0,"creation_date":1619052226,"post_id":44265670,"comment_id":118790937,"body_markdown":"@ayip I just did, and google pulled this up as the first search results to lead me here.","body":"@ayip I just did, and google pulled this up as the first search results to lead me here."},{"owner":{"account_id":4570718,"reputation":196,"user_id":3710484,"display_name":"Merijn Vogel"},"score":0,"creation_date":1631700643,"post_id":44265670,"comment_id":122291402,"body_markdown":"Just a cent: For one reason or another, when opening a project something bad happened inside of IntelliJ (with an error pop-up) and it marked the project as read-only. After removing the .idea-folder and reopening the project all was fine.","body":"Just a cent: For one reason or another, when opening a project something bad happened inside of IntelliJ (with an error pop-up) and it marked the project as read-only. After removing the .idea-folder and reopening the project all was fine."},{"owner":{"account_id":7639415,"reputation":2500,"user_id":5791997,"display_name":"Addis"},"score":0,"creation_date":1683759461,"post_id":44265670,"comment_id":134417726,"body_markdown":"https://stackoverflow.com/questions/72835869/how-to-make-file-writable-on-intellij#answer-72836019","body":"<a href=\"https://stackoverflow.com/questions/72835869/how-to-make-file-writable-on-intellij#answer-72836019\" title=\"how to make file writable on intellij%23answer 72836019\">stackoverflow.com/questions/72835869/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":7257197,"reputation":493,"user_id":5535411,"accept_rate":33,"display_name":"Carlos Bernardes"},"down_vote_count":3,"up_vote_count":43,"is_accepted":false,"score":40,"last_activity_date":1602234853,"creation_date":1496156611,"answer_id":44265763,"question_id":44265670,"body_markdown":"To toggle read-only attribute of a file, open file in the editor, or select it in the Project tool window. Do one of the following:\r\n\r\n* On the main menu, choose `File | File Properties | Make File Read-Only`, or `Make File Writable`.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n* Click the lock icon in the Status bar in the bottom right corner.\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ROB8L.png\r\n  [2]: https://i.stack.imgur.com/nH9NW.png","title":"How to Change Read-Only Status of Files in intellij","body":"<p>To toggle read-only attribute of a file, open file in the editor, or select it in the Project tool window. Do one of the following:</p>\n<ul>\n<li>On the main menu, choose <code>File | File Properties | Make File Read-Only</code>, or <code>Make File Writable</code>.</li>\n</ul>\n<p><a href=\"https://i.stack.imgur.com/ROB8L.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/ROB8L.png\" alt=\"enter image description here\" /></a></p>\n<ul>\n<li>Click the lock icon in the Status bar in the bottom right corner.</li>\n</ul>\n<p><a href=\"https://i.stack.imgur.com/nH9NW.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/nH9NW.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":445887,"reputation":5554,"user_id":838608,"accept_rate":71,"display_name":"H&#229;vard Geithus"},"down_vote_count":0,"up_vote_count":29,"is_accepted":false,"score":29,"last_activity_date":1650527585,"creation_date":1517838821,"answer_id":48624145,"question_id":44265670,"body_markdown":"If IntelliJ IDEA is unable to change the file permissions using **File | File Properties | Make File Writable**, then perhaps another user is owning that file, e.g. root (use this command to verify: `ls -hal /path/to/File.java`)\r\n\r\nIf someone else owns it, for whatever reason, you can change the permissions yourself using the [chown][1] command in the terminal:\r\n\r\n`sudo chown yourusername /path/to/File.java`,\r\n\r\nwhere `yourusername` is the same user that you used to launch Intellij IDEA.\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Chown","title":"How to Change Read-Only Status of Files in intellij","body":"<p>If IntelliJ IDEA is unable to change the file permissions using <strong>File | File Properties | Make File Writable</strong>, then perhaps another user is owning that file, e.g. root (use this command to verify: <code>ls -hal /path/to/File.java</code>)</p>\n<p>If someone else owns it, for whatever reason, you can change the permissions yourself using the <a href=\"https://en.wikipedia.org/wiki/Chown\" rel=\"noreferrer\">chown</a> command in the terminal:</p>\n<p><code>sudo chown yourusername /path/to/File.java</code>,</p>\n<p>where <code>yourusername</code> is the same user that you used to launch Intellij IDEA.</p>\n"},{"tags":[],"owner":{"account_id":5897696,"reputation":10118,"user_id":4642316,"accept_rate":87,"display_name":"Long Nguyen"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1525684588,"creation_date":1525684588,"answer_id":50210752,"question_id":44265670,"body_markdown":"If you&#39;re using Mac. Follow bellow steps:\r\n\r\n 1. Open that file by Finder\r\n 2. Right click and select `Get Info`\r\n 3. In that File Info window, select `Sharing and Permissions`, change `Privilege` as you expected. Before changing, you would remember unlocking your change permission by click on a `Locker Icon` at bottom right.\r\n \r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/YUwmQ.jpg","title":"How to Change Read-Only Status of Files in intellij","body":"<p>If you're using Mac. Follow bellow steps:</p>\n\n<ol>\n<li>Open that file by Finder</li>\n<li>Right click and select <code>Get Info</code></li>\n<li>In that File Info window, select <code>Sharing and Permissions</code>, change <code>Privilege</code> as you expected. Before changing, you would remember unlocking your change permission by click on a <code>Locker Icon</code> at bottom right.</li>\n</ol>\n\n<p><a href=\"https://i.stack.imgur.com/YUwmQ.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/YUwmQ.jpg\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":10612093,"reputation":163,"user_id":7815712,"display_name":"Carlos Murray"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1530165836,"creation_date":1530165836,"answer_id":51075702,"question_id":44265670,"body_markdown":"On your top-left corner in the drop-down where you have Tests,Production,Problems switch/choose from Project or any other directory you&#39;ve choosen  to Packages, you&#39;ll have your packages editable, files in the Project folder are not editable although they end with `.class` extension. ","title":"How to Change Read-Only Status of Files in intellij","body":"<p>On your top-left corner in the drop-down where you have Tests,Production,Problems switch/choose from Project or any other directory you've choosen  to Packages, you'll have your packages editable, files in the Project folder are not editable although they end with <code>.class</code> extension. </p>\n"},{"tags":[],"owner":{"account_id":13402630,"reputation":143,"user_id":9671656,"display_name":"tryingsohard"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1536183563,"creation_date":1536183563,"answer_id":52193720,"question_id":44265670,"body_markdown":"I was just having this issue and I finally figured out where I was going wrong.\r\n\r\nOver an hour of suggestions from Google didn&#39;t help. It turns out I was on files selected in the -out &gt; production &gt; MyPath folder instead of the -src folder in my project sidebar. Selecting the -scr &gt; MyClass file allows me to do what I want to do. ","title":"How to Change Read-Only Status of Files in intellij","body":"<p>I was just having this issue and I finally figured out where I was going wrong.</p>\n\n<p>Over an hour of suggestions from Google didn't help. It turns out I was on files selected in the -out > production > MyPath folder instead of the -src folder in my project sidebar. Selecting the -scr > MyClass file allows me to do what I want to do. </p>\n"},{"tags":[],"owner":{"account_id":9212369,"reputation":686,"user_id":6845008,"accept_rate":100,"display_name":"Dato Gogshelidze"},"down_vote_count":2,"up_vote_count":27,"is_accepted":false,"score":25,"last_activity_date":1614021952,"creation_date":1575902117,"answer_id":59251078,"question_id":44265670,"body_markdown":"For Mac, this definitely works:\r\n\r\n`sudo chmod -R 777 /YourDirectory`\r\n\r\n\r\n","title":"How to Change Read-Only Status of Files in intellij","body":"<p>For Mac, this definitely works:</p>\n<p><code>sudo chmod -R 777 /YourDirectory</code></p>\n"},{"tags":[],"owner":{"account_id":12977465,"reputation":29,"user_id":9381059,"display_name":"Manish Chauhan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1589455356,"creation_date":1589455356,"answer_id":61796140,"question_id":44265670,"body_markdown":"This error appears when the other user has created those files.&lt;br&gt;\r\n1. Right click on the file or folder to be deleted.&lt;br&gt;\r\n2. Choose reveal in folder option.&lt;br&gt;\r\n3. Delete the file and enter the password.&lt;br&gt;\r\n4. Files will be deleted.","title":"How to Change Read-Only Status of Files in intellij","body":"<p>This error appears when the other user has created those files.<br>\n1. Right click on the file or folder to be deleted.<br>\n2. Choose reveal in folder option.<br>\n3. Delete the file and enter the password.<br>\n4. Files will be deleted.</p>\n"},{"tags":[],"owner":{"account_id":18271816,"reputation":537,"user_id":13302453,"display_name":"Harisudha"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1615968638,"creation_date":1615968638,"answer_id":66669151,"question_id":44265670,"body_markdown":"In case of working with SAP Hybris in IntelliJ, the OOTB module files are read-only (file is not writable) when you import the project with Hybris plugins.\r\n\r\n - While you are importing the project (re-import the project If already\r\n   imported) , you will be prompted for Import Settings.\r\n   \r\n - Uncheck the **Import OOTB modules in read-only mode**.  \r\n   \r\n - After importing , you should be able to edit the OOTB files.\r\n\r\n[![Import Settings][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/PS6Wo.png","title":"How to Change Read-Only Status of Files in intellij","body":"<p>In case of working with SAP Hybris in IntelliJ, the OOTB module files are read-only (file is not writable) when you import the project with Hybris plugins.</p>\n<ul>\n<li><p>While you are importing the project (re-import the project If already\nimported) , you will be prompted for Import Settings.</p>\n</li>\n<li><p>Uncheck the <strong>Import OOTB modules in read-only mode</strong>.</p>\n</li>\n<li><p>After importing , you should be able to edit the OOTB files.</p>\n</li>\n</ul>\n<p><a href=\"https://i.stack.imgur.com/PS6Wo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PS6Wo.png\" alt=\"Import Settings\" /></a></p>\n"},{"tags":[],"owner":{"account_id":20062827,"reputation":37,"user_id":14710719,"display_name":"David"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695186395,"creation_date":1695186395,"answer_id":77139416,"question_id":44265670,"body_markdown":"I was struggling with this situation as well. Here is the solution that worked for me.\r\n\r\nWhen you open a file from Intellij do not choose the main folder which contains the src file, but choose the src file itself and open it. This way it let me write my code again.","title":"How to Change Read-Only Status of Files in intellij","body":"<p>I was struggling with this situation as well. Here is the solution that worked for me.</p>\n<p>When you open a file from Intellij do not choose the main folder which contains the src file, but choose the src file itself and open it. This way it let me write my code again.</p>\n"}],"owner":{"account_id":11008877,"reputation":751,"user_id":8086975,"display_name":"Harry Prn Dz"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":242943,"favorite_count":0,"down_vote_count":0,"up_vote_count":75,"answer_count":9,"score":75,"last_activity_date":1695186395,"creation_date":1496156308,"question_id":44265670,"body_markdown":"I have a  Java project and I want to modify it in intellij but I can&#39;t do it because of this **&quot; read-only file &quot;** or **&quot;file is not writable&quot;** , so how I can modify and execute it?\r\n\r\n\r\n[![this is the problem][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/W6buk.png","title":"How to Change Read-Only Status of Files in intellij","body":"<p>I have a  Java project and I want to modify it in intellij but I can't do it because of this <strong>\" read-only file \"</strong> or <strong>\"file is not writable\"</strong> , so how I can modify and execute it?</p>\n\n<p><a href=\"https://i.stack.imgur.com/W6buk.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/W6buk.png\" alt=\"this is the problem\"></a></p>\n"},{"tags":["java","sql","json","resultset"],"comments":[{"owner":{"account_id":21466,"reputation":13649,"user_id":52176,"accept_rate":71,"display_name":"Leif Gruenwoldt"},"score":1,"creation_date":1319143219,"post_id":6514876,"comment_id":9561795,"body_markdown":"A different implementation http://code.google.com/p/bonex-homerunning/source/browse/trunk/+bonex-homerunning/WEB-INF/src/java/com/bonex/sys/util/JSONUtil.java?spec=svn18&amp;r=18","body":"A different implementation <a href=\"http://code.google.com/p/bonex-homerunning/source/browse/trunk/+bonex-homerunning/WEB-INF/src/java/com/bonex/sys/util/JSONUtil.java?spec=svn18&amp;r=18\" rel=\"nofollow noreferrer\">code.google.com/p/bonex-homerunning/source/browse/trunk/&hellip;</a>"},{"owner":{"account_id":906496,"reputation":558,"user_id":1627053,"display_name":"molecular"},"score":1,"creation_date":1367249026,"post_id":6514876,"comment_id":23304013,"body_markdown":"implementation for java.sql.Types.ARRAY didn&#39;t work for me using postgresql (array got put as a String using &quot;{...}&quot;. Ended up changing line\n  &quot;obj.put(column_name, rs.getArray(column_name));&quot;\nto\n  &quot;Array array = rs.getArray(column_name);\n  if ( array != null ) obj.put(column_name, new JSONArray(array.getArray()));&quot;","body":"implementation for java.sql.Types.ARRAY didn&#39;t work for me using postgresql (array got put as a String using &quot;{...}&quot;. Ended up changing line   &quot;obj.put(column_name, rs.getArray(column_name));&quot; to   &quot;Array array = rs.getArray(column_name);   if ( array != null ) obj.put(column_name, new JSONArray(array.getArray()));&quot;"},{"owner":{"account_id":48638,"reputation":5943,"user_id":144578,"accept_rate":79,"display_name":"Sebastiaan van den Broek"},"score":0,"creation_date":1380967010,"post_id":6514876,"comment_id":28404347,"body_markdown":"If performance is a major issue, you shouldn&#39;t use this JSON API but rather use a streaming library that just writes JSON without needing to create memory objects of all the data (where you can look back/find stuff in the tree). That said, I would make sure you actually have a performance issue before doing that.","body":"If performance is a major issue, you shouldn&#39;t use this JSON API but rather use a streaming library that just writes JSON without needing to create memory objects of all the data (where you can look back/find stuff in the tree). That said, I would make sure you actually have a performance issue before doing that."},{"owner":{"account_id":1072085,"reputation":95,"user_id":1071113,"display_name":"polarfish"},"score":3,"creation_date":1423211310,"post_id":6514876,"comment_id":45065209,"body_markdown":"There are an error in your snippet. `java.sql.Types.BIGINT` is 8 bytes size, so it must be read with `rs.getLong()` not `rs.getInt()`","body":"There are an error in your snippet. <code>java.sql.Types.BIGINT</code> is 8 bytes size, so it must be read with <code>rs.getLong()</code> not <code>rs.getInt()</code>"},{"owner":{"account_id":2327485,"reputation":3184,"user_id":4865117,"accept_rate":14,"display_name":"Leon"},"score":0,"creation_date":1524410545,"post_id":6514876,"comment_id":86950691,"body_markdown":"I think all the `if` `else if` are unnecessary.","body":"I think all the <code>if</code> <code>else if</code> are unnecessary."}],"answers":[{"tags":[],"owner":{"account_id":104251,"reputation":52940,"user_id":278836,"accept_rate":88,"display_name":"Andrew White"},"down_vote_count":1,"up_vote_count":25,"is_accepted":true,"score":24,"last_activity_date":1309312211,"creation_date":1309312211,"answer_id":6514960,"question_id":6514876,"body_markdown":"The JIT Compiler is probably going to make this pretty fast since it&#39;s just branches and basic tests. You could probably make it more elegant with a HashMap lookup to a callback but I doubt it would be any faster. As to memory, this is pretty slim as is. \r\n\r\nSomehow I doubt this code is actually a critical bottle neck for memory or performance. Do you have any real reason to try to optimize it?","title":"Most efficient conversion of ResultSet to JSON?","body":"<p>The JIT Compiler is probably going to make this pretty fast since it's just branches and basic tests. You could probably make it more elegant with a HashMap lookup to a callback but I doubt it would be any faster. As to memory, this is pretty slim as is. </p>\n\n<p>Somehow I doubt this code is actually a critical bottle neck for memory or performance. Do you have any real reason to try to optimize it?</p>\n"},{"tags":[],"owner":{"account_id":127189,"reputation":1146,"user_id":324197,"display_name":"oravecz"},"down_vote_count":0,"up_vote_count":27,"is_accepted":false,"score":27,"last_activity_date":1330117109,"creation_date":1315332692,"answer_id":7324263,"question_id":6514876,"body_markdown":"Two things that will make this faster are:\r\n\r\nMove your call to `rsmd.getColumnCount()` out of the while loop. The column count should not vary across rows.\r\n\r\nFor each column type, you end up calling something like this:\r\n\r\n    obj.put(column_name, rs.getInt(column_name));\r\n\r\nIt will be slightly faster to use the column index to retrieve the column value:\r\n\r\n    obj.put(column_name, rs.getInt(i));\r\n","title":"Most efficient conversion of ResultSet to JSON?","body":"<p>Two things that will make this faster are:</p>\n\n<p>Move your call to <code>rsmd.getColumnCount()</code> out of the while loop. The column count should not vary across rows.</p>\n\n<p>For each column type, you end up calling something like this:</p>\n\n<pre><code>obj.put(column_name, rs.getInt(column_name));\n</code></pre>\n\n<p>It will be slightly faster to use the column index to retrieve the column value:</p>\n\n<pre><code>obj.put(column_name, rs.getInt(i));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":433442,"reputation":1046,"user_id":818764,"display_name":"Plap"},"down_vote_count":0,"up_vote_count":40,"is_accepted":false,"score":40,"last_activity_date":1689155593,"creation_date":1321267588,"answer_id":8120442,"question_id":6514876,"body_markdown":"I think there&#39;s a way to use less memory (a fixed and not linear amount depending on data cardinality) but this imply to change the method signature. In fact we may print the Json data directly on an output stream as soon as we fetch them from the ResultSet: the already written data will be garbage collected since we don&#39;t need an array that keeps them in memory. \r\n\r\nI use GSON that accepts type adapters. I wrote a type adapter to convert ResultSet to JsonArray and it looks very like to your code. I&#39;m waiting the &quot;Gson 2.1: Targeted Dec 31, 2011&quot; release which will have the &quot;Support for user-defined streaming type adapters&quot;. Then I&#39;ll modify my adapter to be a streaming adapter.\r\n\r\n----------\r\n\r\n\r\n## Update ##\r\n\r\nAs promised I&#39;m back but not with Gson, instead with Jackson 2. Sorry to be late (of 2 years).\r\n\r\n**Preface:** The key to use less memory of the result itsef is in the &quot;server side&quot; cursor. With this kind of cursors (a.k.a. resultset to Java devs) the DBMS sends data incrementally to client (a.k.a. driver) as the client goes forward with the reading. I think Oracle cursor are server side by default. For MySQL &gt; 5.0.2 look for useCursorFetch at [connection url paramenter][1]. Check about your favourite DBMS.\r\n\r\n**1:** So to use less memory we must:\r\n\r\n - use server side cursor behind the scene\r\n - use resultset open as [read only][2] and, of course, [forward only][3];\r\n - avoid to load all the cursor in a list (or a `JSONArray`) but write each row directly on an *output line*, where for output line I mean an output stream or a writer or also a json generator that wraps an output stream or a writer. \r\n\r\n**2:** As Jackson Documentation says: \r\n\r\n&gt; Streaming API is best performing (lowest overhead, fastest read/write;\r\n&gt; other 2 methods build on it)\r\n\r\n**3:** I see you in your code use getInt, getBoolean. getFloat... of ResultSet without [wasNull][4]. I expect this can yield problems. \r\n\r\n**4:** I used arrays to cache thinks and to avoid to call getters each iteration. Although not a fan of the switch/case construct, I used it for that `int` SQL `Types`.\r\n\r\n**The answer:** Not yet fully tested, it&#39;s based on [Jackson 2.2][5]:\r\n\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n    \t&lt;version&gt;2.2.2&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nThe `ResultSetSerializer` object instructs Jackson on how to serialize (tranform the object to JSON) a ResultSet. It uses the Jackson Streaming API inside. Here the code of a test:\r\n\r\n    SimpleModule module = new SimpleModule();\r\n    module.addSerializer(new ResultSetSerializer());\r\n    \r\n    ObjectMapper objectMapper = new ObjectMapper();\r\n    objectMapper.registerModule(module);\r\n    \r\n    [ . . . do the query . . . ]\r\n    ResultSet resultset = statement.executeQuery(query);\r\n\r\n    // Use the DataBind Api here\r\n    ObjectNode objectNode = objectMapper.createObjectNode();\r\n    \r\n    // put the resultset in a containing structure\r\n    objectNode.putPOJO(&quot;results&quot;, resultset);\r\n    \r\n    // generate all\r\n    objectMapper.writeValue(stringWriter, objectNode);\r\n\r\n\r\nAnd, of course, the code of the ResultSetSerializer class:\r\n\r\n    public class ResultSetSerializer extends JsonSerializer&lt;ResultSet&gt; {\r\n    \r\n        public static class ResultSetSerializerException extends JsonProcessingException{\r\n            private static final long serialVersionUID = -914957626413580734L;\r\n\r\n            public ResultSetSerializerException(Throwable cause){\r\n                super(cause);\r\n            }\r\n        }\r\n\r\n        @Override\r\n        public Class&lt;ResultSet&gt; handledType() {\r\n            return ResultSet.class;\r\n        }\r\n    \r\n        @Override\r\n        public void serialize(ResultSet rs, JsonGenerator jgen, SerializerProvider provider) throws IOException, JsonProcessingException {\r\n\r\n            try {\r\n                ResultSetMetaData rsmd = rs.getMetaData();\r\n                int numColumns = rsmd.getColumnCount();\r\n                String[] columnNames = new String[numColumns];\r\n                int[] columnTypes = new int[numColumns];\r\n\r\n                for (int i = 0; i &lt; columnNames.length; i++) {\r\n                    columnNames[i] = rsmd.getColumnLabel(i + 1);\r\n                    columnTypes[i] = rsmd.getColumnType(i + 1);\r\n                }\r\n\r\n                jgen.writeStartArray();\r\n\r\n                while (rs.next()) {\r\n                \r\n                    boolean b;\r\n                    long l;\r\n                    double d;\r\n                \r\n                    jgen.writeStartObject();\r\n        \r\n                    for (int i = 0; i &lt; columnNames.length; i++) {\r\n        \r\n                        jgen.writeFieldName(columnNames[i]);\r\n                        switch (columnTypes[i]) {\r\n        \r\n                        case Types.INTEGER:\r\n                            l = rs.getInt(i + 1);\r\n                            if (rs.wasNull()) {\r\n                                jgen.writeNull();\r\n                            } else {\r\n                                jgen.writeNumber(l);\r\n                            }\r\n                            break;\r\n        \r\n                        case Types.BIGINT:\r\n                            l = rs.getLong(i + 1);\r\n                            if (rs.wasNull()) {\r\n                                jgen.writeNull();\r\n                            } else {\r\n                                jgen.writeNumber(l);\r\n                            }\r\n                            break;\r\n        \r\n                        case Types.DECIMAL:\r\n                        case Types.NUMERIC:\r\n                            jgen.writeNumber(rs.getBigDecimal(i + 1));\r\n                            break;\r\n        \r\n                        case Types.FLOAT:\r\n                        case Types.REAL:\r\n                        case Types.DOUBLE:\r\n                            d = rs.getDouble(i + 1);\r\n                            if (rs.wasNull()) {\r\n                                jgen.writeNull();\r\n                            } else {\r\n                                jgen.writeNumber(d);\r\n                            }\r\n                            break;\r\n        \r\n                        case Types.NVARCHAR:\r\n                        case Types.VARCHAR:\r\n                        case Types.LONGNVARCHAR:\r\n                        case Types.LONGVARCHAR:\r\n                            jgen.writeString(rs.getString(i + 1));\r\n                            break;\r\n        \r\n                        case Types.BOOLEAN:\r\n                        case Types.BIT:\r\n                            b = rs.getBoolean(i + 1);\r\n                            if (rs.wasNull()) {\r\n                                jgen.writeNull();\r\n                            } else {\r\n                                jgen.writeBoolean(b);\r\n                            }\r\n                            break;\r\n        \r\n                        case Types.BINARY:\r\n                        case Types.VARBINARY:\r\n                        case Types.LONGVARBINARY:\r\n                            jgen.writeBinary(rs.getBytes(i + 1));\r\n                            break;\r\n        \r\n                        case Types.TINYINT:\r\n                        case Types.SMALLINT:\r\n                            l = rs.getShort(i + 1);\r\n                            if (rs.wasNull()) {\r\n                                jgen.writeNull();\r\n                            } else {\r\n                                jgen.writeNumber(l);\r\n                            }\r\n                            break;\r\n        \r\n                        case Types.DATE:\r\n                            provider.defaultSerializeDateValue(rs.getDate(i + 1), jgen);\r\n                            break;\r\n        \r\n                        case Types.TIMESTAMP:\r\n                            provider.defaultSerializeDateValue(rs.getTimestamp(i + 1), jgen);\r\n                            break;\r\n        \r\n                        case Types.BLOB:\r\n                            Blob blob = rs.getBlob(i);\r\n                            provider.defaultSerializeValue(blob.getBinaryStream(), jgen);\r\n                            blob.free();\r\n                            break;\r\n        \r\n                        case Types.CLOB:\r\n                            Clob clob = rs.getClob(i);\r\n                            provider.defaultSerializeValue(clob.getCharacterStream(), jgen);\r\n                            clob.free();\r\n                            break;\r\n        \r\n                        case Types.ARRAY:\r\n                            throw new RuntimeException(&quot;ResultSetSerializer not yet implemented for SQL type ARRAY&quot;);\r\n        \r\n                        case Types.STRUCT:\r\n                            throw new RuntimeException(&quot;ResultSetSerializer not yet implemented for SQL type STRUCT&quot;);\r\n        \r\n                        case Types.DISTINCT:\r\n                            throw new RuntimeException(&quot;ResultSetSerializer not yet implemented for SQL type DISTINCT&quot;);\r\n        \r\n                        case Types.REF:\r\n                            throw new RuntimeException(&quot;ResultSetSerializer not yet implemented for SQL type REF&quot;);\r\n\r\n                        case Types.JAVA_OBJECT:\r\n                        default:\r\n                            provider.defaultSerializeValue(rs.getObject(i + 1), jgen);\r\n                            break;\r\n                        }\r\n                    }\r\n        \r\n                    jgen.writeEndObject();\r\n                }\r\n\r\n                jgen.writeEndArray();\r\n\r\n            } catch (SQLException e) {\r\n                throw new ResultSetSerializerException(e);\r\n            }\r\n        }\r\n    }\r\n\r\n  [1]: http://dev.mysql.com/doc/refman/5.0/en/connector-j-reference-configuration-properties.html\r\n  [2]: http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSet.html#CONCUR_READ_ONLY\r\n  [3]: http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSet.html#TYPE_FORWARD_ONLY\r\n  [4]: http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSet.html#wasNull%28%29\r\n  [5]: https://github.com/FasterXML/jackson-core","title":"Most efficient conversion of ResultSet to JSON?","body":"<p>I think there's a way to use less memory (a fixed and not linear amount depending on data cardinality) but this imply to change the method signature. In fact we may print the Json data directly on an output stream as soon as we fetch them from the ResultSet: the already written data will be garbage collected since we don't need an array that keeps them in memory.</p>\n<p>I use GSON that accepts type adapters. I wrote a type adapter to convert ResultSet to JsonArray and it looks very like to your code. I'm waiting the &quot;Gson 2.1: Targeted Dec 31, 2011&quot; release which will have the &quot;Support for user-defined streaming type adapters&quot;. Then I'll modify my adapter to be a streaming adapter.</p>\n<hr />\n<h2>Update</h2>\n<p>As promised I'm back but not with Gson, instead with Jackson 2. Sorry to be late (of 2 years).</p>\n<p><strong>Preface:</strong> The key to use less memory of the result itsef is in the &quot;server side&quot; cursor. With this kind of cursors (a.k.a. resultset to Java devs) the DBMS sends data incrementally to client (a.k.a. driver) as the client goes forward with the reading. I think Oracle cursor are server side by default. For MySQL &gt; 5.0.2 look for useCursorFetch at <a href=\"http://dev.mysql.com/doc/refman/5.0/en/connector-j-reference-configuration-properties.html\" rel=\"nofollow noreferrer\">connection url paramenter</a>. Check about your favourite DBMS.</p>\n<p><strong>1:</strong> So to use less memory we must:</p>\n<ul>\n<li>use server side cursor behind the scene</li>\n<li>use resultset open as <a href=\"http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSet.html#CONCUR_READ_ONLY\" rel=\"nofollow noreferrer\">read only</a> and, of course, <a href=\"http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSet.html#TYPE_FORWARD_ONLY\" rel=\"nofollow noreferrer\">forward only</a>;</li>\n<li>avoid to load all the cursor in a list (or a <code>JSONArray</code>) but write each row directly on an <em>output line</em>, where for output line I mean an output stream or a writer or also a json generator that wraps an output stream or a writer.</li>\n</ul>\n<p><strong>2:</strong> As Jackson Documentation says:</p>\n<blockquote>\n<p>Streaming API is best performing (lowest overhead, fastest read/write;\nother 2 methods build on it)</p>\n</blockquote>\n<p><strong>3:</strong> I see you in your code use getInt, getBoolean. getFloat... of ResultSet without <a href=\"http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSet.html#wasNull%28%29\" rel=\"nofollow noreferrer\">wasNull</a>. I expect this can yield problems.</p>\n<p><strong>4:</strong> I used arrays to cache thinks and to avoid to call getters each iteration. Although not a fan of the switch/case construct, I used it for that <code>int</code> SQL <code>Types</code>.</p>\n<p><strong>The answer:</strong> Not yet fully tested, it's based on <a href=\"https://github.com/FasterXML/jackson-core\" rel=\"nofollow noreferrer\">Jackson 2.2</a>:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n    &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n    &lt;version&gt;2.2.2&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>The <code>ResultSetSerializer</code> object instructs Jackson on how to serialize (tranform the object to JSON) a ResultSet. It uses the Jackson Streaming API inside. Here the code of a test:</p>\n<pre><code>SimpleModule module = new SimpleModule();\nmodule.addSerializer(new ResultSetSerializer());\n\nObjectMapper objectMapper = new ObjectMapper();\nobjectMapper.registerModule(module);\n\n[ . . . do the query . . . ]\nResultSet resultset = statement.executeQuery(query);\n\n// Use the DataBind Api here\nObjectNode objectNode = objectMapper.createObjectNode();\n\n// put the resultset in a containing structure\nobjectNode.putPOJO(&quot;results&quot;, resultset);\n\n// generate all\nobjectMapper.writeValue(stringWriter, objectNode);\n</code></pre>\n<p>And, of course, the code of the ResultSetSerializer class:</p>\n<pre><code>public class ResultSetSerializer extends JsonSerializer&lt;ResultSet&gt; {\n\n    public static class ResultSetSerializerException extends JsonProcessingException{\n        private static final long serialVersionUID = -914957626413580734L;\n\n        public ResultSetSerializerException(Throwable cause){\n            super(cause);\n        }\n    }\n\n    @Override\n    public Class&lt;ResultSet&gt; handledType() {\n        return ResultSet.class;\n    }\n\n    @Override\n    public void serialize(ResultSet rs, JsonGenerator jgen, SerializerProvider provider) throws IOException, JsonProcessingException {\n\n        try {\n            ResultSetMetaData rsmd = rs.getMetaData();\n            int numColumns = rsmd.getColumnCount();\n            String[] columnNames = new String[numColumns];\n            int[] columnTypes = new int[numColumns];\n\n            for (int i = 0; i &lt; columnNames.length; i++) {\n                columnNames[i] = rsmd.getColumnLabel(i + 1);\n                columnTypes[i] = rsmd.getColumnType(i + 1);\n            }\n\n            jgen.writeStartArray();\n\n            while (rs.next()) {\n            \n                boolean b;\n                long l;\n                double d;\n            \n                jgen.writeStartObject();\n    \n                for (int i = 0; i &lt; columnNames.length; i++) {\n    \n                    jgen.writeFieldName(columnNames[i]);\n                    switch (columnTypes[i]) {\n    \n                    case Types.INTEGER:\n                        l = rs.getInt(i + 1);\n                        if (rs.wasNull()) {\n                            jgen.writeNull();\n                        } else {\n                            jgen.writeNumber(l);\n                        }\n                        break;\n    \n                    case Types.BIGINT:\n                        l = rs.getLong(i + 1);\n                        if (rs.wasNull()) {\n                            jgen.writeNull();\n                        } else {\n                            jgen.writeNumber(l);\n                        }\n                        break;\n    \n                    case Types.DECIMAL:\n                    case Types.NUMERIC:\n                        jgen.writeNumber(rs.getBigDecimal(i + 1));\n                        break;\n    \n                    case Types.FLOAT:\n                    case Types.REAL:\n                    case Types.DOUBLE:\n                        d = rs.getDouble(i + 1);\n                        if (rs.wasNull()) {\n                            jgen.writeNull();\n                        } else {\n                            jgen.writeNumber(d);\n                        }\n                        break;\n    \n                    case Types.NVARCHAR:\n                    case Types.VARCHAR:\n                    case Types.LONGNVARCHAR:\n                    case Types.LONGVARCHAR:\n                        jgen.writeString(rs.getString(i + 1));\n                        break;\n    \n                    case Types.BOOLEAN:\n                    case Types.BIT:\n                        b = rs.getBoolean(i + 1);\n                        if (rs.wasNull()) {\n                            jgen.writeNull();\n                        } else {\n                            jgen.writeBoolean(b);\n                        }\n                        break;\n    \n                    case Types.BINARY:\n                    case Types.VARBINARY:\n                    case Types.LONGVARBINARY:\n                        jgen.writeBinary(rs.getBytes(i + 1));\n                        break;\n    \n                    case Types.TINYINT:\n                    case Types.SMALLINT:\n                        l = rs.getShort(i + 1);\n                        if (rs.wasNull()) {\n                            jgen.writeNull();\n                        } else {\n                            jgen.writeNumber(l);\n                        }\n                        break;\n    \n                    case Types.DATE:\n                        provider.defaultSerializeDateValue(rs.getDate(i + 1), jgen);\n                        break;\n    \n                    case Types.TIMESTAMP:\n                        provider.defaultSerializeDateValue(rs.getTimestamp(i + 1), jgen);\n                        break;\n    \n                    case Types.BLOB:\n                        Blob blob = rs.getBlob(i);\n                        provider.defaultSerializeValue(blob.getBinaryStream(), jgen);\n                        blob.free();\n                        break;\n    \n                    case Types.CLOB:\n                        Clob clob = rs.getClob(i);\n                        provider.defaultSerializeValue(clob.getCharacterStream(), jgen);\n                        clob.free();\n                        break;\n    \n                    case Types.ARRAY:\n                        throw new RuntimeException(&quot;ResultSetSerializer not yet implemented for SQL type ARRAY&quot;);\n    \n                    case Types.STRUCT:\n                        throw new RuntimeException(&quot;ResultSetSerializer not yet implemented for SQL type STRUCT&quot;);\n    \n                    case Types.DISTINCT:\n                        throw new RuntimeException(&quot;ResultSetSerializer not yet implemented for SQL type DISTINCT&quot;);\n    \n                    case Types.REF:\n                        throw new RuntimeException(&quot;ResultSetSerializer not yet implemented for SQL type REF&quot;);\n\n                    case Types.JAVA_OBJECT:\n                    default:\n                        provider.defaultSerializeValue(rs.getObject(i + 1), jgen);\n                        break;\n                    }\n                }\n    \n                jgen.writeEndObject();\n            }\n\n            jgen.writeEndArray();\n\n        } catch (SQLException e) {\n            throw new ResultSetSerializerException(e);\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1061472,"reputation":11336,"user_id":1062992,"accept_rate":94,"display_name":"egerardus"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1343781903,"creation_date":1326825741,"answer_id":8899898,"question_id":6514876,"body_markdown":"In addition to suggestions made by @Jim Cook. One other thought is to use a switch instead of if-elses:\r\n\r\n    while(rs.next()) {\r\n      int numColumns = rsmd.getColumnCount();\r\n      JSONObject obj = new JSONObject();\r\n\r\n      for( int i=1; i&lt;numColumns+1; i++) {\r\n        String column_name = rsmd.getColumnName(i);\r\n\t\t    \r\n        switch( rsmd.getColumnType( i ) ) {\r\n          case java.sql.Types.ARRAY:\r\n            obj.put(column_name, rs.getArray(column_name));     break;\r\n          case java.sql.Types.BIGINT:\r\n            obj.put(column_name, rs.getInt(column_name));       break;\r\n          case java.sql.Types.BOOLEAN:\r\n            obj.put(column_name, rs.getBoolean(column_name));   break;\r\n          case java.sql.Types.BLOB:\r\n            obj.put(column_name, rs.getBlob(column_name));      break;\r\n          case java.sql.Types.DOUBLE:\r\n            obj.put(column_name, rs.getDouble(column_name));    break;\r\n          case java.sql.Types.FLOAT:\r\n            obj.put(column_name, rs.getFloat(column_name));     break;\r\n          case java.sql.Types.INTEGER:\r\n            obj.put(column_name, rs.getInt(column_name));       break;\r\n          case java.sql.Types.NVARCHAR:\r\n            obj.put(column_name, rs.getNString(column_name));   break;\r\n          case java.sql.Types.VARCHAR:\r\n            obj.put(column_name, rs.getString(column_name));    break;\r\n          case java.sql.Types.TINYINT:\r\n            obj.put(column_name, rs.getInt(column_name));       break;\r\n          case java.sql.Types.SMALLINT:\r\n            obj.put(column_name, rs.getInt(column_name));       break;\r\n          case java.sql.Types.DATE:\r\n            obj.put(column_name, rs.getDate(column_name));      break;\r\n          case java.sql.Types.TIMESTAMP:\r\n            obj.put(column_name, rs.getTimestamp(column_name)); break;\r\n          default:\r\n            obj.put(column_name, rs.getObject(column_name));    break;\r\n        }\r\n      }\r\n     \r\n      json.put(obj);\r\n    }\r\n","title":"Most efficient conversion of ResultSet to JSON?","body":"<p>In addition to suggestions made by @Jim Cook. One other thought is to use a switch instead of if-elses:</p>\n\n<pre><code>while(rs.next()) {\n  int numColumns = rsmd.getColumnCount();\n  JSONObject obj = new JSONObject();\n\n  for( int i=1; i&lt;numColumns+1; i++) {\n    String column_name = rsmd.getColumnName(i);\n\n    switch( rsmd.getColumnType( i ) ) {\n      case java.sql.Types.ARRAY:\n        obj.put(column_name, rs.getArray(column_name));     break;\n      case java.sql.Types.BIGINT:\n        obj.put(column_name, rs.getInt(column_name));       break;\n      case java.sql.Types.BOOLEAN:\n        obj.put(column_name, rs.getBoolean(column_name));   break;\n      case java.sql.Types.BLOB:\n        obj.put(column_name, rs.getBlob(column_name));      break;\n      case java.sql.Types.DOUBLE:\n        obj.put(column_name, rs.getDouble(column_name));    break;\n      case java.sql.Types.FLOAT:\n        obj.put(column_name, rs.getFloat(column_name));     break;\n      case java.sql.Types.INTEGER:\n        obj.put(column_name, rs.getInt(column_name));       break;\n      case java.sql.Types.NVARCHAR:\n        obj.put(column_name, rs.getNString(column_name));   break;\n      case java.sql.Types.VARCHAR:\n        obj.put(column_name, rs.getString(column_name));    break;\n      case java.sql.Types.TINYINT:\n        obj.put(column_name, rs.getInt(column_name));       break;\n      case java.sql.Types.SMALLINT:\n        obj.put(column_name, rs.getInt(column_name));       break;\n      case java.sql.Types.DATE:\n        obj.put(column_name, rs.getDate(column_name));      break;\n      case java.sql.Types.TIMESTAMP:\n        obj.put(column_name, rs.getTimestamp(column_name)); break;\n      default:\n        obj.put(column_name, rs.getObject(column_name));    break;\n    }\n  }\n\n  json.put(obj);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":472489,"reputation":2168,"user_id":1442960,"accept_rate":80,"display_name":"Marcus"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1418427849,"creation_date":1349123959,"answer_id":12680722,"question_id":6514876,"body_markdown":"Just as a heads up, the if/then loop is more efficient than the switch for enums.  If you have the switch against the raw enum integer, then it&#39;s more efficient, but against the variable, if/then is more efficient, at least for Java 5, 6, and 7.\r\n\r\nI.e., for some reason (after some performance tests)\r\n\r\n    if (ordinalValue == 1) {\r\n       ...\r\n    } else (ordinalValue == 2 {\r\n       ... \r\n    }\r\n\r\nis faster than\r\n\r\n    switch( myEnum.ordinal() ) {\r\n        case 1:\r\n           ...\r\n           break;\r\n        case 2:\r\n           ...\r\n           break;\r\n    }\r\n\r\nI see that a few people are doubting me, so I&#39;ll post code here that you can run yourself to see the difference, along with output I have from Java 7.  The results of the following code with 10 enum values are as follows.  Note the key here is the if/then using an integer value comparing against ordinal constants of the enum, vs. the switch with an enum&#39;s ordinal value against the raw int ordinal values, vs. a switch with the enum against each enum name.  The if/then with an integer value beat out both other switches, although the last switch was a little faster than the first switch, it was not faster than the if/else.\r\n\r\nIf / else took 23 ms&lt;br&gt;\r\nSwitch took 45 ms&lt;br&gt;\r\nSwitch 2 took 30 ms&lt;br&gt;\r\nTotal matches: 3000000&lt;br&gt;\r\n\r\n\tpackage testing;\r\n\t\r\n\timport java.util.Random;\r\n\t\r\n\tenum TestEnum {\r\n\t\tFIRST,\r\n\t\tSECOND,\r\n\t\tTHIRD,\r\n\t\tFOURTH,\r\n\t\tFIFTH,\r\n\t\tSIXTH,\r\n\t\tSEVENTH,\r\n\t\tEIGHTH,\r\n\t\tNINTH,\r\n\t\tTENTH\r\n\t}\r\n\t\r\n\tpublic class SwitchTest {\r\n\t\tprivate static int LOOP = 1000000;\r\n\t\tprivate static Random r = new Random();\r\n\t\tprivate static int SIZE = TestEnum.values().length;\r\n\t\t\r\n\t\tpublic static void main(String[] args) {\r\n\t\t\tlong time = System.currentTimeMillis();\r\n\t\t\tint matches = 0;\r\n\t\t\tfor (int i = 0; i &lt; LOOP; i++) {\r\n\t\t\t\tint j = r.nextInt(SIZE);\r\n\t\t\t\tif (j == TestEnum.FIRST.ordinal()) {\r\n\t\t\t\t\tmatches++;\r\n\t\t\t\t} else if (j == TestEnum.SECOND.ordinal()) {\r\n\t\t\t\t\tmatches++;\r\n\t\t\t\t} else if (j == TestEnum.THIRD.ordinal()) {\r\n\t\t\t\t\tmatches++;\r\n\t\t\t\t} else if (j == TestEnum.FOURTH.ordinal()) {\r\n\t\t\t\t\tmatches++;\r\n\t\t\t\t} else if (j == TestEnum.FIFTH.ordinal()) {\r\n\t\t\t\t\tmatches++;\r\n\t\t\t\t} else if (j == TestEnum.SIXTH.ordinal()) {\r\n\t\t\t\t\tmatches++;\r\n\t\t\t\t} else if (j == TestEnum.SEVENTH.ordinal()) {\r\n\t\t\t\t\tmatches++;\r\n\t\t\t\t} else if (j == TestEnum.EIGHTH.ordinal()) {\r\n\t\t\t\t\tmatches++;\r\n\t\t\t\t} else if (j == TestEnum.NINTH.ordinal()) {\r\n\t\t\t\t\tmatches++;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tmatches++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tSystem.out.println(&quot;If / else took &quot;+(System.currentTimeMillis() - time)+&quot; ms&quot;);\r\n\t\t\ttime = System.currentTimeMillis();\r\n\t\t\tfor (int i = 0; i &lt; LOOP; i++) {\r\n\t\t\t\tTestEnum te = TestEnum.values()[r.nextInt(SIZE)];\r\n\t\t\t\tswitch (te.ordinal()) {\r\n\t\t\t\t\tcase 0:\r\n\t\t\t\t\t\tmatches++;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\tmatches++;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\tmatches++;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 3:\r\n\t\t\t\t\t\tmatches++;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 4:\r\n\t\t\t\t\t\tmatches++;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 5:\r\n\t\t\t\t\t\tmatches++;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 6:\r\n\t\t\t\t\t\tmatches++;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 7:\r\n\t\t\t\t\t\tmatches++;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 8:\r\n\t\t\t\t\t\tmatches++;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 9:\r\n\t\t\t\t\t\tmatches++;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tmatches++;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tSystem.out.println(&quot;Switch took &quot;+(System.currentTimeMillis() - time)+&quot; ms&quot;);\r\n\t\t\ttime = System.currentTimeMillis();\r\n\t\t\tfor (int i = 0; i &lt; LOOP; i++) {\r\n\t\t\t\tTestEnum te = TestEnum.values()[r.nextInt(SIZE)];\r\n\t\t\t\tswitch (te) {\r\n\t\t\t\t\tcase FIRST:\r\n\t\t\t\t\t\tmatches++;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase SECOND:\r\n\t\t\t\t\t\tmatches++;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase THIRD:\r\n\t\t\t\t\t\tmatches++;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase FOURTH:\r\n\t\t\t\t\t\tmatches++;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase FIFTH:\r\n\t\t\t\t\t\tmatches++;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase SIXTH:\r\n\t\t\t\t\t\tmatches++;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase SEVENTH:\r\n\t\t\t\t\t\tmatches++;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase EIGHTH:\r\n\t\t\t\t\t\tmatches++;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase NINTH:\r\n\t\t\t\t\t\tmatches++;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tmatches++;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tSystem.out.println(&quot;Switch 2 took &quot;+(System.currentTimeMillis() - time)+&quot; ms&quot;);\t\t\r\n\t\t\tSystem.out.println(&quot;Total matches: &quot;+matches);\r\n\t\t}\r\n\t}\r\n","title":"Most efficient conversion of ResultSet to JSON?","body":"<p>Just as a heads up, the if/then loop is more efficient than the switch for enums.  If you have the switch against the raw enum integer, then it's more efficient, but against the variable, if/then is more efficient, at least for Java 5, 6, and 7.</p>\n\n<p>I.e., for some reason (after some performance tests)</p>\n\n<pre><code>if (ordinalValue == 1) {\n   ...\n} else (ordinalValue == 2 {\n   ... \n}\n</code></pre>\n\n<p>is faster than</p>\n\n<pre><code>switch( myEnum.ordinal() ) {\n    case 1:\n       ...\n       break;\n    case 2:\n       ...\n       break;\n}\n</code></pre>\n\n<p>I see that a few people are doubting me, so I'll post code here that you can run yourself to see the difference, along with output I have from Java 7.  The results of the following code with 10 enum values are as follows.  Note the key here is the if/then using an integer value comparing against ordinal constants of the enum, vs. the switch with an enum's ordinal value against the raw int ordinal values, vs. a switch with the enum against each enum name.  The if/then with an integer value beat out both other switches, although the last switch was a little faster than the first switch, it was not faster than the if/else.</p>\n\n<p>If / else took 23 ms<br>\nSwitch took 45 ms<br>\nSwitch 2 took 30 ms<br>\nTotal matches: 3000000<br></p>\n\n<pre><code>package testing;\n\nimport java.util.Random;\n\nenum TestEnum {\n    FIRST,\n    SECOND,\n    THIRD,\n    FOURTH,\n    FIFTH,\n    SIXTH,\n    SEVENTH,\n    EIGHTH,\n    NINTH,\n    TENTH\n}\n\npublic class SwitchTest {\n    private static int LOOP = 1000000;\n    private static Random r = new Random();\n    private static int SIZE = TestEnum.values().length;\n\n    public static void main(String[] args) {\n        long time = System.currentTimeMillis();\n        int matches = 0;\n        for (int i = 0; i &lt; LOOP; i++) {\n            int j = r.nextInt(SIZE);\n            if (j == TestEnum.FIRST.ordinal()) {\n                matches++;\n            } else if (j == TestEnum.SECOND.ordinal()) {\n                matches++;\n            } else if (j == TestEnum.THIRD.ordinal()) {\n                matches++;\n            } else if (j == TestEnum.FOURTH.ordinal()) {\n                matches++;\n            } else if (j == TestEnum.FIFTH.ordinal()) {\n                matches++;\n            } else if (j == TestEnum.SIXTH.ordinal()) {\n                matches++;\n            } else if (j == TestEnum.SEVENTH.ordinal()) {\n                matches++;\n            } else if (j == TestEnum.EIGHTH.ordinal()) {\n                matches++;\n            } else if (j == TestEnum.NINTH.ordinal()) {\n                matches++;\n            } else {\n                matches++;\n            }\n        }\n        System.out.println(\"If / else took \"+(System.currentTimeMillis() - time)+\" ms\");\n        time = System.currentTimeMillis();\n        for (int i = 0; i &lt; LOOP; i++) {\n            TestEnum te = TestEnum.values()[r.nextInt(SIZE)];\n            switch (te.ordinal()) {\n                case 0:\n                    matches++;\n                    break;\n                case 1:\n                    matches++;\n                    break;\n                case 2:\n                    matches++;\n                    break;\n                case 3:\n                    matches++;\n                    break;\n                case 4:\n                    matches++;\n                    break;\n                case 5:\n                    matches++;\n                    break;\n                case 6:\n                    matches++;\n                    break;\n                case 7:\n                    matches++;\n                    break;\n                case 8:\n                    matches++;\n                    break;\n                case 9:\n                    matches++;\n                    break;\n                default:\n                    matches++;\n                    break;\n            }\n        }\n        System.out.println(\"Switch took \"+(System.currentTimeMillis() - time)+\" ms\");\n        time = System.currentTimeMillis();\n        for (int i = 0; i &lt; LOOP; i++) {\n            TestEnum te = TestEnum.values()[r.nextInt(SIZE)];\n            switch (te) {\n                case FIRST:\n                    matches++;\n                    break;\n                case SECOND:\n                    matches++;\n                    break;\n                case THIRD:\n                    matches++;\n                    break;\n                case FOURTH:\n                    matches++;\n                    break;\n                case FIFTH:\n                    matches++;\n                    break;\n                case SIXTH:\n                    matches++;\n                    break;\n                case SEVENTH:\n                    matches++;\n                    break;\n                case EIGHTH:\n                    matches++;\n                    break;\n                case NINTH:\n                    matches++;\n                    break;\n                default:\n                    matches++;\n                    break;\n            }\n        }\n        System.out.println(\"Switch 2 took \"+(System.currentTimeMillis() - time)+\" ms\");     \n        System.out.println(\"Total matches: \"+matches);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1260830,"reputation":1847,"user_id":1219163,"accept_rate":89,"display_name":"Li3ro"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1353313619,"creation_date":1353310955,"answer_id":13449529,"question_id":6514876,"body_markdown":"If anyone plan to use this implementation, You might wanna [check this out][1] [and this][2]\r\n\r\nThis is my version of that convertion code:\r\n\r\n    public class ResultSetConverter {\r\n\tpublic static JSONArray convert(ResultSet rs) throws SQLException,\r\n\t\t\tJSONException {\r\n\t\tJSONArray json = new JSONArray();\r\n\t\tResultSetMetaData rsmd = rs.getMetaData();\r\n\t\tint numColumns = rsmd.getColumnCount();\r\n\t\twhile (rs.next()) {\r\n\r\n\t\t\tJSONObject obj = new JSONObject();\r\n\r\n\t\t\tfor (int i = 1; i &lt; numColumns + 1; i++) {\r\n\t\t\t\tString column_name = rsmd.getColumnName(i);\r\n\r\n\t\t\t\tif (rsmd.getColumnType(i) == java.sql.Types.ARRAY) {\r\n\t\t\t\t\tobj.put(column_name, rs.getArray(column_name));\r\n\t\t\t\t} else if (rsmd.getColumnType(i) == java.sql.Types.BIGINT) {\r\n\t\t\t\t\tobj.put(column_name, rs.getLong(column_name));\r\n\t\t\t\t} else if (rsmd.getColumnType(i) == java.sql.Types.REAL) {\r\n\t\t\t\t\tobj.put(column_name, rs.getFloat(column_name));\r\n\t\t\t\t} else if (rsmd.getColumnType(i) == java.sql.Types.BOOLEAN) {\r\n\t\t\t\t\tobj.put(column_name, rs.getBoolean(column_name));\r\n\t\t\t\t} else if (rsmd.getColumnType(i) == java.sql.Types.BLOB) {\r\n\t\t\t\t\tobj.put(column_name, rs.getBlob(column_name));\r\n\t\t\t\t} else if (rsmd.getColumnType(i) == java.sql.Types.DOUBLE) {\r\n\t\t\t\t\tobj.put(column_name, rs.getDouble(column_name));\r\n\t\t\t\t} else if (rsmd.getColumnType(i) == java.sql.Types.FLOAT) {\r\n\t\t\t\t\tobj.put(column_name, rs.getDouble(column_name));\r\n\t\t\t\t} else if (rsmd.getColumnType(i) == java.sql.Types.INTEGER) {\r\n\t\t\t\t\tobj.put(column_name, rs.getInt(column_name));\r\n\t\t\t\t} else if (rsmd.getColumnType(i) == java.sql.Types.NVARCHAR) {\r\n\t\t\t\t\tobj.put(column_name, rs.getNString(column_name));\r\n\t\t\t\t} else if (rsmd.getColumnType(i) == java.sql.Types.VARCHAR) {\r\n\t\t\t\t\tobj.put(column_name, rs.getString(column_name));\r\n\t\t\t\t} else if (rsmd.getColumnType(i) == java.sql.Types.CHAR) {\r\n\t\t\t\t\tobj.put(column_name, rs.getString(column_name));\r\n\t\t\t\t} else if (rsmd.getColumnType(i) == java.sql.Types.NCHAR) {\r\n\t\t\t\t\tobj.put(column_name, rs.getNString(column_name));\r\n\t\t\t\t} else if (rsmd.getColumnType(i) == java.sql.Types.LONGNVARCHAR) {\r\n\t\t\t\t\tobj.put(column_name, rs.getNString(column_name));\r\n\t\t\t\t} else if (rsmd.getColumnType(i) == java.sql.Types.LONGVARCHAR) {\r\n\t\t\t\t\tobj.put(column_name, rs.getString(column_name));\r\n\t\t\t\t} else if (rsmd.getColumnType(i) == java.sql.Types.TINYINT) {\r\n\t\t\t\t\tobj.put(column_name, rs.getByte(column_name));\r\n\t\t\t\t} else if (rsmd.getColumnType(i) == java.sql.Types.SMALLINT) {\r\n\t\t\t\t\tobj.put(column_name, rs.getShort(column_name));\r\n\t\t\t\t} else if (rsmd.getColumnType(i) == java.sql.Types.DATE) {\r\n\t\t\t\t\tobj.put(column_name, rs.getDate(column_name));\r\n\t\t\t\t} else if (rsmd.getColumnType(i) == java.sql.Types.TIME) {\r\n\t\t\t\t\tobj.put(column_name, rs.getTime(column_name));\r\n\t\t\t\t} else if (rsmd.getColumnType(i) == java.sql.Types.TIMESTAMP) {\r\n\t\t\t\t\tobj.put(column_name, rs.getTimestamp(column_name));\r\n\t\t\t\t} else if (rsmd.getColumnType(i) == java.sql.Types.BINARY) {\r\n\t\t\t\t\tobj.put(column_name, rs.getBytes(column_name));\r\n\t\t\t\t} else if (rsmd.getColumnType(i) == java.sql.Types.VARBINARY) {\r\n\t\t\t\t\tobj.put(column_name, rs.getBytes(column_name));\r\n\t\t\t\t} else if (rsmd.getColumnType(i) == java.sql.Types.LONGVARBINARY) {\r\n\t\t\t\t\tobj.put(column_name, rs.getBinaryStream(column_name));\r\n\t\t\t\t} else if (rsmd.getColumnType(i) == java.sql.Types.BIT) {\r\n\t\t\t\t\tobj.put(column_name, rs.getBoolean(column_name));\r\n\t\t\t\t} else if (rsmd.getColumnType(i) == java.sql.Types.CLOB) {\r\n\t\t\t\t\tobj.put(column_name, rs.getClob(column_name));\r\n\t\t\t\t} else if (rsmd.getColumnType(i) == java.sql.Types.NUMERIC) {\r\n\t\t\t\t\tobj.put(column_name, rs.getBigDecimal(column_name));\r\n\t\t\t\t} else if (rsmd.getColumnType(i) == java.sql.Types.DECIMAL) {\r\n\t\t\t\t\tobj.put(column_name, rs.getBigDecimal(column_name));\r\n\t\t\t\t} else if (rsmd.getColumnType(i) == java.sql.Types.DATALINK) {\r\n\t\t\t\t\tobj.put(column_name, rs.getURL(column_name));\r\n\t\t\t\t} else if (rsmd.getColumnType(i) == java.sql.Types.REF) {\r\n\t\t\t\t\tobj.put(column_name, rs.getRef(column_name));\r\n\t\t\t\t} else if (rsmd.getColumnType(i) == java.sql.Types.STRUCT) {\r\n\t\t\t\t\tobj.put(column_name, rs.getObject(column_name)); // must be a custom mapping consists of a class that implements the interface SQLData and an entry in a java.util.Map object.\r\n\t\t\t\t} else if (rsmd.getColumnType(i) == java.sql.Types.DISTINCT) {\r\n\t\t\t\t\tobj.put(column_name, rs.getObject(column_name)); // must be a custom mapping consists of a class that implements the interface SQLData and an entry in a java.util.Map object.\r\n\t\t\t\t} else if (rsmd.getColumnType(i) == java.sql.Types.JAVA_OBJECT) {\r\n\t\t\t\t\tobj.put(column_name, rs.getObject(column_name));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tobj.put(column_name, rs.getString(i));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tjson.put(obj);\r\n\t\t}\r\n\r\n\t\treturn json;\r\n\t}\r\n    }\r\n\r\n\r\n  [1]: http://www.cs.mun.ca/~michael/java/jdk1.1-beta2-docs/guide/jdbc/mapping.doc.html\r\n  [2]: http://docs.oracle.com/javase/1.4.2/docs/guide/jdbc/getstart/mapping.html","title":"Most efficient conversion of ResultSet to JSON?","body":"<p>If anyone plan to use this implementation, You might wanna <a href=\"http://www.cs.mun.ca/~michael/java/jdk1.1-beta2-docs/guide/jdbc/mapping.doc.html\" rel=\"nofollow\">check this out</a> <a href=\"http://docs.oracle.com/javase/1.4.2/docs/guide/jdbc/getstart/mapping.html\" rel=\"nofollow\">and this</a></p>\n\n<p>This is my version of that convertion code:</p>\n\n<pre><code>public class ResultSetConverter {\npublic static JSONArray convert(ResultSet rs) throws SQLException,\n        JSONException {\n    JSONArray json = new JSONArray();\n    ResultSetMetaData rsmd = rs.getMetaData();\n    int numColumns = rsmd.getColumnCount();\n    while (rs.next()) {\n\n        JSONObject obj = new JSONObject();\n\n        for (int i = 1; i &lt; numColumns + 1; i++) {\n            String column_name = rsmd.getColumnName(i);\n\n            if (rsmd.getColumnType(i) == java.sql.Types.ARRAY) {\n                obj.put(column_name, rs.getArray(column_name));\n            } else if (rsmd.getColumnType(i) == java.sql.Types.BIGINT) {\n                obj.put(column_name, rs.getLong(column_name));\n            } else if (rsmd.getColumnType(i) == java.sql.Types.REAL) {\n                obj.put(column_name, rs.getFloat(column_name));\n            } else if (rsmd.getColumnType(i) == java.sql.Types.BOOLEAN) {\n                obj.put(column_name, rs.getBoolean(column_name));\n            } else if (rsmd.getColumnType(i) == java.sql.Types.BLOB) {\n                obj.put(column_name, rs.getBlob(column_name));\n            } else if (rsmd.getColumnType(i) == java.sql.Types.DOUBLE) {\n                obj.put(column_name, rs.getDouble(column_name));\n            } else if (rsmd.getColumnType(i) == java.sql.Types.FLOAT) {\n                obj.put(column_name, rs.getDouble(column_name));\n            } else if (rsmd.getColumnType(i) == java.sql.Types.INTEGER) {\n                obj.put(column_name, rs.getInt(column_name));\n            } else if (rsmd.getColumnType(i) == java.sql.Types.NVARCHAR) {\n                obj.put(column_name, rs.getNString(column_name));\n            } else if (rsmd.getColumnType(i) == java.sql.Types.VARCHAR) {\n                obj.put(column_name, rs.getString(column_name));\n            } else if (rsmd.getColumnType(i) == java.sql.Types.CHAR) {\n                obj.put(column_name, rs.getString(column_name));\n            } else if (rsmd.getColumnType(i) == java.sql.Types.NCHAR) {\n                obj.put(column_name, rs.getNString(column_name));\n            } else if (rsmd.getColumnType(i) == java.sql.Types.LONGNVARCHAR) {\n                obj.put(column_name, rs.getNString(column_name));\n            } else if (rsmd.getColumnType(i) == java.sql.Types.LONGVARCHAR) {\n                obj.put(column_name, rs.getString(column_name));\n            } else if (rsmd.getColumnType(i) == java.sql.Types.TINYINT) {\n                obj.put(column_name, rs.getByte(column_name));\n            } else if (rsmd.getColumnType(i) == java.sql.Types.SMALLINT) {\n                obj.put(column_name, rs.getShort(column_name));\n            } else if (rsmd.getColumnType(i) == java.sql.Types.DATE) {\n                obj.put(column_name, rs.getDate(column_name));\n            } else if (rsmd.getColumnType(i) == java.sql.Types.TIME) {\n                obj.put(column_name, rs.getTime(column_name));\n            } else if (rsmd.getColumnType(i) == java.sql.Types.TIMESTAMP) {\n                obj.put(column_name, rs.getTimestamp(column_name));\n            } else if (rsmd.getColumnType(i) == java.sql.Types.BINARY) {\n                obj.put(column_name, rs.getBytes(column_name));\n            } else if (rsmd.getColumnType(i) == java.sql.Types.VARBINARY) {\n                obj.put(column_name, rs.getBytes(column_name));\n            } else if (rsmd.getColumnType(i) == java.sql.Types.LONGVARBINARY) {\n                obj.put(column_name, rs.getBinaryStream(column_name));\n            } else if (rsmd.getColumnType(i) == java.sql.Types.BIT) {\n                obj.put(column_name, rs.getBoolean(column_name));\n            } else if (rsmd.getColumnType(i) == java.sql.Types.CLOB) {\n                obj.put(column_name, rs.getClob(column_name));\n            } else if (rsmd.getColumnType(i) == java.sql.Types.NUMERIC) {\n                obj.put(column_name, rs.getBigDecimal(column_name));\n            } else if (rsmd.getColumnType(i) == java.sql.Types.DECIMAL) {\n                obj.put(column_name, rs.getBigDecimal(column_name));\n            } else if (rsmd.getColumnType(i) == java.sql.Types.DATALINK) {\n                obj.put(column_name, rs.getURL(column_name));\n            } else if (rsmd.getColumnType(i) == java.sql.Types.REF) {\n                obj.put(column_name, rs.getRef(column_name));\n            } else if (rsmd.getColumnType(i) == java.sql.Types.STRUCT) {\n                obj.put(column_name, rs.getObject(column_name)); // must be a custom mapping consists of a class that implements the interface SQLData and an entry in a java.util.Map object.\n            } else if (rsmd.getColumnType(i) == java.sql.Types.DISTINCT) {\n                obj.put(column_name, rs.getObject(column_name)); // must be a custom mapping consists of a class that implements the interface SQLData and an entry in a java.util.Map object.\n            } else if (rsmd.getColumnType(i) == java.sql.Types.JAVA_OBJECT) {\n                obj.put(column_name, rs.getObject(column_name));\n            } else {\n                obj.put(column_name, rs.getString(i));\n            }\n        }\n\n        json.put(obj);\n    }\n\n    return json;\n}\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":247217,"reputation":213455,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1606334240,"creation_date":1380964875,"answer_id":19196092,"question_id":6514876,"body_markdown":"### Use a third party library for the JSON export\r\n\r\nYou could use [jOOQ][1] for the job. You don&#39;t have to use all of jOOQ&#39;s features to take advantage of some useful JDBC extensions. In this case, simply write:\r\n\r\n    String json = DSL.using(connection).fetch(resultSet).formatJSON();\r\n\r\nRelevant API methods used are:\r\n\r\n- [`DSLContext.fetch(ResultSet)`][2] to convert a JDBC ResultSet into a jOOQ Result.\r\n- [`Result.formatJSON()`][3] to format the jOOQ Result into a JSON String.\r\n\r\nThe resulting formatting will look like this:\r\n\r\n&lt;!-- language: lang-javascript --&gt;\r\n\r\n    {&quot;fields&quot;:[{&quot;name&quot;:&quot;field-1&quot;,&quot;type&quot;:&quot;type-1&quot;},\r\n               {&quot;name&quot;:&quot;field-2&quot;,&quot;type&quot;:&quot;type-2&quot;},\r\n               ...,\r\n               {&quot;name&quot;:&quot;field-n&quot;,&quot;type&quot;:&quot;type-n&quot;}],\r\n     &quot;records&quot;:[[value-1-1,value-1-2,...,value-1-n],\r\n                [value-2-1,value-2-2,...,value-2-n]]}\r\n\r\nYou could also create your own formatting rather easily, through [`Result.map(RecordMapper)`][4]\r\n\r\nThis essentially does the same as your code, circumventing the generation of JSON objects, &quot;streaming&quot; directly into a `StringBuilder`. I&#39;d say that the performance overhead should be negligible in both cases, though.\r\n\r\n(Disclaimer: I work for the company behind jOOQ)\r\n\r\n### Use SQL/JSON features instead\r\n\r\nOf course, [you don&#39;t have to use your middleware to map JDBC ResultSets to JSON][5]. The question doesn&#39;t mention for which SQL dialect this needs to be done, but many support standard SQL/JSON syntax, or something similar, e.g.\r\n\r\n**Oracle**\r\n\r\n```sql\r\nSELECT json_arrayagg(json_object(*))\r\nFROM t\r\n```\r\n\r\n**SQL Server**\r\n\r\n```sql\r\nSELECT *\r\nFROM t\r\nFOR JSON AUTO\r\n```\r\n\r\n**PostgreSQL**\r\n\r\n```sql\r\nSELECT to_jsonb(array_agg(t))\r\nFROM t\r\n```\r\n\r\n\r\n  [1]: http://www.jooq.org\r\n  [2]: http://www.jooq.org/javadoc/latest/org/jooq/DSLContext.html#fetch%28java.sql.ResultSet%29\r\n  [3]: http://www.jooq.org/javadoc/latest/org/jooq/Result.html#formatJSON%28%29\r\n  [4]: http://www.jooq.org/javadoc/latest/org/jooq/Result.html#map%28org.jooq.RecordMapper%29\r\n  [5]: https://blog.jooq.org/2019/11/13/stop-mapping-stuff-in-your-middleware-use-sqls-xml-or-json-operators-instead/","title":"Most efficient conversion of ResultSet to JSON?","body":"<h3>Use a third party library for the JSON export</h3>\n<p>You could use <a href=\"http://www.jooq.org\" rel=\"nofollow noreferrer\">jOOQ</a> for the job. You don't have to use all of jOOQ's features to take advantage of some useful JDBC extensions. In this case, simply write:</p>\n<pre><code>String json = DSL.using(connection).fetch(resultSet).formatJSON();\n</code></pre>\n<p>Relevant API methods used are:</p>\n<ul>\n<li><a href=\"http://www.jooq.org/javadoc/latest/org/jooq/DSLContext.html#fetch%28java.sql.ResultSet%29\" rel=\"nofollow noreferrer\"><code>DSLContext.fetch(ResultSet)</code></a> to convert a JDBC ResultSet into a jOOQ Result.</li>\n<li><a href=\"http://www.jooq.org/javadoc/latest/org/jooq/Result.html#formatJSON%28%29\" rel=\"nofollow noreferrer\"><code>Result.formatJSON()</code></a> to format the jOOQ Result into a JSON String.</li>\n</ul>\n<p>The resulting formatting will look like this:</p>\n<pre class=\"lang-javascript prettyprint-override\"><code>{&quot;fields&quot;:[{&quot;name&quot;:&quot;field-1&quot;,&quot;type&quot;:&quot;type-1&quot;},\n           {&quot;name&quot;:&quot;field-2&quot;,&quot;type&quot;:&quot;type-2&quot;},\n           ...,\n           {&quot;name&quot;:&quot;field-n&quot;,&quot;type&quot;:&quot;type-n&quot;}],\n &quot;records&quot;:[[value-1-1,value-1-2,...,value-1-n],\n            [value-2-1,value-2-2,...,value-2-n]]}\n</code></pre>\n<p>You could also create your own formatting rather easily, through <a href=\"http://www.jooq.org/javadoc/latest/org/jooq/Result.html#map%28org.jooq.RecordMapper%29\" rel=\"nofollow noreferrer\"><code>Result.map(RecordMapper)</code></a></p>\n<p>This essentially does the same as your code, circumventing the generation of JSON objects, &quot;streaming&quot; directly into a <code>StringBuilder</code>. I'd say that the performance overhead should be negligible in both cases, though.</p>\n<p>(Disclaimer: I work for the company behind jOOQ)</p>\n<h3>Use SQL/JSON features instead</h3>\n<p>Of course, <a href=\"https://blog.jooq.org/2019/11/13/stop-mapping-stuff-in-your-middleware-use-sqls-xml-or-json-operators-instead/\" rel=\"nofollow noreferrer\">you don't have to use your middleware to map JDBC ResultSets to JSON</a>. The question doesn't mention for which SQL dialect this needs to be done, but many support standard SQL/JSON syntax, or something similar, e.g.</p>\n<p><strong>Oracle</strong></p>\n<pre class=\"lang-sql prettyprint-override\"><code>SELECT json_arrayagg(json_object(*))\nFROM t\n</code></pre>\n<p><strong>SQL Server</strong></p>\n<pre class=\"lang-sql prettyprint-override\"><code>SELECT *\nFROM t\nFOR JSON AUTO\n</code></pre>\n<p><strong>PostgreSQL</strong></p>\n<pre class=\"lang-sql prettyprint-override\"><code>SELECT to_jsonb(array_agg(t))\nFROM t\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4393110,"reputation":11,"user_id":3580951,"display_name":"reil bhudaya"},"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1411984335,"creation_date":1411982463,"answer_id":26096477,"question_id":6514876,"body_markdown":" the other way , here I have used ArrayList and Map, so its not  call json object row by row but after iteration of resultset finished :\r\n\r\n\r\n\r\n \r\n\r\n     List&lt;Map&lt;String, String&gt;&gt; list = new ArrayList&lt;Map&lt;String, String&gt;&gt;();\r\n    \t\t \r\n      ResultSetMetaData rsMetaData = rs.getMetaData();\t\r\n    \t\t\t\t   \t\t\t\t    \r\n    \t\t\t\t\t \r\n    \t  while(rs.next()){\r\n    \t\t\t\t\t\t\r\n    \t\t\t  Map map = new HashMap();\r\n    \t\t\t  for (int i = 1; i &lt;= rsMetaData.getColumnCount(); i++) {\r\n    \t\t\t\t String key = rsMetaData.getColumnName(i);\r\n                        \r\n                      String value = null;\r\n    \r\n                   if (rsmd.getColumnType(i) == java.sql.Types.VARCHAR) {\r\n                               value = rs.getString(key);\r\n                   } else if(rsmd.getColumnType(i)==java.sql.Types.BIGINT)                         \r\n                                 value = rs.getLong(key);\r\n                   }                  \r\n    \r\n    \t\t\t\t   \r\n    \t\t\t\t    map.put(key, value);\r\n    \t\t\t  }\r\n    \t\t\t  list.add(map);\r\n    \r\n    \t\t\t\t\t\t\t\r\n    \t}\r\n    \t\t\t\t\t\r\n    \r\n         json.put(list);\t\r\n\r\n\t\r\n\r\n\r\n","title":"Most efficient conversion of ResultSet to JSON?","body":"<p>the other way , here I have used ArrayList and Map, so its not  call json object row by row but after iteration of resultset finished :</p>\n\n<pre><code> List&lt;Map&lt;String, String&gt;&gt; list = new ArrayList&lt;Map&lt;String, String&gt;&gt;();\n\n  ResultSetMetaData rsMetaData = rs.getMetaData();  \n\n\n      while(rs.next()){\n\n              Map map = new HashMap();\n              for (int i = 1; i &lt;= rsMetaData.getColumnCount(); i++) {\n                 String key = rsMetaData.getColumnName(i);\n\n                  String value = null;\n\n               if (rsmd.getColumnType(i) == java.sql.Types.VARCHAR) {\n                           value = rs.getString(key);\n               } else if(rsmd.getColumnType(i)==java.sql.Types.BIGINT)                         \n                             value = rs.getLong(key);\n               }                  \n\n\n                    map.put(key, value);\n              }\n              list.add(map);\n\n\n    }\n\n\n     json.put(list);    \n</code></pre>\n"},{"tags":[],"owner":{"account_id":3970425,"reputation":4907,"user_id":3275167,"accept_rate":82,"display_name":"coderz"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1432717682,"creation_date":1432717682,"answer_id":30477906,"question_id":6514876,"body_markdown":"First pre-generate column names, second use `rs.getString(i)` instead of `rs.getString(column_name)`.\r\n\r\nThe following is an implementation of this:\r\n\r\n        /*\r\n         * Convert ResultSet to a common JSON Object array\r\n         * Result is like: [{&quot;ID&quot;:&quot;1&quot;,&quot;NAME&quot;:&quot;Tom&quot;,&quot;AGE&quot;:&quot;24&quot;}, {&quot;ID&quot;:&quot;2&quot;,&quot;NAME&quot;:&quot;Bob&quot;,&quot;AGE&quot;:&quot;26&quot;}, ...]\r\n         */\r\n        public static List&lt;JSONObject&gt; getFormattedResult(ResultSet rs) {\r\n            List&lt;JSONObject&gt; resList = new ArrayList&lt;JSONObject&gt;();\r\n            try {\r\n                // get column names\r\n                ResultSetMetaData rsMeta = rs.getMetaData();\r\n                int columnCnt = rsMeta.getColumnCount();\r\n                List&lt;String&gt; columnNames = new ArrayList&lt;String&gt;();\r\n                for(int i=1;i&lt;=columnCnt;i++) {\r\n                    columnNames.add(rsMeta.getColumnName(i).toUpperCase());\r\n                }\r\n                \r\n                while(rs.next()) { // convert each object to an human readable JSON object\r\n                    JSONObject obj = new JSONObject();\r\n                    for(int i=1;i&lt;=columnCnt;i++) {\r\n                        String key = columnNames.get(i - 1);\r\n                        String value = rs.getString(i);\r\n                        obj.put(key, value);\r\n                    }\r\n                    resList.add(obj);\r\n                }\r\n            } catch(Exception e) {\r\n                e.printStackTrace();\r\n            } finally {\r\n                try {\r\n                    rs.close();\r\n                } catch (SQLException e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n            return resList;\r\n        }\r\n","title":"Most efficient conversion of ResultSet to JSON?","body":"<p>First pre-generate column names, second use <code>rs.getString(i)</code> instead of <code>rs.getString(column_name)</code>.</p>\n\n<p>The following is an implementation of this:</p>\n\n<pre><code>    /*\n     * Convert ResultSet to a common JSON Object array\n     * Result is like: [{\"ID\":\"1\",\"NAME\":\"Tom\",\"AGE\":\"24\"}, {\"ID\":\"2\",\"NAME\":\"Bob\",\"AGE\":\"26\"}, ...]\n     */\n    public static List&lt;JSONObject&gt; getFormattedResult(ResultSet rs) {\n        List&lt;JSONObject&gt; resList = new ArrayList&lt;JSONObject&gt;();\n        try {\n            // get column names\n            ResultSetMetaData rsMeta = rs.getMetaData();\n            int columnCnt = rsMeta.getColumnCount();\n            List&lt;String&gt; columnNames = new ArrayList&lt;String&gt;();\n            for(int i=1;i&lt;=columnCnt;i++) {\n                columnNames.add(rsMeta.getColumnName(i).toUpperCase());\n            }\n\n            while(rs.next()) { // convert each object to an human readable JSON object\n                JSONObject obj = new JSONObject();\n                for(int i=1;i&lt;=columnCnt;i++) {\n                    String key = columnNames.get(i - 1);\n                    String value = rs.getString(i);\n                    obj.put(key, value);\n                }\n                resList.add(obj);\n            }\n        } catch(Exception e) {\n            e.printStackTrace();\n        } finally {\n            try {\n                rs.close();\n            } catch (SQLException e) {\n                e.printStackTrace();\n            }\n        }\n        return resList;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1960454,"reputation":44539,"user_id":1762224,"accept_rate":61,"display_name":"Mr. Polywhirl"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1452723030,"creation_date":1452705278,"answer_id":34772942,"question_id":6514876,"body_markdown":"This answer may not be the most efficient, but it sure is dynamic. Pairing native JDBC with Google&#39;s Gson library, I easily can convert from an SQL result to a JSON stream.\r\n\r\nI have included the converter, example DB properties file, SQL table generation, and a Gradle build file (with dependencies used).\r\n\r\n## QueryApp.java\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n    \r\n    import java.io.PrintWriter;\r\n    \r\n    import com.oracle.jdbc.ResultSetConverter;\r\n\r\n    public class QueryApp {\r\n    \tpublic static void main(String[] args) {\r\n            PrintWriter writer = new PrintWriter(System.out);\r\n            String dbProps = &quot;/database.properties&quot;;\r\n            String indent = &quot;    &quot;;\r\n    \r\n            writer.println(&quot;Basic SELECT:&quot;);\r\n            ResultSetConverter.queryToJson(writer, dbProps, &quot;SELECT * FROM Beatles&quot;, indent, false);\r\n    \r\n            writer.println(&quot;\\n\\nIntermediate SELECT:&quot;);\r\n            ResultSetConverter.queryToJson(writer, dbProps, &quot;SELECT first_name, last_name, getAge(date_of_birth) as age FROM Beatles&quot;, indent, true);\r\n        }\r\n    }\r\n\r\n## ResultSetConverter.java\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    package com.oracle.jdbc;\r\n    \r\n    import java.io.*;\r\n    import java.lang.reflect.Type;\r\n    import java.sql.*;\r\n    import java.util.*;\r\n    \r\n    import com.google.common.reflect.TypeToken;\r\n    import com.google.gson.GsonBuilder;\r\n    import com.google.gson.stream.JsonWriter;\r\n    \r\n    public class ResultSetConverter {\r\n        public static final Type RESULT_TYPE = new TypeToken&lt;List&lt;Map&lt;String, Object&gt;&gt;&gt;() {\r\n            private static final long serialVersionUID = -3467016635635320150L;\r\n        }.getType();\r\n    \r\n        public static void queryToJson(Writer writer, String connectionProperties, String query, String indent, boolean closeWriter) {\r\n            Connection conn = null;\r\n            Statement stmt = null;\r\n            GsonBuilder gson = new GsonBuilder();\r\n            JsonWriter jsonWriter = new JsonWriter(writer);\r\n    \r\n            if (indent != null) jsonWriter.setIndent(indent);\r\n    \r\n            try {\r\n                Properties props = readConnectionInfo(connectionProperties);\r\n                Class.forName(props.getProperty(&quot;driver&quot;));\r\n    \r\n                conn = openConnection(props);\r\n                stmt = conn.createStatement();\r\n    \r\n                gson.create().toJson(QueryHelper.select(stmt, query), RESULT_TYPE, jsonWriter);\r\n    \r\n                if (closeWriter) jsonWriter.close();\r\n    \r\n                stmt.close();\r\n                conn.close();\r\n            } catch (SQLException se) {\r\n                se.printStackTrace();\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n                try {\r\n                    if (stmt != null) stmt.close();\r\n                } catch (SQLException se2) {\r\n                }\r\n                try {\r\n                    if (conn != null) conn.close();\r\n                } catch (SQLException se) {\r\n                    se.printStackTrace();\r\n                }\r\n                try {\r\n                    if (closeWriter &amp;&amp; jsonWriter != null) jsonWriter.close();\r\n                } catch (IOException ioe) {\r\n                    ioe.printStackTrace();\r\n                }\r\n            }\r\n        }\r\n    \r\n        private static Properties readConnectionInfo(String resource) throws IOException {\r\n            Properties properties = new Properties();\r\n            InputStream in = ResultSetConverter.class.getResourceAsStream(resource);\r\n            properties.load(in);\r\n            in.close();\r\n    \r\n            return properties;\r\n        }\r\n    \r\n        private static Connection openConnection(Properties connectionProperties) throws IOException, SQLException {\r\n            String database = connectionProperties.getProperty(&quot;database&quot;);\r\n            String username = connectionProperties.getProperty(&quot;username&quot;);\r\n            String password = connectionProperties.getProperty(&quot;password&quot;);\r\n    \r\n            return DriverManager.getConnection(database, username, password);\r\n        }\r\n    }\r\n\r\n## QueryHelper.java\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    package com.oracle.jdbc;\r\n    \r\n    import java.sql.*;\r\n    import java.text.*;\r\n    import java.util.*;\r\n    \r\n    import com.google.common.base.CaseFormat;\r\n    \r\n    public class QueryHelper {\r\n    \tstatic DateFormat DATE_FORMAT = new SimpleDateFormat(&quot;YYYY-MM-dd&quot;);\r\n    \r\n    \tpublic static List&lt;Map&lt;String, Object&gt;&gt; select(Statement stmt, String query) throws SQLException {\r\n    \t\tResultSet resultSet = stmt.executeQuery(query);\r\n    \t\tList&lt;Map&lt;String, Object&gt;&gt; records = mapRecords(resultSet);\r\n    \r\n    \t\tresultSet.close();\r\n    \r\n    \t\treturn records;\r\n    \t}\r\n    \r\n    \tpublic static List&lt;Map&lt;String, Object&gt;&gt; mapRecords(ResultSet resultSet) throws SQLException {\r\n    \t\tList&lt;Map&lt;String, Object&gt;&gt; records = new ArrayList&lt;Map&lt;String, Object&gt;&gt;();\r\n    \t\tResultSetMetaData metaData = resultSet.getMetaData();\r\n    \r\n    \t\twhile (resultSet.next()) {\r\n    \t\t\trecords.add(mapRecord(resultSet, metaData));\r\n    \t\t}\r\n    \r\n    \t\treturn records;\r\n    \t}\r\n    \r\n    \tpublic static Map&lt;String, Object&gt; mapRecord(ResultSet resultSet, ResultSetMetaData metaData) throws SQLException {\r\n    \t\tMap&lt;String, Object&gt; record = new HashMap&lt;String, Object&gt;();\r\n    \r\n    \t\tfor (int c = 1; c &lt;= metaData.getColumnCount(); c++) {\r\n    \t\t\tString columnType = metaData.getColumnTypeName(c);\r\n    \t\t\tString columnName = formatPropertyName(metaData.getColumnName(c));\r\n    \t\t\tObject value = resultSet.getObject(c);\r\n    \r\n    \t\t\tif (columnType.equals(&quot;DATE&quot;)) {\r\n    \t\t\t\tvalue = DATE_FORMAT.format(value);\r\n    \t\t\t}\r\n    \r\n    \t\t\trecord.put(columnName, value);\r\n    \t\t}\r\n    \r\n    \t\treturn record;\r\n    \t}\r\n    \r\n    \tprivate static String formatPropertyName(String property) {\r\n    \t\treturn CaseFormat.LOWER_UNDERSCORE.to(CaseFormat.LOWER_CAMEL, property);\r\n    \t}\r\n    }\r\n\r\n## database.properties\r\n\r\n&lt;!-- language: lang-sh --&gt;\r\n\r\n    driver=com.mysql.jdbc.Driver\r\n    database=jdbc:mysql://localhost/JDBC_Tutorial\r\n    username=root\r\n    password=\r\n\r\n## JDBC_Tutorial.sql\r\n\r\n&lt;!-- language: lang-sql --&gt;\r\n\r\n    -- phpMyAdmin SQL Dump\r\n    -- version 4.5.1\r\n    -- http://www.phpmyadmin.net\r\n    --\r\n    -- Host: 127.0.0.1\r\n    -- Generation Time: Jan 12, 2016 at 07:40 PM\r\n    -- Server version: 10.1.8-MariaDB\r\n    -- PHP Version: 5.6.14\r\n    \r\n    SET SQL_MODE = &quot;NO_AUTO_VALUE_ON_ZERO&quot;;\r\n    SET time_zone = &quot;+00:00&quot;;\r\n    \r\n    \r\n    /*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;\r\n    /*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;\r\n    /*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;\r\n    /*!40101 SET NAMES utf8mb4 */;\r\n    \r\n    --\r\n    -- Database: `jdbc_tutorial`\r\n    --\r\n    CREATE DATABASE IF NOT EXISTS `jdbc_tutorial` DEFAULT CHARACTER SET latin1 COLLATE latin1_swedish_ci;\r\n    USE `jdbc_tutorial`;\r\n    \r\n    DELIMITER $$\r\n    --\r\n    -- Functions\r\n    --\r\n    DROP FUNCTION IF EXISTS `getAge`$$\r\n    CREATE DEFINER=`root`@`localhost` FUNCTION `getAge` (`in_dob` DATE) RETURNS INT(11) NO SQL\r\n    BEGIN\r\n    DECLARE l_age INT;\r\n       IF DATE_FORMAT(NOW(),&#39;00-%m-%d&#39;) &gt;= DATE_FORMAT(in_dob,&#39;00-%m-%d&#39;) THEN\r\n          -- This person has had a birthday this year\r\n          SET l_age=DATE_FORMAT(NOW(),&#39;%Y&#39;)-DATE_FORMAT(in_dob,&#39;%Y&#39;);\r\n       ELSE\r\n          -- Yet to have a birthday this year\r\n          SET l_age=DATE_FORMAT(NOW(),&#39;%Y&#39;)-DATE_FORMAT(in_dob,&#39;%Y&#39;)-1;\r\n       END IF;\r\n          RETURN(l_age);\r\n    END$$\r\n    \r\n    DELIMITER ;\r\n    \r\n    -- --------------------------------------------------------\r\n    \r\n    --\r\n    -- Table structure for table `beatles`\r\n    --\r\n    \r\n    DROP TABLE IF EXISTS `beatles`;\r\n    CREATE TABLE IF NOT EXISTS `beatles` (\r\n      `id` int(11) NOT NULL,\r\n      `first_name` varchar(255) DEFAULT NULL,\r\n      `last_name` varchar(255) DEFAULT NULL,\r\n      `date_of_birth` date DEFAULT NULL,\r\n      PRIMARY KEY (`id`)\r\n    ) ENGINE=InnoDB DEFAULT CHARSET=latin1;\r\n    \r\n    --\r\n    -- Truncate table before insert `beatles`\r\n    --\r\n    \r\n    TRUNCATE TABLE `beatles`;\r\n    --\r\n    -- Dumping data for table `beatles`\r\n    --\r\n    \r\n    INSERT INTO `beatles` (`id`, `first_name`, `last_name`, `date_of_birth`) VALUES(100, &#39;John&#39;, &#39;Lennon&#39;, &#39;1940-10-09&#39;);\r\n    INSERT INTO `beatles` (`id`, `first_name`, `last_name`, `date_of_birth`) VALUES(101, &#39;Paul&#39;, &#39;McCartney&#39;, &#39;1942-06-18&#39;);\r\n    INSERT INTO `beatles` (`id`, `first_name`, `last_name`, `date_of_birth`) VALUES(102, &#39;George&#39;, &#39;Harrison&#39;, &#39;1943-02-25&#39;);\r\n    INSERT INTO `beatles` (`id`, `first_name`, `last_name`, `date_of_birth`) VALUES(103, &#39;Ringo&#39;, &#39;Starr&#39;, &#39;1940-07-07&#39;);\r\n    \r\n    /*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;\r\n    /*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;\r\n    /*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;\r\n\r\n## build.gradle\r\n\r\n&lt;!-- language: lang-groovy --&gt;\r\n\r\n    apply plugin: &#39;java&#39;\r\n    apply plugin: &#39;eclipse&#39;\r\n    apply plugin: &#39;application&#39;\r\n    \r\n    mainClassName = &#39;com.oracle.jdbc.QueryApp&#39;\r\n    \r\n    repositories {\r\n        maven  {\r\n            url &quot;http://repo1.maven.org/maven2&quot;\r\n        }\r\n    }\r\n    \r\n    jar {\r\n        baseName = &#39;jdbc-tutorial&#39;\r\n        version =  &#39;1.0.0&#39;\r\n    }\r\n    \r\n    sourceCompatibility = 1.7\r\n    targetCompatibility = 1.7\r\n    \r\n    dependencies {\r\n    \tcompile &#39;mysql:mysql-connector-java:5.1.16&#39;\r\n        compile &#39;com.google.guava:guava:18.0&#39;\r\n        compile &#39;com.google.code.gson:gson:1.7.2&#39;\r\n    }\r\n    \r\n    task wrapper(type: Wrapper) {\r\n        gradleVersion = &#39;2.9&#39;\r\n    }\r\n\r\n---\r\n\r\n# Results\r\n\r\n### Basic SELECT\r\n\r\n&lt;!-- language: lang-javascript --&gt;\r\n\r\n    [\r\n        {\r\n            &quot;firstName&quot;: &quot;John&quot;,\r\n            &quot;lastName&quot;: &quot;Lennon&quot;,\r\n            &quot;dateOfBirth&quot;: &quot;1940-10-09&quot;,\r\n            &quot;id&quot;: 100\r\n        },\r\n        {\r\n            &quot;firstName&quot;: &quot;Paul&quot;,\r\n            &quot;lastName&quot;: &quot;McCartney&quot;,\r\n            &quot;dateOfBirth&quot;: &quot;1942-06-18&quot;,\r\n            &quot;id&quot;: 101\r\n        },\r\n        {\r\n            &quot;firstName&quot;: &quot;George&quot;,\r\n            &quot;lastName&quot;: &quot;Harrison&quot;,\r\n            &quot;dateOfBirth&quot;: &quot;1943-02-25&quot;,\r\n            &quot;id&quot;: 102\r\n        },\r\n        {\r\n            &quot;firstName&quot;: &quot;Ringo&quot;,\r\n            &quot;lastName&quot;: &quot;Starr&quot;,\r\n            &quot;dateOfBirth&quot;: &quot;1940-07-07&quot;,\r\n            &quot;id&quot;: 103\r\n        }\r\n    ]\r\n    \r\n### Intermediate SELECT\r\n\r\n&lt;!-- language: lang-javascript --&gt;\r\n\r\n    [\r\n        {\r\n            &quot;firstName&quot;: &quot;John&quot;,\r\n            &quot;lastName&quot;: &quot;Lennon&quot;,\r\n            &quot;age&quot;: 75\r\n        },\r\n        {\r\n            &quot;firstName&quot;: &quot;Paul&quot;,\r\n            &quot;lastName&quot;: &quot;McCartney&quot;,\r\n            &quot;age&quot;: 73\r\n        },\r\n        {\r\n            &quot;firstName&quot;: &quot;George&quot;,\r\n            &quot;lastName&quot;: &quot;Harrison&quot;,\r\n            &quot;age&quot;: 72\r\n        },\r\n        {\r\n            &quot;firstName&quot;: &quot;Ringo&quot;,\r\n            &quot;lastName&quot;: &quot;Starr&quot;,\r\n            &quot;age&quot;: 75\r\n        }\r\n    ]","title":"Most efficient conversion of ResultSet to JSON?","body":"<p>This answer may not be the most efficient, but it sure is dynamic. Pairing native JDBC with Google's Gson library, I easily can convert from an SQL result to a JSON stream.</p>\n\n<p>I have included the converter, example DB properties file, SQL table generation, and a Gradle build file (with dependencies used).</p>\n\n<h2>QueryApp.java</h2>\n\n<pre class=\"lang-java prettyprint-override\"><code>import java.io.PrintWriter;\n\nimport com.oracle.jdbc.ResultSetConverter;\n\npublic class QueryApp {\n    public static void main(String[] args) {\n        PrintWriter writer = new PrintWriter(System.out);\n        String dbProps = \"/database.properties\";\n        String indent = \"    \";\n\n        writer.println(\"Basic SELECT:\");\n        ResultSetConverter.queryToJson(writer, dbProps, \"SELECT * FROM Beatles\", indent, false);\n\n        writer.println(\"\\n\\nIntermediate SELECT:\");\n        ResultSetConverter.queryToJson(writer, dbProps, \"SELECT first_name, last_name, getAge(date_of_birth) as age FROM Beatles\", indent, true);\n    }\n}\n</code></pre>\n\n<h2>ResultSetConverter.java</h2>\n\n<pre class=\"lang-java prettyprint-override\"><code>package com.oracle.jdbc;\n\nimport java.io.*;\nimport java.lang.reflect.Type;\nimport java.sql.*;\nimport java.util.*;\n\nimport com.google.common.reflect.TypeToken;\nimport com.google.gson.GsonBuilder;\nimport com.google.gson.stream.JsonWriter;\n\npublic class ResultSetConverter {\n    public static final Type RESULT_TYPE = new TypeToken&lt;List&lt;Map&lt;String, Object&gt;&gt;&gt;() {\n        private static final long serialVersionUID = -3467016635635320150L;\n    }.getType();\n\n    public static void queryToJson(Writer writer, String connectionProperties, String query, String indent, boolean closeWriter) {\n        Connection conn = null;\n        Statement stmt = null;\n        GsonBuilder gson = new GsonBuilder();\n        JsonWriter jsonWriter = new JsonWriter(writer);\n\n        if (indent != null) jsonWriter.setIndent(indent);\n\n        try {\n            Properties props = readConnectionInfo(connectionProperties);\n            Class.forName(props.getProperty(\"driver\"));\n\n            conn = openConnection(props);\n            stmt = conn.createStatement();\n\n            gson.create().toJson(QueryHelper.select(stmt, query), RESULT_TYPE, jsonWriter);\n\n            if (closeWriter) jsonWriter.close();\n\n            stmt.close();\n            conn.close();\n        } catch (SQLException se) {\n            se.printStackTrace();\n        } catch (Exception e) {\n            e.printStackTrace();\n            try {\n                if (stmt != null) stmt.close();\n            } catch (SQLException se2) {\n            }\n            try {\n                if (conn != null) conn.close();\n            } catch (SQLException se) {\n                se.printStackTrace();\n            }\n            try {\n                if (closeWriter &amp;&amp; jsonWriter != null) jsonWriter.close();\n            } catch (IOException ioe) {\n                ioe.printStackTrace();\n            }\n        }\n    }\n\n    private static Properties readConnectionInfo(String resource) throws IOException {\n        Properties properties = new Properties();\n        InputStream in = ResultSetConverter.class.getResourceAsStream(resource);\n        properties.load(in);\n        in.close();\n\n        return properties;\n    }\n\n    private static Connection openConnection(Properties connectionProperties) throws IOException, SQLException {\n        String database = connectionProperties.getProperty(\"database\");\n        String username = connectionProperties.getProperty(\"username\");\n        String password = connectionProperties.getProperty(\"password\");\n\n        return DriverManager.getConnection(database, username, password);\n    }\n}\n</code></pre>\n\n<h2>QueryHelper.java</h2>\n\n<pre class=\"lang-java prettyprint-override\"><code>package com.oracle.jdbc;\n\nimport java.sql.*;\nimport java.text.*;\nimport java.util.*;\n\nimport com.google.common.base.CaseFormat;\n\npublic class QueryHelper {\n    static DateFormat DATE_FORMAT = new SimpleDateFormat(\"YYYY-MM-dd\");\n\n    public static List&lt;Map&lt;String, Object&gt;&gt; select(Statement stmt, String query) throws SQLException {\n        ResultSet resultSet = stmt.executeQuery(query);\n        List&lt;Map&lt;String, Object&gt;&gt; records = mapRecords(resultSet);\n\n        resultSet.close();\n\n        return records;\n    }\n\n    public static List&lt;Map&lt;String, Object&gt;&gt; mapRecords(ResultSet resultSet) throws SQLException {\n        List&lt;Map&lt;String, Object&gt;&gt; records = new ArrayList&lt;Map&lt;String, Object&gt;&gt;();\n        ResultSetMetaData metaData = resultSet.getMetaData();\n\n        while (resultSet.next()) {\n            records.add(mapRecord(resultSet, metaData));\n        }\n\n        return records;\n    }\n\n    public static Map&lt;String, Object&gt; mapRecord(ResultSet resultSet, ResultSetMetaData metaData) throws SQLException {\n        Map&lt;String, Object&gt; record = new HashMap&lt;String, Object&gt;();\n\n        for (int c = 1; c &lt;= metaData.getColumnCount(); c++) {\n            String columnType = metaData.getColumnTypeName(c);\n            String columnName = formatPropertyName(metaData.getColumnName(c));\n            Object value = resultSet.getObject(c);\n\n            if (columnType.equals(\"DATE\")) {\n                value = DATE_FORMAT.format(value);\n            }\n\n            record.put(columnName, value);\n        }\n\n        return record;\n    }\n\n    private static String formatPropertyName(String property) {\n        return CaseFormat.LOWER_UNDERSCORE.to(CaseFormat.LOWER_CAMEL, property);\n    }\n}\n</code></pre>\n\n<h2>database.properties</h2>\n\n<pre class=\"lang-sh prettyprint-override\"><code>driver=com.mysql.jdbc.Driver\ndatabase=jdbc:mysql://localhost/JDBC_Tutorial\nusername=root\npassword=\n</code></pre>\n\n<h2>JDBC_Tutorial.sql</h2>\n\n<pre class=\"lang-sql prettyprint-override\"><code>-- phpMyAdmin SQL Dump\n-- version 4.5.1\n-- http://www.phpmyadmin.net\n--\n-- Host: 127.0.0.1\n-- Generation Time: Jan 12, 2016 at 07:40 PM\n-- Server version: 10.1.8-MariaDB\n-- PHP Version: 5.6.14\n\nSET SQL_MODE = \"NO_AUTO_VALUE_ON_ZERO\";\nSET time_zone = \"+00:00\";\n\n\n/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;\n/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;\n/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;\n/*!40101 SET NAMES utf8mb4 */;\n\n--\n-- Database: `jdbc_tutorial`\n--\nCREATE DATABASE IF NOT EXISTS `jdbc_tutorial` DEFAULT CHARACTER SET latin1 COLLATE latin1_swedish_ci;\nUSE `jdbc_tutorial`;\n\nDELIMITER $$\n--\n-- Functions\n--\nDROP FUNCTION IF EXISTS `getAge`$$\nCREATE DEFINER=`root`@`localhost` FUNCTION `getAge` (`in_dob` DATE) RETURNS INT(11) NO SQL\nBEGIN\nDECLARE l_age INT;\n   IF DATE_FORMAT(NOW(),'00-%m-%d') &gt;= DATE_FORMAT(in_dob,'00-%m-%d') THEN\n      -- This person has had a birthday this year\n      SET l_age=DATE_FORMAT(NOW(),'%Y')-DATE_FORMAT(in_dob,'%Y');\n   ELSE\n      -- Yet to have a birthday this year\n      SET l_age=DATE_FORMAT(NOW(),'%Y')-DATE_FORMAT(in_dob,'%Y')-1;\n   END IF;\n      RETURN(l_age);\nEND$$\n\nDELIMITER ;\n\n-- --------------------------------------------------------\n\n--\n-- Table structure for table `beatles`\n--\n\nDROP TABLE IF EXISTS `beatles`;\nCREATE TABLE IF NOT EXISTS `beatles` (\n  `id` int(11) NOT NULL,\n  `first_name` varchar(255) DEFAULT NULL,\n  `last_name` varchar(255) DEFAULT NULL,\n  `date_of_birth` date DEFAULT NULL,\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=latin1;\n\n--\n-- Truncate table before insert `beatles`\n--\n\nTRUNCATE TABLE `beatles`;\n--\n-- Dumping data for table `beatles`\n--\n\nINSERT INTO `beatles` (`id`, `first_name`, `last_name`, `date_of_birth`) VALUES(100, 'John', 'Lennon', '1940-10-09');\nINSERT INTO `beatles` (`id`, `first_name`, `last_name`, `date_of_birth`) VALUES(101, 'Paul', 'McCartney', '1942-06-18');\nINSERT INTO `beatles` (`id`, `first_name`, `last_name`, `date_of_birth`) VALUES(102, 'George', 'Harrison', '1943-02-25');\nINSERT INTO `beatles` (`id`, `first_name`, `last_name`, `date_of_birth`) VALUES(103, 'Ringo', 'Starr', '1940-07-07');\n\n/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;\n/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;\n/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;\n</code></pre>\n\n<h2>build.gradle</h2>\n\n<pre class=\"lang-groovy prettyprint-override\"><code>apply plugin: 'java'\napply plugin: 'eclipse'\napply plugin: 'application'\n\nmainClassName = 'com.oracle.jdbc.QueryApp'\n\nrepositories {\n    maven  {\n        url \"http://repo1.maven.org/maven2\"\n    }\n}\n\njar {\n    baseName = 'jdbc-tutorial'\n    version =  '1.0.0'\n}\n\nsourceCompatibility = 1.7\ntargetCompatibility = 1.7\n\ndependencies {\n    compile 'mysql:mysql-connector-java:5.1.16'\n    compile 'com.google.guava:guava:18.0'\n    compile 'com.google.code.gson:gson:1.7.2'\n}\n\ntask wrapper(type: Wrapper) {\n    gradleVersion = '2.9'\n}\n</code></pre>\n\n<hr>\n\n<h1>Results</h1>\n\n<h3>Basic SELECT</h3>\n\n<pre class=\"lang-javascript prettyprint-override\"><code>[\n    {\n        \"firstName\": \"John\",\n        \"lastName\": \"Lennon\",\n        \"dateOfBirth\": \"1940-10-09\",\n        \"id\": 100\n    },\n    {\n        \"firstName\": \"Paul\",\n        \"lastName\": \"McCartney\",\n        \"dateOfBirth\": \"1942-06-18\",\n        \"id\": 101\n    },\n    {\n        \"firstName\": \"George\",\n        \"lastName\": \"Harrison\",\n        \"dateOfBirth\": \"1943-02-25\",\n        \"id\": 102\n    },\n    {\n        \"firstName\": \"Ringo\",\n        \"lastName\": \"Starr\",\n        \"dateOfBirth\": \"1940-07-07\",\n        \"id\": 103\n    }\n]\n</code></pre>\n\n<h3>Intermediate SELECT</h3>\n\n<pre class=\"lang-javascript prettyprint-override\"><code>[\n    {\n        \"firstName\": \"John\",\n        \"lastName\": \"Lennon\",\n        \"age\": 75\n    },\n    {\n        \"firstName\": \"Paul\",\n        \"lastName\": \"McCartney\",\n        \"age\": 73\n    },\n    {\n        \"firstName\": \"George\",\n        \"lastName\": \"Harrison\",\n        \"age\": 72\n    },\n    {\n        \"firstName\": \"Ringo\",\n        \"lastName\": \"Starr\",\n        \"age\": 75\n    }\n]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3569748,"reputation":2756,"user_id":2980375,"display_name":"Elhanan Mishraky"},"down_vote_count":0,"up_vote_count":37,"is_accepted":false,"score":37,"last_activity_date":1485473619,"creation_date":1483480592,"answer_id":41453021,"question_id":6514876,"body_markdown":"A simpler solution (based on code in question):\r\n\r\n    JSONArray json = new JSONArray();\r\n    ResultSetMetaData rsmd = rs.getMetaData();\r\n    while(rs.next()) {\r\n      int numColumns = rsmd.getColumnCount();\r\n      JSONObject obj = new JSONObject();\r\n      for (int i=1; i&lt;=numColumns; i++) {\r\n        String column_name = rsmd.getColumnName(i);\r\n        obj.put(column_name, rs.getObject(column_name));\r\n      }\r\n      json.put(obj);\r\n    }\r\n    return json;\r\n","title":"Most efficient conversion of ResultSet to JSON?","body":"<p>A simpler solution (based on code in question):</p>\n\n<pre><code>JSONArray json = new JSONArray();\nResultSetMetaData rsmd = rs.getMetaData();\nwhile(rs.next()) {\n  int numColumns = rsmd.getColumnCount();\n  JSONObject obj = new JSONObject();\n  for (int i=1; i&lt;=numColumns; i++) {\n    String column_name = rsmd.getColumnName(i);\n    obj.put(column_name, rs.getObject(column_name));\n  }\n  json.put(obj);\n}\nreturn json;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11032195,"reputation":1,"user_id":8103265,"display_name":"Prashant Chilwant"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1499752994,"creation_date":1499752994,"answer_id":45026558,"question_id":6514876,"body_markdown":"    package com.idal.cib;\r\n    \r\n    import java.io.FileWriter;\r\n    import java.io.IOException;\r\n    import java.sql.Connection;\r\n    import java.sql.PreparedStatement;\r\n    import java.sql.ResultSet;\r\n    import java.sql.ResultSetMetaData;\r\n    import java.sql.SQLException;\r\n    import java.util.ArrayList;\r\n    \r\n    import org.json.simple.JSONArray;\r\n    import org.json.simple.JSONObject;\r\n    \r\n    public class DBJsonConverter {\r\n    \r\n    \tstatic ArrayList&lt;String&gt; data = new ArrayList&lt;String&gt;();\r\n    \tstatic Connection conn = null;\r\n    \tstatic PreparedStatement ps = null;\r\n    \tstatic ResultSet rs = null;\r\n    \tstatic String path = &quot;&quot;;\r\n    \tstatic String driver=&quot;&quot;;\r\n    \tstatic String url=&quot;&quot;;\r\n    \tstatic String username=&quot;&quot;;\r\n    \tstatic String password=&quot;&quot;;\r\n    \tstatic String query=&quot;&quot;;\r\n    \t\r\n    \t@SuppressWarnings({ &quot;unchecked&quot; })\r\n    \tpublic static void dataLoad(String path) {\r\n    \t\tJSONObject obj1 = new JSONObject();\r\n    \t\tJSONArray jsonArray = new JSONArray();\r\n    \t\tconn = DatabaseConnector.getDbConnection(driver, url, username,\r\n    \t\t\t\tpassword);\r\n    \t\ttry {\r\n    \t\t\tps = conn.prepareStatement(query);\r\n    \t\t\trs = ps.executeQuery();\r\n    \t\t\tArrayList&lt;String&gt; columnNames = new ArrayList&lt;String&gt;();\r\n    \t\t\tif (rs != null) {\r\n    \t\t\t\tResultSetMetaData columns = rs.getMetaData();\r\n    \t\t\t\tint i = 0;\r\n    \t\t\t\twhile (i &lt; columns.getColumnCount()) {\r\n    \t\t\t\t\ti++;\r\n    \t\t\t\t\tcolumnNames.add(columns.getColumnName(i));\r\n    \t\t\t\t}\r\n    \t\t\t\twhile (rs.next()) {\r\n    \t\t\t\t\tJSONObject obj = new JSONObject();\r\n    \t\t\t\t\tfor (i = 0; i &lt; columnNames.size(); i++) {\r\n    \t\t\t\t\t\tdata.add(rs.getString(columnNames.get(i)));\r\n    \t\t\t\t\t\t{\r\n    \t\t\t\t\t\t\tfor (int j = 0; j &lt; data.size(); j++) {\r\n    \t\t\t\t\t\t\t\tif (data.get(j) != null) {\r\n    \t\t\t\t\t\t\t\t\tobj.put(columnNames.get(i), data.get(j));\r\n    \t\t\t\t\t\t\t\t}else {\r\n    \t\t\t\t\t\t\t\t\tobj.put(columnNames.get(i), &quot;&quot;);\r\n    \t\t\t\t\t\t\t\t}\r\n    \t\t\t\t\t\t\t}\r\n    \t\t\t\t\t\t}\r\n    \t\t\t\t\t}\r\n    \r\n    \t\t\t\t\tjsonArray.add(obj);\r\n    \t\t\t\t\tobj1.put(&quot;header&quot;, jsonArray);\r\n    \t\t\t\t\tFileWriter file = new FileWriter(path);\r\n    \t\t\t\t\tfile.write(obj1.toJSONString());\r\n    \t\t\t\t\tfile.flush();\r\n    \t\t\t\t\tfile.close();\r\n    \t\t\t\t}\r\n    \t\t\t\tps.close();\r\n    \t\t\t} else {\r\n    \t\t\t\tJSONObject obj2 = new JSONObject();\r\n    \t\t\t\tobj2.put(null, null);\r\n    \t\t\t\tjsonArray.add(obj2);\r\n    \t\t\t\tobj1.put(&quot;header&quot;, jsonArray);\r\n    \t\t\t}\r\n    \t\t} catch (SQLException e) {\r\n    \t\t\t// TODO Auto-generated catch block\r\n    \t\t\te.printStackTrace();\r\n    \t\t} catch (IOException e) {\r\n    \t\t\t// TODO Auto-generated catch block\r\n    \t\t\te.printStackTrace();\r\n    \t\t} finally {\r\n    \t\t\tif (conn != null) {\r\n    \t\t\t\ttry {\r\n    \t\t\t\t\tconn.close();\r\n    \t\t\t\t\trs.close();\r\n    \t\t\t\t\tps.close();\r\n    \t\t\t\t} catch (SQLException e) {\r\n    \t\t\t\t\t// TODO Auto-generated catch block\r\n    \t\t\t\t\te.printStackTrace();\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    \r\n    \t@SuppressWarnings(&quot;static-access&quot;)\r\n    \tpublic static void main(String[] args) {\r\n    \t\t// TODO Auto-generated method stub\r\n    \t\tdriver = &quot;oracle.jdbc.driver.OracleDriver&quot;;\r\n    \t\turl = &quot;jdbc:oracle:thin:@localhost:1521:database&quot;;\r\n    \t\tusername = &quot;user&quot;;\r\n    \t\tpassword = &quot;password&quot;;\r\n    \t\tpath = &quot;path of file&quot;;\r\n    \t\tquery = &quot;select * from temp_employee&quot;;\r\n    \t\t\r\n    \t\tDatabaseConnector dc = new DatabaseConnector();\r\n    \t\tdc.getDbConnection(driver,url,username,password);\r\n    \t\tDBJsonConverter formatter = new DBJsonConverter();\r\n    \t\tformatter.dataLoad(path);\r\n    \t\r\n    \t}\r\n    \r\n    }\r\n    \r\n    \r\n    \r\n    \r\n    package com.idal.cib;\r\n    \r\n    import java.sql.Connection;\r\n    import java.sql.DriverManager;\r\n    import java.sql.SQLException;\r\n    \r\n    public class DatabaseConnector {\r\n    \r\n    \tstatic Connection conn1 = null;\r\n    \r\n    \tpublic static Connection getDbConnection(String driver, String url,\r\n    \t\t\tString username, String password) {\r\n    \t\t// TODO Auto-generated constructor stub\r\n    \t\ttry {\r\n    \r\n    \t\t\tClass.forName(driver);\r\n    \r\n    \t\t\tconn1 = DriverManager.getConnection(url, username, password);\r\n    \t\t} catch (ClassNotFoundException e) {\r\n    \t\t\t// TODO Auto-generated catch block\r\n    \t\t\te.printStackTrace();\r\n    \t\t} catch (SQLException e) {\r\n    \t\t\t// TODO Auto-generated catch block\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \t\treturn conn1;\r\n    \t}\r\n    \r\n    }","title":"Most efficient conversion of ResultSet to JSON?","body":"<pre><code>package com.idal.cib;\n\nimport java.io.FileWriter;\nimport java.io.IOException;\nimport java.sql.Connection;\nimport java.sql.PreparedStatement;\nimport java.sql.ResultSet;\nimport java.sql.ResultSetMetaData;\nimport java.sql.SQLException;\nimport java.util.ArrayList;\n\nimport org.json.simple.JSONArray;\nimport org.json.simple.JSONObject;\n\npublic class DBJsonConverter {\n\n    static ArrayList&lt;String&gt; data = new ArrayList&lt;String&gt;();\n    static Connection conn = null;\n    static PreparedStatement ps = null;\n    static ResultSet rs = null;\n    static String path = \"\";\n    static String driver=\"\";\n    static String url=\"\";\n    static String username=\"\";\n    static String password=\"\";\n    static String query=\"\";\n\n    @SuppressWarnings({ \"unchecked\" })\n    public static void dataLoad(String path) {\n        JSONObject obj1 = new JSONObject();\n        JSONArray jsonArray = new JSONArray();\n        conn = DatabaseConnector.getDbConnection(driver, url, username,\n                password);\n        try {\n            ps = conn.prepareStatement(query);\n            rs = ps.executeQuery();\n            ArrayList&lt;String&gt; columnNames = new ArrayList&lt;String&gt;();\n            if (rs != null) {\n                ResultSetMetaData columns = rs.getMetaData();\n                int i = 0;\n                while (i &lt; columns.getColumnCount()) {\n                    i++;\n                    columnNames.add(columns.getColumnName(i));\n                }\n                while (rs.next()) {\n                    JSONObject obj = new JSONObject();\n                    for (i = 0; i &lt; columnNames.size(); i++) {\n                        data.add(rs.getString(columnNames.get(i)));\n                        {\n                            for (int j = 0; j &lt; data.size(); j++) {\n                                if (data.get(j) != null) {\n                                    obj.put(columnNames.get(i), data.get(j));\n                                }else {\n                                    obj.put(columnNames.get(i), \"\");\n                                }\n                            }\n                        }\n                    }\n\n                    jsonArray.add(obj);\n                    obj1.put(\"header\", jsonArray);\n                    FileWriter file = new FileWriter(path);\n                    file.write(obj1.toJSONString());\n                    file.flush();\n                    file.close();\n                }\n                ps.close();\n            } else {\n                JSONObject obj2 = new JSONObject();\n                obj2.put(null, null);\n                jsonArray.add(obj2);\n                obj1.put(\"header\", jsonArray);\n            }\n        } catch (SQLException e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n        } catch (IOException e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n        } finally {\n            if (conn != null) {\n                try {\n                    conn.close();\n                    rs.close();\n                    ps.close();\n                } catch (SQLException e) {\n                    // TODO Auto-generated catch block\n                    e.printStackTrace();\n                }\n            }\n        }\n    }\n\n    @SuppressWarnings(\"static-access\")\n    public static void main(String[] args) {\n        // TODO Auto-generated method stub\n        driver = \"oracle.jdbc.driver.OracleDriver\";\n        url = \"jdbc:oracle:thin:@localhost:1521:database\";\n        username = \"user\";\n        password = \"password\";\n        path = \"path of file\";\n        query = \"select * from temp_employee\";\n\n        DatabaseConnector dc = new DatabaseConnector();\n        dc.getDbConnection(driver,url,username,password);\n        DBJsonConverter formatter = new DBJsonConverter();\n        formatter.dataLoad(path);\n\n    }\n\n}\n\n\n\n\npackage com.idal.cib;\n\nimport java.sql.Connection;\nimport java.sql.DriverManager;\nimport java.sql.SQLException;\n\npublic class DatabaseConnector {\n\n    static Connection conn1 = null;\n\n    public static Connection getDbConnection(String driver, String url,\n            String username, String password) {\n        // TODO Auto-generated constructor stub\n        try {\n\n            Class.forName(driver);\n\n            conn1 = DriverManager.getConnection(url, username, password);\n        } catch (ClassNotFoundException e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n        } catch (SQLException e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n        }\n        return conn1;\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16472382,"reputation":97,"user_id":11901122,"display_name":"hitesh bariya"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1575693024,"creation_date":1575693024,"answer_id":59223001,"question_id":6514876,"body_markdown":"\tpublic static JSONArray GetJSONDataFromResultSet(ResultSet rs) throws SQLException {\r\n\t\tResultSetMetaData metaData = rs.getMetaData();\r\n\t\tint count = metaData.getColumnCount();\r\n\t\tString[] columnName = new String[count];\r\n\t\tJSONArray jsonArray = new JSONArray();\r\n\t\twhile(rs.next()) {\r\n\t\t\tJSONObject jsonObject = new JSONObject();\r\n\t\t\tfor (int i = 1; i &lt;= count; i++){\r\n\t\t\t\t   columnName[i-1] = metaData.getColumnLabel(i);\r\n\t\t\t\t   jsonObject.put(columnName[i-1], rs.getObject(i));\r\n\t\t\t}\r\n\t\t\tjsonArray.put(jsonObject);\r\n\t\t}\r\n\t\treturn jsonArray;\r\n\t}","title":"Most efficient conversion of ResultSet to JSON?","body":"<pre><code>public static JSONArray GetJSONDataFromResultSet(ResultSet rs) throws SQLException {\n    ResultSetMetaData metaData = rs.getMetaData();\n    int count = metaData.getColumnCount();\n    String[] columnName = new String[count];\n    JSONArray jsonArray = new JSONArray();\n    while(rs.next()) {\n        JSONObject jsonObject = new JSONObject();\n        for (int i = 1; i &lt;= count; i++){\n               columnName[i-1] = metaData.getColumnLabel(i);\n               jsonObject.put(columnName[i-1], rs.getObject(i));\n        }\n        jsonArray.put(jsonObject);\n    }\n    return jsonArray;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1557650,"reputation":162,"user_id":1448255,"accept_rate":36,"display_name":"seekme_94"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1576674827,"creation_date":1576674827,"answer_id":59392862,"question_id":6514876,"body_markdown":"For all who&#39;ve opted for the if-else mesh solution, please use:\r\n\r\n    String columnName = metadata.getColumnName(\r\n    String displayName = metadata.getColumnLabel(i);\r\n    switch (metadata.getColumnType(i)) {\r\n    case Types.ARRAY:\r\n        obj.put(displayName, resultSet.getArray(columnName));\r\n        break;\r\n    ...\r\n\r\nBecause in case of aliases in your query, the column name and column label are two different things. For example if you execute:\r\n\r\n    select col1, col2 as my_alias from table\r\n\r\nYou will get\r\n\r\n    [\r\n        { &quot;col1&quot;: 1, &quot;col2&quot;: 2 }, \r\n        { &quot;col1&quot;: 1, &quot;col2&quot;: 2 }\r\n    ]\r\nRather than:\r\n\r\n    [\r\n        { &quot;col1&quot;: 1, &quot;my_alias&quot;: 2 }, \r\n        { &quot;col1&quot;: 1, &quot;my_alias&quot;: 2 }\r\n    ]\r\n\r\n","title":"Most efficient conversion of ResultSet to JSON?","body":"<p>For all who've opted for the if-else mesh solution, please use:</p>\n\n<pre><code>String columnName = metadata.getColumnName(\nString displayName = metadata.getColumnLabel(i);\nswitch (metadata.getColumnType(i)) {\ncase Types.ARRAY:\n    obj.put(displayName, resultSet.getArray(columnName));\n    break;\n...\n</code></pre>\n\n<p>Because in case of aliases in your query, the column name and column label are two different things. For example if you execute:</p>\n\n<pre><code>select col1, col2 as my_alias from table\n</code></pre>\n\n<p>You will get</p>\n\n<pre><code>[\n    { \"col1\": 1, \"col2\": 2 }, \n    { \"col1\": 1, \"col2\": 2 }\n]\n</code></pre>\n\n<p>Rather than:</p>\n\n<pre><code>[\n    { \"col1\": 1, \"my_alias\": 2 }, \n    { \"col1\": 1, \"my_alias\": 2 }\n]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7862091,"reputation":279,"user_id":5942145,"display_name":"anuj saxena"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695186180,"creation_date":1695186180,"answer_id":77139407,"question_id":6514876,"body_markdown":"The following code should work without any explicit type check. Utilize Java types and ObjectMapper to infer the types and create JSON values internally.\r\n\r\n\r\n    import com.fasterxml.jackson.databind.JsonNode;\r\n    import com.fasterxml.jackson.databind.ObjectMapper;\r\n    import com.fasterxml.jackson.databind.node.ArrayNode;\r\n    import com.fasterxml.jackson.databind.node.JsonNodeFactory;\r\n    import com.fasterxml.jackson.databind.node.ObjectNode;\r\n    import java.sql.ResultSet;\r\n    import java.sql.ResultSetMetaData;\r\n    import java.sql.SQLException;\r\n    import java.util.stream.IntStream;\r\n\r\n    public JsonNode getData(ResultSet rs) throws SQLException {\r\n            ResultSetMetaData rsmd = rs.getMetaData();\r\n            ObjectMapper mapper = new ObjectMapper();\r\n            ArrayNode jsonArr = JsonNodeFactory.instance.arrayNode();\r\n            while(rs.next()) {\r\n                int columnCount = rsmd.getColumnCount();\r\n                ObjectNode rowNode = JsonNodeFactory.instance.objectNode();\r\n                IntStream.range(1, columnCount + 1).forEach(index -&gt; {\r\n                    try {\r\n                        String name = rsmd.getColumnName(index);\r\n                        String type = rsmd.getColumnTypeName(index);\r\n                        Class&lt;?&gt; javaType = Class.forName(type);\r\n                        JsonNode valueNode = mapper.valueToTree(rs.getObject(index, javaType));\r\n                        rowNode.set(name, valueNode);\r\n                    } catch (SQLException | ClassNotFoundException e) {\r\n                        throw new RuntimeException(e);\r\n                    }\r\n                });\r\n                jsonArr.add(rowNode);\r\n            }\r\n            return jsonArr;\r\n        }\r\n","title":"Most efficient conversion of ResultSet to JSON?","body":"<p>The following code should work without any explicit type check. Utilize Java types and ObjectMapper to infer the types and create JSON values internally.</p>\n<pre><code>import com.fasterxml.jackson.databind.JsonNode;\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport com.fasterxml.jackson.databind.node.ArrayNode;\nimport com.fasterxml.jackson.databind.node.JsonNodeFactory;\nimport com.fasterxml.jackson.databind.node.ObjectNode;\nimport java.sql.ResultSet;\nimport java.sql.ResultSetMetaData;\nimport java.sql.SQLException;\nimport java.util.stream.IntStream;\n\npublic JsonNode getData(ResultSet rs) throws SQLException {\n        ResultSetMetaData rsmd = rs.getMetaData();\n        ObjectMapper mapper = new ObjectMapper();\n        ArrayNode jsonArr = JsonNodeFactory.instance.arrayNode();\n        while(rs.next()) {\n            int columnCount = rsmd.getColumnCount();\n            ObjectNode rowNode = JsonNodeFactory.instance.objectNode();\n            IntStream.range(1, columnCount + 1).forEach(index -&gt; {\n                try {\n                    String name = rsmd.getColumnName(index);\n                    String type = rsmd.getColumnTypeName(index);\n                    Class&lt;?&gt; javaType = Class.forName(type);\n                    JsonNode valueNode = mapper.valueToTree(rs.getObject(index, javaType));\n                    rowNode.set(name, valueNode);\n                } catch (SQLException | ClassNotFoundException e) {\n                    throw new RuntimeException(e);\n                }\n            });\n            jsonArr.add(rowNode);\n        }\n        return jsonArr;\n    }\n</code></pre>\n"}],"owner":{"account_id":207148,"reputation":11741,"user_id":456850,"accept_rate":48,"display_name":"Devin Dixon"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":206652,"favorite_count":0,"down_vote_count":0,"up_vote_count":125,"accepted_answer_id":6514960,"answer_count":15,"score":125,"last_activity_date":1695186180,"creation_date":1309311131,"question_id":6514876,"body_markdown":"The following code converts a `ResultSet` to a JSON string using [`JSONArray`][1] and [`JSONObject`][2].\r\n\r\n    import org.json.JSONArray;\r\n    import org.json.JSONObject;\r\n    import org.json.JSONException;\r\n    \r\n    import java.sql.SQLException;\r\n    import java.sql.ResultSet;\r\n    import java.sql.ResultSetMetaData;\r\n    \r\n    public class ResultSetConverter {\r\n      public static JSONArray convert( ResultSet rs )\r\n        throws SQLException, JSONException\r\n      {\r\n        JSONArray json = new JSONArray();\r\n        ResultSetMetaData rsmd = rs.getMetaData();\r\n           \r\n        while(rs.next()) {\r\n          int numColumns = rsmd.getColumnCount();\r\n          JSONObject obj = new JSONObject();\r\n    \r\n          for (int i=1; i&lt;numColumns+1; i++) {\r\n            String column_name = rsmd.getColumnName(i);\r\n            \r\n            if(rsmd.getColumnType(i)==java.sql.Types.ARRAY){\r\n             obj.put(column_name, rs.getArray(column_name));\r\n            }\r\n            else if(rsmd.getColumnType(i)==java.sql.Types.BIGINT){\r\n             obj.put(column_name, rs.getInt(column_name));\r\n            }\r\n            else if(rsmd.getColumnType(i)==java.sql.Types.BOOLEAN){\r\n             obj.put(column_name, rs.getBoolean(column_name));\r\n            }\r\n            else if(rsmd.getColumnType(i)==java.sql.Types.BLOB){\r\n             obj.put(column_name, rs.getBlob(column_name));\r\n            }\r\n            else if(rsmd.getColumnType(i)==java.sql.Types.DOUBLE){\r\n             obj.put(column_name, rs.getDouble(column_name)); \r\n            }\r\n            else if(rsmd.getColumnType(i)==java.sql.Types.FLOAT){\r\n             obj.put(column_name, rs.getFloat(column_name));\r\n            }\r\n            else if(rsmd.getColumnType(i)==java.sql.Types.INTEGER){\r\n             obj.put(column_name, rs.getInt(column_name));\r\n            }\r\n            else if(rsmd.getColumnType(i)==java.sql.Types.NVARCHAR){\r\n             obj.put(column_name, rs.getNString(column_name));\r\n            }\r\n            else if(rsmd.getColumnType(i)==java.sql.Types.VARCHAR){\r\n             obj.put(column_name, rs.getString(column_name));\r\n            }\r\n            else if(rsmd.getColumnType(i)==java.sql.Types.TINYINT){\r\n             obj.put(column_name, rs.getInt(column_name));\r\n            }\r\n            else if(rsmd.getColumnType(i)==java.sql.Types.SMALLINT){\r\n             obj.put(column_name, rs.getInt(column_name));\r\n            }\r\n            else if(rsmd.getColumnType(i)==java.sql.Types.DATE){\r\n             obj.put(column_name, rs.getDate(column_name));\r\n            }\r\n            else if(rsmd.getColumnType(i)==java.sql.Types.TIMESTAMP){\r\n            obj.put(column_name, rs.getTimestamp(column_name));   \r\n            }\r\n            else{\r\n             obj.put(column_name, rs.getObject(column_name));\r\n            }\r\n          }\r\n         \r\n          json.put(obj);\r\n        }\r\n      \r\n        return json;\r\n      }\r\n    }\r\n\r\n- Is there a faster way?\r\n- Is there a way that uses less memory?\r\n\r\n\r\n  [1]: http://www.json.org/javadoc/org/json/JSONArray.html\r\n  [2]: http://www.json.org/javadoc/org/json/JSONObject.html\r\n","title":"Most efficient conversion of ResultSet to JSON?","body":"<p>The following code converts a <code>ResultSet</code> to a JSON string using <a href=\"http://www.json.org/javadoc/org/json/JSONArray.html\"><code>JSONArray</code></a> and <a href=\"http://www.json.org/javadoc/org/json/JSONObject.html\"><code>JSONObject</code></a>.</p>\n\n<pre><code>import org.json.JSONArray;\nimport org.json.JSONObject;\nimport org.json.JSONException;\n\nimport java.sql.SQLException;\nimport java.sql.ResultSet;\nimport java.sql.ResultSetMetaData;\n\npublic class ResultSetConverter {\n  public static JSONArray convert( ResultSet rs )\n    throws SQLException, JSONException\n  {\n    JSONArray json = new JSONArray();\n    ResultSetMetaData rsmd = rs.getMetaData();\n\n    while(rs.next()) {\n      int numColumns = rsmd.getColumnCount();\n      JSONObject obj = new JSONObject();\n\n      for (int i=1; i&lt;numColumns+1; i++) {\n        String column_name = rsmd.getColumnName(i);\n\n        if(rsmd.getColumnType(i)==java.sql.Types.ARRAY){\n         obj.put(column_name, rs.getArray(column_name));\n        }\n        else if(rsmd.getColumnType(i)==java.sql.Types.BIGINT){\n         obj.put(column_name, rs.getInt(column_name));\n        }\n        else if(rsmd.getColumnType(i)==java.sql.Types.BOOLEAN){\n         obj.put(column_name, rs.getBoolean(column_name));\n        }\n        else if(rsmd.getColumnType(i)==java.sql.Types.BLOB){\n         obj.put(column_name, rs.getBlob(column_name));\n        }\n        else if(rsmd.getColumnType(i)==java.sql.Types.DOUBLE){\n         obj.put(column_name, rs.getDouble(column_name)); \n        }\n        else if(rsmd.getColumnType(i)==java.sql.Types.FLOAT){\n         obj.put(column_name, rs.getFloat(column_name));\n        }\n        else if(rsmd.getColumnType(i)==java.sql.Types.INTEGER){\n         obj.put(column_name, rs.getInt(column_name));\n        }\n        else if(rsmd.getColumnType(i)==java.sql.Types.NVARCHAR){\n         obj.put(column_name, rs.getNString(column_name));\n        }\n        else if(rsmd.getColumnType(i)==java.sql.Types.VARCHAR){\n         obj.put(column_name, rs.getString(column_name));\n        }\n        else if(rsmd.getColumnType(i)==java.sql.Types.TINYINT){\n         obj.put(column_name, rs.getInt(column_name));\n        }\n        else if(rsmd.getColumnType(i)==java.sql.Types.SMALLINT){\n         obj.put(column_name, rs.getInt(column_name));\n        }\n        else if(rsmd.getColumnType(i)==java.sql.Types.DATE){\n         obj.put(column_name, rs.getDate(column_name));\n        }\n        else if(rsmd.getColumnType(i)==java.sql.Types.TIMESTAMP){\n        obj.put(column_name, rs.getTimestamp(column_name));   \n        }\n        else{\n         obj.put(column_name, rs.getObject(column_name));\n        }\n      }\n\n      json.put(obj);\n    }\n\n    return json;\n  }\n}\n</code></pre>\n\n<ul>\n<li>Is there a faster way?</li>\n<li>Is there a way that uses less memory?</li>\n</ul>\n"},{"tags":["java","android","reactjs","capacitor","dynamic-feature-module"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1695223167,"post_id":77139392,"comment_id":135996436,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":29487712,"reputation":9,"user_id":22597258,"display_name":"Nikhil "},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1695185900,"creation_date":1695185900,"question_id":77139392,"body_markdown":"I have three React-based apps converted to Android. I want to merge them into a single app. One of these apps will serve as the base, while the other two will be feature modules with on-demand delivery. Is there a way to achieve this?\r\n\r\nI don&#39;t have any prior knowledge of React or Capacitor. but I tried everything in my way but it ended up with disappointment ","title":"Can dynamic feature delivery be implemented in a React-based app converted to Android using Capacitor?","body":"<p>I have three React-based apps converted to Android. I want to merge them into a single app. One of these apps will serve as the base, while the other two will be feature modules with on-demand delivery. Is there a way to achieve this?</p>\n<p>I don't have any prior knowledge of React or Capacitor. but I tried everything in my way but it ended up with disappointment</p>\n"},{"tags":["java","tree","swt","eclipse-rcp"],"comments":[{"owner":{"account_id":3159259,"reputation":109666,"user_id":2670892,"display_name":"greg-449"},"score":0,"creation_date":1695195610,"post_id":77139389,"comment_id":135990038,"body_markdown":"What do you mean by padding? I already mentioned changing the row height in your previous question. To do anything beyond standard you will have to draw the tree yourself with EraseItem/MeasureItem/PaintItem - or for the easier to use TreeViewer use OwnerDrawLabelProvider or one of its many subclasses.","body":"What do you mean by padding? I already mentioned changing the row height in your previous question. To do anything beyond standard you will have to draw the tree yourself with EraseItem/MeasureItem/PaintItem - or for the easier to use TreeViewer use OwnerDrawLabelProvider or one of its many subclasses."}],"owner":{"account_id":28805956,"reputation":9,"user_id":22061831,"display_name":"Satya"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1695185840,"creation_date":1695185840,"question_id":77139389,"body_markdown":"I am able to add padding to the left of treeitems, but i don&#39;t know how to add padding to the top and bottom of the treeitems.\r\n\r\nI want to increase/decrease the padding of tree items. This padding should be top and below not right and left","title":"Java swt tree padding","body":"<p>I am able to add padding to the left of treeitems, but i don't know how to add padding to the top and bottom of the treeitems.</p>\n<p>I want to increase/decrease the padding of tree items. This padding should be top and below not right and left</p>\n"},{"tags":["java","eclipse"],"comments":[{"owner":{"account_id":1960454,"reputation":44539,"user_id":1762224,"accept_rate":61,"display_name":"Mr. Polywhirl"},"score":0,"creation_date":1695149056,"post_id":77137174,"comment_id":135984412,"body_markdown":"How is the data collected? Here is the Java code?","body":"How is the data collected? Here is the Java code?"},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":3,"creation_date":1695149058,"post_id":77137174,"comment_id":135984413,"body_markdown":"The short answer is that you use `String.split()` to break this string up into separate elements, like the numbers and the plus sign, then you test each element to do something with it.  If the element is a number, you call `parseInt()` on it.  The longer answer is probably that you should talk with your instructor, you seem to be having a hard time, and I suspect that there&#39;s important requirements that you haven&#39;t told us.","body":"The short answer is that you use <code>String.split()</code> to break this string up into separate elements, like the numbers and the plus sign, then you test each element to do something with it.  If the element is a number, you call <code>parseInt()</code> on it.  The longer answer is probably that you should talk with your instructor, you seem to be having a hard time, and I suspect that there&#39;s important requirements that you haven&#39;t told us."},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1695149254,"post_id":77137174,"comment_id":135984444,"body_markdown":"(To be fair, when I first encountered this problem, I was a doofus and didn&#39;t talk to the instructor.  It would have been acceptable to research the problem and avoid inventing my own solution.  So yeah, talk to your instructor and make sure you have the details.)","body":"(To be fair, when I first encountered this problem, I was a doofus and didn&#39;t talk to the instructor.  It would have been acceptable to research the problem and avoid inventing my own solution.  So yeah, talk to your instructor and make sure you have the details.)"},{"owner":{"account_id":29484727,"reputation":9,"user_id":22594913,"display_name":"Ima_pan_cake "},"score":0,"creation_date":1695149304,"post_id":77137174,"comment_id":135984456,"body_markdown":"That is my bad this is my first time on here asking questions.","body":"That is my bad this is my first time on here asking questions."},{"owner":{"account_id":29484727,"reputation":9,"user_id":22594913,"display_name":"Ima_pan_cake "},"score":0,"creation_date":1695149718,"post_id":77137174,"comment_id":135984516,"body_markdown":"The project is a multi class calculator. I have 2 classes my main class excepting inputs and my calculate class where the data is calculated. I was initially taking in inputs as three different variables. But my teacher wants to be able to insert an equation all as 1 string.  Explaining why I need to parseInt(). But doing that only except all data before reaching operator (+,-,*./) I need help getting the rest of the data in the string.","body":"The project is a multi class calculator. I have 2 classes my main class excepting inputs and my calculate class where the data is calculated. I was initially taking in inputs as three different variables. But my teacher wants to be able to insert an equation all as 1 string.  Explaining why I need to parseInt(). But doing that only except all data before reaching operator (+,-,*./) I need help getting the rest of the data in the string."},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1695149845,"post_id":77137174,"comment_id":135984533,"body_markdown":"The answer below probably provides *too much* information, be careful you don&#39;t cheat/copy.  But first: does order of operations count? (What is &quot;2 + 3 * 4?&quot;)  Do you have to deal with parenthesis?  (&quot;(2 + 3) * 4?&quot;)","body":"The answer below probably provides <i>too much</i> information, be careful you don&#39;t cheat/copy.  But first: does order of operations count? (What is &quot;2 + 3 * 4?&quot;)  Do you have to deal with parenthesis?  (&quot;(2 + 3) * 4?&quot;)"},{"owner":{"account_id":29484727,"reputation":9,"user_id":22594913,"display_name":"Ima_pan_cake "},"score":0,"creation_date":1695150224,"post_id":77137174,"comment_id":135984604,"body_markdown":"No he does not care about BEDMAS","body":"No he does not care about BEDMAS"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1695158982,"post_id":77137174,"comment_id":135986043,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":1960454,"reputation":44539,"user_id":1762224,"accept_rate":61,"display_name":"Mr. Polywhirl"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695149639,"creation_date":1695149639,"answer_id":77137256,"question_id":77137174,"body_markdown":"If you are performing arithmetic, you should probably use `float` or `double` rather than `int`.\r\n\r\nHere is a basic example of parsing a simple arithmetic expression.\r\n\r\n```java\r\npublic class Calculate {\r\n    public static void main(String[] args) {\r\n        String expression = &quot;5 + 5&quot;;\r\n        System.out.printf(&quot;%s = %.2f%n&quot;, expression, calculate(expression));\r\n\r\n        try {\r\n            calculate(&quot;33 + 5 * 2&quot;);\r\n        } catch (IllegalArgumentException e) {\r\n            System.out.println(e.getMessage());\r\n        }\r\n\r\n        try {\r\n            calculate(&quot;33 % 2&quot;);\r\n        } catch (IllegalArgumentException e) {\r\n            System.out.println(e.getMessage());\r\n        }\r\n    }\r\n\r\n    public static double calculate(String input) {\r\n        String[] tokens = input.trim().split(&quot;\\\\s+&quot;);\r\n        if (tokens.length != 3) {\r\n            throw new IllegalArgumentException(&quot;Input must be in the form of: &lt;operand_1&gt; &lt;operator&gt; &lt;operand_2&gt;&quot;);\r\n        }\r\n        double operand1 = Double.parseDouble(tokens[0]);\r\n        double operand2 = Double.parseDouble(tokens[2]);\r\n        String operator = tokens[1];\r\n        switch (operator) {\r\n            case &quot;+&quot;:\r\n                return operand1 + operand2;\r\n            case &quot;-&quot;:\r\n                return operand1 - operand2;\r\n            case &quot;*&quot;:\r\n            case &quot;x&quot;:\r\n                return operand1 * operand2;\r\n            case &quot;/&quot;:\r\n            case &quot;&#247;&quot;:\r\n                return operand1 / operand2;\r\n            default:\r\n                throw new IllegalArgumentException(&quot;Operator must be one of: +, -, *, /&quot;);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nOutput:\r\n\r\n```\r\n5 + 5 = 10.00\r\nInput must be in the form of: &lt;operand_1&gt; &lt;operator&gt; &lt;operand_2&gt;\r\nOperator must be one of: +, -, *, /\r\n```","title":"How to correctly use parseInt in Java?","body":"<p>If you are performing arithmetic, you should probably use <code>float</code> or <code>double</code> rather than <code>int</code>.</p>\n<p>Here is a basic example of parsing a simple arithmetic expression.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Calculate {\n    public static void main(String[] args) {\n        String expression = &quot;5 + 5&quot;;\n        System.out.printf(&quot;%s = %.2f%n&quot;, expression, calculate(expression));\n\n        try {\n            calculate(&quot;33 + 5 * 2&quot;);\n        } catch (IllegalArgumentException e) {\n            System.out.println(e.getMessage());\n        }\n\n        try {\n            calculate(&quot;33 % 2&quot;);\n        } catch (IllegalArgumentException e) {\n            System.out.println(e.getMessage());\n        }\n    }\n\n    public static double calculate(String input) {\n        String[] tokens = input.trim().split(&quot;\\\\s+&quot;);\n        if (tokens.length != 3) {\n            throw new IllegalArgumentException(&quot;Input must be in the form of: &lt;operand_1&gt; &lt;operator&gt; &lt;operand_2&gt;&quot;);\n        }\n        double operand1 = Double.parseDouble(tokens[0]);\n        double operand2 = Double.parseDouble(tokens[2]);\n        String operator = tokens[1];\n        switch (operator) {\n            case &quot;+&quot;:\n                return operand1 + operand2;\n            case &quot;-&quot;:\n                return operand1 - operand2;\n            case &quot;*&quot;:\n            case &quot;x&quot;:\n                return operand1 * operand2;\n            case &quot;/&quot;:\n            case &quot;÷&quot;:\n                return operand1 / operand2;\n            default:\n                throw new IllegalArgumentException(&quot;Operator must be one of: +, -, *, /&quot;);\n        }\n    }\n}\n</code></pre>\n<p>Output:</p>\n<pre><code>5 + 5 = 10.00\nInput must be in the form of: &lt;operand_1&gt; &lt;operator&gt; &lt;operand_2&gt;\nOperator must be one of: +, -, *, /\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695185307,"creation_date":1695162491,"answer_id":77138286,"question_id":77137174,"body_markdown":"&gt; _&quot;... My question is how do I parseInt correctly? It collects all the data (ints) before it reaches the operator. How to I tell it to collect the data past the operator? ...&quot;_\r\n\r\nUse the _[Pattern](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/regex/Pattern.html)_ and _[Matcher](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/regex/Matcher.html)_ classes to capture the values and operators.\r\n\r\nI&#39;m using the following pattern.\\\r\nThe _look-around_ asserts the `+` or  `-` are operators and not symbols.\r\n\r\n```none\r\n(?:(?&lt;![*/+-])[+-]|[*/])|[+-]?[^ */+-]+\r\n```\r\n\r\nHere is an example.\r\n\r\n```java\r\nimport static java.math.RoundingMode.HALF_UP;\r\n```\r\n\r\n```java\r\nString exp = &quot;22/7&quot;;\r\nPattern p = Pattern.compile(&quot;(?:(?&lt;![*/+-])[+-]|[*/])|[+-]?[^ */+-]+&quot;);\r\nMatcher m = p.matcher(exp);\r\nList&lt;String&gt; a = m.results().map(MatchResult::group).toList();\r\nIterator&lt;String&gt; it = a.iterator();\r\nBigDecimal x = new BigDecimal(it.next()).setScale(32, HALF_UP);\r\nwhile (it.hasNext()) {\r\n    x = switch (it.next()) {\r\n        case &quot;*&quot; -&gt; x.multiply(new BigDecimal(it.next()));\r\n        case &quot;/&quot; -&gt; x.divide(new BigDecimal(it.next()), 32, HALF_UP);\r\n        case &quot;+&quot; -&gt; x.add(new BigDecimal(it.next()));\r\n        case &quot;-&quot; -&gt; x.subtract(new BigDecimal(it.next()));\r\n        default -&gt; x;\r\n    };\r\n}\r\n```\r\n\r\nOutput\r\n\r\n```none\r\n3.14285714285714285714285714285714\r\n```\r\n\r\nAs a recommendation, research the topic of the _[Abstract Syntax Tree](https://en.wikipedia.org/wiki/Abstract_syntax_tree)_ _data-structure_.\\\r\nEssentially it is a parsing technique used to enumerate and classify values within text.\\\r\nIt&#39;s a common structure used with _[interpreters](https://en.wikipedia.org/wiki/Interpreter_(computing))_.\r\n\r\nIt&#39;s quite powerful, you&#39;d be able to evaluate complex equations.","title":"How to correctly use parseInt in Java?","body":"<blockquote>\n<p><em>&quot;... My question is how do I parseInt correctly? It collects all the data (ints) before it reaches the operator. How to I tell it to collect the data past the operator? ...&quot;</em></p>\n</blockquote>\n<p>Use the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/regex/Pattern.html\" rel=\"nofollow noreferrer\">Pattern</a></em> and <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/regex/Matcher.html\" rel=\"nofollow noreferrer\">Matcher</a></em> classes to capture the values and operators.</p>\n<p>I'm using the following pattern.<br />\nThe <em>look-around</em> asserts the <code>+</code> or  <code>-</code> are operators and not symbols.</p>\n<pre class=\"lang-none prettyprint-override\"><code>(?:(?&lt;![*/+-])[+-]|[*/])|[+-]?[^ */+-]+\n</code></pre>\n<p>Here is an example.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import static java.math.RoundingMode.HALF_UP;\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>String exp = &quot;22/7&quot;;\nPattern p = Pattern.compile(&quot;(?:(?&lt;![*/+-])[+-]|[*/])|[+-]?[^ */+-]+&quot;);\nMatcher m = p.matcher(exp);\nList&lt;String&gt; a = m.results().map(MatchResult::group).toList();\nIterator&lt;String&gt; it = a.iterator();\nBigDecimal x = new BigDecimal(it.next()).setScale(32, HALF_UP);\nwhile (it.hasNext()) {\n    x = switch (it.next()) {\n        case &quot;*&quot; -&gt; x.multiply(new BigDecimal(it.next()));\n        case &quot;/&quot; -&gt; x.divide(new BigDecimal(it.next()), 32, HALF_UP);\n        case &quot;+&quot; -&gt; x.add(new BigDecimal(it.next()));\n        case &quot;-&quot; -&gt; x.subtract(new BigDecimal(it.next()));\n        default -&gt; x;\n    };\n}\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>3.14285714285714285714285714285714\n</code></pre>\n<p>As a recommendation, research the topic of the <em><a href=\"https://en.wikipedia.org/wiki/Abstract_syntax_tree\" rel=\"nofollow noreferrer\">Abstract Syntax Tree</a></em> <em>data-structure</em>.<br />\nEssentially it is a parsing technique used to enumerate and classify values within text.<br />\nIt's a common structure used with <em><a href=\"https://en.wikipedia.org/wiki/Interpreter_(computing)\" rel=\"nofollow noreferrer\">interpreters</a></em>.</p>\n<p>It's quite powerful, you'd be able to evaluate complex equations.</p>\n"},{"tags":[],"owner":{"account_id":6017640,"reputation":8919,"user_id":4725875,"display_name":"DevilsHnd - 退した"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695180283,"creation_date":1695180283,"answer_id":77139113,"question_id":77137174,"body_markdown":"Splitting the provided equation into specific array elements I think is the way to go here as well. This is not necessarily an easy thing considering the different types of mathematical equations that can be supplied. An equation might have signed or unsigned numerical values, different type of brackets (like **( )**, **{ }**, **[ ]**), Unicode characters like PI (&#120645;) or even perhaps Unicode superscript exponent characters (like: ⁰, &#185;, &#178;, &#179;, ⁴, ⁵, ⁶, ⁷, ⁸, or ⁹). The mathematical equation might even be of an algebraic type and contain characters like &quot;x&quot; or &quot;y&quot;, etc. I&#39;m sure you&#39;re not needing to deal with such equations at this point but you may want to consider it in the future.\r\n\r\nTo evaluate a mathematical equation, it will need to be broken down into specific elements and then those elements are processed and, should be processed in **[BEDMAS](https://www.cemc.uwaterloo.ca/events/mathcircles/2013-14/Fall/Junior6_Oct8.pdf)** to be accurate even though it currently isn&#39;t a requirement for your current use-case.\r\n\r\nThe supplied method below will split a mathematical string equation into specific elements as discussed above and return it as a String[] array. It looks like a lot of code but, it really isn&#39;t since it is just a quick and simple parser. It&#39;s all the commenting that make it look large which you can later delete if you like. Please read the comments in code:\r\n\r\n    /**\r\n     * This method will parse a math equation string, even with various bracket\r\n     * types or nested brackets and Unicode math operators or numerical\r\n     * characters like PI (&#120645; - Unicode: \\ud835\\udf45)) into a String[] Array.\r\n     * &lt;p&gt;\r\n     * Signed and unsigned integer or floating point values can be within the\r\n     * supplied mathematical equation. Numerical values with exponents will \r\n     * keep their respective exponent in the parsing. \r\n     * &lt;p&gt;\r\n     * As an example, then following equation string: &quot;(-3.786 + 2&#179;) * (8&#178; / &#120645;)&quot; \r\n     * will be parsed as: [(, -3.786, +, 2&#179;, ), *, 8&#178;, /, &#120645;]. \r\n     * &lt;p&gt;\r\n     * In the above example, the superscript exponent characters (&quot;⁰&quot;, &quot;&#185;&quot;, &quot;&#178;&quot;, \r\n     * &quot;&#179;&quot;, &quot;⁴&quot;, &quot;⁵&quot;, &quot;⁶&quot;, &quot;⁷&quot;, &quot;⁸&quot;, &quot;⁹&quot;) are respective Unicode characters\r\n     * &quot;\\u2070&quot;, &quot;\\u00B9&quot;, &quot;\\u00B2&quot;, &quot;\\u00B3&quot;, &quot;\\u2074&quot;, &quot;\\u2075&quot;, &quot;\\u2076&quot;, \r\n     * &quot;\\u2077&quot;, &quot;\\u2078&quot;, &quot;\\u2079&quot;. \r\n     * &lt;p&gt;\r\n     * The character &#120645; is Unicode: \\ud835\\udf45.\r\n     * &lt;p&gt;\r\n     * Whitespaces are ignored during parsing and will not be contained within\r\n     * the returned String[] Array as any kind of array element.&lt;br&gt;\r\n     *\r\n     * @param equation (String) The mathematical equation to parse into a String[] Array.&lt;br&gt;\r\n     *\r\n     * @return (String[] Array)\r\n     */\r\n    public String[] splitSimpleEquation(String equation) {\r\n        /* Remove all white-spacing from the supplied equation.\r\n           We don&#39;t need them:              */\r\n        equation = equation.replaceAll(&quot;\\\\s+&quot;, &quot;&quot;);\r\n        \r\n        /* A List Interface of String to hold all the equation elements.\r\n           This List is later converted to a String[] array and returned. \r\n           We use a List because we literally have no idea how big the \r\n           equation might be and because of this there is no real way to \r\n           know how large to initialize a String[] array. A List (or an \r\n           ArrayList) can grow dynamically and therefore, this wouldn&#39;t \r\n           be a problem:     */\r\n        List&lt;String&gt; list = new ArrayList&lt;&gt;();\r\n        \r\n        // Will temporarily hold established numerical values within the equation:\r\n        String number = &quot;&quot;; \r\n        \r\n        /* Split the supplied equation into into a String[] array of individual\r\n           characters so to establish proper parsing. The `equation.split(&quot;&quot;)` \r\n           could be used to do this but, this method WILL NOT handle two byte \r\n           Unicode caracters (like &#120645;) as required.        */\r\n        String[] chr = equation.codePoints()\r\n                .mapToObj(cp -&gt; new String(Character.toChars(cp)))\r\n                .toArray(size -&gt; new String[size]);\r\n        \r\n        /* Iterate through the `chr` array and create the needed \r\n           elements to add to the List. `c` will hold the current\r\n           string character being processed:         */\r\n        for (String c : chr) {\r\n            /* If the current string character is a numerical digit (0-9) or\r\n               a decimal point (period) OR is the current string character \r\n               a minus character or any unicode minus character and is the \r\n               `number` variable empty (precursor to signed values) OR is the \r\n               current string character a Unicode superscript exponent character \r\n               and the `number` variable is NOT empty (precursor to (value to \r\n               the Power of) then, append the character to the contents contained \r\n               within the `number` variable:     */\r\n            if (c.matches(&quot;[0-9]&quot;) || c.matches(&quot;[\\\\.]&quot;) || \r\n                    (c.matches(&quot;[─➖\\\\-−−]&quot;) &amp;&amp; number.isEmpty()) || \r\n                        (c.matches(&quot;[⁰&#185;&#178;&#179;⁴⁵⁶⁷⁸⁹]&quot;) &amp;&amp; !number.isEmpty())) {\r\n                number += c;\r\n            }\r\n            \r\n            /* Otherwise, if the current string character is a numerical digit\r\n               and the `number` variable is NOT empty then, add the value \r\n               currently held in `number` to the List, then empty `number` in\r\n               preparation for a new value then, add the current string \r\n               numerical character value to the List:            */\r\n            else if (!c.matches(&quot;\\\\d&quot;) &amp;&amp; !number.isEmpty()) {\r\n                list.add(number);   // Add current value of `number` to the List.\r\n                number = &quot;&quot;;        // Empty `number` variable in prep for new value.\r\n                list.add(c);        // Add current string numerical value to List\r\n            }\r\n            \r\n            /* Otherwise, just add the current string character to the List.\r\n               This could be a open or close bracket, a unicode PI character, \r\n               etc.         */\r\n            else {\r\n                list.add(c);\r\n            }\r\n        }\r\n        \r\n        /* Once the `chr` array has finnished iterations and there\r\n           is still a value contained within the `number` variable \r\n           then, add that value to the List:        */\r\n        if (!number.isEmpty()) {\r\n            list.add(number);\r\n        }\r\n        \r\n        // Convert the List of String to a String[] array and return it;\r\n        return list.toArray(new String[0]);\r\n    }\r\n\r\n----------\r\n\r\n**Example Use #1:**\r\n\r\n    String[] equationElements = splitSimpleEquation(&quot;5 + 5 * 2&quot;);\r\n    System.out.println(Arrays.toString(equationElements));\r\n\r\n**Output Display:**\r\n\r\n    [5, +, 5, *, 2]\r\n\r\n----------\r\n\r\n**Example Use #2:**\r\n\r\n    String[] equationElements = splitSimpleEquation(&quot;(-3.786 + 2&#179;)*(8&#178;/&#120645;)*x&quot;);\r\n    System.out.println(Arrays.toString(equationElements));\r\n\r\n**Output Display:**\r\n\r\n    [(, -3.786, +, 2&#179;, ), *, (, 8&#178;, /, &#120645;, ), *, x]","title":"How to correctly use parseInt in Java?","body":"<p>Splitting the provided equation into specific array elements I think is the way to go here as well. This is not necessarily an easy thing considering the different types of mathematical equations that can be supplied. An equation might have signed or unsigned numerical values, different type of brackets (like <strong>( )</strong>, <strong>{ }</strong>, <strong>[ ]</strong>), Unicode characters like PI (𝝅) or even perhaps Unicode superscript exponent characters (like: ⁰, ¹, ², ³, ⁴, ⁵, ⁶, ⁷, ⁸, or ⁹). The mathematical equation might even be of an algebraic type and contain characters like &quot;x&quot; or &quot;y&quot;, etc. I'm sure you're not needing to deal with such equations at this point but you may want to consider it in the future.</p>\n<p>To evaluate a mathematical equation, it will need to be broken down into specific elements and then those elements are processed and, should be processed in <strong><a href=\"https://www.cemc.uwaterloo.ca/events/mathcircles/2013-14/Fall/Junior6_Oct8.pdf\" rel=\"nofollow noreferrer\">BEDMAS</a></strong> to be accurate even though it currently isn't a requirement for your current use-case.</p>\n<p>The supplied method below will split a mathematical string equation into specific elements as discussed above and return it as a String[] array. It looks like a lot of code but, it really isn't since it is just a quick and simple parser. It's all the commenting that make it look large which you can later delete if you like. Please read the comments in code:</p>\n<pre><code>/**\n * This method will parse a math equation string, even with various bracket\n * types or nested brackets and Unicode math operators or numerical\n * characters like PI (𝝅 - Unicode: \\ud835\\udf45)) into a String[] Array.\n * &lt;p&gt;\n * Signed and unsigned integer or floating point values can be within the\n * supplied mathematical equation. Numerical values with exponents will \n * keep their respective exponent in the parsing. \n * &lt;p&gt;\n * As an example, then following equation string: &quot;(-3.786 + 2³) * (8² / 𝝅)&quot; \n * will be parsed as: [(, -3.786, +, 2³, ), *, 8², /, 𝝅]. \n * &lt;p&gt;\n * In the above example, the superscript exponent characters (&quot;⁰&quot;, &quot;¹&quot;, &quot;²&quot;, \n * &quot;³&quot;, &quot;⁴&quot;, &quot;⁵&quot;, &quot;⁶&quot;, &quot;⁷&quot;, &quot;⁸&quot;, &quot;⁹&quot;) are respective Unicode characters\n * &quot;\\u2070&quot;, &quot;\\u00B9&quot;, &quot;\\u00B2&quot;, &quot;\\u00B3&quot;, &quot;\\u2074&quot;, &quot;\\u2075&quot;, &quot;\\u2076&quot;, \n * &quot;\\u2077&quot;, &quot;\\u2078&quot;, &quot;\\u2079&quot;. \n * &lt;p&gt;\n * The character 𝝅 is Unicode: \\ud835\\udf45.\n * &lt;p&gt;\n * Whitespaces are ignored during parsing and will not be contained within\n * the returned String[] Array as any kind of array element.&lt;br&gt;\n *\n * @param equation (String) The mathematical equation to parse into a String[] Array.&lt;br&gt;\n *\n * @return (String[] Array)\n */\npublic String[] splitSimpleEquation(String equation) {\n    /* Remove all white-spacing from the supplied equation.\n       We don't need them:              */\n    equation = equation.replaceAll(&quot;\\\\s+&quot;, &quot;&quot;);\n    \n    /* A List Interface of String to hold all the equation elements.\n       This List is later converted to a String[] array and returned. \n       We use a List because we literally have no idea how big the \n       equation might be and because of this there is no real way to \n       know how large to initialize a String[] array. A List (or an \n       ArrayList) can grow dynamically and therefore, this wouldn't \n       be a problem:     */\n    List&lt;String&gt; list = new ArrayList&lt;&gt;();\n    \n    // Will temporarily hold established numerical values within the equation:\n    String number = &quot;&quot;; \n    \n    /* Split the supplied equation into into a String[] array of individual\n       characters so to establish proper parsing. The `equation.split(&quot;&quot;)` \n       could be used to do this but, this method WILL NOT handle two byte \n       Unicode caracters (like 𝝅) as required.        */\n    String[] chr = equation.codePoints()\n            .mapToObj(cp -&gt; new String(Character.toChars(cp)))\n            .toArray(size -&gt; new String[size]);\n    \n    /* Iterate through the `chr` array and create the needed \n       elements to add to the List. `c` will hold the current\n       string character being processed:         */\n    for (String c : chr) {\n        /* If the current string character is a numerical digit (0-9) or\n           a decimal point (period) OR is the current string character \n           a minus character or any unicode minus character and is the \n           `number` variable empty (precursor to signed values) OR is the \n           current string character a Unicode superscript exponent character \n           and the `number` variable is NOT empty (precursor to (value to \n           the Power of) then, append the character to the contents contained \n           within the `number` variable:     */\n        if (c.matches(&quot;[0-9]&quot;) || c.matches(&quot;[\\\\.]&quot;) || \n                (c.matches(&quot;[─➖\\\\-−−]&quot;) &amp;&amp; number.isEmpty()) || \n                    (c.matches(&quot;[⁰¹²³⁴⁵⁶⁷⁸⁹]&quot;) &amp;&amp; !number.isEmpty())) {\n            number += c;\n        }\n        \n        /* Otherwise, if the current string character is a numerical digit\n           and the `number` variable is NOT empty then, add the value \n           currently held in `number` to the List, then empty `number` in\n           preparation for a new value then, add the current string \n           numerical character value to the List:            */\n        else if (!c.matches(&quot;\\\\d&quot;) &amp;&amp; !number.isEmpty()) {\n            list.add(number);   // Add current value of `number` to the List.\n            number = &quot;&quot;;        // Empty `number` variable in prep for new value.\n            list.add(c);        // Add current string numerical value to List\n        }\n        \n        /* Otherwise, just add the current string character to the List.\n           This could be a open or close bracket, a unicode PI character, \n           etc.         */\n        else {\n            list.add(c);\n        }\n    }\n    \n    /* Once the `chr` array has finnished iterations and there\n       is still a value contained within the `number` variable \n       then, add that value to the List:        */\n    if (!number.isEmpty()) {\n        list.add(number);\n    }\n    \n    // Convert the List of String to a String[] array and return it;\n    return list.toArray(new String[0]);\n}\n</code></pre>\n<hr />\n<p><strong>Example Use #1:</strong></p>\n<pre><code>String[] equationElements = splitSimpleEquation(&quot;5 + 5 * 2&quot;);\nSystem.out.println(Arrays.toString(equationElements));\n</code></pre>\n<p><strong>Output Display:</strong></p>\n<pre><code>[5, +, 5, *, 2]\n</code></pre>\n<hr />\n<p><strong>Example Use #2:</strong></p>\n<pre><code>String[] equationElements = splitSimpleEquation(&quot;(-3.786 + 2³)*(8²/𝝅)*x&quot;);\nSystem.out.println(Arrays.toString(equationElements));\n</code></pre>\n<p><strong>Output Display:</strong></p>\n<pre><code>[(, -3.786, +, 2³, ), *, (, 8², /, 𝝅, ), *, x]\n</code></pre>\n"}],"owner":{"account_id":29484727,"reputation":9,"user_id":22594913,"display_name":"Ima_pan_cake "},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":79,"favorite_count":0,"down_vote_count":4,"up_vote_count":1,"answer_count":3,"score":-3,"last_activity_date":1695185307,"creation_date":1695148958,"question_id":77137174,"body_markdown":"I&#39;m doing a project in my comp sci class and my teacher wants a calculator that accepts an equation as a single string, e.g.\r\n```none\r\n5 + 5\r\n```\r\n(instead of going through each variable).\r\n\r\nMy question is how do I `parseInt` correctly? It collects all the data (`int`s) before it reaches the operator. How do I tell it to collect the data past the operator?\r\n\r\nI have tried running through the string itself until it finds a operator. And based on which operator is used it goes through my second class to calculate accordingly. But it can only collect everything before the operator. I&#39;ve tried putting my string into an array and running a `for` loop backwards, but that never seemed to work.\r\n","title":"How to correctly use parseInt in Java?","body":"<p>I'm doing a project in my comp sci class and my teacher wants a calculator that accepts an equation as a single string, e.g.</p>\n<pre class=\"lang-none prettyprint-override\"><code>5 + 5\n</code></pre>\n<p>(instead of going through each variable).</p>\n<p>My question is how do I <code>parseInt</code> correctly? It collects all the data (<code>int</code>s) before it reaches the operator. How do I tell it to collect the data past the operator?</p>\n<p>I have tried running through the string itself until it finds a operator. And based on which operator is used it goes through my second class to calculate accordingly. But it can only collect everything before the operator. I've tried putting my string into an array and running a <code>for</code> loop backwards, but that never seemed to work.</p>\n"},{"tags":["java","spring","graalvm","graalvm-native-image"],"answers":[{"tags":[],"owner":{"account_id":5331661,"reputation":69,"user_id":4252086,"display_name":"Sergey Batsura"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1614697613,"creation_date":1614697613,"answer_id":66441917,"question_id":66441869,"body_markdown":"When you compile binary from fat jar by native-image it gets Main-Class: org.springframework.boot.loader.JarLauncher from manifest and trying to make executable binary whith entry point JarLauncher. Then you run compiled binary it try to open himself for reading as zip archive and throwing a ZipException. Try this https://spring.io/blog/2020/04/16/spring-tips-the-graalvm-native-image-builder-feature\r\n","title":"compile spring boot application by native-image","body":"<p>When you compile binary from fat jar by native-image it gets Main-Class: org.springframework.boot.loader.JarLauncher from manifest and trying to make executable binary whith entry point JarLauncher. Then you run compiled binary it try to open himself for reading as zip archive and throwing a ZipException. Try this <a href=\"https://spring.io/blog/2020/04/16/spring-tips-the-graalvm-native-image-builder-feature\" rel=\"nofollow noreferrer\">https://spring.io/blog/2020/04/16/spring-tips-the-graalvm-native-image-builder-feature</a></p>\n"}],"owner":{"account_id":20851171,"reputation":11,"user_id":15315668,"display_name":"Ilya Kr"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1152,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1695184968,"creation_date":1614697476,"question_id":66441869,"body_markdown":"I&#39;m trying to compile spring boot application by native-image executing following command\r\nnative-image --no-fallback -jar rest.jar\r\nall compiling good, but at run time I see an exception\r\n\r\n    Exception in thread &quot;main&quot; java.lang.IllegalStateException: java.util.zip.ZipException: zip END header not found\r\n    \tat org.springframework.boot.loader.ExecutableArchiveLauncher.&lt;init&gt;(ExecutableArchiveLauncher.java:52)\r\n    \tat org.springframework.boot.loader.JarLauncher.&lt;init&gt;(JarLauncher.java:48)\r\n    \tat org.springframework.boot.loader.JarLauncher.main(JarLauncher.java:88)\r\n    Caused by: java.util.zip.ZipException: zip END header not found\r\n    \tat java.util.zip.ZipFile$Source.zerror(ZipFile.java:1581)\r\n    \tat java.util.zip.ZipFile$Source.findEND(ZipFile.java:1476)\r\n    \tat java.util.zip.ZipFile$Source.initCEN(ZipFile.java:1483)\r\n    \tat java.util.zip.ZipFile$Source.&lt;init&gt;(ZipFile.java:1288)\r\n    \tat java.util.zip.ZipFile$Source.get(ZipFile.java:1251)\r\n    \tat java.util.zip.ZipFile$CleanableResource.&lt;init&gt;(ZipFile.java:732)\r\n    \tat java.util.zip.ZipFile$CleanableResource.get(ZipFile.java:849)\r\n    \tat java.util.zip.ZipFile.&lt;init&gt;(ZipFile.java:247)\r\n    \tat java.util.zip.ZipFile.&lt;init&gt;(ZipFile.java:177)\r\n    \tat java.util.jar.JarFile.&lt;init&gt;(JarFile.java:348)\r\n    \tat java.util.jar.JarFile.&lt;init&gt;(JarFile.java:319)\r\n    \tat java.util.jar.JarFile.&lt;init&gt;(JarFile.java:285)\r\n    \tat org.springframework.boot.loader.jar.AbstractJarFile.&lt;init&gt;(AbstractJarFile.java:39)\r\n    \tat org.springframework.boot.loader.jar.JarFile.&lt;init&gt;(JarFile.java:128)\r\n    \tat org.springframework.boot.loader.jar.JarFile.&lt;init&gt;(JarFile.java:123)\r\n    \tat org.springframework.boot.loader.jar.JarFile.&lt;init&gt;(JarFile.java:109)\r\n    \tat org.springframework.boot.loader.jar.JarFile.&lt;init&gt;(JarFile.java:100)\r\n    \tat org.springframework.boot.loader.archive.JarFileArchive.&lt;init&gt;(JarFileArchive.java:57)\r\n    \tat org.springframework.boot.loader.archive.JarFileArchive.&lt;init&gt;(JarFileArchive.java:53)\r\n    \tat org.springframework.boot.loader.Launcher.createArchive(Launcher.java:162)\r\n    \tat org.springframework.boot.loader.ExecutableArchiveLauncher.&lt;init&gt;(ExecutableArchiveLauncher.java:48)\r\n\r\nWhat I&#39;m doing wrong?\r\n\r\n","title":"compile spring boot application by native-image","body":"<p>I'm trying to compile spring boot application by native-image executing following command\nnative-image --no-fallback -jar rest.jar\nall compiling good, but at run time I see an exception</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.IllegalStateException: java.util.zip.ZipException: zip END header not found\n    at org.springframework.boot.loader.ExecutableArchiveLauncher.&lt;init&gt;(ExecutableArchiveLauncher.java:52)\n    at org.springframework.boot.loader.JarLauncher.&lt;init&gt;(JarLauncher.java:48)\n    at org.springframework.boot.loader.JarLauncher.main(JarLauncher.java:88)\nCaused by: java.util.zip.ZipException: zip END header not found\n    at java.util.zip.ZipFile$Source.zerror(ZipFile.java:1581)\n    at java.util.zip.ZipFile$Source.findEND(ZipFile.java:1476)\n    at java.util.zip.ZipFile$Source.initCEN(ZipFile.java:1483)\n    at java.util.zip.ZipFile$Source.&lt;init&gt;(ZipFile.java:1288)\n    at java.util.zip.ZipFile$Source.get(ZipFile.java:1251)\n    at java.util.zip.ZipFile$CleanableResource.&lt;init&gt;(ZipFile.java:732)\n    at java.util.zip.ZipFile$CleanableResource.get(ZipFile.java:849)\n    at java.util.zip.ZipFile.&lt;init&gt;(ZipFile.java:247)\n    at java.util.zip.ZipFile.&lt;init&gt;(ZipFile.java:177)\n    at java.util.jar.JarFile.&lt;init&gt;(JarFile.java:348)\n    at java.util.jar.JarFile.&lt;init&gt;(JarFile.java:319)\n    at java.util.jar.JarFile.&lt;init&gt;(JarFile.java:285)\n    at org.springframework.boot.loader.jar.AbstractJarFile.&lt;init&gt;(AbstractJarFile.java:39)\n    at org.springframework.boot.loader.jar.JarFile.&lt;init&gt;(JarFile.java:128)\n    at org.springframework.boot.loader.jar.JarFile.&lt;init&gt;(JarFile.java:123)\n    at org.springframework.boot.loader.jar.JarFile.&lt;init&gt;(JarFile.java:109)\n    at org.springframework.boot.loader.jar.JarFile.&lt;init&gt;(JarFile.java:100)\n    at org.springframework.boot.loader.archive.JarFileArchive.&lt;init&gt;(JarFileArchive.java:57)\n    at org.springframework.boot.loader.archive.JarFileArchive.&lt;init&gt;(JarFileArchive.java:53)\n    at org.springframework.boot.loader.Launcher.createArchive(Launcher.java:162)\n    at org.springframework.boot.loader.ExecutableArchiveLauncher.&lt;init&gt;(ExecutableArchiveLauncher.java:48)\n</code></pre>\n<p>What I'm doing wrong?</p>\n"},{"tags":["java","mongodb"],"comments":[{"owner":{"account_id":6583624,"reputation":2692,"user_id":5087125,"display_name":"pvg"},"score":2,"creation_date":1466037098,"post_id":37847948,"comment_id":63155650,"body_markdown":"`toMap` returns a `Map` not a `HashMap`.","body":"<code>toMap</code> returns a <code>Map</code> not a <code>HashMap</code>."},{"owner":{"account_id":1083546,"reputation":523,"user_id":1079835,"display_name":"Mahesh Pujari"},"score":1,"creation_date":1466037154,"post_id":37847948,"comment_id":63155668,"body_markdown":"Can you look at this http://stackoverflow.com/questions/8477923/is-there-a-way-to-render-a-basicdbobject-into-mapstring-string-with-mongodb-ja/8478668","body":"Can you look at this <a href=\"http://stackoverflow.com/questions/8477923/is-there-a-way-to-render-a-basicdbobject-into-mapstring-string-with-mongodb-ja/8478668\" title=\"is there a way to render a basicdbobject into mapstring string with mongodb ja\">stackoverflow.com/questions/8477923/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1695183703,"creation_date":1466037096,"answer_id":37847980,"question_id":37847948,"body_markdown":"It does not need to be cast\r\n\r\nsee https://mongodb.github.io/mongo-java-driver/4.10/apidocs/bson/org/bson/BsonDocument.html#putAll(java.util.Map)\r\n\r\n","title":"Java, java.util.HashMap cannot be cast to org.bson.BSONObject","body":"<p>It does not need to be cast</p>\n<p>see <a href=\"https://mongodb.github.io/mongo-java-driver/4.10/apidocs/bson/org/bson/BsonDocument.html#putAll(java.util.Map)\" rel=\"nofollow noreferrer\">https://mongodb.github.io/mongo-java-driver/4.10/apidocs/bson/org/bson/BsonDocument.html#putAll(java.util.Map)</a></p>\n"}],"owner":{"account_id":6523439,"reputation":16962,"user_id":5046896,"accept_rate":86,"display_name":"GoingMyWay"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6321,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":37847980,"answer_count":1,"score":2,"last_activity_date":1695183703,"creation_date":1466036891,"question_id":37847948,"body_markdown":"I have been working wrote a MapReduce Program to implement word count with data store in MongoDB. I want to cast BSONObject to HashMap in Java, but it return the error\r\n\r\n    java.lang.Exception: java.lang.ClassCastException: java.util.HashMap cannot be cast to org.bson.BSONObject\r\n\r\nAnd my code\r\n\r\n    BasicBSONObject result = new BasicBSONObject();\r\n    HashMap&lt;String, Integer&gt; mymap = new HashMap&lt;String, Integer&gt;();\r\n    [snippt]\r\n    for (BSONWritable val : values) {\r\n    {\r\n        HashMap&lt;String, Integer&gt; temp = (HashMap&lt;String, Integer&gt;) val.getDoc().toMap();\r\n    \tfor (Map.Entry&lt;String, Integer&gt; entry :  temp.entrySet()) {\r\n    \t\tif (mymap.containsKey(entry.getKey())) {\r\n    \t\t\tmymap.put(entry.getKey(), entry.getValue()+1);\r\n    \t\t}\r\n    \t\telse {\r\n\t\t\t\tmymap.put(entry.getKey(), 1);\r\n\t\t\t}\r\n    \t}\r\n    \t\t\t\r\n    }\r\n    result.putAll((BSONObject)mymap);\r\n\r\nI want to my `ｍymap` into `result`. Since `mymap` is a `HashMap` instance, I think `putAll` method is a choice.\r\n\r\nHow can I fix it? Thanks!\r\n","title":"Java, java.util.HashMap cannot be cast to org.bson.BSONObject","body":"<p>I have been working wrote a MapReduce Program to implement word count with data store in MongoDB. I want to cast BSONObject to HashMap in Java, but it return the error</p>\n\n<pre><code>java.lang.Exception: java.lang.ClassCastException: java.util.HashMap cannot be cast to org.bson.BSONObject\n</code></pre>\n\n<p>And my code</p>\n\n<pre><code>BasicBSONObject result = new BasicBSONObject();\nHashMap&lt;String, Integer&gt; mymap = new HashMap&lt;String, Integer&gt;();\n[snippt]\nfor (BSONWritable val : values) {\n{\n    HashMap&lt;String, Integer&gt; temp = (HashMap&lt;String, Integer&gt;) val.getDoc().toMap();\n    for (Map.Entry&lt;String, Integer&gt; entry :  temp.entrySet()) {\n        if (mymap.containsKey(entry.getKey())) {\n            mymap.put(entry.getKey(), entry.getValue()+1);\n        }\n        else {\n            mymap.put(entry.getKey(), 1);\n        }\n    }\n\n}\nresult.putAll((BSONObject)mymap);\n</code></pre>\n\n<p>I want to my <code>ｍymap</code> into <code>result</code>. Since <code>mymap</code> is a <code>HashMap</code> instance, I think <code>putAll</code> method is a choice.</p>\n\n<p>How can I fix it? Thanks!</p>\n"},{"tags":["java","excel","apache-poi","xls"],"comments":[{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":1,"creation_date":1694582048,"post_id":77093684,"comment_id":135908370,"body_markdown":"Can you upload the `Template.xls` somewhere? Or at least show a screenshot of first sheet Range `A1:E5` of that workbook. And please tell what content is in `D2` before the code runs.","body":"Can you upload the <code>Template.xls</code> somewhere? Or at least show a screenshot of first sheet Range <code>A1:E5</code> of that workbook. And please tell what content is in <code>D2</code> before the code runs."},{"owner":{"account_id":26397399,"reputation":1,"user_id":20048342,"display_name":"Vyron"},"score":0,"creation_date":1694672621,"post_id":77093684,"comment_id":135922504,"body_markdown":"@AxelRichter thank you for replying. I have updated my question added the screenshot of the sheet from `A1:E5`, also what is the `D2` means? if it&#39;s the excel cell content, then its empty currently.","body":"@AxelRichter thank you for replying. I have updated my question added the screenshot of the sheet from <code>A1:E5</code>, also what is the <code>D2</code> means? if it&#39;s the excel cell content, then its empty currently."},{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":0,"creation_date":1694674228,"post_id":77093684,"comment_id":135922719,"body_markdown":"Can it be that range `B1:*` or `B2:*` is part of a query table which pulls data from external source? If so, then this is the reason for the problem. You cannot change cell values in query tables using Apache POI.","body":"Can it be that range <code>B1:*</code> or <code>B2:*</code> is part of a query table which pulls data from external source? If so, then this is the reason for the problem. You cannot change cell values in query tables using Apache POI."},{"owner":{"account_id":26397399,"reputation":1,"user_id":20048342,"display_name":"Vyron"},"score":0,"creation_date":1694675709,"post_id":77093684,"comment_id":135923005,"body_markdown":"I check the template again, there is no cell values that pulls data from external source. I try to find the reason behind the error so i tried removed two cells using list data validation and when it&#39;s removed the workbook created don&#39;t have the error, but the cell should supposedly not to be removed.","body":"I check the template again, there is no cell values that pulls data from external source. I try to find the reason behind the error so i tried removed two cells using list data validation and when it&#39;s removed the workbook created don&#39;t have the error, but the cell should supposedly not to be removed."},{"owner":{"account_id":26397399,"reputation":1,"user_id":20048342,"display_name":"Vyron"},"score":0,"creation_date":1695345330,"post_id":77093684,"comment_id":136015407,"body_markdown":"Yes, it answered my question! Thank you. Now I am looking for any workaround of the problem and ask another question related to this.","body":"Yes, it answered my question! Thank you. Now I am looking for any workaround of the problem and ask another question related to this."}],"answers":[{"tags":[],"owner":{"account_id":26397399,"reputation":1,"user_id":20048342,"display_name":"Vyron"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695183657,"creation_date":1695183657,"answer_id":77139265,"question_id":77093684,"body_markdown":"This is not an answer but just to say that my current problem is more or less because of two cells with data validation like this [Here][1]. The problem is the excel file cannot be changed as it won&#39;t be valid anymore to use.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/51848887/finding-the-cause-of-excel-file-corruption","title":"Write data to existing excel (.xls) using apache POI, the workbook created give error excel lost some data","body":"<p>This is not an answer but just to say that my current problem is more or less because of two cells with data validation like this <a href=\"https://stackoverflow.com/questions/51848887/finding-the-cause-of-excel-file-corruption\">Here</a>. The problem is the excel file cannot be changed as it won't be valid anymore to use.</p>\n"}],"owner":{"account_id":26397399,"reputation":1,"user_id":20048342,"display_name":"Vyron"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1695345338,"answer_count":1,"score":0,"last_activity_date":1695183657,"creation_date":1694572157,"question_id":77093684,"body_markdown":"I&#39;m trying to work on writing data to the excel file using apache POI-3.15-beta1, but when the workbook is created, the workbook becomes corrupted with lost some content which is some of the formula not working and table style is lost. If the original excel file is open while opening the updated excel, all content is there and there is no error. Other excel I tested working properly. Any suggestions of why this the problem happened and any solution?\r\n\r\nThis error popup before opening the excel:\r\n[Lost content error][1]\r\n\r\nThis popup after opening the excel when yes is clicked:\r\n[Error][2]\r\n\r\n[Edit] Cell A1:E5: [Update][3]\r\nI just used this java code here\r\n\r\n    FileInputStream inputStream = new FileInputStream(&quot;D:/Template.xls&quot;);\r\n    Workbook workbook = null;\r\n    workbook = new HSSFWorkbook(inputStream);\r\n    inputStream.close();\r\n    \r\n    Sheet sheet = workbook.getSheetAt(0);\r\n\r\n    Cell cell= sheet.getRow(1).getCell(3);\r\n\r\n    cell.setCellValue(30);\r\n \r\n    FileOutputStream out = new FileOutputStream(new File(&quot;D:/Test.xls&quot;));\r\n    workbook.write(out);\r\n    out.close();\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/6L7D1.png\r\n  [2]: https://i.stack.imgur.com/6yZ2z.png\r\n  [3]: https://i.stack.imgur.com/LAr69.png","title":"Write data to existing excel (.xls) using apache POI, the workbook created give error excel lost some data","body":"<p>I'm trying to work on writing data to the excel file using apache POI-3.15-beta1, but when the workbook is created, the workbook becomes corrupted with lost some content which is some of the formula not working and table style is lost. If the original excel file is open while opening the updated excel, all content is there and there is no error. Other excel I tested working properly. Any suggestions of why this the problem happened and any solution?</p>\n<p>This error popup before opening the excel:\n<a href=\"https://i.stack.imgur.com/6L7D1.png\" rel=\"nofollow noreferrer\">Lost content error</a></p>\n<p>This popup after opening the excel when yes is clicked:\n<a href=\"https://i.stack.imgur.com/6yZ2z.png\" rel=\"nofollow noreferrer\">Error</a></p>\n<p>[Edit] Cell A1:E5: <a href=\"https://i.stack.imgur.com/LAr69.png\" rel=\"nofollow noreferrer\">Update</a>\nI just used this java code here</p>\n<pre><code>FileInputStream inputStream = new FileInputStream(&quot;D:/Template.xls&quot;);\nWorkbook workbook = null;\nworkbook = new HSSFWorkbook(inputStream);\ninputStream.close();\n\nSheet sheet = workbook.getSheetAt(0);\n\nCell cell= sheet.getRow(1).getCell(3);\n\ncell.setCellValue(30);\n\nFileOutputStream out = new FileOutputStream(new File(&quot;D:/Test.xls&quot;));\nworkbook.write(out);\nout.close();\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-security"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1695190233,"post_id":77138430,"comment_id":135989073,"body_markdown":"The problem is your methods are `final` those cannot be proxied and as security is applied through AOP which utilizes proxies your methods cannot be `final`.","body":"The problem is your methods are <code>final</code> those cannot be proxied and as security is applied through AOP which utilizes proxies your methods cannot be <code>final</code>."},{"owner":{"account_id":29486111,"reputation":3,"user_id":22595985,"display_name":"Luca Ferretti"},"score":0,"creation_date":1695228147,"post_id":77138430,"comment_id":135997486,"body_markdown":"Thank you for the explanation, that worked!","body":"Thank you for the explanation, that worked!"}],"answers":[{"tags":[],"owner":{"account_id":25804254,"reputation":774,"user_id":19546048,"display_name":"DingHao"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1695182197,"creation_date":1695182197,"answer_id":77139202,"question_id":77138430,"body_markdown":"please remove final modifier on getBoolean and getNumber ","title":"@PreAuthorize not working in spring security 6.1.3 in spring 3.1.3","body":"<p>please remove final modifier on getBoolean and getNumber</p>\n"}],"owner":{"account_id":29486111,"reputation":3,"user_id":22595985,"display_name":"Luca Ferretti"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":268,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77139202,"answer_count":1,"score":0,"last_activity_date":1695182197,"creation_date":1695164935,"question_id":77138430,"body_markdown":"I am facing a problem using Spring security @PreAuthorize annotation. I have followed many tutorials and theorically I am making everything right but for some reasons it doesn&#39;t work.\r\n\r\nAll I wanted to do in this test was to have a public request (/hello) and 2 private requests, one for the users only (/boolean) and another one for the admin only (/number).\r\nThe private ones are correctly redirected to login but both /boolean and /number work with both credentials.\r\nIf I call /boolean with the user I am getting User Authorities: [ROLE_USER], but if I use admin credentials it logs User Authorities: [ROLE_ADMIN] as if the @PreAuthorize didn&#39;t exists.\r\nSame behaviour for the /number.\r\n\r\nMy controller:\r\n\r\n\r\n```\r\n@RestController\r\n@RequestMapping(value = &quot;/rest/api/security&quot;)\r\npublic class BaseController extends HateosController{\r\n\t\r\n\t@GetMapping(&quot;/hello&quot;)\r\n\tpublic final String getHello() {\r\n\t\treturn &quot;Ciao!&quot;;\r\n\t}\r\n\t\r\n\t@GetMapping(&quot;/boolean&quot;)\r\n\t@PreAuthorize(&quot;hasRole(&#39;ROLE_USER&#39;)&quot;)\r\n\tpublic final boolean getBoolean(Authentication authentication) {\r\n\t    System.out.println(&quot;User Authorities: &quot; + authentication.getAuthorities());\r\n\t\treturn true;\r\n\t}\r\n\t\r\n\t@GetMapping(&quot;/number&quot;)\r\n\t@PreAuthorize(&quot;hasAuthority(&#39;ROLE_ADMIN&#39;)&quot;)\r\n\tpublic final Integer getNumber(Authentication authentication) {\r\n\t    System.out.println(&quot;User Authorities: &quot; + authentication.getAuthorities());\r\n\t\treturn 115683;\r\n\t}\r\n}\r\n```\r\n\r\nMy SecurityConfig:\r\n\r\n```\r\n@Configuration\r\n@EnableWebSecurity\r\n@EnableMethodSecurity\r\npublic class SecurityConfig {\r\n\t\r\n\t@Bean\r\n\tpublic UserDetailsService userDetailsService(PasswordEncoder encoder) {\r\n\t\tUserDetails admin = User.withUsername(&quot;admin&quot;).password(encoder.encode(&quot;admin&quot;)).roles(&quot;ADMIN&quot;).build();\r\n\t\tUserDetails user = User.withUsername(&quot;user&quot;).password(encoder.encode(&quot;user&quot;)).roles(&quot;USER&quot;).build();\r\n\t\treturn new InMemoryUserDetailsManager(admin, user);\r\n\t}\r\n\t\r\n\t@Bean\r\n\tpublic SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\r\n\t\treturn http.csrf().disable()\r\n\t\t\t\t.authorizeHttpRequests()\r\n\t\t\t\t.requestMatchers(&quot;/rest/api/security/hello&quot;).permitAll().anyRequest().authenticated().and().formLogin()\r\n\t\t\t\t.and().build();\r\n\t}\r\n\t\r\n\t@Bean\r\n\tpublic PasswordEncoder passwordEncoder() {\r\n\t\treturn new BCryptPasswordEncoder();\r\n\t}\r\n\r\n}\r\n\r\n```\r\n\r\nAny suggestions?\r\nP.S: I know something in securityFilterChain is deprecated but it should work the same and i have tried also with newer methods with no results.\r\n","title":"@PreAuthorize not working in spring security 6.1.3 in spring 3.1.3","body":"<p>I am facing a problem using Spring security @PreAuthorize annotation. I have followed many tutorials and theorically I am making everything right but for some reasons it doesn't work.</p>\n<p>All I wanted to do in this test was to have a public request (/hello) and 2 private requests, one for the users only (/boolean) and another one for the admin only (/number).\nThe private ones are correctly redirected to login but both /boolean and /number work with both credentials.\nIf I call /boolean with the user I am getting User Authorities: [ROLE_USER], but if I use admin credentials it logs User Authorities: [ROLE_ADMIN] as if the @PreAuthorize didn't exists.\nSame behaviour for the /number.</p>\n<p>My controller:</p>\n<pre><code>@RestController\n@RequestMapping(value = &quot;/rest/api/security&quot;)\npublic class BaseController extends HateosController{\n    \n    @GetMapping(&quot;/hello&quot;)\n    public final String getHello() {\n        return &quot;Ciao!&quot;;\n    }\n    \n    @GetMapping(&quot;/boolean&quot;)\n    @PreAuthorize(&quot;hasRole('ROLE_USER')&quot;)\n    public final boolean getBoolean(Authentication authentication) {\n        System.out.println(&quot;User Authorities: &quot; + authentication.getAuthorities());\n        return true;\n    }\n    \n    @GetMapping(&quot;/number&quot;)\n    @PreAuthorize(&quot;hasAuthority('ROLE_ADMIN')&quot;)\n    public final Integer getNumber(Authentication authentication) {\n        System.out.println(&quot;User Authorities: &quot; + authentication.getAuthorities());\n        return 115683;\n    }\n}\n</code></pre>\n<p>My SecurityConfig:</p>\n<pre><code>@Configuration\n@EnableWebSecurity\n@EnableMethodSecurity\npublic class SecurityConfig {\n    \n    @Bean\n    public UserDetailsService userDetailsService(PasswordEncoder encoder) {\n        UserDetails admin = User.withUsername(&quot;admin&quot;).password(encoder.encode(&quot;admin&quot;)).roles(&quot;ADMIN&quot;).build();\n        UserDetails user = User.withUsername(&quot;user&quot;).password(encoder.encode(&quot;user&quot;)).roles(&quot;USER&quot;).build();\n        return new InMemoryUserDetailsManager(admin, user);\n    }\n    \n    @Bean\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n        return http.csrf().disable()\n                .authorizeHttpRequests()\n                .requestMatchers(&quot;/rest/api/security/hello&quot;).permitAll().anyRequest().authenticated().and().formLogin()\n                .and().build();\n    }\n    \n    @Bean\n    public PasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder();\n    }\n\n}\n\n</code></pre>\n<p>Any suggestions?\nP.S: I know something in securityFilterChain is deprecated but it should work the same and i have tried also with newer methods with no results.</p>\n"},{"tags":["java","maven-3","maven-shade-plugin"],"comments":[{"owner":{"account_id":5167086,"reputation":655,"user_id":4136745,"display_name":"sify"},"score":0,"creation_date":1666151558,"post_id":74119618,"comment_id":130865061,"body_markdown":"I found related issue: https://issues.apache.org/jira/browse/MSHADE-406","body":"I found related issue: <a href=\"https://issues.apache.org/jira/browse/MSHADE-406\" rel=\"nofollow noreferrer\">issues.apache.org/jira/browse/MSHADE-406</a>"},{"owner":{"account_id":5167086,"reputation":655,"user_id":4136745,"display_name":"sify"},"score":0,"creation_date":1699608132,"post_id":74119618,"comment_id":136556099,"body_markdown":"The team started to work on this: https://github.com/apache/maven-shade-plugin/pull/202","body":"The team started to work on this: <a href=\"https://github.com/apache/maven-shade-plugin/pull/202\" rel=\"nofollow noreferrer\">github.com/apache/maven-shade-plugin/pull/202</a>"}],"answers":[{"tags":[],"owner":{"account_id":5167086,"reputation":655,"user_id":4136745,"display_name":"sify"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1666172493,"creation_date":1666172493,"answer_id":74123163,"question_id":74119618,"body_markdown":"I found a work-around for this: use `antrun` plugin to unzip final jar, move directories under `META-INF/versions` manually, then repack the jar.\r\n\r\n    \t    &lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-antrun-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;3.1.0&lt;/version&gt;\r\n\t\t\t\t&lt;executions&gt;\r\n\t\t\t\t\t&lt;execution&gt;\r\n\t\t\t\t\t\t&lt;id&gt;repack&lt;/id&gt;\r\n\t\t\t\t\t\t&lt;phase&gt;package&lt;/phase&gt;\r\n\t\t\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t\t\t&lt;goal&gt;run&lt;/goal&gt;\r\n\t\t\t\t\t\t&lt;/goals&gt;\r\n\t\t\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t\t\t&lt;target&gt;\r\n\t\t\t\t\t\t\t\t&lt;unzip src=&quot;${project.build.directory}/${project.build.finalName}.jar&quot; dest=&quot;${project.build.directory}/tmp&quot; /&gt;\r\n\t\t\t\t\t\t\t\t&lt;mkdir dir=&quot;${project.build.directory}/tmp/META-INF/versions/9/your/relocation/prefix&quot; /&gt;\r\n\t\t\t\t\t\t\t\t&lt;move file=&quot;${project.build.directory}/tmp/META-INF/versions/9/org&quot; todir=&quot;${project.build.directory}/tmp/META-INF/versions/9/your/relocation/prefix&quot; /&gt;\r\n\t\t\t\t\t\t\t\t&lt;zip basedir=&quot;${project.build.directory}/tmp&quot; destfile=&quot;${project.build.directory}/${project.build.finalName}.jar&quot; /&gt;\r\n                                &lt;delete dir=&quot;${project.build.directory}/tmp&quot; /&gt;\r\n\t\t\t\t\t\t\t&lt;/target&gt;\r\n\t\t\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t\t\t&lt;/execution&gt;\r\n\t\t\t\t&lt;/executions&gt;\r\n\t\t\t&lt;/plugin&gt;","title":"maven-shade-plugin relocate classes under META-INF/versions in multi-release jar","body":"<p>I found a work-around for this: use <code>antrun</code> plugin to unzip final jar, move directories under <code>META-INF/versions</code> manually, then repack the jar.</p>\n<pre><code>        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-antrun-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.1.0&lt;/version&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;id&gt;repack&lt;/id&gt;\n                    &lt;phase&gt;package&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;run&lt;/goal&gt;\n                    &lt;/goals&gt;\n                    &lt;configuration&gt;\n                        &lt;target&gt;\n                            &lt;unzip src=&quot;${project.build.directory}/${project.build.finalName}.jar&quot; dest=&quot;${project.build.directory}/tmp&quot; /&gt;\n                            &lt;mkdir dir=&quot;${project.build.directory}/tmp/META-INF/versions/9/your/relocation/prefix&quot; /&gt;\n                            &lt;move file=&quot;${project.build.directory}/tmp/META-INF/versions/9/org&quot; todir=&quot;${project.build.directory}/tmp/META-INF/versions/9/your/relocation/prefix&quot; /&gt;\n                            &lt;zip basedir=&quot;${project.build.directory}/tmp&quot; destfile=&quot;${project.build.directory}/${project.build.finalName}.jar&quot; /&gt;\n                            &lt;delete dir=&quot;${project.build.directory}/tmp&quot; /&gt;\n                        &lt;/target&gt;\n                    &lt;/configuration&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6734,"reputation":3954,"user_id":11451,"accept_rate":82,"display_name":"Kristof Neirynck"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1688741949,"creation_date":1688741608,"answer_id":76638014,"question_id":74119618,"body_markdown":"I&#39;ve tried this and it seems to work.\r\n\r\n```xml\r\n&lt;plugin&gt;\r\n  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n  &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\r\n  &lt;version&gt;3.5.0&lt;/version&gt;\r\n  &lt;executions&gt;\r\n    &lt;execution&gt;\r\n      &lt;id&gt;shade&lt;/id&gt;\r\n      &lt;phase&gt;package&lt;/phase&gt;\r\n      &lt;goals&gt;\r\n        &lt;goal&gt;shade&lt;/goal&gt;\r\n      &lt;/goals&gt;\r\n      &lt;configuration&gt;\r\n        ...\r\n        &lt;transformers&gt;\r\n          &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.ManifestResourceTransformer&quot;&gt;\r\n            &lt;manifestEntries&gt;\r\n              &lt;Multi-Release&gt;true&lt;/Multi-Release&gt;\r\n            &lt;/manifestEntries&gt;\r\n          &lt;/transformer&gt;\r\n        &lt;/transformers&gt;\r\n        &lt;filters&gt;\r\n          &lt;filter&gt;\r\n            &lt;artifact&gt;*:*&lt;/artifact&gt;\r\n            &lt;excludes&gt;\r\n              &lt;exclude&gt;META-INF/*.SF&lt;/exclude&gt;\r\n              &lt;exclude&gt;META-INF/*.DSA&lt;/exclude&gt;\r\n              &lt;exclude&gt;META-INF/*.RSA&lt;/exclude&gt;\r\n              &lt;exclude&gt;META-INF/MANIFEST.MF&lt;/exclude&gt;\r\n              &lt;exclude&gt;module-info.class&lt;/exclude&gt;\r\n            &lt;/excludes&gt;\r\n          &lt;/filter&gt;\r\n        &lt;/filters&gt;\r\n        &lt;relocations&gt;\r\n          ...\r\n          &lt;relocation&gt;\r\n            &lt;pattern&gt;META-INF/versions/9/javax.xml.bind&lt;/pattern&gt;\r\n            &lt;shadedPattern&gt;META-INF/versions/9/com.example.shaded.javax.xml.bind&lt;/shadedPattern&gt;\r\n          &lt;/relocation&gt;\r\n        &lt;/relocations&gt;\r\n      &lt;/configuration&gt;\r\n    &lt;/execution&gt;\r\n  &lt;/executions&gt;\r\n&lt;/plugin&gt;\r\n```","title":"maven-shade-plugin relocate classes under META-INF/versions in multi-release jar","body":"<p>I've tried this and it seems to work.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugin&gt;\n  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n  &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\n  &lt;version&gt;3.5.0&lt;/version&gt;\n  &lt;executions&gt;\n    &lt;execution&gt;\n      &lt;id&gt;shade&lt;/id&gt;\n      &lt;phase&gt;package&lt;/phase&gt;\n      &lt;goals&gt;\n        &lt;goal&gt;shade&lt;/goal&gt;\n      &lt;/goals&gt;\n      &lt;configuration&gt;\n        ...\n        &lt;transformers&gt;\n          &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.ManifestResourceTransformer&quot;&gt;\n            &lt;manifestEntries&gt;\n              &lt;Multi-Release&gt;true&lt;/Multi-Release&gt;\n            &lt;/manifestEntries&gt;\n          &lt;/transformer&gt;\n        &lt;/transformers&gt;\n        &lt;filters&gt;\n          &lt;filter&gt;\n            &lt;artifact&gt;*:*&lt;/artifact&gt;\n            &lt;excludes&gt;\n              &lt;exclude&gt;META-INF/*.SF&lt;/exclude&gt;\n              &lt;exclude&gt;META-INF/*.DSA&lt;/exclude&gt;\n              &lt;exclude&gt;META-INF/*.RSA&lt;/exclude&gt;\n              &lt;exclude&gt;META-INF/MANIFEST.MF&lt;/exclude&gt;\n              &lt;exclude&gt;module-info.class&lt;/exclude&gt;\n            &lt;/excludes&gt;\n          &lt;/filter&gt;\n        &lt;/filters&gt;\n        &lt;relocations&gt;\n          ...\n          &lt;relocation&gt;\n            &lt;pattern&gt;META-INF/versions/9/javax.xml.bind&lt;/pattern&gt;\n            &lt;shadedPattern&gt;META-INF/versions/9/com.example.shaded.javax.xml.bind&lt;/shadedPattern&gt;\n          &lt;/relocation&gt;\n        &lt;/relocations&gt;\n      &lt;/configuration&gt;\n    &lt;/execution&gt;\n  &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29487433,"reputation":1,"user_id":22597036,"display_name":"Zuokui Fu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695182087,"creation_date":1695182087,"answer_id":77139194,"question_id":74119618,"body_markdown":"also met this issue, you can try the solution below:\r\n```\r\n&lt;relocations&gt;\r\n\t&lt;relocation&gt;\r\n\t\t&lt;pattern&gt;org/apache/lucene&lt;/pattern&gt;\r\n\t\t&lt;shadedPattern&gt;org/apache/relocation/lucene/v811&lt;/shadedPattern&gt;\r\n\t\t&lt;rawString&gt;true&lt;/rawString&gt;\r\n\t&lt;/relocation&gt;\r\n&lt;/relocations&gt;\r\n```\r\n\r\nset the rawString property to ture, and use&#39;/&#39;(not &#39;.&#39;)in the pattern/shadedPattern properties.","title":"maven-shade-plugin relocate classes under META-INF/versions in multi-release jar","body":"<p>also met this issue, you can try the solution below:</p>\n<pre><code>&lt;relocations&gt;\n    &lt;relocation&gt;\n        &lt;pattern&gt;org/apache/lucene&lt;/pattern&gt;\n        &lt;shadedPattern&gt;org/apache/relocation/lucene/v811&lt;/shadedPattern&gt;\n        &lt;rawString&gt;true&lt;/rawString&gt;\n    &lt;/relocation&gt;\n&lt;/relocations&gt;\n</code></pre>\n<p>set the rawString property to ture, and use'/'(not '.')in the pattern/shadedPattern properties.</p>\n"}],"owner":{"account_id":5167086,"reputation":655,"user_id":4136745,"display_name":"sify"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":283,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1695182087,"creation_date":1666151000,"question_id":74119618,"body_markdown":"I&#39;m using shade to create uber jar. I relocated dependency classes to avoid conflicts. However, I can&#39;t find online docs about how to relocate classes under META-INF/versions.","title":"maven-shade-plugin relocate classes under META-INF/versions in multi-release jar","body":"<p>I'm using shade to create uber jar. I relocated dependency classes to avoid conflicts. However, I can't find online docs about how to relocate classes under META-INF/versions.</p>\n"},{"tags":["java","apache-kafka","apache-flink","flink-cep"],"answers":[{"tags":[],"owner":{"account_id":5448964,"reputation":95,"user_id":4334448,"display_name":"Flaviu Cicio"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695130580,"creation_date":1695130580,"answer_id":77135060,"question_id":77116505,"body_markdown":"The output is fully redirected to the file.\r\nYou can use the `tee` command to copy the output to the file while printing to the console.\r\n\r\n```\r\n./bin/flink run /Users/spartacus/icu-alarm/target/flink-kafka-stroke-risk-1.0-SNAPSHOT-jar-with-dependencies.jar &gt;&amp;1 | tee out.txt\r\n```","title":"Flink job not printing expected output from Kafka Source","body":"<p>The output is fully redirected to the file.\nYou can use the <code>tee</code> command to copy the output to the file while printing to the console.</p>\n<pre><code>./bin/flink run /Users/spartacus/icu-alarm/target/flink-kafka-stroke-risk-1.0-SNAPSHOT-jar-with-dependencies.jar &gt;&amp;1 | tee out.txt\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7486653,"reputation":290,"user_id":5689611,"accept_rate":80,"display_name":"Hasintha Samith Randika"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695180424,"creation_date":1695180424,"answer_id":77139121,"question_id":77116505,"body_markdown":"The output will not print to your console as the job is running inside the flink application.\r\nopen the flink UI and check on the job you run.\r\nThen check the STD out tab for the required information.\r\nBut what is the use case for printing the output to std out?\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/4gvL9.png","title":"Flink job not printing expected output from Kafka Source","body":"<p>The output will not print to your console as the job is running inside the flink application.\nopen the flink UI and check on the job you run.\nThen check the STD out tab for the required information.\nBut what is the use case for printing the output to std out?\n<a href=\"https://i.stack.imgur.com/4gvL9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4gvL9.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":24386325,"reputation":329,"user_id":18317047,"display_name":"Ishaan Adarsh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1695180424,"creation_date":1694842947,"question_id":77116505,"body_markdown":"I am working on a Flink job that reads data from a Kafka source, processes it using CEP patterns, and prints alerts to the console. However, when I run the Flink job using the following command:\r\n\r\n```shell\r\n./bin/flink run /Users/spartacus/icu-alarm/target/flink-kafka-stroke-risk-1.0-SNAPSHOT-jar-with-dependencies.jar &gt; out.txt\r\n```\r\n\r\nI only see the following output in the `out.txt` file:\r\n\r\n```\r\nJob has been submitted with JobID 3811369c6f7f14d0eca0a66072550414\r\n```\r\n\r\nThe expected behavior is that the Flink job should print alerts to the console like \r\n\r\n`Stroke Risk Alert: Patient ID - XYZ, Risk Level - 5`\r\n\r\nHowever, it seems that the alerts are not being printed.\r\n\r\n### Code:\r\n```\r\npackage hes.cs63.CEPMonitor;\r\n\r\nimport org.apache.flink.api.common.eventtime.WatermarkStrategy;\r\nimport org.apache.flink.api.common.serialization.SimpleStringSchema;\r\nimport org.apache.flink.cep.CEP;\r\nimport org.apache.flink.cep.pattern.Pattern;\r\nimport org.apache.flink.cep.PatternStream;\r\nimport org.apache.flink.cep.PatternSelectFunction;\r\nimport org.apache.flink.cep.pattern.conditions.SimpleCondition;\r\nimport org.apache.flink.streaming.api.datastream.DataStream;\r\nimport org.apache.flink.streaming.api.datastream.DataStreamSource;\r\nimport org.apache.flink.streaming.api.environment.StreamExecutionEnvironment;\r\nimport org.apache.flink.connector.kafka.source.KafkaSource;\r\nimport org.apache.flink.connector.kafka.source.reader.deserializer.KafkaRecordDeserializationSchema;\r\nimport org.apache.kafka.common.serialization.StringDeserializer;\r\n\r\nimport java.util.Arrays;\r\nimport java.util.List;\r\nimport java.util.Map;\r\nimport java.util.Properties;\r\n\r\npublic class StrokeRiskAlarm {\r\n    public static void main(String[] args) throws Exception {\r\n        StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();\r\n\r\n        Properties properties = new Properties();\r\n        properties.setProperty(&quot;bootstrap.servers&quot;, &quot;localhost:9092&quot;);\r\n        properties.setProperty(&quot;group.id&quot;, &quot;test-consumer-group&quot;);\r\n\r\n        KafkaSource&lt;String&gt; source = KafkaSource.&lt;String&gt;builder()\r\n                .setBootstrapServers(&quot;localhost:9092&quot;)\r\n                .setGroupId(&quot;test-consumer-group&quot;)\r\n                .setTopics(Arrays.asList(&quot;geCEP&quot;))\r\n                .setDeserializer(KafkaRecordDeserializationSchema.valueOnly(StringDeserializer.class))\r\n                //.setStartingOffsets(OffsetsInitializer.earliest())\r\n                .setValueOnlyDeserializer(new SimpleStringSchema())\r\n                .build();\r\n\r\n        DataStreamSource&lt;String&gt; patientData = env.fromSource(source, WatermarkStrategy.noWatermarks(), &quot;Kafka Source&quot;);\r\n\r\n        // Use KafkaSource\r\n        Pattern&lt;String, ?&gt; highRiskPattern = Pattern.&lt;String&gt;begin(&quot;first&quot;)\r\n                .where(new SimpleCondition&lt;String&gt;() {\r\n                    @Override\r\n                    public boolean filter(String value) {\r\n                        return getValue(value) &gt; 3;\r\n                    }\r\n                });\r\n\r\n        PatternStream&lt;String&gt; patternStream = CEP.pattern(\r\n                patientData,\r\n                highRiskPattern\r\n        );\r\n\r\n        DataStream&lt;String&gt; strokeRiskAlerts = patternStream.select(new PatternSelectFunction&lt;String, String&gt;() {\r\n            @Override\r\n            public String select(Map&lt;String, List&lt;String&gt;&gt; pattern) throws Exception {\r\n                String userId = pattern.get(&quot;first&quot;).get(0).split(&quot;,&quot;)[0].trim();\r\n                int risk = getTotalRisk(pattern.get(&quot;first&quot;).get(0), pattern.get(&quot;middle&quot;).get(0), pattern.get(&quot;last&quot;).get(0));\r\n                return &quot;Stroke Risk Alert: Patient ID - &quot; + userId + &quot;, Risk Level - &quot; + risk;\r\n            }\r\n        });\r\n\r\n        strokeRiskAlerts.print();\r\n\r\n        env.execute(&quot;Stroke Risk Alert Job&quot;);\r\n    }\r\n\r\n    private static int getValue(String value) {\r\n        // Parse the input value and extract the relevant data for risk calculation\r\n        String[] parts = value.split(&quot;,&quot;);\r\n        String type = parts[2].trim();\r\n        double measurementValue = Double.parseDouble(parts[3].trim());\r\n\r\n        // Implement your logic to check high stroke risk for different measurements\r\n        if (type.equals(&quot;HR&quot;)) {\r\n            // HeartMeasurement risk calculation logic\r\n            int risk = 0;\r\n            risk += measurementValue &lt;= 50 ? 1 : 0;\r\n            risk += measurementValue &lt;= 40 ? 1 : 0;\r\n            risk += measurementValue &gt;= 91 ? 1 : 0;\r\n            risk += measurementValue &gt;= 110 ? 1 : 0;\r\n            risk += measurementValue &gt;= 131 ? 1 : 0;\r\n            return risk;\r\n        } else if (type.equals(&quot;SBP&quot;)) {\r\n            // BloodPressureMeasurement risk calculation logic\r\n            int risk = 0;\r\n            risk += measurementValue &lt;= 110 ? 1 : 0;\r\n            risk += measurementValue &lt;= 100 ? 1 : 0;\r\n            risk += measurementValue &lt;= 90 ? 1 : 0;\r\n            risk += measurementValue &gt;= 220 ? 3 : 0;\r\n            return risk;\r\n        } else if (type.equals(&quot;TEMP&quot;)) {\r\n            // TempMeasurement risk calculation logic\r\n            int risk = 0;\r\n            risk += measurementValue &lt;= 36 ? 1 : 0;\r\n            risk += measurementValue &lt;= 35 ? 2 : 0;\r\n            risk += measurementValue &gt;= 38.1 ? 1 : 0;\r\n            risk += measurementValue &gt;= 39.1 ? 1 : 0;\r\n            return risk;\r\n        }\r\n        // Default risk calculation\r\n        return 0;\r\n    }\r\n\r\n    private static int getTotalRisk(String firstValue, String middleValue, String lastValue) {\r\n        // Calculate the total risk based on the values of the first, middle, and last measurements\r\n        int firstRisk = getValue(firstValue);\r\n        int middleRisk = getValue(middleValue);\r\n        int lastRisk = getValue(lastValue);\r\n        return firstRisk + middleRisk + lastRisk;\r\n    }\r\n}\r\n```\r\n\r\nProject code: https://github.com/IshaanAdarsh/icu-alarm/tree/main\r\n\r\nI have verified my code, and I believe the logic for generating alerts is correct. Additionally, I have set up the Kafka source properly. \r\n\r\nWhat could be the reason behind this issue, and how can I troubleshoot it to ensure that the expected alerts are printed to the console?","title":"Flink job not printing expected output from Kafka Source","body":"<p>I am working on a Flink job that reads data from a Kafka source, processes it using CEP patterns, and prints alerts to the console. However, when I run the Flink job using the following command:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>./bin/flink run /Users/spartacus/icu-alarm/target/flink-kafka-stroke-risk-1.0-SNAPSHOT-jar-with-dependencies.jar &gt; out.txt\n</code></pre>\n<p>I only see the following output in the <code>out.txt</code> file:</p>\n<pre><code>Job has been submitted with JobID 3811369c6f7f14d0eca0a66072550414\n</code></pre>\n<p>The expected behavior is that the Flink job should print alerts to the console like</p>\n<p><code>Stroke Risk Alert: Patient ID - XYZ, Risk Level - 5</code></p>\n<p>However, it seems that the alerts are not being printed.</p>\n<h3>Code:</h3>\n<pre><code>package hes.cs63.CEPMonitor;\n\nimport org.apache.flink.api.common.eventtime.WatermarkStrategy;\nimport org.apache.flink.api.common.serialization.SimpleStringSchema;\nimport org.apache.flink.cep.CEP;\nimport org.apache.flink.cep.pattern.Pattern;\nimport org.apache.flink.cep.PatternStream;\nimport org.apache.flink.cep.PatternSelectFunction;\nimport org.apache.flink.cep.pattern.conditions.SimpleCondition;\nimport org.apache.flink.streaming.api.datastream.DataStream;\nimport org.apache.flink.streaming.api.datastream.DataStreamSource;\nimport org.apache.flink.streaming.api.environment.StreamExecutionEnvironment;\nimport org.apache.flink.connector.kafka.source.KafkaSource;\nimport org.apache.flink.connector.kafka.source.reader.deserializer.KafkaRecordDeserializationSchema;\nimport org.apache.kafka.common.serialization.StringDeserializer;\n\nimport java.util.Arrays;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.Properties;\n\npublic class StrokeRiskAlarm {\n    public static void main(String[] args) throws Exception {\n        StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();\n\n        Properties properties = new Properties();\n        properties.setProperty(&quot;bootstrap.servers&quot;, &quot;localhost:9092&quot;);\n        properties.setProperty(&quot;group.id&quot;, &quot;test-consumer-group&quot;);\n\n        KafkaSource&lt;String&gt; source = KafkaSource.&lt;String&gt;builder()\n                .setBootstrapServers(&quot;localhost:9092&quot;)\n                .setGroupId(&quot;test-consumer-group&quot;)\n                .setTopics(Arrays.asList(&quot;geCEP&quot;))\n                .setDeserializer(KafkaRecordDeserializationSchema.valueOnly(StringDeserializer.class))\n                //.setStartingOffsets(OffsetsInitializer.earliest())\n                .setValueOnlyDeserializer(new SimpleStringSchema())\n                .build();\n\n        DataStreamSource&lt;String&gt; patientData = env.fromSource(source, WatermarkStrategy.noWatermarks(), &quot;Kafka Source&quot;);\n\n        // Use KafkaSource\n        Pattern&lt;String, ?&gt; highRiskPattern = Pattern.&lt;String&gt;begin(&quot;first&quot;)\n                .where(new SimpleCondition&lt;String&gt;() {\n                    @Override\n                    public boolean filter(String value) {\n                        return getValue(value) &gt; 3;\n                    }\n                });\n\n        PatternStream&lt;String&gt; patternStream = CEP.pattern(\n                patientData,\n                highRiskPattern\n        );\n\n        DataStream&lt;String&gt; strokeRiskAlerts = patternStream.select(new PatternSelectFunction&lt;String, String&gt;() {\n            @Override\n            public String select(Map&lt;String, List&lt;String&gt;&gt; pattern) throws Exception {\n                String userId = pattern.get(&quot;first&quot;).get(0).split(&quot;,&quot;)[0].trim();\n                int risk = getTotalRisk(pattern.get(&quot;first&quot;).get(0), pattern.get(&quot;middle&quot;).get(0), pattern.get(&quot;last&quot;).get(0));\n                return &quot;Stroke Risk Alert: Patient ID - &quot; + userId + &quot;, Risk Level - &quot; + risk;\n            }\n        });\n\n        strokeRiskAlerts.print();\n\n        env.execute(&quot;Stroke Risk Alert Job&quot;);\n    }\n\n    private static int getValue(String value) {\n        // Parse the input value and extract the relevant data for risk calculation\n        String[] parts = value.split(&quot;,&quot;);\n        String type = parts[2].trim();\n        double measurementValue = Double.parseDouble(parts[3].trim());\n\n        // Implement your logic to check high stroke risk for different measurements\n        if (type.equals(&quot;HR&quot;)) {\n            // HeartMeasurement risk calculation logic\n            int risk = 0;\n            risk += measurementValue &lt;= 50 ? 1 : 0;\n            risk += measurementValue &lt;= 40 ? 1 : 0;\n            risk += measurementValue &gt;= 91 ? 1 : 0;\n            risk += measurementValue &gt;= 110 ? 1 : 0;\n            risk += measurementValue &gt;= 131 ? 1 : 0;\n            return risk;\n        } else if (type.equals(&quot;SBP&quot;)) {\n            // BloodPressureMeasurement risk calculation logic\n            int risk = 0;\n            risk += measurementValue &lt;= 110 ? 1 : 0;\n            risk += measurementValue &lt;= 100 ? 1 : 0;\n            risk += measurementValue &lt;= 90 ? 1 : 0;\n            risk += measurementValue &gt;= 220 ? 3 : 0;\n            return risk;\n        } else if (type.equals(&quot;TEMP&quot;)) {\n            // TempMeasurement risk calculation logic\n            int risk = 0;\n            risk += measurementValue &lt;= 36 ? 1 : 0;\n            risk += measurementValue &lt;= 35 ? 2 : 0;\n            risk += measurementValue &gt;= 38.1 ? 1 : 0;\n            risk += measurementValue &gt;= 39.1 ? 1 : 0;\n            return risk;\n        }\n        // Default risk calculation\n        return 0;\n    }\n\n    private static int getTotalRisk(String firstValue, String middleValue, String lastValue) {\n        // Calculate the total risk based on the values of the first, middle, and last measurements\n        int firstRisk = getValue(firstValue);\n        int middleRisk = getValue(middleValue);\n        int lastRisk = getValue(lastValue);\n        return firstRisk + middleRisk + lastRisk;\n    }\n}\n</code></pre>\n<p>Project code: <a href=\"https://github.com/IshaanAdarsh/icu-alarm/tree/main\" rel=\"nofollow noreferrer\">https://github.com/IshaanAdarsh/icu-alarm/tree/main</a></p>\n<p>I have verified my code, and I believe the logic for generating alerts is correct. Additionally, I have set up the Kafka source properly.</p>\n<p>What could be the reason behind this issue, and how can I troubleshoot it to ensure that the expected alerts are printed to the console?</p>\n"},{"tags":["java","versioning","appdata"],"comments":[{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1588692712,"post_id":61616736,"comment_id":108993519,"body_markdown":"Java 1.1? As in &quot;The Java version released 23 years ago&quot;? Unless that project is purely for software archaeological reasons, run away from it quickly. This can **not** be a healthy work environment, if that is still a requirement. And if circumstances force you into continuing this work, chances are you&#39;re *way* better off working in a VM with a 32 bit version of Windows installed. And last but not least: given how rare Java 1.1 (rightfully) is these days, there&#39;s a good chance that your colleagues on that project know more than average internet people about  it.","body":"Java 1.1? As in &quot;The Java version released 23 years ago&quot;? Unless that project is purely for software archaeological reasons, run away from it quickly. This can <b>not</b> be a healthy work environment, if that is still a requirement. And if circumstances force you into continuing this work, chances are you&#39;re <i>way</i> better off working in a VM with a 32 bit version of Windows installed. And last but not least: given how rare Java 1.1 (rightfully) is these days, there&#39;s a good chance that your colleagues on that project know more than average internet people about  it."},{"owner":{"account_id":14826909,"reputation":135,"user_id":10707595,"display_name":"Indra Neel"},"score":1,"creation_date":1588692998,"post_id":61616736,"comment_id":108993682,"body_markdown":"Thanks for the reponse. Actually the main issue is i have a simulation environment (in java) where there are some .class files generating some random numbers.. when i try to run it on my 64 bit pc with jdk 1.8.0 it is giving results unsimilar to the mentioned results by the author of simulator.. the simulator was designed in 2009 . So i was just trying to run simulator on all jde versions so that i can stop at a version where i can get accurate results as mentioned by author","body":"Thanks for the reponse. Actually the main issue is i have a simulation environment (in java) where there are some .class files generating some random numbers.. when i try to run it on my 64 bit pc with jdk 1.8.0 it is giving results unsimilar to the mentioned results by the author of simulator.. the simulator was designed in 2009 . So i was just trying to run simulator on all jde versions so that i can stop at a version where i can get accurate results as mentioned by author"},{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1588693171,"post_id":61616736,"comment_id":108993777,"body_markdown":"Then the Virtual Machine Approach seems even more feasible, I&#39;m pretty sure that&#39;s easier then getting that ancient piece of software to run on a modern OS. Maybe skip 1.1 and check if 1.2 or 1.3 run it as expected.","body":"Then the Virtual Machine Approach seems even more feasible, I&#39;m pretty sure that&#39;s easier then getting that ancient piece of software to run on a modern OS. Maybe skip 1.1 and check if 1.2 or 1.3 run it as expected."},{"owner":{"account_id":3421244,"reputation":35863,"user_id":2868801,"display_name":"dave_thompson_085"},"score":0,"creation_date":1606924853,"post_id":61616736,"comment_id":115111812,"body_markdown":"In 2009 Java 6 was current and IIRC everything below 5 obsolete. And for at least the last free update of 6 (6u45 in 2013) both 32bit and 64bit install okay on Win64. because my oldest Windows test machine (still) has them.","body":"In 2009 Java 6 was current and IIRC everything below 5 obsolete. And for at least the last free update of 6 (6u45 in 2013) both 32bit and 64bit install okay on Win64. because my oldest Windows test machine (still) has them."}],"answers":[{"tags":[],"owner":{"account_id":125861,"reputation":2074,"user_id":321935,"accept_rate":86,"display_name":"SilverbackNet"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1606919387,"creation_date":1606919387,"answer_id":65110078,"question_id":61616736,"body_markdown":"FWIW, this isn&#39;t due to AppData not being there; if it wasn&#39;t, your system would break in all kinds of weird ways. It&#39;s hidden and system, because messing with it can break it, but it&#39;s still there; you can change Explorer&#39;s settings if you really want to see it.\r\n\r\nThis error is because 16-bit software can&#39;t run on 64-bit Windows, and out of sheer inertia, the use of 16-bit installers continued all the way into the early 2000s. Windows x64 has workarounds for a few common ones, like Installshield and NSIS, but anything other than that will instantly fail.\r\n\r\nThere&#39;s really nothing you can or ideally should do other than installing it on a VM of an older system that it was meant to run on.","title":"How to install java 1.1 on 64-bit Windows with no folder called AppData?","body":"<p>FWIW, this isn't due to AppData not being there; if it wasn't, your system would break in all kinds of weird ways. It's hidden and system, because messing with it can break it, but it's still there; you can change Explorer's settings if you really want to see it.</p>\n<p>This error is because 16-bit software can't run on 64-bit Windows, and out of sheer inertia, the use of 16-bit installers continued all the way into the early 2000s. Windows x64 has workarounds for a few common ones, like Installshield and NSIS, but anything other than that will instantly fail.</p>\n<p>There's really nothing you can or ideally should do other than installing it on a VM of an older system that it was meant to run on.</p>\n"},{"tags":[],"owner":{"account_id":2182945,"reputation":1298,"user_id":1932017,"display_name":"YujiSoftware"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695179754,"creation_date":1695179754,"answer_id":77139083,"question_id":61616736,"body_markdown":"`APPDATA` is hidden directory.  \r\nIn Windows Explorer, enable the ”Hidden items&quot; checkbox under &quot;Show/Hide&quot; under the ”View” menu item.  \r\n\r\nAlternatively, you can display it using the following method. \r\n\r\n1. Press `Win + R` (opens the Run dialog).\r\n2. Type `%appdata%` \r\n3. Press OK button.\r\n\r\n\r\n[Windows AppData folder: Show and manage application data - IONOS](https://www.ionos.com/digitalguide/server/configuration/show-windows-appdata-folder/)","title":"How to install java 1.1 on 64-bit Windows with no folder called AppData?","body":"<p><code>APPDATA</code> is hidden directory.<br />\nIn Windows Explorer, enable the ”Hidden items&quot; checkbox under &quot;Show/Hide&quot; under the ”View” menu item.</p>\n<p>Alternatively, you can display it using the following method.</p>\n<ol>\n<li>Press <code>Win + R</code> (opens the Run dialog).</li>\n<li>Type <code>%appdata%</code></li>\n<li>Press OK button.</li>\n</ol>\n<p><a href=\"https://www.ionos.com/digitalguide/server/configuration/show-windows-appdata-folder/\" rel=\"nofollow noreferrer\">Windows AppData folder: Show and manage application data - IONOS</a></p>\n"}],"owner":{"account_id":14826909,"reputation":135,"user_id":10707595,"display_name":"Indra Neel"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":348,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1695179754,"creation_date":1588692286,"question_id":61616736,"body_markdown":"Recently i have been working with a project that requires Java 1.1 version. But whenever i try to run the \r\njdk-1_1_8_006-win.exe file , I have been receiving a message as shown below. \r\n\r\nImage showing error:\r\n\r\n ![Image showing error ][1]\r\n\r\nAfter clicking ok on that:\r\n\r\n ![After clicking ok on that ][2]\r\n\r\nI have seen one answer in stack overflow like\r\n\r\n&gt; Get the Java installer files.\r\n&gt; \r\n&gt; Execute jdk-1_1_8_010-windows-i586.exe When the error dialog is\r\n&gt; displayed, open C:\\USERS\\(User Name)\\APPDATA\\LOCAL\\TEMP\\~EXB0000 (Do\r\n&gt; not click the OK button at this time) Copy all files to another folder\r\n&gt; Click the ok button Download the tool and execute it.\r\n&gt; \r\n&gt; Download Is3Engine.zip (ReactOS&#39;s InstallSheild Engine 3.0) Extract\r\n&gt; Is3Engine.zip (containssetup.exe) Move setup32.exe to the copied Java\r\n&gt; installers Execute setup32.exe\r\n\r\nBut the issue here is I am unable to find an Folder called APPDATA in my PC.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/3bEst.png\r\n  [2]: https://i.stack.imgur.com/xvwKF.png","title":"How to install java 1.1 on 64-bit Windows with no folder called AppData?","body":"<p>Recently i have been working with a project that requires Java 1.1 version. But whenever i try to run the \njdk-1_1_8_006-win.exe file , I have been receiving a message as shown below. </p>\n\n<p>Image showing error:</p>\n\n<p><img src=\"https://i.stack.imgur.com/3bEst.png\" alt=\"Image showing error \"></p>\n\n<p>After clicking ok on that:</p>\n\n<p><img src=\"https://i.stack.imgur.com/xvwKF.png\" alt=\"After clicking ok on that \"></p>\n\n<p>I have seen one answer in stack overflow like</p>\n\n<blockquote>\n  <p>Get the Java installer files.</p>\n  \n  <p>Execute jdk-1_1_8_010-windows-i586.exe When the error dialog is\n  displayed, open C:\\USERS(User Name)\\APPDATA\\LOCAL\\TEMP\\~EXB0000 (Do\n  not click the OK button at this time) Copy all files to another folder\n  Click the ok button Download the tool and execute it.</p>\n  \n  <p>Download Is3Engine.zip (ReactOS's InstallSheild Engine 3.0) Extract\n  Is3Engine.zip (containssetup.exe) Move setup32.exe to the copied Java\n  installers Execute setup32.exe</p>\n</blockquote>\n\n<p>But the issue here is I am unable to find an Folder called APPDATA in my PC.</p>\n"},{"tags":["java","mockito","completable-future"],"comments":[{"owner":{"account_id":1150892,"reputation":307,"user_id":1132638,"accept_rate":89,"display_name":"Md Faraz"},"score":0,"creation_date":1648651822,"post_id":53021545,"comment_id":126679691,"body_markdown":"Any solution to this usecase?","body":"Any solution to this usecase?"}],"answers":[{"tags":[],"owner":{"account_id":1529248,"reputation":92157,"user_id":1426891,"display_name":"Jeff Bowman"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1540763432,"creation_date":1540763432,"answer_id":53036404,"question_id":53021545,"body_markdown":"My first inclination is _not to mock this_: It looks like `startAsync` is a part of MyClassImplementRunner&#39;s public API, and that you should be testing these pieces together. In a test class like MyClassImplementRunnerTest, it makes sense to treat the system under test as MyClassImplementRunner without trying to split it up. Otherwise, it&#39;s very easy to lose track of _what you&#39;re testing_, including _what is real_ versus _what is a mock_.\r\n\r\nIf there is any _external_ condition that MyClassImplementRunner is looking for, you can mock that dependency, which would likely cause your CompletableFuture to return immediately; however, you&#39;ve only shown us a single String parameter.\r\n\r\nThat said, it&#39;s possible that `startAsync` contains logic that you&#39;d like to test exhaustively without a real MyClassImplementRunner. In that case, you could create an overload for testing, possibly with limited visibility or [test-only annotations](https://google.github.io/guava/releases/23.0/api/docs/com/google/common/annotations/VisibleForTesting.html) to indicate that it shouldn&#39;t be called in production.\r\n\r\n    public static CompletableFuture&lt;Void&gt; startAsync(String param1) {\r\n      return startAsync(new MyClassImplementRunner(param1);\r\n    }\r\n\r\n    /** Package-private, for a test class in the same package. */\r\n    @VisibleForTesting static CompletableFuture&lt;Void&gt; startAsync(Runnable task) {\r\n\r\n      return CompletableFuture.runAsync(task).whenComplete(\r\n          (response, throwable) -&gt; {\r\n            //some code when complete\r\n        });\r\n    }\r\n\r\nBy splitting this up, you can now run `startAsync(new Runnable())` in tests to simulate an instantly-succeeding task, and run `startAsync(() -&gt; { throw new RuntimeException(); })` to simulate an instantly-failing task. This allows you to test `startAsync` independently from MyClassImplementRunner.\r\n\r\nIt may not seem wise to refactor for testing or to introduce test-only methods, and this is a fair assessment: Purely speaking, MyClassImplementRunner _should_ be tested exactly as consumers would run it, without mocking. However, if you&#39;re saying it is much more convenient in tests to run with a different Runnable than MyClassImplementRunner, you are in control of the code and you can prepare for this by including the appropriate flexiblity (&quot;testing seam&quot;) in the code you control. In fact, if `startAsync` is a separate-enough method that it can take an arbitrary Runnable, you may choose to separate it out to be a separate method with separate testing.","title":"How to mock completion of a CompletableFuture in Mockito","body":"<p>My first inclination is <em>not to mock this</em>: It looks like <code>startAsync</code> is a part of MyClassImplementRunner's public API, and that you should be testing these pieces together. In a test class like MyClassImplementRunnerTest, it makes sense to treat the system under test as MyClassImplementRunner without trying to split it up. Otherwise, it's very easy to lose track of <em>what you're testing</em>, including <em>what is real</em> versus <em>what is a mock</em>.</p>\n\n<p>If there is any <em>external</em> condition that MyClassImplementRunner is looking for, you can mock that dependency, which would likely cause your CompletableFuture to return immediately; however, you've only shown us a single String parameter.</p>\n\n<p>That said, it's possible that <code>startAsync</code> contains logic that you'd like to test exhaustively without a real MyClassImplementRunner. In that case, you could create an overload for testing, possibly with limited visibility or <a href=\"https://google.github.io/guava/releases/23.0/api/docs/com/google/common/annotations/VisibleForTesting.html\" rel=\"nofollow noreferrer\">test-only annotations</a> to indicate that it shouldn't be called in production.</p>\n\n<pre><code>public static CompletableFuture&lt;Void&gt; startAsync(String param1) {\n  return startAsync(new MyClassImplementRunner(param1);\n}\n\n/** Package-private, for a test class in the same package. */\n@VisibleForTesting static CompletableFuture&lt;Void&gt; startAsync(Runnable task) {\n\n  return CompletableFuture.runAsync(task).whenComplete(\n      (response, throwable) -&gt; {\n        //some code when complete\n    });\n}\n</code></pre>\n\n<p>By splitting this up, you can now run <code>startAsync(new Runnable())</code> in tests to simulate an instantly-succeeding task, and run <code>startAsync(() -&gt; { throw new RuntimeException(); })</code> to simulate an instantly-failing task. This allows you to test <code>startAsync</code> independently from MyClassImplementRunner.</p>\n\n<p>It may not seem wise to refactor for testing or to introduce test-only methods, and this is a fair assessment: Purely speaking, MyClassImplementRunner <em>should</em> be tested exactly as consumers would run it, without mocking. However, if you're saying it is much more convenient in tests to run with a different Runnable than MyClassImplementRunner, you are in control of the code and you can prepare for this by including the appropriate flexiblity (\"testing seam\") in the code you control. In fact, if <code>startAsync</code> is a separate-enough method that it can take an arbitrary Runnable, you may choose to separate it out to be a separate method with separate testing.</p>\n"},{"tags":[],"owner":{"account_id":5452973,"reputation":4172,"user_id":4337243,"accept_rate":89,"display_name":"Ilya Zinkovich"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1540986995,"creation_date":1540986995,"answer_id":53082798,"question_id":53021545,"body_markdown":"Extract the code you execute in `whenComplete` to a field and provide a constructor to replace it.\r\n\r\n    class Runner implement Runnable {\r\n      \r\n      private final String param;\r\n      private final BiConsumer&lt;Void, Throwable&gt; callback;\r\n      \r\n      public Runner(String param) {\r\n        this.param = param;\r\n        this.callback = this::callbackFunction;\r\n      }\r\n\r\n      Runner(String param, BiConsumer&lt;Void, Throwable&gt; callback) {\r\n        this.param = param;\r\n        this.callback = callback;\r\n      }\r\n\r\n      public void run() {\r\n        CompletableFuture.runAsync(task).whenComplete(callback);\r\n      }\r\n\r\n      private void callbackFunction(Void result, Throwable throwable) {\r\n        //some code when complete\r\n      }\r\n    }\r\n\r\nThe test will look as follows:\r\n\r\n    class RunnerTest {\r\n      \r\n      @Test\r\n      void test() {\r\n        new Runner(&quot;param&quot;, (response, throwable) -&gt; /* mocked behavior */).run();\r\n      }\r\n    }","title":"How to mock completion of a CompletableFuture in Mockito","body":"<p>Extract the code you execute in <code>whenComplete</code> to a field and provide a constructor to replace it.</p>\n\n<pre><code>class Runner implement Runnable {\n\n  private final String param;\n  private final BiConsumer&lt;Void, Throwable&gt; callback;\n\n  public Runner(String param) {\n    this.param = param;\n    this.callback = this::callbackFunction;\n  }\n\n  Runner(String param, BiConsumer&lt;Void, Throwable&gt; callback) {\n    this.param = param;\n    this.callback = callback;\n  }\n\n  public void run() {\n    CompletableFuture.runAsync(task).whenComplete(callback);\n  }\n\n  private void callbackFunction(Void result, Throwable throwable) {\n    //some code when complete\n  }\n}\n</code></pre>\n\n<p>The test will look as follows:</p>\n\n<pre><code>class RunnerTest {\n\n  @Test\n  void test() {\n    new Runner(\"param\", (response, throwable) -&gt; /* mocked behavior */).run();\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":9893853,"reputation":139,"user_id":7326039,"display_name":"newUser"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17567,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"answer_count":2,"score":7,"last_activity_date":1695179336,"creation_date":1540640487,"question_id":53021545,"body_markdown":"I want to mock that some code is being called when a `CompletableFuture` has completed successfully.\r\n\r\nI have this class:\r\n\r\n    public class MyClassImplementRunner implements Runnable {\r\n    \r\n        private final String param1;\r\n    \r\n        public MyClassImplementRunner(String param1) {\r\n            this.param1 = param1;\r\n        }\r\n    \r\n        public static CompletableFuture&lt;Void&gt; startAsync(String param1) {\r\n    \r\n            return CompletableFuture.runAsync(\r\n                new MyClassImplementRunner(param1)).whenComplete(\r\n                (response, throwable) -&gt; {\r\n                    //some code when complete\r\n                });\r\n    \r\n            @Override\r\n            public void run () {\r\n                //the runnable code\r\n            }\r\n        }\r\n    }\r\n\r\nIn my Junit (using Mockito and Java 8), I need to mock that&lt;br&gt;\r\n\r\n    //some code when complete \r\nis called when Future is completed successfully.\r\n\r\nCould you provide some indications on how to achieve this?","title":"How to mock completion of a CompletableFuture in Mockito","body":"<p>I want to mock that some code is being called when a <code>CompletableFuture</code> has completed successfully.</p>\n\n<p>I have this class:</p>\n\n<pre><code>public class MyClassImplementRunner implements Runnable {\n\n    private final String param1;\n\n    public MyClassImplementRunner(String param1) {\n        this.param1 = param1;\n    }\n\n    public static CompletableFuture&lt;Void&gt; startAsync(String param1) {\n\n        return CompletableFuture.runAsync(\n            new MyClassImplementRunner(param1)).whenComplete(\n            (response, throwable) -&gt; {\n                //some code when complete\n            });\n\n        @Override\n        public void run () {\n            //the runnable code\n        }\n    }\n}\n</code></pre>\n\n<p>In my Junit (using Mockito and Java 8), I need to mock that<br></p>\n\n<pre><code>//some code when complete \n</code></pre>\n\n<p>is called when Future is completed successfully.</p>\n\n<p>Could you provide some indications on how to achieve this?</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9819,"page":173,"page_size":100}
