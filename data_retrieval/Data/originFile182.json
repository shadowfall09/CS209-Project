{"items":[{"tags":["java","selenium-webdriver","selenium-chromedriver","selenium4","cdp"],"answers":[{"comments":[{"owner":{"account_id":1416016,"reputation":158,"user_id":7101236,"display_name":"kakemonsteret"},"score":0,"creation_date":1691758378,"post_id":76836919,"comment_id":135538772,"body_markdown":"Thanks. I expected something like that. Is there a way to download the jar for the latest version of selenium-tools? My maven repo is completely useless. Until recently, it didn&#39;t show anything newer than 4.3. Now it doesn&#39;t show anything newer than 2.x. Maven is the absolute worst, btw. Completely useless.","body":"Thanks. I expected something like that. Is there a way to download the jar for the latest version of selenium-tools? My maven repo is completely useless. Until recently, it didn&#39;t show anything newer than 4.3. Now it doesn&#39;t show anything newer than 2.x. Maven is the absolute worst, btw. Completely useless."}],"tags":[],"owner":{"account_id":15994883,"reputation":3427,"user_id":11543023,"display_name":"djmonki"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691207841,"creation_date":1691159900,"answer_id":76836919,"question_id":76834348,"body_markdown":"According to the [4.3.0 CHANGELOG][1], this version supports Chrome DevTools Protocol (CDP) versions 85, 101, 102, and 103. However, you are currently using CDP version 109 with your ChromeDriver.\r\n\r\nThis version discrepancy in the error message is due to the Selenium version not supporting the CDP version included in your ChromeDriver. You need to ensure your versions of Selenium and ChromeDriver (and its underlying CDP version) are compatible.\r\n\r\nYou should keep an eye on the [CHANGELOG][2] to verify the compatibility of future Selenium and CDP versions. As you are using Maven, this should help you manage and align the versions of your dependencies more effectively.\r\n\r\nIn order to resolve this issue, you would need to use [Selenium 4.8.x variant][3], as these versions are confirmed to support CDP version 109, according to the Selenium CHANGELOG.\r\n\r\n  [1]: https://github.com/SeleniumHQ/selenium/blob/d43b1edd3e2eb31b073a002e9afbafe47d6ff14d/java/CHANGELOG#L301\r\n  [2]: https://github.com/SeleniumHQ/selenium/blob/trunk/java/CHANGELOG\r\n  [3]: https://github.com/SeleniumHQ/selenium/blob/d43b1edd3e2eb31b073a002e9afbafe47d6ff14d/java/CHANGELOG#L138","title":"Selenium 4&#39;s NetworkInterceptor and ChromeDriver 109: DevToolsException Issue","body":"<p>According to the <a href=\"https://github.com/SeleniumHQ/selenium/blob/d43b1edd3e2eb31b073a002e9afbafe47d6ff14d/java/CHANGELOG#L301\" rel=\"nofollow noreferrer\">4.3.0 CHANGELOG</a>, this version supports Chrome DevTools Protocol (CDP) versions 85, 101, 102, and 103. However, you are currently using CDP version 109 with your ChromeDriver.</p>\n<p>This version discrepancy in the error message is due to the Selenium version not supporting the CDP version included in your ChromeDriver. You need to ensure your versions of Selenium and ChromeDriver (and its underlying CDP version) are compatible.</p>\n<p>You should keep an eye on the <a href=\"https://github.com/SeleniumHQ/selenium/blob/trunk/java/CHANGELOG\" rel=\"nofollow noreferrer\">CHANGELOG</a> to verify the compatibility of future Selenium and CDP versions. As you are using Maven, this should help you manage and align the versions of your dependencies more effectively.</p>\n<p>In order to resolve this issue, you would need to use <a href=\"https://github.com/SeleniumHQ/selenium/blob/d43b1edd3e2eb31b073a002e9afbafe47d6ff14d/java/CHANGELOG#L138\" rel=\"nofollow noreferrer\">Selenium 4.8.x variant</a>, as these versions are confirmed to support CDP version 109, according to the Selenium CHANGELOG.</p>\n"}],"owner":{"account_id":1416016,"reputation":158,"user_id":7101236,"display_name":"kakemonsteret"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":156,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1694848562,"creation_date":1691138905,"question_id":76834348,"body_markdown":"I&#39;m trying to use some example code at the beginning of exploring intercepting network requests in Selenium 4. \r\n\r\nSelenium version: 4.3.0\r\nChromeDriver version: 109.0.5414.74\r\n\r\nCode sample:\r\n\r\n    ChromeDriver driver = new ChromeDriver();\r\n\r\n    NetworkInterceptor interceptor = new NetworkInterceptor(\r\n        driver, Route.matching(req -&gt; true)\r\n            .to(() -&gt; req -&gt; new HttpResponse()\r\n                .setStatus(200)\r\n                .addHeader(&quot;Content-Type&quot;, MediaType.HTML_UTF_8.toString())\r\n                .setContent(utf8String(&quot;Creamy, delicious cheese!&quot;))));\r\n\r\n        driver.get(&quot;https://example-sausages-site.com&quot;);\r\n\r\n        String source = driver.getPageSource();\r\n\r\n        assertThat(source).contains(&quot;delicious cheese!&quot;);\r\n\r\n\r\nThis error occurs when trying to use NetworkInterceptor:\r\n\r\n    org.openqa.selenium.devtools.DevToolsException: You are using a no-op implementation of\r\n    the CDP. The most likely reason for this is that Selenium was unable to find an \r\n    implementation of the CDP protocol that matches your browser. Please be sure to include an \r\n    implementation on the classpath, possibly by adding a new (maven) dependency of \r\n    `org.seleniumhq.selenium:selenium-devtools-vNN:4.3.0` where `NN` matches the major version of \r\n    the browser you&#39;re using.\r\n    Build info: version: &#39;4.3.0&#39;, revision: &#39;a4995e2c09*&#39;\r\n    System info: host: &#39;frank-ulyana-xfce&#39;, ip: &#39;127.0.1.1&#39;, os.name: &#39;Linux&#39;, os.arch: &#39;amd64&#39;, \r\n    os.version: &#39;5.15.0-58-generic&#39;, java.version: &#39;11.0.17&#39;\r\n    Driver info: DevTools Connection \r\n\r\n\r\nI&#39;m thinking this is a version issue? The version of NetworkInterceptor doesn&#39;t support ChromeDriver 109?\r\n\r\nIf so, can I just download version 108 and just instantiate that directly, while waiting for a version that supports 109?\r\n\r\nI&#39;m using Maven, so all versions and dependencies are managed there.","title":"Selenium 4&#39;s NetworkInterceptor and ChromeDriver 109: DevToolsException Issue","body":"<p>I'm trying to use some example code at the beginning of exploring intercepting network requests in Selenium 4.</p>\n<p>Selenium version: 4.3.0\nChromeDriver version: 109.0.5414.74</p>\n<p>Code sample:</p>\n<pre><code>ChromeDriver driver = new ChromeDriver();\n\nNetworkInterceptor interceptor = new NetworkInterceptor(\n    driver, Route.matching(req -&gt; true)\n        .to(() -&gt; req -&gt; new HttpResponse()\n            .setStatus(200)\n            .addHeader(&quot;Content-Type&quot;, MediaType.HTML_UTF_8.toString())\n            .setContent(utf8String(&quot;Creamy, delicious cheese!&quot;))));\n\n    driver.get(&quot;https://example-sausages-site.com&quot;);\n\n    String source = driver.getPageSource();\n\n    assertThat(source).contains(&quot;delicious cheese!&quot;);\n</code></pre>\n<p>This error occurs when trying to use NetworkInterceptor:</p>\n<pre><code>org.openqa.selenium.devtools.DevToolsException: You are using a no-op implementation of\nthe CDP. The most likely reason for this is that Selenium was unable to find an \nimplementation of the CDP protocol that matches your browser. Please be sure to include an \nimplementation on the classpath, possibly by adding a new (maven) dependency of \n`org.seleniumhq.selenium:selenium-devtools-vNN:4.3.0` where `NN` matches the major version of \nthe browser you're using.\nBuild info: version: '4.3.0', revision: 'a4995e2c09*'\nSystem info: host: 'frank-ulyana-xfce', ip: '127.0.1.1', os.name: 'Linux', os.arch: 'amd64', \nos.version: '5.15.0-58-generic', java.version: '11.0.17'\nDriver info: DevTools Connection \n</code></pre>\n<p>I'm thinking this is a version issue? The version of NetworkInterceptor doesn't support ChromeDriver 109?</p>\n<p>If so, can I just download version 108 and just instantiate that directly, while waiting for a version that supports 109?</p>\n<p>I'm using Maven, so all versions and dependencies are managed there.</p>\n"},{"tags":["java","selenium","selenium-ide"],"comments":[{"owner":{"account_id":1682656,"reputation":7274,"user_id":1546574,"display_name":"eugene.polschikov"},"score":0,"creation_date":1380792459,"post_id":19155430,"comment_id":28334557,"body_markdown":"please, provide some code representing your table to provide you proper selectors.","body":"please, provide some code representing your table to provide you proper selectors."},{"owner":{"account_id":544182,"reputation":11238,"user_id":913543,"accept_rate":89,"display_name":"LaurentG"},"score":0,"creation_date":1380792808,"post_id":19155430,"comment_id":28334751,"body_markdown":"please also clarify which language you are using (Java) and if you are using WebDriver or not (Selenium IDE?).","body":"please also clarify which language you are using (Java) and if you are using WebDriver or not (Selenium IDE?)."},{"owner":{"account_id":3298990,"reputation":33,"user_id":2775574,"display_name":"kkr"},"score":0,"creation_date":1380793600,"post_id":19155430,"comment_id":28335185,"body_markdown":"Java and Selenium IDE.","body":"Java and Selenium IDE."}],"answers":[{"comments":[{"owner":{"account_id":1873413,"reputation":28421,"user_id":1695163,"accept_rate":79,"display_name":"ddavison"},"score":0,"creation_date":1380814407,"post_id":19155710,"comment_id":28347867,"body_markdown":"unfortunately this is useless if he is using Selenium IDE.","body":"unfortunately this is useless if he is using Selenium IDE."},{"owner":{"account_id":1873413,"reputation":28421,"user_id":1695163,"accept_rate":79,"display_name":"ddavison"},"score":0,"creation_date":1380814433,"post_id":19155710,"comment_id":28347885,"body_markdown":"also, you could shorten that code to `int size = driver.findElements().size()`","body":"also, you could shorten that code to <code>int size = driver.findElements().size()</code>"}],"tags":[],"owner":{"account_id":1682656,"reputation":7274,"user_id":1546574,"display_name":"eugene.polschikov"},"comment_count":2,"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1380792963,"creation_date":1380792963,"answer_id":19155710,"question_id":19155430,"body_markdown":"I would suggest the following:\r\n\r\n1) make list of elements of your table (e.g if you need to count your row count then select any row using appropriate selector).\r\n\r\n2) then create list of web elements\r\n\r\n    List&lt;WebElement&gt; columnElments = driver.findElements(By.cssSelector(&quot;...blablabla...&quot;));\r\n    int rowNumer = columnElmments.size();\r\n\r\nor either:\r\n\r\n    @FindBy\r\n                (how = How.CSS, using = &quot;blablablba&quot;)\r\n    List&lt;WebElement&gt; col;\r\n    \r\n    int rowNumer =col.size();\r\n\r\nHope you got the idea\r\n","title":"Selenium - How to count the number of rows in a table?","body":"<p>I would suggest the following:</p>\n\n<p>1) make list of elements of your table (e.g if you need to count your row count then select any row using appropriate selector).</p>\n\n<p>2) then create list of web elements</p>\n\n<pre><code>List&lt;WebElement&gt; columnElments = driver.findElements(By.cssSelector(\"...blablabla...\"));\nint rowNumer = columnElmments.size();\n</code></pre>\n\n<p>or either:</p>\n\n<pre><code>@FindBy\n            (how = How.CSS, using = \"blablablba\")\nList&lt;WebElement&gt; col;\n\nint rowNumer =col.size();\n</code></pre>\n\n<p>Hope you got the idea</p>\n"},{"tags":[],"owner":{"account_id":302425,"reputation":1982,"user_id":1103189,"accept_rate":100,"display_name":"Rohit Ware"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1385369964,"creation_date":1385369964,"answer_id":20188354,"question_id":19155430,"body_markdown":"To store Number of rows into table you can use `storeXpathCount`\r\n\r\n    storeXpathCount | id=listBalances | NumberOfRows\r\n    echo  | ${NumberOfRows}\r\n\r\nstoreXpathCount will store rows count into variable NumberOfRows\r\nAnd echo will return count.","title":"Selenium - How to count the number of rows in a table?","body":"<p>To store Number of rows into table you can use <code>storeXpathCount</code></p>\n\n<pre><code>storeXpathCount | id=listBalances | NumberOfRows\necho  | ${NumberOfRows}\n</code></pre>\n\n<p>storeXpathCount will store rows count into variable NumberOfRows\nAnd echo will return count.</p>\n"}],"owner":{"account_id":3298990,"reputation":33,"user_id":2775574,"display_name":"kkr"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8807,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1694847905,"creation_date":1380792155,"question_id":19155430,"body_markdown":"I have a table with &quot;n&quot; number of rows. I need to count them, how to do?\r\n\r\nExample:- My table looks like the below entry.\r\n\r\n    Type\t\tBalance Date received \t    Date returned \tPayment method \tAmount\r\n    General \tDefault 10/01/2013 08:53:20 \t\t        Cash \t        $ 10.00\r\n\r\n    HTML of my table looks like this. &lt;th&gt; is table title row and &lt;td&gt; are the entries done by the user. Everytime the user add the new entry, the count will increase and display a message &quot;3 found for account 6478 &quot;. where 3 is no of rows in the table.   \r\n    &lt;fieldset&gt;\r\n    &lt;table id=&quot;listBalances&quot; class=&quot;listTable&quot; width=&quot;100%&quot;&gt;\r\n    &lt;thead&gt;\r\n    &lt;tr&gt;\r\n    &lt;th&gt;Type&lt;/th&gt;\r\n    &lt;th&gt;Balance&lt;/th&gt;\r\n    &lt;th&gt;Date received&lt;/th&gt;\r\n    &lt;th&gt;Date returned&lt;/th&gt;\r\n    &lt;th&gt;Payment method&lt;/th&gt;\r\n    &lt;th&gt;Amount&lt;/th&gt;\r\n    &lt;/tr&gt;\r\n    &lt;/thead&gt;\r\n    &lt;tbody&gt;\r\n    &lt;tr&gt;\r\n    &lt;tr class=&quot;alt&quot;&gt;\r\n    &lt;td&gt;General Deposit&lt;/td&gt;\r\n    &lt;td&gt;Default for RTB&lt;/td&gt;\r\n    &lt;td&gt;09/30/2013 06:58:41&lt;/td&gt;\r\n    &lt;td/&gt;\r\n    &lt;td&gt;Cash&lt;/td&gt;\r\n    &lt;td&gt;$ 5.00&lt;/td&gt;\r\n       \r\n\r\n             ","title":"Selenium - How to count the number of rows in a table?","body":"<p>I have a table with \"n\" number of rows. I need to count them, how to do?</p>\n\n<p>Example:- My table looks like the below entry.</p>\n\n<pre><code>Type        Balance Date received       Date returned   Payment method  Amount\nGeneral     Default 10/01/2013 08:53:20                 Cash            $ 10.00\n\nHTML of my table looks like this. &lt;th&gt; is table title row and &lt;td&gt; are the entries done by the user. Everytime the user add the new entry, the count will increase and display a message \"3 found for account 6478 \". where 3 is no of rows in the table.   \n&lt;fieldset&gt;\n&lt;table id=\"listBalances\" class=\"listTable\" width=\"100%\"&gt;\n&lt;thead&gt;\n&lt;tr&gt;\n&lt;th&gt;Type&lt;/th&gt;\n&lt;th&gt;Balance&lt;/th&gt;\n&lt;th&gt;Date received&lt;/th&gt;\n&lt;th&gt;Date returned&lt;/th&gt;\n&lt;th&gt;Payment method&lt;/th&gt;\n&lt;th&gt;Amount&lt;/th&gt;\n&lt;/tr&gt;\n&lt;/thead&gt;\n&lt;tbody&gt;\n&lt;tr&gt;\n&lt;tr class=\"alt\"&gt;\n&lt;td&gt;General Deposit&lt;/td&gt;\n&lt;td&gt;Default for RTB&lt;/td&gt;\n&lt;td&gt;09/30/2013 06:58:41&lt;/td&gt;\n&lt;td/&gt;\n&lt;td&gt;Cash&lt;/td&gt;\n&lt;td&gt;$ 5.00&lt;/td&gt;\n</code></pre>\n"},{"tags":["java","log4j","file-permissions","rollingfileappender"],"comments":[{"owner":{"account_id":930090,"reputation":4490,"user_id":960115,"accept_rate":92,"display_name":"Jeff G"},"score":1,"creation_date":1486674334,"post_id":7893511,"comment_id":71460022,"body_markdown":"I realize this is a very old question, but there is a [Jira issue](https://issues.apache.org/jira/browse/LOG4J2-1699) scheduled to be fixed in 2.8.1 that would enable setting these permissions explicitly.","body":"I realize this is a very old question, but there is a <a href=\"https://issues.apache.org/jira/browse/LOG4J2-1699\" rel=\"nofollow noreferrer\">Jira issue</a> scheduled to be fixed in 2.8.1 that would enable setting these permissions explicitly."},{"owner":{"account_id":239945,"reputation":555,"user_id":509882,"accept_rate":23,"display_name":"Arthur"},"score":0,"creation_date":1657228842,"post_id":7893511,"comment_id":128768093,"body_markdown":"Numerical permissions are more clearly expressed as positional r w x characters, as suggested by your parenthetical notes. The &quot;symbolic mode&quot; of chmod supports these too.","body":"Numerical permissions are more clearly expressed as positional r w x characters, as suggested by your parenthetical notes. The &quot;symbolic mode&quot; of chmod supports these too."}],"answers":[{"comments":[{"owner":{"account_id":455865,"reputation":388,"user_id":854296,"display_name":"Ken Waln"},"score":1,"creation_date":1319571765,"post_id":7893621,"comment_id":9637345,"body_markdown":"Thanks -- I completely forgot about the umask.  Turns out, now that I know what to google for, that jsvc hard codes the umask so I may have to live with it (or recomplie jsvc) -- https://issues.apache.org/jira/browse/DAEMON-178.","body":"Thanks -- I completely forgot about the umask.  Turns out, now that I know what to google for, that jsvc hard codes the umask so I may have to live with it (or recomplie jsvc) -- <a href=\"https://issues.apache.org/jira/browse/DAEMON-178\" rel=\"nofollow noreferrer\">issues.apache.org/jira/browse/DAEMON-178</a>."},{"owner":{"account_id":930090,"reputation":4490,"user_id":960115,"accept_rate":92,"display_name":"Jeff G"},"score":2,"creation_date":1512426679,"post_id":7893621,"comment_id":82244780,"body_markdown":"This answer is no longer accurate.  Log4j 2.9.0 added a way to configure this without changing the umask setting.","body":"This answer is no longer accurate.  Log4j 2.9.0 added a way to configure this without changing the umask setting."}],"tags":[],"owner":{"account_id":115344,"reputation":76329,"user_id":302916,"display_name":"Brian Roach"},"comment_count":2,"down_vote_count":0,"up_vote_count":22,"is_accepted":true,"score":22,"last_activity_date":1319565220,"creation_date":1319565220,"answer_id":7893621,"question_id":7893511,"body_markdown":"File permissions are determined by the user&#39;s umask - there&#39;s not a way to change it in log4j itself.\r\n\r\nYou probably want to set the user&#39;s umask to `0117`\r\n\r\n    $ umask -S 0117\r\n    u=rw,g=rw,o=\r\n","title":"Permissions on log files created by log4j RollingFileAppender","body":"<p>File permissions are determined by the user's umask - there's not a way to change it in log4j itself.</p>\n\n<p>You probably want to set the user's umask to <code>0117</code></p>\n\n<pre><code>$ umask -S 0117\nu=rw,g=rw,o=\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2191415,"reputation":159,"user_id":1938347,"display_name":"Pichitron"},"comment_count":0,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1486559232,"creation_date":1486559232,"answer_id":42114019,"question_id":7893511,"body_markdown":"inside log4j.properties include this: `log4j.appender.file.File=${user.home}/log`\r\nanyway, this is my configuration that show info in console and file &quot;log&quot;.\r\n\r\n    # Root logger option\r\n    log4j.rootLogger=DEBUG, stdout, file\r\n    \r\n    # Redirect log messages to console\r\n    log4j.appender.stdout=org.apache.log4j.ConsoleAppender\r\n    log4j.appender.stdout.Target=System.out\r\n    log4j.appender.stdout.layout=org.apache.log4j.PatternLayout\r\n    log4j.appender.stdout.layout.ConversionPattern=%d{yyyy-MM-dd HH:mm:ss} %-5p %c{1}:%L - %m%n\r\n    \r\n    # Redirect log messages to a log file, support file rolling.\r\n    log4j.appender.file=org.apache.log4j.RollingFileAppender\r\n    log4j.appender.file.File=${user.home}/test\r\n    log4j.appender.file.MaxFileSize=5MB\r\n    log4j.appender.file.MaxBackupIndex=10\r\n    log4j.appender.file.layout=org.apache.log4j.PatternLayout\r\n    log4j.appender.file.layout.ConversionPattern=%d{yyyy-MM-dd HH:mm:ss} %-5p %c{1}:%L - %m%n","title":"Permissions on log files created by log4j RollingFileAppender","body":"<p>inside log4j.properties include this: <code>log4j.appender.file.File=${user.home}/log</code>\nanyway, this is my configuration that show info in console and file \"log\".</p>\n\n<pre><code># Root logger option\nlog4j.rootLogger=DEBUG, stdout, file\n\n# Redirect log messages to console\nlog4j.appender.stdout=org.apache.log4j.ConsoleAppender\nlog4j.appender.stdout.Target=System.out\nlog4j.appender.stdout.layout=org.apache.log4j.PatternLayout\nlog4j.appender.stdout.layout.ConversionPattern=%d{yyyy-MM-dd HH:mm:ss} %-5p %c{1}:%L - %m%n\n\n# Redirect log messages to a log file, support file rolling.\nlog4j.appender.file=org.apache.log4j.RollingFileAppender\nlog4j.appender.file.File=${user.home}/test\nlog4j.appender.file.MaxFileSize=5MB\nlog4j.appender.file.MaxBackupIndex=10\nlog4j.appender.file.layout=org.apache.log4j.PatternLayout\nlog4j.appender.file.layout.ConversionPattern=%d{yyyy-MM-dd HH:mm:ss} %-5p %c{1}:%L - %m%n\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1755277,"reputation":340,"user_id":1603489,"display_name":"NaanProphet"},"score":1,"creation_date":1539270981,"post_id":43353497,"comment_id":92450129,"body_markdown":"This is really helpful when locked into LOG4j v1.","body":"This is really helpful when locked into LOG4j v1."}],"tags":[],"owner":{"account_id":1148764,"reputation":16208,"user_id":1130930,"display_name":"Russell Zahniser"},"comment_count":1,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1491934882,"creation_date":1491934882,"answer_id":43353497,"question_id":7893511,"body_markdown":"I realize this is an old question, but since it was the first hit still when I searched for this problem...\r\n\r\nYou can simply subclass `RollingFileAppender` and set the permission on the file when it is first opened, like this:\r\n\r\n    public class WorldWritableFileAppender extends RollingFileAppender {\r\n    \t@Override\r\n    \tpublic synchronized void setFile(String fileName, boolean append,\r\n    \t\t\tboolean bufferedIO, int bufferSize) throws IOException {\r\n    \t\tsuper.setFile(fileName, append, bufferedIO, bufferSize);\r\n    \t\tFile f = new File(fileName);\r\n    \t\tif(f.exists()) {\r\n    \t\t\tjava.nio.file.Files.setPosixFilePermissions(f.toPath(), \r\n    \t\t\t\t\tEnumSet.allOf(PosixFilePermission.class));\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\nThen just reference `WorldWritableFileAppender` instead of `RollingFileAppender` in your `log4j.xml`.\r\n\r\n    &lt;appender name=&quot;name&quot; class=&quot;path.to.WorldWritableFileAppender&quot;&gt;\r\n\r\nThis works because `setFile()` is called both when originally setting up the logger, and when creating a new file after rollover. The old file is moved aside with `File.renameTo()`, which preserves the permissions.","title":"Permissions on log files created by log4j RollingFileAppender","body":"<p>I realize this is an old question, but since it was the first hit still when I searched for this problem...</p>\n\n<p>You can simply subclass <code>RollingFileAppender</code> and set the permission on the file when it is first opened, like this:</p>\n\n<pre><code>public class WorldWritableFileAppender extends RollingFileAppender {\n    @Override\n    public synchronized void setFile(String fileName, boolean append,\n            boolean bufferedIO, int bufferSize) throws IOException {\n        super.setFile(fileName, append, bufferedIO, bufferSize);\n        File f = new File(fileName);\n        if(f.exists()) {\n            java.nio.file.Files.setPosixFilePermissions(f.toPath(), \n                    EnumSet.allOf(PosixFilePermission.class));\n        }\n    }\n}\n</code></pre>\n\n<p>Then just reference <code>WorldWritableFileAppender</code> instead of <code>RollingFileAppender</code> in your <code>log4j.xml</code>.</p>\n\n<pre><code>&lt;appender name=\"name\" class=\"path.to.WorldWritableFileAppender\"&gt;\n</code></pre>\n\n<p>This works because <code>setFile()</code> is called both when originally setting up the logger, and when creating a new file after rollover. The old file is moved aside with <code>File.renameTo()</code>, which preserves the permissions.</p>\n"},{"comments":[{"owner":{"account_id":1778418,"reputation":51,"user_id":1621704,"display_name":"PSS"},"score":0,"creation_date":1643895955,"post_id":44668614,"comment_id":125464320,"body_markdown":"How this can be doen for logback?","body":"How this can be doen for logback?"}],"tags":[],"owner":{"account_id":1785654,"reputation":747,"user_id":1627174,"display_name":"Pierrick HYMBERT"},"comment_count":1,"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1498647490,"creation_date":1498027459,"answer_id":44668614,"question_id":7893511,"body_markdown":"Log4J-core-2.9 will provide this [feature][1] *fileOwner*, *fileGroup* and *filePermissions* for posix OS in *FileAppender*, *RollingFileAppender* and *RollingRandomAccessFileManager*:\r\n\r\n    &lt;RollingFile name=&quot;RollingFile&quot;\r\n                 fileName=&quot;mylogs.log&quot;\r\n                 filePattern=&quot;mylogs-$${date:MM-dd-yyyy}-%i.log.7z&quot;\r\n                 fileOwner=&quot;log4j&quot;\r\n                 fileGroup=&quot;log4grp&quot;\r\n                 filePermissions=&quot;rw-r-----&quot;&gt;\r\n\r\n\r\n[1]: https://issues.apache.org/jira/browse/LOG4J2-1699","title":"Permissions on log files created by log4j RollingFileAppender","body":"<p>Log4J-core-2.9 will provide this <a href=\"https://issues.apache.org/jira/browse/LOG4J2-1699\" rel=\"noreferrer\">feature</a> <em>fileOwner</em>, <em>fileGroup</em> and <em>filePermissions</em> for posix OS in <em>FileAppender</em>, <em>RollingFileAppender</em> and <em>RollingRandomAccessFileManager</em>:</p>\n\n<pre><code>&lt;RollingFile name=\"RollingFile\"\n             fileName=\"mylogs.log\"\n             filePattern=\"mylogs-$${date:MM-dd-yyyy}-%i.log.7z\"\n             fileOwner=\"log4j\"\n             fileGroup=\"log4grp\"\n             filePermissions=\"rw-r-----\"&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3111257,"reputation":97,"user_id":2632932,"display_name":"Varun"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694846684,"creation_date":1694846684,"answer_id":77116655,"question_id":7893511,"body_markdown":"Add this to your pom file:\r\n\r\n    &lt;plugin&gt;                \r\n      &lt;groupId&gt;\r\n         org.springframework.boot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-boot-maven- plugin&lt;/artifactId&gt;\r\n     &lt;configuration&gt;\r\n       &lt;jvmArguments&gt;\r\n         -DUMASK=&quot;0022&quot;\r\n         -Dorg.apache.catalina.security.SecurityListener.UMASK=&quot;0022&quot;\r\n       &lt;/jvmArguments&gt;\r\n     &lt;/configuration&gt;\r\n    &lt;/plugin&gt;","title":"Permissions on log files created by log4j RollingFileAppender","body":"<p>Add this to your pom file:</p>\n<pre><code>&lt;plugin&gt;                \n  &lt;groupId&gt;\n     org.springframework.boot&lt;/groupId&gt;\n  &lt;artifactId&gt;spring-boot-maven- plugin&lt;/artifactId&gt;\n &lt;configuration&gt;\n   &lt;jvmArguments&gt;\n     -DUMASK=&quot;0022&quot;\n     -Dorg.apache.catalina.security.SecurityListener.UMASK=&quot;0022&quot;\n   &lt;/jvmArguments&gt;\n &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n"}],"owner":{"account_id":455865,"reputation":388,"user_id":854296,"display_name":"Ken Waln"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45126,"favorite_count":0,"down_vote_count":0,"up_vote_count":24,"accepted_answer_id":7893621,"answer_count":5,"score":24,"last_activity_date":1694846684,"creation_date":1319564771,"question_id":7893511,"body_markdown":"How are the permissions for files created by `RollingFileAppender` determined?\r\n\r\nI recently changed a daemon process I have to be run as a non-root user and the files are now being created with permissions of `0600` (only readable by the owner), but I would like them to be readable by all or at least members of an admin group (`0644` or `0640`).  Files created by my tomcat apps are always `0644` (readable by all).\r\n\r\nI don&#39;t know if I inadvertently changed something else or if it is something to do with permissions of that user.  I made the parent directory `0777` as a test and it didn&#39;t seem to help (it was `0755`).  Obviously not a big deal since I can `sudo` to look at them, but rather annoying and it will be a problem if I have to have a customer copy them for me.\r\n\r\nEnvironment is Ubuntu 10.04LTS using `jsvc/commons-daemon` to run the daemon. In case it matters here is the basics on my `log4j` config:\r\n\r\n    &lt;!DOCTYPE log4j:configuration SYSTEM &#39;log4j.dtd&#39;&gt;\r\n    &lt;log4j:configuration xmlns:log4j=&quot;http://jakarta.apache.org/log4j/&quot; debug=&quot;true&quot;&gt;\r\n\t\r\n\t&lt;appender name=&quot;StdOutAppender&quot; class=&quot;org.apache.log4j.ConsoleAppender&quot;&gt;\r\n\t\t&lt;!-- only send error / fatal messages to console (catalina.out) --&gt;\r\n\t\t&lt;param name=&quot;threshold&quot; value=&quot;${log4j.StdOutAppender.threshold}&quot; /&gt;\r\n\t\t&lt;layout class=&quot;org.apache.log4j.PatternLayout&quot;&gt;\r\n\t\t\t&lt;param name=&quot;ConversionPattern&quot; value=&quot;%5p %d{ISO8601} [%t][%x] %c - %m%n&quot; /&gt;\r\n\t\t\t&lt;!--%d{dd-MMM-yyyy HH:mm:ss.SSS} [%5p] %c{2}.%M [line:%L]: %m%n--&gt;\r\n\t\t&lt;/layout&gt;\r\n\t&lt;/appender&gt;\r\n\t\r\n\t&lt;appender name=&quot;TimeBasedRollingFileAppender&quot; class=&quot;org.apache.log4j.rolling.RollingFileAppender&quot;&gt;\r\n\t\t&lt;param name=&quot;append&quot; value=&quot;true&quot; /&gt;\r\n\t\t&lt;param name=&quot;encoding&quot; value=&quot;UTF-8&quot; /&gt;\r\n\t\t&lt;param name=&quot;threshold&quot; value=&quot;${log4j.TimeBasedRollingFileAppender.threshold}&quot; /&gt;\r\n\t\t&lt;rollingPolicy class=&quot;org.apache.log4j.rolling.TimeBasedRollingPolicy&quot;&gt;\r\n\t\t\t&lt;param name=&quot;FileNamePattern&quot; value=&quot;${cloud.daemon.log4j.file.config.path}.%d.gz&quot; /&gt;\r\n\t\t&lt;/rollingPolicy&gt;\r\n\t\t&lt;layout class=&quot;org.apache.log4j.PatternLayout&quot;&gt;\r\n\t\t\t&lt;param name=&quot;ConversionPattern&quot; value=&quot;%5p %d{ISO8601} [%t][%x] %c - %m%n&quot; /&gt;\r\n\t\t\t&lt;!--%d{dd-MMM-yyyy HH:mm:ss.SSS} [%5p] %c{2}.%M [line:%L]: %m%n--&gt;\r\n\t\t&lt;/layout&gt;\r\n\t&lt;/appender&gt;\r\n    ....\r\n\t","title":"Permissions on log files created by log4j RollingFileAppender","body":"<p>How are the permissions for files created by <code>RollingFileAppender</code> determined?</p>\n\n<p>I recently changed a daemon process I have to be run as a non-root user and the files are now being created with permissions of <code>0600</code> (only readable by the owner), but I would like them to be readable by all or at least members of an admin group (<code>0644</code> or <code>0640</code>).  Files created by my tomcat apps are always <code>0644</code> (readable by all).</p>\n\n<p>I don't know if I inadvertently changed something else or if it is something to do with permissions of that user.  I made the parent directory <code>0777</code> as a test and it didn't seem to help (it was <code>0755</code>).  Obviously not a big deal since I can <code>sudo</code> to look at them, but rather annoying and it will be a problem if I have to have a customer copy them for me.</p>\n\n<p>Environment is Ubuntu 10.04LTS using <code>jsvc/commons-daemon</code> to run the daemon. In case it matters here is the basics on my <code>log4j</code> config:</p>\n\n<pre><code>&lt;!DOCTYPE log4j:configuration SYSTEM 'log4j.dtd'&gt;\n&lt;log4j:configuration xmlns:log4j=\"http://jakarta.apache.org/log4j/\" debug=\"true\"&gt;\n\n&lt;appender name=\"StdOutAppender\" class=\"org.apache.log4j.ConsoleAppender\"&gt;\n    &lt;!-- only send error / fatal messages to console (catalina.out) --&gt;\n    &lt;param name=\"threshold\" value=\"${log4j.StdOutAppender.threshold}\" /&gt;\n    &lt;layout class=\"org.apache.log4j.PatternLayout\"&gt;\n        &lt;param name=\"ConversionPattern\" value=\"%5p %d{ISO8601} [%t][%x] %c - %m%n\" /&gt;\n        &lt;!--%d{dd-MMM-yyyy HH:mm:ss.SSS} [%5p] %c{2}.%M [line:%L]: %m%n--&gt;\n    &lt;/layout&gt;\n&lt;/appender&gt;\n\n&lt;appender name=\"TimeBasedRollingFileAppender\" class=\"org.apache.log4j.rolling.RollingFileAppender\"&gt;\n    &lt;param name=\"append\" value=\"true\" /&gt;\n    &lt;param name=\"encoding\" value=\"UTF-8\" /&gt;\n    &lt;param name=\"threshold\" value=\"${log4j.TimeBasedRollingFileAppender.threshold}\" /&gt;\n    &lt;rollingPolicy class=\"org.apache.log4j.rolling.TimeBasedRollingPolicy\"&gt;\n        &lt;param name=\"FileNamePattern\" value=\"${cloud.daemon.log4j.file.config.path}.%d.gz\" /&gt;\n    &lt;/rollingPolicy&gt;\n    &lt;layout class=\"org.apache.log4j.PatternLayout\"&gt;\n        &lt;param name=\"ConversionPattern\" value=\"%5p %d{ISO8601} [%t][%x] %c - %m%n\" /&gt;\n        &lt;!--%d{dd-MMM-yyyy HH:mm:ss.SSS} [%5p] %c{2}.%M [line:%L]: %m%n--&gt;\n    &lt;/layout&gt;\n&lt;/appender&gt;\n....\n</code></pre>\n"},{"tags":["java","android","firebase","firebase-realtime-database","firebase-cloud-messaging"],"comments":[{"owner":{"account_id":22432165,"reputation":1234,"user_id":16637863,"display_name":"Pawan Harariya"},"score":0,"creation_date":1694862015,"post_id":77116625,"comment_id":135948900,"body_markdown":"Check this out https://stackoverflow.com/questions/44547676/send-push-notifications-using-cloud-functions-for-firebase","body":"Check this out <a href=\"https://stackoverflow.com/questions/44547676/send-push-notifications-using-cloud-functions-for-firebase\" title=\"send push notifications using cloud functions for firebase\">stackoverflow.com/questions/44547676/&hellip;</a>"},{"owner":{"account_id":22432165,"reputation":1234,"user_id":16637863,"display_name":"Pawan Harariya"},"score":0,"creation_date":1694862029,"post_id":77116625,"comment_id":135948903,"body_markdown":"And this example as well https://medium.com/android-news/cloud-functions-for-firebase-device-to-device-push-notification-f4c548fd9b7d","body":"And this example as well <a href=\"https://medium.com/android-news/cloud-functions-for-firebase-device-to-device-push-notification-f4c548fd9b7d\" rel=\"nofollow noreferrer\">medium.com/android-news/&hellip;</a>"},{"owner":{"account_id":72426,"reputation":573804,"user_id":209103,"accept_rate":73,"display_name":"Frank van Puffelen"},"score":0,"creation_date":1694884857,"post_id":77116625,"comment_id":135951377,"body_markdown":"You mean like this? https://firebase.google.com/docs/functions/use-cases#notify_users_when_something_interesting_happens","body":"You mean like this? <a href=\"https://firebase.google.com/docs/functions/use-cases#notify_users_when_something_interesting_happens\" rel=\"nofollow noreferrer\">firebase.google.com/docs/functions/&hellip;</a>"},{"owner":{"account_id":20206930,"reputation":7,"user_id":14821074,"display_name":"SuperRv002"},"score":0,"creation_date":1694920707,"post_id":77116625,"comment_id":135954081,"body_markdown":"@FrankvanPuffelen Yes that&#39;s what I want. But I can&#39;t find a proper resource which I could follow to complete that task","body":"@FrankvanPuffelen Yes that&#39;s what I want. But I can&#39;t find a proper resource which I could follow to complete that task"},{"owner":{"account_id":72426,"reputation":573804,"user_id":209103,"accept_rate":73,"display_name":"Frank van Puffelen"},"score":0,"creation_date":1694927117,"post_id":77116625,"comment_id":135954396,"body_markdown":"Since that part of the documentation quite literally describes your use-case, I recommend showing us what you tried based on the documentation and linked resources in there. Without that, it&#39;s unlikely we can explain it better than the documentation already does.","body":"Since that part of the documentation quite literally describes your use-case, I recommend showing us what you tried based on the documentation and linked resources in there. Without that, it&#39;s unlikely we can explain it better than the documentation already does."},{"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1694932397,"post_id":77116625,"comment_id":135954766,"body_markdown":"If you understand Kotlin, I think that this [resource](https://medium.com/firebase-tips-tricks/how-to-use-firebase-cloud-messaging-on-android-d92cb4b53cfe) will help. Here is the corresponding [repo](https://github.com/alexmamo/FirebaseCloudMessaging).","body":"If you understand Kotlin, I think that this <a href=\"https://medium.com/firebase-tips-tricks/how-to-use-firebase-cloud-messaging-on-android-d92cb4b53cfe\" rel=\"nofollow noreferrer\">resource</a> will help. Here is the corresponding <a href=\"https://github.com/alexmamo/FirebaseCloudMessaging\" rel=\"nofollow noreferrer\">repo</a>."}],"owner":{"account_id":20206930,"reputation":7,"user_id":14821074,"display_name":"SuperRv002"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694845787,"creation_date":1694845787,"question_id":77116625,"body_markdown":"Is there a way to send notification to user for any changes in realtime database for firebase in android studio. For my project, I&#39;ve created a home security app. Which will notify user for any alerts. For example my firebase stores values like:\r\n```\r\n&quot;fire&quot;:0,\r\n&quot;smoke&quot;:0,\r\n&quot;intruder&quot;:0,\r\n&quot;power&quot;:0\r\n```\r\n\r\nSo, what I want is when power is set to 1 and any of the other is set to 1 it will send notification to that user according to the alert.\r\nI am using android studio with java and firebase for the same.\r\nIs there a way to do that. I tried using FCM for the same. But it only send scheduled notification and I can&#39;t find a way to send notification when some condition is met","title":"Send notification to user even when the app is not in the RAM of the device","body":"<p>Is there a way to send notification to user for any changes in realtime database for firebase in android studio. For my project, I've created a home security app. Which will notify user for any alerts. For example my firebase stores values like:</p>\n<pre><code>&quot;fire&quot;:0,\n&quot;smoke&quot;:0,\n&quot;intruder&quot;:0,\n&quot;power&quot;:0\n</code></pre>\n<p>So, what I want is when power is set to 1 and any of the other is set to 1 it will send notification to that user according to the alert.\nI am using android studio with java and firebase for the same.\nIs there a way to do that. I tried using FCM for the same. But it only send scheduled notification and I can't find a way to send notification when some condition is met</p>\n"},{"tags":["java","spring","gmail-api","google-workspace","google-api-java-client"],"answers":[{"comments":[{"owner":{"account_id":1611333,"reputation":4067,"user_id":1490144,"accept_rate":68,"display_name":"Manu"},"score":0,"creation_date":1657534696,"post_id":72895051,"comment_id":128824754,"body_markdown":"@DalmTo Thank you, not it works. I also needed to configure delegation. Is it possibile to use an alias of the email of the user?","body":"@DalmTo Thank you, not it works. I also needed to configure delegation. Is it possibile to use an alias of the email of the user?"},{"owner":{"account_id":2066403,"reputation":109440,"user_id":1841839,"accept_rate":71,"display_name":"Linda Lawton - DaImTo"},"score":0,"creation_date":1657536949,"post_id":72895051,"comment_id":128825501,"body_markdown":"Not sure i have never tried. Let me know :)","body":"Not sure i have never tried. Let me know :)"}],"tags":[],"owner":{"account_id":2066403,"reputation":109440,"user_id":1841839,"accept_rate":71,"display_name":"Linda Lawton - DaImTo"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1657184563,"creation_date":1657184563,"answer_id":72895051,"question_id":72893893,"body_markdown":"    createDelegated(EMAIL_ADDRESS_CREATED_WHEN_CREATING_THE_SERVICE_ACCOUNT)\r\n\r\n\r\nThe email you should be setting this to is the email of the user on your workspace account that you have configured delegation for.\r\n\r\n\r\n    createDelegated(&quot;no-reply@Yourdomain.com&quot;)\r\n\r\n\r\nSend should also be sent from the user on your domain.  The way service accounts you preconfigure them to work impersonate a user on your domain.  In this way the service account is pretending to be that user.\r\n\r\nIf you have not already read this: [Perform Google Workspace Domain-Wide Delegation of Authority ](https://developers.google.com/admin-sdk/directory/v1/guides/delegation) I can highly recommend doing so.","title":"Sending email via Google API - Failed precondition","body":"<pre><code>createDelegated(EMAIL_ADDRESS_CREATED_WHEN_CREATING_THE_SERVICE_ACCOUNT)\n</code></pre>\n<p>The email you should be setting this to is the email of the user on your workspace account that you have configured delegation for.</p>\n<pre><code>createDelegated(&quot;no-reply@Yourdomain.com&quot;)\n</code></pre>\n<p>Send should also be sent from the user on your domain.  The way service accounts you preconfigure them to work impersonate a user on your domain.  In this way the service account is pretending to be that user.</p>\n<p>If you have not already read this: <a href=\"https://developers.google.com/admin-sdk/directory/v1/guides/delegation\" rel=\"nofollow noreferrer\">Perform Google Workspace Domain-Wide Delegation of Authority </a> I can highly recommend doing so.</p>\n"}],"owner":{"account_id":1611333,"reputation":4067,"user_id":1490144,"accept_rate":68,"display_name":"Manu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1514,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":72895051,"answer_count":1,"score":3,"last_activity_date":1694844185,"creation_date":1657179157,"question_id":72893893,"body_markdown":"I&#39;m trying to use my Google Workspace account to send emails in my `Spring Boot` application.\r\nI went to the Google Cloud Console and I:\r\n1) Created a new project and selected it (namely `APPLICATION_NAME_FROM_GOOGLE_CONSOLE`)\r\n2) Enabled the Gmail API\r\n3) Created a OAuth consent screen\r\n4) Navigated to &quot;Credentials&quot; and created a new &quot;Service account credentials&quot;, which gave me a new email I will call it `EMAIL_ADDRESS_CREATED_WHEN_CREATING_THE_SERVICE_ACCOUNT`\r\n\r\n\r\nThen I have this code which causes a FAILED PRECONDITION error:\r\n```java\r\n    // invoking code\r\n    Gmail service = buildEmailService();\r\n    Message message = createMessage(fromEmailAddress, toEmailAddress, subject, text);\r\n    _sendMessage(service, message);\r\n\r\n\r\n    private Gmail buildEmailService() throws MessagingException {\r\n        GoogleCredentials credentials = null;\r\n        try {\r\n            String serviceAccountJson = &quot;{\\n&quot; +\r\n                    &quot;  \\&quot;type\\&quot;: \\&quot;service_account\\&quot;,\\n&quot; +\r\n                    &quot;  \\&quot;project_id\\&quot;: \\&quot;lybro-355514\\&quot;,\\n&quot; +\r\n                    &quot;  \\&quot;private_key_id\\..........&quot; \r\n            ;\r\n\r\n            InputStream targetStream = new ByteArrayInputStream(serviceAccountJson.getBytes());\r\n            credentials = ServiceAccountCredentials.fromStream(targetStream)\r\n                    .createScoped(Collections.singletonList(GmailScopes.GMAIL_SEND))\r\n               .createDelegated(EMAIL_ADDRESS_CREATED_WHEN_CREATING_THE_SERVICE_ACCOUNT);\r\n\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n            throw new MessagingException(e.getMessage());\r\n        }\r\n        HttpRequestInitializer requestInitializer = new HttpCredentialsAdapter(credentials);\r\n\r\n        Gmail service = new Gmail.Builder(new NetHttpTransport(),\r\n                GsonFactory.getDefaultInstance(),\r\n                requestInitializer)\r\n                .setApplicationName(APPLICATION_NAME_FROM_GOOGLE_CONSOLE)\r\n                .build();\r\n\r\n        return service;\r\n    }\r\n\r\n\r\n    private void _sendMessage(Gmail service, Message message) throws MessagingException {\r\n        try {\r\n            // Create send message\r\n            message = service.users().messages().send(EMAIL_ADDRESS_CREATED_WHEN_CREATING_THE_SERVICE_ACCOUNT, message).execute();\r\n            System.out.println(&quot;Message id: &quot; + message.getId());\r\n            System.out.println(message.toPrettyString());\r\n        } catch (GoogleJsonResponseException e) {\r\n            // TODO(developer) - handle error appropriately\r\n            GoogleJsonError error = e.getDetails();\r\n            if (error != null &amp;&amp; error.getCode() == 403) {\r\n                System.err.println(&quot;Unable to send message: &quot; + e.getDetails());\r\n            } else {\r\n                e.printStackTrace();\r\n                throw new MessagingException(e.getMessage());\r\n            }\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n            throw new MessagingException(e.getMessage());\r\n        }\r\n    }\r\n```\r\nWith this code, I get the following error:\r\n```\r\njavax.mail.MessagingException: 400 Bad Request POST https://gmail.googleapis.com/gmail/v1/users/lybro-512@lybro-355514.iam.gserviceaccount.com/messages/send {   &quot;code&quot;: 400,   &quot;errors&quot;: [\r\n    {\r\n      &quot;domain&quot;: &quot;global&quot;,\r\n      &quot;message&quot;: &quot;Precondition check failed.&quot;,\r\n      &quot;reason&quot;: &quot;failedPrecondition&quot;\r\n    }   ],   &quot;message&quot;: &quot;Precondition check failed.&quot;,   &quot;status&quot;: &quot;FAILED_PRECONDITION&quot; }\r\n```","title":"Sending email via Google API - Failed precondition","body":"<p>I'm trying to use my Google Workspace account to send emails in my <code>Spring Boot</code> application.\nI went to the Google Cloud Console and I:</p>\n<ol>\n<li>Created a new project and selected it (namely <code>APPLICATION_NAME_FROM_GOOGLE_CONSOLE</code>)</li>\n<li>Enabled the Gmail API</li>\n<li>Created a OAuth consent screen</li>\n<li>Navigated to &quot;Credentials&quot; and created a new &quot;Service account credentials&quot;, which gave me a new email I will call it <code>EMAIL_ADDRESS_CREATED_WHEN_CREATING_THE_SERVICE_ACCOUNT</code></li>\n</ol>\n<p>Then I have this code which causes a FAILED PRECONDITION error:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    // invoking code\n    Gmail service = buildEmailService();\n    Message message = createMessage(fromEmailAddress, toEmailAddress, subject, text);\n    _sendMessage(service, message);\n\n\n    private Gmail buildEmailService() throws MessagingException {\n        GoogleCredentials credentials = null;\n        try {\n            String serviceAccountJson = &quot;{\\n&quot; +\n                    &quot;  \\&quot;type\\&quot;: \\&quot;service_account\\&quot;,\\n&quot; +\n                    &quot;  \\&quot;project_id\\&quot;: \\&quot;lybro-355514\\&quot;,\\n&quot; +\n                    &quot;  \\&quot;private_key_id\\..........&quot; \n            ;\n\n            InputStream targetStream = new ByteArrayInputStream(serviceAccountJson.getBytes());\n            credentials = ServiceAccountCredentials.fromStream(targetStream)\n                    .createScoped(Collections.singletonList(GmailScopes.GMAIL_SEND))\n               .createDelegated(EMAIL_ADDRESS_CREATED_WHEN_CREATING_THE_SERVICE_ACCOUNT);\n\n        } catch (IOException e) {\n            e.printStackTrace();\n            throw new MessagingException(e.getMessage());\n        }\n        HttpRequestInitializer requestInitializer = new HttpCredentialsAdapter(credentials);\n\n        Gmail service = new Gmail.Builder(new NetHttpTransport(),\n                GsonFactory.getDefaultInstance(),\n                requestInitializer)\n                .setApplicationName(APPLICATION_NAME_FROM_GOOGLE_CONSOLE)\n                .build();\n\n        return service;\n    }\n\n\n    private void _sendMessage(Gmail service, Message message) throws MessagingException {\n        try {\n            // Create send message\n            message = service.users().messages().send(EMAIL_ADDRESS_CREATED_WHEN_CREATING_THE_SERVICE_ACCOUNT, message).execute();\n            System.out.println(&quot;Message id: &quot; + message.getId());\n            System.out.println(message.toPrettyString());\n        } catch (GoogleJsonResponseException e) {\n            // TODO(developer) - handle error appropriately\n            GoogleJsonError error = e.getDetails();\n            if (error != null &amp;&amp; error.getCode() == 403) {\n                System.err.println(&quot;Unable to send message: &quot; + e.getDetails());\n            } else {\n                e.printStackTrace();\n                throw new MessagingException(e.getMessage());\n            }\n        } catch (IOException e) {\n            e.printStackTrace();\n            throw new MessagingException(e.getMessage());\n        }\n    }\n</code></pre>\n<p>With this code, I get the following error:</p>\n<pre><code>javax.mail.MessagingException: 400 Bad Request POST https://gmail.googleapis.com/gmail/v1/users/lybro-512@lybro-355514.iam.gserviceaccount.com/messages/send {   &quot;code&quot;: 400,   &quot;errors&quot;: [\n    {\n      &quot;domain&quot;: &quot;global&quot;,\n      &quot;message&quot;: &quot;Precondition check failed.&quot;,\n      &quot;reason&quot;: &quot;failedPrecondition&quot;\n    }   ],   &quot;message&quot;: &quot;Precondition check failed.&quot;,   &quot;status&quot;: &quot;FAILED_PRECONDITION&quot; }\n</code></pre>\n"},{"tags":["java","xml","file","selenium-webdriver","underscore-java"],"comments":[{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":2,"creation_date":1691128745,"post_id":76833100,"comment_id":135452488,"body_markdown":"you could: read the line of the string, use regex replaceAll() to get a version of the string without the numbers that are enclosed by XYZ ZYX, or actually just remove XYZ...ZYX all together","body":"you could: read the line of the string, use regex replaceAll() to get a version of the string without the numbers that are enclosed by XYZ ZYX, or actually just remove XYZ...ZYX all together"},{"owner":{"account_id":4570164,"reputation":4170,"user_id":3710053,"display_name":"Siebe Jongebloed"},"score":0,"creation_date":1691132044,"post_id":76833100,"comment_id":135452954,"body_markdown":"What has xml todo with this question?","body":"What has xml todo with this question?"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1691211537,"post_id":76833100,"comment_id":135464554,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":15994883,"reputation":3427,"user_id":11543023,"display_name":"djmonki"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694843688,"creation_date":1691214034,"answer_id":76840302,"question_id":76833100,"body_markdown":"The solution below uses the java.nio.file and java.util.regex packages. It reads the files line by line and utilizes a regex pattern to identify and replace the specific patterns (&quot;XYZ...ZYX&quot;) with a constant placeholder (&quot;XYZIGNOREZYX&quot;).\r\n\r\n```java\r\nimport java.io.*;\r\nimport java.nio.file.*;\r\nimport java.util.stream.*;\r\nimport java.util.regex.*;\r\n\r\npublic class FileComparison {\r\n    public static void main(String[] args) throws IOException {\r\n        Path file1Path = Paths.get(&quot;File1.txt&quot;);\r\n        Path file2Path = Paths.get(&quot;File2.txt&quot;);\r\n\r\n        // Use process method below to remove random text \r\n        // between your static bounded text \r\n        List&lt;String&gt; file1Lines = processFile(file1Path);\r\n        List&lt;String&gt; file2Lines = processFile(file2Path);\r\n\r\n        // Now you can compare file1Lines and file2Lines\r\n\r\n    }\r\n\r\n    // This method will identify pattern and replace the random text\r\n    // identified by regex with a constant value\r\n    private static List&lt;String&gt; processFile(Path filePath) throws IOException {\r\n        Pattern pattern = Pattern.compile(&quot;XYZ.*?ZYX&quot;);\r\n        return Files.lines(filePath)\r\n            .map(line -&gt; {\r\n                Matcher matcher = pattern.matcher(line);\r\n                return matcher.replaceAll(&quot;XYZIGNOREZYX&quot;);\r\n            })\r\n            .collect(Collectors.toList());\r\n    }\r\n}\r\n```\r\n\r\nThe regex pattern ```.*?``` matches any number of any characters, but as few as possible to still make the match (this is called [non-greedy matching][1] - use this link to learn more). \r\n\r\nThis is necessary to correctly handle lines that contain multiple &quot;XYZ...ZYX&quot; patterns. \r\n\r\nThe replaceAll method replaces all matches of the regex with &quot;XYZIGNOREZYX&quot;\r\n\r\n  [1]: https://examples.javacodegeeks.com/java-development/core-java/util/regex/greedy-and-non-greedy-reg-ex-matching/#:~:text=A%20greedy%20regular%20expression%20is,matches%20the%20pattern%20is%20returned.","title":"Ignoring Specific Patterns Between Delimiters When Comparing Text Files in Core Java","body":"<p>The solution below uses the java.nio.file and java.util.regex packages. It reads the files line by line and utilizes a regex pattern to identify and replace the specific patterns (&quot;XYZ...ZYX&quot;) with a constant placeholder (&quot;XYZIGNOREZYX&quot;).</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.io.*;\nimport java.nio.file.*;\nimport java.util.stream.*;\nimport java.util.regex.*;\n\npublic class FileComparison {\n    public static void main(String[] args) throws IOException {\n        Path file1Path = Paths.get(&quot;File1.txt&quot;);\n        Path file2Path = Paths.get(&quot;File2.txt&quot;);\n\n        // Use process method below to remove random text \n        // between your static bounded text \n        List&lt;String&gt; file1Lines = processFile(file1Path);\n        List&lt;String&gt; file2Lines = processFile(file2Path);\n\n        // Now you can compare file1Lines and file2Lines\n\n    }\n\n    // This method will identify pattern and replace the random text\n    // identified by regex with a constant value\n    private static List&lt;String&gt; processFile(Path filePath) throws IOException {\n        Pattern pattern = Pattern.compile(&quot;XYZ.*?ZYX&quot;);\n        return Files.lines(filePath)\n            .map(line -&gt; {\n                Matcher matcher = pattern.matcher(line);\n                return matcher.replaceAll(&quot;XYZIGNOREZYX&quot;);\n            })\n            .collect(Collectors.toList());\n    }\n}\n</code></pre>\n<p>The regex pattern <code>.*?</code> matches any number of any characters, but as few as possible to still make the match (this is called <a href=\"https://examples.javacodegeeks.com/java-development/core-java/util/regex/greedy-and-non-greedy-reg-ex-matching/#:%7E:text=A%20greedy%20regular%20expression%20is,matches%20the%20pattern%20is%20returned.\" rel=\"nofollow noreferrer\">non-greedy matching</a> - use this link to learn more).</p>\n<p>This is necessary to correctly handle lines that contain multiple &quot;XYZ...ZYX&quot; patterns.</p>\n<p>The replaceAll method replaces all matches of the regex with &quot;XYZIGNOREZYX&quot;</p>\n"}],"owner":{"account_id":10150760,"reputation":1,"user_id":22336759,"display_name":"Bapi"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1694843688,"creation_date":1691126121,"question_id":76833100,"body_markdown":"I&#39;m working with two text files, File1.txt and File2.txt, and comparing them using Core Java. While doing so, I need to disregard certain values in the comparison.\r\n\r\nSpecifically, any value that falls between the strings XYZ and ZYX should be excluded from the comparison.\r\n\r\nHere&#39;s a brief example of the contents of the two files:\r\n\r\n**File1.txt**\r\n```\r\n-----------------------------\r\nXYZ12345ZYX\r\nabcddd......\r\nI am going to Delhi .............\r\nMumbai isgoodXYZ6789ZYX\r\n```\r\n\r\n**File2.txt**\r\n```\r\n----------------------------\r\nXYZ111111ZYX\r\nabcddd......\r\nI am going to Delhi .............\r\nMumbai isgoodXYZ00000ZYX\r\n```\r\n\r\nFrom the example:\r\n\r\n - The values 12345 in File1.txt and 111111 in File2.txt should be ignored.\r\n - The values 6789 in File1.txt and 00000 in File2.txt should also be ignored.    \r\n\r\n\r\nI&#39;m curious to know if anyone is familiar with a widely-recognized method, algorithm, or logic to address this challenge. Any experiences or suggestions?\r\n\r\n","title":"Ignoring Specific Patterns Between Delimiters When Comparing Text Files in Core Java","body":"<p>I'm working with two text files, File1.txt and File2.txt, and comparing them using Core Java. While doing so, I need to disregard certain values in the comparison.</p>\n<p>Specifically, any value that falls between the strings XYZ and ZYX should be excluded from the comparison.</p>\n<p>Here's a brief example of the contents of the two files:</p>\n<p><strong>File1.txt</strong></p>\n<pre><code>-----------------------------\nXYZ12345ZYX\nabcddd......\nI am going to Delhi .............\nMumbai isgoodXYZ6789ZYX\n</code></pre>\n<p><strong>File2.txt</strong></p>\n<pre><code>----------------------------\nXYZ111111ZYX\nabcddd......\nI am going to Delhi .............\nMumbai isgoodXYZ00000ZYX\n</code></pre>\n<p>From the example:</p>\n<ul>\n<li>The values 12345 in File1.txt and 111111 in File2.txt should be ignored.</li>\n<li>The values 6789 in File1.txt and 00000 in File2.txt should also be ignored.</li>\n</ul>\n<p>I'm curious to know if anyone is familiar with a widely-recognized method, algorithm, or logic to address this challenge. Any experiences or suggestions?</p>\n"},{"tags":["java","spring","spring-boot","multithreading","java-17"],"owner":{"account_id":29457278,"reputation":1,"user_id":22572851,"display_name":"May Enzo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694842604,"creation_date":1694841402,"question_id":77116434,"body_markdown":"I set the InheritableThreadLocal only in Filter class but it returns null value when I access it inside controller\r\n```\r\n@Override\r\n    protected void doFilterInternal(HttpServletRequest request,\r\n                                    HttpServletResponse response,\r\n                                    FilterChain filterChain) throws IOException {\r\n        try {\r\n            if (isAuthorized(request, response)) {\r\n                filterChain.doFilter(request, response);\r\n            } else {\r\n                respondUnauthorized(response);\r\n//              UserContextHolder.clearUserContext();\r\n            }\r\n        } catch (Exception e) {\r\n            respondUnauthorized(response);\r\n//          UserContextHolder.clearUserContext();\r\n        }\r\n//        finally {\r\n//            UserContextHolder.clearUserContext();\r\n//        }\r\n    }\r\n```\r\n```\r\nprivate boolean isAuthorized(HttpServletRequest request, HttpServletResponse response) {\r\n        String accessToken = request.getHeader(AUTH_HEADER);\r\n        if (accessToken == null) {\r\n            return false;\r\n        }\r\n\r\n        DecodedJWT jwt = decodedToken(accessToken);\r\n        String realm = extractRealm(jwt);\r\n        if (realm == null) {\r\n            return false;\r\n        }\r\n\r\n        try {\r\n            String keyId = jwt.getHeaderClaim(KEY_CLAIM).asString();\r\n            populateUserContext(accessToken, realm);\r\n            return validateToken(accessToken, getPublicKey(realm, keyId), realm);\r\n        } catch (TokenExpiredException e) {\r\n            AccessAndRefreshToken accessAndRefreshToken = refreshToken(accessToken, jwt, realm);\r\n            response.setHeader(AUTH_HEADER, accessAndRefreshToken.accessToken());\r\n            return true;\r\n        } catch (Exception e) {\r\n            return false;\r\n        }\r\n    }\r\n```\r\n[Setting the InheritableThreadLocal in one of its method (populateUserContext)](https://i.stack.imgur.com/RFnvK.png)\r\n````\r\nprivate void populateUserContext(String token, String realm) {\r\n        DecodedJWT decodedToken = JWT.decode(token);\r\n        Claim userId = decodedToken.getClaim(&quot;s&quot;);\r\n        Claim userEmail = decodedToken.getClaim(&quot;username&quot;);\r\n        Claim userGroups = decodedToken.getClaim(&quot;Groups&quot;);\r\n        TokenDataDto userContext = new TokenDataDto();\r\n        userContext.setUserLogin(userEmail.asString());\r\n        userContext.setIdpUserId(userId.asString());\r\n        userContext.setRealm(realm);\r\n        userContext.setUserRoles(userGroups.asList(String.class));\r\n        userContext.setAccessToken(token);\r\n        UserContextHolder.setUserContext(userContext);\r\n    }\r\n````\r\n\r\n[populateUserContext sets the InheritableThreadLocal](https://i.stack.imgur.com/vSwrR.png)\r\n\r\n[InheritableThreadLocal variable inside method of filter](https://i.stack.imgur.com/WsUai.png)\r\n\r\n[I also delete the clearing of InheritableThreadLocal just to test that no class is clearing it programatically](https://i.stack.imgur.com/XjdzA.png)\r\n\r\nI get InheritableThreadLocal in the controller but value is null.\r\n[InheritableThreadLocal in controller](https://i.stack.imgur.com/0YeA0.png)\r\n```\r\n public ResponseEntity&lt;Void&gt; disable(String userId, String xsessionToken) {\r\n        if (permService.hasAdminRole(userContext.getIdpUserId())) {\r\n            myUserService.disableAdminUser(userId);\r\n```\r\n[userContext inside filter](https://i.stack.imgur.com/GIixs.png)\r\n[Another log of filter above.](https://i.stack.imgur.com/FDQPc.png)","title":"ThreadLocal not working in Controller after setting it on doFilterInternal method of OncePerRequestFilter abstract","body":"<p>I set the InheritableThreadLocal only in Filter class but it returns null value when I access it inside controller</p>\n<pre><code>@Override\n    protected void doFilterInternal(HttpServletRequest request,\n                                    HttpServletResponse response,\n                                    FilterChain filterChain) throws IOException {\n        try {\n            if (isAuthorized(request, response)) {\n                filterChain.doFilter(request, response);\n            } else {\n                respondUnauthorized(response);\n//              UserContextHolder.clearUserContext();\n            }\n        } catch (Exception e) {\n            respondUnauthorized(response);\n//          UserContextHolder.clearUserContext();\n        }\n//        finally {\n//            UserContextHolder.clearUserContext();\n//        }\n    }\n</code></pre>\n<pre><code>private boolean isAuthorized(HttpServletRequest request, HttpServletResponse response) {\n        String accessToken = request.getHeader(AUTH_HEADER);\n        if (accessToken == null) {\n            return false;\n        }\n\n        DecodedJWT jwt = decodedToken(accessToken);\n        String realm = extractRealm(jwt);\n        if (realm == null) {\n            return false;\n        }\n\n        try {\n            String keyId = jwt.getHeaderClaim(KEY_CLAIM).asString();\n            populateUserContext(accessToken, realm);\n            return validateToken(accessToken, getPublicKey(realm, keyId), realm);\n        } catch (TokenExpiredException e) {\n            AccessAndRefreshToken accessAndRefreshToken = refreshToken(accessToken, jwt, realm);\n            response.setHeader(AUTH_HEADER, accessAndRefreshToken.accessToken());\n            return true;\n        } catch (Exception e) {\n            return false;\n        }\n    }\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/RFnvK.png\" rel=\"nofollow noreferrer\">Setting the InheritableThreadLocal in one of its method (populateUserContext)</a></p>\n<pre><code>private void populateUserContext(String token, String realm) {\n        DecodedJWT decodedToken = JWT.decode(token);\n        Claim userId = decodedToken.getClaim(&quot;s&quot;);\n        Claim userEmail = decodedToken.getClaim(&quot;username&quot;);\n        Claim userGroups = decodedToken.getClaim(&quot;Groups&quot;);\n        TokenDataDto userContext = new TokenDataDto();\n        userContext.setUserLogin(userEmail.asString());\n        userContext.setIdpUserId(userId.asString());\n        userContext.setRealm(realm);\n        userContext.setUserRoles(userGroups.asList(String.class));\n        userContext.setAccessToken(token);\n        UserContextHolder.setUserContext(userContext);\n    }\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/vSwrR.png\" rel=\"nofollow noreferrer\">populateUserContext sets the InheritableThreadLocal</a></p>\n<p><a href=\"https://i.stack.imgur.com/WsUai.png\" rel=\"nofollow noreferrer\">InheritableThreadLocal variable inside method of filter</a></p>\n<p><a href=\"https://i.stack.imgur.com/XjdzA.png\" rel=\"nofollow noreferrer\">I also delete the clearing of InheritableThreadLocal just to test that no class is clearing it programatically</a></p>\n<p>I get InheritableThreadLocal in the controller but value is null.\n<a href=\"https://i.stack.imgur.com/0YeA0.png\" rel=\"nofollow noreferrer\">InheritableThreadLocal in controller</a></p>\n<pre><code> public ResponseEntity&lt;Void&gt; disable(String userId, String xsessionToken) {\n        if (permService.hasAdminRole(userContext.getIdpUserId())) {\n            myUserService.disableAdminUser(userId);\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/GIixs.png\" rel=\"nofollow noreferrer\">userContext inside filter</a>\n<a href=\"https://i.stack.imgur.com/FDQPc.png\" rel=\"nofollow noreferrer\">Another log of filter above.</a></p>\n"},{"tags":["java","arrays","performance","memory-management","computer-science"],"comments":[{"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"score":6,"creation_date":1694832471,"post_id":77116169,"comment_id":135946895,"body_markdown":"Java is not C, focusing on memory-management is not a productive use of your time.","body":"Java is not C, focusing on memory-management is not a productive use of your time."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1694833690,"post_id":77116169,"comment_id":135946960,"body_markdown":"See https://stackoverflow.com/questions/504103/how-do-i-write-a-correct-micro-benchmark-in-java","body":"See <a href=\"https://stackoverflow.com/questions/504103/how-do-i-write-a-correct-micro-benchmark-in-java\" title=\"how do i write a correct micro benchmark in java\">stackoverflow.com/questions/504103/&hellip;</a>"},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1694834563,"post_id":77116169,"comment_id":135947015,"body_markdown":"I imagine the _1-d_ array is much faster.","body":"I imagine the <i>1-d</i> array is much faster."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":5,"creation_date":1694837976,"post_id":77116169,"comment_id":135947166,"body_markdown":"Frankly, this smells of premature optimization.   Unless you know with great certainty that the 1D vs 3D performance difference *will* be critical ... you are probably wasting your time by trying to optimizing this too early.  The only way to be really sure that some aspect of your code is a bottleneck is to write an application benchmark and use a profiler **after** you have coded and tested your application.","body":"Frankly, this smells of premature optimization.   Unless you know with great certainty that the 1D vs 3D performance difference <i>will</i> be critical ... you are probably wasting your time by trying to optimizing this too early.  The only way to be really sure that some aspect of your code is a bottleneck is to write an application benchmark and use a profiler <b>after</b> you have coded and tested your application."}],"answers":[{"comments":[{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":5,"creation_date":1694838162,"post_id":77116304,"comment_id":135947173,"body_markdown":"Note to OP.  The above benchmark is artificial.  It may or may not be predictive of how the 1D vs 3D design choice affects *your* application.","body":"Note to OP.  The above benchmark is artificial.  It may or may not be predictive of how the 1D vs 3D design choice affects <i>your</i> application."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1695370526,"post_id":77116304,"comment_id":136018075,"body_markdown":"The readability issue of a flattened array can be solved by encapsulating it in a class providing three-arg getters and four-arg setters. Another advantage of this approach is that you can change the implementation without the need to adapt the application, so you can test flattened arrays, three dimensional arrays, or the Foreign API with the real application easily.","body":"The readability issue of a flattened array can be solved by encapsulating it in a class providing three-arg getters and four-arg setters. Another advantage of this approach is that you can change the implementation without the need to adapt the application, so you can test flattened arrays, three dimensional arrays, or the Foreign API with the real application easily."}],"tags":[],"owner":{"account_id":61566,"reputation":68934,"user_id":183406,"accept_rate":74,"display_name":"meriton"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1694837225,"creation_date":1694837225,"answer_id":77116304,"question_id":77116169,"body_markdown":"`a[x][y][z]` involves 3 memory accesses, but very little computation. \r\n\r\n`a[x * X * Y + y * Y + z]` involves one memory access, but more computation.\r\n\r\nGenerally, memory access is more expensive than a multiplication, very much so if the memory being accessed is not in the CPU cache. \r\n\r\nFor instance, if you repeatedly access random locations in an `int[][][]`, the first dimension will likely be in the CPU cache, but the other two won&#39;t be, for a total of 2 loads from main memory by element accessed. In contrast, using an `int[]` will involve only a single load from main memory, so will be up to twice as fast.\r\n\r\nOn the other hand, if you access your `int[][][]` sequentially, you will have very few cache misses, and an `int[]` will only be marginally faster.\r\n\r\nAll that said, switching to a 1-dimensional array makes the code harder to read and write, and unless the arrays are huge and accessed at great frequency, the performance difference will be too minor to matter.\r\n\r\nTo verify the theory, you can use the following benchmark:\r\n\r\n```\r\npublic class Benchmark {\r\n\r\n\tpublic static void benchmark(String label, Code code) {\r\n\t\tprint(25, label);\r\n\t\t\r\n\t\ttry {\r\n\t\t\tfor (int iterations = 1; ; iterations *= 2) { // detect reasonable iteration count and warm up the code under test\r\n\t\t\t\tSystem.gc(); // clean up previous runs, so we don&#39;t benchmark their cleanup\r\n\t\t\t\tlong previouslyUsedMemory = usedMemory();\r\n\t\t\t\tlong start = System.nanoTime();\r\n\t\t\t\tcode.execute(iterations);\r\n\t\t\t\tlong duration = System.nanoTime() - start;\r\n\t\t\t\tlong memoryUsed = usedMemory() - previouslyUsedMemory;\r\n\t\t\t\t\r\n\t\t\t\tif (iterations &gt; 1E8 || duration &gt; 1E9) { \r\n\t\t\t\t\tprint(25, new BigDecimal(duration * 1000 / iterations).movePointLeft(3) + &quot; ns / iteration&quot;);\r\n\t\t\t\t\tprint(30, new BigDecimal(memoryUsed * 1000 / iterations).movePointLeft(3) + &quot; bytes / iteration\\n&quot;);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} catch (Throwable e) {\r\n\t\t\tthrow new RuntimeException(e);\r\n\t\t}\r\n\t}\r\n\t\r\n\tprivate static void print(int desiredLength, String message) {\r\n\t\tSystem.out.print(&quot; &quot;.repeat(Math.max(1, desiredLength - message.length())) + message);\r\n\t}\r\n\t\r\n\tprivate static long usedMemory() {\r\n\t\tvar r = Runtime.getRuntime();\r\n\t\treturn r.totalMemory() - r.freeMemory();\r\n\t}\r\n\r\n\t@FunctionalInterface\r\n\tinterface Code {\r\n\t\t/**\r\n\t\t * Executes the code under test.\r\n\t\t * \r\n\t\t * @param iterations\r\n\t\t *            number of iterations to perform\r\n\t\t * @return any value that requires the entire code to be executed (to\r\n\t\t *         prevent dead code elimination by the just in time compiler)\r\n\t\t * @throws Throwable\r\n\t\t *             if the test could not complete successfully\r\n\t\t */\r\n\t\tObject execute(int iterations);\r\n\t}\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tbenchmark(&quot; int[][][] traversal, sequential&quot;, (iterations) -&gt; {\r\n\t\t\tint n = (int) Math.pow(iterations, 1.0/3);\r\n\t\t\tint[][][] a = new int[n][n][n];\r\n\t\t\tfor (int x = 0; x &lt; n; x++) {\r\n\t\t\t\tfor (int y = 0; y &lt; n; y++) {\r\n\t\t\t\t\tfor (int z = 0; z &lt; n; z++) {\r\n\t\t\t\t\t\ta[x][y][z] = x + y + z;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn a;\r\n\t\t});\r\n\t\tbenchmark(&quot;flat int[] traversal, sequential&quot;, (iterations) -&gt; {\r\n\t\t\tint n = (int) Math.pow(iterations, 1.0/3);\r\n\t\t\tint[] a = new int[n * n * n];\r\n\t\t\tfor (int x = 0; x &lt; n; x++) {\r\n\t\t\t\tfor (int y = 0; y &lt; n; y++) {\r\n\t\t\t\t\tfor (int z = 0; z &lt; n; z++) {\r\n\t\t\t\t\t\ta[(x * n + y) * n + z] = x + y + z;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn a;\r\n\t\t});\r\n\t\tbenchmark(&quot; int[][][] traversal, unordered &quot; , (iterations) -&gt; {\r\n\t\t\tint n = (int) Math.pow(iterations, 1.0/3);\r\n\t\t\tint[][][] a = new int[n][n][n];\r\n\t\t\tfor (int x = 0; x &lt; n; x++) {\r\n\t\t\t\tfor (int y = 0; y &lt; n; y++) {\r\n\t\t\t\t\tfor (int z = 0; z &lt; n; z++) {\r\n\t\t\t\t\t\ta[z][y][x] = x + y + z;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn a;\r\n\t\t});\r\n\t\tbenchmark(&quot;flat int[] traversal, unordered &quot;, (iterations) -&gt; {\r\n\t\t\tint n = (int) Math.pow(iterations, 1.0/3);\r\n\t\t\tint[] a = new int[n * n * n];\r\n\t\t\tfor (int x = 0; x &lt; n; x++) {\r\n\t\t\t\tfor (int y = 0; y &lt; n; y++) {\r\n\t\t\t\t\tfor (int z = 0; z &lt; n; z++) {\r\n\t\t\t\t\t\ta[(z * n + y) * n + x] = x + y + z;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn a;\r\n\t\t});\r\n\t}\r\n}\r\n```\r\n\r\nOn my computer, this prints:\r\n\r\n```\r\n  int[][][] traversal, sequential     1.406 ns / iteration      4.204 bytes / iteration\r\n flat int[] traversal, sequential     0.926 ns / iteration      3.984 bytes / iteration\r\n  int[][][] traversal, unordered     11.716 ns / iteration      4.188 bytes / iteration\r\n flat int[] traversal, unordered      5.487 ns / iteration      3.984 bytes / iteration\r\n```\r\n\r\nAs you can see, the performance differences only matter if you do millions of array accesses per second (or dozens of millions, if the access is sequential). The situations where one should replace an `int[][][]` with an `int[]` for performance reasons are therefore rare indeed.","title":"What are the benefits of flattening the 3-D array to 1-D array?","body":"<p><code>a[x][y][z]</code> involves 3 memory accesses, but very little computation.</p>\n<p><code>a[x * X * Y + y * Y + z]</code> involves one memory access, but more computation.</p>\n<p>Generally, memory access is more expensive than a multiplication, very much so if the memory being accessed is not in the CPU cache.</p>\n<p>For instance, if you repeatedly access random locations in an <code>int[][][]</code>, the first dimension will likely be in the CPU cache, but the other two won't be, for a total of 2 loads from main memory by element accessed. In contrast, using an <code>int[]</code> will involve only a single load from main memory, so will be up to twice as fast.</p>\n<p>On the other hand, if you access your <code>int[][][]</code> sequentially, you will have very few cache misses, and an <code>int[]</code> will only be marginally faster.</p>\n<p>All that said, switching to a 1-dimensional array makes the code harder to read and write, and unless the arrays are huge and accessed at great frequency, the performance difference will be too minor to matter.</p>\n<p>To verify the theory, you can use the following benchmark:</p>\n<pre><code>public class Benchmark {\n\n    public static void benchmark(String label, Code code) {\n        print(25, label);\n        \n        try {\n            for (int iterations = 1; ; iterations *= 2) { // detect reasonable iteration count and warm up the code under test\n                System.gc(); // clean up previous runs, so we don't benchmark their cleanup\n                long previouslyUsedMemory = usedMemory();\n                long start = System.nanoTime();\n                code.execute(iterations);\n                long duration = System.nanoTime() - start;\n                long memoryUsed = usedMemory() - previouslyUsedMemory;\n                \n                if (iterations &gt; 1E8 || duration &gt; 1E9) { \n                    print(25, new BigDecimal(duration * 1000 / iterations).movePointLeft(3) + &quot; ns / iteration&quot;);\n                    print(30, new BigDecimal(memoryUsed * 1000 / iterations).movePointLeft(3) + &quot; bytes / iteration\\n&quot;);\n                    return;\n                }\n            }\n        } catch (Throwable e) {\n            throw new RuntimeException(e);\n        }\n    }\n    \n    private static void print(int desiredLength, String message) {\n        System.out.print(&quot; &quot;.repeat(Math.max(1, desiredLength - message.length())) + message);\n    }\n    \n    private static long usedMemory() {\n        var r = Runtime.getRuntime();\n        return r.totalMemory() - r.freeMemory();\n    }\n\n    @FunctionalInterface\n    interface Code {\n        /**\n         * Executes the code under test.\n         * \n         * @param iterations\n         *            number of iterations to perform\n         * @return any value that requires the entire code to be executed (to\n         *         prevent dead code elimination by the just in time compiler)\n         * @throws Throwable\n         *             if the test could not complete successfully\n         */\n        Object execute(int iterations);\n    }\n\n    public static void main(String[] args) {\n        benchmark(&quot; int[][][] traversal, sequential&quot;, (iterations) -&gt; {\n            int n = (int) Math.pow(iterations, 1.0/3);\n            int[][][] a = new int[n][n][n];\n            for (int x = 0; x &lt; n; x++) {\n                for (int y = 0; y &lt; n; y++) {\n                    for (int z = 0; z &lt; n; z++) {\n                        a[x][y][z] = x + y + z;\n                    }\n                }\n            }\n            return a;\n        });\n        benchmark(&quot;flat int[] traversal, sequential&quot;, (iterations) -&gt; {\n            int n = (int) Math.pow(iterations, 1.0/3);\n            int[] a = new int[n * n * n];\n            for (int x = 0; x &lt; n; x++) {\n                for (int y = 0; y &lt; n; y++) {\n                    for (int z = 0; z &lt; n; z++) {\n                        a[(x * n + y) * n + z] = x + y + z;\n                    }\n                }\n            }\n            return a;\n        });\n        benchmark(&quot; int[][][] traversal, unordered &quot; , (iterations) -&gt; {\n            int n = (int) Math.pow(iterations, 1.0/3);\n            int[][][] a = new int[n][n][n];\n            for (int x = 0; x &lt; n; x++) {\n                for (int y = 0; y &lt; n; y++) {\n                    for (int z = 0; z &lt; n; z++) {\n                        a[z][y][x] = x + y + z;\n                    }\n                }\n            }\n            return a;\n        });\n        benchmark(&quot;flat int[] traversal, unordered &quot;, (iterations) -&gt; {\n            int n = (int) Math.pow(iterations, 1.0/3);\n            int[] a = new int[n * n * n];\n            for (int x = 0; x &lt; n; x++) {\n                for (int y = 0; y &lt; n; y++) {\n                    for (int z = 0; z &lt; n; z++) {\n                        a[(z * n + y) * n + x] = x + y + z;\n                    }\n                }\n            }\n            return a;\n        });\n    }\n}\n</code></pre>\n<p>On my computer, this prints:</p>\n<pre><code>  int[][][] traversal, sequential     1.406 ns / iteration      4.204 bytes / iteration\n flat int[] traversal, sequential     0.926 ns / iteration      3.984 bytes / iteration\n  int[][][] traversal, unordered     11.716 ns / iteration      4.188 bytes / iteration\n flat int[] traversal, unordered      5.487 ns / iteration      3.984 bytes / iteration\n</code></pre>\n<p>As you can see, the performance differences only matter if you do millions of array accesses per second (or dozens of millions, if the access is sequential). The situations where one should replace an <code>int[][][]</code> with an <code>int[]</code> for performance reasons are therefore rare indeed.</p>\n"}],"owner":{"account_id":9541348,"reputation":59,"user_id":7089407,"display_name":"shivakumar"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77116304,"answer_count":1,"score":1,"last_activity_date":1694837225,"creation_date":1694832364,"question_id":77116169,"body_markdown":"I have a 3-D array represented in Java as  \r\n```\r\nint[][][] arr = new int[X][Y][z]\r\n```\r\nIf I try to implement the 3-D array using 1-D as\r\n```\r\nint[] oneDArray = new int[X*Y*Z] \r\n```\r\nindex of an element arr[i][j][k] in 1-D will be calculated as \r\n```\r\nindx = X*Y*k + i*Y + j;\r\n```\r\nThough in the memory location the any N-D array will be stored sequentially.  \r\nWith the 1-D, if I use three indexes (i,j,k) to access the elements, will this degrade the performance for larger values of X,Y,Z? \r\n\r\n","title":"What are the benefits of flattening the 3-D array to 1-D array?","body":"<p>I have a 3-D array represented in Java as</p>\n<pre><code>int[][][] arr = new int[X][Y][z]\n</code></pre>\n<p>If I try to implement the 3-D array using 1-D as</p>\n<pre><code>int[] oneDArray = new int[X*Y*Z] \n</code></pre>\n<p>index of an element arr[i][j][k] in 1-D will be calculated as</p>\n<pre><code>indx = X*Y*k + i*Y + j;\n</code></pre>\n<p>Though in the memory location the any N-D array will be stored sequentially.<br />\nWith the 1-D, if I use three indexes (i,j,k) to access the elements, will this degrade the performance for larger values of X,Y,Z?</p>\n"},{"tags":["java"],"answers":[{"comments":[{"owner":{"account_id":11720407,"reputation":1858,"user_id":8579556,"display_name":"Luca Murra"},"score":0,"creation_date":1581000483,"post_id":60097551,"comment_id":106290173,"body_markdown":"&quot;107&quot; is an example, you should explain how to solve his problem generally; however, in his example &quot;price / 107&quot; is equals to 1, and it works only beacuse we&#39;re in a particulare case: your answer is incorrect or incomplete","body":"&quot;107&quot; is an example, you should explain how to solve his problem generally; however, in his example &quot;price / 107&quot; is equals to 1, and it works only beacuse we&#39;re in a particulare case: your answer is incorrect or incomplete"},{"owner":{"account_id":11863935,"reputation":47,"user_id":8681903,"display_name":"Bluejay"},"score":0,"creation_date":1581001060,"post_id":60097551,"comment_id":106290549,"body_markdown":"The price is 107% of the actual price. Dividing the price by 107 gives you the value of 1% of the price, multiplying it by 7 gives the 7% sales tax. Though I should have used variables for the tax percentage instead of limiting it to 7%.","body":"The price is 107% of the actual price. Dividing the price by 107 gives you the value of 1% of the price, multiplying it by 7 gives the 7% sales tax. Though I should have used variables for the tax percentage instead of limiting it to 7%."}],"tags":[],"owner":{"account_id":11863935,"reputation":47,"user_id":8681903,"display_name":"Bluejay"},"comment_count":2,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1581001193,"creation_date":1581000261,"answer_id":60097551,"question_id":60097275,"body_markdown":"The problem is your sales tax calculation, try:\r\n\r\n    final double SALES_TAX_RATE = 7;\r\n\r\n    salesTax = price / (100 + SALES_TAX_RATE) * SALES_TAX_RATE;\r\n\r\n","title":"Calculate sales tax according to the price","body":"<p>The problem is your sales tax calculation, try:</p>\n\n<pre><code>final double SALES_TAX_RATE = 7;\n\nsalesTax = price / (100 + SALES_TAX_RATE) * SALES_TAX_RATE;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11720407,"reputation":1858,"user_id":8579556,"display_name":"Luca Murra"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1581000388,"creation_date":1581000388,"answer_id":60097592,"question_id":60097275,"body_markdown":"You&#39;re wrong with these two lines:\r\n\r\n    salesTax = SALES_TAX_RATE * price;\r\n    actualPrice = price - salesTax;\r\n\r\nYou&#39;re calculating the sales on the already-saled price, try following me:\r\n\r\nYour `price` is the composition of the `actualPrice` and the tax on `actualPrice`:\r\n\r\n    price = actualPrice + SALES_TAX_RATE * actualPrice\r\n\r\nso you can mathematically do the following passages:\r\n\r\n    price = actualPrice * (1 + SALES_TAX_RATE)\r\n    \r\n    actualPrice = price / (1 + SALES_TAX_RATE)\r\n\r\nSo, try changing the assigment of `actualPrice`, then calculate the tax on your `actualPrice`:\r\n\r\n    salesTax = SALES_TAX_RATE * actualPrice;","title":"Calculate sales tax according to the price","body":"<p>You're wrong with these two lines:</p>\n\n<pre><code>salesTax = SALES_TAX_RATE * price;\nactualPrice = price - salesTax;\n</code></pre>\n\n<p>You're calculating the sales on the already-saled price, try following me:</p>\n\n<p>Your <code>price</code> is the composition of the <code>actualPrice</code> and the tax on <code>actualPrice</code>:</p>\n\n<pre><code>price = actualPrice + SALES_TAX_RATE * actualPrice\n</code></pre>\n\n<p>so you can mathematically do the following passages:</p>\n\n<pre><code>price = actualPrice * (1 + SALES_TAX_RATE)\n\nactualPrice = price / (1 + SALES_TAX_RATE)\n</code></pre>\n\n<p>So, try changing the assigment of <code>actualPrice</code>, then calculate the tax on your <code>actualPrice</code>:</p>\n\n<pre><code>salesTax = SALES_TAX_RATE * actualPrice;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12165536,"reputation":1,"user_id":8881957,"display_name":"Vinu "},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1625232561,"creation_date":1625232561,"answer_id":68226065,"question_id":60097275,"body_markdown":"You should calculate actual price first and with the help of that calculate sales tax rate\r\nand instead of using this\r\n`salesTax = SALES_TAX_RATE * price;\r\n actualPrice = price - salesTax;`\r\n\r\ncalculate using this: \r\n`actual_price = price / 1.07;\r\ntax_price = price - actual_price;`\r\n\r\n1.07 came from dividing tax % with 100 and adding 1 to it(you can do this to any amount of %)\r\n\r\n","title":"Calculate sales tax according to the price","body":"<p>You should calculate actual price first and with the help of that calculate sales tax rate\nand instead of using this\n<code>salesTax = SALES_TAX_RATE * price; actualPrice = price - salesTax;</code></p>\n<p>calculate using this:\n<code>actual_price = price / 1.07; tax_price = price - actual_price;</code></p>\n<p>1.07 came from dividing tax % with 100 and adding 1 to it(you can do this to any amount of %)</p>\n"},{"comments":[{"owner":{"account_id":13774089,"reputation":2593,"user_id":9940820,"display_name":"AlexT"},"score":0,"creation_date":1649504549,"post_id":71773912,"comment_id":126895535,"body_markdown":"re-read the question please. You are doing the exact same mistake OP did in their function. OP isn&#39;t asking how to add tax, but how to extract tax.","body":"re-read the question please. You are doing the exact same mistake OP did in their function. OP isn&#39;t asking how to add tax, but how to extract tax."}],"tags":[],"owner":{"account_id":14304498,"reputation":1,"user_id":12576163,"display_name":"anonymous164"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649538761,"creation_date":1649281056,"answer_id":71773912,"question_id":60097275,"body_markdown":"I came across something similar and used this logic. You need to divide the sales tax by 100 like 7/100 with 7 being the percentage of your tax variable or you can multiply by .01 then take the result of that and add it to your variable&#39;s total value. 1% is .01 of 100%. So 7% would be .07 multiplied by your variable and added to the total you are trying to calculate. If you want precision and not rounded to the nearest integer then just set parameters on the Math.round function or don&#39;t even use it at all.     \r\n\r\n```java\r\npublic static void solve(double meal_cost, int tip_percent, int tax_percent) {\r\n    double tip = Math.round((tip_percent * .01) * meal_cost);\r\n    double tax = Math.round((tax_percent * .01) * meal_cost);\r\n    int total_cost = (int)(meal_cost + tip + tax);\r\n    System.out.println(total_cost);\r\n}\r\n```","title":"Calculate sales tax according to the price","body":"<p>I came across something similar and used this logic. You need to divide the sales tax by 100 like 7/100 with 7 being the percentage of your tax variable or you can multiply by .01 then take the result of that and add it to your variable's total value. 1% is .01 of 100%. So 7% would be .07 multiplied by your variable and added to the total you are trying to calculate. If you want precision and not rounded to the nearest integer then just set parameters on the Math.round function or don't even use it at all.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void solve(double meal_cost, int tip_percent, int tax_percent) {\n    double tip = Math.round((tip_percent * .01) * meal_cost);\n    double tax = Math.round((tax_percent * .01) * meal_cost);\n    int total_cost = (int)(meal_cost + tip + tax);\n    System.out.println(total_cost);\n}\n</code></pre>\n"}],"owner":{"account_id":17703621,"reputation":1,"user_id":12852754,"display_name":"Joseph Lau"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9014,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":4,"score":0,"last_activity_date":1694836990,"creation_date":1580999425,"question_id":60097275,"body_markdown":"I am trying to do on the java assignment and the scenario is as follows:\r\n\r\nA sales tax of 7% is levied on all goods and services consumed. It is also mandatory that all the price tags should include the sales tax. For example, if an item has a price tag of $107, the actual price is $100 and $7 goes to the sales tax.\r\n\r\nWrite a program using a loop to continuously input the tax-inclusive price (as &quot;double&quot;); compute the actual price and the sales tax (in &quot;double&quot;); and print the results rounded to 2 decimal places. The program shall terminate in response to input of -1; and print the total price, total actual price, and total sales tax.\r\n\r\nHowever, when I try to compute the sales tax, instead of showing this: \r\n\r\nEnter&#183;the&#183;tax-inclusive&#183;price&#183;in&#183;dollars&#183;(or&#183;-1&#183;to&#183;end): 107\r\n\r\nActual&#183;Price&#183;is: $100.00\r\n\r\nSales&#183;Tax&#183;is: $7.00\r\n\r\nMy calculation shows this: \r\n\r\nEnter the tax-inclusive price in dollars (or -1 to end): 107\r\n\r\nActual price is $99.51\r\n\r\nSales Tax is: $7.49\r\n\r\nI am not sure what&#39;s wrong with my coding. \r\n\r\n    import java.util.Scanner;\r\n    public class SalesTax{\r\n\r\n      public static void main(String[] args) {\r\n\r\n \r\n\r\n    // Declare constants\r\n          final double SALES_TAX_RATE = 0.07;\r\n      final int SENTINEL = -1;        // Terminating value for input\r\n      \r\n      // Declare variables\r\n      double price, actualPrice, salesTax;  // inputs and results\r\n      double totalPrice = 0.0, totalActualPrice = 0.0, totalSalesTax = 0.0;  // to accumulate\r\n      \r\n\r\n      // Read the first input to &quot;seed&quot; the while loop\r\n      Scanner in = new Scanner(System.in);\r\n      System.out.print(&quot;Enter the tax-inclusive price in dollars (or -1 to end): &quot;);\r\n      price =  in.nextDouble();\r\n\r\n      while (price != SENTINEL) {\r\n         // Compute the tax\r\n         \r\n         salesTax = SALES_TAX_RATE * price;\r\n          actualPrice = price - salesTax;\r\n         \r\n\r\n         // Accumulate into the totals\r\n         totalPrice = actualPrice + salesTax;\r\n         totalActualPrice = actualPrice + actualPrice; \r\n         totalSalesTax = salesTax + salesTax;\r\n         // Print results\r\n         System.out.println(&quot;Actual price is $&quot; + String.format(&quot;%.2f&quot;,actualPrice));\r\n         System.out.println(&quot;Sales Tax is: $&quot; + String.format(&quot;%.2f&quot;,salesTax));\r\n\r\n\r\n         // Read the next input\r\n         System.out.print(&quot;Enter the tax-inclusive price in dollars (or -1 to end): &quot;);\r\n         price =  in.nextDouble();\r\n         // Repeat the loop body, only if the input is not the sentinel value.\r\n         // Take note that you need to repeat these two statements inside/outside the loop!\r\n      }\r\n      // print totals\r\n      System.out.println(&quot;Total price is: &quot; + String.format(&quot;%.2f&quot;,totalPrice));\r\n      System.out.println(&quot;Total Actual Price is: &quot; + String.format(&quot;%.2f&quot;,totalActualPrice));\r\n      System.out.println(&quot;Total sales tax is: &quot; + String.format(&quot;%.2f&quot;,totalSalesTax));\r\n      \r\n\r\n \r\n\r\n      }\r\n    }\r\n\r\n\r\n\r\n\r\nAny help would be appreciated. Thank you!","title":"Calculate sales tax according to the price","body":"<p>I am trying to do on the java assignment and the scenario is as follows:</p>\n\n<p>A sales tax of 7% is levied on all goods and services consumed. It is also mandatory that all the price tags should include the sales tax. For example, if an item has a price tag of $107, the actual price is $100 and $7 goes to the sales tax.</p>\n\n<p>Write a program using a loop to continuously input the tax-inclusive price (as \"double\"); compute the actual price and the sales tax (in \"double\"); and print the results rounded to 2 decimal places. The program shall terminate in response to input of -1; and print the total price, total actual price, and total sales tax.</p>\n\n<p>However, when I try to compute the sales tax, instead of showing this: </p>\n\n<p>Enter·the·tax-inclusive·price·in·dollars·(or·-1·to·end): 107</p>\n\n<p>Actual·Price·is: $100.00</p>\n\n<p>Sales·Tax·is: $7.00</p>\n\n<p>My calculation shows this: </p>\n\n<p>Enter the tax-inclusive price in dollars (or -1 to end): 107</p>\n\n<p>Actual price is $99.51</p>\n\n<p>Sales Tax is: $7.49</p>\n\n<p>I am not sure what's wrong with my coding. </p>\n\n<pre><code>import java.util.Scanner;\npublic class SalesTax{\n\n  public static void main(String[] args) {\n\n\n\n// Declare constants\n      final double SALES_TAX_RATE = 0.07;\n  final int SENTINEL = -1;        // Terminating value for input\n\n  // Declare variables\n  double price, actualPrice, salesTax;  // inputs and results\n  double totalPrice = 0.0, totalActualPrice = 0.0, totalSalesTax = 0.0;  // to accumulate\n\n\n  // Read the first input to \"seed\" the while loop\n  Scanner in = new Scanner(System.in);\n  System.out.print(\"Enter the tax-inclusive price in dollars (or -1 to end): \");\n  price =  in.nextDouble();\n\n  while (price != SENTINEL) {\n     // Compute the tax\n\n     salesTax = SALES_TAX_RATE * price;\n      actualPrice = price - salesTax;\n\n\n     // Accumulate into the totals\n     totalPrice = actualPrice + salesTax;\n     totalActualPrice = actualPrice + actualPrice; \n     totalSalesTax = salesTax + salesTax;\n     // Print results\n     System.out.println(\"Actual price is $\" + String.format(\"%.2f\",actualPrice));\n     System.out.println(\"Sales Tax is: $\" + String.format(\"%.2f\",salesTax));\n\n\n     // Read the next input\n     System.out.print(\"Enter the tax-inclusive price in dollars (or -1 to end): \");\n     price =  in.nextDouble();\n     // Repeat the loop body, only if the input is not the sentinel value.\n     // Take note that you need to repeat these two statements inside/outside the loop!\n  }\n  // print totals\n  System.out.println(\"Total price is: \" + String.format(\"%.2f\",totalPrice));\n  System.out.println(\"Total Actual Price is: \" + String.format(\"%.2f\",totalActualPrice));\n  System.out.println(\"Total sales tax is: \" + String.format(\"%.2f\",totalSalesTax));\n\n\n\n\n  }\n}\n</code></pre>\n\n<p>Any help would be appreciated. Thank you!</p>\n"},{"tags":["java","sql-server","hibernate","sql-server-2012","mssql-jdbc"],"comments":[{"owner":{"account_id":4713195,"reputation":33148,"user_id":3813116,"display_name":"Sean Lange"},"score":1,"creation_date":1693315773,"post_id":76998683,"comment_id":135742259,"body_markdown":"Without the ability to run this you are expecting people to be human compilers, a task we are not very good at. You need to provide enough context and content so others have a chance at helping you here.","body":"Without the ability to run this you are expecting people to be human compilers, a task we are not very good at. You need to provide enough context and content so others have a chance at helping you here."}],"owner":{"account_id":12518803,"reputation":231,"user_id":9110949,"display_name":"aruntheimperfect"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":107,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694835481,"creation_date":1693298844,"question_id":76998683,"body_markdown":"Team , \r\nI&#39;m facing a strange issue in my project. let me explain the tech ladder that I&#39;m using \r\n\r\n**JDBC Version : 7.4.1.jre11\r\nMSSQL Version : Microsoft SQL Server 2016 (SP3-GDR) (KB5021129) - 13.0.6430.49 (X64) - Standard Edition (64-bit) on Windows Server 2016 Datacenter\r\nFramework : hibernate-core 5.4.33**\r\n\r\nIssue : I have method which takes list of codes and process query in table. I have only 10 items in the list. When the method executes I&#39;m getting the error which I mentioned in the subject , but the same code working fine in my localhost.  \r\n\r\nDetail Explanation : When we deploy the code its working for a day or two and then we started getting the error. We are not sure why its happening maybe the error message is misleading. can anyone help me to understand what&#39;s going on ? \r\n\r\nBelow is the code : \r\n\r\n    public List&lt;WorkOrderMaterial&gt; getWorkOrdersMaterialList(Token token, List&lt;String&gt; workOrderCodes,\r\n                                                             Timestamp lastModified) throws DaoException {\r\n        LOGGER.info(&quot;Method : getWorkOrdersMaterialList() WO List Size :{}&quot;,workOrderCodes.size());\r\n        List&lt;WorkOrderMaterial&gt; workOrderMaterialList = new ArrayList&lt;&gt;();\r\n        Session tenantSession = null;\r\n        Query query = null;\r\n        try {\r\n            tenantSession = openTenantSessionReadUncommitted(token);\r\n            if (lastModified != null) {\r\n                WORKORDERS_MATERIALS = WORKORDERS_MATERIALS\r\n                        + &quot; and st.lastModified &gt;= CONVERT(datetime, :lastModified)&quot;;\r\n\r\n                query = tenantSession.createNativeQuery(WORKORDERS_MATERIALS, WorkOrderMaterial.class);\r\n                query.setParameterList(&quot;workordercodes&quot;, workOrderCodes);\r\n                query.setParameter(&quot;companyCode&quot;, token.getCompanyContext());\r\n                query.setParameter(&quot;lastModified&quot;, lastModified.toString());\r\n            } else {\r\n                query = tenantSession.createNativeQuery(WORKORDERS_MATERIALS, WorkOrderMaterial.class);\r\n                query.setParameterList(&quot;workordercodes&quot;, workOrderCodes);\r\n                query.setParameter(&quot;companyCode&quot;, token.getCompanyContext());\r\n\r\n            }\r\n            workOrderMaterialList = query.list();\r\n        } catch (Exception e) {\r\n            LOGGER.error(&quot;Exception retrieving Work Order Material method getWorkOrdersMaterialList(): {}&quot;, e.getMessage(),e);\r\n            throw new DaoException(&quot;Exception retrieving Work Order Material History&quot;, e);\r\n        } finally {\r\n            closeTenantSession(tenantSession);\r\n        }\r\n        return workOrderMaterialList;\r\n    }\r\n\r\n\r\nand below is the full error trace :\r\n\r\nException retrieving Work Order Material method getWorkOrdersMaterialList(): org.hibernate.exception.SQLGrammarException: could not extract ResultSet\r\n9/15/2023, 12:28:42.000 PM javax.persistence.PersistenceException: org.hibernate.exception.SQLGrammarException: could not extract ResultSet\r\n9/15/2023, 12:28:42.869 PM at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:154)\r\n9/15/2023, 12:28:42.869 PM at org.hibernate.query.internal.AbstractProducedQuery.list(AbstractProducedQuery.java:1613)\r\n9/15/2023, 12:28:42.869 PM at com.dexterchaney.fieldtech.infrastructure.database.WorkOrderMaterialDaoImpl.getWorkOrdersMaterialList(WorkOrderMaterialDaoImpl.java:894)\r\n9/15/2023, 12:28:42.869 PM at com.dexterchaney.fieldtech.core.service.WorkOrderMaterialServiceImpl.getWorkOrdersMaterialList(WorkOrderMaterialServiceImpl.java:1270)\r\n9/15/2023, 12:28:42.869 PM at com.dexterchaney.fieldtech.resources.MaterialsResource.getWorkOrdersMaterial(MaterialsResource.java:792)\r\n9/15/2023, 12:28:42.869 PM at com.dexterchaney.fieldtech.resources.MaterialsResource.getAllWorkOrdersMaterialHistory(MaterialsResource.java:889)\r\n9/15/2023, 12:28:42.869 PM at com.dexterchaney.fieldtech.resources.MaterialsResource.getWorkOrderMaterialHistory(MaterialsResource.java:249)\r\n9/15/2023, 12:28:42.869 PM at jdk.internal.reflect.GeneratedMethodAccessor709.invoke(Unknown Source)\r\n9/15/2023, 12:28:42.869 PM at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n9/15/2023, 12:28:42.869 PM at java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n9/15/2023, 12:28:42.869 PM at org.glassfish.jersey.server.model.internal.ResourceMethodInvocationHandlerFactory.lambda$static$0(ResourceMethodInvocationHandlerFactory.java:52)\r\n9/15/2023, 12:28:42.869 PM at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher$1.run(AbstractJavaResourceMethodDispatcher.java:124)\r\n9/15/2023, 12:28:42.869 PM at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.invoke(AbstractJavaResourceMethodDispatcher.java:167)\r\n9/15/2023, 12:28:42.869 PM at org.glassfish.jersey.server.model.internal.JavaResourceMethodDispatcherProvider$ResponseOutInvoker.doDispatch(JavaResourceMethodDispatcherProvider.java:176)\r\n9/15/2023, 12:28:42.869 PM at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.dispatch(AbstractJavaResourceMethodDispatcher.java:79)\r\n9/15/2023, 12:28:42.869 PM at org.glassfish.jersey.server.model.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:475)\r\n9/15/2023, 12:28:42.869 PM at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:397)\r\n9/15/2023, 12:28:42.869 PM at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:81)\r\n9/15/2023, 12:28:42.869 PM at org.glassfish.jersey.server.ServerRuntime$1.run(ServerRuntime.java:255)\r\n9/15/2023, 12:28:42.869 PM at org.glassfish.jersey.internal.Errors$1.call(Errors.java:248)\r\n9/15/2023, 12:28:42.869 PM at org.glassfish.jersey.internal.Errors$1.call(Errors.java:244)\r\n9/15/2023, 12:28:42.869 PM at org.glassfish.jersey.internal.Errors.process(Errors.java:292)\r\n9/15/2023, 12:28:42.869 PM at org.glassfish.jersey.internal.Errors.process(Errors.java:274)\r\n9/15/2023, 12:28:42.869 PM at org.glassfish.jersey.internal.Errors.process(Errors.java:244)\r\n9/15/2023, 12:28:42.869 PM at org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:265)\r\n9/15/2023, 12:28:42.869 PM at org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:234)\r\n9/15/2023, 12:28:42.869 PM at org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:680)\r\n9/15/2023, 12:28:42.869 PM at org.glassfish.jersey.servlet.WebComponent.serviceImpl(WebComponent.java:394)\r\n9/15/2023, 12:28:42.869 PM at org.glassfish.jersey.servlet.WebComponent.service(WebComponent.java:346)\r\n9/15/2023, 12:28:42.869 PM at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:366)\r\n9/15/2023, 12:28:42.869 PM at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:319)\r\n9/15/2023, 12:28:42.869 PM at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:205)\r\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:799)\r\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.servlet.ServletHandler$ChainEnd.doFilter(ServletHandler.java:1656)\r\n9/15/2023, 12:28:42.869 PM at io.dropwizard.servlets.ThreadNameFilter.doFilter(ThreadNameFilter.java:35)\r\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:193)\r\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1626)\r\n9/15/2023, 12:28:42.869 PM at io.dropwizard.jersey.filter.AllowedMethodsFilter.handle(AllowedMethodsFilter.java:47)\r\n9/15/2023, 12:28:42.869 PM at io.dropwizard.jersey.filter.AllowedMethodsFilter.doFilter(AllowedMethodsFilter.java:41)\r\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:193)\r\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1626)\r\n9/15/2023, 12:28:42.869 PM at com.dexterchaney.fieldtech.security.SecurityHeaderResponseFilter.doFilter(SecurityHeaderResponseFilter.java:27)\r\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:193)\r\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1626)\r\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.servlets.CrossOriginFilter.handle(CrossOriginFilter.java:319)\r\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.servlets.CrossOriginFilter.doFilter(CrossOriginFilter.java:273)\r\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:193)\r\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1626)\r\n9/15/2023, 12:28:42.869 PM at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:89)\r\n9/15/2023, 12:28:42.869 PM at com.google.inject.servlet.ManagedFilterPipeline.dispatch(ManagedFilterPipeline.java:121)\r\n9/15/2023, 12:28:42.869 PM at com.google.inject.servlet.GuiceFilter.doFilter(GuiceFilter.java:133)\r\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:193)\r\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1626)\r\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:552)\r\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:233)\r\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1440)\r\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:188)\r\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:505)\r\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:186)\r\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1355)\r\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)\r\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:127)\r\n9/15/2023, 12:28:42.869 PM at com.codahale.metrics.jetty9.InstrumentedHandler.handle(InstrumentedHandler.java:313)\r\n9/15/2023, 12:28:42.869 PM at io.dropwizard.jetty.RoutingHandler.handle(RoutingHandler.java:52)\r\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.server.handler.gzip.GzipHandler.handle(GzipHandler.java:772)\r\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.server.handler.RequestLogHandler.handle(RequestLogHandler.java:54)\r\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.server.handler.StatisticsHandler.handle(StatisticsHandler.java:181)\r\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:127)\r\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.server.Server.handle(Server.java:516)\r\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.server.HttpChannel.lambda$handle$1(HttpChannel.java:487)\r\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.server.HttpChannel.dispatch(HttpChannel.java:732)\r\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:479)\r\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:277)\r\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:311)\r\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:105)\r\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.io.ChannelEndPoint$1.run(ChannelEndPoint.java:104)\r\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.runTask(EatWhatYouKill.java:338)\r\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.doProduce(EatWhatYouKill.java:315)\r\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.tryProduce(EatWhatYouKill.java:173)\r\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.run(EatWhatYouKill.java:131)\r\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run(ReservedThreadExecutor.java:409)\r\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:883)\r\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run(QueuedThreadPool.java:1034)\r\n9/15/2023, 12:28:42.869 PM at java.base/java.lang.Thread.run(Unknown Source)\r\n9/15/2023, 12:28:42.869 PM Caused by: org.hibernate.exception.SQLGrammarException: could not extract ResultSet\r\n9/15/2023, 12:28:42.869 PM at org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:103)\r\n9/15/2023, 12:28:42.869 PM at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:42)\r\n9/15/2023, 12:28:42.870 PM at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:113)\r\n9/15/2023, 12:28:42.870 PM at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:99)\r\n9/15/2023, 12:28:42.870 PM at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.extract(ResultSetReturnImpl.java:67)\r\n9/15/2023, 12:28:42.870 PM at org.hibernate.loader.Loader.getResultSet(Loader.java:2297)\r\n9/15/2023, 12:28:42.870 PM at org.hibernate.loader.Loader.executeQueryStatement(Loader.java:2050)\r\n9/15/2023, 12:28:42.870 PM at org.hibernate.loader.Loader.executeQueryStatement(Loader.java:2012)\r\n9/15/2023, 12:28:42.870 PM at org.hibernate.loader.Loader.doQuery(Loader.java:948)\r\n9/15/2023, 12:28:42.870 PM at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:349)\r\n9/15/2023, 12:28:42.870 PM at org.hibernate.loader.Loader.doList(Loader.java:2843)\r\n9/15/2023, 12:28:42.870 PM at org.hibernate.loader.Loader.doList(Loader.java:2825)\r\n9/15/2023, 12:28:42.870 PM at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2657)\r\n9/15/2023, 12:28:42.870 PM at org.hibernate.loader.Loader.list(Loader.java:2652)\r\n9/15/2023, 12:28:42.870 PM at org.hibernate.loader.custom.CustomLoader.list(CustomLoader.java:338)\r\n9/15/2023, 12:28:42.870 PM at org.hibernate.internal.SessionImpl.listCustomQuery(SessionImpl.java:2141)\r\n9/15/2023, 12:28:42.870 PM at org.hibernate.internal.AbstractSharedSessionContract.list(AbstractSharedSessionContract.java:1169)\r\n9/15/2023, 12:28:42.000 PM at org.hibernate.query.internal.NativeQueryImpl.doList(NativeQueryImpl.java:176)\r\n9/15/2023, 12:28:42.870 PM at org.hibernate.query.internal.AbstractProducedQuery.list(AbstractProducedQuery.java:1604)\r\n9/15/2023, 12:28:42.870 PM ... 82 common frames omitted\r\n9/15/2023, 12:28:42.870 PM Caused by: com.microsoft.sqlserver.jdbc.SQLServerException: The incoming request has too many parameters. The server supports a maximum of 2100 parameters. Reduce the number of parameters and resend the request.\r\n9/15/2023, 12:28:42.870 PM at com.microsoft.sqlserver.jdbc.SQLServerException.makeFromDatabaseError(SQLServerException.java:262)\r\n9/15/2023, 12:28:42.870 PM at com.microsoft.sqlserver.jdbc.SQLServerStatement.getNextResult(SQLServerStatement.java:1624)\r\n9/15/2023, 12:28:42.870 PM at com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement.doExecutePreparedStatement(SQLServerPreparedStatement.java:594)\r\n9/15/2023, 12:28:42.870 PM at com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement$PrepStmtExecCmd.doExecute(SQLServerPreparedStatement.java:524)\r\n9/15/2023, 12:28:42.870 PM at com.microsoft.sqlserver.jdbc.TDSCommand.execute(IOBuffer.java:7194)\r\n9/15/2023, 12:28:42.870 PM at com.microsoft.sqlserver.jdbc.SQLServerConnection.executeCommand(SQLServerConnection.java:2979)\r\n9/15/2023, 12:28:42.870 PM at com.microsoft.sqlserver.jdbc.SQLServerStatement.executeCommand(SQLServerStatement.java:248)\r\n9/15/2023, 12:28:42.870 PM at com.microsoft.sqlserver.jdbc.SQLServerStatement.executeStatement(SQLServerStatement.java:223)\r\n9/15/2023, 12:28:42.870 PM at com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement.executeQuery(SQLServerPreparedStatement.java:446)\r\n9/15/2023, 12:28:42.870 PM at com.mchange.v2.c3p0.impl.NewProxyPreparedStatement.executeQuery(NewProxyPreparedStatement.java:431)\r\n9/15/2023, 12:28:42.870 PM at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.extract(ResultSetReturnImpl.java:57)\r\n9/15/2023, 12:28:42.870 PM ... 96 common frames omitted\r\n","title":"The incoming request has too many parameters. The server supports a maximum of 2100 parameters. Reduce the number of parameters and resend the request","body":"<p>Team ,\nI'm facing a strange issue in my project. let me explain the tech ladder that I'm using</p>\n<p><strong>JDBC Version : 7.4.1.jre11\nMSSQL Version : Microsoft SQL Server 2016 (SP3-GDR) (KB5021129) - 13.0.6430.49 (X64) - Standard Edition (64-bit) on Windows Server 2016 Datacenter\nFramework : hibernate-core 5.4.33</strong></p>\n<p>Issue : I have method which takes list of codes and process query in table. I have only 10 items in the list. When the method executes I'm getting the error which I mentioned in the subject , but the same code working fine in my localhost.</p>\n<p>Detail Explanation : When we deploy the code its working for a day or two and then we started getting the error. We are not sure why its happening maybe the error message is misleading. can anyone help me to understand what's going on ?</p>\n<p>Below is the code :</p>\n<pre><code>public List&lt;WorkOrderMaterial&gt; getWorkOrdersMaterialList(Token token, List&lt;String&gt; workOrderCodes,\n                                                         Timestamp lastModified) throws DaoException {\n    LOGGER.info(&quot;Method : getWorkOrdersMaterialList() WO List Size :{}&quot;,workOrderCodes.size());\n    List&lt;WorkOrderMaterial&gt; workOrderMaterialList = new ArrayList&lt;&gt;();\n    Session tenantSession = null;\n    Query query = null;\n    try {\n        tenantSession = openTenantSessionReadUncommitted(token);\n        if (lastModified != null) {\n            WORKORDERS_MATERIALS = WORKORDERS_MATERIALS\n                    + &quot; and st.lastModified &gt;= CONVERT(datetime, :lastModified)&quot;;\n\n            query = tenantSession.createNativeQuery(WORKORDERS_MATERIALS, WorkOrderMaterial.class);\n            query.setParameterList(&quot;workordercodes&quot;, workOrderCodes);\n            query.setParameter(&quot;companyCode&quot;, token.getCompanyContext());\n            query.setParameter(&quot;lastModified&quot;, lastModified.toString());\n        } else {\n            query = tenantSession.createNativeQuery(WORKORDERS_MATERIALS, WorkOrderMaterial.class);\n            query.setParameterList(&quot;workordercodes&quot;, workOrderCodes);\n            query.setParameter(&quot;companyCode&quot;, token.getCompanyContext());\n\n        }\n        workOrderMaterialList = query.list();\n    } catch (Exception e) {\n        LOGGER.error(&quot;Exception retrieving Work Order Material method getWorkOrdersMaterialList(): {}&quot;, e.getMessage(),e);\n        throw new DaoException(&quot;Exception retrieving Work Order Material History&quot;, e);\n    } finally {\n        closeTenantSession(tenantSession);\n    }\n    return workOrderMaterialList;\n}\n</code></pre>\n<p>and below is the full error trace :</p>\n<p>Exception retrieving Work Order Material method getWorkOrdersMaterialList(): org.hibernate.exception.SQLGrammarException: could not extract ResultSet\n9/15/2023, 12:28:42.000 PM javax.persistence.PersistenceException: org.hibernate.exception.SQLGrammarException: could not extract ResultSet\n9/15/2023, 12:28:42.869 PM at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:154)\n9/15/2023, 12:28:42.869 PM at org.hibernate.query.internal.AbstractProducedQuery.list(AbstractProducedQuery.java:1613)\n9/15/2023, 12:28:42.869 PM at com.dexterchaney.fieldtech.infrastructure.database.WorkOrderMaterialDaoImpl.getWorkOrdersMaterialList(WorkOrderMaterialDaoImpl.java:894)\n9/15/2023, 12:28:42.869 PM at com.dexterchaney.fieldtech.core.service.WorkOrderMaterialServiceImpl.getWorkOrdersMaterialList(WorkOrderMaterialServiceImpl.java:1270)\n9/15/2023, 12:28:42.869 PM at com.dexterchaney.fieldtech.resources.MaterialsResource.getWorkOrdersMaterial(MaterialsResource.java:792)\n9/15/2023, 12:28:42.869 PM at com.dexterchaney.fieldtech.resources.MaterialsResource.getAllWorkOrdersMaterialHistory(MaterialsResource.java:889)\n9/15/2023, 12:28:42.869 PM at com.dexterchaney.fieldtech.resources.MaterialsResource.getWorkOrderMaterialHistory(MaterialsResource.java:249)\n9/15/2023, 12:28:42.869 PM at jdk.internal.reflect.GeneratedMethodAccessor709.invoke(Unknown Source)\n9/15/2023, 12:28:42.869 PM at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n9/15/2023, 12:28:42.869 PM at java.base/java.lang.reflect.Method.invoke(Unknown Source)\n9/15/2023, 12:28:42.869 PM at org.glassfish.jersey.server.model.internal.ResourceMethodInvocationHandlerFactory.lambda$static$0(ResourceMethodInvocationHandlerFactory.java:52)\n9/15/2023, 12:28:42.869 PM at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher$1.run(AbstractJavaResourceMethodDispatcher.java:124)\n9/15/2023, 12:28:42.869 PM at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.invoke(AbstractJavaResourceMethodDispatcher.java:167)\n9/15/2023, 12:28:42.869 PM at org.glassfish.jersey.server.model.internal.JavaResourceMethodDispatcherProvider$ResponseOutInvoker.doDispatch(JavaResourceMethodDispatcherProvider.java:176)\n9/15/2023, 12:28:42.869 PM at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.dispatch(AbstractJavaResourceMethodDispatcher.java:79)\n9/15/2023, 12:28:42.869 PM at org.glassfish.jersey.server.model.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:475)\n9/15/2023, 12:28:42.869 PM at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:397)\n9/15/2023, 12:28:42.869 PM at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:81)\n9/15/2023, 12:28:42.869 PM at org.glassfish.jersey.server.ServerRuntime$1.run(ServerRuntime.java:255)\n9/15/2023, 12:28:42.869 PM at org.glassfish.jersey.internal.Errors$1.call(Errors.java:248)\n9/15/2023, 12:28:42.869 PM at org.glassfish.jersey.internal.Errors$1.call(Errors.java:244)\n9/15/2023, 12:28:42.869 PM at org.glassfish.jersey.internal.Errors.process(Errors.java:292)\n9/15/2023, 12:28:42.869 PM at org.glassfish.jersey.internal.Errors.process(Errors.java:274)\n9/15/2023, 12:28:42.869 PM at org.glassfish.jersey.internal.Errors.process(Errors.java:244)\n9/15/2023, 12:28:42.869 PM at org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:265)\n9/15/2023, 12:28:42.869 PM at org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:234)\n9/15/2023, 12:28:42.869 PM at org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:680)\n9/15/2023, 12:28:42.869 PM at org.glassfish.jersey.servlet.WebComponent.serviceImpl(WebComponent.java:394)\n9/15/2023, 12:28:42.869 PM at org.glassfish.jersey.servlet.WebComponent.service(WebComponent.java:346)\n9/15/2023, 12:28:42.869 PM at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:366)\n9/15/2023, 12:28:42.869 PM at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:319)\n9/15/2023, 12:28:42.869 PM at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:205)\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:799)\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.servlet.ServletHandler$ChainEnd.doFilter(ServletHandler.java:1656)\n9/15/2023, 12:28:42.869 PM at io.dropwizard.servlets.ThreadNameFilter.doFilter(ThreadNameFilter.java:35)\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:193)\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1626)\n9/15/2023, 12:28:42.869 PM at io.dropwizard.jersey.filter.AllowedMethodsFilter.handle(AllowedMethodsFilter.java:47)\n9/15/2023, 12:28:42.869 PM at io.dropwizard.jersey.filter.AllowedMethodsFilter.doFilter(AllowedMethodsFilter.java:41)\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:193)\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1626)\n9/15/2023, 12:28:42.869 PM at com.dexterchaney.fieldtech.security.SecurityHeaderResponseFilter.doFilter(SecurityHeaderResponseFilter.java:27)\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:193)\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1626)\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.servlets.CrossOriginFilter.handle(CrossOriginFilter.java:319)\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.servlets.CrossOriginFilter.doFilter(CrossOriginFilter.java:273)\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:193)\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1626)\n9/15/2023, 12:28:42.869 PM at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:89)\n9/15/2023, 12:28:42.869 PM at com.google.inject.servlet.ManagedFilterPipeline.dispatch(ManagedFilterPipeline.java:121)\n9/15/2023, 12:28:42.869 PM at com.google.inject.servlet.GuiceFilter.doFilter(GuiceFilter.java:133)\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:193)\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1626)\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:552)\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:233)\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1440)\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:188)\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:505)\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:186)\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1355)\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:127)\n9/15/2023, 12:28:42.869 PM at com.codahale.metrics.jetty9.InstrumentedHandler.handle(InstrumentedHandler.java:313)\n9/15/2023, 12:28:42.869 PM at io.dropwizard.jetty.RoutingHandler.handle(RoutingHandler.java:52)\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.server.handler.gzip.GzipHandler.handle(GzipHandler.java:772)\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.server.handler.RequestLogHandler.handle(RequestLogHandler.java:54)\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.server.handler.StatisticsHandler.handle(StatisticsHandler.java:181)\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:127)\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.server.Server.handle(Server.java:516)\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.server.HttpChannel.lambda$handle$1(HttpChannel.java:487)\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.server.HttpChannel.dispatch(HttpChannel.java:732)\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:479)\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:277)\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:311)\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:105)\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.io.ChannelEndPoint$1.run(ChannelEndPoint.java:104)\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.runTask(EatWhatYouKill.java:338)\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.doProduce(EatWhatYouKill.java:315)\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.tryProduce(EatWhatYouKill.java:173)\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.run(EatWhatYouKill.java:131)\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run(ReservedThreadExecutor.java:409)\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:883)\n9/15/2023, 12:28:42.869 PM at org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run(QueuedThreadPool.java:1034)\n9/15/2023, 12:28:42.869 PM at java.base/java.lang.Thread.run(Unknown Source)\n9/15/2023, 12:28:42.869 PM Caused by: org.hibernate.exception.SQLGrammarException: could not extract ResultSet\n9/15/2023, 12:28:42.869 PM at org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:103)\n9/15/2023, 12:28:42.869 PM at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:42)\n9/15/2023, 12:28:42.870 PM at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:113)\n9/15/2023, 12:28:42.870 PM at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:99)\n9/15/2023, 12:28:42.870 PM at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.extract(ResultSetReturnImpl.java:67)\n9/15/2023, 12:28:42.870 PM at org.hibernate.loader.Loader.getResultSet(Loader.java:2297)\n9/15/2023, 12:28:42.870 PM at org.hibernate.loader.Loader.executeQueryStatement(Loader.java:2050)\n9/15/2023, 12:28:42.870 PM at org.hibernate.loader.Loader.executeQueryStatement(Loader.java:2012)\n9/15/2023, 12:28:42.870 PM at org.hibernate.loader.Loader.doQuery(Loader.java:948)\n9/15/2023, 12:28:42.870 PM at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:349)\n9/15/2023, 12:28:42.870 PM at org.hibernate.loader.Loader.doList(Loader.java:2843)\n9/15/2023, 12:28:42.870 PM at org.hibernate.loader.Loader.doList(Loader.java:2825)\n9/15/2023, 12:28:42.870 PM at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2657)\n9/15/2023, 12:28:42.870 PM at org.hibernate.loader.Loader.list(Loader.java:2652)\n9/15/2023, 12:28:42.870 PM at org.hibernate.loader.custom.CustomLoader.list(CustomLoader.java:338)\n9/15/2023, 12:28:42.870 PM at org.hibernate.internal.SessionImpl.listCustomQuery(SessionImpl.java:2141)\n9/15/2023, 12:28:42.870 PM at org.hibernate.internal.AbstractSharedSessionContract.list(AbstractSharedSessionContract.java:1169)\n9/15/2023, 12:28:42.000 PM at org.hibernate.query.internal.NativeQueryImpl.doList(NativeQueryImpl.java:176)\n9/15/2023, 12:28:42.870 PM at org.hibernate.query.internal.AbstractProducedQuery.list(AbstractProducedQuery.java:1604)\n9/15/2023, 12:28:42.870 PM ... 82 common frames omitted\n9/15/2023, 12:28:42.870 PM Caused by: com.microsoft.sqlserver.jdbc.SQLServerException: The incoming request has too many parameters. The server supports a maximum of 2100 parameters. Reduce the number of parameters and resend the request.\n9/15/2023, 12:28:42.870 PM at com.microsoft.sqlserver.jdbc.SQLServerException.makeFromDatabaseError(SQLServerException.java:262)\n9/15/2023, 12:28:42.870 PM at com.microsoft.sqlserver.jdbc.SQLServerStatement.getNextResult(SQLServerStatement.java:1624)\n9/15/2023, 12:28:42.870 PM at com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement.doExecutePreparedStatement(SQLServerPreparedStatement.java:594)\n9/15/2023, 12:28:42.870 PM at com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement$PrepStmtExecCmd.doExecute(SQLServerPreparedStatement.java:524)\n9/15/2023, 12:28:42.870 PM at com.microsoft.sqlserver.jdbc.TDSCommand.execute(IOBuffer.java:7194)\n9/15/2023, 12:28:42.870 PM at com.microsoft.sqlserver.jdbc.SQLServerConnection.executeCommand(SQLServerConnection.java:2979)\n9/15/2023, 12:28:42.870 PM at com.microsoft.sqlserver.jdbc.SQLServerStatement.executeCommand(SQLServerStatement.java:248)\n9/15/2023, 12:28:42.870 PM at com.microsoft.sqlserver.jdbc.SQLServerStatement.executeStatement(SQLServerStatement.java:223)\n9/15/2023, 12:28:42.870 PM at com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement.executeQuery(SQLServerPreparedStatement.java:446)\n9/15/2023, 12:28:42.870 PM at com.mchange.v2.c3p0.impl.NewProxyPreparedStatement.executeQuery(NewProxyPreparedStatement.java:431)\n9/15/2023, 12:28:42.870 PM at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.extract(ResultSetReturnImpl.java:57)\n9/15/2023, 12:28:42.870 PM ... 96 common frames omitted</p>\n"},{"tags":["java","generics","terminology","type-inference","type-erasure"],"comments":[{"owner":{"account_id":1114067,"reputation":196801,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":0,"creation_date":1437902371,"post_id":31635252,"comment_id":51217479,"body_markdown":"Only your second example involves type inference, and of the most trivial kind. It gets far more sophisticated with lambdas in Java 8.","body":"Only your second example involves type inference, and of the most trivial kind. It gets far more sophisticated with lambdas in Java 8."}],"answers":[{"tags":[],"owner":{"account_id":1924671,"reputation":94541,"user_id":1735406,"accept_rate":95,"display_name":"Maroun"},"comment_count":0,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1437903007,"creation_date":1437901801,"answer_id":31635341,"question_id":31635252,"body_markdown":"They are both compile-time operations.\r\n\r\nType erasure is translation from generic Java source code back into regular Java code (removes `T`, `A` and any other paramterized types).\r\n\r\nType inference can happen when a generic method is invoked or when a generic type object is created. For example, if you \r\n\r\n    class Box&lt;T&gt; {\r\n        ...\r\n    }\r\n\r\nThen when you write\r\n\r\n    Box&lt;String&gt; box = new Box&lt;&gt;();\r\n    // type parameter inferred","title":"Java - What&#39;s the difference between type erasure and type inference?","body":"<p>They are both compile-time operations.</p>\n\n<p>Type erasure is translation from generic Java source code back into regular Java code (removes <code>T</code>, <code>A</code> and any other paramterized types).</p>\n\n<p>Type inference can happen when a generic method is invoked or when a generic type object is created. For example, if you </p>\n\n<pre><code>class Box&lt;T&gt; {\n    ...\n}\n</code></pre>\n\n<p>Then when you write</p>\n\n<pre><code>Box&lt;String&gt; box = new Box&lt;&gt;();\n// type parameter inferred\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1986182,"reputation":1983,"user_id":1781343,"display_name":"Monads are like..."},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1437902274,"creation_date":1437901883,"answer_id":31635348,"question_id":31635252,"body_markdown":"Both of them serve completely different needs:\r\n\r\nType erasure is like you said and is needed because java byte code is not generic hence you need to remove the typing. This isn&#39;t a feature that helps you code it&#39;s just an automatic compile time change that has to happen for the jvm to understand your code.\r\n\r\nType inference on the other hand is the compiler being &quot;smart&quot; and knowing what type you were referring to even though you didn&#39;t actually write it. Just like in your example the compiler knows that `Box&lt;&gt;()` actually means `Box&lt;String&gt;()` and lets you continue coding with type safety as if you wrote `Box&lt;String&gt;`. This way you can write less verbose code and the compiler would still understand it.\r\n\r\nYou can understand from all of this that generics in Java are actually mostly a compile time thing that lets you code with more safety and helps you find errors in compile-time rather than run-time.","title":"Java - What&#39;s the difference between type erasure and type inference?","body":"<p>Both of them serve completely different needs:</p>\n\n<p>Type erasure is like you said and is needed because java byte code is not generic hence you need to remove the typing. This isn't a feature that helps you code it's just an automatic compile time change that has to happen for the jvm to understand your code.</p>\n\n<p>Type inference on the other hand is the compiler being \"smart\" and knowing what type you were referring to even though you didn't actually write it. Just like in your example the compiler knows that <code>Box&lt;&gt;()</code> actually means <code>Box&lt;String&gt;()</code> and lets you continue coding with type safety as if you wrote <code>Box&lt;String&gt;</code>. This way you can write less verbose code and the compiler would still understand it.</p>\n\n<p>You can understand from all of this that generics in Java are actually mostly a compile time thing that lets you code with more safety and helps you find errors in compile-time rather than run-time.</p>\n"},{"tags":[],"owner":{"account_id":1875874,"reputation":71921,"user_id":1697099,"accept_rate":100,"display_name":"Premraj"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694834393,"creation_date":1694834393,"answer_id":77116231,"question_id":31635252,"body_markdown":"**Key Differences:**\r\n\r\n**Focus**: Type erasure is concerned with what happens at compile-time and runtime when generic code is processed, specifically how type information is removed. Type inference is focused on how the compiler determines generic types based on context.\r\n\r\n**Purpose**: Type erasure is mainly about backward compatibility and ensuring that generic code can interoperate with non-generic code. Type inference is about improving code readability and reducing the need for explicit type parameter specifications.\r\n\r\n**Timing**: Type erasure occurs during the compilation process and affects the generated bytecode. Type inference is a feature of the compiler that determines generic types during the compilation process.\r\n\r\n","title":"Java - What&#39;s the difference between type erasure and type inference?","body":"<p><strong>Key Differences:</strong></p>\n<p><strong>Focus</strong>: Type erasure is concerned with what happens at compile-time and runtime when generic code is processed, specifically how type information is removed. Type inference is focused on how the compiler determines generic types based on context.</p>\n<p><strong>Purpose</strong>: Type erasure is mainly about backward compatibility and ensuring that generic code can interoperate with non-generic code. Type inference is about improving code readability and reducing the need for explicit type parameter specifications.</p>\n<p><strong>Timing</strong>: Type erasure occurs during the compilation process and affects the generated bytecode. Type inference is a feature of the compiler that determines generic types during the compilation process.</p>\n"}],"owner":{"account_id":1875874,"reputation":71921,"user_id":1697099,"accept_rate":100,"display_name":"Premraj"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":790,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":31635348,"answer_count":3,"score":1,"last_activity_date":1694834393,"creation_date":1437901076,"question_id":31635252,"body_markdown":"What&#39;s the difference between type erasure and type inference? Are they both compile-time operations?\r\n\r\n\r\n[**Type Erasure**:][1] which removes the generic type information at compile time process.\r\n\r\n- Example: `Box&lt;String&gt;` is translated to type `Box`, which is called the raw type.\r\n\r\nHow [Type Inference][2] is different from type Erasure?  \r\nBefore JDK 7:\r\n\r\n    Box&lt;String&gt; box=new Box&lt;String&gt;();\r\nFrom JDK 7:\r\n\r\n     Box&lt;String&gt; box=new Box&lt;&gt;();\r\n&gt;My guess the above examples are Type Inference. Is that right?\r\n\r\nIs `Type Inference` is opposite to `Type Erasure`?\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/java/generics/erasure.html\r\n  [2]: https://docs.oracle.com/javase/tutorial/java/generics/genTypeInference.html","title":"Java - What&#39;s the difference between type erasure and type inference?","body":"<p>What's the difference between type erasure and type inference? Are they both compile-time operations?</p>\n\n<p><a href=\"https://docs.oracle.com/javase/tutorial/java/generics/erasure.html\" rel=\"nofollow noreferrer\"><strong>Type Erasure</strong>:</a> which removes the generic type information at compile time process.</p>\n\n<ul>\n<li>Example: <code>Box&lt;String&gt;</code> is translated to type <code>Box</code>, which is called the raw type.</li>\n</ul>\n\n<p>How <a href=\"https://docs.oracle.com/javase/tutorial/java/generics/genTypeInference.html\" rel=\"nofollow noreferrer\">Type Inference</a> is different from type Erasure?<br>\nBefore JDK 7:</p>\n\n<pre><code>Box&lt;String&gt; box=new Box&lt;String&gt;();\n</code></pre>\n\n<p>From JDK 7:</p>\n\n<pre><code> Box&lt;String&gt; box=new Box&lt;&gt;();\n</code></pre>\n\n<blockquote>\n  <p>My guess the above examples are Type Inference. Is that right?</p>\n</blockquote>\n\n<p>Is <code>Type Inference</code> is opposite to <code>Type Erasure</code>?</p>\n"},{"tags":["java","frameworks","applet"],"comments":[{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1694820015,"post_id":77115737,"comment_id":135946202,"body_markdown":"This is some what more complicated then you give it credit for.  What I mean is, you have two states to manage (from -&gt; To; To -&gt; From).  A naive approach would just increment/decrement a delta repeatedly and while this would &quot;mostly&quot; work, the management of the process and adjusting the speed  isn&#39;t simple.  A &quot;better&quot; solution would be to make use of a time based time line - [for example](https://stackoverflow.com/questions/50539835/how-can-i-make-a-polygon-object-in-java-pulsate-like-the-chalice-in-the-atari-g/50540173#50540173)","body":"This is some what more complicated then you give it credit for.  What I mean is, you have two states to manage (from -&gt; To; To -&gt; From).  A naive approach would just increment/decrement a delta repeatedly and while this would &quot;mostly&quot; work, the management of the process and adjusting the speed  isn&#39;t simple.  A &quot;better&quot; solution would be to make use of a time based time line - <a href=\"https://stackoverflow.com/questions/50539835/how-can-i-make-a-polygon-object-in-java-pulsate-like-the-chalice-in-the-atari-g/50540173#50540173\">for example</a>"},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1694824384,"post_id":77115737,"comment_id":135946463,"body_markdown":"*but I don&#39;t know how to &quot;translate&quot;* - well I don&#39;t see any code where you attempted to make changes to the code so I&#39;m not sure what problems you are having.  You learn by trying. The basic approach is to &quot;increment&quot; the size of the oval every time the Timer fires. Get this working first. Then you add such that when the size of the oval is greater than a specific size you &quot;decrement&quot; the size.","body":"<i>but I don&#39;t know how to &quot;translate&quot;</i> - well I don&#39;t see any code where you attempted to make changes to the code so I&#39;m not sure what problems you are having.  You learn by trying. The basic approach is to &quot;increment&quot; the size of the oval every time the Timer fires. Get this working first. Then you add such that when the size of the oval is greater than a specific size you &quot;decrement&quot; the size."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1694824561,"post_id":77115737,"comment_id":135946477,"body_markdown":"So the main change you would make to the above code is to create a method to invoke when the Timer fires. In that method you would add your increment/decrement logic and then invoke &#39;repaint()&quot;. You would then need to modify the paintComponent(...) logic to paint the oval at its current dimension.","body":"So the main change you would make to the above code is to create a method to invoke when the Timer fires. In that method you would add your increment/decrement logic and then invoke &#39;repaint()&quot;. You would then need to modify the paintComponent(...) logic to paint the oval at its current dimension."},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1694827721,"post_id":77115737,"comment_id":135946672,"body_markdown":"Also [for example](https://stackoverflow.com/questions/60048242/how-incorporate-a-timer-into-a-heartbeat-animation/60048626#60048626)","body":"Also <a href=\"https://stackoverflow.com/questions/60048242/how-incorporate-a-timer-into-a-heartbeat-animation/60048626#60048626\">for example</a>"},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1694834434,"post_id":77115737,"comment_id":135947004,"body_markdown":"What is *NoApplet*?","body":"What is <i>NoApplet</i>?"}],"answers":[{"tags":[],"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1694834022,"creation_date":1694828249,"answer_id":77116048,"question_id":77115737,"body_markdown":"So, based on this [example](https://stackoverflow.com/questions/60048242/how-incorporate-a-timer-into-a-heartbeat-animation/60048626#60048626), I was able to simply modify it to support a circle shape (rather then a custom shape)\r\n\r\n[![enter image description here][1]][1]\r\n\r\n    import java.awt.BasicStroke;\r\n    import java.awt.Color;\r\n    import java.awt.Dimension;\r\n    import java.awt.EventQueue;\r\n    import java.awt.Graphics;\r\n    import java.awt.Graphics2D;\r\n    import java.awt.Shape;\r\n    import java.awt.event.ActionEvent;\r\n    import java.awt.event.ActionListener;\r\n    import java.awt.geom.AffineTransform;\r\n    import java.awt.geom.Ellipse2D;\r\n    import java.awt.geom.Path2D;\r\n    import java.time.Duration;\r\n    import java.time.Instant;\r\n    import javax.swing.JFrame;\r\n    import javax.swing.JPanel;\r\n    import javax.swing.Timer;\r\n\r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            new Main();\r\n        }\r\n\r\n        public Main() {\r\n            EventQueue.invokeLater(new Runnable() {\r\n                @Override\r\n                public void run() {\r\n                    JFrame frame = new JFrame();\r\n                    frame.add(new TestPane());\r\n                    frame.pack();\r\n                    frame.setLocationRelativeTo(null);\r\n                    frame.setVisible(true);\r\n                }\r\n            });\r\n        }\r\n\r\n        class TestPane extends JPanel {\r\n\r\n            private Path2D path;\r\n\r\n            private Instant anchorPoint;\r\n            private Duration playDuration = Duration.ofSeconds(2);\r\n            private double scale = 1;\r\n\r\n            private double lowerRange = 0.75;\r\n            private double upperRange = 1.25;\r\n\r\n            public TestPane() {\r\n                super();\r\n                setPreferredSize(new Dimension(800, 600));\r\n                path = new Path2D.Double(new Ellipse2D.Double(-100, -100, 200, 200));\r\n\r\n                Timer timer = new Timer(5, new ActionListener() {\r\n                    @Override\r\n                    public void actionPerformed(ActionEvent e) {\r\n                        if (anchorPoint == null) {\r\n                            anchorPoint = Instant.now();\r\n                        }\r\n                        Duration playTime = Duration.between(anchorPoint, Instant.now());\r\n                        double progress = (double) playTime.toMillis() / playDuration.toMillis();\r\n                        if (progress &gt;= 1) {\r\n                            anchorPoint = null;\r\n                            progress = 1;\r\n                        }\r\n\r\n                        if (progress &gt; 0.5) {\r\n                            progress = 1.0 - progress;\r\n                        }\r\n\r\n                        scale = ((upperRange - lowerRange) * progress) + lowerRange;\r\n                        repaint();\r\n                    }\r\n                });\r\n                timer.start();\r\n            }\r\n\r\n            @Override\r\n            protected void paintComponent(Graphics g) {\r\n                super.paintComponent(g);\r\n                Graphics2D g2d = (Graphics2D) g.create();\r\n\r\n                AffineTransform gat = new AffineTransform();\r\n\r\n                gat.scale(1.0, -1.0);\r\n                gat.translate(getWidth() / 2.0, -getHeight() / 2.0);\r\n                g2d.transform(gat);\r\n\r\n                Shape shape = path.createTransformedShape(AffineTransform.getScaleInstance(scale, scale));\r\n\r\n                g2d.setPaint(Color.PINK);\r\n                g2d.fill(shape);\r\n                g2d.setStroke(new BasicStroke(5.0f));\r\n                g2d.setPaint(Color.BLACK);\r\n                g2d.draw(shape);\r\n                g2d.dispose();\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/cWqsn.gif\r\n\r\n*Cavet* - This will start out large and shrink, before repeating, to reverse this, just change the `scale` calculation to inverse the `progress`, for example...\r\n    \r\n    scale = ((upperRange - lowerRange) * (1d - progress)) + lowerRange;\r\n\r\n*Cavet* - I have no idea what `NoApplet` is and it scares me","title":"How to animate a ball grow with NoApplet?","body":"<p>So, based on this <a href=\"https://stackoverflow.com/questions/60048242/how-incorporate-a-timer-into-a-heartbeat-animation/60048626#60048626\">example</a>, I was able to simply modify it to support a circle shape (rather then a custom shape)</p>\n<p><a href=\"https://i.stack.imgur.com/cWqsn.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cWqsn.gif\" alt=\"enter image description here\" /></a></p>\n<pre><code>import java.awt.BasicStroke;\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.EventQueue;\nimport java.awt.Graphics;\nimport java.awt.Graphics2D;\nimport java.awt.Shape;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\nimport java.awt.geom.AffineTransform;\nimport java.awt.geom.Ellipse2D;\nimport java.awt.geom.Path2D;\nimport java.time.Duration;\nimport java.time.Instant;\nimport javax.swing.JFrame;\nimport javax.swing.JPanel;\nimport javax.swing.Timer;\n\npublic class Main {\n    public static void main(String[] args) {\n        new Main();\n    }\n\n    public Main() {\n        EventQueue.invokeLater(new Runnable() {\n            @Override\n            public void run() {\n                JFrame frame = new JFrame();\n                frame.add(new TestPane());\n                frame.pack();\n                frame.setLocationRelativeTo(null);\n                frame.setVisible(true);\n            }\n        });\n    }\n\n    class TestPane extends JPanel {\n\n        private Path2D path;\n\n        private Instant anchorPoint;\n        private Duration playDuration = Duration.ofSeconds(2);\n        private double scale = 1;\n\n        private double lowerRange = 0.75;\n        private double upperRange = 1.25;\n\n        public TestPane() {\n            super();\n            setPreferredSize(new Dimension(800, 600));\n            path = new Path2D.Double(new Ellipse2D.Double(-100, -100, 200, 200));\n\n            Timer timer = new Timer(5, new ActionListener() {\n                @Override\n                public void actionPerformed(ActionEvent e) {\n                    if (anchorPoint == null) {\n                        anchorPoint = Instant.now();\n                    }\n                    Duration playTime = Duration.between(anchorPoint, Instant.now());\n                    double progress = (double) playTime.toMillis() / playDuration.toMillis();\n                    if (progress &gt;= 1) {\n                        anchorPoint = null;\n                        progress = 1;\n                    }\n\n                    if (progress &gt; 0.5) {\n                        progress = 1.0 - progress;\n                    }\n\n                    scale = ((upperRange - lowerRange) * progress) + lowerRange;\n                    repaint();\n                }\n            });\n            timer.start();\n        }\n\n        @Override\n        protected void paintComponent(Graphics g) {\n            super.paintComponent(g);\n            Graphics2D g2d = (Graphics2D) g.create();\n\n            AffineTransform gat = new AffineTransform();\n\n            gat.scale(1.0, -1.0);\n            gat.translate(getWidth() / 2.0, -getHeight() / 2.0);\n            g2d.transform(gat);\n\n            Shape shape = path.createTransformedShape(AffineTransform.getScaleInstance(scale, scale));\n\n            g2d.setPaint(Color.PINK);\n            g2d.fill(shape);\n            g2d.setStroke(new BasicStroke(5.0f));\n            g2d.setPaint(Color.BLACK);\n            g2d.draw(shape);\n            g2d.dispose();\n        }\n    }\n}\n</code></pre>\n<p><em>Cavet</em> - This will start out large and shrink, before repeating, to reverse this, just change the <code>scale</code> calculation to inverse the <code>progress</code>, for example...</p>\n<pre><code>scale = ((upperRange - lowerRange) * (1d - progress)) + lowerRange;\n</code></pre>\n<p><em>Cavet</em> - I have no idea what <code>NoApplet</code> is and it scares me</p>\n"}],"owner":{"account_id":29346892,"reputation":19,"user_id":22485016,"display_name":"Pipopi"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":77116048,"answer_count":1,"score":-2,"last_activity_date":1694834022,"creation_date":1694819396,"question_id":77115737,"body_markdown":"I am trying to make a simple animation in java where a ball grows in size, then have a subclass that when I run it, it makes the ball grow in size until it reaches the end of the screen, at that point it will deflate and repeat the process. This is all in java with NoApplet. I am a begniner in frameworks and this is code of how I think should work.\r\n\r\n```\r\nimport java.awt.*;\r\nimport java.awt.event.*;\r\nimport java.util.Objects;\r\nimport javax.swing.*;\r\nimport noapplet.NoApplet;\r\n\r\npublic class Balloon extends NoApplet{\r\n//Field declarations? Not really sure what declarations would I use. \r\n    protected int delay = 100;\r\n    protected Dimension dim;\r\n    protected int x, y;\r\n    protected Timer timer;\r\n    protected int offset = 10;\r\n    public Balloon() {\r\n    }\r\n    public void init(){\r\n//initialization and have parameter \r\n        dim = getSize();\r\n        x = dim.width;\r\n        y = dim.height;\r\n\r\n    }\r\n    protected void paintComponent(Graphics g) {\r\n        g.setColor(Color.BLACK);\r\n//start making the screen black and then make the animation \r\n\r\n\r\n    }\r\n    public static void main (String[]args){\r\n        new Balloon().run();\r\n```\r\n\r\n\r\nI have similar code of how something like this should work but I don&#39;t know how to &quot;translate&quot;\r\n\r\n\r\n```\r\npackage noapplet.assigment;\r\nimport java.awt.*;\r\nimport java.awt.event.*;\r\nimport java.util.Objects;\r\nimport javax.swing.*;\r\nimport noapplet.NoApplet;\r\nimport noapplet.example.Omok;\r\n\r\npublic class ScrollingBanner extends NoApplet {\r\n\r\n    protected String text;\r\n    protected Font font =  new java.awt.Font(&quot;Sans-serif&quot;, Font.BOLD, 24);\r\n    protected Dimension dim;\r\n    protected int x, y;\r\n    protected int delay = 100; // millis\r\n    protected int offset = 10;\r\n    protected Timer timer; // animation timer\r\n\r\n    public void init() {\r\n        // get parameters &quot;delay&quot; and &quot;text&quot;\r\n        String att = getParameter(&quot;delay&quot;);\r\n        if (att != null) {\r\n            delay = Integer.parseInt(att);\r\n        }\r\n        att = getParameter(&quot;text&quot;);\r\n        text = Objects.requireNonNullElse(att, &quot;Lets Go&quot;);\r\n\r\n        // set the initial position of the text\r\n        dim = getSize();\r\n        x = dim.width;\r\n        y = font.getSize();\r\n\r\n        // initialize the animation timer\r\n        timer = new Timer(delay, e -&gt; repaint());\r\n    }\r\n    protected void paintComponent(Graphics g) {\r\n        // get the font metrics to determine the length of the text\r\n        g.setFont(font);\r\n        FontMetrics fm = g.getFontMetrics();\r\n        int length = fm.stringWidth(text);\r\n\r\n        // adjust the position of the text from the previous frame\r\n        x -= offset;\r\n        // if the text is completely off to the left end\r\n        // move the position back to the right end\r\n        //if (x &lt; -length) { x = -dim.width; }\r\n        if (x &lt; -length) { x = dim.width; }\r\n\r\n        // set the pen color and draw the background\r\n        g.setColor(Color.BLACK);\r\n        g.fillRect(0, 0, dim.width, dim.height);\r\n\r\n        // set the pen color and then draw the text\r\n        g.setColor(Color.GREEN);\r\n        g.drawString(text, x, y);\r\n    }\r\n    public void start() {\r\n        timer.start();\r\n    }\r\n    public void stop() {\r\n        timer.stop();\r\n    }\r\n    public static void main (String [] args){\r\n        new ScrollingBanner().run();\r\n    }\r\n}\r\n\r\n\r\n```\r\n\r\nPic related: [![Shrinking and inflating ball][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/AnhE4.png","title":"How to animate a ball grow with NoApplet?","body":"<p>I am trying to make a simple animation in java where a ball grows in size, then have a subclass that when I run it, it makes the ball grow in size until it reaches the end of the screen, at that point it will deflate and repeat the process. This is all in java with NoApplet. I am a begniner in frameworks and this is code of how I think should work.</p>\n<pre><code>import java.awt.*;\nimport java.awt.event.*;\nimport java.util.Objects;\nimport javax.swing.*;\nimport noapplet.NoApplet;\n\npublic class Balloon extends NoApplet{\n//Field declarations? Not really sure what declarations would I use. \n    protected int delay = 100;\n    protected Dimension dim;\n    protected int x, y;\n    protected Timer timer;\n    protected int offset = 10;\n    public Balloon() {\n    }\n    public void init(){\n//initialization and have parameter \n        dim = getSize();\n        x = dim.width;\n        y = dim.height;\n\n    }\n    protected void paintComponent(Graphics g) {\n        g.setColor(Color.BLACK);\n//start making the screen black and then make the animation \n\n\n    }\n    public static void main (String[]args){\n        new Balloon().run();\n</code></pre>\n<p>I have similar code of how something like this should work but I don't know how to &quot;translate&quot;</p>\n<pre><code>package noapplet.assigment;\nimport java.awt.*;\nimport java.awt.event.*;\nimport java.util.Objects;\nimport javax.swing.*;\nimport noapplet.NoApplet;\nimport noapplet.example.Omok;\n\npublic class ScrollingBanner extends NoApplet {\n\n    protected String text;\n    protected Font font =  new java.awt.Font(&quot;Sans-serif&quot;, Font.BOLD, 24);\n    protected Dimension dim;\n    protected int x, y;\n    protected int delay = 100; // millis\n    protected int offset = 10;\n    protected Timer timer; // animation timer\n\n    public void init() {\n        // get parameters &quot;delay&quot; and &quot;text&quot;\n        String att = getParameter(&quot;delay&quot;);\n        if (att != null) {\n            delay = Integer.parseInt(att);\n        }\n        att = getParameter(&quot;text&quot;);\n        text = Objects.requireNonNullElse(att, &quot;Lets Go&quot;);\n\n        // set the initial position of the text\n        dim = getSize();\n        x = dim.width;\n        y = font.getSize();\n\n        // initialize the animation timer\n        timer = new Timer(delay, e -&gt; repaint());\n    }\n    protected void paintComponent(Graphics g) {\n        // get the font metrics to determine the length of the text\n        g.setFont(font);\n        FontMetrics fm = g.getFontMetrics();\n        int length = fm.stringWidth(text);\n\n        // adjust the position of the text from the previous frame\n        x -= offset;\n        // if the text is completely off to the left end\n        // move the position back to the right end\n        //if (x &lt; -length) { x = -dim.width; }\n        if (x &lt; -length) { x = dim.width; }\n\n        // set the pen color and draw the background\n        g.setColor(Color.BLACK);\n        g.fillRect(0, 0, dim.width, dim.height);\n\n        // set the pen color and then draw the text\n        g.setColor(Color.GREEN);\n        g.drawString(text, x, y);\n    }\n    public void start() {\n        timer.start();\n    }\n    public void stop() {\n        timer.stop();\n    }\n    public static void main (String [] args){\n        new ScrollingBanner().run();\n    }\n}\n\n\n</code></pre>\n<p>Pic related: <a href=\"https://i.stack.imgur.com/AnhE4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AnhE4.png\" alt=\"Shrinking and inflating ball\" /></a></p>\n"},{"tags":["java","intellij-idea","azure-devops","cucumber","test-plan"],"owner":{"account_id":29456991,"reputation":1,"user_id":22572641,"display_name":"Fathima Parveen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":101,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694833523,"creation_date":1694833523,"question_id":77116201,"body_markdown":"I&#39;m encountering an issue related to associating test results with an Azure Test Plan. I&#39;m running my Cucumber test cases in an Azure DevOps pipeline, and I need to link these results to a specific test plan. I&#39;ve been attempting to achieve this using the Azure DevOps API, but I haven&#39;t been successful so far.\r\n\r\nHas anyone else faced this problem and found a solution?\r\n\r\nI successfully created a pipeline for executing the test cases. However, when I attempted to use the DevOps API to update the results, it didn&#39;t work as expected. I&#39;m now looking for a solution to associate the test results with my test plan.","title":"Integrating Cucumber test results from azure pipeline to update testcases status in azure testplan","body":"<p>I'm encountering an issue related to associating test results with an Azure Test Plan. I'm running my Cucumber test cases in an Azure DevOps pipeline, and I need to link these results to a specific test plan. I've been attempting to achieve this using the Azure DevOps API, but I haven't been successful so far.</p>\n<p>Has anyone else faced this problem and found a solution?</p>\n<p>I successfully created a pipeline for executing the test cases. However, when I attempted to use the DevOps API to update the results, it didn't work as expected. I'm now looking for a solution to associate the test results with my test plan.</p>\n"},{"tags":["java","eclipse","import"],"comments":[{"owner":{"account_id":1791855,"reputation":1370,"user_id":1632043,"accept_rate":50,"display_name":"Russell Gutierrez"},"score":0,"creation_date":1352092179,"post_id":13226238,"comment_id":18015478,"body_markdown":"Yes. you need to create then put them in their right packages.","body":"Yes. you need to create then put them in their right packages."},{"owner":{"account_id":281678,"reputation":5500,"user_id":578116,"accept_rate":68,"display_name":"smk"},"score":0,"creation_date":1352092234,"post_id":13226238,"comment_id":18015489,"body_markdown":"How have you imported the project to workspace?","body":"How have you imported the project to workspace?"},{"owner":{"account_id":1459032,"reputation":709,"user_id":1373852,"accept_rate":58,"display_name":"Pradit"},"score":0,"creation_date":1352092299,"post_id":13226238,"comment_id":18015505,"body_markdown":"yes I did , how do I add them in the right package ?","body":"yes I did , how do I add them in the right package ?"}],"answers":[{"comments":[{"owner":{"account_id":281678,"reputation":5500,"user_id":578116,"accept_rate":68,"display_name":"smk"},"score":0,"creation_date":1352092452,"post_id":13226267,"comment_id":18015542,"body_markdown":"Ok then create a package with the required name and then move all those classes into that. I am surprised a working downloaded project wasnt already in the right package","body":"Ok then create a package with the required name and then move all those classes into that. I am surprised a working downloaded project wasnt already in the right package"},{"owner":{"account_id":1459032,"reputation":709,"user_id":1373852,"accept_rate":58,"display_name":"Pradit"},"score":0,"creation_date":1352092777,"post_id":13226267,"comment_id":18015613,"body_markdown":"so i created a new package src1 and moved it there\ncompiling the program gives me thiss error Exception in thread &quot;main&quot; java.lang.ArrayIndexOutOfBoundsException: 0\n\tat src1.STS.main(STS.java:23)","body":"so i created a new package src1 and moved it there compiling the program gives me thiss error Exception in thread &quot;main&quot; java.lang.ArrayIndexOutOfBoundsException: 0 \tat src1.STS.main(STS.java:23)"}],"tags":[],"owner":{"account_id":281678,"reputation":5500,"user_id":578116,"accept_rate":68,"display_name":"smk"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1352092322,"creation_date":1352092322,"answer_id":13226267,"question_id":13226238,"body_markdown":"I am not sure exactly what you have done.. But it looks like you havent imported it into the workspace correctly.\r\n\r\nIf this is a project you have downloaded , just use import-&gt; existing projects into workspace.","title":"Exception in thread &quot;main&quot; java.lang.Error: Unresolved compilation","body":"<p>I am not sure exactly what you have done.. But it looks like you havent imported it into the workspace correctly.</p>\n\n<p>If this is a project you have downloaded , just use import-> existing projects into workspace.</p>\n"},{"tags":[],"owner":{"account_id":1853481,"reputation":4250,"user_id":1679519,"accept_rate":72,"display_name":"Bernard"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1352092861,"creation_date":1352092861,"answer_id":13226340,"question_id":13226238,"body_markdown":"There is a \r\n\r\n&gt; default package\r\n\r\n under the src and if you put classes under that it will works fine. The other solution is to create a project manually and add one class and copy paste individually which is not so pleasant. ","title":"Exception in thread &quot;main&quot; java.lang.Error: Unresolved compilation","body":"<p>There is a </p>\n\n<blockquote>\n  <p>default package</p>\n</blockquote>\n\n<p>under the src and if you put classes under that it will works fine. The other solution is to create a project manually and add one class and copy paste individually which is not so pleasant. </p>\n"},{"comments":[{"owner":{"account_id":347553,"reputation":6607,"user_id":1145285,"accept_rate":97,"display_name":"Bhavik Ambani"},"score":0,"creation_date":1352093809,"post_id":13226348,"comment_id":18015863,"body_markdown":"The you will have to configure libraries for the same.","body":"The you will have to configure libraries for the same."}],"tags":[],"owner":{"account_id":347553,"reputation":6607,"user_id":1145285,"accept_rate":97,"display_name":"Bhavik Ambani"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1352093653,"creation_date":1352092908,"answer_id":13226348,"question_id":13226238,"body_markdown":"I thik you will have to configure your source location for the project. Do the following thing stated in the image below. Click on &quot;Add Folder&quot; and the location of the source folder\r\n\r\n\r\n![enter image description here][1]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/gg795.jpg","title":"Exception in thread &quot;main&quot; java.lang.Error: Unresolved compilation","body":"<p>I thik you will have to configure your source location for the project. Do the following thing stated in the image below. Click on \"Add Folder\" and the location of the source folder</p>\n\n<p><img src=\"https://i.stack.imgur.com/gg795.jpg\" alt=\"enter image description here\"></p>\n"},{"tags":[],"owner":{"account_id":5892886,"reputation":1,"user_id":4638913,"display_name":"akshat"},"comment_count":0,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1425596602,"creation_date":1425596602,"answer_id":28889524,"question_id":13226238,"body_markdown":"make sure your &#39;S&#39; is capital in System.out.println();\r\n","title":"Exception in thread &quot;main&quot; java.lang.Error: Unresolved compilation","body":"<p>make sure your 'S' is capital in System.out.println();</p>\n"},{"tags":[],"owner":{"account_id":12266971,"reputation":1,"user_id":8953245,"display_name":"Mohsen"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1510853985,"creation_date":1510853985,"answer_id":47335973,"question_id":13226238,"body_markdown":"It is happened because your class is not in correct package, you should put your class under defaults package then your issue will be fine; otherwise you should write in top of your class ,your package name for example &quot; mohsen package;&quot;    ","title":"Exception in thread &quot;main&quot; java.lang.Error: Unresolved compilation","body":"<p>It is happened because your class is not in correct package, you should put your class under defaults package then your issue will be fine; otherwise you should write in top of your class ,your package name for example \" mohsen package;\"    </p>\n"},{"tags":[],"owner":{"account_id":16534332,"reputation":1,"user_id":11946761,"display_name":"Vinodh"},"comment_count":0,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1566219511,"creation_date":1566219511,"answer_id":57557255,"question_id":13226238,"body_markdown":"You would have removed the package name in any of the class by mistake. Inspect all the classes for correct package name.","title":"Exception in thread &quot;main&quot; java.lang.Error: Unresolved compilation","body":"<p>You would have removed the package name in any of the class by mistake. Inspect all the classes for correct package name.</p>\n"}],"owner":{"account_id":1459032,"reputation":709,"user_id":1373852,"accept_rate":58,"display_name":"Pradit"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":13953,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":6,"score":0,"last_activity_date":1694833470,"creation_date":1352092097,"question_id":13226238,"body_markdown":"`The declared package &quot;&quot; does not match the expected package &quot;src&quot;`\r\nI am trying to compile this program and I get the above error. \r\nI imported the project from the downloads folder and copied it to my workspace. Do i need to create a new package ? \r\n![screenshot][1]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/JFDnf.jpg\r\nWhat am i doing wrong ? ","title":"Exception in thread &quot;main&quot; java.lang.Error: Unresolved compilation","body":"<p><code>The declared package \"\" does not match the expected package \"src\"</code>\nI am trying to compile this program and I get the above error. \nI imported the project from the downloads folder and copied it to my workspace. Do i need to create a new package ? \n<img src=\"https://i.stack.imgur.com/JFDnf.jpg\" alt=\"screenshot\"></p>\n\n<p>What am i doing wrong ? </p>\n"},{"tags":["java","web-services","osgi","webclient","cxf"],"answers":[{"comments":[{"owner":{"account_id":873666,"reputation":11,"user_id":923957,"display_name":"user923957"},"score":0,"creation_date":1314910444,"post_id":7274593,"comment_id":8760417,"body_markdown":"There aren&#39;t two implementation of the class BusFactory in Felix. Only cxf-bundle. And my bundle not import the class SpringBusFactory, only javax.xml.ws.Service class.","body":"There aren&#39;t two implementation of the class BusFactory in Felix. Only cxf-bundle. And my bundle not import the class SpringBusFactory, only javax.xml.ws.Service class."}],"tags":[],"owner":{"account_id":446547,"reputation":126635,"user_id":839646,"accept_rate":70,"display_name":"Ryan Stewart"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1314900807,"creation_date":1314900807,"answer_id":7274593,"question_id":7274510,"body_markdown":"Yes, it looks like you have two BusFactory class definitions. The SpringBusFactory implements one of them, and the asSubclass() call is made on the other. Since one BusFactory isn&#39;t the same class as the other, you&#39;d get a CCE. Look for two different bundles containing the BusFactory class. One of them will be imported by the bundle that defines the SpringBusFactory.","title":"ERROR: java.lang.ClassCastException: class org.apache.cxf.bus.spring.SpringBusFactory","body":"<p>Yes, it looks like you have two BusFactory class definitions. The SpringBusFactory implements one of them, and the asSubclass() call is made on the other. Since one BusFactory isn't the same class as the other, you'd get a CCE. Look for two different bundles containing the BusFactory class. One of them will be imported by the bundle that defines the SpringBusFactory.</p>\n"},{"comments":[{"owner":{"account_id":873666,"reputation":11,"user_id":923957,"display_name":"user923957"},"score":1,"creation_date":1315000697,"post_id":7286749,"comment_id":8780008,"body_markdown":"I found that SOAP clients does not work with CXF in OSGi environment.","body":"I found that SOAP clients does not work with CXF in OSGi environment."}],"tags":[],"owner":{"account_id":278464,"reputation":6672,"user_id":573057,"accept_rate":89,"display_name":"earcam"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1314982284,"creation_date":1314982284,"answer_id":7286749,"question_id":7274510,"body_markdown":"I think the &quot;two BusFactory class definitions&quot; is a red herring. \r\n\r\nNot sure what version of CXF you&#39;re using (guessing 2.4.2) but that code is trying to do ServiceLoader kind of stuff using the thread context classloader when looking for subclass implementations.\r\n\r\nMy best guess is there some Spring &quot;magic&quot; that CXF relies on and your missing the bundle that provides it.  Looking at the CXF feature for Karaf it has loads of dependencies, check this and ensure you&#39;ve got them all - at this point it may be easier to try this out using karaf with the CXF feature installed.\r\n\r\nIf you&#39;re using maven the features file can be accessed with this:\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.cxf.karaf&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;apache-cxf&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.4.2&lt;/version&gt;\r\n\t\t\t&lt;type&gt;xml&lt;/type&gt;\r\n\t\t\t&lt;classifier&gt;features&lt;/classifier&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\nSome documentation on bus configuration [here][1]\r\n\r\n\r\n  [1]: http://cxf.apache.org/docs/bus-configuration.html\r\n\r\n","title":"ERROR: java.lang.ClassCastException: class org.apache.cxf.bus.spring.SpringBusFactory","body":"<p>I think the \"two BusFactory class definitions\" is a red herring. </p>\n\n<p>Not sure what version of CXF you're using (guessing 2.4.2) but that code is trying to do ServiceLoader kind of stuff using the thread context classloader when looking for subclass implementations.</p>\n\n<p>My best guess is there some Spring \"magic\" that CXF relies on and your missing the bundle that provides it.  Looking at the CXF feature for Karaf it has loads of dependencies, check this and ensure you've got them all - at this point it may be easier to try this out using karaf with the CXF feature installed.</p>\n\n<p>If you're using maven the features file can be accessed with this:</p>\n\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.cxf.karaf&lt;/groupId&gt;\n        &lt;artifactId&gt;apache-cxf&lt;/artifactId&gt;\n        &lt;version&gt;2.4.2&lt;/version&gt;\n        &lt;type&gt;xml&lt;/type&gt;\n        &lt;classifier&gt;features&lt;/classifier&gt;\n    &lt;/dependency&gt;\n</code></pre>\n\n<p>Some documentation on bus configuration <a href=\"http://cxf.apache.org/docs/bus-configuration.html\" rel=\"nofollow\">here</a></p>\n"},{"tags":[],"owner":{"account_id":16683,"reputation":14507,"user_id":36611,"display_name":"Daniel Kulp"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1315842909,"creation_date":1315842909,"answer_id":7390630,"question_id":7274510,"body_markdown":"\r\nI&#39;ve seen strange errors like that with pax-exam in the past.   Does this run outside of pax-exam in a &quot;normal&quot; OSGi environment?    Talend Service Factory ( http://talend.com/products/tsf ) has several examples (in the separate examples download package) of CXF clients and services running in OSGi and they all do work.\r\n\r\n\r\n\r\n","title":"ERROR: java.lang.ClassCastException: class org.apache.cxf.bus.spring.SpringBusFactory","body":"<p>I've seen strange errors like that with pax-exam in the past.   Does this run outside of pax-exam in a \"normal\" OSGi environment?    Talend Service Factory ( <a href=\"http://talend.com/products/tsf\" rel=\"nofollow\">http://talend.com/products/tsf</a> ) has several examples (in the separate examples download package) of CXF clients and services running in OSGi and they all do work.</p>\n"}],"owner":{"account_id":873666,"reputation":11,"user_id":923957,"display_name":"user923957"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9639,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1694833470,"creation_date":1314900301,"question_id":7274510,"body_markdown":"Helo!\r\n\r\nI&#39;m trying to create a Web Service client using CXF. My application is in OSGi. And I use the Felix Framework.\r\n\r\nBut the following error occurs:\r\n\r\n&lt;code&gt;\r\n\r\n    [main] ERROR org.apache.cxf.BusFactory - Failed to determine BusFactory implementation class name.\r\n    java.lang.ClassCastException: class org.apache.cxf.bus.spring.SpringBusFactory\r\n    \tat java.lang.Class.asSubclass(Unknown Source)\r\n    \tat org.apache.cxf.BusFactory.getBusFactoryClass(BusFactory.java:280)\r\n    \tat org.apache.cxf.BusFactory.newInstance(BusFactory.java:207)\r\n    \tat org.apache.cxf.BusFactory.newInstance(BusFactory.java:194)\r\n    \tat org.apache.cxf.BusFactory.getDefaultBus(BusFactory.java:90)\r\n    \tat org.apache.cxf.BusFactory.getThreadDefaultBus(BusFactory.java:137)\r\n    \tat org.apache.cxf.BusFactory.getThreadDefaultBus(BusFactory.java:122)\r\n    \tat org.apache.cxf.jaxws.spi.ProviderImpl.createServiceDelegate(ProviderImpl.java:89)\r\n    \tat javax.xml.ws.Service.&lt;init&gt;(Service.java:36)\r\n    \tat myorg.engine.test.mocks.soapservice.client.CHMService.&lt;init&gt;(CHMService.java:42)\r\n    \tat myorg.engine.service.OSGiServiceTest.testSoapServiceMock(OSGiServiceTest.java:133)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n    \tat java.lang.reflect.Method.invoke(Unknown Source)\r\n    \tat org.ops4j.pax.exam.raw.extender.intern.ProbeInvokerImpl.injectContextAndInvoke(ProbeInvokerImpl.java:112)\r\n    \tat org.ops4j.pax.exam.raw.extender.intern.ProbeInvokerImpl.findAndInvoke(ProbeInvokerImpl.java:71)\r\n    \tat org.ops4j.pax.exam.raw.extender.intern.ProbeInvokerImpl.call(ProbeInvokerImpl.java:58)\r\n    \tat org.ops4j.pax.exam.nat.internal.NativeTestContainer.call(NativeTestContainer.java:83)\r\n    \tat org.ops4j.pax.exam.spi.reactors.EagerSingleStagedReactor.invoke(EagerSingleStagedReactor.java:85)\r\n    \tat org.ops4j.pax.exam.junit.JUnit4TestRunner$2.evaluate(JUnit4TestRunner.java:259)\r\n    \tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:76)\r\n    \tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)\r\n    \tat org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)\r\n    \tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)\r\n    \tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)\r\n    \tat org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)\r\n    \tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)\r\n    \tat org.junit.runners.ParentRunner.run(ParentRunner.java:236)\r\n    \tat org.ops4j.pax.exam.junit.JUnit4TestRunner.run(JUnit4TestRunner.java:86)\r\n    \tat org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:49)\r\n    \tat org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)\r\n    \tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)\r\n    \tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)\r\n    \tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)\r\n    \tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)\r\n    \r\n    [main] ERROR org.apache.cxf.BusFactory - Failed to instantiate bus factory.\r\n    java.lang.ClassCastException: class org.apache.cxf.bus.spring.SpringBusFactory\r\n    \tat java.lang.Class.asSubclass(Unknown Source)\r\n    \tat org.apache.cxf.BusFactory.newInstance(BusFactory.java:218)\r\n    \tat org.apache.cxf.BusFactory.newInstance(BusFactory.java:194)\r\n    \tat org.apache.cxf.BusFactory.getDefaultBus(BusFactory.java:90)\r\n    \tat org.apache.cxf.BusFactory.getThreadDefaultBus(BusFactory.java:137)\r\n    \tat org.apache.cxf.BusFactory.getThreadDefaultBus(BusFactory.java:122)\r\n    \tat org.apache.cxf.jaxws.spi.ProviderImpl.createServiceDelegate(ProviderImpl.java:89)\r\n    \tat javax.xml.ws.Service.&lt;init&gt;(Service.java:36)\r\n    \tat myorg.engine.test.mocks.soapservice.client.CHMService.&lt;init&gt;(CHMService.java:42)\r\n    \tat myorg.engine.service.OSGiServiceTest.testSoapServiceMock(OSGiServiceTest.java:133)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n    \tat java.lang.reflect.Method.invoke(Unknown Source)\r\n    \tat org.ops4j.pax.exam.raw.extender.intern.ProbeInvokerImpl.injectContextAndInvoke(ProbeInvokerImpl.java:112)\r\n    \tat org.ops4j.pax.exam.raw.extender.intern.ProbeInvokerImpl.findAndInvoke(ProbeInvokerImpl.java:71)\r\n    \tat org.ops4j.pax.exam.raw.extender.intern.ProbeInvokerImpl.call(ProbeInvokerImpl.java:58)\r\n    \tat org.ops4j.pax.exam.nat.internal.NativeTestContainer.call(NativeTestContainer.java:83)\r\n    \tat org.ops4j.pax.exam.spi.reactors.EagerSingleStagedReactor.invoke(EagerSingleStagedReactor.java:85)\r\n    \tat org.ops4j.pax.exam.junit.JUnit4TestRunner$2.evaluate(JUnit4TestRunner.java:259)\r\n    \tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:76)\r\n    \tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)\r\n    \tat org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)\r\n    \tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)\r\n    \tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)\r\n    \tat org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)\r\n    \tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)\r\n    \tat org.junit.runners.ParentRunner.run(ParentRunner.java:236)\r\n    \tat org.ops4j.pax.exam.junit.JUnit4TestRunner.run(JUnit4TestRunner.java:86)\r\n    \tat org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:49)\r\n    \tat org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)\r\n    \tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)\r\n    \tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)\r\n    \tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)\r\n    \tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)\r\n    [org.ops4j.pax.exam.junit.JUnit4TestRunner] : Exception\r\n    org.ops4j.pax.exam.TestContainerException: java.lang.reflect.InvocationTargetException\r\n    \tat org.ops4j.pax.exam.raw.extender.intern.ProbeInvokerImpl.injectContextAndInvoke(ProbeInvokerImpl.java:118)\r\n    \tat org.ops4j.pax.exam.raw.extender.intern.ProbeInvokerImpl.findAndInvoke(ProbeInvokerImpl.java:71)\r\n    \tat org.ops4j.pax.exam.raw.extender.intern.ProbeInvokerImpl.call(ProbeInvokerImpl.java:58)\r\n    \tat org.ops4j.pax.exam.nat.internal.NativeTestContainer.call(NativeTestContainer.java:83)\r\n    \tat org.ops4j.pax.exam.spi.reactors.EagerSingleStagedReactor.invoke(EagerSingleStagedReactor.java:85)\r\n    \tat org.ops4j.pax.exam.junit.JUnit4TestRunner$2.evaluate(JUnit4TestRunner.java:259)\r\n    \tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:76)\r\n    \tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)\r\n    \tat org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)\r\n    \tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)\r\n    \tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)\r\n    \tat org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)\r\n    \tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)\r\n    \tat org.junit.runners.ParentRunner.run(ParentRunner.java:236)\r\n    \tat org.ops4j.pax.exam.junit.JUnit4TestRunner.run(JUnit4TestRunner.java:86)\r\n    \tat org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:49)\r\n    \tat org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)\r\n    \tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)\r\n    \tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)\r\n    \tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)\r\n    \tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)\r\n    \r\n    Caused by: java.lang.reflect.InvocationTargetException\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n    \tat java.lang.reflect.Method.invoke(Unknown Source)\r\n    \tat org.ops4j.pax.exam.raw.extender.intern.ProbeInvokerImpl.injectContextAndInvoke(ProbeInvokerImpl.java:112)\r\n    \t... 20 more\r\n    \r\n    Caused by: java.lang.RuntimeException: java.lang.ClassCastException: class org.apache.cxf.bus.spring.SpringBusFactory\r\n    \tat org.apache.cxf.BusFactory.newInstance(BusFactory.java:224)\r\n    \tat org.apache.cxf.BusFactory.newInstance(BusFactory.java:194)\r\n    \tat org.apache.cxf.BusFactory.getDefaultBus(BusFactory.java:90)\r\n    \tat org.apache.cxf.BusFactory.getThreadDefaultBus(BusFactory.java:137)\r\n    \tat org.apache.cxf.BusFactory.getThreadDefaultBus(BusFactory.java:122)\r\n    \tat org.apache.cxf.jaxws.spi.ProviderImpl.createServiceDelegate(ProviderImpl.java:89)\r\n    \tat javax.xml.ws.Service.&lt;init&gt;(Service.java:36)\r\n    \tat myorg.engine.test.mocks.soapservice.client.CHMService.&lt;init&gt;(CHMService.java:42)\r\n    \tat myorg.engine.service.OSGiServiceTest.testSoapServiceMock(OSGiServiceTest.java:133)\r\n    \t... 25 more\r\n    \r\n    Caused by: java.lang.ClassCastException: class org.apache.cxf.bus.spring.SpringBusFactory\r\n    \tat java.lang.Class.asSubclass(Unknown Source)\r\n    \tat org.apache.cxf.BusFactory.newInstance(BusFactory.java:218)\r\n    \t... 33 more\r\n\r\n\r\n&lt;/code&gt;\r\n\r\nI said it could be because of different ClassLoader. Is it possible?\r\n\r\nAny idea how to solve the problem?\r\n\r\nThanks!\r\n","title":"ERROR: java.lang.ClassCastException: class org.apache.cxf.bus.spring.SpringBusFactory","body":"<p>Helo!</p>\n\n<p>I'm trying to create a Web Service client using CXF. My application is in OSGi. And I use the Felix Framework.</p>\n\n<p>But the following error occurs:</p>\n\n<p><code></p>\n\n<pre><code>[main] ERROR org.apache.cxf.BusFactory - Failed to determine BusFactory implementation class name.\njava.lang.ClassCastException: class org.apache.cxf.bus.spring.SpringBusFactory\n    at java.lang.Class.asSubclass(Unknown Source)\n    at org.apache.cxf.BusFactory.getBusFactoryClass(BusFactory.java:280)\n    at org.apache.cxf.BusFactory.newInstance(BusFactory.java:207)\n    at org.apache.cxf.BusFactory.newInstance(BusFactory.java:194)\n    at org.apache.cxf.BusFactory.getDefaultBus(BusFactory.java:90)\n    at org.apache.cxf.BusFactory.getThreadDefaultBus(BusFactory.java:137)\n    at org.apache.cxf.BusFactory.getThreadDefaultBus(BusFactory.java:122)\n    at org.apache.cxf.jaxws.spi.ProviderImpl.createServiceDelegate(ProviderImpl.java:89)\n    at javax.xml.ws.Service.&lt;init&gt;(Service.java:36)\n    at myorg.engine.test.mocks.soapservice.client.CHMService.&lt;init&gt;(CHMService.java:42)\n    at myorg.engine.service.OSGiServiceTest.testSoapServiceMock(OSGiServiceTest.java:133)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n    at java.lang.reflect.Method.invoke(Unknown Source)\n    at org.ops4j.pax.exam.raw.extender.intern.ProbeInvokerImpl.injectContextAndInvoke(ProbeInvokerImpl.java:112)\n    at org.ops4j.pax.exam.raw.extender.intern.ProbeInvokerImpl.findAndInvoke(ProbeInvokerImpl.java:71)\n    at org.ops4j.pax.exam.raw.extender.intern.ProbeInvokerImpl.call(ProbeInvokerImpl.java:58)\n    at org.ops4j.pax.exam.nat.internal.NativeTestContainer.call(NativeTestContainer.java:83)\n    at org.ops4j.pax.exam.spi.reactors.EagerSingleStagedReactor.invoke(EagerSingleStagedReactor.java:85)\n    at org.ops4j.pax.exam.junit.JUnit4TestRunner$2.evaluate(JUnit4TestRunner.java:259)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:76)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)\n    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)\n    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)\n    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)\n    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)\n    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)\n    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)\n    at org.ops4j.pax.exam.junit.JUnit4TestRunner.run(JUnit4TestRunner.java:86)\n    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:49)\n    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)\n\n[main] ERROR org.apache.cxf.BusFactory - Failed to instantiate bus factory.\njava.lang.ClassCastException: class org.apache.cxf.bus.spring.SpringBusFactory\n    at java.lang.Class.asSubclass(Unknown Source)\n    at org.apache.cxf.BusFactory.newInstance(BusFactory.java:218)\n    at org.apache.cxf.BusFactory.newInstance(BusFactory.java:194)\n    at org.apache.cxf.BusFactory.getDefaultBus(BusFactory.java:90)\n    at org.apache.cxf.BusFactory.getThreadDefaultBus(BusFactory.java:137)\n    at org.apache.cxf.BusFactory.getThreadDefaultBus(BusFactory.java:122)\n    at org.apache.cxf.jaxws.spi.ProviderImpl.createServiceDelegate(ProviderImpl.java:89)\n    at javax.xml.ws.Service.&lt;init&gt;(Service.java:36)\n    at myorg.engine.test.mocks.soapservice.client.CHMService.&lt;init&gt;(CHMService.java:42)\n    at myorg.engine.service.OSGiServiceTest.testSoapServiceMock(OSGiServiceTest.java:133)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n    at java.lang.reflect.Method.invoke(Unknown Source)\n    at org.ops4j.pax.exam.raw.extender.intern.ProbeInvokerImpl.injectContextAndInvoke(ProbeInvokerImpl.java:112)\n    at org.ops4j.pax.exam.raw.extender.intern.ProbeInvokerImpl.findAndInvoke(ProbeInvokerImpl.java:71)\n    at org.ops4j.pax.exam.raw.extender.intern.ProbeInvokerImpl.call(ProbeInvokerImpl.java:58)\n    at org.ops4j.pax.exam.nat.internal.NativeTestContainer.call(NativeTestContainer.java:83)\n    at org.ops4j.pax.exam.spi.reactors.EagerSingleStagedReactor.invoke(EagerSingleStagedReactor.java:85)\n    at org.ops4j.pax.exam.junit.JUnit4TestRunner$2.evaluate(JUnit4TestRunner.java:259)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:76)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)\n    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)\n    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)\n    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)\n    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)\n    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)\n    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)\n    at org.ops4j.pax.exam.junit.JUnit4TestRunner.run(JUnit4TestRunner.java:86)\n    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:49)\n    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)\n[org.ops4j.pax.exam.junit.JUnit4TestRunner] : Exception\norg.ops4j.pax.exam.TestContainerException: java.lang.reflect.InvocationTargetException\n    at org.ops4j.pax.exam.raw.extender.intern.ProbeInvokerImpl.injectContextAndInvoke(ProbeInvokerImpl.java:118)\n    at org.ops4j.pax.exam.raw.extender.intern.ProbeInvokerImpl.findAndInvoke(ProbeInvokerImpl.java:71)\n    at org.ops4j.pax.exam.raw.extender.intern.ProbeInvokerImpl.call(ProbeInvokerImpl.java:58)\n    at org.ops4j.pax.exam.nat.internal.NativeTestContainer.call(NativeTestContainer.java:83)\n    at org.ops4j.pax.exam.spi.reactors.EagerSingleStagedReactor.invoke(EagerSingleStagedReactor.java:85)\n    at org.ops4j.pax.exam.junit.JUnit4TestRunner$2.evaluate(JUnit4TestRunner.java:259)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:76)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)\n    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)\n    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)\n    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)\n    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)\n    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)\n    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)\n    at org.ops4j.pax.exam.junit.JUnit4TestRunner.run(JUnit4TestRunner.java:86)\n    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:49)\n    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)\n\nCaused by: java.lang.reflect.InvocationTargetException\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n    at java.lang.reflect.Method.invoke(Unknown Source)\n    at org.ops4j.pax.exam.raw.extender.intern.ProbeInvokerImpl.injectContextAndInvoke(ProbeInvokerImpl.java:112)\n    ... 20 more\n\nCaused by: java.lang.RuntimeException: java.lang.ClassCastException: class org.apache.cxf.bus.spring.SpringBusFactory\n    at org.apache.cxf.BusFactory.newInstance(BusFactory.java:224)\n    at org.apache.cxf.BusFactory.newInstance(BusFactory.java:194)\n    at org.apache.cxf.BusFactory.getDefaultBus(BusFactory.java:90)\n    at org.apache.cxf.BusFactory.getThreadDefaultBus(BusFactory.java:137)\n    at org.apache.cxf.BusFactory.getThreadDefaultBus(BusFactory.java:122)\n    at org.apache.cxf.jaxws.spi.ProviderImpl.createServiceDelegate(ProviderImpl.java:89)\n    at javax.xml.ws.Service.&lt;init&gt;(Service.java:36)\n    at myorg.engine.test.mocks.soapservice.client.CHMService.&lt;init&gt;(CHMService.java:42)\n    at myorg.engine.service.OSGiServiceTest.testSoapServiceMock(OSGiServiceTest.java:133)\n    ... 25 more\n\nCaused by: java.lang.ClassCastException: class org.apache.cxf.bus.spring.SpringBusFactory\n    at java.lang.Class.asSubclass(Unknown Source)\n    at org.apache.cxf.BusFactory.newInstance(BusFactory.java:218)\n    ... 33 more\n</code></pre>\n\n<p></code></p>\n\n<p>I said it could be because of different ClassLoader. Is it possible?</p>\n\n<p>Any idea how to solve the problem?</p>\n\n<p>Thanks!</p>\n"},{"tags":["java","android","android-custom-view","layoutparams"],"comments":[{"owner":{"account_id":72095,"reputation":18817,"user_id":208273,"display_name":"Ryan M"},"score":0,"creation_date":1694820689,"post_id":77115772,"comment_id":135946252,"body_markdown":"You have a view (`black_frame`) that&#39;s 100sp wide in the ConstraintLayout.  Thus the wrap_content ConstraintLayout is always going to be at least 100sp wide unless you _also_ change the width of that `black_frame` view.","body":"You have a view (<code>black_frame</code>) that&#39;s 100sp wide in the ConstraintLayout.  Thus the wrap_content ConstraintLayout is always going to be at least 100sp wide unless you <i>also</i> change the width of that <code>black_frame</code> view."},{"owner":{"account_id":270025,"reputation":6187,"user_id":3649629,"accept_rate":67,"display_name":"Gleichmut"},"score":0,"creation_date":1694830844,"post_id":77115772,"comment_id":135946817,"body_markdown":"Please note, ```sp``` usage for layouts views is discourage: ```The sp unit is the same size as a dp, by default, but it resizes based on the user&#39;s preferred text size. Never use sp for layout sizes.``` https://developer.android.com/training/multiscreen/screendensities","body":"Please note, <code>sp</code> usage for layouts views is discourage: <code>The sp unit is the same size as a dp, by default, but it resizes based on the user&#39;s preferred text size. Never use sp for layout sizes.</code> <a href=\"https://developer.android.com/training/multiscreen/screendensities\" rel=\"nofollow noreferrer\">developer.android.com/training/multiscreen/screendensities</a>"}],"answers":[{"tags":[],"owner":{"account_id":14883843,"reputation":193,"user_id":12280406,"display_name":"solitude"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694833234,"creation_date":1694833234,"answer_id":77116192,"question_id":77115772,"body_markdown":"I see that you use the `LayoutParams` it should work when you are trying to modify your width and height of a view dynamically  but I also notice that you have set the width and height in your `text_cell.xml` so your dimensions were overridden by your XML when your layout is inflated.\r\n\r\nYou have 2 options here:\r\n\r\n**1st is to adjust your dimension programmatically after inflating the layout.**\r\n\r\n    private void init(Context context, String text, String color) {\r\n    LayoutInflater inflater = LayoutInflater.from(context);\r\n    inflater.inflate(R.layout.text_cell, this, true);\r\n\r\n    TextView TextInside = findViewById(R.id.color_box);\r\n    View blackFrame = findViewById(R.id.black_frame);\r\n\r\n    // SP to px\r\n    int newWidthInPx = (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_SP, 50, getResources().getDisplayMetrics());\r\n    int newHeightInPx = (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_SP, 35, getResources().getDisplayMetrics());\r\n\r\n    // new dimensions\r\n    blackFrame.getLayoutParams().width = newWidthInPx;\r\n    blackFrame.getLayoutParams().height = newHeightInPx;\r\n    blackFrame.requestLayout(); \r\n\r\n    TextInside.setText(text);\r\n    TextInside.setBackgroundColor(Color.parseColor(color)); }\r\n\r\n**2nd is to modify your dimension before you add it to your parent.**\r\n\r\n    TextCell timestamp = new TextCell(WeekEditing.this,&quot;test&quot;,&quot;#FFD54F&quot;);\r\n    int newWidthInPx = (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_SP, 50, getResources().getDisplayMetrics());\r\n    timestamp.getLayoutParams().width = newWidthInPx;\r\n    TimeStamps.addView(timestamp);\r\n\r\nnow try it if this works out.","title":"How to dynamically change the dimensions of a view","body":"<p>I see that you use the <code>LayoutParams</code> it should work when you are trying to modify your width and height of a view dynamically  but I also notice that you have set the width and height in your <code>text_cell.xml</code> so your dimensions were overridden by your XML when your layout is inflated.</p>\n<p>You have 2 options here:</p>\n<p><strong>1st is to adjust your dimension programmatically after inflating the layout.</strong></p>\n<pre><code>private void init(Context context, String text, String color) {\nLayoutInflater inflater = LayoutInflater.from(context);\ninflater.inflate(R.layout.text_cell, this, true);\n\nTextView TextInside = findViewById(R.id.color_box);\nView blackFrame = findViewById(R.id.black_frame);\n\n// SP to px\nint newWidthInPx = (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_SP, 50, getResources().getDisplayMetrics());\nint newHeightInPx = (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_SP, 35, getResources().getDisplayMetrics());\n\n// new dimensions\nblackFrame.getLayoutParams().width = newWidthInPx;\nblackFrame.getLayoutParams().height = newHeightInPx;\nblackFrame.requestLayout(); \n\nTextInside.setText(text);\nTextInside.setBackgroundColor(Color.parseColor(color)); }\n</code></pre>\n<p><strong>2nd is to modify your dimension before you add it to your parent.</strong></p>\n<pre><code>TextCell timestamp = new TextCell(WeekEditing.this,&quot;test&quot;,&quot;#FFD54F&quot;);\nint newWidthInPx = (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_SP, 50, getResources().getDisplayMetrics());\ntimestamp.getLayoutParams().width = newWidthInPx;\nTimeStamps.addView(timestamp);\n</code></pre>\n<p>now try it if this works out.</p>\n"}],"owner":{"account_id":29350372,"reputation":11,"user_id":22487654,"display_name":"NikoBitan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694833234,"creation_date":1694820285,"question_id":77115772,"body_markdown":"I have a view called TextCell that&#39;s 100sp wide and 35sp tall and a vertical Linear Layout that&#39;s 50sp wide where when i press a button it adds an x amount of TextCells to the layout.\r\n\r\ntext_cell.xml:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;androidx.constraintlayout.widget.ConstraintLayout\r\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;wrap_content&quot;\r\n    android:layout_height=&quot;wrap_content&quot;\r\n    android:layout_gravity=&quot;center&quot;&gt;\r\n\r\n    &lt;androidx.constraintlayout.widget.ConstraintLayout\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:foregroundGravity=&quot;center&quot;\r\n        tools:ignore=&quot;MissingConstraints&quot;&gt;\r\n\r\n        &lt;View\r\n            android:id=&quot;@+id/black_frame&quot;\r\n            android:layout_width=&quot;100sp&quot;\r\n            android:layout_height=&quot;35sp&quot;\r\n            android:background=&quot;@color/black&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\r\n\r\n        &lt;TextView\r\n            android:id=&quot;@+id/color_box&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;@+id/black_frame&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;@+id/black_frame&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;@+id/black_frame&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;@+id/black_frame&quot;\r\n            android:layout_width=&quot;98sp&quot;\r\n            android:layout_height=&quot;33sp&quot;\r\n            android:background=&quot;#ffffff&quot;\r\n            android:gravity=&quot;center&quot;\r\n            android:textColor=&quot;@color/black&quot;\r\n            android:text=&quot;&quot;\r\n            android:autoSizeTextType=&quot;uniform&quot;\r\n            android:lines=&quot;1&quot;\r\n            android:padding=&quot;5sp&quot;\r\n            android:textStyle=&quot;bold&quot;\r\n            android:textAlignment=&quot;center&quot;/&gt;\r\n\r\n    &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n\r\n\r\n\r\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n```\r\nmy TextCell.java class:\r\n\r\n```\r\npackage com.example.teacherplanner;\r\nimport android.content.Context;\r\nimport android.graphics.Color;\r\nimport android.util.AttributeSet;\r\nimport android.view.LayoutInflater;\r\nimport android.widget.RelativeLayout;\r\nimport android.widget.TextView;\r\npublic class TextCell extends RelativeLayout {\r\n\r\n    public TextCell(Context context,String text,String color) {\r\n        super(context);\r\n        init(context,text,color);\r\n    }\r\n    public TextCell(Context context,String text,String color, AttributeSet attrs) {\r\n        super(context, attrs);\r\n        init(context,text,color);\r\n    }\r\n    private void init(Context context, String text, String color) {\r\n        LayoutInflater inflater = LayoutInflater.from(context);\r\n        inflater.inflate(R.layout.text_cell,this,true);\r\n\r\n        TextView TextInside = findViewById(R.id.color_box);\r\n\r\n        TextInside.setText(text);\r\n        TextInside.setBackgroundColor(Color.parseColor(color));\r\n    }\r\n}\r\n\r\n```\r\nhow do i set to be 50sp wide when it&#39;s added to the Layout without setting it to 50sp in xml file bc i use it elsewhere and i need it as it is\r\n\r\n\r\ni tried with LayoutParams:\r\n\r\n```\r\nTextCell timestamp = new TextCell(WeekEditing.this,&quot;test&quot;,&quot;#FFD54F&quot;);\r\ntimestamp.setLayoutParams(new ViewGroup.LayoutParams(\r\n                          ViewGroup.LayoutParams.MATCH_PARENT,\r\n                          ViewGroup.LayoutParams.WRAP_CONTENT\r\n));\r\nTimeStamps.addView(timestamp);\r\n```\r\nand\r\n\r\n```\r\nTextCell timestamp = new TextCell(WeekEditing.this,&quot;test&quot;,&quot;#FFD54F&quot;);\r\nint widthInPixels = (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_SP, 50,  getResources().getDisplayMetrics());\r\n\r\nint heightInPixels = (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_SP, 35, getResources().getDisplayMetrics());\r\n\r\nViewGroup.LayoutParams layoutParams = new ViewGroup.LayoutParams(widthInPixels, heightInPixels);\r\ntimestamp.setLayoutParams(layoutParams);\r\nTimeStamps.addView(timestamp);\r\n```\r\n\r\nbut it stays at 100sp width","title":"How to dynamically change the dimensions of a view","body":"<p>I have a view called TextCell that's 100sp wide and 35sp tall and a vertical Linear Layout that's 50sp wide where when i press a button it adds an x amount of TextCells to the layout.</p>\n<p>text_cell.xml:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;wrap_content&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:layout_gravity=&quot;center&quot;&gt;\n\n    &lt;androidx.constraintlayout.widget.ConstraintLayout\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:foregroundGravity=&quot;center&quot;\n        tools:ignore=&quot;MissingConstraints&quot;&gt;\n\n        &lt;View\n            android:id=&quot;@+id/black_frame&quot;\n            android:layout_width=&quot;100sp&quot;\n            android:layout_height=&quot;35sp&quot;\n            android:background=&quot;@color/black&quot;\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\n            app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\n\n        &lt;TextView\n            android:id=&quot;@+id/color_box&quot;\n            app:layout_constraintBottom_toBottomOf=&quot;@+id/black_frame&quot;\n            app:layout_constraintEnd_toEndOf=&quot;@+id/black_frame&quot;\n            app:layout_constraintStart_toStartOf=&quot;@+id/black_frame&quot;\n            app:layout_constraintTop_toTopOf=&quot;@+id/black_frame&quot;\n            android:layout_width=&quot;98sp&quot;\n            android:layout_height=&quot;33sp&quot;\n            android:background=&quot;#ffffff&quot;\n            android:gravity=&quot;center&quot;\n            android:textColor=&quot;@color/black&quot;\n            android:text=&quot;&quot;\n            android:autoSizeTextType=&quot;uniform&quot;\n            android:lines=&quot;1&quot;\n            android:padding=&quot;5sp&quot;\n            android:textStyle=&quot;bold&quot;\n            android:textAlignment=&quot;center&quot;/&gt;\n\n    &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n\n\n\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n<p>my TextCell.java class:</p>\n<pre><code>package com.example.teacherplanner;\nimport android.content.Context;\nimport android.graphics.Color;\nimport android.util.AttributeSet;\nimport android.view.LayoutInflater;\nimport android.widget.RelativeLayout;\nimport android.widget.TextView;\npublic class TextCell extends RelativeLayout {\n\n    public TextCell(Context context,String text,String color) {\n        super(context);\n        init(context,text,color);\n    }\n    public TextCell(Context context,String text,String color, AttributeSet attrs) {\n        super(context, attrs);\n        init(context,text,color);\n    }\n    private void init(Context context, String text, String color) {\n        LayoutInflater inflater = LayoutInflater.from(context);\n        inflater.inflate(R.layout.text_cell,this,true);\n\n        TextView TextInside = findViewById(R.id.color_box);\n\n        TextInside.setText(text);\n        TextInside.setBackgroundColor(Color.parseColor(color));\n    }\n}\n\n</code></pre>\n<p>how do i set to be 50sp wide when it's added to the Layout without setting it to 50sp in xml file bc i use it elsewhere and i need it as it is</p>\n<p>i tried with LayoutParams:</p>\n<pre><code>TextCell timestamp = new TextCell(WeekEditing.this,&quot;test&quot;,&quot;#FFD54F&quot;);\ntimestamp.setLayoutParams(new ViewGroup.LayoutParams(\n                          ViewGroup.LayoutParams.MATCH_PARENT,\n                          ViewGroup.LayoutParams.WRAP_CONTENT\n));\nTimeStamps.addView(timestamp);\n</code></pre>\n<p>and</p>\n<pre><code>TextCell timestamp = new TextCell(WeekEditing.this,&quot;test&quot;,&quot;#FFD54F&quot;);\nint widthInPixels = (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_SP, 50,  getResources().getDisplayMetrics());\n\nint heightInPixels = (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_SP, 35, getResources().getDisplayMetrics());\n\nViewGroup.LayoutParams layoutParams = new ViewGroup.LayoutParams(widthInPixels, heightInPixels);\ntimestamp.setLayoutParams(layoutParams);\nTimeStamps.addView(timestamp);\n</code></pre>\n<p>but it stays at 100sp width</p>\n"},{"tags":["java","class","object","addition","calculator"],"comments":[{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":4,"creation_date":1694583300,"post_id":77094255,"comment_id":135908495,"body_markdown":"Whilst it is legal to declare a type variable called `Object`, I would strongly discourage it.","body":"Whilst it is legal to declare a type variable called <code>Object</code>, I would strongly discourage it."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":3,"creation_date":1694583528,"post_id":77094255,"comment_id":135908518,"body_markdown":"You can’t. While you can add two integers or two floats, it makes no sense to add two objects, and you will not be able to write code that does. You may try `class Calculator&lt;T extends Number&gt;`, but even that will give you challenges. I can definitely write a number class hat will cause your code to break.","body":"You can’t. While you can add two integers or two floats, it makes no sense to add two objects, and you will not be able to write code that does. You may try <code>class Calculator&lt;T extends Number&gt;</code>, but even that will give you challenges. I can definitely write a number class hat will cause your code to break."},{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":3,"creation_date":1694584094,"post_id":77094255,"comment_id":135908589,"body_markdown":"There is no good way to do what you&#39;re trying to do, and no good reason to do it anyway.","body":"There is no good way to do what you&#39;re trying to do, and no good reason to do it anyway."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1694584194,"post_id":77094255,"comment_id":135908603,"body_markdown":"You can&#39;t just make up syntax and expect it to work magically.","body":"You can&#39;t just make up syntax and expect it to work magically."},{"owner":{"account_id":370994,"reputation":35154,"user_id":719263,"accept_rate":100,"display_name":"Jean-Baptiste Yun&#232;s"},"score":0,"creation_date":1694590610,"post_id":77094255,"comment_id":135909628,"body_markdown":"Alas, Java generics are not designed to let you write something like that.","body":"Alas, Java generics are not designed to let you write something like that."}],"answers":[{"tags":[],"owner":{"account_id":15519832,"reputation":1026,"user_id":11478354,"display_name":"dcolazin"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1694596538,"creation_date":1694596538,"answer_id":77095711,"question_id":77094255,"body_markdown":"If you want to define a generic class, better use a capital letter as the generic type name, for example\r\n\r\n    class Calculator&lt;T&gt; {\r\n        T addition(T first, T second) {\r\n            //how to add two generic objects?\r\n        }\r\n    }\r\n\r\nMaybe you don&#39;t want to add two arbitrary objects, but [`Number`](https://docs.oracle.com/javase/8/docs/api/java/lang/Number.html)s\r\n\r\n    class Calculator&lt;T extends Number&gt; {\r\n        T addition(T first, T second) {\r\n            return first + second; //does not compile!\r\n        }\r\n    }\r\n\r\nThe sad news is that `Number` does not have an `add` method, and you can&#39;t just use the `+` operator. Maybe you can define an abstract class or interface\r\n\r\n    interface Calculator&lt;T extends Number&gt; {\r\n        default T addition(@Nullable T first, @Nullable T second) {\r\n            if (first == null || second == null) {\r\n                return first == null ? second : first;\r\n            }\r\n            return nonNullAddition(first, second);\r\n        }\r\n        \r\n        T nonNullAddition(@NotNull T first, @NotNull T second);\r\n    }\r\n\r\nand implement for the cases you need\r\n\r\n    class IntCalculator implements Calculator&lt;Integer&gt; {\r\n        @Override\r\n        public Integer nonNullAddition(@NotNull Integer first, @NotNull Integer second) {\r\n            return first + second;\r\n        }\r\n    }\r\n    \r\n    class BigDecimalCalculator implements Calculator&lt;BigDecimal&gt; {\r\n        @Override\r\n        public BigDecimal nonNullAddition(@NotNull BigDecimal first, @NotNull BigDecimal second) {\r\n            return first.add(second);\r\n        }\r\n    }\r\n\r\nYet, this might be cumbersome. If you don&#39;t care about precision, you can cast (more properly it is a [widening conversion](https://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.1.2)) everything to `double`; if you care about precision you can use `BigDecimal`.\r\n\r\n\r\n    class Calculator {\r\n        public double addition(double first, double second) {\r\n            return first + second;\r\n        }\r\n\r\n        public BigDecimal addition(BigDecimal first, BigDecimal second) {\r\n            return first.add(second);\r\n        }\r\n    }\r\n\r\nand use it in the following way:\r\n\r\n    double f = 1.0;\r\n\tint i = 2;\r\n\tCalculator calc = new Calculator();\r\n\tdouble sum = calc.addition(f, i);\r\n\tBigDecimal preciseSum = calc.addition(new BigDecimal(f), new BigDecimal(i));","title":"How use Object while creating Generic class?","body":"<p>If you want to define a generic class, better use a capital letter as the generic type name, for example</p>\n<pre><code>class Calculator&lt;T&gt; {\n    T addition(T first, T second) {\n        //how to add two generic objects?\n    }\n}\n</code></pre>\n<p>Maybe you don't want to add two arbitrary objects, but <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Number.html\" rel=\"nofollow noreferrer\"><code>Number</code></a>s</p>\n<pre><code>class Calculator&lt;T extends Number&gt; {\n    T addition(T first, T second) {\n        return first + second; //does not compile!\n    }\n}\n</code></pre>\n<p>The sad news is that <code>Number</code> does not have an <code>add</code> method, and you can't just use the <code>+</code> operator. Maybe you can define an abstract class or interface</p>\n<pre><code>interface Calculator&lt;T extends Number&gt; {\n    default T addition(@Nullable T first, @Nullable T second) {\n        if (first == null || second == null) {\n            return first == null ? second : first;\n        }\n        return nonNullAddition(first, second);\n    }\n    \n    T nonNullAddition(@NotNull T first, @NotNull T second);\n}\n</code></pre>\n<p>and implement for the cases you need</p>\n<pre><code>class IntCalculator implements Calculator&lt;Integer&gt; {\n    @Override\n    public Integer nonNullAddition(@NotNull Integer first, @NotNull Integer second) {\n        return first + second;\n    }\n}\n\nclass BigDecimalCalculator implements Calculator&lt;BigDecimal&gt; {\n    @Override\n    public BigDecimal nonNullAddition(@NotNull BigDecimal first, @NotNull BigDecimal second) {\n        return first.add(second);\n    }\n}\n</code></pre>\n<p>Yet, this might be cumbersome. If you don't care about precision, you can cast (more properly it is a <a href=\"https://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.1.2\" rel=\"nofollow noreferrer\">widening conversion</a>) everything to <code>double</code>; if you care about precision you can use <code>BigDecimal</code>.</p>\n<pre><code>class Calculator {\n    public double addition(double first, double second) {\n        return first + second;\n    }\n\n    public BigDecimal addition(BigDecimal first, BigDecimal second) {\n        return first.add(second);\n    }\n}\n</code></pre>\n<p>and use it in the following way:</p>\n<pre><code>double f = 1.0;\nint i = 2;\nCalculator calc = new Calculator();\ndouble sum = calc.addition(f, i);\nBigDecimal preciseSum = calc.addition(new BigDecimal(f), new BigDecimal(i));\n</code></pre>\n"}],"owner":{"account_id":28967500,"reputation":17,"user_id":22188544,"display_name":"Onkar Dighe"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"accepted_answer_id":77095711,"answer_count":1,"score":-2,"last_activity_date":1694831610,"creation_date":1694582545,"question_id":77094255,"body_markdown":"I want to create a generic class of `Object`.\r\n\r\n```\r\nclass Calculator&lt;Object&gt; {\r\n\r\n         // addition function for addition of two numbers (Integer , Float)\r\n\r\n\tObject addition(Object first, Object second)\r\n\t{\r\n\t\t\r\n\t\treturn  ;    //Should return as Object\r\n\r\n\t}\r\n}\r\n```\r\n\r\n\r\n\r\nThanks in Advance...\r\n(P.S. NOT going to use it in project......Asking just for my conceptual clarity)","title":"How use Object while creating Generic class?","body":"<p>I want to create a generic class of <code>Object</code>.</p>\n<pre><code>class Calculator&lt;Object&gt; {\n\n         // addition function for addition of two numbers (Integer , Float)\n\n    Object addition(Object first, Object second)\n    {\n        \n        return  ;    //Should return as Object\n\n    }\n}\n</code></pre>\n<p>Thanks in Advance...\n(P.S. NOT going to use it in project......Asking just for my conceptual clarity)</p>\n"},{"tags":["java","android","gradle"],"answers":[{"tags":[],"owner":{"account_id":270025,"reputation":6187,"user_id":3649629,"accept_rate":67,"display_name":"Gleichmut"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694831437,"creation_date":1694831437,"answer_id":77116136,"question_id":77115653,"body_markdown":"Usually for two versions of Android app build ```flavors``` or ```variants``` are used:\r\n```\r\n    productFlavors {\r\n        create(&quot;demo&quot;) {\r\n            // Assigns this product flavor to the &quot;version&quot; flavor dimension.\r\n            // If you are using only one dimension, this property is optional,\r\n            // and the plugin automatically assigns all the module&#39;s flavors to\r\n            // that dimension.\r\n            dimension = &quot;version&quot;\r\n            applicationIdSuffix = &quot;.demo&quot;\r\n            versionNameSuffix = &quot;-demo&quot;\r\n        }\r\n        create(&quot;full&quot;) {\r\n            dimension = &quot;version&quot;\r\n            applicationIdSuffix = &quot;.full&quot;\r\n            versionNameSuffix = &quot;-full&quot;\r\n        }\r\n    }\r\n```\r\n[Ref. Android docs][1]\r\n\r\n\r\n  [1]: https://developer.android.com/build/build-variants#dependencies","title":"Use different versions of the same library in one app for different Android versions","body":"<p>Usually for two versions of Android app build <code>flavors</code> or <code>variants</code> are used:</p>\n<pre><code>    productFlavors {\n        create(&quot;demo&quot;) {\n            // Assigns this product flavor to the &quot;version&quot; flavor dimension.\n            // If you are using only one dimension, this property is optional,\n            // and the plugin automatically assigns all the module's flavors to\n            // that dimension.\n            dimension = &quot;version&quot;\n            applicationIdSuffix = &quot;.demo&quot;\n            versionNameSuffix = &quot;-demo&quot;\n        }\n        create(&quot;full&quot;) {\n            dimension = &quot;version&quot;\n            applicationIdSuffix = &quot;.full&quot;\n            versionNameSuffix = &quot;-full&quot;\n        }\n    }\n</code></pre>\n<p><a href=\"https://developer.android.com/build/build-variants#dependencies\" rel=\"nofollow noreferrer\">Ref. Android docs</a></p>\n"}],"owner":{"account_id":7538388,"reputation":1412,"user_id":5723943,"display_name":"Rediska"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694831437,"creation_date":1694817402,"question_id":77115653,"body_markdown":"In my Android app, I am using a library (which I do not control), and the latest version of this library uses java.io features that only became available in Android SDK version 33 (for example, InputStream.transferTo() method). I am not yet willing to raise the minSdkVersion of my app to 33, and I want to use the latest library whenever possible.\r\nIs there a way to include two versions of the library into .AAB file, one for older versions of Android and one for newer versions of Android? If yes, how to set it up in gradle build files?","title":"Use different versions of the same library in one app for different Android versions","body":"<p>In my Android app, I am using a library (which I do not control), and the latest version of this library uses java.io features that only became available in Android SDK version 33 (for example, InputStream.transferTo() method). I am not yet willing to raise the minSdkVersion of my app to 33, and I want to use the latest library whenever possible.\nIs there a way to include two versions of the library into .AAB file, one for older versions of Android and one for newer versions of Android? If yes, how to set it up in gradle build files?</p>\n"},{"tags":["java","android","android-recyclerview","handler","linearlayoutmanager"],"comments":[{"owner":{"account_id":7500341,"reputation":2327,"user_id":5698998,"accept_rate":50,"display_name":"Bishoy Kamel"},"score":0,"creation_date":1517893146,"post_id":48635484,"comment_id":84268122,"body_markdown":"add your full logcat","body":"add your full logcat"},{"owner":{"account_id":1771660,"reputation":8667,"user_id":1616317,"display_name":"karan"},"score":0,"creation_date":1517899226,"post_id":48635484,"comment_id":84270184,"body_markdown":"try settingrecycleable to false in adapters oncreateview","body":"try settingrecycleable to false in adapters oncreateview"}],"answers":[{"tags":[],"owner":{"account_id":10480436,"reputation":55,"user_id":7725586,"display_name":"Jovi Phoe"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1517981752,"creation_date":1517981752,"answer_id":48656658,"question_id":48635484,"body_markdown":"Finally I solved it myself. The cause while I guess, is when you call layoutManager.scrollToPositionWithOffset() method, a scroll event is sent to the handler. The recycler view will not do a real scroll until the looper got the message. So the proper way is use handler.post() after calling scrollToPositionWithOffset().\r\n\r\n    LinearLayoutManager layoutManager = (LinearLayoutManager) mRecycler.getLayoutManager();\r\n    //scroll to make the target page visible\r\n    if (page &lt; layoutManager.findFirstVisibleItemPosition())\r\n        //if the target page is in left and invisible, post: scroll to show one pixel in the screen left\r\n        layoutManager.scrollToPositionWithOffset(page + 1, 1);\r\n    else if (page &gt; layoutManager.findLastVisibleItemPosition())\r\n        //if the target page is in right and invisible, post: scroll to show one pixel in the screen right\r\n        layoutManager.scrollToPositionWithOffset(page, mRecycler.getWidth() - mRecycler.getPaddingLeft() - mRecycler.getPaddingRight() - 1);\r\n    //post: scroll to candidate\r\n    getHandler().post(() -&gt; {\r\n        ViewGroup pageView = (ViewGroup) mRecycler.findViewHolderForAdapterPosition(page).itemView;\r\n        View candView = pageView.getChildAt(cand);\r\n            layoutManager.scrollToPositionWithOffset(page, left ? candView.getLeft() : candView.getRight());\r\n    });","title":"RecyclerView scroll to position of child view&#39;s child","body":"<p>Finally I solved it myself. The cause while I guess, is when you call layoutManager.scrollToPositionWithOffset() method, a scroll event is sent to the handler. The recycler view will not do a real scroll until the looper got the message. So the proper way is use handler.post() after calling scrollToPositionWithOffset().</p>\n\n<pre><code>LinearLayoutManager layoutManager = (LinearLayoutManager) mRecycler.getLayoutManager();\n//scroll to make the target page visible\nif (page &lt; layoutManager.findFirstVisibleItemPosition())\n    //if the target page is in left and invisible, post: scroll to show one pixel in the screen left\n    layoutManager.scrollToPositionWithOffset(page + 1, 1);\nelse if (page &gt; layoutManager.findLastVisibleItemPosition())\n    //if the target page is in right and invisible, post: scroll to show one pixel in the screen right\n    layoutManager.scrollToPositionWithOffset(page, mRecycler.getWidth() - mRecycler.getPaddingLeft() - mRecycler.getPaddingRight() - 1);\n//post: scroll to candidate\ngetHandler().post(() -&gt; {\n    ViewGroup pageView = (ViewGroup) mRecycler.findViewHolderForAdapterPosition(page).itemView;\n    View candView = pageView.getChildAt(cand);\n        layoutManager.scrollToPositionWithOffset(page, left ? candView.getLeft() : candView.getRight());\n});\n</code></pre>\n"}],"owner":{"account_id":10480436,"reputation":55,"user_id":7725586,"display_name":"Jovi Phoe"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1138,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694828994,"creation_date":1517891246,"question_id":48635484,"body_markdown":"I want to scroll to the position in the picture: [![requirement][1]][1]\r\n\r\nHere is my code but there is NullPointerException\r\n\r\n    public class ViewMenu extends LinearLayout {\r\n\t    protected Handler mHandler;\r\n\t    @BindView(R.id.recycler)\r\n\t    protected RecyclerView mRecycler;\r\n\t    //...\r\n        \r\n\t    @Override\r\n\t    protected void onFinishInflate() {\r\n\t\t    super.onFinishInflate();\r\n\t\t    ButterKnife.bind(this);\r\n\t\t    mHandler = new Handler();\r\n\t\t    mRecycler.setLayoutManager(new LinearLayoutManager(getContext(), LinearLayoutManager.HORIZONTAL, false));\r\n\t\t    //...\r\n\t\t    Message msg=new Message();\r\n\t\t    msg.what=1;\r\n\t\t    Bundle bundle=new Bundle();\r\n\t\t    bundle.putInt(&quot;targetPosition&quot;,3);//assume this is a valid position\r\n\t\t    bundle.putInt(&quot;targetChild&quot;,2);//assume this is a valid child\r\n\t\t    msg.setData(bundle);\r\n\t\t    handler.sendMessage(msg);\r\n\t    }\r\n\t    class Handler extends android.os.Handler {\r\n\t\t    @Override\r\n\t\t    public void handleMessage(Message msg) {\r\n\t\t\t    int targetPosition=msg.getData().getInt(&quot;targetPosition&quot;);\r\n\t\t\t    int targetChild=msg.getData().getInt(&quot;targetChild&quot;);\r\n\t\t\t    LinearLayoutManager layoutManager = (LinearLayoutManager) mRecycler.getLayoutManager();\r\n\t\t\t    ViewGroup targetViewGroup = (ViewGroup) layoutManager.findViewByPosition(targetPosition);//targetViewGroup becomes null\r\n\t\t\t    View targetView = targetViewGroup.getChildAt(targetChild);//NullPointerException\r\n\t\t\t    layoutManager.scrollToPositionWithOffset(targetPosition, targetView.getLeft());\r\n\t\t    }\r\n\t    }\r\n    }\r\n\r\nI think the problem is that when the targetViewGroup is invisible findViewByPosition returns null. Can anyone find a better way to do that?\r\n  [1]: https://i.stack.imgur.com/vvbgn.png","title":"RecyclerView scroll to position of child view&#39;s child","body":"<p>I want to scroll to the position in the picture: <a href=\"https://i.stack.imgur.com/vvbgn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vvbgn.png\" alt=\"requirement\"></a></p>\n\n<p>Here is my code but there is NullPointerException</p>\n\n<pre><code>public class ViewMenu extends LinearLayout {\n    protected Handler mHandler;\n    @BindView(R.id.recycler)\n    protected RecyclerView mRecycler;\n    //...\n\n    @Override\n    protected void onFinishInflate() {\n        super.onFinishInflate();\n        ButterKnife.bind(this);\n        mHandler = new Handler();\n        mRecycler.setLayoutManager(new LinearLayoutManager(getContext(), LinearLayoutManager.HORIZONTAL, false));\n        //...\n        Message msg=new Message();\n        msg.what=1;\n        Bundle bundle=new Bundle();\n        bundle.putInt(\"targetPosition\",3);//assume this is a valid position\n        bundle.putInt(\"targetChild\",2);//assume this is a valid child\n        msg.setData(bundle);\n        handler.sendMessage(msg);\n    }\n    class Handler extends android.os.Handler {\n        @Override\n        public void handleMessage(Message msg) {\n            int targetPosition=msg.getData().getInt(\"targetPosition\");\n            int targetChild=msg.getData().getInt(\"targetChild\");\n            LinearLayoutManager layoutManager = (LinearLayoutManager) mRecycler.getLayoutManager();\n            ViewGroup targetViewGroup = (ViewGroup) layoutManager.findViewByPosition(targetPosition);//targetViewGroup becomes null\n            View targetView = targetViewGroup.getChildAt(targetChild);//NullPointerException\n            layoutManager.scrollToPositionWithOffset(targetPosition, targetView.getLeft());\n        }\n    }\n}\n</code></pre>\n\n<p>I think the problem is that when the targetViewGroup is invisible findViewByPosition returns null. Can anyone find a better way to do that?</p>\n"},{"tags":["java","spring-boot","mockito","junit5","spring-test"],"comments":[{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":1,"creation_date":1694808105,"post_id":77115054,"comment_id":135944849,"body_markdown":"You should autowire `RestTemplate` instead of creating one every time you call the method. That makes testing trivial also.","body":"You should autowire <code>RestTemplate</code> instead of creating one every time you call the method. That makes testing trivial also."},{"owner":{"account_id":29455580,"reputation":1,"user_id":22571516,"display_name":"justAGuy"},"score":0,"creation_date":1694808398,"post_id":77115054,"comment_id":135944900,"body_markdown":"I do have it autowired for other http methods but i ran into an issue with using rest template with patch method and had to use a separate http client factory. Using the default client factory gave me a ResourceAccessException","body":"I do have it autowired for other http methods but i ran into an issue with using rest template with patch method and had to use a separate http client factory. Using the default client factory gave me a ResourceAccessException"},{"owner":{"account_id":29455580,"reputation":1,"user_id":22571516,"display_name":"justAGuy"},"score":0,"creation_date":1694917393,"post_id":77115054,"comment_id":135953944,"body_markdown":"So I did figure this out, I can just use setrequestfactory instead of using the constructor with the requestfactory which will let me mock it using traditional mockito","body":"So I did figure this out, I can just use setrequestfactory instead of using the constructor with the requestfactory which will let me mock it using traditional mockito"}],"owner":{"account_id":29455580,"reputation":1,"user_id":22571516,"display_name":"justAGuy"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694828378,"creation_date":1694807921,"question_id":77115054,"body_markdown":"I have a method that needs testing but I am having trouble mocking it. \r\n\r\n```java\r\nvoid updateData(String testData){\r\n    RestTemplate testRT = new RestTemplate(new OkHttp3ClientHttpRequestFactory);\r\n    HttpEntity&lt;String&gt; request = new HttpEntity(testData);\r\n    ResponseEntity&lt;String&gt; =testRT.exchange(“testurl.com”, HttpMethod.PATCH, request, String.class);\r\n}\r\n```\r\n\r\nHow do I go about testing this method by mocking the `restTemplate` dependency?\r\n\r\nI have tried mocking the actual exchange call without mocking the request factory but it gives me an error saying the uri (which in this case was localhost) saying I/O error on patch request like its doing an actual patch request. I am just trying to figure out how to mock.","title":"Mocking RestTemplate that uses OkHttp3ClientHttpRequestFactory using Mockito","body":"<p>I have a method that needs testing but I am having trouble mocking it.</p>\n<pre class=\"lang-java prettyprint-override\"><code>void updateData(String testData){\n    RestTemplate testRT = new RestTemplate(new OkHttp3ClientHttpRequestFactory);\n    HttpEntity&lt;String&gt; request = new HttpEntity(testData);\n    ResponseEntity&lt;String&gt; =testRT.exchange(“testurl.com”, HttpMethod.PATCH, request, String.class);\n}\n</code></pre>\n<p>How do I go about testing this method by mocking the <code>restTemplate</code> dependency?</p>\n<p>I have tried mocking the actual exchange call without mocking the request factory but it gives me an error saying the uri (which in this case was localhost) saying I/O error on patch request like its doing an actual patch request. I am just trying to figure out how to mock.</p>\n"},{"tags":["java","arrays","for-loop","printing","token"],"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":2,"creation_date":1694787381,"post_id":77113098,"comment_id":135941216,"body_markdown":"You can count the number of tokens without using a loop or the `++` operator.  It&#39;s just the length of the array.","body":"You can count the number of tokens without using a loop or the <code>++</code> operator.  It&#39;s just the length of the array."},{"owner":{"account_id":3212023,"reputation":1016,"user_id":17856705,"display_name":"Computable"},"score":0,"creation_date":1694788161,"post_id":77113098,"comment_id":135941389,"body_markdown":"Small nit - if the line started with a delimiter the array length solution would produce an incorrect count hence the `isEmpty` check. Eg. `@He is a very very good boy, isn&#39;t he?`","body":"Small nit - if the line started with a delimiter the array length solution would produce an incorrect count hence the <code>isEmpty</code> check. Eg. <code>@He is a very very good boy, isn&#39;t he?</code>"},{"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"score":0,"creation_date":1694788690,"post_id":77113098,"comment_id":135941489,"body_markdown":"@Computable Actually no, the first `String[]` item will be an empty String so it lenght will be `11`.","body":"@Computable Actually no, the first <code>String[]</code> item will be an empty String so it lenght will be <code>11</code>."},{"owner":{"account_id":3212023,"reputation":1016,"user_id":17856705,"display_name":"Computable"},"score":0,"creation_date":1694788788,"post_id":77113098,"comment_id":135941508,"body_markdown":"Exactly, the count is to be the number of tokens which is 10.","body":"Exactly, the count is to be the number of tokens which is 10."},{"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"score":0,"creation_date":1694788884,"post_id":77113098,"comment_id":135941534,"body_markdown":"Oh, sorry I got confused for a little while.","body":"Oh, sorry I got confused for a little while."}],"answers":[{"tags":[],"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1694828265,"creation_date":1694787772,"answer_id":77113164,"question_id":77113098,"body_markdown":"Like [@markspace][1] said:\r\n\r\n&gt; You can count the number of tokens without using a loop or the ++\r\n&gt; operator. It&#39;s just the length of the array.\r\n\r\nSo, you don&#39;t even need a `tokenCount`, the `tokenCount` is the array size:\r\n\r\n```java\r\nSystem.out.println(tokens.length);\r\n\r\nfor (String token : tokens) {\r\n\tif (!token.isEmpty()) {\r\n\t\tSystem.out.println(token);\r\n\t}\r\n}\r\n```\r\n\r\nBut, like [@Computable][2] said:\r\n\r\n&gt; ...if the line started with a delimiter the array length solution would\r\n&gt; produce an incorrect count hence the isEmpty check...\r\n\r\nSo, if `s` can start with an matcher char, I see 2 solutions:\r\n\r\nThe first is verify the first char of `s` (and remove it if necessary) before the `split`:\r\n\r\n```java\r\nString regex = &quot;[ !,?._&#39;@]+&quot;;\r\n\r\nPattern pattern = Pattern.compile(regex);\r\n\r\nMatcher matcher = pattern.matcher(s);\r\nif (matcher.find()) {\r\n\tString firstMatch = matcher.group();\r\n\tif (s.startsWith(firstMatch)) {\r\n\t\ts = s.substring(firstMatch.length());\r\n\t}\r\n}\r\n\r\nString[] tokens = s.split(regex);\r\n```\r\n\r\nAnd the second is use a `List&lt;String&gt;` based on your code:\r\n```java\r\nList&lt;String&gt; resultTokens = new ArrayList&lt;String&gt;();\r\n\r\nfor (String token : tokens) {\r\n\tif (!token.isEmpty()) {\r\n\t\tresultTokens.add(token);\r\n\t}\r\n}\r\n\r\nSystem.out.println(resultTokens.size());\r\nresultTokens.forEach(System.out::println);\r\n```\r\n**Note**: Using the `List&lt;String&gt;` you don&#39;t need to use the `tokenCount`, you can just call [`size()`][3].\r\n\r\n\r\n  [1]: https://stackoverflow.com/users/2338547/markspace\r\n  [2]: https://stackoverflow.com/users/17856705/computable\r\n  [3]: https://docs.oracle.com/javase/8/docs/api/java/util/List.html#size--","title":"Statement printing at wrong line (Java Token problem)","body":"<p>Like <a href=\"https://stackoverflow.com/users/2338547/markspace\">@markspace</a> said:</p>\n<blockquote>\n<p>You can count the number of tokens without using a loop or the ++\noperator. It's just the length of the array.</p>\n</blockquote>\n<p>So, you don't even need a <code>tokenCount</code>, the <code>tokenCount</code> is the array size:</p>\n<pre class=\"lang-java prettyprint-override\"><code>System.out.println(tokens.length);\n\nfor (String token : tokens) {\n    if (!token.isEmpty()) {\n        System.out.println(token);\n    }\n}\n</code></pre>\n<p>But, like <a href=\"https://stackoverflow.com/users/17856705/computable\">@Computable</a> said:</p>\n<blockquote>\n<p>...if the line started with a delimiter the array length solution would\nproduce an incorrect count hence the isEmpty check...</p>\n</blockquote>\n<p>So, if <code>s</code> can start with an matcher char, I see 2 solutions:</p>\n<p>The first is verify the first char of <code>s</code> (and remove it if necessary) before the <code>split</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String regex = &quot;[ !,?._'@]+&quot;;\n\nPattern pattern = Pattern.compile(regex);\n\nMatcher matcher = pattern.matcher(s);\nif (matcher.find()) {\n    String firstMatch = matcher.group();\n    if (s.startsWith(firstMatch)) {\n        s = s.substring(firstMatch.length());\n    }\n}\n\nString[] tokens = s.split(regex);\n</code></pre>\n<p>And the second is use a <code>List&lt;String&gt;</code> based on your code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;String&gt; resultTokens = new ArrayList&lt;String&gt;();\n\nfor (String token : tokens) {\n    if (!token.isEmpty()) {\n        resultTokens.add(token);\n    }\n}\n\nSystem.out.println(resultTokens.size());\nresultTokens.forEach(System.out::println);\n</code></pre>\n<p><strong>Note</strong>: Using the <code>List&lt;String&gt;</code> you don't need to use the <code>tokenCount</code>, you can just call <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/List.html#size--\" rel=\"nofollow noreferrer\"><code>size()</code></a>.</p>\n"},{"tags":[],"owner":{"account_id":11155195,"reputation":1204,"user_id":8187167,"display_name":"Prudhviraj"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1694788160,"creation_date":1694788160,"answer_id":77113206,"question_id":77113098,"body_markdown":"    List&lt;String&gt; nonEmptyTokens = new ArrayList&lt;&gt;();\r\n\r\n    for (String token : tokens) {\r\n        if (!token.isEmpty()) {\r\n            nonEmptyTokens.add(token);\r\n        }         \r\n    }\r\n\r\n    System.out.println(nonEmptyTokens.size());\r\n\r\n    for (String token : nonEmptyTokens) {\r\n        System.out.println(token);\r\n    }\r\n\r\nMay be you can use `size()` of new arraylist.","title":"Statement printing at wrong line (Java Token problem)","body":"<pre><code>List&lt;String&gt; nonEmptyTokens = new ArrayList&lt;&gt;();\n\nfor (String token : tokens) {\n    if (!token.isEmpty()) {\n        nonEmptyTokens.add(token);\n    }         \n}\n\nSystem.out.println(nonEmptyTokens.size());\n\nfor (String token : nonEmptyTokens) {\n    System.out.println(token);\n}\n</code></pre>\n<p>May be you can use <code>size()</code> of new arraylist.</p>\n"}],"owner":{"account_id":28123582,"reputation":85,"user_id":21489407,"display_name":"Habib"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":103,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"accepted_answer_id":77113164,"answer_count":2,"score":2,"last_activity_date":1694828265,"creation_date":1694787178,"question_id":77113098,"body_markdown":"**Problem Outline:**\r\n\r\nGiven a string, &#39;s&#39;, matching the regular expression [A-Za-z !,?._&#39;@]+, I have to split the string into tokens. &quot;We define a token to be one or more consecutive English alphabetic letters.&quot; Then, print the number of tokens, followed by each token on a new line.\r\n\r\n**Sample input:**\r\n```\r\nHe is a very very good boy, isn&#39;t he?\r\n```\r\n\r\n**Sample output:**\r\n```\r\n10\r\nHe\r\nis\r\na\r\nvery\r\nvery\r\ngood\r\nboy\r\nisn\r\nt\r\nhe\r\n```\r\nExplanation:\r\n\r\nThere are a total of 10 such tokens in string &#39;s&#39;, and each token is printed in the same order in which it appears in string &#39;s&#39;.\r\n\r\n\r\n**My approach**\r\n\r\n```\r\nimport java.io.*;\r\nimport java.util.*;\r\n\r\npublic class Solution {\r\n\r\n    public static void main(String[] args) {\r\n        /* Enter your code here. Read input from STDIN. Print output to STDOUT. Your class should be named Solution. */\r\n        \r\n        Scanner scan = new Scanner(System.in);\r\n        String s = scan.nextLine();\r\n\r\n        \r\n        String[] tokens = s.split(&quot;[ !,?._&#39;@]+&quot;);\r\n\r\n        int tokenCount = 0;\r\n        \r\n        for (String token : tokens) {\r\n            if (!token.isEmpty()) {\r\n                tokenCount++;\r\n                System.out.println(token);\r\n            }         \r\n        }\r\n\r\n        System.out.println(tokenCount);\r\n    }\r\n}\r\n```\r\n\r\n**My Output:**\r\n```\r\nHe\r\nis\r\na\r\nvery\r\nvery\r\ngood\r\nboy\r\nisn\r\nt\r\nhe\r\n10\r\n```\r\n\r\nThe only problem I&#39;m getting is that the number is being printed at the last line whereas I need it at first. I&#39;ve tried playing about with the print statement and putting it in places where I thought it could work like exactly above the for loop and more places but it just either produces errors or prints the wrong values.\r\n\r\nI just need some quick advice on how I can get the number printed at the top. Thanks.\r\n","title":"Statement printing at wrong line (Java Token problem)","body":"<p><strong>Problem Outline:</strong></p>\n<p>Given a string, 's', matching the regular expression [A-Za-z !,?._'@]+, I have to split the string into tokens. &quot;We define a token to be one or more consecutive English alphabetic letters.&quot; Then, print the number of tokens, followed by each token on a new line.</p>\n<p><strong>Sample input:</strong></p>\n<pre><code>He is a very very good boy, isn't he?\n</code></pre>\n<p><strong>Sample output:</strong></p>\n<pre><code>10\nHe\nis\na\nvery\nvery\ngood\nboy\nisn\nt\nhe\n</code></pre>\n<p>Explanation:</p>\n<p>There are a total of 10 such tokens in string 's', and each token is printed in the same order in which it appears in string 's'.</p>\n<p><strong>My approach</strong></p>\n<pre><code>import java.io.*;\nimport java.util.*;\n\npublic class Solution {\n\n    public static void main(String[] args) {\n        /* Enter your code here. Read input from STDIN. Print output to STDOUT. Your class should be named Solution. */\n        \n        Scanner scan = new Scanner(System.in);\n        String s = scan.nextLine();\n\n        \n        String[] tokens = s.split(&quot;[ !,?._'@]+&quot;);\n\n        int tokenCount = 0;\n        \n        for (String token : tokens) {\n            if (!token.isEmpty()) {\n                tokenCount++;\n                System.out.println(token);\n            }         \n        }\n\n        System.out.println(tokenCount);\n    }\n}\n</code></pre>\n<p><strong>My Output:</strong></p>\n<pre><code>He\nis\na\nvery\nvery\ngood\nboy\nisn\nt\nhe\n10\n</code></pre>\n<p>The only problem I'm getting is that the number is being printed at the last line whereas I need it at first. I've tried playing about with the print statement and putting it in places where I thought it could work like exactly above the for loop and more places but it just either produces errors or prints the wrong values.</p>\n<p>I just need some quick advice on how I can get the number printed at the top. Thanks.</p>\n"},{"tags":["java","intellij-idea","minecraft","minecraft-fabric"],"comments":[{"owner":{"account_id":19928682,"reputation":410,"user_id":14602745,"display_name":"JPlusPlus"},"score":0,"creation_date":1687292933,"post_id":76503206,"comment_id":134915664,"body_markdown":"Could you please post what Minecraft version you&#39;re using, along with your `fabric.mod.json` and your mixin configuration file?","body":"Could you please post what Minecraft version you&#39;re using, along with your <code>fabric.mod.json</code> and your mixin configuration file?"}],"answers":[{"tags":[],"owner":{"account_id":22302422,"reputation":1,"user_id":16527488,"display_name":"Tran Minh Tuan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692852710,"creation_date":1692852710,"answer_id":76966296,"question_id":76503206,"body_markdown":"I have the same error but after wandering around, I finally found out how to fix it.\r\n\r\n1. You will go to src/client/resources/ and edit the file modid.client.mixins.json\r\n2. Change **&quot;package&quot;: &quot;com.example.mixin.client&quot;** to:\r\n   **&quot;package&quot;: &quot;ryoogah.testmod.mixin&quot;,**\r\n3. Change **&quot;client&quot;: [\r\n\t\t&quot;whatever inside here&quot;\r\n\t],**                to: **&quot;client&quot;: [\r\n\t\t&quot;your mixin file name&quot;\r\n\t],**\r\n","title":"FabricMC wont launch when using my IDE &quot;Mixin transformation of net.minecraft.client.main failed&quot;","body":"<p>I have the same error but after wandering around, I finally found out how to fix it.</p>\n<ol>\n<li>You will go to src/client/resources/ and edit the file modid.client.mixins.json</li>\n<li>Change <strong>&quot;package&quot;: &quot;com.example.mixin.client&quot;</strong> to:\n<strong>&quot;package&quot;: &quot;ryoogah.testmod.mixin&quot;,</strong></li>\n<li>Change <strong>&quot;client&quot;: [\n&quot;whatever inside here&quot;\n],</strong>                to: <strong>&quot;client&quot;: [\n&quot;your mixin file name&quot;\n],</strong></li>\n</ol>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1695181394,"post_id":77116030,"comment_id":135988228,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/77116030/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":29456722,"reputation":1,"user_id":22572431,"display_name":"zers"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694827469,"creation_date":1694827469,"answer_id":77116030,"question_id":76503206,"body_markdown":"if the other answer doesn&#39;t work for anyone like it didn&#39;t work for me here&#39;s what to do to fix the error\r\n\r\n - open your mods folder and open a folder inside of it called &quot;bin&quot;\r\n - replace the (yourmodid).mixins.json with the json from src/main/resources ","title":"FabricMC wont launch when using my IDE &quot;Mixin transformation of net.minecraft.client.main failed&quot;","body":"<p>if the other answer doesn't work for anyone like it didn't work for me here's what to do to fix the error</p>\n<ul>\n<li>open your mods folder and open a folder inside of it called &quot;bin&quot;</li>\n<li>replace the (yourmodid).mixins.json with the json from src/main/resources</li>\n</ul>\n"}],"owner":{"account_id":28847479,"reputation":1,"user_id":22094120,"display_name":"Ryoogah"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2319,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1694827469,"creation_date":1687139862,"question_id":76503206,"body_markdown":"I&#39;m trying to create my fabric mod just to the point where I can actually launch a vanilla instance of minecraft before I actually get the the modding part, but whenever I run the `runClient` gradle task I get:\r\n```\r\nUncaught exception in thread &quot;main&quot;\r\njava.lang.RuntimeException: Mixin transformation of net.minecraft.client.main.Main failed\r\n\tat net.fabricmc.loader.impl.launch.knot.KnotClassDelegate.getPostMixinClassByteArray(KnotClassDelegate.java:427)\r\n\tat net.fabricmc.loader.impl.launch.knot.KnotClassDelegate.tryLoadClass(KnotClassDelegate.java:323)\r\n\tat net.fabricmc.loader.impl.launch.knot.KnotClassDelegate.loadClass(KnotClassDelegate.java:218)\r\n\tat net.fabricmc.loader.impl.launch.knot.KnotClassLoader.loadClass(KnotClassLoader.java:112)\r\n\tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521)\r\n\tat net.fabricmc.loader.impl.game.minecraft.MinecraftGameProvider.launch(MinecraftGameProvider.java:461)\r\n\tat net.fabricmc.loader.impl.launch.knot.Knot.launch(Knot.java:74)\r\n\tat net.fabricmc.loader.impl.launch.knot.KnotClient.main(KnotClient.java:23)\r\n\tat net.fabricmc.devlaunchinjector.Main.main(Main.java:86)\r\nCaused by: org.spongepowered.asm.mixin.throwables.MixinApplyError: Mixin [testmod.mixins.json:net.ryoogah.testmod.mixin.json from mod testmod] from phase [DEFAULT] in config [testmod.mixins.json] FAILED during PREPARE\r\n\tat org.spongepowered.asm.mixin.transformer.MixinProcessor.handleMixinError(MixinProcessor.java:638)\r\n\tat org.spongepowered.asm.mixin.transformer.MixinProcessor.handleMixinPrepareError(MixinProcessor.java:585)\r\n\tat org.spongepowered.asm.mixin.transformer.MixinProcessor.prepareConfigs(MixinProcessor.java:543)\r\n\tat org.spongepowered.asm.mixin.transformer.MixinProcessor.select(MixinProcessor.java:462)\r\n\tat org.spongepowered.asm.mixin.transformer.MixinProcessor.checkSelect(MixinProcessor.java:438)\r\n\tat org.spongepowered.asm.mixin.transformer.MixinProcessor.applyMixins(MixinProcessor.java:290)\r\n\tat org.spongepowered.asm.mixin.transformer.MixinTransformer.transformClass(MixinTransformer.java:234)\r\n\tat org.spongepowered.asm.mixin.transformer.MixinTransformer.transformClassBytes(MixinTransformer.java:202)\r\n\tat net.fabricmc.loader.impl.launch.knot.KnotClassDelegate.getPostMixinClassByteArray(KnotClassDelegate.java:422)\r\n8 more\r\nCaused by: org.spongepowered.asm.mixin.transformer.throwables.InvalidMixinException: The specified mixin &#39;net.ryoogah.testmod.mixin.net.ryoogah.testmod.mixin.json&#39; was not found\r\n\tat org.spongepowered.asm.mixin.transformer.MixinInfo.&lt;init&gt;(MixinInfo.java:865)\r\n\tat org.spongepowered.asm.mixin.transformer.MixinConfig.prepareMixins(MixinConfig.java:852)\r\n\tat org.spongepowered.asm.mixin.transformer.MixinConfig.prepare(MixinConfig.java:777)\r\n\tat org.spongepowered.asm.mixin.transformer.MixinProcessor.prepareConfigs(MixinProcessor.java:540)\r\n14 more\r\nCaused by: java.lang.ClassNotFoundException: The specified mixin &#39;net.ryoogah.testmod.mixin.net.ryoogah.testmod.mixin.json&#39; was not found\r\n\tat org.spongepowered.asm.mixin.transformer.MixinInfo.loadMixinClass(MixinInfo.java:1314)\r\n\tat org.spongepowered.asm.mixin.transformer.MixinInfo.&lt;init&gt;(MixinInfo.java:858)\r\n17 more\r\n```\r\n\r\nIt seems to be something with the `mixins.json` file because thats the only file that I&#39;m getting an error in before running, also the crash report seems to be relating to the mixin.\r\n[Using the example mod that fabric provides](https://i.stack.imgur.com/QditK.png)\r\n\r\nI&#39;ve tried deleting the `net.ryoogah.testmod.mixin.ExampleMixin` line all together because that&#39;s what [this guys](https://youtu.be/RSqSZoJQXvg?list=PLKGarocXCE1EeLZggaXPJaARxnAbUD8Y_&amp;t=645) *Timestamp 10:45* `mixins.json` file looked like. And that seemed to get rid of the error notice at the top, but when launching it still crashed with the same error.\r\n\r\nWould it have anything to do with me using Java 18?","title":"FabricMC wont launch when using my IDE &quot;Mixin transformation of net.minecraft.client.main failed&quot;","body":"<p>I'm trying to create my fabric mod just to the point where I can actually launch a vanilla instance of minecraft before I actually get the the modding part, but whenever I run the <code>runClient</code> gradle task I get:</p>\n<pre><code>Uncaught exception in thread &quot;main&quot;\njava.lang.RuntimeException: Mixin transformation of net.minecraft.client.main.Main failed\n    at net.fabricmc.loader.impl.launch.knot.KnotClassDelegate.getPostMixinClassByteArray(KnotClassDelegate.java:427)\n    at net.fabricmc.loader.impl.launch.knot.KnotClassDelegate.tryLoadClass(KnotClassDelegate.java:323)\n    at net.fabricmc.loader.impl.launch.knot.KnotClassDelegate.loadClass(KnotClassDelegate.java:218)\n    at net.fabricmc.loader.impl.launch.knot.KnotClassLoader.loadClass(KnotClassLoader.java:112)\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521)\n    at net.fabricmc.loader.impl.game.minecraft.MinecraftGameProvider.launch(MinecraftGameProvider.java:461)\n    at net.fabricmc.loader.impl.launch.knot.Knot.launch(Knot.java:74)\n    at net.fabricmc.loader.impl.launch.knot.KnotClient.main(KnotClient.java:23)\n    at net.fabricmc.devlaunchinjector.Main.main(Main.java:86)\nCaused by: org.spongepowered.asm.mixin.throwables.MixinApplyError: Mixin [testmod.mixins.json:net.ryoogah.testmod.mixin.json from mod testmod] from phase [DEFAULT] in config [testmod.mixins.json] FAILED during PREPARE\n    at org.spongepowered.asm.mixin.transformer.MixinProcessor.handleMixinError(MixinProcessor.java:638)\n    at org.spongepowered.asm.mixin.transformer.MixinProcessor.handleMixinPrepareError(MixinProcessor.java:585)\n    at org.spongepowered.asm.mixin.transformer.MixinProcessor.prepareConfigs(MixinProcessor.java:543)\n    at org.spongepowered.asm.mixin.transformer.MixinProcessor.select(MixinProcessor.java:462)\n    at org.spongepowered.asm.mixin.transformer.MixinProcessor.checkSelect(MixinProcessor.java:438)\n    at org.spongepowered.asm.mixin.transformer.MixinProcessor.applyMixins(MixinProcessor.java:290)\n    at org.spongepowered.asm.mixin.transformer.MixinTransformer.transformClass(MixinTransformer.java:234)\n    at org.spongepowered.asm.mixin.transformer.MixinTransformer.transformClassBytes(MixinTransformer.java:202)\n    at net.fabricmc.loader.impl.launch.knot.KnotClassDelegate.getPostMixinClassByteArray(KnotClassDelegate.java:422)\n8 more\nCaused by: org.spongepowered.asm.mixin.transformer.throwables.InvalidMixinException: The specified mixin 'net.ryoogah.testmod.mixin.net.ryoogah.testmod.mixin.json' was not found\n    at org.spongepowered.asm.mixin.transformer.MixinInfo.&lt;init&gt;(MixinInfo.java:865)\n    at org.spongepowered.asm.mixin.transformer.MixinConfig.prepareMixins(MixinConfig.java:852)\n    at org.spongepowered.asm.mixin.transformer.MixinConfig.prepare(MixinConfig.java:777)\n    at org.spongepowered.asm.mixin.transformer.MixinProcessor.prepareConfigs(MixinProcessor.java:540)\n14 more\nCaused by: java.lang.ClassNotFoundException: The specified mixin 'net.ryoogah.testmod.mixin.net.ryoogah.testmod.mixin.json' was not found\n    at org.spongepowered.asm.mixin.transformer.MixinInfo.loadMixinClass(MixinInfo.java:1314)\n    at org.spongepowered.asm.mixin.transformer.MixinInfo.&lt;init&gt;(MixinInfo.java:858)\n17 more\n</code></pre>\n<p>It seems to be something with the <code>mixins.json</code> file because thats the only file that I'm getting an error in before running, also the crash report seems to be relating to the mixin.\n<a href=\"https://i.stack.imgur.com/QditK.png\" rel=\"nofollow noreferrer\">Using the example mod that fabric provides</a></p>\n<p>I've tried deleting the <code>net.ryoogah.testmod.mixin.ExampleMixin</code> line all together because that's what <a href=\"https://youtu.be/RSqSZoJQXvg?list=PLKGarocXCE1EeLZggaXPJaARxnAbUD8Y_&amp;t=645\" rel=\"nofollow noreferrer\">this guys</a> <em>Timestamp 10:45</em> <code>mixins.json</code> file looked like. And that seemed to get rid of the error notice at the top, but when launching it still crashed with the same error.</p>\n<p>Would it have anything to do with me using Java 18?</p>\n"},{"tags":["java","spring","spring-mvc","itext","response"],"answers":[{"comments":[{"owner":{"account_id":2301563,"reputation":2022,"user_id":2021766,"accept_rate":46,"display_name":"Maheshwaran K"},"score":0,"creation_date":1369112399,"post_id":16656382,"comment_id":23971579,"body_markdown":"That helped me. Thanks a lot!!! I have one more. here I am storing the generated pdf to my file system and then reading it and converting it to bytes. What should I do if I have to convert the generated pdf on the go. Thanks in advance","body":"That helped me. Thanks a lot!!! I have one more. here I am storing the generated pdf to my file system and then reading it and converting it to bytes. What should I do if I have to convert the generated pdf on the go. Thanks in advance"},{"owner":{"account_id":1287824,"reputation":12974,"user_id":1240557,"display_name":"kryger"},"score":8,"creation_date":1369142792,"post_id":16656382,"comment_id":23986517,"body_markdown":"Instead of using `FileOutputStream` in your `PdfWriter.getInstance()` you could use a `ByteArrayOutputStream`.","body":"Instead of using <code>FileOutputStream</code> in your <code>PdfWriter.getInstance()</code> you could use a <code>ByteArrayOutputStream</code>."},{"owner":{"display_name":"user1685185"},"score":0,"creation_date":1392780805,"post_id":16656382,"comment_id":33112414,"body_markdown":"@kryger, do you know how to open the PDF file in a browser window? I used your method and I prompts the user to save the file immediately :)","body":"@kryger, do you know how to open the PDF file in a browser window? I used your method and I prompts the user to save the file immediately :)"},{"owner":{"account_id":27445,"reputation":31727,"user_id":72478,"accept_rate":76,"display_name":"cherouvim"},"score":1,"creation_date":1404215258,"post_id":16656382,"comment_id":37944960,"body_markdown":"Why store a file on the filesystem?","body":"Why store a file on the filesystem?"},{"owner":{"account_id":1287824,"reputation":12974,"user_id":1240557,"display_name":"kryger"},"score":0,"creation_date":1404222160,"post_id":16656382,"comment_id":37949076,"body_markdown":"@cherouvim not sure what you mean (the file example comes from OP&#39;s question, in the comments I mentioned how to do it without `FileOutputStream`), but *&quot;thanks&quot;* for the downvote.","body":"@cherouvim not sure what you mean (the file example comes from OP&#39;s question, in the comments I mentioned how to do it without <code>FileOutputStream</code>), but <i>&quot;thanks&quot;</i> for the downvote."},{"owner":{"account_id":27445,"reputation":31727,"user_id":72478,"accept_rate":76,"display_name":"cherouvim"},"score":0,"creation_date":1404225002,"post_id":16656382,"comment_id":37950934,"body_markdown":"@kryger: My bad, you are right. Sorry for the downvote, cant undo it now (past 2 hours). I&#39;ve upvoted you elsewhere to compensate.","body":"@kryger: My bad, you are right. Sorry for the downvote, cant undo it now (past 2 hours). I&#39;ve upvoted you elsewhere to compensate."},{"owner":{"account_id":5725404,"reputation":2915,"user_id":4522512,"accept_rate":43,"display_name":"Shivkumar Mallesappa"},"score":0,"creation_date":1524743353,"post_id":16656382,"comment_id":87100281,"body_markdown":"I am not understanding the root cause of the issue . I have a simple endpoint from where I want to render pdf. I am able to download the pdf but it is blank and if I use &quot;application/octet-stream&quot; I see that contents are there. So what might be the issue ? Thanks","body":"I am not understanding the root cause of the issue . I have a simple endpoint from where I want to render pdf. I am able to download the pdf but it is blank and if I use &quot;application/octet-stream&quot; I see that contents are there. So what might be the issue ? Thanks"},{"owner":{"account_id":79489,"reputation":1968,"user_id":225341,"display_name":"Victor Ionescu"},"score":0,"creation_date":1535723970,"post_id":16656382,"comment_id":91185001,"body_markdown":"Thank you, it worked fine. I&#39;ve used GET instead of POST: @RequestMapping(value=&quot;/getpdf/{idpdf}&quot;, method=RequestMethod.GET)","body":"Thank you, it worked fine. I&#39;ve used GET instead of POST: @RequestMapping(value=&quot;/getpdf/{idpdf}&quot;, method=RequestMethod.GET)"},{"owner":{"account_id":129495,"reputation":7313,"user_id":328121,"accept_rate":62,"display_name":"Przemek Nowak"},"score":4,"creation_date":1538549153,"post_id":16656382,"comment_id":92176050,"body_markdown":"Since Spring 4.3 `MediaType.APPLICATION_PDF` is available as static variable.","body":"Since Spring 4.3 <code>MediaType.APPLICATION_PDF</code> is available as static variable."},{"owner":{"account_id":3833299,"reputation":248,"user_id":3178306,"display_name":"Jean-Christophe Robertson"},"score":0,"creation_date":1556898551,"post_id":16656382,"comment_id":98597248,"body_markdown":"For me doing this in Chrome and attempting to save it results in a Failed - network error. Works fine on other browsers and can be worked around with print -&gt; save as pdf. Why does this only happen in chrome and how can I correct it?","body":"For me doing this in Chrome and attempting to save it results in a Failed - network error. Works fine on other browsers and can be worked around with print -&gt; save as pdf. Why does this only happen in chrome and how can I correct it?"},{"owner":{"account_id":4973840,"reputation":287,"user_id":4000797,"display_name":"Deepak"},"score":0,"creation_date":1700476413,"post_id":16656382,"comment_id":136654996,"body_markdown":"@kryger how to call this REST API from angular code and show pdf on browser?","body":"@kryger how to call this REST API from angular code and show pdf on browser?"}],"tags":[],"owner":{"account_id":1287824,"reputation":12974,"user_id":1240557,"display_name":"kryger"},"comment_count":11,"down_vote_count":1,"up_vote_count":159,"is_accepted":true,"score":158,"last_activity_date":1556912542,"creation_date":1369076071,"answer_id":16656382,"question_id":16652760,"body_markdown":"You were on the right track with `response.getOutputStream()`, but you&#39;re not using its output anywhere in your code. Essentially what you need to do is to stream the PDF file&#39;s bytes directly to the output stream and flush the response. In Spring you can do it like this:\r\n\r\n    @RequestMapping(value=&quot;/getpdf&quot;, method=RequestMethod.POST)\r\n    public ResponseEntity&lt;byte[]&gt; getPDF(@RequestBody String json) {\r\n        // convert JSON to Employee \r\n        Employee emp = convertSomehow(json);\r\n\r\n        // generate the file\r\n        PdfUtil.showHelp(emp);\r\n\r\n        // retrieve contents of &quot;C:/tmp/report.pdf&quot; that were written in showHelp\r\n        byte[] contents = (...);\r\n\r\n        HttpHeaders headers = new HttpHeaders();\r\n        headers.setContentType(MediaType.APPLICATION_PDF);\r\n        // Here you have to set the actual filename of your pdf\r\n        String filename = &quot;output.pdf&quot;;\r\n        headers.setContentDispositionFormData(filename, filename);\r\n        headers.setCacheControl(&quot;must-revalidate, post-check=0, pre-check=0&quot;);\r\n        ResponseEntity&lt;byte[]&gt; response = new ResponseEntity&lt;&gt;(contents, headers, HttpStatus.OK);\r\n        return response;\r\n    }\r\n\r\n\r\nNotes:\r\n\r\n* use meaningful names for your methods: naming a method that writes a PDF document `showHelp` is *not* a good idea\r\n* reading a file into a `byte[]`: example [here][1]\r\n* I&#39;d suggest adding a random string to the temporary PDF file name inside `showHelp()` to avoid overwriting the file if two users send a request at the same time\r\n\r\n[1]: https://stackoverflow.com/questions/858980/file-to-byte-in-java","title":"Return generated pdf using spring MVC","body":"<p>You were on the right track with <code>response.getOutputStream()</code>, but you're not using its output anywhere in your code. Essentially what you need to do is to stream the PDF file's bytes directly to the output stream and flush the response. In Spring you can do it like this:</p>\n\n<pre><code>@RequestMapping(value=\"/getpdf\", method=RequestMethod.POST)\npublic ResponseEntity&lt;byte[]&gt; getPDF(@RequestBody String json) {\n    // convert JSON to Employee \n    Employee emp = convertSomehow(json);\n\n    // generate the file\n    PdfUtil.showHelp(emp);\n\n    // retrieve contents of \"C:/tmp/report.pdf\" that were written in showHelp\n    byte[] contents = (...);\n\n    HttpHeaders headers = new HttpHeaders();\n    headers.setContentType(MediaType.APPLICATION_PDF);\n    // Here you have to set the actual filename of your pdf\n    String filename = \"output.pdf\";\n    headers.setContentDispositionFormData(filename, filename);\n    headers.setCacheControl(\"must-revalidate, post-check=0, pre-check=0\");\n    ResponseEntity&lt;byte[]&gt; response = new ResponseEntity&lt;&gt;(contents, headers, HttpStatus.OK);\n    return response;\n}\n</code></pre>\n\n<p>Notes:</p>\n\n<ul>\n<li>use meaningful names for your methods: naming a method that writes a PDF document <code>showHelp</code> is <em>not</em> a good idea</li>\n<li>reading a file into a <code>byte[]</code>: example <a href=\"https://stackoverflow.com/questions/858980/file-to-byte-in-java\">here</a></li>\n<li>I'd suggest adding a random string to the temporary PDF file name inside <code>showHelp()</code> to avoid overwriting the file if two users send a request at the same time</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":29583,"reputation":7140,"user_id":80075,"accept_rate":100,"display_name":"Tony BenBrahim"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694825851,"creation_date":1694825851,"answer_id":77115968,"question_id":16652760,"body_markdown":"Generally, you do not want to use `ResponseEntity&lt;byte[]&gt;`, unless you are certain that the binary data is very small.\r\nTypically you will want to use `ResponseEntity&lt;InputStreamResource&gt;`\r\n```java\r\n@GetMapping(&quot;/file&quot;)\r\npublic ResponseEntity&lt;InputStreamResource&gt; getFile(){\r\n  // figure out what filePath is. filePath=...\r\n  try (FileInputStream fileInputStream = new FileInputStream(filePath)){\r\n    InputStreamResource inputStreamResource = new InputStreamResource(fileInputStream);\r\n    HttpHeaders headers = new HttpHeaders();\r\n    headers.setContentLength(Files.size(Paths.get(filePath)));//optional\r\n    headers.setContentDisposition(&quot;attachment&quot;, &quot;somefile.pdf&quot;); //optional\r\n    headers.setContentType(&quot;application/pdf&quot;); //optional\r\n    return new ResponseEntity(inputStreamResource, headers, HttpStatus.OK);\r\n}\r\n```\r\n","title":"Return generated pdf using spring MVC","body":"<p>Generally, you do not want to use <code>ResponseEntity&lt;byte[]&gt;</code>, unless you are certain that the binary data is very small.\nTypically you will want to use <code>ResponseEntity&lt;InputStreamResource&gt;</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>@GetMapping(&quot;/file&quot;)\npublic ResponseEntity&lt;InputStreamResource&gt; getFile(){\n  // figure out what filePath is. filePath=...\n  try (FileInputStream fileInputStream = new FileInputStream(filePath)){\n    InputStreamResource inputStreamResource = new InputStreamResource(fileInputStream);\n    HttpHeaders headers = new HttpHeaders();\n    headers.setContentLength(Files.size(Paths.get(filePath)));//optional\n    headers.setContentDisposition(&quot;attachment&quot;, &quot;somefile.pdf&quot;); //optional\n    headers.setContentType(&quot;application/pdf&quot;); //optional\n    return new ResponseEntity(inputStreamResource, headers, HttpStatus.OK);\n}\n</code></pre>\n"}],"owner":{"account_id":2301563,"reputation":2022,"user_id":2021766,"accept_rate":46,"display_name":"Maheshwaran K"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":172651,"favorite_count":0,"down_vote_count":0,"up_vote_count":82,"accepted_answer_id":16656382,"answer_count":2,"score":82,"last_activity_date":1694825851,"creation_date":1369063255,"question_id":16652760,"body_markdown":"I am using Spring MVC .I have to write a service that would take input from the request body, add the data to the pdf and returns the pdf file to the browser. The pdf document is generated using itextpdf.\r\nHow can I do this using Spring MVC. I have tried using this\r\n\r\n    @RequestMapping(value=&quot;/getpdf&quot;, method=RequestMethod.POST)\r\n    public Document getPDF(HttpServletRequest request , HttpServletResponse response, \r\n          @RequestBody String json) throws Exception {\r\n        response.setContentType(&quot;application/pdf&quot;);\r\n        response.setHeader(&quot;Content-Disposition&quot;, &quot;attachment:filename=report.pdf&quot;);\r\n        OutputStream out = response.getOutputStream();\r\n        Document doc = PdfUtil.showHelp(emp);\r\n        return doc;\r\n    }\r\n\r\nshowhelp function that generates the pdf. I am just putting some random data in the pdf for time being.\r\n\r\n    public static Document showHelp(Employee emp) throws Exception {\r\n        Document document = new Document();\r\n       \r\n        PdfWriter.getInstance(document, new FileOutputStream(&quot;C:/tmp/report.pdf&quot;));\r\n        document.open();\r\n        document.add(new Paragraph(&quot;table&quot;));\r\n        document.add(new Paragraph(new Date().toString()));\r\n        PdfPTable table=new PdfPTable(2);\r\n\r\n        PdfPCell cell = new PdfPCell (new Paragraph (&quot;table&quot;));\r\n\r\n        cell.setColspan (2);\r\n        cell.setHorizontalAlignment (Element.ALIGN_CENTER);\r\n        cell.setPadding (10.0f);\r\n        cell.setBackgroundColor (new BaseColor (140, 221, 8));                                  \r\n\r\n        table.addCell(cell);                                    \r\n        ArrayList&lt;String[]&gt; row=new ArrayList&lt;String[]&gt;();\r\n        String[] data=new String[2];\r\n        data[0]=&quot;1&quot;;\r\n        data[1]=&quot;2&quot;;\r\n        String[] data1=new String[2];\r\n        data1[0]=&quot;3&quot;;\r\n        data1[1]=&quot;4&quot;;\r\n        row.add(data);\r\n        row.add(data1);\r\n        \r\n        for(int i=0;i&lt;row.size();i++) {\r\n          String[] cols=row.get(i);\r\n          for(int j=0;j&lt;cols.length;j++){\r\n            table.addCell(cols[j]);\r\n          }\r\n        }\r\n                  \r\n        document.add(table);\r\n        document.close();\r\n        \r\n        return document;   \r\n    }\r\n\r\nI am sure this is wrong. I want that pdf to be generated and save/open dialog box to be opened through the browser, so that it can be stored in the client&#39;s file system. Please help me out.","title":"Return generated pdf using spring MVC","body":"<p>I am using Spring MVC .I have to write a service that would take input from the request body, add the data to the pdf and returns the pdf file to the browser. The pdf document is generated using itextpdf.\nHow can I do this using Spring MVC. I have tried using this</p>\n\n<pre><code>@RequestMapping(value=\"/getpdf\", method=RequestMethod.POST)\npublic Document getPDF(HttpServletRequest request , HttpServletResponse response, \n      @RequestBody String json) throws Exception {\n    response.setContentType(\"application/pdf\");\n    response.setHeader(\"Content-Disposition\", \"attachment:filename=report.pdf\");\n    OutputStream out = response.getOutputStream();\n    Document doc = PdfUtil.showHelp(emp);\n    return doc;\n}\n</code></pre>\n\n<p>showhelp function that generates the pdf. I am just putting some random data in the pdf for time being.</p>\n\n<pre><code>public static Document showHelp(Employee emp) throws Exception {\n    Document document = new Document();\n\n    PdfWriter.getInstance(document, new FileOutputStream(\"C:/tmp/report.pdf\"));\n    document.open();\n    document.add(new Paragraph(\"table\"));\n    document.add(new Paragraph(new Date().toString()));\n    PdfPTable table=new PdfPTable(2);\n\n    PdfPCell cell = new PdfPCell (new Paragraph (\"table\"));\n\n    cell.setColspan (2);\n    cell.setHorizontalAlignment (Element.ALIGN_CENTER);\n    cell.setPadding (10.0f);\n    cell.setBackgroundColor (new BaseColor (140, 221, 8));                                  \n\n    table.addCell(cell);                                    \n    ArrayList&lt;String[]&gt; row=new ArrayList&lt;String[]&gt;();\n    String[] data=new String[2];\n    data[0]=\"1\";\n    data[1]=\"2\";\n    String[] data1=new String[2];\n    data1[0]=\"3\";\n    data1[1]=\"4\";\n    row.add(data);\n    row.add(data1);\n\n    for(int i=0;i&lt;row.size();i++) {\n      String[] cols=row.get(i);\n      for(int j=0;j&lt;cols.length;j++){\n        table.addCell(cols[j]);\n      }\n    }\n\n    document.add(table);\n    document.close();\n\n    return document;   \n}\n</code></pre>\n\n<p>I am sure this is wrong. I want that pdf to be generated and save/open dialog box to be opened through the browser, so that it can be stored in the client's file system. Please help me out.</p>\n"},{"tags":["java","spring","database","datasource","connection-pooling"],"owner":{"account_id":5788820,"reputation":193,"user_id":4567083,"accept_rate":60,"display_name":"Nahid Shah"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":14,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694824887,"creation_date":1694808889,"question_id":77115127,"body_markdown":"I have a custom java datasource class which has database connection ability as well as connection pooling option. However, I am not very satisfied with connection pooling functions there. Therefore, I decided to use HicariDataSource class with HicariConfig class as wrapper classes to implement database connection pooling. However, I am still using the custom datasource class for database connection because the custom datasource class has some good connection functions which I do not want to write again. After running the application this way with the HicariDataSource and the customer datasource class inside it,  It resolved some Database Pool exception happening before, and it is performing well without any problem. However, Chatgpt is suggesting that HicariDataSource is designed to connect to the database by itself. If I use another datasource class for connection, I will not get proper advantage from HicariDataSource. On the other hand, I see in the docs that the setDataSource method of HicariConfig is designed to work with other datasource classes for connection. Now I want expert opinion in this filed to tell me if I really lose advantage of HicariDataSource while using it with a different datasource class for connection?  ","title":"HicariDataSource with other datasource","body":"<p>I have a custom java datasource class which has database connection ability as well as connection pooling option. However, I am not very satisfied with connection pooling functions there. Therefore, I decided to use HicariDataSource class with HicariConfig class as wrapper classes to implement database connection pooling. However, I am still using the custom datasource class for database connection because the custom datasource class has some good connection functions which I do not want to write again. After running the application this way with the HicariDataSource and the customer datasource class inside it,  It resolved some Database Pool exception happening before, and it is performing well without any problem. However, Chatgpt is suggesting that HicariDataSource is designed to connect to the database by itself. If I use another datasource class for connection, I will not get proper advantage from HicariDataSource. On the other hand, I see in the docs that the setDataSource method of HicariConfig is designed to work with other datasource classes for connection. Now I want expert opinion in this filed to tell me if I really lose advantage of HicariDataSource while using it with a different datasource class for connection?</p>\n"},{"tags":["java","oracle","jdeveloper"],"comments":[{"owner":{"account_id":1476987,"reputation":17785,"user_id":1387157,"accept_rate":94,"display_name":"MaVRoSCy"},"score":1,"creation_date":1337685178,"post_id":10698709,"comment_id":13892192,"body_markdown":"Tried, still displays them in ??????? . By changing that option i also got encoding issues displaying Greek characters coming from property files - Reverted back to UTF-8","body":"Tried, still displays them in ??????? . By changing that option i also got encoding issues displaying Greek characters coming from property files - Reverted back to UTF-8"},{"owner":{"account_id":1088477,"reputation":16765,"user_id":1083652,"accept_rate":100,"display_name":"A.B.Cade"},"score":0,"creation_date":1337685958,"post_id":10698709,"comment_id":13892480,"body_markdown":"What do you print ? is it constants from your code ? I&#39;m not to familiar with jdev 11, but in jdev 10 you need to check the compiler encoding (in project properties)","body":"What do you print ? is it constants from your code ? I&#39;m not to familiar with jdev 11, but in jdev 10 you need to check the compiler encoding (in project properties)"},{"owner":{"account_id":1476987,"reputation":17785,"user_id":1387157,"accept_rate":94,"display_name":"MaVRoSCy"},"score":1,"creation_date":1337686927,"post_id":10698709,"comment_id":13892850,"body_markdown":"I am developping a web application and there are three things i print. 1 Data sumbited by user in the front html pages, 2 Data from the database, 3 Characters from property files. Everything is working ok with character encoding set to UTF-8 (environment encoding and compiler encoding). I just have the problem that i cannot display greek characters in the weblogic log console","body":"I am developping a web application and there are three things i print. 1 Data sumbited by user in the front html pages, 2 Data from the database, 3 Characters from property files. Everything is working ok with character encoding set to UTF-8 (environment encoding and compiler encoding). I just have the problem that i cannot display greek characters in the weblogic log console"}],"answers":[{"comments":[{"owner":{"account_id":319735,"reputation":533,"user_id":637654,"display_name":"Alexander Kuznetsov"},"score":0,"creation_date":1337849894,"post_id":10733605,"comment_id":13944779,"body_markdown":"Compiler settings setted up exactly in project&#39;s properties? Not in default project&#39;s properties? I had the same issue with cyrrilic characters and resolved it changing compiler encoding.","body":"Compiler settings setted up exactly in project&#39;s properties? Not in default project&#39;s properties? I had the same issue with cyrrilic characters and resolved it changing compiler encoding."},{"owner":{"account_id":1476987,"reputation":17785,"user_id":1387157,"accept_rate":94,"display_name":"MaVRoSCy"},"score":0,"creation_date":1337850139,"post_id":10733605,"comment_id":13944871,"body_markdown":"yes it is already UTF-8 as i told you before. If i change that to anything else then my jsp&#39;s dont show any greek characters. They just show symbols","body":"yes it is already UTF-8 as i told you before. If i change that to anything else then my jsp&#39;s dont show any greek characters. They just show symbols"},{"owner":{"account_id":319735,"reputation":533,"user_id":637654,"display_name":"Alexander Kuznetsov"},"score":0,"creation_date":1337852094,"post_id":10733605,"comment_id":13945651,"body_markdown":"Strange behavior. That was my steps: Convert source code into utf-8. Setted up environment encoding as utf-8. Changed compiler character encoding as utf-8 both inside ViewController and Model projects. Clean  all. Rebuild.","body":"Strange behavior. That was my steps: Convert source code into utf-8. Setted up environment encoding as utf-8. Changed compiler character encoding as utf-8 both inside ViewController and Model projects. Clean  all. Rebuild."},{"owner":{"account_id":401367,"reputation":23742,"user_id":767881,"accept_rate":14,"display_name":"Ravinder Reddy"},"score":0,"creation_date":1337852281,"post_id":10733605,"comment_id":13945725,"body_markdown":"Check if it is also required to set outputstream&#39;s encoding, for runtmie!","body":"Check if it is also required to set outputstream&#39;s encoding, for runtmie!"}],"tags":[],"owner":{"account_id":319735,"reputation":533,"user_id":637654,"display_name":"Alexander Kuznetsov"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1337847261,"creation_date":1337847261,"answer_id":10733605,"question_id":10698709,"body_markdown":"I think you need setup UTF-8 encoding for compiler.\r\n\r\nIn your **Project&#39;s properties** dialog goto **Compiler** and set there desired character encoding.\r\n","title":"How to display GREEK Characters in JDeveloper&#39;s Logging Console","body":"<p>I think you need setup UTF-8 encoding for compiler.</p>\n\n<p>In your <strong>Project's properties</strong> dialog goto <strong>Compiler</strong> and set there desired character encoding.</p>\n"},{"tags":[],"owner":{"account_id":2304796,"reputation":367,"user_id":2024272,"display_name":"Paris"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":true,"score":1,"last_activity_date":1404385116,"creation_date":1404385116,"answer_id":24551879,"question_id":10698709,"body_markdown":"I found a working solution for the problem (at least it worked for me with JDev 12.1.2.0 but I believe it should work on 11.x as well):\r\n\r\nAdd the following line in the jdk.conf (JDEV_HOME/jdeveloper/ide/bin) and restart JDeveloper:\r\n\r\n    AddVMOption  -Dfile.encoding=UTF-8\r\n\r\n","title":"How to display GREEK Characters in JDeveloper&#39;s Logging Console","body":"<p>I found a working solution for the problem (at least it worked for me with JDev 12.1.2.0 but I believe it should work on 11.x as well):</p>\n\n<p>Add the following line in the jdk.conf (JDEV_HOME/jdeveloper/ide/bin) and restart JDeveloper:</p>\n\n<pre><code>AddVMOption  -Dfile.encoding=UTF-8\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1003933,"reputation":3792,"user_id":1018154,"display_name":"CodeToLife"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694823961,"creation_date":1638461526,"answer_id":70202906,"question_id":10698709,"body_markdown":"Got letters ???ed  for Cyrillics in log output . Following @Ravinder Reddy &#39;s advice settled it so:\r\n\r\n**Run -&gt; Choose active Run config -&gt; Manage Run Configurations...-&gt; Manage ...**\r\nThen in popup indicate a config and click on pencil icon to edit\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n\r\nAnd then in java options put in  **-Dfile.encoding=UTF-8**\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ZSZQy.jpg\r\n  [2]: https://i.stack.imgur.com/HjIoV.jpg\r\n\r\nAnd now they appear encoded correctly\r\ne.g. for a gear icon as a character: \r\n\r\n    String gear_= new String( &quot;\\u2699&quot;.getBytes(),StandardCharsets.UTF_8); \r\n    settingsButton = new JButton(gear_);","title":"How to display GREEK Characters in JDeveloper&#39;s Logging Console","body":"<p>Got letters ???ed  for Cyrillics in log output . Following @Ravinder Reddy 's advice settled it so:</p>\n<p><strong>Run -&gt; Choose active Run config -&gt; Manage Run Configurations...-&gt; Manage ...</strong>\nThen in popup indicate a config and click on pencil icon to edit</p>\n<p><a href=\"https://i.stack.imgur.com/ZSZQy.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZSZQy.jpg\" alt=\"enter image description here\" /></a></p>\n<p>And then in java options put in  <strong>-Dfile.encoding=UTF-8</strong></p>\n<p><a href=\"https://i.stack.imgur.com/HjIoV.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HjIoV.jpg\" alt=\"enter image description here\" /></a></p>\n<p>And now they appear encoded correctly\ne.g. for a gear icon as a character:</p>\n<pre><code>String gear_= new String( &quot;\\u2699&quot;.getBytes(),StandardCharsets.UTF_8); \nsettingsButton = new JButton(gear_);\n</code></pre>\n"}],"owner":{"account_id":1476987,"reputation":17785,"user_id":1387157,"accept_rate":94,"display_name":"MaVRoSCy"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3144,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":24551879,"answer_count":3,"score":2,"last_activity_date":1694823961,"creation_date":1337676724,"question_id":10698709,"body_markdown":"I am using JDeveloper 11.1.1.4.0 and i want to display Greek characters in the **Debugging: IntegratedWebLogicServer - Log** console. \r\n\r\nWhen i try to do a System.out.print statement Greek characters display as question marks. \r\n\r\nI have changed the Preferences&gt;Environment&gt;Encoding to UTF-8 but no luck.\r\n\r\nCan anyone please help?\r\n","title":"How to display GREEK Characters in JDeveloper&#39;s Logging Console","body":"<p>I am using JDeveloper 11.1.1.4.0 and i want to display Greek characters in the <strong>Debugging: IntegratedWebLogicServer - Log</strong> console. </p>\n\n<p>When i try to do a System.out.print statement Greek characters display as question marks. </p>\n\n<p>I have changed the Preferences>Environment>Encoding to UTF-8 but no luck.</p>\n\n<p>Can anyone please help?</p>\n"},{"tags":["java","opengl","glsl","shader","vertex-shader"],"answers":[{"comments":[{"owner":{"account_id":18433483,"reputation":15,"user_id":13427997,"display_name":"aZermyux"},"score":0,"creation_date":1602779636,"post_id":64376016,"comment_id":113834953,"body_markdown":"then how do i do","body":"then how do i do"},{"owner":{"account_id":18433483,"reputation":15,"user_id":13427997,"display_name":"aZermyux"},"score":1,"creation_date":1602779816,"post_id":64376016,"comment_id":113835051,"body_markdown":"if i put #version 330 it would tell me the version is not supported","body":"if i put #version 330 it would tell me the version is not supported"},{"owner":{"account_id":18433483,"reputation":15,"user_id":13427997,"display_name":"aZermyux"},"score":0,"creation_date":1602780287,"post_id":64376016,"comment_id":113835283,"body_markdown":"oh oop i thought it was all","body":"oh oop i thought it was all"},{"owner":{"account_id":18433483,"reputation":15,"user_id":13427997,"display_name":"aZermyux"},"score":2,"creation_date":1602780331,"post_id":64376016,"comment_id":113835306,"body_markdown":"i finally got the triangle yayyyyyyy","body":"i finally got the triangle yayyyyyyy"},{"owner":{"account_id":18433483,"reputation":15,"user_id":13427997,"display_name":"aZermyux"},"score":0,"creation_date":1602781393,"post_id":64376016,"comment_id":113835783,"body_markdown":"No problem you helped me alot","body":"No problem you helped me alot"}],"tags":[],"owner":{"account_id":7322082,"reputation":205330,"user_id":5577765,"display_name":"Rabbid76"},"comment_count":5,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1602780615,"creation_date":1602779568,"answer_id":64376016,"question_id":64375952,"body_markdown":"Input layout locations qualifiers (see [Vertex shader attribute index](https://www.khronos.org/opengl/wiki/Layout_Qualifier_(GLSL)#Vertex_shader_attribute_index)) are introduced in in GLSL 3.30 and cannot be used in GLSL 1.50. Compare [OpenGL Shading Language 3.30 Specification](https://www.khronos.org/registry/OpenGL/specs/gl/GLSLangSpec.3.30.pdf) and  [OpenGL Shading Language 1.50 Specification](https://www.khronos.org/registry/OpenGL/specs/gl/GLSLangSpec.1.50.pdf).\r\n\r\nSwitch to glsl 3.30:\r\n\r\n&lt;s&gt;`#version 150`&lt;/s&gt;\r\n```glsl\r\n#version 330\r\n```\r\n\r\nIf your system doesn&#39;t support GLSL 3.30, you have to remove the layout qualifier \r\n\r\n&lt;s&gt;`layout (location = 0) in vec3 position;`&lt;/s&gt;\r\n```glsl\r\nin vec3 position; \r\n```\r\n\r\nYou can specify the attribute location with [`glBindAttribLocation`](https://www.khronos.org/registry/OpenGL-Refpages/gl4/html/glBindAttribLocation.xhtml) before the program is linked:\r\n\r\n```\r\nglBindAttribLocation(program, 0, &quot;position&quot;); // has to be done before glLinkProgram\r\nglLinkProgram(program)\r\n```","title":"ERROR: 0:3: error(#279) Invalid layout qualifier &#39;location&#39;","body":"<p>Input layout locations qualifiers (see <a href=\"https://www.khronos.org/opengl/wiki/Layout_Qualifier_(GLSL)#Vertex_shader_attribute_index\" rel=\"nofollow noreferrer\">Vertex shader attribute index</a>) are introduced in in GLSL 3.30 and cannot be used in GLSL 1.50. Compare <a href=\"https://www.khronos.org/registry/OpenGL/specs/gl/GLSLangSpec.3.30.pdf\" rel=\"nofollow noreferrer\">OpenGL Shading Language 3.30 Specification</a> and  <a href=\"https://www.khronos.org/registry/OpenGL/specs/gl/GLSLangSpec.1.50.pdf\" rel=\"nofollow noreferrer\">OpenGL Shading Language 1.50 Specification</a>.</p>\n<p>Switch to glsl 3.30:</p>\n<p><s><code>#version 150</code></s></p>\n<pre class=\"lang-c prettyprint-override\"><code>#version 330\n</code></pre>\n<p>If your system doesn't support GLSL 3.30, you have to remove the layout qualifier</p>\n<p><s><code>layout (location = 0) in vec3 position;</code></s></p>\n<pre class=\"lang-c prettyprint-override\"><code>in vec3 position; \n</code></pre>\n<p>You can specify the attribute location with <a href=\"https://www.khronos.org/registry/OpenGL-Refpages/gl4/html/glBindAttribLocation.xhtml\" rel=\"nofollow noreferrer\"><code>glBindAttribLocation</code></a> before the program is linked:</p>\n<pre><code>glBindAttribLocation(program, 0, &quot;position&quot;); // has to be done before glLinkProgram\nglLinkProgram(program)\n</code></pre>\n"}],"owner":{"account_id":18433483,"reputation":15,"user_id":13427997,"display_name":"aZermyux"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2038,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":64376016,"answer_count":1,"score":1,"last_activity_date":1694823250,"creation_date":1602779371,"question_id":64375952,"body_markdown":"i am trying to follow a tutorial and when i try to compile the vertex shader he made i get this output:\r\n\r\n    Vertex shader failed to compile with the following errors:\r\n    ERROR: 0:3: error(#279) Invalid layout qualifier &#39;location&#39;\r\n    ERROR: error(#273) 1 compilation errors.  No code generated\r\n\r\nI use GLSL 3.2.9232 and my code :\r\n\r\n    #version 150\r\n\r\n    layout (location = 0) in vec3 position;\r\n\r\n    void main()\r\n    {\r\n\t    gl_Position = vec4(0.25 * position, 1.0);\r\n    }","title":"ERROR: 0:3: error(#279) Invalid layout qualifier &#39;location&#39;","body":"<p>i am trying to follow a tutorial and when i try to compile the vertex shader he made i get this output:</p>\n<pre><code>Vertex shader failed to compile with the following errors:\nERROR: 0:3: error(#279) Invalid layout qualifier 'location'\nERROR: error(#273) 1 compilation errors.  No code generated\n</code></pre>\n<p>I use GLSL 3.2.9232 and my code :</p>\n<pre><code>#version 150\n\nlayout (location = 0) in vec3 position;\n\nvoid main()\n{\n    gl_Position = vec4(0.25 * position, 1.0);\n}\n</code></pre>\n"},{"tags":["java","max","limit","record","java-record"],"comments":[{"owner":{"account_id":1939636,"reputation":28467,"user_id":1746118,"accept_rate":95,"display_name":"Naman"},"score":0,"creation_date":1694825098,"post_id":77115277,"comment_id":135946507,"body_markdown":"True, doesn&#39;t seem like the [JEP-395](https://openjdk.org/jeps/395) mentions the limitation around the [number of parameters limit](https://stackoverflow.com/questions/30581531/maximum-number-of-parameters-in-java-method-declaration) related to Records.","body":"True, doesn&#39;t seem like the <a href=\"https://openjdk.org/jeps/395\" rel=\"nofollow noreferrer\">JEP-395</a> mentions the limitation around the <a href=\"https://stackoverflow.com/questions/30581531/maximum-number-of-parameters-in-java-method-declaration\">number of parameters limit</a> related to Records."}],"answers":[{"comments":[{"owner":{"account_id":18670408,"reputation":143,"user_id":13609359,"display_name":"Slevin"},"score":0,"creation_date":1694815813,"post_id":77115278,"comment_id":135945871,"body_markdown":"I&#39;m not sure what your generating code should tell us? You&#39;re just generating Lists, so at least following your code, generating lists with `countProperties = 512` and displaying the results doesn&#39;t produce issues thus doesn&#39;t proof anything  - or am I missing something?","body":"I&#39;m not sure what your generating code should tell us? You&#39;re just generating Lists, so at least following your code, generating lists with <code>countProperties = 512</code> and displaying the results doesn&#39;t produce issues thus doesn&#39;t proof anything  - or am I missing something?"},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":2,"creation_date":1694817616,"post_id":77115278,"comment_id":135946025,"body_markdown":"@Slevin it doesn&#39;t generate lists, it prints thing to `System.out`. What it prints, specifically, is java source code. Copy/paste it into a text file, compile it. The above code works. Set the above code to `countProperties = 256`, or anything higher than that, and __this__ code works fine but the java source it emits is no longer accepted.","body":"@Slevin it doesn&#39;t generate lists, it prints thing to <code>System.out</code>. What it prints, specifically, is java source code. Copy/paste it into a text file, compile it. The above code works. Set the above code to <code>countProperties = 256</code>, or anything higher than that, and <b>this</b> code works fine but the java source it emits is no longer accepted."},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":1,"creation_date":1694817754,"post_id":77115278,"comment_id":135946039,"body_markdown":"As per the [JVM spec &#167;4.6](https://docs.oracle.com/javase/specs/jvms/se17/html/jvms-4.html#jvms-4.6) that means intellij is broken. Up to either 32767, 65535, or 65536 args are validly representable and nowhere does it state that it is acceptable to accept any fewer.","body":"As per the <a href=\"https://docs.oracle.com/javase/specs/jvms/se17/html/jvms-4.html#jvms-4.6\" rel=\"nofollow noreferrer\">JVM spec &#167;4.6</a> that means intellij is broken. Up to either 32767, 65535, or 65536 args are validly representable and nowhere does it state that it is acceptable to accept any fewer."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1694820704,"post_id":77115278,"comment_id":135946254,"body_markdown":"@rzwitserloot But did you actually *try* it? I just tried it again, without IntelliJ. Copied that `record` source code from this Answer. Saved to a `MaxRec.java` file. Used `javac` from JDK 20.0.2 (verified with `javac --version`) with this command: `javac MaxRec.java`. That worked. Un-commented that 255 line. Ran `javac MaxRec.java` again. Console says… MaxRec.java:3: error: too many parameters","body":"@rzwitserloot But did you actually <i>try</i> it? I just tried it again, without IntelliJ. Copied that <code>record</code> source code from this Answer. Saved to a <code>MaxRec.java</code> file. Used <code>javac</code> from JDK 20.0.2 (verified with <code>javac --version</code>) with this command: <code>javac MaxRec.java</code>. That worked. Un-commented that 255 line. Ran <code>javac MaxRec.java</code> again. Console says… MaxRec.java:3: error: too many parameters"},{"owner":{"account_id":4959604,"reputation":8469,"user_id":3991211,"display_name":"Garr Godfrey"},"score":2,"creation_date":1694822085,"post_id":77115278,"comment_id":135946325,"body_markdown":"while it may be try there is no limit to the number of ARGUMENTS, the limit on PARAMETERS is 255. It&#39;s possible the &quot;this&quot; counts as the 255th. In this case, hitting parameter limit.","body":"while it may be try there is no limit to the number of ARGUMENTS, the limit on PARAMETERS is 255. It&#39;s possible the &quot;this&quot; counts as the 255th. In this case, hitting parameter limit."},{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":1,"creation_date":1694826148,"post_id":77115278,"comment_id":135946582,"body_markdown":"@rswitzerloot what&#39;s broken?  Check 4.11 https://docs.oracle.com/javase/specs/jvms/se17/html/jvms-4.html#jvms-4.11: &quot;The number of method parameters is limited to 255 by the definition of a method descriptor (&#167;4.3.3), where the limit includes one unit for this in the case of instance or interface method invocations.&quot;","body":"@rswitzerloot what&#39;s broken?  Check 4.11 <a href=\"https://docs.oracle.com/javase/specs/jvms/se17/html/jvms-4.html#jvms-4.11\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/specs/jvms/se17/html/&hellip;</a>: &quot;The number of method parameters is limited to 255 by the definition of a method descriptor (&#167;4.3.3), where the limit includes one unit for this in the case of instance or interface method invocations.&quot;"},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":1,"creation_date":1694881342,"post_id":77115278,"comment_id":135951030,"body_markdown":"I stand corrected. I guess all we can now say is that the class file format is slightly inefficient, using 2 bytes to represent something that cannot possibly legally be outside the 0-255 range.","body":"I stand corrected. I guess all we can now say is that the class file format is slightly inefficient, using 2 bytes to represent something that cannot possibly legally be outside the 0-255 range."},{"owner":{"account_id":4959604,"reputation":8469,"user_id":3991211,"display_name":"Garr Godfrey"},"score":2,"creation_date":1695008356,"post_id":77115278,"comment_id":135961737,"body_markdown":"@rzwitserloot I see a field for the number of `attributes` being 2 bytes. I don&#39;t see a field for parameters.","body":"@rzwitserloot I see a field for the number of <code>attributes</code> being 2 bytes. I don&#39;t see a field for parameters."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1696583876,"post_id":77115278,"comment_id":136174730,"body_markdown":"@rzwitserloot as said by Garr Godfrey, that number is the attribute count, not related to parameters at all. However, there are places in the class file where the representation is horribly inefficient. To stay at method parameters, the signature is a single string repeating every class name at each occurrence, rather than sharing it with the constant pool. While methods with exactly the same parameter list share the signature string, a method taking 200 strings has a different signature than a method taking 201 strings. Which makes 401 repetitions of `Ljava/lang/String;`…","body":"@rzwitserloot as said by Garr Godfrey, that number is the attribute count, not related to parameters at all. However, there are places in the class file where the representation is horribly inefficient. To stay at method parameters, the signature is a single string repeating every class name at each occurrence, rather than sharing it with the constant pool. While methods with exactly the same parameter list share the signature string, a method taking 200 strings has a different signature than a method taking 201 strings. Which makes 401 repetitions of <code>Ljava&#47;lang&#47;String;</code>…"}],"tags":[],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":9,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1694821073,"creation_date":1694810806,"answer_id":77115278,"question_id":77115277,"body_markdown":"## 254\r\n\r\nSome trial-and-error found 254 to be the limit. \r\n\r\nUsing 255 fields results in an error (*too many parameters*) in:\r\n\r\n - IntelliJ 2023.2 with [Java 21][1]\r\n - *javac* from JDK 20.0.2\r\n\r\nExample code:\r\n\r\n```java\r\npackage work.basil.example.codegen;\r\n\r\npublic record MaxRec (\r\n        String x001 ,\r\n        String x002 ,\r\n        String x003 ,\r\n        String x004 ,\r\n        String x005 ,\r\n        String x006 ,\r\n        String x007 ,\r\n        String x008 ,\r\n        String x009 ,\r\n        String x010 ,\r\n        String x011 ,\r\n        String x012 ,\r\n        String x013 ,\r\n        String x014 ,\r\n        String x015 ,\r\n        String x016 ,\r\n        String x017 ,\r\n        String x018 ,\r\n        String x019 ,\r\n        String x020 ,\r\n        String x021 ,\r\n        String x022 ,\r\n        String x023 ,\r\n        String x024 ,\r\n        String x025 ,\r\n        String x026 ,\r\n        String x027 ,\r\n        String x028 ,\r\n        String x029 ,\r\n        String x030 ,\r\n        String x031 ,\r\n        String x032 ,\r\n        String x033 ,\r\n        String x034 ,\r\n        String x035 ,\r\n        String x036 ,\r\n        String x037 ,\r\n        String x038 ,\r\n        String x039 ,\r\n        String x040 ,\r\n        String x041 ,\r\n        String x042 ,\r\n        String x043 ,\r\n        String x044 ,\r\n        String x045 ,\r\n        String x046 ,\r\n        String x047 ,\r\n        String x048 ,\r\n        String x049 ,\r\n        String x050 ,\r\n        String x051 ,\r\n        String x052 ,\r\n        String x053 ,\r\n        String x054 ,\r\n        String x055 ,\r\n        String x056 ,\r\n        String x057 ,\r\n        String x058 ,\r\n        String x059 ,\r\n        String x060 ,\r\n        String x061 ,\r\n        String x062 ,\r\n        String x063 ,\r\n        String x064 ,\r\n        String x065 ,\r\n        String x066 ,\r\n        String x067 ,\r\n        String x068 ,\r\n        String x069 ,\r\n        String x070 ,\r\n        String x071 ,\r\n        String x072 ,\r\n        String x073 ,\r\n        String x074 ,\r\n        String x075 ,\r\n        String x076 ,\r\n        String x077 ,\r\n        String x078 ,\r\n        String x079 ,\r\n        String x080 ,\r\n        String x081 ,\r\n        String x082 ,\r\n        String x083 ,\r\n        String x084 ,\r\n        String x085 ,\r\n        String x086 ,\r\n        String x087 ,\r\n        String x088 ,\r\n        String x089 ,\r\n        String x090 ,\r\n        String x091 ,\r\n        String x092 ,\r\n        String x093 ,\r\n        String x094 ,\r\n        String x095 ,\r\n        String x096 ,\r\n        String x097 ,\r\n        String x098 ,\r\n        String x099 ,\r\n        String x100 ,\r\n        String x101 ,\r\n        String x102 ,\r\n        String x103 ,\r\n        String x104 ,\r\n        String x105 ,\r\n        String x106 ,\r\n        String x107 ,\r\n        String x108 ,\r\n        String x109 ,\r\n        String x110 ,\r\n        String x111 ,\r\n        String x112 ,\r\n        String x113 ,\r\n        String x114 ,\r\n        String x115 ,\r\n        String x116 ,\r\n        String x117 ,\r\n        String x118 ,\r\n        String x119 ,\r\n        String x120 ,\r\n        String x121 ,\r\n        String x122 ,\r\n        String x123 ,\r\n        String x124 ,\r\n        String x125 ,\r\n        String x126 ,\r\n        String x127 ,\r\n        String x128 ,\r\n        String x129 ,\r\n        String x130 ,\r\n        String x131 ,\r\n        String x132 ,\r\n        String x133 ,\r\n        String x134 ,\r\n        String x135 ,\r\n        String x136 ,\r\n        String x137 ,\r\n        String x138 ,\r\n        String x139 ,\r\n        String x140 ,\r\n        String x141 ,\r\n        String x142 ,\r\n        String x143 ,\r\n        String x144 ,\r\n        String x145 ,\r\n        String x146 ,\r\n        String x147 ,\r\n        String x148 ,\r\n        String x149 ,\r\n        String x150 ,\r\n        String x151 ,\r\n        String x152 ,\r\n        String x153 ,\r\n        String x154 ,\r\n        String x155 ,\r\n        String x156 ,\r\n        String x157 ,\r\n        String x158 ,\r\n        String x159 ,\r\n        String x160 ,\r\n        String x161 ,\r\n        String x162 ,\r\n        String x163 ,\r\n        String x164 ,\r\n        String x165 ,\r\n        String x166 ,\r\n        String x167 ,\r\n        String x168 ,\r\n        String x169 ,\r\n        String x170 ,\r\n        String x171 ,\r\n        String x172 ,\r\n        String x173 ,\r\n        String x174 ,\r\n        String x175 ,\r\n        String x176 ,\r\n        String x177 ,\r\n        String x178 ,\r\n        String x179 ,\r\n        String x180 ,\r\n        String x181 ,\r\n        String x182 ,\r\n        String x183 ,\r\n        String x184 ,\r\n        String x185 ,\r\n        String x186 ,\r\n        String x187 ,\r\n        String x188 ,\r\n        String x189 ,\r\n        String x190 ,\r\n        String x191 ,\r\n        String x192 ,\r\n        String x193 ,\r\n        String x194 ,\r\n        String x195 ,\r\n        String x196 ,\r\n        String x197 ,\r\n        String x198 ,\r\n        String x199 ,\r\n        String x200 ,\r\n        String x201 ,\r\n        String x202 ,\r\n        String x203 ,\r\n        String x204 ,\r\n        String x205 ,\r\n        String x206 ,\r\n        String x207 ,\r\n        String x208 ,\r\n        String x209 ,\r\n        String x210 ,\r\n        String x211 ,\r\n        String x212 ,\r\n        String x213 ,\r\n        String x214 ,\r\n        String x215 ,\r\n        String x216 ,\r\n        String x217 ,\r\n        String x218 ,\r\n        String x219 ,\r\n        String x220 ,\r\n        String x221 ,\r\n        String x222 ,\r\n        String x223 ,\r\n        String x224 ,\r\n        String x225 ,\r\n        String x226 ,\r\n        String x227 ,\r\n        String x228 ,\r\n        String x229 ,\r\n        String x230 ,\r\n        String x231 ,\r\n        String x232 ,\r\n        String x233 ,\r\n        String x234 ,\r\n        String x235 ,\r\n        String x236 ,\r\n        String x237 ,\r\n        String x238 ,\r\n        String x239 ,\r\n        String x240 ,\r\n        String x241 ,\r\n        String x242 ,\r\n        String x243 ,\r\n        String x244 ,\r\n        String x245 ,\r\n        String x246 ,\r\n        String x247 ,\r\n        String x248 ,\r\n        String x249 ,\r\n        String x250 ,\r\n        String x251 ,\r\n        String x252 ,\r\n        String x253 ,\r\n        String x254\r\n        // , String x255  // Error: too many parameters\r\n) {}\r\n```\r\n\r\n\r\n----------\r\n\r\n\r\nBy the way, for fun, here is the code used to generate the above code. \r\n\r\nThis code generates Java source code. That source code appears on your console. Copy/paste that source code into a text file. Name that file `MaxRec.java`. Compile that file. See error appear.\r\n\r\n```java\r\npackage work.basil.example.codegen;\r\n\r\nimport java.util.List;\r\nimport java.util.stream.IntStream;\r\n\r\npublic class MaxArgsInRecord\r\n{\r\n    public static void main ( String[] args )\r\n    {\r\n        System.out.println ( &quot;public record MaxRec (&quot; );\r\n        int countProperties = 255;\r\n        List &lt; String &gt; fields =\r\n                IntStream\r\n                        .rangeClosed ( 1 , countProperties )\r\n                        .mapToObj (\r\n                                ( int i ) -&gt; &quot;   String x&quot; + String.format ( &quot;%03d&quot; , i )\r\n                        )\r\n                        .toList ( );\r\n        System.out.println ( String.join ( &quot; ,\\n&quot; , fields ) );\r\n        System.out.println ( &quot;) {}&quot; );\r\n    }\r\n}\r\n```\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Java_version_history#Java_21","title":"How many fields can a Java record hold?","body":"<h2>254</h2>\n<p>Some trial-and-error found 254 to be the limit.</p>\n<p>Using 255 fields results in an error (<em>too many parameters</em>) in:</p>\n<ul>\n<li>IntelliJ 2023.2 with <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_21\" rel=\"nofollow noreferrer\">Java 21</a></li>\n<li><em>javac</em> from JDK 20.0.2</li>\n</ul>\n<p>Example code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package work.basil.example.codegen;\n\npublic record MaxRec (\n        String x001 ,\n        String x002 ,\n        String x003 ,\n        String x004 ,\n        String x005 ,\n        String x006 ,\n        String x007 ,\n        String x008 ,\n        String x009 ,\n        String x010 ,\n        String x011 ,\n        String x012 ,\n        String x013 ,\n        String x014 ,\n        String x015 ,\n        String x016 ,\n        String x017 ,\n        String x018 ,\n        String x019 ,\n        String x020 ,\n        String x021 ,\n        String x022 ,\n        String x023 ,\n        String x024 ,\n        String x025 ,\n        String x026 ,\n        String x027 ,\n        String x028 ,\n        String x029 ,\n        String x030 ,\n        String x031 ,\n        String x032 ,\n        String x033 ,\n        String x034 ,\n        String x035 ,\n        String x036 ,\n        String x037 ,\n        String x038 ,\n        String x039 ,\n        String x040 ,\n        String x041 ,\n        String x042 ,\n        String x043 ,\n        String x044 ,\n        String x045 ,\n        String x046 ,\n        String x047 ,\n        String x048 ,\n        String x049 ,\n        String x050 ,\n        String x051 ,\n        String x052 ,\n        String x053 ,\n        String x054 ,\n        String x055 ,\n        String x056 ,\n        String x057 ,\n        String x058 ,\n        String x059 ,\n        String x060 ,\n        String x061 ,\n        String x062 ,\n        String x063 ,\n        String x064 ,\n        String x065 ,\n        String x066 ,\n        String x067 ,\n        String x068 ,\n        String x069 ,\n        String x070 ,\n        String x071 ,\n        String x072 ,\n        String x073 ,\n        String x074 ,\n        String x075 ,\n        String x076 ,\n        String x077 ,\n        String x078 ,\n        String x079 ,\n        String x080 ,\n        String x081 ,\n        String x082 ,\n        String x083 ,\n        String x084 ,\n        String x085 ,\n        String x086 ,\n        String x087 ,\n        String x088 ,\n        String x089 ,\n        String x090 ,\n        String x091 ,\n        String x092 ,\n        String x093 ,\n        String x094 ,\n        String x095 ,\n        String x096 ,\n        String x097 ,\n        String x098 ,\n        String x099 ,\n        String x100 ,\n        String x101 ,\n        String x102 ,\n        String x103 ,\n        String x104 ,\n        String x105 ,\n        String x106 ,\n        String x107 ,\n        String x108 ,\n        String x109 ,\n        String x110 ,\n        String x111 ,\n        String x112 ,\n        String x113 ,\n        String x114 ,\n        String x115 ,\n        String x116 ,\n        String x117 ,\n        String x118 ,\n        String x119 ,\n        String x120 ,\n        String x121 ,\n        String x122 ,\n        String x123 ,\n        String x124 ,\n        String x125 ,\n        String x126 ,\n        String x127 ,\n        String x128 ,\n        String x129 ,\n        String x130 ,\n        String x131 ,\n        String x132 ,\n        String x133 ,\n        String x134 ,\n        String x135 ,\n        String x136 ,\n        String x137 ,\n        String x138 ,\n        String x139 ,\n        String x140 ,\n        String x141 ,\n        String x142 ,\n        String x143 ,\n        String x144 ,\n        String x145 ,\n        String x146 ,\n        String x147 ,\n        String x148 ,\n        String x149 ,\n        String x150 ,\n        String x151 ,\n        String x152 ,\n        String x153 ,\n        String x154 ,\n        String x155 ,\n        String x156 ,\n        String x157 ,\n        String x158 ,\n        String x159 ,\n        String x160 ,\n        String x161 ,\n        String x162 ,\n        String x163 ,\n        String x164 ,\n        String x165 ,\n        String x166 ,\n        String x167 ,\n        String x168 ,\n        String x169 ,\n        String x170 ,\n        String x171 ,\n        String x172 ,\n        String x173 ,\n        String x174 ,\n        String x175 ,\n        String x176 ,\n        String x177 ,\n        String x178 ,\n        String x179 ,\n        String x180 ,\n        String x181 ,\n        String x182 ,\n        String x183 ,\n        String x184 ,\n        String x185 ,\n        String x186 ,\n        String x187 ,\n        String x188 ,\n        String x189 ,\n        String x190 ,\n        String x191 ,\n        String x192 ,\n        String x193 ,\n        String x194 ,\n        String x195 ,\n        String x196 ,\n        String x197 ,\n        String x198 ,\n        String x199 ,\n        String x200 ,\n        String x201 ,\n        String x202 ,\n        String x203 ,\n        String x204 ,\n        String x205 ,\n        String x206 ,\n        String x207 ,\n        String x208 ,\n        String x209 ,\n        String x210 ,\n        String x211 ,\n        String x212 ,\n        String x213 ,\n        String x214 ,\n        String x215 ,\n        String x216 ,\n        String x217 ,\n        String x218 ,\n        String x219 ,\n        String x220 ,\n        String x221 ,\n        String x222 ,\n        String x223 ,\n        String x224 ,\n        String x225 ,\n        String x226 ,\n        String x227 ,\n        String x228 ,\n        String x229 ,\n        String x230 ,\n        String x231 ,\n        String x232 ,\n        String x233 ,\n        String x234 ,\n        String x235 ,\n        String x236 ,\n        String x237 ,\n        String x238 ,\n        String x239 ,\n        String x240 ,\n        String x241 ,\n        String x242 ,\n        String x243 ,\n        String x244 ,\n        String x245 ,\n        String x246 ,\n        String x247 ,\n        String x248 ,\n        String x249 ,\n        String x250 ,\n        String x251 ,\n        String x252 ,\n        String x253 ,\n        String x254\n        // , String x255  // Error: too many parameters\n) {}\n</code></pre>\n<hr />\n<p>By the way, for fun, here is the code used to generate the above code.</p>\n<p>This code generates Java source code. That source code appears on your console. Copy/paste that source code into a text file. Name that file <code>MaxRec.java</code>. Compile that file. See error appear.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package work.basil.example.codegen;\n\nimport java.util.List;\nimport java.util.stream.IntStream;\n\npublic class MaxArgsInRecord\n{\n    public static void main ( String[] args )\n    {\n        System.out.println ( &quot;public record MaxRec (&quot; );\n        int countProperties = 255;\n        List &lt; String &gt; fields =\n                IntStream\n                        .rangeClosed ( 1 , countProperties )\n                        .mapToObj (\n                                ( int i ) -&gt; &quot;   String x&quot; + String.format ( &quot;%03d&quot; , i )\n                        )\n                        .toList ( );\n        System.out.println ( String.join ( &quot; ,\\n&quot; , fields ) );\n        System.out.println ( &quot;) {}&quot; );\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4959604,"reputation":8469,"user_id":3991211,"display_name":"Garr Godfrey"},"score":0,"creation_date":1694822660,"post_id":77115861,"comment_id":135946360,"body_markdown":"same limit in more up to date spec\nhttps://docs.oracle.com/javase/specs/jvms/se17/html/jvms-4.html#jvms-4.3.3","body":"same limit in more up to date spec <a href=\"https://docs.oracle.com/javase/specs/jvms/se17/html/jvms-4.html#jvms-4.3.3\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/specs/jvms/se17/html/&hellip;</a>"},{"owner":{"account_id":2792262,"reputation":163877,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"score":2,"creation_date":1694823076,"post_id":77115861,"comment_id":135946389,"body_markdown":"Nice to have an explanation from the spec.","body":"Nice to have an explanation from the spec."}],"tags":[],"owner":{"account_id":4959604,"reputation":8469,"user_id":3991211,"display_name":"Garr Godfrey"},"comment_count":2,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1694822505,"creation_date":1694822505,"answer_id":77115861,"question_id":77115277,"body_markdown":"Due to the limit on method descriptor length, the maximum number of parameters a method can define is 255. Including the `this`, since a record constructor is non-static, that leaves 254.\r\n\r\nSee spec on method descriptors.\r\nhttps://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.3.3\r\n\r\nI believe a record must have at least one constructor that takes all properties as individual parameters, so this would effectively limit the number of record components.","title":"How many fields can a Java record hold?","body":"<p>Due to the limit on method descriptor length, the maximum number of parameters a method can define is 255. Including the <code>this</code>, since a record constructor is non-static, that leaves 254.</p>\n<p>See spec on method descriptors.\n<a href=\"https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.3.3\" rel=\"noreferrer\">https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.3.3</a></p>\n<p>I believe a record must have at least one constructor that takes all properties as individual parameters, so this would effectively limit the number of record components.</p>\n"}],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":196,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":77115861,"answer_count":2,"score":2,"last_activity_date":1694822505,"creation_date":1694810806,"question_id":77115277,"body_markdown":"What is the maximum number of properties (“record components”, technically) defined in a Java [record][1]?\r\n\r\nI read the specification, [*JEP 395: Records*](https://openjdk.org/jeps/395). No mention of a limit.\r\n\r\n\r\n  [1]: https://www.baeldung.com/java-record-keyword","title":"How many fields can a Java record hold?","body":"<p>What is the maximum number of properties (“record components”, technically) defined in a Java <a href=\"https://www.baeldung.com/java-record-keyword\" rel=\"nofollow noreferrer\">record</a>?</p>\n<p>I read the specification, <a href=\"https://openjdk.org/jeps/395\" rel=\"nofollow noreferrer\"><em>JEP 395: Records</em></a>. No mention of a limit.</p>\n"},{"tags":["java","string","parseint"],"comments":[{"owner":{"account_id":682692,"reputation":49061,"user_id":535275,"accept_rate":91,"display_name":"Scott Hunter"},"score":2,"creation_date":1694789864,"post_id":77113400,"comment_id":135941743,"body_markdown":"What is the value of `s` when this error is thrown?","body":"What is the value of <code>s</code> when this error is thrown?"},{"owner":{"account_id":26506655,"reputation":110,"user_id":20142712,"display_name":"not_a_nerd"},"score":0,"creation_date":1694789985,"post_id":77113400,"comment_id":135941767,"body_markdown":"Is your question, how to write a method that returns the length of a trimmed String?","body":"Is your question, how to write a method that returns the length of a trimmed String?"},{"owner":{"account_id":1352170,"reputation":34246,"user_id":1291492,"accept_rate":100,"display_name":"ControlAltDel"},"score":0,"creation_date":1694789987,"post_id":77113400,"comment_id":135941769,"body_markdown":"The point of this function is to prevent NumberFormatException from getting thrown? I think better to not have this function and catch NumberFormatException in places where you&#39;d otherwise be calling it.","body":"The point of this function is to prevent NumberFormatException from getting thrown? I think better to not have this function and catch NumberFormatException in places where you&#39;d otherwise be calling it."},{"owner":{"account_id":9685245,"reputation":9531,"user_id":7185318,"accept_rate":88,"display_name":"Luatic"},"score":2,"creation_date":1694790231,"post_id":77113400,"comment_id":135941813,"body_markdown":"Can&#39;t reproduce with the empty string (`&quot;&quot;`); if I pass the empty string to `parse`, I correctly get `0`. Just because a string renders like the empty string does not mean that it is the empty string; it may contain invisible zero-width Unicode characters (such as a zero-width space), which `trim` doesn&#39;t trim.","body":"Can&#39;t reproduce with the empty string (<code>&quot;&quot;</code>); if I pass the empty string to <code>parse</code>, I correctly get <code>0</code>. Just because a string renders like the empty string does not mean that it is the empty string; it may contain invisible zero-width Unicode characters (such as a zero-width space), which <code>trim</code> doesn&#39;t trim."},{"owner":{"account_id":29453649,"reputation":1,"user_id":22569932,"display_name":"Jon"},"score":0,"creation_date":1694791822,"post_id":77113400,"comment_id":135942156,"body_markdown":"Yes, I can catch the NumberFormatException. It is an easy solution however I am trying to understand how I am getting the empty string in the first place.","body":"Yes, I can catch the NumberFormatException. It is an easy solution however I am trying to understand how I am getting the empty string in the first place."},{"owner":{"account_id":29453649,"reputation":1,"user_id":22569932,"display_name":"Jon"},"score":0,"creation_date":1694791896,"post_id":77113400,"comment_id":135942173,"body_markdown":"The value of `s` is set by `String.valueOf(a non-null BigDecimal object)`. Can `BigDecimal#toString` return an invisible character?","body":"The value of <code>s</code> is set by <code>String.valueOf(a non-null BigDecimal object)</code>. Can <code>BigDecimal#toString</code> return an invisible character?"},{"owner":{"account_id":667308,"reputation":46349,"user_id":1161878,"accept_rate":81,"display_name":"Gene"},"score":1,"creation_date":1694795252,"post_id":77113400,"comment_id":135942760,"body_markdown":"Welcome. Best for getting useful advice is follow the Help guidance to provide a minimum executable example of the problem.  nb: one method to debug this is to trap NumberException in a debugger so you can inspect the value of `s` that caused it. It&#39;s fairly likely that what you think is happening is not really.","body":"Welcome. Best for getting useful advice is follow the Help guidance to provide a minimum executable example of the problem.  nb: one method to debug this is to trap NumberException in a debugger so you can inspect the value of <code>s</code> that caused it. It&#39;s fairly likely that what you think is happening is not really."},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":1,"creation_date":1694795629,"post_id":77113400,"comment_id":135942837,"body_markdown":"I don&#39;t see how this would happen considering you test _s.trim().length()_.  Are you sure the _NumberFormatException_ stems from this code?","body":"I don&#39;t see how this would happen considering you test <i>s.trim().length()</i>.  Are you sure the <i>NumberFormatException</i> stems from this code?"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":1,"creation_date":1694796283,"post_id":77113400,"comment_id":135942954,"body_markdown":"String.valueOf(BigDecimal) cannot return null and cannot return a blank String.  You shouldn’t even need to test for those values.  Try adding `System.out.println(s.length());` right before you call Long.parseLong.  That will tell us whether your string is really empty.","body":"String.valueOf(BigDecimal) cannot return null and cannot return a blank String.  You shouldn’t even need to test for those values.  Try adding <code>System.out.println(s.length());</code> right before you call Long.parseLong.  That will tell us whether your string is really empty."},{"owner":{"account_id":29453649,"reputation":1,"user_id":22569932,"display_name":"Jon"},"score":0,"creation_date":1694818927,"post_id":77113400,"comment_id":135946124,"body_markdown":"Yes, the exception is coming from the parse function but I may have left out a critical information while trying to simplify the snippet. Updating the question.","body":"Yes, the exception is coming from the parse function but I may have left out a critical information while trying to simplify the snippet. Updating the question."},{"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1696672816,"post_id":77113400,"comment_id":136185608,"body_markdown":"`Long#parseLong` and `DecimalFormat#parse` are two very different functions.","body":"<code>Long#parseLong</code> and <code>DecimalFormat#parse</code> are two very different functions."}],"answers":[{"tags":[],"owner":{"account_id":29203673,"reputation":1,"user_id":22373223,"display_name":"Girish Chandra Mishra"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694796710,"creation_date":1694796710,"answer_id":77114137,"question_id":77113400,"body_markdown":"    public static Number parse(String s) throws NumberFormatException {\r\n      if (s == null || s.isBlank()) {\r\n        return 0;\r\n      }\r\n      return Long.parseLong(s);\r\n    }","title":"Java string immutability and NumberFormatException For input string: &quot;&quot;","body":"<pre><code>public static Number parse(String s) throws NumberFormatException {\n  if (s == null || s.isBlank()) {\n    return 0;\n  }\n  return Long.parseLong(s);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29453649,"reputation":1,"user_id":22569932,"display_name":"Jon"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694821776,"creation_date":1694821371,"answer_id":77115817,"question_id":77113400,"body_markdown":"Looking into `DigitList` class, `s` definitely is not the input string here.\r\nThe `DigitList`&#39;s use of `StringBuffer tempBuffer` is not thread-safe.\r\n```java\r\nprivate StringBuffer getStringBuffer() {\r\n    if (tempBuffer == null) {\r\n        tempBuffer = new StringBuffer(MAX_COUNT);\r\n    } else {\r\n        tempBuffer.setLength(0);\r\n    }\r\n    return tempBuffer;\r\n}\r\n```\r\n`tempBuffer.setLength(0)` is what is causing the empty input string.\r\n`DecimalFormat.digitList` and `DigitList.tempBuffer` are both class members and I am using a singleton `DecimalFormat` instance creating a race condition.\r\n\r\nI am able to reproduce the problem with this line of code\r\n```java\r\nIntStream\r\n  .range(1, Runtime.getRuntime().availableProcessors() * 3)\r\n  .parallel()\r\n  .forEach(s -&gt; parse(&quot;123&quot;));\r\n```\r\nWithout the `parallel()` mode, the issue does not occur.\r\n\r\nHaving found the root of the issue, I also found this question is essentially a duplicate of https://stackoverflow.com/a/4021932/22569932 where good explanation and solution are provided.","title":"Java string immutability and NumberFormatException For input string: &quot;&quot;","body":"<p>Looking into <code>DigitList</code> class, <code>s</code> definitely is not the input string here.\nThe <code>DigitList</code>'s use of <code>StringBuffer tempBuffer</code> is not thread-safe.</p>\n<pre class=\"lang-java prettyprint-override\"><code>private StringBuffer getStringBuffer() {\n    if (tempBuffer == null) {\n        tempBuffer = new StringBuffer(MAX_COUNT);\n    } else {\n        tempBuffer.setLength(0);\n    }\n    return tempBuffer;\n}\n</code></pre>\n<p><code>tempBuffer.setLength(0)</code> is what is causing the empty input string.\n<code>DecimalFormat.digitList</code> and <code>DigitList.tempBuffer</code> are both class members and I am using a singleton <code>DecimalFormat</code> instance creating a race condition.</p>\n<p>I am able to reproduce the problem with this line of code</p>\n<pre class=\"lang-java prettyprint-override\"><code>IntStream\n  .range(1, Runtime.getRuntime().availableProcessors() * 3)\n  .parallel()\n  .forEach(s -&gt; parse(&quot;123&quot;));\n</code></pre>\n<p>Without the <code>parallel()</code> mode, the issue does not occur.</p>\n<p>Having found the root of the issue, I also found this question is essentially a duplicate of <a href=\"https://stackoverflow.com/a/4021932/22569932\">https://stackoverflow.com/a/4021932/22569932</a> where good explanation and solution are provided.</p>\n"}],"owner":{"account_id":29453649,"reputation":1,"user_id":22569932,"display_name":"Jon"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1695042213,"answer_count":2,"score":0,"last_activity_date":1694821776,"creation_date":1694789679,"question_id":77113400,"body_markdown":"```java\r\nstatic Number parse(String s) {\r\n    if (s == null || s.trim().length() == 0) {\r\n      return 0;\r\n    }\r\n    return Long.parseLong(s);\r\n}\r\n```\r\nThis piece of code intermittently throws `java.lang.NumberFormatException: For input string: &quot;&quot;`.\r\n\r\n\r\nRunning on Java version `11.0.20+8-LTS-sapmachine`.\r\n\r\nHow is empty string passed into `parseLong`?\r\nI understand `s.trim()` and `s` are different instances but doesn&#39;t `s.trim().length() != 0` infer `s` is non-empty?\r\n\r\n**UPDATE:**\r\nApologies, I had left out the fact that I am parsing with a `DecimalFormat` instance (naively thought it did not matter).\r\n\r\n```java\r\nstatic java.text.DecimalFormat df = new java.text.DecimalFormat(&quot;#&quot;);\r\n\r\nstatic Number parse(String s) throws java.text.ParseException {\r\n    if (s == null || s.trim().length() == 0) {\r\n        return 0;\r\n    }\r\n    return df.parse(s);\r\n}\r\n```\r\nThis code throws `java.lang.NumberFormatException: For input string: &quot;&quot;` from time to time on a *live server*. Stack trace:\r\n```\r\njava.lang.NumberFormatException: For input string: &quot;&quot;\r\n\tat java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)\r\n\tat java.lang.Long.parseLong(Long.java:702)\r\n\tat java.lang.Long.parseLong(Long.java:817)\r\n\tat java.text.DigitList.getLong(DigitList.java:195)\r\n\tat java.text.DecimalFormat.parse(DecimalFormat.java:2121)\r\n\tat java.text.NumberFormat.parse(NumberFormat.java:429)\r\n```","title":"Java string immutability and NumberFormatException For input string: &quot;&quot;","body":"<pre class=\"lang-java prettyprint-override\"><code>static Number parse(String s) {\n    if (s == null || s.trim().length() == 0) {\n      return 0;\n    }\n    return Long.parseLong(s);\n}\n</code></pre>\n<p>This piece of code intermittently throws <code>java.lang.NumberFormatException: For input string: &quot;&quot;</code>.</p>\n<p>Running on Java version <code>11.0.20+8-LTS-sapmachine</code>.</p>\n<p>How is empty string passed into <code>parseLong</code>?\nI understand <code>s.trim()</code> and <code>s</code> are different instances but doesn't <code>s.trim().length() != 0</code> infer <code>s</code> is non-empty?</p>\n<p><strong>UPDATE:</strong>\nApologies, I had left out the fact that I am parsing with a <code>DecimalFormat</code> instance (naively thought it did not matter).</p>\n<pre class=\"lang-java prettyprint-override\"><code>static java.text.DecimalFormat df = new java.text.DecimalFormat(&quot;#&quot;);\n\nstatic Number parse(String s) throws java.text.ParseException {\n    if (s == null || s.trim().length() == 0) {\n        return 0;\n    }\n    return df.parse(s);\n}\n</code></pre>\n<p>This code throws <code>java.lang.NumberFormatException: For input string: &quot;&quot;</code> from time to time on a <em>live server</em>. Stack trace:</p>\n<pre><code>java.lang.NumberFormatException: For input string: &quot;&quot;\n    at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)\n    at java.lang.Long.parseLong(Long.java:702)\n    at java.lang.Long.parseLong(Long.java:817)\n    at java.text.DigitList.getLong(DigitList.java:195)\n    at java.text.DecimalFormat.parse(DecimalFormat.java:2121)\n    at java.text.NumberFormat.parse(NumberFormat.java:429)\n</code></pre>\n"},{"tags":["java","intellij-idea","lombok"],"comments":[{"owner":{"account_id":236983,"reputation":12184,"user_id":504845,"accept_rate":67,"display_name":"Nowaker"},"score":0,"creation_date":1330293446,"post_id":9424364,"comment_id":11964474,"body_markdown":"Errors appear even without the plugin. I am not able to run tests of a project if Lombok is in my pom.xml dependencies.","body":"Errors appear even without the plugin. I am not able to run tests of a project if Lombok is in my pom.xml dependencies."},{"owner":{"account_id":7068406,"reputation":1404,"user_id":5410940,"accept_rate":100,"display_name":"Error Hunter"},"score":0,"creation_date":1598613103,"post_id":9424364,"comment_id":112522923,"body_markdown":"there is another answer https://stackoverflow.com/a/63632563/5410940","body":"there is another answer <a href=\"https://stackoverflow.com/a/63632563/5410940\">stackoverflow.com/a/63632563/5410940</a>"},{"owner":{"account_id":251952,"reputation":1129,"user_id":529659,"display_name":"jomofrodo"},"score":0,"creation_date":1661983458,"post_id":9424364,"comment_id":129904139,"body_markdown":"Answers below all assume that lombok is working. You may need to add a shared VM option to make that happen. See -https://stackoverflow.com/a/65188047/529659","body":"Answers below all assume that lombok is working. You may need to add a shared VM option to make that happen. See -<a href=\"https://stackoverflow.com/a/65188047/529659\">stackoverflow.com/a/65188047/529659</a>"}],"answers":[{"comments":[{"owner":{"account_id":80182,"reputation":29519,"user_id":226895,"accept_rate":86,"display_name":"expert"},"score":0,"creation_date":1330141827,"post_id":9437445,"comment_id":11940148,"body_markdown":"It turned out it fails inside annotation processor. I updated my question with output log.","body":"It turned out it fails inside annotation processor. I updated my question with output log."}],"tags":[],"owner":{"account_id":1276406,"reputation":104,"user_id":1231569,"display_name":"mplushnikov"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1330114718,"creation_date":1330114718,"answer_id":9437445,"question_id":9424364,"body_markdown":"Do you have lombok as dependency of your project? lombok.jar must be on the classpath during compiling of the project, which is using any of lombok-annotations.","title":"Can&#39;t compile project when I&#39;m using Lombok under IntelliJ IDEA","body":"<p>Do you have lombok as dependency of your project? lombok.jar must be on the classpath during compiling of the project, which is using any of lombok-annotations.</p>\n"},{"comments":[{"owner":{"account_id":3585957,"reputation":4619,"user_id":3241889,"accept_rate":72,"display_name":"Alex"},"score":0,"creation_date":1463733723,"post_id":14582541,"comment_id":62200559,"body_markdown":"I had to stop my Win10 for a freeze issue (pilot crash) and IntelliJ was opened. At restart, I guess idea files in my project directory has been altered (workspace.xml) and after that I couldn&#39;t generate my getters/setters methods via lombok. &quot;Canno&#39;t find symbol&quot; at build time. I wrestled a bit to spot the origin of the issue.","body":"I had to stop my Win10 for a freeze issue (pilot crash) and IntelliJ was opened. At restart, I guess idea files in my project directory has been altered (workspace.xml) and after that I couldn&#39;t generate my getters/setters methods via lombok. &quot;Canno&#39;t find symbol&quot; at build time. I wrestled a bit to spot the origin of the issue."},{"owner":{"account_id":3024423,"reputation":421,"user_id":2564748,"display_name":"Jan Kubovy"},"score":2,"creation_date":1466005131,"post_id":14582541,"comment_id":63140692,"body_markdown":"Don&#39;t forget to set annotation processor: lombok.launch.AnnotationProcessorHider$AnnotationProcessor for both maven-compiler-plugin and Idea (Settings -&gt; Compiler -&gt; Annotation Processors)","body":"Don&#39;t forget to set annotation processor: lombok.launch.AnnotationProcessorHider$AnnotationProcessor for both maven-compiler-plugin and Idea (Settings -&gt; Compiler -&gt; Annotation Processors)"},{"owner":{"account_id":73312,"reputation":5791,"user_id":211197,"display_name":"maksimov"},"score":4,"creation_date":1473935092,"post_id":14582541,"comment_id":66333687,"body_markdown":"This isn&#39;t working for me in 2016.2. Maven web project. The only thing that worked was installing the lombok plugin.","body":"This isn&#39;t working for me in 2016.2. Maven web project. The only thing that worked was installing the lombok plugin."},{"owner":{"account_id":204423,"reputation":173,"user_id":452632,"accept_rate":50,"display_name":"Neikius"},"score":0,"creation_date":1476976833,"post_id":14582541,"comment_id":67585757,"body_markdown":"Idea 16.2.2 + gradle + installed lombok plugin. I could run project without this when using the gradle runscript (from idea). If I wanted to run directly (since this is the only way I know to make code hotswap work) I had to enable annotation processing. Guess idea does not automatically fully configure project and annotations don&#39;t get processed despite the plugin?","body":"Idea 16.2.2 + gradle + installed lombok plugin. I could run project without this when using the gradle runscript (from idea). If I wanted to run directly (since this is the only way I know to make code hotswap work) I had to enable annotation processing. Guess idea does not automatically fully configure project and annotations don&#39;t get processed despite the plugin?"},{"owner":{"account_id":75156,"reputation":12077,"user_id":215651,"accept_rate":50,"display_name":"lreeder"},"score":0,"creation_date":1495643915,"post_id":14582541,"comment_id":75344737,"body_markdown":"Worked for me in IDEA 2017.01.  Installing Lombok worked for Intellisense, but not for compilation until Annotation Processor was enabled.","body":"Worked for me in IDEA 2017.01.  Installing Lombok worked for Intellisense, but not for compilation until Annotation Processor was enabled."},{"owner":{"account_id":191325,"reputation":1620,"user_id":431841,"display_name":"Antonio Saco"},"score":0,"creation_date":1515497611,"post_id":14582541,"comment_id":83313587,"body_markdown":"For IDEA 2017.3.2, re-installing the Lombok plugin (Uninstall, restart, Install and restart) worked for me.","body":"For IDEA 2017.3.2, re-installing the Lombok plugin (Uninstall, restart, Install and restart) worked for me."},{"owner":{"account_id":9694254,"reputation":4765,"user_id":7191280,"display_name":"Carlos Alberto Schneider"},"score":0,"creation_date":1532366909,"post_id":14582541,"comment_id":89937494,"body_markdown":"After doing it, I still needed to remove and reimport the project as a maven project","body":"After doing it, I still needed to remove and reimport the project as a maven project"},{"owner":{"account_id":3691593,"reputation":1094,"user_id":3074057,"display_name":"Beezer"},"score":0,"creation_date":1552916304,"post_id":14582541,"comment_id":97180151,"body_markdown":"Without the plugin the above is irrelevant. Install the Lombok plugin AS WELL AS the good advice in the answer above :=). Also applies to Intellij 2018.2 btw.","body":"Without the plugin the above is irrelevant. Install the Lombok plugin AS WELL AS the good advice in the answer above :=). Also applies to Intellij 2018.2 btw."},{"owner":{"account_id":6113812,"reputation":2124,"user_id":5365075,"accept_rate":76,"display_name":"user5365075"},"score":0,"creation_date":1564059503,"post_id":14582541,"comment_id":100912602,"body_markdown":"In my case, I wasn&#39;t seeing a warning message before the errors, saying that plugin Lombok had been disabled because of [delegating issues](https://github.com/mplushnikov/lombok-intellij-plugin/issues/620). Turned out Idea was trying to use Java 11 to compile. After downgrading to Java 1.8, everything worked fine.","body":"In my case, I wasn&#39;t seeing a warning message before the errors, saying that plugin Lombok had been disabled because of <a href=\"https://github.com/mplushnikov/lombok-intellij-plugin/issues/620\" rel=\"nofollow noreferrer\">delegating issues</a>. Turned out Idea was trying to use Java 11 to compile. After downgrading to Java 1.8, everything worked fine."},{"owner":{"account_id":2368273,"reputation":516,"user_id":2073526,"display_name":"Stevers"},"score":0,"creation_date":1577122829,"post_id":14582541,"comment_id":105099836,"body_markdown":"Came here for the 2019 version update... thank you so much.","body":"Came here for the 2019 version update... thank you so much."},{"owner":{"account_id":4931711,"reputation":351,"user_id":3971277,"display_name":"Gryk"},"score":11,"creation_date":1578304766,"post_id":14582541,"comment_id":105383364,"body_markdown":"in addition to above steps, I had to include the following lines to `build.gradle`:\n\n`annotationProcessor &quot;org.projectlombok:lombok:1.18.8&quot;`\n\n`testAnnotationProcessor(&quot;org.projectlombok:lombok:1.18.8&quot;)`","body":"in addition to above steps, I had to include the following lines to <code>build.gradle</code>:  <code>annotationProcessor &quot;org.projectlombok:lombok:1.18.8&quot;</code>  <code>testAnnotationProcessor(&quot;org.projectlombok:lombok:1.18.8&quot;)</code>"},{"owner":{"account_id":4383868,"reputation":736,"user_id":3574698,"accept_rate":80,"display_name":"KaraKaplan"},"score":1,"creation_date":1649857410,"post_id":14582541,"comment_id":126982052,"body_markdown":"@Gryk after adding your suggestion it worked in my application. Thank you.","body":"@Gryk after adding your suggestion it worked in my application. Thank you."},{"owner":{"account_id":11060443,"reputation":71,"user_id":8121935,"display_name":"Eric Ballard"},"score":1,"creation_date":1682186510,"post_id":14582541,"comment_id":134177094,"body_markdown":"@Gryk +1 Solved for me... literally. tried. everything. -.-&quot;","body":"@Gryk +1 Solved for me... literally. tried. everything. -.-&quot;"}],"tags":[],"owner":{"account_id":2301337,"reputation":5132,"user_id":2021572,"display_name":"user2021572"},"comment_count":13,"down_vote_count":2,"up_vote_count":512,"is_accepted":true,"score":510,"last_activity_date":1625221469,"creation_date":1359461349,"answer_id":14582541,"question_id":9424364,"body_markdown":"I have fixed it in IDEA 12 by setting check box `Enable annotation processing` in: \r\n\r\n&gt; Settings -&gt; Compiler -&gt; Annotation Processors\r\n\r\nFor IDEA 2016.2:\r\n\r\n&gt; Preferences... &gt; Build, Execution, Deployment &gt; Compiler &gt; Annotation Processors\r\n\r\nAfter enabling, run **Build -&gt; Rebuild Project** to have annotations recognized and eliminate errors.\r\n\r\n---\r\n\r\nFor IDEA 2019.2.1, depending on how the project is configured, installing the Project Lombok plugin may not be sufficient. Here is another way to use Project Lombok with IntelliJ IDEA:\r\n\r\n1. Visit https://projectlombok.org/download\r\n1. Download the JAR file into the project lib directory (e.g., `$HOME/dev/java/project/libs`).\r\n1. Start the IDE.\r\n1. Click **File &#129046; Settings**.\r\n1. Expand **Build, Execution, Deployment &#129046; Compiler &#129046; Annotation Processors**.\r\n1. Ensure **Enable annotation processing** is checked.\r\n1. Ensure **Store generates sources relative to** is selected based on the project&#39;s module settings (if **Module output directory** doesn&#39;t work, come back and try the other setting).\r\n1. Click **Apply**.\r\n1. Click **Plugins**.\r\n1. Click **Marketplace**.\r\n1. Set search field to: `lombok`\r\n1. Install **Lombok**.\r\n1. Click **OK**.\r\n1. Restart the IDE if prompted.\r\n1. Click **File &#129046; Project Structure**.\r\n1. Select **Libraries**.\r\n1. Click the **+** symbol to add a new project library (or press &lt;kbd&gt;Alt&lt;/kbd&gt;+&lt;kbd&gt;Insert&lt;/kbd&gt;).\r\n1. Select **Java**.\r\n1. Set the path to: `$HOME/dev/java/project/libs/lombok.jar`\r\n1. Click **OK**.\r\n1. Select the modules to apply.\r\n1. Click **OK**.\r\n1. Optionally, rename `lombok` to `Project Lombok 1.18.8`.\r\n1. Click **OK**.\r\n\r\nThe project can now import from the `lombok` package and use Project Lombok annotations (e.g., `lombok.Setter` and `lombok.Getter`).","title":"Can&#39;t compile project when I&#39;m using Lombok under IntelliJ IDEA","body":"<p>I have fixed it in IDEA 12 by setting check box <code>Enable annotation processing</code> in:</p>\n<blockquote>\n<p>Settings -&gt; Compiler -&gt; Annotation Processors</p>\n</blockquote>\n<p>For IDEA 2016.2:</p>\n<blockquote>\n<p>Preferences... &gt; Build, Execution, Deployment &gt; Compiler &gt; Annotation Processors</p>\n</blockquote>\n<p>After enabling, run <strong>Build -&gt; Rebuild Project</strong> to have annotations recognized and eliminate errors.</p>\n<hr />\n<p>For IDEA 2019.2.1, depending on how the project is configured, installing the Project Lombok plugin may not be sufficient. Here is another way to use Project Lombok with IntelliJ IDEA:</p>\n<ol>\n<li>Visit <a href=\"https://projectlombok.org/download\" rel=\"noreferrer\">https://projectlombok.org/download</a></li>\n<li>Download the JAR file into the project lib directory (e.g., <code>$HOME/dev/java/project/libs</code>).</li>\n<li>Start the IDE.</li>\n<li>Click <strong>File 🠖 Settings</strong>.</li>\n<li>Expand <strong>Build, Execution, Deployment 🠖 Compiler 🠖 Annotation Processors</strong>.</li>\n<li>Ensure <strong>Enable annotation processing</strong> is checked.</li>\n<li>Ensure <strong>Store generates sources relative to</strong> is selected based on the project's module settings (if <strong>Module output directory</strong> doesn't work, come back and try the other setting).</li>\n<li>Click <strong>Apply</strong>.</li>\n<li>Click <strong>Plugins</strong>.</li>\n<li>Click <strong>Marketplace</strong>.</li>\n<li>Set search field to: <code>lombok</code></li>\n<li>Install <strong>Lombok</strong>.</li>\n<li>Click <strong>OK</strong>.</li>\n<li>Restart the IDE if prompted.</li>\n<li>Click <strong>File 🠖 Project Structure</strong>.</li>\n<li>Select <strong>Libraries</strong>.</li>\n<li>Click the <strong>+</strong> symbol to add a new project library (or press <kbd>Alt</kbd>+<kbd>Insert</kbd>).</li>\n<li>Select <strong>Java</strong>.</li>\n<li>Set the path to: <code>$HOME/dev/java/project/libs/lombok.jar</code></li>\n<li>Click <strong>OK</strong>.</li>\n<li>Select the modules to apply.</li>\n<li>Click <strong>OK</strong>.</li>\n<li>Optionally, rename <code>lombok</code> to <code>Project Lombok 1.18.8</code>.</li>\n<li>Click <strong>OK</strong>.</li>\n</ol>\n<p>The project can now import from the <code>lombok</code> package and use Project Lombok annotations (e.g., <code>lombok.Setter</code> and <code>lombok.Getter</code>).</p>\n"},{"tags":[],"owner":{"account_id":1316959,"reputation":339,"user_id":1263595,"display_name":"Omri Sivan"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1373789645,"creation_date":1373789645,"answer_id":17637667,"question_id":9424364,"body_markdown":"As noted [here][1], quote: &quot;You should activate external compiler option and enable annotation processors or disable external compiler and disable all of annotation compilers to work with lombok&quot;. This fixed my problem. Note that I added the Scala plugin prior to receiving this error, so I suspect the plugin changed some of the above settings.\r\n\r\n\r\n  [1]: https://code.google.com/p/lombok-intellij-plugin/issues/detail?id=43","title":"Can&#39;t compile project when I&#39;m using Lombok under IntelliJ IDEA","body":"<p>As noted <a href=\"https://code.google.com/p/lombok-intellij-plugin/issues/detail?id=43\" rel=\"noreferrer\">here</a>, quote: \"You should activate external compiler option and enable annotation processors or disable external compiler and disable all of annotation compilers to work with lombok\". This fixed my problem. Note that I added the Scala plugin prior to receiving this error, so I suspect the plugin changed some of the above settings.</p>\n"},{"comments":[{"owner":{"account_id":248909,"reputation":21944,"user_id":524588,"accept_rate":78,"display_name":"Sanghyun Lee"},"score":0,"creation_date":1442901562,"post_id":29358100,"comment_id":53261683,"body_markdown":"I also had the same issue. Try change the version of Lombok so that IntelliJ download the dependency again.","body":"I also had the same issue. Try change the version of Lombok so that IntelliJ download the dependency again."}],"tags":[],"owner":{"account_id":901859,"reputation":878,"user_id":941076,"accept_rate":94,"display_name":"John Chapman"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1427758159,"creation_date":1427758159,"answer_id":29358100,"question_id":9424364,"body_markdown":"I had a similar issue when building with JDK8, set the project back to JDK7 and it worked fine.  Could be an older version of Lombok that won&#39;t compile under JDK8.","title":"Can&#39;t compile project when I&#39;m using Lombok under IntelliJ IDEA","body":"<p>I had a similar issue when building with JDK8, set the project back to JDK7 and it worked fine.  Could be an older version of Lombok that won't compile under JDK8.</p>\n"},{"comments":[{"owner":{"account_id":186093,"reputation":5016,"user_id":423218,"accept_rate":75,"display_name":"BeepDog"},"score":2,"creation_date":1452288880,"post_id":30162758,"comment_id":57119494,"body_markdown":"Still had to do this even with the latest intellij 15.0.2","body":"Still had to do this even with the latest intellij 15.0.2"},{"owner":{"account_id":438741,"reputation":1155,"user_id":827204,"accept_rate":88,"display_name":"Srikanta"},"score":1,"creation_date":1456919115,"post_id":30162758,"comment_id":59165826,"body_markdown":"Still present in 15.0.4. I also had to update the Lambok version to the latest and change the Java compiler to JAVAC. Then do a rebuild of the project","body":"Still present in 15.0.4. I also had to update the Lambok version to the latest and change the Java compiler to JAVAC. Then do a rebuild of the project"},{"owner":{"account_id":318582,"reputation":15242,"user_id":635887,"display_name":"Ray Hunter"},"score":0,"creation_date":1467775416,"post_id":30162758,"comment_id":63855184,"body_markdown":"Still must do in IntelliJ 2016.1.3 :) You have to set the 2 annotation processors. Such a pain when you forget about it!","body":"Still must do in IntelliJ 2016.1.3 :) You have to set the 2 annotation processors. Such a pain when you forget about it!"},{"owner":{"account_id":3118313,"reputation":76,"user_id":2638623,"accept_rate":80,"display_name":"Sukesh Kotian"},"score":0,"creation_date":1482775718,"post_id":30162758,"comment_id":69872065,"body_markdown":"Still must do in IntelliJ 2016.3 :)","body":"Still must do in IntelliJ 2016.3 :)"},{"owner":{"account_id":3579333,"reputation":885,"user_id":2987910,"display_name":"arcuri82"},"score":0,"creation_date":1485108807,"post_id":30162758,"comment_id":70776959,"body_markdown":"even by activating in both places, IntelliJ 2016.3.2 still fails to compile with Lombok 1.16.12 :(","body":"even by activating in both places, IntelliJ 2016.3.2 still fails to compile with Lombok 1.16.12 :("}],"tags":[],"owner":{"account_id":3625171,"reputation":5306,"user_id":4148856,"accept_rate":11,"display_name":"greperror"},"comment_count":5,"down_vote_count":0,"up_vote_count":75,"is_accepted":false,"score":75,"last_activity_date":1431332508,"creation_date":1431332508,"answer_id":30162758,"question_id":9424364,"body_markdown":"Enabling annotation processing will make it work \r\n\r\nBut if you are on a **Mac**, make sure you enable annotation processing(tick the checkbox) from ***both the places*** available. \r\n\r\n1.) Intellij Idea -&gt; Preferences -&gt; Compiler -&gt; Annotation Processors\r\n\r\n2.) File -&gt; Other Settings -&gt; Default Settings -&gt; Compiler -&gt; Annotation Processors\r\n","title":"Can&#39;t compile project when I&#39;m using Lombok under IntelliJ IDEA","body":"<p>Enabling annotation processing will make it work </p>\n\n<p>But if you are on a <strong>Mac</strong>, make sure you enable annotation processing(tick the checkbox) from <strong><em>both the places</em></strong> available. </p>\n\n<p>1.) Intellij Idea -> Preferences -> Compiler -> Annotation Processors</p>\n\n<p>2.) File -> Other Settings -> Default Settings -> Compiler -> Annotation Processors</p>\n"},{"comments":[{"owner":{"account_id":260424,"reputation":23080,"user_id":543969,"accept_rate":86,"display_name":"CodeMonkey"},"score":2,"creation_date":1466012647,"post_id":31879285,"comment_id":63145212,"body_markdown":"This plugin can be installed in Settings/Plugins menu of Intellij. Make sure you have the latest plugin installed. Upgrading to latest plugin worked for me.","body":"This plugin can be installed in Settings/Plugins menu of Intellij. Make sure you have the latest plugin installed. Upgrading to latest plugin worked for me."},{"owner":{"account_id":11780896,"reputation":65,"user_id":8620522,"display_name":"NathanWindisch"},"score":0,"creation_date":1696285543,"post_id":31879285,"comment_id":136131183,"body_markdown":"Also make sure that you have the latest version of IntelliJ installed as well, upgrading solved the issue for me.","body":"Also make sure that you have the latest version of IntelliJ installed as well, upgrading solved the issue for me."}],"tags":[],"owner":{"account_id":1079497,"reputation":1042,"user_id":1076887,"display_name":"mtuulu"},"comment_count":2,"down_vote_count":2,"up_vote_count":9,"is_accepted":false,"score":7,"last_activity_date":1438955106,"creation_date":1438955106,"answer_id":31879285,"question_id":9424364,"body_markdown":"there is a plugin for intellij. see here: https://projectlombok.org/download.html","title":"Can&#39;t compile project when I&#39;m using Lombok under IntelliJ IDEA","body":"<p>there is a plugin for intellij. see here: <a href=\"https://projectlombok.org/download.html\">https://projectlombok.org/download.html</a></p>\n"},{"comments":[{"owner":{"account_id":2739960,"reputation":681,"user_id":2361723,"accept_rate":86,"display_name":"Hans"},"score":4,"creation_date":1498725122,"post_id":39065732,"comment_id":76620128,"body_markdown":"I also had to invalidate the cache and restart before Intellij stopped complaining.","body":"I also had to invalidate the cache and restart before Intellij stopped complaining."}],"tags":[],"owner":{"account_id":4668042,"reputation":91,"user_id":3780610,"display_name":"JasnaRB"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1471792476,"creation_date":1471792476,"answer_id":39065732,"question_id":9424364,"body_markdown":"For those of you who are still having trouble:\r\n\r\nIn addition to the above steps of enabling annotation processors and installing the IntelliJ Lombok plugin, I also had to Build -&gt; Rebuild Project.","title":"Can&#39;t compile project when I&#39;m using Lombok under IntelliJ IDEA","body":"<p>For those of you who are still having trouble:</p>\n\n<p>In addition to the above steps of enabling annotation processors and installing the IntelliJ Lombok plugin, I also had to Build -> Rebuild Project.</p>\n"},{"comments":[{"owner":{"account_id":3088882,"reputation":670,"user_id":2615477,"accept_rate":57,"display_name":"Devon"},"score":0,"creation_date":1615517112,"post_id":40120641,"comment_id":117721417,"body_markdown":"This solution should be much more upvoted. I was investigating this for hours, and this was the only thing that worked.","body":"This solution should be much more upvoted. I was investigating this for hours, and this was the only thing that worked."}],"tags":[],"owner":{"account_id":334868,"reputation":4088,"user_id":661598,"accept_rate":100,"display_name":"wst"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1661952463,"creation_date":1476840766,"answer_id":40120641,"question_id":9424364,"body_markdown":"It may happen that even if you have it configured properly and it is visible among the libraries and in Gradle dependencies list, IntelliJ still does not have it in class path. Or it is there, but configured with different scope (ex: test instead of compile.)\r\n\r\nFirst, make sure you have plugin installed and annotation processing enabled, as stated in other answers.\r\n\r\nIf you still have annotation not recognized, place cursor on it, hit ALT+ENTER (or OPTION+ENTER) and see if you have a menu option `Add library: Gradle: org.projectlombok:lombok:VERSION to class path`. If you can see it, choose this one and it may solve your problem.\r\n\r\nYou may check the library and it&#39;s scope in:\r\nProject settings / Modules / Dependencies tab (search for lombok in there)","title":"Can&#39;t compile project when I&#39;m using Lombok under IntelliJ IDEA","body":"<p>It may happen that even if you have it configured properly and it is visible among the libraries and in Gradle dependencies list, IntelliJ still does not have it in class path. Or it is there, but configured with different scope (ex: test instead of compile.)</p>\n<p>First, make sure you have plugin installed and annotation processing enabled, as stated in other answers.</p>\n<p>If you still have annotation not recognized, place cursor on it, hit ALT+ENTER (or OPTION+ENTER) and see if you have a menu option <code>Add library: Gradle: org.projectlombok:lombok:VERSION to class path</code>. If you can see it, choose this one and it may solve your problem.</p>\n<p>You may check the library and it's scope in:\nProject settings / Modules / Dependencies tab (search for lombok in there)</p>\n"},{"comments":[{"owner":{"account_id":6894315,"reputation":493,"user_id":5296794,"accept_rate":12,"display_name":"TYL"},"score":4,"creation_date":1505472322,"post_id":42809311,"comment_id":79438679,"body_markdown":"thank you.. I got the same problem. I forgot to install the plugin before I set the Annotation configuration :)","body":"thank you.. I got the same problem. I forgot to install the plugin before I set the Annotation configuration :)"}],"tags":[],"owner":{"account_id":3311159,"reputation":3521,"user_id":3839716,"display_name":"CodeShadow"},"comment_count":1,"down_vote_count":1,"up_vote_count":80,"is_accepted":false,"score":79,"last_activity_date":1489579577,"creation_date":1489579577,"answer_id":42809311,"question_id":9424364,"body_markdown":"Picture representation of resolving this issue. \r\n\r\nFirst enable annotation processors and try. This may or may not work. \r\n[![enter image description here][1]][1]\r\n\r\n\r\nPost that, you can install the lombok plugin from intellij, (After installation Intellij will restart to enable the plugin, so make sure you save your work.(Intellij does save all the changes before restart, just to be on the safe side.)) screenshot below: \r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/vAHeL.png\r\n  [2]: https://i.stack.imgur.com/kXvVB.png\r\n\r\n","title":"Can&#39;t compile project when I&#39;m using Lombok under IntelliJ IDEA","body":"<p>Picture representation of resolving this issue. </p>\n\n<p>First enable annotation processors and try. This may or may not work. \n<a href=\"https://i.stack.imgur.com/vAHeL.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/vAHeL.png\" alt=\"enter image description here\"></a></p>\n\n<p>Post that, you can install the lombok plugin from intellij, (After installation Intellij will restart to enable the plugin, so make sure you save your work.(Intellij does save all the changes before restart, just to be on the safe side.)) screenshot below: </p>\n\n<p><a href=\"https://i.stack.imgur.com/kXvVB.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/kXvVB.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":3546765,"reputation":982,"user_id":2962534,"accept_rate":100,"display_name":"Saurabh Saha"},"comment_count":0,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1490621573,"creation_date":1490621573,"answer_id":43047900,"question_id":9424364,"body_markdown":"If you have checked both these steps as follows \r\n\r\n 1. Enable annotations : this is a check done in IntelliJ\r\n    preferences. \r\n 2. Importing lombok into IntelliJ classPath\r\n    (Preferences -&gt; Plugins)\r\n\r\nand still getting errors then **please check the compiler** - if it is **JAVAC** or **ECLIPSE**.\r\n\r\nYou can check the compiler in Preferences -&gt; Build,Execution,Deployment -&gt; Compiler -&gt; Java Compiler.\r\n\r\nChange the Use compiler to Javac (if it is Eclipse). This is what worked for me.\r\n","title":"Can&#39;t compile project when I&#39;m using Lombok under IntelliJ IDEA","body":"<p>If you have checked both these steps as follows </p>\n\n<ol>\n<li>Enable annotations : this is a check done in IntelliJ\npreferences. </li>\n<li>Importing lombok into IntelliJ classPath\n(Preferences -> Plugins)</li>\n</ol>\n\n<p>and still getting errors then <strong>please check the compiler</strong> - if it is <strong>JAVAC</strong> or <strong>ECLIPSE</strong>.</p>\n\n<p>You can check the compiler in Preferences -> Build,Execution,Deployment -> Compiler -> Java Compiler.</p>\n\n<p>Change the Use compiler to Javac (if it is Eclipse). This is what worked for me.</p>\n"},{"tags":[],"owner":{"account_id":470389,"reputation":5211,"user_id":877570,"accept_rate":40,"display_name":"user64141"},"comment_count":0,"down_vote_count":4,"up_vote_count":1,"is_accepted":false,"score":-3,"last_activity_date":1493414256,"creation_date":1493414256,"answer_id":43689009,"question_id":9424364,"body_markdown":"To get this working, simply install the &quot;Lombok Plugin&quot; for IntelliJ.  You don&#39;t need to do anything with enabling &quot;Annotation Processors&quot;, as some other commentors have suggested.  (I&#39;ve tested this with the latest version of IntelliJ IDEA, currently 2017.1.2). To install the plugin, go to Settings, then Plugins, then click the &quot;Browse repositories&quot; button, then search for &quot;Lombok&quot;, and install the Lombok Plugin.  You will be prompted to restart IntelliJ.  Afterwards, you should be able to compile from IntelliJ, and you won&#39;t receive any more error inspections.  ","title":"Can&#39;t compile project when I&#39;m using Lombok under IntelliJ IDEA","body":"<p>To get this working, simply install the \"Lombok Plugin\" for IntelliJ.  You don't need to do anything with enabling \"Annotation Processors\", as some other commentors have suggested.  (I've tested this with the latest version of IntelliJ IDEA, currently 2017.1.2). To install the plugin, go to Settings, then Plugins, then click the \"Browse repositories\" button, then search for \"Lombok\", and install the Lombok Plugin.  You will be prompted to restart IntelliJ.  Afterwards, you should be able to compile from IntelliJ, and you won't receive any more error inspections.  </p>\n"},{"tags":[],"owner":{"account_id":3296493,"reputation":1463,"user_id":2773647,"accept_rate":67,"display_name":"cybersoft"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1500308413,"creation_date":1500308413,"answer_id":45149100,"question_id":9424364,"body_markdown":"If you tried all solutions presented here and still can&#39;t compile sources, also look here: [Static import of builder class breaks bytecode generation in Maven](https://github.com/rzwitserloot/lombok/issues/979) - look at your sources if it has such static imports. This affects maven plugin, so compilation will fail on other build systems outside IntelliJ IDEA.","title":"Can&#39;t compile project when I&#39;m using Lombok under IntelliJ IDEA","body":"<p>If you tried all solutions presented here and still can't compile sources, also look here: <a href=\"https://github.com/rzwitserloot/lombok/issues/979\" rel=\"nofollow noreferrer\">Static import of builder class breaks bytecode generation in Maven</a> - look at your sources if it has such static imports. This affects maven plugin, so compilation will fail on other build systems outside IntelliJ IDEA.</p>\n"},{"tags":[],"owner":{"account_id":5894271,"reputation":831,"user_id":4639860,"display_name":"Kehinde Adedamola Shittu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1507339300,"creation_date":1507339300,"answer_id":46615797,"question_id":9424364,"body_markdown":"In my case, I had all the things mentioned below in place and it still wasn&#39;t working. \r\n\r\n1. I had lombok plugin installed correctly\r\n2. Annotation Processors, also checked.\r\n3. My Java compiler was set to JAVAC  \r\n\r\nTo fix my issues I had to \r\n\r\n1. Update lombok to the latest version (v0.15) as at 7, Oct, 2017.\r\n2. Restart IntelliJ.\r\n3. Rebuild project. \r\n\r\nSee screenshots on how to update and rebuild project below.\r\n\r\n[How to update lombok][1]\r\n\r\n[How to rebuild project][2]\r\n \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/VWtaf.png\r\n  [2]: https://i.stack.imgur.com/lelUs.png","title":"Can&#39;t compile project when I&#39;m using Lombok under IntelliJ IDEA","body":"<p>In my case, I had all the things mentioned below in place and it still wasn't working. </p>\n\n<ol>\n<li>I had lombok plugin installed correctly</li>\n<li>Annotation Processors, also checked.</li>\n<li>My Java compiler was set to JAVAC  </li>\n</ol>\n\n<p>To fix my issues I had to </p>\n\n<ol>\n<li>Update lombok to the latest version (v0.15) as at 7, Oct, 2017.</li>\n<li>Restart IntelliJ.</li>\n<li>Rebuild project. </li>\n</ol>\n\n<p>See screenshots on how to update and rebuild project below.</p>\n\n<p><a href=\"https://i.stack.imgur.com/VWtaf.png\" rel=\"nofollow noreferrer\">How to update lombok</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/lelUs.png\" rel=\"nofollow noreferrer\">How to rebuild project</a></p>\n"},{"comments":[{"owner":{"account_id":5053049,"reputation":5084,"user_id":4057016,"accept_rate":53,"display_name":"thenakulchawla"},"score":0,"creation_date":1579198019,"post_id":47688724,"comment_id":105694862,"body_markdown":"I don&#39;t see Default Settings in Other Settings in IntelliJ. Are these still present. I am using the Ultimate edition - version11.03","body":"I don&#39;t see Default Settings in Other Settings in IntelliJ. Are these still present. I am using the Ultimate edition - version11.03"}],"tags":[],"owner":{"account_id":3041527,"reputation":1728,"user_id":2578409,"display_name":"Bruce"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1512627248,"creation_date":1512627248,"answer_id":47688724,"question_id":9424364,"body_markdown":"**1、install lombok plugin for IDEA**\r\n\r\nIntellij Idea -&gt; Preferences -&gt; Plugins -&gt; type in lombok -&gt; Search in Repositories -&gt; install -&gt; restart IDEA\r\n\r\n**2、 config lombok plugin**\r\n\r\nEnabling annotation processing will make it work\r\n\r\nBut if you are on a Mac, make sure you enable annotation processing in the following two places:\r\n\r\nIntellij Idea -&gt; Preferences -&gt; Build, Execution, Deployment -&gt; Compiler -&gt; Annotation Processors, check the checkbox of &quot;Enable annotation processing&quot;.\r\nFile -&gt; Other Settings -&gt; Default Settings -&gt; Build, Execution, Deployment -&gt; Compiler -&gt; Annotation Processors, check the checkbox of &quot;Enable annotation processing&quot;.","title":"Can&#39;t compile project when I&#39;m using Lombok under IntelliJ IDEA","body":"<p><strong>1、install lombok plugin for IDEA</strong></p>\n\n<p>Intellij Idea -> Preferences -> Plugins -> type in lombok -> Search in Repositories -> install -> restart IDEA</p>\n\n<p><strong>2、 config lombok plugin</strong></p>\n\n<p>Enabling annotation processing will make it work</p>\n\n<p>But if you are on a Mac, make sure you enable annotation processing in the following two places:</p>\n\n<p>Intellij Idea -> Preferences -> Build, Execution, Deployment -> Compiler -> Annotation Processors, check the checkbox of \"Enable annotation processing\".\nFile -> Other Settings -> Default Settings -> Build, Execution, Deployment -> Compiler -> Annotation Processors, check the checkbox of \"Enable annotation processing\".</p>\n"},{"tags":[],"owner":{"account_id":9120249,"reputation":15521,"user_id":6785908,"accept_rate":70,"display_name":"so-random-dude"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1517005683,"creation_date":1517005683,"answer_id":48470461,"question_id":9424364,"body_markdown":"I was on `Mac`\r\n\r\nThis is my IntelliJ IDEA and Mac Version - IntelliJ IDEA 2017.1.5 Build #IU-171.4694.70   --- Mac OS X 10.12\r\n\r\nIn addition to enabling annotation processing (tick the checkbox) at these 2 places.\r\n\r\n&gt; 1.) Intellij IDEA -&gt; Preferences -&gt; Compiler -&gt; Annotation Processors\r\n\r\n.\r\n&gt; 2.) File -&gt; Other Settings -&gt; Default Settings -&gt; Compiler -&gt; Annotation Processors\r\n\r\nI had to install Lombok plugin too to make it work. \r\n\r\n&gt; 3.) Intellij IDEA -&gt; Preferences -&gt; Plugins -&gt;Browse Repositories-&gt; Search for &quot;Lombok&quot;-&gt; install plugin -&gt; Apply and restart IDEA\r\n\r\n\r\n\r\n\r\n\r\n","title":"Can&#39;t compile project when I&#39;m using Lombok under IntelliJ IDEA","body":"<p>I was on <code>Mac</code></p>\n\n<p>This is my IntelliJ IDEA and Mac Version - IntelliJ IDEA 2017.1.5 Build #IU-171.4694.70   --- Mac OS X 10.12</p>\n\n<p>In addition to enabling annotation processing (tick the checkbox) at these 2 places.</p>\n\n<blockquote>\n  <p>1.) Intellij IDEA -> Preferences -> Compiler -> Annotation Processors</p>\n</blockquote>\n\n<p>.</p>\n\n<blockquote>\n  <p>2.) File -> Other Settings -> Default Settings -> Compiler -> Annotation Processors</p>\n</blockquote>\n\n<p>I had to install Lombok plugin too to make it work. </p>\n\n<blockquote>\n  <p>3.) Intellij IDEA -> Preferences -> Plugins ->Browse Repositories-> Search for \"Lombok\"-> install plugin -> Apply and restart IDEA</p>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":455032,"reputation":2720,"user_id":853001,"display_name":"realPK"},"score":0,"creation_date":1519623040,"post_id":48694357,"comment_id":84968970,"body_markdown":"What version of IntelliJ are you using? Also, what JDK version?","body":"What version of IntelliJ are you using? Also, what JDK version?"}],"tags":[],"owner":{"account_id":12908981,"reputation":31,"user_id":9335362,"display_name":"Shreya Mishra"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1518122170,"creation_date":1518122170,"answer_id":48694357,"question_id":9424364,"body_markdown":"It didn#t work for me with any of the above solutions. I added  `&lt;scope&gt;provided&lt;/scope&gt;` to the dependency in pom.xml and it worked.\r\n\r\n    &lt;dependency&gt;\r\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n            &lt;version&gt;1.16.20&lt;/version&gt;\r\n            &lt;scope&gt;provided&lt;/scope&gt;\r\n        &lt;/dependency&gt;","title":"Can&#39;t compile project when I&#39;m using Lombok under IntelliJ IDEA","body":"<p>It didn#t work for me with any of the above solutions. I added  <code>&lt;scope&gt;provided&lt;/scope&gt;</code> to the dependency in pom.xml and it worked.</p>\n\n<pre><code>&lt;dependency&gt;\n        &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n        &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n        &lt;version&gt;1.16.20&lt;/version&gt;\n        &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":455032,"reputation":2720,"user_id":853001,"display_name":"realPK"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1519623004,"creation_date":1519623004,"answer_id":48981960,"question_id":9424364,"body_markdown":"You can fix `cannot find symbol variable log` when using lombok in IntelliJ IDEA 2017.1.3 by doing this:\r\n\r\n&gt; IntelliJ Preferences &gt; Build, Execution, Deployment &gt; Annotation\r\n&gt; Processors &gt; [Check] Enable annotation processing &gt; Apply","title":"Can&#39;t compile project when I&#39;m using Lombok under IntelliJ IDEA","body":"<p>You can fix <code>cannot find symbol variable log</code> when using lombok in IntelliJ IDEA 2017.1.3 by doing this:</p>\n\n<blockquote>\n  <p>IntelliJ Preferences > Build, Execution, Deployment > Annotation\n  Processors > [Check] Enable annotation processing > Apply</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":8986718,"reputation":2467,"user_id":6700081,"accept_rate":73,"display_name":"firstpostcommenter"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1537520121,"creation_date":1537519814,"answer_id":52440000,"question_id":9424364,"body_markdown":"Install the below plugin and restart the IDE to resolve the errors:\r\n\r\n    File -&gt; Settings -&gt; Plugins-&gt; Browse Repositories -&gt; Lombok Plugin\r\n\r\nEnable annotation processor:\r\n\r\n    File -&gt; Settings -&gt; Build, Execution, Deployment -&gt; Compiler -&gt; Annotation Processors\r\n    File -&gt; Other Settings -&gt; Default Settings -&gt; Compiler -&gt; Annotation Processors\r\n\r\n","title":"Can&#39;t compile project when I&#39;m using Lombok under IntelliJ IDEA","body":"<p>Install the below plugin and restart the IDE to resolve the errors:</p>\n\n<pre><code>File -&gt; Settings -&gt; Plugins-&gt; Browse Repositories -&gt; Lombok Plugin\n</code></pre>\n\n<p>Enable annotation processor:</p>\n\n<pre><code>File -&gt; Settings -&gt; Build, Execution, Deployment -&gt; Compiler -&gt; Annotation Processors\nFile -&gt; Other Settings -&gt; Default Settings -&gt; Compiler -&gt; Annotation Processors\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5639772,"reputation":388,"user_id":4464017,"display_name":"Mr Nobody"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1566448277,"creation_date":1537900944,"answer_id":52504830,"question_id":9424364,"body_markdown":"I faced a similar problem. The following worked for me.\r\n\r\ndownload (from here [https://projectlombok.org/download][1]) and add the jar in your project structure.\r\n    \r\nSteps: File -&gt; Project Structure -&gt; Global Libraries\r\n\r\n\r\n  [1]:https://projectlombok.org/download","title":"Can&#39;t compile project when I&#39;m using Lombok under IntelliJ IDEA","body":"<p>I faced a similar problem. The following worked for me.</p>\n\n<p>download (from here <a href=\"https://projectlombok.org/download\" rel=\"nofollow noreferrer\">https://projectlombok.org/download</a>) and add the jar in your project structure.</p>\n\n<p>Steps: File -> Project Structure -> Global Libraries</p>\n"},{"comments":[{"owner":{"account_id":6334872,"reputation":798,"user_id":4918598,"accept_rate":79,"display_name":"0x01Brain"},"score":0,"creation_date":1591252822,"post_id":54758981,"comment_id":109985830,"body_markdown":"Did you had maven or gradle? I am having a problem making lombok work for a multi module project. I keep getting the error: \n`Error:java: Annotation processing is not supported for module cycles. Please ensure that all modules from cycle [module-core,module-utils] are excluded from annotation processing`","body":"Did you had maven or gradle? I am having a problem making lombok work for a multi module project. I keep getting the error:  <code>Error:java: Annotation processing is not supported for module cycles. Please ensure that all modules from cycle [module-core,module-utils] are excluded from annotation processing</code>"},{"owner":{"account_id":2739457,"reputation":7470,"user_id":2361308,"accept_rate":71,"display_name":"Hearen"},"score":0,"creation_date":1591514069,"post_id":54758981,"comment_id":110079989,"body_markdown":"@0x01Brain I *was* using maven at that time, but now using gradle instead. As for your question, I do hope you can start a new specific question to describe the details and there are lots of experts out there will help you ;)","body":"@0x01Brain I <i>was</i> using maven at that time, but now using gradle instead. As for your question, I do hope you can start a new specific question to describe the details and there are lots of experts out there will help you ;)"},{"owner":{"account_id":6334872,"reputation":798,"user_id":4918598,"accept_rate":79,"display_name":"0x01Brain"},"score":0,"creation_date":1591898547,"post_id":54758981,"comment_id":110237781,"body_markdown":"never mind I got it to compile now, thanks. I had some conflict in depedencies module-core was imported in utils module and utils module was imported in core module which made a conflict.","body":"never mind I got it to compile now, thanks. I had some conflict in depedencies module-core was imported in utils module and utils module was imported in core module which made a conflict."}],"tags":[],"owner":{"account_id":2739457,"reputation":7470,"user_id":2361308,"accept_rate":71,"display_name":"Hearen"},"comment_count":3,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1550833429,"creation_date":1550551402,"answer_id":54758981,"question_id":9424364,"body_markdown":"Just for reference using *IntelliJ 2018.3*, I solved this issue (using `@Data` annotation to insert `getter/setter`) following the three steps:\r\n\r\n1. File -&gt; Settings -&gt; Build, Execution, Deployment -&gt; Annotation Processors -&gt; Enable Annotation Processing;\r\n\r\n[![enter image description here][1]][1]\r\n\r\n&gt; Do remember to ***Apply*** the change.\r\n\r\n2. Install plugin *lombok* in the same setting dialog;\r\n\r\n[![enter image description here][2]][2]\r\n\r\n3. It seems good enough for now, it requires to restart IntelliJ and then rebuild your project.\r\n\r\nBest wishes :)\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/hPvFU.png\r\n  [2]: https://i.stack.imgur.com/5GaL7.png","title":"Can&#39;t compile project when I&#39;m using Lombok under IntelliJ IDEA","body":"<p>Just for reference using <em>IntelliJ 2018.3</em>, I solved this issue (using <code>@Data</code> annotation to insert <code>getter/setter</code>) following the three steps:</p>\n\n<ol>\n<li>File -> Settings -> Build, Execution, Deployment -> Annotation Processors -> Enable Annotation Processing;</li>\n</ol>\n\n<p><a href=\"https://i.stack.imgur.com/hPvFU.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/hPvFU.png\" alt=\"enter image description here\"></a></p>\n\n<blockquote>\n  <p>Do remember to <strong><em>Apply</em></strong> the change.</p>\n</blockquote>\n\n<ol start=\"2\">\n<li>Install plugin <em>lombok</em> in the same setting dialog;</li>\n</ol>\n\n<p><a href=\"https://i.stack.imgur.com/5GaL7.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/5GaL7.png\" alt=\"enter image description here\"></a></p>\n\n<ol start=\"3\">\n<li>It seems good enough for now, it requires to restart IntelliJ and then rebuild your project.</li>\n</ol>\n\n<p>Best wishes :)</p>\n"},{"tags":[],"owner":{"account_id":1008209,"reputation":119,"user_id":1021356,"display_name":"Srikanth Reddy"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1551345041,"creation_date":1551345041,"answer_id":54921982,"question_id":9424364,"body_markdown":"I have faced this problem after updating the IDEA to 2018.3. I had to update all the existing plugin","title":"Can&#39;t compile project when I&#39;m using Lombok under IntelliJ IDEA","body":"<p>I have faced this problem after updating the IDEA to 2018.3. I had to update all the existing plugin</p>\n"},{"comments":[{"owner":{"account_id":4728451,"reputation":451,"user_id":3824715,"accept_rate":62,"display_name":"ch1ll"},"score":6,"creation_date":1569360897,"post_id":57029310,"comment_id":102570174,"body_markdown":"this, this, and a thousand times this. Thank you, I was stuck for one hour","body":"this, this, and a thousand times this. Thank you, I was stuck for one hour"},{"owner":{"account_id":5295877,"reputation":1405,"user_id":4227069,"display_name":"Eric Tan"},"score":1,"creation_date":1579068263,"post_id":57029310,"comment_id":105639125,"body_markdown":"yep, you are right, we should check the build config first, then IDE setting. thanks a heap!","body":"yep, you are right, we should check the build config first, then IDE setting. thanks a heap!"},{"owner":{"account_id":4115446,"reputation":1122,"user_id":3377123,"display_name":"doctorram"},"score":0,"creation_date":1588370790,"post_id":57029310,"comment_id":108878948,"body_markdown":"This is the only thing that actually worked!  Why it has only 13 likes?!","body":"This is the only thing that actually worked!  Why it has only 13 likes?!"},{"owner":{"account_id":2368273,"reputation":516,"user_id":2073526,"display_name":"Stevers"},"score":3,"creation_date":1615956859,"post_id":57029310,"comment_id":117849986,"body_markdown":"God i forgot Gradle added annotationProcessor in newer versions. Thank you for your answer.","body":"God i forgot Gradle added annotationProcessor in newer versions. Thank you for your answer."},{"owner":{"account_id":7012848,"reputation":117,"user_id":5375093,"display_name":"vikas tiwari"},"score":2,"creation_date":1631534884,"post_id":57029310,"comment_id":122239880,"body_markdown":"After going throgh so many solutions , this worked for me. After adding &quot;annotationProcessor&quot; , everything started working fine.","body":"After going throgh so many solutions , this worked for me. After adding &quot;annotationProcessor&quot; , everything started working fine."},{"owner":{"account_id":13017479,"reputation":2599,"user_id":9456688,"display_name":"Elyasaf755"},"score":0,"creation_date":1634033712,"post_id":57029310,"comment_id":122912056,"body_markdown":"This is the correct answer. I didn&#39;t have &#39;annotationProcessor&#39; defined in my build.gradle dependencies.","body":"This is the correct answer. I didn&#39;t have &#39;annotationProcessor&#39; defined in my build.gradle dependencies."},{"owner":{"account_id":4558519,"reputation":151,"user_id":3701499,"display_name":"TDD"},"score":0,"creation_date":1651848368,"post_id":57029310,"comment_id":127468980,"body_markdown":"Thank you, this is best answer for saving me hours.","body":"Thank you, this is best answer for saving me hours."},{"owner":{"account_id":7600040,"reputation":71,"user_id":5765007,"display_name":"Orlando Alfonso"},"score":0,"creation_date":1652206865,"post_id":57029310,"comment_id":127549506,"body_markdown":"Awesome, yep the problem was on my gradle dependencies, thanks so much","body":"Awesome, yep the problem was on my gradle dependencies, thanks so much"},{"owner":{"account_id":7470769,"reputation":1333,"user_id":5678845,"accept_rate":100,"display_name":"Roberto Pegoraro"},"score":0,"creation_date":1676647784,"post_id":57029310,"comment_id":133185354,"body_markdown":"&gt; java.lang.IllegalAccessError: class lombok.javac.apt.LombokProcessor (in unnamed module @0x5ffcc38c) cannot access class com.sun.tools.javac.processing.JavacProcessingEnvironment","body":"&gt; java.lang.IllegalAccessError: class lombok.javac.apt.LombokProcessor (in unnamed module @0x5ffcc38c) cannot access class com.sun.tools.javac.processing.JavacProcessingEnvironment"}],"tags":[],"owner":{"account_id":9714717,"reputation":1065,"user_id":7205516,"display_name":"Yevhenii Tsybaiev"},"comment_count":9,"down_vote_count":0,"up_vote_count":85,"is_accepted":false,"score":85,"last_activity_date":1571844003,"creation_date":1563122570,"answer_id":57029310,"question_id":9424364,"body_markdown":"1. Make sure it&#39;s added correctly to your project. \r\n  \r\n\r\nexample for Gradle: \r\n\r\n     dependencies {\r\n         compileOnly &#39;org.projectlombok:lombok:1.18.8&#39;\r\n         annotationProcessor &#39;org.projectlombok:lombok:1.18.8&#39;\r\n         ...\r\n     }\r\n\r\n2. Install Lombok plugin for your IDE\r\n3. Check &quot;Enable annotation processing&quot; checkbox in IDE (IntellijIdea), have no idea if there is anything like this for other IDEs like Eclipse. \r\n","title":"Can&#39;t compile project when I&#39;m using Lombok under IntelliJ IDEA","body":"<ol>\n<li>Make sure it's added correctly to your project. </li>\n</ol>\n\n<p>example for Gradle: </p>\n\n<pre><code> dependencies {\n     compileOnly 'org.projectlombok:lombok:1.18.8'\n     annotationProcessor 'org.projectlombok:lombok:1.18.8'\n     ...\n }\n</code></pre>\n\n<ol start=\"2\">\n<li>Install Lombok plugin for your IDE</li>\n<li>Check \"Enable annotation processing\" checkbox in IDE (IntellijIdea), have no idea if there is anything like this for other IDEs like Eclipse. </li>\n</ol>\n"},{"tags":[],"owner":{"account_id":8449542,"reputation":181,"user_id":6338832,"display_name":"TGU"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1573441675,"creation_date":1573441675,"answer_id":58795073,"question_id":9424364,"body_markdown":"If lombok libs are set correctly, as many mentioned above, click on the annotation that wouldn&#39;t compile, Alt-Enter, a correct import will appear, and the code will compile. - it took me a while to figure it out. I put it here just in case people may miss the simple obvious.\r\n\r\n","title":"Can&#39;t compile project when I&#39;m using Lombok under IntelliJ IDEA","body":"<p>If lombok libs are set correctly, as many mentioned above, click on the annotation that wouldn't compile, Alt-Enter, a correct import will appear, and the code will compile. - it took me a while to figure it out. I put it here just in case people may miss the simple obvious.</p>\n"},{"tags":[],"owner":{"account_id":4248143,"reputation":2666,"user_id":3476147,"accept_rate":66,"display_name":"Mark Jin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1574804347,"creation_date":1574804347,"answer_id":59059732,"question_id":9424364,"body_markdown":"For Eclipse users on MacOS, do this. It worked for me.\r\n\r\n 1. Copy lombok.jar into `Eclipse.app/Contents/MacOS` directory. \r\n 2. Add `-javaagent:lombok.jar` to the end of Eclipse.app/Contents/Eclipse/eclipse.ini file. \r\n 3. Restart Eclipse and enable “Annotation Processing” in project properties.\r\n\r\nReferencing [this][1]\r\n\r\n\r\n  [1]: https://www.journaldev.com/18124/java-project-lombok","title":"Can&#39;t compile project when I&#39;m using Lombok under IntelliJ IDEA","body":"<p>For Eclipse users on MacOS, do this. It worked for me.</p>\n\n<ol>\n<li>Copy lombok.jar into <code>Eclipse.app/Contents/MacOS</code> directory. </li>\n<li>Add <code>-javaagent:lombok.jar</code> to the end of Eclipse.app/Contents/Eclipse/eclipse.ini file. </li>\n<li>Restart Eclipse and enable “Annotation Processing” in project properties.</li>\n</ol>\n\n<p>Referencing <a href=\"https://www.journaldev.com/18124/java-project-lombok\" rel=\"nofollow noreferrer\">this</a></p>\n"},{"comments":[{"owner":{"account_id":8672866,"reputation":1726,"user_id":6491200,"display_name":"Caio Santos"},"score":2,"creation_date":1631729113,"post_id":59968733,"comment_id":122303652,"body_markdown":"It worked for me. I use Kotlin DSL and my code is like this:dependencies {\n    compileOnly(&quot;org.projectlombok:lombok:1.18.8&quot;)\n    annotationProcessor(&quot;org.projectlombok:lombok:1.18.8&quot;) ...\n}","body":"It worked for me. I use Kotlin DSL and my code is like this:dependencies {     compileOnly(&quot;org.projectlombok:lombok:1.18.8&quot;)     annotationProcessor(&quot;org.projectlombok:lombok:1.18.8&quot;) ... }"},{"owner":{"account_id":12731158,"reputation":149,"user_id":9247750,"display_name":"Lakshmipathi G"},"score":0,"creation_date":1664824280,"post_id":59968733,"comment_id":130555022,"body_markdown":"Thanks for the answer. It saved hours of my time","body":"Thanks for the answer. It saved hours of my time"}],"tags":[],"owner":{"account_id":10595855,"reputation":2708,"user_id":7804595,"display_name":"Valeriy K."},"comment_count":2,"down_vote_count":0,"up_vote_count":33,"is_accepted":false,"score":33,"last_activity_date":1580306551,"creation_date":1580306551,"answer_id":59968733,"question_id":9424364,"body_markdown":"in the latest Gradle version you should use annotationProcessor:\r\n\r\n    compileOnly &#39;org.projectlombok:lombok&#39;\r\n\tannotationProcessor &#39;org.projectlombok:lombok:1.18.8&#39;","title":"Can&#39;t compile project when I&#39;m using Lombok under IntelliJ IDEA","body":"<p>in the latest Gradle version you should use annotationProcessor:</p>\n\n<pre><code>compileOnly 'org.projectlombok:lombok'\nannotationProcessor 'org.projectlombok:lombok:1.18.8'\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13099665,"reputation":240,"user_id":9464471,"display_name":"Stepan Mozyra"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1581456319,"creation_date":1581456319,"answer_id":60177594,"question_id":9424364,"body_markdown":"After trying all the suggestions here, I have also find another kind of solution. It seems that sometimes IDEA can not obtain processors from project classpath.\r\n\r\nSo, on the **Annotation Processors** settings tab, you have to manually specify **Processor path**.","title":"Can&#39;t compile project when I&#39;m using Lombok under IntelliJ IDEA","body":"<p>After trying all the suggestions here, I have also find another kind of solution. It seems that sometimes IDEA can not obtain processors from project classpath.</p>\n\n<p>So, on the <strong>Annotation Processors</strong> settings tab, you have to manually specify <strong>Processor path</strong>.</p>\n"},{"tags":[],"owner":{"account_id":14887500,"reputation":31,"user_id":10750244,"display_name":"Vaibhav K"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1589353050,"creation_date":1589353050,"answer_id":61768206,"question_id":9424364,"body_markdown":"Apart from mentioned in all answers I have to add the below code in pom.xml configuration to makes mvn clean install work. Before adding this code I was getting cannot found symbol for getters and setters.\r\n\r\n                        &lt;annotationProcessorPath&gt;\r\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n                            &lt;version&gt;1.18.8&lt;/version&gt;\r\n                        &lt;/annotationProcessorPath&gt;","title":"Can&#39;t compile project when I&#39;m using Lombok under IntelliJ IDEA","body":"<p>Apart from mentioned in all answers I have to add the below code in pom.xml configuration to makes mvn clean install work. Before adding this code I was getting cannot found symbol for getters and setters.</p>\n\n<pre><code>                    &lt;annotationProcessorPath&gt;\n                        &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                        &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;version&gt;1.18.8&lt;/version&gt;\n                    &lt;/annotationProcessorPath&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2499306,"reputation":5537,"user_id":2174878,"accept_rate":41,"display_name":"Sagiruddin Mondal"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1589615780,"creation_date":1589615780,"answer_id":61833609,"question_id":9424364,"body_markdown":"For me what worked:\r\n\r\n1. I uninstalled the installed the Lombok plugin freshly\r\n2. I ticked &quot;Enable Annotation Plugin&quot;\r\n3. I selected &quot;Obtain processor from the project classpath&quot; in the same page","title":"Can&#39;t compile project when I&#39;m using Lombok under IntelliJ IDEA","body":"<p>For me what worked:</p>\n\n<ol>\n<li>I uninstalled the installed the Lombok plugin freshly</li>\n<li>I ticked \"Enable Annotation Plugin\"</li>\n<li>I selected \"Obtain processor from the project classpath\" in the same page</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":3918707,"reputation":707,"user_id":3241877,"display_name":"Volodymyr Perebykivskyi"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1589966147,"creation_date":1589966147,"answer_id":61909367,"question_id":9424364,"body_markdown":"For IntelliJ IDEA 2020.1.1 enabling Kotlin plugin fixed this issue.","title":"Can&#39;t compile project when I&#39;m using Lombok under IntelliJ IDEA","body":"<p>For IntelliJ IDEA 2020.1.1 enabling Kotlin plugin fixed this issue.</p>\n"},{"comments":[{"owner":{"account_id":3130595,"reputation":615,"user_id":2648478,"accept_rate":67,"display_name":"Pavlo Zvarych"},"score":0,"creation_date":1609422311,"post_id":62865132,"comment_id":115840111,"body_markdown":"I had to add ```requires org.slf4j;``` to mole-info.java also","body":"I had to add <code>requires org.slf4j;</code> to mole-info.java also"}],"tags":[],"owner":{"account_id":4990101,"reputation":475,"user_id":4012589,"display_name":"Michel Dambros Figueiredo"},"comment_count":1,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1594579219,"creation_date":1594579219,"answer_id":62865132,"question_id":9424364,"body_markdown":"Including the following in the pom.xml is what worked for me:\r\n\r\n    &lt;build&gt;\r\n            &lt;defaultGoal&gt;spring-boot:run&lt;/defaultGoal&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;source&gt;${java.version}&lt;/source&gt;\r\n                        &lt;target&gt;${java.version}&lt;/target&gt;\r\n                        &lt;annotationProcessorPaths&gt;\r\n    ...\r\n                            &lt;path&gt;\r\n                                &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n                                &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n                                &lt;version&gt;${lombok.version}&lt;/version&gt;\r\n                            &lt;/path&gt;       \r\n                        &lt;/annotationProcessorPaths&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n    &lt;/build&gt;","title":"Can&#39;t compile project when I&#39;m using Lombok under IntelliJ IDEA","body":"<p>Including the following in the pom.xml is what worked for me:</p>\n<pre><code>&lt;build&gt;\n        &lt;defaultGoal&gt;spring-boot:run&lt;/defaultGoal&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;${java.version}&lt;/source&gt;\n                    &lt;target&gt;${java.version}&lt;/target&gt;\n                    &lt;annotationProcessorPaths&gt;\n...\n                        &lt;path&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                            &lt;version&gt;${lombok.version}&lt;/version&gt;\n                        &lt;/path&gt;       \n                    &lt;/annotationProcessorPaths&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n&lt;/build&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1202607,"reputation":1770,"user_id":1172945,"accept_rate":74,"display_name":"Tugrul"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1603627158,"creation_date":1603627158,"answer_id":64523421,"question_id":9424364,"body_markdown":"If **you did everything** mentioned in this question and **It&#39;s still failing**, **don&#39;t forget** to **remove /target** folder under your projects. And If it&#39;s still failing, restart your IDE. \r\nAnd If it&#39;s  still failing restart your computer.","title":"Can&#39;t compile project when I&#39;m using Lombok under IntelliJ IDEA","body":"<p>If <strong>you did everything</strong> mentioned in this question and <strong>It's still failing</strong>, <strong>don't forget</strong> to <strong>remove /target</strong> folder under your projects. And If it's still failing, restart your IDE.\nAnd If it's  still failing restart your computer.</p>\n"},{"tags":[],"owner":{"account_id":399885,"reputation":1418,"user_id":765540,"accept_rate":25,"display_name":"Blink"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1608195227,"creation_date":1608195227,"answer_id":65337404,"question_id":9424364,"body_markdown":"After enabling annotator processors I had to update to the newest version of lombok:\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n            &lt;version&gt;1.18.16&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\nIntellij version:\r\n\r\n    IntelliJ IDEA 2020.3 (Community Edition)\r\n    Build #IC-203.5981.155, built on November 30, 2020\r\n    Runtime version: 11.0.9+11-b1145.21 x86_64\r\n    VM: OpenJDK 64-Bit Server VM by JetBrains s.r.o.\r\n    macOS 10.16\r\n    GC: ParNew, ConcurrentMarkSweep\r\n    Memory: 1981M\r\n    Cores: 8\r\n    Non-Bundled Plugins: org.intellij.plugins.hcl, Lombook Plugin, org.sonarlint.idea, in.1ton.idea.spring.assistant.plugin, org.jetbrains.kotlin, gherkin, cucumber-java","title":"Can&#39;t compile project when I&#39;m using Lombok under IntelliJ IDEA","body":"<p>After enabling annotator processors I had to update to the newest version of lombok:</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n        &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n        &lt;version&gt;1.18.16&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>Intellij version:</p>\n<pre><code>IntelliJ IDEA 2020.3 (Community Edition)\nBuild #IC-203.5981.155, built on November 30, 2020\nRuntime version: 11.0.9+11-b1145.21 x86_64\nVM: OpenJDK 64-Bit Server VM by JetBrains s.r.o.\nmacOS 10.16\nGC: ParNew, ConcurrentMarkSweep\nMemory: 1981M\nCores: 8\nNon-Bundled Plugins: org.intellij.plugins.hcl, Lombook Plugin, org.sonarlint.idea, in.1ton.idea.spring.assistant.plugin, org.jetbrains.kotlin, gherkin, cucumber-java\n</code></pre>\n"},{"comments":[{"owner":{"account_id":7074458,"reputation":3504,"user_id":5415018,"display_name":"Urosh T."},"score":1,"creation_date":1611094656,"post_id":65415054,"comment_id":116339402,"body_markdown":"Thanks, worked like a charm for 2020.3 CE!","body":"Thanks, worked like a charm for 2020.3 CE!"},{"owner":{"account_id":34716,"reputation":3040,"user_id":98145,"accept_rate":86,"display_name":"nash"},"score":0,"creation_date":1638473814,"post_id":65415054,"comment_id":124104638,"body_markdown":"Needed to do this on 2021.1.2","body":"Needed to do this on 2021.1.2"}],"tags":[],"owner":{"account_id":9949327,"reputation":720,"user_id":7362660,"display_name":"Enrique S. Filiage"},"comment_count":2,"down_vote_count":0,"up_vote_count":27,"is_accepted":false,"score":27,"last_activity_date":1608666941,"creation_date":1608666941,"answer_id":65415054,"question_id":9424364,"body_markdown":"I&#39;m using IntelliJ IDEA 2020.3 (Community Edition)\r\n\r\nHere, besides install the Lombok plugin and enable annotations (explained by other answers). I also needed to set the flag `-Djps.track.ap.dependencies=false` to the Build Process Option&#185;.\r\n\r\nI didn&#39;t need to use the -javaagent approach, neither setup the classpath.\r\n\r\n&#185;. Go to: *File | Settings | Build, Execution, Deployment | Compiler | &quot;Shared build process VM options&quot; field*\r\n\r\nReferences:\r\n-    https://github.com/rzwitserloot/lombok/issues/2592#issuecomment-705449860\r\n-    https://youtrack.jetbrains.com/issue/IDEA-250718#focus=Comments-27-4418347.0-0\r\n","title":"Can&#39;t compile project when I&#39;m using Lombok under IntelliJ IDEA","body":"<p>I'm using IntelliJ IDEA 2020.3 (Community Edition)</p>\n<p>Here, besides install the Lombok plugin and enable annotations (explained by other answers). I also needed to set the flag <code>-Djps.track.ap.dependencies=false</code> to the Build Process Option¹.</p>\n<p>I didn't need to use the -javaagent approach, neither setup the classpath.</p>\n<p>¹. Go to: <em>File | Settings | Build, Execution, Deployment | Compiler | &quot;Shared build process VM options&quot; field</em></p>\n<p>References:</p>\n<ul>\n<li><a href=\"https://github.com/rzwitserloot/lombok/issues/2592#issuecomment-705449860\" rel=\"noreferrer\">https://github.com/rzwitserloot/lombok/issues/2592#issuecomment-705449860</a></li>\n<li><a href=\"https://youtrack.jetbrains.com/issue/IDEA-250718#focus=Comments-27-4418347.0-0\" rel=\"noreferrer\">https://youtrack.jetbrains.com/issue/IDEA-250718#focus=Comments-27-4418347.0-0</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":2265980,"reputation":2540,"user_id":1994646,"accept_rate":75,"display_name":"Sasi Kumar M"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1613562642,"creation_date":1613562642,"answer_id":66241401,"question_id":9424364,"body_markdown":"The Jetbrains IntelliJ IDEA editor is compatible with lombok without a plugin as of version 2020.3.\r\n\r\nI was using 2020.2 version, i updated to 2020.3 it worked just like that.","title":"Can&#39;t compile project when I&#39;m using Lombok under IntelliJ IDEA","body":"<p>The Jetbrains IntelliJ IDEA editor is compatible with lombok without a plugin as of version 2020.3.</p>\n<p>I was using 2020.2 version, i updated to 2020.3 it worked just like that.</p>\n"},{"tags":[],"owner":{"account_id":15888070,"reputation":41,"user_id":11463941,"display_name":"S Kampen"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1615278502,"creation_date":1615277357,"answer_id":66543024,"question_id":9424364,"body_markdown":"I don&#39;t think I read my final step in the answers yet. (Mac + IntelliJ Ultimate 2020.1)\r\nIts just a silly cause in my case, but those are the ones that can take up most time because the error doesnt directly refer to it.\r\n\r\nThe same lombok error appeared to me after deleting and recloning the project.\r\nAfter doing the steps mentioned earlier in this thread I still had the error, I then discovered my SKD was defaulted to version 11. I changed this back to 1.8 and everything worked again.\r\n\r\nFile --&gt; Project Settings --&gt; Project\r\nI changed the Project SDK and the Project language level to 1.8\r\n \r\nPS the location for the default settings on the mac is different in this IntelliJ version than mentioned before : \r\nFile --&gt; New Project Settings --&gt; Preferences for new Projects --&gt; Build, Execution, Deployment --&gt; Compiler --&gt; Annotation Processors --&gt; &#39;check&#39; Enable annotation processing\r\n\r\nHope this helps anybody","title":"Can&#39;t compile project when I&#39;m using Lombok under IntelliJ IDEA","body":"<p>I don't think I read my final step in the answers yet. (Mac + IntelliJ Ultimate 2020.1)\nIts just a silly cause in my case, but those are the ones that can take up most time because the error doesnt directly refer to it.</p>\n<p>The same lombok error appeared to me after deleting and recloning the project.\nAfter doing the steps mentioned earlier in this thread I still had the error, I then discovered my SKD was defaulted to version 11. I changed this back to 1.8 and everything worked again.</p>\n<p>File --&gt; Project Settings --&gt; Project\nI changed the Project SDK and the Project language level to 1.8</p>\n<p>PS the location for the default settings on the mac is different in this IntelliJ version than mentioned before :\nFile --&gt; New Project Settings --&gt; Preferences for new Projects --&gt; Build, Execution, Deployment --&gt; Compiler --&gt; Annotation Processors --&gt; 'check' Enable annotation processing</p>\n<p>Hope this helps anybody</p>\n"},{"tags":[],"owner":{"account_id":14314493,"reputation":61,"user_id":10339671,"display_name":"user10339671"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1631732133,"creation_date":1631732133,"answer_id":69198475,"question_id":9424364,"body_markdown":"This happened to me because the JDK version that runs the building process is too low. Lombok was built with JDK 1.7 or up. The build be must run with Java version 1.7 or up.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/NuALp.png","title":"Can&#39;t compile project when I&#39;m using Lombok under IntelliJ IDEA","body":"<p>This happened to me because the JDK version that runs the building process is too low. Lombok was built with JDK 1.7 or up. The build be must run with Java version 1.7 or up.</p>\n<p><a href=\"https://i.stack.imgur.com/NuALp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NuALp.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":3615857,"reputation":229,"user_id":3015737,"display_name":"Dan Bitter"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634376395,"creation_date":1634376395,"answer_id":69594306,"question_id":9424364,"body_markdown":"I had to disable the `@Document` annotation that I&#39;d just added. I&#39;m converting my project to use Mongo instead of Postgres, and it was previously working, but it seems `@Document` conflicts with Lombok&#39;s `@Getter`","title":"Can&#39;t compile project when I&#39;m using Lombok under IntelliJ IDEA","body":"<p>I had to disable the <code>@Document</code> annotation that I'd just added. I'm converting my project to use Mongo instead of Postgres, and it was previously working, but it seems <code>@Document</code> conflicts with Lombok's <code>@Getter</code></p>\n"},{"tags":[],"owner":{"account_id":7473996,"reputation":310,"user_id":5680977,"display_name":"Dhiraj Surve"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1639086449,"creation_date":1639086449,"answer_id":70297131,"question_id":9424364,"body_markdown":"If none of the above did&#39;nt work , then try to change File-&gt;Project Structure-&gt;Project-&gt;Project Language Level &gt; 8 Lambda,type annotations (Not SDK Default 8)\r\n\r\nThis worked for me .","title":"Can&#39;t compile project when I&#39;m using Lombok under IntelliJ IDEA","body":"<p>If none of the above did'nt work , then try to change File-&gt;Project Structure-&gt;Project-&gt;Project Language Level &gt; 8 Lambda,type annotations (Not SDK Default 8)</p>\n<p>This worked for me .</p>\n"},{"tags":[],"owner":{"account_id":3504594,"reputation":3961,"user_id":2930417,"display_name":"hatanooh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1642410930,"creation_date":1642410930,"answer_id":70738922,"question_id":9424364,"body_markdown":"1. add Lombok plugin.\r\n2. In my case, just maven clean.","title":"Can&#39;t compile project when I&#39;m using Lombok under IntelliJ IDEA","body":"<ol>\n<li>add Lombok plugin.</li>\n<li>In my case, just maven clean.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":9983336,"reputation":4132,"user_id":7769052,"accept_rate":75,"display_name":"banan3&#39;14"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1642692352,"creation_date":1642692352,"answer_id":70788894,"question_id":9424364,"body_markdown":"My issue was that the bundled version of Lombok plugin in IntelliJ IDEA was incompatible with the version of IntelliJ IDEA itself. I downgraded IntelliJ to 2019.1.4 and it worked. \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/nAPeT.png","title":"Can&#39;t compile project when I&#39;m using Lombok under IntelliJ IDEA","body":"<p>My issue was that the bundled version of Lombok plugin in IntelliJ IDEA was incompatible with the version of IntelliJ IDEA itself. I downgraded IntelliJ to 2019.1.4 and it worked.</p>\n<p><a href=\"https://i.stack.imgur.com/nAPeT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nAPeT.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":12232652,"reputation":4002,"user_id":8930395,"display_name":"LOrD_ARaGOrN"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1659354797,"creation_date":1659354797,"answer_id":73193242,"question_id":9424364,"body_markdown":"I tried enabling lambok, restarted intellij, etc but below worked for me.\r\n\r\nIntellij Preferences -&gt;Compiler -&gt; Shared Build process VM Options and set it to \r\n\r\n      -Djps.track.ap.dependencies=false\r\n\r\nthan run \r\n\r\n    mvn clean install","title":"Can&#39;t compile project when I&#39;m using Lombok under IntelliJ IDEA","body":"<p>I tried enabling lambok, restarted intellij, etc but below worked for me.</p>\n<p>Intellij Preferences -&gt;Compiler -&gt; Shared Build process VM Options and set it to</p>\n<pre><code>  -Djps.track.ap.dependencies=false\n</code></pre>\n<p>than run</p>\n<pre><code>mvn clean install\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4999034,"reputation":1880,"user_id":6722075,"display_name":"Tohid Makari"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1666178599,"creation_date":1666178599,"answer_id":74124489,"question_id":9424364,"body_markdown":"If you already installed it, then for refresh just **deselect** and **select** `Enable annotation` in Intellij Settings.","title":"Can&#39;t compile project when I&#39;m using Lombok under IntelliJ IDEA","body":"<p>If you already installed it, then for refresh just <strong>deselect</strong> and <strong>select</strong> <code>Enable annotation</code> in Intellij Settings.</p>\n"},{"tags":[],"owner":{"account_id":4451500,"reputation":772,"user_id":3623232,"display_name":"Guillermo"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674728632,"creation_date":1674728632,"answer_id":75244824,"question_id":9424364,"body_markdown":"I had the same problem, but non of the answers given here worked for me. The error message I was getting on the `import lombok.val` imports:\r\n```\r\nintellij lombok cannot resolve symbol\r\n```\r\n\r\nI&#39;m using IntelliJ &quot;IDEA 2022.3.1 (Community Edition)&quot;. Apparently IntelliJ scans the classpath for annotation processing, so adding lombok not for compilation only, but also for runtime worked for me:\r\n\r\nUse\r\n```\r\nimplementation &#39;org.projectlombok:lombok&#39;\r\n```\r\ninstead of\r\n```\r\ncompileOnly &#39;org.projectlombok:lombok&#39;\r\n```","title":"Can&#39;t compile project when I&#39;m using Lombok under IntelliJ IDEA","body":"<p>I had the same problem, but non of the answers given here worked for me. The error message I was getting on the <code>import lombok.val</code> imports:</p>\n<pre><code>intellij lombok cannot resolve symbol\n</code></pre>\n<p>I'm using IntelliJ &quot;IDEA 2022.3.1 (Community Edition)&quot;. Apparently IntelliJ scans the classpath for annotation processing, so adding lombok not for compilation only, but also for runtime worked for me:</p>\n<p>Use</p>\n<pre><code>implementation 'org.projectlombok:lombok'\n</code></pre>\n<p>instead of</p>\n<pre><code>compileOnly 'org.projectlombok:lombok'\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17029076,"reputation":298,"user_id":12319598,"display_name":"Jacek Sawko"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683269512,"creation_date":1683269512,"answer_id":76179502,"question_id":9424364,"body_markdown":"Similar issue came up during SpringBoot migration to version 3.x.x+. \r\n`@ConstructorBinding` annotation doesn&#39;t work with Lombok, it has to be removed ","title":"Can&#39;t compile project when I&#39;m using Lombok under IntelliJ IDEA","body":"<p>Similar issue came up during SpringBoot migration to version 3.x.x+.\n<code>@ConstructorBinding</code> annotation doesn't work with Lombok, it has to be removed</p>\n"},{"tags":[],"owner":{"account_id":16297526,"reputation":193,"user_id":11769408,"display_name":"Geoffrey"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690291023,"creation_date":1690291023,"answer_id":76763118,"question_id":9424364,"body_markdown":"In my case, to make it work on some classes defined in the tests using java code in a plain kotlin project (no android) **without** the `kapt` plugin, I had to do in my `build.gradle.kts`:\r\n\r\n```kotlin\r\n    dependencies {\r\n        compileOnly(&quot;org.projectlombok:lombok:1.18.20&quot;)\r\n        annotationProcessor(&quot;org.projectlombok:lombok:1.18.20&quot;)\r\n        ...\r\n        testCompileOnly(&quot;org.projectlombok:lombok:1.18.20&quot;)\r\n        testAnnotationProcessor(&quot;org.projectlombok:lombok:1.18.20&quot;)\r\n    }\r\n```\r\n\r\nThen **&quot;Build&quot; -&gt; &quot;Rebuild project&quot;** was working.\r\n\r\nIf you will use the `kapt` plugin, you should be able to remove the `annotationProcessor` lines. But I had to deal without `kapt` in my case.","title":"Can&#39;t compile project when I&#39;m using Lombok under IntelliJ IDEA","body":"<p>In my case, to make it work on some classes defined in the tests using java code in a plain kotlin project (no android) <strong>without</strong> the <code>kapt</code> plugin, I had to do in my <code>build.gradle.kts</code>:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>    dependencies {\n        compileOnly(&quot;org.projectlombok:lombok:1.18.20&quot;)\n        annotationProcessor(&quot;org.projectlombok:lombok:1.18.20&quot;)\n        ...\n        testCompileOnly(&quot;org.projectlombok:lombok:1.18.20&quot;)\n        testAnnotationProcessor(&quot;org.projectlombok:lombok:1.18.20&quot;)\n    }\n</code></pre>\n<p>Then <strong>&quot;Build&quot; -&gt; &quot;Rebuild project&quot;</strong> was working.</p>\n<p>If you will use the <code>kapt</code> plugin, you should be able to remove the <code>annotationProcessor</code> lines. But I had to deal without <code>kapt</code> in my case.</p>\n"},{"tags":[],"owner":{"account_id":9983336,"reputation":4132,"user_id":7769052,"accept_rate":75,"display_name":"banan3&#39;14"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694821056,"creation_date":1694821056,"answer_id":77115807,"question_id":9424364,"body_markdown":"For IntelliJ 2023.1.3, I had to close IntelliJ, remove all `*.iml` files, all `.idea` folders, rename the project folder, add lombok dependency to pom, create a new project in intellij, import a module from sources, enable annotation processing and then it finally understood what I want.","title":"Can&#39;t compile project when I&#39;m using Lombok under IntelliJ IDEA","body":"<p>For IntelliJ 2023.1.3, I had to close IntelliJ, remove all <code>*.iml</code> files, all <code>.idea</code> folders, rename the project folder, add lombok dependency to pom, create a new project in intellij, import a module from sources, enable annotation processing and then it finally understood what I want.</p>\n"}],"owner":{"account_id":80182,"reputation":29519,"user_id":226895,"accept_rate":86,"display_name":"expert"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":346660,"favorite_count":0,"down_vote_count":0,"up_vote_count":281,"accepted_answer_id":14582541,"answer_count":46,"score":281,"last_activity_date":1694821056,"creation_date":1330049010,"question_id":9424364,"body_markdown":"I&#39;m trying to use [Lombok][1] in my project that I&#39;m developing using IntelliJ IDEA 11.\r\n\r\nI&#39;ve installed [3rd-party plugin for IDEA][2] and it seems working fine because IDEA sees all autogenerated methods/fields.\r\n\r\nSo I have a class that uses Slf4j. I annotated it like this\r\n\r\n    import lombok.extern.slf4j.Slf4j;\r\n\r\n    @Slf4j\r\n    public class TestClass\r\n    {\r\n        public TestClass()\r\n        {\r\n            log.info(&quot;Hello!&quot;);\r\n        }\r\n    }\r\n\r\nBut when I build my project compiler spits: `cannot find symbol variable log`.\r\n\r\nCould you please tell me what I&#39;m missing here?\r\n\r\n**Update:** It turned out it&#39;s RequestFactory annotation process that fails.\r\n\r\n    input files: {com.zasutki.courierApp.server.TestServlet, com.mine.courierApp.server.model.DatastoreObject}\r\n\r\n    annotations: [javax.inject.Singleton, javax.inject.Inject, lombok.Getter, lombok.Setter, com.googlecode.objectify.annotation.Id, com.googlecode.objectify.annotation.OnSave]\r\n\r\n    Processor com.google.web.bindery.requestfactory.apt.RfValidator matches [lombok.Getter, com.googlecode.objectify.annotation.Id, javax.inject.Inject, lombok.Setter, com.googlecode.objectify.annotation.OnSave, javax.inject.Singleton] and returns false.\r\n\r\n    cannot find symbol variable log\r\n\r\nAny ideas on workarounds?\r\n\r\n**Update2:** Perhaps it&#39;s not something readers want to hear but I ended up switching to [Scala][3].\r\n\r\n\r\n  [1]: http://projectlombok.org/\r\n  [2]: http://code.google.com/p/lombok-intellij-plugin/\r\n  [3]: http://en.wikipedia.org/wiki/Scala_%28programming_language%29","title":"Can&#39;t compile project when I&#39;m using Lombok under IntelliJ IDEA","body":"<p>I'm trying to use <a href=\"http://projectlombok.org/\" rel=\"noreferrer\">Lombok</a> in my project that I'm developing using IntelliJ IDEA 11.</p>\n<p>I've installed <a href=\"http://code.google.com/p/lombok-intellij-plugin/\" rel=\"noreferrer\">3rd-party plugin for IDEA</a> and it seems working fine because IDEA sees all autogenerated methods/fields.</p>\n<p>So I have a class that uses Slf4j. I annotated it like this</p>\n<pre><code>import lombok.extern.slf4j.Slf4j;\n\n@Slf4j\npublic class TestClass\n{\n    public TestClass()\n    {\n        log.info(&quot;Hello!&quot;);\n    }\n}\n</code></pre>\n<p>But when I build my project compiler spits: <code>cannot find symbol variable log</code>.</p>\n<p>Could you please tell me what I'm missing here?</p>\n<p><strong>Update:</strong> It turned out it's RequestFactory annotation process that fails.</p>\n<pre><code>input files: {com.zasutki.courierApp.server.TestServlet, com.mine.courierApp.server.model.DatastoreObject}\n\nannotations: [javax.inject.Singleton, javax.inject.Inject, lombok.Getter, lombok.Setter, com.googlecode.objectify.annotation.Id, com.googlecode.objectify.annotation.OnSave]\n\nProcessor com.google.web.bindery.requestfactory.apt.RfValidator matches [lombok.Getter, com.googlecode.objectify.annotation.Id, javax.inject.Inject, lombok.Setter, com.googlecode.objectify.annotation.OnSave, javax.inject.Singleton] and returns false.\n\ncannot find symbol variable log\n</code></pre>\n<p>Any ideas on workarounds?</p>\n<p><strong>Update2:</strong> Perhaps it's not something readers want to hear but I ended up switching to <a href=\"http://en.wikipedia.org/wiki/Scala_%28programming_language%29\" rel=\"noreferrer\">Scala</a>.</p>\n"},{"tags":["java","apache-kafka","apache-kafka-connect"],"answers":[{"comments":[{"owner":{"account_id":29421057,"reputation":1,"user_id":22542776,"display_name":"Red256"},"score":1,"creation_date":1695115900,"post_id":77115769,"comment_id":135977871,"body_markdown":"Thx bro,I have already solved the problem. Originally, I wanted to debug this program, but I found out I could use IDEA for remote debugging, so I resolved it. Still, I want to thank you for being willing to answer my questions.","body":"Thx bro,I have already solved the problem. Originally, I wanted to debug this program, but I found out I could use IDEA for remote debugging, so I resolved it. Still, I want to thank you for being willing to answer my questions."},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1695132299,"post_id":77115769,"comment_id":135981192,"body_markdown":"Feel free to accept the answer using the checkmark next to the post","body":"Feel free to accept the answer using the checkmark next to the post"}],"tags":[],"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694820196,"creation_date":1694820196,"answer_id":77115769,"question_id":77087661,"body_markdown":"First, you&#39;ve only shown a warning that can be ignored, not an error. You can turn off `org.reflections` logs in the log4j file. \r\n\r\nTrying to use the source code directly will only cause problems\r\n\r\n`connect-standalone.sh` calls `kafka-run-class.sh`, which in turn sets up the necessary CLASSPATH needed for the JVM to actually run the ConnectStandalone Java class. \r\n\r\nTrying to run the code from an IDE will cause conflicts with the IDE&#39;s classpath. \r\n\r\nInstead, you could setup a Shell Script or Docker action in IntelliJ run config, not a Java one, both would run the compiled code and not require you to download Kafka source repo.","title":"Start Kafka connector using the source code","body":"<p>First, you've only shown a warning that can be ignored, not an error. You can turn off <code>org.reflections</code> logs in the log4j file.</p>\n<p>Trying to use the source code directly will only cause problems</p>\n<p><code>connect-standalone.sh</code> calls <code>kafka-run-class.sh</code>, which in turn sets up the necessary CLASSPATH needed for the JVM to actually run the ConnectStandalone Java class.</p>\n<p>Trying to run the code from an IDE will cause conflicts with the IDE's classpath.</p>\n<p>Instead, you could setup a Shell Script or Docker action in IntelliJ run config, not a Java one, both would run the compiled code and not require you to download Kafka source repo.</p>\n"}],"owner":{"account_id":29421057,"reputation":1,"user_id":22542776,"display_name":"Red256"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":78,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694820213,"creation_date":1694509913,"question_id":77087661,"body_markdown":"I want to start the Kafka connector using the source code, but I always encounter some errors.\r\n\r\nthis is my configuration.I don&#39;t know if there&#39;s something wrong with the way I configured it.\r\n\r\n[myconfiguration](https://i.stack.imgur.com/ytLe3.png)\r\n\r\nHere are some error messages.\r\n\r\n```\r\n[2023-09-12 17:04:22,050] INFO Scanning for plugin classes. This might take a moment ... (org.apache.kafka.connect.cli.ConnectStandalone)\r\n[2023-09-12 17:04:24,566] INFO Reflections took 2369 ms to scan 85 urls, producing 7787 keys and 30651 values [using 8 cores] (org.reflections.Reflections)\r\n[2023-09-12 17:04:24,584] WARN could not get type for name org.eclipse.swt.events.ControlListener from any class loader (org.reflections.Reflections)\r\norg.reflections.ReflectionsException: could not get type for name org.eclipse.swt.events.ControlListener\r\n\tat org.reflections.ReflectionUtils.forName(ReflectionUtils.java:312)\r\n\tat org.reflections.Reflections.expandSuperTypes(Reflections.java:382)\r\n\tat org.reflections.Reflections.&lt;init&gt;(Reflections.java:140)\r\n\tat org.apache.kafka.connect.runtime.isolation.DelegatingClassLoader$InternalReflections.&lt;init&gt;(DelegatingClassLoader.java:490)\r\n\tat org.apache.kafka.connect.runtime.isolation.DelegatingClassLoader.scanPluginPath(DelegatingClassLoader.java:363)\r\n\tat org.apache.kafka.connect.runtime.isolation.DelegatingClassLoader.scanUrlsAndAddPlugins(DelegatingClassLoader.java:298)\r\n\tat org.apache.kafka.connect.runtime.isolation.DelegatingClassLoader.initPluginLoader(DelegatingClassLoader.java:248)\r\n\tat org.apache.kafka.connect.runtime.isolation.DelegatingClassLoader.initLoaders(DelegatingClassLoader.java:241)\r\n\tat org.apache.kafka.connect.runtime.isolation.Plugins.&lt;init&gt;(Plugins.java:60)\r\n\tat org.apache.kafka.connect.cli.ConnectStandalone.main(ConnectStandalone.java:78)\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ytLe3.png","title":"Start Kafka connector using the source code","body":"<p>I want to start the Kafka connector using the source code, but I always encounter some errors.</p>\n<p>this is my configuration.I don't know if there's something wrong with the way I configured it.</p>\n<p><a href=\"https://i.stack.imgur.com/ytLe3.png\" rel=\"nofollow noreferrer\">myconfiguration</a></p>\n<p>Here are some error messages.</p>\n<pre><code>[2023-09-12 17:04:22,050] INFO Scanning for plugin classes. This might take a moment ... (org.apache.kafka.connect.cli.ConnectStandalone)\n[2023-09-12 17:04:24,566] INFO Reflections took 2369 ms to scan 85 urls, producing 7787 keys and 30651 values [using 8 cores] (org.reflections.Reflections)\n[2023-09-12 17:04:24,584] WARN could not get type for name org.eclipse.swt.events.ControlListener from any class loader (org.reflections.Reflections)\norg.reflections.ReflectionsException: could not get type for name org.eclipse.swt.events.ControlListener\n    at org.reflections.ReflectionUtils.forName(ReflectionUtils.java:312)\n    at org.reflections.Reflections.expandSuperTypes(Reflections.java:382)\n    at org.reflections.Reflections.&lt;init&gt;(Reflections.java:140)\n    at org.apache.kafka.connect.runtime.isolation.DelegatingClassLoader$InternalReflections.&lt;init&gt;(DelegatingClassLoader.java:490)\n    at org.apache.kafka.connect.runtime.isolation.DelegatingClassLoader.scanPluginPath(DelegatingClassLoader.java:363)\n    at org.apache.kafka.connect.runtime.isolation.DelegatingClassLoader.scanUrlsAndAddPlugins(DelegatingClassLoader.java:298)\n    at org.apache.kafka.connect.runtime.isolation.DelegatingClassLoader.initPluginLoader(DelegatingClassLoader.java:248)\n    at org.apache.kafka.connect.runtime.isolation.DelegatingClassLoader.initLoaders(DelegatingClassLoader.java:241)\n    at org.apache.kafka.connect.runtime.isolation.Plugins.&lt;init&gt;(Plugins.java:60)\n    at org.apache.kafka.connect.cli.ConnectStandalone.main(ConnectStandalone.java:78)\n</code></pre>\n"},{"tags":["java","eclipse","web-services","apache-axis","tomcat7"],"comments":[{"owner":{"account_id":390163,"reputation":17713,"user_id":750040,"accept_rate":68,"display_name":"Santosh"},"score":0,"creation_date":1324975468,"post_id":8642587,"comment_id":10734872,"body_markdown":"Please check if you can access the wsdl url (http://localhost:9090/Axis2WSTest/services/Converter?wsdl) in browser .","body":"Please check if you can access the wsdl url (<a href=\"http://localhost:9090/Axis2WSTest/services/Converter?wsdl\" rel=\"nofollow noreferrer\">localhost:9090/Axis2WSTest/services/Converter?wsdl</a>) in browser ."},{"owner":{"account_id":1096321,"reputation":1559,"user_id":1089851,"accept_rate":42,"display_name":"Nishit Jain"},"score":0,"creation_date":1324979486,"post_id":8642587,"comment_id":10735637,"body_markdown":"yes it shows me a page full of xml tags but with a message at the top of the page:   This XML file does not appear to have any style information associated with it. The document tree is shown below.","body":"yes it shows me a page full of xml tags but with a message at the top of the page:   This XML file does not appear to have any style information associated with it. The document tree is shown below."},{"owner":{"account_id":1096321,"reputation":1559,"user_id":1089851,"accept_rate":42,"display_name":"Nishit Jain"},"score":0,"creation_date":1324979639,"post_id":8642587,"comment_id":10735675,"body_markdown":"also the web service have some warnings in two xml files ::   axis2.xml and services.xml  and the warning is::::::::::::::::::::::::::::::: No grammar constraints (DTD or XML schema) detected for the document.","body":"also the web service have some warnings in two xml files ::   axis2.xml and services.xml  and the warning is::::::::::::::::::::::::::::::: No grammar constraints (DTD or XML schema) detected for the document."},{"owner":{"account_id":1250616,"reputation":686,"user_id":1211095,"display_name":"MrJames"},"score":2,"creation_date":1338388331,"post_id":8642587,"comment_id":14080805,"body_markdown":"It&#39;s related with proxy configuration on your eclipse (Windows-&gt;Preferences-&gt;General-&gt;Network Connections) ... check eclipse forum http://www.eclipse.org/forums/index.php/t/158872/","body":"It&#39;s related with proxy configuration on your eclipse (Windows-&gt;Preferences-&gt;General-&gt;Network Connections) ... check eclipse forum <a href=\"http://www.eclipse.org/forums/index.php/t/158872/\" rel=\"nofollow noreferrer\">eclipse.org/forums/index.php/t/158872</a>"},{"owner":{"account_id":4439777,"reputation":3830,"user_id":3614578,"accept_rate":55,"display_name":"gary69"},"score":0,"creation_date":1448309970,"post_id":8642587,"comment_id":55523978,"body_markdown":"The problem could be that your wsdl needs http authentication\nhttp://stackoverflow.com/questions/10941796/generate-client-from-http-authenticated-wsdl","body":"The problem could be that your wsdl needs http authentication <a href=\"http://stackoverflow.com/questions/10941796/generate-client-from-http-authenticated-wsdl\" title=\"generate client from http authenticated wsdl\">stackoverflow.com/questions/10941796/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":433296,"reputation":7639,"user_id":818557,"accept_rate":80,"display_name":"Anuj Balan"},"score":0,"creation_date":1324984123,"post_id":8643970,"comment_id":10736617,"body_markdown":"May be there is problem selecting the client project where it needs to generate the client stub.","body":"May be there is problem selecting the client project where it needs to generate the client stub."},{"owner":{"account_id":1096321,"reputation":1559,"user_id":1089851,"accept_rate":42,"display_name":"Nishit Jain"},"score":1,"creation_date":1324995496,"post_id":8643970,"comment_id":10739094,"body_markdown":"As i said that while giving wsdl url in the browser it shows me a page full of xml but while selecting the web service client application and pushing the wsdl url in its server definition field it doesnot take it and gives error:::::: The server definition selected is invalid..","body":"As i said that while giving wsdl url in the browser it shows me a page full of xml but while selecting the web service client application and pushing the wsdl url in its server definition field it doesnot take it and gives error:::::: The server definition selected is invalid.."}],"tags":[],"owner":{"account_id":433296,"reputation":7639,"user_id":818557,"accept_rate":80,"display_name":"Anuj Balan"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1324984092,"creation_date":1324984092,"answer_id":8643970,"question_id":8642587,"body_markdown":"[Is this][1] how you are trying to generate client stub ??   If yes, just simply create a java project in eclipse, click on it, then press Ctrl+N, select web service client and enter your wsdl url. (make sure you have made sure you can access the wsdl url, by simply giving it in a browser). \r\n\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/7020755/how-to-convert-wsdl-to-java/7020874#7020874","title":"Web Service client - Service definition selected is invalid","body":"<p><a href=\"https://stackoverflow.com/questions/7020755/how-to-convert-wsdl-to-java/7020874#7020874\">Is this</a> how you are trying to generate client stub ??   If yes, just simply create a java project in eclipse, click on it, then press Ctrl+N, select web service client and enter your wsdl url. (make sure you have made sure you can access the wsdl url, by simply giving it in a browser). </p>\n"},{"tags":[],"owner":{"account_id":1643563,"reputation":764,"user_id":1515561,"accept_rate":75,"display_name":"sayannayas"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1413291562,"creation_date":1357561214,"answer_id":14195824,"question_id":8642587,"body_markdown":"I was searching for the whole day for an answer for this,generally localhost will be added in your bypass proxy list and hence you will not encounter an error.\r\n\r\nGo to windows--&gt; preference--&gt;general--&gt; network-connection and see whether localhost is listed in your proxybypass list.If you are trying to access a external wsdl link and you under \r\nsome corporate network having proxy firewall you have to set http proxy/https proxy.\r\n\r\n","title":"Web Service client - Service definition selected is invalid","body":"<p>I was searching for the whole day for an answer for this,generally localhost will be added in your bypass proxy list and hence you will not encounter an error.</p>\n\n<p>Go to windows--> preference-->general--> network-connection and see whether localhost is listed in your proxybypass list.If you are trying to access a external wsdl link and you under \nsome corporate network having proxy firewall you have to set http proxy/https proxy.</p>\n"},{"tags":[],"owner":{"account_id":244645,"reputation":2082,"user_id":517600,"accept_rate":55,"display_name":"rdp"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1360566480,"creation_date":1360566480,"answer_id":14807419,"question_id":8642587,"body_markdown":"Try replacing localhost with the actual IP address. I was facing the same problem and it worked for me this way","title":"Web Service client - Service definition selected is invalid","body":"<p>Try replacing localhost with the actual IP address. I was facing the same problem and it worked for me this way</p>\n"},{"comments":[{"owner":{"account_id":3540886,"reputation":3085,"user_id":2958035,"accept_rate":56,"display_name":"Jatin"},"score":1,"creation_date":1448314783,"post_id":33879938,"comment_id":55526840,"body_markdown":"While this link may answer the question, it is better to include the essential parts of the answer here and provide the link for reference.  Link-only answers can become invalid if the linked page changes. - [From Review](/review/low-quality-posts/10310108)","body":"While this link may answer the question, it is better to include the essential parts of the answer here and provide the link for reference.  Link-only answers can become invalid if the linked page changes. - <a href=\"/review/low-quality-posts/10310108\">From Review</a>"},{"owner":{"account_id":4439777,"reputation":3830,"user_id":3614578,"accept_rate":55,"display_name":"gary69"},"score":0,"creation_date":1448319889,"post_id":33879938,"comment_id":55529278,"body_markdown":"Come on man don&#39;t downvote me, it was a link to another answer on this site.","body":"Come on man don&#39;t downvote me, it was a link to another answer on this site."},{"owner":{"account_id":3540886,"reputation":3085,"user_id":2958035,"accept_rate":56,"display_name":"Jatin"},"score":0,"creation_date":1448324017,"post_id":33879938,"comment_id":55530809,"body_markdown":"It was not me.. but you might have got because it was link only answer.. now it seems to be fine..","body":"It was not me.. but you might have got because it was link only answer.. now it seems to be fine.."},{"owner":{"account_id":886807,"reputation":2755,"user_id":926064,"accept_rate":53,"display_name":"Luciano"},"score":0,"creation_date":1460499494,"post_id":33879938,"comment_id":60768991,"body_markdown":"The link is an internal link to stackoverflow ! It&#39;s not a problem.","body":"The link is an internal link to stackoverflow ! It&#39;s not a problem."}],"tags":[],"owner":{"account_id":4439777,"reputation":3830,"user_id":3614578,"accept_rate":55,"display_name":"gary69"},"comment_count":4,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1448318992,"creation_date":1448310042,"answer_id":33879938,"question_id":8642587,"body_markdown":"The problem could be that your wsdl needs http authentication. I was getting the same error in eclipse, but it was because the server I was connecting to needed authentication and was returning a 401 error, so eclipse was saying it wasn&#39;t a wsdl. Eclipse doesn&#39;t seem to have the functionality to prompt for authentication, I was able to generate a client in netbeans using the same wsdl url because netbeans knows to ask for authentication.\r\n\r\nhttps://stackoverflow.com/questions/10941796/generate-client-from-http-authenticated-wsdl","title":"Web Service client - Service definition selected is invalid","body":"<p>The problem could be that your wsdl needs http authentication. I was getting the same error in eclipse, but it was because the server I was connecting to needed authentication and was returning a 401 error, so eclipse was saying it wasn't a wsdl. Eclipse doesn't seem to have the functionality to prompt for authentication, I was able to generate a client in netbeans using the same wsdl url because netbeans knows to ask for authentication.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/10941796/generate-client-from-http-authenticated-wsdl\">Generate client from http authenticated wsdl</a></p>\n"},{"tags":[],"owner":{"account_id":11653885,"reputation":2966,"user_id":8534285,"display_name":"Ajay Kumar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1530117969,"creation_date":1530117969,"answer_id":51067809,"question_id":8642587,"body_markdown":"I had exactly same situation. For me the following worked:\r\n\r\nI got the lead from rdp&#39;s response - &quot;Try replacing localhost with the actual IP address. I was facing the same problem and it worked for me this way&quot; \r\n\r\nUsing IP didn&#39;t work for me. What worked for me:\r\n\r\nInstead of - http://servername/SomeWebService/Service.asmx?WSDL\r\n\r\nputting FQDN for servername. For example - \r\n\r\nhttp://servername.my.company.com/SomeWebService/Service.asmx?WSDL","title":"Web Service client - Service definition selected is invalid","body":"<p>I had exactly same situation. For me the following worked:</p>\n\n<p>I got the lead from rdp's response - \"Try replacing localhost with the actual IP address. I was facing the same problem and it worked for me this way\" </p>\n\n<p>Using IP didn't work for me. What worked for me:</p>\n\n<p>Instead of - <a href=\"http://servername/SomeWebService/Service.asmx?WSDL\" rel=\"nofollow noreferrer\">http://servername/SomeWebService/Service.asmx?WSDL</a></p>\n\n<p>putting FQDN for servername. For example - </p>\n\n<p><a href=\"http://servername.my.company.com/SomeWebService/Service.asmx?WSDL\" rel=\"nofollow noreferrer\">http://servername.my.company.com/SomeWebService/Service.asmx?WSDL</a></p>\n"},{"tags":[],"owner":{"account_id":2220824,"reputation":16635,"user_id":3168721,"accept_rate":97,"display_name":"tk_"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1547098355,"creation_date":1547098355,"answer_id":54122444,"question_id":8642587,"body_markdown":"I had the same issue and I was able to generate the stubs using **soapUI**. Please follow the [this post][1]. Which contains *GENERATING CLIENT JAVA CODE FOR WSDL USING SOAP UI – AXIS2 WSDL2JAVA*. Before that please download apache axis2 binary from [here][2] and extract it.\r\n\r\n\r\n  [1]: https://nitinaggarwal.wordpress.com/2010/11/12/generating-client-java-code-for-wsdl-using-soap-ui-axis2-wsdl2java/\r\n  [2]: https://axis.apache.org/axis2/java/core/download.html","title":"Web Service client - Service definition selected is invalid","body":"<p>I had the same issue and I was able to generate the stubs using <strong>soapUI</strong>. Please follow the <a href=\"https://nitinaggarwal.wordpress.com/2010/11/12/generating-client-java-code-for-wsdl-using-soap-ui-axis2-wsdl2java/\" rel=\"nofollow noreferrer\">this post</a>. Which contains <em>GENERATING CLIENT JAVA CODE FOR WSDL USING SOAP UI – AXIS2 WSDL2JAVA</em>. Before that please download apache axis2 binary from <a href=\"https://axis.apache.org/axis2/java/core/download.html\" rel=\"nofollow noreferrer\">here</a> and extract it.</p>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1695116821,"post_id":77115712,"comment_id":135978065,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/77115712/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":2335965,"reputation":1,"user_id":2048309,"display_name":"sebasto"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694818674,"creation_date":1694818674,"answer_id":77115712,"question_id":8642587,"body_markdown":"my solution was to download the WSDL file and place it in the Eclipse project, then instead of pasting the service URL, select the .wsdl file from the project.","title":"Web Service client - Service definition selected is invalid","body":"<p>my solution was to download the WSDL file and place it in the Eclipse project, then instead of pasting the service URL, select the .wsdl file from the project.</p>\n"}],"owner":{"account_id":1096321,"reputation":1559,"user_id":1089851,"accept_rate":42,"display_name":"Nishit Jain"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":27856,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":7,"score":3,"last_activity_date":1694818674,"creation_date":1324974875,"question_id":8642587,"body_markdown":"i am building a web service on eclipse using Apache AXIS 2 Webservice runtime using Apache Tomcat server (apache-tomcat-7.0.23) while running it on tomcat server it sucessfully shows that the web service is running... \r\n\r\nBut while creating Webservice client to test the web service and using the wsdl url in the server definition (`http://localhost:9090/Axis2WSTest/services/Converter?wsdl`), this gives below mentioned error and not letting me to create Webservice client:\r\n\r\n&gt;The service definition selected is invalid\r\n\r\nCan you please suggest me the error and possible solution for it?\r\n\r\n","title":"Web Service client - Service definition selected is invalid","body":"<p>i am building a web service on eclipse using Apache AXIS 2 Webservice runtime using Apache Tomcat server (apache-tomcat-7.0.23) while running it on tomcat server it sucessfully shows that the web service is running... </p>\n\n<p>But while creating Webservice client to test the web service and using the wsdl url in the server definition (<code>http://localhost:9090/Axis2WSTest/services/Converter?wsdl</code>), this gives below mentioned error and not letting me to create Webservice client:</p>\n\n<blockquote>\n  <p>The service definition selected is invalid</p>\n</blockquote>\n\n<p>Can you please suggest me the error and possible solution for it?</p>\n"},{"tags":["java","docker"],"comments":[{"owner":{"account_id":13874157,"reputation":584,"user_id":10016327,"display_name":"satyesht"},"score":0,"creation_date":1694818719,"post_id":77115688,"comment_id":135946108,"body_markdown":"try  processBuilder.command(&quot;docker cp  ./cassandra/. cassandra:/cassandra/&quot;); instead","body":"try  processBuilder.command(&quot;docker cp  ./cassandra/. cassandra:/cassandra/&quot;); instead"},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":2,"creation_date":1694819006,"post_id":77115688,"comment_id":135946130,"body_markdown":"@satyesht That won&#39;t work and that&#39;s not how `ProcessBuilder` is meant to be used","body":"@satyesht That won&#39;t work and that&#39;s not how <code>ProcessBuilder</code> is meant to be used"},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":2,"creation_date":1694819079,"post_id":77115688,"comment_id":135946133,"body_markdown":"It would be useful to call `inheritIO` on the `ProcessBuilder` before your execute the process, this way the error and output streams will be piped together, you may get an error message, assuming that `docker` generates one. According to the documentation `Exit Code 1 - Application error` - that&#39;s helpful","body":"It would be useful to call <code>inheritIO</code> on the <code>ProcessBuilder</code> before your execute the process, this way the error and output streams will be piped together, you may get an error message, assuming that <code>docker</code> generates one. According to the documentation <code>Exit Code 1 - Application error</code> - that&#39;s helpful"},{"owner":{"account_id":5998820,"reputation":12676,"user_id":4712734,"display_name":"DuncG"},"score":0,"creation_date":1694857638,"post_id":77115688,"comment_id":135948510,"body_markdown":"As MadProgrammer says or use `processBuilder.redirectErrorStream(true);` to see the error message when you read stdout.","body":"As MadProgrammer says or use <code>processBuilder.redirectErrorStream(true);</code> to see the error message when you read stdout."}],"owner":{"account_id":214551,"reputation":4879,"user_id":468587,"accept_rate":49,"display_name":"user468587"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694818177,"creation_date":1694818177,"question_id":77115688,"body_markdown":"i tried to copy folder from host to docker container using java ProcessBuilder, it exited with error code 1, but if i ran the same docker command from terminal , it worked. \r\n\r\nmy java code: \r\n\r\n            ProcessBuilder processBuilder = new ProcessBuilder();\r\n            processBuilder.command(&quot;docker&quot;, &quot;cp&quot;, &quot;./cassandra/.&quot;, &quot;cassandra:/cassandra/&quot;);\r\n\r\n            try {\r\n                Process process = processBuilder.start();\r\n                BufferedReader reader = new BufferedReader(new InputStreamReader(process.getInputStream()));\r\n                String line;\r\n                while ((line = reader.readLine()) != null) {\r\n                    System.out.println(line);\r\n                }\r\n                int exitCode = process.waitFor();   // &lt;=== exitCode was 1\r\n                assertThat(exitCode).as(&quot;copy cassandra folder from host to cassandra container&quot;).isZero();\r\n\r\n            } catch (Exception e) {\r\n                Assertions.fail(&quot;Failed to Initialize cassandra db&quot;, e);\r\n            }\r\n\r\nI can run the same command from terminal and it worked:\r\n\r\n    docker cp ./cassandra/. cassandra:/cassandra/\r\n\r\ncan anyone help? ","title":"copy folder from host to docker container using java ProcessBuilder","body":"<p>i tried to copy folder from host to docker container using java ProcessBuilder, it exited with error code 1, but if i ran the same docker command from terminal , it worked.</p>\n<p>my java code:</p>\n<pre><code>        ProcessBuilder processBuilder = new ProcessBuilder();\n        processBuilder.command(&quot;docker&quot;, &quot;cp&quot;, &quot;./cassandra/.&quot;, &quot;cassandra:/cassandra/&quot;);\n\n        try {\n            Process process = processBuilder.start();\n            BufferedReader reader = new BufferedReader(new InputStreamReader(process.getInputStream()));\n            String line;\n            while ((line = reader.readLine()) != null) {\n                System.out.println(line);\n            }\n            int exitCode = process.waitFor();   // &lt;=== exitCode was 1\n            assertThat(exitCode).as(&quot;copy cassandra folder from host to cassandra container&quot;).isZero();\n\n        } catch (Exception e) {\n            Assertions.fail(&quot;Failed to Initialize cassandra db&quot;, e);\n        }\n</code></pre>\n<p>I can run the same command from terminal and it worked:</p>\n<pre><code>docker cp ./cassandra/. cassandra:/cassandra/\n</code></pre>\n<p>can anyone help?</p>\n"},{"tags":["java","algorithm"],"comments":[{"owner":{"account_id":2258335,"reputation":7818,"user_id":3403834,"display_name":"user58697"},"score":0,"creation_date":1694798752,"post_id":77114160,"comment_id":135943380,"body_markdown":"According to your code, Doe never wins. This is definitely wrong. Consider `N=3,P=1,M=2,X=3`.","body":"According to your code, Doe never wins. This is definitely wrong. Consider <code>N=3,P=1,M=2,X=3</code>."},{"owner":{"account_id":20164858,"reputation":604,"user_id":14789065,"display_name":"wLui155"},"score":0,"creation_date":1694807235,"post_id":77114160,"comment_id":135944715,"body_markdown":"I feel like unless John can win or can make a move that doesn&#39;t lose him the game after his first turn, the game will always end in a draw. In the case where he wants to make an optimal move to get him closer to winning, Doe can just reverse the move (since both are forced to pick exactly `M` consecutive keys) and prevent himself from possibly losing.","body":"I feel like unless John can win or can make a move that doesn&#39;t lose him the game after his first turn, the game will always end in a draw. In the case where he wants to make an optimal move to get him closer to winning, Doe can just reverse the move (since both are forced to pick exactly <code>M</code> consecutive keys) and prevent himself from possibly losing."}],"answers":[{"tags":[],"owner":{"account_id":7142980,"reputation":323263,"user_id":5459839,"display_name":"trincot"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1694818001,"creation_date":1694818001,"answer_id":77115677,"question_id":77114160,"body_markdown":"It is indeed the right conclusion that if neither player can win on their first move, it is a draw.\r\n\r\nHowever, your code assumes that the first player will reverse the *first* &#119872; keys, and the second player will reverse the second batch of &#119872; keys. This we cannot assume. Both players have other possibilities.\r\n\r\nSecondly, it really is not necessary to reverse the keys that are not silver plated: it makes no difference. You could do this without any array, and just update the value of &#119875;.\r\n\r\nWith brute force, you would play all possible moves of the first player, and check if any of them is a win. If so, we have the answer.\r\n\r\nIf not, for each state after a first player move, play all possible second player moves. If for all moves of the first player there is a counter move that wins, we have the answer. \r\n\r\nIf there are no such situations, it is a draw.\r\n\r\nThis is not difficult to implement, but takes quadratic time in terms of &#119872;.\r\n\r\nWe can use arithmetic for this. For instance, the parity is important: if &#119872; is odd, then the silver key can only move with even steps, so that if the distance to the target &#119883; is odd, there is no chance to ever reach it. We can also check the distance between &#119875; and &#119883; and if it cannot be bridged with two moves -- i.e. that distance is greater than 2(&#119872;−1) -- then we can also say it is a draw. And so there are many constraints we can involve to finally arrive at a constant time algorithm:\r\n\r\n```\r\n    public static int solve(int N, int P, int M, int X) {\r\n        if (P &gt; X) { // Make sure P &lt; X: so mirror the setup:\r\n            return solve(N, N + 1 - P, M, N + 1 - X);\r\n        }\r\n        int dist = X - P;\r\n        if (dist &lt; M &amp;&amp; M % 2 != dist % 2 &amp;&amp; P + X &gt; M &amp;&amp; 2*N + 2 &gt; M + P + X) {\r\n            return 1; // First player wins\r\n        }\r\n        if (dist % 2 == 1 || P + X &gt; 2*M || P + X &gt; 2*(N + 1 - M)) {\r\n            return 0; // Draw\r\n        }\r\n        return 2; // Second player wins\r\n    }\r\n```\r\n","title":"Find winner for a game","body":"<p>It is indeed the right conclusion that if neither player can win on their first move, it is a draw.</p>\n<p>However, your code assumes that the first player will reverse the <em>first</em> 𝑀 keys, and the second player will reverse the second batch of 𝑀 keys. This we cannot assume. Both players have other possibilities.</p>\n<p>Secondly, it really is not necessary to reverse the keys that are not silver plated: it makes no difference. You could do this without any array, and just update the value of 𝑃.</p>\n<p>With brute force, you would play all possible moves of the first player, and check if any of them is a win. If so, we have the answer.</p>\n<p>If not, for each state after a first player move, play all possible second player moves. If for all moves of the first player there is a counter move that wins, we have the answer.</p>\n<p>If there are no such situations, it is a draw.</p>\n<p>This is not difficult to implement, but takes quadratic time in terms of 𝑀.</p>\n<p>We can use arithmetic for this. For instance, the parity is important: if 𝑀 is odd, then the silver key can only move with even steps, so that if the distance to the target 𝑋 is odd, there is no chance to ever reach it. We can also check the distance between 𝑃 and 𝑋 and if it cannot be bridged with two moves -- i.e. that distance is greater than 2(𝑀−1) -- then we can also say it is a draw. And so there are many constraints we can involve to finally arrive at a constant time algorithm:</p>\n<pre><code>    public static int solve(int N, int P, int M, int X) {\n        if (P &gt; X) { // Make sure P &lt; X: so mirror the setup:\n            return solve(N, N + 1 - P, M, N + 1 - X);\n        }\n        int dist = X - P;\n        if (dist &lt; M &amp;&amp; M % 2 != dist % 2 &amp;&amp; P + X &gt; M &amp;&amp; 2*N + 2 &gt; M + P + X) {\n            return 1; // First player wins\n        }\n        if (dist % 2 == 1 || P + X &gt; 2*M || P + X &gt; 2*(N + 1 - M)) {\n            return 0; // Draw\n        }\n        return 2; // Second player wins\n    }\n</code></pre>\n"}],"owner":{"account_id":17772156,"reputation":362,"user_id":12905411,"display_name":"technotigr"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":170,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":77115677,"answer_count":1,"score":-2,"last_activity_date":1694818001,"creation_date":1694797096,"question_id":77114160,"body_markdown":"&gt; John and Doe are playing a game. In the game, they are given N keys, where N-1 keys are brass coated and one is silver plated. P is the position of the silver-plated key which is the correct key.\r\n&gt; \r\n&gt; To play, John and Doe take turns and in each turn, they have to choose consecutive M keys which should include the silver key, and reverse their order. To win the game, one has to put the silver-plated key in position X. John starts the game.\r\n&gt; \r\n&gt; Assume John and Doe play optimally.\r\n&gt; \r\n&gt; Note: Indexing is 1-based.\r\n&gt; \r\n&gt; Print the name of the player who wins. Print Draw if the game ends in a draw.\r\n&gt; \r\n&gt;     N = number of keys\r\n&gt;     P = position of the silver-plated key\r\n&gt;     M = Consecutive keys to be reversed\r\n&gt;     X = Winning position\r\n&gt; \r\n&gt; **Constraints:**\r\n&gt; \r\n&gt;     each input range is from 1 to 10^6\r\n&gt; \r\n&gt; **Example 1:**\r\n&gt; \r\n&gt;     N=3,P=1,M=2,X=2\r\n&gt; \r\n&gt; **Answer:**\r\n&gt; \r\n&gt;     John\r\n&gt; \r\n&gt; **Explanation:**\r\n&gt; \r\n&gt; There are 3 keys in total. The first one is a silver-plated key. On each turn, players must choose two consecutive keys and reverse their order. The winning position is 2. John starts the game. So he can just choose the first 2 keys and reverse their order. In this turn, he will be able to put a silver key on the winning position. So the answer is John\r\n&gt; \r\n&gt; **Example 2:**\r\n&gt; \r\n&gt;     N=4,P=1,M=2,X=4\r\n&gt; \r\n&gt; **Answer:**\r\n&gt; \r\n&gt;     Draw\r\n&gt; \r\n&gt; **Explanation:**\r\n&gt; \r\n&gt; * There are 4 keys in total. The first one is a silver-plated key. On each turn, players must choose two consecutive keys and reverse their order. The winning position is 4. \r\n&gt; * John starts the game. So he can just choose the first 2 keys and reverse their order. The silver-plated key is at position 2.\r\n&gt; * After that Doe will choose the first 2 keys again reverse them back to put the silver-plated key at position 1. On the other hand, he could have reversed the order of the 2nd and 3rd keys, but on his next turn, John would be able to put the silver-plated key from position 3 to position 4 and win the game.\r\n&gt; * The previous two moves are played infinitely in an optimal game so neither John nor Doe will be able to win the game. So print Draw.\r\n\r\nThis is my code:\r\n\r\n    public String solve(int N, int P, int M, int X) {\r\n    \tint[] ar = new int[N];\r\n    \tar[P-1] = 1;\r\n    \tfor(int i=0; i&lt;M/2; i++) {\r\n    \t\tint x = ar[i], y = ar[M-i-1];\r\n    \t\tar[i] = y;\r\n    \t\tar[M-i-1] = x;\r\n    \t}\r\n    \tif(ar[X-1] == 1) return &quot;John&quot;;\r\n    \tfor(int i=M; i&lt;(M+M)/2 &amp;&amp; i&lt;N; i++) {\r\n    \t\tint x = ar[i], y = ar[M+M-i-1];\r\n    \t\tar[i] = y;\r\n    \t\tar[M+M-i-1] = x;\r\n    \t}\r\n    \tif(ar[X-1] == 1) return &quot;Doe&quot;;\r\n    \treturn &quot;Draw&quot;;\r\n    }\r\n\r\nThis was asked in Hackerrank some days back in an interview, when I tried my code, 4 test cases were failing which are hidden so I don&#39;t have information about those test cases.\r\n\r\nWhat is the correct approach to solve this problem?\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"Find winner for a game","body":"<blockquote>\n<p>John and Doe are playing a game. In the game, they are given N keys, where N-1 keys are brass coated and one is silver plated. P is the position of the silver-plated key which is the correct key.</p>\n<p>To play, John and Doe take turns and in each turn, they have to choose consecutive M keys which should include the silver key, and reverse their order. To win the game, one has to put the silver-plated key in position X. John starts the game.</p>\n<p>Assume John and Doe play optimally.</p>\n<p>Note: Indexing is 1-based.</p>\n<p>Print the name of the player who wins. Print Draw if the game ends in a draw.</p>\n<pre><code>N = number of keys\nP = position of the silver-plated key\nM = Consecutive keys to be reversed\nX = Winning position\n</code></pre>\n<p><strong>Constraints:</strong></p>\n<pre><code>each input range is from 1 to 10^6\n</code></pre>\n<p><strong>Example 1:</strong></p>\n<pre><code>N=3,P=1,M=2,X=2\n</code></pre>\n<p><strong>Answer:</strong></p>\n<pre><code>John\n</code></pre>\n<p><strong>Explanation:</strong></p>\n<p>There are 3 keys in total. The first one is a silver-plated key. On each turn, players must choose two consecutive keys and reverse their order. The winning position is 2. John starts the game. So he can just choose the first 2 keys and reverse their order. In this turn, he will be able to put a silver key on the winning position. So the answer is John</p>\n<p><strong>Example 2:</strong></p>\n<pre><code>N=4,P=1,M=2,X=4\n</code></pre>\n<p><strong>Answer:</strong></p>\n<pre><code>Draw\n</code></pre>\n<p><strong>Explanation:</strong></p>\n<ul>\n<li>There are 4 keys in total. The first one is a silver-plated key. On each turn, players must choose two consecutive keys and reverse their order. The winning position is 4.</li>\n<li>John starts the game. So he can just choose the first 2 keys and reverse their order. The silver-plated key is at position 2.</li>\n<li>After that Doe will choose the first 2 keys again reverse them back to put the silver-plated key at position 1. On the other hand, he could have reversed the order of the 2nd and 3rd keys, but on his next turn, John would be able to put the silver-plated key from position 3 to position 4 and win the game.</li>\n<li>The previous two moves are played infinitely in an optimal game so neither John nor Doe will be able to win the game. So print Draw.</li>\n</ul>\n</blockquote>\n<p>This is my code:</p>\n<pre><code>public String solve(int N, int P, int M, int X) {\n    int[] ar = new int[N];\n    ar[P-1] = 1;\n    for(int i=0; i&lt;M/2; i++) {\n        int x = ar[i], y = ar[M-i-1];\n        ar[i] = y;\n        ar[M-i-1] = x;\n    }\n    if(ar[X-1] == 1) return &quot;John&quot;;\n    for(int i=M; i&lt;(M+M)/2 &amp;&amp; i&lt;N; i++) {\n        int x = ar[i], y = ar[M+M-i-1];\n        ar[i] = y;\n        ar[M+M-i-1] = x;\n    }\n    if(ar[X-1] == 1) return &quot;Doe&quot;;\n    return &quot;Draw&quot;;\n}\n</code></pre>\n<p>This was asked in Hackerrank some days back in an interview, when I tried my code, 4 test cases were failing which are hidden so I don't have information about those test cases.</p>\n<p>What is the correct approach to solve this problem?</p>\n"},{"tags":["java","hibernate","spring-data-jpa"],"comments":[{"owner":{"account_id":2563377,"reputation":7174,"user_id":2224047,"display_name":"Nikolai  Shevchenko"},"score":0,"creation_date":1642429458,"post_id":27936905,"comment_id":125061800,"body_markdown":"You can&#39;t use specification as a regular argument to any custom method. Specification should be used in `List&lt;T&gt; findAll(Specification&lt;T&gt; spec);` or `Page&lt;T&gt; findAll(Specification&lt;T&gt; spec, Pageable pageable);` methods inherited from `JpaSpecificationExecutor` interface","body":"You can&#39;t use specification as a regular argument to any custom method. Specification should be used in <code>List&lt;T&gt; findAll(Specification&lt;T&gt; spec);</code> or <code>Page&lt;T&gt; findAll(Specification&lt;T&gt; spec, Pageable pageable);</code> methods inherited from <code>JpaSpecificationExecutor</code> interface"}],"answers":[{"tags":[],"owner":{"account_id":1312159,"reputation":420,"user_id":1259947,"accept_rate":50,"display_name":"Christopher Rivera"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1435200127,"creation_date":1435200127,"answer_id":31040326,"question_id":27936905,"body_markdown":"if you have Specification&lt;FamousExperience&gt; spec in there you will need to refer it somewhere in your query... the important thing is that it seems like when you have a pageable there then the counter doesnt start at ?0 but at ?1\r\n\r\nso something like this should work\r\n\r\n     @Query( value = \r\n        &quot;from FamousExperience f where f.spec = ?1&quot;\r\n        ,countQuery =&quot;select count(f.id) from FamousExperience f&quot;)","title":"&quot;java.lang.IllegalArgumentException: Parameter with that position [1] did not exist&quot; When I use spring-data-jpa","body":"<p>if you have Specification spec in there you will need to refer it somewhere in your query... the important thing is that it seems like when you have a pageable there then the counter doesnt start at ?0 but at ?1</p>\n\n<p>so something like this should work</p>\n\n<pre><code> @Query( value = \n    \"from FamousExperience f where f.spec = ?1\"\n    ,countQuery =\"select count(f.id) from FamousExperience f\")\n</code></pre>\n"}],"owner":{"account_id":5622836,"reputation":51,"user_id":4452083,"display_name":"user4452083"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8109,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":1,"score":5,"last_activity_date":1694815721,"creation_date":1421216409,"question_id":27936905,"body_markdown":"I am using **spring-data-jpa**+**hibernate**.\r\n1.I run into below exception\r\n......\r\n\r\n\r\n    Caused by: java.lang.IllegalArgumentException: Parameter with that position [1] did not exist\r\n        at org.hibernate.jpa.spi.BaseQueryImpl.findParameterRegistration(BaseQueryImpl.java:518) ~[BaseQueryImpl.class:4.3.7.Final]\r\n        at org.hibernate.jpa.spi.BaseQueryImpl.setParameter(BaseQueryImpl.java:674) ~[BaseQueryImpl.class:4.3.7.Final]\r\n        at org.hibernate.jpa.spi.AbstractQueryImpl.setParameter(AbstractQueryImpl.java:198) ~[AbstractQueryImpl.class:4.3.7.Final]\r\n        at org.hibernate.jpa.spi.AbstractQueryImpl.setParameter(AbstractQueryImpl.java:49) ~[AbstractQueryImpl.class:4.3.7.Final]\r\n        at org.springframework.data.jpa.repository.query.ParameterBinder.bind(ParameterBinder.java:165) ~[ParameterBinder.class:?]\r\n        at org.springframework.data.jpa.repository.query.StringQueryParameterBinder.bind(StringQueryParameterBinder.java:66) ~[StringQueryParameterBinder.class:?]\r\n......\r\n\r\n2. I believe the exception comes from \r\n\r\n\r\n\r\n\r\n        public interface FamousExperienceDao extends PagingAndSortingRepository&lt;FamousExperience,\r\n          Long&gt;,JpaSpecificationExecutor&lt;FamousExperience&gt;\r\n        {\r\n            @Query( value = \r\n                &quot;select new com.tujia.community.entity.BriefInfomation(f.id,f.title,f.summary,f.thumbnail,f.author, f.issueDate, f.counter) from FamousExperience f&quot;\r\n                ,countQuery =&quot;select count(f.id) from FamousExperience f&quot;)\r\n            public Page&lt;BriefInfomation&gt; findExps(Specification&lt;FamousExperience&gt; spec, Pageable pgbl);\r\n        }\r\n\r\nbecause after I get rid of Specification&lt;FamousExperience&gt; spec from params of function findExps, it works well, I just want to add specification for the query.\r\n\r\nBYW, class FamousExperience extends BriefInfomation. I used &quot;constructor expressions&quot; feature of JPA Query and I just don&#39;t need property &quot;content&quot; when I try to query.\r\n\r\n\r\n    @Entity\r\n    @Table(name = &quot;famous_experience&quot;)\r\n    public class FamousExperience extends BriefInfomation\r\n        {\r\n        private String content;\r\n    \r\n        /**\r\n         * @return the content\r\n         */\r\n        public String getContent()\r\n        {\r\n            return content;\r\n        }\r\n    \r\n        /**\r\n         * @param content the content to set\r\n         */\r\n        public void setContent(String content)\r\n        {\r\n            this.content = content;\r\n        }\r\n    }\r\n\r\nPls help me!\r\n","title":"&quot;java.lang.IllegalArgumentException: Parameter with that position [1] did not exist&quot; When I use spring-data-jpa","body":"<p>I am using <strong>spring-data-jpa</strong>+<strong>hibernate</strong>.\n1.I run into below exception\n......</p>\n\n<pre><code>Caused by: java.lang.IllegalArgumentException: Parameter with that position [1] did not exist\n    at org.hibernate.jpa.spi.BaseQueryImpl.findParameterRegistration(BaseQueryImpl.java:518) ~[BaseQueryImpl.class:4.3.7.Final]\n    at org.hibernate.jpa.spi.BaseQueryImpl.setParameter(BaseQueryImpl.java:674) ~[BaseQueryImpl.class:4.3.7.Final]\n    at org.hibernate.jpa.spi.AbstractQueryImpl.setParameter(AbstractQueryImpl.java:198) ~[AbstractQueryImpl.class:4.3.7.Final]\n    at org.hibernate.jpa.spi.AbstractQueryImpl.setParameter(AbstractQueryImpl.java:49) ~[AbstractQueryImpl.class:4.3.7.Final]\n    at org.springframework.data.jpa.repository.query.ParameterBinder.bind(ParameterBinder.java:165) ~[ParameterBinder.class:?]\n    at org.springframework.data.jpa.repository.query.StringQueryParameterBinder.bind(StringQueryParameterBinder.java:66) ~[StringQueryParameterBinder.class:?]\n</code></pre>\n\n<p>......</p>\n\n<ol start=\"2\">\n<li><p>I believe the exception comes from </p>\n\n<pre><code>public interface FamousExperienceDao extends PagingAndSortingRepository&lt;FamousExperience,\n  Long&gt;,JpaSpecificationExecutor&lt;FamousExperience&gt;\n{\n    @Query( value = \n        \"select new com.tujia.community.entity.BriefInfomation(f.id,f.title,f.summary,f.thumbnail,f.author, f.issueDate, f.counter) from FamousExperience f\"\n        ,countQuery =\"select count(f.id) from FamousExperience f\")\n    public Page&lt;BriefInfomation&gt; findExps(Specification&lt;FamousExperience&gt; spec, Pageable pgbl);\n}\n</code></pre></li>\n</ol>\n\n<p>because after I get rid of Specification spec from params of function findExps, it works well, I just want to add specification for the query.</p>\n\n<p>BYW, class FamousExperience extends BriefInfomation. I used \"constructor expressions\" feature of JPA Query and I just don't need property \"content\" when I try to query.</p>\n\n<pre><code>@Entity\n@Table(name = \"famous_experience\")\npublic class FamousExperience extends BriefInfomation\n    {\n    private String content;\n\n    /**\n     * @return the content\n     */\n    public String getContent()\n    {\n        return content;\n    }\n\n    /**\n     * @param content the content to set\n     */\n    public void setContent(String content)\n    {\n        this.content = content;\n    }\n}\n</code></pre>\n\n<p>Pls help me!</p>\n"},{"tags":["java","swing","graphics","jpanel","java-2d"],"comments":[{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":2,"creation_date":1386452915,"post_id":20447060,"comment_id":30548093,"body_markdown":"*&quot;..i am not able to figure out where to add the relevant code considering the time constraint.&quot;*  What &#39;time constraint&#39;?","body":"<i>&quot;..i am not able to figure out where to add the relevant code considering the time constraint.&quot;</i>  What &#39;time constraint&#39;?"},{"owner":{"account_id":1430435,"reputation":270,"user_id":1352962,"accept_rate":73,"display_name":"dsingh"},"score":0,"creation_date":1386453258,"post_id":20447060,"comment_id":30548202,"body_markdown":"I mean i have some time constraints to go through the java tutorial and completely understand the graphics code and thus figure out where to add the code.","body":"I mean i have some time constraints to go through the java tutorial and completely understand the graphics code and thus figure out where to add the code."},{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":5,"creation_date":1386453387,"post_id":20447060,"comment_id":30548239,"body_markdown":"Perhaps you should leave this task for when you *do* have time.  People who offer free help typically expect you to have ti8me to refer to the Java Docs and tutorials to which they link.","body":"Perhaps you should leave this task for when you <i>do</i> have time.  People who offer free help typically expect you to have ti8me to refer to the Java Docs and tutorials to which they link."},{"owner":{"account_id":1430435,"reputation":270,"user_id":1352962,"accept_rate":73,"display_name":"dsingh"},"score":1,"creation_date":1386453903,"post_id":20447060,"comment_id":30548384,"body_markdown":"I agree with you but as i already mentioned being new to java graphics it will take time for me to refer to java docs and understand its basics.As a part of my project i wanted to show some cool graphs of the data which i analysed.I could not have asked for this in the way i asked now if my project,s sole purpose is to show how to use  java graphics, my idea is to use the online available utilities to aide the representation aspect of my project.","body":"I agree with you but as i already mentioned being new to java graphics it will take time for me to refer to java docs and understand its basics.As a part of my project i wanted to show some cool graphs of the data which i analysed.I could not have asked for this in the way i asked now if my project,s sole purpose is to show how to use  java graphics, my idea is to use the online available utilities to aide the representation aspect of my project."},{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":1,"creation_date":1386457536,"post_id":20447060,"comment_id":30549555,"body_markdown":"[tag:jfreechart] might be a good choice; basic examples are cited [here](http://stackoverflow.com/tags/jfreechart/info).","body":"<a href=\"https://stackoverflow.com/questions/tagged/jfreechart\">jfreechart</a> might be a good choice; basic examples are cited <a href=\"http://stackoverflow.com/tags/jfreechart/info\">here</a>."},{"owner":{"account_id":114128,"reputation":50467,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":0,"creation_date":1674050475,"post_id":20447060,"comment_id":132631922,"body_markdown":"Oracle has a helpful tutorial, [Creating a GUI With Swing](https://docs.oracle.com/javase/tutorial/uiswing/index.html).  Skip the Learning Swing with the NetBeans IDE section.  Pay particular attention to the [Performing Custom Painting](https://docs.oracle.com/javase/tutorial/uiswing/painting/index.html) section.","body":"Oracle has a helpful tutorial, <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/index.html\" rel=\"nofollow noreferrer\">Creating a GUI With Swing</a>.  Skip the Learning Swing with the NetBeans IDE section.  Pay particular attention to the <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/painting/index.html\" rel=\"nofollow noreferrer\">Performing Custom Painting</a> section."}],"answers":[{"comments":[{"owner":{"account_id":3889038,"reputation":1105,"user_id":3219738,"display_name":"Tetrinity"},"score":0,"creation_date":1401796350,"post_id":24014061,"comment_id":37013686,"body_markdown":"You should expand on this answer instead of only posting code; how does it answer the question? What is good/bad about your approach?","body":"You should expand on this answer instead of only posting code; how does it answer the question? What is good/bad about your approach?"}],"tags":[],"owner":{"account_id":4560317,"reputation":1,"user_id":3702852,"display_name":"chenille"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1401795039,"creation_date":1401795039,"answer_id":24014061,"question_id":20447060,"body_markdown":"\tpublic void drawGrid(Graphics g)\r\n\t{\r\n\t\tg.setColor(Color.black);\r\n\t\tint rows = model.maxy-model.miny+1;\r\n\t\tint cols = model.maxx-model.minx+1;\r\n\t\t\r\n\t\tint colWidth = (getWidth()-paddingFromRight - ylabelWidth)/cols;\r\n\t\tint rowHeight = (getHeight()-xlabelHeight-headingHeight)/rows;\r\n\r\n\t\tint endX = ylabelWidth + cols * colWidth;\r\n\t\tint endY =  headingHeight + rows*rowHeight;\r\n\t\t\r\n\t\tfor (int k = 0; k &lt;= cols; k++)\r\n\t\t{\r\n\t\t\tg.drawLine(ylabelWidth+colWidth*k, headingHeight, ylabelWidth+colWidth*k, endY); //getHeight()-xlabelHeight\r\n\t\t}\r\n\t\t\r\n\t\tfor (int k = 0; k &lt;= rows;k++)\r\n\t\t{\r\n\t\t\tg.drawLine(ylabelWidth, headingHeight+rowHeight*k,endX, headingHeight+rowHeight*k);\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublic void drawLines(Graphics g)\r\n\t{\r\n\t\tArrayList&lt;Line&gt; lines = model.getLines();\r\n\t\tRandom random = new Random(50);\r\n\t\tfor (int k = 0; k &lt; lines.size(); k++)\r\n\t\t{\r\n\t\t\tg.setColor(new Color(255-50*k, 50*k, 2*50*k));\r\n\t\t\t//g.setColor(Color.red);\r\n\t\t\tdrawLine(g, lines.get(k));\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t\r\n\tpublic void drawLine(Graphics g, Line line)\r\n\t{\r\n\t\tArrayList&lt;Point&gt; points = line.points;\r\n\t\tfor (int k = 0; k&lt;points.size()-1;k++)\r\n\t\t{\r\n\t\t\t//scale up points\r\n\t\t\tPoint p1 = points.get(k);\r\n\t\t\tPoint p2 = points.get(k+1);\r\n\t\t\tg.drawLine(scaleUpX(p1.x), scaleUpY(p1.y), scaleUpX(p2.x), scaleUpY(p2.y));\r\n\t\t\tg.fillOval(scaleUpX(p1.x)-5, scaleUpY(p1.y)-5, 10, 10);\r\n\t\t}\r\n\t\tPoint p1 = points.get(points.size()-1);\r\n\t\tg.fillOval(scaleUpX(p1.x)-5, scaleUpY(p1.y)-5, 10, 10);\r\n\t}\r\n\t\r\n\tpublic int scaleUpX(int x)\r\n\t{\r\n\t\tint cols = model.maxx-model.minx+1;\r\n\t\tint colWidth = (getWidth()-paddingFromRight - ylabelWidth)/cols;\r\n\r\n\t\treturn ylabelWidth+colWidth*x;\r\n\t}\r\n\tpublic int scaleUpY(int y)\r\n\t{\r\n\t\tint rows = model.maxy-model.miny+1;\r\n\t\tint rowHeight = (getHeight()-xlabelHeight-headingHeight)/(rows);\r\n\t\t//int endY = getHeight()-xlabelHeight;\r\n\t\tint endY = headingHeight+rows*rowHeight;\r\n\t\t\r\n\t\treturn endY - rowHeight*y;\r\n\t}\r\n\tpublic void drawLabels(Graphics g)\r\n\t{\r\n\t\tDimension d = getSize();\r\n\t\t//xlabel\r\n\t\tg.drawString(model.xlabel, d.width/2, d.height-xlabelHeight/4);\r\n\t\t//ylabel\r\n\t\tg.drawString(model.ylabel, 0+5, d.height/2);\r\n\t\t//xaxis\r\n\t\tint rows = model.maxy-model.miny+1;\r\n\t\tint cols = model.maxx-model.minx+1;\r\n\t\t\r\n\t\tint colWidth = (getWidth()-paddingFromRight - ylabelWidth)/cols;\r\n\t\tint rowHeight = (getHeight()-xlabelHeight-headingHeight)/rows;\r\n\t\t\r\n\t\tfor (int k = 0;k&lt;=cols;k++)\r\n\t\t{\r\n\t\t\tg.drawString(String.valueOf(model.minx+k), ylabelWidth+k*colWidth-5, rowHeight*rows+headingHeight+15);\r\n\t\t}\r\n\t\t//yaxis\r\n\t\tfor (int k = 0;k&lt;=rows;k++)\r\n\t\t{\r\n\t\t\tg.drawString(String.valueOf(model.maxy-k+1),ylabelWidth-15,headingHeight+k*rowHeight);\r\n\t\t}\r\n\t\t//heading\r\n\t\tFontMetrics fm = g.getFontMetrics();\r\n\t\tg.setFont(g.getFont().deriveFont((float)25.0));\r\n\t\tg.drawString(model.title, d.width/2-fm.stringWidth(model.title), headingHeight/2+headingHeight/4);\r\n\t}","title":"Drawing a simple 2D graph in java","body":"<pre><code>public void drawGrid(Graphics g)\n{\n    g.setColor(Color.black);\n    int rows = model.maxy-model.miny+1;\n    int cols = model.maxx-model.minx+1;\n\n    int colWidth = (getWidth()-paddingFromRight - ylabelWidth)/cols;\n    int rowHeight = (getHeight()-xlabelHeight-headingHeight)/rows;\n\n    int endX = ylabelWidth + cols * colWidth;\n    int endY =  headingHeight + rows*rowHeight;\n\n    for (int k = 0; k &lt;= cols; k++)\n    {\n        g.drawLine(ylabelWidth+colWidth*k, headingHeight, ylabelWidth+colWidth*k, endY); //getHeight()-xlabelHeight\n    }\n\n    for (int k = 0; k &lt;= rows;k++)\n    {\n        g.drawLine(ylabelWidth, headingHeight+rowHeight*k,endX, headingHeight+rowHeight*k);\n    }\n}\n\npublic void drawLines(Graphics g)\n{\n    ArrayList&lt;Line&gt; lines = model.getLines();\n    Random random = new Random(50);\n    for (int k = 0; k &lt; lines.size(); k++)\n    {\n        g.setColor(new Color(255-50*k, 50*k, 2*50*k));\n        //g.setColor(Color.red);\n        drawLine(g, lines.get(k));\n    }\n\n}\n\npublic void drawLine(Graphics g, Line line)\n{\n    ArrayList&lt;Point&gt; points = line.points;\n    for (int k = 0; k&lt;points.size()-1;k++)\n    {\n        //scale up points\n        Point p1 = points.get(k);\n        Point p2 = points.get(k+1);\n        g.drawLine(scaleUpX(p1.x), scaleUpY(p1.y), scaleUpX(p2.x), scaleUpY(p2.y));\n        g.fillOval(scaleUpX(p1.x)-5, scaleUpY(p1.y)-5, 10, 10);\n    }\n    Point p1 = points.get(points.size()-1);\n    g.fillOval(scaleUpX(p1.x)-5, scaleUpY(p1.y)-5, 10, 10);\n}\n\npublic int scaleUpX(int x)\n{\n    int cols = model.maxx-model.minx+1;\n    int colWidth = (getWidth()-paddingFromRight - ylabelWidth)/cols;\n\n    return ylabelWidth+colWidth*x;\n}\npublic int scaleUpY(int y)\n{\n    int rows = model.maxy-model.miny+1;\n    int rowHeight = (getHeight()-xlabelHeight-headingHeight)/(rows);\n    //int endY = getHeight()-xlabelHeight;\n    int endY = headingHeight+rows*rowHeight;\n\n    return endY - rowHeight*y;\n}\npublic void drawLabels(Graphics g)\n{\n    Dimension d = getSize();\n    //xlabel\n    g.drawString(model.xlabel, d.width/2, d.height-xlabelHeight/4);\n    //ylabel\n    g.drawString(model.ylabel, 0+5, d.height/2);\n    //xaxis\n    int rows = model.maxy-model.miny+1;\n    int cols = model.maxx-model.minx+1;\n\n    int colWidth = (getWidth()-paddingFromRight - ylabelWidth)/cols;\n    int rowHeight = (getHeight()-xlabelHeight-headingHeight)/rows;\n\n    for (int k = 0;k&lt;=cols;k++)\n    {\n        g.drawString(String.valueOf(model.minx+k), ylabelWidth+k*colWidth-5, rowHeight*rows+headingHeight+15);\n    }\n    //yaxis\n    for (int k = 0;k&lt;=rows;k++)\n    {\n        g.drawString(String.valueOf(model.maxy-k+1),ylabelWidth-15,headingHeight+k*rowHeight);\n    }\n    //heading\n    FontMetrics fm = g.getFontMetrics();\n    g.setFont(g.getFont().deriveFont((float)25.0));\n    g.drawString(model.title, d.width/2-fm.stringWidth(model.title), headingHeight/2+headingHeight/4);\n}\n</code></pre>\n"}],"owner":{"account_id":1430435,"reputation":270,"user_id":1352962,"accept_rate":73,"display_name":"dsingh"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":14786,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1694815721,"creation_date":1386452602,"question_id":20447060,"body_markdown":"I got a below java code which plots a 2D graph where x axis has values 1,2,3,......20\r\nand y axis has values 21,14,18..........18\r\nThe code works perfectly but the only problem is that the graph does not shows the corresponding x and y values on x axis and y axis respectively. I know it could be a small addition to the code. but i am new to java graphics and i am not able to figure out where to add the relevant code considering the time constraint.\r\n\r\n    /*Sample code */\r\n    \r\n    public class GraphingData extends JPanel {\r\n    \r\n        int[] data = {\r\n            21, 14, 18, 03, 86, 88, 74, 87, 54, 77,\r\n            61, 55, 48, 60, 49, 36, 38, 27, 20, 18\r\n        };\r\n        final int PAD = 20;\r\n     \r\n        protected void paintComponent(Graphics g) {\r\n            super.paintComponent(g);\r\n            Graphics2D g2 = (Graphics2D)g;\r\n            g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING,\r\n                                RenderingHints.VALUE_ANTIALIAS_ON);\r\n            int w = getWidth();\r\n            int h = getHeight();\r\n            // Draw ordinate.\r\n            g2.draw(new Line2D.Double(PAD, PAD, PAD, h-PAD));\r\n            // Draw abcissa.\r\n            g2.draw(new Line2D.Double(PAD, h-PAD, w-PAD, h-PAD));\r\n            // Draw labels.\r\n            Font font = g2.getFont();\r\n            FontRenderContext frc = g2.getFontRenderContext();\r\n            LineMetrics lm = font.getLineMetrics(&quot;0&quot;, frc);\r\n            float sh = lm.getAscent() + lm.getDescent();\r\n            // Ordinate label.\r\n            String s = &quot;Average Byte Value&quot;;\r\n            float sy = PAD + ((h - 2*PAD) - s.length()*sh)/2 + lm.getAscent();\r\n            for(int i = 0; i &lt; s.length(); i++) {\r\n                String letter = String.valueOf(s.charAt(i));\r\n                float sw = (float)font.getStringBounds(letter, frc).getWidth();\r\n                float sx = (PAD - sw)/2;\r\n                g2.drawString(letter, sx, sy);\r\n                sy += sh;\r\n            }\r\n            // Abcissa label.\r\n            s = &quot;file blocks&quot;;\r\n            sy = h - PAD + (PAD - sh)/2 + lm.getAscent();\r\n            float sw = (float)font.getStringBounds(s, frc).getWidth();\r\n            float sx = (w - sw)/2;\r\n            g2.drawString(s, sx, sy);\r\n            // Draw lines.\r\n            double xInc = (double)(w - 2*PAD)/(data.length-1);\r\n            double scale = (double)(h - 2*PAD)/getMax();\r\n            g2.setPaint(Color.green.darker());\r\n            for(int i = 0; i &lt; data.length-1; i++) {\r\n                double x1 = PAD + i*xInc;\r\n                double y1 = h - PAD - scale*data[i];\r\n                double x2 = PAD + (i+1)*xInc;\r\n                double y2 = h - PAD - scale*data[i+1];\r\n                g2.draw(new Line2D.Double(x1, y1, x2, y2));\r\n            }\r\n            // Mark data points.\r\n            g2.setPaint(Color.red);\r\n            for(int i = 0; i &lt; data.length; i++) {\r\n                double x = PAD + i*xInc;\r\n                double y = h - PAD - scale*data[i];\r\n                g2.fill(new Ellipse2D.Double(x-2, y-2, 4, 4));\r\n            }\r\n            \r\n        }\r\n     \r\n        private int getMax() {\r\n            int max = -Integer.MAX_VALUE;\r\n            for(int i = 0; i &lt; data.length; i++) {\r\n                if(data[i] &gt; max)\r\n                    max = data[i];\r\n            }\r\n            return max;\r\n        }\r\n     \r\n        public static void main(String[] args) {\r\n            JFrame f = new JFrame();\r\n            f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n            f.add(new GraphingData());\r\n            f.setSize(400,400);\r\n            f.setLocation(200,200);\r\n            f.setVisible(true);\r\n        }\r\n    }","title":"Drawing a simple 2D graph in java","body":"<p>I got a below java code which plots a 2D graph where x axis has values 1,2,3,......20\nand y axis has values 21,14,18..........18\nThe code works perfectly but the only problem is that the graph does not shows the corresponding x and y values on x axis and y axis respectively. I know it could be a small addition to the code. but i am new to java graphics and i am not able to figure out where to add the relevant code considering the time constraint.</p>\n\n<pre><code>/*Sample code */\n\npublic class GraphingData extends JPanel {\n\n    int[] data = {\n        21, 14, 18, 03, 86, 88, 74, 87, 54, 77,\n        61, 55, 48, 60, 49, 36, 38, 27, 20, 18\n    };\n    final int PAD = 20;\n\n    protected void paintComponent(Graphics g) {\n        super.paintComponent(g);\n        Graphics2D g2 = (Graphics2D)g;\n        g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING,\n                            RenderingHints.VALUE_ANTIALIAS_ON);\n        int w = getWidth();\n        int h = getHeight();\n        // Draw ordinate.\n        g2.draw(new Line2D.Double(PAD, PAD, PAD, h-PAD));\n        // Draw abcissa.\n        g2.draw(new Line2D.Double(PAD, h-PAD, w-PAD, h-PAD));\n        // Draw labels.\n        Font font = g2.getFont();\n        FontRenderContext frc = g2.getFontRenderContext();\n        LineMetrics lm = font.getLineMetrics(\"0\", frc);\n        float sh = lm.getAscent() + lm.getDescent();\n        // Ordinate label.\n        String s = \"Average Byte Value\";\n        float sy = PAD + ((h - 2*PAD) - s.length()*sh)/2 + lm.getAscent();\n        for(int i = 0; i &lt; s.length(); i++) {\n            String letter = String.valueOf(s.charAt(i));\n            float sw = (float)font.getStringBounds(letter, frc).getWidth();\n            float sx = (PAD - sw)/2;\n            g2.drawString(letter, sx, sy);\n            sy += sh;\n        }\n        // Abcissa label.\n        s = \"file blocks\";\n        sy = h - PAD + (PAD - sh)/2 + lm.getAscent();\n        float sw = (float)font.getStringBounds(s, frc).getWidth();\n        float sx = (w - sw)/2;\n        g2.drawString(s, sx, sy);\n        // Draw lines.\n        double xInc = (double)(w - 2*PAD)/(data.length-1);\n        double scale = (double)(h - 2*PAD)/getMax();\n        g2.setPaint(Color.green.darker());\n        for(int i = 0; i &lt; data.length-1; i++) {\n            double x1 = PAD + i*xInc;\n            double y1 = h - PAD - scale*data[i];\n            double x2 = PAD + (i+1)*xInc;\n            double y2 = h - PAD - scale*data[i+1];\n            g2.draw(new Line2D.Double(x1, y1, x2, y2));\n        }\n        // Mark data points.\n        g2.setPaint(Color.red);\n        for(int i = 0; i &lt; data.length; i++) {\n            double x = PAD + i*xInc;\n            double y = h - PAD - scale*data[i];\n            g2.fill(new Ellipse2D.Double(x-2, y-2, 4, 4));\n        }\n\n    }\n\n    private int getMax() {\n        int max = -Integer.MAX_VALUE;\n        for(int i = 0; i &lt; data.length; i++) {\n            if(data[i] &gt; max)\n                max = data[i];\n        }\n        return max;\n    }\n\n    public static void main(String[] args) {\n        JFrame f = new JFrame();\n        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        f.add(new GraphingData());\n        f.setSize(400,400);\n        f.setLocation(200,200);\n        f.setVisible(true);\n    }\n}\n</code></pre>\n"},{"tags":["python","java","visual-studio-code","dll","jvm"],"comments":[{"owner":{"account_id":25311208,"reputation":7305,"user_id":19133920,"display_name":"JialeDu"},"score":0,"creation_date":1695025166,"post_id":77115046,"comment_id":135963767,"body_markdown":"Follow [this answer](https://stackoverflow.com/a/67526703/19133920) to set the environment variable `JAVA_HOME ` for your system","body":"Follow <a href=\"https://stackoverflow.com/a/67526703/19133920\">this answer</a> to set the environment variable <code>JAVA_HOME </code> for your system"},{"owner":{"account_id":25311208,"reputation":7305,"user_id":19133920,"display_name":"JialeDu"},"score":0,"creation_date":1696469097,"post_id":77115046,"comment_id":136158178,"body_markdown":"Any updates here?","body":"Any updates here?"},{"owner":{"account_id":18609324,"reputation":801,"user_id":13562186,"display_name":"Nick"},"score":0,"creation_date":1696510256,"post_id":77115046,"comment_id":136164130,"body_markdown":"Latest update I offered as a edit to my question though didnt feel it was good enough as an answer. Will look into the linked answer you hav provided.","body":"Latest update I offered as a edit to my question though didnt feel it was good enough as an answer. Will look into the linked answer you hav provided."}],"owner":{"account_id":18609324,"reputation":801,"user_id":13562186,"display_name":"Nick"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1028,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694813776,"creation_date":1694807812,"question_id":77115046,"body_markdown":"Trying to explore using Tabula in python on a PDF in Visual Studio code on MacOS. \r\n\r\n    import pandas as pd\r\n    import tabula\r\n    dfs = tabula.read_pdf(&quot;/Users/TEST.pdf&quot;, pages = 1)\r\n    len(dfs)\r\n\r\nWhen I run the code however I get the following error: \r\n\r\nFileNotFoundError: [Errno 2] JVM DLL not found: /Library/Java/JavaVirtualMachines/adoptopenjdk-11.jdk/Contents/Home/lib/jli/libjli.dylib\r\n\r\n[![enter image description here][1]][1]\r\n\r\nI have installed Java via home-brew, and via a pkg all apparently successful and can run a simple java program in visual studio code just fine. So it is installed, but I don&#39;t really know how to solve the above error despite a few attempts.\r\n\r\n[![enter image description here][2]][2]\r\n\r\nI am really new to python and installing packages so if you think you can answer, please walk me through like I&#39;m 5 years old.\r\n\r\n\r\nUPDATE: \r\n\r\n    import os\r\n    \r\n    # Set the JAVA_HOME environment variable to the Java installation directory\r\n    os.environ[&quot;JAVA_HOME&quot;] = &quot;/opt/homebrew/opt/openjdk/libexec/openjdk.jdk&quot;\r\n    \r\n    import pandas as pd\r\n    import tabula\r\n    dfs = tabula.read_pdf(&quot;/Users/NickCoding/Desktop/TEST.pdf&quot;, pages = 1)\r\n    len(dfs)\r\n\r\n\r\nThis allows the code to work, however I feel that this is a botched solution. \r\n\r\nHow do I get it to work in the virtual environment?\r\n\r\n  [1]: https://i.stack.imgur.com/VDib1.png\r\n  [2]: https://i.stack.imgur.com/PrK9g.png","title":"JVM DLL not found. FileNotFoundError: [Errno 2]","body":"<p>Trying to explore using Tabula in python on a PDF in Visual Studio code on MacOS.</p>\n<pre><code>import pandas as pd\nimport tabula\ndfs = tabula.read_pdf(&quot;/Users/TEST.pdf&quot;, pages = 1)\nlen(dfs)\n</code></pre>\n<p>When I run the code however I get the following error:</p>\n<p>FileNotFoundError: [Errno 2] JVM DLL not found: /Library/Java/JavaVirtualMachines/adoptopenjdk-11.jdk/Contents/Home/lib/jli/libjli.dylib</p>\n<p><a href=\"https://i.stack.imgur.com/VDib1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VDib1.png\" alt=\"enter image description here\" /></a></p>\n<p>I have installed Java via home-brew, and via a pkg all apparently successful and can run a simple java program in visual studio code just fine. So it is installed, but I don't really know how to solve the above error despite a few attempts.</p>\n<p><a href=\"https://i.stack.imgur.com/PrK9g.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PrK9g.png\" alt=\"enter image description here\" /></a></p>\n<p>I am really new to python and installing packages so if you think you can answer, please walk me through like I'm 5 years old.</p>\n<p>UPDATE:</p>\n<pre><code>import os\n\n# Set the JAVA_HOME environment variable to the Java installation directory\nos.environ[&quot;JAVA_HOME&quot;] = &quot;/opt/homebrew/opt/openjdk/libexec/openjdk.jdk&quot;\n\nimport pandas as pd\nimport tabula\ndfs = tabula.read_pdf(&quot;/Users/NickCoding/Desktop/TEST.pdf&quot;, pages = 1)\nlen(dfs)\n</code></pre>\n<p>This allows the code to work, however I feel that this is a botched solution.</p>\n<p>How do I get it to work in the virtual environment?</p>\n"},{"tags":["java","jsf","jakarta-ee","omnifaces"],"owner":{"account_id":329138,"reputation":8059,"user_id":652497,"accept_rate":91,"display_name":"Jonathan S. Fisher"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694813660,"creation_date":1694801774,"question_id":77114597,"body_markdown":"We have a JSF taglib we&#39;re using that dynamically adds components to a view. One of these components is an alternative button... the command button dynamically adds a an actual command button as a subcomponent of itself (in addition to some other useful stuff).\r\n\r\nWe want to use `&lt;o:validateBean /&gt;`. Normally we&#39;d implement a `PostAddToViewEevnt` listener and just move the components from the parent to the child. HOWEVER, Omnifaces&#39; `&lt;o:validateBean /&gt;` is implemented as a `TagHandler`, not a `UIComponent`. \r\n\r\nSince the `apply()` method of the `ValidateBean` `TagHandler` is called in the `RESTORE_VIEW` phase, one idea would be to implement a `PhaseListener` that gets ahold of the view and moves the `&lt;o:validateBean /&gt;` to the correct component. \r\n\r\nI can&#39;t seem to find a JSF API to peruse the view declaration and grab any `TagHandler`s and modify the layout however. \r\n\r\nEven if you don&#39;t have an exact answer, if anyone could comment on modifying layouts with a `TagHandler` it made lead us to the right answer. Thank you!","title":"Does JSF have a way to get the tag handlers in the current view?","body":"<p>We have a JSF taglib we're using that dynamically adds components to a view. One of these components is an alternative button... the command button dynamically adds a an actual command button as a subcomponent of itself (in addition to some other useful stuff).</p>\n<p>We want to use <code>&lt;o:validateBean /&gt;</code>. Normally we'd implement a <code>PostAddToViewEevnt</code> listener and just move the components from the parent to the child. HOWEVER, Omnifaces' <code>&lt;o:validateBean /&gt;</code> is implemented as a <code>TagHandler</code>, not a <code>UIComponent</code>.</p>\n<p>Since the <code>apply()</code> method of the <code>ValidateBean</code> <code>TagHandler</code> is called in the <code>RESTORE_VIEW</code> phase, one idea would be to implement a <code>PhaseListener</code> that gets ahold of the view and moves the <code>&lt;o:validateBean /&gt;</code> to the correct component.</p>\n<p>I can't seem to find a JSF API to peruse the view declaration and grab any <code>TagHandler</code>s and modify the layout however.</p>\n<p>Even if you don't have an exact answer, if anyone could comment on modifying layouts with a <code>TagHandler</code> it made lead us to the right answer. Thank you!</p>\n"},{"tags":["java","encoding","character-encoding","special-characters"],"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1694868676,"post_id":77114618,"comment_id":135949594,"body_markdown":"If DataGrip has a charset or character encoding setting—possibly a setting which is particular to that database connection—you need to set that to UTF-8.  Some databases also have their own charset property for each catalog and/or table;  I don’t know if Postgres is one of them.  One thing is certain:  *Under no circumstances* should you be doing any of this conversion in Java code.  Instead, make the database retrieval itself behave correctly.","body":"If DataGrip has a charset or character encoding setting—possibly a setting which is particular to that database connection—you need to set that to UTF-8.  Some databases also have their own charset property for each catalog and/or table;  I don’t know if Postgres is one of them.  One thing is certain:  <i>Under no circumstances</i> should you be doing any of this conversion in Java code.  Instead, make the database retrieval itself behave correctly."}],"answers":[{"tags":[],"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1694803320,"creation_date":1694802633,"answer_id":77114662,"question_id":77114618,"body_markdown":"    byte[] b = new byte[] {(char)&#39;&#195;&#39;, (byte)0x9c};\r\n    String capitalUUmlaut = new String(b, StandardCharsets.UTF8);\r\n\r\nWhat you are seeing is the multi byte UTF-8 encoding of Unicode. ASCII, 7 bits, is a subset. Other Unicode code points are more than one byte, every one with the highest bit 1.\r\n\r\nNote that I use a byte array. For a corrupted String, there already could have been done some Charset conversion, which translate the bytes wrong. Even here the `&#195;` might not be possible in every Charset.\r\n\r\nBest inspect the database for the used encoding (Charset) of the DDL and specify that.","title":"Umlaut Characters: How do I convert “&#195;&lt;0x9c&gt;” to “&#220;” in Java?","body":"<pre><code>byte[] b = new byte[] {(char)'Ã', (byte)0x9c};\nString capitalUUmlaut = new String(b, StandardCharsets.UTF8);\n</code></pre>\n<p>What you are seeing is the multi byte UTF-8 encoding of Unicode. ASCII, 7 bits, is a subset. Other Unicode code points are more than one byte, every one with the highest bit 1.</p>\n<p>Note that I use a byte array. For a corrupted String, there already could have been done some Charset conversion, which translate the bytes wrong. Even here the <code>Ã</code> might not be possible in every Charset.</p>\n<p>Best inspect the database for the used encoding (Charset) of the DDL and specify that.</p>\n"},{"tags":[],"owner":{"account_id":116746,"reputation":12477,"user_id":306030,"accept_rate":70,"display_name":"forty-two"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1694813153,"creation_date":1694809955,"answer_id":77115208,"question_id":77114618,"body_markdown":"This is probably a conflating of the ISO-8859-1 (Latin-1) and UTF-8 encodings. Let&#39;s see:\r\n\r\nIn UTF-8, the Unicode character [U+00DC](https://www.compart.com/en/unicode/U+00DC) (&#220;) is encoded as 0xC3 0x9C.\r\n\r\nIn [Latin-1](https://en.wikipedia.org/wiki/ISO/IEC_8859-1), 0xC3 is the letter A with tilde (&#195;), but 0xC9 doesn&#39;t have a corresponding character (glyph). That&#39;s why you see `&#195;&lt;0xC9&gt;`.\r\n\r\nSo, the string (or byte array) you have is probably encoded in in UTF-8, and should be decoded as such.\r\n\r\nSince you asked for how to convert, here&#39;s a demonstration:\r\n\r\n    public static void main(String[] args) throws Exception {\r\n        byte[] input = {(byte) 0xc3, (byte)0x9c};\r\n\r\n        var s = new String(input, StandardCharsets.UTF_8);\r\n        System.out.println(s);\r\n\r\n        var out = new ByteArrayOutputStream();\r\n        var writer = new OutputStreamWriter(out, StandardCharsets.ISO_8859_1);\r\n\r\n        writer.write(s);\r\n        writer.flush();\r\n        byte[] result = out.toByteArray();\r\n\r\n        System.out.println(result.length);\r\n        System.out.printf(&quot;%x\\n&quot;, result[0]);\r\n    }\r\nwhich prints\r\n\r\n    &#220;\r\n    1\r\n    dc\r\n\r\nOops, forgot to mention that 0xDC is same character in Unicode and Latin-1, &quot;Latin Capital Letter U with Diaeresis&quot;. ","title":"Umlaut Characters: How do I convert “&#195;&lt;0x9c&gt;” to “&#220;” in Java?","body":"<p>This is probably a conflating of the ISO-8859-1 (Latin-1) and UTF-8 encodings. Let's see:</p>\n<p>In UTF-8, the Unicode character <a href=\"https://www.compart.com/en/unicode/U+00DC\" rel=\"nofollow noreferrer\">U+00DC</a> (Ü) is encoded as 0xC3 0x9C.</p>\n<p>In <a href=\"https://en.wikipedia.org/wiki/ISO/IEC_8859-1\" rel=\"nofollow noreferrer\">Latin-1</a>, 0xC3 is the letter A with tilde (Ã), but 0xC9 doesn't have a corresponding character (glyph). That's why you see <code>Ã&lt;0xC9&gt;</code>.</p>\n<p>So, the string (or byte array) you have is probably encoded in in UTF-8, and should be decoded as such.</p>\n<p>Since you asked for how to convert, here's a demonstration:</p>\n<pre><code>public static void main(String[] args) throws Exception {\n    byte[] input = {(byte) 0xc3, (byte)0x9c};\n\n    var s = new String(input, StandardCharsets.UTF_8);\n    System.out.println(s);\n\n    var out = new ByteArrayOutputStream();\n    var writer = new OutputStreamWriter(out, StandardCharsets.ISO_8859_1);\n\n    writer.write(s);\n    writer.flush();\n    byte[] result = out.toByteArray();\n\n    System.out.println(result.length);\n    System.out.printf(&quot;%x\\n&quot;, result[0]);\n}\n</code></pre>\n<p>which prints</p>\n<pre><code>Ü\n1\ndc\n</code></pre>\n<p>Oops, forgot to mention that 0xDC is same character in Unicode and Latin-1, &quot;Latin Capital Letter U with Diaeresis&quot;.</p>\n"}],"owner":{"account_id":33272,"reputation":11963,"user_id":93004,"accept_rate":92,"display_name":"Steve"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":102,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77115208,"answer_count":2,"score":1,"last_activity_date":1694813153,"creation_date":1694801996,"question_id":77114618,"body_markdown":"I have a string that contains &quot;&#195;&lt;0x9c&gt;&quot;.  It&#39;s not exactly those characters, the best way I can describe it is:\r\n\r\n- Looks like &quot;&#195;&quot; in Postgres DB / Datagrip Viewer.\r\n- Looks like &quot;&#195;&lt;0x9c&gt;&quot; when copied from Datagrip into Sublime Text.\r\n\r\nI have another program that does a String match and it expects this “&#220;”.\r\nSo I assume &quot;&#195;&lt;0x9c&gt;&quot; is equivalent to “&#220;” in some form.\r\n\r\nMy question is how do I convert &quot;&#195;&lt;0x9c&gt;&quot; to “&#220;” in Java for the set of these generic characters? I don&#39;t want to solve it for just this one character.\r\n\r\nSo if &quot;&#195;&lt;0x9c&gt;&quot; is encoding1 and “&#220;” is encoding2.  How do I convert from encoding1 to encoding2.\r\n\r\nAlso, what would encoding1 and encoding2 be called?\r\nMy googling says encoding2 are called umlaut characters but I don&#39;t know what encoding1 is called.\r\n\r\n\r\n\r\n","title":"Umlaut Characters: How do I convert “&#195;&lt;0x9c&gt;” to “&#220;” in Java?","body":"<p>I have a string that contains &quot;Ã&lt;0x9c&gt;&quot;.  It's not exactly those characters, the best way I can describe it is:</p>\n<ul>\n<li>Looks like &quot;Ã&quot; in Postgres DB / Datagrip Viewer.</li>\n<li>Looks like &quot;Ã&lt;0x9c&gt;&quot; when copied from Datagrip into Sublime Text.</li>\n</ul>\n<p>I have another program that does a String match and it expects this “Ü”.\nSo I assume &quot;Ã&lt;0x9c&gt;&quot; is equivalent to “Ü” in some form.</p>\n<p>My question is how do I convert &quot;Ã&lt;0x9c&gt;&quot; to “Ü” in Java for the set of these generic characters? I don't want to solve it for just this one character.</p>\n<p>So if &quot;Ã&lt;0x9c&gt;&quot; is encoding1 and “Ü” is encoding2.  How do I convert from encoding1 to encoding2.</p>\n<p>Also, what would encoding1 and encoding2 be called?\nMy googling says encoding2 are called umlaut characters but I don't know what encoding1 is called.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1547313,"reputation":82164,"user_id":1440565,"accept_rate":59,"display_name":"Code-Apprentice"},"score":3,"creation_date":1694803310,"post_id":77114702,"comment_id":135944130,"body_markdown":"One solution is to clone the object passed into the setter rather than just assigning directly.","body":"One solution is to clone the object passed into the setter rather than just assigning directly."},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":2,"creation_date":1694803469,"post_id":77114702,"comment_id":135944144,"body_markdown":"Or better, use a copy-constructor, since clone really should be avoided. But having said this, this sounds like an XY Problem. Why do you need this? Is the problem on the other end -- that you&#39;re not creating new instances of Car where you should be doing so?","body":"Or better, use a copy-constructor, since clone really should be avoided. But having said this, this sounds like an XY Problem. Why do you need this? Is the problem on the other end -- that you&#39;re not creating new instances of Car where you should be doing so?"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1694826050,"post_id":77114702,"comment_id":135946578,"body_markdown":"Many people have suggested, correctly, that you should make a copy or clone of the Car object, both in getCar and setCar.  This practice occurs quite frequently in Java SE classes, and is known as *defensive copying.*","body":"Many people have suggested, correctly, that you should make a copy or clone of the Car object, both in getCar and setCar.  This practice occurs quite frequently in Java SE classes, and is known as <i>defensive copying.</i>"}],"answers":[{"comments":[{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1694804139,"post_id":77114719,"comment_id":135944246,"body_markdown":"1) Cloning has issues, and should in general be avoided and certainly not recommended, but more importantly, 2) I still don&#39;t see how their concern is valid. If a Car object has been created, then changes to the state of that same Car object should be reflected in all references. If a new object is needed, then one should be created, but not in setter method. That could cause significant problems down the line.","body":"1) Cloning has issues, and should in general be avoided and certainly not recommended, but more importantly, 2) I still don&#39;t see how their concern is valid. If a Car object has been created, then changes to the state of that same Car object should be reflected in all references. If a new object is needed, then one should be created, but not in setter method. That could cause significant problems down the line."}],"tags":[],"owner":{"account_id":1547313,"reputation":82164,"user_id":1440565,"accept_rate":59,"display_name":"Code-Apprentice"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1694803431,"creation_date":1694803431,"answer_id":77114719,"question_id":77114702,"body_markdown":"Your concern is valid. Any changes made to the `Car` object that is passed to `Person.setCar()` will be reflected inside the `Person` instance since the `car` is a reference. One way to prevent this is to clone it in the setter:\r\n\r\n```\r\nthis.car = car.clone();\r\n```\r\n\r\nI think you will need to `implements Cloneable` on the `Car` class to allow this.","title":"How do I prevent attributes of a class that are objects from changing outside the class?","body":"<p>Your concern is valid. Any changes made to the <code>Car</code> object that is passed to <code>Person.setCar()</code> will be reflected inside the <code>Person</code> instance since the <code>car</code> is a reference. One way to prevent this is to clone it in the setter:</p>\n<pre><code>this.car = car.clone();\n</code></pre>\n<p>I think you will need to <code>implements Cloneable</code> on the <code>Car</code> class to allow this.</p>\n"},{"comments":[{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":2,"creation_date":1694806761,"post_id":77114811,"comment_id":135944628,"body_markdown":"This I like better. Make &quot;that which should not be changed&quot;™ unchangeable.","body":"This I like better. Make &quot;that which should not be changed&quot;™ unchangeable."}],"tags":[],"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1694804652,"creation_date":1694804652,"answer_id":77114811,"question_id":77114702,"body_markdown":"The Car could have a `mileage` which would be a mutable, shared field that others might update.\r\n\r\nHowever if Car is a snapshot, say for publishing for selling, you want the class Car to be **immutable**.\r\n\r\nYou could do that by making a _deep copy_ of Car and object fields recursively. Java knows the Object method `clone()` for that. But cloning is a bit deprecated, as it by-passes constructors.\r\n\r\nThere are immutable classes like String. These can be shared: assigned directly.\r\nA systematic immutable class is provided by the `record` class:\r\n\r\n    public record Point(int x, int y) { }\r\n\r\n    Point pt = new Point(3, 4);\r\n    int gridDistance = pt.x() + pt.y();\r\n\r\nFurthermore collections have often an `unmodifiable...` wrapper class in `Collections`.","title":"How do I prevent attributes of a class that are objects from changing outside the class?","body":"<p>The Car could have a <code>mileage</code> which would be a mutable, shared field that others might update.</p>\n<p>However if Car is a snapshot, say for publishing for selling, you want the class Car to be <strong>immutable</strong>.</p>\n<p>You could do that by making a <em>deep copy</em> of Car and object fields recursively. Java knows the Object method <code>clone()</code> for that. But cloning is a bit deprecated, as it by-passes constructors.</p>\n<p>There are immutable classes like String. These can be shared: assigned directly.\nA systematic immutable class is provided by the <code>record</code> class:</p>\n<pre><code>public record Point(int x, int y) { }\n\nPoint pt = new Point(3, 4);\nint gridDistance = pt.x() + pt.y();\n</code></pre>\n<p>Furthermore collections have often an <code>unmodifiable...</code> wrapper class in <code>Collections</code>.</p>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694806693,"creation_date":1694806693,"answer_id":77114966,"question_id":77114702,"body_markdown":"&gt; _&quot;... How can I prevent a copy being made to the attribute when passing the car through the setter, ensuring that the parameter passed externally when modified does not cause changes within the Person object?&quot;_\r\n\r\nOne approach is to create a _static_ method within the class, to define what gets copied.\r\n\r\n```java\r\npublic class Car {\r\n    private String brand;\r\n\r\n    //getters and setters for brand\r\n    \r\n    static Car copy(Car c) {\r\n        Car copy = new Car();\r\n        copy.brand = c.brand;\r\n        return copy;\r\n    }\r\n}\r\n```\r\n\r\nThen when passing it as a parameter, send the copy.\r\n\r\n```java\r\nCar c = new Car(&quot;brand&quot;);\r\nPerson p = new Person(&quot;name&quot;, Car.copy(c));\r\n```","title":"How do I prevent attributes of a class that are objects from changing outside the class?","body":"<blockquote>\n<p><em>&quot;... How can I prevent a copy being made to the attribute when passing the car through the setter, ensuring that the parameter passed externally when modified does not cause changes within the Person object?&quot;</em></p>\n</blockquote>\n<p>One approach is to create a <em>static</em> method within the class, to define what gets copied.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Car {\n    private String brand;\n\n    //getters and setters for brand\n    \n    static Car copy(Car c) {\n        Car copy = new Car();\n        copy.brand = c.brand;\n        return copy;\n    }\n}\n</code></pre>\n<p>Then when passing it as a parameter, send the copy.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Car c = new Car(&quot;brand&quot;);\nPerson p = new Person(&quot;name&quot;, Car.copy(c));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":216120,"reputation":49213,"user_id":471160,"accept_rate":90,"display_name":"marcinj"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694812613,"creation_date":1694812205,"answer_id":77115373,"question_id":77114702,"body_markdown":"When you pass an object to a method, you are actually passing the reference to that object and not the object itself. So - when you are setting the car attribute of the Person class, you are not creating a new copy of the Car object, you are just pointing to the existing one. \r\n\r\nYour Car class is actually quiet immutable now, unless you want to modify a Car instance by changing its brand? I suppose you will add more fields to your class, so if you want to ensure that changes to the Car object outside of the Person class don&#39;t affect the Car object inside the Person class, you can create a new copy of Car object and pass it to the setter method of Person instance. Here&#39;s how you can do it:\r\n\r\nadd constructor to Car which will copy previous instance of the Car object. Copy constructor is (almost) good idea because its in the Car class which knows best what to copy:\r\n\r\n    public class Car {\r\n    \tprivate String brand;\r\n    \tpublic Car(Car car) {\r\n    \t\tthis.brand = car.brand;\r\n    \t}\r\n    \r\n    \t//...\r\n    }\r\n\r\n    Parson p = new Person();\r\n    p.setCar(new Car(someCar)); // Setting someCar copy\r\n\r\nThis way, the Car object inside the Person class is a different object from the one passed to the setCar method, and changes to one won&#39;t affect the other. What you want here is a deep copy of the instance of Car type, so if you will ever add more complicated objects inside your Car class, then you will make sure they are also deep copied.\r\n\r\nFrom my perspective such deep copying of objects look bad in java, you can finally end up with some SO suggestions to use reflection for creating deep copies (I have seen such using gson lib). If your aim is to assign a new car to each person, then you may think of writing a factory class which will create new Car instances of specified parameters. Read more on Factory method pattern on wiki.","title":"How do I prevent attributes of a class that are objects from changing outside the class?","body":"<p>When you pass an object to a method, you are actually passing the reference to that object and not the object itself. So - when you are setting the car attribute of the Person class, you are not creating a new copy of the Car object, you are just pointing to the existing one.</p>\n<p>Your Car class is actually quiet immutable now, unless you want to modify a Car instance by changing its brand? I suppose you will add more fields to your class, so if you want to ensure that changes to the Car object outside of the Person class don't affect the Car object inside the Person class, you can create a new copy of Car object and pass it to the setter method of Person instance. Here's how you can do it:</p>\n<p>add constructor to Car which will copy previous instance of the Car object. Copy constructor is (almost) good idea because its in the Car class which knows best what to copy:</p>\n<pre><code>public class Car {\n    private String brand;\n    public Car(Car car) {\n        this.brand = car.brand;\n    }\n\n    //...\n}\n\nParson p = new Person();\np.setCar(new Car(someCar)); // Setting someCar copy\n</code></pre>\n<p>This way, the Car object inside the Person class is a different object from the one passed to the setCar method, and changes to one won't affect the other. What you want here is a deep copy of the instance of Car type, so if you will ever add more complicated objects inside your Car class, then you will make sure they are also deep copied.</p>\n<p>From my perspective such deep copying of objects look bad in java, you can finally end up with some SO suggestions to use reflection for creating deep copies (I have seen such using gson lib). If your aim is to assign a new car to each person, then you may think of writing a factory class which will create new Car instances of specified parameters. Read more on Factory method pattern on wiki.</p>\n"}],"owner":{"account_id":29455065,"reputation":27,"user_id":22571119,"display_name":"Rafael"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":69,"favorite_count":0,"down_vote_count":3,"up_vote_count":3,"answer_count":4,"score":0,"last_activity_date":1694812613,"creation_date":1694803209,"question_id":77114702,"body_markdown":"If I have a Person class that has an attribute of type Car, and I have a setter that passes the car to the attribute through a simple assignment, as follows:\r\n\r\nPerson.java\r\n```\r\npublic class Person{\r\n    private String name;\r\n    private Car car;\r\n\r\n    //getter and setter for name\r\n    //....\r\n    \r\n    public void getCar(){\r\n        return this.car;\r\n    }\r\n    public Car setCar(Car car){\r\n        this.car = car;\r\n    }\r\n}\r\n```\r\n\r\nCar.java\r\n```\r\npublic class Car {\r\n    private String brand;\r\n\r\n    //getters and setters for brand\r\n}\r\n```\r\n\r\n\r\n\r\nHow can I prevent a copy being made to the attribute when passing the car through the setter, ensuring that the parameter passed externally when modified does not cause changes within the Person object?","title":"How do I prevent attributes of a class that are objects from changing outside the class?","body":"<p>If I have a Person class that has an attribute of type Car, and I have a setter that passes the car to the attribute through a simple assignment, as follows:</p>\n<p>Person.java</p>\n<pre><code>public class Person{\n    private String name;\n    private Car car;\n\n    //getter and setter for name\n    //....\n    \n    public void getCar(){\n        return this.car;\n    }\n    public Car setCar(Car car){\n        this.car = car;\n    }\n}\n</code></pre>\n<p>Car.java</p>\n<pre><code>public class Car {\n    private String brand;\n\n    //getters and setters for brand\n}\n</code></pre>\n<p>How can I prevent a copy being made to the attribute when passing the car through the setter, ensuring that the parameter passed externally when modified does not cause changes within the Person object?</p>\n"},{"tags":["java","algorithm","machine-learning","grouping","unsupervised-learning"],"answers":[{"tags":[],"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1246224321,"creation_date":1246224321,"answer_id":1055823,"question_id":1055811,"body_markdown":"There&#39;s a very nice Python implementation of K-means clustering in [&quot;Programming Collective Intelligence&quot;][1].  I highly recommend it.\r\n\r\nI realize that you&#39;ll have to translate to Java, but it doesn&#39;t look to be too difficult.\r\n\r\n\r\n  [1]: http://www.amazon.com/Programming-Collective-Intelligence-Building-Applications/dp/0596529325/ref=sr_1_1?ie=UTF8&amp;s=books&amp;qid=1246224299&amp;sr=8-1","title":"K- Means algorithm","body":"<p>There's a very nice Python implementation of K-means clustering in <a href=\"https://rads.stackoverflow.com/amzn/click/com/0596529325\" rel=\"nofollow noreferrer\" rel=\"nofollow noreferrer\">\"Programming Collective Intelligence\"</a>.  I highly recommend it.</p>\n\n<p>I realize that you'll have to translate to Java, but it doesn't look to be too difficult.</p>\n"},{"tags":[],"owner":{"account_id":876830,"reputation":81,"user_id":129779,"display_name":"minoriole"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1246226661,"creation_date":1246226661,"answer_id":1055888,"question_id":1055811,"body_markdown":"Classification, Clustering and grouping are well developed areas of IR. There is a very good (Java) library/software (open source) [here][1] Called WEKA. There are several algorithms for clustering there. Although there is a learning curve, it might useful when you encounter harder problems. \r\n\r\n\r\n  [1]: http://www.cs.waikato.ac.nz/ml/weka/","title":"K- Means algorithm","body":"<p>Classification, Clustering and grouping are well developed areas of IR. There is a very good (Java) library/software (open source) <a href=\"http://www.cs.waikato.ac.nz/ml/weka/\" rel=\"nofollow noreferrer\">here</a> Called WEKA. There are several algorithms for clustering there. Although there is a learning curve, it might useful when you encounter harder problems. </p>\n"},{"comments":[{"owner":{"account_id":63627,"reputation":3895,"user_id":188264,"accept_rate":94,"display_name":"jutky"},"score":1,"creation_date":1391980693,"post_id":1060271,"comment_id":32747554,"body_markdown":"Currently, OpenCV officially supports Java. So, there is no need for hand-written JNI.","body":"Currently, OpenCV officially supports Java. So, there is no need for hand-written JNI."}],"tags":[],"owner":{"account_id":59464,"reputation":11815,"user_id":177931,"accept_rate":83,"display_name":"ldog"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1246430675,"creation_date":1246306464,"answer_id":1060271,"question_id":1055811,"body_markdown":"It seems everyone who posted forgot to mention the defacto image processing library: OpenCV http://sourceforge.net/projects/opencvlibrary/. You would have to write a JNI wrapper around the C OpenCV code to get KMeans to work but the added benefit would be \r\n\r\n&lt;ol&gt; &lt;li&gt;You would know that the KMeans algorithm is heavily optimized  \r\n\r\n &lt;li&gt;OpenCV makes use of your GPU extensively so it runs blazing fast&lt;/ol&gt;\r\n\r\nThe main draw back is that you would have to write a JNI wrapper. I once needed a template matching routine and was faced with many alternatives but I found OpenCV to be by far the best, even though I was forced to write a JNI wrapper for it.\r\n","title":"K- Means algorithm","body":"<p>It seems everyone who posted forgot to mention the defacto image processing library: OpenCV <a href=\"http://sourceforge.net/projects/opencvlibrary/\" rel=\"nofollow noreferrer\">http://sourceforge.net/projects/opencvlibrary/</a>. You would have to write a JNI wrapper around the C OpenCV code to get KMeans to work but the added benefit would be </p>\n\n<ol> <li>You would know that the KMeans algorithm is heavily optimized  \n\n <li>OpenCV makes use of your GPU extensively so it runs blazing fast</ol>\n\n<p>The main draw back is that you would have to write a JNI wrapper. I once needed a template matching routine and was faced with many alternatives but I found OpenCV to be by far the best, even though I was forced to write a JNI wrapper for it.</p>\n"},{"comments":[{"owner":{"account_id":59464,"reputation":11815,"user_id":177931,"accept_rate":83,"display_name":"ldog"},"score":4,"creation_date":1246430509,"post_id":1065580,"comment_id":879826,"body_markdown":"Using OpenCV for KMeans might be overkill, but I don&#39;t see how OpenCV is &quot;horribly&quot; written. It may not be as easy to use as matlab (matlab is proprietory, slow and meant to be an easy way to test out algorithms using the large amount of algorithms already available to you in matlab) but it is for sure way faster than matlab, simply by virtue of being coded in C.","body":"Using OpenCV for KMeans might be overkill, but I don&#39;t see how OpenCV is &quot;horribly&quot; written. It may not be as easy to use as matlab (matlab is proprietory, slow and meant to be an easy way to test out algorithms using the large amount of algorithms already available to you in matlab) but it is for sure way faster than matlab, simply by virtue of being coded in C."},{"owner":{"account_id":11413,"reputation":14801,"user_id":21981,"accept_rate":77,"display_name":"mmr"},"score":1,"creation_date":1301960889,"post_id":1065580,"comment_id":6304155,"body_markdown":"Matlab is slow if you don&#39;t code in it properly.  If you&#39;ve written a &#39;for&#39; loop in matlab, you&#39;re doing it wrong.","body":"Matlab is slow if you don&#39;t code in it properly.  If you&#39;ve written a &#39;for&#39; loop in matlab, you&#39;re doing it wrong."}],"tags":[],"owner":{"account_id":39325,"reputation":3457,"user_id":113344,"display_name":"Marcin"},"comment_count":2,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1246390724,"creation_date":1246390724,"answer_id":1065580,"question_id":1055811,"body_markdown":"OpenCV is one of the most horribly written libraries I&#39;ve ever had to use.\r\nOn the other hand, Matlab does it very neatly.\r\n\r\nIf you have to code it yourself, the algorithm is incredibly simple for how efficient it is. \r\n\r\n1.  Pick number of clusters (k)\r\n2.  Make k points (they&#39;re going to be the centroids)\r\n3.  Randomize all these points location \r\n4.  Calculate Euclidean distance from each point to all centroids\r\n5.  Assign &#39;membership&#39; of each point to the nearest centroid\r\n6.  Establish the new centroids by averageing locations of all points belonging to a given cluster\r\n7.  Goto 4 Until convergence is achieved, or changes made are irrelevant.","title":"K- Means algorithm","body":"<p>OpenCV is one of the most horribly written libraries I've ever had to use.\nOn the other hand, Matlab does it very neatly.</p>\n\n<p>If you have to code it yourself, the algorithm is incredibly simple for how efficient it is. </p>\n\n<ol>\n<li>Pick number of clusters (k)</li>\n<li>Make k points (they're going to be the centroids)</li>\n<li>Randomize all these points location </li>\n<li>Calculate Euclidean distance from each point to all centroids</li>\n<li>Assign 'membership' of each point to the nearest centroid</li>\n<li>Establish the new centroids by averageing locations of all points belonging to a given cluster</li>\n<li>Goto 4 Until convergence is achieved, or changes made are irrelevant.</li>\n</ol>\n"},{"comments":[{"owner":{"account_id":40038,"reputation":2551,"user_id":115820,"accept_rate":78,"display_name":"dedalo"},"score":2,"creation_date":1246443816,"post_id":1065614,"comment_id":880610,"body_markdown":"Hi elcuco,\n\nI have coded it myself, but wanted to crosscheck the initialization part. I wanted to see how others implementations had assigned initial clusters. I also think it&#39;s not a good idea using a code you don&#39;t have control over. I&#39;ll keep digging, thank you all!","body":"Hi elcuco,  I have coded it myself, but wanted to crosscheck the initialization part. I wanted to see how others implementations had assigned initial clusters. I also think it&#39;s not a good idea using a code you don&#39;t have control over. I&#39;ll keep digging, thank you all!"}],"tags":[],"owner":{"account_id":29207,"reputation":8998,"user_id":78712,"accept_rate":90,"display_name":"elcuco"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1255286763,"creation_date":1246391047,"answer_id":1065614,"question_id":1055811,"body_markdown":"Really, KMeans is a really easy algorithm. Any good reason why not hand coding it yourself? I did it in Qt and then ported the code to plain old STL, without too much problems.\r\n\r\nI am started to be a fan to Joel&#39;s idea: no external dependencies, so please feel free to tell me what&#39;s good about a large piece of software you don&#39;t control, and others on this question have already mentioned it&#39;s not a good piece of software/\r\n\r\nTalk is cheap, real man show their code to the world:\r\nhttp://github.com/elcuco/data_mining_demo\r\n\r\nI should clean the code a little to be more generic, and current version is not ported to STL, but it&#39;s a start!","title":"K- Means algorithm","body":"<p>Really, KMeans is a really easy algorithm. Any good reason why not hand coding it yourself? I did it in Qt and then ported the code to plain old STL, without too much problems.</p>\n\n<p>I am started to be a fan to Joel's idea: no external dependencies, so please feel free to tell me what's good about a large piece of software you don't control, and others on this question have already mentioned it's not a good piece of software/</p>\n\n<p>Talk is cheap, real man show their code to the world:\n<a href=\"http://github.com/elcuco/data_mining_demo\" rel=\"nofollow noreferrer\">http://github.com/elcuco/data_mining_demo</a></p>\n\n<p>I should clean the code a little to be more generic, and current version is not ported to STL, but it's a start!</p>\n"},{"comments":[{"owner":{"account_id":995810,"reputation":8236,"user_id":1011791,"accept_rate":86,"display_name":"Chthonic Project"},"score":3,"creation_date":1387754392,"post_id":13507365,"comment_id":31067881,"body_markdown":"I wouldn&#39;t use this package for clustering. The k-means implementation in Java-ML is ridiculously slow.","body":"I wouldn&#39;t use this package for clustering. The k-means implementation in Java-ML is ridiculously slow."}],"tags":[],"owner":{"account_id":185558,"reputation":7305,"user_id":422353,"display_name":"madth3"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1353567643,"creation_date":1353567643,"answer_id":13507365,"question_id":1055811,"body_markdown":"Very old question but I noticed there is no mention of the [Java Machine Learning Library][1] which has an implementation of [K-Means][2] and includes [some documentation][3] about it&#39;s usage.\r\n\r\nThe project is not very active but the last version is relatively recent (July 2012)\r\n\r\n\r\n  [1]: http://java-ml.sourceforge.net/\r\n  [2]: http://java-ml.sourceforge.net/api/0.1.7/net/sf/javaml/clustering/KMeans.html\r\n  [3]: http://java-ml.sourceforge.net/src/tutorials/clustering/TutorialClusterEvaluation.java","title":"K- Means algorithm","body":"<p>Very old question but I noticed there is no mention of the <a href=\"http://java-ml.sourceforge.net/\" rel=\"nofollow\">Java Machine Learning Library</a> which has an implementation of <a href=\"http://java-ml.sourceforge.net/api/0.1.7/net/sf/javaml/clustering/KMeans.html\" rel=\"nofollow\">K-Means</a> and includes <a href=\"http://java-ml.sourceforge.net/src/tutorials/clustering/TutorialClusterEvaluation.java\" rel=\"nofollow\">some documentation</a> about it's usage.</p>\n\n<p>The project is not very active but the last version is relatively recent (July 2012)</p>\n"},{"tags":[],"owner":{"account_id":1417218,"reputation":622,"user_id":3020390,"display_name":"shailendra pathak"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1385100159,"creation_date":1385100159,"answer_id":20138076,"question_id":1055811,"body_markdown":"    //Aim:To implement Kmeans clustering algorithm.\r\n    //Program\r\n    import java.util.*;\r\n    class k_means\r\n    {\r\n    static int count1,count2,count3;\r\n    static int d[];\r\n    static int k[][];\r\n    static int tempk[][];\r\n    static double m[];\r\n    static double diff[];\r\n    static int n,p;\r\n    \r\n    static int cal_diff(int a) // This method will determine the cluster in which an element go at a particular step.\r\n    {\r\n    int temp1=0;\r\n    for(int i=0;i&lt;p;++i)\r\n    {\r\n    if(a&gt;m[i])\r\n    diff[i]=a-m[i];\r\n    else\r\n    diff[i]=m[i]-a;\r\n    }\r\n    int val=0;\r\n    double temp=diff[0];\r\n    for(int i=0;i&lt;p;++i)\r\n    {\r\n    if(diff[i]&lt;temp)\r\n    {\r\n    temp=diff[i];\r\n    val=i;\r\n    }\r\n    }//end of for loop\r\n    return val;\r\n    }\r\n    \r\n    static void cal_mean() // This method will determine intermediate mean values\r\n    {\r\n    for(int i=0;i&lt;p;++i)\r\n    m[i]=0; // initializing means to 0\r\n    int cnt=0;\r\n    for(int i=0;i&lt;p;++i)\r\n    {\r\n    cnt=0;\r\n    for(int j=0;j&lt;n-1;++j)\r\n    {\r\n    if(k[i][j]!=-1)\r\n    {\r\n    m[i]+=k[i][j];\r\n    ++cnt;\r\n    }}\r\n    m[i]=m[i]/cnt;\r\n    }\r\n    }\r\n    \r\n    static int check1() // This checks if previous k ie. tempk and current k are same.Used as terminating case.\r\n    {\r\n    for(int i=0;i&lt;p;++i)\r\n    for(int j=0;j&lt;n;++j)\r\n    if(tempk[i][j]!=k[i][j])\r\n    {\r\n    return 0;\r\n    }\r\n    return 1;\r\n    }\r\n    \r\n    public static void main(String args[])\r\n    {\r\n    Scanner scr=new Scanner(System.in);\r\n    /* Accepting number of elements */\r\n    System.out.println(&quot;Enter the number of elements &quot;);\r\n    n=scr.nextInt();\r\n    d=new int[n];\r\n    /* Accepting elements */\r\n    System.out.println(&quot;Enter &quot;+n+&quot; elements: &quot;);\r\n    for(int i=0;i&lt;n;++i)\r\n    d[i]=scr.nextInt();\r\n    /* Accepting num of clusters */\r\n    System.out.println(&quot;Enter the number of clusters: &quot;);\r\n    p=scr.nextInt();\r\n    /* Initialising arrays */\r\n    k=new int[p][n];\r\n    tempk=new int[p][n];\r\n    m=new double[p];\r\n    diff=new double[p];\r\n    /* Initializing m */\r\n    for(int i=0;i&lt;p;++i)\r\n    m[i]=d[i];\r\n    \r\n    int temp=0;\r\n    int flag=0;\r\n    do\r\n    {\r\n    for(int i=0;i&lt;p;++i)\r\n    for(int j=0;j&lt;n;++j)\r\n    {\r\n    k[i][j]=-1;\r\n    }\r\n    for(int i=0;i&lt;n;++i) // for loop will cal cal_diff(int) for every element.\r\n    {\r\n    temp=cal_diff(d[i]);\r\n    if(temp==0)\r\n    k[temp][count1++]=d[i];\r\n    else\r\n    if(temp==1)\r\n    k[temp][count2++]=d[i];\r\n    else\r\n    if(temp==2)\r\n    k[temp][count3++]=d[i]; \r\n    }\r\n    cal_mean(); // call to method which will calculate mean at this step.\r\n    flag=check1(); // check if terminating condition is satisfied.\r\n    if(flag!=1)\r\n    /*Take backup of k in tempk so that you can check for equivalence in next step*/\r\n    for(int i=0;i&lt;p;++i)\r\n    for(int j=0;j&lt;n;++j)\r\n    tempk[i][j]=k[i][j];\r\n    \r\n    System.out.println(&quot;\\n\\nAt this step&quot;);\r\n    System.out.println(&quot;\\nValue of clusters&quot;);\r\n    for(int i=0;i&lt;p;++i)\r\n    {\r\n    System.out.print(&quot;K&quot;+(i+1)+&quot;{ &quot;);\r\n    for(int j=0;k[i][j]!=-1 &amp;&amp; j&lt;n-1;++j)\r\n    System.out.print(k[i][j]+&quot; &quot;);\r\n    System.out.println(&quot;}&quot;);\r\n    }//end of for loop\r\n    System.out.println(&quot;\\nValue of m &quot;);\r\n    for(int i=0;i&lt;p;++i)\r\n    System.out.print(&quot;m&quot;+(i+1)+&quot;=&quot;+m[i]+&quot;  &quot;);\r\n    \r\n    count1=0;count2=0;count3=0;\r\n    }\r\n    while(flag==0);\r\n    \r\n    System.out.println(&quot;\\n\\n\\nThe Final Clusters By Kmeans are as follows: &quot;);\r\n    for(int i=0;i&lt;p;++i)\r\n    {\r\n    System.out.print(&quot;K&quot;+(i+1)+&quot;{ &quot;);\r\n    for(int j=0;k[i][j]!=-1 &amp;&amp; j&lt;n-1;++j)\r\n    System.out.print(k[i][j]+&quot; &quot;);\r\n    System.out.println(&quot;}&quot;);\r\n    }\r\n    }\r\n    }\r\n    /*\r\n    Enter the number of elements\r\n    8\r\n    Enter 8 elements:\r\n    2 3 6 8 12 15 18 22\r\n    Enter the number of clusters:\r\n    3\r\n    \r\n    At this step\r\n    Value of clusters\r\n    K1{ 2 }\r\n    K2{ 3 }\r\n    K3{ 6 8 12 15 18 22 }\r\n    Value of m\r\n    m1=2.0  m2=3.0  m3=13.5\r\n    \r\n    At this step\r\n    Value of clusters\r\n    K1{ 2 }\r\n    K2{ 3 6 8 }\r\n    K3{ 12 15 18 22 }\r\n    Value of m\r\n    m1=2.0  m2=5.666666666666667  m3=16.75\r\n    \r\n    At this step\r\n    Value of clusters\r\n    K1{ 2 3 }\r\n    K2{ 6 8 }\r\n    K3{ 12 15 18 22 }\r\n    Value of m\r\n    m1=2.5  m2=7.0  m3=16.75\r\n    \r\n    At this step\r\n    Value of clusters\r\n    K1{ 2 3 }\r\n    K2{ 6 8 }\r\n    K3{ 12 15 18 22 }\r\n    Value of m\r\n    m1=2.5  m2=7.0  m3=16.75\r\n    \r\n    The Final Clusters By Kmeans are as follows:\r\n    K1{ 2 3 }\r\n    K2{ 6 8 }\r\n    K3{ 12 15 18 22 } */\r\n\r\n  \r\n","title":"K- Means algorithm","body":"<pre><code>//Aim:To implement Kmeans clustering algorithm.\n//Program\nimport java.util.*;\nclass k_means\n{\nstatic int count1,count2,count3;\nstatic int d[];\nstatic int k[][];\nstatic int tempk[][];\nstatic double m[];\nstatic double diff[];\nstatic int n,p;\n\nstatic int cal_diff(int a) // This method will determine the cluster in which an element go at a particular step.\n{\nint temp1=0;\nfor(int i=0;i&lt;p;++i)\n{\nif(a&gt;m[i])\ndiff[i]=a-m[i];\nelse\ndiff[i]=m[i]-a;\n}\nint val=0;\ndouble temp=diff[0];\nfor(int i=0;i&lt;p;++i)\n{\nif(diff[i]&lt;temp)\n{\ntemp=diff[i];\nval=i;\n}\n}//end of for loop\nreturn val;\n}\n\nstatic void cal_mean() // This method will determine intermediate mean values\n{\nfor(int i=0;i&lt;p;++i)\nm[i]=0; // initializing means to 0\nint cnt=0;\nfor(int i=0;i&lt;p;++i)\n{\ncnt=0;\nfor(int j=0;j&lt;n-1;++j)\n{\nif(k[i][j]!=-1)\n{\nm[i]+=k[i][j];\n++cnt;\n}}\nm[i]=m[i]/cnt;\n}\n}\n\nstatic int check1() // This checks if previous k ie. tempk and current k are same.Used as terminating case.\n{\nfor(int i=0;i&lt;p;++i)\nfor(int j=0;j&lt;n;++j)\nif(tempk[i][j]!=k[i][j])\n{\nreturn 0;\n}\nreturn 1;\n}\n\npublic static void main(String args[])\n{\nScanner scr=new Scanner(System.in);\n/* Accepting number of elements */\nSystem.out.println(\"Enter the number of elements \");\nn=scr.nextInt();\nd=new int[n];\n/* Accepting elements */\nSystem.out.println(\"Enter \"+n+\" elements: \");\nfor(int i=0;i&lt;n;++i)\nd[i]=scr.nextInt();\n/* Accepting num of clusters */\nSystem.out.println(\"Enter the number of clusters: \");\np=scr.nextInt();\n/* Initialising arrays */\nk=new int[p][n];\ntempk=new int[p][n];\nm=new double[p];\ndiff=new double[p];\n/* Initializing m */\nfor(int i=0;i&lt;p;++i)\nm[i]=d[i];\n\nint temp=0;\nint flag=0;\ndo\n{\nfor(int i=0;i&lt;p;++i)\nfor(int j=0;j&lt;n;++j)\n{\nk[i][j]=-1;\n}\nfor(int i=0;i&lt;n;++i) // for loop will cal cal_diff(int) for every element.\n{\ntemp=cal_diff(d[i]);\nif(temp==0)\nk[temp][count1++]=d[i];\nelse\nif(temp==1)\nk[temp][count2++]=d[i];\nelse\nif(temp==2)\nk[temp][count3++]=d[i]; \n}\ncal_mean(); // call to method which will calculate mean at this step.\nflag=check1(); // check if terminating condition is satisfied.\nif(flag!=1)\n/*Take backup of k in tempk so that you can check for equivalence in next step*/\nfor(int i=0;i&lt;p;++i)\nfor(int j=0;j&lt;n;++j)\ntempk[i][j]=k[i][j];\n\nSystem.out.println(\"\\n\\nAt this step\");\nSystem.out.println(\"\\nValue of clusters\");\nfor(int i=0;i&lt;p;++i)\n{\nSystem.out.print(\"K\"+(i+1)+\"{ \");\nfor(int j=0;k[i][j]!=-1 &amp;&amp; j&lt;n-1;++j)\nSystem.out.print(k[i][j]+\" \");\nSystem.out.println(\"}\");\n}//end of for loop\nSystem.out.println(\"\\nValue of m \");\nfor(int i=0;i&lt;p;++i)\nSystem.out.print(\"m\"+(i+1)+\"=\"+m[i]+\"  \");\n\ncount1=0;count2=0;count3=0;\n}\nwhile(flag==0);\n\nSystem.out.println(\"\\n\\n\\nThe Final Clusters By Kmeans are as follows: \");\nfor(int i=0;i&lt;p;++i)\n{\nSystem.out.print(\"K\"+(i+1)+\"{ \");\nfor(int j=0;k[i][j]!=-1 &amp;&amp; j&lt;n-1;++j)\nSystem.out.print(k[i][j]+\" \");\nSystem.out.println(\"}\");\n}\n}\n}\n/*\nEnter the number of elements\n8\nEnter 8 elements:\n2 3 6 8 12 15 18 22\nEnter the number of clusters:\n3\n\nAt this step\nValue of clusters\nK1{ 2 }\nK2{ 3 }\nK3{ 6 8 12 15 18 22 }\nValue of m\nm1=2.0  m2=3.0  m3=13.5\n\nAt this step\nValue of clusters\nK1{ 2 }\nK2{ 3 6 8 }\nK3{ 12 15 18 22 }\nValue of m\nm1=2.0  m2=5.666666666666667  m3=16.75\n\nAt this step\nValue of clusters\nK1{ 2 3 }\nK2{ 6 8 }\nK3{ 12 15 18 22 }\nValue of m\nm1=2.5  m2=7.0  m3=16.75\n\nAt this step\nValue of clusters\nK1{ 2 3 }\nK2{ 6 8 }\nK3{ 12 15 18 22 }\nValue of m\nm1=2.5  m2=7.0  m3=16.75\n\nThe Final Clusters By Kmeans are as follows:\nK1{ 2 3 }\nK2{ 6 8 }\nK3{ 12 15 18 22 } */\n</code></pre>\n"}],"owner":{"account_id":40038,"reputation":2551,"user_id":115820,"accept_rate":78,"display_name":"dedalo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":34781,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":7,"score":5,"last_activity_date":1694812600,"creation_date":1246224144,"question_id":1055811,"body_markdown":"I&#39;m trying to program a k-means algorithm in Java. I have calculated a number of arrays, each of them containing a number of coefficients. I need to use a k-means algorithm in order to group all this data. Do you know of any implementation of this algorithm?","title":"K- Means algorithm","body":"<p>I'm trying to program a k-means algorithm in Java. I have calculated a number of arrays, each of them containing a number of coefficients. I need to use a k-means algorithm in order to group all this data. Do you know of any implementation of this algorithm?</p>\n"},{"tags":["java","jsf","serialization","javabeans","redisson"],"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1694828992,"post_id":77105418,"comment_id":135946737,"body_markdown":"What on earth induced you to right-justify the stack trace? Please fix it.","body":"What on earth induced you to right-justify the stack trace? Please fix it."}],"answers":[{"comments":[{"owner":{"account_id":52822,"reputation":1089035,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"score":0,"creation_date":1694708488,"post_id":77106727,"comment_id":135930141,"body_markdown":"*&quot;I already check and my code doesn&#39;t have any sublist, so I was wondering how can I find the origin of the problem?&quot;* you&#39;re not answering that question. The exception itself was already answered several times here on stack overflow ([1](https://stackoverflow.com/q/40284977/), [2](https://stackoverflow.com/q/26568205/), [3](https://stackoverflow.com/q/11045850/)) but the current question isn&#39;t about that exception. The OP clearly seems to be already aware that it&#39;s caused by using a subList(). The OP merely wanted to know how to identify the origin of that subList() because he cannot find it.","body":"<i>&quot;I already check and my code doesn&#39;t have any sublist, so I was wondering how can I find the origin of the problem?&quot;</i> you&#39;re not answering that question. The exception itself was already answered several times here on stack overflow (<a href=\"https://stackoverflow.com/q/40284977/\">1</a>, <a href=\"https://stackoverflow.com/q/26568205/\">2</a>, <a href=\"https://stackoverflow.com/q/11045850/\">3</a>) but the current question isn&#39;t about that exception. The OP clearly seems to be already aware that it&#39;s caused by using a subList(). The OP merely wanted to know how to identify the origin of that subList() because he cannot find it."},{"owner":{"account_id":329138,"reputation":8059,"user_id":652497,"accept_rate":91,"display_name":"Jonathan S. Fisher"},"score":0,"creation_date":1694722036,"post_id":77106727,"comment_id":135932512,"body_markdown":"Correct, as I stated above, he needs to find usages including those that may be in frameworks or libraries.","body":"Correct, as I stated above, he needs to find usages including those that may be in frameworks or libraries."}],"tags":[],"owner":{"account_id":329138,"reputation":8059,"user_id":652497,"accept_rate":91,"display_name":"Jonathan S. Fisher"},"comment_count":2,"down_vote_count":1,"up_vote_count":0,"is_accepted":true,"score":-1,"last_activity_date":1694812510,"creation_date":1694708066,"answer_id":77106727,"question_id":77105418,"body_markdown":"Lists returned from `arrayList.subList()` are not `Serializable`. Search your codebase and make sure you and none of the frameworks or libaries you&#39;re using are invoking that method.\r\n\r\nTo find, use the &quot;find usages&quot; function in your IDE on the `subList()` element of `ArrayList`. Hopefully it&#39;s your code and not some third party code you will have to patch.\r\n\r\nTo fix, simply create a new serializable list from the result:\r\n\r\n`... = new ArrayList&lt;&gt;(myList.subList());`\r\n\r\nSource: https://glassonionblog.wordpress.com/2013/10/01/collections-sublist-not-serializable/\r\n\r\nEDIT:\r\n\r\nAnother way to help track down the sublist might be to take a heap dump and use Eclipse Memory Analyzer to find all instances of the `RandomAccessSubList` and see what objects are holding a reference to it. That&#39;ll help give you a clue to what piece of code is creating the sublist. In any case, the sublist is in an object being held by a sessionscoped or viewscoped bean.","title":"Find cause of NotSerializableException: java.util.ArrayList$SubList","body":"<p>Lists returned from <code>arrayList.subList()</code> are not <code>Serializable</code>. Search your codebase and make sure you and none of the frameworks or libaries you're using are invoking that method.</p>\n<p>To find, use the &quot;find usages&quot; function in your IDE on the <code>subList()</code> element of <code>ArrayList</code>. Hopefully it's your code and not some third party code you will have to patch.</p>\n<p>To fix, simply create a new serializable list from the result:</p>\n<p><code>... = new ArrayList&lt;&gt;(myList.subList());</code></p>\n<p>Source: <a href=\"https://glassonionblog.wordpress.com/2013/10/01/collections-sublist-not-serializable/\" rel=\"nofollow noreferrer\">https://glassonionblog.wordpress.com/2013/10/01/collections-sublist-not-serializable/</a></p>\n<p>EDIT:</p>\n<p>Another way to help track down the sublist might be to take a heap dump and use Eclipse Memory Analyzer to find all instances of the <code>RandomAccessSubList</code> and see what objects are holding a reference to it. That'll help give you a clue to what piece of code is creating the sublist. In any case, the sublist is in an object being held by a sessionscoped or viewscoped bean.</p>\n"}],"owner":{"account_id":16306907,"reputation":117,"user_id":11776660,"display_name":"dssof"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":65,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":77106727,"answer_count":1,"score":0,"last_activity_date":1694812510,"creation_date":1694698329,"question_id":77105418,"body_markdown":"I&#39;m using redisson to save sessions of my app. The app uses JSF 2.3.\r\nI&#39;m trying to find the cause of a NotSerializable Exception, but the app only logs redisson stack. Basically it doesn&#39;t point to the code that generates the sublist.\r\n\r\nI already check and my code doesn&#39;t have any sublist, so I was wondering how can I find the origin of the problem? \r\n\r\nThis is the log:\r\n\r\n    java.io.NotSerializableException: java.util.ArrayList$SubList\r\n                org.redisson.command.CommandAsyncService.encodeMapValue(CommandAsyncService.java:669)\r\n                                  org.redisson.RedissonObject.encodeMapValue(RedissonObject.java:351)\r\n                                         org.redisson.RedissonMap.encodeMapKeys(RedissonMap.java:1051)\r\n                                  org.redisson.RedissonMap.putAllOperationAsync(RedissonMap.java:775)\r\n                                           org.redisson.RedissonMap.putAllAsync(RedissonMap.java:716)\r\n                                                org.redisson.RedissonMap.putAll(RedissonMap.java:669)\r\n                                   org.redisson.tomcat.RedissonSession.save(RedissonSession.java:428)\r\n                    org.redisson.tomcat.RedissonSessionManager.store(RedissonSessionManager.java:419)\r\n                                         org.redisson.tomcat.UpdateValve.invoke(UpdateValve.java:74)\r\n               org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n                        org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)\r\n                        org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81)\r\n            org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:698)\r\n                    org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n                          org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:364)\r\n                           org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:624)\r\n                    org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n              org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:831)\r\n                   org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1650)\r\n                     org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\r\n             org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n            org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n                  org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n                                                                java.lang.Thread.run(Thread.java:748)\r\n    \r\n    caused by java.io.NotSerializableException: java.util.ArrayList$SubList\r\n                                 java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1184)\r\n                           java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1548)\r\n                              java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1509)\r\n                          java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1432)\r\n                                 java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1178)\r\n                                  java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:348)\r\n                                             java.util.HashMap.internalWriteEntries(HashMap.java:1793)\r\n                                                      java.util.HashMap.writeObject(HashMap.java:1363)\r\n                                    sun.reflect.GeneratedMethodAccessor239.invoke(Unknown Source)\r\n               sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n                                                     java.lang.reflect.Method.invoke(Method.java:498)\r\n                              java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:1155)\r\n                              java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1496)\r\n                          java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1432)\r\n                                 java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1178)\r\n                                  java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:348)\r\n                                 java.util.LinkedHashMap.internalWriteEntries(LinkedHashMap.java:333)\r\n                                                      java.util.HashMap.writeObject(HashMap.java:1363)\r\n                                    sun.reflect.GeneratedMethodAccessor239.invoke(Unknown Source)\r\n               sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n                                                     java.lang.reflect.Method.invoke(Method.java:498)\r\n                              java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:1155)\r\n                              java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1496)\r\n                          java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1432)\r\n                                 java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1178)\r\n                           java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1548)\r\n                           java.io.ObjectOutputStream.defaultWriteObject(ObjectOutputStream.java:441)\r\n                              java.util.Collections$SynchronizedMap.writeObject(Collections.java:2693)\r\n                                    sun.reflect.GeneratedMethodAccessor355.invoke(Unknown Source)\r\n               sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n                                                     java.lang.reflect.Method.invoke(Method.java:498)\r\n                              java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:1155)\r\n                              java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1496)\r\n                          java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1432)\r\n                                 java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1178)\r\n                                  java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:348)\r\n                          org.redisson.codec.SerializationCodec$2.encode(SerializationCodec.java:78)\r\n                org.redisson.command.CommandAsyncService.encodeMapValue(CommandAsyncService.java:667)\r\n                                  org.redisson.RedissonObject.encodeMapValue(RedissonObject.java:351)\r\n                                         org.redisson.RedissonMap.encodeMapKeys(RedissonMap.java:1051)\r\n                                  org.redisson.RedissonMap.putAllOperationAsync(RedissonMap.java:775)\r\n                                           org.redisson.RedissonMap.putAllAsync(RedissonMap.java:716)\r\n                                                org.redisson.RedissonMap.putAll(RedissonMap.java:669)\r\n                                   org.redisson.tomcat.RedissonSession.save(RedissonSession.java:428)\r\n                    org.redisson.tomcat.RedissonSessionManager.store(RedissonSessionManager.java:419)\r\n                                         org.redisson.tomcat.UpdateValve.invoke(UpdateValve.java:74)\r\n               org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n                        org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)\r\n                        org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81)\r\n            org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:698)\r\n                    org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n                          org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:364)\r\n                           org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:624)\r\n                    org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n              org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:831)\r\n                   org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1650)\r\n                     org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\r\n             org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n            org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n                  org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n                                                                java.lang.Thread.run(Thread.java:748)","title":"Find cause of NotSerializableException: java.util.ArrayList$SubList","body":"<p>I'm using redisson to save sessions of my app. The app uses JSF 2.3.\nI'm trying to find the cause of a NotSerializable Exception, but the app only logs redisson stack. Basically it doesn't point to the code that generates the sublist.</p>\n<p>I already check and my code doesn't have any sublist, so I was wondering how can I find the origin of the problem?</p>\n<p>This is the log:</p>\n<pre><code>java.io.NotSerializableException: java.util.ArrayList$SubList\n            org.redisson.command.CommandAsyncService.encodeMapValue(CommandAsyncService.java:669)\n                              org.redisson.RedissonObject.encodeMapValue(RedissonObject.java:351)\n                                     org.redisson.RedissonMap.encodeMapKeys(RedissonMap.java:1051)\n                              org.redisson.RedissonMap.putAllOperationAsync(RedissonMap.java:775)\n                                       org.redisson.RedissonMap.putAllAsync(RedissonMap.java:716)\n                                            org.redisson.RedissonMap.putAll(RedissonMap.java:669)\n                               org.redisson.tomcat.RedissonSession.save(RedissonSession.java:428)\n                org.redisson.tomcat.RedissonSessionManager.store(RedissonSessionManager.java:419)\n                                     org.redisson.tomcat.UpdateValve.invoke(UpdateValve.java:74)\n           org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\n                    org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)\n                    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81)\n        org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:698)\n                org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\n                      org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:364)\n                       org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:624)\n                org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\n          org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:831)\n               org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1650)\n                 org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\n         org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\n        org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\n              org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n                                                            java.lang.Thread.run(Thread.java:748)\n\ncaused by java.io.NotSerializableException: java.util.ArrayList$SubList\n                             java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1184)\n                       java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1548)\n                          java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1509)\n                      java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1432)\n                             java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1178)\n                              java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:348)\n                                         java.util.HashMap.internalWriteEntries(HashMap.java:1793)\n                                                  java.util.HashMap.writeObject(HashMap.java:1363)\n                                sun.reflect.GeneratedMethodAccessor239.invoke(Unknown Source)\n           sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n                                                 java.lang.reflect.Method.invoke(Method.java:498)\n                          java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:1155)\n                          java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1496)\n                      java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1432)\n                             java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1178)\n                              java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:348)\n                             java.util.LinkedHashMap.internalWriteEntries(LinkedHashMap.java:333)\n                                                  java.util.HashMap.writeObject(HashMap.java:1363)\n                                sun.reflect.GeneratedMethodAccessor239.invoke(Unknown Source)\n           sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n                                                 java.lang.reflect.Method.invoke(Method.java:498)\n                          java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:1155)\n                          java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1496)\n                      java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1432)\n                             java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1178)\n                       java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1548)\n                       java.io.ObjectOutputStream.defaultWriteObject(ObjectOutputStream.java:441)\n                          java.util.Collections$SynchronizedMap.writeObject(Collections.java:2693)\n                                sun.reflect.GeneratedMethodAccessor355.invoke(Unknown Source)\n           sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n                                                 java.lang.reflect.Method.invoke(Method.java:498)\n                          java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:1155)\n                          java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1496)\n                      java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1432)\n                             java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1178)\n                              java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:348)\n                      org.redisson.codec.SerializationCodec$2.encode(SerializationCodec.java:78)\n            org.redisson.command.CommandAsyncService.encodeMapValue(CommandAsyncService.java:667)\n                              org.redisson.RedissonObject.encodeMapValue(RedissonObject.java:351)\n                                     org.redisson.RedissonMap.encodeMapKeys(RedissonMap.java:1051)\n                              org.redisson.RedissonMap.putAllOperationAsync(RedissonMap.java:775)\n                                       org.redisson.RedissonMap.putAllAsync(RedissonMap.java:716)\n                                            org.redisson.RedissonMap.putAll(RedissonMap.java:669)\n                               org.redisson.tomcat.RedissonSession.save(RedissonSession.java:428)\n                org.redisson.tomcat.RedissonSessionManager.store(RedissonSessionManager.java:419)\n                                     org.redisson.tomcat.UpdateValve.invoke(UpdateValve.java:74)\n           org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\n                    org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)\n                    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81)\n        org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:698)\n                org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\n                      org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:364)\n                       org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:624)\n                org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\n          org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:831)\n               org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1650)\n                 org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\n         org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\n        org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\n              org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n                                                            java.lang.Thread.run(Thread.java:748)\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-webclient"],"answers":[{"comments":[{"owner":{"account_id":738442,"reputation":868,"user_id":871653,"accept_rate":90,"display_name":"sasynkamil"},"score":0,"creation_date":1694814049,"post_id":77115317,"comment_id":135945713,"body_markdown":"Great, thank you, working as expected, I just added to the exception handler .contentType(Optional.ofNullable(e.getHeaders().getContentType()).orElse(MediaType.TEXT_PLAIN))","body":"Great, thank you, working as expected, I just added to the exception handler .contentType(Optional.ofNullable(e.getHeaders().getContentTy&zwnj;&#8203;pe()).orElse(MediaTy&zwnj;&#8203;pe.TEXT_PLAIN))"}],"tags":[],"owner":{"account_id":16744354,"reputation":504,"user_id":12103109,"display_name":"CaptainAye"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1694811627,"creation_date":1694811251,"answer_id":77115317,"question_id":77114144,"body_markdown":"Your webClient code returns 200 because of the line `.onStatus(HttpStatus::isError, clientResponse -&gt; Mono.empty())`.\r\n\r\nIf you return `Mono.empty()` while handling the error status, it will suppress the error and proceed with the normal response, as described in the documentation of `onStatus()` method:\r\n\r\n&gt; \r\n&gt; To suppress the treatment of a status code as an error and process it as a normal response, return Mono.empty() from the function. The response will then propagate downstream to be processed.\r\n\r\nOn error response, WebClient throws `WebClientResponseException` by default. It contains all the required information, so in order to pass the error response through the proxy just create an exception handler as follows:\r\n\r\n    @ControllerAdvice\r\n    public class ErrorHandler {\r\n    \r\n        @ExceptionHandler(WebClientResponseException.class)\r\n        public ResponseEntity&lt;String&gt; handle(WebClientResponseException e) {\r\n           return ResponseEntity.status(e.getStatusCode().value()).body(e.getResponseBodyAsString());\r\n    \r\n        }\r\n    }\r\n\r\nMake sure to get remove your `onStatus()` call so that your call looks like that:\r\n\r\n    return webClient.post()\r\n            .uri(url)\r\n            .contentType(MediaType.APPLICATION_JSON)\r\n            .bodyValue(request)\r\n            .retrieve()\r\n            .bodyToMono(String.class)\r\n            .onErrorMap(WebClientRequestException.class, ex -&gt; new RestApiUnavailableException(ex,&quot;some msg&quot;))\r\n            .block();\r\n\r\nThat way, you will intercept the exception thrown by WebClient and pass the response with the appropriate status code and body.\r\n\r\nAs a side note, keep in mind that calling `block()` denies the benefits of reactive stack and is generally discouraged.","title":"Route error response and http status (4xx, 5xx) using Spring WebClient","body":"<p>Your webClient code returns 200 because of the line <code>.onStatus(HttpStatus::isError, clientResponse -&gt; Mono.empty())</code>.</p>\n<p>If you return <code>Mono.empty()</code> while handling the error status, it will suppress the error and proceed with the normal response, as described in the documentation of <code>onStatus()</code> method:</p>\n<blockquote>\n<p>To suppress the treatment of a status code as an error and process it as a normal response, return Mono.empty() from the function. The response will then propagate downstream to be processed.</p>\n</blockquote>\n<p>On error response, WebClient throws <code>WebClientResponseException</code> by default. It contains all the required information, so in order to pass the error response through the proxy just create an exception handler as follows:</p>\n<pre><code>@ControllerAdvice\npublic class ErrorHandler {\n\n    @ExceptionHandler(WebClientResponseException.class)\n    public ResponseEntity&lt;String&gt; handle(WebClientResponseException e) {\n       return ResponseEntity.status(e.getStatusCode().value()).body(e.getResponseBodyAsString());\n\n    }\n}\n</code></pre>\n<p>Make sure to get remove your <code>onStatus()</code> call so that your call looks like that:</p>\n<pre><code>return webClient.post()\n        .uri(url)\n        .contentType(MediaType.APPLICATION_JSON)\n        .bodyValue(request)\n        .retrieve()\n        .bodyToMono(String.class)\n        .onErrorMap(WebClientRequestException.class, ex -&gt; new RestApiUnavailableException(ex,&quot;some msg&quot;))\n        .block();\n</code></pre>\n<p>That way, you will intercept the exception thrown by WebClient and pass the response with the appropriate status code and body.</p>\n<p>As a side note, keep in mind that calling <code>block()</code> denies the benefits of reactive stack and is generally discouraged.</p>\n"}],"owner":{"account_id":738442,"reputation":868,"user_id":871653,"accept_rate":90,"display_name":"sasynkamil"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":249,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77115317,"answer_count":1,"score":1,"last_activity_date":1694811627,"creation_date":1694796809,"question_id":77114144,"body_markdown":"Looks like easy task and basic feature but I&#39;m not able to figure out how to solve this problem. I&#39;ve read multiple sources, tried multiple solutions, but no luck.\r\n\r\nI have two spring-boot rest apps let&#39;s name them: ProxyApp &amp; BusinessApp. ProxyApp is called by Angular frontend and contains Swagger annotations to generate TS/Angular client. BusinessApp has business logic and is returning OK response or ErrorResponse (used Spring @ControllerAdvice). I need to route both: body and also http status from BusinessApp via ProxyApp. But WebClient re-sets status (e.g. 400) coming from BusinessApp to 200.\r\n\r\n```java\r\n    @Operation(summary = &quot;Some desc&quot;)\r\n    @PostMapping(value = &quot;/&quot;, consumes = {MediaType.APPLICATION_JSON_VALUE}, produces = {MediaType.APPLICATION_JSON_VALUE})\r\n    @ApiResponse(responseCode = &quot;200&quot;, content = {\r\n            @Content(mediaType = &quot;application/json&quot;, schema = @Schema(implementation = User.class))\r\n    })\r\n    @ResponseStatus(HttpStatus.OK)\r\n    public String someMethod() {\r\n\r\n        // skipped\r\n\r\n        return webClient.post()\r\n                .uri(url)\r\n                .contentType(MediaType.APPLICATION_JSON)\r\n                .bodyValue(request)\r\n                .retrieve()\r\n                .onStatus(HttpStatus::isError, clientResponse -&gt; Mono.empty())\r\n                .bodyToMono(String.class)\r\n                .onErrorMap(WebClientRequestException.class, ex -&gt; new RestApiUnavailableException(ex,&quot;some msg&quot;))\r\n                .block();\r\n    }\r\n\r\n``` ","title":"Route error response and http status (4xx, 5xx) using Spring WebClient","body":"<p>Looks like easy task and basic feature but I'm not able to figure out how to solve this problem. I've read multiple sources, tried multiple solutions, but no luck.</p>\n<p>I have two spring-boot rest apps let's name them: ProxyApp &amp; BusinessApp. ProxyApp is called by Angular frontend and contains Swagger annotations to generate TS/Angular client. BusinessApp has business logic and is returning OK response or ErrorResponse (used Spring @ControllerAdvice). I need to route both: body and also http status from BusinessApp via ProxyApp. But WebClient re-sets status (e.g. 400) coming from BusinessApp to 200.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Operation(summary = &quot;Some desc&quot;)\n    @PostMapping(value = &quot;/&quot;, consumes = {MediaType.APPLICATION_JSON_VALUE}, produces = {MediaType.APPLICATION_JSON_VALUE})\n    @ApiResponse(responseCode = &quot;200&quot;, content = {\n            @Content(mediaType = &quot;application/json&quot;, schema = @Schema(implementation = User.class))\n    })\n    @ResponseStatus(HttpStatus.OK)\n    public String someMethod() {\n\n        // skipped\n\n        return webClient.post()\n                .uri(url)\n                .contentType(MediaType.APPLICATION_JSON)\n                .bodyValue(request)\n                .retrieve()\n                .onStatus(HttpStatus::isError, clientResponse -&gt; Mono.empty())\n                .bodyToMono(String.class)\n                .onErrorMap(WebClientRequestException.class, ex -&gt; new RestApiUnavailableException(ex,&quot;some msg&quot;))\n                .block();\n    }\n\n</code></pre>\n"},{"tags":["java","single-sign-on","keycloak","keycloak-services"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1695015442,"post_id":77115219,"comment_id":135962269,"body_markdown":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example).","body":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}],"owner":{"account_id":29455709,"reputation":1,"user_id":22571621,"display_name":"Kenan JB"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":104,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694810096,"creation_date":1694810096,"question_id":77115219,"body_markdown":"I&#39;m trying to implement a provider/cusotm endpoint in order to have the keycloak sso login feature among the keycloak realm apps without having to login via the keycloak login page,\r\n\r\nI followed an answer that I found here with almost the same question, I achieved getting the sso or login cookies but still the sso login not working (I&#39;m half sure that the server configurations are correct since the sso login works fine when I login via the keycloak login page)\r\n\r\nso I will share the custom provider that it is giving me the login cookies\r\n\r\n```\r\npackage com.custom_authinticator.keycloak;\r\n\r\nimport javax.ws.rs.GET;\r\nimport javax.ws.rs.OPTIONS;\r\nimport javax.ws.rs.Path;\r\nimport javax.ws.rs.Produces;\r\nimport javax.ws.rs.core.Context;\r\nimport javax.ws.rs.core.HttpHeaders;\r\nimport javax.ws.rs.core.Response;\r\nimport javax.ws.rs.core.UriInfo;\r\nimport javax.ws.rs.core.Response.ResponseBuilder;\r\nimport javax.ws.rs.core.Response.Status;\r\n\r\nimport org.jboss.resteasy.spi.HttpRequest;\r\nimport org.keycloak.authorization.util.Tokens;\r\nimport org.keycloak.common.ClientConnection;\r\nimport org.keycloak.events.Errors;\r\nimport org.keycloak.models.KeycloakSession;\r\nimport org.keycloak.models.RealmModel;\r\nimport org.keycloak.models.UserModel;\r\nimport org.keycloak.models.UserSessionModel;\r\nimport org.keycloak.protocol.LoginProtocol.Error;\r\nimport org.keycloak.representations.AccessToken;\r\nimport org.keycloak.services.ErrorResponseException;\r\nimport org.keycloak.services.managers.AppAuthManager;\r\nimport org.keycloak.services.managers.Auth;\r\nimport org.keycloak.services.managers.AuthenticationManager;\r\nimport org.keycloak.services.managers.AuthenticationManager.AuthResult;\r\nimport org.keycloak.services.resource.RealmResourceProvider;\r\nimport org.keycloak.services.resources.Cors;\r\nimport org.keycloak.sessions.AuthenticationSessionProvider;\r\nimport org.keycloak.utils.MediaType;\r\n\r\npublic class CookiesProvider implements RealmResourceProvider {\r\n\r\n    private KeycloakSession keycloakSession;\r\n\r\n    public CookiesProvider(KeycloakSession session) {\r\n        this.keycloakSession = session;\r\n    }\r\n\r\n    @GET\r\n    @Produces(MediaType.APPLICATION_JSON)\r\n    @Path(&quot;validate&quot;)\r\n    public Response sso(@Context final HttpRequest request) {\r\n        try {\r\n            // get token and validate it\r\n            System.out.println(&quot;[+] from the execution of the custom provider&quot;);\r\n            final HttpHeaders headers = request.getHttpHeaders();\r\n            final String authorization = headers.getHeaderString(HttpHeaders.AUTHORIZATION);\r\n            if (authorization == null) {\r\n                System.out.println(&quot;[!] did not find token in authorization it is null!&quot;);\r\n                throw new ErrorResponseException(Errors.INVALID_REQUEST, &quot;Invalid access token&quot;, Status.BAD_REQUEST);\r\n            }\r\n            System.out.println(&quot;[+] authorization &quot; + authorization);\r\n            final String[] value = authorization.split(&quot; &quot;);\r\n            final String accessToken = value[1];\r\n            final AccessToken token = Tokens.getAccessToken(accessToken, keycloakSession);\r\n\r\n            if (token == null) {\r\n                throw new ErrorResponseException(Errors.INVALID_TOKEN, &quot;Invalid access token&quot;, Status.UNAUTHORIZED);\r\n                // return Response.status(Status.BAD_REQUEST).build();\r\n            }\r\n\r\n            // retrieve data\r\n            final RealmModel realm = keycloakSession.getContext().getRealm();\r\n            final UriInfo uriInfo = keycloakSession.getContext().getUri();\r\n            final ClientConnection clientConnection = keycloakSession.getContext().getConnection();\r\n\r\n            final UserModel user = keycloakSession.users().getUserById(token.getSubject(), realm);\r\n\r\n            final UserSessionModel userSession = keycloakSession.sessions().getUserSession(realm,\r\n                    token.getSessionState());\r\n\r\n            \r\n            AuthenticationManager.createLoginCookie(keycloakSession, realm, user, userSession, uriInfo,\r\n                    clientConnection);\r\n            \r\n            ResponseBuilder responseBuilder = Response.status(Status.OK);\r\n            responseBuilder.entity(&quot;Authentication successful&quot;);\r\n            // return responseBuilder.build();\r\n\r\n            System.out.println(&quot;[+] everything fine &quot;);\r\n            System.out.println(&quot;[+] finishing the request &quot; + request.getHttpHeaders().toString());\r\n            return Cors.add(request, responseBuilder)\r\n                    .auth()\r\n                    .preflight()\r\n                    .allowedMethods(&quot;GET&quot;, &quot;OPTIONS&quot;)\r\n                    .allowedOrigins(&quot;https://eduflix3.krugerschool.edu.ec&quot;)\r\n                    .build();\r\n\r\n        } catch (Exception exception) {\r\n            exception.printStackTrace();\r\n            System.out.println(&quot;an error ocurred sending an empty response &quot; + exception.getMessage());\r\n            return Response.noContent().build();\r\n        }\r\n\r\n    }\r\n\r\n    @OPTIONS\r\n    @Produces(MediaType.APPLICATION_JSON)\r\n    @Path(&quot;validate&quot;)\r\n    public Response preflight(@Context final HttpRequest request) {\r\n        System.out.println(&quot;[+] preflight request is being processing &quot; + request.getHttpHeaders());\r\n        return Cors.add(request, Response.ok(&quot;&quot;, MediaType.APPLICATION_JSON))\r\n                .auth()\r\n                .preflight()\r\n                .allowedMethods(&quot;GET&quot;, &quot;OPTIONS&quot;)\r\n                .allowedOrigins(&quot;https://eduflix3.krugerschool.edu.ec&quot;)\r\n                .build();\r\n    }\r\n\r\n    @Override\r\n    public void close() {\r\n\r\n    }\r\n\r\n    @Override\r\n    public Object getResource() {\r\n        return this;\r\n    }\r\n}\r\n\r\n```\r\n\r\nSo as I mention I&#39;m getting the 4 cookies in the response as headers, but what should I do next, why it is not working do I have to do any additional step that I&#39;m missing?\r\n\r\nthe desired behavior is logging into the app A with credentials, then have the ability to login into app B without credentials SSO.\r\n\r\nboth apps are configured correctly since the behavior is flowing correctly when logging via the keycloak login page.\r\n\r\nthank you in advanced.\r\n\r\nand I&#39;m sorry if it is a basic question but I&#39;m new to the keycloak world.\r\n\r\n\r\nI&#39;ve tried to implement the mentioned provider above in order to active the sso login, what I expected to happen was logging in the app A get the sso cookies through the cookies-provider and sign in the app B with the sso.\r\nwhat I got was the cookies in the response without activating the sso login.","title":"How to implement/do the keycloak sso login in a custom provider/endpoint","body":"<p>I'm trying to implement a provider/cusotm endpoint in order to have the keycloak sso login feature among the keycloak realm apps without having to login via the keycloak login page,</p>\n<p>I followed an answer that I found here with almost the same question, I achieved getting the sso or login cookies but still the sso login not working (I'm half sure that the server configurations are correct since the sso login works fine when I login via the keycloak login page)</p>\n<p>so I will share the custom provider that it is giving me the login cookies</p>\n<pre><code>package com.custom_authinticator.keycloak;\n\nimport javax.ws.rs.GET;\nimport javax.ws.rs.OPTIONS;\nimport javax.ws.rs.Path;\nimport javax.ws.rs.Produces;\nimport javax.ws.rs.core.Context;\nimport javax.ws.rs.core.HttpHeaders;\nimport javax.ws.rs.core.Response;\nimport javax.ws.rs.core.UriInfo;\nimport javax.ws.rs.core.Response.ResponseBuilder;\nimport javax.ws.rs.core.Response.Status;\n\nimport org.jboss.resteasy.spi.HttpRequest;\nimport org.keycloak.authorization.util.Tokens;\nimport org.keycloak.common.ClientConnection;\nimport org.keycloak.events.Errors;\nimport org.keycloak.models.KeycloakSession;\nimport org.keycloak.models.RealmModel;\nimport org.keycloak.models.UserModel;\nimport org.keycloak.models.UserSessionModel;\nimport org.keycloak.protocol.LoginProtocol.Error;\nimport org.keycloak.representations.AccessToken;\nimport org.keycloak.services.ErrorResponseException;\nimport org.keycloak.services.managers.AppAuthManager;\nimport org.keycloak.services.managers.Auth;\nimport org.keycloak.services.managers.AuthenticationManager;\nimport org.keycloak.services.managers.AuthenticationManager.AuthResult;\nimport org.keycloak.services.resource.RealmResourceProvider;\nimport org.keycloak.services.resources.Cors;\nimport org.keycloak.sessions.AuthenticationSessionProvider;\nimport org.keycloak.utils.MediaType;\n\npublic class CookiesProvider implements RealmResourceProvider {\n\n    private KeycloakSession keycloakSession;\n\n    public CookiesProvider(KeycloakSession session) {\n        this.keycloakSession = session;\n    }\n\n    @GET\n    @Produces(MediaType.APPLICATION_JSON)\n    @Path(&quot;validate&quot;)\n    public Response sso(@Context final HttpRequest request) {\n        try {\n            // get token and validate it\n            System.out.println(&quot;[+] from the execution of the custom provider&quot;);\n            final HttpHeaders headers = request.getHttpHeaders();\n            final String authorization = headers.getHeaderString(HttpHeaders.AUTHORIZATION);\n            if (authorization == null) {\n                System.out.println(&quot;[!] did not find token in authorization it is null!&quot;);\n                throw new ErrorResponseException(Errors.INVALID_REQUEST, &quot;Invalid access token&quot;, Status.BAD_REQUEST);\n            }\n            System.out.println(&quot;[+] authorization &quot; + authorization);\n            final String[] value = authorization.split(&quot; &quot;);\n            final String accessToken = value[1];\n            final AccessToken token = Tokens.getAccessToken(accessToken, keycloakSession);\n\n            if (token == null) {\n                throw new ErrorResponseException(Errors.INVALID_TOKEN, &quot;Invalid access token&quot;, Status.UNAUTHORIZED);\n                // return Response.status(Status.BAD_REQUEST).build();\n            }\n\n            // retrieve data\n            final RealmModel realm = keycloakSession.getContext().getRealm();\n            final UriInfo uriInfo = keycloakSession.getContext().getUri();\n            final ClientConnection clientConnection = keycloakSession.getContext().getConnection();\n\n            final UserModel user = keycloakSession.users().getUserById(token.getSubject(), realm);\n\n            final UserSessionModel userSession = keycloakSession.sessions().getUserSession(realm,\n                    token.getSessionState());\n\n            \n            AuthenticationManager.createLoginCookie(keycloakSession, realm, user, userSession, uriInfo,\n                    clientConnection);\n            \n            ResponseBuilder responseBuilder = Response.status(Status.OK);\n            responseBuilder.entity(&quot;Authentication successful&quot;);\n            // return responseBuilder.build();\n\n            System.out.println(&quot;[+] everything fine &quot;);\n            System.out.println(&quot;[+] finishing the request &quot; + request.getHttpHeaders().toString());\n            return Cors.add(request, responseBuilder)\n                    .auth()\n                    .preflight()\n                    .allowedMethods(&quot;GET&quot;, &quot;OPTIONS&quot;)\n                    .allowedOrigins(&quot;https://eduflix3.krugerschool.edu.ec&quot;)\n                    .build();\n\n        } catch (Exception exception) {\n            exception.printStackTrace();\n            System.out.println(&quot;an error ocurred sending an empty response &quot; + exception.getMessage());\n            return Response.noContent().build();\n        }\n\n    }\n\n    @OPTIONS\n    @Produces(MediaType.APPLICATION_JSON)\n    @Path(&quot;validate&quot;)\n    public Response preflight(@Context final HttpRequest request) {\n        System.out.println(&quot;[+] preflight request is being processing &quot; + request.getHttpHeaders());\n        return Cors.add(request, Response.ok(&quot;&quot;, MediaType.APPLICATION_JSON))\n                .auth()\n                .preflight()\n                .allowedMethods(&quot;GET&quot;, &quot;OPTIONS&quot;)\n                .allowedOrigins(&quot;https://eduflix3.krugerschool.edu.ec&quot;)\n                .build();\n    }\n\n    @Override\n    public void close() {\n\n    }\n\n    @Override\n    public Object getResource() {\n        return this;\n    }\n}\n\n</code></pre>\n<p>So as I mention I'm getting the 4 cookies in the response as headers, but what should I do next, why it is not working do I have to do any additional step that I'm missing?</p>\n<p>the desired behavior is logging into the app A with credentials, then have the ability to login into app B without credentials SSO.</p>\n<p>both apps are configured correctly since the behavior is flowing correctly when logging via the keycloak login page.</p>\n<p>thank you in advanced.</p>\n<p>and I'm sorry if it is a basic question but I'm new to the keycloak world.</p>\n<p>I've tried to implement the mentioned provider above in order to active the sso login, what I expected to happen was logging in the app A get the sso cookies through the cookies-provider and sign in the app B with the sso.\nwhat I got was the cookies in the response without activating the sso login.</p>\n"},{"tags":["java","intellij-idea"],"comments":[{"owner":{"account_id":2843847,"reputation":55833,"user_id":2442804,"accept_rate":80,"display_name":"luk2302"},"score":0,"creation_date":1665145666,"post_id":73987140,"comment_id":130637203,"body_markdown":"Does the syntax highlighting work? Does IntelliJ understand this is Java code? Do you have Java installed and does IntelliJ know where that is?","body":"Does the syntax highlighting work? Does IntelliJ understand this is Java code? Do you have Java installed and does IntelliJ know where that is?"},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1665145742,"post_id":73987140,"comment_id":130637232,"body_markdown":"Does this help? https://www.jetbrains.com/help/idea/auto-completing-code.html","body":"Does this help? <a href=\"https://www.jetbrains.com/help/idea/auto-completing-code.html\" rel=\"nofollow noreferrer\">jetbrains.com/help/idea/auto-completing-code.html</a>"},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1665145793,"post_id":73987140,"comment_id":130637252,"body_markdown":"Please share an image of your intellij project. You are sure that the class is marked as java source","body":"Please share an image of your intellij project. You are sure that the class is marked as java source"},{"owner":{"account_id":17314742,"reputation":11,"user_id":12541500,"display_name":"Maria"},"score":0,"creation_date":1665146643,"post_id":73987140,"comment_id":130637553,"body_markdown":"@Sotirios Delimanolis I suppose Java is set as follow","body":"@Sotirios Delimanolis I suppose Java is set as follow"},{"owner":{"account_id":3538058,"reputation":5428,"user_id":2960034,"display_name":"y.bedrov"},"score":0,"creation_date":1665153647,"post_id":73987140,"comment_id":130640066,"body_markdown":"Have you tried to run &quot;File | Invalidate Caches&quot;?","body":"Have you tried to run &quot;File | Invalidate Caches&quot;?"}],"answers":[{"tags":[],"owner":{"account_id":2596883,"reputation":1,"user_id":2250360,"display_name":"MarkGlez"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694809840,"creation_date":1694809726,"answer_id":77115191,"question_id":73987140,"body_markdown":"You need to configure the JavaScript target to at least  ES2016. For that you need to set this parameter in TypeScript  configuration :\r\n\r\n    &quot;target&quot;: &quot;es2016&quot;,\r\n\r\nin the file tsconfig.json, if you don&#39;t have it you need to generate it with:\r\n\r\ntsc --init\r\n\r\nthis is in the root of your project\r\n\r\n","title":"IntelliJ does not show all the method for String Class","body":"<p>You need to configure the JavaScript target to at least  ES2016. For that you need to set this parameter in TypeScript  configuration :</p>\n<pre><code>&quot;target&quot;: &quot;es2016&quot;,\n</code></pre>\n<p>in the file tsconfig.json, if you don't have it you need to generate it with:</p>\n<p>tsc --init</p>\n<p>this is in the root of your project</p>\n"}],"owner":{"account_id":17314742,"reputation":11,"user_id":12541500,"display_name":"Maria"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":196,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694809840,"creation_date":1665145536,"question_id":73987140,"body_markdown":"I have created a maven project Quickstart, I defined a \r\n```\r\nString as = &quot;hello&quot;;\r\n```\r\nWhen I try to see methods for &quot;as&quot;, it shows nothing in suggestions i.e. \r\n```\r\nas.length().\r\n\r\n```\r\nit shows nothing in suggestions, Same for\r\n```\r\nDesiredCapabilities cap  = new DesiredCapabilities();\r\n```\r\ncap does not find \r\n```\r\nsetCapability(&quot;&quot;,&quot;&quot;)\r\n```\r\nI have tried to fix it but cant find a solution,, I tried mvn clean compile, mvn clean install, and many other things, I am using *IntelliJ IDEA 2022.2.2* .\r\n\r\nI tried with both **Community** as well as **Ultimate** but no luck.\r\n\r\nThis is snapshot\r\n[![Java set][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/xcaqV.png\r\n\r\nAny help will be appreciated.\r\n\r\n\r\n ","title":"IntelliJ does not show all the method for String Class","body":"<p>I have created a maven project Quickstart, I defined a</p>\n<pre><code>String as = &quot;hello&quot;;\n</code></pre>\n<p>When I try to see methods for &quot;as&quot;, it shows nothing in suggestions i.e.</p>\n<pre><code>as.length().\n\n</code></pre>\n<p>it shows nothing in suggestions, Same for</p>\n<pre><code>DesiredCapabilities cap  = new DesiredCapabilities();\n</code></pre>\n<p>cap does not find</p>\n<pre><code>setCapability(&quot;&quot;,&quot;&quot;)\n</code></pre>\n<p>I have tried to fix it but cant find a solution,, I tried mvn clean compile, mvn clean install, and many other things, I am using <em>IntelliJ IDEA 2022.2.2</em> .</p>\n<p>I tried with both <strong>Community</strong> as well as <strong>Ultimate</strong> but no luck.</p>\n<p>This is snapshot\n<a href=\"https://i.stack.imgur.com/xcaqV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xcaqV.png\" alt=\"Java set\" /></a></p>\n<p>Any help will be appreciated.</p>\n"},{"tags":["java","string","list"],"answers":[{"comments":[{"owner":{"account_id":3104,"reputation":5836,"user_id":4406,"accept_rate":59,"display_name":"Jagmal"},"score":0,"creation_date":1234018681,"post_id":523881,"comment_id":337178,"body_markdown":"The extra String manipulation you are talking about is creating subString at the end, right?","body":"The extra String manipulation you are talking about is creating subString at the end, right?"},{"owner":{"account_id":13299,"reputation":30181,"user_id":26620,"accept_rate":83,"display_name":"Kevin"},"score":0,"creation_date":1234018864,"post_id":523881,"comment_id":337184,"body_markdown":"@Jagmal, yes.  If this code gets run a lot, then you should profile to see if its a problem for you.  Otherwise you should be OK.  One thing to keep in mind is that the format of the internal toString() might change in a future JDK version.","body":"@Jagmal, yes.  If this code gets run a lot, then you should profile to see if its a problem for you.  Otherwise you should be OK.  One thing to keep in mind is that the format of the internal toString() might change in a future JDK version."},{"owner":{"account_id":3104,"reputation":5836,"user_id":4406,"accept_rate":59,"display_name":"Jagmal"},"score":0,"creation_date":1234019027,"post_id":523881,"comment_id":337187,"body_markdown":"@Kevin: Yes, implementation of toString changing in future JDK version sound good enough reason for not doing it, I suppose. :)","body":"@Kevin: Yes, implementation of toString changing in future JDK version sound good enough reason for not doing it, I suppose. :)"},{"owner":{"account_id":24601,"reputation":1741,"user_id":62672,"accept_rate":88,"display_name":"LicenseQ"},"score":0,"creation_date":1234059096,"post_id":523881,"comment_id":338208,"body_markdown":"@Jagmal: subString is really hurting you. If your listString takes n bytes, then subString temporary adds another n-4 bytes to the heap. By using StringBuilder you will receive your n-4 from &quot;first try&quot;","body":"@Jagmal: subString is really hurting you. If your listString takes n bytes, then subString temporary adds another n-4 bytes to the heap. By using StringBuilder you will receive your n-4 from &quot;first try&quot;"},{"owner":{"account_id":76594,"reputation":5792,"user_id":219155,"accept_rate":80,"display_name":"Nate C-K"},"score":0,"creation_date":1342108085,"post_id":523881,"comment_id":15119666,"body_markdown":"@LicenseQ: I don&#39;t know if this statement was correct at the time you wrote it, but it&#39;s not correct for any recent release of Java. The implementation of String.substring is smarter than that: it does not copy the character buffer of the original string, it simply creates a new String object pointing to the same buffer and uses a nonzero &quot;offset&quot; field to indicate that the string doesn&#39;t start from the beginning of the buffer. Substring allocates a String object containing three ints (count, hash and offset) and a reference to the pre-existing buffer, nothing more.","body":"@LicenseQ: I don&#39;t know if this statement was correct at the time you wrote it, but it&#39;s not correct for any recent release of Java. The implementation of String.substring is smarter than that: it does not copy the character buffer of the original string, it simply creates a new String object pointing to the same buffer and uses a nonzero &quot;offset&quot; field to indicate that the string doesn&#39;t start from the beginning of the buffer. Substring allocates a String object containing three ints (count, hash and offset) and a reference to the pre-existing buffer, nothing more."}],"tags":[],"owner":{"account_id":13299,"reputation":30181,"user_id":26620,"accept_rate":83,"display_name":"Kevin"},"comment_count":5,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1234018611,"creation_date":1234018611,"answer_id":523881,"question_id":523871,"body_markdown":"&gt; I somehow found this to be neater than\r\n&gt; using the StringBuilder/StringBuffer\r\n&gt; approach.\r\n\r\nI guess it depends on what approach you took.  \r\n\r\nThe AbstractCollection#toString() method simply iterates over all the elements and appends them to a StringBuilder.  So your method may be saving a few lines of code but at the cost of extra String manipulation.  Whether that tradeoff is a good one is up to you.","title":"Best way to concatenate List of String objects?","body":"<blockquote>\n  <p>I somehow found this to be neater than\n  using the StringBuilder/StringBuffer\n  approach.</p>\n</blockquote>\n\n<p>I guess it depends on what approach you took.  </p>\n\n<p>The AbstractCollection#toString() method simply iterates over all the elements and appends them to a StringBuilder.  So your method may be saving a few lines of code but at the cost of extra String manipulation.  Whether that tradeoff is a good one is up to you.</p>\n"},{"comments":[{"owner":{"account_id":3104,"reputation":5836,"user_id":4406,"accept_rate":59,"display_name":"Jagmal"},"score":0,"creation_date":1234018906,"post_id":523892,"comment_id":337185,"body_markdown":"Can you please explain &quot;the Arraylists reallocation of memory might be a bit slower than StringBuilder.&quot;","body":"Can you please explain &quot;the Arraylists reallocation of memory might be a bit slower than StringBuilder.&quot;"},{"owner":{"account_id":2673,"reputation":2199,"user_id":3748,"display_name":"georg"},"score":0,"creation_date":1234019181,"post_id":523892,"comment_id":337189,"body_markdown":"Arraylist is built on standard arrays and these requires you to set an size of the array(like `int[] a = new int[10];`). This is what the ArrayList is doing for you and as you put in new elements the ArrayList will have to make a larger array and copy all the elements over to the new one.","body":"Arraylist is built on standard arrays and these requires you to set an size of the array(like <code>int[] a = new int[10];</code>). This is what the ArrayList is doing for you and as you put in new elements the ArrayList will have to make a larger array and copy all the elements over to the new one."}],"tags":[],"owner":{"account_id":2673,"reputation":2199,"user_id":3748,"display_name":"georg"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1234018772,"creation_date":1234018772,"answer_id":523892,"question_id":523871,"body_markdown":"Depending on the need for performance and amount of elements to be added, this might be an ok solution. If the amount of elements are high, the `Arraylist`s reallocation of memory might be a bit slower than `StringBuilder`.","title":"Best way to concatenate List of String objects?","body":"<p>Depending on the need for performance and amount of elements to be added, this might be an ok solution. If the amount of elements are high, the <code>Arraylist</code>s reallocation of memory might be a bit slower than <code>StringBuilder</code>.</p>\n"},{"comments":[{"owner":{"account_id":30050,"reputation":2011,"user_id":81668,"accept_rate":100,"display_name":"Matthieu BROUILLARD"},"score":1,"creation_date":1238699117,"post_id":523907,"comment_id":523452,"body_markdown":"I hope you did benchmarks to confirm that your implementation is better because it not really cleaner than the toString implementation of AbstractCollection. Reader has to really focus on your implementation to understand something while the other is really easy to read.","body":"I hope you did benchmarks to confirm that your implementation is better because it not really cleaner than the toString implementation of AbstractCollection. Reader has to really focus on your implementation to understand something while the other is really easy to read."}],"tags":[],"owner":{"account_id":20189,"reputation":166057,"user_id":48015,"accept_rate":80,"display_name":"Christoph"},"comment_count":1,"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1234031949,"creation_date":1234019347,"answer_id":523907,"question_id":523871,"body_markdown":"`ArrayList` inherits its `toString()`-method from [`AbstractCollection`](https://openjdk.dev.java.net/source/browse/openjdk/jdk/trunk/jdk/src/share/classes/java/util/AbstractCollection.java?rev=257&amp;view=markup), ie:\r\n\r\n    public String toString() {\r\n        Iterator&lt;E&gt; i = iterator();\r\n        if (! i.hasNext())\r\n            return &quot;[]&quot;;\r\n\r\n        StringBuilder sb = new StringBuilder();\r\n        sb.append(&#39;[&#39;);\r\n        for (;;) {\r\n            E e = i.next();\r\n            sb.append(e == this ? &quot;(this Collection)&quot; : e);\r\n            if (! i.hasNext())\r\n                return sb.append(&#39;]&#39;).toString();\r\n            sb.append(&quot;, &quot;);\r\n        }\r\n    }\r\n\r\nBuilding the string yourself will be far more efficient.\r\n\r\n---\r\n\r\nIf you really want to aggregate the strings beforehand in some sort of List, you should provide your own method to efficiently join them, e.g. like this:\r\n\r\n    static String join(Collection&lt;?&gt; items, String sep) {\r\n        if(items.size() == 0)\r\n            return &quot;&quot;;\r\n\r\n        String[] strings = new String[items.size()];\r\n        int length = sep.length() * (items.size() - 1);\r\n\r\n        int idx = 0;\r\n        for(Object item : items) {\r\n            String str = item.toString();\r\n            strings[idx++] = str;\r\n            length += str.length();\r\n        }\r\n\r\n        char[] chars = new char[length];\r\n        int pos = 0;\r\n\r\n        for(String str : strings) {\r\n            str.getChars(0, str.length(), chars, pos);\r\n            pos += str.length();\r\n\r\n            if(pos &lt; length) {\r\n                sep.getChars(0, sep.length(), chars, pos);\r\n                pos += sep.length();\r\n            }\r\n        }\r\n\r\n        return new String(chars);\r\n    }\r\n","title":"Best way to concatenate List of String objects?","body":"<p><code>ArrayList</code> inherits its <code>toString()</code>-method from <a href=\"https://openjdk.dev.java.net/source/browse/openjdk/jdk/trunk/jdk/src/share/classes/java/util/AbstractCollection.java?rev=257&amp;view=markup\" rel=\"nofollow noreferrer\"><code>AbstractCollection</code></a>, ie:</p>\n\n<pre><code>public String toString() {\n    Iterator&lt;E&gt; i = iterator();\n    if (! i.hasNext())\n        return \"[]\";\n\n    StringBuilder sb = new StringBuilder();\n    sb.append('[');\n    for (;;) {\n        E e = i.next();\n        sb.append(e == this ? \"(this Collection)\" : e);\n        if (! i.hasNext())\n            return sb.append(']').toString();\n        sb.append(\", \");\n    }\n}\n</code></pre>\n\n<p>Building the string yourself will be far more efficient.</p>\n\n<hr>\n\n<p>If you really want to aggregate the strings beforehand in some sort of List, you should provide your own method to efficiently join them, e.g. like this:</p>\n\n<pre><code>static String join(Collection&lt;?&gt; items, String sep) {\n    if(items.size() == 0)\n        return \"\";\n\n    String[] strings = new String[items.size()];\n    int length = sep.length() * (items.size() - 1);\n\n    int idx = 0;\n    for(Object item : items) {\n        String str = item.toString();\n        strings[idx++] = str;\n        length += str.length();\n    }\n\n    char[] chars = new char[length];\n    int pos = 0;\n\n    for(String str : strings) {\n        str.getChars(0, str.length(), chars, pos);\n        pos += str.length();\n\n        if(pos &lt; length) {\n            sep.getChars(0, sep.length(), chars, pos);\n            pos += sep.length();\n        }\n    }\n\n    return new String(chars);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2474,"reputation":21673,"user_id":3445,"display_name":"sdfx"},"comment_count":0,"down_vote_count":2,"up_vote_count":9,"is_accepted":false,"score":7,"last_activity_date":1234019894,"creation_date":1234019353,"answer_id":523908,"question_id":523871,"body_markdown":"Have you seen this Coding Horror blog entry?\r\n\r\n[The Sad Tragedy of Micro-Optimization Theater][1]\r\n\r\nI am not shure whether or not it is &quot;neater&quot;, but from a performance-standpoint it probably won&#39;t matter much.\r\n\r\n  [1]: http://www.codinghorror.com/blog/archives/001218.html","title":"Best way to concatenate List of String objects?","body":"<p>Have you seen this Coding Horror blog entry?</p>\n\n<p><a href=\"http://www.codinghorror.com/blog/archives/001218.html\" rel=\"noreferrer\">The Sad Tragedy of Micro-Optimization Theater</a></p>\n\n<p>I am not shure whether or not it is \"neater\", but from a performance-standpoint it probably won't matter much.</p>\n"},{"comments":[{"owner":{"account_id":92888,"reputation":23538,"user_id":254364,"accept_rate":83,"display_name":"Tim Goodman"},"score":8,"creation_date":1358526345,"post_id":523913,"comment_id":20040640,"body_markdown":"I agree that I don&#39;t like the OP&#39;s way of doing it, but for different reasons.  (1) Doing it this way disguises the intent of the code (whereas something like `StringUtils.join` is perfectly readable). (2) It&#39;s not flexible, since you might want to change the delimiter. (Just replacing `&quot;, &quot;` in the final string isn&#39;t a good way, since there could be `&quot;, &quot;` embedded in the original strings.)  So even though, as you say, `ArrayList.toString` probably won&#39;t change, I still wouldn&#39;t go this route.","body":"I agree that I don&#39;t like the OP&#39;s way of doing it, but for different reasons.  (1) Doing it this way disguises the intent of the code (whereas something like <code>StringUtils.join</code> is perfectly readable). (2) It&#39;s not flexible, since you might want to change the delimiter. (Just replacing <code>&quot;, &quot;</code> in the final string isn&#39;t a good way, since there could be <code>&quot;, &quot;</code> embedded in the original strings.)  So even though, as you say, <code>ArrayList.toString</code> probably won&#39;t change, I still wouldn&#39;t go this route."},{"owner":{"account_id":2647,"reputation":41534,"user_id":3712,"accept_rate":81,"display_name":"Barry Kelly"},"score":4,"creation_date":1382605218,"post_id":523913,"comment_id":29027562,"body_markdown":"You can be 99.9% certain that ArrayList.toString won&#39;t change unless it becomes an attack vector somehow; backward compatibility will see to that. But I agree that using toString() is still a bad idea.","body":"You can be 99.9% certain that ArrayList.toString won&#39;t change unless it becomes an attack vector somehow; backward compatibility will see to that. But I agree that using toString() is still a bad idea."}],"tags":[],"owner":{"account_id":15083,"reputation":22025,"user_id":31506,"display_name":"Jack Leow"},"comment_count":2,"down_vote_count":4,"up_vote_count":50,"is_accepted":true,"score":46,"last_activity_date":1234032752,"creation_date":1234019488,"answer_id":523913,"question_id":523871,"body_markdown":"Your approach is dependent on Java&#39;s ArrayList#toString() implementation.\r\n\r\nWhile the implementation is documented in the Java API and very unlikely to change, there&#39;s a chance it could. It&#39;s far more reliable to implement this yourself (loops, StringBuilders, recursion whatever you like better).\r\n\r\nSure this approach may seem &quot;neater&quot; or more &quot;too sweet&quot; or &quot;money&quot; but it is, in my opinion, a worse approach.","title":"Best way to concatenate List of String objects?","body":"<p>Your approach is dependent on Java's ArrayList#toString() implementation.</p>\n\n<p>While the implementation is documented in the Java API and very unlikely to change, there's a chance it could. It's far more reliable to implement this yourself (loops, StringBuilders, recursion whatever you like better).</p>\n\n<p>Sure this approach may seem \"neater\" or more \"too sweet\" or \"money\" but it is, in my opinion, a worse approach.</p>\n"},{"tags":[],"owner":{"account_id":2670,"reputation":304,"user_id":3745,"display_name":"codefin"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1234022571,"creation_date":1234022571,"answer_id":524016,"question_id":523871,"body_markdown":"It seems to me that the StringBuilder will be quick and efficient.\r\n\r\nThe basic form would look something like this:\r\n\r\n\tpublic static String concatStrings(List&lt;String&gt; strings)\r\n\t{\r\n\t\tStringBuilder sb = new StringBuilder();\r\n\t\tfor(String s: strings)\r\n\t\t{\r\n\t\t\tsb.append(s);\r\n\t\t}\r\n\t\treturn sb.toString();\t\t\r\n\t}\r\n\r\nIf that&#39;s too simplistic (and it probably is), you can use a similar approach and add a separator like this:\r\n\r\n    \tpublic static String concatStringsWSep(List&lt;String&gt; strings, String separator)\r\n\t{\r\n\t\tStringBuilder sb = new StringBuilder();\r\n\t\tfor(int i = 0; i &lt; strings.size(); i++)\r\n\t\t{\r\n\t\t\tsb.append(strings.get(i));\r\n\t\t\tif(i &lt; strings.size() - 1)\r\n\t\t\t\tsb.append(separator);\r\n\t\t}\r\n\t\treturn sb.toString();\t\t\t\t\r\n\t}\r\n\r\nI agree with the others who have responded to this question when they say that you should not rely on the toString() method of Java&#39;s ArrayList.\r\n\r\n","title":"Best way to concatenate List of String objects?","body":"<p>It seems to me that the StringBuilder will be quick and efficient.</p>\n\n<p>The basic form would look something like this:</p>\n\n<pre><code>public static String concatStrings(List&lt;String&gt; strings)\n{\n    StringBuilder sb = new StringBuilder();\n    for(String s: strings)\n    {\n        sb.append(s);\n    }\n    return sb.toString();       \n}\n</code></pre>\n\n<p>If that's too simplistic (and it probably is), you can use a similar approach and add a separator like this:</p>\n\n<pre><code>    public static String concatStringsWSep(List&lt;String&gt; strings, String separator)\n{\n    StringBuilder sb = new StringBuilder();\n    for(int i = 0; i &lt; strings.size(); i++)\n    {\n        sb.append(strings.get(i));\n        if(i &lt; strings.size() - 1)\n            sb.append(separator);\n    }\n    return sb.toString();               \n}\n</code></pre>\n\n<p>I agree with the others who have responded to this question when they say that you should not rely on the toString() method of Java's ArrayList.</p>\n"},{"comments":[{"owner":{"account_id":3104,"reputation":5836,"user_id":4406,"accept_rate":59,"display_name":"Jagmal"},"score":1,"creation_date":1234034022,"post_id":524089,"comment_id":337605,"body_markdown":"@codefine See http://stackoverflow.com/questions/58431/algorithm-for-joining-e-g-an-array-of-strings","body":"@codefine See <a href=\"http://stackoverflow.com/questions/58431/algorithm-for-joining-e-g-an-array-of-strings\" title=\"algorithm for joining e g an array of strings\">stackoverflow.com/questions/58431/&hellip;</a>"},{"owner":{"account_id":2017827,"reputation":24221,"user_id":1804678,"accept_rate":86,"display_name":"Jess"},"score":0,"creation_date":1364837954,"post_id":524089,"comment_id":22378953,"body_markdown":"I really like this answer b/c you can use a foreach and it is very simple, but it is also more inefficient.  How can you make it a tighter loop?","body":"I really like this answer b/c you can use a foreach and it is very simple, but it is also more inefficient.  How can you make it a tighter loop?"},{"owner":{"account_id":1507058,"reputation":2933,"user_id":1410212,"accept_rate":88,"display_name":"lilalinux"},"score":0,"creation_date":1415289602,"post_id":524089,"comment_id":42144483,"body_markdown":"No need to use List for strings. Collection would be more flexible","body":"No need to use List for strings. Collection would be more flexible"},{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1415304628,"post_id":524089,"comment_id":42153257,"body_markdown":"@lilalinux Changed to Iterable.","body":"@lilalinux Changed to Iterable."},{"owner":{"account_id":10386270,"reputation":1413,"user_id":7659255,"accept_rate":38,"display_name":"Peng"},"score":0,"creation_date":1593891493,"post_id":524089,"comment_id":110937680,"body_markdown":"very neat trick to replace sep after the first round iteration.","body":"very neat trick to replace sep after the first round iteration."}],"tags":[],"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"comment_count":5,"down_vote_count":1,"up_vote_count":46,"is_accepted":false,"score":45,"last_activity_date":1415304601,"creation_date":1234024875,"answer_id":524089,"question_id":523871,"body_markdown":"A variation on codefin&#39;s answer\r\n\r\n    public static String concatStringsWSep(Iterable&lt;String&gt; strings, String separator) {\r\n        StringBuilder sb = new StringBuilder();\r\n        String sep = &quot;&quot;;\r\n        for(String s: strings) {\r\n            sb.append(sep).append(s);\r\n            sep = separator;\r\n        }\r\n        return sb.toString();                           \r\n    }\r\n\r\n","title":"Best way to concatenate List of String objects?","body":"<p>A variation on codefin's answer</p>\n\n<pre><code>public static String concatStringsWSep(Iterable&lt;String&gt; strings, String separator) {\n    StringBuilder sb = new StringBuilder();\n    String sep = \"\";\n    for(String s: strings) {\n        sb.append(sep).append(s);\n        sep = separator;\n    }\n    return sb.toString();                           \n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":416394,"reputation":833,"user_id":791750,"accept_rate":88,"display_name":"froginvasion"},"score":1,"creation_date":1465814407,"post_id":524985,"comment_id":63041306,"body_markdown":"Alternatively for Guava users:  `Joiner.on(&#39;, &#39;).join(Collection)`","body":"Alternatively for Guava users:  <code>Joiner.on(&#39;, &#39;).join(Collection)</code>"},{"owner":{"account_id":703628,"reputation":14438,"user_id":595305,"accept_rate":83,"display_name":"mike rodent"},"score":4,"creation_date":1479663893,"post_id":524985,"comment_id":68642418,"body_markdown":"Yup, every time: Bloch, &quot;Effective Java&quot;, Item 47: &quot;Know and use the libraries&quot;.  The Apache Commons libraries should be the first thing to put in your build file (hopefully Gradle).  As Item 47 concludes: &quot;To summarize, don&#39;t reinvent the wheel&quot;.","body":"Yup, every time: Bloch, &quot;Effective Java&quot;, Item 47: &quot;Know and use the libraries&quot;.  The Apache Commons libraries should be the first thing to put in your build file (hopefully Gradle).  As Item 47 concludes: &quot;To summarize, don&#39;t reinvent the wheel&quot;."},{"owner":{"account_id":3322200,"reputation":109,"user_id":2793109,"display_name":"savanibharat"},"score":2,"creation_date":1484095319,"post_id":524985,"comment_id":70366727,"body_markdown":"Using Guava API: `Joiner.on(&#39;, &#39;).skipNulls().join(Iterable&lt;?&gt;)`. To represent null values you can use `Joiner.on(&#39;,&#39;).useForNull(&quot;#&quot;).join(Iterable&lt;?&gt;)`","body":"Using Guava API: <code>Joiner.on(&#39;, &#39;).skipNulls().join(Iterable&lt;?&gt;)</code>. To represent null values you can use <code>Joiner.on(&#39;,&#39;).useForNull(&quot;#&quot;).join(Iterable&lt;?&gt;)</code>"},{"owner":{"account_id":6887735,"reputation":21370,"user_id":5292302,"accept_rate":100,"display_name":"Petter Friberg"},"score":0,"creation_date":1534864540,"post_id":524985,"comment_id":90853866,"body_markdown":"@Gojir4 maybe you should check java version &gt;8 before you use similar language, see the duplicate","body":"@Gojir4 maybe you should check java version &gt;8 before you use similar language, see the duplicate"},{"owner":{"account_id":3493768,"reputation":1190,"user_id":2922675,"accept_rate":100,"display_name":"Nils-o-mat"},"score":2,"creation_date":1557589446,"post_id":524985,"comment_id":98819953,"body_markdown":"As of Java 8 String#join is preferable (no library necessary).","body":"As of Java 8 String#join is preferable (no library necessary)."}],"tags":[],"owner":{"account_id":22825,"reputation":6383,"user_id":56708,"display_name":"Jeff Olson"},"comment_count":5,"down_vote_count":1,"up_vote_count":400,"is_accepted":false,"score":399,"last_activity_date":1416257391,"creation_date":1234058166,"answer_id":524985,"question_id":523871,"body_markdown":"Use one of the the [StringUtils.join][1] methods in Apache Commons Lang.\r\n\r\n    import org.apache.commons.lang3.StringUtils;\r\n\r\n    String result = StringUtils.join(list, &quot;, &quot;);\r\n\r\nIf you are fortunate enough to be using Java 8, then it&#39;s even easier...just use [String.join][2]\r\n\r\n    String result = String.join(&quot;, &quot;, list);\r\n\r\n  [1]: http://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/StringUtils.html#join%28java.lang.Iterable,%20char%29\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/lang/String.html#join-java.lang.CharSequence-java.lang.Iterable-","title":"Best way to concatenate List of String objects?","body":"<p>Use one of the the <a href=\"http://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/StringUtils.html#join%28java.lang.Iterable,%20char%29\" rel=\"noreferrer\">StringUtils.join</a> methods in Apache Commons Lang.</p>\n\n<pre><code>import org.apache.commons.lang3.StringUtils;\n\nString result = StringUtils.join(list, \", \");\n</code></pre>\n\n<p>If you are fortunate enough to be using Java 8, then it's even easier...just use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/String.html#join-java.lang.CharSequence-java.lang.Iterable-\" rel=\"noreferrer\">String.join</a></p>\n\n<pre><code>String result = String.join(\", \", list);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2466,"reputation":34852,"user_id":3434,"accept_rate":90,"display_name":"Apocalisp"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1234061873,"creation_date":1234061373,"answer_id":525050,"question_id":523871,"body_markdown":"Using the [Functional Java][1] library, import these:\r\n\r\n    import static fj.pre.Monoid.stringMonoid;\r\n    import static fj.data.List.list;\r\n    import fj.data.List;\r\n\r\n... then you can do this:\r\n\r\n    List&lt;String&gt; ss = list(&quot;foo&quot;, &quot;bar&quot;, &quot;baz&quot;);\r\n    String s = stringMonoid.join(ss, &quot;, &quot;);\r\n\r\nOr, the generic way, if you don&#39;t have a list of Strings:\r\n\r\n    public static &lt;A&gt; String showList(List&lt;A&gt; l, Show&lt;A&gt; s) {\r\n      return stringMonoid.join(l.map(s.showS_()), &quot;, &quot;);\r\n    }\r\n\r\n  [1]: http://functionaljava.org\r\n\r\n","title":"Best way to concatenate List of String objects?","body":"<p>Using the <a href=\"http://functionaljava.org\" rel=\"nofollow noreferrer\">Functional Java</a> library, import these:</p>\n\n<pre><code>import static fj.pre.Monoid.stringMonoid;\nimport static fj.data.List.list;\nimport fj.data.List;\n</code></pre>\n\n<p>... then you can do this:</p>\n\n<pre><code>List&lt;String&gt; ss = list(\"foo\", \"bar\", \"baz\");\nString s = stringMonoid.join(ss, \", \");\n</code></pre>\n\n<p>Or, the generic way, if you don't have a list of Strings:</p>\n\n<pre><code>public static &lt;A&gt; String showList(List&lt;A&gt; l, Show&lt;A&gt; s) {\n  return stringMonoid.join(l.map(s.showS_()), \", \");\n}\n</code></pre>\n"},{"tags":[],"owner":{"display_name":"MonkeeSage"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1236159936,"creation_date":1236159936,"answer_id":609895,"question_id":523871,"body_markdown":"Assuming it&#39;s faster to just move a pointer / set a byte to null (or however Java implements StringBuilder#setLength), rather than check a condition each time through the loop to see when to append the delimiter, you could use this method:\r\n\r\n&lt;pre&gt;public static String Intersperse (Collection&amp;lt;?&gt; collection, String delimiter)\r\n{\r\n\tStringBuilder sb = new StringBuilder ();\r\n\tfor (Object item : collection)\r\n\t{\r\n\t\tif (item == null) continue;\r\n\t\tsb.append (item).append (delimiter);\r\n\t}\r\n\tsb.setLength (sb.length () - delimiter.length ());\r\n\treturn sb.toString ();\r\n}&lt;/pre&gt;","title":"Best way to concatenate List of String objects?","body":"<p>Assuming it's faster to just move a pointer / set a byte to null (or however Java implements StringBuilder#setLength), rather than check a condition each time through the loop to see when to append the delimiter, you could use this method:</p>\n\n<pre>public static String Intersperse (Collection&lt;?> collection, String delimiter)\n{\n    StringBuilder sb = new StringBuilder ();\n    for (Object item : collection)\n    {\n        if (item == null) continue;\n        sb.append (item).append (delimiter);\n    }\n    sb.setLength (sb.length () - delimiter.length ());\n    return sb.toString ();\n}</pre>\n"},{"tags":[],"owner":{"account_id":73662,"reputation":6399,"user_id":212013,"display_name":"andras"},"comment_count":0,"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1325504827,"creation_date":1325504489,"answer_id":8700373,"question_id":523871,"body_markdown":"[Guava][1] is a pretty neat library from Google:\r\n\r\n\r\n    Joiner joiner = Joiner.on(&quot;, &quot;);\r\n    joiner.join(sList);\r\n\r\n\r\n  [1]: http://code.google.com/p/guava-libraries/","title":"Best way to concatenate List of String objects?","body":"<p><a href=\"http://code.google.com/p/guava-libraries/\" rel=\"noreferrer\">Guava</a> is a pretty neat library from Google:</p>\n\n<pre><code>Joiner joiner = Joiner.on(\", \");\njoiner.join(sList);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3568624,"reputation":31,"user_id":2979550,"display_name":"user2979550"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1384180913,"creation_date":1384180913,"answer_id":19909010,"question_id":523871,"body_markdown":"Next variation on Peter Lawrey&#39;s answer without initialization of a new string every loop turn\r\n\r\n    String concatList(List&lt;String&gt; sList, String separator)\r\n    {\r\n        Iterator&lt;String&gt; iter = sList.iterator();\r\n        StringBuilder sb = new StringBuilder();\r\n    \r\n        while (iter.hasNext())\r\n        {\r\n            sb.append(iter.next()).append( iter.hasNext() ? separator : &quot;&quot;);\r\n        }\r\n        return sb.toString();\r\n    }","title":"Best way to concatenate List of String objects?","body":"<p>Next variation on Peter Lawrey's answer without initialization of a new string every loop turn</p>\n\n<pre><code>String concatList(List&lt;String&gt; sList, String separator)\n{\n    Iterator&lt;String&gt; iter = sList.iterator();\n    StringBuilder sb = new StringBuilder();\n\n    while (iter.hasNext())\n    {\n        sb.append(iter.next()).append( iter.hasNext() ? separator : \"\");\n    }\n    return sb.toString();\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":103429,"reputation":6646,"user_id":277023,"accept_rate":56,"display_name":"kellyfj"},"score":0,"creation_date":1674589000,"post_id":20352077,"comment_id":132745181,"body_markdown":"`String str = String.join(&quot;&quot;, list);` probably needs some kind of separator like `,` or `&quot; &quot;` right?","body":"<code>String str = String.join(&quot;&quot;, list);</code> probably needs some kind of separator like <code>,</code> or <code>&quot; &quot;</code> right?"}],"tags":[],"owner":{"account_id":104034,"reputation":4736,"user_id":278345,"accept_rate":83,"display_name":"Andrei N"},"comment_count":1,"down_vote_count":0,"up_vote_count":213,"is_accepted":false,"score":213,"last_activity_date":1694809821,"creation_date":1386076054,"answer_id":20352077,"question_id":523871,"body_markdown":"Using Java 8+\r\n\r\n    String str = list.stream().collect(Collectors.joining())\r\nor even \r\n\r\n    String str = String.join(&quot;&quot;, list);  // Substitute &quot;&quot; with your desired separator.","title":"Best way to concatenate List of String objects?","body":"<p>Using Java 8+</p>\n<pre><code>String str = list.stream().collect(Collectors.joining())\n</code></pre>\n<p>or even</p>\n<pre><code>String str = String.join(&quot;&quot;, list);  // Substitute &quot;&quot; with your desired separator.\n</code></pre>\n"},{"tags":[],"owner":{"account_id":122546,"reputation":7175,"user_id":316419,"accept_rate":72,"display_name":"Manish Mulani"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1410840991,"creation_date":1410840991,"answer_id":25860541,"question_id":523871,"body_markdown":"I prefer String.join(list) in Java 8","title":"Best way to concatenate List of String objects?","body":"<p>I prefer String.join(list) in Java 8</p>\n"},{"tags":[],"owner":{"account_id":354638,"reputation":1750,"user_id":693110,"accept_rate":100,"display_name":"Chunliang Lyu"},"comment_count":0,"down_vote_count":0,"up_vote_count":29,"is_accepted":false,"score":29,"last_activity_date":1411572615,"creation_date":1411572615,"answer_id":26020874,"question_id":523871,"body_markdown":"If you are developing for Android, there is [`TextUtils.join`][1] provided by the SDK.\r\n\r\n[1]: http://developer.android.com/reference/android/text/TextUtils.html#join(java.lang.CharSequence,%20java.lang.Iterable)","title":"Best way to concatenate List of String objects?","body":"<p>If you are developing for Android, there is <a href=\"http://developer.android.com/reference/android/text/TextUtils.html#join(java.lang.CharSequence,%20java.lang.Iterable)\"><code>TextUtils.join</code></a> provided by the SDK.</p>\n"},{"tags":[],"owner":{"account_id":3345850,"reputation":567,"user_id":2811020,"accept_rate":61,"display_name":"programer8"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1430237766,"creation_date":1430237766,"answer_id":29924656,"question_id":523871,"body_markdown":"if you have json in your dependencies.you can use `new JSONArray(list).toString()`","title":"Best way to concatenate List of String objects?","body":"<p>if you have json in your dependencies.you can use <code>new JSONArray(list).toString()</code></p>\n"},{"tags":[],"owner":{"account_id":2008991,"reputation":49,"user_id":4060931,"display_name":"theol.zacharopoulos"},"comment_count":0,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1452093371,"creation_date":1452093371,"answer_id":34636530,"question_id":523871,"body_markdown":"In java 8 you can also use a reducer, something like:\r\n\r\n    public static String join(List&lt;String&gt; strings, String joinStr) {\r\n    \treturn strings.stream().reduce(&quot;&quot;, (prev, cur) -&gt; prev += (cur + joinStr));\r\n    }\r\n","title":"Best way to concatenate List of String objects?","body":"<p>In java 8 you can also use a reducer, something like:</p>\n\n<pre><code>public static String join(List&lt;String&gt; strings, String joinStr) {\n    return strings.stream().reduce(\"\", (prev, cur) -&gt; prev += (cur + joinStr));\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3125141,"reputation":833,"user_id":2644152,"display_name":"tep"},"score":1,"creation_date":1483937838,"post_id":37978678,"comment_id":70287404,"body_markdown":"FYI this implementation is O(n^2) as String::concat copies both strings onto a new buffer: http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/String.java#String.concat%28java.lang.String%29","body":"FYI this implementation is O(n^2) as String::concat copies both strings onto a new buffer: <a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/String.java#String.concat%28java.lang.String%29\" rel=\"nofollow noreferrer\">grepcode.com/file/repository.grepcode.com/java/root/jdk/open&zwnj;&#8203;jdk/&hellip;</a>"}],"tags":[],"owner":{"account_id":8449580,"reputation":303,"user_id":6338857,"display_name":"Sreekanth"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1484039228,"creation_date":1466631337,"answer_id":37978678,"question_id":523871,"body_markdown":"Rather than depending on `ArrayList.toString()` implementation, you could write a one-liner, if you are using java 8:\r\n\r\n    String result = sList.stream()\r\n                         .reduce(&quot;&quot;, String::concat);\r\n\r\nIf you prefer using `StringBuffer` instead of String since `String::concat` has a runtime of `O(n^2)`, you could convert every `String` to `StringBuffer` first.\r\n\r\n    StringBuffer result = sList.stream()\r\n                               .map(StringBuffer::new)\r\n                               .reduce(new StringBuffer(&quot;&quot;), StringBuffer::append);\r\n         ","title":"Best way to concatenate List of String objects?","body":"<p>Rather than depending on <code>ArrayList.toString()</code> implementation, you could write a one-liner, if you are using java 8:</p>\n\n<pre><code>String result = sList.stream()\n                     .reduce(\"\", String::concat);\n</code></pre>\n\n<p>If you prefer using <code>StringBuffer</code> instead of String since <code>String::concat</code> has a runtime of <code>O(n^2)</code>, you could convert every <code>String</code> to <code>StringBuffer</code> first.</p>\n\n<pre><code>StringBuffer result = sList.stream()\n                           .map(StringBuffer::new)\n                           .reduce(new StringBuffer(\"\"), StringBuffer::append);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":56838,"reputation":3864,"user_id":170239,"accept_rate":44,"display_name":"chrismacp"},"score":3,"creation_date":1554818479,"post_id":38546936,"comment_id":97885958,"body_markdown":"IntelliJ gives me a hint that I can improve things by changing this solution to the String.join example from other answers with the following reasoning &quot;Reports stream API call chains which can be simplified. It allows to avoid creating redundant temporary objects when traversing a collection.&quot;","body":"IntelliJ gives me a hint that I can improve things by changing this solution to the String.join example from other answers with the following reasoning &quot;Reports stream API call chains which can be simplified. It allows to avoid creating redundant temporary objects when traversing a collection.&quot;"}],"tags":[],"owner":{"account_id":7925739,"reputation":1147,"user_id":5985209,"accept_rate":67,"display_name":"Aleksandar Jovanovic"},"comment_count":1,"down_vote_count":0,"up_vote_count":25,"is_accepted":false,"score":25,"last_activity_date":1469312779,"creation_date":1469312779,"answer_id":38546936,"question_id":523871,"body_markdown":"This is the most elegant and clean way I&#39;ve found so far:\r\n\r\n    list.stream().collect(Collectors.joining(delimiter));","title":"Best way to concatenate List of String objects?","body":"<p>This is the most elegant and clean way I've found so far:</p>\n\n<pre><code>list.stream().collect(Collectors.joining(delimiter));\n</code></pre>\n"}],"owner":{"account_id":3104,"reputation":5836,"user_id":4406,"accept_rate":59,"display_name":"Jagmal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":346988,"favorite_count":0,"down_vote_count":0,"up_vote_count":193,"closed_date":1481670313,"accepted_answer_id":523913,"answer_count":19,"score":193,"last_activity_date":1694809821,"creation_date":1234018283,"question_id":523871,"body_markdown":"What is the best way to concatenate a list of String objects? I am thinking of doing this way:\r\n\r\n    List&lt;String&gt; sList = new ArrayList&lt;String&gt;();\r\n\r\n    // add elements\r\n\r\n    if (sList != null)\r\n    {\r\n        String listString = sList.toString();\r\n        listString = listString.subString(1, listString.length() - 1);\r\n    }\r\n\r\nI somehow found this to be neater than using the StringBuilder/StringBuffer approach.\r\n\r\nAny thoughts/comments?","title":"Best way to concatenate List of String objects?","body":"<p>What is the best way to concatenate a list of String objects? I am thinking of doing this way:</p>\n\n<pre><code>List&lt;String&gt; sList = new ArrayList&lt;String&gt;();\n\n// add elements\n\nif (sList != null)\n{\n    String listString = sList.toString();\n    listString = listString.subString(1, listString.length() - 1);\n}\n</code></pre>\n\n<p>I somehow found this to be neater than using the StringBuilder/StringBuffer approach.</p>\n\n<p>Any thoughts/comments?</p>\n"},{"tags":["java","gradle","cross-compiling"],"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1694810219,"post_id":77115176,"comment_id":135945130,"body_markdown":"As long as that&#39;s your source code you can add an option to the command line for the compiler.  If it&#39;s someone else&#39;s library then they have to do it, and if they didn&#39;t then the library is probably not compatible with earlier versions of Java.","body":"As long as that&#39;s your source code you can add an option to the command line for the compiler.  If it&#39;s someone else&#39;s library then they have to do it, and if they didn&#39;t then the library is probably not compatible with earlier versions of Java."},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1694810287,"post_id":77115176,"comment_id":135945140,"body_markdown":"Java `source` and `target` options: https://www.baeldung.com/java-source-target-options","body":"Java <code>source</code> and <code>target</code> options: <a href=\"https://www.baeldung.com/java-source-target-options\" rel=\"nofollow noreferrer\">baeldung.com/java-source-target-options</a>"},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":1,"creation_date":1694810503,"post_id":77115176,"comment_id":135945170,"body_markdown":"Also lots here on StackOverflow: https://stackoverflow.com/questions/10663450/whats-the-difference-between-source-and-target-compatibility","body":"Also lots here on StackOverflow: <a href=\"https://stackoverflow.com/questions/10663450/whats-the-difference-between-source-and-target-compatibility\" title=\"whats the difference between source and target compatibility\">stackoverflow.com/questions/10663450/&hellip;</a>"},{"owner":{"account_id":1920862,"reputation":3756,"user_id":1732418,"accept_rate":53,"display_name":"tribbloid"},"score":0,"creation_date":1694819410,"post_id":77115176,"comment_id":135946161,"body_markdown":"Yes it is my source code, and I think I already have used that option in gradle: https://github.com/tek/splain/blob/c5c59cd8f25f7d6a452e84be32f0e9921afe9e3a/build.gradle.kts#L131C13-L131C32","body":"Yes it is my source code, and I think I already have used that option in gradle: <a href=\"https://github.com/tek/splain/blob/c5c59cd8f25f7d6a452e84be32f0e9921afe9e3a/build.gradle.kts#L131C13-L131C32\" rel=\"nofollow noreferrer\">github.com/tek/splain/blob/&hellip;</a>"}],"owner":{"account_id":1920862,"reputation":3756,"user_id":1732418,"accept_rate":53,"display_name":"tribbloid"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694809567,"creation_date":1694809567,"question_id":77115176,"body_markdown":"Here is a simple example: a project is using a compiler plugin &quot;io.tryp:splain_2.13.12:1.0.2&quot;, which is compiled with Java 11 but doesn&#39;t specify Java version compatibility matrix.\r\n\r\nWhen the project uses Java 8 for compilation, it will cause the following error (https://github.com/tribbloid/prover-commons/actions/runs/6202008634/job/16839860491):\r\n\r\n```\r\n\r\nExecution failed for task &#39;:prover-commons:core:compileTestFixturesScala&#39;.\r\n&gt; Could not resolve all files for configuration &#39;:prover-commons:core:testFixturesCompileClasspath&#39;.\r\n   &gt; Could not resolve io.tryp:splain_2.13.12:1.0.2.\r\n     Required by:\r\n         project :prover-commons:core\r\n      &gt; No matching variant of io.tryp:splain_2.13.12:1.0.2 was found. The consumer was configured to find a library for use during compile-time, compatible with Java 8, preferably in the form of class files, preferably optimized for standard JVMs, and its dependencies declared externally but:\r\n          - Variant &#39;apiElements&#39; capability io.tryp:splain_2.13.12:1.0.2 declares a library for use during compile-time, packaged as a jar, and its dependencies declared externally:\r\n              - Incompatible because this component declares a component, compatible with Java 11 and the consumer needed a component, compatible with Java 8\r\n              - Other compatible attribute:\r\n                  - Doesn&#39;t say anything about its target Java environment (preferred optimized for standard JVMs)\r\n          - Variant &#39;javadocElements&#39; capability io.tryp:splain_2.13.12:1.0.2 declares a component for use during runtime, and its dependencies declared externally:\r\n              - Incompatible because this component declares documentation and the consumer needed a library\r\n              - Other compatible attributes:\r\n                  - Doesn&#39;t say anything about its target Java environment (preferred optimized for standard JVMs)\r\n                  - Doesn&#39;t say anything about its target Java version (required compatibility with Java 8)\r\n                  - Doesn&#39;t say anything about its elements (required them preferably in the form of class files)\r\n          - Variant &#39;runtimeElements&#39; capability io.tryp:splain_2.13.12:1.0.2 declares a library for use during runtime, packaged as a jar, and its dependencies declared externally:\r\n              - Incompatible because this component declares a component, compatible with Java 11 and the consumer needed a component, compatible with Java 8\r\n              - Other compatible attribute:\r\n                  - Doesn&#39;t say anything about its target Java environment (preferred optimized for standard JVMs)\r\n          - Variant &#39;sourcesElements&#39; capability io.tryp:splain_2.13.12:1.0.2 declares a component for use during runtime, and its dependencies declared externally:\r\n              - Incompatible because this component declares documentation and the consumer needed a library\r\n              - Other compatible attributes:\r\n                  - Doesn&#39;t say anything about its target Java environment (preferred optimized for standard JVMs)\r\n                  - Doesn&#39;t say anything about its target Java version (required compatibility with Java 8)\r\n                  - Doesn&#39;t say anything about its elements (required them preferably in the form of class files)\r\n```\r\n\r\nWhen it uses Java 11 or later, this error will disappear (https://github.com/tribbloid/prover-commons/actions/runs/6202301632/job/16840784472)\r\n\r\nThis looks ridiculous, the version of the bytecode being generated by compilation &amp; publishing should be irrelevant to the JVM runtime being used. How do I enforce the compiler to generate bytecode compatible with every Java version between 8 and 21?","title":"In Gradle, how to publish for multiple Java versions?","body":"<p>Here is a simple example: a project is using a compiler plugin &quot;io.tryp:splain_2.13.12:1.0.2&quot;, which is compiled with Java 11 but doesn't specify Java version compatibility matrix.</p>\n<p>When the project uses Java 8 for compilation, it will cause the following error (<a href=\"https://github.com/tribbloid/prover-commons/actions/runs/6202008634/job/16839860491\" rel=\"nofollow noreferrer\">https://github.com/tribbloid/prover-commons/actions/runs/6202008634/job/16839860491</a>):</p>\n<pre><code>\nExecution failed for task ':prover-commons:core:compileTestFixturesScala'.\n&gt; Could not resolve all files for configuration ':prover-commons:core:testFixturesCompileClasspath'.\n   &gt; Could not resolve io.tryp:splain_2.13.12:1.0.2.\n     Required by:\n         project :prover-commons:core\n      &gt; No matching variant of io.tryp:splain_2.13.12:1.0.2 was found. The consumer was configured to find a library for use during compile-time, compatible with Java 8, preferably in the form of class files, preferably optimized for standard JVMs, and its dependencies declared externally but:\n          - Variant 'apiElements' capability io.tryp:splain_2.13.12:1.0.2 declares a library for use during compile-time, packaged as a jar, and its dependencies declared externally:\n              - Incompatible because this component declares a component, compatible with Java 11 and the consumer needed a component, compatible with Java 8\n              - Other compatible attribute:\n                  - Doesn't say anything about its target Java environment (preferred optimized for standard JVMs)\n          - Variant 'javadocElements' capability io.tryp:splain_2.13.12:1.0.2 declares a component for use during runtime, and its dependencies declared externally:\n              - Incompatible because this component declares documentation and the consumer needed a library\n              - Other compatible attributes:\n                  - Doesn't say anything about its target Java environment (preferred optimized for standard JVMs)\n                  - Doesn't say anything about its target Java version (required compatibility with Java 8)\n                  - Doesn't say anything about its elements (required them preferably in the form of class files)\n          - Variant 'runtimeElements' capability io.tryp:splain_2.13.12:1.0.2 declares a library for use during runtime, packaged as a jar, and its dependencies declared externally:\n              - Incompatible because this component declares a component, compatible with Java 11 and the consumer needed a component, compatible with Java 8\n              - Other compatible attribute:\n                  - Doesn't say anything about its target Java environment (preferred optimized for standard JVMs)\n          - Variant 'sourcesElements' capability io.tryp:splain_2.13.12:1.0.2 declares a component for use during runtime, and its dependencies declared externally:\n              - Incompatible because this component declares documentation and the consumer needed a library\n              - Other compatible attributes:\n                  - Doesn't say anything about its target Java environment (preferred optimized for standard JVMs)\n                  - Doesn't say anything about its target Java version (required compatibility with Java 8)\n                  - Doesn't say anything about its elements (required them preferably in the form of class files)\n</code></pre>\n<p>When it uses Java 11 or later, this error will disappear (<a href=\"https://github.com/tribbloid/prover-commons/actions/runs/6202301632/job/16840784472\" rel=\"nofollow noreferrer\">https://github.com/tribbloid/prover-commons/actions/runs/6202301632/job/16840784472</a>)</p>\n<p>This looks ridiculous, the version of the bytecode being generated by compilation &amp; publishing should be irrelevant to the JVM runtime being used. How do I enforce the compiler to generate bytecode compatible with every Java version between 8 and 21?</p>\n"},{"tags":["java","junit","mocking","mockito","powermock"],"comments":[{"owner":{"account_id":904009,"reputation":3296,"user_id":939352,"accept_rate":91,"display_name":"Ben Glasser"},"score":0,"creation_date":1352824702,"post_id":13364406,"comment_id":18245701,"body_markdown":"is your mocked check() method working right?","body":"is your mocked check() method working right?"},{"owner":{"account_id":1332320,"reputation":12406,"user_id":1275937,"accept_rate":84,"display_name":"Shengjie"},"score":0,"creation_date":1352826178,"post_id":13364406,"comment_id":18246456,"body_markdown":"@BenGlasser check() works ok. Just the whenNew doesn&#39;t seem working at all. I updated the description as well.","body":"@BenGlasser check() works ok. Just the whenNew doesn&#39;t seem working at all. I updated the description as well."}],"answers":[{"comments":[{"owner":{"account_id":1332320,"reputation":12406,"user_id":1275937,"accept_rate":84,"display_name":"Shengjie"},"score":26,"creation_date":1352826992,"post_id":13365382,"comment_id":18246867,"body_markdown":"+1, I don&#39;t like the fact that I need to adjust my source code make it more mockito friendly. Thanks for the sharing.","body":"+1, I don&#39;t like the fact that I need to adjust my source code make it more mockito friendly. Thanks for the sharing."},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":24,"creation_date":1353208996,"post_id":13365382,"comment_id":18369562,"body_markdown":"It&#39;s never bad to have source code that is more testable, or to avoid testability anti-patterns when you write your code.  If you write source that is more testable, it&#39;s automatically more maintainable.  Isolating your constructor calls in their own methods is just one way to achieve this.","body":"It&#39;s never bad to have source code that is more testable, or to avoid testability anti-patterns when you write your code.  If you write source that is more testable, it&#39;s automatically more maintainable.  Isolating your constructor calls in their own methods is just one way to achieve this."},{"owner":{"account_id":2473344,"reputation":356,"user_id":2916377,"display_name":"Mark Wood"},"score":4,"creation_date":1596734441,"post_id":13365382,"comment_id":111913321,"body_markdown":"Writing testable code is good.  Being forced to redesign class A so that I can write tests for class B, which depends on A, because A has a hard-coded dependency on C, feels...less good.  Yeah, the code will be better in the end, but how many classes will I end up redesigning so that I can finish writing one test?","body":"Writing testable code is good.  Being forced to redesign class A so that I can write tests for class B, which depends on A, because A has a hard-coded dependency on C, feels...less good.  Yeah, the code will be better in the end, but how many classes will I end up redesigning so that I can finish writing one test?"},{"owner":{"account_id":904009,"reputation":3296,"user_id":939352,"accept_rate":91,"display_name":"Ben Glasser"},"score":0,"creation_date":1596825353,"post_id":13365382,"comment_id":111945567,"body_markdown":"@MarkWood in my experience clunky testing experiences are generally a sign of some design flaw.  \n\nIRL if you are testing constructors your code is probably screaming at you for a factory or some dependency injection.  If you follow typical design patterns for those two cases your code becomes much easier to test and to work with in general.\n\nIf you are testing constructors because you have bunch of logic in there, you probably need some layer of polymorphism, or you could move that logic to an initialization method.","body":"@MarkWood in my experience clunky testing experiences are generally a sign of some design flaw.    IRL if you are testing constructors your code is probably screaming at you for a factory or some dependency injection.  If you follow typical design patterns for those two cases your code becomes much easier to test and to work with in general.  If you are testing constructors because you have bunch of logic in there, you probably need some layer of polymorphism, or you could move that logic to an initialization method."},{"owner":{"account_id":7471795,"reputation":1840,"user_id":5679543,"display_name":"Waqas Ahmed"},"score":0,"creation_date":1663899509,"post_id":13365382,"comment_id":130353051,"body_markdown":"Working solution example with Spy:\n\n@Mock\n    private PickCreationUtil pickCreationUtil;\n\n// inside constructor \npickCreationUtil = spy(new PickCreationUtil(echoLogger));","body":"Working solution example with Spy:  @Mock     private PickCreationUtil pickCreationUtil;  // inside constructor  pickCreationUtil = spy(new PickCreationUtil(echoLogger));"},{"owner":{"account_id":3612864,"reputation":2091,"user_id":3013473,"accept_rate":56,"display_name":"zafar142003"},"score":0,"creation_date":1681646220,"post_id":13365382,"comment_id":134086912,"body_markdown":"With Mockito 3.5, you can now mock constructors. Check https://javadoc.io/doc/org.mockito/mockito-core/3.5.0/org/mockito/Mockito.html#49","body":"With Mockito 3.5, you can now mock constructors. Check <a href=\"https://javadoc.io/doc/org.mockito/mockito-core/3.5.0/org/mockito/Mockito.html#49\" rel=\"nofollow noreferrer\">javadoc.io/doc/org.mockito/mockito-core/3.5.0/org/mockito/&hellip;</a>"}],"tags":[],"owner":{"account_id":904009,"reputation":3296,"user_id":939352,"accept_rate":91,"display_name":"Ben Glasser"},"comment_count":6,"down_vote_count":1,"up_vote_count":57,"is_accepted":false,"score":56,"last_activity_date":1388182161,"creation_date":1352826770,"answer_id":13365382,"question_id":13364406,"body_markdown":"To my knowledge, you can&#39;t mock constructors with mockito, only methods.  But according to the wiki on the Mockito google code page there is a way to mock the constructor behavior by creating a method in your class which return a new instance of that class.  then you can mock out that method.  Below is an [excerpt directly from the Mockito wiki][1]:\r\n\r\n&gt; **Pattern 1 - using one-line methods for object creation**\r\n&gt; \r\n&gt; To use pattern 1 (testing a class called MyClass), you would replace a call like\r\n&gt; \r\n&gt;        Foo foo = new Foo( a, b, c );\r\n&gt; \r\n&gt; with\r\n&gt; \r\n&gt;        Foo foo = makeFoo( a, b, c );\r\n&gt; \r\n&gt; and write a one-line method\r\n&gt;\r\n&gt;        Foo makeFoo( A a, B b, C c ) { \r\n&gt;             return new Foo( a, b, c );\r\n&gt;        }\r\n&gt;\r\n&gt;  It&#39;s important that you don&#39;t include any logic in the method; just the one line that creates the\r\n&gt; object. The reason for this is that the method itself is never going\r\n&gt; to be unit tested.\r\n&gt; \r\n&gt; When you come to test the class, the object that you test will\r\n&gt; actually be a Mockito spy, with this method overridden, to return a\r\n&gt; mock. What you&#39;re testing is therefore not the class itself, but a\r\n&gt; very slightly modified version of it.\r\n&gt; \r\n&gt; Your test class might contain members like\r\n&gt;\r\n&gt;       @Mock private Foo mockFoo;\r\n&gt;       private MyClass toTest = spy(new MyClass());\r\n&gt;\r\n&gt;  Lastly, inside your test method you mock out the call to\r\n&gt; makeFoo with a line like\r\n&gt;\r\n&gt;       doReturn( mockFoo )\r\n&gt;           .when( toTest )\r\n&gt;           .makeFoo( any( A.class ), any( B.class ), any( C.class ));\r\n&gt;\r\n&gt;  You can use matchers that are more specific than any() if you want to\r\n&gt; check the arguments that are passed to the constructor.\r\n\r\nIf you&#39;re just wanting to return a mocked object of your class I think this should work for you.  In any case you can read more about mocking object creation here:\r\n\r\nhttp://code.google.com/p/mockito/wiki/MockingObjectCreation\r\n\r\n\r\n  [1]: https://code.google.com/p/mockito/wiki/MockingObjectCreation","title":"Mock a constructor with parameter","body":"<p>To my knowledge, you can't mock constructors with mockito, only methods.  But according to the wiki on the Mockito google code page there is a way to mock the constructor behavior by creating a method in your class which return a new instance of that class.  then you can mock out that method.  Below is an <a href=\"https://code.google.com/p/mockito/wiki/MockingObjectCreation\" rel=\"noreferrer\">excerpt directly from the Mockito wiki</a>:</p>\n\n<blockquote>\n  <p><strong>Pattern 1 - using one-line methods for object creation</strong></p>\n  \n  <p>To use pattern 1 (testing a class called MyClass), you would replace a call like</p>\n\n<pre><code>   Foo foo = new Foo( a, b, c );\n</code></pre>\n  \n  <p>with</p>\n\n<pre><code>   Foo foo = makeFoo( a, b, c );\n</code></pre>\n  \n  <p>and write a one-line method</p>\n\n<pre><code>   Foo makeFoo( A a, B b, C c ) { \n        return new Foo( a, b, c );\n   }\n</code></pre>\n  \n  <p>It's important that you don't include any logic in the method; just the one line that creates the\n  object. The reason for this is that the method itself is never going\n  to be unit tested.</p>\n  \n  <p>When you come to test the class, the object that you test will\n  actually be a Mockito spy, with this method overridden, to return a\n  mock. What you're testing is therefore not the class itself, but a\n  very slightly modified version of it.</p>\n  \n  <p>Your test class might contain members like</p>\n\n<pre><code>  @Mock private Foo mockFoo;\n  private MyClass toTest = spy(new MyClass());\n</code></pre>\n  \n  <p>Lastly, inside your test method you mock out the call to\n  makeFoo with a line like</p>\n\n<pre><code>  doReturn( mockFoo )\n      .when( toTest )\n      .makeFoo( any( A.class ), any( B.class ), any( C.class ));\n</code></pre>\n  \n  <p>You can use matchers that are more specific than any() if you want to\n  check the arguments that are passed to the constructor.</p>\n</blockquote>\n\n<p>If you're just wanting to return a mocked object of your class I think this should work for you.  In any case you can read more about mocking object creation here:</p>\n\n<p><a href=\"http://code.google.com/p/mockito/wiki/MockingObjectCreation\" rel=\"noreferrer\">http://code.google.com/p/mockito/wiki/MockingObjectCreation</a></p>\n"},{"comments":[{"owner":{"account_id":3148189,"reputation":658,"user_id":2662234,"display_name":"Jeff E"},"score":30,"creation_date":1421946568,"post_id":13365710,"comment_id":44565294,"body_markdown":"Also note that if the constructor is called from another class, include it in the list in `PrepareForTest`","body":"Also note that if the constructor is called from another class, include it in the list in <code>PrepareForTest</code>"},{"owner":{"account_id":4861487,"reputation":411,"user_id":3920963,"accept_rate":40,"display_name":"udayanga"},"score":0,"creation_date":1522931376,"post_id":13365710,"comment_id":86355181,"body_markdown":"Anyone has an idea why should we prepare the self when &quot;PowerMockito.whenNew&quot; is called?","body":"Anyone has an idea why should we prepare the self when &quot;PowerMockito.whenNew&quot; is called?"},{"owner":{"account_id":150572,"reputation":3954,"user_id":363867,"accept_rate":38,"display_name":"Musa"},"score":1,"creation_date":1655221716,"post_id":13365710,"comment_id":128278778,"body_markdown":"Any junit5 compitable mockito-inline solution?","body":"Any junit5 compitable mockito-inline solution?"}],"tags":[],"owner":{"account_id":1224639,"reputation":1935,"user_id":1190472,"display_name":"Alban"},"comment_count":3,"down_vote_count":0,"up_vote_count":106,"is_accepted":true,"score":106,"last_activity_date":1352827963,"creation_date":1352827963,"answer_id":13365710,"question_id":13364406,"body_markdown":"The code you posted works for me with the latest version of Mockito and Powermockito. Maybe you haven&#39;t prepared A?\r\nTry this:\r\n\r\nA.java\r\n\r\n    public class A {\r\n    \t private final String test;\r\n    \r\n    \tpublic A(String test) {\r\n        \tthis.test = test;\r\n        }\r\n    \r\n        public String check() {\r\n            return &quot;checked &quot; + this.test;\r\n        }\r\n    }\r\n\r\n\r\nMockA.java\r\n\r\n    import static org.hamcrest.MatcherAssert.assertThat;\r\n    import static org.hamcrest.Matchers.equalTo;\r\n    import static org.mockito.Mockito.mock;\r\n    import static org.mockito.Mockito.when;\r\n    \r\n    import org.junit.Test;\r\n    import org.junit.runner.RunWith;\r\n    import org.mockito.Mockito;\r\n    import org.powermock.api.mockito.PowerMockito;\r\n    import org.powermock.core.classloader.annotations.PrepareForTest;\r\n    import org.powermock.modules.junit4.PowerMockRunner;\r\n    \r\n    @RunWith(PowerMockRunner.class)\r\n    @PrepareForTest(A.class)\r\n    public class MockA {\r\n    \t@Test\r\n    \tpublic void test_not_mocked() throws Throwable {\r\n    \t\tassertThat(new A(&quot;random string&quot;).check(), equalTo(&quot;checked random string&quot;));\r\n    \t}\r\n    \t@Test\r\n    \tpublic void test_mocked() throws Throwable {\r\n    \t\t A a = mock(A.class); \r\n    \t\t when(a.check()).thenReturn(&quot;test&quot;);\r\n    \t\t PowerMockito.whenNew(A.class).withArguments(Mockito.anyString()).thenReturn(a);\r\n    \t\t assertThat(new A(&quot;random string&quot;).check(), equalTo(&quot;test&quot;));\r\n    \t}\r\n    }\r\n\r\nBoth tests should pass with mockito 1.9.0, powermockito 1.4.12 and junit 4.8.2","title":"Mock a constructor with parameter","body":"<p>The code you posted works for me with the latest version of Mockito and Powermockito. Maybe you haven't prepared A?\nTry this:</p>\n\n<p>A.java</p>\n\n<pre><code>public class A {\n     private final String test;\n\n    public A(String test) {\n        this.test = test;\n    }\n\n    public String check() {\n        return \"checked \" + this.test;\n    }\n}\n</code></pre>\n\n<p>MockA.java</p>\n\n<pre><code>import static org.hamcrest.MatcherAssert.assertThat;\nimport static org.hamcrest.Matchers.equalTo;\nimport static org.mockito.Mockito.mock;\nimport static org.mockito.Mockito.when;\n\nimport org.junit.Test;\nimport org.junit.runner.RunWith;\nimport org.mockito.Mockito;\nimport org.powermock.api.mockito.PowerMockito;\nimport org.powermock.core.classloader.annotations.PrepareForTest;\nimport org.powermock.modules.junit4.PowerMockRunner;\n\n@RunWith(PowerMockRunner.class)\n@PrepareForTest(A.class)\npublic class MockA {\n    @Test\n    public void test_not_mocked() throws Throwable {\n        assertThat(new A(\"random string\").check(), equalTo(\"checked random string\"));\n    }\n    @Test\n    public void test_mocked() throws Throwable {\n         A a = mock(A.class); \n         when(a.check()).thenReturn(\"test\");\n         PowerMockito.whenNew(A.class).withArguments(Mockito.anyString()).thenReturn(a);\n         assertThat(new A(\"random string\").check(), equalTo(\"test\"));\n    }\n}\n</code></pre>\n\n<p>Both tests should pass with mockito 1.9.0, powermockito 1.4.12 and junit 4.8.2</p>\n"},{"comments":[{"owner":{"account_id":5033898,"reputation":99,"user_id":4043317,"accept_rate":20,"display_name":"Gowtham Kesa"},"score":0,"creation_date":1628661439,"post_id":34265465,"comment_id":121477133,"body_markdown":"What can be done in the cases where `getBObject` is `private` instead of being `protected`","body":"What can be done in the cases where <code>getBObject</code> is <code>private</code> instead of being <code>protected</code>"},{"owner":{"account_id":2078462,"reputation":10342,"user_id":2986984,"accept_rate":80,"display_name":"tkruse"},"score":0,"creation_date":1667842293,"post_id":34265465,"comment_id":131259187,"body_markdown":"See other answer for Mockito &gt;= 3.5.0","body":"See other answer for Mockito &gt;= 3.5.0"}],"tags":[],"owner":{"account_id":1406827,"reputation":1134,"user_id":1334305,"accept_rate":29,"display_name":"user666"},"comment_count":2,"down_vote_count":1,"up_vote_count":14,"is_accepted":false,"score":13,"last_activity_date":1500497816,"creation_date":1450091219,"answer_id":34265465,"question_id":13364406,"body_markdown":"Without Using Powermock .... See the example below based on Ben Glasser answer since it took me some time to figure it out ..hope that saves some times ...\r\n\r\n**Original Class :**\r\n\r\n    public class AClazz {\r\n\r\n    \tpublic void updateObject(CClazz cClazzObj) {\r\n\t    \tlog.debug(&quot;Bundler set.&quot;);\r\n\t\t    cClazzObj.setBundler(new BClazz(cClazzObj, 10));\r\n\t    } \r\n    }\r\n\r\n**Modified Class :**\r\n\r\n    @Slf4j\r\n    public class AClazz {\r\n    \r\n\t    public void updateObject(CClazz cClazzObj) {\r\n\t\t    log.debug(&quot;Bundler set.&quot;);\r\n    \t\tcClazzObj.setBundler(getBObject(cClazzObj, 10));\r\n\t    }\r\n    \r\n\t    protected BClazz getBObject(CClazz cClazzObj, int i) {\r\n\t\t    return new BClazz(cClazzObj, 10);\r\n    \t}\r\n     }\r\n\r\n\r\n**Test Class** \r\n\r\n    public class AClazzTest {\r\n\r\n\t    @InjectMocks\r\n    \t@Spy\r\n    \tprivate AClazz aClazzObj;\r\n\r\n\t    @Mock\r\n\t    private CClazz cClazzObj;\r\n\r\n    \t@Mock\r\n\t    private BClazz bClassObj;\r\n\r\n    \t@Before\r\n\t    public void setUp() throws Exception {\r\n            Mockito.doReturn(bClassObj)\r\n                   .when(aClazzObj)\r\n                   .getBObject(Mockito.eq(cClazzObj), Mockito.anyInt());\r\n\t    }\r\n\r\n\t    @Test\r\n\t    public void testConfigStrategy() {\r\n\t\t    aClazzObj.updateObject(cClazzObj);\r\n\r\n\t\t    Mockito.verify(cClazzObj, Mockito.times(1)).setBundler(bClassObj);\r\n\t    }\r\n    }","title":"Mock a constructor with parameter","body":"<p>Without Using Powermock .... See the example below based on Ben Glasser answer since it took me some time to figure it out ..hope that saves some times ...</p>\n\n<p><strong>Original Class :</strong></p>\n\n<pre><code>public class AClazz {\n\n    public void updateObject(CClazz cClazzObj) {\n        log.debug(\"Bundler set.\");\n        cClazzObj.setBundler(new BClazz(cClazzObj, 10));\n    } \n}\n</code></pre>\n\n<p><strong>Modified Class :</strong></p>\n\n<pre><code>@Slf4j\npublic class AClazz {\n\n    public void updateObject(CClazz cClazzObj) {\n        log.debug(\"Bundler set.\");\n        cClazzObj.setBundler(getBObject(cClazzObj, 10));\n    }\n\n    protected BClazz getBObject(CClazz cClazzObj, int i) {\n        return new BClazz(cClazzObj, 10);\n    }\n }\n</code></pre>\n\n<p><strong>Test Class</strong> </p>\n\n<pre><code>public class AClazzTest {\n\n    @InjectMocks\n    @Spy\n    private AClazz aClazzObj;\n\n    @Mock\n    private CClazz cClazzObj;\n\n    @Mock\n    private BClazz bClassObj;\n\n    @Before\n    public void setUp() throws Exception {\n        Mockito.doReturn(bClassObj)\n               .when(aClazzObj)\n               .getBObject(Mockito.eq(cClazzObj), Mockito.anyInt());\n    }\n\n    @Test\n    public void testConfigStrategy() {\n        aClazzObj.updateObject(cClazzObj);\n\n        Mockito.verify(cClazzObj, Mockito.times(1)).setBundler(bClassObj);\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":362810,"reputation":718,"user_id":706208,"display_name":"apetrelli"},"score":0,"creation_date":1672240765,"post_id":36411850,"comment_id":132249479,"body_markdown":"The question is about Mockito and your answer is also false.","body":"The question is about Mockito and your answer is also false."}],"tags":[],"owner":{"account_id":6699975,"reputation":5536,"user_id":5166818,"display_name":"Amit Kaneria"},"comment_count":1,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1672766129,"creation_date":1459800140,"answer_id":36411850,"question_id":13364406,"body_markdown":"Mockito has limitations testing final, static, and private methods.\r\n\r\n**Alternate Solution:**\r\nwith jMockit testing library, you can do few stuff very easy and straight-forward as below:\r\n\r\nMock constructor of a java.io.File class:\r\n\r\n    new MockUp&lt;File&gt;(){\r\n        @Mock\r\n        public void $init(String pathname){\r\n            System.out.println(pathname);\r\n            // or do whatever you want\r\n        }\r\n    };\r\n\r\n - the public constructor name should be replaced with $init    \r\n - arguments and exceptions thrown remains same    \r\n - return type should be defined as void\r\n\r\nMock a static method:\r\n\r\n - remove static from the method mock signature\r\n - method signature remains same otherwise","title":"Mock a constructor with parameter","body":"<p>Mockito has limitations testing final, static, and private methods.</p>\n<p><strong>Alternate Solution:</strong>\nwith jMockit testing library, you can do few stuff very easy and straight-forward as below:</p>\n<p>Mock constructor of a java.io.File class:</p>\n<pre><code>new MockUp&lt;File&gt;(){\n    @Mock\n    public void $init(String pathname){\n        System.out.println(pathname);\n        // or do whatever you want\n    }\n};\n</code></pre>\n<ul>\n<li>the public constructor name should be replaced with $init</li>\n<li>arguments and exceptions thrown remains same</li>\n<li>return type should be defined as void</li>\n</ul>\n<p>Mock a static method:</p>\n<ul>\n<li>remove static from the method mock signature</li>\n<li>method signature remains same otherwise</li>\n</ul>\n"},{"comments":[{"owner":{"display_name":"user9461710"},"score":3,"creation_date":1596716053,"post_id":60429929,"comment_id":111903884,"body_markdown":"In my opinion, the easiest and best answer. Thank you.","body":"In my opinion, the easiest and best answer. Thank you."},{"owner":{"account_id":976610,"reputation":1541,"user_id":997566,"accept_rate":69,"display_name":"Nayan"},"score":0,"creation_date":1626691009,"post_id":60429929,"comment_id":120952357,"body_markdown":"If there are a lot of parameters, this will be messy.","body":"If there are a lot of parameters, this will be messy."},{"owner":{"account_id":5916763,"reputation":3250,"user_id":4655324,"accept_rate":79,"display_name":"Mevl&#252;t&#214;zdemir"},"score":1,"creation_date":1636730346,"post_id":60429929,"comment_id":123642080,"body_markdown":"@Nayan I Agree. But if you have a lot of parameters/dependencies in your classes, then it looks like something else is wrong.","body":"@Nayan I Agree. But if you have a lot of parameters/dependencies in your classes, then it looks like something else is wrong."},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1638999340,"post_id":60429929,"comment_id":124239536,"body_markdown":"How is this different from a field with `@InjectMocks`?","body":"How is this different from a field with <code>@InjectMocks</code>?"},{"owner":{"account_id":5916763,"reputation":3250,"user_id":4655324,"accept_rate":79,"display_name":"Mevl&#252;t&#214;zdemir"},"score":0,"creation_date":1663701834,"post_id":60429929,"comment_id":130300912,"body_markdown":"That the service itself is a mock, and all dependencies are a mock. With @InjectMocks the class annotated is not a mock, only the dependencies are mocked (i.e. classes annotated with @Mock).","body":"That the service itself is a mock, and all dependencies are a mock. With @InjectMocks the class annotated is not a mock, only the dependencies are mocked (i.e. classes annotated with @Mock)."}],"tags":[],"owner":{"account_id":5916763,"reputation":3250,"user_id":4655324,"accept_rate":79,"display_name":"Mevl&#252;t&#214;zdemir"},"comment_count":5,"down_vote_count":0,"up_vote_count":48,"is_accepted":false,"score":48,"last_activity_date":1622186212,"creation_date":1582795428,"answer_id":60429929,"question_id":13364406,"body_markdown":"With Mockito you can use `withSettings()`. For example if the `CounterService` required 2 dependencies, you can pass them as a mock:\r\n\r\n     UserService userService = Mockito.mock(UserService.class);\r\n     SearchService searchService = Mockito.mock(SearchService.class);   \r\n     CounterService counterService = Mockito.mock(CounterService.class, withSettings().useConstructor(userService, searchService));","title":"Mock a constructor with parameter","body":"<p>With Mockito you can use <code>withSettings()</code>. For example if the <code>CounterService</code> required 2 dependencies, you can pass them as a mock:</p>\n<pre><code> UserService userService = Mockito.mock(UserService.class);\n SearchService searchService = Mockito.mock(SearchService.class);   \n CounterService counterService = Mockito.mock(CounterService.class, withSettings().useConstructor(userService, searchService));\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":1,"creation_date":1638999431,"post_id":65771134,"comment_id":124239574,"body_markdown":"How does this differ from `A a = mock(A.class)`? Also, I don&#39;t think this answered the question about parameters","body":"How does this differ from <code>A a = mock(A.class)</code>? Also, I don&#39;t think this answered the question about parameters"},{"owner":{"account_id":362810,"reputation":718,"user_id":706208,"display_name":"apetrelli"},"score":0,"creation_date":1672240850,"post_id":65771134,"comment_id":132249505,"body_markdown":"Your answer is useful, however it&#39;s missing the part where you can verify the passed parameters, see my answer.","body":"Your answer is useful, however it&#39;s missing the part where you can verify the passed parameters, see my answer."},{"owner":{"account_id":362810,"reputation":718,"user_id":706208,"display_name":"apetrelli"},"score":1,"creation_date":1672240988,"post_id":65771134,"comment_id":132249543,"body_markdown":"@OneCricketeer the difference is that the constructor may be called inside the class you are testing. If you cannot pass to the tested code the constructed object, mocking outside of it is of no use.","body":"@OneCricketeer the difference is that the constructor may be called inside the class you are testing. If you cannot pass to the tested code the constructed object, mocking outside of it is of no use."}],"tags":[],"owner":{"account_id":12480263,"reputation":10843,"user_id":9085273,"display_name":"rieckpil"},"comment_count":3,"down_vote_count":1,"up_vote_count":18,"is_accepted":false,"score":17,"last_activity_date":1694809465,"creation_date":1610959101,"answer_id":65771134,"question_id":13364406,"body_markdown":"Starting with [version 3.5.0 of Mockito][1] and using the `InlineMockMaker`, you can now mock object constructions:\r\n```java\r\ntry (MockedConstruction&lt;A&gt; mocked = mockConstruction(A.class)) {\r\n    A a = new A();\r\n    when(a.check()).thenReturn(&quot;bar&quot;);\r\n}\r\n```\r\nInside the `try-with-resources` construct **all** object constructions are returning a mock.\r\n\r\n\r\n  [1]: https://javadoc.io/static/org.mockito/mockito-core/3.7.7/org/mockito/Mockito.html#mocked_construction","title":"Mock a constructor with parameter","body":"<p>Starting with <a href=\"https://javadoc.io/static/org.mockito/mockito-core/3.7.7/org/mockito/Mockito.html#mocked_construction\" rel=\"nofollow noreferrer\">version 3.5.0 of Mockito</a> and using the <code>InlineMockMaker</code>, you can now mock object constructions:</p>\n<pre class=\"lang-java prettyprint-override\"><code>try (MockedConstruction&lt;A&gt; mocked = mockConstruction(A.class)) {\n    A a = new A();\n    when(a.check()).thenReturn(&quot;bar&quot;);\n}\n</code></pre>\n<p>Inside the <code>try-with-resources</code> construct <strong>all</strong> object constructions are returning a mock.</p>\n"},{"tags":[],"owner":{"account_id":362810,"reputation":718,"user_id":706208,"display_name":"apetrelli"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1672240678,"creation_date":1672240678,"answer_id":74941954,"question_id":13364406,"body_markdown":"Using Mockito 4 (but I suspect this is true for Mockito from 3.5.0 version) you can mock the constructor and, in the initializer, you can assert the values of the parameters.\r\n\r\nFor example:\r\n\r\n    try (MockedConstruction&lt;A&gt; constr = mockConstruction(A.class,\r\n                (mock, context) -&gt; {\r\n                    if (context.getCount() == 1) {\r\n                        assertArrayEquals(context.arguments().toArray(), new Object[] {&quot;test&quot;});\r\n                    } else {\r\n                        fail(&quot;No more calls should happen&quot;);\r\n                    }\r\n                })) {\r\n            // Do the rest of assertions.\r\n        }\r\n\r\nNotice that you need to put the MockedConstruction instantiation in a try-with-resources otherwise the mocked construction is leaked outside the test.","title":"Mock a constructor with parameter","body":"<p>Using Mockito 4 (but I suspect this is true for Mockito from 3.5.0 version) you can mock the constructor and, in the initializer, you can assert the values of the parameters.</p>\n<p>For example:</p>\n<pre><code>try (MockedConstruction&lt;A&gt; constr = mockConstruction(A.class,\n            (mock, context) -&gt; {\n                if (context.getCount() == 1) {\n                    assertArrayEquals(context.arguments().toArray(), new Object[] {&quot;test&quot;});\n                } else {\n                    fail(&quot;No more calls should happen&quot;);\n                }\n            })) {\n        // Do the rest of assertions.\n    }\n</code></pre>\n<p>Notice that you need to put the MockedConstruction instantiation in a try-with-resources otherwise the mocked construction is leaked outside the test.</p>\n"}],"owner":{"account_id":1332320,"reputation":12406,"user_id":1275937,"accept_rate":84,"display_name":"Shengjie"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":412065,"favorite_count":0,"down_vote_count":0,"up_vote_count":112,"accepted_answer_id":13365710,"answer_count":7,"score":112,"last_activity_date":1694809465,"creation_date":1352823430,"question_id":13364406,"body_markdown":"I have a class as below:\r\n\r\n    public class A {\r\n        public A(String test) {\r\n            bla bla bla\r\n        }\r\n\r\n        public String check() {\r\n            bla bla bla\r\n        }\r\n    }\r\n\r\nThe logic in the constructor `A(String test)` and `check()` are the things I am trying to mock. I want any calls like: `new A($$$any string$$$).check()` returns a dummy string `&quot;test&quot;`.\r\n\r\nI tried:\r\n\r\n     A a = mock(A.class); \r\n     when(a.check()).thenReturn(&quot;test&quot;);\r\n     \r\n     String test = a.check(); // to this point, everything works. test shows as &quot;tests&quot;\r\n\r\n     whenNew(A.class).withArguments(Matchers.anyString()).thenReturn(rk);\r\n     // also tried:\r\n     //whenNew(A.class).withParameterTypes(String.class).withArguments(Matchers.anyString()).thenReturn(rk);\r\n\r\n     new A(&quot;random string&quot;).check();  // this doesn&#39;t work\r\n\r\nBut it doesn&#39;t seem to be working. `new A($$$any string$$$).check()` is still going through the constructor logic instead of fetch the mocked object of `A`.\r\n","title":"Mock a constructor with parameter","body":"<p>I have a class as below:</p>\n\n<pre><code>public class A {\n    public A(String test) {\n        bla bla bla\n    }\n\n    public String check() {\n        bla bla bla\n    }\n}\n</code></pre>\n\n<p>The logic in the constructor <code>A(String test)</code> and <code>check()</code> are the things I am trying to mock. I want any calls like: <code>new A($$$any string$$$).check()</code> returns a dummy string <code>\"test\"</code>.</p>\n\n<p>I tried:</p>\n\n<pre><code> A a = mock(A.class); \n when(a.check()).thenReturn(\"test\");\n\n String test = a.check(); // to this point, everything works. test shows as \"tests\"\n\n whenNew(A.class).withArguments(Matchers.anyString()).thenReturn(rk);\n // also tried:\n //whenNew(A.class).withParameterTypes(String.class).withArguments(Matchers.anyString()).thenReturn(rk);\n\n new A(\"random string\").check();  // this doesn't work\n</code></pre>\n\n<p>But it doesn't seem to be working. <code>new A($$$any string$$$).check()</code> is still going through the constructor logic instead of fetch the mocked object of <code>A</code>.</p>\n"},{"tags":["java","android","json","gson","nextcloud"],"comments":[{"owner":{"account_id":17528529,"reputation":306,"user_id":12713089,"display_name":"Hossein Shahmohammadi"},"score":0,"creation_date":1694796754,"post_id":77114099,"comment_id":135943043,"body_markdown":"could you share server json response?","body":"could you share server json response?"},{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":0,"creation_date":1694797216,"post_id":77114099,"comment_id":135943124,"body_markdown":"sounds like GSON was expecting a JSON array, but the response from the server was a string (and likely an invalid JSON).","body":"sounds like GSON was expecting a JSON array, but the response from the server was a string (and likely an invalid JSON)."},{"owner":{"account_id":28121958,"reputation":69,"user_id":21488044,"display_name":"Lucia"},"score":0,"creation_date":1694797316,"post_id":77114099,"comment_id":135943142,"body_markdown":"@experimentunit1998X Yes thats the logcat said.","body":"@experimentunit1998X Yes thats the logcat said."},{"owner":{"account_id":28121958,"reputation":69,"user_id":21488044,"display_name":"Lucia"},"score":0,"creation_date":1694797652,"post_id":77114099,"comment_id":135943205,"body_markdown":"@HosseinShahmohammadi I&#39;m not familiar with server side but i believe the API returns JSON as I have seen when my friend tested via Postman.","body":"@HosseinShahmohammadi I&#39;m not familiar with server side but i believe the API returns JSON as I have seen when my friend tested via Postman."},{"owner":{"account_id":28121958,"reputation":69,"user_id":21488044,"display_name":"Lucia"},"score":0,"creation_date":1694797680,"post_id":77114099,"comment_id":135943209,"body_markdown":"@experimentunit1998X How to do that?","body":"@experimentunit1998X How to do that?"},{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":0,"creation_date":1694797956,"post_id":77114099,"comment_id":135943251,"body_markdown":"&quot;you have seen when your friend tested via Postman&quot;, when was that? how long ago was that? the server could be down now; are you confidently sure that the server is returning a valid JSON?","body":"&quot;you have seen when your friend tested via Postman&quot;, when was that? how long ago was that? the server could be down now; are you confidently sure that the server is returning a valid JSON?"},{"owner":{"account_id":28121958,"reputation":69,"user_id":21488044,"display_name":"Lucia"},"score":0,"creation_date":1694797956,"post_id":77114099,"comment_id":135943252,"body_markdown":"@experimentunit1998X But the error is from `onFailure` so that there&#39;s no `response` to log...","body":"@experimentunit1998X But the error is from <code>onFailure</code> so that there&#39;s no <code>response</code> to log..."},{"owner":{"account_id":28121958,"reputation":69,"user_id":21488044,"display_name":"Lucia"},"score":0,"creation_date":1694798365,"post_id":77114099,"comment_id":135943327,"body_markdown":"@experimentunit1998X I comment all the code that I parse it with Gson. But it still shows the same error, so that the `Log.e(TAG, &quot;JSON: &quot; + jsonResponse);` in `onResponse` cannot be executed.","body":"@experimentunit1998X I comment all the code that I parse it with Gson. But it still shows the same error, so that the <code>Log.e(TAG, &quot;JSON: &quot; + jsonResponse);</code> in <code>onResponse</code> cannot be executed."},{"owner":{"account_id":17528529,"reputation":306,"user_id":12713089,"display_name":"Hossein Shahmohammadi"},"score":0,"creation_date":1694798769,"post_id":77114099,"comment_id":135943383,"body_markdown":"@Lucia exactly. If I see what is the json response to you I am able to answer your question.","body":"@Lucia exactly. If I see what is the json response to you I am able to answer your question."},{"owner":{"account_id":28121958,"reputation":69,"user_id":21488044,"display_name":"Lucia"},"score":0,"creation_date":1694798844,"post_id":77114099,"comment_id":135943396,"body_markdown":"@HosseinShahmohammadi You wanna see the return value of that API?","body":"@HosseinShahmohammadi You wanna see the return value of that API?"},{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":0,"creation_date":1694798909,"post_id":77114099,"comment_id":135943407,"body_markdown":"yes. thats a must. please show the return value of the API and if possible see what the API returns while you are running your code","body":"yes. thats a must. please show the return value of the API and if possible see what the API returns while you are running your code"},{"owner":{"account_id":17528529,"reputation":306,"user_id":12713089,"display_name":"Hossein Shahmohammadi"},"score":0,"creation_date":1694798994,"post_id":77114099,"comment_id":135943422,"body_markdown":"@Lucia yes. It is what I mean.","body":"@Lucia yes. It is what I mean."},{"owner":{"account_id":28121958,"reputation":69,"user_id":21488044,"display_name":"Lucia"},"score":0,"creation_date":1694801633,"post_id":77114099,"comment_id":135943874,"body_markdown":"@HosseinShahmohammadi I created this API in the server.\n`    public function getNCUserIds() {\n        $users = \\OC::$server-&gt;getUserManager()-&gt;search(&#39;&#39;);\n        $userIds = array_map(function($user) {\n            return $user-&gt;getUID();\n        }, $users);\n        return new JSONResponse([&#39;users&#39; =&gt; $userIds]);\n    }`","body":"@HosseinShahmohammadi I created this API in the server. `    public function getNCUserIds() {         $users = \\OC::$server-&gt;getUserManager()-&gt;search(&#39;&#39;);         $userIds = array_map(function($user) {             return $user-&gt;getUID();         }, $users);         return new JSONResponse([&#39;users&#39; =&gt; $userIds]);     }`"}],"owner":{"account_id":28121958,"reputation":69,"user_id":21488044,"display_name":"Lucia"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1694809407,"creation_date":1694796400,"question_id":77114099,"body_markdown":"I&#39;m trying to get all user id in Nextcloud server. I have this Login.java. I can call getNCUserIds normally in web app, but in Android app, there&#39;s an error. I check logcat and here it is:\r\n                                                                \r\n\r\n&gt; Response: null\r\n\r\nThe response should not be null because there&#39;s at least one account that is admin. I tried to log the status code but it does not display.\r\nHere&#39;s the API in server side that using PHP:\r\n\r\n    public function getNCUserIds() {\r\n        $users = \\OC::$server-&gt;getUserManager()-&gt;search(&#39;&#39;);\r\n        $userIds = array_map(function($user) {\r\n            return $user-&gt;getUID();\r\n        }, $users);\r\n        return new JSONResponse([&#39;users&#39; =&gt; $userIds]);\r\n    }\r\n\r\nHere&#39;s my model to store the JSON:\r\n    \r\n    import com.google.gson.annotations.Expose;\r\n    import com.google.gson.annotations.SerializedName;\r\n    \r\n    import java.util.List;\r\n    \r\n    public class YourResponseModel {\r\n        @SerializedName(&quot;users&quot;)\r\n        @Expose\r\n        private List&lt;String&gt; users;\r\n    \r\n        public List&lt;String&gt; getUsers() {\r\n            return users;\r\n        }\r\n    }\r\n\r\n\r\nHere&#39;s Login.java. I call an API to check if I logged in successfully or not:\r\n    \r\n    import android.net.Uri;\r\n    import android.os.Bundle;\r\n    import android.util.Log;\r\n    import android.view.View;\r\n    import android.widget.Button;\r\n    import android.widget.Toast;\r\n    import androidx.appcompat.app.AppCompatActivity;\r\n    import com.example.app.R;\r\n    import com.example.app.api.AndroidNCApi;\r\n    import com.example.app.api.ApiProvider;\r\n    import com.example.app.api.GsonConfig;\r\n    import com.example.app.database.model.Account;\r\n    import com.example.app.database.model.YourResponseModel;\r\n    import com.google.gson.Gson;\r\n    import com.google.gson.reflect.TypeToken;\r\n    import com.owncloud.android.lib.common.OwnCloudClient;\r\n    import com.owncloud.android.lib.common.OwnCloudClientFactory;\r\n    import com.owncloud.android.lib.common.OwnCloudCredentials;\r\n    import com.owncloud.android.lib.common.OwnCloudCredentialsFactory;\r\n    import retrofit2.Call;\r\n    import retrofit2.Callback;\r\n    import retrofit2.HttpException;\r\n    import retrofit2.Response;\r\n    \r\n    import java.io.Reader;\r\n    import java.lang.reflect.Type;\r\n    import java.util.List;\r\n    import java.util.concurrent.ExecutorService;\r\n    import java.util.concurrent.Executors;\r\n    \r\n    public class Login extends AppCompatActivity {\r\n    \r\n        private static final String TAG = &quot;LoginActivity&quot;;\r\n        private Button loginButton;\r\n        private OwnCloudClient mClient;\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_login);\r\n    \r\n            loginButton = findViewById(R.id.btnLogin);\r\n    \r\n            loginButton.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    String username = &quot;admin&quot;;\r\n                    String password = &quot;admin&quot;;\r\n    \r\n                    ExecutorService executor = Executors.newSingleThreadExecutor();\r\n                    executor.execute(new Runnable() {\r\n                        @Override\r\n                        public void run() {\r\n                            performNetworkOperation(username, password);\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n        }\r\n    \r\n        private void performNetworkOperation(String username, String password) {\r\n            try {\r\n                Uri serverUri = Uri.parse(getString(R.string.url_server));\r\n                mClient = OwnCloudClientFactory.createOwnCloudClient(serverUri, Login.this, true);\r\n                mClient.setCredentials(\r\n                        OwnCloudCredentialsFactory.newBasicCredentials(username, password)\r\n                );\r\n\r\n                AndroidNCApi api = ApiProvider.getClient(Login.this).create(AndroidNCApi.class);\r\n    \r\n                Call&lt;YourResponseModel&gt; call = api.getNCUserIds();\r\n    \r\n                call.enqueue(new Callback&lt;YourResponseModel&gt;() {\r\n                    @Override\r\n                    public void onResponse(Call&lt;YourResponseModel&gt; call, Response&lt;YourResponseModel&gt; response) {\r\n                        Log.e(TAG, &quot;Response: &quot; + response.body());\r\n                        if (response.isSuccessful()) {\r\n                            YourResponseModel responseData = response.body();\r\n                            Log.e(TAG, &quot;responseData: &quot; + responseData.toString());\r\n                            if (responseData != null) {\r\n                                List&lt;String&gt; userIDs = responseData.getUsers();\r\n                                Log.e(TAG, &quot;User IDs: &quot; + userIDs);\r\n    \r\n                                if (userIDs != null &amp;&amp; !userIDs.isEmpty()) {\r\n                                    runOnUiThread(new Runnable() {\r\n                                        @Override\r\n                                        public void run() {\r\n                                            Toast.makeText(Login.this, &quot;Login successful&quot;, Toast.LENGTH_SHORT).show();\r\n                                        }\r\n                                    });\r\n                                } else {\r\n                                    runOnUiThread(new Runnable() {\r\n                                        @Override\r\n                                        public void run() {\r\n                                            Toast.makeText(Login.this, &quot;No user IDs found&quot;, Toast.LENGTH_SHORT).show();\r\n                                        }\r\n                                    });\r\n                                }\r\n                            } else {\r\n                                runOnUiThread(new Runnable() {\r\n                                    @Override\r\n                                    public void run() {\r\n                                        Toast.makeText(Login.this, &quot;Response is empty&quot;, Toast.LENGTH_SHORT).show();\r\n                                    }\r\n                                });\r\n                            }\r\n                        } else {\r\n                            runOnUiThread(new Runnable() {\r\n                                @Override\r\n                                public void run() {\r\n                                    Toast.makeText(Login.this, &quot;Login failed&quot;, Toast.LENGTH_SHORT).show();\r\n                                }\r\n                            });\r\n                        }\r\n                    }\r\n    \r\n                    @Override\r\n                    public void onFailure(Call&lt;YourResponseModel&gt; call, Throwable t) {\r\n                        Log.e(TAG, &quot;Error: &quot; + t.getMessage());\r\n                        runOnUiThread(new Runnable() {\r\n                            @Override\r\n                            public void run() {\r\n                                Toast.makeText(Login.this, &quot;Network error&quot;, Toast.LENGTH_SHORT).show();\r\n                            }\r\n                        });\r\n                    }\r\n                });\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    }\r\n\r\n","title":"Response: null in logcat","body":"<p>I'm trying to get all user id in Nextcloud server. I have this Login.java. I can call getNCUserIds normally in web app, but in Android app, there's an error. I check logcat and here it is:</p>\n<blockquote>\n<p>Response: null</p>\n</blockquote>\n<p>The response should not be null because there's at least one account that is admin. I tried to log the status code but it does not display.\nHere's the API in server side that using PHP:</p>\n<pre><code>public function getNCUserIds() {\n    $users = \\OC::$server-&gt;getUserManager()-&gt;search('');\n    $userIds = array_map(function($user) {\n        return $user-&gt;getUID();\n    }, $users);\n    return new JSONResponse(['users' =&gt; $userIds]);\n}\n</code></pre>\n<p>Here's my model to store the JSON:</p>\n<pre><code>import com.google.gson.annotations.Expose;\nimport com.google.gson.annotations.SerializedName;\n\nimport java.util.List;\n\npublic class YourResponseModel {\n    @SerializedName(&quot;users&quot;)\n    @Expose\n    private List&lt;String&gt; users;\n\n    public List&lt;String&gt; getUsers() {\n        return users;\n    }\n}\n</code></pre>\n<p>Here's Login.java. I call an API to check if I logged in successfully or not:</p>\n<pre><code>import android.net.Uri;\nimport android.os.Bundle;\nimport android.util.Log;\nimport android.view.View;\nimport android.widget.Button;\nimport android.widget.Toast;\nimport androidx.appcompat.app.AppCompatActivity;\nimport com.example.app.R;\nimport com.example.app.api.AndroidNCApi;\nimport com.example.app.api.ApiProvider;\nimport com.example.app.api.GsonConfig;\nimport com.example.app.database.model.Account;\nimport com.example.app.database.model.YourResponseModel;\nimport com.google.gson.Gson;\nimport com.google.gson.reflect.TypeToken;\nimport com.owncloud.android.lib.common.OwnCloudClient;\nimport com.owncloud.android.lib.common.OwnCloudClientFactory;\nimport com.owncloud.android.lib.common.OwnCloudCredentials;\nimport com.owncloud.android.lib.common.OwnCloudCredentialsFactory;\nimport retrofit2.Call;\nimport retrofit2.Callback;\nimport retrofit2.HttpException;\nimport retrofit2.Response;\n\nimport java.io.Reader;\nimport java.lang.reflect.Type;\nimport java.util.List;\nimport java.util.concurrent.ExecutorService;\nimport java.util.concurrent.Executors;\n\npublic class Login extends AppCompatActivity {\n\n    private static final String TAG = &quot;LoginActivity&quot;;\n    private Button loginButton;\n    private OwnCloudClient mClient;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_login);\n\n        loginButton = findViewById(R.id.btnLogin);\n\n        loginButton.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                String username = &quot;admin&quot;;\n                String password = &quot;admin&quot;;\n\n                ExecutorService executor = Executors.newSingleThreadExecutor();\n                executor.execute(new Runnable() {\n                    @Override\n                    public void run() {\n                        performNetworkOperation(username, password);\n                    }\n                });\n            }\n        });\n    }\n\n    private void performNetworkOperation(String username, String password) {\n        try {\n            Uri serverUri = Uri.parse(getString(R.string.url_server));\n            mClient = OwnCloudClientFactory.createOwnCloudClient(serverUri, Login.this, true);\n            mClient.setCredentials(\n                    OwnCloudCredentialsFactory.newBasicCredentials(username, password)\n            );\n\n            AndroidNCApi api = ApiProvider.getClient(Login.this).create(AndroidNCApi.class);\n\n            Call&lt;YourResponseModel&gt; call = api.getNCUserIds();\n\n            call.enqueue(new Callback&lt;YourResponseModel&gt;() {\n                @Override\n                public void onResponse(Call&lt;YourResponseModel&gt; call, Response&lt;YourResponseModel&gt; response) {\n                    Log.e(TAG, &quot;Response: &quot; + response.body());\n                    if (response.isSuccessful()) {\n                        YourResponseModel responseData = response.body();\n                        Log.e(TAG, &quot;responseData: &quot; + responseData.toString());\n                        if (responseData != null) {\n                            List&lt;String&gt; userIDs = responseData.getUsers();\n                            Log.e(TAG, &quot;User IDs: &quot; + userIDs);\n\n                            if (userIDs != null &amp;&amp; !userIDs.isEmpty()) {\n                                runOnUiThread(new Runnable() {\n                                    @Override\n                                    public void run() {\n                                        Toast.makeText(Login.this, &quot;Login successful&quot;, Toast.LENGTH_SHORT).show();\n                                    }\n                                });\n                            } else {\n                                runOnUiThread(new Runnable() {\n                                    @Override\n                                    public void run() {\n                                        Toast.makeText(Login.this, &quot;No user IDs found&quot;, Toast.LENGTH_SHORT).show();\n                                    }\n                                });\n                            }\n                        } else {\n                            runOnUiThread(new Runnable() {\n                                @Override\n                                public void run() {\n                                    Toast.makeText(Login.this, &quot;Response is empty&quot;, Toast.LENGTH_SHORT).show();\n                                }\n                            });\n                        }\n                    } else {\n                        runOnUiThread(new Runnable() {\n                            @Override\n                            public void run() {\n                                Toast.makeText(Login.this, &quot;Login failed&quot;, Toast.LENGTH_SHORT).show();\n                            }\n                        });\n                    }\n                }\n\n                @Override\n                public void onFailure(Call&lt;YourResponseModel&gt; call, Throwable t) {\n                    Log.e(TAG, &quot;Error: &quot; + t.getMessage());\n                    runOnUiThread(new Runnable() {\n                        @Override\n                        public void run() {\n                            Toast.makeText(Login.this, &quot;Network error&quot;, Toast.LENGTH_SHORT).show();\n                        }\n                    });\n                }\n            });\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","jpa","entitymanager"],"comments":[{"owner":{"account_id":5955901,"reputation":10524,"user_id":4682610,"accept_rate":29,"display_name":"Florian Schaetz"},"score":0,"creation_date":1442172880,"post_id":32553739,"comment_id":52963330,"body_markdown":"There is no EntityManager nor an EntityManagerFactory in your configuration....","body":"There is no EntityManager nor an EntityManagerFactory in your configuration...."}],"answers":[{"tags":[],"owner":{"account_id":2365781,"reputation":1499,"user_id":2071486,"display_name":"Oleksandr Loushkin"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1442173058,"creation_date":1442173058,"answer_id":32553785,"question_id":32553739,"body_markdown":"You need to add entityManagerFactory like this:\r\n\r\n    &lt;bean id=&quot;entityManagerFactory&quot; class=&quot;org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean&quot;&gt;\r\n        &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot; /&gt;\r\n        &lt;property name=&quot;jpaVendorAdapter&quot;&gt;\r\n            &lt;bean class=&quot;org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter&quot;/&gt;\r\n        &lt;/property&gt;\r\n        &lt;property name=&quot;jpaProperties&quot; ref=&quot;hibernatePropertiesBean&quot;/&gt;\r\n        &lt;property name=&quot;packagesToScan&quot;&gt;\r\n            &lt;list&gt;\r\n                &lt;value&gt;your.packages&lt;/value&gt;\r\n            &lt;/list&gt;\r\n        &lt;/property&gt;\r\n    &lt;/bean&gt;","title":"No qualifying bean of type [javax.persistence.EntityManagerFactory] is defined&quot;}}","body":"<p>You need to add entityManagerFactory like this:</p>\n\n<pre><code>&lt;bean id=\"entityManagerFactory\" class=\"org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean\"&gt;\n    &lt;property name=\"dataSource\" ref=\"dataSource\" /&gt;\n    &lt;property name=\"jpaVendorAdapter\"&gt;\n        &lt;bean class=\"org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter\"/&gt;\n    &lt;/property&gt;\n    &lt;property name=\"jpaProperties\" ref=\"hibernatePropertiesBean\"/&gt;\n    &lt;property name=\"packagesToScan\"&gt;\n        &lt;list&gt;\n            &lt;value&gt;your.packages&lt;/value&gt;\n        &lt;/list&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":125029,"reputation":330,"user_id":682256,"display_name":"Simon Logic"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694809298,"creation_date":1694809298,"answer_id":77115157,"question_id":32553739,"body_markdown":"If you disabled DataSourceAutoConfiguration like me (i have switchable config between postgres and oracle via profiles) then make sure DataSource bean is really created. In my case was a stupid typo in profile activation: -Dspring.profiles.include=p**r**ostgres\r\n\r\nDatasource configuration bean was looking like\r\n\r\n    @Configuration\r\n    @Profile(&quot;postgres&quot;)\r\n    public class PgJdbcConfig {\r\n      @Bean\r\n      public DataSource getDatasource(DataSourceProperties properties) {\r\n        ...\r\n\r\n\r\n\r\n","title":"No qualifying bean of type [javax.persistence.EntityManagerFactory] is defined&quot;}}","body":"<p>If you disabled DataSourceAutoConfiguration like me (i have switchable config between postgres and oracle via profiles) then make sure DataSource bean is really created. In my case was a stupid typo in profile activation: -Dspring.profiles.include=p<strong>r</strong>ostgres</p>\n<p>Datasource configuration bean was looking like</p>\n<pre><code>@Configuration\n@Profile(&quot;postgres&quot;)\npublic class PgJdbcConfig {\n  @Bean\n  public DataSource getDatasource(DataSourceProperties properties) {\n    ...\n</code></pre>\n"}],"owner":{"display_name":"user4956718"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2626,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":32553785,"answer_count":2,"score":0,"last_activity_date":1694809298,"creation_date":1442172776,"question_id":32553739,"body_markdown":"I&#39;m having problem with my web-app, cannot deploy the project to WildFly.\r\n\r\nProblem:\r\n\r\n    Caused by: java.lang.RuntimeException: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;bookedRoomDao&#39;: Injection of persistence dependencies failed; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type [javax.persistence.EntityManagerFactory] is defined\r\n    \tat io.undertow.servlet.core.DeploymentManagerImpl.deploy(DeploymentManagerImpl.java:222)\r\n    \tat org.wildfly.extension.undertow.deployment.UndertowDeploymentService.startContext(UndertowDeploymentService.java:87)\r\n    \tat org.wildfly.extension.undertow.deployment.UndertowDeploymentService.start(UndertowDeploymentService.java:72)\r\n    \tat org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1948) [jboss-msc-1.2.2.Final.jar:1.2.2.Final]\r\n    \tat org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1881) [jboss-msc-1.2.2.Final.jar:1.2.2.Final]\r\n    \t... 3 more\r\n\r\nHere is my application-context.xml :\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n           xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n           xmlns:p=&quot;http://www.springframework.org/schema/p&quot;\r\n           xmlns:context=&quot;http://www.springframework.org/schema/context&quot;\r\n           xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;\r\n           xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.2.xsd\r\n           http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.2.xsd\r\n           http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.2.xsd&quot;&gt;\r\n        \r\n        &lt;bean id=&quot;messageSource&quot; class=&quot;org.springframework.context.support.ResourceBundleMessageSource&quot;&gt; \r\n            &lt;property name=&quot;basenames&quot;&gt; \r\n                &lt;list&gt; \r\n                    &lt;value&gt;text_resources&lt;/value&gt; \r\n                &lt;/list&gt; \r\n            &lt;/property&gt; \r\n        &lt;/bean&gt;\r\n        \r\n        &lt;bean name=&quot;exceptionResolver&quot; class=&quot;com.booking.common.HotelException&quot; autowire=&quot;byName&quot;&gt;\r\n            &lt;property name=&quot;exceptionMappings&quot;&gt;\r\n                &lt;props&gt;\r\n                    &lt;prop key=&quot;javax.servlet.jsp.JspException&quot;&gt;exception&lt;/prop&gt;\r\n                    &lt;prop key=&quot;javax.servlet.ServletException&quot;&gt;exception&lt;/prop&gt;\r\n                    &lt;prop key=&quot;java.lang.Exception&quot;&gt;exception&lt;/prop&gt;\r\n                    &lt;prop key=&quot;java.lang.Throwable&quot;&gt;exception&lt;/prop&gt;\r\n                    &lt;prop key=&quot;java.lang.RuntimeException&quot;&gt;exception&lt;/prop&gt;\r\n                    &lt;prop key=&quot;org.springframework.web.bind.ServletRequestBindingException&quot;&gt;exception&lt;/prop&gt;\r\n                &lt;/props&gt;\r\n            &lt;/property&gt;\r\n        &lt;/bean&gt;\r\n        \r\n    \r\n        &lt;bean id=&quot;mailSession&quot; class=&quot;org.springframework.jndi.JndiObjectFactoryBean&quot;&gt;\r\n            &lt;property name=&quot;jndiName&quot; value=&quot;java:jboss/mail/Default&quot;/&gt;\r\n        &lt;/bean&gt;\r\n    \r\n        &lt;bean id=&quot;dataSource&quot; class=&quot;org.springframework.jdbc.datasource.SimpleDriverDataSource&quot;&gt;\r\n            &lt;property name=&quot;driverClass&quot; value=&quot;com.mysql.jdbc.Driver&quot;/&gt;\r\n            &lt;property name=&quot;url&quot; value=&quot;jdbc:mysql://localhost:3306/booking-war&quot;/&gt;\r\n            &lt;property name=&quot;username&quot; value=&quot;root&quot;/&gt;\r\n            &lt;property name=&quot;password&quot; value=&quot;root&quot;/&gt;\r\n        &lt;/bean&gt;\r\n            \r\n        &lt;bean id=&quot;sessionFactory&quot; class=&quot;org.springframework.orm.hibernate4.LocalSessionFactoryBean&quot; lazy-init=&quot;true&quot; autowire=&quot;default&quot;&gt;\r\n            &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot; /&gt;\r\n            &lt;property name=&quot;packagesToScan&quot; value=&quot;com.booking.member.vo&quot; /&gt;\r\n                     \r\n            &lt;property name=&quot;hibernateProperties&quot;&gt;\r\n                &lt;props&gt;\r\n                    &lt;prop key=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.MySQLDialect&lt;/prop&gt;\r\n                &lt;/props&gt;\r\n            &lt;/property&gt;\r\n        &lt;/bean&gt;\r\n    \r\n        &lt;bean id=&quot;txManager&quot; class=&quot;org.springframework.orm.hibernate4.HibernateTransactionManager&quot;&gt;\r\n            &lt;property name=&quot;sessionFactory&quot; ref=&quot;sessionFactory&quot; /&gt;\r\n        &lt;/bean&gt;    \r\n        \r\n        &lt;tx:annotation-driven transaction-manager=&quot;txManager&quot;/&gt;\r\n    \r\n        &lt;context:component-scan base-package=&quot;com.booking.dao&quot; /&gt;\r\n            &lt;context:component-scan base-package=&quot;com.booking.member&quot; /&gt;\r\n        &lt;context:component-scan base-package=&quot;com.booking.service&quot; /&gt;\r\n        \r\n    &lt;/beans&gt;\r\n\r\nUserDaoImpl.java\r\n\r\n    package com.booking.dao.impl;\r\n    \r\n    import java.util.List;\r\n    \r\n    import javax.persistence.EntityManager;\r\n    import javax.persistence.PersistenceContext;\r\n    \r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.stereotype.Repository;\r\n    \r\n    import com.booking.dao.GenericDao;\r\n    import com.booking.dao.UserDao;\r\n    import com.booking.member.vo.AuthenticateUser;\r\n    \r\n    @Repository(&quot;userDao&quot;)\r\n    public class UserDaoImpl implements UserDao{\r\n    \t\r\n    \t@Autowired\r\n    \tGenericDao&lt;AuthenticateUser,Long&gt; genericDao;\r\n    \t\r\n    \t@PersistenceContext\r\n    \tEntityManager entityManager;\r\n    \r\n            @Override\r\n    \tpublic List&lt;AuthenticateUser&gt; userByName(String username) {\r\n    \t\tString queryStr = &quot;SELECT u FROM AuthenticateUser u WHERE u.username= ? &quot;;\r\n    \t\treturn entityManager.createQuery(queryStr)\r\n    \t\t\t   .setParameter(1,username).getResultList();\r\n    \t}\r\n    \r\n    \tpublic AuthenticateUser create(AuthenticateUser t) {\r\n    \t\treturn genericDao.create(t);\r\n    \t}\r\n    \r\n    \tpublic AuthenticateUser read(Long id, Class&lt;AuthenticateUser&gt; c) {\r\n    \t\treturn genericDao.read(id, c);\r\n    \t}\r\n    \r\n    \tpublic AuthenticateUser update(AuthenticateUser t) {\r\n    \t\treturn genericDao.update(t);\r\n    \t}\r\n    \r\n    \tpublic void delete(AuthenticateUser t) {\r\n    \t\tgenericDao.delete(t);\r\n    \t}\r\n    \r\n    \tpublic List&lt;AuthenticateUser&gt; getAll(Class&lt;AuthenticateUser&gt; c) {\r\n    \t\treturn genericDao.getAll(c);\r\n    \t}\r\n    }\r\n\r\nGenericDaoImpl.java : \r\n\r\n    package com.booking.dao.impl;\r\n    \r\n    import java.io.Serializable;\r\n    import java.util.List;\r\n    \r\n    import javax.persistence.EntityManager;\r\n    import javax.persistence.PersistenceContext;\r\n    \r\n    import org.hibernate.Session;\r\n    import org.hibernate.criterion.Example;\r\n    import org.hibernate.ejb.HibernateEntityManager;\r\n    import org.springframework.stereotype.Repository;\r\n    \r\n    import com.booking.dao.GenericDao;\r\n    import org.hibernate.SessionFactory;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    \r\n    \r\n    @Repository(&quot;genericDao&quot;)\r\n    public class GenericDaoImpl&lt;T,PK extends Serializable&gt; implements GenericDao&lt;T, PK&gt; {\r\n    \r\n    \r\n        protected Class&lt;T&gt; entityClass;\r\n    \r\n        @PersistenceContext\r\n        protected EntityManager entityManager;\r\n    \r\n        @Override\r\n    \tpublic T create(T t) {\r\n            this.entityManager.persist(t);\r\n            return t;\r\n    \t}\r\n    \r\n        @Override\r\n    \tpublic T read(PK id,Class&lt;T&gt; c) {\r\n    \t\treturn (T)this.entityManager.find(c, id);\r\n    \t}\r\n    \r\n        @Override\r\n    \tpublic T update(T t) {\r\n    \t\t return this.entityManager.merge(t);\r\n    \t}\r\n    \r\n        @Override\r\n    \tpublic void delete(T t) {\r\n           t = this.entityManager.merge(t);\r\n           this.entityManager.remove(t);\r\n    \t}\r\n    \t\r\n        @Override\r\n    \tpublic List&lt;T&gt; getAll(Class&lt;T&gt; c){\r\n    \t\treturn this.entityManager.createQuery(&quot;SELECT o FROM &quot;+ c.getName() +&quot; o&quot;).getResultList();\r\n    \t}\r\n    \t\r\n        @Override\r\n    \tpublic List&lt;T&gt; getByFilter(T filter){\r\n    \t\tSession session = ((HibernateEntityManager)entityManager.unwrap(HibernateEntityManager.class)).getSession();\r\n    \t\treturn session.createCriteria(filter.getClass()).add(Example.create(filter)).list();\r\n    \t}\r\n    \r\n    }\r\n\r\nBookedRoomDaoImpl.java : \r\n\r\n    package com.booking.dao.impl;\r\n    \r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    \r\n    import javax.persistence.EntityManager;\r\n    import javax.persistence.NoResultException;\r\n    import javax.persistence.PersistenceContext;\r\n    \r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    \r\n    import org.springframework.stereotype.Repository;\r\n    \r\n    import com.booking.common.CommonUtils;\r\n    import com.booking.dao.BookedRoomDao;\r\n    import com.booking.dao.GenericDao;\r\n    import com.booking.member.vo.BookedRoom;\r\n    import com.booking.member.vo.Booking;\r\n    import com.booking.member.vo.TimeRange;\r\n    import org.hibernate.criterion.Restrictions;\r\n    \r\n    \r\n    @Repository(&quot;bookedRoomDao&quot;)\r\n    public class BookedRoomDaoImpl implements BookedRoomDao{\r\n    \t\r\n            @PersistenceContext\r\n    \tEntityManager entityManager;\r\n    \t\r\n    \t@Autowired\r\n    \tGenericDao&lt;TimeRange,Long&gt; timeRangeDao;\r\n    \t\r\n            @Override\r\n    \tpublic List&lt;BookedRoom&gt; getBookedRooms(long id,String date){\r\n    \t\tList&lt;BookedRoom&gt; list = new ArrayList&lt;BookedRoom&gt;();\r\n    \t\tList&lt;TimeRange&gt; timeRanges = timeRangeDao.getAll(TimeRange.class);\r\n    \t\tfor(TimeRange timeRange:timeRanges){\r\n    \t\t\tBookedRoom bookedRoom = new BookedRoom();\r\n    \t\t\tBooking booking = null;\r\n    \t\t\ttry{\r\n    \t\t\t\tbooking = (Booking)entityManager.createNativeQuery(&quot;select * from Booking b where b.time_range = ?1 and b.room = ?2 and date_format(date_booked,&#39;%Y-%m-%d&#39;) = ?3&quot;,Booking.class)\r\n    \t\t\t\t.setParameter(1,timeRange.getId())\r\n    \t\t\t\t.setParameter(2,id)\r\n    \t\t\t\t.setParameter(3,date)\r\n    \t\t\t\t.getSingleResult();\r\n    \t\t\t\t\r\n    \t\t\t}catch (NoResultException e) {\r\n    \t\t\t\t\r\n    \t\t\t}\r\n    \r\n    \t\t\tif(booking!=null){\r\n    \t\t\t\tbookedRoom.setBookingId(booking.getBookingId());\r\n    \t\t\t\tbookedRoom.setDateBooked(booking.getDateBooked());\r\n    \t\t\t\tbookedRoom.setRoomName(booking.getRoom().getRoomName());\r\n    \t\t\t\tbookedRoom.setUserName(booking.getUserid().getUsername());\r\n    \t\t\t\tif(booking.getUserid().getId()==CommonUtils.getCurrentUserProfile().getUserId()){\r\n    \t\t\t\t\tbookedRoom.setOwner(true);\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t\t\r\n    \t\t\tbookedRoom.setFromTime(timeRange.getFromTime());\r\n    \t\t\tbookedRoom.setToTime(timeRange.getToTime());\r\n    \t\t\tbookedRoom.setTrId(timeRange.getId());\r\n    \t\t\tlist.add(bookedRoom);\r\n    \t\t}\r\n    \t\treturn list;\r\n    \t}\r\n            @Override\r\n    \tpublic void deleteBooking(long bookingId,long userId){\r\n    \t\tentityManager.createNativeQuery(&quot;delete from booking where booking_id=?1 and userid=?2&quot;)\r\n    \t\t.setParameter(1, bookingId)\r\n    \t\t.setParameter(2,userId)\r\n    \t\t.executeUpdate();\r\n    \t}\r\n            @Override\r\n    \tpublic List getBookingByRoomId(long roomId){\r\n    \t\treturn entityManager.createNativeQuery(&quot;select * from booking where room = ?1&quot;,Booking.class)\r\n    \t\t.setParameter(1, roomId)\r\n    \t\t.getResultList();\r\n    \t}\r\n    \t\r\n    }\r\n\r\nAnd hibernate.cfg.xml :\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;\r\n    &lt;persistence xmlns=&quot;http://java.sun.com/xml/ns/persistence&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; version=&quot;2.0&quot; xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd&quot;&gt;\r\n    \t&lt;persistence-unit name=&quot;persistenceUnit&quot; transaction-type=&quot;RESOURCE_LOCAL&quot;&gt;\r\n            &lt;provider&gt;org.hibernate.ejb.HibernatePersistence&lt;/provider&gt;\r\n            &lt;validation-mode&gt;NONE&lt;/validation-mode&gt;\r\n            &lt;properties&gt;\r\n                &lt;property name=&quot;hibernate.dialect&quot; value=&quot;org.hibernate.dialect.MySQLDialect&quot;/&gt;\r\n                &lt;!--value=&#39;create&#39; to build a new database on each run; value=&#39;update&#39; to modify an existing database; value=&#39;create-drop&#39; means the same as &#39;create&#39; but also drops tables when Hibernate closes; value=&#39;validate&#39; makes no changes to the database--&gt;\r\n                &lt;property name=&quot;hibernate.hbm2ddl.auto&quot; value=&quot;update&quot;/&gt;\r\n                &lt;property name=&quot;hibernate.ejb.naming_strategy&quot; value=&quot;org.hibernate.cfg.ImprovedNamingStrategy&quot;/&gt;\r\n                &lt;property name=&quot;hibernate.show_sql&quot; value=&quot;true&quot;/&gt;\r\n                &lt;property name=&quot;hibernate.ejb.cfgfile&quot; value=&quot;/resources/hibernate/hibernate.cfg.xml&quot;/&gt;\r\n            &lt;/properties&gt;\r\n        &lt;/persistence-unit&gt;\r\n    &lt;/persistence&gt;\r\n\r\n","title":"No qualifying bean of type [javax.persistence.EntityManagerFactory] is defined&quot;}}","body":"<p>I'm having problem with my web-app, cannot deploy the project to WildFly.</p>\n\n<p>Problem:</p>\n\n<pre><code>Caused by: java.lang.RuntimeException: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'bookedRoomDao': Injection of persistence dependencies failed; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type [javax.persistence.EntityManagerFactory] is defined\n    at io.undertow.servlet.core.DeploymentManagerImpl.deploy(DeploymentManagerImpl.java:222)\n    at org.wildfly.extension.undertow.deployment.UndertowDeploymentService.startContext(UndertowDeploymentService.java:87)\n    at org.wildfly.extension.undertow.deployment.UndertowDeploymentService.start(UndertowDeploymentService.java:72)\n    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1948) [jboss-msc-1.2.2.Final.jar:1.2.2.Final]\n    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1881) [jboss-msc-1.2.2.Final.jar:1.2.2.Final]\n    ... 3 more\n</code></pre>\n\n<p>Here is my application-context.xml :</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xmlns:p=\"http://www.springframework.org/schema/p\"\n       xmlns:context=\"http://www.springframework.org/schema/context\"\n       xmlns:tx=\"http://www.springframework.org/schema/tx\"\n       xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.2.xsd\n       http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.2.xsd\n       http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.2.xsd\"&gt;\n\n    &lt;bean id=\"messageSource\" class=\"org.springframework.context.support.ResourceBundleMessageSource\"&gt; \n        &lt;property name=\"basenames\"&gt; \n            &lt;list&gt; \n                &lt;value&gt;text_resources&lt;/value&gt; \n            &lt;/list&gt; \n        &lt;/property&gt; \n    &lt;/bean&gt;\n\n    &lt;bean name=\"exceptionResolver\" class=\"com.booking.common.HotelException\" autowire=\"byName\"&gt;\n        &lt;property name=\"exceptionMappings\"&gt;\n            &lt;props&gt;\n                &lt;prop key=\"javax.servlet.jsp.JspException\"&gt;exception&lt;/prop&gt;\n                &lt;prop key=\"javax.servlet.ServletException\"&gt;exception&lt;/prop&gt;\n                &lt;prop key=\"java.lang.Exception\"&gt;exception&lt;/prop&gt;\n                &lt;prop key=\"java.lang.Throwable\"&gt;exception&lt;/prop&gt;\n                &lt;prop key=\"java.lang.RuntimeException\"&gt;exception&lt;/prop&gt;\n                &lt;prop key=\"org.springframework.web.bind.ServletRequestBindingException\"&gt;exception&lt;/prop&gt;\n            &lt;/props&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n\n\n    &lt;bean id=\"mailSession\" class=\"org.springframework.jndi.JndiObjectFactoryBean\"&gt;\n        &lt;property name=\"jndiName\" value=\"java:jboss/mail/Default\"/&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=\"dataSource\" class=\"org.springframework.jdbc.datasource.SimpleDriverDataSource\"&gt;\n        &lt;property name=\"driverClass\" value=\"com.mysql.jdbc.Driver\"/&gt;\n        &lt;property name=\"url\" value=\"jdbc:mysql://localhost:3306/booking-war\"/&gt;\n        &lt;property name=\"username\" value=\"root\"/&gt;\n        &lt;property name=\"password\" value=\"root\"/&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=\"sessionFactory\" class=\"org.springframework.orm.hibernate4.LocalSessionFactoryBean\" lazy-init=\"true\" autowire=\"default\"&gt;\n        &lt;property name=\"dataSource\" ref=\"dataSource\" /&gt;\n        &lt;property name=\"packagesToScan\" value=\"com.booking.member.vo\" /&gt;\n\n        &lt;property name=\"hibernateProperties\"&gt;\n            &lt;props&gt;\n                &lt;prop key=\"hibernate.dialect\"&gt;org.hibernate.dialect.MySQLDialect&lt;/prop&gt;\n            &lt;/props&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=\"txManager\" class=\"org.springframework.orm.hibernate4.HibernateTransactionManager\"&gt;\n        &lt;property name=\"sessionFactory\" ref=\"sessionFactory\" /&gt;\n    &lt;/bean&gt;    \n\n    &lt;tx:annotation-driven transaction-manager=\"txManager\"/&gt;\n\n    &lt;context:component-scan base-package=\"com.booking.dao\" /&gt;\n        &lt;context:component-scan base-package=\"com.booking.member\" /&gt;\n    &lt;context:component-scan base-package=\"com.booking.service\" /&gt;\n\n&lt;/beans&gt;\n</code></pre>\n\n<p>UserDaoImpl.java</p>\n\n<pre><code>package com.booking.dao.impl;\n\nimport java.util.List;\n\nimport javax.persistence.EntityManager;\nimport javax.persistence.PersistenceContext;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Repository;\n\nimport com.booking.dao.GenericDao;\nimport com.booking.dao.UserDao;\nimport com.booking.member.vo.AuthenticateUser;\n\n@Repository(\"userDao\")\npublic class UserDaoImpl implements UserDao{\n\n    @Autowired\n    GenericDao&lt;AuthenticateUser,Long&gt; genericDao;\n\n    @PersistenceContext\n    EntityManager entityManager;\n\n        @Override\n    public List&lt;AuthenticateUser&gt; userByName(String username) {\n        String queryStr = \"SELECT u FROM AuthenticateUser u WHERE u.username= ? \";\n        return entityManager.createQuery(queryStr)\n               .setParameter(1,username).getResultList();\n    }\n\n    public AuthenticateUser create(AuthenticateUser t) {\n        return genericDao.create(t);\n    }\n\n    public AuthenticateUser read(Long id, Class&lt;AuthenticateUser&gt; c) {\n        return genericDao.read(id, c);\n    }\n\n    public AuthenticateUser update(AuthenticateUser t) {\n        return genericDao.update(t);\n    }\n\n    public void delete(AuthenticateUser t) {\n        genericDao.delete(t);\n    }\n\n    public List&lt;AuthenticateUser&gt; getAll(Class&lt;AuthenticateUser&gt; c) {\n        return genericDao.getAll(c);\n    }\n}\n</code></pre>\n\n<p>GenericDaoImpl.java : </p>\n\n<pre><code>package com.booking.dao.impl;\n\nimport java.io.Serializable;\nimport java.util.List;\n\nimport javax.persistence.EntityManager;\nimport javax.persistence.PersistenceContext;\n\nimport org.hibernate.Session;\nimport org.hibernate.criterion.Example;\nimport org.hibernate.ejb.HibernateEntityManager;\nimport org.springframework.stereotype.Repository;\n\nimport com.booking.dao.GenericDao;\nimport org.hibernate.SessionFactory;\nimport org.springframework.beans.factory.annotation.Autowired;\n\n\n@Repository(\"genericDao\")\npublic class GenericDaoImpl&lt;T,PK extends Serializable&gt; implements GenericDao&lt;T, PK&gt; {\n\n\n    protected Class&lt;T&gt; entityClass;\n\n    @PersistenceContext\n    protected EntityManager entityManager;\n\n    @Override\n    public T create(T t) {\n        this.entityManager.persist(t);\n        return t;\n    }\n\n    @Override\n    public T read(PK id,Class&lt;T&gt; c) {\n        return (T)this.entityManager.find(c, id);\n    }\n\n    @Override\n    public T update(T t) {\n         return this.entityManager.merge(t);\n    }\n\n    @Override\n    public void delete(T t) {\n       t = this.entityManager.merge(t);\n       this.entityManager.remove(t);\n    }\n\n    @Override\n    public List&lt;T&gt; getAll(Class&lt;T&gt; c){\n        return this.entityManager.createQuery(\"SELECT o FROM \"+ c.getName() +\" o\").getResultList();\n    }\n\n    @Override\n    public List&lt;T&gt; getByFilter(T filter){\n        Session session = ((HibernateEntityManager)entityManager.unwrap(HibernateEntityManager.class)).getSession();\n        return session.createCriteria(filter.getClass()).add(Example.create(filter)).list();\n    }\n\n}\n</code></pre>\n\n<p>BookedRoomDaoImpl.java : </p>\n\n<pre><code>package com.booking.dao.impl;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\nimport javax.persistence.EntityManager;\nimport javax.persistence.NoResultException;\nimport javax.persistence.PersistenceContext;\n\nimport org.springframework.beans.factory.annotation.Autowired;\n\nimport org.springframework.stereotype.Repository;\n\nimport com.booking.common.CommonUtils;\nimport com.booking.dao.BookedRoomDao;\nimport com.booking.dao.GenericDao;\nimport com.booking.member.vo.BookedRoom;\nimport com.booking.member.vo.Booking;\nimport com.booking.member.vo.TimeRange;\nimport org.hibernate.criterion.Restrictions;\n\n\n@Repository(\"bookedRoomDao\")\npublic class BookedRoomDaoImpl implements BookedRoomDao{\n\n        @PersistenceContext\n    EntityManager entityManager;\n\n    @Autowired\n    GenericDao&lt;TimeRange,Long&gt; timeRangeDao;\n\n        @Override\n    public List&lt;BookedRoom&gt; getBookedRooms(long id,String date){\n        List&lt;BookedRoom&gt; list = new ArrayList&lt;BookedRoom&gt;();\n        List&lt;TimeRange&gt; timeRanges = timeRangeDao.getAll(TimeRange.class);\n        for(TimeRange timeRange:timeRanges){\n            BookedRoom bookedRoom = new BookedRoom();\n            Booking booking = null;\n            try{\n                booking = (Booking)entityManager.createNativeQuery(\"select * from Booking b where b.time_range = ?1 and b.room = ?2 and date_format(date_booked,'%Y-%m-%d') = ?3\",Booking.class)\n                .setParameter(1,timeRange.getId())\n                .setParameter(2,id)\n                .setParameter(3,date)\n                .getSingleResult();\n\n            }catch (NoResultException e) {\n\n            }\n\n            if(booking!=null){\n                bookedRoom.setBookingId(booking.getBookingId());\n                bookedRoom.setDateBooked(booking.getDateBooked());\n                bookedRoom.setRoomName(booking.getRoom().getRoomName());\n                bookedRoom.setUserName(booking.getUserid().getUsername());\n                if(booking.getUserid().getId()==CommonUtils.getCurrentUserProfile().getUserId()){\n                    bookedRoom.setOwner(true);\n                }\n            }\n\n            bookedRoom.setFromTime(timeRange.getFromTime());\n            bookedRoom.setToTime(timeRange.getToTime());\n            bookedRoom.setTrId(timeRange.getId());\n            list.add(bookedRoom);\n        }\n        return list;\n    }\n        @Override\n    public void deleteBooking(long bookingId,long userId){\n        entityManager.createNativeQuery(\"delete from booking where booking_id=?1 and userid=?2\")\n        .setParameter(1, bookingId)\n        .setParameter(2,userId)\n        .executeUpdate();\n    }\n        @Override\n    public List getBookingByRoomId(long roomId){\n        return entityManager.createNativeQuery(\"select * from booking where room = ?1\",Booking.class)\n        .setParameter(1, roomId)\n        .getResultList();\n    }\n\n}\n</code></pre>\n\n<p>And hibernate.cfg.xml :</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?&gt;\n&lt;persistence xmlns=\"http://java.sun.com/xml/ns/persistence\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" version=\"2.0\" xsi:schemaLocation=\"http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd\"&gt;\n    &lt;persistence-unit name=\"persistenceUnit\" transaction-type=\"RESOURCE_LOCAL\"&gt;\n        &lt;provider&gt;org.hibernate.ejb.HibernatePersistence&lt;/provider&gt;\n        &lt;validation-mode&gt;NONE&lt;/validation-mode&gt;\n        &lt;properties&gt;\n            &lt;property name=\"hibernate.dialect\" value=\"org.hibernate.dialect.MySQLDialect\"/&gt;\n            &lt;!--value='create' to build a new database on each run; value='update' to modify an existing database; value='create-drop' means the same as 'create' but also drops tables when Hibernate closes; value='validate' makes no changes to the database--&gt;\n            &lt;property name=\"hibernate.hbm2ddl.auto\" value=\"update\"/&gt;\n            &lt;property name=\"hibernate.ejb.naming_strategy\" value=\"org.hibernate.cfg.ImprovedNamingStrategy\"/&gt;\n            &lt;property name=\"hibernate.show_sql\" value=\"true\"/&gt;\n            &lt;property name=\"hibernate.ejb.cfgfile\" value=\"/resources/hibernate/hibernate.cfg.xml\"/&gt;\n        &lt;/properties&gt;\n    &lt;/persistence-unit&gt;\n&lt;/persistence&gt;\n</code></pre>\n"},{"tags":["java","reverse","palindrome"],"comments":[{"owner":{"account_id":19435569,"reputation":1567,"user_id":21105992,"display_name":"teapot418"},"score":1,"creation_date":1694592636,"post_id":77095182,"comment_id":135909989,"body_markdown":"Try printing out `reverse`. Did it arrive at the number you expected? Then investigate from there. This would be a nice exercise to try out a debugger on.","body":"Try printing out <code>reverse</code>. Did it arrive at the number you expected? Then investigate from there. This would be a nice exercise to try out a debugger on."},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1694602430,"post_id":77095182,"comment_id":135912031,"body_markdown":"If your current output does not match your desired output, and you don&#39;t know why then it&#39;s time to start debugging. If you&#39;re not sure how to go about doing this, then please check out [How to debug small programs](https://ericlippert.com/2014/03/05/how-to-debug-small-programs/). It won&#39;t solve your direct problem, but it will give you steps that you can follow that should help you solve it yourself, or even if that is not successful, then at least help you to better isolate your problem so that your question can be more focused and easier to answer.","body":"If your current output does not match your desired output, and you don&#39;t know why then it&#39;s time to start debugging. If you&#39;re not sure how to go about doing this, then please check out <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a>. It won&#39;t solve your direct problem, but it will give you steps that you can follow that should help you solve it yourself, or even if that is not successful, then at least help you to better isolate your problem so that your question can be more focused and easier to answer."}],"answers":[{"tags":[],"owner":{"account_id":15823651,"reputation":9,"user_id":11417271,"display_name":"AAA"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694593524,"creation_date":1694592976,"answer_id":77095252,"question_id":77095182,"body_markdown":"You just need to replace this line: \r\n\r\n    int remainder = temp% 10;\r\n\r\nWith this line: \r\n\r\n    int remainder = n% 10;\r\n\r\nBecause the `temp` is not changing so you are always getting the first digit.\r\n","title":"how to write palindrome number in java code","body":"<p>You just need to replace this line:</p>\n<pre><code>int remainder = temp% 10;\n</code></pre>\n<p>With this line:</p>\n<pre><code>int remainder = n% 10;\n</code></pre>\n<p>Because the <code>temp</code> is not changing so you are always getting the first digit.</p>\n"},{"tags":[],"owner":{"account_id":9582301,"reputation":13,"user_id":7116391,"display_name":"Maroš Majkl Ors&#225;k"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694593577,"creation_date":1694593577,"answer_id":77095315,"question_id":77095182,"body_markdown":"It would be great if you provided details on which inputs it fails so others could think about your solution. \r\n\r\nAnyway, the problem statement here is to write a function, which returns a positive result if such a number is palindrome otherwise negative (i.e., the number is not palindrome). I would solve this problem using a String conversion and then start the pointer technique (one pointer from the start and another one from the end and compare these two pointers). If pointers does not match return negative result. Moreover, the iteration length will be the size of the string length / 2. \r\n\r\nSo the code could look like this:\r\n\r\n    static boolean isPalidrom(int inputNumber) {\r\n          char[] arr = String.valueOf(inputNumber).toCharArray();\r\n\r\n           // O(n/2) -&gt; O(n)\r\n           for (int i = 0; i &lt; arr.length / 2; i++) {\r\n               if (arr[i] != arr[arr.length - i - 1]) {\r\n                   return false;\r\n               }\r\n           }\r\n           return true;\r\n    }\r\n\r\nAnd then you could just call such a method from the main like this:\r\n\r\n    public static void main(String args[]){\r\n      if (isPalidrom(121)) {\r\n         System.out.println(&quot;this is a palindrome number&quot;);\r\n      } else {\r\n         System.out.println(&quot;this is not a palindrome number&quot;);\r\n      }\r\n    }\r\n\r\n","title":"how to write palindrome number in java code","body":"<p>It would be great if you provided details on which inputs it fails so others could think about your solution.</p>\n<p>Anyway, the problem statement here is to write a function, which returns a positive result if such a number is palindrome otherwise negative (i.e., the number is not palindrome). I would solve this problem using a String conversion and then start the pointer technique (one pointer from the start and another one from the end and compare these two pointers). If pointers does not match return negative result. Moreover, the iteration length will be the size of the string length / 2.</p>\n<p>So the code could look like this:</p>\n<pre><code>static boolean isPalidrom(int inputNumber) {\n      char[] arr = String.valueOf(inputNumber).toCharArray();\n\n       // O(n/2) -&gt; O(n)\n       for (int i = 0; i &lt; arr.length / 2; i++) {\n           if (arr[i] != arr[arr.length - i - 1]) {\n               return false;\n           }\n       }\n       return true;\n}\n</code></pre>\n<p>And then you could just call such a method from the main like this:</p>\n<pre><code>public static void main(String args[]){\n  if (isPalidrom(121)) {\n     System.out.println(&quot;this is a palindrome number&quot;);\n  } else {\n     System.out.println(&quot;this is not a palindrome number&quot;);\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13633779,"reputation":1,"user_id":9835328,"display_name":"Rejwan Sharif"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694809258,"creation_date":1694809117,"answer_id":77115146,"question_id":77095182,"body_markdown":"There are many ways to check palindrome numbers.\r\nI have solved it this way.\r\n\r\npublic static void main(String[] args) {\r\n\r\n        Scanner sc = new Scanner(System.in);\r\n        int num = sc.nextInt();\r\n\r\n        if (isPalindrome(num)) {\r\n            System.out.println(num + &quot; is palindrome&quot;);\r\n        } else {\r\n            System.out.println(num + &quot; is not palindrome&quot;);\r\n        }\r\n    }\r\n\r\n    static boolean isPalindrome(int num) {\r\n        int d = num;\r\n        int sum = 0;\r\n        while (num &gt; 0) {\r\n            int x = num % 10;\r\n            sum = sum * 10 + x;\r\n            num /= 10;\r\n        }\r\n        return d == sum;\r\n    }","title":"how to write palindrome number in java code","body":"<p>There are many ways to check palindrome numbers.\nI have solved it this way.</p>\n<p>public static void main(String[] args) {</p>\n<pre><code>    Scanner sc = new Scanner(System.in);\n    int num = sc.nextInt();\n\n    if (isPalindrome(num)) {\n        System.out.println(num + &quot; is palindrome&quot;);\n    } else {\n        System.out.println(num + &quot; is not palindrome&quot;);\n    }\n}\n\nstatic boolean isPalindrome(int num) {\n    int d = num;\n    int sum = 0;\n    while (num &gt; 0) {\n        int x = num % 10;\n        sum = sum * 10 + x;\n        num /= 10;\n    }\n    return d == sum;\n}\n</code></pre>\n"}],"owner":{"account_id":27324887,"reputation":9,"user_id":20838007,"display_name":"SHAGUFA ANJUM "},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":80,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":3,"score":-1,"last_activity_date":1694809258,"creation_date":1694592339,"question_id":77095182,"body_markdown":"    public static void palindromeNo(int n){\r\n        // reverse number find first of all for find the number is palindrome or not\r\n\r\n                   // reverse\r\n                    int temp = n;\r\n                     int reverse =0;\r\n                     while (n&gt;0) {\r\n                         int remainder = temp% 10;\r\n                         reverse = (reverse * 10) + remainder;\r\n                         n = n / 10;\r\n                     }\r\n\r\n                          // for palindrome\r\n                          if(reverse==temp){\r\n                              System.out.println(&quot;this is a palindrome number&quot;);\r\n                          }else {\r\n                              System.out.println(&quot;this is not a palindrome number&quot;);\r\n    }                     }\r\n    public static void main(String args[]){\r\n      palindromeNo(121);\r\n\r\n\r\n    }\r\n\r\ni write this code but its showns as this is not a palindrome in every time \r\n\r\ni am expecting print in out this is a palindrome number \r\n","title":"how to write palindrome number in java code","body":"<pre><code>public static void palindromeNo(int n){\n    // reverse number find first of all for find the number is palindrome or not\n\n               // reverse\n                int temp = n;\n                 int reverse =0;\n                 while (n&gt;0) {\n                     int remainder = temp% 10;\n                     reverse = (reverse * 10) + remainder;\n                     n = n / 10;\n                 }\n\n                      // for palindrome\n                      if(reverse==temp){\n                          System.out.println(&quot;this is a palindrome number&quot;);\n                      }else {\n                          System.out.println(&quot;this is not a palindrome number&quot;);\n}                     }\npublic static void main(String args[]){\n  palindromeNo(121);\n\n\n}\n</code></pre>\n<p>i write this code but its showns as this is not a palindrome in every time</p>\n<p>i am expecting print in out this is a palindrome number</p>\n"},{"tags":["java","spring","spring-mvc","tomcat","servlet-dispatching"],"comments":[{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1694759424,"post_id":77109846,"comment_id":135935956,"body_markdown":"just add a simple reproducible example.","body":"just add a simple reproducible example."},{"owner":{"account_id":13796,"reputation":19353,"user_id":27905,"display_name":"nitind"},"score":0,"creation_date":1695131492,"post_id":77109846,"comment_id":135980985,"body_markdown":"How does your app include `org.springframework.web.servlet.DispatcherServlet`?","body":"How does your app include <code>org.springframework.web.servlet.DispatcherServlet</code>?"}],"owner":{"account_id":29447937,"reputation":1,"user_id":22564835,"display_name":"Avanish Prajapati"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694809232,"creation_date":1694755963,"question_id":77109846,"body_markdown":"HTTP Status 500 – Internal Server Error\r\nType Exception Report\r\n\r\n`Message Error instantiating servlet class [org.springframework.web.servlet.DispatcherServlet]`\r\n\r\nDescription The server encountered an unexpected condition that prevented it from fulfilling the request.\r\n\r\nException\r\n```\r\njavax.servlet.ServletException: Error instantiating servlet class [org.springframework.web.servlet.DispatcherServlet]\r\n\torg.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)\r\n\torg.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n\torg.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:670)\r\n\torg.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)\r\n\torg.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)\r\n\torg.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n\torg.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)\r\n\torg.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1790)\r\n\torg.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\torg.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\torg.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\torg.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tjava.base/java.lang.Thread.run(Thread.java:1589)\r\nRoot Cause\r\n\r\njava.lang.ClassNotFoundException: org.springframework.web.servlet.DispatcherServlet\r\n\torg.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1412)\r\n\torg.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1220)\r\n\torg.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)\r\n\torg.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n\torg.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:670)\r\n\torg.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)\r\n\torg.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)\r\n\torg.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n\torg.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)\r\n\torg.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1790)\r\n\torg.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\torg.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\torg.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\torg.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tjava.base/java.lang.Thread.run(Thread.java:1589)\r\nNote The full stack trace of the root cause is available in the server logs.\r\n\r\nApache Tomcat/9.0.80\r\n```\r\nI have seen all solution of this question and implements them but my problem haven&#39;t solve","title":"Error instantiating servlet class [org.springframework.web.servlet.DispatcherServlet]","body":"<p>HTTP Status 500 – Internal Server Error\nType Exception Report</p>\n<p><code>Message Error instantiating servlet class [org.springframework.web.servlet.DispatcherServlet]</code></p>\n<p>Description The server encountered an unexpected condition that prevented it from fulfilling the request.</p>\n<p>Exception</p>\n<pre><code>javax.servlet.ServletException: Error instantiating servlet class [org.springframework.web.servlet.DispatcherServlet]\n    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)\n    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\n    org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:670)\n    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)\n    org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)\n    org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\n    org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)\n    org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1790)\n    org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\n    org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\n    org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\n    org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n    java.base/java.lang.Thread.run(Thread.java:1589)\nRoot Cause\n\njava.lang.ClassNotFoundException: org.springframework.web.servlet.DispatcherServlet\n    org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1412)\n    org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1220)\n    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)\n    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\n    org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:670)\n    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)\n    org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)\n    org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\n    org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)\n    org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1790)\n    org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\n    org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\n    org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\n    org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n    java.base/java.lang.Thread.run(Thread.java:1589)\nNote The full stack trace of the root cause is available in the server logs.\n\nApache Tomcat/9.0.80\n</code></pre>\n<p>I have seen all solution of this question and implements them but my problem haven't solve</p>\n"},{"tags":["java","rest","quarkus","quarkus-panache"],"comments":[{"owner":{"account_id":3052937,"reputation":17914,"user_id":2587166,"accept_rate":83,"display_name":"Luca Basso Ricci"},"score":1,"creation_date":1678375266,"post_id":75685137,"comment_id":133523636,"body_markdown":"`@ApplicationScope` on `DeviceResourceServiceImpl` (or a `@Produces` method for type `DeviceResourceService`)","body":"<code>@ApplicationScope</code> on <code>DeviceResourceServiceImpl</code> (or a <code>@Produces</code> method for type <code>DeviceResourceService</code>)"}],"answers":[{"tags":[],"owner":{"account_id":3782998,"reputation":112,"user_id":3141885,"display_name":"Antonio"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694809018,"creation_date":1694809018,"answer_id":77115134,"question_id":75685137,"body_markdown":"You should declare a scope for your bean.\r\n\r\n    @ApplicationScoped\r\n    DeviceResourceServerImpl implements DeviceResourceService {\r\n\r\nor\r\n\r\n    @Singleton\r\n    DeviceResourceServerImpl implements DeviceResourceService {","title":"UnsatisfiedResolutionException: Unsatisfied dependency for type -Quarkus","body":"<p>You should declare a scope for your bean.</p>\n<pre><code>@ApplicationScoped\nDeviceResourceServerImpl implements DeviceResourceService {\n</code></pre>\n<p>or</p>\n<pre><code>@Singleton\nDeviceResourceServerImpl implements DeviceResourceService {\n</code></pre>\n"}],"owner":{"account_id":20785514,"reputation":137,"user_id":15264820,"display_name":"Vidushika Dasanayka"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":697,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694809018,"creation_date":1678367764,"question_id":75685137,"body_markdown":"I&#39;m new to Quarkus and I&#39;m getting the following error.I just want to create a end point to get Device object with the any type of parameter. I&#39;m unable to identify the error behind this.\r\n\r\nError :\r\n\r\n    Caused by: javax.enterprise.inject.spi.DeploymentException: javax.enterprise.inject.UnsatisfiedResolutionException: Unsatisfied dependency for type ai.govi.telemetry.service.DeviceResourceService and qualifiers [@Default]\r\n            - java member: ai.govi.telemetry.web.DeviceResource():deviceResourceService\r\n            - declared on CLASS bean [types=[java.lang.Object, ai.govi.telemetry.web.DeviceResource], qualifiers=[@Default, @Any], target=ai.govi.telemetry.web.DeviceResource]\r\n\r\nThis is my DeviceResourceService class \r\n\r\n    package ai.govi.telemetry.service;\r\n    \r\n    import ai.govi.telemetry.domain.Device;\r\n    import ai.govi.telemetry.dto.DeviceDTO;\r\n    \r\n    \r\n    public interface DeviceResourceService {\r\n        Device searchDevice(DeviceDTO deviceDTO);\r\n    }\r\n\r\nDeviceResourceServiceImpl class\r\n\r\n    package ai.govi.telemetry.service;\r\n    \r\n    import ai.govi.telemetry.domain.Device;\r\n    import ai.govi.telemetry.dto.DeviceDTO;\r\n    import ai.govi.telemetry.infrastructure.data.DeviceRepository;\r\n    \r\n    import java.util.Date;\r\n    import java.util.Map;\r\n    import java.util.function.Predicate;\r\n    \r\n    \r\n    public class DeviceResourceServiceImpl implements DeviceResourceService {\r\n    \r\n        private final DeviceRepository deviceRepository;\r\n    \r\n        private DeviceResourceServiceImpl(DeviceRepository deviceRepository) {\r\n            this.deviceRepository = deviceRepository;\r\n        }\r\n    \r\n        @Override\r\n        public Device searchDevice(DeviceDTO deviceDTO) {\r\n           \r\n            Device device = null;\r\n    \r\n            Integer id=deviceDTO.getDeviceId();\r\n            String deviceRef=deviceDTO.getDeviceName();\r\n            String deviceAlias=deviceDTO.getDeviceAlias();\r\n            Date createdAt=deviceDTO.getCreatedAt();\r\n            Date updatedAt=deviceDTO.getUpdatedAt();\r\n            Map&lt;String, String&gt; metadata=deviceDTO.getMetadata();\r\n    \r\n    \r\n            Predicate&lt;Device&gt; byDeviceId= id!=null ? data -&gt; data.getDeviceId().equals(id): data -&gt; true;\r\n            Predicate&lt;Device&gt; byDeviceName= deviceRef!=null ? data -&gt; data.getDeviceName().equals(deviceRef): data -&gt; true;\r\n            Predicate&lt;Device&gt; byDeviceAlias= deviceAlias!=null ? data -&gt; data.getDeviceAlias().equals(deviceAlias): data -&gt; true;\r\n            Predicate&lt;Device&gt; byCreatedDate= createdAt!=null ? data -&gt; data.getCreatedAt().equals(createdAt): data -&gt; true;\r\n            Predicate&lt;Device&gt; byUpdatedDate= updatedAt!=null ? data -&gt; data.getUpdatedAt().equals(updatedAt): data -&gt; true;\r\n            Predicate&lt;Device&gt; byMetaData= metadata!=null ? data -&gt; data.getMetadata().equals(metadata): data -&gt; true;\r\n    \r\n          device = (Device) deviceRepository\r\n                           .listAll()\r\n                           .stream()\r\n                           .filter(byDeviceId)\r\n                           .filter(byDeviceName)\r\n                           .filter(byDeviceAlias)\r\n                           .filter(byCreatedDate)\r\n                           .filter(byUpdatedDate)\r\n                           .filter(byMetaData);\r\n    \r\n          return device;\r\n    \r\n    \r\n        }\r\n    \r\n    \r\n    }\r\n\r\nEndpoint created in DeviceResource class\r\n\r\n   \r\n\r\n     @POST\r\n        @Produces(&quot;application/json&quot;)\r\n        @Path(&quot;device/{search}&quot;)\r\n        @Operation(summary = &quot;View a device by any attribute&quot;)\r\n        public  Response searchDevice(@RequestBody DeviceDTO deviceDTO) {\r\n            Log.info(&quot;GET: /apis/devices/device/:search : get device with any attribute: &quot; );\r\n            Device device=this.deviceResourceService.searchDevice(deviceDTO);\r\n            return Response.ok(device).build();\r\n        }\r\n\r\nCan someone help me with this issue?Thank you in advance!","title":"UnsatisfiedResolutionException: Unsatisfied dependency for type -Quarkus","body":"<p>I'm new to Quarkus and I'm getting the following error.I just want to create a end point to get Device object with the any type of parameter. I'm unable to identify the error behind this.</p>\n<p>Error :</p>\n<pre><code>Caused by: javax.enterprise.inject.spi.DeploymentException: javax.enterprise.inject.UnsatisfiedResolutionException: Unsatisfied dependency for type ai.govi.telemetry.service.DeviceResourceService and qualifiers [@Default]\n        - java member: ai.govi.telemetry.web.DeviceResource():deviceResourceService\n        - declared on CLASS bean [types=[java.lang.Object, ai.govi.telemetry.web.DeviceResource], qualifiers=[@Default, @Any], target=ai.govi.telemetry.web.DeviceResource]\n</code></pre>\n<p>This is my DeviceResourceService class</p>\n<pre><code>package ai.govi.telemetry.service;\n\nimport ai.govi.telemetry.domain.Device;\nimport ai.govi.telemetry.dto.DeviceDTO;\n\n\npublic interface DeviceResourceService {\n    Device searchDevice(DeviceDTO deviceDTO);\n}\n</code></pre>\n<p>DeviceResourceServiceImpl class</p>\n<pre><code>package ai.govi.telemetry.service;\n\nimport ai.govi.telemetry.domain.Device;\nimport ai.govi.telemetry.dto.DeviceDTO;\nimport ai.govi.telemetry.infrastructure.data.DeviceRepository;\n\nimport java.util.Date;\nimport java.util.Map;\nimport java.util.function.Predicate;\n\n\npublic class DeviceResourceServiceImpl implements DeviceResourceService {\n\n    private final DeviceRepository deviceRepository;\n\n    private DeviceResourceServiceImpl(DeviceRepository deviceRepository) {\n        this.deviceRepository = deviceRepository;\n    }\n\n    @Override\n    public Device searchDevice(DeviceDTO deviceDTO) {\n       \n        Device device = null;\n\n        Integer id=deviceDTO.getDeviceId();\n        String deviceRef=deviceDTO.getDeviceName();\n        String deviceAlias=deviceDTO.getDeviceAlias();\n        Date createdAt=deviceDTO.getCreatedAt();\n        Date updatedAt=deviceDTO.getUpdatedAt();\n        Map&lt;String, String&gt; metadata=deviceDTO.getMetadata();\n\n\n        Predicate&lt;Device&gt; byDeviceId= id!=null ? data -&gt; data.getDeviceId().equals(id): data -&gt; true;\n        Predicate&lt;Device&gt; byDeviceName= deviceRef!=null ? data -&gt; data.getDeviceName().equals(deviceRef): data -&gt; true;\n        Predicate&lt;Device&gt; byDeviceAlias= deviceAlias!=null ? data -&gt; data.getDeviceAlias().equals(deviceAlias): data -&gt; true;\n        Predicate&lt;Device&gt; byCreatedDate= createdAt!=null ? data -&gt; data.getCreatedAt().equals(createdAt): data -&gt; true;\n        Predicate&lt;Device&gt; byUpdatedDate= updatedAt!=null ? data -&gt; data.getUpdatedAt().equals(updatedAt): data -&gt; true;\n        Predicate&lt;Device&gt; byMetaData= metadata!=null ? data -&gt; data.getMetadata().equals(metadata): data -&gt; true;\n\n      device = (Device) deviceRepository\n                       .listAll()\n                       .stream()\n                       .filter(byDeviceId)\n                       .filter(byDeviceName)\n                       .filter(byDeviceAlias)\n                       .filter(byCreatedDate)\n                       .filter(byUpdatedDate)\n                       .filter(byMetaData);\n\n      return device;\n\n\n    }\n\n\n}\n</code></pre>\n<p>Endpoint created in DeviceResource class</p>\n<pre><code> @POST\n    @Produces(&quot;application/json&quot;)\n    @Path(&quot;device/{search}&quot;)\n    @Operation(summary = &quot;View a device by any attribute&quot;)\n    public  Response searchDevice(@RequestBody DeviceDTO deviceDTO) {\n        Log.info(&quot;GET: /apis/devices/device/:search : get device with any attribute: &quot; );\n        Device device=this.deviceResourceService.searchDevice(deviceDTO);\n        return Response.ok(device).build();\n    }\n</code></pre>\n<p>Can someone help me with this issue?Thank you in advance!</p>\n"},{"tags":["java","url","primefaces","robots.txt","x-robots-tag"],"comments":[{"owner":{"account_id":1167427,"reputation":24342,"user_id":1145388,"accept_rate":75,"display_name":"Stephen Ostermiller"},"score":1,"creation_date":1694892733,"post_id":77115082,"comment_id":135952230,"body_markdown":"You should password protect any URLs you don&#39;t want to show up in search engines or protect them behind a firewall.","body":"You should password protect any URLs you don&#39;t want to show up in search engines or protect them behind a firewall."},{"owner":{"account_id":27998484,"reputation":1,"user_id":21383222,"display_name":"Jo&#227;o neto"},"score":0,"creation_date":1695121498,"post_id":77115082,"comment_id":135978942,"body_markdown":"and how can i do that?","body":"and how can i do that?"},{"owner":{"account_id":1167427,"reputation":24342,"user_id":1145388,"accept_rate":75,"display_name":"Stephen Ostermiller"},"score":0,"creation_date":1695126509,"post_id":77115082,"comment_id":135979888,"body_markdown":"It depends.  What web server, proxy server, and/or CDN are you using?  It is often easier to add basic password protection at some level above your web app.  There may even be a way to do it within JSF, but I have no experience with it.","body":"It depends.  What web server, proxy server, and/or CDN are you using?  It is often easier to add basic password protection at some level above your web app.  There may even be a way to do it within JSF, but I have no experience with it."}],"owner":{"account_id":27998484,"reputation":1,"user_id":21383222,"display_name":"Jo&#227;o neto"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694808327,"creation_date":1694808327,"question_id":77115082,"body_markdown":"I&#39;m working on a web application built using JavaServer Faces (JSF) with the PrimeFaces framework. In our deployment process, when I upload an archive to Jenkins, it generates two different links, each attached to a separate database. One link points to our homologation server for testing purposes, while the other points to our production server for user access.\r\n\r\nMy primary concern is that I want to prevent the URLs of the homologation server, which is used exclusively for testing, from appearing in search engine results, especially Google. I&#39;ve tried using robots.txt with noindex, but it seems that these URLs are still indexed by Google.\r\n\r\nAre there specific considerations or configurations related to JSF and PrimeFaces that I should be aware of when attempting to exclude these URLs from search engine indexing? Is there a recommended approach or best practice for achieving this?\r\n\r\n tried using the meta tag to validate the URL in Java, but I didn&#39;t receive any validation. I&#39;m currently waiting to see if it will disappear from the search results, but it seems to make no difference. I really don&#39;t want to use the archive because I fear I can&#39;t control whether it&#39;s the homologation URL or not. However, I am completely open to ideas.","title":"Preventing JSF/PrimeFaces URLs from appearing in search engine results","body":"<p>I'm working on a web application built using JavaServer Faces (JSF) with the PrimeFaces framework. In our deployment process, when I upload an archive to Jenkins, it generates two different links, each attached to a separate database. One link points to our homologation server for testing purposes, while the other points to our production server for user access.</p>\n<p>My primary concern is that I want to prevent the URLs of the homologation server, which is used exclusively for testing, from appearing in search engine results, especially Google. I've tried using robots.txt with noindex, but it seems that these URLs are still indexed by Google.</p>\n<p>Are there specific considerations or configurations related to JSF and PrimeFaces that I should be aware of when attempting to exclude these URLs from search engine indexing? Is there a recommended approach or best practice for achieving this?</p>\n<p>tried using the meta tag to validate the URL in Java, but I didn't receive any validation. I'm currently waiting to see if it will disappear from the search results, but it seems to make no difference. I really don't want to use the archive because I fear I can't control whether it's the homologation URL or not. However, I am completely open to ideas.</p>\n"},{"tags":["java","selenium","firefox","geckodriver","firefox-profile"],"comments":[{"owner":{"account_id":1776955,"reputation":787,"user_id":1620562,"accept_rate":57,"display_name":"skandigraun"},"score":1,"creation_date":1537693708,"post_id":52464598,"comment_id":91871126,"body_markdown":"You should create a FirefoxOptions object to set the profile. `FirefoxOptions fo = new FirefoxOptions(); fo.setProfile(profile); WebDriver driver = new FirefoxDriver(fo);`","body":"You should create a FirefoxOptions object to set the profile. <code>FirefoxOptions fo = new FirefoxOptions(); fo.setProfile(profile); WebDriver driver = new FirefoxDriver(fo);</code>"},{"owner":{"account_id":11238390,"reputation":103,"user_id":8243796,"display_name":"Vladyslav Kuhivchak"},"score":1,"creation_date":1537694601,"post_id":52464598,"comment_id":91871325,"body_markdown":"Ok, it works. The project runs without compile or runtime exceptions, but Firefox has been opening for 2 minutes, why so much time? Maybe there is any other solution. Because without this profile settings, the project starts in 10 sec.","body":"Ok, it works. The project runs without compile or runtime exceptions, but Firefox has been opening for 2 minutes, why so much time? Maybe there is any other solution. Because without this profile settings, the project starts in 10 sec."},{"owner":{"account_id":9207703,"reputation":28723,"user_id":9444073,"display_name":"cruisepandey"},"score":0,"creation_date":1537767655,"post_id":52464598,"comment_id":91888172,"body_markdown":"@VladyslavKuhivchak : Ideally it should start in 10 sec. What all are you loading in profile ?","body":"@VladyslavKuhivchak : Ideally it should start in 10 sec. What all are you loading in profile ?"}],"answers":[{"comments":[{"owner":{"account_id":13060408,"reputation":707,"user_id":9437799,"display_name":"Sam Ginrich"},"score":0,"creation_date":1694772701,"post_id":52474093,"comment_id":135938362,"body_markdown":"&#180;new ProfilesIni()&#180; seems to have an empty HashMap. Also logically not clear, how this should know from Firefox Profiles","body":"&#180;new ProfilesIni()&#180; seems to have an empty HashMap. Also logically not clear, how this should know from Firefox Profiles"}],"tags":[],"owner":{"account_id":12360572,"reputation":1730,"user_id":9014957,"accept_rate":17,"display_name":"pburgr"},"comment_count":1,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1537772336,"creation_date":1537772336,"answer_id":52474093,"question_id":52464598,"body_markdown":"move your setup to `@BeforeClass`\r\n\r\nI&#39;m using this setup, works just fine:\r\n\r\n    @BeforeClass\r\n    public static void setUpClass() {\r\n    \tFirefoxOptions options = new FirefoxOptions();\r\n    \tProfilesIni allProfiles = new ProfilesIni();\t\t \r\n    \tFirefoxProfile selenium_profile = allProfiles.getProfile(&quot;selenium_profile&quot;);\r\n    \toptions.setProfile(selenium_profile);\r\n    \toptions.setBinary(&quot;C:\\\\Program Files (x86)\\\\Mozilla Firefox\\\\firefox.exe&quot;);\r\n    \tSystem.setProperty(&quot;webdriver.gecko.driver&quot;, &quot;C:\\\\Users\\\\pburgr\\\\Desktop\\\\geckodriver-v0.20.0-win64\\\\geckodriver.exe&quot;);\r\n    \tdriver = new FirefoxDriver(options);\r\n    \tdriver.manage().window().maximize();}\r\n\r\njust change paths and profile designation.","title":"How can I set a default profile for the Firefox driver in Selenium Webdriver 3?","body":"<p>move your setup to <code>@BeforeClass</code></p>\n\n<p>I'm using this setup, works just fine:</p>\n\n<pre><code>@BeforeClass\npublic static void setUpClass() {\n    FirefoxOptions options = new FirefoxOptions();\n    ProfilesIni allProfiles = new ProfilesIni();         \n    FirefoxProfile selenium_profile = allProfiles.getProfile(\"selenium_profile\");\n    options.setProfile(selenium_profile);\n    options.setBinary(\"C:\\\\Program Files (x86)\\\\Mozilla Firefox\\\\firefox.exe\");\n    System.setProperty(\"webdriver.gecko.driver\", \"C:\\\\Users\\\\pburgr\\\\Desktop\\\\geckodriver-v0.20.0-win64\\\\geckodriver.exe\");\n    driver = new FirefoxDriver(options);\n    driver.manage().window().maximize();}\n</code></pre>\n\n<p>just change paths and profile designation.</p>\n"},{"comments":[{"owner":{"account_id":13060408,"reputation":707,"user_id":9437799,"display_name":"Sam Ginrich"},"score":0,"creation_date":1694772597,"post_id":52474787,"comment_id":135938338,"body_markdown":"I get a null from &#180;profileIni.getProfile(&quot;default&quot;);&#180;","body":"I get a null from &#180;profileIni.getProfile(&quot;default&quot;);&#180;"}],"tags":[],"owner":{"account_id":10049107,"reputation":186647,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"comment_count":1,"down_vote_count":2,"up_vote_count":4,"is_accepted":true,"score":2,"last_activity_date":1537775375,"creation_date":1537775375,"answer_id":52474787,"question_id":52464598,"body_markdown":"As you are using _Selenium 3.14.0_ as per the [FirefoxDriver](https://seleniumhq.github.io/selenium/docs/api/java/org/openqa/selenium/firefox/FirefoxDriver.html) Class the valid constructors are:\r\n\r\n- `FirefoxDriver()`\r\n- `FirefoxDriver(FirefoxOptions options)`\r\n- `FirefoxDriver(GeckoDriverService service)`\r\n- `FirefoxDriver(GeckoDriverService service, FirefoxOptions options)`\r\n- `FirefoxDriver(XpiDriverService service)`\r\n- `FirefoxDriver(XpiDriverService service, FirefoxOptions options)`\r\n\r\nSo, as per your code attempts the following is not a valid option to invoke `FirefoxDriver()`\r\n\r\n\tWebDriver driver = new FirefoxDriver(profile);\r\n\t\r\nSolution\r\n--------\r\nTo invoke invoke `FirefoxDriver()` with the **default profile** you need to use the `setProfile(profile)` method to set the _FirefoxProfile_ through an instance of `FirefoxOptions()` and you can use the following code block:\r\n\r\n- Code Block:\r\n\r\n\t\timport org.openqa.selenium.WebDriver;\r\n\t\timport org.openqa.selenium.firefox.FirefoxDriver;\r\n\t\timport org.openqa.selenium.firefox.FirefoxOptions;\r\n\t\timport org.openqa.selenium.firefox.FirefoxProfile;\r\n\t\timport org.openqa.selenium.firefox.ProfilesIni;\r\n\t\timport org.testng.annotations.Test;\r\n\r\n\t\tpublic class A_FirefoxProfile {\r\n\r\n\t\t\t  @Test\r\n\t\t\t  public void seleniumFirefox() {\r\n\t\t\t    System.setProperty(&quot;webdriver.gecko.driver&quot;, &quot;C:/Utility/BrowserDrivers/geckodriver.exe&quot;);\r\n\t\t\t    ProfilesIni profileIni = new ProfilesIni();\r\n\t\t\t    FirefoxProfile profile = profileIni.getProfile(&quot;default&quot;);\r\n\t\t\t    FirefoxOptions options = new FirefoxOptions();\r\n\t\t\t    options.setProfile(profile);\r\n\t\t\t    WebDriver driver = new FirefoxDriver(options);\r\n\t\t\t    driver.get(&quot;http://www.google.com&quot;);\r\n\t\t\t    System.out.println(driver.getTitle());\r\n\t\t\t  }\r\n\r\n\t\t}\r\n\r\n- Console Output:\r\n\r\n\t\t[RemoteTestNG] detected TestNG version 6.14.2\r\n\t\t1537775040906\tgeckodriver\tINFO\tgeckodriver 0.20.1\r\n\t\t1537775040923\tgeckodriver\tINFO\tListening on 127.0.0.1:28133\r\n\t\tSep 24, 2018 1:14:30 PM org.openqa.selenium.remote.ProtocolHandshake createSession\r\n\t\tINFO: Detected dialect: W3C\r\n\t\tGoogle\r\n\t\tPASSED: seleniumFirefox\r\n\r\n\t\t===============================================\r\n\t\t    Default test\r\n\t\t    Tests run: 1, Failures: 0, Skips: 0\r\n\t\t===============================================\r\n\r\n\r\n\t\t===============================================\r\n\t\tDefault suite\r\n\t\tTotal tests run: 1, Failures: 0, Skips: 0\r\n\t\t===============================================\r\n","title":"How can I set a default profile for the Firefox driver in Selenium Webdriver 3?","body":"<p>As you are using <em>Selenium 3.14.0</em> as per the <a href=\"https://seleniumhq.github.io/selenium/docs/api/java/org/openqa/selenium/firefox/FirefoxDriver.html\" rel=\"nofollow noreferrer\">FirefoxDriver</a> Class the valid constructors are:</p>\n\n<ul>\n<li><code>FirefoxDriver()</code></li>\n<li><code>FirefoxDriver(FirefoxOptions options)</code></li>\n<li><code>FirefoxDriver(GeckoDriverService service)</code></li>\n<li><code>FirefoxDriver(GeckoDriverService service, FirefoxOptions options)</code></li>\n<li><code>FirefoxDriver(XpiDriverService service)</code></li>\n<li><code>FirefoxDriver(XpiDriverService service, FirefoxOptions options)</code></li>\n</ul>\n\n<p>So, as per your code attempts the following is not a valid option to invoke <code>FirefoxDriver()</code></p>\n\n<pre><code>WebDriver driver = new FirefoxDriver(profile);\n</code></pre>\n\n<h2>Solution</h2>\n\n<p>To invoke invoke <code>FirefoxDriver()</code> with the <strong>default profile</strong> you need to use the <code>setProfile(profile)</code> method to set the <em>FirefoxProfile</em> through an instance of <code>FirefoxOptions()</code> and you can use the following code block:</p>\n\n<ul>\n<li><p>Code Block:</p>\n\n<pre><code>import org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.firefox.FirefoxDriver;\nimport org.openqa.selenium.firefox.FirefoxOptions;\nimport org.openqa.selenium.firefox.FirefoxProfile;\nimport org.openqa.selenium.firefox.ProfilesIni;\nimport org.testng.annotations.Test;\n\npublic class A_FirefoxProfile {\n\n      @Test\n      public void seleniumFirefox() {\n        System.setProperty(\"webdriver.gecko.driver\", \"C:/Utility/BrowserDrivers/geckodriver.exe\");\n        ProfilesIni profileIni = new ProfilesIni();\n        FirefoxProfile profile = profileIni.getProfile(\"default\");\n        FirefoxOptions options = new FirefoxOptions();\n        options.setProfile(profile);\n        WebDriver driver = new FirefoxDriver(options);\n        driver.get(\"http://www.google.com\");\n        System.out.println(driver.getTitle());\n      }\n\n}\n</code></pre></li>\n<li><p>Console Output:</p>\n\n<pre><code>[RemoteTestNG] detected TestNG version 6.14.2\n1537775040906   geckodriver INFO    geckodriver 0.20.1\n1537775040923   geckodriver INFO    Listening on 127.0.0.1:28133\nSep 24, 2018 1:14:30 PM org.openqa.selenium.remote.ProtocolHandshake createSession\nINFO: Detected dialect: W3C\nGoogle\nPASSED: seleniumFirefox\n\n===============================================\n    Default test\n    Tests run: 1, Failures: 0, Skips: 0\n===============================================\n\n\n===============================================\nDefault suite\nTotal tests run: 1, Failures: 0, Skips: 0\n===============================================\n</code></pre></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":13060408,"reputation":707,"user_id":9437799,"display_name":"Sam Ginrich"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694807680,"creation_date":1694807680,"answer_id":77115035,"question_id":52464598,"body_markdown":"Essentially you pass the profile folder, not a profile name like &#180;default&#180; \r\n\r\n    String profileFolder = &quot;...&quot;; // Location according to firefox profile settings \r\n    FirefoxOptions options = new FirefoxOptions(); \r\n    FirefoxProfile profile = new FirefoxProfile(profileFolder);\r\n    options.setProfile(profile);\r\n    WebDriver driver = new FirefoxDriver(options);\r\n\r\nAs already mentionned in comments, the setup takes about 30 seconds.\r\n","title":"How can I set a default profile for the Firefox driver in Selenium Webdriver 3?","body":"<p>Essentially you pass the profile folder, not a profile name like ´default´</p>\n<pre><code>String profileFolder = &quot;...&quot;; // Location according to firefox profile settings \nFirefoxOptions options = new FirefoxOptions(); \nFirefoxProfile profile = new FirefoxProfile(profileFolder);\noptions.setProfile(profile);\nWebDriver driver = new FirefoxDriver(options);\n</code></pre>\n<p>As already mentionned in comments, the setup takes about 30 seconds.</p>\n"}],"owner":{"account_id":11238390,"reputation":103,"user_id":8243796,"display_name":"Vladyslav Kuhivchak"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14546,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"accepted_answer_id":52474787,"answer_count":3,"score":9,"last_activity_date":1694807680,"creation_date":1537693261,"question_id":52464598,"body_markdown":"I can&#39;t set a default profile for Firefox in Selenium Webdriver 3 because there is no such constructor in the `FirefoxDriver` class.\r\n\r\n    import org.openqa.selenium.WebDriver;\r\n    import org.openqa.selenium.firefox.FirefoxDriver;\r\n    import org.openqa.selenium.firefox.FirefoxProfile;\r\n    import org.openqa.selenium.firefox.ProfilesIni;\r\n    import org.testng.annotations.BeforeMethod;\r\n    import org.testng.annotations.Test;\r\n    \r\n    public class SeleniumStartTest {\r\n        @Test\r\n        public void seleniumFirefox() {\r\n            System.setProperty(&quot;webdriver.gecko.driver&quot;, &quot;C:\\\\Users\\\\FirefoxDriver\\\\geckodriver.exe&quot;);\r\n            ProfilesIni profileIni = new ProfilesIni();\r\n            FirefoxProfile profile = profileIni.getProfile(&quot;default&quot;);\r\n            WebDriver driver = new FirefoxDriver(profile);\r\n            driver.get(&quot;http://www.google.com&quot;);\r\n        }\r\n    }\r\n\r\nCompile error in Java code:\r\n[Java Code][1]\r\n\r\nMaven `pom.xml` dependencies:\r\n[Selenium 3.14.0][2]\r\n\r\nFirefox version:\r\n[Firefox version 62.0.2][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/E3DMF.jpg\r\n  [2]: https://i.stack.imgur.com/vYrw4.jpg\r\n  [3]: https://i.stack.imgur.com/cdWld.jpg","title":"How can I set a default profile for the Firefox driver in Selenium Webdriver 3?","body":"<p>I can't set a default profile for Firefox in Selenium Webdriver 3 because there is no such constructor in the <code>FirefoxDriver</code> class.</p>\n\n<pre><code>import org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.firefox.FirefoxDriver;\nimport org.openqa.selenium.firefox.FirefoxProfile;\nimport org.openqa.selenium.firefox.ProfilesIni;\nimport org.testng.annotations.BeforeMethod;\nimport org.testng.annotations.Test;\n\npublic class SeleniumStartTest {\n    @Test\n    public void seleniumFirefox() {\n        System.setProperty(\"webdriver.gecko.driver\", \"C:\\\\Users\\\\FirefoxDriver\\\\geckodriver.exe\");\n        ProfilesIni profileIni = new ProfilesIni();\n        FirefoxProfile profile = profileIni.getProfile(\"default\");\n        WebDriver driver = new FirefoxDriver(profile);\n        driver.get(\"http://www.google.com\");\n    }\n}\n</code></pre>\n\n<p>Compile error in Java code:\n<a href=\"https://i.stack.imgur.com/E3DMF.jpg\" rel=\"noreferrer\">Java Code</a></p>\n\n<p>Maven <code>pom.xml</code> dependencies:\n<a href=\"https://i.stack.imgur.com/vYrw4.jpg\" rel=\"noreferrer\">Selenium 3.14.0</a></p>\n\n<p>Firefox version:\n<a href=\"https://i.stack.imgur.com/cdWld.jpg\" rel=\"noreferrer\">Firefox version 62.0.2</a></p>\n"},{"tags":["java","r","xlsx"],"comments":[{"owner":{"account_id":58121,"reputation":260052,"user_id":1855677,"accept_rate":83,"display_name":"IRTFM"},"score":0,"creation_date":1354648778,"post_id":13709735,"comment_id":18829997,"body_markdown":"Looks like more of a problem with your Java installation than with R. Adding tag. You ought to document the version number for Java. This has no apparent connection to `choose.files`.","body":"Looks like more of a problem with your Java installation than with R. Adding tag. You ought to document the version number for Java. This has no apparent connection to <code>choose.files</code>."},{"owner":{"account_id":2111288,"reputation":479,"user_id":1876528,"display_name":"James"},"score":0,"creation_date":1354651095,"post_id":13709735,"comment_id":18830916,"body_markdown":"If I don&#39;t use choose.files, the xlsx package loads and works perfectly.  The only time xlsx doesn&#39;t work is if I try and load it after I&#39;ve used choose.files.  I have Java version 1.7.0_09","body":"If I don&#39;t use choose.files, the xlsx package loads and works perfectly.  The only time xlsx doesn&#39;t work is if I try and load it after I&#39;ve used choose.files.  I have Java version 1.7.0_09"},{"owner":{"account_id":58121,"reputation":260052,"user_id":1855677,"accept_rate":83,"display_name":"IRTFM"},"score":0,"creation_date":1354657774,"post_id":13709735,"comment_id":18833921,"body_markdown":"What do you mean by &quot;use it after I&#39;ve used choose.files&quot;? There is a base function named `file.choose`.","body":"What do you mean by &quot;use it after I&#39;ve used choose.files&quot;? There is a base function named <code>file.choose</code>."},{"owner":{"account_id":2111288,"reputation":479,"user_id":1876528,"display_name":"James"},"score":0,"creation_date":1354724151,"post_id":13709735,"comment_id":18858396,"body_markdown":"Sorry, I wasn&#39;t clear.  If I run the line in my script with choose.files before I run the line library(xlsx), then xlsx won&#39;t load and gives the error (but choose.files() works properly).  If I then close RStudio, reopen it and then run the lines in the opposite order, the xlxs package loads properly, but choose.files freezes up R.","body":"Sorry, I wasn&#39;t clear.  If I run the line in my script with choose.files before I run the line library(xlsx), then xlsx won&#39;t load and gives the error (but choose.files() works properly).  If I then close RStudio, reopen it and then run the lines in the opposite order, the xlxs package loads properly, but choose.files freezes up R."},{"owner":{"account_id":58121,"reputation":260052,"user_id":1855677,"accept_rate":83,"display_name":"IRTFM"},"score":0,"creation_date":1354725647,"post_id":13709735,"comment_id":18859257,"body_markdown":"I say again: There is a function `file.choose` in base pkg and I now say in addition that there is NO function `choose.files` in xslx.","body":"I say again: There is a function <code>file.choose</code> in base pkg and I now say in addition that there is NO function <code>choose.files</code> in xslx."},{"owner":{"account_id":2111288,"reputation":479,"user_id":1876528,"display_name":"James"},"score":0,"creation_date":1354727901,"post_id":13709735,"comment_id":18860500,"body_markdown":"Yes, choose.files is not in xlsx.  I know that.  choose.files and file.choose are basically the same and both have the problems that I describe above.","body":"Yes, choose.files is not in xlsx.  I know that.  choose.files and file.choose are basically the same and both have the problems that I describe above."},{"owner":{"account_id":58121,"reputation":260052,"user_id":1855677,"accept_rate":83,"display_name":"IRTFM"},"score":0,"creation_date":1354735672,"post_id":13709735,"comment_id":18864295,"body_markdown":"When I type `choose.files()` in an RStudio session I get an error. When I type `file.choose()` I get a dialog box. So, at least on one machine, they are not &quot;basically the same&quot;. Your error remains not reproducible because you are not describing the environment in which it occurs adequately. You have not described this in enough detail. (I thought maybe you were trying `library(file.choose())`, but that just errors out.","body":"When I type <code>choose.files()</code> in an RStudio session I get an error. When I type <code>file.choose()</code> I get a dialog box. So, at least on one machine, they are not &quot;basically the same&quot;. Your error remains not reproducible because you are not describing the environment in which it occurs adequately. You have not described this in enough detail. (I thought maybe you were trying <code>library(file.choose())</code>, but that just errors out."},{"owner":{"account_id":1092319,"reputation":18643,"user_id":1086688,"accept_rate":100,"display_name":"nograpes"},"score":0,"creation_date":1393075136,"post_id":13709735,"comment_id":33262718,"body_markdown":"I can&#39;t reproduce this on Windows 7 x64 with R 3.0.2 and RStudio 0.98.501. Do you still have this problem?","body":"I can&#39;t reproduce this on Windows 7 x64 with R 3.0.2 and RStudio 0.98.501. Do you still have this problem?"},{"owner":{"account_id":2109776,"reputation":226,"user_id":2401248,"display_name":"Kornelius Rohmeyer"},"score":5,"creation_date":1394399366,"post_id":13709735,"comment_id":33861143,"body_markdown":"The problem is that the C stack size was increased in R 2.15.2 from 10MB to 64MB (and reduced back to 16MB in R 3.x.x because of errors like this). See your error message &quot;Could not reserve enough space for object heap&quot; after calling file.choose() which seems to use some memory. I would guess that a call `.jinit(parameters=c(&quot;-Xrs&quot;, &quot;-Xss1m&quot;))` before calling `library(xlsx)` would solve this.","body":"The problem is that the C stack size was increased in R 2.15.2 from 10MB to 64MB (and reduced back to 16MB in R 3.x.x because of errors like this). See your error message &quot;Could not reserve enough space for object heap&quot; after calling file.choose() which seems to use some memory. I would guess that a call <code>.jinit(parameters=c(&quot;-Xrs&quot;, &quot;-Xss1m&quot;))</code> before calling <code>library(xlsx)</code> would solve this."},{"owner":{"account_id":201597,"reputation":4245,"user_id":448145,"accept_rate":80,"display_name":"Karl Forner"},"score":0,"creation_date":1396605359,"post_id":13709735,"comment_id":34874201,"body_markdown":"Have your reported the bug to the rstudio team ?","body":"Have your reported the bug to the rstudio team ?"},{"owner":{"account_id":1058572,"reputation":348,"user_id":1060707,"display_name":"Kyle Balkissoon"},"score":0,"creation_date":1410835772,"post_id":13709735,"comment_id":40464837,"body_markdown":"PS  read.xlsx is supposed to read in a sheet\n\nlibrary(xlsx) filename = &quot;c:/wheveryourfileishere&quot; mydata = read.xlsx(filename,sheetName=&#39;nameofsheetyouwant&#39;)","body":"PS  read.xlsx is supposed to read in a sheet  library(xlsx) filename = &quot;c:/wheveryourfileishere&quot; mydata = read.xlsx(filename,sheetName=&#39;nameofsheetyouwant&#39;)"},{"owner":{"account_id":1616503,"reputation":1092,"user_id":1494043,"accept_rate":92,"display_name":"Sander Van der Zeeuw"},"score":1,"creation_date":1412004408,"post_id":13709735,"comment_id":69063863,"body_markdown":"I would advise you to use the WriteXLS package: [{WriteXLS}](http://cran.r-project.org/web/packages/WriteXLS/WriteXLS.pdf) This package is much more Rstudio friendly imo.","body":"I would advise you to use the WriteXLS package: <a href=\"http://cran.r-project.org/web/packages/WriteXLS/WriteXLS.pdf\" rel=\"nofollow noreferrer\">{WriteXLS}</a> This package is much more Rstudio friendly imo."}],"answers":[{"tags":[],"owner":{"account_id":4156721,"reputation":91,"user_id":3407820,"display_name":"zyduss"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1399581196,"creation_date":1399581196,"answer_id":23551959,"question_id":13709735,"body_markdown":"Try clearing out your Temp files from \r\n\r\nControl Panel &gt; Programs &gt; Java \r\n\r\nSee if it works. ","title":"Conflict with xlsx package and choose.files","body":"<p>Try clearing out your Temp files from </p>\n\n<p>Control Panel > Programs > Java </p>\n\n<p>See if it works. </p>\n"},{"tags":[],"owner":{"account_id":5054825,"reputation":1783,"user_id":4058364,"display_name":"Leo"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1411144975,"creation_date":1411144975,"answer_id":25938698,"question_id":13709735,"body_markdown":"I recently had this issue with an installation of R on a new machine.  Make sure you are using the correct version of Java (32-bit vs 64-bit) to match your version of R.  Note that the 64-bit version of Java is not found on their main download page but on their &quot;manual&quot; d/l page [here][1].\r\n\r\n\r\n  [1]: http://www.java.com/en/download/manual.jsp","title":"Conflict with xlsx package and choose.files","body":"<p>I recently had this issue with an installation of R on a new machine.  Make sure you are using the correct version of Java (32-bit vs 64-bit) to match your version of R.  Note that the 64-bit version of Java is not found on their main download page but on their \"manual\" d/l page <a href=\"http://www.java.com/en/download/manual.jsp\" rel=\"nofollow\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":3997651,"reputation":839,"user_id":3294677,"accept_rate":80,"display_name":"Romain"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1413982441,"creation_date":1413982441,"answer_id":26507924,"question_id":13709735,"body_markdown":"I always use these lines at the top:\r\n\r\n    options(java.parameters=&quot;-Xmx4000m&quot;)\r\n    options(java.home=&quot;C:/Program Files/Java/jre7/&quot;)\r\n\r\nSee if maybe that helps. ","title":"Conflict with xlsx package and choose.files","body":"<p>I always use these lines at the top:</p>\n\n<pre><code>options(java.parameters=\"-Xmx4000m\")\noptions(java.home=\"C:/Program Files/Java/jre7/\")\n</code></pre>\n\n<p>See if maybe that helps. </p>\n"},{"comments":[{"owner":{"account_id":874992,"reputation":41843,"user_id":3817004,"accept_rate":100,"display_name":"Uwe"},"score":0,"creation_date":1480574675,"post_id":40894643,"comment_id":69021368,"body_markdown":"What is the benefit of installing `XLConnect` when you are calling `read.xlsx2()` from package `xlsx`?","body":"What is the benefit of installing <code>XLConnect</code> when you are calling <code>read.xlsx2()</code> from package <code>xlsx</code>?"},{"owner":{"account_id":7696658,"reputation":75,"user_id":5830904,"accept_rate":100,"display_name":"mikeymike"},"score":0,"creation_date":1480608423,"post_id":40894643,"comment_id":69042706,"body_markdown":"XLConnect is package that allows for reading, writing and manipulating Microsoft Excel files from within R. Its just another way to read excel files. Just offering my advice on reading excel files in others ways. But for xlsx you do need the xlsxjars package","body":"XLConnect is package that allows for reading, writing and manipulating Microsoft Excel files from within R. Its just another way to read excel files. Just offering my advice on reading excel files in others ways. But for xlsx you do need the xlsxjars package"},{"owner":{"account_id":874992,"reputation":41843,"user_id":3817004,"accept_rate":100,"display_name":"Uwe"},"score":0,"creation_date":1480613990,"post_id":40894643,"comment_id":69046257,"body_markdown":"Both packages aim at the same goal: `XLConnect`: _Provides comprehensive functionality to read, write and format Excel data._ `xlsx`: _Provide R functions to read/write/format Excel 2007 and Excel 97/2000/XP/2003 file formats._ However, also `XLConnect` [depends on other packages `XLConnectJars` and `rJava`](https://cran.r-project.org/web/packages/XLConnect/index.html) which need to be installed alongside.","body":"Both packages aim at the same goal: <code>XLConnect</code>: <i>Provides comprehensive functionality to read, write and format Excel data.</i> <code>xlsx</code>: <i>Provide R functions to read/write/format Excel 2007 and Excel 97/2000/XP/2003 file formats.</i> However, also <code>XLConnect</code> <a href=\"https://cran.r-project.org/web/packages/XLConnect/index.html\" rel=\"nofollow noreferrer\">depends on other packages <code>XLConnectJars</code> and <code>rJava</code></a> which need to be installed alongside."},{"owner":{"account_id":2443503,"reputation":2613,"user_id":2622641,"accept_rate":88,"display_name":"Stefan F"},"score":2,"creation_date":1484985677,"post_id":40894643,"comment_id":70744988,"body_markdown":"i&#39;d recommend `openxlsx` which is quite fully featured and does not depend on java","body":"i&#39;d recommend <code>openxlsx</code> which is quite fully featured and does not depend on java"}],"tags":[],"owner":{"account_id":7696658,"reputation":75,"user_id":5830904,"accept_rate":100,"display_name":"mikeymike"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1480527091,"creation_date":1480527091,"answer_id":40894643,"question_id":13709735,"body_markdown":"Try some of these packages:\r\n\r\n    install.packages(&quot;XLConnect&quot;)\r\n    install.packages(&quot;xlsxjars&quot;)\r\n    install.packages(&quot;xlsx&quot;)\r\n\r\nThen load the `library()`\r\n\r\nUse `read.xlsx2(&quot;blah.xlsx&quot;,sheetIndex=NULL)`\r\n\r\nDon&#39;t use the `file.choose`, just insert the file straight into the `read.xlsx2` function\r\n\r\nor\r\n\r\n    read.xlsx2(&quot;blah.xlsx&quot;,sheetName=NULL&quot;)","title":"Conflict with xlsx package and choose.files","body":"<p>Try some of these packages:</p>\n\n<pre><code>install.packages(\"XLConnect\")\ninstall.packages(\"xlsxjars\")\ninstall.packages(\"xlsx\")\n</code></pre>\n\n<p>Then load the <code>library()</code></p>\n\n<p>Use <code>read.xlsx2(\"blah.xlsx\",sheetIndex=NULL)</code></p>\n\n<p>Don't use the <code>file.choose</code>, just insert the file straight into the <code>read.xlsx2</code> function</p>\n\n<p>or</p>\n\n<pre><code>read.xlsx2(\"blah.xlsx\",sheetName=NULL\")\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4187808,"reputation":295,"user_id":6414727,"accept_rate":71,"display_name":"Jeremy R. Johnson"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1486555140,"creation_date":1486555140,"answer_id":42112520,"question_id":13709735,"body_markdown":"One of the newer packages is the rio package.  It has solved many of the import and export problems that I was having, and has the added benefit of only needing one library to import/export many different formats.  It determines the format based on the extension of the filename.  It also seems to run cleaner and faster than some of the other packages, even though it uses basically the same functions.  For example, with Excel files, it uses the `write.xlsx` function, but has worked for me with large datasets, when `write.xlsx` didn&#39;t.  the packages documentation can be found [here](https://cran.r-project.org/web/packages/rio/rio.pdf).\r\n\r\n    install.packages(&quot;rio&quot;)    \r\n    library(rio)\r\n    \r\n    import(&quot;myfile.xlsx&quot;)\r\n    export(df, &quot;myfile.xlsx&quot;)\r\n\r\n ","title":"Conflict with xlsx package and choose.files","body":"<p>One of the newer packages is the rio package.  It has solved many of the import and export problems that I was having, and has the added benefit of only needing one library to import/export many different formats.  It determines the format based on the extension of the filename.  It also seems to run cleaner and faster than some of the other packages, even though it uses basically the same functions.  For example, with Excel files, it uses the <code>write.xlsx</code> function, but has worked for me with large datasets, when <code>write.xlsx</code> didn't.  the packages documentation can be found <a href=\"https://cran.r-project.org/web/packages/rio/rio.pdf\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<pre><code>install.packages(\"rio\")    \nlibrary(rio)\n\nimport(\"myfile.xlsx\")\nexport(df, \"myfile.xlsx\")\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5281384,"reputation":1498,"user_id":4216625,"display_name":"Tom Kelly"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1487247160,"creation_date":1487247160,"answer_id":42273625,"question_id":13709735,"body_markdown":"I&#39;d recommend Hadley&#39;s `readxl` package, it installs from [CRAN][1] without Java dependencies.\r\n\r\n    library(&quot;readxl&quot;)\r\n    my_data &lt;- read_excel(filename, sheet = 1)\r\n\r\n\r\n  [1]: https://cran.r-project.org/web/packages/readxl/","title":"Conflict with xlsx package and choose.files","body":"<p>I'd recommend Hadley's <code>readxl</code> package, it installs from <a href=\"https://cran.r-project.org/web/packages/readxl/\" rel=\"nofollow noreferrer\">CRAN</a> without Java dependencies.</p>\n\n<pre><code>library(\"readxl\")\nmy_data &lt;- read_excel(filename, sheet = 1)\n</code></pre>\n"}],"owner":{"account_id":2111288,"reputation":479,"user_id":1876528,"display_name":"James"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5738,"favorite_count":0,"down_vote_count":1,"up_vote_count":46,"answer_count":6,"score":45,"last_activity_date":1694806609,"creation_date":1354646578,"question_id":13709735,"body_markdown":"I&#39;m having a strange problem with loading the xlsx package and using choose.files.  \r\n\r\nThis problem began as soon as I updated RStudio to the newest version (v0.97.237).  If I start RStudio and then load xlsx (i.e. `library(xlsx)`) the package loads just fine.  However, if I then try and use `choose.files()`, RStudio freezes up (actually it continually runs and can&#39;t be closed without ending it with Win7 task manager).  If I start RStudio and use choose.files first, it works just fine.  If I then run the `library(xlsx)` line, the xlsx package won&#39;t load.  It gives the error below.\r\n\r\n  I&#39;ve tried reinstalling the xlsx package (along with xlsxjars and rJava), but that didn&#39;t work.  Neither did reinstalling Java.  \r\n\r\nAny suggestions?  I&#39;m using R v2.15.2.\r\n\r\n\r\n\r\n    library(xlsx)  \r\n    Loading required package: xlsxjars  \r\n    Loading required package: rJava  \r\n    Error occurred during initialization of VM  \r\n    Could not reserve enough space for object heap  \r\n    Error : .onLoad failed in loadNamespace() for &#39;xlsxjars&#39;, details:  \r\n      call: .jinit()  \r\n      error: Cannot create Java virtual machine (-4)  \r\n    Error: package ‘xlsxjars’ could not be loaded  \r\n\r\n\r\nEDIT:\r\nHere&#39;s the problem.  Sorry for any confusion.  When I enter this:\r\n\r\n    filename&lt;-file.choose() #select file\r\n    library(xlsx)\r\n    mydata&lt;-read.xlsx(filename,1) #load datafile\r\n\r\nI can successfully select the file name, but the xlsx package fails to load so I can&#39;t open the data file.  I get the error above.  However, if I run this instead (after I&#39;ve closed and restarted RStudio):\r\n\r\n    library(xlsx)\r\n    filename&lt;-file.choose() #select file\r\n    mydata&lt;-read.xlsx(filename,1) #load datafile\r\n\r\nThe xlsx package loads properly, but `file.choose` causes R to run indefinitely so the script freezes and I can&#39;t load my file.  This is also the case using `choose.files()`. I have no idea why those two things (xlsx, and `file.choose`/`choose.files`) would be conflicting but it appears that they are since I can only use one or the other depending on which one I use first.  \r\n\r\nEDIT 2: \r\nI&#39;ve tried this on a different computer (same OS, same versions of R, RStudio, and Java) and I get the same problem.\r\n\r\nEDIT 3:\r\nI converted back to RStudio v0.97.90 and the problem went away.  I guess it is an RStudio problem.","title":"Conflict with xlsx package and choose.files","body":"<p>I'm having a strange problem with loading the xlsx package and using choose.files.  </p>\n\n<p>This problem began as soon as I updated RStudio to the newest version (v0.97.237).  If I start RStudio and then load xlsx (i.e. <code>library(xlsx)</code>) the package loads just fine.  However, if I then try and use <code>choose.files()</code>, RStudio freezes up (actually it continually runs and can't be closed without ending it with Win7 task manager).  If I start RStudio and use choose.files first, it works just fine.  If I then run the <code>library(xlsx)</code> line, the xlsx package won't load.  It gives the error below.</p>\n\n<p>I've tried reinstalling the xlsx package (along with xlsxjars and rJava), but that didn't work.  Neither did reinstalling Java.  </p>\n\n<p>Any suggestions?  I'm using R v2.15.2.</p>\n\n<pre><code>library(xlsx)  \nLoading required package: xlsxjars  \nLoading required package: rJava  \nError occurred during initialization of VM  \nCould not reserve enough space for object heap  \nError : .onLoad failed in loadNamespace() for 'xlsxjars', details:  \n  call: .jinit()  \n  error: Cannot create Java virtual machine (-4)  \nError: package ‘xlsxjars’ could not be loaded  \n</code></pre>\n\n<p>EDIT:\nHere's the problem.  Sorry for any confusion.  When I enter this:</p>\n\n<pre><code>filename&lt;-file.choose() #select file\nlibrary(xlsx)\nmydata&lt;-read.xlsx(filename,1) #load datafile\n</code></pre>\n\n<p>I can successfully select the file name, but the xlsx package fails to load so I can't open the data file.  I get the error above.  However, if I run this instead (after I've closed and restarted RStudio):</p>\n\n<pre><code>library(xlsx)\nfilename&lt;-file.choose() #select file\nmydata&lt;-read.xlsx(filename,1) #load datafile\n</code></pre>\n\n<p>The xlsx package loads properly, but <code>file.choose</code> causes R to run indefinitely so the script freezes and I can't load my file.  This is also the case using <code>choose.files()</code>. I have no idea why those two things (xlsx, and <code>file.choose</code>/<code>choose.files</code>) would be conflicting but it appears that they are since I can only use one or the other depending on which one I use first.  </p>\n\n<p>EDIT 2: \nI've tried this on a different computer (same OS, same versions of R, RStudio, and Java) and I get the same problem.</p>\n\n<p>EDIT 3:\nI converted back to RStudio v0.97.90 and the problem went away.  I guess it is an RStudio problem.</p>\n"},{"tags":["java","json","jackson"],"comments":[{"owner":{"account_id":12743722,"reputation":19966,"user_id":12567365,"display_name":"andrewJames"},"score":0,"creation_date":1685735938,"post_id":76393135,"comment_id":134708273,"body_markdown":"What happens when you try these tests for yourself? What do you observe? Do your observations effectively answer the question, or do they lead to new (potentially more specific) questions?","body":"What happens when you try these tests for yourself? What do you observe? Do your observations effectively answer the question, or do they lead to new (potentially more specific) questions?"},{"owner":{"account_id":1600162,"reputation":1885,"user_id":1481345,"display_name":"Ale Zalazar"},"score":1,"creation_date":1685744961,"post_id":76393135,"comment_id":134709409,"body_markdown":"It&#39;d probably be beneficial for you to try this by yourself on an online IDE like https://www.jdoodle.com/","body":"It&#39;d probably be beneficial for you to try this by yourself on an online IDE like <a href=\"https://www.jdoodle.com/\" rel=\"nofollow noreferrer\">jdoodle.com</a>"},{"owner":{"account_id":10187542,"reputation":409,"user_id":20692967,"display_name":"Sergey Zolotarev"},"score":0,"creation_date":1685757042,"post_id":76393135,"comment_id":134710253,"body_markdown":"@andrewJames such basic testing would not be so easy on my slow laptop currently trying not to faint while digesting a Docker-run app. Besides, others may find this information useful too. SO is a &quot;knowledge database&quot;, after all, isn&#39;t it?","body":"@andrewJames such basic testing would not be so easy on my slow laptop currently trying not to faint while digesting a Docker-run app. Besides, others may find this information useful too. SO is a &quot;knowledge database&quot;, after all, isn&#39;t it?"},{"owner":{"account_id":10187542,"reputation":409,"user_id":20692967,"display_name":"Sergey Zolotarev"},"score":0,"creation_date":1685777894,"post_id":76393135,"comment_id":134711445,"body_markdown":"@AleZalazar how do I know what Jackson does behind the scenes to get the result? Online IDEs don&#39;t have a debugging utility, do they?","body":"@AleZalazar how do I know what Jackson does behind the scenes to get the result? Online IDEs don&#39;t have a debugging utility, do they?"},{"owner":{"account_id":10187542,"reputation":409,"user_id":20692967,"display_name":"Sergey Zolotarev"},"score":0,"creation_date":1685805638,"post_id":76393135,"comment_id":134714026,"body_markdown":"@AleZalazar I don&#39;t know how to get it work. How do you import in jdoodle? These imports, `import com.fasterxml.jackson.core.jackson.databind.ObjectMapper;\nimport lib.Person;` don&#39;t work, jdoodle can&#39;t find the files","body":"@AleZalazar I don&#39;t know how to get it work. How do you import in jdoodle? These imports, <code>import com.fasterxml.jackson.core.jackson.databind.ObjectMapper; import lib.Person;</code> don&#39;t work, jdoodle can&#39;t find the files"},{"owner":{"account_id":12743722,"reputation":19966,"user_id":12567365,"display_name":"andrewJames"},"score":0,"creation_date":1685807719,"post_id":76393135,"comment_id":134714240,"body_markdown":"&quot;_I don&#39;t know how to get it to work._&quot; - Use the [advanced IDE](https://www.jdoodle.com/online-java-compiler-ide/). This allows you to specify 3rd party libraries (for example, as a Maven lib using `com.fasterxml.jackson.core:jackson-databind:2.15.0-rc3`). And your `Person` can be uploaded, or a nested class. @Sergey","body":"&quot;<i>I don&#39;t know how to get it to work.</i>&quot; - Use the <a href=\"https://www.jdoodle.com/online-java-compiler-ide/\" rel=\"nofollow noreferrer\">advanced IDE</a>. This allows you to specify 3rd party libraries (for example, as a Maven lib using <code>com.fasterxml.jackson.core:jackson-databind:2.15.0-rc3</code>). And your <code>Person</code> can be uploaded, or a nested class. @Sergey"},{"owner":{"account_id":10187542,"reputation":409,"user_id":20692967,"display_name":"Sergey Zolotarev"},"score":0,"creation_date":1685808975,"post_id":76393135,"comment_id":134714378,"body_markdown":"@andrewJames I did use the advanced IDE. Please see the screenshot: https://ibb.co/KW08SgZ","body":"@andrewJames I did use the advanced IDE. Please see the screenshot: <a href=\"https://ibb.co/KW08SgZ\" rel=\"nofollow noreferrer\">ibb.co/KW08SgZ</a>"},{"owner":{"account_id":12743722,"reputation":19966,"user_id":12567365,"display_name":"andrewJames"},"score":0,"creation_date":1685809334,"post_id":76393135,"comment_id":134714418,"body_markdown":"Step 1: Fix your import for `ObjectMapper`. Use `import com.fasterxml.jackson.databind.ObjectMapper;` - compare that to what&#39;s in your screenshot. (This is getting a bit too far off-topic, I think.)","body":"Step 1: Fix your import for <code>ObjectMapper</code>. Use <code>import com.fasterxml.jackson.databind.ObjectMapper;</code> - compare that to what&#39;s in your screenshot. (This is getting a bit too far off-topic, I think.)"},{"owner":{"account_id":10187542,"reputation":409,"user_id":20692967,"display_name":"Sergey Zolotarev"},"score":0,"creation_date":1685812322,"post_id":76393135,"comment_id":134714741,"body_markdown":"@andrewJames no, it doesn&#39;t work too (nor should it, you didn&#39;t include the entire group id, `com.fasterxml.jackson.core`)","body":"@andrewJames no, it doesn&#39;t work too (nor should it, you didn&#39;t include the entire group id, <code>com.fasterxml.jackson.core</code>)"},{"owner":{"account_id":12743722,"reputation":19966,"user_id":12567365,"display_name":"andrewJames"},"score":0,"creation_date":1685813127,"post_id":76393135,"comment_id":134714828,"body_markdown":"Take a [closer look](https://javadoc.io/doc/com.fasterxml.jackson.core/jackson-databind/latest/com/fasterxml/jackson/databind/ObjectMapper.html), please. Are you mixing up the library (JAR file) name with the fully qualified class name? But like I say, we have now strayed a long way from your question.","body":"Take a <a href=\"https://javadoc.io/doc/com.fasterxml.jackson.core/jackson-databind/latest/com/fasterxml/jackson/databind/ObjectMapper.html\" rel=\"nofollow noreferrer\">closer look</a>, please. Are you mixing up the library (JAR file) name with the fully qualified class name? But like I say, we have now strayed a long way from your question."},{"owner":{"account_id":10187542,"reputation":409,"user_id":20692967,"display_name":"Sergey Zolotarev"},"score":0,"creation_date":1685815283,"post_id":76393135,"comment_id":134715068,"body_markdown":"@andrewJames Even if I use your import, it doesn&#39;t work. The console says, &quot;Maven library download failed&quot;. What&#39;s your library declaration? I tried both `com.fasterxml.jackson.core:jackson.databind:2.15.2` and `com.fasterxml.jackson.core:jackson.databind:jar:2.15.2`","body":"@andrewJames Even if I use your import, it doesn&#39;t work. The console says, &quot;Maven library download failed&quot;. What&#39;s your library declaration? I tried both <code>com.fasterxml.jackson.core:jackson.databind:2.15.2</code> and <code>com.fasterxml.jackson.core:jackson.databind:jar:2.15.2</code>"},{"owner":{"account_id":12743722,"reputation":19966,"user_id":12567365,"display_name":"andrewJames"},"score":0,"creation_date":1685817790,"post_id":76393135,"comment_id":134715348,"body_markdown":"I gave you an example of a valid Maven library declaration in an earlier comment. You even showed me another valid example in a screenshot you provided. Use one of those. And then fix your Java  `import` statement. I cannot help you further.","body":"I gave you an example of a valid Maven library declaration in an earlier comment. You even showed me another valid example in a screenshot you provided. Use one of those. And then fix your Java  <code>import</code> statement. I cannot help you further."}],"answers":[{"comments":[{"owner":{"account_id":13176203,"reputation":195,"user_id":9517076,"display_name":"I have 10 fingers"},"score":1,"creation_date":1694667648,"post_id":76397929,"comment_id":135921940,"body_markdown":"Well organized Jackson&#39;s behaviors thank you! It helps me to remind its behavior.","body":"Well organized Jackson&#39;s behaviors thank you! It helps me to remind its behavior."}],"tags":[],"owner":{"account_id":10187542,"reputation":409,"user_id":20692967,"display_name":"Sergey Zolotarev"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1694806535,"creation_date":1685824251,"answer_id":76397929,"question_id":76393135,"body_markdown":"***Note.** You can run all the snippets on [jdoodle][1]. Make sure you include the Jackson dependency in the `maven-lib` folder. Press `...` → `Manage libs`, then paste `com.fasterxml.jackson.core:jackson-databind:2.15.2` and finally press `Add library`. Notice, the `Person` class includes a package declaration. It&#39;s important, don&#39;t forget to add it too*\r\n\r\n```java\r\nimport com.fasterxml.jackson.databind.ObjectMapper;\r\nimport com.fasterxml.jackson.core.JsonProcessingException;\r\nimport lib.Person;\r\n\r\npublic class MyClass {\r\n   public static void main(String args[]) throws JsonProcessingException {\r\n      ObjectMapper mapper = new ObjectMapper();\r\n      String JSON = &quot;{\\&quot;id\\&quot;: 1, \\&quot;name\\&quot;: \\&quot;Sergey\\&quot;}&quot;;\r\n      Person me = mapper.readValue(JSON, Person.class);\r\n      System.out.println(me);\r\n    }\r\n}\r\n```\r\n\r\n0. &gt; Do I need to include setters?\r\n\r\nYes, you do (assuming we discuss the default scenario as defined in your question). Watch out! The exception you&#39;re going to get in case you don&#39;t include setters is not going to be very informative\r\n\r\n```java\r\npackage lib;\r\n\r\npublic class Person {\r\n    private int id;\r\n    private String name;\r\n    \r\n    public Person() {\r\n        System.out.println(&quot;Person&#39;s public no-args is called...&quot;);\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n       return String.format(&quot;Person[id=%d, name=%s]&quot;, id, name);\r\n    }\r\n}\r\n```\r\n```\r\nPerson&#39;s public no-args is called...\r\n\r\nException in thread &quot;main&quot; com.fasterxml.jackson.databind.exc.UnrecognizedPropertyException: Unrecognized field &quot;id&quot; (class lib.Person), not marked as ignorable (0 known properties: ])\r\n at [Source: (String)&quot;{&quot;id&quot;: 1, &quot;name&quot;: &quot;Sergey&quot;}&quot;; line: 1, column: 9] (through reference chain: lib.Person[&quot;id&quot;])\r\n...\r\n```\r\n1. &gt; Does a no-args have to be public?\r\n\r\nNo, it doesn&#39;t. You can make the setters `private` too\r\n\r\n```java\r\npackage lib;\r\n\r\npublic class Person {\r\n    private int id;\r\n    private String name;\r\n    \r\n    private Person() {\r\n        System.out.println(&quot;Person&#39;s private no-args is called...&quot;);\r\n    }\r\n    \r\n    public void setId(int id) {\r\n        System.out.println(&quot;setId() is called...&quot;);\r\n        this.id = id;\r\n    }\r\n    \r\n    public void setName(String name) {\r\n        System.out.println(&quot;setName() is called...&quot;);\r\n        this.name = name;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n       return String.format(&quot;Person[id=%d, name=%s]&quot;, id, name);\r\n    }\r\n}\r\n```\r\n```\r\nPerson&#39;s private no-args is called...\r\nsetId() is called...\r\nsetName() is called...\r\nPerson[id=1, name=Sergey]\r\n```\r\n2. &gt; Does a no-args have to be the only constructor available? What if there are an explicit no-args and an all-args, for example? What happens then?\r\n\r\nJackson wouldn&#39;t care about your other constructor. You can even make your no-args `private` thus nudging Jackson to call your `public` canonical – it couldn&#39;t care less\r\n```java\r\npackage lib;\r\n\r\npublic class Person {\r\n    private int id;\r\n    private String name;\r\n    \r\n    private Person() {\r\n        System.out.println(&quot;Person&#39;s private no-args is called...&quot;);\r\n    }\r\n    \r\n    public Person(int id, String name) {\r\n        System.out.println(&quot;Person&#39;s public canonical is called...&quot;);\r\n        this.id = id;\r\n        this.name = name;\r\n    }\r\n    \r\n    public void setId(int id) {\r\n        System.out.println(&quot;setId() is called...&quot;);\r\n        this.id = id;\r\n    }\r\n    \r\n    public void setName(String name) {\r\n        System.out.println(&quot;setName() is called...&quot;);\r\n        this.name = name;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n       return String.format(&quot;Person[id=%d, name=%s]&quot;, id, name);\r\n    }\r\n}\r\n```\r\n```\r\nPerson&#39;s private no-args is called...\r\nsetId() is called...\r\nsetName() is called...\r\nPerson[id=1, name=Sergey]\r\n```\r\n3. &gt; Can Jackson figure out what to do if there&#39;s no no-args? Will it take an all-args?\r\n\r\nNo, it won&#39;t\r\n```java\r\npackage lib;\r\n\r\npublic class Person {\r\n    private int id;\r\n    private String name;\r\n    \r\n    public Person(int id, String name) {\r\n        System.out.println(&quot;Person&#39;s public canonical is called...&quot;);\r\n        this.id = id;\r\n        this.name = name;\r\n    }\r\n    \r\n    public void setId(int id) {\r\n        System.out.println(&quot;setId() is called...&quot;);\r\n        this.id = id;\r\n    }\r\n    \r\n    public void setName(String name) {\r\n        System.out.println(&quot;setName() is called...&quot;);\r\n        this.name = name;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n       return String.format(&quot;Person[id=%d, name=%s]&quot;, id, name);\r\n    }\r\n}\r\n```\r\n```\r\nException in thread &quot;main&quot; com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Cannot construct instance of `lib.Person` (no Creators, like default constructor, exist): cannot deserialize from Object value (no delegate- or property-based Creator)\r\n at [Source: (String)&quot;{&quot;id&quot;: 1, &quot;name&quot;: &quot;Sergey&quot;}&quot;; line: 1, column: 2]\r\n```\r\nI&#39;m going off on a tangent a little bit since the question is explicitly about Jackson&#39;s default behavior, but if you annotate your canonical constructor as `@JsonCreator` and manually map your constructor arguments with `@JsonProperty`, Jackson will finally condescend to use it\r\n```java\r\npackage lib;\r\n\r\nimport com.fasterxml.jackson.annotation.JsonCreator;\r\nimport com.fasterxml.jackson.annotation.JsonProperty;\r\n\r\npublic class Person {\r\n    private int id;\r\n    private String name;\r\n    \r\n    @JsonCreator\r\n    public Person(@JsonProperty(&quot;id&quot;) int id, @JsonProperty(&quot;name&quot;) String name) {\r\n        System.out.println(&quot;Person&#39;s public canonical is called...&quot;);\r\n        this.id = id;\r\n        this.name = name;\r\n    }\r\n    \r\n    public void setId(int id) {\r\n        System.out.println(&quot;setId() is called...&quot;);\r\n        this.id = id;\r\n    }\r\n    \r\n    public void setName(String name) {\r\n        System.out.println(&quot;setName() is called...&quot;);\r\n        this.name = name;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n       return String.format(&quot;Person[id=%d, name=%s]&quot;, id, name);\r\n    }\r\n}\r\n```\r\n```\r\nPerson&#39;s public canonical is called...\r\nPerson[id=1, name=Sergey]\r\n```\r\nIf you omit `@JsonProperty` annotations assuming Jackson will map the properties automatically (after all, the names and types match), you&#39;re going to have problems. Again, the error message is not going to help you at all\r\n```java\r\npackage lib;\r\n\r\nimport com.fasterxml.jackson.annotation.JsonCreator;\r\n\r\npublic class Person {\r\n    private int id;\r\n    private String name;\r\n    \r\n    @JsonCreator\r\n    public Person(int id, String name) {\r\n        System.out.println(&quot;Person&#39;s public canonical is called...&quot;);\r\n        this.id = id;\r\n        this.name = name;\r\n    }\r\n    \r\n    public void setId(int id) {\r\n        System.out.println(&quot;setId() is called...&quot;);\r\n        this.id = id;\r\n    }\r\n    \r\n    public void setName(String name) {\r\n        System.out.println(&quot;setName() is called...&quot;);\r\n        this.name = name;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n       return String.format(&quot;Person[id=%d, name=%s]&quot;, id, name);\r\n    }\r\n}\r\n```\r\n```\r\nException in thread &quot;main&quot; com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Invalid type definition for type `lib.Person`: Argument #0 of constructor [constructor for `lib.Person` (2 args), annotations: {interface com.fasterxml.jackson.annotation.JsonCreator=@com.fasterxml.jackson.annotation.JsonCreator(mode=DEFAULT)} has no property name (and is not Injectable): can not use as property-based Creator\r\n at [Source: (String)&quot;{&quot;id&quot;: 1, &quot;name&quot;: &quot;Sergey&quot;}&quot;; line: 1, column: 1]\r\n```\r\nAs a way to avoid manual mapping with `@JsonProperty`, you can register the `ParameterNamesModule`. It will allow Jackson to perform the mapping automatically if JSON properties&#39; names match those of class fields. Jackson 3.x supports `ParameterNamesModule` by default\r\n```java\r\n  ObjectMapper mapper = new ObjectMapper()\r\n                            .registerModule(new ParameterNamesModule());\r\n```\r\n4. &gt; Would Jackson assemble an instance if some properties are not set by a constructor (assuming it would take a &quot;some-args&quot; constructor)? Would Jackson invoke available setters, or would it resort to reflexion?\r\n\r\nAs stated above, in a default scenario, Jackson is going to be happy with a no-args only. However, if you use the annotations mentioned in the previous item, Jackson will do exactly that: invoke a &quot;some-args&quot; constructor and then call setters to initialize the remaining fields\r\n```java\r\npackage lib;\r\n\r\nimport com.fasterxml.jackson.annotation.JsonCreator;\r\nimport com.fasterxml.jackson.annotation.JsonProperty;\r\n\r\npublic class Person {\r\n    private int id;\r\n    private String name;\r\n    \r\n    @JsonCreator\r\n    public Person(@JsonProperty(&quot;name&quot;) String name) {\r\n        System.out.println(&quot;Person&#39;s public \\&quot;some-args\\&quot; is called...&quot;);\r\n        this.name = name;\r\n    }\r\n    \r\n    public void setId(int id) {\r\n        System.out.println(&quot;setId() is called...&quot;);\r\n        this.id = id;\r\n    }\r\n    \r\n    public void setName(String name) {\r\n        System.out.println(&quot;setName() is called...&quot;);\r\n        this.name = name;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n       return String.format(&quot;Person[id=%d, name=%s]&quot;, id, name);\r\n    }\r\n}\r\n```\r\n```\r\nPerson&#39;s public &quot;some-args&quot; is called...\r\nsetId() is called...\r\nPerson[id=1, name=Sergey]\r\n```\r\n \r\n  [1]: https://www.jdoodle.com/online-java-compiler-ide/","title":"Jackson deserialization. How exactly does it work if you rely on defaults completely?","body":"<p><em><strong>Note.</strong> You can run all the snippets on <a href=\"https://www.jdoodle.com/online-java-compiler-ide/\" rel=\"nofollow noreferrer\">jdoodle</a>. Make sure you include the Jackson dependency in the <code>maven-lib</code> folder. Press <code>...</code> → <code>Manage libs</code>, then paste <code>com.fasterxml.jackson.core:jackson-databind:2.15.2</code> and finally press <code>Add library</code>. Notice, the <code>Person</code> class includes a package declaration. It's important, don't forget to add it too</em></p>\n<pre class=\"lang-java prettyprint-override\"><code>import com.fasterxml.jackson.databind.ObjectMapper;\nimport com.fasterxml.jackson.core.JsonProcessingException;\nimport lib.Person;\n\npublic class MyClass {\n   public static void main(String args[]) throws JsonProcessingException {\n      ObjectMapper mapper = new ObjectMapper();\n      String JSON = &quot;{\\&quot;id\\&quot;: 1, \\&quot;name\\&quot;: \\&quot;Sergey\\&quot;}&quot;;\n      Person me = mapper.readValue(JSON, Person.class);\n      System.out.println(me);\n    }\n}\n</code></pre>\n<ol start=\"0\">\n<li>\n<blockquote>\n<p>Do I need to include setters?</p>\n</blockquote>\n</li>\n</ol>\n<p>Yes, you do (assuming we discuss the default scenario as defined in your question). Watch out! The exception you're going to get in case you don't include setters is not going to be very informative</p>\n<pre class=\"lang-java prettyprint-override\"><code>package lib;\n\npublic class Person {\n    private int id;\n    private String name;\n    \n    public Person() {\n        System.out.println(&quot;Person's public no-args is called...&quot;);\n    }\n\n    @Override\n    public String toString() {\n       return String.format(&quot;Person[id=%d, name=%s]&quot;, id, name);\n    }\n}\n</code></pre>\n<pre><code>Person's public no-args is called...\n\nException in thread &quot;main&quot; com.fasterxml.jackson.databind.exc.UnrecognizedPropertyException: Unrecognized field &quot;id&quot; (class lib.Person), not marked as ignorable (0 known properties: ])\n at [Source: (String)&quot;{&quot;id&quot;: 1, &quot;name&quot;: &quot;Sergey&quot;}&quot;; line: 1, column: 9] (through reference chain: lib.Person[&quot;id&quot;])\n...\n</code></pre>\n<ol>\n<li>\n<blockquote>\n<p>Does a no-args have to be public?</p>\n</blockquote>\n</li>\n</ol>\n<p>No, it doesn't. You can make the setters <code>private</code> too</p>\n<pre class=\"lang-java prettyprint-override\"><code>package lib;\n\npublic class Person {\n    private int id;\n    private String name;\n    \n    private Person() {\n        System.out.println(&quot;Person's private no-args is called...&quot;);\n    }\n    \n    public void setId(int id) {\n        System.out.println(&quot;setId() is called...&quot;);\n        this.id = id;\n    }\n    \n    public void setName(String name) {\n        System.out.println(&quot;setName() is called...&quot;);\n        this.name = name;\n    }\n\n    @Override\n    public String toString() {\n       return String.format(&quot;Person[id=%d, name=%s]&quot;, id, name);\n    }\n}\n</code></pre>\n<pre><code>Person's private no-args is called...\nsetId() is called...\nsetName() is called...\nPerson[id=1, name=Sergey]\n</code></pre>\n<ol start=\"2\">\n<li>\n<blockquote>\n<p>Does a no-args have to be the only constructor available? What if there are an explicit no-args and an all-args, for example? What happens then?</p>\n</blockquote>\n</li>\n</ol>\n<p>Jackson wouldn't care about your other constructor. You can even make your no-args <code>private</code> thus nudging Jackson to call your <code>public</code> canonical – it couldn't care less</p>\n<pre class=\"lang-java prettyprint-override\"><code>package lib;\n\npublic class Person {\n    private int id;\n    private String name;\n    \n    private Person() {\n        System.out.println(&quot;Person's private no-args is called...&quot;);\n    }\n    \n    public Person(int id, String name) {\n        System.out.println(&quot;Person's public canonical is called...&quot;);\n        this.id = id;\n        this.name = name;\n    }\n    \n    public void setId(int id) {\n        System.out.println(&quot;setId() is called...&quot;);\n        this.id = id;\n    }\n    \n    public void setName(String name) {\n        System.out.println(&quot;setName() is called...&quot;);\n        this.name = name;\n    }\n\n    @Override\n    public String toString() {\n       return String.format(&quot;Person[id=%d, name=%s]&quot;, id, name);\n    }\n}\n</code></pre>\n<pre><code>Person's private no-args is called...\nsetId() is called...\nsetName() is called...\nPerson[id=1, name=Sergey]\n</code></pre>\n<ol start=\"3\">\n<li>\n<blockquote>\n<p>Can Jackson figure out what to do if there's no no-args? Will it take an all-args?</p>\n</blockquote>\n</li>\n</ol>\n<p>No, it won't</p>\n<pre class=\"lang-java prettyprint-override\"><code>package lib;\n\npublic class Person {\n    private int id;\n    private String name;\n    \n    public Person(int id, String name) {\n        System.out.println(&quot;Person's public canonical is called...&quot;);\n        this.id = id;\n        this.name = name;\n    }\n    \n    public void setId(int id) {\n        System.out.println(&quot;setId() is called...&quot;);\n        this.id = id;\n    }\n    \n    public void setName(String name) {\n        System.out.println(&quot;setName() is called...&quot;);\n        this.name = name;\n    }\n\n    @Override\n    public String toString() {\n       return String.format(&quot;Person[id=%d, name=%s]&quot;, id, name);\n    }\n}\n</code></pre>\n<pre><code>Exception in thread &quot;main&quot; com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Cannot construct instance of `lib.Person` (no Creators, like default constructor, exist): cannot deserialize from Object value (no delegate- or property-based Creator)\n at [Source: (String)&quot;{&quot;id&quot;: 1, &quot;name&quot;: &quot;Sergey&quot;}&quot;; line: 1, column: 2]\n</code></pre>\n<p>I'm going off on a tangent a little bit since the question is explicitly about Jackson's default behavior, but if you annotate your canonical constructor as <code>@JsonCreator</code> and manually map your constructor arguments with <code>@JsonProperty</code>, Jackson will finally condescend to use it</p>\n<pre class=\"lang-java prettyprint-override\"><code>package lib;\n\nimport com.fasterxml.jackson.annotation.JsonCreator;\nimport com.fasterxml.jackson.annotation.JsonProperty;\n\npublic class Person {\n    private int id;\n    private String name;\n    \n    @JsonCreator\n    public Person(@JsonProperty(&quot;id&quot;) int id, @JsonProperty(&quot;name&quot;) String name) {\n        System.out.println(&quot;Person's public canonical is called...&quot;);\n        this.id = id;\n        this.name = name;\n    }\n    \n    public void setId(int id) {\n        System.out.println(&quot;setId() is called...&quot;);\n        this.id = id;\n    }\n    \n    public void setName(String name) {\n        System.out.println(&quot;setName() is called...&quot;);\n        this.name = name;\n    }\n\n    @Override\n    public String toString() {\n       return String.format(&quot;Person[id=%d, name=%s]&quot;, id, name);\n    }\n}\n</code></pre>\n<pre><code>Person's public canonical is called...\nPerson[id=1, name=Sergey]\n</code></pre>\n<p>If you omit <code>@JsonProperty</code> annotations assuming Jackson will map the properties automatically (after all, the names and types match), you're going to have problems. Again, the error message is not going to help you at all</p>\n<pre class=\"lang-java prettyprint-override\"><code>package lib;\n\nimport com.fasterxml.jackson.annotation.JsonCreator;\n\npublic class Person {\n    private int id;\n    private String name;\n    \n    @JsonCreator\n    public Person(int id, String name) {\n        System.out.println(&quot;Person's public canonical is called...&quot;);\n        this.id = id;\n        this.name = name;\n    }\n    \n    public void setId(int id) {\n        System.out.println(&quot;setId() is called...&quot;);\n        this.id = id;\n    }\n    \n    public void setName(String name) {\n        System.out.println(&quot;setName() is called...&quot;);\n        this.name = name;\n    }\n\n    @Override\n    public String toString() {\n       return String.format(&quot;Person[id=%d, name=%s]&quot;, id, name);\n    }\n}\n</code></pre>\n<pre><code>Exception in thread &quot;main&quot; com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Invalid type definition for type `lib.Person`: Argument #0 of constructor [constructor for `lib.Person` (2 args), annotations: {interface com.fasterxml.jackson.annotation.JsonCreator=@com.fasterxml.jackson.annotation.JsonCreator(mode=DEFAULT)} has no property name (and is not Injectable): can not use as property-based Creator\n at [Source: (String)&quot;{&quot;id&quot;: 1, &quot;name&quot;: &quot;Sergey&quot;}&quot;; line: 1, column: 1]\n</code></pre>\n<p>As a way to avoid manual mapping with <code>@JsonProperty</code>, you can register the <code>ParameterNamesModule</code>. It will allow Jackson to perform the mapping automatically if JSON properties' names match those of class fields. Jackson 3.x supports <code>ParameterNamesModule</code> by default</p>\n<pre class=\"lang-java prettyprint-override\"><code>  ObjectMapper mapper = new ObjectMapper()\n                            .registerModule(new ParameterNamesModule());\n</code></pre>\n<ol start=\"4\">\n<li>\n<blockquote>\n<p>Would Jackson assemble an instance if some properties are not set by a constructor (assuming it would take a &quot;some-args&quot; constructor)? Would Jackson invoke available setters, or would it resort to reflexion?</p>\n</blockquote>\n</li>\n</ol>\n<p>As stated above, in a default scenario, Jackson is going to be happy with a no-args only. However, if you use the annotations mentioned in the previous item, Jackson will do exactly that: invoke a &quot;some-args&quot; constructor and then call setters to initialize the remaining fields</p>\n<pre class=\"lang-java prettyprint-override\"><code>package lib;\n\nimport com.fasterxml.jackson.annotation.JsonCreator;\nimport com.fasterxml.jackson.annotation.JsonProperty;\n\npublic class Person {\n    private int id;\n    private String name;\n    \n    @JsonCreator\n    public Person(@JsonProperty(&quot;name&quot;) String name) {\n        System.out.println(&quot;Person's public \\&quot;some-args\\&quot; is called...&quot;);\n        this.name = name;\n    }\n    \n    public void setId(int id) {\n        System.out.println(&quot;setId() is called...&quot;);\n        this.id = id;\n    }\n    \n    public void setName(String name) {\n        System.out.println(&quot;setName() is called...&quot;);\n        this.name = name;\n    }\n\n    @Override\n    public String toString() {\n       return String.format(&quot;Person[id=%d, name=%s]&quot;, id, name);\n    }\n}\n</code></pre>\n<pre><code>Person's public &quot;some-args&quot; is called...\nsetId() is called...\nPerson[id=1, name=Sergey]\n</code></pre>\n"}],"owner":{"account_id":10187542,"reputation":409,"user_id":20692967,"display_name":"Sergey Zolotarev"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":283,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76397929,"answer_count":1,"score":1,"last_activity_date":1694806535,"creation_date":1685735579,"question_id":76393135,"body_markdown":"***A quick note:** Yes, I read [this][1]. Unfortunately, t doesn&#39;t answer all the questions I have*\r\n\r\n**How does Jackson deserialization work by default&#185;?** What I so far found out is that Jackson looks for a no-args and then sets the fields with setters (or, if setters are absent, reflexion). I have a few questions in mind.\r\n\r\n 1. Does a no-args have to be `public`?\r\n```java\r\n// consider this\r\npublic class Person {\r\n    private int id;\r\n    private String name;\r\n    private Person() {}\r\n}\r\n```\r\n 2. Does a no-args have to be the only constructor available? What if there are an explicit no-args and an all-args, for example? What happens then?\r\n```java\r\n// consider this\r\npublic class Person {\r\n    private int id;\r\n    private String name;\r\n    public Person() {}\r\n    public Person(int id, String name) {\r\n        this.id = id;\r\n        this.name = name;\r\n    }\r\n}\r\n```\r\n 3. Can Jackson figure out what to do if there&#39;s no no-args? Will it take an all-args?\r\n```java\r\n// consider this\r\npublic class Person {\r\n    private int id;\r\n    private String name;\r\n    public Person(int id, String name) {\r\n        this.id = id;\r\n        this.name = name;\r\n    }\r\n}\r\n```\r\n 4. Would Jackson assemble an instance if some properties are not set by a constructor (assuming it would take a &quot;some-args&quot; constructor)? Would Jackson invoke available setters, or would it resort to reflexion?\r\n```java\r\n// consider this\r\npublic class Person {\r\n    private int id;\r\n    private String name;\r\n    public Person(String name) {\r\n        this.name = name;\r\n    }\r\n    public void setId(int id) {\r\n        this.id = id;\r\n    }\r\n}\r\n```\r\n\r\n&#185; That is, with no extra effort on behalf of a developer: annotations, custom deserializers, etc.\r\n\r\n  [1]: https://stackoverflow.com/questions/58556027/how-does-jackson-deserializer-work-by-default","title":"Jackson deserialization. How exactly does it work if you rely on defaults completely?","body":"<p><em><strong>A quick note:</strong> Yes, I read <a href=\"https://stackoverflow.com/questions/58556027/how-does-jackson-deserializer-work-by-default\">this</a>. Unfortunately, t doesn't answer all the questions I have</em></p>\n<p><strong>How does Jackson deserialization work by default¹?</strong> What I so far found out is that Jackson looks for a no-args and then sets the fields with setters (or, if setters are absent, reflexion). I have a few questions in mind.</p>\n<ol>\n<li>Does a no-args have to be <code>public</code>?</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>// consider this\npublic class Person {\n    private int id;\n    private String name;\n    private Person() {}\n}\n</code></pre>\n<ol start=\"2\">\n<li>Does a no-args have to be the only constructor available? What if there are an explicit no-args and an all-args, for example? What happens then?</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>// consider this\npublic class Person {\n    private int id;\n    private String name;\n    public Person() {}\n    public Person(int id, String name) {\n        this.id = id;\n        this.name = name;\n    }\n}\n</code></pre>\n<ol start=\"3\">\n<li>Can Jackson figure out what to do if there's no no-args? Will it take an all-args?</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>// consider this\npublic class Person {\n    private int id;\n    private String name;\n    public Person(int id, String name) {\n        this.id = id;\n        this.name = name;\n    }\n}\n</code></pre>\n<ol start=\"4\">\n<li>Would Jackson assemble an instance if some properties are not set by a constructor (assuming it would take a &quot;some-args&quot; constructor)? Would Jackson invoke available setters, or would it resort to reflexion?</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>// consider this\npublic class Person {\n    private int id;\n    private String name;\n    public Person(String name) {\n        this.name = name;\n    }\n    public void setId(int id) {\n        this.id = id;\n    }\n}\n</code></pre>\n<p>¹ That is, with no extra effort on behalf of a developer: annotations, custom deserializers, etc.</p>\n"},{"tags":["java","spring","spring-boot","datasource"],"answers":[{"comments":[{"owner":{"account_id":212417,"reputation":43624,"user_id":465223,"accept_rate":75,"display_name":"dunni"},"score":8,"creation_date":1425378098,"post_id":28822145,"comment_id":45928690,"body_markdown":"@Primary is not necessary, since the AutoConfiguration only creates a DataSource bean, when no other bean is defined.","body":"@Primary is not necessary, since the AutoConfiguration only creates a DataSource bean, when no other bean is defined."},{"owner":{"account_id":426173,"reputation":18141,"user_id":807231,"accept_rate":38,"display_name":"Marsellus Wallace"},"score":0,"creation_date":1426299692,"post_id":28822145,"comment_id":46329100,"body_markdown":"create() should probably be first","body":"create() should probably be first"},{"owner":{"account_id":5044372,"reputation":1961,"user_id":4050848,"display_name":"Kishore Guruswamy"},"score":0,"creation_date":1466102997,"post_id":28822145,"comment_id":63191267,"body_markdown":"Primary not required. @Bean enables Spring boot to register configuration. driver class name, url, user, pwd required","body":"Primary not required. @Bean enables Spring boot to register configuration. driver class name, url, user, pwd required"},{"owner":{"account_id":159364,"reputation":635,"user_id":378647,"accept_rate":67,"display_name":"Andres Felipe"},"score":0,"creation_date":1496159236,"post_id":28822145,"comment_id":75541469,"body_markdown":"As per the JavaDoc @Primary &quot;Indicates that a bean should be given preference when multiple candidates are qualified to autowire a single-valued dependency.&quot; https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/context/annotation/Primary.html","body":"As per the JavaDoc @Primary &quot;Indicates that a bean should be given preference when multiple candidates are qualified to autowire a single-valued dependency.&quot; <a href=\"https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/context/annotation/Primary.html\" rel=\"nofollow noreferrer\">docs.spring.io/spring/docs/current/javadoc-api/org/&hellip;</a>"},{"owner":{"account_id":5588556,"reputation":8451,"user_id":4428471,"accept_rate":46,"display_name":"zhuguowei"},"score":6,"creation_date":1498524051,"post_id":28822145,"comment_id":76522041,"body_markdown":"But how about set `spring.datasource.validation-query` and `spring.datasource.test-while-idle` and `spring.datasource.time-between-eviction-runs-millis`","body":"But how about set <code>spring.datasource.validation-query</code> and <code>spring.datasource.test-while-idle</code> and <code>spring.datasource.time-between-eviction-runs-millis</code>"},{"owner":{"account_id":1430910,"reputation":2502,"user_id":1353361,"accept_rate":67,"display_name":"Vijay Shegokar"},"score":0,"creation_date":1502174139,"post_id":28822145,"comment_id":78081081,"body_markdown":"I also have the same question - How to set &quot;spring.datasource.validation-query&quot; in multi tenancy project where we are creating DataSource at runtime using DataSourceBuilder.create().","body":"I also have the same question - How to set &quot;spring.datasource.validation-query&quot; in multi tenancy project where we are creating DataSource at runtime using DataSourceBuilder.create()."},{"owner":{"account_id":93208,"reputation":6939,"user_id":255139,"accept_rate":44,"display_name":"Kalpesh Soni"},"score":0,"creation_date":1522269980,"post_id":28822145,"comment_id":86095414,"body_markdown":"how to do this same thing with different datasources for junit/local server/dev server","body":"how to do this same thing with different datasources for junit/local server/dev server"},{"owner":{"account_id":2725736,"reputation":1466,"user_id":2350854,"accept_rate":40,"display_name":"dantebarba"},"score":0,"creation_date":1537805548,"post_id":28822145,"comment_id":91908171,"body_markdown":"Can I combine `@ConfigurationProperties` annotation with programmatic settings on the DataSourceBuilder?. I want to configure test-on-borrow and eviction runs, but there is no option in the builder to set those values.","body":"Can I combine <code>@ConfigurationProperties</code> annotation with programmatic settings on the DataSourceBuilder?. I want to configure test-on-borrow and eviction runs, but there is no option in the builder to set those values."}],"tags":[],"owner":{"account_id":2537085,"reputation":6205,"user_id":2203890,"display_name":"Edd&#250; Mel&#233;ndez"},"comment_count":8,"down_vote_count":0,"up_vote_count":94,"is_accepted":true,"score":94,"last_activity_date":1447062344,"creation_date":1425343674,"answer_id":28822145,"question_id":28821521,"body_markdown":"You can use `DataSourceBuilder` if you are using `jdbc` starter. Also, in order to override the default autoconfiguration bean you need to mark your bean as a `@Primary`\r\n\r\nIn my case I have properties starting with `datasource.postgres` prefix.\r\n\r\nE.g\r\n\r\n    @ConfigurationProperties(prefix = &quot;datasource.postgres&quot;)\r\n    @Bean\r\n    @Primary\r\n    public DataSource dataSource() {\r\n        return DataSourceBuilder\r\n            .create()\r\n            .build();\r\n    }\r\n\r\nIf it is not feasible for you, then you can use\r\n\r\n    @Bean\r\n    @Primary\r\n    public DataSource dataSource() {\r\n        return DataSourceBuilder\r\n            .create()\r\n            .username(&quot;&quot;)\r\n            .password(&quot;&quot;)\r\n            .url(&quot;&quot;)\r\n            .driverClassName(&quot;&quot;)\r\n            .build();\r\n    }","title":"Configure DataSource programmatically in Spring Boot","body":"<p>You can use <code>DataSourceBuilder</code> if you are using <code>jdbc</code> starter. Also, in order to override the default autoconfiguration bean you need to mark your bean as a <code>@Primary</code></p>\n\n<p>In my case I have properties starting with <code>datasource.postgres</code> prefix.</p>\n\n<p>E.g</p>\n\n<pre><code>@ConfigurationProperties(prefix = \"datasource.postgres\")\n@Bean\n@Primary\npublic DataSource dataSource() {\n    return DataSourceBuilder\n        .create()\n        .build();\n}\n</code></pre>\n\n<p>If it is not feasible for you, then you can use</p>\n\n<pre><code>@Bean\n@Primary\npublic DataSource dataSource() {\n    return DataSourceBuilder\n        .create()\n        .username(\"\")\n        .password(\"\")\n        .url(\"\")\n        .driverClassName(\"\")\n        .build();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2147392,"reputation":5406,"user_id":2308204,"accept_rate":83,"display_name":"Rodrigo Villalba Zayas"},"comment_count":0,"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1444332259,"creation_date":1444332259,"answer_id":33024306,"question_id":28821521,"body_markdown":"All you need to do is annotate a method that returns a DataSource with @Bean.\r\nA complete working example follows.\r\n    \r\n    @Bean\r\n\tpublic DataSource dataSource() {\r\n\t\tDataSourceBuilder dataSourceBuilder = DataSourceBuilder.create();\r\n\t        dataSourceBuilder.url(dbUrl);\r\n\t        dataSourceBuilder.username(username);\r\n\t        dataSourceBuilder.password(password);\r\n\t        return dataSourceBuilder.build();   \r\n\t}","title":"Configure DataSource programmatically in Spring Boot","body":"<p>All you need to do is annotate a method that returns a DataSource with @Bean.\nA complete working example follows.</p>\n\n<pre><code>@Bean\npublic DataSource dataSource() {\n    DataSourceBuilder dataSourceBuilder = DataSourceBuilder.create();\n        dataSourceBuilder.url(dbUrl);\n        dataSourceBuilder.username(username);\n        dataSourceBuilder.password(password);\n        return dataSourceBuilder.build();   \n}\n</code></pre>\n"},{"comments":[{"owner":{"display_name":"user41871"},"score":3,"creation_date":1505011497,"post_id":38388920,"comment_id":79235985,"body_markdown":"This answer helps because it shows how to use the default spring.datasource properties to define the DataSource. Note that if you want to override only the password, say, then you would need to remove the password definition from application.properties (or application.yml) and set that one property in the code.","body":"This answer helps because it shows how to use the default spring.datasource properties to define the DataSource. Note that if you want to override only the password, say, then you would need to remove the password definition from application.properties (or application.yml) and set that one property in the code."},{"owner":{"account_id":1459347,"reputation":119,"user_id":1374080,"accept_rate":57,"display_name":"Fadhlie Ikram"},"score":1,"creation_date":1526554084,"post_id":38388920,"comment_id":87794510,"body_markdown":"@Willie Wheeler Are you sure that would work? Because what I understand the above code will return an entirely new datasource bean. Meaning the spring.datasource properties wont take effect, and will be replaced by the new bean.","body":"@Willie Wheeler Are you sure that would work? Because what I understand the above code will return an entirely new datasource bean. Meaning the spring.datasource properties wont take effect, and will be replaced by the new bean."},{"owner":{"display_name":"user41871"},"score":1,"creation_date":1526628254,"post_id":38388920,"comment_id":87827040,"body_markdown":"Yeah, I&#39;ve used this approach to externalize passwords into Vault.","body":"Yeah, I&#39;ve used this approach to externalize passwords into Vault."},{"owner":{"account_id":1459347,"reputation":119,"user_id":1374080,"accept_rate":57,"display_name":"Fadhlie Ikram"},"score":1,"creation_date":1526630105,"post_id":38388920,"comment_id":87828123,"body_markdown":"@WillieWheeler You are right. I just tried and it works.","body":"@WillieWheeler You are right. I just tried and it works."},{"owner":{"display_name":"user41871"},"score":0,"creation_date":1526863558,"post_id":38388920,"comment_id":87895629,"body_markdown":"Good to hear @FadhlieIkram. Thanks for checking.","body":"Good to hear @FadhlieIkram. Thanks for checking."}],"tags":[],"owner":{"account_id":7918598,"reputation":271,"user_id":5980294,"display_name":"Alfer Wei"},"comment_count":5,"down_vote_count":0,"up_vote_count":26,"is_accepted":false,"score":26,"last_activity_date":1532724175,"creation_date":1468562758,"answer_id":38388920,"question_id":28821521,"body_markdown":"My project of spring-boot has run normally according to your assistance.  The yaml datasource configuration is:\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n    spring:\r\n      # (DataSourceAutoConfiguration &amp; DataSourceProperties)\r\n      datasource:\r\n        name: ds-h2\r\n        url: jdbc:h2:D:/work/workspace/fdata;DATABASE_TO_UPPER=false\r\n        username: h2\r\n        password: h2\r\n        driver-class: org.h2.Driver\r\n\r\n**Custom DataSource**\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    @Configuration\r\n    @Component\r\n    public class DataSourceBean {\r\n    \r\n        @ConfigurationProperties(prefix = &quot;spring.datasource&quot;)\r\n        @Bean\r\n        @Primary\r\n        public DataSource getDataSource() {\r\n            return DataSourceBuilder\r\n                    .create()\r\n    //                .url(&quot;jdbc:h2:D:/work/workspace/fork/gs-serving-web-content/initial/data/fdata;DATABASE_TO_UPPER=false&quot;)\r\n    //                .username(&quot;h2&quot;)\r\n    //                .password(&quot;h2&quot;)\r\n    //                .driverClassName(&quot;org.h2.Driver&quot;)\r\n                    .build();\r\n        }\r\n    }\r\n\r\n","title":"Configure DataSource programmatically in Spring Boot","body":"<p>My project of spring-boot has run normally according to your assistance.  The yaml datasource configuration is:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>spring:\n  # (DataSourceAutoConfiguration &amp; DataSourceProperties)\n  datasource:\n    name: ds-h2\n    url: jdbc:h2:D:/work/workspace/fdata;DATABASE_TO_UPPER=false\n    username: h2\n    password: h2\n    driver-class: org.h2.Driver\n</code></pre>\n\n<p><strong>Custom DataSource</strong></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@Component\npublic class DataSourceBean {\n\n    @ConfigurationProperties(prefix = \"spring.datasource\")\n    @Bean\n    @Primary\n    public DataSource getDataSource() {\n        return DataSourceBuilder\n                .create()\n//                .url(\"jdbc:h2:D:/work/workspace/fork/gs-serving-web-content/initial/data/fdata;DATABASE_TO_UPPER=false\")\n//                .username(\"h2\")\n//                .password(\"h2\")\n//                .driverClassName(\"org.h2.Driver\")\n                .build();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5588556,"reputation":8451,"user_id":4428471,"accept_rate":46,"display_name":"zhuguowei"},"comment_count":0,"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1469331814,"creation_date":1469331814,"answer_id":38548534,"question_id":28821521,"body_markdown":"If you want more datesource configs e.g.\r\n\r\n    spring.datasource.test-while-idle=true \r\n    spring.datasource.time-between-eviction-runs-millis=30000\r\n    spring.datasource.validation-query=select 1\r\n\r\nyou could use below code\r\n\r\n    @Bean\r\n    public DataSource dataSource() {\r\n        DataSource dataSource = new DataSource(); // org.apache.tomcat.jdbc.pool.DataSource;\r\n        dataSource.setDriverClassName(driverClassName);\r\n        dataSource.setUrl(url);\r\n        dataSource.setUsername(username);\r\n        dataSource.setPassword(password);\r\n        dataSource.setTestWhileIdle(testWhileIdle);     \r\n        dataSource.setTimeBetweenEvictionRunsMillis(timeBetweenEvictionRunsMills);\r\n        dataSource.setValidationQuery(validationQuery);\r\n        return dataSource;\r\n    }\r\n\r\nrefer: https://stackoverflow.com/questions/29729909/spring-boot-jdbc-connection","title":"Configure DataSource programmatically in Spring Boot","body":"<p>If you want more datesource configs e.g.</p>\n\n<pre><code>spring.datasource.test-while-idle=true \nspring.datasource.time-between-eviction-runs-millis=30000\nspring.datasource.validation-query=select 1\n</code></pre>\n\n<p>you could use below code</p>\n\n<pre><code>@Bean\npublic DataSource dataSource() {\n    DataSource dataSource = new DataSource(); // org.apache.tomcat.jdbc.pool.DataSource;\n    dataSource.setDriverClassName(driverClassName);\n    dataSource.setUrl(url);\n    dataSource.setUsername(username);\n    dataSource.setPassword(password);\n    dataSource.setTestWhileIdle(testWhileIdle);     \n    dataSource.setTimeBetweenEvictionRunsMillis(timeBetweenEvictionRunsMills);\n    dataSource.setValidationQuery(validationQuery);\n    return dataSource;\n}\n</code></pre>\n\n<p>refer: <a href=\"https://stackoverflow.com/questions/29729909/spring-boot-jdbc-connection\">Spring boot jdbc Connection</a></p>\n"},{"comments":[{"owner":{"account_id":143496,"reputation":1912,"user_id":351861,"display_name":"specializt"},"score":1,"creation_date":1539875579,"post_id":49943244,"comment_id":92667921,"body_markdown":"`NOTE: Within special class loading environments such as OSGi, this class is effectively superseded by SimpleDriverDataSource due to general class loading issues with the JDBC DriverManager that be resolved through direct Driver usage (which is exactly what SimpleDriverDataSource does).`","body":"<code>NOTE: Within special class loading environments such as OSGi, this class is effectively superseded by SimpleDriverDataSource due to general class loading issues with the JDBC DriverManager that be resolved through direct Driver usage (which is exactly what SimpleDriverDataSource does).</code>"}],"tags":[],"owner":{"account_id":9546393,"reputation":1184,"user_id":7092293,"display_name":"MMKarami"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1524232381,"creation_date":1524232381,"answer_id":49943244,"question_id":28821521,"body_markdown":"As an alternative way you can use DriverManagerDataSource such as:\r\n\r\n    public DataSource getDataSource(DBInfo db) {\r\n    \t\t\r\n    \tDriverManagerDataSource dataSource = new DriverManagerDataSource();\r\n    \r\n    \tdataSource.setUsername(db.getUsername());\r\n    \tdataSource.setPassword(db.getPassword());\r\n    \tdataSource.setUrl(db.getUrl());\r\n    \tdataSource.setDriverClassName(db.getDriverClassName());\r\n    \r\n    \treturn dataSource;\r\n    }\r\n\r\nHowever be careful about using it, because:\r\n\r\n&gt; NOTE: This class is not an actual connection pool; it does not\r\n&gt; actually pool Connections. It just serves as simple replacement for a\r\n&gt; full-blown connection pool, implementing the same standard interface,\r\n&gt; but creating new Connections on every call. [reference][1]\r\n\r\n\r\n  [1]: https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/jdbc/datasource/DriverManagerDataSource.html","title":"Configure DataSource programmatically in Spring Boot","body":"<p>As an alternative way you can use DriverManagerDataSource such as:</p>\n\n<pre><code>public DataSource getDataSource(DBInfo db) {\n\n    DriverManagerDataSource dataSource = new DriverManagerDataSource();\n\n    dataSource.setUsername(db.getUsername());\n    dataSource.setPassword(db.getPassword());\n    dataSource.setUrl(db.getUrl());\n    dataSource.setDriverClassName(db.getDriverClassName());\n\n    return dataSource;\n}\n</code></pre>\n\n<p>However be careful about using it, because:</p>\n\n<blockquote>\n  <p>NOTE: This class is not an actual connection pool; it does not\n  actually pool Connections. It just serves as simple replacement for a\n  full-blown connection pool, implementing the same standard interface,\n  but creating new Connections on every call. <a href=\"https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/jdbc/datasource/DriverManagerDataSource.html\" rel=\"nofollow noreferrer\">reference</a></p>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":3173093,"reputation":570,"user_id":2681591,"display_name":"Nis"},"score":0,"creation_date":1551372028,"post_id":52390098,"comment_id":96625237,"body_markdown":"I also had to declare the DataSource bean as @Primary.","body":"I also had to declare the DataSource bean as @Primary."},{"owner":{"account_id":1448091,"reputation":699,"user_id":1365917,"display_name":"Davide Martorana"},"score":3,"creation_date":1597863456,"post_id":52390098,"comment_id":112275097,"body_markdown":"There is a simpler way: in the application properties (i.e. applicaiotion.yml) rename:\n`spring.datasource.url` to `spring.datasource.jdbc-url`.\nThis should do the trick!!! (It did in my case - SpringBoot v2.3.2)","body":"There is a simpler way: in the application properties (i.e. applicaiotion.yml) rename: <code>spring.datasource.url</code> to <code>spring.datasource.jdbc-url</code>. This should do the trick!!! (It did in my case - SpringBoot v2.3.2)"},{"owner":{"account_id":1034691,"reputation":463,"user_id":1042297,"display_name":"kodstark"},"score":0,"creation_date":1691063046,"post_id":52390098,"comment_id":135442462,"body_markdown":"@DavideMartorana I thought that this trick but I&#39;m assuming it won&#39;t be integrated with classes lik HikariConfig (so it needs code change to update Hikari config)","body":"@DavideMartorana I thought that this trick but I&#39;m assuming it won&#39;t be integrated with classes lik HikariConfig (so it needs code change to update Hikari config)"}],"tags":[],"owner":{"account_id":543631,"reputation":10094,"user_id":912829,"accept_rate":53,"display_name":"ACV"},"comment_count":3,"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1551373536,"creation_date":1537284864,"answer_id":52390098,"question_id":28821521,"body_markdown":"If you&#39;re using latest spring boot (with jdbc starter and Hikari) you&#39;ll run into:\r\n`java.lang.IllegalArgumentException: jdbcUrl is required with driverClassName.`\r\nTo solve this:\r\n\r\n1. In your application.properties:\r\n\r\n`datasource.oracle.url=youroracleurl`\r\n\r\n2. In your application define as bean (**`@Primary` is mandatory!**):\r\n\r\n```\r\n@Bean\r\n@Primary\r\n@ConfigurationProperties(&quot;datasource.oracle&quot;)\r\npublic DataSourceProperties getDatasourceProperties() {\r\n    return new DataSourceProperties();\r\n}\r\n\r\n@Bean\r\n@ConfigurationProperties(&quot;datasource.oracle&quot;)\r\npublic DataSource getDatasource() {\r\n    return getDatasourceProperties().initializeDataSourceBuilder()\r\n           .username(&quot;username&quot;)\r\n           .password(&quot;password&quot;)\r\n           .build();\r\n}\r\n```\r\n","title":"Configure DataSource programmatically in Spring Boot","body":"<p>If you're using latest spring boot (with jdbc starter and Hikari) you'll run into:\n<code>java.lang.IllegalArgumentException: jdbcUrl is required with driverClassName.</code>\nTo solve this:</p>\n\n<ol>\n<li>In your application.properties:</li>\n</ol>\n\n<p><code>datasource.oracle.url=youroracleurl</code></p>\n\n<ol start=\"2\">\n<li>In your application define as bean (<strong><code>@Primary</code> is mandatory!</strong>):</li>\n</ol>\n\n<pre><code>@Bean\n@Primary\n@ConfigurationProperties(\"datasource.oracle\")\npublic DataSourceProperties getDatasourceProperties() {\n    return new DataSourceProperties();\n}\n\n@Bean\n@ConfigurationProperties(\"datasource.oracle\")\npublic DataSource getDatasource() {\n    return getDatasourceProperties().initializeDataSourceBuilder()\n           .username(\"username\")\n           .password(\"password\")\n           .build();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8072907,"reputation":1250,"user_id":6085034,"display_name":"Christian Altamirano Ayala"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1568329524,"creation_date":1568329524,"answer_id":57915467,"question_id":28821521,"body_markdown":"for springboot 2.1.7 working with url seems not to work. change with jdbcUrl instead. \r\n\r\nIn properties: \r\n   \r\n\r\n    security:\r\n          datasource:\r\n            jdbcUrl: jdbc:mysql://ip:3306/security\r\n            username: user\r\n            password: pass\r\n\r\nIn java:\r\n\r\n    @ConfigurationProperties(prefix = &quot;security.datasource&quot;)\r\n    @Bean(&quot;dataSource&quot;)\r\n    @Primary\r\n    public DataSource dataSource(){\r\n    \r\n        return DataSourceBuilder\r\n                .create()\r\n                .build();\r\n    }","title":"Configure DataSource programmatically in Spring Boot","body":"<p>for springboot 2.1.7 working with url seems not to work. change with jdbcUrl instead. </p>\n\n<p>In properties: </p>\n\n<pre><code>security:\n      datasource:\n        jdbcUrl: jdbc:mysql://ip:3306/security\n        username: user\n        password: pass\n</code></pre>\n\n<p>In java:</p>\n\n<pre><code>@ConfigurationProperties(prefix = \"security.datasource\")\n@Bean(\"dataSource\")\n@Primary\npublic DataSource dataSource(){\n\n    return DataSourceBuilder\n            .create()\n            .build();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4219149,"reputation":537,"user_id":3454339,"display_name":"Vladimir"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1574422437,"creation_date":1574422437,"answer_id":58993441,"question_id":28821521,"body_markdown":"I customized *Tomcat DataSource* in *Spring-Boot 2*.\r\n\r\nDependency versions:\r\n\r\n - *spring-boot: 2.1.9.RELEASE*\r\n - *tomcat-jdbc: 9.0.20*\r\n\r\nMay be it will be useful for somebody.\r\n\r\n**application.yml**\r\n\r\n\tspring:\r\n\t\tdatasource:\r\n\t\t\tdriver-class-name: org.postgresql.Driver\r\n\t\t\ttype: org.apache.tomcat.jdbc.pool.DataSource\r\n\t\t\turl: jdbc:postgresql://${spring.datasource.database.host}:${spring.datasource.database.port}/${spring.datasource.database.name}\r\n\t\t\tdatabase:\r\n\t\t\t\thost: localhost\r\n\t\t\t\tport: 5432\r\n\t\t\t\tname: rostelecom\r\n\t\t\tusername: postgres\r\n\t\t\tpassword: postgres\r\n\t\t\ttomcat:\r\n\t\t\t\tvalidation-query: SELECT 1\r\n\t\t\t\tvalidation-interval: 30000           \r\n\t\t\t\ttest-on-borrow: true\r\n\t\t\t\tremove-abandoned: true\r\n\t\t\t\tremove-abandoned-timeout: 480\r\n\t\t\t\ttest-while-idle: true\r\n\t\t\t\ttime-between-eviction-runs-millis: 60000\r\n\t\t\t\tlog-validation-errors: true\r\n\t\t\t\tlog-abandoned: true\r\n\r\n**Java**\r\n\r\n```java\r\n@Bean\r\n@Primary\r\n@ConfigurationProperties(&quot;spring.datasource.tomcat&quot;)\r\npublic PoolConfiguration postgresDataSourceProperties() {\r\n    return new PoolProperties();\r\n}\r\n\r\n@Bean(name = &quot;primaryDataSource&quot;)\r\n@Primary\r\n@Qualifier(&quot;primaryDataSource&quot;)\r\n@ConfigurationProperties(prefix = &quot;spring.datasource&quot;)\r\npublic DataSource primaryDataSource() {\r\n    PoolConfiguration properties = postgresDataSourceProperties();\r\n    return new DataSource(properties);\r\n}\r\n```\r\n\r\nThe main reason why it had been done is several DataSources in application and one of them it is necessary to mark as a *@Primary*.","title":"Configure DataSource programmatically in Spring Boot","body":"<p>I customized <em>Tomcat DataSource</em> in <em>Spring-Boot 2</em>.</p>\n\n<p>Dependency versions:</p>\n\n<ul>\n<li><em>spring-boot: 2.1.9.RELEASE</em></li>\n<li><em>tomcat-jdbc: 9.0.20</em></li>\n</ul>\n\n<p>May be it will be useful for somebody.</p>\n\n<p><strong>application.yml</strong></p>\n\n<pre><code>spring:\n    datasource:\n        driver-class-name: org.postgresql.Driver\n        type: org.apache.tomcat.jdbc.pool.DataSource\n        url: jdbc:postgresql://${spring.datasource.database.host}:${spring.datasource.database.port}/${spring.datasource.database.name}\n        database:\n            host: localhost\n            port: 5432\n            name: rostelecom\n        username: postgres\n        password: postgres\n        tomcat:\n            validation-query: SELECT 1\n            validation-interval: 30000           \n            test-on-borrow: true\n            remove-abandoned: true\n            remove-abandoned-timeout: 480\n            test-while-idle: true\n            time-between-eviction-runs-millis: 60000\n            log-validation-errors: true\n            log-abandoned: true\n</code></pre>\n\n<p><strong>Java</strong></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\n@Primary\n@ConfigurationProperties(\"spring.datasource.tomcat\")\npublic PoolConfiguration postgresDataSourceProperties() {\n    return new PoolProperties();\n}\n\n@Bean(name = \"primaryDataSource\")\n@Primary\n@Qualifier(\"primaryDataSource\")\n@ConfigurationProperties(prefix = \"spring.datasource\")\npublic DataSource primaryDataSource() {\n    PoolConfiguration properties = postgresDataSourceProperties();\n    return new DataSource(properties);\n}\n</code></pre>\n\n<p>The main reason why it had been done is several DataSources in application and one of them it is necessary to mark as a <em>@Primary</em>.</p>\n"}],"owner":{"account_id":426173,"reputation":18141,"user_id":807231,"accept_rate":38,"display_name":"Marsellus Wallace"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":247682,"favorite_count":0,"down_vote_count":0,"up_vote_count":91,"accepted_answer_id":28822145,"answer_count":8,"score":91,"last_activity_date":1694806523,"creation_date":1425339740,"question_id":28821521,"body_markdown":"With Spring Boot I can instantiate a `JdbcTemplate` with the following:\r\n\r\nCode:\r\n\r\n    @Autowired\r\n    private JdbcTemplate jdbcTemplate;\r\n\r\nProperties:\r\n\r\n    spring.datasource.url=jdbc:postgresql://my_url:my_port/my_other_stuff\r\n    spring.datasource.username=my_user_name\r\n    spring.datasource.password=my_password\r\n    spring.datasource.driver-class-name=org.postgresql.Driver\r\n\r\nThis create a DataSource of class: `org.apache.tomcat.jdbc.pool.DataSource`\r\n\r\nHow do I set the DataSource username/password programmatically? \r\n\r\nWe have a policy not to store credentials in plain text and I have to use a specific credential provider where I work.","title":"Configure DataSource programmatically in Spring Boot","body":"<p>With Spring Boot I can instantiate a <code>JdbcTemplate</code> with the following:</p>\n\n<p>Code:</p>\n\n<pre><code>@Autowired\nprivate JdbcTemplate jdbcTemplate;\n</code></pre>\n\n<p>Properties:</p>\n\n<pre><code>spring.datasource.url=jdbc:postgresql://my_url:my_port/my_other_stuff\nspring.datasource.username=my_user_name\nspring.datasource.password=my_password\nspring.datasource.driver-class-name=org.postgresql.Driver\n</code></pre>\n\n<p>This create a DataSource of class: <code>org.apache.tomcat.jdbc.pool.DataSource</code></p>\n\n<p>How do I set the DataSource username/password programmatically? </p>\n\n<p>We have a policy not to store credentials in plain text and I have to use a specific credential provider where I work.</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":39846,"reputation":991173,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1694800827,"post_id":77114383,"comment_id":135943743,"body_markdown":"&quot;when the user closes the app&quot; -- what is your specific definition of &quot;closes the app&quot;? &quot;but it seems like the app does not wait for the thread to finish and terminates it&quot; -- what is causing this method to be executed? How are you determining what this thread is or is not doing?","body":"&quot;when the user closes the app&quot; -- what is your specific definition of &quot;closes the app&quot;? &quot;but it seems like the app does not wait for the thread to finish and terminates it&quot; -- what is causing this method to be executed? How are you determining what this thread is or is not doing?"}],"answers":[{"tags":[],"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1694806452,"creation_date":1694806452,"answer_id":77114950,"question_id":77114383,"body_markdown":"You can&#39;t.  Force stopping or swiping away from the task switcher kill the process immediately.  That means all threads end exactly where they are.  There is no chance to process it.  It&#39;s like alt-ctrl-delete on windows.  Both are abnormal terminations.\r\n\r\nAlso, onDestroy of MainActivity would be wrong anyway.  There can be more than one instance of MainActivity and onDestroy could be called on one of them.  To see this, just rotate the phone.  And just because your activity is destroyed does not mean the app, or any of its threads, are terminated.  It just means the OS is no longer keeping an instance of your activity in memory.  It regularly cleans out backgrounded activities like that.\r\n\r\nAlso, the idea of being told when an app is terminated is kind of broken anyway.  Imaging the phone&#39;s battery is removed.  Your app would be immediately terminated, because the phone itself is no longer running.  There really is no way to detect when that happened.  The only way I could really think to approach it would be to constantly write the current time to disk.  Then the next time you launch the app, you know the time it previously stopped based on the last time that successfully wrote.","title":"How to make a thread finish its job when i close the app","body":"<p>You can't.  Force stopping or swiping away from the task switcher kill the process immediately.  That means all threads end exactly where they are.  There is no chance to process it.  It's like alt-ctrl-delete on windows.  Both are abnormal terminations.</p>\n<p>Also, onDestroy of MainActivity would be wrong anyway.  There can be more than one instance of MainActivity and onDestroy could be called on one of them.  To see this, just rotate the phone.  And just because your activity is destroyed does not mean the app, or any of its threads, are terminated.  It just means the OS is no longer keeping an instance of your activity in memory.  It regularly cleans out backgrounded activities like that.</p>\n<p>Also, the idea of being told when an app is terminated is kind of broken anyway.  Imaging the phone's battery is removed.  Your app would be immediately terminated, because the phone itself is no longer running.  There really is no way to detect when that happened.  The only way I could really think to approach it would be to constantly write the current time to disk.  Then the next time you launch the app, you know the time it previously stopped based on the last time that successfully wrote.</p>\n"}],"owner":{"account_id":15010715,"reputation":33,"user_id":11306618,"display_name":"pauliee"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77114950,"answer_count":1,"score":0,"last_activity_date":1694806452,"creation_date":1694799322,"question_id":77114383,"body_markdown":"In my Android app, I need to update the database with the timestamp indicating when the user closes the app. I am using a separate thread to achieve this but it seems like the app does not wait for the thread to finish and terminates it.\r\n```\r\n    private void endSession() {\r\n        try {\r\n            long endTime = System.currentTimeMillis();\r\n            final CountDownLatch latch = new CountDownLatch(1);\r\n\r\n            AppDatabase db = Room.databaseBuilder(getApplicationContext(), AppDatabase.class, &quot;circles&quot;).build();\r\n            SessionDAO userSessionDao = db.sessionDAO();\r\n            new Thread(() -&gt; {\r\n                userSessionDao.updateSessionEndTime(endTime);\r\n                latch.countDown();\r\n            }).start();\r\n            try {\r\n                latch.await();\r\n            } catch (InterruptedException e) {\r\n                e.printStackTrace();\r\n            }\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n            Log.d(&quot;MyTag&quot;, &quot;Session end failed: &quot; + e.getMessage());\r\n        }\r\n    }\r\n   ```\r\nIn my code above you can see that i used the method CountDownLatch but it did not work.\r\n\r\nEDIT.  \r\nI am calling the endSession() from my onDestroy() of the MainActivity\r\n```\r\n@Override\r\n    protected void onDestroy() {\r\n        super.onDestroy();\r\n        endSession();\r\n    }\r\n```\r\nMy definition of &quot;closing the app&quot; is opening my devices app switcher to swipe and close the app or pressing &quot;Stop &#39;app&#39;&quot; from the android studio.  \r\nSince this method is run on my onDestroy() i had to close the app to test it and noticed that the database was not updated (i tested the function endSession() separately and it worked normally on a button click listener).","title":"How to make a thread finish its job when i close the app","body":"<p>In my Android app, I need to update the database with the timestamp indicating when the user closes the app. I am using a separate thread to achieve this but it seems like the app does not wait for the thread to finish and terminates it.</p>\n<pre><code>    private void endSession() {\n        try {\n            long endTime = System.currentTimeMillis();\n            final CountDownLatch latch = new CountDownLatch(1);\n\n            AppDatabase db = Room.databaseBuilder(getApplicationContext(), AppDatabase.class, &quot;circles&quot;).build();\n            SessionDAO userSessionDao = db.sessionDAO();\n            new Thread(() -&gt; {\n                userSessionDao.updateSessionEndTime(endTime);\n                latch.countDown();\n            }).start();\n            try {\n                latch.await();\n            } catch (InterruptedException e) {\n                e.printStackTrace();\n            }\n        } catch (Exception e) {\n            e.printStackTrace();\n            Log.d(&quot;MyTag&quot;, &quot;Session end failed: &quot; + e.getMessage());\n        }\n    }\n</code></pre>\n<p>In my code above you can see that i used the method CountDownLatch but it did not work.</p>\n<p>EDIT.<br />\nI am calling the endSession() from my onDestroy() of the MainActivity</p>\n<pre><code>@Override\n    protected void onDestroy() {\n        super.onDestroy();\n        endSession();\n    }\n</code></pre>\n<p>My definition of &quot;closing the app&quot; is opening my devices app switcher to swipe and close the app or pressing &quot;Stop 'app'&quot; from the android studio.<br />\nSince this method is run on my onDestroy() i had to close the app to test it and noticed that the database was not updated (i tested the function endSession() separately and it worked normally on a button click listener).</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":1,"creation_date":1694806073,"post_id":77114914,"comment_id":135944507,"body_markdown":"Please [edit] the post and format the code and error properly.","body":"Please <a href=\"https://stackoverflow.com/posts/77114914/edit\">edit</a> the post and format the code and error properly."},{"owner":{"account_id":27500938,"reputation":1,"user_id":20984669,"display_name":"Hamza Bousalih"},"score":0,"creation_date":1694806268,"post_id":77114914,"comment_id":135944544,"body_markdown":"What about know","body":"What about know"},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":1,"creation_date":1694806647,"post_id":77114914,"comment_id":135944610,"body_markdown":"Since I do not know which line `Entity.java:55` is, I am going to guess and say that `this.fields` is an `ImmutableList`. Hence the exception.","body":"Since I do not know which line <code>Entity.java:55</code> is, I am going to guess and say that <code>this.fields</code> is an <code>ImmutableList</code>. Hence the exception."},{"owner":{"account_id":27500938,"reputation":1,"user_id":20984669,"display_name":"Hamza Bousalih"},"score":0,"creation_date":1694806793,"post_id":77114914,"comment_id":135944632,"body_markdown":"Yeah the line is `this.fields.add(field)`","body":"Yeah the line is <code>this.fields.add(field)</code>"},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1694806964,"post_id":77114914,"comment_id":135944667,"body_markdown":"Then `this.fields` is an `ImmutableList`.","body":"Then <code>this.fields</code> is an <code>ImmutableList</code>."},{"owner":{"account_id":27500938,"reputation":1,"user_id":20984669,"display_name":"Hamza Bousalih"},"score":0,"creation_date":1694808123,"post_id":77114914,"comment_id":135944852,"body_markdown":"So how can i add the field to the list","body":"So how can i add the field to the list"},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1694809481,"post_id":77114914,"comment_id":135945040,"body_markdown":"Don&#39;t use an `ImmutableList`.","body":"Don&#39;t use an <code>ImmutableList</code>."},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1694823015,"post_id":77114914,"comment_id":135946384,"body_markdown":"@Hamza You can&#39;t. It&#39;s immutable. You can make a new list and assign that to `this.fields`. But more likely whatever is making `this.fields` be an immutable field should be changed so that it no longer is. Without more code we can&#39;t really help you here.","body":"@Hamza You can&#39;t. It&#39;s immutable. You can make a new list and assign that to <code>this.fields</code>. But more likely whatever is making <code>this.fields</code> be an immutable field should be changed so that it no longer is. Without more code we can&#39;t really help you here."},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1694824159,"post_id":77114914,"comment_id":135946449,"body_markdown":"Please include the code that sets `this.fields`","body":"Please include the code that sets <code>this.fields</code>"},{"owner":{"account_id":27500938,"reputation":1,"user_id":20984669,"display_name":"Hamza Bousalih"},"score":0,"creation_date":1694855934,"post_id":77114914,"comment_id":135948368,"body_markdown":"By adding the fileds element to ArrayList","body":"By adding the fileds element to ArrayList"}],"owner":{"account_id":27500938,"reputation":1,"user_id":20984669,"display_name":"Hamza Bousalih"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694806290,"creation_date":1694805905,"question_id":77114914,"body_markdown":"I have these two methods:\r\n\r\n```java\r\npublic void addMappedListField(String collector) {\r\n  EntityField field = new EntityField(collector.toLowerCase(), collector,\r\n    RelationEnum.MANY_TO_ONE);\r\n  field.setRealType(collector); // TODO: Fix this error\r\n  if (fields == null)\r\n    fields = new ArrayList&lt;&gt;();\r\n  this.fields.add(field);\r\n}\r\n```\r\n\r\n```java\r\npublic static void generateMappedFields(List&lt;Entity&gt; entities) { \r\n  entities.forEach(entity -&gt; {\r\n    if (entity.fields != null)\r\n      entity.fields.stream()\r\n        .filter(field -&gt; field.getRelation() == RelationEnum.ONE_TO_MANY)\r\n        .forEach(field -&gt; entities.stream()\r\n          .filter(en -&gt; Objects.equals(en.getName(), field.getListType()))\r\n          .forEach(e -&gt; e.addMappedListField(entity.getName())));\r\n  });\r\n} \r\n```\r\n\r\nIt throw this err\r\n\r\n```\r\nException in thread &quot;main&quot; java.lang.UnsupportedOperationException\r\n  at java.base/java.util.ImmutableCollections.uoe(ImmutableCollections.java:142) \t\r\n  at java.base/java.util.ImmutableCollections$AbstractImmutableCollection.add(ImmutableCollections.java:147)\r\n  at org.bsh.classes.Entity.addMappedListField(Entity.java:55)\r\n  at org.bsh.classes.Entity.lambda$generateMappedFields$2(Entity.java:66) \t\r\n  at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)\r\n  at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)\r\n  at java.base/java.util.AbstractList$RandomAccessSpliterator.forEachRemaining(AbstractList.java:722)\r\n  at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)\r\n  at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\r\n  at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)\r\n  at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)\r\n  at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n  at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)\r\n  at org.bsh.classes.Entity.lambda$generateMappedFields$3(Entity.java:66)\r\n  at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)\r\n  at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)\r\n  at java.base/java.util.AbstractList$RandomAccessSpliterator.forEachRemaining(AbstractList.java:722)\r\n  at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)\r\n  at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\r\n  at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)\r\n  at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)\r\n  at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n  at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)\r\n  at org.bsh.classes.Entity.lambda$generateMappedFields$4(Entity.java:63)\r\n  at java.base/java.lang.Iterable.forEach(Iterable.java:75)\r\n  at org.bsh.classes.Entity.generateMappedFields(Entity.java:59)\r\n  at org.bsh.yaml_reader.config_clases.AppConfig.getGenerateEntities(AppConfig.java:29)\r\n  at org.bsh.Main.fetchData(Main.java:23)\r\n  at org.bsh.Main.main(Main.java:17)\r\n```\r\n\r\n\r\n\r\nHow can i fix this erro","title":"Getting an UnsupportedOperationException","body":"<p>I have these two methods:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void addMappedListField(String collector) {\n  EntityField field = new EntityField(collector.toLowerCase(), collector,\n    RelationEnum.MANY_TO_ONE);\n  field.setRealType(collector); // TODO: Fix this error\n  if (fields == null)\n    fields = new ArrayList&lt;&gt;();\n  this.fields.add(field);\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public static void generateMappedFields(List&lt;Entity&gt; entities) { \n  entities.forEach(entity -&gt; {\n    if (entity.fields != null)\n      entity.fields.stream()\n        .filter(field -&gt; field.getRelation() == RelationEnum.ONE_TO_MANY)\n        .forEach(field -&gt; entities.stream()\n          .filter(en -&gt; Objects.equals(en.getName(), field.getListType()))\n          .forEach(e -&gt; e.addMappedListField(entity.getName())));\n  });\n} \n</code></pre>\n<p>It throw this err</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.UnsupportedOperationException\n  at java.base/java.util.ImmutableCollections.uoe(ImmutableCollections.java:142)    \n  at java.base/java.util.ImmutableCollections$AbstractImmutableCollection.add(ImmutableCollections.java:147)\n  at org.bsh.classes.Entity.addMappedListField(Entity.java:55)\n  at org.bsh.classes.Entity.lambda$generateMappedFields$2(Entity.java:66)   \n  at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)\n  at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)\n  at java.base/java.util.AbstractList$RandomAccessSpliterator.forEachRemaining(AbstractList.java:722)\n  at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)\n  at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\n  at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)\n  at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)\n  at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n  at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)\n  at org.bsh.classes.Entity.lambda$generateMappedFields$3(Entity.java:66)\n  at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)\n  at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)\n  at java.base/java.util.AbstractList$RandomAccessSpliterator.forEachRemaining(AbstractList.java:722)\n  at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)\n  at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\n  at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)\n  at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)\n  at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n  at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)\n  at org.bsh.classes.Entity.lambda$generateMappedFields$4(Entity.java:63)\n  at java.base/java.lang.Iterable.forEach(Iterable.java:75)\n  at org.bsh.classes.Entity.generateMappedFields(Entity.java:59)\n  at org.bsh.yaml_reader.config_clases.AppConfig.getGenerateEntities(AppConfig.java:29)\n  at org.bsh.Main.fetchData(Main.java:23)\n  at org.bsh.Main.main(Main.java:17)\n</code></pre>\n<p>How can i fix this erro</p>\n"},{"tags":["java","log4j","appender","rollingfileappender"],"comments":[{"owner":{"account_id":1317825,"reputation":12193,"user_id":1264321,"accept_rate":92,"display_name":"Stefan"},"score":0,"creation_date":1355844991,"post_id":13936021,"comment_id":19215015,"body_markdown":"http://stackoverflow.com/questions/3823977/need-a-working-example-of-configuring-log4j-rollingfileappender-via-properties","body":"<a href=\"http://stackoverflow.com/questions/3823977/need-a-working-example-of-configuring-log4j-rollingfileappender-via-properties\" title=\"need a working example of configuring log4j rollingfileappender via properties\">stackoverflow.com/questions/3823977/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":2158618,"reputation":1019,"user_id":1913287,"display_name":"xxxxxxxxx"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1355844924,"creation_date":1355844924,"answer_id":13936316,"question_id":13936021,"body_markdown":"The quick answer is &quot;no&quot;. Looking at log4j&#39;s javadoc: https://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/FileAppender.html\r\n\r\nThere are only two out-of-the-box file appenders: DailyRollingFileAppender and RollingFileAppender (and the first one is not recommended because it has synchronization issues). \r\n\r\nTo achieve what you want, you should create your own appender, extending RollingFileAppender and modifying it to roll the file if the day changes. The modification would be in method:\r\n\r\n     protected void subAppend(LoggingEvent event)\r\n\r\nYou can see its source here: http://www.docjar.com/html/api/org/apache/log4j/RollingFileAppender.java.html (line 274).\r\n\r\nYou just need to copy and paste the code and change the if calling rollOver to suit your needs.\r\n\r\n\r\n","title":"Rolling logs by both size and time","body":"<p>The quick answer is \"no\". Looking at log4j's javadoc: <a href=\"https://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/FileAppender.html\" rel=\"nofollow\">https://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/FileAppender.html</a></p>\n\n<p>There are only two out-of-the-box file appenders: DailyRollingFileAppender and RollingFileAppender (and the first one is not recommended because it has synchronization issues). </p>\n\n<p>To achieve what you want, you should create your own appender, extending RollingFileAppender and modifying it to roll the file if the day changes. The modification would be in method:</p>\n\n<pre><code> protected void subAppend(LoggingEvent event)\n</code></pre>\n\n<p>You can see its source here: <a href=\"http://www.docjar.com/html/api/org/apache/log4j/RollingFileAppender.java.html\" rel=\"nofollow\">http://www.docjar.com/html/api/org/apache/log4j/RollingFileAppender.java.html</a> (line 274).</p>\n\n<p>You just need to copy and paste the code and change the if calling rollOver to suit your needs.</p>\n"},{"tags":[],"owner":{"account_id":246179,"reputation":414,"user_id":520167,"accept_rate":0,"display_name":"David Peleg"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1357584312,"creation_date":1357584312,"answer_id":14202093,"question_id":13936021,"body_markdown":"There are indeed two options:\r\n\r\n 1. use LogBack with its size and time triggering policy: http://logback.qos.ch/manual/appenders.html#SizeAndTimeBasedFNATP\r\n 2. there is TimeAndSizeRollingAppender for Log4J from here: http://www.simonsite.org.uk/\r\n\r\nKeep in mind that both options use file renames. Consider this carefully if there&#39;s another script automatically moving these files. File rename is risky when two processes deal with the same file.\r\n\r\nMy suggestion is to directly write to immutable log file name in the pattern: myapp-{dd.MM.yyyy}.{X}.log. That way &quot;rolling&quot; is simply closing one file and opening a new one. No renames. No background threads. \r\n","title":"Rolling logs by both size and time","body":"<p>There are indeed two options:</p>\n\n<ol>\n<li>use LogBack with its size and time triggering policy: <a href=\"http://logback.qos.ch/manual/appenders.html#SizeAndTimeBasedFNATP\" rel=\"noreferrer\">http://logback.qos.ch/manual/appenders.html#SizeAndTimeBasedFNATP</a></li>\n<li>there is TimeAndSizeRollingAppender for Log4J from here: <a href=\"http://www.simonsite.org.uk/\" rel=\"noreferrer\">http://www.simonsite.org.uk/</a></li>\n</ol>\n\n<p>Keep in mind that both options use file renames. Consider this carefully if there's another script automatically moving these files. File rename is risky when two processes deal with the same file.</p>\n\n<p>My suggestion is to directly write to immutable log file name in the pattern: myapp-{dd.MM.yyyy}.{X}.log. That way \"rolling\" is simply closing one file and opening a new one. No renames. No background threads. </p>\n"},{"tags":[],"owner":{"account_id":8254553,"reputation":31,"user_id":6208109,"display_name":"brajesh kumar"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1460711785,"creation_date":1460708321,"answer_id":36641824,"question_id":13936021,"body_markdown":"Below configuration xml will do the job:\r\nJAR required: log4j-rolling-appender-20150607-2059\r\n\r\n\r\n&lt;!-- begin snippet: js hide: false --&gt;\r\n\r\n&lt;!-- language: xml --&gt;\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;\r\n    &lt;!DOCTYPE log4j:configuration SYSTEM &quot;log4j.dtd&quot;&gt;\r\n    &lt;log4j:configuration debug=&quot;true&quot;\r\n    \txmlns:log4j=&#39;http://jakarta.apache.org/log4j/&#39;&gt;\r\n    \t&lt;appender name=&quot;file&quot;\r\n    \t\tclass=&quot;uk.org.simonsite.log4j.appender.TimeAndSizeRollingAppender&quot;&gt;\r\n    \t\t&lt;param name=&quot;File&quot; value=&quot;D:\\\\App.log&quot; /&gt;\r\n    \t\t&lt;param name=&quot;Threshold&quot; value=&quot;DEBUG&quot; /&gt;\r\n    \t\t&lt;param name=&quot;DatePattern&quot; value=&quot;.yyyy-MM-dd&quot; /&gt;\r\n    \t\t&lt;param name=&quot;MaxFileSize&quot; value=&quot;1KB&quot; /&gt;\r\n    \t\t&lt;param name=&quot;MaxRollFileCount&quot; value=&quot;100&quot; /&gt;\r\n    \t\t&lt;param name=&quot;ScavengeInterval&quot; value=&quot;30000&quot; /&gt;\r\n    \t\t&lt;param name=&quot;BufferedIO&quot; value=&quot;false&quot; /&gt;\r\n    \t\t&lt;param name=&quot;CompressionAlgorithm&quot; value=&quot;GZ&quot; /&gt;\r\n    \t\t&lt;layout class=&quot;org.apache.log4j.PatternLayout&quot;&gt;\r\n    \t\t\t&lt;param name=&quot;ConversionPattern&quot; value=&quot;%-5p %-23d{ISO8601} [%t] %x: %c{1} - %m%n&quot; /&gt;\r\n    \t\t&lt;/layout&gt;\r\n    \t&lt;/appender&gt;\r\n\r\n    \t&lt;root&gt;\r\n    \t\t&lt;level value=&quot;DEBUG&quot; /&gt;\r\n    \t\t&lt;appender-ref ref=&quot;file&quot; /&gt;\r\n    \t&lt;/root&gt;\r\n\r\n    &lt;/log4j:configuration&gt;\r\n\r\n&lt;!-- end snippet --&gt;\r\n","title":"Rolling logs by both size and time","body":"<p>Below configuration xml will do the job:\nJAR required: log4j-rolling-appender-20150607-2059</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;\n&lt;!DOCTYPE log4j:configuration SYSTEM \"log4j.dtd\"&gt;\n&lt;log4j:configuration debug=\"true\"\n    xmlns:log4j='http://jakarta.apache.org/log4j/'&gt;\n    &lt;appender name=\"file\"\n        class=\"uk.org.simonsite.log4j.appender.TimeAndSizeRollingAppender\"&gt;\n        &lt;param name=\"File\" value=\"D:\\\\App.log\" /&gt;\n        &lt;param name=\"Threshold\" value=\"DEBUG\" /&gt;\n        &lt;param name=\"DatePattern\" value=\".yyyy-MM-dd\" /&gt;\n        &lt;param name=\"MaxFileSize\" value=\"1KB\" /&gt;\n        &lt;param name=\"MaxRollFileCount\" value=\"100\" /&gt;\n        &lt;param name=\"ScavengeInterval\" value=\"30000\" /&gt;\n        &lt;param name=\"BufferedIO\" value=\"false\" /&gt;\n        &lt;param name=\"CompressionAlgorithm\" value=\"GZ\" /&gt;\n        &lt;layout class=\"org.apache.log4j.PatternLayout\"&gt;\n            &lt;param name=\"ConversionPattern\" value=\"%-5p %-23d{ISO8601} [%t] %x: %c{1} - %m%n\" /&gt;\n        &lt;/layout&gt;\n    &lt;/appender&gt;\n\n    &lt;root&gt;\n        &lt;level value=\"DEBUG\" /&gt;\n        &lt;appender-ref ref=\"file\" /&gt;\n    &lt;/root&gt;\n\n&lt;/log4j:configuration&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":455892,"reputation":6866,"user_id":854342,"accept_rate":17,"display_name":"Curtis Yallop"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694806246,"creation_date":1694806246,"answer_id":77114939,"question_id":13936021,"body_markdown":"Log4j2 and logback are preferable but if you want log4j-v1:\r\n\r\nLog4j-v1-extras has it: (org.apache.log4j.rolling.RollingFileAppender)\r\n\r\n```\r\n&lt;appender name=&quot;roll-by-time-and-size&quot; class=&quot;org.apache.log4j.rolling.RollingFileAppender&quot;&gt;\r\n    &lt;rollingPolicy class=&quot;org.apache.log4j.rolling.TimeBasedRollingPolicy&quot;&gt;\r\n        &lt;param name=&quot;ActiveFileName&quot; value=&quot;log4j/roll-by-time-and-size/app.log&quot; /&gt;\r\n        &lt;param name=&quot;FileNamePattern&quot; value=&quot;log4j/roll-by-time-and-size/app.%d{HH-mm}.%i.log.gz&quot; /&gt;\r\n    &lt;/rollingPolicy&gt;\r\n    &lt;triggeringPolicy\r\n        class=&quot;org.apache.log4j.rolling.SizeBasedTriggeringPolicy&quot;&gt;\r\n        &lt;param name=&quot;MaxFileSize&quot; value=&quot;100&quot; /&gt;\r\n    &lt;/triggeringPolicy&gt;\r\n    &lt;layout class=&quot;org.apache.log4j.PatternLayout&quot;&gt;\r\n        &lt;param name=&quot;ConversionPattern&quot; value=&quot;%d{yyyy-MM-dd HH:mm:ss} %-5p - %m%n&quot; /&gt;\r\n    &lt;/layout&gt;\r\n&lt;/appender&gt;\r\n```\r\n\r\nSource: https://www.baeldung.com/java-logging-rolling-file-appenders#5-rolling-based-on-size-and-time\r\n\r\nNote: There is no old-file-deletion after X days. A cron job could be used to do that. If you don&#39;t want a cron job but want deletion, I&#39;d recommend going with the log4j-v1 basic size-based RollingFileAppender or log4j-extras SizeBasedTriggeringPolicy (see baeldung article example).\r\n\r\nNote: The &quot;%i&quot; in FileNamePattern is required for time + size to both work. It adds a large long-int (ticks?) to all backed-up log filenames. This is different from logback for which &quot;%i&quot; becomes 0,1,2,..\r\n\r\nLog4j-extras dependency:\r\n\r\n```\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;log4j&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;apache-log4j-extras&lt;/artifactId&gt;\r\n\t&lt;version&gt;1.2.17&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```","title":"Rolling logs by both size and time","body":"<p>Log4j2 and logback are preferable but if you want log4j-v1:</p>\n<p>Log4j-v1-extras has it: (org.apache.log4j.rolling.RollingFileAppender)</p>\n<pre><code>&lt;appender name=&quot;roll-by-time-and-size&quot; class=&quot;org.apache.log4j.rolling.RollingFileAppender&quot;&gt;\n    &lt;rollingPolicy class=&quot;org.apache.log4j.rolling.TimeBasedRollingPolicy&quot;&gt;\n        &lt;param name=&quot;ActiveFileName&quot; value=&quot;log4j/roll-by-time-and-size/app.log&quot; /&gt;\n        &lt;param name=&quot;FileNamePattern&quot; value=&quot;log4j/roll-by-time-and-size/app.%d{HH-mm}.%i.log.gz&quot; /&gt;\n    &lt;/rollingPolicy&gt;\n    &lt;triggeringPolicy\n        class=&quot;org.apache.log4j.rolling.SizeBasedTriggeringPolicy&quot;&gt;\n        &lt;param name=&quot;MaxFileSize&quot; value=&quot;100&quot; /&gt;\n    &lt;/triggeringPolicy&gt;\n    &lt;layout class=&quot;org.apache.log4j.PatternLayout&quot;&gt;\n        &lt;param name=&quot;ConversionPattern&quot; value=&quot;%d{yyyy-MM-dd HH:mm:ss} %-5p - %m%n&quot; /&gt;\n    &lt;/layout&gt;\n&lt;/appender&gt;\n</code></pre>\n<p>Source: <a href=\"https://www.baeldung.com/java-logging-rolling-file-appenders#5-rolling-based-on-size-and-time\" rel=\"nofollow noreferrer\">https://www.baeldung.com/java-logging-rolling-file-appenders#5-rolling-based-on-size-and-time</a></p>\n<p>Note: There is no old-file-deletion after X days. A cron job could be used to do that. If you don't want a cron job but want deletion, I'd recommend going with the log4j-v1 basic size-based RollingFileAppender or log4j-extras SizeBasedTriggeringPolicy (see baeldung article example).</p>\n<p>Note: The &quot;%i&quot; in FileNamePattern is required for time + size to both work. It adds a large long-int (ticks?) to all backed-up log filenames. This is different from logback for which &quot;%i&quot; becomes 0,1,2,..</p>\n<p>Log4j-extras dependency:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;log4j&lt;/groupId&gt;\n    &lt;artifactId&gt;apache-log4j-extras&lt;/artifactId&gt;\n    &lt;version&gt;1.2.17&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":246765,"reputation":41329,"user_id":521070,"accept_rate":72,"display_name":"Michael"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15604,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":14202093,"answer_count":4,"score":10,"last_activity_date":1694806246,"creation_date":1355843912,"question_id":13936021,"body_markdown":"I use `RollingFileAppender` of `log4j 1.2.16`, which rolls log files, when they reach a certain size. Now I would like to roll log files daily _and_ when they reach a certain size. Thus there will be one or more log files per day.\r\n \r\nFor example,\r\n\r\n&lt;pre&gt;myapp.log\r\nmyapp-17.12.2013.log\r\nmyapp-16.12.2012.log\r\nmyapp-16.12.2012.1.log\r\nmyapp-16.12.2012.2.log\r\n&lt;/pre&gt;\r\n\r\nIs there an off-the-shelf appender, which does it already? \r\n","title":"Rolling logs by both size and time","body":"<p>I use <code>RollingFileAppender</code> of <code>log4j 1.2.16</code>, which rolls log files, when they reach a certain size. Now I would like to roll log files daily <em>and</em> when they reach a certain size. Thus there will be one or more log files per day.</p>\n\n<p>For example,</p>\n\n<pre>myapp.log\nmyapp-17.12.2013.log\nmyapp-16.12.2012.log\nmyapp-16.12.2012.1.log\nmyapp-16.12.2012.2.log\n</pre>\n\n<p>Is there an off-the-shelf appender, which does it already? </p>\n"},{"tags":["java","android","android-camera2","android-camerax","textureview"],"comments":[{"owner":{"account_id":72095,"reputation":18817,"user_id":208273,"display_name":"Ryan M"},"score":1,"creation_date":1694740636,"post_id":77109113,"comment_id":135934459,"body_markdown":"Based on the original title, you&#39;re misreading the error. `previewView.getSurfaceTexture()` is returning null; not any attempt to find the View.  It&#39;s finding the TextureView successfully, so you need to instead figure out why `getSurfaceTexture()` is returning null (which I don&#39;t know the answer to, unfortunately, but hopefully that sets you in the right direction...).","body":"Based on the original title, you&#39;re misreading the error. <code>previewView.getSurfaceTexture()</code> is returning null; not any attempt to find the View.  It&#39;s finding the TextureView successfully, so you need to instead figure out why <code>getSurfaceTexture()</code> is returning null (which I don&#39;t know the answer to, unfortunately, but hopefully that sets you in the right direction...)."},{"owner":{"account_id":20366371,"reputation":55,"user_id":14939620,"display_name":"Matheus Fortunato Alves"},"score":0,"creation_date":1694776153,"post_id":77109113,"comment_id":135938934,"body_markdown":"Hey Ryan, thanks for clarification. You&#39;re right and actually Wang answer solved my problem of previewing the camera Image!","body":"Hey Ryan, thanks for clarification. You&#39;re right and actually Wang answer solved my problem of previewing the camera Image!"}],"answers":[{"comments":[{"owner":{"account_id":20366371,"reputation":55,"user_id":14939620,"display_name":"Matheus Fortunato Alves"},"score":0,"creation_date":1694776185,"post_id":77109267,"comment_id":135938938,"body_markdown":"Hi Wang, this actually solved the problem and now I can view the camera preview. Thanks for that! However, when I hit the &quot;Record&quot; button, screen freezes and following error is thrown `java.io.IOException: No valid output file Stream configuration failed due to: endConfigure:503: Camera 0: Unsupported set of inputs/outputs provided`","body":"Hi Wang, this actually solved the problem and now I can view the camera preview. Thanks for that! However, when I hit the &quot;Record&quot; button, screen freezes and following error is thrown <code>java.io.IOException: No valid output file Stream configuration failed due to: endConfigure:503: Camera 0: Unsupported set of inputs&#47;outputs provided</code>"},{"owner":{"account_id":8299475,"reputation":151,"user_id":6238538,"display_name":"Wang Peiming"},"score":0,"creation_date":1694998461,"post_id":77109267,"comment_id":135961088,"body_markdown":"Sorry, I have no idea about it, please check if [this answer](https://stackoverflow.com/questions/46997776/camera2-api-error-failed-to-create-capture-session) may help.","body":"Sorry, I have no idea about it, please check if <a href=\"https://stackoverflow.com/questions/46997776/camera2-api-error-failed-to-create-capture-session\">this answer</a> may help."},{"owner":{"account_id":20366371,"reputation":55,"user_id":14939620,"display_name":"Matheus Fortunato Alves"},"score":0,"creation_date":1695068075,"post_id":77109267,"comment_id":135972187,"body_markdown":"Hey Wang, thanks for response. I was actually able to overcome the issue by adjusting the number of encoded bits  on mediaRecorder.setVideoEncodingBitRate() as sugessted by the answer you sent. Thanks again!","body":"Hey Wang, thanks for response. I was actually able to overcome the issue by adjusting the number of encoded bits  on mediaRecorder.setVideoEncodingBitRate() as sugessted by the answer you sent. Thanks again!"}],"tags":[],"owner":{"account_id":8299475,"reputation":151,"user_id":6238538,"display_name":"Wang Peiming"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1694745338,"creation_date":1694744082,"answer_id":77109267,"question_id":77109113,"body_markdown":"You should put `previewView.getSurfaceTexture()` into `onSurfaceTextureAvailable()` of `TextureView.SurfaceTextureListener`. \r\n\r\nFor example, replacing the original `onOpened(@NonNull CameraDevice cameraDevice)` with the following code can resolve it:\r\n\r\n```\r\n@Override\r\npublic void onOpened(@NonNull CameraDevice cameraDevice) {\r\n\tMainActivity.this.cameraDevice = cameraDevice;\r\n\tpreviewView.setSurfaceTextureListener(new TextureView.SurfaceTextureListener() {\r\n\t\t@Override\r\n\t\tpublic void onSurfaceTextureAvailable(@NonNull SurfaceTexture surface, int width, int height) {\r\n\t\t\tstartPreview();\r\n\t\t}\r\n\r\n\t\t@Override\r\n\t\tpublic void onSurfaceTextureSizeChanged(@NonNull SurfaceTexture surface, int width, int height) {\r\n\r\n\t\t}\r\n\r\n\t\t@Override\r\n\t\tpublic boolean onSurfaceTextureDestroyed(@NonNull SurfaceTexture surface) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t@Override\r\n\t\tpublic void onSurfaceTextureUpdated(@NonNull SurfaceTexture surface) {\r\n\r\n\t\t}\r\n\t});\r\n}\r\n```","title":"TextureView.getSurfaceTexture() returns null","body":"<p>You should put <code>previewView.getSurfaceTexture()</code> into <code>onSurfaceTextureAvailable()</code> of <code>TextureView.SurfaceTextureListener</code>.</p>\n<p>For example, replacing the original <code>onOpened(@NonNull CameraDevice cameraDevice)</code> with the following code can resolve it:</p>\n<pre><code>@Override\npublic void onOpened(@NonNull CameraDevice cameraDevice) {\n    MainActivity.this.cameraDevice = cameraDevice;\n    previewView.setSurfaceTextureListener(new TextureView.SurfaceTextureListener() {\n        @Override\n        public void onSurfaceTextureAvailable(@NonNull SurfaceTexture surface, int width, int height) {\n            startPreview();\n        }\n\n        @Override\n        public void onSurfaceTextureSizeChanged(@NonNull SurfaceTexture surface, int width, int height) {\n\n        }\n\n        @Override\n        public boolean onSurfaceTextureDestroyed(@NonNull SurfaceTexture surface) {\n            return false;\n        }\n\n        @Override\n        public void onSurfaceTextureUpdated(@NonNull SurfaceTexture surface) {\n\n        }\n    });\n}\n</code></pre>\n"}],"owner":{"account_id":20366371,"reputation":55,"user_id":14939620,"display_name":"Matheus Fortunato Alves"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77109267,"answer_count":1,"score":0,"last_activity_date":1694805625,"creation_date":1694740414,"question_id":77109113,"body_markdown":"I am trying to build a simple camera2 app to record videos and store on internal storage.\r\n\r\nSo on I have the following code: \r\n\r\n```\r\npackage com.example.newcameraapp;\r\n\r\nimport android.Manifest;\r\nimport android.annotation.SuppressLint;\r\nimport android.content.pm.PackageManager;\r\nimport android.graphics.SurfaceTexture;\r\nimport android.hardware.camera2.CameraAccessException;\r\nimport android.hardware.camera2.CameraCaptureSession;\r\nimport android.hardware.camera2.CameraCharacteristics;\r\nimport android.hardware.camera2.CameraDevice;\r\nimport android.hardware.camera2.CameraManager;\r\nimport android.hardware.camera2.CameraMetadata;\r\nimport android.hardware.camera2.CaptureRequest;\r\nimport android.hardware.camera2.TotalCaptureResult;\r\nimport android.media.MediaRecorder;\r\nimport android.os.Bundle;\r\nimport android.os.Environment;\r\nimport android.os.Handler;\r\nimport android.os.HandlerThread;\r\nimport android.util.Size;\r\nimport android.view.Surface;\r\nimport android.view.TextureView;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.Toast;\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.core.app.ActivityCompat;\r\nimport androidx.core.content.ContextCompat;\r\n\r\nimport java.io.File;\r\nimport java.io.IOException;\r\nimport java.text.SimpleDateFormat;\r\nimport java.util.ArrayList;\r\nimport java.util.Collections;\r\nimport java.util.Date;\r\nimport java.util.List;\r\nimport java.util.Locale;\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    private static final int REQUEST_CAMERA_PERMISSION = 200;\r\n    private static final String[] REQUIRED_PERMISSIONS = {Manifest.permission.CAMERA, Manifest.permission.RECORD_AUDIO};\r\n\r\n    private CameraManager cameraManager;\r\n    private CameraDevice cameraDevice;\r\n    private Size videoSize;\r\n    private MediaRecorder mediaRecorder;\r\n    private CaptureRequest.Builder captureRequestBuilder;\r\n    private CameraCaptureSession cameraCaptureSession;\r\n    private String videoFilePath;\r\n    private boolean isRecording = false;\r\n\r\n    private HandlerThread backgroundThread;\r\n    private Handler backgroundHandler;\r\n\r\n    private TextureView previewView;\r\n\r\n    private static final int FIXED_FRAME_RATE = 30; // Fixed frame rate in frames per second\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        previewView = findViewById(R.id.previewView);\r\n\r\n        Button recordButton = findViewById(R.id.recordButton);\r\n        recordButton.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                if (!isRecording) {\r\n                    startRecording();\r\n                } else {\r\n                    stopRecording();\r\n                }\r\n            }\r\n        });\r\n\r\n        if (allPermissionsGranted()) {\r\n            startCamera();\r\n        } else {\r\n            ActivityCompat.requestPermissions(this, REQUIRED_PERMISSIONS, REQUEST_CAMERA_PERMISSION);\r\n        }\r\n    }\r\n\r\n    @SuppressLint(&quot;MissingPermission&quot;)\r\n    private void startCamera() {\r\n        cameraManager = (CameraManager) getSystemService(CAMERA_SERVICE);\r\n        try {\r\n            String cameraId = cameraManager.getCameraIdList()[0]; // Use the first camera\r\n\r\n            CameraCharacteristics characteristics = cameraManager.getCameraCharacteristics(cameraId);\r\n            videoSize = chooseVideoSize(characteristics.get(CameraCharacteristics.SCALER_STREAM_CONFIGURATION_MAP).getOutputSizes(MediaRecorder.class));\r\n\r\n            cameraManager.openCamera(cameraId, new CameraDevice.StateCallback() {\r\n                @Override\r\n                public void onOpened(@NonNull CameraDevice cameraDevice) {\r\n                    MainActivity.this.cameraDevice = cameraDevice;\r\n                    startPreview();\r\n                }\r\n\r\n                @Override\r\n                public void onDisconnected(@NonNull CameraDevice cameraDevice) {\r\n                    cameraDevice.close();\r\n                    MainActivity.this.cameraDevice = null;\r\n                }\r\n\r\n                @Override\r\n                public void onError(@NonNull CameraDevice cameraDevice, int error) {\r\n                    cameraDevice.close();\r\n                    MainActivity.this.cameraDevice = null;\r\n                    // Handle camera error\r\n                }\r\n            }, null);\r\n\r\n        } catch (CameraAccessException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    private Size chooseVideoSize(Size[] choices) {\r\n        for (Size size : choices) {\r\n            if (size.getWidth() == 1920 &amp;&amp; size.getHeight() == 1080) {\r\n                return size;\r\n            }\r\n        }\r\n        return choices[choices.length - 1]; // Return the largest available size by default\r\n    }\r\n\r\n    private void startPreview() {\r\n        try {\r\n            closePreviewSession();\r\n            SurfaceTexture texture = previewView.getSurfaceTexture();\r\n            texture.setDefaultBufferSize(videoSize.getWidth(), videoSize.getHeight());\r\n            Surface previewSurface = new Surface(texture);\r\n\r\n            captureRequestBuilder = cameraDevice.createCaptureRequest(CameraDevice.TEMPLATE_RECORD);\r\n            captureRequestBuilder.addTarget(previewSurface);\r\n\r\n            cameraDevice.createCaptureSession(Collections.singletonList(previewSurface), new CameraCaptureSession.StateCallback() {\r\n                @Override\r\n                public void onConfigured(@NonNull CameraCaptureSession session) {\r\n                    if (cameraDevice == null) {\r\n                        return;\r\n                    }\r\n\r\n                    cameraCaptureSession = session;\r\n                    updatePreview();\r\n                }\r\n\r\n                @Override\r\n                public void onConfigureFailed(@NonNull CameraCaptureSession session) {\r\n                    // Handle configuration failure\r\n                }\r\n            }, null);\r\n\r\n        } catch (CameraAccessException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    private void updatePreview() {\r\n        if (cameraDevice == null) {\r\n            return;\r\n        }\r\n\r\n        captureRequestBuilder.set(CaptureRequest.CONTROL_MODE, CameraMetadata.CONTROL_MODE_AUTO);\r\n\r\n        try {\r\n            cameraCaptureSession.setRepeatingRequest(captureRequestBuilder.build(), null, backgroundHandler);\r\n        } catch (CameraAccessException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    private void startRecording() {\r\n        if (cameraDevice == null || !previewView.isAvailable() || videoSize == null) {\r\n            return;\r\n        }\r\n\r\n        try {\r\n            closePreviewSession();\r\n            setUpMediaRecorder();\r\n\r\n            SurfaceTexture texture = previewView.getSurfaceTexture();\r\n            texture.setDefaultBufferSize(videoSize.getWidth(), videoSize.getHeight());\r\n            Surface previewSurface = new Surface(texture);\r\n\r\n            List&lt;Surface&gt; surfaces = new ArrayList&lt;&gt;();\r\n            surfaces.add(previewSurface);\r\n            surfaces.add(mediaRecorder.getSurface());\r\n\r\n            captureRequestBuilder = cameraDevice.createCaptureRequest(CameraDevice.TEMPLATE_RECORD);\r\n            for (Surface surface : surfaces) {\r\n                captureRequestBuilder.addTarget(surface);\r\n            }\r\n\r\n            cameraDevice.createCaptureSession(surfaces, new CameraCaptureSession.StateCallback() {\r\n                @Override\r\n                public void onConfigured(@NonNull CameraCaptureSession session) {\r\n                    if (cameraDevice == null) {\r\n                        return;\r\n                    }\r\n\r\n                    cameraCaptureSession = session;\r\n                    updatePreview();\r\n\r\n                    runOnUiThread(new Runnable() {\r\n                        @Override\r\n                        public void run() {\r\n                            mediaRecorder.start();\r\n                            isRecording = true;\r\n                        }\r\n                    });\r\n                }\r\n\r\n                @Override\r\n                public void onConfigureFailed(@NonNull CameraCaptureSession session) {\r\n                    // Handle configuration failure\r\n                }\r\n            }, null);\r\n\r\n        } catch (CameraAccessException | IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    private void setUpMediaRecorder() throws IOException {\r\n        mediaRecorder = new MediaRecorder();\r\n        mediaRecorder.setVideoSource(MediaRecorder.VideoSource.SURFACE);\r\n        mediaRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);\r\n        mediaRecorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);\r\n        mediaRecorder.setOutputFile(getOutputMediaFile());\r\n        mediaRecorder.setVideoEncodingBitRate(10000000); // Adjust as needed\r\n        mediaRecorder.setVideoFrameRate(FIXED_FRAME_RATE); // Set the fixed frame rate\r\n        mediaRecorder.setVideoSize(videoSize.getWidth(), videoSize.getHeight());\r\n        mediaRecorder.setVideoEncoder(MediaRecorder.VideoEncoder.H264);\r\n        mediaRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AAC);\r\n        mediaRecorder.prepare();\r\n    }\r\n\r\n    private void closePreviewSession() {\r\n        if (cameraCaptureSession != null) {\r\n            cameraCaptureSession.close();\r\n            cameraCaptureSession = null;\r\n        }\r\n    }\r\n\r\n    private void stopRecording() {\r\n        if (isRecording) {\r\n            mediaRecorder.stop();\r\n            mediaRecorder.reset();\r\n            mediaRecorder.release();\r\n            mediaRecorder = null;\r\n            isRecording = false;\r\n            startPreview();\r\n        }\r\n    }\r\n\r\n    private String getOutputMediaFile() {\r\n        File mediaStorageDir = new File(Environment.getExternalStoragePublicDirectory(\r\n                Environment.DIRECTORY_DCIM), &quot;MyCameraApp&quot;);\r\n\r\n        if (!mediaStorageDir.exists()) {\r\n            if (!mediaStorageDir.mkdirs()) {\r\n                return null;\r\n            }\r\n        }\r\n\r\n        String timeStamp = new SimpleDateFormat(&quot;yyyyMMdd_HHmmss&quot;, Locale.getDefault()).format(new Date());\r\n        videoFilePath = mediaStorageDir.getPath() + File.separator + &quot;VID_&quot; + timeStamp + &quot;.mp4&quot;;\r\n        return videoFilePath;\r\n    }\r\n\r\n    private boolean allPermissionsGranted() {\r\n        for (String permission : REQUIRED_PERMISSIONS) {\r\n            if (ContextCompat.checkSelfPermission(this, permission) != PackageManager.PERMISSION_GRANTED) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n}\r\n ```\r\n\r\nlayout xml file: \r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    tools:context=&quot;.MainActivity&quot;&gt;\r\n\r\n    &lt;TextureView\r\n        android:id=&quot;@+id/previewView&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        /&gt;\r\n\r\n    &lt;Button\r\n        android:id=&quot;@+id/recordButton&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:text=&quot;Record&quot;\r\n        android:onClick=&quot;onClick&quot;\r\n        android:layout_alignParentBottom=&quot;true&quot;\r\n        android:layout_centerHorizontal=&quot;true&quot; /&gt;\r\n\r\n&lt;/RelativeLayout&gt;\r\n```\r\n\r\nAfter running the code (also checked all necessary permissions), following error occurs:\r\n```\r\nFATAL EXCEPTION: main\r\nProcess: com.example.newcameraapp, PID: 6357\r\njava.lang.NullPointerException: Attempt to invoke virtual method &#39;void android.graphics.SurfaceTexture.setDefaultBufferSize(int, int)&#39; on a null object reference\r\n    at com.example.newcameraapp.MainActivity.startPreview(MainActivity.java:136)\r\n    at com.example.newcameraapp.MainActivity.access$400(MainActivity.java:41)\r\n    at com.example.newcameraapp.MainActivity$2.onOpened(MainActivity.java:101)\r\n    at android.hardware.camera2.impl.CameraDeviceImpl$1.run(CameraDeviceImpl.java:151)\r\n    at android.os.Handler.handleCallback(Handler.java:938)\r\n    at android.os.Handler.dispatchMessage(Handler.java:99)\r\n    at android.os.Looper.loop(Looper.java:223)\r\n    at android.app.ActivityThread.main(ActivityThread.java:7656)\r\n    at java.lang.reflect.Method.invoke(Native Method)\r\n    at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:592)\r\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:947)\r\n```\r\n\r\nError is caused by ```texture.setDefaultBufferSize(videoSize.getWidth(), videoSize.getHeight());```\r\n\r\nMy layout xml seems correct and I called TextureView correctly too. \r\n\r\nCan someone help?\r\n\r\n\r\n\r\n\r\n","title":"TextureView.getSurfaceTexture() returns null","body":"<p>I am trying to build a simple camera2 app to record videos and store on internal storage.</p>\n<p>So on I have the following code:</p>\n<pre><code>package com.example.newcameraapp;\n\nimport android.Manifest;\nimport android.annotation.SuppressLint;\nimport android.content.pm.PackageManager;\nimport android.graphics.SurfaceTexture;\nimport android.hardware.camera2.CameraAccessException;\nimport android.hardware.camera2.CameraCaptureSession;\nimport android.hardware.camera2.CameraCharacteristics;\nimport android.hardware.camera2.CameraDevice;\nimport android.hardware.camera2.CameraManager;\nimport android.hardware.camera2.CameraMetadata;\nimport android.hardware.camera2.CaptureRequest;\nimport android.hardware.camera2.TotalCaptureResult;\nimport android.media.MediaRecorder;\nimport android.os.Bundle;\nimport android.os.Environment;\nimport android.os.Handler;\nimport android.os.HandlerThread;\nimport android.util.Size;\nimport android.view.Surface;\nimport android.view.TextureView;\nimport android.view.View;\nimport android.widget.Button;\nimport android.widget.Toast;\nimport androidx.annotation.NonNull;\nimport androidx.annotation.Nullable;\nimport androidx.appcompat.app.AppCompatActivity;\nimport androidx.core.app.ActivityCompat;\nimport androidx.core.content.ContextCompat;\n\nimport java.io.File;\nimport java.io.IOException;\nimport java.text.SimpleDateFormat;\nimport java.util.ArrayList;\nimport java.util.Collections;\nimport java.util.Date;\nimport java.util.List;\nimport java.util.Locale;\n\npublic class MainActivity extends AppCompatActivity {\n\n    private static final int REQUEST_CAMERA_PERMISSION = 200;\n    private static final String[] REQUIRED_PERMISSIONS = {Manifest.permission.CAMERA, Manifest.permission.RECORD_AUDIO};\n\n    private CameraManager cameraManager;\n    private CameraDevice cameraDevice;\n    private Size videoSize;\n    private MediaRecorder mediaRecorder;\n    private CaptureRequest.Builder captureRequestBuilder;\n    private CameraCaptureSession cameraCaptureSession;\n    private String videoFilePath;\n    private boolean isRecording = false;\n\n    private HandlerThread backgroundThread;\n    private Handler backgroundHandler;\n\n    private TextureView previewView;\n\n    private static final int FIXED_FRAME_RATE = 30; // Fixed frame rate in frames per second\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        previewView = findViewById(R.id.previewView);\n\n        Button recordButton = findViewById(R.id.recordButton);\n        recordButton.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                if (!isRecording) {\n                    startRecording();\n                } else {\n                    stopRecording();\n                }\n            }\n        });\n\n        if (allPermissionsGranted()) {\n            startCamera();\n        } else {\n            ActivityCompat.requestPermissions(this, REQUIRED_PERMISSIONS, REQUEST_CAMERA_PERMISSION);\n        }\n    }\n\n    @SuppressLint(&quot;MissingPermission&quot;)\n    private void startCamera() {\n        cameraManager = (CameraManager) getSystemService(CAMERA_SERVICE);\n        try {\n            String cameraId = cameraManager.getCameraIdList()[0]; // Use the first camera\n\n            CameraCharacteristics characteristics = cameraManager.getCameraCharacteristics(cameraId);\n            videoSize = chooseVideoSize(characteristics.get(CameraCharacteristics.SCALER_STREAM_CONFIGURATION_MAP).getOutputSizes(MediaRecorder.class));\n\n            cameraManager.openCamera(cameraId, new CameraDevice.StateCallback() {\n                @Override\n                public void onOpened(@NonNull CameraDevice cameraDevice) {\n                    MainActivity.this.cameraDevice = cameraDevice;\n                    startPreview();\n                }\n\n                @Override\n                public void onDisconnected(@NonNull CameraDevice cameraDevice) {\n                    cameraDevice.close();\n                    MainActivity.this.cameraDevice = null;\n                }\n\n                @Override\n                public void onError(@NonNull CameraDevice cameraDevice, int error) {\n                    cameraDevice.close();\n                    MainActivity.this.cameraDevice = null;\n                    // Handle camera error\n                }\n            }, null);\n\n        } catch (CameraAccessException e) {\n            e.printStackTrace();\n        }\n    }\n\n    private Size chooseVideoSize(Size[] choices) {\n        for (Size size : choices) {\n            if (size.getWidth() == 1920 &amp;&amp; size.getHeight() == 1080) {\n                return size;\n            }\n        }\n        return choices[choices.length - 1]; // Return the largest available size by default\n    }\n\n    private void startPreview() {\n        try {\n            closePreviewSession();\n            SurfaceTexture texture = previewView.getSurfaceTexture();\n            texture.setDefaultBufferSize(videoSize.getWidth(), videoSize.getHeight());\n            Surface previewSurface = new Surface(texture);\n\n            captureRequestBuilder = cameraDevice.createCaptureRequest(CameraDevice.TEMPLATE_RECORD);\n            captureRequestBuilder.addTarget(previewSurface);\n\n            cameraDevice.createCaptureSession(Collections.singletonList(previewSurface), new CameraCaptureSession.StateCallback() {\n                @Override\n                public void onConfigured(@NonNull CameraCaptureSession session) {\n                    if (cameraDevice == null) {\n                        return;\n                    }\n\n                    cameraCaptureSession = session;\n                    updatePreview();\n                }\n\n                @Override\n                public void onConfigureFailed(@NonNull CameraCaptureSession session) {\n                    // Handle configuration failure\n                }\n            }, null);\n\n        } catch (CameraAccessException e) {\n            e.printStackTrace();\n        }\n    }\n\n    private void updatePreview() {\n        if (cameraDevice == null) {\n            return;\n        }\n\n        captureRequestBuilder.set(CaptureRequest.CONTROL_MODE, CameraMetadata.CONTROL_MODE_AUTO);\n\n        try {\n            cameraCaptureSession.setRepeatingRequest(captureRequestBuilder.build(), null, backgroundHandler);\n        } catch (CameraAccessException e) {\n            e.printStackTrace();\n        }\n    }\n\n    private void startRecording() {\n        if (cameraDevice == null || !previewView.isAvailable() || videoSize == null) {\n            return;\n        }\n\n        try {\n            closePreviewSession();\n            setUpMediaRecorder();\n\n            SurfaceTexture texture = previewView.getSurfaceTexture();\n            texture.setDefaultBufferSize(videoSize.getWidth(), videoSize.getHeight());\n            Surface previewSurface = new Surface(texture);\n\n            List&lt;Surface&gt; surfaces = new ArrayList&lt;&gt;();\n            surfaces.add(previewSurface);\n            surfaces.add(mediaRecorder.getSurface());\n\n            captureRequestBuilder = cameraDevice.createCaptureRequest(CameraDevice.TEMPLATE_RECORD);\n            for (Surface surface : surfaces) {\n                captureRequestBuilder.addTarget(surface);\n            }\n\n            cameraDevice.createCaptureSession(surfaces, new CameraCaptureSession.StateCallback() {\n                @Override\n                public void onConfigured(@NonNull CameraCaptureSession session) {\n                    if (cameraDevice == null) {\n                        return;\n                    }\n\n                    cameraCaptureSession = session;\n                    updatePreview();\n\n                    runOnUiThread(new Runnable() {\n                        @Override\n                        public void run() {\n                            mediaRecorder.start();\n                            isRecording = true;\n                        }\n                    });\n                }\n\n                @Override\n                public void onConfigureFailed(@NonNull CameraCaptureSession session) {\n                    // Handle configuration failure\n                }\n            }, null);\n\n        } catch (CameraAccessException | IOException e) {\n            e.printStackTrace();\n        }\n    }\n\n    private void setUpMediaRecorder() throws IOException {\n        mediaRecorder = new MediaRecorder();\n        mediaRecorder.setVideoSource(MediaRecorder.VideoSource.SURFACE);\n        mediaRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);\n        mediaRecorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);\n        mediaRecorder.setOutputFile(getOutputMediaFile());\n        mediaRecorder.setVideoEncodingBitRate(10000000); // Adjust as needed\n        mediaRecorder.setVideoFrameRate(FIXED_FRAME_RATE); // Set the fixed frame rate\n        mediaRecorder.setVideoSize(videoSize.getWidth(), videoSize.getHeight());\n        mediaRecorder.setVideoEncoder(MediaRecorder.VideoEncoder.H264);\n        mediaRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AAC);\n        mediaRecorder.prepare();\n    }\n\n    private void closePreviewSession() {\n        if (cameraCaptureSession != null) {\n            cameraCaptureSession.close();\n            cameraCaptureSession = null;\n        }\n    }\n\n    private void stopRecording() {\n        if (isRecording) {\n            mediaRecorder.stop();\n            mediaRecorder.reset();\n            mediaRecorder.release();\n            mediaRecorder = null;\n            isRecording = false;\n            startPreview();\n        }\n    }\n\n    private String getOutputMediaFile() {\n        File mediaStorageDir = new File(Environment.getExternalStoragePublicDirectory(\n                Environment.DIRECTORY_DCIM), &quot;MyCameraApp&quot;);\n\n        if (!mediaStorageDir.exists()) {\n            if (!mediaStorageDir.mkdirs()) {\n                return null;\n            }\n        }\n\n        String timeStamp = new SimpleDateFormat(&quot;yyyyMMdd_HHmmss&quot;, Locale.getDefault()).format(new Date());\n        videoFilePath = mediaStorageDir.getPath() + File.separator + &quot;VID_&quot; + timeStamp + &quot;.mp4&quot;;\n        return videoFilePath;\n    }\n\n    private boolean allPermissionsGranted() {\n        for (String permission : REQUIRED_PERMISSIONS) {\n            if (ContextCompat.checkSelfPermission(this, permission) != PackageManager.PERMISSION_GRANTED) {\n                return false;\n            }\n        }\n        return true;\n    }\n}\n</code></pre>\n<p>layout xml file:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    tools:context=&quot;.MainActivity&quot;&gt;\n\n    &lt;TextureView\n        android:id=&quot;@+id/previewView&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot;\n        /&gt;\n\n    &lt;Button\n        android:id=&quot;@+id/recordButton&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:text=&quot;Record&quot;\n        android:onClick=&quot;onClick&quot;\n        android:layout_alignParentBottom=&quot;true&quot;\n        android:layout_centerHorizontal=&quot;true&quot; /&gt;\n\n&lt;/RelativeLayout&gt;\n</code></pre>\n<p>After running the code (also checked all necessary permissions), following error occurs:</p>\n<pre><code>FATAL EXCEPTION: main\nProcess: com.example.newcameraapp, PID: 6357\njava.lang.NullPointerException: Attempt to invoke virtual method 'void android.graphics.SurfaceTexture.setDefaultBufferSize(int, int)' on a null object reference\n    at com.example.newcameraapp.MainActivity.startPreview(MainActivity.java:136)\n    at com.example.newcameraapp.MainActivity.access$400(MainActivity.java:41)\n    at com.example.newcameraapp.MainActivity$2.onOpened(MainActivity.java:101)\n    at android.hardware.camera2.impl.CameraDeviceImpl$1.run(CameraDeviceImpl.java:151)\n    at android.os.Handler.handleCallback(Handler.java:938)\n    at android.os.Handler.dispatchMessage(Handler.java:99)\n    at android.os.Looper.loop(Looper.java:223)\n    at android.app.ActivityThread.main(ActivityThread.java:7656)\n    at java.lang.reflect.Method.invoke(Native Method)\n    at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:592)\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:947)\n</code></pre>\n<p>Error is caused by <code>texture.setDefaultBufferSize(videoSize.getWidth(), videoSize.getHeight());</code></p>\n<p>My layout xml seems correct and I called TextureView correctly too.</p>\n<p>Can someone help?</p>\n"},{"tags":["java","android","drawerlayout","navigationview","ripple-effect"],"answers":[{"tags":[],"owner":{"account_id":16299235,"reputation":315,"user_id":11770758,"display_name":"Jaime Miranda Ramirez"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1694805611,"creation_date":1694805611,"answer_id":77114897,"question_id":77101577,"body_markdown":"After some more digging I was able to solve my problem by adding ```&lt;item name=&quot;colorControlHighlight&quot;&gt;@android:color/transparent&lt;/item&gt;``` in the ```themes.xml``` file. I also left the following parameters in the NavigationView in the xml:\r\n\r\n```\r\napp:itemBackground=&quot;@android:color/transparent&quot;\r\napp:itemRippleColor=&quot;@android:color/transparent&quot;\r\n```\r\nNow, there&#39;s no random ripple effect showing.","title":"Remove Ripple Effect from Drawer Layout Navigation View","body":"<p>After some more digging I was able to solve my problem by adding <code>&lt;item name=&quot;colorControlHighlight&quot;&gt;@android:color/transparent&lt;/item&gt;</code> in the <code>themes.xml</code> file. I also left the following parameters in the NavigationView in the xml:</p>\n<pre><code>app:itemBackground=&quot;@android:color/transparent&quot;\napp:itemRippleColor=&quot;@android:color/transparent&quot;\n</code></pre>\n<p>Now, there's no random ripple effect showing.</p>\n"}],"owner":{"account_id":16299235,"reputation":315,"user_id":11770758,"display_name":"Jaime Miranda Ramirez"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77114897,"answer_count":1,"score":0,"last_activity_date":1694805611,"creation_date":1694661460,"question_id":77101577,"body_markdown":"I&#39;m trying to remove [this](https://imgur.com/a/Zhqv1Dh) ripple effect from my Navigation View without any luck. I tried following the answers from [BottomNavigationView - Shadow and Ripple Effect](https://stackoverflow.com/questions/40316411/bottomnavigationview-shadow-and-ripple-effect) and [How to disable gray animation from center to edges on bottom navigation on tap](https://stackoverflow.com/questions/56157660/how-to-disable-gray-animation-from-center-to-edges-on-bottom-navigation-on-tap) question that I found on Stack and nothing worked for me. It&#39;s also a strange behavior that the ripple effect only happens sometimes, usually after 2 clicks on the Navigation Menu, this can be seen in the video.\r\n\r\nThis is my XML file:\r\n\r\n```\r\n&lt;androidx.drawerlayout.widget.DrawerLayout\r\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    android:id=&quot;@+id/drawer_layout&quot;\r\n    tools:openDrawer=&quot;start&quot;\r\n    tools:context=&quot;.HomeActivity&quot;&gt;\r\n\r\n    &lt;com.google.android.material.navigation.NavigationView\r\n        android:layout_width=&quot;275dp&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        android:id=&quot;@+id/navigation_view&quot;\r\n        app:itemIconPadding=&quot;10dp&quot;\r\n        app:itemHorizontalPadding=&quot;20dp&quot;\r\n        android:layout_gravity=&quot;start&quot;\r\n        android:fontFamily=&quot;@font/exo&quot;\r\n        android:textStyle=&quot;bold&quot;\r\n        app:headerLayout=&quot;@layout/navigation_header&quot;\r\n        app:menu=&quot;@menu/navigation_menu&quot;\r\n        app:itemBackground=&quot;@android:color/transparent&quot;\r\n        app:itemRippleColor=&quot;@android:color/transparent&quot;\r\n        app:itemIconTint=&quot;@color/moroccan_blue&quot;\r\n        app:itemTextColor=&quot;@color/moroccan_blue&quot;\r\n        android:backgroundTint=&quot;@color/white&quot;\r\n        app:drawerLayoutCornerSize=&quot;20dp&quot;/&gt;\r\n\r\n&lt;/androidx.drawerlayout.widget.DrawerLayout&gt;\r\n```\r\n\r\nI tried adding ```app:itemBackground=&quot;@android:color/transparent&quot;``` and ```app:itemRippleColor=&quot;@android:color/transparent&quot;``` to solve this problem, but it didn&#39;t work. The former removed a gray ripple effect that it previously had and replaced it with the transparent ripple effect that was seen in the first 2 clicks of the Navigation Menu in the video. I already had the same behavior prior to adding those lines, the only difference was that the first 2 clicks were gray and the rest were the pink-ish color that appears in the video.","title":"Remove Ripple Effect from Drawer Layout Navigation View","body":"<p>I'm trying to remove <a href=\"https://imgur.com/a/Zhqv1Dh\" rel=\"nofollow noreferrer\">this</a> ripple effect from my Navigation View without any luck. I tried following the answers from <a href=\"https://stackoverflow.com/questions/40316411/bottomnavigationview-shadow-and-ripple-effect\">BottomNavigationView - Shadow and Ripple Effect</a> and <a href=\"https://stackoverflow.com/questions/56157660/how-to-disable-gray-animation-from-center-to-edges-on-bottom-navigation-on-tap\">How to disable gray animation from center to edges on bottom navigation on tap</a> question that I found on Stack and nothing worked for me. It's also a strange behavior that the ripple effect only happens sometimes, usually after 2 clicks on the Navigation Menu, this can be seen in the video.</p>\n<p>This is my XML file:</p>\n<pre><code>&lt;androidx.drawerlayout.widget.DrawerLayout\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:id=&quot;@+id/drawer_layout&quot;\n    tools:openDrawer=&quot;start&quot;\n    tools:context=&quot;.HomeActivity&quot;&gt;\n\n    &lt;com.google.android.material.navigation.NavigationView\n        android:layout_width=&quot;275dp&quot;\n        android:layout_height=&quot;match_parent&quot;\n        android:id=&quot;@+id/navigation_view&quot;\n        app:itemIconPadding=&quot;10dp&quot;\n        app:itemHorizontalPadding=&quot;20dp&quot;\n        android:layout_gravity=&quot;start&quot;\n        android:fontFamily=&quot;@font/exo&quot;\n        android:textStyle=&quot;bold&quot;\n        app:headerLayout=&quot;@layout/navigation_header&quot;\n        app:menu=&quot;@menu/navigation_menu&quot;\n        app:itemBackground=&quot;@android:color/transparent&quot;\n        app:itemRippleColor=&quot;@android:color/transparent&quot;\n        app:itemIconTint=&quot;@color/moroccan_blue&quot;\n        app:itemTextColor=&quot;@color/moroccan_blue&quot;\n        android:backgroundTint=&quot;@color/white&quot;\n        app:drawerLayoutCornerSize=&quot;20dp&quot;/&gt;\n\n&lt;/androidx.drawerlayout.widget.DrawerLayout&gt;\n</code></pre>\n<p>I tried adding <code>app:itemBackground=&quot;@android:color/transparent&quot;</code> and <code>app:itemRippleColor=&quot;@android:color/transparent&quot;</code> to solve this problem, but it didn't work. The former removed a gray ripple effect that it previously had and replaced it with the transparent ripple effect that was seen in the first 2 clicks of the Navigation Menu in the video. I already had the same behavior prior to adding those lines, the only difference was that the first 2 clicks were gray and the rest were the pink-ish color that appears in the video.</p>\n"},{"tags":["java","inputstream","outputstream"],"comments":[{"owner":{"account_id":101585,"reputation":107721,"user_id":273200,"accept_rate":100,"display_name":"Bala R"},"score":5,"creation_date":1303737294,"post_id":5778658,"comment_id":6621551,"body_markdown":"See http://stackoverflow.com/questions/1225909/most-efficient-way-to-create-inputstream-from-outputstream","body":"See <a href=\"http://stackoverflow.com/questions/1225909/most-efficient-way-to-create-inputstream-from-outputstream\" title=\"most efficient way to create inputstream from outputstream\">stackoverflow.com/questions/1225909/&hellip;</a>"},{"owner":{"account_id":35502,"reputation":28362,"user_id":100565,"accept_rate":59,"display_name":"MeBigFatGuy"},"score":3,"creation_date":1303737430,"post_id":5778658,"comment_id":6621581,"body_markdown":"@c0mrade, the op wants something like IOUtils.copy, only in the other direction. When someone writes into an OutputStream, it becomes available for someone else to use in an InputStream. This is basically what PipedOutputStream/PipedInputStream do. Unfortunately the Piped streams can&#39;t be built from other streams.","body":"@c0mrade, the op wants something like IOUtils.copy, only in the other direction. When someone writes into an OutputStream, it becomes available for someone else to use in an InputStream. This is basically what PipedOutputStream/PipedInputStream do. Unfortunately the Piped streams can&#39;t be built from other streams."},{"owner":{"account_id":242438,"reputation":17413,"user_id":513956,"accept_rate":77,"display_name":"Waypoint"},"score":0,"creation_date":1303737546,"post_id":5778658,"comment_id":6621600,"body_markdown":"so the PipedOutputStream/PipedInputStream is the solution?","body":"so the PipedOutputStream/PipedInputStream is the solution?"},{"owner":{"account_id":35502,"reputation":28362,"user_id":100565,"accept_rate":59,"display_name":"MeBigFatGuy"},"score":0,"creation_date":1303738815,"post_id":5778658,"comment_id":6621844,"body_markdown":"Basically in order for PipedStreams to work in your case, your OutputStream would need to be constructed like `new YourOutputStream(thePipedOutputStream)` and `new YourInputStream(thePipedInputStream)` which probably is not the way your stream works. So I don&#39;t think this is the solution.","body":"Basically in order for PipedStreams to work in your case, your OutputStream would need to be constructed like <code>new YourOutputStream(thePipedOutputStream)</code> and <code>new YourInputStream(thePipedInputStream)</code> which probably is not the way your stream works. So I don&#39;t think this is the solution."}],"answers":[{"comments":[{"owner":{"account_id":242438,"reputation":17413,"user_id":513956,"accept_rate":77,"display_name":"Waypoint"},"score":6,"creation_date":1303739225,"post_id":5778863,"comment_id":6621935,"body_markdown":"copy() do this IS to OS according to API, I need it to do backwards","body":"copy() do this IS to OS according to API, I need it to do backwards"},{"owner":{"account_id":242438,"reputation":17413,"user_id":513956,"accept_rate":77,"display_name":"Waypoint"},"score":1,"creation_date":1303740133,"post_id":5778863,"comment_id":6622124,"body_markdown":"See my edit on the top, it is necesarry for me to make some conversion","body":"See my edit on the top, it is necesarry for me to make some conversion"},{"owner":{"account_id":152811,"reputation":3137,"user_id":367591,"accept_rate":62,"display_name":"Java Drinker"},"score":0,"creation_date":1303740473,"post_id":5778863,"comment_id":6622191,"body_markdown":"Make your output a ByteArrayOutputStream, and then make you input in the second case a BAIS. Does this solution not apply? Perhaps I am misunderstanding.","body":"Make your output a ByteArrayOutputStream, and then make you input in the second case a BAIS. Does this solution not apply? Perhaps I am misunderstanding."},{"owner":{"account_id":495819,"reputation":13159,"user_id":1017787,"accept_rate":64,"display_name":"JBCP"},"score":128,"creation_date":1393003696,"post_id":5778863,"comment_id":33237950,"body_markdown":"The usecase is very simple: Imagine you have a serialization library (for example, serializing to JSON) and a transport layer (say, Tomcat) which takes an InputStream. So you need to pipe the OutputStream from JSON over an HTTP connection which wants to read from an InputStream.","body":"The usecase is very simple: Imagine you have a serialization library (for example, serializing to JSON) and a transport layer (say, Tomcat) which takes an InputStream. So you need to pipe the OutputStream from JSON over an HTTP connection which wants to read from an InputStream."},{"owner":{"account_id":58449,"reputation":9995,"user_id":1391064,"accept_rate":73,"display_name":"Jon"},"score":8,"creation_date":1394702797,"post_id":5778863,"comment_id":34011175,"body_markdown":"This is useful when unit testing and you are super pedantic about avoiding touching the file system.","body":"This is useful when unit testing and you are super pedantic about avoiding touching the file system."},{"owner":{"account_id":1372373,"reputation":3200,"user_id":1307108,"accept_rate":40,"display_name":"Groostav"},"score":0,"creation_date":1421995821,"post_id":5778863,"comment_id":44583635,"body_markdown":"I decided to use an XML serializer to copy a tricky directed acyclic graph that would&#39;ve been difficult to write a proper explicit copy constructor for. In this case what I want to do is give the serializer an outputStream that fills a buffer, and then give the serializer an input stream that reads from the same buffer. Does this seem like a fair place to use this &#39;drive to output stream -&gt; pull from input stream&#39; scheme or am I missing something blindingly obvious?","body":"I decided to use an XML serializer to copy a tricky directed acyclic graph that would&#39;ve been difficult to write a proper explicit copy constructor for. In this case what I want to do is give the serializer an outputStream that fills a buffer, and then give the serializer an input stream that reads from the same buffer. Does this seem like a fair place to use this &#39;drive to output stream -&gt; pull from input stream&#39; scheme or am I missing something blindingly obvious?"},{"owner":{"account_id":1862192,"reputation":1849,"user_id":1686575,"accept_rate":65,"display_name":"John Manko"},"score":44,"creation_date":1442083639,"post_id":5778863,"comment_id":52941889,"body_markdown":"@JBCP &#39;s comment is spot on.  Another use case is using PDFBox to build PDFs during an HTTP request.  PDFBox using an OutputStream to save a PDF object, and the REST API accepts an InputStream to reply to the client.  Hence, an OutputStream -&gt; InputStream is a very real-world use case.","body":"@JBCP &#39;s comment is spot on.  Another use case is using PDFBox to build PDFs during an HTTP request.  PDFBox using an OutputStream to save a PDF object, and the REST API accepts an InputStream to reply to the client.  Hence, an OutputStream -&gt; InputStream is a very real-world use case."},{"owner":{"account_id":6403579,"reputation":755,"user_id":4965515,"accept_rate":60,"display_name":"stackoverflowed"},"score":11,"creation_date":1586329607,"post_id":5778863,"comment_id":108085140,"body_markdown":"&quot;you can always get the full contents by calling the toByteArray() method&quot; the point of using streams is to not load the whole content into memory!!","body":"&quot;you can always get the full contents by calling the toByteArray() method&quot; the point of using streams is to not load the whole content into memory!!"},{"owner":{"account_id":1617696,"reputation":2210,"user_id":1673861,"accept_rate":65,"display_name":"L. Blanc"},"score":5,"creation_date":1594919900,"post_id":5778863,"comment_id":111303057,"body_markdown":"&quot;It does not make sense to go the other way...&quot; Unless you&#39;re trying to write objects to a GCP or AWS bucket. Both of their APIs require input streams for the WRITE operation, presumably so they have complete control over the data transfer. This makes plugging them into code that was written for the file system difficult.","body":"&quot;It does not make sense to go the other way...&quot; Unless you&#39;re trying to write objects to a GCP or AWS bucket. Both of their APIs require input streams for the WRITE operation, presumably so they have complete control over the data transfer. This makes plugging them into code that was written for the file system difficult."},{"owner":{"account_id":416701,"reputation":4306,"user_id":792238,"accept_rate":87,"display_name":"Siddhartha"},"score":0,"creation_date":1629865727,"post_id":5778863,"comment_id":121796381,"body_markdown":"@L.Blanc, yes, the s3 putObject API expects an InputStream: `putObject(String var1, String var2, InputStream var3, ObjectMetadata var4)`","body":"@L.Blanc, yes, the s3 putObject API expects an InputStream: <code>putObject(String var1, String var2, InputStream var3, ObjectMetadata var4)</code>"},{"owner":{"account_id":251709,"reputation":2827,"user_id":529286,"accept_rate":84,"display_name":"zakmck"},"score":1,"creation_date":1656345894,"post_id":5778863,"comment_id":128543809,"body_markdown":"This is totally wrong. The OP asked the OS-&gt;IS direction and that makes perfectly sense when you have a data processing pipeline where a step yields output for the next. Most of Unix commands work like that. To do this in Java, use easystream, which is based on stream pipes. This approach implies that one of the processes (usually the OS producer) is in the background (ie, in a thread). Even when you want to pipe an IS to an OS, you want to do it lazily (using Apache copy() or Java9 transferTo()) you don&#39;t want to waste memory by first reading the IS in a buffer. Stop programming so badly.","body":"This is totally wrong. The OP asked the OS-&gt;IS direction and that makes perfectly sense when you have a data processing pipeline where a step yields output for the next. Most of Unix commands work like that. To do this in Java, use easystream, which is based on stream pipes. This approach implies that one of the processes (usually the OS producer) is in the background (ie, in a thread). Even when you want to pipe an IS to an OS, you want to do it lazily (using Apache copy() or Java9 transferTo()) you don&#39;t want to waste memory by first reading the IS in a buffer. Stop programming so badly."},{"owner":{"account_id":456226,"reputation":175,"user_id":854901,"accept_rate":43,"display_name":"HZhang"},"score":1,"creation_date":1657210935,"post_id":5778863,"comment_id":128762469,"body_markdown":"Why is this an accepted answer? The OP asked the other way around, which happened to be a use case that I am running into as well. As other comments mentioned, simply converting to byte array would have memory impact.","body":"Why is this an accepted answer? The OP asked the other way around, which happened to be a use case that I am running into as well. As other comments mentioned, simply converting to byte array would have memory impact."}],"tags":[],"owner":{"account_id":152811,"reputation":3137,"user_id":367591,"accept_rate":62,"display_name":"Java Drinker"},"comment_count":12,"down_vote_count":25,"up_vote_count":145,"is_accepted":true,"score":120,"last_activity_date":1522267215,"creation_date":1303738611,"answer_id":5778863,"question_id":5778658,"body_markdown":"An `OutputStream` is one where you write data to. If some module exposes an `OutputStream`, the expectation is that there is something reading at the other end.\r\n\r\nSomething that exposes an `InputStream`, on the other hand, is indicating that you will need to listen to this stream, and there will be data that you can read. \r\n\r\nSo it is possible to connect an `InputStream` to an `OutputStream`\r\n\r\n`InputStream----read---&gt; intermediateBytes[n] ----write----&gt; OutputStream`\r\n\r\nAs someone metioned, this is what the `copy()` method from [IOUtils][1] lets you do. It does not make sense to go the other way... hopefully this makes some sense\r\n\r\n**UPDATE:**\r\n\r\nOf course the more I think of this, the more I can see how this actually would be a requirement. I know some of the comments mentioned `Piped` input/ouput streams, but there is another possibility.\r\n\r\nIf the output stream that is exposed is a `ByteArrayOutputStream`, then you can always get the full contents by calling the `toByteArray()` method. Then you can create an input stream wrapper by using the `ByteArrayInputStream` sub-class. These two are pseudo-streams, they both basically just wrap an array of bytes. Using the streams this way, therefore, is technically possible, but to me it is still very strange...\r\n\r\n\r\n  [1]: http://commons.apache.org/proper/commons-io/javadocs/api-2.5/org/apache/commons/io/IOUtils.html","title":"How do I convert an OutputStream to an InputStream?","body":"<p>An <code>OutputStream</code> is one where you write data to. If some module exposes an <code>OutputStream</code>, the expectation is that there is something reading at the other end.</p>\n\n<p>Something that exposes an <code>InputStream</code>, on the other hand, is indicating that you will need to listen to this stream, and there will be data that you can read. </p>\n\n<p>So it is possible to connect an <code>InputStream</code> to an <code>OutputStream</code></p>\n\n<p><code>InputStream----read---&gt; intermediateBytes[n] ----write----&gt; OutputStream</code></p>\n\n<p>As someone metioned, this is what the <code>copy()</code> method from <a href=\"http://commons.apache.org/proper/commons-io/javadocs/api-2.5/org/apache/commons/io/IOUtils.html\" rel=\"noreferrer\">IOUtils</a> lets you do. It does not make sense to go the other way... hopefully this makes some sense</p>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>Of course the more I think of this, the more I can see how this actually would be a requirement. I know some of the comments mentioned <code>Piped</code> input/ouput streams, but there is another possibility.</p>\n\n<p>If the output stream that is exposed is a <code>ByteArrayOutputStream</code>, then you can always get the full contents by calling the <code>toByteArray()</code> method. Then you can create an input stream wrapper by using the <code>ByteArrayInputStream</code> sub-class. These two are pseudo-streams, they both basically just wrap an array of bytes. Using the streams this way, therefore, is technically possible, but to me it is still very strange...</p>\n"},{"comments":[{"owner":{"account_id":137246,"reputation":1933,"user_id":341307,"accept_rate":75,"display_name":"Hui Wang"},"score":1,"creation_date":1460039117,"post_id":10768914,"comment_id":60568317,"body_markdown":"thanks @mckamey, the method based on Circular Buffers is exactly what i need !","body":"thanks @mckamey, the method based on Circular Buffers is exactly what i need !"}],"tags":[],"owner":{"account_id":18732,"reputation":17409,"user_id":43217,"accept_rate":82,"display_name":"mckamey"},"comment_count":1,"down_vote_count":2,"up_vote_count":21,"is_accepted":false,"score":19,"last_activity_date":1442573240,"creation_date":1338058380,"answer_id":10768914,"question_id":5778658,"body_markdown":"You will need an intermediate class which will buffer between. Each time `InputStream.read(byte[]...)` is called, the buffering class will fill the passed in byte array with the next chunk passed in from `OutputStream.write(byte[]...)`. Since the sizes of the chunks may not be the same, the adapter class will need to store a certain amount until it has enough to fill the read buffer and/or be able to store up any buffer overflow.\r\n\r\nThis article has a nice breakdown of a few different approaches to this problem:\r\n\r\nhttp://blog.ostermiller.org/convert-java-outputstream-inputstream\r\n","title":"How do I convert an OutputStream to an InputStream?","body":"<p>You will need an intermediate class which will buffer between. Each time <code>InputStream.read(byte[]...)</code> is called, the buffering class will fill the passed in byte array with the next chunk passed in from <code>OutputStream.write(byte[]...)</code>. Since the sizes of the chunks may not be the same, the adapter class will need to store a certain amount until it has enough to fill the read buffer and/or be able to store up any buffer overflow.</p>\n\n<p>This article has a nice breakdown of a few different approaches to this problem:</p>\n\n<p><a href=\"http://blog.ostermiller.org/convert-java-outputstream-inputstream\" rel=\"noreferrer\">http://blog.ostermiller.org/convert-java-outputstream-inputstream</a></p>\n"},{"comments":[{"owner":{"account_id":3038516,"reputation":1744,"user_id":2576076,"display_name":"vr3C"},"score":1,"creation_date":1442983773,"post_id":16973800,"comment_id":53303994,"body_markdown":"Yes!, use easystream!","body":"Yes!, use easystream!"}],"tags":[],"owner":{"account_id":467725,"reputation":19389,"user_id":873282,"accept_rate":55,"display_name":"koppor"},"comment_count":1,"down_vote_count":2,"up_vote_count":21,"is_accepted":false,"score":19,"last_activity_date":1597640272,"creation_date":1370560755,"answer_id":16973800,"question_id":5778658,"body_markdown":"The [easystream](http://io-tools.sourceforge.net/easystream/index.html) open source library has direct support to convert an OutputStream to an InputStream: http://io-tools.sourceforge.net/easystream/tutorial/tutorial.html\r\n\r\n```java\r\n// create conversion\r\nfinal OutputStreamToInputStream&lt;Void&gt; out = new OutputStreamToInputStream&lt;Void&gt;() {\r\n    @Override\r\n    protected Void doRead(final InputStream in) throws Exception {\r\n           LibraryClass2.processDataFromInputStream(in);\r\n           return null;\r\n        }\r\n    };\r\ntry {   \r\n     LibraryClass1.writeDataToTheOutputStream(out);\r\n} finally {\r\n     // don&#39;t miss the close (or a thread would not terminate correctly).\r\n     out.close();\r\n}\r\n```\r\n\r\nThey also list other options: http://io-tools.sourceforge.net/easystream/outputstream_to_inputstream/implementations.html\r\n\r\n* Write the data the data into a memory buffer (ByteArrayOutputStream) get the byteArray and read it again with a ByteArrayInputStream. This is the best approach if you&#39;re sure your data fits into memory.\r\n* Copy your data to a temporary file and read it back.\r\n* Use pipes: this is the best approach both for memory usage and speed (you can take full advantage of the multi-core processors) and also the standard solution offered by Sun.\r\n* Use InputStreamFromOutputStream and OutputStreamToInputStream from the easystream library.","title":"How do I convert an OutputStream to an InputStream?","body":"<p>The <a href=\"http://io-tools.sourceforge.net/easystream/index.html\" rel=\"nofollow noreferrer\">easystream</a> open source library has direct support to convert an OutputStream to an InputStream: <a href=\"http://io-tools.sourceforge.net/easystream/tutorial/tutorial.html\" rel=\"nofollow noreferrer\">http://io-tools.sourceforge.net/easystream/tutorial/tutorial.html</a></p>\n<pre class=\"lang-java prettyprint-override\"><code>// create conversion\nfinal OutputStreamToInputStream&lt;Void&gt; out = new OutputStreamToInputStream&lt;Void&gt;() {\n    @Override\n    protected Void doRead(final InputStream in) throws Exception {\n           LibraryClass2.processDataFromInputStream(in);\n           return null;\n        }\n    };\ntry {   \n     LibraryClass1.writeDataToTheOutputStream(out);\n} finally {\n     // don't miss the close (or a thread would not terminate correctly).\n     out.close();\n}\n</code></pre>\n<p>They also list other options: <a href=\"http://io-tools.sourceforge.net/easystream/outputstream_to_inputstream/implementations.html\" rel=\"nofollow noreferrer\">http://io-tools.sourceforge.net/easystream/outputstream_to_inputstream/implementations.html</a></p>\n<ul>\n<li>Write the data the data into a memory buffer (ByteArrayOutputStream) get the byteArray and read it again with a ByteArrayInputStream. This is the best approach if you're sure your data fits into memory.</li>\n<li>Copy your data to a temporary file and read it back.</li>\n<li>Use pipes: this is the best approach both for memory usage and speed (you can take full advantage of the multi-core processors) and also the standard solution offered by Sun.</li>\n<li>Use InputStreamFromOutputStream and OutputStreamToInputStream from the easystream library.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":1587590,"reputation":3668,"user_id":1471588,"display_name":"Michael Wyraz"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1381524511,"creation_date":1381524511,"answer_id":19326998,"question_id":5778658,"body_markdown":"If you want to make an OutputStream from an InputStream there is one basic problem. A method writing to an OutputStream blocks until it is done. So the result is available when the writing method is finished. This has 2 consequences:\r\n\r\n1. If you use only one thread, you need to wait until everything is written (so you need to store the stream&#39;s data in memory or disk).\r\n2. If you want to access the data before it is finished, you need a second thread.\r\n\r\n\r\nVariant 1 can be implemented using byte arrays or filed.\r\nVariant 1 can be implemented using pipies (either directly or with extra abstraction - e.g. RingBuffer or the google lib from the other comment).\r\n\r\nIndeed with standard java there is no other way to solve the problem. Each solution is an implementataion of one of these.\r\n\r\nThere is one concept called &quot;continuation&quot; (see [wikipedia][1] for details). In this case basically this means:\r\n\r\n- there is a special output stream that expects a certain amount of data\r\n- if the ammount is reached, the stream gives control to it&#39;s counterpart which is a special input stream\r\n- the input stream makes the amount of data available until it is read, after that, it passes back the control to the output stream\r\n\r\nWhile some languages have this concept built in, for java you need some &quot;magic&quot;. For example &quot;commons-javaflow&quot; from apache implements such for java. The disadvantage is that this requires some special bytecode modifications at build time. So it would make sense to put all the stuff in an extra library whith custom build scripts.\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Continuation","title":"How do I convert an OutputStream to an InputStream?","body":"<p>If you want to make an OutputStream from an InputStream there is one basic problem. A method writing to an OutputStream blocks until it is done. So the result is available when the writing method is finished. This has 2 consequences:</p>\n\n<ol>\n<li>If you use only one thread, you need to wait until everything is written (so you need to store the stream's data in memory or disk).</li>\n<li>If you want to access the data before it is finished, you need a second thread.</li>\n</ol>\n\n<p>Variant 1 can be implemented using byte arrays or filed.\nVariant 1 can be implemented using pipies (either directly or with extra abstraction - e.g. RingBuffer or the google lib from the other comment).</p>\n\n<p>Indeed with standard java there is no other way to solve the problem. Each solution is an implementataion of one of these.</p>\n\n<p>There is one concept called \"continuation\" (see <a href=\"http://en.wikipedia.org/wiki/Continuation\" rel=\"nofollow\">wikipedia</a> for details). In this case basically this means:</p>\n\n<ul>\n<li>there is a special output stream that expects a certain amount of data</li>\n<li>if the ammount is reached, the stream gives control to it's counterpart which is a special input stream</li>\n<li>the input stream makes the amount of data available until it is read, after that, it passes back the control to the output stream</li>\n</ul>\n\n<p>While some languages have this concept built in, for java you need some \"magic\". For example \"commons-javaflow\" from apache implements such for java. The disadvantage is that this requires some special bytecode modifications at build time. So it would make sense to put all the stuff in an extra library whith custom build scripts.</p>\n"},{"comments":[{"owner":{"account_id":1744358,"reputation":587,"user_id":1594895,"accept_rate":75,"display_name":"user1594895"},"score":1,"creation_date":1412860286,"post_id":19377148,"comment_id":41230600,"body_markdown":"to String --&gt; size problem","body":"to String --&gt; size problem"},{"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"score":0,"creation_date":1473202986,"post_id":19377148,"comment_id":66047707,"body_markdown":"Besides, calling `toString().getBytes()` on a stream *will not return the contents of the stream.","body":"Besides, calling <code>toString().getBytes()</code> on a stream *will not return the contents of the stream."}],"tags":[],"owner":{"account_id":3209691,"reputation":3,"user_id":2709915,"display_name":"Manu"},"comment_count":2,"down_vote_count":4,"up_vote_count":1,"is_accepted":false,"score":-3,"last_activity_date":1694805601,"creation_date":1381827662,"answer_id":19377148,"question_id":5778658,"body_markdown":"Updated post:\r\n\r\nEssentially these are the basic 3 steps what we have to do:\r\n\r\n        // Sample data\r\n        String data = &quot;Foo! Bar!!&quot;;\r\n\r\n        // 1. Write the data to a ByteArrayOutputStream\r\n        ByteArrayOutputStream baos = new ByteArrayOutputStream();\r\n        try (OutputStream os = baos) {\r\n            os.write(data.getBytes());\r\n        }\r\n\r\n        // 2. Convert the ByteArrayOutputStream to a byte array\r\n        byte[] bytes = baos.toByteArray();\r\n\r\n        // 3. Use the byte array to create a ByteArrayInputStream\r\n        try (InputStream is = new ByteArrayInputStream(bytes)) {\r\n            int byteRead;\r\n            while ((byteRead = is.read()) != -1) {\r\n                System.out.print((char) byteRead);\r\n            }\r\n        }\r\n\r\nNOTE: This approach is simple and effective for in-memory operations. However, be cautious about memory consumption if you&#39;re dealing with large amounts of data, since the entire data will be kept in memory twice (once in the ByteArrayOutputStream and once in the byte array). If you&#39;re handling large streams, you might want to consider using a temporary file or another mechanism that doesn&#39;t rely on keeping everything in memory.","title":"How do I convert an OutputStream to an InputStream?","body":"<p>Updated post:</p>\n<p>Essentially these are the basic 3 steps what we have to do:</p>\n<pre><code>    // Sample data\n    String data = &quot;Foo! Bar!!&quot;;\n\n    // 1. Write the data to a ByteArrayOutputStream\n    ByteArrayOutputStream baos = new ByteArrayOutputStream();\n    try (OutputStream os = baos) {\n        os.write(data.getBytes());\n    }\n\n    // 2. Convert the ByteArrayOutputStream to a byte array\n    byte[] bytes = baos.toByteArray();\n\n    // 3. Use the byte array to create a ByteArrayInputStream\n    try (InputStream is = new ByteArrayInputStream(bytes)) {\n        int byteRead;\n        while ((byteRead = is.read()) != -1) {\n            System.out.print((char) byteRead);\n        }\n    }\n</code></pre>\n<p>NOTE: This approach is simple and effective for in-memory operations. However, be cautious about memory consumption if you're dealing with large amounts of data, since the entire data will be kept in memory twice (once in the ByteArrayOutputStream and once in the byte array). If you're handling large streams, you might want to consider using a temporary file or another mechanism that doesn't rely on keeping everything in memory.</p>\n"},{"comments":[{"owner":{"account_id":1772943,"reputation":1723,"user_id":1617366,"display_name":"Mitja Gustin"},"score":1,"creation_date":1544041819,"post_id":23536722,"comment_id":94139963,"body_markdown":"baos.toByteArray()  creates a copy with System.arraycopy. Thanks to @mikeho for pointing out http://developer.classpath.org/doc/java/io/ByteArrayOutputStream-source.html","body":"baos.toByteArray()  creates a copy with System.arraycopy. Thanks to @mikeho for pointing out <a href=\"http://developer.classpath.org/doc/java/io/ByteArrayOutputStream-source.html\" rel=\"nofollow noreferrer\">developer.classpath.org/doc/java/io/&hellip;</a>"}],"tags":[],"owner":{"account_id":3714183,"reputation":503,"user_id":3090788,"display_name":"BorutT"},"comment_count":1,"down_vote_count":4,"up_vote_count":50,"is_accepted":false,"score":46,"last_activity_date":1459759221,"creation_date":1399538155,"answer_id":23536722,"question_id":5778658,"body_markdown":"As input and output streams are just start and end point, the solution is to temporary store data in byte array. So you must create intermediate `ByteArrayOutputStream`, from which you create `byte[]` that is used as input for new `ByteArrayInputStream`. \r\n\r\n    public void doTwoThingsWithStream(InputStream inStream, OutputStream outStream){ \r\n      //create temporary bayte array output stream\r\n      ByteArrayOutputStream baos = new ByteArrayOutputStream();\r\n      doFirstThing(inStream, baos);\r\n      //create input stream from baos\r\n      InputStream isFromFirstData = new ByteArrayInputStream(baos.toByteArray()); \r\n      doSecondThing(isFromFirstData, outStream);\r\n    }\r\n\r\nHope it helps.","title":"How do I convert an OutputStream to an InputStream?","body":"<p>As input and output streams are just start and end point, the solution is to temporary store data in byte array. So you must create intermediate <code>ByteArrayOutputStream</code>, from which you create <code>byte[]</code> that is used as input for new <code>ByteArrayInputStream</code>. </p>\n\n<pre><code>public void doTwoThingsWithStream(InputStream inStream, OutputStream outStream){ \n  //create temporary bayte array output stream\n  ByteArrayOutputStream baos = new ByteArrayOutputStream();\n  doFirstThing(inStream, baos);\n  //create input stream from baos\n  InputStream isFromFirstData = new ByteArrayInputStream(baos.toByteArray()); \n  doSecondThing(isFromFirstData, outStream);\n}\n</code></pre>\n\n<p>Hope it helps.</p>\n"},{"comments":[{"owner":{"account_id":1862192,"reputation":1849,"user_id":1686575,"accept_rate":65,"display_name":"John Manko"},"score":28,"creation_date":1442120857,"post_id":23874232,"comment_id":52949591,"body_markdown":"I voted this up, but it&#39;s better to pass `out` to `in`&#39;s constructor, otherwise you might get a closed pipe exception on `in` due to race condition (which I experienced).  Using Java 8 Lambdas: `PipedInputStream in = new PipedInputStream(out); ((Runnable)() -&gt; {originalOutputStream.writeTo(out);}).run();\n return in;`","body":"I voted this up, but it&#39;s better to pass <code>out</code> to <code>in</code>&#39;s constructor, otherwise you might get a closed pipe exception on <code>in</code> due to race condition (which I experienced).  Using Java 8 Lambdas: <code>PipedInputStream in = new PipedInputStream(out); ((Runnable)() -&gt; {originalOutputStream.writeTo(out);}).run();  return in;</code>"},{"owner":{"account_id":1922510,"reputation":6870,"user_id":1733644,"display_name":"mikeho"},"score":1,"creation_date":1442252153,"post_id":23874232,"comment_id":52996465,"body_markdown":"@JohnManko hmm... I&#39;ve never had that problem. Did you experience this because another thread or the main thread is calling out.close() ? It&#39;s true that this code assumes that your PipedOutputStream is longer-lived than your ```originalOutputStream``` which should be true, but it doesn&#39;t assume how you control your streams. That is left up to the developer. There&#39;s nothing in this code that would cause a closed or broken pipe exception.","body":"@JohnManko hmm... I&#39;ve never had that problem. Did you experience this because another thread or the main thread is calling out.close() ? It&#39;s true that this code assumes that your PipedOutputStream is longer-lived than your <code>originalOutputStream</code> which should be true, but it doesn&#39;t assume how you control your streams. That is left up to the developer. There&#39;s nothing in this code that would cause a closed or broken pipe exception."},{"owner":{"account_id":1862192,"reputation":1849,"user_id":1686575,"accept_rate":65,"display_name":"John Manko"},"score":3,"creation_date":1442265159,"post_id":23874232,"comment_id":53003102,"body_markdown":"No, my case stems from when I store PDFs in Mongo GridFS, and then stream to the client using Jax-RS.  MongoDB supplies an OutputStream, but Jax-RS requires an InputStream. My path method would return to the container with an InputStream before the OutputStream was fully established, it seems (perhaps the buffer hadn&#39;t been cached yet).  Anyway, Jax-RS would throw of pipe closed exception on the InputStream.  Odd, but that&#39;s what happened half the time.  Changing to the code above prevents that.","body":"No, my case stems from when I store PDFs in Mongo GridFS, and then stream to the client using Jax-RS.  MongoDB supplies an OutputStream, but Jax-RS requires an InputStream. My path method would return to the container with an InputStream before the OutputStream was fully established, it seems (perhaps the buffer hadn&#39;t been cached yet).  Anyway, Jax-RS would throw of pipe closed exception on the InputStream.  Odd, but that&#39;s what happened half the time.  Changing to the code above prevents that."},{"owner":{"account_id":1922510,"reputation":6870,"user_id":1733644,"display_name":"mikeho"},"score":4,"creation_date":1442335458,"post_id":23874232,"comment_id":53036517,"body_markdown":"@JohnManko I was looking into this more and I saw from the ```PipedInputStream``` Javadocs: *A pipe is said to be broken if a thread that was providing data bytes to the connected piped output stream is no longer alive.* So what I&#39;m suspecting is that if you&#39;re using the example above, the thread is completing before ```Jax-RS``` is consuming the input stream. At the same time, I looked at the **MongoDB** Javadocs. ```GridFSDBFile``` has an input stream, so why not just pass that to **Jax-RS**?","body":"@JohnManko I was looking into this more and I saw from the <code>PipedInputStream</code> Javadocs: <i>A pipe is said to be broken if a thread that was providing data bytes to the connected piped output stream is no longer alive.</i> So what I&#39;m suspecting is that if you&#39;re using the example above, the thread is completing before <code>Jax-RS</code> is consuming the input stream. At the same time, I looked at the <b>MongoDB</b> Javadocs. <code>GridFSDBFile</code> has an input stream, so why not just pass that to <b>Jax-RS</b>?"},{"owner":{"account_id":1922510,"reputation":6870,"user_id":1733644,"display_name":"mikeho"},"score":2,"creation_date":1442335651,"post_id":23874232,"comment_id":53036620,"body_markdown":"@JohnManko At the same time, the order of the initialization shouldn&#39;t really matter, so I will update the answer to clarify that point. My other comment was intended to find the root cause of your problem, because the initialization order really shouldn&#39;t matter. (I know that it works for you. That suggest to me that there&#39;s a timing problem between the input stream and the output stream. As your system takes on more load or other factors, those timings will change and you may run into the problem again. Flipping the initialization shouldn&#39;t be a real fix — from what the Javadocs tell me.)","body":"@JohnManko At the same time, the order of the initialization shouldn&#39;t really matter, so I will update the answer to clarify that point. My other comment was intended to find the root cause of your problem, because the initialization order really shouldn&#39;t matter. (I know that it works for you. That suggest to me that there&#39;s a timing problem between the input stream and the output stream. As your system takes on more load or other factors, those timings will change and you may run into the problem again. Flipping the initialization shouldn&#39;t be a real fix — from what the Javadocs tell me.)"},{"owner":{"account_id":17795,"reputation":24571,"user_id":40214,"accept_rate":79,"display_name":"Dennis C"},"score":0,"creation_date":1469596464,"post_id":23874232,"comment_id":64595537,"body_markdown":"There is additional consumption of memory, because of the extra heap for new Thread","body":"There is additional consumption of memory, because of the extra heap for new Thread"},{"owner":{"account_id":1922510,"reputation":6870,"user_id":1733644,"display_name":"mikeho"},"score":4,"creation_date":1469645618,"post_id":23874232,"comment_id":64627819,"body_markdown":"@DennisCheung yeah, of course. Nothing&#39;s free, but it&#39;s certainly going to be smaller than a 15MB copy. Optimizations would include using a thread pool instead to reduce the GC churn with constant thread/object creation.","body":"@DennisCheung yeah, of course. Nothing&#39;s free, but it&#39;s certainly going to be smaller than a 15MB copy. Optimizations would include using a thread pool instead to reduce the GC churn with constant thread/object creation."},{"owner":{"account_id":1772943,"reputation":1723,"user_id":1617366,"display_name":"Mitja Gustin"},"score":0,"creation_date":1543945609,"post_id":23874232,"comment_id":94097722,"body_markdown":"Why not just  InputStream is = new ByteArrayInputStream(myOut.toByteArray())  ? This does not create a copy, rather a pointer I believe. Yours method spawns a thread to do the copy, even if you &quot;hide&quot; it with lambdas.","body":"Why not just  InputStream is = new ByteArrayInputStream(myOut.toByteArray())  ? This does not create a copy, rather a pointer I believe. Yours method spawns a thread to do the copy, even if you &quot;hide&quot; it with lambdas."},{"owner":{"account_id":1922510,"reputation":6870,"user_id":1733644,"display_name":"mikeho"},"score":2,"creation_date":1544037286,"post_id":23874232,"comment_id":94138030,"body_markdown":"@MitjaGustin It does use a new thread, but threads are relatively expensive, compared to memory. Most programs are memory-constrained, not CPU-constrained, especially if you are dealing with large amounts of data. If you look at the source code (http://developer.classpath.org/doc/java/io/ByteArrayOutputStream-source.html), you&#39;ll see that toByteArray() does indeed make a copy of the output stream&#39;s buffer. Also, toByteArray() only exists for ByteArrayOutputStream, not for other types of OutputStream (http://developer.classpath.org/doc/java/io/OutputStream.html). I just used BAOS as an example.","body":"@MitjaGustin It does use a new thread, but threads are relatively expensive, compared to memory. Most programs are memory-constrained, not CPU-constrained, especially if you are dealing with large amounts of data. If you look at the source code (<a href=\"http://developer.classpath.org/doc/java/io/ByteArrayOutputStream-source.html\" rel=\"nofollow noreferrer\">developer.classpath.org/doc/java/io/&hellip;</a>), you&#39;ll see that toByteArray() does indeed make a copy of the output stream&#39;s buffer. Also, toByteArray() only exists for ByteArrayOutputStream, not for other types of OutputStream (<a href=\"http://developer.classpath.org/doc/java/io/OutputStream.html\" rel=\"nofollow noreferrer\">developer.classpath.org/doc/java/io/OutputStream.html</a>). I just used BAOS as an example."},{"owner":{"account_id":1922510,"reputation":6870,"user_id":1733644,"display_name":"mikeho"},"score":0,"creation_date":1544037522,"post_id":23874232,"comment_id":94138116,"body_markdown":"@MitjaGustin The thread also gives more flexibility. My example runs instantaneously, so the data is immediately available to the InputStream, but you can execute the thread whenever you want, in case you need the OutputStream data for something else. If you&#39;re using an OutputStream other than BAOS, you would need to modify your run loop to use the write() methods of the OutputStream parent class.","body":"@MitjaGustin The thread also gives more flexibility. My example runs instantaneously, so the data is immediately available to the InputStream, but you can execute the thread whenever you want, in case you need the OutputStream data for something else. If you&#39;re using an OutputStream other than BAOS, you would need to modify your run loop to use the write() methods of the OutputStream parent class."},{"owner":{"account_id":5384013,"reputation":6035,"user_id":4288506,"accept_rate":77,"display_name":"Marcono1234"},"score":0,"creation_date":1555597164,"post_id":23874232,"comment_id":98172896,"body_markdown":"@mikeho doesn&#39;t the writing thread have to close `out` once it has finished? Otherwise the pipe will be considered broken when trying to read after the writing thread died.","body":"@mikeho doesn&#39;t the writing thread have to close <code>out</code> once it has finished? Otherwise the pipe will be considered broken when trying to read after the writing thread died."},{"owner":{"account_id":1922510,"reputation":6870,"user_id":1733644,"display_name":"mikeho"},"score":0,"creation_date":1555689677,"post_id":23874232,"comment_id":98203623,"body_markdown":"@Marcono1234 I didn&#39;t close it in the example is because you want to close the OutputStream as close to the original creation. You don&#39;t know how else it will be used, so you cannot assume that it may not be used elsewhere. Also, separating the creation and the closing of a stream in different places is a multi-threaded nightmare for debugging, so you don&#39;t want to do that. For completeness, you could have a ThreadExecutor and serialize this copy and the close into two different executions, but it&#39;s outside the scope of this example.","body":"@Marcono1234 I didn&#39;t close it in the example is because you want to close the OutputStream as close to the original creation. You don&#39;t know how else it will be used, so you cannot assume that it may not be used elsewhere. Also, separating the creation and the closing of a stream in different places is a multi-threaded nightmare for debugging, so you don&#39;t want to do that. For completeness, you could have a ThreadExecutor and serialize this copy and the close into two different executions, but it&#39;s outside the scope of this example."},{"owner":{"account_id":1922510,"reputation":6870,"user_id":1733644,"display_name":"mikeho"},"score":1,"creation_date":1555689944,"post_id":23874232,"comment_id":98203716,"body_markdown":"I just reread my comment from 12/5. I meant that &quot;threads are relatively **inexpensive**&quot;, not expensive!","body":"I just reread my comment from 12/5. I meant that &quot;threads are relatively <b>inexpensive</b>&quot;, not expensive!"},{"owner":{"account_id":5384013,"reputation":6035,"user_id":4288506,"accept_rate":77,"display_name":"Marcono1234"},"score":0,"creation_date":1555712272,"post_id":23874232,"comment_id":98211019,"body_markdown":"@mikeho, but you cannot close `out` where it was created. You have in that thread no information about when writing finished (unless you wait for the reading thread or use executors and futures). Could you please at least mention that closing `out` is really important? Failing to do this results in a broken pipe exception on the reader side (or infinite blocking).","body":"@mikeho, but you cannot close <code>out</code> where it was created. You have in that thread no information about when writing finished (unless you wait for the reading thread or use executors and futures). Could you please at least mention that closing <code>out</code> is really important? Failing to do this results in a broken pipe exception on the reader side (or infinite blocking)."},{"owner":{"account_id":1922510,"reputation":6870,"user_id":1733644,"display_name":"mikeho"},"score":0,"creation_date":1555807534,"post_id":23874232,"comment_id":98229559,"body_markdown":"@Marcono1234 yeah, I can do that. Executors and futures are exactly what I&#39;m referring to in my comment but I&#39;ll edit it","body":"@Marcono1234 yeah, I can do that. Executors and futures are exactly what I&#39;m referring to in my comment but I&#39;ll edit it"},{"owner":{"account_id":5384013,"reputation":6035,"user_id":4288506,"accept_rate":77,"display_name":"Marcono1234"},"score":1,"creation_date":1555961414,"post_id":23874232,"comment_id":98268917,"body_markdown":"@mikeho, oh I think you misunderstood me. Closing the ByteArrayOutputStream is not what I meant (it also has not effect). I meant closing `out` (the PipedOutputStream), see for example https://stackoverflow.com/a/29725367","body":"@mikeho, oh I think you misunderstood me. Closing the ByteArrayOutputStream is not what I meant (it also has not effect). I meant closing <code>out</code> (the PipedOutputStream), see for example <a href=\"https://stackoverflow.com/a/29725367\">stackoverflow.com/a/29725367</a>"},{"owner":{"account_id":1922510,"reputation":6870,"user_id":1733644,"display_name":"mikeho"},"score":0,"creation_date":1555966377,"post_id":23874232,"comment_id":98270705,"body_markdown":"@Marcono1234 Okay, I fixed it. Sorry, I haven&#39;t looked at this code in 5 years.","body":"@Marcono1234 Okay, I fixed it. Sorry, I haven&#39;t looked at this code in 5 years."},{"owner":{"account_id":2668517,"reputation":1125,"user_id":2306363,"accept_rate":93,"display_name":"Elektropepi"},"score":6,"creation_date":1598532463,"post_id":23874232,"comment_id":112493594,"body_markdown":"Keep in mind that PipedInputStream and PipedOutputStream need to be both in a separate thread, otherwise a deadlock can occur after a certain size (see Java doc: https://docs.oracle.com/javase/7/docs/api/java/io/PipedInputStream.html)","body":"Keep in mind that PipedInputStream and PipedOutputStream need to be both in a separate thread, otherwise a deadlock can occur after a certain size (see Java doc: <a href=\"https://docs.oracle.com/javase/7/docs/api/java/io/PipedInputStream.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/7/docs/api/java/io/PipedInputStream.h&zwnj;&#8203;tml</a>)"},{"owner":{"account_id":1922510,"reputation":6870,"user_id":1733644,"display_name":"mikeho"},"score":1,"creation_date":1598546328,"post_id":23874232,"comment_id":112501257,"body_markdown":"@Elektropepi right! Good to call that out. The example I gave simply prepares the InputStream for consumption and does so in its own thread as to not block the main thread.","body":"@Elektropepi right! Good to call that out. The example I gave simply prepares the InputStream for consumption and does so in its own thread as to not block the main thread."},{"owner":{"account_id":7236580,"reputation":16360,"user_id":5521607,"accept_rate":25,"display_name":"Olivier Boiss&#233;"},"score":0,"creation_date":1634831522,"post_id":23874232,"comment_id":123138235,"body_markdown":"why do you create a thread to call `originalByteArrayOutputStream.writeTo` ?","body":"why do you create a thread to call <code>originalByteArrayOutputStream.writeTo</code> ?"},{"owner":{"account_id":1922510,"reputation":6870,"user_id":1733644,"display_name":"mikeho"},"score":1,"creation_date":1634919203,"post_id":23874232,"comment_id":123164984,"body_markdown":"@olivier boiss&#233;, because you may need to read and write the data simultaneously. The consumer of the input stream shouldn&#39;t have to care about where the data comes from, so you don&#39;t want the consumer to manage the outputstream. This also guarantees that the current thread won&#39;t deadlock waiting for input because the same thread cannot write to the output—something that will happen if you have both input and output on the same thread.","body":"@olivier boiss&#233;, because you may need to read and write the data simultaneously. The consumer of the input stream shouldn&#39;t have to care about where the data comes from, so you don&#39;t want the consumer to manage the outputstream. This also guarantees that the current thread won&#39;t deadlock waiting for input because the same thread cannot write to the output—something that will happen if you have both input and output on the same thread."},{"owner":{"account_id":7236580,"reputation":16360,"user_id":5521607,"accept_rate":25,"display_name":"Olivier Boiss&#233;"},"score":0,"creation_date":1634928826,"post_id":23874232,"comment_id":123168141,"body_markdown":"thanks for the answer. I think you can remove the `finally` block in your code and use a *try-with-resources* `try (out) {`","body":"thanks for the answer. I think you can remove the <code>finally</code> block in your code and use a <i>try-with-resources</i> <code>try (out) {</code>"},{"owner":{"account_id":1922510,"reputation":6870,"user_id":1733644,"display_name":"mikeho"},"score":0,"creation_date":1635029452,"post_id":23874232,"comment_id":123187034,"body_markdown":"Yes, I should update the example sometime. When I first wrote up this answer 7 (!!) years ago, try-with-resources didn’t exist.","body":"Yes, I should update the example sometime. When I first wrote up this answer 7 (!!) years ago, try-with-resources didn’t exist."},{"owner":{"account_id":251709,"reputation":2827,"user_id":529286,"accept_rate":84,"display_name":"zakmck"},"score":0,"creation_date":1656345706,"post_id":23874232,"comment_id":128543747,"body_markdown":"yes, this is what the OP actually wants, not naive reading-in-memory-then-writing, and there is easystreams already doing that (https://stackoverflow.com/a/16973800/529286).","body":"yes, this is what the OP actually wants, not naive reading-in-memory-then-writing, and there is easystreams already doing that (<a href=\"https://stackoverflow.com/a/16973800/529286\">stackoverflow.com/a/16973800/529286</a>)."},{"owner":{"account_id":1922510,"reputation":6870,"user_id":1733644,"display_name":"mikeho"},"score":0,"creation_date":1656476860,"post_id":23874232,"comment_id":128578965,"body_markdown":"@zakmck true, but why add more libraries if you can do it natively? The solution I propose doesn&#39;t read into memory until it requires output, so you&#39;re not preloading anything and wasting space.","body":"@zakmck true, but why add more libraries if you can do it natively? The solution I propose doesn&#39;t read into memory until it requires output, so you&#39;re not preloading anything and wasting space."},{"owner":{"account_id":251709,"reputation":2827,"user_id":529286,"accept_rate":84,"display_name":"zakmck"},"score":0,"creation_date":1656529943,"post_id":23874232,"comment_id":128598253,"body_markdown":"@mikeho, 1) because &quot;natively&quot; here means you are reinventing yet another wheel, and the fact you even ask it, makes me wish to retire from what IT has become nowadays 2) yes, the solution you propose, at least doesn&#39;t waste memory as many others have proposed to do, I was highlighting that.","body":"@mikeho, 1) because &quot;natively&quot; here means you are reinventing yet another wheel, and the fact you even ask it, makes me wish to retire from what IT has become nowadays 2) yes, the solution you propose, at least doesn&#39;t waste memory as many others have proposed to do, I was highlighting that."},{"owner":{"account_id":1922510,"reputation":6870,"user_id":1733644,"display_name":"mikeho"},"score":1,"creation_date":1656690620,"post_id":23874232,"comment_id":128641526,"body_markdown":"@zakmck I appreciate your comments. I&#39;ve also been in the industry for 25+ years and what I&#39;ve seen is the opposite of you: that many libraries are abandoned and thus aren&#39;t updated to use new APIs or fix security holes. The Java SDK, on the other hand, is continually updated, so relying on a reputable source is better. Easystream was last updated in 2016. That&#39;s 6 years ago. In the meantime, Java SDK/JDK 9-18 released between 2017 and 2022. SDK 19 is coming out in September 2022.","body":"@zakmck I appreciate your comments. I&#39;ve also been in the industry for 25+ years and what I&#39;ve seen is the opposite of you: that many libraries are abandoned and thus aren&#39;t updated to use new APIs or fix security holes. The Java SDK, on the other hand, is continually updated, so relying on a reputable source is better. Easystream was last updated in 2016. That&#39;s 6 years ago. In the meantime, Java SDK/JDK 9-18 released between 2017 and 2022. SDK 19 is coming out in September 2022."},{"owner":{"account_id":251709,"reputation":2827,"user_id":529286,"accept_rate":84,"display_name":"zakmck"},"score":0,"creation_date":1657141055,"post_id":23874232,"comment_id":128742654,"body_markdown":"Apart from easystream (yes, it might be abandoned, but it still works fine and its open code is quite readable or modificabile), are you really saying you want to stick to JDK only, because other libs could be abandoned one day? Would you rewrite elephants like Guava, Spring, or, why not, your OS? Seriously? And how can you be sure JDK itself will never be abandoned? They&#39;ve already ditched many packages after version 8, causing me to waste endless hours to fix legacy code.","body":"Apart from easystream (yes, it might be abandoned, but it still works fine and its open code is quite readable or modificabile), are you really saying you want to stick to JDK only, because other libs could be abandoned one day? Would you rewrite elephants like Guava, Spring, or, why not, your OS? Seriously? And how can you be sure JDK itself will never be abandoned? They&#39;ve already ditched many packages after version 8, causing me to waste endless hours to fix legacy code."},{"owner":{"account_id":9255022,"reputation":218,"user_id":6875873,"display_name":"Alex K."},"score":0,"creation_date":1663108325,"post_id":23874232,"comment_id":130161027,"body_markdown":"Am I missing something here? **((Runnable)() -&gt; {originalOutputStream.writeTo(out);}).run();** is running in the same thread as it&#39;s called from. It has the same effect as just running **originalOutputStream.writeTo(out);** in the host thread. What does the job, is **new Thread(() -&gt; {originalOutputStream.writeTo(out);}).start();**","body":"Am I missing something here? <b>((Runnable)() -&gt; {originalOutputStream.writeTo(out);}).run();</b> is running in the same thread as it&#39;s called from. It has the same effect as just running <b>originalOutputStream.writeTo(out);</b> in the host thread. What does the job, is <b>new Thread(() -&gt; {originalOutputStream.writeTo(out);}).start();</b>"},{"owner":{"account_id":1922510,"reputation":6870,"user_id":1733644,"display_name":"mikeho"},"score":0,"creation_date":1663258578,"post_id":23874232,"comment_id":130202382,"body_markdown":"@AlexK. you&#39;re right! sorry, I&#39;ll update the answer.","body":"@AlexK. you&#39;re right! sorry, I&#39;ll update the answer."}],"tags":[],"owner":{"account_id":1922510,"reputation":6870,"user_id":1733644,"display_name":"mikeho"},"comment_count":30,"down_vote_count":0,"up_vote_count":285,"is_accepted":false,"score":285,"last_activity_date":1671775519,"creation_date":1401121241,"answer_id":23874232,"question_id":5778658,"body_markdown":"There seem to be many links and other such stuff, but no actual code using pipes. The advantage of using [`java.io.PipedInputStream`][1] and [`java.io.PipedOutputStream`][2] is that there is no additional consumption of memory. `ByteArrayOutputStream.toByteArray()` returns a copy of the original buffer, so that means that whatever you have in memory, you now have two copies of it. Then writing to an `InputStream` means you now have three copies of the data.\r\n\r\nThe code using `lambdas` (hat-tip to @John Manko from the comments):\r\n```\r\nPipedInputStream in = new PipedInputStream();\r\nfinal PipedOutputStream out = new PipedOutputStream(in);\r\n// in a background thread, write the given output stream to the\r\n// PipedOutputStream for consumption\r\nnew Thread(() -&gt; {originalOutputStream.writeTo(out);}).start();\r\n```\r\n\r\nOne thing that @John Manko noted is that in certain cases, when you don&#39;t have control of the creation of the _OutputStream_, you may end up in a situation where the creator may clean up the _OutputStream_ object prematurely. If you are getting the `ClosedPipeException`, then you should try inverting the constructors:\r\n```\r\nPipedInputStream in = new PipedInputStream(out);\r\nnew Thread(() -&gt; {originalOutputStream.writeTo(out);}).start();\r\n```\r\nNote you can invert the constructors for the examples below too.\r\n\r\nThanks also to @AlexK for correcting me with starting a `Thread` instead of just kicking off a `Runnable`.\r\n\r\n---------------------\r\n\r\nThe code using `try-with-resources`:\r\n```\r\n// take the copy of the stream and re-write it to an InputStream\r\nPipedInputStream in = new PipedInputStream();\r\n    new Thread(new Runnable() {\r\n        public void run () {\r\n            // try-with-resources here\r\n            // putting the try block outside the Thread will cause the\r\n            // PipedOutputStream resource to close before the Runnable finishes\r\n            try (final PipedOutputStream out = new PipedOutputStream(in)) {\r\n                // write the original OutputStream to the PipedOutputStream\r\n                // note that in order for the below method to work, you need\r\n                // to ensure that the data has finished writing to the\r\n                // ByteArrayOutputStream\r\n                originalByteArrayOutputStream.writeTo(out);\r\n            }\r\n            catch (IOException e) {\r\n                // logging and exception handling should go here\r\n            }\r\n        }\r\n    }).start();\r\n```\r\n\r\n--------------------------\r\n\r\nThe original code I wrote:\r\n\r\n    // take the copy of the stream and re-write it to an InputStream\r\n    PipedInputStream in = new PipedInputStream();\r\n    final PipedOutputStream out = new PipedOutputStream(in);\r\n    new Thread(new Runnable() {\r\n        public void run () {\r\n            try {\r\n                // write the original OutputStream to the PipedOutputStream\r\n                // note that in order for the below method to work, you need\r\n                // to ensure that the data has finished writing to the\r\n                // ByteArrayOutputStream\r\n                originalByteArrayOutputStream.writeTo(out);\r\n            }\r\n            catch (IOException e) {\r\n                // logging and exception handling should go here\r\n            }\r\n            finally {\r\n                // close the PipedOutputStream here because we&#39;re done writing data\r\n                // once this thread has completed its run\r\n                if (out != null) {\r\n                    // close the PipedOutputStream cleanly\r\n                    out.close();\r\n                }\r\n            }   \r\n        }\r\n    }).start();\r\n\r\nThis code assumes that the `originalByteArrayOutputStream ` is a `ByteArrayOutputStream` as it is usually the only usable output stream, unless you&#39;re writing to a file. The great thing about this is that since it&#39;s in a separate thread, it also is working in parallel, so whatever is consuming your input stream will be streaming out of your old output stream too. That is beneficial because the buffer can remain smaller and you&#39;ll have less latency and less memory usage.\r\n\r\nIf you don&#39;t have a `ByteArrayOutputStream`, then instead of using `writeTo()`, you will have to use one of the `write()` methods in the `java.io.OutputStream` class or one of the other methods available in a subclass.\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/PipedInputStream.html\r\n  [2]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/PipedOutputStream.html","title":"How do I convert an OutputStream to an InputStream?","body":"<p>There seem to be many links and other such stuff, but no actual code using pipes. The advantage of using <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/PipedInputStream.html\" rel=\"noreferrer\"><code>java.io.PipedInputStream</code></a> and <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/PipedOutputStream.html\" rel=\"noreferrer\"><code>java.io.PipedOutputStream</code></a> is that there is no additional consumption of memory. <code>ByteArrayOutputStream.toByteArray()</code> returns a copy of the original buffer, so that means that whatever you have in memory, you now have two copies of it. Then writing to an <code>InputStream</code> means you now have three copies of the data.</p>\n<p>The code using <code>lambdas</code> (hat-tip to @John Manko from the comments):</p>\n<pre><code>PipedInputStream in = new PipedInputStream();\nfinal PipedOutputStream out = new PipedOutputStream(in);\n// in a background thread, write the given output stream to the\n// PipedOutputStream for consumption\nnew Thread(() -&gt; {originalOutputStream.writeTo(out);}).start();\n</code></pre>\n<p>One thing that @John Manko noted is that in certain cases, when you don't have control of the creation of the <em>OutputStream</em>, you may end up in a situation where the creator may clean up the <em>OutputStream</em> object prematurely. If you are getting the <code>ClosedPipeException</code>, then you should try inverting the constructors:</p>\n<pre><code>PipedInputStream in = new PipedInputStream(out);\nnew Thread(() -&gt; {originalOutputStream.writeTo(out);}).start();\n</code></pre>\n<p>Note you can invert the constructors for the examples below too.</p>\n<p>Thanks also to @AlexK for correcting me with starting a <code>Thread</code> instead of just kicking off a <code>Runnable</code>.</p>\n<hr />\n<p>The code using <code>try-with-resources</code>:</p>\n<pre><code>// take the copy of the stream and re-write it to an InputStream\nPipedInputStream in = new PipedInputStream();\n    new Thread(new Runnable() {\n        public void run () {\n            // try-with-resources here\n            // putting the try block outside the Thread will cause the\n            // PipedOutputStream resource to close before the Runnable finishes\n            try (final PipedOutputStream out = new PipedOutputStream(in)) {\n                // write the original OutputStream to the PipedOutputStream\n                // note that in order for the below method to work, you need\n                // to ensure that the data has finished writing to the\n                // ByteArrayOutputStream\n                originalByteArrayOutputStream.writeTo(out);\n            }\n            catch (IOException e) {\n                // logging and exception handling should go here\n            }\n        }\n    }).start();\n</code></pre>\n<hr />\n<p>The original code I wrote:</p>\n<pre><code>// take the copy of the stream and re-write it to an InputStream\nPipedInputStream in = new PipedInputStream();\nfinal PipedOutputStream out = new PipedOutputStream(in);\nnew Thread(new Runnable() {\n    public void run () {\n        try {\n            // write the original OutputStream to the PipedOutputStream\n            // note that in order for the below method to work, you need\n            // to ensure that the data has finished writing to the\n            // ByteArrayOutputStream\n            originalByteArrayOutputStream.writeTo(out);\n        }\n        catch (IOException e) {\n            // logging and exception handling should go here\n        }\n        finally {\n            // close the PipedOutputStream here because we're done writing data\n            // once this thread has completed its run\n            if (out != null) {\n                // close the PipedOutputStream cleanly\n                out.close();\n            }\n        }   \n    }\n}).start();\n</code></pre>\n<p>This code assumes that the <code>originalByteArrayOutputStream </code> is a <code>ByteArrayOutputStream</code> as it is usually the only usable output stream, unless you're writing to a file. The great thing about this is that since it's in a separate thread, it also is working in parallel, so whatever is consuming your input stream will be streaming out of your old output stream too. That is beneficial because the buffer can remain smaller and you'll have less latency and less memory usage.</p>\n<p>If you don't have a <code>ByteArrayOutputStream</code>, then instead of using <code>writeTo()</code>, you will have to use one of the <code>write()</code> methods in the <code>java.io.OutputStream</code> class or one of the other methods available in a subclass.</p>\n"},{"comments":[{"owner":{"account_id":1181324,"reputation":5291,"user_id":1156199,"accept_rate":67,"display_name":"Vad1mo"},"score":0,"creation_date":1410772803,"post_id":25673997,"comment_id":40436789,"body_markdown":"what if the content does not fit into the buffer?","body":"what if the content does not fit into the buffer?"},{"owner":{"account_id":197685,"reputation":4628,"user_id":441907,"accept_rate":100,"display_name":"Nick Russler"},"score":1,"creation_date":1410773949,"post_id":25673997,"comment_id":40437386,"body_markdown":"Then you should not use a ByteArrayInputStream in the first place.","body":"Then you should not use a ByteArrayInputStream in the first place."},{"owner":{"account_id":1181324,"reputation":5291,"user_id":1156199,"accept_rate":67,"display_name":"Vad1mo"},"score":0,"creation_date":1410781211,"post_id":25673997,"comment_id":40441117,"body_markdown":"This solution will have all bytes in memory. For small files this will be ok but then you can also use getBytes() on ByteArrayOutput Stream","body":"This solution will have all bytes in memory. For small files this will be ok but then you can also use getBytes() on ByteArrayOutput Stream"},{"owner":{"account_id":197685,"reputation":4628,"user_id":441907,"accept_rate":100,"display_name":"Nick Russler"},"score":3,"creation_date":1410795620,"post_id":25673997,"comment_id":40449593,"body_markdown":"If you mean [toByteArray](http://docs.oracle.com/javase/7/docs/api/java/io/ByteArrayOutputStream.html#toByteArray()) this would cause the internal buffer to be copied, which would take twice as much memory as my approach. Edit: Ah i understand, for small files this works of course..","body":"If you mean <a href=\"http://docs.oracle.com/javase/7/docs/api/java/io/ByteArrayOutputStream.html#toByteArray()\" rel=\"nofollow noreferrer\">toByteArray</a> this would cause the internal buffer to be copied, which would take twice as much memory as my approach. Edit: Ah i understand, for small files this works of course.."},{"owner":{"account_id":29583,"reputation":7140,"user_id":80075,"accept_rate":100,"display_name":"Tony BenBrahim"},"score":0,"creation_date":1424198321,"post_id":25673997,"comment_id":45447386,"body_markdown":"Waste of time. ByteArrayOutputStream has a writeTo method to transfer content to another output stream","body":"Waste of time. ByteArrayOutputStream has a writeTo method to transfer content to another output stream"},{"owner":{"account_id":197685,"reputation":4628,"user_id":441907,"accept_rate":100,"display_name":"Nick Russler"},"score":2,"creation_date":1424200966,"post_id":25673997,"comment_id":45448800,"body_markdown":"@TonyBenBrahim but this **copies** the buffer, which doubles the memory usage and costs time.","body":"@TonyBenBrahim but this <b>copies</b> the buffer, which doubles the memory usage and costs time."},{"owner":{"account_id":134817,"reputation":5210,"user_id":337221,"display_name":"Christian d&#39;Heureuse"},"score":0,"creation_date":1467927592,"post_id":25673997,"comment_id":63932485,"body_markdown":"There is an error in getInputStream(). The `count` value must be passed to the constructor. The ByteArrayInputStream must be created with `new ByteArrayInputStream(this.buf, 0, this.count)`.","body":"There is an error in getInputStream(). The <code>count</code> value must be passed to the constructor. The ByteArrayInputStream must be created with <code>new ByteArrayInputStream(this.buf, 0, this.count)</code>."},{"owner":{"account_id":197685,"reputation":4628,"user_id":441907,"accept_rate":100,"display_name":"Nick Russler"},"score":0,"creation_date":1467986551,"post_id":25673997,"comment_id":63956668,"body_markdown":"@Christiand&#39;Heureuse Yes, thanks. I fixed that on github a while ago, but forgot to edit it here.","body":"@Christiand&#39;Heureuse Yes, thanks. I fixed that on github a while ago, but forgot to edit it here."},{"owner":{"account_id":5401349,"reputation":698,"user_id":8137610,"display_name":"Shuai Liu"},"score":1,"creation_date":1654831789,"post_id":25673997,"comment_id":128191026,"body_markdown":"This method suits me in the case that data buffered in memory but  not want to double it","body":"This method suits me in the case that data buffered in memory but  not want to double it"},{"owner":{"account_id":1262646,"reputation":2597,"user_id":1220560,"display_name":"morgwai"},"score":0,"creation_date":1687376914,"post_id":25673997,"comment_id":134929890,"body_markdown":"this answer, while not inherently bad, fails to mention important performance gotchas and provides paramless constructor in `ByteArrayInOutStream`, that should never be used. See [my answer](https://stackoverflow.com/a/76436035/1220560) for details.","body":"this answer, while not inherently bad, fails to mention important performance gotchas and provides paramless constructor in <code>ByteArrayInOutStream</code>, that should never be used. See <a href=\"https://stackoverflow.com/a/76436035/1220560\">my answer</a> for details."}],"tags":[],"owner":{"account_id":197685,"reputation":4628,"user_id":441907,"accept_rate":100,"display_name":"Nick Russler"},"comment_count":10,"down_vote_count":2,"up_vote_count":16,"is_accepted":false,"score":14,"last_activity_date":1467986488,"creation_date":1409860670,"answer_id":25673997,"question_id":5778658,"body_markdown":"I encountered the same problem with converting a `ByteArrayOutputStream` to a `ByteArrayInputStream` and solved it by using a derived class from `ByteArrayOutputStream` which is able to return a `ByteArrayInputStream` that is initialized with the internal buffer of the `ByteArrayOutputStream`. This way no additional memory is used and the &#39;conversion&#39; is very fast:\r\n\r\n    package info.whitebyte.utils;\r\n    import java.io.ByteArrayInputStream;\r\n    import java.io.ByteArrayOutputStream;\r\n    \r\n    /**\r\n     * This class extends the ByteArrayOutputStream by \r\n     * providing a method that returns a new ByteArrayInputStream\r\n     * which uses the internal byte array buffer. This buffer\r\n     * is not copied, so no additional memory is used. After\r\n     * creating the ByteArrayInputStream the instance of the\r\n     * ByteArrayInOutStream can not be used anymore.\r\n     * &lt;p&gt;\r\n     * The ByteArrayInputStream can be retrieved using &lt;code&gt;getInputStream()&lt;/code&gt;.\r\n     * @author Nick Russler\r\n     */\r\n    public class ByteArrayInOutStream extends ByteArrayOutputStream {\r\n        /**\r\n         * Creates a new ByteArrayInOutStream. The buffer capacity is\r\n         * initially 32 bytes, though its size increases if necessary.\r\n         */\r\n    \tpublic ByteArrayInOutStream() {\r\n    \t\tsuper();\r\n    \t}\r\n    \t\r\n        /**\r\n         * Creates a new ByteArrayInOutStream, with a buffer capacity of\r\n         * the specified size, in bytes.\r\n         *\r\n         * @param   size   the initial size.\r\n         * @exception  IllegalArgumentException if size is negative.\r\n         */\r\n    \tpublic ByteArrayInOutStream(int size) {\r\n    \t\tsuper(size);\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * Creates a new ByteArrayInputStream that uses the internal byte array buffer \r\n    \t * of this ByteArrayInOutStream instance as its buffer array. The initial value \r\n    \t * of pos is set to zero and the initial value of count is the number of bytes \r\n    \t * that can be read from the byte array. The buffer array is not copied. This \r\n    \t * instance of ByteArrayInOutStream can not be used anymore after calling this\r\n    \t * method.\r\n    \t * @return the ByteArrayInputStream instance\r\n    \t */\r\n    \tpublic ByteArrayInputStream getInputStream() {\r\n    \t\t// create new ByteArrayInputStream that respects the current count\r\n    \t\tByteArrayInputStream in = new ByteArrayInputStream(this.buf, 0, this.count);\r\n    \t\t\r\n    \t\t// set the buffer of the ByteArrayOutputStream \r\n    \t\t// to null so it can&#39;t be altered anymore\r\n    \t\tthis.buf = null;\r\n    \t\t\r\n    \t\treturn in;\r\n    \t}\r\n    }\r\n\r\nI put the stuff on github: https://github.com/nickrussler/ByteArrayInOutStream","title":"How do I convert an OutputStream to an InputStream?","body":"<p>I encountered the same problem with converting a <code>ByteArrayOutputStream</code> to a <code>ByteArrayInputStream</code> and solved it by using a derived class from <code>ByteArrayOutputStream</code> which is able to return a <code>ByteArrayInputStream</code> that is initialized with the internal buffer of the <code>ByteArrayOutputStream</code>. This way no additional memory is used and the 'conversion' is very fast:</p>\n\n<pre><code>package info.whitebyte.utils;\nimport java.io.ByteArrayInputStream;\nimport java.io.ByteArrayOutputStream;\n\n/**\n * This class extends the ByteArrayOutputStream by \n * providing a method that returns a new ByteArrayInputStream\n * which uses the internal byte array buffer. This buffer\n * is not copied, so no additional memory is used. After\n * creating the ByteArrayInputStream the instance of the\n * ByteArrayInOutStream can not be used anymore.\n * &lt;p&gt;\n * The ByteArrayInputStream can be retrieved using &lt;code&gt;getInputStream()&lt;/code&gt;.\n * @author Nick Russler\n */\npublic class ByteArrayInOutStream extends ByteArrayOutputStream {\n    /**\n     * Creates a new ByteArrayInOutStream. The buffer capacity is\n     * initially 32 bytes, though its size increases if necessary.\n     */\n    public ByteArrayInOutStream() {\n        super();\n    }\n\n    /**\n     * Creates a new ByteArrayInOutStream, with a buffer capacity of\n     * the specified size, in bytes.\n     *\n     * @param   size   the initial size.\n     * @exception  IllegalArgumentException if size is negative.\n     */\n    public ByteArrayInOutStream(int size) {\n        super(size);\n    }\n\n    /**\n     * Creates a new ByteArrayInputStream that uses the internal byte array buffer \n     * of this ByteArrayInOutStream instance as its buffer array. The initial value \n     * of pos is set to zero and the initial value of count is the number of bytes \n     * that can be read from the byte array. The buffer array is not copied. This \n     * instance of ByteArrayInOutStream can not be used anymore after calling this\n     * method.\n     * @return the ByteArrayInputStream instance\n     */\n    public ByteArrayInputStream getInputStream() {\n        // create new ByteArrayInputStream that respects the current count\n        ByteArrayInputStream in = new ByteArrayInputStream(this.buf, 0, this.count);\n\n        // set the buffer of the ByteArrayOutputStream \n        // to null so it can't be altered anymore\n        this.buf = null;\n\n        return in;\n    }\n}\n</code></pre>\n\n<p>I put the stuff on github: <a href=\"https://github.com/nickrussler/ByteArrayInOutStream\" rel=\"noreferrer\">https://github.com/nickrussler/ByteArrayInOutStream</a></p>\n"},{"comments":[{"owner":{"account_id":10199974,"reputation":1149,"user_id":7530589,"display_name":"G&#246;rkem M&#252;layim"},"score":3,"creation_date":1526729374,"post_id":41888647,"comment_id":87864303,"body_markdown":"You should not use this since `toByteArray()` method body is like this `return Arrays.copyOf(buf, count);` which returns a new array.","body":"You should not use this since <code>toByteArray()</code> method body is like this <code>return Arrays.copyOf(buf, count);</code> which returns a new array."},{"owner":{"account_id":2640300,"reputation":1317,"user_id":2284107,"accept_rate":60,"display_name":"kAmol"},"score":1,"creation_date":1608099021,"post_id":41888647,"comment_id":115475787,"body_markdown":"`java.io.FileOutputStream cannot be cast to java.io.ByteArrayOutputStream`","body":"<code>java.io.FileOutputStream cannot be cast to java.io.ByteArrayOutputStream</code>"},{"owner":{"account_id":3918931,"reputation":620,"user_id":3242022,"display_name":"downvoteit"},"score":1,"creation_date":1681370117,"post_id":41888647,"comment_id":134045935,"body_markdown":"This can fail terribly as not every OutputStream (superclass) is a ByteArrayOutputStream (child class)","body":"This can fail terribly as not every OutputStream (superclass) is a ByteArrayOutputStream (child class)"}],"tags":[],"owner":{"account_id":2735009,"reputation":4764,"user_id":2357869,"accept_rate":33,"display_name":"Vijay"},"comment_count":3,"down_vote_count":8,"up_vote_count":36,"is_accepted":false,"score":28,"last_activity_date":1485501227,"creation_date":1485501227,"answer_id":41888647,"question_id":5778658,"body_markdown":"    ByteArrayOutputStream buffer = (ByteArrayOutputStream) aOutputStream;\r\n    byte[] bytes = buffer.toByteArray();\r\n    InputStream inputStream = new ByteArrayInputStream(bytes);","title":"How do I convert an OutputStream to an InputStream?","body":"<pre><code>ByteArrayOutputStream buffer = (ByteArrayOutputStream) aOutputStream;\nbyte[] bytes = buffer.toByteArray();\nInputStream inputStream = new ByteArrayInputStream(bytes);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2771202,"reputation":147,"user_id":2385774,"display_name":"Ranjit Aneesh"},"comment_count":0,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1498028230,"creation_date":1493109020,"answer_id":43605439,"question_id":5778658,"body_markdown":"Though you cannot convert an OutputStream to an InputStream, java provides a way using PipedOutputStream and PipedInputStream that you can have data written to a  PipedOutputStream to become available through an associated PipedInputStream. &lt;br/&gt; Sometime back I faced a similar situation when dealing with third party libraries that required an InputStream instance to be passed to them instead of an OutputStream instance.&lt;br/&gt; The way I fixed this issue is to use the PipedInputStream and PipedOutputStream. &lt;br/&gt;By the way they are tricky to use and you must use multithreading to achieve what you want. I recently published an implementation on github which you can use. &lt;br/&gt;Here is the [link][1] . You can go through the wiki to understand how to use it.\r\n\r\n\r\n  [1]: https://github.com/ranjitaneesh/io/blob/master/Pipe.java","title":"How do I convert an OutputStream to an InputStream?","body":"<p>Though you cannot convert an OutputStream to an InputStream, java provides a way using PipedOutputStream and PipedInputStream that you can have data written to a  PipedOutputStream to become available through an associated PipedInputStream. <br/> Sometime back I faced a similar situation when dealing with third party libraries that required an InputStream instance to be passed to them instead of an OutputStream instance.<br/> The way I fixed this issue is to use the PipedInputStream and PipedOutputStream. <br/>By the way they are tricky to use and you must use multithreading to achieve what you want. I recently published an implementation on github which you can use. <br/>Here is the <a href=\"https://github.com/ranjitaneesh/io/blob/master/Pipe.java\" rel=\"nofollow noreferrer\">link</a> . You can go through the wiki to understand how to use it.</p>\n"},{"tags":[],"owner":{"account_id":12129802,"reputation":175,"user_id":8857216,"display_name":"Luc Vaillant"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1523382967,"creation_date":1523380564,"answer_id":49759486,"question_id":5778658,"body_markdown":"From my point of view, java.io.PipedInputStream/java.io.PipedOutputStream is the best option to considere. In some situations you may want to use ByteArrayInputStream/ByteArrayOutputStream. The problem is that you need to duplicate the buffer to convert a ByteArrayOutputStream to a ByteArrayInputStream. Also ByteArrayOutpuStream/ByteArrayInputStream are limited to 2GB. Here is an OutpuStream/InputStream implementation I wrote to bypass ByteArrayOutputStream/ByteArrayInputStream limitations (Scala code, but easily understandable for java developpers):\r\n\r\n    import java.io.{IOException, InputStream, OutputStream}\r\n    \r\n    import scala.annotation.tailrec\r\n    \r\n    /** Acts as a replacement for ByteArrayOutputStream\r\n      *\r\n      */\r\n    class HugeMemoryOutputStream(capacity: Long) extends OutputStream {\r\n      private val PAGE_SIZE: Int = 1024000\r\n      private val ALLOC_STEP: Int = 1024\r\n    \r\n      /** Pages array\r\n        *\r\n        */\r\n      private var streamBuffers: Array[Array[Byte]] = Array.empty[Array[Byte]]\r\n    \r\n      /** Allocated pages count\r\n        *\r\n        */\r\n      private var pageCount: Int = 0\r\n    \r\n      /** Allocated bytes count\r\n        *\r\n        */\r\n      private var allocatedBytes: Long = 0\r\n    \r\n      /** Current position in stream\r\n        *\r\n        */\r\n      private var position: Long = 0\r\n    \r\n      /** Stream length\r\n        *\r\n        */\r\n      private var length: Long = 0\r\n    \r\n      allocSpaceIfNeeded(capacity)\r\n    \r\n      /** Gets page count based on given length\r\n        *\r\n        * @param length   Buffer length\r\n        * @return         Page count to hold the specified amount of data\r\n        */\r\n      private def getPageCount(length: Long) = {\r\n        var pageCount = (length / PAGE_SIZE).toInt + 1\r\n    \r\n        if ((length % PAGE_SIZE) == 0) {\r\n          pageCount -= 1\r\n        }\r\n    \r\n        pageCount\r\n      }\r\n    \r\n      /** Extends pages array\r\n        *\r\n        */\r\n      private def extendPages(): Unit = {\r\n        if (streamBuffers.isEmpty) {\r\n          streamBuffers = new Array[Array[Byte]](ALLOC_STEP)\r\n        }\r\n        else {\r\n          val newStreamBuffers = new Array[Array[Byte]](streamBuffers.length + ALLOC_STEP)\r\n          Array.copy(streamBuffers, 0, newStreamBuffers, 0, streamBuffers.length)\r\n          streamBuffers = newStreamBuffers\r\n        }\r\n    \r\n        pageCount = streamBuffers.length\r\n      }\r\n    \r\n      /** Ensures buffers are bug enough to hold specified amount of data\r\n        *\r\n        * @param value  Amount of data\r\n        */\r\n      private def allocSpaceIfNeeded(value: Long): Unit = {\r\n        @tailrec\r\n        def allocSpaceIfNeededIter(value: Long): Unit = {\r\n          val currentPageCount = getPageCount(allocatedBytes)\r\n          val neededPageCount = getPageCount(value)\r\n    \r\n          if (currentPageCount &lt; neededPageCount) {\r\n            if (currentPageCount == pageCount) extendPages()\r\n    \r\n            streamBuffers(currentPageCount) = new Array[Byte](PAGE_SIZE)\r\n            allocatedBytes = (currentPageCount + 1).toLong * PAGE_SIZE\r\n    \r\n            allocSpaceIfNeededIter(value)\r\n          }\r\n        }\r\n    \r\n        if (value &lt; 0) throw new Error(&quot;AllocSpaceIfNeeded &lt; 0&quot;)\r\n        if (value &gt; 0) {\r\n          allocSpaceIfNeededIter(value)\r\n    \r\n          length = Math.max(value, length)\r\n          if (position &gt; length) position = length\r\n        }\r\n      }\r\n    \r\n      /**\r\n        * Writes the specified byte to this output stream. The general\r\n        * contract for &lt;code&gt;write&lt;/code&gt; is that one byte is written\r\n        * to the output stream. The byte to be written is the eight\r\n        * low-order bits of the argument &lt;code&gt;b&lt;/code&gt;. The 24\r\n        * high-order bits of &lt;code&gt;b&lt;/code&gt; are ignored.\r\n        * &lt;p&gt;\r\n        * Subclasses of &lt;code&gt;OutputStream&lt;/code&gt; must provide an\r\n        * implementation for this method.\r\n        *\r\n        * @param      b the &lt;code&gt;byte&lt;/code&gt;.\r\n        */\r\n      @throws[IOException]\r\n      override def write(b: Int): Unit = {\r\n        val buffer: Array[Byte] = new Array[Byte](1)\r\n    \r\n        buffer(0) = b.toByte\r\n    \r\n        write(buffer)\r\n      }\r\n    \r\n      /**\r\n        * Writes &lt;code&gt;len&lt;/code&gt; bytes from the specified byte array\r\n        * starting at offset &lt;code&gt;off&lt;/code&gt; to this output stream.\r\n        * The general contract for &lt;code&gt;write(b, off, len)&lt;/code&gt; is that\r\n        * some of the bytes in the array &lt;code&gt;b&lt;/code&gt; are written to the\r\n        * output stream in order; element &lt;code&gt;b[off]&lt;/code&gt; is the first\r\n        * byte written and &lt;code&gt;b[off+len-1]&lt;/code&gt; is the last byte written\r\n        * by this operation.\r\n        * &lt;p&gt;\r\n        * The &lt;code&gt;write&lt;/code&gt; method of &lt;code&gt;OutputStream&lt;/code&gt; calls\r\n        * the write method of one argument on each of the bytes to be\r\n        * written out. Subclasses are encouraged to override this method and\r\n        * provide a more efficient implementation.\r\n        * &lt;p&gt;\r\n        * If &lt;code&gt;b&lt;/code&gt; is &lt;code&gt;null&lt;/code&gt;, a\r\n        * &lt;code&gt;NullPointerException&lt;/code&gt; is thrown.\r\n        * &lt;p&gt;\r\n        * If &lt;code&gt;off&lt;/code&gt; is negative, or &lt;code&gt;len&lt;/code&gt; is negative, or\r\n        * &lt;code&gt;off+len&lt;/code&gt; is greater than the length of the array\r\n        * &lt;code&gt;b&lt;/code&gt;, then an &lt;tt&gt;IndexOutOfBoundsException&lt;/tt&gt; is thrown.\r\n        *\r\n        * @param      b   the data.\r\n        * @param      off the start offset in the data.\r\n        * @param      len the number of bytes to write.\r\n        */\r\n      @throws[IOException]\r\n      override def write(b: Array[Byte], off: Int, len: Int): Unit = {\r\n        @tailrec\r\n        def writeIter(b: Array[Byte], off: Int, len: Int): Unit = {\r\n          val currentPage: Int = (position / PAGE_SIZE).toInt\r\n          val currentOffset: Int = (position % PAGE_SIZE).toInt\r\n    \r\n          if (len != 0) {\r\n            val currentLength: Int = Math.min(PAGE_SIZE - currentOffset, len)\r\n            Array.copy(b, off, streamBuffers(currentPage), currentOffset, currentLength)\r\n    \r\n            position += currentLength\r\n    \r\n            writeIter(b, off + currentLength, len - currentLength)\r\n          }\r\n        }\r\n    \r\n        allocSpaceIfNeeded(position + len)\r\n        writeIter(b, off, len)\r\n      }\r\n    \r\n      /** Gets an InputStream that points to HugeMemoryOutputStream buffer\r\n        *\r\n        * @return InputStream\r\n        */\r\n      def asInputStream(): InputStream = {\r\n        new HugeMemoryInputStream(streamBuffers, length)\r\n      }\r\n    \r\n      private class HugeMemoryInputStream(streamBuffers: Array[Array[Byte]], val length: Long) extends InputStream {\r\n        /** Current position in stream\r\n          *\r\n          */\r\n        private var position: Long = 0\r\n    \r\n        /**\r\n          * Reads the next byte of data from the input stream. The value byte is\r\n          * returned as an &lt;code&gt;int&lt;/code&gt; in the range &lt;code&gt;0&lt;/code&gt; to\r\n          * &lt;code&gt;255&lt;/code&gt;. If no byte is available because the end of the stream\r\n          * has been reached, the value &lt;code&gt;-1&lt;/code&gt; is returned. This method\r\n          * blocks until input data is available, the end of the stream is detected,\r\n          * or an exception is thrown.\r\n          *\r\n          * &lt;p&gt; A subclass must provide an implementation of this method.\r\n          *\r\n          * @return the next byte of data, or &lt;code&gt;-1&lt;/code&gt; if the end of the\r\n          *         stream is reached.\r\n          */\r\n        @throws[IOException]\r\n        def read: Int = {\r\n          val buffer: Array[Byte] = new Array[Byte](1)\r\n    \r\n          if (read(buffer) == 0) throw new Error(&quot;End of stream&quot;)\r\n          else buffer(0)\r\n        }\r\n    \r\n        /**\r\n          * Reads up to &lt;code&gt;len&lt;/code&gt; bytes of data from the input stream into\r\n          * an array of bytes.  An attempt is made to read as many as\r\n          * &lt;code&gt;len&lt;/code&gt; bytes, but a smaller number may be read.\r\n          * The number of bytes actually read is returned as an integer.\r\n          *\r\n          * &lt;p&gt; This method blocks until input data is available, end of file is\r\n          * detected, or an exception is thrown.\r\n          *\r\n          * &lt;p&gt; If &lt;code&gt;len&lt;/code&gt; is zero, then no bytes are read and\r\n          * &lt;code&gt;0&lt;/code&gt; is returned; otherwise, there is an attempt to read at\r\n          * least one byte. If no byte is available because the stream is at end of\r\n          * file, the value &lt;code&gt;-1&lt;/code&gt; is returned; otherwise, at least one\r\n          * byte is read and stored into &lt;code&gt;b&lt;/code&gt;.\r\n          *\r\n          * &lt;p&gt; The first byte read is stored into element &lt;code&gt;b[off]&lt;/code&gt;, the\r\n          * next one into &lt;code&gt;b[off+1]&lt;/code&gt;, and so on. The number of bytes read\r\n          * is, at most, equal to &lt;code&gt;len&lt;/code&gt;. Let &lt;i&gt;k&lt;/i&gt; be the number of\r\n          * bytes actually read; these bytes will be stored in elements\r\n          * &lt;code&gt;b[off]&lt;/code&gt; through &lt;code&gt;b[off+&lt;/code&gt;&lt;i&gt;k&lt;/i&gt;&lt;code&gt;-1]&lt;/code&gt;,\r\n          * leaving elements &lt;code&gt;b[off+&lt;/code&gt;&lt;i&gt;k&lt;/i&gt;&lt;code&gt;]&lt;/code&gt; through\r\n          * &lt;code&gt;b[off+len-1]&lt;/code&gt; unaffected.\r\n          *\r\n          * &lt;p&gt; In every case, elements &lt;code&gt;b[0]&lt;/code&gt; through\r\n          * &lt;code&gt;b[off]&lt;/code&gt; and elements &lt;code&gt;b[off+len]&lt;/code&gt; through\r\n          * &lt;code&gt;b[b.length-1]&lt;/code&gt; are unaffected.\r\n          *\r\n          * &lt;p&gt; The &lt;code&gt;read(b,&lt;/code&gt; &lt;code&gt;off,&lt;/code&gt; &lt;code&gt;len)&lt;/code&gt; method\r\n          * for class &lt;code&gt;InputStream&lt;/code&gt; simply calls the method\r\n          * &lt;code&gt;read()&lt;/code&gt; repeatedly. If the first such call results in an\r\n          * &lt;code&gt;IOException&lt;/code&gt;, that exception is returned from the call to\r\n          * the &lt;code&gt;read(b,&lt;/code&gt; &lt;code&gt;off,&lt;/code&gt; &lt;code&gt;len)&lt;/code&gt; method.  If\r\n          * any subsequent call to &lt;code&gt;read()&lt;/code&gt; results in a\r\n          * &lt;code&gt;IOException&lt;/code&gt;, the exception is caught and treated as if it\r\n          * were end of file; the bytes read up to that point are stored into\r\n          * &lt;code&gt;b&lt;/code&gt; and the number of bytes read before the exception\r\n          * occurred is returned. The default implementation of this method blocks\r\n          * until the requested amount of input data &lt;code&gt;len&lt;/code&gt; has been read,\r\n          * end of file is detected, or an exception is thrown. Subclasses are encouraged\r\n          * to provide a more efficient implementation of this method.\r\n          *\r\n          * @param      b   the buffer into which the data is read.\r\n          * @param      off the start offset in array &lt;code&gt;b&lt;/code&gt;\r\n          *                 at which the data is written.\r\n          * @param      len the maximum number of bytes to read.\r\n          * @return the total number of bytes read into the buffer, or\r\n          *         &lt;code&gt;-1&lt;/code&gt; if there is no more data because the end of\r\n          *         the stream has been reached.\r\n          * @see java.io.InputStream#read()\r\n          */\r\n        @throws[IOException]\r\n        override def read(b: Array[Byte], off: Int, len: Int): Int = {\r\n          @tailrec\r\n          def readIter(acc: Int, b: Array[Byte], off: Int, len: Int): Int = {\r\n            val currentPage: Int = (position / PAGE_SIZE).toInt\r\n            val currentOffset: Int = (position % PAGE_SIZE).toInt\r\n    \r\n            val count: Int = Math.min(len, length - position).toInt\r\n    \r\n            if (count == 0 || position &gt;= length) acc\r\n            else {\r\n              val currentLength = Math.min(PAGE_SIZE - currentOffset, count)\r\n              Array.copy(streamBuffers(currentPage), currentOffset, b, off, currentLength)\r\n    \r\n              position += currentLength\r\n    \r\n              readIter(acc + currentLength, b, off + currentLength, len - currentLength)\r\n            }\r\n          }\r\n    \r\n          readIter(0, b, off, len)\r\n        }\r\n    \r\n        /**\r\n          * Skips over and discards &lt;code&gt;n&lt;/code&gt; bytes of data from this input\r\n          * stream. The &lt;code&gt;skip&lt;/code&gt; method may, for a variety of reasons, end\r\n          * up skipping over some smaller number of bytes, possibly &lt;code&gt;0&lt;/code&gt;.\r\n          * This may result from any of a number of conditions; reaching end of file\r\n          * before &lt;code&gt;n&lt;/code&gt; bytes have been skipped is only one possibility.\r\n          * The actual number of bytes skipped is returned. If &lt;code&gt;n&lt;/code&gt; is\r\n          * negative, the &lt;code&gt;skip&lt;/code&gt; method for class &lt;code&gt;InputStream&lt;/code&gt; always\r\n          * returns 0, and no bytes are skipped. Subclasses may handle the negative\r\n          * value differently.\r\n          *\r\n          * The &lt;code&gt;skip&lt;/code&gt; method of this class creates a\r\n          * byte array and then repeatedly reads into it until &lt;code&gt;n&lt;/code&gt; bytes\r\n          * have been read or the end of the stream has been reached. Subclasses are\r\n          * encouraged to provide a more efficient implementation of this method.\r\n          * For instance, the implementation may depend on the ability to seek.\r\n          *\r\n          * @param      n the number of bytes to be skipped.\r\n          * @return the actual number of bytes skipped.\r\n          */\r\n        @throws[IOException]\r\n        override def skip(n: Long): Long = {\r\n          if (n &lt; 0) 0\r\n          else {\r\n            position = Math.min(position + n, length)\r\n            length - position\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n**Easy to use, no buffer duplication, no 2GB memory limit**\r\n\r\n    val out: HugeMemoryOutputStream = new HugeMemoryOutputStream(initialCapacity /*may be 0*/)\r\n\r\n    out.write(...)\r\n    ...\r\n\r\n    val in1: InputStream = out.asInputStream()\r\n\r\n    in1.read(...)\r\n    ...\r\n\r\n    val in2: InputStream = out.asInputStream()\r\n\r\n    in2.read(...)\r\n    ...\r\n","title":"How do I convert an OutputStream to an InputStream?","body":"<p>From my point of view, java.io.PipedInputStream/java.io.PipedOutputStream is the best option to considere. In some situations you may want to use ByteArrayInputStream/ByteArrayOutputStream. The problem is that you need to duplicate the buffer to convert a ByteArrayOutputStream to a ByteArrayInputStream. Also ByteArrayOutpuStream/ByteArrayInputStream are limited to 2GB. Here is an OutpuStream/InputStream implementation I wrote to bypass ByteArrayOutputStream/ByteArrayInputStream limitations (Scala code, but easily understandable for java developpers):</p>\n\n<pre><code>import java.io.{IOException, InputStream, OutputStream}\n\nimport scala.annotation.tailrec\n\n/** Acts as a replacement for ByteArrayOutputStream\n  *\n  */\nclass HugeMemoryOutputStream(capacity: Long) extends OutputStream {\n  private val PAGE_SIZE: Int = 1024000\n  private val ALLOC_STEP: Int = 1024\n\n  /** Pages array\n    *\n    */\n  private var streamBuffers: Array[Array[Byte]] = Array.empty[Array[Byte]]\n\n  /** Allocated pages count\n    *\n    */\n  private var pageCount: Int = 0\n\n  /** Allocated bytes count\n    *\n    */\n  private var allocatedBytes: Long = 0\n\n  /** Current position in stream\n    *\n    */\n  private var position: Long = 0\n\n  /** Stream length\n    *\n    */\n  private var length: Long = 0\n\n  allocSpaceIfNeeded(capacity)\n\n  /** Gets page count based on given length\n    *\n    * @param length   Buffer length\n    * @return         Page count to hold the specified amount of data\n    */\n  private def getPageCount(length: Long) = {\n    var pageCount = (length / PAGE_SIZE).toInt + 1\n\n    if ((length % PAGE_SIZE) == 0) {\n      pageCount -= 1\n    }\n\n    pageCount\n  }\n\n  /** Extends pages array\n    *\n    */\n  private def extendPages(): Unit = {\n    if (streamBuffers.isEmpty) {\n      streamBuffers = new Array[Array[Byte]](ALLOC_STEP)\n    }\n    else {\n      val newStreamBuffers = new Array[Array[Byte]](streamBuffers.length + ALLOC_STEP)\n      Array.copy(streamBuffers, 0, newStreamBuffers, 0, streamBuffers.length)\n      streamBuffers = newStreamBuffers\n    }\n\n    pageCount = streamBuffers.length\n  }\n\n  /** Ensures buffers are bug enough to hold specified amount of data\n    *\n    * @param value  Amount of data\n    */\n  private def allocSpaceIfNeeded(value: Long): Unit = {\n    @tailrec\n    def allocSpaceIfNeededIter(value: Long): Unit = {\n      val currentPageCount = getPageCount(allocatedBytes)\n      val neededPageCount = getPageCount(value)\n\n      if (currentPageCount &lt; neededPageCount) {\n        if (currentPageCount == pageCount) extendPages()\n\n        streamBuffers(currentPageCount) = new Array[Byte](PAGE_SIZE)\n        allocatedBytes = (currentPageCount + 1).toLong * PAGE_SIZE\n\n        allocSpaceIfNeededIter(value)\n      }\n    }\n\n    if (value &lt; 0) throw new Error(\"AllocSpaceIfNeeded &lt; 0\")\n    if (value &gt; 0) {\n      allocSpaceIfNeededIter(value)\n\n      length = Math.max(value, length)\n      if (position &gt; length) position = length\n    }\n  }\n\n  /**\n    * Writes the specified byte to this output stream. The general\n    * contract for &lt;code&gt;write&lt;/code&gt; is that one byte is written\n    * to the output stream. The byte to be written is the eight\n    * low-order bits of the argument &lt;code&gt;b&lt;/code&gt;. The 24\n    * high-order bits of &lt;code&gt;b&lt;/code&gt; are ignored.\n    * &lt;p&gt;\n    * Subclasses of &lt;code&gt;OutputStream&lt;/code&gt; must provide an\n    * implementation for this method.\n    *\n    * @param      b the &lt;code&gt;byte&lt;/code&gt;.\n    */\n  @throws[IOException]\n  override def write(b: Int): Unit = {\n    val buffer: Array[Byte] = new Array[Byte](1)\n\n    buffer(0) = b.toByte\n\n    write(buffer)\n  }\n\n  /**\n    * Writes &lt;code&gt;len&lt;/code&gt; bytes from the specified byte array\n    * starting at offset &lt;code&gt;off&lt;/code&gt; to this output stream.\n    * The general contract for &lt;code&gt;write(b, off, len)&lt;/code&gt; is that\n    * some of the bytes in the array &lt;code&gt;b&lt;/code&gt; are written to the\n    * output stream in order; element &lt;code&gt;b[off]&lt;/code&gt; is the first\n    * byte written and &lt;code&gt;b[off+len-1]&lt;/code&gt; is the last byte written\n    * by this operation.\n    * &lt;p&gt;\n    * The &lt;code&gt;write&lt;/code&gt; method of &lt;code&gt;OutputStream&lt;/code&gt; calls\n    * the write method of one argument on each of the bytes to be\n    * written out. Subclasses are encouraged to override this method and\n    * provide a more efficient implementation.\n    * &lt;p&gt;\n    * If &lt;code&gt;b&lt;/code&gt; is &lt;code&gt;null&lt;/code&gt;, a\n    * &lt;code&gt;NullPointerException&lt;/code&gt; is thrown.\n    * &lt;p&gt;\n    * If &lt;code&gt;off&lt;/code&gt; is negative, or &lt;code&gt;len&lt;/code&gt; is negative, or\n    * &lt;code&gt;off+len&lt;/code&gt; is greater than the length of the array\n    * &lt;code&gt;b&lt;/code&gt;, then an &lt;tt&gt;IndexOutOfBoundsException&lt;/tt&gt; is thrown.\n    *\n    * @param      b   the data.\n    * @param      off the start offset in the data.\n    * @param      len the number of bytes to write.\n    */\n  @throws[IOException]\n  override def write(b: Array[Byte], off: Int, len: Int): Unit = {\n    @tailrec\n    def writeIter(b: Array[Byte], off: Int, len: Int): Unit = {\n      val currentPage: Int = (position / PAGE_SIZE).toInt\n      val currentOffset: Int = (position % PAGE_SIZE).toInt\n\n      if (len != 0) {\n        val currentLength: Int = Math.min(PAGE_SIZE - currentOffset, len)\n        Array.copy(b, off, streamBuffers(currentPage), currentOffset, currentLength)\n\n        position += currentLength\n\n        writeIter(b, off + currentLength, len - currentLength)\n      }\n    }\n\n    allocSpaceIfNeeded(position + len)\n    writeIter(b, off, len)\n  }\n\n  /** Gets an InputStream that points to HugeMemoryOutputStream buffer\n    *\n    * @return InputStream\n    */\n  def asInputStream(): InputStream = {\n    new HugeMemoryInputStream(streamBuffers, length)\n  }\n\n  private class HugeMemoryInputStream(streamBuffers: Array[Array[Byte]], val length: Long) extends InputStream {\n    /** Current position in stream\n      *\n      */\n    private var position: Long = 0\n\n    /**\n      * Reads the next byte of data from the input stream. The value byte is\n      * returned as an &lt;code&gt;int&lt;/code&gt; in the range &lt;code&gt;0&lt;/code&gt; to\n      * &lt;code&gt;255&lt;/code&gt;. If no byte is available because the end of the stream\n      * has been reached, the value &lt;code&gt;-1&lt;/code&gt; is returned. This method\n      * blocks until input data is available, the end of the stream is detected,\n      * or an exception is thrown.\n      *\n      * &lt;p&gt; A subclass must provide an implementation of this method.\n      *\n      * @return the next byte of data, or &lt;code&gt;-1&lt;/code&gt; if the end of the\n      *         stream is reached.\n      */\n    @throws[IOException]\n    def read: Int = {\n      val buffer: Array[Byte] = new Array[Byte](1)\n\n      if (read(buffer) == 0) throw new Error(\"End of stream\")\n      else buffer(0)\n    }\n\n    /**\n      * Reads up to &lt;code&gt;len&lt;/code&gt; bytes of data from the input stream into\n      * an array of bytes.  An attempt is made to read as many as\n      * &lt;code&gt;len&lt;/code&gt; bytes, but a smaller number may be read.\n      * The number of bytes actually read is returned as an integer.\n      *\n      * &lt;p&gt; This method blocks until input data is available, end of file is\n      * detected, or an exception is thrown.\n      *\n      * &lt;p&gt; If &lt;code&gt;len&lt;/code&gt; is zero, then no bytes are read and\n      * &lt;code&gt;0&lt;/code&gt; is returned; otherwise, there is an attempt to read at\n      * least one byte. If no byte is available because the stream is at end of\n      * file, the value &lt;code&gt;-1&lt;/code&gt; is returned; otherwise, at least one\n      * byte is read and stored into &lt;code&gt;b&lt;/code&gt;.\n      *\n      * &lt;p&gt; The first byte read is stored into element &lt;code&gt;b[off]&lt;/code&gt;, the\n      * next one into &lt;code&gt;b[off+1]&lt;/code&gt;, and so on. The number of bytes read\n      * is, at most, equal to &lt;code&gt;len&lt;/code&gt;. Let &lt;i&gt;k&lt;/i&gt; be the number of\n      * bytes actually read; these bytes will be stored in elements\n      * &lt;code&gt;b[off]&lt;/code&gt; through &lt;code&gt;b[off+&lt;/code&gt;&lt;i&gt;k&lt;/i&gt;&lt;code&gt;-1]&lt;/code&gt;,\n      * leaving elements &lt;code&gt;b[off+&lt;/code&gt;&lt;i&gt;k&lt;/i&gt;&lt;code&gt;]&lt;/code&gt; through\n      * &lt;code&gt;b[off+len-1]&lt;/code&gt; unaffected.\n      *\n      * &lt;p&gt; In every case, elements &lt;code&gt;b[0]&lt;/code&gt; through\n      * &lt;code&gt;b[off]&lt;/code&gt; and elements &lt;code&gt;b[off+len]&lt;/code&gt; through\n      * &lt;code&gt;b[b.length-1]&lt;/code&gt; are unaffected.\n      *\n      * &lt;p&gt; The &lt;code&gt;read(b,&lt;/code&gt; &lt;code&gt;off,&lt;/code&gt; &lt;code&gt;len)&lt;/code&gt; method\n      * for class &lt;code&gt;InputStream&lt;/code&gt; simply calls the method\n      * &lt;code&gt;read()&lt;/code&gt; repeatedly. If the first such call results in an\n      * &lt;code&gt;IOException&lt;/code&gt;, that exception is returned from the call to\n      * the &lt;code&gt;read(b,&lt;/code&gt; &lt;code&gt;off,&lt;/code&gt; &lt;code&gt;len)&lt;/code&gt; method.  If\n      * any subsequent call to &lt;code&gt;read()&lt;/code&gt; results in a\n      * &lt;code&gt;IOException&lt;/code&gt;, the exception is caught and treated as if it\n      * were end of file; the bytes read up to that point are stored into\n      * &lt;code&gt;b&lt;/code&gt; and the number of bytes read before the exception\n      * occurred is returned. The default implementation of this method blocks\n      * until the requested amount of input data &lt;code&gt;len&lt;/code&gt; has been read,\n      * end of file is detected, or an exception is thrown. Subclasses are encouraged\n      * to provide a more efficient implementation of this method.\n      *\n      * @param      b   the buffer into which the data is read.\n      * @param      off the start offset in array &lt;code&gt;b&lt;/code&gt;\n      *                 at which the data is written.\n      * @param      len the maximum number of bytes to read.\n      * @return the total number of bytes read into the buffer, or\n      *         &lt;code&gt;-1&lt;/code&gt; if there is no more data because the end of\n      *         the stream has been reached.\n      * @see java.io.InputStream#read()\n      */\n    @throws[IOException]\n    override def read(b: Array[Byte], off: Int, len: Int): Int = {\n      @tailrec\n      def readIter(acc: Int, b: Array[Byte], off: Int, len: Int): Int = {\n        val currentPage: Int = (position / PAGE_SIZE).toInt\n        val currentOffset: Int = (position % PAGE_SIZE).toInt\n\n        val count: Int = Math.min(len, length - position).toInt\n\n        if (count == 0 || position &gt;= length) acc\n        else {\n          val currentLength = Math.min(PAGE_SIZE - currentOffset, count)\n          Array.copy(streamBuffers(currentPage), currentOffset, b, off, currentLength)\n\n          position += currentLength\n\n          readIter(acc + currentLength, b, off + currentLength, len - currentLength)\n        }\n      }\n\n      readIter(0, b, off, len)\n    }\n\n    /**\n      * Skips over and discards &lt;code&gt;n&lt;/code&gt; bytes of data from this input\n      * stream. The &lt;code&gt;skip&lt;/code&gt; method may, for a variety of reasons, end\n      * up skipping over some smaller number of bytes, possibly &lt;code&gt;0&lt;/code&gt;.\n      * This may result from any of a number of conditions; reaching end of file\n      * before &lt;code&gt;n&lt;/code&gt; bytes have been skipped is only one possibility.\n      * The actual number of bytes skipped is returned. If &lt;code&gt;n&lt;/code&gt; is\n      * negative, the &lt;code&gt;skip&lt;/code&gt; method for class &lt;code&gt;InputStream&lt;/code&gt; always\n      * returns 0, and no bytes are skipped. Subclasses may handle the negative\n      * value differently.\n      *\n      * The &lt;code&gt;skip&lt;/code&gt; method of this class creates a\n      * byte array and then repeatedly reads into it until &lt;code&gt;n&lt;/code&gt; bytes\n      * have been read or the end of the stream has been reached. Subclasses are\n      * encouraged to provide a more efficient implementation of this method.\n      * For instance, the implementation may depend on the ability to seek.\n      *\n      * @param      n the number of bytes to be skipped.\n      * @return the actual number of bytes skipped.\n      */\n    @throws[IOException]\n    override def skip(n: Long): Long = {\n      if (n &lt; 0) 0\n      else {\n        position = Math.min(position + n, length)\n        length - position\n      }\n    }\n  }\n}\n</code></pre>\n\n<p><strong>Easy to use, no buffer duplication, no 2GB memory limit</strong></p>\n\n<pre><code>val out: HugeMemoryOutputStream = new HugeMemoryOutputStream(initialCapacity /*may be 0*/)\n\nout.write(...)\n...\n\nval in1: InputStream = out.asInputStream()\n\nin1.read(...)\n...\n\nval in2: InputStream = out.asInputStream()\n\nin2.read(...)\n...\n</code></pre>\n"},{"tags":[],"owner":{"account_id":216605,"reputation":11967,"user_id":471955,"accept_rate":0,"display_name":"Dave Moten"},"comment_count":0,"down_vote_count":2,"up_vote_count":3,"is_accepted":false,"score":1,"last_activity_date":1524703382,"creation_date":1524703382,"answer_id":50033197,"question_id":5778658,"body_markdown":"The library [*io-extras*][1] may be useful. For example if you want to gzip an `InputStream` using `GZIPOutputStream` and you want it to happen *synchronously* (using the default buffer size of 8192):\r\n\r\n    InputStream is = ...\r\n    InputStream gz = IOUtil.pipe(is, o -&gt; new GZIPOutputStream(o));\r\n\r\nNote that the library has 100% unit test coverage (for what that&#39;s worth of course!) and is on Maven Central. The Maven dependency is:\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;com.github.davidmoten&lt;/groupId&gt;\r\n      &lt;artifactId&gt;io-extras&lt;/artifactId&gt;\r\n      &lt;version&gt;0.1&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nBe sure to check for a later version.\r\n\r\n\r\n  [1]: https://github.com/davidmoten/io-extras\r\n\r\n","title":"How do I convert an OutputStream to an InputStream?","body":"<p>The library <a href=\"https://github.com/davidmoten/io-extras\" rel=\"nofollow noreferrer\"><em>io-extras</em></a> may be useful. For example if you want to gzip an <code>InputStream</code> using <code>GZIPOutputStream</code> and you want it to happen <em>synchronously</em> (using the default buffer size of 8192):</p>\n\n<pre><code>InputStream is = ...\nInputStream gz = IOUtil.pipe(is, o -&gt; new GZIPOutputStream(o));\n</code></pre>\n\n<p>Note that the library has 100% unit test coverage (for what that's worth of course!) and is on Maven Central. The Maven dependency is:</p>\n\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;com.github.davidmoten&lt;/groupId&gt;\n  &lt;artifactId&gt;io-extras&lt;/artifactId&gt;\n  &lt;version&gt;0.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>Be sure to check for a later version.</p>\n"},{"tags":[],"owner":{"account_id":5705055,"reputation":1872,"user_id":4508899,"accept_rate":75,"display_name":"Jonas_Hess"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1670506255,"creation_date":1670503881,"answer_id":74730588,"question_id":5778658,"body_markdown":"As some here have answered already, there is no efficient way to just ‘convert’ an OutputStream to an InputStream.  The trick to solve a problem like yours is to execute all code that requires the OutputStream into its own thread.  By using piped streams, we can then transfer the data out of the created thread over into an InputStream.\r\n\r\n\r\n**Example usage:**\r\n\r\n    public static InputStream downloadFileAsStream(final String uriString) throws IOException {\r\n            final InputStream inputStream = runInOwnThreadWithPipedStreams((outputStream) -&gt; {\r\n                try {\r\n                    downloadUriToStream(uriString, outputStream);\r\n                } catch (final Exception e) {\r\n                    LOGGER.error(&quot;Download of uri &#39;{}&#39; has failed&quot;, uriString, e);\r\n                }\r\n            });\r\n            return inputStream;\r\n        }\r\n\r\n\r\n\r\n**Helper function:**\r\n\r\n    public static InputStream runInOwnThreadWithPipedStreams(\r\n                final Consumer&lt;OutputStream&gt; outputStreamConsumer) throws IOException {\r\n            final PipedInputStream inputStream = new PipedInputStream();\r\n            final PipedOutputStream outputStream = new PipedOutputStream(inputStream);\r\n            new Thread(new Runnable() {\r\n                public void run() {\r\n                    try {\r\n                        outputStreamConsumer.accept(outputStream);\r\n                    } finally {\r\n                        try {\r\n                            outputStream.close();\r\n                        } catch (final IOException e) {\r\n                            LOGGER.error(&quot;Closing outputStream has failed. &quot;, e);\r\n                        }\r\n                    }\r\n                }\r\n            }).start();\r\n            return inputStream;\r\n        }\r\n\r\n**Unit Test:**\r\n\r\n    @Test\r\n    void testRunInOwnThreadWithPipedStreams() throws IOException {\r\n    \r\n        final InputStream inputStream = LoadFileUtil.runInOwnThreadWithPipedStreams((OutputStream outputStream) -&gt; {\r\n            try {\r\n                IOUtils.copy(IOUtils.toInputStream(&quot;Hello World&quot;, StandardCharsets.UTF_8), outputStream);\r\n            } catch (final IOException e) {\r\n                LoggerFactory.getLogger(LoadFileUtilTest.class).error(e.getMessage(), e);\r\n            }\r\n        });\r\n    \r\n        final String actualResult = IOUtils.toString(inputStream, StandardCharsets.UTF_8);\r\n        Assertions.assertEquals(&quot;Hello World&quot;, actualResult);\r\n    }","title":"How do I convert an OutputStream to an InputStream?","body":"<p>As some here have answered already, there is no efficient way to just ‘convert’ an OutputStream to an InputStream.  The trick to solve a problem like yours is to execute all code that requires the OutputStream into its own thread.  By using piped streams, we can then transfer the data out of the created thread over into an InputStream.</p>\n<p><strong>Example usage:</strong></p>\n<pre><code>public static InputStream downloadFileAsStream(final String uriString) throws IOException {\n        final InputStream inputStream = runInOwnThreadWithPipedStreams((outputStream) -&gt; {\n            try {\n                downloadUriToStream(uriString, outputStream);\n            } catch (final Exception e) {\n                LOGGER.error(&quot;Download of uri '{}' has failed&quot;, uriString, e);\n            }\n        });\n        return inputStream;\n    }\n</code></pre>\n<p><strong>Helper function:</strong></p>\n<pre><code>public static InputStream runInOwnThreadWithPipedStreams(\n            final Consumer&lt;OutputStream&gt; outputStreamConsumer) throws IOException {\n        final PipedInputStream inputStream = new PipedInputStream();\n        final PipedOutputStream outputStream = new PipedOutputStream(inputStream);\n        new Thread(new Runnable() {\n            public void run() {\n                try {\n                    outputStreamConsumer.accept(outputStream);\n                } finally {\n                    try {\n                        outputStream.close();\n                    } catch (final IOException e) {\n                        LOGGER.error(&quot;Closing outputStream has failed. &quot;, e);\n                    }\n                }\n            }\n        }).start();\n        return inputStream;\n    }\n</code></pre>\n<p><strong>Unit Test:</strong></p>\n<pre><code>@Test\nvoid testRunInOwnThreadWithPipedStreams() throws IOException {\n\n    final InputStream inputStream = LoadFileUtil.runInOwnThreadWithPipedStreams((OutputStream outputStream) -&gt; {\n        try {\n            IOUtils.copy(IOUtils.toInputStream(&quot;Hello World&quot;, StandardCharsets.UTF_8), outputStream);\n        } catch (final IOException e) {\n            LoggerFactory.getLogger(LoadFileUtilTest.class).error(e.getMessage(), e);\n        }\n    });\n\n    final String actualResult = IOUtils.toString(inputStream, StandardCharsets.UTF_8);\n    Assertions.assertEquals(&quot;Hello World&quot;, actualResult);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1262646,"reputation":2597,"user_id":1220560,"display_name":"morgwai"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1688363793,"creation_date":1686262541,"answer_id":76436035,"question_id":5778658,"body_markdown":"In cases when your data is not very big, is **produced without any blocking operations and its overall size can be reasonably accurately estimated**, creating an additional thread for `PipedStream`s may be an unnecessary overhead. Using `ByteArrayStream`s the &quot;normal&quot; way, results in an unnecessary buffer copying in [ByteArrayOutputStream.toByteArray()](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/ByteArrayOutputStream.html#toByteArray()), but there&#39;s a trick to avoid it: the underlying buffer of `ByteArrayOutputStream` is a [protected field](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/ByteArrayOutputStream.html#buf) (meaning it&#39;s a part of Java&#39;s documented API and will not change), so you can create a simple subclass that gives you an access to it:\r\n```java\r\npublic class NoCopyByteArrayOutputStream extends ByteArrayOutputStream {\r\n  public byte[] getBuffer() { return buf; }\r\n  public NoCopyByteArrayOutputStream(int initialSize) { super(initialSize); }\r\n}\r\n```\r\nAfter that you can proceed in a similar way like with standard `ByteArrayStream`s:\r\n```java\r\nfinal var outputBytes = new NoCopyByteArrayOutputStream(estimatedSize);\r\n// produce data and output it to outputBytes here...\r\n\r\nfinal var inputBytes = new ByteArrayInputStream(\r\n        outputBytes.getBuffer(), 0, outputBytes.size())\r\n// consume data from inputBytes here...\r\n```\r\nNote that the buffer may be bigger, than the number of bytes that were actually written to `outputBytes` output stream, hence the the 3-param constructor [ByteArrayInputStream(bytes, offset, length)](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/ByteArrayInputStream.html#%3Cinit%3E(byte%5B%5D,int,int)) must be used and `length` value obtained from `outputBytes`&#39;s size.\r\n\r\nRemember that if your data production process involves any blocking operations (like network I/O or even reading from a local file), you should **definitely** use `PipedStream`s (as described in [the other answer](https://stackoverflow.com/a/23874232/1220560)) to not delay unnecessarily partial data consumption from `inputBytes`.  \r\nSecondly, if you heavily underestimate the amount of data and pass significantly too low `initialSize` to the constructor of `NoCopyByteArrayOutputStream`, it will also have **significant performance consequences** due to repeated buffer extending, which involves copying of the whole data that was written up till the given point (hence the paramless constructor was not provided, as it doesn&#39;t make sense to use this class if the data size cannot be estimated with a reasonable accuracy).  \r\nFinally, if the data passed between streams is big, then `PipedStream`s will usually be much more efficient in terms of memory, provided that the reading thread does not get blocked too much and generally reads the data &quot;on the fly&quot; as soon as it appears.","title":"How do I convert an OutputStream to an InputStream?","body":"<p>In cases when your data is not very big, is <strong>produced without any blocking operations and its overall size can be reasonably accurately estimated</strong>, creating an additional thread for <code>PipedStream</code>s may be an unnecessary overhead. Using <code>ByteArrayStream</code>s the &quot;normal&quot; way, results in an unnecessary buffer copying in <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/ByteArrayOutputStream.html#toByteArray()\" rel=\"nofollow noreferrer\">ByteArrayOutputStream.toByteArray()</a>, but there's a trick to avoid it: the underlying buffer of <code>ByteArrayOutputStream</code> is a <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/ByteArrayOutputStream.html#buf\" rel=\"nofollow noreferrer\">protected field</a> (meaning it's a part of Java's documented API and will not change), so you can create a simple subclass that gives you an access to it:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class NoCopyByteArrayOutputStream extends ByteArrayOutputStream {\n  public byte[] getBuffer() { return buf; }\n  public NoCopyByteArrayOutputStream(int initialSize) { super(initialSize); }\n}\n</code></pre>\n<p>After that you can proceed in a similar way like with standard <code>ByteArrayStream</code>s:</p>\n<pre class=\"lang-java prettyprint-override\"><code>final var outputBytes = new NoCopyByteArrayOutputStream(estimatedSize);\n// produce data and output it to outputBytes here...\n\nfinal var inputBytes = new ByteArrayInputStream(\n        outputBytes.getBuffer(), 0, outputBytes.size())\n// consume data from inputBytes here...\n</code></pre>\n<p>Note that the buffer may be bigger, than the number of bytes that were actually written to <code>outputBytes</code> output stream, hence the the 3-param constructor <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/ByteArrayInputStream.html#%3Cinit%3E(byte%5B%5D,int,int)\" rel=\"nofollow noreferrer\">ByteArrayInputStream(bytes, offset, length)</a> must be used and <code>length</code> value obtained from <code>outputBytes</code>'s size.</p>\n<p>Remember that if your data production process involves any blocking operations (like network I/O or even reading from a local file), you should <strong>definitely</strong> use <code>PipedStream</code>s (as described in <a href=\"https://stackoverflow.com/a/23874232/1220560\">the other answer</a>) to not delay unnecessarily partial data consumption from <code>inputBytes</code>.<br />\nSecondly, if you heavily underestimate the amount of data and pass significantly too low <code>initialSize</code> to the constructor of <code>NoCopyByteArrayOutputStream</code>, it will also have <strong>significant performance consequences</strong> due to repeated buffer extending, which involves copying of the whole data that was written up till the given point (hence the paramless constructor was not provided, as it doesn't make sense to use this class if the data size cannot be estimated with a reasonable accuracy).<br />\nFinally, if the data passed between streams is big, then <code>PipedStream</code>s will usually be much more efficient in terms of memory, provided that the reading thread does not get blocked too much and generally reads the data &quot;on the fly&quot; as soon as it appears.</p>\n"}],"owner":{"account_id":242438,"reputation":17413,"user_id":513956,"accept_rate":77,"display_name":"Waypoint"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":446086,"favorite_count":0,"down_vote_count":1,"up_vote_count":420,"accepted_answer_id":5778863,"answer_count":14,"score":419,"last_activity_date":1694805601,"creation_date":1303737117,"question_id":5778658,"body_markdown":"I am on the stage of development where I have two modules and from one I got output as a `OutputStream`, and a second one which accepts only `InputStream`.\r\n\r\nDo you know how to convert `OutputStream` to `InputStream` (not vice versa, I mean really this way) so that I am able to connect these two parts?\r\n","title":"How do I convert an OutputStream to an InputStream?","body":"<p>I am on the stage of development where I have two modules and from one I got output as a <code>OutputStream</code>, and a second one which accepts only <code>InputStream</code>.</p>\n<p>Do you know how to convert <code>OutputStream</code> to <code>InputStream</code> (not vice versa, I mean really this way) so that I am able to connect these two parts?</p>\n"},{"tags":["java","random","secure-random"],"answers":[{"comments":[{"owner":{"account_id":1192771,"reputation":887,"user_id":1165190,"accept_rate":82,"display_name":"Alvins"},"score":0,"creation_date":1468337073,"post_id":38332674,"comment_id":64080592,"body_markdown":"Can you write a simple example?","body":"Can you write a simple example?"},{"owner":{"account_id":8584600,"reputation":801,"user_id":6431178,"accept_rate":50,"display_name":"Marco A. Hernandez"},"score":0,"creation_date":1468338361,"post_id":38332674,"comment_id":64081532,"body_markdown":"About using a existing alg? For example SecureRandom sr = SecureRandom.getInstance(&quot;SHA1PRNG&quot;); sr.nextInt() will return a random integer from the 2^32 different values. More info here: http://stackoverflow.com/questions/27622625/securerandom-with-nativeprng-vs-sha1prng. About register your own Provider I&#39;m afraid there isn&#39;t such thing as a simple example. But look here: http://stackoverflow.com/questions/10060261/how-do-i-get-java-to-use-my-security-provider","body":"About using a existing alg? For example SecureRandom sr = SecureRandom.getInstance(&quot;SHA1PRNG&quot;); sr.nextInt() will return a random integer from the 2^32 different values. More info here: <a href=\"http://stackoverflow.com/questions/27622625/securerandom-with-nativeprng-vs-sha1prng\" title=\"securerandom with nativeprng vs sha1prng\">stackoverflow.com/questions/27622625/&hellip;</a>. About register your own Provider I&#39;m afraid there isn&#39;t such thing as a simple example. But look here: <a href=\"http://stackoverflow.com/questions/10060261/how-do-i-get-java-to-use-my-security-provider\" title=\"how do i get java to use my security provider\">stackoverflow.com/questions/10060261/&hellip;</a>"},{"owner":{"account_id":1192771,"reputation":887,"user_id":1165190,"accept_rate":82,"display_name":"Alvins"},"score":0,"creation_date":1468339547,"post_id":38332674,"comment_id":64082297,"body_markdown":"About providing a custom alg. A simple one that return ++seed","body":"About providing a custom alg. A simple one that return ++seed"},{"owner":{"account_id":8584600,"reputation":801,"user_id":6431178,"accept_rate":50,"display_name":"Marco A. Hernandez"},"score":0,"creation_date":1468340509,"post_id":38332674,"comment_id":64082853,"body_markdown":"What do you mean with &quot;one that return ++seed&quot;? You can use  SecureRandom sr = SecureRandom.getInstance(&quot;SHA1PRNG&quot;); byte[] seed = sr.generateSeed(5); to obtain a 5 bytes seed computed using the SHA1PRNG seed generation algorithm . Do you need something like that?","body":"What do you mean with &quot;one that return ++seed&quot;? You can use  SecureRandom sr = SecureRandom.getInstance(&quot;SHA1PRNG&quot;); byte[] seed = sr.generateSeed(5); to obtain a 5 bytes seed computed using the SHA1PRNG seed generation algorithm . Do you need something like that?"},{"owner":{"account_id":1192771,"reputation":887,"user_id":1165190,"accept_rate":82,"display_name":"Alvins"},"score":0,"creation_date":1468397682,"post_id":38332674,"comment_id":64105471,"body_markdown":"I need to implement a custom algorithm. `SecureRandom sr = SecureRandom.getInstance(&quot;myCustomAlg&quot;);` For example myCustomAlg can simply return ++seed each `nextInt()`","body":"I need to implement a custom algorithm. <code>SecureRandom sr = SecureRandom.getInstance(&quot;myCustomAlg&quot;);</code> For example myCustomAlg can simply return ++seed each <code>nextInt()</code>"},{"owner":{"account_id":8584600,"reputation":801,"user_id":6431178,"accept_rate":50,"display_name":"Marco A. Hernandez"},"score":2,"creation_date":1468400460,"post_id":38332674,"comment_id":64107317,"body_markdown":"Then you must create a security Provider, sign it and register it. As I said it&#39;s a complex process and there is no simple examples. You must follow the instructions from Oracle Docs. The point is, why do you want to use the SecureRandom API? This is an API designed to use well known cipher implementations. For testing purposes it will be simpler call to your own class. Something like MyCustomAlg.getRandomValue(seed);","body":"Then you must create a security Provider, sign it and register it. As I said it&#39;s a complex process and there is no simple examples. You must follow the instructions from Oracle Docs. The point is, why do you want to use the SecureRandom API? This is an API designed to use well known cipher implementations. For testing purposes it will be simpler call to your own class. Something like MyCustomAlg.getRandomValue(seed);"}],"tags":[],"owner":{"account_id":8584600,"reputation":801,"user_id":6431178,"accept_rate":50,"display_name":"Marco A. Hernandez"},"comment_count":6,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1468335980,"creation_date":1468335980,"answer_id":38332674,"question_id":38331113,"body_markdown":"The constructor \r\n\r\n    protected SecureRandom(SecureRandomSpi secureRandomSpi, Provider provider) \r\n\r\nis protected, you shouldn&#39;t use it. Use instead \r\n\r\n    public static SecureRandom getInstance(String algorithm)\r\n\r\nIf you have defined your own algorithm you must Create a Provider and register it so when you specify the name of the algorithm, the jre can find it. But you probably want to use a existig one.\r\n\r\nHowever, if you have created your own crypto algorithm just use it instead of encapsulate into SecureRandom API. If its good enought sure some Provider will pay to you to add it to its API ;D","title":"SecureRandom custom algorithm","body":"<p>The constructor </p>\n\n<pre><code>protected SecureRandom(SecureRandomSpi secureRandomSpi, Provider provider) \n</code></pre>\n\n<p>is protected, you shouldn't use it. Use instead </p>\n\n<pre><code>public static SecureRandom getInstance(String algorithm)\n</code></pre>\n\n<p>If you have defined your own algorithm you must Create a Provider and register it so when you specify the name of the algorithm, the jre can find it. But you probably want to use a existig one.</p>\n\n<p>However, if you have created your own crypto algorithm just use it instead of encapsulate into SecureRandom API. If its good enought sure some Provider will pay to you to add it to its API ;D</p>\n"},{"tags":[],"owner":{"account_id":13060408,"reputation":707,"user_id":9437799,"display_name":"Sam Ginrich"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694805599,"creation_date":1694805599,"answer_id":77114894,"question_id":38331113,"body_markdown":"Late answer: **Yes** it is possible.\r\n\r\nFirst I want to note, that I see a real usecase for having a custom random generator:\r\n\r\n 1. Providers of random generators have not had best press, e.g. [...paid RSA to make flawed crypto algorithm the default][1]. From this (story true of not true, intended or not) there should not be a blind trust decision in any provider. Flaws of single random generators may be elimintated by combining several generators from independent sources; e.g. *Random.org* might be conisdered as second source or a generator coming from an different algebraic class of pseudo random algorithms.\r\n 2. The regular procedure to integrate a random generator into a Java Runtime Environment is developping Provider + Algorithm class and getting it certified + system administration; a huge effort with additional constraints in context of *just* doing some testing. \r\n\r\n\r\nHere is an example with a SecureRandom subclass.\r\n\r\n    import java.security.NoSuchAlgorithmException;\r\n    import java.security.SecureRandom;\r\n    import java.security.SecureRandomSpi;\r\n    import java.util.Arrays;\r\n    \r\n    /**\r\n     * Combine several SecureRandom Generators\r\n     * \r\n     * @author Sam Ginrich\r\n     *\r\n     */\r\n    public class CombinedRnd extends SecureRandom\r\n    {\r\n    \r\n    \tprivate static class CombiSpi extends SecureRandomSpi\r\n    \t{\r\n    \r\n    \t\tCombiSpi(SecureRandom[] parts)\r\n    \t\t{\r\n    \t\t\tthis.parts = parts;\r\n    \t\t}\r\n    \r\n    \t\t@Override\r\n    \t\tprotected void engineSetSeed(byte[] seed)\r\n    \t\t{\r\n    \t\t\tparts[0].setSeed(seed);\r\n    \t\t}\r\n    \r\n    \t\t@Override\r\n    \t\tprotected void engineNextBytes(byte[] bytes)\r\n    \t\t{\r\n    \t\t\tArrays.fill(bytes, (byte) 0);\r\n    \t\t\tint len = bytes.length;\r\n    \t\t\tbyte[] buf = new byte[len];\r\n    \t\t\tfor (SecureRandom r : parts)\r\n    \t\t\t{\r\n    \t\t\t\tr.nextBytes(buf);\r\n    \t\t\t\tfor (int j = 0; j &lt; len; j++)\r\n    \t\t\t\t{\r\n    \t\t\t\t\tbytes[j] ^= buf[j];\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t}\r\n    \r\n    \t\t@Override\r\n    \t\tprotected byte[] engineGenerateSeed(int numBytes)\r\n    \t\t{\r\n    \t\t\treturn null;\r\n    \t\t}\r\n    \r\n    \t\tSecureRandom[] parts;\r\n    \r\n    \t\tprivate static final long serialVersionUID = -487720505474870937L;\r\n    \r\n    \t}\r\n    \r\n    \tpublic CombinedRnd(SecureRandom... parts)\r\n    \t{\r\n    \t\tsuper(createSPI(parts), null);\r\n    \t}\r\n    \r\n    \tstatic SecureRandomSpi createSPI(SecureRandom[] parts)\r\n    \t{\r\n    \t\treturn new CombiSpi(parts);\r\n    \t}\r\n    \r\n    \tpublic static void main(String... args) throws NoSuchAlgorithmException\r\n    \t{\r\n    \t\tSecureRandom[] sources = { SecureRandom.getInstance(&quot;SHA1PRNG&quot;), SecureRandom.getInstance(&quot;Windows-PRNG&quot;) };\r\n    \t\tCombinedRnd secRnd = new CombinedRnd(sources);\r\n\r\n    \t\tbyte[] rndBytes = new byte[17];\r\n    \t\tsecRnd.nextBytes(rndBytes);\r\n\r\n    \t\tfor (byte r : rndBytes)\r\n    \t\t{\r\n    \t\t\tSystem.out.print(String.format(&quot;%02x &quot;, r &amp; 0xFF));\r\n    \t\t}\r\n    \t\tSystem.out.println();\r\n    \t}\r\n    \r\n    \tprivate static final long serialVersionUID = -7550189683373026294L;\r\n    \r\n    }\r\n\r\n  [1]: https://arstechnica.com/information-technology/2013/12/report-nsa-paid-rsa-to-make-flawed-crypto-algorithm-the-default/\r\n\r\n","title":"SecureRandom custom algorithm","body":"<p>Late answer: <strong>Yes</strong> it is possible.</p>\n<p>First I want to note, that I see a real usecase for having a custom random generator:</p>\n<ol>\n<li>Providers of random generators have not had best press, e.g. <a href=\"https://arstechnica.com/information-technology/2013/12/report-nsa-paid-rsa-to-make-flawed-crypto-algorithm-the-default/\" rel=\"nofollow noreferrer\">...paid RSA to make flawed crypto algorithm the default</a>. From this (story true of not true, intended or not) there should not be a blind trust decision in any provider. Flaws of single random generators may be elimintated by combining several generators from independent sources; e.g. <em>Random.org</em> might be conisdered as second source or a generator coming from an different algebraic class of pseudo random algorithms.</li>\n<li>The regular procedure to integrate a random generator into a Java Runtime Environment is developping Provider + Algorithm class and getting it certified + system administration; a huge effort with additional constraints in context of <em>just</em> doing some testing.</li>\n</ol>\n<p>Here is an example with a SecureRandom subclass.</p>\n<pre><code>import java.security.NoSuchAlgorithmException;\nimport java.security.SecureRandom;\nimport java.security.SecureRandomSpi;\nimport java.util.Arrays;\n\n/**\n * Combine several SecureRandom Generators\n * \n * @author Sam Ginrich\n *\n */\npublic class CombinedRnd extends SecureRandom\n{\n\n    private static class CombiSpi extends SecureRandomSpi\n    {\n\n        CombiSpi(SecureRandom[] parts)\n        {\n            this.parts = parts;\n        }\n\n        @Override\n        protected void engineSetSeed(byte[] seed)\n        {\n            parts[0].setSeed(seed);\n        }\n\n        @Override\n        protected void engineNextBytes(byte[] bytes)\n        {\n            Arrays.fill(bytes, (byte) 0);\n            int len = bytes.length;\n            byte[] buf = new byte[len];\n            for (SecureRandom r : parts)\n            {\n                r.nextBytes(buf);\n                for (int j = 0; j &lt; len; j++)\n                {\n                    bytes[j] ^= buf[j];\n                }\n            }\n        }\n\n        @Override\n        protected byte[] engineGenerateSeed(int numBytes)\n        {\n            return null;\n        }\n\n        SecureRandom[] parts;\n\n        private static final long serialVersionUID = -487720505474870937L;\n\n    }\n\n    public CombinedRnd(SecureRandom... parts)\n    {\n        super(createSPI(parts), null);\n    }\n\n    static SecureRandomSpi createSPI(SecureRandom[] parts)\n    {\n        return new CombiSpi(parts);\n    }\n\n    public static void main(String... args) throws NoSuchAlgorithmException\n    {\n        SecureRandom[] sources = { SecureRandom.getInstance(&quot;SHA1PRNG&quot;), SecureRandom.getInstance(&quot;Windows-PRNG&quot;) };\n        CombinedRnd secRnd = new CombinedRnd(sources);\n\n        byte[] rndBytes = new byte[17];\n        secRnd.nextBytes(rndBytes);\n\n        for (byte r : rndBytes)\n        {\n            System.out.print(String.format(&quot;%02x &quot;, r &amp; 0xFF));\n        }\n        System.out.println();\n    }\n\n    private static final long serialVersionUID = -7550189683373026294L;\n\n}\n</code></pre>\n"}],"owner":{"account_id":1192771,"reputation":887,"user_id":1165190,"accept_rate":82,"display_name":"Alvins"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":998,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":2,"score":4,"last_activity_date":1694805599,"creation_date":1468332102,"question_id":38331113,"body_markdown":"For testing purpose I need to use `SecureRandom` with a custom algorithm. How is it possible?\r\n\r\nI think I have to subclass `SecureRandom` and provide a `SecureRandomSpi` custom implementation:\r\n\r\n     167:   /**\r\n     168:      A constructor for SecureRandom. It constructs a new \r\n     169:      SecureRandom using the specified SecureRandomSpi from\r\n     170:      the specified security provier. \r\n     171: \r\n     172:      @param secureRandomSpi A SecureRandomSpi class\r\n     173:      @param provider A Provider class\r\n     174:    */\r\n     175:   protected SecureRandom(SecureRandomSpi secureRandomSpi, Provider provider)\r\n     176:   {\r\n     177:     this(secureRandomSpi, provider, &quot;unknown&quot;);\r\n     178:   }\r\n\r\nIs there a simple way or can anyone provide ad example?","title":"SecureRandom custom algorithm","body":"<p>For testing purpose I need to use <code>SecureRandom</code> with a custom algorithm. How is it possible?</p>\n\n<p>I think I have to subclass <code>SecureRandom</code> and provide a <code>SecureRandomSpi</code> custom implementation:</p>\n\n<pre><code> 167:   /**\n 168:      A constructor for SecureRandom. It constructs a new \n 169:      SecureRandom using the specified SecureRandomSpi from\n 170:      the specified security provier. \n 171: \n 172:      @param secureRandomSpi A SecureRandomSpi class\n 173:      @param provider A Provider class\n 174:    */\n 175:   protected SecureRandom(SecureRandomSpi secureRandomSpi, Provider provider)\n 176:   {\n 177:     this(secureRandomSpi, provider, \"unknown\");\n 178:   }\n</code></pre>\n\n<p>Is there a simple way or can anyone provide ad example?</p>\n"},{"tags":["java","cxf"],"comments":[{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1694756905,"post_id":77109860,"comment_id":135935639,"body_markdown":"Which XML are you deserializing that triggers the exception? Please add it to the question.","body":"Which XML are you deserializing that triggers the exception? Please add it to the question."}],"owner":{"account_id":18578317,"reputation":21,"user_id":13538395,"display_name":"Stackforumuser"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":15,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694804838,"creation_date":1694756216,"question_id":77109860,"body_markdown":"Application A provides the SOAP service endpoint and Application B is the consumer. Application A sends a response ProdDTO\r\n\r\n    class ProdDTO {\r\n        private String a1;\r\n        private String h1;\r\n        private String t1;\r\n    }\r\n\r\nThe consumer is using the following plugin to generate sources from the WSDL\r\n\r\n    &lt;plugin&gt;\r\n    &lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;\r\n    &lt;artifactId&gt;cxf-codegen-plugin&lt;/artifactId&gt;\r\n    &lt;configuration&gt;\r\n    \r\n    &lt;wsdlOptions&gt;\r\n    \t&lt;wsdlOption&gt;\r\n    \t\t&lt;wsdl&gt;wsdl2022&lt;/wsdl&gt;\r\n    \t&lt;/wsdlOption&gt;\r\n    &lt;/wsdloptions&gt;\r\n\r\nThe consumer has been using WSDL since 2022. The generated DTO looks like\r\n\r\n    @XmlAccessorType(XmlAccessType.FIELD)\r\n    @XmlType(name = &quot;prodDTO&quot;, propOrder = { &quot;a1&quot;,&quot;h1&quot;,&quot;t1&quot; })\r\n    public class ProdDTO\r\n    {\r\n        protected String a1;\r\n        protected String h1;\r\n        protected String t1;\r\n    }\r\n      \r\n\r\n Application A added fields to ProdDTO since then\r\n\r\n    private String c1;\r\n    private string s1;\r\n\r\nand there was no issue from the consumer.\r\n\r\nApplication A added recently the below field to ProdDTO\r\n\r\n    private String z1;\r\n\r\nNow the consumer throws error::\r\n```\r\njavax.xml.ws.soap.SOAPFaultException: Unmarshalling Error: unexpected element (uri:&quot;&quot;, local:&quot;z1&quot;).\r\n Expected elements are &lt;{}a1&gt;,&lt;{}h1&gt;,&lt;{}t1&gt;\r\n```\r\nWhy &quot;z1&quot; field raise an error but &quot;c1&quot; and &quot;s1&quot; did not? Does it have to do with propOrder? How do we resolve the issue? The consumer has some restrictions right now and is reluctant to change the code. So what can be done in Application A to resolve this issue? Thanks in advance for any help\r\n\r\n","title":"CXF Unmarshalling error: Unexpected Element","body":"<p>Application A provides the SOAP service endpoint and Application B is the consumer. Application A sends a response ProdDTO</p>\n<pre><code>class ProdDTO {\n    private String a1;\n    private String h1;\n    private String t1;\n}\n</code></pre>\n<p>The consumer is using the following plugin to generate sources from the WSDL</p>\n<pre><code>&lt;plugin&gt;\n&lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;\n&lt;artifactId&gt;cxf-codegen-plugin&lt;/artifactId&gt;\n&lt;configuration&gt;\n\n&lt;wsdlOptions&gt;\n    &lt;wsdlOption&gt;\n        &lt;wsdl&gt;wsdl2022&lt;/wsdl&gt;\n    &lt;/wsdlOption&gt;\n&lt;/wsdloptions&gt;\n</code></pre>\n<p>The consumer has been using WSDL since 2022. The generated DTO looks like</p>\n<pre><code>@XmlAccessorType(XmlAccessType.FIELD)\n@XmlType(name = &quot;prodDTO&quot;, propOrder = { &quot;a1&quot;,&quot;h1&quot;,&quot;t1&quot; })\npublic class ProdDTO\n{\n    protected String a1;\n    protected String h1;\n    protected String t1;\n}\n  \n</code></pre>\n<p>Application A added fields to ProdDTO since then</p>\n<pre><code>private String c1;\nprivate string s1;\n</code></pre>\n<p>and there was no issue from the consumer.</p>\n<p>Application A added recently the below field to ProdDTO</p>\n<pre><code>private String z1;\n</code></pre>\n<p>Now the consumer throws error::</p>\n<pre><code>javax.xml.ws.soap.SOAPFaultException: Unmarshalling Error: unexpected element (uri:&quot;&quot;, local:&quot;z1&quot;).\n Expected elements are &lt;{}a1&gt;,&lt;{}h1&gt;,&lt;{}t1&gt;\n</code></pre>\n<p>Why &quot;z1&quot; field raise an error but &quot;c1&quot; and &quot;s1&quot; did not? Does it have to do with propOrder? How do we resolve the issue? The consumer has some restrictions right now and is reluctant to change the code. So what can be done in Application A to resolve this issue? Thanks in advance for any help</p>\n"},{"tags":["java","calendar"],"comments":[{"owner":{"account_id":1441481,"reputation":10825,"user_id":1361506,"display_name":"azurefrog"},"score":0,"creation_date":1400795275,"post_id":23817522,"comment_id":36641723,"body_markdown":"If it&#39;s truly an optional field, why do you have places all over your code trying to pull the value out?  Just encapsulate the behavior into the owning class with a decent default when the calendar isn&#39;t set, and get rid of `getCal()`.","body":"If it&#39;s truly an optional field, why do you have places all over your code trying to pull the value out?  Just encapsulate the behavior into the owning class with a decent default when the calendar isn&#39;t set, and get rid of <code>getCal()</code>."},{"owner":{"account_id":1869831,"reputation":4089,"user_id":1692341,"accept_rate":90,"display_name":"Steffen"},"score":0,"creation_date":1400795289,"post_id":23817522,"comment_id":36641729,"body_markdown":"https://stackoverflow.com/questions/271526/avoiding-null-statements-in-java","body":"<a href=\"https://stackoverflow.com/questions/271526/avoiding-null-statements-in-java\" title=\"avoiding null statements in java\">stackoverflow.com/questions/271526/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":1218491,"reputation":1431,"user_id":1185614,"display_name":"lpratlong"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1400795806,"creation_date":1400795086,"answer_id":23817573,"question_id":23817522,"body_markdown":"If `setCal` is not called and so if `cal` is not set, why do you want to send other thing than `null` ?\r\n`null` is the best thing to return in this case. Null is also a value, which give an indication to the developper.\r\nAnd, because developpers don&#39;t know that your `getCal` can&#39;t return null, they will check for null even if you never return null (I assume that for getter and setter, developpers don&#39;t read javadoc).\r\n\r\nMaybe you can send a new instance of default Calendar. But default value is the current date, so I don&#39;t think it&#39;s a good idea since it does not represent the fact that the Calendar has not been set.\r\n\r\nOr you can throw an exception... but do not abuse of Exception. Exception are designed to defined error or bad behavior, not to simplify functionnal checks.\r\nHowever, to protect the `setCal` method of null value, here you can throw an `IllegalArgumentException` if user set null value.","title":"Calendar Null Object","body":"<p>If <code>setCal</code> is not called and so if <code>cal</code> is not set, why do you want to send other thing than <code>null</code> ?\n<code>null</code> is the best thing to return in this case. Null is also a value, which give an indication to the developper.\nAnd, because developpers don't know that your <code>getCal</code> can't return null, they will check for null even if you never return null (I assume that for getter and setter, developpers don't read javadoc).</p>\n\n<p>Maybe you can send a new instance of default Calendar. But default value is the current date, so I don't think it's a good idea since it does not represent the fact that the Calendar has not been set.</p>\n\n<p>Or you can throw an exception... but do not abuse of Exception. Exception are designed to defined error or bad behavior, not to simplify functionnal checks.\nHowever, to protect the <code>setCal</code> method of null value, here you can throw an <code>IllegalArgumentException</code> if user set null value.</p>\n"},{"comments":[{"owner":{"account_id":1218491,"reputation":1431,"user_id":1185614,"display_name":"lpratlong"},"score":0,"creation_date":1400795648,"post_id":23817623,"comment_id":36641880,"body_markdown":"It returns default value, so the current Calendar. Don&#39;t think it&#39;s a good thing.","body":"It returns default value, so the current Calendar. Don&#39;t think it&#39;s a good thing."}],"tags":[],"owner":{"account_id":3527115,"reputation":415,"user_id":2947886,"display_name":"A. Agarwal"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1400795307,"creation_date":1400795307,"answer_id":23817623,"question_id":23817522,"body_markdown":"would something like this fix your problem ?\r\n\r\n    public Calendar getCal() {\r\n        if (cal != null)\r\n            return cal;\r\n        return Calendar.getInstance(); // to be returned when cal is null\r\n    }","title":"Calendar Null Object","body":"<p>would something like this fix your problem ?</p>\n\n<pre><code>public Calendar getCal() {\n    if (cal != null)\n        return cal;\n    return Calendar.getInstance(); // to be returned when cal is null\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":438405,"reputation":6101,"user_id":826657,"accept_rate":91,"display_name":"Rachit Mishra"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1400795312,"creation_date":1400795312,"answer_id":23817626,"question_id":23817522,"body_markdown":"Returning null and null checks are best bet here, other wise, what you may do is \r\n\r\nInitialize the Calendar to today, if that fits your scenario.\r\n\r\nor \r\n\r\nThrow an exception and ask to set the Calendar.","title":"Calendar Null Object","body":"<p>Returning null and null checks are best bet here, other wise, what you may do is </p>\n\n<p>Initialize the Calendar to today, if that fits your scenario.</p>\n\n<p>or </p>\n\n<p>Throw an exception and ask to set the Calendar.</p>\n"},{"comments":[{"owner":{"account_id":1218491,"reputation":1431,"user_id":1185614,"display_name":"lpratlong"},"score":0,"creation_date":1400795587,"post_id":23817648,"comment_id":36641857,"body_markdown":"And you will have a Calendar with the current date, so, it does not represent the fact that no Calendar has been set.","body":"And you will have a Calendar with the current date, so, it does not represent the fact that no Calendar has been set."}],"tags":[],"owner":{"account_id":1908808,"reputation":1499,"user_id":1723135,"display_name":"jurassix"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1400795397,"creation_date":1400795397,"answer_id":23817648,"question_id":23817522,"body_markdown":"Just add a default value to the property:\r\n\r\n    private Calendar cal = Calendar.getInstance();","title":"Calendar Null Object","body":"<p>Just add a default value to the property:</p>\n\n<pre><code>private Calendar cal = Calendar.getInstance();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3433587,"reputation":13,"user_id":2877228,"display_name":"user2877228"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1400797139,"creation_date":1400797139,"answer_id":23817998,"question_id":23817522,"body_markdown":"If you are against doing checks for null all over your code, you could implement something like this:\r\n\r\n        public boolean hasCal(){\r\n            if(this.cal == null){\r\n                return false;\r\n            }\r\n            return true;\r\n        }\r\n\r\nThis would make your code more readable, but you would still have to have `getCal()` return something even if the `Test` object does not have one, and returning `null` seems to be the best option in this case.\r\n\r\n","title":"Calendar Null Object","body":"<p>If you are against doing checks for null all over your code, you could implement something like this:</p>\n\n<pre><code>    public boolean hasCal(){\n        if(this.cal == null){\n            return false;\n        }\n        return true;\n    }\n</code></pre>\n\n<p>This would make your code more readable, but you would still have to have <code>getCal()</code> return something even if the <code>Test</code> object does not have one, and returning <code>null</code> seems to be the best option in this case.</p>\n"},{"tags":[],"owner":{"account_id":4132913,"reputation":132,"user_id":3390291,"display_name":"Firas Moalla"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1400797196,"creation_date":1400797196,"answer_id":23818012,"question_id":23817522,"body_markdown":"The context of your code is not clear, returning null can be advantageous depending on the context. But in general, when you&#39;re trying to say &quot;I have no information to give back&quot;, then returning null clearly shows it. Additionally it makes it easier for others to observe that.\r\n\r\n&gt;is there any option rather than returning null.\r\n\r\nIn fact, there are many other ways; it depends on the context. An alternative example is the &#39;[Option Pattern](http://en.wikipedia.org/wiki/Option_type)&#39;. Which its idea relies on encapsulating an optional value; either None or the original data. This way you could return a meaningful value (which is heavily used in Haskell, and to some extent Scala). Although, it should be done with care as returning an encapsulation that indicates &#39;empty&#39; may not be noticed unless carefully documented and agreed with as a convention (with your team for instance).","title":"Calendar Null Object","body":"<p>The context of your code is not clear, returning null can be advantageous depending on the context. But in general, when you're trying to say \"I have no information to give back\", then returning null clearly shows it. Additionally it makes it easier for others to observe that.</p>\n\n<blockquote>\n  <p>is there any option rather than returning null.</p>\n</blockquote>\n\n<p>In fact, there are many other ways; it depends on the context. An alternative example is the '<a href=\"http://en.wikipedia.org/wiki/Option_type\" rel=\"nofollow\">Option Pattern</a>'. Which its idea relies on encapsulating an optional value; either None or the original data. This way you could return a meaningful value (which is heavily used in Haskell, and to some extent Scala). Although, it should be done with care as returning an encapsulation that indicates 'empty' may not be noticed unless carefully documented and agreed with as a convention (with your team for instance).</p>\n"}],"owner":{"account_id":788725,"reputation":2193,"user_id":856951,"accept_rate":56,"display_name":"vjk"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9571,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":6,"score":0,"last_activity_date":1694804761,"creation_date":1400794836,"question_id":23817522,"body_markdown":"    public class Test {\r\n        \r\n        //required fields\r\n        private String str1;\r\n        private String str2;\r\n        \r\n        //optional\r\n        private Calendar cal;\r\n        \r\n        public Test(String a, String b){\r\n            str1 = a;\r\n            str2 = b;\r\n        }\r\n        \r\n        //getter for str1 and str2\r\n        \r\n        public void setCal(Calendar cal){\r\n            this.cal = cal;\r\n        }\r\n        \r\n        public Calendar getCal() {\r\n            return cal;\r\n        }\r\n    }\r\n\r\nI have a class like this where the calendar object is optional. If setCal() is not called and some one calls the getCal() method, is there any option rather than returning null. If a null is returned then I have to do null checks every where. Is there any class that extends calendar without doing anything like Null Object Pattern.\r\n\r\nWhats the best option over here when getCal() is called?","title":"Calendar Null Object","body":"<pre><code>public class Test {\n\n    //required fields\n    private String str1;\n    private String str2;\n\n    //optional\n    private Calendar cal;\n\n    public Test(String a, String b){\n        str1 = a;\n        str2 = b;\n    }\n\n    //getter for str1 and str2\n\n    public void setCal(Calendar cal){\n        this.cal = cal;\n    }\n\n    public Calendar getCal() {\n        return cal;\n    }\n}\n</code></pre>\n\n<p>I have a class like this where the calendar object is optional. If setCal() is not called and some one calls the getCal() method, is there any option rather than returning null. If a null is returned then I have to do null checks every where. Is there any class that extends calendar without doing anything like Null Object Pattern.</p>\n\n<p>Whats the best option over here when getCal() is called?</p>\n"},{"tags":["java","selenium","azure-devops","cucumber","cucumber-java"],"answers":[{"tags":[],"owner":{"account_id":16448039,"reputation":28239,"user_id":11882186,"display_name":"Levi Lu-MSFT"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1597311593,"creation_date":1597311593,"answer_id":63392320,"question_id":63374449,"body_markdown":"I afraid there is not a plugin available to show the screenshot in azure report currently. For the screenshot is generated in the .html cucumber report. And azure devops doesnot support publishing generic HTML in build/release pipeline. \r\n\r\nI guess the test result you saw is under the **Tests** tab of the azure pipeline build result page. And it is the xml format report which has been published to azure devops, not the html report which contains the screenshots.  \r\n\r\nThere is [feature request][1] regarding this issue which has been submitted to microsoft develop team. You can go vote on it or create one of your own.\r\n\r\nAs a workaround, you can use the [publish build artifacts task][2] to publish the screenshots as artifacts of the pipeline.\r\n\r\n    steps:\r\n    - task: PublishBuildArtifacts@1\r\n      displayName: &#39;Publish Artifact: TestScreenshots&#39;\r\n      inputs:\r\n        PathtoPublish: &#39;$(System.defaultworkingdirectory)/target/home-page-html&#39; #path to the test result folder(ie. html:target/home-page-html)\r\n        ArtifactName: TestScreenshots\r\n\r\n\r\nThen you can get the screenshots from the build **Summary** page, See below: \r\n\r\nIf the screenshots reside in multiple test result folders. You can use [copy files task][3] to copy the screenshots to a place and then publish to build artifacts.\r\n\r\n[![enter image description here][4]][4] \r\n\r\n\r\n  [1]: https://developercommunity.visualstudio.com/idea/491426/support-for-generic-html-publishing-inside-build-a.html\r\n  [2]: https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/utility/publish-build-artifacts?view=azure-devops\r\n  [3]: https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/utility/copy-files?view=azure-devops&amp;tabs=yaml\r\n  [4]: https://i.stack.imgur.com/7rdkO.png","title":"How to attach screenshot to azure report for selenium java cucumber","body":"<p>I afraid there is not a plugin available to show the screenshot in azure report currently. For the screenshot is generated in the .html cucumber report. And azure devops doesnot support publishing generic HTML in build/release pipeline.</p>\n<p>I guess the test result you saw is under the <strong>Tests</strong> tab of the azure pipeline build result page. And it is the xml format report which has been published to azure devops, not the html report which contains the screenshots.</p>\n<p>There is <a href=\"https://developercommunity.visualstudio.com/idea/491426/support-for-generic-html-publishing-inside-build-a.html\" rel=\"nofollow noreferrer\">feature request</a> regarding this issue which has been submitted to microsoft develop team. You can go vote on it or create one of your own.</p>\n<p>As a workaround, you can use the <a href=\"https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/utility/publish-build-artifacts?view=azure-devops\" rel=\"nofollow noreferrer\">publish build artifacts task</a> to publish the screenshots as artifacts of the pipeline.</p>\n<pre><code>steps:\n- task: PublishBuildArtifacts@1\n  displayName: 'Publish Artifact: TestScreenshots'\n  inputs:\n    PathtoPublish: '$(System.defaultworkingdirectory)/target/home-page-html' #path to the test result folder(ie. html:target/home-page-html)\n    ArtifactName: TestScreenshots\n</code></pre>\n<p>Then you can get the screenshots from the build <strong>Summary</strong> page, See below:</p>\n<p>If the screenshots reside in multiple test result folders. You can use <a href=\"https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/utility/copy-files?view=azure-devops&amp;tabs=yaml\" rel=\"nofollow noreferrer\">copy files task</a> to copy the screenshots to a place and then publish to build artifacts.</p>\n<p><a href=\"https://i.stack.imgur.com/7rdkO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7rdkO.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":29455322,"reputation":1,"user_id":22571325,"display_name":"susanE"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694804203,"creation_date":1694804203,"answer_id":77114776,"question_id":63374449,"body_markdown":"For a while now, you have been say that there is currently no way to include screenshots (or user comments) in the test plan report pdf.  The fact that people keep asking this question should show you that SUCH FUNCTIONALITY IS NEEDED!  Many, many businesses that answer to regulatory bodies MUST be able to produce test results ON PAPER that include screenshots and user comments.  As it currently is, when someone asks me about the Azure testing module, I have to say that it might be good if we could do something about the reports.  But since we cannot, I cannot recommend Azure DevOps at all.\r\n","title":"How to attach screenshot to azure report for selenium java cucumber","body":"<p>For a while now, you have been say that there is currently no way to include screenshots (or user comments) in the test plan report pdf.  The fact that people keep asking this question should show you that SUCH FUNCTIONALITY IS NEEDED!  Many, many businesses that answer to regulatory bodies MUST be able to produce test results ON PAPER that include screenshots and user comments.  As it currently is, when someone asks me about the Azure testing module, I have to say that it might be good if we could do something about the reports.  But since we cannot, I cannot recommend Azure DevOps at all.</p>\n"}],"owner":{"account_id":13116828,"reputation":35,"user_id":9475724,"display_name":"abhilash mt"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1587,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":63392320,"answer_count":2,"score":0,"last_activity_date":1694804203,"creation_date":1597227380,"question_id":63374449,"body_markdown":"I am running my selenium java test suit in azure devops, after the execution i am able to see the result, but there is no attachment of failed screenshots. But when i run it in the local machine the cucumber report which is generating contains the screenshot.\r\n\r\nBelow is the code i have used to attach screenshot\r\n```\r\n@AfterStep\r\n\tpublic void embedScreenshot(Scenario scenario) throws Exception {\r\n\t\tif (scenario.isFailed()) {\r\n\t\t\ttry {\r\n\t\t\t\tbyte[] scrFile = ((TakesScreenshot) driver).getScreenshotAs(OutputType.BYTES);\r\n\t\t\t\tscenario.embed(scrFile, &quot;image/png&quot;);\r\n\t\t\t} catch (WebDriverException somePlatformsDontSupportScreenshots) {\r\n\t\t\t\tSystem.err.println(somePlatformsDontSupportScreenshots.getMessage());\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n```\r\n\r\nIs there any plugin or anything else i can use to show the failed screenshot in the azure report?","title":"How to attach screenshot to azure report for selenium java cucumber","body":"<p>I am running my selenium java test suit in azure devops, after the execution i am able to see the result, but there is no attachment of failed screenshots. But when i run it in the local machine the cucumber report which is generating contains the screenshot.</p>\n<p>Below is the code i have used to attach screenshot</p>\n<pre><code>@AfterStep\n    public void embedScreenshot(Scenario scenario) throws Exception {\n        if (scenario.isFailed()) {\n            try {\n                byte[] scrFile = ((TakesScreenshot) driver).getScreenshotAs(OutputType.BYTES);\n                scenario.embed(scrFile, &quot;image/png&quot;);\n            } catch (WebDriverException somePlatformsDontSupportScreenshots) {\n                System.err.println(somePlatformsDontSupportScreenshots.getMessage());\n            }\n        }\n    }\n</code></pre>\n<p>Is there any plugin or anything else i can use to show the failed screenshot in the azure report?</p>\n"},{"tags":["java","oracle","hibernate","wildfly","wildfly-27"],"comments":[{"owner":{"account_id":1491171,"reputation":3291,"user_id":1398228,"display_name":"ehsavoie"},"score":0,"creation_date":1694764253,"post_id":77107921,"comment_id":135936779,"body_markdown":"How do you access the driver ?","body":"How do you access the driver ?"},{"owner":{"account_id":10118761,"reputation":11,"user_id":7476497,"display_name":"Emerson Diego"},"score":0,"creation_date":1694777488,"post_id":77107921,"comment_id":135939136,"body_markdown":"The application access the database by datasource in wildfly. And wildfly connects to database by driver in localized in a specific folder of wildfly","body":"The application access the database by datasource in wildfly. And wildfly connects to database by driver in localized in a specific folder of wildfly"},{"owner":{"account_id":51161,"reputation":17015,"user_id":152794,"display_name":"James R. Perkins"},"score":0,"creation_date":1694885849,"post_id":77107921,"comment_id":135951521,"body_markdown":"Are you using the Jakarta EE 10 version of the driver?","body":"Are you using the Jakarta EE 10 version of the driver?"}],"answers":[{"tags":[],"owner":{"account_id":938600,"reputation":566,"user_id":967088,"display_name":"Will Tatam"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694803761,"creation_date":1694803761,"answer_id":77114748,"question_id":77107921,"body_markdown":"You need to change the manifest of your deployment artifact to expose that module to your applications classpath","title":"WildFly 27.0.0.Final and Oracle driver classes are inaccessible","body":"<p>You need to change the manifest of your deployment artifact to expose that module to your applications classpath</p>\n"}],"owner":{"account_id":10118761,"reputation":11,"user_id":7476497,"display_name":"Emerson Diego"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":129,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694803761,"creation_date":1694720301,"question_id":77107921,"body_markdown":"After migrating an application from WildFly 21 to WildFly 27, I am encountering the following error when deploying the application:\r\n\r\nOracle JDBC driver classes are inaccessible and thus, certain DDL types like ARRAY can not be used!\r\n\r\nIt&#39;s indeed strange because the driver is located in modules\\system\\layers\\base, and when I access the WildFly administrative interface and perform a connection test for the datasource, it succeeds. The error only occurs when I deploy the application.\r\n\r\nHas anyone encountered this issue before and could help?","title":"WildFly 27.0.0.Final and Oracle driver classes are inaccessible","body":"<p>After migrating an application from WildFly 21 to WildFly 27, I am encountering the following error when deploying the application:</p>\n<p>Oracle JDBC driver classes are inaccessible and thus, certain DDL types like ARRAY can not be used!</p>\n<p>It's indeed strange because the driver is located in modules\\system\\layers\\base, and when I access the WildFly administrative interface and perform a connection test for the datasource, it succeeds. The error only occurs when I deploy the application.</p>\n<p>Has anyone encountered this issue before and could help?</p>\n"},{"tags":["java","visual-studio-code","silent"],"answers":[{"comments":[{"owner":{"account_id":1960454,"reputation":44539,"user_id":1762224,"accept_rate":61,"display_name":"Mr. Polywhirl"},"score":0,"creation_date":1694818852,"post_id":77114451,"comment_id":135946117,"body_markdown":"@Warthog is Java on the path? Is JAVA_HOME set? Here is an excellent guide on [setting up VS Code for Java development](https://dev.to/robole/setting-up-vs-code-for-java-development-4c49).","body":"@Warthog is Java on the path? Is JAVA_HOME set? Here is an excellent guide on <a href=\"https://dev.to/robole/setting-up-vs-code-for-java-development-4c49\" rel=\"nofollow noreferrer\">setting up VS Code for Java development</a>."}],"tags":[],"owner":{"account_id":1960454,"reputation":44539,"user_id":1762224,"accept_rate":61,"display_name":"Mr. Polywhirl"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694803566,"creation_date":1694800032,"answer_id":77114451,"question_id":77114247,"body_markdown":"If already have VS Code installed, you can install extensions [via the command line](https://stackoverflow.com/questions/34286515/how-to-install-visual-studio-code-extensions-from-command-line):\r\n\r\n```shell\r\n# Install the Java Language Pack\r\ncode --install-extension vscjava.vscode-java-pack\r\n```\r\n\r\nHere are the extensions included in the Java Language pack:\r\n\r\n| Name | Identifier | Included |\r\n|-|-|-|\r\n| [Extension Pack for Java][1] | `vscjava.vscode-java-pack` | N/A |\r\n| [Language Support for Java™ by Red Hat][2] | `redhat.java` | Yes |\r\n| [Debugger for Java][3] | `vscjava.vscode-java-debug` | Yes |\r\n| [Test Runner for Java][4] | `vscjava.vscode-java-test` | Yes |\r\n| [Maven for Java][5] | `vscjava.vscode-maven` | Yes |\r\n| [Project Manager for Java][6] | `vscjava.vscode-java-dependency` | Yes |\r\n| [IntelliCode][7] | `visualstudioexptteam.vscodeintellicode` | Yes |\r\n\r\nRecommended:\r\n\r\n| Name | Identifier\r\n|-|-|\r\n| [Spring Boot Extension Pack][8] | `vmware.vscode-boot-dev-pack` |\r\n| [Gradle for Java][9] | `vscjava.vscode-gradle` |\r\n| [Community Server Connectors][10] _(for Apache Felix, Karaf, Tomcat, Jetty, etc.)_ | `redhat.vscode-community-server-connector` |\r\n| [Server Connector][11] _(Red Hat Servers, for example Wildfly)_ | `redhat.vscode-server-connector` |\r\n| [Extension Pack for MicroProfile][12] | `MicroProfile-Community.vscode-microprofile-pack` |\r\n| [CheckStyle][13] | `shengchen.vscode-checkstyle` |\r\n| [SonarLint][14] | `SonarSource.sonarlint-vscode` |\r\n\r\nOther noteworthy extensions:\r\n\r\n| Name | Identifier |\r\n|-|-|\r\n| [Java Code Generators][15] | `sohibe.java-generate-setters-getters` |\r\n\r\n\r\n  [1]: https://marketplace.visualstudio.com/items?itemName=vscjava.vscode-java-pack\r\n  [2]: https://marketplace.visualstudio.com/items?itemName=redhat.java\r\n  [3]: https://marketplace.visualstudio.com/items?itemName=vscjava.vscode-java-debug\r\n  [4]: https://marketplace.visualstudio.com/items?itemName=vscjava.vscode-java-test\r\n  [5]: https://marketplace.visualstudio.com/items?itemName=vscjava.vscode-maven\r\n  [6]: https://marketplace.visualstudio.com/items?itemName=vscjava.vscode-java-dependency\r\n  [7]: https://marketplace.visualstudio.com/items?itemName=VisualStudioExptTeam.vscodeintellicode\r\n  [8]: https://marketplace.visualstudio.com/items?itemName=vmware.vscode-boot-dev-pack\r\n  [9]: https://marketplace.visualstudio.com/items?itemName=vscjava.vscode-gradle\r\n  [10]: https://marketplace.visualstudio.com/items?itemName=redhat.vscode-community-server-connector\r\n  [11]: https://marketplace.visualstudio.com/items?itemName=redhat.vscode-server-connector\r\n  [12]: https://marketplace.visualstudio.com/items?itemName=MicroProfile-Community.vscode-microprofile-pack\r\n  [13]: https://marketplace.visualstudio.com/items?itemName=shengchen.vscode-checkstyle\r\n  [14]: https://marketplace.visualstudio.com/items?itemName=SonarSource.sonarlint-vscode\r\n  [15]: https://marketplace.visualstudio.com/items?itemName=sohibe.java-generate-setters-getters","title":"Coding Pack for Java - Silent install?","body":"<p>If already have VS Code installed, you can install extensions <a href=\"https://stackoverflow.com/questions/34286515/how-to-install-visual-studio-code-extensions-from-command-line\">via the command line</a>:</p>\n<pre class=\"lang-bash prettyprint-override\"><code># Install the Java Language Pack\ncode --install-extension vscjava.vscode-java-pack\n</code></pre>\n<p>Here are the extensions included in the Java Language pack:</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>Name</th>\n<th>Identifier</th>\n<th>Included</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><a href=\"https://marketplace.visualstudio.com/items?itemName=vscjava.vscode-java-pack\" rel=\"nofollow noreferrer\">Extension Pack for Java</a></td>\n<td><code>vscjava.vscode-java-pack</code></td>\n<td>N/A</td>\n</tr>\n<tr>\n<td><a href=\"https://marketplace.visualstudio.com/items?itemName=redhat.java\" rel=\"nofollow noreferrer\">Language Support for Java™ by Red Hat</a></td>\n<td><code>redhat.java</code></td>\n<td>Yes</td>\n</tr>\n<tr>\n<td><a href=\"https://marketplace.visualstudio.com/items?itemName=vscjava.vscode-java-debug\" rel=\"nofollow noreferrer\">Debugger for Java</a></td>\n<td><code>vscjava.vscode-java-debug</code></td>\n<td>Yes</td>\n</tr>\n<tr>\n<td><a href=\"https://marketplace.visualstudio.com/items?itemName=vscjava.vscode-java-test\" rel=\"nofollow noreferrer\">Test Runner for Java</a></td>\n<td><code>vscjava.vscode-java-test</code></td>\n<td>Yes</td>\n</tr>\n<tr>\n<td><a href=\"https://marketplace.visualstudio.com/items?itemName=vscjava.vscode-maven\" rel=\"nofollow noreferrer\">Maven for Java</a></td>\n<td><code>vscjava.vscode-maven</code></td>\n<td>Yes</td>\n</tr>\n<tr>\n<td><a href=\"https://marketplace.visualstudio.com/items?itemName=vscjava.vscode-java-dependency\" rel=\"nofollow noreferrer\">Project Manager for Java</a></td>\n<td><code>vscjava.vscode-java-dependency</code></td>\n<td>Yes</td>\n</tr>\n<tr>\n<td><a href=\"https://marketplace.visualstudio.com/items?itemName=VisualStudioExptTeam.vscodeintellicode\" rel=\"nofollow noreferrer\">IntelliCode</a></td>\n<td><code>visualstudioexptteam.vscodeintellicode</code></td>\n<td>Yes</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>Recommended:</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>Name</th>\n<th>Identifier</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><a href=\"https://marketplace.visualstudio.com/items?itemName=vmware.vscode-boot-dev-pack\" rel=\"nofollow noreferrer\">Spring Boot Extension Pack</a></td>\n<td><code>vmware.vscode-boot-dev-pack</code></td>\n</tr>\n<tr>\n<td><a href=\"https://marketplace.visualstudio.com/items?itemName=vscjava.vscode-gradle\" rel=\"nofollow noreferrer\">Gradle for Java</a></td>\n<td><code>vscjava.vscode-gradle</code></td>\n</tr>\n<tr>\n<td><a href=\"https://marketplace.visualstudio.com/items?itemName=redhat.vscode-community-server-connector\" rel=\"nofollow noreferrer\">Community Server Connectors</a> <em>(for Apache Felix, Karaf, Tomcat, Jetty, etc.)</em></td>\n<td><code>redhat.vscode-community-server-connector</code></td>\n</tr>\n<tr>\n<td><a href=\"https://marketplace.visualstudio.com/items?itemName=redhat.vscode-server-connector\" rel=\"nofollow noreferrer\">Server Connector</a> <em>(Red Hat Servers, for example Wildfly)</em></td>\n<td><code>redhat.vscode-server-connector</code></td>\n</tr>\n<tr>\n<td><a href=\"https://marketplace.visualstudio.com/items?itemName=MicroProfile-Community.vscode-microprofile-pack\" rel=\"nofollow noreferrer\">Extension Pack for MicroProfile</a></td>\n<td><code>MicroProfile-Community.vscode-microprofile-pack</code></td>\n</tr>\n<tr>\n<td><a href=\"https://marketplace.visualstudio.com/items?itemName=shengchen.vscode-checkstyle\" rel=\"nofollow noreferrer\">CheckStyle</a></td>\n<td><code>shengchen.vscode-checkstyle</code></td>\n</tr>\n<tr>\n<td><a href=\"https://marketplace.visualstudio.com/items?itemName=SonarSource.sonarlint-vscode\" rel=\"nofollow noreferrer\">SonarLint</a></td>\n<td><code>SonarSource.sonarlint-vscode</code></td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>Other noteworthy extensions:</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>Name</th>\n<th>Identifier</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><a href=\"https://marketplace.visualstudio.com/items?itemName=sohibe.java-generate-setters-getters\" rel=\"nofollow noreferrer\">Java Code Generators</a></td>\n<td><code>sohibe.java-generate-setters-getters</code></td>\n</tr>\n</tbody>\n</table>\n</div>"}],"owner":{"account_id":29454670,"reputation":9,"user_id":22570808,"display_name":"Warthog"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":108,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1695016990,"answer_count":1,"score":0,"last_activity_date":1694803566,"creation_date":1694797866,"question_id":77114247,"body_markdown":"Is there a Windows silent install for the Coding Pack for Java? I have JavaCodingPack-0.4.1.exe and I have tried /? to no avail and tried various other switches. Trying to get this together for a class of coders.\r\n\r\nhttps://code.visualstudio.com/docs/languages/java\r\n\r\nThere was no silent installation I could see.","title":"Coding Pack for Java - Silent install?","body":"<p>Is there a Windows silent install for the Coding Pack for Java? I have JavaCodingPack-0.4.1.exe and I have tried /? to no avail and tried various other switches. Trying to get this together for a class of coders.</p>\n<p><a href=\"https://code.visualstudio.com/docs/languages/java\" rel=\"nofollow noreferrer\">https://code.visualstudio.com/docs/languages/java</a></p>\n<p>There was no silent installation I could see.</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":1607232,"reputation":198,"user_id":1487078,"display_name":"vivek"},"score":0,"creation_date":1396879266,"post_id":22914536,"comment_id":34974097,"body_markdown":"is your thread running? \nYou havent called \n   androidDisplay.start();\nmethod in your code","body":"is your thread running?  You havent called     androidDisplay.start(); method in your code"},{"owner":{"account_id":1290116,"reputation":6044,"user_id":1242380,"accept_rate":89,"display_name":"Neil Townsend"},"score":0,"creation_date":1396879417,"post_id":22914536,"comment_id":34974193,"body_markdown":"Have you put any logging statements in onResume to verify that it isn&#39;t being called?","body":"Have you put any logging statements in onResume to verify that it isn&#39;t being called?"},{"owner":{"account_id":3277574,"reputation":167,"user_id":2759103,"accept_rate":62,"display_name":"2851999"},"score":0,"creation_date":1396879417,"post_id":22914536,"comment_id":34974194,"body_markdown":"Yes, in the AndroidDisplay class I use \t\tthis.androidGameThread.setRunning(true);\nthis.androidGameThread.start();","body":"Yes, in the AndroidDisplay class I use \t\tthis.androidGameThread.setRunning(true); this.androidGameThread.start();"},{"owner":{"account_id":3277574,"reputation":167,"user_id":2759103,"accept_rate":62,"display_name":"2851999"},"score":0,"creation_date":1396879473,"post_id":22914536,"comment_id":34974239,"body_markdown":"I have tried putting a log there, that is why I think it isn&#39;t being called.","body":"I have tried putting a log there, that is why I think it isn&#39;t being called."},{"owner":{"account_id":1607232,"reputation":198,"user_id":1487078,"display_name":"vivek"},"score":0,"creation_date":1396879886,"post_id":22914536,"comment_id":34974562,"body_markdown":"Also, can you explain the overloading of onCreate() Method of your Activity?\nCorrect me if i am wrong . I think when the Activity is created \nActivity.onCreate(Bundle bun) is called . And this method doesn&#39;t creates any thread .","body":"Also, can you explain the overloading of onCreate() Method of your Activity? Correct me if i am wrong . I think when the Activity is created  Activity.onCreate(Bundle bun) is called . And this method doesn&#39;t creates any thread ."},{"owner":{"account_id":3277574,"reputation":167,"user_id":2759103,"accept_rate":62,"display_name":"2851999"},"score":0,"creation_date":1396880258,"post_id":22914536,"comment_id":34974842,"body_markdown":"I have got two methods, onCreate(Bundle savedInstanceState) and the other is onCreate(BaseGame androidGame, Bundle savedInstanceState), I have one class that extends the AndroidActivity shown above and the onCreate(Bundle savedInstanceState) is called by Android, then in this method that is overridden, I call the other one and pass an instance of BaseGame to it and therefore calls the other method. So in the test I have made I am using within the overridden onCreate(Bundle savedInstanceState) method the code: this.onCreate(new FileTest() ,  savedInstanceState);","body":"I have got two methods, onCreate(Bundle savedInstanceState) and the other is onCreate(BaseGame androidGame, Bundle savedInstanceState), I have one class that extends the AndroidActivity shown above and the onCreate(Bundle savedInstanceState) is called by Android, then in this method that is overridden, I call the other one and pass an instance of BaseGame to it and therefore calls the other method. So in the test I have made I am using within the overridden onCreate(Bundle savedInstanceState) method the code: this.onCreate(new FileTest() ,  savedInstanceState);"},{"owner":{"account_id":1607232,"reputation":198,"user_id":1487078,"display_name":"vivek"},"score":0,"creation_date":1396881391,"post_id":22914536,"comment_id":34975686,"body_markdown":"can you add full code of your testing class ?","body":"can you add full code of your testing class ?"},{"owner":{"account_id":1607232,"reputation":198,"user_id":1487078,"display_name":"vivek"},"score":0,"creation_date":1396881877,"post_id":22914536,"comment_id":34976079,"body_markdown":"this.onCreate(new FileTest() ,  savedInstanceState);\n will call \n     oncreateMethod( BaseGame androidGame , Bundle savedInstanceState) \n\nOF YOUR TESTING CLASS","body":"this.onCreate(new FileTest() ,  savedInstanceState);  will call       oncreateMethod( BaseGame androidGame , Bundle savedInstanceState)   OF YOUR TESTING CLASS"},{"owner":{"account_id":3277574,"reputation":167,"user_id":2759103,"accept_rate":62,"display_name":"2851999"},"score":0,"creation_date":1396882302,"post_id":22914536,"comment_id":34976377,"body_markdown":"Yes, I have a class called MainActivity that extends AndroidActivity and FileTest which extends BaseGame, they are separate classes. I have tested it and it does work as expected until, I go away from the app and then go back to it.","body":"Yes, I have a class called MainActivity that extends AndroidActivity and FileTest which extends BaseGame, they are separate classes. I have tested it and it does work as expected until, I go away from the app and then go back to it."},{"owner":{"account_id":3277574,"reputation":167,"user_id":2759103,"accept_rate":62,"display_name":"2851999"},"score":0,"creation_date":1396882712,"post_id":22914536,"comment_id":34976707,"body_markdown":"Quick update, tested again, it does work when turning the screen off and on, and when going away from the app it eventually says that it is not responding as if the thread never restarted.","body":"Quick update, tested again, it does work when turning the screen off and on, and when going away from the app it eventually says that it is not responding as if the thread never restarted."}],"answers":[{"tags":[],"owner":{"account_id":1607232,"reputation":198,"user_id":1487078,"display_name":"vivek"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1396880127,"creation_date":1396880127,"answer_id":22915014,"question_id":22914536,"body_markdown":"Possibly issue could me method overloading of Activity.onCreate() Method. \r\n     \r\n     protected void onCreate(Bundle savedInstanceState) \r\nThis method (which will be called when activity is created.) doesn&#39;t create any thread .\r\n\r\nI dont know if following method will be called when activity is created\r\n     \r\n     protected void onCreate(BaseGame androidGame , Bundle savedInstanceState)\r\n\r\n\r\n","title":"Android onResume() not being called","body":"<p>Possibly issue could me method overloading of Activity.onCreate() Method. </p>\n\n<pre><code> protected void onCreate(Bundle savedInstanceState) \n</code></pre>\n\n<p>This method (which will be called when activity is created.) doesn't create any thread .</p>\n\n<p>I dont know if following method will be called when activity is created</p>\n\n<pre><code> protected void onCreate(BaseGame androidGame , Bundle savedInstanceState)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3277574,"reputation":167,"user_id":2759103,"accept_rate":62,"display_name":"2851999"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1446027034,"creation_date":1396890005,"answer_id":22918643,"question_id":22914536,"body_markdown":"Thank you everyone :)\r\nI have spent the whole day trying to fix this issue and I have just fixed the problem.\r\n\r\nI found this https://stackoverflow.com/questions/5689316/android-onresume-not-called?rq=1, and then I added some calls to Log.d() to try and figure out what was happening. By adding them to each method in AndroidDisplay and AndroidActvity, I noticed that when I turned the screen off and on, I had the output: &#39;ACTIVITY PAUSED&#39;, &#39;ACTIVITY STOPPED&#39;, &#39;ACTIVITY RESTARTED&#39;, and &#39;ACTIVITY RESUMED&#39; which was what I had expected, then when clicking on the menu button, there was an extra output, &#39;SURFACE DESTROYED&#39; and so I changed AndroidDisplay, to stop the thread from stopping when the surface was destroyed so I moved that code into a method called stopThread() and then I found that I had a problem with the fact that I was re-creating the same thread twice because of the surfaceCreated() method in AndroidDisplay, so then I made an if statement before calling androidGameThread.start() which used androidGameThread.isAlive() therefore fixing this issue.\r\n\r\nNew AndroidDisplay code:\r\n    \r\n    package org.simplecorporation.myengine.core.android;\r\n\r\n    import org.simplecorporation.myengine.core.Settings;\r\n    import org.simplecorporation.myengine.core.game.BaseGame;\r\n    import org.simplecorporation.myengine.core.input.InputManager;\r\n    import org.simplecorporation.myengine.utils.ScreenUtils;\r\n\r\n    import android.app.Activity;\r\n    import android.graphics.Paint;\r\n    import android.view.SurfaceHolder;\r\n    import android.view.SurfaceView;\r\n\r\n    public class AndroidDisplay extends SurfaceView implements SurfaceHolder.Callback {\r\n\t\r\n\t/* The android game */\r\n\tpublic BaseGame androidGame;\r\n\t\r\n\t/* The android game thread */\r\n\tpublic AndroidGameThread androidGameThread;\r\n\t\r\n\t/* The boolean that states whether this has been created */\r\n\tpublic boolean created;\r\n\t\r\n\t/* The constructor */\r\n\tpublic AndroidDisplay(Activity gameActivity , BaseGame androidGame) {\r\n\t\t//Call the super constructor\r\n\t\tsuper(gameActivity);\r\n\t\t\r\n\t\t//Add the callback\r\n\t\tthis.getHolder().addCallback(this);\r\n\t\t\r\n\t\t//Set the game activity in the AndroidStore\r\n\t\tAndroidStore.gameActivity = gameActivity;\r\n\t\t\r\n\t\t//Set the android game\r\n\t\tthis.androidGame = androidGame;\r\n\t\t\r\n\t\t//Create the android game thread\r\n\t\tthis.androidGameThread = new AndroidGameThread(this.getHolder(), this.androidGame, this);\r\n\t\t\r\n\t\t//Set created to false\r\n\t\tthis.created = false;\r\n\t\t\r\n\t\t//Set the surface view focusable\r\n\t\tthis.setFocusable(true);\r\n\t}\r\n\t\r\n\t/* Called when the surface is created */\r\n\tpublic void surfaceCreated(SurfaceHolder surfaceHolder) {\r\n\t\t//Set created to true\r\n\t\tthis.created = true;\r\n\t\t//Create the input\r\n\t\tInputManager.create();\r\n\t\t//Set the size of the screen in the settings if full screen\r\n\t\tif (Settings.Window.Fullscreen) {\r\n\t\t\tSettings.Window.Size.Width = ScreenUtils.getScreenWidth();\r\n\t\t\tSettings.Window.Size.Height = ScreenUtils.getScreenHeight();\r\n\t\t} else {\r\n\t\t\t//Set the size of the screen in the settings\r\n\t\t\tSettings.Window.Size.Width = this.getWidth();\r\n\t\t\tSettings.Window.Size.Height = this.getHeight();\r\n\t\t}\r\n\t\t//Set the game resources\r\n\t\tAndroidStore.gameResources = this.getResources();\r\n\t\t//Create the game\r\n\t\tthis.androidGame.gameCreated();\r\n\t\t//Create the paint object\r\n\t\tAndroidStore.gamePaint = new Paint();\r\n\t\t//Start the android game thread if it has not already started\r\n\t\tthis.androidGameThread.setRunning(true);\r\n\t\tif (! this.androidGameThread.isAlive())\r\n\t\t\tthis.androidGameThread.start();\r\n\t}\r\n\t\r\n\t/* Called when the surface is changed */\r\n\tpublic void surfaceChanged(SurfaceHolder surfaceHolder , int format , int width , int height) {\r\n\t\t//Set the size of the screen in the settings\r\n\t\tSettings.Window.Size.Width = ScreenUtils.getScreenWidth();\r\n\t\tSettings.Window.Size.Height = ScreenUtils.getScreenHeight();\r\n\t\t//Reassign the surface holder\r\n\t\tthis.androidGameThread.surfaceHolder = surfaceHolder;\r\n\t}\r\n\t\r\n\t/* Called when the surface is destroyed */\r\n\tpublic void surfaceDestroyed(SurfaceHolder surfaceHolder) {\r\n\t\t//Set created to false\r\n\t\tthis.created = false;\r\n\t}\r\n\t\r\n\t/* The method used to stop the thread */\r\n\tpublic void stopThread() {\r\n\t\t//Should the loop continue\r\n\t\tboolean retry = true;\r\n\t\twhile(retry) {\r\n\t\t\t//Try and catch statement\r\n\t\t\ttry {\r\n\t\t\t\t//Stop the game\r\n\t\t\t\tthis.androidGame.gameStopped();\r\n\t\t\t\t//Close the game\r\n\t\t\t\tthis.androidGame.gameClosing();\r\n\t\t\t\t//Join the thread\r\n\t\t\t\tthis.androidGameThread.join();\r\n\t\t\t\t//Stop the while loop\r\n\t\t\t\tretry = false;\r\n\t\t\t} catch (InterruptedException e) {\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n    }","title":"Android onResume() not being called","body":"<p>Thank you everyone :)\nI have spent the whole day trying to fix this issue and I have just fixed the problem.</p>\n\n<p>I found this <a href=\"https://stackoverflow.com/questions/5689316/android-onresume-not-called?rq=1\">Android onResume not called</a>, and then I added some calls to Log.d() to try and figure out what was happening. By adding them to each method in AndroidDisplay and AndroidActvity, I noticed that when I turned the screen off and on, I had the output: 'ACTIVITY PAUSED', 'ACTIVITY STOPPED', 'ACTIVITY RESTARTED', and 'ACTIVITY RESUMED' which was what I had expected, then when clicking on the menu button, there was an extra output, 'SURFACE DESTROYED' and so I changed AndroidDisplay, to stop the thread from stopping when the surface was destroyed so I moved that code into a method called stopThread() and then I found that I had a problem with the fact that I was re-creating the same thread twice because of the surfaceCreated() method in AndroidDisplay, so then I made an if statement before calling androidGameThread.start() which used androidGameThread.isAlive() therefore fixing this issue.</p>\n\n<p>New AndroidDisplay code:</p>\n\n<pre><code>package org.simplecorporation.myengine.core.android;\n\nimport org.simplecorporation.myengine.core.Settings;\nimport org.simplecorporation.myengine.core.game.BaseGame;\nimport org.simplecorporation.myengine.core.input.InputManager;\nimport org.simplecorporation.myengine.utils.ScreenUtils;\n\nimport android.app.Activity;\nimport android.graphics.Paint;\nimport android.view.SurfaceHolder;\nimport android.view.SurfaceView;\n\npublic class AndroidDisplay extends SurfaceView implements SurfaceHolder.Callback {\n\n/* The android game */\npublic BaseGame androidGame;\n\n/* The android game thread */\npublic AndroidGameThread androidGameThread;\n\n/* The boolean that states whether this has been created */\npublic boolean created;\n\n/* The constructor */\npublic AndroidDisplay(Activity gameActivity , BaseGame androidGame) {\n    //Call the super constructor\n    super(gameActivity);\n\n    //Add the callback\n    this.getHolder().addCallback(this);\n\n    //Set the game activity in the AndroidStore\n    AndroidStore.gameActivity = gameActivity;\n\n    //Set the android game\n    this.androidGame = androidGame;\n\n    //Create the android game thread\n    this.androidGameThread = new AndroidGameThread(this.getHolder(), this.androidGame, this);\n\n    //Set created to false\n    this.created = false;\n\n    //Set the surface view focusable\n    this.setFocusable(true);\n}\n\n/* Called when the surface is created */\npublic void surfaceCreated(SurfaceHolder surfaceHolder) {\n    //Set created to true\n    this.created = true;\n    //Create the input\n    InputManager.create();\n    //Set the size of the screen in the settings if full screen\n    if (Settings.Window.Fullscreen) {\n        Settings.Window.Size.Width = ScreenUtils.getScreenWidth();\n        Settings.Window.Size.Height = ScreenUtils.getScreenHeight();\n    } else {\n        //Set the size of the screen in the settings\n        Settings.Window.Size.Width = this.getWidth();\n        Settings.Window.Size.Height = this.getHeight();\n    }\n    //Set the game resources\n    AndroidStore.gameResources = this.getResources();\n    //Create the game\n    this.androidGame.gameCreated();\n    //Create the paint object\n    AndroidStore.gamePaint = new Paint();\n    //Start the android game thread if it has not already started\n    this.androidGameThread.setRunning(true);\n    if (! this.androidGameThread.isAlive())\n        this.androidGameThread.start();\n}\n\n/* Called when the surface is changed */\npublic void surfaceChanged(SurfaceHolder surfaceHolder , int format , int width , int height) {\n    //Set the size of the screen in the settings\n    Settings.Window.Size.Width = ScreenUtils.getScreenWidth();\n    Settings.Window.Size.Height = ScreenUtils.getScreenHeight();\n    //Reassign the surface holder\n    this.androidGameThread.surfaceHolder = surfaceHolder;\n}\n\n/* Called when the surface is destroyed */\npublic void surfaceDestroyed(SurfaceHolder surfaceHolder) {\n    //Set created to false\n    this.created = false;\n}\n\n/* The method used to stop the thread */\npublic void stopThread() {\n    //Should the loop continue\n    boolean retry = true;\n    while(retry) {\n        //Try and catch statement\n        try {\n            //Stop the game\n            this.androidGame.gameStopped();\n            //Close the game\n            this.androidGame.gameClosing();\n            //Join the thread\n            this.androidGameThread.join();\n            //Stop the while loop\n            retry = false;\n        } catch (InterruptedException e) {\n\n        }\n    }\n}\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11905400,"reputation":1028,"user_id":8712102,"display_name":"HandyPawan"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1549702427,"creation_date":1549692210,"answer_id":54603695,"question_id":22914536,"body_markdown":"In Manifest, use this in launcher activity\r\n\r\n    android:noHistory=&quot;false&quot;\r\n","title":"Android onResume() not being called","body":"<p>In Manifest, use this in launcher activity</p>\n\n<pre><code>android:noHistory=\"false\"\n</code></pre>\n"}],"owner":{"account_id":3277574,"reputation":167,"user_id":2759103,"accept_rate":62,"display_name":"2851999"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14412,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":22918643,"answer_count":3,"score":7,"last_activity_date":1694803228,"creation_date":1396878856,"question_id":22914536,"body_markdown":"for a while I have been creating a game engine that works on Android using Java. Unfortunately I have this problem where the onResume() method does&#39;t appear to be called. I am using a Thread to run everything, and when I minimise the app and then go back on the app, it just gives me a blank, black screen. But it DOES work when I turn the screen off and on again.\r\n\r\nThe code that I am using for the activity:\r\n     \r\n     package org.simplecorporation.myengine.core.android;\r\n     \r\n     import org.simplecorporation.myengine.core.Settings;\r\n     import org.simplecorporation.myengine.core.android.input.AndroidInput;\r\n     import org.simplecorporation.myengine.core.game.BaseGame;\r\n     \r\n     import android.app.Activity;\r\n     import android.content.pm.ActivityInfo;\r\n     import android.os.Bundle;\r\n     import android.view.MotionEvent;\r\n     import android.view.Window;\r\n     import android.view.WindowManager;\r\n     \r\n     public abstract class AndroidActivity extends Activity {\r\n\t\r\n\t/* The abstract methods*/\r\n\tpublic abstract void activityCreated();\r\n\tpublic abstract void activityPaused();\r\n\tpublic abstract void activityResumed();\r\n\tpublic abstract void activityStopped();\r\n\tpublic abstract void activityRestarted();\r\n\tpublic abstract void activityDestroy();\r\n\t\r\n\t/* The android display */\r\n\tpublic AndroidDisplay androidDisplay;\r\n\t\r\n\t/* The onCreate method */\r\n\tprotected void onCreate(Bundle savedInstanceState) {\r\n\t\tsuper.onCreate(savedInstanceState);\r\n\t\t//Set the title\r\n\t\tthis.setTitle(Settings.Window.Title);\r\n\t\t//Check the orientation and set it\r\n\t\tif (AndroidSettings.ScreenOrientation == AndroidSettings.SCREEN_ORIENTATION_PORTRAIT)\r\n\t\t\tthis.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);\r\n\t\telse if (AndroidSettings.ScreenOrientation == AndroidSettings.SCREEN_ORIENTATION_LANDSCAPE)\r\n\t\t\tthis.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);\r\n\t\t//Check if the activity should be fullscreen\r\n\t\tif (Settings.Window.Fullscreen) {\r\n\t\t\t//Get rid of the title bar\r\n\t\t\tthis.getWindow().requestFeature(Window.FEATURE_NO_TITLE);\r\n\t\t\t//Make the activity fullscreen\r\n\t\t\tthis.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN , WindowManager.LayoutParams.FLAG_FULLSCREEN);\r\n\t\t}\r\n\t}\r\n\t\r\n\t/* The onCreate method */\r\n\tprotected void onCreate(BaseGame androidGame , Bundle savedInstanceState) {\r\n\t\tsuper.onCreate(savedInstanceState);\r\n\t\t//Set the title\r\n\t\tthis.setTitle(Settings.Window.Title);\r\n\t\t//Check the orientation and set it\r\n\t\tif (AndroidSettings.ScreenOrientation == AndroidSettings.SCREEN_ORIENTATION_PORTRAIT)\r\n\t\t\tthis.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);\r\n\t\telse if (AndroidSettings.ScreenOrientation == AndroidSettings.SCREEN_ORIENTATION_LANDSCAPE)\r\n\t\t\tthis.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);\r\n\t\t//Check if the activity should be fullscreen\r\n\t\tif (Settings.Window.Fullscreen) {\r\n\t\t\t//Get rid of the title bar\r\n\t\t\tthis.getWindow().requestFeature(Window.FEATURE_NO_TITLE);\r\n\t\t\t//Make the activity fullscreen\r\n\t\t\tthis.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN , WindowManager.LayoutParams.FLAG_FULLSCREEN);\r\n\t\t}\r\n\t\t//Create the display\r\n\t\tandroidDisplay = new AndroidDisplay(this , androidGame);\r\n\t\t//Set the content view\r\n\t\tthis.setContentView(androidDisplay);\r\n\t\t//Call the activity create method\r\n\t\tthis.activityCreated();\r\n\t}\r\n\t\r\n\t/* Called when the activity is paused */\r\n\tpublic void onPause() {\r\n\t\tsuper.onPause();\r\n\t\t//Pause the thread\r\n\t\tthis.androidDisplay.androidGameThread.paused = true;\r\n\t\t//Call the method\r\n\t\tthis.activityPaused();\r\n\t}\r\n\t\r\n\t/* Called when the activity is resumed */\r\n\tpublic void onResume() {\r\n\t\tsuper.onResume();\r\n\t\t//Resume the thread\r\n\t\tthis.androidDisplay.androidGameThread.paused = false;\r\n\t\t//Call the method\r\n\t\tthis.activityResumed();\r\n\t}\r\n\t\r\n\t/* Called when the activity is stopped */\r\n\tpublic void onStop() {\r\n\t\tsuper.onStop();\r\n\t\t//Call the method\r\n\t\tthis.activityStopped();\r\n\t}\r\n\t\r\n\t/* Called when the activity is restarted */\r\n\tpublic void onRestart() {\r\n\t\tsuper.onRestart();\r\n\t\t//Call the method\r\n\t\tthis.activityRestarted();\r\n\t}\r\n\t\r\n\t/* Called when the activity is destroyed */\r\n\tpublic void onDestroy() {\r\n\t\tsuper.onDestroy();\r\n\t\t//Call the method\r\n\t\tthis.activityDestroy();\r\n\t\t//Destroy\r\n\t\tthis.finish();\r\n\t}\r\n     }\r\n\r\nThe code that I am using for the thread:\r\n    \r\n    package org.simplecorporation.myengine.core.android;\r\n\r\n    import org.simplecorporation.myengine.core.game.BaseGame;\r\n    import org.simplecorporation.myengine.core.input.InputManager;\r\n\r\n    import android.util.Log;\r\n    import android.view.SurfaceHolder;\r\n\r\n    public class AndroidGameThread extends Thread {\r\n\t\r\n\t/* Is the thread running */\r\n\tpublic boolean running;\r\n\t\r\n\t/* Is the thread paused */\r\n\tpublic boolean paused;\r\n\t\r\n\t/* The surface holder */\r\n\tpublic SurfaceHolder surfaceHolder;\r\n\t\r\n\t/* The android game */\r\n\tpublic BaseGame androidGame;\r\n\t\r\n\t/* The constructor */\r\n\tpublic AndroidGameThread(SurfaceHolder surfaceHolder , BaseGame androidGame) {\r\n\t\t//Set running to false\r\n\t\tthis.running = false;\r\n\t\t//Set paused to false\r\n\t\tthis.paused = false;\r\n\t\t//Assign the surface holder\r\n\t\tthis.surfaceHolder = surfaceHolder;\r\n\t\t//Assign the android game\r\n\t\tthis.androidGame = androidGame;\r\n\t}\r\n\t\r\n\t/* The method to set the running variable */\r\n\tpublic void setRunning(boolean running) {\r\n\t\tthis.running = running;\r\n\t}\r\n\t\r\n\t/* Returns whether the thread is running */\r\n\tpublic boolean isRunning() {\r\n\t\treturn this.running;\r\n\t}\r\n\t\r\n\t/* The run method */\r\n\tpublic void run() {\r\n\t\t//Start the game\r\n\t\tthis.androidGame.create();\r\n\t\t//Run while the variable running is true\r\n\t\twhile (running) {\r\n\t\t\t//Check if the thread is paused\r\n\t\t\tif (! this.paused) {\r\n\t\t\t\t//Check the input\r\n\t\t\t\tInputManager.checkInput();\r\n\t\t\t\t//Set the game canvas to null\r\n\t\t\t\tAndroidStore.gameCanvas = null;\r\n\t\t\t\t//Try statement\r\n\t\t\t\ttry {\r\n\t\t\t\t\t//Set the game canvas\r\n\t\t\t\t\tAndroidStore.gameCanvas = this.surfaceHolder.lockCanvas();\r\n\t\t\t\t\tsynchronized (this.surfaceHolder) {\r\n\t\t\t\t\t\t//Update/Render the game\r\n\t\t\t\t\t\tthis.androidGame.tick();\r\n\t\t\t\t\t}\r\n\t\t\t\t} finally {\r\n\t\t\t\t\t//Check that the canvas isn&#39;t null\r\n\t\t\t\t\tif (AndroidStore.gameCanvas != null) {\r\n\t\t\t\t\t\tthis.surfaceHolder.unlockCanvasAndPost(AndroidStore.gameCanvas);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n    }\r\n\r\nAlso, to start the thread I use\r\n    \r\n    import org.simplecorporation.myengine.core.Settings;\r\n    import org.simplecorporation.myengine.core.game.BaseGame;\r\n    import org.simplecorporation.myengine.core.input.InputManager;\r\n    import org.simplecorporation.myengine.utils.ScreenUtils;\r\n    \r\n    import android.app.Activity;\r\n    import android.graphics.Paint;\r\n    import android.view.SurfaceHolder;\r\n    import android.view.SurfaceView;\r\n\r\n    public class AndroidDisplay extends SurfaceView implements SurfaceHolder.Callback {\r\n\t\r\n\t/* The android game */\r\n\tpublic BaseGame androidGame;\r\n\t\r\n\t/* The android game thread */\r\n\tpublic AndroidGameThread androidGameThread;\r\n\t\r\n\t/* The constructor */\r\n\tpublic AndroidDisplay(Activity gameActivity , BaseGame androidGame) {\r\n\t\t//Call the super constructor\r\n\t\tsuper(gameActivity);\r\n\t\t\r\n\t\t//Add the callback\r\n\t\tthis.getHolder().addCallback(this);\r\n\t\t\r\n\t\t//Set the game activity in the AndroidStore\r\n\t\tAndroidStore.gameActivity = gameActivity;\r\n\t\t\r\n\t\t//Set the android game\r\n\t\tthis.androidGame = androidGame;\r\n\t\t\r\n\t\t//Create the android game thread\r\n\t\tthis.androidGameThread = new AndroidGameThread(this.getHolder(), this.androidGame);\r\n\t\t\r\n\t\t//Set the surface view focusable\r\n\t\tthis.setFocusable(true);\r\n\t}\r\n\t\r\n\t/* Called when the surface is created */\r\n\tpublic void surfaceCreated(SurfaceHolder surfaceHolder) {\r\n\t\t//Create the input\r\n\t\tInputManager.create();\r\n\t\t//Set the size of the screen in the settings if full screen\r\n\t\tif (Settings.Window.Fullscreen) {\r\n\t\t\tSettings.Window.Size.Width = ScreenUtils.getScreenWidth();\r\n\t\t\tSettings.Window.Size.Height = ScreenUtils.getScreenHeight();\r\n\t\t} else {\r\n\t\t\t//Set the size of the screen in the settings\r\n\t\t\tSettings.Window.Size.Width = this.getWidth();\r\n\t\t\tSettings.Window.Size.Height = this.getHeight();\r\n\t\t}\r\n\t\t//Set the game resources\r\n\t\tAndroidStore.gameResources = this.getResources();\r\n\t\t//Create the game\r\n\t\tthis.androidGame.gameCreated();\r\n\t\t//Create the paint object\r\n\t\tAndroidStore.gamePaint = new Paint();\r\n\t\t//Start the android game thread\r\n\t\tthis.androidGameThread.setRunning(true);\r\n\t\tthis.androidGameThread.start();\r\n\t}\r\n\t\r\n\t/* Called when the surface is changed */\r\n\tpublic void surfaceChanged(SurfaceHolder surfaceHolder , int format , int width , int height) {\r\n\t\t//Set the size of the screen in the settings\r\n\t\tSettings.Window.Size.Width = ScreenUtils.getScreenWidth();\r\n\t\tSettings.Window.Size.Height = ScreenUtils.getScreenHeight();\r\n\t}\r\n\t\r\n\t/* Called when the surface is destroyed */\r\n\tpublic void surfaceDestroyed(SurfaceHolder surfaceHolder) {\r\n\t\t//Should the loop continue\r\n\t\tboolean retry = true;\r\n\t\twhile(retry) {\r\n\t\t\t//Try and catch statement\r\n\t\t\ttry {\r\n\t\t\t\t//Stop the game\r\n\t\t\t\tthis.androidGame.gameStopped();\r\n\t\t\t\t//Close the game\r\n\t\t\t\tthis.androidGame.gameClosing();\r\n\t\t\t\t//Join the thread\r\n\t\t\t\tthis.androidGameThread.join();\r\n\t\t\t\t//Stop the while loop\r\n\t\t\t\tretry = false;\r\n\t\t\t} catch (InterruptedException e) {\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n    }\r\n\r\nTo run all of this I have a class that &#39;extends&#39; AndroidActvity and uses the following method:\r\n\r\n\tprotected void onCreate(Bundle savedInstanceState) {\r\n\t\tSettings.Window.Title = &quot;MyEngine Android Tests&quot;;\r\n\t\tSettings.Android = true;\r\n\t\tSettings.Video.OpenGL = false;\r\n\t\tSettings.Audio.SoundEffectVolume = 10;\r\n\t\tAndroidSettings.ScreenOrientation = 1;\r\n\t\tSettings.Window.Fullscreen = true;\r\n\t\tthis.onCreate(new FileTest() ,  savedInstanceState);\r\n\t}\r\n\r\nThe testing class:\r\n    \r\n    import org.simplecorporation.myengine.core.Settings;\r\n    import org.simplecorporation.myengine.core.android.AndroidActivity;\r\n    import org.simplecorporation.myengine.core.android.AndroidSettings;\r\n    \r\n    import android.os.Bundle;\r\n    import android.util.Log;\r\n\r\n    public class MainActivity extends AndroidActivity {\r\n\r\n\tprotected void onCreate(Bundle savedInstanceState) {\r\n\t\tSettings.Window.Title = &quot;MyEngine Android Tests&quot;;\r\n\t\tSettings.Android = true;\r\n\t\tSettings.Video.OpenGL = false;\r\n\t\tSettings.Audio.SoundEffectVolume = 10;\r\n\t\tAndroidSettings.ScreenOrientation = 1;\r\n\t\tSettings.Window.Fullscreen = true;\r\n\t\tthis.onCreate(new FileTest() ,  savedInstanceState);\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void activityCreated() {\r\n\t\t// TODO Auto-generated method stub\r\n\t\t\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void activityPaused() {\r\n\t\t// TODO Auto-generated method stub\r\n\t\tLog.d(&quot;HELLO&quot;, &quot;I HAVE BEEN PAUSED&quot;);\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void activityResumed() {\r\n\t\t// TODO Auto-generated method stub\r\n\t\tLog.d(&quot;HELLO&quot;, &quot;I HAVE BEEN RESUMED&quot;);\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void activityStopped() {\r\n\t\t// TODO Auto-generated method stub\r\n\t\tLog.d(&quot;HELLO&quot;, &quot;I HAVE BEEN STOPPED&quot;);\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void activityRestarted() {\r\n\t\t// TODO Auto-generated method stub\r\n\t\tLog.d(&quot;HELLO&quot;, &quot;I HAVE BEEN RESTARTED&quot;);\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void activityDestroy() {\r\n\t\t// TODO Auto-generated method stub\r\n\t\tLog.d(&quot;HELLO&quot;, &quot;I HAVE BEEN DESTROYED&quot;);\r\n\t}\r\n\r\n    }\r\n\r\nFileTest:\r\n    \r\n    package com.simplecorporation.myengine.android.tests;\r\n\r\n    import java.util.List;\r\n\r\n    import org.simplecorporation.myengine.core.Settings;\r\n    import org.simplecorporation.myengine.core.audio.clip.AndroidAudio;\r\n    import org.simplecorporation.myengine.core.game.BaseGame;\r\n    import org.simplecorporation.myengine.core.game2d.entity.ImageEntity2D;\r\n    import org.simplecorporation.myengine.core.gui.GUIButton;\r\n    import org.simplecorporation.myengine.core.gui.GUICheckBox;\r\n    import org.simplecorporation.myengine.core.gui.GUIRenderer;\r\n    import org.simplecorporation.myengine.core.gui.GUIScrollBar;\r\n    import org.simplecorporation.myengine.core.gui.GUISlider;\r\n    import org.simplecorporation.myengine.core.gui.GUITextDisplayArea;\r\n    import org.simplecorporation.myengine.core.gui.font.GUIFont;\r\n    import org.simplecorporation.myengine.core.gui.font.bitmap.BitmapFont;\r\n    import org.simplecorporation.myengine.core.image.Image;\r\n    import org.simplecorporation.myengine.core.input.event.TouchEvent;\r\n    import org.simplecorporation.myengine.core.render.basic.BasicRenderer;\r\n    import org.simplecorporation.myengine.core.render.colour.Colour;\r\n    import org.simplecorporation.myengine.utils.AndroidFileUtils;\r\n    import org.simplecorporation.myengine.utils.ArrayUtils;\r\n    import org.simplecorporation.myengine.utils.FileUtils;\r\n    import org.simplecorporation.myengine.utils.font.FontUtils;\r\n    \r\n    import android.os.Environment;\r\n    import android.util.Log;\r\n\r\n    public class FileTest extends BaseGame {\r\n\t\r\n\tpublic ImageEntity2D image;\r\n\tpublic Colour colour;\r\n\tpublic GUIButton button;\r\n\tpublic GUICheckBox checkBox;\r\n\tpublic AndroidAudio audio;\r\n\tpublic GUIFont bitmapFont;\r\n\tpublic GUIScrollBar scrollBar;\r\n\t\r\n\tpublic GUIScrollBar verticalslider;\r\n\tpublic GUIScrollBar horizontalslider;\r\n\tpublic GUITextDisplayArea textDisplayArea;\r\n\t\r\n\tpublic FileTest() {\r\n\t\tcreateGame();\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void gameCreated() {\r\n\t\t// TODO Auto-generated method stub\r\n\t\timage = new ImageEntity2D(new Image(R.drawable.menubutton));\r\n\t\timage.position.x = 200;\r\n\t\timage.position.y = 200;\r\n\t\timage.width = 200;\r\n\t\timage.height = 60;\r\n\t\timage.rotationVelocity = 1;\r\n\t\tcolour = new Colour(0d, 0d, 0d, 1d);\r\n\t\tbutton = new GUIButton(&quot;AndroidGUIButton&quot; , &quot;Click Me&quot; , new GUIRenderer(new Colour[] {\r\n\t\t\t\tColour.LIGHT_BLUE , Colour.ORANGE , Colour.BLUE\r\n\t\t} , FontUtils.buildGUIFont(&quot;Arial&quot; , Colour.WHITE , 46f)));\r\n\t\tbutton.position.x = 300;\r\n\t\tbutton.position.y = 200;\r\n\t\tbutton.width = 300;\r\n\t\tbutton.height = 60;\r\n\t\tbutton.visible = true;\r\n\t\t\r\n\t\tcheckBox = new GUICheckBox(&quot;AndroidCheckBox&quot; , new GUIRenderer(new Colour[] { Colour.WHITE , Colour.BLUE }));\r\n\t\tcheckBox.position.x = 500;\r\n\t\tcheckBox.position.y = 300;\r\n\t\tcheckBox.width = 100;\r\n\t\tcheckBox.height = 100;\r\n\t\tcheckBox.visible = true;\r\n\t\t\r\n\t\tbitmapFont = new GUIFont(new BitmapFont(new Image(R.drawable.test) , 40, 16));\r\n\t\t\r\n\t\tGUIButton verticalsliderButton = new GUIButton(&quot;Button2&quot; , &quot;&quot; , new GUIRenderer(new Colour[] {\r\n\t\t\t\tColour.ORANGE ,\r\n\t\t\t\tColour.LIGHT_BLUE ,\r\n\t\t\t\tColour.BLUE\r\n\t\t} , FontUtils.buildGUIFont(&quot;Segoe UI&quot; , Colour.WHITE , 20f)));\r\n\t\tverticalsliderButton.width = 100;\r\n\t\tverticalsliderButton.height = 20;\r\n\t\tverticalsliderButton.visible = true;\r\n\t\t\r\n\t\tverticalslider = new GUIScrollBar(&quot;Slider1&quot; , verticalsliderButton , GUISlider.DIRECTION_VERTICAL , 1, new GUIRenderer(new Colour[] { Colour.RED }));\r\n\t\t\r\n\t\tverticalslider.visible = true;\r\n\t\tverticalslider.position.x = 200;\r\n\t\tverticalslider.position.y = 200;\r\n\t\tverticalslider.width = 30;\r\n\t\tverticalslider.height = 100;\r\n\t\t\r\n\t\tGUIButton horizontalsliderButton = new GUIButton(&quot;Button2&quot; , &quot;&quot; , new GUIRenderer(new Colour[] {\r\n\t\t\t\tColour.ORANGE ,\r\n\t\t\t\tColour.LIGHT_BLUE ,\r\n\t\t\t\tColour.BLUE\r\n\t\t} , FontUtils.buildGUIFont(&quot;Segoe UI&quot; , Colour.WHITE , 20f)));\r\n\t\thorizontalsliderButton.width = 20;\r\n\t\thorizontalsliderButton.height = 100;\r\n\t\thorizontalsliderButton.visible = true;\r\n\t\t\r\n\t\thorizontalslider = new GUIScrollBar(&quot;Slider2&quot; , horizontalsliderButton , GUISlider.DIRECTION_HORIZONTAL , 1, new GUIRenderer(new Colour[] { Colour.RED }));\r\n\t\t\r\n\t\thorizontalslider.visible = true;\r\n\t\thorizontalslider.position.x = 300;\r\n\t\thorizontalslider.position.y = 300;\r\n\t\thorizontalslider.width = 100;\r\n\t\thorizontalslider.height = 30;\r\n\t\t\r\n\t\taudio = new AndroidAudio(R.raw.encode , false , false);\r\n\t\t\r\n\t\tList&lt;String&gt; text = ArrayUtils.toStringList(new String[] {\r\n\t\t\t\t&quot;Hello, this test application was made using MyEngine &quot; + Settings.EngineVersion,\r\n\t\t\t\t&quot;with the build &quot; + Settings.EngineBuild + &quot;. Below this message you should find&quot;,\r\n\t\t\t\t&quot;a bitmap font:&quot;\r\n\t\t});\r\n\t\tthis.textDisplayArea = new GUITextDisplayArea(&quot;TextArea&quot;, text, FontUtils.buildGUIFont(&quot;Arial&quot; , Colour.WHITE , 40f), Settings.Window.Size.Width);\r\n\t\tthis.textDisplayArea.position.x = 0;\r\n\t\tthis.textDisplayArea.position.y = 500;\r\n\t\tthis.textDisplayArea.visible = true;\r\n\t\t\r\n\t\tAndroidFileUtils.writeToInternalStorage(&quot;hello.txt&quot;, ArrayUtils.toStringList(new String[] {\r\n\t\t\t\t&quot;Hello World, From hello.txt&quot;\r\n\t\t}));\r\n\t\tthis.textDisplayArea.setText(AndroidFileUtils.readFromInternalStorage(&quot;hello.txt&quot;));\r\n\t\t\r\n\t\tAndroidFileUtils.writeToExternalStorage(&quot;hello.txt&quot;, ArrayUtils.toStringList(new String[] {\r\n\t\t\t\t&quot;Hello World, From hello.txt in an External Storage file :)&quot;\r\n\t\t}));\r\n\t\t\r\n\t\tthis.textDisplayArea.setText(FileUtils.read(&quot;eclipse.txt&quot;, false));\r\n\t\t\r\n\t\tLog.d(&quot;HELLO&quot;, &quot;&quot; + AndroidFileUtils.isExternalStorageWritable() + &quot; &quot; + Environment.getExternalStorageDirectory());\r\n\t}\r\n\t\r\n\tpublic void gameRender() {\r\n\t\tBasicRenderer.setColour(colour);\r\n\t\tBasicRenderer.renderFilledRectangle(0 , 0 , Settings.Window.Size.Width , Settings.Window.Size.Height);\r\n\t\tBasicRenderer.setColour(Colour.BLUE);\r\n\t\tBasicRenderer.renderFilledRectangle(100 , 100 , 100 , 100);\r\n\t\tBasicRenderer.setColour(Colour.WHITE);\r\n\t\tverticalslider.render();\r\n\t\thorizontalslider.render();\r\n\t\timage.render();\r\n\t\tbutton.render();\r\n\t\tcheckBox.render();\r\n\t\ttextDisplayArea.render();\r\n\t\tBasicRenderer.setColour(Colour.WHITE);\r\n\t\tbitmapFont.render(&quot;This is a bitmap font :)&quot; , 10 , 700);\r\n\t}\r\n\t\r\n\tpublic void gameUpdate() {\r\n\t\tbutton.update();\r\n\t\tcheckBox.update();\r\n\t\timage.update();\r\n\t\tverticalslider.update();\r\n\t\thorizontalslider.update();\r\n\t\tif (button.clicked) {\r\n\t\t\tcolour = new Colour(0d , 0d , 0d , 1d);\r\n\t\t\taudio.play();\r\n\t\t}\r\n\t\ttextDisplayArea.update();\r\n\t}\r\n\t\r\n\tpublic void onTouch(TouchEvent e) {\r\n\t\tthis.colour = new Colour(this.colour.getR() + 0.01, this.colour.getG() + 0.01, this.colour.getB() + 0.01);\r\n\t}\r\n\t\r\n    }\r\n\r\nMany thanks in advance.","title":"Android onResume() not being called","body":"<p>for a while I have been creating a game engine that works on Android using Java. Unfortunately I have this problem where the onResume() method does't appear to be called. I am using a Thread to run everything, and when I minimise the app and then go back on the app, it just gives me a blank, black screen. But it DOES work when I turn the screen off and on again.</p>\n\n<p>The code that I am using for the activity:</p>\n\n<pre><code> package org.simplecorporation.myengine.core.android;\n\n import org.simplecorporation.myengine.core.Settings;\n import org.simplecorporation.myengine.core.android.input.AndroidInput;\n import org.simplecorporation.myengine.core.game.BaseGame;\n\n import android.app.Activity;\n import android.content.pm.ActivityInfo;\n import android.os.Bundle;\n import android.view.MotionEvent;\n import android.view.Window;\n import android.view.WindowManager;\n\n public abstract class AndroidActivity extends Activity {\n\n/* The abstract methods*/\npublic abstract void activityCreated();\npublic abstract void activityPaused();\npublic abstract void activityResumed();\npublic abstract void activityStopped();\npublic abstract void activityRestarted();\npublic abstract void activityDestroy();\n\n/* The android display */\npublic AndroidDisplay androidDisplay;\n\n/* The onCreate method */\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    //Set the title\n    this.setTitle(Settings.Window.Title);\n    //Check the orientation and set it\n    if (AndroidSettings.ScreenOrientation == AndroidSettings.SCREEN_ORIENTATION_PORTRAIT)\n        this.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);\n    else if (AndroidSettings.ScreenOrientation == AndroidSettings.SCREEN_ORIENTATION_LANDSCAPE)\n        this.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);\n    //Check if the activity should be fullscreen\n    if (Settings.Window.Fullscreen) {\n        //Get rid of the title bar\n        this.getWindow().requestFeature(Window.FEATURE_NO_TITLE);\n        //Make the activity fullscreen\n        this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN , WindowManager.LayoutParams.FLAG_FULLSCREEN);\n    }\n}\n\n/* The onCreate method */\nprotected void onCreate(BaseGame androidGame , Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    //Set the title\n    this.setTitle(Settings.Window.Title);\n    //Check the orientation and set it\n    if (AndroidSettings.ScreenOrientation == AndroidSettings.SCREEN_ORIENTATION_PORTRAIT)\n        this.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);\n    else if (AndroidSettings.ScreenOrientation == AndroidSettings.SCREEN_ORIENTATION_LANDSCAPE)\n        this.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);\n    //Check if the activity should be fullscreen\n    if (Settings.Window.Fullscreen) {\n        //Get rid of the title bar\n        this.getWindow().requestFeature(Window.FEATURE_NO_TITLE);\n        //Make the activity fullscreen\n        this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN , WindowManager.LayoutParams.FLAG_FULLSCREEN);\n    }\n    //Create the display\n    androidDisplay = new AndroidDisplay(this , androidGame);\n    //Set the content view\n    this.setContentView(androidDisplay);\n    //Call the activity create method\n    this.activityCreated();\n}\n\n/* Called when the activity is paused */\npublic void onPause() {\n    super.onPause();\n    //Pause the thread\n    this.androidDisplay.androidGameThread.paused = true;\n    //Call the method\n    this.activityPaused();\n}\n\n/* Called when the activity is resumed */\npublic void onResume() {\n    super.onResume();\n    //Resume the thread\n    this.androidDisplay.androidGameThread.paused = false;\n    //Call the method\n    this.activityResumed();\n}\n\n/* Called when the activity is stopped */\npublic void onStop() {\n    super.onStop();\n    //Call the method\n    this.activityStopped();\n}\n\n/* Called when the activity is restarted */\npublic void onRestart() {\n    super.onRestart();\n    //Call the method\n    this.activityRestarted();\n}\n\n/* Called when the activity is destroyed */\npublic void onDestroy() {\n    super.onDestroy();\n    //Call the method\n    this.activityDestroy();\n    //Destroy\n    this.finish();\n}\n }\n</code></pre>\n\n<p>The code that I am using for the thread:</p>\n\n<pre><code>package org.simplecorporation.myengine.core.android;\n\nimport org.simplecorporation.myengine.core.game.BaseGame;\nimport org.simplecorporation.myengine.core.input.InputManager;\n\nimport android.util.Log;\nimport android.view.SurfaceHolder;\n\npublic class AndroidGameThread extends Thread {\n\n/* Is the thread running */\npublic boolean running;\n\n/* Is the thread paused */\npublic boolean paused;\n\n/* The surface holder */\npublic SurfaceHolder surfaceHolder;\n\n/* The android game */\npublic BaseGame androidGame;\n\n/* The constructor */\npublic AndroidGameThread(SurfaceHolder surfaceHolder , BaseGame androidGame) {\n    //Set running to false\n    this.running = false;\n    //Set paused to false\n    this.paused = false;\n    //Assign the surface holder\n    this.surfaceHolder = surfaceHolder;\n    //Assign the android game\n    this.androidGame = androidGame;\n}\n\n/* The method to set the running variable */\npublic void setRunning(boolean running) {\n    this.running = running;\n}\n\n/* Returns whether the thread is running */\npublic boolean isRunning() {\n    return this.running;\n}\n\n/* The run method */\npublic void run() {\n    //Start the game\n    this.androidGame.create();\n    //Run while the variable running is true\n    while (running) {\n        //Check if the thread is paused\n        if (! this.paused) {\n            //Check the input\n            InputManager.checkInput();\n            //Set the game canvas to null\n            AndroidStore.gameCanvas = null;\n            //Try statement\n            try {\n                //Set the game canvas\n                AndroidStore.gameCanvas = this.surfaceHolder.lockCanvas();\n                synchronized (this.surfaceHolder) {\n                    //Update/Render the game\n                    this.androidGame.tick();\n                }\n            } finally {\n                //Check that the canvas isn't null\n                if (AndroidStore.gameCanvas != null) {\n                    this.surfaceHolder.unlockCanvasAndPost(AndroidStore.gameCanvas);\n                }\n            }\n        }\n    }\n}\n\n}\n</code></pre>\n\n<p>Also, to start the thread I use</p>\n\n<pre><code>import org.simplecorporation.myengine.core.Settings;\nimport org.simplecorporation.myengine.core.game.BaseGame;\nimport org.simplecorporation.myengine.core.input.InputManager;\nimport org.simplecorporation.myengine.utils.ScreenUtils;\n\nimport android.app.Activity;\nimport android.graphics.Paint;\nimport android.view.SurfaceHolder;\nimport android.view.SurfaceView;\n\npublic class AndroidDisplay extends SurfaceView implements SurfaceHolder.Callback {\n\n/* The android game */\npublic BaseGame androidGame;\n\n/* The android game thread */\npublic AndroidGameThread androidGameThread;\n\n/* The constructor */\npublic AndroidDisplay(Activity gameActivity , BaseGame androidGame) {\n    //Call the super constructor\n    super(gameActivity);\n\n    //Add the callback\n    this.getHolder().addCallback(this);\n\n    //Set the game activity in the AndroidStore\n    AndroidStore.gameActivity = gameActivity;\n\n    //Set the android game\n    this.androidGame = androidGame;\n\n    //Create the android game thread\n    this.androidGameThread = new AndroidGameThread(this.getHolder(), this.androidGame);\n\n    //Set the surface view focusable\n    this.setFocusable(true);\n}\n\n/* Called when the surface is created */\npublic void surfaceCreated(SurfaceHolder surfaceHolder) {\n    //Create the input\n    InputManager.create();\n    //Set the size of the screen in the settings if full screen\n    if (Settings.Window.Fullscreen) {\n        Settings.Window.Size.Width = ScreenUtils.getScreenWidth();\n        Settings.Window.Size.Height = ScreenUtils.getScreenHeight();\n    } else {\n        //Set the size of the screen in the settings\n        Settings.Window.Size.Width = this.getWidth();\n        Settings.Window.Size.Height = this.getHeight();\n    }\n    //Set the game resources\n    AndroidStore.gameResources = this.getResources();\n    //Create the game\n    this.androidGame.gameCreated();\n    //Create the paint object\n    AndroidStore.gamePaint = new Paint();\n    //Start the android game thread\n    this.androidGameThread.setRunning(true);\n    this.androidGameThread.start();\n}\n\n/* Called when the surface is changed */\npublic void surfaceChanged(SurfaceHolder surfaceHolder , int format , int width , int height) {\n    //Set the size of the screen in the settings\n    Settings.Window.Size.Width = ScreenUtils.getScreenWidth();\n    Settings.Window.Size.Height = ScreenUtils.getScreenHeight();\n}\n\n/* Called when the surface is destroyed */\npublic void surfaceDestroyed(SurfaceHolder surfaceHolder) {\n    //Should the loop continue\n    boolean retry = true;\n    while(retry) {\n        //Try and catch statement\n        try {\n            //Stop the game\n            this.androidGame.gameStopped();\n            //Close the game\n            this.androidGame.gameClosing();\n            //Join the thread\n            this.androidGameThread.join();\n            //Stop the while loop\n            retry = false;\n        } catch (InterruptedException e) {\n\n        }\n    }\n}\n\n}\n</code></pre>\n\n<p>To run all of this I have a class that 'extends' AndroidActvity and uses the following method:</p>\n\n<pre><code>protected void onCreate(Bundle savedInstanceState) {\n    Settings.Window.Title = \"MyEngine Android Tests\";\n    Settings.Android = true;\n    Settings.Video.OpenGL = false;\n    Settings.Audio.SoundEffectVolume = 10;\n    AndroidSettings.ScreenOrientation = 1;\n    Settings.Window.Fullscreen = true;\n    this.onCreate(new FileTest() ,  savedInstanceState);\n}\n</code></pre>\n\n<p>The testing class:</p>\n\n<pre><code>import org.simplecorporation.myengine.core.Settings;\nimport org.simplecorporation.myengine.core.android.AndroidActivity;\nimport org.simplecorporation.myengine.core.android.AndroidSettings;\n\nimport android.os.Bundle;\nimport android.util.Log;\n\npublic class MainActivity extends AndroidActivity {\n\nprotected void onCreate(Bundle savedInstanceState) {\n    Settings.Window.Title = \"MyEngine Android Tests\";\n    Settings.Android = true;\n    Settings.Video.OpenGL = false;\n    Settings.Audio.SoundEffectVolume = 10;\n    AndroidSettings.ScreenOrientation = 1;\n    Settings.Window.Fullscreen = true;\n    this.onCreate(new FileTest() ,  savedInstanceState);\n}\n\n@Override\npublic void activityCreated() {\n    // TODO Auto-generated method stub\n\n}\n\n@Override\npublic void activityPaused() {\n    // TODO Auto-generated method stub\n    Log.d(\"HELLO\", \"I HAVE BEEN PAUSED\");\n}\n\n@Override\npublic void activityResumed() {\n    // TODO Auto-generated method stub\n    Log.d(\"HELLO\", \"I HAVE BEEN RESUMED\");\n}\n\n@Override\npublic void activityStopped() {\n    // TODO Auto-generated method stub\n    Log.d(\"HELLO\", \"I HAVE BEEN STOPPED\");\n}\n\n@Override\npublic void activityRestarted() {\n    // TODO Auto-generated method stub\n    Log.d(\"HELLO\", \"I HAVE BEEN RESTARTED\");\n}\n\n@Override\npublic void activityDestroy() {\n    // TODO Auto-generated method stub\n    Log.d(\"HELLO\", \"I HAVE BEEN DESTROYED\");\n}\n\n}\n</code></pre>\n\n<p>FileTest:</p>\n\n<pre><code>package com.simplecorporation.myengine.android.tests;\n\nimport java.util.List;\n\nimport org.simplecorporation.myengine.core.Settings;\nimport org.simplecorporation.myengine.core.audio.clip.AndroidAudio;\nimport org.simplecorporation.myengine.core.game.BaseGame;\nimport org.simplecorporation.myengine.core.game2d.entity.ImageEntity2D;\nimport org.simplecorporation.myengine.core.gui.GUIButton;\nimport org.simplecorporation.myengine.core.gui.GUICheckBox;\nimport org.simplecorporation.myengine.core.gui.GUIRenderer;\nimport org.simplecorporation.myengine.core.gui.GUIScrollBar;\nimport org.simplecorporation.myengine.core.gui.GUISlider;\nimport org.simplecorporation.myengine.core.gui.GUITextDisplayArea;\nimport org.simplecorporation.myengine.core.gui.font.GUIFont;\nimport org.simplecorporation.myengine.core.gui.font.bitmap.BitmapFont;\nimport org.simplecorporation.myengine.core.image.Image;\nimport org.simplecorporation.myengine.core.input.event.TouchEvent;\nimport org.simplecorporation.myengine.core.render.basic.BasicRenderer;\nimport org.simplecorporation.myengine.core.render.colour.Colour;\nimport org.simplecorporation.myengine.utils.AndroidFileUtils;\nimport org.simplecorporation.myengine.utils.ArrayUtils;\nimport org.simplecorporation.myengine.utils.FileUtils;\nimport org.simplecorporation.myengine.utils.font.FontUtils;\n\nimport android.os.Environment;\nimport android.util.Log;\n\npublic class FileTest extends BaseGame {\n\npublic ImageEntity2D image;\npublic Colour colour;\npublic GUIButton button;\npublic GUICheckBox checkBox;\npublic AndroidAudio audio;\npublic GUIFont bitmapFont;\npublic GUIScrollBar scrollBar;\n\npublic GUIScrollBar verticalslider;\npublic GUIScrollBar horizontalslider;\npublic GUITextDisplayArea textDisplayArea;\n\npublic FileTest() {\n    createGame();\n}\n\n@Override\npublic void gameCreated() {\n    // TODO Auto-generated method stub\n    image = new ImageEntity2D(new Image(R.drawable.menubutton));\n    image.position.x = 200;\n    image.position.y = 200;\n    image.width = 200;\n    image.height = 60;\n    image.rotationVelocity = 1;\n    colour = new Colour(0d, 0d, 0d, 1d);\n    button = new GUIButton(\"AndroidGUIButton\" , \"Click Me\" , new GUIRenderer(new Colour[] {\n            Colour.LIGHT_BLUE , Colour.ORANGE , Colour.BLUE\n    } , FontUtils.buildGUIFont(\"Arial\" , Colour.WHITE , 46f)));\n    button.position.x = 300;\n    button.position.y = 200;\n    button.width = 300;\n    button.height = 60;\n    button.visible = true;\n\n    checkBox = new GUICheckBox(\"AndroidCheckBox\" , new GUIRenderer(new Colour[] { Colour.WHITE , Colour.BLUE }));\n    checkBox.position.x = 500;\n    checkBox.position.y = 300;\n    checkBox.width = 100;\n    checkBox.height = 100;\n    checkBox.visible = true;\n\n    bitmapFont = new GUIFont(new BitmapFont(new Image(R.drawable.test) , 40, 16));\n\n    GUIButton verticalsliderButton = new GUIButton(\"Button2\" , \"\" , new GUIRenderer(new Colour[] {\n            Colour.ORANGE ,\n            Colour.LIGHT_BLUE ,\n            Colour.BLUE\n    } , FontUtils.buildGUIFont(\"Segoe UI\" , Colour.WHITE , 20f)));\n    verticalsliderButton.width = 100;\n    verticalsliderButton.height = 20;\n    verticalsliderButton.visible = true;\n\n    verticalslider = new GUIScrollBar(\"Slider1\" , verticalsliderButton , GUISlider.DIRECTION_VERTICAL , 1, new GUIRenderer(new Colour[] { Colour.RED }));\n\n    verticalslider.visible = true;\n    verticalslider.position.x = 200;\n    verticalslider.position.y = 200;\n    verticalslider.width = 30;\n    verticalslider.height = 100;\n\n    GUIButton horizontalsliderButton = new GUIButton(\"Button2\" , \"\" , new GUIRenderer(new Colour[] {\n            Colour.ORANGE ,\n            Colour.LIGHT_BLUE ,\n            Colour.BLUE\n    } , FontUtils.buildGUIFont(\"Segoe UI\" , Colour.WHITE , 20f)));\n    horizontalsliderButton.width = 20;\n    horizontalsliderButton.height = 100;\n    horizontalsliderButton.visible = true;\n\n    horizontalslider = new GUIScrollBar(\"Slider2\" , horizontalsliderButton , GUISlider.DIRECTION_HORIZONTAL , 1, new GUIRenderer(new Colour[] { Colour.RED }));\n\n    horizontalslider.visible = true;\n    horizontalslider.position.x = 300;\n    horizontalslider.position.y = 300;\n    horizontalslider.width = 100;\n    horizontalslider.height = 30;\n\n    audio = new AndroidAudio(R.raw.encode , false , false);\n\n    List&lt;String&gt; text = ArrayUtils.toStringList(new String[] {\n            \"Hello, this test application was made using MyEngine \" + Settings.EngineVersion,\n            \"with the build \" + Settings.EngineBuild + \". Below this message you should find\",\n            \"a bitmap font:\"\n    });\n    this.textDisplayArea = new GUITextDisplayArea(\"TextArea\", text, FontUtils.buildGUIFont(\"Arial\" , Colour.WHITE , 40f), Settings.Window.Size.Width);\n    this.textDisplayArea.position.x = 0;\n    this.textDisplayArea.position.y = 500;\n    this.textDisplayArea.visible = true;\n\n    AndroidFileUtils.writeToInternalStorage(\"hello.txt\", ArrayUtils.toStringList(new String[] {\n            \"Hello World, From hello.txt\"\n    }));\n    this.textDisplayArea.setText(AndroidFileUtils.readFromInternalStorage(\"hello.txt\"));\n\n    AndroidFileUtils.writeToExternalStorage(\"hello.txt\", ArrayUtils.toStringList(new String[] {\n            \"Hello World, From hello.txt in an External Storage file :)\"\n    }));\n\n    this.textDisplayArea.setText(FileUtils.read(\"eclipse.txt\", false));\n\n    Log.d(\"HELLO\", \"\" + AndroidFileUtils.isExternalStorageWritable() + \" \" + Environment.getExternalStorageDirectory());\n}\n\npublic void gameRender() {\n    BasicRenderer.setColour(colour);\n    BasicRenderer.renderFilledRectangle(0 , 0 , Settings.Window.Size.Width , Settings.Window.Size.Height);\n    BasicRenderer.setColour(Colour.BLUE);\n    BasicRenderer.renderFilledRectangle(100 , 100 , 100 , 100);\n    BasicRenderer.setColour(Colour.WHITE);\n    verticalslider.render();\n    horizontalslider.render();\n    image.render();\n    button.render();\n    checkBox.render();\n    textDisplayArea.render();\n    BasicRenderer.setColour(Colour.WHITE);\n    bitmapFont.render(\"This is a bitmap font :)\" , 10 , 700);\n}\n\npublic void gameUpdate() {\n    button.update();\n    checkBox.update();\n    image.update();\n    verticalslider.update();\n    horizontalslider.update();\n    if (button.clicked) {\n        colour = new Colour(0d , 0d , 0d , 1d);\n        audio.play();\n    }\n    textDisplayArea.update();\n}\n\npublic void onTouch(TouchEvent e) {\n    this.colour = new Colour(this.colour.getR() + 0.01, this.colour.getG() + 0.01, this.colour.getB() + 0.01);\n}\n\n}\n</code></pre>\n\n<p>Many thanks in advance.</p>\n"},{"tags":["java","c","eclipse","dll"],"comments":[{"owner":{"account_id":7195741,"reputation":1,"user_id":6110094,"accept_rate":83,"display_name":"0___________"},"score":0,"creation_date":1694807433,"post_id":77114701,"comment_id":135944746,"body_markdown":"Go through it: https://rollbar.com/blog/java-unsatisfiedlinkerror-runtime-error/#","body":"Go through it: <a href=\"https://rollbar.com/blog/java-unsatisfiedlinkerror-runtime-error/#\" rel=\"nofollow noreferrer\">rollbar.com/blog/java-unsatisfiedlinkerror-runtime-error/#</a>"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1694828792,"post_id":77114701,"comment_id":135946723,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."},{"owner":{"account_id":20798008,"reputation":181,"user_id":15274669,"display_name":"majixin"},"score":0,"creation_date":1695051227,"post_id":77114701,"comment_id":135969171,"body_markdown":"Without you posting some parts of your code, or the full message for the exception, it is practically impossible to deduce where/why it&#39;s going wrong.\n\nThat said, an ```UnsatisfiedLinkError``` is highly suggestive. You should have an interface class in your code that defines the functions in the C DLL. At runtime, if these mismatch, you will get an UnsatisfiedLinkError. However, you might also get this when the DLL cannot be found to be loaded. In the case of mismatches, it&#39;s not just the function names that should match, but the arguments once converted to Java type equivalents.","body":"Without you posting some parts of your code, or the full message for the exception, it is practically impossible to deduce where/why it&#39;s going wrong.  That said, an <code>UnsatisfiedLinkError</code> is highly suggestive. You should have an interface class in your code that defines the functions in the C DLL. At runtime, if these mismatch, you will get an UnsatisfiedLinkError. However, you might also get this when the DLL cannot be found to be loaded. In the case of mismatches, it&#39;s not just the function names that should match, but the arguments once converted to Java type equivalents."},{"owner":{"account_id":20798008,"reputation":181,"user_id":15274669,"display_name":"majixin"},"score":0,"creation_date":1695051444,"post_id":77114701,"comment_id":135969219,"body_markdown":"In addition to my earlier comment, but in regards to debugging, you mention the application has been around for years, so it is likely you are using JNA to load the DLL and should find ```Native.loadLibrary``` somewhere in your code. Ensure there&#39;s a try-catch around it and learn how DLL locations are resolved on your OS. It could be the DLL is not getting resolved. If it is, then you&#39;ve not correctly defined the additional functions in Java correctly, or you have but are still using an older DLL that doesn&#39;t have the implementation.","body":"In addition to my earlier comment, but in regards to debugging, you mention the application has been around for years, so it is likely you are using JNA to load the DLL and should find <code>Native.loadLibrary</code> somewhere in your code. Ensure there&#39;s a try-catch around it and learn how DLL locations are resolved on your OS. It could be the DLL is not getting resolved. If it is, then you&#39;ve not correctly defined the additional functions in Java correctly, or you have but are still using an older DLL that doesn&#39;t have the implementation."}],"owner":{"account_id":18246146,"reputation":11,"user_id":13282218,"display_name":"Bryan Van Dyke"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1694803165,"creation_date":1694803165,"question_id":77114701,"body_markdown":"I have a java application which spins off a c dll thread.  This has worked for years.  Now, I need to add an argument to the interface between java and the c dll.  I added the necessary additional arguments to both the java and c code.  I screwed up because now I get a UnsatisfiedLinkError when the c dll is supposed to be spun off.  I use eclipse development environment.  My question is:  how do I debug this error in eclipse?  \r\n\r\nThanks for your consideration.  \r\n\r\nCurrently, I put a break point in the java code where the c dll is spun off. At the break point, I was hoping to be able to interrogate what the java is looking for so I can find out where I made my mistake.  However, the eclipse go straight to UnsatisfiedLinkError with no opportunity that I can see to interrogate what it is looking for.  Is there any available tool, or part of Eclipse that I don&#39;t know about that can tell me what the java is looking for?","title":"debugging in eclipse the link between a java application and a c dll thread","body":"<p>I have a java application which spins off a c dll thread.  This has worked for years.  Now, I need to add an argument to the interface between java and the c dll.  I added the necessary additional arguments to both the java and c code.  I screwed up because now I get a UnsatisfiedLinkError when the c dll is supposed to be spun off.  I use eclipse development environment.  My question is:  how do I debug this error in eclipse?</p>\n<p>Thanks for your consideration.</p>\n<p>Currently, I put a break point in the java code where the c dll is spun off. At the break point, I was hoping to be able to interrogate what the java is looking for so I can find out where I made my mistake.  However, the eclipse go straight to UnsatisfiedLinkError with no opportunity that I can see to interrogate what it is looking for.  Is there any available tool, or part of Eclipse that I don't know about that can tell me what the java is looking for?</p>\n"},{"tags":["java","spring","mongodb","caching","ttl"],"comments":[{"owner":{"account_id":5979593,"reputation":149,"user_id":6059956,"display_name":"Vamsi"},"score":0,"creation_date":1694802900,"post_id":77102843,"comment_id":135944070,"body_markdown":"we don&#39;t have control over oAuth server, we are consuming the downstream service as a consumer app. And anyway I am able to figure this out using this mongo feature https://www.mongodb.com/docs/manual/tutorial/expire-data/#expire-documents-after-a-specified-number-of-seconds","body":"we don&#39;t have control over oAuth server, we are consuming the downstream service as a consumer app. And anyway I am able to figure this out using this mongo feature <a href=\"https://www.mongodb.com/docs/manual/tutorial/expire-data/#expire-documents-after-a-specified-number-of-seconds\" rel=\"nofollow noreferrer\">mongodb.com/docs/manual/tutorial/expire-data/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":5979593,"reputation":149,"user_id":6059956,"display_name":"Vamsi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1694803021,"creation_date":1694803021,"answer_id":77114690,"question_id":77102843,"body_markdown":"This can be worked out by setting Mongo TTL to &quot;0&quot; and set the expiry date to the TTL indexed Date field to make it expire at a specific time(at token expiry time).\r\nhttps://www.mongodb.com/docs/manual/tutorial/expire-data/#expire-documents-after-a-specified-number-of-seconds","title":"How do i efficiently store an OAuth token (TTL) without using in-memory cache in Java?","body":"<p>This can be worked out by setting Mongo TTL to &quot;0&quot; and set the expiry date to the TTL indexed Date field to make it expire at a specific time(at token expiry time).\n<a href=\"https://www.mongodb.com/docs/manual/tutorial/expire-data/#expire-documents-after-a-specified-number-of-seconds\" rel=\"nofollow noreferrer\">https://www.mongodb.com/docs/manual/tutorial/expire-data/#expire-documents-after-a-specified-number-of-seconds</a></p>\n"}],"owner":{"account_id":5979593,"reputation":149,"user_id":6059956,"display_name":"Vamsi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77114690,"answer_count":1,"score":0,"last_activity_date":1694803021,"creation_date":1694678285,"question_id":77102843,"body_markdown":"I am using EHCache to store a dynamic TTL OAuth Token but I maintain multiple pods in Kubernetes and end up making multiple OAuth Token REST calls to get latest token and due to less traffic in Pods, the API performance(P90, P95) is getting bad.\r\n\r\nI tried to save OAuth token to MongoDB, but due to static TTL index, I can&#39;t dynamically create TTL index and even can&#39;t use expiry seconds to calculate based on current time, as it may cause concurrent threads ending up reading/writing the token simultaneously.\r\n\r\nLooking for a better design suggestions to handle dynamic oauth token management without using any In-Memory caches in Java environment. Looking for better solutions using programmatic approach with Java and MongoDB.","title":"How do i efficiently store an OAuth token (TTL) without using in-memory cache in Java?","body":"<p>I am using EHCache to store a dynamic TTL OAuth Token but I maintain multiple pods in Kubernetes and end up making multiple OAuth Token REST calls to get latest token and due to less traffic in Pods, the API performance(P90, P95) is getting bad.</p>\n<p>I tried to save OAuth token to MongoDB, but due to static TTL index, I can't dynamically create TTL index and even can't use expiry seconds to calculate based on current time, as it may cause concurrent threads ending up reading/writing the token simultaneously.</p>\n<p>Looking for a better design suggestions to handle dynamic oauth token management without using any In-Memory caches in Java environment. Looking for better solutions using programmatic approach with Java and MongoDB.</p>\n"},{"tags":["java","spring","spring-boot","design-patterns"],"comments":[{"owner":{"account_id":27243397,"reputation":1331,"user_id":20769158,"display_name":"scrhartley"},"score":0,"creation_date":1694807639,"post_id":77114608,"comment_id":135944782,"body_markdown":"The Spring team generally advocates constructor injection and has nothing against constructors. [This question](https://stackoverflow.com/questions/40620000/spring-autowire-on-properties-vs-constructor) covers constructor injection and this Spring doc [Constructor-based or setter-based DI](https://docs.spring.io/spring-framework/reference/core/beans/dependencies/factory-collaborators.html#beans-constructor-vs-setter-injection). People use @Autowired on fields due to laziness. Also: [@Autowired docs](https://docs.spring.io/spring-framework/reference/core/beans/annotation-config/autowired.html).","body":"The Spring team generally advocates constructor injection and has nothing against constructors. <a href=\"https://stackoverflow.com/questions/40620000/spring-autowire-on-properties-vs-constructor\">This question</a> covers constructor injection and this Spring doc <a href=\"https://docs.spring.io/spring-framework/reference/core/beans/dependencies/factory-collaborators.html#beans-constructor-vs-setter-injection\" rel=\"nofollow noreferrer\">Constructor-based or setter-based DI</a>. People use @Autowired on fields due to laziness. Also: <a href=\"https://docs.spring.io/spring-framework/reference/core/beans/annotation-config/autowired.html\" rel=\"nofollow noreferrer\">@Autowired docs</a>."}],"owner":{"account_id":6307461,"reputation":365,"user_id":4900133,"display_name":"enthusiast"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694801880,"creation_date":1694801880,"question_id":77114608,"body_markdown":"Below is the scenario where I need a solution.\r\nclass B is a generic solution where I need to inject different instances of C.\r\nA and X will call B and B will work with the corresponding instances of C.\r\n\r\nI need a List&lt;D&gt; as well autowired to class B, since B object is created using new operator its not possible, and I dont want to pass List&lt;D&gt; through constructor.\r\n\r\nWhat would be the ideal solution?\r\n\r\nI could have passed the C object in the b.method argument but thats not a good practise I presume.\r\n\r\n    @Bean(name=&quot;instance1&quot;)\r\n     public B createB() {\r\n     return new B(new C(&quot;value1&quot;));\r\n     }\r\n    \r\n    ---------------------\r\n    \r\n    @Bean(name=&quot;instance2&quot;)\r\n     public B createB() {\r\n     return new B(new C(&quot;value2&quot;));\r\n     }\r\n    \r\n    ---------------------\r\n    \r\n    public class A {\r\n    @Autowired\r\n    @Qualifier(&quot;instance1&quot;)\r\n    private B b;\r\n     \r\n    b.method();\r\n    \r\n    }\r\n    \r\n    ---------------------\r\n    \r\n    public class X {\r\n    @Autowired\r\n    @Qualifier(&quot;instance2&quot;)\r\n    private B b;\r\n     \r\n    b.method();\r\n    \r\n    }\r\n    \r\n    ---------------------\r\n    \r\n    public class B {\r\n    \r\n    @Autowired\r\n    private List&lt;D&gt; dList;\r\n    \r\n    B(C c) {\r\n    this.c = c;\r\n    }\r\n    c.method();\r\n    dList.forEach(d -&gt; //do something);\r\n    \r\n    }\r\n\r\n----------------------------\r\n","title":"Springboot dependency management design","body":"<p>Below is the scenario where I need a solution.\nclass B is a generic solution where I need to inject different instances of C.\nA and X will call B and B will work with the corresponding instances of C.</p>\n<p>I need a List as well autowired to class B, since B object is created using new operator its not possible, and I dont want to pass List through constructor.</p>\n<p>What would be the ideal solution?</p>\n<p>I could have passed the C object in the b.method argument but thats not a good practise I presume.</p>\n<pre><code>@Bean(name=&quot;instance1&quot;)\n public B createB() {\n return new B(new C(&quot;value1&quot;));\n }\n\n---------------------\n\n@Bean(name=&quot;instance2&quot;)\n public B createB() {\n return new B(new C(&quot;value2&quot;));\n }\n\n---------------------\n\npublic class A {\n@Autowired\n@Qualifier(&quot;instance1&quot;)\nprivate B b;\n \nb.method();\n\n}\n\n---------------------\n\npublic class X {\n@Autowired\n@Qualifier(&quot;instance2&quot;)\nprivate B b;\n \nb.method();\n\n}\n\n---------------------\n\npublic class B {\n\n@Autowired\nprivate List&lt;D&gt; dList;\n\nB(C c) {\nthis.c = c;\n}\nc.method();\ndList.forEach(d -&gt; //do something);\n\n}\n</code></pre>\n<hr />\n"},{"tags":["java","android","service","android-pendingintent"],"comments":[{"owner":{"account_id":6485263,"reputation":623,"user_id":5021056,"display_name":"ryankuck"},"score":0,"creation_date":1694814982,"post_id":77114489,"comment_id":135945798,"body_markdown":"Can you post the flow of data behavior that you expect, such as from the service to the activity or vice versa, and then note for us how far the data gets when you debug it and specify where exactly the data is not showing as expected?","body":"Can you post the flow of data behavior that you expect, such as from the service to the activity or vice versa, and then note for us how far the data gets when you debug it and specify where exactly the data is not showing as expected?"},{"owner":{"account_id":3366602,"reputation":611,"user_id":2827025,"display_name":"anemomylos"},"score":1,"creation_date":1694854417,"post_id":77114489,"comment_id":135948211,"body_markdown":"Do you request the runtime permissions? https://developer.android.com/develop/ui/views/notifications/notification-permission. \nDeclaring permissions in the manifest is not enough, you must also ask the user to enable them at runtime (when the application starts or the user selects to enable a feature).","body":"Do you request the runtime permissions? <a href=\"https://developer.android.com/develop/ui/views/notifications/notification-permission\" rel=\"nofollow noreferrer\">developer.android.com/develop/ui/views/notifications/&hellip;</a>.  Declaring permissions in the manifest is not enough, you must also ask the user to enable them at runtime (when the application starts or the user selects to enable a feature)."},{"owner":{"account_id":29454838,"reputation":11,"user_id":22570939,"display_name":"Nikollas Ohta"},"score":1,"creation_date":1694863153,"post_id":77114489,"comment_id":135949022,"body_markdown":"@ryankuck This is the flow I planned:\n\n1. With an intent, I start &quot;MyService&quot; in the &quot;MainActivity&quot; when the app is launched.\n2. When &quot;MyService&quot; starts, it reads the Light Sensor.\n3. After reading the data, it is shared with the &quot;MainActivity&quot; via SharedPreferences.\n4. In the &quot;MainActivity,&quot; I should access SharedPreferences and display it on the screen.\n5. Later, a function would be implemented to notify the user when there is a significant change in the Light Sensor.","body":"@ryankuck This is the flow I planned:  1. With an intent, I start &quot;MyService&quot; in the &quot;MainActivity&quot; when the app is launched. 2. When &quot;MyService&quot; starts, it reads the Light Sensor. 3. After reading the data, it is shared with the &quot;MainActivity&quot; via SharedPreferences. 4. In the &quot;MainActivity,&quot; I should access SharedPreferences and display it on the screen. 5. Later, a function would be implemented to notify the user when there is a significant change in the Light Sensor."},{"owner":{"account_id":29454838,"reputation":11,"user_id":22570939,"display_name":"Nikollas Ohta"},"score":1,"creation_date":1694864917,"post_id":77114489,"comment_id":135949195,"body_markdown":"@anemomylos thanks! I add the permission and updated `pendingIntent` with &quot;FLAG_IMMUTABLE&quot;. Working fine now.","body":"@anemomylos thanks! I add the permission and updated <code>pendingIntent</code> with &quot;FLAG_IMMUTABLE&quot;. Working fine now."}],"owner":{"account_id":29454838,"reputation":11,"user_id":22570939,"display_name":"Nikollas Ohta"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1694801437,"creation_date":1694800438,"question_id":77114489,"body_markdown":"I&#39;m making a simple light-sensor app, but as my title says, they never appear.\r\n\r\nIn my `manifest.xml`:\r\n\r\n```\r\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.POST_NOTIFICATIONS&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\r\n\r\n    &lt;application\r\n        android:allowBackup=&quot;true&quot;\r\n        android:icon=&quot;@mipmap/ic_launcher&quot;\r\n        android:label=&quot;@string/app_name&quot;\r\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\r\n        android:supportsRtl=&quot;true&quot;\r\n        android:theme=&quot;@style/Base.Theme.Lightsensorreader&quot;&gt;\r\n        &lt;activity android:name=&quot;.MainActivity&quot;\r\n            android:exported=&quot;true&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n\r\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/activity&gt;\r\n        &lt;service\r\n            android:name=&quot;.MyService&quot;\r\n            android:enabled=&quot;true&quot;\r\n            android:exported=&quot;false&quot; /&gt;\r\n    &lt;/application&gt;\r\n\r\n&lt;/manifest&gt;\r\n```\r\n\r\nIn `MainActivity.java`, where I try to receive the data from MyService and put it on the screen:\r\n\r\n\r\n   \r\n```\r\nprivate TextView lightValueTextView;\r\nprivate SharedPreferences sharedPreferences;\r\n\r\n@Override\r\n     protected void onCreate(@Nullable Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        lightValueTextView = findViewById(R.id.lightValueTV);\r\n        sharedPreferences = PreferenceManager.getDefaultSharedPreferences(this);\r\n\r\n        Intent serviceIntent = new Intent(this, MyService.class);\r\n        startService(serviceIntent);\r\n    }\r\n\r\n    @Override\r\n    protected void onResume() {\r\n        super.onResume();\r\n\r\n        float lightValue = sharedPreferences.getFloat(&quot;light_value&quot;, 0);\r\n        lightValueTextView.setText(&quot;Light sensor value: &quot; + lightValue);\r\n    }\r\n```\r\n\r\nAnd finally the `MyService.java`, which contains the notification logic using PendingIntent and tries to use SharedPreferences.\r\n    \r\n```\r\nprivate SensorManager sensorManager;\r\n    private Sensor lightSensor;\r\n    private SharedPreferences sharedPreferences;\r\n    private SharedPreferences.Editor editor;\r\n\r\n    @Override\r\n    public void onCreate() {\r\n        super.onCreate();\r\n\r\n        sensorManager = (SensorManager) getSystemService(Context.SENSOR_SERVICE);\r\n        lightSensor = sensorManager.getDefaultSensor(Sensor.TYPE_LIGHT);\r\n        sharedPreferences = PreferenceManager.getDefaultSharedPreferences(this);\r\n        editor = sharedPreferences.edit();\r\n\r\n        if (lightSensor != null) {\r\n            sensorManager.registerListener(this, lightSensor, SensorManager.SENSOR_DELAY_NORMAL);\r\n        }\r\n\r\n        createNotificationChannel();\r\n    }\r\n\r\n    @Override\r\n    public void onDestroy() {\r\n        super.onDestroy();\r\n        sensorManager.unregisterListener(this);\r\n    }\r\n\r\n    @Override\r\n    public void onSensorChanged(SensorEvent event) {\r\n        if (event.sensor.getType() == Sensor.TYPE_LIGHT) {\r\n            float lightValue = event.values[0];\r\n\r\n            editor.putFloat(&quot;light_value&quot;, lightValue);\r\n            editor.apply();\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void onAccuracyChanged(Sensor sensor, int accuracy) {\r\n    }\r\n\r\n    @Override\r\n    public IBinder onBind(Intent intent) {\r\n        return new Binder();\r\n    }\r\n\r\n    private void createNotificationChannel() {\r\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\r\n            String channelId = &quot;light_sensor_notification_channel&quot;;\r\n            String channelName = &quot;Light Sensor Notification Channel&quot;;\r\n            int importance = NotificationManager.IMPORTANCE_DEFAULT;\r\n            NotificationChannel channel = new NotificationChannel(channelId, channelName, importance);\r\n            channel.enableLights(true);\r\n            channel.setLightColor(Color.RED);\r\n\r\n            NotificationManager notificationManager = getSystemService(NotificationManager.class);\r\n            notificationManager.createNotificationChannel(channel);\r\n        }\r\n    }\r\n\r\n    private void sendNotification(String title, String message) {\r\n        Intent intent = new Intent(this, MainActivity.class);\r\n        PendingIntent pendingIntent = PendingIntent.getActivity(this, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT);\r\n\r\n        NotificationCompat.Builder builder = new NotificationCompat.Builder(this, &quot;light_sensor_notification_channel&quot;)\r\n                .setSmallIcon(R.mipmap.ic_launcher)\r\n                .setContentTitle(title)\r\n                .setContentText(message)\r\n                .setContentIntent(pendingIntent)\r\n                .setAutoCancel(true);\r\n\r\n        NotificationManagerCompat notificationManager = NotificationManagerCompat.from(this);\r\n\r\n        notificationManager.notify(0, builder.build());\r\n    }\r\n```\r\n\r\n\r\n\r\nI have also tested the &quot;not deprecated&quot; methods of SharedPreferences. Any ideas?","title":"Android never sent notifications","body":"<p>I'm making a simple light-sensor app, but as my title says, they never appear.</p>\n<p>In my <code>manifest.xml</code>:</p>\n<pre><code>&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\n\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.POST_NOTIFICATIONS&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\n\n    &lt;application\n        android:allowBackup=&quot;true&quot;\n        android:icon=&quot;@mipmap/ic_launcher&quot;\n        android:label=&quot;@string/app_name&quot;\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\n        android:supportsRtl=&quot;true&quot;\n        android:theme=&quot;@style/Base.Theme.Lightsensorreader&quot;&gt;\n        &lt;activity android:name=&quot;.MainActivity&quot;\n            android:exported=&quot;true&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n        &lt;service\n            android:name=&quot;.MyService&quot;\n            android:enabled=&quot;true&quot;\n            android:exported=&quot;false&quot; /&gt;\n    &lt;/application&gt;\n\n&lt;/manifest&gt;\n</code></pre>\n<p>In <code>MainActivity.java</code>, where I try to receive the data from MyService and put it on the screen:</p>\n<pre><code>private TextView lightValueTextView;\nprivate SharedPreferences sharedPreferences;\n\n@Override\n     protected void onCreate(@Nullable Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        lightValueTextView = findViewById(R.id.lightValueTV);\n        sharedPreferences = PreferenceManager.getDefaultSharedPreferences(this);\n\n        Intent serviceIntent = new Intent(this, MyService.class);\n        startService(serviceIntent);\n    }\n\n    @Override\n    protected void onResume() {\n        super.onResume();\n\n        float lightValue = sharedPreferences.getFloat(&quot;light_value&quot;, 0);\n        lightValueTextView.setText(&quot;Light sensor value: &quot; + lightValue);\n    }\n</code></pre>\n<p>And finally the <code>MyService.java</code>, which contains the notification logic using PendingIntent and tries to use SharedPreferences.</p>\n<pre><code>private SensorManager sensorManager;\n    private Sensor lightSensor;\n    private SharedPreferences sharedPreferences;\n    private SharedPreferences.Editor editor;\n\n    @Override\n    public void onCreate() {\n        super.onCreate();\n\n        sensorManager = (SensorManager) getSystemService(Context.SENSOR_SERVICE);\n        lightSensor = sensorManager.getDefaultSensor(Sensor.TYPE_LIGHT);\n        sharedPreferences = PreferenceManager.getDefaultSharedPreferences(this);\n        editor = sharedPreferences.edit();\n\n        if (lightSensor != null) {\n            sensorManager.registerListener(this, lightSensor, SensorManager.SENSOR_DELAY_NORMAL);\n        }\n\n        createNotificationChannel();\n    }\n\n    @Override\n    public void onDestroy() {\n        super.onDestroy();\n        sensorManager.unregisterListener(this);\n    }\n\n    @Override\n    public void onSensorChanged(SensorEvent event) {\n        if (event.sensor.getType() == Sensor.TYPE_LIGHT) {\n            float lightValue = event.values[0];\n\n            editor.putFloat(&quot;light_value&quot;, lightValue);\n            editor.apply();\n        }\n    }\n\n    @Override\n    public void onAccuracyChanged(Sensor sensor, int accuracy) {\n    }\n\n    @Override\n    public IBinder onBind(Intent intent) {\n        return new Binder();\n    }\n\n    private void createNotificationChannel() {\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\n            String channelId = &quot;light_sensor_notification_channel&quot;;\n            String channelName = &quot;Light Sensor Notification Channel&quot;;\n            int importance = NotificationManager.IMPORTANCE_DEFAULT;\n            NotificationChannel channel = new NotificationChannel(channelId, channelName, importance);\n            channel.enableLights(true);\n            channel.setLightColor(Color.RED);\n\n            NotificationManager notificationManager = getSystemService(NotificationManager.class);\n            notificationManager.createNotificationChannel(channel);\n        }\n    }\n\n    private void sendNotification(String title, String message) {\n        Intent intent = new Intent(this, MainActivity.class);\n        PendingIntent pendingIntent = PendingIntent.getActivity(this, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT);\n\n        NotificationCompat.Builder builder = new NotificationCompat.Builder(this, &quot;light_sensor_notification_channel&quot;)\n                .setSmallIcon(R.mipmap.ic_launcher)\n                .setContentTitle(title)\n                .setContentText(message)\n                .setContentIntent(pendingIntent)\n                .setAutoCancel(true);\n\n        NotificationManagerCompat notificationManager = NotificationManagerCompat.from(this);\n\n        notificationManager.notify(0, builder.build());\n    }\n</code></pre>\n<p>I have also tested the &quot;not deprecated&quot; methods of SharedPreferences. Any ideas?</p>\n"},{"tags":["java","multithreading"],"comments":[{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":1,"creation_date":1694801490,"post_id":77114559,"comment_id":135943848,"body_markdown":"At a guess, you might need to set the fairness of the semaphores (e.g. `new Semaphore(1, true)`).","body":"At a guess, you might need to set the fairness of the semaphores (e.g. <code>new Semaphore(1, true)</code>)."},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":1,"creation_date":1694804248,"post_id":77114559,"comment_id":135944261,"body_markdown":"Is this an assignment?  Are you required or allowed to use the built-in class `Semaphore`?","body":"Is this an assignment?  Are you required or allowed to use the built-in class <code>Semaphore</code>?"},{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1694804363,"post_id":77114559,"comment_id":135944282,"body_markdown":"Shouldn&#39;t the writer semaphore also have a permit initially? Otherwise there won&#39;t be a permit for the writer until all readers have finished and `writerSemaphore.release()` gives a permit allowing the writers to run.","body":"Shouldn&#39;t the writer semaphore also have a permit initially? Otherwise there won&#39;t be a permit for the writer until all readers have finished and <code>writerSemaphore.release()</code> gives a permit allowing the writers to run."}],"owner":{"account_id":3799294,"reputation":25,"user_id":3153356,"display_name":"user3153356"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694801317,"creation_date":1694801317,"question_id":77114559,"body_markdown":"I am new to multithreading and trying to solve the readers writers problem. Below the code which I have written.\r\n\r\n    public class ReaderWriterProblem implements Runnable {\r\n      \tSemaphore readerSemaphore;\r\n    \tSemaphore writerSemaphore;\r\n    \tstatic int currentReadingThreads = 0;\r\n    \r\n    \tpublic ReaderWriterProblem(Semaphore readerSemaphore, Semaphore writerSemaphore) {\r\n    \t\tthis.readerSemaphore = readerSemaphore;\r\n    \t\tthis.writerSemaphore = writerSemaphore;\r\n    \t}\r\n    \r\n    \tpublic void enterCriticalSection() throws InterruptedException {\r\n    \t\tif(!Thread.currentThread().getName().startWith(&quot;Reader&quot;)) {\r\n    \t\t\twriterSemaphore.acquire();\r\n    \t\t\t\r\n    \t\t\tSystem.out.println(Thread.currentThread().getName()+&quot; acquired lock&quot;);\r\n    \t\t\tThread.sleep(1000);\r\n    \t\t\t\r\n    \t\t\tSystem.out.println(Thread.currentThread().getName()+&quot; going to release lock&quot;);\r\n    \t\t\treaderSemaphore.release();\r\n    \t\t\twriterSemaphore.release();\r\n    \t\t}\r\n    \t\t\r\n    \t\tif(Thread.currentThread().getName().startWith(&quot;Reader&quot;)) {\r\n    \t\t\tif(currentReadingThreads == 0)\r\n    \t\t\t\treaderSemaphore.acquire();\r\n    \t\t\t\r\n    \t\t\tcurrentReadingThreads = currentReadingThreads + 1;\r\n    \t\t\t\r\n    \t\t\tSystem.out.println(Thread.currentThread().getName()+&quot; in critical section&quot;);\r\n    \t\t\tThread.sleep(1000);\r\n    \t\t\t\r\n    \t\t\tSystem.out.println(Thread.currentThread().getName()+&quot; going to leave critical section&quot;);\r\n    \t\t\tcurrentReadingThreads = currentReadingThreads - 1;\r\n    \r\n    \t\t\tif(currentReadingThreads == 0) {\r\n    \t\t\t\treaderSemaphore.release();\r\n    \t\t\t\twriterSemaphore.release();\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void run() {\r\n    \t\ttry {\r\n    \t\t\tenterCriticalSection();\r\n    \t\t} catch(InterruptedException e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tpublic static void main(String args[]) {\r\n    \t\tSemaphore readerSemaphore = new Semaphore(1);\r\n    \t\tSemaphore writerSemaphore = new Semaphore(0);\r\n    \t\t\r\n    \t\tint readerThreadCounter = 0, writerThreadCounter = 0;\r\n    \t\t\r\n    \t\tfor(int i = 0; i &lt; 10; i++) {\r\n    \t\t\tThread readerThread1 = new Thread(new ReaderWriterProblem(readerSemaphore, writerSemaphore), &quot;Reader Thread &quot;+readerThreadCounter);\r\n    \t\t\treaderThreadCounter = readerThreadCounter + 1;\r\n    \r\n    \t\t\tThread readerThread2 = new Thread(new ReaderWriterProblem(readerSemaphore, writerSemaphore), &quot;Reader Thread &quot;+readerThreadCounter);\r\n    \t\t\treaderThreadCounter = readerThreadCounter + 1;\r\n    \r\n    \t\t\tThread writerThread1 = new Thread(new ReaderWriterProblem(readerSemaphore, writerSemaphore), &quot;Writer Thread &quot;+readerThreadCounter);\r\n    \t\t\treaderThreadCounter = readerThreadCounter + 1;\r\n    \r\n    \t\t\tThread writerThread2 = new Thread(new ReaderWriterProblem(readerSemaphore, writerSemaphore), &quot;Writer Thread &quot;+readerThreadCounter);\r\n    \t\t\treaderThreadCounter = readerThreadCounter + 1;\r\n    \r\n    \t\t\tThread readerThread3 = new Thread(new ReaderWriterProblem(readerSemaphore, writerSemaphore), &quot;Reader Thread &quot;+readerThreadCounter);\r\n    \t\t\treaderThreadCounter = readerThreadCounter + 1;\r\n    \t\t\t\r\n    \t\t\treaderThread1.start();\r\n    \t\t\treaderThread2.start();\r\n    \t\t\twriterThread1.start();\r\n    \t\t\twriterThread2.start();\r\n    \t\t\treaderThread3.start();\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\nWhen I try to run the above implementation, the reader acquires the lock and executes first and at last all the writers thread acquires the lock. The writer thread doesn&#39;t execute in-between the reader threads. Could you please let me know what is the issue over here\r\n\r\nOutput below:\r\n\r\n    Reader Thread 0 is critical section\r\n    Reader Thread 6 is critical section\r\n    .\r\n    .\r\n    .\r\n    .\r\n    Reader Thread 0 is going to leave critical section\r\n    Reader Thread 6 is going to leave critical section\r\n    .\r\n    .\r\n    .\r\n    .\r\n    Writer Thread 0 acquired lock\r\n    Writer Thread 0 going to release lock\r\n    Writer Thread 1 acquired lock\r\n    Writer Thread 1 going to release lock\r\n    .\r\n    .\r\n    .\r\n    .\r\n    Writer Thread 19 acquired lock\r\n    Writer Thread 19 going to release lock\r\n\r\n\r\n","title":"Reader writer Multithreading implementation","body":"<p>I am new to multithreading and trying to solve the readers writers problem. Below the code which I have written.</p>\n<pre><code>public class ReaderWriterProblem implements Runnable {\n    Semaphore readerSemaphore;\n    Semaphore writerSemaphore;\n    static int currentReadingThreads = 0;\n\n    public ReaderWriterProblem(Semaphore readerSemaphore, Semaphore writerSemaphore) {\n        this.readerSemaphore = readerSemaphore;\n        this.writerSemaphore = writerSemaphore;\n    }\n\n    public void enterCriticalSection() throws InterruptedException {\n        if(!Thread.currentThread().getName().startWith(&quot;Reader&quot;)) {\n            writerSemaphore.acquire();\n            \n            System.out.println(Thread.currentThread().getName()+&quot; acquired lock&quot;);\n            Thread.sleep(1000);\n            \n            System.out.println(Thread.currentThread().getName()+&quot; going to release lock&quot;);\n            readerSemaphore.release();\n            writerSemaphore.release();\n        }\n        \n        if(Thread.currentThread().getName().startWith(&quot;Reader&quot;)) {\n            if(currentReadingThreads == 0)\n                readerSemaphore.acquire();\n            \n            currentReadingThreads = currentReadingThreads + 1;\n            \n            System.out.println(Thread.currentThread().getName()+&quot; in critical section&quot;);\n            Thread.sleep(1000);\n            \n            System.out.println(Thread.currentThread().getName()+&quot; going to leave critical section&quot;);\n            currentReadingThreads = currentReadingThreads - 1;\n\n            if(currentReadingThreads == 0) {\n                readerSemaphore.release();\n                writerSemaphore.release();\n            }\n        }\n    }\n\n    @Override\n    public void run() {\n        try {\n            enterCriticalSection();\n        } catch(InterruptedException e) {\n            e.printStackTrace();\n        }\n    }\n\n    public static void main(String args[]) {\n        Semaphore readerSemaphore = new Semaphore(1);\n        Semaphore writerSemaphore = new Semaphore(0);\n        \n        int readerThreadCounter = 0, writerThreadCounter = 0;\n        \n        for(int i = 0; i &lt; 10; i++) {\n            Thread readerThread1 = new Thread(new ReaderWriterProblem(readerSemaphore, writerSemaphore), &quot;Reader Thread &quot;+readerThreadCounter);\n            readerThreadCounter = readerThreadCounter + 1;\n\n            Thread readerThread2 = new Thread(new ReaderWriterProblem(readerSemaphore, writerSemaphore), &quot;Reader Thread &quot;+readerThreadCounter);\n            readerThreadCounter = readerThreadCounter + 1;\n\n            Thread writerThread1 = new Thread(new ReaderWriterProblem(readerSemaphore, writerSemaphore), &quot;Writer Thread &quot;+readerThreadCounter);\n            readerThreadCounter = readerThreadCounter + 1;\n\n            Thread writerThread2 = new Thread(new ReaderWriterProblem(readerSemaphore, writerSemaphore), &quot;Writer Thread &quot;+readerThreadCounter);\n            readerThreadCounter = readerThreadCounter + 1;\n\n            Thread readerThread3 = new Thread(new ReaderWriterProblem(readerSemaphore, writerSemaphore), &quot;Reader Thread &quot;+readerThreadCounter);\n            readerThreadCounter = readerThreadCounter + 1;\n            \n            readerThread1.start();\n            readerThread2.start();\n            writerThread1.start();\n            writerThread2.start();\n            readerThread3.start();\n        }\n    }\n}\n</code></pre>\n<p>When I try to run the above implementation, the reader acquires the lock and executes first and at last all the writers thread acquires the lock. The writer thread doesn't execute in-between the reader threads. Could you please let me know what is the issue over here</p>\n<p>Output below:</p>\n<pre><code>Reader Thread 0 is critical section\nReader Thread 6 is critical section\n.\n.\n.\n.\nReader Thread 0 is going to leave critical section\nReader Thread 6 is going to leave critical section\n.\n.\n.\n.\nWriter Thread 0 acquired lock\nWriter Thread 0 going to release lock\nWriter Thread 1 acquired lock\nWriter Thread 1 going to release lock\n.\n.\n.\n.\nWriter Thread 19 acquired lock\nWriter Thread 19 going to release lock\n</code></pre>\n"},{"tags":["java","eclipse","testng"],"comments":[{"owner":{"account_id":80593,"reputation":6741,"user_id":227804,"display_name":"lschin"},"score":0,"creation_date":1369209149,"post_id":16684281,"comment_id":24013031,"body_markdown":"Check you project build path","body":"Check you project build path"},{"owner":{"account_id":471893,"reputation":8441,"user_id":879977,"display_name":"niharika_neo"},"score":0,"creation_date":1369216277,"post_id":16684281,"comment_id":24016728,"body_markdown":"no screenshot attached","body":"no screenshot attached"}],"answers":[{"tags":[],"owner":{"account_id":1454798,"reputation":2552,"user_id":1394020,"accept_rate":88,"display_name":"Korey Hinton"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1369404304,"creation_date":1369404304,"answer_id":16736870,"question_id":16684281,"body_markdown":"Make sure you are importing annotations.\r\n\r\n     import org.testng.annotations.*;","title":"@Test Annotation in TestNG is not working in Eclipse","body":"<p>Make sure you are importing annotations.</p>\n\n<pre><code> import org.testng.annotations.*;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2799595,"reputation":195,"user_id":2408070,"accept_rate":50,"display_name":"user2408070"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1422438363,"creation_date":1369659388,"answer_id":16773727,"question_id":16684281,"body_markdown":"Thanks for all your answers and help. I got the mistake what I am doing:\r\n\r\nI am just leaving by writing `@Test` annotation. Instead if I write the annotation along with function this error is not coming. For e.g. \r\n\r\n    @Test \r\n    public void sampletest() { }\r\n\r\nthen the error which I am facing won&#39;t come.","title":"@Test Annotation in TestNG is not working in Eclipse","body":"<p>Thanks for all your answers and help. I got the mistake what I am doing:</p>\n\n<p>I am just leaving by writing <code>@Test</code> annotation. Instead if I write the annotation along with function this error is not coming. For e.g. </p>\n\n<pre><code>@Test \npublic void sampletest() { }\n</code></pre>\n\n<p>then the error which I am facing won't come.</p>\n"},{"tags":[],"owner":{"account_id":6385180,"reputation":148,"user_id":4953343,"accept_rate":75,"display_name":"vgm"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1446733133,"creation_date":1446733133,"answer_id":33546900,"question_id":16684281,"body_markdown":"For any future visitors, I was also able to fix this issue by making the test method public.","title":"@Test Annotation in TestNG is not working in Eclipse","body":"<p>For any future visitors, I was also able to fix this issue by making the test method public.</p>\n"},{"tags":[],"owner":{"account_id":15545023,"reputation":1,"user_id":11214553,"display_name":"sam"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1552778470,"creation_date":1552778470,"answer_id":55202479,"question_id":16684281,"body_markdown":"testng annotations not working.\r\n\r\nInclusion of the following (post by Korey Hinton) helped.\r\n import org.testng.annotations.*; - \r\n","title":"@Test Annotation in TestNG is not working in Eclipse","body":"<p>testng annotations not working.</p>\n\n<p>Inclusion of the following (post by Korey Hinton) helped.\n import org.testng.annotations.*; - </p>\n"},{"tags":[],"owner":{"account_id":22177465,"reputation":1,"user_id":16421756,"display_name":"surabhi joshi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1625943215,"creation_date":1625943215,"answer_id":68330730,"question_id":16684281,"body_markdown":"TestNG only picks the Files with &#39;test&#39; in the file Name or Public Class.\r\nFor Eg : the File name is App.java it won&#39;t run the @Test method but if we rename the file to AppTest it runs.\r\n","title":"@Test Annotation in TestNG is not working in Eclipse","body":"<p>TestNG only picks the Files with 'test' in the file Name or Public Class.\nFor Eg : the File name is App.java it won't run the @Test method but if we rename the file to AppTest it runs.</p>\n"}],"owner":{"account_id":2799595,"reputation":195,"user_id":2408070,"accept_rate":50,"display_name":"user2408070"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8568,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":5,"score":0,"last_activity_date":1694801175,"creation_date":1369201421,"question_id":16684281,"body_markdown":"I have installed TestNG(ver:6.8.6.20130517_2218) in Eclipse (Ver: 1.4.2.20120213-0813) on Windows7(64bit). I verified that TestNG is successfully installed\r\n\r\nWhen I write @Test in one of the sample jave file that I created, Annotation(@Test) is not resolved. It is giving Syntax error.What could be the issue? Please see the attached screenshot for more details\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/ULVix.jpg","title":"@Test Annotation in TestNG is not working in Eclipse","body":"<p>I have installed TestNG(ver:6.8.6.20130517_2218) in Eclipse (Ver: 1.4.2.20120213-0813) on Windows7(64bit). I verified that TestNG is successfully installed</p>\n\n<p>When I write @Test in one of the sample jave file that I created, Annotation(@Test) is not resolved. It is giving Syntax error.What could be the issue? Please see the attached screenshot for more details</p>\n"},{"tags":["java","cors","quarkus","quarkus-reactive"],"comments":[{"owner":{"account_id":1152519,"reputation":733,"user_id":1133928,"display_name":"Sergey Beryozkin"},"score":0,"creation_date":1694778324,"post_id":77109186,"comment_id":135939304,"body_markdown":"We&#39;ve opened a simple PR to log them: https://github.com/quarkusio/quarkus/pull/35959, note in some cases it is already logged, example: https://github.com/quarkusio/quarkus/blob/main/extensions/vertx-http/runtime/src/main/java/io/quarkus/vertx/http/runtime/cors/CORSFilter.java#L257, but it will be more complete now","body":"We&#39;ve opened a simple PR to log them: <a href=\"https://github.com/quarkusio/quarkus/pull/35959\" rel=\"nofollow noreferrer\">github.com/quarkusio/quarkus/pull/35959</a>, note in some cases it is already logged, example: <a href=\"https://github.com/quarkusio/quarkus/blob/main/extensions/vertx-http/runtime/src/main/java/io/quarkus/vertx/http/runtime/cors/CORSFilter.java#L257\" rel=\"nofollow noreferrer\">github.com/quarkusio/quarkus/blob/main/extensions/vertx-http&zwnj;&#8203;/&hellip;</a>, but it will be more complete now"},{"owner":{"account_id":400908,"reputation":3710,"user_id":767160,"accept_rate":78,"display_name":"gian1200"},"score":0,"creation_date":1694788137,"post_id":77109186,"comment_id":135941385,"body_markdown":"I forgot to mention that I&#39;m using 2.16.10, and I understand that I will need to update to v3 to get the PR changes.\nTo enable the current logs I should do something like `quarkus.log.category.&quot;io.quarkus.vertx.http.runtime.cors.CORSFilter&quot;.level=DEBUG`, right?","body":"I forgot to mention that I&#39;m using 2.16.10, and I understand that I will need to update to v3 to get the PR changes. To enable the current logs I should do something like <code>quarkus.log.category.&quot;io.quarkus.vertx.http.runtime.cors.COR&zwnj;&#8203;SFilter&quot;.level=DEBUG</code>&zwnj;&#8203;, right?"},{"owner":{"account_id":1152519,"reputation":733,"user_id":1133928,"display_name":"Sergey Beryozkin"},"score":0,"creation_date":1694971236,"post_id":77109186,"comment_id":135958484,"body_markdown":"I&#39;ve added a backport to 2.16 label as well","body":"I&#39;ve added a backport to 2.16 label as well"}],"owner":{"account_id":400908,"reputation":3710,"user_id":767160,"accept_rate":78,"display_name":"gian1200"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694801047,"creation_date":1694742262,"question_id":77109186,"body_markdown":"I currently have an app that has CORS properly configured. https://quarkus.io/guides/http-reference#cors-filter\r\n\r\nIt is currently responding 403 for a small amount of requests. However, I&#39;m unable to identify the origin of those requests. Is there a way to log the origin only when CORS validation fails (and not always)?\r\n\r\nQuarkus 2.16.10\r\n\r\n","title":"How to log CORS origin fails with Quarkus","body":"<p>I currently have an app that has CORS properly configured. <a href=\"https://quarkus.io/guides/http-reference#cors-filter\" rel=\"nofollow noreferrer\">https://quarkus.io/guides/http-reference#cors-filter</a></p>\n<p>It is currently responding 403 for a small amount of requests. However, I'm unable to identify the origin of those requests. Is there a way to log the origin only when CORS validation fails (and not always)?</p>\n<p>Quarkus 2.16.10</p>\n"},{"tags":["java","android"],"owner":{"account_id":387159,"reputation":1091,"user_id":745347,"accept_rate":51,"display_name":"E_Blue"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":248,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":0,"score":3,"last_activity_date":1694800283,"creation_date":1694798378,"question_id":77114279,"body_markdown":"I&#39;m updating an App in Android Studio (Giraffe) and getting this error many times\r\n\r\n**Duplicate class androidx.annotation.AnimRes found in modules annotation-1.3.0 (androidx.annotation:annotation:1.3.0) and jetified-annotation-jvm-1.7.0 (androidx.annotation:annotation-jvm:1.7.0)**\r\n\r\nI tried a lot of different approaches to solve this but none worked.\r\n\r\nI tried this\r\n\r\nhttps://developer.android.com/build/dependencies#view-dependency-tree\r\n\r\nWhich created more errors.\r\n\r\nAlso this\r\nhttps://stackoverflow.com/questions/72921553/error-building-android-duplicate-class-androidx-annotation-animres-found-in-mod\r\n\r\nhttps://stackoverflow.com/questions/55909804/duplicate-class-android-support-v4-app-inotificationsidechannel-found-in-modules\r\n\r\nhttps://stackoverflow.com/questions/72480174/android-duplicate-class-found-in-modules-jetified-play-services-measurement-and\r\n\r\nhttps://stackoverflow.com/questions/55756647/duplicate-classes-from-androidx-and-com-android-support\r\n\r\nMy gradle.properties has this lines.\r\n\r\n    android.defaults.buildfeatures.buildconfig=true\r\n    android.enableJetifier=true\r\n    android.nonFinalResIds=false\r\n    android.nonTransitiveRClass=false\r\n    android.useAndroidX=true\r\n    org.gradle.jvmargs=-Xmx1536m\r\n\r\nI&#39;m not using Kotlin I only use JAVA; so I deleted this line in build.gradle.app\r\n\r\n    apply plugin: &#39;kotlin-android&#39;\r\n\r\nEdit:\r\nI found this on the build gradle, Should I change the classpath? What should I write?\r\n\r\n    dependencies {\r\n            classpath &#39;com.android.tools.build:gradle:8.1.1&#39;\r\n            //classpath &quot;org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version&quot;\r\n    \r\n            // NOTE: Do not place your application dependencies here; they belong\r\n            // in the individual module build.gradle files\r\n        }","title":"Duplicate class androidx.annotation.AnimRes","body":"<p>I'm updating an App in Android Studio (Giraffe) and getting this error many times</p>\n<p><strong>Duplicate class androidx.annotation.AnimRes found in modules annotation-1.3.0 (androidx.annotation:annotation:1.3.0) and jetified-annotation-jvm-1.7.0 (androidx.annotation:annotation-jvm:1.7.0)</strong></p>\n<p>I tried a lot of different approaches to solve this but none worked.</p>\n<p>I tried this</p>\n<p><a href=\"https://developer.android.com/build/dependencies#view-dependency-tree\" rel=\"nofollow noreferrer\">https://developer.android.com/build/dependencies#view-dependency-tree</a></p>\n<p>Which created more errors.</p>\n<p>Also this\n<a href=\"https://stackoverflow.com/questions/72921553/error-building-android-duplicate-class-androidx-annotation-animres-found-in-mod\">Error building android: Duplicate class androidx.annotation.AnimRes found in modules annotation-1.3.0 - Unity 2019.4.40f1</a></p>\n<p><a href=\"https://stackoverflow.com/questions/55909804/duplicate-class-android-support-v4-app-inotificationsidechannel-found-in-modules\">Duplicate class android.support.v4.app.INotificationSideChannel found in modules classes?</a></p>\n<p><a href=\"https://stackoverflow.com/questions/72480174/android-duplicate-class-found-in-modules-jetified-play-services-measurement-and\">Android: Duplicate class found in modules jetified-play-services-measurement and jetified-play-services-measurement-impl</a></p>\n<p><a href=\"https://stackoverflow.com/questions/55756647/duplicate-classes-from-androidx-and-com-android-support\">Duplicate classes from androidx and com.android.support</a></p>\n<p>My gradle.properties has this lines.</p>\n<pre><code>android.defaults.buildfeatures.buildconfig=true\nandroid.enableJetifier=true\nandroid.nonFinalResIds=false\nandroid.nonTransitiveRClass=false\nandroid.useAndroidX=true\norg.gradle.jvmargs=-Xmx1536m\n</code></pre>\n<p>I'm not using Kotlin I only use JAVA; so I deleted this line in build.gradle.app</p>\n<pre><code>apply plugin: 'kotlin-android'\n</code></pre>\n<p>Edit:\nI found this on the build gradle, Should I change the classpath? What should I write?</p>\n<pre><code>dependencies {\n        classpath 'com.android.tools.build:gradle:8.1.1'\n        //classpath &quot;org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version&quot;\n\n        // NOTE: Do not place your application dependencies here; they belong\n        // in the individual module build.gradle files\n    }\n</code></pre>\n"},{"tags":["java","mocking","mockito"],"answers":[{"tags":[],"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1694799972,"creation_date":1694799972,"answer_id":77114443,"question_id":77114005,"body_markdown":"```\r\n\r\n@Test\r\npublic void testExecute_numberOfTimes() {\r\n    int maxIterations = 5;\r\n    TerminatorListener terminator = new TestTerminator(maxIterations);\r\n\r\n    given(provider.readScenarios()).willReturn(prepareScenarioList());\r\n\r\n    listener.execute(handler, terminator);\r\n\r\n    verify(handler, times(maxIterations)).onScenarioReceived(any(Scenario.class));\r\n}\r\n\r\n@AfterEach\r\nvoid tearDown() {\r\n    verifyNoMoreInteractions(provider);\r\n    verifyNoMoreInteractions(handler);\r\n}\r\n```\r\n\r\nYou are never calling `verify` on your provider. Therefore, there are still unverified interactions and `verifyNoMoreInteractions` will trip.\r\n\r\nYou must verify _all_ interactions of your provider:\r\n\r\n```\r\ngiven(provider.readScenarios()).willReturn(prepareScenarioList());\r\n\r\nlistener.execute(handler, terminator);\r\n\r\nverify(handler, times(maxIterations)).onScenarioReceived(any(Scenario.class));\r\nverify(provider).readScenarios();\r\n```","title":"NoInteractionsWanted exception","body":"<pre><code>\n@Test\npublic void testExecute_numberOfTimes() {\n    int maxIterations = 5;\n    TerminatorListener terminator = new TestTerminator(maxIterations);\n\n    given(provider.readScenarios()).willReturn(prepareScenarioList());\n\n    listener.execute(handler, terminator);\n\n    verify(handler, times(maxIterations)).onScenarioReceived(any(Scenario.class));\n}\n\n@AfterEach\nvoid tearDown() {\n    verifyNoMoreInteractions(provider);\n    verifyNoMoreInteractions(handler);\n}\n</code></pre>\n<p>You are never calling <code>verify</code> on your provider. Therefore, there are still unverified interactions and <code>verifyNoMoreInteractions</code> will trip.</p>\n<p>You must verify <em>all</em> interactions of your provider:</p>\n<pre><code>given(provider.readScenarios()).willReturn(prepareScenarioList());\n\nlistener.execute(handler, terminator);\n\nverify(handler, times(maxIterations)).onScenarioReceived(any(Scenario.class));\nverify(provider).readScenarios();\n</code></pre>\n"}],"owner":{"account_id":22342718,"reputation":77,"user_id":16562270,"display_name":"Yurii"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77114443,"answer_count":1,"score":0,"last_activity_date":1694799972,"creation_date":1694795290,"question_id":77114005,"body_markdown":"I&#39;m writing test for my Service written in pure Java that will later migrate to Spring boot. This class just reads several scenarios from json and does infinite loop handling each scenario every time with interface *ScenarioHandler*:\r\n\r\n```java\r\n@Override\r\npublic void execute(ScenarioHandler handler) {\r\n    execute(handler, () -&gt; false);\r\n}\r\n\r\npublic void execute(ScenarioHandler handler, TerminatorListener terminator) {\r\n    List&lt;Scenario&gt; scenarioList = provider.readScenarios();\r\n    validateScenarios(scenarioList);\r\n    listen(scenarioList, handler, terminator);\r\n}\r\n\r\nprivate void listen(List&lt;Scenario&gt; scenarioList, ScenarioHandler handler, TerminatorListener terminator) {\r\n    int currentIndex = 0;\r\n    while (!terminator.shouldTerminate()) {\r\n        Scenario scenario = scenarioList.get(currentIndex);\r\n        handler.onScenarioReceived(scenario);\r\n        currentIndex = (currentIndex + 1) % scenarioList.size();\r\n        sleep();\r\n    }\r\n}\r\n```\r\n\r\nHere I&#39;ve done method overloading to be able perform the testing.\r\nI get a org.Mockito.exception.verifications.NoInteractionWanted exception, with this stack trace:\r\n\r\n```none\r\nNo interactions wanted here:\r\n-&gt; at executor.service.service.ScenarioSourceListenerTest.tearDown(ScenarioSourceListenerTest.java:65)\r\nBut found this interaction on mock &#39;scenarioProvider&#39;:\r\n-&gt; at executor.service.service.impl.ScenarioSourceListenerImpl.execute(ScenarioSourceListenerImpl.java:30)\r\nActually, above is the only interaction with this mock.\r\n```\r\n\r\nMy test is provided here:\r\n\r\n```java\r\nprivate ScenarioProvider provider;\r\n\r\nprivate ScenarioHandler handler;\r\n\r\n@BeforeEach\r\npublic void setUp() {\r\n    provider = mock(ScenarioProvider.class);\r\n    handler = mock(ScenarioHandler.class);\r\n    listener = new ScenarioSourceListenerImpl(provider);\r\n}\r\n\r\n@Test\r\npublic void testExecute_numberOfTimes() {\r\n    int maxIterations = 5;\r\n    TerminatorListener terminator = new TestTerminator(maxIterations);\r\n\r\n    given(provider.readScenarios()).willReturn(prepareScenarioList());\r\n\r\n    listener.execute(handler, terminator);\r\n\r\n    verify(handler, times(maxIterations)).onScenarioReceived(any(Scenario.class));\r\n}\r\n\r\n@AfterEach\r\nvoid tearDown() {\r\n    verifyNoMoreInteractions(provider);\r\n    verifyNoMoreInteractions(handler);\r\n}\r\n\r\nprivate class TestTerminator implements TerminatorListener {\r\n    private int maxIterations;\r\n    private int currentIteration = 0;\r\n\r\n    public TestTerminator(int maxIterations) {\r\n        this.maxIterations = maxIterations;\r\n    }\r\n\r\n    @Override\r\n    public boolean shouldTerminate() {\r\n        currentIteration++;\r\n        return currentIteration &gt; maxIterations;\r\n    }\r\n}\r\n```\r\n\r\nWhere possibly can be another interaction with my provider?","title":"NoInteractionsWanted exception","body":"<p>I'm writing test for my Service written in pure Java that will later migrate to Spring boot. This class just reads several scenarios from json and does infinite loop handling each scenario every time with interface <em>ScenarioHandler</em>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\npublic void execute(ScenarioHandler handler) {\n    execute(handler, () -&gt; false);\n}\n\npublic void execute(ScenarioHandler handler, TerminatorListener terminator) {\n    List&lt;Scenario&gt; scenarioList = provider.readScenarios();\n    validateScenarios(scenarioList);\n    listen(scenarioList, handler, terminator);\n}\n\nprivate void listen(List&lt;Scenario&gt; scenarioList, ScenarioHandler handler, TerminatorListener terminator) {\n    int currentIndex = 0;\n    while (!terminator.shouldTerminate()) {\n        Scenario scenario = scenarioList.get(currentIndex);\n        handler.onScenarioReceived(scenario);\n        currentIndex = (currentIndex + 1) % scenarioList.size();\n        sleep();\n    }\n}\n</code></pre>\n<p>Here I've done method overloading to be able perform the testing.\nI get a org.Mockito.exception.verifications.NoInteractionWanted exception, with this stack trace:</p>\n<pre class=\"lang-none prettyprint-override\"><code>No interactions wanted here:\n-&gt; at executor.service.service.ScenarioSourceListenerTest.tearDown(ScenarioSourceListenerTest.java:65)\nBut found this interaction on mock 'scenarioProvider':\n-&gt; at executor.service.service.impl.ScenarioSourceListenerImpl.execute(ScenarioSourceListenerImpl.java:30)\nActually, above is the only interaction with this mock.\n</code></pre>\n<p>My test is provided here:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private ScenarioProvider provider;\n\nprivate ScenarioHandler handler;\n\n@BeforeEach\npublic void setUp() {\n    provider = mock(ScenarioProvider.class);\n    handler = mock(ScenarioHandler.class);\n    listener = new ScenarioSourceListenerImpl(provider);\n}\n\n@Test\npublic void testExecute_numberOfTimes() {\n    int maxIterations = 5;\n    TerminatorListener terminator = new TestTerminator(maxIterations);\n\n    given(provider.readScenarios()).willReturn(prepareScenarioList());\n\n    listener.execute(handler, terminator);\n\n    verify(handler, times(maxIterations)).onScenarioReceived(any(Scenario.class));\n}\n\n@AfterEach\nvoid tearDown() {\n    verifyNoMoreInteractions(provider);\n    verifyNoMoreInteractions(handler);\n}\n\nprivate class TestTerminator implements TerminatorListener {\n    private int maxIterations;\n    private int currentIteration = 0;\n\n    public TestTerminator(int maxIterations) {\n        this.maxIterations = maxIterations;\n    }\n\n    @Override\n    public boolean shouldTerminate() {\n        currentIteration++;\n        return currentIteration &gt; maxIterations;\n    }\n}\n</code></pre>\n<p>Where possibly can be another interaction with my provider?</p>\n"},{"tags":["java","android","kotlin","zip","zipoutputstream"],"comments":[{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1694802440,"post_id":77114430,"comment_id":135943998,"body_markdown":"`Trying to extract them on macOS fails.` So on an Android device all is ok?","body":"<code>Trying to extract them on macOS fails.</code> So on an Android device all is ok?"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1694802532,"post_id":77114430,"comment_id":135944011,"body_markdown":"I see no .docx files in that paragraph folder.","body":"I see no .docx files in that paragraph folder."},{"owner":{"account_id":202054,"reputation":23899,"user_id":448875,"display_name":"broot"},"score":0,"creation_date":1694810518,"post_id":77114430,"comment_id":135945173,"body_markdown":"Sounds like this is not at all a problem with zip (IntelliJ properly opens it and it works for other formats than docx), but with the contents of the zip maybe?","body":"Sounds like this is not at all a problem with zip (IntelliJ properly opens it and it works for other formats than docx), but with the contents of the zip maybe?"},{"owner":{"account_id":6880272,"reputation":71,"user_id":5287272,"display_name":"Genealogy"},"score":0,"creation_date":1694811020,"post_id":77114430,"comment_id":135945248,"body_markdown":"@blackapps - No, it&#39;s an invalid file too. The paragraph folder is the raw folder which needs to be compressed to e.g. test.docx or test.zip (makes no difference) using the &quot;zip&quot; function above. This results in a corrupted file. It could have to do with the fact the paragraph folder owns files without file name and having just a dot ending (see _rels/.rels).","body":"@blackapps - No, it&#39;s an invalid file too. The paragraph folder is the raw folder which needs to be compressed to e.g. test.docx or test.zip (makes no difference) using the &quot;zip&quot; function above. This results in a corrupted file. It could have to do with the fact the paragraph folder owns files without file name and having just a dot ending (see _rels/.rels)."},{"owner":{"account_id":6880272,"reputation":71,"user_id":5287272,"display_name":"Genealogy"},"score":0,"creation_date":1694811224,"post_id":77114430,"comment_id":135945284,"body_markdown":"@broot - No, the raw docx folder structure is definitely valid. I&#39;ve done this for a desktop app in another programming language and with the same paragraph folder and it works as expected.","body":"@broot - No, the raw docx folder structure is definitely valid. I&#39;ve done this for a desktop app in another programming language and with the same paragraph folder and it works as expected."}],"owner":{"account_id":6880272,"reputation":71,"user_id":5287272,"display_name":"Genealogy"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694799805,"creation_date":1694799805,"question_id":77114430,"body_markdown":"I use `ZipOutputStream` to compress the content of a folder into a Zip file. Below is my working code. But it creates corrupt DOCX files. Trying to extract them on macOS fails.\r\n\r\n```kotlin\r\nprivate const val DEFAULT_BUFFER_SIZE = 1024 * 4\r\n\r\nfun zip(source: String?, destination: String?, contentsOnly: Boolean, compression: Int) {\r\n\ttry {\r\n\t\tval zipOut = ZipOutputStream(FileOutputStream(destination))\r\n\t\tval srcFile = File(source)\r\n\r\n\t\t// Compression Level\r\n\t\tval compressionLevel: Int = when(compression) {\r\n\t\t\t 0 -&gt; Deflater.DEFAULT_COMPRESSION\r\n\t\t\t 1 -&gt; Deflater.NO_COMPRESSION\r\n\t\t\t 2 -&gt; Deflater.BEST_SPEED\r\n\t\t\t 3 -&gt; Deflater.BEST_COMPRESSION\r\n\t\t\telse -&gt; {\r\n\t\t\t\tDeflater.DEFAULT_COMPRESSION\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tzipOut.setLevel(compressionLevel)\r\n\t\tzipOut.setMethod(ZipOutputStream.DEFLATED)\r\n\r\n\t\tif (contentsOnly &amp;&amp; srcFile.isDirectory) {\r\n\t\t\tfor (fileName in srcFile.list()) {\r\n\t\t\t\taddToZip(&quot;&quot;, source + File.separator + fileName, zipOut)\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (source != null) {\r\n\t\t\t\taddToZip(&quot;&quot;, source, zipOut)\r\n\t\t\t}\r\n\t\t}\r\n\t\tzipOut.flush()\r\n\t\tzipOut.finish()\r\n\t\tzipOut.close()\r\n\t\tprintln(&quot;Successfully created $destination&quot;)\r\n\t} catch (error: Exception) {\r\n\t\tprintln(&quot;Failed&quot;)\r\n\t}\r\n}\r\n\r\nprivate fun addToZip(path: String, srcFile: String, zipOut: ZipOutputStream) {\r\n\tval file = File(srcFile)\r\n\tval filePath = if (&quot;&quot; == path) file.name else path + File.separator + file.name\r\n\tif (file.isDirectory) {\r\n\t\tfor (fileName in file.list()) {\r\n\t\t\taddToZip(filePath, srcFile + File.separator + fileName, zipOut)\r\n\t\t}\r\n\t} else {\r\n\t\tzipOut.putNextEntry(ZipEntry(filePath))\r\n\t\tval `in` = FileInputStream(srcFile)\r\n\t\tval buffer = ByteArray(DEFAULT_BUFFER_SIZE)\r\n\t\tvar len: Int\r\n\t\twhile (`in`.read(buffer).also { len = it } != -1) {\r\n\t\t\tzipOut.write(buffer, 0, len)\r\n\t\t}\r\n\t}\r\n}\r\n```\r\nI use the code e.g. to compress the folder **&quot;paragraph&quot;**, which you can find here: https://github.com/stiv-yakovenko/toptal-docx/tree/master/paragraph. The Zip file is generated, I can view the Structure inside Android Studio, but if I try to extract it, I get the message the file is corrupt. Compress other folders, which are not based on OfficeOpenXml (*.docx*, *.xsxl* etc.) works fine.","title":"Corrupt Zip file using ZipOutputStream to create DOCX file","body":"<p>I use <code>ZipOutputStream</code> to compress the content of a folder into a Zip file. Below is my working code. But it creates corrupt DOCX files. Trying to extract them on macOS fails.</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>private const val DEFAULT_BUFFER_SIZE = 1024 * 4\n\nfun zip(source: String?, destination: String?, contentsOnly: Boolean, compression: Int) {\n    try {\n        val zipOut = ZipOutputStream(FileOutputStream(destination))\n        val srcFile = File(source)\n\n        // Compression Level\n        val compressionLevel: Int = when(compression) {\n             0 -&gt; Deflater.DEFAULT_COMPRESSION\n             1 -&gt; Deflater.NO_COMPRESSION\n             2 -&gt; Deflater.BEST_SPEED\n             3 -&gt; Deflater.BEST_COMPRESSION\n            else -&gt; {\n                Deflater.DEFAULT_COMPRESSION\n            }\n        }\n\n        zipOut.setLevel(compressionLevel)\n        zipOut.setMethod(ZipOutputStream.DEFLATED)\n\n        if (contentsOnly &amp;&amp; srcFile.isDirectory) {\n            for (fileName in srcFile.list()) {\n                addToZip(&quot;&quot;, source + File.separator + fileName, zipOut)\n            }\n        } else {\n            if (source != null) {\n                addToZip(&quot;&quot;, source, zipOut)\n            }\n        }\n        zipOut.flush()\n        zipOut.finish()\n        zipOut.close()\n        println(&quot;Successfully created $destination&quot;)\n    } catch (error: Exception) {\n        println(&quot;Failed&quot;)\n    }\n}\n\nprivate fun addToZip(path: String, srcFile: String, zipOut: ZipOutputStream) {\n    val file = File(srcFile)\n    val filePath = if (&quot;&quot; == path) file.name else path + File.separator + file.name\n    if (file.isDirectory) {\n        for (fileName in file.list()) {\n            addToZip(filePath, srcFile + File.separator + fileName, zipOut)\n        }\n    } else {\n        zipOut.putNextEntry(ZipEntry(filePath))\n        val `in` = FileInputStream(srcFile)\n        val buffer = ByteArray(DEFAULT_BUFFER_SIZE)\n        var len: Int\n        while (`in`.read(buffer).also { len = it } != -1) {\n            zipOut.write(buffer, 0, len)\n        }\n    }\n}\n</code></pre>\n<p>I use the code e.g. to compress the folder <strong>&quot;paragraph&quot;</strong>, which you can find here: <a href=\"https://github.com/stiv-yakovenko/toptal-docx/tree/master/paragraph\" rel=\"nofollow noreferrer\">https://github.com/stiv-yakovenko/toptal-docx/tree/master/paragraph</a>. The Zip file is generated, I can view the Structure inside Android Studio, but if I try to extract it, I get the message the file is corrupt. Compress other folders, which are not based on OfficeOpenXml (<em>.docx</em>, <em>.xsxl</em> etc.) works fine.</p>\n"},{"tags":["java","object","reference","save","load"],"comments":[{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":3,"creation_date":1694788702,"post_id":77113188,"comment_id":135941493,"body_markdown":"If by &quot;*save file and load it up*&quot;, you mean that you save the file to the disk via serialization and then convert it back to a Java object using deserialization, then depending on how you de/serialized it, you may no longer have the same object reference. If you don&#39;t have the same object reference, then your rule no longer applies.","body":"If by &quot;<i>save file and load it up</i>&quot;, you mean that you save the file to the disk via serialization and then convert it back to a Java object using deserialization, then depending on how you de/serialized it, you may no longer have the same object reference. If you don&#39;t have the same object reference, then your rule no longer applies."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":1,"creation_date":1694788992,"post_id":77113188,"comment_id":135941553,"body_markdown":"In order for us to help you, you are going to have to give details about how you are saving and loading up these objects. Otherwise, we don&#39;t have enough info to work with.","body":"In order for us to help you, you are going to have to give details about how you are saving and loading up these objects. Otherwise, we don&#39;t have enough info to work with."},{"owner":{"account_id":28598126,"reputation":11,"user_id":21895711,"display_name":"Ellie"},"score":0,"creation_date":1694789691,"post_id":77113188,"comment_id":135941705,"body_markdown":"I have added code and noticed that only changes are made to productList not to templist, I think the main issue is the writeObject of orderList but I really dont know how to fix this","body":"I have added code and noticed that only changes are made to productList not to templist, I think the main issue is the writeObject of orderList but I really dont know how to fix this"},{"owner":{"account_id":265649,"reputation":53086,"user_id":552759,"display_name":"jtahlborn"},"score":0,"creation_date":1694790899,"post_id":77113188,"comment_id":135941960,"body_markdown":"correct, when you load productList, you need to update templist to contain the same objects from productList (since they are now new objects).  however, since you haven&#39;t shown templist or anything related to it, it&#39;s hard to give more specific guidance than that.","body":"correct, when you load productList, you need to update templist to contain the same objects from productList (since they are now new objects).  however, since you haven&#39;t shown templist or anything related to it, it&#39;s hard to give more specific guidance than that."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1694797572,"post_id":77113188,"comment_id":135943183,"body_markdown":"Now that you have added code, I can answer your question. One moment.","body":"Now that you have added code, I can answer your question. One moment."}],"answers":[{"tags":[],"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694799558,"creation_date":1694797759,"answer_id":77114237,"question_id":77113188,"body_markdown":"The reason why your code is only updating one list and not both of them is because you are attempting to serialize them ***separately***.\r\n\r\nYou have taken an ecosystem where one list depends on the other, but you are serializing both lists ***separately***. That&#39;s like cutting a cake in half, storing each half separately, and then trying to put both halves back together later on. That won&#39;t fly.\r\n\r\nIf you want this to work, you must place ***BOTH*** lists into a single object, and then serialize that object. That is what will allow the relationship to be maintained.\r\n\r\nAlternatively, you can try and manually create the relationship yourself, but that would be painful.\r\n\r\nAs a side note though, I notice that you are using basic Java serialization. Please note that basic Java serialization is a persnickety beast that can cause millions of security holes. Be mindful of that when using it. There are better tools available, rather than just using naked Java serialization.\r\n\r\n**EDIT** - To further demonstrate the point, here is an example.\r\n\r\n```java\r\nrecord Child(String name) implements Serializable {}\r\nrecord Parent(Child one, Child two) implements Serializable {}\r\n\r\nChild child = new Child(&quot;Charles&quot;);\r\nParent parent = new Parent(child, child);\r\n\r\ntry (FileOutputStream fileOutputStream = new FileOutputStream(&quot;out&quot;)) \r\n{\r\n\r\n    var objectOutputStream = new ObjectOutputStream(fileOutputStream); \r\n        \r\n    objectOutputStream.writeObject(parent);\r\n\r\n    objectOutputStream.close();\r\n\r\n}\r\n\r\ncatch (IOException e) \r\n{\r\n\r\n    throw new RuntimeException(e);\r\n\r\n}\r\n\r\ntry (\r\n        var fileInputStream = new FileInputStream(&quot;out&quot;);\r\n        var objectInputStream = new ObjectInputStream(fileInputStream)\r\n)\r\n{\r\n        \r\n    Parent idk = (Parent) objectInputStream.readObject();\r\n    System.out.println(idk);\r\n    System.out.println(idk.one() == idk.two());\r\n        \r\n    objectInputStream.close();\r\n    fileInputStream.close();\r\n\r\n}\r\n\r\ncatch (Exception e)\r\n{\r\n\r\n        throw new RuntimeException(e);\r\n\r\n}\r\n```","title":"Java reference semantic and saving/loading object files","body":"<p>The reason why your code is only updating one list and not both of them is because you are attempting to serialize them <em><strong>separately</strong></em>.</p>\n<p>You have taken an ecosystem where one list depends on the other, but you are serializing both lists <em><strong>separately</strong></em>. That's like cutting a cake in half, storing each half separately, and then trying to put both halves back together later on. That won't fly.</p>\n<p>If you want this to work, you must place <em><strong>BOTH</strong></em> lists into a single object, and then serialize that object. That is what will allow the relationship to be maintained.</p>\n<p>Alternatively, you can try and manually create the relationship yourself, but that would be painful.</p>\n<p>As a side note though, I notice that you are using basic Java serialization. Please note that basic Java serialization is a persnickety beast that can cause millions of security holes. Be mindful of that when using it. There are better tools available, rather than just using naked Java serialization.</p>\n<p><strong>EDIT</strong> - To further demonstrate the point, here is an example.</p>\n<pre class=\"lang-java prettyprint-override\"><code>record Child(String name) implements Serializable {}\nrecord Parent(Child one, Child two) implements Serializable {}\n\nChild child = new Child(&quot;Charles&quot;);\nParent parent = new Parent(child, child);\n\ntry (FileOutputStream fileOutputStream = new FileOutputStream(&quot;out&quot;)) \n{\n\n    var objectOutputStream = new ObjectOutputStream(fileOutputStream); \n        \n    objectOutputStream.writeObject(parent);\n\n    objectOutputStream.close();\n\n}\n\ncatch (IOException e) \n{\n\n    throw new RuntimeException(e);\n\n}\n\ntry (\n        var fileInputStream = new FileInputStream(&quot;out&quot;);\n        var objectInputStream = new ObjectInputStream(fileInputStream)\n)\n{\n        \n    Parent idk = (Parent) objectInputStream.readObject();\n    System.out.println(idk);\n    System.out.println(idk.one() == idk.two());\n        \n    objectInputStream.close();\n    fileInputStream.close();\n\n}\n\ncatch (Exception e)\n{\n\n        throw new RuntimeException(e);\n\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1694797936,"post_id":77114242,"comment_id":135943247,"body_markdown":"I don&#39;t think you understood the spirit of their question. Java serialization can absolutely maintain relationships between objects, but in order to do that, it needs to be given both of the objects that reference one or the other. So, saying ***No, the readObject method will return new objects.*** is misleading in the context of what OP is asking","body":"I don&#39;t think you understood the spirit of their question. Java serialization can absolutely maintain relationships between objects, but in order to do that, it needs to be given both of the objects that reference one or the other. So, saying <b><i>No, the readObject method will return new objects.</i></b> is misleading in the context of what OP is asking"},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1694798009,"post_id":77114242,"comment_id":135943259,"body_markdown":"@davidalayachew, _&quot;... Reading an object is analogous to running the constructors of a new object. ...&quot;_","body":"@davidalayachew, <i>&quot;... Reading an object is analogous to running the constructors of a new object. ...&quot;</i>"},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1694798173,"post_id":77114242,"comment_id":135943287,"body_markdown":"That does not change the fact that that same object can then be used in the construction of another object. Serialization maintains relationships. It is actually that fact that makes it so powerful and so dangerous. People could completely cripple systems by inserting relationships that never should have been there, either maliciously, or incompetently. Java was infamous for this for years, and until Jackson came around, people both loved and despised Java serialization. It was one of Java&#39;s biggest features, but also its biggest pain point.","body":"That does not change the fact that that same object can then be used in the construction of another object. Serialization maintains relationships. It is actually that fact that makes it so powerful and so dangerous. People could completely cripple systems by inserting relationships that never should have been there, either maliciously, or incompetently. Java was infamous for this for years, and until Jackson came around, people both loved and despised Java serialization. It was one of Java&#39;s biggest features, but also its biggest pain point."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1694798305,"post_id":77114242,"comment_id":135943313,"body_markdown":"Try it yourself. Make a single object, put the same instance into 2 fields of a 3rd, serialize the 3rd, then deserialize it. Then, perform an `==` comparison on those 2 fields. Not `.equals`, `==`. Does it return `true` or `false`?","body":"Try it yourself. Make a single object, put the same instance into 2 fields of a 3rd, serialize the 3rd, then deserialize it. Then, perform an <code>==</code> comparison on those 2 fields. Not <code>.equals</code>, <code>==</code>. Does it return <code>true</code> or <code>false</code>?"},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1694798344,"post_id":77114242,"comment_id":135943322,"body_markdown":"Edited my comment","body":"Edited my comment"},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1694799228,"post_id":77114242,"comment_id":135943463,"body_markdown":"I have even attached a runnable example that you can try for yourself in my answer below.","body":"I have even attached a runnable example that you can try for yourself in my answer below."}],"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":6,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1694797816,"creation_date":1694797816,"answer_id":77114242,"question_id":77113188,"body_markdown":"&gt; _&quot;... Is there any way that when I save the file and load it up, the connection between object and the reference in templist still connected. ...&quot;_\r\n\r\nNo, the _[readObject](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/io/ObjectInputStream.html#readObject())_ method will return new objects.\r\n\r\n_[ObjectInputStream (Java SE 20 &amp;amp; JDK 20)](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/io/ObjectInputStream.html)_,\r\n\r\n&gt; _&quot;... Reading an object is analogous to running the constructors of a new object. Memory is allocated for the object and initialized to zero (NULL). ...&quot;_\r\n\r\nHere are a few recommendations for your code.\r\n\r\n- Use a _try-with-resources_ statement for the _ObjectOutputStream_ objects as well.\r\n- You can cast to _ArrayList_, the _type_ would be unnecessary here.\r\n","title":"Java reference semantic and saving/loading object files","body":"<blockquote>\n<p><em>&quot;... Is there any way that when I save the file and load it up, the connection between object and the reference in templist still connected. ...&quot;</em></p>\n</blockquote>\n<p>No, the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/io/ObjectInputStream.html#readObject()\" rel=\"nofollow noreferrer\">readObject</a></em> method will return new objects.</p>\n<p><em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/io/ObjectInputStream.html\" rel=\"nofollow noreferrer\">ObjectInputStream (Java SE 20 &amp; JDK 20)</a></em>,</p>\n<blockquote>\n<p><em>&quot;... Reading an object is analogous to running the constructors of a new object. Memory is allocated for the object and initialized to zero (NULL). ...&quot;</em></p>\n</blockquote>\n<p>Here are a few recommendations for your code.</p>\n<ul>\n<li>Use a <em>try-with-resources</em> statement for the <em>ObjectOutputStream</em> objects as well.</li>\n<li>You can cast to <em>ArrayList</em>, the <em>type</em> would be unnecessary here.</li>\n</ul>\n"}],"owner":{"account_id":28598126,"reputation":11,"user_id":21895711,"display_name":"Ellie"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1694799558,"creation_date":1694787960,"question_id":77113188,"body_markdown":"I learn that in Java, when you add object to list, you only add references so if you modify object, all lists that have the reference will change\r\n\r\nSay that I have an **ArrayList\\&lt;Product\\&gt; productList** holds 5 objects of type **Product**. **ArrayList\\&lt;Order\\&gt; orderList** holds an **ArrayList\\&lt;Product\\&gt; templist** which holds, say, 4 objects productList is holding. \r\n\r\nThe problem is that when I save file and load it up, I try to modify the object but no changes made templist inside orderList. Is there any way that when I save the file and load it up, the connection between object and the reference in templist still connected.\r\n\r\nI have tried write object one by one and write the entire list but nothing work\r\n\r\n    String productFile = &quot;product.dat&quot;;\r\n    public void loadProductFile() {\r\n        try (FileInputStream fileInputStream = new FileInputStream(productFile);\r\n             ObjectInputStream objectInputStream = new ObjectInputStream(fileInputStream)) {\r\n            \r\n            productList = (ArrayList&lt;Product&gt;) objectInputStream.readObject();\r\n            System.out.println(&quot;Product.dat file is loaded&quot;);\r\n            \r\n            objectInputStream.close();\r\n            fileInputStream.close();\r\n        } catch (IOException | ClassNotFoundException e) {\r\n            System.out.println(&quot;An error occurs during input or output operations.&quot;);\r\n        }\r\n    }\r\n    public void writeProductFile() {\r\n        try (FileOutputStream fileOutputStream = new FileOutputStream(productFile)) {\r\n            ObjectOutputStream objectOutputStream = new ObjectOutputStream(fileOutputStream); \r\n            \r\n            objectOutputStream.writeObject(productList);\r\n            System.out.println(&quot;Write to &quot; + productFile + &quot; file successfuly&quot;);\r\n\r\n            objectOutputStream.close();\r\n        } catch (IOException e) {\r\n            System.out.println(&quot;An error occurs during input or output operations.&quot;);\r\n        }\r\n    }\r\n    \r\n    \r\n    String warehouseFile = &quot;warehouse.dat&quot;;\r\n    public void loadWarehouseFile() {\r\n    try (FileInputStream fileInputStream = new FileInputStream(warehouseFile);\r\n         ObjectInputStream objectInputStream = new ObjectInputStream(fileInputStream)) {\r\n\r\n            orderList = (ArrayList&lt;Order&gt;) objectInputStream.readObject();\r\n\r\n            System.out.println(&quot;Warehouse.dat file is loaded&quot;);\r\n\r\n        } catch (IOException | ClassNotFoundException e) {\r\n            System.out.println(&quot;File not found&quot;);\r\n        }\r\n    }\r\n\r\n    public void writeWarehouseFile() {\r\n        try (FileOutputStream fileOutputStream = new FileOutputStream(warehouseFile)) {\r\n            ObjectOutputStream objectOutputStream = new ObjectOutputStream(fileOutputStream);\r\n            \r\n            objectOutputStream.writeObject(orderList);\r\n            System.out.println(&quot;Write to &quot; + warehouseFile + &quot; file successfully&quot;);\r\n\r\n            objectOutputStream.close();\r\n        } catch (IOException e) {\r\n            System.out.println(&quot;An error occurs during input or output operations.&quot;);\r\n        }\r\n    }","title":"Java reference semantic and saving/loading object files","body":"<p>I learn that in Java, when you add object to list, you only add references so if you modify object, all lists that have the reference will change</p>\n<p>Say that I have an <strong>ArrayList&lt;Product&gt; productList</strong> holds 5 objects of type <strong>Product</strong>. <strong>ArrayList&lt;Order&gt; orderList</strong> holds an <strong>ArrayList&lt;Product&gt; templist</strong> which holds, say, 4 objects productList is holding.</p>\n<p>The problem is that when I save file and load it up, I try to modify the object but no changes made templist inside orderList. Is there any way that when I save the file and load it up, the connection between object and the reference in templist still connected.</p>\n<p>I have tried write object one by one and write the entire list but nothing work</p>\n<pre><code>String productFile = &quot;product.dat&quot;;\npublic void loadProductFile() {\n    try (FileInputStream fileInputStream = new FileInputStream(productFile);\n         ObjectInputStream objectInputStream = new ObjectInputStream(fileInputStream)) {\n        \n        productList = (ArrayList&lt;Product&gt;) objectInputStream.readObject();\n        System.out.println(&quot;Product.dat file is loaded&quot;);\n        \n        objectInputStream.close();\n        fileInputStream.close();\n    } catch (IOException | ClassNotFoundException e) {\n        System.out.println(&quot;An error occurs during input or output operations.&quot;);\n    }\n}\npublic void writeProductFile() {\n    try (FileOutputStream fileOutputStream = new FileOutputStream(productFile)) {\n        ObjectOutputStream objectOutputStream = new ObjectOutputStream(fileOutputStream); \n        \n        objectOutputStream.writeObject(productList);\n        System.out.println(&quot;Write to &quot; + productFile + &quot; file successfuly&quot;);\n\n        objectOutputStream.close();\n    } catch (IOException e) {\n        System.out.println(&quot;An error occurs during input or output operations.&quot;);\n    }\n}\n\n\nString warehouseFile = &quot;warehouse.dat&quot;;\npublic void loadWarehouseFile() {\ntry (FileInputStream fileInputStream = new FileInputStream(warehouseFile);\n     ObjectInputStream objectInputStream = new ObjectInputStream(fileInputStream)) {\n\n        orderList = (ArrayList&lt;Order&gt;) objectInputStream.readObject();\n\n        System.out.println(&quot;Warehouse.dat file is loaded&quot;);\n\n    } catch (IOException | ClassNotFoundException e) {\n        System.out.println(&quot;File not found&quot;);\n    }\n}\n\npublic void writeWarehouseFile() {\n    try (FileOutputStream fileOutputStream = new FileOutputStream(warehouseFile)) {\n        ObjectOutputStream objectOutputStream = new ObjectOutputStream(fileOutputStream);\n        \n        objectOutputStream.writeObject(orderList);\n        System.out.println(&quot;Write to &quot; + warehouseFile + &quot; file successfully&quot;);\n\n        objectOutputStream.close();\n    } catch (IOException e) {\n        System.out.println(&quot;An error occurs during input or output operations.&quot;);\n    }\n}\n</code></pre>\n"},{"tags":["java","android","android-room"],"answers":[{"comments":[{"owner":{"account_id":2818537,"reputation":1285,"user_id":2422905,"accept_rate":60,"display_name":"adsamcik"},"score":0,"creation_date":1694784955,"post_id":77112739,"comment_id":135940685,"body_markdown":"The problem is I am not directly using it, this is something that was generated by the Room library https://developer.android.com/training/data-storage/room/.\n\nI tried to use even the latest beta version which did not help at all. \n\nI was forced into the upgrade to Java 17 by the Android Gradle which at the latest version requires it. I even tried to push the min version to API version 34 which is the Android version that natively supports JDK 17, still no luck.","body":"The problem is I am not directly using it, this is something that was generated by the Room library <a href=\"https://developer.android.com/training/data-storage/room/\" rel=\"nofollow noreferrer\">developer.android.com/training/data-storage/room</a>.  I tried to use even the latest beta version which did not help at all.   I was forced into the upgrade to Java 17 by the Android Gradle which at the latest version requires it. I even tried to push the min version to API version 34 which is the Android version that natively supports JDK 17, still no luck."},{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1694786808,"post_id":77112739,"comment_id":135941114,"body_markdown":"Perhaps you need to use Android desugaring.","body":"Perhaps you need to use Android desugaring."},{"owner":{"account_id":2818537,"reputation":1285,"user_id":2422905,"accept_rate":60,"display_name":"adsamcik"},"score":0,"creation_date":1694791564,"post_id":77112739,"comment_id":135942103,"body_markdown":"I am already using             &quot;com.android.tools:desugar_jdk_libs:${Versions.desugar}&quot; version 2.0.3","body":"I am already using             &quot;com.android.tools:desugar_jdk_libs:${Versions.desugar}&quot; version 2.0.3"}],"tags":[],"owner":{"account_id":14327066,"reputation":141,"user_id":10348872,"display_name":"Shovel_Knight"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694784214,"creation_date":1694784214,"answer_id":77112739,"question_id":77112648,"body_markdown":"I believe Android simply does not implement the `StringConcatFactory` interface. In general Android&#39;s support for Java language features seems to be frozen somewhere around Java 8. I definitely would not recommend using any language features or new additions to the class library from Java 9+ in Android applications. ","title":"Android Fatal Error: Unable to find method makeConcatWithConstants","body":"<p>I believe Android simply does not implement the <code>StringConcatFactory</code> interface. In general Android's support for Java language features seems to be frozen somewhere around Java 8. I definitely would not recommend using any language features or new additions to the class library from Java 9+ in Android applications.</p>\n"},{"tags":[],"owner":{"account_id":2818537,"reputation":1285,"user_id":2422905,"accept_rate":60,"display_name":"adsamcik"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1694799406,"creation_date":1694799406,"answer_id":77114395,"question_id":77112648,"body_markdown":"Since this issue has only affected Java code generated by Room I managed to &quot;solve it&quot; by using the new &quot;Kotlin CodeGen&quot; feature of Room which has been introduced in version 2.6 (currently in beta).\r\n\r\n&gt; Kotlin code generation(or “Kotlin CodeGen”) can now be enabled in Room\r\n&gt; (4297ec0). To turn on Kotlin CodeGen in Room, add the\r\n&gt; room.generateKotlin option name to your processor options for KSP. For\r\n&gt; more details on how to pass processor options for KSP, see the KSP\r\n&gt; documentation.\r\n\r\n\r\nI have not managed to find out what was the root cause.","title":"Android Fatal Error: Unable to find method makeConcatWithConstants","body":"<p>Since this issue has only affected Java code generated by Room I managed to &quot;solve it&quot; by using the new &quot;Kotlin CodeGen&quot; feature of Room which has been introduced in version 2.6 (currently in beta).</p>\n<blockquote>\n<p>Kotlin code generation(or “Kotlin CodeGen”) can now be enabled in Room\n(4297ec0). To turn on Kotlin CodeGen in Room, add the\nroom.generateKotlin option name to your processor options for KSP. For\nmore details on how to pass processor options for KSP, see the KSP\ndocumentation.</p>\n</blockquote>\n<p>I have not managed to find out what was the root cause.</p>\n"}],"owner":{"account_id":2818537,"reputation":1285,"user_id":2422905,"accept_rate":60,"display_name":"adsamcik"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":106,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77114395,"answer_count":2,"score":0,"last_activity_date":1694799406,"creation_date":1694783307,"question_id":77112648,"body_markdown":"I have been trying to solve this error and so far I was unable to find the cause. Most threads say that I need to upgrade to JDK 11+. I upgraded the whole project to 17 and it still throws this error. This code is generated by Room code generation, so there is not really anything I can do to easily change it a be done with it.\r\n\r\nI am using Android Gradle 8.1.1 which complaints anyway if there is anything below Java 17.\r\n\r\n    AppDatabase_Impl.java:166: error: cannot find symbol\r\n    \r\n                      + &quot; Found:\\n&quot; + _existingLocationData);\r\n                                      ^\r\n      symbol:   method makeConcatWithConstants(Lookup,String,MethodType,String)\r\n      location: interface StringConcatFactory\r\n\r\nI would really appreciate if anyone would lend a hand with this.\r\n    1 error\r\n    Fatal Error: Unable to find method makeConcatWithConstants\r\n\r\nedit: Added extra context where the issue is reported\r\n\r\n    return new RoomOpenHelper.ValidationResult(false, &quot;location_data(package.data.DatabaseLocation).\\n&quot;\r\n                  + &quot; Expected:\\n&quot; + _infoLocationData + &quot;\\n&quot;\r\n                  + &quot; Found:\\n&quot; + _existingLocationData);","title":"Android Fatal Error: Unable to find method makeConcatWithConstants","body":"<p>I have been trying to solve this error and so far I was unable to find the cause. Most threads say that I need to upgrade to JDK 11+. I upgraded the whole project to 17 and it still throws this error. This code is generated by Room code generation, so there is not really anything I can do to easily change it a be done with it.</p>\n<p>I am using Android Gradle 8.1.1 which complaints anyway if there is anything below Java 17.</p>\n<pre><code>AppDatabase_Impl.java:166: error: cannot find symbol\n\n                  + &quot; Found:\\n&quot; + _existingLocationData);\n                                  ^\n  symbol:   method makeConcatWithConstants(Lookup,String,MethodType,String)\n  location: interface StringConcatFactory\n</code></pre>\n<p>I would really appreciate if anyone would lend a hand with this.\n1 error\nFatal Error: Unable to find method makeConcatWithConstants</p>\n<p>edit: Added extra context where the issue is reported</p>\n<pre><code>return new RoomOpenHelper.ValidationResult(false, &quot;location_data(package.data.DatabaseLocation).\\n&quot;\n              + &quot; Expected:\\n&quot; + _infoLocationData + &quot;\\n&quot;\n              + &quot; Found:\\n&quot; + _existingLocationData);\n</code></pre>\n"},{"tags":["java","utf-8","emoji"],"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1694798609,"post_id":77114203,"comment_id":135943360,"body_markdown":"Interestingly, your question shows a single pilot emoji in my browser.  I’m guessing you meant to say that the log shows &#129489;✈️.  This suggests that your string is correct;  the problem lies with how you are viewing the log.  Not all editors and text viewers are aware of the full set of Unicode emoji sequences.","body":"Interestingly, your question shows a single pilot emoji in my browser.  I’m guessing you meant to say that the log shows 🧑✈️.  This suggests that your string is correct;  the problem lies with how you are viewing the log.  Not all editors and text viewers are aware of the full set of Unicode emoji sequences."},{"owner":{"account_id":9008386,"reputation":83,"user_id":6714057,"display_name":"Long"},"score":0,"creation_date":1694799169,"post_id":77114203,"comment_id":135943454,"body_markdown":"not only the logs, but when I tried to generate image using Graphics2D, the image also contains 2 emojj instead of 1 noto image.","body":"not only the logs, but when I tried to generate image using Graphics2D, the image also contains 2 emojj instead of 1 noto image."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1694801246,"post_id":77114203,"comment_id":135943816,"body_markdown":"I’m nearly certain that the Java 2D renderer recognizes few, if any, Unicode emoji sequences.  Though I’m not sure to what extent such rendering is the font’s responsibility.","body":"I’m nearly certain that the Java 2D renderer recognizes few, if any, Unicode emoji sequences.  Though I’m not sure to what extent such rendering is the font’s responsibility."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1695228715,"post_id":77114203,"comment_id":135997590,"body_markdown":"Java can handle supplementary characters since Java&#160;5. Your emoji, however, consists of two codepoints combined with a zero-width-joiner, followed by a variant selector. Software only understanding 16 bit characters would say that this string has five chars (as `string.length()` would do), but `string.codePointCount(0, string.length())` will correctly tell you that there are four codepoints. Whereas `new Scanner(&quot;\\uD83E\\uDDD1\\u200D\\u2708\\uFE0F&quot;) .findAll(&quot;\\\\X&quot;).count()` will tell you whether it is recognized as one logical character (it is with Java&#160;13 and newer). The font also matters, though","body":"Java can handle supplementary characters since Java 5. Your emoji, however, consists of two codepoints combined with a zero-width-joiner, followed by a variant selector. Software only understanding 16 bit characters would say that this string has five chars (as <code>string.length()</code> would do), but <code>string.codePointCount(0, string.length())</code> will correctly tell you that there are four codepoints. Whereas <code>new Scanner(&quot;\\uD83E\\uDDD1\\u200D\\u2708\\uFE0F&quot;) .findAll(&quot;\\\\X&quot;).count()</code> will tell you whether it is recognized as one logical character (it is with Java 13 and newer). The font also matters, though"},{"owner":{"account_id":9008386,"reputation":83,"user_id":6714057,"display_name":"Long"},"score":0,"creation_date":1695795227,"post_id":77114203,"comment_id":136070222,"body_markdown":"The problem is my project using java 8 now. Do I need to upgrade java to 13 or higher to make it work?","body":"The problem is my project using java 8 now. Do I need to upgrade java to 13 or higher to make it work?"}],"owner":{"account_id":9008386,"reputation":83,"user_id":6714057,"display_name":"Long"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694799298,"creation_date":1694797471,"question_id":77114203,"body_markdown":"Currently, when I try to print/log/generate image with code on\r\n https://emojiterra.com/pilot/ \r\nfor noto image:\r\n\\\\uD83E\\\\uDDD1\\\\u200D\\\\u2708\\\\uFE0F. \r\nIt always show 2 emoji: &#129489;‍✈️ instead of 1 emoji for noto. [![enter image description here](https://i.stack.imgur.com/1FPj2.png)](https://i.stack.imgur.com/1FPj2.png)\r\n\r\n\r\nlog.info(&quot;\\uD83E\\uDDD1\\u200D\\u2708\\uFE0F&quot;) always display &#129489;‍✈️\r\n\r\nWhen using Graphics2D, it generate image like this:\r\n[![enter image description here][1]][1]\r\nI guess the issue happen is because java only support 16-bit characters, and noto emoji is a 32-bit.\r\n\r\nIs there a way that I can print/generate image with 32-bit emoji in java?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/s0YP5.png","title":"Image generation with Emoji issue on Java","body":"<p>Currently, when I try to print/log/generate image with code on\n<a href=\"https://emojiterra.com/pilot/\" rel=\"nofollow noreferrer\">https://emojiterra.com/pilot/</a>\nfor noto image:\n\\uD83E\\uDDD1\\u200D\\u2708\\uFE0F.\nIt always show 2 emoji: 🧑‍✈️ instead of 1 emoji for noto. <a href=\"https://i.stack.imgur.com/1FPj2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1FPj2.png\" alt=\"enter image description here\" /></a></p>\n<p>log.info(&quot;\\uD83E\\uDDD1\\u200D\\u2708\\uFE0F&quot;) always display 🧑‍✈️</p>\n<p>When using Graphics2D, it generate image like this:\n<a href=\"https://i.stack.imgur.com/s0YP5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/s0YP5.png\" alt=\"enter image description here\" /></a>\nI guess the issue happen is because java only support 16-bit characters, and noto emoji is a 32-bit.</p>\n<p>Is there a way that I can print/generate image with 32-bit emoji in java?</p>\n"},{"tags":["java","amazon-web-services","spring-boot","amazon-s3"],"answers":[{"comments":[{"owner":{"account_id":22107235,"reputation":5,"user_id":16362635,"display_name":"Mohamed E."},"score":0,"creation_date":1694793566,"post_id":77111668,"comment_id":135942482,"body_markdown":"Thanks for your answer. I am trying to implement this but running into some dependency problems caused by the CRT module. The .crtBuilder() method is throwing  the following exception:\n\nCaused by: java.lang.IllegalStateException: Could not load classes from AWS Common Runtime (CRT) library.software.amazon.awssdk.crt:crt is a required dependency; make sure you have it on the classpath.\n\nHowever when I use the builder() method it works fine (booting up the project) but fails to upload a multipart file. I believe I am including all of the correct gradle dependencies. CRT should come with SDK.","body":"Thanks for your answer. I am trying to implement this but running into some dependency problems caused by the CRT module. The .crtBuilder() method is throwing  the following exception:  Caused by: java.lang.IllegalStateException: Could not load classes from AWS Common Runtime (CRT) library.software.amazon.awssdk.crt:crt is a required dependency; make sure you have it on the classpath.  However when I use the builder() method it works fine (booting up the project) but fails to upload a multipart file. I believe I am including all of the correct gradle dependencies. CRT should come with SDK."},{"owner":{"account_id":1540816,"reputation":10259,"user_id":1435543,"display_name":"smac2020"},"score":0,"creation_date":1694796161,"post_id":77111668,"comment_id":135942925,"body_markdown":"For gradle -- use this implementation group: &#39;software.amazon.awssdk.crt&#39;, name: &#39;aws-crt&#39;, version: &#39;0.25.1&#39; and implementation group: &#39;software.amazon.awssdk&#39;, name: &#39;s3-transfer-manager&#39;, version: &#39;2.20.26&#39;","body":"For gradle -- use this implementation group: &#39;software.amazon.awssdk.crt&#39;, name: &#39;aws-crt&#39;, version: &#39;0.25.1&#39; and implementation group: &#39;software.amazon.awssdk&#39;, name: &#39;s3-transfer-manager&#39;, version: &#39;2.20.26&#39;"},{"owner":{"account_id":1540816,"reputation":10259,"user_id":1435543,"display_name":"smac2020"},"score":0,"creation_date":1694799137,"post_id":77111668,"comment_id":135943445,"body_markdown":"I tested the above Java code with the POM - it works","body":"I tested the above Java code with the POM - it works"},{"owner":{"account_id":22107235,"reputation":5,"user_id":16362635,"display_name":"Mohamed E."},"score":0,"creation_date":1694889284,"post_id":77111668,"comment_id":135951847,"body_markdown":"Thanks so much! Works like a charm :)","body":"Thanks so much! Works like a charm :)"},{"owner":{"account_id":1540816,"reputation":10259,"user_id":1435543,"display_name":"smac2020"},"score":0,"creation_date":1694901338,"post_id":77111668,"comment_id":135952991,"body_markdown":"Glad it works. That’s best way to upload streams to S3 via java!","body":"Glad it works. That’s best way to upload streams to S3 via java!"}],"tags":[],"owner":{"account_id":1540816,"reputation":10259,"user_id":1435543,"display_name":"smac2020"},"comment_count":5,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1694799114,"creation_date":1694774260,"answer_id":77111668,"question_id":77108562,"body_markdown":"Your code base is very old and is not best practice. Instead of using V1, you should be using the lastest ***AWS S3 Java V2*** libs and use [Async calls][1] (non blocking). I will provide you a path to best practice S3 Java code. \r\n\r\n\r\nTo upload content to S3, strongly consider using the [AWS Transfer Manager][2].\r\n\r\nFor example, assume you want to upload a stream (binary data that is mp3 for example). In your example, that seems to be what you are attempting to do.\r\n\r\nYou can use this Async way with Transfer Manager to efficienty upload a data stream. Its very clean and represents best practice. \r\n\r\n\r\n    package org.example;\r\n    \r\n    import software.amazon.awssdk.core.async.AsyncRequestBody;\r\n    import software.amazon.awssdk.core.async.BlockingInputStreamAsyncRequestBody;\r\n    import software.amazon.awssdk.regions.Region;\r\n    import software.amazon.awssdk.services.s3.S3AsyncClient;\r\n    import software.amazon.awssdk.services.s3.model.S3Exception;\r\n    import software.amazon.awssdk.transfer.s3.S3TransferManager;\r\n    import software.amazon.awssdk.transfer.s3.model.Upload;\r\n    import java.io.FileInputStream;\r\n    import java.io.IOException;\r\n    import java.io.InputStream;\r\n    \r\n    \r\n    \r\n    public class Main {\r\n    \r\n        private static S3AsyncClient s3AsyncClient;\r\n    \r\n        private static synchronized S3AsyncClient getS3AsyncClient() {\r\n            if (s3AsyncClient == null) {\r\n                s3AsyncClient = S3AsyncClient.crtBuilder()\r\n                    .region(Region.US_EAST_1)\r\n                    .build();\r\n            }\r\n            return s3AsyncClient;\r\n        }\r\n        public static void main(String[] args) throws IOException {\r\n    \r\n    \r\n            System.out.println(&quot;This shows how to use the S3TransferManager to upload a file to S3!&quot;);\r\n            InputStream is = new FileInputStream(&quot;C:\\\\AWS\\\\output.mp3&quot;);\r\n    \r\n            String key = putAudio(is, &quot;scottpolicytestbucket2&quot;, &quot;output.mp3&quot;);\r\n            System.out.println(key + &quot; has been uploaded to S3!&quot;);\r\n    \r\n        }\r\n    \r\n        public static String putAudio(InputStream is, String bucketName, String key) throws S3Exception, IOException {\r\n            try {\r\n                S3TransferManager transferManager = S3TransferManager.builder()\r\n                    .s3Client(getS3AsyncClient())\r\n                    .build();\r\n    \r\n                BlockingInputStreamAsyncRequestBody body = AsyncRequestBody.forBlockingInputStream(null); // &#39;null&#39; indicates a stream will be provided later.\r\n                Upload upload = transferManager.upload(builder -&gt; builder\r\n                    .requestBody(body)\r\n                    .putObjectRequest(req -&gt; req.bucket(bucketName).key(key))\r\n                    .build());\r\n    \r\n                body.writeInputStream(is);\r\n                upload.completionFuture().join();\r\n                return key;\r\n    \r\n            } catch (S3Exception e) {\r\n                System.err.println(e.getMessage());\r\n                throw e;\r\n            }\r\n        }\r\n    }\r\n\r\nYou can find more examples for Transfer Manager in AWS Code Repo Github here: \r\n\r\nhttps://github.com/awsdocs/aws-doc-sdk-examples/tree/main/javav2/example_code/s3/src/main/java/com/example/s3/transfermanager\r\n\r\n\r\n**Update**\r\n\r\nHere is a full example POM that works. \r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n        &lt;groupId&gt;org.example&lt;/groupId&gt;\r\n        &lt;artifactId&gt;S3MavenTransferManager&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n    \r\n        &lt;properties&gt;\r\n            &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\r\n            &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\r\n            &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n        &lt;/properties&gt;\r\n    \r\n        &lt;dependencyManagement&gt;\r\n            &lt;dependencies&gt;\r\n                &lt;dependency&gt;\r\n                    &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;bom&lt;/artifactId&gt;\r\n                    &lt;version&gt;2.20.45&lt;/version&gt;\r\n                    &lt;type&gt;pom&lt;/type&gt;\r\n                    &lt;scope&gt;import&lt;/scope&gt;\r\n                &lt;/dependency&gt;\r\n                &lt;dependency&gt;\r\n                    &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;log4j-bom&lt;/artifactId&gt;\r\n                    &lt;version&gt;2.19.0&lt;/version&gt;\r\n                    &lt;type&gt;pom&lt;/type&gt;\r\n                    &lt;scope&gt;import&lt;/scope&gt;\r\n                &lt;/dependency&gt;\r\n            &lt;/dependencies&gt;\r\n        &lt;/dependencyManagement&gt;\r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\r\n                &lt;artifactId&gt;dynamodb&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;commons-logging&lt;/groupId&gt;\r\n                &lt;artifactId&gt;commons-logging&lt;/artifactId&gt;\r\n                &lt;version&gt;1.2&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\r\n                &lt;artifactId&gt;apache-client&lt;/artifactId&gt;\r\n                &lt;exclusions&gt;\r\n                    &lt;exclusion&gt;\r\n                        &lt;groupId&gt;commons-logging&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;commons-logging&lt;/artifactId&gt;\r\n                    &lt;/exclusion&gt;\r\n                &lt;/exclusions&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\r\n                &lt;artifactId&gt;s3&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;software.amazon.awssdk.crt&lt;/groupId&gt;\r\n                &lt;artifactId&gt;aws-crt&lt;/artifactId&gt;\r\n                &lt;version&gt;0.25.1&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n                &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n                &lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n                &lt;artifactId&gt;log4j-slf4j2-impl&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n                &lt;artifactId&gt;log4j-1.2-api&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.amazonaws&lt;/groupId&gt;\r\n                &lt;artifactId&gt;aws-lambda-java-events&lt;/artifactId&gt;\r\n                &lt;version&gt;3.11.1&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\r\n                &lt;artifactId&gt;textract&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\r\n                &lt;artifactId&gt;s3control&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.amazonaws&lt;/groupId&gt;\r\n                &lt;artifactId&gt;aws-lambda-java-core&lt;/artifactId&gt;\r\n                &lt;version&gt;1.2.2&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\r\n                &lt;artifactId&gt;translate&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\r\n                &lt;artifactId&gt;comprehend&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.json&lt;/groupId&gt;\r\n                &lt;artifactId&gt;json&lt;/artifactId&gt;\r\n                &lt;version&gt;20230227&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\r\n                &lt;artifactId&gt;polly&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.maven.surefire&lt;/groupId&gt;\r\n                &lt;artifactId&gt;surefire-booter&lt;/artifactId&gt;\r\n                &lt;version&gt;3.0.0-M3&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\r\n                &lt;artifactId&gt;lambda&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;commons-io&lt;/groupId&gt;\r\n                &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\r\n                &lt;version&gt;2.7&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\r\n                &lt;artifactId&gt;s3-transfer-manager&lt;/artifactId&gt;\r\n                &lt;version&gt;2.20.26&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n                &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\r\n                &lt;version&gt;5.9.0&lt;/version&gt;\r\n                &lt;scope&gt;test&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.googlecode.json-simple&lt;/groupId&gt;\r\n                &lt;artifactId&gt;json-simple&lt;/artifactId&gt;\r\n                &lt;version&gt;1.1&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n                &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\r\n                &lt;version&gt;5.9.0&lt;/version&gt;\r\n                &lt;scope&gt;test&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n        &lt;build&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;2.22.2&lt;/version&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.3.0&lt;/version&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;createDependencyReducedPom&gt;false&lt;/createDependencyReducedPom&gt;\r\n                    &lt;/configuration&gt;\r\n                    &lt;executions&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;phase&gt;package&lt;/phase&gt;\r\n                            &lt;goals&gt;\r\n                                &lt;goal&gt;shade&lt;/goal&gt;\r\n                            &lt;/goals&gt;\r\n                        &lt;/execution&gt;\r\n                    &lt;/executions&gt;\r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n        &lt;/build&gt;\r\n    &lt;/project&gt;\r\n\r\n\r\n  [1]: https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/asynchronous.html\r\n  [2]: https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/transfer-manager.html","title":"AWS S3Client putObject() Exception: Connection Pool Time Out","body":"<p>Your code base is very old and is not best practice. Instead of using V1, you should be using the lastest <em><strong>AWS S3 Java V2</strong></em> libs and use <a href=\"https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/asynchronous.html\" rel=\"nofollow noreferrer\">Async calls</a> (non blocking). I will provide you a path to best practice S3 Java code.</p>\n<p>To upload content to S3, strongly consider using the <a href=\"https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/transfer-manager.html\" rel=\"nofollow noreferrer\">AWS Transfer Manager</a>.</p>\n<p>For example, assume you want to upload a stream (binary data that is mp3 for example). In your example, that seems to be what you are attempting to do.</p>\n<p>You can use this Async way with Transfer Manager to efficienty upload a data stream. Its very clean and represents best practice.</p>\n<pre><code>package org.example;\n\nimport software.amazon.awssdk.core.async.AsyncRequestBody;\nimport software.amazon.awssdk.core.async.BlockingInputStreamAsyncRequestBody;\nimport software.amazon.awssdk.regions.Region;\nimport software.amazon.awssdk.services.s3.S3AsyncClient;\nimport software.amazon.awssdk.services.s3.model.S3Exception;\nimport software.amazon.awssdk.transfer.s3.S3TransferManager;\nimport software.amazon.awssdk.transfer.s3.model.Upload;\nimport java.io.FileInputStream;\nimport java.io.IOException;\nimport java.io.InputStream;\n\n\n\npublic class Main {\n\n    private static S3AsyncClient s3AsyncClient;\n\n    private static synchronized S3AsyncClient getS3AsyncClient() {\n        if (s3AsyncClient == null) {\n            s3AsyncClient = S3AsyncClient.crtBuilder()\n                .region(Region.US_EAST_1)\n                .build();\n        }\n        return s3AsyncClient;\n    }\n    public static void main(String[] args) throws IOException {\n\n\n        System.out.println(&quot;This shows how to use the S3TransferManager to upload a file to S3!&quot;);\n        InputStream is = new FileInputStream(&quot;C:\\\\AWS\\\\output.mp3&quot;);\n\n        String key = putAudio(is, &quot;scottpolicytestbucket2&quot;, &quot;output.mp3&quot;);\n        System.out.println(key + &quot; has been uploaded to S3!&quot;);\n\n    }\n\n    public static String putAudio(InputStream is, String bucketName, String key) throws S3Exception, IOException {\n        try {\n            S3TransferManager transferManager = S3TransferManager.builder()\n                .s3Client(getS3AsyncClient())\n                .build();\n\n            BlockingInputStreamAsyncRequestBody body = AsyncRequestBody.forBlockingInputStream(null); // 'null' indicates a stream will be provided later.\n            Upload upload = transferManager.upload(builder -&gt; builder\n                .requestBody(body)\n                .putObjectRequest(req -&gt; req.bucket(bucketName).key(key))\n                .build());\n\n            body.writeInputStream(is);\n            upload.completionFuture().join();\n            return key;\n\n        } catch (S3Exception e) {\n            System.err.println(e.getMessage());\n            throw e;\n        }\n    }\n}\n</code></pre>\n<p>You can find more examples for Transfer Manager in AWS Code Repo Github here:</p>\n<p><a href=\"https://github.com/awsdocs/aws-doc-sdk-examples/tree/main/javav2/example_code/s3/src/main/java/com/example/s3/transfermanager\" rel=\"nofollow noreferrer\">https://github.com/awsdocs/aws-doc-sdk-examples/tree/main/javav2/example_code/s3/src/main/java/com/example/s3/transfermanager</a></p>\n<p><strong>Update</strong></p>\n<p>Here is a full example POM that works.</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;org.example&lt;/groupId&gt;\n    &lt;artifactId&gt;S3MavenTransferManager&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n\n    &lt;properties&gt;\n        &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencyManagement&gt;\n        &lt;dependencies&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\n                &lt;artifactId&gt;bom&lt;/artifactId&gt;\n                &lt;version&gt;2.20.45&lt;/version&gt;\n                &lt;type&gt;pom&lt;/type&gt;\n                &lt;scope&gt;import&lt;/scope&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n                &lt;artifactId&gt;log4j-bom&lt;/artifactId&gt;\n                &lt;version&gt;2.19.0&lt;/version&gt;\n                &lt;type&gt;pom&lt;/type&gt;\n                &lt;scope&gt;import&lt;/scope&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n    &lt;/dependencyManagement&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\n            &lt;artifactId&gt;dynamodb&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;commons-logging&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-logging&lt;/artifactId&gt;\n            &lt;version&gt;1.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\n            &lt;artifactId&gt;apache-client&lt;/artifactId&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;commons-logging&lt;/groupId&gt;\n                    &lt;artifactId&gt;commons-logging&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\n            &lt;artifactId&gt;s3&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;software.amazon.awssdk.crt&lt;/groupId&gt;\n            &lt;artifactId&gt;aws-crt&lt;/artifactId&gt;\n            &lt;version&gt;0.25.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j-slf4j2-impl&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j-1.2-api&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.amazonaws&lt;/groupId&gt;\n            &lt;artifactId&gt;aws-lambda-java-events&lt;/artifactId&gt;\n            &lt;version&gt;3.11.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\n            &lt;artifactId&gt;textract&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\n            &lt;artifactId&gt;s3control&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.amazonaws&lt;/groupId&gt;\n            &lt;artifactId&gt;aws-lambda-java-core&lt;/artifactId&gt;\n            &lt;version&gt;1.2.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\n            &lt;artifactId&gt;translate&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\n            &lt;artifactId&gt;comprehend&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.json&lt;/groupId&gt;\n            &lt;artifactId&gt;json&lt;/artifactId&gt;\n            &lt;version&gt;20230227&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\n            &lt;artifactId&gt;polly&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.maven.surefire&lt;/groupId&gt;\n            &lt;artifactId&gt;surefire-booter&lt;/artifactId&gt;\n            &lt;version&gt;3.0.0-M3&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\n            &lt;artifactId&gt;lambda&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;commons-io&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\n            &lt;version&gt;2.7&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\n            &lt;artifactId&gt;s3-transfer-manager&lt;/artifactId&gt;\n            &lt;version&gt;2.20.26&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n            &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\n            &lt;version&gt;5.9.0&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.googlecode.json-simple&lt;/groupId&gt;\n            &lt;artifactId&gt;json-simple&lt;/artifactId&gt;\n            &lt;version&gt;1.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n            &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\n            &lt;version&gt;5.9.0&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.22.2&lt;/version&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.3.0&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;createDependencyReducedPom&gt;false&lt;/createDependencyReducedPom&gt;\n                &lt;/configuration&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;phase&gt;package&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;shade&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n"}],"owner":{"account_id":22107235,"reputation":5,"user_id":16362635,"display_name":"Mohamed E."},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":181,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77111668,"answer_count":1,"score":0,"last_activity_date":1694799114,"creation_date":1694728151,"question_id":77108562,"body_markdown":"I am seeing this stack trace in my spring boot project some time after I deploy to my servers. Everytime I restart Spring boot, the error disappears then reappears after a while:\r\n\r\n```\r\nCaused by: org.apache.http.conn.ConnectionPoolTimeoutException: Timeout waiting for connection from pool\r\n        at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.leaseConnection(PoolingHttpClientConnectionManager.java:316)\r\n        at org.apache.http.impl.conn.PoolingHttpClientConnectionManager$1.get(PoolingHttpClientConnectionManager.java:282)\r\n        at jdk.internal.reflect.GeneratedMethodAccessor51.invoke(Unknown Source)\r\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n        at com.amazonaws.http.conn.ClientConnectionRequestFactory$Handler.invoke(ClientConnectionRequestFactory.java:70)\r\n        at com.amazonaws.http.conn.$Proxy130.get(Unknown Source)\r\n        at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:190)\r\n        at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)\r\n        at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)\r\n        at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83)\r\n        at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)\r\n        at com.amazonaws.http.apache.client.impl.SdkHttpClient.execute(SdkHttpClient.java:72)\r\n        at com.amazonaws.http.AmazonHttpClient$RequestExecutor.executeOneRequest(AmazonHttpClient.java:1346)\r\n        at com.amazonaws.http.AmazonHttpClient$RequestExecutor.executeHelper(AmazonHttpClient.java:1157)\r\n        ... 73 more\r\n```\r\n\r\nI suspect some client of leakage is happening where connections are not being released after being used. Here is how I am setting up my S3Client object:\r\n\r\n```\r\n@Bean\r\npublic AmazonS3 amazonS3Client(){\r\n    // Create a ClientConfiguration object to configure the S3 client\r\n    ClientConfiguration clientConfig = new ClientConfiguration();\r\n\r\n    // Set the maximum number of open HTTP connections (connection pool size)\r\n    clientConfig.setMaxConnections(500); // Set your desired pool size here\r\n    clientConfig.setConnectionTimeout(10000); // 15 seconds\r\n\r\n    Regions clientRegion = Regions.US_EAST_1;\r\n\r\n    AppConfig config = appConfigRepository.findAll().get(0);\r\n\r\n    String accessKey = config.getAmazonS3AccessKey();\r\n    String secretKey = config.getAmazonS3SecretKey();\r\n\r\n    //This code expects that you have AWS credentials set up per:\r\n    // https://docs.aws.amazon.com/sdk-for-java/v1/developer-guide/setup-credentials.html\r\n    // Create AWS Basic Credentials\r\n    BasicAWSCredentials credentials = new BasicAWSCredentials(accessKey, secretKey);\r\n\r\n    // Configure the S3 client builder\r\n    AmazonS3ClientBuilder clientBuilder = AmazonS3ClientBuilder.standard()\r\n            .withCredentials(new AWSStaticCredentialsProvider(credentials))\r\n            .withClientConfiguration(clientConfig)\r\n            .withRegion(clientRegion);\r\n\r\n    // Build the S3 client\r\n    return clientBuilder.build();\r\n}\r\n```\r\n\r\nI then use this one object to upload images using the putObject method here:\r\n\r\n```\r\ntry (ByteArrayInputStream inputStream = new ByteArrayInputStream(imageBytes)) {\r\n    s3Client.putObject(bucketName, imagePath, inputStream, metadata);\r\n}\r\n```\r\n\r\nI tried increasing the size of the connection pool from the default (I believe it was 50) to 500. This had the effect of increasing the time it takes from restarting my spring boot project to the exception occurring. I also tried using a try with resources block incase somehow leaking my byteArray was an issue - this had no effect.","title":"AWS S3Client putObject() Exception: Connection Pool Time Out","body":"<p>I am seeing this stack trace in my spring boot project some time after I deploy to my servers. Everytime I restart Spring boot, the error disappears then reappears after a while:</p>\n<pre><code>Caused by: org.apache.http.conn.ConnectionPoolTimeoutException: Timeout waiting for connection from pool\n        at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.leaseConnection(PoolingHttpClientConnectionManager.java:316)\n        at org.apache.http.impl.conn.PoolingHttpClientConnectionManager$1.get(PoolingHttpClientConnectionManager.java:282)\n        at jdk.internal.reflect.GeneratedMethodAccessor51.invoke(Unknown Source)\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n        at com.amazonaws.http.conn.ClientConnectionRequestFactory$Handler.invoke(ClientConnectionRequestFactory.java:70)\n        at com.amazonaws.http.conn.$Proxy130.get(Unknown Source)\n        at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:190)\n        at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)\n        at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)\n        at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83)\n        at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)\n        at com.amazonaws.http.apache.client.impl.SdkHttpClient.execute(SdkHttpClient.java:72)\n        at com.amazonaws.http.AmazonHttpClient$RequestExecutor.executeOneRequest(AmazonHttpClient.java:1346)\n        at com.amazonaws.http.AmazonHttpClient$RequestExecutor.executeHelper(AmazonHttpClient.java:1157)\n        ... 73 more\n</code></pre>\n<p>I suspect some client of leakage is happening where connections are not being released after being used. Here is how I am setting up my S3Client object:</p>\n<pre><code>@Bean\npublic AmazonS3 amazonS3Client(){\n    // Create a ClientConfiguration object to configure the S3 client\n    ClientConfiguration clientConfig = new ClientConfiguration();\n\n    // Set the maximum number of open HTTP connections (connection pool size)\n    clientConfig.setMaxConnections(500); // Set your desired pool size here\n    clientConfig.setConnectionTimeout(10000); // 15 seconds\n\n    Regions clientRegion = Regions.US_EAST_1;\n\n    AppConfig config = appConfigRepository.findAll().get(0);\n\n    String accessKey = config.getAmazonS3AccessKey();\n    String secretKey = config.getAmazonS3SecretKey();\n\n    //This code expects that you have AWS credentials set up per:\n    // https://docs.aws.amazon.com/sdk-for-java/v1/developer-guide/setup-credentials.html\n    // Create AWS Basic Credentials\n    BasicAWSCredentials credentials = new BasicAWSCredentials(accessKey, secretKey);\n\n    // Configure the S3 client builder\n    AmazonS3ClientBuilder clientBuilder = AmazonS3ClientBuilder.standard()\n            .withCredentials(new AWSStaticCredentialsProvider(credentials))\n            .withClientConfiguration(clientConfig)\n            .withRegion(clientRegion);\n\n    // Build the S3 client\n    return clientBuilder.build();\n}\n</code></pre>\n<p>I then use this one object to upload images using the putObject method here:</p>\n<pre><code>try (ByteArrayInputStream inputStream = new ByteArrayInputStream(imageBytes)) {\n    s3Client.putObject(bucketName, imagePath, inputStream, metadata);\n}\n</code></pre>\n<p>I tried increasing the size of the connection pool from the default (I believe it was 50) to 500. This had the effect of increasing the time it takes from restarting my spring boot project to the exception occurring. I also tried using a try with resources block incase somehow leaking my byteArray was an issue - this had no effect.</p>\n"},{"tags":["java","garbage-collection"],"comments":[{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":3,"creation_date":1694732547,"post_id":77108762,"comment_id":135933846,"body_markdown":"In this case, the `Runnable` lambda is capturing `this` (a reference to the `State` object). It is a strong reference.","body":"In this case, the <code>Runnable</code> lambda is capturing <code>this</code> (a reference to the <code>State</code> object). It is a strong reference."},{"owner":{"account_id":27243397,"reputation":1331,"user_id":20769158,"display_name":"scrhartley"},"score":0,"creation_date":1694732727,"post_id":77108762,"comment_id":135933860,"body_markdown":"@Slaw I don&#39;t think the Runnable is capturing `this`, it&#39;s just creating a copy of `x`. As `x` is a primitive, that&#39;s a copy of the value. If `x` wasn&#39;t a primitive, it would be a copy of the reference.","body":"@Slaw I don&#39;t think the Runnable is capturing <code>this</code>, it&#39;s just creating a copy of <code>x</code>. As <code>x</code> is a primitive, that&#39;s a copy of the value. If <code>x</code> wasn&#39;t a primitive, it would be a copy of the reference."},{"owner":{"account_id":27243397,"reputation":1331,"user_id":20769158,"display_name":"scrhartley"},"score":0,"creation_date":1694733192,"post_id":77108762,"comment_id":135933908,"body_markdown":"See here for the explanation about value copying with lambdas: https://blogs.oracle.com/javamagazine/post/java-lambda-local-variable-closure","body":"See here for the explanation about value copying with lambdas: <a href=\"https://blogs.oracle.com/javamagazine/post/java-lambda-local-variable-closure\" rel=\"nofollow noreferrer\">blogs.oracle.com/javamagazine/post/&hellip;</a>"},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":1,"creation_date":1694734494,"post_id":77108762,"comment_id":135934009,"body_markdown":"@scrhartley No, it&#39;s capturing `this`. You can test by modifying `x` after the lambda creation.","body":"@scrhartley No, it&#39;s capturing <code>this</code>. You can test by modifying <code>x</code> after the lambda creation."},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1694734629,"post_id":77108762,"comment_id":135934023,"body_markdown":"@scrhartley that isn’t correct. The link you shared is referring to local variables, but this is an instance variable.","body":"@scrhartley that isn’t correct. The link you shared is referring to local variables, but this is an instance variable."},{"owner":{"account_id":27243397,"reputation":1331,"user_id":20769158,"display_name":"scrhartley"},"score":0,"creation_date":1694735222,"post_id":77108762,"comment_id":135934071,"body_markdown":"@shmosel Thanks for the correction.","body":"@shmosel Thanks for the correction."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1694768871,"post_id":77108762,"comment_id":135937602,"body_markdown":"As long as the code looks like shown in the question, i.e. `runnable` is never accessed, both, the `Runnable` and the captured `this` are eligible to garbage collection. See [Can java finalize an object when it is still in scope?](https://stackoverflow.com/a/24380219/2711488)","body":"As long as the code looks like shown in the question, i.e. <code>runnable</code> is never accessed, both, the <code>Runnable</code> and the captured <code>this</code> are eligible to garbage collection. See <a href=\"https://stackoverflow.com/a/24380219/2711488\">Can java finalize an object when it is still in scope?</a>"},{"owner":{"account_id":1343574,"reputation":1526,"user_id":1284735,"accept_rate":62,"display_name":"petabyte"},"score":0,"creation_date":1694798744,"post_id":77108762,"comment_id":135943378,"body_markdown":"@Holger I modified the script so that runnable is executed. Please take a look, could `state` be garbage collected in this case?","body":"@Holger I modified the script so that runnable is executed. Please take a look, could <code>state</code> be garbage collected in this case?"},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1694801925,"post_id":77108762,"comment_id":135943929,"body_markdown":"@petabyte As long as the `Runnable` instance is strongly referenced, so is the `State` instance. Just like normal. Now, in your code, you don&#39;t keep a reference of the `Runnable` anywhere except in a local variable, meaning once the method returns, the `Runnable` is eligible for GC (and thus the `State` object). That&#39;s obviously ignoring the fact the method in question is the main method, and you don&#39;t start any non-daemon threads, which means the JVM will terminate once it returns.","body":"@petabyte As long as the <code>Runnable</code> instance is strongly referenced, so is the <code>State</code> instance. Just like normal. Now, in your code, you don&#39;t keep a reference of the <code>Runnable</code> anywhere except in a local variable, meaning once the method returns, the <code>Runnable</code> is eligible for GC (and thus the <code>State</code> object). That&#39;s obviously ignoring the fact the method in question is the main method, and you don&#39;t start any non-daemon threads, which means the JVM will terminate once it returns."},{"owner":{"account_id":1343574,"reputation":1526,"user_id":1284735,"accept_rate":62,"display_name":"petabyte"},"score":0,"creation_date":1694804154,"post_id":77108762,"comment_id":135944249,"body_markdown":"@Slaw makes sense, thanks. In this case though, I see the lambda is capturing `this`, but why does it have to? If JVM knows that only `x` is required, could it just throw away everything else? I mean even just pointer to `x`","body":"@Slaw makes sense, thanks. In this case though, I see the lambda is capturing <code>this</code>, but why does it have to? If JVM knows that only <code>x</code> is required, could it just throw away everything else? I mean even just pointer to <code>x</code>"},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":2,"creation_date":1694820888,"post_id":77108762,"comment_id":135946262,"body_markdown":"Because `x` is a field, and so it needs a reference to `this` so that it can always get the most up-to-date value. I suppose it&#39;s possible that JIT might optimize that by copying `x` if it were `final` or if JIT determines it&#39;s never modified, but I have no idea if that happens. Now, if you&#39;re asking why the JVM can&#39;t just keep a direct pointer to `x` instead of via `this`, well I would say in that scenario, if the `State` instance is GC&#39;d, then what happens to `x`? The `x` field value is part of the object memory that&#39;s just been reclaimed (making `x` meaningless).","body":"Because <code>x</code> is a field, and so it needs a reference to <code>this</code> so that it can always get the most up-to-date value. I suppose it&#39;s possible that JIT might optimize that by copying <code>x</code> if it were <code>final</code> or if JIT determines it&#39;s never modified, but I have no idea if that happens. Now, if you&#39;re asking why the JVM can&#39;t just keep a direct pointer to <code>x</code> instead of via <code>this</code>, well I would say in that scenario, if the <code>State</code> instance is GC&#39;d, then what happens to <code>x</code>? The <code>x</code> field value is part of the object memory that&#39;s just been reclaimed (making <code>x</code> meaningless)."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":3,"creation_date":1695108623,"post_id":77108762,"comment_id":135976380,"body_markdown":"To build on @Slaw’s comment, such optimization is possible in practice by inlining the code of `State`’s constructor, the `runnable()` and the `run()` method into the caller, then transforming the caller to a form which simply uses the value `10` which would be written to `x` in the constructor in the print statement directly instead of reading `x`. This requires that either, no thread synchronization happens in-between or Escape Analysis proves that `State` is never seen by other threads. Then both, `State` and `Runnable` instances, are garbage collectible or never created in the first place.","body":"To build on @Slaw’s comment, such optimization is possible in practice by inlining the code of <code>State</code>’s constructor, the <code>runnable()</code> and the <code>run()</code> method into the caller, then transforming the caller to a form which simply uses the value <code>10</code> which would be written to <code>x</code> in the constructor in the print statement directly instead of reading <code>x</code>. This requires that either, no thread synchronization happens in-between or Escape Analysis proves that <code>State</code> is never seen by other threads. Then both, <code>State</code> and <code>Runnable</code> instances, are garbage collectible or never created in the first place."}],"owner":{"account_id":1343574,"reputation":1526,"user_id":1284735,"accept_rate":62,"display_name":"petabyte"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":83,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694798638,"creation_date":1694731602,"question_id":77108762,"body_markdown":"Does a reference to an instance variable keep the object around, or would it get garbage collected if it&#39;s not reachable?\r\n\r\n```java\r\npublic class State {\r\n    private int x = 10;\r\n    \r\n    Runnable runnable() {\r\n        return () -&gt; System.out.println(x);\r\n    }\r\n    \r\n    public static void main(String[] args) {\r\n       State state = new State();\r\n       Runnable runnable = state.runnable();\r\n       state = null;\r\n       // Is the `state` object eligible for collection here?\r\n       runnable.run();\r\n    }\r\n}","title":"Garbage collection with closure of instance variable","body":"<p>Does a reference to an instance variable keep the object around, or would it get garbage collected if it's not reachable?</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class State {\n    private int x = 10;\n    \n    Runnable runnable() {\n        return () -&gt; System.out.println(x);\n    }\n    \n    public static void main(String[] args) {\n       State state = new State();\n       Runnable runnable = state.runnable();\n       state = null;\n       // Is the `state` object eligible for collection here?\n       runnable.run();\n    }\n}\n</code></pre>\n"},{"tags":["java","hibernate","spring-boot"],"comments":[{"owner":{"account_id":12626017,"reputation":5868,"user_id":10426557,"display_name":"Jonathan JOhx"},"score":0,"creation_date":1569303898,"post_id":58054915,"comment_id":102542507,"body_markdown":"Possible duplicate of [What is the meaning of the CascadeType.ALL for a @ManyToOne JPA association](https://stackoverflow.com/questions/13027214/what-is-the-meaning-of-the-cascadetype-all-for-a-manytoone-jpa-association)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/13027214/what-is-the-meaning-of-the-cascadetype-all-for-a-manytoone-jpa-association\">What is the meaning of the CascadeType.ALL for a @ManyToOne JPA association</a>"}],"answers":[{"tags":[],"owner":{"account_id":14361012,"reputation":834,"user_id":10373317,"display_name":"GauravRai1512"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1569210718,"creation_date":1569210718,"answer_id":58055438,"question_id":58054915,"body_markdown":"This is something which you need to understand. first of all how effective you are designing your database also is your table independent or there is any relation with another table. please have a look on below points:\r\n\r\n1.  If Your table has multiple link with another table and persisting data in a single table should cascade data to all dependent table then in that scenario you have to use CascadeType.ALL For Example:\r\n\r\n    \r\nEmployeeEntity.java\r\n\r\n    @Entity\r\n    @Table(name = &quot;Employee&quot;)\r\n    public class EmployeeEntity implements Serializable\r\n    {\r\n        private static final long serialVersionUID = -1798070786993154676L;\r\n        @Id\r\n        @Column(name = &quot;ID&quot;, unique = true, nullable = false)\r\n        private Integer           employeeId;\r\n        @Column(name = &quot;FIRST_NAME&quot;, unique = false, nullable = false, length = 100)\r\n        private String            firstName;\r\n        @Column(name = &quot;LAST_NAME&quot;, unique = false, nullable = false, length = 100)\r\n        private String            lastName;\r\n     \r\n        @OneToMany(cascade=CascadeType.ALL, fetch = FetchType.LAZY)\r\n        @JoinColumn(name=&quot;EMPLOYEE_ID&quot;)\r\n        private Set&lt;AccountEntity&gt; accounts;\r\n     \r\n        //Getters and Setters Ommited\r\n    }\r\n\r\nAccountEntity.java\r\n\r\n    @Entity\r\n    @Table(name = &quot;Account&quot;)\r\n    public class AccountEntity implements Serializable\r\n    {\r\n        private static final long serialVersionUID = 1L;\r\n        @Id\r\n        @Column(name = &quot;ID&quot;, unique = true, nullable = false)\r\n        @GeneratedValue(strategy = GenerationType.SEQUENCE)\r\n        private Integer           accountId;\r\n        @Column(name = &quot;ACC_NO&quot;, unique = false, nullable = false, length = 100)\r\n        private String            accountNumber;\r\n     \r\n        @OneToOne (mappedBy=&quot;accounts&quot;,  fetch = FetchType.LAZY)\r\n        private EmployeeEntity employee;\r\n     \r\n    }\r\n\r\nLook at the above source code for EmployeeEntity.java. It defines “cascade=CascadeType.ALL” and it essentially means that any change happened on EmployeeEntity must cascade to AccountEntity as well. If you save an employee, then all associated accounts will also be saved into database. If you delete an Employee then all accounts associated with that Employee also be deleted. Simple enough.\r\n\r\nBut what if we only want to cascade only save operations but not delete operation. Then we need to clearly specify it using below code.\r\n\r\n    @OneToMany(cascade=CascadeType.PERSIST, fetch = FetchType.LAZY)\r\n    @JoinColumn(name=&quot;EMPLOYEE_ID&quot;)\r\n    private Set&lt;AccountEntity&gt; accounts;\r\n\r\nThere is no default cascade type in JPA. By default no operations are cascaded.","title":"Hibernate: When should I use Cascade.ALL and when should i specify them separately","body":"<p>This is something which you need to understand. first of all how effective you are designing your database also is your table independent or there is any relation with another table. please have a look on below points:</p>\n\n<ol>\n<li>If Your table has multiple link with another table and persisting data in a single table should cascade data to all dependent table then in that scenario you have to use CascadeType.ALL For Example:</li>\n</ol>\n\n<p>EmployeeEntity.java</p>\n\n<pre><code>@Entity\n@Table(name = \"Employee\")\npublic class EmployeeEntity implements Serializable\n{\n    private static final long serialVersionUID = -1798070786993154676L;\n    @Id\n    @Column(name = \"ID\", unique = true, nullable = false)\n    private Integer           employeeId;\n    @Column(name = \"FIRST_NAME\", unique = false, nullable = false, length = 100)\n    private String            firstName;\n    @Column(name = \"LAST_NAME\", unique = false, nullable = false, length = 100)\n    private String            lastName;\n\n    @OneToMany(cascade=CascadeType.ALL, fetch = FetchType.LAZY)\n    @JoinColumn(name=\"EMPLOYEE_ID\")\n    private Set&lt;AccountEntity&gt; accounts;\n\n    //Getters and Setters Ommited\n}\n</code></pre>\n\n<p>AccountEntity.java</p>\n\n<pre><code>@Entity\n@Table(name = \"Account\")\npublic class AccountEntity implements Serializable\n{\n    private static final long serialVersionUID = 1L;\n    @Id\n    @Column(name = \"ID\", unique = true, nullable = false)\n    @GeneratedValue(strategy = GenerationType.SEQUENCE)\n    private Integer           accountId;\n    @Column(name = \"ACC_NO\", unique = false, nullable = false, length = 100)\n    private String            accountNumber;\n\n    @OneToOne (mappedBy=\"accounts\",  fetch = FetchType.LAZY)\n    private EmployeeEntity employee;\n\n}\n</code></pre>\n\n<p>Look at the above source code for EmployeeEntity.java. It defines “cascade=CascadeType.ALL” and it essentially means that any change happened on EmployeeEntity must cascade to AccountEntity as well. If you save an employee, then all associated accounts will also be saved into database. If you delete an Employee then all accounts associated with that Employee also be deleted. Simple enough.</p>\n\n<p>But what if we only want to cascade only save operations but not delete operation. Then we need to clearly specify it using below code.</p>\n\n<pre><code>@OneToMany(cascade=CascadeType.PERSIST, fetch = FetchType.LAZY)\n@JoinColumn(name=\"EMPLOYEE_ID\")\nprivate Set&lt;AccountEntity&gt; accounts;\n</code></pre>\n\n<p>There is no default cascade type in JPA. By default no operations are cascaded.</p>\n"},{"tags":[],"owner":{"account_id":12626017,"reputation":5868,"user_id":10426557,"display_name":"Jonathan JOhx"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1569211385,"creation_date":1569211385,"answer_id":58055513,"question_id":58054915,"body_markdown":"**What does `CascadeType.ALL` mean and when should I use?**\r\n\r\n`CascadeType.ALL`are all operations `(PERSIST, MERGE, REMOVE, REFRESH, DETACH)` that are propagated to the associated entity to the relating entities in persistence context.\r\n\r\nSo, this question is very general, if you know these definitions, you can identify if it is necessary or not to use `CascadeType.ALL`.\r\n\r\n\r\n\r\n**DOCUMENTATION:**\r\n\r\nThe `EntityManager` has APIs to persist new entities, `remove` (delete) existing entities, `refresh` entity state from the datastore, and `merge` detached entity state back into the persistence context.\r\n\r\nWhen the `EntityManager` is performing the above operations, you can instruct it to automatically cascade the operation to the entities held in a persistent field with the cascade property of your metadata annotation. This process is recursive. The cascade property accepts an array of CascadeType enum values.\r\n\r\n**CascadeType.PERSIST**: When persisting an entity, also persist the entities held in this field. We suggest liberal application of this cascade rule, because if the EntityManager finds a field that references a new entity during flush, and the field does not use CascadeType.PERSIST, it is an error.\r\n\r\n**CascadeType.MERGE**: When merging entity state, also merge the entities held in this field.\r\n\r\n**CascadeType.REMOVE**: When deleting an entity, also delete the entities held in this field.\r\n\r\n**CascadeType.REFRESH**: When refreshing an entity, also refresh the entities held in this field.\r\n\r\n**CascadeType.DETACH**: When detaching an entity, also detach the entities held in this field.\r\n\r\n\r\n\r\n\r\n**REFERENCES:**\r\n\r\n[EJB3.0 Specification - 2.1.7 Entity Relationships][1]\r\n\r\n[Apache-openjpa docs JPA overview meta cascade][2]\r\n\r\n\r\n  [1]: https://download.oracle.com/otn-pub/jcp/ejb-3_0-fr-eval-oth-JSpec/ejb-3_0-fr-spec-persistence.pdf?AuthParam=1569211089_2c912ca451afd59f7ffc3468239708ef\r\n  [2]: http://openjpa.apache.org/builds/2.4.0/apache-openjpa/docs/jpa_overview_meta_field.html#jpa_overview_meta_cascade","title":"Hibernate: When should I use Cascade.ALL and when should i specify them separately","body":"<p><strong>What does <code>CascadeType.ALL</code> mean and when should I use?</strong></p>\n\n<p><code>CascadeType.ALL</code>are all operations <code>(PERSIST, MERGE, REMOVE, REFRESH, DETACH)</code> that are propagated to the associated entity to the relating entities in persistence context.</p>\n\n<p>So, this question is very general, if you know these definitions, you can identify if it is necessary or not to use <code>CascadeType.ALL</code>.</p>\n\n<p><strong>DOCUMENTATION:</strong></p>\n\n<p>The <code>EntityManager</code> has APIs to persist new entities, <code>remove</code> (delete) existing entities, <code>refresh</code> entity state from the datastore, and <code>merge</code> detached entity state back into the persistence context.</p>\n\n<p>When the <code>EntityManager</code> is performing the above operations, you can instruct it to automatically cascade the operation to the entities held in a persistent field with the cascade property of your metadata annotation. This process is recursive. The cascade property accepts an array of CascadeType enum values.</p>\n\n<p><strong>CascadeType.PERSIST</strong>: When persisting an entity, also persist the entities held in this field. We suggest liberal application of this cascade rule, because if the EntityManager finds a field that references a new entity during flush, and the field does not use CascadeType.PERSIST, it is an error.</p>\n\n<p><strong>CascadeType.MERGE</strong>: When merging entity state, also merge the entities held in this field.</p>\n\n<p><strong>CascadeType.REMOVE</strong>: When deleting an entity, also delete the entities held in this field.</p>\n\n<p><strong>CascadeType.REFRESH</strong>: When refreshing an entity, also refresh the entities held in this field.</p>\n\n<p><strong>CascadeType.DETACH</strong>: When detaching an entity, also detach the entities held in this field.</p>\n\n<p><strong>REFERENCES:</strong></p>\n\n<p><a href=\"https://download.oracle.com/otn-pub/jcp/ejb-3_0-fr-eval-oth-JSpec/ejb-3_0-fr-spec-persistence.pdf?AuthParam=1569211089_2c912ca451afd59f7ffc3468239708ef\" rel=\"nofollow noreferrer\">EJB3.0 Specification - 2.1.7 Entity Relationships</a></p>\n\n<p><a href=\"http://openjpa.apache.org/builds/2.4.0/apache-openjpa/docs/jpa_overview_meta_field.html#jpa_overview_meta_cascade\" rel=\"nofollow noreferrer\">Apache-openjpa docs JPA overview meta cascade</a></p>\n"},{"comments":[{"owner":{"display_name":"user12099587"},"score":0,"creation_date":1569244227,"post_id":58056589,"comment_id":102522754,"body_markdown":"You are talking about `@Cascade` annotation provided by Hibernate. Are you sure when I use cascade in JPA annotations it applies all of Hibernate cascading types?","body":"You are talking about <code>@Cascade</code> annotation provided by Hibernate. Are you sure when I use cascade in JPA annotations it applies all of Hibernate cascading types?"},{"owner":{"account_id":8389289,"reputation":723,"user_id":6298537,"display_name":"yashjain12yj"},"score":0,"creation_date":1569244677,"post_id":58056589,"comment_id":102523000,"body_markdown":"JPA doesn&#39;t have all of these cascade types.\nThese are the types provided by JPA.\ncascade-all, cascade-persist, cascade-merge, cascade-remove, cascade-refresh, or cascade-detach","body":"JPA doesn&#39;t have all of these cascade types. These are the types provided by JPA. cascade-all, cascade-persist, cascade-merge, cascade-remove, cascade-refresh, or cascade-detach"}],"tags":[],"owner":{"account_id":8389289,"reputation":723,"user_id":6298537,"display_name":"yashjain12yj"},"comment_count":2,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1569219376,"creation_date":1569219376,"answer_id":58056589,"question_id":58054915,"body_markdown":"**Cascading** is about persistence actions involving one object propagating to other objects via an association.\r\n\r\nCascading can apply to a variety of Hibernate actions, and it is typically transitive.  The **&quot;cascade=CascadeType...&quot;** attribute of the annotation that defines the association says what actions should cascade for that association.\r\n\r\n**Cascade = &quot;all&quot;** means to apply all primary cascade types.\r\n\r\nAs of Hibernate 5.3, these types are:\r\n\r\n   - &quot;delete&quot; / &quot;remove&quot;,\r\n   - &quot;detach&quot; / &quot;evict&quot;, \r\n   - &quot;merge&quot;, \r\n   - &quot;lock&quot;,\r\n   - &quot;persist&quot;, \r\n   - &quot;refresh&quot;, \r\n   - &quot;replicate&quot;,\r\n   - &quot;save_update&quot; / &quot;update&quot;\r\n\r\n(Some of those cascade type names are old and/or deprecated.)\r\n\r\nThere are three more compound types:\r\n\r\n - **&quot;all_delete_orphan&quot;** - means the same as &quot;all&quot; plus enabling the deletion of entities that are orphaned by the cascading.\r\n - **&quot;delete_orphan&quot;** - means &quot;delete&quot; plus orphan deletion.\r\n - **&quot;none&quot;** - means no cascading.\r\n\r\n","title":"Hibernate: When should I use Cascade.ALL and when should i specify them separately","body":"<p><strong>Cascading</strong> is about persistence actions involving one object propagating to other objects via an association.</p>\n\n<p>Cascading can apply to a variety of Hibernate actions, and it is typically transitive.  The <strong>\"cascade=CascadeType...\"</strong> attribute of the annotation that defines the association says what actions should cascade for that association.</p>\n\n<p><strong>Cascade = \"all\"</strong> means to apply all primary cascade types.</p>\n\n<p>As of Hibernate 5.3, these types are:</p>\n\n<ul>\n<li>\"delete\" / \"remove\",</li>\n<li>\"detach\" / \"evict\", </li>\n<li>\"merge\", </li>\n<li>\"lock\",</li>\n<li>\"persist\", </li>\n<li>\"refresh\", </li>\n<li>\"replicate\",</li>\n<li>\"save_update\" / \"update\"</li>\n</ul>\n\n<p>(Some of those cascade type names are old and/or deprecated.)</p>\n\n<p>There are three more compound types:</p>\n\n<ul>\n<li><strong>\"all_delete_orphan\"</strong> - means the same as \"all\" plus enabling the deletion of entities that are orphaned by the cascading.</li>\n<li><strong>\"delete_orphan\"</strong> - means \"delete\" plus orphan deletion.</li>\n<li><strong>\"none\"</strong> - means no cascading.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":16747579,"reputation":101,"user_id":12105387,"display_name":"Abhishek Shinde"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1569221398,"creation_date":1569221398,"answer_id":58057000,"question_id":58054915,"body_markdown":"Apart from opinions above, would also like to add following points.\r\nFrom OOPs perspective, we should think in terms of Composition vs Aggregation.\r\nIn java there is no away we can enforce strict relationship between parent and child unlike in DB using FK keys.\r\n\r\nConceptually CASCADE option in hibernate enforces us to maintain this strict relationship.","title":"Hibernate: When should I use Cascade.ALL and when should i specify them separately","body":"<p>Apart from opinions above, would also like to add following points.\nFrom OOPs perspective, we should think in terms of Composition vs Aggregation.\nIn java there is no away we can enforce strict relationship between parent and child unlike in DB using FK keys.</p>\n\n<p>Conceptually CASCADE option in hibernate enforces us to maintain this strict relationship.</p>\n"}],"owner":{"display_name":"user12099587"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11880,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":58056589,"answer_count":4,"score":6,"last_activity_date":1694798594,"creation_date":1569204976,"question_id":58054915,"body_markdown":"I usually annotate my `one-to-many`, `many-to-many` and `many-to-one` relationships with `CascadeType.ALL`, because they provide me with all features I need. But I feel it can lead me to some problems in the future. Is it okay to use `CascadeType.ALL`? What should I be aware of and why should I not use that?","title":"Hibernate: When should I use Cascade.ALL and when should i specify them separately","body":"<p>I usually annotate my <code>one-to-many</code>, <code>many-to-many</code> and <code>many-to-one</code> relationships with <code>CascadeType.ALL</code>, because they provide me with all features I need. But I feel it can lead me to some problems in the future. Is it okay to use <code>CascadeType.ALL</code>? What should I be aware of and why should I not use that?</p>\n"},{"tags":["java","android"],"owner":{"account_id":26337418,"reputation":1,"user_id":19997066,"display_name":"teoder"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":13,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1694798181,"answer_count":0,"score":0,"last_activity_date":1694798232,"creation_date":1694797310,"question_id":77114184,"body_markdown":"i&#39;m trying to get file from file manager in android. In fact, i have this code, that open file manager: \r\n```\r\n Intent getCsv = new Intent(Intent.ACTION_GET_CONTENT);\r\n getCsv.setType(&quot;*/*&quot;);\r\n startActivityForResult(getCsv, 1);\r\n```\r\nBut i don&#39;t know, how can i get the file to variable File file for example. \r\nI can get a uri, but this uri have a very strange path.\r\n\r\n```\r\nprotected void onActivityResult(int requestCode, int resultCode, Intent data)\r\n    {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n        if (requestCode == 1 &amp;&amp; resultCode == Activity.RESULT_OK)\r\n        {\r\n            Uri uriObj = data.getData();\r\n        }\r\n    }\r\n```\r\nFor example, path of uri: `content://com.android.externalstorage.documents/document/primary%3Atests.csv`.\r\nHow can i get a File?\r\n\r\n\r\nI have tried this:\r\n\r\n```\r\nUri uriObj = data.getData();\r\nFile fff = new File(uriObj.getPath());\r\n```\r\nBut file is `&quot;/document/primary:tests.csv&quot;`. The true file: `/storage/emulated/0/tests.csv`","title":"Pick file from storage","body":"<p>i'm trying to get file from file manager in android. In fact, i have this code, that open file manager:</p>\n<pre><code> Intent getCsv = new Intent(Intent.ACTION_GET_CONTENT);\n getCsv.setType(&quot;*/*&quot;);\n startActivityForResult(getCsv, 1);\n</code></pre>\n<p>But i don't know, how can i get the file to variable File file for example.\nI can get a uri, but this uri have a very strange path.</p>\n<pre><code>protected void onActivityResult(int requestCode, int resultCode, Intent data)\n    {\n        super.onActivityResult(requestCode, resultCode, data);\n        if (requestCode == 1 &amp;&amp; resultCode == Activity.RESULT_OK)\n        {\n            Uri uriObj = data.getData();\n        }\n    }\n</code></pre>\n<p>For example, path of uri: <code>content://com.android.externalstorage.documents/document/primary%3Atests.csv</code>.\nHow can i get a File?</p>\n<p>I have tried this:</p>\n<pre><code>Uri uriObj = data.getData();\nFile fff = new File(uriObj.getPath());\n</code></pre>\n<p>But file is <code>&quot;/document/primary:tests.csv&quot;</code>. The true file: <code>/storage/emulated/0/tests.csv</code></p>\n"},{"tags":["java","hibernate","jpa"],"comments":[{"owner":{"display_name":"user177800"},"score":0,"creation_date":1298320868,"post_id":5067619,"comment_id":5679949,"body_markdown":"What database and JDBC driver are you using?","body":"What database and JDBC driver are you using?"}],"answers":[{"comments":[{"owner":{"account_id":33553,"reputation":30834,"user_id":93995,"accept_rate":81,"display_name":"George Armhold"},"score":0,"creation_date":1298302077,"post_id":5067715,"comment_id":5675859,"body_markdown":"Regarding &quot;what kind of processing you&#39;re doing for each row&quot;- if the # of rows is in the millions, I suspect that even a simple object with only an id column is going to cause problems. I too thought about writing my own Iterator that wrapped setFirstResult/setMaxResult, but I figured that this must be a common (and hopefully solved!) issue.","body":"Regarding &quot;what kind of processing you&#39;re doing for each row&quot;- if the # of rows is in the millions, I suspect that even a simple object with only an id column is going to cause problems. I too thought about writing my own Iterator that wrapped setFirstResult/setMaxResult, but I figured that this must be a common (and hopefully solved!) issue."},{"owner":{"account_id":123612,"reputation":48061,"user_id":318174,"accept_rate":71,"display_name":"Adam Gent"},"score":0,"creation_date":1298302540,"post_id":5067715,"comment_id":5675985,"body_markdown":"@Caffeine Coma I posted my Iterator you could probably do some more JPA adapting to it. Tell me if it helps. I ended up not using (did a findAll).","body":"@Caffeine Coma I posted my Iterator you could probably do some more JPA adapting to it. Tell me if it helps. I ended up not using (did a findAll)."}],"tags":[],"owner":{"account_id":123612,"reputation":48061,"user_id":318174,"accept_rate":71,"display_name":"Adam Gent"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1298302930,"creation_date":1298301762,"answer_id":5067715,"question_id":5067619,"body_markdown":"I have wondered this myself. It seems to matter:\r\n\r\n * how big your dataset is (rows)\r\n * what JPA implementation you are using \r\n * what kind of processing you are doing for each row.\r\n\r\nI have written an Iterator to make it easy to swap out both approaches (findAll vs findEntries).\r\n\r\n**I recommend you try both.**\r\n\r\n\tLong count = entityManager().createQuery(&quot;select count(o) from Model o&quot;, Long.class).getSingleResult();\r\n\tChunkIterator&lt;Model&gt; it1 = new ChunkIterator&lt;Model&gt;(count, 2) {\r\n\t\t\r\n\t\t@Override\r\n\t\tpublic Iterator&lt;Model&gt; getChunk(long index, long chunkSize) {\r\n\t\t\t//Do your setFirst and setMax here and return an iterator.\r\n\t\t}\r\n\t\t\r\n\t};\r\n\r\n\tIterator&lt;Model&gt; it2 = List&lt;Model&gt; models = entityManager().createQuery(&quot;from Model m&quot;, Model.class).getResultList().iterator();\r\n\r\n\r\n\tpublic static abstract class ChunkIterator&lt;T&gt; \r\n\t\textends AbstractIterator&lt;T&gt; implements Iterable&lt;T&gt;{\r\n\t\tprivate Iterator&lt;T&gt; chunk;\r\n\t\tprivate Long count;\r\n\t\tprivate long index = 0;\r\n\t\tprivate long chunkSize = 100;\r\n\t\t\r\n\t\tpublic ChunkIterator(Long count, long chunkSize) {\r\n\t\t\tsuper();\r\n\t\t\tthis.count = count;\r\n\t\t\tthis.chunkSize = chunkSize;\r\n\t\t}\r\n\r\n\t\tpublic abstract Iterator&lt;T&gt; getChunk(long index, long chunkSize);\r\n\t\t\r\n\t\t@Override\r\n\t\tpublic Iterator&lt;T&gt; iterator() {\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\t@Override\r\n\t\tprotected T computeNext() {\r\n\t\t\tif (count == 0) return endOfData();\r\n\t\t\tif (chunk != null &amp;&amp; chunk.hasNext() == false &amp;&amp; index &gt;= count) \r\n\t\t\t\treturn endOfData();\r\n\t\t\tif (chunk == null || chunk.hasNext() == false) {\r\n\t\t\t\tchunk = getChunk(index, chunkSize);\r\n\t\t\t\tindex += chunkSize;\r\n\t\t\t}\r\n\t\t\tif (chunk == null || chunk.hasNext() == false) \r\n\t\t\t\treturn endOfData();\r\n\t\t\treturn chunk.next();\r\n\t\t}\r\n\t\t\r\n\t}\r\nI ended up not using my chunk iterator (so it might not be that tested). By the way you will need google collections if you want to use it.","title":"JPA: what is the proper pattern for iterating over large result sets?","body":"<p>I have wondered this myself. It seems to matter:</p>\n\n<ul>\n<li>how big your dataset is (rows)</li>\n<li>what JPA implementation you are using </li>\n<li>what kind of processing you are doing for each row.</li>\n</ul>\n\n<p>I have written an Iterator to make it easy to swap out both approaches (findAll vs findEntries).</p>\n\n<p><strong>I recommend you try both.</strong></p>\n\n<pre><code>Long count = entityManager().createQuery(\"select count(o) from Model o\", Long.class).getSingleResult();\nChunkIterator&lt;Model&gt; it1 = new ChunkIterator&lt;Model&gt;(count, 2) {\n\n    @Override\n    public Iterator&lt;Model&gt; getChunk(long index, long chunkSize) {\n        //Do your setFirst and setMax here and return an iterator.\n    }\n\n};\n\nIterator&lt;Model&gt; it2 = List&lt;Model&gt; models = entityManager().createQuery(\"from Model m\", Model.class).getResultList().iterator();\n\n\npublic static abstract class ChunkIterator&lt;T&gt; \n    extends AbstractIterator&lt;T&gt; implements Iterable&lt;T&gt;{\n    private Iterator&lt;T&gt; chunk;\n    private Long count;\n    private long index = 0;\n    private long chunkSize = 100;\n\n    public ChunkIterator(Long count, long chunkSize) {\n        super();\n        this.count = count;\n        this.chunkSize = chunkSize;\n    }\n\n    public abstract Iterator&lt;T&gt; getChunk(long index, long chunkSize);\n\n    @Override\n    public Iterator&lt;T&gt; iterator() {\n        return this;\n    }\n\n    @Override\n    protected T computeNext() {\n        if (count == 0) return endOfData();\n        if (chunk != null &amp;&amp; chunk.hasNext() == false &amp;&amp; index &gt;= count) \n            return endOfData();\n        if (chunk == null || chunk.hasNext() == false) {\n            chunk = getChunk(index, chunkSize);\n            index += chunkSize;\n        }\n        if (chunk == null || chunk.hasNext() == false) \n            return endOfData();\n        return chunk.next();\n    }\n\n}\n</code></pre>\n\n<p>I ended up not using my chunk iterator (so it might not be that tested). By the way you will need google collections if you want to use it.</p>\n"},{"comments":[{"owner":{"account_id":33553,"reputation":30834,"user_id":93995,"accept_rate":81,"display_name":"George Armhold"},"score":0,"creation_date":1298302397,"post_id":5067783,"comment_id":5675956,"body_markdown":"Quite simply, I need to do something &quot;for each&quot; row. Surely this is a common use case. In the specific case I am working on now, I need to query an external web service that is totally outside of my database, using an id (the PK) from each row. The results are not displayed back to any client web browser, so there is no user interface to speak of. It&#39;s a batch job, in other words.","body":"Quite simply, I need to do something &quot;for each&quot; row. Surely this is a common use case. In the specific case I am working on now, I need to query an external web service that is totally outside of my database, using an id (the PK) from each row. The results are not displayed back to any client web browser, so there is no user interface to speak of. It&#39;s a batch job, in other words."},{"owner":{"account_id":71228,"reputation":1805,"user_id":205943,"accept_rate":65,"display_name":"Dainius"},"score":0,"creation_date":1298304310,"post_id":5067783,"comment_id":5676418,"body_markdown":"If you &quot;need&quot; print id for each row, there is no other way as get each row, get id and print. Best solution depends on what you need to do.","body":"If you &quot;need&quot; print id for each row, there is no other way as get each row, get id and print. Best solution depends on what you need to do."},{"owner":{"account_id":47176,"reputation":33749,"user_id":139595,"accept_rate":88,"display_name":"J&#246;rn Horstmann"},"score":0,"creation_date":1298304616,"post_id":5067783,"comment_id":5676477,"body_markdown":"@Caffeine Coma, if you only need the id of each row then the biggest improvement would probably come from only fetching that column, as `SELECT m.id FROM Model m` and then iterating over a List&lt;Integer&gt;.","body":"@Caffeine Coma, if you only need the id of each row then the biggest improvement would probably come from only fetching that column, as <code>SELECT m.id FROM Model m</code> and then iterating over a List&lt;Integer&gt;."},{"owner":{"account_id":33553,"reputation":30834,"user_id":93995,"accept_rate":81,"display_name":"George Armhold"},"score":1,"creation_date":1298304814,"post_id":5067783,"comment_id":5676515,"body_markdown":"@J&#246;rn Horstmann- if there are millions of rows, will it really matter? My point is that an ArrayList with millions of objects (however small) is not going to be good for the JVM heap.","body":"@J&#246;rn Horstmann- if there are millions of rows, will it really matter? My point is that an ArrayList with millions of objects (however small) is not going to be good for the JVM heap."},{"owner":{"account_id":33553,"reputation":30834,"user_id":93995,"accept_rate":81,"display_name":"George Armhold"},"score":0,"creation_date":1298304994,"post_id":5067783,"comment_id":5676559,"body_markdown":"@Dainius: my question is really: &quot;how can I iterate over each row, without having the whole ArrayList in-memory?&quot; In other words, I&#39;d like an interface for pulling N at a time, where N is significantly smaller than 1 million. :-)","body":"@Dainius: my question is really: &quot;how can I iterate over each row, without having the whole ArrayList in-memory?&quot; In other words, I&#39;d like an interface for pulling N at a time, where N is significantly smaller than 1 million. :-)"},{"owner":{"account_id":155065,"reputation":3396,"user_id":371457,"accept_rate":100,"display_name":"frm"},"score":0,"creation_date":1298305194,"post_id":5067783,"comment_id":5676606,"body_markdown":"In this case, I think the only optimization should be to fetch only the id, as J&#246;rn Horstmann said AND using pagination to query one chunk of data at a time. With these improvements, you should minimize the use of memory (work on data chunks) and the time spent on converting objects (fetch only an Integer instead of an entire object).","body":"In this case, I think the only optimization should be to fetch only the id, as J&#246;rn Horstmann said AND using pagination to query one chunk of data at a time. With these improvements, you should minimize the use of memory (work on data chunks) and the time spent on converting objects (fetch only an Integer instead of an entire object)."},{"owner":{"display_name":"user177800"},"score":0,"creation_date":1298327058,"post_id":5067783,"comment_id":5681255,"body_markdown":"@frm: this will will still take way more time than just using straight JDBC and a server side cursor.","body":"@frm: this will will still take way more time than just using straight JDBC and a server side cursor."},{"owner":{"account_id":71228,"reputation":1805,"user_id":205943,"accept_rate":65,"display_name":"Dainius"},"score":0,"creation_date":1298364150,"post_id":5067783,"comment_id":5685689,"body_markdown":"or maybe will help Query.iterate() http://www.javalobby.org/articles/hibernate-query-101/","body":"or maybe will help Query.iterate() <a href=\"http://www.javalobby.org/articles/hibernate-query-101/\" rel=\"nofollow noreferrer\">javalobby.org/articles/hibernate-query-101</a>"}],"tags":[],"owner":{"account_id":155065,"reputation":3396,"user_id":371457,"accept_rate":100,"display_name":"frm"},"comment_count":8,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1298302073,"creation_date":1298302073,"answer_id":5067783,"question_id":5067619,"body_markdown":"It depends upon the kind of operation you have to do. Why are you looping over a million of row? Are you updating something in batch mode? Are you going to display all records to a client? Are you computing some statistics upon the retrieved entities?\r\n\r\nIf you are going to display a million records to the client, please reconsider your user interface. In this case, the appropriate solution is paginating your results and using `setFirstResult()` and `setMaxResult()`.\r\n\r\nIf you have launched an update of a large amount of records, you&#39;ll better keep the update simple and use `Query.executeUpdate()`. Optionally, you can execute the update in asynchronous mode using a Message-Driven Bean o a Work Manager.\r\n\r\nIf you are computing some statistics upon the retrieved entities, you can take advantage on the grouping functions defined by the JPA specification.\r\n\r\nFor any other case, please be more specific :)","title":"JPA: what is the proper pattern for iterating over large result sets?","body":"<p>It depends upon the kind of operation you have to do. Why are you looping over a million of row? Are you updating something in batch mode? Are you going to display all records to a client? Are you computing some statistics upon the retrieved entities?</p>\n\n<p>If you are going to display a million records to the client, please reconsider your user interface. In this case, the appropriate solution is paginating your results and using <code>setFirstResult()</code> and <code>setMaxResult()</code>.</p>\n\n<p>If you have launched an update of a large amount of records, you'll better keep the update simple and use <code>Query.executeUpdate()</code>. Optionally, you can execute the update in asynchronous mode using a Message-Driven Bean o a Work Manager.</p>\n\n<p>If you are computing some statistics upon the retrieved entities, you can take advantage on the grouping functions defined by the JPA specification.</p>\n\n<p>For any other case, please be more specific :)</p>\n"},{"comments":[{"owner":{"account_id":123612,"reputation":48061,"user_id":318174,"accept_rate":71,"display_name":"Adam Gent"},"score":0,"creation_date":1298302764,"post_id":5067861,"comment_id":5676036,"body_markdown":"The advantage of JPA is being not just database agnostic but the possibility of not even using a traditional database (NoSQL). Its not to hard to do flush/clear every now and then and usually batch operations are done infrequently.","body":"The advantage of JPA is being not just database agnostic but the possibility of not even using a traditional database (NoSQL). Its not to hard to do flush/clear every now and then and usually batch operations are done infrequently."},{"owner":{"account_id":33553,"reputation":30834,"user_id":93995,"accept_rate":81,"display_name":"George Armhold"},"score":1,"creation_date":1298304268,"post_id":5067861,"comment_id":5676410,"body_markdown":"Hi Thomasz. I have plenty of reasons to complain about JPA/Hibernate, but respectfully, I really doubt that they are &quot;not designed to operate on many objects&quot;. I suspect that I just need to learn the proper pattern for this use-case.","body":"Hi Thomasz. I have plenty of reasons to complain about JPA/Hibernate, but respectfully, I really doubt that they are &quot;not designed to operate on many objects&quot;. I suspect that I just need to learn the proper pattern for this use-case."},{"owner":{"account_id":299251,"reputation":335925,"user_id":605744,"accept_rate":100,"display_name":"Tomasz Nurkiewicz"},"score":4,"creation_date":1298308836,"post_id":5067861,"comment_id":5677478,"body_markdown":"Well, I can think only of two patterns: paginations (mentioned several times) and `flush()`/`clear()`. The first one is IMHO not designed for the purposes of batch processing, while using sequence of flush()/clear() smells like *leaky abstraction*.","body":"Well, I can think only of two patterns: paginations (mentioned several times) and <code>flush()</code>/<code>clear()</code>. The first one is IMHO not designed for the purposes of batch processing, while using sequence of flush()/clear() smells like <i>leaky abstraction</i>."},{"owner":{"account_id":33553,"reputation":30834,"user_id":93995,"accept_rate":81,"display_name":"George Armhold"},"score":0,"creation_date":1298383469,"post_id":5067861,"comment_id":5689616,"body_markdown":"Yup, it was a combination of pagination and the flush/clear as you mentioned. Thanks!","body":"Yup, it was a combination of pagination and the flush/clear as you mentioned. Thanks!"}],"tags":[],"owner":{"account_id":299251,"reputation":335925,"user_id":605744,"accept_rate":100,"display_name":"Tomasz Nurkiewicz"},"comment_count":4,"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1298302487,"creation_date":1298302487,"answer_id":5067861,"question_id":5067619,"body_markdown":"To be honest, I would suggest leaving JPA and stick with JDBC (but certainly using `JdbcTemplate` support class or such like). JPA (and other ORM providers/specifications) is not designed to operate on many objects within one transaction as they assume everything loaded should stay in first-level cache (hence the need for `clear()` in JPA).\r\n\r\nAlso I am recommending more low level solution because the overhead of ORM (reflection is only a tip of an iceberg) might be so significant, that iterating over plain `ResultSet`, even using some lightweight support like mentioned `JdbcTemplate` will be much faster.\r\n\r\nJPA is simply not designed to perform operations on a large amount of entities. You might play with `flush()`/`clear()` to avoid `OutOfMemoryError`, but consider this once again. You gain very little paying the price of huge resource consumption.","title":"JPA: what is the proper pattern for iterating over large result sets?","body":"<p>To be honest, I would suggest leaving JPA and stick with JDBC (but certainly using <code>JdbcTemplate</code> support class or such like). JPA (and other ORM providers/specifications) is not designed to operate on many objects within one transaction as they assume everything loaded should stay in first-level cache (hence the need for <code>clear()</code> in JPA).</p>\n\n<p>Also I am recommending more low level solution because the overhead of ORM (reflection is only a tip of an iceberg) might be so significant, that iterating over plain <code>ResultSet</code>, even using some lightweight support like mentioned <code>JdbcTemplate</code> will be much faster.</p>\n\n<p>JPA is simply not designed to perform operations on a large amount of entities. You might play with <code>flush()</code>/<code>clear()</code> to avoid <code>OutOfMemoryError</code>, but consider this once again. You gain very little paying the price of huge resource consumption.</p>\n"},{"comments":[{"owner":{"account_id":12478,"reputation":23673,"user_id":24582,"display_name":"extraneon"},"score":4,"creation_date":1304620585,"post_id":5067919,"comment_id":6793364,"body_markdown":"Pagination is very good for GUI&#39;s. But for processing huge amounts of data the ScrollableResultSet was invented a long time ago. It&#39;s just not in JPA.","body":"Pagination is very good for GUI&#39;s. But for processing huge amounts of data the ScrollableResultSet was invented a long time ago. It&#39;s just not in JPA."}],"tags":[],"owner":{"account_id":159523,"reputation":12477,"user_id":378968,"accept_rate":87,"display_name":"Dead Programmer"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1298302834,"creation_date":1298302834,"answer_id":5067919,"question_id":5067619,"body_markdown":"Use `Pagination` Concept for retrieving result ","title":"JPA: what is the proper pattern for iterating over large result sets?","body":"<p>Use <code>Pagination</code> Concept for retrieving result </p>\n"},{"comments":[{"owner":{"account_id":33553,"reputation":30834,"user_id":93995,"accept_rate":81,"display_name":"George Armhold"},"score":1,"creation_date":1298306932,"post_id":5068542,"comment_id":5677048,"body_markdown":"So you&#39;re saying that no company ever needs to visit every row of their users table? Their programmers just throw Hibernate out the window when it comes time to do this?  &quot;*there is no way to process hundreds of thousands of rows*&quot;- in my question I pointed out setFirstResult/setMaxResult, so clearly there *is* a way.  I&#39;m asking if there is a better one.","body":"So you&#39;re saying that no company ever needs to visit every row of their users table? Their programmers just throw Hibernate out the window when it comes time to do this?  &quot;<i>there is no way to process hundreds of thousands of rows</i>&quot;- in my question I pointed out setFirstResult/setMaxResult, so clearly there <i>is</i> a way.  I&#39;m asking if there is a better one."},{"owner":{"account_id":33553,"reputation":30834,"user_id":93995,"accept_rate":81,"display_name":"George Armhold"},"score":0,"creation_date":1298307089,"post_id":5068542,"comment_id":5677079,"body_markdown":"*&quot;Pulling a million of anything, even into a simple List&lt;Integer&gt; is not going to be very efficient regardless of how you do it.&quot;* That is exactly my point. I&#39;m asking how *not* to create the giant list, but rather to iterate over a result set.","body":"<i>&quot;Pulling a million of anything, even into a simple List&lt;Integer&gt; is not going to be very efficient regardless of how you do it.&quot;</i> That is exactly my point. I&#39;m asking how <i>not</i> to create the giant list, but rather to iterate over a result set."},{"owner":{"display_name":"user177800"},"score":0,"creation_date":1298320622,"post_id":5068542,"comment_id":5679901,"body_markdown":"Use a simple straight JDBC select statement with a FORWARD_ONLY READ_ONLY with a SERVER_SIDE cursor as I suggested in my answer. How to make JDBC use a SERVER_SIDE cursor is database driver dependent.","body":"Use a simple straight JDBC select statement with a FORWARD_ONLY READ_ONLY with a SERVER_SIDE cursor as I suggested in my answer. How to make JDBC use a SERVER_SIDE cursor is database driver dependent."},{"owner":{"display_name":"user177800"},"score":0,"creation_date":1298392097,"post_id":5068542,"comment_id":5691919,"body_markdown":"Visiting every &quot;row&quot; in a table is just what JDBC is designed to do. JPA is designed to create one or more Objects from each row in a table, completely different semantics and uses. JPA is a dump truck for hauling around objects, you want performance you use a Sports Car. So yes, developers with large scale data manipulation &quot;throw out the ORM and hit the metal with straight JDBC&quot;. Experience has taught me to use the right tool for the right job, and experience teaches you what those tools are.","body":"Visiting every &quot;row&quot; in a table is just what JDBC is designed to do. JPA is designed to create one or more Objects from each row in a table, completely different semantics and uses. JPA is a dump truck for hauling around objects, you want performance you use a Sports Car. So yes, developers with large scale data manipulation &quot;throw out the ORM and hit the metal with straight JDBC&quot;. Experience has taught me to use the right tool for the right job, and experience teaches you what those tools are."},{"owner":{"account_id":12478,"reputation":23673,"user_id":24582,"display_name":"extraneon"},"score":1,"creation_date":1304620737,"post_id":5068542,"comment_id":6793393,"body_markdown":"I fully agree with the answer. The best solution is dependent on the problem. If the problem is loading a few entities easily JPA is good. If the problem is using huge amounts of data efficiently direct JDBC is better.","body":"I fully agree with the answer. The best solution is dependent on the problem. If the problem is loading a few entities easily JPA is good. If the problem is using huge amounts of data efficiently direct JDBC is better."},{"owner":{"account_id":112092,"reputation":1455,"user_id":295802,"accept_rate":64,"display_name":"Mark Bennett"},"score":4,"creation_date":1328142026,"post_id":5068542,"comment_id":11437952,"body_markdown":"Scanning through millions of records is common for a number of reasons, for example indexing them into a search engine.  And although I agree that JDBC is normally a more direct route, you sometimes walk into a project that already has very complex business logic bundled up in a Hibernate layer.  If you bypass it and go to JDBC, you bypass the business logic, which is sometimes non-trivial to re-implement and maintain. When folks post questions about atypical use cases they often know it&#39;s a bit weird, but may be inheriting something vs. building from scratch, and maybe can&#39;t disclose details.","body":"Scanning through millions of records is common for a number of reasons, for example indexing them into a search engine.  And although I agree that JDBC is normally a more direct route, you sometimes walk into a project that already has very complex business logic bundled up in a Hibernate layer.  If you bypass it and go to JDBC, you bypass the business logic, which is sometimes non-trivial to re-implement and maintain. When folks post questions about atypical use cases they often know it&#39;s a bit weird, but may be inheriting something vs. building from scratch, and maybe can&#39;t disclose details."},{"owner":{"account_id":320703,"reputation":4309,"user_id":639119,"display_name":"Zds"},"score":0,"creation_date":1328873170,"post_id":5068542,"comment_id":11619005,"body_markdown":"Bypassing the ORM can be hazardous if you use caching. If you mainly use DB via EJB3, bypassing it can cause lot of unnecessary headache due to caching.","body":"Bypassing the ORM can be hazardous if you use caching. If you mainly use DB via EJB3, bypassing it can cause lot of unnecessary headache due to caching."},{"owner":{"account_id":279220,"reputation":2393,"user_id":574263,"accept_rate":44,"display_name":"mjaggard"},"score":1,"creation_date":1654687042,"post_id":5068542,"comment_id":128148997,"body_markdown":"I think there is a &quot;proper&quot; way now. https://stackoverflow.com/a/69486331/574263","body":"I think there is a &quot;proper&quot; way now. <a href=\"https://stackoverflow.com/a/69486331/574263\">stackoverflow.com/a/69486331/574263</a>"}],"tags":[],"owner":{"display_name":"user177800"},"comment_count":8,"down_vote_count":2,"up_vote_count":7,"is_accepted":false,"score":5,"last_activity_date":1298391200,"creation_date":1298306040,"answer_id":5068542,"question_id":5067619,"body_markdown":"There is no &quot;proper&quot; what to do this, this isn&#39;t what JPA or JDO or any other ORM is intended to do, straight JDBC will be your best alternative, as you can configure it to bring back a small number of rows at a time and flush them as they are used, that is why server side cursors exist.\r\n\r\nORM tools are not designed for bulk processing, they are designed to let you manipulate objects and attempt to make the RDBMS that the data is stored in be as transparent as possible, most fail at the transparent part at least to some degree. At this scale, there is no way to process hundreds of thousands of rows ( Objects ), much less millions with any ORM and have it execute in any reasonable amount of time because of the object instantiation overhead, plain and simple. \r\n\r\nUse the appropriate tool. Straight JDBC and Stored Procedures definitely have a place in 2011, especially at what they are better at doing versus these ORM frameworks.\r\n\r\nPulling a million of anything, even into a simple `List&lt;Integer&gt;` is not going to be very efficient regardless of how you do it. The correct way to do what you are asking is a simple `SELECT id FROM table`, set to `SERVER SIDE` ( vendor dependent ) and the cursor to `FORWARD_ONLY READ-ONLY` and iterate over that.\r\n\r\nIf you are really pulling millions of id&#39;s to process by calling some web server with each one, you are going to have to do some concurrent processing as well for this to run in any reasonable amount of time. Pulling with a JDBC cursor and placing a few of them at a time in a [ConcurrentLinkedQueue][1] and having a small pool of threads  ( # CPU/Cores + 1 ) pull and process them is the only way to complete your task on a machine with any &quot;normal&quot; amount of RAM, given you are already running out of memory.\r\n\r\nSee this [answer][2] as well.\r\n\r\n\r\n  [1]: http://download.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentLinkedQueue.html\r\n  [2]: https://stackoverflow.com/questions/5047394/fast-way-to-get-results-in-hibernate","title":"JPA: what is the proper pattern for iterating over large result sets?","body":"<p>There is no \"proper\" what to do this, this isn't what JPA or JDO or any other ORM is intended to do, straight JDBC will be your best alternative, as you can configure it to bring back a small number of rows at a time and flush them as they are used, that is why server side cursors exist.</p>\n\n<p>ORM tools are not designed for bulk processing, they are designed to let you manipulate objects and attempt to make the RDBMS that the data is stored in be as transparent as possible, most fail at the transparent part at least to some degree. At this scale, there is no way to process hundreds of thousands of rows ( Objects ), much less millions with any ORM and have it execute in any reasonable amount of time because of the object instantiation overhead, plain and simple. </p>\n\n<p>Use the appropriate tool. Straight JDBC and Stored Procedures definitely have a place in 2011, especially at what they are better at doing versus these ORM frameworks.</p>\n\n<p>Pulling a million of anything, even into a simple <code>List&lt;Integer&gt;</code> is not going to be very efficient regardless of how you do it. The correct way to do what you are asking is a simple <code>SELECT id FROM table</code>, set to <code>SERVER SIDE</code> ( vendor dependent ) and the cursor to <code>FORWARD_ONLY READ-ONLY</code> and iterate over that.</p>\n\n<p>If you are really pulling millions of id's to process by calling some web server with each one, you are going to have to do some concurrent processing as well for this to run in any reasonable amount of time. Pulling with a JDBC cursor and placing a few of them at a time in a <a href=\"http://download.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentLinkedQueue.html\" rel=\"nofollow noreferrer\">ConcurrentLinkedQueue</a> and having a small pool of threads  ( # CPU/Cores + 1 ) pull and process them is the only way to complete your task on a machine with any \"normal\" amount of RAM, given you are already running out of memory.</p>\n\n<p>See this <a href=\"https://stackoverflow.com/questions/5047394/fast-way-to-get-results-in-hibernate\">answer</a> as well.</p>\n"},{"comments":[{"owner":{"account_id":658880,"reputation":6056,"user_id":1354879,"display_name":"Balazs Zsoldos"},"score":36,"creation_date":1352992971,"post_id":5071436,"comment_id":18306722,"body_markdown":"I think the example is not safe if there are new inserts during the batch process. The user must order based on a column where it is sure that newly inserted data will be on the end of the result list.","body":"I think the example is not safe if there are new inserts during the batch process. The user must order based on a column where it is sure that newly inserted data will be on the end of the result list."},{"owner":{"account_id":9346423,"reputation":1452,"user_id":6937584,"display_name":"cdalxndr"},"score":0,"creation_date":1589309544,"post_id":5071436,"comment_id":109241486,"body_markdown":"when the current page is the last page and has fewer than 100 elements checking `size() == 100` instead will skip one additional query that returns empty list","body":"when the current page is the last page and has fewer than 100 elements checking <code>size() == 100</code> instead will skip one additional query that returns empty list"},{"owner":{"account_id":279220,"reputation":2393,"user_id":574263,"accept_rate":44,"display_name":"mjaggard"},"score":0,"creation_date":1654687061,"post_id":5071436,"comment_id":128149008,"body_markdown":"No longer only for Hibernate: https://stackoverflow.com/a/69486331/574263","body":"No longer only for Hibernate: <a href=\"https://stackoverflow.com/a/69486331/574263\">stackoverflow.com/a/69486331/574263</a>"}],"tags":[],"owner":{"account_id":33553,"reputation":30834,"user_id":93995,"accept_rate":81,"display_name":"George Armhold"},"comment_count":3,"down_vote_count":1,"up_vote_count":59,"is_accepted":true,"score":58,"last_activity_date":1430212418,"creation_date":1298323453,"answer_id":5071436,"question_id":5067619,"body_markdown":"Page 537 of [Java Persistence with Hibernate][1] gives a solution using `ScrollableResults`, but alas it&#39;s only for Hibernate.  \r\n\r\nSo it seems that using `setFirstResult`/`setMaxResults` and manual iteration really is necessary. Here&#39;s my solution using JPA:\r\n\r\n    private List&lt;Model&gt; getAllModelsIterable(int offset, int max)\r\n    {\r\n        return entityManager.createQuery(&quot;from Model m&quot;, Model.class).setFirstResult(offset).setMaxResults(max).getResultList();\r\n    }\r\n\r\nthen, use it like this:\r\n\r\n    private void iterateAll()\r\n    {\r\n        int offset = 0;\r\n\r\n        List&lt;Model&gt; models;\r\n        while ((models = Model.getAllModelsIterable(offset, 100)).size() &gt; 0)\r\n        {\r\n            entityManager.getTransaction().begin();\r\n            for (Model model : models)\r\n            {\r\n                log.info(&quot;do something with model: &quot; + model.getId());\r\n            }\r\n\r\n            entityManager.flush();\r\n            entityManager.clear();\r\n            em.getTransaction().commit();\r\n            offset += models.size();\r\n        }\r\n    }\r\n\r\n\r\n  [1]: http://www.amazon.com/Java-Persistence-Hibernate-Christian-Bauer/dp/1932394885","title":"JPA: what is the proper pattern for iterating over large result sets?","body":"<p>Page 537 of <a href=\"https://rads.stackoverflow.com/amzn/click/com/1932394885\" rel=\"noreferrer\" rel=\"nofollow noreferrer\">Java Persistence with Hibernate</a> gives a solution using <code>ScrollableResults</code>, but alas it's only for Hibernate.  </p>\n\n<p>So it seems that using <code>setFirstResult</code>/<code>setMaxResults</code> and manual iteration really is necessary. Here's my solution using JPA:</p>\n\n<pre><code>private List&lt;Model&gt; getAllModelsIterable(int offset, int max)\n{\n    return entityManager.createQuery(\"from Model m\", Model.class).setFirstResult(offset).setMaxResults(max).getResultList();\n}\n</code></pre>\n\n<p>then, use it like this:</p>\n\n<pre><code>private void iterateAll()\n{\n    int offset = 0;\n\n    List&lt;Model&gt; models;\n    while ((models = Model.getAllModelsIterable(offset, 100)).size() &gt; 0)\n    {\n        entityManager.getTransaction().begin();\n        for (Model model : models)\n        {\n            log.info(\"do something with model: \" + model.getId());\n        }\n\n        entityManager.flush();\n        entityManager.clear();\n        em.getTransaction().commit();\n        offset += models.size();\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":33553,"reputation":30834,"user_id":93995,"accept_rate":81,"display_name":"George Armhold"},"score":17,"creation_date":1298331615,"post_id":5071761,"comment_id":5682054,"body_markdown":"Thanks. Good to know someone is doing billions of rows through Hibernate.  Some folks here are claiming it&#39;s impossible. :-)","body":"Thanks. Good to know someone is doing billions of rows through Hibernate.  Some folks here are claiming it&#39;s impossible. :-)"},{"owner":{"account_id":15387,"reputation":63718,"user_id":32453,"accept_rate":92,"display_name":"rogerdpack"},"score":2,"creation_date":1467407362,"post_id":5071761,"comment_id":63737105,"body_markdown":"Possible to add an example here as well? I assume it&#39;s similar to Zds&#39;s example?","body":"Possible to add an example here as well? I assume it&#39;s similar to Zds&#39;s example?"}],"tags":[],"owner":{"account_id":311422,"reputation":1687,"user_id":625001,"display_name":"Cyberax"},"comment_count":2,"down_vote_count":0,"up_vote_count":32,"is_accepted":false,"score":32,"last_activity_date":1319183685,"creation_date":1298325624,"answer_id":5071761,"question_id":5067619,"body_markdown":"You can&#39;t really do this in straight JPA, however Hibernate has support for stateless sessions and scrollable result sets.\r\n\r\nWe routinely process **billions** of rows with its help.\r\n\r\nHere is a link to documentation: http://docs.jboss.org/hibernate/core/3.3/reference/en/html/batch.html#batch-statelesssession","title":"JPA: what is the proper pattern for iterating over large result sets?","body":"<p>You can't really do this in straight JPA, however Hibernate has support for stateless sessions and scrollable result sets.</p>\n\n<p>We routinely process <strong>billions</strong> of rows with its help.</p>\n\n<p>Here is a link to documentation: <a href=\"http://docs.jboss.org/hibernate/core/3.3/reference/en/html/batch.html#batch-statelesssession\" rel=\"noreferrer\">http://docs.jboss.org/hibernate/core/3.3/reference/en/html/batch.html#batch-statelesssession</a></p>\n"},{"comments":[{"owner":{"account_id":112092,"reputation":1455,"user_id":295802,"accept_rate":64,"display_name":"Mark Bennett"},"score":2,"creation_date":1328141560,"post_id":5182888,"comment_id":11437847,"body_markdown":"Hi Zds, your use case of scanning millions of rows is certainly common for me, and THANK YOU for posting the final code.  In my case I&#39;m shoving records into Solr, to index them for fulltext search.  And, due to business rules I won&#39;t go into, I need to go via Hibernate, vs. just using JDBC or Solr&#39;s built-in modules.","body":"Hi Zds, your use case of scanning millions of rows is certainly common for me, and THANK YOU for posting the final code.  In my case I&#39;m shoving records into Solr, to index them for fulltext search.  And, due to business rules I won&#39;t go into, I need to go via Hibernate, vs. just using JDBC or Solr&#39;s built-in modules."},{"owner":{"account_id":320703,"reputation":4309,"user_id":639119,"display_name":"Zds"},"score":0,"creation_date":1334064830,"post_id":5182888,"comment_id":12921601,"body_markdown":"Happy to help :-). We are also dealing with large data sets, in this case allowing user to query all street names within the same city/county, or sometimes even state, so creating indices requires reading lot of data.","body":"Happy to help :-). We are also dealing with large data sets, in this case allowing user to query all street names within the same city/county, or sometimes even state, so creating indices requires reading lot of data."},{"owner":{"account_id":15387,"reputation":63718,"user_id":32453,"accept_rate":92,"display_name":"rogerdpack"},"score":0,"creation_date":1467408661,"post_id":5182888,"comment_id":63737532,"body_markdown":"Appears with MySQL you really do have to go through all those hoops: http://stackoverflow.com/a/20900045/32453 (other DB&#39;s might be less stringent I&#39;d imagine...)","body":"Appears with MySQL you really do have to go through all those hoops: <a href=\"http://stackoverflow.com/a/20900045/32453\">stackoverflow.com/a/20900045/32453</a> (other DB&#39;s might be less stringent I&#39;d imagine...)"}],"tags":[],"owner":{"account_id":320703,"reputation":4309,"user_id":639119,"display_name":"Zds"},"comment_count":3,"down_vote_count":0,"up_vote_count":44,"is_accepted":false,"score":44,"last_activity_date":1441615347,"creation_date":1299166526,"answer_id":5182888,"question_id":5067619,"body_markdown":"I tried the answers presented here, but JBoss 5.1 + MySQL Connector/J 5.1.15 + Hibernate 3.3.2 didn&#39;t work with those. We&#39;ve just migrated from JBoss 4.x to JBoss 5.1, so we&#39;ve stuck with it for now, and thus the latest Hibernate we can use is 3.3.2.\r\n\r\nAdding couple of extra parameters did the job, and code like this runs without OOMEs:\r\n\r\n\r\n            StatelessSession session = ((Session) entityManager.getDelegate()).getSessionFactory().openStatelessSession();\r\n            \r\n            Query query = session\r\n                    .createQuery(&quot;SELECT a FROM Address a WHERE .... ORDER BY a.id&quot;);\r\n            query.setFetchSize(Integer.valueOf(1000));\r\n            query.setReadOnly(true);\r\n            query.setLockMode(&quot;a&quot;, LockMode.NONE);\r\n            ScrollableResults results = query.scroll(ScrollMode.FORWARD_ONLY);\r\n            while (results.next()) {\r\n                Address addr = (Address) results.get(0);\r\n                // Do stuff\r\n            }\r\n            results.close();\r\n            session.close();\r\n\r\n\r\nThe crucial lines are the query parameters between createQuery and scroll. Without them the &quot;scroll&quot; call tries to load everything into memory and either never finishes or runs to OutOfMemoryError.","title":"JPA: what is the proper pattern for iterating over large result sets?","body":"<p>I tried the answers presented here, but JBoss 5.1 + MySQL Connector/J 5.1.15 + Hibernate 3.3.2 didn't work with those. We've just migrated from JBoss 4.x to JBoss 5.1, so we've stuck with it for now, and thus the latest Hibernate we can use is 3.3.2.</p>\n\n<p>Adding couple of extra parameters did the job, and code like this runs without OOMEs:</p>\n\n<pre><code>        StatelessSession session = ((Session) entityManager.getDelegate()).getSessionFactory().openStatelessSession();\n\n        Query query = session\n                .createQuery(\"SELECT a FROM Address a WHERE .... ORDER BY a.id\");\n        query.setFetchSize(Integer.valueOf(1000));\n        query.setReadOnly(true);\n        query.setLockMode(\"a\", LockMode.NONE);\n        ScrollableResults results = query.scroll(ScrollMode.FORWARD_ONLY);\n        while (results.next()) {\n            Address addr = (Address) results.get(0);\n            // Do stuff\n        }\n        results.close();\n        session.close();\n</code></pre>\n\n<p>The crucial lines are the query parameters between createQuery and scroll. Without them the \"scroll\" call tries to load everything into memory and either never finishes or runs to OutOfMemoryError.</p>\n"},{"comments":[{"owner":{"account_id":1267027,"reputation":2073,"user_id":1224138,"accept_rate":27,"display_name":"Danger"},"score":1,"creation_date":1385511799,"post_id":14113471,"comment_id":30171316,"body_markdown":"-2 downvotes - would the next downvoter please defend your downvote?","body":"-2 downvotes - would the next downvoter please defend your downvote?"},{"owner":{"account_id":3230275,"reputation":700,"user_id":2725716,"accept_rate":80,"display_name":"jdessey"},"score":1,"creation_date":1404846190,"post_id":14113471,"comment_id":38190659,"body_markdown":"I thought the same thing while reading these.  The question indicates a high volume batch job with no UI .  Assuming that you do not need app server specific resources, why use an app server at all?  Stored procedure would be much more efficient.","body":"I thought the same thing while reading these.  The question indicates a high volume batch job with no UI .  Assuming that you do not need app server specific resources, why use an app server at all?  Stored procedure would be much more efficient."},{"owner":{"account_id":87230,"reputation":36826,"user_id":242042,"accept_rate":57,"display_name":"Archimedes Trajano"},"score":0,"creation_date":1443651989,"post_id":14113471,"comment_id":53584485,"body_markdown":"@jdessey Depending on the situation, let&#39;s say we have an import facility where on import it should do something with some other part of the system e.g. add rows to another table based on some business rules that have been coded already as an EJB.  Then running in an app server would make more sense, unless you can get the EJB to run in an embedded mode.","body":"@jdessey Depending on the situation, let&#39;s say we have an import facility where on import it should do something with some other part of the system e.g. add rows to another table based on some business rules that have been coded already as an EJB.  Then running in an app server would make more sense, unless you can get the EJB to run in an embedded mode."}],"tags":[],"owner":{"account_id":1267027,"reputation":2073,"user_id":1224138,"accept_rate":27,"display_name":"Danger"},"comment_count":3,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1360447683,"creation_date":1357068228,"answer_id":14113471,"question_id":5067619,"body_markdown":"I was surprised to see that the use of stored procedures was not more prominent in the answers here.  In the past when I&#39;ve had to do something like this, I create a stored procedure that processes data in small chunks, then sleeps for a bit, then continues.  The reason for the sleeping is to not overwhelm the database which is presumably also being used for more real time types of queries, such as being connected to a web site.  If there is no one else using the database, then you can leave out the sleep.  If you need to ensure that you process each record once and only once, then you will need to create an additional table (or field) to store which records you have processed in order to be resilient across restarts.\r\n\r\nThe performance savings here are significant, possibly orders of magnitude faster than anything you could do in JPA/Hibernate/AppServer land, and your database server will most likely have its own server side cursor type of mechanism for processing large result sets efficiently.  The performance savings come from not having to ship the data from the database server to the application server, where you process the data, and then ship it back.\r\n\r\nThere are some significant downsides to using stored procedures which may completely rule this out for you, but if you&#39;ve got that skill in your personal toolbox and can use it in this kind of situation, you can knock out these kinds of things fairly quickly.","title":"JPA: what is the proper pattern for iterating over large result sets?","body":"<p>I was surprised to see that the use of stored procedures was not more prominent in the answers here.  In the past when I've had to do something like this, I create a stored procedure that processes data in small chunks, then sleeps for a bit, then continues.  The reason for the sleeping is to not overwhelm the database which is presumably also being used for more real time types of queries, such as being connected to a web site.  If there is no one else using the database, then you can leave out the sleep.  If you need to ensure that you process each record once and only once, then you will need to create an additional table (or field) to store which records you have processed in order to be resilient across restarts.</p>\n\n<p>The performance savings here are significant, possibly orders of magnitude faster than anything you could do in JPA/Hibernate/AppServer land, and your database server will most likely have its own server side cursor type of mechanism for processing large result sets efficiently.  The performance savings come from not having to ship the data from the database server to the application server, where you process the data, and then ship it back.</p>\n\n<p>There are some significant downsides to using stored procedures which may completely rule this out for you, but if you've got that skill in your personal toolbox and can use it in this kind of situation, you can knock out these kinds of things fairly quickly.</p>\n"},{"comments":[{"owner":{"account_id":1609700,"reputation":566,"user_id":1489056,"accept_rate":75,"display_name":"Edi Bice"},"score":0,"creation_date":1467993152,"post_id":14709533,"comment_id":63961001,"body_markdown":"I gave your code a try but still get OOM - it appears all T objects (and all joined table objects referred from T) are never GC. Profiling shows them being referred to from &quot;table&quot; in org.eclipse.persistence.internal.sessions.RepeatableWriteUnitOfWork along with org.eclipse.persistence.internal.identitymaps.CacheKey. I looked into cache and my settings are all default (Disable Selective, Weak with Soft Subcache, Cache Size 100, Drop Invalidate). I will look into disabling sessions and see if it helps. BTW I simply iterate over return cursor using &quot;for (T o: results)&quot;.","body":"I gave your code a try but still get OOM - it appears all T objects (and all joined table objects referred from T) are never GC. Profiling shows them being referred to from &quot;table&quot; in org.eclipse.persistence.internal.sessions.RepeatableWriteUni&zwnj;&#8203;tOfWork along with org.eclipse.persistence.internal.identitymaps.CacheKey. I looked into cache and my settings are all default (Disable Selective, Weak with Soft Subcache, Cache Size 100, Drop Invalidate). I will look into disabling sessions and see if it helps. BTW I simply iterate over return cursor using &quot;for (T o: results)&quot;."},{"owner":{"display_name":"user1270589"},"score":0,"creation_date":1540255803,"post_id":14709533,"comment_id":92788019,"body_markdown":"Badum tssssssss","body":"Badum tssssssss"}],"tags":[],"owner":{"account_id":2284006,"reputation":81,"user_id":2008477,"display_name":"Filippo Rossoni"},"comment_count":2,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1360680005,"creation_date":1360073615,"answer_id":14709533,"question_id":5067619,"body_markdown":"If you use EclipseLink I&#39; using this method to get result as Iterable\r\n\r\n\r\n    private static &lt;T&gt; Iterable&lt;T&gt; getResult(TypedQuery&lt;T&gt; query)\r\n    {\r\n      //eclipseLink\r\n      if(query instanceof JpaQuery) {\r\n        JpaQuery&lt;T&gt; jQuery = (JpaQuery&lt;T&gt;) query;\r\n        jQuery.setHint(QueryHints.RESULT_SET_TYPE, ResultSetType.ForwardOnly)\r\n           .setHint(QueryHints.SCROLLABLE_CURSOR, true);\r\n      \r\n        final Cursor cursor = jQuery.getResultCursor();\r\n        return new Iterable&lt;T&gt;()\r\n        {     \r\n          @SuppressWarnings(&quot;unchecked&quot;)\r\n          @Override\r\n          public Iterator&lt;T&gt; iterator()\r\n          {\r\n            return cursor;\r\n          }\r\n        }; \r\n       }\r\n      return query.getResultList();  \r\n    }  \r\n      \r\nclose Method\r\n\r\n    static void closeCursor(Iterable&lt;?&gt; list)\r\n    {\r\n      if (list.iterator() instanceof Cursor)\r\n        {\r\n          ((Cursor) list.iterator()).close();\r\n        }\r\n    }","title":"JPA: what is the proper pattern for iterating over large result sets?","body":"<p>If you use EclipseLink I' using this method to get result as Iterable</p>\n\n<pre><code>private static &lt;T&gt; Iterable&lt;T&gt; getResult(TypedQuery&lt;T&gt; query)\n{\n  //eclipseLink\n  if(query instanceof JpaQuery) {\n    JpaQuery&lt;T&gt; jQuery = (JpaQuery&lt;T&gt;) query;\n    jQuery.setHint(QueryHints.RESULT_SET_TYPE, ResultSetType.ForwardOnly)\n       .setHint(QueryHints.SCROLLABLE_CURSOR, true);\n\n    final Cursor cursor = jQuery.getResultCursor();\n    return new Iterable&lt;T&gt;()\n    {     \n      @SuppressWarnings(\"unchecked\")\n      @Override\n      public Iterator&lt;T&gt; iterator()\n      {\n        return cursor;\n      }\n    }; \n   }\n  return query.getResultList();  \n}  \n</code></pre>\n\n<p>close Method</p>\n\n<pre><code>static void closeCursor(Iterable&lt;?&gt; list)\n{\n  if (list.iterator() instanceof Cursor)\n    {\n      ((Cursor) list.iterator()).close();\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1518645,"reputation":381,"user_id":1418999,"display_name":"krevelen"},"score":0,"creation_date":1473851830,"post_id":19405622,"comment_id":66295767,"body_markdown":"Hi @Marcin, can you or anyone else provide a link to example code applying this chunked and id-first stepwise approach, preferably using Java8 streams?","body":"Hi @Marcin, can you or anyone else provide a link to example code applying this chunked and id-first stepwise approach, preferably using Java8 streams?"}],"tags":[],"owner":{"account_id":1158229,"reputation":105,"user_id":1138285,"display_name":"Marcin Cinik"},"comment_count":1,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1381932325,"creation_date":1381932325,"answer_id":19405622,"question_id":5067619,"body_markdown":"You can use another &quot;trick&quot;. Load only collection of identifiers of the entities you&#39;re interested in. Say identifier is of type long=8bytes, then 10^6 a list of such identifiers makes around 8Mb. If it is a batch process (one instance at a time), then it&#39;s bearable. Then just iterate and do the job.\r\n\r\nOne another remark - you should anyway do this in chunks - especially if you modify records, otherwise **rollback segment** in database will grow.\r\n\r\nWhen it comes to set firstResult/maxRows strategy - it will be **VERY VERY** slow for results far from the top.\r\n\r\nAlso take into consideration that the database is probably operating in **read commited isolation**, so to avoid phantom reads load identifiers and then load entities one by one (or 10 by 10 or whatever).","title":"JPA: what is the proper pattern for iterating over large result sets?","body":"<p>You can use another \"trick\". Load only collection of identifiers of the entities you're interested in. Say identifier is of type long=8bytes, then 10^6 a list of such identifiers makes around 8Mb. If it is a batch process (one instance at a time), then it's bearable. Then just iterate and do the job.</p>\n\n<p>One another remark - you should anyway do this in chunks - especially if you modify records, otherwise <strong>rollback segment</strong> in database will grow.</p>\n\n<p>When it comes to set firstResult/maxRows strategy - it will be <strong>VERY VERY</strong> slow for results far from the top.</p>\n\n<p>Also take into consideration that the database is probably operating in <strong>read commited isolation</strong>, so to avoid phantom reads load identifiers and then load entities one by one (or 10 by 10 or whatever).</p>\n"},{"tags":[],"owner":{"account_id":254543,"reputation":106,"user_id":534022,"display_name":"Larry Chu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1391055559,"creation_date":1391055559,"answer_id":21447735,"question_id":5067619,"body_markdown":"With hibernate there are 4 different ways to achieve what you want. Each has design tradeoffs, limitations, and consequences. I suggest exploring each and deciding which is right for your situation.\r\n\r\n1. Use stateless session with scroll()\r\n2. Use session.clear() after every iteration. When other entities need to be attached, then load them in a separate session. effectively the first session is emulating the stateless session, but retaining all the features of a stateful session, until the objects are detached.\r\n3. Use iterate() or list() but get only ids in the first query, then in a separate session in each iteration, do session.load and close the session at the end of the iteration.\r\n4. Use Query.iterate() with EntityManager.detach() aka Session.evict();\r\n","title":"JPA: what is the proper pattern for iterating over large result sets?","body":"<p>With hibernate there are 4 different ways to achieve what you want. Each has design tradeoffs, limitations, and consequences. I suggest exploring each and deciding which is right for your situation.</p>\n\n<ol>\n<li>Use stateless session with scroll()</li>\n<li>Use session.clear() after every iteration. When other entities need to be attached, then load them in a separate session. effectively the first session is emulating the stateless session, but retaining all the features of a stateful session, until the objects are detached.</li>\n<li>Use iterate() or list() but get only ids in the first query, then in a separate session in each iteration, do session.load and close the session at the end of the iteration.</li>\n<li>Use Query.iterate() with EntityManager.detach() aka Session.evict();</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":87230,"reputation":36826,"user_id":242042,"accept_rate":57,"display_name":"Archimedes Trajano"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1443653003,"creation_date":1443653003,"answer_id":32876734,"question_id":5067619,"body_markdown":"To expand on @Tomasz Nurkiewicz&#39;s answer.  You have access to the `DataSource` which in turn can provide you with a connection\r\n\r\n    @Resource(name = &quot;myDataSource&quot;,\r\n        lookup = &quot;java:comp/DefaultDataSource&quot;)\r\n    private DataSource myDataSource;\r\n\r\nIn your code you have \r\n\r\n    try (Connection connection = myDataSource.getConnection()) {\r\n        // raw jdbc operations\r\n    }\r\n\r\nThis will allow you to bypass JPA for some specific large batch operations like import/export, however you still have access to the entity manager for other JPA operations if you need it.","title":"JPA: what is the proper pattern for iterating over large result sets?","body":"<p>To expand on @Tomasz Nurkiewicz's answer.  You have access to the <code>DataSource</code> which in turn can provide you with a connection</p>\n\n<pre><code>@Resource(name = \"myDataSource\",\n    lookup = \"java:comp/DefaultDataSource\")\nprivate DataSource myDataSource;\n</code></pre>\n\n<p>In your code you have </p>\n\n<pre><code>try (Connection connection = myDataSource.getConnection()) {\n    // raw jdbc operations\n}\n</code></pre>\n\n<p>This will allow you to bypass JPA for some specific large batch operations like import/export, however you still have access to the entity manager for other JPA operations if you need it.</p>\n"},{"tags":[],"owner":{"account_id":113601,"reputation":1330,"user_id":299109,"accept_rate":55,"display_name":"Elifarley"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1581091879,"creation_date":1581091879,"answer_id":60117181,"question_id":5067619,"body_markdown":"Here&#39;s a simple, straight JPA example (in Kotlin) that shows how you can paginate over an arbitrarily large result set, reading chunks of 100 items at a time, without using a cursor (each cursor consumes resources on the database). It uses keyset pagination.\r\n\r\nSee https://use-the-index-luke.com/no-offset for the concept of keyset pagination, and https://www.citusdata.com/blog/2016/03/30/five-ways-to-paginate/ for a comparison of different ways to paginate along with their drawbacks.\r\n\r\n    /*\r\n    create table my_table(\r\n      id int primary key, -- index will be created\r\n      my_column varchar\r\n    )\r\n    */\r\n    \r\n    fun keysetPaginationExample() {\r\n    \tvar lastId = Integer.MIN_VALUE\r\n    \tdo {\r\n    \r\n    \t    val someItems =\r\n    \t\tmyRepository.findTop100ByMyTableIdAfterOrderByMyTableId(lastId)\r\n    \r\n    \t    if (someItems.isEmpty()) break\r\n    \r\n    \t    lastId = someItems.last().myTableId\r\n    \r\n    \t    for (item in someItems) {\r\n    \t\t  process(item)\r\n    \t    }\r\n    \r\n    \t} while (true)\r\n    }\r\n\r\n","title":"JPA: what is the proper pattern for iterating over large result sets?","body":"<p>Here's a simple, straight JPA example (in Kotlin) that shows how you can paginate over an arbitrarily large result set, reading chunks of 100 items at a time, without using a cursor (each cursor consumes resources on the database). It uses keyset pagination.</p>\n\n<p>See <a href=\"https://use-the-index-luke.com/no-offset\" rel=\"nofollow noreferrer\">https://use-the-index-luke.com/no-offset</a> for the concept of keyset pagination, and <a href=\"https://www.citusdata.com/blog/2016/03/30/five-ways-to-paginate/\" rel=\"nofollow noreferrer\">https://www.citusdata.com/blog/2016/03/30/five-ways-to-paginate/</a> for a comparison of different ways to paginate along with their drawbacks.</p>\n\n<pre><code>/*\ncreate table my_table(\n  id int primary key, -- index will be created\n  my_column varchar\n)\n*/\n\nfun keysetPaginationExample() {\n    var lastId = Integer.MIN_VALUE\n    do {\n\n        val someItems =\n        myRepository.findTop100ByMyTableIdAfterOrderByMyTableId(lastId)\n\n        if (someItems.isEmpty()) break\n\n        lastId = someItems.last().myTableId\n\n        for (item in someItems) {\n          process(item)\n        }\n\n    } while (true)\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6325493,"reputation":465,"user_id":4912093,"display_name":"harryssuperman"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1585851386,"creation_date":1585851386,"answer_id":60998338,"question_id":5067619,"body_markdown":"An Example with JPA and NativeQuery fetching everytime the size Elements using offsets\r\n\r\n    public List&lt;X&gt; getXByFetching(int fetchSize) {\r\n            int totalX = getTotalRows(Entity);\r\n            List&lt;X&gt; result = new ArrayList&lt;&gt;();\r\n            for (int offset = 0; offset &lt; totalX; offset = offset + fetchSize) {\r\n                EntityManager entityManager = getEntityManager();\r\n                String sql = getSqlSelect(Entity) + &quot; OFFSET &quot; + offset + &quot; ROWS&quot;;\r\n                Query query = entityManager.createNativeQuery(sql, X.class);\r\n                query.setMaxResults(fetchSize);\r\n                result.addAll(query.getResultList());\r\n                entityManager.flush();\r\n                entityManager.clear();\r\n            return result;\r\n        }","title":"JPA: what is the proper pattern for iterating over large result sets?","body":"<p>An Example with JPA and NativeQuery fetching everytime the size Elements using offsets</p>\n\n<pre><code>public List&lt;X&gt; getXByFetching(int fetchSize) {\n        int totalX = getTotalRows(Entity);\n        List&lt;X&gt; result = new ArrayList&lt;&gt;();\n        for (int offset = 0; offset &lt; totalX; offset = offset + fetchSize) {\n            EntityManager entityManager = getEntityManager();\n            String sql = getSqlSelect(Entity) + \" OFFSET \" + offset + \" ROWS\";\n            Query query = entityManager.createNativeQuery(sql, X.class);\n            query.setMaxResults(fetchSize);\n            result.addAll(query.getResultList());\n            entityManager.flush();\n            entityManager.clear();\n        return result;\n    }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":279220,"reputation":2393,"user_id":574263,"accept_rate":44,"display_name":"mjaggard"},"score":0,"creation_date":1670322777,"post_id":69486331,"comment_id":131844474,"body_markdown":"For MySQL I also had to add `useCursorFetch=true` to the query string of my database URL.","body":"For MySQL I also had to add <code>useCursorFetch=true</code> to the query string of my database URL."}],"tags":[],"owner":{"account_id":279220,"reputation":2393,"user_id":574263,"accept_rate":44,"display_name":"mjaggard"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1694797354,"creation_date":1633632284,"answer_id":69486331,"question_id":5067619,"body_markdown":"Finally the answer to what you want arrived in JPA 2.2 regardless of which JPA framework you use. For Hibernate (at least in v5.4.30) it uses the Scrollable implementation mentioned in a previous answer.\r\n\r\nYour code can now look like this:\r\n\r\n    entityManager().createQuery(&quot;from Model m&quot;, Model.class)\r\n                      .getResultStream();\r\n                      .forEach(model -&gt; System.out.println(model.getId());","title":"JPA: what is the proper pattern for iterating over large result sets?","body":"<p>Finally the answer to what you want arrived in JPA 2.2 regardless of which JPA framework you use. For Hibernate (at least in v5.4.30) it uses the Scrollable implementation mentioned in a previous answer.</p>\n<p>Your code can now look like this:</p>\n<pre><code>entityManager().createQuery(&quot;from Model m&quot;, Model.class)\n                  .getResultStream();\n                  .forEach(model -&gt; System.out.println(model.getId());\n</code></pre>\n"},{"comments":[{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1681463415,"post_id":76012608,"comment_id":134063769,"body_markdown":"please edit and format your answer: code as code with proper indentation, descriptive plain text _not_ as code. .. and don&#39;t post the exact same answer to multiple questions","body":"please edit and format your answer: code as code with proper indentation, descriptive plain text <i>not</i> as code. .. and don&#39;t post the exact same answer to multiple questions"},{"owner":{"account_id":8681711,"reputation":81,"user_id":6497346,"display_name":"The Rocket"},"score":0,"creation_date":1681463574,"post_id":76012608,"comment_id":134063812,"body_markdown":"I humbly request to concentrate on the solution rather than the indentation. For the hardwork made to help somebody resulting with not useful mark is not justifiable. Hope you understand my intention. Thank You,.","body":"I humbly request to concentrate on the solution rather than the indentation. For the hardwork made to help somebody resulting with not useful mark is not justifiable. Hope you understand my intention. Thank You,."},{"owner":{"account_id":8681711,"reputation":81,"user_id":6497346,"display_name":"The Rocket"},"score":0,"creation_date":1681464229,"post_id":76012608,"comment_id":134063961,"body_markdown":"@kleopatra Hope you are happy now. Please make it useful for someone by marking positive. Thank You.","body":"@kleopatra Hope you are happy now. Please make it useful for someone by marking positive. Thank You."},{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1681465264,"post_id":76012608,"comment_id":134064234,"body_markdown":"yeah, you did improve it, thanks for starting :) - but still not good enough: no need to quote what you are saying (or did you copy it from somewhere? if so, you should attribute the source), the bullets in the code snippets are .. just text not code ;)","body":"yeah, you did improve it, thanks for starting :) - but still not good enough: no need to quote what you are saying (or did you copy it from somewhere? if so, you should attribute the source), the bullets in the code snippets are .. just text not code ;)"},{"owner":{"account_id":8681711,"reputation":81,"user_id":6497346,"display_name":"The Rocket"},"score":0,"creation_date":1681465358,"post_id":76012608,"comment_id":134064264,"body_markdown":"@kleopatra It my own solution which I found out and implemented in my projects. Hope you respect that. I don&#39;t have to paste someone else solutions.","body":"@kleopatra It my own solution which I found out and implemented in my projects. Hope you respect that. I don&#39;t have to paste someone else solutions."},{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1681465510,"post_id":76012608,"comment_id":134064303,"body_markdown":"good - then fix the formatting to not make it appear as code :)","body":"good - then fix the formatting to not make it appear as code :)"},{"owner":{"account_id":8681711,"reputation":81,"user_id":6497346,"display_name":"The Rocket"},"score":0,"creation_date":1681466175,"post_id":76012608,"comment_id":134064447,"body_markdown":"@kleopatra Sorry for the formatting issue. However, I&#39;m busy. Thanks for your interest.","body":"@kleopatra Sorry for the formatting issue. However, I&#39;m busy. Thanks for your interest."}],"tags":[],"owner":{"account_id":8681711,"reputation":81,"user_id":6497346,"display_name":"The Rocket"},"comment_count":7,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1681463966,"creation_date":1681457626,"answer_id":76012608,"question_id":5067619,"body_markdown":"&gt; All, Most of the blogs/solutions are dealing with MySQL or PostgreSQL instead of Oracle database when trying to read/retrieve\r\n&gt; from the large set of data and process by locking/update from\r\n&gt; multi-servers or multithreading using Spring JPA\r\n&gt;     \r\n&gt; My version is the latest : v2.7.8\r\n&gt;     \r\n&gt; As JPA Repository, doesn&#39;t support scrolling the data by default - I was using ROWNUM (i.e., Rownum &lt;=1000) in the Queries for\r\n&gt; processing.\r\n&gt;     \r\n&gt; Most of them know the consequences of using Rownum from Oracle standpoint.\r\n&gt;     \r\n&gt; However, I will explain in short:\r\n&gt;     \r\n&gt; Whenever a value is assigned to Rownum and fire the SQL Query, mostly the same set is being retrieved. In this case, when I lock the rows with Spring JPA Native Query - other servers/threads leads to pick 0 records.\r\n&gt;     \r\n&gt; Its a nightmare &amp; terrible sleepless nights in terms of performance &amp; resource utilisation.\r\n&gt;     \r\n&gt; I have overcome these with some implementations on top of JPA Repository which saved me in all aspects.\r\n&gt;     \r\n&gt; Here is the solution for all the Database users using Spring JPA with locking (For Update Skip Locked):\r\n\r\n    \r\n    \r\n    1. Amend the JPA Repository interface:\r\n    \r\n    @Repository\r\n    public interface SampleDataRepo extends JpaRepository&lt;SampleObj, Id&gt; , SampleDataRepository{\r\n    }\r\n    \r\n    2. Create a new Interface declared above which extended JPA Repository:\r\n    \r\n    public interface SampleDataRepository {\r\n    \r\n    // Your Method\r\n    List&lt;SampleObj&gt; retrieveDataFromSample(\r\n    \t\t\t@Param(&quot;someColumn&quot;) String someColumn);\r\n    \r\n    }\r\n    \r\n    3. Implement the above Interface:\r\n    \r\n    public class SampleDataRepositoryImpl implements SampleDataRepository {\r\n    \r\n    \t@PersistenceContext\r\n    \tprivate EntityManager entityManager;\r\n    \r\n    // Your Method\r\n    @Override\r\n    List&lt;SampleObj&gt; retrieveDataFromSample(\r\n    \t\t\t@Param(&quot;someColumn&quot;) String someColumn){\r\n    \r\n    final String findDataBySomeColumnQuery = &quot;SELECT r.ID FROM SAMPLE_OBJECT_TABLE WHERE r.SOME_COLUMN = :someColumn ORDER BY ID ASC FOR UPDATE SKIP LOCKED&quot;;\r\n    \r\n    List&lt;SampleObj&gt; dataList = new ArrayList&lt;&gt;();\r\n    \r\n    ScrollableResults result = entityManager.createNativeQuery(findDataBySomeColumnQuery, SampleObj.class)\r\n    \t\t.setParameter(&quot;someColumn&quot;, someColumn)\r\n    \t\t\t\t.setHint(QueryHints.HINT_FETCH_SIZE, 1000)\r\n    \t\t\t\t.unwrap(Query.class).scroll(ScrollMode.FORWARD_ONLY);\r\n    \r\n    \t\tint limit = 1000;\r\n    \t\ttry {\r\n    \t\t\twhile (result.next() &amp;&amp; limit &gt; 0) {\r\n    \t\t\t\tdataList.add((SampleObj) result.get(0));\r\n    \t\t\t\tlimit--;\r\n    \t\t\t}\r\n    \t\t\treturn dataList;\r\n    \t\t} finally {\r\n    \t\t\tif (result != null) {\r\n    \t\t\t\tresult.close();\r\n    \t\t\t}\r\n    \t\t}\r\n      }\r\n    }\r\n    \r\n    4. Make a call to the above method from service class as earlier\r\n    \r\n    @Service(&quot;SampleMonitor&quot;)\r\n    @Primary\r\n    public class SampleMonitorServiceImpl implements SampleMonitorService {\r\n    \r\n    \t@Autowired\r\n    \tprivate SampleDataRepo sampleDataRepo;\r\n    \r\n    \t@Override\r\n    \t@Transactional(readOnly = false, isolation = Isolation.READ_COMMITTED, rollbackFor = { Exception.class,\r\n    \t\t\tRuntimeException.class })\r\n    \tpublic void monitor(){\r\n    \r\n    .......\r\n    .......\r\n    \r\n    List&lt;SampleObj&gt; dataList = sampleDataRepo.retrieveDataFromSample(value);\r\n    .......\r\n    \r\n      }\r\n    }\r\n    \r\n    \r\n    Now, there are no Heap Size/outofmemory issue. Performance on topnotch with multiple threads/servers.\r\n    \r\n    \r\n    Happieee Coding.","title":"JPA: what is the proper pattern for iterating over large result sets?","body":"<blockquote>\n<p>All, Most of the blogs/solutions are dealing with MySQL or PostgreSQL instead of Oracle database when trying to read/retrieve\nfrom the large set of data and process by locking/update from\nmulti-servers or multithreading using Spring JPA</p>\n<p>My version is the latest : v2.7.8</p>\n<p>As JPA Repository, doesn't support scrolling the data by default - I was using ROWNUM (i.e., Rownum &lt;=1000) in the Queries for\nprocessing.</p>\n<p>Most of them know the consequences of using Rownum from Oracle standpoint.</p>\n<p>However, I will explain in short:</p>\n<p>Whenever a value is assigned to Rownum and fire the SQL Query, mostly the same set is being retrieved. In this case, when I lock the rows with Spring JPA Native Query - other servers/threads leads to pick 0 records.</p>\n<p>Its a nightmare &amp; terrible sleepless nights in terms of performance &amp; resource utilisation.</p>\n<p>I have overcome these with some implementations on top of JPA Repository which saved me in all aspects.</p>\n<p>Here is the solution for all the Database users using Spring JPA with locking (For Update Skip Locked):</p>\n</blockquote>\n<pre><code>1. Amend the JPA Repository interface:\n\n@Repository\npublic interface SampleDataRepo extends JpaRepository&lt;SampleObj, Id&gt; , SampleDataRepository{\n}\n\n2. Create a new Interface declared above which extended JPA Repository:\n\npublic interface SampleDataRepository {\n\n// Your Method\nList&lt;SampleObj&gt; retrieveDataFromSample(\n            @Param(&quot;someColumn&quot;) String someColumn);\n\n}\n\n3. Implement the above Interface:\n\npublic class SampleDataRepositoryImpl implements SampleDataRepository {\n\n    @PersistenceContext\n    private EntityManager entityManager;\n\n// Your Method\n@Override\nList&lt;SampleObj&gt; retrieveDataFromSample(\n            @Param(&quot;someColumn&quot;) String someColumn){\n\nfinal String findDataBySomeColumnQuery = &quot;SELECT r.ID FROM SAMPLE_OBJECT_TABLE WHERE r.SOME_COLUMN = :someColumn ORDER BY ID ASC FOR UPDATE SKIP LOCKED&quot;;\n\nList&lt;SampleObj&gt; dataList = new ArrayList&lt;&gt;();\n\nScrollableResults result = entityManager.createNativeQuery(findDataBySomeColumnQuery, SampleObj.class)\n        .setParameter(&quot;someColumn&quot;, someColumn)\n                .setHint(QueryHints.HINT_FETCH_SIZE, 1000)\n                .unwrap(Query.class).scroll(ScrollMode.FORWARD_ONLY);\n\n        int limit = 1000;\n        try {\n            while (result.next() &amp;&amp; limit &gt; 0) {\n                dataList.add((SampleObj) result.get(0));\n                limit--;\n            }\n            return dataList;\n        } finally {\n            if (result != null) {\n                result.close();\n            }\n        }\n  }\n}\n\n4. Make a call to the above method from service class as earlier\n\n@Service(&quot;SampleMonitor&quot;)\n@Primary\npublic class SampleMonitorServiceImpl implements SampleMonitorService {\n\n    @Autowired\n    private SampleDataRepo sampleDataRepo;\n\n    @Override\n    @Transactional(readOnly = false, isolation = Isolation.READ_COMMITTED, rollbackFor = { Exception.class,\n            RuntimeException.class })\n    public void monitor(){\n\n.......\n.......\n\nList&lt;SampleObj&gt; dataList = sampleDataRepo.retrieveDataFromSample(value);\n.......\n\n  }\n}\n\n\nNow, there are no Heap Size/outofmemory issue. Performance on topnotch with multiple threads/servers.\n\n\nHappieee Coding.\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6197039,"reputation":6332,"user_id":4828060,"accept_rate":21,"display_name":"Jo&#227;o Matos"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683802140,"creation_date":1683802140,"answer_id":76226801,"question_id":5067619,"body_markdown":"My two cents in addition to the helpful accepted answer, we can use Spring Data JPA to handle pagination. Repository example:\r\n\r\n    public interface ModelRepository extends JpaRepository&lt;Model, Long&gt; {\r\n    \r\n        //feel free to change the order by criteria\r\n    \tList&lt;Model&gt; findAllByOrderByUpdatedDesc(Pageable pageable);\r\n    \r\n    }\r\n\r\nAnd your service just do as initially suggested:\r\n \r\n\r\n    private void iterateAll()\r\n    {\r\n        int offset = 0;\r\n    \r\n        List&lt;Model&gt; models;\r\n        while ((models = modelRepository.findAllByOrderByUpdatedAsc(PageRequest.of(offset, 100)) ).size() &gt; 0)\r\n        {\r\n    \r\n            for (Model model : models)\r\n            {\r\n                log.info(&quot;do something with model: &quot; + model.getId());\r\n            }\r\n    \r\n            offset ++;\r\n        }\r\n    }\r\n\r\nNote that `OrderByUpdatedAsc` is likely preferable to `OrderByUpdatedDesc` if your table is being updated in parallel, although not necessarily immune to those sort of issues.\r\n\r\nAdditionally,\r\n\r\n&gt; Page 537 of Java Persistence with Hibernate gives a solution using\r\n&gt; ScrollableResults, but alas it&#39;s only for Hibernate.\r\n\r\nBeware of potential memory leaks using scrollable results, I&#39;ve had problems like these -&gt; https://stackoverflow.com/q/76008518/4828060\r\n\r\n\r\n","title":"JPA: what is the proper pattern for iterating over large result sets?","body":"<p>My two cents in addition to the helpful accepted answer, we can use Spring Data JPA to handle pagination. Repository example:</p>\n<pre><code>public interface ModelRepository extends JpaRepository&lt;Model, Long&gt; {\n\n    //feel free to change the order by criteria\n    List&lt;Model&gt; findAllByOrderByUpdatedDesc(Pageable pageable);\n\n}\n</code></pre>\n<p>And your service just do as initially suggested:</p>\n<pre><code>private void iterateAll()\n{\n    int offset = 0;\n\n    List&lt;Model&gt; models;\n    while ((models = modelRepository.findAllByOrderByUpdatedAsc(PageRequest.of(offset, 100)) ).size() &gt; 0)\n    {\n\n        for (Model model : models)\n        {\n            log.info(&quot;do something with model: &quot; + model.getId());\n        }\n\n        offset ++;\n    }\n}\n</code></pre>\n<p>Note that <code>OrderByUpdatedAsc</code> is likely preferable to <code>OrderByUpdatedDesc</code> if your table is being updated in parallel, although not necessarily immune to those sort of issues.</p>\n<p>Additionally,</p>\n<blockquote>\n<p>Page 537 of Java Persistence with Hibernate gives a solution using\nScrollableResults, but alas it's only for Hibernate.</p>\n</blockquote>\n<p>Beware of potential memory leaks using scrollable results, I've had problems like these -&gt; <a href=\"https://stackoverflow.com/q/76008518/4828060\">Spring/Hibernate connection leak with ScrollableResults</a></p>\n"},{"tags":[],"owner":{"account_id":3130088,"reputation":43207,"user_id":2648077,"accept_rate":80,"display_name":"Alireza Fattahi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692443108,"creation_date":1692442686,"answer_id":76934744,"question_id":5067619,"body_markdown":"In JPA documnets (Version 3.3) there is a section about [Scrolling][1]:\r\n\r\n&gt; Scrolling is a more fine-grained approach to iterate through larger\r\n&gt; results set chunks. Scrolling consists of a stable sort, a scroll type\r\n&gt; (Offset- or Keyset-based scrolling) and result limiting. You can\r\n&gt; define simple sorting expressions by using property names and define\r\n&gt; static result limiting using the Top or First keyword through query\r\n&gt; derivation. You can concatenate expressions to collect multiple\r\n&gt; criteria into one expression.\r\n&gt; \r\n&gt; Scroll queries return a Window&lt;T&gt; that allows obtaining the scroll\r\n&gt; position to resume to obtain the next Window&lt;T&gt; until your application\r\n&gt; has consumed the entire query result. Similar to consuming a Java\r\n&gt; Iterator&lt;List&lt;…&gt;&gt; by obtaining the next batch of results, query result\r\n&gt; scrolling lets you access the a ScrollPosition through\r\n&gt; Window.positionAt(…​).\r\n\r\n\r\nAs sample:\r\n\r\n\r\n\r\n    interface UserRepository extends Repository&lt;User, Long&gt; {\r\n    \r\n      Window&lt;User&gt; findFirst10ByLastnameOrderByFirstname(String lastname, OffsetScrollPosition position);\r\n\r\n    }\r\n\r\n    //Somewhere in your service\r\n    WindowIterator&lt;User&gt; users = WindowIterator.of( position -&gt; repository.findFirst10ByLastnameOrderByFirstname(&quot;Doe&quot;, position))\r\n                                  .startingAt(OffsetScrollPosition.initial());\r\n    \r\n    while (users.hasNext()) {\r\n      User u = users.next();\r\n      // consume the user\r\n    }\r\n\r\n  [1]: https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repositories.scrolling\r\n","title":"JPA: what is the proper pattern for iterating over large result sets?","body":"<p>In JPA documnets (Version 3.3) there is a section about <a href=\"https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repositories.scrolling\" rel=\"nofollow noreferrer\">Scrolling</a>:</p>\n<blockquote>\n<p>Scrolling is a more fine-grained approach to iterate through larger\nresults set chunks. Scrolling consists of a stable sort, a scroll type\n(Offset- or Keyset-based scrolling) and result limiting. You can\ndefine simple sorting expressions by using property names and define\nstatic result limiting using the Top or First keyword through query\nderivation. You can concatenate expressions to collect multiple\ncriteria into one expression.</p>\n<p>Scroll queries return a Window that allows obtaining the scroll\nposition to resume to obtain the next Window until your application\nhas consumed the entire query result. Similar to consuming a Java\nIterator&lt;List&lt;…&gt;&gt; by obtaining the next batch of results, query result\nscrolling lets you access the a ScrollPosition through\nWindow.positionAt(…​).</p>\n</blockquote>\n<p>As sample:</p>\n<pre><code>interface UserRepository extends Repository&lt;User, Long&gt; {\n\n  Window&lt;User&gt; findFirst10ByLastnameOrderByFirstname(String lastname, OffsetScrollPosition position);\n\n}\n\n//Somewhere in your service\nWindowIterator&lt;User&gt; users = WindowIterator.of( position -&gt; repository.findFirst10ByLastnameOrderByFirstname(&quot;Doe&quot;, position))\n                              .startingAt(OffsetScrollPosition.initial());\n\nwhile (users.hasNext()) {\n  User u = users.next();\n  // consume the user\n}\n</code></pre>\n"}],"owner":{"account_id":33553,"reputation":30834,"user_id":93995,"accept_rate":81,"display_name":"George Armhold"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":115158,"favorite_count":0,"down_vote_count":1,"up_vote_count":129,"accepted_answer_id":5071436,"answer_count":19,"score":128,"last_activity_date":1694797354,"creation_date":1298301210,"question_id":5067619,"body_markdown":"Let&#39;s say I have a table with millions of rows. Using JPA, what&#39;s the proper way to iterate over a query against that table, such that **I don&#39;t have all an in-memory List** with millions of objects?\r\n\r\nFor example, I suspect that the following will blow up if the table is large:\r\n\r\n    List&lt;Model&gt; models = entityManager().createQuery(&quot;from Model m&quot;, Model.class).getResultList();\r\n\r\n    for (Model model : models)\r\n    {\r\n         System.out.println(model.getId());\r\n    }\r\n\r\nIs pagination (looping and manually updating `setFirstResult()`/`setMaxResult()`) really the best solution?\r\n\r\n**Edit**: the primary use-case I&#39;m targeting is a kind of batch job. It&#39;s fine if it takes a long time to run. There is no web client involved; I just need to &quot;do something&quot; for each row, one (or some small N) at a time. I&#39;m just trying to avoid having them all in memory at the same time.\r\n\r\n\r\n\r\n","title":"JPA: what is the proper pattern for iterating over large result sets?","body":"<p>Let's say I have a table with millions of rows. Using JPA, what's the proper way to iterate over a query against that table, such that <strong>I don't have all an in-memory List</strong> with millions of objects?</p>\n\n<p>For example, I suspect that the following will blow up if the table is large:</p>\n\n<pre><code>List&lt;Model&gt; models = entityManager().createQuery(\"from Model m\", Model.class).getResultList();\n\nfor (Model model : models)\n{\n     System.out.println(model.getId());\n}\n</code></pre>\n\n<p>Is pagination (looping and manually updating <code>setFirstResult()</code>/<code>setMaxResult()</code>) really the best solution?</p>\n\n<p><strong>Edit</strong>: the primary use-case I'm targeting is a kind of batch job. It's fine if it takes a long time to run. There is no web client involved; I just need to \"do something\" for each row, one (or some small N) at a time. I'm just trying to avoid having them all in memory at the same time.</p>\n"},{"tags":["java","mysql","excel","jsp"],"answers":[{"comments":[{"owner":{"account_id":2075927,"reputation":2068,"user_id":1849276,"accept_rate":100,"display_name":"Afsun Khammadli"},"score":0,"creation_date":1431348179,"post_id":30161224,"comment_id":48442110,"body_markdown":"Headers appears in excel?","body":"Headers appears in excel?"},{"owner":{"account_id":2075927,"reputation":2068,"user_id":1849276,"accept_rate":100,"display_name":"Afsun Khammadli"},"score":0,"creation_date":1431348238,"post_id":30161224,"comment_id":48442142,"body_markdown":"Are you sure your select query is correct and give result?","body":"Are you sure your select query is correct and give result?"},{"owner":{"account_id":2075927,"reputation":2068,"user_id":1849276,"accept_rate":100,"display_name":"Afsun Khammadli"},"score":0,"creation_date":1431348323,"post_id":30161224,"comment_id":48442203,"body_markdown":"the problem is that your sql query has no result,fix this and you get excel excel with files.","body":"the problem is that your sql query has no result,fix this and you get excel excel with files."},{"owner":{"account_id":3952763,"reputation":109,"user_id":3262425,"accept_rate":40,"display_name":"Kasani Prabhakar"},"score":0,"creation_date":1431348703,"post_id":30161224,"comment_id":48442472,"body_markdown":"where shpuld i add this code at begining of code or at after sql query","body":"where shpuld i add this code at begining of code or at after sql query"},{"owner":{"account_id":3952763,"reputation":109,"user_id":3262425,"accept_rate":40,"display_name":"Kasani Prabhakar"},"score":0,"creation_date":1431350067,"post_id":30161224,"comment_id":48443401,"body_markdown":"no still,while iam opening excel file it&#39;s saying &quot;The file you trying to open &#39;file.xls&#39; ,is in a diff format than specified by the file extension&quot; and showing yes,no,cancel control buttons when i click on yes no data was there inside empty sheet\n\nnormally the output was alright it displaying in a table ,the query was working fine","body":"no still,while iam opening excel file it&#39;s saying &quot;The file you trying to open &#39;file.xls&#39; ,is in a diff format than specified by the file extension&quot; and showing yes,no,cancel control buttons when i click on yes no data was there inside empty sheet  normally the output was alright it displaying in a table ,the query was working fine"},{"owner":{"account_id":3952763,"reputation":109,"user_id":3262425,"accept_rate":40,"display_name":"Kasani Prabhakar"},"score":0,"creation_date":1431351029,"post_id":30161224,"comment_id":48444102,"body_markdown":"after ,clicking on yes only i got nothing \nI think it need any other code that is not present in my code\n:( iam v.sorry but iam unable to get\nthanq for ur answers\nIf my code needs any changes plz tell me","body":"after ,clicking on yes only i got nothing  I think it need any other code that is not present in my code :( iam v.sorry but iam unable to get thanq for ur answers If my code needs any changes plz tell me"},{"owner":{"account_id":2075927,"reputation":2068,"user_id":1849276,"accept_rate":100,"display_name":"Afsun Khammadli"},"score":0,"creation_date":1431496215,"post_id":30161224,"comment_id":48518094,"body_markdown":"did you change `if` to `while`?","body":"did you change <code>if</code> to <code>while</code>?"}],"tags":[],"owner":{"account_id":2075927,"reputation":2068,"user_id":1849276,"accept_rate":100,"display_name":"Afsun Khammadli"},"comment_count":7,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1431355619,"creation_date":1431327055,"answer_id":30161224,"question_id":30160916,"body_markdown":"You must add following lines to your jsp page which you want to export to excel:&lt;br&gt;\r\n\r\n    response.setContentType(&quot;application/xls&quot;);\r\n    response.setHeader(&quot;Content-Disposition&quot;, &quot;attachment;filename=File.xls&quot;);\r\n            \r\nOr you must learn about [`POI`][1]\r\n\r\n\r\n  [1]: http://www.tutorialspoint.com/apache_poi/\r\n\r\nAnd you must change `if(res.next())` with `while(res.next())`","title":"JSP code to generate excel sheet of data retrieved in jsp page","body":"<p>You must add following lines to your jsp page which you want to export to excel:<br></p>\n\n<pre><code>response.setContentType(\"application/xls\");\nresponse.setHeader(\"Content-Disposition\", \"attachment;filename=File.xls\");\n</code></pre>\n\n<p>Or you must learn about <a href=\"http://www.tutorialspoint.com/apache_poi/\" rel=\"nofollow\"><code>POI</code></a></p>\n\n<p>And you must change <code>if(res.next())</code> with <code>while(res.next())</code></p>\n"},{"tags":[],"owner":{"account_id":6084077,"reputation":199,"user_id":4748798,"display_name":"vishal rana"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1431327457,"creation_date":1431327457,"answer_id":30161331,"question_id":30160916,"body_markdown":"*Try using a servlet to do the Excel writing.*\r\n\r\n&gt; You could use it as a JSP:Include in your existing page if you wanted\r\n&gt; to.\r\n\r\nFrom the servlet you&#39;ll have to do something like this:\r\n\r\n    ServletOutputStream out = resp.getOutputStream();\r\n    resp.setContentType(&quot;application/vnd.ms-excel&quot;)\r\n    /*\r\n    * get data \r\n    */\r\n    \r\n    if (data != null) {\r\n    for (int i=0; i data.length; i++) {\r\n       String dataRow = &quot;&quot;;\r\n       for (int j = 0; j data[0].length; j++) {\r\n           dataRow += data[i][j] + &quot;\\t&quot;;// add tab delimiter\r\n       }\r\n       out.println(dataRow);// print data\r\n    }\r\n    } else {//Bad data...\r\n       out.println(&quot;No data to report.&quot;);\r\n    }\r\n    \r\n    out.flush();\r\n\r\nHope it helps you. :)","title":"JSP code to generate excel sheet of data retrieved in jsp page","body":"<p><em>Try using a servlet to do the Excel writing.</em></p>\n\n<blockquote>\n  <p>You could use it as a JSP:Include in your existing page if you wanted\n  to.</p>\n</blockquote>\n\n<p>From the servlet you'll have to do something like this:</p>\n\n<pre><code>ServletOutputStream out = resp.getOutputStream();\nresp.setContentType(\"application/vnd.ms-excel\")\n/*\n* get data \n*/\n\nif (data != null) {\nfor (int i=0; i data.length; i++) {\n   String dataRow = \"\";\n   for (int j = 0; j data[0].length; j++) {\n       dataRow += data[i][j] + \"\\t\";// add tab delimiter\n   }\n   out.println(dataRow);// print data\n}\n} else {//Bad data...\n   out.println(\"No data to report.\");\n}\n\nout.flush();\n</code></pre>\n\n<p>Hope it helps you. :)</p>\n"}],"owner":{"account_id":3952763,"reputation":109,"user_id":3262425,"accept_rate":40,"display_name":"Kasani Prabhakar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9910,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1694797270,"creation_date":1431325812,"question_id":30160916,"body_markdown":"I want to export data to Excel sheet  \r\n\r\n  \r\n\r\n    &lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=ISO-8859-1&quot;\r\n            pageEncoding=&quot;ISO-8859-1&quot;%&gt;\r\n            &lt;%@include file=&quot;connection.jsp&quot; %&gt;\r\n        &lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;\r\n        &lt;html&gt;\r\n        &lt;head&gt;\r\n        &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=ISO-8859-1&quot;&gt;\r\n        &lt;title&gt;Insert title here&lt;/title&gt;\r\n        &lt;/head&gt;\r\n        &lt;body&gt;\r\n        \r\n        &lt;%\r\n        String ht = (String)session.getAttribute(&quot;ht&quot;);\r\n        %&gt;\r\n        &lt;table border=&quot;1&quot;&gt;\r\n        &lt;%\r\n        pst = con.prepareStatement(&quot;select * from attendance where ht=&#39;&quot;+ht+&quot;&#39;&quot;);\r\n        res = pst.executeQuery();\r\n        if(res.next())\r\n        {\r\n        \tString uname = res.getString(2);\r\n        \t%&gt;\r\n        \t&lt;b&gt;Student Name:&lt;%=uname%&gt;&lt;/b&gt;\r\n        \t\r\n        \t&lt;%\r\n        \tString hlt = res.getString(1);\r\n        \t%&gt;\r\n        \t&lt;b&gt;Hallticket:&lt;%=hlt%&gt;&lt;/b&gt;\r\n        \t&lt;tr&gt;&lt;th&gt;CG&lt;/th&gt;&lt;th&gt;CD&lt;/th&gt;&lt;th&gt;MPI&lt;/th&gt;&lt;th&gt;HCI&lt;/th&gt;&lt;th&gt;WT&lt;/th&gt;&lt;th&gt;MPI-Lab&lt;/th&gt;&lt;th&gt;CT=Lab&lt;/th&gt;&lt;th&gt;WT-Lab&lt;/th&gt;&lt;/tr&gt;\r\n        \t&lt;%\r\n        \tString cg = res.getString(3);\r\n        \tString cd = res.getString(4);\r\n        \tString mpi = res.getString(5);\r\n        \tString hci = res.getString(6);\r\n        \tString wt = res.getString(7);\r\n        \tString mpi_lab = res.getString(8);\r\n        \tString ct_lab = res.getString(9);\r\n        \tString wt_lab = res.getString(10);\r\n        \t%&gt;\r\n        \t&lt;tr&gt;\r\n        \t&lt;td align=&quot;center&quot;&gt;&lt;%=cg%&gt;&lt;/td&gt;\r\n        \t&lt;td align=&quot;center&quot;&gt;&lt;%=cd%&gt;&lt;/td&gt;\r\n        \t&lt;td align=&quot;center&quot;&gt;&lt;%=mpi%&gt;&lt;/td&gt;\r\n        \t&lt;td align=&quot;center&quot;&gt;&lt;%=hci%&gt;&lt;/td&gt;\r\n        \t&lt;td align=&quot;center&quot;&gt;&lt;%=wt%&gt;&lt;/td&gt;\r\n        \t&lt;td align=&quot;center&quot;&gt;&lt;%=mpi_lab%&gt;&lt;/td&gt;\r\n        \t&lt;td align=&quot;center&quot;&gt;&lt;%=ct_lab%&gt;&lt;/td&gt;\r\n        \t&lt;td align=&quot;center&quot;&gt;&lt;%=wt_lab%&gt;&lt;/td&gt;\r\n        \t&lt;/tr&gt;\r\n        \t&lt;br/&gt;&lt;br/&gt;\r\n        \t\r\n        \t&lt;%\r\n        }\r\n        %&gt;\r\n        &lt;/table&gt;\r\n        &lt;/body&gt;\r\n        &lt;/html&gt;\r\n\r\nI want the data that is retrieved from database and displayed in table should be printed on excel sheet\r\nPlease can any one tell me how to do it ... :(\r\nI used mysql databse.\r\n","title":"JSP code to generate excel sheet of data retrieved in jsp page","body":"<p>I want to export data to Excel sheet  </p>\n\n<pre><code>&lt;%@ page language=\"java\" contentType=\"text/html; charset=ISO-8859-1\"\n        pageEncoding=\"ISO-8859-1\"%&gt;\n        &lt;%@include file=\"connection.jsp\" %&gt;\n    &lt;!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\" \"http://www.w3.org/TR/html4/loose.dtd\"&gt;\n    &lt;html&gt;\n    &lt;head&gt;\n    &lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=ISO-8859-1\"&gt;\n    &lt;title&gt;Insert title here&lt;/title&gt;\n    &lt;/head&gt;\n    &lt;body&gt;\n\n    &lt;%\n    String ht = (String)session.getAttribute(\"ht\");\n    %&gt;\n    &lt;table border=\"1\"&gt;\n    &lt;%\n    pst = con.prepareStatement(\"select * from attendance where ht='\"+ht+\"'\");\n    res = pst.executeQuery();\n    if(res.next())\n    {\n        String uname = res.getString(2);\n        %&gt;\n        &lt;b&gt;Student Name:&lt;%=uname%&gt;&lt;/b&gt;\n\n        &lt;%\n        String hlt = res.getString(1);\n        %&gt;\n        &lt;b&gt;Hallticket:&lt;%=hlt%&gt;&lt;/b&gt;\n        &lt;tr&gt;&lt;th&gt;CG&lt;/th&gt;&lt;th&gt;CD&lt;/th&gt;&lt;th&gt;MPI&lt;/th&gt;&lt;th&gt;HCI&lt;/th&gt;&lt;th&gt;WT&lt;/th&gt;&lt;th&gt;MPI-Lab&lt;/th&gt;&lt;th&gt;CT=Lab&lt;/th&gt;&lt;th&gt;WT-Lab&lt;/th&gt;&lt;/tr&gt;\n        &lt;%\n        String cg = res.getString(3);\n        String cd = res.getString(4);\n        String mpi = res.getString(5);\n        String hci = res.getString(6);\n        String wt = res.getString(7);\n        String mpi_lab = res.getString(8);\n        String ct_lab = res.getString(9);\n        String wt_lab = res.getString(10);\n        %&gt;\n        &lt;tr&gt;\n        &lt;td align=\"center\"&gt;&lt;%=cg%&gt;&lt;/td&gt;\n        &lt;td align=\"center\"&gt;&lt;%=cd%&gt;&lt;/td&gt;\n        &lt;td align=\"center\"&gt;&lt;%=mpi%&gt;&lt;/td&gt;\n        &lt;td align=\"center\"&gt;&lt;%=hci%&gt;&lt;/td&gt;\n        &lt;td align=\"center\"&gt;&lt;%=wt%&gt;&lt;/td&gt;\n        &lt;td align=\"center\"&gt;&lt;%=mpi_lab%&gt;&lt;/td&gt;\n        &lt;td align=\"center\"&gt;&lt;%=ct_lab%&gt;&lt;/td&gt;\n        &lt;td align=\"center\"&gt;&lt;%=wt_lab%&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;br/&gt;&lt;br/&gt;\n\n        &lt;%\n    }\n    %&gt;\n    &lt;/table&gt;\n    &lt;/body&gt;\n    &lt;/html&gt;\n</code></pre>\n\n<p>I want the data that is retrieved from database and displayed in table should be printed on excel sheet\nPlease can any one tell me how to do it ... :(\nI used mysql databse.</p>\n"},{"tags":["java","android-studio","android-manifest","execution-time"],"comments":[{"owner":{"account_id":2073393,"reputation":2457,"user_id":1847378,"display_name":"AndrewL"},"score":0,"creation_date":1695159628,"post_id":77108714,"comment_id":135986128,"body_markdown":"Avoid down votes, by not posting images, here is why: https://meta.stackoverflow.com/a/285557/1847378","body":"Avoid down votes, by not posting images, here is why: <a href=\"https://meta.stackoverflow.com/a/285557/1847378\">meta.stackoverflow.com/a/285557/1847378</a>"}],"answers":[{"tags":[],"owner":{"account_id":25285238,"reputation":407,"user_id":19112370,"display_name":"Harshali"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694797134,"creation_date":1694797134,"answer_id":77114166,"question_id":77108714,"body_markdown":"I&#39;m also getting this issue and solved by appending \r\n   \r\n\r\n     --add-opens java.base/java.io=ALL-UNNAMED\r\n\r\nin `org.gradle.jvmargs= ...`  property \r\n\r\nto the file  `./android/gradle.properties` \r\n\r\n\r\nhope it will help you","title":"An error when I try to run my android studio program","body":"<p>I'm also getting this issue and solved by appending</p>\n<pre><code> --add-opens java.base/java.io=ALL-UNNAMED\n</code></pre>\n<p>in <code>org.gradle.jvmargs= ...</code>  property</p>\n<p>to the file  <code>./android/gradle.properties</code></p>\n<p>hope it will help you</p>\n"}],"owner":{"account_id":29285180,"reputation":1,"user_id":22436946,"display_name":"Diego Alba"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1694797134,"creation_date":1694730755,"question_id":77108714,"body_markdown":"When I try to run the program it appears:\r\n&quot;Unable to make field private final java.lang.String java.io.File.path accessible: module java.base does not &quot;opens java.io&quot; to unnamed module @7c389728&quot;\r\n[It also appears:Main](https://i.stack.imgur.com/5JrRv.png)\r\n\r\n\r\nI want to try to solve this and see how my program is going","title":"An error when I try to run my android studio program","body":"<p>When I try to run the program it appears:\n&quot;Unable to make field private final java.lang.String java.io.File.path accessible: module java.base does not &quot;opens java.io&quot; to unnamed module @7c389728&quot;\n<a href=\"https://i.stack.imgur.com/5JrRv.png\" rel=\"nofollow noreferrer\">It also appears:Main</a></p>\n<p>I want to try to solve this and see how my program is going</p>\n"},{"tags":["java","spring","hibernate"],"comments":[{"owner":{"account_id":477214,"reputation":5260,"user_id":888580,"display_name":"lane.maxwell"},"score":0,"creation_date":1694830249,"post_id":77114136,"comment_id":135946794,"body_markdown":"The fact that it&#39;s taking forty minutes to run out of heap indicates that you have enough memory; the fact that you&#39;re running out of heap suggests some circular reference.  I recommend attaching VisualVM to the process when you start it up; it will give you an indication of what is filling up the heap to help you hone in on the problem.","body":"The fact that it&#39;s taking forty minutes to run out of heap indicates that you have enough memory; the fact that you&#39;re running out of heap suggests some circular reference.  I recommend attaching VisualVM to the process when you start it up; it will give you an indication of what is filling up the heap to help you hone in on the problem."}],"owner":{"account_id":27490497,"reputation":93,"user_id":20975951,"display_name":"Jaiylon"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694796705,"creation_date":1694796705,"question_id":77114136,"body_markdown":"I have an application that uses spring-boot version 2.6.4 and the entities uses `javax.persistence` API, but I need to add this DataTables dependency\r\n```\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;com.github.darrachequesne&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;spring-data-jpa-datatables&lt;/artifactId&gt;\r\n\t&lt;version&gt;6.0.1&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\nBut this cannot work with that version of Spring, so I upgraded to 3.1.2 and used the `jakarta.persistence` API instead of the of the `javax.persistence` API and now the application won&#39;t start and it takes about 40 minutes to throw the following exception&quot;\r\n\r\n```\r\nError starting ApplicationContext. To display the condition evaluation report re-run your application with &#39;debug&#39; enabled.\r\n2023-09-15T11:56:25.431-04:00 ERROR 6052 --- [  restartedMain] o.s.boot.SpringApplication               : Application run failed\r\n\r\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;entityManagerFactory&#39; defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Java heap space\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751) ~[spring-beans-6.0.4.jar:6.0.4]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599) ~[spring-beans-6.0.4.jar:6.0.4]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521) ~[spring-beans-6.0.4.jar:6.0.4]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326) ~[spring-beans-6.0.4.jar:6.0.4]\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.4.jar:6.0.4]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324) ~[spring-beans-6.0.4.jar:6.0.4]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.0.4.jar:6.0.4]\r\n\tat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130) ~[spring-context-6.0.4.jar:6.0.4]\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905) ~[spring-context-6.0.4.jar:6.0.4]\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584) ~[spring-context-6.0.4.jar:6.0.4]\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.0.2.jar:3.0.2]\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730) ~[spring-boot-3.0.2.jar:3.0.2]\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432) ~[spring-boot-3.0.2.jar:3.0.2]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-3.0.2.jar:3.0.2]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1302) ~[spring-boot-3.0.2.jar:3.0.2]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1291) ~[spring-boot-3.0.2.jar:3.0.2]\r\n\tat com.aegis.kyc.KycApplication.main(KycApplication.java:29) ~[classes/:na]\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:578) ~[na:na]\r\n\tat org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49) ~[spring-boot-devtools-3.0.2.jar:3.0.2]\r\nCaused by: java.lang.OutOfMemoryError: Java heap space\r\n\tat java.base/java.util.AbstractList.listIterator(AbstractList.java:342) ~[na:na]\r\n\tat java.base/java.util.AbstractList.listIterator(AbstractList.java:313) ~[na:na]\r\n\tat java.base/java.util.AbstractList.equals(AbstractList.java:545) ~[na:na]\r\n\tat org.hibernate.metamodel.mapping.AssociationKey.equals(AssociationKey.java:44) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\r\n\tat java.base/java.util.HashMap.removeNode(HashMap.java:826) ~[na:na]\r\n\tat java.base/java.util.HashMap.remove(HashMap.java:805) ~[na:na]\r\n\tat java.base/java.util.HashSet.remove(HashSet.java:245) ~[na:na]\r\n\tat org.hibernate.loader.ast.internal.LoaderSqlAstCreationState.removeVisitedAssociationKey(LoaderSqlAstCreationState.java:158) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\r\n\tat org.hibernate.metamodel.mapping.internal.ToOneAttributeMapping.withRegisteredAssociationKeys(ToOneAttributeMapping.java:1507) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\r\n\tat org.hibernate.metamodel.mapping.internal.ToOneAttributeMapping.generateFetch(ToOneAttributeMapping.java:1233) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\r\n\tat org.hibernate.metamodel.mapping.internal.ToOneAttributeMapping.generateFetch(ToOneAttributeMapping.java:107) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\r\n\tat org.hibernate.sql.results.graph.FetchParent.generateFetchableFetch(FetchParent.java:105) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\r\n\tat org.hibernate.loader.ast.internal.LoaderSelectBuilder.lambda$createFetchableBiConsumer$7(LoaderSelectBuilder.java:846) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\r\n\tat org.hibernate.loader.ast.internal.LoaderSelectBuilder$$Lambda$986/0x000001d09f7b5d10.accept(Unknown Source) ~[na:na]\r\n\tat org.hibernate.loader.ast.internal.LoaderSelectBuilder.visitFetches(LoaderSelectBuilder.java:684) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\r\n\tat org.hibernate.loader.ast.internal.LoaderSelectBuilder$$Lambda$979/0x000001d09f7afd68.visitFetches(Unknown Source) ~[na:na]\r\n\tat org.hibernate.loader.ast.internal.LoaderSqlAstCreationState.visitFetches(LoaderSqlAstCreationState.java:118) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\r\n\tat org.hibernate.sql.results.graph.AbstractFetchParent.afterInitialize(AbstractFetchParent.java:32) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\r\n\tat org.hibernate.sql.results.graph.entity.AbstractEntityResultGraphNode.afterInitialize(AbstractEntityResultGraphNode.java:100) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\r\n\tat org.hibernate.sql.results.graph.entity.internal.EntityFetchJoinedImpl.&lt;init&gt;(EntityFetchJoinedImpl.java:54) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\r\n\tat org.hibernate.metamodel.mapping.internal.ToOneAttributeMapping.lambda$generateFetch$0(ToOneAttributeMapping.java:1258) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\r\n\tat org.hibernate.metamodel.mapping.internal.ToOneAttributeMapping$$Lambda$991/0x000001d09f7bc228.get(Unknown Source) ~[na:na]\r\n\tat org.hibernate.metamodel.mapping.internal.ToOneAttributeMapping.withRegisteredAssociationKeys(ToOneAttributeMapping.java:1503) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\r\n\tat org.hibernate.metamodel.mapping.internal.ToOneAttributeMapping.generateFetch(ToOneAttributeMapping.java:1233) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\r\n\tat org.hibernate.metamodel.mapping.internal.ToOneAttributeMapping.generateFetch(ToOneAttributeMapping.java:107) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\r\n\tat org.hibernate.sql.results.graph.FetchParent.generateFetchableFetch(FetchParent.java:105) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\r\n\tat org.hibernate.loader.ast.internal.LoaderSelectBuilder.lambda$createFetchableBiConsumer$7(LoaderSelectBuilder.java:846) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\r\n\tat org.hibernate.loader.ast.internal.LoaderSelectBuilder$$Lambda$986/0x000001d09f7b5d10.accept(Unknown Source) ~[na:na]\r\n\tat org.hibernate.loader.ast.internal.LoaderSelectBuilder.visitFetches(LoaderSelectBuilder.java:684) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\r\n\tat org.hibernate.loader.ast.internal.LoaderSelectBuilder$$Lambda$979/0x000001d09f7afd68.visitFetches(Unknown Source) ~[na:na]\r\n\tat org.hibernate.loader.ast.internal.LoaderSqlAstCreationState.visitFetches(LoaderSqlAstCreationState.java:118) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\r\n\tat org.hibernate.sql.results.graph.AbstractFetchParent.afterInitialize(AbstractFetchParent.java:32) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\r\n\r\n\r\nProcess finished with exit code 0\r\n```\r\n\r\nNote that my entities were annotated with `@Audited` and that threw another XML type exception so I commented it out and now I get the error above.","title":"Error creating bean with name &#39;entityManagerFactory&#39; defined in class path resource []: Java heap space","body":"<p>I have an application that uses spring-boot version 2.6.4 and the entities uses <code>javax.persistence</code> API, but I need to add this DataTables dependency</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.github.darrachequesne&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-data-jpa-datatables&lt;/artifactId&gt;\n    &lt;version&gt;6.0.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>But this cannot work with that version of Spring, so I upgraded to 3.1.2 and used the <code>jakarta.persistence</code> API instead of the of the <code>javax.persistence</code> API and now the application won't start and it takes about 40 minutes to throw the following exception&quot;</p>\n<pre><code>Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.\n2023-09-15T11:56:25.431-04:00 ERROR 6052 --- [  restartedMain] o.s.boot.SpringApplication               : Application run failed\n\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Java heap space\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751) ~[spring-beans-6.0.4.jar:6.0.4]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599) ~[spring-beans-6.0.4.jar:6.0.4]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521) ~[spring-beans-6.0.4.jar:6.0.4]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326) ~[spring-beans-6.0.4.jar:6.0.4]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.4.jar:6.0.4]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324) ~[spring-beans-6.0.4.jar:6.0.4]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.0.4.jar:6.0.4]\n    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130) ~[spring-context-6.0.4.jar:6.0.4]\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905) ~[spring-context-6.0.4.jar:6.0.4]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584) ~[spring-context-6.0.4.jar:6.0.4]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.0.2.jar:3.0.2]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730) ~[spring-boot-3.0.2.jar:3.0.2]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432) ~[spring-boot-3.0.2.jar:3.0.2]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-3.0.2.jar:3.0.2]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1302) ~[spring-boot-3.0.2.jar:3.0.2]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1291) ~[spring-boot-3.0.2.jar:3.0.2]\n    at com.aegis.kyc.KycApplication.main(KycApplication.java:29) ~[classes/:na]\n    at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:578) ~[na:na]\n    at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49) ~[spring-boot-devtools-3.0.2.jar:3.0.2]\nCaused by: java.lang.OutOfMemoryError: Java heap space\n    at java.base/java.util.AbstractList.listIterator(AbstractList.java:342) ~[na:na]\n    at java.base/java.util.AbstractList.listIterator(AbstractList.java:313) ~[na:na]\n    at java.base/java.util.AbstractList.equals(AbstractList.java:545) ~[na:na]\n    at org.hibernate.metamodel.mapping.AssociationKey.equals(AssociationKey.java:44) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\n    at java.base/java.util.HashMap.removeNode(HashMap.java:826) ~[na:na]\n    at java.base/java.util.HashMap.remove(HashMap.java:805) ~[na:na]\n    at java.base/java.util.HashSet.remove(HashSet.java:245) ~[na:na]\n    at org.hibernate.loader.ast.internal.LoaderSqlAstCreationState.removeVisitedAssociationKey(LoaderSqlAstCreationState.java:158) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\n    at org.hibernate.metamodel.mapping.internal.ToOneAttributeMapping.withRegisteredAssociationKeys(ToOneAttributeMapping.java:1507) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\n    at org.hibernate.metamodel.mapping.internal.ToOneAttributeMapping.generateFetch(ToOneAttributeMapping.java:1233) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\n    at org.hibernate.metamodel.mapping.internal.ToOneAttributeMapping.generateFetch(ToOneAttributeMapping.java:107) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\n    at org.hibernate.sql.results.graph.FetchParent.generateFetchableFetch(FetchParent.java:105) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\n    at org.hibernate.loader.ast.internal.LoaderSelectBuilder.lambda$createFetchableBiConsumer$7(LoaderSelectBuilder.java:846) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\n    at org.hibernate.loader.ast.internal.LoaderSelectBuilder$$Lambda$986/0x000001d09f7b5d10.accept(Unknown Source) ~[na:na]\n    at org.hibernate.loader.ast.internal.LoaderSelectBuilder.visitFetches(LoaderSelectBuilder.java:684) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\n    at org.hibernate.loader.ast.internal.LoaderSelectBuilder$$Lambda$979/0x000001d09f7afd68.visitFetches(Unknown Source) ~[na:na]\n    at org.hibernate.loader.ast.internal.LoaderSqlAstCreationState.visitFetches(LoaderSqlAstCreationState.java:118) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\n    at org.hibernate.sql.results.graph.AbstractFetchParent.afterInitialize(AbstractFetchParent.java:32) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\n    at org.hibernate.sql.results.graph.entity.AbstractEntityResultGraphNode.afterInitialize(AbstractEntityResultGraphNode.java:100) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\n    at org.hibernate.sql.results.graph.entity.internal.EntityFetchJoinedImpl.&lt;init&gt;(EntityFetchJoinedImpl.java:54) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\n    at org.hibernate.metamodel.mapping.internal.ToOneAttributeMapping.lambda$generateFetch$0(ToOneAttributeMapping.java:1258) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\n    at org.hibernate.metamodel.mapping.internal.ToOneAttributeMapping$$Lambda$991/0x000001d09f7bc228.get(Unknown Source) ~[na:na]\n    at org.hibernate.metamodel.mapping.internal.ToOneAttributeMapping.withRegisteredAssociationKeys(ToOneAttributeMapping.java:1503) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\n    at org.hibernate.metamodel.mapping.internal.ToOneAttributeMapping.generateFetch(ToOneAttributeMapping.java:1233) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\n    at org.hibernate.metamodel.mapping.internal.ToOneAttributeMapping.generateFetch(ToOneAttributeMapping.java:107) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\n    at org.hibernate.sql.results.graph.FetchParent.generateFetchableFetch(FetchParent.java:105) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\n    at org.hibernate.loader.ast.internal.LoaderSelectBuilder.lambda$createFetchableBiConsumer$7(LoaderSelectBuilder.java:846) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\n    at org.hibernate.loader.ast.internal.LoaderSelectBuilder$$Lambda$986/0x000001d09f7b5d10.accept(Unknown Source) ~[na:na]\n    at org.hibernate.loader.ast.internal.LoaderSelectBuilder.visitFetches(LoaderSelectBuilder.java:684) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\n    at org.hibernate.loader.ast.internal.LoaderSelectBuilder$$Lambda$979/0x000001d09f7afd68.visitFetches(Unknown Source) ~[na:na]\n    at org.hibernate.loader.ast.internal.LoaderSqlAstCreationState.visitFetches(LoaderSqlAstCreationState.java:118) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\n    at org.hibernate.sql.results.graph.AbstractFetchParent.afterInitialize(AbstractFetchParent.java:32) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\n\n\nProcess finished with exit code 0\n</code></pre>\n<p>Note that my entities were annotated with <code>@Audited</code> and that threw another XML type exception so I commented it out and now I get the error above.</p>\n"},{"tags":["java","eclipse","game-development","frame-rate"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":3,"creation_date":1694529648,"post_id":77090096,"comment_id":135901300,"body_markdown":"if you are &#39;new to programming&#39;, you should start at the beginning, not trying to create a complex application, specially not if it uses tools and frameworks you don&#39;t understand. You show way too little information for us to go on (and we&#39;re definitely not going through that link), put all relevant information needed to debug in the question itself, but seriously, familiarize yourself with the tools and language before taking on big projects","body":"if you are &#39;new to programming&#39;, you should start at the beginning, not trying to create a complex application, specially not if it uses tools and frameworks you don&#39;t understand. You show way too little information for us to go on (and we&#39;re definitely not going through that link), put all relevant information needed to debug in the question itself, but seriously, familiarize yourself with the tools and language before taking on big projects"}],"answers":[{"tags":[],"owner":{"account_id":20798008,"reputation":181,"user_id":15274669,"display_name":"majixin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694796128,"creation_date":1694793462,"answer_id":77113793,"question_id":77090096,"body_markdown":"I don&#39;t think learning coding while making a game is inherently bad. You encounter real-world problems that require thinking and good problem solving. I assume your update routine is also called 2300 times per second. If it records when it last executed, then if that time is less than 1000ms divided by desired-frame-rate, you should just return from the function.\r\n\r\nWhat you have is a function that increments ```frames``` counter. And when the ```System.currentTimeMillis() - lastCheck &gt;= 1000``` updates ```lastCheck``` time and resets the counter for ```frames```.\r\n\r\nWhat seems wrong here is where ```repaint()``` is located. It&#39;s being called each time ```paintComponent``` is called, rather than each time you would wish to permit an actual ```repaint()```.\r\n\r\nPlacing the repaint in to the if-statement won&#39;t work either. That is simply waiting 1000ms (1 second) before outputting the FPS rate.\r\n\r\nYou also lack the function I describe in my opening statements.\r\n\r\nYou need to:\r\n - add a variable that stores the time when the last repaint was called\r\n - add some conditional logic similar to the FPS if-statement to deduce when enough time has passed and you should actually call repaint\r\n\r\nI&#39;ve not put a running sample together, but I think the following is what you need, albeit it might need a tweak because I haven&#39;t tested it.\r\n\r\n```\r\n// class member fields\r\nlong lastRepaintTime = System.currentTimeMillis();\r\nlong desiredMaxFrameRate = 30;\r\nlong frameRateInterval = 1000 / desiredMaxFrameRate;\r\n\r\n\r\npublic void paintComponent(Graphics g) {\r\n\tsuper.paintComponent(g);\r\n\t\r\n\tlong now = System.currentTimeMillis();\r\n\t\r\n\t// only do UI activity if the frameRateInterval has elapsed\r\n\tif (now - lastRepaintTime &gt;= frameRateInterval)\r\n\t{\r\n\t    frames++;\t// only count frames we actually render\r\n\t\tupdateRectangle();\r\n\t\tg.setColor(color);\r\n\t\tg.fillRect((int)xDelta, (int)yDelta, 50, 50);\r\n\r\n\t\t// basic FPS counter - check if it&#39;s been 1000+ms since we last output the frame count\r\n\t\tif(now - lastCheck &gt;= 1000) {\r\n\t\t\tlastCheck = System.currentTimeMillis();\r\n\t\t\tSystem.out.println(&quot;FPS: &quot; + frames);\r\n\t\t\tframes = 0;\r\n\t\t}\r\n\t\trepaint();\t                                  // perform the actual repaint/rendering\r\n        lastRepaintTime = System.currentTimeMillis(); // update the lastRepaintTime\r\n\t}\r\n}\r\n```\r\n\r\nEDIT: it isn&#39;t clear how you end up with the FPS always being 1 unless you somehow only call ```paintComponent``` each second. If you&#39;re trying to use ```lastCheck``` in unposted code to limit how often you call ```paintComponent``` you need to realize that ```lastCheck``` should only be used for when you wish to output the FPS rate, not for rate-limiting when you wish to update the screen.","title":"How can I set a cap for FPS in an Eclipse IDE project?","body":"<p>I don't think learning coding while making a game is inherently bad. You encounter real-world problems that require thinking and good problem solving. I assume your update routine is also called 2300 times per second. If it records when it last executed, then if that time is less than 1000ms divided by desired-frame-rate, you should just return from the function.</p>\n<p>What you have is a function that increments <code>frames</code> counter. And when the <code>System.currentTimeMillis() - lastCheck &gt;= 1000</code> updates <code>lastCheck</code> time and resets the counter for <code>frames</code>.</p>\n<p>What seems wrong here is where <code>repaint()</code> is located. It's being called each time <code>paintComponent</code> is called, rather than each time you would wish to permit an actual <code>repaint()</code>.</p>\n<p>Placing the repaint in to the if-statement won't work either. That is simply waiting 1000ms (1 second) before outputting the FPS rate.</p>\n<p>You also lack the function I describe in my opening statements.</p>\n<p>You need to:</p>\n<ul>\n<li>add a variable that stores the time when the last repaint was called</li>\n<li>add some conditional logic similar to the FPS if-statement to deduce when enough time has passed and you should actually call repaint</li>\n</ul>\n<p>I've not put a running sample together, but I think the following is what you need, albeit it might need a tweak because I haven't tested it.</p>\n<pre><code>// class member fields\nlong lastRepaintTime = System.currentTimeMillis();\nlong desiredMaxFrameRate = 30;\nlong frameRateInterval = 1000 / desiredMaxFrameRate;\n\n\npublic void paintComponent(Graphics g) {\n    super.paintComponent(g);\n    \n    long now = System.currentTimeMillis();\n    \n    // only do UI activity if the frameRateInterval has elapsed\n    if (now - lastRepaintTime &gt;= frameRateInterval)\n    {\n        frames++;   // only count frames we actually render\n        updateRectangle();\n        g.setColor(color);\n        g.fillRect((int)xDelta, (int)yDelta, 50, 50);\n\n        // basic FPS counter - check if it's been 1000+ms since we last output the frame count\n        if(now - lastCheck &gt;= 1000) {\n            lastCheck = System.currentTimeMillis();\n            System.out.println(&quot;FPS: &quot; + frames);\n            frames = 0;\n        }\n        repaint();                                    // perform the actual repaint/rendering\n        lastRepaintTime = System.currentTimeMillis(); // update the lastRepaintTime\n    }\n}\n</code></pre>\n<p>EDIT: it isn't clear how you end up with the FPS always being 1 unless you somehow only call <code>paintComponent</code> each second. If you're trying to use <code>lastCheck</code> in unposted code to limit how often you call <code>paintComponent</code> you need to realize that <code>lastCheck</code> should only be used for when you wish to output the FPS rate, not for rate-limiting when you wish to update the screen.</p>\n"}],"owner":{"account_id":29423631,"reputation":1,"user_id":22544870,"display_name":"typhoon"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694796128,"creation_date":1694528926,"question_id":77090096,"body_markdown":"While following a tutorial for game development in Java (Guide is by Kaarin Gaming, source: https://www.youtube.com/watch?v=aFS9Whsoecc&amp;list=PL4rzdwizLaxYmltJQRjq18a9gsSyEQQ-0&amp;index=8 ), I ran into an error on limiting my FPS count. His code looks mostly similar to my code other than for a few lines, \r\n\r\n```\r\npublic void paintComponent(Graphics g) {\r\n\t\tsuper.paintComponent(g);\r\n\t\t\r\n\t\t\r\n\t\tupdateRectangle();\r\n\t\tg.setColor(color);\r\n\t\tg.fillRect((int)xDelta, (int)yDelta, 50, 50);\r\n\t\t\r\n\t\t// basic FPS counter\r\n\t\t\t\tframes++;\r\n\t\t\t\tif(System.currentTimeMillis() - lastCheck &gt;= 1000) {\r\n\t\t\t\t\tlastCheck = System.currentTimeMillis();\r\n\t\t\t\t\tSystem.out.println(&quot;FPS: &quot; + frames);\r\n\t\t\t\t\tframes = 0;\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\trepaint();\r\n\t}\r\n```\r\n\r\nWhile the repaint(); is there, the game runs at 2300 FPS, which is way too high. So what he does to fix it is to add some code (of which I&#39;ve already added) and then remove the repaint();. However, when I do it, the game wont run and the FPS will stay at a static 1. \r\n\r\n\r\nI&#39;ve tried changing the intervals between frames refreshing, moving the repaint(); around to different parts of the code that might need it/don&#39;t have it yet, and I&#39;ve watched the video again to find a mistake but I haven&#39;t found anything. \r\n\r\nSomething else to note, I&#39;m new to programming. So if you do have an answer, please explain why so I can understand better, Thank you.","title":"How can I set a cap for FPS in an Eclipse IDE project?","body":"<p>While following a tutorial for game development in Java (Guide is by Kaarin Gaming, source: <a href=\"https://www.youtube.com/watch?v=aFS9Whsoecc&amp;list=PL4rzdwizLaxYmltJQRjq18a9gsSyEQQ-0&amp;index=8\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=aFS9Whsoecc&amp;list=PL4rzdwizLaxYmltJQRjq18a9gsSyEQQ-0&amp;index=8</a> ), I ran into an error on limiting my FPS count. His code looks mostly similar to my code other than for a few lines,</p>\n<pre><code>public void paintComponent(Graphics g) {\n        super.paintComponent(g);\n        \n        \n        updateRectangle();\n        g.setColor(color);\n        g.fillRect((int)xDelta, (int)yDelta, 50, 50);\n        \n        // basic FPS counter\n                frames++;\n                if(System.currentTimeMillis() - lastCheck &gt;= 1000) {\n                    lastCheck = System.currentTimeMillis();\n                    System.out.println(&quot;FPS: &quot; + frames);\n                    frames = 0;\n                    \n                }\n                repaint();\n    }\n</code></pre>\n<p>While the repaint(); is there, the game runs at 2300 FPS, which is way too high. So what he does to fix it is to add some code (of which I've already added) and then remove the repaint();. However, when I do it, the game wont run and the FPS will stay at a static 1.</p>\n<p>I've tried changing the intervals between frames refreshing, moving the repaint(); around to different parts of the code that might need it/don't have it yet, and I've watched the video again to find a mistake but I haven't found anything.</p>\n<p>Something else to note, I'm new to programming. So if you do have an answer, please explain why so I can understand better, Thank you.</p>\n"},{"tags":["java","hibernate","jpa"],"owner":{"account_id":18287195,"reputation":13,"user_id":20983892,"display_name":"Douglas Monteiro"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694795900,"creation_date":1694795900,"question_id":77114057,"body_markdown":"I&#39;m working with Hibernate and JPA&#39;s @Embeddable annotation to create composite attributes for my entities (I&#39;m using composites as value objects). I&#39;ve noticed some inconsistent behavior when these embeddables contain a Collection attribute. Specifically, the way Hibernate initializes these composites varies based on the presence of collection attributes.\r\n\r\n**Context:**\r\n\r\n**Null Composite Handling:** If all attributes within a composite (@Embeddable) object are null, Hibernate considers the entire composite as null. This is logical and expected.\r\n\r\n**Null Collection Handling:** If an attribute of type Collection is null when Hibernate loads data from the database, it sets this attribute to an empty collection. This makes sense since having null collections is generally considered bad practice.\r\n\r\n**The Issue:**\r\n\r\nThe above behaviors together create an inconsistent initialization pattern:\r\n\r\nWhen I retrieve an @Embeddable object from the database that was originally saved with only null attributes, and one of those attributes is a Collection, Hibernate initializes the composite. This happens because the collection attribute is set to empty, thereby making the composite non-null.\r\n\r\nExample:\r\nTo clarify, for some embedded properties, I end up having to do complex checks like:\r\n\r\n```\r\nif (entity.getAttribute() != null &amp;&amp; \r\n    entity.getAttribute().getFoo() != null &amp;&amp; \r\n    !entity.getAttribute().getCollection().isEmpty()) {\r\n  //...\r\n}\r\n```\r\n\r\n\r\n\r\n**Workaround:**\r\n\r\nI thought about introducing an isValid() method in all my @Embeddable classes. With this, I would always check:\r\n\r\n```\r\nif (entity.getAttribute() != null &amp;&amp; entity.getAttribute().isValid()) {\r\n  //...\r\n}\r\n```\r\n\r\nHowever, this approach feels like a hack and clutters the domain model with code that&#39;s solely there to mitigate an ORM behavior.\r\n\r\n**Question:**\r\n\r\nIs there a way to configure Hibernate to avoid initializing the collections within @Embeddable objects that have all other attributes set to null? I want to preserve the nullability of the entire composite object in such cases.","title":"How to Prevent Hibernate from Initializing Collections in Empty Composites?","body":"<p>I'm working with Hibernate and JPA's @Embeddable annotation to create composite attributes for my entities (I'm using composites as value objects). I've noticed some inconsistent behavior when these embeddables contain a Collection attribute. Specifically, the way Hibernate initializes these composites varies based on the presence of collection attributes.</p>\n<p><strong>Context:</strong></p>\n<p><strong>Null Composite Handling:</strong> If all attributes within a composite (@Embeddable) object are null, Hibernate considers the entire composite as null. This is logical and expected.</p>\n<p><strong>Null Collection Handling:</strong> If an attribute of type Collection is null when Hibernate loads data from the database, it sets this attribute to an empty collection. This makes sense since having null collections is generally considered bad practice.</p>\n<p><strong>The Issue:</strong></p>\n<p>The above behaviors together create an inconsistent initialization pattern:</p>\n<p>When I retrieve an @Embeddable object from the database that was originally saved with only null attributes, and one of those attributes is a Collection, Hibernate initializes the composite. This happens because the collection attribute is set to empty, thereby making the composite non-null.</p>\n<p>Example:\nTo clarify, for some embedded properties, I end up having to do complex checks like:</p>\n<pre><code>if (entity.getAttribute() != null &amp;&amp; \n    entity.getAttribute().getFoo() != null &amp;&amp; \n    !entity.getAttribute().getCollection().isEmpty()) {\n  //...\n}\n</code></pre>\n<p><strong>Workaround:</strong></p>\n<p>I thought about introducing an isValid() method in all my @Embeddable classes. With this, I would always check:</p>\n<pre><code>if (entity.getAttribute() != null &amp;&amp; entity.getAttribute().isValid()) {\n  //...\n}\n</code></pre>\n<p>However, this approach feels like a hack and clutters the domain model with code that's solely there to mitigate an ORM behavior.</p>\n<p><strong>Question:</strong></p>\n<p>Is there a way to configure Hibernate to avoid initializing the collections within @Embeddable objects that have all other attributes set to null? I want to preserve the nullability of the entire composite object in such cases.</p>\n"},{"tags":["java","serialization"],"comments":[{"owner":{"account_id":350117,"reputation":8663,"user_id":685806,"accept_rate":44,"display_name":"Pino"},"score":2,"creation_date":1694791092,"post_id":77113528,"comment_id":135942012,"body_markdown":"The best approach is not to try out, it is to synchronize to be safe :-)","body":"The best approach is not to try out, it is to synchronize to be safe :-)"},{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1694799044,"post_id":77113528,"comment_id":135943435,"body_markdown":"1. No.  2. No.  3. It will always serialize the value you _don&#39;t_ want except on Tuesdays.","body":"1. No.  2. No.  3. It will always serialize the value you <i>don&#39;t</i> want except on Tuesdays."},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1694803403,"post_id":77113528,"comment_id":135944139,"body_markdown":"To clarify, are you referring to the _Java_ _[serialization](https://docs.oracle.com/javase/tutorial/jndi/objects/serial.html)_ functionality, or is the word &quot;serializing&quot; a _threading_ term?","body":"To clarify, are you referring to the <i>Java</i> <i><a href=\"https://docs.oracle.com/javase/tutorial/jndi/objects/serial.html\" rel=\"nofollow noreferrer\">serialization</a></i> functionality, or is the word &quot;serializing&quot; a <i>threading</i> term?"}],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694795890,"creation_date":1694791253,"answer_id":77113566,"question_id":77113528,"body_markdown":"\r\n\r\n&gt; 1. Does Serialization put any kind of lock on the object by default or both Serialization and Modification (calling setter method on the object) can go hand in hand when performed concurrently?\r\n\r\nJava Object Serialization does not lock object that it is serializing.  It would be up to the thread that calls the `writeObject` method to ensure that it does this while holding appropriate locks to prevent other threads from mutating the object while it is being serialized.\r\n\r\n(Java doesn&#39;t have any way to block all other threads&#39; writes to an object ... unless the threads being blocked are cooperating by synchronizing in some way with the blocking thread(s).)\r\n\r\n&gt; 2. Can Serialization have any performance impact (execution runtime) on modification of an object i.e. invocation of setter methods concurrently?\r\n\r\nNot *per se*.  But if you lock an object to serialize it, that could delay other threads, and potentially have performance concerns.\r\n\r\n&gt; 3.  If the setter method is invoked when the Serialization is in progress - What value will get Serialized for the field being populated by setter method?\r\n\r\nThat is not defined.  Basically you are talking about the behavior of code that is not thread-safe.\r\n\r\n\r\n-----------------------\r\n\r\nPino commented:\r\n\r\n&gt;  The best approach is not to try out, it is to synchronize to be safe :-) \r\n\r\nAbsolutely correct.  And I will go a step further.  If you do try to serialize and mutate an object at the same time:\r\n  \r\n  - you are highly likely to run into problems at some point&lt;sup&gt;1&lt;/sup&gt;,\r\n  - they will have unpredictable symptoms, and\r\n  - they will be hard to diagnose.\r\n\r\n&lt;sup&gt;1 - ... but it is not possible to predict when.  For example, they might only occur under heavy load, or on certain machines, or with certain Java releases.&lt;/sup&gt;","title":"Java - Modifying and Serializing an Object concurrently","body":"<blockquote>\n<ol>\n<li>Does Serialization put any kind of lock on the object by default or both Serialization and Modification (calling setter method on the object) can go hand in hand when performed concurrently?</li>\n</ol>\n</blockquote>\n<p>Java Object Serialization does not lock object that it is serializing.  It would be up to the thread that calls the <code>writeObject</code> method to ensure that it does this while holding appropriate locks to prevent other threads from mutating the object while it is being serialized.</p>\n<p>(Java doesn't have any way to block all other threads' writes to an object ... unless the threads being blocked are cooperating by synchronizing in some way with the blocking thread(s).)</p>\n<blockquote>\n<ol start=\"2\">\n<li>Can Serialization have any performance impact (execution runtime) on modification of an object i.e. invocation of setter methods concurrently?</li>\n</ol>\n</blockquote>\n<p>Not <em>per se</em>.  But if you lock an object to serialize it, that could delay other threads, and potentially have performance concerns.</p>\n<blockquote>\n<ol start=\"3\">\n<li>If the setter method is invoked when the Serialization is in progress - What value will get Serialized for the field being populated by setter method?</li>\n</ol>\n</blockquote>\n<p>That is not defined.  Basically you are talking about the behavior of code that is not thread-safe.</p>\n<hr />\n<p>Pino commented:</p>\n<blockquote>\n<p>The best approach is not to try out, it is to synchronize to be safe :-)</p>\n</blockquote>\n<p>Absolutely correct.  And I will go a step further.  If you do try to serialize and mutate an object at the same time:</p>\n<ul>\n<li>you are highly likely to run into problems at some point<sup>1</sup>,</li>\n<li>they will have unpredictable symptoms, and</li>\n<li>they will be hard to diagnose.</li>\n</ul>\n<p><sup>1 - ... but it is not possible to predict when.  For example, they might only occur under heavy load, or on certain machines, or with certain Java releases.</sup></p>\n"},{"tags":[],"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694795194,"creation_date":1694794711,"answer_id":77113947,"question_id":77113528,"body_markdown":"&gt; The best approach would have been to try out and see the outcome\r\n\r\nThat&#39;s almost always true. __But it is wrong here__.\r\n\r\nThe problem is as follows:\r\n\r\nJava as a specification is almost always _exact_. It does not generally write things in terms of: &quot;And when you do this, what happens is undefined&quot;. It also rarely engages in: &quot;And when you do this, the compiler / runtime / OS / phase of the moon right now is free to decide to implement it like this, or like this&quot;. Contrast to e.g. the C spec where the spec explicitly goes out of its way to indicate that the bit size of a &#39;word&#39; is actually a choice the implementation can make, i.e. in C the exact point where an `int` overflows (and even _how_ it overflows) is not dictated by the spec, so you have no idea.\r\n\r\nIn contrast to java, where the spec dictates it precisely: A java `int` overflows when you add 1 to `2^31-1`, and it overflows into `-2^31`, because in java `int` is a signed 32-bit 2&#39;s complement representation. The spec decrees it. A JVM that doesn&#39;t work that way is buggy.\r\n\r\n__But that doesn&#39;t really apply to concurrency specifically__. Java doesn&#39;t exactly use the term &#39;undefined behaviour&#39;, but the selection of behaviours a JVM can have in light of concurrent modification is nebulous enough that it might as well be. Specifically, the spec says that the concept of &#39;sequencing&#39; __is not guaranteed__. As in, the spec neither states that a JVM must act like sequencing exists, nor that a JVM must necessarily _not_ sequence things. It simply states that a JVM may, or may not, it&#39;s up to the JVM, and it doesn&#39;t have to be fair or consistent in its choice.\r\n\r\nIn other words, the JVM spec in this area reads, effectively:\r\n\r\n_&quot;Any time the JVM needs to decide if a write to one field by one thread is to be visible by another, the JVM will grab its evil coin and flip it. The change is synced to the other thread if the coin comes up heads. Evil coin means that the coin isn&#39;t necessarily fair. It might be tails every time this week, then next week it flips heads juuuuust as you&#39;re giving that demo to the important customer, and then its like a fair coin next month. Such a JVM, while weird, is not buggy - your code is, if your code&#39;s behaviour is dependent on the result of the evil coin&quot;_.\r\n\r\nIn light of the fact that it works this, way, hopefully it is now obvious why _try it and see_ __is a big mistake__. Because during your try it and see phase, the coin might well flip heads every time, thus leading you to draw the _entirely incorrect_ conclusion that a JVM reliably flips heads.\r\n\r\n## Okay, but, what are you talking about? Where is the evil coin applied?\r\n\r\nSpecifically it&#39;s about the sequencing of field writes. Given:\r\n\r\n```\r\nclass Test {\r\n  static int a = 1;\r\n  static int b = 10;\r\n\r\n  static void modifyThem() {\r\n    a = 2;\r\n    b = 20;\r\n  }\r\n\r\n  public static void main(String[] args) {\r\n    new Thread(() -&gt; modifyThem()).start();\r\n    new Thread(() -&gt; printThem()).start();\r\n  }\r\n\r\n  static void printThem() {\r\n    System.out.println(a);\r\n    System.out.println(b);\r\n  }\r\n}\r\n```\r\n\r\nThis code&#39;s behaviour __depends on the outcome of the evil coin flip__. The JVM isn&#39;t quite C; there is no undefined behaviour here. But there is _arbitrary_ behaviour. The following results are __all__ possible. If you file a bug with the OpenJDK team that your JVM is broken because what it emits is apparently random (a different result is produced everytime you run the app), your bug would be closed as &#39;JVM working as intended&#39;:\r\n\r\n* 2/20\r\n* 1/20\r\n* 2/10\r\n* 1/10\r\n\r\nIf longs are involved it gets even crazier (because the JVM reserves the right that you can witness &#39;sheared&#39; updates, where the top 32 bits have been updated but the bottom 32-bits haven&#39;t, or vice versa, but this is incredibly hard to observe because on every 64-bit JVM I&#39;m aware of, it is literally impossible to observe it in action. But the spec still says that a JVM that does shear, even a 64-bit one, is not broken).\r\n\r\nOn a simple Raspbery pi I&#39;m fairly sure you&#39;d observe 2/20 every single time you ran this. On most modern CPUs you probably observe 1/10 almost all the time. But 1/20 and 2/10 are also possible.\r\n\r\n1/20 is a particularly bizarre case: That means the `a = 2;` statement appears to not have run yet, whereas the `b = 20;` statement has. But.. `a = 2;` __is above `b = 20;`__ so that seems utterly nuts.\r\n\r\nAnd nevertheless the JVM reserves the right to do that.\r\n\r\nThe key way to think about it is as follows: The JVM does not _actually_ guarantee that things that, to your mind&#39;s reconstruction of how a JVM does things, happens _before_ another thing happens, are observable by the later thing: __The JVM does not _actually_ guarantee that sequencing exists__ - things are not guaranteed to run in the exact order you wrote them in your source file!\r\n\r\nIn other words, it&#39;s wrong to say &#39;evidently, a = 2; has not run yet&#39;. It is right to say: &quot;Thread B is observing a state as it was _before_ `a = 2;` has run&quot;.\r\n\r\nThe way to fight the evil coin is also in the JVM specification. Specifically, the [Java Memory Model section: JLS &#167;17](https://docs.oracle.com/javase/specs/jls/se8/html/jls-17.html).\r\n\r\nThe spec saves you from the evil coin by introducing the notion of establishing &#39;Happens Before&#39; relationships: A very explicit enumerated list of acts which establish that line X (or, to be precise, bytecode X) is to be considered as &#39;happens before&#39; bytecode Y. When such a relationship exists, the JVM __guarantees__ you that it is not possible for Y to observe state as it was _before_ X happens. That doesn&#39;t mean the JVM promises that X is &#39;run&#39; before &#39;Y&#39; - after all, if Y doesn&#39;t actually try to witness anything X did (it doesn&#39;t observe at all) the JVM is free to do whatever it wants. It also applies only to fields and such - for example, any attempt you make at trying to observe if some other code has run or not based on how long the CPU needs to do stuff is _not part of the deal_ - this principle at the CPU level is the exact cause of the [Spectre security vulnerability](https://en.wikipedia.org/wiki/Spectre_(security_vulnerability)) even (observe things you&#39;re not meant to by checking how long things take, not by actually reading data).\r\n\r\nSo that&#39;s how you fight the coin: You establish HBs. The easy ways:\r\n\r\n* Natural HB: Within a single thread, any statement A that lexically appears in the code flow before statement B establishes HB(A, B). i.e. if you run `a = 0; a = 5; System.out.println(a);` all in one thread that cannot possibly print 0, obviously.\r\n* thread control: `thread.start()` is HB relative to the first statement inside the thread. Similarly, `thread.yield()` vs. a still actively running thread is HB relative to that thread ending.\r\n* synchronized: Exiting a `synchronized (x)` block is HB relative to any code that enters such a block afterwards.\r\n* volatile: Reads and writes to volatile fields establish HB, though it&#39;s not always easy to determine which one is the HB one.\r\n\r\nThere&#39;s more, but those are the highlights. A few important lessons from this:\r\n\r\n* __Two+ threads all interacting with the same field is ALWAYS BROKEN, and in UNTESTABLE WAYS, unless either [A] everything is just reading, or [B] it&#39;s all protected by HB relationships, which.. you can&#39;t test for. Yes, inter-thread communication via fields is incredibly complicated and very error prone. Try to avoid it entirely__. (One easy way to avoid it? Use a database. It has transactions, much simpler).\r\n* Loads of java internal code establishes HBs, which further complicates any attempt to witness the evil coin in action. For example, __on almost all systems, `System.out.println` uses `synchronized()` and therefore establishes HB relative to other threads also doing it. Thus, using sysout statements to print out states in threads so you can see what happens breaks the very thing you are attempting to observe!__\r\n\r\n## Why?\r\n\r\nModern CPU design. Here&#39;s a weird thing you probably didn&#39;t know: Modern CPUs __cannot read memory. At all.__ - yes, it has opcodes that write and read to memory but those are emulated. What CPUs can actually only do, is read from their own on-die cache pages, and ask the memory controller to shuttle entire pagefuls (64k usually) of memory between actual main RAM and one of those on-die cache pages ^1. It has a mapping that maintains which chunks (usually 64k in size, called a &#39;page&#39;) of main mem are in which of its limited set of on-die cache pages and will map any read or write op to main memory to a read/write op into its on-die pages with it. If the mapping says that the location that needs to be read or written is in a location that isn&#39;t mapped, the CPU:\r\n\r\n* Finds the on-die page that is eligible for eviction (generally the one least recently read/written).\r\n* Tells the memory controller to go write the _entire_ 64k it contains to the right place in the real main memory of the system, and simultaneously tells it to transfer all data in the entire 64k block that the CPU is interested in over it as it does so.\r\n* The CPU then __goes to sleep for 2000 cycles or something similarly massive__ because that&#39;s going to take a lot of time.\r\n\r\nThe problem is, if all CPUs are just zooming along doing their work such that the amount of main mem they touch is sufficiently localized that it&#39;s all mapped to on-die cores without any need to involve the memory controller, that&#39;s fantastic: No need for that 2000 cycle penalty then. But that also means __every CPU is in its own little universe__, and no write any CPU core does affects any other. The state of main memory after it&#39;s all done is kinda random - whatever CPU ended up telling the memory controller to sync its on-die page back to main mem _last_, &#39;wins&#39;.\r\n\r\nIf java made you promises about the observability of effects in other threads, then java would have to pay the 2000 cycle penalty after every field write, and __java would be ~2000x slower than it is now__. That&#39;s, obviously, ridiculous, so instead java gives you &#39;ridiculous&#39; rules about evil coins instead. Because that way it doesn&#39;t have to do that.\r\n\r\n## So what does serializing and concurrency have to do with each other?\r\n\r\nNothing whatsoever. Remember, concurrency __is broken by default__ - it only works if you explicitly take painstaking care to ensure every access to a single field from 2+ threads is protected with HB clauses, and serialization doesn&#39;t state that it establishes any, therefore, is broken if done in a concurrent environment.\r\n\r\nFurthermore, there is no such thing as &#39;locking an object&#39; in java. At best there&#39;s `synchronized (x) {}` but that doesn&#39;t really &quot;lock x&quot; - any other thread can do with x what it wants. a `synchronized (x)` statement only interacts with _other_ `synchronized (x)` statements. There _is no way in JVM-ese to lock an object in the sense that it freezes any other thread out from attempting to modify that object_.\r\n\r\n## Answering your questions\r\n\r\nWith all that context, the answers are easy:\r\n\r\n&gt; 1. Does Serialization put any kind of lock on the object by default\r\n\r\nThere&#39;s no such thing as a &#39;lock on an object&#39;, so trivially then: No it does not.\r\n\r\n&gt;  or both Serialization and Modification (calling setter method on the object) can go hand in hand when performed concurrently?\r\n\r\nNo, that will result in evil coin flips. Whilst in theory you can attempt to write code that allows evil coin flips but ends up with the same behaviour regardless of how they land, do not write code like that. At the very least it&#39;ll be utterly untestable, not to mention unreadable. Just don&#39;t. Hence: &quot;That results in evil coin flips, which means that code is broken, so do not write code like that&quot;.\r\n\r\n&gt; Can Serialization have any performance impact (execution runtime) on modification of an object i.e. invocation of setter methods concurrently?\r\n\r\nGiven that any code that serializes while simultaneously calling setters is broken without HBs, the answer is therefore: __Yes__, that has a performance impact, because establishing HBs has a performance impact. (Transfering data from one core to another takes 2000 cycles if not more. Even having one core tell another to cool its jets for a bit (awaiting some lock to clear) takes time: Not just the other core having to freeze for a bit or swap contexts to another job, but the mere act of conveying that info core-to-core takes time. CPUs are really fast and those cores are a few millimeters about. Electrons travel at something like 66% of the speed of light. To cross that millimeter? That&#39;s a long time, in CPU cycle terms, actually! Physics laws DEMAND that this has to cost some time!\r\n\r\n\r\n&gt; If the setter method is invoked when the Serialization is in progress - What value will get Serialized for the field being populated by setter method?\r\n\r\nThe evil coin flipped and that decides. It&#39;s guaranteed to be either the old, or the new value, but a JVM can decide to choose which one depending on the phase of the moon as far as the spec is concerned. And of course, if &#39;the value&#39; is an object with lots of state, you can of course get a sheared object written (where some of the fields of that object reflect the new state and some of it the old state).\r\n\r\n## An important sidenote\r\n\r\nSerialization, as in `java.io.Serializable`, is almost always a mistake. It&#39;s weird, complicated, not particularly efficient, its format is mostly opaque (it&#39;s certainly extremely hard to interact with that data from non-java code), it makes software updates incredibly complicated, it makes for very hard to test codebases (where you e.g. need to maintain newer and older versions of the same class simultaneously somehow, with multiple separate src roots to manage all that).\r\n\r\nInstead, use protobuf, JSON, XML, JSONB, YAML, CSV, handrolled formats, or anything else. Something a lot more explicit than java&#39;s baked in serialization mechanism. And that&#39;s also the opinion of the OpenJDK team itself. They aren&#39;t going to immediately deep-six the system (that&#39;d break stuff), but they vocally support the idea that it&#39;s.. very tricky to use right and very very _very_ rarely the right tool for the job.\r\n\r\n----\r\n\r\n[1] This is a very long answer, and nevertheless it is quite oversimplified. Most modern CPUs have layers of cache pages, some actually share them, the exact behaviour depends a bit on CPU architecture, CPUs themselves also have pipelines and re-ordering sequencers, and so much more. However, the core lessons in this answer, namely:\r\n\r\n* All attempts to have 2 threads interact by read/writing to the same field are to be considered broken by default.\r\n* HB is the only way to unbreak it. That, or avoid having _any_ fields interacted with by multiple threads and use message queues or databases instead to do it.\r\n* Behaviour is _effectively_ undefined, and not reliably so - you simply __cannot__ solve anything (be it ensuring that your code is working correctly, or be it learning more by toying around with these ideas) by &#39;trying it&#39;.\r\n\r\nare correct.\r\n","title":"Java - Modifying and Serializing an Object concurrently","body":"<blockquote>\n<p>The best approach would have been to try out and see the outcome</p>\n</blockquote>\n<p>That's almost always true. <strong>But it is wrong here</strong>.</p>\n<p>The problem is as follows:</p>\n<p>Java as a specification is almost always <em>exact</em>. It does not generally write things in terms of: &quot;And when you do this, what happens is undefined&quot;. It also rarely engages in: &quot;And when you do this, the compiler / runtime / OS / phase of the moon right now is free to decide to implement it like this, or like this&quot;. Contrast to e.g. the C spec where the spec explicitly goes out of its way to indicate that the bit size of a 'word' is actually a choice the implementation can make, i.e. in C the exact point where an <code>int</code> overflows (and even <em>how</em> it overflows) is not dictated by the spec, so you have no idea.</p>\n<p>In contrast to java, where the spec dictates it precisely: A java <code>int</code> overflows when you add 1 to <code>2^31-1</code>, and it overflows into <code>-2^31</code>, because in java <code>int</code> is a signed 32-bit 2's complement representation. The spec decrees it. A JVM that doesn't work that way is buggy.</p>\n<p><strong>But that doesn't really apply to concurrency specifically</strong>. Java doesn't exactly use the term 'undefined behaviour', but the selection of behaviours a JVM can have in light of concurrent modification is nebulous enough that it might as well be. Specifically, the spec says that the concept of 'sequencing' <strong>is not guaranteed</strong>. As in, the spec neither states that a JVM must act like sequencing exists, nor that a JVM must necessarily <em>not</em> sequence things. It simply states that a JVM may, or may not, it's up to the JVM, and it doesn't have to be fair or consistent in its choice.</p>\n<p>In other words, the JVM spec in this area reads, effectively:</p>\n<p><em>&quot;Any time the JVM needs to decide if a write to one field by one thread is to be visible by another, the JVM will grab its evil coin and flip it. The change is synced to the other thread if the coin comes up heads. Evil coin means that the coin isn't necessarily fair. It might be tails every time this week, then next week it flips heads juuuuust as you're giving that demo to the important customer, and then its like a fair coin next month. Such a JVM, while weird, is not buggy - your code is, if your code's behaviour is dependent on the result of the evil coin&quot;</em>.</p>\n<p>In light of the fact that it works this, way, hopefully it is now obvious why <em>try it and see</em> <strong>is a big mistake</strong>. Because during your try it and see phase, the coin might well flip heads every time, thus leading you to draw the <em>entirely incorrect</em> conclusion that a JVM reliably flips heads.</p>\n<h2>Okay, but, what are you talking about? Where is the evil coin applied?</h2>\n<p>Specifically it's about the sequencing of field writes. Given:</p>\n<pre><code>class Test {\n  static int a = 1;\n  static int b = 10;\n\n  static void modifyThem() {\n    a = 2;\n    b = 20;\n  }\n\n  public static void main(String[] args) {\n    new Thread(() -&gt; modifyThem()).start();\n    new Thread(() -&gt; printThem()).start();\n  }\n\n  static void printThem() {\n    System.out.println(a);\n    System.out.println(b);\n  }\n}\n</code></pre>\n<p>This code's behaviour <strong>depends on the outcome of the evil coin flip</strong>. The JVM isn't quite C; there is no undefined behaviour here. But there is <em>arbitrary</em> behaviour. The following results are <strong>all</strong> possible. If you file a bug with the OpenJDK team that your JVM is broken because what it emits is apparently random (a different result is produced everytime you run the app), your bug would be closed as 'JVM working as intended':</p>\n<ul>\n<li>2/20</li>\n<li>1/20</li>\n<li>2/10</li>\n<li>1/10</li>\n</ul>\n<p>If longs are involved it gets even crazier (because the JVM reserves the right that you can witness 'sheared' updates, where the top 32 bits have been updated but the bottom 32-bits haven't, or vice versa, but this is incredibly hard to observe because on every 64-bit JVM I'm aware of, it is literally impossible to observe it in action. But the spec still says that a JVM that does shear, even a 64-bit one, is not broken).</p>\n<p>On a simple Raspbery pi I'm fairly sure you'd observe 2/20 every single time you ran this. On most modern CPUs you probably observe 1/10 almost all the time. But 1/20 and 2/10 are also possible.</p>\n<p>1/20 is a particularly bizarre case: That means the <code>a = 2;</code> statement appears to not have run yet, whereas the <code>b = 20;</code> statement has. But.. <code>a = 2;</code> <strong>is above <code>b = 20;</code></strong> so that seems utterly nuts.</p>\n<p>And nevertheless the JVM reserves the right to do that.</p>\n<p>The key way to think about it is as follows: The JVM does not <em>actually</em> guarantee that things that, to your mind's reconstruction of how a JVM does things, happens <em>before</em> another thing happens, are observable by the later thing: <strong>The JVM does not <em>actually</em> guarantee that sequencing exists</strong> - things are not guaranteed to run in the exact order you wrote them in your source file!</p>\n<p>In other words, it's wrong to say 'evidently, a = 2; has not run yet'. It is right to say: &quot;Thread B is observing a state as it was <em>before</em> <code>a = 2;</code> has run&quot;.</p>\n<p>The way to fight the evil coin is also in the JVM specification. Specifically, the <a href=\"https://docs.oracle.com/javase/specs/jls/se8/html/jls-17.html\" rel=\"nofollow noreferrer\">Java Memory Model section: JLS §17</a>.</p>\n<p>The spec saves you from the evil coin by introducing the notion of establishing 'Happens Before' relationships: A very explicit enumerated list of acts which establish that line X (or, to be precise, bytecode X) is to be considered as 'happens before' bytecode Y. When such a relationship exists, the JVM <strong>guarantees</strong> you that it is not possible for Y to observe state as it was <em>before</em> X happens. That doesn't mean the JVM promises that X is 'run' before 'Y' - after all, if Y doesn't actually try to witness anything X did (it doesn't observe at all) the JVM is free to do whatever it wants. It also applies only to fields and such - for example, any attempt you make at trying to observe if some other code has run or not based on how long the CPU needs to do stuff is <em>not part of the deal</em> - this principle at the CPU level is the exact cause of the <a href=\"https://en.wikipedia.org/wiki/Spectre_(security_vulnerability)\" rel=\"nofollow noreferrer\">Spectre security vulnerability</a> even (observe things you're not meant to by checking how long things take, not by actually reading data).</p>\n<p>So that's how you fight the coin: You establish HBs. The easy ways:</p>\n<ul>\n<li>Natural HB: Within a single thread, any statement A that lexically appears in the code flow before statement B establishes HB(A, B). i.e. if you run <code>a = 0; a = 5; System.out.println(a);</code> all in one thread that cannot possibly print 0, obviously.</li>\n<li>thread control: <code>thread.start()</code> is HB relative to the first statement inside the thread. Similarly, <code>thread.yield()</code> vs. a still actively running thread is HB relative to that thread ending.</li>\n<li>synchronized: Exiting a <code>synchronized (x)</code> block is HB relative to any code that enters such a block afterwards.</li>\n<li>volatile: Reads and writes to volatile fields establish HB, though it's not always easy to determine which one is the HB one.</li>\n</ul>\n<p>There's more, but those are the highlights. A few important lessons from this:</p>\n<ul>\n<li><strong>Two+ threads all interacting with the same field is ALWAYS BROKEN, and in UNTESTABLE WAYS, unless either [A] everything is just reading, or [B] it's all protected by HB relationships, which.. you can't test for. Yes, inter-thread communication via fields is incredibly complicated and very error prone. Try to avoid it entirely</strong>. (One easy way to avoid it? Use a database. It has transactions, much simpler).</li>\n<li>Loads of java internal code establishes HBs, which further complicates any attempt to witness the evil coin in action. For example, <strong>on almost all systems, <code>System.out.println</code> uses <code>synchronized()</code> and therefore establishes HB relative to other threads also doing it. Thus, using sysout statements to print out states in threads so you can see what happens breaks the very thing you are attempting to observe!</strong></li>\n</ul>\n<h2>Why?</h2>\n<p>Modern CPU design. Here's a weird thing you probably didn't know: Modern CPUs <strong>cannot read memory. At all.</strong> - yes, it has opcodes that write and read to memory but those are emulated. What CPUs can actually only do, is read from their own on-die cache pages, and ask the memory controller to shuttle entire pagefuls (64k usually) of memory between actual main RAM and one of those on-die cache pages ^1. It has a mapping that maintains which chunks (usually 64k in size, called a 'page') of main mem are in which of its limited set of on-die cache pages and will map any read or write op to main memory to a read/write op into its on-die pages with it. If the mapping says that the location that needs to be read or written is in a location that isn't mapped, the CPU:</p>\n<ul>\n<li>Finds the on-die page that is eligible for eviction (generally the one least recently read/written).</li>\n<li>Tells the memory controller to go write the <em>entire</em> 64k it contains to the right place in the real main memory of the system, and simultaneously tells it to transfer all data in the entire 64k block that the CPU is interested in over it as it does so.</li>\n<li>The CPU then <strong>goes to sleep for 2000 cycles or something similarly massive</strong> because that's going to take a lot of time.</li>\n</ul>\n<p>The problem is, if all CPUs are just zooming along doing their work such that the amount of main mem they touch is sufficiently localized that it's all mapped to on-die cores without any need to involve the memory controller, that's fantastic: No need for that 2000 cycle penalty then. But that also means <strong>every CPU is in its own little universe</strong>, and no write any CPU core does affects any other. The state of main memory after it's all done is kinda random - whatever CPU ended up telling the memory controller to sync its on-die page back to main mem <em>last</em>, 'wins'.</p>\n<p>If java made you promises about the observability of effects in other threads, then java would have to pay the 2000 cycle penalty after every field write, and <strong>java would be ~2000x slower than it is now</strong>. That's, obviously, ridiculous, so instead java gives you 'ridiculous' rules about evil coins instead. Because that way it doesn't have to do that.</p>\n<h2>So what does serializing and concurrency have to do with each other?</h2>\n<p>Nothing whatsoever. Remember, concurrency <strong>is broken by default</strong> - it only works if you explicitly take painstaking care to ensure every access to a single field from 2+ threads is protected with HB clauses, and serialization doesn't state that it establishes any, therefore, is broken if done in a concurrent environment.</p>\n<p>Furthermore, there is no such thing as 'locking an object' in java. At best there's <code>synchronized (x) {}</code> but that doesn't really &quot;lock x&quot; - any other thread can do with x what it wants. a <code>synchronized (x)</code> statement only interacts with <em>other</em> <code>synchronized (x)</code> statements. There <em>is no way in JVM-ese to lock an object in the sense that it freezes any other thread out from attempting to modify that object</em>.</p>\n<h2>Answering your questions</h2>\n<p>With all that context, the answers are easy:</p>\n<blockquote>\n<ol>\n<li>Does Serialization put any kind of lock on the object by default</li>\n</ol>\n</blockquote>\n<p>There's no such thing as a 'lock on an object', so trivially then: No it does not.</p>\n<blockquote>\n<p>or both Serialization and Modification (calling setter method on the object) can go hand in hand when performed concurrently?</p>\n</blockquote>\n<p>No, that will result in evil coin flips. Whilst in theory you can attempt to write code that allows evil coin flips but ends up with the same behaviour regardless of how they land, do not write code like that. At the very least it'll be utterly untestable, not to mention unreadable. Just don't. Hence: &quot;That results in evil coin flips, which means that code is broken, so do not write code like that&quot;.</p>\n<blockquote>\n<p>Can Serialization have any performance impact (execution runtime) on modification of an object i.e. invocation of setter methods concurrently?</p>\n</blockquote>\n<p>Given that any code that serializes while simultaneously calling setters is broken without HBs, the answer is therefore: <strong>Yes</strong>, that has a performance impact, because establishing HBs has a performance impact. (Transfering data from one core to another takes 2000 cycles if not more. Even having one core tell another to cool its jets for a bit (awaiting some lock to clear) takes time: Not just the other core having to freeze for a bit or swap contexts to another job, but the mere act of conveying that info core-to-core takes time. CPUs are really fast and those cores are a few millimeters about. Electrons travel at something like 66% of the speed of light. To cross that millimeter? That's a long time, in CPU cycle terms, actually! Physics laws DEMAND that this has to cost some time!</p>\n<blockquote>\n<p>If the setter method is invoked when the Serialization is in progress - What value will get Serialized for the field being populated by setter method?</p>\n</blockquote>\n<p>The evil coin flipped and that decides. It's guaranteed to be either the old, or the new value, but a JVM can decide to choose which one depending on the phase of the moon as far as the spec is concerned. And of course, if 'the value' is an object with lots of state, you can of course get a sheared object written (where some of the fields of that object reflect the new state and some of it the old state).</p>\n<h2>An important sidenote</h2>\n<p>Serialization, as in <code>java.io.Serializable</code>, is almost always a mistake. It's weird, complicated, not particularly efficient, its format is mostly opaque (it's certainly extremely hard to interact with that data from non-java code), it makes software updates incredibly complicated, it makes for very hard to test codebases (where you e.g. need to maintain newer and older versions of the same class simultaneously somehow, with multiple separate src roots to manage all that).</p>\n<p>Instead, use protobuf, JSON, XML, JSONB, YAML, CSV, handrolled formats, or anything else. Something a lot more explicit than java's baked in serialization mechanism. And that's also the opinion of the OpenJDK team itself. They aren't going to immediately deep-six the system (that'd break stuff), but they vocally support the idea that it's.. very tricky to use right and very very <em>very</em> rarely the right tool for the job.</p>\n<hr />\n<p>[1] This is a very long answer, and nevertheless it is quite oversimplified. Most modern CPUs have layers of cache pages, some actually share them, the exact behaviour depends a bit on CPU architecture, CPUs themselves also have pipelines and re-ordering sequencers, and so much more. However, the core lessons in this answer, namely:</p>\n<ul>\n<li>All attempts to have 2 threads interact by read/writing to the same field are to be considered broken by default.</li>\n<li>HB is the only way to unbreak it. That, or avoid having <em>any</em> fields interacted with by multiple threads and use message queues or databases instead to do it.</li>\n<li>Behaviour is <em>effectively</em> undefined, and not reliably so - you simply <strong>cannot</strong> solve anything (be it ensuring that your code is working correctly, or be it learning more by toying around with these ideas) by 'trying it'.</li>\n</ul>\n<p>are correct.</p>\n"}],"owner":{"account_id":397984,"reputation":537,"user_id":762421,"accept_rate":36,"display_name":"user762421"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1694795890,"creation_date":1694790889,"question_id":77113528,"body_markdown":"I have few questions related to concurrently Modifying and Serializing a Java Object. (The best approach would have been to try out and see the outcome and build the understanding around it but coming up with concurrent code exactly to try out the below things is a bit tricky)\r\n\r\n 1. Does Serialization put any kind of lock on the object by default or both Serialization and Modification (calling setter method on the object) can go hand in hand when performed concurrently?\r\n\r\n 2. Can Serialization have any performance impact (execution runtime) on modification of an object i.e. invocation of setter methods concurrently?\r\n\r\n 2. If the setter method is invoked when the Serialization is in progress - What value will get Serialized for the field being populated by setter method?","title":"Java - Modifying and Serializing an Object concurrently","body":"<p>I have few questions related to concurrently Modifying and Serializing a Java Object. (The best approach would have been to try out and see the outcome and build the understanding around it but coming up with concurrent code exactly to try out the below things is a bit tricky)</p>\n<ol>\n<li><p>Does Serialization put any kind of lock on the object by default or both Serialization and Modification (calling setter method on the object) can go hand in hand when performed concurrently?</p>\n</li>\n<li><p>Can Serialization have any performance impact (execution runtime) on modification of an object i.e. invocation of setter methods concurrently?</p>\n</li>\n<li><p>If the setter method is invoked when the Serialization is in progress - What value will get Serialized for the field being populated by setter method?</p>\n</li>\n</ol>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":14438772,"reputation":702,"user_id":10430074,"display_name":"Ankit"},"score":0,"creation_date":1604128739,"post_id":64618773,"comment_id":114257778,"body_markdown":"I ran the code and it writes value of `max` variable in `output.txt` file.","body":"I ran the code and it writes value of <code>max</code> variable in <code>output.txt</code> file."}],"answers":[{"tags":[],"owner":{"account_id":8779643,"reputation":51,"user_id":6563652,"display_name":"Ashwin PRJ"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1604128661,"creation_date":1604128661,"answer_id":64619362,"question_id":64618773,"body_markdown":"create a new folder and keep your java and output.txt file inside the folder then compile and run the program.\r\nHope it will solve your problem","title":"Writing to a file in the current directory in java","body":"<p>create a new folder and keep your java and output.txt file inside the folder then compile and run the program.\nHope it will solve your problem</p>\n"},{"comments":[{"owner":{"account_id":17576552,"reputation":113,"user_id":12751181,"display_name":"Sasirekha MSVL"},"score":0,"creation_date":1607013762,"post_id":64621860,"comment_id":115144996,"body_markdown":"But sir, after writing to the file output.txt i dont see any thing written to the file. I just see an empty file","body":"But sir, after writing to the file output.txt i dont see any thing written to the file. I just see an empty file"},{"owner":{"account_id":5998820,"reputation":12676,"user_id":4712734,"display_name":"DuncG"},"score":0,"creation_date":1607015683,"post_id":64621860,"comment_id":115146090,"body_markdown":"You could add check the file contents after the try block, with: `System.out.println(&quot;Contents of: &quot;+output.getAbsolutePath());         System.out.println(Files.readString(output.toPath()));`","body":"You could add check the file contents after the try block, with: <code>System.out.println(&quot;Contents of: &quot;+output.getAbsolutePath());         System.out.println(Files.readString(output.toPath()));</code>"}],"tags":[],"owner":{"account_id":5998820,"reputation":12676,"user_id":4712734,"display_name":"DuncG"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1694795532,"creation_date":1604148479,"answer_id":64621860,"question_id":64618773,"body_markdown":"If you want to access the current directory you should reference the file directly, and use try with resources to clean up the output stream:\r\n\r\n    public static void main(String args[]) throws IOException {\r\n        int max=10;\r\n\t\tFile output = new File(&quot;output.txt&quot;);\r\n\t\tSystem.out.println(&quot;Writing to: &quot;+output.getAbsolutePath());\r\n\t\ttry(BufferedWriter writer = new BufferedWriter(new FileWriter(output))) {\r\n\t\t\twriter.write(Integer.toString(max));\r\n\t\t}\r\n    }\r\n\r\nThe code is simpler in later JDKs using `Path` and `Files`:\r\n\r\n    public static void main(String ... args) throws IOException {\r\n        int max = 10;\r\n        Path output = Path.of(&quot;output.txt&quot;); // Use Paths.get in JDK9\r\n        System.out.println(&quot;Writing to: &quot;+output.toAbsolutePath());\r\n        Files.writeString(output, Integer.toString(max));\r\n    }\r\n","title":"Writing to a file in the current directory in java","body":"<p>If you want to access the current directory you should reference the file directly, and use try with resources to clean up the output stream:</p>\n<pre><code>public static void main(String args[]) throws IOException {\n    int max=10;\n    File output = new File(&quot;output.txt&quot;);\n    System.out.println(&quot;Writing to: &quot;+output.getAbsolutePath());\n    try(BufferedWriter writer = new BufferedWriter(new FileWriter(output))) {\n        writer.write(Integer.toString(max));\n    }\n}\n</code></pre>\n<p>The code is simpler in later JDKs using <code>Path</code> and <code>Files</code>:</p>\n<pre><code>public static void main(String ... args) throws IOException {\n    int max = 10;\n    Path output = Path.of(&quot;output.txt&quot;); // Use Paths.get in JDK9\n    System.out.println(&quot;Writing to: &quot;+output.toAbsolutePath());\n    Files.writeString(output, Integer.toString(max));\n}\n</code></pre>\n"}],"owner":{"account_id":17576552,"reputation":113,"user_id":12751181,"display_name":"Sasirekha MSVL"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1623,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":64621860,"answer_count":2,"score":0,"last_activity_date":1694795532,"creation_date":1604122851,"question_id":64618773,"body_markdown":"```\r\nimport java.io.*;\r\nimport java.lang.*;\r\nimport java.net.*;\r\nimport java.util.*;\r\npublic class Solution{\r\n    public static void main(String args[])throws IOException{\r\n        int max=10;\r\n        URL path = Solution.class.getResource(&quot;output.txt&quot;);\r\n        File output = new File(path.getFile());\r\n        BufferedWriter writer = new BufferedWriter(new FileWriter(output));\r\n        writer.write(Integer.toString(max));\r\n        writer.close();\r\n\r\n    }\r\n}\r\n```\r\nI was trying to write data to an output.txt file which is current directory.The program has no erros but max value is not getting written on the output.txt file. Thank you in advance.","title":"Writing to a file in the current directory in java","body":"<pre><code>import java.io.*;\nimport java.lang.*;\nimport java.net.*;\nimport java.util.*;\npublic class Solution{\n    public static void main(String args[])throws IOException{\n        int max=10;\n        URL path = Solution.class.getResource(&quot;output.txt&quot;);\n        File output = new File(path.getFile());\n        BufferedWriter writer = new BufferedWriter(new FileWriter(output));\n        writer.write(Integer.toString(max));\n        writer.close();\n\n    }\n}\n</code></pre>\n<p>I was trying to write data to an output.txt file which is current directory.The program has no erros but max value is not getting written on the output.txt file. Thank you in advance.</p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":29440053,"reputation":89,"user_id":22558282,"display_name":"Dave"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1694794801,"creation_date":1694794801,"answer_id":77113962,"question_id":77113911,"body_markdown":"To achieve the desired format with commas after the first two digits and then every three digits, you can customize the format in DecimalFormat more specifically. You can use the character 0 to represent a required digit and # to represent an optional digit. Here&#39;s how you can do it:\r\n\r\n    import java.text.DecimalFormat;\r\n    import java.util.Scanner;\r\n    \r\n    public class NumberCommaApplier {\r\n    \r\n        public static void main(String[] args) {\r\n            Scanner sc = new Scanner(System.in);\r\n            DecimalFormat comma = new DecimalFormat(&quot;##,##,###&quot;);\r\n    \r\n            System.out.print(&quot;Enter a number: &quot;);\r\n            double input = sc.nextDouble();\r\n    \r\n            System.out.println(comma.format(input));\r\n        }\r\n    }\r\n\r\nWith this format, you will get commas after the first two digits and then every three digits thereafter. For example:\r\n\r\nInput: 1000000\r\nDesired Output: 10,00,000\r\nUsing the format &quot;##,##,###&quot; in DecimalFormat will allow you to achieve the desired format with commas placed correctly. I hope this helps you\r\n","title":"Number formatting , JAVA","body":"<p>To achieve the desired format with commas after the first two digits and then every three digits, you can customize the format in DecimalFormat more specifically. You can use the character 0 to represent a required digit and # to represent an optional digit. Here's how you can do it:</p>\n<pre><code>import java.text.DecimalFormat;\nimport java.util.Scanner;\n\npublic class NumberCommaApplier {\n\n    public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in);\n        DecimalFormat comma = new DecimalFormat(&quot;##,##,###&quot;);\n\n        System.out.print(&quot;Enter a number: &quot;);\n        double input = sc.nextDouble();\n\n        System.out.println(comma.format(input));\n    }\n}\n</code></pre>\n<p>With this format, you will get commas after the first two digits and then every three digits thereafter. For example:</p>\n<p>Input: 1000000\nDesired Output: 10,00,000\nUsing the format &quot;##,##,###&quot; in DecimalFormat will allow you to achieve the desired format with commas placed correctly. I hope this helps you</p>\n"}],"owner":{"account_id":29454207,"reputation":1,"user_id":22570400,"display_name":"Jay"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1694795188,"answer_count":1,"score":0,"last_activity_date":1694794801,"creation_date":1694794429,"question_id":77113911,"body_markdown":"I am trying to format a number. so that the output number has commas at desired locations. but with the help of DecimalFormat library there are commas after every 3 numbers but not able to change get commas after 2 digits after once there have been commas after 3 digits \r\n\r\nOutput getting - 1,000,000\r\nRequired Output= 10,00,000\r\n\r\n\r\n```package com.Practice;\r\nimport java.util.Scanner;\r\nimport java.text.DecimalFormat;\r\npublic class number_comma_applier {\r\n\r\n    public static void main(String[] args) {\r\n        Scanner sc=new Scanner(System.in);\r\n        DecimalFormat comma = new DecimalFormat(&quot;###,###&quot;);\r\n        System.out.print(&quot;Enter a number: &quot;);\r\n        double input = sc.nextDouble();\r\n        System.out.println(comma.format(input));\r\n    }\r\n}\r\n\r\n\r\ntype here\r\n```\r\n\r\n\r\n","title":"Number formatting , JAVA","body":"<p>I am trying to format a number. so that the output number has commas at desired locations. but with the help of DecimalFormat library there are commas after every 3 numbers but not able to change get commas after 2 digits after once there have been commas after 3 digits</p>\n<p>Output getting - 1,000,000\nRequired Output= 10,00,000</p>\n<pre><code>import java.util.Scanner;\nimport java.text.DecimalFormat;\npublic class number_comma_applier {\n\n    public static void main(String[] args) {\n        Scanner sc=new Scanner(System.in);\n        DecimalFormat comma = new DecimalFormat(&quot;###,###&quot;);\n        System.out.print(&quot;Enter a number: &quot;);\n        double input = sc.nextDouble();\n        System.out.println(comma.format(input));\n    }\n}\n\n\ntype here\n</code></pre>\n"},{"tags":["java","encryption","aes","cryptojs"],"answers":[{"comments":[{"owner":{"account_id":3253860,"reputation":1277,"user_id":2743486,"accept_rate":55,"display_name":"DavidDunham"},"score":0,"creation_date":1695019182,"post_id":77113718,"comment_id":135962690,"body_markdown":"Thank you. Changing the Java code for the HEX does result in the equal output of CryptoJS example (I use UTF-8 to decode but it seems it does not matter).","body":"Thank you. Changing the Java code for the HEX does result in the equal output of CryptoJS example (I use UTF-8 to decode but it seems it does not matter)."},{"owner":{"account_id":12359353,"reputation":42442,"user_id":9014097,"display_name":"Topaco"},"score":0,"creation_date":1695020257,"post_id":77113718,"comment_id":135962877,"body_markdown":"@DavidDunham - UTF-8 is identical to ASCII in the first 128 characters (indices 0-127). Since the Base64 alphabet contains only ASCII characters, you can also use UTF-8. Even more conveniently, you can also use the following overload: `Base64.getDecoder().decode(encryptedString)`.","body":"@DavidDunham - UTF-8 is identical to ASCII in the first 128 characters (indices 0-127). Since the Base64 alphabet contains only ASCII characters, you can also use UTF-8. Even more conveniently, you can also use the following overload: <code>Base64.getDecoder().decode(encryptedString)</code>."},{"owner":{"account_id":3253860,"reputation":1277,"user_id":2743486,"accept_rate":55,"display_name":"DavidDunham"},"score":0,"creation_date":1695021165,"post_id":77113718,"comment_id":135963034,"body_markdown":"@Topaco_Question regarding IV (CryptoJS). So I am &quot;forced&quot; to use an IV of 8 bytes (resulting in 16 hex digits)? And, to have intercompatibility I would also need to manually add 8x &quot;0&quot; in Java (automatically done in CryptoJS)? And, then probably best to send the IV in front of the encrypted text (as mentioned regularly on the internet)...","body":"@Topaco_Question regarding IV (CryptoJS). So I am &quot;forced&quot; to use an IV of 8 bytes (resulting in 16 hex digits)? And, to have intercompatibility I would also need to manually add 8x &quot;0&quot; in Java (automatically done in CryptoJS)? And, then probably best to send the IV in front of the encrypted text (as mentioned regularly on the internet)..."},{"owner":{"account_id":12359353,"reputation":42442,"user_id":9014097,"display_name":"Topaco"},"score":0,"creation_date":1695024484,"post_id":77113718,"comment_id":135963632,"body_markdown":"@DavidDunham - *... So I am &quot;forced&quot; to use an IV of 8 bytes (resulting in 16 hex digits)? And, to have intercompatibility I would also need to manually add 8x &quot;0&quot; in Java...* No. For AES a 16 bytes IV **must** be applied (the size of the IV  equals the blocksize which is 16 bytes for AES). In your Java code this is fulfilled, but not in your CryptoJS code. So the latter has to be adapted (just like in my answer).","body":"@DavidDunham - <i>... So I am &quot;forced&quot; to use an IV of 8 bytes (resulting in 16 hex digits)? And, to have intercompatibility I would also need to manually add 8x &quot;0&quot; in Java...</i> No. For AES a 16 bytes IV <b>must</b> be applied (the size of the IV  equals the blocksize which is 16 bytes for AES). In your Java code this is fulfilled, but not in your CryptoJS code. So the latter has to be adapted (just like in my answer)."},{"owner":{"account_id":12359353,"reputation":42442,"user_id":9014097,"display_name":"Topaco"},"score":0,"creation_date":1695024805,"post_id":77113718,"comment_id":135963696,"body_markdown":"@DavidDunham - *...And, then probably best to send the IV in front of the encrypted text...* Yes, but not a static IV (e.g. not a zero IV like you use), but a random IV. The background is that for security reasons the reuse of key/IV pairs must be avoided (which would be a more or less serious vulnerability depending on the mode).","body":"@DavidDunham - <i>...And, then probably best to send the IV in front of the encrypted text...</i> Yes, but not a static IV (e.g. not a zero IV like you use), but a random IV. The background is that for security reasons the reuse of key/IV pairs must be avoided (which would be a more or less serious vulnerability depending on the mode)."}],"tags":[],"owner":{"account_id":12359353,"reputation":42442,"user_id":9014097,"display_name":"Topaco"},"comment_count":5,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1694794800,"creation_date":1694792720,"answer_id":77113718,"question_id":77113297,"body_markdown":"The hash algorithm is part of the key derivation function. Therefore, in the CryptoJS code, the hash algorithm must be specified in the key derivation function and not within the `encrypt()`/`decrypt()` calls: \r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    var SECRET_KEY = &quot;431.396&quot;;\r\n    var SALT = &quot;d413321c765f563c8288ce281ae6808d&quot;;\r\n    var originalString = &quot;test123_XXX&quot;;\r\n\r\n    var iv = &#39;00000000000000000000000000000000&#39;; // 16 bytes correspons to 32 hex digits\r\n    iv = CryptoJS.enc.Hex.parse(iv);\r\n\r\n    var iterations = 65536;\r\n    var keySize = 256;\r\n\r\n    function encrypt (msg) {\r\n      \r\n      var key = CryptoJS.PBKDF2(SECRET_KEY, SALT, {\r\n          keySize: keySize/32,\r\n          iterations: iterations,\r\n          hasher: CryptoJS.algo.SHA256 // the hash algorithm is part of the key derivation\r\n        });\r\n\r\n      var encrypted = CryptoJS.AES.encrypt(msg, key, { \r\n        iv: iv, \r\n        padding: CryptoJS.pad.Pkcs7, // default\r\n        mode: CryptoJS.mode.CBC // default\r\n      });\r\n      \r\n      return encrypted;\r\n    }\r\n\r\n    function decrypt (encrypted) {\r\n      \r\n      var key = CryptoJS.PBKDF2(SECRET_KEY, SALT, {\r\n          keySize: keySize/32,\r\n          iterations: iterations,\r\n          hasher: CryptoJS.algo.SHA256 // the hash algorithm is part of the key derivation\r\n        });\r\n\r\n      var decrypted = CryptoJS.AES.decrypt(encrypted, key, { \r\n        iv: iv, \r\n        padding: CryptoJS.pad.Pkcs7, // default\r\n        mode: CryptoJS.mode.CBC // default\r\n      });\r\n      \r\n      return decrypted;\r\n    }\r\n\r\n    var encrypted = encrypt(originalString);\r\n    var encryptedHex = encrypted.ciphertext.toString(CryptoJS.enc.Hex).toUpperCase();\r\n    var decrypted = decrypt(encrypted);\r\n\r\n    console.log(&quot;SECRET_KEY: &quot;+ SECRET_KEY);\r\n    console.log(&quot;SALT: &quot;+ SALT);\r\n    console.log(&quot;originalString: &quot;+ originalString);\r\n    console.log(&quot;Encrypted: &quot;+ encrypted);\r\n    console.log(&quot;encryptedHex: &quot;+ encryptedHex);\r\n    console.log(&quot;Decrypted: &quot;+ decrypted.toString(CryptoJS.enc.Utf8) );\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js&quot;&gt;&lt;/script&gt;\r\n\r\n\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nWith this change the CryptoJS code generates the same ciphertext as the Java code (compare for this the Base64 encoded ciphertexts).\r\n\r\n--------------\r\n\r\nThe hex encoded ciphertexts still differ because in the Java code the Base64 encoded ciphertext is hex encoded. This double encoding is unnecessary and should be avoided. E.g. with the following change in the Java code:\r\n\r\n```java\r\nString encryptedStringHex = Hex.encodeHexString(Base64.getDecoder().decode(encryptedString.getBytes(StandardCharsets.US_ASCII)));\r\n```\r\n\r\nthese values also match (except for the upper/lower case).  \r\nConsider encoding and decoding outside of `encrypt()` and `decrypt()` so that byte arrays are passed or returned instead of strings.\r\n\r\n---------------\r\n\r\nNote that the IV for AES is 16 bytes in size, which means the hex encoded value consists of 32 hex digits. In the CryptoJS code you use only 16 hex digits, which only works because a zero IV is applied and CryptoJS implicitly pads the too short IV with 0x00 values to the correct length.\r\n\r\n---------------\r\n\r\nRegarding security: A static salt and IV are vulnerabilities. The correct way is to generate a random IV and salt during encryption and pass both together with the ciphertext to the decrypting side, typically concatenated (IV and salt are not a secret).  \r\nFurthermore, when decoding with `new String()` and encoding with `getBytes()`, the encoding should always be specified, otherwise the default encoding is used, which may not correspond to the intended encoding.","title":"Cannot replicate Encryption AES-CBC (Java) with CryptoJS (Javascript)","body":"<p>The hash algorithm is part of the key derivation function. Therefore, in the CryptoJS code, the hash algorithm must be specified in the key derivation function and not within the <code>encrypt()</code>/<code>decrypt()</code> calls:</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>var SECRET_KEY = \"431.396\";\nvar SALT = \"d413321c765f563c8288ce281ae6808d\";\nvar originalString = \"test123_XXX\";\n\nvar iv = '00000000000000000000000000000000'; // 16 bytes correspons to 32 hex digits\niv = CryptoJS.enc.Hex.parse(iv);\n\nvar iterations = 65536;\nvar keySize = 256;\n\nfunction encrypt (msg) {\n  \n  var key = CryptoJS.PBKDF2(SECRET_KEY, SALT, {\n      keySize: keySize/32,\n      iterations: iterations,\n      hasher: CryptoJS.algo.SHA256 // the hash algorithm is part of the key derivation\n    });\n\n  var encrypted = CryptoJS.AES.encrypt(msg, key, { \n    iv: iv, \n    padding: CryptoJS.pad.Pkcs7, // default\n    mode: CryptoJS.mode.CBC // default\n  });\n  \n  return encrypted;\n}\n\nfunction decrypt (encrypted) {\n  \n  var key = CryptoJS.PBKDF2(SECRET_KEY, SALT, {\n      keySize: keySize/32,\n      iterations: iterations,\n      hasher: CryptoJS.algo.SHA256 // the hash algorithm is part of the key derivation\n    });\n\n  var decrypted = CryptoJS.AES.decrypt(encrypted, key, { \n    iv: iv, \n    padding: CryptoJS.pad.Pkcs7, // default\n    mode: CryptoJS.mode.CBC // default\n  });\n  \n  return decrypted;\n}\n\nvar encrypted = encrypt(originalString);\nvar encryptedHex = encrypted.ciphertext.toString(CryptoJS.enc.Hex).toUpperCase();\nvar decrypted = decrypt(encrypted);\n\nconsole.log(\"SECRET_KEY: \"+ SECRET_KEY);\nconsole.log(\"SALT: \"+ SALT);\nconsole.log(\"originalString: \"+ originalString);\nconsole.log(\"Encrypted: \"+ encrypted);\nconsole.log(\"encryptedHex: \"+ encryptedHex);\nconsole.log(\"Decrypted: \"+ decrypted.toString(CryptoJS.enc.Utf8) );</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;script src=\"https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js\"&gt;&lt;/script&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>With this change the CryptoJS code generates the same ciphertext as the Java code (compare for this the Base64 encoded ciphertexts).</p>\n<hr />\n<p>The hex encoded ciphertexts still differ because in the Java code the Base64 encoded ciphertext is hex encoded. This double encoding is unnecessary and should be avoided. E.g. with the following change in the Java code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String encryptedStringHex = Hex.encodeHexString(Base64.getDecoder().decode(encryptedString.getBytes(StandardCharsets.US_ASCII)));\n</code></pre>\n<p>these values also match (except for the upper/lower case).<br />\nConsider encoding and decoding outside of <code>encrypt()</code> and <code>decrypt()</code> so that byte arrays are passed or returned instead of strings.</p>\n<hr />\n<p>Note that the IV for AES is 16 bytes in size, which means the hex encoded value consists of 32 hex digits. In the CryptoJS code you use only 16 hex digits, which only works because a zero IV is applied and CryptoJS implicitly pads the too short IV with 0x00 values to the correct length.</p>\n<hr />\n<p>Regarding security: A static salt and IV are vulnerabilities. The correct way is to generate a random IV and salt during encryption and pass both together with the ciphertext to the decrypting side, typically concatenated (IV and salt are not a secret).<br />\nFurthermore, when decoding with <code>new String()</code> and encoding with <code>getBytes()</code>, the encoding should always be specified, otherwise the default encoding is used, which may not correspond to the intended encoding.</p>\n"}],"owner":{"account_id":3253860,"reputation":1277,"user_id":2743486,"accept_rate":55,"display_name":"DavidDunham"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":86,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77113718,"answer_count":1,"score":0,"last_activity_date":1694794800,"creation_date":1694788879,"question_id":77113297,"body_markdown":"**Goal:** Replicate Java-AES-CBC Encryption/Decryption with CryptoJS (Javascript)\r\n\r\n*Why?:* Create an Encrypted String (Base64 or HEX) with CryptoJS and decode with Java (different Server env.)\r\n\r\n**Problem:** I cannot get the CryptoJS part to produce the same Base64 (or HEX) encoded String as the Java.\r\nAs an effect, with the current state of code, there is no way for the encryption / decryption to be handed off to separate parties.\r\n\r\n\r\nMy Java code outputs following:\r\n\r\n    SECRET_KEY: 431.396\r\n    SALT: d413321c765f563c8288ce281ae6808d\r\n    originalString: test123_XXX\r\n    encryptedString: suBMmUzhQMtuAboORtvr6g==\r\n    encryptedStringHex: 7375424d6d557a68514d747541626f4f5274767236673d3d\r\n    decryptedString: test123_XXX\r\n\r\nMy Javascript code outputs the following\r\n\r\n    [Log] SECRET_KEY: 431.396\r\n    [Log] SALT: d413321c765f563c8288ce281ae6808d\r\n    [Log] originalString: test123_XXX\r\n    [Log] Encrypted: l+R6aYgrQI2+RAIH+X/iJw==\r\n    [Log] encryptedHex: 97E47A69882B408DBE440207F97FE227\r\n    [Log] Decrypted: test123_XXX\r\n\r\nHere is the complete Java code I am using:\r\n\r\n    import java.io.*;\r\n    import java.net.HttpURLConnection;\r\n    import java.net.URL;\r\n    import java.nio.charset.StandardCharsets;\r\n    import java.nio.file.Paths;\r\n    import java.time.LocalDate;\r\n    import java.util.Arrays;\r\n    import java.util.Base64;\r\n    import java.util.Enumeration;\r\n    import java.util.Iterator;\r\n    import java.util.List;\r\n    import java.util.Map;\r\n    import java.util.Map.Entry;\r\n    \r\n    import java.security.*;\r\n    import org.apache.commons.codec.binary.Hex;\r\n    \r\n    import javax.crypto.Cipher;\r\n    import javax.crypto.SecretKey;\r\n    import javax.crypto.SecretKeyFactory;\r\n    import javax.crypto.spec.IvParameterSpec;\r\n    import javax.crypto.spec.PBEKeySpec;\r\n    import javax.crypto.spec.SecretKeySpec;\r\n    import java.security.spec.KeySpec;\r\n    \r\n    \r\n    public class AES {\r\n        \r\n        public static String encrypt(String strToEncrypt, String SECRET_KEY, String SALT) {\r\n    \t\ttry {\r\n    \t\t\tbyte[] iv = {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0};\r\n    \t\t\tIvParameterSpec ivspec = new IvParameterSpec(iv);\r\n    \t\t\tSecretKeyFactory factory = SecretKeyFactory.getInstance(&quot;PBKDF2WithHmacSHA256&quot;);\r\n    \t\t\tKeySpec spec = new PBEKeySpec(SECRET_KEY.toCharArray(), SALT.getBytes(), 65536, 256);\r\n    \t\t\tSecretKey tmp = factory.generateSecret(spec);\r\n    \t\t\tSecretKeySpec secretKey = new SecretKeySpec(tmp.getEncoded(), &quot;AES&quot;);\r\n    \t\t\tCipher cipher = Cipher.getInstance(&quot;AES/CBC/PKCS5Padding&quot;);\r\n    \t\t\tcipher.init(Cipher.ENCRYPT_MODE, secretKey, ivspec);\r\n    \t\t\treturn Base64.getEncoder().encodeToString(cipher.doFinal(strToEncrypt.getBytes(StandardCharsets.UTF_8)));\r\n    \t\t} catch (Exception e) {\r\n    \t\t\tSystem.out.println(&quot;Error while encrypting: &quot; + e.toString());\r\n    \t\t}\r\n    \t\treturn null;\r\n    \t}\r\n    \t\r\n    \tpublic static String decrypt(String strToDecrypt, String SECRET_KEY, String SALT) {\r\n    \t\ttry {\r\n    \t\t\tbyte[] iv = {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0};\r\n    \t\t\tIvParameterSpec ivspec = new IvParameterSpec(iv);\r\n    \t\t\tSecretKeyFactory factory = SecretKeyFactory.getInstance(&quot;PBKDF2WithHmacSHA256&quot;);\r\n    \t\t\tKeySpec spec = new PBEKeySpec(SECRET_KEY.toCharArray(), SALT.getBytes(), 65536, 256);\r\n    \t\t\tSecretKey tmp = factory.generateSecret(spec);\r\n    \t\t\tSecretKeySpec secretKey = new SecretKeySpec(tmp.getEncoded(), &quot;AES&quot;);\r\n    \t\t\tCipher cipher = Cipher.getInstance(&quot;AES/CBC/PKCS5PADDING&quot;);\r\n    \t\t\tcipher.init(Cipher.DECRYPT_MODE, secretKey, ivspec);\r\n    \t\t\treturn new String(cipher.doFinal(Base64.getDecoder().decode(strToDecrypt)));\r\n    \t\t} catch (Exception e) {\r\n    \t\t\tSystem.out.println(&quot;Error while decrypting: &quot; + e.toString());\r\n    \t\t}\r\n    \t\treturn null;\r\n    \t}\r\n    \t\r\n    \t///\r\n        public static void main(String args[]) {\r\n          \r\n    \t\tString originalString = &quot;test123_XXX&quot;;\r\n    \t\tString SECRET_KEY = &quot;431.396&quot;;\r\n    \t    String SALT = &quot;d413321c765f563c8288ce281ae6808d&quot;;\r\n    \t\t \r\n    \t    String encryptedString = AES.encrypt(originalString, SECRET_KEY, SALT);\r\n    \t\tString encryptedStringHex = Hex.encodeHexString(encryptedString.getBytes());\r\n    \t    String decryptedString = AES.decrypt(encryptedString, SECRET_KEY, SALT);\r\n    \t\r\n    \t\tSystem.out.println(&quot;SECRET_KEY: &quot; + SECRET_KEY);\r\n    \t\tSystem.out.println(&quot;SALT: &quot; + SALT);\r\n    \t\tSystem.out.println(&quot;originalString: &quot; + originalString);\r\n    \t\tSystem.out.println(&quot;encryptedString: &quot; + encryptedString);\r\n    \t    System.out.println(&quot;encryptedStringHex: &quot; + encryptedStringHex);\r\n    \t\tSystem.out.println(&quot;decryptedString: &quot; + decryptedString);\r\n        }\r\n    }\r\n\r\nHere is the complete Javascript code I am using:\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    var SECRET_KEY = &quot;431.396&quot;;\r\n    var SALT = &quot;d413321c765f563c8288ce281ae6808d&quot;;\r\n    var originalString = &quot;test123_XXX&quot;;\r\n\r\n    var iv = &#39;0000000000000000&#39;;\r\n    iv = CryptoJS.enc.Hex.parse(iv);\r\n\r\n    var iterations = 65536;\r\n    var keySize = 256;\r\n\r\n    function encrypt (msg) {\r\n      \r\n      var key = CryptoJS.PBKDF2(SECRET_KEY, SALT, {\r\n          keySize: keySize/32,\r\n          iterations: iterations\r\n        });\r\n\r\n      var encrypted = CryptoJS.AES.encrypt(msg, key, { \r\n        iv: iv, \r\n        padding: CryptoJS.pad.Pkcs7,\r\n        mode: CryptoJS.mode.CBC,\r\n        hasher: CryptoJS.algo.SHA256\r\n      });\r\n      \r\n      return encrypted;\r\n    }\r\n\r\n    function decrypt (encrypted) {\r\n      \r\n      var key = CryptoJS.PBKDF2(SECRET_KEY, SALT, {\r\n          keySize: keySize/32,\r\n          iterations: iterations\r\n        });\r\n\r\n      var decrypted = CryptoJS.AES.decrypt(encrypted, key, { \r\n        iv: iv, \r\n        padding: CryptoJS.pad.Pkcs7,\r\n        mode: CryptoJS.mode.CBC,\r\n        hasher: CryptoJS.algo.SHA256\r\n      });\r\n      \r\n      return decrypted;\r\n    }\r\n\r\n    var encrypted = encrypt(originalString);\r\n    var encryptedHex = encrypted.ciphertext.toString(CryptoJS.enc.Hex).toUpperCase();\r\n    var decrypted = decrypt(encrypted);\r\n\r\n    console.log(&quot;SECRET_KEY: &quot;+ SECRET_KEY);\r\n    console.log(&quot;SALT: &quot;+ SALT);\r\n    console.log(&quot;originalString: &quot;+ originalString);\r\n    console.log(&quot;Encrypted: &quot;+ encrypted);\r\n    console.log(&quot;encryptedHex: &quot;+ encryptedHex);\r\n    console.log(&quot;Decrypted: &quot;+ decrypted.toString(CryptoJS.enc.Utf8) );\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js&quot;&gt;&lt;/script&gt;\r\n    &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/aes.min.js&quot;&gt;&lt;/script&gt;\r\n    &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/enc-hex.min.js&quot;&gt;&lt;/script&gt;\r\n    &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/md5.min.js&quot;&gt;&lt;/script&gt;\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"Cannot replicate Encryption AES-CBC (Java) with CryptoJS (Javascript)","body":"<p><strong>Goal:</strong> Replicate Java-AES-CBC Encryption/Decryption with CryptoJS (Javascript)</p>\n<p><em>Why?:</em> Create an Encrypted String (Base64 or HEX) with CryptoJS and decode with Java (different Server env.)</p>\n<p><strong>Problem:</strong> I cannot get the CryptoJS part to produce the same Base64 (or HEX) encoded String as the Java.\nAs an effect, with the current state of code, there is no way for the encryption / decryption to be handed off to separate parties.</p>\n<p>My Java code outputs following:</p>\n<pre><code>SECRET_KEY: 431.396\nSALT: d413321c765f563c8288ce281ae6808d\noriginalString: test123_XXX\nencryptedString: suBMmUzhQMtuAboORtvr6g==\nencryptedStringHex: 7375424d6d557a68514d747541626f4f5274767236673d3d\ndecryptedString: test123_XXX\n</code></pre>\n<p>My Javascript code outputs the following</p>\n<pre><code>[Log] SECRET_KEY: 431.396\n[Log] SALT: d413321c765f563c8288ce281ae6808d\n[Log] originalString: test123_XXX\n[Log] Encrypted: l+R6aYgrQI2+RAIH+X/iJw==\n[Log] encryptedHex: 97E47A69882B408DBE440207F97FE227\n[Log] Decrypted: test123_XXX\n</code></pre>\n<p>Here is the complete Java code I am using:</p>\n<pre><code>import java.io.*;\nimport java.net.HttpURLConnection;\nimport java.net.URL;\nimport java.nio.charset.StandardCharsets;\nimport java.nio.file.Paths;\nimport java.time.LocalDate;\nimport java.util.Arrays;\nimport java.util.Base64;\nimport java.util.Enumeration;\nimport java.util.Iterator;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.Map.Entry;\n\nimport java.security.*;\nimport org.apache.commons.codec.binary.Hex;\n\nimport javax.crypto.Cipher;\nimport javax.crypto.SecretKey;\nimport javax.crypto.SecretKeyFactory;\nimport javax.crypto.spec.IvParameterSpec;\nimport javax.crypto.spec.PBEKeySpec;\nimport javax.crypto.spec.SecretKeySpec;\nimport java.security.spec.KeySpec;\n\n\npublic class AES {\n    \n    public static String encrypt(String strToEncrypt, String SECRET_KEY, String SALT) {\n        try {\n            byte[] iv = {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0};\n            IvParameterSpec ivspec = new IvParameterSpec(iv);\n            SecretKeyFactory factory = SecretKeyFactory.getInstance(&quot;PBKDF2WithHmacSHA256&quot;);\n            KeySpec spec = new PBEKeySpec(SECRET_KEY.toCharArray(), SALT.getBytes(), 65536, 256);\n            SecretKey tmp = factory.generateSecret(spec);\n            SecretKeySpec secretKey = new SecretKeySpec(tmp.getEncoded(), &quot;AES&quot;);\n            Cipher cipher = Cipher.getInstance(&quot;AES/CBC/PKCS5Padding&quot;);\n            cipher.init(Cipher.ENCRYPT_MODE, secretKey, ivspec);\n            return Base64.getEncoder().encodeToString(cipher.doFinal(strToEncrypt.getBytes(StandardCharsets.UTF_8)));\n        } catch (Exception e) {\n            System.out.println(&quot;Error while encrypting: &quot; + e.toString());\n        }\n        return null;\n    }\n    \n    public static String decrypt(String strToDecrypt, String SECRET_KEY, String SALT) {\n        try {\n            byte[] iv = {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0};\n            IvParameterSpec ivspec = new IvParameterSpec(iv);\n            SecretKeyFactory factory = SecretKeyFactory.getInstance(&quot;PBKDF2WithHmacSHA256&quot;);\n            KeySpec spec = new PBEKeySpec(SECRET_KEY.toCharArray(), SALT.getBytes(), 65536, 256);\n            SecretKey tmp = factory.generateSecret(spec);\n            SecretKeySpec secretKey = new SecretKeySpec(tmp.getEncoded(), &quot;AES&quot;);\n            Cipher cipher = Cipher.getInstance(&quot;AES/CBC/PKCS5PADDING&quot;);\n            cipher.init(Cipher.DECRYPT_MODE, secretKey, ivspec);\n            return new String(cipher.doFinal(Base64.getDecoder().decode(strToDecrypt)));\n        } catch (Exception e) {\n            System.out.println(&quot;Error while decrypting: &quot; + e.toString());\n        }\n        return null;\n    }\n    \n    ///\n    public static void main(String args[]) {\n      \n        String originalString = &quot;test123_XXX&quot;;\n        String SECRET_KEY = &quot;431.396&quot;;\n        String SALT = &quot;d413321c765f563c8288ce281ae6808d&quot;;\n         \n        String encryptedString = AES.encrypt(originalString, SECRET_KEY, SALT);\n        String encryptedStringHex = Hex.encodeHexString(encryptedString.getBytes());\n        String decryptedString = AES.decrypt(encryptedString, SECRET_KEY, SALT);\n    \n        System.out.println(&quot;SECRET_KEY: &quot; + SECRET_KEY);\n        System.out.println(&quot;SALT: &quot; + SALT);\n        System.out.println(&quot;originalString: &quot; + originalString);\n        System.out.println(&quot;encryptedString: &quot; + encryptedString);\n        System.out.println(&quot;encryptedStringHex: &quot; + encryptedStringHex);\n        System.out.println(&quot;decryptedString: &quot; + decryptedString);\n    }\n}\n</code></pre>\n<p>Here is the complete Javascript code I am using:</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>var SECRET_KEY = \"431.396\";\nvar SALT = \"d413321c765f563c8288ce281ae6808d\";\nvar originalString = \"test123_XXX\";\n\nvar iv = '0000000000000000';\niv = CryptoJS.enc.Hex.parse(iv);\n\nvar iterations = 65536;\nvar keySize = 256;\n\nfunction encrypt (msg) {\n  \n  var key = CryptoJS.PBKDF2(SECRET_KEY, SALT, {\n      keySize: keySize/32,\n      iterations: iterations\n    });\n\n  var encrypted = CryptoJS.AES.encrypt(msg, key, { \n    iv: iv, \n    padding: CryptoJS.pad.Pkcs7,\n    mode: CryptoJS.mode.CBC,\n    hasher: CryptoJS.algo.SHA256\n  });\n  \n  return encrypted;\n}\n\nfunction decrypt (encrypted) {\n  \n  var key = CryptoJS.PBKDF2(SECRET_KEY, SALT, {\n      keySize: keySize/32,\n      iterations: iterations\n    });\n\n  var decrypted = CryptoJS.AES.decrypt(encrypted, key, { \n    iv: iv, \n    padding: CryptoJS.pad.Pkcs7,\n    mode: CryptoJS.mode.CBC,\n    hasher: CryptoJS.algo.SHA256\n  });\n  \n  return decrypted;\n}\n\nvar encrypted = encrypt(originalString);\nvar encryptedHex = encrypted.ciphertext.toString(CryptoJS.enc.Hex).toUpperCase();\nvar decrypted = decrypt(encrypted);\n\nconsole.log(\"SECRET_KEY: \"+ SECRET_KEY);\nconsole.log(\"SALT: \"+ SALT);\nconsole.log(\"originalString: \"+ originalString);\nconsole.log(\"Encrypted: \"+ encrypted);\nconsole.log(\"encryptedHex: \"+ encryptedHex);\nconsole.log(\"Decrypted: \"+ decrypted.toString(CryptoJS.enc.Utf8) );</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;script src=\"https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js\"&gt;&lt;/script&gt;\n&lt;script src=\"https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/aes.min.js\"&gt;&lt;/script&gt;\n&lt;script src=\"https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/enc-hex.min.js\"&gt;&lt;/script&gt;\n&lt;script src=\"https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/md5.min.js\"&gt;&lt;/script&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"},{"tags":["java","mockito"],"comments":[{"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1694792357,"post_id":77113467,"comment_id":135942273,"body_markdown":"Your test could simply be `assertEquals(1, x.b())` without any mocks.","body":"Your test could simply be <code>assertEquals(1, x.b())</code> without any mocks."},{"owner":{"account_id":202552,"reputation":12096,"user_id":449693,"accept_rate":58,"display_name":"Tony Ennis"},"score":0,"creation_date":1694792541,"post_id":77113467,"comment_id":135942303,"body_markdown":"@knittl this is a boiled-down example.","body":"@knittl this is a boiled-down example."},{"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":2,"creation_date":1694792602,"post_id":77113467,"comment_id":135942318,"body_markdown":"What are you really testing, if you are changing the behavior of your thing under test? Are you testing your real thing or are you testing an almost-real-but-not-quite version of it?","body":"What are you really testing, if you are changing the behavior of your thing under test? Are you testing your real thing or are you testing an almost-real-but-not-quite version of it?"},{"owner":{"account_id":202552,"reputation":12096,"user_id":449693,"accept_rate":58,"display_name":"Tony Ennis"},"score":0,"creation_date":1694792727,"post_id":77113467,"comment_id":135942336,"body_markdown":"In reality `a()` is has a static reference that really should be injected instead. But this is legacy code and plenty of it, and I want to write a test without refactoring the world.  I am indeed testing `b()`&#39;s behavior.","body":"In reality <code>a()</code> is has a static reference that really should be injected instead. But this is legacy code and plenty of it, and I want to write a test without refactoring the world.  I am indeed testing <code>b()</code>&#39;s behavior."}],"answers":[{"tags":[],"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1694793691,"creation_date":1694793691,"answer_id":77113823,"question_id":77113467,"body_markdown":"Best practices say you should either mock an object entirely or not at all. Thus, Mockito mocks every single method of the mocked object. If you want to mock only some methods, you have to tell it which methods you _don&#39;t_ want to mock:\r\n\r\n    when (x.a()).thenReturn(100);\r\n    when (x.b()).thenCallRealMethod();\r\n\r\nThis is called a partial mock. Read more about it in section 16 of the [Javadoc](https://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mockito.html).","title":"mock a method that is called by another method","body":"<p>Best practices say you should either mock an object entirely or not at all. Thus, Mockito mocks every single method of the mocked object. If you want to mock only some methods, you have to tell it which methods you <em>don't</em> want to mock:</p>\n<pre><code>when (x.a()).thenReturn(100);\nwhen (x.b()).thenCallRealMethod();\n</code></pre>\n<p>This is called a partial mock. Read more about it in section 16 of the <a href=\"https://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mockito.html\" rel=\"nofollow noreferrer\">Javadoc</a>.</p>\n"},{"tags":[],"owner":{"account_id":6518557,"reputation":2810,"user_id":5043481,"display_name":"zforgo"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1694794706,"creation_date":1694794706,"answer_id":77113946,"question_id":77113467,"body_markdown":"Mockito has to be configured to use partial mocking aproach.\r\n\r\nThe class has to be tested:\r\n\r\n```java\r\npublic class Something {\r\n\r\n    protected int a() {\r\n        return 1;\r\n    }\r\n\r\n    protected int b() {\r\n        return a();\r\n    }\r\n}\r\n```\r\n\r\n### Solution A - Using mock()\r\n\r\n```java\r\nclass SomethingTest {\r\n\r\n    @Test\r\n    void mockTest() {\r\n        var mock = mock(Something.class);\r\n\r\n        when(mock.a()).thenReturn(100); // mocking method call a()\r\n        when(mock.b()).thenCallRealMethod(); // call the real implementation\r\n        assertEquals(100, mock.b());\r\n        assertEquals(100, mock.a());\r\n    }\r\n}\r\n```\r\n\r\n### Solution B - Using spy()\r\n\r\nSpied object calls the real methods unless they are stubbed.\r\n\r\n```java\r\nclass SomethingTest {\r\n\r\n    @Test\r\n    void spyTest() {\r\n        var spy = spy(Something.class);\r\n        when(spy.a()).thenReturn(100);\r\n        assertEquals(100, spy.b());\r\n        assertEquals(100, spy.a());\r\n    }\r\n}\r\n``` ","title":"mock a method that is called by another method","body":"<p>Mockito has to be configured to use partial mocking aproach.</p>\n<p>The class has to be tested:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Something {\n\n    protected int a() {\n        return 1;\n    }\n\n    protected int b() {\n        return a();\n    }\n}\n</code></pre>\n<h3>Solution A - Using mock()</h3>\n<pre class=\"lang-java prettyprint-override\"><code>class SomethingTest {\n\n    @Test\n    void mockTest() {\n        var mock = mock(Something.class);\n\n        when(mock.a()).thenReturn(100); // mocking method call a()\n        when(mock.b()).thenCallRealMethod(); // call the real implementation\n        assertEquals(100, mock.b());\n        assertEquals(100, mock.a());\n    }\n}\n</code></pre>\n<h3>Solution B - Using spy()</h3>\n<p>Spied object calls the real methods unless they are stubbed.</p>\n<pre class=\"lang-java prettyprint-override\"><code>class SomethingTest {\n\n    @Test\n    void spyTest() {\n        var spy = spy(Something.class);\n        when(spy.a()).thenReturn(100);\n        assertEquals(100, spy.b());\n        assertEquals(100, spy.a());\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":202552,"reputation":12096,"user_id":449693,"accept_rate":58,"display_name":"Tony Ennis"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1694794706,"creation_date":1694790343,"question_id":77113467,"body_markdown":"my class\r\n\r\n    class X {\r\n        protected int a() { return 1; }\r\n        protected int b() { return a(); }\r\n    }\r\n\r\nMy test code\r\n\r\n    X x = mock(X.class)\r\n    when (x.a()).thenReturn(100);\r\n    // System.out.println(x.a());\r\n    assertEquals(100, x.b());\r\n\r\nThe assert fails as `a()` from within `b()` is still returning 1.\r\nif I uncomment the debug line, 100 is printed. But the assert still fails with a 1.\r\n\r\nWhat am I doing wrong here?  I expected `x.a()` to return 100 in all cases, not only when I call it directly.","title":"mock a method that is called by another method","body":"<p>my class</p>\n<pre><code>class X {\n    protected int a() { return 1; }\n    protected int b() { return a(); }\n}\n</code></pre>\n<p>My test code</p>\n<pre><code>X x = mock(X.class)\nwhen (x.a()).thenReturn(100);\n// System.out.println(x.a());\nassertEquals(100, x.b());\n</code></pre>\n<p>The assert fails as <code>a()</code> from within <code>b()</code> is still returning 1.\nif I uncomment the debug line, 100 is printed. But the assert still fails with a 1.</p>\n<p>What am I doing wrong here?  I expected <code>x.a()</code> to return 100 in all cases, not only when I call it directly.</p>\n"},{"tags":["java","camunda"],"answers":[{"tags":[],"owner":{"account_id":4946825,"reputation":1577,"user_id":3981961,"display_name":"thorben"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1459945966,"creation_date":1459945966,"answer_id":36451301,"question_id":36446945,"body_markdown":"For explanation, I assume there is a context A and context B. These could for example be cluster nodes that run process engines against the same database. We assume, you complete the task in context A, but the resources to process the next task (e.g. a `JavaDelegate` implementation of a service task) are only available in context B.\r\n\r\nBoth ways to resolve the problem that you sketch are valid. Either, you make sure the task is completed in context B. Or you make sure that process execution continues in context B after you have completed the task in context A. \r\n\r\nTo implement the second solution, you can use [asynchronous continuations](https://docs.camunda.org/manual/latest/user-guide/process-engine/transactions-in-processes/#asynchronous-continuations). In particular, on the `userTask` element in the BPMN XML you can set the attribute `camunda:asyncAfter=&quot;true&quot;`. When the task is completed in context A, process execution continues until the activity instance of the user task has been completed. Instead of continuing execution at follow-up activities immediately, the process engine persists a job in the database. The job represents the task to continue process execution. It is eventually picked up and executed by the [job executor component](https://docs.camunda.org/manual/latest/user-guide/process-engine/the-job-executor/). Assuming that the job executor runs in context B, it will be able to resolve the resources correctly.\r\n","title":"Camunda custom tasklist - complete task","body":"<p>For explanation, I assume there is a context A and context B. These could for example be cluster nodes that run process engines against the same database. We assume, you complete the task in context A, but the resources to process the next task (e.g. a <code>JavaDelegate</code> implementation of a service task) are only available in context B.</p>\n\n<p>Both ways to resolve the problem that you sketch are valid. Either, you make sure the task is completed in context B. Or you make sure that process execution continues in context B after you have completed the task in context A. </p>\n\n<p>To implement the second solution, you can use <a href=\"https://docs.camunda.org/manual/latest/user-guide/process-engine/transactions-in-processes/#asynchronous-continuations\" rel=\"nofollow\">asynchronous continuations</a>. In particular, on the <code>userTask</code> element in the BPMN XML you can set the attribute <code>camunda:asyncAfter=\"true\"</code>. When the task is completed in context A, process execution continues until the activity instance of the user task has been completed. Instead of continuing execution at follow-up activities immediately, the process engine persists a job in the database. The job represents the task to continue process execution. It is eventually picked up and executed by the <a href=\"https://docs.camunda.org/manual/latest/user-guide/process-engine/the-job-executor/\" rel=\"nofollow\">job executor component</a>. Assuming that the job executor runs in context B, it will be able to resolve the resources correctly.</p>\n"}],"owner":{"account_id":1748498,"reputation":1914,"user_id":1598149,"accept_rate":50,"display_name":"GregD"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1191,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694794428,"creation_date":1459934860,"question_id":36446945,"body_markdown":"As first, I&#39;m new to camunda..\r\nI&#39;ve created a custom tasklist in camunda. \r\nI can claim / unclaim tasks etc and this is working.\r\n\r\nRight now I&#39;d like to complete a certain task, but when I&#39;m calling: \r\n\r\n    public void completeSelectedTask() {\r\n        taskService.complete(selectedTask.getId());\r\n    }\r\n\r\nit seems as if camunda wants to go to the next step in THIS context, instead of the context where the BPMN schema has been deployed and where everything is deployed needed to perform the next step. So I&#39;m getting &quot;classNotFound&quot; exceptions since I&#39;m not having the same classes in my customTasklist.war as in the camundaProcessor.war.. \r\n\r\nHow could I tell camunda to go to the next step in the correct context?! Or am I handeling this wrong and should I always complete the task in the camundaProccessor context?\r\n\r\nSome more information: It&#39;s to complete a userTask, with a form. I currently added to form to customTasklist.war and not camundaProcessor.war (so the out of the box tasklist isn&#39;t working anymore ofcourse since he&#39;s looking for the form in the camundaProcessor.war)","title":"Camunda custom tasklist - complete task","body":"<p>As first, I'm new to camunda..\nI've created a custom tasklist in camunda. \nI can claim / unclaim tasks etc and this is working.</p>\n\n<p>Right now I'd like to complete a certain task, but when I'm calling: </p>\n\n<pre><code>public void completeSelectedTask() {\n    taskService.complete(selectedTask.getId());\n}\n</code></pre>\n\n<p>it seems as if camunda wants to go to the next step in THIS context, instead of the context where the BPMN schema has been deployed and where everything is deployed needed to perform the next step. So I'm getting \"classNotFound\" exceptions since I'm not having the same classes in my customTasklist.war as in the camundaProcessor.war.. </p>\n\n<p>How could I tell camunda to go to the next step in the correct context?! Or am I handeling this wrong and should I always complete the task in the camundaProccessor context?</p>\n\n<p>Some more information: It's to complete a userTask, with a form. I currently added to form to customTasklist.war and not camundaProcessor.war (so the out of the box tasklist isn't working anymore ofcourse since he's looking for the form in the camundaProcessor.war)</p>\n"},{"tags":["java","reflection","overriding"],"comments":[{"owner":{"account_id":3430916,"reputation":3799,"user_id":3059385,"accept_rate":40,"display_name":"Christopher Schneider"},"score":1,"creation_date":1694788834,"post_id":77113262,"comment_id":135941516,"body_markdown":"`@Override` is a source policy type annotation, so no. For you to check an annotation at run time, it has to be marked as a runtime annotation. See [this answer](https://stackoverflow.com/questions/3107970/how-do-different-retention-policies-affect-my-annotations)","body":"<code>@Override</code> is a source policy type annotation, so no. For you to check an annotation at run time, it has to be marked as a runtime annotation. See <a href=\"https://stackoverflow.com/questions/3107970/how-do-different-retention-policies-affect-my-annotations\">this answer</a>"},{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":0,"creation_date":1694794418,"post_id":77113262,"comment_id":135942616,"body_markdown":"As said before, you cannot do this through reflection. What you _can_ do is use tools like https://checkstyle.sourceforge.io/index.html with its https://checkstyle.sourceforge.io/checks/annotation/missingoverride.html#MissingOverride rule.","body":"As said before, you cannot do this through reflection. What you <i>can</i> do is use tools like <a href=\"https://checkstyle.sourceforge.io/index.html\" rel=\"nofollow noreferrer\">checkstyle.sourceforge.io/index.html</a> with its <a href=\"https://checkstyle.sourceforge.io/checks/annotation/missingoverride.html#MissingOverride\" rel=\"nofollow noreferrer\">checkstyle.sourceforge.io/checks/annotation/&hellip;</a> rule."},{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":0,"creation_date":1694794544,"post_id":77113262,"comment_id":135942637,"body_markdown":"If you want to check that a method overrides another method, you can check the method&#39;s declared class&#39; super class (and further up the chain) to see if a method with the same name and parameter types exists. If you also want to check for interface method implementations you need to go through each interface as well (recursively).","body":"If you want to check that a method overrides another method, you can check the method&#39;s declared class&#39; super class (and further up the chain) to see if a method with the same name and parameter types exists. If you also want to check for interface method implementations you need to go through each interface as well (recursively)."}],"answers":[{"comments":[{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":1,"creation_date":1694789470,"post_id":77113310,"comment_id":135941663,"body_markdown":"This answer explains _why_ the answer is &#39;no, you cannot do that&#39;. Just in case it&#39;s not clear: The answer is &#39;no, you cannot check for the presence of an `@Override` annotation at runtime. You can&#39;t even check for it in an annotation processor. Only time you can check it is with an AST (i.e. source, not class file) based code processing/linting tool.","body":"This answer explains <i>why</i> the answer is &#39;no, you cannot do that&#39;. Just in case it&#39;s not clear: The answer is &#39;no, you cannot check for the presence of an <code>@Override</code> annotation at runtime. You can&#39;t even check for it in an annotation processor. Only time you can check it is with an AST (i.e. source, not class file) based code processing/linting tool."}],"tags":[],"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"comment_count":1,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1694788947,"creation_date":1694788947,"answer_id":77113310,"question_id":77113262,"body_markdown":"If you are going to check `java docs` of annotation you will see that the retention policy is `SOURCE`, not `RUNTIME`, which means the annotation is not present at runtime. Also more details check it [Override][1]\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/lang/Override.html","title":"Check @Override annotation presence on method","body":"<p>If you are going to check <code>java docs</code> of annotation you will see that the retention policy is <code>SOURCE</code>, not <code>RUNTIME</code>, which means the annotation is not present at runtime. Also more details check it <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Override.html\" rel=\"noreferrer\">Override</a></p>\n"}],"owner":{"account_id":23714100,"reputation":45,"user_id":17757908,"display_name":"Ксения Лабутина"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":94,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77113310,"answer_count":1,"score":0,"last_activity_date":1694794370,"creation_date":1694788511,"question_id":77113262,"body_markdown":"I have a java.lang.reflect.Method method and I want to check if it is marked with @Override annotation. \r\n\r\nWas trying to do that with method.isAnnotationPresent(Override.class) but this approach doesn&#39;t applicable for this annotation. Also tried MergedAnnotations.from(method).isPresent() but it also doesn&#39;t return true for my method with @Override. \r\n\r\nIs it possible to check that? ","title":"Check @Override annotation presence on method","body":"<p>I have a java.lang.reflect.Method method and I want to check if it is marked with @Override annotation.</p>\n<p>Was trying to do that with method.isAnnotationPresent(Override.class) but this approach doesn't applicable for this annotation. Also tried MergedAnnotations.from(method).isPresent() but it also doesn't return true for my method with @Override.</p>\n<p>Is it possible to check that?</p>\n"}],"has_more":true,"backoff":10,"quota_max":10000,"quota_remaining":9952,"page":182,"page_size":100}
