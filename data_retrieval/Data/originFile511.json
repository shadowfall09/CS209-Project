{"items":[{"tags":["java","spring","caching","redis"],"owner":{"account_id":27997426,"reputation":13,"user_id":21382350,"display_name":"dev"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681205757,"creation_date":1681205757,"question_id":75984406,"body_markdown":"I&#39;m trying to update a field in a cache object on each hit. Similar to rate limiting with a different purpose.\r\n\r\nMy Cache Object:\r\n\r\n```\r\n@Getter\r\n@Setter\r\npublic class CacheDO implements Serializable {\r\n\r\n    private static final long serialVersionUID = 1L;\r\n    int simCount;\r\n    Date date;\r\n    int viewCount;\r\n}\r\n```\r\n\r\nCache Service:\r\n\r\n```\r\npublic CacheDO updateCacheDO(boolean isDateToBeUpdated, Date date, int customerId, String customerIdStr) {\r\n   CacheDO cacheDO = new CacheDO();\r\n   byte[] valueInBytes = redisTemplate.getConnectionFactory().getConnection().get((customerIdStr).getBytes());\r\n   if(valueInBytes == null){\r\n      return addCacheDO(customerId, customerIdStr);\r\n   }\r\n   CacheDO deserialisedCacheDO;\r\n   try {\r\n      ByteArrayInputStream byteArrayInputStream = new ByteArrayInputStream(valueInBytes);\r\n      deserialisedCacheDO = (CacheDO) new ClassLoaderObjectInputStream(CacheDO.class.getClassLoader(), byteArrayInputStream).readObject();\r\n   } catch (IOException | ClassNotFoundException e) {\r\n      LOGGER.error(&quot;Error deserializing object&quot;);\r\n      throw new RuntimeException(e.getMessage(),e);\r\n   }\r\n   cacheDO.setAbc(deserialisedCacheDO.getAbc());\r\n   if (isDateToBeUpdated) {\r\n      cacheDO.setDate(date);\r\n   } else {\r\n      cacheDO.setDate(deserialisedCacheDO.getDate());\r\n   }\r\n   cacheDO.setViewCount(deserialisedCacheDO.getViewCount() + 1);\r\n   Long ttl = redisTemplate.getConnectionFactory().getConnection().keyCommands().ttl(customerIdStr.getBytes(), TimeUnit.DAYS);\r\n   LOGGER.info(&quot;Updating cache for customer {} &quot;, customerId);\r\n   redisTemplate.getConnectionFactory().getConnection().set(customerIdStr.getBytes(), SerializationUtils.serialize(cacheDO), Expiration.from(ttl, TimeUnit.DAYS), RedisStringCommands.SetOption.SET_IF_PRESENT);\r\n   return cacheDO;\r\n}\r\n```\r\n\r\nOn every hit, ttl decreases by 1 instead of decreasing per day. I&#39;m unable to figure out what could be done here, please help me understand my mistake.","title":"RedisCache : TTL updating on each hit instead of DAYS","body":"<p>I'm trying to update a field in a cache object on each hit. Similar to rate limiting with a different purpose.</p>\n<p>My Cache Object:</p>\n<pre><code>@Getter\n@Setter\npublic class CacheDO implements Serializable {\n\n    private static final long serialVersionUID = 1L;\n    int simCount;\n    Date date;\n    int viewCount;\n}\n</code></pre>\n<p>Cache Service:</p>\n<pre><code>public CacheDO updateCacheDO(boolean isDateToBeUpdated, Date date, int customerId, String customerIdStr) {\n   CacheDO cacheDO = new CacheDO();\n   byte[] valueInBytes = redisTemplate.getConnectionFactory().getConnection().get((customerIdStr).getBytes());\n   if(valueInBytes == null){\n      return addCacheDO(customerId, customerIdStr);\n   }\n   CacheDO deserialisedCacheDO;\n   try {\n      ByteArrayInputStream byteArrayInputStream = new ByteArrayInputStream(valueInBytes);\n      deserialisedCacheDO = (CacheDO) new ClassLoaderObjectInputStream(CacheDO.class.getClassLoader(), byteArrayInputStream).readObject();\n   } catch (IOException | ClassNotFoundException e) {\n      LOGGER.error(&quot;Error deserializing object&quot;);\n      throw new RuntimeException(e.getMessage(),e);\n   }\n   cacheDO.setAbc(deserialisedCacheDO.getAbc());\n   if (isDateToBeUpdated) {\n      cacheDO.setDate(date);\n   } else {\n      cacheDO.setDate(deserialisedCacheDO.getDate());\n   }\n   cacheDO.setViewCount(deserialisedCacheDO.getViewCount() + 1);\n   Long ttl = redisTemplate.getConnectionFactory().getConnection().keyCommands().ttl(customerIdStr.getBytes(), TimeUnit.DAYS);\n   LOGGER.info(&quot;Updating cache for customer {} &quot;, customerId);\n   redisTemplate.getConnectionFactory().getConnection().set(customerIdStr.getBytes(), SerializationUtils.serialize(cacheDO), Expiration.from(ttl, TimeUnit.DAYS), RedisStringCommands.SetOption.SET_IF_PRESENT);\n   return cacheDO;\n}\n</code></pre>\n<p>On every hit, ttl decreases by 1 instead of decreasing per day. I'm unable to figure out what could be done here, please help me understand my mistake.</p>\n"},{"tags":["java","c++","java-native-interface","jna"],"comments":[{"owner":{"account_id":27317635,"reputation":737,"user_id":20831888,"display_name":"Kozydot"},"score":0,"creation_date":1681200223,"post_id":75983453,"comment_id":134013811,"body_markdown":"Instead of managing memory manually, try to use Java&#39;s PhantomReference and a ReferenceQueue to automatically clean up the native memory when the Java object is garbage collected. This way, you don&#39;t need to worry about calling the cleanup method manually.","body":"Instead of managing memory manually, try to use Java&#39;s PhantomReference and a ReferenceQueue to automatically clean up the native memory when the Java object is garbage collected. This way, you don&#39;t need to worry about calling the cleanup method manually."},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1681200236,"post_id":75983453,"comment_id":134013814,"body_markdown":"It is unclear what you&#39;re trying to do. As far as I know, when transitioning between Java and native, JNA will do the necessary copying for you. There is generally no need to do this yourself. The same goes for cleanup. This too is generally handled by JNA (again, as far as I know). As far as I can tell you seem to have a bit of an X-Y problem, where you&#39;re now presenting a solution that is causing a problem, instead of giving us the original problem you&#39;re trying to solve.","body":"It is unclear what you&#39;re trying to do. As far as I know, when transitioning between Java and native, JNA will do the necessary copying for you. There is generally no need to do this yourself. The same goes for cleanup. This too is generally handled by JNA (again, as far as I know). As far as I can tell you seem to have a bit of an X-Y problem, where you&#39;re now presenting a solution that is causing a problem, instead of giving us the original problem you&#39;re trying to solve."},{"owner":{"account_id":5964120,"reputation":4275,"user_id":4688321,"display_name":"kiner_shah"},"score":0,"creation_date":1681208418,"post_id":75983453,"comment_id":134015752,"body_markdown":"Can&#39;t you instead create a Java class for MyCustomStruct, and then manually set its fields in a JNI function?","body":"Can&#39;t you instead create a Java class for MyCustomStruct, and then manually set its fields in a JNI function?"},{"owner":{"account_id":7098111,"reputation":3016,"user_id":5430833,"display_name":"Marek Piotrowski"},"score":0,"creation_date":1681210578,"post_id":75983453,"comment_id":134016224,"body_markdown":"@MarkRotteveel I&#39;m simply trying to return an auto instance of a structure which contains a collection of strings inside and safely consume (i.e. cache globally) it by Java. Just thinking: how could JNA do a cleanup of natively allocated memory automatically, it does not know whether it&#39;s still referenced there, right? It&#39;s not that I&#39;m passing the ownership here, just a raw pointer :(","body":"@MarkRotteveel I&#39;m simply trying to return an auto instance of a structure which contains a collection of strings inside and safely consume (i.e. cache globally) it by Java. Just thinking: how could JNA do a cleanup of natively allocated memory automatically, it does not know whether it&#39;s still referenced there, right? It&#39;s not that I&#39;m passing the ownership here, just a raw pointer :("},{"owner":{"account_id":7098111,"reputation":3016,"user_id":5430833,"display_name":"Marek Piotrowski"},"score":1,"creation_date":1681210618,"post_id":75983453,"comment_id":134016234,"body_markdown":"@kiner_shah thanks for that. Yeah JNI would work just fine (with a nasty boilerplate tho), just wanted to stick to JNA","body":"@kiner_shah thanks for that. Yeah JNI would work just fine (with a nasty boilerplate tho), just wanted to stick to JNA"}],"answers":[{"comments":[{"owner":{"account_id":7098111,"reputation":3016,"user_id":5430833,"display_name":"Marek Piotrowski"},"score":0,"creation_date":1681210740,"post_id":75984111,"comment_id":134016262,"body_markdown":"I mean, I&#39;m not trying to optimise anything here, just merely trying to nicely consume a structure with a collection of strings inside","body":"I mean, I&#39;m not trying to optimise anything here, just merely trying to nicely consume a structure with a collection of strings inside"}],"tags":[],"owner":{"account_id":27908384,"reputation":490,"user_id":21311096,"display_name":"SRNissen"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681205650,"creation_date":1681203646,"answer_id":75984111,"question_id":75983453,"body_markdown":"If you can use strdup, that implies your strings have no zero-bytes in them.\r\n\r\nIf your strings have no zero-bytes in them, you can replace the `char**` with a `char*` and a single large allocation with a zero-byte between each string and a `size_t` in the struct to indicate the length [1]. This makes the implementation *slightly* more clunky at both ends but (1) easier to conceptually understand, (2) more cache efficient, (3) easier to clean up, as all the deallocations can be replaced with a single call to `free` on your `char*`\r\n\r\n[1] you might naively use two sequential zero-bytes to indicate the end of the string, but that would prevent you from having empty strings\r\n\r\n    extern &quot;C&quot;\r\n    {\r\n        struct MyCustomStruct\r\n        {\r\n            char *text;\r\n            size_t textLength;\r\n        };\r\n\r\n        MyCustomStruct getMyCustomStructInstance()\r\n        {\r\n            std::vector&lt;std::string&gt; lines{&quot;abc&quot;, &quot;xyz&quot;};\r\n\r\n            size_t textLength = 0;\r\n\r\n            for (auto const &amp;line : lines)\r\n            {\r\n                textLength += line.size()+1;\r\n                            // the +1 is a magic constant here that indicates the\r\n                            // presence of the null-byte at the end of each string\r\n                            // you may want to do it differently so it doesn&#39;t\r\n                            // just hang out here to confuse future readers\r\n                            //  - A comment is possible, of course, but perhaps\r\n                            //  not the best approach.\r\n            }\r\n\r\n            if (textLength == 0)\r\n            {\r\n                // some of these C functions don&#39;t handle edge cases\r\n                // with zero-allocations so we&#39;re out immediately\r\n                return MyCustomStruct{nulltpr, 0};\r\n            }\r\n\r\n            char *text = (char *)malloc(textLength);\r\n\r\n            if (!text)\r\n            {\r\n                // insert your favorite error handling. For preference,\r\n                // I would change the return type to\r\n                // std::optional&lt;MyCustomStruct&gt; and do &quot;return {};&quot;\r\n                // but you could also throw an exception here.\r\n            }\r\n\r\n            // At this point, the solution diverse, depending on how\r\n            // performance sensitive you are. If you can accept two buffers\r\n            //  (which I think you can, given the many strdup&#39;s you were\r\n            //  willing to accept) I would do this:\r\n\r\n            {\r\n                std::string all_strings;\r\n                all_strings.reserve(textLength);\r\n                for (auto const &amp;line : lines)\r\n                {\r\n                    all_strings += line;\r\n                    all_strings += &quot;\\0&quot;;\r\n                }\r\n                std::copy(all_strings.begin(), all_strings.end(), text);\r\n\r\n                return MyCustomStruct{text, textLength};\r\n            }\r\n\r\n            // If you are very performance sensitive here, I would instead:\r\n            {\r\n                auto next_string = text;\r\n\r\n                for (auto const &amp;line : lines)\r\n                {\r\n                    std::copy(line.begin(), line.end, next_string);\r\n                    *next_string = &#39;\\0&#39;;\r\n                    ++next_string;\r\n                }\r\n\r\n                return MyCustomStruct{text, textLength};\r\n            }\r\n        }\r\n    }\r\n\r\nNB: Obviously if you throw from this, or return a `std::optional`, you are no longer a good C function. I would probably make a pure C++ function for the logic, and then a pure C function that calls the C++ function and handles whatever error it might return in C parlance, e.g. like this:\r\n\r\n    MyCustomStruct myCustomStruct;\r\n    int result = fillMyCustomStruct(&amp;myCustomStruct);\r\n    if(result != FillResult_Ok)\r\n        //etc.","title":"Returning structs and further clean up","body":"<p>If you can use strdup, that implies your strings have no zero-bytes in them.</p>\n<p>If your strings have no zero-bytes in them, you can replace the <code>char**</code> with a <code>char*</code> and a single large allocation with a zero-byte between each string and a <code>size_t</code> in the struct to indicate the length [1]. This makes the implementation <em>slightly</em> more clunky at both ends but (1) easier to conceptually understand, (2) more cache efficient, (3) easier to clean up, as all the deallocations can be replaced with a single call to <code>free</code> on your <code>char*</code></p>\n<p>[1] you might naively use two sequential zero-bytes to indicate the end of the string, but that would prevent you from having empty strings</p>\n<pre><code>extern &quot;C&quot;\n{\n    struct MyCustomStruct\n    {\n        char *text;\n        size_t textLength;\n    };\n\n    MyCustomStruct getMyCustomStructInstance()\n    {\n        std::vector&lt;std::string&gt; lines{&quot;abc&quot;, &quot;xyz&quot;};\n\n        size_t textLength = 0;\n\n        for (auto const &amp;line : lines)\n        {\n            textLength += line.size()+1;\n                        // the +1 is a magic constant here that indicates the\n                        // presence of the null-byte at the end of each string\n                        // you may want to do it differently so it doesn't\n                        // just hang out here to confuse future readers\n                        //  - A comment is possible, of course, but perhaps\n                        //  not the best approach.\n        }\n\n        if (textLength == 0)\n        {\n            // some of these C functions don't handle edge cases\n            // with zero-allocations so we're out immediately\n            return MyCustomStruct{nulltpr, 0};\n        }\n\n        char *text = (char *)malloc(textLength);\n\n        if (!text)\n        {\n            // insert your favorite error handling. For preference,\n            // I would change the return type to\n            // std::optional&lt;MyCustomStruct&gt; and do &quot;return {};&quot;\n            // but you could also throw an exception here.\n        }\n\n        // At this point, the solution diverse, depending on how\n        // performance sensitive you are. If you can accept two buffers\n        //  (which I think you can, given the many strdup's you were\n        //  willing to accept) I would do this:\n\n        {\n            std::string all_strings;\n            all_strings.reserve(textLength);\n            for (auto const &amp;line : lines)\n            {\n                all_strings += line;\n                all_strings += &quot;\\0&quot;;\n            }\n            std::copy(all_strings.begin(), all_strings.end(), text);\n\n            return MyCustomStruct{text, textLength};\n        }\n\n        // If you are very performance sensitive here, I would instead:\n        {\n            auto next_string = text;\n\n            for (auto const &amp;line : lines)\n            {\n                std::copy(line.begin(), line.end, next_string);\n                *next_string = '\\0';\n                ++next_string;\n            }\n\n            return MyCustomStruct{text, textLength};\n        }\n    }\n}\n</code></pre>\n<p>NB: Obviously if you throw from this, or return a <code>std::optional</code>, you are no longer a good C function. I would probably make a pure C++ function for the logic, and then a pure C function that calls the C++ function and handles whatever error it might return in C parlance, e.g. like this:</p>\n<pre><code>MyCustomStruct myCustomStruct;\nint result = fillMyCustomStruct(&amp;myCustomStruct);\nif(result != FillResult_Ok)\n    //etc.\n</code></pre>\n"}],"owner":{"account_id":7098111,"reputation":3016,"user_id":5430833,"display_name":"Marek Piotrowski"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":97,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681205650,"creation_date":1681198394,"question_id":75983453,"body_markdown":"We&#39;re building a C++ library which is used within multiple contexts, Java/Kotlin being one of them. We&#39;re using JNI very extensively, but recently we thought that there&#39;s a lot of boilerplate around it and thought JNA might be a better idea. It is really nice for Java callbacks being called by the native code - the life-span of objects is not an issue then. We&#39;ve hit a wall when trying to implement what I assumed was the &quot;nominal&quot; case. Let&#39;s assume we&#39;ve got the following C++ struct to be returned &quot;by value&quot; by a native function and consumed in Java:\r\n\r\n```c++\r\n#include &lt;string&gt;\r\n#include &lt;vector&gt;\r\n\r\nstruct MyCustomStruct {\r\n  int x;\r\n  std::vector&lt;std::string&gt; lines;\r\n};\r\n```\r\n\r\nJNA needs C linkage and does not understand C++, so I adjusted the structure accordingly. Additionally, we cannot naively copy pointers when returning a struct, but rather deep copy the strings, because as soon as the stack unwinds, we&#39;re gonna loose our strings:\r\n\r\n```c++\r\n#include &lt;cstdlib&gt;\r\n#include &lt;string&gt;\r\n#include &lt;vector&gt;\r\n\r\nextern &quot;C&quot; {\r\nstruct MyCustomStruct {\r\n  int x;\r\n  char** lines;\r\n  int linesCount;\r\n};\r\n\r\nMyCustomStruct getMyCustomStructInstance() {\r\n  std::vector&lt;std::string&gt; lines{&quot;abc&quot;, &quot;xyz&quot;};\r\n  MyCustomStruct result;\r\n\r\n  result.lines = (char**)malloc(lines.size());\r\n  for(size_t i = 0; i &lt; lines.size(); i++) {\r\n    result.lines[i] = strdup(s.c_str());\r\n  }\r\n  \r\n  result.x = 123;\r\n  result.linesCount = lines.size();\r\n  return result;\r\n}\r\n}\r\n```\r\n\r\nAnd the corresponding Java code:\r\n```java\r\npackage my.native.package;\r\n\r\nimport com.sun.jna.Library;\r\nimport com.sun.jna.Native;\r\nimport com.sun.jna.Structure;\r\nimport java.util.List;\r\nimport java.util.Arrays;\r\nimport com.sun.jna.ptr.PointerByReference;\r\n\r\npublic interface MyNativeCLibrary extends Library {\r\n  public MyCustomStruct getMyCustomStructInstance();\r\n\r\n  public static class MyCustomStruct extends Structure {\r\n    public static class ByValue extends MyCustomStruct implements Structure.ByValue {}\r\n\r\n    public int x;\r\n    public PointerByReference lines;\r\n    public int linesCount;\r\n\r\n    public String[] linesAsArray() {\r\n      return lines.getPointer().getStringArray(0);\r\n    }\r\n\r\n    @Override\r\n    protected List getFieldOrder() {\r\n      return Arrays.asList(new String[] { &quot;x&quot;, &quot;lines&quot;, &quot;linesCount&quot; });\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nNow, on the caller side, I need to store that collection of strings (as in: it&#39;s a static variable kept in memory for the whole Java application&#39;s lifetime), so it&#39;d be smart to deep copy it as well. Copying this `PointerByReference` sounds terrible, but is do-able for a person used to C++ and dealing with raw bytes. I&#39;m going to have a hard time explaining the usage to my  client, but, well, I remotely imagine it.\r\n\r\nNow, to the point: we&#39;ve allocated some memory via `strdup`, now it&#39;d make sense to clean it up (considering we&#39;ve got a deep copy on Java end already). Following [eshayne&#39;s examples](https://www.eshayne.com/jnaex/index.html?example=11) I&#39;ve added the cleanup method. In the end, the usage looks like this:\r\n```java\r\nMyCustomStruct foo = myLibraryHandle.getMyCustomStructInstance();\r\nApplication.foo = deepCopyMyCustomStruct(foo);\r\nmyLibraryHandle.cleanUpMyCustomStruct(foo);\r\n```\r\n\r\nThat looks horrible, though. Even though we&#39;ve got a Java wrapper on top of the JNA class which abstracts all those technical details away, I cannot figure out an &quot;atomic&quot; way of exposing such functions. \r\n\r\nIs there any better mechanism for that? I feel there must be a more natural way of doing this.\r\n\r\nI thought of wrapping such &quot;unsafe&quot; calls with some kind of a lambda:\r\n```\r\nmyLibraryHandle.unsafeContext(() -&gt; { myLibraryHandle.getMyCustomStructInstance(); }\r\n```\r\nbut if the `unsafeContext` would accept any void function, there&#39;s no meta-way of knowing which functions have been called inside.\r\n\r\nI also tried calling &quot;cleanup&quot; immediately after the native function (kinda hoping that JNA would deep copy...), but failed miserably.","title":"Returning structs and further clean up","body":"<p>We're building a C++ library which is used within multiple contexts, Java/Kotlin being one of them. We're using JNI very extensively, but recently we thought that there's a lot of boilerplate around it and thought JNA might be a better idea. It is really nice for Java callbacks being called by the native code - the life-span of objects is not an issue then. We've hit a wall when trying to implement what I assumed was the &quot;nominal&quot; case. Let's assume we've got the following C++ struct to be returned &quot;by value&quot; by a native function and consumed in Java:</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;string&gt;\n#include &lt;vector&gt;\n\nstruct MyCustomStruct {\n  int x;\n  std::vector&lt;std::string&gt; lines;\n};\n</code></pre>\n<p>JNA needs C linkage and does not understand C++, so I adjusted the structure accordingly. Additionally, we cannot naively copy pointers when returning a struct, but rather deep copy the strings, because as soon as the stack unwinds, we're gonna loose our strings:</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;cstdlib&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n\nextern &quot;C&quot; {\nstruct MyCustomStruct {\n  int x;\n  char** lines;\n  int linesCount;\n};\n\nMyCustomStruct getMyCustomStructInstance() {\n  std::vector&lt;std::string&gt; lines{&quot;abc&quot;, &quot;xyz&quot;};\n  MyCustomStruct result;\n\n  result.lines = (char**)malloc(lines.size());\n  for(size_t i = 0; i &lt; lines.size(); i++) {\n    result.lines[i] = strdup(s.c_str());\n  }\n  \n  result.x = 123;\n  result.linesCount = lines.size();\n  return result;\n}\n}\n</code></pre>\n<p>And the corresponding Java code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package my.native.package;\n\nimport com.sun.jna.Library;\nimport com.sun.jna.Native;\nimport com.sun.jna.Structure;\nimport java.util.List;\nimport java.util.Arrays;\nimport com.sun.jna.ptr.PointerByReference;\n\npublic interface MyNativeCLibrary extends Library {\n  public MyCustomStruct getMyCustomStructInstance();\n\n  public static class MyCustomStruct extends Structure {\n    public static class ByValue extends MyCustomStruct implements Structure.ByValue {}\n\n    public int x;\n    public PointerByReference lines;\n    public int linesCount;\n\n    public String[] linesAsArray() {\n      return lines.getPointer().getStringArray(0);\n    }\n\n    @Override\n    protected List getFieldOrder() {\n      return Arrays.asList(new String[] { &quot;x&quot;, &quot;lines&quot;, &quot;linesCount&quot; });\n    }\n  }\n}\n</code></pre>\n<p>Now, on the caller side, I need to store that collection of strings (as in: it's a static variable kept in memory for the whole Java application's lifetime), so it'd be smart to deep copy it as well. Copying this <code>PointerByReference</code> sounds terrible, but is do-able for a person used to C++ and dealing with raw bytes. I'm going to have a hard time explaining the usage to my  client, but, well, I remotely imagine it.</p>\n<p>Now, to the point: we've allocated some memory via <code>strdup</code>, now it'd make sense to clean it up (considering we've got a deep copy on Java end already). Following <a href=\"https://www.eshayne.com/jnaex/index.html?example=11\" rel=\"nofollow noreferrer\">eshayne's examples</a> I've added the cleanup method. In the end, the usage looks like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>MyCustomStruct foo = myLibraryHandle.getMyCustomStructInstance();\nApplication.foo = deepCopyMyCustomStruct(foo);\nmyLibraryHandle.cleanUpMyCustomStruct(foo);\n</code></pre>\n<p>That looks horrible, though. Even though we've got a Java wrapper on top of the JNA class which abstracts all those technical details away, I cannot figure out an &quot;atomic&quot; way of exposing such functions.</p>\n<p>Is there any better mechanism for that? I feel there must be a more natural way of doing this.</p>\n<p>I thought of wrapping such &quot;unsafe&quot; calls with some kind of a lambda:</p>\n<pre><code>myLibraryHandle.unsafeContext(() -&gt; { myLibraryHandle.getMyCustomStructInstance(); }\n</code></pre>\n<p>but if the <code>unsafeContext</code> would accept any void function, there's no meta-way of knowing which functions have been called inside.</p>\n<p>I also tried calling &quot;cleanup&quot; immediately after the native function (kinda hoping that JNA would deep copy...), but failed miserably.</p>\n"},{"tags":["java","hibernate","jpa"],"comments":[{"owner":{"account_id":15138451,"reputation":460,"user_id":12083015,"display_name":"Erwin"},"score":0,"creation_date":1680840240,"post_id":75955333,"comment_id":133968367,"body_markdown":"How do you deploy on the server?","body":"How do you deploy on the server?"},{"owner":{"account_id":25155312,"reputation":19,"user_id":21552621,"display_name":"Elena"},"score":0,"creation_date":1681084949,"post_id":75955333,"comment_id":133997549,"body_markdown":"@Erwin, im just running it with java -jar nameofjar.jar","body":"@Erwin, im just running it with java -jar nameofjar.jar"},{"owner":{"account_id":15138451,"reputation":460,"user_id":12083015,"display_name":"Erwin"},"score":0,"creation_date":1681092947,"post_id":75955333,"comment_id":133998162,"body_markdown":"can you check if the `jakarta.persistence` jar actually exist in the server?","body":"can you check if the <code>jakarta.persistence</code> jar actually exist in the server?"},{"owner":{"account_id":25155312,"reputation":19,"user_id":21552621,"display_name":"Elena"},"score":0,"creation_date":1681100946,"post_id":75955333,"comment_id":133998750,"body_markdown":"@Erwin i have to have it on server? i thought it has to be provided with my java application in builded jar.. sorry if im wrong. can you tell me where do i have to put it?","body":"@Erwin i have to have it on server? i thought it has to be provided with my java application in builded jar.. sorry if im wrong. can you tell me where do i have to put it?"},{"owner":{"account_id":15138451,"reputation":460,"user_id":12083015,"display_name":"Erwin"},"score":0,"creation_date":1681108550,"post_id":75955333,"comment_id":133999457,"body_markdown":"is it in the builded jar? have you check inside the jar?","body":"is it in the builded jar? have you check inside the jar?"},{"owner":{"account_id":25155312,"reputation":19,"user_id":21552621,"display_name":"Elena"},"score":0,"creation_date":1681111484,"post_id":75955333,"comment_id":133999846,"body_markdown":"yeah, it include jakarta.persistence","body":"yeah, it include jakarta.persistence"},{"owner":{"account_id":15138451,"reputation":460,"user_id":12083015,"display_name":"Erwin"},"score":0,"creation_date":1681118987,"post_id":75955333,"comment_id":134000974,"body_markdown":"I think the problem is in the jar-loading ordering. Check your [manifest](https://stackoverflow.com/a/53025261/12083015) to see the ordering, and I think it related with maven dependencies, try to move `jakarta.persistence` in the first order and then rebuild the jar","body":"I think the problem is in the jar-loading ordering. Check your <a href=\"https://stackoverflow.com/a/53025261/12083015\">manifest</a> to see the ordering, and I think it related with maven dependencies, try to move <code>jakarta.persistence</code> in the first order and then rebuild the jar"},{"owner":{"account_id":25155312,"reputation":19,"user_id":21552621,"display_name":"Elena"},"score":0,"creation_date":1681175013,"post_id":75955333,"comment_id":134010812,"body_markdown":"@Erwin You were right! Once i put jakarta.persistence on first place it worked! I had no idea its matters, i only thought it just has to be. Thank you a lot! i thought i&#39;m going crazy","body":"@Erwin You were right! Once i put jakarta.persistence on first place it worked! I had no idea its matters, i only thought it just has to be. Thank you a lot! i thought i&#39;m going crazy"},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1681205307,"post_id":75955333,"comment_id":134014982,"body_markdown":"Add `&lt;addClasspath&gt;true&lt;/addClasspath&gt;` to the `&lt;manifest&gt;` configuration of the `maven-jar-plugin`.","body":"Add <code>&lt;addClasspath&gt;true&lt;&#47;addClasspath&gt;</code> to the <code>&lt;manifest&gt;</code> configuration of the <code>maven-jar-plugin</code>."},{"owner":{"account_id":25155312,"reputation":19,"user_id":21552621,"display_name":"Elena"},"score":0,"creation_date":1681273659,"post_id":75955333,"comment_id":134028091,"body_markdown":"@MarkRotteveel, thanks, problem fixed with Erwin comment above","body":"@MarkRotteveel, thanks, problem fixed with Erwin comment above"},{"owner":{"account_id":5208125,"reputation":639,"user_id":4165384,"accept_rate":67,"display_name":"Damien Cooke"},"score":0,"creation_date":1683720389,"post_id":75955333,"comment_id":134409322,"body_markdown":"@Elena did you solve it by re-ordering maven dependencies?","body":"@Elena did you solve it by re-ordering maven dependencies?"},{"owner":{"account_id":25155312,"reputation":19,"user_id":21552621,"display_name":"Elena"},"score":1,"creation_date":1683769346,"post_id":75955333,"comment_id":134418600,"body_markdown":"@DamienCooke not only re-ordering, i deleted all dependencies and add again,  and make sure i put jakarta.persistence in the first order and it worked","body":"@DamienCooke not only re-ordering, i deleted all dependencies and add again,  and make sure i put jakarta.persistence in the first order and it worked"},{"owner":{"account_id":238697,"reputation":1454,"user_id":507761,"accept_rate":100,"display_name":"Matthew Read"},"score":0,"creation_date":1684550605,"post_id":75955333,"comment_id":134537655,"body_markdown":"You may have had a 2.x version of the library on your classpath, which had all the classes in the old `javax.persistence` package (ostensibly to ease migration, although it actually just made it harder AND more confusing).","body":"You may have had a 2.x version of the library on your classpath, which had all the classes in the old <code>javax.persistence</code> package (ostensibly to ease migration, although it actually just made it harder AND more confusing)."}],"answers":[{"comments":[{"owner":{"account_id":25155312,"reputation":19,"user_id":21552621,"display_name":"Elena"},"score":0,"creation_date":1681089075,"post_id":75955620,"comment_id":133997842,"body_markdown":"Thanks for advice, but i can only use JDK 16 or higher. And i also try mvn clean, mvn install - still same error","body":"Thanks for advice, but i can only use JDK 16 or higher. And i also try mvn clean, mvn install - still same error"},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1681205279,"post_id":75955620,"comment_id":134014975,"body_markdown":"This is in no way a solution for the question.","body":"This is in no way a solution for the question."}],"tags":[],"owner":{"account_id":14006714,"reputation":29,"user_id":10116632,"display_name":"lpdevlop"},"comment_count":2,"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1680844404,"creation_date":1680844404,"answer_id":75955620,"question_id":75955333,"body_markdown":"1.Try With Another JDK Version like AWS Corette 11 \r\n  example https://aws.amazon.com/corretto/\r\n2.Check did you Correct Import Project\r\n3Try to mvn clean ,mvn install","title":"java.lang.NoClassDefFoundError: jakarta/persistence/Persistence","body":"<p>1.Try With Another JDK Version like AWS Corette 11\nexample <a href=\"https://aws.amazon.com/corretto/\" rel=\"nofollow noreferrer\">https://aws.amazon.com/corretto/</a>\n2.Check did you Correct Import Project\n3Try to mvn clean ,mvn install</p>\n"}],"owner":{"account_id":25155312,"reputation":19,"user_id":21552621,"display_name":"Elena"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":323,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1681205238,"answer_count":1,"score":1,"last_activity_date":1681205182,"creation_date":1680839431,"question_id":75955333,"body_markdown":"When I run the application (Hibernate, JPA) in IntelliJ IDEA, everything works without errors, but the jar file created by Maven when launched on the server gives an error: \r\n\r\n&gt; java.lang.NoClassDefFoundError: jakarta/persistence/Persistence\r\n\r\nI don&#39;t know much about running the application on the server, please tell me what I&#39;m missing. Dependencies have been added, the configuration seems to be all there too.\r\n\r\nHere is my code:\r\n\r\npom.xml\r\n\r\n```xml\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n    &lt;distributionManagement&gt;\r\n        &lt;repository&gt;\r\n            &lt;uniqueVersion&gt;false&lt;/uniqueVersion&gt;\r\n            &lt;id&gt;corp1&lt;/id&gt;\r\n            &lt;name&gt;DataModel&lt;/name&gt;\r\n            &lt;url&gt;file:///home/sgt-user/.m2&lt;/url&gt;\r\n            &lt;layout&gt;default&lt;/layout&gt;\r\n        &lt;/repository&gt;\r\n    &lt;/distributionManagement&gt;\r\n\r\n    &lt;groupId&gt;org.example&lt;/groupId&gt;\r\n    &lt;artifactId&gt;port-reader&lt;/artifactId&gt;\r\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;!-- Build an executable JAR --&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.1.0&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;archive&gt;\r\n                        &lt;manifest&gt;\r\n                            &lt;mainClass&gt;com.sgt.EchoMultiServer&lt;/mainClass&gt;\r\n                        &lt;/manifest&gt;\r\n                    &lt;/archive&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hibernate-core-jakarta&lt;/artifactId&gt;\r\n            &lt;version&gt;5.6.15.Final&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.mariadb.jdbc&lt;/groupId&gt;\r\n            &lt;artifactId&gt;mariadb-java-client&lt;/artifactId&gt;\r\n            &lt;version&gt;3.1.3&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;jakarta.persistence&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jakarta.persistence-api&lt;/artifactId&gt;\r\n            &lt;version&gt;3.1.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n    &lt;/dependencies&gt;\r\n\r\n\r\n    &lt;properties&gt;\r\n        &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    &lt;/properties&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\nModel:\r\n\r\n```java\r\nimport jakarta.persistence.*;\r\n\r\nimport java.util.Objects;\r\n\r\n@Entity\r\n@Table(name = &quot;meter&quot;)\r\npublic class DataModel {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Column(name=&quot;id&quot;, nullable=false, unique=true)\r\n    private Long id;\r\n\r\n    @Column(name=&quot;imei&quot;)\r\n    private String imei;\r\n\r\n    @Column(name=&quot;readCycle&quot;)\r\n    private int readCycle;\r\n\r\n    @Column(name=&quot;dataCount&quot;)\r\n    private int dataCount;\r\n\r\n    @Column(name=&quot;volume&quot;)\r\n    private double volume;\r\n\r\n    @Column(name=&quot;interval1&quot;)\r\n    private int interval1;\r\n\r\n    @Column(name=&quot;interval2&quot;)\r\n    private int interval2;\r\n\r\n    @Column(name=&quot;interval3&quot;)\r\n    private int interval3;\r\n\r\n    @Column(name=&quot;batP&quot;)\r\n    private int batP;\r\n\r\n    @Column(name=&quot;batV&quot;)\r\n    private int batV;\r\n\r\n    @Column(name=&quot;chsum&quot;)\r\n    private int chsum;\r\n\r\n    public DataModel(){}\r\n\r\n    public DataModel(String imei, int readCycle, int dataCount, double volume, int interval1, int interval2, int interval3, int batP, int batV, int chsum) {\r\n        this.imei = imei;\r\n        this.readCycle = readCycle;\r\n        this.dataCount = dataCount;\r\n        this.volume = volume;\r\n        this.interval1 = interval1;\r\n        this.interval2 = interval2;\r\n        this.interval3 = interval3;\r\n        this.batP = batP;\r\n        this.batV = batV;\r\n        this.chsum = chsum;\r\n    }\r\n\r\n    @Override\r\n    public boolean equals(Object o) {\r\n        if (this == o) return true;\r\n        if (!(o instanceof DataModel dataModel)) return false;\r\n        return readCycle == dataModel.readCycle &amp;&amp; dataCount == dataModel.dataCount &amp;&amp; Double.compare(dataModel.volume, volume) == 0 &amp;&amp; interval1 == dataModel.interval1 &amp;&amp; interval2 == dataModel.interval2 &amp;&amp; interval3 == dataModel.interval3 &amp;&amp; batP == dataModel.batP &amp;&amp; batV == dataModel.batV &amp;&amp; chsum == dataModel.chsum &amp;&amp; Objects.equals(id, dataModel.id) &amp;&amp; Objects.equals(imei, dataModel.imei);\r\n    }\r\n\r\n    @Override\r\n    public int hashCode() {\r\n        return Objects.hash(id, imei, readCycle, dataCount, volume, interval1, interval2, interval3, batP, batV, chsum);\r\n    }\r\n\r\n    public Long getId() {\r\n        return id;\r\n    }\r\n\r\n    public void setId(Long id) {\r\n        this.id = id;\r\n    }\r\n\r\n    public String getImei() {\r\n        return imei;\r\n    }\r\n\r\n    public void setImei(String imei) {\r\n        this.imei = imei;\r\n    }\r\n\r\n    public int getReadCycle() {\r\n        return readCycle;\r\n    }\r\n\r\n    public void setReadCycle(int readCycle) {\r\n        this.readCycle = readCycle;\r\n    }\r\n\r\n    public int getDataCount() {\r\n        return dataCount;\r\n    }\r\n\r\n    public void setDataCount(int dataCount) {\r\n        this.dataCount = dataCount;\r\n    }\r\n\r\n    public double getVolume() {\r\n        return volume;\r\n    }\r\n\r\n    public void setVolume(double volume) {\r\n        this.volume = volume;\r\n    }\r\n\r\n    public int getInterval1() {\r\n        return interval1;\r\n    }\r\n\r\n    public void setInterval1(int interval1) {\r\n        this.interval1 = interval1;\r\n    }\r\n\r\n    public int getInterval2() {\r\n        return interval2;\r\n    }\r\n\r\n    public void setInterval2(int interval2) {\r\n        this.interval2 = interval2;\r\n    }\r\n\r\n    public int getInterval3() {\r\n        return interval3;\r\n    }\r\n\r\n    public void setInterval3(int interval3) {\r\n        this.interval3 = interval3;\r\n    }\r\n\r\n    public int getBatP() {\r\n        return batP;\r\n    }\r\n\r\n    public void setBatP(int batP) {\r\n        this.batP = batP;\r\n    }\r\n\r\n    public int getBatV() {\r\n        return batV;\r\n    }\r\n\r\n    public void setBatV(int batV) {\r\n        this.batV = batV;\r\n    }\r\n\r\n    public int getChsum() {\r\n        return chsum;\r\n    }\r\n\r\n    public void setChsum(int chsum) {\r\n        this.chsum = chsum;\r\n    }\r\n}\r\n```\r\n\r\nJpaService:\r\n\r\n\r\n```java\r\nimport jakarta.persistence.EntityManagerFactory;\r\nimport jakarta.persistence.Persistence;\r\n\r\n\r\npublic class JpaService {\r\n\r\n    private static JpaService instance;\r\n\r\n    private EntityManagerFactory entityManagerFactory;\r\n\r\n    private JpaService(){\r\n        entityManagerFactory = Persistence.createEntityManagerFactory(&quot;port-reader&quot;);\r\n\r\n    }\r\n\r\n    public static synchronized JpaService getInstance() {\r\n        return instance == null ? instance = new JpaService() : instance;\r\n    }\r\n\r\n    public void shutdown(){\r\n        if(entityManagerFactory != null){\r\n            entityManagerFactory.close();\r\n        }\r\n\r\n    }\r\n\r\n    public EntityManagerFactory getEntityManagerFactory(){\r\n        return entityManagerFactory;\r\n    }\r\n}\r\n```\r\n\r\npersistence.xml:\r\n\r\n\r\n```xml\r\n  xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd&quot;\r\n             version=&quot;2.0&quot;&gt;\r\n    &lt;persistence-unit name=&quot;port-reader&quot; transaction-type=&quot;RESOURCE_LOCAL&quot;&gt;\r\n&lt;!--        &lt;provider&gt;org.hibernate.ejb.HibernatePersistence&lt;/provider&gt;--&gt;\r\n        &lt;properties&gt;\r\n            &lt;property name=&quot;jakarta.persistence.jdbc.url&quot; value=&quot;jdbc:mariadb://localhost:3306/sgt&quot;/&gt;\r\n            &lt;property name=&quot;jakarta.persistence.jdbc.user&quot; value=&quot;sgt-user&quot;/&gt;\r\n            &lt;property name=&quot;jakarta.persistence.jdbc.password&quot; value=&quot;sgtpass&quot;/&gt;\r\n            &lt;property name=&quot;jakarta.persistence.schema-generation.database.action&quot; value=&quot;none&quot;/&gt;\r\n        &lt;/properties&gt;\r\n    &lt;/persistence-unit&gt;\r\n&lt;/persistence&gt; \r\n```\r\n\r\nThis is my project structure:\r\n\r\n[project structure](https://i.stack.imgur.com/MP3nj.png)\r\n\r\n\r\nand the error I get:\r\n\r\n[error](https://i.stack.imgur.com/p569w.png)\r\n\r\n\r\nIs there&#39;s something wrong with my project structure or what am I missing?","title":"java.lang.NoClassDefFoundError: jakarta/persistence/Persistence","body":"<p>When I run the application (Hibernate, JPA) in IntelliJ IDEA, everything works without errors, but the jar file created by Maven when launched on the server gives an error:</p>\n<blockquote>\n<p>java.lang.NoClassDefFoundError: jakarta/persistence/Persistence</p>\n</blockquote>\n<p>I don't know much about running the application on the server, please tell me what I'm missing. Dependencies have been added, the configuration seems to be all there too.</p>\n<p>Here is my code:</p>\n<p>pom.xml</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;distributionManagement&gt;\n        &lt;repository&gt;\n            &lt;uniqueVersion&gt;false&lt;/uniqueVersion&gt;\n            &lt;id&gt;corp1&lt;/id&gt;\n            &lt;name&gt;DataModel&lt;/name&gt;\n            &lt;url&gt;file:///home/sgt-user/.m2&lt;/url&gt;\n            &lt;layout&gt;default&lt;/layout&gt;\n        &lt;/repository&gt;\n    &lt;/distributionManagement&gt;\n\n    &lt;groupId&gt;org.example&lt;/groupId&gt;\n    &lt;artifactId&gt;port-reader&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;!-- Build an executable JAR --&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.1.0&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;archive&gt;\n                        &lt;manifest&gt;\n                            &lt;mainClass&gt;com.sgt.EchoMultiServer&lt;/mainClass&gt;\n                        &lt;/manifest&gt;\n                    &lt;/archive&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-core-jakarta&lt;/artifactId&gt;\n            &lt;version&gt;5.6.15.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.mariadb.jdbc&lt;/groupId&gt;\n            &lt;artifactId&gt;mariadb-java-client&lt;/artifactId&gt;\n            &lt;version&gt;3.1.3&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;jakarta.persistence&lt;/groupId&gt;\n            &lt;artifactId&gt;jakarta.persistence-api&lt;/artifactId&gt;\n            &lt;version&gt;3.1.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n    &lt;/dependencies&gt;\n\n\n    &lt;properties&gt;\n        &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;/properties&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>Model:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import jakarta.persistence.*;\n\nimport java.util.Objects;\n\n@Entity\n@Table(name = &quot;meter&quot;)\npublic class DataModel {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name=&quot;id&quot;, nullable=false, unique=true)\n    private Long id;\n\n    @Column(name=&quot;imei&quot;)\n    private String imei;\n\n    @Column(name=&quot;readCycle&quot;)\n    private int readCycle;\n\n    @Column(name=&quot;dataCount&quot;)\n    private int dataCount;\n\n    @Column(name=&quot;volume&quot;)\n    private double volume;\n\n    @Column(name=&quot;interval1&quot;)\n    private int interval1;\n\n    @Column(name=&quot;interval2&quot;)\n    private int interval2;\n\n    @Column(name=&quot;interval3&quot;)\n    private int interval3;\n\n    @Column(name=&quot;batP&quot;)\n    private int batP;\n\n    @Column(name=&quot;batV&quot;)\n    private int batV;\n\n    @Column(name=&quot;chsum&quot;)\n    private int chsum;\n\n    public DataModel(){}\n\n    public DataModel(String imei, int readCycle, int dataCount, double volume, int interval1, int interval2, int interval3, int batP, int batV, int chsum) {\n        this.imei = imei;\n        this.readCycle = readCycle;\n        this.dataCount = dataCount;\n        this.volume = volume;\n        this.interval1 = interval1;\n        this.interval2 = interval2;\n        this.interval3 = interval3;\n        this.batP = batP;\n        this.batV = batV;\n        this.chsum = chsum;\n    }\n\n    @Override\n    public boolean equals(Object o) {\n        if (this == o) return true;\n        if (!(o instanceof DataModel dataModel)) return false;\n        return readCycle == dataModel.readCycle &amp;&amp; dataCount == dataModel.dataCount &amp;&amp; Double.compare(dataModel.volume, volume) == 0 &amp;&amp; interval1 == dataModel.interval1 &amp;&amp; interval2 == dataModel.interval2 &amp;&amp; interval3 == dataModel.interval3 &amp;&amp; batP == dataModel.batP &amp;&amp; batV == dataModel.batV &amp;&amp; chsum == dataModel.chsum &amp;&amp; Objects.equals(id, dataModel.id) &amp;&amp; Objects.equals(imei, dataModel.imei);\n    }\n\n    @Override\n    public int hashCode() {\n        return Objects.hash(id, imei, readCycle, dataCount, volume, interval1, interval2, interval3, batP, batV, chsum);\n    }\n\n    public Long getId() {\n        return id;\n    }\n\n    public void setId(Long id) {\n        this.id = id;\n    }\n\n    public String getImei() {\n        return imei;\n    }\n\n    public void setImei(String imei) {\n        this.imei = imei;\n    }\n\n    public int getReadCycle() {\n        return readCycle;\n    }\n\n    public void setReadCycle(int readCycle) {\n        this.readCycle = readCycle;\n    }\n\n    public int getDataCount() {\n        return dataCount;\n    }\n\n    public void setDataCount(int dataCount) {\n        this.dataCount = dataCount;\n    }\n\n    public double getVolume() {\n        return volume;\n    }\n\n    public void setVolume(double volume) {\n        this.volume = volume;\n    }\n\n    public int getInterval1() {\n        return interval1;\n    }\n\n    public void setInterval1(int interval1) {\n        this.interval1 = interval1;\n    }\n\n    public int getInterval2() {\n        return interval2;\n    }\n\n    public void setInterval2(int interval2) {\n        this.interval2 = interval2;\n    }\n\n    public int getInterval3() {\n        return interval3;\n    }\n\n    public void setInterval3(int interval3) {\n        this.interval3 = interval3;\n    }\n\n    public int getBatP() {\n        return batP;\n    }\n\n    public void setBatP(int batP) {\n        this.batP = batP;\n    }\n\n    public int getBatV() {\n        return batV;\n    }\n\n    public void setBatV(int batV) {\n        this.batV = batV;\n    }\n\n    public int getChsum() {\n        return chsum;\n    }\n\n    public void setChsum(int chsum) {\n        this.chsum = chsum;\n    }\n}\n</code></pre>\n<p>JpaService:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import jakarta.persistence.EntityManagerFactory;\nimport jakarta.persistence.Persistence;\n\n\npublic class JpaService {\n\n    private static JpaService instance;\n\n    private EntityManagerFactory entityManagerFactory;\n\n    private JpaService(){\n        entityManagerFactory = Persistence.createEntityManagerFactory(&quot;port-reader&quot;);\n\n    }\n\n    public static synchronized JpaService getInstance() {\n        return instance == null ? instance = new JpaService() : instance;\n    }\n\n    public void shutdown(){\n        if(entityManagerFactory != null){\n            entityManagerFactory.close();\n        }\n\n    }\n\n    public EntityManagerFactory getEntityManagerFactory(){\n        return entityManagerFactory;\n    }\n}\n</code></pre>\n<p>persistence.xml:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>  xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n             xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd&quot;\n             version=&quot;2.0&quot;&gt;\n    &lt;persistence-unit name=&quot;port-reader&quot; transaction-type=&quot;RESOURCE_LOCAL&quot;&gt;\n&lt;!--        &lt;provider&gt;org.hibernate.ejb.HibernatePersistence&lt;/provider&gt;--&gt;\n        &lt;properties&gt;\n            &lt;property name=&quot;jakarta.persistence.jdbc.url&quot; value=&quot;jdbc:mariadb://localhost:3306/sgt&quot;/&gt;\n            &lt;property name=&quot;jakarta.persistence.jdbc.user&quot; value=&quot;sgt-user&quot;/&gt;\n            &lt;property name=&quot;jakarta.persistence.jdbc.password&quot; value=&quot;sgtpass&quot;/&gt;\n            &lt;property name=&quot;jakarta.persistence.schema-generation.database.action&quot; value=&quot;none&quot;/&gt;\n        &lt;/properties&gt;\n    &lt;/persistence-unit&gt;\n&lt;/persistence&gt; \n</code></pre>\n<p>This is my project structure:</p>\n<p><a href=\"https://i.stack.imgur.com/MP3nj.png\" rel=\"nofollow noreferrer\">project structure</a></p>\n<p>and the error I get:</p>\n<p><a href=\"https://i.stack.imgur.com/p569w.png\" rel=\"nofollow noreferrer\">error</a></p>\n<p>Is there's something wrong with my project structure or what am I missing?</p>\n"},{"tags":["java","spring","maven","spring-boot"],"answers":[{"comments":[{"owner":{"account_id":429779,"reputation":517,"user_id":812853,"accept_rate":44,"display_name":"Sandheep"},"score":0,"creation_date":1466582543,"post_id":37961896,"comment_id":63371014,"body_markdown":"Thanks for the tip. But I am already aware that this exclusion can be done on project B. I wanted to see if there is a way to achieve this during the packaging of Project A itself. Wanted to take off the burden of excluding unwanted dependencies from the implementing project. The &lt;provided&gt; scope with &lt;optional&gt; tag is not supposed to include the jars in final artifact. Wanted to check if its some overriding done by spring-boot-maven-plugin","body":"Thanks for the tip. But I am already aware that this exclusion can be done on project B. I wanted to see if there is a way to achieve this during the packaging of Project A itself. Wanted to take off the burden of excluding unwanted dependencies from the implementing project. The &lt;provided&gt; scope with &lt;optional&gt; tag is not supposed to include the jars in final artifact. Wanted to check if its some overriding done by spring-boot-maven-plugin"},{"owner":{"account_id":146411,"reputation":9094,"user_id":356857,"accept_rate":80,"display_name":"WeMakeSoftware"},"score":1,"creation_date":1466583356,"post_id":37961896,"comment_id":63371499,"body_markdown":"well, according to http://docs.spring.io/spring-boot/docs/current/maven-plugin/examples/exclude-dependency.html you exclude only the artifacts, but not the its&#39; transitive dependencies","body":"well, according to <a href=\"http://docs.spring.io/spring-boot/docs/current/maven-plugin/examples/exclude-dependency.html\" rel=\"nofollow noreferrer\">docs.spring.io/spring-boot/docs/current/maven-plugin/example&zwnj;&#8203;s/&hellip;</a> you exclude only the artifacts, but not the its&#39; transitive dependencies"}],"tags":[],"owner":{"account_id":146411,"reputation":9094,"user_id":356857,"accept_rate":80,"display_name":"WeMakeSoftware"},"comment_count":2,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1466582238,"creation_date":1466582238,"answer_id":37961896,"question_id":37961730,"body_markdown":"inside project B pom.xml you can do the following:\r\n\r\n      &lt;dependencies&gt;\r\n        ....\r\n        &lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.example&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;projectA&lt;/artifactId&gt;\r\n\r\n            &lt;exclusions&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;groupId&gt;com.foo.bar&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;baz&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n                ....\r\n            &lt;/exclusions&gt;\r\n\t\t&lt;/dependency&gt;\r\n        .....\r\n       &lt;/dependencies&gt;","title":"spring-boot : Exclude dependencies on packaging","body":"<p>inside project B pom.xml you can do the following:</p>\n\n<pre><code>  &lt;dependencies&gt;\n    ....\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.example&lt;/groupId&gt;\n        &lt;artifactId&gt;projectA&lt;/artifactId&gt;\n\n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;com.foo.bar&lt;/groupId&gt;\n                &lt;artifactId&gt;baz&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n            ....\n        &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n    .....\n   &lt;/dependencies&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":429779,"reputation":517,"user_id":812853,"accept_rate":44,"display_name":"Sandheep"},"score":0,"creation_date":1466609870,"post_id":37966575,"comment_id":63391372,"body_markdown":"I used the method you specified using the &lt;classifier&gt; and solved my issue. This will create the **artifact-exec.jar** and **artifact.jar** where **artifact.jar** can be used as library and **artifact-exec.jar** can be used for running as standalone.\nClean solution without any hacks to pom file.\nThanks C&#232;sar :)","body":"I used the method you specified using the &lt;classifier&gt; and solved my issue. This will create the <b>artifact-exec.jar</b> and <b>artifact.jar</b> where <b>artifact.jar</b> can be used as library and <b>artifact-exec.jar</b> can be used for running as standalone. Clean solution without any hacks to pom file. Thanks C&#232;sar :)"}],"tags":[],"owner":{"account_id":3361564,"reputation":1216,"user_id":2823270,"display_name":"C&#232;sar"},"comment_count":1,"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1466594560,"creation_date":1466594560,"answer_id":37966575,"question_id":37961730,"body_markdown":"In our current project we have the requirement to create a war file for the application, which has to be deployed in a JEE server. The war file must include only the needed jar files, not including any API or implementation already provided by the JEE server.\r\n\r\nBut, we want to retain the possibility to generate an executable war or jar file as provided by default by Boot, for testing purposes. \r\n\r\nTo achieve it, we&#39;ve set all optional dependencies as _provided_. For example, we have some direct dependencies used in development, like the JDBC driver, we don&#39;t want to include in the deployed war file. Also there are some boot main starters which provide dependencies with other starters and libraries we don&#39;t need in a JEE server. This is the case of the _spring-boot-starter-tomcat_ and _spring-boot-starter-jdbc_ starters. In our project, we have the followind dependencies in our _pom.xml_ file:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\r\n        &lt;scope&gt;provided&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;\r\n        &lt;scope&gt;provided&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;com.oracle&lt;/groupId&gt;\r\n      &lt;artifactId&gt;ojdbc7&lt;/artifactId&gt;\r\n      &lt;scope&gt;provided&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\nThis way those dependencies won&#39;t be included in the original jar/war file, but the spring boot maven plugin will include them in the _lib-provided_ folder of the repackaged jar/war.\r\n\r\nThose dependencies won&#39;t be seen by the JEE server, but make the packaged application bigger than needed. The solution is to tell the spring boot maven plugin to create the repackaged file with another name, as well as excluding the development tools:\r\n\r\n    &lt;plugin&gt;\r\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n      &lt;configuration&gt;\r\n          &lt;mainClass&gt;${start-class}&lt;/mainClass&gt;\r\n          &lt;classifier&gt;exec&lt;/classifier&gt;\r\n      &lt;/configuration&gt;\r\n    &lt;/plugin&gt;\r\n\r\nThis way maven will generate two packages for your application:\r\n\r\n* The default jar/war package, without all the provided dependencies.\r\n* A repackaged file whose name ends with _exec.jar/.war, with all provided dependencies in the _lib-provided_ folder and the support to run the application with *java -jar file*\r\n\r\nIn your case you could use the same technique to be able to generate the package for the Project A to be included in Project B, and the package for Project A to be run as standalone.\r\n\r\nIf you don&#39;t need to create the package for Project A to be run by itself, and only test it in your IDE, you might even remove the spring boot maven plugin from your _pom.xml_.","title":"spring-boot : Exclude dependencies on packaging","body":"<p>In our current project we have the requirement to create a war file for the application, which has to be deployed in a JEE server. The war file must include only the needed jar files, not including any API or implementation already provided by the JEE server.</p>\n\n<p>But, we want to retain the possibility to generate an executable war or jar file as provided by default by Boot, for testing purposes. </p>\n\n<p>To achieve it, we've set all optional dependencies as <em>provided</em>. For example, we have some direct dependencies used in development, like the JDBC driver, we don't want to include in the deployed war file. Also there are some boot main starters which provide dependencies with other starters and libraries we don't need in a JEE server. This is the case of the <em>spring-boot-starter-tomcat</em> and <em>spring-boot-starter-jdbc</em> starters. In our project, we have the followind dependencies in our <em>pom.xml</em> file:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n    &lt;scope&gt;provided&lt;/scope&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;\n    &lt;scope&gt;provided&lt;/scope&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n  &lt;groupId&gt;com.oracle&lt;/groupId&gt;\n  &lt;artifactId&gt;ojdbc7&lt;/artifactId&gt;\n  &lt;scope&gt;provided&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>This way those dependencies won't be included in the original jar/war file, but the spring boot maven plugin will include them in the <em>lib-provided</em> folder of the repackaged jar/war.</p>\n\n<p>Those dependencies won't be seen by the JEE server, but make the packaged application bigger than needed. The solution is to tell the spring boot maven plugin to create the repackaged file with another name, as well as excluding the development tools:</p>\n\n<pre><code>&lt;plugin&gt;\n  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n  &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n  &lt;configuration&gt;\n      &lt;mainClass&gt;${start-class}&lt;/mainClass&gt;\n      &lt;classifier&gt;exec&lt;/classifier&gt;\n  &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n\n<p>This way maven will generate two packages for your application:</p>\n\n<ul>\n<li>The default jar/war package, without all the provided dependencies.</li>\n<li>A repackaged file whose name ends with _exec.jar/.war, with all provided dependencies in the <em>lib-provided</em> folder and the support to run the application with <em>java -jar file</em></li>\n</ul>\n\n<p>In your case you could use the same technique to be able to generate the package for the Project A to be included in Project B, and the package for Project A to be run as standalone.</p>\n\n<p>If you don't need to create the package for Project A to be run by itself, and only test it in your IDE, you might even remove the spring boot maven plugin from your <em>pom.xml</em>.</p>\n"},{"comments":[{"owner":{"account_id":14571259,"reputation":994,"user_id":10524503,"display_name":"Wortig"},"score":0,"creation_date":1692117488,"post_id":75984322,"comment_id":135579699,"body_markdown":"Is it also removing transitive dependencies? (dependencies of com.foo.bar if there are any)","body":"Is it also removing transitive dependencies? (dependencies of com.foo.bar if there are any)"}],"tags":[],"owner":{"account_id":17426473,"reputation":990,"user_id":12631293,"display_name":"Tomasz"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681205140,"creation_date":1681205140,"answer_id":75984322,"question_id":37961730,"body_markdown":"You can &lt;b&gt;add `exclude` block into spring-boot-maven-plugin&lt;/b&gt;\r\n\r\n\r\n      &lt;plugin&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n        &lt;configuration&gt;\r\n          &lt;excludes&gt;\r\n            &lt;exclude&gt;\r\n              &lt;groupId&gt;com.foo&lt;/groupId&gt;\r\n              &lt;artifactId&gt;bar&lt;/artifactId&gt;\r\n            &lt;/exclude&gt;\r\n          &lt;/excludes&gt;\r\n        &lt;/configuration&gt;\r\n\r\nOfficial documentation : https://docs.spring.io/spring-boot/docs/2.1.13.RELEASE/maven-plugin/examples/exclude-dependency.html","title":"spring-boot : Exclude dependencies on packaging","body":"<p>You can <b>add <code>exclude</code> block into spring-boot-maven-plugin</b></p>\n<pre><code>  &lt;plugin&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n    &lt;configuration&gt;\n      &lt;excludes&gt;\n        &lt;exclude&gt;\n          &lt;groupId&gt;com.foo&lt;/groupId&gt;\n          &lt;artifactId&gt;bar&lt;/artifactId&gt;\n        &lt;/exclude&gt;\n      &lt;/excludes&gt;\n    &lt;/configuration&gt;\n</code></pre>\n<p>Official documentation : <a href=\"https://docs.spring.io/spring-boot/docs/2.1.13.RELEASE/maven-plugin/examples/exclude-dependency.html\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-boot/docs/2.1.13.RELEASE/maven-plugin/examples/exclude-dependency.html</a></p>\n"}],"owner":{"account_id":429779,"reputation":517,"user_id":812853,"accept_rate":44,"display_name":"Sandheep"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21500,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"accepted_answer_id":37966575,"answer_count":3,"score":9,"last_activity_date":1681205140,"creation_date":1466581725,"question_id":37961730,"body_markdown":"I am working on a spring boot project ( Project A ) that would be included in other projects ( Project B, Project C ... ) . I have several dependencies in Project A, but in the project importing Project A, some or only one may be required. \r\nI am trying to find a way to exclude the jar dependencies while packaging Project A so that the required ones will be provided by Project B during run time. I would like to have the dependencies available when the Project A is run independently for testing purposes. \r\n\r\n**Already tried the following**\r\n\r\nI have tried using:\r\n\r\n    &lt;scope&gt;provided&lt;/scope&gt;\r\n    &lt;optional&gt;true&lt;/optional&gt;\r\n\r\nStill the jars end up in the final artifact.\r\n\r\nAlso  tried adding the following to the spring-boot-maven-plugin\r\n\r\n               &lt;plugins&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n                    &lt;executions&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;goals&gt;\r\n                                &lt;goal&gt;repackage&lt;/goal&gt;\r\n                            &lt;/goals&gt;\r\n                            &lt;configuration&gt;\r\n                                &lt;excludeArtifactIds&gt;spring-boot-starter-redis&lt;/excludeArtifactIds&gt;\r\n                            &lt;/configuration&gt;\r\n                        &lt;/execution&gt;\r\n                    &lt;/executions&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n\r\nThis would just remove the spring-boot dependency , but the jars for the children of this dependency would still end up in the final artifact.","title":"spring-boot : Exclude dependencies on packaging","body":"<p>I am working on a spring boot project ( Project A ) that would be included in other projects ( Project B, Project C ... ) . I have several dependencies in Project A, but in the project importing Project A, some or only one may be required. \nI am trying to find a way to exclude the jar dependencies while packaging Project A so that the required ones will be provided by Project B during run time. I would like to have the dependencies available when the Project A is run independently for testing purposes. </p>\n\n<p><strong>Already tried the following</strong></p>\n\n<p>I have tried using:</p>\n\n<pre><code>&lt;scope&gt;provided&lt;/scope&gt;\n&lt;optional&gt;true&lt;/optional&gt;\n</code></pre>\n\n<p>Still the jars end up in the final artifact.</p>\n\n<p>Also  tried adding the following to the spring-boot-maven-plugin</p>\n\n<pre><code>           &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;repackage&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;excludeArtifactIds&gt;spring-boot-starter-redis&lt;/excludeArtifactIds&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n</code></pre>\n\n<p>This would just remove the spring-boot dependency , but the jars for the children of this dependency would still end up in the final artifact.</p>\n"},{"tags":["java","vaadin-flow","vaadin24"],"answers":[{"tags":[],"owner":{"account_id":4430906,"reputation":3990,"user_id":3608089,"display_name":"ollitietavainen"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1681205078,"creation_date":1681205078,"answer_id":75984310,"question_id":75982984,"body_markdown":"[It&#39;s a known omission][1]. Here&#39;s a workaround from the ticket:\r\n```\r\n/*\r\n * Do not close the overlay ({@link SubMenu} containing this menu item when clicked.\r\n */\r\npublic class RetainOpenedMenuItemDecorator {\r\n    public static final String CHECKED_ATTR = &quot;menu-item-checked&quot;;\r\n    private final MenuItem menuItem;\r\n\r\n    public RetainOpenedMenuItemDecorator(MenuItem menuItem) {\r\n        this.menuItem = menuItem;\r\n        menuItem.getElement().addEventListener(&quot;click&quot;, e -&gt; {\r\n            if (!menuItem.isCheckable()) {\r\n                return;\r\n            }\r\n            // needed because UI change is also prevented\r\n            if (menuItem.isChecked()) {\r\n                menuItem.getElement().executeJs(&quot;this.setAttribute(&#39;&quot;+ CHECKED_ATTR + &quot;&#39;, &#39;&#39;)&quot;);\r\n            } else {\r\n                menuItem.getElement().executeJs(&quot;this.removeAttribute(&#39;&quot;+ CHECKED_ATTR + &quot;&#39;)&quot;);\r\n            }\r\n        }).addEventData(&quot;event.preventDefault()&quot;);\r\n    }\r\n\r\n    public MenuItem getMenuItem() {\r\n        return menuItem;\r\n    }\r\n\r\n    public static void keepOpenOnClick(MenuItem menuItem) {\r\n        new RetainOpenedMenuItemDecorator(menuItem);\r\n    }\r\n\r\n    public static void keepOpenOnClick(SubMenu subMenu) {\r\n        subMenu.getItems().forEach(RetainOpenedMenuItemDecorator::keepOpenOnClick);\r\n    }\r\n}\r\n```\r\n\r\n\r\n  [1]: https://github.com/vaadin/web-components/issues/1005","title":"Vaadin : preventing MenuBar from closing when MenuBarRootItem is clicked","body":"<p><a href=\"https://github.com/vaadin/web-components/issues/1005\" rel=\"nofollow noreferrer\">It's a known omission</a>. Here's a workaround from the ticket:</p>\n<pre><code>/*\n * Do not close the overlay ({@link SubMenu} containing this menu item when clicked.\n */\npublic class RetainOpenedMenuItemDecorator {\n    public static final String CHECKED_ATTR = &quot;menu-item-checked&quot;;\n    private final MenuItem menuItem;\n\n    public RetainOpenedMenuItemDecorator(MenuItem menuItem) {\n        this.menuItem = menuItem;\n        menuItem.getElement().addEventListener(&quot;click&quot;, e -&gt; {\n            if (!menuItem.isCheckable()) {\n                return;\n            }\n            // needed because UI change is also prevented\n            if (menuItem.isChecked()) {\n                menuItem.getElement().executeJs(&quot;this.setAttribute('&quot;+ CHECKED_ATTR + &quot;', '')&quot;);\n            } else {\n                menuItem.getElement().executeJs(&quot;this.removeAttribute('&quot;+ CHECKED_ATTR + &quot;')&quot;);\n            }\n        }).addEventData(&quot;event.preventDefault()&quot;);\n    }\n\n    public MenuItem getMenuItem() {\n        return menuItem;\n    }\n\n    public static void keepOpenOnClick(MenuItem menuItem) {\n        new RetainOpenedMenuItemDecorator(menuItem);\n    }\n\n    public static void keepOpenOnClick(SubMenu subMenu) {\n        subMenu.getItems().forEach(RetainOpenedMenuItemDecorator::keepOpenOnClick);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":110787,"reputation":13,"user_id":293035,"display_name":"thogau"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":114,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75984310,"answer_count":1,"score":0,"last_activity_date":1681205078,"creation_date":1681194615,"question_id":75982984,"body_markdown":"I am using vaadin 24. I have a MenuBar and I would like to modify the default behavior of MenuBar so that it doesn&#39;t close when I click on the items (to be able to click them several times). Do someone know how to achieve this please ?\r\n\r\nHere&#39;s my code :\r\n```\r\nMenuBar menu = new MenuBar();\r\nmenu.addItem(VaadinIcon.PLUS.create(), event -&gt; increase());\r\nmenu.addItem(VaadinIcon.MINUS.create(), event -&gt; decrease());\r\n```","title":"Vaadin : preventing MenuBar from closing when MenuBarRootItem is clicked","body":"<p>I am using vaadin 24. I have a MenuBar and I would like to modify the default behavior of MenuBar so that it doesn't close when I click on the items (to be able to click them several times). Do someone know how to achieve this please ?</p>\n<p>Here's my code :</p>\n<pre><code>MenuBar menu = new MenuBar();\nmenu.addItem(VaadinIcon.PLUS.create(), event -&gt; increase());\nmenu.addItem(VaadinIcon.MINUS.create(), event -&gt; decrease());\n</code></pre>\n"},{"tags":["java","eclipse","maven","certificate"],"comments":[{"owner":{"account_id":12743722,"reputation":19966,"user_id":12567365,"display_name":"andrewJames"},"score":1,"creation_date":1652361833,"post_id":72216382,"comment_id":127591481,"body_markdown":"Does this answer your question? [Error - trustAnchors parameter must be non-empty](https://stackoverflow.com/questions/6784463/error-trustanchors-parameter-must-be-non-empty)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/6784463/error-trustanchors-parameter-must-be-non-empty\">Error - trustAnchors parameter must be non-empty</a>"},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1652363341,"post_id":72216382,"comment_id":127592103,"body_markdown":"The [documentation of trust anchors can be found here](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/security/cert/TrustAnchor.html). `TrustAnchor` has three constructors. Which one did you choose with which parameter values? Please show your code.","body":"The <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/security/cert/TrustAnchor.html\" rel=\"nofollow noreferrer\">documentation of trust anchors can be found here</a>. <code>TrustAnchor</code> has three constructors. Which one did you choose with which parameter values? Please show your code."},{"owner":{"account_id":9463953,"reputation":1,"user_id":7036935,"display_name":"ParanoidAndroid"},"score":0,"creation_date":1652372794,"post_id":72216382,"comment_id":127595971,"body_markdown":"@andrewJames I saw that link before but I am still confused on how to resolve my issue.","body":"@andrewJames I saw that link before but I am still confused on how to resolve my issue."},{"owner":{"account_id":9463953,"reputation":1,"user_id":7036935,"display_name":"ParanoidAndroid"},"score":0,"creation_date":1652372902,"post_id":72216382,"comment_id":127596005,"body_markdown":"@howlger I didn&#39;t write the code. However, the code base works for my entire team except me....I am not sure what I did wrong during the set up. I spent a lot of time on calls with the team to no avail. :(","body":"@howlger I didn&#39;t write the code. However, the code base works for my entire team except me....I am not sure what I did wrong during the set up. I spent a lot of time on calls with the team to no avail. :("},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1652396887,"post_id":72216382,"comment_id":127602960,"body_markdown":"The [Javadoc](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/security/cert/PKIXParameters.html#setTrustAnchors%28java.util.Set%29) says: _&quot;    InvalidAlgorithmParameterException - if the specified Set is empty (trustAnchors.isEmpty() == true)&quot;_. The method `setTrustAnchors` is called with an empty set. In your stack trace, the line before the line `Caused by: ...` refers where the method is called. Unfortunately, you didn&#39;t show that stack trace line nor the code.","body":"The <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/security/cert/PKIXParameters.html#setTrustAnchors%28java.util.Set%29\" rel=\"nofollow noreferrer\">Javadoc</a> says: <i>&quot;    InvalidAlgorithmParameterException - if the specified Set is empty (trustAnchors.isEmpty() == true)&quot;</i>. The method <code>setTrustAnchors</code> is called with an empty set. In your stack trace, the line before the line <code>Caused by: ...</code> refers where the method is called. Unfortunately, you didn&#39;t show that stack trace line nor the code."}],"answers":[{"comments":[{"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"score":0,"creation_date":1680788602,"post_id":72274546,"comment_id":133959621,"body_markdown":"`cacert` is only the default certificate store. It is akin to using your browser&#39;s root certificate store without requiring one specific provider. That provides a relatively low amount of security; you may want to use a specific root certificate as trust anchor, or possibly even a pinned leaf certificate.","body":"<code>cacert</code> is only the default certificate store. It is akin to using your browser&#39;s root certificate store without requiring one specific provider. That provides a relatively low amount of security; you may want to use a specific root certificate as trust anchor, or possibly even a pinned leaf certificate."}],"tags":[],"owner":{"account_id":9463953,"reputation":1,"user_id":7036935,"display_name":"ParanoidAndroid"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1652792498,"creation_date":1652792498,"answer_id":72274546,"question_id":72216382,"body_markdown":"turns out that spring-boot was using a different version java. It was therefore not finding the cacert file.","title":"What are trustAnchors ? and How do I configure it?","body":"<p>turns out that spring-boot was using a different version java. It was therefore not finding the cacert file.</p>\n"},{"tags":[],"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681204969,"creation_date":1681204969,"answer_id":75984293,"question_id":72216382,"body_markdown":"Trust-anchors is a term that is defined in the X.509 specifications, currently documented in [RFC 5280](https://www.rfc-editor.org/rfc/rfc5280#section-6). In general a trust anchor is simply defined as a certificate at the start of a trust path. For browsers the trust anchors are usually consist of the set of root certificates. In Java this is mimicked by [the standard cacerts](https://stackoverflow.com/questions/11936685/how-to-obtain-the-location-of-cacerts-of-the-default-java-installation) file that is delivered as part of the Java runtime. This file is used by e.g. the SSL/TLS services offered by the Java JSSE provider.\r\n\r\nHowever, it is perfectly possible and quite often advantageous to limit the trust that you extend to certificates. In the most simple case it might be that you don&#39;t want to trust all the root certificates stored in the cacerts file. You may just want to trust a single root certificate, an underlying (intermediate) CA certificate or - in the extreme case - just the certificate used to authenticate a particular server (certificate pinning).\r\n\r\nFor this reason you can offer a set of certificates to a `CertPathValidator` which validates the chain of certificates. This `CertPathValidator` is an abstract class that could handle any kind of certificates. The Java runtime however contains just the single, mandated implementation &quot;PKIX&quot;, which indicates a Public Key Infrastructure consisting of X.509 certificates (the X in the acronym).\r\n\r\nThis `PKIXValidator` service implementation in turn can be configured using [the `PKIXParameters` class](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/security/cert/PKIXParameters.html). This class has constructors and &quot;setters&quot; to indicate the trust anchors. This usually consists of a &quot;trust store&quot;, i.e. a key store containing trusted certificates. The `cacerts` file would be the default trust store used by the `PKIXValidator` used by the JSSE provider.\r\n\r\nAlternatively a `Set` of `TrustAnchor` instances can be provided. A trust anchor usually just consists of a certificate and optional &quot;name constraints&quot;. However, it may also just contain a description of a certificate, such as the name and public key of a certificate. This would e.g. allow you to &quot;pin&quot; a specific public key / name combination while allowing the other party to update their certificate.\r\n\r\nIt goes a bit far to dive deep into the encoding of the name constraints, but in short the DNS names or IP address within the subject field of a particular certificates in a certificate tree may be validated using these. The parameter may be `null` if no particular constrains are required. The procedure to validate the name constrains is of course [also indicated in RFC 5280](https://www.rfc-editor.org/rfc/rfc5280#section-4.2.1.10).\r\n\r\nNote that documentation of (older) Java versions may refer to the now obsolete RFC 3280 instead of RFC 5280.","title":"What are trustAnchors ? and How do I configure it?","body":"<p>Trust-anchors is a term that is defined in the X.509 specifications, currently documented in <a href=\"https://www.rfc-editor.org/rfc/rfc5280#section-6\" rel=\"nofollow noreferrer\">RFC 5280</a>. In general a trust anchor is simply defined as a certificate at the start of a trust path. For browsers the trust anchors are usually consist of the set of root certificates. In Java this is mimicked by <a href=\"https://stackoverflow.com/questions/11936685/how-to-obtain-the-location-of-cacerts-of-the-default-java-installation\">the standard cacerts</a> file that is delivered as part of the Java runtime. This file is used by e.g. the SSL/TLS services offered by the Java JSSE provider.</p>\n<p>However, it is perfectly possible and quite often advantageous to limit the trust that you extend to certificates. In the most simple case it might be that you don't want to trust all the root certificates stored in the cacerts file. You may just want to trust a single root certificate, an underlying (intermediate) CA certificate or - in the extreme case - just the certificate used to authenticate a particular server (certificate pinning).</p>\n<p>For this reason you can offer a set of certificates to a <code>CertPathValidator</code> which validates the chain of certificates. This <code>CertPathValidator</code> is an abstract class that could handle any kind of certificates. The Java runtime however contains just the single, mandated implementation &quot;PKIX&quot;, which indicates a Public Key Infrastructure consisting of X.509 certificates (the X in the acronym).</p>\n<p>This <code>PKIXValidator</code> service implementation in turn can be configured using <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/security/cert/PKIXParameters.html\" rel=\"nofollow noreferrer\">the <code>PKIXParameters</code> class</a>. This class has constructors and &quot;setters&quot; to indicate the trust anchors. This usually consists of a &quot;trust store&quot;, i.e. a key store containing trusted certificates. The <code>cacerts</code> file would be the default trust store used by the <code>PKIXValidator</code> used by the JSSE provider.</p>\n<p>Alternatively a <code>Set</code> of <code>TrustAnchor</code> instances can be provided. A trust anchor usually just consists of a certificate and optional &quot;name constraints&quot;. However, it may also just contain a description of a certificate, such as the name and public key of a certificate. This would e.g. allow you to &quot;pin&quot; a specific public key / name combination while allowing the other party to update their certificate.</p>\n<p>It goes a bit far to dive deep into the encoding of the name constraints, but in short the DNS names or IP address within the subject field of a particular certificates in a certificate tree may be validated using these. The parameter may be <code>null</code> if no particular constrains are required. The procedure to validate the name constrains is of course <a href=\"https://www.rfc-editor.org/rfc/rfc5280#section-4.2.1.10\" rel=\"nofollow noreferrer\">also indicated in RFC 5280</a>.</p>\n<p>Note that documentation of (older) Java versions may refer to the now obsolete RFC 3280 instead of RFC 5280.</p>\n"}],"owner":{"account_id":9463953,"reputation":1,"user_id":7036935,"display_name":"ParanoidAndroid"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":898,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1681204969,"creation_date":1652361654,"question_id":72216382,"body_markdown":"I was recently assigned a java project. I am not very familiar with Java. I have been trying to build the projects but I am having the following error:\r\n\r\n```\r\nthe trustAnchors parameter must be non-empty\r\n\tat java.base/java.security.cert.PKIXParameters.setTrustAnchors(PKIXParameters.java:200)\r\n\tat java.base/java.security.cert.PKIXParameters.&lt;init&gt;(PKIXParameters.java:120)\r\n\tat java.base/java.security.cert.PKIXBuilderParameters.&lt;init&gt;(PKIXBuilderParameters.java:104)\r\n\tat java.base/sun.security.validator.PKIXValidator.&lt;init&gt;(PKIXValidator.java:94)\r\n```\r\n\r\nI am confused on how to set the `trustAnchors` parameter. I am not sure if this is related but I can also only see the keystore certificate when I am an admin as seen in the picture linked below:\r\n\r\n[enter image description here][1]\r\n\r\nThanks\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/9nblV.png","title":"What are trustAnchors ? and How do I configure it?","body":"<p>I was recently assigned a java project. I am not very familiar with Java. I have been trying to build the projects but I am having the following error:</p>\n<pre><code>the trustAnchors parameter must be non-empty\n    at java.base/java.security.cert.PKIXParameters.setTrustAnchors(PKIXParameters.java:200)\n    at java.base/java.security.cert.PKIXParameters.&lt;init&gt;(PKIXParameters.java:120)\n    at java.base/java.security.cert.PKIXBuilderParameters.&lt;init&gt;(PKIXBuilderParameters.java:104)\n    at java.base/sun.security.validator.PKIXValidator.&lt;init&gt;(PKIXValidator.java:94)\n</code></pre>\n<p>I am confused on how to set the <code>trustAnchors</code> parameter. I am not sure if this is related but I can also only see the keystore certificate when I am an admin as seen in the picture linked below:</p>\n<p><a href=\"https://i.stack.imgur.com/9nblV.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>Thanks</p>\n"},{"tags":["java","session","spring-cloud-stream","servicebus"],"owner":{"account_id":28273394,"reputation":1,"user_id":21616247,"display_name":"N&#233;risson"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":105,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681204778,"creation_date":1681204778,"question_id":75984266,"body_markdown":"How can we close (dispose) an Azure Service Bus session through Spring Cloud Stream when all the expected messages have been received ?\r\nI can&#39;t see a bean or a method to call.\r\n\r\nMy producer works fine, I add a &#39;sessionID&#39; header in the message:\r\n\r\n```\r\npublic class MessagesProducer {\r\n  private Sinks.Many&lt;Message&lt;String&gt;&gt; many;\r\n\r\n  public void doSend() {\r\n    Message&lt;String&gt; msg = MessageBuilder //\r\n      .withPayload(&quot;&quot; + messageId) //\r\n      .setHeader(ServiceBusMessageHeaders.SESSION_ID, sessionId) //\r\n      .build();\r\n    many.emitNext(msg, (signalType, emitResult) -&gt; {\r\n      log.error(&quot;Fail #{}: EmitFailureHandler received a &#39;{}&#39; signal: {}&quot;, failedNb, signalType, emitResult);\r\n      return true;\r\n\t\t});\r\n  }\r\n}\r\n```\r\n\r\nMy consumer also works fine:\r\n```\r\npublic class MessagesConsumers {\r\n  @Bean\r\n  public Consumer&lt;Message&lt;String&gt;&gt; consumerFromSubscription2() {\r\n    return message -&gt; {\r\n      final MessageHeaders headers = message.getHeaders();\r\n      final Object sessionID = headers.get(ServiceBusMessageHeaders.SESSION_ID);\r\n      log.info(&quot;Message #{} received from subscription with session &#39;{}&#39;&quot;, message.getPayload(), sessionID);\r\n    };\r\n  }\r\n}\r\n```\r\n\r\nBut I can&#39;t see how to dispose the session ID in the consumer.\r\n\r\nThere is no documentation / sample in the Azure documentation to dispose a session through Spring Cloud Stream","title":"How to close an Azure Service Bus session with Spring Cloud Stream","body":"<p>How can we close (dispose) an Azure Service Bus session through Spring Cloud Stream when all the expected messages have been received ?\nI can't see a bean or a method to call.</p>\n<p>My producer works fine, I add a 'sessionID' header in the message:</p>\n<pre><code>public class MessagesProducer {\n  private Sinks.Many&lt;Message&lt;String&gt;&gt; many;\n\n  public void doSend() {\n    Message&lt;String&gt; msg = MessageBuilder //\n      .withPayload(&quot;&quot; + messageId) //\n      .setHeader(ServiceBusMessageHeaders.SESSION_ID, sessionId) //\n      .build();\n    many.emitNext(msg, (signalType, emitResult) -&gt; {\n      log.error(&quot;Fail #{}: EmitFailureHandler received a '{}' signal: {}&quot;, failedNb, signalType, emitResult);\n      return true;\n        });\n  }\n}\n</code></pre>\n<p>My consumer also works fine:</p>\n<pre><code>public class MessagesConsumers {\n  @Bean\n  public Consumer&lt;Message&lt;String&gt;&gt; consumerFromSubscription2() {\n    return message -&gt; {\n      final MessageHeaders headers = message.getHeaders();\n      final Object sessionID = headers.get(ServiceBusMessageHeaders.SESSION_ID);\n      log.info(&quot;Message #{} received from subscription with session '{}'&quot;, message.getPayload(), sessionID);\n    };\n  }\n}\n</code></pre>\n<p>But I can't see how to dispose the session ID in the consumer.</p>\n<p>There is no documentation / sample in the Azure documentation to dispose a session through Spring Cloud Stream</p>\n"},{"tags":["java","xstream"],"owner":{"account_id":26757645,"reputation":11,"user_id":20356033,"display_name":"Dest511"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":89,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681203779,"creation_date":1681203602,"question_id":75984102,"body_markdown":"I would like to append the ```&lt;![CDATA[]]&gt;``` to XML element by using XSteam. I  have implemented an CDataConverter for my task. However, the result is not as expected which shown ```&amp;gt``` instead  ```&gt;```. Does anyone know what the problem is and how can l solve the problem. Thank you very much.\r\n\r\nActual Result:\r\n```\r\n&lt;item&gt;\r\n  &lt;name&gt;Item Name&lt;/name&gt;\r\n  &lt;description&gt;\r\n    &lt;&gt;&amp;lt;![CDATA[Item Description]]&amp;gt;&lt;/&gt;\r\n  &lt;/description&gt;\r\n&lt;/item&gt;\r\n```\r\n\r\nExpected Result:\r\n```\r\n&lt;item&gt;\r\n  &lt;name&gt;Item Name&lt;/name&gt;\r\n  &lt;description&gt;\r\n    &lt;![CDATA[ Item Description ]]&gt;\r\n  &lt;/description&gt;\r\n&lt;/item&gt;\r\n```\r\n\r\nBelow is the sample code for your erference.\r\n\r\nCDataConverter .java\r\n```\r\nimport com.thoughtworks.xstream.converters.Converter;\r\nimport com.thoughtworks.xstream.converters.MarshallingContext;\r\nimport com.thoughtworks.xstream.converters.UnmarshallingContext;\r\nimport com.thoughtworks.xstream.io.HierarchicalStreamReader;\r\nimport com.thoughtworks.xstream.io.HierarchicalStreamWriter;\r\n\r\npublic class CDataConverter implements Converter {\r\n\r\n    public void marshal(Object value, HierarchicalStreamWriter writer, MarshallingContext context) {\r\n        writer.startNode(&quot;&quot;);\r\n        writer.setValue(&quot;&lt;![CDATA[&quot; + value + &quot;]]&gt;&quot;);\r\n        writer.endNode();\r\n    }\r\n\r\n    public Object unmarshal(HierarchicalStreamReader reader, UnmarshallingContext context) {\r\n        return reader.getValue();\r\n    }\r\n\r\n    public boolean canConvert(Class clazz) {\r\n        return String.class.isAssignableFrom(clazz);\r\n    }\r\n\r\n}\r\n```\r\n\r\n\r\nItem.java\r\n```\r\nimport com.thoughtworks.xstream.XStream;\r\nimport com.thoughtworks.xstream.annotations.XStreamAlias;\r\nimport com.thoughtworks.xstream.annotations.XStreamConverter;\r\n\r\n@XStreamAlias(&quot;item&quot;)\r\npublic class Item {\r\n\r\n    @XStreamAlias(&quot;name&quot;)\r\n    private String name;\r\n\r\n    @XStreamAlias(&quot;description&quot;)\r\n    @XStreamConverter(CDataConverter.class)\r\n    private String description;\r\n\r\n    public Item(String name, String description) {\r\n        this.name = name;\r\n        this.description = description;\r\n    }\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n    public String getDescription() {\r\n        return description;\r\n    }\r\n\r\n}\r\n```\r\n\r\n","title":"How do I use the Converter in XStream to append CDATA in the element","body":"<p>I would like to append the <code>&lt;![CDATA[]]&gt;</code> to XML element by using XSteam. I  have implemented an CDataConverter for my task. However, the result is not as expected which shown <code>&amp;gt</code> instead  <code>&gt;</code>. Does anyone know what the problem is and how can l solve the problem. Thank you very much.</p>\n<p>Actual Result:</p>\n<pre><code>&lt;item&gt;\n  &lt;name&gt;Item Name&lt;/name&gt;\n  &lt;description&gt;\n    &lt;&gt;&amp;lt;![CDATA[Item Description]]&amp;gt;&lt;/&gt;\n  &lt;/description&gt;\n&lt;/item&gt;\n</code></pre>\n<p>Expected Result:</p>\n<pre><code>&lt;item&gt;\n  &lt;name&gt;Item Name&lt;/name&gt;\n  &lt;description&gt;\n    &lt;![CDATA[ Item Description ]]&gt;\n  &lt;/description&gt;\n&lt;/item&gt;\n</code></pre>\n<p>Below is the sample code for your erference.</p>\n<p>CDataConverter .java</p>\n<pre><code>import com.thoughtworks.xstream.converters.Converter;\nimport com.thoughtworks.xstream.converters.MarshallingContext;\nimport com.thoughtworks.xstream.converters.UnmarshallingContext;\nimport com.thoughtworks.xstream.io.HierarchicalStreamReader;\nimport com.thoughtworks.xstream.io.HierarchicalStreamWriter;\n\npublic class CDataConverter implements Converter {\n\n    public void marshal(Object value, HierarchicalStreamWriter writer, MarshallingContext context) {\n        writer.startNode(&quot;&quot;);\n        writer.setValue(&quot;&lt;![CDATA[&quot; + value + &quot;]]&gt;&quot;);\n        writer.endNode();\n    }\n\n    public Object unmarshal(HierarchicalStreamReader reader, UnmarshallingContext context) {\n        return reader.getValue();\n    }\n\n    public boolean canConvert(Class clazz) {\n        return String.class.isAssignableFrom(clazz);\n    }\n\n}\n</code></pre>\n<p>Item.java</p>\n<pre><code>import com.thoughtworks.xstream.XStream;\nimport com.thoughtworks.xstream.annotations.XStreamAlias;\nimport com.thoughtworks.xstream.annotations.XStreamConverter;\n\n@XStreamAlias(&quot;item&quot;)\npublic class Item {\n\n    @XStreamAlias(&quot;name&quot;)\n    private String name;\n\n    @XStreamAlias(&quot;description&quot;)\n    @XStreamConverter(CDataConverter.class)\n    private String description;\n\n    public Item(String name, String description) {\n        this.name = name;\n        this.description = description;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public String getDescription() {\n        return description;\n    }\n\n}\n</code></pre>\n"},{"tags":["java","spring-boot","maven","spring-data-jpa"],"comments":[{"owner":{"account_id":24881693,"reputation":155,"user_id":18754816,"display_name":" "},"score":0,"creation_date":1673677954,"post_id":75116070,"comment_id":132556346,"body_markdown":"Can you share controller and Service, if you have it? And property, please.","body":"Can you share controller and Service, if you have it? And property, please."},{"owner":{"account_id":27505827,"reputation":3,"user_id":20988599,"display_name":"Angelica"},"score":0,"creation_date":1673678813,"post_id":75116070,"comment_id":132556410,"body_markdown":"Added the controller &amp; properties to the original post. I don&#39;t have a Service I don&#39;t think. Thanks!","body":"Added the controller &amp; properties to the original post. I don&#39;t have a Service I don&#39;t think. Thanks!"},{"owner":{"account_id":24881693,"reputation":155,"user_id":18754816,"display_name":" "},"score":0,"creation_date":1673684206,"post_id":75116070,"comment_id":132556844,"body_markdown":"Can you share full version of pom, please. If you have spring lower than 4.3 you need @Autowired.","body":"Can you share full version of pom, please. If you have spring lower than 4.3 you need @Autowired."},{"owner":{"account_id":24881693,"reputation":155,"user_id":18754816,"display_name":" "},"score":0,"creation_date":1673685126,"post_id":75116070,"comment_id":132556928,"body_markdown":"Oh, I see spring boot 3.0","body":"Oh, I see spring boot 3.0"},{"owner":{"account_id":24881693,"reputation":155,"user_id":18754816,"display_name":" "},"score":0,"creation_date":1673686007,"post_id":75116070,"comment_id":132557005,"body_markdown":"I have an idea, may be Group is bad name for class and DB rejects it (this word is reserved for Group by may be). Try to change it.","body":"I have an idea, may be Group is bad name for class and DB rejects it (this word is reserved for Group by may be). Try to change it."},{"owner":{"account_id":26031837,"reputation":54,"user_id":19737948,"display_name":"timofeevle"},"score":0,"creation_date":1673698914,"post_id":75116070,"comment_id":132558823,"body_markdown":"I don&#39;t get why you need all these annotations in `ModernMailApplication`. Annotation `SpringBootApplication` already contains what you need, i suppose everything will work correct if you remove redundant annotations","body":"I don&#39;t get why you need all these annotations in <code>ModernMailApplication</code>. Annotation <code>SpringBootApplication</code> already contains what you need, i suppose everything will work correct if you remove redundant annotations"},{"owner":{"account_id":27505827,"reputation":3,"user_id":20988599,"display_name":"Angelica"},"score":0,"creation_date":1673708613,"post_id":75116070,"comment_id":132560490,"body_markdown":"Hi thank you for your suggestions!\n\n- I tried removing the annotations and just leaving @SpringBootApplication and see the same error (they might still be redundant but it didn&#39;t fix the problem)\n- I tried changing the name of the Entity away from Group, but I still get the same error for the new name.\n- For `javax.persistence.Entity`, I thought spring boot 3.0 requires `jakarta.persistence.*` now (https://spring.io/blog/2022/05/24/preparing-for-spring-boot-3-0) am I misunderstanding?","body":"Hi thank you for your suggestions!  - I tried removing the annotations and just leaving @SpringBootApplication and see the same error (they might still be redundant but it didn&#39;t fix the problem) - I tried changing the name of the Entity away from Group, but I still get the same error for the new name. - For <code>javax.persistence.Entity</code>, I thought spring boot 3.0 requires <code>jakarta.persistence.*</code> now (<a href=\"https://spring.io/blog/2022/05/24/preparing-for-spring-boot-3-0\" rel=\"nofollow noreferrer\">spring.io/blog/2022/05/24/preparing-for-spring-boot-3-0</a>) am I misunderstanding?"},{"owner":{"account_id":24881693,"reputation":155,"user_id":18754816,"display_name":" "},"score":0,"creation_date":1673724758,"post_id":75116070,"comment_id":132563836,"body_markdown":"jakarta is from java 8 and highter","body":"jakarta is from java 8 and highter"},{"owner":{"account_id":24881693,"reputation":155,"user_id":18754816,"display_name":" "},"score":0,"creation_date":1673730784,"post_id":75116070,"comment_id":132564862,"body_markdown":"I&#39;ve made small copy of your project and it works. I delete jakarta.persistence-api, hibernate-core, hibernate-entitymanager why do we need them? Code doesn&#39;t contain hibernate imports, jakarta, it seems, included into boot by default.","body":"I&#39;ve made small copy of your project and it works. I delete jakarta.persistence-api, hibernate-core, hibernate-entitymanager why do we need them? Code doesn&#39;t contain hibernate imports, jakarta, it seems, included into boot by default."},{"owner":{"account_id":24881693,"reputation":155,"user_id":18754816,"display_name":" "},"score":0,"creation_date":1673731183,"post_id":75116070,"comment_id":132564921,"body_markdown":"One more thing, why do you use @RequiredArgsConstructor in entity? Do you Autowire something there? May be I don&#39;t know something about new features, but in my opinion AllArgsConsructor NoArgsConstructor are enough.","body":"One more thing, why do you use @RequiredArgsConstructor in entity? Do you Autowire something there? May be I don&#39;t know something about new features, but in my opinion AllArgsConsructor NoArgsConstructor are enough."},{"owner":{"account_id":27505827,"reputation":3,"user_id":20988599,"display_name":"Angelica"},"score":0,"creation_date":1673797506,"post_id":75116070,"comment_id":132573224,"body_markdown":"Thank you!! @ , deleting some of those annotations worked :)","body":"Thank you!! @ , deleting some of those annotations worked :)"},{"owner":{"account_id":24881693,"reputation":155,"user_id":18754816,"display_name":" "},"score":0,"creation_date":1673812926,"post_id":75116070,"comment_id":132576134,"body_markdown":"I add the answer.","body":"I add the answer."}],"answers":[{"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1673682154,"post_id":75116425,"comment_id":132556676,"body_markdown":"Spring autowires via constructors. I prefer constrcutor injection to field injection, as it makes writing unit tests simpler, makes it easier to see what the dependencies of a component are, and allows you to use `@Configuration` classes more easily.","body":"Spring autowires via constructors. I prefer constrcutor injection to field injection, as it makes writing unit tests simpler, makes it easier to see what the dependencies of a component are, and allows you to use <code>@Configuration</code> classes more easily."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1673682235,"post_id":75116425,"comment_id":132556685,"body_markdown":"This answer also doesn&#39;t attempt to answer the question.","body":"This answer also doesn&#39;t attempt to answer the question."},{"owner":{"account_id":1205529,"reputation":3100,"user_id":1175279,"accept_rate":88,"display_name":"Dilip Raj Baral"},"score":0,"creation_date":1673688640,"post_id":75116425,"comment_id":132557375,"body_markdown":"Constructer injection is preferred over setter and field injection. Refer: https://stackoverflow.com/questions/21218868/explain-why-constructor-inject-is-better-than-other-options","body":"Constructer injection is preferred over setter and field injection. Refer: <a href=\"https://stackoverflow.com/questions/21218868/explain-why-constructor-inject-is-better-than-other-options\" title=\"explain why constructor inject is better than other options\">stackoverflow.com/questions/21218868/&hellip;</a>"}],"tags":[],"owner":{"account_id":9911689,"reputation":303,"user_id":7338170,"display_name":"P.Sanjay"},"comment_count":3,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1673681091,"creation_date":1673681091,"answer_id":75116425,"question_id":75116070,"body_markdown":"One thing i really don&#39;t understand that why are you initizing you bean using construtor? You should autowire your beans and let them manage by spring container. Remove below code from your controller for initializing the repository and use autowire it like beolw.\r\n\r\nRemove it -\r\n\r\n     private GroupRepository groupRepository;\r\n\r\n    public GroupController(GroupRepository groupRepository) {\r\n        this.groupRepository = groupRepository;\r\n    }\r\n\r\nAnd Add it -\r\n\r\n@Autowired\r\n    private GroupRepository groupRepository;","title":"java.lang.IllegalArgumentException: Not a managed type: class com.modernmail.model.Group","body":"<p>One thing i really don't understand that why are you initizing you bean using construtor? You should autowire your beans and let them manage by spring container. Remove below code from your controller for initializing the repository and use autowire it like beolw.</p>\n<p>Remove it -</p>\n<pre><code> private GroupRepository groupRepository;\n\npublic GroupController(GroupRepository groupRepository) {\n    this.groupRepository = groupRepository;\n}\n</code></pre>\n<p>And Add it -</p>\n<p>@Autowired\nprivate GroupRepository groupRepository;</p>\n"},{"tags":[],"owner":{"account_id":24881693,"reputation":155,"user_id":18754816,"display_name":" "},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1673813753,"creation_date":1673812830,"answer_id":75128016,"question_id":75116070,"body_markdown":"You need to remove @RequiredArgsConstructor from entity, AllArgsConsructor NoArgsConstructor are enough.\r\n\r\nDelete jakarta.persistence-api, hibernate-core, hibernate-entitymanager. Code doesn&#39;t contain hibernate imports, jakarta, it seems, included into boot by default.","title":"java.lang.IllegalArgumentException: Not a managed type: class com.modernmail.model.Group","body":"<p>You need to remove @RequiredArgsConstructor from entity, AllArgsConsructor NoArgsConstructor are enough.</p>\n<p>Delete jakarta.persistence-api, hibernate-core, hibernate-entitymanager. Code doesn't contain hibernate imports, jakarta, it seems, included into boot by default.</p>\n"},{"tags":[],"owner":{"account_id":10271083,"reputation":61,"user_id":7579433,"display_name":"Kirill Levitskiy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681203642,"creation_date":1681203642,"answer_id":75984110,"question_id":75116070,"body_markdown":"After migration from SpringBoot 2.x to 3.x I figured out that javax.persistence-api should be replaced with jakarta.persistence-api to solve the issue in my case.\r\n","title":"java.lang.IllegalArgumentException: Not a managed type: class com.modernmail.model.Group","body":"<p>After migration from SpringBoot 2.x to 3.x I figured out that javax.persistence-api should be replaced with jakarta.persistence-api to solve the issue in my case.</p>\n"}],"owner":{"account_id":27505827,"reputation":3,"user_id":20988599,"display_name":"Angelica"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":755,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75128016,"answer_count":3,"score":0,"last_activity_date":1681203642,"creation_date":1673675330,"question_id":75116070,"body_markdown":"I am using Spring Boot 3.0. I think that I have a configuration error wrt my package structure + annotations, but can&#39;t quite figure it out. There are similar questions on here, but I&#39;ve tried so many variations of the solutions and still scratching my head. Thanks in advance for the help!\r\n\r\nThe error I am seeing:\r\n\r\n```\r\norg.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;groupController&#39; defined in URL [jar:file:/workspace/modernmail-0.0.1-SNAPSHOT.jar!/BOOT-INF/classes!/com/modernmail/web/GroupController.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;groupRepository&#39; defined in com.modernmail.model.GroupRepository defined in @EnableJpaRepositories declared on ModernMailApplication: Invocation of init method failed; nested exception is java.lang.IllegalArgumentException: Not a managed type: class com.modernmail.model.Group\r\n```\r\n\r\nMy application:\r\n```\r\npackage com.modernmail;\r\n\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\nimport org.springframework.boot.autoconfigure.domain.EntityScan;\r\nimport org.springframework.context.annotation.ComponentScan;\r\nimport org.springframework.data.jpa.repository.config.EnableJpaRepositories;\r\n\r\n@ComponentScan(basePackages = {&quot;com.modernmail&quot;, &quot;com.modernmail.model&quot;})\r\n@EntityScan(basePackages = {&quot;com.modernmail&quot;, &quot;com.modernmail.model&quot;})\r\n@EnableJpaRepositories(&quot;com.modernmail.model&quot;)\r\n@SpringBootApplication\r\npublic class ModernMailApplication {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(ModernMailApplication.class, args);\r\n\t}\r\n\r\n}\r\n```\r\n\r\nMy initializer Component:\r\n```\r\npackage com.modernmail;\r\n\r\nimport com.modernmail.model.Event;\r\nimport com.modernmail.model.Group;\r\nimport com.modernmail.model.GroupRepository;\r\nimport org.springframework.boot.CommandLineRunner;\r\nimport org.springframework.stereotype.Component;\r\n\r\nimport java.time.Instant;\r\nimport java.util.Collections;\r\nimport java.util.stream.Stream;\r\n\r\n@Component\r\nclass Initializer implements CommandLineRunner {\r\n\r\n    private final GroupRepository repository;\r\n\r\n    public Initializer(GroupRepository repository) {\r\n        this.repository = repository;\r\n    }\r\n    ...\r\n```\r\n\r\nMy repository:\r\n```\r\npackage com.modernmail.model;\r\n\r\nimport org.springframework.data.jpa.repository.JpaRepository;\r\n\r\nimport java.util.List;\r\n\r\npublic interface GroupRepository extends JpaRepository&lt;Group, Long&gt; {\r\n    Group findByName(String name);\r\n}\r\n```\r\n\r\nMy entity:\r\n```\r\npackage com.modernmail.model;\r\n\r\nimport lombok.Data;\r\nimport lombok.NoArgsConstructor;\r\nimport lombok.NonNull;\r\nimport lombok.RequiredArgsConstructor;\r\n\r\nimport jakarta.persistence.*;\r\nimport java.util.Set;\r\n\r\n@Data\r\n@NoArgsConstructor\r\n@RequiredArgsConstructor\r\n@Entity\r\n@Table(name = &quot;user_group&quot;)\r\npublic class Group {\r\n\r\n    @Id\r\n    @GeneratedValue\r\n    private Long id;\r\n    @NonNull\r\n    private String name;\r\n    private String address;\r\n    private String city;\r\n    private String stateOrProvince;\r\n    private String country;\r\n    private String postalCode;\r\n    @ManyToOne(cascade=CascadeType.PERSIST)\r\n    private User user;\r\n\r\n    @OneToMany(fetch = FetchType.EAGER, cascade=CascadeType.ALL)\r\n    private Set&lt;Event&gt; events;\r\n}\r\n```\r\n\r\nMy controller:\r\n```\r\npackage com.modernmail.web;\r\n\r\nimport com.modernmail.model.Group;\r\nimport com.modernmail.model.GroupRepository;\r\nimport org.slf4j.Logger;\r\nimport org.slf4j.LoggerFactory;\r\nimport org.springframework.http.HttpStatus;\r\nimport org.springframework.http.ResponseEntity;\r\nimport org.springframework.web.bind.annotation.*;\r\n\r\nimport jakarta.validation.Valid;\r\nimport java.net.URI;\r\nimport java.net.URISyntaxException;\r\nimport java.util.Collection;\r\nimport java.util.Optional;\r\n\r\n@RestController\r\n@RequestMapping(&quot;/api&quot;)\r\nclass GroupController {\r\n\r\n    private final Logger log = LoggerFactory.getLogger(GroupController.class);\r\n    private GroupRepository groupRepository;\r\n\r\n    public GroupController(GroupRepository groupRepository) {\r\n        this.groupRepository = groupRepository;\r\n    }\r\n\r\n    @GetMapping(&quot;/groups&quot;)\r\n    Collection&lt;Group&gt; groups() {\r\n        return groupRepository.findAll();\r\n    }\r\n\r\n    @GetMapping(&quot;/group/{id}&quot;)\r\n    ResponseEntity&lt;?&gt; getGroup(@PathVariable Long id) {\r\n        Optional&lt;Group&gt; group = groupRepository.findById(id);\r\n        return group.map(response -&gt; ResponseEntity.ok().body(response))\r\n                .orElse(new ResponseEntity&lt;&gt;(HttpStatus.NOT_FOUND));\r\n    }\r\n\r\n    @PostMapping(&quot;/group&quot;)\r\n    ResponseEntity&lt;Group&gt; createGroup(@Valid @RequestBody Group group) throws URISyntaxException {\r\n        log.info(&quot;Request to create group: {}&quot;, group);\r\n        Group result = groupRepository.save(group);\r\n        return ResponseEntity.created(new URI(&quot;/api/group/&quot; + result.getId()))\r\n                .body(result);\r\n    }\r\n\r\n    @PutMapping(&quot;/group/{id}&quot;)\r\n    ResponseEntity&lt;Group&gt; updateGroup(@Valid @RequestBody Group group) {\r\n        log.info(&quot;Request to update group: {}&quot;, group);\r\n        Group result = groupRepository.save(group);\r\n        return ResponseEntity.ok().body(result);\r\n    }\r\n\r\n    @DeleteMapping(&quot;/group/{id}&quot;)\r\n    public ResponseEntity&lt;?&gt; deleteGroup(@PathVariable Long id) {\r\n        log.info(&quot;Request to delete group: {}&quot;, id);\r\n        groupRepository.deleteById(id);\r\n        return ResponseEntity.ok().build();\r\n    }\r\n}\r\n```\r\n\r\nMy pom.xml (commented out items are things I&#39;ve tried that also didn&#39;t work):\r\n```\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;jakarta.persistence&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jakarta.persistence-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.1.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n&lt;!--\t\t&lt;dependency&gt;--&gt;\r\n&lt;!--\t\t\t&lt;groupId&gt;org.hibernate&lt;/groupId&gt;--&gt;\r\n&lt;!--\t\t\t&lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;--&gt;\r\n&lt;!--\t\t&lt;/dependency&gt;--&gt;\r\n&lt;!--\t\t&lt;dependency&gt;--&gt;\r\n&lt;!--\t\t\t&lt;groupId&gt;org.hibernate.javax.persistence&lt;/groupId&gt;--&gt;\r\n&lt;!--\t\t\t&lt;artifactId&gt;hibernate-jpa-2.1-api&lt;/artifactId&gt;--&gt;\r\n&lt;!--\t\t\t&lt;version&gt;1.0.0.Final&lt;/version&gt;--&gt;\r\n&lt;!--\t\t&lt;/dependency&gt;--&gt;\r\n&lt;!--\t\t&lt;dependency&gt;--&gt;\r\n&lt;!--\t\t\t&lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;--&gt;\r\n&lt;!--\t\t\t&lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;--&gt;\r\n&lt;!--\t\t\t&lt;version&gt;2.3.0&lt;/version&gt;--&gt;\r\n&lt;!--\t\t&lt;/dependency&gt;--&gt;\r\n```","title":"java.lang.IllegalArgumentException: Not a managed type: class com.modernmail.model.Group","body":"<p>I am using Spring Boot 3.0. I think that I have a configuration error wrt my package structure + annotations, but can't quite figure it out. There are similar questions on here, but I've tried so many variations of the solutions and still scratching my head. Thanks in advance for the help!</p>\n<p>The error I am seeing:</p>\n<pre><code>org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'groupController' defined in URL [jar:file:/workspace/modernmail-0.0.1-SNAPSHOT.jar!/BOOT-INF/classes!/com/modernmail/web/GroupController.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'groupRepository' defined in com.modernmail.model.GroupRepository defined in @EnableJpaRepositories declared on ModernMailApplication: Invocation of init method failed; nested exception is java.lang.IllegalArgumentException: Not a managed type: class com.modernmail.model.Group\n</code></pre>\n<p>My application:</p>\n<pre><code>package com.modernmail;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.boot.autoconfigure.domain.EntityScan;\nimport org.springframework.context.annotation.ComponentScan;\nimport org.springframework.data.jpa.repository.config.EnableJpaRepositories;\n\n@ComponentScan(basePackages = {&quot;com.modernmail&quot;, &quot;com.modernmail.model&quot;})\n@EntityScan(basePackages = {&quot;com.modernmail&quot;, &quot;com.modernmail.model&quot;})\n@EnableJpaRepositories(&quot;com.modernmail.model&quot;)\n@SpringBootApplication\npublic class ModernMailApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(ModernMailApplication.class, args);\n    }\n\n}\n</code></pre>\n<p>My initializer Component:</p>\n<pre><code>package com.modernmail;\n\nimport com.modernmail.model.Event;\nimport com.modernmail.model.Group;\nimport com.modernmail.model.GroupRepository;\nimport org.springframework.boot.CommandLineRunner;\nimport org.springframework.stereotype.Component;\n\nimport java.time.Instant;\nimport java.util.Collections;\nimport java.util.stream.Stream;\n\n@Component\nclass Initializer implements CommandLineRunner {\n\n    private final GroupRepository repository;\n\n    public Initializer(GroupRepository repository) {\n        this.repository = repository;\n    }\n    ...\n</code></pre>\n<p>My repository:</p>\n<pre><code>package com.modernmail.model;\n\nimport org.springframework.data.jpa.repository.JpaRepository;\n\nimport java.util.List;\n\npublic interface GroupRepository extends JpaRepository&lt;Group, Long&gt; {\n    Group findByName(String name);\n}\n</code></pre>\n<p>My entity:</p>\n<pre><code>package com.modernmail.model;\n\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\nimport lombok.NonNull;\nimport lombok.RequiredArgsConstructor;\n\nimport jakarta.persistence.*;\nimport java.util.Set;\n\n@Data\n@NoArgsConstructor\n@RequiredArgsConstructor\n@Entity\n@Table(name = &quot;user_group&quot;)\npublic class Group {\n\n    @Id\n    @GeneratedValue\n    private Long id;\n    @NonNull\n    private String name;\n    private String address;\n    private String city;\n    private String stateOrProvince;\n    private String country;\n    private String postalCode;\n    @ManyToOne(cascade=CascadeType.PERSIST)\n    private User user;\n\n    @OneToMany(fetch = FetchType.EAGER, cascade=CascadeType.ALL)\n    private Set&lt;Event&gt; events;\n}\n</code></pre>\n<p>My controller:</p>\n<pre><code>package com.modernmail.web;\n\nimport com.modernmail.model.Group;\nimport com.modernmail.model.GroupRepository;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.*;\n\nimport jakarta.validation.Valid;\nimport java.net.URI;\nimport java.net.URISyntaxException;\nimport java.util.Collection;\nimport java.util.Optional;\n\n@RestController\n@RequestMapping(&quot;/api&quot;)\nclass GroupController {\n\n    private final Logger log = LoggerFactory.getLogger(GroupController.class);\n    private GroupRepository groupRepository;\n\n    public GroupController(GroupRepository groupRepository) {\n        this.groupRepository = groupRepository;\n    }\n\n    @GetMapping(&quot;/groups&quot;)\n    Collection&lt;Group&gt; groups() {\n        return groupRepository.findAll();\n    }\n\n    @GetMapping(&quot;/group/{id}&quot;)\n    ResponseEntity&lt;?&gt; getGroup(@PathVariable Long id) {\n        Optional&lt;Group&gt; group = groupRepository.findById(id);\n        return group.map(response -&gt; ResponseEntity.ok().body(response))\n                .orElse(new ResponseEntity&lt;&gt;(HttpStatus.NOT_FOUND));\n    }\n\n    @PostMapping(&quot;/group&quot;)\n    ResponseEntity&lt;Group&gt; createGroup(@Valid @RequestBody Group group) throws URISyntaxException {\n        log.info(&quot;Request to create group: {}&quot;, group);\n        Group result = groupRepository.save(group);\n        return ResponseEntity.created(new URI(&quot;/api/group/&quot; + result.getId()))\n                .body(result);\n    }\n\n    @PutMapping(&quot;/group/{id}&quot;)\n    ResponseEntity&lt;Group&gt; updateGroup(@Valid @RequestBody Group group) {\n        log.info(&quot;Request to update group: {}&quot;, group);\n        Group result = groupRepository.save(group);\n        return ResponseEntity.ok().body(result);\n    }\n\n    @DeleteMapping(&quot;/group/{id}&quot;)\n    public ResponseEntity&lt;?&gt; deleteGroup(@PathVariable Long id) {\n        log.info(&quot;Request to delete group: {}&quot;, id);\n        groupRepository.deleteById(id);\n        return ResponseEntity.ok().build();\n    }\n}\n</code></pre>\n<p>My pom.xml (commented out items are things I've tried that also didn't work):</p>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;jakarta.persistence&lt;/groupId&gt;\n            &lt;artifactId&gt;jakarta.persistence-api&lt;/artifactId&gt;\n            &lt;version&gt;3.1.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n&lt;!--        &lt;dependency&gt;--&gt;\n&lt;!--            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;--&gt;\n&lt;!--            &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;--&gt;\n&lt;!--        &lt;/dependency&gt;--&gt;\n&lt;!--        &lt;dependency&gt;--&gt;\n&lt;!--            &lt;groupId&gt;org.hibernate.javax.persistence&lt;/groupId&gt;--&gt;\n&lt;!--            &lt;artifactId&gt;hibernate-jpa-2.1-api&lt;/artifactId&gt;--&gt;\n&lt;!--            &lt;version&gt;1.0.0.Final&lt;/version&gt;--&gt;\n&lt;!--        &lt;/dependency&gt;--&gt;\n&lt;!--        &lt;dependency&gt;--&gt;\n&lt;!--            &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;--&gt;\n&lt;!--            &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;--&gt;\n&lt;!--            &lt;version&gt;2.3.0&lt;/version&gt;--&gt;\n&lt;!--        &lt;/dependency&gt;--&gt;\n</code></pre>\n"},{"tags":["java","spring","spring-boot","attributes","converters"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1681195020,"post_id":75982900,"comment_id":134012835,"body_markdown":"THe query validation failed, not sure why you think it has something to do with your attribute converter. Did you use the proper `@Query` and not that it falls back to the name of the method? ALso please provide the **full stacktrace** not just a small snippet.","body":"THe query validation failed, not sure why you think it has something to do with your attribute converter. Did you use the proper <code>@Query</code> and not that it falls back to the name of the method? ALso please provide the <b>full stacktrace</b> not just a small snippet."},{"owner":{"account_id":28175707,"reputation":5,"user_id":21533509,"display_name":"Mohan"},"score":0,"creation_date":1681203237,"post_id":75982900,"comment_id":134014497,"body_markdown":"The method is part of the existing application (w/o data encryption functionality), and it is working fine. The method throws an exception when I include the convert annotation on the fields, firstName, and lastName of the User Entity. The stack trace is very large but I&#39;ve added detailed error messages, please check. Thank You!","body":"The method is part of the existing application (w/o data encryption functionality), and it is working fine. The method throws an exception when I include the convert annotation on the fields, firstName, and lastName of the User Entity. The stack trace is very large but I&#39;ve added detailed error messages, please check. Thank You!"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1681204280,"post_id":75982900,"comment_id":134014758,"body_markdown":"THe problem is your converter. It is for an `Object,String` (in the generic types). So in the end you end up with an `Object` and not a `String`. Hence it doesn&#39;t find the constructor in your DTO. Change your attribute converter to `String,String` instead of `Object,String` or change your DTO constructor and cast to a `String` in there.","body":"THe problem is your converter. It is for an <code>Object,String</code> (in the generic types). So in the end you end up with an <code>Object</code> and not a <code>String</code>. Hence it doesn&#39;t find the constructor in your DTO. Change your attribute converter to <code>String,String</code> instead of <code>Object,String</code> or change your DTO constructor and cast to a <code>String</code> in there."},{"owner":{"account_id":28175707,"reputation":5,"user_id":21533509,"display_name":"Mohan"},"score":0,"creation_date":1681205741,"post_id":75982900,"comment_id":134015072,"body_markdown":"Oh, I got it. Thank You so much!\nI created a constructor in the projection model for object type and cast the values to String and it worked. \nI have a question though. When we use convert  on a field of any type, this conversion happens automatically right from Object type to type of the field where convert annotation is used. Does this work differently if we define a DTO to get the same values? So now, will I have to always cast it in case of projection models when getting values from the database?","body":"Oh, I got it. Thank You so much! I created a constructor in the projection model for object type and cast the values to String and it worked.  I have a question though. When we use convert  on a field of any type, this conversion happens automatically right from Object type to type of the field where convert annotation is used. Does this work differently if we define a DTO to get the same values? So now, will I have to always cast it in case of projection models when getting values from the database?"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1681207335,"post_id":75982900,"comment_id":134015495,"body_markdown":"The problem is your convert is converting from an Object to a String, when executing the query and mapping the result it will see the Object and not the String as a type (due to your converter).","body":"The problem is your convert is converting from an Object to a String, when executing the query and mapping the result it will see the Object and not the String as a type (due to your converter)."},{"owner":{"account_id":28175707,"reputation":5,"user_id":21533509,"display_name":"Mohan"},"score":0,"creation_date":1681211376,"post_id":75982900,"comment_id":134016419,"body_markdown":"Got it. I&#39;d really appreciate it if you can also look into a related question to this: https://stackoverflow.com/questions/75976164/how-to-view-decrypted-results-in-postgresql-db-when-using-a-attribute-converter \n\nIn this question, I&#39;m trying to view the encrypted columns using a select query in Postgres decrypting it with the PGP_SYM_DECRYPT method.\n\nThank you so much for your help!!","body":"Got it. I&#39;d really appreciate it if you can also look into a related question to this: <a href=\"https://stackoverflow.com/questions/75976164/how-to-view-decrypted-results-in-postgresql-db-when-using-a-attribute-converter\" title=\"how to view decrypted results in postgresql db when using a attribute converter\">stackoverflow.com/questions/75976164/&hellip;</a>   In this question, I&#39;m trying to view the encrypted columns using a select query in Postgres decrypting it with the PGP_SYM_DECRYPT method.  Thank you so much for your help!!"}],"owner":{"account_id":28175707,"reputation":5,"user_id":21533509,"display_name":"Mohan"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":470,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681203172,"creation_date":1681193927,"question_id":75982900,"body_markdown":"I have implemented a custom AttributeConverter class in my Spring Boot application that encrypts and decrypts certain fields of my entities when inserting the data into the database and retrieving the data. The converter works fine when I use it with JPA repository methods. However, when I use it in a join query, I get an error saying &quot;Validation failed for query for method.&quot; Here&#39;s my converter class: \r\n\r\n```\r\n@Converter\r\npublic class DataEncryptionConverter implements AttributeConverter&lt;Object, String&gt; {\r\n\r\n    @Value(&quot;${encryption.key}&quot;)\r\n    private String encryptionKey;\r\n\r\n    private final String encryptionCipher = &quot;AES&quot;;\r\n\r\n    private Key key;\r\n    private Cipher cipher;\r\n\r\n    private Key getKey(){\r\n        if(key == null){\r\n            key = new SecretKeySpec(encryptionKey.getBytes(), encryptionCipher);\r\n        }\r\n        return key;\r\n    }\r\n\r\n    private Cipher getCipher() throws GeneralSecurityException {\r\n        if(cipher == null){\r\n            cipher = Cipher.getInstance(encryptionCipher);\r\n        }\r\n        return cipher;\r\n    }\r\n\r\n\r\n    private void initCipher(int encryptMode) throws GeneralSecurityException{\r\n        getCipher().init(encryptMode, getKey());\r\n    }\r\n\r\n    @SneakyThrows\r\n    @Override\r\n    public String convertToDatabaseColumn(Object attribute) {\r\n        if (attribute == null) {\r\n            return null;\r\n        }\r\n        initCipher(Cipher.ENCRYPT_MODE);\r\n        byte[] bytes = SerializationUtils.serialize(attribute);\r\n        return Base64.getEncoder().encodeToString(getCipher().doFinal(bytes));\r\n    }\r\n\r\n    @SneakyThrows\r\n    @Override\r\n    public Object convertToEntityAttribute(String dbData) {\r\n        if (dbData == null) {\r\n            return null;\r\n        }\r\n        initCipher(Cipher.DECRYPT_MODE);\r\n        byte[] bytes = getCipher().doFinal(Base64.getDecoder().decode(dbData));\r\n        return SerializationUtils.deserialize(bytes);\r\n    }\r\n}\r\n```\r\n\r\nSuppose I have a User class. It works fine if I&#39;m using JPA repository method like \r\n\r\nUser findByFirstNameAndLastName(String firstName, String lastName);\r\n\r\n```\r\npublic class User{\r\n\r\n// other fields\r\n\r\n@Column(name = &quot;first_name&quot;)\r\n\t@Convert(converter = DataEncryptionConverter.class)\r\n\tprivate String firstName;\r\n\r\n\t@Column(name = &quot;last_name&quot;)\r\n\t@Convert(converter = DataEncryptionConverter.class)\r\n\tprivate String lastName;\r\n}\r\n```\r\n\r\n\r\nIt doesn&#39;t work when I&#39;m using join to retrieve result. \r\n\r\n```\r\npublic class UserAccount{\r\n\r\n// other fields\r\n\r\n@ManyToOne(optional = false)\r\n@JoinColumn(name = &quot;user_id&quot;, referencedColumnName = &quot;user_id&quot;)\r\nprivate User fkUserId;\r\n\r\n}\r\n\r\n\r\n@Query(&quot;select new EmailFirstLastAccountId(a.email, a.accountId, u.firstName, u.lastName ) from UserAccount a inner join a.fkUserId u where a.orgId=:orgId&quot;)\r\n\tList&lt;EmailFirstLastAccountId&gt; getEmailAccountIdFirstAndLastNameByOrgId(Long orgId);\r\n\r\n```\r\n\r\nIn this case, the converter is not getting applied. I get the following exceptions:\r\n\r\n```\r\nException in thread &quot;main&quot; org.springframework.context.ApplicationContextException: Unable to start web server; nested exception is org.springframework.boot.web.server.WebServerException: Unable to start embedded Tomcat\r\n\r\nCaused by: org.springframework.boot.web.server.WebServerException: Unable to start embedded Tomcat\r\n\r\nCaused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;jwtRequestFilter&#39;: Unsatisfied dependency expressed through field &#39;jwtUtil&#39;; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;JWTUtil&#39;: Unsatisfied dependency expressed through field &#39;userService&#39;; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;userService&#39;: Unsatisfied dependency expressed through field &#39;userRepository&#39;; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;userRepository&#39; defined in com.tse.UserRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Invocation of init method failed; nested exception is java.lang.IllegalArgumentException: Validation failed for query for method public abstract java.util.List com.tse.UserRepository.getEmailAccountIdFirstAndLastNameByOrgId(java.lang.Long)!\r\n\r\nCaused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;JWTUtil&#39;: Unsatisfied dependency expressed through field &#39;userService&#39;; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;userService&#39;: Unsatisfied dependency expressed through field &#39;userRepository&#39;; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;userRepository&#39; defined in com.tse.UserRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Invocation of init method failed; nested exception is java.lang.IllegalArgumentException: Validation failed for query for method public abstract java.util.List com.tse.UserRepository.getEmailAccountIdFirstAndLastNameByOrgId(java.lang.Long)!\r\n\r\nCaused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;userService&#39;: Unsatisfied dependency expressed through field &#39;userRepository&#39;; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;userRepository&#39; defined in com.tse.UserRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Invocation of init method failed; nested exception is java.lang.IllegalArgumentException: Validation failed for query for method public abstract java.util.List com.tse.UserRepository.getEmailAccountIdFirstAndLastNameByOrgId(java.lang.Long)!\r\n\r\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;userRepository&#39; defined in com.tse.UserRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Invocation of init method failed; nested exception is java.lang.IllegalArgumentException: Validation failed for query for method public abstract java.util.List com.tse.UserRepository.getEmailAccountIdFirstAndLastNameByOrgId(java.lang.Long)!\r\n\r\nCaused by: java.lang.IllegalArgumentException: Validation failed for query for method public abstract java.util.List com.tse.UserRepository.getEmailAccountIdFirstAndLastNameByOrgId(java.lang.Long)!\r\n\r\nCaused by: java.lang.IllegalArgumentException: org.hibernate.hql.internal.ast.QuerySyntaxException: Unable to locate appropriate constructor on class [com.tse.core_application.custom.model.EmailFirstLastAccountId]. Expected arguments are: java.lang.String, long, java.lang.Object, java.lang.Object [select new com.tse.EmailFirstLastAccountId(a.email, a.accountId, u.firstName, u.lastName ) from com.tse.UserAccount a inner join a.fkUserId u where a.orgId=:orgId]\r\n\r\nCaused by: org.hibernate.hql.internal.ast.QuerySyntaxException: Unable to locate appropriate constructor on class [com.tse.EmailFirstLastAccountId]. Expected arguments are: java.lang.String, long, java.lang.Object, java.lang.Object [select new com.tse.EmailFirstLastAccountId(a.email, a.accountId, u.firstName, u.lastName ) from com.tse.UserAccount a inner join a.fkUserId u where a.orgId=:orgId]\r\n\r\n```\r\n\r\n\r\nWhat could be the issue, and how can I resolve it? ","title":"How to use a custom AttributeConverter in a Spring Boot join query?","body":"<p>I have implemented a custom AttributeConverter class in my Spring Boot application that encrypts and decrypts certain fields of my entities when inserting the data into the database and retrieving the data. The converter works fine when I use it with JPA repository methods. However, when I use it in a join query, I get an error saying &quot;Validation failed for query for method.&quot; Here's my converter class:</p>\n<pre><code>@Converter\npublic class DataEncryptionConverter implements AttributeConverter&lt;Object, String&gt; {\n\n    @Value(&quot;${encryption.key}&quot;)\n    private String encryptionKey;\n\n    private final String encryptionCipher = &quot;AES&quot;;\n\n    private Key key;\n    private Cipher cipher;\n\n    private Key getKey(){\n        if(key == null){\n            key = new SecretKeySpec(encryptionKey.getBytes(), encryptionCipher);\n        }\n        return key;\n    }\n\n    private Cipher getCipher() throws GeneralSecurityException {\n        if(cipher == null){\n            cipher = Cipher.getInstance(encryptionCipher);\n        }\n        return cipher;\n    }\n\n\n    private void initCipher(int encryptMode) throws GeneralSecurityException{\n        getCipher().init(encryptMode, getKey());\n    }\n\n    @SneakyThrows\n    @Override\n    public String convertToDatabaseColumn(Object attribute) {\n        if (attribute == null) {\n            return null;\n        }\n        initCipher(Cipher.ENCRYPT_MODE);\n        byte[] bytes = SerializationUtils.serialize(attribute);\n        return Base64.getEncoder().encodeToString(getCipher().doFinal(bytes));\n    }\n\n    @SneakyThrows\n    @Override\n    public Object convertToEntityAttribute(String dbData) {\n        if (dbData == null) {\n            return null;\n        }\n        initCipher(Cipher.DECRYPT_MODE);\n        byte[] bytes = getCipher().doFinal(Base64.getDecoder().decode(dbData));\n        return SerializationUtils.deserialize(bytes);\n    }\n}\n</code></pre>\n<p>Suppose I have a User class. It works fine if I'm using JPA repository method like</p>\n<p>User findByFirstNameAndLastName(String firstName, String lastName);</p>\n<pre><code>public class User{\n\n// other fields\n\n@Column(name = &quot;first_name&quot;)\n    @Convert(converter = DataEncryptionConverter.class)\n    private String firstName;\n\n    @Column(name = &quot;last_name&quot;)\n    @Convert(converter = DataEncryptionConverter.class)\n    private String lastName;\n}\n</code></pre>\n<p>It doesn't work when I'm using join to retrieve result.</p>\n<pre><code>public class UserAccount{\n\n// other fields\n\n@ManyToOne(optional = false)\n@JoinColumn(name = &quot;user_id&quot;, referencedColumnName = &quot;user_id&quot;)\nprivate User fkUserId;\n\n}\n\n\n@Query(&quot;select new EmailFirstLastAccountId(a.email, a.accountId, u.firstName, u.lastName ) from UserAccount a inner join a.fkUserId u where a.orgId=:orgId&quot;)\n    List&lt;EmailFirstLastAccountId&gt; getEmailAccountIdFirstAndLastNameByOrgId(Long orgId);\n\n</code></pre>\n<p>In this case, the converter is not getting applied. I get the following exceptions:</p>\n<pre><code>Exception in thread &quot;main&quot; org.springframework.context.ApplicationContextException: Unable to start web server; nested exception is org.springframework.boot.web.server.WebServerException: Unable to start embedded Tomcat\n\nCaused by: org.springframework.boot.web.server.WebServerException: Unable to start embedded Tomcat\n\nCaused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'jwtRequestFilter': Unsatisfied dependency expressed through field 'jwtUtil'; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'JWTUtil': Unsatisfied dependency expressed through field 'userService'; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'userService': Unsatisfied dependency expressed through field 'userRepository'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userRepository' defined in com.tse.UserRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Invocation of init method failed; nested exception is java.lang.IllegalArgumentException: Validation failed for query for method public abstract java.util.List com.tse.UserRepository.getEmailAccountIdFirstAndLastNameByOrgId(java.lang.Long)!\n\nCaused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'JWTUtil': Unsatisfied dependency expressed through field 'userService'; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'userService': Unsatisfied dependency expressed through field 'userRepository'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userRepository' defined in com.tse.UserRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Invocation of init method failed; nested exception is java.lang.IllegalArgumentException: Validation failed for query for method public abstract java.util.List com.tse.UserRepository.getEmailAccountIdFirstAndLastNameByOrgId(java.lang.Long)!\n\nCaused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'userService': Unsatisfied dependency expressed through field 'userRepository'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userRepository' defined in com.tse.UserRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Invocation of init method failed; nested exception is java.lang.IllegalArgumentException: Validation failed for query for method public abstract java.util.List com.tse.UserRepository.getEmailAccountIdFirstAndLastNameByOrgId(java.lang.Long)!\n\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userRepository' defined in com.tse.UserRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Invocation of init method failed; nested exception is java.lang.IllegalArgumentException: Validation failed for query for method public abstract java.util.List com.tse.UserRepository.getEmailAccountIdFirstAndLastNameByOrgId(java.lang.Long)!\n\nCaused by: java.lang.IllegalArgumentException: Validation failed for query for method public abstract java.util.List com.tse.UserRepository.getEmailAccountIdFirstAndLastNameByOrgId(java.lang.Long)!\n\nCaused by: java.lang.IllegalArgumentException: org.hibernate.hql.internal.ast.QuerySyntaxException: Unable to locate appropriate constructor on class [com.tse.core_application.custom.model.EmailFirstLastAccountId]. Expected arguments are: java.lang.String, long, java.lang.Object, java.lang.Object [select new com.tse.EmailFirstLastAccountId(a.email, a.accountId, u.firstName, u.lastName ) from com.tse.UserAccount a inner join a.fkUserId u where a.orgId=:orgId]\n\nCaused by: org.hibernate.hql.internal.ast.QuerySyntaxException: Unable to locate appropriate constructor on class [com.tse.EmailFirstLastAccountId]. Expected arguments are: java.lang.String, long, java.lang.Object, java.lang.Object [select new com.tse.EmailFirstLastAccountId(a.email, a.accountId, u.firstName, u.lastName ) from com.tse.UserAccount a inner join a.fkUserId u where a.orgId=:orgId]\n\n</code></pre>\n<p>What could be the issue, and how can I resolve it?</p>\n"},{"tags":["java","arraylist","hashmap"],"comments":[{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1681159610,"post_id":75980513,"comment_id":134008844,"body_markdown":"so what you effectively need is a mapping from `EntityA` to `BeanA`, and the puzzling part is the creation of the map in `BeanA`?","body":"so what you effectively need is a mapping from <code>EntityA</code> to <code>BeanA</code>, and the puzzling part is the creation of the map in <code>BeanA</code>?"},{"owner":{"account_id":1153647,"reputation":463,"user_id":1134835,"accept_rate":40,"display_name":"Mohit224"},"score":0,"creation_date":1681159705,"post_id":75980513,"comment_id":134008865,"body_markdown":"yes, I first create the map from EntityA and then I have to set the map to BeanA. Creating the map is easy where I can iterate over EntityA object and do it but then each map needs to be set to BeanA object which is another List","body":"yes, I first create the map from EntityA and then I have to set the map to BeanA. Creating the map is easy where I can iterate over EntityA object and do it but then each map needs to be set to BeanA object which is another List"}],"answers":[{"tags":[],"owner":{"account_id":14587108,"reputation":155,"user_id":10535520,"display_name":"Stone"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681166765,"creation_date":1681166765,"answer_id":75981269,"question_id":75980513,"body_markdown":"I assume you associate EntityA and BeanA by the field &quot;name&quot;. When you iterate   EntityA List, you could record &quot;name&quot; and &quot;beanMap&quot; by another map. Then enrich BeanA in another loop. Sample code something like below. Hope it helps.\r\n\r\n```\r\n        Map&lt;String, Map&lt;String, Object&gt;&gt; map = new HashMap&lt;&gt;();\r\n        for (EntityA a : entityAs) {\r\n            Map&lt;String, Object&gt; beanObject = new HashMap&lt;&gt;();\r\n            beanObject.put(&quot;custom_column&quot;, a.getCustom_column());\r\n            map.put(a.getName(), beanObject);\r\n        }\r\n\r\n        for(BeanA beanA : beanAs) {\r\n            beanA.setBeanMap(map.get(beanA.getName()));\r\n        }\r\n```","title":"Set a Map attribute from one collection object to the other collection object in java","body":"<p>I assume you associate EntityA and BeanA by the field &quot;name&quot;. When you iterate   EntityA List, you could record &quot;name&quot; and &quot;beanMap&quot; by another map. Then enrich BeanA in another loop. Sample code something like below. Hope it helps.</p>\n<pre><code>        Map&lt;String, Map&lt;String, Object&gt;&gt; map = new HashMap&lt;&gt;();\n        for (EntityA a : entityAs) {\n            Map&lt;String, Object&gt; beanObject = new HashMap&lt;&gt;();\n            beanObject.put(&quot;custom_column&quot;, a.getCustom_column());\n            map.put(a.getName(), beanObject);\n        }\n\n        for(BeanA beanA : beanAs) {\n            beanA.setBeanMap(map.get(beanA.getName()));\n        }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681203093,"creation_date":1681203093,"answer_id":75984031,"question_id":75980513,"body_markdown":"You could use specialized libraries for the mapping like [ModelMapper](https://modelmapper.org/) or [MapStruct](https://mapstruct.org/), but in your case a direct implementation seems to be quit simple:\r\n\r\nYou have to create the `BeanA` instances in the map where you process the `EntityA` instances and not do extra before that loop:\r\n\r\n``` lang-java\r\nList&lt;BeanA&gt; beanAs = new ArrayList&lt;&gt;();\r\n\r\nfor (EntityA a : entityAs) {\r\n    BeanA beanA = new BeanA();\r\n    beanA.setName(a.getName());\r\n\r\n    Map&lt;String, Object&gt; beanMap = new HashMap&lt;&gt;();\r\n    beanMap.put(&quot;custom_column&quot;, a.getCustom_column());\r\n\r\n    beanA.setBeanMap(beanMap);\r\n\r\n    beanAs.add(beanA);\r\n}\r\n```\r\n\r\nWhen you only ever have a map with a single entry, you could optimize the map creation to\r\n``` lang-java\r\nMap&lt;String, Object&gt; beanMap = \r\n        java.util.Collections.singletonMap(&quot;custom_column&quot;, a.getCustom_column());\r\n// no beanMap.put... necessary\r\n```\r\n\r\nor if you use Java 9 or newer even shorter with\r\n``` lang-java\r\nMap&lt;String, Object&gt; beanMap = Map.of(&quot;custom_column&quot;, a.getCustom_column());\r\n// no beanMap.put... necessary\r\n```","title":"Set a Map attribute from one collection object to the other collection object in java","body":"<p>You could use specialized libraries for the mapping like <a href=\"https://modelmapper.org/\" rel=\"nofollow noreferrer\">ModelMapper</a> or <a href=\"https://mapstruct.org/\" rel=\"nofollow noreferrer\">MapStruct</a>, but in your case a direct implementation seems to be quit simple:</p>\n<p>You have to create the <code>BeanA</code> instances in the map where you process the <code>EntityA</code> instances and not do extra before that loop:</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;BeanA&gt; beanAs = new ArrayList&lt;&gt;();\n\nfor (EntityA a : entityAs) {\n    BeanA beanA = new BeanA();\n    beanA.setName(a.getName());\n\n    Map&lt;String, Object&gt; beanMap = new HashMap&lt;&gt;();\n    beanMap.put(&quot;custom_column&quot;, a.getCustom_column());\n\n    beanA.setBeanMap(beanMap);\n\n    beanAs.add(beanA);\n}\n</code></pre>\n<p>When you only ever have a map with a single entry, you could optimize the map creation to</p>\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt;String, Object&gt; beanMap = \n        java.util.Collections.singletonMap(&quot;custom_column&quot;, a.getCustom_column());\n// no beanMap.put... necessary\n</code></pre>\n<p>or if you use Java 9 or newer even shorter with</p>\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt;String, Object&gt; beanMap = Map.of(&quot;custom_column&quot;, a.getCustom_column());\n// no beanMap.put... necessary\n</code></pre>\n"}],"owner":{"account_id":1153647,"reputation":463,"user_id":1134835,"accept_rate":40,"display_name":"Mohit224"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":195,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1681203093,"creation_date":1681158911,"question_id":75980513,"body_markdown":"I have a following class where my goal is to create the following JSON output for class BeanA\r\n```\r\n[\r\n   {\r\n      &quot;name&quot;: &quot;name1&quot;,\r\n      &quot;beanMap&quot;: {\r\n         &quot;custom_colum&quot;: &quot;custom_value1&quot;\r\n      }\r\n   },\r\n   {\r\n      &quot;name&quot;: &quot;name2&quot;,\r\n      &quot;beanMap&quot;: {\r\n         &quot;custom_colum&quot;: &quot;custom_value2&quot;\r\n      }\r\n   }\r\n]\r\n```\r\nI am not able to figure out after creating the map from EntityA how to set the each Map values to BeanA class. The idea is that I want to first iterate over the EntityA List to create the map and then set the each map to BeanA object which is another collection. \r\n\r\n```\r\nimport java.util.ArrayList;\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\nimport java.util.Map;\r\n\r\npublic class CopyMapAttributeToPojo {\r\n\r\n\tpublic static void main(String[] args) {\r\n\r\n\t\tList&lt;EntityA&gt; entityAs = new ArrayList&lt;&gt;();\r\n\t\tEntityA entityA1 = new EntityA();\r\n\t\tentityA1.setName(&quot;name1&quot;);\r\n\t\tentityA1.setCustom_column(&quot;custom_value1&quot;);\r\n\r\n\t\tEntityA entityA2 = new EntityA();\r\n\t\tentityA2.setName(&quot;name2&quot;);\r\n\t\tentityA2.setCustom_column(&quot;custom_value2&quot;);\r\n\r\n\t\tentityAs.add(entityA1);\r\n\t\tentityAs.add(entityA2);\r\n\r\n\t\tList&lt;BeanA&gt; beanAs = new ArrayList&lt;&gt;();\r\n\t\tBeanA beanA1 = new BeanA();\r\n\t\tbeanA1.setName(&quot;name1&quot;);\r\n\r\n\t\tBeanA beanA2 = new BeanA();\r\n\t\tbeanA2.setName(&quot;name2&quot;);\r\n\r\n\t\tbeanAs.add(beanA1);\r\n\t\tbeanAs.add(beanA2);\r\n\r\n\t\tfor (EntityA a : entityAs) {\r\n\t\t\tMap&lt;String, Object&gt; beanObject = new HashMap&lt;&gt;();\r\n\t\t\tbeanObject.put(&quot;custom_column&quot;, a.getCustom_column());\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\nclass EntityA {\r\n\tprivate String name;\r\n\tprivate String custom_column;\r\n\r\n\t/**\r\n\t * @return the name\r\n\t */\r\n\tpublic String getName() {\r\n\t\treturn name;\r\n\t}\r\n\r\n\t/**\r\n\t * @param name the name to set\r\n\t */\r\n\tpublic void setName(String name) {\r\n\t\tthis.name = name;\r\n\t}\r\n\r\n\t/**\r\n\t * @return the custom_column\r\n\t */\r\n\tpublic String getCustom_column() {\r\n\t\treturn custom_column;\r\n\t}\r\n\r\n\t/**\r\n\t * @param custom_column the custom_column to set\r\n\t */\r\n\tpublic void setCustom_column(String custom_column) {\r\n\t\tthis.custom_column = custom_column;\r\n\t}\r\n\r\n}\r\n\r\nclass BeanA {\r\n\tprivate String name;\r\n\tprivate Map&lt;String, Object&gt; beanMap;\r\n\r\n\t/**\r\n\t * @return the name\r\n\t */\r\n\tpublic String getName() {\r\n\t\treturn name;\r\n\t}\r\n\r\n\t/**\r\n\t * @param name the name to set\r\n\t */\r\n\tpublic void setName(String name) {\r\n\t\tthis.name = name;\r\n\t}\r\n\r\n\t/**\r\n\t * @return the beanMap\r\n\t */\r\n\tpublic Map&lt;String, Object&gt; getBeanMap() {\r\n\t\treturn beanMap;\r\n\t}\r\n\r\n\t/**\r\n\t * @param beanMap the beanMap to set\r\n\t */\r\n\tpublic void setBeanMap(Map&lt;String, Object&gt; beanMap) {\r\n\t\tthis.beanMap = beanMap;\r\n\t}\r\n\r\n}\r\n```\r\n","title":"Set a Map attribute from one collection object to the other collection object in java","body":"<p>I have a following class where my goal is to create the following JSON output for class BeanA</p>\n<pre><code>[\n   {\n      &quot;name&quot;: &quot;name1&quot;,\n      &quot;beanMap&quot;: {\n         &quot;custom_colum&quot;: &quot;custom_value1&quot;\n      }\n   },\n   {\n      &quot;name&quot;: &quot;name2&quot;,\n      &quot;beanMap&quot;: {\n         &quot;custom_colum&quot;: &quot;custom_value2&quot;\n      }\n   }\n]\n</code></pre>\n<p>I am not able to figure out after creating the map from EntityA how to set the each Map values to BeanA class. The idea is that I want to first iterate over the EntityA List to create the map and then set the each map to BeanA object which is another collection.</p>\n<pre><code>import java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\n\npublic class CopyMapAttributeToPojo {\n\n    public static void main(String[] args) {\n\n        List&lt;EntityA&gt; entityAs = new ArrayList&lt;&gt;();\n        EntityA entityA1 = new EntityA();\n        entityA1.setName(&quot;name1&quot;);\n        entityA1.setCustom_column(&quot;custom_value1&quot;);\n\n        EntityA entityA2 = new EntityA();\n        entityA2.setName(&quot;name2&quot;);\n        entityA2.setCustom_column(&quot;custom_value2&quot;);\n\n        entityAs.add(entityA1);\n        entityAs.add(entityA2);\n\n        List&lt;BeanA&gt; beanAs = new ArrayList&lt;&gt;();\n        BeanA beanA1 = new BeanA();\n        beanA1.setName(&quot;name1&quot;);\n\n        BeanA beanA2 = new BeanA();\n        beanA2.setName(&quot;name2&quot;);\n\n        beanAs.add(beanA1);\n        beanAs.add(beanA2);\n\n        for (EntityA a : entityAs) {\n            Map&lt;String, Object&gt; beanObject = new HashMap&lt;&gt;();\n            beanObject.put(&quot;custom_column&quot;, a.getCustom_column());\n        }\n\n    }\n\n}\n\nclass EntityA {\n    private String name;\n    private String custom_column;\n\n    /**\n     * @return the name\n     */\n    public String getName() {\n        return name;\n    }\n\n    /**\n     * @param name the name to set\n     */\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    /**\n     * @return the custom_column\n     */\n    public String getCustom_column() {\n        return custom_column;\n    }\n\n    /**\n     * @param custom_column the custom_column to set\n     */\n    public void setCustom_column(String custom_column) {\n        this.custom_column = custom_column;\n    }\n\n}\n\nclass BeanA {\n    private String name;\n    private Map&lt;String, Object&gt; beanMap;\n\n    /**\n     * @return the name\n     */\n    public String getName() {\n        return name;\n    }\n\n    /**\n     * @param name the name to set\n     */\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    /**\n     * @return the beanMap\n     */\n    public Map&lt;String, Object&gt; getBeanMap() {\n        return beanMap;\n    }\n\n    /**\n     * @param beanMap the beanMap to set\n     */\n    public void setBeanMap(Map&lt;String, Object&gt; beanMap) {\n        this.beanMap = beanMap;\n    }\n\n}\n</code></pre>\n"},{"tags":["java","spring-boot","http","protocol-buffers","grpc"],"comments":[{"owner":{"account_id":14947494,"reputation":521,"user_id":10792320,"display_name":"San P"},"score":0,"creation_date":1682445657,"post_id":75983998,"comment_id":134216026,"body_markdown":"gRPC uses [Netty](https://netty.io/) which is known for high performance, low latency and optimized memory usage. I am assuming `HttpAsyncClients` does not use that?","body":"gRPC uses <a href=\"https://netty.io/\" rel=\"nofollow noreferrer\">Netty</a> which is known for high performance, low latency and optimized memory usage. I am assuming <code>HttpAsyncClients</code> does not use that?"}],"owner":{"account_id":9768676,"reputation":85,"user_id":7241332,"display_name":"Runekn"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":118,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1681202830,"creation_date":1681202830,"question_id":75983998,"body_markdown":"I am doing benchmarks on different transfer protocols in java+spring-boot, and one thing that stands out is just how much higher throughput gRPC has compared to HTTP/2 with protobuf. The difference becomes even higher with concurrent calls. I&#39;m wondering what is the &#39;secret sauce&#39; that makes it faster.\r\n\r\nJMH results:\r\n```\r\nprotobufHttp2  thrpt   25  2196,489 &#177;  47,739  ops/s\r\ngrpc           thrpt   25  4650,875 &#177;  51,356  ops/s\r\n```\r\n\r\nHTTP/2 client setup\r\n```\r\nHttpAsyncClients.customHttp2()\r\n                    .setDefaultConnectionConfig(ConnectionConfig.custom()\r\n                            .setTimeToLive(TimeValue.ofMinutes(10))\r\n                            .build())\r\n                    .setTlsStrategy(ClientTlsStrategyBuilder.create()\r\n                            .setSslContext(selfSignSSLContext)\r\n                            .build())\r\n\r\n                    .build();\r\n```\r\n","title":"Why does gRPC have twice the throughput of HTTP/2+protobuf?","body":"<p>I am doing benchmarks on different transfer protocols in java+spring-boot, and one thing that stands out is just how much higher throughput gRPC has compared to HTTP/2 with protobuf. The difference becomes even higher with concurrent calls. I'm wondering what is the 'secret sauce' that makes it faster.</p>\n<p>JMH results:</p>\n<pre><code>protobufHttp2  thrpt   25  2196,489   47,739  ops/s\ngrpc           thrpt   25  4650,875   51,356  ops/s\n</code></pre>\n<p>HTTP/2 client setup</p>\n<pre><code>HttpAsyncClients.customHttp2()\n                    .setDefaultConnectionConfig(ConnectionConfig.custom()\n                            .setTimeToLive(TimeValue.ofMinutes(10))\n                            .build())\n                    .setTlsStrategy(ClientTlsStrategyBuilder.create()\n                            .setSslContext(selfSignSSLContext)\n                            .build())\n\n                    .build();\n</code></pre>\n"},{"tags":["java","hibernate"],"comments":[{"owner":{"account_id":3392449,"reputation":259,"user_id":2846997,"display_name":"jbaliuka"},"score":0,"creation_date":1392281315,"post_id":21748236,"comment_id":32896292,"body_markdown":"It should be @ManyToOne mapping instead of formula","body":"It should be @ManyToOne mapping instead of formula"}],"answers":[{"tags":[],"owner":{"account_id":1181324,"reputation":5291,"user_id":1156199,"accept_rate":67,"display_name":"Vad1mo"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1392280889,"creation_date":1392280889,"answer_id":21749008,"question_id":21748236,"body_markdown":"What do you expect from the @Transient Annoation?\r\n\r\nFYI:\r\n`a method annotated as @Transient, and will be ignored by the entity manager` [Hibernate Manual](https://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/#entity-mapping-property)\r\n\r\nRemove the annotation and try with a simple query like count the rows first. \r\nNote that Formula is a native SQL not HQL! ","title":"Populating object property marked as transient in Hibernate","body":"<p>What do you expect from the @Transient Annoation?</p>\n\n<p>FYI:\n<code>a method annotated as @Transient, and will be ignored by the entity manager</code> <a href=\"https://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/#entity-mapping-property\" rel=\"nofollow\">Hibernate Manual</a></p>\n\n<p>Remove the annotation and try with a simple query like count the rows first. \nNote that Formula is a native SQL not HQL! </p>\n"}],"owner":{"account_id":1176664,"reputation":20820,"user_id":1152500,"accept_rate":47,"display_name":"Anand"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1004,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681202708,"creation_date":1392278125,"question_id":21748236,"body_markdown":"I have a property in my Hibernate entity class which is marked as transient.\r\n\r\nNow, without removing `@Transient`, I want to populate that object and I am using `@Formula`.The code is below\r\n\r\n    @Entity\r\n    @Table(name = &quot;EXCHANGE_VALIDATION_FIELD_LIST&quot;)\r\n    public class ExchangeValidation {\r\n           \r\n    \t@Id\r\n    \t@Column(name = &quot;VALIDATION_FIELD_ID&quot;, nullable = false)\r\n    \tpublic Integer getId() {\r\n    \t\treturn this.id;\r\n    \t}\r\n    \r\n       @Formula(&quot;(select ec from ExchangeCode ec, ExchangeValidation ev where ec.validationFieldId = ev.id&quot;)  -- 1)\r\n        @Formula(&quot;(select ec from ExchangeCode ec where ec.validationFieldId = id&quot;) -- 2)\r\n\t    @Transient\r\n\t    public ExchangeCode getExchangeCode() {\r\n\t\treturn exchangeCode;\r\n\t    }\r\n    \r\n    }\r\n\r\nI tried 1) as well as 2) but still ExchangeCode object is giving null. ExchangeCode is another entity.\r\n\r\nWhat can I try next?\r\n","title":"Populating object property marked as transient in Hibernate","body":"<p>I have a property in my Hibernate entity class which is marked as transient.</p>\n<p>Now, without removing <code>@Transient</code>, I want to populate that object and I am using <code>@Formula</code>.The code is below</p>\n<pre><code>@Entity\n@Table(name = &quot;EXCHANGE_VALIDATION_FIELD_LIST&quot;)\npublic class ExchangeValidation {\n       \n    @Id\n    @Column(name = &quot;VALIDATION_FIELD_ID&quot;, nullable = false)\n    public Integer getId() {\n        return this.id;\n    }\n\n   @Formula(&quot;(select ec from ExchangeCode ec, ExchangeValidation ev where ec.validationFieldId = ev.id&quot;)  -- 1)\n    @Formula(&quot;(select ec from ExchangeCode ec where ec.validationFieldId = id&quot;) -- 2)\n    @Transient\n    public ExchangeCode getExchangeCode() {\n    return exchangeCode;\n    }\n\n}\n</code></pre>\n<p>I tried 1) as well as 2) but still ExchangeCode object is giving null. ExchangeCode is another entity.</p>\n<p>What can I try next?</p>\n"},{"tags":["java","swing","jtextfield","border-layout","jpasswordfield"],"answers":[{"tags":[],"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1681202510,"creation_date":1452914599,"answer_id":34823195,"question_id":34822972,"body_markdown":"`JPanel` use a `FlowLayout` by default, which uses a padding of `5`, vertically and horitzontially, by default.\r\n\r\nIf you want to continue using `FlowLayout`, you could specify the padding you want using something like...\r\n\r\n\r\n    pp = new JPanel(new FlowLayout(FlowLayout.CENTER, 0, 0);\r\n\r\nor use another layout manager, like `GridBagLayout`.\r\n\r\nI&#39;d also discourage you from using `setPreferredSize` generally and rely on `Border`&#39;s and layout&#39;s to affect how a component might be &quot;extra&quot; sized beyond its default preferred size.\r\n\r\nHave a look at [Laying Out Components Within a Container](http://docs.oracle.com/javase/tutorial/uiswing/layout/index.html), [How to Use FlowLayout](https://docs.oracle.com/javase/tutorial/uiswing/layout/flow.html), [How to Use GridBagLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html) and [Should I avoid the use of set(Preferred|Maximum|Minimum)Size methods in Java Swing?](https://stackoverflow.com/questions/7229226/should-i-avoid-the-use-of-setpreferredmaximumminimumsize-methods-in-java-swi)","title":"how to remove space between jtextfield, jbutton and raisedbevel border","body":"<p><code>JPanel</code> use a <code>FlowLayout</code> by default, which uses a padding of <code>5</code>, vertically and horitzontially, by default.</p>\n<p>If you want to continue using <code>FlowLayout</code>, you could specify the padding you want using something like...</p>\n<pre><code>pp = new JPanel(new FlowLayout(FlowLayout.CENTER, 0, 0);\n</code></pre>\n<p>or use another layout manager, like <code>GridBagLayout</code>.</p>\n<p>I'd also discourage you from using <code>setPreferredSize</code> generally and rely on <code>Border</code>'s and layout's to affect how a component might be &quot;extra&quot; sized beyond its default preferred size.</p>\n<p>Have a look at <a href=\"http://docs.oracle.com/javase/tutorial/uiswing/layout/index.html\" rel=\"nofollow noreferrer\">Laying Out Components Within a Container</a>, <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/layout/flow.html\" rel=\"nofollow noreferrer\">How to Use FlowLayout</a>, <a href=\"http://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html\" rel=\"nofollow noreferrer\">How to Use GridBagLayout</a> and <a href=\"https://stackoverflow.com/questions/7229226/should-i-avoid-the-use-of-setpreferredmaximumminimumsize-methods-in-java-swi\">Should I avoid the use of set(Preferred|Maximum|Minimum)Size methods in Java Swing?</a></p>\n"}],"owner":{"account_id":7463699,"reputation":38,"user_id":5674111,"accept_rate":67,"display_name":"vinay negi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1391,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":34823195,"answer_count":1,"score":0,"last_activity_date":1681202510,"creation_date":1452912136,"question_id":34822972,"body_markdown":"I wants to remove blank space or border space between `JButton` and `JTextfield` added inside `raisedbevel` border \r\nI tried this code but still gap between them\r\n\r\n    import java.awt.*; \r\n    import javax.swing.*;\r\n    import javax.swing.border.Border;\r\n    \r\n    public class Main {\r\n      public static void main(String args[]) {\r\n        JFrame f = new JFrame(&quot;JPasswordField  &quot;);\r\n        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n        JPanel p=new JPanel(),pp=new JPanel();\r\n        JButton b=new JButton(&quot;o&quot;);\r\n    \r\n    b.setBorder(null);\r\n    b.setBorderPainted(false);\r\n    b.setMargin(new Insets(0,0,0,0));\r\n     Border emptyBorder = BorderFactory.createEmptyBorder();\r\n        b.setBorder(emptyBorder);\r\n        Border  raisedbevel=BorderFactory.createRaisedBevelBorder();\r\n        \r\n        \r\n        pp.setBorder(raisedbevel);\r\n        JTextField t=new JTextField(20);\r\n        t .setBorder(javax.swing.BorderFactory.createEmptyBorder());\r\n        t.setPreferredSize(new Dimension(100, 25));\r\n        b.setPreferredSize(new Dimension(25, 25));\r\n    \tpp.setBackground(Color.black);\r\n        pp.add(t);\r\n         \r\n         pp.add(b);\r\n        \r\n       \r\n    \t p.add(pp);\r\n        f.add(p);\r\n        f.setSize(400, 100);\r\n        f.setVisible(true);\r\n    \r\n        \r\n      }\r\n    }\r\nI wants to remove that black space completely\r\nThanks.","title":"how to remove space between jtextfield, jbutton and raisedbevel border","body":"<p>I wants to remove blank space or border space between <code>JButton</code> and <code>JTextfield</code> added inside <code>raisedbevel</code> border \nI tried this code but still gap between them</p>\n\n<pre><code>import java.awt.*; \nimport javax.swing.*;\nimport javax.swing.border.Border;\n\npublic class Main {\n  public static void main(String args[]) {\n    JFrame f = new JFrame(\"JPasswordField  \");\n    f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n    JPanel p=new JPanel(),pp=new JPanel();\n    JButton b=new JButton(\"o\");\n\nb.setBorder(null);\nb.setBorderPainted(false);\nb.setMargin(new Insets(0,0,0,0));\n Border emptyBorder = BorderFactory.createEmptyBorder();\n    b.setBorder(emptyBorder);\n    Border  raisedbevel=BorderFactory.createRaisedBevelBorder();\n\n\n    pp.setBorder(raisedbevel);\n    JTextField t=new JTextField(20);\n    t .setBorder(javax.swing.BorderFactory.createEmptyBorder());\n    t.setPreferredSize(new Dimension(100, 25));\n    b.setPreferredSize(new Dimension(25, 25));\n    pp.setBackground(Color.black);\n    pp.add(t);\n\n     pp.add(b);\n\n\n     p.add(pp);\n    f.add(p);\n    f.setSize(400, 100);\n    f.setVisible(true);\n\n\n  }\n}\n</code></pre>\n\n<p>I wants to remove that black space completely\nThanks.</p>\n"},{"tags":["java","android","robolectric","android-cardview"],"comments":[{"owner":{"account_id":918082,"reputation":54574,"user_id":950427,"accept_rate":91,"display_name":"Jared Burrows"},"score":0,"creation_date":1435816010,"post_id":31175076,"comment_id":50359704,"body_markdown":"Can you run those tests with `Run with --stacktrace option to get the stack trace.`? use `CardView`s with `RecyclerView`s all the time.","body":"Can you run those tests with <code>Run with --stacktrace option to get the stack trace.</code>? use <code>CardView</code>s with <code>RecyclerView</code>s all the time."},{"owner":{"account_id":242113,"reputation":52552,"user_id":513413,"accept_rate":74,"display_name":"Hesam"},"score":0,"creation_date":1435822594,"post_id":31175076,"comment_id":50362947,"body_markdown":"@JaredBurrows thanks for your reply. --stacktrace didn&#39;t have useful info in compare with what I did above. It was also asking me to look at index.html. About your second suggestion, I don&#39;t need to use RecyclerViews since I have no list of data. I display CardView in case there is no Internet connection, otherwise it&#39;s invisible.","body":"@JaredBurrows thanks for your reply. --stacktrace didn&#39;t have useful info in compare with what I did above. It was also asking me to look at index.html. About your second suggestion, I don&#39;t need to use RecyclerViews since I have no list of data. I display CardView in case there is no Internet connection, otherwise it&#39;s invisible."},{"owner":{"account_id":918082,"reputation":54574,"user_id":950427,"accept_rate":91,"display_name":"Jared Burrows"},"score":0,"creation_date":1435840728,"post_id":31175076,"comment_id":50374981,"body_markdown":"Sorry, I meant to say use `--info` and in my previous comment, I meant to say `I use`.","body":"Sorry, I meant to say use <code>--info</code> and in my previous comment, I meant to say <code>I use</code>."}],"answers":[{"tags":[],"owner":{"account_id":242113,"reputation":52552,"user_id":513413,"accept_rate":74,"display_name":"Hesam"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1681201811,"creation_date":1435895334,"answer_id":31198117,"question_id":31175076,"body_markdown":"Okay, a thing that I learnt from one of my bosses is &quot;When you are working on a very big project and face a bug/problem/issue that you cannot fix it (easily), try to create a new project in order to replicate the issue and fix it over there first&quot;.\r\nHaving this experience in my mind, I created a new project and tried to replicate the issue. However, I&#39;m happy to say that, it&#39;s working fine. Then I just to compare and fix my main project.\r\n\r\nFor those how have same problem, I have pushed my sample project at this repo: https://github.com/Hesamedin/RobolectricTester/tree/master/app/src/test\r\n\r\n---\r\n\r\nUpdate\r\n==\r\nI found that there is no problem when I have a project and a flavor. However, problem occurs when I have flavors. Following pages helped me in order to fix my issue. Please have a look at these pages (second one particularly):\r\n\r\n - https://github.com/robolectric/robolectric/issues/1796 \r\n - https://github.com/nenick/AndroidStudioAndRobolectric/blob/library-with-aar/core/build.gradle","title":"How to test an activity with robolectric while it has android.support.v7.widget.CardView?","body":"<p>Okay, a thing that I learnt from one of my bosses is &quot;When you are working on a very big project and face a bug/problem/issue that you cannot fix it (easily), try to create a new project in order to replicate the issue and fix it over there first&quot;.\nHaving this experience in my mind, I created a new project and tried to replicate the issue. However, I'm happy to say that, it's working fine. Then I just to compare and fix my main project.</p>\n<p>For those how have same problem, I have pushed my sample project at this repo: <a href=\"https://github.com/Hesamedin/RobolectricTester/tree/master/app/src/test\" rel=\"nofollow noreferrer\">https://github.com/Hesamedin/RobolectricTester/tree/master/app/src/test</a></p>\n<hr />\n<h1>Update</h1>\n<p>I found that there is no problem when I have a project and a flavor. However, problem occurs when I have flavors. Following pages helped me in order to fix my issue. Please have a look at these pages (second one particularly):</p>\n<ul>\n<li><a href=\"https://github.com/robolectric/robolectric/issues/1796\" rel=\"nofollow noreferrer\">https://github.com/robolectric/robolectric/issues/1796</a></li>\n<li><a href=\"https://github.com/nenick/AndroidStudioAndRobolectric/blob/library-with-aar/core/build.gradle\" rel=\"nofollow noreferrer\">https://github.com/nenick/AndroidStudioAndRobolectric/blob/library-with-aar/core/build.gradle</a></li>\n</ul>\n"}],"owner":{"account_id":242113,"reputation":52552,"user_id":513413,"accept_rate":74,"display_name":"Hesam"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":874,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":31198117,"answer_count":1,"score":1,"last_activity_date":1681201811,"creation_date":1435807348,"question_id":31175076,"body_markdown":"I have complex project that contains few flavors and project dependency projects. If you consider MY_PROJECT is the project, it contains PROJECT_1 as main project, PROJECT_2 and PROJECT_3 are acting as dependency for PROJECT_1. I&#39;ve put my tests under `PROJECT_2/src/test/java`. \r\n\r\nI&#39;m trying to write few simple methods to test my splash screen based on.\r\n\r\nThis is the code I have written:\r\n\r\n    package com.something.splash;\r\n    \r\n    import android.os.Build;\r\n    import android.view.View;\r\n    \r\n    import static org.junit.Assert.assertNotNull;\r\n    import static org.junit.Assert.assertNull;\r\n    import static org.junit.Assert.assertTrue;\r\n    \r\n    import com.FLAVOUR_1.BuildConfig;\r\n    import com.FLAVOUR_1.R;\r\n    \r\n    import org.junit.Assert;\r\n    import org.junit.Before;\r\n    import org.junit.Test;\r\n    import org.junit.runner.RunWith;\r\n    import org.robolectric.Robolectric;\r\n    import org.robolectric.RobolectricGradleTestRunner;\r\n    import org.robolectric.annotation.Config;\r\n    \r\n    @RunWith(RobolectricGradleTestRunner.class)\r\n    @Config(constants = BuildConfig.class, sdk = Build.VERSION_CODES.KITKAT, manifest = &quot;../PROJECT_1/src/main/AndroidManifest.xml&quot;)\r\n    public class SplashActivityTest\r\n    {\r\n        private SplashActivity mSplashActivity;\r\n    \r\n        @Test\r\n        public void testMe() {\r\n            assertTrue(1 &gt; 0);\r\n        }\r\n    \r\n        @Before\r\n        public void setup()  {\r\n            this.mSplashActivity = Robolectric.buildActivity(SplashActivity.class).create().get();  &lt;==== PROBLEM\r\n        }\r\n    \r\n        @Test\r\n        public void checkActivityNotNull() throws Exception {\r\n            assertNotNull(&quot;How come SplashActivity is null???&quot;, this.mSplashActivity);\r\n        }\r\n    \r\n        @Test\r\n        public void checkVisibilityOfCardView() throws Exception {\r\n            View ivBranding = this.mSplashActivity.findViewById(R.id.ivBranding);\r\n            Assert.assertEquals(ivBranding.getVisibility(), View.VISIBLE);\r\n    \r\n            View cardView = this.mSplashActivity.findViewById(R.id.splash_error_layout);\r\n            assertNull(&quot;CardView MUST be invisible by default.&quot;, cardView);\r\n        }\r\n    }\r\n\r\nThis is the output when I run `./gradlew test` command:\r\n\r\n    com.SOMETHING.splash.SplashActivityTest &gt; checkActivityNotNull FAILED\r\n        android.view.InflateException at SplashActivityTest.java:34 (MARKED WITH &lt;=== ABOVE)\r\n            Caused by: java.lang.reflect.InvocationTargetException at SplashActivityTest.java:34\r\n                Caused by: java.lang.NoClassDefFoundError at SplashActivityTest.java:34\r\n                    Caused by: java.lang.ClassNotFoundException at SplashActivityTest.java:34\r\n    \r\n    com.SOMETHING.splash.SplashActivityTest &gt; testMe FAILED\r\n        android.view.InflateException at SplashActivityTest.java:34\r\n            Caused by: java.lang.reflect.InvocationTargetException at SplashActivityTest.java:34\r\n                Caused by: java.lang.NoClassDefFoundError at SplashActivityTest.java:34\r\n    \r\n    com.SOMETHING.splash.SplashActivityTest &gt; checkVisibilityOfCardView FAILED\r\n        android.view.InflateException at SplashActivityTest.java:34\r\n            Caused by: java.lang.reflect.InvocationTargetException at SplashActivityTest.java:34\r\n                Caused by: java.lang.NoClassDefFoundError at SplashActivityTest.java:34\r\n    \r\n    3 tests completed, 3 failed\r\n    :PROJECT_2:testDebug FAILED\r\n    \r\n    FAILURE: Build failed with an exception.\r\n    \r\n    * What went wrong:\r\n    Execution failed for task &#39;:PROJECT_2:testDebug&#39;.\r\n    &gt; There were failing tests. See the report at: file:///Users/admin/Desktop/android/MY_FOLDER/PROJECT_2/build/reports/tests/debug/index.html\r\n    \r\n    * Try:\r\n    Run with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output.\r\n    \r\n    BUILD FAILED\r\n    \r\n    Total time: 14.546 secs\r\n\r\nand finally `index.html` shows these details:\r\n\r\n        android.view.InflateException: XML file build/intermediates/res/debug/layout/activity_splash.xml line #-1 (sorry, not yet implemented): Error inflating class android.support.v7.widget.CardView\r\n        \tat android.view.LayoutInflater.createView(LayoutInflater.java:620)\r\n        \tat android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:696)\r\n        \tat android.view.LayoutInflater.rInflate(LayoutInflater.java:755)\r\n        .\r\n        .\r\n        .\r\n    Caused by: java.lang.ClassNotFoundException: android.support.v7.cardview.R$styleable\r\n    \tat java.net.URLClassLoader$1.run(URLClassLoader.java:372)\r\n    \tat java.net.URLClassLoader$1.run(URLClassLoader.java:361)\r\n        .\r\n        .\r\n        .\r\n\r\nSorry for long explanation but I guess it was mandatory. I spent a day and still couldn&#39;t figure it out what is the problem and why this f.cardView cannot be recognized while application works fine when I build the project. Any idea would be appreciated. Thanks. \r\n\r\nI have these lines in my `PROJECT_2` gradle file:\r\n\r\n    apply plugin: &#39;com.android.library&#39;\r\n    android androidConfiguration\r\n    \r\n    android {\r\n        sourceSets {\r\n            main {\r\n                res.srcDirs = [&#39;src/main/res&#39;, &#39;src/main/res-flags&#39;]\r\n            }\r\n        }\r\n    }\r\n    \r\n    dependencies {        \r\n        ...\r\n        compile &#39;com.android.support:recyclerview-v7:22.1.1&#39;\r\n        compile &#39;com.android.support:cardview-v7:22.1.1&#39;\r\n        compile &#39;com.google.android.gms:play-services-gcm:7.3.0&#39;\r\n        compile &#39;com.google.android.gms:play-services-maps:7.3.0&#39;\r\n    \r\n        // Roboelectric testing\r\n        testCompile &#39;junit:junit:4.12&#39;\r\n        testCompile &#39;org.robolectric:robolectric:3.0-rc3&#39;\r\n    }\r\n\r\n","title":"How to test an activity with robolectric while it has android.support.v7.widget.CardView?","body":"<p>I have complex project that contains few flavors and project dependency projects. If you consider MY_PROJECT is the project, it contains PROJECT_1 as main project, PROJECT_2 and PROJECT_3 are acting as dependency for PROJECT_1. I've put my tests under <code>PROJECT_2/src/test/java</code>. </p>\n\n<p>I'm trying to write few simple methods to test my splash screen based on.</p>\n\n<p>This is the code I have written:</p>\n\n<pre><code>package com.something.splash;\n\nimport android.os.Build;\nimport android.view.View;\n\nimport static org.junit.Assert.assertNotNull;\nimport static org.junit.Assert.assertNull;\nimport static org.junit.Assert.assertTrue;\n\nimport com.FLAVOUR_1.BuildConfig;\nimport com.FLAVOUR_1.R;\n\nimport org.junit.Assert;\nimport org.junit.Before;\nimport org.junit.Test;\nimport org.junit.runner.RunWith;\nimport org.robolectric.Robolectric;\nimport org.robolectric.RobolectricGradleTestRunner;\nimport org.robolectric.annotation.Config;\n\n@RunWith(RobolectricGradleTestRunner.class)\n@Config(constants = BuildConfig.class, sdk = Build.VERSION_CODES.KITKAT, manifest = \"../PROJECT_1/src/main/AndroidManifest.xml\")\npublic class SplashActivityTest\n{\n    private SplashActivity mSplashActivity;\n\n    @Test\n    public void testMe() {\n        assertTrue(1 &gt; 0);\n    }\n\n    @Before\n    public void setup()  {\n        this.mSplashActivity = Robolectric.buildActivity(SplashActivity.class).create().get();  &lt;==== PROBLEM\n    }\n\n    @Test\n    public void checkActivityNotNull() throws Exception {\n        assertNotNull(\"How come SplashActivity is null???\", this.mSplashActivity);\n    }\n\n    @Test\n    public void checkVisibilityOfCardView() throws Exception {\n        View ivBranding = this.mSplashActivity.findViewById(R.id.ivBranding);\n        Assert.assertEquals(ivBranding.getVisibility(), View.VISIBLE);\n\n        View cardView = this.mSplashActivity.findViewById(R.id.splash_error_layout);\n        assertNull(\"CardView MUST be invisible by default.\", cardView);\n    }\n}\n</code></pre>\n\n<p>This is the output when I run <code>./gradlew test</code> command:</p>\n\n<pre><code>com.SOMETHING.splash.SplashActivityTest &gt; checkActivityNotNull FAILED\n    android.view.InflateException at SplashActivityTest.java:34 (MARKED WITH &lt;=== ABOVE)\n        Caused by: java.lang.reflect.InvocationTargetException at SplashActivityTest.java:34\n            Caused by: java.lang.NoClassDefFoundError at SplashActivityTest.java:34\n                Caused by: java.lang.ClassNotFoundException at SplashActivityTest.java:34\n\ncom.SOMETHING.splash.SplashActivityTest &gt; testMe FAILED\n    android.view.InflateException at SplashActivityTest.java:34\n        Caused by: java.lang.reflect.InvocationTargetException at SplashActivityTest.java:34\n            Caused by: java.lang.NoClassDefFoundError at SplashActivityTest.java:34\n\ncom.SOMETHING.splash.SplashActivityTest &gt; checkVisibilityOfCardView FAILED\n    android.view.InflateException at SplashActivityTest.java:34\n        Caused by: java.lang.reflect.InvocationTargetException at SplashActivityTest.java:34\n            Caused by: java.lang.NoClassDefFoundError at SplashActivityTest.java:34\n\n3 tests completed, 3 failed\n:PROJECT_2:testDebug FAILED\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nExecution failed for task ':PROJECT_2:testDebug'.\n&gt; There were failing tests. See the report at: file:///Users/admin/Desktop/android/MY_FOLDER/PROJECT_2/build/reports/tests/debug/index.html\n\n* Try:\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output.\n\nBUILD FAILED\n\nTotal time: 14.546 secs\n</code></pre>\n\n<p>and finally <code>index.html</code> shows these details:</p>\n\n<pre><code>    android.view.InflateException: XML file build/intermediates/res/debug/layout/activity_splash.xml line #-1 (sorry, not yet implemented): Error inflating class android.support.v7.widget.CardView\n        at android.view.LayoutInflater.createView(LayoutInflater.java:620)\n        at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:696)\n        at android.view.LayoutInflater.rInflate(LayoutInflater.java:755)\n    .\n    .\n    .\nCaused by: java.lang.ClassNotFoundException: android.support.v7.cardview.R$styleable\n    at java.net.URLClassLoader$1.run(URLClassLoader.java:372)\n    at java.net.URLClassLoader$1.run(URLClassLoader.java:361)\n    .\n    .\n    .\n</code></pre>\n\n<p>Sorry for long explanation but I guess it was mandatory. I spent a day and still couldn't figure it out what is the problem and why this f.cardView cannot be recognized while application works fine when I build the project. Any idea would be appreciated. Thanks. </p>\n\n<p>I have these lines in my <code>PROJECT_2</code> gradle file:</p>\n\n<pre><code>apply plugin: 'com.android.library'\nandroid androidConfiguration\n\nandroid {\n    sourceSets {\n        main {\n            res.srcDirs = ['src/main/res', 'src/main/res-flags']\n        }\n    }\n}\n\ndependencies {        \n    ...\n    compile 'com.android.support:recyclerview-v7:22.1.1'\n    compile 'com.android.support:cardview-v7:22.1.1'\n    compile 'com.google.android.gms:play-services-gcm:7.3.0'\n    compile 'com.google.android.gms:play-services-maps:7.3.0'\n\n    // Roboelectric testing\n    testCompile 'junit:junit:4.12'\n    testCompile 'org.robolectric:robolectric:3.0-rc3'\n}\n</code></pre>\n"},{"tags":["java","mapstruct","spi"],"comments":[{"owner":{"account_id":18044315,"reputation":1227,"user_id":13115701,"display_name":"Paul Marcelin Bejan"},"score":0,"creation_date":1681655796,"post_id":75983863,"comment_id":134088154,"body_markdown":"see https://mapstruct.org/documentation/stable/reference/html/#custom-enum-naming-strategy","body":"see <a href=\"https://mapstruct.org/documentation/stable/reference/html/#custom-enum-naming-strategy\" rel=\"nofollow noreferrer\">mapstruct.org/documentation/stable/reference/html/&hellip;</a>"}],"owner":{"account_id":1027355,"reputation":2721,"user_id":1036386,"accept_rate":91,"display_name":"Kalec"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681201761,"creation_date":1681201761,"question_id":75983863,"body_markdown":"From what I can tell, when you declare a SPI, then the mapstruct build process simply chooses it over the default implementation and that&#39;s that. I see no way of saying\r\n\r\n```java\r\n@EnumMappingStratecy(class = DefaultMappingStrategy.class)\r\nTarget myMapping(Source s);\r\n```\r\n\r\nOr anything similar. Am I wrong?\r\n\r\nContext, we are using https://github.com/entur/mapstruct-spi-protobuf and had no idea how bad it was when doing enums that don&#39;t 100% adhere to the google way of over-naming members. And just breaks and we&#39;d rather not use it.\r\n\r\nBUT, I just can&#39;t find anything on how I could disable this strategy, while keeping the rest. The author didn&#39;t include a mechanism. But I think mapstruct should have a way of overriding even if the author didn&#39;t provide any. ","title":"Can you disable a custom mapping strategy?","body":"<p>From what I can tell, when you declare a SPI, then the mapstruct build process simply chooses it over the default implementation and that's that. I see no way of saying</p>\n<pre class=\"lang-java prettyprint-override\"><code>@EnumMappingStratecy(class = DefaultMappingStrategy.class)\nTarget myMapping(Source s);\n</code></pre>\n<p>Or anything similar. Am I wrong?</p>\n<p>Context, we are using <a href=\"https://github.com/entur/mapstruct-spi-protobuf\" rel=\"nofollow noreferrer\">https://github.com/entur/mapstruct-spi-protobuf</a> and had no idea how bad it was when doing enums that don't 100% adhere to the google way of over-naming members. And just breaks and we'd rather not use it.</p>\n<p>BUT, I just can't find anything on how I could disable this strategy, while keeping the rest. The author didn't include a mechanism. But I think mapstruct should have a way of overriding even if the author didn't provide any.</p>\n"},{"tags":["java","spring","gateway","spring-cloud-gateway"],"answers":[{"comments":[{"owner":{"account_id":3695262,"reputation":8590,"user_id":3391490,"accept_rate":100,"display_name":"Thirumal"},"score":0,"creation_date":1684845824,"post_id":75942855,"comment_id":134574194,"body_markdown":"Having the same issue. Can you add the full filter code?","body":"Having the same issue. Can you add the full filter code?"}],"tags":[],"owner":{"account_id":26038502,"reputation":95,"user_id":19743660,"display_name":"programmer"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681201639,"creation_date":1680719005,"answer_id":75942855,"question_id":75940601,"body_markdown":"I found a solution:\r\n\r\nI needed to have the following configuration as in my question:\r\n```\r\n@Configuration\r\npublic class WebFluxConfiguration implements WebFluxConfigurer {\r\n    @Override\r\n    public void configureHttpMessageCodecs(ServerCodecConfigurer configurer) {\r\n        configurer.defaultCodecs().maxInMemorySize(10 * 1024 * 1024);\r\n    }\r\n}\r\n```\r\nAnd autowire to filter constructor ```ServerCodecConfigurer codecConfigurer``` and call parent&#39;s constructor ```super(codecConfigurer.getReaders());```","title":"How to increase max buffer size in ModifyRequestBodyGatewayFilterFactory in Spring Cloud Gateway","body":"<p>I found a solution:</p>\n<p>I needed to have the following configuration as in my question:</p>\n<pre><code>@Configuration\npublic class WebFluxConfiguration implements WebFluxConfigurer {\n    @Override\n    public void configureHttpMessageCodecs(ServerCodecConfigurer configurer) {\n        configurer.defaultCodecs().maxInMemorySize(10 * 1024 * 1024);\n    }\n}\n</code></pre>\n<p>And autowire to filter constructor <code>ServerCodecConfigurer codecConfigurer</code> and call parent's constructor <code>super(codecConfigurer.getReaders());</code></p>\n"}],"owner":{"account_id":26038502,"reputation":95,"user_id":19743660,"display_name":"programmer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":812,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681201639,"creation_date":1680704456,"question_id":75940601,"body_markdown":"In my custom GatewayFilter, that extends ModifyRequestBodyGatewayFilterFactory, when I filter request heavier than 256 kb, I get DataBufferLimitException:\r\n```\r\norg.springframework.core.io.buffer.DataBufferLimitException: Exceeded limit on max bytes to buffer : 262144\r\n\tat org.springframework.core.io.buffer.LimitedDataBufferList.raiseLimitException(LimitedDataBufferList.java:99)\r\n\tat org.springframework.core.io.buffer.LimitedDataBufferList.updateCount(LimitedDataBufferList.java:92) \r\n...\r\n```\r\nI tried to use property\r\n```\r\nspring.codec.max-in-memory-size=5MB\r\n```\r\nand tried to change the limit in configuration bean:\r\n```\r\n@Configuration\r\npublic class WebFluxConfiguration implements WebFluxConfigurer {\r\n    @Override\r\n    public void configureHttpMessageCodecs(ServerCodecConfigurer configurer) {\r\n        configurer.defaultCodecs().maxInMemorySize(10 * 1024 * 1024);\r\n    }\r\n}\r\n```\r\nBut none of this worked. How can I increase max buffer size for my filter?\r\nI saw solution for Modify**Response**BodyGatewayFilterFactory https://github.com/spring-cloud/spring-cloud-gateway/issues/1658#issuecomment-678023793, but don&#39;t know how to implement it for my Modify**Request**BodyGatewayFilterFactory.","title":"How to increase max buffer size in ModifyRequestBodyGatewayFilterFactory in Spring Cloud Gateway","body":"<p>In my custom GatewayFilter, that extends ModifyRequestBodyGatewayFilterFactory, when I filter request heavier than 256 kb, I get DataBufferLimitException:</p>\n<pre><code>org.springframework.core.io.buffer.DataBufferLimitException: Exceeded limit on max bytes to buffer : 262144\n    at org.springframework.core.io.buffer.LimitedDataBufferList.raiseLimitException(LimitedDataBufferList.java:99)\n    at org.springframework.core.io.buffer.LimitedDataBufferList.updateCount(LimitedDataBufferList.java:92) \n...\n</code></pre>\n<p>I tried to use property</p>\n<pre><code>spring.codec.max-in-memory-size=5MB\n</code></pre>\n<p>and tried to change the limit in configuration bean:</p>\n<pre><code>@Configuration\npublic class WebFluxConfiguration implements WebFluxConfigurer {\n    @Override\n    public void configureHttpMessageCodecs(ServerCodecConfigurer configurer) {\n        configurer.defaultCodecs().maxInMemorySize(10 * 1024 * 1024);\n    }\n}\n</code></pre>\n<p>But none of this worked. How can I increase max buffer size for my filter?\nI saw solution for Modify<strong>Response</strong>BodyGatewayFilterFactory <a href=\"https://github.com/spring-cloud/spring-cloud-gateway/issues/1658#issuecomment-678023793\" rel=\"nofollow noreferrer\">https://github.com/spring-cloud/spring-cloud-gateway/issues/1658#issuecomment-678023793</a>, but don't know how to implement it for my Modify<strong>Request</strong>BodyGatewayFilterFactory.</p>\n"},{"tags":["java","spring-boot","jdbc","spring-data-jpa","java-ee-6"],"answers":[{"tags":[],"owner":{"account_id":17717155,"reputation":527,"user_id":12863192,"display_name":"Ishan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681201609,"creation_date":1681201609,"answer_id":75983845,"question_id":75982321,"body_markdown":"Are you using any kind of ORM like Hibernate?\r\nDoes that &#39;Query&#39; class belong to some ORM framework?\r\n\r\nUsually, the ORM itself will provide a way to replace a single parameter with a list of values.  E.g. (Using EBean ORM as an example)\r\n\r\n```\r\nSqlUpdate upd = server.createSqlUpdate(&quot;UPDATE t SET col = :val WHERE id IN (:ids));\r\nupd.setParameter(&quot;val&quot;, val);\r\nupd.setParameter(&quot;ids&quot;, listOfIds);\r\nupd.execute();\r\n```\r\n\r\nHere, `listOfIds` is a list with all the values.\r\nAnd the framework will internally create a `PreparedStatement` with all the necessary parameter value injections, and then execute.\r\n\r\nIf anything like that is NOT available, I.e. you are not using any ORM or your ORM is not supporting it (highly unlikely), then\r\n\r\n```\r\n    String[] arr_rs_seq = value.getString(&quot;rs_seq_array&quot;, &quot;&quot;).split(&quot;,&quot;);\r\n\r\n    for (int i = 0; i &lt; arr_rs_seq.length; i++) {\r\n        sbQuery.append(&quot;&#39;&quot; + arr_rs_seq[i] + &quot;&#39;&quot;);\r\n        if (i + 1 != arr_rs_seq.length) {\r\n            sbQuery.append(&quot;,&quot;);\r\n        }\r\n    }\r\n```\r\n\r\nCan be changed to something like this...\r\n\r\n```\r\n    String[] arr_rs_seq = value.getString(&quot;rs_seq_array&quot;, &quot;&quot;).split(&quot;,&quot;);\r\n\r\n    for (int i = 0; i &lt; arr_rs_seq.length; i++) {\r\n        if (i &gt; 0) {\r\n            sbQuery.append(&quot;,&quot;);\r\n        }\r\n        sbQuery.append(&quot;[key&quot; + i + &quot;]&quot;);\r\n    }\r\n```\r\nThis will generate a query with placeholders `[key0], [key1], ...`, just like your existing placeholders `[settled], [calc_no], and [idkey]`.\r\n\r\nAnd then, after\r\n```\r\nqry.setValue(&quot;calc_no&quot;, value.getString(&quot;calc_no&quot;, &quot;&quot;));\r\n```\r\nyou can add\r\n```\r\n    for (int i = 0; i &lt; arr_rs_seq.length; i++) {\r\n        qry.setValue(&quot;key&quot;+i, arr_rs_seq[i]);\r\n    }\r\n```\r\n\r\nThis should be a better solution to eliminate the SQL Injection.\r\nAppending `&#39;&lt;VALUE&gt;&#39;` in the query directly may lead to SQL injection.\r\n\r\nSo, you should use the parameterized query the same way you are injecting values of parameters `idkey`, `settled`, and `calc_no`.","title":"How to update table with multiple ids at once","body":"<p>Are you using any kind of ORM like Hibernate?\nDoes that 'Query' class belong to some ORM framework?</p>\n<p>Usually, the ORM itself will provide a way to replace a single parameter with a list of values.  E.g. (Using EBean ORM as an example)</p>\n<pre><code>SqlUpdate upd = server.createSqlUpdate(&quot;UPDATE t SET col = :val WHERE id IN (:ids));\nupd.setParameter(&quot;val&quot;, val);\nupd.setParameter(&quot;ids&quot;, listOfIds);\nupd.execute();\n</code></pre>\n<p>Here, <code>listOfIds</code> is a list with all the values.\nAnd the framework will internally create a <code>PreparedStatement</code> with all the necessary parameter value injections, and then execute.</p>\n<p>If anything like that is NOT available, I.e. you are not using any ORM or your ORM is not supporting it (highly unlikely), then</p>\n<pre><code>    String[] arr_rs_seq = value.getString(&quot;rs_seq_array&quot;, &quot;&quot;).split(&quot;,&quot;);\n\n    for (int i = 0; i &lt; arr_rs_seq.length; i++) {\n        sbQuery.append(&quot;'&quot; + arr_rs_seq[i] + &quot;'&quot;);\n        if (i + 1 != arr_rs_seq.length) {\n            sbQuery.append(&quot;,&quot;);\n        }\n    }\n</code></pre>\n<p>Can be changed to something like this...</p>\n<pre><code>    String[] arr_rs_seq = value.getString(&quot;rs_seq_array&quot;, &quot;&quot;).split(&quot;,&quot;);\n\n    for (int i = 0; i &lt; arr_rs_seq.length; i++) {\n        if (i &gt; 0) {\n            sbQuery.append(&quot;,&quot;);\n        }\n        sbQuery.append(&quot;[key&quot; + i + &quot;]&quot;);\n    }\n</code></pre>\n<p>This will generate a query with placeholders <code>[key0], [key1], ...</code>, just like your existing placeholders <code>[settled], [calc_no], and [idkey]</code>.</p>\n<p>And then, after</p>\n<pre><code>qry.setValue(&quot;calc_no&quot;, value.getString(&quot;calc_no&quot;, &quot;&quot;));\n</code></pre>\n<p>you can add</p>\n<pre><code>    for (int i = 0; i &lt; arr_rs_seq.length; i++) {\n        qry.setValue(&quot;key&quot;+i, arr_rs_seq[i]);\n    }\n</code></pre>\n<p>This should be a better solution to eliminate the SQL Injection.\nAppending <code>'&lt;VALUE&gt;'</code> in the query directly may lead to SQL injection.</p>\n<p>So, you should use the parameterized query the same way you are injecting values of parameters <code>idkey</code>, <code>settled</code>, and <code>calc_no</code>.</p>\n"}],"owner":{"account_id":16738851,"reputation":1,"user_id":12099141,"display_name":"Ozodbek"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":113,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681201609,"creation_date":1681185976,"question_id":75982321,"body_markdown":"I have an array of ids as a String[], and I need to update a table that corresponds to these ids.\r\nI implemented a solution using a for loop, but I am not entirely satisfied with it. Are there any alternative approaches to solve this problem ?\r\n\r\n    public int settle_updt_reserve(CommonDAO commonDAO, CommonMap value) throws Exception {\r\n    \tStringBuffer sbQuery = new StringBuffer();\r\n\r\n\t\tsbQuery.append(&quot;UPDATE t_reserve a&quot;                 + this.NEWLINE);\r\n\t\tsbQuery.append(&quot;SET    a.settled = [settled]&quot; + this.NEWLINE);\r\n\t\tsbQuery.append(&quot;,  a.settlement_no = [calc_no]&quot; + this.NEWLINE); //settlement number\r\n\t\tsbQuery.append(&quot;WHERE  1=1&quot;                         + this.NEWLINE);\r\n\t\tsbQuery.append(&quot;AND    a.idkey = [idkey]&quot;  + this.NEWLINE);\r\n\t\tsbQuery.append(&quot;AND    a.rs_seq IN (&quot;  + this.NEWLINE);\r\n\r\n\t\tString[] arr_rs_seq = value.getString(&quot;rs_seq_array&quot;, &quot;&quot;).split(&quot;,&quot;);\r\n\r\n\t\tfor (int i = 0; i &lt; arr_rs_seq.length; i++) {\r\n\t\t\tsbQuery.append(&quot;&#39;&quot; + arr_rs_seq[i] + &quot;&#39;&quot;);\r\n\t\t\tif (i + 1 != arr_rs_seq.length) {\r\n\t\t\t\tsbQuery.append(&quot;,&quot;);\r\n\t\t\t}\r\n\t\t}\r\n\t\tsbQuery.append(&quot;)&quot;  + this.NEWLINE);\r\n    \tQuery qry = new Query(sbQuery);\r\n\r\n        try{\r\n        \tqry.setValue(&quot;idkey&quot;,\t\t\tvalue.getString(&quot;idkey&quot;, &quot;&quot;));\r\n        \tqry.setValue(&quot;settled&quot;,\t\tvalue.getString(&quot;settled&quot;, &quot;&quot;));\r\n        \tqry.setValue(&quot;calc_no&quot;,\tvalue.getString(&quot;calc_no&quot;, &quot;&quot;));\r\n\r\n        \treturn commonDAO.update(qry);\r\n        }catch(Exception e){\r\n        \tSystem.out.println(&quot;ReportDAO : settle_updt_reserve(CommonDAO, CommonMap) : &quot; + CommonUtil.getSysDate() + &quot;/Error MSG:&quot; + e.getMessage());\r\n        \tthrow e;\r\n        }\r\n    }\r\n\r\nI need alternative/ better approach for this solution\r\n \r\n\r\n\t\tString[] arr_rs_seq = value.getString(&quot;rs_seq_array&quot;, &quot;&quot;).split(&quot;,&quot;);\r\n\r\n\t\tfor (int i = 0; i &lt; arr_rs_seq.length; i++) {\r\n\t\t\tsbQuery.append(&quot;&#39;&quot; + arr_rs_seq[i] + &quot;&#39;&quot;);\r\n\t\t\tif (i + 1 != arr_rs_seq.length) {\r\n\t\t\t\tsbQuery.append(&quot;,&quot;);\r\n\t\t\t}\r\n\t\t}\r\n\t ","title":"How to update table with multiple ids at once","body":"<p>I have an array of ids as a String[], and I need to update a table that corresponds to these ids.\nI implemented a solution using a for loop, but I am not entirely satisfied with it. Are there any alternative approaches to solve this problem ?</p>\n<pre><code>public int settle_updt_reserve(CommonDAO commonDAO, CommonMap value) throws Exception {\n    StringBuffer sbQuery = new StringBuffer();\n\n    sbQuery.append(&quot;UPDATE t_reserve a&quot;                 + this.NEWLINE);\n    sbQuery.append(&quot;SET    a.settled = [settled]&quot; + this.NEWLINE);\n    sbQuery.append(&quot;,  a.settlement_no = [calc_no]&quot; + this.NEWLINE); //settlement number\n    sbQuery.append(&quot;WHERE  1=1&quot;                         + this.NEWLINE);\n    sbQuery.append(&quot;AND    a.idkey = [idkey]&quot;  + this.NEWLINE);\n    sbQuery.append(&quot;AND    a.rs_seq IN (&quot;  + this.NEWLINE);\n\n    String[] arr_rs_seq = value.getString(&quot;rs_seq_array&quot;, &quot;&quot;).split(&quot;,&quot;);\n\n    for (int i = 0; i &lt; arr_rs_seq.length; i++) {\n        sbQuery.append(&quot;'&quot; + arr_rs_seq[i] + &quot;'&quot;);\n        if (i + 1 != arr_rs_seq.length) {\n            sbQuery.append(&quot;,&quot;);\n        }\n    }\n    sbQuery.append(&quot;)&quot;  + this.NEWLINE);\n    Query qry = new Query(sbQuery);\n\n    try{\n        qry.setValue(&quot;idkey&quot;,           value.getString(&quot;idkey&quot;, &quot;&quot;));\n        qry.setValue(&quot;settled&quot;,     value.getString(&quot;settled&quot;, &quot;&quot;));\n        qry.setValue(&quot;calc_no&quot;, value.getString(&quot;calc_no&quot;, &quot;&quot;));\n\n        return commonDAO.update(qry);\n    }catch(Exception e){\n        System.out.println(&quot;ReportDAO : settle_updt_reserve(CommonDAO, CommonMap) : &quot; + CommonUtil.getSysDate() + &quot;/Error MSG:&quot; + e.getMessage());\n        throw e;\n    }\n}\n</code></pre>\n<p>I need alternative/ better approach for this solution</p>\n<pre><code>    String[] arr_rs_seq = value.getString(&quot;rs_seq_array&quot;, &quot;&quot;).split(&quot;,&quot;);\n\n    for (int i = 0; i &lt; arr_rs_seq.length; i++) {\n        sbQuery.append(&quot;'&quot; + arr_rs_seq[i] + &quot;'&quot;);\n        if (i + 1 != arr_rs_seq.length) {\n            sbQuery.append(&quot;,&quot;);\n        }\n    }\n \n</code></pre>\n"},{"tags":["java","file"],"comments":[{"owner":{"account_id":8362430,"reputation":856,"user_id":6280255,"display_name":"Just another Java programmer"},"score":0,"creation_date":1681202200,"post_id":75983792,"comment_id":134014246,"body_markdown":"Could you provide us with more on how you are contacting the server? Some code could be helpful.","body":"Could you provide us with more on how you are contacting the server? Some code could be helpful."},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1681202950,"post_id":75983792,"comment_id":134014423,"body_markdown":"Can you expand on _check whether the files has access to the given Service ID_ What _Service ID_ are you referring to? Is it a Web service? How does a file have access to a service?","body":"Can you expand on <i>check whether the files has access to the given Service ID</i> What <i>Service ID</i> are you referring to? Is it a Web service? How does a file have access to a service?"},{"owner":{"account_id":27080115,"reputation":99,"user_id":20629378,"display_name":"Pavan G"},"score":1,"creation_date":1681203635,"post_id":75983792,"comment_id":134014597,"body_markdown":"lets suppose we have files in some server and we login to server using LoginId/userId and password. if there is a one file it is accessible only to me others cant access it bcz their Login/userId dont have permission.how to check this permission in java","body":"lets suppose we have files in some server and we login to server using LoginId/userId and password. if there is a one file it is accessible only to me others cant access it bcz their Login/userId dont have permission.how to check this permission in java"},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1681268503,"post_id":75983792,"comment_id":134027618,"body_markdown":"So you are asking how to check whether a certain user has permission to read a file on a remote server, correct?","body":"So you are asking how to check whether a certain user has permission to read a file on a remote server, correct?"},{"owner":{"account_id":27080115,"reputation":99,"user_id":20629378,"display_name":"Pavan G"},"score":0,"creation_date":1681363178,"post_id":75983792,"comment_id":134044803,"body_markdown":"yes, exactly the same I want","body":"yes, exactly the same I want"}],"owner":{"account_id":27080115,"reputation":99,"user_id":20629378,"display_name":"Pavan G"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1681201053,"creation_date":1681201053,"question_id":75983792,"body_markdown":"I&#39;m connecting to a server and getting files from there and scanning it using java code.\r\nBefore scanning the files , I wanted to check whether the files has access to the given Service ID?","title":"How to check user has access to file or not(using service ID)","body":"<p>I'm connecting to a server and getting files from there and scanning it using java code.\nBefore scanning the files , I wanted to check whether the files has access to the given Service ID?</p>\n"},{"tags":["java","spring","spring-boot","spring-security","annotations"],"owner":{"account_id":23710416,"reputation":11,"user_id":17745273,"display_name":"windynova"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681200752,"creation_date":1681115879,"question_id":75975541,"body_markdown":"I&#39;ve got an annotation called **@AccessIsolation** designed to make API access isolated to only that user using Spring Security\r\n\r\n```\r\n@Target(ElementType.METHOD)\r\n@Retention(RetentionPolicy.RUNTIME)\r\n@PreAuthorize(value = &quot;authentication.name.equals(#userId)&quot;)\r\npublic @interface AccessIsolation {\r\n}\r\n```\r\n\r\nand I got a controller that looks like this\r\n\r\n    @DeleteMapping\r\n    public Boolean signOutCampaign(@RequestParam String userId,@RequestBody String id) {\r\n    return iCampaignAttendeeService.removeById(id);\r\n    }\r\n\r\nnow I want to change it a little bit since other controllers may have a different @RequestParam &#39;parameter name&#39; to pass in\r\nI can only think of a way maybe changes the annotation like this:\r\n\r\n```\r\n@Target(ElementType.METHOD)\r\n@Retention(RetentionPolicy.RUNTIME)\r\n@PreAuthorize(value = &quot;authentication.name.equals(#userEntity)&quot;)\r\npublic @interface AccessIsolation {\r\n    String userEntity() default &quot;userId&quot;;\r\n}\r\n```\r\n\r\n\r\nBut is there a way to pass in arguments to an annotation within an annotation? because when I try to use this method but it doesn&#39;t work\r\nhow am I supposed to achieve this\r\nThanks in advance!\r\n","title":"Is it possible to pass in arguments to an annotation within an annotation?","body":"<p>I've got an annotation called <strong>@AccessIsolation</strong> designed to make API access isolated to only that user using Spring Security</p>\n<pre><code>@Target(ElementType.METHOD)\n@Retention(RetentionPolicy.RUNTIME)\n@PreAuthorize(value = &quot;authentication.name.equals(#userId)&quot;)\npublic @interface AccessIsolation {\n}\n</code></pre>\n<p>and I got a controller that looks like this</p>\n<pre><code>@DeleteMapping\npublic Boolean signOutCampaign(@RequestParam String userId,@RequestBody String id) {\nreturn iCampaignAttendeeService.removeById(id);\n}\n</code></pre>\n<p>now I want to change it a little bit since other controllers may have a different @RequestParam 'parameter name' to pass in\nI can only think of a way maybe changes the annotation like this:</p>\n<pre><code>@Target(ElementType.METHOD)\n@Retention(RetentionPolicy.RUNTIME)\n@PreAuthorize(value = &quot;authentication.name.equals(#userEntity)&quot;)\npublic @interface AccessIsolation {\n    String userEntity() default &quot;userId&quot;;\n}\n</code></pre>\n<p>But is there a way to pass in arguments to an annotation within an annotation? because when I try to use this method but it doesn't work\nhow am I supposed to achieve this\nThanks in advance!</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":17823878,"reputation":1064,"user_id":12945569,"display_name":"Fr&#233;d&#233;ric LOYER"},"score":0,"creation_date":1681188264,"post_id":75982447,"comment_id":134011986,"body_markdown":"You have proposed two 3x3 examples : `3 5 1 2 8 3 4 6 7` and `3 5 1 2 8 0 3 4 6 7`. The output is ok with the first example. What did you expect ?","body":"You have proposed two 3x3 examples : <code>3 5 1 2 8 3 4 6 7</code> and <code>3 5 1 2 8 0 3 4 6 7</code>. The output is ok with the first example. What did you expect ?"},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1681189483,"post_id":75982447,"comment_id":134012096,"body_markdown":"@strugglingnewb I had to edit your question because it was utterly unreadable before. You should read your own question back after posting it to check it looks readable.","body":"@strugglingnewb I had to edit your question because it was utterly unreadable before. You should read your own question back after posting it to check it looks readable."},{"owner":{"account_id":28271415,"reputation":3,"user_id":21614530,"display_name":"strugglingnewb"},"score":0,"creation_date":1681190739,"post_id":75982447,"comment_id":134012228,"body_markdown":"sorry it&#39;s my first time posting i&#39;ll try to make future posts a little less cluttered\n\nthat&#39;s not what it actually outputs that&#39;s what i want it to output and i&#39;m asking how i could get it to do that","body":"sorry it&#39;s my first time posting i&#39;ll try to make future posts a little less cluttered  that&#39;s not what it actually outputs that&#39;s what i want it to output and i&#39;m asking how i could get it to do that"},{"owner":{"account_id":26262923,"reputation":447,"user_id":19933941,"display_name":"llesha"},"score":0,"creation_date":1681195875,"post_id":75982447,"comment_id":134012987,"body_markdown":"What is the maximal size of the grid? Could there be 3 digit numbers or not?","body":"What is the maximal size of the grid? Could there be 3 digit numbers or not?"},{"owner":{"account_id":28271415,"reputation":3,"user_id":21614530,"display_name":"strugglingnewb"},"score":0,"creation_date":1681198844,"post_id":75982447,"comment_id":134013548,"body_markdown":"no 3 digit numbers; maximum that the test cases go up to are 9x9 grids, so that&#39;s what I&#39;ll assume is the max I need to account for","body":"no 3 digit numbers; maximum that the test cases go up to are 9x9 grids, so that&#39;s what I&#39;ll assume is the max I need to account for"}],"answers":[{"comments":[{"owner":{"account_id":16944613,"reputation":418,"user_id":12255620,"display_name":"MBobrik"},"score":0,"creation_date":1681199807,"post_id":75983602,"comment_id":134013717,"body_markdown":"I would rather go with ```if( s.trim().isEmpty() ) { return ... }``` than exception","body":"I would rather go with <code>if( s.trim().isEmpty() ) { return ... }</code> than exception"},{"owner":{"account_id":16001900,"reputation":328,"user_id":11548316,"display_name":"Preston"},"score":0,"creation_date":1681200184,"post_id":75983602,"comment_id":134013805,"body_markdown":"@MBobrik Yes it would be better in this question,  but using try-catch is more general.","body":"@MBobrik Yes it would be better in this question,  but using try-catch is more general."},{"owner":{"account_id":16944613,"reputation":418,"user_id":12255620,"display_name":"MBobrik"},"score":0,"creation_date":1681200366,"post_id":75983602,"comment_id":134013843,"body_markdown":"Provided that this generality is desired. Even then, I would rather have a separate *if* path for the valid non-nummerical value(s) and the try/catch for altogether invalid inputs","body":"Provided that this generality is desired. Even then, I would rather have a separate <i>if</i> path for the valid non-nummerical value(s) and the try/catch for altogether invalid inputs"}],"tags":[],"owner":{"account_id":16001900,"reputation":328,"user_id":11548316,"display_name":"Preston"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681200018,"creation_date":1681199629,"answer_id":75983602,"question_id":75982447,"body_markdown":"If fixed number (spaceNum) spaces split each row of the input data, you can read each line n times and divide each line by the spaceNum spaces.\r\n\r\nHere is a sample:\r\n\r\n```java\r\nfor (int i = 0; i &lt; n; i++) {\r\n    int[] row = Arrays.stream(scanner.nextLine().split(&quot; {&quot;+spaceNum+&quot;}&quot;)).mapToInt(s -&gt; {\r\n        try{\r\n            return Integer.parseInt(s.trim());\r\n        }catch (NumberFormatException e){\r\n            return 0;\r\n        }\r\n    }).toArray();\r\n\r\n    board[i] = row;\r\n}\r\n```","title":"Reading an input file n x n grid and reading empty space","body":"<p>If fixed number (spaceNum) spaces split each row of the input data, you can read each line n times and divide each line by the spaceNum spaces.</p>\n<p>Here is a sample:</p>\n<pre class=\"lang-java prettyprint-override\"><code>for (int i = 0; i &lt; n; i++) {\n    int[] row = Arrays.stream(scanner.nextLine().split(&quot; {&quot;+spaceNum+&quot;}&quot;)).mapToInt(s -&gt; {\n        try{\n            return Integer.parseInt(s.trim());\n        }catch (NumberFormatException e){\n            return 0;\n        }\n    }).toArray();\n\n    board[i] = row;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26262923,"reputation":447,"user_id":19933941,"display_name":"llesha"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1681200698,"creation_date":1681200189,"answer_id":75983680,"question_id":75982447,"body_markdown":"This should work for your examples. The idea is to process each line separately, find all numbers in it. \r\n\r\nIf there are not enough numbers, then a line contains an empty cell. In this case we should find the location of it and skip it.\r\n\r\n```java\r\npublic static int[][] main(String[] args) throws FileNotFoundException {\r\n    File input = new File(args[0]);\r\n    Scanner scanner = new Scanner(input);\r\n\r\n    int n = scanner.nextInt();\r\n    scanner.nextLine();\r\n    int[][] board = new int[n][n];\r\n    int currentRow = 0;\r\n\r\n    while (scanner.hasNextLine()) {\r\n        String line = scanner.nextLine();\r\n        var digits = Arrays.stream(line.split(&quot; &quot;))\r\n                .filter(d -&gt; !Objects.equals(d, &quot;&quot;))\r\n                .map(Integer::parseInt)\r\n                .collect(Collectors.toList());\r\n\r\n        int emptyCellIndex = -1;\r\n        // found empty cell\r\n        if (digits.size() != n) {\r\n            emptyCellIndex = (line.indexOf(&quot;   &quot;) + 2) / 3;\r\n        }\r\n        int iter = 0;\r\n        for (int i = 0; i &lt; n; i++) {\r\n            if (i == emptyCellIndex) {\r\n                continue;\r\n            }\r\n            board[currentRow][i] = digits.get(iter);\r\n            iter++;\r\n        }\r\n        currentRow++;\r\n    }\r\n    return board;\r\n}\r\n```","title":"Reading an input file n x n grid and reading empty space","body":"<p>This should work for your examples. The idea is to process each line separately, find all numbers in it.</p>\n<p>If there are not enough numbers, then a line contains an empty cell. In this case we should find the location of it and skip it.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static int[][] main(String[] args) throws FileNotFoundException {\n    File input = new File(args[0]);\n    Scanner scanner = new Scanner(input);\n\n    int n = scanner.nextInt();\n    scanner.nextLine();\n    int[][] board = new int[n][n];\n    int currentRow = 0;\n\n    while (scanner.hasNextLine()) {\n        String line = scanner.nextLine();\n        var digits = Arrays.stream(line.split(&quot; &quot;))\n                .filter(d -&gt; !Objects.equals(d, &quot;&quot;))\n                .map(Integer::parseInt)\n                .collect(Collectors.toList());\n\n        int emptyCellIndex = -1;\n        // found empty cell\n        if (digits.size() != n) {\n            emptyCellIndex = (line.indexOf(&quot;   &quot;) + 2) / 3;\n        }\n        int iter = 0;\n        for (int i = 0; i &lt; n; i++) {\n            if (i == emptyCellIndex) {\n                continue;\n            }\n            board[currentRow][i] = digits.get(iter);\n            iter++;\n        }\n        currentRow++;\n    }\n    return board;\n}\n</code></pre>\n"}],"owner":{"account_id":28271415,"reputation":3,"user_id":21614530,"display_name":"strugglingnewb"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75983680,"answer_count":2,"score":0,"last_activity_date":1681200698,"creation_date":1681187932,"question_id":75982447,"body_markdown":"I am trying to read an input file for something for an n x n fifteen sliding puzzle solver. The actual solving is not important right now because I can&#39;t even get through the input file reading part.\r\n\r\nA number of board input files will be sent in and they look like this:\r\n\r\n```none\r\n3\r\n 5  1  2\r\n 8     3\r\n 4  6  7\r\n```\r\nthe top number is n (n x n grid). The input files cannot be changed so I can&#39;t make my life easier by representing the space with a 0 and then reading normally. I want to be able to read it into the code as a 2d array like so:\r\n\r\n```none\r\n5 1 2\r\n8 0 3\r\n4 6 7\r\n```\r\n\r\n(0 representing the empty space at (1, 1) in the code)\r\n\r\nThe exact number of spaces between the numbers are also kind of weird in the input files because sometimes it&#39;s 2 spaces and sometimes it&#39;s 1 space (e.g. here&#39;s another larger input file):\r\n\r\n```none\r\n9\r\n38 51 15 17 11 27  8 36  7\r\n19 40 28 10 14  4 77 26  9\r\n43  2  5 18 71 22 20 32 13\r\n37 34 76  6 48 25 35 44 53\r\n 1 56 65 39 70 24 62 79 42\r\n30 74 68    58 55 45 60 33\r\n67 29 75  3 41 59 73 63 80\r\n47 12 31 49 50 61 57 72 16\r\n66 23 64 21 78 54 69 52 46\r\n```\r\n\r\nI tried this:\r\n\r\n```java\r\nFile input = new File(args[0]);\r\nScanner scanner = new Scanner(input);\r\n\r\nint n = scanner.nextInt();\r\nscanner.nextLine();\r\nint[][] board = new int[n][n];\r\nint emptyRow = -1;\r\nint emptyCol = -1;\r\n\r\nfor (int i = 0; i &lt; n; i++) {\r\n\tfor (int j = 0; j &lt; n; j++) {\r\n\t\tif (scanner.hasNextInt()) {\r\n\t\t\tboard[i][j] = scanner.nextInt();\r\n\t\t} else {\r\n\t\t\t// Empty space\r\n\t\t\tboard[i][j] = 0;\r\n\t\t\temptyRow = i;\r\n\t\t\temptyCol = j;\r\n\t\t}\r\n\t}\r\n}\r\n```\r\n\r\nIt outputs this for the example 3x3 above:\r\n\r\n```none\r\n5 1 2 \r\n8 3 4\r\n6 7 0\r\n```\r\n\r\nSo, it doesn&#39;t even know at what position the empty space is; I&#39;m not sure what to do here.","title":"Reading an input file n x n grid and reading empty space","body":"<p>I am trying to read an input file for something for an n x n fifteen sliding puzzle solver. The actual solving is not important right now because I can't even get through the input file reading part.</p>\n<p>A number of board input files will be sent in and they look like this:</p>\n<pre class=\"lang-none prettyprint-override\"><code>3\n 5  1  2\n 8     3\n 4  6  7\n</code></pre>\n<p>the top number is n (n x n grid). The input files cannot be changed so I can't make my life easier by representing the space with a 0 and then reading normally. I want to be able to read it into the code as a 2d array like so:</p>\n<pre class=\"lang-none prettyprint-override\"><code>5 1 2\n8 0 3\n4 6 7\n</code></pre>\n<p>(0 representing the empty space at (1, 1) in the code)</p>\n<p>The exact number of spaces between the numbers are also kind of weird in the input files because sometimes it's 2 spaces and sometimes it's 1 space (e.g. here's another larger input file):</p>\n<pre class=\"lang-none prettyprint-override\"><code>9\n38 51 15 17 11 27  8 36  7\n19 40 28 10 14  4 77 26  9\n43  2  5 18 71 22 20 32 13\n37 34 76  6 48 25 35 44 53\n 1 56 65 39 70 24 62 79 42\n30 74 68    58 55 45 60 33\n67 29 75  3 41 59 73 63 80\n47 12 31 49 50 61 57 72 16\n66 23 64 21 78 54 69 52 46\n</code></pre>\n<p>I tried this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>File input = new File(args[0]);\nScanner scanner = new Scanner(input);\n\nint n = scanner.nextInt();\nscanner.nextLine();\nint[][] board = new int[n][n];\nint emptyRow = -1;\nint emptyCol = -1;\n\nfor (int i = 0; i &lt; n; i++) {\n    for (int j = 0; j &lt; n; j++) {\n        if (scanner.hasNextInt()) {\n            board[i][j] = scanner.nextInt();\n        } else {\n            // Empty space\n            board[i][j] = 0;\n            emptyRow = i;\n            emptyCol = j;\n        }\n    }\n}\n</code></pre>\n<p>It outputs this for the example 3x3 above:</p>\n<pre class=\"lang-none prettyprint-override\"><code>5 1 2 \n8 3 4\n6 7 0\n</code></pre>\n<p>So, it doesn't even know at what position the empty space is; I'm not sure what to do here.</p>\n"},{"tags":["java","spring","autowired"],"comments":[{"owner":{"account_id":10108456,"reputation":3914,"user_id":7470253,"display_name":"M. Prokhorov"},"score":0,"creation_date":1505065109,"post_id":46143482,"comment_id":79249070,"body_markdown":"Because you did not declare a dependency - you just made a setter.","body":"Because you did not declare a dependency - you just made a setter."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1505069399,"post_id":46143482,"comment_id":79250468,"body_markdown":"Because the name of the **field** isn&#39;t the same as the name of a **property**. Your property is still named `spellChecker` as property names are defined by the get/set methods of a class not by the name of the fields (and this as nothing to do with Spring but how the Java Bean specification works/is defined). So actually it is working as expected.","body":"Because the name of the <b>field</b> isn&#39;t the same as the name of a <b>property</b>. Your property is still named <code>spellChecker</code> as property names are defined by the get/set methods of a class not by the name of the fields (and this as nothing to do with Spring but how the Java Bean specification works/is defined). So actually it is working as expected."}],"answers":[{"comments":[{"owner":{"account_id":11129218,"reputation":654,"user_id":8169680,"display_name":"Surya"},"score":0,"creation_date":1505096150,"post_id":46144453,"comment_id":79256454,"body_markdown":"Thanks Deinum for the clear clarification. I got it now. Previously I had an idea that filed name and property name are same.","body":"Thanks Deinum for the clear clarification. I got it now. Previously I had an idea that filed name and property name are same."}],"tags":[],"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1505070031,"creation_date":1505070031,"answer_id":46144453,"question_id":46143482,"body_markdown":"It actually works as designed. Your **property** is named `spellChecker` not `spellChecker1`. You have a **field** named `spellChecker1`.\n\nThe name of the **field** is not the same as the name of a **property**. A name of the property is defined by the `get` and `set` methods available on a class. As you have a `setSpellChecker` (and the corresponding getter) there is a **property** named `spellChecker`. \n\nAll of this is written down in the [JavaBeans Specification][1] (which was written somewhere in 1998!)\n\n&gt; Basically properties are named attributes associated with a bean that can be read or written by calling appropriate methods on the bean. Thus for example, a bean might have a `foreground` property that represents its foreground color. This property might be read by calling a `Color getForeground()` method and updated by calling a `void setForeground(Color c)` method. \n&gt;\n&gt; _Source the JavaBeans Specification._\n\n\n[1]: http://download.oracle.com/otndocs/jcp/7224-javabeans-1.01-fr-spec-oth-JSpec/","title":"Spring autowire byName not working as expected","body":"<p>It actually works as designed. Your <strong>property</strong> is named <code>spellChecker</code> not <code>spellChecker1</code>. You have a <strong>field</strong> named <code>spellChecker1</code>.</p>\n<p>The name of the <strong>field</strong> is not the same as the name of a <strong>property</strong>. A name of the property is defined by the <code>get</code> and <code>set</code> methods available on a class. As you have a <code>setSpellChecker</code> (and the corresponding getter) there is a <strong>property</strong> named <code>spellChecker</code>.</p>\n<p>All of this is written down in the <a href=\"http://download.oracle.com/otndocs/jcp/7224-javabeans-1.01-fr-spec-oth-JSpec/\" rel=\"nofollow noreferrer\">JavaBeans Specification</a> (which was written somewhere in 1998!)</p>\n<blockquote>\n<p>Basically properties are named attributes associated with a bean that can be read or written by calling appropriate methods on the bean. Thus for example, a bean might have a <code>foreground</code> property that represents its foreground color. This property might be read by calling a <code>Color getForeground()</code> method and updated by calling a <code>void setForeground(Color c)</code> method.</p>\n<p><em>Source the JavaBeans Specification.</em></p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":28225594,"reputation":1,"user_id":21575657,"display_name":"SimpleSolutions"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681200450,"creation_date":1680719245,"answer_id":75942891,"question_id":46143482,"body_markdown":" \r\n\r\n        public void setSpellChecker( SpellChecker spellChecker1 ){\r\n            this.spellChecker1 = spellChecker1;\r\n        }\r\n\r\nJust change setter method name from setSpellChecker to setSpellChecker1 because to set the value it needs the setter method of that property","title":"Spring autowire byName not working as expected","body":"<pre><code>    public void setSpellChecker( SpellChecker spellChecker1 ){\n        this.spellChecker1 = spellChecker1;\n    }\n</code></pre>\n<p>Just change setter method name from setSpellChecker to setSpellChecker1 because to set the value it needs the setter method of that property</p>\n"}],"owner":{"account_id":11129218,"reputation":654,"user_id":8169680,"display_name":"Surya"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":418,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":46144453,"answer_count":2,"score":1,"last_activity_date":1681200450,"creation_date":1505064110,"question_id":46143482,"body_markdown":"Spring autowire byName not working as expected.\r\n\r\n    public class SpellChecker {\r\n    \tpublic SpellChecker() {\r\n    \t    System.out.println(&quot;Inside SpellChecker constructor.&quot; );\r\n        }\r\n    \t\r\n        public void checkSpelling() {\r\n    \t    System.out.println(&quot;Inside checkSpelling.&quot; );\r\n    \t}\r\n    }\r\n\r\n    public class TextEditor {\r\n    \r\n    \t   private SpellChecker spellChecker1;\r\n    \t   private String name;\r\n    \r\n    \t   public void setSpellChecker( SpellChecker spellChecker1 ){\r\n    \t      this.spellChecker1 = spellChecker1;\r\n    \t   }\r\n    \t   public SpellChecker getSpellChecker() {\r\n    \t      return spellChecker1;\r\n    \t   }\r\n    \t   public void setName(String name) {\r\n    \t      this.name = name;\r\n    \t   }\r\n    \t   public String getName() {\r\n    \t      return name;\r\n    \t   }\r\n \r\n\t   public void spellCheck() {\r\n\t\t   System.out.println(&quot; TextEditor name is &quot; +name);\r\n\t      spellChecker1.checkSpelling();\r\n\t   }\r\n    }\r\n\r\n    public class TextEditorMain {\r\n    \r\n    \tpublic static void main(String args[]) throws InterruptedException{\r\n    \t\t\r\n    \t\tApplicationContext context = new \r\n            ClassPathXmlApplicationContext(&quot;Beans.xml&quot;); \r\n    \t\tTextEditor tEditor = (TextEditor) context.getBean(&quot;textEditor&quot;);\r\n    \t\ttEditor.spellCheck();\t\r\n    \t}\r\n    }\r\n\r\n\r\nSpring beans configuration:\r\n\r\n    &lt;bean id = &quot;spellChecker1&quot; class = &quot;com.spring.beans.SpellChecker&quot;&gt;\r\n    &lt;/bean&gt;\r\n        \r\n    &lt;bean id = &quot;textEditor&quot; class = &quot;com.spring.beans.TextEditor&quot; autowire=&quot;byName&quot;&gt;\r\n       &lt;property name = &quot;name&quot; value = &quot;text1&quot;/&gt;\r\n    &lt;/bean&gt;\r\n\r\nWhen I give `spellChecker1` as bean id it is not working. Below are the console o/p,\r\n\r\n    Inside SpellChecker constructor.\r\n     TextEditor name is text1\r\n    Exception in thread &quot;main&quot; java.lang.NullPointerException\r\n    \tat com.spring.beans.TextEditor.spellCheck(TextEditor.java:26)\r\n    \tat com.spring.main.TextEditorMain.main(TextEditorMain.java:15)\r\n\r\nBean id and reference name both are same `spellChecker1` but still not working. But the strange thing is if I change the bean id in xml from `spellChecker1`  to `spellChecker` the code is working and giving below o/p,\r\n\r\n    Inside SpellChecker constructor.\r\n     TextEditor name is text1\r\n    Inside checkSpelling.\r\n\r\nSo why dependency is not added when I am using `spellChecker1` ?\r\n\r\n","title":"Spring autowire byName not working as expected","body":"<p>Spring autowire byName not working as expected.</p>\n\n<pre><code>public class SpellChecker {\n    public SpellChecker() {\n        System.out.println(\"Inside SpellChecker constructor.\" );\n    }\n\n    public void checkSpelling() {\n        System.out.println(\"Inside checkSpelling.\" );\n    }\n}\n\npublic class TextEditor {\n\n       private SpellChecker spellChecker1;\n       private String name;\n\n       public void setSpellChecker( SpellChecker spellChecker1 ){\n          this.spellChecker1 = spellChecker1;\n       }\n       public SpellChecker getSpellChecker() {\n          return spellChecker1;\n       }\n       public void setName(String name) {\n          this.name = name;\n       }\n       public String getName() {\n          return name;\n       }\n\n   public void spellCheck() {\n       System.out.println(\" TextEditor name is \" +name);\n      spellChecker1.checkSpelling();\n   }\n}\n\npublic class TextEditorMain {\n\n    public static void main(String args[]) throws InterruptedException{\n\n        ApplicationContext context = new \n        ClassPathXmlApplicationContext(\"Beans.xml\"); \n        TextEditor tEditor = (TextEditor) context.getBean(\"textEditor\");\n        tEditor.spellCheck();   \n    }\n}\n</code></pre>\n\n<p>Spring beans configuration:</p>\n\n<pre><code>&lt;bean id = \"spellChecker1\" class = \"com.spring.beans.SpellChecker\"&gt;\n&lt;/bean&gt;\n\n&lt;bean id = \"textEditor\" class = \"com.spring.beans.TextEditor\" autowire=\"byName\"&gt;\n   &lt;property name = \"name\" value = \"text1\"/&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>When I give <code>spellChecker1</code> as bean id it is not working. Below are the console o/p,</p>\n\n<pre><code>Inside SpellChecker constructor.\n TextEditor name is text1\nException in thread \"main\" java.lang.NullPointerException\n    at com.spring.beans.TextEditor.spellCheck(TextEditor.java:26)\n    at com.spring.main.TextEditorMain.main(TextEditorMain.java:15)\n</code></pre>\n\n<p>Bean id and reference name both are same <code>spellChecker1</code> but still not working. But the strange thing is if I change the bean id in xml from <code>spellChecker1</code>  to <code>spellChecker</code> the code is working and giving below o/p,</p>\n\n<pre><code>Inside SpellChecker constructor.\n TextEditor name is text1\nInside checkSpelling.\n</code></pre>\n\n<p>So why dependency is not added when I am using <code>spellChecker1</code> ?</p>\n"},{"tags":["java","selenium"],"answers":[{"tags":[],"owner":{"account_id":22347399,"reputation":1,"user_id":16566149,"display_name":"AiMnj"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1627719798,"creation_date":1627719798,"answer_id":68600416,"question_id":53427069,"body_markdown":"I had the same issue. I fixed it by checking if the dependencies are added properly. It wasn&#39;t selected before applying it. Simple mistake.","title":"Selenium: &#39;package org.openqa.selenium does not exist&#39;","body":"<p>I had the same issue. I fixed it by checking if the dependencies are added properly. It wasn't selected before applying it. Simple mistake.</p>\n"},{"tags":[],"owner":{"account_id":15647552,"reputation":23,"user_id":11289447,"display_name":"Rakesh A"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1643699095,"creation_date":1643294976,"answer_id":70880617,"question_id":53427069,"body_markdown":"If ur using intellijIdea add this in dependencies in build.gradle file\r\n\r\n    implementation group: &#39;org.seleniumhq.selenium&#39;, name: &#39;selenium-java&#39;, version: &#39;4.1.1&#39;\r\n\r\nI have added as testimplementation group so got error , it should be implementation group to add all jars","title":"Selenium: &#39;package org.openqa.selenium does not exist&#39;","body":"<p>If ur using intellijIdea add this in dependencies in build.gradle file</p>\n<pre><code>implementation group: 'org.seleniumhq.selenium', name: 'selenium-java', version: '4.1.1'\n</code></pre>\n<p>I have added as testimplementation group so got error , it should be implementation group to add all jars</p>\n"},{"tags":[],"owner":{"account_id":14072929,"reputation":1,"user_id":10165996,"display_name":"Dave O."},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1668095313,"creation_date":1668095313,"answer_id":74391764,"question_id":53427069,"body_markdown":"In my case the error was that I had imported the project in IntelliJ as an Eclipse project instead of a Maven project.\r\nThen it worked fine.","title":"Selenium: &#39;package org.openqa.selenium does not exist&#39;","body":"<p>In my case the error was that I had imported the project in IntelliJ as an Eclipse project instead of a Maven project.\nThen it worked fine.</p>\n"}],"owner":{"account_id":10015693,"reputation":63,"user_id":7407080,"display_name":"at-bernard"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":23572,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":3,"score":5,"last_activity_date":1681200250,"creation_date":1542876841,"question_id":53427069,"body_markdown":"![Terminal: Error message][1]\r\n\r\n![Eclipse IDE: Program set-up][2]\r\n\r\n  [1]: https://i.stack.imgur.com/MDmgZ.png\r\n  [2]: https://i.stack.imgur.com/h6um5.png\r\n\r\nReceiving two (2) error messages: \r\n\r\n    package org.openqa.selenium does not exist\r\n    package org.openqa.selenium.chrome does not exist\r\n\r\nHere&#39;s what my program looks like: **MyClass.java**\r\n\r\n    package newPackage;\r\n    \r\n    import org.openqa.selenium.WebDriver;\r\n    import org.openqa.selenium.chrome.ChromeDriver;\r\n    \r\n    public class MyClass {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tSystem.setProperty(&quot;webdriver.chrome.driver&quot;,\r\n    \t\t\t\t&quot;/Users/Informatics/Downloads/chromedriver.exe&quot;);\r\n    \t\t\r\n    \t\tWebDriver driver = new ChromeDriver();\r\n    \t\tdriver.get(&quot;google.com&quot;);\r\n    \t\t\r\n    \t\tdriver.close();\r\n    \t}\r\n    }\r\n\r\np.s. I&#39;m using the newest versions of Eclipse, Selenium, Chrome and Java.","title":"Selenium: &#39;package org.openqa.selenium does not exist&#39;","body":"<p><img src=\"https://i.stack.imgur.com/MDmgZ.png\" alt=\"Terminal: Error message\"></p>\n\n<p><img src=\"https://i.stack.imgur.com/h6um5.png\" alt=\"Eclipse IDE: Program set-up\"></p>\n\n<p>Receiving two (2) error messages: </p>\n\n<pre><code>package org.openqa.selenium does not exist\npackage org.openqa.selenium.chrome does not exist\n</code></pre>\n\n<p>Here's what my program looks like: <strong>MyClass.java</strong></p>\n\n<pre><code>package newPackage;\n\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.chrome.ChromeDriver;\n\npublic class MyClass {\n\n    public static void main(String[] args) {\n        System.setProperty(\"webdriver.chrome.driver\",\n                \"/Users/Informatics/Downloads/chromedriver.exe\");\n\n        WebDriver driver = new ChromeDriver();\n        driver.get(\"google.com\");\n\n        driver.close();\n    }\n}\n</code></pre>\n\n<p>p.s. I'm using the newest versions of Eclipse, Selenium, Chrome and Java.</p>\n"},{"tags":["java","eclipse","jakarta-ee","servlets","war"],"comments":[{"owner":{"account_id":1879878,"reputation":24286,"user_id":1700321,"display_name":"Aleksandr M"},"score":0,"creation_date":1376675086,"post_id":18278602,"comment_id":26813695,"body_markdown":"Which IDE are you using? Try to generate war file from it. Also see http://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html.","body":"Which IDE are you using? Try to generate war file from it. Also see <a href=\"http://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html\" rel=\"nofollow noreferrer\">maven.apache.org/guides/introduction/&hellip;</a>."},{"owner":{"account_id":426537,"reputation":9134,"user_id":807797,"accept_rate":72,"display_name":"CodeMed"},"score":0,"creation_date":1376675457,"post_id":18278602,"comment_id":26813900,"body_markdown":"@AleksandrM Thank you.  I am using eclipse. I tried generating war files from it, but was getting 404 and 500 errors.  So I am going deeper to try to understand how it works.  The link you sent will not load in my browser.","body":"@AleksandrM Thank you.  I am using eclipse. I tried generating war files from it, but was getting 404 and 500 errors.  So I am going deeper to try to understand how it works.  The link you sent will not load in my browser."},{"owner":{"account_id":1879878,"reputation":24286,"user_id":1700321,"display_name":"Aleksandr M"},"score":0,"creation_date":1376675695,"post_id":18278602,"comment_id":26814020,"body_markdown":"If you are not using maven then create Dynamic Web Project in eclipse.","body":"If you are not using maven then create Dynamic Web Project in eclipse."},{"owner":{"account_id":426537,"reputation":9134,"user_id":807797,"accept_rate":72,"display_name":"CodeMed"},"score":0,"creation_date":1376675961,"post_id":18278602,"comment_id":26814143,"body_markdown":"@AleksandrM I have a dynamic web project in eclipse.  I am wondering if my 404 and 500 errors might be the result of not manually including the JRE System Library jars in the dist/WEB_INF/lib folder?","body":"@AleksandrM I have a dynamic web project in eclipse.  I am wondering if my 404 and 500 errors might be the result of not manually including the JRE System Library jars in the dist/WEB_INF/lib folder?"},{"owner":{"account_id":1879878,"reputation":24286,"user_id":1700321,"display_name":"Aleksandr M"},"score":0,"creation_date":1376676545,"post_id":18278602,"comment_id":26814414,"body_markdown":"It is hard to tell w/o more info.","body":"It is hard to tell w/o more info."},{"owner":{"account_id":3049880,"reputation":3589,"user_id":2584700,"accept_rate":100,"display_name":"Sachin Thapa"},"score":0,"creation_date":1376676928,"post_id":18278602,"comment_id":26814616,"body_markdown":"Create a subfolder for images `dist/images`, jsp&#39;s should be `/dist/views/`, all other xmls should be in `WEB-INF`.","body":"Create a subfolder for images <code>dist&#47;images</code>, jsp&#39;s should be <code>&#47;dist&#47;views&#47;</code>, all other xmls should be in <code>WEB-INF</code>."},{"owner":{"account_id":426537,"reputation":9134,"user_id":807797,"accept_rate":72,"display_name":"CodeMed"},"score":0,"creation_date":1376677556,"post_id":18278602,"comment_id":26814889,"body_markdown":"@SachinThapa My servlet classes control all access to my JSP files, and each servlet instantiates its own JSP with the syntax RequestDispatcher jsp = context.getRequestDispatcher(&quot;/WEB-INF/jsp/home.jsp&quot;); All access to site content is through urls defined by web.xml&#39;s servlet mapping.  Does this change your recommendation regarding the location of the JSP files?","body":"@SachinThapa My servlet classes control all access to my JSP files, and each servlet instantiates its own JSP with the syntax RequestDispatcher jsp = context.getRequestDispatcher(&quot;/WEB-INF/jsp/home.jsp&quot;); All access to site content is through urls defined by web.xml&#39;s servlet mapping.  Does this change your recommendation regarding the location of the JSP files?"},{"owner":{"account_id":426537,"reputation":9134,"user_id":807797,"accept_rate":72,"display_name":"CodeMed"},"score":0,"creation_date":1376677784,"post_id":18278602,"comment_id":26814993,"body_markdown":"@AleksandrM I put a little more information about the location mapping for the JSP files in an edit to my original posting above.  Does this change your recommendation regarding where to place the JSP files?","body":"@AleksandrM I put a little more information about the location mapping for the JSP files in an edit to my original posting above.  Does this change your recommendation regarding where to place the JSP files?"},{"owner":{"account_id":3049880,"reputation":3589,"user_id":2584700,"accept_rate":100,"display_name":"Sachin Thapa"},"score":0,"creation_date":1376678417,"post_id":18278602,"comment_id":26815286,"body_markdown":"@CodeMed, I am not sure if you can change this code to `RequestDispatcher jsp = context.getRequestDispatcher(&quot;/views/jsp/home.jsp&quot;);`, infact i would create subfolders for various kind of views. WEB-INF is considered as restricted/private if your JSP pages are for public access(browser) they should be outside.","body":"@CodeMed, I am not sure if you can change this code to <code>RequestDispatcher jsp = context.getRequestDispatcher(&quot;&#47;views&#47;jsp&#47;home.jsp&quot;);</code>, infact i would create subfolders for various kind of views. WEB-INF is considered as restricted/private if your JSP pages are for public access(browser) they should be outside."},{"owner":{"account_id":426537,"reputation":9134,"user_id":807797,"accept_rate":72,"display_name":"CodeMed"},"score":0,"creation_date":1376680613,"post_id":18278602,"comment_id":26816336,"body_markdown":"@SachinThapa It works now.  Thanks.  I was able to keep the jsp folder in WEB-INF.  In fact, it did not work when I moved them to a views folder.  I think the issue is that the web container is accessing the jsp files.  No end user will have access to the jsp files.  They are simply used as request dispatcher objects by the servlets.","body":"@SachinThapa It works now.  Thanks.  I was able to keep the jsp folder in WEB-INF.  In fact, it did not work when I moved them to a views folder.  I think the issue is that the web container is accessing the jsp files.  No end user will have access to the jsp files.  They are simply used as request dispatcher objects by the servlets."},{"owner":{"account_id":3049880,"reputation":3589,"user_id":2584700,"accept_rate":100,"display_name":"Sachin Thapa"},"score":0,"creation_date":1376681313,"post_id":18278602,"comment_id":26816696,"body_markdown":"@CodeMed good to hear it worked for you.","body":"@CodeMed good to hear it worked for you."},{"owner":{"account_id":297024,"reputation":25001,"user_id":602323,"accept_rate":80,"display_name":"Kevin"},"score":0,"creation_date":1376686804,"post_id":18278602,"comment_id":26819267,"body_markdown":"you should seriously consider maven+springframework.","body":"you should seriously consider maven+springframework."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1376750337,"post_id":18278602,"comment_id":26833035,"body_markdown":"If you are writing an Ant build file by hand, you should be aware that you can embed &lt;fileset&gt; elements (and other resource collections) directly in the &lt;war&gt; element.  There is no need to create a separate `dist` directory.  Copying all those files an extra time just to add them to a .war will noticeably increase your build time.","body":"If you are writing an Ant build file by hand, you should be aware that you can embed &lt;fileset&gt; elements (and other resource collections) directly in the &lt;war&gt; element.  There is no need to create a separate <code>dist</code> directory.  Copying all those files an extra time just to add them to a .war will noticeably increase your build time."}],"answers":[{"comments":[{"owner":{"account_id":426537,"reputation":9134,"user_id":807797,"accept_rate":72,"display_name":"CodeMed"},"score":0,"creation_date":1376680687,"post_id":18279465,"comment_id":26816379,"body_markdown":"Thank you.  +1 for trying to help.  And credit for the answer, since you were the only one in the form of an answer, and you more or less answered my questions, along with some help from the commenters above.","body":"Thank you.  +1 for trying to help.  And credit for the answer, since you were the only one in the form of an answer, and you more or less answered my questions, along with some help from the commenters above."},{"owner":{"account_id":1197669,"reputation":1004,"user_id":1169042,"accept_rate":64,"display_name":"marc82ch"},"score":0,"creation_date":1388854839,"post_id":18279465,"comment_id":31415564,"body_markdown":"5.) there&#39;s no point in making JSP files public, in fact that could show an attacker valuable information, so keeping them IN WEB-INF is a good idea.","body":"5.) there&#39;s no point in making JSP files public, in fact that could show an attacker valuable information, so keeping them IN WEB-INF is a good idea."}],"tags":[],"owner":{"account_id":1544917,"reputation":5387,"user_id":1438660,"accept_rate":73,"display_name":"splungebob"},"comment_count":2,"down_vote_count":1,"up_vote_count":3,"is_accepted":true,"score":2,"last_activity_date":1376676030,"creation_date":1376676030,"answer_id":18279465,"question_id":18278602,"body_markdown":"I&#39;ll do my best:\r\n\r\n**1.) should I include .java files in dist/WEB-INF/classes/... or just put .class files there?**\r\n\r\nYou should only need .class files here.\r\n\r\n**2.) should I add JRE System Library jars into dist/WEB-INF/lib?**\r\n\r\nShouldn&#39;t be needed.\r\n\r\n**3.) is web.xml in the right place?**\r\n\r\nLooks good.\r\n\r\n**4.) should my .gif files stay in the root directory?**\r\n\r\nAlthough not necessary, I&#39;d prefer an &quot;image.jar&quot; (or &quot;resource.jar&quot;, or whatever) to keep things tidy.\r\n\r\n**5.) are my .jsp files in the right place?**\r\n\r\nNot sure, but I think the jsp directory would typically be up one level, out of `WEB-INF` and directly in your `dist` folder.\r\n\r\n\r\n**6.) where does myapp.xml go?**\r\n\r\nI don&#39;t know what this is, so I couldn&#39;t say.\r\n\r\n\r\n","title":"Planning structure for a WAR file","body":"<p>I'll do my best:</p>\n\n<p><strong>1.) should I include .java files in dist/WEB-INF/classes/... or just put .class files there?</strong></p>\n\n<p>You should only need .class files here.</p>\n\n<p><strong>2.) should I add JRE System Library jars into dist/WEB-INF/lib?</strong></p>\n\n<p>Shouldn't be needed.</p>\n\n<p><strong>3.) is web.xml in the right place?</strong></p>\n\n<p>Looks good.</p>\n\n<p><strong>4.) should my .gif files stay in the root directory?</strong></p>\n\n<p>Although not necessary, I'd prefer an \"image.jar\" (or \"resource.jar\", or whatever) to keep things tidy.</p>\n\n<p><strong>5.) are my .jsp files in the right place?</strong></p>\n\n<p>Not sure, but I think the jsp directory would typically be up one level, out of <code>WEB-INF</code> and directly in your <code>dist</code> folder.</p>\n\n<p><strong>6.) where does myapp.xml go?</strong></p>\n\n<p>I don't know what this is, so I couldn't say.</p>\n"},{"tags":[],"owner":{"account_id":1216539,"reputation":938,"user_id":1184021,"display_name":"Stan Lin"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1422776660,"creation_date":1422776660,"answer_id":28260594,"question_id":18278602,"body_markdown":"Look here for a good explanation:\r\n\r\nhttp://www.openscope.net/2010/01/25/war-deployment-file-structure/\r\n\r\nSpecifically, only .class files go in the /classes directory, and only .jars go into the /lib directory. Beyond those and web.xml, everything else (i.e. non java stuff like html, css, js, other files) can be put in the root directory and will be accessible at the root URL of your app URL that is deployed.","title":"Planning structure for a WAR file","body":"<p>Look here for a good explanation:</p>\n\n<p><a href=\"http://www.openscope.net/2010/01/25/war-deployment-file-structure/\" rel=\"nofollow\">http://www.openscope.net/2010/01/25/war-deployment-file-structure/</a></p>\n\n<p>Specifically, only .class files go in the /classes directory, and only .jars go into the /lib directory. Beyond those and web.xml, everything else (i.e. non java stuff like html, css, js, other files) can be put in the root directory and will be accessible at the root URL of your app URL that is deployed.</p>\n"}],"owner":{"account_id":426537,"reputation":9134,"user_id":807797,"accept_rate":72,"display_name":"CodeMed"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11004,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":18279465,"answer_count":2,"score":2,"last_activity_date":1681200135,"creation_date":1376672550,"question_id":18278602,"body_markdown":"I am creating my first WAR file.  I have been experimenting with ant buildfile syntax, and the first part of my buildfile takes content from my Eclipse project and places it into a `/dist` folder, which will then be zipped up into a WAR file in subsequent steps.  \r\n  \r\nI would like to structure the output so that the WAR file has all the required contents in the right places for execution by Tomcat 7 server.\r\n\r\nThe current draft of my buildfile generates a dist folder with the following structure:\r\n\r\n    dist/META-INF/MANIFEST.MF  \r\n    dist/WEB-INF/classes/myapp/package1/ (contains 12 .class files)  \r\n    dist/WEB-INF/classes/myapp/package2/ (contains 7 .class files)  \r\n    dist/WEB-INF/jsp (contains 5 .jsp files)  \r\n    dist/WEB-INF/lib (contains 16 .jar files)  \r\n    dist/WEB-INF/web.xml  \r\n    dist/image1.gif  \r\n    dist/image2.gif  \r\n    dist/image3.gif  \r\n    dist/image4.gif \r\n \r\n  \r\nHow do I need to change the structure so that the resulting WAR file can be used by Tomcat 7 server to serve up my web application to end users?  \r\n  \r\nSpecifically:\r\n\r\n1.) should I include .java files in `dist/WEB-INF/classes/...` or just put .class files there?  \r\n2.) should I add JRE System Library JARs into `dist/WEB-INF/lib`?  These System JARs are in my Eclipse workspace, but I do not know if I need them in the WAR file.  \r\n3.) is `web.xml` in the right place?  \r\n4.) should my .gif files stay in the root directory?  \r\n5.) are my .jsp files in the right place?  \r\n6.) where does `myapp.xml` go?  `myapp.xml` is in the root directory of my Eclipse workspace, and seems essential when loading myapp into my localhost instance of Tomcat server.  Is `myapp.xml` required in a WAR file?  Or does the structure of the WAR file do the things that `myapp.xml` would otherwise do?  \r\n  \r\nPlease note that my servlet classes control all access to my JSP files, and each servlet instantiates its own JSP with the syntax:  \r\n  \r\n    RequestDispatcher jsp = context.getRequestDispatcher(&quot;/WEB-INF/jsp/home.jsp&quot;);  \r\n  \r\nAll access to site content is through URLs defined by web.xml&#39;s servlet mapping.  \r\n   \r\nI am trying to learn this first one correctly so that I can make subsequent WAR files well the first time.\r\n","title":"Planning structure for a WAR file","body":"<p>I am creating my first WAR file.  I have been experimenting with ant buildfile syntax, and the first part of my buildfile takes content from my Eclipse project and places it into a <code>/dist</code> folder, which will then be zipped up into a WAR file in subsequent steps.</p>\n<p>I would like to structure the output so that the WAR file has all the required contents in the right places for execution by Tomcat 7 server.</p>\n<p>The current draft of my buildfile generates a dist folder with the following structure:</p>\n<pre><code>dist/META-INF/MANIFEST.MF  \ndist/WEB-INF/classes/myapp/package1/ (contains 12 .class files)  \ndist/WEB-INF/classes/myapp/package2/ (contains 7 .class files)  \ndist/WEB-INF/jsp (contains 5 .jsp files)  \ndist/WEB-INF/lib (contains 16 .jar files)  \ndist/WEB-INF/web.xml  \ndist/image1.gif  \ndist/image2.gif  \ndist/image3.gif  \ndist/image4.gif \n</code></pre>\n<p>How do I need to change the structure so that the resulting WAR file can be used by Tomcat 7 server to serve up my web application to end users?</p>\n<p>Specifically:</p>\n<p>1.) should I include .java files in <code>dist/WEB-INF/classes/...</code> or just put .class files there?<br />\n2.) should I add JRE System Library JARs into <code>dist/WEB-INF/lib</code>?  These System JARs are in my Eclipse workspace, but I do not know if I need them in the WAR file.<br />\n3.) is <code>web.xml</code> in the right place?<br />\n4.) should my .gif files stay in the root directory?<br />\n5.) are my .jsp files in the right place?<br />\n6.) where does <code>myapp.xml</code> go?  <code>myapp.xml</code> is in the root directory of my Eclipse workspace, and seems essential when loading myapp into my localhost instance of Tomcat server.  Is <code>myapp.xml</code> required in a WAR file?  Or does the structure of the WAR file do the things that <code>myapp.xml</code> would otherwise do?</p>\n<p>Please note that my servlet classes control all access to my JSP files, and each servlet instantiates its own JSP with the syntax:</p>\n<pre><code>RequestDispatcher jsp = context.getRequestDispatcher(&quot;/WEB-INF/jsp/home.jsp&quot;);  \n</code></pre>\n<p>All access to site content is through URLs defined by web.xml's servlet mapping.</p>\n<p>I am trying to learn this first one correctly so that I can make subsequent WAR files well the first time.</p>\n"},{"tags":["java","string"],"comments":[{"owner":{"account_id":1075496,"reputation":22388,"user_id":1073758,"accept_rate":75,"display_name":"moonwave99"},"score":4,"creation_date":1375282968,"post_id":17973964,"comment_id":26274341,"body_markdown":"`st.replace(&quot; &quot;,&quot;&quot;)`is your friend.","body":"<code>st.replace(&quot; &quot;,&quot;&quot;)</code>is your friend."},{"owner":{"account_id":368447,"reputation":24110,"user_id":715269,"accept_rate":60,"display_name":"Gangnus"},"score":1,"creation_date":1558807645,"post_id":17973964,"comment_id":99225411,"body_markdown":"You have a wrong name of the question. According to your example, you need not ignore spaces, but take any number of consequent spaces as equivalent. Or you&#39;ll have equivalent &quot;VIJAY    KAKADE&quot; and &quot;VIJAYKAKADE&quot;, too.","body":"You have a wrong name of the question. According to your example, you need not ignore spaces, but take any number of consequent spaces as equivalent. Or you&#39;ll have equivalent &quot;VIJAY    KAKADE&quot; and &quot;VIJAYKAKADE&quot;, too."}],"answers":[{"comments":[{"owner":{"account_id":484452,"reputation":21496,"user_id":900130,"accept_rate":65,"display_name":"Zolt&#225;n"},"score":3,"creation_date":1386152603,"post_id":17974010,"comment_id":30415748,"body_markdown":"What if `a = &quot;ANN MARIE&quot;` and `b = &quot;ANNMARIE&quot;`? They&#39;re not the same name, but this solution will evaluate them so. Please consider my answer below.","body":"What if <code>a = &quot;ANN MARIE&quot;</code> and <code>b = &quot;ANNMARIE&quot;</code>? They&#39;re not the same name, but this solution will evaluate them so. Please consider my answer below."}],"tags":[],"owner":{"account_id":1853886,"reputation":210617,"user_id":1679863,"accept_rate":77,"display_name":"Rohit Jain"},"comment_count":1,"down_vote_count":2,"up_vote_count":14,"is_accepted":false,"score":12,"last_activity_date":1375282922,"creation_date":1375282922,"answer_id":17974010,"question_id":17973964,"body_markdown":"Replace the spaces with empty string:\r\n\r\n    if (a.replace(&quot; &quot;, &quot;&quot;).equalsIgnoreCase(b.replace(&quot; &quot;, &quot;&quot;)))","title":"How to compare two Strings in java without considering spaces?","body":"<p>Replace the spaces with empty string:</p>\n\n<pre><code>if (a.replace(\" \", \"\").equalsIgnoreCase(b.replace(\" \", \"\")))\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1853886,"reputation":210617,"user_id":1679863,"accept_rate":77,"display_name":"Rohit Jain"},"score":0,"creation_date":1375282993,"post_id":17974027,"comment_id":26274350,"body_markdown":"No need of `replaceAll()`. `replace()` will do well.","body":"No need of <code>replaceAll()</code>. <code>replace()</code> will do well."},{"owner":{"account_id":1435980,"reputation":127999,"user_id":1357341,"accept_rate":100,"display_name":"arshajii"},"score":0,"creation_date":1375283076,"post_id":17974027,"comment_id":26274415,"body_markdown":"`replace` doesn&#39;t take a regular expression.","body":"<code>replace</code> doesn&#39;t take a regular expression."},{"owner":{"account_id":262968,"reputation":767160,"user_id":548225,"accept_rate":90,"display_name":"anubhava"},"score":0,"creation_date":1375283103,"post_id":17974027,"comment_id":26274435,"body_markdown":"Your earlier code was atleast a working code, `\\\\s+` won&#39;t work with `String#replace`","body":"Your earlier code was atleast a working code, <code>\\\\s+</code> won&#39;t work with <code>String#replace</code>"},{"owner":{"account_id":482279,"reputation":7803,"user_id":896588,"accept_rate":85,"display_name":"Andr&#233; Stannek"},"score":3,"creation_date":1375283106,"post_id":17974027,"comment_id":26274438,"body_markdown":"@RohitJain wrong! Either you use `replace()` with a char sequence (`&quot; &quot;`) or `replaceAll()` with a regex like in this answer.","body":"@RohitJain wrong! Either you use <code>replace()</code> with a char sequence (<code>&quot; &quot;</code>) or <code>replaceAll()</code> with a regex like in this answer."},{"owner":{"account_id":1853886,"reputation":210617,"user_id":1679863,"accept_rate":77,"display_name":"Rohit Jain"},"score":0,"creation_date":1375283167,"post_id":17974027,"comment_id":26274486,"body_markdown":"@stonedsquirrel. Well, I never said to use `replace` with regex. When I said we don&#39;t need `replaceAll`, I really meant, we don&#39;t need a regex here.","body":"@stonedsquirrel. Well, I never said to use <code>replace</code> with regex. When I said we don&#39;t need <code>replaceAll</code>, I really meant, we don&#39;t need a regex here."},{"owner":{"account_id":1435980,"reputation":127999,"user_id":1357341,"accept_rate":100,"display_name":"arshajii"},"score":1,"creation_date":1375283168,"post_id":17974027,"comment_id":26274490,"body_markdown":"@stonedsquirrel When he said use `replace`, he presumably meant that the arguments should change as well.","body":"@stonedsquirrel When he said use <code>replace</code>, he presumably meant that the arguments should change as well."},{"owner":{"account_id":482279,"reputation":7803,"user_id":896588,"accept_rate":85,"display_name":"Andr&#233; Stannek"},"score":0,"creation_date":1375283226,"post_id":17974027,"comment_id":26274529,"body_markdown":"@RohitJain alright, you should have written that in the first place ;-)","body":"@RohitJain alright, you should have written that in the first place ;-)"},{"owner":{"account_id":262968,"reputation":767160,"user_id":548225,"accept_rate":90,"display_name":"anubhava"},"score":0,"creation_date":1375283320,"post_id":17974027,"comment_id":26274607,"body_markdown":"A regex will not be a bad solution if there are long contiguous spaces in the string which will be replaced in a single pass using `replaceAll(&quot; +&quot;,&quot;&quot;)`","body":"A regex will not be a bad solution if there are long contiguous spaces in the string which will be replaced in a single pass using <code>replaceAll(&quot; +&quot;,&quot;&quot;)</code>"},{"owner":{"account_id":2073596,"reputation":2693,"user_id":1847560,"accept_rate":40,"display_name":"vijayk"},"score":0,"creation_date":1375283553,"post_id":17974027,"comment_id":26274771,"body_markdown":"thanks @The New Idiot.it&#39;s working..@Rohit Jain .by using replace is not working.","body":"thanks @The New Idiot.it&#39;s working..@Rohit Jain .by using replace is not working."},{"owner":{"account_id":1853886,"reputation":210617,"user_id":1679863,"accept_rate":77,"display_name":"Rohit Jain"},"score":0,"creation_date":1375284959,"post_id":17974027,"comment_id":26275786,"body_markdown":"@vijayk. I won&#39;t buy that. That will certainly work given your input string. Ah! If you have tabs somewhere instead of spaces, then it won&#39;t work. But that you should have told in question. With tab, you would need regex.","body":"@vijayk. I won&#39;t buy that. That will certainly work given your input string. Ah! If you have tabs somewhere instead of spaces, then it won&#39;t work. But that you should have told in question. With tab, you would need regex."}],"tags":[],"owner":{"account_id":1190755,"reputation":48912,"user_id":1163607,"accept_rate":97,"display_name":"AllTooSir"},"comment_count":10,"down_vote_count":1,"up_vote_count":41,"is_accepted":true,"score":40,"last_activity_date":1375283371,"creation_date":1375282964,"answer_id":17974027,"question_id":17973964,"body_markdown":"You can try to create a new string by replacing all empty spaces.\r\n\r\n    if(a.replaceAll(&quot;\\\\s+&quot;,&quot;&quot;).equalsIgnoreCase(b.replaceAll(&quot;\\\\s+&quot;,&quot;&quot;))) {\r\n       // this will also take care of spaces like tabs etc.\r\n    }\r\n\r\nthen compare.","title":"How to compare two Strings in java without considering spaces?","body":"<p>You can try to create a new string by replacing all empty spaces.</p>\n\n<pre><code>if(a.replaceAll(\"\\\\s+\",\"\").equalsIgnoreCase(b.replaceAll(\"\\\\s+\",\"\"))) {\n   // this will also take care of spaces like tabs etc.\n}\n</code></pre>\n\n<p>then compare.</p>\n"},{"tags":[],"owner":{"account_id":69443,"reputation":85343,"user_id":202009,"accept_rate":79,"display_name":"Andy Thomas"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1375283019,"creation_date":1375283019,"answer_id":17974042,"question_id":17973964,"body_markdown":"You can use [String.replace()][1] to remove the spaces in both strings.\r\n\r\n      String aMod = a.replace(&quot; &quot;,&quot;&quot;);\r\n      String bMod = b.replace(&quot; &quot;,&quot;&quot;);\r\n      if( aMod.equalsIgnoreCase(bMod) ){\r\n         ... \r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replace%28java.lang.CharSequence,%20java.lang.CharSequence%29","title":"How to compare two Strings in java without considering spaces?","body":"<p>You can use <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replace%28java.lang.CharSequence,%20java.lang.CharSequence%29\" rel=\"nofollow\">String.replace()</a> to remove the spaces in both strings.</p>\n\n<pre><code>  String aMod = a.replace(\" \",\"\");\n  String bMod = b.replace(\" \",\"\");\n  if( aMod.equalsIgnoreCase(bMod) ){\n     ... \n</code></pre>\n"},{"comments":[{"owner":{"account_id":368447,"reputation":24110,"user_id":715269,"accept_rate":60,"display_name":"Gangnus"},"score":0,"creation_date":1558807428,"post_id":17974063,"comment_id":99225340,"body_markdown":"But here you have equal to &quot;VIJAY KAKADE&quot; also &quot;VIJAYKAKADE&quot;, which is not what the OP wants.","body":"But here you have equal to &quot;VIJAY KAKADE&quot; also &quot;VIJAYKAKADE&quot;, which is not what the OP wants."}],"tags":[],"owner":{"account_id":1914874,"reputation":13438,"user_id":1727645,"accept_rate":81,"display_name":"Prasad Kharkar"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1375283080,"creation_date":1375283080,"answer_id":17974063,"question_id":17973964,"body_markdown":"[String#replace()][1] method is helpful for you.\r\n\r\n    public static void main(String[] args) {\r\n        String a=&quot;VIJAY KAKADE&quot;;\r\n        String b=&quot;VIJAY    KAKADE&quot;;\r\n        a = a.replace(&quot; &quot;, &quot;&quot;);\r\n        b = b.replace(&quot; &quot;, &quot;&quot;);\r\n        if(a.equalsIgnoreCase(b)){\r\n            System.out.println(&quot;yes&quot;);\r\n        }else{\r\n            System.out.println(&quot;no&quot;);\r\n        }\r\n    }\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/api/java/lang/String.html","title":"How to compare two Strings in java without considering spaces?","body":"<p><a href=\"http://docs.oracle.com/javase/6/docs/api/java/lang/String.html\" rel=\"nofollow\">String#replace()</a> method is helpful for you.</p>\n\n<pre><code>public static void main(String[] args) {\n    String a=\"VIJAY KAKADE\";\n    String b=\"VIJAY    KAKADE\";\n    a = a.replace(\" \", \"\");\n    b = b.replace(\" \", \"\");\n    if(a.equalsIgnoreCase(b)){\n        System.out.println(\"yes\");\n    }else{\n        System.out.println(\"no\");\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2181618,"reputation":239,"user_id":1930965,"accept_rate":69,"display_name":"Milo Hou"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1375283276,"creation_date":1375283276,"answer_id":17974128,"question_id":17973964,"body_markdown":"if you want to replace all whitespace, including tabs etc, you can use\r\n\r\n    a = yourOriginalString.replaceAll(&quot;\\\\s&quot;, &quot;&quot;);\r\n    b = yourOriginalString.replaceAll(&quot;\\\\s&quot;, &quot;&quot;);\r\n    return a.equalsIgnoreCase(b);\r\n\r\nedit: woah ninja&#39;d like heck","title":"How to compare two Strings in java without considering spaces?","body":"<p>if you want to replace all whitespace, including tabs etc, you can use</p>\n\n<pre><code>a = yourOriginalString.replaceAll(\"\\\\s\", \"\");\nb = yourOriginalString.replaceAll(\"\\\\s\", \"\");\nreturn a.equalsIgnoreCase(b);\n</code></pre>\n\n<p>edit: woah ninja'd like heck</p>\n"},{"tags":[],"owner":{"account_id":1088393,"reputation":1269,"user_id":1083581,"accept_rate":21,"display_name":"happybuddha"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1375283392,"creation_date":1375283392,"answer_id":17974167,"question_id":17973964,"body_markdown":"    a.replace(&quot; &quot;,&quot;&quot;)\r\n\r\nis your best bet. However you can use \r\n`a.trim()` \r\nto remove leading and trailing whitespaces if you know want to ignore only the leading and trailing whitespaces. Also the StringUtils from apache commons has many more functions to help","title":"How to compare two Strings in java without considering spaces?","body":"<pre><code>a.replace(\" \",\"\")\n</code></pre>\n\n<p>is your best bet. However you can use \n<code>a.trim()</code> \nto remove leading and trailing whitespaces if you know want to ignore only the leading and trailing whitespaces. Also the StringUtils from apache commons has many more functions to help</p>\n"},{"comments":[{"owner":{"account_id":1098359,"reputation":8264,"user_id":1091453,"display_name":"Cwt"},"score":1,"creation_date":1442149798,"post_id":20372433,"comment_id":52956037,"body_markdown":"I want to underline, that your answer is/was the only correct one. I added another way. It&#39;s interesting how all quick answer did not see that problem.","body":"I want to underline, that your answer is/was the only correct one. I added another way. It&#39;s interesting how all quick answer did not see that problem."},{"owner":{"account_id":69443,"reputation":85343,"user_id":202009,"accept_rate":79,"display_name":"Andy Thomas"},"score":0,"creation_date":1539353137,"post_id":20372433,"comment_id":92483890,"body_markdown":"@sevenforce - &quot;Only correct&quot; is a very strong phrase. Your assertion depends on reading more into the OP&#39;s intent than he or she explicitly stated.","body":"@sevenforce - &quot;Only correct&quot; is a very strong phrase. Your assertion depends on reading more into the OP&#39;s intent than he or she explicitly stated."}],"tags":[],"owner":{"account_id":484452,"reputation":21496,"user_id":900130,"accept_rate":65,"display_name":"Zolt&#225;n"},"comment_count":2,"down_vote_count":0,"up_vote_count":22,"is_accepted":false,"score":22,"last_activity_date":1386151874,"creation_date":1386151874,"answer_id":20372433,"question_id":17973964,"body_markdown":"I think replacing all spaces with an empty string poses the danger of verifying the following situation (finding the two names equal):\r\n\r\n    String a = &quot;ANN MARIE O&#39;RIORDAN&quot;\r\n    String b = &quot;ANNMARIE O&#39;RIORDAN&quot;\r\n\r\nI know I may be splitting hairs here, but I found this question while looking for a similar solution to verify SQL queries in a unit test. Because my queries are multi-line `static final Strings`, I wanted to make sure that I didn&#39;t miss a space anywhere.\r\n\r\nTo that end, I think replacing all whitespaces with a single space, or perhaps a special character is the safest solution - which then *does* require regex:\r\n\r\n    if (a.trim().replaceAll(&quot;\\\\s+&quot;, &quot; &quot;).equalsIgnoreCase(b.trim().replaceAll(&quot;\\\\s+&quot;, &quot; &quot;))) {\r\n        // Strings equivalent\r\n    }\r\n\r\nThoughts?","title":"How to compare two Strings in java without considering spaces?","body":"<p>I think replacing all spaces with an empty string poses the danger of verifying the following situation (finding the two names equal):</p>\n\n<pre><code>String a = \"ANN MARIE O'RIORDAN\"\nString b = \"ANNMARIE O'RIORDAN\"\n</code></pre>\n\n<p>I know I may be splitting hairs here, but I found this question while looking for a similar solution to verify SQL queries in a unit test. Because my queries are multi-line <code>static final Strings</code>, I wanted to make sure that I didn't miss a space anywhere.</p>\n\n<p>To that end, I think replacing all whitespaces with a single space, or perhaps a special character is the safest solution - which then <em>does</em> require regex:</p>\n\n<pre><code>if (a.trim().replaceAll(\"\\\\s+\", \" \").equalsIgnoreCase(b.trim().replaceAll(\"\\\\s+\", \" \"))) {\n    // Strings equivalent\n}\n</code></pre>\n\n<p>Thoughts?</p>\n"},{"tags":[],"owner":{"account_id":1098359,"reputation":8264,"user_id":1091453,"display_name":"Cwt"},"comment_count":0,"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1492234534,"creation_date":1442149545,"answer_id":32549971,"question_id":17973964,"body_markdown":"As Zoltan correctly pointing out, all answers besides his are in fact wrong.\r\n\r\nFor using the functionality from a third party library I suggest `hamcrest`:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    import static org.hamcrest.text.IsEqualIgnoringWhiteSpace.equalToIgnoringWhiteSpace;\r\n    \r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            String a = &quot;VIJAY KAKADE&quot;;\r\n            String b = &quot;VIJAY    KAKADE&quot;;\r\n            System.out.print(String.format(&quot;&#39;%s&#39; and &#39;%s&#39; matching: &quot;, a, b));\r\n            if (equalToIgnoringWhiteSpace(a).matches(b)) {\r\n                System.out.println(&quot;yes&quot;);\r\n            } else {\r\n                System.out.println(&quot;no&quot;);\r\n            }\r\n\r\n            String c = &quot;VIJAYKAKADE&quot;;\r\n            System.out.print(String.format(&quot;&#39;%s&#39; and &#39;%s&#39; matching: &quot;, a, c));\r\n            if (equalToIgnoringWhiteSpace(a).matches(c)) {\r\n                System.out.println(&quot;yes&quot;);\r\n            } else {\r\n                System.out.println(&quot;no&quot;);\r\n            }\r\n        }\r\n    }\r\n&lt;/pre&gt;\r\n\r\nreturns:\r\n    \r\n    &#39;VIJAY KAKADE&#39; and &#39;VIJAY    KAKADE&#39; matching: yes\r\n    &#39;VIJAY KAKADE&#39; and &#39;VIJAYKAKADE&#39; matching: no\r\n","title":"How to compare two Strings in java without considering spaces?","body":"<p>As Zoltan correctly pointing out, all answers besides his are in fact wrong.</p>\n\n<p>For using the functionality from a third party library I suggest <code>hamcrest</code>:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>import static org.hamcrest.text.IsEqualIgnoringWhiteSpace.equalToIgnoringWhiteSpace;\n\npublic class Main {\n    public static void main(String[] args) {\n        String a = \"VIJAY KAKADE\";\n        String b = \"VIJAY    KAKADE\";\n        System.out.print(String.format(\"'%s' and '%s' matching: \", a, b));\n        if (equalToIgnoringWhiteSpace(a).matches(b)) {\n            System.out.println(\"yes\");\n        } else {\n            System.out.println(\"no\");\n        }\n\n        String c = \"VIJAYKAKADE\";\n        System.out.print(String.format(\"'%s' and '%s' matching: \", a, c));\n        if (equalToIgnoringWhiteSpace(a).matches(c)) {\n            System.out.println(\"yes\");\n        } else {\n            System.out.println(\"no\");\n        }\n    }\n}\n</code></pre>\n\n<p></p>\n\n<p>returns:</p>\n\n<pre><code>'VIJAY KAKADE' and 'VIJAY    KAKADE' matching: yes\n'VIJAY KAKADE' and 'VIJAYKAKADE' matching: no\n</code></pre>\n"},{"comments":[{"owner":{"account_id":11039707,"reputation":990,"user_id":8108125,"accept_rate":82,"display_name":"Cpp plus 1"},"score":1,"creation_date":1517763099,"post_id":48610568,"comment_id":84217535,"body_markdown":"An explanation of what you did might help the questioner more.","body":"An explanation of what you did might help the questioner more."}],"tags":[],"owner":{"account_id":12876671,"reputation":11,"user_id":9313145,"display_name":"Kaustav Banerjee"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1517762812,"creation_date":1517762812,"answer_id":48610568,"question_id":17973964,"body_markdown":"\r\n    public static void main(String args[]) {\r\n        String a = &quot;My Name is A B&quot;;\r\n        String b = &quot;My Name is A    B&quot;;\r\n\r\n        System.out.println(&quot;Match = &quot; + equalsIgnoreSpace(a, b, false));\r\n    }\r\n    \r\n    static boolean equalsIgnoreSpace(String s1, String s2, boolean matchCase) {\r\n        \r\n       String val1 = stripExtraSpaces(s1);\r\n       String val2 = stripExtraSpaces(s2);\r\n       \r\n       if(matchCase) {\r\n           return val1.equals(val2);\r\n       } else {\r\n           return val1.equalsIgnoreCase(val2);\r\n       }\r\n    }\r\n    \r\n    static String stripExtraSpaces(String s) {\r\n        String formattedString = &quot;&quot;;\r\n        java.util.StringTokenizer st = new java.util.StringTokenizer(s);\r\n        \r\n        while(st.hasMoreTokens()) {\r\n            formattedString += st.nextToken() + &quot; &quot;;\r\n        }\r\n      \r\n        return formattedString.trim();\r\n    }\r\n\r\n","title":"How to compare two Strings in java without considering spaces?","body":"<pre><code>public static void main(String args[]) {\n    String a = \"My Name is A B\";\n    String b = \"My Name is A    B\";\n\n    System.out.println(\"Match = \" + equalsIgnoreSpace(a, b, false));\n}\n\nstatic boolean equalsIgnoreSpace(String s1, String s2, boolean matchCase) {\n\n   String val1 = stripExtraSpaces(s1);\n   String val2 = stripExtraSpaces(s2);\n\n   if(matchCase) {\n       return val1.equals(val2);\n   } else {\n       return val1.equalsIgnoreCase(val2);\n   }\n}\n\nstatic String stripExtraSpaces(String s) {\n    String formattedString = \"\";\n    java.util.StringTokenizer st = new java.util.StringTokenizer(s);\n\n    while(st.hasMoreTokens()) {\n        formattedString += st.nextToken() + \" \";\n    }\n\n    return formattedString.trim();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20399566,"reputation":306,"user_id":14965614,"display_name":"Andrea"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681200097,"creation_date":1681200097,"answer_id":75983668,"question_id":17973964,"body_markdown":"All methods that uses `replaceAll` could have performance problem. For each comparison, the regular expression will be parsed, another string will be constructed and modified. Only at this point will the two strings be compared. Following the old principles of computer science, it seems abominable to manipulate strings by creating a new version just for the purpose of comparison.\r\nThe following solution actually performs a comparison\r\n\r\n\r\n    public static boolean equalsSpacesLenient(String s1,String s2) {\r\n       // It should handle the case where s1 or s2 is null\r\n       int idx1=0;\r\n       int idx2=0;\r\n       \r\n       for (;;) {\r\n          if (isSpace(s1.charAt(idx1)) &amp;&amp; isSpace(s2.charAt(idx2))) {\r\n             // skip any additional spaces in both strings\r\n             do {\r\n                idx1++;\r\n             } while (idx1&lt;s1.length() &amp;&amp; isSpace(s1.charAt(idx1)));\r\n             do {\r\n                idx2++;\r\n             } while (idx2&lt;s2.length() &amp;&amp; isSpace(s2.charAt(idx2)));\r\n          }\r\n          else if (s1.charAt(idx1)==s2.charAt(idx2)) {\r\n          \t // The current character matches: move to the next\r\n             idx1++;\r\n             idx2++;\r\n          }\r\n          else {\r\n              // There are two different characters: the strings are different: exit.\r\n              return false;\r\n          }\r\n          \r\n          if (idx1&gt;=s1.length()) { // s1 has no more characters\r\n             if (idx2&lt;=s2.length()) {\r\n                return true; // s2 also has no more characters and the strings are equal\r\n             }\r\n             else {\r\n                return false; // s2 has more characters and therefore the strings are different\r\n             }\r\n          }\r\n          else { // s1 has more characters to compare\r\n             if (idx2&lt;=s2.length()) {\r\n                return false; // s2 has no more characters and therefore the strings are different\r\n             }\r\n              // s1 and s2 have more characters to compare: continue\r\n          }\r\n       }\r\n          \r\n    } \r\n    \r\n    private static boolean isSpace(int c) {\r\n       // I can decide here how to consider &#39;space&#39; in various ways\r\n       return Character.isSpaceChar(c);\r\n       // return c==&#39; &#39;;\r\n       // return c==&#39; &#39; || c==&#39;\\t&#39; || c==&#39;\\n&#39; || c==&#39;\\r&#39;; \r\n    }\r\n\r\nYou can read more detail in this blog post [Comparing two strings while ignoring repeated spaces][1]\r\n\r\n\r\n  [1]: https://www.sodomaco.it/en/contents/java-string-equals-spaces-lenient.html","title":"How to compare two Strings in java without considering spaces?","body":"<p>All methods that uses <code>replaceAll</code> could have performance problem. For each comparison, the regular expression will be parsed, another string will be constructed and modified. Only at this point will the two strings be compared. Following the old principles of computer science, it seems abominable to manipulate strings by creating a new version just for the purpose of comparison.\nThe following solution actually performs a comparison</p>\n<pre><code>public static boolean equalsSpacesLenient(String s1,String s2) {\n   // It should handle the case where s1 or s2 is null\n   int idx1=0;\n   int idx2=0;\n   \n   for (;;) {\n      if (isSpace(s1.charAt(idx1)) &amp;&amp; isSpace(s2.charAt(idx2))) {\n         // skip any additional spaces in both strings\n         do {\n            idx1++;\n         } while (idx1&lt;s1.length() &amp;&amp; isSpace(s1.charAt(idx1)));\n         do {\n            idx2++;\n         } while (idx2&lt;s2.length() &amp;&amp; isSpace(s2.charAt(idx2)));\n      }\n      else if (s1.charAt(idx1)==s2.charAt(idx2)) {\n         // The current character matches: move to the next\n         idx1++;\n         idx2++;\n      }\n      else {\n          // There are two different characters: the strings are different: exit.\n          return false;\n      }\n      \n      if (idx1&gt;=s1.length()) { // s1 has no more characters\n         if (idx2&lt;=s2.length()) {\n            return true; // s2 also has no more characters and the strings are equal\n         }\n         else {\n            return false; // s2 has more characters and therefore the strings are different\n         }\n      }\n      else { // s1 has more characters to compare\n         if (idx2&lt;=s2.length()) {\n            return false; // s2 has no more characters and therefore the strings are different\n         }\n          // s1 and s2 have more characters to compare: continue\n      }\n   }\n      \n} \n\nprivate static boolean isSpace(int c) {\n   // I can decide here how to consider 'space' in various ways\n   return Character.isSpaceChar(c);\n   // return c==' ';\n   // return c==' ' || c=='\\t' || c=='\\n' || c=='\\r'; \n}\n</code></pre>\n<p>You can read more detail in this blog post <a href=\"https://www.sodomaco.it/en/contents/java-string-equals-spaces-lenient.html\" rel=\"nofollow noreferrer\">Comparing two strings while ignoring repeated spaces</a></p>\n"}],"owner":{"account_id":2073596,"reputation":2693,"user_id":1847560,"accept_rate":40,"display_name":"vijayk"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":96102,"favorite_count":0,"down_vote_count":0,"up_vote_count":30,"accepted_answer_id":17974027,"answer_count":10,"score":30,"last_activity_date":1681200097,"creation_date":1375282819,"question_id":17973964,"body_markdown":"I have one example.\r\n\r\n    public class Test {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tString a=&quot;VIJAY KAKADE&quot;;\r\n    \t\tString b=&quot;VIJAY    KAKADE&quot;;\r\n    \t\tif(a.equalsIgnoreCase(b)){\r\n    \t\t\tSystem.out.println(&quot;yes&quot;);\r\n    \t\t}else{\r\n    \t\t\tSystem.out.println(&quot;no&quot;);\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\nI need to check these strings without considering spaces. How do I achieve this? How do I ignore spaces in the strings when I compare them?\r\n","title":"How to compare two Strings in java without considering spaces?","body":"<p>I have one example.</p>\n\n<pre><code>public class Test {\n    public static void main(String[] args) {\n        String a=\"VIJAY KAKADE\";\n        String b=\"VIJAY    KAKADE\";\n        if(a.equalsIgnoreCase(b)){\n            System.out.println(\"yes\");\n        }else{\n            System.out.println(\"no\");\n        }\n    }\n}\n</code></pre>\n\n<p>I need to check these strings without considering spaces. How do I achieve this? How do I ignore spaces in the strings when I compare them?</p>\n"},{"tags":["java","spring","spring-boot"],"answers":[{"comments":[{"owner":{"account_id":24745023,"reputation":81,"user_id":18631324,"display_name":"SereneAtk"},"score":0,"creation_date":1680950162,"post_id":75964651,"comment_id":133983108,"body_markdown":"Thanks, I was thinking about this solution but I had an impression that it would not be best practice. I was wondering if I could do something similar to known pattern which is used in @Value annotation. In normal flat properties u do @Value(&quot;${my.externalsystem.connection.enabled:true}&quot;) where `true` after colon means the default value and u don&#39;t have to set it in constructor.","body":"Thanks, I was thinking about this solution but I had an impression that it would not be best practice. I was wondering if I could do something similar to known pattern which is used in @Value annotation. In normal flat properties u do @Value(&quot;${my.externalsystem.connection.enabled:true}&quot;) where <code>true</code> after colon means the default value and u don&#39;t have to set it in constructor."},{"owner":{"account_id":3023214,"reputation":20361,"user_id":2563754,"display_name":"Seelenvirtuose"},"score":1,"creation_date":1680950975,"post_id":75964651,"comment_id":133983192,"body_markdown":"You should let Spring create the `ConnectionProperties` instance and let it put it into the application context. In a Spring application, never create instances, that should be managed, yourself.","body":"You should let Spring create the <code>ConnectionProperties</code> instance and let it put it into the application context. In a Spring application, never create instances, that should be managed, yourself."},{"owner":{"account_id":9945780,"reputation":490,"user_id":7360568,"display_name":"cardouken"},"score":0,"creation_date":1680951542,"post_id":75964651,"comment_id":133983257,"body_markdown":"Yup, you&#39;re right @Seelenvirtuose. I got too focused on the specific question OP posted, but generally speaking in that case the whole `MyConfiguration` outer class could just be removed and `ConnectionProperties` annotated with @Component and autowired where needed","body":"Yup, you&#39;re right @Seelenvirtuose. I got too focused on the specific question OP posted, but generally speaking in that case the whole <code>MyConfiguration</code> outer class could just be removed and <code>ConnectionProperties</code> annotated with @Component and autowired where needed"},{"owner":{"account_id":24745023,"reputation":81,"user_id":18631324,"display_name":"SereneAtk"},"score":0,"creation_date":1681199796,"post_id":75964651,"comment_id":134013716,"body_markdown":"There is @Component in MyConfiguration class, I added it I had it in code already but somehow it was missing in my post, the rest of the post is valid. This does not change anything, I am am not sure how to tell Spring to create MyConfiguration with default value (equal true) for my parameter when the my.externalsystem.connection.enabled is not present in application.properties. Can u provide some example ? And why your answer was marked -1 ?","body":"There is @Component in MyConfiguration class, I added it I had it in code already but somehow it was missing in my post, the rest of the post is valid. This does not change anything, I am am not sure how to tell Spring to create MyConfiguration with default value (equal true) for my parameter when the my.externalsystem.connection.enabled is not present in application.properties. Can u provide some example ? And why your answer was marked -1 ?"}],"tags":[],"owner":{"account_id":9945780,"reputation":490,"user_id":7360568,"display_name":"cardouken"},"comment_count":4,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1680949301,"creation_date":1680949301,"answer_id":75964651,"question_id":75964581,"body_markdown":"You&#39;re missing a default constructor for `ConnectionProperties` to instantiate the class and map the properties if missing.\r\n\r\nNot sure if or how this could be translated to Lombok somehow with `@NoArgsConstructor` and `@AllArgsConstructor`, but this should work:\r\n\r\n```java\r\n@Configuration\r\n@ConfigurationProperties(prefix = &quot;my.externalsystem&quot;)\r\n@Getter\r\n@Setter\r\npublic class MyConfiguration {\r\n\r\n    private ConnectionProperties connection = new ConnectionProperties();\r\n\r\n    @Getter\r\n    @Setter\r\n    public static class ConnectionProperties {\r\n        private boolean enabled;\r\n\r\n        public ConnectionProperties() {\r\n            this.enabled = true;\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nIn this example if the property is missing it will just use the default value from the constructor and will override it if the property is present.","title":"ConfigurationProperties - how to create configuration with groups and default property values","body":"<p>You're missing a default constructor for <code>ConnectionProperties</code> to instantiate the class and map the properties if missing.</p>\n<p>Not sure if or how this could be translated to Lombok somehow with <code>@NoArgsConstructor</code> and <code>@AllArgsConstructor</code>, but this should work:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@ConfigurationProperties(prefix = &quot;my.externalsystem&quot;)\n@Getter\n@Setter\npublic class MyConfiguration {\n\n    private ConnectionProperties connection = new ConnectionProperties();\n\n    @Getter\n    @Setter\n    public static class ConnectionProperties {\n        private boolean enabled;\n\n        public ConnectionProperties() {\n            this.enabled = true;\n        }\n    }\n}\n</code></pre>\n<p>In this example if the property is missing it will just use the default value from the constructor and will override it if the property is present.</p>\n"}],"owner":{"account_id":24745023,"reputation":81,"user_id":18631324,"display_name":"SereneAtk"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":248,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681199657,"creation_date":1680948218,"question_id":75964581,"body_markdown":"I am using Spring Boot application and Java8. \r\n\r\n**The problem description**\r\n\r\nThe most general need is to create Java represention of multiple my.externalsystem.connection properties and group them with usage of @ConfigurationProperties annotation. I have application.properties file which currently is missing any `my.externalsystem.connection` property to simulate wrong configuration (someone forgot to place property in properties file and the default property values should be then used). The specific property which is missing is `my.externalsystem.connection.enabled=false (default should be true)` There will be more properties with prefix `my.externalsystem.connection` in future.\r\n\r\nBecause there will be many `my.externalsystem.connection` properties, I would create property group like in Java object below:  \r\n\r\n**My Java class representing properties:**\r\n\r\n    @Configuration\r\n    @Component\r\n    @ConfigurationProperties(prefix = &quot;my.externalsystem&quot;)\r\n    @Getter\r\n    @Setter\r\n    public class MyConfiguration {\r\n    \r\n        private ConnectionProperties connection;\r\n    \r\n        @Getter\r\n        @Setter\r\n        public static class ConnectionProperties {\r\n            public ConnectionProperties (@DefaultValue(&quot;true&quot;) boolean enabled) {\r\n                this.enabled = enabled;\r\n            }\r\n            private boolean enabled;\r\n        }\r\n    }\r\n\r\n**The problem in runtime**\r\n\r\nWhen I run it with `my.externalsystem.connection.enabled=true or false` in properties file, it properly reads the value and everything works fine. However, when `my.externalsystem.connection.enabled` is missing in properties file, the `connection` object is null in runtime. Why it is not created with default values? I need this class to work with default values (true for `my.externalsystem.connection.enabled` is the default value).\r\n \r\nCan somebody help ? Thanks in advance.","title":"ConfigurationProperties - how to create configuration with groups and default property values","body":"<p>I am using Spring Boot application and Java8.</p>\n<p><strong>The problem description</strong></p>\n<p>The most general need is to create Java represention of multiple my.externalsystem.connection properties and group them with usage of @ConfigurationProperties annotation. I have application.properties file which currently is missing any <code>my.externalsystem.connection</code> property to simulate wrong configuration (someone forgot to place property in properties file and the default property values should be then used). The specific property which is missing is <code>my.externalsystem.connection.enabled=false (default should be true)</code> There will be more properties with prefix <code>my.externalsystem.connection</code> in future.</p>\n<p>Because there will be many <code>my.externalsystem.connection</code> properties, I would create property group like in Java object below:</p>\n<p><strong>My Java class representing properties:</strong></p>\n<pre><code>@Configuration\n@Component\n@ConfigurationProperties(prefix = &quot;my.externalsystem&quot;)\n@Getter\n@Setter\npublic class MyConfiguration {\n\n    private ConnectionProperties connection;\n\n    @Getter\n    @Setter\n    public static class ConnectionProperties {\n        public ConnectionProperties (@DefaultValue(&quot;true&quot;) boolean enabled) {\n            this.enabled = enabled;\n        }\n        private boolean enabled;\n    }\n}\n</code></pre>\n<p><strong>The problem in runtime</strong></p>\n<p>When I run it with <code>my.externalsystem.connection.enabled=true or false</code> in properties file, it properly reads the value and everything works fine. However, when <code>my.externalsystem.connection.enabled</code> is missing in properties file, the <code>connection</code> object is null in runtime. Why it is not created with default values? I need this class to work with default values (true for <code>my.externalsystem.connection.enabled</code> is the default value).</p>\n<p>Can somebody help ? Thanks in advance.</p>\n"},{"tags":["java","spring-boot","compatibility","spring-starter"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1681196470,"post_id":75983170,"comment_id":134013100,"body_markdown":"No it doesn&#39;t, which is also clearly stated in [the documentation](https://docs.spring.io/spring-boot/docs/current/reference/html/getting-started.html#getting-started.system-requirements) that the minimal requirement is Java17.","body":"No it doesn&#39;t, which is also clearly stated in <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/getting-started.html#getting-started.system-requirements\" rel=\"nofollow noreferrer\">the documentation</a> that the minimal requirement is Java17."},{"owner":{"account_id":1328773,"reputation":37883,"user_id":1273080,"accept_rate":100,"display_name":"Petr Janeek"},"score":0,"creation_date":1681196624,"post_id":75983170,"comment_id":134013136,"body_markdown":"See e.g. https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-3.0-Release-Notes. Spring Boot 3 requires Java 17. You can file a bug against https://github.com/spring-io/initializr if it&#39;s not there already, anything below Java 17 should be forbidden. I&#39;m curious, though! Why would you start a new project on such an old version of Java?","body":"See e.g. <a href=\"https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-3.0-Release-Notes\" rel=\"nofollow noreferrer\">github.com/spring-projects/spring-boot/wiki/&hellip;</a>. Spring Boot 3 requires Java 17. You can file a bug against <a href=\"https://github.com/spring-io/initializr\" rel=\"nofollow noreferrer\">github.com/spring-io/initializr</a> if it&#39;s not there already, anything below Java 17 should be forbidden. I&#39;m curious, though! Why would you start a new project on such an old version of Java?"},{"owner":{"account_id":24034349,"reputation":635,"user_id":18014805,"display_name":"Ramesh"},"score":0,"creation_date":1681197505,"post_id":75983170,"comment_id":134013309,"body_markdown":"@PetrJaneek what you said is logical. but which arises the question like, can we run two java versions on a single server machine?","body":"@PetrJaneek what you said is logical. but which arises the question like, can we run two java versions on a single server machine?"},{"owner":{"account_id":1328773,"reputation":37883,"user_id":1273080,"accept_rate":100,"display_name":"Petr Janeek"},"score":2,"creation_date":1681198801,"post_id":75983170,"comment_id":134013537,"body_markdown":"@Ramesh Yes, of course. There are some questions and caveats and choices to be made, but you absolutely can run multiple applications on a single machine where each uses a different version of Java. There&#39;s even a few different ways to do it. But that&#39;s for another question and more internet research. If it turns out to be too much for you, you can always downgrade to Spring Boot 2, or upgrade your other apps to 17. Good luck :).","body":"@Ramesh Yes, of course. There are some questions and caveats and choices to be made, but you absolutely can run multiple applications on a single machine where each uses a different version of Java. There&#39;s even a few different ways to do it. But that&#39;s for another question and more internet research. If it turns out to be too much for you, you can always downgrade to Spring Boot 2, or upgrade your other apps to 17. Good luck :)."}],"answers":[{"tags":[],"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1681196596,"creation_date":1681196596,"answer_id":75983213,"question_id":75983170,"body_markdown":"No it doesn&#39;t. As Spring Boot 3 requires Java 17 or up (as clearly stated in [the documentation][1]). \r\n\r\n\r\n[1]: https://docs.spring.io/spring-boot/docs/current/reference/html/getting-started.html#getting-started.system-requirements","title":"Does Spring 3.0.x support Java 8? In Spring Starter I found sourceCompatibility = &#39;17&#39; default for 3.0.x and above","body":"<p>No it doesn't. As Spring Boot 3 requires Java 17 or up (as clearly stated in <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/getting-started.html#getting-started.system-requirements\" rel=\"noreferrer\">the documentation</a>).</p>\n"},{"tags":[],"owner":{"account_id":24585497,"reputation":19,"user_id":20934920,"display_name":"JP Park"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681198840,"creation_date":1681198840,"answer_id":75983510,"question_id":75983170,"body_markdown":"Spring boot 3 is required Java 17.  \r\nYou have to use Java 17 if you are going to do with Spring boot 3.","title":"Does Spring 3.0.x support Java 8? In Spring Starter I found sourceCompatibility = &#39;17&#39; default for 3.0.x and above","body":"<p>Spring boot 3 is required Java 17.<br />\nYou have to use Java 17 if you are going to do with Spring boot 3.</p>\n"}],"owner":{"account_id":3958992,"reputation":447,"user_id":3266623,"display_name":"ShankPossible"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2292,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":75983213,"answer_count":2,"score":3,"last_activity_date":1681199471,"creation_date":1681196271,"question_id":75983170,"body_markdown":"I was trying to create a Spring Boot 3.0.5 application, along with Java 8 in Spring Starter. Screenshot shared below \r\n\r\n[![Spring Starter page][1]][1]\r\n\r\nPost which I checked the Explore button which helps in identifying what code will look like.\r\n\r\nHowever, I found \r\n\r\n    sourceCompatibility = &#39;17&#39;\r\n\r\nI did not expect that as I had selected Java 8 in above screen. Am I missing something here?\r\n\r\n[![Explore window][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/h3G2u.png\r\n  [2]: https://i.stack.imgur.com/Gfo8J.png","title":"Does Spring 3.0.x support Java 8? In Spring Starter I found sourceCompatibility = &#39;17&#39; default for 3.0.x and above","body":"<p>I was trying to create a Spring Boot 3.0.5 application, along with Java 8 in Spring Starter. Screenshot shared below</p>\n<p><a href=\"https://i.stack.imgur.com/h3G2u.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/h3G2u.png\" alt=\"Spring Starter page\" /></a></p>\n<p>Post which I checked the Explore button which helps in identifying what code will look like.</p>\n<p>However, I found</p>\n<pre><code>sourceCompatibility = '17'\n</code></pre>\n<p>I did not expect that as I had selected Java 8 in above screen. Am I missing something here?</p>\n<p><a href=\"https://i.stack.imgur.com/Gfo8J.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Gfo8J.png\" alt=\"Explore window\" /></a></p>\n"},{"tags":["java","multithreading"],"comments":[{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1681201050,"post_id":75983423,"comment_id":134013984,"body_markdown":"Look at the code for `Thread.join` ...","body":"Look at the code for <code>Thread.join</code> ..."}],"answers":[{"tags":[],"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1681198950,"creation_date":1681198950,"answer_id":75983528,"question_id":75983423,"body_markdown":"The description for this is a bit hidden in the [documentation of `Thread.join()` ](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Thread.html#join(long)):\r\n\r\n&gt; As a thread terminates the `this.notifyAll` method is invoked. It is recommended that applications not use `wait`, `notify`, or `notifyAll` on Thread instances.\r\n\r\nWhat happens is this:\r\n\r\n* the main method creates a new Thread `t1` and starts it\r\n* it then calls `t1.wait()`\r\n* the Thread `t1` some time later terminates and implicitly calls `t1.notifyAll()` as per the documentation\r\n* this wakes up the main thread","title":"Why can the wait() method be called without the notify() method when using the thread class object as a lock?","body":"<p>The description for this is a bit hidden in the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Thread.html#join(long)\" rel=\"nofollow noreferrer\">documentation of <code>Thread.join()</code> </a>:</p>\n<blockquote>\n<p>As a thread terminates the <code>this.notifyAll</code> method is invoked. It is recommended that applications not use <code>wait</code>, <code>notify</code>, or <code>notifyAll</code> on Thread instances.</p>\n</blockquote>\n<p>What happens is this:</p>\n<ul>\n<li>the main method creates a new Thread <code>t1</code> and starts it</li>\n<li>it then calls <code>t1.wait()</code></li>\n<li>the Thread <code>t1</code> some time later terminates and implicitly calls <code>t1.notifyAll()</code> as per the documentation</li>\n<li>this wakes up the main thread</li>\n</ul>\n"}],"owner":{"account_id":23985042,"reputation":35,"user_id":17971950,"display_name":""},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75983528,"answer_count":1,"score":0,"last_activity_date":1681198950,"creation_date":1681198195,"question_id":75983423,"body_markdown":"```\r\npublic class WaitMain {\r\n    public volatile static int i = 0;\r\n\r\n    public static void main(String[] args) throws InterruptedException {\r\n        Thread t1 = new Thread(){\r\n            public void run(){\r\n                for (i = 0; i &lt; 1000000; i++);\r\n            }\r\n        };\r\n\r\n        t1.start();\r\n        synchronized (t1){\r\n            t1.wait();\r\n        }\r\n\r\n\r\n        System.out.println(i);\r\n    }\r\n}\r\n```\r\nIn the above code, I didn&#39;t call any notify or notifyAll methods, but the main thread still woke up and executed normally. I want to know why. Thanks.","title":"Why can the wait() method be called without the notify() method when using the thread class object as a lock?","body":"<pre><code>public class WaitMain {\n    public volatile static int i = 0;\n\n    public static void main(String[] args) throws InterruptedException {\n        Thread t1 = new Thread(){\n            public void run(){\n                for (i = 0; i &lt; 1000000; i++);\n            }\n        };\n\n        t1.start();\n        synchronized (t1){\n            t1.wait();\n        }\n\n\n        System.out.println(i);\n    }\n}\n</code></pre>\n<p>In the above code, I didn't call any notify or notifyAll methods, but the main thread still woke up and executed normally. I want to know why. Thanks.</p>\n"},{"tags":["java","client-server","netty"],"answers":[{"comments":[{"owner":{"account_id":2026878,"reputation":1243,"user_id":1823997,"accept_rate":55,"display_name":"Moses"},"score":3,"creation_date":1398262245,"post_id":23246754,"comment_id":35570279,"body_markdown":"But how to get server response from ChannelFuture?","body":"But how to get server response from ChannelFuture?"},{"owner":{"account_id":2386008,"reputation":13,"user_id":2086970,"display_name":"Teots"},"score":0,"creation_date":1398433066,"post_id":23246754,"comment_id":35658613,"body_markdown":"You need to register a ChannelInboundHandler to the channel. As a matter of fact you probably did this already -&gt; see your ClientHandler. This handler can implement a  ```public void channelRead(ChannelHandlerContext ctx, Object msg) {...}``` method. It handles the responses from the server.","body":"You need to register a ChannelInboundHandler to the channel. As a matter of fact you probably did this already -&gt; see your ClientHandler. This handler can implement a  <code>public void channelRead(ChannelHandlerContext ctx, Object msg) {...}</code> method. It handles the responses from the server."},{"owner":{"account_id":2026878,"reputation":1243,"user_id":1823997,"accept_rate":55,"display_name":"Moses"},"score":1,"creation_date":1398433640,"post_id":23246754,"comment_id":35659077,"body_markdown":"I understand basics of netty. On a server it&#39;s plain and easy. But I still don&#39;t get how to connect this code: public String sendMessage(String msg) {\n    channel.writeAndFlush(msg);\n    return ??????????;\n} with channelRead(...)","body":"I understand basics of netty. On a server it&#39;s plain and easy. But I still don&#39;t get how to connect this code: public String sendMessage(String msg) {     channel.writeAndFlush(msg);     return ??????????; } with channelRead(...)"},{"owner":{"account_id":2386008,"reputation":13,"user_id":2086970,"display_name":"Teots"},"score":0,"creation_date":1398591344,"post_id":23246754,"comment_id":35707602,"body_markdown":"Getting the server response in this method is not possible in netty. Data (in your case the response from the server) is handled by the InboundHandlers which are connected to a channel. In those handlers you can forward a server response to another part of your code.\n\nAlways keep in mind that netty is an asynchronous framework!","body":"Getting the server response in this method is not possible in netty. Data (in your case the response from the server) is handled by the InboundHandlers which are connected to a channel. In those handlers you can forward a server response to another part of your code.  Always keep in mind that netty is an asynchronous framework!"}],"tags":[],"owner":{"account_id":2386008,"reputation":13,"user_id":2086970,"display_name":"Teots"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1398261790,"creation_date":1398261790,"answer_id":23246754,"question_id":23128232,"body_markdown":"Calling ```channel.writeAndFlush(msg);``` already returns a ChannelFuture. To handle the result of this method call, you could add a listener to the future like this:\r\n\r\n    future.addListener(new ChannelFutureListener() {\r\n        public void operationComplete(ChannelFuture future) {\r\n            // Perform post-closure operation\r\n            // ...\r\n        }\r\n    }); \r\n\r\n(this is taken from the Netty documentation see: [Netty doc][1])\r\n\r\n\r\n  [1]: http://netty.io/4.0/api/io/netty/channel/ChannelFuture.html","title":"How to get server response with netty client","body":"<p>Calling <code>channel.writeAndFlush(msg);</code> already returns a ChannelFuture. To handle the result of this method call, you could add a listener to the future like this:</p>\n\n<pre><code>future.addListener(new ChannelFutureListener() {\n    public void operationComplete(ChannelFuture future) {\n        // Perform post-closure operation\n        // ...\n    }\n}); \n</code></pre>\n\n<p>(this is taken from the Netty documentation see: <a href=\"http://netty.io/4.0/api/io/netty/channel/ChannelFuture.html\" rel=\"nofollow\">Netty doc</a>)</p>\n"},{"comments":[{"owner":{"account_id":6200619,"reputation":176,"user_id":4830567,"display_name":"Jonathan"},"score":4,"creation_date":1467409404,"post_id":35318079,"comment_id":63737741,"body_markdown":"There are two caveats to this: 1) The protocol used must guarantee that responses will be sent by the server in the order that requests are received and 2) requests will only be sent to and received from a single server (otherwise 1 will break since the ordering among the various servers may no longer be synchronous). Since a single Bootstrap can be used to connect to multiple servers the second can be a concern, although each connect will produce its own channel so it should be possible to have separate queues for each channel to address this assuming (1) does hold.","body":"There are two caveats to this: 1) The protocol used must guarantee that responses will be sent by the server in the order that requests are received and 2) requests will only be sent to and received from a single server (otherwise 1 will break since the ordering among the various servers may no longer be synchronous). Since a single Bootstrap can be used to connect to multiple servers the second can be a concern, although each connect will produce its own channel so it should be possible to have separate queues for each channel to address this assuming (1) does hold."},{"owner":{"account_id":303087,"reputation":8621,"user_id":611819,"accept_rate":100,"display_name":"dnault"},"score":0,"creation_date":1520638879,"post_id":35318079,"comment_id":85412944,"body_markdown":"What about memory visibility -- is the assignment of `ctx` in `channelActive` guaranteed to be seen by the thread calling `sendMessage(String)`?","body":"What about memory visibility -- is the assignment of <code>ctx</code> in <code>channelActive</code> guaranteed to be seen by the thread calling <code>sendMessage(String)</code>?"},{"owner":{"account_id":9097917,"reputation":1271,"user_id":6771212,"accept_rate":83,"display_name":"Dawid Fieluba"},"score":0,"creation_date":1527011905,"post_id":35318079,"comment_id":87961232,"body_markdown":"Anyone else getting this error? In `return sendMessage(message, ctx.newPromise());` newPromise is of type `io.netty.channel.ChannelPromise` when required is `io.netty.util.concurrent.Promise&lt;String&gt;`. After some casts Im getting `ClassCastException: java.lang.String cannot be cast to java.lang.Void`.","body":"Anyone else getting this error? In <code>return sendMessage(message, ctx.newPromise());</code> newPromise is of type <code>io.netty.channel.ChannelPromise</code> when required is <code>io.netty.util.concurrent.Promise&lt;String&gt;</code>. After some casts Im getting <code>ClassCastException: java.lang.String cannot be cast to java.lang.Void</code>."},{"owner":{"account_id":3076439,"reputation":545,"user_id":2605631,"accept_rate":20,"display_name":"mertaksu"},"score":0,"creation_date":1553903513,"post_id":35318079,"comment_id":97572726,"body_markdown":"I am also getting same compile error at return sendMessage(message, ctx.newPromise()); line","body":"I am also getting same compile error at return sendMessage(message, ctx.newPromise()); line"},{"owner":{"account_id":1677570,"reputation":18354,"user_id":1542723,"display_name":"Ferrybig"},"score":0,"creation_date":1553936862,"post_id":35318079,"comment_id":97577750,"body_markdown":"@mertaksu it was supposed to be ` ctx.executor().newPromise()` instead of `ctx.newPromise()`, not sure how the old code compiled in the first place, maybe I used a differend netty version","body":"@mertaksu it was supposed to be ` ctx.executor().newPromise()` instead of <code>ctx.newPromise()</code>, not sure how the old code compiled in the first place, maybe I used a differend netty version"},{"owner":{"account_id":45842,"reputation":13608,"user_id":135294,"display_name":"cjstehno"},"score":0,"creation_date":1573827855,"post_id":35318079,"comment_id":104025042,"body_markdown":"Seems like a good answer but I am not seeing how `ctx.writeAndFlush(message).addListener();` actually does anything (perhaps the API changed since this was written but there is no empty addListener() method and this branch does nothing to the promise. :-(","body":"Seems like a good answer but I am not seeing how <code>ctx.writeAndFlush(message).addListener();</code> actually does anything (perhaps the API changed since this was written but there is no empty addListener() method and this branch does nothing to the promise. :-("}],"tags":[],"owner":{"account_id":1677570,"reputation":18354,"user_id":1542723,"display_name":"Ferrybig"},"comment_count":6,"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1576747289,"creation_date":1455115025,"answer_id":35318079,"question_id":23128232,"body_markdown":"Returning a `Future&lt;String&gt;` for the method is simple, we are going to implement the following method signature:\r\n\r\n    public Futute&lt;String&gt; sendMessage(String msg) {\r\n\r\nThe is relatively easy to do when you are known with the async programming structures. To solve the design problem, we are going to do the following steps:\r\n\r\n 1. When a message is written, add a `Promise&lt;String&gt;` to a [`ArrayBlockingQueue&lt;Promise&gt;`][1]\r\n\r\n    This will serve as a list of what messages have recently been send, and allows us to change our `Future&lt;String&gt;` objects return result.\r\n 2. When a message arrives back into the handler, resolve it against the head of the `Queue`\r\n\r\n    This allows us to get the correct future to change.\r\n 3. Update the state of the `Promise&lt;String&gt;`\r\n\r\n    We call `promise.setSuccess()` to finally set the state on the object, this will propagate back to the future object.\r\n\r\nExample code\r\n------------\r\n\r\n    public class ClientHandler extends SimpleChannelInboundHandler&lt;String&gt; {\r\n        private ChannelHandlerContext ctx;\r\n        private BlockingQueue&lt;Promise&lt;String&gt;&gt; messageList = new ArrayBlockingQueue&lt;&gt;(16);\r\n    \r\n        @Override\r\n    \tpublic void channelActive(ChannelHandlerContext ctx) {\r\n    \t\tsuper.channelActive(ctx);\r\n            this.ctx = ctx;\r\n    \t}\r\n\r\n        @Override\r\n    \tpublic void channelInactive(ChannelHandlerContext ctx) {\r\n    \t\tsuper.channelInactive(ctx);\r\n            synchronized(this){\r\n                Promise&lt;String&gt; prom;\r\n                while((prom = messageList.poll()) != null) \r\n                    prom.setFailure(new IOException(&quot;Connection lost&quot;));\r\n                messageList = null;\r\n            }\r\n    \t}\r\n    \r\n        public Future&lt;String&gt; sendMessage(String message) {\r\n            if(ctx == null) \r\n                throw new IllegalStateException();\r\n            return sendMessage(message, ctx.executor().newPromise());\r\n        }\r\n    \r\n        public Future&lt;String&gt; sendMessage(String message, Promise&lt;String&gt; prom) {\r\n            synchronized(this){\r\n                if(messageList == null) {\r\n                    // Connection closed\r\n                    prom.setFailure(new IllegalStateException());\r\n                } else if(messageList.offer(prom)) { \r\n                    // Connection open and message accepted\r\n                    ctx.writeAndFlush(message).addListener();\r\n                } else { \r\n                    // Connection open and message rejected\r\n                    prom.setFailure(new BufferOverflowException());\r\n                }\r\n                return prom;\r\n            }\r\n        }\r\n        @Override\r\n\t    protected void messageReceived(ChannelHandlerContext ctx, String msg) {\r\n\t\t    synchronized(this){\r\n                if(messageList != null) {\r\n                     messageList.poll().setSuccess(msg);\r\n                }\r\n            }\r\n\t    }\r\n    }\r\n\r\nDocumentation breakdown\r\n-----------------------\r\n\r\n - `private ChannelHandlerContext ctx;`\r\n   \r\n   Used to store our reference to the ChannelHandlerContext, we use this so we can create promises\r\n -  `private BlockingQueue&lt;Promise&lt;String&gt;&gt; messageList = new ArrayBlockingQueue&lt;&gt;();`\r\n \r\n   We keep the past messages in this list so we can change the result of the future\r\n - `public void channelActive(ChannelHandlerContext ctx)`\r\n\r\n   Called by netty when the connection becomes active. Init our variables here.\r\n\r\n - `public void channelInactive(ChannelHandlerContext ctx)`\r\n\r\n   Called by netty when the connection becomes inactive, either due to error or normal connection close.\r\n\r\n - `protected void messageReceived(ChannelHandlerContext ctx, String msg)`\r\n\r\n   Called by netty when a new message arrives, here pick out the head of the queue, and then we call setsuccess on it.\r\n\r\nWarning advise\r\n--------------\r\n\r\nWhen using futures, there is 1 thing you need to lookout for, do not call get() from 1 of the netty threads if the future isn&#39;t done yet, failure to follow this simple rule will either result in a deadlock or a [`BlockingOperationException`][2].\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ArrayBlockingQueue.html\r\n  [2]: http://netty.io/4.0/api/index.html?io/netty/util/concurrent/BlockingOperationException.html","title":"How to get server response with netty client","body":"<p>Returning a <code>Future&lt;String&gt;</code> for the method is simple, we are going to implement the following method signature:</p>\n\n<pre><code>public Futute&lt;String&gt; sendMessage(String msg) {\n</code></pre>\n\n<p>The is relatively easy to do when you are known with the async programming structures. To solve the design problem, we are going to do the following steps:</p>\n\n<ol>\n<li><p>When a message is written, add a <code>Promise&lt;String&gt;</code> to a <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ArrayBlockingQueue.html\" rel=\"nofollow noreferrer\"><code>ArrayBlockingQueue&lt;Promise&gt;</code></a></p>\n\n<p>This will serve as a list of what messages have recently been send, and allows us to change our <code>Future&lt;String&gt;</code> objects return result.</p></li>\n<li><p>When a message arrives back into the handler, resolve it against the head of the <code>Queue</code></p>\n\n<p>This allows us to get the correct future to change.</p></li>\n<li><p>Update the state of the <code>Promise&lt;String&gt;</code></p>\n\n<p>We call <code>promise.setSuccess()</code> to finally set the state on the object, this will propagate back to the future object.</p></li>\n</ol>\n\n<h2>Example code</h2>\n\n<pre><code>public class ClientHandler extends SimpleChannelInboundHandler&lt;String&gt; {\n    private ChannelHandlerContext ctx;\n    private BlockingQueue&lt;Promise&lt;String&gt;&gt; messageList = new ArrayBlockingQueue&lt;&gt;(16);\n\n    @Override\n    public void channelActive(ChannelHandlerContext ctx) {\n        super.channelActive(ctx);\n        this.ctx = ctx;\n    }\n\n    @Override\n    public void channelInactive(ChannelHandlerContext ctx) {\n        super.channelInactive(ctx);\n        synchronized(this){\n            Promise&lt;String&gt; prom;\n            while((prom = messageList.poll()) != null) \n                prom.setFailure(new IOException(\"Connection lost\"));\n            messageList = null;\n        }\n    }\n\n    public Future&lt;String&gt; sendMessage(String message) {\n        if(ctx == null) \n            throw new IllegalStateException();\n        return sendMessage(message, ctx.executor().newPromise());\n    }\n\n    public Future&lt;String&gt; sendMessage(String message, Promise&lt;String&gt; prom) {\n        synchronized(this){\n            if(messageList == null) {\n                // Connection closed\n                prom.setFailure(new IllegalStateException());\n            } else if(messageList.offer(prom)) { \n                // Connection open and message accepted\n                ctx.writeAndFlush(message).addListener();\n            } else { \n                // Connection open and message rejected\n                prom.setFailure(new BufferOverflowException());\n            }\n            return prom;\n        }\n    }\n    @Override\n    protected void messageReceived(ChannelHandlerContext ctx, String msg) {\n        synchronized(this){\n            if(messageList != null) {\n                 messageList.poll().setSuccess(msg);\n            }\n        }\n    }\n}\n</code></pre>\n\n<h2>Documentation breakdown</h2>\n\n<ul>\n<li><p><code>private ChannelHandlerContext ctx;</code></p>\n\n<p>Used to store our reference to the ChannelHandlerContext, we use this so we can create promises</p></li>\n<li><p><code>private BlockingQueue&lt;Promise&lt;String&gt;&gt; messageList = new ArrayBlockingQueue&lt;&gt;();</code></p>\n\n<p>We keep the past messages in this list so we can change the result of the future</p></li>\n<li><p><code>public void channelActive(ChannelHandlerContext ctx)</code></p>\n\n<p>Called by netty when the connection becomes active. Init our variables here.</p></li>\n<li><p><code>public void channelInactive(ChannelHandlerContext ctx)</code></p>\n\n<p>Called by netty when the connection becomes inactive, either due to error or normal connection close.</p></li>\n<li><p><code>protected void messageReceived(ChannelHandlerContext ctx, String msg)</code></p>\n\n<p>Called by netty when a new message arrives, here pick out the head of the queue, and then we call setsuccess on it.</p></li>\n</ul>\n\n<h2>Warning advise</h2>\n\n<p>When using futures, there is 1 thing you need to lookout for, do not call get() from 1 of the netty threads if the future isn't done yet, failure to follow this simple rule will either result in a deadlock or a <a href=\"http://netty.io/4.0/api/index.html?io/netty/util/concurrent/BlockingOperationException.html\" rel=\"nofollow noreferrer\"><code>BlockingOperationException</code></a>.</p>\n"},{"tags":[],"owner":{"account_id":8317913,"reputation":41,"user_id":6250576,"display_name":"wu hardy"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1508513085,"creation_date":1461576315,"answer_id":36836576,"question_id":23128232,"body_markdown":"You can find the sample in netty project.\r\nWe can save the result into the last handler&#39;s custom fields. In the following code, it is handler.getFactorial() that is what we want.\r\n\r\nrefer to http://www.lookatsrc.com/source/io/netty/example/factorial/FactorialClient.java?a=io.netty:netty-all\r\n\r\nFactorialClient.java\r\n\r\n    public final class FactorialClient {\r\n    \r\n        static final boolean SSL = System.getProperty(&quot;ssl&quot;) != null;\r\n        static final String HOST = System.getProperty(&quot;host&quot;, &quot;127.0.0.1&quot;);\r\n        static final int PORT = Integer.parseInt(System.getProperty(&quot;port&quot;, &quot;8322&quot;));\r\n        static final int COUNT = Integer.parseInt(System.getProperty(&quot;count&quot;, &quot;1000&quot;));\r\n    \r\n        public static void main(String[] args) throws Exception {\r\n            // Configure SSL.\r\n            final SslContext sslCtx;\r\n            if (SSL) {\r\n                sslCtx = SslContextBuilder.forClient()\r\n                    .trustManager(InsecureTrustManagerFactory.INSTANCE).build();\r\n            } else {\r\n                sslCtx = null;\r\n            }\r\n    \r\n            EventLoopGroup group = new NioEventLoopGroup();\r\n            try {\r\n                Bootstrap b = new Bootstrap();\r\n                b.group(group)\r\n                 .channel(NioSocketChannel.class)\r\n                 .handler(new FactorialClientInitializer(sslCtx));\r\n    \r\n                // Make a new connection.\r\n                ChannelFuture f = b.connect(HOST, PORT).sync();\r\n    \r\n                // Get the handler instance to retrieve the answer.\r\n                FactorialClientHandler handler =\r\n                    (FactorialClientHandler) f.channel().pipeline().last();\r\n    \r\n                // Print out the answer.\r\n                System.err.format(&quot;Factorial of %,d is: %,d&quot;, COUNT, handler.getFactorial());\r\n            } finally {\r\n                group.shutdownGracefully();\r\n            }\r\n        }\r\n    }\r\n\r\n    public class FactorialClientHandler extends SimpleChannelInboundHandler&lt;BigInteger&gt; {\r\n    \r\n        private ChannelHandlerContext ctx;\r\n        private int receivedMessages;\r\n        private int next = 1;\r\n        final BlockingQueue&lt;BigInteger&gt; answer = new LinkedBlockingQueue&lt;BigInteger&gt;();\r\n    \r\n        public BigInteger getFactorial() {\r\n            boolean interrupted = false;\r\n            try {\r\n                for (;;) {\r\n                    try {\r\n                        return answer.take();\r\n                    } catch (InterruptedException ignore) {\r\n                        interrupted = true;\r\n                    }\r\n                }\r\n            } finally {\r\n                if (interrupted) {\r\n                    Thread.currentThread().interrupt();\r\n                }\r\n            }\r\n        }\r\n    \r\n        @Override\r\n        public void channelActive(ChannelHandlerContext ctx) {\r\n            this.ctx = ctx;\r\n            sendNumbers();\r\n        }\r\n    \r\n        @Override\r\n        public void channelRead0(ChannelHandlerContext ctx, final BigInteger msg) {\r\n            receivedMessages ++;\r\n            if (receivedMessages == FactorialClient.COUNT) {\r\n                // Offer the answer after closing the connection.\r\n                ctx.channel().close().addListener(new ChannelFutureListener() {\r\n                    @Override\r\n                    public void operationComplete(ChannelFuture future) {\r\n                        boolean offered = answer.offer(msg);\r\n                        assert offered;\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    \r\n        @Override\r\n        public void exceptionCaught(ChannelHandlerContext ctx, Throwable cause) {\r\n            cause.printStackTrace();\r\n            ctx.close();\r\n        }\r\n    \r\n        private void sendNumbers() {\r\n            // Do not send more than 4096 numbers.\r\n            ChannelFuture future = null;\r\n            for (int i = 0; i &lt; 4096 &amp;&amp; next &lt;= FactorialClient.COUNT; i++) {\r\n                future = ctx.write(Integer.valueOf(next));\r\n                next++;\r\n            }\r\n            if (next &lt;= FactorialClient.COUNT) {\r\n                assert future != null;\r\n                future.addListener(numberSender);\r\n            }\r\n            ctx.flush();\r\n        }\r\n    \r\n        private final ChannelFutureListener numberSender = new ChannelFutureListener() {\r\n            @Override\r\n            public void operationComplete(ChannelFuture future) throws Exception {\r\n                if (future.isSuccess()) {\r\n                    sendNumbers();\r\n                } else {\r\n                    future.cause().printStackTrace();\r\n                    future.channel().close();\r\n                }\r\n            }\r\n        };\r\n    }","title":"How to get server response with netty client","body":"<p>You can find the sample in netty project.\nWe can save the result into the last handler's custom fields. In the following code, it is handler.getFactorial() that is what we want.</p>\n\n<p>refer to <a href=\"http://www.lookatsrc.com/source/io/netty/example/factorial/FactorialClient.java?a=io.netty:netty-all\" rel=\"nofollow noreferrer\">http://www.lookatsrc.com/source/io/netty/example/factorial/FactorialClient.java?a=io.netty:netty-all</a></p>\n\n<p>FactorialClient.java</p>\n\n<pre><code>public final class FactorialClient {\n\n    static final boolean SSL = System.getProperty(\"ssl\") != null;\n    static final String HOST = System.getProperty(\"host\", \"127.0.0.1\");\n    static final int PORT = Integer.parseInt(System.getProperty(\"port\", \"8322\"));\n    static final int COUNT = Integer.parseInt(System.getProperty(\"count\", \"1000\"));\n\n    public static void main(String[] args) throws Exception {\n        // Configure SSL.\n        final SslContext sslCtx;\n        if (SSL) {\n            sslCtx = SslContextBuilder.forClient()\n                .trustManager(InsecureTrustManagerFactory.INSTANCE).build();\n        } else {\n            sslCtx = null;\n        }\n\n        EventLoopGroup group = new NioEventLoopGroup();\n        try {\n            Bootstrap b = new Bootstrap();\n            b.group(group)\n             .channel(NioSocketChannel.class)\n             .handler(new FactorialClientInitializer(sslCtx));\n\n            // Make a new connection.\n            ChannelFuture f = b.connect(HOST, PORT).sync();\n\n            // Get the handler instance to retrieve the answer.\n            FactorialClientHandler handler =\n                (FactorialClientHandler) f.channel().pipeline().last();\n\n            // Print out the answer.\n            System.err.format(\"Factorial of %,d is: %,d\", COUNT, handler.getFactorial());\n        } finally {\n            group.shutdownGracefully();\n        }\n    }\n}\n\npublic class FactorialClientHandler extends SimpleChannelInboundHandler&lt;BigInteger&gt; {\n\n    private ChannelHandlerContext ctx;\n    private int receivedMessages;\n    private int next = 1;\n    final BlockingQueue&lt;BigInteger&gt; answer = new LinkedBlockingQueue&lt;BigInteger&gt;();\n\n    public BigInteger getFactorial() {\n        boolean interrupted = false;\n        try {\n            for (;;) {\n                try {\n                    return answer.take();\n                } catch (InterruptedException ignore) {\n                    interrupted = true;\n                }\n            }\n        } finally {\n            if (interrupted) {\n                Thread.currentThread().interrupt();\n            }\n        }\n    }\n\n    @Override\n    public void channelActive(ChannelHandlerContext ctx) {\n        this.ctx = ctx;\n        sendNumbers();\n    }\n\n    @Override\n    public void channelRead0(ChannelHandlerContext ctx, final BigInteger msg) {\n        receivedMessages ++;\n        if (receivedMessages == FactorialClient.COUNT) {\n            // Offer the answer after closing the connection.\n            ctx.channel().close().addListener(new ChannelFutureListener() {\n                @Override\n                public void operationComplete(ChannelFuture future) {\n                    boolean offered = answer.offer(msg);\n                    assert offered;\n                }\n            });\n        }\n    }\n\n    @Override\n    public void exceptionCaught(ChannelHandlerContext ctx, Throwable cause) {\n        cause.printStackTrace();\n        ctx.close();\n    }\n\n    private void sendNumbers() {\n        // Do not send more than 4096 numbers.\n        ChannelFuture future = null;\n        for (int i = 0; i &lt; 4096 &amp;&amp; next &lt;= FactorialClient.COUNT; i++) {\n            future = ctx.write(Integer.valueOf(next));\n            next++;\n        }\n        if (next &lt;= FactorialClient.COUNT) {\n            assert future != null;\n            future.addListener(numberSender);\n        }\n        ctx.flush();\n    }\n\n    private final ChannelFutureListener numberSender = new ChannelFutureListener() {\n        @Override\n        public void operationComplete(ChannelFuture future) throws Exception {\n            if (future.isSuccess()) {\n                sendNumbers();\n            } else {\n                future.cause().printStackTrace();\n                future.channel().close();\n            }\n        }\n    };\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10253730,"reputation":11,"user_id":7567122,"display_name":"baiyang"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681198381,"creation_date":1681198381,"answer_id":75983450,"question_id":23128232,"body_markdown":"Here is another solution, all you need is familiar with the asynchronous programming that netty using.\r\n\r\nBelow solution is mainly using child netty channel and LinkedBlockingQueue.\r\n\r\nIn your inbound handler,\r\n```Java\r\n@ChannelHandler.Sharable\r\npublic class ClientInboundHandler extends ChannelInboundHandlerAdapter {\r\n    @Override\r\n    public void channelRead(ChannelHandlerContext ctx, Object msg) throws Exception {\r\n        Channel channel = ctx.channel();\r\n        Attribute&lt;SensibleRelay&gt; relayAttr = channel.attr(ChannelAttributeKeys.RELAY);\r\n        if (null == relayAttr) {\r\n            return;\r\n        }\r\n\r\n        FullHttpResponse httpResponse = (FullHttpResponse) msg;\r\n        ByteBuf content = httpResponse.content();\r\n      \r\n        SensibleRelay relay = relayAttr.get();\r\n        boolean offered = relay.offerResponse(content.toString(StandardCharsets.UTF_8));\r\n        assert offered;\r\n    }\r\n}\r\n```\r\n\r\nIn your netty client, \r\n```Java\r\nSensibleRelay relay = new SensibleRelay();\r\nfuture.addListener(new FutureListener&lt;Channel&gt;() {\r\n    @Override\r\n    public void operationComplete(Future&lt;Channel&gt; f) throws Exception {\r\n        if (f.isSuccess()) {\r\n            Channel channel = f.getNow();\r\n            \r\n            channel.attr(ChannelAttributeKeys.RELAY).set(relay);\r\n\r\n            channel.writeAndFlush(request);\r\n        } \r\n    }\r\n});\r\n\r\nreturn relay.takeResponse();\r\n```\r\n\r\nAnd here is the `SensibleRelay` class\r\n```Java\r\npublic class SensibleRelay {\r\n\r\n    final BlockingQueue&lt;String&gt; answer = new LinkedBlockingQueue&lt;String&gt;(1);\r\n\r\n    public String takeResponse() {\r\n        boolean interrupted = false;\r\n        try {\r\n            for (;;) {\r\n                try {\r\n                    return answer.take();\r\n                } catch (InterruptedException ignore) {\r\n                    interrupted = true;\r\n                }\r\n            }\r\n        } finally {\r\n            if (interrupted) {\r\n                Thread.currentThread().interrupt();\r\n            }\r\n        }\r\n    }\r\n\r\n    public boolean offerResponse(String response) {\r\n        return answer.offer(response);\r\n    }\r\n\r\n}\r\n``` \r\n\r\nHope this will help you.\r\n\r\n","title":"How to get server response with netty client","body":"<p>Here is another solution, all you need is familiar with the asynchronous programming that netty using.</p>\n<p>Below solution is mainly using child netty channel and LinkedBlockingQueue.</p>\n<p>In your inbound handler,</p>\n<pre><code>@ChannelHandler.Sharable\npublic class ClientInboundHandler extends ChannelInboundHandlerAdapter {\n    @Override\n    public void channelRead(ChannelHandlerContext ctx, Object msg) throws Exception {\n        Channel channel = ctx.channel();\n        Attribute&lt;SensibleRelay&gt; relayAttr = channel.attr(ChannelAttributeKeys.RELAY);\n        if (null == relayAttr) {\n            return;\n        }\n\n        FullHttpResponse httpResponse = (FullHttpResponse) msg;\n        ByteBuf content = httpResponse.content();\n      \n        SensibleRelay relay = relayAttr.get();\n        boolean offered = relay.offerResponse(content.toString(StandardCharsets.UTF_8));\n        assert offered;\n    }\n}\n</code></pre>\n<p>In your netty client,</p>\n<pre><code>SensibleRelay relay = new SensibleRelay();\nfuture.addListener(new FutureListener&lt;Channel&gt;() {\n    @Override\n    public void operationComplete(Future&lt;Channel&gt; f) throws Exception {\n        if (f.isSuccess()) {\n            Channel channel = f.getNow();\n            \n            channel.attr(ChannelAttributeKeys.RELAY).set(relay);\n\n            channel.writeAndFlush(request);\n        } \n    }\n});\n\nreturn relay.takeResponse();\n</code></pre>\n<p>And here is the <code>SensibleRelay</code> class</p>\n<pre><code>public class SensibleRelay {\n\n    final BlockingQueue&lt;String&gt; answer = new LinkedBlockingQueue&lt;String&gt;(1);\n\n    public String takeResponse() {\n        boolean interrupted = false;\n        try {\n            for (;;) {\n                try {\n                    return answer.take();\n                } catch (InterruptedException ignore) {\n                    interrupted = true;\n                }\n            }\n        } finally {\n            if (interrupted) {\n                Thread.currentThread().interrupt();\n            }\n        }\n    }\n\n    public boolean offerResponse(String response) {\n        return answer.offer(response);\n    }\n\n}\n</code></pre>\n<p>Hope this will help you.</p>\n"}],"owner":{"account_id":2026878,"reputation":1243,"user_id":1823997,"accept_rate":55,"display_name":"Moses"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17407,"favorite_count":0,"down_vote_count":0,"up_vote_count":16,"answer_count":4,"score":16,"last_activity_date":1681198381,"creation_date":1397723430,"question_id":23128232,"body_markdown":"I want to write a netty based client. It should have method *public String send(String msg);* which should return response from the server or some future - doesen&#39;t matter. Also it should be multithreaded. Like this:\r\n\r\n    public class Client {\r\n    public static void main(String[] args) throws InterruptedException {\r\n        Client client = new Client();\r\n\r\n    }\r\n\r\n    private Channel channel;\r\n\r\n    public Client() throws InterruptedException {\r\n        EventLoopGroup loopGroup = new NioEventLoopGroup();\r\n\r\n        Bootstrap b = new Bootstrap();\r\n        b.group(loopGroup).channel(NioSocketChannel.class).handler(new ChannelInitializer&lt;SocketChannel&gt;() {\r\n            @Override\r\n            protected void initChannel(SocketChannel ch) throws Exception {\r\n                ch.pipeline().addLast(new StringDecoder()).\r\n                        addLast(new StringEncoder()).\r\n                        addLast(new ClientHandler());\r\n            }\r\n        });\r\n        channel = b.connect(&quot;localhost&quot;, 9091).sync().channel();\r\n    }\r\n\r\n    public String sendMessage(String msg) {\r\n        channel.writeAndFlush(msg);\r\n        return ??????????;\r\n    }\r\n}\r\n\r\nAnd I don&#39;t get how can I retrieve response from server after I invoke writeAndFlush(); What should I do?\r\n\r\nAlso I use Netty 4.0.18.Final","title":"How to get server response with netty client","body":"<p>I want to write a netty based client. It should have method <em>public String send(String msg);</em> which should return response from the server or some future - doesen't matter. Also it should be multithreaded. Like this:</p>\n\n<pre><code>public class Client {\npublic static void main(String[] args) throws InterruptedException {\n    Client client = new Client();\n\n}\n\nprivate Channel channel;\n\npublic Client() throws InterruptedException {\n    EventLoopGroup loopGroup = new NioEventLoopGroup();\n\n    Bootstrap b = new Bootstrap();\n    b.group(loopGroup).channel(NioSocketChannel.class).handler(new ChannelInitializer&lt;SocketChannel&gt;() {\n        @Override\n        protected void initChannel(SocketChannel ch) throws Exception {\n            ch.pipeline().addLast(new StringDecoder()).\n                    addLast(new StringEncoder()).\n                    addLast(new ClientHandler());\n        }\n    });\n    channel = b.connect(\"localhost\", 9091).sync().channel();\n}\n\npublic String sendMessage(String msg) {\n    channel.writeAndFlush(msg);\n    return ??????????;\n}\n</code></pre>\n\n<p>}</p>\n\n<p>And I don't get how can I retrieve response from server after I invoke writeAndFlush(); What should I do?</p>\n\n<p>Also I use Netty 4.0.18.Final</p>\n"},{"tags":["java","servlets","jdbc","jna","shutdown-hook"],"comments":[{"owner":{"account_id":2315188,"reputation":4406,"user_id":2032415,"display_name":"Tomasz Linkowski"},"score":1,"creation_date":1534276258,"post_id":51685146,"comment_id":90650864,"body_markdown":"Could you please explain what you mean by the driver being deployed to the server as a whole? I could not find anything about it, and I&#39;m not aware of such functionality (at least not in Tomcat). I currently use the `@WebListener`-based solution in Tomcat to deregister a few `java.sql.Driver`s (using `DriverManager.deregisterDriver`) in a few containers (I always deregister exactly the driver that got registered by given container by storing `Class&lt;? extends java.sql.Driver&gt;`), and I&#39;m wondering whether I haven&#39;t overlooked something.","body":"Could you please explain what you mean by the driver being deployed to the server as a whole? I could not find anything about it, and I&#39;m not aware of such functionality (at least not in Tomcat). I currently use the <code>@WebListener</code>-based solution in Tomcat to deregister a few <code>java.sql.Driver</code>s (using <code>DriverManager.deregisterDriver</code>) in a few containers (I always deregister exactly the driver that got registered by given container by storing <code>Class&lt;? extends java.sql.Driver&gt;</code>), and I&#39;m wondering whether I haven&#39;t overlooked something."},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1534318873,"post_id":51685146,"comment_id":90661784,"body_markdown":"@TomaszLinkowski You can deploy a driver so the driver is globally available (possibly used as a server-wide data source). For example in Tomcat if you put it in `&lt;catalina-home&gt;/lib` and define a data source in server.xml. Similar features exist in other application servers. Manually registering/deregistering the driver won&#39;t work for those situations (nor will this work for non-web applications), and I don&#39;t think it will solve my problem if the driver is globally available even if registered per WAR (`java.sql.Driver` implementations are (or should be) pretty light-weight).","body":"@TomaszLinkowski You can deploy a driver so the driver is globally available (possibly used as a server-wide data source). For example in Tomcat if you put it in <code>&lt;catalina-home&gt;&#47;lib</code> and define a data source in server.xml. Similar features exist in other application servers. Manually registering/deregistering the driver won&#39;t work for those situations (nor will this work for non-web applications), and I don&#39;t think it will solve my problem if the driver is globally available even if registered per WAR (<code>java.sql.Driver</code> implementations are (or should be) pretty light-weight)."},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1534319549,"post_id":51685146,"comment_id":90662049,"body_markdown":"@TomaszLinkowski re: light-weight: a driver itself doesn&#39;t actually &#39;hold&#39; much, so the rest of the implementation could be shared, so deregistering my native library in that situations will probably be a bad idea (or require some additional reflection magic). Given the lack of responses so far, it looks like there is no mechanism that I can apply in all situations, so I will have to find some hybrid approach.","body":"@TomaszLinkowski re: light-weight: a driver itself doesn&#39;t actually &#39;hold&#39; much, so the rest of the implementation could be shared, so deregistering my native library in that situations will probably be a bad idea (or require some additional reflection magic). Given the lack of responses so far, it looks like there is no mechanism that I can apply in all situations, so I will have to find some hybrid approach."},{"owner":{"account_id":2315188,"reputation":4406,"user_id":2032415,"display_name":"Tomasz Linkowski"},"score":0,"creation_date":1534333151,"post_id":51685146,"comment_id":90668037,"body_markdown":"Thanks for the explanation :) Well, I understand you need to do more than I do (I just deregister the drivers so that Tomcat doesn&#39;t complain upon redeploys). As far as I understand, you want to shutdown the embedded engine *only if* no drivers are registered anymore, right? So e.g. if there&#39;s *no* global driver, and you have two containers, and each registered its driver, then if one container is destroyed, you do *not* want to shutdown the embedded engine until the second one is destroyed, right? And if there *is* a global engine, you want to shutdown only on app server shutdown, is that so?","body":"Thanks for the explanation :) Well, I understand you need to do more than I do (I just deregister the drivers so that Tomcat doesn&#39;t complain upon redeploys). As far as I understand, you want to shutdown the embedded engine <i>only if</i> no drivers are registered anymore, right? So e.g. if there&#39;s <i>no</i> global driver, and you have two containers, and each registered its driver, then if one container is destroyed, you do <i>not</i> want to shutdown the embedded engine until the second one is destroyed, right? And if there <i>is</i> a global engine, you want to shutdown only on app server shutdown, is that so?"},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1534335627,"post_id":51685146,"comment_id":90669199,"body_markdown":"@TomaszLinkowski That sounds about right, except for the &#39;no global driver&#39; situation, the embedded engine will need to be shutdown on container destruction, as the embedded engine in that case will be loaded per container.","body":"@TomaszLinkowski That sounds about right, except for the &#39;no global driver&#39; situation, the embedded engine will need to be shutdown on container destruction, as the embedded engine in that case will be loaded per container."}],"answers":[{"comments":[{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1534407424,"post_id":51866096,"comment_id":90696446,"body_markdown":"This looks like a promising solution, thanks. I can see some possible pain points to implement this, but I think this may work.","body":"This looks like a promising solution, thanks. I can see some possible pain points to implement this, but I think this may work."},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1555751503,"post_id":51866096,"comment_id":98216904,"body_markdown":"I took a while to get to this, but I have finally implemented it: https://github.com/FirebirdSQL/jaybird/commit/7e65ee051cbfb8d179777095c4a55f214c32a298 Thanks again for your help.","body":"I took a while to get to this, but I have finally implemented it: <a href=\"https://github.com/FirebirdSQL/jaybird/commit/7e65ee051cbfb8d179777095c4a55f214c32a298\" rel=\"nofollow noreferrer\">github.com/FirebirdSQL/jaybird/commit/&hellip;</a> Thanks again for your help."},{"owner":{"account_id":2315188,"reputation":4406,"user_id":2032415,"display_name":"Tomasz Linkowski"},"score":1,"creation_date":1555776305,"post_id":51866096,"comment_id":98222934,"body_markdown":"@MarkRotteveel I&#39;m glad you managed to solve the problem. I see it&#39;s a bit different to what I proposed (e.g. you use `removeShutdownHook`, and you compare `ClassLoader`s to determine if the driver was loaded in a servlet context or not), but I trust you had good reasons for such an approach :)","body":"@MarkRotteveel I&#39;m glad you managed to solve the problem. I see it&#39;s a bit different to what I proposed (e.g. you use <code>removeShutdownHook</code>, and you compare <code>ClassLoader</code>s to determine if the driver was loaded in a servlet context or not), but I trust you had good reasons for such an approach :)"},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1555776882,"post_id":51866096,"comment_id":98223063,"body_markdown":"Yes, I modified your approach to solve issues when the driver is on the main classpath, but only first accessed from within the servlet context. With your approach that would lead to issues if the driver was used in multiple contexts, and one was stopped or redeployed. My current solution works in Tomcat, although I still have to test it in other application servers (checking the classloaders might be too naive).","body":"Yes, I modified your approach to solve issues when the driver is on the main classpath, but only first accessed from within the servlet context. With your approach that would lead to issues if the driver was used in multiple contexts, and one was stopped or redeployed. My current solution works in Tomcat, although I still have to test it in other application servers (checking the classloaders might be too naive)."},{"owner":{"account_id":2315188,"reputation":4406,"user_id":2032415,"display_name":"Tomasz Linkowski"},"score":0,"creation_date":1555788593,"post_id":51866096,"comment_id":98226171,"body_markdown":"I see, that&#39;s what I was afraid might be the case when I wrote: &quot;if the driver is deployed globally, would it be registered before any servlet is initialized?&quot;. Nice that you managed to work around it!","body":"I see, that&#39;s what I was afraid might be the case when I wrote: &quot;if the driver is deployed globally, would it be registered before any servlet is initialized?&quot;. Nice that you managed to work around it!"},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1555790746,"post_id":51866096,"comment_id":98226686,"body_markdown":"Yes, it took some trial and error to get it to work, but your answer gave me a good starting point. And in just in case I messed things up (or didn&#39;t consider certain cases), I also defined a system property that disables this cleanup/shutdown feature entirely.","body":"Yes, it took some trial and error to get it to work, but your answer gave me a good starting point. And in just in case I messed things up (or didn&#39;t consider certain cases), I also defined a system property that disables this cleanup/shutdown feature entirely."}],"tags":[],"owner":{"account_id":2315188,"reputation":4406,"user_id":2032415,"display_name":"Tomasz Linkowski"},"comment_count":6,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1534405303,"creation_date":1534365620,"answer_id":51866096,"question_id":51685146,"body_markdown":"I tried to figure this out as this seems such an interesting case. I&#39;m posting my findings here, although I feel I might still have misunderstood something, or made some too far-fetched simplifications. Actually, it&#39;s also possible that I totally misunderstood your case, and this answer is all useless (if so, I apologize).\r\n\r\nWhat I assembled here is based on two notions:\r\n\r\n- application server global state (I use `System.props`, but it might not be the best choice - perhaps some temporary files would do better)\r\n- container-specific global state (which means all classes loaded by the container-specific `ClassLoader`)\r\n\r\nI propose an `EmbeddedEngineHandler.loadEmbeddedEngineIfNeeded` method that would be called:\r\n\r\n- during your driver registration\r\n- in your `javax.sql.DataSource` implementation static initializer (if this whole `DataSource`-related thing works that way - I know little about it)\r\n\r\nIf I got it right, you won&#39;t need to call `Runtime.removeShutdownHook` at all.\r\n\r\nThe main thing that I&#39;m uncertain about here is this - if the driver is deployed globally, would it be registered before any servlet is initialized? If not, then I got it wrong, and this won&#39;t work. But maybe inspecting the `ClassLoader` of `EmbeddedEngineHandler` could help then?\r\n\r\n---\r\n\r\nThis is the `EmbeddedEngineHandler`:\r\n\r\n    final class EmbeddedEngineHandler {\r\n    \r\n        private static final String PREFIX = &quot;&quot;; // some ID for your library here\r\n        private static final String IS_SERVLET_CONTEXT = PREFIX + &quot;-is-servlet-context&quot;;\r\n        private static final String GLOBAL_ENGINE_LOADED = PREFIX + &quot;-global-engine-loaded&quot;;\r\n    \r\n        private static final String TRUE = &quot;true&quot;;\r\n    \r\n        private static volatile boolean localEngineLoaded = false;\r\n    \r\n        // LOADING\r\n        static void loadEmbeddedEngineIfNeeded() {\r\n            if (isServletContext()) {\r\n                // handles only engine per container case\r\n                loadEmbeddedEngineInLocalContextIfNeeded();\r\n            } else {\r\n                // handles both normal Java application &amp; global driver cases\r\n                loadEmbeddedEngineInGlobalContextIfNeeded();\r\n            }\r\n    \r\n        }\r\n    \r\n        private static void loadEmbeddedEngineInLocalContextIfNeeded() {\r\n            if (!isGlobalEngineLoaded() &amp;&amp; !isLocalEngineLoaded()) { // will not load if we have a global driver\r\n                loadEmbeddedEngine();\r\n                markLocalEngineAsLoaded();\r\n            }\r\n        }\r\n    \r\n        private static void loadEmbeddedEngineInGlobalContextIfNeeded() {\r\n            if (!isGlobalEngineLoaded()) {\r\n                loadEmbeddedEngine();\r\n                markGlobalEngineAsLoaded();\r\n                Runtime.getRuntime().addShutdownHook(new Thread(EmbeddedEngineHandler::unloadEmbeddedEngine));\r\n            }\r\n        }\r\n    \r\n        private static void loadEmbeddedEngine() {\r\n        }\r\n    \r\n        static void unloadEmbeddedEngine() {\r\n        }\r\n    \r\n        // SERVLET CONTEXT (state shared between containers)\r\n        private static boolean isServletContext() {\r\n            return TRUE.equals(System.getProperty(IS_SERVLET_CONTEXT));\r\n        }\r\n    \r\n        static void markAsServletContext() {\r\n            System.setProperty(IS_SERVLET_CONTEXT, TRUE);\r\n        }\r\n    \r\n        // GLOBAL ENGINE (state shared between containers)\r\n        private static boolean isGlobalEngineLoaded() {\r\n            return TRUE.equals(System.getProperty(GLOBAL_ENGINE_LOADED));\r\n        }\r\n    \r\n        private static void markGlobalEngineAsLoaded() {\r\n            System.setProperty(GLOBAL_ENGINE_LOADED, TRUE);\r\n        }\r\n    \r\n        // LOCAL ENGINE (container-specific state)\r\n        static boolean isLocalEngineLoaded() {\r\n            return localEngineLoaded;\r\n        }\r\n    \r\n        private static void markLocalEngineAsLoaded() {\r\n            localEngineLoaded = true;\r\n        }\r\n    }\r\n\r\nand this is the `ServletContextListener`:\r\n\r\n    @WebListener\r\n    final class YourServletContextListener implements ServletContextListener {\r\n    \r\n        @Override\r\n        public void contextInitialized(ServletContextEvent sce) {\r\n            EmbeddedEngineHandler.markAsServletContext();\r\n        }\r\n    \r\n        @Override\r\n        public void contextDestroyed(ServletContextEvent sce) {\r\n            if (EmbeddedEngineHandler.isLocalEngineLoaded()) {\r\n                EmbeddedEngineHandler.unloadEmbeddedEngine();\r\n            }\r\n        }\r\n    }","title":"Library shutdown routine that works well in a &quot;normal&quot; Java application and in a web application","body":"<p>I tried to figure this out as this seems such an interesting case. I'm posting my findings here, although I feel I might still have misunderstood something, or made some too far-fetched simplifications. Actually, it's also possible that I totally misunderstood your case, and this answer is all useless (if so, I apologize).</p>\n\n<p>What I assembled here is based on two notions:</p>\n\n<ul>\n<li>application server global state (I use <code>System.props</code>, but it might not be the best choice - perhaps some temporary files would do better)</li>\n<li>container-specific global state (which means all classes loaded by the container-specific <code>ClassLoader</code>)</li>\n</ul>\n\n<p>I propose an <code>EmbeddedEngineHandler.loadEmbeddedEngineIfNeeded</code> method that would be called:</p>\n\n<ul>\n<li>during your driver registration</li>\n<li>in your <code>javax.sql.DataSource</code> implementation static initializer (if this whole <code>DataSource</code>-related thing works that way - I know little about it)</li>\n</ul>\n\n<p>If I got it right, you won't need to call <code>Runtime.removeShutdownHook</code> at all.</p>\n\n<p>The main thing that I'm uncertain about here is this - if the driver is deployed globally, would it be registered before any servlet is initialized? If not, then I got it wrong, and this won't work. But maybe inspecting the <code>ClassLoader</code> of <code>EmbeddedEngineHandler</code> could help then?</p>\n\n<hr>\n\n<p>This is the <code>EmbeddedEngineHandler</code>:</p>\n\n<pre><code>final class EmbeddedEngineHandler {\n\n    private static final String PREFIX = \"\"; // some ID for your library here\n    private static final String IS_SERVLET_CONTEXT = PREFIX + \"-is-servlet-context\";\n    private static final String GLOBAL_ENGINE_LOADED = PREFIX + \"-global-engine-loaded\";\n\n    private static final String TRUE = \"true\";\n\n    private static volatile boolean localEngineLoaded = false;\n\n    // LOADING\n    static void loadEmbeddedEngineIfNeeded() {\n        if (isServletContext()) {\n            // handles only engine per container case\n            loadEmbeddedEngineInLocalContextIfNeeded();\n        } else {\n            // handles both normal Java application &amp; global driver cases\n            loadEmbeddedEngineInGlobalContextIfNeeded();\n        }\n\n    }\n\n    private static void loadEmbeddedEngineInLocalContextIfNeeded() {\n        if (!isGlobalEngineLoaded() &amp;&amp; !isLocalEngineLoaded()) { // will not load if we have a global driver\n            loadEmbeddedEngine();\n            markLocalEngineAsLoaded();\n        }\n    }\n\n    private static void loadEmbeddedEngineInGlobalContextIfNeeded() {\n        if (!isGlobalEngineLoaded()) {\n            loadEmbeddedEngine();\n            markGlobalEngineAsLoaded();\n            Runtime.getRuntime().addShutdownHook(new Thread(EmbeddedEngineHandler::unloadEmbeddedEngine));\n        }\n    }\n\n    private static void loadEmbeddedEngine() {\n    }\n\n    static void unloadEmbeddedEngine() {\n    }\n\n    // SERVLET CONTEXT (state shared between containers)\n    private static boolean isServletContext() {\n        return TRUE.equals(System.getProperty(IS_SERVLET_CONTEXT));\n    }\n\n    static void markAsServletContext() {\n        System.setProperty(IS_SERVLET_CONTEXT, TRUE);\n    }\n\n    // GLOBAL ENGINE (state shared between containers)\n    private static boolean isGlobalEngineLoaded() {\n        return TRUE.equals(System.getProperty(GLOBAL_ENGINE_LOADED));\n    }\n\n    private static void markGlobalEngineAsLoaded() {\n        System.setProperty(GLOBAL_ENGINE_LOADED, TRUE);\n    }\n\n    // LOCAL ENGINE (container-specific state)\n    static boolean isLocalEngineLoaded() {\n        return localEngineLoaded;\n    }\n\n    private static void markLocalEngineAsLoaded() {\n        localEngineLoaded = true;\n    }\n}\n</code></pre>\n\n<p>and this is the <code>ServletContextListener</code>:</p>\n\n<pre><code>@WebListener\nfinal class YourServletContextListener implements ServletContextListener {\n\n    @Override\n    public void contextInitialized(ServletContextEvent sce) {\n        EmbeddedEngineHandler.markAsServletContext();\n    }\n\n    @Override\n    public void contextDestroyed(ServletContextEvent sce) {\n        if (EmbeddedEngineHandler.isLocalEngineLoaded()) {\n            EmbeddedEngineHandler.unloadEmbeddedEngine();\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":573,"favorite_count":0,"down_vote_count":3,"up_vote_count":15,"accepted_answer_id":51866096,"answer_count":1,"score":12,"last_activity_date":1681198304,"creation_date":1533382174,"question_id":51685146,"body_markdown":"I maintain a JDBC driver that also has an embedded database server mode provided through a native library, which is accessed through JNA. The shutdown process, done as part of unloading the native library itself, runs into problems on Windows due to the order of unloading its dependencies. To avoid access violations or other issues, I need to explicitly shut down the embedded engine before unloading this library.\r\n\r\nDue to the nature of its use, it is difficult to determine an appropriate moment to call for a shutdown. The only correct way to do this for a normal Java application is by registering a shutdown hook using\r\n\r\n`Runtime.getRuntime().addShutdownHook` with a subclass of `Thread` that implements the shutdown logic. \r\n\r\nThis works fine for a normal Java application, but for web applications that include my library as part of the application (in the `WEB-INF/lib` of the WAR), this will cause a memory leak on undeploy as the shutdown hook will maintain a strong reference to my shutdown implementation and to the classloader of the web application.\r\n\r\nWhat would be a suitable and appropriate way to address this? Options I&#39;m looking into right now are:\r\n\r\n- Using `java.sql.DriverAction.deregister()` to do the cleanup.\r\n\r\n  Not suitable as a driver will not be deregistered on a normal application exit.\r\n\r\n- Using `java.sql.DriverAction.deregister()` to remove the shutdown hook and execute the shutdown logic itself.\r\n\r\n  Use of `DriverAction` is slightly problematic given the driver still supports Java 7, and this class was introduced in JDBC 4.2 (Java 8). This is technically not always the correct use of action (a JDBC driver can also be deregistered while existing connections remain valid and in use), and it is possible that the driver is used (through a `javax.sql.DataSource`) while the JDBC `java.sql.Driver` implementation is not registered.\r\n\r\n- Including a `javax.servlet.ServletContextListener` implementation annotated with `@WebListener` with the driver that will remove the shutdown hook and execute the shutdown logic itself.\r\n\r\n  This option has complications if the driver is deployed to the server as a whole instead of to a specific web application (although those complications can be solved).\r\n\r\nIs there a shutdown mechanism in Java I have overlooked that could be suitable for my needs?","title":"Library shutdown routine that works well in a &quot;normal&quot; Java application and in a web application","body":"<p>I maintain a JDBC driver that also has an embedded database server mode provided through a native library, which is accessed through JNA. The shutdown process, done as part of unloading the native library itself, runs into problems on Windows due to the order of unloading its dependencies. To avoid access violations or other issues, I need to explicitly shut down the embedded engine before unloading this library.</p>\n<p>Due to the nature of its use, it is difficult to determine an appropriate moment to call for a shutdown. The only correct way to do this for a normal Java application is by registering a shutdown hook using</p>\n<p><code>Runtime.getRuntime().addShutdownHook</code> with a subclass of <code>Thread</code> that implements the shutdown logic.</p>\n<p>This works fine for a normal Java application, but for web applications that include my library as part of the application (in the <code>WEB-INF/lib</code> of the WAR), this will cause a memory leak on undeploy as the shutdown hook will maintain a strong reference to my shutdown implementation and to the classloader of the web application.</p>\n<p>What would be a suitable and appropriate way to address this? Options I'm looking into right now are:</p>\n<ul>\n<li><p>Using <code>java.sql.DriverAction.deregister()</code> to do the cleanup.</p>\n<p>Not suitable as a driver will not be deregistered on a normal application exit.</p>\n</li>\n<li><p>Using <code>java.sql.DriverAction.deregister()</code> to remove the shutdown hook and execute the shutdown logic itself.</p>\n<p>Use of <code>DriverAction</code> is slightly problematic given the driver still supports Java 7, and this class was introduced in JDBC 4.2 (Java 8). This is technically not always the correct use of action (a JDBC driver can also be deregistered while existing connections remain valid and in use), and it is possible that the driver is used (through a <code>javax.sql.DataSource</code>) while the JDBC <code>java.sql.Driver</code> implementation is not registered.</p>\n</li>\n<li><p>Including a <code>javax.servlet.ServletContextListener</code> implementation annotated with <code>@WebListener</code> with the driver that will remove the shutdown hook and execute the shutdown logic itself.</p>\n<p>This option has complications if the driver is deployed to the server as a whole instead of to a specific web application (although those complications can be solved).</p>\n</li>\n</ul>\n<p>Is there a shutdown mechanism in Java I have overlooked that could be suitable for my needs?</p>\n"},{"tags":["java","spring","spring-boot","spring-data","spring-autoconfiguration"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1681194202,"post_id":75982921,"comment_id":134012690,"body_markdown":"And why wouldn&#39;t that work. Make the things that are read from dynamo part of the environment as a propertysource (as that is what you are using it for apparently). That way it will work with regular constructs instead of trying to shoehorn something new into it.","body":"And why wouldn&#39;t that work. Make the things that are read from dynamo part of the environment as a propertysource (as that is what you are using it for apparently). That way it will work with regular constructs instead of trying to shoehorn something new into it."},{"owner":{"account_id":8362008,"reputation":75,"user_id":6279967,"display_name":"Jobin Thomas"},"score":0,"creation_date":1681195337,"post_id":75982921,"comment_id":134012892,"body_markdown":"@M.Deinum I have just provided a simplified code snippet of what the dynamo data is being used for. It will be difficult to explain it fully but the Dynamo Config is used to build Dynamic Camel Routes which integrates with various sources and targets. So the Dynamo Config is not a map that can be used as a property source but has a lot of nested configs which are not really supposed to be injected as spring properties.","body":"@M.Deinum I have just provided a simplified code snippet of what the dynamo data is being used for. It will be difficult to explain it fully but the Dynamo Config is used to build Dynamic Camel Routes which integrates with various sources and targets. So the Dynamo Config is not a map that can be used as a property source but has a lot of nested configs which are not really supposed to be injected as spring properties."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1681195817,"post_id":75982921,"comment_id":134012975,"body_markdown":"The joys of asking a question with dumbed down code (please don&#39;t). Nonetheless you can still expose it (or at least some properties) as property source and use all the general available features. That way you know it will work, shoehorning something else it will eventually end up breaking (as things will change in between versions). I would also argue that it might even make your camel route registration easier (but that is just without seeing and knowing what you are doing).","body":"The joys of asking a question with dumbed down code (please don&#39;t). Nonetheless you can still expose it (or at least some properties) as property source and use all the general available features. That way you know it will work, shoehorning something else it will eventually end up breaking (as things will change in between versions). I would also argue that it might even make your camel route registration easier (but that is just without seeing and knowing what you are doing)."}],"answers":[{"tags":[],"owner":{"account_id":298886,"reputation":40480,"user_id":605153,"accept_rate":67,"display_name":"Mark Bramnik"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681197867,"creation_date":1681197867,"answer_id":75983382,"question_id":75982921,"body_markdown":"I haven&#39;t tried it for this use case, but consider implementing `EnvironmentPostProcessor` that will connect to dynamo db and read the necessary properties, and based on the values in the database it will programmatically create a &quot;business oriented property map property source&quot; and define a property that later can be used as a condition for your `DbConfig` configuration:\r\n\r\nSomething like this:\r\n\r\n```java\r\npackage org.mypackage;\r\n@Order(Ordered.LOWEST_PRECEDENCE)\r\npublic class DataBaseAvailabilityResolvingEnvPostProcessor implements EnvironmentPostProcessor {\r\n\r\n    @Override\r\n    public void postProcessEnvironment(ConfigurableEnvironment environment, \r\n      SpringApplication application) {\r\n        // connect to Dynamo Db, use environment to read connection string, credentials, etc.\r\n        // resolve the values from the dynamo db and based on those:\r\n\r\n        environment.getPropertySources()\r\n          .addAfter(SYSTEM_ENVIRONMENT_PROPERTY_SOURCE_NAME, new MapPropertySource(...)); // add property named &quot;mydb.enabled&quot; with value true or false \r\n    }\r\n}\r\n```\r\n\r\nNow you can register it in `META-INF/spring.factories` as usual:\r\n\r\n```\r\norg.springframework.boot.env.EnvironmentPostProcessor=\r\n  org.mypackage.DataBaseAvailabilityResolvingEnvPostProcessor\r\n```\r\n\r\nSo spring run trigger this code even before it comes `@Configuration` annotated classes processing.\r\n\r\nNow on your configuration class you can use `@ConditionalOnProperty`, like this:\r\n\r\n```\r\n@Configuration\r\n@EnableTransactionManagement\r\n@EnableJpaRepositories(basePackages = &quot;com.mypackages&quot;,\r\n       entityManagerFactoryRef = &quot;myEntityManagerFactory,\r\n        transactionManagerRef = &quot;myTransactionManager&quot;)\r\n@ConditionalOnProperty(name = &quot;mydb.enabled&quot;, havingValue = true) // I&#39;ve added this line\r\npublic class DBConfig {\r\n...\r\n}\r\n```\r\n\r\nAnother (although really similar option) is instead of creating a `MappedPropertySource` in the environment post processor class, register an &quot;artificial&quot; profile (you can add profiles dynamically). In this case, the configuration class will rely on the presence of the profile.\r\n","title":"Manually register a Spring @Configuration class","body":"<p>I haven't tried it for this use case, but consider implementing <code>EnvironmentPostProcessor</code> that will connect to dynamo db and read the necessary properties, and based on the values in the database it will programmatically create a &quot;business oriented property map property source&quot; and define a property that later can be used as a condition for your <code>DbConfig</code> configuration:</p>\n<p>Something like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package org.mypackage;\n@Order(Ordered.LOWEST_PRECEDENCE)\npublic class DataBaseAvailabilityResolvingEnvPostProcessor implements EnvironmentPostProcessor {\n\n    @Override\n    public void postProcessEnvironment(ConfigurableEnvironment environment, \n      SpringApplication application) {\n        // connect to Dynamo Db, use environment to read connection string, credentials, etc.\n        // resolve the values from the dynamo db and based on those:\n\n        environment.getPropertySources()\n          .addAfter(SYSTEM_ENVIRONMENT_PROPERTY_SOURCE_NAME, new MapPropertySource(...)); // add property named &quot;mydb.enabled&quot; with value true or false \n    }\n}\n</code></pre>\n<p>Now you can register it in <code>META-INF/spring.factories</code> as usual:</p>\n<pre><code>org.springframework.boot.env.EnvironmentPostProcessor=\n  org.mypackage.DataBaseAvailabilityResolvingEnvPostProcessor\n</code></pre>\n<p>So spring run trigger this code even before it comes <code>@Configuration</code> annotated classes processing.</p>\n<p>Now on your configuration class you can use <code>@ConditionalOnProperty</code>, like this:</p>\n<pre><code>@Configuration\n@EnableTransactionManagement\n@EnableJpaRepositories(basePackages = &quot;com.mypackages&quot;,\n       entityManagerFactoryRef = &quot;myEntityManagerFactory,\n        transactionManagerRef = &quot;myTransactionManager&quot;)\n@ConditionalOnProperty(name = &quot;mydb.enabled&quot;, havingValue = true) // I've added this line\npublic class DBConfig {\n...\n}\n</code></pre>\n<p>Another (although really similar option) is instead of creating a <code>MappedPropertySource</code> in the environment post processor class, register an &quot;artificial&quot; profile (you can add profiles dynamically). In this case, the configuration class will rely on the presence of the profile.</p>\n"}],"owner":{"account_id":8362008,"reputation":75,"user_id":6279967,"display_name":"Jobin Thomas"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":385,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681197867,"creation_date":1681194070,"question_id":75982921,"body_markdown":"I have a Spring ``@Configuration`` class which creates a bunch of Spring Beans and has few Spring Data Annotations. Is there a way for me to not add the ``@Configuration`` Annotation so that Spring does not pick it automatically and instead I can add it programmatically?\r\n\r\n```java\r\n@Configuration\r\n@EnableTransactionManagement\r\n@EnableJpaRepositories(basePackages = &quot;com.mypackages&quot;,\r\n       entityManagerFactoryRef = &quot;myEntityManagerFactory,\r\n        transactionManagerRef = &quot;myTransactionManager&quot;)\r\npublic class DBConfig {\r\n\r\n    @Bean(&quot;myDatasource&quot;)\r\n    @ConfigurationProperties(prefix = &quot;myconfig.datasource&quot;)\r\n    public DataSource myDataSource() {\r\n        return DataSourceBuilder.create()\r\n                // Set other configs\r\n                .build();\r\n    }\r\n\r\n    @Bean(&quot;myEntityManagerFactory&quot;)\r\n    public LocalContainerEntityManagerFactoryBean\r\n    myEntityManagerFactory(@Qualifier(&quot;myDatasource&quot;) DataSource dataSource) {\r\n        LocalContainerEntityManagerFactoryBean lb = new LocalContainerEntityManagerFactoryBean();\r\n        lb.setPackagesToScan(&quot;com.mypackages&quot;);\r\n        // Set other configs\r\n        return lb;\r\n    }\r\n\r\n    @Bean(&quot;myTransactionManager&quot;)\r\n    public PlatformTransactionManager myTransactionManager(@Qualifier(&quot;myEntityManagerFactory&quot;) LocalContainerEntityManagerFactoryBean entityManagerFactory) {\r\n        JpaTransactionManager jpaTransactionManager = new JpaTransactionManager();\r\n        // Set other configs\r\n        return jpaTransactionManager;\r\n    }\r\n\r\n}\r\n```\r\n\r\nI want to remove the ``@Configuration`` annotation from ``DBConfig`` class so that Spring does not create these beans automatically all the time during startup. Instead I want another bean to check a config that it loads from another source (Dynamo in this case) and initialize this class if required.\r\n\r\n```java\r\n@Service\r\npublic class MyConfigLoader {\r\n\r\n    @Autowired\r\n    private ApplicationContext context;\r\n\r\n    @Autowired\r\n    private DynamoDbClient dynamoDbClient;\r\n    \r\n    @PostConstruct\r\n    public void initialize() {\r\n        Map&lt;String, Boolean&gt; configs = dynamoDbClient.getConfigs();\r\n        boolean initializeDb = configs.get(&quot;dbRequired&quot;);\r\n        if(initializeDb){\r\n            // Something like this\r\n            context.registerConfigurationClass(DBConfig.class);\r\n        }\r\n\r\n    }\r\n\r\n}\r\n```\r\n\r\nThe usual way is to set a property and use ``@ConditionalOnProperty`` to pick up the Configuration class, but this will not work here as the flags are to be read from Dynamo during startup.\r\n\r\nIs this possible? \r\nDoes something like ``context.registerConfigurationClass(DBConfig.class)`` exist? \r\nAnd the Annotations like ``@EnableTransactionManagement`` and ``@EnableJpaRepositories`` should also work.","title":"Manually register a Spring @Configuration class","body":"<p>I have a Spring <code>@Configuration</code> class which creates a bunch of Spring Beans and has few Spring Data Annotations. Is there a way for me to not add the <code>@Configuration</code> Annotation so that Spring does not pick it automatically and instead I can add it programmatically?</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableTransactionManagement\n@EnableJpaRepositories(basePackages = &quot;com.mypackages&quot;,\n       entityManagerFactoryRef = &quot;myEntityManagerFactory,\n        transactionManagerRef = &quot;myTransactionManager&quot;)\npublic class DBConfig {\n\n    @Bean(&quot;myDatasource&quot;)\n    @ConfigurationProperties(prefix = &quot;myconfig.datasource&quot;)\n    public DataSource myDataSource() {\n        return DataSourceBuilder.create()\n                // Set other configs\n                .build();\n    }\n\n    @Bean(&quot;myEntityManagerFactory&quot;)\n    public LocalContainerEntityManagerFactoryBean\n    myEntityManagerFactory(@Qualifier(&quot;myDatasource&quot;) DataSource dataSource) {\n        LocalContainerEntityManagerFactoryBean lb = new LocalContainerEntityManagerFactoryBean();\n        lb.setPackagesToScan(&quot;com.mypackages&quot;);\n        // Set other configs\n        return lb;\n    }\n\n    @Bean(&quot;myTransactionManager&quot;)\n    public PlatformTransactionManager myTransactionManager(@Qualifier(&quot;myEntityManagerFactory&quot;) LocalContainerEntityManagerFactoryBean entityManagerFactory) {\n        JpaTransactionManager jpaTransactionManager = new JpaTransactionManager();\n        // Set other configs\n        return jpaTransactionManager;\n    }\n\n}\n</code></pre>\n<p>I want to remove the <code>@Configuration</code> annotation from <code>DBConfig</code> class so that Spring does not create these beans automatically all the time during startup. Instead I want another bean to check a config that it loads from another source (Dynamo in this case) and initialize this class if required.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\npublic class MyConfigLoader {\n\n    @Autowired\n    private ApplicationContext context;\n\n    @Autowired\n    private DynamoDbClient dynamoDbClient;\n    \n    @PostConstruct\n    public void initialize() {\n        Map&lt;String, Boolean&gt; configs = dynamoDbClient.getConfigs();\n        boolean initializeDb = configs.get(&quot;dbRequired&quot;);\n        if(initializeDb){\n            // Something like this\n            context.registerConfigurationClass(DBConfig.class);\n        }\n\n    }\n\n}\n</code></pre>\n<p>The usual way is to set a property and use <code>@ConditionalOnProperty</code> to pick up the Configuration class, but this will not work here as the flags are to be read from Dynamo during startup.</p>\n<p>Is this possible?\nDoes something like <code>context.registerConfigurationClass(DBConfig.class)</code> exist?\nAnd the Annotations like <code>@EnableTransactionManagement</code> and <code>@EnableJpaRepositories</code> should also work.</p>\n"},{"tags":["java","intellij-idea","jprofiler"],"comments":[{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":2,"creation_date":1681193623,"post_id":75982850,"comment_id":134012592,"body_markdown":"Java isn&#39;t lying to you. Memory is full. &quot;Extending heap size dynamically&quot; is not some voodoo magic that would fix that. The proper solution is to stream large data instead of the process of &#39;read ALL the data, store it in memory, edit the data (all of it) in memory, and stream it out again&#39;. Instead fo: &quot;read a chunk of data, process it, stream it out again. Read the next chunk, etc&quot;.","body":"Java isn&#39;t lying to you. Memory is full. &quot;Extending heap size dynamically&quot; is not some voodoo magic that would fix that. The proper solution is to stream large data instead of the process of &#39;read ALL the data, store it in memory, edit the data (all of it) in memory, and stream it out again&#39;. Instead fo: &quot;read a chunk of data, process it, stream it out again. Read the next chunk, etc&quot;."},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1681194895,"post_id":75982850,"comment_id":134012817,"body_markdown":"It&#39;s hard to guess what exactly is using the memory from your description and the screenshot alone (which is just stating that memory is being used) so I assume it&#39;s the file contents in which case there are 2 basic strategies: 1) if you&#39;re dealing with a lot of smaller files make sure the memory can be garbage collected when you&#39;re done (use JProfiler to find out what&#39;s preventing GC if you&#39;re facing problems with that) and 2) as rswitserloot suggested, for large files use a streaming approach - maybe mixed with memory mapping if required.","body":"It&#39;s hard to guess what exactly is using the memory from your description and the screenshot alone (which is just stating that memory is being used) so I assume it&#39;s the file contents in which case there are 2 basic strategies: 1) if you&#39;re dealing with a lot of smaller files make sure the memory can be garbage collected when you&#39;re done (use JProfiler to find out what&#39;s preventing GC if you&#39;re facing problems with that) and 2) as rswitserloot suggested, for large files use a streaming approach - maybe mixed with memory mapping if required."},{"owner":{"account_id":28271653,"reputation":1,"user_id":21614733,"display_name":"Anuj Ranaa"},"score":0,"creation_date":1681197911,"post_id":75982850,"comment_id":134013384,"body_markdown":"I have edited my question to add more details. Could you please help how can I partially stream the file and upload to downstream system.","body":"I have edited my question to add more details. Could you please help how can I partially stream the file and upload to downstream system."},{"owner":{"account_id":298886,"reputation":40480,"user_id":605153,"accept_rate":67,"display_name":"Mark Bramnik"},"score":0,"creation_date":1681198117,"post_id":75982850,"comment_id":134013416,"body_markdown":"So does it fail after the first request? You can configure JVM to create a HeapDump upon OOM and store it in the file so that you could see which objects are allocated and not released. Maybe the file is indeed just too big, what is the size of the file you&#39;re trying to upload to server?","body":"So does it fail after the first request? You can configure JVM to create a HeapDump upon OOM and store it in the file so that you could see which objects are allocated and not released. Maybe the file is indeed just too big, what is the size of the file you&#39;re trying to upload to server?"},{"owner":{"account_id":28271653,"reputation":1,"user_id":21614733,"display_name":"Anuj Ranaa"},"score":0,"creation_date":1681211974,"post_id":75982850,"comment_id":134016559,"body_markdown":"my file size is 70 MB . but this can go till 500 MB . For 70 MB file upload JVM is consuming around 400-600 MB of heap space . If max heap space is set to 500 MB , application goes down when I upload the file . If max heap size is around 2GB then 4-5 concurrent file uploads will bring down the application","body":"my file size is 70 MB . but this can go till 500 MB . For 70 MB file upload JVM is consuming around 400-600 MB of heap space . If max heap space is set to 500 MB , application goes down when I upload the file . If max heap size is around 2GB then 4-5 concurrent file uploads will bring down the application"}],"owner":{"account_id":28271653,"reputation":1,"user_id":21614733,"display_name":"Anuj Ranaa"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":132,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681197747,"creation_date":1681193451,"question_id":75982850,"body_markdown":"I&#39;m taking multipart file in rest input and validating some properties of file after which I&#39;m uploading a multipart file to different service using **file.getResource()**\r\n     \r\n        try {\r\n            HttpHeaders headers = new HttpHeaders();\r\n            headers.setContentType(MediaType.MULTIPART_FORM_DATA);\r\n            MultiValueMap&lt;String, Object&gt; body = new LinkedMultiValueMap&lt;&gt;();\r\n            **body.add(&quot;model&quot;, file.getResource());**\r\n            HttpEntity&lt;MultiValueMap&lt;String, Object&gt;&gt; requestEntity = new HttpEntity&lt;&gt;(body, headers);\r\n    }\r\n\r\nI need to pass the entire file to a downstream system while doing so,\r\nJVM memory is getting increased exorbitantly and it is not freeing up the space for a very long time meanwhile multiple such operations are utilizing the entire heap space.\r\n\r\nI could increase the max heap size using command line option to java, but that doesn&#39;t seems to be a feasible solution going forward.\r\n\r\nI noticed via JProfiler that it takes a lot space in heap memory and the main problem is that it doesn&#39;t freeing up the space after execution of that api. \r\n\r\nI&#39;m sharing screenshot of JProfiler too. You can see that the graph is not coming down as its not emptying the space.\r\n(https://i.stack.imgur.com/ycrRJ.png)\r\n\r\nI&#39;m looking for a solution where I can take the file in input and upload to the downstream application while utilizing very minimum heap space.\r\n\r\nThanks in advance.","title":"How to get rid of &quot;java.lang.OutOfMemoryError: Java heap space&quot; error?","body":"<p>I'm taking multipart file in rest input and validating some properties of file after which I'm uploading a multipart file to different service using <strong>file.getResource()</strong></p>\n<pre><code>    try {\n        HttpHeaders headers = new HttpHeaders();\n        headers.setContentType(MediaType.MULTIPART_FORM_DATA);\n        MultiValueMap&lt;String, Object&gt; body = new LinkedMultiValueMap&lt;&gt;();\n        **body.add(&quot;model&quot;, file.getResource());**\n        HttpEntity&lt;MultiValueMap&lt;String, Object&gt;&gt; requestEntity = new HttpEntity&lt;&gt;(body, headers);\n}\n</code></pre>\n<p>I need to pass the entire file to a downstream system while doing so,\nJVM memory is getting increased exorbitantly and it is not freeing up the space for a very long time meanwhile multiple such operations are utilizing the entire heap space.</p>\n<p>I could increase the max heap size using command line option to java, but that doesn't seems to be a feasible solution going forward.</p>\n<p>I noticed via JProfiler that it takes a lot space in heap memory and the main problem is that it doesn't freeing up the space after execution of that api.</p>\n<p>I'm sharing screenshot of JProfiler too. You can see that the graph is not coming down as its not emptying the space.\n(<a href=\"https://i.stack.imgur.com/ycrRJ.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/ycrRJ.png</a>)</p>\n<p>I'm looking for a solution where I can take the file in input and upload to the downstream application while utilizing very minimum heap space.</p>\n<p>Thanks in advance.</p>\n"},{"tags":["java","sonarqube"],"comments":[{"owner":{"account_id":1936546,"reputation":133675,"user_id":1743880,"accept_rate":100,"display_name":"Tunaki"},"score":8,"creation_date":1488744822,"post_id":42613410,"comment_id":72355823,"body_markdown":"Code duplication is not just copy-pasted code, it&#39;s copy-pasted *logic*.","body":"Code duplication is not just copy-pasted code, it&#39;s copy-pasted <i>logic</i>."}],"answers":[{"comments":[{"owner":{"account_id":978967,"reputation":1738,"user_id":999264,"accept_rate":39,"display_name":"John Donn"},"score":1,"creation_date":1488746981,"post_id":42613480,"comment_id":72356592,"body_markdown":"I do not know how Sonar can detect &quot;duplicated logic&quot; but the solution looks the right one.","body":"I do not know how Sonar can detect &quot;duplicated logic&quot; but the solution looks the right one."},{"owner":{"account_id":1316894,"reputation":10675,"user_id":1263543,"display_name":"benzonico"},"score":1,"creation_date":1488792643,"post_id":42613480,"comment_id":72372248,"body_markdown":"Literals are ignored in copy paste detection. So if you &quot;blank&quot; int literals and string literals... the code is duplicated.","body":"Literals are ignored in copy paste detection. So if you &quot;blank&quot; int literals and string literals... the code is duplicated."},{"owner":{"account_id":3116526,"reputation":472,"user_id":2637167,"accept_rate":25,"display_name":"Eaton Emmerich"},"score":3,"creation_date":1686835159,"post_id":42613480,"comment_id":134856171,"body_markdown":"so complexity is preffered over any duplication by sonar&#39;s detection?","body":"so complexity is preffered over any duplication by sonar&#39;s detection?"}],"tags":[],"owner":{"account_id":1936546,"reputation":133675,"user_id":1743880,"accept_rate":100,"display_name":"Tunaki"},"comment_count":3,"down_vote_count":1,"up_vote_count":26,"is_accepted":true,"score":25,"last_activity_date":1488745152,"creation_date":1488745152,"answer_id":42613480,"question_id":42613410,"body_markdown":"SonarQube is telling you that this portion of the code contains duplicated logic. This doesn&#39;t necessarily mean that the code itself is copy-pasted, but that, conceptually, the exact same thing is happening at multiple places. In this case, the logic of returning a `String` value with regard to the `int` value is clearly repeated.\r\n\r\nA simple solution here:\r\n\r\n    String[] array = { &quot;One&quot;, &quot;Two&quot;, &quot;Three&quot;, &quot;Four&quot;, &quot;Five&quot;, &quot;Six&quot; };\r\n    if (i &gt;= 1 &amp;&amp; i &lt;= array.length) {\r\n        return array[i - 1];\r\n    }","title":"Where is the Sonar &quot;duplicated code&quot; here?","body":"<p>SonarQube is telling you that this portion of the code contains duplicated logic. This doesn't necessarily mean that the code itself is copy-pasted, but that, conceptually, the exact same thing is happening at multiple places. In this case, the logic of returning a <code>String</code> value with regard to the <code>int</code> value is clearly repeated.</p>\n\n<p>A simple solution here:</p>\n\n<pre><code>String[] array = { \"One\", \"Two\", \"Three\", \"Four\", \"Five\", \"Six\" };\nif (i &gt;= 1 &amp;&amp; i &lt;= array.length) {\n    return array[i - 1];\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":978967,"reputation":1738,"user_id":999264,"accept_rate":39,"display_name":"John Donn"},"score":0,"creation_date":1488746699,"post_id":42613538,"comment_id":72356497,"body_markdown":"I do not find more than 7. How did you count?","body":"I do not find more than 7. How did you count?"}],"tags":[],"owner":{"account_id":957044,"reputation":47672,"user_id":982161,"accept_rate":63,"display_name":"Xoc  epe&#250;pa "},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1488745544,"creation_date":1488745544,"answer_id":42613538,"question_id":42613410,"body_markdown":"SonarRules for Java projects:\r\n\r\n&gt; A piece of code is considered as duplicated as soon as there is the\r\n&gt; same sequence of 10 successive statements whatever the number of\r\n&gt; tokens and lines. This threshold cannot be overridden.\r\n\r\nYou need to modify that multiple **if return** sections","title":"Where is the Sonar &quot;duplicated code&quot; here?","body":"<p>SonarRules for Java projects:</p>\n\n<blockquote>\n  <p>A piece of code is considered as duplicated as soon as there is the\n  same sequence of 10 successive statements whatever the number of\n  tokens and lines. This threshold cannot be overridden.</p>\n</blockquote>\n\n<p>You need to modify that multiple <strong>if return</strong> sections</p>\n"}],"owner":{"account_id":978967,"reputation":1738,"user_id":999264,"accept_rate":39,"display_name":"John Donn"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":48979,"favorite_count":0,"down_vote_count":0,"up_vote_count":24,"accepted_answer_id":42613480,"answer_count":2,"score":24,"last_activity_date":1681197613,"creation_date":1488744720,"question_id":42613410,"body_markdown":"I just run sonar scanner on the sample Sonar project. It gives me the message that there is &quot;duplicated code on lines 7-20&quot;. Can anyone explain this?\r\n\r\n[![enter image description here][1]][1]  \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/WnMm8.png","title":"Where is the Sonar &quot;duplicated code&quot; here?","body":"<p>I just run sonar scanner on the sample Sonar project. It gives me the message that there is \"duplicated code on lines 7-20\". Can anyone explain this?</p>\n\n<p><a href=\"https://i.stack.imgur.com/WnMm8.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/WnMm8.png\" alt=\"enter image description here\"></a>  </p>\n"},{"tags":["java","httpurlconnection"],"comments":[{"owner":{"account_id":2375368,"reputation":4423,"user_id":2078908,"display_name":"ursa"},"score":0,"creation_date":1681202611,"post_id":75983317,"comment_id":134014336,"body_markdown":"you can use netcat, see examples - https://stackoverflow.com/questions/16640054/minimal-web-server-using-netcat","body":"you can use netcat, see examples - <a href=\"https://stackoverflow.com/questions/16640054/minimal-web-server-using-netcat\" title=\"minimal web server using netcat\">stackoverflow.com/questions/16640054/&hellip;</a>"}],"owner":{"account_id":202644,"reputation":859,"user_id":449845,"accept_rate":61,"display_name":"schmimona"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681197324,"creation_date":1681197324,"question_id":75983317,"body_markdown":"I have written code to connect to a to a URL using a HttpURLConnection. \r\n\r\n``` \r\n            String str_URL = &quot;http://localhost:8886/bod-sep-service/a/b/c&quot;;\r\n\t\t\tjava.net.URL url = new java.net.URL(str_URL);\r\n\t\t\t\r\n\t\t\tjava.net.HttpURLConnection connection = (java.net.HttpURLConnection) url.openConnection();\r\n\t\t\tconnection.setRequestMethod(&quot;GET&quot;);\r\n\t\t\tconnection.setConnectTimeout(6000);\r\n\t\t\tconnection.setReadTimeout(6000);\r\n\r\n\t\t\tint responseCode = connection.getResponseCode();\r\n\t\t\t\r\n\t\t\tif (responseCode == java.net.HttpURLConnection.HTTP_OK) {\r\n                // do Something\r\n            }\r\n ```\r\n\r\nI do not have access to the URL so I am trying to simulate it and send an answer to my code from above:\r\n\r\n ```\r\nThread thread = new Thread() {\r\n\t\t\tpublic void run() {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tOutputStream outputStream;\r\n\t\t\t\t\tString boundary = &quot;===&quot; + System.currentTimeMillis() + &quot;===&quot;;\r\n\t\t\t\t\tjava.net.URL url = new java.net.URL(&quot;http://localhost:8886/bod-sep-service/a/b/c&quot;);\r\n\t\t\t\t\tjava.net.HttpURLConnection connection = (java.net.HttpURLConnection) url.openConnection();\r\n\t\t\t\t\tconnection.setRequestMethod(&quot;POST&quot;);\r\n\r\n\t\t\t\t\tconnection.setUseCaches(false);\r\n\t\t\t\t\tconnection.setDoOutput(true); // indicates POST method\r\n\t\t\t\t\tconnection.setDoInput(true);\r\n\t\t\t\t\tconnection.setRequestProperty(&quot;Content-Type&quot;, &quot;multipart/form-data; boundary=&quot; + boundary);\r\n\t\t\t\t\twhile(true) {\r\n\t\t\t\t\t\toutputStream = connection.getOutputStream();\r\n\t\t\t\t\t\t// send answer?\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (MalformedURLException e) {\r\n\t\t\t\t\tSystem.out.println(e.getMessage());\r\n\t\t\t\t} catch (IOException e) {\r\n\t\t\t\t\tSystem.out.println(e.getMessage());\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t};\r\n\t\tthread.start();\r\n ```\r\n\r\nI did not find any examples online on how to simulate the URL and how to send an answer.\r\nAny help will be much appreciated.","title":"Simulate Webserver to answer a HttpUrlConnection","body":"<p>I have written code to connect to a to a URL using a HttpURLConnection.</p>\n<pre><code>            String str_URL = &quot;http://localhost:8886/bod-sep-service/a/b/c&quot;;\n            java.net.URL url = new java.net.URL(str_URL);\n            \n            java.net.HttpURLConnection connection = (java.net.HttpURLConnection) url.openConnection();\n            connection.setRequestMethod(&quot;GET&quot;);\n            connection.setConnectTimeout(6000);\n            connection.setReadTimeout(6000);\n\n            int responseCode = connection.getResponseCode();\n            \n            if (responseCode == java.net.HttpURLConnection.HTTP_OK) {\n                // do Something\n            }\n</code></pre>\n<p>I do not have access to the URL so I am trying to simulate it and send an answer to my code from above:</p>\n<pre><code>Thread thread = new Thread() {\n           public void run() {\n               try {\n                   OutputStream outputStream;\n                   String boundary = &quot;===&quot; + System.currentTimeMillis() + &quot;===&quot;;\n                   java.net.URL url = new java.net.URL(&quot;http://localhost:8886/bod-sep-service/a/b/c&quot;);\n                   java.net.HttpURLConnection connection = (java.net.HttpURLConnection) url.openConnection();\n                   connection.setRequestMethod(&quot;POST&quot;);\n\n                   connection.setUseCaches(false);\n                   connection.setDoOutput(true); // indicates POST method\n                   connection.setDoInput(true);\n                   connection.setRequestProperty(&quot;Content-Type&quot;, &quot;multipart/form-data; boundary=&quot; + boundary);\n                   while(true) {\n                       outputStream = connection.getOutputStream();\n                       // send answer?\n                   }\n               } catch (MalformedURLException e) {\n                   System.out.println(e.getMessage());\n               } catch (IOException e) {\n                   System.out.println(e.getMessage());\n               }\n\n           }\n       };\n       thread.start();\n</code></pre>\n<p>I did not find any examples online on how to simulate the URL and how to send an answer.\nAny help will be much appreciated.</p>\n"},{"tags":["java","spring-boot","elasticsearch"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1681196679,"post_id":75983168,"comment_id":134013148,"body_markdown":"Please include your code/config in your question as code (text with code tags) instead of links to offsite images.","body":"Please include your code/config in your question as code (text with code tags) instead of links to offsite images."},{"owner":{"account_id":27496968,"reputation":1,"user_id":20981339,"display_name":"Lex"},"score":0,"creation_date":1681197230,"post_id":75983168,"comment_id":134013246,"body_markdown":"I&#39;ve just edited my post.","body":"I&#39;ve just edited my post."},{"owner":{"account_id":1535561,"reputation":7664,"user_id":1431720,"accept_rate":89,"display_name":"Robert"},"score":1,"creation_date":1681237288,"post_id":75983168,"comment_id":134023251,"body_markdown":"What do you mean by &quot;not working&quot;? What happens when you compile / run your code, and what did you expect to happen instead? Any errors? See [ask].","body":"What do you mean by &quot;not working&quot;? What happens when you compile / run your code, and what did you expect to happen instead? Any errors? See <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."},{"owner":{"account_id":27496968,"reputation":1,"user_id":20981339,"display_name":"Lex"},"score":0,"creation_date":1681258244,"post_id":75983168,"comment_id":134026713,"body_markdown":"My IDE says &quot; Cannot resolve symbol &#39;elasticsearch&#39; &quot; when I import it.","body":"My IDE says &quot; Cannot resolve symbol &#39;elasticsearch&#39; &quot; when I import it."}],"owner":{"account_id":27496968,"reputation":1,"user_id":20981339,"display_name":"Lex"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":194,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681197209,"creation_date":1681196256,"question_id":75983168,"body_markdown":"Is there something wrong on how I import the elasticsearch dependency?\r\n\r\n    import org.elasticsearch.action.admin.indices.delete.DeleteIndexRequest;\r\n    import org.elasticsearch.action.delete.DeleteRequest;\r\n    import org.elasticsearch.action.delete.DeleteResponse;\r\n    import org.elasticsearch.action.index.IndexRequest;\r\n    import org.elasticsearch.action.index.IndexResponse;\r\n    import org.elasticsearch.action.search.SearchRequest;\r\n    import org.elasticsearch.action.search.SearchResponse;\r\n    import org.elasticsearch.action.support.master.AcknowledgedResponse;\r\n    import org.elasticsearch.client.RequestOptions;\r\n    \r\n    import org.elasticsearch.client.RestHighLevelClient;\r\n    import org.elasticsearch.common.xcontent.XContentType;\r\n    import org.elasticsearch.index.query.BoolQueryBuilder;\r\n    import org.elasticsearch.index.query.QueryBuilders;\r\n    import org.elasticsearch.search.SearchHit;\r\n    import org.elasticsearch.search.aggregations.AggregationBuilders;\r\n    import org.elasticsearch.search.aggregations.metrics.Cardinality;\r\n    import org.elasticsearch.search.builder.SearchSourceBuilder;\r\n    import org.elasticsearch.search.collapse.CollapseBuilder;\r\n    import org.elasticsearch.search.sort.FieldSortBuilder;\r\n    import org.elasticsearch.search.sort.SortBuilders;\r\n    import org.elasticsearch.search.sort.SortOrder;\r\n\r\n\r\nHere is my dependencies in build.gradle file:\r\n\r\n    implementation group: &#39;org.elasticsearch.client&#39;, name: &#39;elasticsearch-rest-high-level-client&#39;, version: &#39;7.4.2&#39;\r\n    implementation group: &#39;org.elasticsearch.client&#39;, name: &#39;elasticsearch-rest-client&#39;, version: &#39;7.4.2&#39;\r\n    implementation group: &#39;org.elasticsearch.client&#39;, name: &#39;transport&#39;, version: &#39;7.4.2&#39;\r\n    implementation group: &#39;org.elasticsearch&#39;, name: &#39;elasticsearch&#39;, version: &#39;7.4.2&#39;\r\n\r\nI have tried different version but it is not working what is the correct approach for this. Thanks\r\n","title":"Elasticsearch dependency not working, It does not show on my imports is there correct version for this?","body":"<p>Is there something wrong on how I import the elasticsearch dependency?</p>\n<pre><code>import org.elasticsearch.action.admin.indices.delete.DeleteIndexRequest;\nimport org.elasticsearch.action.delete.DeleteRequest;\nimport org.elasticsearch.action.delete.DeleteResponse;\nimport org.elasticsearch.action.index.IndexRequest;\nimport org.elasticsearch.action.index.IndexResponse;\nimport org.elasticsearch.action.search.SearchRequest;\nimport org.elasticsearch.action.search.SearchResponse;\nimport org.elasticsearch.action.support.master.AcknowledgedResponse;\nimport org.elasticsearch.client.RequestOptions;\n\nimport org.elasticsearch.client.RestHighLevelClient;\nimport org.elasticsearch.common.xcontent.XContentType;\nimport org.elasticsearch.index.query.BoolQueryBuilder;\nimport org.elasticsearch.index.query.QueryBuilders;\nimport org.elasticsearch.search.SearchHit;\nimport org.elasticsearch.search.aggregations.AggregationBuilders;\nimport org.elasticsearch.search.aggregations.metrics.Cardinality;\nimport org.elasticsearch.search.builder.SearchSourceBuilder;\nimport org.elasticsearch.search.collapse.CollapseBuilder;\nimport org.elasticsearch.search.sort.FieldSortBuilder;\nimport org.elasticsearch.search.sort.SortBuilders;\nimport org.elasticsearch.search.sort.SortOrder;\n</code></pre>\n<p>Here is my dependencies in build.gradle file:</p>\n<pre><code>implementation group: 'org.elasticsearch.client', name: 'elasticsearch-rest-high-level-client', version: '7.4.2'\nimplementation group: 'org.elasticsearch.client', name: 'elasticsearch-rest-client', version: '7.4.2'\nimplementation group: 'org.elasticsearch.client', name: 'transport', version: '7.4.2'\nimplementation group: 'org.elasticsearch', name: 'elasticsearch', version: '7.4.2'\n</code></pre>\n<p>I have tried different version but it is not working what is the correct approach for this. Thanks</p>\n"},{"tags":["java","appium","android-sdk-tools","android-uiautomator","uiautomatorviewer"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1681211428,"post_id":75983286,"comment_id":134016433,"body_markdown":"Please post the values of `echo &quot;swt_path=%swt_path%&quot; echo &quot;frameworkdir=%frameworkdir%&quot;`. You can place those as lines after the `set` command","body":"Please post the values of <code>echo &quot;swt_path=%swt_path%&quot; echo &quot;frameworkdir=%frameworkdir%&quot;</code>. You can place those as lines after the <code>set</code> command"}],"owner":{"account_id":28272336,"reputation":11,"user_id":21615320,"display_name":"Aishwarya surve"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":244,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1681197076,"creation_date":1681197076,"question_id":75983286,"body_markdown":"I am using java 8 and trying to run uiautomatorviewer.bat of Appium tool but I&#39;m getting below error.\r\n\r\n```\r\nDjava.ext.dirs=..\\lib\\x86_64;..\\lib is not supported.  Use -classpath instead.\r\nError: Could not create the Java Virtual Machine.\r\nError: A fatal exception has occurred. Program will exit.\r\n```\r\n\r\nThe bat file consist of below line\r\n```\r\n:SetPath\r\nset javaextdirs=%swt_path%;%frameworkdir%\r\n\r\ncall &quot;%java_exe%&quot; &quot;-Djava.ext.dirs=%javaextdirs%&quot; &quot;-Dcom.android.uiautomator.bindir=%prog_dir%&quot; -jar %jarpath% %*\r\n```\r\nCan someone help me with this error. \r\n\r\nI have tried passing the classpath with -cp from command line but it is not working.\r\n","title":"Getting error -Djava.ext is not supported. Use -classpath instead","body":"<p>I am using java 8 and trying to run uiautomatorviewer.bat of Appium tool but I'm getting below error.</p>\n<pre><code>Djava.ext.dirs=..\\lib\\x86_64;..\\lib is not supported.  Use -classpath instead.\nError: Could not create the Java Virtual Machine.\nError: A fatal exception has occurred. Program will exit.\n</code></pre>\n<p>The bat file consist of below line</p>\n<pre><code>:SetPath\nset javaextdirs=%swt_path%;%frameworkdir%\n\ncall &quot;%java_exe%&quot; &quot;-Djava.ext.dirs=%javaextdirs%&quot; &quot;-Dcom.android.uiautomator.bindir=%prog_dir%&quot; -jar %jarpath% %*\n</code></pre>\n<p>Can someone help me with this error.</p>\n<p>I have tried passing the classpath with -cp from command line but it is not working.</p>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":25771,"reputation":21236,"user_id":66519,"accept_rate":99,"display_name":"ojblass"},"score":0,"creation_date":1239841993,"post_id":754307,"comment_id":565695,"body_markdown":"-1 make this a qeustion and tell us the language or context you are using and I will give you your vote back","body":"-1 make this a qeustion and tell us the language or context you are using and I will give you your vote back"},{"owner":{"account_id":22784,"reputation":36593,"user_id":56555,"accept_rate":98,"display_name":"Kredns"},"score":0,"creation_date":1239842029,"post_id":754307,"comment_id":565696,"body_markdown":"I would also like to know what language your using.","body":"I would also like to know what language your using."},{"owner":{"account_id":10959,"reputation":74232,"user_id":20938,"display_name":"Alan Moore"},"score":3,"creation_date":1239862625,"post_id":754307,"comment_id":566333,"body_markdown":"Be aware that, because your regex is in the form of a Java string literal, you have to double-escape backslashes: &quot;[\\\\\\\\/:*?\\&quot;&lt;&gt;|]&quot;. The way you had it, you were just escaping the forward-slash (which isn&#39;t necessary, but it&#39;s not an error either).","body":"Be aware that, because your regex is in the form of a Java string literal, you have to double-escape backslashes: &quot;[\\\\\\\\/:*?\\&quot;&lt;&gt;|]&quot;. The way you had it, you were just escaping the forward-slash (which isn&#39;t necessary, but it&#39;s not an error either)."},{"owner":{"account_id":10959,"reputation":74232,"user_id":20938,"display_name":"Alan Moore"},"score":0,"creation_date":1239863300,"post_id":754307,"comment_id":566344,"body_markdown":"One more thing: If you&#39;re trying to create regexes that will work in Java&#39;s native regex support, you should use a tester that&#39;s powered by Java, like this one: http://www.fileformat.info/tool/regex.htm (RegExr uses ActionScript&#39;s regex engine.)","body":"One more thing: If you&#39;re trying to create regexes that will work in Java&#39;s native regex support, you should use a tester that&#39;s powered by Java, like this one: <a href=\"http://www.fileformat.info/tool/regex.htm\" rel=\"nofollow noreferrer\">fileformat.info/tool/regex.htm</a> (RegExr uses ActionScript&#39;s regex engine.)"},{"owner":{"account_id":1201634,"reputation":3471,"user_id":1172181,"accept_rate":100,"display_name":"Luis"},"score":0,"creation_date":1345008785,"post_id":754307,"comment_id":15945712,"body_markdown":"You can also try various String.replaceAll() in series like this: YourString.replaceAll(&quot;[^A-Za-z0-9_.\\\\s-&quot; + File.separator + &quot;]*&quot;, &quot;&quot;).replaceAll(&quot;^\\\\s&quot;, &quot;&quot;).replaceAll(&quot;\\\\s$&quot;, &quot;&quot;));","body":"You can also try various String.replaceAll() in series like this: YourString.replaceAll(&quot;[^A-Za-z0-9_.\\\\s-&quot; + File.separator + &quot;]*&quot;, &quot;&quot;).replaceAll(&quot;^\\\\s&quot;, &quot;&quot;).replaceAll(&quot;\\\\s$&quot;, &quot;&quot;));"},{"owner":{"account_id":796053,"reputation":115361,"user_id":878126,"accept_rate":51,"display_name":"android developer"},"score":0,"creation_date":1429742034,"post_id":754307,"comment_id":47748294,"body_markdown":"What&#39;s the best regular expression that will allow as many supported characters as possible , on Linux (or more precisely, on Android) ?","body":"What&#39;s the best regular expression that will allow as many supported characters as possible , on Linux (or more precisely, on Android) ?"},{"owner":{"account_id":297814,"reputation":25324,"user_id":603516,"accept_rate":100,"display_name":"Vadzim"},"score":0,"creation_date":1434988553,"post_id":754307,"comment_id":49999066,"body_markdown":"See also http://stackoverflow.com/questions/1155107/is-there-a-cross-platform-java-method-to-remove-filename-special-chars","body":"See also <a href=\"http://stackoverflow.com/questions/1155107/is-there-a-cross-platform-java-method-to-remove-filename-special-chars\" title=\"is there a cross platform java method to remove filename special chars\">stackoverflow.com/questions/1155107/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":12046,"reputation":188205,"user_id":23528,"accept_rate":71,"display_name":"Daniel A. White"},"score":1,"creation_date":1239842371,"post_id":754328,"comment_id":565710,"body_markdown":"Don&#39;t forget the lonely period.","body":"Don&#39;t forget the lonely period."},{"owner":{"account_id":246,"reputation":107913,"user_id":304,"accept_rate":40,"display_name":"McDowell"},"score":1,"creation_date":1239871024,"post_id":754328,"comment_id":566602,"body_markdown":"Or the vast range of valid Unicode and extended characters people all over world use.","body":"Or the vast range of valid Unicode and extended characters people all over world use."}],"tags":[],"owner":{"account_id":22784,"reputation":36593,"user_id":56555,"accept_rate":98,"display_name":"Kredns"},"comment_count":2,"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1239841824,"creation_date":1239841824,"answer_id":754328,"question_id":754307,"body_markdown":"You might try allowing only the stuff you want the user to be able to enter, for example A-Z, a-z, and 0-9.","title":"Regex to replace characters that Windows doesn&#39;t accept in a filename","body":"<p>You might try allowing only the stuff you want the user to be able to enter, for example A-Z, a-z, and 0-9.</p>\n"},{"tags":[],"owner":{"account_id":15220,"reputation":48515,"user_id":31945,"display_name":"Artelius"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1239842226,"creation_date":1239842226,"answer_id":754343,"question_id":754307,"body_markdown":"For the record, POSIX-compliant systems (including UNIX and Linux) support all characters except the null character (`&#39;\\0&#39;`) and forwards slash (`&#39;/&#39;`) in filenames. Special  characters such as space and asterisk must be escaped on the command line so that they do not take their usual roles.","title":"Regex to replace characters that Windows doesn&#39;t accept in a filename","body":"<p>For the record, POSIX-compliant systems (including UNIX and Linux) support all characters except the null character (<code>'\\0'</code>) and forwards slash (<code>'/'</code>) in filenames. Special  characters such as space and asterisk must be escaped on the command line so that they do not take their usual roles.</p>\n"},{"comments":[{"owner":{"account_id":366,"reputation":57717,"user_id":456,"accept_rate":88,"display_name":"wilhelmtell"},"score":0,"creation_date":1239842781,"post_id":754346,"comment_id":565725,"body_markdown":"I&#39;m not sure I understand what you&#39;re saying, but you can definitely match invalid filenames with a regex.","body":"I&#39;m not sure I understand what you&#39;re saying, but you can definitely match invalid filenames with a regex."},{"owner":{"account_id":21356,"reputation":47248,"user_id":51831,"accept_rate":56,"display_name":"jpalecek"},"score":0,"creation_date":1239877503,"post_id":754346,"comment_id":566841,"body_markdown":"Yes, but you cannot sanitize invalid filenames by replacing a single occurence of a regex without lots of collateral damage","body":"Yes, but you cannot sanitize invalid filenames by replacing a single occurence of a regex without lots of collateral damage"}],"tags":[],"owner":{"account_id":21356,"reputation":47248,"user_id":51831,"accept_rate":56,"display_name":"jpalecek"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1239842294,"creation_date":1239842294,"answer_id":754346,"question_id":754307,"body_markdown":"You cannot do this with a single regexp, because a regexp always matches a substring if the input. Consider the word `Alo*h*a`, there is no substring that contains all `*`s, and not any other character. So if you can use the replaceAll function, just stick with it.\r\n\r\nBTW, the set of forbidden characters is different in other OSes.","title":"Regex to replace characters that Windows doesn&#39;t accept in a filename","body":"<p>You cannot do this with a single regexp, because a regexp always matches a substring if the input. Consider the word <code>Alo*h*a</code>, there is no substring that contains all <code>*</code>s, and not any other character. So if you can use the replaceAll function, just stick with it.</p>\n\n<p>BTW, the set of forbidden characters is different in other OSes.</p>\n"},{"tags":[],"owner":{"account_id":12214,"reputation":23816,"user_id":23921,"display_name":"Pesto"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1239842315,"creation_date":1239842315,"answer_id":754348,"question_id":754307,"body_markdown":"Java has a replaceAll function, but every programming language has a way to do something similar.  Perl, for example, uses the `g` switch to signify a global replacement.  Python&#39;s `sub` function allows you to specify the number of replacements to make.  If, for some reason, your language *didn&#39;t* have an equivalent, you can always do something like this:\r\n\r\n    while (filename.matches(bad_characters)\r\n      filename.replace(bad_characters, &quot;&quot;)\r\n","title":"Regex to replace characters that Windows doesn&#39;t accept in a filename","body":"<p>Java has a replaceAll function, but every programming language has a way to do something similar.  Perl, for example, uses the <code>g</code> switch to signify a global replacement.  Python's <code>sub</code> function allows you to specify the number of replacements to make.  If, for some reason, your language <em>didn't</em> have an equivalent, you can always do something like this:</p>\n\n<pre><code>while (filename.matches(bad_characters)\n  filename.replace(bad_characters, \"\")\n</code></pre>\n"},{"comments":[{"owner":{"account_id":12121,"reputation":7931,"user_id":23705,"display_name":"Windows programmer"},"score":0,"creation_date":1239848352,"post_id":754483,"comment_id":565914,"body_markdown":"Windows filename rules are indeed tricky. No one (not even Microsoft) has written a fully correct set of rules. I haven&#39;t either. But I can tell you &quot;.&quot; is legal (that directory always exists), and &quot;.a&quot; and &quot;a.&quot; and com and &gt;240 characters etc. can be created by escaping the names perfectly legally.","body":"Windows filename rules are indeed tricky. No one (not even Microsoft) has written a fully correct set of rules. I haven&#39;t either. But I can tell you &quot;.&quot; is legal (that directory always exists), and &quot;.a&quot; and &quot;a.&quot; and com and &gt;240 characters etc. can be created by escaping the names perfectly legally."},{"owner":{"account_id":10108,"reputation":530037,"user_id":18936,"display_name":"bobince"},"score":0,"creation_date":1239872671,"post_id":754483,"comment_id":566643,"body_markdown":"Well . (and ..) are a legal pathnames, but you can&#39;t use them as filenames, obviously! How do you escape leading/trailing dots and reserved filenames? I can&#39;t see any public interface that allows it; both the UI and the file IO interface rename the dots and disallow the reserved name.","body":"Well . (and ..) are a legal pathnames, but you can&#39;t use them as filenames, obviously! How do you escape leading/trailing dots and reserved filenames? I can&#39;t see any public interface that allows it; both the UI and the file IO interface rename the dots and disallow the reserved name."},{"owner":{"account_id":10108,"reputation":530037,"user_id":18936,"display_name":"bobince"},"score":0,"creation_date":1239872735,"post_id":754483,"comment_id":566645,"body_markdown":"(I can create the long pathnames by renaming and moving, but it causes Explorer and many other applications to be unstable when accessing them, which is why it&#39;s undesirable.)","body":"(I can create the long pathnames by renaming and moving, but it causes Explorer and many other applications to be unstable when accessing them, which is why it&#39;s undesirable.)"},{"owner":{"account_id":12121,"reputation":7931,"user_id":23705,"display_name":"Windows programmer"},"score":1,"creation_date":1239931203,"post_id":754483,"comment_id":570547,"body_markdown":"&quot;copy con \\\\.\\d:\\.a&quot; (without the quotes), Enter key to start, Ctrl+Z to stop. File d:\\.a exists just fine. Well, fortunately someone accepted your answer so lots of future readers can be misled too.","body":"&quot;copy con \\\\.\\d:\\.a&quot; (without the quotes), Enter key to start, Ctrl+Z to stop. File d:\\.a exists just fine. Well, fortunately someone accepted your answer so lots of future readers can be misled too."},{"owner":{"account_id":12121,"reputation":7931,"user_id":23705,"display_name":"Windows programmer"},"score":0,"creation_date":1239931388,"post_id":754483,"comment_id":570554,"body_markdown":"&quot;copy con \\\\.\\d:\\con&quot; and you get to use con with both meanings. By the way this assumes drive d is a disk; if it isn&#39;t then say drive c or something else.","body":"&quot;copy con \\\\.\\d:\\con&quot; and you get to use con with both meanings. By the way this assumes drive d is a disk; if it isn&#39;t then say drive c or something else."}],"tags":[],"owner":{"account_id":10108,"reputation":530037,"user_id":18936,"display_name":"bobince"},"comment_count":5,"down_vote_count":2,"up_vote_count":20,"is_accepted":true,"score":18,"last_activity_date":1239846849,"creation_date":1239846849,"answer_id":754483,"question_id":754307,"body_markdown":"Windows filename rules are *tricky*. You&#39;re only scratching the surface.\r\n\r\nFor example here are some things that are not valid filenames, in addition to the chracters you listed:\r\n\r\n                                        (yes, that&#39;s an empty string)\r\n    .\r\n    .a\r\n    a.\r\n     a                                  (that&#39;s a leading space)\r\n    a                                   (or a trailing space)\r\n    com\r\n    prn.txt\r\n    [anything over 240 characters]\r\n    [any control characters]\r\n    [any non-ASCII chracters that don&#39;t fit in the system codepage,\r\n     if the filesystem is FAT32]\r\n\r\nRemoving special characters in a single regex sub like String.replaceAll() isn&#39;t enough; you can easily end up with something invalid like an empty string or trailing . or  . Replacing something like [^A-Za-z0-9\\_.]* with \\_ would be a better first step. But you will still need higher-level processing on whatever platform you&#39;re using.\r\n","title":"Regex to replace characters that Windows doesn&#39;t accept in a filename","body":"<p>Windows filename rules are <em>tricky</em>. You're only scratching the surface.</p>\n\n<p>For example here are some things that are not valid filenames, in addition to the chracters you listed:</p>\n\n<pre><code>                                    (yes, that's an empty string)\n.\n.a\na.\n a                                  (that's a leading space)\na                                   (or a trailing space)\ncom\nprn.txt\n[anything over 240 characters]\n[any control characters]\n[any non-ASCII chracters that don't fit in the system codepage,\n if the filesystem is FAT32]\n</code></pre>\n\n<p>Removing special characters in a single regex sub like String.replaceAll() isn't enough; you can easily end up with something invalid like an empty string or trailing . or  . Replacing something like [^A-Za-z0-9_.]* with _ would be a better first step. But you will still need higher-level processing on whatever platform you're using.</p>\n"},{"comments":[{"owner":{"account_id":226114,"reputation":19678,"user_id":486979,"accept_rate":91,"display_name":"Ray Nicholus"},"score":4,"creation_date":1340245021,"post_id":7795850,"comment_id":14587560,"body_markdown":"This does not remove all invalid characters.  You&#39;ve left out special characters, for example.","body":"This does not remove all invalid characters.  You&#39;ve left out special characters, for example."},{"owner":{"account_id":90698,"reputation":4919,"user_id":249548,"accept_rate":67,"display_name":"Oliver Bock"},"score":2,"creation_date":1402450617,"post_id":7795850,"comment_id":37274515,"body_markdown":"Doesn&#39;t the ^ prevent this matching special characters except at the start of the file name?  I used fileName.replace(&quot;^\\\\.+&quot;, &quot;&quot;).replaceAll(&quot;[\\\\\\\\/:*?\\&quot;&lt;&gt;|]&quot;, &quot;&quot;)","body":"Doesn&#39;t the ^ prevent this matching special characters except at the start of the file name?  I used fileName.replace(&quot;^\\\\.+&quot;, &quot;&quot;).replaceAll(&quot;[\\\\\\\\/:*?\\&quot;&lt;&gt;|]&quot;, &quot;&quot;)"},{"owner":{"account_id":1064443,"reputation":1462,"user_id":1065366,"accept_rate":56,"display_name":"Markus"},"score":1,"creation_date":1402580356,"post_id":7795850,"comment_id":37334253,"body_markdown":"If you try to use any other replace character then &quot;&quot; the regex in the answer will fail. The Regex of Oliver Bock works fine.","body":"If you try to use any other replace character then &quot;&quot; the regex in the answer will fail. The Regex of Oliver Bock works fine."},{"owner":{"account_id":6915576,"reputation":7113,"user_id":5309984,"accept_rate":43,"display_name":"TOPKAT"},"score":0,"creation_date":1544379745,"post_id":7795850,"comment_id":94245930,"body_markdown":"what about `trim`ming to avoid leading or ending space","body":"what about <code>trim</code>ming to avoid leading or ending space"}],"tags":[],"owner":{"account_id":150332,"reputation":1844,"user_id":363455,"display_name":"Alex_M"},"comment_count":4,"down_vote_count":1,"up_vote_count":23,"is_accepted":false,"score":22,"last_activity_date":1525912451,"creation_date":1318864667,"answer_id":7795850,"question_id":754307,"body_markdown":"since no answer was good enough i did it myself. hope this helps ;)\r\n\r\n\tpublic static boolean validateFileName(String fileName) {\r\n\t\treturn fileName.matches(&quot;^[^.\\\\\\\\/:*?\\&quot;&lt;&gt;|]?[^\\\\\\\\/:*?\\&quot;&lt;&gt;|]*&quot;) \r\n\t\t&amp;&amp; getValidFileName(fileName).length()&gt;0;\r\n\t}\r\n\t\r\n\tpublic static String getValidFileName(String fileName) {\r\n\t\tString newFileName = fileName.replace(&quot;^\\\\.+&quot;, &quot;&quot;).replaceAll(&quot;[\\\\\\\\/:*?\\&quot;&lt;&gt;|]&quot;, &quot;&quot;);\r\n\t\tif(newFileName.length()==0)\r\n\t\t\tthrow new IllegalStateException(\r\n\t\t\t\t\t&quot;File Name &quot; + fileName + &quot; results in a empty fileName!&quot;);\r\n\t\treturn newFileName;\r\n\t}","title":"Regex to replace characters that Windows doesn&#39;t accept in a filename","body":"<p>since no answer was good enough i did it myself. hope this helps ;)</p>\n\n<pre><code>public static boolean validateFileName(String fileName) {\n    return fileName.matches(\"^[^.\\\\\\\\/:*?\\\"&lt;&gt;|]?[^\\\\\\\\/:*?\\\"&lt;&gt;|]*\") \n    &amp;&amp; getValidFileName(fileName).length()&gt;0;\n}\n\npublic static String getValidFileName(String fileName) {\n    String newFileName = fileName.replace(\"^\\\\.+\", \"\").replaceAll(\"[\\\\\\\\/:*?\\\"&lt;&gt;|]\", \"\");\n    if(newFileName.length()==0)\n        throw new IllegalStateException(\n                \"File Name \" + fileName + \" results in a empty fileName!\");\n    return newFileName;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2127666,"reputation":93,"user_id":1889347,"accept_rate":17,"display_name":"Vysakh Prem"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1373543862,"creation_date":1373543862,"answer_id":17592773,"question_id":754307,"body_markdown":"I extract all word characters and whitespace characters from the original string and I also make sure that whitespace character is not present at the end of the string. Here is my code snippet in java.\r\n\r\n    temp_string = original.replaceAll(&quot;[^\\\\w|\\\\s]&quot;, &quot;&quot;);\r\n    final_string = temp_string.replaceAll(&quot;\\\\s$&quot;, &quot;&quot;);\r\n\r\nI think I helped someone.\r\n","title":"Regex to replace characters that Windows doesn&#39;t accept in a filename","body":"<p>I extract all word characters and whitespace characters from the original string and I also make sure that whitespace character is not present at the end of the string. Here is my code snippet in java.</p>\n\n<pre><code>temp_string = original.replaceAll(\"[^\\\\w|\\\\s]\", \"\");\nfinal_string = temp_string.replaceAll(\"\\\\s$\", \"\");\n</code></pre>\n\n<p>I think I helped someone.</p>\n"},{"comments":[{"owner":{"account_id":11134092,"reputation":5078,"user_id":8173870,"display_name":"HackSlash"},"score":0,"creation_date":1559688436,"post_id":27411848,"comment_id":99497626,"body_markdown":"White listing is better than black listing. NOTE: You should use &quot;\\w&quot; `\\w stands for &quot;word character&quot;. It always matches the ASCII characters [A-Za-z0-9_]`","body":"White listing is better than black listing. NOTE: You should use &quot;\\w&quot; <code>\\w stands for &quot;word character&quot;. It always matches the ASCII characters [A-Za-z0-9_]</code>"},{"owner":{"account_id":11134092,"reputation":5078,"user_id":8173870,"display_name":"HackSlash"},"score":0,"creation_date":1559688669,"post_id":27411848,"comment_id":99497669,"body_markdown":"This is a safe one: `[^\\w\\.!@#$^+=-]`","body":"This is a safe one: <code>[^\\w\\.!@#$^+=-]</code>"}],"tags":[],"owner":{"account_id":3663387,"reputation":3549,"user_id":3058581,"display_name":"Adam111p"},"comment_count":2,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1505460750,"creation_date":1418249623,"answer_id":27411848,"question_id":754307,"body_markdown":"I use pure and simple regular expression.\r\nI give characters that may occur and through the negation of &quot;^&quot; I change all the other as a sign of such. &quot;_&quot;\r\n\r\n&gt; String fileName = someString.replaceAll(&quot;[^a-zA-Z0-9\\\\\\\\.\\\\\\\\-]&quot;, &quot;_&quot;);\r\n\r\nFor example:\r\nIf you do not want to be in the expression a &quot;.&quot; in then remove the &quot;\\\\\\\\.&quot;\r\n&gt; String fileName = someString.replaceAll(&quot;[^a-zA-Z0-9\\\\\\\\-]&quot;, &quot;_&quot;);","title":"Regex to replace characters that Windows doesn&#39;t accept in a filename","body":"<p>I use pure and simple regular expression.\nI give characters that may occur and through the negation of \"^\" I change all the other as a sign of such. \"_\"</p>\n\n<blockquote>\n  <p>String fileName = someString.replaceAll(\"[^a-zA-Z0-9\\\\.\\\\-]\", \"_\");</p>\n</blockquote>\n\n<p>For example:\nIf you do not want to be in the expression a \".\" in then remove the \"\\\\.\"</p>\n\n<blockquote>\n  <p>String fileName = someString.replaceAll(\"[^a-zA-Z0-9\\\\-]\", \"_\");</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":6321188,"reputation":12,"user_id":4909190,"display_name":"Balaco"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1445005486,"creation_date":1445005486,"answer_id":33172865,"question_id":754307,"body_markdown":"Windows also do not accept &quot;%&quot; as a file name.\r\n\r\nIf you are building a general expression that may affect files that will eventually be moved to other operating system, I suggest that you put more characters that may have problems with them.\r\n\r\nFor example, in Linux (many distributions I know), some users may have problems with files containing [b]&amp; ! ] [ / - ( )[/b]. The symbols are allowed in file names, but they may need to be specially treated by users and some programs have bugs caused by their existence.","title":"Regex to replace characters that Windows doesn&#39;t accept in a filename","body":"<p>Windows also do not accept \"%\" as a file name.</p>\n\n<p>If you are building a general expression that may affect files that will eventually be moved to other operating system, I suggest that you put more characters that may have problems with them.</p>\n\n<p>For example, in Linux (many distributions I know), some users may have problems with files containing [b]&amp; ! ] [ / - ( )[/b]. The symbols are allowed in file names, but they may need to be specially treated by users and some programs have bugs caused by their existence.</p>\n"},{"tags":[],"owner":{"account_id":3442780,"reputation":4961,"user_id":2884309,"accept_rate":73,"display_name":"Ivan Aracki"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1478613221,"creation_date":1478613221,"answer_id":40488695,"question_id":754307,"body_markdown":"I made one very ***simple method*** that works for me for most common cases:\r\n\r\n    // replace special characters that windows doesn&#39;t accept\r\n    private String replaceSpecialCharacters(String string) {\r\n        return string.replaceAll(&quot;[\\\\*/\\\\\\\\!\\\\|:?&lt;&gt;]&quot;, &quot;_&quot;)\r\n                .replaceAll(&quot;(%22)&quot;, &quot;_&quot;);\r\n    }\r\n\r\n**%22** is encoded if you have qoute (**&quot;**) in your file names.","title":"Regex to replace characters that Windows doesn&#39;t accept in a filename","body":"<p>I made one very <strong><em>simple method</em></strong> that works for me for most common cases:</p>\n\n<pre><code>// replace special characters that windows doesn't accept\nprivate String replaceSpecialCharacters(String string) {\n    return string.replaceAll(\"[\\\\*/\\\\\\\\!\\\\|:?&lt;&gt;]\", \"_\")\n            .replaceAll(\"(%22)\", \"_\");\n}\n</code></pre>\n\n<p><strong>%22</strong> is encoded if you have qoute (<strong>\"</strong>) in your file names.</p>\n"},{"tags":[],"owner":{"account_id":11997386,"reputation":74,"user_id":8778452,"display_name":"Jason"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1517153266,"creation_date":1517153266,"answer_id":48487959,"question_id":754307,"body_markdown":"The required regex / syntax (JS):\r\n\r\n    .trim().replace(/[\\\\/:*?\\&quot;&lt;&gt;|]/g,&quot;&quot;).substring(0,240);\r\n\r\nwhere the last bit is optional, use only when you want to limit the length to 240.\r\n\r\nother useful functions (JS):\r\n\r\n    .toUppperCase();\r\n    .toLowerCase();\r\n    .replace(/  /g,&#39; &#39;);     //normalising multiple spaces to one, add before substring.\r\n    .includes(&quot;str&quot;);        //check if a string segment is included in the filename\r\n    .split(&quot;.&quot;).slice(-1);   //get extension, given the entire filename contains a .","title":"Regex to replace characters that Windows doesn&#39;t accept in a filename","body":"<p>The required regex / syntax (JS):</p>\n\n<pre><code>.trim().replace(/[\\\\/:*?\\\"&lt;&gt;|]/g,\"\").substring(0,240);\n</code></pre>\n\n<p>where the last bit is optional, use only when you want to limit the length to 240.</p>\n\n<p>other useful functions (JS):</p>\n\n<pre><code>.toUppperCase();\n.toLowerCase();\n.replace(/  /g,' ');     //normalising multiple spaces to one, add before substring.\n.includes(\"str\");        //check if a string segment is included in the filename\n.split(\".\").slice(-1);   //get extension, given the entire filename contains a .\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22624875,"reputation":1,"user_id":16803105,"display_name":"Siddharth Ramawat"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681197066,"creation_date":1681196780,"answer_id":75983242,"question_id":754307,"body_markdown":"I was caught up in the same situation where I wanted to name files directly from a script that contained a vast majority of special characters. \r\nThe approach I came up in **Python** was to do something like \r\n\r\n    re.sub(r&quot;[^]\\w\\s`,!@#$&amp;%_^\\-)}{\\[&#39;.(]&quot;, &quot;_&quot;, text)\r\n**Java** equivalent would be: \r\n\r\n    text.replaceAll(&quot;[^]\\w\\s`,!@#$&amp;%_^\\-)}{\\[&#39;.(]&quot;, &quot;_&quot;)\r\n\r\n\r\n\r\n&gt; Note: I&#39;m using Windows 11 and it supports , ! @ # $ % ^ &amp; ` &#39;  \r\n\r\n[@Balaco](https://stackoverflow.com/a/33172865/16803105) mentioned that it doesn&#39;t support %, I&#39;m not sure which version, so please do try naming files with special characters in your system to figure out the rules\r\n\r\n","title":"Regex to replace characters that Windows doesn&#39;t accept in a filename","body":"<p>I was caught up in the same situation where I wanted to name files directly from a script that contained a vast majority of special characters.\nThe approach I came up in <strong>Python</strong> was to do something like</p>\n<pre><code>re.sub(r&quot;[^]\\w\\s`,!@#$&amp;%_^\\-)}{\\['.(]&quot;, &quot;_&quot;, text)\n</code></pre>\n<p><strong>Java</strong> equivalent would be:</p>\n<pre><code>text.replaceAll(&quot;[^]\\w\\s`,!@#$&amp;%_^\\-)}{\\['.(]&quot;, &quot;_&quot;)\n</code></pre>\n<blockquote>\n<p>Note: I'm using Windows 11 and it supports , ! @ # $ % ^ &amp; ` '</p>\n</blockquote>\n<p><a href=\"https://stackoverflow.com/a/33172865/16803105\">@Balaco</a> mentioned that it doesn't support %, I'm not sure which version, so please do try naming files with special characters in your system to figure out the rules</p>\n"}],"owner":{"account_id":29839,"reputation":14359,"user_id":80907,"accept_rate":88,"display_name":"KdgDev"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49363,"favorite_count":0,"down_vote_count":1,"up_vote_count":39,"accepted_answer_id":754483,"answer_count":12,"score":38,"last_activity_date":1681197066,"creation_date":1239841405,"question_id":754307,"body_markdown":"I&#39;m trying to build a regular expression that will detect any character that Windows does not accept as part of a file name (are these the same for other OS? I don&#39;t know, to be honest).\r\n\r\nThese symbols are: \r\n\r\n&lt;pre&gt; \\ / : * ? &quot; &lt; &gt; | &lt;/pre&gt;\r\n\r\nAnyway, this is what I have: `[\\\\/:*?\\&quot;&lt;&gt;|]`\r\n\r\nThe tester over at [http://gskinner.com/RegExr/][1] shows this to be working.\r\nFor the string `Allo*ha`, the `*` symbol lights up, signalling it&#39;s been found. Should I enter `Allo**ha` however, only the first `*` will light up. So I think I need to modify this regex to find all appearances of the mentioned characters, but I&#39;m not sure.\r\n\r\nYou see, in Java, I&#39;m lucky enough to have the function [String.replaceAll(String regex, String replacement)][2].\r\nThe description says: \r\n\r\n&gt; Replaces each substring of this string that matches the given regular expression with the given replacement.\r\n\r\nSo in other words, even if the regex only finds the first and then stops searching, this function will still find them all.\r\n\r\nFor instance: `String.replaceAll(&quot;[\\\\/:*?\\&quot;&lt;&gt;|]&quot;,&quot;&quot;)`\r\n\r\n\r\nHowever, I don&#39;t feel like I can take that risk. So does anybody know how I can extend this?\r\n\r\n\r\n  [1]: http://gskinner.com/RegExr/\r\n  [2]: http://java.sun.com/javase/6/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29","title":"Regex to replace characters that Windows doesn&#39;t accept in a filename","body":"<p>I'm trying to build a regular expression that will detect any character that Windows does not accept as part of a file name (are these the same for other OS? I don't know, to be honest).</p>\n\n<p>These symbols are: </p>\n\n<pre> \\ / : * ? \"  | </pre>\n\n<p>Anyway, this is what I have: <code>[\\\\/:*?\\\"&lt;&gt;|]</code></p>\n\n<p>The tester over at <a href=\"http://gskinner.com/RegExr/\" rel=\"noreferrer\">http://gskinner.com/RegExr/</a> shows this to be working.\nFor the string <code>Allo*ha</code>, the <code>*</code> symbol lights up, signalling it's been found. Should I enter <code>Allo**ha</code> however, only the first <code>*</code> will light up. So I think I need to modify this regex to find all appearances of the mentioned characters, but I'm not sure.</p>\n\n<p>You see, in Java, I'm lucky enough to have the function <a href=\"http://java.sun.com/javase/6/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29\" rel=\"noreferrer\">String.replaceAll(String regex, String replacement)</a>.\nThe description says: </p>\n\n<blockquote>\n  <p>Replaces each substring of this string that matches the given regular expression with the given replacement.</p>\n</blockquote>\n\n<p>So in other words, even if the regex only finds the first and then stops searching, this function will still find them all.</p>\n\n<p>For instance: <code>String.replaceAll(\"[\\\\/:*?\\\"&lt;&gt;|]\",\"\")</code></p>\n\n<p>However, I don't feel like I can take that risk. So does anybody know how I can extend this?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":19530088,"reputation":97,"user_id":14290075,"display_name":"LearnLoop"},"score":0,"creation_date":1681051807,"post_id":75971130,"comment_id":133993593,"body_markdown":"So, are you asking about the formatting of the print?","body":"So, are you asking about the formatting of the print?"},{"owner":{"account_id":28257673,"reputation":11,"user_id":21602889,"display_name":"venuslenus"},"score":0,"creation_date":1681099872,"post_id":75971130,"comment_id":133998664,"body_markdown":"yes, I know I needed to add the &#39;[&#39; but I wasn&#39;t sure on how to do it. Thank you.","body":"yes, I know I needed to add the &#39;[&#39; but I wasn&#39;t sure on how to do it. Thank you."}],"answers":[{"tags":[],"owner":{"account_id":23587950,"reputation":11,"user_id":17626137,"display_name":"H.S"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681052328,"creation_date":1681051657,"answer_id":75971169,"question_id":75971130,"body_markdown":"&gt; IF I INPUT &quot;[1, 9, 3],&quot; FOR EXAMPLE, I GET &quot;1, 9, 3,&quot; INSTEAD OF &quot;[1, 9, 3]&quot; HOW CAN I FIX THIS?\r\n\r\nThe brackets are not added automatically, you are printing elements, there&#39;s no reason they would be. You need to modify the printing function.\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    import java.util.Arrays;\r\n\r\n    public class LabProgram {\r\n\r\n       public static void printArray(int[] arr){\r\n          int n = arr.length;\r\n          if (n&gt;0){\r\n            System.out.print(&#39;[&#39;); //Modified\r\n               for (int i = 0; i &lt; n; i++){\r\n                 System.out.print(arr[i] + &quot;, &quot;);\r\n             }\r\n            System.out.print(&#39;]&#39;); //Modified   \r\n           }\r\n          System.out.println();\r\n       }\r\n\r\n       public static int[] removeEven(int[] arr){\r\n          int oddCount = 0;\r\n           for (int i = 0; i &lt; arr.length; i ++){\r\n             if (arr[i] % 2 != 0){\r\n                oddCount++;\r\n             }\r\n          }\r\n          int[] result = new int [oddCount];\r\n           int idx = 0;\r\n            for (int i = 0; i &lt; arr.length; i++){\r\n             if(arr[i] % 2 != 0){\r\n                result[idx] = arr[i];\r\n                idx++;\r\n             }\r\n          }\r\n          return result;\r\n       }\r\n       public static void main(String[] args){\r\n          int[] arr = {1, 2, 3, 4, 5, 6, 7, 8, 9};\r\n           int[] result = removeEven(arr);\r\n          printArray(result);\r\n       }\r\n    }\r\n\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nThis will output the brackets. \r\nAdditionally, I&#39;d recommend you modify the code so that the last element in the array does not have a comma after it, I&#39;m leaving that up to you.","title":"Remove all even numbers from an array","body":"<blockquote>\n<p>IF I INPUT &quot;[1, 9, 3],&quot; FOR EXAMPLE, I GET &quot;1, 9, 3,&quot; INSTEAD OF &quot;[1, 9, 3]&quot; HOW CAN I FIX THIS?</p>\n</blockquote>\n<p>The brackets are not added automatically, you are printing elements, there's no reason they would be. You need to modify the printing function.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.Arrays;\n\npublic class LabProgram {\n\n   public static void printArray(int[] arr){\n      int n = arr.length;\n      if (n&gt;0){\n        System.out.print('['); //Modified\n           for (int i = 0; i &lt; n; i++){\n             System.out.print(arr[i] + &quot;, &quot;);\n         }\n        System.out.print(']'); //Modified   \n       }\n      System.out.println();\n   }\n\n   public static int[] removeEven(int[] arr){\n      int oddCount = 0;\n       for (int i = 0; i &lt; arr.length; i ++){\n         if (arr[i] % 2 != 0){\n            oddCount++;\n         }\n      }\n      int[] result = new int [oddCount];\n       int idx = 0;\n        for (int i = 0; i &lt; arr.length; i++){\n         if(arr[i] % 2 != 0){\n            result[idx] = arr[i];\n            idx++;\n         }\n      }\n      return result;\n   }\n   public static void main(String[] args){\n      int[] arr = {1, 2, 3, 4, 5, 6, 7, 8, 9};\n       int[] result = removeEven(arr);\n      printArray(result);\n   }\n}\n</code></pre>\n<p>This will output the brackets.\nAdditionally, I'd recommend you modify the code so that the last element in the array does not have a comma after it, I'm leaving that up to you.</p>\n"},{"tags":[],"owner":{"account_id":21985160,"reputation":11,"user_id":16259556,"display_name":"Ana"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681196980,"creation_date":1681196980,"answer_id":75983269,"question_id":75971130,"body_markdown":"To get the desired output, you can simply use `Arrays.toString()` from the `java.util` package:\r\n```\r\nSystem.out.println(Arrays.toString(result));\r\n```","title":"Remove all even numbers from an array","body":"<p>To get the desired output, you can simply use <code>Arrays.toString()</code> from the <code>java.util</code> package:</p>\n<pre><code>System.out.println(Arrays.toString(result));\n</code></pre>\n"}],"owner":{"account_id":28257673,"reputation":11,"user_id":21602889,"display_name":"venuslenus"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":222,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1681196980,"creation_date":1681051020,"question_id":75971130,"body_markdown":"Write the removeEvens() method, which receives an array of integers as a parameter and returns a new array of integers containing only the odd numbers from the original array. The main program outputs values of the returned array.\r\n\r\nHint: If the original array has even numbers, then the new array will be smaller in length than the original array and should have no blank elements.\r\n\r\nEx: If the array passed to the removeEvens() method is [1, 2, 3, 4, 5, 6, 7, 8, 9], then the method returns and the program output is:\r\n\r\n[1, 3, 5, 7, 9]\r\n\r\nEx: If the array passed to the removeEvens() method is [1, 9, 3], then the method returns and the program output is:\r\n\r\n[1, 9, 3]\r\n\r\nIF I INPUT &quot;[1, 9, 3],&quot; FOR EXAMPLE, I GET &quot;1, 9, 3,&quot; INSTEAD OF &quot;[1, 9, 3]&quot; HOW CAN I FIX THIS? \r\n\r\n\r\n\r\n    import java.util.Arrays;\r\n\r\n    public class LabProgram {\r\n   \r\n       public static void printArray(int[] arr){\r\n          int n = arr.length;\r\n           for (int i = 0; i &lt; n; i++){\r\n             System.out.print(arr[i] + &quot;, &quot;);\r\n          }\r\n          System.out.println();\r\n       }\r\n   \r\n       public static int[] removeEven(int[] arr){\r\n          int oddCount = 0;\r\n           for (int i = 0; i &lt; arr.length; i ++){\r\n             if (arr[i] % 2 != 0){\r\n                oddCount++;\r\n             }\r\n          }\r\n          int[] result = new int [oddCount];\r\n           int idx = 0;\r\n            for (int i = 0; i &lt; arr.length; i++){\r\n             if(arr[i] % 2 != 0){\r\n                result[idx] = arr[i];\r\n                idx++;\r\n             }\r\n          }\r\n          return result;\r\n       }\r\n       public static void main(String[] args){\r\n          int[] arr = {1, 2, 3, 4, 5, 6, 7, 8, 9};\r\n           int[] result = removeEven(arr);\r\n          printArray(result);\r\n       }\r\n    }","title":"Remove all even numbers from an array","body":"<p>Write the removeEvens() method, which receives an array of integers as a parameter and returns a new array of integers containing only the odd numbers from the original array. The main program outputs values of the returned array.</p>\n<p>Hint: If the original array has even numbers, then the new array will be smaller in length than the original array and should have no blank elements.</p>\n<p>Ex: If the array passed to the removeEvens() method is [1, 2, 3, 4, 5, 6, 7, 8, 9], then the method returns and the program output is:</p>\n<p>[1, 3, 5, 7, 9]</p>\n<p>Ex: If the array passed to the removeEvens() method is [1, 9, 3], then the method returns and the program output is:</p>\n<p>[1, 9, 3]</p>\n<p>IF I INPUT &quot;[1, 9, 3],&quot; FOR EXAMPLE, I GET &quot;1, 9, 3,&quot; INSTEAD OF &quot;[1, 9, 3]&quot; HOW CAN I FIX THIS?</p>\n<pre><code>import java.util.Arrays;\n\npublic class LabProgram {\n\n   public static void printArray(int[] arr){\n      int n = arr.length;\n       for (int i = 0; i &lt; n; i++){\n         System.out.print(arr[i] + &quot;, &quot;);\n      }\n      System.out.println();\n   }\n\n   public static int[] removeEven(int[] arr){\n      int oddCount = 0;\n       for (int i = 0; i &lt; arr.length; i ++){\n         if (arr[i] % 2 != 0){\n            oddCount++;\n         }\n      }\n      int[] result = new int [oddCount];\n       int idx = 0;\n        for (int i = 0; i &lt; arr.length; i++){\n         if(arr[i] % 2 != 0){\n            result[idx] = arr[i];\n            idx++;\n         }\n      }\n      return result;\n   }\n   public static void main(String[] args){\n      int[] arr = {1, 2, 3, 4, 5, 6, 7, 8, 9};\n       int[] result = removeEven(arr);\n      printArray(result);\n   }\n}\n</code></pre>\n"},{"tags":["java","kotlin","safari","mpesa"],"owner":{"account_id":26664991,"reputation":1,"user_id":20278659,"display_name":"Mariano Pedro"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681196963,"creation_date":1681196180,"question_id":75983156,"body_markdown":"I&#39;ve been trying to integrate the M-Pesa API into my app in Android Studio for days now and I&#39;m trying to do this with Daraja/safaricom.co.ke portal!!  Well I&#39;m stuck for a long time when to do authorization and generate Outh tokens to get access to my token and its expiry date. Can anyone help me how to generate token and have access to them in 2023 ??\r\n\r\nI tried to do this through several blogs but it&#39;s been a while since they were done and the safaricom website has changed.  And there is no one who teaches clearly in 2023.","title":"Generate Outh tokens on Dafaricom. Api M-Pesa Java/kotlin","body":"<p>I've been trying to integrate the M-Pesa API into my app in Android Studio for days now and I'm trying to do this with Daraja/safaricom.co.ke portal!!  Well I'm stuck for a long time when to do authorization and generate Outh tokens to get access to my token and its expiry date. Can anyone help me how to generate token and have access to them in 2023 ??</p>\n<p>I tried to do this through several blogs but it's been a while since they were done and the safaricom website has changed.  And there is no one who teaches clearly in 2023.</p>\n"},{"tags":["java","resources","anylogic","pool","agent-based-modeling"],"comments":[{"owner":{"account_id":4196914,"reputation":8766,"user_id":3438111,"accept_rate":100,"display_name":"Felipe"},"score":0,"creation_date":1681056325,"post_id":75970765,"comment_id":133994180,"body_markdown":"you have to use a function, you can&#39;t use if/else in there","body":"you have to use a function, you can&#39;t use if/else in there"}],"answers":[{"tags":[],"owner":{"account_id":2486375,"reputation":11083,"user_id":2164728,"accept_rate":62,"display_name":"Benjamin"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681058231,"creation_date":1681058231,"answer_id":75971709,"question_id":75970765,"body_markdown":"The Seize block code only allows 1 line of code, not several. Hence, you need to move your code into a separate function, say &#39;f_GetResourcePools`. \r\n\r\nIt should take 1 input argument `agent` of the type flowing through the seize block. And it should return a `ResourcePool[][]`.\r\n\r\nIn the seize block, you simply call that function now using `f_getResourcePools(agent)`. (not even a `;` is needed!)\r\n\r\nPS: Start learning about the difference between code boxes that allow as many code lines as you like and those that only allow 1 line. The latter is used where block characteristics are &quot;asking&quot; a question (in this case &quot;which resource pools should be used?&quot;).","title":"Number of resources seized based on individual agent parameter","body":"<p>The Seize block code only allows 1 line of code, not several. Hence, you need to move your code into a separate function, say 'f_GetResourcePools`.</p>\n<p>It should take 1 input argument <code>agent</code> of the type flowing through the seize block. And it should return a <code>ResourcePool[][]</code>.</p>\n<p>In the seize block, you simply call that function now using <code>f_getResourcePools(agent)</code>. (not even a <code>;</code> is needed!)</p>\n<p>PS: Start learning about the difference between code boxes that allow as many code lines as you like and those that only allow 1 line. The latter is used where block characteristics are &quot;asking&quot; a question (in this case &quot;which resource pools should be used?&quot;).</p>\n"},{"tags":[],"owner":{"account_id":22333256,"reputation":503,"user_id":16554239,"display_name":"mczandrea"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681196963,"creation_date":1681196963,"answer_id":75983263,"question_id":75970765,"body_markdown":"Using a separate function is neater, but the code you wrote can be written on a single line by using a ternary operator. \r\n\r\n`agent.parIsLarge ? new ResourcePool[][]{{resResourceA, resResourceB}} : new ResourcePool[][]{{resResourceA},{resResourceB}}`","title":"Number of resources seized based on individual agent parameter","body":"<p>Using a separate function is neater, but the code you wrote can be written on a single line by using a ternary operator.</p>\n<p><code>agent.parIsLarge ? new ResourcePool[][]{{resResourceA, resResourceB}} : new ResourcePool[][]{{resResourceA},{resResourceB}}</code></p>\n"}],"owner":{"account_id":27892430,"reputation":11,"user_id":21298506,"display_name":"Andrey"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1681196963,"creation_date":1681046382,"question_id":75970765,"body_markdown":"There are two types of agents - large and small. So, I introduced parameter parIsLarge, which is boolean (true is large, false is small). Large agent requires a combination of two units of resources - resourceA and resourceB. Small agent requires one unit of resource - either resourceA or resourceB. \r\n\r\n\r\n\r\nFirst, I wanted to use a function but it failed to work. I replaced the function by code in seize block but it still doesn&#39;t work. [The code to assign the right resources based on agent&#39;s parameter](https://i.stack.imgur.com/E1yTS.png). [This is the error encountered](https://i.stack.imgur.com/Uid4g.png). Please help to correct the code\r\n","title":"Number of resources seized based on individual agent parameter","body":"<p>There are two types of agents - large and small. So, I introduced parameter parIsLarge, which is boolean (true is large, false is small). Large agent requires a combination of two units of resources - resourceA and resourceB. Small agent requires one unit of resource - either resourceA or resourceB.</p>\n<p>First, I wanted to use a function but it failed to work. I replaced the function by code in seize block but it still doesn't work. <a href=\"https://i.stack.imgur.com/E1yTS.png\" rel=\"nofollow noreferrer\">The code to assign the right resources based on agent's parameter</a>. <a href=\"https://i.stack.imgur.com/Uid4g.png\" rel=\"nofollow noreferrer\">This is the error encountered</a>. Please help to correct the code</p>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":306540,"reputation":1801,"user_id":2695990,"display_name":"fascynacja"},"score":0,"creation_date":1681192257,"post_id":75982659,"comment_id":134012387,"body_markdown":"have you seen:https://www.baeldung.com/spring-bucket4j#spring-interceptor , section &quot;API Clients and Pricing Plan&quot; ? This topic has many articles and even many stackoverflow posts: https://stackoverflow.com/questions/44042412/how-to-set-rate-limit-for-each-user-in-spring-boot. Please share code with your solution and state what is not working.","body":"have you seen:<a href=\"https://www.baeldung.com/spring-bucket4j#spring-interceptor\" rel=\"nofollow noreferrer\">baeldung.com/spring-bucket4j#spring-interceptor</a> , section &quot;API Clients and Pricing Plan&quot; ? This topic has many articles and even many stackoverflow posts: <a href=\"https://stackoverflow.com/questions/44042412/how-to-set-rate-limit-for-each-user-in-spring-boot\" title=\"how to set rate limit for each user in spring boot\">stackoverflow.com/questions/44042412/&hellip;</a>. Please share code with your solution and state what is not working."},{"owner":{"account_id":28084301,"reputation":11,"user_id":21454898,"display_name":"Nihar Ranjan Khatua"},"score":0,"creation_date":1681197357,"post_id":75982659,"comment_id":134013277,"body_markdown":"I have checked the above post but its not the user specific.","body":"I have checked the above post but its not the user specific."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1681239996,"post_id":75982659,"comment_id":134023821,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":28084301,"reputation":11,"user_id":21454898,"display_name":"Nihar Ranjan Khatua"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":148,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681196793,"creation_date":1681191241,"question_id":75982659,"body_markdown":"In my existing Spring boot application I am trying to implement rate limit concept. I want to store the data in key value pair in cache like: key will be my user id and value will be no.\r\n\r\nFor spring boot rate limit I have tried below approach and its not working so I am trying using cache option.\r\nBelow options I have tried\r\n1. Using Bucket concept its working but for all application wise but not for any specific user. Specific like: I want to search the product 5 times in 1 min, If its exceed to 6 th times then it will throw an error. Its working but not for user specific.\r\n2. I have tried with IP-address but its not working because for my client side all user having the same IP-address","title":"How to store the data in cache in key value pair for spring boot application?","body":"<p>In my existing Spring boot application I am trying to implement rate limit concept. I want to store the data in key value pair in cache like: key will be my user id and value will be no.</p>\n<p>For spring boot rate limit I have tried below approach and its not working so I am trying using cache option.\nBelow options I have tried</p>\n<ol>\n<li>Using Bucket concept its working but for all application wise but not for any specific user. Specific like: I want to search the product 5 times in 1 min, If its exceed to 6 th times then it will throw an error. Its working but not for user specific.</li>\n<li>I have tried with IP-address but its not working because for my client side all user having the same IP-address</li>\n</ol>\n"},{"tags":["java","kotlin","class","private"],"comments":[{"owner":{"account_id":238127,"reputation":86162,"user_id":506796,"accept_rate":83,"display_name":"Tenfour04"},"score":0,"creation_date":1667709054,"post_id":74333075,"comment_id":131229422,"body_markdown":"I dont understand what youre trying to do. Why are you trying to return it in public functions if its supposed to be private? How would you achieve this in Java?","body":"I dont understand what youre trying to do. Why are you trying to return it in public functions if its supposed to be private? How would you achieve this in Java?"},{"owner":{"account_id":25329477,"reputation":169,"user_id":19149499,"display_name":"Tim Korelov"},"score":0,"creation_date":1667785802,"post_id":74333075,"comment_id":131243061,"body_markdown":"Haven&#39;t I written it all in the post? I will provide Java code a bit later","body":"Haven&#39;t I written it all in the post? I will provide Java code a bit later"},{"owner":{"account_id":238127,"reputation":86162,"user_id":506796,"accept_rate":83,"display_name":"Tenfour04"},"score":0,"creation_date":1667787514,"post_id":74333075,"comment_id":131243274,"body_markdown":"The concept of it being private, yet returned in a public function are mutually exclusive. I can&#39;t understand how you would accomplish this in Java, but maybe that will better illustrate what you&#39;re actually trying to accomplish.","body":"The concept of it being private, yet returned in a public function are mutually exclusive. I can&#39;t understand how you would accomplish this in Java, but maybe that will better illustrate what you&#39;re actually trying to accomplish."},{"owner":{"account_id":25329477,"reputation":169,"user_id":19149499,"display_name":"Tim Korelov"},"score":0,"creation_date":1667794904,"post_id":74333075,"comment_id":131244296,"body_markdown":"https://stackoverflow.com/questions/6537082/accessing-field-of-outer-class is somewhat relevant. I am thinking of 2 ways to do this. I will edit the question with the new Java code soon.","body":"<a href=\"https://stackoverflow.com/questions/6537082/accessing-field-of-outer-class\" title=\"accessing field of outer class\">stackoverflow.com/questions/6537082/&hellip;</a> is somewhat relevant. I am thinking of 2 ways to do this. I will edit the question with the new Java code soon."},{"owner":{"account_id":25329477,"reputation":169,"user_id":19149499,"display_name":"Tim Korelov"},"score":0,"creation_date":1667796933,"post_id":74333075,"comment_id":131244524,"body_markdown":"@Tenfour04 updated with Java code that works perfectly. Essentially, there is a private constructor for Point.","body":"@Tenfour04 updated with Java code that works perfectly. Essentially, there is a private constructor for Point."},{"owner":{"account_id":4623673,"reputation":6002,"user_id":4161471,"display_name":"aSemy"},"score":0,"creation_date":1667804136,"post_id":74333075,"comment_id":131245826,"body_markdown":"Try changing `private class Point(...)` to `class Point private constructor(...)`","body":"Try changing <code>private class Point(...)</code> to <code>class Point private constructor(...)</code>"},{"owner":{"account_id":25329477,"reputation":169,"user_id":19149499,"display_name":"Tim Korelov"},"score":0,"creation_date":1667809516,"post_id":74333075,"comment_id":131247307,"body_markdown":"It now gives Cannot access &#39;&lt;init&gt;&#39;: it is private in &#39;Point&#39; error\nAt the val point = Point(radius, latitude, longitude) in the addPoint()","body":"It now gives Cannot access &#39;&lt;init&gt;&#39;: it is private in &#39;Point&#39; error At the val point = Point(radius, latitude, longitude) in the addPoint()"}],"answers":[{"comments":[{"owner":{"account_id":25329477,"reputation":169,"user_id":19149499,"display_name":"Tim Korelov"},"score":0,"creation_date":1667830808,"post_id":74347446,"comment_id":131254740,"body_markdown":"Yes, I have just tried, if I set nested class as inner I can only instantiate a Point with a receiver of class Sphere. But still I would like to restrict creating nested class object only to inside the Sphere class. As I understood, you said it is not possible in Kotlin. Kotlin classes cant access private members of their nested classes, unlike in Java. Thank you for the answer.","body":"Yes, I have just tried, if I set nested class as inner I can only instantiate a Point with a receiver of class Sphere. But still I would like to restrict creating nested class object only to inside the Sphere class. As I understood, you said it is not possible in Kotlin. Kotlin classes cant access private members of their nested classes, unlike in Java. Thank you for the answer."},{"owner":{"account_id":25329477,"reputation":169,"user_id":19149499,"display_name":"Tim Korelov"},"score":0,"creation_date":1667830937,"post_id":74347446,"comment_id":131254799,"body_markdown":"Also, as I understand, I could introduce an &quot;Inner&quot; interface for the nested class to implement, is that right? Could the problem be solved this way?","body":"Also, as I understand, I could introduce an &quot;Inner&quot; interface for the nested class to implement, is that right? Could the problem be solved this way?"},{"owner":{"account_id":238127,"reputation":86162,"user_id":506796,"accept_rate":83,"display_name":"Tenfour04"},"score":0,"creation_date":1667831062,"post_id":74347446,"comment_id":131254852,"body_markdown":"You could define a nested interface (not `inner`), but that won&#39;t provide any protections against implementing it from outside. Actually, I don&#39;t see the need for preventing this in the first place. What harm can be done from outside code creating a Point instance? Or is it just to reduce namespace pollution?","body":"You could define a nested interface (not <code>inner</code>), but that won&#39;t provide any protections against implementing it from outside. Actually, I don&#39;t see the need for preventing this in the first place. What harm can be done from outside code creating a Point instance? Or is it just to reduce namespace pollution?"},{"owner":{"account_id":25329477,"reputation":169,"user_id":19149499,"display_name":"Tim Korelov"},"score":0,"creation_date":1667831378,"post_id":74347446,"comment_id":131254969,"body_markdown":"Yes, I&#39;ve meant just the name would be &quot;Inner&quot;, not the type, which indeed would be nested. For me it seems like a good practice to restrict access to the methods that should never be accessed, and regarding reducing namespace pollution  yes, that too.","body":"Yes, I&#39;ve meant just the name would be &quot;Inner&quot;, not the type, which indeed would be nested. For me it seems like a good practice to restrict access to the methods that should never be accessed, and regarding reducing namespace pollution  yes, that too."}],"tags":[],"owner":{"account_id":238127,"reputation":86162,"user_id":506796,"accept_rate":83,"display_name":"Tenfour04"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1667829047,"creation_date":1667828090,"answer_id":74347446,"question_id":74333075,"body_markdown":"What was confusing about your request is that you&#39;re not asking for a private class at all. A private class is one that is completely inaccessible from outside a file, so it doesn&#39;t make sense to return it as a type from any public functions in that file. The same is true in Java.\r\n\r\nYour Java code doesn&#39;t make Point private. It only makes its constructor private, so I am guessing what you really wanted was to prevent instantiation of the Point class from outside this file.\r\n\r\nThere does not appear to be a way to duplicate this behavior in Kotlin. ([Discussion here](https://discuss.kotlinlang.org/t/how-can-i-make-nested-class-constructors-accessible-only-by-surrounding-class/12608/9)) The closest thing would be to mark the constructor `internal`. \r\n\r\nAlternatively, it is possibly sufficient for you to mark the class as `inner`, so the class cannot be instantiated without the context of the outer class. You could call `someSphereInstance.Point(...)`, but not `Sphere.Point(...)`.\r\n\r\nNote that making the nested class `inner` will make it more like your Java code. The two types of nested class are declared differently in Java and Kotlin:\r\n\r\n**Modifier keywords for nested classes:**\r\n\r\n|            | Bound to an outer class instance | Independent of outer instance |\r\n|------------|----------------------------------|-------------------------------|\r\n| **Java**   | *none*                           | `static`                      |\r\n| **Kotlin** | `inner`                          | *none*                        |","title":"Kotlin: &#39;public&#39; function exposes its &#39;private-in-class&#39; return type argument Point","body":"<p>What was confusing about your request is that you're not asking for a private class at all. A private class is one that is completely inaccessible from outside a file, so it doesn't make sense to return it as a type from any public functions in that file. The same is true in Java.</p>\n<p>Your Java code doesn't make Point private. It only makes its constructor private, so I am guessing what you really wanted was to prevent instantiation of the Point class from outside this file.</p>\n<p>There does not appear to be a way to duplicate this behavior in Kotlin. (<a href=\"https://discuss.kotlinlang.org/t/how-can-i-make-nested-class-constructors-accessible-only-by-surrounding-class/12608/9\" rel=\"nofollow noreferrer\">Discussion here</a>) The closest thing would be to mark the constructor <code>internal</code>.</p>\n<p>Alternatively, it is possibly sufficient for you to mark the class as <code>inner</code>, so the class cannot be instantiated without the context of the outer class. You could call <code>someSphereInstance.Point(...)</code>, but not <code>Sphere.Point(...)</code>.</p>\n<p>Note that making the nested class <code>inner</code> will make it more like your Java code. The two types of nested class are declared differently in Java and Kotlin:</p>\n<p><strong>Modifier keywords for nested classes:</strong></p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th></th>\n<th>Bound to an outer class instance</th>\n<th>Independent of outer instance</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>Java</strong></td>\n<td><em>none</em></td>\n<td><code>static</code></td>\n</tr>\n<tr>\n<td><strong>Kotlin</strong></td>\n<td><code>inner</code></td>\n<td><em>none</em></td>\n</tr>\n</tbody>\n</table>\n</div>"},{"tags":[],"owner":{"account_id":28272327,"reputation":1,"user_id":21615312,"display_name":"ImprezaMaster"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681195901,"creation_date":1681195901,"answer_id":75983125,"question_id":74333075,"body_markdown":"I think you are looking for an interface in an interface.\r\n\r\n\r\n    interface Sphere {\r\n      ...\r\n      interface Point{\r\n        fun getRadius()\r\n      }\r\n    }\r\n    \r\n    class SphereImpl : Sphere {\r\n      ...\r\n      private PointImpl(r:Double, ...): Point {\r\n        override fun getRadius()\r\n      }\r\n    }\r\n\r\n\r\nPoint is nonconstructable except for within Sphere now","title":"Kotlin: &#39;public&#39; function exposes its &#39;private-in-class&#39; return type argument Point","body":"<p>I think you are looking for an interface in an interface.</p>\n<pre><code>interface Sphere {\n  ...\n  interface Point{\n    fun getRadius()\n  }\n}\n\nclass SphereImpl : Sphere {\n  ...\n  private PointImpl(r:Double, ...): Point {\n    override fun getRadius()\n  }\n}\n</code></pre>\n<p>Point is nonconstructable except for within Sphere now</p>\n"}],"owner":{"account_id":25329477,"reputation":169,"user_id":19149499,"display_name":"Tim Korelov"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":491,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74347446,"answer_count":2,"score":1,"last_activity_date":1681195901,"creation_date":1667704800,"question_id":74333075,"body_markdown":"**EDIT: I HAVE PROVIDED JAVA CODE THAT SOLVES MY PROBLEM AT THE END.**\r\n\r\nI want to know how to make a private nested class in Kotlin so that it is accessible from its parent class but not accessible from anywhere else.\r\n\r\nIn the following code snippet I&#39;ve marked lines where compilation error occurs with &quot;//(!)&quot;.\r\n\r\n   \r\n\r\n \r\n\r\n    class Sphere(val radius: Double = 1.toDouble()) {\r\n        \r\n            var pointsLinkedHashSet: LinkedHashSet&lt;Point&gt; = linkedSetOf() \r\n            //(!)&#39;public&#39; property exposes its &#39;private-in-class&#39; type argument Point (make &quot;Point&quot; public)\r\n        \r\n            fun getPoints(): LinkedHashSet&lt;Point&gt; {\r\n                return pointsLinkedHashSet\r\n            } \r\n            //(!) &#39;public&#39; function exposes its &#39;private-in-class&#39; return type argument Point (make &quot;Point&quot; public)\r\n        \r\n            fun getLastPoint(): Point = pointsLinkedHashSet.last()\r\n            //(!) Same as previous\r\n\r\n            fun clearPoints() = pointsLinkedHashSet.clear()\r\n        \r\n            fun addPoint(radius: Double = this.radius, latitude: Double, longitude: Double): Point {\r\n                val point = Point(radius, latitude, longitude)\r\n                pointsLinkedHashSet.add(point)\r\n                return point\r\n            }\r\n            //(!) Same as previous\r\n        \r\n            private class Point(\r\n                val radius: Double,\r\n                val latitude: Double,\r\n                val longitude: Double\r\n            )\r\n        \r\n        }\r\n\r\nIn other words, here is my Main class:\r\n```\r\nclass Main {\r\n\r\n    companion object {\r\n        @JvmStatic\r\n        fun main(args: Array&lt;String&gt;) {\r\n            val sphere = Sphere()\r\n            val point = sphere.addPoint(10.toDouble(), 10.toDouble(), 10.toDouble()) //this works as it should\r\n            val point1 = sphere.getLastPoint() // this too\r\n            val point2 = Sphere.Point(10.toDouble(), 10.toDouble(), 10.toDouble()) //this doesn&#39;t work because Point is private, as it should\r\n            val radius = point.radius //same in these next 3 lines\r\n            val latitude = point.latitude\r\n            val longitude = point.longitude \r\n        }\r\n    }\r\n}\r\n```\r\n\r\nI&#39;ve described desired behaviour in the code comments.\r\n\r\nIt is easy to implement in Java, but in Kotlin I can&#39;t yet find a way to do it.\r\nAnd couldn&#39;t find any article relevant to this problem even though it can be easily encountered.\r\n\r\nOr am I missing something obvious? Could you help, please? Thank you.\r\n\r\n**UPDATE WITH JAVA CODE:**\r\n\r\nSphere class:\r\n```\r\npackage org.example;\r\nimport java.util.LinkedHashSet;\r\npublic class Sphere {\r\n    private final Double radius;\r\n    private final LinkedHashSet&lt;Point&gt; pointsLinkedHashSet = new LinkedHashSet&lt;Point&gt;();\r\n    public Double getRadius() {\r\n        return this.radius;\r\n    }\r\n    public Sphere(Double radius) {\r\n        this.radius = radius;\r\n    }\r\n    public Point getLastPoint() {\r\n        if (pointsLinkedHashSet.isEmpty()) return null;\r\n        return (Point) pointsLinkedHashSet.toArray()[pointsLinkedHashSet.size() - 1];\r\n    }\r\n    public Point addPoint(Double latitude, Double longitude) {\r\n        Point point = new Point(latitude, longitude);\r\n        pointsLinkedHashSet.add(point);\r\n        return point;\r\n    }\r\n    class Point {\r\n        private final Double radius;\r\n        private final Double latitude;\r\n        private final Double longitude;\r\n        Double getLatitude() {\r\n            return latitude;\r\n        }\r\n        Double getLongitude() {\r\n            return longitude;\r\n        }\r\n        Double getRadius() {\r\n            return this.radius;\r\n        }\r\n        private Point(Double latitude, Double longitude) {\r\n            this.radius = Sphere.this.radius;\r\n            this.latitude = latitude;\r\n            this.longitude = longitude;\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nMain class:\r\n```\r\npackage org.example;\r\n\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n        Sphere sphere = new Sphere(1.0);\r\n        System.out.println(&quot;Sphere radius = &quot; + sphere.getRadius());\r\n        Sphere.Point point = sphere.addPoint(10.0,10.0);\r\n        System.out.println(&quot;Point radius = &quot; + point.getRadius());\r\n        System.out.println(&quot;Point latitude = &quot; + point.getLatitude());\r\n        System.out.println(&quot;Point longitude = &quot; + point.getLongitude());\r\n//        Sphere.Point point = new Sphere.Point(10.0,10.0); does not work\r\n//        can not create new Point object because its constructor is private,\r\n//        this is desired behaviour!\r\n        Sphere.Point point1 = sphere.getLastPoint();\r\n        System.out.println(&quot;Point1 radius = &quot; + point1.getRadius());\r\n        System.out.println(&quot;Point1 latitude = &quot; + point1.getLatitude());\r\n        System.out.println(&quot;Point1 longitude = &quot; + point1.getLongitude());\r\n    }\r\n}\r\n```\r\nOutput:\r\n```\r\nSphere radius = 1.0\r\nPoint radius = 1.0\r\nPoint latitude = 10.0\r\nPoint longitude = 10.0\r\nPoint1 radius = 1.0\r\nPoint1 latitude = 10.0\r\nPoint1 longitude = 10.0\r\n```","title":"Kotlin: &#39;public&#39; function exposes its &#39;private-in-class&#39; return type argument Point","body":"<p><strong>EDIT: I HAVE PROVIDED JAVA CODE THAT SOLVES MY PROBLEM AT THE END.</strong></p>\n<p>I want to know how to make a private nested class in Kotlin so that it is accessible from its parent class but not accessible from anywhere else.</p>\n<p>In the following code snippet I've marked lines where compilation error occurs with &quot;//(!)&quot;.</p>\n<pre><code>class Sphere(val radius: Double = 1.toDouble()) {\n    \n        var pointsLinkedHashSet: LinkedHashSet&lt;Point&gt; = linkedSetOf() \n        //(!)'public' property exposes its 'private-in-class' type argument Point (make &quot;Point&quot; public)\n    \n        fun getPoints(): LinkedHashSet&lt;Point&gt; {\n            return pointsLinkedHashSet\n        } \n        //(!) 'public' function exposes its 'private-in-class' return type argument Point (make &quot;Point&quot; public)\n    \n        fun getLastPoint(): Point = pointsLinkedHashSet.last()\n        //(!) Same as previous\n\n        fun clearPoints() = pointsLinkedHashSet.clear()\n    \n        fun addPoint(radius: Double = this.radius, latitude: Double, longitude: Double): Point {\n            val point = Point(radius, latitude, longitude)\n            pointsLinkedHashSet.add(point)\n            return point\n        }\n        //(!) Same as previous\n    \n        private class Point(\n            val radius: Double,\n            val latitude: Double,\n            val longitude: Double\n        )\n    \n    }\n</code></pre>\n<p>In other words, here is my Main class:</p>\n<pre><code>class Main {\n\n    companion object {\n        @JvmStatic\n        fun main(args: Array&lt;String&gt;) {\n            val sphere = Sphere()\n            val point = sphere.addPoint(10.toDouble(), 10.toDouble(), 10.toDouble()) //this works as it should\n            val point1 = sphere.getLastPoint() // this too\n            val point2 = Sphere.Point(10.toDouble(), 10.toDouble(), 10.toDouble()) //this doesn't work because Point is private, as it should\n            val radius = point.radius //same in these next 3 lines\n            val latitude = point.latitude\n            val longitude = point.longitude \n        }\n    }\n}\n</code></pre>\n<p>I've described desired behaviour in the code comments.</p>\n<p>It is easy to implement in Java, but in Kotlin I can't yet find a way to do it.\nAnd couldn't find any article relevant to this problem even though it can be easily encountered.</p>\n<p>Or am I missing something obvious? Could you help, please? Thank you.</p>\n<p><strong>UPDATE WITH JAVA CODE:</strong></p>\n<p>Sphere class:</p>\n<pre><code>package org.example;\nimport java.util.LinkedHashSet;\npublic class Sphere {\n    private final Double radius;\n    private final LinkedHashSet&lt;Point&gt; pointsLinkedHashSet = new LinkedHashSet&lt;Point&gt;();\n    public Double getRadius() {\n        return this.radius;\n    }\n    public Sphere(Double radius) {\n        this.radius = radius;\n    }\n    public Point getLastPoint() {\n        if (pointsLinkedHashSet.isEmpty()) return null;\n        return (Point) pointsLinkedHashSet.toArray()[pointsLinkedHashSet.size() - 1];\n    }\n    public Point addPoint(Double latitude, Double longitude) {\n        Point point = new Point(latitude, longitude);\n        pointsLinkedHashSet.add(point);\n        return point;\n    }\n    class Point {\n        private final Double radius;\n        private final Double latitude;\n        private final Double longitude;\n        Double getLatitude() {\n            return latitude;\n        }\n        Double getLongitude() {\n            return longitude;\n        }\n        Double getRadius() {\n            return this.radius;\n        }\n        private Point(Double latitude, Double longitude) {\n            this.radius = Sphere.this.radius;\n            this.latitude = latitude;\n            this.longitude = longitude;\n        }\n    }\n}\n</code></pre>\n<p>Main class:</p>\n<pre><code>package org.example;\n\npublic class Main {\n    public static void main(String[] args) {\n        Sphere sphere = new Sphere(1.0);\n        System.out.println(&quot;Sphere radius = &quot; + sphere.getRadius());\n        Sphere.Point point = sphere.addPoint(10.0,10.0);\n        System.out.println(&quot;Point radius = &quot; + point.getRadius());\n        System.out.println(&quot;Point latitude = &quot; + point.getLatitude());\n        System.out.println(&quot;Point longitude = &quot; + point.getLongitude());\n//        Sphere.Point point = new Sphere.Point(10.0,10.0); does not work\n//        can not create new Point object because its constructor is private,\n//        this is desired behaviour!\n        Sphere.Point point1 = sphere.getLastPoint();\n        System.out.println(&quot;Point1 radius = &quot; + point1.getRadius());\n        System.out.println(&quot;Point1 latitude = &quot; + point1.getLatitude());\n        System.out.println(&quot;Point1 longitude = &quot; + point1.getLongitude());\n    }\n}\n</code></pre>\n<p>Output:</p>\n<pre><code>Sphere radius = 1.0\nPoint radius = 1.0\nPoint latitude = 10.0\nPoint longitude = 10.0\nPoint1 radius = 1.0\nPoint1 latitude = 10.0\nPoint1 longitude = 10.0\n</code></pre>\n"},{"tags":["java","xml","android-studio","kotlin","preview"],"owner":{"account_id":28272095,"reputation":11,"user_id":21615113,"display_name":"Ahamed Lincon"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":118,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1681195624,"creation_date":1681195624,"question_id":75983089,"body_markdown":"\r\n```\r\n&lt;androidx.constraintlayout.widget.ConstraintLayout\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;60dp&quot;\r\n        android:orientation=&quot;vertical&quot;&gt;\r\n\r\n        &lt;TextView\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_gravity=&quot;center&quot;\r\n            android:fontFamily=&quot;@font/quicksand_bold&quot;\r\n            android:gravity=&quot;center&quot;\r\n            android:text=&quot;@string/settings&quot;\r\n            android:textColor=&quot;@color/colorWhite&quot;\r\n            android:textSize=&quot;28sp&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;parent&quot;&gt;&lt;/TextView&gt;\r\n\r\n        &lt;View\r\n            android:id=&quot;@+id/view&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;0.1dp&quot;\r\n            android:layout_marginStart=&quot;24dp&quot;\r\n            android:layout_marginEnd=&quot;24dp&quot;\r\n            android:background=&quot;@color/colorSecondary&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;&gt;&lt;/View&gt;\r\n\r\n    &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n```\r\n\r\nThis problem has started from Android Studio Dolphin and I&#39;m still facing this with Electric Eel. \r\n\r\nFor me, I&#39;m facing this problem when I&#39;m using custom fonts on my project. If i remove fontFamily attribute from my xml file, preview renders again... \r\n\r\nIf I remove font family, preview works..\r\n\r\n```\r\nandroid:fontFamily=&quot;@font/quicksand_bold&quot;\r\n```","title":"Android Studio Electric Eel, preview render problem when using custom font","body":"<pre><code>&lt;androidx.constraintlayout.widget.ConstraintLayout\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;60dp&quot;\n        android:orientation=&quot;vertical&quot;&gt;\n\n        &lt;TextView\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_gravity=&quot;center&quot;\n            android:fontFamily=&quot;@font/quicksand_bold&quot;\n            android:gravity=&quot;center&quot;\n            android:text=&quot;@string/settings&quot;\n            android:textColor=&quot;@color/colorWhite&quot;\n            android:textSize=&quot;28sp&quot;\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\n            app:layout_constraintTop_toTopOf=&quot;parent&quot;&gt;&lt;/TextView&gt;\n\n        &lt;View\n            android:id=&quot;@+id/view&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;0.1dp&quot;\n            android:layout_marginStart=&quot;24dp&quot;\n            android:layout_marginEnd=&quot;24dp&quot;\n            android:background=&quot;@color/colorSecondary&quot;\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;&gt;&lt;/View&gt;\n\n    &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n<p>This problem has started from Android Studio Dolphin and I'm still facing this with Electric Eel.</p>\n<p>For me, I'm facing this problem when I'm using custom fonts on my project. If i remove fontFamily attribute from my xml file, preview renders again...</p>\n<p>If I remove font family, preview works..</p>\n<pre><code>android:fontFamily=&quot;@font/quicksand_bold&quot;\n</code></pre>\n"},{"tags":["java","macos","icons","dock"],"comments":[{"owner":{"account_id":304151,"reputation":7913,"user_id":613495,"accept_rate":95,"display_name":"Boro"},"score":1,"creation_date":1305428546,"post_id":6006173,"comment_id":6939514,"body_markdown":"I am a Win person. But from what I see Dock on Mac is equivalent of Taskbar on Win. So it makes me wonder that maybe simply calling `setIconImage(new ImageIcon(&quot;path/to/icon&quot;).getImage());` for your JFrame could sort your problem out?","body":"I am a Win person. But from what I see Dock on Mac is equivalent of Taskbar on Win. So it makes me wonder that maybe simply calling <code>setIconImage(new ImageIcon(&quot;path&#47;to&#47;icon&quot;).getImage());</code> for your JFrame could sort your problem out?"}],"answers":[{"comments":[{"owner":{"account_id":392723,"reputation":2610,"user_id":754161,"accept_rate":67,"display_name":"Martin Tuskevicius"},"score":0,"creation_date":1305428139,"post_id":6006190,"comment_id":6939487,"body_markdown":"I&#39;ve seen that code being used many times. What if I want the program to work on multiple platforms ... wouldn&#39;t that cause problems if I were to run the file on Windows or Linux?","body":"I&#39;ve seen that code being used many times. What if I want the program to work on multiple platforms ... wouldn&#39;t that cause problems if I were to run the file on Windows or Linux?"},{"owner":{"account_id":275502,"reputation":16152,"user_id":568406,"display_name":"Zach L"},"score":4,"creation_date":1305428333,"post_id":6006190,"comment_id":6939497,"body_markdown":"@Martin Tuskevicius Yes, this will only work for Mac, so you would want to have separate scripts/distributions for operating systems (like for Mac, you&#39;d have that command line bundled in an applescript). It&#39;s hard to cater to each operating system&#39;s needs while remaining platform-agnostic.","body":"@Martin Tuskevicius Yes, this will only work for Mac, so you would want to have separate scripts/distributions for operating systems (like for Mac, you&#39;d have that command line bundled in an applescript). It&#39;s hard to cater to each operating system&#39;s needs while remaining platform-agnostic."},{"owner":{"account_id":392723,"reputation":2610,"user_id":754161,"accept_rate":67,"display_name":"Martin Tuskevicius"},"score":0,"creation_date":1305429154,"post_id":6006190,"comment_id":6939555,"body_markdown":"Have you personally tried to do the Apple library approach? I&#39;ve downloaded it at one point, and I did Application.setDockIcon(Image) but then the Dock Icon was just a blank area.","body":"Have you personally tried to do the Apple library approach? I&#39;ve downloaded it at one point, and I did Application.setDockIcon(Image) but then the Dock Icon was just a blank area."},{"owner":{"account_id":275502,"reputation":16152,"user_id":568406,"display_name":"Zach L"},"score":0,"creation_date":1305429463,"post_id":6006190,"comment_id":6939576,"body_markdown":"I have not tried, admittedly. When I had some apps in Java for Mac, I noticed that JFrame.setIconImage did not set the Dock Icon. I bundled the above command line option, along with -Xdock:name, in an AppleScript, and life was pretty easy afterwards. But there are certainly utilities that can simplify the bundling process out there.","body":"I have not tried, admittedly. When I had some apps in Java for Mac, I noticed that JFrame.setIconImage did not set the Dock Icon. I bundled the above command line option, along with -Xdock:name, in an AppleScript, and life was pretty easy afterwards. But there are certainly utilities that can simplify the bundling process out there."},{"owner":{"account_id":392723,"reputation":2610,"user_id":754161,"accept_rate":67,"display_name":"Martin Tuskevicius"},"score":0,"creation_date":1305429898,"post_id":6006190,"comment_id":6939617,"body_markdown":"Any specific ones that you would recommend?","body":"Any specific ones that you would recommend?"},{"owner":{"account_id":275502,"reputation":16152,"user_id":568406,"display_name":"Zach L"},"score":0,"creation_date":1305430470,"post_id":6006190,"comment_id":6939666,"body_markdown":"@Martin Tuskevicius There are lots of tools [here](http://developer.apple.com/library/mac/#documentation/Java/Conceptual/Java14Development/02-JavaDevTools/JavaDevTools.html), most notably the JarBundler (I have not used it personally, so I can&#39;t give a whole-hearted recommendation, but it looks promising). Also, IDEs like Eclipse and Netbeans usually have either in-built or plugin-support for Mac distributions (I know [JMonkeyEngine&#39;s SDK](http://jmonkeyengine.com/sdk/), a variant of Netbeans, supports distributing to Mac).","body":"@Martin Tuskevicius There are lots of tools <a href=\"http://developer.apple.com/library/mac/#documentation/Java/Conceptual/Java14Development/02-JavaDevTools/JavaDevTools.html\" rel=\"nofollow noreferrer\">here</a>, most notably the JarBundler (I have not used it personally, so I can&#39;t give a whole-hearted recommendation, but it looks promising). Also, IDEs like Eclipse and Netbeans usually have either in-built or plugin-support for Mac distributions (I know <a href=\"http://jmonkeyengine.com/sdk/\" rel=\"nofollow noreferrer\">JMonkeyEngine&#39;s SDK</a>, a variant of Netbeans, supports distributing to Mac)."},{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":1,"creation_date":1305441459,"post_id":6006190,"comment_id":6940470,"body_markdown":"Here&#39;s an [example](http://robotchase.sourceforge.net/) that uses a JWS distributed JAR for for most platforms and adds an application bundle (`.dmg`) for Mac.","body":"Here&#39;s an <a href=\"http://robotchase.sourceforge.net/\" rel=\"nofollow noreferrer\">example</a> that uses a JWS distributed JAR for for most platforms and adds an application bundle (<code>.dmg</code>) for Mac."},{"owner":{"account_id":137113,"reputation":11637,"user_id":341091,"accept_rate":75,"display_name":"Martin"},"score":2,"creation_date":1353435860,"post_id":6006190,"comment_id":18442049,"body_markdown":"Mind you, for OS/X you should use an **.icns** as dock icon.","body":"Mind you, for OS/X you should use an <b>.icns</b> as dock icon."},{"owner":{"account_id":6450014,"reputation":11895,"user_id":4997239,"accept_rate":61,"display_name":"Hasen"},"score":0,"creation_date":1650463375,"post_id":6006190,"comment_id":127122660,"body_markdown":"Surely you code is incorrect, it should be `&gt;java -Xdock:icon=/path/myIcon.png -jar myApp.jar`","body":"Surely you code is incorrect, it should be <code>&gt;java -Xdock:icon=&#47;path&#47;myIcon.png -jar myApp.jar</code>"}],"tags":[],"owner":{"account_id":275502,"reputation":16152,"user_id":568406,"display_name":"Zach L"},"comment_count":9,"down_vote_count":1,"up_vote_count":33,"is_accepted":false,"score":32,"last_activity_date":1305430497,"creation_date":1305427885,"answer_id":6006190,"question_id":6006173,"body_markdown":"While I&#39;m not sure how to change it at runtime, you can set at the command line your Dock icon using the `-Xdock:icon` option, like:\r\n\r\n     &gt;java -Xdock:icon=/path/myIcon.png myApp\r\n[This article][1] has lots of useful little info about bringing java apps to Mac, and you may be interested looking at the utilities and tools for Mac listed [here][2], as well as deployment options listed [here][3] (the last link is especially useful if you want to go down the Java Webstart route).\r\n\r\n\r\n  [1]: http://java.sun.com/developer/technicalArticles/JavaLP/JavaToMac/\r\n  [2]: http://developer.apple.com/library/mac/#documentation/Java/Conceptual/Java14Development/02-JavaDevTools/JavaDevTools.html\r\n  [3]: http://developer.apple.com/library/mac/#documentation/Java/Conceptual/Java14Development/03-JavaDeployment/JavaDeployment.html#//apple_ref/doc/uid/TP40001885-SW1","title":"How do you change the Dock Icon of a Java program?","body":"<p>While I'm not sure how to change it at runtime, you can set at the command line your Dock icon using the <code>-Xdock:icon</code> option, like:</p>\n\n<pre><code> &gt;java -Xdock:icon=/path/myIcon.png myApp\n</code></pre>\n\n<p><a href=\"http://java.sun.com/developer/technicalArticles/JavaLP/JavaToMac/\">This article</a> has lots of useful little info about bringing java apps to Mac, and you may be interested looking at the utilities and tools for Mac listed <a href=\"http://developer.apple.com/library/mac/#documentation/Java/Conceptual/Java14Development/02-JavaDevTools/JavaDevTools.html\">here</a>, as well as deployment options listed <a href=\"http://developer.apple.com/library/mac/#documentation/Java/Conceptual/Java14Development/03-JavaDeployment/JavaDeployment.html#//apple_ref/doc/uid/TP40001885-SW1\">here</a> (the last link is especially useful if you want to go down the Java Webstart route).</p>\n"},{"comments":[{"owner":{"account_id":392723,"reputation":2610,"user_id":754161,"accept_rate":67,"display_name":"Martin Tuskevicius"},"score":2,"creation_date":1325920290,"post_id":8703588,"comment_id":10929066,"body_markdown":"Yeah, but the class is deprecated.","body":"Yeah, but the class is deprecated."},{"owner":{"account_id":304830,"reputation":2487,"user_id":614575,"display_name":"Bertil Chapuis"},"score":0,"creation_date":1326059753,"post_id":8703588,"comment_id":10950867,"body_markdown":"I think only the public constructor and some methods have been deprecated, not the whole class.","body":"I think only the public constructor and some methods have been deprecated, not the whole class."},{"owner":{"account_id":137113,"reputation":11637,"user_id":341091,"accept_rate":75,"display_name":"Martin"},"score":0,"creation_date":1353436106,"post_id":8703588,"comment_id":18442171,"body_markdown":"I&#39;ll be surprised if this works with an **.icns** as well! So I think the `-Xdock:icon` is the better solution.","body":"I&#39;ll be surprised if this works with an <b>.icns</b> as well! So I think the <code>-Xdock:icon</code> is the better solution."},{"owner":{"account_id":1228425,"reputation":158,"user_id":1193518,"accept_rate":88,"display_name":"ChrisK"},"score":0,"creation_date":1416676053,"post_id":8703588,"comment_id":42669882,"body_markdown":"Is there any specific place in the code base where this snippet should go? When you set the menubar to native OSX, it has to happen before any UI code (e.g. in a launcher wrapper). Is this similar here?","body":"Is there any specific place in the code base where this snippet should go? When you set the menubar to native OSX, it has to happen before any UI code (e.g. in a launcher wrapper). Is this similar here?"},{"owner":{"account_id":3799770,"reputation":235,"user_id":3153736,"display_name":"Micah Stairs"},"score":0,"creation_date":1439388405,"post_id":8703588,"comment_id":51842198,"body_markdown":"@Martin According to the API, for the Toolkit.getImage() method, the image can be either GIF, JPEG or PNG. So no, it doesn&#39;t sound like it would work for .icns.","body":"@Martin According to the API, for the Toolkit.getImage() method, the image can be either GIF, JPEG or PNG. So no, it doesn&#39;t sound like it would work for .icns."},{"owner":{"account_id":252630,"reputation":2903,"user_id":2457251,"display_name":"Almir Campos"},"score":0,"creation_date":1459440898,"post_id":8703588,"comment_id":60299152,"body_markdown":"It&#39;s possible that you need to add the AppleJavaExtensions-&lt;version&gt;.jar to your classpath. In my case, I just added the Maven dependency as follows: \n        &lt;dependency&gt;\n            &lt;groupId&gt;com.apple&lt;/groupId&gt;\n            &lt;artifactId&gt;AppleJavaExtensions&lt;/artifactId&gt;\n            &lt;version&gt;1.4&lt;/version&gt;\n        &lt;/dependency&gt;","body":"It&#39;s possible that you need to add the AppleJavaExtensions-&lt;version&gt;.jar to your classpath. In my case, I just added the Maven dependency as follows:          &lt;dependency&gt;             &lt;groupId&gt;com.apple&lt;/groupId&gt;             &lt;artifactId&gt;AppleJavaExtensions&lt;/artifactId&gt;             &lt;version&gt;1.4&lt;/version&gt;         &lt;/dependency&gt;"},{"owner":{"account_id":6863567,"reputation":978,"user_id":5276779,"display_name":"flohall"},"score":3,"creation_date":1562518432,"post_id":8703588,"comment_id":100390422,"body_markdown":"This is not valid for JDK 9+ anymore. See my answer: [Solution for JDK9+](https://stackoverflow.com/a/56924202/5276779)","body":"This is not valid for JDK 9+ anymore. See my answer: <a href=\"https://stackoverflow.com/a/56924202/5276779\">Solution for JDK9+</a>"}],"tags":[],"owner":{"account_id":304830,"reputation":2487,"user_id":614575,"display_name":"Bertil Chapuis"},"comment_count":7,"down_vote_count":1,"up_vote_count":20,"is_accepted":true,"score":19,"last_activity_date":1325525276,"creation_date":1325525276,"answer_id":8703588,"question_id":6006173,"body_markdown":"Apple eAWT provides the [Application][1] class that allows to change the dock icon of an application.\r\n\r\n    import com.apple.eawt.Application;\r\n    ...\r\n    Application application = Application.getApplication();\r\n    Image image = Toolkit.getDefaultToolkit().getImage(&quot;icon.png&quot;);\r\n    application.setDockIconImage(image);\r\n\r\n\r\n  [1]: http://developer.apple.com/library/mac/documentation/Java/Reference/JavaSE6_AppleExtensionsRef/api/com/apple/eawt/Application.html","title":"How do you change the Dock Icon of a Java program?","body":"<p>Apple eAWT provides the <a href=\"http://developer.apple.com/library/mac/documentation/Java/Reference/JavaSE6_AppleExtensionsRef/api/com/apple/eawt/Application.html\" rel=\"noreferrer\">Application</a> class that allows to change the dock icon of an application.</p>\n\n<pre><code>import com.apple.eawt.Application;\n...\nApplication application = Application.getApplication();\nImage image = Toolkit.getDefaultToolkit().getImage(\"icon.png\");\napplication.setDockIconImage(image);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1222313,"reputation":1532,"user_id":1188712,"accept_rate":60,"display_name":"Igor"},"score":0,"creation_date":1371490918,"post_id":9815491,"comment_id":24830474,"body_markdown":"@hcix Is this option available only on the Mac OS X version of Eclipse? I installed Eclipse for Windows and there&#39;s no Mac OS X Application bundle option.","body":"@hcix Is this option available only on the Mac OS X version of Eclipse? I installed Eclipse for Windows and there&#39;s no Mac OS X Application bundle option."},{"owner":{"account_id":523775,"reputation":126,"user_id":1079285,"display_name":"hcix"},"score":0,"creation_date":1375027170,"post_id":9815491,"comment_id":26163048,"body_markdown":"@Igor According to one of the answers to [this question](http://stackoverflow.com/questions/2799646/deploy-java-application-on-macosx-from-a-windows-system) installing the Eclipse Delta pack will allow you to export your application to any target platform.","body":"@Igor According to one of the answers to <a href=\"http://stackoverflow.com/questions/2799646/deploy-java-application-on-macosx-from-a-windows-system\">this question</a> installing the Eclipse Delta pack will allow you to export your application to any target platform."},{"owner":{"account_id":1222313,"reputation":1532,"user_id":1188712,"accept_rate":60,"display_name":"Igor"},"score":0,"creation_date":1377512772,"post_id":9815491,"comment_id":27097520,"body_markdown":"@hcix have you used delta pack before? Can it create a .app file for Mac and a .exe setup file for windows?","body":"@hcix have you used delta pack before? Can it create a .app file for Mac and a .exe setup file for windows?"}],"tags":[],"owner":{"account_id":523775,"reputation":126,"user_id":1079285,"display_name":"hcix"},"comment_count":3,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1332382015,"creation_date":1332382015,"answer_id":9815491,"question_id":6006173,"body_markdown":"If your using Eclipse, you can export a project as a Mac OS X Application Bundle and specify an .icns file to use as an icon. &lt;br&gt;\r\nIn Eclipse, go to File&gt;Export and choose the &#39;Mac OS X Application Bundle&#39; option inside the &#39;Other&#39; directory. \r\n\r\nClick the next button.&lt;br&gt;\r\nThen you&#39;ll be presented with the &#39;Application Bundle Export Menu&#39;. &lt;br&gt;\r\nThe last option on this menu is &#39;Icon&#39;. This is where you specify the .icns file to use as the dock icon.\r\n\r\n[Picture of the 2 Eclipse Export Menus](http://s7.postimage.org/nrcngo3bv/khb.png)\r\n\r\nAs far as creating the .icns file is concerned, you can use Apple&#39;s Icon Composer to create a .icns file from an image file. [Here is a good tutorial on making mac icons.](http://www.macinstruct.com/node/59)","title":"How do you change the Dock Icon of a Java program?","body":"<p>If your using Eclipse, you can export a project as a Mac OS X Application Bundle and specify an .icns file to use as an icon. <br>\nIn Eclipse, go to File>Export and choose the 'Mac OS X Application Bundle' option inside the 'Other' directory. </p>\n\n<p>Click the next button.<br>\nThen you'll be presented with the 'Application Bundle Export Menu'. <br>\nThe last option on this menu is 'Icon'. This is where you specify the .icns file to use as the dock icon.</p>\n\n<p><a href=\"http://s7.postimage.org/nrcngo3bv/khb.png\">Picture of the 2 Eclipse Export Menus</a></p>\n\n<p>As far as creating the .icns file is concerned, you can use Apple's Icon Composer to create a .icns file from an image file. <a href=\"http://www.macinstruct.com/node/59\">Here is a good tutorial on making mac icons.</a></p>\n"},{"comments":[{"owner":{"account_id":411693,"reputation":22739,"user_id":784318,"accept_rate":83,"display_name":"Besi"},"score":1,"creation_date":1484058128,"post_id":15663741,"comment_id":70346567,"body_markdown":"This project is no longer there","body":"This project is no longer there"}],"tags":[],"owner":{"account_id":2552086,"reputation":1070,"user_id":2215652,"accept_rate":60,"display_name":"VitorMM"},"comment_count":1,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1364400816,"creation_date":1364400816,"answer_id":15663741,"question_id":6006173,"body_markdown":"If you have XCode installed, you can use JarBundler to create a Mac App using a Jar file. If you don&#39;t have XCode, you can use this JarBundler:\r\n\r\n[http://sourceforge.net/projects/jarbundler/][1]\r\n\r\nDuring the creation of the bundler, you can choose an icon in the .icns extension. That will be your Dock Icon.\r\n\r\n  [1]: http://sourceforge.net/projects/jarbundler/","title":"How do you change the Dock Icon of a Java program?","body":"<p>If you have XCode installed, you can use JarBundler to create a Mac App using a Jar file. If you don't have XCode, you can use this JarBundler:</p>\n\n<p><a href=\"http://sourceforge.net/projects/jarbundler/\" rel=\"nofollow\">http://sourceforge.net/projects/jarbundler/</a></p>\n\n<p>During the creation of the bundler, you can choose an icon in the .icns extension. That will be your Dock Icon.</p>\n"},{"comments":[{"owner":{"account_id":5924590,"reputation":8476,"user_id":4660897,"accept_rate":89,"display_name":"Tot Zam"},"score":0,"creation_date":1494215096,"post_id":22335897,"comment_id":74714883,"body_markdown":"What about if the application can run on Mac and Windows? How do you make it compatible for both?","body":"What about if the application can run on Mac and Windows? How do you make it compatible for both?"},{"owner":{"account_id":3452321,"reputation":9290,"user_id":2891689,"accept_rate":100,"display_name":"Amir Hassan Azimi"},"score":1,"creation_date":1494261746,"post_id":22335897,"comment_id":74741586,"body_markdown":"then you need condition to check for OS.","body":"then you need condition to check for OS."},{"owner":{"account_id":5924590,"reputation":8476,"user_id":4660897,"accept_rate":89,"display_name":"Tot Zam"},"score":4,"creation_date":1494264926,"post_id":22335897,"comment_id":74743413,"body_markdown":"The problem is that you can&#39;t import `com.apple.eawt.Application;` on a Windows computer since it is Mac specific. I ended up using a solution based on [this answer](http://stackoverflow.com/a/13400962/4660897), yet that solution seems to be a very messy workaround.","body":"The problem is that you can&#39;t import <code>com.apple.eawt.Application;</code> on a Windows computer since it is Mac specific. I ended up using a solution based on <a href=\"http://stackoverflow.com/a/13400962/4660897\">this answer</a>, yet that solution seems to be a very messy workaround."},{"owner":{"account_id":3452321,"reputation":9290,"user_id":2891689,"accept_rate":100,"display_name":"Amir Hassan Azimi"},"score":0,"creation_date":1494334634,"post_id":22335897,"comment_id":74776036,"body_markdown":"@TotZam I&#39;m with you. I faced this problem too. Let me see if I can come up with something else.","body":"@TotZam I&#39;m with you. I faced this problem too. Let me see if I can come up with something else."},{"owner":{"account_id":5924590,"reputation":8476,"user_id":4660897,"accept_rate":89,"display_name":"Tot Zam"},"score":1,"creation_date":1494343268,"post_id":22335897,"comment_id":74782660,"body_markdown":"That would be great! In the meantime, I&#39;ve added an answer [here](http://stackoverflow.com/a/43873734/4660897), explaining the method I currently used to get code to work on both Mac and Windows.","body":"That would be great! In the meantime, I&#39;ve added an answer <a href=\"http://stackoverflow.com/a/43873734/4660897\">here</a>, explaining the method I currently used to get code to work on both Mac and Windows."},{"owner":{"account_id":6528466,"reputation":535,"user_id":5050433,"accept_rate":35,"display_name":"Jack Berstrem"},"score":1,"creation_date":1495585661,"post_id":22335897,"comment_id":75311611,"body_markdown":"How do you do this on macOS 10.12 and Java 1.8 ? The com.apple.eawt.Application no longer exists :/","body":"How do you do this on macOS 10.12 and Java 1.8 ? The com.apple.eawt.Application no longer exists :/"}],"tags":[],"owner":{"account_id":3452321,"reputation":9290,"user_id":2891689,"accept_rate":100,"display_name":"Amir Hassan Azimi"},"comment_count":6,"down_vote_count":2,"up_vote_count":7,"is_accepted":false,"score":5,"last_activity_date":1453843687,"creation_date":1394569581,"answer_id":22335897,"question_id":6006173,"body_markdown":"For Microsoft Windows\r\n\r\n    setIconImage(new ImageIcon(&quot;Football.png&quot;).getImage());\r\n\r\nFor Mac OS X\r\n\r\n    import com.apple.eawt.Application;\r\n    Application.getApplication().setDockIconImage(new ImageIcon(&quot;Football.png&quot;).getImage());","title":"How do you change the Dock Icon of a Java program?","body":"<p>For Microsoft Windows</p>\n\n<pre><code>setIconImage(new ImageIcon(\"Football.png\").getImage());\n</code></pre>\n\n<p>For Mac OS X</p>\n\n<pre><code>import com.apple.eawt.Application;\nApplication.getApplication().setDockIconImage(new ImageIcon(\"Football.png\").getImage());\n</code></pre>\n"},{"comments":[{"owner":{"account_id":6450014,"reputation":11895,"user_id":4997239,"accept_rate":61,"display_name":"Hasen"},"score":1,"creation_date":1650169460,"post_id":56924202,"comment_id":127051375,"body_markdown":"This is for Swing only, how would you do this on JavaFX?","body":"This is for Swing only, how would you do this on JavaFX?"},{"owner":{"display_name":"user14427121"},"score":0,"creation_date":1669207854,"post_id":56924202,"comment_id":131591560,"body_markdown":"@Hasen Refer to Zach L&#39;s Answer","body":"@Hasen Refer to Zach L&#39;s Answer"},{"owner":{"account_id":6450014,"reputation":11895,"user_id":4997239,"accept_rate":61,"display_name":"Hasen"},"score":1,"creation_date":1669299184,"post_id":56924202,"comment_id":131616768,"body_markdown":"@Rishon J That&#39;s a command line workaround which is not practical in all cases, if it can be done in code in Swing then it should be possible in JavaFX. That would be the ideal solution.","body":"@Rishon J That&#39;s a command line workaround which is not practical in all cases, if it can be done in code in Swing then it should be possible in JavaFX. That would be the ideal solution."}],"tags":[],"owner":{"account_id":6863567,"reputation":978,"user_id":5276779,"display_name":"flohall"},"comment_count":3,"down_vote_count":1,"up_vote_count":20,"is_accepted":false,"score":19,"last_activity_date":1562518229,"creation_date":1562518229,"answer_id":56924202,"question_id":6006173,"body_markdown":"# Solution for Java 9 and later\r\n\r\n&gt; In JDK 9, internal APIs such as those in the Mac OS X com.apple.eawt package will no longer be accessible.\r\n\r\nsee: http://openjdk.java.net/jeps/272\r\n```\r\npackage main;\r\n\r\nimport javax.swing.JFrame;\r\nimport javax.swing.JLabel;\r\nimport java.awt.Image;\r\nimport java.awt.Taskbar;\r\nimport java.awt.Toolkit;\r\nimport java.net.URL;\r\n\r\n/**\r\n * author: flohall\r\n * date: 2019-07-07\r\n */\r\npublic final class Main {\r\n\r\n    public static void main (String[] args){\r\n\r\n        final JFrame jFrame = new JFrame();\r\n        \r\n        //loading an image from a file\r\n        final Toolkit defaultToolkit = Toolkit.getDefaultToolkit();\r\n        final URL imageResource = Main.class.getClassLoader().getResource(&quot;resources/images/icon.gif&quot;);\r\n        final Image image = defaultToolkit.getImage(imageResource);\r\n        \r\n        //this is new since JDK 9\r\n        final Taskbar taskbar = Taskbar.getTaskbar();\r\n\r\n        try {\r\n            //set icon for mac os (and other systems which do support this method)\r\n            taskbar.setIconImage(image);\r\n        } catch (final UnsupportedOperationException e) {\r\n            System.out.println(&quot;The os does not support: &#39;taskbar.setIconImage&#39;&quot;);\r\n        } catch (final SecurityException e) {\r\n            System.out.println(&quot;There was a security exception for: &#39;taskbar.setIconImage&#39;&quot;);\r\n        }\r\n\r\n        //set icon for windows os (and other systems which do support this method)\r\n        jFrame.setIconImage(image);\r\n\r\n        //adding something to the window so it does show up\r\n        jFrame.getContentPane().add(new JLabel(&quot;Hello World&quot;));\r\n\r\n        //some default JFrame things\r\n        jFrame.setDefaultCloseOperation(jFrame.EXIT_ON_CLOSE);\r\n        jFrame.pack();\r\n        jFrame.setVisible(true);\r\n    }\r\n}\r\n```\r\nThis code can be used as is. Just change the path of the image.  \r\nThis new implemented way (in JDK 9+) of setting the icon for mac os dock is better then before because you won&#39;t run into any problem when building your application. Also there is no problem to use this code on a windows computer. Reflection which is not recommended since Java 9 is not needed either.","title":"How do you change the Dock Icon of a Java program?","body":"<h1>Solution for Java 9 and later</h1>\n\n<blockquote>\n  <p>In JDK 9, internal APIs such as those in the Mac OS X com.apple.eawt package will no longer be accessible.</p>\n</blockquote>\n\n<p>see: <a href=\"http://openjdk.java.net/jeps/272\" rel=\"noreferrer\">http://openjdk.java.net/jeps/272</a></p>\n\n<pre><code>package main;\n\nimport javax.swing.JFrame;\nimport javax.swing.JLabel;\nimport java.awt.Image;\nimport java.awt.Taskbar;\nimport java.awt.Toolkit;\nimport java.net.URL;\n\n/**\n * author: flohall\n * date: 2019-07-07\n */\npublic final class Main {\n\n    public static void main (String[] args){\n\n        final JFrame jFrame = new JFrame();\n\n        //loading an image from a file\n        final Toolkit defaultToolkit = Toolkit.getDefaultToolkit();\n        final URL imageResource = Main.class.getClassLoader().getResource(\"resources/images/icon.gif\");\n        final Image image = defaultToolkit.getImage(imageResource);\n\n        //this is new since JDK 9\n        final Taskbar taskbar = Taskbar.getTaskbar();\n\n        try {\n            //set icon for mac os (and other systems which do support this method)\n            taskbar.setIconImage(image);\n        } catch (final UnsupportedOperationException e) {\n            System.out.println(\"The os does not support: 'taskbar.setIconImage'\");\n        } catch (final SecurityException e) {\n            System.out.println(\"There was a security exception for: 'taskbar.setIconImage'\");\n        }\n\n        //set icon for windows os (and other systems which do support this method)\n        jFrame.setIconImage(image);\n\n        //adding something to the window so it does show up\n        jFrame.getContentPane().add(new JLabel(\"Hello World\"));\n\n        //some default JFrame things\n        jFrame.setDefaultCloseOperation(jFrame.EXIT_ON_CLOSE);\n        jFrame.pack();\n        jFrame.setVisible(true);\n    }\n}\n</code></pre>\n\n<p>This code can be used as is. Just change the path of the image.<br>\nThis new implemented way (in JDK 9+) of setting the icon for mac os dock is better then before because you won't run into any problem when building your application. Also there is no problem to use this code on a windows computer. Reflection which is not recommended since Java 9 is not needed either.</p>\n"},{"tags":[],"owner":{"account_id":25691313,"reputation":21,"user_id":19452696,"display_name":"Joris Van Duyse"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680739912,"creation_date":1680739912,"answer_id":75944861,"question_id":6006173,"body_markdown":"Fix for java 17 : with javafx\r\n\r\n```java\r\nfinal Toolkit defaultToolkit = Toolkit.getDefaultToolkit();\r\njava.awt.Image image = defaultToolkit.getImage(getClass().getResource(&quot;/resources/images/YOURICON.png&quot;));\r\nfinal Taskbar taskbar = Taskbar.getTaskbar();\r\n\r\ntaskbar.setIconImage(image);\r\n```","title":"How do you change the Dock Icon of a Java program?","body":"<p>Fix for java 17 : with javafx</p>\n<pre class=\"lang-java prettyprint-override\"><code>final Toolkit defaultToolkit = Toolkit.getDefaultToolkit();\njava.awt.Image image = defaultToolkit.getImage(getClass().getResource(&quot;/resources/images/YOURICON.png&quot;));\nfinal Taskbar taskbar = Taskbar.getTaskbar();\n\ntaskbar.setIconImage(image);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4420298,"reputation":9,"user_id":3600513,"display_name":"s6ch13"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681195245,"creation_date":1681195245,"answer_id":75983047,"question_id":6006173,"body_markdown":"If you use jpackage to package your java application into a .app file for mac, you can use the --icon option to specify the mac icon.  This will display the icon on the dock after launch and also for the .app file.\r\n\r\nJAVA_HOME/bin/jpackage --type &quot;app-image&quot; \\\r\n\t --verbose \\\r\n\t --input files \\\r\n\t --dest output \\\r\n\t --name &quot;$APPNAME&quot; \\\r\n\t --main-jar &quot;$JARNAME&quot; \\\r\n\t --runtime-image $JRE \\\r\n\t --icon files/Resources/Images/AppIcon_512.icns \\\r\n\t --app-version $VER \\\r\n\t --mac-package-name &quot;$PKGNAME&quot;","title":"How do you change the Dock Icon of a Java program?","body":"<p>If you use jpackage to package your java application into a .app file for mac, you can use the --icon option to specify the mac icon.  This will display the icon on the dock after launch and also for the .app file.</p>\n<p>JAVA_HOME/bin/jpackage --type &quot;app-image&quot; <br />\n--verbose <br />\n--input files <br />\n--dest output <br />\n--name &quot;$APPNAME&quot; <br />\n--main-jar &quot;$JARNAME&quot; <br />\n--runtime-image $JRE <br />\n--icon files/Resources/Images/AppIcon_512.icns <br />\n--app-version $VER <br />\n--mac-package-name &quot;$PKGNAME&quot;</p>\n"}],"owner":{"account_id":392723,"reputation":2610,"user_id":754161,"accept_rate":67,"display_name":"Martin Tuskevicius"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":33160,"favorite_count":0,"down_vote_count":0,"up_vote_count":32,"accepted_answer_id":8703588,"answer_count":8,"score":32,"last_activity_date":1681195245,"creation_date":1305427520,"question_id":6006173,"body_markdown":"How can I change the Dock Icon of a program, in Java, on the Macintosh platform? I have heard about using Apple&#39;s Java library (that provides some sort of extra support on the Mac platform), but I have yet to find some actual examples. ","title":"How do you change the Dock Icon of a Java program?","body":"<p>How can I change the Dock Icon of a program, in Java, on the Macintosh platform? I have heard about using Apple's Java library (that provides some sort of extra support on the Mac platform), but I have yet to find some actual examples. </p>\n"},{"tags":["java","android","base64","encoder","decoder"],"answers":[{"comments":[{"owner":{"account_id":185012,"reputation":3371,"user_id":421467,"accept_rate":100,"display_name":"Dr.jacky"},"score":0,"creation_date":1406895001,"post_id":4322202,"comment_id":39020452,"body_markdown":"encoded Base64 of Mw== is TXc9PQ==\nBut this source code show TXc9PQo=\n\nWhat&#39;s wrong?! :-o","body":"encoded Base64 of Mw== is TXc9PQ== But this source code show TXc9PQo=  What&#39;s wrong?! :-o"},{"owner":{"account_id":165387,"reputation":73621,"user_id":388787,"display_name":"Dan D."},"score":2,"creation_date":1406947177,"post_id":4322202,"comment_id":39042034,"body_markdown":"@Mr.Hyde You have a trailing new line. TXc9PQo= decodes to `Mw==\\n`.","body":"@Mr.Hyde You have a trailing new line. TXc9PQo= decodes to <code>Mw==\\n</code>."},{"owner":{"account_id":185012,"reputation":3371,"user_id":421467,"accept_rate":100,"display_name":"Dr.jacky"},"score":3,"creation_date":1406968211,"post_id":4322202,"comment_id":39045695,"body_markdown":"Yea, and to solve it, we should use Base64.NO_WRAP for flag in encodeToString function, instead of Base64.DEFAULT.","body":"Yea, and to solve it, we should use Base64.NO_WRAP for flag in encodeToString function, instead of Base64.DEFAULT."},{"owner":{"account_id":4129800,"reputation":119,"user_id":3388029,"display_name":"Prasad"},"score":0,"creation_date":1410589645,"post_id":4322202,"comment_id":40392954,"body_markdown":"hi have Base64.class but its having an error &quot;$assertionsDisabled cannot be resolved to a variable&quot;","body":"hi have Base64.class but its having an error &quot;$assertionsDisabled cannot be resolved to a variable&quot;"}],"tags":[],"owner":{"account_id":165387,"reputation":73621,"user_id":388787,"display_name":"Dan D."},"comment_count":4,"down_vote_count":0,"up_vote_count":33,"is_accepted":true,"score":33,"last_activity_date":1368624600,"creation_date":1291189364,"answer_id":4322202,"question_id":4322182,"body_markdown":"See [`android.util.Base64`](http://developer.android.com/reference/android/util/Base64.html)\r\n\r\nIt seems that this was added in API version 8 or android 2.2 so it will not be available on the older platforms.\r\n\r\nBut the source of it is at [`android/util/Base64.java`](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/util/Base64.java) so if needed one could just copy it unchanged for older versions.","title":"Base64 encoder and decoder","body":"<p>See <a href=\"http://developer.android.com/reference/android/util/Base64.html\" rel=\"noreferrer\"><code>android.util.Base64</code></a></p>\n\n<p>It seems that this was added in API version 8 or android 2.2 so it will not be available on the older platforms.</p>\n\n<p>But the source of it is at <a href=\"https://github.com/android/platform_frameworks_base/blob/master/core/java/android/util/Base64.java\" rel=\"noreferrer\"><code>android/util/Base64.java</code></a> so if needed one could just copy it unchanged for older versions.</p>\n"},{"comments":[{"owner":{"account_id":133004,"reputation":1288,"user_id":334045,"accept_rate":86,"display_name":"Arvin"},"score":13,"creation_date":1387356496,"post_id":12081228,"comment_id":30919371,"body_markdown":"using `Base64.DEFAULT` will insert a line break in my case. I use `Base64.NO_WRAP` instead.","body":"using <code>Base64.DEFAULT</code> will insert a line break in my case. I use <code>Base64.NO_WRAP</code> instead."},{"owner":{"account_id":3909082,"reputation":1141,"user_id":3234927,"accept_rate":80,"display_name":"Jerry"},"score":0,"creation_date":1530641666,"post_id":12081228,"comment_id":89304846,"body_markdown":"The only one which works for me with 2 bytes characters.","body":"The only one which works for me with 2 bytes characters."}],"tags":[],"owner":{"account_id":1773932,"reputation":11088,"user_id":1618135,"accept_rate":78,"display_name":"blackpanther"},"comment_count":2,"down_vote_count":0,"up_vote_count":77,"is_accepted":false,"score":77,"last_activity_date":1416173289,"creation_date":1345668643,"answer_id":12081228,"question_id":4322182,"body_markdown":"This is an example of how to use the `Base64` class to encode and decode a simple String value.\r\n\r\n    // String to be encoded with Base64\r\n    String text = &quot;Test&quot;;\r\n    // Sending side\r\n    byte[] data = null;\r\n    try {\r\n       \tdata = text.getBytes(&quot;UTF-8&quot;);\r\n\t} catch (UnsupportedEncodingException e1) {\r\n\t    e1.printStackTrace();\r\n\t}\r\n    String base64 = Base64.encodeToString(data, Base64.DEFAULT);\r\n\r\n    // Receiving side\r\n    byte[] data1 = Base64.decode(base64, Base64.DEFAULT);\r\n    String text1 = null;\r\n    try {\r\n\t\ttext1 = new String(data1, &quot;UTF-8&quot;);\r\n\t} catch (UnsupportedEncodingException e) {\r\n\t\te.printStackTrace();\r\n\t}\r\n\r\nThis excerpt can be included in an Android activity.","title":"Base64 encoder and decoder","body":"<p>This is an example of how to use the <code>Base64</code> class to encode and decode a simple String value.</p>\n\n<pre><code>// String to be encoded with Base64\nString text = \"Test\";\n// Sending side\nbyte[] data = null;\ntry {\n    data = text.getBytes(\"UTF-8\");\n} catch (UnsupportedEncodingException e1) {\n    e1.printStackTrace();\n}\nString base64 = Base64.encodeToString(data, Base64.DEFAULT);\n\n// Receiving side\nbyte[] data1 = Base64.decode(base64, Base64.DEFAULT);\nString text1 = null;\ntry {\n    text1 = new String(data1, \"UTF-8\");\n} catch (UnsupportedEncodingException e) {\n    e.printStackTrace();\n}\n</code></pre>\n\n<p>This excerpt can be included in an Android activity.</p>\n"},{"comments":[{"owner":{"account_id":1173646,"reputation":20199,"user_id":1150190,"accept_rate":57,"display_name":"AbdulMomen "},"score":0,"creation_date":1435656456,"post_id":12131639,"comment_id":50279740,"body_markdown":"as @arvin commented above: &quot;using Base64.DEFAULT will insert a line break in my case. I use Base64.NO_WRAP instead.&quot;","body":"as @arvin commented above: &quot;using Base64.DEFAULT will insert a line break in my case. I use Base64.NO_WRAP instead.&quot;"}],"tags":[],"owner":{"account_id":918082,"reputation":54574,"user_id":950427,"accept_rate":91,"display_name":"Jared Burrows"},"comment_count":1,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1557732372,"creation_date":1345997193,"answer_id":12131639,"question_id":4322182,"body_markdown":"Here is a simple method I was going to use until I realized that this is only supported in **Android API 8+**:\r\n\r\n\r\n    // Has line break\r\n    public String getBase64(String input) {\r\n        return Base64.encodeToString(input.getBytes(), Base64.DEFAULT);\r\n    }\r\n\r\n    // No line break\r\n    public String getBase64(String input) {\r\n        return Base64.encodeToString(input.getBytes(), Base64.NO_WRAP);\r\n    }","title":"Base64 encoder and decoder","body":"<p>Here is a simple method I was going to use until I realized that this is only supported in <strong>Android API 8+</strong>:</p>\n\n<pre><code>// Has line break\npublic String getBase64(String input) {\n    return Base64.encodeToString(input.getBytes(), Base64.DEFAULT);\n}\n\n// No line break\npublic String getBase64(String input) {\n    return Base64.encodeToString(input.getBytes(), Base64.NO_WRAP);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1463558,"reputation":17385,"user_id":1377145,"accept_rate":69,"display_name":"Hugo Gresse"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1430983490,"creation_date":1430983490,"answer_id":30094445,"question_id":4322182,"body_markdown":"If you **don&#39;t** want a **line break** at the end of the String, change the flags from `Base64.DEFAULT` to `Base64.NO_WRAP`\r\n\r\n    Base64.encodeToString(&quot;yourString&quot;.getBytes(&quot;UTF-8&quot;), Base64.NO_WRAP);","title":"Base64 encoder and decoder","body":"<p>If you <strong>don't</strong> want a <strong>line break</strong> at the end of the String, change the flags from <code>Base64.DEFAULT</code> to <code>Base64.NO_WRAP</code></p>\n\n<pre><code>Base64.encodeToString(\"yourString\".getBytes(\"UTF-8\"), Base64.NO_WRAP);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5017283,"reputation":23974,"user_id":4031815,"accept_rate":62,"display_name":"CommonSenseCode"},"comment_count":0,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1450909276,"creation_date":1450909276,"answer_id":34444624,"question_id":4322182,"body_markdown":"### To encode:\r\n\r\n    private String encodeString(String s) {\r\n        byte[] data = new byte[0];\r\n    \r\n        try {\r\n            data = s.getBytes(&quot;UTF-8&quot;);\r\n    \r\n        } catch (UnsupportedEncodingException e) {\r\n            e.printStackTrace();\r\n        } finally {\r\n            String base64Encoded = Base64.encodeToString(data, Base64.DEFAULT);\r\n    \r\n            return base64Encoded;\r\n    \r\n        }\r\n    }\r\n\r\n\r\n### To decode:\r\n\r\n    private String decodeString(String encoded) {\r\n        byte[] dataDec = Base64.decode(encoded, Base64.DEFAULT);\r\n        String decodedString = &quot;&quot;;\r\n        try {\r\n\r\n            decodedString = new String(dataDec, &quot;UTF-8&quot;);\r\n        } catch (UnsupportedEncodingException e) {\r\n            e.printStackTrace();\r\n\r\n        } finally {\r\n\r\n            return decodedString;\r\n        }\r\n    }\r\n\r\n### Example\r\n\r\n\r\n        String text = &quot;example007&quot;;\r\n\r\n        Log.e(&quot;encoded&quot;, encodeString(text)); //Output: ZXhhbXBsZTAwNw==\r\n        Log.e(&quot;decoded&quot;, decodeString(encodeString(text))); //Output: example007","title":"Base64 encoder and decoder","body":"<h3>To encode:</h3>\n\n<pre><code>private String encodeString(String s) {\n    byte[] data = new byte[0];\n\n    try {\n        data = s.getBytes(\"UTF-8\");\n\n    } catch (UnsupportedEncodingException e) {\n        e.printStackTrace();\n    } finally {\n        String base64Encoded = Base64.encodeToString(data, Base64.DEFAULT);\n\n        return base64Encoded;\n\n    }\n}\n</code></pre>\n\n<h3>To decode:</h3>\n\n<pre><code>private String decodeString(String encoded) {\n    byte[] dataDec = Base64.decode(encoded, Base64.DEFAULT);\n    String decodedString = \"\";\n    try {\n\n        decodedString = new String(dataDec, \"UTF-8\");\n    } catch (UnsupportedEncodingException e) {\n        e.printStackTrace();\n\n    } finally {\n\n        return decodedString;\n    }\n}\n</code></pre>\n\n<h3>Example</h3>\n\n<pre><code>    String text = \"example007\";\n\n    Log.e(\"encoded\", encodeString(text)); //Output: ZXhhbXBsZTAwNw==\n    Log.e(\"decoded\", decodeString(encodeString(text))); //Output: example007\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17644186,"reputation":1340,"user_id":12805923,"display_name":"Ahmet B."},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681195063,"creation_date":1681195063,"answer_id":75983027,"question_id":4322182,"body_markdown":"Kotlin supports Base64 for versions 1.8.20 and over. It has 3 types available which are Base64.Default, Base64.UrlSafe and Base64.Mime.\r\n\r\n    // Base64.Default\r\n    val nameBytes = &quot;Nav&quot;.map { it.code.toByte() }.toByteArray()\r\n    val encodedValue = Base64.Default.encode(nameBytes)\r\n    // Encode value: TmF2\r\n    println(&quot;Encoded: $encodedValue&quot;) \r\n    // Decoded value: Nav\r\n    println(&quot;Decoded: ${String(Base64.Default.decode(encodedValue))}&quot;)\r\n    \r\n    // Base64.UrlSafe\r\n    val googleIOUrlBytes = &quot;google.io&quot;.map { it.code.toByte() }.toByteArray()\r\n    // Encode value: Z29vZ2xlLmlv\r\n    val encodedURLSafe = Base64.UrlSafe.encode(googleIOUrlBytes)\r\n    println(&quot;Encoded UrlSafe: $encodedURLSafe&quot;)\r\n    // Decoded value: google.io\r\n    println(&quot;Decoded UrlSafe: ${String(Base64.UrlSafe.decode(encodedURLSafe))}&quot;)","title":"Base64 encoder and decoder","body":"<p>Kotlin supports Base64 for versions 1.8.20 and over. It has 3 types available which are Base64.Default, Base64.UrlSafe and Base64.Mime.</p>\n<pre><code>// Base64.Default\nval nameBytes = &quot;Nav&quot;.map { it.code.toByte() }.toByteArray()\nval encodedValue = Base64.Default.encode(nameBytes)\n// Encode value: TmF2\nprintln(&quot;Encoded: $encodedValue&quot;) \n// Decoded value: Nav\nprintln(&quot;Decoded: ${String(Base64.Default.decode(encodedValue))}&quot;)\n\n// Base64.UrlSafe\nval googleIOUrlBytes = &quot;google.io&quot;.map { it.code.toByte() }.toByteArray()\n// Encode value: Z29vZ2xlLmlv\nval encodedURLSafe = Base64.UrlSafe.encode(googleIOUrlBytes)\nprintln(&quot;Encoded UrlSafe: $encodedURLSafe&quot;)\n// Decoded value: google.io\nprintln(&quot;Decoded UrlSafe: ${String(Base64.UrlSafe.decode(encodedURLSafe))}&quot;)\n</code></pre>\n"}],"owner":{"account_id":203057,"reputation":3409,"user_id":450487,"accept_rate":100,"display_name":"xydev"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":96734,"favorite_count":0,"down_vote_count":0,"up_vote_count":50,"accepted_answer_id":4322202,"answer_count":6,"score":50,"last_activity_date":1681195063,"creation_date":1291189234,"question_id":4322182,"body_markdown":"Is there a base-64 decoder and encoder for a String in Android?","title":"Base64 encoder and decoder","body":"<p>Is there a base-64 decoder and encoder for a String in Android?</p>\n"},{"tags":["java","postgresql","spring-boot","attributes","converters"],"owner":{"account_id":28175707,"reputation":5,"user_id":21533509,"display_name":"Mohan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":101,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681194710,"creation_date":1681121397,"question_id":75976164,"body_markdown":"I have implemented a custom AttributeConverter class in my Spring Boot application that encrypts and decrypts certain fields of my entities using the AES cipher and a secret key. \r\nHere is my converter class:\r\n```\r\n@Converter\r\npublic class DataEncryptionConverter implements AttributeConverter&lt;Object, String&gt; {\r\n\r\n    @Value(&quot;${encryption.key}&quot;)\r\n    private String encryptionKey;\r\n\r\n    private final String encryptionCipher = &quot;AES&quot;;\r\n\r\n    private Key key;\r\n    private Cipher cipher;\r\n\r\n    private Key getKey(){\r\n        if(key == null){\r\n            key = new SecretKeySpec(encryptionKey.getBytes(), encryptionCipher);\r\n        }\r\n        return key;\r\n    }\r\n\r\n    private Cipher getCipher() throws GeneralSecurityException {\r\n        if(cipher == null){\r\n            cipher = Cipher.getInstance(encryptionCipher);\r\n        }\r\n        return cipher;\r\n    }\r\n\r\n\r\n    private void initCipher(int encryptMode) throws GeneralSecurityException{\r\n        getCipher().init(encryptMode, getKey());\r\n    }\r\n\r\n    @SneakyThrows\r\n    @Override\r\n    public String convertToDatabaseColumn(Object attribute) {\r\n        if (attribute == null) {\r\n            return null;\r\n        }\r\n        initCipher(Cipher.ENCRYPT_MODE);\r\n        byte[] bytes = SerializationUtils.serialize(attribute);\r\n        return Base64.getEncoder().encodeToString(getCipher().doFinal(bytes));\r\n    }\r\n\r\n    @SneakyThrows\r\n    @Override\r\n    public Object convertToEntityAttribute(String dbData) {\r\n        if (dbData == null) {\r\n            return null;\r\n        }\r\n        initCipher(Cipher.DECRYPT_MODE);\r\n        byte[] bytes = getCipher().doFinal(Base64.getDecoder().decode(dbData));\r\n        return SerializationUtils.deserialize(bytes);\r\n    }\r\n}\r\n```\r\n\r\nI use it on the fields I want to encrypt:\r\n\r\n```\r\npublic Class Task{\r\n\r\n@Convert(converter = DataEncryptionConverter.class)\r\n    private String task_title;\r\n\r\n@Convert(converter = DataEncryptionConverter.class)\r\n    private String task_description;\r\n\r\n}\r\n```\r\n\r\nI want to run a select query in my PostgreSQL database to view the result in decrypted form. How can I achieve this?\r\n\r\nI tried following but getting errors:\r\n```\r\nSELECT convert_from(decode(PGP_SYM_DECRYPT(decode(task_title, &#39;base64&#39;), &#39;encryption-key&#39;), &#39;escape&#39;), &#39;UTF8&#39;) as decrypted_title FROM task;\r\n```\r\nI got this ERROR:  Wrong key or corrupt data\r\n\r\n```\r\nSELECT convert(decode(PGP_SYM_DECRYPT(decode(task_title, &#39;base64&#39;), &#39;encryption-key&#39;), &#39;escape&#39;), &#39;UTF8&#39;) as decrypted_title FROM task;\r\n```\r\nI got this ERROR:\r\n\r\nfunction convert(bytea, unknown) does not exist\r\nLINE 1: SELECT convert(decode(PGP_SYM_DECRYPT(decode(task_title, &#39;ba...\r\n\r\nWhat am I doing wrong here? Any help would be appreciated.\r\n","title":"How to view decrypted results in PostgreSQL dB when using a attribute converter class for encrypting entity fields in a Spring Boot application?","body":"<p>I have implemented a custom AttributeConverter class in my Spring Boot application that encrypts and decrypts certain fields of my entities using the AES cipher and a secret key.\nHere is my converter class:</p>\n<pre><code>@Converter\npublic class DataEncryptionConverter implements AttributeConverter&lt;Object, String&gt; {\n\n    @Value(&quot;${encryption.key}&quot;)\n    private String encryptionKey;\n\n    private final String encryptionCipher = &quot;AES&quot;;\n\n    private Key key;\n    private Cipher cipher;\n\n    private Key getKey(){\n        if(key == null){\n            key = new SecretKeySpec(encryptionKey.getBytes(), encryptionCipher);\n        }\n        return key;\n    }\n\n    private Cipher getCipher() throws GeneralSecurityException {\n        if(cipher == null){\n            cipher = Cipher.getInstance(encryptionCipher);\n        }\n        return cipher;\n    }\n\n\n    private void initCipher(int encryptMode) throws GeneralSecurityException{\n        getCipher().init(encryptMode, getKey());\n    }\n\n    @SneakyThrows\n    @Override\n    public String convertToDatabaseColumn(Object attribute) {\n        if (attribute == null) {\n            return null;\n        }\n        initCipher(Cipher.ENCRYPT_MODE);\n        byte[] bytes = SerializationUtils.serialize(attribute);\n        return Base64.getEncoder().encodeToString(getCipher().doFinal(bytes));\n    }\n\n    @SneakyThrows\n    @Override\n    public Object convertToEntityAttribute(String dbData) {\n        if (dbData == null) {\n            return null;\n        }\n        initCipher(Cipher.DECRYPT_MODE);\n        byte[] bytes = getCipher().doFinal(Base64.getDecoder().decode(dbData));\n        return SerializationUtils.deserialize(bytes);\n    }\n}\n</code></pre>\n<p>I use it on the fields I want to encrypt:</p>\n<pre><code>public Class Task{\n\n@Convert(converter = DataEncryptionConverter.class)\n    private String task_title;\n\n@Convert(converter = DataEncryptionConverter.class)\n    private String task_description;\n\n}\n</code></pre>\n<p>I want to run a select query in my PostgreSQL database to view the result in decrypted form. How can I achieve this?</p>\n<p>I tried following but getting errors:</p>\n<pre><code>SELECT convert_from(decode(PGP_SYM_DECRYPT(decode(task_title, 'base64'), 'encryption-key'), 'escape'), 'UTF8') as decrypted_title FROM task;\n</code></pre>\n<p>I got this ERROR:  Wrong key or corrupt data</p>\n<pre><code>SELECT convert(decode(PGP_SYM_DECRYPT(decode(task_title, 'base64'), 'encryption-key'), 'escape'), 'UTF8') as decrypted_title FROM task;\n</code></pre>\n<p>I got this ERROR:</p>\n<p>function convert(bytea, unknown) does not exist\nLINE 1: SELECT convert(decode(PGP_SYM_DECRYPT(decode(task_title, 'ba...</p>\n<p>What am I doing wrong here? Any help would be appreciated.</p>\n"},{"tags":["java","android","android-studio","android-fragments","android-arrayadapter"],"comments":[{"owner":{"account_id":1233070,"reputation":9484,"user_id":1197251,"display_name":"dominicoder"},"score":0,"creation_date":1681147198,"post_id":75978366,"comment_id":134006225,"body_markdown":"You left out the key piece of code - the adapter logic that actually loads data.","body":"You left out the key piece of code - the adapter logic that actually loads data."},{"owner":{"account_id":14414124,"reputation":758,"user_id":10412027,"display_name":"Gabriel Rogath"},"score":0,"creation_date":1681150282,"post_id":75978366,"comment_id":134006915,"body_markdown":"@dominicoder just added the adapter class.Thanks","body":"@dominicoder just added the adapter class.Thanks"},{"owner":{"account_id":1233070,"reputation":9484,"user_id":1197251,"display_name":"dominicoder"},"score":0,"creation_date":1681154498,"post_id":75978366,"comment_id":134007824,"body_markdown":"You still haven&#39;t shown what actually adds elements to the adapter. Your sample creates two empty ArrayLists to populate each adapter. Where do you actually add items to the adapters?","body":"You still haven&#39;t shown what actually adds elements to the adapter. Your sample creates two empty ArrayLists to populate each adapter. Where do you actually add items to the adapters?"},{"owner":{"account_id":14414124,"reputation":758,"user_id":10412027,"display_name":"Gabriel Rogath"},"score":0,"creation_date":1681194411,"post_id":75978366,"comment_id":134012727,"body_markdown":"@dominicoder, I have just added methods that populate both adapter with volley Library","body":"@dominicoder, I have just added methods that populate both adapter with volley Library"},{"owner":{"account_id":1233070,"reputation":9484,"user_id":1197251,"display_name":"dominicoder"},"score":0,"creation_date":1681222967,"post_id":75978366,"comment_id":134019584,"body_markdown":"I don&#39;t see anything immediately obvious from your posted code, but it&#39;s also very difficult to get a full sense of what is happening with so many snippets out of context. Debug your code and try to narrow down the issue: https://developer.android.com/studio/debug","body":"I don&#39;t see anything immediately obvious from your posted code, but it&#39;s also very difficult to get a full sense of what is happening with so many snippets out of context. Debug your code and try to narrow down the issue: <a href=\"https://developer.android.com/studio/debug\" rel=\"nofollow noreferrer\">developer.android.com/studio/debug</a>"}],"answers":[{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1681456564,"post_id":75979329,"comment_id":134062165,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/75979329/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":3956635,"reputation":1,"user_id":3264881,"display_name":"mustafaklc"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681148135,"creation_date":1681148135,"answer_id":75979329,"question_id":75978366,"body_markdown":"You can use the same adapter and model class again and again. You are probably doing something wrong while populating your array lists.","title":"Same Instance of an arrayAdapter in Two ListView doesnot work","body":"<p>You can use the same adapter and model class again and again. You are probably doing something wrong while populating your array lists.</p>\n"}],"owner":{"account_id":14414124,"reputation":758,"user_id":10412027,"display_name":"Gabriel Rogath"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681194293,"creation_date":1681140088,"question_id":75978366,"body_markdown":"I have two fragments in my Activity. Both of these fragments have unique listView, these fragments have methods that get values from database, One fragment shows used data and the other shows added data so I use the same Model.\r\nAlso these fragments use two diffrence instance of the same arrayAdapter class which extends ArrayAdapter&lt;&gt;.\r\n\r\nClass FragmentPartTaken extends Fragment\r\n\r\n         //Instance Variables\r\n         ListView listPartTaken;\r\n         AdapterPartsIntakenOutMinimized adapter;\r\n         private ArrayList&lt;ModelPartIntakenOuttake&gt; modelPartOuttakes;\r\n\r\n         //onCreateView     \r\n         listPartTaken = view.findViewById(R.id.list_part_taken);\r\n         modelPartOuttakes = new ArrayList&lt;&gt;();\r\n         adapter = new AdapterPartsIntakenOutMinimized(modelPartOuttakes,getContext());\r\n\r\n\r\nClass FragmentPartAdded extends Fragment\r\n\r\n        //Instance Variables\r\n        ListView listPartAdded;\r\n        AdapterPartsIntakenOutMinimized adapter;\r\n        private ArrayList&lt;ModelPartIntakenOuttake&gt; modelPartAdded;\r\n\r\n        //onCreateView\r\n        listPartAdded = view.findViewById(R.id.list_part_added);\r\n        modelPartAdded = new ArrayList&lt;&gt;();\r\n        adapter = new AdapterPartsIntakenOutMinimized(modelPartAdded,getContext());\r\n\r\n\r\n\r\nWhen the Activity is Launched, the list in the first Fragment selected(Displayed) is the one that is populated with data, and the other list is left blanks. If I change the order of position of these Fragments it does the same, the list in the first fragment get populated but not the second.\r\n\r\nThe arrayAdapter Override a single ``` public View getView(int position, @Nullable View convertView, @NonNull ViewGroup parent) {}``` method.\r\nMy question is do I need to have each Fragment with its own Adapter class and Model. So as all can be populated at once when the activity is launched.\r\n\r\nEdit:\r\n\r\n    public class AdapterPartsIntakenOut extends ArrayAdapter&lt;ModelPartIntakenOuttake&gt; {\r\n\r\n    private ArrayList&lt;ModelPartIntakenOuttake&gt; dataSet;\r\n    Context mContext;\r\n\r\n    public AdapterPartsIntakenOut(ArrayList&lt;ModelPartIntakenOuttake&gt; data, Context context) {\r\n        super(context, R.layout.raw_intake_outake_parts, data);\r\n        this.dataSet = data;\r\n        this.mContext=context;\r\n    }\r\n\r\n    private static class ViewHolder {\r\n        TextView textAction;\r\n        TextView textDate;\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public View getView(int position, @Nullable View convertView, @NonNull ViewGroup parent) {\r\n        ModelPartIntakenOuttake modelPartIntakenOuttake = getItem(position);\r\n        AdapterPartsIntakenOut.ViewHolder viewHolder; // view lookup cache stored in tag\r\n\r\n        final View result;\r\n        if (convertView == null) {\r\n            viewHolder = new AdapterPartsIntakenOut.ViewHolder();\r\n            LayoutInflater inflater = LayoutInflater.from(getContext());\r\n            convertView = inflater.inflate(R.layout.raw_intake_outake_parts, parent, false);\r\n            viewHolder.textAction = (TextView) convertView.findViewById(R.id.txt_action_intake_outtake);\r\n            viewHolder.textDate = convertView.findViewById(R.id.txt_date_intake_outtake);\r\n            result=convertView;\r\n            convertView.setTag(viewHolder);\r\n        } else {\r\n            viewHolder = (AdapterPartsIntakenOut.ViewHolder) convertView.getTag();\r\n            result=convertView;\r\n        }\r\n        viewHolder.textAction.setText(modelPartIntakenOuttake.getActionType());\r\n      viewHolder.textDate.setText(modelPartIntakenOuttake.getOnDate());\r\n        return convertView;\r\n    }\r\n    }\r\n\r\n**Edit:**\r\nI am using volley library to populate the adapters in both fragment\r\n\r\n\r\n      private void getPartAdded(){\r\n        getActivity().runOnUiThread(mRunnable);\r\n        String partsTakenURL = &quot;....&quot;;\r\n        RequestQueue requestQueue = Volley.newRequestQueue(getContext());\r\n        JsonArrayRequest jsonArrayRequest = new JsonArrayRequest(Request.Method.GET, partsTakenURL, null,\r\n                new Response.Listener&lt;JSONArray&gt;() {\r\n                    @Override\r\n                    public void onResponse(JSONArray response) {\r\n                        for (int i = 0; i &lt; response.length(); i++) {\r\n                            try { \r\n                                String actionType = response.getJSONObject(i).getString(&quot;action_type&quot;);\r\n                                String onDate = response.getJSONObject(i).getString(&quot;on_date&quot;);\r\n                                modelPartAdded.add(new ModelPartIntakenOuttake(actionType,onDate));\r\n                            } catch (JSONException e) {\r\n                                e.printStackTrace();\r\n                            }\r\n                        }\r\n                        adapter.notifyDataSetChanged();\r\n                    }\r\n                }, new Response.ErrorListener() {\r\n            @Override\r\n            public void onErrorResponse(VolleyError error) {\r\n\r\n            }\r\n        });\r\n\r\n        requestQueue.add(jsonArrayRequest);\r\n        listPartAdded.setAdapter(adapter);\r\n    }\r\n\r\n    Runnable mRunnable = new Runnable() {\r\n        public void run() {\r\n            modelPartAdded.clear();\r\n            adapter.notifyDataSetChanged();\r\n\r\n        }\r\n\r\nAlso on  another class\r\n\r\n\r\n      private void getPartOutTaken() {\r\n       getActivity().runOnUiThread(mRunnable);\r\n        String partsTakenURL = &quot;...&quot;;\r\n        RequestQueue requestQueue = Volley.newRequestQueue(getContext());\r\n        JsonArrayRequest jsonArrayRequest = new JsonArrayRequest(Request.Method.GET, partsTakenURL, null,\r\n                new Response.Listener&lt;JSONArray&gt;() {\r\n                    @Override\r\n                    public void onResponse(JSONArray response) {\r\n                        for (int i = 0; i &lt; response.length(); i++) {\r\n                            try {\r\n                                String actionType = response.getJSONObject(i).getString(&quot;action_type&quot;);                   \r\n                                String onDate = response.getJSONObject(i).getString(&quot;on_date&quot;);\r\n                                modelPartOuttakes.add(new ModelPartIntakenOuttake(actionType,onDate));\r\n                            } catch (JSONException e) {\r\n                                e.printStackTrace();\r\n                            }\r\n                        }\r\n                        adapter.notifyDataSetChanged();\r\n                    }\r\n                }, new Response.ErrorListener() {\r\n            @Override\r\n            public void onErrorResponse(VolleyError error) {\r\n\r\n            }\r\n        });\r\n\r\n        requestQueue.add(jsonArrayRequest);\r\n        listPartTaken.setAdapter(adapter);\r\n    }\r\n\r\n    Runnable mRunnable = new Runnable() {\r\n        public void run() {\r\n            modelPartOuttakes.clear();\r\n            adapter.notifyDataSetChanged();\r\n        }\r\n    };;","title":"Same Instance of an arrayAdapter in Two ListView doesnot work","body":"<p>I have two fragments in my Activity. Both of these fragments have unique listView, these fragments have methods that get values from database, One fragment shows used data and the other shows added data so I use the same Model.\nAlso these fragments use two diffrence instance of the same arrayAdapter class which extends ArrayAdapter&lt;&gt;.</p>\n<p>Class FragmentPartTaken extends Fragment</p>\n<pre><code>     //Instance Variables\n     ListView listPartTaken;\n     AdapterPartsIntakenOutMinimized adapter;\n     private ArrayList&lt;ModelPartIntakenOuttake&gt; modelPartOuttakes;\n\n     //onCreateView     \n     listPartTaken = view.findViewById(R.id.list_part_taken);\n     modelPartOuttakes = new ArrayList&lt;&gt;();\n     adapter = new AdapterPartsIntakenOutMinimized(modelPartOuttakes,getContext());\n</code></pre>\n<p>Class FragmentPartAdded extends Fragment</p>\n<pre><code>    //Instance Variables\n    ListView listPartAdded;\n    AdapterPartsIntakenOutMinimized adapter;\n    private ArrayList&lt;ModelPartIntakenOuttake&gt; modelPartAdded;\n\n    //onCreateView\n    listPartAdded = view.findViewById(R.id.list_part_added);\n    modelPartAdded = new ArrayList&lt;&gt;();\n    adapter = new AdapterPartsIntakenOutMinimized(modelPartAdded,getContext());\n</code></pre>\n<p>When the Activity is Launched, the list in the first Fragment selected(Displayed) is the one that is populated with data, and the other list is left blanks. If I change the order of position of these Fragments it does the same, the list in the first fragment get populated but not the second.</p>\n<p>The arrayAdapter Override a single <code> public View getView(int position, @Nullable View convertView, @NonNull ViewGroup parent) {}</code> method.\nMy question is do I need to have each Fragment with its own Adapter class and Model. So as all can be populated at once when the activity is launched.</p>\n<p>Edit:</p>\n<pre><code>public class AdapterPartsIntakenOut extends ArrayAdapter&lt;ModelPartIntakenOuttake&gt; {\n\nprivate ArrayList&lt;ModelPartIntakenOuttake&gt; dataSet;\nContext mContext;\n\npublic AdapterPartsIntakenOut(ArrayList&lt;ModelPartIntakenOuttake&gt; data, Context context) {\n    super(context, R.layout.raw_intake_outake_parts, data);\n    this.dataSet = data;\n    this.mContext=context;\n}\n\nprivate static class ViewHolder {\n    TextView textAction;\n    TextView textDate;\n}\n\n@NonNull\n@Override\npublic View getView(int position, @Nullable View convertView, @NonNull ViewGroup parent) {\n    ModelPartIntakenOuttake modelPartIntakenOuttake = getItem(position);\n    AdapterPartsIntakenOut.ViewHolder viewHolder; // view lookup cache stored in tag\n\n    final View result;\n    if (convertView == null) {\n        viewHolder = new AdapterPartsIntakenOut.ViewHolder();\n        LayoutInflater inflater = LayoutInflater.from(getContext());\n        convertView = inflater.inflate(R.layout.raw_intake_outake_parts, parent, false);\n        viewHolder.textAction = (TextView) convertView.findViewById(R.id.txt_action_intake_outtake);\n        viewHolder.textDate = convertView.findViewById(R.id.txt_date_intake_outtake);\n        result=convertView;\n        convertView.setTag(viewHolder);\n    } else {\n        viewHolder = (AdapterPartsIntakenOut.ViewHolder) convertView.getTag();\n        result=convertView;\n    }\n    viewHolder.textAction.setText(modelPartIntakenOuttake.getActionType());\n  viewHolder.textDate.setText(modelPartIntakenOuttake.getOnDate());\n    return convertView;\n}\n}\n</code></pre>\n<p><strong>Edit:</strong>\nI am using volley library to populate the adapters in both fragment</p>\n<pre><code>  private void getPartAdded(){\n    getActivity().runOnUiThread(mRunnable);\n    String partsTakenURL = &quot;....&quot;;\n    RequestQueue requestQueue = Volley.newRequestQueue(getContext());\n    JsonArrayRequest jsonArrayRequest = new JsonArrayRequest(Request.Method.GET, partsTakenURL, null,\n            new Response.Listener&lt;JSONArray&gt;() {\n                @Override\n                public void onResponse(JSONArray response) {\n                    for (int i = 0; i &lt; response.length(); i++) {\n                        try { \n                            String actionType = response.getJSONObject(i).getString(&quot;action_type&quot;);\n                            String onDate = response.getJSONObject(i).getString(&quot;on_date&quot;);\n                            modelPartAdded.add(new ModelPartIntakenOuttake(actionType,onDate));\n                        } catch (JSONException e) {\n                            e.printStackTrace();\n                        }\n                    }\n                    adapter.notifyDataSetChanged();\n                }\n            }, new Response.ErrorListener() {\n        @Override\n        public void onErrorResponse(VolleyError error) {\n\n        }\n    });\n\n    requestQueue.add(jsonArrayRequest);\n    listPartAdded.setAdapter(adapter);\n}\n\nRunnable mRunnable = new Runnable() {\n    public void run() {\n        modelPartAdded.clear();\n        adapter.notifyDataSetChanged();\n\n    }\n</code></pre>\n<p>Also on  another class</p>\n<pre><code>  private void getPartOutTaken() {\n   getActivity().runOnUiThread(mRunnable);\n    String partsTakenURL = &quot;...&quot;;\n    RequestQueue requestQueue = Volley.newRequestQueue(getContext());\n    JsonArrayRequest jsonArrayRequest = new JsonArrayRequest(Request.Method.GET, partsTakenURL, null,\n            new Response.Listener&lt;JSONArray&gt;() {\n                @Override\n                public void onResponse(JSONArray response) {\n                    for (int i = 0; i &lt; response.length(); i++) {\n                        try {\n                            String actionType = response.getJSONObject(i).getString(&quot;action_type&quot;);                   \n                            String onDate = response.getJSONObject(i).getString(&quot;on_date&quot;);\n                            modelPartOuttakes.add(new ModelPartIntakenOuttake(actionType,onDate));\n                        } catch (JSONException e) {\n                            e.printStackTrace();\n                        }\n                    }\n                    adapter.notifyDataSetChanged();\n                }\n            }, new Response.ErrorListener() {\n        @Override\n        public void onErrorResponse(VolleyError error) {\n\n        }\n    });\n\n    requestQueue.add(jsonArrayRequest);\n    listPartTaken.setAdapter(adapter);\n}\n\nRunnable mRunnable = new Runnable() {\n    public void run() {\n        modelPartOuttakes.clear();\n        adapter.notifyDataSetChanged();\n    }\n};;\n</code></pre>\n"},{"tags":["java","methods","package","visibility","public-method"],"answers":[{"comments":[{"owner":{"account_id":240726,"reputation":2094,"user_id":511125,"accept_rate":100,"display_name":"Deepak"},"score":0,"creation_date":1299765188,"post_id":5260491,"comment_id":5924284,"body_markdown":"does extending a private class make sense.?","body":"does extending a private class make sense.?"},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":1,"creation_date":1299765902,"post_id":5260491,"comment_id":5924503,"body_markdown":"Extending a package private class can make sense, e.g. when the class provides some internal base which is shared by different implementations in the package (there are some Open Source projects which are doing this).","body":"Extending a package private class can make sense, e.g. when the class provides some internal base which is shared by different implementations in the package (there are some Open Source projects which are doing this)."},{"owner":{"account_id":3282,"reputation":146296,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"score":0,"creation_date":1299766783,"post_id":5260491,"comment_id":5924771,"body_markdown":"`AbstractStringBuilder` (?) is extended by `StringBuffer` and `StringBuilder` (it&#39;s in the API docs, but that&#39;s probably a bug/misfeature in JavaDoc).","body":"<code>AbstractStringBuilder</code> (?) is extended by <code>StringBuffer</code> and <code>StringBuilder</code> (it&#39;s in the API docs, but that&#39;s probably a bug/misfeature in JavaDoc)."}],"tags":[],"owner":{"account_id":3282,"reputation":146296,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"comment_count":3,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1299767319,"creation_date":1299765040,"answer_id":5260491,"question_id":5260467,"body_markdown":"It makes very little difference, unless the class is extended by a public (or protected nested) class.\r\n\r\nAs a matter of consistency, I&#39;d go for `public`. It should be rare for methods to be anything other than `public` or `private`.\r\n\r\nThere are a number of examples of public methods in the package private `java.lang.AbstractStringBuilder` class. For instance `length()` is public in `AbstractStringBuilder` and is exposed in the public class `StringBuilder` (overridden in `StringBuffer` to add synchronisation).","title":"public methods in package-private classes","body":"<p>It makes very little difference, unless the class is extended by a public (or protected nested) class.</p>\n\n<p>As a matter of consistency, I'd go for <code>public</code>. It should be rare for methods to be anything other than <code>public</code> or <code>private</code>.</p>\n\n<p>There are a number of examples of public methods in the package private <code>java.lang.AbstractStringBuilder</code> class. For instance <code>length()</code> is public in <code>AbstractStringBuilder</code> and is exposed in the public class <code>StringBuilder</code> (overridden in <code>StringBuffer</code> to add synchronisation).</p>\n"},{"comments":[{"owner":{"account_id":3282,"reputation":146296,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"score":0,"creation_date":1299765175,"post_id":5260506,"comment_id":5924280,"body_markdown":"But `bar` doesn&#39;t really have public visibility because it is in a class that has default access (&quot;package private&quot;).","body":"But <code>bar</code> doesn&#39;t really have public visibility because it is in a class that has default access (&quot;package private&quot;)."},{"owner":{"account_id":240726,"reputation":2094,"user_id":511125,"accept_rate":100,"display_name":"Deepak"},"score":0,"creation_date":1299765362,"post_id":5260506,"comment_id":5924335,"body_markdown":"`public void bar` the modifier used here is public so i guess it has public visibility.please correct me if im wrong","body":"<code>public void bar</code> the modifier used here is public so i guess it has public visibility.please correct me if im wrong"},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1299765782,"post_id":5260506,"comment_id":5924467,"body_markdown":"`public void bar()` has public visibility, but as Tom said, *practically* you don&#39;t have public access to the class and thus no real public access to the method (since you don&#39;t even see the class). When inheritance is involved things become different though, just as Tom pointed out in his answer.","body":"<code>public void bar()</code> has public visibility, but as Tom said, <i>practically</i> you don&#39;t have public access to the class and thus no real public access to the method (since you don&#39;t even see the class). When inheritance is involved things become different though, just as Tom pointed out in his answer."},{"owner":{"account_id":240726,"reputation":2094,"user_id":511125,"accept_rate":100,"display_name":"Deepak"},"score":0,"creation_date":1299766002,"post_id":5260506,"comment_id":5924535,"body_markdown":"@Thomas,I will highly thankful to you if you can give me a working CODE example.im quite confused now.","body":"@Thomas,I will highly thankful to you if you can give me a working CODE example.im quite confused now."}],"tags":[],"owner":{"account_id":240726,"reputation":2094,"user_id":511125,"accept_rate":100,"display_name":"Deepak"},"comment_count":4,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1299765108,"creation_date":1299765108,"answer_id":5260506,"question_id":5260467,"body_markdown":"`foo` has `default package visibility` where as `bar` has `public` visibility\r\n","title":"public methods in package-private classes","body":"<p><code>foo</code> has <code>default package visibility</code> where as <code>bar</code> has <code>public</code> visibility</p>\n"},{"comments":[{"owner":{"account_id":238157,"reputation":37489,"user_id":506855,"accept_rate":47,"display_name":"Puce"},"score":2,"creation_date":1299767195,"post_id":5260523,"comment_id":5924908,"body_markdown":"&quot;Declaring all methods private&quot; should be read &quot;Declaring all methods package-private&quot;, and &quot;the enclosing class&quot; as &quot;other classes&quot;, I guess, but otherwise +1","body":"&quot;Declaring all methods private&quot; should be read &quot;Declaring all methods package-private&quot;, and &quot;the enclosing class&quot; as &quot;other classes&quot;, I guess, but otherwise +1"},{"owner":{"account_id":97818,"reputation":114824,"user_id":265143,"accept_rate":72,"display_name":"P&#233;ter T&#246;r&#246;k"},"score":0,"creation_date":1299775693,"post_id":5260523,"comment_id":5927534,"body_markdown":"@Puce, correct, I misread the question slightly. Now fixed, thanks :-)","body":"@Puce, correct, I misread the question slightly. Now fixed, thanks :-)"}],"tags":[],"owner":{"account_id":97818,"reputation":114824,"user_id":265143,"accept_rate":72,"display_name":"P&#233;ter T&#246;r&#246;k"},"comment_count":2,"down_vote_count":1,"up_vote_count":24,"is_accepted":true,"score":23,"last_activity_date":1299775643,"creation_date":1299765161,"answer_id":5260523,"question_id":5260467,"body_markdown":"If the class is not going to be extended by another, more visible subclass*, the only difference is **clarity of intent**. Declaring all methods package private makes it more difficult for future readers to determine which of the methods are meant to be called by other classes in the same package.\r\n\r\n*&lt;sub&gt;which would not make much sense as a design solution to me, but technically is possible nevertheless.&lt;/sub&gt;","title":"public methods in package-private classes","body":"<p>If the class is not going to be extended by another, more visible subclass*, the only difference is <strong>clarity of intent</strong>. Declaring all methods package private makes it more difficult for future readers to determine which of the methods are meant to be called by other classes in the same package.</p>\n\n<p>*<sub>which would not make much sense as a design solution to me, but technically is possible nevertheless.</sub></p>\n"},{"tags":[],"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"comment_count":0,"down_vote_count":0,"up_vote_count":58,"is_accepted":false,"score":58,"last_activity_date":1681193924,"creation_date":1299766519,"answer_id":5260853,"question_id":5260467,"body_markdown":"Example using inheritance:\r\n\r\nA.java\r\n\r\n    package pkg1;\r\n\r\n    class A {\r\n      void foo() {};\r\n      public void bar() {};\r\n    }\r\n\r\nB.java\r\n\r\n    package pkg1;\r\n\r\n    public class B extends A {\r\n\r\n    }\r\n\r\nC.java\r\n\r\n    package pkg2;\r\n\r\n    import pkg1.*;\r\n\r\n    public class C {\r\n      public void doSomething() {\r\n       B b = new B();\r\n       b.bar(); //ok\r\n       b.foo(); //won&#39;t work, since foo() is not visible outside of package &#39;pkg1&#39;\r\n\r\n       A a = new A(); //won&#39;t work since A is not visible outside of package &#39;pkg1&#39;\r\n       a.bar(); //won&#39;t work, since a cannot be created\r\n      }\r\n    }","title":"public methods in package-private classes","body":"<p>Example using inheritance:</p>\n<p>A.java</p>\n<pre><code>package pkg1;\n\nclass A {\n  void foo() {};\n  public void bar() {};\n}\n</code></pre>\n<p>B.java</p>\n<pre><code>package pkg1;\n\npublic class B extends A {\n\n}\n</code></pre>\n<p>C.java</p>\n<pre><code>package pkg2;\n\nimport pkg1.*;\n\npublic class C {\n  public void doSomething() {\n   B b = new B();\n   b.bar(); //ok\n   b.foo(); //won't work, since foo() is not visible outside of package 'pkg1'\n\n   A a = new A(); //won't work since A is not visible outside of package 'pkg1'\n   a.bar(); //won't work, since a cannot be created\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":47176,"reputation":33749,"user_id":139595,"accept_rate":88,"display_name":"J&#246;rn Horstmann"},"comment_count":0,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1299767950,"creation_date":1299767950,"answer_id":5261243,"question_id":5260467,"body_markdown":"Another case where the method *has to be* public is when you are creating a package private implementation of some public class or interface. Since you are not allowed to reduce the visibility of overridden methods, these have to be public.","title":"public methods in package-private classes","body":"<p>Another case where the method <em>has to be</em> public is when you are creating a package private implementation of some public class or interface. Since you are not allowed to reduce the visibility of overridden methods, these have to be public.</p>\n"},{"tags":[],"owner":{"account_id":2121382,"reputation":5197,"user_id":1884546,"accept_rate":43,"display_name":"midnite"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1368556045,"creation_date":1368554900,"answer_id":16549932,"question_id":5260467,"body_markdown":"Well... i had this doubt also (that&#39;s why i searched for this thread). This might be a good question.\r\n\r\nBut ...\r\n\r\nAfter a second thought, things are really simpler than we thought.\r\n\r\n&gt; A package-private method, is a package-private method.\r\n\r\nSeems nonsense? But ...\r\n\r\n&gt; A package-private method, even if its class is inherited, it is *still* a package-private method.\r\n\r\nDoes it make more sense now? For a more verbose explanation:\r\n\r\n&gt; A package-private method, even if its class is inherited by a more visible subclass, it is *still* a package-private method. &lt;br /&gt;&lt;br /&gt;\r\nIf the subclass is of the same package, those package-private methods are also inherited, **but they are still package-private**. &lt;br /&gt;&lt;br /&gt;\r\nIf the subclass is of the different package (of here, we need the parent class to be public, with some package-private methods), those package-private methods are **not** inherited (because they are not visible at all). &lt;br /&gt;&lt;br /&gt;\r\nA point to note, which may be the cause of this doubt, that a package-private method in a public class **is not visible** outside its package also.\r\n\r\n---\r\n\r\nThe above explains about the package-private method. And the case of the public-method is just the same.\r\n\r\n&gt; When a package-private class is inherited by a pubic subclass (of the same package, this is a must), its public methods are inherited as public methods, and thus they become public methods in a pubic class.\r\n\r\nIn the OP example, as `foo()` and `bar()` are both in a package-private class, their visibilities are limited to package-private at this moment, until further codes are added (e.g. inheritance).\r\n\r\nHope this is clear (and simple) enough.\r\n\r\nP.S. [the Java access control table][1]\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html","title":"public methods in package-private classes","body":"<p>Well... i had this doubt also (that's why i searched for this thread). This might be a good question.</p>\n\n<p>But ...</p>\n\n<p>After a second thought, things are really simpler than we thought.</p>\n\n<blockquote>\n  <p>A package-private method, is a package-private method.</p>\n</blockquote>\n\n<p>Seems nonsense? But ...</p>\n\n<blockquote>\n  <p>A package-private method, even if its class is inherited, it is <em>still</em> a package-private method.</p>\n</blockquote>\n\n<p>Does it make more sense now? For a more verbose explanation:</p>\n\n<blockquote>\n  <p>A package-private method, even if its class is inherited by a more visible subclass, it is <em>still</em> a package-private method. <br /><br />\n  If the subclass is of the same package, those package-private methods are also inherited, <strong>but they are still package-private</strong>. <br /><br />\n  If the subclass is of the different package (of here, we need the parent class to be public, with some package-private methods), those package-private methods are <strong>not</strong> inherited (because they are not visible at all). <br /><br />\n  A point to note, which may be the cause of this doubt, that a package-private method in a public class <strong>is not visible</strong> outside its package also.</p>\n</blockquote>\n\n<hr>\n\n<p>The above explains about the package-private method. And the case of the public-method is just the same.</p>\n\n<blockquote>\n  <p>When a package-private class is inherited by a pubic subclass (of the same package, this is a must), its public methods are inherited as public methods, and thus they become public methods in a pubic class.</p>\n</blockquote>\n\n<p>In the OP example, as <code>foo()</code> and <code>bar()</code> are both in a package-private class, their visibilities are limited to package-private at this moment, until further codes are added (e.g. inheritance).</p>\n\n<p>Hope this is clear (and simple) enough.</p>\n\n<p>P.S. <a href=\"http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html\" rel=\"noreferrer\">the Java access control table</a></p>\n"},{"tags":[],"owner":{"account_id":3826509,"reputation":28018,"user_id":3208297,"accept_rate":65,"display_name":"blue_note"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1542640932,"creation_date":1482405905,"answer_id":41282060,"question_id":5260467,"body_markdown":"Yes. `public` methods in a package-private class can be useful (although they are rare). Illustrative example from the java library (and taken from the classic book &quot;effective java&quot;):\r\n\r\nHave you ever seen the `java.util.JumboEnumSet, java.util.RegularEnumSet`?? Probably not, because they are private, and are not mentioned in the documentation.\r\n\r\nHave you ever used them?? Probably yes. They are returned by the static method of `java.util.EnumSet.noneOf(...)`. Although you can&#39;t construct them yourself, you can use their public methods when they are returned from this method.\r\n\r\nThe good thing about that is that you don&#39;t know which one you are using, or even that they exist. Java decides which one is more efficient depending on the arguments, and might use a different on in a newer version. You only access their functionality by referring to them through their common interface (which is a good practice anyway!!) ","title":"public methods in package-private classes","body":"<p>Yes. <code>public</code> methods in a package-private class can be useful (although they are rare). Illustrative example from the java library (and taken from the classic book \"effective java\"):</p>\n\n<p>Have you ever seen the <code>java.util.JumboEnumSet, java.util.RegularEnumSet</code>?? Probably not, because they are private, and are not mentioned in the documentation.</p>\n\n<p>Have you ever used them?? Probably yes. They are returned by the static method of <code>java.util.EnumSet.noneOf(...)</code>. Although you can't construct them yourself, you can use their public methods when they are returned from this method.</p>\n\n<p>The good thing about that is that you don't know which one you are using, or even that they exist. Java decides which one is more efficient depending on the arguments, and might use a different on in a newer version. You only access their functionality by referring to them through their common interface (which is a good practice anyway!!) </p>\n"},{"tags":[],"owner":{"account_id":3753631,"reputation":2325,"user_id":3120564,"accept_rate":80,"display_name":"Jaumzera"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1610591609,"creation_date":1610591609,"answer_id":65712598,"question_id":5260467,"body_markdown":"One good utilization for that is when you want to restrict your class to your package but still want to use proxy-generated stuff, such as the `@Transactional` right above the following a method.\r\n\r\n```\r\n@Service\r\nclass SomeService {\r\n\r\n   @Transactional\r\n   public void someTxStuff() {\r\n     /// very complicated code here\r\n   }\r\n}\r\n\r\n```\r\n\r\nIf `someTxStuff` were package-private, `@Transactional` annotation wouldn&#39;t have any effect.","title":"public methods in package-private classes","body":"<p>One good utilization for that is when you want to restrict your class to your package but still want to use proxy-generated stuff, such as the <code>@Transactional</code> right above the following a method.</p>\n<pre><code>@Service\nclass SomeService {\n\n   @Transactional\n   public void someTxStuff() {\n     /// very complicated code here\n   }\n}\n\n</code></pre>\n<p>If <code>someTxStuff</code> were package-private, <code>@Transactional</code> annotation wouldn't have any effect.</p>\n"},{"tags":[],"owner":{"account_id":10826427,"reputation":509,"user_id":7962200,"display_name":"Madjosz"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658155044,"creation_date":1658155044,"answer_id":73024112,"question_id":5260467,"body_markdown":"There is a difference when you make reflective access to the method:\r\n`jdk.internal.reflect.Reflection.verifyMemberAccess()` will decline access to the method when you try to call it from a class which is not in the same package as your package-private class even if it is a method which is an overridden method of a public class/interface. Consider following example:\r\n\r\n```java\r\npackage pkg1;\r\npublic interface PublicInterface {\r\n    int i();\r\n}\r\n```\r\n```java\r\npackage pkg2;\r\nimport pkg1.PublicInterface;\r\nclass PackagePrivateImpl implements PublicInterface {\r\n\t@Override public int i() {\r\n\t\treturn 42;\r\n\t}\r\n}\r\n```\r\n```java\r\npackage pkg2;\r\nimport pkg1.PublicInterface;\r\npublic class ImplFactory {\r\n\tpublic static PublicInterface impl() {\r\n\t\treturn new PackagePrivateImpl();\r\n\t}\r\n}\r\n```\r\n```java\r\npackage pkg1;\r\nimport java.lang.reflect.Method;\r\nimport pkg2.ImplFactory;\r\npublic class ReflectiveFail {\r\n\tpublic static void main(String... args) throws Exception {\r\n\t\tPublicInterface impl = ImplFactory.impl();\r\n\t\tSystem.out.println(impl.i()); // 42\r\n\t    Method interfaceMethod = PublicInterface.class.getMethod(&quot;i&quot;);\r\n\t    System.out.println(interfaceMethod.invoke(impl)); // 42\r\n\t    Method implMethod = impl.getClass().getMethod(&quot;i&quot;);\r\n\t    System.out.println(implMethod.invoke(impl)); // IllegalAcessException\r\n\t}\r\n}\r\n```\r\nThe last call to `implMethod.invoke()` will throw an `IllegalAccessException` with the following message:\r\n\r\n    Exception in thread &quot;main&quot; java.lang.IllegalAccessException: class pkg1.ReflectiveFail cannot access a member of class pkg2.PackagePrivateImpl with modifiers &quot;public&quot;","title":"public methods in package-private classes","body":"<p>There is a difference when you make reflective access to the method:\n<code>jdk.internal.reflect.Reflection.verifyMemberAccess()</code> will decline access to the method when you try to call it from a class which is not in the same package as your package-private class even if it is a method which is an overridden method of a public class/interface. Consider following example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package pkg1;\npublic interface PublicInterface {\n    int i();\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package pkg2;\nimport pkg1.PublicInterface;\nclass PackagePrivateImpl implements PublicInterface {\n    @Override public int i() {\n        return 42;\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package pkg2;\nimport pkg1.PublicInterface;\npublic class ImplFactory {\n    public static PublicInterface impl() {\n        return new PackagePrivateImpl();\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package pkg1;\nimport java.lang.reflect.Method;\nimport pkg2.ImplFactory;\npublic class ReflectiveFail {\n    public static void main(String... args) throws Exception {\n        PublicInterface impl = ImplFactory.impl();\n        System.out.println(impl.i()); // 42\n        Method interfaceMethod = PublicInterface.class.getMethod(&quot;i&quot;);\n        System.out.println(interfaceMethod.invoke(impl)); // 42\n        Method implMethod = impl.getClass().getMethod(&quot;i&quot;);\n        System.out.println(implMethod.invoke(impl)); // IllegalAcessException\n    }\n}\n</code></pre>\n<p>The last call to <code>implMethod.invoke()</code> will throw an <code>IllegalAccessException</code> with the following message:</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.IllegalAccessException: class pkg1.ReflectiveFail cannot access a member of class pkg2.PackagePrivateImpl with modifiers &quot;public&quot;\n</code></pre>\n"}],"owner":{"account_id":91845,"reputation":258335,"user_id":252000,"accept_rate":95,"display_name":"fredoverflow"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":23352,"favorite_count":0,"down_vote_count":0,"up_vote_count":51,"accepted_answer_id":5260523,"answer_count":9,"score":51,"last_activity_date":1681193924,"creation_date":1299764941,"question_id":5260467,"body_markdown":"Does it make a difference to mark methods as `public` in package-private classes?\r\n\r\n    class SomePackagePrivateClass\r\n    {\r\n        void foo();          // package private method\r\n    \r\n        public void bar();   // public method\r\n    }\r\n\r\nIs there any practical difference in visibility between `foo` and `bar` here?","title":"public methods in package-private classes","body":"<p>Does it make a difference to mark methods as <code>public</code> in package-private classes?</p>\n\n<pre><code>class SomePackagePrivateClass\n{\n    void foo();          // package private method\n\n    public void bar();   // public method\n}\n</code></pre>\n\n<p>Is there any practical difference in visibility between <code>foo</code> and <code>bar</code> here?</p>\n"},{"tags":["java","recursion","minesweeper"],"comments":[{"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"score":0,"creation_date":1497475819,"post_id":44554985,"comment_id":76100456,"body_markdown":"`cells` is a 2D array, but is it square, i.e. same width and height? If not, then why are you checking both `row` and `column` against the same value of `cells.length - 1`? --- Side note: You only have 6 recursive calls, but there are 8 neighboring cells.","body":"<code>cells</code> is a 2D array, but is it square, i.e. same width and height? If not, then why are you checking both <code>row</code> and <code>column</code> against the same value of <code>cells.length - 1</code>? --- Side note: You only have 6 recursive calls, but there are 8 neighboring cells."},{"owner":{"account_id":4567592,"reputation":4316,"user_id":3708208,"accept_rate":75,"display_name":"Simon Schrottner"},"score":0,"creation_date":1497476014,"post_id":44554985,"comment_id":76100534,"body_markdown":"Take a look at your first condition, shouldn&#39;t it be cells[0].length-1 at one place","body":"Take a look at your first condition, shouldn&#39;t it be cells[0].length-1 at one place"}],"answers":[{"comments":[{"owner":{"account_id":1801353,"reputation":81710,"user_id":1639625,"display_name":"tobias_k"},"score":1,"creation_date":1497476116,"post_id":44555054,"comment_id":76100585,"body_markdown":"Didn&#39;t know you could do markup inside code. Besides, you are still missing two of the diagonal neighbours.","body":"Didn&#39;t know you could do markup inside code. Besides, you are still missing two of the diagonal neighbours."}],"tags":[],"owner":{"account_id":26078,"reputation":452381,"user_id":67579,"accept_rate":81,"display_name":"willeM_ Van Onsem"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1497476164,"creation_date":1497475875,"answer_id":44555054,"question_id":44554985,"body_markdown":"That&#39;s not surprisingly: you do a recursive call like:\r\n\r\n    revealCells(cells[row+1][column]);\r\n\r\nThat means that Java will first fetch `cells[row+1][column]`. Now you did not do any bounds checks. The bound check in the method is probably rather useless, since you already got the cell by then, so you know that it is a valid coordinate.\r\n\r\nIn my opinion, you better redesign your system to work with coordinates, instead of cells, and then fetch the cells after the bounds check:\r\n\r\n&lt;pre&gt;&lt;code&gt;public void revealCells(&lt;b&gt;int row, int column&lt;/b&gt;) {\r\n    if (row &amp;lt; 0 || row &lt;b&gt;&amp;gt;=&lt;/b&gt; cells.length|| column &amp;lt; 0 || column &lt;b&gt;&amp;gt;=&lt;/b&gt; cells&lt;b&gt;[0]&lt;/b&gt;.length)\r\n        return;\r\n\r\n    &lt;b&gt;Cell cell = cells[row][column];&lt;/b&gt; // now we are safe, so fetch the cell\r\n    if(cell instanceof MineCell)\r\n        return;   \r\n\r\n    else if(cell.getMineCount() == 0 &amp;&amp; !(cell.isRevealed())){\r\n        cell.reveal();\r\n        // call recursive with coordinates, not cells\r\n        revealCells(&lt;b&gt;row-1,column-1&lt;/b&gt;);\r\n        revealCells(&lt;b&gt;row-1,column&lt;/b&gt;);\r\n        revealCells(&lt;b&gt;row-1,column+1&lt;/b&gt;);\r\n        revealCells(&lt;b&gt;row,column-1&lt;/b&gt;);\r\n        revealCells(&lt;b&gt;row,column+1&lt;/b&gt;);\r\n        revealCells(&lt;b&gt;row+1,column-1&lt;/b&gt;);\r\n        revealCells(&lt;b&gt;row+1,column&lt;/b&gt;);\r\n        revealCells(&lt;b&gt;row+1,column+1&lt;/b&gt;);\r\n    }\r\n}&lt;/code&gt;&lt;/pre&gt;","title":"I cant figure out the minesweeper recursive algorithm","body":"<p>That's not surprisingly: you do a recursive call like:</p>\n\n<pre><code>revealCells(cells[row+1][column]);\n</code></pre>\n\n<p>That means that Java will first fetch <code>cells[row+1][column]</code>. Now you did not do any bounds checks. The bound check in the method is probably rather useless, since you already got the cell by then, so you know that it is a valid coordinate.</p>\n\n<p>In my opinion, you better redesign your system to work with coordinates, instead of cells, and then fetch the cells after the bounds check:</p>\n\n<pre><code>public void revealCells(<b>int row, int column</b>) {\n    if (row &lt; 0 || row <b>&gt;=</b> cells.length|| column &lt; 0 || column <b>&gt;=</b> cells<b>[0]</b>.length)\n        return;\n\n    <b>Cell cell = cells[row][column];</b> // now we are safe, so fetch the cell\n    if(cell instanceof MineCell)\n        return;   \n\n    else if(cell.getMineCount() == 0 && !(cell.isRevealed())){\n        cell.reveal();\n        // call recursive with coordinates, not cells\n        revealCells(<b>row-1,column-1</b>);\n        revealCells(<b>row-1,column</b>);\n        revealCells(<b>row-1,column+1</b>);\n        revealCells(<b>row,column-1</b>);\n        revealCells(<b>row,column+1</b>);\n        revealCells(<b>row+1,column-1</b>);\n        revealCells(<b>row+1,column</b>);\n        revealCells(<b>row+1,column+1</b>);\n    }\n}</code></pre>\n"}],"owner":{"account_id":11104287,"reputation":21,"user_id":8151942,"display_name":"Jack"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3200,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":1,"score":1,"last_activity_date":1681193819,"creation_date":1497475594,"question_id":44554985,"body_markdown":"I cannot figure out the algorithm for revealing empty cells in minesweeper. revealCells is supposed to take a cell, and then check the surrounding cells and reveal them until it finds a mine cell, but for some reason I keep getting an arrayindexoutofbounds exception. Cells is the 2D array of cells in the board. I know I&#39;m not checking for every condition, I just needed to test if it works at all before I added the rest.\r\n\r\n    public void revealCells(Cell cell){\r\n\t\trow = cell.getRow();\r\n\t\tcolumn = cell.getCol();\r\n\t\t\r\n\t\tif (row &lt; 0 || row &gt; cells.length - 1|| column &lt; 0 || column &gt; cells.length - 1) return;\r\n\r\n        else if(cell instanceof MineCell) return;\t\t\r\n\r\n\t\telse if(cell.getMineCount() == 0 &amp;&amp; !(cell.isRevealed())){\r\n\t\t\tcell.reveal();\r\n\t\t\trevealCells(cells[row+1][column]);\r\n\t\t\trevealCells(cells[row][column+1]);\r\n\t\t\trevealCells(cells[row-1][column]);\r\n\t\t\trevealCells(cells[row][column-1]);\r\n\t\t\trevealCells(cells[row+1][column+1]);\r\n\t\t\trevealCells(cells[row-1][column-1]);\r\n\t\t}\r\n\t\telse{\r\n\t\t\treturn;\r\n\t\t}\r\n\t}","title":"I cant figure out the minesweeper recursive algorithm","body":"<p>I cannot figure out the algorithm for revealing empty cells in minesweeper. revealCells is supposed to take a cell, and then check the surrounding cells and reveal them until it finds a mine cell, but for some reason I keep getting an arrayindexoutofbounds exception. Cells is the 2D array of cells in the board. I know I'm not checking for every condition, I just needed to test if it works at all before I added the rest.</p>\n\n<pre><code>public void revealCells(Cell cell){\n    row = cell.getRow();\n    column = cell.getCol();\n\n    if (row &lt; 0 || row &gt; cells.length - 1|| column &lt; 0 || column &gt; cells.length - 1) return;\n\n    else if(cell instanceof MineCell) return;       \n\n    else if(cell.getMineCount() == 0 &amp;&amp; !(cell.isRevealed())){\n        cell.reveal();\n        revealCells(cells[row+1][column]);\n        revealCells(cells[row][column+1]);\n        revealCells(cells[row-1][column]);\n        revealCells(cells[row][column-1]);\n        revealCells(cells[row+1][column+1]);\n        revealCells(cells[row-1][column-1]);\n    }\n    else{\n        return;\n    }\n}\n</code></pre>\n"},{"tags":["java","minecraft","gradlew","minecraft-fabric"],"comments":[{"owner":{"account_id":15178500,"reputation":4190,"user_id":10952503,"display_name":"Elikill58"},"score":0,"creation_date":1681071770,"post_id":75970967,"comment_id":133996094,"body_markdown":"Did you tried `gradle --stop` as told [here](https://github.com/FabricMC/fabric-loom/issues/467) ?","body":"Did you tried <code>gradle --stop</code> as told <a href=\"https://github.com/FabricMC/fabric-loom/issues/467\" rel=\"nofollow noreferrer\">here</a> ?"},{"owner":{"account_id":28246786,"reputation":9,"user_id":21593676,"display_name":"Cat Spongy"},"score":0,"creation_date":1681124464,"post_id":75970967,"comment_id":134001849,"body_markdown":"thank u some much! it has worked!","body":"thank u some much! it has worked!"}],"answers":[{"tags":[],"owner":{"account_id":15178500,"reputation":4190,"user_id":10952503,"display_name":"Elikill58"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681193719,"creation_date":1681193719,"answer_id":75982879,"question_id":75970967,"body_markdown":"As explained [here](https://github.com/FabricMC/fabric-loom/issues/467), you seems to have background process that are using the file. The `ClosedFileSystemException` error means the file is locked. By using this command:\r\n\r\n&gt; `gradle --stop`\r\n\r\nYou will be able to fix it. Now you can run all others commands.","title":"./gradlew genSources failed while setting up fabric enviroment","body":"<p>As explained <a href=\"https://github.com/FabricMC/fabric-loom/issues/467\" rel=\"nofollow noreferrer\">here</a>, you seems to have background process that are using the file. The <code>ClosedFileSystemException</code> error means the file is locked. By using this command:</p>\n<blockquote>\n<p><code>gradle --stop</code></p>\n</blockquote>\n<p>You will be able to fix it. Now you can run all others commands.</p>\n"}],"owner":{"account_id":28246786,"reputation":9,"user_id":21593676,"display_name":"Cat Spongy"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":640,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":1,"score":-1,"last_activity_date":1681193719,"creation_date":1681048707,"question_id":75970967,"body_markdown":"Command: `C:\\Users\\user\\Downloads\\template-mod-template-1.19.3&gt; .\\gradlew genSources --info`\r\n\r\nLog:\r\n```\r\nInitialized native services in: C:\\Users\\user\\.gradle\\native\r\nInitialized jansi services in: C:\\Users\\user\\.gradle\\native\r\nReceived JVM installation metadata from &#39;C:\\Program Files\\Eclipse Adoptium\\jdk-17.0.6.10-hotspot&#39;: {JAVA_HOME=C:\\Program Files\\Eclipse Adoptium\\jdk-17.0.6.10-hotspot, JAVA_VERS\r\nION=17.0.6, JAVA_VENDOR=Eclipse Adoptium, RUNTIME_NAME=OpenJDK Runtime Environment, RUNTIME_VERSION=17.0.6+10, VM_NAME=OpenJDK 64-Bit Server VM, VM_VERSION=17.0.6+10, VM_VENDOR\r\n=Eclipse Adoptium, OS_ARCH=amd64}\r\nThe client will now receive all logging from the daemon (pid: 11684). The daemon log file: C:\\Users\\user\\.gradle\\daemon\\7.6\\daemon-11684.out.log\r\nStarting 6th build in daemon [uptime: 16 mins 22.016 secs, performance: 98%, GC rate: 0.01/s, heap usage: 6% of 1 GiB]\r\nUsing 4 worker leases.                                                                                                \r\nNow considering [C:\\Users\\user\\Downloads\\template-mod-template-1.19.3] as hierarchies to watch                        \r\nWatching the file system is configured to be enabled if available\r\nFile system watching is active\r\nStarting Build\r\nSettings evaluated using settings file &#39;C:\\Users\\user\\Downloads\\template-mod-template-1.19.3\\settings.gradle&#39;.\r\nProjects loaded. Root project using build file &#39;C:\\Users\\user\\Downloads\\template-mod-template-1.19.3\\build.gradle&#39;.\r\nIncluded projects: [root project &#39;template-mod-template-1.19.3&#39;]\r\n\r\n&gt; Configure project :\r\nEvaluating root project &#39;template-mod-template-1.19.3&#39; using build file &#39;C:\\Users\\user\\Downloads\\template-mod-template-1.19.3\\build.gradle&#39;.\r\nFabric Loom: 1.1.12\r\n(kotlinx.metadata.jvm.KotlinClassMetadata) with version (0.5.0) was loaded from (/C:/Users/user/.gradle/caches/jars-9/3d72942eb5e4258ac0ccff67cb261d54/kotlinx-metadata-jvm-0.5.\r\n0.jar)\r\n(org.objectweb.asm.ClassVisitor) with version (9.4) was loaded from (/C:/Users/user/.gradle/caches/jars-9/7aa412e7437c85d3a44974d9a0c03a66/asm-9.4.jar)\r\n(org.objectweb.asm.tree.analysis.Analyzer) with version (9.4) was loaded from (/C:/Users/user/.gradle/caches/jars-9/38635d8db7a37e0b51b8cfee8a405c52/asm-analysis-9.4.jar)      \r\n(org.objectweb.asm.commons.ClassRemapper) with version (9.4) was loaded from (/C:/Users/user/.gradle/caches/jars-9/1f1d14d9d70995a7c16e6a8351e63723/asm-commons-9.4.jar)        \r\n(org.objectweb.asm.tree.ClassNode) with version (9.4) was loaded from (/C:/Users/user/.gradle/caches/jars-9/fe3ea2001351c1699cc0b2b46e4dc874/asm-tree-9.4.jar)\r\n(org.objectweb.asm.util.ASMifier) with version (9.4) was loaded from (/C:/Users/user/.gradle/caches/jars-9/a2459843a6a9b6c2dda5b0fd0bd8e4ba/asm-util-9.4.jar)\r\n(com.fasterxml.jackson.databind.ObjectMapper) with version (2.14.1) was loaded from (/C:/Users/user/.gradle/caches/jars-9/6d9d643e44326546452509c7086d1650/jackson-databind-2.14\r\n.1.jar)\r\n(com.google.gson.Gson) with version (null) was loaded from (/C:/Users/user/.gradle/caches/jars-9/6f7cc274ff93388d5bf1ea9b0a5e5c32/gson-2.10.1.jar)\r\n(com.google.common.base.Preconditions) with version (null) was loaded from (/C:/Users/user/.gradle/caches/jars-9/c1011467fb85a4ac798e2e11cc5ef0e6/guava-31.1-jre.jar)\r\n(org.apache.commons.io.FileUtils) with version (2.11.0) was loaded from (/C:/Users/user/.gradle/caches/jars-9/d5bb6135c7412c8f0c8df61b8284122d/commons-io-2.11.0.jar)\r\nCreating new SharedServiceManager(1790319328)\r\nCreating new SharedServiceManager(1780358931)\r\nFound existing cache lock file, rebuilding loom cache. This may have been caused by a failed or canceled build.\r\n:merging jars\r\n:Extracting server jar from bootstrap\r\n:extracting yarn-1.19.3+build.5-v2.jar\r\nDownloading intermediary from https://maven.fabricmc.net/net/fabricmc/intermediary/1.19.3/intermediary-1.19.3-v2.jar\r\n:merging mappings\r\n:merged mappings in 273.8 ms\r\nClosing SharedServiceManager(1780358931)\r\n\r\nFAILURE: Build failed with an exception.\r\n\r\n* What went wrong:\r\nA problem occurred configuring root project &#39;template-mod-template-1.19.3&#39;.\r\n&gt; Failed to setup Minecraft, java.nio.file.ClosedFileSystemException: null \r\n\r\n* Try:\r\n&gt; Run with --stacktrace option to get the stack trace.\r\n&gt; Run with --debug option to get more log output.\r\n&gt; Run with --scan to get full insights.\r\n\r\n* Get more help at https://help.gradle.org\r\n\r\nBUILD FAILED in 30s\r\nWatched directory hierarchies: []\r\n```\r\n\r\nI tried ./gradlew genSources and it is supposed to auto set up the sources for fabric modding, but it returns me failed message.\r\n\r\nI also tried .\\gradlew genSources but same result and also ./gradlew genSources --info so i got the log.","title":"./gradlew genSources failed while setting up fabric enviroment","body":"<p>Command: <code>C:\\Users\\user\\Downloads\\template-mod-template-1.19.3&gt; .\\gradlew genSources --info</code></p>\n<p>Log:</p>\n<pre><code>Initialized native services in: C:\\Users\\user\\.gradle\\native\nInitialized jansi services in: C:\\Users\\user\\.gradle\\native\nReceived JVM installation metadata from 'C:\\Program Files\\Eclipse Adoptium\\jdk-17.0.6.10-hotspot': {JAVA_HOME=C:\\Program Files\\Eclipse Adoptium\\jdk-17.0.6.10-hotspot, JAVA_VERS\nION=17.0.6, JAVA_VENDOR=Eclipse Adoptium, RUNTIME_NAME=OpenJDK Runtime Environment, RUNTIME_VERSION=17.0.6+10, VM_NAME=OpenJDK 64-Bit Server VM, VM_VERSION=17.0.6+10, VM_VENDOR\n=Eclipse Adoptium, OS_ARCH=amd64}\nThe client will now receive all logging from the daemon (pid: 11684). The daemon log file: C:\\Users\\user\\.gradle\\daemon\\7.6\\daemon-11684.out.log\nStarting 6th build in daemon [uptime: 16 mins 22.016 secs, performance: 98%, GC rate: 0.01/s, heap usage: 6% of 1 GiB]\nUsing 4 worker leases.                                                                                                \nNow considering [C:\\Users\\user\\Downloads\\template-mod-template-1.19.3] as hierarchies to watch                        \nWatching the file system is configured to be enabled if available\nFile system watching is active\nStarting Build\nSettings evaluated using settings file 'C:\\Users\\user\\Downloads\\template-mod-template-1.19.3\\settings.gradle'.\nProjects loaded. Root project using build file 'C:\\Users\\user\\Downloads\\template-mod-template-1.19.3\\build.gradle'.\nIncluded projects: [root project 'template-mod-template-1.19.3']\n\n&gt; Configure project :\nEvaluating root project 'template-mod-template-1.19.3' using build file 'C:\\Users\\user\\Downloads\\template-mod-template-1.19.3\\build.gradle'.\nFabric Loom: 1.1.12\n(kotlinx.metadata.jvm.KotlinClassMetadata) with version (0.5.0) was loaded from (/C:/Users/user/.gradle/caches/jars-9/3d72942eb5e4258ac0ccff67cb261d54/kotlinx-metadata-jvm-0.5.\n0.jar)\n(org.objectweb.asm.ClassVisitor) with version (9.4) was loaded from (/C:/Users/user/.gradle/caches/jars-9/7aa412e7437c85d3a44974d9a0c03a66/asm-9.4.jar)\n(org.objectweb.asm.tree.analysis.Analyzer) with version (9.4) was loaded from (/C:/Users/user/.gradle/caches/jars-9/38635d8db7a37e0b51b8cfee8a405c52/asm-analysis-9.4.jar)      \n(org.objectweb.asm.commons.ClassRemapper) with version (9.4) was loaded from (/C:/Users/user/.gradle/caches/jars-9/1f1d14d9d70995a7c16e6a8351e63723/asm-commons-9.4.jar)        \n(org.objectweb.asm.tree.ClassNode) with version (9.4) was loaded from (/C:/Users/user/.gradle/caches/jars-9/fe3ea2001351c1699cc0b2b46e4dc874/asm-tree-9.4.jar)\n(org.objectweb.asm.util.ASMifier) with version (9.4) was loaded from (/C:/Users/user/.gradle/caches/jars-9/a2459843a6a9b6c2dda5b0fd0bd8e4ba/asm-util-9.4.jar)\n(com.fasterxml.jackson.databind.ObjectMapper) with version (2.14.1) was loaded from (/C:/Users/user/.gradle/caches/jars-9/6d9d643e44326546452509c7086d1650/jackson-databind-2.14\n.1.jar)\n(com.google.gson.Gson) with version (null) was loaded from (/C:/Users/user/.gradle/caches/jars-9/6f7cc274ff93388d5bf1ea9b0a5e5c32/gson-2.10.1.jar)\n(com.google.common.base.Preconditions) with version (null) was loaded from (/C:/Users/user/.gradle/caches/jars-9/c1011467fb85a4ac798e2e11cc5ef0e6/guava-31.1-jre.jar)\n(org.apache.commons.io.FileUtils) with version (2.11.0) was loaded from (/C:/Users/user/.gradle/caches/jars-9/d5bb6135c7412c8f0c8df61b8284122d/commons-io-2.11.0.jar)\nCreating new SharedServiceManager(1790319328)\nCreating new SharedServiceManager(1780358931)\nFound existing cache lock file, rebuilding loom cache. This may have been caused by a failed or canceled build.\n:merging jars\n:Extracting server jar from bootstrap\n:extracting yarn-1.19.3+build.5-v2.jar\nDownloading intermediary from https://maven.fabricmc.net/net/fabricmc/intermediary/1.19.3/intermediary-1.19.3-v2.jar\n:merging mappings\n:merged mappings in 273.8 ms\nClosing SharedServiceManager(1780358931)\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nA problem occurred configuring root project 'template-mod-template-1.19.3'.\n&gt; Failed to setup Minecraft, java.nio.file.ClosedFileSystemException: null \n\n* Try:\n&gt; Run with --stacktrace option to get the stack trace.\n&gt; Run with --debug option to get more log output.\n&gt; Run with --scan to get full insights.\n\n* Get more help at https://help.gradle.org\n\nBUILD FAILED in 30s\nWatched directory hierarchies: []\n</code></pre>\n<p>I tried ./gradlew genSources and it is supposed to auto set up the sources for fabric modding, but it returns me failed message.</p>\n<p>I also tried .\\gradlew genSources but same result and also ./gradlew genSources --info so i got the log.</p>\n"},{"tags":["java","spring","performance","tomcat","java-threads"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":2,"creation_date":1681195891,"post_id":75982846,"comment_id":134012991,"body_markdown":"Split them in different applications/services and deploy seperatly.","body":"Split them in different applications/services and deploy seperatly."}],"owner":{"account_id":13198960,"reputation":41,"user_id":9532751,"display_name":"Raj Talekar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681193416,"creation_date":1681193416,"question_id":75982846,"body_markdown":"We have a critical service which consist of many different APIs. Some of the APIs are more critical then other APIs. We can classify them in 2 different buckets, P0 APIs and P1 APIs.\r\n The issue that I have observed is, when there is an issue with non critical P1 APIs, which leads to increase in latency of all those APIs. It also starts impacting the P0 APIs, we observe increase in number of Http 500. After some investigations, I figured it was because the tomcat executor thread are now more occupied on the P1 APIs as they are latent. This results in P0 APIs waiting more for a tomcat executor threads.\r\n\r\nNow, We can solve this by increasing the tomcat executor thread count (server.tomcat.max-threads). But they will only be utilised when there is a increase in latency across other APIs, and in happy cases many of the threads would sit ideal.\r\n\r\nIs there a way to configure the tomcat threads pool individually for each API path ?\r\nFor Eg:\r\nFor all API path having `/api/p0/*` path will have a different tomcat executor thread pool.\r\nand for all API path having `/api/p1/*` path will have another different tomcat executor thread pool.\r\n\r\nThis will help with isolation and we can make sure that P1 Apis are not impacting P0 APIs. Please do let me know if you need more insights or my description is not enough to understand the problem statement. Will try my best to help you guys with any information needed.\r\n\r\nI tried increasing the number of max threads server.tomcat.max-threads which mitigated the problem. \r\n\r\nAlthough I am looking for a more optimal way which can help me with isolation of various different APIs.","title":"Separating spring tomcat executor threads based on API Path","body":"<p>We have a critical service which consist of many different APIs. Some of the APIs are more critical then other APIs. We can classify them in 2 different buckets, P0 APIs and P1 APIs.\nThe issue that I have observed is, when there is an issue with non critical P1 APIs, which leads to increase in latency of all those APIs. It also starts impacting the P0 APIs, we observe increase in number of Http 500. After some investigations, I figured it was because the tomcat executor thread are now more occupied on the P1 APIs as they are latent. This results in P0 APIs waiting more for a tomcat executor threads.</p>\n<p>Now, We can solve this by increasing the tomcat executor thread count (server.tomcat.max-threads). But they will only be utilised when there is a increase in latency across other APIs, and in happy cases many of the threads would sit ideal.</p>\n<p>Is there a way to configure the tomcat threads pool individually for each API path ?\nFor Eg:\nFor all API path having <code>/api/p0/*</code> path will have a different tomcat executor thread pool.\nand for all API path having <code>/api/p1/*</code> path will have another different tomcat executor thread pool.</p>\n<p>This will help with isolation and we can make sure that P1 Apis are not impacting P0 APIs. Please do let me know if you need more insights or my description is not enough to understand the problem statement. Will try my best to help you guys with any information needed.</p>\n<p>I tried increasing the number of max threads server.tomcat.max-threads which mitigated the problem.</p>\n<p>Although I am looking for a more optimal way which can help me with isolation of various different APIs.</p>\n"},{"tags":["java","gradle","build","fatjar"],"owner":{"account_id":2694478,"reputation":43,"user_id":2326934,"display_name":"Mayank"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681192420,"creation_date":1681192420,"question_id":75982751,"body_markdown":"I am using an old fat jar in my project that uses old version of &quot;com.fasterxml.jackson.core&quot; jar.\r\n\r\nThe problem is that java class loader is failing to load my project with error \r\n&quot;Exception in thread &quot;main&quot; java.lang.NoSuchMethodError: &#39;com.fasterxml.jackson.core.util.JacksonFeatureSet com.fasterxml.jackson.core.JsonParser.getReadCapabilities()&#39;&quot;\r\n\r\nThis is because of old version of faster xml in fat jar. \r\n\r\n\r\nI tried to exclude old version by following code snippets but it does not work. It still injects old version of fasterxml. \r\n\r\n `compile(&#39;OLD FAT JAR DEPENDENCY&#39;) {\r\n        exclude group: &#39;com.fasterxml.jackson.core&#39;\r\n    }`\r\n\r\nCould anyone suggest how to remove dependency from fat jar.\r\n","title":"How to exclude dependency from a Fat Jar that creates version conflicts","body":"<p>I am using an old fat jar in my project that uses old version of &quot;com.fasterxml.jackson.core&quot; jar.</p>\n<p>The problem is that java class loader is failing to load my project with error\n&quot;Exception in thread &quot;main&quot; java.lang.NoSuchMethodError: 'com.fasterxml.jackson.core.util.JacksonFeatureSet com.fasterxml.jackson.core.JsonParser.getReadCapabilities()'&quot;</p>\n<p>This is because of old version of faster xml in fat jar.</p>\n<p>I tried to exclude old version by following code snippets but it does not work. It still injects old version of fasterxml.</p>\n<p><code>compile('OLD FAT JAR DEPENDENCY') { exclude group: 'com.fasterxml.jackson.core' }</code></p>\n<p>Could anyone suggest how to remove dependency from fat jar.</p>\n"},{"tags":["java","os-dependent"],"answers":[{"tags":[],"owner":{"account_id":21517,"reputation":2593,"user_id":52381,"accept_rate":69,"display_name":"K2J"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676393769,"creation_date":1676393769,"answer_id":75450979,"question_id":75450897,"body_markdown":"The reason the code fails on Windows is because the &quot;NativePRNG&quot; algorithm is not available on all platforms, including Windows. This is because &quot;NativePRNG&quot; relies on platform-specific sources of randomness, and the implementation may vary across different operating systems.\r\n\r\nTo run with &quot;NativePRNG&quot; on Windows, you can install the Java Cryptography Extension (JCE) Unlimited Strength Jurisdiction Policy Files, which includes a &quot;NativePRNG&quot; implementation for Windows. Once you have installed the JCE Unlimited Strength Policy Files, you can modify the code to explicitly specify the &quot;NativePRNG&quot; algorithm provider:\r\n\r\n\r\n    import java.security.NoSuchAlgorithmException;\r\n    import java.security.SecureRandom;\r\n    \r\n    public class Main {\r\n        public static void main(String[] args) throws NoSuchAlgorithmException {\r\n            SecureRandom srand = SecureRandom.getInstance(&quot;NativePRNG&quot;, &quot;SUN&quot;);\r\n            System.out.println(srand.nextInt());\r\n        }\r\n    }\r\n\r\n\r\nNote that you should replace &quot;SUN&quot; with the name of the provider that supports the &quot;NativePRNG&quot; algorithm on your specific platform, as different providers may support different algorithms on different platforms.\r\n\r\n\r\n\r\n\r\n","title":"Why does the following SecureRandom NativePRNG fail on windows?","body":"<p>The reason the code fails on Windows is because the &quot;NativePRNG&quot; algorithm is not available on all platforms, including Windows. This is because &quot;NativePRNG&quot; relies on platform-specific sources of randomness, and the implementation may vary across different operating systems.</p>\n<p>To run with &quot;NativePRNG&quot; on Windows, you can install the Java Cryptography Extension (JCE) Unlimited Strength Jurisdiction Policy Files, which includes a &quot;NativePRNG&quot; implementation for Windows. Once you have installed the JCE Unlimited Strength Policy Files, you can modify the code to explicitly specify the &quot;NativePRNG&quot; algorithm provider:</p>\n<pre><code>import java.security.NoSuchAlgorithmException;\nimport java.security.SecureRandom;\n\npublic class Main {\n    public static void main(String[] args) throws NoSuchAlgorithmException {\n        SecureRandom srand = SecureRandom.getInstance(&quot;NativePRNG&quot;, &quot;SUN&quot;);\n        System.out.println(srand.nextInt());\n    }\n}\n</code></pre>\n<p>Note that you should replace &quot;SUN&quot; with the name of the provider that supports the &quot;NativePRNG&quot; algorithm on your specific platform, as different providers may support different algorithms on different platforms.</p>\n"}],"owner":{"account_id":16512026,"reputation":301,"user_id":11930483,"display_name":"Bhaskar13"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":519,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681190042,"creation_date":1676393405,"question_id":75450897,"body_markdown":" \r\n```\r\nimport java.security.NoSuchAlgorithmException;\r\nimport java.security.SecureRandom;\r\n\r\npublic class Main {\r\n    public static void main(String[] args) throws NoSuchAlgorithmException {\r\n        SecureRandom srand = SecureRandom.getInstance(&quot;NativePRNG&quot;);\r\n        System.out.println(srand.nextInt());\r\n    }\r\n}\r\n```\r\nHow to run with NativePRNG on windows?\r\n\r\nUPD:\r\nBy default, in Java 10+, `\\&lt;JDK&gt;\\conf\\security\\java.security` file, \r\n`crypto.policy=unlimited`. sp nothing need to be changed for Java 10+ in java.security file. \r\nAnd to use `NativePRNG` algorithm, we can change it to `Windows-PRNG`.\r\n```\r\nSecureRandom srand = SecureRandom.getInstance(&quot;Windows-PRNG&quot;);\r\nSystem.out.println(srand.nextInt());\r\n```","title":"Why does the following SecureRandom NativePRNG fail on windows?","body":"<pre><code>import java.security.NoSuchAlgorithmException;\nimport java.security.SecureRandom;\n\npublic class Main {\n    public static void main(String[] args) throws NoSuchAlgorithmException {\n        SecureRandom srand = SecureRandom.getInstance(&quot;NativePRNG&quot;);\n        System.out.println(srand.nextInt());\n    }\n}\n</code></pre>\n<p>How to run with NativePRNG on windows?</p>\n<p>UPD:\nBy default, in Java 10+, <code>\\&lt;JDK&gt;\\conf\\security\\java.security</code> file,\n<code>crypto.policy=unlimited</code>. sp nothing need to be changed for Java 10+ in java.security file.\nAnd to use <code>NativePRNG</code> algorithm, we can change it to <code>Windows-PRNG</code>.</p>\n<pre><code>SecureRandom srand = SecureRandom.getInstance(&quot;Windows-PRNG&quot;);\nSystem.out.println(srand.nextInt());\n</code></pre>\n"},{"tags":["java","nullpointerexception"],"comments":[{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":1,"creation_date":1681191608,"post_id":75982576,"comment_id":134012310,"body_markdown":"If &quot;validation works fine&quot;, shouldn&#39;t you be getting e.g., a [`ConstraintViolationException`](https://jakarta.ee/specifications/bean-validation/3.0/apidocs/jakarta/validation/constraintviolationexception) instead of a `NullPointerException`? If yes, then note `ConstraintViolationException` has a set of `ConstraintViolation`s that you can query.","body":"If &quot;validation works fine&quot;, shouldn&#39;t you be getting e.g., a <a href=\"https://jakarta.ee/specifications/bean-validation/3.0/apidocs/jakarta/validation/constraintviolationexception\" rel=\"nofollow noreferrer\"><code>ConstraintViolationException</code></a> instead of a <code>NullPointerException</code>? If yes, then note <code>ConstraintViolationException</code> has a set of <code>ConstraintViolation</code>s that you can query."},{"owner":{"account_id":22866981,"reputation":131,"user_id":17010647,"display_name":"Ksu"},"score":0,"creation_date":1681197559,"post_id":75982576,"comment_id":134013319,"body_markdown":"https://www.baeldung.com/spring-valid-vs-validated\n\nhttps://www.baeldung.com/spring-boot-bean-validation","body":"<a href=\"https://www.baeldung.com/spring-valid-vs-validated\" rel=\"nofollow noreferrer\">baeldung.com/spring-valid-vs-validated</a>  <a href=\"https://www.baeldung.com/spring-boot-bean-validation\" rel=\"nofollow noreferrer\">baeldung.com/spring-boot-bean-validation</a>"}],"owner":{"account_id":4602377,"reputation":2179,"user_id":3766129,"accept_rate":38,"display_name":"MMMMS"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681189855,"creation_date":1681189855,"question_id":75982576,"body_markdown":"I have a Poja class,\r\n\r\n    Class Emp{\r\n    @NotNull(message=&quot;id should not be null&quot;)\r\n    private int id;\r\n    @NotNull(message=&quot;name should not be null&quot;)\r\n    private String name;\r\n    //getter\r\n    //setter\r\n    }\r\n\r\n    class MyActionClass{\r\n    public getRequestForm(String inputJsonString){\r\n    //id is null in above inputJsonString\r\n    try{\r\n      Emp empInput = MyConvertClass.jsonToObject(inputJsonString);\r\n    }\r\n    catch(Exception e){\r\n    system.println(e.getMessage())\r\n    }\r\n    }\r\n\r\n}\r\n\r\nValidation works fine and printing NullPiointerException. But I want to display the message in exception like **id should not be null** If id is null.\r\n**name should not be null** if name is null.\r\n\r\nHow to do using javax.validation?\r\n\r\n","title":"Javax @NotNull message print in Exception","body":"<p>I have a Poja class,</p>\n<pre><code>Class Emp{\n@NotNull(message=&quot;id should not be null&quot;)\nprivate int id;\n@NotNull(message=&quot;name should not be null&quot;)\nprivate String name;\n//getter\n//setter\n}\n\nclass MyActionClass{\npublic getRequestForm(String inputJsonString){\n//id is null in above inputJsonString\ntry{\n  Emp empInput = MyConvertClass.jsonToObject(inputJsonString);\n}\ncatch(Exception e){\nsystem.println(e.getMessage())\n}\n}\n</code></pre>\n<p>}</p>\n<p>Validation works fine and printing NullPiointerException. But I want to display the message in exception like <strong>id should not be null</strong> If id is null.\n<strong>name should not be null</strong> if name is null.</p>\n<p>How to do using javax.validation?</p>\n"},{"tags":["java","corda"],"owner":{"account_id":28271481,"reputation":1,"user_id":21614590,"display_name":"Kumel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681189445,"creation_date":1681189445,"question_id":75982549,"body_markdown":"\r\nSLF4J: Class path contains multiple SLF4J bindings.\r\nSLF4J: Found binding in [jar:file:/home/cc-dev/.gradle/caches/modules-2/files-2.1/org.apache.logging.log4j/log4j-slf4j-impl/2.17.1/84692d456bcce689355d33d68167875e486954dd/log4j-slf4j-impl-2.17.1.jar!/org/slf4j/impl/StaticLoggerBinder.class]\r\nSLF4J: Found binding in [jar:file:/home/cc-dev/.gradle/caches/modules-2/files-2.1/ch.qos.logback/logback-classic/1.2.3/7c4f3c474fb2c041d8028740440937705ebb473a/logback-classic-1.2.3.jar!/org/slf4j/impl/StaticLoggerBinder.class]\r\nSLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation.\r\nSLF4J: Actual binding is of type [org.apache.logging.slf4j.Log4jLoggerFactory]\r\nException in thread &quot;main&quot; java.lang.IllegalArgumentException: LoggerFactory is not a Logback LoggerContext but Logback is on the classpath. Either remove Logback or the competing implementation (class org.apache.logging.slf4j.Log4jLoggerFactory loaded from file:/home/cc-dev/.gradle/caches/modules-2/files-2.1/org.apache.logging.log4j/log4j-slf4j-impl/2.17.1/84692d456bcce689355d33d68167875e486954dd/log4j-slf4j-impl-2.17.1.jar). If you are using WebLogic you will need to add &#39;org.slf4j&#39; to prefer-application-packages in WEB-INF/weblogic.xml: org.apache.logging.slf4j.Log4jLoggerFactory\r\n        at org.springframework.util.Assert.instanceCheckFailed(Assert.java:637)\r\n        at org.springframework.util.Assert.isInstanceOf(Assert.java:537)\r\n        at org.springframework.boot.logging.logback.LogbackLoggingSystem.getLoggerContext(LogbackLoggingSystem.java:274)\r\n        at org.springframework.boot.logging.logback.LogbackLoggingSystem.beforeInitialize(LogbackLoggingSystem.java:99)\r\n        at org.springframework.boot.context.logging.LoggingApplicationListener.onApplicationStartingEvent(LoggingApplicationListener.java:191)\r\n        at org.springframework.boot.context.logging.LoggingApplicationListener.onApplicationEvent(LoggingApplicationListener.java:170)\r\n        at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:172)\r\n        at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:165)\r\n        at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:139)\r\n        at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:127)\r\n        at org.springframework.boot.context.event.EventPublishingRunListener.starting(EventPublishingRunListener.java:68)\r\n        at org.springframework.boot.SpringApplicationRunListeners.starting(SpringApplicationRunListeners.java:48)\r\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:313)\r\n        at net.corda.samples.example.webserver.Starter.main(Starter.java:21)\r\n```\r\n//gradle file\r\nbuildscript {//properties that you need to build the project\r\n    Properties constants = new Properties()\r\n    file(&quot;$projectDir/../constants.properties&quot;).withInputStream { constants.load(it) }\r\n\r\n    ext {\r\n        corda_release_group = constants.getProperty(&quot;cordaReleaseGroup&quot;)\r\n        corda_core_release_group =  constants.getProperty(&quot;cordaCoreReleaseGroup&quot;)\r\n        corda_release_version = constants.getProperty(&quot;cordaVersion&quot;)\r\n        corda_core_release_version = constants.getProperty(&quot;cordaCoreVersion&quot;)\r\n        corda_gradle_plugins_version = constants.getProperty(&quot;gradlePluginsVersion&quot;)\r\n        kotlin_version = constants.getProperty(&quot;kotlinVersion&quot;)\r\n        junit_version = constants.getProperty(&quot;junitVersion&quot;)\r\n        quasar_version = constants.getProperty(&quot;quasarVersion&quot;)\r\n        log4j_version = constants.getProperty(&quot;log4jVersion&quot;)\r\n        slf4j_version = constants.getProperty(&quot;slf4jVersion&quot;)\r\n        corda_platform_version = constants.getProperty(&quot;platformVersion&quot;).toInteger()\r\n        //springboot\r\n        spring_boot_version = &#39;2.0.2.RELEASE&#39;\r\n        spring_boot_gradle_plugin_version = &#39;2.0.2.RELEASE&#39;\r\n    }\r\n\r\n    repositories {\r\n        mavenLocal()\r\n        mavenCentral()\r\n\r\n        maven { url &#39;https://software.r3.com/artifactory/corda-releases&#39; }\r\n    }\r\n\r\n    dependencies {\r\n        classpath &quot;net.corda.plugins:cordapp:$corda_gradle_plugins_version&quot;\r\n        classpath &quot;net.corda.plugins:cordformation:$corda_gradle_plugins_version&quot;\r\n        classpath &quot;net.corda.plugins:quasar-utils:$corda_gradle_plugins_version&quot;\r\n        classpath &quot;org.springframework.boot:spring-boot-gradle-plugin:$spring_boot_gradle_plugin_version&quot;\r\n    }\r\n}\r\n\r\nallprojects {//Properties that you need to compile your project (The application)\r\n    apply from: &quot;${rootProject.projectDir}/repositories.gradle&quot;\r\n    apply plugin: &#39;java&#39;\r\n\r\n    repositories {\r\n        mavenLocal()\r\n        mavenCentral()\r\n        maven { url &#39;https://software.r3.com/artifactory/corda&#39; }\r\n        maven { url &#39;https://jitpack.io&#39; }\r\n    }\r\n\r\n    tasks.withType(JavaCompile) {\r\n        options.compilerArgs &lt;&lt; &quot;-parameters&quot; // Required by Corda&#39;s serialisation framework.\r\n    }\r\n\r\n    jar {\r\n        // This makes the JAR&#39;s SHA-256 hash repeatable.\r\n        preserveFileTimestamps = false\r\n        reproducibleFileOrder = true\r\n        duplicatesStrategy = DuplicatesStrategy.EXCLUDE\r\n    }\r\n}\r\n\r\napply plugin: &#39;net.corda.plugins.cordapp&#39;\r\napply plugin: &#39;net.corda.plugins.cordformation&#39;\r\napply plugin: &#39;net.corda.plugins.quasar-utils&#39;\r\n\r\nsourceSets {\r\n    main {\r\n        resources {\r\n            srcDir rootProject.file(&quot;config/dev&quot;)\r\n        }\r\n    }\r\n}\r\n//Module dependencies\r\ndependencies {\r\n    // Corda dependencies.\r\n    cordaCompile &quot;$corda_core_release_group:corda-core:$corda_core_release_version&quot;\r\n    cordaCompile &quot;$corda_release_group:corda-node-api:$corda_release_version&quot;\r\n    cordaRuntime &quot;$corda_release_group:corda:$corda_release_version&quot;\r\n\r\n    // CorDapp dependencies.\r\n    cordapp project(&quot;:workflows&quot;)\r\n    cordapp project(&quot;:contracts&quot;)\r\n\r\n    cordaCompile &quot;org.apache.logging.log4j:log4j-slf4j-impl:${log4j_version}&quot;\r\n    cordaCompile &quot;org.apache.logging.log4j:log4j-web:${log4j_version}&quot;\r\n    cordaCompile &quot;org.slf4j:jul-to-slf4j:$slf4j_version&quot;\r\n    cordaDriver &quot;net.corda:corda-shell:4.10&quot;\r\n\r\n}\r\n\r\n//Task to deploy the nodes in order to bootstrap a network\r\ntask deployNodes(type: net.corda.plugins.Cordform, dependsOn: [&#39;jar&#39;]) {\r\n\r\n    /* This property will load the CorDapps to each of the node by default, including the Notary. You can find them\r\n     * in the cordapps folder of the node at build/nodes/Notary/cordapps. However, the notary doesn&#39;t really understand\r\n     * the notion of cordapps. In production, Notary does not need cordapps as well. This is just a short cut to load\r\n     * the Corda network bootstrapper.\r\n     */\r\n    nodeDefaults {\r\n        projectCordapp {\r\n            deploy = false\r\n        }\r\n        cordapp project(&#39;:contracts&#39;)\r\n        cordapp project(&#39;:workflows&#39;)\r\n        runSchemaMigration = true //This configuration is for any CorDapps with custom schema, We will leave this as true to avoid\r\n        //problems for developers who are not familiar with Corda. If you are not using custom schemas, you can change\r\n        //it to false for quicker project compiling time.\r\n    }\r\n    node {\r\n        name &quot;O=Notary,L=London,C=GB&quot;\r\n        notary = [validating : false]\r\n        p2pPort 10002\r\n        rpcSettings {\r\n            address(&quot;localhost:10003&quot;)\r\n            adminAddress(&quot;localhost:10043&quot;)\r\n        }\r\n    }\r\n    node {\r\n        name &quot;O=PartyA,L=London,C=GB&quot;\r\n        p2pPort 10005\r\n        rpcSettings {\r\n            address(&quot;localhost:10006&quot;)\r\n            adminAddress(&quot;localhost:10046&quot;)\r\n        }\r\n        rpcUsers = [[ user: &quot;user1&quot;, &quot;password&quot;: &quot;test&quot;, &quot;permissions&quot;: [&quot;ALL&quot;]]]\r\n    }\r\n    node {\r\n        name &quot;O=PartyB,L=New York,C=US&quot;\r\n        p2pPort 10008\r\n        rpcSettings {\r\n            address(&quot;localhost:10009&quot;)\r\n            adminAddress(&quot;localhost:10049&quot;)\r\n        }\r\n        rpcUsers = [[ user: &quot;user1&quot;, &quot;password&quot;: &quot;test&quot;, &quot;permissions&quot;: [&quot;ALL&quot;]]]\r\n    }\r\n}\r\n\r\n```","title":"I am getting started with Corda5, when I execute the command &quot;./gradlew runPartyAServer&quot;, throws SLF4J: Class path contains multiple SLF4J bindings","body":"<p>SLF4J: Class path contains multiple SLF4J bindings.\nSLF4J: Found binding in [jar:file:/home/cc-dev/.gradle/caches/modules-2/files-2.1/org.apache.logging.log4j/log4j-slf4j-impl/2.17.1/84692d456bcce689355d33d68167875e486954dd/log4j-slf4j-impl-2.17.1.jar!/org/slf4j/impl/StaticLoggerBinder.class]\nSLF4J: Found binding in [jar:file:/home/cc-dev/.gradle/caches/modules-2/files-2.1/ch.qos.logback/logback-classic/1.2.3/7c4f3c474fb2c041d8028740440937705ebb473a/logback-classic-1.2.3.jar!/org/slf4j/impl/StaticLoggerBinder.class]\nSLF4J: See <a href=\"http://www.slf4j.org/codes.html#multiple_bindings\" rel=\"nofollow noreferrer\">http://www.slf4j.org/codes.html#multiple_bindings</a> for an explanation.\nSLF4J: Actual binding is of type [org.apache.logging.slf4j.Log4jLoggerFactory]\nException in thread &quot;main&quot; java.lang.IllegalArgumentException: LoggerFactory is not a Logback LoggerContext but Logback is on the classpath. Either remove Logback or the competing implementation (class org.apache.logging.slf4j.Log4jLoggerFactory loaded from file:/home/cc-dev/.gradle/caches/modules-2/files-2.1/org.apache.logging.log4j/log4j-slf4j-impl/2.17.1/84692d456bcce689355d33d68167875e486954dd/log4j-slf4j-impl-2.17.1.jar). If you are using WebLogic you will need to add 'org.slf4j' to prefer-application-packages in WEB-INF/weblogic.xml: org.apache.logging.slf4j.Log4jLoggerFactory\nat org.springframework.util.Assert.instanceCheckFailed(Assert.java:637)\nat org.springframework.util.Assert.isInstanceOf(Assert.java:537)\nat org.springframework.boot.logging.logback.LogbackLoggingSystem.getLoggerContext(LogbackLoggingSystem.java:274)\nat org.springframework.boot.logging.logback.LogbackLoggingSystem.beforeInitialize(LogbackLoggingSystem.java:99)\nat org.springframework.boot.context.logging.LoggingApplicationListener.onApplicationStartingEvent(LoggingApplicationListener.java:191)\nat org.springframework.boot.context.logging.LoggingApplicationListener.onApplicationEvent(LoggingApplicationListener.java:170)\nat org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:172)\nat org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:165)\nat org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:139)\nat org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:127)\nat org.springframework.boot.context.event.EventPublishingRunListener.starting(EventPublishingRunListener.java:68)\nat org.springframework.boot.SpringApplicationRunListeners.starting(SpringApplicationRunListeners.java:48)\nat org.springframework.boot.SpringApplication.run(SpringApplication.java:313)\nat net.corda.samples.example.webserver.Starter.main(Starter.java:21)</p>\n<pre><code>//gradle file\nbuildscript {//properties that you need to build the project\n    Properties constants = new Properties()\n    file(&quot;$projectDir/../constants.properties&quot;).withInputStream { constants.load(it) }\n\n    ext {\n        corda_release_group = constants.getProperty(&quot;cordaReleaseGroup&quot;)\n        corda_core_release_group =  constants.getProperty(&quot;cordaCoreReleaseGroup&quot;)\n        corda_release_version = constants.getProperty(&quot;cordaVersion&quot;)\n        corda_core_release_version = constants.getProperty(&quot;cordaCoreVersion&quot;)\n        corda_gradle_plugins_version = constants.getProperty(&quot;gradlePluginsVersion&quot;)\n        kotlin_version = constants.getProperty(&quot;kotlinVersion&quot;)\n        junit_version = constants.getProperty(&quot;junitVersion&quot;)\n        quasar_version = constants.getProperty(&quot;quasarVersion&quot;)\n        log4j_version = constants.getProperty(&quot;log4jVersion&quot;)\n        slf4j_version = constants.getProperty(&quot;slf4jVersion&quot;)\n        corda_platform_version = constants.getProperty(&quot;platformVersion&quot;).toInteger()\n        //springboot\n        spring_boot_version = '2.0.2.RELEASE'\n        spring_boot_gradle_plugin_version = '2.0.2.RELEASE'\n    }\n\n    repositories {\n        mavenLocal()\n        mavenCentral()\n\n        maven { url 'https://software.r3.com/artifactory/corda-releases' }\n    }\n\n    dependencies {\n        classpath &quot;net.corda.plugins:cordapp:$corda_gradle_plugins_version&quot;\n        classpath &quot;net.corda.plugins:cordformation:$corda_gradle_plugins_version&quot;\n        classpath &quot;net.corda.plugins:quasar-utils:$corda_gradle_plugins_version&quot;\n        classpath &quot;org.springframework.boot:spring-boot-gradle-plugin:$spring_boot_gradle_plugin_version&quot;\n    }\n}\n\nallprojects {//Properties that you need to compile your project (The application)\n    apply from: &quot;${rootProject.projectDir}/repositories.gradle&quot;\n    apply plugin: 'java'\n\n    repositories {\n        mavenLocal()\n        mavenCentral()\n        maven { url 'https://software.r3.com/artifactory/corda' }\n        maven { url 'https://jitpack.io' }\n    }\n\n    tasks.withType(JavaCompile) {\n        options.compilerArgs &lt;&lt; &quot;-parameters&quot; // Required by Corda's serialisation framework.\n    }\n\n    jar {\n        // This makes the JAR's SHA-256 hash repeatable.\n        preserveFileTimestamps = false\n        reproducibleFileOrder = true\n        duplicatesStrategy = DuplicatesStrategy.EXCLUDE\n    }\n}\n\napply plugin: 'net.corda.plugins.cordapp'\napply plugin: 'net.corda.plugins.cordformation'\napply plugin: 'net.corda.plugins.quasar-utils'\n\nsourceSets {\n    main {\n        resources {\n            srcDir rootProject.file(&quot;config/dev&quot;)\n        }\n    }\n}\n//Module dependencies\ndependencies {\n    // Corda dependencies.\n    cordaCompile &quot;$corda_core_release_group:corda-core:$corda_core_release_version&quot;\n    cordaCompile &quot;$corda_release_group:corda-node-api:$corda_release_version&quot;\n    cordaRuntime &quot;$corda_release_group:corda:$corda_release_version&quot;\n\n    // CorDapp dependencies.\n    cordapp project(&quot;:workflows&quot;)\n    cordapp project(&quot;:contracts&quot;)\n\n    cordaCompile &quot;org.apache.logging.log4j:log4j-slf4j-impl:${log4j_version}&quot;\n    cordaCompile &quot;org.apache.logging.log4j:log4j-web:${log4j_version}&quot;\n    cordaCompile &quot;org.slf4j:jul-to-slf4j:$slf4j_version&quot;\n    cordaDriver &quot;net.corda:corda-shell:4.10&quot;\n\n}\n\n//Task to deploy the nodes in order to bootstrap a network\ntask deployNodes(type: net.corda.plugins.Cordform, dependsOn: ['jar']) {\n\n    /* This property will load the CorDapps to each of the node by default, including the Notary. You can find them\n     * in the cordapps folder of the node at build/nodes/Notary/cordapps. However, the notary doesn't really understand\n     * the notion of cordapps. In production, Notary does not need cordapps as well. This is just a short cut to load\n     * the Corda network bootstrapper.\n     */\n    nodeDefaults {\n        projectCordapp {\n            deploy = false\n        }\n        cordapp project(':contracts')\n        cordapp project(':workflows')\n        runSchemaMigration = true //This configuration is for any CorDapps with custom schema, We will leave this as true to avoid\n        //problems for developers who are not familiar with Corda. If you are not using custom schemas, you can change\n        //it to false for quicker project compiling time.\n    }\n    node {\n        name &quot;O=Notary,L=London,C=GB&quot;\n        notary = [validating : false]\n        p2pPort 10002\n        rpcSettings {\n            address(&quot;localhost:10003&quot;)\n            adminAddress(&quot;localhost:10043&quot;)\n        }\n    }\n    node {\n        name &quot;O=PartyA,L=London,C=GB&quot;\n        p2pPort 10005\n        rpcSettings {\n            address(&quot;localhost:10006&quot;)\n            adminAddress(&quot;localhost:10046&quot;)\n        }\n        rpcUsers = [[ user: &quot;user1&quot;, &quot;password&quot;: &quot;test&quot;, &quot;permissions&quot;: [&quot;ALL&quot;]]]\n    }\n    node {\n        name &quot;O=PartyB,L=New York,C=US&quot;\n        p2pPort 10008\n        rpcSettings {\n            address(&quot;localhost:10009&quot;)\n            adminAddress(&quot;localhost:10049&quot;)\n        }\n        rpcUsers = [[ user: &quot;user1&quot;, &quot;password&quot;: &quot;test&quot;, &quot;permissions&quot;: [&quot;ALL&quot;]]]\n    }\n}\n\n</code></pre>\n"},{"tags":["java","spring","functional-programming","spring-webflux","reactive"],"answers":[{"comments":[{"owner":{"account_id":446675,"reputation":3537,"user_id":839851,"accept_rate":80,"display_name":"Doug Kress"},"score":1,"creation_date":1680794875,"post_id":69252695,"comment_id":133961320,"body_markdown":"I think I&#39;m missing something. the `.flatMap(provideCart(...))` I understand - but immediately following, it _seems_ like flatMap(x -&gt; x) shouldn&#39;t be there, and the following `map(x -&gt; x)` doesn&#39;t _do_ anything. Can you explain those a bit?","body":"I think I&#39;m missing something. the <code>.flatMap(provideCart(...))</code> I understand - but immediately following, it <i>seems</i> like flatMap(x -&gt; x) shouldn&#39;t be there, and the following <code>map(x -&gt; x)</code> doesn&#39;t <i>do</i> anything. Can you explain those a bit?"},{"owner":{"account_id":3583455,"reputation":1884,"user_id":2991105,"display_name":"Erunafailaro"},"score":1,"creation_date":1681189380,"post_id":69252695,"comment_id":134012086,"body_markdown":"I removed those lines. you are right, they don&#39;t make sense. At least the `.flatMap(cartres -&gt; cartres)` was taken over from the initial question.","body":"I removed those lines. you are right, they don&#39;t make sense. At least the <code>.flatMap(cartres -&gt; cartres)</code> was taken over from the initial question."}],"tags":[],"owner":{"account_id":3583455,"reputation":1884,"user_id":2991105,"display_name":"Erunafailaro"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681189322,"creation_date":1632132867,"answer_id":69252695,"question_id":55971198,"body_markdown":"I understand that there is a complex if-else-logic that you have to implement with a reactive chain with Spring WebFlux invocations of `.map()`, `.flatMap()` or `defaultIfEmpty()`.\r\n\r\nThese reactive operators can&#39;t always replace complex if-else-logic.\r\n\r\nImplementing if-else-decisions must be done inside your `.map()` or `.flatMap()` handlers.  \r\n\r\nIn your case, you could implement a `java.util.Function&lt;&gt;` or a simple method for each step 1..8\r\n\r\nA first example with a function that provides you with a cart by loading it from the repo or by creating a new one can be seen below.\r\n\r\nFurthermore, it shows how you can use the `zipWith()` operator to add more data to the reactive chain.\r\n\r\nHere, the existence of the product in the database is checked and the result is passed as a boolean downstream.\r\n\r\nBased on this boolean, you can use an if-else-statement to either return the existing product or to create a new one.\r\n\r\n\r\n\r\n```lang-java\r\n\r\n    public Mono&lt;Product&gt; createProduct(final Tuple2&lt;String, Product&gt; tuple2) {\r\n        final Product productDTO = tuple2.getT2();\r\n        return Mono.just(tuple2.getT1())\r\n                //   .map(cartRepository::findById)\r\n                //           .defaultIfEmpty(cartRepository.save(\r\n                //               cart.builder()\r\n                //                   .id(tuple2.getT1())\r\n                //                   .build()))\r\n                .flatMap(provideCart(tuple2)) // see implemented method further below\r\n\r\n                .zipWith(productRepository.existsById(productDTO.getId()))\r\n                .flatMap(maybeCreateProduct(productDTO)); // see implemented method further below\r\n    }\r\n\r\n    private Function&lt;String, Mono&lt;Cart&gt;&gt; provideCart(final Tuple2&lt;String, Product&gt; tuple2) {\r\n        return id -&gt; cartRepository.findById(id)\r\n                .switchIfEmpty(cartRepository.save(\r\n                        Cart.builder()\r\n                                .id(tuple2.getT1())\r\n                                .build()));\r\n    }\r\n\r\n    private Function&lt;Tuple2&lt;Cart, Boolean&gt;, Mono&lt;Product&gt;&gt; maybeCreateProduct(Product productDTO) {\r\n        return cartresAndProductExists -&gt; {\r\n            Cart cart = cartresAndProductExists.getT1();\r\n            Boolean productExists = cartresAndProductExists.getT2();\r\n            if (productExists) {\r\n                return productRepository.findById(productDTO.getProductId())\r\n            } else {\r\n                return productRepository.save(Product.builder()\r\n                        .id(&quot;1234&quot;)\r\n                        .productId(productDTO.getProductId())\r\n                        .productName(productDTO.getProductName())\r\n                        .build());\r\n            }\r\n        };\r\n    }\r\n\r\n```\r\n\r\nOne has to be careful to keep the code readable and to avoid an endless chain of reactive steps. \r\n\r\nExtract complex steps into separate methods and maybe even rethink the process in the first place to come to a more simple and streamlined solution","title":"How to write complex code with multiple if else in functional reactive java using spring webflux","body":"<p>I understand that there is a complex if-else-logic that you have to implement with a reactive chain with Spring WebFlux invocations of <code>.map()</code>, <code>.flatMap()</code> or <code>defaultIfEmpty()</code>.</p>\n<p>These reactive operators can't always replace complex if-else-logic.</p>\n<p>Implementing if-else-decisions must be done inside your <code>.map()</code> or <code>.flatMap()</code> handlers.</p>\n<p>In your case, you could implement a <code>java.util.Function&lt;&gt;</code> or a simple method for each step 1..8</p>\n<p>A first example with a function that provides you with a cart by loading it from the repo or by creating a new one can be seen below.</p>\n<p>Furthermore, it shows how you can use the <code>zipWith()</code> operator to add more data to the reactive chain.</p>\n<p>Here, the existence of the product in the database is checked and the result is passed as a boolean downstream.</p>\n<p>Based on this boolean, you can use an if-else-statement to either return the existing product or to create a new one.</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n    public Mono&lt;Product&gt; createProduct(final Tuple2&lt;String, Product&gt; tuple2) {\n        final Product productDTO = tuple2.getT2();\n        return Mono.just(tuple2.getT1())\n                //   .map(cartRepository::findById)\n                //           .defaultIfEmpty(cartRepository.save(\n                //               cart.builder()\n                //                   .id(tuple2.getT1())\n                //                   .build()))\n                .flatMap(provideCart(tuple2)) // see implemented method further below\n\n                .zipWith(productRepository.existsById(productDTO.getId()))\n                .flatMap(maybeCreateProduct(productDTO)); // see implemented method further below\n    }\n\n    private Function&lt;String, Mono&lt;Cart&gt;&gt; provideCart(final Tuple2&lt;String, Product&gt; tuple2) {\n        return id -&gt; cartRepository.findById(id)\n                .switchIfEmpty(cartRepository.save(\n                        Cart.builder()\n                                .id(tuple2.getT1())\n                                .build()));\n    }\n\n    private Function&lt;Tuple2&lt;Cart, Boolean&gt;, Mono&lt;Product&gt;&gt; maybeCreateProduct(Product productDTO) {\n        return cartresAndProductExists -&gt; {\n            Cart cart = cartresAndProductExists.getT1();\n            Boolean productExists = cartresAndProductExists.getT2();\n            if (productExists) {\n                return productRepository.findById(productDTO.getProductId())\n            } else {\n                return productRepository.save(Product.builder()\n                        .id(&quot;1234&quot;)\n                        .productId(productDTO.getProductId())\n                        .productName(productDTO.getProductName())\n                        .build());\n            }\n        };\n    }\n\n</code></pre>\n<p>One has to be careful to keep the code readable and to avoid an endless chain of reactive steps.</p>\n<p>Extract complex steps into separate methods and maybe even rethink the process in the first place to come to a more simple and streamlined solution</p>\n"},{"tags":[],"owner":{"account_id":24934734,"reputation":36,"user_id":18801459,"display_name":"Unbreathable"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1673126241,"creation_date":1673126241,"answer_id":75043847,"question_id":55971198,"body_markdown":"I know this isn&#39;t the best way of handling complex logic, but it&#39;s how I&#39;ve been doing it for basically all my time when developing using Spring WebFlux.\r\n\r\nThe problem with if-else logic is that you can&#39;t exit out of the reactive chain. If you return something in a `map` call it just gets thrown into the next mapper. The only solution I see to solve this problem is using exceptions to escape the reactive chain.\r\n\r\nThat&#39;s why I extended the `Exception` class and created `CustomException`:\r\n``` lang-java\r\npublic class CustomException extends Exception {\r\n    public CustomException(String s) {\r\n        super(s);\r\n    }\r\n}\r\n```\r\n\r\nWe can now use our `CustomException` to implement complex if-else logic by just throwing errors and catching them at the end of the reactive chain.\r\n\r\nFor this example I&#39;m just gonna use a simple login endpoint to demonstrate how to use it.\r\n\r\nLet&#39;s first create a `LoginForm` record to receive the request body.\r\n``` lang-java\r\npublic record LoginForm(String username, String password) {}\r\n```\r\n\r\nNow let&#39;s implement a simple login endpoint with a `AccountRepository` and then creating a session using the &#39;SessionRepository&#39; (Both of these repositories aren&#39;t implemented, just imagine they exist).\r\n\r\n``` lang-java\r\n@PostMapping(&quot;/login&quot;)\r\npublic Mono&lt;String&gt; logIn(@RequestBody LoginForm loginForm) {\r\n\r\n    // Get the account using the username\r\n    return accountRepository.getAccountByUsername(loginForm.username()).flatMap(account -&gt; {\r\n        \r\n        // Check password\r\n        if(!account.getPassword().equals(loginForm.password()) {\r\n\r\n            // Return &quot;Login failed!&quot; using the CustomException we created\r\n            return Mono.error(new CustomException(&quot;Login failed!&quot;));\r\n        }\r\n        \r\n        // Create session\r\n        return sessionRepository.save(new Session(account.getId(), randomToken());\r\n    }).map(session -&gt; &quot;Login successful! &quot; + session.getToken())\r\n        .onErrorResume(CustomException.class, e -&gt; Mono.just(e.getMessage()))\r\n        .onErrorReturn(&quot;Server error!&quot;);\r\n}\r\n```\r\n\r\nI hope that those who looked at this answer could understand how I implemented some if-else logic in this example. If you have any additions please comment below it.","title":"How to write complex code with multiple if else in functional reactive java using spring webflux","body":"<p>I know this isn't the best way of handling complex logic, but it's how I've been doing it for basically all my time when developing using Spring WebFlux.</p>\n<p>The problem with if-else logic is that you can't exit out of the reactive chain. If you return something in a <code>map</code> call it just gets thrown into the next mapper. The only solution I see to solve this problem is using exceptions to escape the reactive chain.</p>\n<p>That's why I extended the <code>Exception</code> class and created <code>CustomException</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class CustomException extends Exception {\n    public CustomException(String s) {\n        super(s);\n    }\n}\n</code></pre>\n<p>We can now use our <code>CustomException</code> to implement complex if-else logic by just throwing errors and catching them at the end of the reactive chain.</p>\n<p>For this example I'm just gonna use a simple login endpoint to demonstrate how to use it.</p>\n<p>Let's first create a <code>LoginForm</code> record to receive the request body.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public record LoginForm(String username, String password) {}\n</code></pre>\n<p>Now let's implement a simple login endpoint with a <code>AccountRepository</code> and then creating a session using the 'SessionRepository' (Both of these repositories aren't implemented, just imagine they exist).</p>\n<pre class=\"lang-java prettyprint-override\"><code>@PostMapping(&quot;/login&quot;)\npublic Mono&lt;String&gt; logIn(@RequestBody LoginForm loginForm) {\n\n    // Get the account using the username\n    return accountRepository.getAccountByUsername(loginForm.username()).flatMap(account -&gt; {\n        \n        // Check password\n        if(!account.getPassword().equals(loginForm.password()) {\n\n            // Return &quot;Login failed!&quot; using the CustomException we created\n            return Mono.error(new CustomException(&quot;Login failed!&quot;));\n        }\n        \n        // Create session\n        return sessionRepository.save(new Session(account.getId(), randomToken());\n    }).map(session -&gt; &quot;Login successful! &quot; + session.getToken())\n        .onErrorResume(CustomException.class, e -&gt; Mono.just(e.getMessage()))\n        .onErrorReturn(&quot;Server error!&quot;);\n}\n</code></pre>\n<p>I hope that those who looked at this answer could understand how I implemented some if-else logic in this example. If you have any additions please comment below it.</p>\n"}],"owner":{"account_id":10241026,"reputation":243,"user_id":7558431,"accept_rate":0,"display_name":"Srivi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2790,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"answer_count":2,"score":10,"last_activity_date":1681189322,"creation_date":1556891434,"question_id":55971198,"body_markdown":"I am new to RXjava functional programming. I am writing a post endpoint with multiple conditions:\r\n\r\n1. When the post endpoint is hit with products\r\n2. If the cart for the logged in user does not exist in DB then create a new cart\r\n3. If the cart is already present in couch base extract that record and check the products JSON whether the given productid is already there in the products JSON.\r\n4. If it is not available in the products JSON the new product has to be created\r\n5. The cart should be updated with the newly created productId\r\n6. If it is present in the products JSON then fetch the product record and verify the quantity.\r\n7. If the quantity is same then do nothing\r\n8. Otherwise, update the record.\r\n\r\nI am facing a challenge to write these if else conditions in functional programming. tried with `switchifEmpty` and not able to write the code in that.\r\n\r\nHere is a sample code.\r\n\r\n    public Mono&lt;Product&gt; createProduct(final Tuple2&lt;String, productdto&gt; tuple2) {\r\n        final Product productdto = tuple2.getT2();\r\n        return Mono.just(tuple2.getT1())\r\n            .map(cartRepository::findById)\r\n            .defaultIfEmpty(cartRepository.save(\r\n                cart.builder()\r\n                    .id(tuple2.getT1())\r\n                    .build()))\r\n            .flatMap(cartres -&gt; cartres)\r\n            .flatMap(cartres -&gt; {\r\n                 final Product product = Product.builder()\r\n                     .id(1234)\r\n                     .productId(productDTO.getProductId())\r\n                     .productName(productDTO.getProductName())\r\n                     .build();\r\n                 return productRepository.save(product)\r\n                     .map(saveCart -&gt; cart.builder()\r\n                         .id(cartres.getId()).build())\r\n                     .flatMap(cartRepository::save);\r\n            });\r\n        }).then(Mono.just(productDto));\r\n    }","title":"How to write complex code with multiple if else in functional reactive java using spring webflux","body":"<p>I am new to RXjava functional programming. I am writing a post endpoint with multiple conditions:</p>\n\n<ol>\n<li>When the post endpoint is hit with products</li>\n<li>If the cart for the logged in user does not exist in DB then create a new cart</li>\n<li>If the cart is already present in couch base extract that record and check the products JSON whether the given productid is already there in the products JSON.</li>\n<li>If it is not available in the products JSON the new product has to be created</li>\n<li>The cart should be updated with the newly created productId</li>\n<li>If it is present in the products JSON then fetch the product record and verify the quantity.</li>\n<li>If the quantity is same then do nothing</li>\n<li>Otherwise, update the record.</li>\n</ol>\n\n<p>I am facing a challenge to write these if else conditions in functional programming. tried with <code>switchifEmpty</code> and not able to write the code in that.</p>\n\n<p>Here is a sample code.</p>\n\n<pre><code>public Mono&lt;Product&gt; createProduct(final Tuple2&lt;String, productdto&gt; tuple2) {\n    final Product productdto = tuple2.getT2();\n    return Mono.just(tuple2.getT1())\n        .map(cartRepository::findById)\n        .defaultIfEmpty(cartRepository.save(\n            cart.builder()\n                .id(tuple2.getT1())\n                .build()))\n        .flatMap(cartres -&gt; cartres)\n        .flatMap(cartres -&gt; {\n             final Product product = Product.builder()\n                 .id(1234)\n                 .productId(productDTO.getProductId())\n                 .productName(productDTO.getProductName())\n                 .build();\n             return productRepository.save(product)\n                 .map(saveCart -&gt; cart.builder()\n                     .id(cartres.getId()).build())\n                 .flatMap(cartRepository::save);\n        });\n    }).then(Mono.just(productDto));\n}\n</code></pre>\n"},{"tags":["java","android","animation","graphics","drawing"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1681165550,"post_id":75968942,"comment_id":134009813,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"owner":{"account_id":28254474,"reputation":1,"user_id":21600139,"display_name":"Snoo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681189026,"creation_date":1681018535,"question_id":75968942,"body_markdown":"Admitted noob at android/java.  Say I wanted to use very simple graphic line commands (canvas.drawLine(args...)) to show an animated sweep second hand of a clock moving through time.  How would I go about redrawing/updating the line every second, presumably using a canvas, imageview, and bitmap?\r\n\r\nAsked another way, how would I animate a simple line moving across an ImageView in Android?\r\n\r\nHave tried creating a &quot;CustomView&quot; extended version of ImageView and placing some code in its overridden onDraw() method, and have tried some threading, but usually only get the final position of the line segment drawn.  None of the intermediate positions appear.  Thanks!","title":"Primitive Graphic Animation in Android using ImageView? Edited","body":"<p>Admitted noob at android/java.  Say I wanted to use very simple graphic line commands (canvas.drawLine(args...)) to show an animated sweep second hand of a clock moving through time.  How would I go about redrawing/updating the line every second, presumably using a canvas, imageview, and bitmap?</p>\n<p>Asked another way, how would I animate a simple line moving across an ImageView in Android?</p>\n<p>Have tried creating a &quot;CustomView&quot; extended version of ImageView and placing some code in its overridden onDraw() method, and have tried some threading, but usually only get the final position of the line segment drawn.  None of the intermediate positions appear.  Thanks!</p>\n"},{"tags":["java","intellij-idea","selenium-chromedriver"],"comments":[{"owner":{"account_id":16422586,"reputation":1841,"user_id":11863448,"display_name":"Akzy"},"score":0,"creation_date":1681114730,"post_id":75975399,"comment_id":134000312,"body_markdown":"_This element might be inside iframe from different src. Currently ChroPath/SelectorsHub doesn&#39;t support for them_ this said by extension.. have you checked yourself ? Add the `HTML` source for the element. _I have tried to handle this by Javascript, Actions class_ can we see your code ?","body":"<i>This element might be inside iframe from different src. Currently ChroPath/SelectorsHub doesn&#39;t support for them</i> this said by extension.. have you checked yourself ? Add the <code>HTML</code> source for the element. <i>I have tried to handle this by Javascript, Actions class</i> can we see your code ?"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1681140817,"post_id":75975399,"comment_id":134004954,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."},{"owner":{"account_id":28263229,"reputation":11,"user_id":21607571,"display_name":"Sana"},"score":0,"creation_date":1681188834,"post_id":75975399,"comment_id":134012032,"body_markdown":"I have tried with javascript , Actions class , Robot class also . every time getting no such element. Need to select the value from the auto populated dropdown, which is not attached in same html page where other elements are attached","body":"I have tried with javascript , Actions class , Robot class also . every time getting no such element. Need to select the value from the auto populated dropdown, which is not attached in same html page where other elements are attached"}],"owner":{"account_id":28263229,"reputation":11,"user_id":21607571,"display_name":"Sana"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":100,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1681188628,"creation_date":1681114529,"question_id":75975399,"body_markdown":"Tried to work with an autosuggestions list which is not interactable in java selenium. it has tag ui/li\r\nit is not contained under any Iframe, window.\r\n\r\n\r\nI have tried to handle this by Javascript, Actions class\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nThe ErrorLog in consol\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/6jCMt.png\r\n  [2]: https://i.stack.imgur.com/bkmSl.png","title":"This element might be inside iframe from different src. Currently ChroPath/SelectorsHub doesn&#39;t support for them","body":"<p>Tried to work with an autosuggestions list which is not interactable in java selenium. it has tag ui/li\nit is not contained under any Iframe, window.</p>\n<p>I have tried to handle this by Javascript, Actions class</p>\n<p><a href=\"https://i.stack.imgur.com/6jCMt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6jCMt.png\" alt=\"enter image description here\" /></a></p>\n<p>The ErrorLog in consol\n<a href=\"https://i.stack.imgur.com/bkmSl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bkmSl.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","runtime-error"],"owner":{"account_id":28271325,"reputation":19,"user_id":21614464,"display_name":"bharath Reddy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":105,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681188499,"creation_date":1681186938,"question_id":75982389,"body_markdown":" \r\nMy .java file\r\n\r\n    public class Hello{\r\n    \r\n    public static void main (String args[]){\r\n    System.out.println(&quot;Hello world&quot;);\r\n    }}\r\n\r\nMy path\r\nC:\\Users\\bhara\\OneDrive\\Desktop&gt;javac Hello.java\r\n\r\ngot this error  \r\nC:\\Users\\bhara\\OneDrive\\Desktop&gt;java Hello.class\r\nError: could not open `F:\\java\\lib\\amd64\\jvm.cfg&#39;\r\n\r\nI tried giving the java Hello\r\nand java Hello.class but in both the cases i am getting the same error.\r\n this is my Java_home path C:\\Program Files\\Java\\zulu17.36.17-ca-jdk17.0.4.1-win_x64","title":"while running the code from the cmd i am getting this bellow error Error: could not open `F:\\java\\lib\\amd64\\jvm.cfg&#39;","body":"<p>My .java file</p>\n<pre><code>public class Hello{\n\npublic static void main (String args[]){\nSystem.out.println(&quot;Hello world&quot;);\n}}\n</code></pre>\n<p>My path\nC:\\Users\\bhara\\OneDrive\\Desktop&gt;javac Hello.java</p>\n<p>got this error<br />\nC:\\Users\\bhara\\OneDrive\\Desktop&gt;java Hello.class\nError: could not open `F:\\java\\lib\\amd64\\jvm.cfg'</p>\n<p>I tried giving the java Hello\nand java Hello.class but in both the cases i am getting the same error.\nthis is my Java_home path C:\\Program Files\\Java\\zulu17.36.17-ca-jdk17.0.4.1-win_x64</p>\n"},{"tags":["java","spring-boot","microservices"],"owner":{"account_id":13330824,"reputation":121,"user_id":9622182,"display_name":"Nabin Singh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681186998,"creation_date":1681186998,"question_id":75982391,"body_markdown":"\r\n\r\n    import com.nimbusds.jose.jwk.JWKSet;\r\n    import com.nimbusds.jose.jwk.RSAKey;\r\n    import com.nimbusds.jose.jwk.source.JWKSource;\r\n    import com.nimbusds.jose.proc.SecurityContext;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.context.annotation.Import;\r\n    import org.springframework.core.Ordered;\r\n    import org.springframework.core.annotation.Order;\r\n    import org.springframework.security.config.Customizer;\r\n    import org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\n    import org.springframework.security.config.annotation.web.configuration.OAuth2AuthorizationServerConfiguration;\r\n    import org.springframework.security.crypto.password.PasswordEncoder;\r\n    import org.springframework.security.oauth2.core.AuthorizationGrantType;\r\n    import org.springframework.security.oauth2.core.ClientAuthenticationMethod;\r\n    import org.springframework.security.oauth2.core.oidc.OidcScopes;\r\n    import org.springframework.security.oauth2.server.authorization.client.InMemoryRegisteredClientRepository;\r\n    import org.springframework.security.oauth2.server.authorization.client.RegisteredClient;\r\n    import org.springframework.security.oauth2.server.authorization.client.RegisteredClientRepository;\r\n    import org.springframework.security.oauth2.server.authorization.config.ClientSettings;\r\n    import org.springframework.security.oauth2.server.authorization.config.ProviderSettings;\r\n    import org.springframework.security.web.SecurityFilterChain;\r\n    \r\n    import java.security.KeyPair;\r\n    import java.security.KeyPairGenerator;\r\n    import java.security.interfaces.RSAPrivateKey;\r\n    import java.security.interfaces.RSAPublicKey;\r\n    import java.util.UUID;\r\n    \r\n    @Configuration\r\n    @Import(OAuth2AuthorizationServerConfiguration.class)\r\n    public class AuthorizationServerConfig {\r\n    \r\n        @Autowired\r\n        private PasswordEncoder passwordEncoder;\r\n    \r\n        @Bean\r\n        @Order(Ordered.HIGHEST_PRECEDENCE)\r\n        public SecurityFilterChain authServerSecurityFilterChain(HttpSecurity http) throws Exception {\r\n            OAuth2AuthorizationServerConfiguration.applyDefaultSecurity(http);\r\n    \r\n            return http.formLogin(Customizer.withDefaults()).build();\r\n        }\r\n    \r\n        @Bean\r\n        public RegisteredClientRepository registeredClientRepository(){\r\n    \r\n            RegisteredClient registeredClient = RegisteredClient.withId(UUID.randomUUID().toString())\r\n                    .clientId(&quot;api-client&quot;)\r\n                    .clientSecret(passwordEncoder.encode(&quot;secret&quot;))\r\n                    .clientAuthenticationMethod(ClientAuthenticationMethod.CLIENT_SECRET_BASIC)\r\n                    .authorizationGrantType(AuthorizationGrantType.AUTHORIZATION_CODE)\r\n                    .authorizationGrantType(AuthorizationGrantType.PASSWORD)\r\n                    .authorizationGrantType(AuthorizationGrantType.REFRESH_TOKEN)\r\n                    .redirectUri(&quot;http://127.0.0.1:8080/login/oauth2/code/api-client-oidc&quot;)\r\n                    .redirectUri(&quot;http://127.0.0.1:8080/authorized&quot;)\r\n                    .scope(OidcScopes.OPENID)\r\n                    .scope(&quot;api.read&quot;)\r\n                    .clientSettings(ClientSettings.builder().requireAuthorizationConsent(true).build())\r\n                    .build();\r\n    \r\n    \r\n            return new InMemoryRegisteredClientRepository(registeredClient);\r\n        }\r\n    \r\n        @Bean\r\n        public JWKSource&lt;SecurityContext&gt; jwkSource() {\r\n            RSAKey rsaKey = generateRsa();\r\n            JWKSet jwkSet = new JWKSet(rsaKey);\r\n            return (jwkSelector, securityContext) -&gt; jwkSelector.select(jwkSet);\r\n        }\r\n    \r\n        private static RSAKey generateRsa() {\r\n            KeyPair keyPair = generateRsaKey();\r\n            RSAPublicKey publicKey = (RSAPublicKey) keyPair.getPublic();\r\n            RSAPrivateKey privateKey = (RSAPrivateKey) keyPair.getPrivate();\r\n            return new RSAKey.Builder(publicKey)\r\n                    .privateKey(privateKey)\r\n                    .keyID(UUID.randomUUID().toString())\r\n                    .build();\r\n        }\r\n    \r\n        private static KeyPair generateRsaKey() {\r\n            KeyPair keyPair;\r\n            try {\r\n                KeyPairGenerator keyPairGenerator = KeyPairGenerator.getInstance(&quot;RSA&quot;);\r\n                keyPairGenerator.initialize(2048);\r\n                keyPair = keyPairGenerator.generateKeyPair();\r\n            } catch (Exception ex) {\r\n                throw new IllegalStateException(ex);\r\n            }\r\n            return keyPair;\r\n        }\r\n    \r\n        @Bean\r\n        public ProviderSettings providerSettings() {\r\n            return ProviderSettings.builder()\r\n                    .issuer(&quot;http://auth-server:9000&quot;)\r\n                    .build();\r\n        }\r\n    }\r\nError: Error creating bean with name &#39;authorizationServerSecurityFilterChain&#39; defined in class path resource [org/springframework/security/config/annotation/web/configuration/OAuth2AuthorizationServerConfiguration.class]: Failed to instantiate [org.springframework.security.web.SecurityFilterChain]: Factory method &#39;authorizationServerSecurityFilterChain&#39; threw exception with message: javax/servlet/http/HttpServletRequest","title":"I am try to create authorization server, getting error Error creating bean with name &#39;authorizationServerSecurityFilterChain&#39;","body":"<pre><code>import com.nimbusds.jose.jwk.JWKSet;\nimport com.nimbusds.jose.jwk.RSAKey;\nimport com.nimbusds.jose.jwk.source.JWKSource;\nimport com.nimbusds.jose.proc.SecurityContext;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.context.annotation.Import;\nimport org.springframework.core.Ordered;\nimport org.springframework.core.annotation.Order;\nimport org.springframework.security.config.Customizer;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.configuration.OAuth2AuthorizationServerConfiguration;\nimport org.springframework.security.crypto.password.PasswordEncoder;\nimport org.springframework.security.oauth2.core.AuthorizationGrantType;\nimport org.springframework.security.oauth2.core.ClientAuthenticationMethod;\nimport org.springframework.security.oauth2.core.oidc.OidcScopes;\nimport org.springframework.security.oauth2.server.authorization.client.InMemoryRegisteredClientRepository;\nimport org.springframework.security.oauth2.server.authorization.client.RegisteredClient;\nimport org.springframework.security.oauth2.server.authorization.client.RegisteredClientRepository;\nimport org.springframework.security.oauth2.server.authorization.config.ClientSettings;\nimport org.springframework.security.oauth2.server.authorization.config.ProviderSettings;\nimport org.springframework.security.web.SecurityFilterChain;\n\nimport java.security.KeyPair;\nimport java.security.KeyPairGenerator;\nimport java.security.interfaces.RSAPrivateKey;\nimport java.security.interfaces.RSAPublicKey;\nimport java.util.UUID;\n\n@Configuration\n@Import(OAuth2AuthorizationServerConfiguration.class)\npublic class AuthorizationServerConfig {\n\n    @Autowired\n    private PasswordEncoder passwordEncoder;\n\n    @Bean\n    @Order(Ordered.HIGHEST_PRECEDENCE)\n    public SecurityFilterChain authServerSecurityFilterChain(HttpSecurity http) throws Exception {\n        OAuth2AuthorizationServerConfiguration.applyDefaultSecurity(http);\n\n        return http.formLogin(Customizer.withDefaults()).build();\n    }\n\n    @Bean\n    public RegisteredClientRepository registeredClientRepository(){\n\n        RegisteredClient registeredClient = RegisteredClient.withId(UUID.randomUUID().toString())\n                .clientId(&quot;api-client&quot;)\n                .clientSecret(passwordEncoder.encode(&quot;secret&quot;))\n                .clientAuthenticationMethod(ClientAuthenticationMethod.CLIENT_SECRET_BASIC)\n                .authorizationGrantType(AuthorizationGrantType.AUTHORIZATION_CODE)\n                .authorizationGrantType(AuthorizationGrantType.PASSWORD)\n                .authorizationGrantType(AuthorizationGrantType.REFRESH_TOKEN)\n                .redirectUri(&quot;http://127.0.0.1:8080/login/oauth2/code/api-client-oidc&quot;)\n                .redirectUri(&quot;http://127.0.0.1:8080/authorized&quot;)\n                .scope(OidcScopes.OPENID)\n                .scope(&quot;api.read&quot;)\n                .clientSettings(ClientSettings.builder().requireAuthorizationConsent(true).build())\n                .build();\n\n\n        return new InMemoryRegisteredClientRepository(registeredClient);\n    }\n\n    @Bean\n    public JWKSource&lt;SecurityContext&gt; jwkSource() {\n        RSAKey rsaKey = generateRsa();\n        JWKSet jwkSet = new JWKSet(rsaKey);\n        return (jwkSelector, securityContext) -&gt; jwkSelector.select(jwkSet);\n    }\n\n    private static RSAKey generateRsa() {\n        KeyPair keyPair = generateRsaKey();\n        RSAPublicKey publicKey = (RSAPublicKey) keyPair.getPublic();\n        RSAPrivateKey privateKey = (RSAPrivateKey) keyPair.getPrivate();\n        return new RSAKey.Builder(publicKey)\n                .privateKey(privateKey)\n                .keyID(UUID.randomUUID().toString())\n                .build();\n    }\n\n    private static KeyPair generateRsaKey() {\n        KeyPair keyPair;\n        try {\n            KeyPairGenerator keyPairGenerator = KeyPairGenerator.getInstance(&quot;RSA&quot;);\n            keyPairGenerator.initialize(2048);\n            keyPair = keyPairGenerator.generateKeyPair();\n        } catch (Exception ex) {\n            throw new IllegalStateException(ex);\n        }\n        return keyPair;\n    }\n\n    @Bean\n    public ProviderSettings providerSettings() {\n        return ProviderSettings.builder()\n                .issuer(&quot;http://auth-server:9000&quot;)\n                .build();\n    }\n}\n</code></pre>\n<p>Error: Error creating bean with name 'authorizationServerSecurityFilterChain' defined in class path resource [org/springframework/security/config/annotation/web/configuration/OAuth2AuthorizationServerConfiguration.class]: Failed to instantiate [org.springframework.security.web.SecurityFilterChain]: Factory method 'authorizationServerSecurityFilterChain' threw exception with message: javax/servlet/http/HttpServletRequest</p>\n"},{"tags":["java","arraylist"],"comments":[{"owner":{"account_id":2937730,"reputation":7422,"user_id":2516301,"accept_rate":100,"display_name":"vefthym"},"score":5,"creation_date":1439377319,"post_id":31963297,"comment_id":51833888,"body_markdown":"Perhaps, a map should be more usefeul for the composite collection","body":"Perhaps, a map should be more usefeul for the composite collection"},{"owner":{"account_id":2411926,"reputation":2788,"user_id":2106815,"accept_rate":69,"display_name":"Jabir"},"score":0,"creation_date":1439377456,"post_id":31963297,"comment_id":51833969,"body_markdown":"you will need to create a custom object which can be used for create such a list","body":"you will need to create a custom object which can be used for create such a list"}],"answers":[{"tags":[],"owner":{"account_id":2937730,"reputation":7422,"user_id":2516301,"accept_rate":100,"display_name":"vefthym"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1439380436,"creation_date":1439377453,"answer_id":31963367,"question_id":31963297,"body_markdown":"Use an ArrayList of `Map.Entry&lt;String, Long&gt;`, checking that both arraylists have equal size (as it seems to be your requirement), like that:\r\n\r\n    List&lt;Map.Entry&lt;String,Long&gt;&gt; subjectNumArr = new ArrayList&lt;&gt;(numArr.size());\r\n    if (subjectArr.size() == numArr.size()) {\r\n        for (int i = 0; i &lt; subjectArr.size(); ++i) {\r\n            subjectNumArr.add(new AbstractMap.SimpleEntry&lt;String, Long&gt;(subjectArr.get(i), numArr.get(i));\r\n        }   \r\n    }\r\n\r\nThat&#39;s all the code you need!\r\n\r\nThen, to iterate over the results, use something like:\r\n\r\n    for (Map.Entry&lt;String, Long&gt; entry : subjectNumArr) {\r\n        String key = entry.getKey(); \r\n        Long value = entry.getValue();\r\n    }\r\n\r\nor, you can simply get the pair at position i (keeping insertion order), by:\r\n \r\n    Map.Entry&lt;String, Long&gt; entry = subjectNumArr.get(i);\r\n\r\n\r\nThis can also hold duplicate entries, unlike the Map solution that I initially suggested, without requiring to define your own (Pair) class. ","title":"How to zip two Java Lists","body":"<p>Use an ArrayList of <code>Map.Entry&lt;String, Long&gt;</code>, checking that both arraylists have equal size (as it seems to be your requirement), like that:</p>\n\n<pre><code>List&lt;Map.Entry&lt;String,Long&gt;&gt; subjectNumArr = new ArrayList&lt;&gt;(numArr.size());\nif (subjectArr.size() == numArr.size()) {\n    for (int i = 0; i &lt; subjectArr.size(); ++i) {\n        subjectNumArr.add(new AbstractMap.SimpleEntry&lt;String, Long&gt;(subjectArr.get(i), numArr.get(i));\n    }   \n}\n</code></pre>\n\n<p>That's all the code you need!</p>\n\n<p>Then, to iterate over the results, use something like:</p>\n\n<pre><code>for (Map.Entry&lt;String, Long&gt; entry : subjectNumArr) {\n    String key = entry.getKey(); \n    Long value = entry.getValue();\n}\n</code></pre>\n\n<p>or, you can simply get the pair at position i (keeping insertion order), by:</p>\n\n<pre><code>Map.Entry&lt;String, Long&gt; entry = subjectNumArr.get(i);\n</code></pre>\n\n<p>This can also hold duplicate entries, unlike the Map solution that I initially suggested, without requiring to define your own (Pair) class. </p>\n"},{"tags":[],"owner":{"account_id":4450449,"reputation":55,"user_id":3622511,"display_name":"Ankit"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1439378318,"creation_date":1439377803,"answer_id":31963495,"question_id":31963297,"body_markdown":"I agree with vefthym however if you have to do using list then create a class like below -:\r\n\r\n    class DirtyCoding{\r\n       String subject;\r\n       int numbr;\r\n    }\r\n\r\nThen iterate over the your list, create object of `DirtyCoding`, populate it and add then add it to `List&lt;DirtyCoding&gt;`.","title":"How to zip two Java Lists","body":"<p>I agree with vefthym however if you have to do using list then create a class like below -:</p>\n\n<pre><code>class DirtyCoding{\n   String subject;\n   int numbr;\n}\n</code></pre>\n\n<p>Then iterate over the your list, create object of <code>DirtyCoding</code>, populate it and add then add it to <code>List&lt;DirtyCoding&gt;</code>.</p>\n"},{"comments":[{"owner":{"account_id":219730,"reputation":20703,"user_id":476791,"accept_rate":67,"display_name":"slartidan"},"score":5,"creation_date":1439378622,"post_id":31963639,"comment_id":51834751,"body_markdown":"How would you do this in Java8?","body":"How would you do this in Java8?"}],"tags":[],"owner":{"account_id":117025,"reputation":5019,"user_id":306643,"accept_rate":76,"display_name":"kandarp"},"comment_count":1,"down_vote_count":3,"up_vote_count":1,"is_accepted":false,"score":-2,"last_activity_date":1439378213,"creation_date":1439378213,"answer_id":31963639,"question_id":31963297,"body_markdown":"**In Java 8:** \r\nYou can do this in one line using Stream and Collectors class.\r\n\r\n**In Java 7/6/5:**\r\n\r\n    List list = new ArrayList();\r\n    \t\t\r\n    \t\tif(subjectArr.size() == numArr.size())\r\n    \t\t{\r\n    \t\t\tfor (int i = 0; i &lt; subjectArr.size(); i++) { // Loop through every subject/name\r\n    \t\t\t\tlist.add(subjectArr.get(i) + &quot; &quot; + numArr.get(i)); // Concat the two, and add it\r\n    \t\t\t}\r\n    \t\t}","title":"How to zip two Java Lists","body":"<p><strong>In Java 8:</strong> \nYou can do this in one line using Stream and Collectors class.</p>\n\n<p><strong>In Java 7/6/5:</strong></p>\n\n<pre><code>List list = new ArrayList();\n\n        if(subjectArr.size() == numArr.size())\n        {\n            for (int i = 0; i &lt; subjectArr.size(); i++) { // Loop through every subject/name\n                list.add(subjectArr.get(i) + \" \" + numArr.get(i)); // Concat the two, and add it\n            }\n        }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3006999,"reputation":6625,"user_id":2551312,"accept_rate":100,"display_name":"Kumar Abhinav"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1545973148,"creation_date":1439378216,"answer_id":31963641,"question_id":31963297,"body_markdown":"You should create an ArrayList of List:\r\n\r\n    ArrayList&lt;List&gt; subjectNumArr = new ArrayList&lt;&gt;();\r\n    Iterator iter = subjectArr.iterator();\r\n    int count=0;\r\n    while(iter.hasNext()){\r\n        subjectNumArr.add(Arrays.asList(iter.next(),numArr.get[count++]);\r\n    }\r\n\r\n\r\n","title":"How to zip two Java Lists","body":"<p>You should create an ArrayList of List:</p>\n\n<pre><code>ArrayList&lt;List&gt; subjectNumArr = new ArrayList&lt;&gt;();\nIterator iter = subjectArr.iterator();\nint count=0;\nwhile(iter.hasNext()){\n    subjectNumArr.add(Arrays.asList(iter.next(),numArr.get[count++]);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":219730,"reputation":20703,"user_id":476791,"accept_rate":67,"display_name":"slartidan"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1439378769,"creation_date":1439378445,"answer_id":31963739,"question_id":31963297,"body_markdown":"My ideas:\r\n\r\n - **Define a class** for your pairs. This makes your code *extendable* (i.e. if you want to add a third field).\r\n - Define your Lists with the convinient method **`Arrays.asList`**. It is *easy to understand*, *short* and automatically generates generic collections.\r\n - Use **superclasses or interfaces as variable types**. I used `List` in the example, maybe `Collection` would be even better. Only declare variables as `ArrayList` if you need the list to be so specific. That will give you the possibility to use other implementations, without having to change much code.\r\n\r\nI would create `Pair` objects like this:\r\n\r\n    import java.util.*;\r\n    \r\n    class Pair {\r\n    \tString subject;\r\n    \tLong num;\r\n    }\r\n    \r\n    public class Snippet {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tList&lt;String&gt; subjectArr = Arrays.asList(&quot;aa&quot;, &quot;bb&quot;, &quot;cc&quot;);\r\n    \t\tList&lt;Long&gt; numArr = Arrays.asList(2l,6l,4l);\r\n    \t\t\r\n    \t\t// create result list\r\n    \t\tList&lt;Pair&gt; pairs = new ArrayList&lt;&gt;();\r\n    \r\n    \t\t// determine result size\r\n    \t\tint length = Math.min(subjectArr.size(), numArr.size());\r\n    \t\t\r\n    \t\t// create pairs\r\n    \t\tfor (int position = 0; position &lt; length; position++) {\r\n    \t\t\tPair pair = new Pair();\r\n    \t\t\tpair.subject = subjectArr.get(position);\r\n    \t\t\tpair.num = numArr.get(position);\r\n    \t\t\tpairs.add(pair);\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\n","title":"How to zip two Java Lists","body":"<p>My ideas:</p>\n\n<ul>\n<li><strong>Define a class</strong> for your pairs. This makes your code <em>extendable</em> (i.e. if you want to add a third field).</li>\n<li>Define your Lists with the convinient method <strong><code>Arrays.asList</code></strong>. It is <em>easy to understand</em>, <em>short</em> and automatically generates generic collections.</li>\n<li>Use <strong>superclasses or interfaces as variable types</strong>. I used <code>List</code> in the example, maybe <code>Collection</code> would be even better. Only declare variables as <code>ArrayList</code> if you need the list to be so specific. That will give you the possibility to use other implementations, without having to change much code.</li>\n</ul>\n\n<p>I would create <code>Pair</code> objects like this:</p>\n\n<pre><code>import java.util.*;\n\nclass Pair {\n    String subject;\n    Long num;\n}\n\npublic class Snippet {\n\n    public static void main(String[] args) {\n        List&lt;String&gt; subjectArr = Arrays.asList(\"aa\", \"bb\", \"cc\");\n        List&lt;Long&gt; numArr = Arrays.asList(2l,6l,4l);\n\n        // create result list\n        List&lt;Pair&gt; pairs = new ArrayList&lt;&gt;();\n\n        // determine result size\n        int length = Math.min(subjectArr.size(), numArr.size());\n\n        // create pairs\n        for (int position = 0; position &lt; length; position++) {\n            Pair pair = new Pair();\n            pair.subject = subjectArr.get(position);\n            pair.num = numArr.get(position);\n            pairs.add(pair);\n        }\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":219730,"reputation":20703,"user_id":476791,"accept_rate":67,"display_name":"slartidan"},"score":2,"creation_date":1439378946,"post_id":31963844,"comment_id":51834966,"body_markdown":"A static factory method `makePair&lt;A,B&gt;(A left, B right)` instead of the constructor in Pair would make this line possible: `result.add(Pair.makePair(it1.next(), it2.next()));` (no need to repeat the types)","body":"A static factory method <code>makePair&lt;A,B&gt;(A left, B right)</code> instead of the constructor in Pair would make this line possible: <code>result.add(Pair.makePair(it1.next(), it2.next()));</code> (no need to repeat the types)"},{"owner":{"account_id":5074325,"reputation":229,"user_id":9382154,"display_name":"Silver moon"},"score":0,"creation_date":1531830083,"post_id":31963844,"comment_id":89734179,"body_markdown":"@ZhekaKozlov: How can I aceess the first element of each tuple after this implementation?","body":"@ZhekaKozlov: How can I aceess the first element of each tuple after this implementation?"},{"owner":{"account_id":362885,"reputation":37276,"user_id":706317,"accept_rate":70,"display_name":"ZhekaKozlov"},"score":0,"creation_date":1531852212,"post_id":31963844,"comment_id":89748065,"body_markdown":"@Silvermoon `for (Pair&lt;A, B&gt; pair : list) { pair.left(); }` ?","body":"@Silvermoon <code>for (Pair&lt;A, B&gt; pair : list) { pair.left(); }</code> ?"},{"owner":{"account_id":5074325,"reputation":229,"user_id":9382154,"display_name":"Silver moon"},"score":0,"creation_date":1531897416,"post_id":31963844,"comment_id":89762181,"body_markdown":"@ZhekaKozlov Thanks, also if I want to return a tuple of floats and not as strings, how should the toString method be modified? I tried returning strings like you suggested and then convert it back to float but it didn&#39;t work. Any suggestions?","body":"@ZhekaKozlov Thanks, also if I want to return a tuple of floats and not as strings, how should the toString method be modified? I tried returning strings like you suggested and then convert it back to float but it didn&#39;t work. Any suggestions?"}],"tags":[],"owner":{"account_id":362885,"reputation":37276,"user_id":706317,"accept_rate":70,"display_name":"ZhekaKozlov"},"comment_count":4,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1614483465,"creation_date":1439378735,"answer_id":31963844,"question_id":31963297,"body_markdown":"The operation you want is called [zipping][1].\r\n\r\nYou need to implement a method `zip`:\r\n\r\n    public static &lt;A, B&gt; List&lt;Pair&lt;A, B&gt;&gt; zip(List&lt;A&gt; as, List&lt;B&gt; bs) {\r\n      Iterator&lt;A&gt; it1 = as.iterator();\r\n      Iterator&lt;B&gt; it2 = bs.iterator();\r\n      List&lt;Map.Entry&lt;A, B&gt;&gt; result = new ArrayList&lt;&gt;();\r\n      while (it1.hasNext() &amp;&amp; it2.hasNext()) {\r\n        result.add(Map.entry(it1.next(), it2.next()));\r\n      }\r\n      return result;\r\n    }\r\n\r\nAnd you use it like this:\r\n\r\n    zip(subjectArr, numArr);\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/1115563/what-is-zip-functional-programming","title":"How to zip two Java Lists","body":"<p>The operation you want is called <a href=\"https://stackoverflow.com/questions/1115563/what-is-zip-functional-programming\">zipping</a>.</p>\n<p>You need to implement a method <code>zip</code>:</p>\n<pre><code>public static &lt;A, B&gt; List&lt;Pair&lt;A, B&gt;&gt; zip(List&lt;A&gt; as, List&lt;B&gt; bs) {\n  Iterator&lt;A&gt; it1 = as.iterator();\n  Iterator&lt;B&gt; it2 = bs.iterator();\n  List&lt;Map.Entry&lt;A, B&gt;&gt; result = new ArrayList&lt;&gt;();\n  while (it1.hasNext() &amp;&amp; it2.hasNext()) {\n    result.add(Map.entry(it1.next(), it2.next()));\n  }\n  return result;\n}\n</code></pre>\n<p>And you use it like this:</p>\n<pre><code>zip(subjectArr, numArr);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1657205,"reputation":1900,"user_id":1526421,"accept_rate":73,"display_name":"avmohan"},"score":8,"creation_date":1562670546,"post_id":31964093,"comment_id":100440983,"body_markdown":"Note: If the lists don&#39;t provide efficient random access (eg:linked list), each of those get() will be O(n) instead of O(1)","body":"Note: If the lists don&#39;t provide efficient random access (eg:linked list), each of those get() will be O(n) instead of O(1)"},{"owner":{"account_id":3659760,"reputation":581,"user_id":3049908,"display_name":"maxime.bochon"},"score":2,"creation_date":1659536798,"post_id":31964093,"comment_id":129318549,"body_markdown":"I suppose you should rename `zipJava8` as `zipJava9` in your Java 9 example.","body":"I suppose you should rename <code>zipJava8</code> as <code>zipJava9</code> in your Java 9 example."}],"tags":[],"owner":{"account_id":6243460,"reputation":97907,"user_id":4856258,"accept_rate":100,"display_name":"Tagir Valeev"},"comment_count":2,"down_vote_count":0,"up_vote_count":47,"is_accepted":false,"score":47,"last_activity_date":1681185826,"creation_date":1439379385,"answer_id":31964093,"question_id":31963297,"body_markdown":"Here&#39;s Java-8 solution using the `Pair` class (like in @ZhekaKozlov answer):\r\n```\r\npublic static &lt;A, B&gt; List&lt;Pair&lt;A, B&gt;&gt; zipJava8(List&lt;A&gt; as, List&lt;B&gt; bs) {\r\n    return IntStream.range(0, Math.min(as.size(), bs.size()))\r\n            .mapToObj(i -&gt; new Pair&lt;&gt;(as.get(i), bs.get(i)))\r\n            .collect(Collectors.toList());\r\n}\r\n```\r\nIn Java 9 onwards you can use `Map.entry()`:\r\n```\r\n\tpublic static &lt;A, B&gt; List&lt;Map.Entry&lt;A, B&gt;&gt; zipJava9(List&lt;A&gt; as, List&lt;B&gt; bs) {\r\n\t\treturn IntStream.range(0, Math.min(as.size(), bs.size()))\r\n\t\t\t\t.mapToObj(i -&gt; Map.entry(as.get(i), bs.get(i)))\r\n\t\t\t\t.collect(Collectors.toList());\r\n\t}\r\n```\r\n&amp;nbsp;","title":"How to zip two Java Lists","body":"<p>Here's Java-8 solution using the <code>Pair</code> class (like in @ZhekaKozlov answer):</p>\n<pre><code>public static &lt;A, B&gt; List&lt;Pair&lt;A, B&gt;&gt; zipJava8(List&lt;A&gt; as, List&lt;B&gt; bs) {\n    return IntStream.range(0, Math.min(as.size(), bs.size()))\n            .mapToObj(i -&gt; new Pair&lt;&gt;(as.get(i), bs.get(i)))\n            .collect(Collectors.toList());\n}\n</code></pre>\n<p>In Java 9 onwards you can use <code>Map.entry()</code>:</p>\n<pre><code>    public static &lt;A, B&gt; List&lt;Map.Entry&lt;A, B&gt;&gt; zipJava9(List&lt;A&gt; as, List&lt;B&gt; bs) {\n        return IntStream.range(0, Math.min(as.size(), bs.size()))\n                .mapToObj(i -&gt; Map.entry(as.get(i), bs.get(i)))\n                .collect(Collectors.toList());\n    }\n</code></pre>\n<p></p>\n"},{"tags":[],"owner":{"account_id":2078462,"reputation":10342,"user_id":2986984,"accept_rate":80,"display_name":"tkruse"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1512438237,"creation_date":1512438237,"answer_id":47644780,"question_id":31963297,"body_markdown":"Use one of the answers from https://stackoverflow.com/questions/17640754/zipping-streams-using-jdk8-with-lambda-java-util-stream-streams-zip\r\nto zip and apply a function at the same time\r\n\r\ne.g. Using a zipped Stream:\r\n\r\n    &lt;A,B,C&gt;  Stream&lt;C&gt; zipped(List&lt;A&gt; lista, List&lt;B&gt; listb, BiFunction&lt;A,B,C&gt; zipper){\r\n         int shortestLength = Math.min(lista.size(),listb.size());\r\n         return IntStream.range(0,shortestLength).mapToObject( i -&gt; {\r\n              return zipper.apply(lista.get(i), listb.get(i));\r\n         });        \r\n    }\r\n\r\nfor which you may also use Guava&#39;s Streams.zip()\r\n","title":"How to zip two Java Lists","body":"<p>Use one of the answers from <a href=\"https://stackoverflow.com/questions/17640754/zipping-streams-using-jdk8-with-lambda-java-util-stream-streams-zip\">Zipping streams using JDK8 with lambda (java.util.stream.Streams.zip)</a>\nto zip and apply a function at the same time</p>\n\n<p>e.g. Using a zipped Stream:</p>\n\n<pre><code>&lt;A,B,C&gt;  Stream&lt;C&gt; zipped(List&lt;A&gt; lista, List&lt;B&gt; listb, BiFunction&lt;A,B,C&gt; zipper){\n     int shortestLength = Math.min(lista.size(),listb.size());\n     return IntStream.range(0,shortestLength).mapToObject( i -&gt; {\n          return zipper.apply(lista.get(i), listb.get(i));\n     });        \n}\n</code></pre>\n\n<p>for which you may also use Guava's Streams.zip()</p>\n"},{"comments":[{"owner":{"account_id":1531219,"reputation":3127,"user_id":1428369,"display_name":"Curiosa Globunznik"},"score":0,"creation_date":1570388989,"post_id":48274421,"comment_id":102889571,"body_markdown":"or [jool](https://github.com/jOOQ/jOOL), looks like this: `Seq.of(&quot;a&quot;,&quot;b&quot;, &quot;c&quot;).zip(Seq.of(3,2,1))`","body":"or <a href=\"https://github.com/jOOQ/jOOL\" rel=\"nofollow noreferrer\">jool</a>, looks like this: <code>Seq.of(&quot;a&quot;,&quot;b&quot;, &quot;c&quot;).zip(Seq.of(3,2,1))</code>"},{"owner":{"account_id":377596,"reputation":5231,"user_id":729819,"accept_rate":83,"display_name":"Ben Watson"},"score":1,"creation_date":1576840010,"post_id":48274421,"comment_id":105034568,"body_markdown":"It&#39;s worth noting that `Streams.zip` is marked as `@Beta`, which may restrict its use in certain workpaces.","body":"It&#39;s worth noting that <code>Streams.zip</code> is marked as <code>@Beta</code>, which may restrict its use in certain workpaces."}],"tags":[],"owner":{"account_id":2078462,"reputation":10342,"user_id":2986984,"accept_rate":80,"display_name":"tkruse"},"comment_count":2,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1577069980,"creation_date":1516079062,"answer_id":48274421,"question_id":31963297,"body_markdown":"As per [related question](https://stackoverflow.com/questions/19040802/google-guava-zip-two-lists), you can use Guava (&gt;= 21.0) to do this:\r\n\r\n    List&lt;String&gt; subjectArr = Arrays.asList(&quot;aa&quot;, &quot;bb&quot;, &quot;cc&quot;);\r\n    List&lt;Long&gt; numArr = Arrays.asList(2L, 6L, 4L);\r\n    List&lt;Pair&gt; pairs = Streams.zip(subjectArr.stream(), numArr.stream(), Pair::new)\r\n            .collect(Collectors.toList());\r\n\r\nNote that the guava method is annotated as `@Beta`, though what that means in practice is up to interpretation, the method has not changed since version 21.0.","title":"How to zip two Java Lists","body":"<p>As per <a href=\"https://stackoverflow.com/questions/19040802/google-guava-zip-two-lists\">related question</a>, you can use Guava (>= 21.0) to do this:</p>\n\n<pre><code>List&lt;String&gt; subjectArr = Arrays.asList(\"aa\", \"bb\", \"cc\");\nList&lt;Long&gt; numArr = Arrays.asList(2L, 6L, 4L);\nList&lt;Pair&gt; pairs = Streams.zip(subjectArr.stream(), numArr.stream(), Pair::new)\n        .collect(Collectors.toList());\n</code></pre>\n\n<p>Note that the guava method is annotated as <code>@Beta</code>, though what that means in practice is up to interpretation, the method has not changed since version 21.0.</p>\n"},{"tags":[],"owner":{"account_id":7121054,"reputation":5814,"user_id":5445670,"display_name":"Solomon Ucko"},"comment_count":0,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1565804794,"creation_date":1565804794,"answer_id":57499671,"question_id":31963297,"body_markdown":"To get an `Iterator&lt;C&gt;` from an `Iterator&lt;A&gt;`, an `Iterator&lt;B&gt;`, and a `BiFunction&lt;A, B, C&gt;`:\r\n\r\n```java\r\npublic static &lt;A, B, C&gt; Iterator&lt;C&gt; map(Iterator&lt;A&gt; a, Iterator&lt;B&gt; b, BiFunction&lt;A, B, C&gt; f) {\r\n    return new Iterator&lt;C&gt;() {\r\n        public boolean hasNext() {\r\n            return a.hasNext() &amp;&amp; b.hasNext(); // This uses the shorter of the two `Iterator`s.\r\n        }\r\n        \r\n        public C next() {\r\n            return f.apply(a.next(), b.next());\r\n        }\r\n    };\r\n}\r\n```\r\n\r\n","title":"How to zip two Java Lists","body":"<p>To get an <code>Iterator&lt;C&gt;</code> from an <code>Iterator&lt;A&gt;</code>, an <code>Iterator&lt;B&gt;</code>, and a <code>BiFunction&lt;A, B, C&gt;</code>:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public static &lt;A, B, C&gt; Iterator&lt;C&gt; map(Iterator&lt;A&gt; a, Iterator&lt;B&gt; b, BiFunction&lt;A, B, C&gt; f) {\n    return new Iterator&lt;C&gt;() {\n        public boolean hasNext() {\n            return a.hasNext() &amp;&amp; b.hasNext(); // This uses the shorter of the two `Iterator`s.\n        }\n\n        public C next() {\n            return f.apply(a.next(), b.next());\n        }\n    };\n}\n</code></pre>\n"}],"owner":{"account_id":6777597,"reputation":487,"user_id":5218943,"display_name":"ahad bahmanian"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":60262,"favorite_count":0,"down_vote_count":2,"up_vote_count":49,"answer_count":10,"score":47,"last_activity_date":1681185826,"creation_date":1439377232,"question_id":31963297,"body_markdown":"I have 2 Lists:\r\n\r\n    List&lt;String&gt; subjectArr = Arrays.asList&lt;String&gt;(&quot;aa&quot;, &quot;bb&quot;, &quot;cc&quot;);\r\n    List&lt;Long&gt; numArr = Arrays.asList&lt;Long&gt;(2L, 6L, 4L);\r\n\r\nHow do I create new `List` and zip two Lists into it?\r\n\r\n    List&lt;?&gt; subjectNumArr = zip(subjectArr, numArr);\r\n    // subjectNumArr == [{&#39;aa&#39;,2},{&#39;bb&#39;,6},{&#39;cc&#39;,4}]\r\n","title":"How to zip two Java Lists","body":"<p>I have 2 Lists:</p>\n\n<pre><code>List&lt;String&gt; subjectArr = Arrays.asList&lt;String&gt;(\"aa\", \"bb\", \"cc\");\nList&lt;Long&gt; numArr = Arrays.asList&lt;Long&gt;(2L, 6L, 4L);\n</code></pre>\n\n<p>How do I create new <code>List</code> and zip two Lists into it?</p>\n\n<pre><code>List&lt;?&gt; subjectNumArr = zip(subjectArr, numArr);\n// subjectNumArr == [{'aa',2},{'bb',6},{'cc',4}]\n</code></pre>\n"},{"tags":["java","json","jackson","gson","appdynamics"],"comments":[{"owner":{"account_id":949458,"reputation":307,"user_id":975928,"accept_rate":73,"display_name":"MBK"},"score":0,"creation_date":1447979292,"post_id":33803531,"comment_id":55399595,"body_markdown":"Have a look at this https://stackoverflow.com/questions/1688099/converting-json-to-java?rq=1","body":"Have a look at this <a href=\"https://stackoverflow.com/questions/1688099/converting-json-to-java?rq=1\" title=\"converting json to java\">stackoverflow.com/questions/1688099/&hellip;</a>"},{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1448223101,"post_id":33803531,"comment_id":55483637,"body_markdown":"Please don&#39;t use StringBuffer as it was replaced by StringBuilder more than ten years ago.","body":"Please don&#39;t use StringBuffer as it was replaced by StringBuilder more than ten years ago."}],"answers":[{"tags":[],"owner":{"account_id":6788035,"reputation":86,"user_id":5226044,"display_name":"Dzmitry Dydyshka"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1447935385,"creation_date":1447935385,"answer_id":33803745,"question_id":33803531,"body_markdown":"    &quot;[{  \\&quot;frequency\\&quot;: \\&quot;ONE_MIN\\&quot;,  \\&quot;metricId\\&quot;: 2253538,  \\&quot;metricName\\&quot;: \\&quot;DB|Server:1|IO|Data File Average Read Size\\&quot;,  \\&quot;metricPath\\&quot;: \\&quot;Databases|X|IO|Data File Average Read Size\\&quot;,  \\&quot;metricValues\\&quot;: [  {    \\&quot;count\\&quot;: 14,    \\&quot;current\\&quot;: 65323,    \\&quot;max\\&quot;: 65536,    \\&quot;min\\&quot;: 0,    \\&quot;occurrences\\&quot;: 0,    \\&quot;standardDeviation\\&quot;: 0,    \\&quot;startTimeInMillis\\&quot;: 1447927800000,    \\&quot;sum\\&quot;: 251408,    \\&quot;useRange\\&quot;: true,    \\&quot;value\\&quot;: 17958  }]}]&quot;\r\n\r\nIncorrect the form of JSON object.\r\n\r\nTry this:\r\n\r\n    &quot;{  \\&quot;frequency\\&quot;: \\&quot;ONE_MIN\\&quot;,  \\&quot;metricId\\&quot;: 2253538,  \\&quot;metricName\\&quot;: \\&quot;DB|Server:1|IO|Data File Average Read Size\\&quot;,  \\&quot;metricPath\\&quot;: \\&quot;Databases|X|IO|Data File Average Read Size\\&quot;,  \\&quot;metricValues\\&quot;: [  {    \\&quot;count\\&quot;: 14,    \\&quot;current\\&quot;: 65323,    \\&quot;max\\&quot;: 65536,    \\&quot;min\\&quot;: 0,    \\&quot;occurrences\\&quot;: 0,    \\&quot;standardDeviation\\&quot;: 0,    \\&quot;startTimeInMillis\\&quot;: 1447927800000,    \\&quot;sum\\&quot;: 251408,    \\&quot;useRange\\&quot;: true,    \\&quot;value\\&quot;: 17958  }]}&quot;","title":"Cannot convert JSON HTTP Response to Java Object using Jackson","body":"<pre><code>\"[{  \\\"frequency\\\": \\\"ONE_MIN\\\",  \\\"metricId\\\": 2253538,  \\\"metricName\\\": \\\"DB|Server:1|IO|Data File Average Read Size\\\",  \\\"metricPath\\\": \\\"Databases|X|IO|Data File Average Read Size\\\",  \\\"metricValues\\\": [  {    \\\"count\\\": 14,    \\\"current\\\": 65323,    \\\"max\\\": 65536,    \\\"min\\\": 0,    \\\"occurrences\\\": 0,    \\\"standardDeviation\\\": 0,    \\\"startTimeInMillis\\\": 1447927800000,    \\\"sum\\\": 251408,    \\\"useRange\\\": true,    \\\"value\\\": 17958  }]}]\"\n</code></pre>\n\n<p>Incorrect the form of JSON object.</p>\n\n<p>Try this:</p>\n\n<pre><code>\"{  \\\"frequency\\\": \\\"ONE_MIN\\\",  \\\"metricId\\\": 2253538,  \\\"metricName\\\": \\\"DB|Server:1|IO|Data File Average Read Size\\\",  \\\"metricPath\\\": \\\"Databases|X|IO|Data File Average Read Size\\\",  \\\"metricValues\\\": [  {    \\\"count\\\": 14,    \\\"current\\\": 65323,    \\\"max\\\": 65536,    \\\"min\\\": 0,    \\\"occurrences\\\": 0,    \\\"standardDeviation\\\": 0,    \\\"startTimeInMillis\\\": 1447927800000,    \\\"sum\\\": 251408,    \\\"useRange\\\": true,    \\\"value\\\": 17958  }]}\"\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2734926,"reputation":449,"user_id":2357809,"display_name":"IanB"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1447935427,"creation_date":1447935427,"answer_id":33803761,"question_id":33803531,"body_markdown":"Remove the outer &quot;[]&quot; from your JSON.  You are passing an array of ADMetrics rather than a single ADMetrics which the readValue deserializer is expecting","title":"Cannot convert JSON HTTP Response to Java Object using Jackson","body":"<p>Remove the outer \"[]\" from your JSON.  You are passing an array of ADMetrics rather than a single ADMetrics which the readValue deserializer is expecting</p>\n"},{"comments":[{"owner":{"display_name":"user4933349"},"score":0,"creation_date":1447936293,"post_id":33803762,"comment_id":55373383,"body_markdown":"in Method One: use this line \nJsonArray jArray = new JsonParser().parse(jsonInString).getAsJsonArray();","body":"in Method One: use this line  JsonArray jArray = new JsonParser().parse(jsonInString).getAsJsonArray();"}],"tags":[],"owner":{"display_name":"user4933349"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1447935972,"creation_date":1447935429,"answer_id":33803762,"question_id":33803531,"body_markdown":"Can you try implementing serialisation in your pojo class as below\r\n\r\n   \r\n\r\n         public class ADMetrics implements Serializable{\r\n            \r\n    private static final long serialVersionUID = 1L;\r\n    //All your variables and getter and setter method\r\n    }\r\n\r\nMethod One:\r\n---------------------\r\n\r\nAlso your JSON is not a JSONObject it is an JSONARRAY, use the below code to convert your above String to JSONARRAY \r\n\r\n    JsonArray jArray = new JsonParser().parse(json).getAsJsonArray();\r\n\r\nThe jArray is JSONArray from GSON , hence work with GSON to convert how u need or convert GSON to JSON.\r\n\r\nOR \r\n\r\nMethod Two:\r\n---------------------\r\n\r\nDirectly convert the above input json from \r\n\r\n    Gson gson = new Gson();\r\n    \t\t\tString output = gson.toJson(input);\r\n    \t\t\t//System.out.println(&quot;output from gson &quot;+output);\r\n    \t\tJSONArray js = new JSONArray(output);\r\n\r\nThen work with json as usual.\r\n\r\n","title":"Cannot convert JSON HTTP Response to Java Object using Jackson","body":"<p>Can you try implementing serialisation in your pojo class as below</p>\n\n<pre><code>     public class ADMetrics implements Serializable{\n\nprivate static final long serialVersionUID = 1L;\n//All your variables and getter and setter method\n}\n</code></pre>\n\n<h2>Method One:</h2>\n\n<p>Also your JSON is not a JSONObject it is an JSONARRAY, use the below code to convert your above String to JSONARRAY </p>\n\n<pre><code>JsonArray jArray = new JsonParser().parse(json).getAsJsonArray();\n</code></pre>\n\n<p>The jArray is JSONArray from GSON , hence work with GSON to convert how u need or convert GSON to JSON.</p>\n\n<p>OR </p>\n\n<h2>Method Two:</h2>\n\n<p>Directly convert the above input json from </p>\n\n<pre><code>Gson gson = new Gson();\n            String output = gson.toJson(input);\n            //System.out.println(\"output from gson \"+output);\n        JSONArray js = new JSONArray(output);\n</code></pre>\n\n<p>Then work with json as usual.</p>\n"},{"tags":[],"owner":{"account_id":31084,"reputation":128404,"user_id":85134,"display_name":"araqnid"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1447978459,"creation_date":1447978459,"answer_id":33816795,"question_id":33803531,"body_markdown":"Since the JSON you&#39;re receiving has an array, you need to deserialize to a list of objects. Presumably just grab the first one in the list:\r\n\r\n        List&lt;ADMetrics&gt; adMetricsList = mapper.readValue(jsonInString, new TypeReference&lt;List&lt;ADMetrics&gt;&gt;(){});\r\n        ADMetrics adMetrics = adMetricsList.get(0);\r\n\r\nOr if you&#39;re not sure what else may be in the list and just want to get the first element, you can do the conversion in two steps:\r\n\r\n\t\tJsonNode tree = mapper.readTree(jsonInString);\r\n\t\tADMetrics adMetrics = mapper.convertValue(tree.get(0), ADMetrics.class);\r\n","title":"Cannot convert JSON HTTP Response to Java Object using Jackson","body":"<p>Since the JSON you're receiving has an array, you need to deserialize to a list of objects. Presumably just grab the first one in the list:</p>\n\n<pre><code>    List&lt;ADMetrics&gt; adMetricsList = mapper.readValue(jsonInString, new TypeReference&lt;List&lt;ADMetrics&gt;&gt;(){});\n    ADMetrics adMetrics = adMetricsList.get(0);\n</code></pre>\n\n<p>Or if you're not sure what else may be in the list and just want to get the first element, you can do the conversion in two steps:</p>\n\n<pre><code>    JsonNode tree = mapper.readTree(jsonInString);\n    ADMetrics adMetrics = mapper.convertValue(tree.get(0), ADMetrics.class);\n</code></pre>\n"}],"owner":{"account_id":7326801,"reputation":1,"user_id":5580976,"display_name":"KashR"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":7938,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":4,"score":0,"last_activity_date":1681185770,"creation_date":1447934894,"question_id":33803531,"body_markdown":"I have created a REST service which sends GET requests to retrieve a JSON response from a specified URL. \r\n\r\nI have got it working to the point where I retrieve the JSON message successfully although my next issue is converting the JSON message to JAVA Objects.\r\n\r\nBelow is my Rest Client:\r\n\r\n    public class RestADClient {\r\n\r\n\r\n    // HTTP GET request\r\n    public String sendGet(String url) throws Exception {\r\n\r\n        URL obj = new URL(url);\r\n        HttpURLConnection con = (HttpURLConnection) obj.openConnection();\r\n\r\n        // optional default is GET\r\n        con.setRequestMethod(&quot;GET&quot;);\r\n\r\n        //add request header\r\n\r\n        con.setRequestProperty(&quot;Authorization&quot;, &quot;myAuthorizationProp&quot;);\r\n\r\n        int responseCode = con.getResponseCode();\r\n        System.out.println(&quot;\\nSending &#39;GET&#39; request to URL : &quot; + url);\r\n        System.out.println(&quot;Response Code : &quot; + responseCode);\r\n\r\n        BufferedReader in = new BufferedReader(\r\n                new InputStreamReader(con.getInputStream()));\r\n        String inputLine;\r\n        StringBuffer response = new StringBuffer();\r\n\r\n        while ((inputLine = in.readLine()) != null) {\r\n            response.append(inputLine);\r\n        }\r\n        in.close();\r\n\r\n        System.out.println(&quot;Response Message: &quot; + response.toString());\r\n\r\n        ObjectMapper mapper = new ObjectMapper();\r\n\r\n        try {\r\n            // Convert JSON string to Object\r\n            String jsonInString = &quot;[{  \\&quot;frequency\\&quot;: \\&quot;ONE_MIN\\&quot;,  \\&quot;metricId\\&quot;: 2253538,  \\&quot;metricName\\&quot;: \\&quot;DB|Server:1|IO|Data File Average Read Size\\&quot;,  \\&quot;metricPath\\&quot;: \\&quot;Databases|X|IO|Data File Average Read Size\\&quot;,  \\&quot;metricValues\\&quot;: [  {    \\&quot;count\\&quot;: 14,    \\&quot;current\\&quot;: 65323,    \\&quot;max\\&quot;: 65536,    \\&quot;min\\&quot;: 0,    \\&quot;occurrences\\&quot;: 0,    \\&quot;standardDeviation\\&quot;: 0,    \\&quot;startTimeInMillis\\&quot;: 1447927800000,    \\&quot;sum\\&quot;: 251408,    \\&quot;useRange\\&quot;: true,    \\&quot;value\\&quot;: 17958  }]}]&quot;;\r\n            ADMetrics adMetrics = mapper.readValue(jsonInString, ADMetrics.class);\r\n            System.out.println(adMetrics);\r\n\r\n        } catch (JsonGenerationException e) {\r\n            e.printStackTrace();\r\n        } catch (JsonMappingException e) {\r\n            e.printStackTrace();\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        return response.toString();\r\n    }\r\n\r\n\r\n}\r\n\r\nBelow is my ADMetrics POJO class:\r\n\r\n    import java.util.List;\r\n    public class ADMetrics {\r\n\r\n    private String frequency;\r\n    private int metricId;\r\n    private String metricName;\r\n    private String metricPath;\r\n    private List&lt;String&gt; metricValues;\r\n    private int count;\r\n    private int current;\r\n    private int max;\r\n    private int min;\r\n    private int occurences;\r\n    private int standardDeviation;\r\n    private int startTimeInMillis;\r\n    private int sum;\r\n    private boolean useRange;\r\n    private int value;\r\n\r\n    public String getFrequency() {\r\n        return frequency;\r\n    }\r\n\r\n    public void setFrequency(String frequency) {\r\n        this.frequency = frequency;\r\n    }\r\n\r\n    public int getMetricId() {\r\n        return metricId;\r\n    }\r\n\r\n    public void setMetricId(int metricId) {\r\n        this.metricId = metricId;\r\n    }\r\n    public String getMetricName() {\r\n        return metricName;\r\n    }\r\n\r\n    public void setMetricName(String metricName) {\r\n        this.metricName = metricName;\r\n    }\r\n\r\n    public String getMetricPath() {\r\n        return metricPath;\r\n    }\r\n\r\n    public void setMetricPath(String metricPath) {\r\n        this.metricPath = metricPath;\r\n    }\r\n\r\n    public List&lt;String&gt; getMetricValues() {\r\n        return metricValues;\r\n    }\r\n\r\n    public void setMetricValues(List&lt;String&gt; metricValues) {\r\n        this.metricValues = metricValues;\r\n    }\r\n\r\n    public int getCount() {\r\n        return count;\r\n    }\r\n\r\n    public void setCount(int count) {\r\n        this.count = count;\r\n    }\r\n\r\n    public int getCurrent() {\r\n        return current;\r\n    }\r\n\r\n    public void setCurrent(int current) {\r\n        this.current = current;\r\n    }\r\n\r\n    public int getMax() {\r\n        return max;\r\n    }\r\n\r\n    public void setMax(int max) {\r\n        this.max = max;\r\n    }\r\n\r\n    public int getMin() {\r\n        return min;\r\n    }\r\n\r\n    public void setMin(int min) {\r\n        this.min = min;\r\n    }\r\n\r\n    public int getOccurences() {\r\n        return occurences;\r\n    }\r\n\r\n    public void setOccurences(int occurences) {\r\n        this.occurences = occurences;\r\n    }\r\n\r\n    public int getStandardDeviation() {\r\n        return standardDeviation;\r\n    }\r\n\r\n    public void setStandardDeviation(int standardDeviation) {\r\n        this.standardDeviation = standardDeviation;\r\n    }\r\n\r\n    public int getStartTimeInMillis() {\r\n        return startTimeInMillis;\r\n    }\r\n\r\n    public void setStartTimeInMillis(int startTimeInMillis) {\r\n        this.startTimeInMillis = startTimeInMillis;\r\n    }\r\n\r\n    public int getSum() {\r\n        return sum;\r\n    }\r\n\r\n    public void setSum(int sum) {\r\n        this.sum = sum;\r\n    }\r\n\r\n    public boolean isUseRange() {\r\n        return useRange;\r\n    }\r\n\r\n    public void setUseRange(boolean useRange) {\r\n        this.useRange = useRange;\r\n    }\r\n\r\n    public int getValue() {\r\n        return value;\r\n    }\r\n\r\n    public void setValue(int value) {\r\n        this.value = value;\r\n    }\r\n\r\nBelow is my JUnit test:\r\n\r\n    public class ADTest {\r\n\r\n    String url = &quot;myURL&quot;;\r\n\r\n    @Test\r\n    public void testResponseContainsMetricFrequency() throws Exception {\r\n\r\n        RestADClient restADClient = new RestADClient();\r\n\r\n\r\n        assertTrue(restADClient.sendGet(url).contains(&quot;frequency&quot;));\r\n    }}\r\n\r\nWhen I run the test, I get the following: \r\n    \r\nResponse Code : 200\r\n\r\nResponse Message: [{  &quot;frequency&quot;: &quot;ONE_MIN&quot;,  &quot;metricId&quot;: 2253538,  &quot;metricName&quot;: &quot;DB|Server:169|IO|Data File Average Read Size&quot;,  &quot;metricPath&quot;: &quot;Databases|QA-CARS|IO|Data File Average Read Size&quot;,  &quot;metricValues&quot;: [  {    &quot;count&quot;: 13,    &quot;current&quot;: 66013,    &quot;max&quot;: 72003,    &quot;min&quot;: 0,    &quot;occurrences&quot;: 0,    &quot;standardDeviation&quot;: 0,    &quot;startTimeInMillis&quot;: 1447929360000,    &quot;sum&quot;: 198688,    &quot;useRange&quot;: true,    &quot;value&quot;: 15284  }]}]\r\n\r\norg.codehaus.jackson.map.JsonMappingException: Can not deserialize instance of rest.client.ADMetrics out of START_ARRAY token\r\n at [Source: java.io.StringReader@78b729e6; line: 1, column: 1]","title":"Cannot convert JSON HTTP Response to Java Object using Jackson","body":"<p>I have created a REST service which sends GET requests to retrieve a JSON response from a specified URL. </p>\n\n<p>I have got it working to the point where I retrieve the JSON message successfully although my next issue is converting the JSON message to JAVA Objects.</p>\n\n<p>Below is my Rest Client:</p>\n\n<pre><code>public class RestADClient {\n\n\n// HTTP GET request\npublic String sendGet(String url) throws Exception {\n\n    URL obj = new URL(url);\n    HttpURLConnection con = (HttpURLConnection) obj.openConnection();\n\n    // optional default is GET\n    con.setRequestMethod(\"GET\");\n\n    //add request header\n\n    con.setRequestProperty(\"Authorization\", \"myAuthorizationProp\");\n\n    int responseCode = con.getResponseCode();\n    System.out.println(\"\\nSending 'GET' request to URL : \" + url);\n    System.out.println(\"Response Code : \" + responseCode);\n\n    BufferedReader in = new BufferedReader(\n            new InputStreamReader(con.getInputStream()));\n    String inputLine;\n    StringBuffer response = new StringBuffer();\n\n    while ((inputLine = in.readLine()) != null) {\n        response.append(inputLine);\n    }\n    in.close();\n\n    System.out.println(\"Response Message: \" + response.toString());\n\n    ObjectMapper mapper = new ObjectMapper();\n\n    try {\n        // Convert JSON string to Object\n        String jsonInString = \"[{  \\\"frequency\\\": \\\"ONE_MIN\\\",  \\\"metricId\\\": 2253538,  \\\"metricName\\\": \\\"DB|Server:1|IO|Data File Average Read Size\\\",  \\\"metricPath\\\": \\\"Databases|X|IO|Data File Average Read Size\\\",  \\\"metricValues\\\": [  {    \\\"count\\\": 14,    \\\"current\\\": 65323,    \\\"max\\\": 65536,    \\\"min\\\": 0,    \\\"occurrences\\\": 0,    \\\"standardDeviation\\\": 0,    \\\"startTimeInMillis\\\": 1447927800000,    \\\"sum\\\": 251408,    \\\"useRange\\\": true,    \\\"value\\\": 17958  }]}]\";\n        ADMetrics adMetrics = mapper.readValue(jsonInString, ADMetrics.class);\n        System.out.println(adMetrics);\n\n    } catch (JsonGenerationException e) {\n        e.printStackTrace();\n    } catch (JsonMappingException e) {\n        e.printStackTrace();\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n\n    return response.toString();\n}\n</code></pre>\n\n<p>}</p>\n\n<p>Below is my ADMetrics POJO class:</p>\n\n<pre><code>import java.util.List;\npublic class ADMetrics {\n\nprivate String frequency;\nprivate int metricId;\nprivate String metricName;\nprivate String metricPath;\nprivate List&lt;String&gt; metricValues;\nprivate int count;\nprivate int current;\nprivate int max;\nprivate int min;\nprivate int occurences;\nprivate int standardDeviation;\nprivate int startTimeInMillis;\nprivate int sum;\nprivate boolean useRange;\nprivate int value;\n\npublic String getFrequency() {\n    return frequency;\n}\n\npublic void setFrequency(String frequency) {\n    this.frequency = frequency;\n}\n\npublic int getMetricId() {\n    return metricId;\n}\n\npublic void setMetricId(int metricId) {\n    this.metricId = metricId;\n}\npublic String getMetricName() {\n    return metricName;\n}\n\npublic void setMetricName(String metricName) {\n    this.metricName = metricName;\n}\n\npublic String getMetricPath() {\n    return metricPath;\n}\n\npublic void setMetricPath(String metricPath) {\n    this.metricPath = metricPath;\n}\n\npublic List&lt;String&gt; getMetricValues() {\n    return metricValues;\n}\n\npublic void setMetricValues(List&lt;String&gt; metricValues) {\n    this.metricValues = metricValues;\n}\n\npublic int getCount() {\n    return count;\n}\n\npublic void setCount(int count) {\n    this.count = count;\n}\n\npublic int getCurrent() {\n    return current;\n}\n\npublic void setCurrent(int current) {\n    this.current = current;\n}\n\npublic int getMax() {\n    return max;\n}\n\npublic void setMax(int max) {\n    this.max = max;\n}\n\npublic int getMin() {\n    return min;\n}\n\npublic void setMin(int min) {\n    this.min = min;\n}\n\npublic int getOccurences() {\n    return occurences;\n}\n\npublic void setOccurences(int occurences) {\n    this.occurences = occurences;\n}\n\npublic int getStandardDeviation() {\n    return standardDeviation;\n}\n\npublic void setStandardDeviation(int standardDeviation) {\n    this.standardDeviation = standardDeviation;\n}\n\npublic int getStartTimeInMillis() {\n    return startTimeInMillis;\n}\n\npublic void setStartTimeInMillis(int startTimeInMillis) {\n    this.startTimeInMillis = startTimeInMillis;\n}\n\npublic int getSum() {\n    return sum;\n}\n\npublic void setSum(int sum) {\n    this.sum = sum;\n}\n\npublic boolean isUseRange() {\n    return useRange;\n}\n\npublic void setUseRange(boolean useRange) {\n    this.useRange = useRange;\n}\n\npublic int getValue() {\n    return value;\n}\n\npublic void setValue(int value) {\n    this.value = value;\n}\n</code></pre>\n\n<p>Below is my JUnit test:</p>\n\n<pre><code>public class ADTest {\n\nString url = \"myURL\";\n\n@Test\npublic void testResponseContainsMetricFrequency() throws Exception {\n\n    RestADClient restADClient = new RestADClient();\n\n\n    assertTrue(restADClient.sendGet(url).contains(\"frequency\"));\n}}\n</code></pre>\n\n<p>When I run the test, I get the following: </p>\n\n<p>Response Code : 200</p>\n\n<p>Response Message: [{  \"frequency\": \"ONE_MIN\",  \"metricId\": 2253538,  \"metricName\": \"DB|Server:169|IO|Data File Average Read Size\",  \"metricPath\": \"Databases|QA-CARS|IO|Data File Average Read Size\",  \"metricValues\": [  {    \"count\": 13,    \"current\": 66013,    \"max\": 72003,    \"min\": 0,    \"occurrences\": 0,    \"standardDeviation\": 0,    \"startTimeInMillis\": 1447929360000,    \"sum\": 198688,    \"useRange\": true,    \"value\": 15284  }]}]</p>\n\n<p>org.codehaus.jackson.map.JsonMappingException: Can not deserialize instance of rest.client.ADMetrics out of START_ARRAY token\n at [Source: java.io.StringReader@78b729e6; line: 1, column: 1]</p>\n"},{"tags":["java","android","android-studio"],"answers":[{"comments":[{"owner":{"account_id":2472234,"reputation":12058,"user_id":2153777,"accept_rate":79,"display_name":"E235"},"score":1,"creation_date":1557416598,"post_id":56063004,"comment_id":98766271,"body_markdown":"Yes, I see it now. How could I missed it :/, thanks ! I attached the `sources` folder of the Java files I got from using the jadx tool.","body":"Yes, I see it now. How could I missed it :/, thanks ! I attached the <code>sources</code> folder of the Java files I got from using the jadx tool."}],"tags":[],"owner":{"account_id":15668572,"reputation":309,"user_id":11305726,"display_name":"Snail Cadet"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1557416186,"creation_date":1557416186,"answer_id":56063004,"question_id":56062496,"body_markdown":"Looks like the answer you want is available in the android docs (https://developer.android.com/studio/debug/apk-debugger#attach_java):\r\n\r\n\r\n&gt;By default, Android Studio extracts Java code from your APK and saves them as .smali files. To debug the Java code using breakpoints, you need to point the IDE to the .java source files that correspond to the .smali files you want to debug.\r\n\r\n&gt;To attach Java sources, proceed as follows:\r\n\r\n&gt;Double click on a .smali file from the Project pane (use the Android view). After opening the file, the editor displays a warning banner asking you to select the Java sources, similar to what&#39;s shown in figure 1.\r\n    Click Attach Java Sources from the banner at the top of the editor window.\r\n    Navigate to the directory with the apps Java source files and click Open.\r\n\r\n&gt;In the Project window, the IDE replaces .smali files with their corresponding .java filesThe IDE also includes inner classes automatically. You can now add breakpoints and debug your app as you normally would.\r\n","title":"Can&#39;t debug APK: &quot;To set up breakpoints for debugging, please attach Java source files&quot;","body":"<p>Looks like the answer you want is available in the android docs (<a href=\"https://developer.android.com/studio/debug/apk-debugger#attach_java\" rel=\"noreferrer\">https://developer.android.com/studio/debug/apk-debugger#attach_java</a>):</p>\n\n<blockquote>\n  <p>By default, Android Studio extracts Java code from your APK and saves them as .smali files. To debug the Java code using breakpoints, you need to point the IDE to the .java source files that correspond to the .smali files you want to debug.</p>\n  \n  <p>To attach Java sources, proceed as follows:</p>\n  \n  <p>Double click on a .smali file from the Project pane (use the Android view). After opening the file, the editor displays a warning banner asking you to select the Java sources, similar to what's shown in figure 1.\n      Click Attach Java Sources from the banner at the top of the editor window.\n      Navigate to the directory with the apps Java source files and click Open.</p>\n  \n  <p>In the Project window, the IDE replaces .smali files with their corresponding .java filesThe IDE also includes inner classes automatically. You can now add breakpoints and debug your app as you normally would.</p>\n</blockquote>\n"}],"owner":{"account_id":2472234,"reputation":12058,"user_id":2153777,"accept_rate":79,"display_name":"E235"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4341,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":56063004,"answer_count":1,"score":7,"last_activity_date":1681184059,"creation_date":1557414585,"question_id":56062496,"body_markdown":"I have an APK which is `debuggable=&quot;true&quot;` (according to the AndroidManifest), meaning I can debug it and this is what I want to do.  \r\n\r\nI used Android Studio: **File -&gt; Profile or Debug APK** to load the apk (app.apk).  \r\n\r\nWhen I am trying to debug it (Shift+F9) it writes me:  \r\n\r\n&gt; Disassembled classes.dex file. To set up breakpoints for debugging,\r\n&gt; please attach Java source files\r\n\r\nI used [jadx][1] to decompile the APK to java source code by running:  \r\n\r\n    &quot;c:\\tmp\\jadx-0.8.0\\bin\\jadx.bat&quot; -d java_source app.apk  \r\n\r\nI now have inside the java_source directory two directories:  \r\n - resources  \r\n - sources  \r\n\r\nInside the `sources` folder I have the java files.  \r\nHow can I attach them to the Android Studio project as it requests by the message?  \r\nJust open it as a new project?  \r\n\r\n\r\n  [1]: https://github.com/skylot/jadx","title":"Can&#39;t debug APK: &quot;To set up breakpoints for debugging, please attach Java source files&quot;","body":"<p>I have an APK which is <code>debuggable=\"true\"</code> (according to the AndroidManifest), meaning I can debug it and this is what I want to do.  </p>\n\n<p>I used Android Studio: <strong>File -> Profile or Debug APK</strong> to load the apk (app.apk).  </p>\n\n<p>When I am trying to debug it (Shift+F9) it writes me:  </p>\n\n<blockquote>\n  <p>Disassembled classes.dex file. To set up breakpoints for debugging,\n  please attach Java source files</p>\n</blockquote>\n\n<p>I used <a href=\"https://github.com/skylot/jadx\" rel=\"noreferrer\">jadx</a> to decompile the APK to java source code by running:  </p>\n\n<pre><code>\"c:\\tmp\\jadx-0.8.0\\bin\\jadx.bat\" -d java_source app.apk  \n</code></pre>\n\n<p>I now have inside the java_source directory two directories:<br>\n - resources<br>\n - sources  </p>\n\n<p>Inside the <code>sources</code> folder I have the java files.<br>\nHow can I attach them to the Android Studio project as it requests by the message?<br>\nJust open it as a new project?  </p>\n"},{"tags":["java","spring-boot","controller-advice"],"owner":{"account_id":16720659,"reputation":408,"user_id":12085680,"display_name":"BugsOverflow"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":329,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681183676,"creation_date":1681183184,"question_id":75982173,"body_markdown":"I think this behaviour is correct, because reading from [here][1] it says: &quot;HTTP response status code 304 Not Modified is returned by the server to indicate a successful HTTP request, yet there is no need to send the data associated with the relevant resource. Essentially, it is the same as a 200 OK status code with a specific header included. **There is no message body for this response code.**&quot;\r\n\r\nSo I think it is okay that it does not return any body but just want to make sure :) also in the log I can see the exception has all the data I require and I do get the 304 not modified as response using postman...\r\n\r\n**My RestControllerAdvice:**\r\n\r\n    @ExceptionHandler(NotModifiedProductException.class)\r\n    @ResponseStatus(value = HttpStatus.NOT_MODIFIED)\r\n    public ResponseEntity&lt;HandlerDTO&gt; handlerRequestException(NotModifiedProductException e) {\r\n    \tlog.error(HANDLER_LOG, e.getClass(), e.getMessage(), ExceptionUtils.getStackTrace(e));\r\n    \treturn new ResponseEntity&lt;&gt;(new HandlerDTO(e.getClass().getSimpleName(), e.getMessage()),\r\n    \t\t\tHttpStatus.NOT_MODIFIED);\r\n    }\r\n\r\nRight now I do not need it to return the body, and more knowing that the standard says 304 does not return body, but in case I really needed it to return it, is there any way?\r\n\r\nAlso I found this documentation suggested by the javadoc:\r\n\r\nhttps://www.rfc-editor.org/rfc/rfc7232#section-4.1\r\nwhere it says: &quot;A 304 response cannot contain a message-body; it is always terminated\r\n   by the first empty line after the header fields.&quot;\r\n\r\n  [1]: https://http.dev/304#:~:text=HTTP%20response%20status%20code%20304,body%20for%20this%20response%20code.","title":"Spring RestControllerAdvice status code 304 NOT MODIFIED Does not return the body I command","body":"<p>I think this behaviour is correct, because reading from <a href=\"https://http.dev/304#:%7E:text=HTTP%20response%20status%20code%20304,body%20for%20this%20response%20code.\" rel=\"nofollow noreferrer\">here</a> it says: &quot;HTTP response status code 304 Not Modified is returned by the server to indicate a successful HTTP request, yet there is no need to send the data associated with the relevant resource. Essentially, it is the same as a 200 OK status code with a specific header included. <strong>There is no message body for this response code.</strong>&quot;</p>\n<p>So I think it is okay that it does not return any body but just want to make sure :) also in the log I can see the exception has all the data I require and I do get the 304 not modified as response using postman...</p>\n<p><strong>My RestControllerAdvice:</strong></p>\n<pre><code>@ExceptionHandler(NotModifiedProductException.class)\n@ResponseStatus(value = HttpStatus.NOT_MODIFIED)\npublic ResponseEntity&lt;HandlerDTO&gt; handlerRequestException(NotModifiedProductException e) {\n    log.error(HANDLER_LOG, e.getClass(), e.getMessage(), ExceptionUtils.getStackTrace(e));\n    return new ResponseEntity&lt;&gt;(new HandlerDTO(e.getClass().getSimpleName(), e.getMessage()),\n            HttpStatus.NOT_MODIFIED);\n}\n</code></pre>\n<p>Right now I do not need it to return the body, and more knowing that the standard says 304 does not return body, but in case I really needed it to return it, is there any way?</p>\n<p>Also I found this documentation suggested by the javadoc:</p>\n<p><a href=\"https://www.rfc-editor.org/rfc/rfc7232#section-4.1\" rel=\"nofollow noreferrer\">https://www.rfc-editor.org/rfc/rfc7232#section-4.1</a>\nwhere it says: &quot;A 304 response cannot contain a message-body; it is always terminated\nby the first empty line after the header fields.&quot;</p>\n"},{"tags":["java","garbage-collection"],"owner":{"account_id":18433184,"reputation":323,"user_id":16452929,"display_name":"CS1999"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681183017,"creation_date":1681183017,"question_id":75982163,"body_markdown":"I am currently exploring options on how to detect long GC pauses (beyond a certain threshold) and raise alerts. One simple way I can think of is writing a script/python program which periodically calls ```jstat -gc ${vmid}```, reads the output, compares it with previous results and tries to raise alerts if the GC pause threshold is broken (simple if condition) . I was wondering if there are any industry standard ways to do this ? Any app/tool which can be configured with a list of running apps to be monitored ? ","title":"Efficient way to detect and alert long GC pauses (young and full both)","body":"<p>I am currently exploring options on how to detect long GC pauses (beyond a certain threshold) and raise alerts. One simple way I can think of is writing a script/python program which periodically calls <code>jstat -gc ${vmid}</code>, reads the output, compares it with previous results and tries to raise alerts if the GC pause threshold is broken (simple if condition) . I was wondering if there are any industry standard ways to do this ? Any app/tool which can be configured with a list of running apps to be monitored ?</p>\n"},{"tags":["java","sorting"],"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":1,"creation_date":1681182840,"post_id":75982125,"comment_id":134011468,"body_markdown":"Negative means a&lt;b. Positive means a&gt;b. Zero means a=b. See the docs for [Comparator](https://docs.oracle.com/javase/8/docs/api/java/util/Comparator.html#:~:text=Returns%20a%20negative%20integer%2C%20zero%2C%20or%20a%20positive%20integer%20as%20the%20first%20argument%20is%20less%20than%2C%20equal%20to%2C%20or%20greater%20than%20the%20second.).","body":"Negative means a&lt;b. Positive means a&gt;b. Zero means a=b. See the docs for <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Comparator.html#:~:text=Returns%20a%20negative%20integer%2C%20zero%2C%20or%20a%20positive%20integer%20as%20the%20first%20argument%20is%20less%20than%2C%20equal%20to%2C%20or%20greater%20than%20the%20second.\" rel=\"nofollow noreferrer\">Comparator</a>."},{"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"score":0,"creation_date":1681182891,"post_id":75982125,"comment_id":134011473,"body_markdown":"`1` means greater than, `-1` means less than and `0` means equal to. That is generally how sort works in Java. You compare two values. Those are the only three possible results of comparing two values.","body":"<code>1</code> means greater than, <code>-1</code> means less than and <code>0</code> means equal to. That is generally how sort works in Java. You compare two values. Those are the only three possible results of comparing two values."},{"owner":{"account_id":22319245,"reputation":41,"user_id":16542113,"display_name":"Ankit Biswas"},"score":0,"creation_date":1681227743,"post_id":75982125,"comment_id":134021016,"body_markdown":"@ElliottFrisch What I meant was how does the sort() function know what 1,-1 and 0 mean respectively ?","body":"@ElliottFrisch What I meant was how does the sort() function know what 1,-1 and 0 mean respectively ?"},{"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"score":1,"creation_date":1681228161,"post_id":75982125,"comment_id":134021122,"body_markdown":"Because it was programmed to know. Assuming you have a `Comparator c` then `c.compare(a,b)` will return one of those values (as discussed), then you use the result of the comparison to do the sorting (instead of `if (a &lt; b)` you have `if (c.compare(a,b) &lt; 0)` which means the same thing but allows you to have any kind of logic to determine that `a` is less than `b`).","body":"Because it was programmed to know. Assuming you have a <code>Comparator c</code> then <code>c.compare(a,b)</code> will return one of those values (as discussed), then you use the result of the comparison to do the sorting (instead of <code>if (a &lt; b)</code> you have <code>if (c.compare(a,b) &lt; 0)</code> which means the same thing but allows you to have any kind of logic to determine that <code>a</code> is less than <code>b</code>)."}],"owner":{"account_id":22319245,"reputation":41,"user_id":16542113,"display_name":"Ankit Biswas"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681182469,"creation_date":1681182469,"question_id":75982125,"body_markdown":"I was doing a leetcode problem where a user was sorting a 2-D array using `Arrays.sort(intervals, (a,b)-&gt;Integer.compare(a[0],b[0]));`\r\n\r\nNow, I understand to some extent what is happening here. The `sort()` method consults `compare()` every time it has to compare the integers. \r\n\r\nNow my question is how does the sort function know how to interpret the result of the lamda expression: `(a,b)-&gt;Integer.compare(a[0],b[0])`, as it only returns 1,0,-1 depending on the input.\r\n\r\nWould really help if someone could explain this to me.","title":"Understanding how to sort 2-d array using Arrays.sort() and Integer.compare()","body":"<p>I was doing a leetcode problem where a user was sorting a 2-D array using <code>Arrays.sort(intervals, (a,b)-&gt;Integer.compare(a[0],b[0]));</code></p>\n<p>Now, I understand to some extent what is happening here. The <code>sort()</code> method consults <code>compare()</code> every time it has to compare the integers.</p>\n<p>Now my question is how does the sort function know how to interpret the result of the lamda expression: <code>(a,b)-&gt;Integer.compare(a[0],b[0])</code>, as it only returns 1,0,-1 depending on the input.</p>\n<p>Would really help if someone could explain this to me.</p>\n"},{"tags":["java","spring-boot","maven","jenkins"],"answers":[{"tags":[],"owner":{"account_id":2540460,"reputation":471,"user_id":2206366,"accept_rate":0,"display_name":"user2206366"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681181003,"creation_date":1681181003,"answer_id":75982046,"question_id":75883542,"body_markdown":"As stated above I accidentally ran `mvn package test` not `mvn test package` or `mvn package` which resulted into this error. Although I am not sure why running test phase later messed up the spring-boot jar packaging. I was able to reproduce the same in local environment.","title":"Spring-boot multi module project","body":"<p>As stated above I accidentally ran <code>mvn package test</code> not <code>mvn test package</code> or <code>mvn package</code> which resulted into this error. Although I am not sure why running test phase later messed up the spring-boot jar packaging. I was able to reproduce the same in local environment.</p>\n"}],"owner":{"account_id":2540460,"reputation":471,"user_id":2206366,"accept_rate":0,"display_name":"user2206366"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":85,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681181003,"creation_date":1680141854,"question_id":75883542,"body_markdown":"I have the following pom structure,\r\n\r\n        &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    \r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n        &lt;groupId&gt;com.abc.xyz.parent&lt;/groupId&gt;\r\n        &lt;artifactId&gt;parent&lt;/artifactId&gt;\r\n        &lt;version&gt;0.1.0&lt;/version&gt;\r\n        &lt;packaging&gt;pom&lt;/packaging&gt;\r\n    \r\n        &lt;parent&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt; \r\n            &lt;version&gt;2.7.5&lt;/version&gt;\r\n        &lt;/parent&gt;\r\n    \r\n        &lt;properties&gt;\r\n            &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n            &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\r\n        &lt;revision&gt;0.1.0&lt;/revision&gt;\r\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\r\n        &lt;spring-boot.version&gt;2.7.5&lt;/spring-boot.version&gt;\r\n        &lt;powermock.version&gt;1.6.4&lt;/powermock.version&gt;\r\n        &lt;common-lib.version&gt;${revision}&lt;/common-lib.version&gt;\r\n        &lt;maven-jacoco.version&gt;0.8.6&lt;/maven-jacoco.version&gt;\r\n        &lt;maven-surefire.version&gt;3.0.0&lt;/maven-surefire.version&gt;\r\n        &lt;/properties&gt;\r\n    \r\n        &lt;!-- To build everything properly use &quot;mvn clean install -Pbuild&quot; --&gt;\r\n        &lt;modules&gt;        \r\n            &lt;module&gt;common-lib&lt;/module&gt;\r\n            &lt;module&gt;my-service&lt;/module&gt;\r\n        &lt;/modules&gt;\r\n        &lt;dependencyManagement&gt;\r\n          &lt;dependencies&gt;\r\n             &lt;dependency&gt;\r\n            &lt;groupId&gt;com.abc.xyz.parent&lt;/groupId&gt;\r\n            &lt;artifactId&gt;common-lib&lt;/artifactId&gt;\r\n            &lt;version&gt;${common-lib.version}&lt;/version&gt;\r\n           &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n        &lt;/dependencyManagement&gt;\r\n          \r\n\r\ncommon-lib&#39;s pom.xml\r\n\r\n        &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;groupId&gt;com.abc.xyz.parent&lt;/groupId&gt;\r\n    &lt;artifactId&gt;common-lib&lt;/artifactId&gt;\r\n    &lt;version&gt;0.1.0&lt;/version&gt;\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;com.abc.xyz.parent&lt;/groupId&gt;\r\n        &lt;artifactId&gt;parent&lt;/artifactId&gt;\r\n        &lt;relativePath&gt;../pom.xml&lt;/relativePath&gt;\r\n        &lt;version&gt;0.1.0&lt;/version&gt;\r\n    &lt;/parent&gt;\r\n\r\n    &lt;!-- \r\n     Do not configure dependencies here (version, scope, exclusions, etc). Define them in a\r\n     central place, the dependency management in the root pom.\r\n    --&gt;\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;       \r\n    &lt;/dependencies&gt;\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;    \r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;source&gt;${java.version}&lt;/source&gt;\r\n                    &lt;target&gt;${java.version}&lt;/target&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;${maven-surefire.version}&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;systemPropertyVariables&gt;\r\n                        &lt;jacoco-agent.destfile&gt;target/jacoco.exec&lt;/jacoco-agent.destfile&gt;\r\n                    &lt;/systemPropertyVariables&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n&lt;/project&gt;\r\n\r\nand service pox.xml as below,\r\n\r\n        &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;  \r\n        &lt;artifactId&gt;my-service&lt;/artifactId&gt;\r\n        &lt;version&gt;0.1.0&lt;/version&gt;\r\n\r\n         &lt;parent&gt;\r\n            &lt;groupId&gt;com.abc.xyz.parent&lt;/groupId&gt;\r\n            &lt;artifactId&gt;parent&lt;/artifactId&gt;\r\n            &lt;relativePath&gt;../pom.xml&lt;/relativePath&gt;\r\n            &lt;version&gt;0.1.0&lt;/version&gt;\r\n        &lt;/parent&gt;\r\n\r\n        &lt;!-- \r\n         Do not configure dependencies here (version, scope, exclusions, etc). Define them in a\r\n         central place, the dependency management in the root pom.\r\n        --&gt;\r\n        &lt;dependencies&gt;\r\n            &lt;!-- All spring-boot dependencies requires omitted--&gt;\r\n           &lt;dependency&gt;\r\n                &lt;groupId&gt;com.abc.xyz.parent&lt;/groupId&gt;\r\n                &lt;artifactId&gt;common-lib&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n\r\n        &lt;build&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.jacoco&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;${maven-jacoco.version}&lt;/version&gt;\r\n                    &lt;executions&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;id&gt;report&lt;/id&gt;\r\n                            &lt;goals&gt;\r\n                                &lt;goal&gt;report&lt;/goal&gt;\r\n                            &lt;/goals&gt;\r\n                        &lt;/execution&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;goals&gt;\r\n                                &lt;goal&gt;prepare-agent&lt;/goal&gt;\r\n                            &lt;/goals&gt;\r\n                        &lt;/execution&gt;\r\n                    &lt;/executions&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;${maven-surefire.version}&lt;/version&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;systemPropertyVariables&gt;\r\n                            &lt;jacoco-agent.destfile&gt;target/jacoco.exec&lt;/jacoco-agent.destfile&gt;\r\n                        &lt;/systemPropertyVariables&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;fork&gt;true&lt;/fork&gt;\r\n                        &lt;!-- &lt;executable&gt;true&lt;/executable&gt; --&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n        &lt;/build&gt;\r\n    &lt;/project&gt;\r\nI am running mvn package test and in local environment everything works fine and my-service.jar contains &quot;common-lib&quot; jar under BOOt_INF/lib but whenever I try to build it in Jenkins/CI I am getting a my-service.jar without common-lib packaged, though compilation succeeds in CI as well but fails when I run the application with &quot;java.io.FileNotFoundException&quot; exception. Can someone explain is anything wrong with this configuration?\r\n\r\n","title":"Spring-boot multi module project","body":"<p>I have the following pom structure,</p>\n<pre><code>    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;com.abc.xyz.parent&lt;/groupId&gt;\n    &lt;artifactId&gt;parent&lt;/artifactId&gt;\n    &lt;version&gt;0.1.0&lt;/version&gt;\n    &lt;packaging&gt;pom&lt;/packaging&gt;\n\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt; \n        &lt;version&gt;2.7.5&lt;/version&gt;\n    &lt;/parent&gt;\n\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n    &lt;revision&gt;0.1.0&lt;/revision&gt;\n    &lt;java.version&gt;1.8&lt;/java.version&gt;\n    &lt;spring-boot.version&gt;2.7.5&lt;/spring-boot.version&gt;\n    &lt;powermock.version&gt;1.6.4&lt;/powermock.version&gt;\n    &lt;common-lib.version&gt;${revision}&lt;/common-lib.version&gt;\n    &lt;maven-jacoco.version&gt;0.8.6&lt;/maven-jacoco.version&gt;\n    &lt;maven-surefire.version&gt;3.0.0&lt;/maven-surefire.version&gt;\n    &lt;/properties&gt;\n\n    &lt;!-- To build everything properly use &quot;mvn clean install -Pbuild&quot; --&gt;\n    &lt;modules&gt;        \n        &lt;module&gt;common-lib&lt;/module&gt;\n        &lt;module&gt;my-service&lt;/module&gt;\n    &lt;/modules&gt;\n    &lt;dependencyManagement&gt;\n      &lt;dependencies&gt;\n         &lt;dependency&gt;\n        &lt;groupId&gt;com.abc.xyz.parent&lt;/groupId&gt;\n        &lt;artifactId&gt;common-lib&lt;/artifactId&gt;\n        &lt;version&gt;${common-lib.version}&lt;/version&gt;\n       &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n    &lt;/dependencyManagement&gt;\n      \n</code></pre>\n<p>common-lib's pom.xml</p>\n<pre><code>    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n     xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n     xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n&lt;groupId&gt;com.abc.xyz.parent&lt;/groupId&gt;\n&lt;artifactId&gt;common-lib&lt;/artifactId&gt;\n&lt;version&gt;0.1.0&lt;/version&gt;\n&lt;parent&gt;\n    &lt;groupId&gt;com.abc.xyz.parent&lt;/groupId&gt;\n    &lt;artifactId&gt;parent&lt;/artifactId&gt;\n    &lt;relativePath&gt;../pom.xml&lt;/relativePath&gt;\n    &lt;version&gt;0.1.0&lt;/version&gt;\n&lt;/parent&gt;\n\n&lt;!-- \n Do not configure dependencies here (version, scope, exclusions, etc). Define them in a\n central place, the dependency management in the root pom.\n--&gt;\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n    &lt;/dependency&gt;       \n&lt;/dependencies&gt;\n&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;    \n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n                &lt;source&gt;${java.version}&lt;/source&gt;\n                &lt;target&gt;${java.version}&lt;/target&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n            &lt;version&gt;${maven-surefire.version}&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;systemPropertyVariables&gt;\n                    &lt;jacoco-agent.destfile&gt;target/jacoco.exec&lt;/jacoco-agent.destfile&gt;\n                &lt;/systemPropertyVariables&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n\n<p>and service pox.xml as below,</p>\n<pre><code>    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;  \n    &lt;artifactId&gt;my-service&lt;/artifactId&gt;\n    &lt;version&gt;0.1.0&lt;/version&gt;\n\n     &lt;parent&gt;\n        &lt;groupId&gt;com.abc.xyz.parent&lt;/groupId&gt;\n        &lt;artifactId&gt;parent&lt;/artifactId&gt;\n        &lt;relativePath&gt;../pom.xml&lt;/relativePath&gt;\n        &lt;version&gt;0.1.0&lt;/version&gt;\n    &lt;/parent&gt;\n\n    &lt;!-- \n     Do not configure dependencies here (version, scope, exclusions, etc). Define them in a\n     central place, the dependency management in the root pom.\n    --&gt;\n    &lt;dependencies&gt;\n        &lt;!-- All spring-boot dependencies requires omitted--&gt;\n       &lt;dependency&gt;\n            &lt;groupId&gt;com.abc.xyz.parent&lt;/groupId&gt;\n            &lt;artifactId&gt;common-lib&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.jacoco&lt;/groupId&gt;\n                &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;${maven-jacoco.version}&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;report&lt;/id&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;report&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                    &lt;execution&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;prepare-agent&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n                &lt;version&gt;${maven-surefire.version}&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;systemPropertyVariables&gt;\n                        &lt;jacoco-agent.destfile&gt;target/jacoco.exec&lt;/jacoco-agent.destfile&gt;\n                    &lt;/systemPropertyVariables&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;fork&gt;true&lt;/fork&gt;\n                    &lt;!-- &lt;executable&gt;true&lt;/executable&gt; --&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p>I am running mvn package test and in local environment everything works fine and my-service.jar contains &quot;common-lib&quot; jar under BOOt_INF/lib but whenever I try to build it in Jenkins/CI I am getting a my-service.jar without common-lib packaged, though compilation succeeds in CI as well but fails when I run the application with &quot;java.io.FileNotFoundException&quot; exception. Can someone explain is anything wrong with this configuration?</p>\n"},{"tags":["java","windows-7","javac"],"comments":[{"owner":{"account_id":200015,"reputation":4010,"user_id":445651,"accept_rate":82,"display_name":"Wolfpack&#39;08"},"score":0,"creation_date":1395993894,"post_id":22707097,"comment_id":34600627,"body_markdown":"I ran `javac HelloWorld.java`, and there is no output file (thusly, this question).","body":"I ran <code>javac HelloWorld.java</code>, and there is no output file (thusly, this question)."},{"owner":{"account_id":3023214,"reputation":20361,"user_id":2563754,"display_name":"Seelenvirtuose"},"score":2,"creation_date":1395995188,"post_id":22707097,"comment_id":34601182,"body_markdown":"What is the package declaration of HelloWorld?","body":"What is the package declaration of HelloWorld?"},{"owner":{"account_id":200015,"reputation":4010,"user_id":445651,"accept_rate":82,"display_name":"Wolfpack&#39;08"},"score":0,"creation_date":1395995916,"post_id":22707097,"comment_id":34601562,"body_markdown":"@Seelenvirtuose I&#39;m writing my first program, man.  I don&#39;t know what that is.  Can you tell me how to look for the information you want?","body":"@Seelenvirtuose I&#39;m writing my first program, man.  I don&#39;t know what that is.  Can you tell me how to look for the information you want?"},{"owner":{"account_id":2288194,"reputation":7556,"user_id":2011748,"display_name":"Peter Keller"},"score":0,"creation_date":1395998326,"post_id":22707097,"comment_id":34602962,"body_markdown":"Perhaps you should show us the Java source file.","body":"Perhaps you should show us the Java source file."}],"answers":[{"tags":[],"owner":{"account_id":2288194,"reputation":7556,"user_id":2011748,"display_name":"Peter Keller"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1395998955,"creation_date":1395993668,"answer_id":22707211,"question_id":22707097,"body_markdown":"If `HelloWorld.java` compiled without any errors, then the file `HelloWorld.class` should definitely be in the `java_tut` directory. \r\n\r\n**EDIT (based on your comments and edits):**\r\n\r\nCheck if your Java source file `HelloWorld.java` looks as follows:\r\n\r\n    public class HelloWorld {\r\n        public static void main(String[] args) {\r\n            System.out.println(&quot;Hellow, World!&quot;);\r\n        } \r\n    }\r\n\r\nThe class must have the same name as the Java source file or you get following compiler error message:\r\n\r\n    [515]% javac HelloWorld.java \r\n    HelloWorld.java:1: error: class YourClassName is public, should be declared in a file named YourClassName.java\r\n    public class YourClassName {\r\n       ^\r\n    1 error\r\n","title":"Cannot find output .class files using javac?","body":"<p>If <code>HelloWorld.java</code> compiled without any errors, then the file <code>HelloWorld.class</code> should definitely be in the <code>java_tut</code> directory. </p>\n\n<p><strong>EDIT (based on your comments and edits):</strong></p>\n\n<p>Check if your Java source file <code>HelloWorld.java</code> looks as follows:</p>\n\n<pre><code>public class HelloWorld {\n    public static void main(String[] args) {\n        System.out.println(\"Hellow, World!\");\n    } \n}\n</code></pre>\n\n<p>The class must have the same name as the Java source file or you get following compiler error message:</p>\n\n<pre><code>[515]% javac HelloWorld.java \nHelloWorld.java:1: error: class YourClassName is public, should be declared in a file named YourClassName.java\npublic class YourClassName {\n   ^\n1 error\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2288194,"reputation":7556,"user_id":2011748,"display_name":"Peter Keller"},"score":0,"creation_date":1395996506,"post_id":22707776,"comment_id":34601900,"body_markdown":"If this really was the problem, then `javac` should have failed, too?","body":"If this really was the problem, then <code>javac</code> should have failed, too?"},{"owner":{"account_id":3023214,"reputation":20361,"user_id":2563754,"display_name":"Seelenvirtuose"},"score":0,"creation_date":1395997445,"post_id":22707776,"comment_id":34602467,"body_markdown":"Yes, you are right. I also assume, that he got a compile error. What I wanted to show is the correct approach, a beginner should follow. With this procedure he should get a working program (and the expected output), regardless what problems he had before.","body":"Yes, you are right. I also assume, that he got a compile error. What I wanted to show is the correct approach, a beginner should follow. With this procedure he should get a working program (and the expected output), regardless what problems he had before."}],"tags":[],"owner":{"account_id":3023214,"reputation":20361,"user_id":2563754,"display_name":"Seelenvirtuose"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1395995919,"creation_date":1395995919,"answer_id":22707776,"question_id":22707097,"body_markdown":"Although I asked about the package declaration, I can tell you the correct approach:\r\n\r\nLet&#39;s assume you have a Java class with that source:\r\n\r\n    package my.test;\r\n    public class HelloWorld {\r\n        public static void main(String[] args) {\r\n            System.out.println(&quot;Hello World.&quot;);\r\n        }\r\n    }\r\n\r\nAssuming your project root directory is\r\n\r\n&gt; C:\\Projects\\java_tut\r\n\r\nyou must put the source file `HelloWorld.java` into the directory\r\n\r\n&gt; C:\\Projects\\java_tut\\my\\test\r\n\r\nAfterwards you compile and start this little program while being in the `java_tut` directory with the following commands:\r\n\r\n    C:\\Projects\\java_tut&gt; javac my/test/HelloWorld.java\r\n    \r\n    C:\\Projects\\java_tut&gt; dir my\\test\r\n    [...]\r\n    28.03.2014  09:35    &lt;DIR&gt;          .\r\n    28.03.2014  09:35    &lt;DIR&gt;          ..\r\n    28.03.2014  09:35               434 HelloWorld.class\r\n    28.03.2014  09:34               134 HelloWorld.java\r\n    [...]\r\n    \r\n    C:\\Projects\\java_tut&gt; java my.test.HelloWorld\r\n    Hello World.\r\n\r\nExplanation: If working with packages (and you always should use packages for your classes) you must not &quot;sit&quot; in that package, but always run the commands from outside the package (folder).","title":"Cannot find output .class files using javac?","body":"<p>Although I asked about the package declaration, I can tell you the correct approach:</p>\n\n<p>Let's assume you have a Java class with that source:</p>\n\n<pre><code>package my.test;\npublic class HelloWorld {\n    public static void main(String[] args) {\n        System.out.println(\"Hello World.\");\n    }\n}\n</code></pre>\n\n<p>Assuming your project root directory is</p>\n\n<blockquote>\n  <p>C:\\Projects\\java_tut</p>\n</blockquote>\n\n<p>you must put the source file <code>HelloWorld.java</code> into the directory</p>\n\n<blockquote>\n  <p>C:\\Projects\\java_tut\\my\\test</p>\n</blockquote>\n\n<p>Afterwards you compile and start this little program while being in the <code>java_tut</code> directory with the following commands:</p>\n\n<pre><code>C:\\Projects\\java_tut&gt; javac my/test/HelloWorld.java\n\nC:\\Projects\\java_tut&gt; dir my\\test\n[...]\n28.03.2014  09:35    &lt;DIR&gt;          .\n28.03.2014  09:35    &lt;DIR&gt;          ..\n28.03.2014  09:35               434 HelloWorld.class\n28.03.2014  09:34               134 HelloWorld.java\n[...]\n\nC:\\Projects\\java_tut&gt; java my.test.HelloWorld\nHello World.\n</code></pre>\n\n<p>Explanation: If working with packages (and you always should use packages for your classes) you must not \"sit\" in that package, but always run the commands from outside the package (folder).</p>\n"},{"comments":[{"owner":{"account_id":2288194,"reputation":7556,"user_id":2011748,"display_name":"Peter Keller"},"score":1,"creation_date":1395998521,"post_id":22708510,"comment_id":34603093,"body_markdown":"In this case you should have seen following compiler error message: &quot;[515]% javac HelloWorld.java \nHelloWorld.java:1: error: class YourClassName is public, should be declared in a file named YourClassName.java&quot;","body":"In this case you should have seen following compiler error message: &quot;[515]% javac HelloWorld.java  HelloWorld.java:1: error: class YourClassName is public, should be declared in a file named YourClassName.java&quot;"}],"tags":[],"owner":{"account_id":200015,"reputation":4010,"user_id":445651,"accept_rate":82,"display_name":"Wolfpack&#39;08"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1395998146,"creation_date":1395998146,"answer_id":22708510,"question_id":22707097,"body_markdown":"`YourClassName.class` is the correct file in this case.  The class name isn&#39;t generated based on the .java file&#39;s name.  It&#39;s generated based on the class name inside the .java file.  In my .java file, I named the class `YourClassName` and not `HelloWorld`.","title":"Cannot find output .class files using javac?","body":"<p><code>YourClassName.class</code> is the correct file in this case.  The class name isn't generated based on the .java file's name.  It's generated based on the class name inside the .java file.  In my .java file, I named the class <code>YourClassName</code> and not <code>HelloWorld</code>.</p>\n"},{"comments":[{"owner":{"account_id":4206062,"reputation":554,"user_id":3444923,"display_name":"hunzter"},"score":2,"creation_date":1566485013,"post_id":31605284,"comment_id":101679047,"body_markdown":"Cannot imagine I got this for 10 minutes. Mine was saving to another location and keep trying to build the original file. Thanks any way. Mine was only 2 years though.","body":"Cannot imagine I got this for 10 minutes. Mine was saving to another location and keep trying to build the original file. Thanks any way. Mine was only 2 years though."}],"tags":[],"owner":{"account_id":1927222,"reputation":404,"user_id":1737644,"accept_rate":75,"display_name":"shful"},"comment_count":1,"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1437725201,"creation_date":1437725201,"answer_id":31605284,"question_id":22707097,"body_markdown":"Another possible reason is an empty *.java* source file.\r\n\r\nThis causes *javac* to silently produce nothing.\r\n\r\nI experienced that effect with a Hello Word program and a Macintosh editor - which would save with *Cmd-S*, but does not save with *Ctrl-S*. I learned this after 20 years of Java programming.\r\n\r\n\r\n","title":"Cannot find output .class files using javac?","body":"<p>Another possible reason is an empty <em>.java</em> source file.</p>\n\n<p>This causes <em>javac</em> to silently produce nothing.</p>\n\n<p>I experienced that effect with a Hello Word program and a Macintosh editor - which would save with <em>Cmd-S</em>, but does not save with <em>Ctrl-S</em>. I learned this after 20 years of Java programming.</p>\n"},{"tags":[],"owner":{"account_id":6942726,"reputation":151,"user_id":6700703,"display_name":"Rahul Singhal"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681180059,"creation_date":1681180059,"answer_id":75981994,"question_id":22707097,"body_markdown":"One of the reason could be. You have not saved your program. Before running javac command always save the program(if u did any changes then only). Then running javac command will produce .class file. ","title":"Cannot find output .class files using javac?","body":"<p>One of the reason could be. You have not saved your program. Before running javac command always save the program(if u did any changes then only). Then running javac command will produce .class file.</p>\n"}],"owner":{"account_id":200015,"reputation":4010,"user_id":445651,"accept_rate":82,"display_name":"Wolfpack&#39;08"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10705,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":22707211,"answer_count":5,"score":4,"last_activity_date":1681180059,"creation_date":1395993146,"question_id":22707097,"body_markdown":"I type `javac helloworld.java` at cmd in win 7.\r\n\r\n    C:\\Users\\User\\Downloads\\java_tut&gt;javac HelloWorld.java\r\n    \r\n    C:\\Users\\User\\Downloads\\java_tut&gt;dir *.class\r\n    \r\n     Directory of C:\\Users\\User\\Downloads\\java_tut\r\n    \r\n    03/28/2014  05:42 PM               429 YourClassName.class\r\n    \r\n    C:\\Users\\User\\Downloads\\java_tut&gt;\r\n\r\nI searched the following directories for helloworld.class:\r\njava, jre, jdk, java_tut, jre/bin, jdk/bin, and my entire harddrive.\r\n\r\n\r\nI did need to manually add the /jdk/bin directory to my path.  I wonder if that matters?","title":"Cannot find output .class files using javac?","body":"<p>I type <code>javac helloworld.java</code> at cmd in win 7.</p>\n\n<pre><code>C:\\Users\\User\\Downloads\\java_tut&gt;javac HelloWorld.java\n\nC:\\Users\\User\\Downloads\\java_tut&gt;dir *.class\n\n Directory of C:\\Users\\User\\Downloads\\java_tut\n\n03/28/2014  05:42 PM               429 YourClassName.class\n\nC:\\Users\\User\\Downloads\\java_tut&gt;\n</code></pre>\n\n<p>I searched the following directories for helloworld.class:\njava, jre, jdk, java_tut, jre/bin, jdk/bin, and my entire harddrive.</p>\n\n<p>I did need to manually add the /jdk/bin directory to my path.  I wonder if that matters?</p>\n"},{"tags":["java","performance","concurrency","java.util.concurrent"],"comments":[{"owner":{"account_id":28104689,"reputation":512,"user_id":21473475,"display_name":"Arfur Narf"},"score":2,"creation_date":1681178050,"post_id":75981864,"comment_id":134011066,"body_markdown":"What have you measured as the overhead?  How much faster does your program run with the alternative, less-clear formulation?  And why not just use an AtomicInteger?","body":"What have you measured as the overhead?  How much faster does your program run with the alternative, less-clear formulation?  And why not just use an AtomicInteger?"},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1681178257,"post_id":75981864,"comment_id":134011087,"body_markdown":"I would have thought is would be *slower* ... since thread 1 now needs to generate function references and thread 2 needs to call `accept` to get the value.  But this smells like *premature optimization*.","body":"I would have thought is would be <i>slower</i> ... since thread 1 now needs to generate function references and thread 2 needs to call <code>accept</code> to get the value.  But this smells like <i>premature optimization</i>."},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":1,"creation_date":1681178468,"post_id":75981864,"comment_id":134011110,"body_markdown":"I&#39;d also assume that the `Supplier` is now stored in a `volatile` reference, meaning the idea that started this optimization has in fact not gone anywhere.","body":"I&#39;d also assume that the <code>Supplier</code> is now stored in a <code>volatile</code> reference, meaning the idea that started this optimization has in fact not gone anywhere."},{"owner":{"account_id":22931464,"reputation":459,"user_id":17065671,"display_name":"Qu&#226;n Anh Mai"},"score":0,"creation_date":1681286202,"post_id":75981864,"comment_id":134030265,"body_markdown":"You do not need an `AtomicReference`, just access `MyObject` directly in a volatile field and you are fine","body":"You do not need an <code>AtomicReference</code>, just access <code>MyObject</code> directly in a volatile field and you are fine"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1681813627,"post_id":75981864,"comment_id":134113560,"body_markdown":"Some things are unclear. 1. Does thread 1 calculate exactly one value or new values repeatedly? 2. What does sometimes mean in this context? From time to time (multiple times during the threads lifetime but with large time in-between) or just once or never in one runtime? 3. How does thread 2 ensure that thread 1 has completed the calculation by the time it needs the value (for the first time)?","body":"Some things are unclear. 1. Does thread 1 calculate exactly one value or new values repeatedly? 2. What does sometimes mean in this context? From time to time (multiple times during the threads lifetime but with large time in-between) or just once or never in one runtime? 3. How does thread 2 ensure that thread 1 has completed the calculation by the time it needs the value (for the first time)?"}],"owner":{"account_id":465939,"reputation":3614,"user_id":870382,"accept_rate":56,"display_name":"Novice User"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681178355,"creation_date":1681177745,"question_id":75981864,"body_markdown":"Thread 1 -&gt; Compute a value `MyObject` and store in `AtomicReference&lt; MyObject&gt;&gt;`\r\n\r\nThread 2 -&gt; Would sometimes need the value of `MyObject` stored by Thread 1\r\n\r\nLooking at `AtomicReference::set` the value set in `volatile` field. \r\n\r\nSince Thread 2 would only need the value sometimes does it help in performance if from Thread 1 it is instead set as `AtomicReference&lt;Supplier&lt; MyObject &gt;&gt;`?","title":"Avoid cost of volatile value in AtomicReference","body":"<p>Thread 1 -&gt; Compute a value <code>MyObject</code> and store in <code>AtomicReference&lt; MyObject&gt;&gt;</code></p>\n<p>Thread 2 -&gt; Would sometimes need the value of <code>MyObject</code> stored by Thread 1</p>\n<p>Looking at <code>AtomicReference::set</code> the value set in <code>volatile</code> field.</p>\n<p>Since Thread 2 would only need the value sometimes does it help in performance if from Thread 1 it is instead set as <code>AtomicReference&lt;Supplier&lt; MyObject &gt;&gt;</code>?</p>\n"},{"tags":["java","gluon-mobile"],"owner":{"account_id":2016330,"reputation":13111,"user_id":1803551,"accept_rate":67,"display_name":"user1803551"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1681178297,"creation_date":1681178297,"question_id":75981901,"body_markdown":"We are writing something similar to a navigation app, which can be either visual-based or sound-based. We are hitting a problem where the phone will enter sleep mode (might not be the correct technical term) after a while during the runtime of the application if the screen is not interacted with, causing it to both blank the screen and interrupt the `LocationService` of Attach.\r\n\r\nReproduction is simple: create any Gluon Mobile application, like the started demo one, open it and wait. The phone will enter sleep mode.\r\n\r\nWe would like to do the following:\r\n\r\n1. When visual mode is on, keep the screen lit and keep sending location updates without letting the phone stop these via some power saving mode / sleep. Some applications to this, like Google Maps, so this is not a special requirement.\r\n2. When only sound mode is on, the phone can turn off the screen to save on battery, but we still need the application running with location updates and the ability to give sound notification to the user.\r\n\r\nI&#39;ve looked into the `LifecycleService` and the `BatteryService` in Attach, but there is no functionality that matches what we need. Lifecycle allows to listen to changes in the lifecycle of the application, but not modify them (except for shutting down).\r\n\r\nHow can we fulfill the requirements? For now we are on Android only, but in the future we plan to expand to iOS as well.","title":"How to prevent an app from going to sleep using Gluon Mobile?","body":"<p>We are writing something similar to a navigation app, which can be either visual-based or sound-based. We are hitting a problem where the phone will enter sleep mode (might not be the correct technical term) after a while during the runtime of the application if the screen is not interacted with, causing it to both blank the screen and interrupt the <code>LocationService</code> of Attach.</p>\n<p>Reproduction is simple: create any Gluon Mobile application, like the started demo one, open it and wait. The phone will enter sleep mode.</p>\n<p>We would like to do the following:</p>\n<ol>\n<li>When visual mode is on, keep the screen lit and keep sending location updates without letting the phone stop these via some power saving mode / sleep. Some applications to this, like Google Maps, so this is not a special requirement.</li>\n<li>When only sound mode is on, the phone can turn off the screen to save on battery, but we still need the application running with location updates and the ability to give sound notification to the user.</li>\n</ol>\n<p>I've looked into the <code>LifecycleService</code> and the <code>BatteryService</code> in Attach, but there is no functionality that matches what we need. Lifecycle allows to listen to changes in the lifecycle of the application, but not modify them (except for shutting down).</p>\n<p>How can we fulfill the requirements? For now we are on Android only, but in the future we plan to expand to iOS as well.</p>\n"},{"tags":["java","annotations"],"owner":{"account_id":3753631,"reputation":2325,"user_id":3120564,"accept_rate":80,"display_name":"Jaumzera"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681178068,"creation_date":1681175905,"question_id":75981778,"body_markdown":"I&#39;d like to do something like the following:\r\n\r\n```java\r\n@Target(ElementType.METHOD)\r\n@Retention(RetentionPolicy.RUNTIME)@Test\r\n@Tag(&quot;&quot;)\r\n@DisplayName(&quot;&quot;)\r\npublic @interface TaggedTest {\r\n   // ...\r\n}\r\n```\r\n\r\nAnd use that annotation like the following:\r\n\r\n```java\r\n@TaggedTest(tag=&quot;unitTest&quot;, displayName=&quot;A custom display name&quot;)\r\npublic void myMethod() {\r\n   // some code\r\n}\r\n```\r\n\r\nI know that&#39;s possible when you are using SpringBoot annotations. But how to get the same using any kind of other annotations, like JUnit, JPA or whatever?","title":"Compound annotation for Junit 5","body":"<p>I'd like to do something like the following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Target(ElementType.METHOD)\n@Retention(RetentionPolicy.RUNTIME)@Test\n@Tag(&quot;&quot;)\n@DisplayName(&quot;&quot;)\npublic @interface TaggedTest {\n   // ...\n}\n</code></pre>\n<p>And use that annotation like the following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@TaggedTest(tag=&quot;unitTest&quot;, displayName=&quot;A custom display name&quot;)\npublic void myMethod() {\n   // some code\n}\n</code></pre>\n<p>I know that's possible when you are using SpringBoot annotations. But how to get the same using any kind of other annotations, like JUnit, JPA or whatever?</p>\n"},{"tags":["java","arrays","json"],"comments":[{"owner":{"account_id":187056,"reputation":4353,"user_id":424830,"accept_rate":16,"display_name":"Shriram"},"score":0,"creation_date":1446998734,"post_id":33595941,"comment_id":54966946,"body_markdown":"possible this link can help http://stackoverflow.com/questions/4307118/jsonarray-to-hashmap","body":"possible this link can help <a href=\"http://stackoverflow.com/questions/4307118/jsonarray-to-hashmap\">stackoverflow.com/questions/4307118/jsonarray-to-hashmap</a>"},{"owner":{"account_id":1925003,"reputation":393,"user_id":1735676,"accept_rate":23,"display_name":"Zoef"},"score":0,"creation_date":1446999470,"post_id":33595941,"comment_id":54967200,"body_markdown":"no sorry, already tried that one, some methods don&#39;t seem to work with that example","body":"no sorry, already tried that one, some methods don&#39;t seem to work with that example"},{"owner":{"account_id":5599853,"reputation":2535,"user_id":4436434,"display_name":"BrunoLevy"},"score":0,"creation_date":1447001122,"post_id":33595941,"comment_id":54967777,"body_markdown":"what did you try and what was the result ?","body":"what did you try and what was the result ?"},{"owner":{"account_id":1925003,"reputation":393,"user_id":1735676,"accept_rate":23,"display_name":"Zoef"},"score":0,"creation_date":1447149200,"post_id":33595941,"comment_id":55027980,"body_markdown":"I tried the code from the link you gave me. But &quot;JSONObject&quot; and &quot;optJSONObject&quot; couldn&#39;t be resolved, maybe because I use javax.json libraries and that guy uses another library?","body":"I tried the code from the link you gave me. But &quot;JSONObject&quot; and &quot;optJSONObject&quot; couldn&#39;t be resolved, maybe because I use javax.json libraries and that guy uses another library?"}],"answers":[{"comments":[{"owner":{"account_id":463980,"reputation":6172,"user_id":867206,"accept_rate":14,"display_name":"Ajay Takur"},"score":0,"creation_date":1555495760,"post_id":33627560,"comment_id":98128996,"body_markdown":"Error @getJsonObject method","body":"Error @getJsonObject method"},{"owner":{"account_id":11338727,"reputation":151,"user_id":8313633,"display_name":"DrAchernar"},"score":0,"creation_date":1645688309,"post_id":33627560,"comment_id":125939756,"body_markdown":"should be length() instead of size()?","body":"should be length() instead of size()?"},{"owner":{"account_id":4206618,"reputation":808,"user_id":4180447,"accept_rate":47,"display_name":"tarekahf"},"score":0,"creation_date":1663306653,"post_id":33627560,"comment_id":130212460,"body_markdown":"How is this going to work? The last item of `type` and `amount` will win, and I don&#39;t see how the list is going to be created on the map. I think it should be defined as `Map&lt;String, ArrayList&gt; cargList = new HasMap&lt;&gt;()` then generate the array list `myCargoList` from the JSON Array, and add it to the map using `cargo.put(&quot;cargoList&quot;, myCargoList)`. Please let me know if this is the correct understanding.","body":"How is this going to work? The last item of <code>type</code> and <code>amount</code> will win, and I don&#39;t see how the list is going to be created on the map. I think it should be defined as <code>Map&lt;String, ArrayList&gt; cargList = new HasMap&lt;&gt;()</code> then generate the array list <code>myCargoList</code> from the JSON Array, and add it to the map using <code>cargo.put(&quot;cargoList&quot;, myCargoList)</code>. Please let me know if this is the correct understanding."}],"tags":[],"owner":{"account_id":1925003,"reputation":393,"user_id":1735676,"accept_rate":23,"display_name":"Zoef"},"comment_count":3,"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1501455252,"creation_date":1447150357,"answer_id":33627560,"question_id":33595941,"body_markdown":"This fixed it for me:\r\n\r\n    JsonArray jsoncargo = jsonObject.getJsonArray(&quot;cargo&quot;);\r\n\r\n    Map&lt;String, Integer&gt; cargo = new HashMap&lt;&gt;();\r\n    for (int i = 0; i &lt; jsoncargo.size(); i++) {            \r\n        String type = jsoncargo.getJsonObject(i).getString(&quot;type&quot;);\r\n        Integer amount = jsoncargo.getJsonObject(i).getInt(&quot;amount&quot;);\r\n        cargo.put(type, amount);\r\n    }","title":"How to convert JsonArray to Hashmap","body":"<p>This fixed it for me:</p>\n\n<pre><code>JsonArray jsoncargo = jsonObject.getJsonArray(\"cargo\");\n\nMap&lt;String, Integer&gt; cargo = new HashMap&lt;&gt;();\nfor (int i = 0; i &lt; jsoncargo.size(); i++) {            \n    String type = jsoncargo.getJsonObject(i).getString(\"type\");\n    Integer amount = jsoncargo.getJsonObject(i).getInt(\"amount\");\n    cargo.put(type, amount);\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":10167202,"reputation":3755,"user_id":7508700,"display_name":"David Buck"},"score":1,"creation_date":1584010004,"post_id":60651768,"comment_id":107306946,"body_markdown":"While this code may solve the question, [including an explanation](https://meta.stackexchange.com/q/114762) of how and why this solves the problem would really help to improve the quality of your post, and probably result in more up-votes. Remember that you are answering the question for readers in the future, not just the person asking now. Please edit your answer to add explanations and give an indication of what limitations and assumptions apply.","body":"While this code may solve the question, <a href=\"https://meta.stackexchange.com/q/114762\">including an explanation</a> of how and why this solves the problem would really help to improve the quality of your post, and probably result in more up-votes. Remember that you are answering the question for readers in the future, not just the person asking now. Please edit your answer to add explanations and give an indication of what limitations and assumptions apply."}],"tags":[],"owner":{"account_id":2751906,"reputation":429,"user_id":2538853,"display_name":"Satya"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1584026197,"creation_date":1584007701,"answer_id":60651768,"question_id":33595941,"body_markdown":"Try creating a new HashMap, and loop through the JSONArray, adding each element to the hashmap.\r\n\r\n    JSONArray allCargo = jsonObject.getJsonArray(&quot;cargo&quot;);\r\n\r\n    HashMap&lt;String, String&gt; hm = new HashMap();\r\n\r\n    for(Object cargo : allCargo) {\r\n        LinkedHashMap lhm = (LinkedHashMap) cargo;\r\n        hm.put((String)lhm.get(&quot;type&quot;), (String)lhm.get(&quot;amount&quot;));\r\n    }","title":"How to convert JsonArray to Hashmap","body":"<p>Try creating a new HashMap, and loop through the JSONArray, adding each element to the hashmap.</p>\n\n<pre><code>JSONArray allCargo = jsonObject.getJsonArray(\"cargo\");\n\nHashMap&lt;String, String&gt; hm = new HashMap();\n\nfor(Object cargo : allCargo) {\n    LinkedHashMap lhm = (LinkedHashMap) cargo;\n    hm.put((String)lhm.get(\"type\"), (String)lhm.get(\"amount\"));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4949663,"reputation":542,"user_id":3984055,"display_name":"Catalin Ciolocoiu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1648116124,"creation_date":1648114130,"answer_id":71599920,"question_id":33595941,"body_markdown":"I&#39;ve been able to solve this using the [Google GSON][1] \r\n\r\n\r\n  [1]: https://github.com/google/gson\r\n\r\n        Map&lt;String, Integer&gt; cargoMap = new HashMap&lt;&gt;();\r\n\r\n        JsonObject jsonObject = new Gson().fromJson(yourJsonString, JsonObject.class);\r\n        JsonArray cargo = jsonObject.getAsJsonArray(&quot;cargo&quot;);\r\n        cargo.forEach(item -&gt;\r\n        {\r\n            String type = item.getAsJsonObject().get(&quot;type&quot;).getAsString();\r\n            int amount = item.getAsJsonObject().get(&quot;amount&quot;).getAsInt();\r\n            if (StringUtils.isNotBlank(type) || amount != 0) {\r\n                cargoMap.put(type, amount);\r\n            }\r\n        });\r\n\r\nWhere &quot;yourJsonString&quot; is the whole json that contains  the cargo json array.","title":"How to convert JsonArray to Hashmap","body":"<p>I've been able to solve this using the <a href=\"https://github.com/google/gson\" rel=\"nofollow noreferrer\">Google GSON</a></p>\n<pre><code>    Map&lt;String, Integer&gt; cargoMap = new HashMap&lt;&gt;();\n\n    JsonObject jsonObject = new Gson().fromJson(yourJsonString, JsonObject.class);\n    JsonArray cargo = jsonObject.getAsJsonArray(&quot;cargo&quot;);\n    cargo.forEach(item -&gt;\n    {\n        String type = item.getAsJsonObject().get(&quot;type&quot;).getAsString();\n        int amount = item.getAsJsonObject().get(&quot;amount&quot;).getAsInt();\n        if (StringUtils.isNotBlank(type) || amount != 0) {\n            cargoMap.put(type, amount);\n        }\n    });\n</code></pre>\n<p>Where &quot;yourJsonString&quot; is the whole json that contains  the cargo json array.</p>\n"},{"tags":[],"owner":{"account_id":9973297,"reputation":271,"user_id":7378704,"display_name":"Stelan Briyan Simonsz"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681177647,"creation_date":1681177647,"answer_id":75981861,"question_id":33595941,"body_markdown":"If the JSON is\r\n\r\n        [\r\n            {\r\n                &quot;key&quot;: &quot;customerRefNo&quot;,\r\n                &quot;value&quot;: &quot;A&quot;\r\n            }\r\n        ]\r\n       \r\n\r\n     Map&lt;String, String&gt; map = new HashMap&lt;&gt;();\r\n            params.forEach(e -&gt; map.put(e.get(&quot;key&quot;).asText(), e.get(&quot;value&quot;).asText()));","title":"How to convert JsonArray to Hashmap","body":"<p>If the JSON is</p>\n<pre><code>    [\n        {\n            &quot;key&quot;: &quot;customerRefNo&quot;,\n            &quot;value&quot;: &quot;A&quot;\n        }\n    ]\n   \n\n Map&lt;String, String&gt; map = new HashMap&lt;&gt;();\n        params.forEach(e -&gt; map.put(e.get(&quot;key&quot;).asText(), e.get(&quot;value&quot;).asText()));\n</code></pre>\n"}],"owner":{"account_id":1925003,"reputation":393,"user_id":1735676,"accept_rate":23,"display_name":"Zoef"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47718,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"answer_count":4,"score":11,"last_activity_date":1681177647,"creation_date":1446998630,"question_id":33595941,"body_markdown":"I&#39;ve been able to get a jsonarray from a json string, but don&#39;t know how to put it in a Hashmap with a String that shows the type of cargo and an Integer showing the amount.\r\n\r\nThe string:\r\n\r\n    &quot;cargo&quot;:[\t\r\n\t\t{&quot;type&quot;:&quot;Coals&quot;,&quot;amount&quot;:75309},\t\t\r\n\t\t{&quot;type&quot;:&quot;Chemicals&quot;,&quot;amount&quot;:54454},\t\t\r\n\t\t{&quot;type&quot;:&quot;Food&quot;,&quot;amount&quot;:31659},\t\t\r\n\t\t{&quot;type&quot;:&quot;Oil&quot;,&quot;amount&quot;:18378}\r\n\t]","title":"How to convert JsonArray to Hashmap","body":"<p>I've been able to get a jsonarray from a json string, but don't know how to put it in a Hashmap with a String that shows the type of cargo and an Integer showing the amount.</p>\n\n<p>The string:</p>\n\n<pre><code>\"cargo\":[   \n    {\"type\":\"Coals\",\"amount\":75309},        \n    {\"type\":\"Chemicals\",\"amount\":54454},        \n    {\"type\":\"Food\",\"amount\":31659},     \n    {\"type\":\"Oil\",\"amount\":18378}\n]\n</code></pre>\n"},{"tags":["java","sockets","multiplayer"],"comments":[{"owner":{"account_id":2132213,"reputation":11287,"user_id":1892802,"accept_rate":100,"display_name":"ug_"},"score":1,"creation_date":1428602474,"post_id":29545597,"comment_id":47242916,"body_markdown":"The question is a bit broad and open ended for StackOverflow. Many good examples of using `Socket` and `ServerSocket` can be found online. A quick search turned up what looks to be a good example http://kodejava.org/how-do-i-create-a-client-server-socket-communication/","body":"The question is a bit broad and open ended for StackOverflow. Many good examples of using <code>Socket</code> and <code>ServerSocket</code> can be found online. A quick search turned up what looks to be a good example <a href=\"http://kodejava.org/how-do-i-create-a-client-server-socket-communication/\" rel=\"nofollow noreferrer\">kodejava.org/&hellip;</a>"},{"owner":{"account_id":6086111,"reputation":33,"user_id":4750101,"display_name":"Richard H."},"score":0,"creation_date":1428603530,"post_id":29545597,"comment_id":47243525,"body_markdown":"I mean somtehing like that: Player create a game, waiting for other players. And now I don&#39;t know how to do that the othe players can join to that game. If I must save the IP of player and on that IP the others will be connected or...I don&#39;t know. I realy have no idea how can I do that","body":"I mean somtehing like that: Player create a game, waiting for other players. And now I don&#39;t know how to do that the othe players can join to that game. If I must save the IP of player and on that IP the others will be connected or...I don&#39;t know. I realy have no idea how can I do that"},{"owner":{"account_id":2132213,"reputation":11287,"user_id":1892802,"accept_rate":100,"display_name":"ug_"},"score":0,"creation_date":1428605109,"post_id":29545597,"comment_id":47244444,"body_markdown":"I think the saying goes &quot;You must learn to crawl before you can walk&quot;. Start with something small, build on it. Your first attempt wont be perfect it may not even be good. Learn from it and build on it. Sockets and network connections are intermediate topics at best.","body":"I think the saying goes &quot;You must learn to crawl before you can walk&quot;. Start with something small, build on it. Your first attempt wont be perfect it may not even be good. Learn from it and build on it. Sockets and network connections are intermediate topics at best."}],"answers":[{"tags":[],"owner":{"account_id":916980,"reputation":8820,"user_id":2580516,"display_name":"Warren Dew"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1428690615,"creation_date":1428690615,"answer_id":29568400,"question_id":29545597,"body_markdown":"Here is one way to handle it.  When a player wants to create a game, his copy of the application should open a ServerSocket on a known port - a port number that the application knows - and maybe display to the player the IP address that the socket was opened on.\r\n\r\nThen when another player wants to join a game, she should enter that same IP address and her copy of the application should connect using a regular client Socket, the IP address entered, and the known port that the application knows.\r\n\r\nCheck the Socket and ServerSocket javadoc for details.","title":"Multiplayer game in Java. Connect client (player) to game that was created by other client","body":"<p>Here is one way to handle it.  When a player wants to create a game, his copy of the application should open a ServerSocket on a known port - a port number that the application knows - and maybe display to the player the IP address that the socket was opened on.</p>\n\n<p>Then when another player wants to join a game, she should enter that same IP address and her copy of the application should connect using a regular client Socket, the IP address entered, and the known port that the application knows.</p>\n\n<p>Check the Socket and ServerSocket javadoc for details.</p>\n"},{"tags":[],"owner":{"display_name":"user4718768"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1681177578,"creation_date":1434212583,"answer_id":30820890,"question_id":29545597,"body_markdown":"Another client cannot be connected to the Client A because of his firewall.\r\n\r\nYou can create two majors kinds of network:\r\n\r\n - Server-Client\r\n\r\n - Peer-to-Peer\r\n\r\nBut a client can save some data to the server and the server can send them to all the clients (you don&#39;t need a Peer-to-Peer network for allow the Client B to send some data to the Client A).\r\n\r\nExample: The Client B send his map position to the server, the server send the data to all the clients, so the Client A is able to draw a character tileset at the position of the Client B.\r\n\r\nFor connect two PCs together, you need to forward a port from the modem of your server to the PC used as server, and open the port from the firewall of the PC used as server.\r\n\r\nYou can also take a look here [https://stackoverflow.com/questions/30227722/creating-a-multiplayer-game-in-python/30228185#30228185][1], I give an example where the clients was able to connect them together with IRC and play at a Tic-Tac-Toe game (so you didn&#39;t have to manage a server). I have add an example in Java at the end of this post.\r\n\r\n**A simple server example:**\r\n\t\r\n\timport java.io.BufferedReader;\r\n\timport java.io.BufferedWriter;\r\n\timport java.io.InputStreamReader;\r\n\timport java.io.OutputStreamWriter;\r\n\timport java.net.ServerSocket;\r\n\timport java.net.Socket;\r\n\timport java.util.Date;\r\n\t\r\n\t\r\n\tpublic class Server\r\n\t{\r\n\t\tpublic static void main(String[] args) throws Exception\r\n\t\t{\r\n\t\t\tServerSocket listener = new ServerSocket(4000);\r\n\t\t\tString line;\r\n\t        try\r\n\t        {\r\n\t            while (true)\r\n\t            {\r\n\t                Socket socket = listener.accept();\r\n\t        \t\tBufferedReader readerChannel = new BufferedReader(new InputStreamReader(socket.getInputStream()));\r\n\t        \t    BufferedWriter writerChannel = new BufferedWriter(new OutputStreamWriter(socket.getOutputStream()));\r\n\t                try\r\n\t                {\r\n\t        \t\t\twriterChannel.write(new Date().toString() + &quot;\\n\\r&quot;);\r\n\t        \t\t\twriterChannel.flush();\r\n\r\n\t                    while ((line = readerChannel.readLine()) != null)\r\n\t        \t\t\t{\r\n\t                    \tSystem.out.println(line);\r\n\t        \t\t\t}\r\n\t                }\r\n\t                finally\r\n\t                {\r\n\t                    socket.close();\r\n\t                }\r\n\t            }\r\n\t        }\r\n\t        finally\r\n\t        {\r\n\t            listener.close();\r\n\t        }\r\n\t\t}\r\n\t}\r\n\r\n**A simple client example:**\r\n\r\n\timport java.io.BufferedReader;\r\n\timport java.io.BufferedWriter;\r\n\timport java.io.InputStreamReader;\r\n\timport java.io.OutputStreamWriter;\r\n\timport java.net.Socket;\r\n    import java.util.Date;\r\n\t\r\n\t\r\n\tpublic class Client\r\n\t{\r\n\t\tpublic static void main(String[] args) throws Exception\r\n\t\t{\r\n\t\t\tSocket socket = new Socket(&quot;127.0.0.1&quot;, 4000);\r\n\t\t\tBufferedWriter writerChannel = new BufferedWriter(new OutputStreamWriter(socket.getOutputStream()));\r\n\t\t\tBufferedReader readerChannel = new BufferedReader(new InputStreamReader(socket.getInputStream()));\r\n\t\t\tString line;\r\n\t\t\t\r\n\t\t\twriterChannel.write(new Date().toString() + &quot;\\n\\r&quot;);\r\n\t\t\twriterChannel.flush();\r\n\t\t\t\r\n\t\t\twhile ((line = readerChannel.readLine()) != null)\r\n\t\t\t{\r\n\t        \tSystem.out.println(line);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n**Also take a look at:**\r\n\r\n\timport javax.net.ssl.SSLSocket;\r\n\timport javax.net.ssl.SSLSocketFactory;\r\n\t\r\n\t\r\n\tpublic class Client\r\n\t{\r\n\t\tpublic static void main(String[] args) throws Exception\r\n\t\t{\r\n\t\t\tSSLSocketFactory socketBuilder = (SSLSocketFactory) SSLSocketFactory.getDefault();\r\n\t\t\tSSLSocket socket = (SSLSocket) socketBuilder.createSocket(&quot;127.0.0.1&quot;, 4000);\r\n\t\t}\r\n\t}\r\n\r\n**A simple IRC example:**\r\n\r\n\timport java.io.BufferedReader;\r\n\timport java.io.BufferedWriter;\r\n\timport java.io.InputStreamReader;\r\n\timport java.io.OutputStreamWriter;\r\n\timport javax.net.ssl.SSLSocket;\r\n\timport javax.net.ssl.SSLSocketFactory;\r\n\t\r\n\t\r\n\tpublic class Client\r\n\t{\r\n\t\tpublic static void main(String[] args) throws Exception\r\n\t\t{\r\n\t\t\tSSLSocketFactory socketBuilder = (SSLSocketFactory) SSLSocketFactory.getDefault();\r\n\t        SSLSocket socket = (SSLSocket) socketBuilder.createSocket(&quot;irc.freenode.net&quot;, 6697);\r\n\t\t\tBufferedWriter writerChannel = new BufferedWriter(new OutputStreamWriter(socket.getOutputStream()));\r\n\t\t\tBufferedReader readerChannel = new BufferedReader(new InputStreamReader(socket.getInputStream()));\r\n\t\t\t\r\n\t\t\tString line, computerName, nick, login, channel = &quot;#bot&quot;, channelPassword = &quot;&quot;;\r\n\t\t\tlong id = 1;\r\n\t\t\t\r\n\t\t\tcomputerName = java.net.InetAddress.getLocalHost().getHostName();\r\n\t\t\tnick = computerName + &quot;_&quot; + id;\r\n\t\t\tlogin = computerName + &quot;_&quot; + id;\r\n\t\t\twriterChannel.write(&quot;NICK &quot; + nick + &quot;\\r\\n&quot;); // Join IRC with a specific Nick\r\n\t\t\twriterChannel.write(&quot;USER &quot; + login + &quot; 8 * :&quot; + login + &quot; \\r\\n&quot;); // Join IRC with a specific User\r\n\t\t\twriterChannel.flush();\r\n\t\t\t\r\n\t\t\twhile ((line = readerChannel.readLine()) != null)\r\n\t\t\t{\r\n\t\t\t\tif (line.indexOf(&quot;004&quot;) != -1) // If connected\r\n\t\t\t\t{\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\telse if (line.indexOf(&quot;433&quot;) != -1) // If Nick already in use\r\n\t\t\t\t{\r\n\t\t\t\t\tid++;\r\n\t\t\t\t\tnick = computerName + &quot;_&quot; + id;\r\n\t\t\t\t\tlogin = computerName + &quot;_&quot; + id;\r\n\t\t\t\t\twriterChannel.write(&quot;NICK &quot; + nick + &quot;\\r\\n&quot;);\r\n\t\t\t\t\twriterChannel.write(&quot;USER &quot; + login + &quot; 8 * :&quot; + login + &quot; \\r\\n&quot;);\r\n\t\t\t\t\twriterChannel.flush();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\twriterChannel.write(&quot;JOIN &quot; + channel + &quot; &quot; + channelPassword + &quot;\\r\\n&quot;); // Join a channel\r\n\t\t\twriterChannel.flush();\r\n\t\t\t\r\n\t\t\twhile ((line = readerChannel.readLine()) != null)\r\n\t\t\t{\r\n\t\t\t\ttry\r\n\t\t\t\t{\r\n\t\t\t\t\tline = line.substring(line.indexOf(&quot;#&quot;));\r\n\t\t\t\t\tchannel = line.substring(0, line.indexOf(&quot; &quot;));\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (line.toLowerCase().startsWith(&quot;ping&quot;)) // avoid ping time-out\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\twriterChannel.write(&quot;PONG :&quot; + line.substring(5) + &quot;\\r\\n&quot;);\r\n\t\t\t\t\t\twriterChannel.flush();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (line.toLowerCase().contains(&quot;!ping&quot;))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\twriterChannel.write(&quot;PRIVMSG &quot; + channel + &quot; :pong\\r\\n&quot;);\r\n\t\t\t\t\t\twriterChannel.flush();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (line.toLowerCase().contains(&quot;!join&quot;))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tString newChannel = line.substring(line.indexOf(&quot;!join&quot;) + 6);\r\n\t\t\t\t\t\tint stringPosition;\r\n\t\t\t\t\t\tif ((stringPosition = newChannel.indexOf(&quot; &quot;)) != -1)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tString newPassword = newChannel.substring(stringPosition + 1);\r\n\t\t\t\t\t\t\tnewChannel = newChannel.substring(0, stringPosition);\r\n\t\t\t\t\t\t\twriterChannel.write(&quot;JOIN &quot; + newChannel + &quot; &quot; + newPassword + &quot;\\r\\n&quot;);\r\n\t\t\t\t\t\t\twriterChannel.flush();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\twriterChannel.write(&quot;JOIN &quot; + newChannel + &quot;\\r\\n&quot;);\r\n\t\t\t\t\t\t\twriterChannel.flush();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (line.toLowerCase().contains(&quot;!leave&quot;))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\twriterChannel.write(&quot;PART &quot; + channel + &quot;\\r\\n&quot;);\r\n\t\t\t\t\t\twriterChannel.flush();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (line.toLowerCase().contains(&quot;!quit&quot;))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\twriterChannel.write(&quot;QUIT\\r\\n&quot;);\r\n\t\t\t            writerChannel.flush();\r\n\t\t\t            System.exit(0);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcatch (Exception e)\r\n\t\t\t\t{\r\n\t\t\t\t\te.printStackTrace();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\nI cannot give you an example for a Peer-to-Peer network because I have never do it. This is really difficult and you have to do a lot of research on internet.\r\n\r\n**More informations:**\r\n\r\n - [https://docs.oracle.com/javase/7/docs/api/java/net/Socket.html][2]\r\n\r\n - [https://docs.oracle.com/javase/tutorial/networking/sockets/][3]\r\n\r\n - [http://www.oracle.com/technetwork/java/socket-140484.html][4]\r\n\r\n - You need a multithreaded server for handle many different connections.\r\n\r\n*Hint - I have already answer at some similar questions. Even if the programming language are sometime different, I give you the link, the logic is always the same so it can maybe help you:*\r\n\r\n - [https://stackoverflow.com/questions/30227722/creating-a-multiplayer-game-in-python/30228185#30228185][5]\r\n\r\n - [https://stackoverflow.com/questions/30564281/xcode-mass-multiplayer-not-what-youre-probably-thinking/30818450#30818450][6]\r\n\r\n - [https://stackoverflow.com/questions/29325034/how-would-an-mmo-deal-with-calculating-and-sending-packets-for-thousands-of-play/30826823#30826823][7]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/30227722/creating-a-multiplayer-game-in-python/30228185#30228185\r\n  [2]: https://docs.oracle.com/javase/7/docs/api/java/net/Socket.html\r\n  [3]: https://docs.oracle.com/javase/tutorial/networking/sockets/\r\n  [4]: http://www.oracle.com/technetwork/java/socket-140484.html\r\n  [5]: https://stackoverflow.com/questions/30227722/creating-a-multiplayer-game-in-python/30228185#30228185\r\n  [6]: https://stackoverflow.com/questions/30564281/xcode-mass-multiplayer-not-what-youre-probably-thinking/30818450#30818450\r\n  [7]: https://stackoverflow.com/questions/29325034/how-would-an-mmo-deal-with-calculating-and-sending-packets-for-thousands-of-play/30826823#30826823","title":"Multiplayer game in Java. Connect client (player) to game that was created by other client","body":"<p>Another client cannot be connected to the Client A because of his firewall.</p>\n<p>You can create two majors kinds of network:</p>\n<ul>\n<li><p>Server-Client</p>\n</li>\n<li><p>Peer-to-Peer</p>\n</li>\n</ul>\n<p>But a client can save some data to the server and the server can send them to all the clients (you don't need a Peer-to-Peer network for allow the Client B to send some data to the Client A).</p>\n<p>Example: The Client B send his map position to the server, the server send the data to all the clients, so the Client A is able to draw a character tileset at the position of the Client B.</p>\n<p>For connect two PCs together, you need to forward a port from the modem of your server to the PC used as server, and open the port from the firewall of the PC used as server.</p>\n<p>You can also take a look here <a href=\"https://stackoverflow.com/questions/30227722/creating-a-multiplayer-game-in-python/30228185#30228185\">https://stackoverflow.com/questions/30227722/creating-a-multiplayer-game-in-python/30228185#30228185</a>, I give an example where the clients was able to connect them together with IRC and play at a Tic-Tac-Toe game (so you didn't have to manage a server). I have add an example in Java at the end of this post.</p>\n<p><strong>A simple server example:</strong></p>\n<pre><code>import java.io.BufferedReader;\nimport java.io.BufferedWriter;\nimport java.io.InputStreamReader;\nimport java.io.OutputStreamWriter;\nimport java.net.ServerSocket;\nimport java.net.Socket;\nimport java.util.Date;\n\n\npublic class Server\n{\n    public static void main(String[] args) throws Exception\n    {\n        ServerSocket listener = new ServerSocket(4000);\n        String line;\n        try\n        {\n            while (true)\n            {\n                Socket socket = listener.accept();\n                BufferedReader readerChannel = new BufferedReader(new InputStreamReader(socket.getInputStream()));\n                BufferedWriter writerChannel = new BufferedWriter(new OutputStreamWriter(socket.getOutputStream()));\n                try\n                {\n                    writerChannel.write(new Date().toString() + &quot;\\n\\r&quot;);\n                    writerChannel.flush();\n\n                    while ((line = readerChannel.readLine()) != null)\n                    {\n                        System.out.println(line);\n                    }\n                }\n                finally\n                {\n                    socket.close();\n                }\n            }\n        }\n        finally\n        {\n            listener.close();\n        }\n    }\n}\n</code></pre>\n<p><strong>A simple client example:</strong></p>\n<pre><code>import java.io.BufferedReader;\nimport java.io.BufferedWriter;\nimport java.io.InputStreamReader;\nimport java.io.OutputStreamWriter;\nimport java.net.Socket;\nimport java.util.Date;\n\n\npublic class Client\n{\n    public static void main(String[] args) throws Exception\n    {\n        Socket socket = new Socket(&quot;127.0.0.1&quot;, 4000);\n        BufferedWriter writerChannel = new BufferedWriter(new OutputStreamWriter(socket.getOutputStream()));\n        BufferedReader readerChannel = new BufferedReader(new InputStreamReader(socket.getInputStream()));\n        String line;\n        \n        writerChannel.write(new Date().toString() + &quot;\\n\\r&quot;);\n        writerChannel.flush();\n        \n        while ((line = readerChannel.readLine()) != null)\n        {\n            System.out.println(line);\n        }\n    }\n}\n</code></pre>\n<p><strong>Also take a look at:</strong></p>\n<pre><code>import javax.net.ssl.SSLSocket;\nimport javax.net.ssl.SSLSocketFactory;\n\n\npublic class Client\n{\n    public static void main(String[] args) throws Exception\n    {\n        SSLSocketFactory socketBuilder = (SSLSocketFactory) SSLSocketFactory.getDefault();\n        SSLSocket socket = (SSLSocket) socketBuilder.createSocket(&quot;127.0.0.1&quot;, 4000);\n    }\n}\n</code></pre>\n<p><strong>A simple IRC example:</strong></p>\n<pre><code>import java.io.BufferedReader;\nimport java.io.BufferedWriter;\nimport java.io.InputStreamReader;\nimport java.io.OutputStreamWriter;\nimport javax.net.ssl.SSLSocket;\nimport javax.net.ssl.SSLSocketFactory;\n\n\npublic class Client\n{\n    public static void main(String[] args) throws Exception\n    {\n        SSLSocketFactory socketBuilder = (SSLSocketFactory) SSLSocketFactory.getDefault();\n        SSLSocket socket = (SSLSocket) socketBuilder.createSocket(&quot;irc.freenode.net&quot;, 6697);\n        BufferedWriter writerChannel = new BufferedWriter(new OutputStreamWriter(socket.getOutputStream()));\n        BufferedReader readerChannel = new BufferedReader(new InputStreamReader(socket.getInputStream()));\n        \n        String line, computerName, nick, login, channel = &quot;#bot&quot;, channelPassword = &quot;&quot;;\n        long id = 1;\n        \n        computerName = java.net.InetAddress.getLocalHost().getHostName();\n        nick = computerName + &quot;_&quot; + id;\n        login = computerName + &quot;_&quot; + id;\n        writerChannel.write(&quot;NICK &quot; + nick + &quot;\\r\\n&quot;); // Join IRC with a specific Nick\n        writerChannel.write(&quot;USER &quot; + login + &quot; 8 * :&quot; + login + &quot; \\r\\n&quot;); // Join IRC with a specific User\n        writerChannel.flush();\n        \n        while ((line = readerChannel.readLine()) != null)\n        {\n            if (line.indexOf(&quot;004&quot;) != -1) // If connected\n            {\n                break;\n            }\n            else if (line.indexOf(&quot;433&quot;) != -1) // If Nick already in use\n            {\n                id++;\n                nick = computerName + &quot;_&quot; + id;\n                login = computerName + &quot;_&quot; + id;\n                writerChannel.write(&quot;NICK &quot; + nick + &quot;\\r\\n&quot;);\n                writerChannel.write(&quot;USER &quot; + login + &quot; 8 * :&quot; + login + &quot; \\r\\n&quot;);\n                writerChannel.flush();\n            }\n        }\n        \n        writerChannel.write(&quot;JOIN &quot; + channel + &quot; &quot; + channelPassword + &quot;\\r\\n&quot;); // Join a channel\n        writerChannel.flush();\n        \n        while ((line = readerChannel.readLine()) != null)\n        {\n            try\n            {\n                line = line.substring(line.indexOf(&quot;#&quot;));\n                channel = line.substring(0, line.indexOf(&quot; &quot;));\n                \n                if (line.toLowerCase().startsWith(&quot;ping&quot;)) // avoid ping time-out\n                {\n                    writerChannel.write(&quot;PONG :&quot; + line.substring(5) + &quot;\\r\\n&quot;);\n                    writerChannel.flush();\n                }\n                else if (line.toLowerCase().contains(&quot;!ping&quot;))\n                {\n                    writerChannel.write(&quot;PRIVMSG &quot; + channel + &quot; :pong\\r\\n&quot;);\n                    writerChannel.flush();\n                }\n                else if (line.toLowerCase().contains(&quot;!join&quot;))\n                {\n                    String newChannel = line.substring(line.indexOf(&quot;!join&quot;) + 6);\n                    int stringPosition;\n                    if ((stringPosition = newChannel.indexOf(&quot; &quot;)) != -1)\n                    {\n                        String newPassword = newChannel.substring(stringPosition + 1);\n                        newChannel = newChannel.substring(0, stringPosition);\n                        writerChannel.write(&quot;JOIN &quot; + newChannel + &quot; &quot; + newPassword + &quot;\\r\\n&quot;);\n                        writerChannel.flush();\n                    }\n                    else\n                    {\n                        writerChannel.write(&quot;JOIN &quot; + newChannel + &quot;\\r\\n&quot;);\n                        writerChannel.flush();\n                    }\n                }\n                else if (line.toLowerCase().contains(&quot;!leave&quot;))\n                {\n                    writerChannel.write(&quot;PART &quot; + channel + &quot;\\r\\n&quot;);\n                    writerChannel.flush();\n                }\n                else if (line.toLowerCase().contains(&quot;!quit&quot;))\n                {\n                    writerChannel.write(&quot;QUIT\\r\\n&quot;);\n                    writerChannel.flush();\n                    System.exit(0);\n                }\n            }\n            catch (Exception e)\n            {\n                e.printStackTrace();\n            }\n        }\n    }\n}\n</code></pre>\n<p>I cannot give you an example for a Peer-to-Peer network because I have never do it. This is really difficult and you have to do a lot of research on internet.</p>\n<p><strong>More informations:</strong></p>\n<ul>\n<li><p><a href=\"https://docs.oracle.com/javase/7/docs/api/java/net/Socket.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/7/docs/api/java/net/Socket.html</a></p>\n</li>\n<li><p><a href=\"https://docs.oracle.com/javase/tutorial/networking/sockets/\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/tutorial/networking/sockets/</a></p>\n</li>\n<li><p><a href=\"http://www.oracle.com/technetwork/java/socket-140484.html\" rel=\"nofollow noreferrer\">http://www.oracle.com/technetwork/java/socket-140484.html</a></p>\n</li>\n<li><p>You need a multithreaded server for handle many different connections.</p>\n</li>\n</ul>\n<p><em>Hint - I have already answer at some similar questions. Even if the programming language are sometime different, I give you the link, the logic is always the same so it can maybe help you:</em></p>\n<ul>\n<li><p><a href=\"https://stackoverflow.com/questions/30227722/creating-a-multiplayer-game-in-python/30228185#30228185\">https://stackoverflow.com/questions/30227722/creating-a-multiplayer-game-in-python/30228185#30228185</a></p>\n</li>\n<li><p><a href=\"https://stackoverflow.com/questions/30564281/xcode-mass-multiplayer-not-what-youre-probably-thinking/30818450#30818450\">Xcode Mass Multiplayer (Not What You&#39;re Probably Thinking)</a></p>\n</li>\n<li><p><a href=\"https://stackoverflow.com/questions/29325034/how-would-an-mmo-deal-with-calculating-and-sending-packets-for-thousands-of-play/30826823#30826823\">How would an MMO deal with calculating and sending packets for thousands of players every tick for a live action game?</a></p>\n</li>\n</ul>\n"}],"owner":{"account_id":6086111,"reputation":33,"user_id":4750101,"display_name":"Richard H."},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":23885,"favorite_count":0,"down_vote_count":2,"up_vote_count":3,"accepted_answer_id":30820890,"answer_count":2,"score":1,"last_activity_date":1681177578,"creation_date":1428601989,"question_id":29545597,"body_markdown":"I am working on multiplayer game and I cant to find out how can I connect other clients to the created game. I mean that client A create a socket connection to the server and how other clients (A,B...) can connect to the client A?\r\nCan somebody help me please?\r\n\r\nP.S. I&#39;m new with network programming, so if you can attach some example i would be very grateful.","title":"Multiplayer game in Java. Connect client (player) to game that was created by other client","body":"<p>I am working on multiplayer game and I cant to find out how can I connect other clients to the created game. I mean that client A create a socket connection to the server and how other clients (A,B...) can connect to the client A?\nCan somebody help me please?</p>\n\n<p>P.S. I'm new with network programming, so if you can attach some example i would be very grateful.</p>\n"},{"tags":["java","vert.x","vert.x-webclient"],"answers":[{"tags":[],"owner":{"account_id":18416403,"reputation":2172,"user_id":13415164,"display_name":"Sergey Afinogenov"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680437710,"creation_date":1680437710,"answer_id":75911957,"question_id":75911704,"body_markdown":"I suppose this source Vert.x code describes wich types in this case is allowed:\r\n\r\n    static void checkType(Object obj) {\r\n    if (obj instanceof String ||\r\n        obj instanceof Integer ||\r\n        obj instanceof Long ||\r\n        obj instanceof Boolean ||\r\n        obj instanceof Double ||\r\n        obj instanceof Float ||\r\n        obj instanceof Short ||\r\n        obj instanceof Byte ||\r\n        obj instanceof Character ||\r\n        obj instanceof byte[] ||\r\n        obj instanceof Buffer ||\r\n        obj instanceof JsonObject ||\r\n        obj instanceof JsonArray ||\r\n        obj instanceof Shareable) {\r\n    } else {\r\n      throw new IllegalArgumentException(&quot;Invalid type for shareddata data structure: &quot; + obj.getClass().getName());\r\n     }\r\n    }","title":"Vert.x Shared Data - Share Data Between Threads in Vert.x","body":"<p>I suppose this source Vert.x code describes wich types in this case is allowed:</p>\n<pre><code>static void checkType(Object obj) {\nif (obj instanceof String ||\n    obj instanceof Integer ||\n    obj instanceof Long ||\n    obj instanceof Boolean ||\n    obj instanceof Double ||\n    obj instanceof Float ||\n    obj instanceof Short ||\n    obj instanceof Byte ||\n    obj instanceof Character ||\n    obj instanceof byte[] ||\n    obj instanceof Buffer ||\n    obj instanceof JsonObject ||\n    obj instanceof JsonArray ||\n    obj instanceof Shareable) {\n} else {\n  throw new IllegalArgumentException(&quot;Invalid type for shareddata data structure: &quot; + obj.getClass().getName());\n }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":5078696,"reputation":1,"user_id":4075427,"display_name":"Sunil Kumar Mulla"},"score":0,"creation_date":1681212709,"post_id":75981850,"comment_id":134016729,"body_markdown":"Can you please share the Code Snippet ,How to share the Transaction Id using Concurrent Hashmap. \n\nThanks. I am new to Vertx.","body":"Can you please share the Code Snippet ,How to share the Transaction Id using Concurrent Hashmap.   Thanks. I am new to Vertx."},{"owner":{"account_id":5191510,"reputation":1415,"user_id":4154302,"display_name":"Asad Awadia"},"score":0,"creation_date":1681225520,"post_id":75981850,"comment_id":134020343,"body_markdown":"The code is very trivial. Spend some time working through it\n\nIf you want to learn vertx in depth - you can enrol in my course on udemy https://www.udemy.com/course/backend-development-with-vertx/learn/?referralCode=063C2D57CCB957C5088C\n\nIf you need 1 on 1 help - please reach out via https://consulting.aawadia.dev/","body":"The code is very trivial. Spend some time working through it  If you want to learn vertx in depth - you can enrol in my course on udemy <a href=\"https://www.udemy.com/course/backend-development-with-vertx/learn/?referralCode=063C2D57CCB957C5088C\" rel=\"nofollow noreferrer\">udemy.com/course/backend-development-with-vertx/learn/&hellip;</a>  If you need 1 on 1 help - please reach out via <a href=\"https://consulting.aawadia.dev/\" rel=\"nofollow noreferrer\">consulting.aawadia.dev</a>"}],"tags":[],"owner":{"account_id":5191510,"reputation":1415,"user_id":4154302,"display_name":"Asad Awadia"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681177397,"creation_date":1681177397,"answer_id":75981850,"question_id":75911704,"body_markdown":"&gt;I want to carry forward this object to the other threads which we are calling using event bus.\r\n\r\nThere is no way to do this. \r\n\r\nThe best way is to put them in a ConcurrentHashMap with a transaction id - that gets passed over the eventbus\r\n\r\nBut the fact that the pieces of work that need to be in the same transaction are across eventbus handlers show that the distribution and partitioning was done incorrectly i.e. things that are to be done in a transaction should be kept together","title":"Vert.x Shared Data - Share Data Between Threads in Vert.x","body":"<blockquote>\n<p>I want to carry forward this object to the other threads which we are calling using event bus.</p>\n</blockquote>\n<p>There is no way to do this.</p>\n<p>The best way is to put them in a ConcurrentHashMap with a transaction id - that gets passed over the eventbus</p>\n<p>But the fact that the pieces of work that need to be in the same transaction are across eventbus handlers show that the distribution and partitioning was done incorrectly i.e. things that are to be done in a transaction should be kept together</p>\n"}],"owner":{"account_id":5078696,"reputation":1,"user_id":4075427,"display_name":"Sunil Kumar Mulla"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":232,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1681177397,"creation_date":1680434528,"question_id":75911704,"body_markdown":"I am using vertx version - **3.5.1**. \r\nI want to track my logs in **ELK**, For that I am using elastic.apm. \r\n\r\nI am initialising my `co.elastic.apm.api.Transaction` object in the beginning of the method. I want to carry forward this object to the other threads which we are calling using event bus. \r\n\r\nBelow is my code. \r\n```\r\nSharedData sharedData = vertx.sharedData();\r\nLocalMap&lt;String, co.elastic.apm.api.Transaction&gt; map1 = sharedData.getLocalMap(&quot;mymap1&quot;);\r\nmap1.put(&quot;transaction&quot;, transaction);\r\n```\r\nI am getting below exception. \r\n\r\n\r\n&gt; java.lang.IllegalArgumentException: Invalid type for shareddata data structure: co.elastic.apm.api.NoopTransaction\r\n\r\nI tried putting in `JsonObject` as well. But no luck.\r\n\r\n```\r\nSharedData sharedData = vertx.sharedData();\r\nLocalMap&lt;String, co.elastic.apm.api.Transaction&gt; map1 = sharedData.getLocalMap(&quot;mymap1&quot;);\r\nmap1.put(&quot;transaction&quot;, transaction);\r\n```","title":"Vert.x Shared Data - Share Data Between Threads in Vert.x","body":"<p>I am using vertx version - <strong>3.5.1</strong>.\nI want to track my logs in <strong>ELK</strong>, For that I am using elastic.apm.</p>\n<p>I am initialising my <code>co.elastic.apm.api.Transaction</code> object in the beginning of the method. I want to carry forward this object to the other threads which we are calling using event bus.</p>\n<p>Below is my code.</p>\n<pre><code>SharedData sharedData = vertx.sharedData();\nLocalMap&lt;String, co.elastic.apm.api.Transaction&gt; map1 = sharedData.getLocalMap(&quot;mymap1&quot;);\nmap1.put(&quot;transaction&quot;, transaction);\n</code></pre>\n<p>I am getting below exception.</p>\n<blockquote>\n<p>java.lang.IllegalArgumentException: Invalid type for shareddata data structure: co.elastic.apm.api.NoopTransaction</p>\n</blockquote>\n<p>I tried putting in <code>JsonObject</code> as well. But no luck.</p>\n<pre><code>SharedData sharedData = vertx.sharedData();\nLocalMap&lt;String, co.elastic.apm.api.Transaction&gt; map1 = sharedData.getLocalMap(&quot;mymap1&quot;);\nmap1.put(&quot;transaction&quot;, transaction);\n</code></pre>\n"},{"tags":["java","vert.x","vertx-verticle","vertx-eventbus"],"answers":[{"tags":[],"owner":{"account_id":5191510,"reputation":1415,"user_id":4154302,"display_name":"Asad Awadia"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681176874,"creation_date":1681176874,"answer_id":75981820,"question_id":75958756,"body_markdown":"&gt;Vert.x will deliver messages to any particular handler in the same order they were sent from any particular sender.\r\n\r\nThis is more than clear. If you send A,B,C then vertx will send them out in that order since it is purely passing it forward.\r\n\r\n&gt;What is meant by a handler or sender: verticle, context, particular callback or something else?\r\n\r\nHandler is the receiver which will get the message. Sender is the sender who is sending the message.\r\n\r\nIf the sender sent A, B, C then the handler will receive the messages in the same order  i.e. A,B, C - since vertx is purely forwarding the message\r\n\r\n&gt;Will all messages from sender verticle to subscription verticle be delivered in the same order no matter how many addresses were used for communication?\r\n\r\nYes - but do not misunderstand this as that ordering will be maintained across addresses - in the scope of a single address the messages will be in the same order","title":"What are Vert.x EventBus messages ordering guarantees?","body":"<blockquote>\n<p>Vert.x will deliver messages to any particular handler in the same order they were sent from any particular sender.</p>\n</blockquote>\n<p>This is more than clear. If you send A,B,C then vertx will send them out in that order since it is purely passing it forward.</p>\n<blockquote>\n<p>What is meant by a handler or sender: verticle, context, particular callback or something else?</p>\n</blockquote>\n<p>Handler is the receiver which will get the message. Sender is the sender who is sending the message.</p>\n<p>If the sender sent A, B, C then the handler will receive the messages in the same order  i.e. A,B, C - since vertx is purely forwarding the message</p>\n<blockquote>\n<p>Will all messages from sender verticle to subscription verticle be delivered in the same order no matter how many addresses were used for communication?</p>\n</blockquote>\n<p>Yes - but do not misunderstand this as that ordering will be maintained across addresses - in the scope of a single address the messages will be in the same order</p>\n"}],"owner":{"account_id":9376049,"reputation":3355,"user_id":7643517,"display_name":"Nolequen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":108,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1681176874,"creation_date":1680873232,"question_id":75958756,"body_markdown":"[Documention says][1]:\r\n\r\n&gt; Vert.x will deliver messages to any particular handler in the same order they were sent from any particular sender.\r\n\r\nWhat is meant by a handler or sender: verticle, context, particular callback or something else?\r\n\r\nWill all messages from sender verticle to subscription verticle be delivered in the same order no matter how many addresses were used for communication?\r\n\r\n  [1]: https://vertx.io/docs/vertx-core/java/#_message_ordering","title":"What are Vert.x EventBus messages ordering guarantees?","body":"<p><a href=\"https://vertx.io/docs/vertx-core/java/#_message_ordering\" rel=\"nofollow noreferrer\">Documention says</a>:</p>\n<blockquote>\n<p>Vert.x will deliver messages to any particular handler in the same order they were sent from any particular sender.</p>\n</blockquote>\n<p>What is meant by a handler or sender: verticle, context, particular callback or something else?</p>\n<p>Will all messages from sender verticle to subscription verticle be delivered in the same order no matter how many addresses were used for communication?</p>\n"},{"tags":["java","android","xml"],"owner":{"account_id":26763036,"reputation":11,"user_id":20360662,"display_name":"Clorox Bleach"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681176835,"creation_date":1681176835,"question_id":75981818,"body_markdown":"I am trying to make a popup DialogFragment and added a drawable with rounded corners as a background but probably since the window size of the popup is a bit bigger it shows white edges.\r\n\r\nI will add that I also have a sign in Dialog popup which I was able to achieve the wanted result.\r\nThe Dialog class has the ability to use the following java code:\r\n\r\n`dialog.getWindow().setBackgroundDrawable(new ColorDrawable(Color.TRANSPARENT));`\r\n\r\nspecifically the getWindow() function doesn&#39;t exist in DialogFragment\r\n\r\nIs there an alternative to this for DialogFragments?\r\n\r\nHere is my xml code of the constraint Layout with the background of the fragment\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:id=&quot;@+id/con_post&quot;\r\n    android:minWidth=&quot;350dp&quot;\r\n    android:minHeight=&quot;550dp&quot;\r\n    android:layout_width=&quot;350dp&quot;\r\n    android:layout_height=&quot;550dp&quot;\r\n    android:layout_gravity=&quot;center&quot;\r\n    tools:context=&quot;.FragmentLogic.FragmentBlogPost&quot;\r\n    android:background=&quot;@drawable/sign_in_popup&quot;\r\n    android:padding=&quot;5dp&quot;&gt;\r\n```\r\n\r\n[Fragment with white edges I want to remove](https://i.stack.imgur.com/86SbU.png)\r\n\r\n[Sign in for example of what I want](https://i.stack.imgur.com/rBdEM.png)\r\n\r\nThanks a lot in advance","title":"Setting Background of Layout has white edges","body":"<p>I am trying to make a popup DialogFragment and added a drawable with rounded corners as a background but probably since the window size of the popup is a bit bigger it shows white edges.</p>\n<p>I will add that I also have a sign in Dialog popup which I was able to achieve the wanted result.\nThe Dialog class has the ability to use the following java code:</p>\n<p><code>dialog.getWindow().setBackgroundDrawable(new ColorDrawable(Color.TRANSPARENT));</code></p>\n<p>specifically the getWindow() function doesn't exist in DialogFragment</p>\n<p>Is there an alternative to this for DialogFragments?</p>\n<p>Here is my xml code of the constraint Layout with the background of the fragment</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:id=&quot;@+id/con_post&quot;\n    android:minWidth=&quot;350dp&quot;\n    android:minHeight=&quot;550dp&quot;\n    android:layout_width=&quot;350dp&quot;\n    android:layout_height=&quot;550dp&quot;\n    android:layout_gravity=&quot;center&quot;\n    tools:context=&quot;.FragmentLogic.FragmentBlogPost&quot;\n    android:background=&quot;@drawable/sign_in_popup&quot;\n    android:padding=&quot;5dp&quot;&gt;\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/86SbU.png\" rel=\"nofollow noreferrer\">Fragment with white edges I want to remove</a></p>\n<p><a href=\"https://i.stack.imgur.com/rBdEM.png\" rel=\"nofollow noreferrer\">Sign in for example of what I want</a></p>\n<p>Thanks a lot in advance</p>\n"},{"tags":["java","mysql","spring-boot","jpa","querydsl"],"comments":[{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1681108132,"post_id":75974066,"comment_id":133999406,"body_markdown":"[Why should I not upload images of code/data/errors?](https://meta.stackoverflow.com/questions/285551/why-should-i-not-upload-images-of-code-data-errors)","body":"<a href=\"https://meta.stackoverflow.com/questions/285551/why-should-i-not-upload-images-of-code-data-errors\">Why should I not upload images of code/data/errors?</a>"}],"answers":[{"tags":[],"owner":{"account_id":24768180,"reputation":1,"user_id":18651946,"display_name":"Mon1151"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1681176360,"creation_date":1681120075,"answer_id":75976000,"question_id":75974066,"body_markdown":"I have solved it. I leave my answer here.\r\n\r\n    QDemo t1 = QDemo.demo;\r\n    QDemo t2 = new QDemo(&quot;t2&quot;);\r\n    \r\n    BooleanBuilder builder = new BooleanBuilder();\r\n    builder.and(t1.id.substring(-3).eq(\r\n        new CaseBuilder()\r\n            .when(\r\n                JPAExpressions.select(t2.count())\r\n                    .from(t2)\r\n                    .where(t2.id.like(\r\n                        t1.id.substring(0, t1.id.length().subtract(3)).concat(&quot;%&quot;)\r\n                    ))\r\n                    .eq(2L)\r\n            )\r\n            .then(&quot;ENG&quot;)\r\n            .otherwise(&quot;KOR&quot;)\r\n    ));","title":"How to change sql into CaseBuilder?","body":"<p>I have solved it. I leave my answer here.</p>\n<pre><code>QDemo t1 = QDemo.demo;\nQDemo t2 = new QDemo(&quot;t2&quot;);\n\nBooleanBuilder builder = new BooleanBuilder();\nbuilder.and(t1.id.substring(-3).eq(\n    new CaseBuilder()\n        .when(\n            JPAExpressions.select(t2.count())\n                .from(t2)\n                .where(t2.id.like(\n                    t1.id.substring(0, t1.id.length().subtract(3)).concat(&quot;%&quot;)\n                ))\n                .eq(2L)\n        )\n        .then(&quot;ENG&quot;)\n        .otherwise(&quot;KOR&quot;)\n));\n</code></pre>\n"}],"owner":{"account_id":24768180,"reputation":1,"user_id":18651946,"display_name":"Mon1151"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75976000,"answer_count":1,"score":0,"last_activity_date":1681176360,"creation_date":1681096507,"question_id":75974066,"body_markdown":"This is my table.\r\n[Table](https://i.stack.imgur.com/AZdZt.png)\r\n\r\nAnd this is my SQL:\r\n```sql\r\nselect t1.id\r\n  from demo t1\r\n where substring(t1.id, -3) = case \r\n                                when (select count(*)\r\n                                        from demo t2\r\n                                       where t2.id like concat(substring(t1.id, 1, length(t1.id) - 3), &#39;%&#39;)) = 2 then &#39;ENG&#39;\r\n                                else &#39;KOR&#39;\r\n                              end;\r\n```\r\n\r\nI tried to convert my SQL to _CaseBuilder_ but no luck because it can&#39;t add the select in the `when` statement.\r\nAny help would be appreciated. Thank you.\r\n\r\n[After run sql](https://i.stack.imgur.com/eEwl8.png)\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/aB0Dr.png","title":"How to change sql into CaseBuilder?","body":"<p>This is my table.\n<a href=\"https://i.stack.imgur.com/AZdZt.png\" rel=\"nofollow noreferrer\">Table</a></p>\n<p>And this is my SQL:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>select t1.id\n  from demo t1\n where substring(t1.id, -3) = case \n                                when (select count(*)\n                                        from demo t2\n                                       where t2.id like concat(substring(t1.id, 1, length(t1.id) - 3), '%')) = 2 then 'ENG'\n                                else 'KOR'\n                              end;\n</code></pre>\n<p>I tried to convert my SQL to <em>CaseBuilder</em> but no luck because it can't add the select in the <code>when</code> statement.\nAny help would be appreciated. Thank you.</p>\n<p><a href=\"https://i.stack.imgur.com/eEwl8.png\" rel=\"nofollow noreferrer\">After run sql</a></p>\n"},{"tags":["java","android","firebase-cloud-messaging","google-cloud-messaging"],"answers":[{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1681040075,"post_id":75927554,"comment_id":133992140,"body_markdown":"As its currently written, your answer is unclear. Please [edit] to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"As its currently written, your answer is unclear. Please <a href=\"https://stackoverflow.com/posts/75927554/edit\">edit</a> to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":28211202,"reputation":1,"user_id":21563430,"display_name":"Raden Hor"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681176289,"creation_date":1680599584,"answer_id":75927554,"question_id":75822678,"body_markdown":"For temporary work around solution \r\nhttps://issuetracker.google.com/issues/275036593#comment31","title":"Getting error &quot;Device doesn&#39;t support the messaging feature&quot; in android 13","body":"<p>For temporary work around solution\n<a href=\"https://issuetracker.google.com/issues/275036593#comment31\" rel=\"nofollow noreferrer\">https://issuetracker.google.com/issues/275036593#comment31</a></p>\n"}],"owner":{"account_id":26488483,"reputation":119,"user_id":20126669,"display_name":"Shekhar J. Lobo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":933,"favorite_count":0,"down_vote_count":1,"up_vote_count":9,"answer_count":1,"score":8,"last_activity_date":1681176289,"creation_date":1679572623,"question_id":75822678,"body_markdown":"I&#39;m getting an Exception like `com.google.android.gms.common.api.ApiException: 17: Device doesn&#39;t support the messaging feature` in Android 13\r\n\r\nIt works fine on another version as well as the Android 13 emulator in Android studio, but when I connect an Android 13 physical device it throws the above error.\r\n\r\n\r\n       try {\r\n            SmsRetrieverClient mClient = SmsRetriever.getClient(this);\r\n            Task&lt;Void&gt; mTask = mClient.startSmsRetriever();\r\n            mTask.addOnSuccessListener(new OnSuccessListener&lt;Void&gt;() {\r\n                @Override\r\n                public void onSuccess(Void aVoid) {\r\n                    Bundle bundle = new Bundle();\r\n                    bundle.putString(&quot;mobile&quot;, stringFromView(binding.etPhoneNumber));\r\n                    bundle.putString(&quot;setting&quot;, settingScreen);\r\n                    startActivity(OtpActivity.class, bundle);\r\n    //                Toast.makeText(mContext, &quot;SMS Retriever starts&quot;, Toast.LENGTH_LONG).show();\r\n                }\r\n            });\r\n            mTask.addOnFailureListener(new OnFailureListener() {\r\n                @Override\r\n                public void onFailure(@NonNull Exception e) {\r\n                    e.printStackTrace();\r\n                }\r\n            });\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }","title":"Getting error &quot;Device doesn&#39;t support the messaging feature&quot; in android 13","body":"<p>I'm getting an Exception like <code>com.google.android.gms.common.api.ApiException: 17: Device doesn't support the messaging feature</code> in Android 13</p>\n<p>It works fine on another version as well as the Android 13 emulator in Android studio, but when I connect an Android 13 physical device it throws the above error.</p>\n<pre><code>   try {\n        SmsRetrieverClient mClient = SmsRetriever.getClient(this);\n        Task&lt;Void&gt; mTask = mClient.startSmsRetriever();\n        mTask.addOnSuccessListener(new OnSuccessListener&lt;Void&gt;() {\n            @Override\n            public void onSuccess(Void aVoid) {\n                Bundle bundle = new Bundle();\n                bundle.putString(&quot;mobile&quot;, stringFromView(binding.etPhoneNumber));\n                bundle.putString(&quot;setting&quot;, settingScreen);\n                startActivity(OtpActivity.class, bundle);\n//                Toast.makeText(mContext, &quot;SMS Retriever starts&quot;, Toast.LENGTH_LONG).show();\n            }\n        });\n        mTask.addOnFailureListener(new OnFailureListener() {\n            @Override\n            public void onFailure(@NonNull Exception e) {\n                e.printStackTrace();\n            }\n        });\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n</code></pre>\n"},{"tags":["java","spring","rx-java","project-reactor"],"answers":[{"comments":[{"owner":{"account_id":5229600,"reputation":363,"user_id":4180430,"accept_rate":67,"display_name":"lloistborn"},"score":0,"creation_date":1544290339,"post_id":53681310,"comment_id":94226827,"body_markdown":"it is still not working Mr. Alex, i got `reactor.core.publisher.MonoMap cannot be cast to Person`, any other guess that may help?","body":"it is still not working Mr. Alex, i got <code>reactor.core.publisher.MonoMap cannot be cast to Person</code>, any other guess that may help?"},{"owner":{"account_id":14208533,"reputation":3827,"user_id":10264430,"display_name":"Alexander Pankin"},"score":0,"creation_date":1544296906,"post_id":53681310,"comment_id":94228697,"body_markdown":"How do you set value to the cache? You should set Person object, not Mono&lt;Person&gt;","body":"How do you set value to the cache? You should set Person object, not Mono&lt;Person&gt;"}],"tags":[],"owner":{"account_id":14208533,"reputation":3827,"user_id":10264430,"display_name":"Alexander Pankin"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1544262521,"creation_date":1544262521,"answer_id":53681310,"question_id":53680717,"body_markdown":"It would be better to specify `ReactiveRedisTemplate` parameters. But if you can&#39;t, you should change your content type to `Mono&lt;Object&gt;`. Something like this:\r\n\r\n    public &lt;T&gt; Mono&lt;T&gt; findCache(String key, Class&lt;T&gt; clazz) {\r\n        @SuppressWarnings(&quot;unchecked&quot;)\r\n        Mono&lt;Object&gt; contentMono = redisTemplate.opsForValue().get(key);\r\n        return contentMono.map(clazz::cast);\r\n    }\r\n\r\nAnd if cache doesn&#39;t contain value for given key, it returns empty Mono, not null.","title":"Java Cannot cast reactor.core.publisher.MonoDefer to EntityClass","body":"<p>It would be better to specify <code>ReactiveRedisTemplate</code> parameters. But if you can't, you should change your content type to <code>Mono&lt;Object&gt;</code>. Something like this:</p>\n\n<pre><code>public &lt;T&gt; Mono&lt;T&gt; findCache(String key, Class&lt;T&gt; clazz) {\n    @SuppressWarnings(\"unchecked\")\n    Mono&lt;Object&gt; contentMono = redisTemplate.opsForValue().get(key);\n    return contentMono.map(clazz::cast);\n}\n</code></pre>\n\n<p>And if cache doesn't contain value for given key, it returns empty Mono, not null.</p>\n"}],"owner":{"account_id":5229600,"reputation":363,"user_id":4180430,"accept_rate":67,"display_name":"lloistborn"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8002,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1681172337,"creation_date":1544256576,"question_id":53680717,"body_markdown":"Here I try to upgrade my spring-data-redis `RedisTemplate` using reactive-redis `ReactiveRedisTemplate` which is returning Publisher. In this case, I want to change the method `findCache` to `Mono`. The problem is old `findCache` function that is using spring-data-redis is accepting generic data, like this:\r\n\r\n    @Autowired\r\n    ReactiveRedisTemplate redisTemplate;\r\n \r\n    public &lt;T&gt; T findCache(String key, Class&lt;T&gt; clazz) {\r\n        Object content = this.redisTemplate.opsForValue().get(key);\r\n    \r\n        if (content != null) {\r\n          return clazz.cast(content);\r\n        }\r\n    \r\n        return null;\r\n      }\r\n\r\nof course I will get the error \r\n\r\n    Cannot cast reactor.core.publisher.MonoDefer to Person\r\n\r\nthen, since I want to get it to work reactively I update this code to return publisher, like this:\r\n\r\n    if (content != null) {\r\n          return ((Mono) content).flatMap(o -&gt; clazz.cast(o));\r\n        }\r\nbut it also won&#39;t work since my `findCache` accepts generic.\r\nWhat do I need to do, please help.","title":"Java Cannot cast reactor.core.publisher.MonoDefer to EntityClass","body":"<p>Here I try to upgrade my spring-data-redis <code>RedisTemplate</code> using reactive-redis <code>ReactiveRedisTemplate</code> which is returning Publisher. In this case, I want to change the method <code>findCache</code> to <code>Mono</code>. The problem is old <code>findCache</code> function that is using spring-data-redis is accepting generic data, like this:</p>\n<pre><code>@Autowired\nReactiveRedisTemplate redisTemplate;\n\npublic &lt;T&gt; T findCache(String key, Class&lt;T&gt; clazz) {\n    Object content = this.redisTemplate.opsForValue().get(key);\n\n    if (content != null) {\n      return clazz.cast(content);\n    }\n\n    return null;\n  }\n</code></pre>\n<p>of course I will get the error</p>\n<pre><code>Cannot cast reactor.core.publisher.MonoDefer to Person\n</code></pre>\n<p>then, since I want to get it to work reactively I update this code to return publisher, like this:</p>\n<pre><code>if (content != null) {\n      return ((Mono) content).flatMap(o -&gt; clazz.cast(o));\n    }\n</code></pre>\n<p>but it also won't work since my <code>findCache</code> accepts generic.\nWhat do I need to do, please help.</p>\n"},{"tags":["java","spring","oracle","oracle-cloud-infrastructure"],"comments":[{"owner":{"account_id":12743722,"reputation":19966,"user_id":12567365,"display_name":"andrewJames"},"score":2,"creation_date":1681173751,"post_id":75981569,"comment_id":134010707,"body_markdown":"Try in a plain Java project, to start with (no Spring Boot). Use (a) a more recent version of Java (e.g. 11 or 17) and (b) use _only_ the all-in-one [shaded JAR](https://mvnrepository.com/artifact/com.oracle.oci.sdk/oci-java-sdk-shaded-full/3.10.0). See how far that gets you, as far as basic connectivity goes. [Reference](https://docs.oracle.com/en-us/iaas/Content/API/SDKDocs/javasdkgettingstarted.htm#javasdkgettingstarted_topic_Using_the_SDK)","body":"Try in a plain Java project, to start with (no Spring Boot). Use (a) a more recent version of Java (e.g. 11 or 17) and (b) use <i>only</i> the all-in-one <a href=\"https://mvnrepository.com/artifact/com.oracle.oci.sdk/oci-java-sdk-shaded-full/3.10.0\" rel=\"nofollow noreferrer\">shaded JAR</a>. See how far that gets you, as far as basic connectivity goes. <a href=\"https://docs.oracle.com/en-us/iaas/Content/API/SDKDocs/javasdkgettingstarted.htm#javasdkgettingstarted_topic_Using_the_SDK\" rel=\"nofollow noreferrer\">Reference</a>"},{"owner":{"account_id":16221044,"reputation":331,"user_id":11712575,"display_name":"Jason Chan"},"score":0,"creation_date":1681184104,"post_id":75981569,"comment_id":134011610,"body_markdown":"I am using java 19. It works in a standalone java maven project, but failing with spring!","body":"I am using java 19. It works in a standalone java maven project, but failing with spring!"},{"owner":{"account_id":16221044,"reputation":331,"user_id":11712575,"display_name":"Jason Chan"},"score":2,"creation_date":1681192542,"post_id":75981569,"comment_id":134012429,"body_markdown":"Just used spring with the shaded version! It looks great! TYSM!","body":"Just used spring with the shaded version! It looks great! TYSM!"},{"owner":{"account_id":12743722,"reputation":19966,"user_id":12567365,"display_name":"andrewJames"},"score":1,"creation_date":1681210045,"post_id":75981569,"comment_id":134016098,"body_markdown":"Nice. You should write a proper answer for future visitors.","body":"Nice. You should write a proper answer for future visitors."}],"owner":{"account_id":16221044,"reputation":331,"user_id":11712575,"display_name":"Jason Chan"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":492,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1681171682,"creation_date":1681171682,"question_id":75981569,"body_markdown":"I am attempting to use oracle&#39;s SDK via springboot + maven. When I attempt to establish a connection, I get this error:\r\n\r\n    java.util.NoSuchElementException: No http provider available; add dependency on one of the oci-java-sdk-common-httpclient-* choices, e.g. oci-java-sdk-common-httpclient-jersey\r\n    \tat com.oracle.bmc.http.client.DefaultHolder.findHttpProvider(HttpProvider.java:48)\r\n    \tat com.oracle.bmc.http.client.DefaultHolder.getDefault(HttpProvider.java:32)\r\n    \tat com.oracle.bmc.http.client.HttpProvider.getDefault(HttpProvider.java:19)\r\n    \tat com.oracle.bmc.http.internal.BaseClient.&lt;init&gt;(BaseClient.java:71)\r\n    \tat com.oracle.bmc.http.internal.BaseSyncClient.&lt;init&gt;(BaseSyncClient.java:36)\r\n    \tat com.oracle.bmc.core.VirtualNetworkClient.&lt;init&gt;(VirtualNetworkClient.java:38)\r\n    \tat com.oracle.bmc.core.VirtualNetworkClient.&lt;init&gt;(VirtualNetworkClient.java:16)\r\n    \tat com.oracle.bmc.core.VirtualNetworkClient$Builder.build(VirtualNetworkClient.java:111)\r\n    \tat com.vendify.Dependencies.Tools.OracleImageBucketGenerator.oracleCloudImageBucketUploader(OracleImageBucketGenerator.java:87)\r\n    \tat com.vendify.Controllers.DefaultController.test(DefaultController.java:27)\r\n    \tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:578)\r\n    \tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197)\r\n    \tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141)\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)\r\n    \tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n    \tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1064)\r\n    \tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)\r\n    \tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)\r\n    \tat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:645)\r\n    \tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:750)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n    \tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n    \tat com.vendify.Security.RequestThrottler.doFilter(RequestThrottler.java:60)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)\r\n    \tat org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)\r\n    \tat org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n    \tat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:121)\r\n    \tat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:115)\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n    \tat org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)\r\n    \tat org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n    \tat org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n    \tat org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n    \tat org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n    \tat org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:149)\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n    \tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)\r\n    \tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n    \tat org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)\r\n    \tat org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n    \tat org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)\r\n    \tat org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n    \tat org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n    \tat org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)\r\n    \tat org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)\r\n    \tat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)\r\n    \tat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n    \tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n    \tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n    \tat org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n    \tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n    \tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n    \tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n    \tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n    \tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)\r\n    \tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n    \tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n    \tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n    \tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382)\r\n    \tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n    \tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)\r\n    \tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1726)\r\n    \tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\r\n    \tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n    \tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n    \tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n    \tat java.base/java.lang.Thread.run(Thread.java:1589)\r\n\r\nProblem is... I have already added this dependency in my POM.XML:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \t&lt;parent&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;2.5.4&lt;/version&gt;\r\n    \t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    \t&lt;/parent&gt;\r\n    \t&lt;groupId&gt;com.vendify&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;backendDB&lt;/artifactId&gt;\r\n    \t&lt;version&gt;1.0&lt;/version&gt;\r\n    \t&lt;name&gt;BackendDB&lt;/name&gt;\r\n    \t&lt;description&gt;Connection for MySQL Backend DB&lt;/description&gt;\r\n    \t&lt;properties&gt;\r\n    \t\t&lt;java.version&gt;1.8&lt;/java.version&gt;\r\n    \t&lt;/properties&gt;\r\n    \t&lt;dependencies&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t    &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n    \t\t    &lt;version&gt;2.7.1&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n      \t\t\t&lt;groupId&gt;commons-io&lt;/groupId&gt;\r\n        \t\t&lt;artifactId&gt;commons-io&lt;/artifactId&gt;\r\n        \t\t&lt;version&gt;2.6&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t        &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n    \t        &lt;artifactId&gt;spring-security-web&lt;/artifactId&gt;\r\n    \t    &lt;/dependency&gt;\r\n    \t    &lt;dependency&gt;\r\n    \t\t    &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n    \t\t    &lt;artifactId&gt;spring-security-config&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;com.mashape.unirest&lt;/groupId&gt;\r\n    \t\t    &lt;artifactId&gt;unirest-java&lt;/artifactId&gt;\r\n    \t\t    &lt;version&gt;1.4.9&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t  &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n    \t\t  &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\r\n    \t\t  &lt;/dependency&gt;\r\n    \t    &lt;dependency&gt;\r\n    \t        &lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;\r\n    \t        &lt;artifactId&gt;gson&lt;/artifactId&gt;\r\n    \t        &lt;scope&gt;compile&lt;/scope&gt;\r\n    \t    &lt;/dependency&gt;\r\n    \t    &lt;dependency&gt;\r\n    \t      &lt;groupId&gt;junit&lt;/groupId&gt;\r\n    \t      &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n    \t      &lt;scope&gt;test&lt;/scope&gt;\r\n        \t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t    &lt;groupId&gt;commons-codec&lt;/groupId&gt;\r\n    \t\t    &lt;artifactId&gt;commons-codec&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t    &lt;groupId&gt;com.googlecode.json-simple&lt;/groupId&gt;\r\n    \t\t    &lt;artifactId&gt;json-simple&lt;/artifactId&gt;\r\n    \t\t    &lt;version&gt;1.1.1&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\t\t\r\n    \t\t&lt;dependency&gt;\r\n    \t\t    &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\r\n    \t\t    &lt;artifactId&gt;guava&lt;/artifactId&gt;\r\n    \t\t    &lt;version&gt;20.0&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t    &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n    \t\t    &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n    \t\t    &lt;scope&gt;provided&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-data-jdbc&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-data-rest&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;mysql&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.flywaydb&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;flyway-core&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;3.12.0&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.oracle.oci.sdk&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;oci-java-sdk-core&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;3.10.0&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.oracle.oci.sdk&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;oci-java-sdk-common-httpclient-choices&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.oracle.oci.sdk&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;oci-java-sdk-addons-resteasy-client-configurator&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.oracle.oci.sdk&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;oci-java-sdk-objectstorage&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.oracle.oci.sdk&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;oci-java-sdk-common-httpclient-jersey&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t&lt;/dependencies&gt;\r\n    \t&lt;build&gt;\r\n    \t\t&lt;plugins&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n    \t&lt;/build&gt;\r\n    \r\n    &lt;/project&gt;\r\n\r\n\r\nI have even went as far as adding `&lt;version&gt;3.10.0&lt;/version&gt;` to every one of the `com.oracle.oci.sdk` packages\r\n\r\n    public String oracleCloudImageBucketUploader(){\r\n    \tFile oraclePrivateKeyFile = new File(constants.ORACLE_CLOUD_PRIVATE_KEY_DIRECTORY);\r\n    \tif(!oraclePrivateKeyFile.exists()){\r\n    \t\treturn null;\r\n    \t}\r\n    \ttry {\r\n    \t\tString privateKeyString = FileUtils.readFileToString(oraclePrivateKeyFile, &quot;UTF-8&quot;);\r\n    \r\n    \t\tAuthenticationDetailsProvider authenticationDetailsProvider =\r\n    \t\t\t\tSimpleAuthenticationDetailsProvider.builder()\r\n    \t\t\t\t\t\t.tenantId(constants.ORACLE_CLOUD_TENANT_ID)\r\n    \t\t\t\t\t\t.userId(constants.ORACLE_CLOUD_USER_ID)\r\n    \t\t\t\t\t\t.fingerprint(constants.ORACLE_CLOUD_PRIVATE_KEY_FINGERPRINT)\r\n    \t\t\t\t\t\t.privateKeySupplier(new StringPrivateKeySupplier(privateKeyString))\r\n    \t\t\t\t\t\t.passPhrase(constants.ORACLE_CLOUD_KEY_PASSWORD)\r\n    \t\t\t\t\t\t.build();\r\n    \t\tVirtualNetworkClient vnClient =\r\n    \t\t\t\tVirtualNetworkClient.builder().build(authenticationDetailsProvider);\r\n    \t\treturn &quot;test&quot;;\r\n    \t}catch (Exception e){\r\n    \t\te.printStackTrace();\r\n    \t\treturn null;\r\n    \t}\r\n    }\r\n\r\nI have debugged and made sure that each one of the fields inside constants.{whatever} is valid, and the corresponding key is on my oracle cloud account.\r\n\r\nThanks","title":"OCI Connection Exception","body":"<p>I am attempting to use oracle's SDK via springboot + maven. When I attempt to establish a connection, I get this error:</p>\n<pre><code>java.util.NoSuchElementException: No http provider available; add dependency on one of the oci-java-sdk-common-httpclient-* choices, e.g. oci-java-sdk-common-httpclient-jersey\n    at com.oracle.bmc.http.client.DefaultHolder.findHttpProvider(HttpProvider.java:48)\n    at com.oracle.bmc.http.client.DefaultHolder.getDefault(HttpProvider.java:32)\n    at com.oracle.bmc.http.client.HttpProvider.getDefault(HttpProvider.java:19)\n    at com.oracle.bmc.http.internal.BaseClient.&lt;init&gt;(BaseClient.java:71)\n    at com.oracle.bmc.http.internal.BaseSyncClient.&lt;init&gt;(BaseSyncClient.java:36)\n    at com.oracle.bmc.core.VirtualNetworkClient.&lt;init&gt;(VirtualNetworkClient.java:38)\n    at com.oracle.bmc.core.VirtualNetworkClient.&lt;init&gt;(VirtualNetworkClient.java:16)\n    at com.oracle.bmc.core.VirtualNetworkClient$Builder.build(VirtualNetworkClient.java:111)\n    at com.vendify.Dependencies.Tools.OracleImageBucketGenerator.oracleCloudImageBucketUploader(OracleImageBucketGenerator.java:87)\n    at com.vendify.Controllers.DefaultController.test(DefaultController.java:27)\n    at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:578)\n    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197)\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141)\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1064)\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)\n    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:645)\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:750)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at com.vendify.Security.RequestThrottler.doFilter(RequestThrottler.java:60)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)\n    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)\n    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:121)\n    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:115)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)\n    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:149)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)\n    at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)\n    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)\n    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)\n    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)\n    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382)\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1726)\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n    at java.base/java.lang.Thread.run(Thread.java:1589)\n</code></pre>\n<p>Problem is... I have already added this dependency in my POM.XML:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.5.4&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.vendify&lt;/groupId&gt;\n    &lt;artifactId&gt;backendDB&lt;/artifactId&gt;\n    &lt;version&gt;1.0&lt;/version&gt;\n    &lt;name&gt;BackendDB&lt;/name&gt;\n    &lt;description&gt;Connection for MySQL Backend DB&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n            &lt;version&gt;2.7.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;commons-io&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\n            &lt;version&gt;2.6&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-config&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n        &lt;groupId&gt;com.mashape.unirest&lt;/groupId&gt;\n            &lt;artifactId&gt;unirest-java&lt;/artifactId&gt;\n            &lt;version&gt;1.4.9&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n          &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n          &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\n          &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;\n            &lt;artifactId&gt;gson&lt;/artifactId&gt;\n            &lt;scope&gt;compile&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n          &lt;groupId&gt;junit&lt;/groupId&gt;\n          &lt;artifactId&gt;junit&lt;/artifactId&gt;\n          &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;commons-codec&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-codec&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.googlecode.json-simple&lt;/groupId&gt;\n            &lt;artifactId&gt;json-simple&lt;/artifactId&gt;\n            &lt;version&gt;1.1.1&lt;/version&gt;\n        &lt;/dependency&gt;       \n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\n            &lt;artifactId&gt;guava&lt;/artifactId&gt;\n            &lt;version&gt;20.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jdbc&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-rest&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.flywaydb&lt;/groupId&gt;\n            &lt;artifactId&gt;flyway-core&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\n            &lt;version&gt;3.12.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.oracle.oci.sdk&lt;/groupId&gt;\n            &lt;artifactId&gt;oci-java-sdk-core&lt;/artifactId&gt;\n            &lt;version&gt;3.10.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.oracle.oci.sdk&lt;/groupId&gt;\n            &lt;artifactId&gt;oci-java-sdk-common-httpclient-choices&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.oracle.oci.sdk&lt;/groupId&gt;\n            &lt;artifactId&gt;oci-java-sdk-addons-resteasy-client-configurator&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.oracle.oci.sdk&lt;/groupId&gt;\n            &lt;artifactId&gt;oci-java-sdk-objectstorage&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.oracle.oci.sdk&lt;/groupId&gt;\n            &lt;artifactId&gt;oci-java-sdk-common-httpclient-jersey&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>I have even went as far as adding <code>&lt;version&gt;3.10.0&lt;/version&gt;</code> to every one of the <code>com.oracle.oci.sdk</code> packages</p>\n<pre><code>public String oracleCloudImageBucketUploader(){\n    File oraclePrivateKeyFile = new File(constants.ORACLE_CLOUD_PRIVATE_KEY_DIRECTORY);\n    if(!oraclePrivateKeyFile.exists()){\n        return null;\n    }\n    try {\n        String privateKeyString = FileUtils.readFileToString(oraclePrivateKeyFile, &quot;UTF-8&quot;);\n\n        AuthenticationDetailsProvider authenticationDetailsProvider =\n                SimpleAuthenticationDetailsProvider.builder()\n                        .tenantId(constants.ORACLE_CLOUD_TENANT_ID)\n                        .userId(constants.ORACLE_CLOUD_USER_ID)\n                        .fingerprint(constants.ORACLE_CLOUD_PRIVATE_KEY_FINGERPRINT)\n                        .privateKeySupplier(new StringPrivateKeySupplier(privateKeyString))\n                        .passPhrase(constants.ORACLE_CLOUD_KEY_PASSWORD)\n                        .build();\n        VirtualNetworkClient vnClient =\n                VirtualNetworkClient.builder().build(authenticationDetailsProvider);\n        return &quot;test&quot;;\n    }catch (Exception e){\n        e.printStackTrace();\n        return null;\n    }\n}\n</code></pre>\n<p>I have debugged and made sure that each one of the fields inside constants.{whatever} is valid, and the corresponding key is on my oracle cloud account.</p>\n<p>Thanks</p>\n"},{"tags":["java","spring","spring-boot","apache-kafka"],"comments":[{"owner":{"account_id":16883509,"reputation":16760,"user_id":12208910,"display_name":"Michael Heil"},"score":0,"creation_date":1600408753,"post_id":63946696,"comment_id":113083970,"body_markdown":"can you show some code and how you set the ConsumerGroup?","body":"can you show some code and how you set the ConsumerGroup?"},{"owner":{"account_id":87230,"reputation":36826,"user_id":242042,"accept_rate":57,"display_name":"Archimedes Trajano"},"score":0,"creation_date":1603173036,"post_id":63946696,"comment_id":113944254,"body_markdown":"I just got this when I set up a new environment.  But this may help.  Going to see if I missed this setting https://cwiki.apache.org/confluence/display/KAFKA/KIP-394%3A+Require+member.id+for+initial+join+group+request","body":"I just got this when I set up a new environment.  But this may help.  Going to see if I missed this setting <a href=\"https://cwiki.apache.org/confluence/display/KAFKA/KIP-394%3A+Require+member.id+for+initial+join+group+request\" rel=\"nofollow noreferrer\">cwiki.apache.org/confluence/display/KAFKA/&hellip;</a>"},{"owner":{"account_id":87230,"reputation":36826,"user_id":242042,"accept_rate":57,"display_name":"Archimedes Trajano"},"score":0,"creation_date":1603212501,"post_id":63946696,"comment_id":113963254,"body_markdown":"I&#39;m adding my config maybe it&#39;s similar to yours.","body":"I&#39;m adding my config maybe it&#39;s similar to yours."}],"answers":[{"comments":[{"owner":{"account_id":4589587,"reputation":1454,"user_id":3723306,"accept_rate":46,"display_name":"JaviOverflow"},"score":16,"creation_date":1606733388,"post_id":64451242,"comment_id":115041037,"body_markdown":"this seems to prevent my consumer from consuming.. do you know how can i properly set this up?","body":"this seems to prevent my consumer from consuming.. do you know how can i properly set this up?"},{"owner":{"account_id":7391826,"reputation":291,"user_id":5624990,"accept_rate":80,"display_name":"Ravi Maurya"},"score":0,"creation_date":1627534154,"post_id":64451242,"comment_id":121182789,"body_markdown":"for me, i get this error even when reading using single instance of my application but it does not effect my consumer.","body":"for me, i get this error even when reading using single instance of my application but it does not effect my consumer."}],"tags":[],"owner":{"account_id":87230,"reputation":36826,"user_id":242042,"accept_rate":57,"display_name":"Archimedes Trajano"},"comment_count":2,"down_vote_count":1,"up_vote_count":19,"is_accepted":false,"score":18,"last_activity_date":1603218311,"creation_date":1603218311,"answer_id":64451242,"question_id":63946696,"body_markdown":"From my analysis.  This is normal behaviour, you can change the log levels to exclude it.\r\n\r\nThe reason for this is if the server detects that the client can support `member.id` it will give that error back to the client.  This is noted in [KIP-394][1].\r\n\r\nThe client will then reconnect back to the server with a generated member ID.\r\n\r\n[1]: https://cwiki.apache.org/confluence/display/KAFKA/KIP-394%3A+Require+member.id+for+initial+join+group+request","title":"Kafka is giving: &quot;The group member needs to have a valid member id before actually entering a consumer group&quot;","body":"<p>From my analysis.  This is normal behaviour, you can change the log levels to exclude it.</p>\n<p>The reason for this is if the server detects that the client can support <code>member.id</code> it will give that error back to the client.  This is noted in <a href=\"https://cwiki.apache.org/confluence/display/KAFKA/KIP-394%3A+Require+member.id+for+initial+join+group+request\" rel=\"noreferrer\">KIP-394</a>.</p>\n<p>The client will then reconnect back to the server with a generated member ID.</p>\n"},{"tags":[],"owner":{"account_id":2111883,"reputation":324,"user_id":1877010,"display_name":"DaHoC"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1612361895,"creation_date":1612339112,"answer_id":66023381,"question_id":63946696,"body_markdown":"I encountered the same issue, also preventing my consumer from subscribing to certain topics.\r\n\r\nI figured that the member.id *might* be similar to the client-id (using Camel here), which might be in some way related to the consumer group.\r\n\r\nWhat fixed it for me is a changed, this time non-changing client-id for my consuming service, leaving the same consumer group as is.","title":"Kafka is giving: &quot;The group member needs to have a valid member id before actually entering a consumer group&quot;","body":"<p>I encountered the same issue, also preventing my consumer from subscribing to certain topics.</p>\n<p>I figured that the member.id <em>might</em> be similar to the client-id (using Camel here), which might be in some way related to the consumer group.</p>\n<p>What fixed it for me is a changed, this time non-changing client-id for my consuming service, leaving the same consumer group as is.</p>\n"},{"tags":[],"owner":{"account_id":21196689,"reputation":21,"user_id":15588113,"display_name":"zhili"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1618900824,"creation_date":1618900824,"answer_id":67173722,"question_id":63946696,"body_markdown":"hummm....in my case, consumers will rejoin the group with a generated ID. Here is my test and result. FYI\r\n\r\n```java\r\n@Test\r\n    void testSyncSend() throws ExecutionException, InterruptedException {\r\n        int id = (int)(System.currentTimeMillis()/1000);\r\n        SendResult result = producer.syncSend(id);\r\n        logger.info(&quot;[testSyncSend] id:{}, result:{}&quot;, id, result);\r\n        new CountDownLatch(1).await();\r\n    }\r\n```\r\n\r\n```\r\n2021-04-20 14:32:20.980  INFO 6672 --- [           main] o.a.kafka.common.utils.AppInfoParser     : Kafka version: 2.5.1\r\n2021-04-20 14:32:20.981  INFO 6672 --- [           main] o.a.kafka.common.utils.AppInfoParser     : Kafka commitId: 0efa8fb0f4c73d92\r\n2021-04-20 14:32:20.981  INFO 6672 --- [           main] o.a.kafka.common.utils.AppInfoParser     : Kafka startTimeMs: 1618900340980\r\n2021-04-20 14:32:21.125  INFO 6672 --- [listener1-0-C-1] org.apache.kafka.clients.Metadata        : [Consumer clientId=consumer-listener1-1, groupId=listener1] Cluster ID: RctzTn4XR4WNNVuqh25izw\r\n2021-04-20 14:32:21.125  INFO 6672 --- [ad | producer-1] org.apache.kafka.clients.Metadata        : [Producer clientId=producer-1] Cluster ID: RctzTn4XR4WNNVuqh25izw\r\n2021-04-20 14:32:21.125  INFO 6672 --- [listener1-3-C-1] org.apache.kafka.clients.Metadata        : [Consumer clientId=consumer-listener1-4, groupId=listener1] Cluster ID: RctzTn4XR4WNNVuqh25izw\r\n2021-04-20 14:32:21.125  INFO 6672 --- [listener1-2-C-1] org.apache.kafka.clients.Metadata        : [Consumer clientId=consumer-listener1-3, groupId=listener1] Cluster ID: RctzTn4XR4WNNVuqh25izw\r\n2021-04-20 14:32:21.125  INFO 6672 --- [listener1-1-C-1] org.apache.kafka.clients.Metadata        : [Consumer clientId=consumer-listener1-2, groupId=listener1] Cluster ID: RctzTn4XR4WNNVuqh25izw\r\n2021-04-20 14:32:21.127  INFO 6672 --- [listener1-1-C-1] o.a.k.c.c.internals.AbstractCoordinator  : [Consumer clientId=consumer-listener1-2, groupId=listener1] Discovered group coordinator localhost:29092 (id: 2147483646 rack: null)\r\n2021-04-20 14:32:21.127  INFO 6672 --- [listener1-2-C-1] o.a.k.c.c.internals.AbstractCoordinator  : [Consumer clientId=consumer-listener1-3, groupId=listener1] Discovered group coordinator localhost:29092 (id: 2147483646 rack: null)\r\n2021-04-20 14:32:21.127  INFO 6672 --- [listener1-0-C-1] o.a.k.c.c.internals.AbstractCoordinator  : [Consumer clientId=consumer-listener1-1, groupId=listener1] Discovered group coordinator localhost:29092 (id: 2147483646 rack: null)\r\n2021-04-20 14:32:21.127  INFO 6672 --- [listener1-3-C-1] o.a.k.c.c.internals.AbstractCoordinator  : [Consumer clientId=consumer-listener1-4, groupId=listener1] Discovered group coordinator localhost:29092 (id: 2147483646 rack: null)\r\n2021-04-20 14:32:21.130  INFO 6672 --- [listener1-1-C-1] o.a.k.c.c.internals.AbstractCoordinator  : [Consumer clientId=consumer-listener1-2, groupId=listener1] (Re-)joining group\r\n2021-04-20 14:32:21.130  INFO 6672 --- [listener1-3-C-1] o.a.k.c.c.internals.AbstractCoordinator  : [Consumer clientId=consumer-listener1-4, groupId=listener1] (Re-)joining group\r\n2021-04-20 14:32:21.130  INFO 6672 --- [listener1-0-C-1] o.a.k.c.c.internals.AbstractCoordinator  : [Consumer clientId=consumer-listener1-1, groupId=listener1] (Re-)joining group\r\n2021-04-20 14:32:21.130  INFO 6672 --- [listener1-2-C-1] o.a.k.c.c.internals.AbstractCoordinator  : [Consumer clientId=consumer-listener1-3, groupId=listener1] (Re-)joining group\r\n2021-04-20 14:32:21.147  INFO 6672 --- [listener1-0-C-1] o.a.k.c.c.internals.AbstractCoordinator  : [Consumer clientId=consumer-listener1-1, groupId=listener1] Join group failed with org.apache.kafka.common.errors.MemberIdRequiredException: The group member needs to have a valid member id before actually entering a consumer group\r\n2021-04-20 14:32:21.147  INFO 6672 --- [listener1-2-C-1] o.a.k.c.c.internals.AbstractCoordinator  : [Consumer clientId=consumer-listener1-3, groupId=listener1] Join group failed with org.apache.kafka.common.errors.MemberIdRequiredException: The group member needs to have a valid member id before actually entering a consumer group\r\n2021-04-20 14:32:21.147  INFO 6672 --- [listener1-3-C-1] o.a.k.c.c.internals.AbstractCoordinator  : [Consumer clientId=consumer-listener1-4, groupId=listener1] Join group failed with org.apache.kafka.common.errors.MemberIdRequiredException: The group member needs to have a valid member id before actually entering a consumer group\r\n2021-04-20 14:32:21.147  INFO 6672 --- [listener1-1-C-1] o.a.k.c.c.internals.AbstractCoordinator  : [Consumer clientId=consumer-listener1-2, groupId=listener1] Join group failed with org.apache.kafka.common.errors.MemberIdRequiredException: The group member needs to have a valid member id before actually entering a consumer group\r\n2021-04-20 14:32:21.148  INFO 6672 --- [listener1-0-C-1] o.a.k.c.c.internals.AbstractCoordinator  : [Consumer clientId=consumer-listener1-1, groupId=listener1] (Re-)joining group\r\n2021-04-20 14:32:21.148  INFO 6672 --- [listener1-1-C-1] o.a.k.c.c.internals.AbstractCoordinator  : [Consumer clientId=consumer-listener1-2, groupId=listener1] (Re-)joining group\r\n2021-04-20 14:32:21.148  INFO 6672 --- [listener1-3-C-1] o.a.k.c.c.internals.AbstractCoordinator  : [Consumer clientId=consumer-listener1-4, groupId=listener1] (Re-)joining group\r\n2021-04-20 14:32:21.148  INFO 6672 --- [listener1-2-C-1] o.a.k.c.c.internals.AbstractCoordinator  : [Consumer clientId=consumer-listener1-3, groupId=listener1] (Re-)joining group\r\n2021-04-20 14:32:21.317  INFO 6672 --- [           main] c.z.s.cbaConnector.KafkaProducerTest     : [testSyncSend] id:1618900340, result:SendResult [producerRecord=ProducerRecord(topic=test1, partition=null, headers=RecordHeaders(headers = [RecordHeader(key = __TypeId__, value = [99, 111, 109, 46, 122, 104, 105, 108, 105, 46, 115, 109, 115, 109, 111, 100, 117, 108, 101, 46, 101, 110, 116, 105, 116, 121, 46, 77, 101, 115, 115, 97, 103, 101])], isReadOnly = true), key=null, value=Message(id=1618900340), timestamp=null), recordMetadata=test1-1@0]\r\n2021-04-20 14:32:23.770  INFO 6672 --- [listener1-3-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-listener1-4, groupId=listener1] Finished assignment for group at generation 2: {consumer-listener1-4-9a383250-e84d-413a-b012-85405abdcf7f=Assignment(partitions=[test1-8, test1-9]), consumer-listener1-2-3d26d9ef-b973-4d19-a930-5ba77d938680=Assignment(partitions=[test1-3, test1-4, test1-5]), consumer-listener1-1-10b6895e-264e-45bd-ba90-c71ea12b21e5=Assignment(partitions=[test1-0, test1-1, test1-2]), consumer-listener1-3-54ce965a-87cd-4e28-b0e9-b0f2c9f69423=Assignment(partitions=[test1-6, test1-7])}\r\n2021-04-20 14:32:23.775  INFO 6672 --- [listener1-1-C-1] o.a.k.c.c.internals.AbstractCoordinator  : [Consumer clientId=consumer-listener1-2, groupId=listener1] Successfully joined group with generation 2\r\n2021-04-20 14:32:23.775  INFO 6672 --- [listener1-0-C-1] o.a.k.c.c.internals.AbstractCoordinator  : [Consumer clientId=consumer-listener1-1, groupId=listener1] Successfully joined group with generation 2\r\n2021-04-20 14:32:23.775  INFO 6672 --- [listener1-3-C-1] o.a.k.c.c.internals.AbstractCoordinator  : [Consumer clientId=consumer-listener1-4, groupId=listener1] Successfully joined group with generation 2\r\n2021-04-20 14:32:23.776  INFO 6672 --- [listener1-2-C-1] o.a.k.c.c.internals.AbstractCoordinator  : [Consumer clientId=consumer-listener1-3, groupId=listener1] Successfully joined group with generation 2\r\n2021-04-20 14:32:23.779  INFO 6672 --- [listener1-1-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-listener1-2, groupId=listener1] Adding newly assigned partitions: test1-5, test1-4, test1-3\r\n2021-04-20 14:32:23.779  INFO 6672 --- [listener1-2-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-listener1-3, groupId=listener1] Adding newly assigned partitions: test1-6, test1-7\r\n2021-04-20 14:32:23.779  INFO 6672 --- [listener1-0-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-listener1-1, groupId=listener1] Adding newly assigned partitions: test1-0, test1-2, test1-1\r\n2021-04-20 14:32:23.779  INFO 6672 --- [listener1-3-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-listener1-4, groupId=listener1] Adding newly assigned partitions: test1-9, test1-8\r\n2021-04-20 14:32:23.789  INFO 6672 --- [listener1-3-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-listener1-4, groupId=listener1] Found no committed offset for partition test1-8\r\n2021-04-20 14:32:23.789  INFO 6672 --- [listener1-2-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-listener1-3, groupId=listener1] Found no committed offset for partition test1-6\r\n2021-04-20 14:32:23.789  INFO 6672 --- [listener1-0-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-listener1-1, groupId=listener1] Found no committed offset for partition test1-2\r\n2021-04-20 14:32:23.789  INFO 6672 --- [listener1-0-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-listener1-1, groupId=listener1] Found no committed offset for partition test1-1\r\n2021-04-20 14:32:23.791  INFO 6672 --- [listener1-0-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-listener1-1, groupId=listener1] Setting offset for partition test1-0 to the committed offset FetchPosition{offset=14, offsetEpoch=Optional.empty, currentLeader=LeaderAndEpoch{leader=Optional[localhost:29092 (id: 1 rack: null)], epoch=0}}\r\n2021-04-20 14:32:23.791  INFO 6672 --- [listener1-1-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-listener1-2, groupId=listener1] Setting offset for partition test1-5 to the committed offset FetchPosition{offset=1, offsetEpoch=Optional.empty, currentLeader=LeaderAndEpoch{leader=Optional[localhost:29092 (id: 1 rack: null)], epoch=0}}\r\n2021-04-20 14:32:23.791  INFO 6672 --- [listener1-3-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-listener1-4, groupId=listener1] Setting offset for partition test1-9 to the committed offset FetchPosition{offset=1, offsetEpoch=Optional.empty, currentLeader=LeaderAndEpoch{leader=Optional[localhost:29092 (id: 1 rack: null)], epoch=0}}\r\n2021-04-20 14:32:23.791  INFO 6672 --- [listener1-2-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-listener1-3, groupId=listener1] Setting offset for partition test1-7 to the committed offset FetchPosition{offset=1, offsetEpoch=Optional.empty, currentLeader=LeaderAndEpoch{leader=Optional[localhost:29092 (id: 1 rack: null)], epoch=0}}\r\n2021-04-20 14:32:23.791  INFO 6672 --- [listener1-1-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-listener1-2, groupId=listener1] Setting offset for partition test1-4 to the committed offset FetchPosition{offset=1, offsetEpoch=Optional.empty, currentLeader=LeaderAndEpoch{leader=Optional[localhost:29092 (id: 1 rack: null)], epoch=0}}\r\n2021-04-20 14:32:23.791  INFO 6672 --- [listener1-1-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-listener1-2, groupId=listener1] Setting offset for partition test1-3 to the committed offset FetchPosition{offset=1, offsetEpoch=Optional.empty, currentLeader=LeaderAndEpoch{leader=Optional[localhost:29092 (id: 1 rack: null)], epoch=0}}\r\n2021-04-20 14:32:23.792  INFO 6672 --- [listener1-1-C-1] o.s.k.l.KafkaMessageListenerContainer    : listener1: partitions assigned: [test1-5, test1-4, test1-3]\r\n2021-04-20 14:32:23.804  INFO 6672 --- [listener1-3-C-1] o.a.k.c.c.internals.SubscriptionState    : [Consumer clientId=consumer-listener1-4, groupId=listener1] Resetting offset for partition test1-8 to offset 0.\r\n2021-04-20 14:32:23.804  INFO 6672 --- [listener1-2-C-1] o.a.k.c.c.internals.SubscriptionState    : [Consumer clientId=consumer-listener1-3, groupId=listener1] Resetting offset for partition test1-6 to offset 0.\r\n2021-04-20 14:32:23.804  INFO 6672 --- [listener1-0-C-1] o.a.k.c.c.internals.SubscriptionState    : [Consumer clientId=consumer-listener1-1, groupId=listener1] Resetting offset for partition test1-2 to offset 0.\r\n2021-04-20 14:32:23.804  INFO 6672 --- [listener1-0-C-1] o.a.k.c.c.internals.SubscriptionState    : [Consumer clientId=consumer-listener1-1, groupId=listener1] Resetting offset for partition test1-1 to offset 0.\r\n2021-04-20 14:32:23.804  INFO 6672 --- [listener1-3-C-1] o.s.k.l.KafkaMessageListenerContainer    : listener1: partitions assigned: [test1-9, test1-8]\r\n2021-04-20 14:32:23.804  INFO 6672 --- [listener1-2-C-1] o.s.k.l.KafkaMessageListenerContainer    : listener1: partitions assigned: [test1-6, test1-7]\r\n2021-04-20 14:32:23.804  INFO 6672 --- [listener1-0-C-1] o.s.k.l.KafkaMessageListenerContainer    : listener1: partitions assigned: [test1-0, test1-2, test1-1]\r\n2021-04-20 14:32:23.817  INFO 6672 --- [listener1-0-C-1] c.z.s.cbaConnector.KafkaConsumer         : [KafakaConsumer][consume] thread:21 received message:{&quot;id&quot;:1618900340}\r\n```","title":"Kafka is giving: &quot;The group member needs to have a valid member id before actually entering a consumer group&quot;","body":"<p>hummm....in my case, consumers will rejoin the group with a generated ID. Here is my test and result. FYI</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Test\n    void testSyncSend() throws ExecutionException, InterruptedException {\n        int id = (int)(System.currentTimeMillis()/1000);\n        SendResult result = producer.syncSend(id);\n        logger.info(&quot;[testSyncSend] id:{}, result:{}&quot;, id, result);\n        new CountDownLatch(1).await();\n    }\n</code></pre>\n<pre><code>2021-04-20 14:32:20.980  INFO 6672 --- [           main] o.a.kafka.common.utils.AppInfoParser     : Kafka version: 2.5.1\n2021-04-20 14:32:20.981  INFO 6672 --- [           main] o.a.kafka.common.utils.AppInfoParser     : Kafka commitId: 0efa8fb0f4c73d92\n2021-04-20 14:32:20.981  INFO 6672 --- [           main] o.a.kafka.common.utils.AppInfoParser     : Kafka startTimeMs: 1618900340980\n2021-04-20 14:32:21.125  INFO 6672 --- [listener1-0-C-1] org.apache.kafka.clients.Metadata        : [Consumer clientId=consumer-listener1-1, groupId=listener1] Cluster ID: RctzTn4XR4WNNVuqh25izw\n2021-04-20 14:32:21.125  INFO 6672 --- [ad | producer-1] org.apache.kafka.clients.Metadata        : [Producer clientId=producer-1] Cluster ID: RctzTn4XR4WNNVuqh25izw\n2021-04-20 14:32:21.125  INFO 6672 --- [listener1-3-C-1] org.apache.kafka.clients.Metadata        : [Consumer clientId=consumer-listener1-4, groupId=listener1] Cluster ID: RctzTn4XR4WNNVuqh25izw\n2021-04-20 14:32:21.125  INFO 6672 --- [listener1-2-C-1] org.apache.kafka.clients.Metadata        : [Consumer clientId=consumer-listener1-3, groupId=listener1] Cluster ID: RctzTn4XR4WNNVuqh25izw\n2021-04-20 14:32:21.125  INFO 6672 --- [listener1-1-C-1] org.apache.kafka.clients.Metadata        : [Consumer clientId=consumer-listener1-2, groupId=listener1] Cluster ID: RctzTn4XR4WNNVuqh25izw\n2021-04-20 14:32:21.127  INFO 6672 --- [listener1-1-C-1] o.a.k.c.c.internals.AbstractCoordinator  : [Consumer clientId=consumer-listener1-2, groupId=listener1] Discovered group coordinator localhost:29092 (id: 2147483646 rack: null)\n2021-04-20 14:32:21.127  INFO 6672 --- [listener1-2-C-1] o.a.k.c.c.internals.AbstractCoordinator  : [Consumer clientId=consumer-listener1-3, groupId=listener1] Discovered group coordinator localhost:29092 (id: 2147483646 rack: null)\n2021-04-20 14:32:21.127  INFO 6672 --- [listener1-0-C-1] o.a.k.c.c.internals.AbstractCoordinator  : [Consumer clientId=consumer-listener1-1, groupId=listener1] Discovered group coordinator localhost:29092 (id: 2147483646 rack: null)\n2021-04-20 14:32:21.127  INFO 6672 --- [listener1-3-C-1] o.a.k.c.c.internals.AbstractCoordinator  : [Consumer clientId=consumer-listener1-4, groupId=listener1] Discovered group coordinator localhost:29092 (id: 2147483646 rack: null)\n2021-04-20 14:32:21.130  INFO 6672 --- [listener1-1-C-1] o.a.k.c.c.internals.AbstractCoordinator  : [Consumer clientId=consumer-listener1-2, groupId=listener1] (Re-)joining group\n2021-04-20 14:32:21.130  INFO 6672 --- [listener1-3-C-1] o.a.k.c.c.internals.AbstractCoordinator  : [Consumer clientId=consumer-listener1-4, groupId=listener1] (Re-)joining group\n2021-04-20 14:32:21.130  INFO 6672 --- [listener1-0-C-1] o.a.k.c.c.internals.AbstractCoordinator  : [Consumer clientId=consumer-listener1-1, groupId=listener1] (Re-)joining group\n2021-04-20 14:32:21.130  INFO 6672 --- [listener1-2-C-1] o.a.k.c.c.internals.AbstractCoordinator  : [Consumer clientId=consumer-listener1-3, groupId=listener1] (Re-)joining group\n2021-04-20 14:32:21.147  INFO 6672 --- [listener1-0-C-1] o.a.k.c.c.internals.AbstractCoordinator  : [Consumer clientId=consumer-listener1-1, groupId=listener1] Join group failed with org.apache.kafka.common.errors.MemberIdRequiredException: The group member needs to have a valid member id before actually entering a consumer group\n2021-04-20 14:32:21.147  INFO 6672 --- [listener1-2-C-1] o.a.k.c.c.internals.AbstractCoordinator  : [Consumer clientId=consumer-listener1-3, groupId=listener1] Join group failed with org.apache.kafka.common.errors.MemberIdRequiredException: The group member needs to have a valid member id before actually entering a consumer group\n2021-04-20 14:32:21.147  INFO 6672 --- [listener1-3-C-1] o.a.k.c.c.internals.AbstractCoordinator  : [Consumer clientId=consumer-listener1-4, groupId=listener1] Join group failed with org.apache.kafka.common.errors.MemberIdRequiredException: The group member needs to have a valid member id before actually entering a consumer group\n2021-04-20 14:32:21.147  INFO 6672 --- [listener1-1-C-1] o.a.k.c.c.internals.AbstractCoordinator  : [Consumer clientId=consumer-listener1-2, groupId=listener1] Join group failed with org.apache.kafka.common.errors.MemberIdRequiredException: The group member needs to have a valid member id before actually entering a consumer group\n2021-04-20 14:32:21.148  INFO 6672 --- [listener1-0-C-1] o.a.k.c.c.internals.AbstractCoordinator  : [Consumer clientId=consumer-listener1-1, groupId=listener1] (Re-)joining group\n2021-04-20 14:32:21.148  INFO 6672 --- [listener1-1-C-1] o.a.k.c.c.internals.AbstractCoordinator  : [Consumer clientId=consumer-listener1-2, groupId=listener1] (Re-)joining group\n2021-04-20 14:32:21.148  INFO 6672 --- [listener1-3-C-1] o.a.k.c.c.internals.AbstractCoordinator  : [Consumer clientId=consumer-listener1-4, groupId=listener1] (Re-)joining group\n2021-04-20 14:32:21.148  INFO 6672 --- [listener1-2-C-1] o.a.k.c.c.internals.AbstractCoordinator  : [Consumer clientId=consumer-listener1-3, groupId=listener1] (Re-)joining group\n2021-04-20 14:32:21.317  INFO 6672 --- [           main] c.z.s.cbaConnector.KafkaProducerTest     : [testSyncSend] id:1618900340, result:SendResult [producerRecord=ProducerRecord(topic=test1, partition=null, headers=RecordHeaders(headers = [RecordHeader(key = __TypeId__, value = [99, 111, 109, 46, 122, 104, 105, 108, 105, 46, 115, 109, 115, 109, 111, 100, 117, 108, 101, 46, 101, 110, 116, 105, 116, 121, 46, 77, 101, 115, 115, 97, 103, 101])], isReadOnly = true), key=null, value=Message(id=1618900340), timestamp=null), recordMetadata=test1-1@0]\n2021-04-20 14:32:23.770  INFO 6672 --- [listener1-3-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-listener1-4, groupId=listener1] Finished assignment for group at generation 2: {consumer-listener1-4-9a383250-e84d-413a-b012-85405abdcf7f=Assignment(partitions=[test1-8, test1-9]), consumer-listener1-2-3d26d9ef-b973-4d19-a930-5ba77d938680=Assignment(partitions=[test1-3, test1-4, test1-5]), consumer-listener1-1-10b6895e-264e-45bd-ba90-c71ea12b21e5=Assignment(partitions=[test1-0, test1-1, test1-2]), consumer-listener1-3-54ce965a-87cd-4e28-b0e9-b0f2c9f69423=Assignment(partitions=[test1-6, test1-7])}\n2021-04-20 14:32:23.775  INFO 6672 --- [listener1-1-C-1] o.a.k.c.c.internals.AbstractCoordinator  : [Consumer clientId=consumer-listener1-2, groupId=listener1] Successfully joined group with generation 2\n2021-04-20 14:32:23.775  INFO 6672 --- [listener1-0-C-1] o.a.k.c.c.internals.AbstractCoordinator  : [Consumer clientId=consumer-listener1-1, groupId=listener1] Successfully joined group with generation 2\n2021-04-20 14:32:23.775  INFO 6672 --- [listener1-3-C-1] o.a.k.c.c.internals.AbstractCoordinator  : [Consumer clientId=consumer-listener1-4, groupId=listener1] Successfully joined group with generation 2\n2021-04-20 14:32:23.776  INFO 6672 --- [listener1-2-C-1] o.a.k.c.c.internals.AbstractCoordinator  : [Consumer clientId=consumer-listener1-3, groupId=listener1] Successfully joined group with generation 2\n2021-04-20 14:32:23.779  INFO 6672 --- [listener1-1-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-listener1-2, groupId=listener1] Adding newly assigned partitions: test1-5, test1-4, test1-3\n2021-04-20 14:32:23.779  INFO 6672 --- [listener1-2-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-listener1-3, groupId=listener1] Adding newly assigned partitions: test1-6, test1-7\n2021-04-20 14:32:23.779  INFO 6672 --- [listener1-0-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-listener1-1, groupId=listener1] Adding newly assigned partitions: test1-0, test1-2, test1-1\n2021-04-20 14:32:23.779  INFO 6672 --- [listener1-3-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-listener1-4, groupId=listener1] Adding newly assigned partitions: test1-9, test1-8\n2021-04-20 14:32:23.789  INFO 6672 --- [listener1-3-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-listener1-4, groupId=listener1] Found no committed offset for partition test1-8\n2021-04-20 14:32:23.789  INFO 6672 --- [listener1-2-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-listener1-3, groupId=listener1] Found no committed offset for partition test1-6\n2021-04-20 14:32:23.789  INFO 6672 --- [listener1-0-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-listener1-1, groupId=listener1] Found no committed offset for partition test1-2\n2021-04-20 14:32:23.789  INFO 6672 --- [listener1-0-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-listener1-1, groupId=listener1] Found no committed offset for partition test1-1\n2021-04-20 14:32:23.791  INFO 6672 --- [listener1-0-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-listener1-1, groupId=listener1] Setting offset for partition test1-0 to the committed offset FetchPosition{offset=14, offsetEpoch=Optional.empty, currentLeader=LeaderAndEpoch{leader=Optional[localhost:29092 (id: 1 rack: null)], epoch=0}}\n2021-04-20 14:32:23.791  INFO 6672 --- [listener1-1-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-listener1-2, groupId=listener1] Setting offset for partition test1-5 to the committed offset FetchPosition{offset=1, offsetEpoch=Optional.empty, currentLeader=LeaderAndEpoch{leader=Optional[localhost:29092 (id: 1 rack: null)], epoch=0}}\n2021-04-20 14:32:23.791  INFO 6672 --- [listener1-3-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-listener1-4, groupId=listener1] Setting offset for partition test1-9 to the committed offset FetchPosition{offset=1, offsetEpoch=Optional.empty, currentLeader=LeaderAndEpoch{leader=Optional[localhost:29092 (id: 1 rack: null)], epoch=0}}\n2021-04-20 14:32:23.791  INFO 6672 --- [listener1-2-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-listener1-3, groupId=listener1] Setting offset for partition test1-7 to the committed offset FetchPosition{offset=1, offsetEpoch=Optional.empty, currentLeader=LeaderAndEpoch{leader=Optional[localhost:29092 (id: 1 rack: null)], epoch=0}}\n2021-04-20 14:32:23.791  INFO 6672 --- [listener1-1-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-listener1-2, groupId=listener1] Setting offset for partition test1-4 to the committed offset FetchPosition{offset=1, offsetEpoch=Optional.empty, currentLeader=LeaderAndEpoch{leader=Optional[localhost:29092 (id: 1 rack: null)], epoch=0}}\n2021-04-20 14:32:23.791  INFO 6672 --- [listener1-1-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-listener1-2, groupId=listener1] Setting offset for partition test1-3 to the committed offset FetchPosition{offset=1, offsetEpoch=Optional.empty, currentLeader=LeaderAndEpoch{leader=Optional[localhost:29092 (id: 1 rack: null)], epoch=0}}\n2021-04-20 14:32:23.792  INFO 6672 --- [listener1-1-C-1] o.s.k.l.KafkaMessageListenerContainer    : listener1: partitions assigned: [test1-5, test1-4, test1-3]\n2021-04-20 14:32:23.804  INFO 6672 --- [listener1-3-C-1] o.a.k.c.c.internals.SubscriptionState    : [Consumer clientId=consumer-listener1-4, groupId=listener1] Resetting offset for partition test1-8 to offset 0.\n2021-04-20 14:32:23.804  INFO 6672 --- [listener1-2-C-1] o.a.k.c.c.internals.SubscriptionState    : [Consumer clientId=consumer-listener1-3, groupId=listener1] Resetting offset for partition test1-6 to offset 0.\n2021-04-20 14:32:23.804  INFO 6672 --- [listener1-0-C-1] o.a.k.c.c.internals.SubscriptionState    : [Consumer clientId=consumer-listener1-1, groupId=listener1] Resetting offset for partition test1-2 to offset 0.\n2021-04-20 14:32:23.804  INFO 6672 --- [listener1-0-C-1] o.a.k.c.c.internals.SubscriptionState    : [Consumer clientId=consumer-listener1-1, groupId=listener1] Resetting offset for partition test1-1 to offset 0.\n2021-04-20 14:32:23.804  INFO 6672 --- [listener1-3-C-1] o.s.k.l.KafkaMessageListenerContainer    : listener1: partitions assigned: [test1-9, test1-8]\n2021-04-20 14:32:23.804  INFO 6672 --- [listener1-2-C-1] o.s.k.l.KafkaMessageListenerContainer    : listener1: partitions assigned: [test1-6, test1-7]\n2021-04-20 14:32:23.804  INFO 6672 --- [listener1-0-C-1] o.s.k.l.KafkaMessageListenerContainer    : listener1: partitions assigned: [test1-0, test1-2, test1-1]\n2021-04-20 14:32:23.817  INFO 6672 --- [listener1-0-C-1] c.z.s.cbaConnector.KafkaConsumer         : [KafakaConsumer][consume] thread:21 received message:{&quot;id&quot;:1618900340}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":174792,"reputation":617,"user_id":404376,"accept_rate":60,"display_name":"zwessels"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1669313560,"creation_date":1669313560,"answer_id":74564813,"question_id":63946696,"body_markdown":"If the answer from @Archimedes Trajano doesn&#39;t work for you (like in my case), then this happens when kafka can&#39;t pick up the consumer group id.\r\n\r\nif you have a single consumer group, you can specify it in the properties file like this: \r\n\r\n```\r\nspring:\r\n  kafka:\r\n    bootstrap-servers: kafka:9092\r\n    consumer:\r\n      group-id: insert-your-consumer-group-id\r\n      ... rest of your properties ...\r\n```\r\n\r\nor if you have multiple consumers then you can specify the `groupId` for each one:\r\n\r\n```java\r\n@KafkaListener(topics=&quot;topic-1&quot;, groupId=&quot;group-1&quot;)\r\npublic void registerServer(@Payload(required = false) ServerInfo serverInfo) \r\n\r\n@KafkaListener(topics=&quot;topic-2&quot;,groupId=&quot;group-2&quot;)\r\npublic void processAlert(@Payload(required = false) AlertOnKafka alert)\r\n```\r\n\r\ndocs: https://docs.spring.io/spring-kafka/reference/html/#annotation-properties","title":"Kafka is giving: &quot;The group member needs to have a valid member id before actually entering a consumer group&quot;","body":"<p>If the answer from @Archimedes Trajano doesn't work for you (like in my case), then this happens when kafka can't pick up the consumer group id.</p>\n<p>if you have a single consumer group, you can specify it in the properties file like this:</p>\n<pre><code>spring:\n  kafka:\n    bootstrap-servers: kafka:9092\n    consumer:\n      group-id: insert-your-consumer-group-id\n      ... rest of your properties ...\n</code></pre>\n<p>or if you have multiple consumers then you can specify the <code>groupId</code> for each one:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@KafkaListener(topics=&quot;topic-1&quot;, groupId=&quot;group-1&quot;)\npublic void registerServer(@Payload(required = false) ServerInfo serverInfo) \n\n@KafkaListener(topics=&quot;topic-2&quot;,groupId=&quot;group-2&quot;)\npublic void processAlert(@Payload(required = false) AlertOnKafka alert)\n</code></pre>\n<p>docs: <a href=\"https://docs.spring.io/spring-kafka/reference/html/#annotation-properties\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-kafka/reference/html/#annotation-properties</a></p>\n"},{"tags":[],"owner":{"account_id":10270780,"reputation":111,"user_id":7579217,"display_name":"Abhimanyu Singh"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1681169507,"creation_date":1681169507,"answer_id":75981451,"question_id":63946696,"body_markdown":"In my experience this is caused by a missing group instance id configuration.\r\n\r\nBelow is what I use while configuring the kafka consumer for a group.\r\n\r\n    consumerProperties.put(ConsumerConfig.GROUP_INSTANCE_ID_CONFIG,(&quot;SchedulerCoordinator&quot;+UUID.randomUUID()));\r\n\r\nBear in mind that I personally prefer class configurations over property based ones and these consumerProperties go into the Consumer initialisation.","title":"Kafka is giving: &quot;The group member needs to have a valid member id before actually entering a consumer group&quot;","body":"<p>In my experience this is caused by a missing group instance id configuration.</p>\n<p>Below is what I use while configuring the kafka consumer for a group.</p>\n<pre><code>consumerProperties.put(ConsumerConfig.GROUP_INSTANCE_ID_CONFIG,(&quot;SchedulerCoordinator&quot;+UUID.randomUUID()));\n</code></pre>\n<p>Bear in mind that I personally prefer class configurations over property based ones and these consumerProperties go into the Consumer initialisation.</p>\n"}],"owner":{"account_id":5211177,"reputation":611,"user_id":4167554,"accept_rate":44,"display_name":"KRico"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56569,"favorite_count":0,"down_vote_count":0,"up_vote_count":28,"answer_count":5,"score":28,"last_activity_date":1681169507,"creation_date":1600380059,"question_id":63946696,"body_markdown":"I am using Kafka to consume messages in Java.  I want to test by starting the same app multiple times on my local box. When I start up, the first time I am able to start consuming messages from the topic.  When I start up a second one I get:\r\n\r\n```\r\nJoin group failed with org.apache.kafka.common.errors.MemberIdRequiredException: The group member needs to have a valid member id before actually entering a consumer group\r\n```\r\n and dont get any messages from the topic.  If I try to start more of them I get the same issues.\r\n\r\nThe configuration I am using for Kafka is\r\n\r\n```yaml\r\nspring:\r\n  kafka:\r\n    bootstrap-servers: kafka:9092\r\n    consumer:\r\n      auto-offset-reset: earliest\r\n      key-deserializer: org.springframework.kafka.support.serializer.ErrorHandlingDeserializer2\r\n      value-deserializer: org.springframework.kafka.support.serializer.ErrorHandlingDeserializer2\r\n      properties:\r\n        spring.deserializer.key.delegate.class: org.springframework.kafka.support.serializer.JsonDeserializer\r\n        spring.deserializer.value.delegate.class: org.springframework.kafka.support.serializer.JsonDeserializer\r\n        spring.json.use.type.headers: false\r\n    listener:\r\n      missing-topics-fatal: false\r\n```\r\n\r\nI have two topics\r\n\r\n```java\r\n@Configuration\r\npublic class KafkaTopics {\r\n    @Bean(&quot;alertsTopic&quot;)\r\n    public NewTopic alertsTopic() {\r\n\r\n        return TopicBuilder.name(&quot;XXX.alerts&quot;)\r\n            .compact()\r\n            .build();\r\n    }\r\n\r\n    @Bean(&quot;serversTopic&quot;)\r\n    public NewTopic serversTopic() {\r\n\r\n        return TopicBuilder.name(&quot;XXX.servers&quot;)\r\n            .compact()\r\n            .build();\r\n    }\r\n\r\n}\r\n```\r\n\r\nAnd two listeners in *different* class files.\r\n\r\n    @KafkaListener(topics = SERVERS_KAFKA_TOPIC, id = &quot;#{T(java.util.UUID).randomUUID().toString()}&quot;,\r\n        properties = {\r\n            &quot;spring.json.key.default.type=java.lang.String&quot;,\r\n            &quot;spring.json.value.default.type=com.devhaus.learningjungle.db.kafka.ServerInfo&quot;\r\n        })\r\n    public void registerServer(\r\n        @Payload(required = false) ServerInfo serverInfo\r\n    ) \r\n\r\n    @KafkaListener(topics = ALERTS_KAFKA_TOPIC,\r\n        id = &quot;#{T(java.util.UUID).randomUUID().toString()}&quot;,\r\n        properties = {\r\n            &quot;spring.json.key.default.type=com.devhaus.learningjungle.db.kafka.AlertOnKafkaKey&quot;,\r\n            &quot;spring.json.value.default.type=com.devhaus.learningjungle.db.kafka.AlertOnKafka&quot;\r\n        })\r\n    public void processAlert(\r\n        @Header(KafkaHeaders.RECEIVED_MESSAGE_KEY) AlertOnKafkaKey key,\r\n        @Header(KafkaHeaders.RECEIVED_PARTITION_ID) int partitionId,\r\n        @Header(KafkaHeaders.OFFSET) long offset,\r\n        @Payload(required = false) AlertOnKafka alert)\r\n```","title":"Kafka is giving: &quot;The group member needs to have a valid member id before actually entering a consumer group&quot;","body":"<p>I am using Kafka to consume messages in Java.  I want to test by starting the same app multiple times on my local box. When I start up, the first time I am able to start consuming messages from the topic.  When I start up a second one I get:</p>\n<pre><code>Join group failed with org.apache.kafka.common.errors.MemberIdRequiredException: The group member needs to have a valid member id before actually entering a consumer group\n</code></pre>\n<p>and dont get any messages from the topic.  If I try to start more of them I get the same issues.</p>\n<p>The configuration I am using for Kafka is</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>spring:\n  kafka:\n    bootstrap-servers: kafka:9092\n    consumer:\n      auto-offset-reset: earliest\n      key-deserializer: org.springframework.kafka.support.serializer.ErrorHandlingDeserializer2\n      value-deserializer: org.springframework.kafka.support.serializer.ErrorHandlingDeserializer2\n      properties:\n        spring.deserializer.key.delegate.class: org.springframework.kafka.support.serializer.JsonDeserializer\n        spring.deserializer.value.delegate.class: org.springframework.kafka.support.serializer.JsonDeserializer\n        spring.json.use.type.headers: false\n    listener:\n      missing-topics-fatal: false\n</code></pre>\n<p>I have two topics</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\npublic class KafkaTopics {\n    @Bean(&quot;alertsTopic&quot;)\n    public NewTopic alertsTopic() {\n\n        return TopicBuilder.name(&quot;XXX.alerts&quot;)\n            .compact()\n            .build();\n    }\n\n    @Bean(&quot;serversTopic&quot;)\n    public NewTopic serversTopic() {\n\n        return TopicBuilder.name(&quot;XXX.servers&quot;)\n            .compact()\n            .build();\n    }\n\n}\n</code></pre>\n<p>And two listeners in <em>different</em> class files.</p>\n<pre><code>@KafkaListener(topics = SERVERS_KAFKA_TOPIC, id = &quot;#{T(java.util.UUID).randomUUID().toString()}&quot;,\n    properties = {\n        &quot;spring.json.key.default.type=java.lang.String&quot;,\n        &quot;spring.json.value.default.type=com.devhaus.learningjungle.db.kafka.ServerInfo&quot;\n    })\npublic void registerServer(\n    @Payload(required = false) ServerInfo serverInfo\n) \n\n@KafkaListener(topics = ALERTS_KAFKA_TOPIC,\n    id = &quot;#{T(java.util.UUID).randomUUID().toString()}&quot;,\n    properties = {\n        &quot;spring.json.key.default.type=com.devhaus.learningjungle.db.kafka.AlertOnKafkaKey&quot;,\n        &quot;spring.json.value.default.type=com.devhaus.learningjungle.db.kafka.AlertOnKafka&quot;\n    })\npublic void processAlert(\n    @Header(KafkaHeaders.RECEIVED_MESSAGE_KEY) AlertOnKafkaKey key,\n    @Header(KafkaHeaders.RECEIVED_PARTITION_ID) int partitionId,\n    @Header(KafkaHeaders.OFFSET) long offset,\n    @Payload(required = false) AlertOnKafka alert)\n</code></pre>\n<pre><code></code></pre>\n"},{"tags":["java","microservices","netflix-eureka","openfeign"],"answers":[{"tags":[],"owner":{"account_id":16395029,"reputation":379,"user_id":11842836,"display_name":"Danish Javed"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681168620,"creation_date":1681168620,"answer_id":75981390,"question_id":75980163,"body_markdown":"I was missing path in my feign client. Updated that to \r\n\r\n```\r\n@FeignClient(value = &quot;bottom-service&quot;, path = &quot;/bottom&quot;)\r\npublic interface AppFeignClient {\r\n    @GetMapping\r\n    public String test();\r\n}\r\n```\r\n\r\nNot it works fine. Although the url still uses the service name like but it is able to fetch data with the same url\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/cfbjM.png","title":"Fiegn Client not picking service url from Eureka Service","body":"<p>I was missing path in my feign client. Updated that to</p>\n<pre><code>@FeignClient(value = &quot;bottom-service&quot;, path = &quot;/bottom&quot;)\npublic interface AppFeignClient {\n    @GetMapping\n    public String test();\n}\n</code></pre>\n<p>Not it works fine. Although the url still uses the service name like but it is able to fetch data with the same url</p>\n<p><a href=\"https://i.stack.imgur.com/cfbjM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cfbjM.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":16395029,"reputation":379,"user_id":11842836,"display_name":"Danish Javed"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":140,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681168620,"creation_date":1681155526,"question_id":75980163,"body_markdown":"I have just started with microservices and to learn I am working on [this project][1]\r\n&lt;br/&gt;\r\nThe problem is although my services are registered at Eureka Server.\r\nOpenFeing is not picking up the url. It is picking up the service name instead for the url. &lt;h5&gt;The Problem&lt;/h5&gt;\r\n[![enter image description here][2]][2]\r\n&lt;br/&gt;\r\n&lt;h5&gt;Check registered services&lt;/h5&gt;\r\n\r\n[![Registed Services][3]][3]\r\n\r\n&lt;h4&gt;Application Properties&lt;/h4&gt;\r\n&lt;h6&gt;Server&lt;/h6&gt;\r\n\r\n```\r\nserver.port=8761\r\n\r\nspring.application.name=eureka-server\r\neureka.client.register-with-eureka=false\r\neureka.client.fetch-registry=false\r\n```\r\n\r\n&lt;h6&gt;Top layer (the one that&#39;ll consume other services)&lt;/h6&gt;\r\n\r\n```\r\nspring.application.name=top-service\r\nserver.port=8080\r\neureka.client.service-url.defaultZone=http://localhost:8761/eureka\r\n\r\n```\r\n\r\n&lt;h6&gt;Bottomlayer (the one that&#39;ll be consumed)&lt;/h6&gt;\r\n\r\n```\r\nspring.application.name=bottom-service\r\nserver.port=8082\r\neureka.client.service-url.defaultZone=http://localhost:8761/eureka\r\n\r\n```\r\n\r\n&lt;h5&gt;Open Feign Interface&lt;/h5&gt;\r\n\r\n```\r\n@FeignClient(value = &quot;bottom-service&quot;)\r\npublic interface AppFeignClient {\r\n    @GetMapping\r\n    public String test();\r\n\r\n}\r\n```\r\n\r\n&lt;br/&gt;&lt;br/&gt;\r\n[Please checkout this github repo in case entire code is required][1]\r\n\r\n\r\n  [1]: https://github.com/dev-danish-javed/MicroServices\r\n  [2]: https://i.stack.imgur.com/IqyiE.png\r\n  [3]: https://i.stack.imgur.com/1OcHj.png","title":"Fiegn Client not picking service url from Eureka Service","body":"<p>I have just started with microservices and to learn I am working on <a href=\"https://github.com/dev-danish-javed/MicroServices\" rel=\"nofollow noreferrer\">this project</a>\n<br/>\nThe problem is although my services are registered at Eureka Server.\nOpenFeing is not picking up the url. It is picking up the service name instead for the url. <h5>The Problem</h5>\n<a href=\"https://i.stack.imgur.com/IqyiE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IqyiE.png\" alt=\"enter image description here\" /></a>\n<br/></p>\n<h5>Check registered services</h5>\n<p><a href=\"https://i.stack.imgur.com/1OcHj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1OcHj.png\" alt=\"Registed Services\" /></a></p>\n<h4>Application Properties</h4>\n<h6>Server</h6>\n<pre><code>server.port=8761\n\nspring.application.name=eureka-server\neureka.client.register-with-eureka=false\neureka.client.fetch-registry=false\n</code></pre>\n<h6>Top layer (the one that'll consume other services)</h6>\n<pre><code>spring.application.name=top-service\nserver.port=8080\neureka.client.service-url.defaultZone=http://localhost:8761/eureka\n\n</code></pre>\n<h6>Bottomlayer (the one that'll be consumed)</h6>\n<pre><code>spring.application.name=bottom-service\nserver.port=8082\neureka.client.service-url.defaultZone=http://localhost:8761/eureka\n\n</code></pre>\n<h5>Open Feign Interface</h5>\n<pre><code>@FeignClient(value = &quot;bottom-service&quot;)\npublic interface AppFeignClient {\n    @GetMapping\n    public String test();\n\n}\n</code></pre>\n<p><br/><br/>\n<a href=\"https://github.com/dev-danish-javed/MicroServices\" rel=\"nofollow noreferrer\">Please checkout this github repo in case entire code is required</a></p>\n"},{"tags":["java","hibernate","jpa","h2"],"comments":[{"owner":{"account_id":1535561,"reputation":7664,"user_id":1431720,"accept_rate":89,"display_name":"Robert"},"score":0,"creation_date":1681165807,"post_id":75980561,"comment_id":134009852,"body_markdown":"What exactly do you mean by &quot;didn&#39;t work&quot;? What happened when you ran your code, and what were you expecting to happen instead? Any errors? See [ask].","body":"What exactly do you mean by &quot;didn&#39;t work&quot;? What happened when you ran your code, and what were you expecting to happen instead? Any errors? See <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."},{"owner":{"account_id":14999839,"reputation":138,"user_id":10827862,"display_name":"smileis2333"},"score":0,"creation_date":1681193092,"post_id":75980561,"comment_id":134012524,"body_markdown":"so why no add the field userId? so you can transfer to id to this field when deserialize.","body":"so why no add the field userId? so you can transfer to id to this field when deserialize."}],"answers":[{"comments":[{"owner":{"account_id":25899418,"reputation":1,"user_id":19625565,"display_name":"Niklas Hohlweg"},"score":0,"creation_date":1681216396,"post_id":75981363,"comment_id":134017558,"body_markdown":"Can you show or explain me where I have to Implement this Codesnippet? In the Service Class?","body":"Can you show or explain me where I have to Implement this Codesnippet? In the Service Class?"}],"tags":[],"owner":{"account_id":17520379,"reputation":1536,"user_id":12706564,"display_name":"Emanuel Trandafir"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681168230,"creation_date":1681168230,"answer_id":75981363,"question_id":75980561,"body_markdown":"One thing you cna do is to keep sending the ownerId - as in your example. After that, you can map te other fields as usual, and, when it comes to the owner, use an `entityManager` or a `JpaRepository` and call the `getReference` method. \r\n\r\nThis will return something that looks like a `User` and it can be used for other queries or db operations, but it&#39;s actually just a proxy based on the given id: \r\n\r\n    User owner = entityManager.getReference(User.class, deviceDto.getOwner());\r\n    Device device = mapper.map(deviceDto); // map the other fields\r\n    device.setOwner(owner);\r\n    deviceRepository.save(device);\r\n\r\nRead more about it here: https://www.baeldung.com/jpa-entity-manager-get-reference","title":"Hibernate: Entity Relationship only with id in JSON?","body":"<p>One thing you cna do is to keep sending the ownerId - as in your example. After that, you can map te other fields as usual, and, when it comes to the owner, use an <code>entityManager</code> or a <code>JpaRepository</code> and call the <code>getReference</code> method.</p>\n<p>This will return something that looks like a <code>User</code> and it can be used for other queries or db operations, but it's actually just a proxy based on the given id:</p>\n<pre><code>User owner = entityManager.getReference(User.class, deviceDto.getOwner());\nDevice device = mapper.map(deviceDto); // map the other fields\ndevice.setOwner(owner);\ndeviceRepository.save(device);\n</code></pre>\n<p>Read more about it here: <a href=\"https://www.baeldung.com/jpa-entity-manager-get-reference\" rel=\"nofollow noreferrer\">https://www.baeldung.com/jpa-entity-manager-get-reference</a></p>\n"}],"owner":{"account_id":25899418,"reputation":1,"user_id":19625565,"display_name":"Niklas Hohlweg"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":79,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681168230,"creation_date":1681159301,"question_id":75980561,"body_markdown":"I&#180;ve got two Entities: User and Device.\r\nEach Device should have one User. But the Users are already existing so I want to Link a User by the Id to my Device.\r\nAt the Moment I have to create a User and send it as Post-Request to my Backend. But I just want to send the Id which should be stored. \r\n\r\n\r\nI have ceated an Application and have to transfer the Data via JSON-File\r\n\r\n\r\n\r\n```\r\n@Entity\r\n@Table(name = &quot;Users&quot;)\r\npublic class User {\r\n    @Id\r\n    @GeneratedValue (strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n    private String name;\r\n    private String email;\r\n    private String password;\r\n    private boolean activity;\r\n    private boolean login;\r\n```\r\n\r\n\r\n```\r\nEntity\r\n@Table(name = &quot;Devices&quot;)\r\npublic class Device {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id\r\n    private boolean activity;\r\n    private String location;\r\n    @OneToOne\r\n    @JoinColumn(name = &quot;UserId&quot;, referencedColumnName = &quot;id&quot;)\r\n    private User owner;\r\n```\r\n\r\n\r\n```\r\n//This is the JSON-File how I have to send it\r\n{\r\n    &quot;activity&quot;: &quot;true&quot;,\r\n    &quot;location&quot;: &quot;Room 102&quot;,\r\n    &quot;owner&quot;: {\r\n        &quot;name&quot;: &quot;Mike&quot;,\r\n        &quot;email&quot;: &quot;testMail@test.com&quot;,\r\n        &quot;password&quot;: &quot;123456&quot;,\r\n        &quot;activity&quot;: &quot;true&quot;,\r\n        &quot;login&quot;: &quot;false&quot;\r\n    }\r\n}\r\n\r\n//This is how I would like to send it (Only sending the Id of the other Table)\r\n{\r\n    &quot;activity&quot;: &quot;true&quot;,\r\n    &quot;location&quot;: &quot;Room 102&quot;,\r\n    &quot;owner&quot;: &quot;1&quot;\r\n}\r\n```\r\n\r\n\r\n\r\n\r\nI tried via Relationships (ManyToOne &amp; OneToMany) but it didnt work.","title":"Hibernate: Entity Relationship only with id in JSON?","body":"<p>Ive got two Entities: User and Device.\nEach Device should have one User. But the Users are already existing so I want to Link a User by the Id to my Device.\nAt the Moment I have to create a User and send it as Post-Request to my Backend. But I just want to send the Id which should be stored.</p>\n<p>I have ceated an Application and have to transfer the Data via JSON-File</p>\n<pre><code>@Entity\n@Table(name = &quot;Users&quot;)\npublic class User {\n    @Id\n    @GeneratedValue (strategy = GenerationType.IDENTITY)\n    private Long id;\n    private String name;\n    private String email;\n    private String password;\n    private boolean activity;\n    private boolean login;\n</code></pre>\n<pre><code>Entity\n@Table(name = &quot;Devices&quot;)\npublic class Device {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id\n    private boolean activity;\n    private String location;\n    @OneToOne\n    @JoinColumn(name = &quot;UserId&quot;, referencedColumnName = &quot;id&quot;)\n    private User owner;\n</code></pre>\n<pre><code>//This is the JSON-File how I have to send it\n{\n    &quot;activity&quot;: &quot;true&quot;,\n    &quot;location&quot;: &quot;Room 102&quot;,\n    &quot;owner&quot;: {\n        &quot;name&quot;: &quot;Mike&quot;,\n        &quot;email&quot;: &quot;testMail@test.com&quot;,\n        &quot;password&quot;: &quot;123456&quot;,\n        &quot;activity&quot;: &quot;true&quot;,\n        &quot;login&quot;: &quot;false&quot;\n    }\n}\n\n//This is how I would like to send it (Only sending the Id of the other Table)\n{\n    &quot;activity&quot;: &quot;true&quot;,\n    &quot;location&quot;: &quot;Room 102&quot;,\n    &quot;owner&quot;: &quot;1&quot;\n}\n</code></pre>\n<p>I tried via Relationships (ManyToOne &amp; OneToMany) but it didnt work.</p>\n"},{"tags":["java","spring","performance","jpa","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681152267,"creation_date":1681152267,"answer_id":75979808,"question_id":75979696,"body_markdown":"It is easy done by setting a property:\r\n\r\n    \r\n    spring.jpa.properties.hibernate.jdbc.batch_size=123\r\n\r\nYou will implement the updates/inserts in a loop but Hibernate will try to send them to the database in a batch.","title":"Efficiently Performing Bulk Updates with Spring Data JPA on a Large Number of Entities","body":"<p>It is easy done by setting a property:</p>\n<pre><code>spring.jpa.properties.hibernate.jdbc.batch_size=123\n</code></pre>\n<p>You will implement the updates/inserts in a loop but Hibernate will try to send them to the database in a batch.</p>\n"},{"tags":[],"owner":{"account_id":14194880,"reputation":1483,"user_id":10254476,"display_name":"GJohannes"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681167232,"creation_date":1681167232,"answer_id":75981300,"question_id":75979696,"body_markdown":"If you don&#180;t need to access the callback from your Repository you can simply Inject the bean `entityManager` and detatch from your Hibernate Context.\r\n\r\n    private final EntityManager entityManager;\r\n\r\n    public void someMethod(List&lt;SomeObject&gt; objects) {\r\n        objects.forEach(someObject-&gt; {\r\n            res = someRepository.save(someObject);\r\n            entityManager.detatch(res); // or use &#180;entityManager.clear();&#180; \r\n        });\r\n    }\r\n\r\nThis might also be useful ;)\r\n\r\nhttps://stackoverflow.com/questions/75852833/why-is-jpa-hibernate-slowing-down-when-loading-a-large-amount-of-data-in-a-spr","title":"Efficiently Performing Bulk Updates with Spring Data JPA on a Large Number of Entities","body":"<p>If you dont need to access the callback from your Repository you can simply Inject the bean <code>entityManager</code> and detatch from your Hibernate Context.</p>\n<pre><code>private final EntityManager entityManager;\n\npublic void someMethod(List&lt;SomeObject&gt; objects) {\n    objects.forEach(someObject-&gt; {\n        res = someRepository.save(someObject);\n        entityManager.detatch(res); // or use entityManager.clear(); \n    });\n}\n</code></pre>\n<p>This might also be useful ;)</p>\n<p><a href=\"https://stackoverflow.com/questions/75852833/why-is-jpa-hibernate-slowing-down-when-loading-a-large-amount-of-data-in-a-spr\">Why is JPA / Hibernate slowing down when loading a large amount of data in a Spring Boot application?</a></p>\n"}],"owner":{"account_id":9097895,"reputation":843,"user_id":6771202,"display_name":"Sachintha Hewawasam"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":927,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1681167232,"creation_date":1681151362,"question_id":75979696,"body_markdown":"I have a large number of records that I need to update efficiently using Spring Data JPA. The records number in the thousands and my current approach of using a loop with the save() method is slow and inefficient. Can someone suggest a better way to perform bulk updates using Spring Data JPA?","title":"Efficiently Performing Bulk Updates with Spring Data JPA on a Large Number of Entities","body":"<p>I have a large number of records that I need to update efficiently using Spring Data JPA. The records number in the thousands and my current approach of using a loop with the save() method is slow and inefficient. Can someone suggest a better way to perform bulk updates using Spring Data JPA?</p>\n"},{"tags":["java","optaplanner","vehicle-routing"],"owner":{"account_id":281342,"reputation":1196,"user_id":577588,"accept_rate":81,"display_name":"Thomas Nairn"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":73,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681166595,"creation_date":1681166595,"question_id":75981258,"body_markdown":"I&#39;m currently working through a Vehicle Routing Problem.\r\nThe issue I&#39;m seeing is that each stop also has a variable start and end time and also a variable driver for each given stop.  \r\n\r\nMy current solution has been to skip defining this as a chain or list and instead just mark them both as regular Planning variables at the cost of performance, but I&#39;ve hit a snag when in full assert mode:\r\n\r\n&gt; java.lang.IllegalStateException: VariableListener corruption after completedAction\r\n&gt; ... for that shadow variable (TripAssignment.previousTripAssignment) ... for that shadow variable (TripAssignment.dropoffTime) ... shadow variable (TripAssignment.pickupTime)\r\n\r\nMy constraints require knowing the previous assignment.\r\n\r\nMy current Planning Entity is as follows:\r\n```java\r\npackage org.acme.schooltimetabling.domain;\r\n\r\nimport java.time.ZonedDateTime;\r\nimport java.time.temporal.ChronoUnit;\r\nimport java.util.List;\r\nimport java.util.stream.Collectors;\r\nimport java.util.stream.Stream;\r\n\r\nimport org.acme.schooltimetabling.domain.listener.PreviousTripAssignmentUpdatingVariableListener;\r\nimport org.optaplanner.core.api.domain.entity.PlanningEntity;\r\nimport org.optaplanner.core.api.domain.lookup.PlanningId;\r\nimport org.optaplanner.core.api.domain.solution.ProblemFactProperty;\r\nimport org.optaplanner.core.api.domain.variable.PiggybackShadowVariable;\r\nimport org.optaplanner.core.api.domain.variable.PlanningVariable;\r\nimport org.optaplanner.core.api.domain.variable.ShadowVariable;\r\n\r\nimport com.fasterxml.jackson.annotation.JsonIgnore;\r\n\r\n@PlanningEntity\r\npublic class TripAssignment {\r\n\r\n    private Trip trip;\r\n\r\n    private ZonedDateTime pickupTime;\r\n    private ZonedDateTime dropoffTime;\r\n    private ZonedDateTime startTime; // represents the time the driver will start the trip\r\n    @JsonIgnore\r\n    private TripAssignment previousTripAssignment;\r\n    private Driver driver;\r\n\r\n    public Trip getTrip() {\r\n        return trip;\r\n    }\r\n    \r\n    @PlanningVariable(valueRangeProviderRefs = { &quot;drivers&quot; })\r\n    public Driver getDriver() {\r\n        return driver;\r\n    }\r\n\r\n    @PlanningVariable(valueRangeProviderRefs = { &quot;possibleStartTimes&quot; })\r\n    public ZonedDateTime getStartTime() {\r\n        return startTime;\r\n    }\r\n\r\n\r\n    public TripAssignment() {\r\n    }\r\n\r\n    public TripAssignment(Trip trip) {\r\n        this.trip = trip;\r\n    }\r\n\r\n    @ShadowVariable(sourceVariableName = &quot;startTime&quot;, variableListenerClass = PreviousTripAssignmentUpdatingVariableListener.class)\r\n    @ShadowVariable(sourceVariableName = &quot;driver&quot;, variableListenerClass = PreviousTripAssignmentUpdatingVariableListener.class)\r\n    @JsonIgnore\r\n    public TripAssignment getPreviousTripAssignment() {\r\n        return previousTripAssignment;\r\n    }\r\n\r\n\r\n    @PiggybackShadowVariable(shadowVariableName = &quot;previousTripAssignment&quot;)\r\n    public ZonedDateTime getPickupTime() {\r\n        return pickupTime;\r\n    }\r\n\r\n\r\n    @PiggybackShadowVariable(shadowVariableName = &quot;previousTripAssignment&quot;)\r\n    public ZonedDateTime getDropoffTime() {\r\n        return dropoffTime;\r\n    }\r\n\r\n}\r\n```\r\n\r\nI&#39;m using piggyback here, but the listener is updating multiple variables and using the current working solutions list of trips.\r\n\r\nMy listener:\r\n```java\r\npackage org.acme.schooltimetabling.domain.listener;\r\n\r\nimport java.time.Duration;\r\nimport java.time.ZonedDateTime;\r\nimport java.time.temporal.ChronoUnit;\r\nimport java.util.Comparator;\r\n\r\nimport org.acme.schooltimetabling.domain.Location;\r\nimport org.acme.schooltimetabling.domain.TripAssignment;\r\nimport org.acme.schooltimetabling.solver.VehicleDeliverySolution;\r\nimport org.optaplanner.core.api.domain.variable.VariableListener;\r\nimport org.optaplanner.core.api.score.director.ScoreDirector;\r\n\r\npublic class PreviousTripAssignmentUpdatingVariableListener\r\n        implements VariableListener&lt;VehicleDeliverySolution, TripAssignment&gt; {\r\n\r\n    public PreviousTripAssignmentUpdatingVariableListener() {\r\n    }\r\n\r\n    @Override\r\n    public void beforeEntityAdded(ScoreDirector&lt;VehicleDeliverySolution&gt; scoreDirector, TripAssignment entity) {\r\n    }\r\n\r\n    @Override\r\n    public void afterEntityAdded(ScoreDirector&lt;VehicleDeliverySolution&gt; scoreDirector, TripAssignment entity) {\r\n    }\r\n\r\n    @Override\r\n    public void beforeEntityRemoved(ScoreDirector&lt;VehicleDeliverySolution&gt; scoreDirector, TripAssignment entity) {\r\n    }\r\n\r\n    @Override\r\n    public void afterEntityRemoved(ScoreDirector&lt;VehicleDeliverySolution&gt; scoreDirector, TripAssignment entity) {\r\n    }\r\n\r\n    @Override\r\n    public void beforeVariableChanged(ScoreDirector&lt;VehicleDeliverySolution&gt; scoreDirector, TripAssignment entity) {\r\n    }\r\n\r\n    private void setPreviousTripAssignment(ScoreDirector&lt;VehicleDeliverySolution&gt; scoreDirector,\r\n            TripAssignment assignment,\r\n            TripAssignment previousTripAssignment) {\r\n        scoreDirector.beforeVariableChanged(assignment, &quot;previousTripAssignment&quot;);\r\n        assignment.setPreviousTripAssignment(previousTripAssignment);\r\n        scoreDirector.afterVariableChanged(assignment, &quot;previousTripAssignment&quot;);\r\n    }\r\n\r\n    private void setPickupTime(ScoreDirector&lt;VehicleDeliverySolution&gt; scoreDirector, TripAssignment assignment,\r\n            ZonedDateTime pickupTime) {\r\n        scoreDirector.beforeVariableChanged(assignment, &quot;pickupTime&quot;);\r\n        assignment.setPickupTime(pickupTime);\r\n        scoreDirector.afterVariableChanged(assignment, &quot;pickupTime&quot;);\r\n    }\r\n\r\n    private void setDropoffTime(ScoreDirector&lt;VehicleDeliverySolution&gt; scoreDirector, TripAssignment assignment,\r\n            ZonedDateTime dropoffTime) {\r\n        scoreDirector.beforeVariableChanged(assignment, &quot;dropoffTime&quot;);\r\n        assignment.setDropoffTime(dropoffTime);\r\n        scoreDirector.afterVariableChanged(assignment, &quot;dropoffTime&quot;);\r\n    }\r\n\r\n    private ZonedDateTime calculatePickupTime(ScoreDirector&lt;VehicleDeliverySolution&gt; scoreDirector,\r\n            TripAssignment previousAssignment,\r\n            TripAssignment assignment) {\r\n        Location previousLocation;\r\n        if (previousAssignment != null) {\r\n            // The driver has a previous assignment that he&#39;s coming from\r\n            if (previousAssignment.getDropoffTime().until(assignment.getStartTime(), ChronoUnit.HOURS) &gt; 4) {\r\n                // The driver had a previous assignment, but he&#39;s had a long break inbetween.\r\n                // TODO: Fix this up.\r\n                previousLocation = assignment.getDriver().getHome();\r\n            } else {\r\n                previousLocation = previousAssignment.getTrip().getDropoffLocation();\r\n            }\r\n        } else {\r\n            previousLocation = assignment.getDriver().getHome();\r\n        }\r\n        Duration travelTime = scoreDirector.getWorkingSolution().getBikingDropoffToPickupDuration()\r\n                .get(previousLocation, assignment.getTrip().getPickupLocation());\r\n        if (travelTime == null) {\r\n            System.out.println(\r\n                    &quot;Incomplete distanceMatrix from &quot;\r\n                            + (assignment.getDriver().getHome() == previousLocation\r\n                                    ? &quot;(Driver &quot; + assignment.getDriver().getId() + &quot; Home)&quot;\r\n                                    : &quot;(&quot; + previousAssignment.getTrip().getId() + &quot; Previous Assignment)&quot;)\r\n                            + previousLocation + &quot; to &quot;\r\n                            + assignment.getTrip().getPickupLocation());\r\n        }\r\n        // Calculate the end time based on the travel time and start time\r\n        ZonedDateTime startTime = assignment.getStartTime();\r\n        return startTime.plus(travelTime);\r\n    }\r\n\r\n    private ZonedDateTime calculateDropoffTime(ScoreDirector&lt;VehicleDeliverySolution&gt; scoreDirector,\r\n            ZonedDateTime pickupTime,\r\n            TripAssignment assignment) {\r\n        Duration travelTime = scoreDirector.getWorkingSolution().getDrivingPickupToDropoffDuration()\r\n                .get(assignment.getTrip().getPickupLocation(),\r\n                        assignment.getTrip().getDropoffLocation());\r\n\r\n        return pickupTime.plus(travelTime);\r\n    }\r\n\r\n    @Override\r\n    public void afterVariableChanged(ScoreDirector&lt;VehicleDeliverySolution&gt; scoreDirector,\r\n            TripAssignment assignment) {\r\n        if (assignment.getStartTime() == null) {\r\n            System.out.println(&quot;No start time set, setting variables to null&quot;);\r\n            setPreviousTripAssignment(scoreDirector, assignment, null);\r\n            setDropoffTime(scoreDirector, assignment, null);\r\n            setPickupTime(scoreDirector, assignment, null);\r\n            return;\r\n        }\r\n        System.out.println(&quot;Start time has been set, moving&quot;);\r\n        TripAssignment previousAssignment = scoreDirector.getWorkingSolution().getAssignments().stream()\r\n                .filter(aAssignment -&gt; aAssignment.getDriver() == assignment.getDriver())\r\n                .filter(aAssignment -&gt; aAssignment.getStartTime() != null)\r\n                .filter(aAssignment -&gt; aAssignment.getStartTime().isBefore(assignment.getStartTime()))\r\n                .max(Comparator.comparing(aAssignment -&gt; aAssignment.getStartTime()))\r\n                .orElse(null);\r\n        System.out.println(&quot;Setting previous assignment to &quot; + previousAssignment);\r\n        setPreviousTripAssignment(scoreDirector, assignment, previousAssignment);\r\n        ZonedDateTime pickupTime = calculatePickupTime(scoreDirector, previousAssignment, assignment);\r\n        System.out.println(&quot;Setting pickup time to &quot; + pickupTime);\r\n        setPickupTime(scoreDirector, assignment, pickupTime);\r\n        ZonedDateTime dropoffTime = calculateDropoffTime(scoreDirector, pickupTime, assignment);\r\n        System.out.println(&quot;Setting dropoff time to &quot; + dropoffTime);\r\n        setDropoffTime(scoreDirector, assignment, dropoffTime);\r\n    }\r\n}\r\n```","title":"Optaplanner Chained-through time with variable start time","body":"<p>I'm currently working through a Vehicle Routing Problem.\nThe issue I'm seeing is that each stop also has a variable start and end time and also a variable driver for each given stop.</p>\n<p>My current solution has been to skip defining this as a chain or list and instead just mark them both as regular Planning variables at the cost of performance, but I've hit a snag when in full assert mode:</p>\n<blockquote>\n<p>java.lang.IllegalStateException: VariableListener corruption after completedAction\n... for that shadow variable (TripAssignment.previousTripAssignment) ... for that shadow variable (TripAssignment.dropoffTime) ... shadow variable (TripAssignment.pickupTime)</p>\n</blockquote>\n<p>My constraints require knowing the previous assignment.</p>\n<p>My current Planning Entity is as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package org.acme.schooltimetabling.domain;\n\nimport java.time.ZonedDateTime;\nimport java.time.temporal.ChronoUnit;\nimport java.util.List;\nimport java.util.stream.Collectors;\nimport java.util.stream.Stream;\n\nimport org.acme.schooltimetabling.domain.listener.PreviousTripAssignmentUpdatingVariableListener;\nimport org.optaplanner.core.api.domain.entity.PlanningEntity;\nimport org.optaplanner.core.api.domain.lookup.PlanningId;\nimport org.optaplanner.core.api.domain.solution.ProblemFactProperty;\nimport org.optaplanner.core.api.domain.variable.PiggybackShadowVariable;\nimport org.optaplanner.core.api.domain.variable.PlanningVariable;\nimport org.optaplanner.core.api.domain.variable.ShadowVariable;\n\nimport com.fasterxml.jackson.annotation.JsonIgnore;\n\n@PlanningEntity\npublic class TripAssignment {\n\n    private Trip trip;\n\n    private ZonedDateTime pickupTime;\n    private ZonedDateTime dropoffTime;\n    private ZonedDateTime startTime; // represents the time the driver will start the trip\n    @JsonIgnore\n    private TripAssignment previousTripAssignment;\n    private Driver driver;\n\n    public Trip getTrip() {\n        return trip;\n    }\n    \n    @PlanningVariable(valueRangeProviderRefs = { &quot;drivers&quot; })\n    public Driver getDriver() {\n        return driver;\n    }\n\n    @PlanningVariable(valueRangeProviderRefs = { &quot;possibleStartTimes&quot; })\n    public ZonedDateTime getStartTime() {\n        return startTime;\n    }\n\n\n    public TripAssignment() {\n    }\n\n    public TripAssignment(Trip trip) {\n        this.trip = trip;\n    }\n\n    @ShadowVariable(sourceVariableName = &quot;startTime&quot;, variableListenerClass = PreviousTripAssignmentUpdatingVariableListener.class)\n    @ShadowVariable(sourceVariableName = &quot;driver&quot;, variableListenerClass = PreviousTripAssignmentUpdatingVariableListener.class)\n    @JsonIgnore\n    public TripAssignment getPreviousTripAssignment() {\n        return previousTripAssignment;\n    }\n\n\n    @PiggybackShadowVariable(shadowVariableName = &quot;previousTripAssignment&quot;)\n    public ZonedDateTime getPickupTime() {\n        return pickupTime;\n    }\n\n\n    @PiggybackShadowVariable(shadowVariableName = &quot;previousTripAssignment&quot;)\n    public ZonedDateTime getDropoffTime() {\n        return dropoffTime;\n    }\n\n}\n</code></pre>\n<p>I'm using piggyback here, but the listener is updating multiple variables and using the current working solutions list of trips.</p>\n<p>My listener:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package org.acme.schooltimetabling.domain.listener;\n\nimport java.time.Duration;\nimport java.time.ZonedDateTime;\nimport java.time.temporal.ChronoUnit;\nimport java.util.Comparator;\n\nimport org.acme.schooltimetabling.domain.Location;\nimport org.acme.schooltimetabling.domain.TripAssignment;\nimport org.acme.schooltimetabling.solver.VehicleDeliverySolution;\nimport org.optaplanner.core.api.domain.variable.VariableListener;\nimport org.optaplanner.core.api.score.director.ScoreDirector;\n\npublic class PreviousTripAssignmentUpdatingVariableListener\n        implements VariableListener&lt;VehicleDeliverySolution, TripAssignment&gt; {\n\n    public PreviousTripAssignmentUpdatingVariableListener() {\n    }\n\n    @Override\n    public void beforeEntityAdded(ScoreDirector&lt;VehicleDeliverySolution&gt; scoreDirector, TripAssignment entity) {\n    }\n\n    @Override\n    public void afterEntityAdded(ScoreDirector&lt;VehicleDeliverySolution&gt; scoreDirector, TripAssignment entity) {\n    }\n\n    @Override\n    public void beforeEntityRemoved(ScoreDirector&lt;VehicleDeliverySolution&gt; scoreDirector, TripAssignment entity) {\n    }\n\n    @Override\n    public void afterEntityRemoved(ScoreDirector&lt;VehicleDeliverySolution&gt; scoreDirector, TripAssignment entity) {\n    }\n\n    @Override\n    public void beforeVariableChanged(ScoreDirector&lt;VehicleDeliverySolution&gt; scoreDirector, TripAssignment entity) {\n    }\n\n    private void setPreviousTripAssignment(ScoreDirector&lt;VehicleDeliverySolution&gt; scoreDirector,\n            TripAssignment assignment,\n            TripAssignment previousTripAssignment) {\n        scoreDirector.beforeVariableChanged(assignment, &quot;previousTripAssignment&quot;);\n        assignment.setPreviousTripAssignment(previousTripAssignment);\n        scoreDirector.afterVariableChanged(assignment, &quot;previousTripAssignment&quot;);\n    }\n\n    private void setPickupTime(ScoreDirector&lt;VehicleDeliverySolution&gt; scoreDirector, TripAssignment assignment,\n            ZonedDateTime pickupTime) {\n        scoreDirector.beforeVariableChanged(assignment, &quot;pickupTime&quot;);\n        assignment.setPickupTime(pickupTime);\n        scoreDirector.afterVariableChanged(assignment, &quot;pickupTime&quot;);\n    }\n\n    private void setDropoffTime(ScoreDirector&lt;VehicleDeliverySolution&gt; scoreDirector, TripAssignment assignment,\n            ZonedDateTime dropoffTime) {\n        scoreDirector.beforeVariableChanged(assignment, &quot;dropoffTime&quot;);\n        assignment.setDropoffTime(dropoffTime);\n        scoreDirector.afterVariableChanged(assignment, &quot;dropoffTime&quot;);\n    }\n\n    private ZonedDateTime calculatePickupTime(ScoreDirector&lt;VehicleDeliverySolution&gt; scoreDirector,\n            TripAssignment previousAssignment,\n            TripAssignment assignment) {\n        Location previousLocation;\n        if (previousAssignment != null) {\n            // The driver has a previous assignment that he's coming from\n            if (previousAssignment.getDropoffTime().until(assignment.getStartTime(), ChronoUnit.HOURS) &gt; 4) {\n                // The driver had a previous assignment, but he's had a long break inbetween.\n                // TODO: Fix this up.\n                previousLocation = assignment.getDriver().getHome();\n            } else {\n                previousLocation = previousAssignment.getTrip().getDropoffLocation();\n            }\n        } else {\n            previousLocation = assignment.getDriver().getHome();\n        }\n        Duration travelTime = scoreDirector.getWorkingSolution().getBikingDropoffToPickupDuration()\n                .get(previousLocation, assignment.getTrip().getPickupLocation());\n        if (travelTime == null) {\n            System.out.println(\n                    &quot;Incomplete distanceMatrix from &quot;\n                            + (assignment.getDriver().getHome() == previousLocation\n                                    ? &quot;(Driver &quot; + assignment.getDriver().getId() + &quot; Home)&quot;\n                                    : &quot;(&quot; + previousAssignment.getTrip().getId() + &quot; Previous Assignment)&quot;)\n                            + previousLocation + &quot; to &quot;\n                            + assignment.getTrip().getPickupLocation());\n        }\n        // Calculate the end time based on the travel time and start time\n        ZonedDateTime startTime = assignment.getStartTime();\n        return startTime.plus(travelTime);\n    }\n\n    private ZonedDateTime calculateDropoffTime(ScoreDirector&lt;VehicleDeliverySolution&gt; scoreDirector,\n            ZonedDateTime pickupTime,\n            TripAssignment assignment) {\n        Duration travelTime = scoreDirector.getWorkingSolution().getDrivingPickupToDropoffDuration()\n                .get(assignment.getTrip().getPickupLocation(),\n                        assignment.getTrip().getDropoffLocation());\n\n        return pickupTime.plus(travelTime);\n    }\n\n    @Override\n    public void afterVariableChanged(ScoreDirector&lt;VehicleDeliverySolution&gt; scoreDirector,\n            TripAssignment assignment) {\n        if (assignment.getStartTime() == null) {\n            System.out.println(&quot;No start time set, setting variables to null&quot;);\n            setPreviousTripAssignment(scoreDirector, assignment, null);\n            setDropoffTime(scoreDirector, assignment, null);\n            setPickupTime(scoreDirector, assignment, null);\n            return;\n        }\n        System.out.println(&quot;Start time has been set, moving&quot;);\n        TripAssignment previousAssignment = scoreDirector.getWorkingSolution().getAssignments().stream()\n                .filter(aAssignment -&gt; aAssignment.getDriver() == assignment.getDriver())\n                .filter(aAssignment -&gt; aAssignment.getStartTime() != null)\n                .filter(aAssignment -&gt; aAssignment.getStartTime().isBefore(assignment.getStartTime()))\n                .max(Comparator.comparing(aAssignment -&gt; aAssignment.getStartTime()))\n                .orElse(null);\n        System.out.println(&quot;Setting previous assignment to &quot; + previousAssignment);\n        setPreviousTripAssignment(scoreDirector, assignment, previousAssignment);\n        ZonedDateTime pickupTime = calculatePickupTime(scoreDirector, previousAssignment, assignment);\n        System.out.println(&quot;Setting pickup time to &quot; + pickupTime);\n        setPickupTime(scoreDirector, assignment, pickupTime);\n        ZonedDateTime dropoffTime = calculateDropoffTime(scoreDirector, pickupTime, assignment);\n        System.out.println(&quot;Setting dropoff time to &quot; + dropoffTime);\n        setDropoffTime(scoreDirector, assignment, dropoffTime);\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","jpa","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":18669557,"reputation":640,"user_id":13608717,"display_name":"Daniel"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681166127,"creation_date":1681166127,"answer_id":75981225,"question_id":75979670,"body_markdown":"Yes, it is possible to make a custom repository implementation with Spring Data.\r\n\r\nFirst - CustomizedRepository interface is created - it will provide interface for additional methods that are wanted to be created.\r\n\r\n    interface CustomizedRepository {\r\n      void someCustomMethod(Entity entity);\r\n    }\r\n\r\nSecond - create class CustomizedRepositoryImpl which will implement both CustomizedRepository CrudRepository (to access Spring Data methods)\r\n\r\n    interface Repository extends CrudRepository&lt;Entity, Long&gt;, CustomizedRepository {\r\n    \r\n      // Query methods could be additionally declared here\r\n    }\r\n\r\n[Here is a link to Spring Data documentation for reference][1]\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repositories.custom-implementations","title":"Using Custom Repository Implementation with Spring Data JPA while Retaining Built-in CRUD Methods","body":"<p>Yes, it is possible to make a custom repository implementation with Spring Data.</p>\n<p>First - CustomizedRepository interface is created - it will provide interface for additional methods that are wanted to be created.</p>\n<pre><code>interface CustomizedRepository {\n  void someCustomMethod(Entity entity);\n}\n</code></pre>\n<p>Second - create class CustomizedRepositoryImpl which will implement both CustomizedRepository CrudRepository (to access Spring Data methods)</p>\n<pre><code>interface Repository extends CrudRepository&lt;Entity, Long&gt;, CustomizedRepository {\n\n  // Query methods could be additionally declared here\n}\n</code></pre>\n<p><a href=\"https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repositories.custom-implementations\" rel=\"nofollow noreferrer\">Here is a link to Spring Data documentation for reference</a></p>\n"}],"owner":{"account_id":9097895,"reputation":843,"user_id":6771202,"display_name":"Sachintha Hewawasam"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1681166127,"creation_date":1681151137,"question_id":75979670,"body_markdown":"Is it possible to use a custom repository implementation with Spring Data JPA without losing the convenience of the built-in CRUD methods? I need to add some custom logic to a repository, but I don&#39;t want to rewrite all the basic CRUD operations.","title":"Using Custom Repository Implementation with Spring Data JPA while Retaining Built-in CRUD Methods","body":"<p>Is it possible to use a custom repository implementation with Spring Data JPA without losing the convenience of the built-in CRUD methods? I need to add some custom logic to a repository, but I don't want to rewrite all the basic CRUD operations.</p>\n"},{"tags":["java","multithreading","synchronization"],"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1681151134,"post_id":75979194,"comment_id":134007105,"body_markdown":"Why are you using a concurrent map? Are there any writes?","body":"Why are you using a concurrent map? Are there any writes?"},{"owner":{"account_id":2421927,"reputation":1760,"user_id":2185573,"accept_rate":76,"display_name":"Arunav Sanyal"},"score":0,"creation_date":1681158451,"post_id":75979194,"comment_id":134008622,"body_markdown":"Ah yea, good point. No there arent. My bad.","body":"Ah yea, good point. No there arent. My bad."}],"answers":[{"comments":[{"owner":{"account_id":2421927,"reputation":1760,"user_id":2185573,"accept_rate":76,"display_name":"Arunav Sanyal"},"score":0,"creation_date":1681159612,"post_id":75979797,"comment_id":134008845,"body_markdown":"Ah yea good point. I could just check the json against the current one again. Thanks.","body":"Ah yea good point. I could just check the json against the current one again. Thanks."}],"tags":[],"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1681165289,"creation_date":1681152214,"answer_id":75979797,"question_id":75979194,"body_markdown":"You can use double-checked locking to make sure it only updates once without introducing too much contention between readers:\r\n\r\n    public Optional&lt;Boolean&gt; isFlagEnabled(final String featureFlag) {\r\n        var json = retriever.retrieve();\r\n        if (!json.equals(currFlagJson)) {\r\n            synchronized (this) {\r\n                if (!json.equals(currFlagJson)) {\r\n                    flags = expensiveJsonParsingOperation(newJson);\r\n                    currFlagJson = json;\r\n                }\r\n            }\r\n        }\r\n        return Optional.ofNullable(flags.get(featureFlag));\r\n    }\r\n\r\nNote that there&#39;s no need to use a `ConcurrentMap` if you&#39;re only updating the reference without modifying the map itself. If you use an immutable map, you can also omit `volatile` from `flags` (relying on the `currFlagJson` memory barrier to keep the map reference fresh). Otherwise, there&#39;s a risk of partial publication if the field is read while another thread is updating it. Either way, `currFlagJson` must be `volatile` to ensure it&#39;s not cached.","title":"Best way to synchronize reads and writes on a map with potential updates on the entire map","body":"<p>You can use double-checked locking to make sure it only updates once without introducing too much contention between readers:</p>\n<pre><code>public Optional&lt;Boolean&gt; isFlagEnabled(final String featureFlag) {\n    var json = retriever.retrieve();\n    if (!json.equals(currFlagJson)) {\n        synchronized (this) {\n            if (!json.equals(currFlagJson)) {\n                flags = expensiveJsonParsingOperation(newJson);\n                currFlagJson = json;\n            }\n        }\n    }\n    return Optional.ofNullable(flags.get(featureFlag));\n}\n</code></pre>\n<p>Note that there's no need to use a <code>ConcurrentMap</code> if you're only updating the reference without modifying the map itself. If you use an immutable map, you can also omit <code>volatile</code> from <code>flags</code> (relying on the <code>currFlagJson</code> memory barrier to keep the map reference fresh). Otherwise, there's a risk of partial publication if the field is read while another thread is updating it. Either way, <code>currFlagJson</code> must be <code>volatile</code> to ensure it's not cached.</p>\n"}],"owner":{"account_id":2421927,"reputation":1760,"user_id":2185573,"accept_rate":76,"display_name":"Arunav Sanyal"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75979797,"answer_count":1,"score":0,"last_activity_date":1681165289,"creation_date":1681147141,"question_id":75979194,"body_markdown":"So I have this fetcher code that fetches a json configuration which is a map of string to booleans (its a json schema that is guaranteed)\r\n\r\nI have to implement this method\r\n\r\n```\r\nprivate volatile Map&lt;String, Boolean&gt; flags = new HashMap&lt;&gt;();\r\nprivate volatile String currFlagJson = &quot;&quot;;\r\nprivate final Retriever retriever; // This is initialized elsewhere, but it basically returns a cached json with a separate thread updating it. \r\n\r\npublic Optional&lt;Boolean&gt; isFlagEnabled(final String featureFlag) {\r\n   final var json = retriever.retrieve();\r\n   if (!json.equals(currJson.get)) {\r\n       updateMap(json);\r\n       return Optional.ofNullable(flags.get(featureFlag));\r\n   } else {\r\n       return Optional.ofNullable(flags.get(featureFlag));\r\n   }\r\n}\r\n\r\nprivate synchronized updateMap(final String newJson) {\r\n    final var newMap = expensiveJsonParsingOperation(newJson)\r\n    flags = newMap;\r\n    currFlagJson = newJson;\r\n}\r\n\r\n```\r\n\r\nI am trying to avoid multiple threads concurrently updating the map, but this I do not think completely works. If multiple threads race and calling the equals method, while one of the threads is updating, then eventually all the threads will try to contend updating it. I could of course synchronize the entirity of isFlagEnabled but that would be unnecessarily locking too and I could be serving read requests while the  expensiveJsonParsingOperation is happening. \r\n\r\nI am trying to figure out how best to\r\n\r\n1. Ensure exactly one thread updates this map when needed. \r\n2. Not block threads on reads while this update is happening. \r\n\r\nMaybe. https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/ReentrantReadWriteLock.html? Or something else I can use for this case? ","title":"Best way to synchronize reads and writes on a map with potential updates on the entire map","body":"<p>So I have this fetcher code that fetches a json configuration which is a map of string to booleans (its a json schema that is guaranteed)</p>\n<p>I have to implement this method</p>\n<pre><code>private volatile Map&lt;String, Boolean&gt; flags = new HashMap&lt;&gt;();\nprivate volatile String currFlagJson = &quot;&quot;;\nprivate final Retriever retriever; // This is initialized elsewhere, but it basically returns a cached json with a separate thread updating it. \n\npublic Optional&lt;Boolean&gt; isFlagEnabled(final String featureFlag) {\n   final var json = retriever.retrieve();\n   if (!json.equals(currJson.get)) {\n       updateMap(json);\n       return Optional.ofNullable(flags.get(featureFlag));\n   } else {\n       return Optional.ofNullable(flags.get(featureFlag));\n   }\n}\n\nprivate synchronized updateMap(final String newJson) {\n    final var newMap = expensiveJsonParsingOperation(newJson)\n    flags = newMap;\n    currFlagJson = newJson;\n}\n\n</code></pre>\n<p>I am trying to avoid multiple threads concurrently updating the map, but this I do not think completely works. If multiple threads race and calling the equals method, while one of the threads is updating, then eventually all the threads will try to contend updating it. I could of course synchronize the entirity of isFlagEnabled but that would be unnecessarily locking too and I could be serving read requests while the  expensiveJsonParsingOperation is happening.</p>\n<p>I am trying to figure out how best to</p>\n<ol>\n<li>Ensure exactly one thread updates this map when needed.</li>\n<li>Not block threads on reads while this update is happening.</li>\n</ol>\n<p>Maybe. <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/ReentrantReadWriteLock.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/ReentrantReadWriteLock.html</a>? Or something else I can use for this case?</p>\n"},{"tags":["java","firebase","google-cloud-platform","google-cloud-firestore","google-cloud-storage"],"comments":[{"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1681286284,"post_id":75952116,"comment_id":134030282,"body_markdown":"To understand better. You want to add data to Firestore, and each document should have three fields, `id`, `productName`, and `description`. Right?","body":"To understand better. You want to add data to Firestore, and each document should have three fields, <code>id</code>, <code>productName</code>, and <code>description</code>. Right?"},{"owner":{"account_id":21004999,"reputation":788,"user_id":15435022,"display_name":"mattsmith5"},"score":0,"creation_date":1681286459,"post_id":75952116,"comment_id":134030321,"body_markdown":"hi @AlexMamo there should be  one lookup table, with multiple values above","body":"hi @AlexMamo there should be  one lookup table, with multiple values above"},{"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1681286523,"post_id":75952116,"comment_id":134030336,"body_markdown":"In Firestore there are no tables, but collections. So you need a collection with multiple documents having that structure. Am I correct?","body":"In Firestore there are no tables, but collections. So you need a collection with multiple documents having that structure. Am I correct?"},{"owner":{"account_id":21004999,"reputation":788,"user_id":15435022,"display_name":"mattsmith5"},"score":0,"creation_date":1681286856,"post_id":75952116,"comment_id":134030415,"body_markdown":"hi @AlexMamo sure, I just need a lookup table structure, whatever the terminology is for Firestore, I&#39;ll follow that","body":"hi @AlexMamo sure, I just need a lookup table structure, whatever the terminology is for Firestore, I&#39;ll follow that"},{"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1681286873,"post_id":75952116,"comment_id":134030423,"body_markdown":"Do you need Java code for Android?","body":"Do you need Java code for Android?"},{"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1681287986,"post_id":75952116,"comment_id":134030685,"body_markdown":"There is no problem with Java, but you need it for an Android project, right?","body":"There is no problem with Java, but you need it for an Android project, right?"},{"owner":{"account_id":21004999,"reputation":788,"user_id":15435022,"display_name":"mattsmith5"},"score":0,"creation_date":1681318458,"post_id":75952116,"comment_id":134038343,"body_markdown":"hi @AlexMamo its for  a java desktop enterprise project, not android","body":"hi @AlexMamo its for  a java desktop enterprise project, not android"}],"answers":[{"tags":[],"owner":{"account_id":4672584,"reputation":10125,"user_id":3784008,"display_name":"anothermh"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1680818188,"creation_date":1680818188,"answer_id":75954063,"question_id":75952116,"body_markdown":"1. Add the seed data to a Firestore collection where the stakeholders have read/write permission\r\n2. Create a Cloud Function triggered by [Firestore `onWrite` events](https://firebase.google.com/docs/functions/firestore-events) that propagates the given change to the targeted locations\r\n\r\nThe example at the above-linked documentation shows how to create a Cloud Function in NodeJS using the Firebase Admin SDK. For Java you can use [this example](https://cloud.google.com/functions/docs/calling/cloud-firestore#functions_firebase_firestore-java) from the Firestore documentation:\r\n\r\n```java\r\nimport com.google.cloud.functions.Context;\r\nimport com.google.cloud.functions.RawBackgroundFunction;\r\nimport com.google.gson.Gson;\r\nimport com.google.gson.JsonObject;\r\nimport java.util.logging.Logger;\r\n\r\npublic class FirebaseFirestore implements RawBackgroundFunction {\r\n  private static final Logger logger = Logger.getLogger(FirebaseFirestore.class.getName());\r\n\r\n  // Use GSON (https://github.com/google/gson) to parse JSON content.\r\n  private static final Gson gson = new Gson();\r\n\r\n  @Override\r\n  public void accept(String json, Context context) {\r\n    JsonObject body = gson.fromJson(json, JsonObject.class);\r\n    logger.info(&quot;Function triggered by event on: &quot; + context.resource());\r\n    logger.info(&quot;Event type: &quot; + context.eventType());\r\n\r\n    if (body != null &amp;&amp; body.has(&quot;oldValue&quot;)) {\r\n      logger.info(&quot;Old value:&quot;);\r\n      logger.info(body.get(&quot;oldValue&quot;).getAsString());\r\n    }\r\n\r\n    if (body != null &amp;&amp; body.has(&quot;value&quot;)) {\r\n      logger.info(&quot;New value:&quot;);\r\n      logger.info(body.get(&quot;value&quot;).getAsString());\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nAlternatively you can use [CloudEvent triggers](https://cloud.google.com/functions/docs/writing/write-event-driven-functions#cloudevent-example-java) for Gen 2 Cloud Functions:\r\n\r\n```java\r\npackage mycloudeventfunction;\r\n\r\nimport com.google.cloud.functions.CloudEventsFunction;\r\nimport io.cloudevents.CloudEvent;\r\n\r\n// Define a class that implements the CloudEventsFunction interface\r\npublic class MyCloudEventFunction implements CloudEventsFunction {\r\n  // Implement the accept() method to handle CloudEvents\r\n  @Override\r\n  public void accept(CloudEvent event) {\r\n    // Your code here\r\n    // Access the CloudEvent data payload via event.getData()\r\n    // To get the data payload as a JSON string, use:\r\n    // new String(event.getData().toBytes())\r\n  }\r\n}\r\n```\r\n\r\nYou would need to adapt this example to use the appropriate [EventArc trigger](https://cloud.google.com/functions/docs/calling/eventarc) for [Cloud Firestore](https://cloud.google.com/eventarc/docs/reference/supported-events#cloud-firestore) by parsing the [JSON format for CloudEvents](https://cloud.google.com/eventarc/docs/workflows/cloudevents). Unfortunately there don&#39;t appear to be any direct examples of this in Google&#39;s documentation as Gen 2 functions are still relatively new.","title":"FireStore: Make Changes to Lookup Tables without Source Control","body":"<ol>\n<li>Add the seed data to a Firestore collection where the stakeholders have read/write permission</li>\n<li>Create a Cloud Function triggered by <a href=\"https://firebase.google.com/docs/functions/firestore-events\" rel=\"nofollow noreferrer\">Firestore <code>onWrite</code> events</a> that propagates the given change to the targeted locations</li>\n</ol>\n<p>The example at the above-linked documentation shows how to create a Cloud Function in NodeJS using the Firebase Admin SDK. For Java you can use <a href=\"https://cloud.google.com/functions/docs/calling/cloud-firestore#functions_firebase_firestore-java\" rel=\"nofollow noreferrer\">this example</a> from the Firestore documentation:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import com.google.cloud.functions.Context;\nimport com.google.cloud.functions.RawBackgroundFunction;\nimport com.google.gson.Gson;\nimport com.google.gson.JsonObject;\nimport java.util.logging.Logger;\n\npublic class FirebaseFirestore implements RawBackgroundFunction {\n  private static final Logger logger = Logger.getLogger(FirebaseFirestore.class.getName());\n\n  // Use GSON (https://github.com/google/gson) to parse JSON content.\n  private static final Gson gson = new Gson();\n\n  @Override\n  public void accept(String json, Context context) {\n    JsonObject body = gson.fromJson(json, JsonObject.class);\n    logger.info(&quot;Function triggered by event on: &quot; + context.resource());\n    logger.info(&quot;Event type: &quot; + context.eventType());\n\n    if (body != null &amp;&amp; body.has(&quot;oldValue&quot;)) {\n      logger.info(&quot;Old value:&quot;);\n      logger.info(body.get(&quot;oldValue&quot;).getAsString());\n    }\n\n    if (body != null &amp;&amp; body.has(&quot;value&quot;)) {\n      logger.info(&quot;New value:&quot;);\n      logger.info(body.get(&quot;value&quot;).getAsString());\n    }\n  }\n}\n</code></pre>\n<p>Alternatively you can use <a href=\"https://cloud.google.com/functions/docs/writing/write-event-driven-functions#cloudevent-example-java\" rel=\"nofollow noreferrer\">CloudEvent triggers</a> for Gen 2 Cloud Functions:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package mycloudeventfunction;\n\nimport com.google.cloud.functions.CloudEventsFunction;\nimport io.cloudevents.CloudEvent;\n\n// Define a class that implements the CloudEventsFunction interface\npublic class MyCloudEventFunction implements CloudEventsFunction {\n  // Implement the accept() method to handle CloudEvents\n  @Override\n  public void accept(CloudEvent event) {\n    // Your code here\n    // Access the CloudEvent data payload via event.getData()\n    // To get the data payload as a JSON string, use:\n    // new String(event.getData().toBytes())\n  }\n}\n</code></pre>\n<p>You would need to adapt this example to use the appropriate <a href=\"https://cloud.google.com/functions/docs/calling/eventarc\" rel=\"nofollow noreferrer\">EventArc trigger</a> for <a href=\"https://cloud.google.com/eventarc/docs/reference/supported-events#cloud-firestore\" rel=\"nofollow noreferrer\">Cloud Firestore</a> by parsing the <a href=\"https://cloud.google.com/eventarc/docs/workflows/cloudevents\" rel=\"nofollow noreferrer\">JSON format for CloudEvents</a>. Unfortunately there don't appear to be any direct examples of this in Google's documentation as Gen 2 functions are still relatively new.</p>\n"}],"owner":{"account_id":21004999,"reputation":788,"user_id":15435022,"display_name":"mattsmith5"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":88,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75954063,"answer_count":1,"score":1,"last_activity_date":1681163641,"creation_date":1680801215,"question_id":75952116,"body_markdown":"I want to seed a Firestore Database containing a lookup table. We are using Java 8 with Github/Intellij.\r\nWe are thinking of using this example https://stackoverflow.com/questions/63004211/how-do-i-seed-data-to-firebase-firestore to seed/update lookup table data every calendar quarter. \r\n\r\nIs there any way to seed/update data in Firestore using Java (or any other coding language), while avoiding making changes to Git source control? What is google&#39;s recommended way? Changes need to be made automatically across Devops environments, Dev, QA, Staging, Production.\r\nChanges need to be able to change by ProductOwners team in UI, without using code if possible.\r\n\r\n\r\nhttps://firebase.google.com/docs/firestore/manage-data/add-data#java\r\n\r\n\r\n\r\n\t{\r\n\t\tid: 1,\r\n\t\tproductName: &#39;Book&#39;,\r\n\t\tdescription: &#39;reading books&#39;,\r\n\r\n\t\tid: 2,\r\n\t\tproductName: &#39;Car&#39;,\r\n\t\tdescription: &#39;automobile cars used for driving&#39;,\r\n\r\n\t\tid: 3,\r\n\t\tproductName: &#39;Television&#39;,\r\n\t\tdescription: &#39;Screen used for watching items&#39;,\r\n\r\n        etc..\r\n\t}\r\n","title":"FireStore: Make Changes to Lookup Tables without Source Control","body":"<p>I want to seed a Firestore Database containing a lookup table. We are using Java 8 with Github/Intellij.\nWe are thinking of using this example <a href=\"https://stackoverflow.com/questions/63004211/how-do-i-seed-data-to-firebase-firestore\">How do I seed data to Firebase Firestore?</a> to seed/update lookup table data every calendar quarter.</p>\n<p>Is there any way to seed/update data in Firestore using Java (or any other coding language), while avoiding making changes to Git source control? What is google's recommended way? Changes need to be made automatically across Devops environments, Dev, QA, Staging, Production.\nChanges need to be able to change by ProductOwners team in UI, without using code if possible.</p>\n<p><a href=\"https://firebase.google.com/docs/firestore/manage-data/add-data#java\" rel=\"nofollow noreferrer\">https://firebase.google.com/docs/firestore/manage-data/add-data#java</a></p>\n<pre><code>{\n    id: 1,\n    productName: 'Book',\n    description: 'reading books',\n\n    id: 2,\n    productName: 'Car',\n    description: 'automobile cars used for driving',\n\n    id: 3,\n    productName: 'Television',\n    description: 'Screen used for watching items',\n\n    etc..\n}\n</code></pre>\n"},{"tags":["java","android","listview","android-listview"],"answers":[{"tags":[],"owner":{"account_id":28115816,"reputation":26,"user_id":21482940,"display_name":"Fiqih Hasroni"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681163268,"creation_date":1681163268,"answer_id":75980984,"question_id":75949011,"body_markdown":"I got the answer\r\n\r\nyou have to replace\r\n\r\n```\r\ntextview1.setText(QuranArabicUtils.getTajweed(this, aYat.get((int)_position).get(&quot;a&quot;).toString()));\r\n```\r\nTo \r\n```\r\ntextview1.setText(QuranArabicUtils.getTajweed(getApplicationContext(), aYat.get((int)_position).get(&quot;a&quot;).toString()));\r\n```\r\n\r\n\r\n\r\n","title":"is not applicable for the arguments (MainActivity.Listview1Adapter, String)","body":"<p>I got the answer</p>\n<p>you have to replace</p>\n<pre><code>textview1.setText(QuranArabicUtils.getTajweed(this, aYat.get((int)_position).get(&quot;a&quot;).toString()));\n</code></pre>\n<p>To</p>\n<pre><code>textview1.setText(QuranArabicUtils.getTajweed(getApplicationContext(), aYat.get((int)_position).get(&quot;a&quot;).toString()));\n</code></pre>\n"}],"owner":{"account_id":28115816,"reputation":26,"user_id":21482940,"display_name":"Fiqih Hasroni"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1681163268,"creation_date":1680780654,"question_id":75949011,"body_markdown":"I have class QuranArabUtils\r\n\r\n```  \r\npublic class QuranArabicUtils {\r\npublic static Spannable getTajweed(Context context, String s) {\r\n}\r\n\r\n}\t\t\t\t\r\n\r\n```\r\nAnd this is my adapter listview\r\n\r\n```\r\n\t@Override\r\n\t\tpublic View getView(final int _position, View _v, ViewGroup _container) {\r\n\t\t\tLayoutInflater _inflater = getLayoutInflater();\r\n\t\t\tView _view = _v;\r\n\t\t\tif (_view == null) {\r\n\t\t\t\t_view = _inflater.inflate(R.layout.tet, null);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfinal LinearLayout linear1 = _view.findViewById(R.id.linear1);\r\n\t\t\tfinal TextView textview1 = _view.findViewById(R.id.textview1);\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\ttextview1.setText(QuranArabicUtils.getTajweed(this, aYat.get((int)_position).get(&quot;a&quot;).toString()));\r\n\r\n\t\t\r\n\t\t\t\r\n\t\t\treturn _view;\r\n\t\t}\r\n```\r\n\r\nI call argumet to\r\n\r\n```\r\ntextview1.setText(QuranArabicUtils.getTajweed(this, aYat.get((int)_position).get(&quot;a&quot;).toString()));\r\n```\r\nHow to conect argument getTajweed() in class QuranArabUtils to listview adapter? I got error &quot; The  method getTajweed(Context, String) in the type QuranArabicUtils is not applicable for the arguments (MainActivity.Listview1Adapter, String)&quot; \r\n","title":"is not applicable for the arguments (MainActivity.Listview1Adapter, String)","body":"<p>I have class QuranArabUtils</p>\n<pre><code>public class QuranArabicUtils {\npublic static Spannable getTajweed(Context context, String s) {\n}\n\n}               \n\n</code></pre>\n<p>And this is my adapter listview</p>\n<pre><code>    @Override\n        public View getView(final int _position, View _v, ViewGroup _container) {\n            LayoutInflater _inflater = getLayoutInflater();\n            View _view = _v;\n            if (_view == null) {\n                _view = _inflater.inflate(R.layout.tet, null);\n            }\n            \n            final LinearLayout linear1 = _view.findViewById(R.id.linear1);\n            final TextView textview1 = _view.findViewById(R.id.textview1);\n            \n            \n                textview1.setText(QuranArabicUtils.getTajweed(this, aYat.get((int)_position).get(&quot;a&quot;).toString()));\n\n        \n            \n            return _view;\n        }\n</code></pre>\n<p>I call argumet to</p>\n<pre><code>textview1.setText(QuranArabicUtils.getTajweed(this, aYat.get((int)_position).get(&quot;a&quot;).toString()));\n</code></pre>\n<p>How to conect argument getTajweed() in class QuranArabUtils to listview adapter? I got error &quot; The  method getTajweed(Context, String) in the type QuranArabicUtils is not applicable for the arguments (MainActivity.Listview1Adapter, String)&quot;</p>\n"},{"tags":["java","android","kotlin","memory-leaks","leakcanary"],"owner":{"account_id":24134501,"reputation":35,"user_id":18101638,"display_name":"lacrimosa"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681163135,"creation_date":1681162543,"question_id":75980922,"body_markdown":"I am currently developing an app and I am encountering some memory leak issues. I am using leak canary to detect them. My problem is, when I use the app like a normal human would o, leak canary detects retained objects but after 1-2 seconds, it says &quot;All retained objects have been garbage collected&quot; so all is good. But, when I switch between fragments so fast, leak canary gives me some memory leak problems even though I set bindings, objects etc. to null and remove all observers of view model etc. I use lifecyclescope to make sure all threads are cancelled when view is destroyed. When I use the app in a normal pace, no memory leak is being detected, they are being collected by garbage collector, but when I use the app in a fast pace I get 5-6 leak messages. \r\nShould I be worried about this? Should I still try to prevent memory leaks in a fast pace app usage? ","title":"Memory Leaks in Android - Fast Pace App Usage","body":"<p>I am currently developing an app and I am encountering some memory leak issues. I am using leak canary to detect them. My problem is, when I use the app like a normal human would o, leak canary detects retained objects but after 1-2 seconds, it says &quot;All retained objects have been garbage collected&quot; so all is good. But, when I switch between fragments so fast, leak canary gives me some memory leak problems even though I set bindings, objects etc. to null and remove all observers of view model etc. I use lifecyclescope to make sure all threads are cancelled when view is destroyed. When I use the app in a normal pace, no memory leak is being detected, they are being collected by garbage collector, but when I use the app in a fast pace I get 5-6 leak messages.\nShould I be worried about this? Should I still try to prevent memory leaks in a fast pace app usage?</p>\n"},{"tags":["java","wcf","soap","soap-client"],"answers":[{"comments":[{"owner":{"account_id":3128073,"reputation":1098,"user_id":2646573,"display_name":"Erlend Graff"},"score":3,"creation_date":1473698265,"post_id":36565912,"comment_id":66231132,"body_markdown":"Actually, the order of the entropies that are arguments to `P_SHA1` is specified formally by WS-Trust. In your particular case, the `ComputedKey` URI is `http://schemas.xmlsoap.org/ws/2005/02/trust/CK/PSHA1` which indicates the February 2005 revision of WS-Trust (http://specs.xmlsoap.org/ws/2005/02/trust/WS-Trust.pdf). From the spec: `The key is computed using P_SHA1 from the TLS specification to generate a bit stream using entropy from both sides. The exact form is: key = P_SHA1 (Ent_REQ, Ent_RES)`","body":"Actually, the order of the entropies that are arguments to <code>P_SHA1</code> is specified formally by WS-Trust. In your particular case, the <code>ComputedKey</code> URI is <code>http:&#47;&#47;schemas.xmlsoap.org&#47;ws&#47;2005&#47;02&#47;trust&#47;CK&#47;PSHA1</code> which indicates the February 2005 revision of WS-Trust (<a href=\"http://specs.xmlsoap.org/ws/2005/02/trust/WS-Trust.pdf\" rel=\"nofollow noreferrer\">specs.xmlsoap.org/ws/2005/02/trust/WS-Trust.pdf</a>). From the spec: <code>The key is computed using P_SHA1 from the TLS specification to generate a bit stream using entropy from both sides. The exact form is: key = P_SHA1 (Ent_REQ, Ent_RES)</code>"},{"owner":{"account_id":473256,"reputation":925,"user_id":882250,"accept_rate":93,"display_name":"Jonathan"},"score":4,"creation_date":1513133112,"post_id":36565912,"comment_id":82530834,"body_markdown":"I wish I could upvote this 1000x. You are a hero for following up with your findings here.","body":"I wish I could upvote this 1000x. You are a hero for following up with your findings here."},{"owner":{"account_id":6551057,"reputation":322,"user_id":5065447,"accept_rate":81,"display_name":"Anton Rand"},"score":1,"creation_date":1551997383,"post_id":36565912,"comment_id":96857128,"body_markdown":"For anyone needing to do this in JavaScript, here&#39;s how you generate the signature: https://stackoverflow.com/a/55053741/5065447","body":"For anyone needing to do this in JavaScript, here&#39;s how you generate the signature: <a href=\"https://stackoverflow.com/a/55053741/5065447\">stackoverflow.com/a/55053741/5065447</a>"},{"owner":{"account_id":5448018,"reputation":1123,"user_id":4333844,"display_name":"Jorge Y."},"score":2,"creation_date":1560957438,"post_id":36565912,"comment_id":99909508,"body_markdown":"I owe a lot to stackoverflow site, helped me uncountable times. But this question and this answer, so complete both, are simply the most amazing help I&#39;ve come around in all this years in SO, and as I said, that&#39;s a lot. @aroth, as Jonathan said, I wish I could upvote this 1000 times, thanks you very much.","body":"I owe a lot to stackoverflow site, helped me uncountable times. But this question and this answer, so complete both, are simply the most amazing help I&#39;ve come around in all this years in SO, and as I said, that&#39;s a lot. @aroth, as Jonathan said, I wish I could upvote this 1000 times, thanks you very much."}],"tags":[],"owner":{"account_id":301489,"reputation":54254,"user_id":609251,"accept_rate":82,"display_name":"aroth"},"comment_count":4,"down_vote_count":0,"up_vote_count":14,"is_accepted":true,"score":14,"last_activity_date":1460445461,"creation_date":1460444725,"answer_id":36565912,"question_id":36493667,"body_markdown":"After some research and a fair bit of trial and error, I managed to get a working solution.  I&#39;ll start with the bonus questions first:\r\n\r\n1.  I didn&#39;t find any formal documentation, and every reference implementation and code sample that I came across always passed the client key first, and this is also what the server (Microsoft IIS v8.5) expects.  So that would appear to be the standard, even if it&#39;s not a formal one.\r\n\r\n2.  Yes, the `Timestamp` and `Reference` values are significant in a big way, and very closely relate back to the main question.\r\n\r\nSo what&#39;s the actual algorithm for signing things in an outbound SOAP message, if you have to do so manually, in Java, using JAX-WS?  \r\n\r\n[This reference][1] is a helpful place to start, and should give you a pretty good idea of just how overarchitected things have become in the SOAP world.  And some of it is very obtusely described, to boot.  For instance:\r\n\r\n&gt; **3.2.2 Signature Validation**\r\n&gt; \r\n&gt; 1.  Obtain the keying information from `KeyInfo` or from an external source.\r\n&gt; 2.  Obtain the canonical form of the `SignatureMethod` using the\r\n&gt; `CanonicalizationMethod` and use the result (and previously obtained\r\n&gt; `KeyInfo`) to confirm the `SignatureValue` over the `SignedInfo` element.\r\n\r\nIf your `KeyInfo` is a `SecurityTokenReference` to a `SecurityContextToken` that doesn&#39;t actually contain any key data itself, and your `SignatureMethod` is `Algorithm=&quot;http://www.w3.org/2000/09/xmldsig#hmac-sha1&quot;`, it&#39;s clear as mud how any `CanonicalizationMethod` relates to that or how you&#39;re supposed to get from that to knowing that you need to combine the server and client `BinarySecret` values and take the result to be your key.  But I digress.\r\n\r\nThe algorithm to apply is more-or-less described in the `Signature` block.  For instance, if the server you&#39;re talking to expects something like:\r\n\r\n    &lt;o:Security xmlns:o=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd&quot; s:mustUnderstand=&quot;1&quot;&gt;\r\n    \t&lt;u:Timestamp u:Id=&quot;_0&quot;&gt;\r\n    \t\t&lt;u:Created&gt;2016-04-11T00:53:44.050Z&lt;/u:Created&gt;\r\n    \t\t&lt;u:Expires&gt;2016-04-11T00:58:44.050Z&lt;/u:Expires&gt;\r\n    \t&lt;/u:Timestamp&gt;\r\n    \t&lt;c:SecurityContextToken xmlns:c=&quot;http://schemas.xmlsoap.org/ws/2005/02/sc&quot; u:Id=&quot;uuid-41b0578e-dc47-4467-9b65-b0cebde98309-1&quot;&gt;\r\n    \t\t&lt;c:Identifier&gt;urn:uuid:9eba64a2-5cf8-4ea9-85e9-359b2edbb13c&lt;/c:Identifier&gt;\r\n    \t&lt;/c:SecurityContextToken&gt;\r\n    \t&lt;Signature xmlns=&quot;http://www.w3.org/2000/09/xmldsig#&quot;&gt;\r\n    \t\t&lt;SignedInfo&gt;\r\n    \t\t\t&lt;CanonicalizationMethod Algorithm=&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot; /&gt;\r\n    \t\t\t&lt;SignatureMethod Algorithm=&quot;http://www.w3.org/2000/09/xmldsig#hmac-sha1&quot; /&gt;\r\n    \t\t\t&lt;Reference URI=&quot;#_0&quot;&gt;\r\n    \t\t\t\t&lt;Transforms&gt;\r\n    \t\t\t\t\t&lt;Transform Algorithm=&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot; /&gt;\r\n    \t\t\t\t&lt;/Transforms&gt;\r\n    \t\t\t\t&lt;DigestMethod Algorithm=&quot;http://www.w3.org/2000/09/xmldsig#sha1&quot; /&gt;\r\n    \t\t\t\t&lt;DigestValue&gt;CwJgqLNOoHJpuiqIOylvVvFli1E=&lt;/DigestValue&gt;\r\n    \t\t\t&lt;/Reference&gt;\r\n    \t\t&lt;/SignedInfo&gt;\r\n    \t\t&lt;SignatureValue&gt;fJxof0blfd6abX0V4EmPYZ/NGJI=&lt;/SignatureValue&gt;\r\n    \t\t&lt;KeyInfo&gt;\r\n    \t\t\t&lt;o:SecurityTokenReference&gt;\r\n    \t\t\t\t&lt;o:Reference ValueType=&quot;http://schemas.xmlsoap.org/ws/2005/02/sc/sct&quot; URI=&quot;#uuid-41b0578e-dc47-4467-9b65-b0cebde98309-1&quot; /&gt;\r\n    \t\t\t&lt;/o:SecurityTokenReference&gt;\r\n    \t\t&lt;/KeyInfo&gt;\r\n    \t&lt;/Signature&gt;\r\n    &lt;/o:Security&gt;\r\n\r\n...you want to start with the `Reference` element, which points to the element with `id` &quot;_0&quot; (which in this case is the `Timestamp` element).  You then canonicalize the referenced element according to the nominated `Transform` algorithm.  That&#39;s most easily done by using [Apache XML Security][2], roughly like:\r\n\r\n    SOAPElement timestamp = secHeader.addChildElement(soapFactory.createName(&quot;Timestamp&quot;, &quot;u&quot;, &quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd&quot;));\r\n    //[add &#39;Created&#39; and &#39;Expires&#39; values, as required]\r\n    \r\n    //once you&#39;re done adding stuff, you can canonicalize the element\r\n    Canonicalizer canonizer = Canonicalizer.getInstance(Canonicalizer.ALGO_ID_C14N_EXCL_OMIT_COMMENTS);\r\n    byte[] canonTimestamp = canonizer.canonicalizeSubtree(timestamp);\r\n\r\nThat will give you something like this (newlines aren&#39;t canonical, sorry):\r\n\r\n    &lt;u:Timestamp xmlns:u=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd&quot; u:Id=&quot;_0&quot;&gt;&lt;u:Created&gt;2016-04-11T00:53:44.050Z&lt;/u:Created&gt;&lt;u:Expires&gt;2016-04-11T00:58:44.050Z&lt;/u:Expires&gt;&lt;/u:Timestamp&gt;\r\n\r\nNow you need to compute the `DigestValue` of that string.  The `DigestMethod` element in our `Reference` element tells us that this should be a SHA1 hash (base64-encoded).  So simply:\r\n\r\n    MessageDigest sha1 = MessageDigest.getInstance(&quot;SHA-1&quot;);\r\n    String canonDigestValue = Base64.encodeBytes(sha1.digest(canonTimestamp));\r\n\r\nThe value that you get goes into the `Reference/DigestValue` element (assuming you&#39;re building an outbound request).  Once that is done, the `Reference` is complete, and since there aren&#39;t any additional `Reference` elements, so is the `SignedInfo` block.  \r\n\r\nNow to get the `SignatureValue`, you canonicalize the `SignedInfo` element, the same as before:\r\n\r\n    SOAPElement sigInfo = sigElem.addChildElement(new QName(&quot;SignedInfo&quot;));\r\n    SOAPElement canon = sigInfo.addChildElement(new QName(&quot;CanonicalizationMethod&quot;));\r\n    canon.addAttribute(soapFactory.createName(&quot;Algorithm&quot;), Canonicalizer.ALGO_ID_C14N_EXCL_OMIT_COMMENTS);\r\n    //[continue adding the other elements...]\r\n    \r\n    //canonicalize the entire, completed &#39;SignedInfo&#39; block\r\n    byte[] bytesToSign = canonizer.canonicalizeSubtree(sigInfo);\r\n\r\nWhich should net you something like:\r\n\r\n    &lt;SignedInfo xmlns=&quot;http://www.w3.org/2000/09/xmldsig#&quot;&gt;&lt;CanonicalizationMethod Algorithm=&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot;&gt;&lt;/CanonicalizationMethod&gt;&lt;SignatureMethod Algorithm=&quot;http://www.w3.org/2000/09/xmldsig#hmac-sha1&quot;&gt;&lt;/SignatureMethod&gt;&lt;Reference URI=&quot;#_0&quot;&gt;&lt;Transforms&gt;&lt;Transform Algorithm=&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot;&gt;&lt;/Transform&gt;&lt;/Transforms&gt;&lt;DigestMethod Algorithm=&quot;http://www.w3.org/2000/09/xmldsig#sha1&quot;&gt;&lt;/DigestMethod&gt;&lt;DigestValue&gt;CwJgqLNOoHJpuiqIOylvVvFli1E=&lt;/DigestValue&gt;&lt;/Reference&gt;&lt;/SignedInfo&gt;\r\n\r\n...and then you sign the whole thing according to the nominated `SignatureMethod` algorithm, which in our case is `HmacSHA1`:\r\n\r\n    Mac mac = Mac.getInstance(&quot;HmacSHA1&quot;);\r\n    SecretKeySpec key = new SecretKeySpec(getSharedKey(), &quot;HmacSHA1&quot;);\r\n    mac.init(key);\r\n    \r\n    String signature = Base64.encodeBytes(mac.doFinal(bytesToSign)); \r\n\r\n...where `getSharedKey()` returns, in this instance, a key derived using the `BinarySecret` values that the client and server sent during the initial `RequestSecurityToken` exchange.  As in:\r\n\r\n    private byte[] getSharedKey() {\r\n    \ttry {\r\n    \t\t//XXX:  doesn&#39;t seem to be formally specified anywhere, but convention appears to be that the client key always goes first\r\n    \t\tP_SHA1 algo = new P_SHA1();\r\n    \t\treturn algo.createKey(getBinaryClientEntropy(),  //the &#39;BinarySecret&#39; value that the client sent to the server, decoded to raw binary \r\n                                  getBinaryServerEntropy(),  //the &#39;BinarySecret&#39; value that the server sent to the client, decoded to raw binary\r\n                                  0,                         //offset, &#39;0&#39; is what we want here\r\n                                  getSharedKeySize() / 8);   //&#39;KeySize&#39; is 256 bits in this case (specified by server), divide by &#39;8&#39; to convert to bytes\r\n    \t}\r\n    \tcatch (Throwable e) {\r\n    \t\tLOG.error(&quot;Unable to compute shared key!&quot;, e);\r\n    \t}\r\n    \r\n    \treturn null;\r\n    }\r\n\r\nAnyways, at this point you should have a signature value and it can be appended to the `Security` header in the outbound message, like:\r\n\r\n    SOAPElement sigValue = sigElem.addChildElement(new QName(&quot;SignatureValue&quot;));\r\n    sigValue.addTextNode(signature);\r\n\r\nAnd if all goes well, the message is now successfully signed and of acceptable quality for the server.\r\n\r\nThough there was one final caveat that I noted, which is that the `Timestamp` values need to be generated in the server&#39;s timezone (which, in this case, is UTC), otherwise it will reject the request due to the timestamps either being from the future or having already expired.  A simple problem that could have been solved by standardizing on UNIX epoch timestamps.  But for some reason they went with &quot;yyyy-mm-dd&#39;T&#39;hh:mm:ss.msec&#39;Z&#39;&quot; instead.  Go figure.\r\n\r\nI hope this is helpful to the next unfortunate soul who has to try to get Java talking to .NET using SOAP/XML.\r\n\r\nAnd one final note if you&#39;re using Apache XML Security.  You need to call `org.apache.xml.security.Init.init()` before attempting to use the `Canonicalizer`, for instance from within a `static` initializer block.  If you don&#39;t, you&#39;ll get an exception (NPE I think it was) when you try to canonicalize.\r\n\r\n  [1]: https://www.w3.org/TR/xmldsig-core/#sec-CoreValidation\r\n  [2]: http://mvnrepository.com/artifact/org.apache.santuario/xmlsec","title":"SOAP, WCF, and message signatures","body":"<p>After some research and a fair bit of trial and error, I managed to get a working solution.  I'll start with the bonus questions first:</p>\n\n<ol>\n<li><p>I didn't find any formal documentation, and every reference implementation and code sample that I came across always passed the client key first, and this is also what the server (Microsoft IIS v8.5) expects.  So that would appear to be the standard, even if it's not a formal one.</p></li>\n<li><p>Yes, the <code>Timestamp</code> and <code>Reference</code> values are significant in a big way, and very closely relate back to the main question.</p></li>\n</ol>\n\n<p>So what's the actual algorithm for signing things in an outbound SOAP message, if you have to do so manually, in Java, using JAX-WS?  </p>\n\n<p><a href=\"https://www.w3.org/TR/xmldsig-core/#sec-CoreValidation\" rel=\"noreferrer\">This reference</a> is a helpful place to start, and should give you a pretty good idea of just how overarchitected things have become in the SOAP world.  And some of it is very obtusely described, to boot.  For instance:</p>\n\n<blockquote>\n  <p><strong>3.2.2 Signature Validation</strong></p>\n  \n  <ol>\n  <li>Obtain the keying information from <code>KeyInfo</code> or from an external source.</li>\n  <li>Obtain the canonical form of the <code>SignatureMethod</code> using the\n  <code>CanonicalizationMethod</code> and use the result (and previously obtained\n  <code>KeyInfo</code>) to confirm the <code>SignatureValue</code> over the <code>SignedInfo</code> element.</li>\n  </ol>\n</blockquote>\n\n<p>If your <code>KeyInfo</code> is a <code>SecurityTokenReference</code> to a <code>SecurityContextToken</code> that doesn't actually contain any key data itself, and your <code>SignatureMethod</code> is <code>Algorithm=\"http://www.w3.org/2000/09/xmldsig#hmac-sha1\"</code>, it's clear as mud how any <code>CanonicalizationMethod</code> relates to that or how you're supposed to get from that to knowing that you need to combine the server and client <code>BinarySecret</code> values and take the result to be your key.  But I digress.</p>\n\n<p>The algorithm to apply is more-or-less described in the <code>Signature</code> block.  For instance, if the server you're talking to expects something like:</p>\n\n<pre><code>&lt;o:Security xmlns:o=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd\" s:mustUnderstand=\"1\"&gt;\n    &lt;u:Timestamp u:Id=\"_0\"&gt;\n        &lt;u:Created&gt;2016-04-11T00:53:44.050Z&lt;/u:Created&gt;\n        &lt;u:Expires&gt;2016-04-11T00:58:44.050Z&lt;/u:Expires&gt;\n    &lt;/u:Timestamp&gt;\n    &lt;c:SecurityContextToken xmlns:c=\"http://schemas.xmlsoap.org/ws/2005/02/sc\" u:Id=\"uuid-41b0578e-dc47-4467-9b65-b0cebde98309-1\"&gt;\n        &lt;c:Identifier&gt;urn:uuid:9eba64a2-5cf8-4ea9-85e9-359b2edbb13c&lt;/c:Identifier&gt;\n    &lt;/c:SecurityContextToken&gt;\n    &lt;Signature xmlns=\"http://www.w3.org/2000/09/xmldsig#\"&gt;\n        &lt;SignedInfo&gt;\n            &lt;CanonicalizationMethod Algorithm=\"http://www.w3.org/2001/10/xml-exc-c14n#\" /&gt;\n            &lt;SignatureMethod Algorithm=\"http://www.w3.org/2000/09/xmldsig#hmac-sha1\" /&gt;\n            &lt;Reference URI=\"#_0\"&gt;\n                &lt;Transforms&gt;\n                    &lt;Transform Algorithm=\"http://www.w3.org/2001/10/xml-exc-c14n#\" /&gt;\n                &lt;/Transforms&gt;\n                &lt;DigestMethod Algorithm=\"http://www.w3.org/2000/09/xmldsig#sha1\" /&gt;\n                &lt;DigestValue&gt;CwJgqLNOoHJpuiqIOylvVvFli1E=&lt;/DigestValue&gt;\n            &lt;/Reference&gt;\n        &lt;/SignedInfo&gt;\n        &lt;SignatureValue&gt;fJxof0blfd6abX0V4EmPYZ/NGJI=&lt;/SignatureValue&gt;\n        &lt;KeyInfo&gt;\n            &lt;o:SecurityTokenReference&gt;\n                &lt;o:Reference ValueType=\"http://schemas.xmlsoap.org/ws/2005/02/sc/sct\" URI=\"#uuid-41b0578e-dc47-4467-9b65-b0cebde98309-1\" /&gt;\n            &lt;/o:SecurityTokenReference&gt;\n        &lt;/KeyInfo&gt;\n    &lt;/Signature&gt;\n&lt;/o:Security&gt;\n</code></pre>\n\n<p>...you want to start with the <code>Reference</code> element, which points to the element with <code>id</code> \"_0\" (which in this case is the <code>Timestamp</code> element).  You then canonicalize the referenced element according to the nominated <code>Transform</code> algorithm.  That's most easily done by using <a href=\"http://mvnrepository.com/artifact/org.apache.santuario/xmlsec\" rel=\"noreferrer\">Apache XML Security</a>, roughly like:</p>\n\n<pre><code>SOAPElement timestamp = secHeader.addChildElement(soapFactory.createName(\"Timestamp\", \"u\", \"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd\"));\n//[add 'Created' and 'Expires' values, as required]\n\n//once you're done adding stuff, you can canonicalize the element\nCanonicalizer canonizer = Canonicalizer.getInstance(Canonicalizer.ALGO_ID_C14N_EXCL_OMIT_COMMENTS);\nbyte[] canonTimestamp = canonizer.canonicalizeSubtree(timestamp);\n</code></pre>\n\n<p>That will give you something like this (newlines aren't canonical, sorry):</p>\n\n<pre><code>&lt;u:Timestamp xmlns:u=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd\" u:Id=\"_0\"&gt;&lt;u:Created&gt;2016-04-11T00:53:44.050Z&lt;/u:Created&gt;&lt;u:Expires&gt;2016-04-11T00:58:44.050Z&lt;/u:Expires&gt;&lt;/u:Timestamp&gt;\n</code></pre>\n\n<p>Now you need to compute the <code>DigestValue</code> of that string.  The <code>DigestMethod</code> element in our <code>Reference</code> element tells us that this should be a SHA1 hash (base64-encoded).  So simply:</p>\n\n<pre><code>MessageDigest sha1 = MessageDigest.getInstance(\"SHA-1\");\nString canonDigestValue = Base64.encodeBytes(sha1.digest(canonTimestamp));\n</code></pre>\n\n<p>The value that you get goes into the <code>Reference/DigestValue</code> element (assuming you're building an outbound request).  Once that is done, the <code>Reference</code> is complete, and since there aren't any additional <code>Reference</code> elements, so is the <code>SignedInfo</code> block.  </p>\n\n<p>Now to get the <code>SignatureValue</code>, you canonicalize the <code>SignedInfo</code> element, the same as before:</p>\n\n<pre><code>SOAPElement sigInfo = sigElem.addChildElement(new QName(\"SignedInfo\"));\nSOAPElement canon = sigInfo.addChildElement(new QName(\"CanonicalizationMethod\"));\ncanon.addAttribute(soapFactory.createName(\"Algorithm\"), Canonicalizer.ALGO_ID_C14N_EXCL_OMIT_COMMENTS);\n//[continue adding the other elements...]\n\n//canonicalize the entire, completed 'SignedInfo' block\nbyte[] bytesToSign = canonizer.canonicalizeSubtree(sigInfo);\n</code></pre>\n\n<p>Which should net you something like:</p>\n\n<pre><code>&lt;SignedInfo xmlns=\"http://www.w3.org/2000/09/xmldsig#\"&gt;&lt;CanonicalizationMethod Algorithm=\"http://www.w3.org/2001/10/xml-exc-c14n#\"&gt;&lt;/CanonicalizationMethod&gt;&lt;SignatureMethod Algorithm=\"http://www.w3.org/2000/09/xmldsig#hmac-sha1\"&gt;&lt;/SignatureMethod&gt;&lt;Reference URI=\"#_0\"&gt;&lt;Transforms&gt;&lt;Transform Algorithm=\"http://www.w3.org/2001/10/xml-exc-c14n#\"&gt;&lt;/Transform&gt;&lt;/Transforms&gt;&lt;DigestMethod Algorithm=\"http://www.w3.org/2000/09/xmldsig#sha1\"&gt;&lt;/DigestMethod&gt;&lt;DigestValue&gt;CwJgqLNOoHJpuiqIOylvVvFli1E=&lt;/DigestValue&gt;&lt;/Reference&gt;&lt;/SignedInfo&gt;\n</code></pre>\n\n<p>...and then you sign the whole thing according to the nominated <code>SignatureMethod</code> algorithm, which in our case is <code>HmacSHA1</code>:</p>\n\n<pre><code>Mac mac = Mac.getInstance(\"HmacSHA1\");\nSecretKeySpec key = new SecretKeySpec(getSharedKey(), \"HmacSHA1\");\nmac.init(key);\n\nString signature = Base64.encodeBytes(mac.doFinal(bytesToSign)); \n</code></pre>\n\n<p>...where <code>getSharedKey()</code> returns, in this instance, a key derived using the <code>BinarySecret</code> values that the client and server sent during the initial <code>RequestSecurityToken</code> exchange.  As in:</p>\n\n<pre><code>private byte[] getSharedKey() {\n    try {\n        //XXX:  doesn't seem to be formally specified anywhere, but convention appears to be that the client key always goes first\n        P_SHA1 algo = new P_SHA1();\n        return algo.createKey(getBinaryClientEntropy(),  //the 'BinarySecret' value that the client sent to the server, decoded to raw binary \n                              getBinaryServerEntropy(),  //the 'BinarySecret' value that the server sent to the client, decoded to raw binary\n                              0,                         //offset, '0' is what we want here\n                              getSharedKeySize() / 8);   //'KeySize' is 256 bits in this case (specified by server), divide by '8' to convert to bytes\n    }\n    catch (Throwable e) {\n        LOG.error(\"Unable to compute shared key!\", e);\n    }\n\n    return null;\n}\n</code></pre>\n\n<p>Anyways, at this point you should have a signature value and it can be appended to the <code>Security</code> header in the outbound message, like:</p>\n\n<pre><code>SOAPElement sigValue = sigElem.addChildElement(new QName(\"SignatureValue\"));\nsigValue.addTextNode(signature);\n</code></pre>\n\n<p>And if all goes well, the message is now successfully signed and of acceptable quality for the server.</p>\n\n<p>Though there was one final caveat that I noted, which is that the <code>Timestamp</code> values need to be generated in the server's timezone (which, in this case, is UTC), otherwise it will reject the request due to the timestamps either being from the future or having already expired.  A simple problem that could have been solved by standardizing on UNIX epoch timestamps.  But for some reason they went with \"yyyy-mm-dd'T'hh:mm:ss.msec'Z'\" instead.  Go figure.</p>\n\n<p>I hope this is helpful to the next unfortunate soul who has to try to get Java talking to .NET using SOAP/XML.</p>\n\n<p>And one final note if you're using Apache XML Security.  You need to call <code>org.apache.xml.security.Init.init()</code> before attempting to use the <code>Canonicalizer</code>, for instance from within a <code>static</code> initializer block.  If you don't, you'll get an exception (NPE I think it was) when you try to canonicalize.</p>\n"}],"owner":{"account_id":301489,"reputation":54254,"user_id":609251,"accept_rate":82,"display_name":"aroth"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2407,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":36565912,"answer_count":1,"score":8,"last_activity_date":1681162953,"creation_date":1460099595,"question_id":36493667,"body_markdown":"I have a Java (JAX-WS based) SOAP client that I&#39;m trying to get to talk with a (third-party) WCF-based server.  I&#39;m finding the [sentiment expressed here][1] to be quite accurate.  But the goal still remains.  \r\n\r\nSo long story short, I can coax a valid &quot;security context token&quot; out of the server, but am getting hung up on message-signing issues (I believe).  \r\n\r\nThe server appears to expect the message to be signed using an `hmac-sha1` authentication code using client/server secret keys (`PSHA1` algorithm).  Fair enough.  However JAX-WS appears to want to use `rsa-sha1` and an X509 certificate to sign the outbound messages (which the server doesn&#39;t like), and only seems to use `hmac-sha1` if a `UsernameToken` is provided (which the server also doesn&#39;t like).  \r\n\r\nSo I&#39;m trying to manually sign the outbound SOAP messages from within a `SOAPHandler` implementation.  The request that the client sends in order to get a security context token looks like this:\r\n\r\n    &lt;t:RequestSecurityToken xmlns:t=&quot;http://schemas.xmlsoap.org/ws/2005/02/trust&quot;&gt;\r\n    \t&lt;t:TokenType&gt;http://schemas.xmlsoap.org/ws/2005/02/sc/sct&lt;/t:TokenType&gt;\r\n    \t&lt;t:RequestType&gt;http://schemas.xmlsoap.org/ws/2005/02/trust/Issue&lt;/t:RequestType&gt;\r\n    \t&lt;t:Entropy&gt;\r\n    \t\t&lt;t:BinarySecret Type=&quot;http://schemas.xmlsoap.org/ws/2005/02/trust/Nonce&quot;&gt;NzM1MDZjYWVkMTEzNDlkNGEyODY0ZDBlMjlkODEyMTM=&lt;/t:BinarySecret&gt;\r\n    \t&lt;/t:Entropy&gt;\r\n    \t&lt;t:KeySize&gt;256&lt;/t:KeySize&gt;\r\n    &lt;/t:RequestSecurityToken&gt;\r\n\r\n\r\nAnd the token that the server sends back look like this:\r\n\r\n    &lt;t:RequestSecurityTokenResponse xmlns:t=&quot;http://schemas.xmlsoap.org/ws/2005/02/trust&quot;&gt;\r\n    \t&lt;t:TokenType&gt;http://schemas.xmlsoap.org/ws/2005/02/sc/sct&lt;/t:TokenType&gt;\r\n    \t&lt;t:RequestedSecurityToken&gt;\r\n    \t\t&lt;c:SecurityContextToken xmlns:c=&quot;http://schemas.xmlsoap.org/ws/2005/02/sc&quot; u:Id=&quot;uuid-106bdbae-76e5-4195-b5d0-cc1c1a7a813e-13&quot;&gt;\r\n    \t\t\t&lt;c:Identifier&gt;urn:uuid:c0be4929-da8d-4955-8e13-b25aa7a37217&lt;/c:Identifier&gt;\r\n    \t\t&lt;/c:SecurityContextToken&gt;\r\n    \t&lt;/t:RequestedSecurityToken&gt;\r\n    \t&lt;t:RequestedAttachedReference&gt;\r\n    \t\t&lt;o:SecurityTokenReference xmlns:o=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd&quot;&gt;\r\n    \t\t\t&lt;o:Reference ValueType=&quot;http://schemas.xmlsoap.org/ws/2005/02/sc/sct&quot; URI=&quot;#uuid-106bdbae-76e5-4195-b5d0-cc1c1a7a813e-13&quot; /&gt;\r\n    \t\t&lt;/o:SecurityTokenReference&gt;\r\n    \t&lt;/t:RequestedAttachedReference&gt;\r\n    \t&lt;t:RequestedUnattachedReference&gt;\r\n    \t\t&lt;o:SecurityTokenReference xmlns:o=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd&quot;&gt;\r\n    \t\t\t&lt;o:Reference URI=&quot;urn:uuid:c0be4929-da8d-4955-8e13-b25aa7a37217&quot; ValueType=&quot;http://schemas.xmlsoap.org/ws/2005/02/sc/sct&quot; /&gt;\r\n    \t\t&lt;/o:SecurityTokenReference&gt;\r\n    \t&lt;/t:RequestedUnattachedReference&gt;\r\n    \t&lt;t:RequestedProofToken&gt;\r\n    \t\t&lt;t:ComputedKey&gt;http://schemas.xmlsoap.org/ws/2005/02/trust/CK/PSHA1&lt;/t:ComputedKey&gt;\r\n    \t&lt;/t:RequestedProofToken&gt;\r\n    \t&lt;t:Entropy&gt;\r\n    \t\t&lt;t:BinarySecret u:Id=&quot;uuid-106bdbae-76e5-4195-b5d0-cc1c1a7a813e-14&quot; Type=&quot;http://schemas.xmlsoap.org/ws/2005/02/trust/Nonce&quot;&gt;dssunihZGy2dnnDHV9PMe3vU3lg/kKKZQkFohvGvCAk=&lt;/t:BinarySecret&gt;\r\n    \t&lt;/t:Entropy&gt;\r\n    \t&lt;t:Lifetime&gt;\r\n    \t\t&lt;u:Created&gt;2016-04-08T04:11:54.392Z&lt;/u:Created&gt;\r\n    \t\t&lt;u:Expires&gt;2016-04-08T19:11:54.392Z&lt;/u:Expires&gt;\r\n    \t&lt;/t:Lifetime&gt;\r\n    \t&lt;t:KeySize&gt;256&lt;/t:KeySize&gt;\r\n    &lt;/t:RequestSecurityTokenResponse&gt;\r\n\r\nI&#39;m combining the client and the server `BinarySecret` keys using `PSHA1` as follows:\r\n\r\n\tprivate byte[] getSharedKey() {\r\n\t\ttry {\r\n\t\t\t//FIXME:  client key first, or server key first?\r\n\t\t\tP_SHA1 algo = new P_SHA1();\r\n\t\t\treturn algo.createKey(getBinaryClientEntropy(), getBinaryServerEntropy(), 0, getSharedKeySize() / 8);\r\n\t\t}\r\n\t\tcatch (Throwable e) {\r\n\t\t\tLOG.error(&quot;Unable to compute shared key!&quot;, e);\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t}\r\n\r\nI&#39;m then using that key to compute a MAC for the message, like:\r\n\r\n    Mac mac = Mac.getInstance(&quot;HmacSHA1&quot;);\r\n    SecretKeySpec key = new SecretKeySpec(getSharedKey(), &quot;HmacSHA1&quot;);\r\n    mac.init(key);\r\n    \r\n    byte[] signatureBytes = mac.doFinal(content);\r\n    String signature = Base64.encodeBytes(signatureBytes);\r\n\r\nThat then goes into the outbound requests (along with a ton of other boilerplate things), as the `SignatureValue`.  Ultimately I end up with something like:\r\n\r\n    &lt;S:Envelope xmlns:S=&quot;http://www.w3.org/2003/05/soap-envelope&quot;&gt;\r\n        &lt;S:Header xmlns:a=&quot;http://www.w3.org/2005/08/addressing&quot; xmlns:scon=&quot;http://schemas.xmlsoap.org/ws/2005/02/sc&quot; xmlns:sec=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd&quot;&gt;\r\n            &lt;sec:Security xmlns:env=&quot;http://www.w3.org/2003/05/soap-envelope&quot; env:mustUnderstand=&quot;true&quot;&gt;\r\n                &lt;scon:SecurityContextToken xmlns:util=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd&quot; util:Id=&quot;uuid-106bdbae-76e5-4195-b5d0-cc1c1a7a813e-55&quot;&gt;\r\n                    &lt;scon:Identifier&gt;urn:uuid:3ab0f3fb-edd4-4880-af77-d700dda371bb&lt;/scon:Identifier&gt;\r\n                &lt;/scon:SecurityContextToken&gt;\r\n                &lt;sig:Signature xmlns:sig=&quot;http://www.w3.org/2000/09/xmldsig#&quot;&gt;\r\n                    &lt;sig:SignedInfo&gt;\r\n                        &lt;sig:CanonicalizationMethod Algorithm=&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot; /&gt;\r\n                        &lt;sig:SignatureMethod Algorithm=&quot;http://www.w3.org/2000/09/xmldsig#hmac-sha1&quot; /&gt;\r\n                    &lt;/sig:SignedInfo&gt;\r\n                    &lt;sig:SignatureValue&gt;ohqViTbUYBG2E3hLldUA1AsPBJM=&lt;/sig:SignatureValue&gt;\r\n                    &lt;sig:KeyInfo&gt;\r\n                        &lt;sec:SecurityTokenReference&gt;\r\n                            &lt;sec:Reference URI=&quot;#uuid-106bdbae-76e5-4195-b5d0-cc1c1a7a813e-55&quot; ValueType=&quot;http://schemas.xmlsoap.org/ws/2005/02/sc/sct&quot; /&gt;\r\n                        &lt;/sec:SecurityTokenReference&gt;\r\n                    &lt;/sig:KeyInfo&gt;\r\n                &lt;/sig:Signature&gt;\r\n            &lt;/sec:Security&gt;\r\n        &lt;/S:Header&gt;\r\n        &lt;S:Body&gt;\r\n            &lt;ns2:HelloWorld xmlns:ns2=&quot;http://tempuri.org/&quot; xmlns:ns3=&quot;http://schemas.microsoft.com/2003/10/Serialization/&quot;&gt;\r\n                &lt;ns2:name&gt;Test&lt;/ns2:name&gt;\r\n            &lt;/ns2:HelloWorld&gt;\r\n        &lt;/S:Body&gt;\r\n    &lt;/S:Envelope&gt;\r\n\r\nThat leads to &quot;An error occurred when verifying security for the message&quot; responses coming back from the server.\r\n\r\nUsing wcf-storm to fire off requests and Fiddler2 to inspect the outgoing packets, I know that that I should be close.  The following request works correctly:\r\n\r\n    &lt;S:Envelope xmlns:S=&quot;http://www.w3.org/2003/05/soap-envelope&quot;&gt;\r\n        &lt;S:Header xmlns:a=&quot;http://www.w3.org/2005/08/addressing&quot; xmlns:scon=&quot;http://schemas.xmlsoap.org/ws/2005/02/sc&quot; xmlns:sec=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd&quot;&gt;\r\n    \t\t&lt;o:Security xmlns:o=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd&quot; s:mustUnderstand=&quot;1&quot;&gt;\r\n    \t\t\t&lt;u:Timestamp u:Id=&quot;_0&quot;&gt;\r\n    \t\t\t\t&lt;u:Created&gt;2016-04-05T23:48:06.110Z&lt;/u:Created&gt;\r\n    \t\t\t\t&lt;u:Expires&gt;2016-04-05T23:53:06.110Z&lt;/u:Expires&gt;\r\n    \t\t\t&lt;/u:Timestamp&gt;\r\n    \t\t\t&lt;c:SecurityContextToken xmlns:c=&quot;http://schemas.xmlsoap.org/ws/2005/02/sc&quot; u:Id=&quot;uuid-8085da33-b25c-4f09-b5a9-110635a3ae39-2005&quot;&gt;\r\n    \t\t\t\t&lt;c:Identifier&gt;urn:uuid:91349027-cb32-4c46-9f16-74a6bcb11126&lt;/c:Identifier&gt;\r\n    \t\t\t&lt;/c:SecurityContextToken&gt;\r\n    \t\t\t&lt;Signature xmlns=&quot;http://www.w3.org/2000/09/xmldsig#&quot;&gt;\r\n    \t\t\t\t&lt;SignedInfo&gt;\r\n    \t\t\t\t\t&lt;CanonicalizationMethod Algorithm=&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot; /&gt;\r\n    \t\t\t\t\t&lt;SignatureMethod Algorithm=&quot;http://www.w3.org/2000/09/xmldsig#hmac-sha1&quot; /&gt;\r\n    \t\t\t\t\t&lt;Reference URI=&quot;#_0&quot;&gt;\r\n    \t\t\t\t\t\t&lt;Transforms&gt;\r\n    \t\t\t\t\t\t\t&lt;Transform Algorithm=&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot; /&gt;\r\n    \t\t\t\t\t\t&lt;/Transforms&gt;\r\n    \t\t\t\t\t\t&lt;DigestMethod Algorithm=&quot;http://www.w3.org/2000/09/xmldsig#sha1&quot; /&gt;\r\n    \t\t\t\t\t\t&lt;DigestValue&gt;AvRXi7pyjulsfdg9afInSFMM+5k=&lt;/DigestValue&gt;\r\n    \t\t\t\t\t&lt;/Reference&gt;\r\n    \t\t\t\t&lt;/SignedInfo&gt;\r\n    \t\t\t\t&lt;SignatureValue&gt;TQup7BBN43b8CefrdSRd+X8MBgg=&lt;/SignatureValue&gt;\r\n    \t\t\t\t&lt;KeyInfo&gt;\r\n    \t\t\t\t\t&lt;o:SecurityTokenReference&gt;\r\n    \t\t\t\t\t\t&lt;o:Reference ValueType=&quot;http://schemas.xmlsoap.org/ws/2005/02/sc/sct&quot; URI=&quot;#uuid-8085da33-b25c-4f09-b5a9-110635a3ae39-2005&quot; /&gt;\r\n    \t\t\t\t\t&lt;/o:SecurityTokenReference&gt;\r\n    \t\t\t\t&lt;/KeyInfo&gt;\r\n    \t\t\t&lt;/Signature&gt;\r\n    \t\t&lt;/o:Security&gt;\r\n    \t&lt;/S:Header&gt;\r\n    \t&lt;S:Body&gt;\r\n    \t\t&lt;ns2:HelloWorld xmlns:ns2=&quot;http://tempuri.org/&quot; xmlns:ns3=&quot;http://schemas.microsoft.com/2003/10/Serialization/&quot;&gt;\r\n    \t\t\t&lt;ns2:name&gt;Test&lt;/ns2:name&gt;\r\n    \t\t&lt;/ns2:HelloWorld&gt;\r\n    \t&lt;/S:Body&gt;\r\n    &lt;/S:Envelope&gt;\r\n\r\nThe main differences are:\r\n\r\n* I&#39;ve omitted the `Timestamp` element (though I&#39;ve tried including it, and didn&#39;t seem to make any difference).\r\n* I&#39;ve omitted the `SignedInfo/Reference` element, because I&#39;m not sure how its `DigestValue` is meant to be computed.\r\n\r\nSo after all of that, I suppose the main question is:\r\n\r\n**What is the actual algorithm for signing the outbound messages?**  As in, if I have:\r\n\r\n    &lt;Envelope&gt;\r\n    \t&lt;Header&gt;\r\n    \t\tHHH...\r\n    \t&lt;/Header&gt;\r\n    \t&lt;Body&gt;\r\n    \t\tBBB...\r\n    \t&lt;/Body&gt;   \r\n    &lt;/Envelope&gt;\r\n\r\n...am I meant to compute the signature value off of `&lt;Envelope&gt;...&lt;/Envelope&gt;` (so the entire thing), or just `&lt;Body&gt;...&lt;/Body&gt;`, or even just the `BBB...` part?  And if I&#39;m meant to use the entire thing, how do I reconcile that against the fact that adding the signature information to the header alters the content that&#39;s used as input when computing the signature?\r\n\r\nIs there a more straightforward way to get JAX-WS to generate requests using the required signing conventions that I&#39;ve overlooked?\r\n\r\nAnd then there are some minor bonus questions:\r\n\r\n1.  Is there an established standard with respect to which order I pass the client and server `BinarySecret` values when combining them using `PSHA1`?\r\n\r\n2.  Are the `Timestamp` and `SignedInfo/Reference` entries significant, and if so, what&#39;s the correct method for computing the `DigestValue`?\r\n\r\n  [1]: https://softwareengineering.stackexchange.com/a/147310/25520\r\n","title":"SOAP, WCF, and message signatures","body":"<p>I have a Java (JAX-WS based) SOAP client that I'm trying to get to talk with a (third-party) WCF-based server.  I'm finding the <a href=\"https://softwareengineering.stackexchange.com/a/147310/25520\">sentiment expressed here</a> to be quite accurate.  But the goal still remains.  </p>\n\n<p>So long story short, I can coax a valid \"security context token\" out of the server, but am getting hung up on message-signing issues (I believe).  </p>\n\n<p>The server appears to expect the message to be signed using an <code>hmac-sha1</code> authentication code using client/server secret keys (<code>PSHA1</code> algorithm).  Fair enough.  However JAX-WS appears to want to use <code>rsa-sha1</code> and an X509 certificate to sign the outbound messages (which the server doesn't like), and only seems to use <code>hmac-sha1</code> if a <code>UsernameToken</code> is provided (which the server also doesn't like).  </p>\n\n<p>So I'm trying to manually sign the outbound SOAP messages from within a <code>SOAPHandler</code> implementation.  The request that the client sends in order to get a security context token looks like this:</p>\n\n<pre><code>&lt;t:RequestSecurityToken xmlns:t=\"http://schemas.xmlsoap.org/ws/2005/02/trust\"&gt;\n    &lt;t:TokenType&gt;http://schemas.xmlsoap.org/ws/2005/02/sc/sct&lt;/t:TokenType&gt;\n    &lt;t:RequestType&gt;http://schemas.xmlsoap.org/ws/2005/02/trust/Issue&lt;/t:RequestType&gt;\n    &lt;t:Entropy&gt;\n        &lt;t:BinarySecret Type=\"http://schemas.xmlsoap.org/ws/2005/02/trust/Nonce\"&gt;NzM1MDZjYWVkMTEzNDlkNGEyODY0ZDBlMjlkODEyMTM=&lt;/t:BinarySecret&gt;\n    &lt;/t:Entropy&gt;\n    &lt;t:KeySize&gt;256&lt;/t:KeySize&gt;\n&lt;/t:RequestSecurityToken&gt;\n</code></pre>\n\n<p>And the token that the server sends back look like this:</p>\n\n<pre><code>&lt;t:RequestSecurityTokenResponse xmlns:t=\"http://schemas.xmlsoap.org/ws/2005/02/trust\"&gt;\n    &lt;t:TokenType&gt;http://schemas.xmlsoap.org/ws/2005/02/sc/sct&lt;/t:TokenType&gt;\n    &lt;t:RequestedSecurityToken&gt;\n        &lt;c:SecurityContextToken xmlns:c=\"http://schemas.xmlsoap.org/ws/2005/02/sc\" u:Id=\"uuid-106bdbae-76e5-4195-b5d0-cc1c1a7a813e-13\"&gt;\n            &lt;c:Identifier&gt;urn:uuid:c0be4929-da8d-4955-8e13-b25aa7a37217&lt;/c:Identifier&gt;\n        &lt;/c:SecurityContextToken&gt;\n    &lt;/t:RequestedSecurityToken&gt;\n    &lt;t:RequestedAttachedReference&gt;\n        &lt;o:SecurityTokenReference xmlns:o=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd\"&gt;\n            &lt;o:Reference ValueType=\"http://schemas.xmlsoap.org/ws/2005/02/sc/sct\" URI=\"#uuid-106bdbae-76e5-4195-b5d0-cc1c1a7a813e-13\" /&gt;\n        &lt;/o:SecurityTokenReference&gt;\n    &lt;/t:RequestedAttachedReference&gt;\n    &lt;t:RequestedUnattachedReference&gt;\n        &lt;o:SecurityTokenReference xmlns:o=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd\"&gt;\n            &lt;o:Reference URI=\"urn:uuid:c0be4929-da8d-4955-8e13-b25aa7a37217\" ValueType=\"http://schemas.xmlsoap.org/ws/2005/02/sc/sct\" /&gt;\n        &lt;/o:SecurityTokenReference&gt;\n    &lt;/t:RequestedUnattachedReference&gt;\n    &lt;t:RequestedProofToken&gt;\n        &lt;t:ComputedKey&gt;http://schemas.xmlsoap.org/ws/2005/02/trust/CK/PSHA1&lt;/t:ComputedKey&gt;\n    &lt;/t:RequestedProofToken&gt;\n    &lt;t:Entropy&gt;\n        &lt;t:BinarySecret u:Id=\"uuid-106bdbae-76e5-4195-b5d0-cc1c1a7a813e-14\" Type=\"http://schemas.xmlsoap.org/ws/2005/02/trust/Nonce\"&gt;dssunihZGy2dnnDHV9PMe3vU3lg/kKKZQkFohvGvCAk=&lt;/t:BinarySecret&gt;\n    &lt;/t:Entropy&gt;\n    &lt;t:Lifetime&gt;\n        &lt;u:Created&gt;2016-04-08T04:11:54.392Z&lt;/u:Created&gt;\n        &lt;u:Expires&gt;2016-04-08T19:11:54.392Z&lt;/u:Expires&gt;\n    &lt;/t:Lifetime&gt;\n    &lt;t:KeySize&gt;256&lt;/t:KeySize&gt;\n&lt;/t:RequestSecurityTokenResponse&gt;\n</code></pre>\n\n<p>I'm combining the client and the server <code>BinarySecret</code> keys using <code>PSHA1</code> as follows:</p>\n\n<pre><code>private byte[] getSharedKey() {\n    try {\n        //FIXME:  client key first, or server key first?\n        P_SHA1 algo = new P_SHA1();\n        return algo.createKey(getBinaryClientEntropy(), getBinaryServerEntropy(), 0, getSharedKeySize() / 8);\n    }\n    catch (Throwable e) {\n        LOG.error(\"Unable to compute shared key!\", e);\n    }\n\n    return null;\n\n}\n</code></pre>\n\n<p>I'm then using that key to compute a MAC for the message, like:</p>\n\n<pre><code>Mac mac = Mac.getInstance(\"HmacSHA1\");\nSecretKeySpec key = new SecretKeySpec(getSharedKey(), \"HmacSHA1\");\nmac.init(key);\n\nbyte[] signatureBytes = mac.doFinal(content);\nString signature = Base64.encodeBytes(signatureBytes);\n</code></pre>\n\n<p>That then goes into the outbound requests (along with a ton of other boilerplate things), as the <code>SignatureValue</code>.  Ultimately I end up with something like:</p>\n\n<pre><code>&lt;S:Envelope xmlns:S=\"http://www.w3.org/2003/05/soap-envelope\"&gt;\n    &lt;S:Header xmlns:a=\"http://www.w3.org/2005/08/addressing\" xmlns:scon=\"http://schemas.xmlsoap.org/ws/2005/02/sc\" xmlns:sec=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd\"&gt;\n        &lt;sec:Security xmlns:env=\"http://www.w3.org/2003/05/soap-envelope\" env:mustUnderstand=\"true\"&gt;\n            &lt;scon:SecurityContextToken xmlns:util=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd\" util:Id=\"uuid-106bdbae-76e5-4195-b5d0-cc1c1a7a813e-55\"&gt;\n                &lt;scon:Identifier&gt;urn:uuid:3ab0f3fb-edd4-4880-af77-d700dda371bb&lt;/scon:Identifier&gt;\n            &lt;/scon:SecurityContextToken&gt;\n            &lt;sig:Signature xmlns:sig=\"http://www.w3.org/2000/09/xmldsig#\"&gt;\n                &lt;sig:SignedInfo&gt;\n                    &lt;sig:CanonicalizationMethod Algorithm=\"http://www.w3.org/2001/10/xml-exc-c14n#\" /&gt;\n                    &lt;sig:SignatureMethod Algorithm=\"http://www.w3.org/2000/09/xmldsig#hmac-sha1\" /&gt;\n                &lt;/sig:SignedInfo&gt;\n                &lt;sig:SignatureValue&gt;ohqViTbUYBG2E3hLldUA1AsPBJM=&lt;/sig:SignatureValue&gt;\n                &lt;sig:KeyInfo&gt;\n                    &lt;sec:SecurityTokenReference&gt;\n                        &lt;sec:Reference URI=\"#uuid-106bdbae-76e5-4195-b5d0-cc1c1a7a813e-55\" ValueType=\"http://schemas.xmlsoap.org/ws/2005/02/sc/sct\" /&gt;\n                    &lt;/sec:SecurityTokenReference&gt;\n                &lt;/sig:KeyInfo&gt;\n            &lt;/sig:Signature&gt;\n        &lt;/sec:Security&gt;\n    &lt;/S:Header&gt;\n    &lt;S:Body&gt;\n        &lt;ns2:HelloWorld xmlns:ns2=\"http://tempuri.org/\" xmlns:ns3=\"http://schemas.microsoft.com/2003/10/Serialization/\"&gt;\n            &lt;ns2:name&gt;Test&lt;/ns2:name&gt;\n        &lt;/ns2:HelloWorld&gt;\n    &lt;/S:Body&gt;\n&lt;/S:Envelope&gt;\n</code></pre>\n\n<p>That leads to \"An error occurred when verifying security for the message\" responses coming back from the server.</p>\n\n<p>Using wcf-storm to fire off requests and Fiddler2 to inspect the outgoing packets, I know that that I should be close.  The following request works correctly:</p>\n\n<pre><code>&lt;S:Envelope xmlns:S=\"http://www.w3.org/2003/05/soap-envelope\"&gt;\n    &lt;S:Header xmlns:a=\"http://www.w3.org/2005/08/addressing\" xmlns:scon=\"http://schemas.xmlsoap.org/ws/2005/02/sc\" xmlns:sec=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd\"&gt;\n        &lt;o:Security xmlns:o=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd\" s:mustUnderstand=\"1\"&gt;\n            &lt;u:Timestamp u:Id=\"_0\"&gt;\n                &lt;u:Created&gt;2016-04-05T23:48:06.110Z&lt;/u:Created&gt;\n                &lt;u:Expires&gt;2016-04-05T23:53:06.110Z&lt;/u:Expires&gt;\n            &lt;/u:Timestamp&gt;\n            &lt;c:SecurityContextToken xmlns:c=\"http://schemas.xmlsoap.org/ws/2005/02/sc\" u:Id=\"uuid-8085da33-b25c-4f09-b5a9-110635a3ae39-2005\"&gt;\n                &lt;c:Identifier&gt;urn:uuid:91349027-cb32-4c46-9f16-74a6bcb11126&lt;/c:Identifier&gt;\n            &lt;/c:SecurityContextToken&gt;\n            &lt;Signature xmlns=\"http://www.w3.org/2000/09/xmldsig#\"&gt;\n                &lt;SignedInfo&gt;\n                    &lt;CanonicalizationMethod Algorithm=\"http://www.w3.org/2001/10/xml-exc-c14n#\" /&gt;\n                    &lt;SignatureMethod Algorithm=\"http://www.w3.org/2000/09/xmldsig#hmac-sha1\" /&gt;\n                    &lt;Reference URI=\"#_0\"&gt;\n                        &lt;Transforms&gt;\n                            &lt;Transform Algorithm=\"http://www.w3.org/2001/10/xml-exc-c14n#\" /&gt;\n                        &lt;/Transforms&gt;\n                        &lt;DigestMethod Algorithm=\"http://www.w3.org/2000/09/xmldsig#sha1\" /&gt;\n                        &lt;DigestValue&gt;AvRXi7pyjulsfdg9afInSFMM+5k=&lt;/DigestValue&gt;\n                    &lt;/Reference&gt;\n                &lt;/SignedInfo&gt;\n                &lt;SignatureValue&gt;TQup7BBN43b8CefrdSRd+X8MBgg=&lt;/SignatureValue&gt;\n                &lt;KeyInfo&gt;\n                    &lt;o:SecurityTokenReference&gt;\n                        &lt;o:Reference ValueType=\"http://schemas.xmlsoap.org/ws/2005/02/sc/sct\" URI=\"#uuid-8085da33-b25c-4f09-b5a9-110635a3ae39-2005\" /&gt;\n                    &lt;/o:SecurityTokenReference&gt;\n                &lt;/KeyInfo&gt;\n            &lt;/Signature&gt;\n        &lt;/o:Security&gt;\n    &lt;/S:Header&gt;\n    &lt;S:Body&gt;\n        &lt;ns2:HelloWorld xmlns:ns2=\"http://tempuri.org/\" xmlns:ns3=\"http://schemas.microsoft.com/2003/10/Serialization/\"&gt;\n            &lt;ns2:name&gt;Test&lt;/ns2:name&gt;\n        &lt;/ns2:HelloWorld&gt;\n    &lt;/S:Body&gt;\n&lt;/S:Envelope&gt;\n</code></pre>\n\n<p>The main differences are:</p>\n\n<ul>\n<li>I've omitted the <code>Timestamp</code> element (though I've tried including it, and didn't seem to make any difference).</li>\n<li>I've omitted the <code>SignedInfo/Reference</code> element, because I'm not sure how its <code>DigestValue</code> is meant to be computed.</li>\n</ul>\n\n<p>So after all of that, I suppose the main question is:</p>\n\n<p><strong>What is the actual algorithm for signing the outbound messages?</strong>  As in, if I have:</p>\n\n<pre><code>&lt;Envelope&gt;\n    &lt;Header&gt;\n        HHH...\n    &lt;/Header&gt;\n    &lt;Body&gt;\n        BBB...\n    &lt;/Body&gt;   \n&lt;/Envelope&gt;\n</code></pre>\n\n<p>...am I meant to compute the signature value off of <code>&lt;Envelope&gt;...&lt;/Envelope&gt;</code> (so the entire thing), or just <code>&lt;Body&gt;...&lt;/Body&gt;</code>, or even just the <code>BBB...</code> part?  And if I'm meant to use the entire thing, how do I reconcile that against the fact that adding the signature information to the header alters the content that's used as input when computing the signature?</p>\n\n<p>Is there a more straightforward way to get JAX-WS to generate requests using the required signing conventions that I've overlooked?</p>\n\n<p>And then there are some minor bonus questions:</p>\n\n<ol>\n<li><p>Is there an established standard with respect to which order I pass the client and server <code>BinarySecret</code> values when combining them using <code>PSHA1</code>?</p></li>\n<li><p>Are the <code>Timestamp</code> and <code>SignedInfo/Reference</code> entries significant, and if so, what's the correct method for computing the <code>DigestValue</code>?</p></li>\n</ol>\n"},{"tags":["java","spring","hibernate","criteria","boot"],"comments":[{"owner":{"account_id":68630,"reputation":2092,"user_id":200136,"display_name":"Andrew McGuinness"},"score":0,"creation_date":1681132179,"post_id":75977325,"comment_id":134003210,"body_markdown":"Your question is about an error code you got from a service, but doesn&#39;t say anything about the service itself, even what service it is - that&#39;s the first thing to look at and ask questions about.  The code you are using to build your query might not even be relevant","body":"Your question is about an error code you got from a service, but doesn&#39;t say anything about the service itself, even what service it is - that&#39;s the first thing to look at and ask questions about.  The code you are using to build your query might not even be relevant"}],"owner":{"account_id":28219998,"reputation":1,"user_id":21570879,"display_name":"Shankar Kannan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681162763,"creation_date":1681131319,"question_id":75977325,"body_markdown":"&gt;![Output Response in swagger-ui](https://i.stack.imgur.com/QYhlF.png)\r\n\r\n    if (searchFilter.getSortType() == SortType.asc) {\r\n\t\t  orderList.add(builder.asc(root.get(&quot;count&quot;)));\r\n\t   } else {\r\n\t\t orderList.add(builder.desc(root.get(&quot;count&quot;)));\r\n    }\r\n\r\nI want the JSON output response as per the count based output. I need to do aggregate function during run time. \r\n\r\nIn the above program I passed `root.get(&quot;count&quot;);` Here instead of count I need to pass any one of the aggregate function like `sum, avg,min,max, count` like that.\r\n\r\nHow I can pass run time aggregate function using `hibernate Tuple` criteria restriction?","title":"How to do the count operation using tuple criteria restriction during run time i got 412 error code","body":"<blockquote>\n<p><img src=\"https://i.stack.imgur.com/QYhlF.png\" alt=\"Output Response in swagger-ui\" /></p>\n</blockquote>\n<pre><code>if (searchFilter.getSortType() == SortType.asc) {\n      orderList.add(builder.asc(root.get(&quot;count&quot;)));\n   } else {\n     orderList.add(builder.desc(root.get(&quot;count&quot;)));\n}\n</code></pre>\n<p>I want the JSON output response as per the count based output. I need to do aggregate function during run time.</p>\n<p>In the above program I passed <code>root.get(&quot;count&quot;);</code> Here instead of count I need to pass any one of the aggregate function like <code>sum, avg,min,max, count</code> like that.</p>\n<p>How I can pass run time aggregate function using <code>hibernate Tuple</code> criteria restriction?</p>\n"},{"tags":["java","xml","xsd","xml-validation"],"owner":{"account_id":28105872,"reputation":3,"user_id":21474470,"display_name":"Abdellah Badaoui"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1681123365,"answer_count":0,"score":0,"last_activity_date":1681162715,"creation_date":1681121220,"question_id":75976133,"body_markdown":"I made an XML document and queried it using xpath.\r\nHere&#39;s a snippet of the XML doc.  The entire thing is pretty long.\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;ligue name=&quot;Premier League&quot; id=&quot;P_L&quot;\r\nxmlns=&quot;https://www.w3schools.com&quot; \r\nxmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; \r\nxsi:schemaLocation=&quot;https://www.w3schools.com ligue.xsd&quot;\r\n&gt;\r\n    &lt;equipe name=&#39;Arsenal&#39;&gt;&lt;!-- DONE--&gt;\r\n        &lt;manager&gt;\r\n            &lt;nom&gt;Arteta&lt;/nom&gt;\r\n            &lt;prenom&gt;Mikel&lt;/prenom&gt;\r\n            &lt;date_de_debut&gt;2019-12-20&lt;/date_de_debut&gt;\r\n            &lt;date_de_naissance&gt;1982-03-26&lt;/date_de_naissance&gt;\r\n            &lt;salaire&gt;8300000&lt;/salaire&gt;\r\n        &lt;/manager&gt;\r\n```\r\nHere&#39;s my Java program made to execute one simple xpath expression.\r\n\r\n```\r\npublic static void main(String[] args) throws ParserConfigurationException, SAXException, IOException, XPathExpressionException {\r\n    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();\r\n\tfactory.setNamespaceAware(true);\r\n\tDocumentBuilder builder = factory.newDocumentBuilder();\r\n\tDocument doc = builder.parse(&quot;ligue.xml&quot;);\r\n    XPathFactory xpathfactory = XPathFactory.newInstance();\r\n\tXPath xpath = xpathfactory.newXPath();\r\n    XPathExpression expr=xpath.compile(&quot;/ligue/equipe[@name=&#39;Arsenal&#39;]/manager/nom/text()&quot;);\r\n    NodeList result=(NodeList) expr.evaluate(doc,XPathConstants.NODESET);\r\n    System.out.println(&quot;length is &quot;+result.getLength());\r\n    for (int i = 0; i &lt; result.getLength(); i++) {\r\n        System.out.println(result.item(i).getNodeValue());\r\n        }\r\n        \r\n    }\r\n```\r\nWhen I run the Java program it doesn&#39;t give me the name of the manager which is Arteta.\r\nHowever if I unbind the XML document to the xsd by removing:\r\n`xmlns=&quot;https://www.w3schools.com&quot; \r\nxmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; \r\nxsi:schemaLocation=&quot;https://www.w3schools.com ligue.xsd&quot;`\r\nIt runs correctly.\r\nI read online about namespaces and how it is causing the error.  I tried using a prefix which I then added in the xpath expression and nothing changed.\r\nAny help will be duly appreciated.\r\n","title":"When I bind my xml file to an xsd the xpath expression is not evaluated","body":"<p>I made an XML document and queried it using xpath.\nHere's a snippet of the XML doc.  The entire thing is pretty long.</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;ligue name=&quot;Premier League&quot; id=&quot;P_L&quot;\nxmlns=&quot;https://www.w3schools.com&quot; \nxmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; \nxsi:schemaLocation=&quot;https://www.w3schools.com ligue.xsd&quot;\n&gt;\n    &lt;equipe name='Arsenal'&gt;&lt;!-- DONE--&gt;\n        &lt;manager&gt;\n            &lt;nom&gt;Arteta&lt;/nom&gt;\n            &lt;prenom&gt;Mikel&lt;/prenom&gt;\n            &lt;date_de_debut&gt;2019-12-20&lt;/date_de_debut&gt;\n            &lt;date_de_naissance&gt;1982-03-26&lt;/date_de_naissance&gt;\n            &lt;salaire&gt;8300000&lt;/salaire&gt;\n        &lt;/manager&gt;\n</code></pre>\n<p>Here's my Java program made to execute one simple xpath expression.</p>\n<pre><code>public static void main(String[] args) throws ParserConfigurationException, SAXException, IOException, XPathExpressionException {\n    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();\n    factory.setNamespaceAware(true);\n    DocumentBuilder builder = factory.newDocumentBuilder();\n    Document doc = builder.parse(&quot;ligue.xml&quot;);\n    XPathFactory xpathfactory = XPathFactory.newInstance();\n    XPath xpath = xpathfactory.newXPath();\n    XPathExpression expr=xpath.compile(&quot;/ligue/equipe[@name='Arsenal']/manager/nom/text()&quot;);\n    NodeList result=(NodeList) expr.evaluate(doc,XPathConstants.NODESET);\n    System.out.println(&quot;length is &quot;+result.getLength());\n    for (int i = 0; i &lt; result.getLength(); i++) {\n        System.out.println(result.item(i).getNodeValue());\n        }\n        \n    }\n</code></pre>\n<p>When I run the Java program it doesn't give me the name of the manager which is Arteta.\nHowever if I unbind the XML document to the xsd by removing:\n<code>xmlns=&quot;https://www.w3schools.com&quot;  xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;  xsi:schemaLocation=&quot;https://www.w3schools.com ligue.xsd&quot;</code>\nIt runs correctly.\nI read online about namespaces and how it is causing the error.  I tried using a prefix which I then added in the xpath expression and nothing changed.\nAny help will be duly appreciated.</p>\n"},{"tags":["java","spring","spring-boot","spring-security"],"comments":[{"owner":{"account_id":2064278,"reputation":13138,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1681090778,"post_id":75972818,"comment_id":133998008,"body_markdown":"try moving the `filterChain.doFilter(request, response);` above the response.setStatus code.","body":"try moving the <code>filterChain.doFilter(request, response);</code> above the response.setStatus code."},{"owner":{"account_id":13443994,"reputation":354,"user_id":9700478,"display_name":"GeekOverdose"},"score":0,"creation_date":1681120508,"post_id":75972818,"comment_id":134001250,"body_markdown":"If i do that, the `response.setStatus()` code does nothing. It runs but it doesn&#39;t actually change the response in any way.","body":"If i do that, the <code>response.setStatus()</code> code does nothing. It runs but it doesn&#39;t actually change the response in any way."}],"answers":[{"tags":[],"owner":{"account_id":13443994,"reputation":354,"user_id":9700478,"display_name":"GeekOverdose"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1681162697,"creation_date":1681162697,"answer_id":75980934,"question_id":75972818,"body_markdown":"After fiddling around, I found this solution. I&#39;m not sure if it is a proper way of doing this, but it works for me\r\n\r\nI create a new `CookieAuthenticationEntryPoint`:\r\n```java\r\n@Component\r\npublic class CookieAuthenticationEntryPoint implements AuthenticationEntryPoint {\r\n    public static String COOKIE_AUTH_ERROR_REQUEST_ATTR_KEY = &quot;CookieAuthenticationError&quot;;\r\n\r\n    private final ObjectMapper objectMapper;\r\n\r\n    public CookieAuthenticationEntryPoint(ObjectMapper objectMapper) {\r\n        this.objectMapper = objectMapper;\r\n    }\r\n\r\n    @Override\r\n    public void commence(\r\n            HttpServletRequest request,\r\n            HttpServletResponse response,\r\n            AuthenticationException authException) throws IOException, ServletException {\r\n        // Handle cookie authentication errors if they exist\r\n        Exception cookieAuthException;\r\n        if ((cookieAuthException = (Exception) request.getAttribute(COOKIE_AUTH_ERROR_REQUEST_ATTR_KEY)) != null) {\r\n            // Set appropriate status code and content type\r\n            response.setStatus(HttpServletResponse.SC_UNAUTHORIZED);\r\n            response.setHeader(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE);\r\n\r\n            // Write error message to response body\r\n            objectMapper.writeValue(response.getOutputStream(),\r\n                    Map.of(\r\n                            &quot;code&quot;, HttpServletResponse.SC_UNAUTHORIZED,\r\n                            &quot;message&quot;, cookieAuthException.getMessage()\r\n                    ));\r\n\r\n            // Exit method early\r\n            return;\r\n        }\r\n\r\n        // Default behavior for all other cases\r\n        response.setStatus(HttpServletResponse.SC_FORBIDDEN);\r\n    }\r\n}\r\n```\r\n\r\nWhat it does is, it checks if there is an exception to be handled that is stored in the request attributes. If there is, it does the logic that I wrote in the `CookieAuthenticationFilter` originally. \r\n\r\nThat section of the `CookieAuthenticationFilter` is refactored to this:\r\n```java\r\n...\r\n        } catch (CustomAuthException e) {\r\n            // Set error as request attribute\r\n            request.setAttribute(CookieAuthenticationEntryPoint.COOKIE_AUTH_ERROR_REQUEST_ATTR_KEY, e);\r\n\r\n            // Run the rest of the filters\r\n            filterChain.doFilter(request, response); return;\r\n        }\r\n...\r\n```\r\n\r\nWhat that does is writes the `CustomException` to the request attributes, which will be picked up later by `CookieAuthenticationEntryPoint`.\r\n\r\nFinally I just needed to register `CookieAuthenticationEntryPoint` in the `SecurityConfig`, like this:\r\n\r\n```java\r\n...\r\n                .exceptionHandling(e -&gt; e.authenticationEntryPoint(cookieAuthenticationEntryPoint));\r\n...\r\n```\r\n\r\nI know that this is very tight coupling and using string values and all that might be a bad idea, but it works. If anyone knows of any other way, let me know","title":"Setting a response status triggers an AccessDeniedException","body":"<p>After fiddling around, I found this solution. I'm not sure if it is a proper way of doing this, but it works for me</p>\n<p>I create a new <code>CookieAuthenticationEntryPoint</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\npublic class CookieAuthenticationEntryPoint implements AuthenticationEntryPoint {\n    public static String COOKIE_AUTH_ERROR_REQUEST_ATTR_KEY = &quot;CookieAuthenticationError&quot;;\n\n    private final ObjectMapper objectMapper;\n\n    public CookieAuthenticationEntryPoint(ObjectMapper objectMapper) {\n        this.objectMapper = objectMapper;\n    }\n\n    @Override\n    public void commence(\n            HttpServletRequest request,\n            HttpServletResponse response,\n            AuthenticationException authException) throws IOException, ServletException {\n        // Handle cookie authentication errors if they exist\n        Exception cookieAuthException;\n        if ((cookieAuthException = (Exception) request.getAttribute(COOKIE_AUTH_ERROR_REQUEST_ATTR_KEY)) != null) {\n            // Set appropriate status code and content type\n            response.setStatus(HttpServletResponse.SC_UNAUTHORIZED);\n            response.setHeader(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE);\n\n            // Write error message to response body\n            objectMapper.writeValue(response.getOutputStream(),\n                    Map.of(\n                            &quot;code&quot;, HttpServletResponse.SC_UNAUTHORIZED,\n                            &quot;message&quot;, cookieAuthException.getMessage()\n                    ));\n\n            // Exit method early\n            return;\n        }\n\n        // Default behavior for all other cases\n        response.setStatus(HttpServletResponse.SC_FORBIDDEN);\n    }\n}\n</code></pre>\n<p>What it does is, it checks if there is an exception to be handled that is stored in the request attributes. If there is, it does the logic that I wrote in the <code>CookieAuthenticationFilter</code> originally.</p>\n<p>That section of the <code>CookieAuthenticationFilter</code> is refactored to this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>...\n        } catch (CustomAuthException e) {\n            // Set error as request attribute\n            request.setAttribute(CookieAuthenticationEntryPoint.COOKIE_AUTH_ERROR_REQUEST_ATTR_KEY, e);\n\n            // Run the rest of the filters\n            filterChain.doFilter(request, response); return;\n        }\n...\n</code></pre>\n<p>What that does is writes the <code>CustomException</code> to the request attributes, which will be picked up later by <code>CookieAuthenticationEntryPoint</code>.</p>\n<p>Finally I just needed to register <code>CookieAuthenticationEntryPoint</code> in the <code>SecurityConfig</code>, like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>...\n                .exceptionHandling(e -&gt; e.authenticationEntryPoint(cookieAuthenticationEntryPoint));\n...\n</code></pre>\n<p>I know that this is very tight coupling and using string values and all that might be a bad idea, but it works. If anyone knows of any other way, let me know</p>\n"}],"owner":{"account_id":13443994,"reputation":354,"user_id":9700478,"display_name":"GeekOverdose"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":355,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75980934,"answer_count":1,"score":1,"last_activity_date":1681162697,"creation_date":1681073519,"question_id":75972818,"body_markdown":"This is a dummy project so some of the code will be example code.\r\n\r\nHere is my Spring Boot security config:\r\n```java\r\n@Configuration\r\n@EnableWebSecurity\r\npublic class SecurityConfig {\r\n\r\n    private final CookieAuthenticationFilter cookieAuthenticationFilter;\r\n\r\n    public SecurityConfig(CookieAuthenticationFilter customFilter) {\r\n        this.cookieAuthenticationFilter = customFilter;\r\n    }\r\n\r\n    @Bean\r\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\r\n        http\r\n                .cors(AbstractHttpConfigurer::disable)\r\n                .csrf(AbstractHttpConfigurer::disable)\r\n                .sessionManagement(\r\n                        s -&gt; s.sessionCreationPolicy(SessionCreationPolicy.STATELESS)\r\n                )\r\n                .authorizeHttpRequests(\r\n                        a -&gt; a\r\n                                .requestMatchers(&quot;/un/**&quot;).permitAll()\r\n                                .anyRequest().authenticated()\r\n                )\r\n\r\n                .addFilterBefore(cookieAuthenticationFilter, BasicAuthenticationFilter.class);\r\n        return http.build();\r\n    }\r\n}\r\n\r\n```\r\n\r\nI have written `CookieAuthenticationFilter` for handling authentication by a cookie token. However, whenever I try to add in `response.setStatus()` within this filter, and then ping `/test` it causes the `AccessDenied` error to be unhandled.\r\n\r\n```\r\nServlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Unable to handle the Spring Security Exception because the response is already committed.] with root cause\r\n\r\norg.springframework.security.access.AccessDeniedException: Access Denied\r\n(rest of the stack trace not shown)\r\n```\r\n\r\nHere is the `CookieAuthenticationFilter` code:\r\n\r\n```java\r\n@Component\r\npublic class CookieAuthenticationFilter extends OncePerRequestFilter {\r\n    private final AuthService authService;\r\n    private final ObjectMapper objectMapper;\r\n\r\n    public CookieAuthenticationFilter(\r\n            AuthService authService,\r\n            ObjectMapper objectMapper) {\r\n        this.authService = authService;\r\n        this.objectMapper = objectMapper;\r\n    }\r\n\r\n    @Override\r\n    protected void doFilterInternal(\r\n            HttpServletRequest request,\r\n            HttpServletResponse response,\r\n            FilterChain filterChain) throws ServletException, IOException {\r\n//        (code that extracts the auth cookie from the request object)\r\n\r\n        // Fetch user associated with the token\r\n        UserDto user = null;\r\n        try {\r\n            user = authService.getUserFromAuthenticationToken(\r\n                    new AuthenticationTokenValueDto(authCookie.getValue())\r\n            );\r\n        } catch (CustomAuthException e) {\r\n            // Map exception to request\r\n            response.setStatus(HttpServletResponse.SC_UNAUTHORIZED);\r\n            response.setHeader(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE);\r\n            objectMapper.writeValue(response.getOutputStream(), CustomAuthException.MESSAGE);\r\n\r\n            // Exit function\r\n            filterChain.doFilter(request, response); return;\r\n        }\r\n\r\n        // Add authentication to context\r\n        Authentication authentication = new PreAuthenticatedAuthenticationToken(\r\n                user,\r\n                authCookie.getValue(),\r\n                List.of()\r\n        );\r\n        SecurityContextHolder.getContext().setAuthentication(authentication);\r\n\r\n        // Run the rest of the filters\r\n        filterChain.doFilter(request, response);\r\n    }\r\n}\r\n```\r\n\r\nWhenever I remove the `response.setStatus()` and `objectMapper.writeValue()` lines from the code, it causes no errors. I debugged and figured out that in both cases the error `AccessDenied` is thrown, but it is not handled by Spring when I set the response status. I checked and its because `ExceptionTranslationFilter` throws a `ServletException` whenever `response.commited()` is true. And its true after running the `response.setStatus()` and `objectMapper.writeValue()` lines.\r\n\r\nSo how do I avoid triggering this error, while still being able to write custom error messages to the response body and setting response codes, in the cookie filter? Do I need to delegate error handling to another component? Do I need to turn off `ExceptionTranslationFilter` somehow?","title":"Setting a response status triggers an AccessDeniedException","body":"<p>This is a dummy project so some of the code will be example code.</p>\n<p>Here is my Spring Boot security config:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableWebSecurity\npublic class SecurityConfig {\n\n    private final CookieAuthenticationFilter cookieAuthenticationFilter;\n\n    public SecurityConfig(CookieAuthenticationFilter customFilter) {\n        this.cookieAuthenticationFilter = customFilter;\n    }\n\n    @Bean\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n        http\n                .cors(AbstractHttpConfigurer::disable)\n                .csrf(AbstractHttpConfigurer::disable)\n                .sessionManagement(\n                        s -&gt; s.sessionCreationPolicy(SessionCreationPolicy.STATELESS)\n                )\n                .authorizeHttpRequests(\n                        a -&gt; a\n                                .requestMatchers(&quot;/un/**&quot;).permitAll()\n                                .anyRequest().authenticated()\n                )\n\n                .addFilterBefore(cookieAuthenticationFilter, BasicAuthenticationFilter.class);\n        return http.build();\n    }\n}\n\n</code></pre>\n<p>I have written <code>CookieAuthenticationFilter</code> for handling authentication by a cookie token. However, whenever I try to add in <code>response.setStatus()</code> within this filter, and then ping <code>/test</code> it causes the <code>AccessDenied</code> error to be unhandled.</p>\n<pre><code>Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Unable to handle the Spring Security Exception because the response is already committed.] with root cause\n\norg.springframework.security.access.AccessDeniedException: Access Denied\n(rest of the stack trace not shown)\n</code></pre>\n<p>Here is the <code>CookieAuthenticationFilter</code> code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\npublic class CookieAuthenticationFilter extends OncePerRequestFilter {\n    private final AuthService authService;\n    private final ObjectMapper objectMapper;\n\n    public CookieAuthenticationFilter(\n            AuthService authService,\n            ObjectMapper objectMapper) {\n        this.authService = authService;\n        this.objectMapper = objectMapper;\n    }\n\n    @Override\n    protected void doFilterInternal(\n            HttpServletRequest request,\n            HttpServletResponse response,\n            FilterChain filterChain) throws ServletException, IOException {\n//        (code that extracts the auth cookie from the request object)\n\n        // Fetch user associated with the token\n        UserDto user = null;\n        try {\n            user = authService.getUserFromAuthenticationToken(\n                    new AuthenticationTokenValueDto(authCookie.getValue())\n            );\n        } catch (CustomAuthException e) {\n            // Map exception to request\n            response.setStatus(HttpServletResponse.SC_UNAUTHORIZED);\n            response.setHeader(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE);\n            objectMapper.writeValue(response.getOutputStream(), CustomAuthException.MESSAGE);\n\n            // Exit function\n            filterChain.doFilter(request, response); return;\n        }\n\n        // Add authentication to context\n        Authentication authentication = new PreAuthenticatedAuthenticationToken(\n                user,\n                authCookie.getValue(),\n                List.of()\n        );\n        SecurityContextHolder.getContext().setAuthentication(authentication);\n\n        // Run the rest of the filters\n        filterChain.doFilter(request, response);\n    }\n}\n</code></pre>\n<p>Whenever I remove the <code>response.setStatus()</code> and <code>objectMapper.writeValue()</code> lines from the code, it causes no errors. I debugged and figured out that in both cases the error <code>AccessDenied</code> is thrown, but it is not handled by Spring when I set the response status. I checked and its because <code>ExceptionTranslationFilter</code> throws a <code>ServletException</code> whenever <code>response.commited()</code> is true. And its true after running the <code>response.setStatus()</code> and <code>objectMapper.writeValue()</code> lines.</p>\n<p>So how do I avoid triggering this error, while still being able to write custom error messages to the response body and setting response codes, in the cookie filter? Do I need to delegate error handling to another component? Do I need to turn off <code>ExceptionTranslationFilter</code> somehow?</p>\n"},{"tags":["java","unicode","java-stream","ansi"],"comments":[{"owner":{"account_id":2792262,"reputation":163877,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"score":1,"creation_date":1492636825,"post_id":43506195,"comment_id":74067281,"body_markdown":"Readers and Writers present to their clients as streams of *characters*, whereas InputStreams and OutputStreams present as streams of *bytes*.  As a practical matter, then, the former can (and must) handle character encoding internally, whereas the latter require the user to handle such issues.  As a design principle, when the data you are dealing with are fundamentally textual (i.e. characters) the former provide the more appropriate abstraction.","body":"Readers and Writers present to their clients as streams of <i>characters</i>, whereas InputStreams and OutputStreams present as streams of <i>bytes</i>.  As a practical matter, then, the former can (and must) handle character encoding internally, whereas the latter require the user to handle such issues.  As a design principle, when the data you are dealing with are fundamentally textual (i.e. characters) the former provide the more appropriate abstraction."},{"owner":{"account_id":1079173,"reputation":42590,"user_id":1076640,"display_name":"yshavit"},"score":2,"creation_date":1492636839,"post_id":43506195,"comment_id":74067287,"body_markdown":"This is probably too broad for stack overflow, but there&#39;s a really good writeup [here](https://www.joelonsoftware.com/2003/10/08/the-absolute-minimum-every-software-developer-absolutely-positively-must-know-about-unicode-and-character-sets-no-excuses/) on the difference between a byte stream and a character stream, and why there are different encodings.","body":"This is probably too broad for stack overflow, but there&#39;s a really good writeup <a href=\"https://www.joelonsoftware.com/2003/10/08/the-absolute-minimum-every-software-developer-absolutely-positively-must-know-about-unicode-and-character-sets-no-excuses/\" rel=\"nofollow noreferrer\">here</a> on the difference between a byte stream and a character stream, and why there are different encodings."},{"owner":{"account_id":134590,"reputation":26825,"user_id":336827,"accept_rate":61,"display_name":"freedev"},"score":0,"creation_date":1492637163,"post_id":43506195,"comment_id":74067425,"body_markdown":"@yshavit thanks for sharing this.","body":"@yshavit thanks for sharing this."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1492639045,"post_id":43506195,"comment_id":74068227,"body_markdown":"ANSI? Do you mean *ASCII?*","body":"ANSI? Do you mean <i>ASCII?</i>"}],"answers":[{"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1492681837,"post_id":43506516,"comment_id":74085169,"body_markdown":"Internally they are [UTF-16](http://docs.oracle.com/javase/specs/jls/se8/html/jls-3.html#jls-3.10.4). Binary data does not *have* a charset, and that is not a &#39;defect of binary data&#39;.","body":"Internally they are <a href=\"http://docs.oracle.com/javase/specs/jls/se8/html/jls-3.html#jls-3.10.4\" rel=\"nofollow noreferrer\">UTF-16</a>. Binary data does not <i>have</i> a charset, and that is not a &#39;defect of binary data&#39;."},{"owner":{"account_id":25589,"reputation":562161,"user_id":65863,"accept_rate":75,"display_name":"Remy Lebeau"},"score":1,"creation_date":1492713314,"post_id":43506516,"comment_id":74107793,"body_markdown":"@EJP: In Java 9, Java strings may internally be ISO-8859-1 instead (see [JEP 254](http://openjdk.java.net/jeps/254)), if it is more compact in memory than UTF-16 without losing any data. But the public interface would still have to represent UTF-16 for backwards compatibility, so for *all intents and purposes* treat Java strings as UTF-16 regardless of internal representation.","body":"@EJP: In Java 9, Java strings may internally be ISO-8859-1 instead (see <a href=\"http://openjdk.java.net/jeps/254\" rel=\"nofollow noreferrer\">JEP 254</a>), if it is more compact in memory than UTF-16 without losing any data. But the public interface would still have to represent UTF-16 for backwards compatibility, so for <i>all intents and purposes</i> treat Java strings as UTF-16 regardless of internal representation."},{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":0,"creation_date":1492802675,"post_id":43506516,"comment_id":74153338,"body_markdown":"@RemyLebeau I already forgot that. Thanks. But the claim remains &quot;all Unicode is possible&quot;. ISO-8859-1 is one of the always provided Charsets: StandardCharset.ISO_8859_1. It is a limited Latin-1. It is a valuable but corner-case optimisation. At that time in history UTF-16 chars were thought to cover all feasible characters. Nowadays a UTF-16 char might be considered obsolete; one should consider processing _code points_ instead. So yes alternative encodings merit.","body":"@RemyLebeau I already forgot that. Thanks. But the claim remains &quot;all Unicode is possible&quot;. ISO-8859-1 is one of the always provided Charsets: StandardCharset.ISO_8859_1. It is a limited Latin-1. It is a valuable but corner-case optimisation. At that time in history UTF-16 chars were thought to cover all feasible characters. Nowadays a UTF-16 char might be considered obsolete; one should consider processing <i>code points</i> instead. So yes alternative encodings merit."},{"owner":{"account_id":25589,"reputation":562161,"user_id":65863,"accept_rate":75,"display_name":"Remy Lebeau"},"score":0,"creation_date":1492804809,"post_id":43506516,"comment_id":74154315,"body_markdown":"@JoopEggen: &quot;*At that time in history UTF-16 chars were thought to cover all feasible characters.*&quot; - a small correction, UCS-2, not UTF-16.","body":"@JoopEggen: &quot;<i>At that time in history UTF-16 chars were thought to cover all feasible characters.</i>&quot; - a small correction, UCS-2, not UTF-16."},{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":0,"creation_date":1492806365,"post_id":43506516,"comment_id":74155091,"body_markdown":"@RemyLebeau yes, that would be the better term, I know one or an other database still uses UCS-2. _(I&#39;ll write my memoires in EBCDIC.)_","body":"@RemyLebeau yes, that would be the better term, I know one or an other database still uses UCS-2. <i>(I&#39;ll write my memoires in EBCDIC.)</i>"}],"tags":[],"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"comment_count":5,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1492637801,"creation_date":1492637801,"answer_id":43506516,"question_id":43506195,"body_markdown":"When java was designed it was decided to hold **text** inside java as Unicode, so all scripts, say Greek and Korean might be combined.\r\n\r\nUnicode is a numbering of all symbols (_code points_), and can be coded by UTF-8 (multi-byte, most compact in general), UTF-16 LE/BE (2 bytes) or even UTF-32.\r\n\r\nSo internally `String` constants in a .class are in UTF-8. The type `char` is 2 bytes for UTF-16. And String holds an array of `char`.\r\n\r\n**Binary data**, like `byte[]` or `InputStream/OutputStream` could be text. But to interprete it as _text_ one needs to know the encoding/charset of those bytes. Hence there always is a conversion of bytes and some charset of those bytes to the internal Unicode (UTF-16).\r\n\r\nTo answer the question, _it is unavoidable to somehow provide the charset of the binary data._ That is a defect of binary data.\r\n\r\nWhen one reaches `String, char, Reader, Writer` one already operates entirely on Unicode text.\r\n\r\nBridging classes are `InputStreamReader, OutputStreamWriter` and `Files` provides some nice utility functions.\r\n\r\nCompare this situation with C, where unsigned char might be the same as a byte (or not), and a wide char might be usable or not. Java did this better than some languages. However a Java programmer with C/C++ background should never ever use `String` or `char[]` for binary data: double memory, non-undoable and corrupting conversion. Rather `byte[], ByteArrayOutputStream, ByteBuffer`.","title":"Why do ANSI and UNICODE make it difficult to read and write texts using streams?","body":"<p>When java was designed it was decided to hold <strong>text</strong> inside java as Unicode, so all scripts, say Greek and Korean might be combined.</p>\n\n<p>Unicode is a numbering of all symbols (<em>code points</em>), and can be coded by UTF-8 (multi-byte, most compact in general), UTF-16 LE/BE (2 bytes) or even UTF-32.</p>\n\n<p>So internally <code>String</code> constants in a .class are in UTF-8. The type <code>char</code> is 2 bytes for UTF-16. And String holds an array of <code>char</code>.</p>\n\n<p><strong>Binary data</strong>, like <code>byte[]</code> or <code>InputStream/OutputStream</code> could be text. But to interprete it as <em>text</em> one needs to know the encoding/charset of those bytes. Hence there always is a conversion of bytes and some charset of those bytes to the internal Unicode (UTF-16).</p>\n\n<p>To answer the question, <em>it is unavoidable to somehow provide the charset of the binary data.</em> That is a defect of binary data.</p>\n\n<p>When one reaches <code>String, char, Reader, Writer</code> one already operates entirely on Unicode text.</p>\n\n<p>Bridging classes are <code>InputStreamReader, OutputStreamWriter</code> and <code>Files</code> provides some nice utility functions.</p>\n\n<p>Compare this situation with C, where unsigned char might be the same as a byte (or not), and a wide char might be usable or not. Java did this better than some languages. However a Java programmer with C/C++ background should never ever use <code>String</code> or <code>char[]</code> for binary data: double memory, non-undoable and corrupting conversion. Rather <code>byte[], ByteArrayOutputStream, ByteBuffer</code>.</p>\n"}],"owner":{"account_id":10715573,"reputation":9,"user_id":7886365,"display_name":"Judi"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1063,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1681162662,"creation_date":1492636487,"question_id":43506195,"body_markdown":"I&#39;ve learned that Reader and Writer in java are better for reading and writing information from text resource, and Reader/Writer are character-based while streams are byte-based. \r\nHowever I&#39;ve come across a source that said &quot;some texts are coded by ANSI oder Unicode. ANSI requires code conversion and Unicode can be coded in different formats like UFT-8 or UFT-16. Therefore Reader/Writer are better&quot;.  \r\n\r\nDo these code conversion and different formats have anything to do with text resource? Hence, what can Reader and Writer do that makes them better than streams at dealing with texts?","title":"Why do ANSI and UNICODE make it difficult to read and write texts using streams?","body":"<p>I've learned that Reader and Writer in java are better for reading and writing information from text resource, and Reader/Writer are character-based while streams are byte-based. \nHowever I've come across a source that said \"some texts are coded by ANSI oder Unicode. ANSI requires code conversion and Unicode can be coded in different formats like UFT-8 or UFT-16. Therefore Reader/Writer are better\".  </p>\n\n<p>Do these code conversion and different formats have anything to do with text resource? Hence, what can Reader and Writer do that makes them better than streams at dealing with texts?</p>\n"},{"tags":["java","spring","spring-mvc","spring-boot"],"comments":[{"owner":{"account_id":12236729,"reputation":440,"user_id":8930916,"display_name":"Chetan Oswal"},"score":0,"creation_date":1590328500,"post_id":31082981,"comment_id":109633495,"body_markdown":"Hi @riship89... I have implemented `HandlerInterceptor` successfully. It is working fine. Only the problem is, some `internal HandlerInterceptor` throws an exception before it is handled by the `custom HandlerInterceptor`. The `afterCompletion()` method which is overridden is called after the error is thrown by the internal implementation of HandlerInterceptor. Do you have solution for this?","body":"Hi @riship89... I have implemented <code>HandlerInterceptor</code> successfully. It is working fine. Only the problem is, some <code>internal HandlerInterceptor</code> throws an exception before it is handled by the <code>custom HandlerInterceptor</code>. The <code>afterCompletion()</code> method which is overridden is called after the error is thrown by the internal implementation of HandlerInterceptor. Do you have solution for this?"},{"owner":{"account_id":418082,"reputation":5911,"user_id":2090887,"accept_rate":87,"display_name":"Nilanchala"},"score":0,"creation_date":1691363046,"post_id":31082981,"comment_id":135477495,"body_markdown":"For future readers, here is the awesome video tutorial that explains how Spring interceptor works https://www.youtube.com/watch?v=DuMf8Nwb-9w","body":"For future readers, here is the awesome video tutorial that explains how Spring interceptor works <a href=\"https://www.youtube.com/watch?v=DuMf8Nwb-9w\" rel=\"nofollow noreferrer\">youtube.com/watch?v=DuMf8Nwb-9w</a>"}],"answers":[{"comments":[{"owner":{"account_id":891554,"reputation":8848,"user_id":929701,"accept_rate":79,"display_name":"hrishikeshp19"},"score":0,"creation_date":1435359365,"post_id":31083263,"comment_id":50184686,"body_markdown":"Nice! Looks good! Any example of what goes inside registry.addInterceptor(...)? Just curious to know a sample of &quot;...&quot;","body":"Nice! Looks good! Any example of what goes inside registry.addInterceptor(...)? Just curious to know a sample of &quot;...&quot;"},{"owner":{"account_id":2615957,"reputation":11395,"user_id":2264997,"display_name":"ikumen"},"score":0,"creation_date":1435360104,"post_id":31083263,"comment_id":50184861,"body_markdown":"nothing special, just add your interceptor to the registry","body":"nothing special, just add your interceptor to the registry"},{"owner":{"account_id":891554,"reputation":8848,"user_id":929701,"accept_rate":79,"display_name":"hrishikeshp19"},"score":0,"creation_date":1453147693,"post_id":31083263,"comment_id":57465586,"body_markdown":"coming back to this, can you post example implementation of &quot;yourInjectedInceptor&quot;?","body":"coming back to this, can you post example implementation of &quot;yourInjectedInceptor&quot;?"},{"owner":{"account_id":1516166,"reputation":646,"user_id":1417125,"accept_rate":100,"display_name":"Paolo Biavati"},"score":12,"creation_date":1456180859,"post_id":31083263,"comment_id":58819054,"body_markdown":"use @Component annotation on yourInjectedInceptor","body":"use @Component annotation on yourInjectedInceptor"},{"owner":{"account_id":1529149,"reputation":770,"user_id":1426813,"display_name":"Vlad Manuel Murean"},"score":1,"creation_date":1459167016,"post_id":31083263,"comment_id":60152029,"body_markdown":"@riship89 Checkout this for an example: http://www.mkyong.com/spring-mvc/spring-mvc-handler-interceptors-example/","body":"@riship89 Checkout this for an example: <a href=\"http://www.mkyong.com/spring-mvc/spring-mvc-handler-interceptors-example/\" rel=\"nofollow noreferrer\">mkyong.com/spring-mvc/spring-mvc-handler-interceptors-exampl&zwnj;&#8203;e</a>"},{"owner":{"account_id":5455735,"reputation":615,"user_id":4348040,"accept_rate":0,"display_name":"Nephthys76"},"score":0,"creation_date":1485378358,"post_id":31083263,"comment_id":70906977,"body_markdown":"I&#39;m hoping for help here... when I use the &quot;myInjectedInterceptor&quot; approach, any property placeholders I have in my interceptor, which are annotated with &quot;@Value&quot; are only getting my configured value if I do NOT declare a default.\n\n@Value(&quot;my.property:defaultValue&quot;) &lt;-- uses default instead of configured value\n\n@Value(&quot;my.property&quot;) &lt;-- uses configured value\n\nAny idea why?","body":"I&#39;m hoping for help here... when I use the &quot;myInjectedInterceptor&quot; approach, any property placeholders I have in my interceptor, which are annotated with &quot;@Value&quot; are only getting my configured value if I do NOT declare a default.  @Value(&quot;my.property:defaultValue&quot;) &lt;-- uses default instead of configured value  @Value(&quot;my.property&quot;) &lt;-- uses configured value  Any idea why?"},{"owner":{"account_id":4821988,"reputation":2025,"user_id":3892439,"accept_rate":55,"display_name":"vigamage"},"score":0,"creation_date":1502553906,"post_id":31083263,"comment_id":78262919,"body_markdown":"Using this way, I get `getReader() has already been called for this request` error. Is that because the request getting deserialized twice? How to overcome that issue","body":"Using this way, I get <code>getReader() has already been called for this request</code> error. Is that because the request getting deserialized twice? How to overcome that issue"},{"owner":{"account_id":296495,"reputation":17580,"user_id":601493,"accept_rate":73,"display_name":"Jan Zyka"},"score":0,"creation_date":1527675766,"post_id":31083263,"comment_id":88213532,"body_markdown":"Beware that this is not silver bullet for all HTTP requests (for example the spring-data-rest ones). If you want ALL do MappedInterceptor and map it to /**","body":"Beware that this is not silver bullet for all HTTP requests (for example the spring-data-rest ones). If you want ALL do MappedInterceptor and map it to /**"},{"owner":{"account_id":2028324,"reputation":10542,"user_id":1812732,"accept_rate":72,"display_name":"John Henckel"},"score":8,"creation_date":1529097756,"post_id":31083263,"comment_id":88767833,"body_markdown":"I get error `The type WebMvcConfigurerAdapter is deprecated`.  I am using Spring Web MVC 5.0.6","body":"I get error <code>The type WebMvcConfigurerAdapter is deprecated</code>.  I am using Spring Web MVC 5.0.6"},{"owner":{"account_id":3883934,"reputation":491,"user_id":3215802,"display_name":"edgraaff"},"score":15,"creation_date":1540279331,"post_id":31083263,"comment_id":92794835,"body_markdown":"In Spring 5, just implement WebMvcConfigurer instead of extending WebMvcConfigurerAdapter. Since Java 8 interfaces allow default implementations, it is no longer required to use the adapter (which is why it&#39;s deprecated).","body":"In Spring 5, just implement WebMvcConfigurer instead of extending WebMvcConfigurerAdapter. Since Java 8 interfaces allow default implementations, it is no longer required to use the adapter (which is why it&#39;s deprecated)."},{"owner":{"account_id":5877017,"reputation":2197,"user_id":4627565,"accept_rate":100,"display_name":"Bionix1441"},"score":0,"creation_date":1592478387,"post_id":31083263,"comment_id":110442821,"body_markdown":"I have one question, I have implemented an Interceptor for my springboot app, and it is not executed, when calling addInterceptor I have added `addPathsPatern(&quot;/**&quot;)` for all paths. My question is does this Interceptor intercept all methods? Thank you","body":"I have one question, I have implemented an Interceptor for my springboot app, and it is not executed, when calling addInterceptor I have added <code>addPathsPatern(&quot;&#47;**&quot;)</code> for all paths. My question is does this Interceptor intercept all methods? Thank you"},{"owner":{"account_id":6717216,"reputation":373,"user_id":5178671,"accept_rate":50,"display_name":"Tejesh Raut"},"score":0,"creation_date":1595588911,"post_id":31083263,"comment_id":111534167,"body_markdown":"This does not intercept requests to inbuilt endpoints such as `/actuator/health`","body":"This does not intercept requests to inbuilt endpoints such as <code>&#47;actuator&#47;health</code>"},{"owner":{"account_id":4271072,"reputation":1056,"user_id":3492866,"accept_rate":78,"display_name":"Arvin_Sebastian"},"score":1,"creation_date":1596455876,"post_id":31083263,"comment_id":111807514,"body_markdown":"thanks for the call out to not add @EnableWebMvc. it was screwing up my spring-boot app","body":"thanks for the call out to not add @EnableWebMvc. it was screwing up my spring-boot app"},{"owner":{"account_id":14546187,"reputation":970,"user_id":10506380,"display_name":"Aditya"},"score":1,"creation_date":1637862636,"post_id":31083263,"comment_id":123944676,"body_markdown":"can you elaborate why @EnableWebMvc causes problem","body":"can you elaborate why @EnableWebMvc causes problem"}],"tags":[],"owner":{"account_id":2615957,"reputation":11395,"user_id":2264997,"display_name":"ikumen"},"comment_count":14,"down_vote_count":1,"up_vote_count":196,"is_accepted":true,"score":195,"last_activity_date":1523973512,"creation_date":1435359097,"answer_id":31083263,"question_id":31082981,"body_markdown":"Since you&#39;re using Spring Boot, I assume you&#39;d prefer to rely on Spring&#39;s auto configuration where possible. To add additional custom configuration like your interceptors, just provide a configuration or bean of `WebMvcConfigurerAdapter`.\r\n\r\nHere&#39;s an example of a config class:\r\n\r\n    @Configuration\r\n    public class WebMvcConfig extends WebMvcConfigurerAdapter {\r\n    \r\n      @Autowired \r\n      HandlerInterceptor yourInjectedInterceptor;\r\n\r\n      @Override\r\n      public void addInterceptors(InterceptorRegistry registry) {\r\n        registry.addInterceptor(...)\r\n        ...\r\n\t\tregistry.addInterceptor(getYourInterceptor()); \r\n\t\tregistry.addInterceptor(yourInjectedInterceptor);\r\n        // next two should be avoid -- tightly coupled and not very testable\r\n\t\tregistry.addInterceptor(new YourInterceptor());\r\n\t\tregistry.addInterceptor(new HandlerInterceptor() {\r\n\t\t\t...\r\n\t\t});\r\n      }\r\n    }\r\n\r\n**NOTE** do not annotate this with @EnableWebMvc, if you want to keep [Spring Boots auto configuration for mvc](http://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#boot-features-spring-mvc-auto-configuration).\r\n","title":"Spring Boot Adding Http Request Interceptors","body":"<p>Since you're using Spring Boot, I assume you'd prefer to rely on Spring's auto configuration where possible. To add additional custom configuration like your interceptors, just provide a configuration or bean of <code>WebMvcConfigurerAdapter</code>.</p>\n\n<p>Here's an example of a config class:</p>\n\n<pre><code>@Configuration\npublic class WebMvcConfig extends WebMvcConfigurerAdapter {\n\n  @Autowired \n  HandlerInterceptor yourInjectedInterceptor;\n\n  @Override\n  public void addInterceptors(InterceptorRegistry registry) {\n    registry.addInterceptor(...)\n    ...\n    registry.addInterceptor(getYourInterceptor()); \n    registry.addInterceptor(yourInjectedInterceptor);\n    // next two should be avoid -- tightly coupled and not very testable\n    registry.addInterceptor(new YourInterceptor());\n    registry.addInterceptor(new HandlerInterceptor() {\n        ...\n    });\n  }\n}\n</code></pre>\n\n<p><strong>NOTE</strong> do not annotate this with @EnableWebMvc, if you want to keep <a href=\"http://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#boot-features-spring-mvc-auto-configuration\" rel=\"noreferrer\">Spring Boots auto configuration for mvc</a>.</p>\n"},{"comments":[{"owner":{"account_id":467572,"reputation":2138,"user_id":873043,"accept_rate":90,"display_name":"Brendon Dugan"},"score":0,"creation_date":1487110591,"post_id":40893461,"comment_id":71633918,"body_markdown":"That looks awesome! I&#39;ve created an issue asking for SpringSandwich to be available in maven central to make it easier to use for projects that are building under CI or which are deploying via Heroku.","body":"That looks awesome! I&#39;ve created an issue asking for SpringSandwich to be available in maven central to make it easier to use for projects that are building under CI or which are deploying via Heroku."},{"owner":{"account_id":2627115,"reputation":1007,"user_id":2273909,"accept_rate":84,"display_name":"Arpan Das"},"score":0,"creation_date":1493057534,"post_id":40893461,"comment_id":74239788,"body_markdown":"Great. Is it available in maven central repository? Re - blogging http://springsandwich.com/ in my website with the reference of your git repository and reference","body":"Great. Is it available in maven central repository? Re - blogging <a href=\"http://springsandwich.com/\" rel=\"nofollow noreferrer\">springsandwich.com</a> in my website with the reference of your git repository and reference"},{"owner":{"account_id":188246,"reputation":10916,"user_id":426877,"accept_rate":77,"display_name":"Magnus"},"score":1,"creation_date":1493214651,"post_id":40893461,"comment_id":74320487,"body_markdown":"SpringSandwich is now in Maven Central","body":"SpringSandwich is now in Maven Central"},{"owner":{"account_id":1237573,"reputation":446,"user_id":1200859,"accept_rate":100,"display_name":"Josh Lemer"},"score":1,"creation_date":1622733924,"post_id":40893461,"comment_id":119882264,"body_markdown":"Looks like this library has been abandonned since 2017","body":"Looks like this library has been abandonned since 2017"}],"tags":[],"owner":{"account_id":188246,"reputation":10916,"user_id":426877,"accept_rate":77,"display_name":"Magnus"},"comment_count":4,"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1556555268,"creation_date":1480523525,"answer_id":40893461,"question_id":31082981,"body_markdown":"You might also consider using the open source SpringSandwich library which lets you directly annotate in your Spring Boot controllers which interceptors to apply, much in the same way you annotate your url routes.\r\n\r\nThat way, no typo-prone Strings floating around -- SpringSandwich&#39;s method and class annotations easily survive refactoring and make it clear what&#39;s being applied where. (Disclosure: I&#39;m the author).\r\n\r\nhttp://springsandwich.com/\r\n","title":"Spring Boot Adding Http Request Interceptors","body":"<p>You might also consider using the open source SpringSandwich library which lets you directly annotate in your Spring Boot controllers which interceptors to apply, much in the same way you annotate your url routes.</p>\n\n<p>That way, no typo-prone Strings floating around -- SpringSandwich's method and class annotations easily survive refactoring and make it clear what's being applied where. (Disclosure: I'm the author).</p>\n\n<p><a href=\"http://springsandwich.com/\" rel=\"nofollow noreferrer\">http://springsandwich.com/</a></p>\n"},{"comments":[{"owner":{"account_id":4821988,"reputation":2025,"user_id":3892439,"accept_rate":55,"display_name":"vigamage"},"score":1,"creation_date":1502552877,"post_id":42113069,"comment_id":78262594,"body_markdown":"I have followed this way to intercept the signup requests come to my application in order to do some common validations. But the problem is i get the `getReader() has already been called for this request` error. Is there any simpler way to get over this without using a copy of the actual request ?","body":"I have followed this way to intercept the signup requests come to my application in order to do some common validations. But the problem is i get the <code>getReader() has already been called for this request</code> error. Is there any simpler way to get over this without using a copy of the actual request ?"},{"owner":{"account_id":3523024,"reputation":83,"user_id":2944833,"display_name":"Hima"},"score":0,"creation_date":1534605300,"post_id":42113069,"comment_id":90770086,"body_markdown":"When the pre-handler is called, the request body is not available, but only parameters, To do validation on the request body, the prefered way will be to use Aspect J and create `Advice`","body":"When the pre-handler is called, the request body is not available, but only parameters, To do validation on the request body, the prefered way will be to use Aspect J and create <code>Advice</code>"}],"tags":[],"owner":{"account_id":2594836,"reputation":1498,"user_id":2248761,"accept_rate":0,"display_name":"sunitha"},"comment_count":2,"down_vote_count":0,"up_vote_count":50,"is_accepted":false,"score":50,"last_activity_date":1487840130,"creation_date":1486556690,"answer_id":42113069,"question_id":31082981,"body_markdown":"To add interceptor to a spring boot application, do the following\r\n\r\n1. Create an interceptor class\r\n\r\n        public class MyCustomInterceptor implements HandlerInterceptor{\r\n\r\n            //unimplemented methods comes here. Define the following method so that it     \r\n            //will handle the request before it is passed to the controller.\r\n\r\n            @Override\r\n            public boolean preHandle(HttpServletRequest request,HttpServletResponse  response){\r\n            //your custom logic here.\r\n                return true;\r\n            }\r\n        }\r\n\r\n2. Define a configuration class\r\n\r\n\r\n        @Configuration\r\n        public class MyConfig extends WebMvcConfigurerAdapter{\r\n            @Override\r\n            public void addInterceptors(InterceptorRegistry registry){\r\n                registry.addInterceptor(new MyCustomInterceptor()).addPathPatterns(&quot;/**&quot;);\r\n            }\r\n        }\r\n\r\n3. Thats it. Now all your requests will pass through the logic defined under preHandle() method of MyCustomInterceptor.","title":"Spring Boot Adding Http Request Interceptors","body":"<p>To add interceptor to a spring boot application, do the following</p>\n\n<ol>\n<li><p>Create an interceptor class</p>\n\n<pre><code>public class MyCustomInterceptor implements HandlerInterceptor{\n\n    //unimplemented methods comes here. Define the following method so that it     \n    //will handle the request before it is passed to the controller.\n\n    @Override\n    public boolean preHandle(HttpServletRequest request,HttpServletResponse  response){\n    //your custom logic here.\n        return true;\n    }\n}\n</code></pre></li>\n<li><p>Define a configuration class</p>\n\n<pre><code>@Configuration\npublic class MyConfig extends WebMvcConfigurerAdapter{\n    @Override\n    public void addInterceptors(InterceptorRegistry registry){\n        registry.addInterceptor(new MyCustomInterceptor()).addPathPatterns(\"/**\");\n    }\n}\n</code></pre></li>\n<li><p>Thats it. Now all your requests will pass through the logic defined under preHandle() method of MyCustomInterceptor.</p></li>\n</ol>\n"},{"comments":[{"owner":{"account_id":5240236,"reputation":3531,"user_id":4187541,"accept_rate":80,"display_name":"Peter Chaula"},"score":29,"creation_date":1546807888,"post_id":45585071,"comment_id":94964818,"body_markdown":"Your answer is incomplete because it&#39;s missing the implementation of `MyCustomInterceptor`","body":"Your answer is incomplete because it&#39;s missing the implementation of <code>MyCustomInterceptor</code>"},{"owner":{"account_id":5240236,"reputation":3531,"user_id":4187541,"accept_rate":80,"display_name":"Peter Chaula"},"score":3,"creation_date":1621524794,"post_id":45585071,"comment_id":119527977,"body_markdown":"@AndriiDzhyrma, you have to write code that is comprehensible to a total beginner. Have a look at this complete answer and you&#39;ll get my point. https://stackoverflow.com/a/42113069/4187541","body":"@AndriiDzhyrma, you have to write code that is comprehensible to a total beginner. Have a look at this complete answer and you&#39;ll get my point. <a href=\"https://stackoverflow.com/a/42113069/4187541\">stackoverflow.com/a/42113069/4187541</a>"}],"tags":[],"owner":{"account_id":3725757,"reputation":3130,"user_id":3099704,"accept_rate":70,"display_name":"Sedat Gokcen"},"comment_count":2,"down_vote_count":1,"up_vote_count":145,"is_accepted":false,"score":144,"last_activity_date":1681162568,"creation_date":1502266196,"answer_id":45585071,"question_id":31082981,"body_markdown":"`WebMvcConfigurerAdapter` will be deprecated with Spring 5. From its [Javadoc][1]:\r\n\r\n&gt; @deprecated as of 5.0 {@link WebMvcConfigurer} has default methods (made\r\n possible by a Java 8 baseline) and can be implemented directly without the need for this adapter\r\n\r\nAs stated above, what you should do is implementing `WebMvcConfigurer` and overriding `addInterceptors` method.\r\n\r\n    @Configuration\r\n    public class WebMvcConfig implements WebMvcConfigurer {\r\n\r\n        @Override\r\n        public void addInterceptors(InterceptorRegistry registry) {\r\n            registry.addInterceptor(new MyCustomInterceptor());\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/5.2.22.RELEASE/javadoc-api/org/springframework/web/servlet/config/annotation/WebMvcConfigurerAdapter.html","title":"Spring Boot Adding Http Request Interceptors","body":"<p><code>WebMvcConfigurerAdapter</code> will be deprecated with Spring 5. From its <a href=\"https://docs.spring.io/spring-framework/docs/5.2.22.RELEASE/javadoc-api/org/springframework/web/servlet/config/annotation/WebMvcConfigurerAdapter.html\" rel=\"noreferrer\">Javadoc</a>:</p>\n<blockquote>\n<p>@deprecated as of 5.0 {@link WebMvcConfigurer} has default methods (made\npossible by a Java 8 baseline) and can be implemented directly without the need for this adapter</p>\n</blockquote>\n<p>As stated above, what you should do is implementing <code>WebMvcConfigurer</code> and overriding <code>addInterceptors</code> method.</p>\n<pre><code>@Configuration\npublic class WebMvcConfig implements WebMvcConfigurer {\n\n    @Override\n    public void addInterceptors(InterceptorRegistry registry) {\n        registry.addInterceptor(new MyCustomInterceptor());\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":7900713,"reputation":7937,"user_id":5967828,"accept_rate":65,"display_name":"xetra11"},"score":4,"creation_date":1511972255,"post_id":46549828,"comment_id":82071889,"body_markdown":"how can u only override one method on an interface without compilation issues?","body":"how can u only override one method on an interface without compilation issues?"},{"owner":{"account_id":7580118,"reputation":950,"user_id":5751045,"accept_rate":92,"display_name":"user09"},"score":1,"creation_date":1527613960,"post_id":46549828,"comment_id":88188573,"body_markdown":"@xetra11 I am also trying to see if we can only implement one method instead of all other methods not used in this case. Is it possible? Did you figured that out?","body":"@xetra11 I am also trying to see if we can only implement one method instead of all other methods not used in this case. Is it possible? Did you figured that out?"},{"owner":{"account_id":1020111,"reputation":15801,"user_id":1030702,"display_name":"Bob"},"score":4,"creation_date":1527661050,"post_id":46549828,"comment_id":88204176,"body_markdown":"@arjun The others are implemented as [default methods](https://docs.oracle.com/javase/tutorial/java/IandI/defaultmethods.html) thanks to Java 8. This reasoning is, conveniently, [documented](https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/servlet/config/annotation/WebMvcConfigurerAdapter.html) in the deprecated class.","body":"@arjun The others are implemented as <a href=\"https://docs.oracle.com/javase/tutorial/java/IandI/defaultmethods.html\" rel=\"nofollow noreferrer\">default methods</a> thanks to Java 8. This reasoning is, conveniently, <a href=\"https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/servlet/config/annotation/WebMvcConfigurerAdapter.html\" rel=\"nofollow noreferrer\">documented</a> in the deprecated class."}],"tags":[],"owner":{"account_id":2982513,"reputation":171,"user_id":2532195,"display_name":"user2532195"},"comment_count":3,"down_vote_count":1,"up_vote_count":17,"is_accepted":false,"score":16,"last_activity_date":1507050228,"creation_date":1507050228,"answer_id":46549828,"question_id":31082981,"body_markdown":"I had the same issue of WebMvcConfigurerAdapter being deprecated. When I searched for examples, I hardly found any implemented code. Here is a piece of working code.\r\n\r\ncreate a class that extends HandlerInterceptorAdapter\r\n\r\n\r\n\r\n    import javax.servlet.http.HttpServletRequest;\r\n    import javax.servlet.http.HttpServletResponse;\r\n    \r\n    import org.slf4j.Logger;\r\n    import org.slf4j.LoggerFactory;\r\n    import org.springframework.stereotype.Component;\r\n    import org.springframework.web.servlet.handler.HandlerInterceptorAdapter;\r\n    \r\n    import me.rajnarayanan.datatest.DataTestApplication;\r\n    @Component\r\n    public class EmployeeInterceptor extends HandlerInterceptorAdapter {\r\n    \tprivate static final Logger logger = LoggerFactory.getLogger(DataTestApplication.class);\r\n    \t@Override\r\n    \tpublic boolean preHandle(HttpServletRequest request, \r\n                HttpServletResponse response, Object handler) throws Exception {\r\n    \t\t\r\n    \t\t\tString x = request.getMethod();\r\n    \t\t\tlogger.info(x + &quot;intercepted&quot;);\r\n    \t\treturn true;\r\n    \t}\r\n    \r\n    }\r\n\r\nthen Implement WebMvcConfigurer interface\r\n\r\n\r\n\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.web.servlet.config.annotation.InterceptorRegistry;\r\n    import org.springframework.web.servlet.config.annotation.WebMvcConfigurer;\r\n    \r\n    import me.rajnarayanan.datatest.interceptor.EmployeeInterceptor;\r\n    @Configuration\r\n    public class WebMvcConfig implements WebMvcConfigurer {\r\n    \t@Autowired\r\n    \tEmployeeInterceptor employeeInterceptor ;\r\n    \t\r\n    \t@Override\r\n        public void addInterceptors(InterceptorRegistry registry){\r\n            registry.addInterceptor(employeeInterceptor).addPathPatterns(&quot;/employee&quot;);\r\n        }\r\n    }\r\n\r\n","title":"Spring Boot Adding Http Request Interceptors","body":"<p>I had the same issue of WebMvcConfigurerAdapter being deprecated. When I searched for examples, I hardly found any implemented code. Here is a piece of working code.</p>\n\n<p>create a class that extends HandlerInterceptorAdapter</p>\n\n<pre><code>import javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\n\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.stereotype.Component;\nimport org.springframework.web.servlet.handler.HandlerInterceptorAdapter;\n\nimport me.rajnarayanan.datatest.DataTestApplication;\n@Component\npublic class EmployeeInterceptor extends HandlerInterceptorAdapter {\n    private static final Logger logger = LoggerFactory.getLogger(DataTestApplication.class);\n    @Override\n    public boolean preHandle(HttpServletRequest request, \n            HttpServletResponse response, Object handler) throws Exception {\n\n            String x = request.getMethod();\n            logger.info(x + \"intercepted\");\n        return true;\n    }\n\n}\n</code></pre>\n\n<p>then Implement WebMvcConfigurer interface</p>\n\n<pre><code>import org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.web.servlet.config.annotation.InterceptorRegistry;\nimport org.springframework.web.servlet.config.annotation.WebMvcConfigurer;\n\nimport me.rajnarayanan.datatest.interceptor.EmployeeInterceptor;\n@Configuration\npublic class WebMvcConfig implements WebMvcConfigurer {\n    @Autowired\n    EmployeeInterceptor employeeInterceptor ;\n\n    @Override\n    public void addInterceptors(InterceptorRegistry registry){\n        registry.addInterceptor(employeeInterceptor).addPathPatterns(\"/employee\");\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":7436526,"reputation":1236,"user_id":5655767,"accept_rate":50,"display_name":"Steven"},"score":0,"creation_date":1581408228,"post_id":55901453,"comment_id":106412934,"body_markdown":"But this will require you to implement all methods from the WebMvcConfigurer, right?","body":"But this will require you to implement all methods from the WebMvcConfigurer, right?"},{"owner":{"account_id":38281,"reputation":2015,"user_id":109795,"accept_rate":88,"display_name":"Tom"},"score":2,"creation_date":1583835842,"post_id":55901453,"comment_id":107239465,"body_markdown":"No, its a (Java 8) interface with empty default implementations","body":"No, its a (Java 8) interface with empty default implementations"}],"tags":[],"owner":{"account_id":4967623,"reputation":1837,"user_id":3996393,"accept_rate":76,"display_name":"Xenonite"},"comment_count":2,"down_vote_count":0,"up_vote_count":43,"is_accepted":false,"score":43,"last_activity_date":1556533676,"creation_date":1556533676,"answer_id":55901453,"question_id":31082981,"body_markdown":"Since all responses to this make use of the now long-deprecated abstract WebMvcConfigurer Adapter instead of the WebMvcInterface (as already noted by @sebdooe), here is a working minimal example for a SpringBoot (2.1.4) application with an Interceptor:\r\n\r\nMinimal.java:\r\n\r\n    @SpringBootApplication\r\n    public class Minimal\r\n    {\r\n    \tpublic static void main(String[] args)\r\n    \t{\r\n    \t\tSpringApplication.run(Minimal.class, args);\r\n    \t}\r\n    }\r\n\r\nMinimalController.java:\r\n\r\n    @RestController\r\n    @RequestMapping(&quot;/&quot;)\r\n    public class Controller\r\n    {\r\n    \t@GetMapping(&quot;/&quot;)\r\n    \t@ResponseBody\r\n    \tpublic ResponseEntity&lt;String&gt; getMinimal()\r\n    \t{\r\n    \t\tSystem.out.println(&quot;MINIMAL: GETMINIMAL()&quot;);\r\n    \t\t\r\n    \t\treturn new ResponseEntity&lt;String&gt;(&quot;returnstring&quot;, HttpStatus.OK);\r\n    \t}\r\n    }\r\n\r\nConfig.java:\r\n\r\n    @Configuration\r\n    public class Config implements WebMvcConfigurer\r\n    {\r\n    \t//@Autowired\r\n    \t//MinimalInterceptor minimalInterceptor;\r\n    \t\r\n    \t@Override\r\n    \tpublic void addInterceptors(InterceptorRegistry registry)\r\n    \t{\r\n    \t\tregistry.addInterceptor(new MinimalInterceptor());\r\n    \t}\r\n    }\r\n\r\nMinimalInterceptor.java:\r\n\r\n    public class MinimalInterceptor extends HandlerInterceptorAdapter\r\n    {\r\n    \t@Override\r\n    \tpublic boolean preHandle(HttpServletRequest requestServlet, HttpServletResponse responseServlet, Object handler) throws Exception\r\n    \t{\r\n    \t\tSystem.out.println(&quot;MINIMAL: INTERCEPTOR PREHANDLE CALLED&quot;);\r\n    \t\t\r\n    \t\treturn true;\r\n    \t}\r\n    \t\r\n    \t@Override\r\n    \tpublic void postHandle(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView) throws Exception\r\n    \t{\r\n    \t\tSystem.out.println(&quot;MINIMAL: INTERCEPTOR POSTHANDLE CALLED&quot;);\r\n    \t}\r\n    \t\r\n    \t@Override\r\n    \tpublic void afterCompletion(HttpServletRequest request, HttpServletResponse response, Object handler, Exception exception) throws Exception\r\n    \t{\r\n    \t\tSystem.out.println(&quot;MINIMAL: INTERCEPTOR AFTERCOMPLETION CALLED&quot;);\r\n    \t}\r\n    }\r\n\r\nworks as advertised\r\n\r\nThe output will give you something like:\r\n\r\n    &gt; Task :Minimal.main()\r\n    \r\n      .   ____          _            __ _ _\r\n     /\\\\ / ___&#39;_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\r\n    ( ( )\\___ | &#39;_ | &#39;_| | &#39;_ \\/ _` | \\ \\ \\ \\\r\n     \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\r\n      &#39;  |____| .__|_| |_|_| |_\\__, | / / / /\r\n     =========|_|==============|___/=/_/_/_/\r\n     :: Spring Boot ::        (v2.1.4.RELEASE)\r\n    \r\n    2019-04-29 11:53:47.560  INFO 4593 --- [           main] io.minimal.Minimal                       : Starting Minimal on y with PID 4593 (/x/y/z/spring-minimal/build/classes/java/main started by x in /x/y/z/spring-minimal)\r\n    2019-04-29 11:53:47.563  INFO 4593 --- [           main] io.minimal.Minimal                       : No active profile set, falling back to default profiles: default\r\n    2019-04-29 11:53:48.745  INFO 4593 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)\r\n    2019-04-29 11:53:48.780  INFO 4593 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\r\n    2019-04-29 11:53:48.781  INFO 4593 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.17]\r\n    2019-04-29 11:53:48.892  INFO 4593 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\r\n    2019-04-29 11:53:48.893  INFO 4593 --- [           main] o.s.web.context.ContextLoader            : Root WebApplicationContext: initialization completed in 1269 ms\r\n    2019-04-29 11:53:49.130  INFO 4593 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService &#39;applicationTaskExecutor&#39;\r\n    2019-04-29 11:53:49.375  INFO 4593 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path &#39;&#39;\r\n    2019-04-29 11:53:49.380  INFO 4593 --- [           main] io.minimal.Minimal                       : Started Minimal in 2.525 seconds (JVM running for 2.9)\r\n    2019-04-29 11:54:01.267  INFO 4593 --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet &#39;dispatcherServlet&#39;\r\n    2019-04-29 11:54:01.267  INFO 4593 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet &#39;dispatcherServlet&#39;\r\n    2019-04-29 11:54:01.286  INFO 4593 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 19 ms\r\n    MINIMAL: INTERCEPTOR PREHANDLE CALLED\r\n    MINIMAL: GETMINIMAL()\r\n    MINIMAL: INTERCEPTOR POSTHANDLE CALLED\r\n    MINIMAL: INTERCEPTOR AFTERCOMPLETION CALLED","title":"Spring Boot Adding Http Request Interceptors","body":"<p>Since all responses to this make use of the now long-deprecated abstract WebMvcConfigurer Adapter instead of the WebMvcInterface (as already noted by @sebdooe), here is a working minimal example for a SpringBoot (2.1.4) application with an Interceptor:</p>\n\n<p>Minimal.java:</p>\n\n<pre><code>@SpringBootApplication\npublic class Minimal\n{\n    public static void main(String[] args)\n    {\n        SpringApplication.run(Minimal.class, args);\n    }\n}\n</code></pre>\n\n<p>MinimalController.java:</p>\n\n<pre><code>@RestController\n@RequestMapping(\"/\")\npublic class Controller\n{\n    @GetMapping(\"/\")\n    @ResponseBody\n    public ResponseEntity&lt;String&gt; getMinimal()\n    {\n        System.out.println(\"MINIMAL: GETMINIMAL()\");\n\n        return new ResponseEntity&lt;String&gt;(\"returnstring\", HttpStatus.OK);\n    }\n}\n</code></pre>\n\n<p>Config.java:</p>\n\n<pre><code>@Configuration\npublic class Config implements WebMvcConfigurer\n{\n    //@Autowired\n    //MinimalInterceptor minimalInterceptor;\n\n    @Override\n    public void addInterceptors(InterceptorRegistry registry)\n    {\n        registry.addInterceptor(new MinimalInterceptor());\n    }\n}\n</code></pre>\n\n<p>MinimalInterceptor.java:</p>\n\n<pre><code>public class MinimalInterceptor extends HandlerInterceptorAdapter\n{\n    @Override\n    public boolean preHandle(HttpServletRequest requestServlet, HttpServletResponse responseServlet, Object handler) throws Exception\n    {\n        System.out.println(\"MINIMAL: INTERCEPTOR PREHANDLE CALLED\");\n\n        return true;\n    }\n\n    @Override\n    public void postHandle(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView) throws Exception\n    {\n        System.out.println(\"MINIMAL: INTERCEPTOR POSTHANDLE CALLED\");\n    }\n\n    @Override\n    public void afterCompletion(HttpServletRequest request, HttpServletResponse response, Object handler, Exception exception) throws Exception\n    {\n        System.out.println(\"MINIMAL: INTERCEPTOR AFTERCOMPLETION CALLED\");\n    }\n}\n</code></pre>\n\n<p>works as advertised</p>\n\n<p>The output will give you something like:</p>\n\n<pre><code>&gt; Task :Minimal.main()\n\n  .   ____          _            __ _ _\n /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n  '  |____| .__|_| |_|_| |_\\__, | / / / /\n =========|_|==============|___/=/_/_/_/\n :: Spring Boot ::        (v2.1.4.RELEASE)\n\n2019-04-29 11:53:47.560  INFO 4593 --- [           main] io.minimal.Minimal                       : Starting Minimal on y with PID 4593 (/x/y/z/spring-minimal/build/classes/java/main started by x in /x/y/z/spring-minimal)\n2019-04-29 11:53:47.563  INFO 4593 --- [           main] io.minimal.Minimal                       : No active profile set, falling back to default profiles: default\n2019-04-29 11:53:48.745  INFO 4593 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)\n2019-04-29 11:53:48.780  INFO 4593 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\n2019-04-29 11:53:48.781  INFO 4593 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.17]\n2019-04-29 11:53:48.892  INFO 4593 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\n2019-04-29 11:53:48.893  INFO 4593 --- [           main] o.s.web.context.ContextLoader            : Root WebApplicationContext: initialization completed in 1269 ms\n2019-04-29 11:53:49.130  INFO 4593 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'applicationTaskExecutor'\n2019-04-29 11:53:49.375  INFO 4593 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path ''\n2019-04-29 11:53:49.380  INFO 4593 --- [           main] io.minimal.Minimal                       : Started Minimal in 2.525 seconds (JVM running for 2.9)\n2019-04-29 11:54:01.267  INFO 4593 --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'\n2019-04-29 11:54:01.267  INFO 4593 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'\n2019-04-29 11:54:01.286  INFO 4593 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 19 ms\nMINIMAL: INTERCEPTOR PREHANDLE CALLED\nMINIMAL: GETMINIMAL()\nMINIMAL: INTERCEPTOR POSTHANDLE CALLED\nMINIMAL: INTERCEPTOR AFTERCOMPLETION CALLED\n</code></pre>\n"},{"comments":[{"owner":{"account_id":337881,"reputation":2204,"user_id":666414,"accept_rate":50,"display_name":"maxxyme"},"score":4,"creation_date":1599120838,"post_id":59078146,"comment_id":112676752,"body_markdown":"OK but what you&#39;ve actually done here is an interceptor FOR RestTemplate (i.e. when YOU make HTTP calls)... not an interceptor for Spring REST Controllers (i.e. when HTTP calls are made against your Spring app/REST-webservices).","body":"OK but what you&#39;ve actually done here is an interceptor FOR RestTemplate (i.e. when YOU make HTTP calls)... not an interceptor for Spring REST Controllers (i.e. when HTTP calls are made against your Spring app/REST-webservices)."},{"owner":{"account_id":4220877,"reputation":364,"user_id":3455701,"display_name":"Tunde Michael"},"score":1,"creation_date":1638739852,"post_id":59078146,"comment_id":124162551,"body_markdown":"The question is about HTTP calls to your controller not HTTP calls from your application which RestTemplate handles. Thanks to @maxxyme comment.","body":"The question is about HTTP calls to your controller not HTTP calls from your application which RestTemplate handles. Thanks to @maxxyme comment."}],"tags":[],"owner":{"account_id":6733457,"reputation":179,"user_id":10217900,"display_name":"Sylvester"},"comment_count":2,"down_vote_count":3,"up_vote_count":2,"is_accepted":false,"score":-1,"last_activity_date":1574887365,"creation_date":1574887365,"answer_id":59078146,"question_id":31082981,"body_markdown":"Below is an implementation I use to intercept each HTTP request before it goes out and the response which comes back. With this implementation, I also have a single point where I can pass any header value with the request. \r\n    \r\n    public class HttpInterceptor implements ClientHttpRequestInterceptor {\r\n    private Logger logger = LoggerFactory.getLogger(this.getClass());\r\n    @Override\r\n    public ClientHttpResponse intercept(\r\n            HttpRequest request, byte[] body,\r\n            ClientHttpRequestExecution execution\r\n    ) throws IOException {\r\n        HttpHeaders headers = request.getHeaders();\r\n        headers.add(&quot;Accept&quot;, MediaType.APPLICATION_JSON_UTF8_VALUE);\r\n        headers.add(&quot;Content-Type&quot;, MediaType.APPLICATION_JSON_VALUE);\r\n        traceRequest(request, body);\r\n        ClientHttpResponse response = execution.execute(request, body);\r\n        traceResponse(response);\r\n        return response;\r\n    }\r\n\r\n    private void traceRequest(HttpRequest request, byte[] body) throws IOException {\r\n        logger.info(&quot;===========================Request begin======================================&quot;);\r\n        logger.info(&quot;URI         : {}&quot;, request.getURI());\r\n        logger.info(&quot;Method      : {}&quot;, request.getMethod());\r\n        logger.info(&quot;Headers     : {}&quot;, request.getHeaders() );\r\n        logger.info(&quot;Request body: {}&quot;, new String(body, StandardCharsets.UTF_8));\r\n        logger.info(&quot;==========================Request end=========================================&quot;);\r\n    }\r\n\r\n    private void traceResponse(ClientHttpResponse response) throws IOException {\r\n        logger.info(&quot;============================Response begin====================================&quot;);\r\n        logger.info(&quot;Status code  : {}&quot;, response.getStatusCode());\r\n        logger.info(&quot;Status text  : {}&quot;, response.getStatusText());\r\n        logger.info(&quot;Headers      : {}&quot;, response.getHeaders());\r\n        logger.info(&quot;=======================Response end===========================================&quot;);\r\n    }}\r\n\r\nBelow is the Rest Template Bean\r\n\r\n    @Bean\r\n    public RestTemplate restTemplate(HttpClient httpClient)\r\n    {\r\n        HttpComponentsClientHttpRequestFactory requestFactory =\r\n                new HttpComponentsClientHttpRequestFactory();\r\n        requestFactory.setHttpClient(httpClient);\r\n        RestTemplate restTemplate=  new RestTemplate(requestFactory);\r\n        List&lt;ClientHttpRequestInterceptor&gt; interceptors = restTemplate.getInterceptors();\r\n        if (CollectionUtils.isEmpty(interceptors))\r\n        {\r\n            interceptors = new ArrayList&lt;&gt;();\r\n        }\r\n        interceptors.add(new HttpInterceptor());\r\n        restTemplate.setInterceptors(interceptors);\r\n\r\n        return restTemplate;\r\n    }","title":"Spring Boot Adding Http Request Interceptors","body":"<p>Below is an implementation I use to intercept each HTTP request before it goes out and the response which comes back. With this implementation, I also have a single point where I can pass any header value with the request. </p>\n\n<pre><code>public class HttpInterceptor implements ClientHttpRequestInterceptor {\nprivate Logger logger = LoggerFactory.getLogger(this.getClass());\n@Override\npublic ClientHttpResponse intercept(\n        HttpRequest request, byte[] body,\n        ClientHttpRequestExecution execution\n) throws IOException {\n    HttpHeaders headers = request.getHeaders();\n    headers.add(\"Accept\", MediaType.APPLICATION_JSON_UTF8_VALUE);\n    headers.add(\"Content-Type\", MediaType.APPLICATION_JSON_VALUE);\n    traceRequest(request, body);\n    ClientHttpResponse response = execution.execute(request, body);\n    traceResponse(response);\n    return response;\n}\n\nprivate void traceRequest(HttpRequest request, byte[] body) throws IOException {\n    logger.info(\"===========================Request begin======================================\");\n    logger.info(\"URI         : {}\", request.getURI());\n    logger.info(\"Method      : {}\", request.getMethod());\n    logger.info(\"Headers     : {}\", request.getHeaders() );\n    logger.info(\"Request body: {}\", new String(body, StandardCharsets.UTF_8));\n    logger.info(\"==========================Request end=========================================\");\n}\n\nprivate void traceResponse(ClientHttpResponse response) throws IOException {\n    logger.info(\"============================Response begin====================================\");\n    logger.info(\"Status code  : {}\", response.getStatusCode());\n    logger.info(\"Status text  : {}\", response.getStatusText());\n    logger.info(\"Headers      : {}\", response.getHeaders());\n    logger.info(\"=======================Response end===========================================\");\n}}\n</code></pre>\n\n<p>Below is the Rest Template Bean</p>\n\n<pre><code>@Bean\npublic RestTemplate restTemplate(HttpClient httpClient)\n{\n    HttpComponentsClientHttpRequestFactory requestFactory =\n            new HttpComponentsClientHttpRequestFactory();\n    requestFactory.setHttpClient(httpClient);\n    RestTemplate restTemplate=  new RestTemplate(requestFactory);\n    List&lt;ClientHttpRequestInterceptor&gt; interceptors = restTemplate.getInterceptors();\n    if (CollectionUtils.isEmpty(interceptors))\n    {\n        interceptors = new ArrayList&lt;&gt;();\n    }\n    interceptors.add(new HttpInterceptor());\n    restTemplate.setInterceptors(interceptors);\n\n    return restTemplate;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":390011,"reputation":1231,"user_id":749803,"accept_rate":84,"display_name":"Ng Zhong Qin"},"comment_count":0,"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1625912060,"creation_date":1625912060,"answer_id":68326759,"question_id":31082981,"body_markdown":"I found a good tutorial on this site on how to add request interceptors to specific controllers using annotations:\r\n1. Define the annotation\r\n2. Define the interceptor \r\n3. Add the interceptor to the path\r\n4. Use the annotation on the specific controller\r\n\r\nhttps://programmer.group/how-do-spring-boot-2.x-add-interceptors.html\r\n\r\nI know this question was how to add interceptors to all requests and that&#39;s answered already. I was searching the solution to add request interceptors to specific controllers using annotations but couldn&#39;t find a solution in stackoverflow. Decided add this content to this question instead of asking a new question. \r\n\r\nDefine the annotation\r\nNeedLogin.class\r\n\r\n    package com.example.helloSpringBoot.annotation;\r\n    \r\n    import java.lang.annotation.ElementType;\r\n    import java.lang.annotation.Retention;\r\n    import java.lang.annotation.RetentionPolicy;\r\n    import java.lang.annotation.Target;\r\n    \r\n    \r\n    @Target({ElementType.METHOD, ElementType.TYPE})\r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    public @interface NeedLogin {\r\n    }\r\n\r\nThen define the inceptor class\r\n\r\n    package com.example.helloSpringBoot.config;\r\n    \r\n    import com.example.helloSpringBoot.annotation.NeedLogin;\r\n    import com.example.helloSpringBoot.util.WxUserInfoContext;\r\n    import org.springframework.lang.Nullable;\r\n    import org.springframework.stereotype.Component;\r\n    import org.springframework.web.method.HandlerMethod;\r\n    import org.springframework.web.servlet.HandlerInterceptor;\r\n    import org.springframework.web.servlet.ModelAndView;\r\n    \r\n    import javax.servlet.http.HttpServletRequest;\r\n    import javax.servlet.http.HttpServletResponse;\r\n    \r\n    /**\r\n     * Logon interceptor\r\n     *\r\n     * @Author: Java Fragment\r\n     */\r\n    @Component\r\n    public class LoginInterceptor implements HandlerInterceptor {\r\n    \r\n        //This method is executed before accessing the interface. We only need to write the business logic to verify the login status here to verify the login status before the user calls the specified interface.\r\n        public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception {\r\n    \r\n            if (handler instanceof HandlerMethod) {\r\n                NeedLogin needLogin = ((HandlerMethod) handler).getMethodAnnotation(NeedLogin.class);\r\n                if (null == needLogin) {\r\n                    needLogin = ((HandlerMethod) handler).getMethod().getDeclaringClass()\r\n                            .getAnnotation(NeedLogin.class);\r\n                }\r\n                // Check login if you have login validation annotations\r\n                if (null != needLogin) {\r\n                    WxUserInfoContext curUserContext = (WxUserInfoContext) request.getSession()\r\n                            .getAttribute(&quot;curUserContext&quot;);\r\n                    //If session No, not logged in.\r\n                    if (null == curUserContext) {\r\n                        response.setCharacterEncoding(&quot;UTF-8&quot;);\r\n                        response.getWriter().write(&quot;Not logged in!&quot;);\r\n                        return false;\r\n                    }\r\n                }\r\n    \r\n            }\r\n            return true;\r\n        }\r\n    \r\n        public void postHandle(HttpServletRequest request, HttpServletResponse response, Object handler, @Nullable ModelAndView modelAndView) throws Exception {\r\n        }\r\n    \r\n        public void afterCompletion(HttpServletRequest request, HttpServletResponse response, Object handler, @Nullable Exception ex) throws Exception {\r\n        }\r\n    }\r\n\r\n\r\nThen add the inceptor into the WebConfig\r\n\r\n    package com.example.helloSpringBoot.config;\r\n    \r\n    \r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.web.servlet.config.annotation.InterceptorRegistry;\r\n    import org.springframework.web.servlet.config.annotation.WebMvcConfigurer;\r\n    \r\n    /**\r\n     * WebConfig\r\n     *\r\n     * @Author: Java Fragment\r\n     *\r\n     */\r\n    @Configuration\r\n    public class WebConfig implements WebMvcConfigurer {\r\n        @Autowired\r\n        private LoginInterceptor loginInterceptor;\r\n    \r\n        @Override\r\n        public void addInterceptors(InterceptorRegistry registry) {\r\n            // Custom interceptor, add intercept path and exclude intercept path\r\n            registry.addInterceptor(loginInterceptor).addPathPatterns(&quot;/**&quot;);\r\n        }\r\n    }\r\n\r\nFinally you are free to use the new interceptor using the new annotation @NeedLogin\r\n\r\n    package com.example.helloSpringBoot.controller;\r\n    \r\n    import com.example.helloSpringBoot.annotation.NeedLogin;\r\n    import org.springframework.web.bind.annotation.CrossOrigin;\r\n    import org.springframework.web.bind.annotation.RequestMapping;\r\n    import org.springframework.web.bind.annotation.RestController;\r\n    \r\n    @RestController\r\n    public class HelloController {\r\n    \r\n        /**\r\n         * Testing does not require login\r\n         *\r\n         *\r\n         */\r\n        @RequestMapping(&quot;/testNoLogin&quot;)\r\n        public String testNoLogin (){\r\n            return &quot;The call is successful, this interface does not need login validation!-Java Broken read!&quot;;\r\n        }\r\n    \r\n        /**\r\n         * Testing requires login\r\n         *\r\n         *\r\n         */\r\n        @NeedLogin\r\n        @RequestMapping(&quot;/testNeedLogin&quot;)\r\n        public String testNeedLogin (){\r\n            return &quot;testNeedLogin!&quot;;\r\n        }\r\n    }","title":"Spring Boot Adding Http Request Interceptors","body":"<p>I found a good tutorial on this site on how to add request interceptors to specific controllers using annotations:</p>\n<ol>\n<li>Define the annotation</li>\n<li>Define the interceptor</li>\n<li>Add the interceptor to the path</li>\n<li>Use the annotation on the specific controller</li>\n</ol>\n<p><a href=\"https://programmer.group/how-do-spring-boot-2.x-add-interceptors.html\" rel=\"noreferrer\">https://programmer.group/how-do-spring-boot-2.x-add-interceptors.html</a></p>\n<p>I know this question was how to add interceptors to all requests and that's answered already. I was searching the solution to add request interceptors to specific controllers using annotations but couldn't find a solution in stackoverflow. Decided add this content to this question instead of asking a new question.</p>\n<p>Define the annotation\nNeedLogin.class</p>\n<pre><code>package com.example.helloSpringBoot.annotation;\n\nimport java.lang.annotation.ElementType;\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.RetentionPolicy;\nimport java.lang.annotation.Target;\n\n\n@Target({ElementType.METHOD, ElementType.TYPE})\n@Retention(RetentionPolicy.RUNTIME)\npublic @interface NeedLogin {\n}\n</code></pre>\n<p>Then define the inceptor class</p>\n<pre><code>package com.example.helloSpringBoot.config;\n\nimport com.example.helloSpringBoot.annotation.NeedLogin;\nimport com.example.helloSpringBoot.util.WxUserInfoContext;\nimport org.springframework.lang.Nullable;\nimport org.springframework.stereotype.Component;\nimport org.springframework.web.method.HandlerMethod;\nimport org.springframework.web.servlet.HandlerInterceptor;\nimport org.springframework.web.servlet.ModelAndView;\n\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\n\n/**\n * Logon interceptor\n *\n * @Author: Java Fragment\n */\n@Component\npublic class LoginInterceptor implements HandlerInterceptor {\n\n    //This method is executed before accessing the interface. We only need to write the business logic to verify the login status here to verify the login status before the user calls the specified interface.\n    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception {\n\n        if (handler instanceof HandlerMethod) {\n            NeedLogin needLogin = ((HandlerMethod) handler).getMethodAnnotation(NeedLogin.class);\n            if (null == needLogin) {\n                needLogin = ((HandlerMethod) handler).getMethod().getDeclaringClass()\n                        .getAnnotation(NeedLogin.class);\n            }\n            // Check login if you have login validation annotations\n            if (null != needLogin) {\n                WxUserInfoContext curUserContext = (WxUserInfoContext) request.getSession()\n                        .getAttribute(&quot;curUserContext&quot;);\n                //If session No, not logged in.\n                if (null == curUserContext) {\n                    response.setCharacterEncoding(&quot;UTF-8&quot;);\n                    response.getWriter().write(&quot;Not logged in!&quot;);\n                    return false;\n                }\n            }\n\n        }\n        return true;\n    }\n\n    public void postHandle(HttpServletRequest request, HttpServletResponse response, Object handler, @Nullable ModelAndView modelAndView) throws Exception {\n    }\n\n    public void afterCompletion(HttpServletRequest request, HttpServletResponse response, Object handler, @Nullable Exception ex) throws Exception {\n    }\n}\n</code></pre>\n<p>Then add the inceptor into the WebConfig</p>\n<pre><code>package com.example.helloSpringBoot.config;\n\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.web.servlet.config.annotation.InterceptorRegistry;\nimport org.springframework.web.servlet.config.annotation.WebMvcConfigurer;\n\n/**\n * WebConfig\n *\n * @Author: Java Fragment\n *\n */\n@Configuration\npublic class WebConfig implements WebMvcConfigurer {\n    @Autowired\n    private LoginInterceptor loginInterceptor;\n\n    @Override\n    public void addInterceptors(InterceptorRegistry registry) {\n        // Custom interceptor, add intercept path and exclude intercept path\n        registry.addInterceptor(loginInterceptor).addPathPatterns(&quot;/**&quot;);\n    }\n}\n</code></pre>\n<p>Finally you are free to use the new interceptor using the new annotation @NeedLogin</p>\n<pre><code>package com.example.helloSpringBoot.controller;\n\nimport com.example.helloSpringBoot.annotation.NeedLogin;\nimport org.springframework.web.bind.annotation.CrossOrigin;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\npublic class HelloController {\n\n    /**\n     * Testing does not require login\n     *\n     *\n     */\n    @RequestMapping(&quot;/testNoLogin&quot;)\n    public String testNoLogin (){\n        return &quot;The call is successful, this interface does not need login validation!-Java Broken read!&quot;;\n    }\n\n    /**\n     * Testing requires login\n     *\n     *\n     */\n    @NeedLogin\n    @RequestMapping(&quot;/testNeedLogin&quot;)\n    public String testNeedLogin (){\n        return &quot;testNeedLogin!&quot;;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2806051,"reputation":324,"user_id":2413271,"display_name":"Rahul Tiwari"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1663149806,"creation_date":1663149342,"answer_id":73714897,"question_id":31082981,"body_markdown":"For tracking all the request response in the spring-boot (java) application you can create a filter class like this -\r\n\r\n    import org.springframework.stereotype.Component;\r\n    import org.springframework.web.filter.OncePerRequestFilter;\r\n    import org.springframework.web.util.ContentCachingRequestWrapper;\r\n    import org.springframework.web.util.ContentCachingResponseWrapper;\r\n    \r\n    import javax.servlet.FilterChain;\r\n    import javax.servlet.ServletException;\r\n    import javax.servlet.http.HttpServletRequest;\r\n    import javax.servlet.http.HttpServletResponse;\r\n    import java.io.IOException;\r\n    import java.io.UnsupportedEncodingException;\r\n    import java.nio.charset.StandardCharsets;\r\n    import java.util.Collections;\r\n    import java.util.Objects;\r\n    import java.util.stream.Collectors;\r\n    \r\n    @Component\r\n    public class RequestResponseTracker extends OncePerRequestFilter {\r\n    \r\n        @Override\r\n        protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)\r\n                throws ServletException, IOException {\r\n            ContentCachingRequestWrapper requestWrapper = new ContentCachingRequestWrapper(request);\r\n            ContentCachingResponseWrapper responseWrapper = new ContentCachingResponseWrapper(response);\r\n    \r\n            filterChain.doFilter(requestWrapper, responseWrapper);\r\n    \r\n            System.out.println(&quot;Request URI: &quot; + request.getRequestURI());\r\n            System.out.println(&quot;Request Headers: &quot; + Collections.list(request.getHeaderNames()).stream()\r\n                    .map(headerName -&gt; headerName + &quot; -&gt; &quot; + request.getHeader(headerName)).collect(Collectors.toList()));\r\n            System.out.println(&quot;Request Method: &quot; + request.getMethod());\r\n            System.out.println(&quot;Request Body: &quot; + getStringValue(requestWrapper.getContentAsByteArray(),\r\n                    responseWrapper.getCharacterEncoding()));\r\n    \r\n            System.out.println(&quot;Response Code: &quot; + response.getStatus());\r\n            System.out.println(&quot;Response Body: &quot; + getStringValue(responseWrapper.getContentAsByteArray(),\r\n                    responseWrapper.getCharacterEncoding()));\r\n            System.out.println(&quot;Response Headers: &quot; + response.getHeaderNames().stream()\r\n                    .map(headerName -&gt; headerName + &quot; -&gt; &quot; + response.getHeader(headerName)).collect(Collectors.toList()));\r\n    \r\n            responseWrapper.copyBodyToResponse();   // Don&#39;t forget to add this at the end\r\n        }\r\n    \r\n    \r\n        private String getStringValue(byte[] contentAsByteArray, String characterEncoding) {\r\n            try {\r\n                return new String(contentAsByteArray, 0, contentAsByteArray.length,\r\n                        Objects.nonNull(characterEncoding) ? characterEncoding : StandardCharsets.UTF_8.name());\r\n            }\r\n            catch (UnsupportedEncodingException e) {\r\n                e.printStackTrace();\r\n            }\r\n            return &quot;&quot;;\r\n        }\r\n    }\r\n\r\n","title":"Spring Boot Adding Http Request Interceptors","body":"<p>For tracking all the request response in the spring-boot (java) application you can create a filter class like this -</p>\n<pre><code>import org.springframework.stereotype.Component;\nimport org.springframework.web.filter.OncePerRequestFilter;\nimport org.springframework.web.util.ContentCachingRequestWrapper;\nimport org.springframework.web.util.ContentCachingResponseWrapper;\n\nimport javax.servlet.FilterChain;\nimport javax.servlet.ServletException;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\nimport java.io.IOException;\nimport java.io.UnsupportedEncodingException;\nimport java.nio.charset.StandardCharsets;\nimport java.util.Collections;\nimport java.util.Objects;\nimport java.util.stream.Collectors;\n\n@Component\npublic class RequestResponseTracker extends OncePerRequestFilter {\n\n    @Override\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)\n            throws ServletException, IOException {\n        ContentCachingRequestWrapper requestWrapper = new ContentCachingRequestWrapper(request);\n        ContentCachingResponseWrapper responseWrapper = new ContentCachingResponseWrapper(response);\n\n        filterChain.doFilter(requestWrapper, responseWrapper);\n\n        System.out.println(&quot;Request URI: &quot; + request.getRequestURI());\n        System.out.println(&quot;Request Headers: &quot; + Collections.list(request.getHeaderNames()).stream()\n                .map(headerName -&gt; headerName + &quot; -&gt; &quot; + request.getHeader(headerName)).collect(Collectors.toList()));\n        System.out.println(&quot;Request Method: &quot; + request.getMethod());\n        System.out.println(&quot;Request Body: &quot; + getStringValue(requestWrapper.getContentAsByteArray(),\n                responseWrapper.getCharacterEncoding()));\n\n        System.out.println(&quot;Response Code: &quot; + response.getStatus());\n        System.out.println(&quot;Response Body: &quot; + getStringValue(responseWrapper.getContentAsByteArray(),\n                responseWrapper.getCharacterEncoding()));\n        System.out.println(&quot;Response Headers: &quot; + response.getHeaderNames().stream()\n                .map(headerName -&gt; headerName + &quot; -&gt; &quot; + response.getHeader(headerName)).collect(Collectors.toList()));\n\n        responseWrapper.copyBodyToResponse();   // Don't forget to add this at the end\n    }\n\n\n    private String getStringValue(byte[] contentAsByteArray, String characterEncoding) {\n        try {\n            return new String(contentAsByteArray, 0, contentAsByteArray.length,\n                    Objects.nonNull(characterEncoding) ? characterEncoding : StandardCharsets.UTF_8.name());\n        }\n        catch (UnsupportedEncodingException e) {\n            e.printStackTrace();\n        }\n        return &quot;&quot;;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8295416,"reputation":103,"user_id":6235811,"display_name":"CloudSen"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1664438723,"creation_date":1664438723,"answer_id":73892236,"question_id":31082981,"body_markdown":"I will recommend the following ways to dynamically inject custom interceptors.  \r\nYou don&#39;t need to add interceptors one by one.  \r\n\r\n***CustomInterceptor:***  \r\n\r\n    public interface CustomInterceptor extends HandlerInterceptor {\r\n\r\n    default String[] excludePathPatterns() {\r\n        return new String[]{\r\n            &quot;/*/*.html&quot;,\r\n            &quot;/*/*.css&quot;,\r\n            &quot;/*/*.js&quot;,\r\n            &quot;/*/*.png&quot;,\r\n            &quot;/*/*.xml&quot;,\r\n            &quot;/*/*.json&quot;,\r\n            &quot;/*/*.yaml&quot;,\r\n            &quot;/*/*.yml&quot;,\r\n            &quot;/swagger*/**&quot;\r\n          };\r\n        }\r\n\r\n\r\n        default String[] pathPatterns() {\r\n            return new String[]{&quot;/**&quot;};\r\n        }\r\n    }\r\n\r\n***WebMvcConfig:***  \r\n\r\n    @Slf4j\r\n    @Configuration\r\n    @RequiredArgsConstructor\r\n    @SuppressWarnings(&quot;NullableProblems&quot;)\r\n    @ConditionalOnProperty(name = AutoConfigConstants.ENABLE_MVC, havingValue = &quot;true&quot;)\r\n    public class DefaultMvcAutoConfiguration implements WebMvcConfigurer {\r\n\r\n        static {\r\n            log.info(AutoConfigConstants.LOADING_MVC_AUTO_CONFIGURE);\r\n        }\r\n\r\n        private final List&lt;CustomInterceptor&gt; customInterceptors;\r\n\r\n        @Override\r\n        public void addInterceptors(InterceptorRegistry registry) {\r\n            WebMvcConfigurer.super.addInterceptors(registry);\r\n            if (CollectionUtils.isNotEmpty(customInterceptors)) {\r\n                customInterceptors.forEach(customInterceptor -&gt;\r\n                    registry.addInterceptor(customInterceptor)\r\n                        .addPathPatterns(customInterceptor.pathPatterns())      \r\n             .excludePathPatterns(customInterceptor.excludePathPatterns()));\r\n            }\r\n        }\r\n    }\r\n\r\n","title":"Spring Boot Adding Http Request Interceptors","body":"<p>I will recommend the following ways to dynamically inject custom interceptors.<br />\nYou don't need to add interceptors one by one.</p>\n<p><em><strong>CustomInterceptor:</strong></em></p>\n<pre><code>public interface CustomInterceptor extends HandlerInterceptor {\n\ndefault String[] excludePathPatterns() {\n    return new String[]{\n        &quot;/*/*.html&quot;,\n        &quot;/*/*.css&quot;,\n        &quot;/*/*.js&quot;,\n        &quot;/*/*.png&quot;,\n        &quot;/*/*.xml&quot;,\n        &quot;/*/*.json&quot;,\n        &quot;/*/*.yaml&quot;,\n        &quot;/*/*.yml&quot;,\n        &quot;/swagger*/**&quot;\n      };\n    }\n\n\n    default String[] pathPatterns() {\n        return new String[]{&quot;/**&quot;};\n    }\n}\n</code></pre>\n<p><em><strong>WebMvcConfig:</strong></em></p>\n<pre><code>@Slf4j\n@Configuration\n@RequiredArgsConstructor\n@SuppressWarnings(&quot;NullableProblems&quot;)\n@ConditionalOnProperty(name = AutoConfigConstants.ENABLE_MVC, havingValue = &quot;true&quot;)\npublic class DefaultMvcAutoConfiguration implements WebMvcConfigurer {\n\n    static {\n        log.info(AutoConfigConstants.LOADING_MVC_AUTO_CONFIGURE);\n    }\n\n    private final List&lt;CustomInterceptor&gt; customInterceptors;\n\n    @Override\n    public void addInterceptors(InterceptorRegistry registry) {\n        WebMvcConfigurer.super.addInterceptors(registry);\n        if (CollectionUtils.isNotEmpty(customInterceptors)) {\n            customInterceptors.forEach(customInterceptor -&gt;\n                registry.addInterceptor(customInterceptor)\n                    .addPathPatterns(customInterceptor.pathPatterns())      \n         .excludePathPatterns(customInterceptor.excludePathPatterns()));\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":891554,"reputation":8848,"user_id":929701,"accept_rate":79,"display_name":"hrishikeshp19"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":306779,"favorite_count":0,"down_vote_count":0,"up_vote_count":159,"accepted_answer_id":31083263,"answer_count":10,"score":159,"last_activity_date":1681162568,"creation_date":1435357195,"question_id":31082981,"body_markdown":"What is the right way to add HttpRequest interceptors in spring boot application? What I want to do is log requests and responses for every http request.\r\n\r\nSpring boot documentation does not cover this topic at all. (http://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/)\r\n\r\nI found some web samples on how to do the same with older versions of spring, but those work with applicationcontext.xml. Please help.","title":"Spring Boot Adding Http Request Interceptors","body":"<p>What is the right way to add HttpRequest interceptors in spring boot application? What I want to do is log requests and responses for every http request.</p>\n\n<p>Spring boot documentation does not cover this topic at all. (<a href=\"http://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/\">http://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/</a>)</p>\n\n<p>I found some web samples on how to do the same with older versions of spring, but those work with applicationcontext.xml. Please help.</p>\n"},{"tags":["java","swing","layout-manager"],"answers":[{"comments":[{"owner":{"account_id":287824,"reputation":38852,"user_id":587884,"accept_rate":86,"display_name":"Heisenbug"},"score":0,"creation_date":1314616283,"post_id":7229274,"comment_id":8691837,"body_markdown":"thanks for the answer. I have to assume that you meant also: &quot;do not use setPreferredSize at all&quot;, right?","body":"thanks for the answer. I have to assume that you meant also: &quot;do not use setPreferredSize at all&quot;, right?"},{"owner":{"account_id":1556012,"reputation":1838,"user_id":1447087,"accept_rate":69,"display_name":"Bigger"},"score":1,"creation_date":1369712502,"post_id":7229274,"comment_id":24184210,"body_markdown":"GridBagLayout uses constraints, where you can specify the &quot;weight&quot; both in X and Y for a given component, so the LayoutManager can decide what to do with the extra space on a resize. **BUT** you still need/can use setPreferredSize to determine the *preferred size* of each component, note that &quot;preferred&quot; doesn&#39;t mean it&#39;s going to be honored always. For special cases you may also need setMinimumSize and setMaximumSize anyway. They are not *evil*, don&#39;t buy into that. http://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html","body":"GridBagLayout uses constraints, where you can specify the &quot;weight&quot; both in X and Y for a given component, so the LayoutManager can decide what to do with the extra space on a resize. <b>BUT</b> you still need/can use setPreferredSize to determine the <i>preferred size</i> of each component, note that &quot;preferred&quot; doesn&#39;t mean it&#39;s going to be honored always. For special cases you may also need setMinimumSize and setMaximumSize anyway. They are not <i>evil</i>, don&#39;t buy into that. <a href=\"http://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html</a>"}],"tags":[],"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"comment_count":2,"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1314616103,"creation_date":1314616103,"answer_id":7229274,"question_id":7229226,"body_markdown":"&gt;In a situation where I need to define proportions between children of a Component (child 1 should use 10% of space, child2 40% ,child3 50%), is it possible to achieve that without implementing a custom layout manager?\r\n\r\nMaybe `GridBagLayout` would satisfy your needs. Besides that, there&#39;s a ton of layout managers on the web, and I bet there&#39;s one that fits your requirements.\r\n\r\n","title":"Should I avoid the use of set(Preferred|Maximum|Minimum) size methods in Java Swing?","body":"<blockquote>\n  <p>In a situation where I need to define proportions between children of a Component (child 1 should use 10% of space, child2 40% ,child3 50%), is it possible to achieve that without implementing a custom layout manager?</p>\n</blockquote>\n\n<p>Maybe <code>GridBagLayout</code> would satisfy your needs. Besides that, there's a ton of layout managers on the web, and I bet there's one that fits your requirements.</p>\n"},{"tags":[],"owner":{"account_id":73256,"reputation":4752,"user_id":211070,"display_name":"Tom"},"comment_count":0,"down_vote_count":0,"up_vote_count":22,"is_accepted":false,"score":22,"last_activity_date":1526114494,"creation_date":1314616978,"answer_id":7229416,"question_id":7229226,"body_markdown":"If you are having trouble with layouts in Java Swing, then I can highly recommend the JGoodies `FormLayout` provided freely as part of the Forms freeware library by Karsten Lentzsch [here][1].\r\n\r\nThis very popular layout manager is extremely flexible, allowing for very polished Java UIs to be developed.\r\n\r\nYou&#39;ll find Karsten&#39;s documentation in [here][2], and some rather good documentation from eclipse [here][3].\r\n\r\n  [1]: http://www.jgoodies.com/freeware/libraries/forms/\r\n  [2]: http://manual.openestate.org/extern/forms-1.2.1/tutorial/introduction.html\r\n  [3]: http://help.eclipse.org/oxygen/topic/org.eclipse.wb.swing.doc.user/html/layoutmanagers/swing/jgoodies_formlayout.html","title":"Should I avoid the use of set(Preferred|Maximum|Minimum) size methods in Java Swing?","body":"<p>If you are having trouble with layouts in Java Swing, then I can highly recommend the JGoodies <code>FormLayout</code> provided freely as part of the Forms freeware library by Karsten Lentzsch <a href=\"http://www.jgoodies.com/freeware/libraries/forms/\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>This very popular layout manager is extremely flexible, allowing for very polished Java UIs to be developed.</p>\n\n<p>You'll find Karsten's documentation in <a href=\"http://manual.openestate.org/extern/forms-1.2.1/tutorial/introduction.html\" rel=\"nofollow noreferrer\">here</a>, and some rather good documentation from eclipse <a href=\"http://help.eclipse.org/oxygen/topic/org.eclipse.wb.swing.doc.user/html/layoutmanagers/swing/jgoodies_formlayout.html\" rel=\"nofollow noreferrer\">here</a>.</p>\n"},{"comments":[{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":6,"creation_date":1314663514,"post_id":7229519,"comment_id":8703698,"body_markdown":"I&#39;m not entirely sure I agree with this advice in at least two situations.  1) Custom rendered components 2) Using a `JEditorPane` with HTML that does not itself suggest a width.  OTOH I am not sure if I&#39;ve missed something.  I&#39;ll carefully review the replies on the thread, but was interested if you had any comments, particularly on the latter case.","body":"I&#39;m not entirely sure I agree with this advice in at least two situations.  1) Custom rendered components 2) Using a <code>JEditorPane</code> with HTML that does not itself suggest a width.  OTOH I am not sure if I&#39;ve missed something.  I&#39;ll carefully review the replies on the thread, but was interested if you had any comments, particularly on the latter case."},{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":2,"creation_date":1314691326,"post_id":7229519,"comment_id":8707467,"body_markdown":"@Andrew Thompson 1) custom comps: it&#39;s the comp itself that&#39;s responsible for returning useful layout hints, if they dont the impl is buggy 2) even core comps are buggy ;-) 3) I dont mind white space (though it wasn&#39;t intentional this time, thanks :-)","body":"@Andrew Thompson 1) custom comps: it&#39;s the comp itself that&#39;s responsible for returning useful layout hints, if they dont the impl is buggy 2) even core comps are buggy ;-) 3) I dont mind white space (though it wasn&#39;t intentional this time, thanks :-)"},{"owner":{"account_id":162495,"reputation":3996,"user_id":383986,"accept_rate":99,"display_name":"davidahines"},"score":0,"creation_date":1346255459,"post_id":7229519,"comment_id":16308512,"body_markdown":"Doesn&#39;t changing to internal libraries to do what a 5 line method can do just in case someone ever makes the exact change that breaks your layout without reading you code violate YAGNI?","body":"Doesn&#39;t changing to internal libraries to do what a 5 line method can do just in case someone ever makes the exact change that breaks your layout without reading you code violate YAGNI?"},{"owner":{"account_id":408372,"reputation":8732,"user_id":778990,"display_name":"ignis"},"score":1,"creation_date":1351708297,"post_id":7229519,"comment_id":17913097,"body_markdown":"The links of the point 3 are archived [here](http://web.archive.org/web/20110614145256/http://wiki.java.net/twiki/bin/view/Javadesktop/SwingLabsImperialRules?TWIKISID=e1a6667476691b56753dc9b0744828c6#Do_not_use_component_setXXSize) and [here](http://web.archive.org/web/20100207211337/http://www.jguru.com/faq/view.jsp?EID=237070), respectively.","body":"The links of the point 3 are archived <a href=\"http://web.archive.org/web/20110614145256/http://wiki.java.net/twiki/bin/view/Javadesktop/SwingLabsImperialRules?TWIKISID=e1a6667476691b56753dc9b0744828c6#Do_not_use_component_setXXSize\" rel=\"nofollow noreferrer\">here</a> and <a href=\"http://web.archive.org/web/20100207211337/http://www.jguru.com/faq/view.jsp?EID=237070\" rel=\"nofollow noreferrer\">here</a>, respectively."},{"owner":{"account_id":408372,"reputation":8732,"user_id":778990,"display_name":"ignis"},"score":1,"creation_date":1351708355,"post_id":7229519,"comment_id":17913120,"body_markdown":"For the posterity: [more layout managers](http://web.archive.org/web/20110613055319/http://wiki.java.net/twiki/bin/view/Javadesktop/3rdParty?TWIKISID=e1a6667476691b56753dc9b0744828c6)","body":"For the posterity: <a href=\"http://web.archive.org/web/20110613055319/http://wiki.java.net/twiki/bin/view/Javadesktop/3rdParty?TWIKISID=e1a6667476691b56753dc9b0744828c6\" rel=\"nofollow noreferrer\">more layout managers</a>"},{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1351710158,"post_id":7229519,"comment_id":17913829,"body_markdown":"@ignis thanks for taking the trouble - wasn&#39;t aware that the old dev.java.net wiki isn&#39;t availabe any longer","body":"@ignis thanks for taking the trouble - wasn&#39;t aware that the old dev.java.net wiki isn&#39;t availabe any longer"},{"owner":{"account_id":63785,"reputation":2712,"user_id":188626,"accept_rate":89,"display_name":"Michael"},"score":15,"creation_date":1373378820,"post_id":7229519,"comment_id":25527968,"body_markdown":"I can&#39;t believe the accepted answer is the one that says to avoid using the setXXX() methods. Sometimes you simply need them to provide a hint to the layout manager. If you are laying out a panel then you should absolutely feel free to use these methods when necessary. Saying that I think if you use the appropriate layout manager you will find yourself not needing these methods very often, but on occasion you simply need them. Try putting a JComboBox or JSpinner in a X_AXIS BoxLayout and not use them, believe you will find you need setMaximumSize() there.","body":"I can&#39;t believe the accepted answer is the one that says to avoid using the setXXX() methods. Sometimes you simply need them to provide a hint to the layout manager. If you are laying out a panel then you should absolutely feel free to use these methods when necessary. Saying that I think if you use the appropriate layout manager you will find yourself not needing these methods very often, but on occasion you simply need them. Try putting a JComboBox or JSpinner in a X_AXIS BoxLayout and not use them, believe you will find you need setMaximumSize() there."},{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":6,"creation_date":1373379270,"post_id":7229519,"comment_id":25528312,"body_markdown":"@Michael no, I absolutely don&#39;t need it - the answer is always to use a decent LayoutManager and do any fine-tweaking on the _manager_ level (vs. the component-level)","body":"@Michael no, I absolutely don&#39;t need it - the answer is always to use a decent LayoutManager and do any fine-tweaking on the <i>manager</i> level (vs. the component-level)"},{"owner":{"account_id":2043549,"reputation":1360,"user_id":1824182,"accept_rate":83,"display_name":"Ti Strga"},"score":8,"creation_date":1394220969,"post_id":7229519,"comment_id":33808337,"body_markdown":"You keep saying &quot;use a decent LayoutManager and tell it what sizes you want&quot; all over stackoverflow, but you never give any specific examples of a &quot;decent&quot; LayoutManager.  And none of the standard managers permit controlling the sizes directly.","body":"You keep saying &quot;use a decent LayoutManager and tell it what sizes you want&quot; all over stackoverflow, but you never give any specific examples of a &quot;decent&quot; LayoutManager.  And none of the standard managers permit controlling the sizes directly."},{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":3,"creation_date":1394226165,"post_id":7229519,"comment_id":33811348,"body_markdown":"@TiStrga well, _never_ is clearly wrong (just tells me you didn&#39;t really try to verify that ;-) - at the end of the day such a recommendation is a personal  preference (you could even write your own). And I rarely hesitate to name my personel preference at any moment in time, which currently is MigLayout.","body":"@TiStrga well, <i>never</i> is clearly wrong (just tells me you didn&#39;t really try to verify that ;-) - at the end of the day such a recommendation is a personal  preference (you could even write your own). And I rarely hesitate to name my personel preference at any moment in time, which currently is MigLayout."},{"owner":{"account_id":37136,"reputation":57822,"user_id":106104,"accept_rate":62,"display_name":"user253751"},"score":1,"creation_date":1437177397,"post_id":7229519,"comment_id":50937171,"body_markdown":"You can also nest layouts. Nesting BoxLayouts works well for *some* designs, for example.","body":"You can also nest layouts. Nesting BoxLayouts works well for <i>some</i> designs, for example."},{"owner":{"account_id":5745825,"reputation":11553,"user_id":4537090,"accept_rate":79,"display_name":"WesternGun"},"score":2,"creation_date":1470044603,"post_id":7229519,"comment_id":64769784,"body_markdown":"Hi kleopatra, I have posted a question where I see setting the prefered size may be inevitable to get desirable result **even though I am using MigLayout**. Can you be so kind to have a look? It&#39;s [here](http://stackoverflow.com/questions/38659309/swing-miglayout-cannot-grow-fill-column-to-fill-container-length)","body":"Hi kleopatra, I have posted a question where I see setting the prefered size may be inevitable to get desirable result <b>even though I am using MigLayout</b>. Can you be so kind to have a look? It&#39;s <a href=\"http://stackoverflow.com/questions/38659309/swing-miglayout-cannot-grow-fill-column-to-fill-container-length\">here</a>"}],"tags":[],"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"comment_count":12,"down_vote_count":16,"up_vote_count":265,"is_accepted":true,"score":249,"last_activity_date":1441454907,"creation_date":1314617618,"answer_id":7229519,"question_id":7229226,"body_markdown":"1. &gt; Should I completely avoid the use of those methods?\r\n\r\n    Yes for application code.\r\n\r\n2. &gt; The methods have been defined for a reason. So when should I use them? In which context? For what purposes?\r\n\r\n    I don&#39;t know, personally I think of it as an API design accident. Slightly forced by compound components having special ideas about child sizes. &quot;Slightly&quot;, because they should have implemented their needs with a custom LayoutManager.\r\n\r\n3. &gt; What exactly are the negative consequences of using those methods? (I can only think adding portability between systems with different screen resolution.)\r\n\r\n    Some (incomplete, and unfortunately the links are broken due to migration of SwingLabs to java.net) technical reasons are for instance mentioned in the [Rules (hehe)][1] or in the [link][2] @bendicott found in his/her comment to [my answer][3]. Socially, posing tons of work onto your unfortunate fellow who has to maintain the code and has to track down a broken layout.\r\n\r\n4. &gt; I don&#39;t think any LayoutManager can exactly satisfy all desired layout needs. Do I really need to implement a new LayoutManager for every little variation on my layout?\r\n\r\n    Yes, there are LayoutManagers powerful enough to satisfy a very good approximation to &quot;all layout needs&quot;. The big three are JGoodies FormLayout, MigLayout, DesignGridLayout. So no, in practice, you rarely write LayoutManagers except for simple highly specialized environments.\r\n\r\n5. &gt; If the answer to 4 is &quot;yes&quot;, won&#39;t this lead to a proliferation of LayoutManager classes which will become difficult to maintain? \r\n\r\n    (The answer to 4 is &quot;no&quot;.)\r\n\r\n6. &gt; In a situation where I need to define proportions between children of a Component (for example, child 1 should use 10% of space, child 2 40%, child 3 50%), is it possible to achieve that without implementing a custom LayoutManager?\r\n\r\n    Any of the Big-Three can, can&#39;t even GridBag (never bothered to really master, too much trouble for too little power).\r\n\r\n\r\n  [1]: http://web.archive.org/web/20110614145256/http://wiki.java.net/twiki/bin/view/Javadesktop/SwingLabsImperialRules?TWIKISID=e1a6667476691b56753dc9b0744828c6#Do_not_use_component_setXXSize\r\n  [2]: http://web.archive.org/web/20100207211337/http://www.jguru.com/faq/view.jsp?EID=237070\r\n  [3]: https://stackoverflow.com/questions/7074514/images-in-jtable-cells-off-by-one-pixel","title":"Should I avoid the use of set(Preferred|Maximum|Minimum) size methods in Java Swing?","body":"<ol>\n<li><blockquote>\n  <p>Should I completely avoid the use of those methods?</p>\n</blockquote>\n\n<p>Yes for application code.</p></li>\n<li><blockquote>\n  <p>The methods have been defined for a reason. So when should I use them? In which context? For what purposes?</p>\n</blockquote>\n\n<p>I don't know, personally I think of it as an API design accident. Slightly forced by compound components having special ideas about child sizes. \"Slightly\", because they should have implemented their needs with a custom LayoutManager.</p></li>\n<li><blockquote>\n  <p>What exactly are the negative consequences of using those methods? (I can only think adding portability between systems with different screen resolution.)</p>\n</blockquote>\n\n<p>Some (incomplete, and unfortunately the links are broken due to migration of SwingLabs to java.net) technical reasons are for instance mentioned in the <a href=\"http://web.archive.org/web/20110614145256/http://wiki.java.net/twiki/bin/view/Javadesktop/SwingLabsImperialRules?TWIKISID=e1a6667476691b56753dc9b0744828c6#Do_not_use_component_setXXSize\" rel=\"noreferrer\">Rules (hehe)</a> or in the <a href=\"http://web.archive.org/web/20100207211337/http://www.jguru.com/faq/view.jsp?EID=237070\" rel=\"noreferrer\">link</a> @bendicott found in his/her comment to <a href=\"https://stackoverflow.com/questions/7074514/images-in-jtable-cells-off-by-one-pixel\">my answer</a>. Socially, posing tons of work onto your unfortunate fellow who has to maintain the code and has to track down a broken layout.</p></li>\n<li><blockquote>\n  <p>I don't think any LayoutManager can exactly satisfy all desired layout needs. Do I really need to implement a new LayoutManager for every little variation on my layout?</p>\n</blockquote>\n\n<p>Yes, there are LayoutManagers powerful enough to satisfy a very good approximation to \"all layout needs\". The big three are JGoodies FormLayout, MigLayout, DesignGridLayout. So no, in practice, you rarely write LayoutManagers except for simple highly specialized environments.</p></li>\n<li><blockquote>\n  <p>If the answer to 4 is \"yes\", won't this lead to a proliferation of LayoutManager classes which will become difficult to maintain? </p>\n</blockquote>\n\n<p>(The answer to 4 is \"no\".)</p></li>\n<li><blockquote>\n  <p>In a situation where I need to define proportions between children of a Component (for example, child 1 should use 10% of space, child 2 40%, child 3 50%), is it possible to achieve that without implementing a custom LayoutManager?</p>\n</blockquote>\n\n<p>Any of the Big-Three can, can't even GridBag (never bothered to really master, too much trouble for too little power).</p></li>\n</ol>\n"},{"comments":[{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":2,"creation_date":1314619648,"post_id":7229662,"comment_id":8692679,"body_markdown":"disagree (as you might have guessed :-) with reasoning by &quot;external factors&quot;: the XXSize properties is meant to express _internal only_ needs. Tweaking those from the outside is mis-using, aka hacking. If you want a (Internal- or J-) frame with a a specifc size relative to it&#39;s preferred ... size the frame, not the content","body":"disagree (as you might have guessed :-) with reasoning by &quot;external factors&quot;: the XXSize properties is meant to express <i>internal only</i> needs. Tweaking those from the outside is mis-using, aka hacking. If you want a (Internal- or J-) frame with a a specifc size relative to it&#39;s preferred ... size the frame, not the content"},{"owner":{"account_id":287824,"reputation":38852,"user_id":587884,"accept_rate":86,"display_name":"Heisenbug"},"score":2,"creation_date":1314619933,"post_id":7229662,"comment_id":8692768,"body_markdown":"@kleopatra: just to be a little bit insistent: if setXXSize methods should never been used from outside, why haven&#39;t been declared private or protected? Isn&#39;t this a lack of design? Doesn&#39;t the public modifier implicitly tell the user that can use those methods?","body":"@kleopatra: just to be a little bit insistent: if setXXSize methods should never been used from outside, why haven&#39;t been declared private or protected? Isn&#39;t this a lack of design? Doesn&#39;t the public modifier implicitly tell the user that can use those methods?"},{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":3,"creation_date":1314631796,"post_id":7229662,"comment_id":8696188,"body_markdown":"I have to agree with @kleopatra: `setPreferredSize()` always replaces the component&#39;s calculation with an arbitrary choice.","body":"I have to agree with @kleopatra: <code>setPreferredSize()</code> always replaces the component&#39;s calculation with an arbitrary choice."},{"owner":{"account_id":1331089,"reputation":1220,"user_id":1275002,"accept_rate":82,"display_name":"Rempelos"},"score":0,"creation_date":1348352170,"post_id":7229662,"comment_id":16898645,"body_markdown":"1) But why do we need the validate() in the above code? 2) I&#39;m confused with the second bullet, you say to not use the setXXSize() when we can rely on a component&#39;s carefully overridden getXXSize, but I can&#39;t see that in the code... I know this post is old but I wanted to clear some things","body":"1) But why do we need the validate() in the above code? 2) I&#39;m confused with the second bullet, you say to not use the setXXSize() when we can rely on a component&#39;s carefully overridden getXXSize, but I can&#39;t see that in the code... I know this post is old but I wanted to clear some things"},{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":1,"creation_date":1348360844,"post_id":7229662,"comment_id":16899856,"body_markdown":"@Rempelos: 1) In this context, `validate()` &quot;is used to cause a container to lay out its subcomponents.&quot; 2) The example adjusts the _scroll pane&#39;s_ preferred size, which relies on the enclosed panel&#39;s content, now established via `validate()`. Nothing will be inaccessibly clipped, as seen [here](http://stackoverflow.com/a/12532237/230513). Overriding `getPreferredSize()` is generally more flexible and more reliable. An alternative is to implement `Scrollable` and override `getPreferredScrollableViewportSize()`, as seen in `JTable`.","body":"@Rempelos: 1) In this context, <code>validate()</code> &quot;is used to cause a container to lay out its subcomponents.&quot; 2) The example adjusts the <i>scroll pane&#39;s</i> preferred size, which relies on the enclosed panel&#39;s content, now established via <code>validate()</code>. Nothing will be inaccessibly clipped, as seen <a href=\"http://stackoverflow.com/a/12532237/230513\">here</a>. Overriding <code>getPreferredSize()</code> is generally more flexible and more reliable. An alternative is to implement <code>Scrollable</code> and override <code>getPreferredScrollableViewportSize()</code>, as seen in <code>JTable</code>."},{"owner":{"account_id":1331089,"reputation":1220,"user_id":1275002,"accept_rate":82,"display_name":"Rempelos"},"score":0,"creation_date":1348422777,"post_id":7229662,"comment_id":16909335,"body_markdown":"Ok thanks... when you said that we can rely on a component&#39;s overridden getXXSize I thought that you actually overrode the method somewhere in your code, but I couldn&#39;t see that, this is why I got confused.","body":"Ok thanks... when you said that we can rely on a component&#39;s overridden getXXSize I thought that you actually overrode the method somewhere in your code, but I couldn&#39;t see that, this is why I got confused."},{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":0,"creation_date":1348447052,"post_id":7229662,"comment_id":16914255,"body_markdown":"Ah, `validate()` is what relies on the enclosed component&#39;s preferred size. Here&#39;s a more direct [example](http://stackoverflow.com/a/10110232/230513).","body":"Ah, <code>validate()</code> is what relies on the enclosed component&#39;s preferred size. Here&#39;s a more direct <a href=\"http://stackoverflow.com/a/10110232/230513\">example</a>."},{"owner":{"account_id":1151383,"reputation":36217,"user_id":1133011,"accept_rate":96,"display_name":"David Kroukamp"},"score":2,"creation_date":1349354599,"post_id":7229662,"comment_id":17189458,"body_markdown":"@trashgod +100 to you I think there is no problem with overriding these methods, even calling them (but of course this would mean you have a custom component thus overriding would be better)","body":"@trashgod +100 to you I think there is no problem with overriding these methods, even calling them (but of course this would mean you have a custom component thus overriding would be better)"},{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":7,"creation_date":1349365322,"post_id":7229662,"comment_id":17195102,"body_markdown":"@DavidKroukamp: Thank you. I defer to kleopatra&#39;s greater experience, but I see the value in examining the contrary view critically.","body":"@DavidKroukamp: Thank you. I defer to kleopatra&#39;s greater experience, but I see the value in examining the contrary view critically."}],"tags":[],"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"comment_count":9,"down_vote_count":0,"up_vote_count":109,"is_accepted":false,"score":109,"last_activity_date":1661983642,"creation_date":1314618532,"answer_id":7229662,"question_id":7229226,"body_markdown":"A few heuristics:\r\n\r\n- Don&#39;t use `set[Preferred|Maximum|Minimum]Size()` when you really mean to override `get[Preferred|Maximum|Minimum]Size()`, as might be done in creating your own component, shown [here][1].\r\n\r\n- Don&#39;t use `set[Preferred|Maximum|Minimum]Size()` when you could rely on a component&#39;s carefully overridden `getPreferred|Maximum|Minimum]Size`, as shown [here][2] and below.\r\n\r\n- Do use `set[Preferred|Maximum|Minimum]Size()` to derive post-`validate()` geometry, as shown below and [here][3].\r\n\r\n- If a component has no preferred size, e.g. `JDesktopPane`, you may have to size the container, _after_ invoking `pack()`, but any such choice is arbitrary. A comment may help clarify the intent.\r\n\r\n- Consider alternate or custom layouts when you find that you would have to loop through many components to obtain derived sizes, as mentioned in these [comments][4].\r\n\r\n![enter image description here][5]\r\n\r\n    \r\n    import java.awt.Component;\r\n    import java.awt.Dimension;\r\n    import java.awt.EventQueue;\r\n    import java.awt.GridLayout;\r\n    import java.awt.KeyboardFocusManager;\r\n    import java.beans.PropertyChangeEvent;\r\n    import java.beans.PropertyChangeListener;\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    import javax.swing.JComponent;\r\n    import javax.swing.JDesktopPane;\r\n    import javax.swing.JFrame;\r\n    import javax.swing.JInternalFrame;\r\n    import javax.swing.JLabel;\r\n    import javax.swing.JPanel;\r\n    import javax.swing.JScrollPane;\r\n    import javax.swing.JTextField;\r\n    import javax.swing.SwingUtilities;\r\n\r\n    /**\r\n     * @see https://stackoverflow.com/questions/7229226\r\n     * @see https://stackoverflow.com/questions/7228843\r\n     */\r\n    public class DesignTest {\r\n\r\n        private List&lt;JTextField&gt; list = new ArrayList&lt;JTextField&gt;();\r\n        private JPanel panel = new JPanel();\r\n        private JScrollPane sp = new JScrollPane(panel);\r\n\r\n        public static void main(String args[]) {\r\n            EventQueue.invokeLater(new Runnable() {\r\n\r\n                @Override\r\n                public void run() {\r\n                    DesignTest id = new DesignTest();\r\n                    id.create(&quot;My Project&quot;);\r\n                }\r\n            });\r\n        }\r\n\r\n        private void addField(String name) {\r\n            JTextField jtf = new JTextField(16);\r\n            panel.add(new JLabel(name, JLabel.LEFT));\r\n            panel.add(jtf);\r\n            list.add(jtf);\r\n        }\r\n\r\n        private void create(String strProjectName) {\r\n            panel.setLayout(new GridLayout(0, 1));\r\n            addField(&quot;First Name:&quot;);\r\n            addField(&quot;Last Name:&quot;);\r\n            addField(&quot;Address:&quot;);\r\n            addField(&quot;City:&quot;);\r\n            addField(&quot;Zip Code:&quot;);\r\n            addField(&quot;Phone:&quot;);\r\n            addField(&quot;Email Id:&quot;);\r\n            KeyboardFocusManager.getCurrentKeyboardFocusManager()\r\n                .addPropertyChangeListener(&quot;permanentFocusOwner&quot;,\r\n                new FocusDrivenScroller(panel));\r\n            // Show half the fields\r\n            sp.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);\r\n            sp.validate();\r\n            Dimension d = sp.getPreferredSize();\r\n            d.setSize(d.width, d.height / 2);\r\n            sp.setPreferredSize(d);\r\n\r\n            JInternalFrame internaFrame = new JInternalFrame();\r\n            internaFrame.add(sp);\r\n            internaFrame.pack();\r\n            internaFrame.setVisible(true);\r\n\r\n            JDesktopPane desktopPane = new JDesktopPane();\r\n            desktopPane.add(internaFrame);\r\n\r\n            JFrame frmtest = new JFrame();\r\n            frmtest.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n            frmtest.add(desktopPane);\r\n            frmtest.pack();\r\n            // User&#39;s preference should be read from java.util.prefs.Preferences\r\n            frmtest.setSize(400, 300);\r\n            frmtest.setLocationRelativeTo(null);\r\n            frmtest.setVisible(true);\r\n            list.get(0).requestFocusInWindow();\r\n        }\r\n\r\n        private static class FocusDrivenScroller implements PropertyChangeListener {\r\n\r\n            private JComponent parent;\r\n\r\n            public FocusDrivenScroller(JComponent parent) {\r\n                this.parent = parent;\r\n            }\r\n\r\n            @Override\r\n            public void propertyChange(PropertyChangeEvent evt) {\r\n                Component focused = (Component) evt.getNewValue();\r\n                if (focused != null\r\n                    &amp;&amp; SwingUtilities.isDescendingFrom(focused, parent)) {\r\n                    parent.scrollRectToVisible(focused.getBounds());\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/10110232/230513\r\n  [2]: https://stackoverflow.com/questions/3174765/variable-layout-in-swing/3175280#3175280\r\n  [3]: https://stackoverflow.com/questions/3174765/variable-layout-in-swing/3175280#3175280\r\n  [4]: https://stackoverflow.com/questions/3174765/variable-layout-in-swing/3175280#3175280\r\n  [5]: http://i.stack.imgur.com/hYh36.png","title":"Should I avoid the use of set(Preferred|Maximum|Minimum) size methods in Java Swing?","body":"<p>A few heuristics:</p>\n<ul>\n<li><p>Don't use <code>set[Preferred|Maximum|Minimum]Size()</code> when you really mean to override <code>get[Preferred|Maximum|Minimum]Size()</code>, as might be done in creating your own component, shown <a href=\"https://stackoverflow.com/a/10110232/230513\">here</a>.</p>\n</li>\n<li><p>Don't use <code>set[Preferred|Maximum|Minimum]Size()</code> when you could rely on a component's carefully overridden <code>getPreferred|Maximum|Minimum]Size</code>, as shown <a href=\"https://stackoverflow.com/questions/3174765/variable-layout-in-swing/3175280#3175280\">here</a> and below.</p>\n</li>\n<li><p>Do use <code>set[Preferred|Maximum|Minimum]Size()</code> to derive post-<code>validate()</code> geometry, as shown below and <a href=\"https://stackoverflow.com/questions/3174765/variable-layout-in-swing/3175280#3175280\">here</a>.</p>\n</li>\n<li><p>If a component has no preferred size, e.g. <code>JDesktopPane</code>, you may have to size the container, <em>after</em> invoking <code>pack()</code>, but any such choice is arbitrary. A comment may help clarify the intent.</p>\n</li>\n<li><p>Consider alternate or custom layouts when you find that you would have to loop through many components to obtain derived sizes, as mentioned in these <a href=\"https://stackoverflow.com/questions/3174765/variable-layout-in-swing/3175280#3175280\">comments</a>.</p>\n</li>\n</ul>\n<p><img src=\"https://i.stack.imgur.com/hYh36.png\" alt=\"enter image description here\" /></p>\n<pre><code>import java.awt.Component;\nimport java.awt.Dimension;\nimport java.awt.EventQueue;\nimport java.awt.GridLayout;\nimport java.awt.KeyboardFocusManager;\nimport java.beans.PropertyChangeEvent;\nimport java.beans.PropertyChangeListener;\nimport java.util.ArrayList;\nimport java.util.List;\nimport javax.swing.JComponent;\nimport javax.swing.JDesktopPane;\nimport javax.swing.JFrame;\nimport javax.swing.JInternalFrame;\nimport javax.swing.JLabel;\nimport javax.swing.JPanel;\nimport javax.swing.JScrollPane;\nimport javax.swing.JTextField;\nimport javax.swing.SwingUtilities;\n\n/**\n * @see https://stackoverflow.com/questions/7229226\n * @see https://stackoverflow.com/questions/7228843\n */\npublic class DesignTest {\n\n    private List&lt;JTextField&gt; list = new ArrayList&lt;JTextField&gt;();\n    private JPanel panel = new JPanel();\n    private JScrollPane sp = new JScrollPane(panel);\n\n    public static void main(String args[]) {\n        EventQueue.invokeLater(new Runnable() {\n\n            @Override\n            public void run() {\n                DesignTest id = new DesignTest();\n                id.create(&quot;My Project&quot;);\n            }\n        });\n    }\n\n    private void addField(String name) {\n        JTextField jtf = new JTextField(16);\n        panel.add(new JLabel(name, JLabel.LEFT));\n        panel.add(jtf);\n        list.add(jtf);\n    }\n\n    private void create(String strProjectName) {\n        panel.setLayout(new GridLayout(0, 1));\n        addField(&quot;First Name:&quot;);\n        addField(&quot;Last Name:&quot;);\n        addField(&quot;Address:&quot;);\n        addField(&quot;City:&quot;);\n        addField(&quot;Zip Code:&quot;);\n        addField(&quot;Phone:&quot;);\n        addField(&quot;Email Id:&quot;);\n        KeyboardFocusManager.getCurrentKeyboardFocusManager()\n            .addPropertyChangeListener(&quot;permanentFocusOwner&quot;,\n            new FocusDrivenScroller(panel));\n        // Show half the fields\n        sp.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);\n        sp.validate();\n        Dimension d = sp.getPreferredSize();\n        d.setSize(d.width, d.height / 2);\n        sp.setPreferredSize(d);\n\n        JInternalFrame internaFrame = new JInternalFrame();\n        internaFrame.add(sp);\n        internaFrame.pack();\n        internaFrame.setVisible(true);\n\n        JDesktopPane desktopPane = new JDesktopPane();\n        desktopPane.add(internaFrame);\n\n        JFrame frmtest = new JFrame();\n        frmtest.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        frmtest.add(desktopPane);\n        frmtest.pack();\n        // User's preference should be read from java.util.prefs.Preferences\n        frmtest.setSize(400, 300);\n        frmtest.setLocationRelativeTo(null);\n        frmtest.setVisible(true);\n        list.get(0).requestFocusInWindow();\n    }\n\n    private static class FocusDrivenScroller implements PropertyChangeListener {\n\n        private JComponent parent;\n\n        public FocusDrivenScroller(JComponent parent) {\n            this.parent = parent;\n        }\n\n        @Override\n        public void propertyChange(PropertyChangeEvent evt) {\n            Component focused = (Component) evt.getNewValue();\n            if (focused != null\n                &amp;&amp; SwingUtilities.isDescendingFrom(focused, parent)) {\n                parent.scrollRectToVisible(focused.getBounds());\n            }\n        }\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":3,"creation_date":1349078400,"post_id":12665828,"comment_id":17096026,"body_markdown":"_provide customized size hints_ that&#39;s a contradiction in itself: providing sizing hints (in px!) is the _exclusive_ task of the component. It calculates them based on internal state details that no other party except itself can know (nor can keep track of). From client perspective, the means of customization can be a suitable LayoutManager and/or specialize api on the component that allows configuring size requirements in terms of &quot;semantic&quot; size-relevant properties, f.i. number of rows/columns in a text component","body":"<i>provide customized size hints</i> that&#39;s a contradiction in itself: providing sizing hints (in px!) is the <i>exclusive</i> task of the component. It calculates them based on internal state details that no other party except itself can know (nor can keep track of). From client perspective, the means of customization can be a suitable LayoutManager and/or specialize api on the component that allows configuring size requirements in terms of &quot;semantic&quot; size-relevant properties, f.i. number of rows/columns in a text component"},{"owner":{"account_id":1151383,"reputation":36217,"user_id":1133011,"accept_rate":96,"display_name":"David Kroukamp"},"score":4,"creation_date":1349078787,"post_id":12665828,"comment_id":17096137,"body_markdown":"@kleopatra I would still love to know why Oracle then tells us how to use these methods and the correct way to use them. We might have our own preferences but we cant say the designers ment it to not be used when there is no evidence to suggest this. But thats why I put up the bounty see maybe if it would attract others that could give a information from a credible source where oracle states to not use these methods at all (thus making it bad practice if you do, for example setMinimumSize has to be called on things like JSplitPane etc this can be seen in the Oracle tutorial of split panes.","body":"@kleopatra I would still love to know why Oracle then tells us how to use these methods and the correct way to use them. We might have our own preferences but we cant say the designers ment it to not be used when there is no evidence to suggest this. But thats why I put up the bounty see maybe if it would attract others that could give a information from a credible source where oracle states to not use these methods at all (thus making it bad practice if you do, for example setMinimumSize has to be called on things like JSplitPane etc this can be seen in the Oracle tutorial of split panes."},{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":4,"creation_date":1349125083,"post_id":12665828,"comment_id":17114984,"body_markdown":"@David: I&#39;ve come to see the `setXxxSize` methods as a red flag that I&#39;m may wind up [here](http://stackoverflow.com/a/6785121/230513), even when the docs suggest it. I _almost always_ should have overridden `getXxxSize`, where one has access to the required geometry; and even short examples get recycled more  than I want to think about. +1 for mentioning variation among layout managers and citing the tutorial.","body":"@David: I&#39;ve come to see the <code>setXxxSize</code> methods as a red flag that I&#39;m may wind up <a href=\"http://stackoverflow.com/a/6785121/230513\">here</a>, even when the docs suggest it. I <i>almost always</i> should have overridden <code>getXxxSize</code>, where one has access to the required geometry; and even short examples get recycled more  than I want to think about. +1 for mentioning variation among layout managers and citing the tutorial."},{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":1,"creation_date":1349364489,"post_id":12665828,"comment_id":17194672,"body_markdown":"D&#39;oh, in my comment above, I meant to cite the answer [here](http://stackoverflow.com/a/12532237/230513).","body":"D&#39;oh, in my comment above, I meant to cite the answer <a href=\"http://stackoverflow.com/a/12532237/230513\">here</a>."},{"owner":{"account_id":87845,"reputation":15821,"user_id":243373,"accept_rate":100,"display_name":"TT."},"score":16,"creation_date":1370521903,"post_id":12665828,"comment_id":24495829,"body_markdown":"+1 &quot;No, there is no formal evidence to suggest calling or overriding these methods is not allowed.&quot; Spot on. The post tagged as answer is plain BS.","body":"+1 &quot;No, there is no formal evidence to suggest calling or overriding these methods is not allowed.&quot; Spot on. The post tagged as answer is plain BS."}],"tags":[],"owner":{"account_id":1151383,"reputation":36217,"user_id":1133011,"accept_rate":96,"display_name":"David Kroukamp"},"comment_count":5,"down_vote_count":1,"up_vote_count":54,"is_accepted":false,"score":53,"last_activity_date":1532618082,"creation_date":1349045452,"answer_id":12665828,"question_id":7229226,"body_markdown":"&gt; Should I completely avoid the use of those methods?\r\n\r\nNo, there is no formal evidence to suggest calling or overriding these methods is not allowed. In fact, Oracle says these methods are used for giving size hints: http://docs.oracle.com/javase/tutorial/uiswing/layout/using.html#sizealignment.\r\n\r\nThey may also be overridden (which is the best practice for Swing) when *extending* a Swing component (rather than calling the method on the custom component instance)\r\n\r\nMost importantly no matter how you specify your component&#39;s size, be sure that your component&#39;s container uses a layout manager that respects the requested size of the component. \r\n\r\n&gt; The methods have been defined for a reason. So when should I use them?\r\n&gt; In which context? For what purposes?\r\n\r\nWhen you need to provide customized size hints to the containers Layout manager so that the component will be laid out well\r\n\r\n&gt; What exactly are the negative consequences of using those methods? (I\r\n&gt; can only think to add portability between systems with different\r\n&gt; screen resolution).\r\n\r\n- Many layout managers do not pay attention to a component&#39;s requested maximum size. However, `BoxLayout` and `SpringLayout` do. Furthermore, `GroupLayout` provides the ability to set the minimum, preferred or maximum size explicitly, without touching the component.\r\n\r\n- Make sure that you really need to set the component&#39;s exact size. Each Swing component has a different preferred size, depending on the font it uses and the look and feel. Thus having a set size might produce varied *looks* of the UI on different Systems\r\n\r\n- sometimes problems can be encountered with `GridBagLayout` and text fields, wherein if the size of the container is smaller than the preferred size, the minimum size gets used, which can cause text fields to shrink quite substantially.\r\n\r\n- `JFrame` does not enforce overriden `getMinimumSize()` only calling `setMinimumSize(..)` on its works\r\n\r\n&gt; I don&#39;t think any LayoutManager can exactly satisfy all desired layout\r\n&gt; needs. Do I really need to implement a new LayoutManager for every\r\n&gt; little variation on my layout?\r\n\r\nIf by implementing you mean using then yes. Not one `LayoutManger` can handle everything, each `LayoutManager` has its pros and cons thus each can be used together to produce the final layout.\r\n\r\n**Reference:**\r\n\r\n- http://docs.oracle.com/javase/tutorial/uiswing/layout/problems.html","title":"Should I avoid the use of set(Preferred|Maximum|Minimum) size methods in Java Swing?","body":"<blockquote>\n  <p>Should I completely avoid the use of those methods?</p>\n</blockquote>\n\n<p>No, there is no formal evidence to suggest calling or overriding these methods is not allowed. In fact, Oracle says these methods are used for giving size hints: <a href=\"http://docs.oracle.com/javase/tutorial/uiswing/layout/using.html#sizealignment\" rel=\"noreferrer\">http://docs.oracle.com/javase/tutorial/uiswing/layout/using.html#sizealignment</a>.</p>\n\n<p>They may also be overridden (which is the best practice for Swing) when <em>extending</em> a Swing component (rather than calling the method on the custom component instance)</p>\n\n<p>Most importantly no matter how you specify your component's size, be sure that your component's container uses a layout manager that respects the requested size of the component. </p>\n\n<blockquote>\n  <p>The methods have been defined for a reason. So when should I use them?\n  In which context? For what purposes?</p>\n</blockquote>\n\n<p>When you need to provide customized size hints to the containers Layout manager so that the component will be laid out well</p>\n\n<blockquote>\n  <p>What exactly are the negative consequences of using those methods? (I\n  can only think to add portability between systems with different\n  screen resolution).</p>\n</blockquote>\n\n<ul>\n<li><p>Many layout managers do not pay attention to a component's requested maximum size. However, <code>BoxLayout</code> and <code>SpringLayout</code> do. Furthermore, <code>GroupLayout</code> provides the ability to set the minimum, preferred or maximum size explicitly, without touching the component.</p></li>\n<li><p>Make sure that you really need to set the component's exact size. Each Swing component has a different preferred size, depending on the font it uses and the look and feel. Thus having a set size might produce varied <em>looks</em> of the UI on different Systems</p></li>\n<li><p>sometimes problems can be encountered with <code>GridBagLayout</code> and text fields, wherein if the size of the container is smaller than the preferred size, the minimum size gets used, which can cause text fields to shrink quite substantially.</p></li>\n<li><p><code>JFrame</code> does not enforce overriden <code>getMinimumSize()</code> only calling <code>setMinimumSize(..)</code> on its works</p></li>\n</ul>\n\n<blockquote>\n  <p>I don't think any LayoutManager can exactly satisfy all desired layout\n  needs. Do I really need to implement a new LayoutManager for every\n  little variation on my layout?</p>\n</blockquote>\n\n<p>If by implementing you mean using then yes. Not one <code>LayoutManger</code> can handle everything, each <code>LayoutManager</code> has its pros and cons thus each can be used together to produce the final layout.</p>\n\n<p><strong>Reference:</strong></p>\n\n<ul>\n<li><a href=\"http://docs.oracle.com/javase/tutorial/uiswing/layout/problems.html\" rel=\"noreferrer\">http://docs.oracle.com/javase/tutorial/uiswing/layout/problems.html</a></li>\n</ul>\n"},{"comments":[{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":1,"creation_date":1373388537,"post_id":15622005,"comment_id":25534304,"body_markdown":"either there&#39;s a slight misconception (on your part) or misunderstanding (on my part), take your choice :-) You keep repeating (here, in your blog, in your answer related to BoxLayout) the _set_ XXSize as being important - actually the LayoutManager is (or not) interested in the XXSize, that is the _sizing hint_ independent on how it came about (internal calculation by the component or manually forced by application code)","body":"either there&#39;s a slight misconception (on your part) or misunderstanding (on my part), take your choice :-) You keep repeating (here, in your blog, in your answer related to BoxLayout) the <i>set</i> XXSize as being important - actually the LayoutManager is (or not) interested in the XXSize, that is the <i>sizing hint</i> independent on how it came about (internal calculation by the component or manually forced by application code)"},{"owner":{"account_id":63785,"reputation":2712,"user_id":188626,"accept_rate":89,"display_name":"Michael"},"score":1,"creation_date":1373407635,"post_id":15622005,"comment_id":25544127,"body_markdown":"I am not sure I understand what you are getting at here. I mention above that the XXSize() methods are just hints. I really see nothing wrong with giving a layout manager a little hint, if needed. In my swing code, you will find an occasional setXXSize() method. Not many, but every once in a while I find they are needed. JComboBox and JSpinner frequently need hints. Especially a JComboBox that is populated after it is realized. You seem to be against any and all usage of these methods and I don&#39;t know why. (maybe I am the one missing the boat on this I guess).","body":"I am not sure I understand what you are getting at here. I mention above that the XXSize() methods are just hints. I really see nothing wrong with giving a layout manager a little hint, if needed. In my swing code, you will find an occasional setXXSize() method. Not many, but every once in a while I find they are needed. JComboBox and JSpinner frequently need hints. Especially a JComboBox that is populated after it is realized. You seem to be against any and all usage of these methods and I don&#39;t know why. (maybe I am the one missing the boat on this I guess)."},{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":5,"creation_date":1373443363,"post_id":15622005,"comment_id":25554577,"body_markdown":"not the _methods_ are the hints, the _properties_ are: the components should report something reasonable for all hints, some (as f.i. JComboBox) don&#39;t - in returning maxInteger or so. That&#39;s a bug and should be fixed by the combo. As to your habit: be sure to be far away when the maintainer collegue has to clean that up :) Hard-coded hints tend to wreck the layout at the slightest change and are hard to detect as the reason for a broken layout.","body":"not the <i>methods</i> are the hints, the <i>properties</i> are: the components should report something reasonable for all hints, some (as f.i. JComboBox) don&#39;t - in returning maxInteger or so. That&#39;s a bug and should be fixed by the combo. As to your habit: be sure to be far away when the maintainer collegue has to clean that up :) Hard-coded hints tend to wreck the layout at the slightest change and are hard to detect as the reason for a broken layout."}],"tags":[],"owner":{"account_id":63785,"reputation":2712,"user_id":188626,"accept_rate":89,"display_name":"Michael"},"comment_count":3,"down_vote_count":2,"up_vote_count":20,"is_accepted":false,"score":18,"last_activity_date":1364236179,"creation_date":1364235825,"answer_id":15622005,"question_id":7229226,"body_markdown":"These methods are poorly understood by most people. You should absolutely not ignore these methods. It is up to the layout manager if they honor these methods. This page has a table that shows which layout managers honor which of those methods:\r\n\r\nhttp://thebadprogrammer.com/swing-layout-manager-sizing/\r\n\r\nI have been writing Swing code for 8+ years and the layout managers included in the JDK have always served my needs. I have never needed a 3rd party layout manager to achieve my layouts.\r\n\r\nI will say that you shouldn&#39;t try to give the layout manager hints with these methods until you are sure you need them. Do your layout without giving any sizing hints (i.e. let the layout manager do its job) and then you can make minor corrections if you need to.","title":"Should I avoid the use of set(Preferred|Maximum|Minimum) size methods in Java Swing?","body":"<p>These methods are poorly understood by most people. You should absolutely not ignore these methods. It is up to the layout manager if they honor these methods. This page has a table that shows which layout managers honor which of those methods:</p>\n\n<p><a href=\"http://thebadprogrammer.com/swing-layout-manager-sizing/\">http://thebadprogrammer.com/swing-layout-manager-sizing/</a></p>\n\n<p>I have been writing Swing code for 8+ years and the layout managers included in the JDK have always served my needs. I have never needed a 3rd party layout manager to achieve my layouts.</p>\n\n<p>I will say that you shouldn't try to give the layout manager hints with these methods until you are sure you need them. Do your layout without giving any sizing hints (i.e. let the layout manager do its job) and then you can make minor corrections if you need to.</p>\n"},{"comments":[{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":2,"creation_date":1394489721,"post_id":22306554,"comment_id":33904857,"body_markdown":"+1 a considerate answer - just disagree with _they aren&#39;t inherently evil_ simply because they are :-) Typically, outside clients have no chance whatsoever to guess - and mere assumptions are as close as outsiders can get - halfway correct layout hints: only the components themselves do have all the info at all times to return anything useful. And since the moment outsiders interfere it&#39;s their responsiblity to keep those hints up-to-date which they can&#39;t.","body":"+1 a considerate answer - just disagree with <i>they aren&#39;t inherently evil</i> simply because they are :-) Typically, outside clients have no chance whatsoever to guess - and mere assumptions are as close as outsiders can get - halfway correct layout hints: only the components themselves do have all the info at all times to return anything useful. And since the moment outsiders interfere it&#39;s their responsiblity to keep those hints up-to-date which they can&#39;t."},{"owner":{"account_id":305991,"reputation":39137,"user_id":616460,"accept_rate":93,"display_name":"Jason C"},"score":2,"creation_date":1394490152,"post_id":22306554,"comment_id":33905071,"body_markdown":"Well, you know, I have a more &quot;guns don&#39;t kill people, people kill people&quot; kind of view of these sorts of things. :) *If* somebody uses these methods, they *need* to be aware of things like the good points you raise about unpredictable usage of layout hints (which is why situations where these methods are appropriate are rare indeed).","body":"Well, you know, I have a more &quot;guns don&#39;t kill people, people kill people&quot; kind of view of these sorts of things. :) <i>If</i> somebody uses these methods, they <i>need</i> to be aware of things like the good points you raise about unpredictable usage of layout hints (which is why situations where these methods are appropriate are rare indeed)."},{"owner":{"account_id":7805313,"reputation":1804,"user_id":5903395,"display_name":"Gee Bee"},"score":0,"creation_date":1489341170,"post_id":22306554,"comment_id":72618235,"body_markdown":"I think setting preferred size is not a big red flag at all. Not setting it _is_ a big red flag instead. Let me elaborate. The layout manager - no matter how smart it is - has no idea about the logical function of a gui widget. For example, the layout manager can not distinguish between a JTextField for entering ZIP code, and a JTextField for entering a name. Similarly it can not distinguish between a tool button next to a JTextField or a big OK button at the bottom of a form. Therefore either a better widget set, or some sizing hints are needed, no?","body":"I think setting preferred size is not a big red flag at all. Not setting it <i>is</i> a big red flag instead. Let me elaborate. The layout manager - no matter how smart it is - has no idea about the logical function of a gui widget. For example, the layout manager can not distinguish between a JTextField for entering ZIP code, and a JTextField for entering a name. Similarly it can not distinguish between a tool button next to a JTextField or a big OK button at the bottom of a form. Therefore either a better widget set, or some sizing hints are needed, no?"},{"owner":{"account_id":305991,"reputation":39137,"user_id":616460,"accept_rate":93,"display_name":"Jason C"},"score":0,"creation_date":1489342087,"post_id":22306554,"comment_id":72618592,"body_markdown":"@GeeBee Nope, that&#39;s a prime example of a red flag, in fact. What you *should* do is use [`JTextField.setColumns`](https://docs.oracle.com/javase/7/docs/api/javax/swing/JTextField.html#setColumns(int)) to set the column count, which adjusts the preferred size accordingly. If you do `setPreferredSize` then you&#39;re hard-coding a size, which will break your layouts depending on the platform font size. [Here are some text fields in a grid bag layout with `setColumns` called appropriately](http://i.imgur.com/p0i5nST.png). For your buttons, use appropriate layouts/grid weights to control the sizes.","body":"@GeeBee Nope, that&#39;s a prime example of a red flag, in fact. What you <i>should</i> do is use <a href=\"https://docs.oracle.com/javase/7/docs/api/javax/swing/JTextField.html#setColumns(int)\" rel=\"nofollow noreferrer\"><code>JTextField.setColumns</code></a> to set the column count, which adjusts the preferred size accordingly. If you do <code>setPreferredSize</code> then you&#39;re hard-coding a size, which will break your layouts depending on the platform font size. <a href=\"http://i.imgur.com/p0i5nST.png\" rel=\"nofollow noreferrer\">Here are some text fields in a grid bag layout with <code>setColumns</code> called appropriately</a>. For your buttons, use appropriate layouts/grid weights to control the sizes."},{"owner":{"account_id":305991,"reputation":39137,"user_id":616460,"accept_rate":93,"display_name":"Jason C"},"score":0,"creation_date":1489342331,"post_id":22306554,"comment_id":72618683,"body_markdown":"@GeeBee And now, with that done correctly, notice how the text field widths are decreased when I decrease the font size: https://i.snag.gy/ZULulh.jpg. Even changing the font size on the fly now works automatically, rather than you, say, having to recalculate all text field widths and explicitly call setPreferredSize again for each, all you have to do is invalidate the layout and their sizes will adjust.","body":"@GeeBee And now, with that done correctly, notice how the text field widths are decreased when I decrease the font size: <a href=\"https://i.snag.gy/ZULulh.jpg\" rel=\"nofollow noreferrer\">i.snag.gy/ZULulh.jpg</a>. Even changing the font size on the fly now works automatically, rather than you, say, having to recalculate all text field widths and explicitly call setPreferredSize again for each, all you have to do is invalidate the layout and their sizes will adjust."},{"owner":{"account_id":7805313,"reputation":1804,"user_id":5903395,"display_name":"Gee Bee"},"score":0,"creation_date":1489342539,"post_id":22306554,"comment_id":72618753,"body_markdown":"I don&#39;t suggesting hardcoding any dimension without considering font size - sorry if it was not came trough straight. What I wanted to point out is that the layout manager has no idea about the logical function of a widget, and therefore the meaningful sizing operations unless we give a sizing hint. For example, shrinking a 5 digit ZIP code textfield to 15px wide - just because it has some weight and the user shrinks the window with no constraints is just purerly wrong. But shrinking an 50 char email field to 10 chars is ok. Layout manager does not see the difference unless we tell so.","body":"I don&#39;t suggesting hardcoding any dimension without considering font size - sorry if it was not came trough straight. What I wanted to point out is that the layout manager has no idea about the logical function of a widget, and therefore the meaningful sizing operations unless we give a sizing hint. For example, shrinking a 5 digit ZIP code textfield to 15px wide - just because it has some weight and the user shrinks the window with no constraints is just purerly wrong. But shrinking an 50 char email field to 10 chars is ok. Layout manager does not see the difference unless we tell so."},{"owner":{"account_id":7805313,"reputation":1804,"user_id":5903395,"display_name":"Gee Bee"},"score":0,"creation_date":1489342869,"post_id":22306554,"comment_id":72618873,"body_markdown":"This includes setting min, preferred, and max sizes - it would be so nice if we could set that in chars (setColumns). Do we have setColumns for min-preferred-max, and for width and height as well? Can you tell easily that a JList in a JScrollpane shall have minimum 2 _lines_ and maximum 10 _lines_ visible, _without_ setting the sizing hints? \n\nOf course, I do not suggest to use hardcode numbers, as the pixel dimensions depend on the font, on the header height of the JList, and so on... but the bottom line is that we need to set.","body":"This includes setting min, preferred, and max sizes - it would be so nice if we could set that in chars (setColumns). Do we have setColumns for min-preferred-max, and for width and height as well? Can you tell easily that a JList in a JScrollpane shall have minimum 2 <i>lines</i> and maximum 10 <i>lines</i> visible, <i>without</i> setting the sizing hints?   Of course, I do not suggest to use hardcode numbers, as the pixel dimensions depend on the font, on the header height of the JList, and so on... but the bottom line is that we need to set."}],"tags":[],"owner":{"account_id":305991,"reputation":39137,"user_id":616460,"accept_rate":93,"display_name":"Jason C"},"comment_count":7,"down_vote_count":0,"up_vote_count":26,"is_accepted":false,"score":26,"last_activity_date":1394490361,"creation_date":1394470978,"answer_id":22306554,"question_id":7229226,"body_markdown":"There are a lot of good answers here but I want to add a little more about the reasons *why* you should normally avoid these (the question just came up again in a duplicate topic):\r\n\r\nWith few exceptions, if you are using these methods you are probably fine-tuning your GUI to look good on a specific look-and-feel (and with your system-specific settings, e.g. your preferred desktop font, etc.). The methods themselves aren&#39;t inherently evil, but the typical reasons for using them *are*. As soon as you start tuning pixel positions and sizes in a layout you run the risk of your GUI breaking (or at minimum, looking bad), on other platforms.\r\n\r\nAs an example of this, try changing your application&#39;s default look-and-feel. Even just with the options available on your platform, you may be surprised at how poorly the results can be rendered.\r\n\r\nSo, in the name of keeping your GUI functional and nice-looking on all platforms (remember, one of the major benefits of Java is its cross-platformness), you should rely on layout managers, etc., to automatically adjust the sizes of your components so that it renders correctly outside of your specific development environment.\r\n\r\nAll that said, you can certainly conceive of situations where these methods are justified. Again, they aren&#39;t inherently evil, but their usage is normally a **big** red flag indicating potential GUI issues. Just make sure you are aware of the high potential for complications if/when you use them, and always try and think if there is another look-and-feel-independent solution to your problems -- more often than not you will find that these methods are not necessary.\r\n\r\nBy the way, if you find yourself getting frustrated with standard layout managers, there are a lot of good free, open-source third-party ones, for example [JGoodies&#39; `FormLayout`](http://www.jgoodies.com/freeware/libraries/forms/), or [`MigLayout`](http://www.miglayout.com/). Some GUI builders even have built-in support for third-party layout managers -- Eclipse&#39;s WindowBuilder GUI editor, for example, ships with support for `FormLayout` and `MigLayout`.","title":"Should I avoid the use of set(Preferred|Maximum|Minimum) size methods in Java Swing?","body":"<p>There are a lot of good answers here but I want to add a little more about the reasons <em>why</em> you should normally avoid these (the question just came up again in a duplicate topic):</p>\n\n<p>With few exceptions, if you are using these methods you are probably fine-tuning your GUI to look good on a specific look-and-feel (and with your system-specific settings, e.g. your preferred desktop font, etc.). The methods themselves aren't inherently evil, but the typical reasons for using them <em>are</em>. As soon as you start tuning pixel positions and sizes in a layout you run the risk of your GUI breaking (or at minimum, looking bad), on other platforms.</p>\n\n<p>As an example of this, try changing your application's default look-and-feel. Even just with the options available on your platform, you may be surprised at how poorly the results can be rendered.</p>\n\n<p>So, in the name of keeping your GUI functional and nice-looking on all platforms (remember, one of the major benefits of Java is its cross-platformness), you should rely on layout managers, etc., to automatically adjust the sizes of your components so that it renders correctly outside of your specific development environment.</p>\n\n<p>All that said, you can certainly conceive of situations where these methods are justified. Again, they aren't inherently evil, but their usage is normally a <strong>big</strong> red flag indicating potential GUI issues. Just make sure you are aware of the high potential for complications if/when you use them, and always try and think if there is another look-and-feel-independent solution to your problems -- more often than not you will find that these methods are not necessary.</p>\n\n<p>By the way, if you find yourself getting frustrated with standard layout managers, there are a lot of good free, open-source third-party ones, for example <a href=\"http://www.jgoodies.com/freeware/libraries/forms/\">JGoodies' <code>FormLayout</code></a>, or <a href=\"http://www.miglayout.com/\"><code>MigLayout</code></a>. Some GUI builders even have built-in support for third-party layout managers -- Eclipse's WindowBuilder GUI editor, for example, ships with support for <code>FormLayout</code> and <code>MigLayout</code>.</p>\n"},{"comments":[{"owner":{"account_id":153967,"reputation":1960,"user_id":369604,"accept_rate":77,"display_name":"Loduwijk"},"score":0,"creation_date":1489074183,"post_id":35442048,"comment_id":72520972,"body_markdown":"Really? This was at 0? This is better than the accepted answer that has 100+ ups. That basically says &quot;Thou shalt nevar use setPreferredSize!&quot; which is TERRIBLE. In my line of work, there are a LOT of specific size requirements, such as &quot;Buttons on touch screens must be [X] by [Y] with [M]x[N] spacing between&quot; safety requirement. `btnBar.setPreferredSize( dimTouchBtn );` is the best way to do that. Straightforward, no need for custom layout manager. I use mostly `GridBagLayout` with some `BorderLayout` and `BoxLayout`, nesting when convenient. This is a strong combination and easy to use.","body":"Really? This was at 0? This is better than the accepted answer that has 100+ ups. That basically says &quot;Thou shalt nevar use setPreferredSize!&quot; which is TERRIBLE. In my line of work, there are a LOT of specific size requirements, such as &quot;Buttons on touch screens must be [X] by [Y] with [M]x[N] spacing between&quot; safety requirement. <code>btnBar.setPreferredSize( dimTouchBtn );</code> is the best way to do that. Straightforward, no need for custom layout manager. I use mostly <code>GridBagLayout</code> with some <code>BorderLayout</code> and <code>BoxLayout</code>, nesting when convenient. This is a strong combination and easy to use."},{"owner":{"account_id":153967,"reputation":1960,"user_id":369604,"accept_rate":77,"display_name":"Loduwijk"},"score":0,"creation_date":1489074754,"post_id":35442048,"comment_id":72521413,"body_markdown":"I was hasty in my above comment. This was the first answer I saw after accepted answer. Why does SO not sort by vote count anymore? I thought that was one of the core reasons for vote count originally. I still stand by original comment nonetheless; this is one of the better answers. Except for its point #6 - that one not as great. There are plenty (minority can still be a large number) of reasons to resize, and GridBagLayout supports that well in most cases I&#39;ve had.","body":"I was hasty in my above comment. This was the first answer I saw after accepted answer. Why does SO not sort by vote count anymore? I thought that was one of the core reasons for vote count originally. I still stand by original comment nonetheless; this is one of the better answers. Except for its point #6 - that one not as great. There are plenty (minority can still be a large number) of reasons to resize, and GridBagLayout supports that well in most cases I&#39;ve had."},{"owner":{"account_id":7805313,"reputation":1804,"user_id":5903395,"display_name":"Gee Bee"},"score":0,"creation_date":1489340803,"post_id":35442048,"comment_id":72618091,"body_markdown":"I think resize vs. not resize shall not be treaten as a religious decision. There are use cases when nobody ever wants to resize anything, e.g. if you develop a GUI for a kiosk, with a pre-set fixed resolution. If you have different targets, such as industrial HMI displays and the case of &quot;buttons&quot;, then yeah, you have to have at least 1cm by 1cm for a button on a touch screen. In this case, DPI of the screen sets how you resize. Other inputs such as text fields may not be resized vertically at all, and sometimes (such as a zipcode) horizontal resize is pointless as well.","body":"I think resize vs. not resize shall not be treaten as a religious decision. There are use cases when nobody ever wants to resize anything, e.g. if you develop a GUI for a kiosk, with a pre-set fixed resolution. If you have different targets, such as industrial HMI displays and the case of &quot;buttons&quot;, then yeah, you have to have at least 1cm by 1cm for a button on a touch screen. In this case, DPI of the screen sets how you resize. Other inputs such as text fields may not be resized vertically at all, and sometimes (such as a zipcode) horizontal resize is pointless as well."}],"tags":[],"owner":{"account_id":7805313,"reputation":1804,"user_id":5903395,"display_name":"Gee Bee"},"comment_count":3,"down_vote_count":3,"up_vote_count":10,"is_accepted":false,"score":7,"last_activity_date":1457373683,"creation_date":1455653295,"answer_id":35442048,"question_id":7229226,"body_markdown":"I am seeing it differenty than the accepted answer.\n\n### 1) Should I completely avoid the use of those methods?\n\nNever avoid! They&#39;re there to express the size constraints of your components to the layout manager. You can avoid using them if you&#39;re not using any layout manager and try to manage the visual layout on your own.\n\nUnfortunately, Swing is not coming with reasonable default dimensions. However, instead of setting the dimensions of a component, it is better OOP to descend your own component with reasonable defaults. (In that case you call setXXX in your descendant class.) Alternatively, you can override the getXXX methods for the same effect.\n\n### 2) The methods have been defined for a reason. So when should I use them? In which context? For what purposes?\n\nAlways. When you create a component, set its realistic min/preferred/max size according to the use of that component. For example, if you have a JTextField for entering country symbols such as UK, its preferred size shall be as wide to fit two chars (with the current font, etc.) but probably it is meaningless to let it grow any bigger. After all, country symbols are two chars. \nAs opposite, if you have a JTextField for entering e.g. a customer name, it can have a preferred size for like the pixel size for 20 chars, but can grow to bigger if the layout is resized, so set the maximum size to more. At the same time, having a 0px wide JTextField is pointless, so set a realistic minimum size (I would say the pixel size of 2 chars).\n\n### 3) What exactly are the negative consequences of using those methods? \n(I can only think adding portability between systems with different screen resolution).\n\nNo negative consequences. These are hints for the layout manager.\n\n### 4) I don&#39;t think any LayoutManager can exactly satisfy all desired layout needs. \nDo I really need to implement a new LayoutManager for every little variation on my layout ?\n\nNo, definitely not. The usual approach is to cascade different basic layoutmanagers such as horizontal and vertical layout.\n\nFor example, the layout below:\n\n    &lt;pre&gt;\n    +--------------+--------+\n    | ###JTABLE### | [Add]  | \n    | ...data...   |[Remove]|\n    | ...data...   |        |\n    | ...data...   |        |\n    +--------------+--------+\n    &lt;/pre&gt;\n\nis having two parts. The left and right parts are a horizontal layout. The right part is a JPanel added to the horizontal layout, and this JPanel is having a vertical layout which lays out the buttons vertically.\n\nOf course, this can grow tricky with a real life layout. Therefore grid-based layout managers such as MigLayout are much better if you&#39;re about to develop anything serious.\n\n### 5) If the answer to 4 is &quot;yes&quot;, won&#39;t this lead to a proliferation of LayoutManager classes which will become difficult to maintain?\n\nNo, you definitely shall not develop layout managers, unless you need something very special.\n\n### 6) In a situation where I need to define proportions...\n between children of a Component (eg, child1 should use 10% of space, child2 40% ,child3 50%), is it possible to achieve that without implementing a custom LayoutManager?\n\nBasically, once the preferred sizes are set right, you may not want to do anything in percentage. Simply, because percentages are pointless (e.g. it is pointless to have a JTextField 10% of the window size - since one can shrink the window so that JTextField becomes 0px wide, or can expand the window so that the JTextField is across two displays on a multi-display setup).\n\nBut, may times you may use the percentages to control sizes of bigger building blocks of your gui (panels, for example).\n\nYou can use JSplitPane where you can pre-set the ratio of the two sides. Or, you can use MigLayout which allows you to set such constraints in percentage, pixels, and other units.\n","title":"Should I avoid the use of set(Preferred|Maximum|Minimum) size methods in Java Swing?","body":"<p>I am seeing it differenty than the accepted answer.</p>\n<h3>1) Should I completely avoid the use of those methods?</h3>\n<p>Never avoid! They're there to express the size constraints of your components to the layout manager. You can avoid using them if you're not using any layout manager and try to manage the visual layout on your own.</p>\n<p>Unfortunately, Swing is not coming with reasonable default dimensions. However, instead of setting the dimensions of a component, it is better OOP to descend your own component with reasonable defaults. (In that case you call setXXX in your descendant class.) Alternatively, you can override the getXXX methods for the same effect.</p>\n<h3>2) The methods have been defined for a reason. So when should I use them? In which context? For what purposes?</h3>\n<p>Always. When you create a component, set its realistic min/preferred/max size according to the use of that component. For example, if you have a JTextField for entering country symbols such as UK, its preferred size shall be as wide to fit two chars (with the current font, etc.) but probably it is meaningless to let it grow any bigger. After all, country symbols are two chars.\nAs opposite, if you have a JTextField for entering e.g. a customer name, it can have a preferred size for like the pixel size for 20 chars, but can grow to bigger if the layout is resized, so set the maximum size to more. At the same time, having a 0px wide JTextField is pointless, so set a realistic minimum size (I would say the pixel size of 2 chars).</p>\n<h3>3) What exactly are the negative consequences of using those methods?</h3>\n<p>(I can only think adding portability between systems with different screen resolution).</p>\n<p>No negative consequences. These are hints for the layout manager.</p>\n<h3>4) I don't think any LayoutManager can exactly satisfy all desired layout needs.</h3>\n<p>Do I really need to implement a new LayoutManager for every little variation on my layout ?</p>\n<p>No, definitely not. The usual approach is to cascade different basic layoutmanagers such as horizontal and vertical layout.</p>\n<p>For example, the layout below:</p>\n<pre><code>&lt;pre&gt;\n+--------------+--------+\n| ###JTABLE### | [Add]  | \n| ...data...   |[Remove]|\n| ...data...   |        |\n| ...data...   |        |\n+--------------+--------+\n&lt;/pre&gt;\n</code></pre>\n<p>is having two parts. The left and right parts are a horizontal layout. The right part is a JPanel added to the horizontal layout, and this JPanel is having a vertical layout which lays out the buttons vertically.</p>\n<p>Of course, this can grow tricky with a real life layout. Therefore grid-based layout managers such as MigLayout are much better if you're about to develop anything serious.</p>\n<h3>5) If the answer to 4 is &quot;yes&quot;, won't this lead to a proliferation of LayoutManager classes which will become difficult to maintain?</h3>\n<p>No, you definitely shall not develop layout managers, unless you need something very special.</p>\n<h3>6) In a situation where I need to define proportions...</h3>\n<p>between children of a Component (eg, child1 should use 10% of space, child2 40% ,child3 50%), is it possible to achieve that without implementing a custom LayoutManager?</p>\n<p>Basically, once the preferred sizes are set right, you may not want to do anything in percentage. Simply, because percentages are pointless (e.g. it is pointless to have a JTextField 10% of the window size - since one can shrink the window so that JTextField becomes 0px wide, or can expand the window so that the JTextField is across two displays on a multi-display setup).</p>\n<p>But, may times you may use the percentages to control sizes of bigger building blocks of your gui (panels, for example).</p>\n<p>You can use JSplitPane where you can pre-set the ratio of the two sides. Or, you can use MigLayout which allows you to set such constraints in percentage, pixels, and other units.</p>\n"},{"tags":[],"owner":{"account_id":2309641,"reputation":4648,"user_id":2028066,"accept_rate":52,"display_name":"MiguelMunoz"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1539872655,"creation_date":1539872655,"answer_id":52876230,"question_id":7229226,"body_markdown":"**Should I completely avoid the use of those methods?**\r\nI wouldn&#39;t say &quot;avoid&quot; them. I&#39;d say that if you think you need them, you&#39;re probably doing something wrong. Component sizes are determined in context. For example, Text component sizes are determined by the number of rows and columns you specify, combined with the font you may have chosen. Your button and label size will be the size of the graphic, if you set one, or the space needed to display the text you set. Each component has a natural size, and the layout managers will use those to lay everything out without you needing to specify sizes. The main exception is the JScrollPane, which has a size independent of whatever it contains. For those, I will sometimes call `setSize()`, and let that size determine the initial window size, by calling `JFrame.pack()`. Usually, I will let the window size determine the JScrollPane size. The user will determine the size of the window. Many layout managers ignore the sizes you set anyway, so they often don&#39;t do much good.\r\n\r\n**The methods have been defined for a reason. So when should I use them? In which context? For what purposes?**\r\nI believe they were added to provide hints to the layout managers. They may have been written for historical reasons, because layout managers were new, and people didn&#39;t fully trust them. I know a few developers who avoided layout managers and placed everything manually, just because they didn&#39;t want to bother with learning a new paradigm. It&#39;s a terrible idea.\r\n\r\n**What exactly are the negative consequences of using those methods? (I can only think adding portability between systems with different screen resolution).**\r\nThey&#39;re ineffective, and they produce bad layouts, with objects getting squeezed or stretched to non-natural sizes. And the layouts will be brittle. Changes to the window size will sometimes break the layout and put things in the wrong places.\r\n\r\n**I don&#39;t think any LayoutManager can exactly satisfy all desired layout needs. Do I really need to implement a new LayoutManager for every little variation on my layout ?** You shouldn&#39;t &quot;implement&quot; a new LayoutManager. You should instantiate existing ones. I often use several layout managers in a single window. Each JPanel will have its own layout manager. Some people balk at nested layouts, because they&#39;re hard to maintain. When I use them, I give each one its own creation method to make it easier to see what each one does. But I never &quot;implement&quot; a layout manager. I just instantiate them. \r\n\r\n**If the answer to 4 is &quot;yes&quot;, won&#39;t this lead to a proliferation of LayoutManager classes which will become difficult to maintain?**\r\nIf you&#39;re implementing new layout manager classes for slight variations in layout, you&#39;re using them wrong. If you&#39;re just implementing new layout managers, you&#39;re probably doing something wrong. The only time I&#39;ve extended a LayoutManager class, it was to add a zoom slider to a JScrollPane.\r\n\r\n**In a situation where I need to define proportions between children of a Component (eg, child1 should use 10% of space, child2 40% ,child3 50%), is it possible to achieve that without implementing a custom LayoutManager?**\r\nThe JSplitPane has a way of specifying the percentage each component should get. The divider is movable by default, but you can turn that off if you want. I don&#39;t use that feature much. I usually have some components that take up a set size, and the rest of the space is taken up by a scroll pane. The scroll pane size will adjust with the window size. If you have two scroll panes side by side, you can put them in a JSplitPane and specify the percentage of new space given to each one as the user expands and contracts the windows.","title":"Should I avoid the use of set(Preferred|Maximum|Minimum) size methods in Java Swing?","body":"<p><strong>Should I completely avoid the use of those methods?</strong>\nI wouldn't say \"avoid\" them. I'd say that if you think you need them, you're probably doing something wrong. Component sizes are determined in context. For example, Text component sizes are determined by the number of rows and columns you specify, combined with the font you may have chosen. Your button and label size will be the size of the graphic, if you set one, or the space needed to display the text you set. Each component has a natural size, and the layout managers will use those to lay everything out without you needing to specify sizes. The main exception is the JScrollPane, which has a size independent of whatever it contains. For those, I will sometimes call <code>setSize()</code>, and let that size determine the initial window size, by calling <code>JFrame.pack()</code>. Usually, I will let the window size determine the JScrollPane size. The user will determine the size of the window. Many layout managers ignore the sizes you set anyway, so they often don't do much good.</p>\n\n<p><strong>The methods have been defined for a reason. So when should I use them? In which context? For what purposes?</strong>\nI believe they were added to provide hints to the layout managers. They may have been written for historical reasons, because layout managers were new, and people didn't fully trust them. I know a few developers who avoided layout managers and placed everything manually, just because they didn't want to bother with learning a new paradigm. It's a terrible idea.</p>\n\n<p><strong>What exactly are the negative consequences of using those methods? (I can only think adding portability between systems with different screen resolution).</strong>\nThey're ineffective, and they produce bad layouts, with objects getting squeezed or stretched to non-natural sizes. And the layouts will be brittle. Changes to the window size will sometimes break the layout and put things in the wrong places.</p>\n\n<p><strong>I don't think any LayoutManager can exactly satisfy all desired layout needs. Do I really need to implement a new LayoutManager for every little variation on my layout ?</strong> You shouldn't \"implement\" a new LayoutManager. You should instantiate existing ones. I often use several layout managers in a single window. Each JPanel will have its own layout manager. Some people balk at nested layouts, because they're hard to maintain. When I use them, I give each one its own creation method to make it easier to see what each one does. But I never \"implement\" a layout manager. I just instantiate them. </p>\n\n<p><strong>If the answer to 4 is \"yes\", won't this lead to a proliferation of LayoutManager classes which will become difficult to maintain?</strong>\nIf you're implementing new layout manager classes for slight variations in layout, you're using them wrong. If you're just implementing new layout managers, you're probably doing something wrong. The only time I've extended a LayoutManager class, it was to add a zoom slider to a JScrollPane.</p>\n\n<p><strong>In a situation where I need to define proportions between children of a Component (eg, child1 should use 10% of space, child2 40% ,child3 50%), is it possible to achieve that without implementing a custom LayoutManager?</strong>\nThe JSplitPane has a way of specifying the percentage each component should get. The divider is movable by default, but you can turn that off if you want. I don't use that feature much. I usually have some components that take up a set size, and the rest of the space is taken up by a scroll pane. The scroll pane size will adjust with the window size. If you have two scroll panes side by side, you can put them in a JSplitPane and specify the percentage of new space given to each one as the user expands and contracts the windows.</p>\n"}],"owner":{"account_id":287824,"reputation":38852,"user_id":587884,"accept_rate":86,"display_name":"Heisenbug"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":67679,"favorite_count":0,"down_vote_count":3,"up_vote_count":509,"accepted_answer_id":7229519,"answer_count":9,"score":506,"last_activity_date":1681162512,"creation_date":1314615751,"question_id":7229226,"body_markdown":"Several times I&#39;ve been criticized for having suggested the use of the following methods:\r\n\r\n 1. `setPreferredSize()`\r\n 2. `setMinimumSize()`\r\n 3. `setMaximumSize()`\r\n\r\non `Swing` components. I don&#39;t see any alternatives to their use when I want to define proportions between displayed components. I have been told this:\r\n\r\n&gt; With layouts the answer is always the same: use a suitable [LayoutManager][1].\r\n\r\nI have searched the web, but I haven&#39;t found any comprehensive analysis of the subject. So I have the following questions:\r\n\r\n 1. Should I completely avoid the use of those methods?\r\n 2. The methods have been defined for a reason. So when should I use them? In which context? For what purposes? \r\n 3. What exactly are the negative consequences of using those methods? (I can only think adding portability between systems with different screen resolution).\r\n 4. I don&#39;t think any LayoutManager can exactly satisfy all desired layout needs. Do I really need to implement a new LayoutManager for every little variation on my layout ? \r\n 5. If the answer to 4 is &quot;yes&quot;, won&#39;t this lead to a proliferation of LayoutManager classes which will become difficult to maintain?\r\n 6. In a situation where I need to define proportions between children of a Component (eg, child1 should use 10% of space, child2 40% ,child3 50%), is it possible to achieve that without implementing a custom LayoutManager?\r\n\r\n\r\n  [1]: https://en.m.wikipedia.org/wiki/Layout_manager","title":"Should I avoid the use of set(Preferred|Maximum|Minimum) size methods in Java Swing?","body":"<p>Several times I've been criticized for having suggested the use of the following methods:</p>\n<ol>\n<li><code>setPreferredSize()</code></li>\n<li><code>setMinimumSize()</code></li>\n<li><code>setMaximumSize()</code></li>\n</ol>\n<p>on <code>Swing</code> components. I don't see any alternatives to their use when I want to define proportions between displayed components. I have been told this:</p>\n<blockquote>\n<p>With layouts the answer is always the same: use a suitable <a href=\"https://en.m.wikipedia.org/wiki/Layout_manager\" rel=\"nofollow noreferrer\">LayoutManager</a>.</p>\n</blockquote>\n<p>I have searched the web, but I haven't found any comprehensive analysis of the subject. So I have the following questions:</p>\n<ol>\n<li>Should I completely avoid the use of those methods?</li>\n<li>The methods have been defined for a reason. So when should I use them? In which context? For what purposes?</li>\n<li>What exactly are the negative consequences of using those methods? (I can only think adding portability between systems with different screen resolution).</li>\n<li>I don't think any LayoutManager can exactly satisfy all desired layout needs. Do I really need to implement a new LayoutManager for every little variation on my layout ?</li>\n<li>If the answer to 4 is &quot;yes&quot;, won't this lead to a proliferation of LayoutManager classes which will become difficult to maintain?</li>\n<li>In a situation where I need to define proportions between children of a Component (eg, child1 should use 10% of space, child2 40% ,child3 50%), is it possible to achieve that without implementing a custom LayoutManager?</li>\n</ol>\n"},{"tags":["java","reflection","java-native-interface"],"answers":[{"tags":[],"owner":{"account_id":1692034,"reputation":3196,"user_id":1554195,"display_name":"tquadrat"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1681162440,"creation_date":1681162440,"answer_id":75980914,"question_id":75979353,"body_markdown":"At the very end, only `final` primitives cannot be modified through reflection. But to be honest, I have no idea how I could use Java code to modify a data structure that is hold completely outside the JVM and managed only by JNI code (ok, the Java code can call the API provided by the JNI code to modify that data structure, but that&#39;s not meant here).\r\n\r\nSo based on your description, you should be save with the integer used as an index into the &#39;external&#39; structs.","title":"JNI: Protect field from dangerous reflective access","body":"<p>At the very end, only <code>final</code> primitives cannot be modified through reflection. But to be honest, I have no idea how I could use Java code to modify a data structure that is hold completely outside the JVM and managed only by JNI code (ok, the Java code can call the API provided by the JNI code to modify that data structure, but that's not meant here).</p>\n<p>So based on your description, you should be save with the integer used as an index into the 'external' structs.</p>\n"}],"owner":{"account_id":7286131,"reputation":617,"user_id":5554145,"display_name":"MrAnima"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75980914,"answer_count":1,"score":0,"last_activity_date":1681162440,"creation_date":1681148268,"question_id":75979353,"body_markdown":"I&#39;m designing a Java library that uses a piece of native code exposed via the JNI. The library provides a class that is mapped to a complex native struct that can&#39;t easily be serialized. It&#39;s not decided yet whether I should store this struct in a `ByteBuffer` field, or have an `int` field referring to an index in an array of initialized structs.\r\n\r\nIn both situations, there&#39;s a potential issue where user code could try to modify the `ByteBuffer`/`int`, and cause undefined behavior (illegal struct bit representation, out-of-bounds array access, ...). Of course, it isn&#39;t in the user&#39;s interest to mess with private fields through reflection, but I see Java as a safe language (in terms of UBs or segfaults) and the mere possibility of these kind of issues being rendered possible by my fault annoys me.\r\n\r\nDoes Java have a way to enforce actual encapsulation, so the fields would actually be completely private? How do other native libraries deal with this, if they even care in the first place?\r\n\r\nThanks for any help.","title":"JNI: Protect field from dangerous reflective access","body":"<p>I'm designing a Java library that uses a piece of native code exposed via the JNI. The library provides a class that is mapped to a complex native struct that can't easily be serialized. It's not decided yet whether I should store this struct in a <code>ByteBuffer</code> field, or have an <code>int</code> field referring to an index in an array of initialized structs.</p>\n<p>In both situations, there's a potential issue where user code could try to modify the <code>ByteBuffer</code>/<code>int</code>, and cause undefined behavior (illegal struct bit representation, out-of-bounds array access, ...). Of course, it isn't in the user's interest to mess with private fields through reflection, but I see Java as a safe language (in terms of UBs or segfaults) and the mere possibility of these kind of issues being rendered possible by my fault annoys me.</p>\n<p>Does Java have a way to enforce actual encapsulation, so the fields would actually be completely private? How do other native libraries deal with this, if they even care in the first place?</p>\n<p>Thanks for any help.</p>\n"},{"tags":["java","spring","maven","spring-boot"],"comments":[{"owner":{"account_id":2719313,"reputation":15631,"user_id":2345933,"accept_rate":84,"display_name":"Adam Siemion"},"score":1,"creation_date":1487765327,"post_id":42390860,"comment_id":71929518,"body_markdown":"http://stackoverflow.com/questions/25420745/how-to-set-spring-active-profiles-with-maven-profiles","body":"<a href=\"http://stackoverflow.com/questions/25420745/how-to-set-spring-active-profiles-with-maven-profiles\" title=\"how to set spring active profiles with maven profiles\">stackoverflow.com/questions/25420745/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":1407559,"reputation":2536,"user_id":1334859,"accept_rate":50,"display_name":"Gianmarco"},"score":0,"creation_date":1602678269,"post_id":42391036,"comment_id":113795553,"body_markdown":"easier, faster, cleaner, no head bumping whatsoever. +1 for me","body":"easier, faster, cleaner, no head bumping whatsoever. +1 for me"}],"tags":[],"owner":{"account_id":1241163,"reputation":1555,"user_id":1203728,"accept_rate":80,"display_name":"SaWo"},"comment_count":1,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1487765292,"creation_date":1487765292,"answer_id":42391036,"question_id":42390860,"body_markdown":"You should use the **Spring Boot Maven Plugin**:\r\n\r\n    &lt;project&gt;  \r\n      ...\r\n      &lt;build&gt;\r\n        ...\r\n        &lt;plugins&gt;\r\n          ...\r\n          &lt;plugin&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;1.5.1.RELEASE&lt;/version&gt;\r\n            &lt;configuration&gt;\r\n              &lt;profiles&gt;\r\n                &lt;profile&gt;foo&lt;/profile&gt;\r\n                &lt;profile&gt;bar&lt;/profile&gt;\r\n              &lt;/profiles&gt;\r\n            &lt;/configuration&gt;\r\n            ...\r\n          &lt;/plugin&gt;\r\n          ...\r\n        &lt;/plugins&gt;\r\n        ...\r\n      &lt;/build&gt;\r\n      ...\r\n    &lt;/project&gt;","title":"Configure active profile in SpringBoot via Maven","body":"<p>You should use the <strong>Spring Boot Maven Plugin</strong>:</p>\n\n<pre><code>&lt;project&gt;  \n  ...\n  &lt;build&gt;\n    ...\n    &lt;plugins&gt;\n      ...\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n        &lt;version&gt;1.5.1.RELEASE&lt;/version&gt;\n        &lt;configuration&gt;\n          &lt;profiles&gt;\n            &lt;profile&gt;foo&lt;/profile&gt;\n            &lt;profile&gt;bar&lt;/profile&gt;\n          &lt;/profiles&gt;\n        &lt;/configuration&gt;\n        ...\n      &lt;/plugin&gt;\n      ...\n    &lt;/plugins&gt;\n    ...\n  &lt;/build&gt;\n  ...\n&lt;/project&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4271284,"reputation":12416,"user_id":3493036,"accept_rate":81,"display_name":"Patrick"},"score":0,"creation_date":1513582911,"post_id":42391322,"comment_id":82692800,"body_markdown":"Is there a way to enable profile for unit tests via maven command? Maybe you have an idea for [this question.](https://stackoverflow.com/q/47833555/3493036)","body":"Is there a way to enable profile for unit tests via maven command? Maybe you have an idea for <a href=\"https://stackoverflow.com/q/47833555/3493036\">this question.</a>"},{"owner":{"account_id":1682106,"reputation":3953,"user_id":1546137,"accept_rate":67,"display_name":"ihebiheb"},"score":2,"creation_date":1550257533,"post_id":42391322,"comment_id":96216927,"body_markdown":"I just want to add that you can set the active profile with the commamd mvn package -P myProfile where my profile is defined in the POM","body":"I just want to add that you can set the active profile with the commamd mvn package -P myProfile where my profile is defined in the POM"},{"owner":{"account_id":11306830,"reputation":311,"user_id":8291185,"display_name":"Shakeel Hussain"},"score":0,"creation_date":1689526045,"post_id":42391322,"comment_id":135222665,"body_markdown":"If you are running from jar use `java -Dspring.profiles.active=&lt;profile-name&gt; your-application.jar `","body":"If you are running from jar use <code>java -Dspring.profiles.active=&lt;profile-name&gt; your-application.jar </code>"}],"tags":[],"owner":{"account_id":1608191,"reputation":14063,"user_id":1487809,"accept_rate":67,"display_name":"Daniel Olszewski"},"comment_count":3,"down_vote_count":0,"up_vote_count":125,"is_accepted":true,"score":125,"last_activity_date":1487766854,"creation_date":1487766003,"answer_id":42391322,"question_id":42390860,"body_markdown":"The Maven profile and the Spring profile are two completely different things. Your pom.xml defines `spring.profiles.active` variable which is available in the build process, but not at runtime. That is why only the default profile is activated.\r\n\r\n**How to bind Maven profile with Spring?**\r\n\r\nYou need to pass the build variable to your application so that it is available when it is started.\r\n\r\n1. Define a placeholder in your `application.properties`:\r\n\r\n        spring.profiles.active=@spring.profiles.active@\r\n The `@spring.profiles.active@` variable must match the declared property from the Maven profile.\r\n\r\n2. Enable resource filtering in you pom.xml:\r\n\r\n        &lt;build&gt;\r\n            &lt;resources&gt;\r\n                &lt;resource&gt;\r\n                    &lt;directory&gt;src/main/resources&lt;/directory&gt;\r\n                    &lt;filtering&gt;true&lt;/filtering&gt;\r\n                &lt;/resource&gt;\r\n            &lt;/resources&gt;\r\n            \r\n        &lt;/build&gt;\r\n\r\n When the build is executed, all files in the `src/main/resources` directory will be processed by Maven and the placeholder in your `application.properties` will be replaced with the variable you defined in your Maven profile. \r\n\r\nFor more details you can [go to my post][1] where I described this use case.\r\n\r\n\r\n  [1]: http://dolszewski.com/spring/spring-boot-properties-per-maven-profile/","title":"Configure active profile in SpringBoot via Maven","body":"<p>The Maven profile and the Spring profile are two completely different things. Your pom.xml defines <code>spring.profiles.active</code> variable which is available in the build process, but not at runtime. That is why only the default profile is activated.</p>\n\n<p><strong>How to bind Maven profile with Spring?</strong></p>\n\n<p>You need to pass the build variable to your application so that it is available when it is started.</p>\n\n<ol>\n<li><p>Define a placeholder in your <code>application.properties</code>:</p>\n\n<pre><code>spring.profiles.active=@spring.profiles.active@\n</code></pre>\n\n<p>The <code>@spring.profiles.active@</code> variable must match the declared property from the Maven profile.</p></li>\n<li><p>Enable resource filtering in you pom.xml:</p>\n\n<pre><code>&lt;build&gt;\n    &lt;resources&gt;\n        &lt;resource&gt;\n            &lt;directory&gt;src/main/resources&lt;/directory&gt;\n            &lt;filtering&gt;true&lt;/filtering&gt;\n        &lt;/resource&gt;\n    &lt;/resources&gt;\n    \n&lt;/build&gt;\n</code></pre>\n\n<p>When the build is executed, all files in the <code>src/main/resources</code> directory will be processed by Maven and the placeholder in your <code>application.properties</code> will be replaced with the variable you defined in your Maven profile. </p></li>\n</ol>\n\n<p>For more details you can <a href=\"http://dolszewski.com/spring/spring-boot-properties-per-maven-profile/\" rel=\"noreferrer\">go to my post</a> where I described this use case.</p>\n"},{"comments":[{"owner":{"account_id":343146,"reputation":11083,"user_id":674669,"accept_rate":58,"display_name":"user674669"},"score":0,"creation_date":1522270191,"post_id":47055441,"comment_id":86095530,"body_markdown":"Best answer! Worked for me using maven 3.5.2 + java 1.8 + spring-boot-1.5.9.RELEASE on mac os 10.13.3","body":"Best answer! Worked for me using maven 3.5.2 + java 1.8 + spring-boot-1.5.9.RELEASE on mac os 10.13.3"},{"owner":{"account_id":324398,"reputation":1260,"user_id":644949,"accept_rate":14,"display_name":"Vipresh"},"score":0,"creation_date":1617109171,"post_id":47055441,"comment_id":118206697,"body_markdown":"Where do i add it?","body":"Where do i add it?"}],"tags":[],"owner":{"account_id":12145916,"reputation":189,"user_id":8868268,"display_name":"Justin Joseph"},"comment_count":2,"down_vote_count":1,"up_vote_count":19,"is_accepted":false,"score":18,"last_activity_date":1509541480,"creation_date":1509541082,"answer_id":47055441,"question_id":42390860,"body_markdown":"You can run using the following command. Here I want to run using spring profile `local`:\r\n\r\n`spring-boot:run -Drun.jvmArguments=&quot;-Dspring.profiles.active=local&quot;`","title":"Configure active profile in SpringBoot via Maven","body":"<p>You can run using the following command. Here I want to run using spring profile <code>local</code>:</p>\n\n<p><code>spring-boot:run -Drun.jvmArguments=\"-Dspring.profiles.active=local\"</code></p>\n"},{"comments":[{"owner":{"account_id":4226798,"reputation":784,"user_id":3460138,"accept_rate":45,"display_name":"pbeta"},"score":2,"creation_date":1570957869,"post_id":50760642,"comment_id":103075758,"body_markdown":"Although this does not answer the question &quot;how to set springboot active profile via maven&quot;, but it gives me answer to &quot;how to set springboot:run active profile&quot;.","body":"Although this does not answer the question &quot;how to set springboot active profile via maven&quot;, but it gives me answer to &quot;how to set springboot:run active profile&quot;."},{"owner":{"account_id":2374041,"reputation":943,"user_id":2077917,"accept_rate":25,"display_name":"Winster"},"score":1,"creation_date":1583326358,"post_id":50760642,"comment_id":107077077,"body_markdown":"with Spring2.x, spring.profiles.active setting didnt work, either directly or via jvmArguments. Thanks for the answer","body":"with Spring2.x, spring.profiles.active setting didnt work, either directly or via jvmArguments. Thanks for the answer"}],"tags":[],"owner":{"account_id":9690716,"reputation":1015,"user_id":7188884,"accept_rate":100,"display_name":"Thomas Escolan"},"comment_count":2,"down_vote_count":0,"up_vote_count":57,"is_accepted":false,"score":57,"last_activity_date":1531264246,"creation_date":1528460767,"answer_id":50760642,"question_id":42390860,"body_markdown":"Or rather easily:\r\n\r\n    mvn spring-boot:run -Dspring-boot.run.profiles={profile_name}","title":"Configure active profile in SpringBoot via Maven","body":"<p>Or rather easily:</p>\n\n<pre><code>mvn spring-boot:run -Dspring-boot.run.profiles={profile_name}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":50156,"reputation":427,"user_id":149493,"display_name":"Raja Nagendra Kumar"},"score":1,"creation_date":1627981190,"post_id":51409393,"comment_id":121293633,"body_markdown":"&gt;You can add this in your property file:\n\nIn which properties file? as profile is needed to pickup respective application.xxx.properties","body":"&gt;You can add this in your property file:  In which properties file? as profile is needed to pickup respective application.xxx.properties"},{"owner":{"account_id":1661378,"reputation":1660,"user_id":1529616,"accept_rate":46,"display_name":"velocity"},"score":1,"creation_date":1661366513,"post_id":51409393,"comment_id":129758095,"body_markdown":"starting from Spring 2.4 spring.profiles.active has been changed to spring.config.active.on-profile=dev","body":"starting from Spring 2.4 spring.profiles.active has been changed to spring.config.active.on-profile=dev"}],"tags":[],"owner":{"account_id":1510102,"reputation":709,"user_id":1412450,"display_name":"Pankaj Jaiswal"},"comment_count":2,"down_vote_count":0,"up_vote_count":36,"is_accepted":false,"score":36,"last_activity_date":1591871039,"creation_date":1531940951,"answer_id":51409393,"question_id":42390860,"body_markdown":"There are multiple ways to set profiles for your springboot application.\r\n\r\n1. You can add this in your property file: \r\n\r\n        spring.profiles.active=dev\r\n\r\n2. Programmatic way:                   \r\n\r\n        SpringApplication.setAdditionalProfiles(&quot;dev&quot;);\r\n\r\n3. Tests make it very easy to specify what profiles are active \r\n\r\n        @ActiveProfiles(&quot;dev&quot;)\r\n\r\n4.  In a Unix environment\r\n\r\n        export spring_profiles_active=dev\r\n\r\n5. JVM System Parameter\r\n\r\n        -Dspring.profiles.active=dev\r\n\r\n\r\n**Example: Running a springboot jar file with profile.**\r\n\r\n    java -jar -Dspring.profiles.active=dev application.jar\r\n\r\n","title":"Configure active profile in SpringBoot via Maven","body":"<p>There are multiple ways to set profiles for your springboot application.</p>\n\n<ol>\n<li><p>You can add this in your property file: </p>\n\n<pre><code>spring.profiles.active=dev\n</code></pre></li>\n<li><p>Programmatic way:                   </p>\n\n<pre><code>SpringApplication.setAdditionalProfiles(\"dev\");\n</code></pre></li>\n<li><p>Tests make it very easy to specify what profiles are active </p>\n\n<pre><code>@ActiveProfiles(\"dev\")\n</code></pre></li>\n<li><p>In a Unix environment</p>\n\n<pre><code>export spring_profiles_active=dev\n</code></pre></li>\n<li><p>JVM System Parameter</p>\n\n<pre><code>-Dspring.profiles.active=dev\n</code></pre></li>\n</ol>\n\n<p><strong>Example: Running a springboot jar file with profile.</strong></p>\n\n<pre><code>java -jar -Dspring.profiles.active=dev application.jar\n</code></pre>\n"},{"tags":[],"owner":{"account_id":100270,"reputation":127154,"user_id":270371,"accept_rate":33,"display_name":"davidxxx"},"comment_count":0,"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1532197423,"creation_date":1532197423,"answer_id":51458934,"question_id":42390860,"body_markdown":"In development, activating a Spring Boot profile when a specific Maven profile is activate is straight. You should use [the `profiles` property][1] of the [spring-boot-maven-plugin][2] in the Maven profile such as :\r\n\r\n    &lt;project&gt;\r\n        &lt;...&gt;\r\n    \t&lt;profiles&gt;\r\n    \t\t&lt;profile&gt;\r\n    \t\t\t&lt;id&gt;development&lt;/id&gt;\r\n    \t\t\t&lt;activation&gt;\r\n    \t\t\t\t&lt;activeByDefault&gt;true&lt;/activeByDefault&gt;\r\n    \t\t\t&lt;/activation&gt;\r\n    \t\t\t&lt;build&gt;\r\n    \t\t\t\t&lt;plugins&gt;\r\n    \t\t\t\t\t&lt;plugin&gt;\r\n    \t\t\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t\t\t&lt;profiles&gt;\r\n    \t\t\t\t\t\t\t\t&lt;profile&gt;development&lt;/profile&gt;\r\n    \t\t\t\t\t\t\t&lt;/profiles&gt;\r\n    \t\t\t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t\t\t&lt;/plugin&gt;\r\n    \t\t\t\t&lt;/plugins&gt;\r\n    \t\t\t&lt;/build&gt;\r\n    \t\t&lt;/profile&gt;\r\n    \t&lt;profiles&gt;\r\n        &lt;/...&gt;\r\n    &lt;/project&gt;\r\n\r\nYou can run the following command to use both the Spring Boot and the Maven `development` profile :\r\n\r\n    mvn spring-boot:run -Pdevelopment\r\n\r\n\r\n----------\r\n\r\n\r\nIf you want to be able to map any Spring Boot profiles to a Maven profile with the same profile name, you could define a single Maven profile and enabling that as the presence of a Maven property is detected. This property would be the single thing that you need to specify as you run the `mvn` command.   \r\nThe profile would look like :\r\n\r\n\t\t&lt;profile&gt;\r\n\t\t\t&lt;id&gt;spring-profile-active&lt;/id&gt;\r\n\t\t\t&lt;activation&gt;\r\n\t\t\t\t&lt;property&gt;\r\n\t\t\t\t\t&lt;name&gt;my.active.spring.profiles&lt;/name&gt;\r\n\t\t\t\t&lt;/property&gt;\r\n\t\t\t&lt;/activation&gt;\r\n\t\t\t&lt;build&gt;\r\n\t\t\t\t&lt;plugins&gt;\r\n\t\t\t\t\t&lt;plugin&gt;\r\n\t\t\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t\t\t&lt;profiles&gt;\r\n\t\t\t\t\t\t\t\t&lt;profile&gt;${my.active.spring.profiles}&lt;/profile&gt;\r\n\t\t\t\t\t\t\t&lt;/profiles&gt;\r\n\t\t\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t\t\t&lt;/plugin&gt;\r\n\t\t\t\t&lt;/plugins&gt;\r\n\t\t\t&lt;/build&gt;\r\n\t\t&lt;/profile&gt;\r\n\r\n\r\nAnd you can run the following command to use both the Spring Boot and the Maven `development` profile :\r\n\r\n    mvn spring-boot:run -Dmy.active.spring.profiles=development\r\n\r\nor :\r\n\r\n    mvn spring-boot:run -Dmy.active.spring.profiles=integration\r\n\r\n\r\nor :\r\n\r\n     mvn spring-boot:run -Dmy.active.spring.profiles=production\r\n\r\nAnd so for...\r\n\r\nThis kind of configuration makes sense as in the generic Maven profile you rely on the `my.active.spring.profiles` property that is passed to perform some tasks or value some things.  \r\nFor example I use this way to configure a generic Maven profile that packages the application and build a docker image specific to the environment selected.  \r\n\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/maven-plugin/run-mojo.html#profiles\r\n  [2]: https://docs.spring.io/spring-boot/docs/current/maven-plugin/run-mojo.html","title":"Configure active profile in SpringBoot via Maven","body":"<p>In development, activating a Spring Boot profile when a specific Maven profile is activate is straight. You should use <a href=\"https://docs.spring.io/spring-boot/docs/current/maven-plugin/run-mojo.html#profiles\" rel=\"noreferrer\">the <code>profiles</code> property</a> of the <a href=\"https://docs.spring.io/spring-boot/docs/current/maven-plugin/run-mojo.html\" rel=\"noreferrer\">spring-boot-maven-plugin</a> in the Maven profile such as :</p>\n\n<pre><code>&lt;project&gt;\n    &lt;...&gt;\n    &lt;profiles&gt;\n        &lt;profile&gt;\n            &lt;id&gt;development&lt;/id&gt;\n            &lt;activation&gt;\n                &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;\n            &lt;/activation&gt;\n            &lt;build&gt;\n                &lt;plugins&gt;\n                    &lt;plugin&gt;\n                        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                        &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                        &lt;configuration&gt;\n                            &lt;profiles&gt;\n                                &lt;profile&gt;development&lt;/profile&gt;\n                            &lt;/profiles&gt;\n                        &lt;/configuration&gt;\n                    &lt;/plugin&gt;\n                &lt;/plugins&gt;\n            &lt;/build&gt;\n        &lt;/profile&gt;\n    &lt;profiles&gt;\n    &lt;/...&gt;\n&lt;/project&gt;\n</code></pre>\n\n<p>You can run the following command to use both the Spring Boot and the Maven <code>development</code> profile :</p>\n\n<pre><code>mvn spring-boot:run -Pdevelopment\n</code></pre>\n\n<hr>\n\n<p>If you want to be able to map any Spring Boot profiles to a Maven profile with the same profile name, you could define a single Maven profile and enabling that as the presence of a Maven property is detected. This property would be the single thing that you need to specify as you run the <code>mvn</code> command.<br>\nThe profile would look like :</p>\n\n<pre><code>    &lt;profile&gt;\n        &lt;id&gt;spring-profile-active&lt;/id&gt;\n        &lt;activation&gt;\n            &lt;property&gt;\n                &lt;name&gt;my.active.spring.profiles&lt;/name&gt;\n            &lt;/property&gt;\n        &lt;/activation&gt;\n        &lt;build&gt;\n            &lt;plugins&gt;\n                &lt;plugin&gt;\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                    &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                    &lt;configuration&gt;\n                        &lt;profiles&gt;\n                            &lt;profile&gt;${my.active.spring.profiles}&lt;/profile&gt;\n                        &lt;/profiles&gt;\n                    &lt;/configuration&gt;\n                &lt;/plugin&gt;\n            &lt;/plugins&gt;\n        &lt;/build&gt;\n    &lt;/profile&gt;\n</code></pre>\n\n<p>And you can run the following command to use both the Spring Boot and the Maven <code>development</code> profile :</p>\n\n<pre><code>mvn spring-boot:run -Dmy.active.spring.profiles=development\n</code></pre>\n\n<p>or :</p>\n\n<pre><code>mvn spring-boot:run -Dmy.active.spring.profiles=integration\n</code></pre>\n\n<p>or :</p>\n\n<pre><code> mvn spring-boot:run -Dmy.active.spring.profiles=production\n</code></pre>\n\n<p>And so for...</p>\n\n<p>This kind of configuration makes sense as in the generic Maven profile you rely on the <code>my.active.spring.profiles</code> property that is passed to perform some tasks or value some things.<br>\nFor example I use this way to configure a generic Maven profile that packages the application and build a docker image specific to the environment selected.  </p>\n"},{"comments":[{"owner":{"account_id":12045936,"reputation":2811,"user_id":8810941,"display_name":"Pavindu"},"score":0,"creation_date":1640350145,"post_id":64872108,"comment_id":124575070,"body_markdown":"`mvn spring-boot:run -Drun:jvmArguments=&quot;-Dspring.profiles.active=prod&quot;` --&gt; When I run this, I still get `No active profile set, falling back to default profiles: default`","body":"<code>mvn spring-boot:run -Drun:jvmArguments=&quot;-Dspring.profiles.active=prod&quot;</code> --&gt; When I run this, I still get <code>No active profile set, falling back to default profiles: default</code>"}],"tags":[],"owner":{"account_id":15479425,"reputation":33,"user_id":11167189,"display_name":"&#214;zlem Pamuk"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1605603491,"creation_date":1605603491,"answer_id":64872108,"question_id":42390860,"body_markdown":"I would like to run an automation test in different environments.&lt;br/&gt; \r\nSo I add this to command maven command: \r\n\r\n    spring-boot:run -Drun.jvmArguments=&quot;-Dspring.profiles.active=productionEnv1&quot;\r\n\r\nHere is the link where I found the solution: [1]https://github.com/spring-projects/spring-boot/issues/1095","title":"Configure active profile in SpringBoot via Maven","body":"<p>I would like to run an automation test in different environments.<br/>\nSo I add this to command maven command:</p>\n<pre><code>spring-boot:run -Drun.jvmArguments=&quot;-Dspring.profiles.active=productionEnv1&quot;\n</code></pre>\n<p>Here is the link where I found the solution: [1]<a href=\"https://github.com/spring-projects/spring-boot/issues/1095\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-boot/issues/1095</a></p>\n"},{"tags":[],"owner":{"account_id":18069519,"reputation":118,"user_id":13134499,"display_name":"Lukasmp3"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640774761,"creation_date":1640774761,"answer_id":70518321,"question_id":42390860,"body_markdown":"I wanted to clarify the excellent answer https://stackoverflow.com/a/42391322/13134499 from Daniel Olszewski if you want to use it just for tests.\r\n\r\n**How to bind Maven profile with Spring for *tests*?**\r\n\r\n1. As you did, define the variable in `pom.xml`\r\n```\r\n...\r\n&lt;properties&gt;\r\n  &lt;spring.profiles.active&gt;development&lt;/spring.profiles.active&gt;\r\n&lt;/properties&gt;\r\n```\r\n\r\n2. Define a placeholder in your `application-test.properties` in `src/test/resources`:\r\n```\r\nspring.profiles.active=@spring.profiles.active@\r\n``` \r\n3. Enable resource filtering in you `pom.xml`:\r\n``` \r\n&lt;build&gt;\r\n  ...\r\n  &lt;testResources&gt;\r\n    &lt;testResource&gt;\r\n      &lt;directory&gt;src/test/resources&lt;/directory&gt;\r\n      &lt;filtering&gt;true&lt;/filtering&gt;\r\n    &lt;/testResource&gt;\r\n  &lt;testResources&gt;\r\n&lt;/build&gt;\r\n``` \r\n","title":"Configure active profile in SpringBoot via Maven","body":"<p>I wanted to clarify the excellent answer <a href=\"https://stackoverflow.com/a/42391322/13134499\">https://stackoverflow.com/a/42391322/13134499</a> from Daniel Olszewski if you want to use it just for tests.</p>\n<p><strong>How to bind Maven profile with Spring for <em>tests</em>?</strong></p>\n<ol>\n<li>As you did, define the variable in <code>pom.xml</code></li>\n</ol>\n<pre><code>...\n&lt;properties&gt;\n  &lt;spring.profiles.active&gt;development&lt;/spring.profiles.active&gt;\n&lt;/properties&gt;\n</code></pre>\n<ol start=\"2\">\n<li>Define a placeholder in your <code>application-test.properties</code> in <code>src/test/resources</code>:</li>\n</ol>\n<pre><code>spring.profiles.active=@spring.profiles.active@\n</code></pre>\n<ol start=\"3\">\n<li>Enable resource filtering in you <code>pom.xml</code>:</li>\n</ol>\n<pre><code>&lt;build&gt;\n  ...\n  &lt;testResources&gt;\n    &lt;testResource&gt;\n      &lt;directory&gt;src/test/resources&lt;/directory&gt;\n      &lt;filtering&gt;true&lt;/filtering&gt;\n    &lt;/testResource&gt;\n  &lt;testResources&gt;\n&lt;/build&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6190922,"reputation":1679,"user_id":4823653,"display_name":"LIU YUE"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1643364466,"creation_date":1643364466,"answer_id":70891927,"question_id":42390860,"body_markdown":"**file structure:**\r\n\r\n/src/main/resources\r\n\r\n=&gt;\r\n\r\napplication.properties:\r\n    \r\n    spring.profiles.active:@spring.profiles.active@&#39;\r\n\r\napplication-dev.properties\r\n\r\napplication-prod.properties\r\n\r\n**IDE-Eclipse:**\r\n\r\n    Right click on the project=&gt;Run As=&gt;Run Configuration=&gt;Arguments=&gt;VM Arguments:-Dspring.profiles.active=dev\r\n\r\n**CMD:**\r\n\r\n    mvn spring-boot:run -Dspring.profiles.active=dev\r\n    mvn clean install -Dspring.profiles.active=dev","title":"Configure active profile in SpringBoot via Maven","body":"<p><strong>file structure:</strong></p>\n<p>/src/main/resources</p>\n<p>=&gt;</p>\n<p>application.properties:</p>\n<pre><code>spring.profiles.active:@spring.profiles.active@'\n</code></pre>\n<p>application-dev.properties</p>\n<p>application-prod.properties</p>\n<p><strong>IDE-Eclipse:</strong></p>\n<pre><code>Right click on the project=&gt;Run As=&gt;Run Configuration=&gt;Arguments=&gt;VM Arguments:-Dspring.profiles.active=dev\n</code></pre>\n<p><strong>CMD:</strong></p>\n<pre><code>mvn spring-boot:run -Dspring.profiles.active=dev\nmvn clean install -Dspring.profiles.active=dev\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15320652,"reputation":7,"user_id":11501101,"display_name":"Luis Burgos"},"comment_count":0,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1681162400,"creation_date":1681161139,"answer_id":75980778,"question_id":42390860,"body_markdown":"I added this in the first line\r\n\r\n    spring.profiles.active=@spring.profiles.active@\r\n    server.port=9898\r\n","title":"Configure active profile in SpringBoot via Maven","body":"<p>I added this in the first line</p>\n<pre><code>spring.profiles.active=@spring.profiles.active@\nserver.port=9898\n</code></pre>\n"}],"owner":{"account_id":6139432,"reputation":7718,"user_id":4787269,"accept_rate":92,"display_name":"Micha Szewczyk"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":227159,"favorite_count":0,"down_vote_count":0,"up_vote_count":85,"accepted_answer_id":42391322,"answer_count":10,"score":85,"last_activity_date":1681162400,"creation_date":1487764860,"question_id":42390860,"body_markdown":"I&#39;m trying to set an active profile in Spring Boot application using Maven 3.&lt;br&gt;\r\nIn my pom.xml I set **default active profile** and property **spring.profiles.active**  to **development**:\r\n\r\n    &lt;profiles&gt;\r\n        &lt;profile&gt;\r\n            &lt;id&gt;development&lt;/id&gt;\r\n            &lt;properties&gt;\r\n                &lt;spring.profiles.active&gt;development&lt;/spring.profiles.active&gt;\r\n            &lt;/properties&gt;\r\n            &lt;activation&gt;\r\n                &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;\r\n            &lt;/activation&gt;\r\n        &lt;/profile&gt;\r\n    &lt;/profiles&gt;\r\nbut every time I run my application, I receive the following message in logs:\r\n\r\n    No active profile set, falling back to default profiles: default\r\nand the SpringBoot profile is set to default (reads application.properties instead application-development.properties)&lt;br&gt;&lt;br&gt;\r\nWhat else should I do to have my SpringBoot active profile set using Maven profile?&lt;br&gt;\r\nAny help highly appreciated.","title":"Configure active profile in SpringBoot via Maven","body":"<p>I'm trying to set an active profile in Spring Boot application using Maven 3.<br>\nIn my pom.xml I set <strong>default active profile</strong> and property <strong>spring.profiles.active</strong>  to <strong>development</strong>:</p>\n\n<pre><code>&lt;profiles&gt;\n    &lt;profile&gt;\n        &lt;id&gt;development&lt;/id&gt;\n        &lt;properties&gt;\n            &lt;spring.profiles.active&gt;development&lt;/spring.profiles.active&gt;\n        &lt;/properties&gt;\n        &lt;activation&gt;\n            &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;\n        &lt;/activation&gt;\n    &lt;/profile&gt;\n&lt;/profiles&gt;\n</code></pre>\n\n<p>but every time I run my application, I receive the following message in logs:</p>\n\n<pre><code>No active profile set, falling back to default profiles: default\n</code></pre>\n\n<p>and the SpringBoot profile is set to default (reads application.properties instead application-development.properties)<br><br>\nWhat else should I do to have my SpringBoot active profile set using Maven profile?<br>\nAny help highly appreciated.</p>\n"},{"tags":["java","multithreading","synchronization"],"comments":[{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":2,"creation_date":1681160603,"post_id":75980680,"comment_id":134009048,"body_markdown":"Placing `synchronized` in the declaration of an instance method is the same as if you surrounded the entire method body in a `synchronized (this) { ... }` block.","body":"Placing <code>synchronized</code> in the declaration of an instance method is the same as if you surrounded the entire method body in a <code>synchronized (this) { ... }</code> block."},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":2,"creation_date":1681163660,"post_id":75980680,"comment_id":134009552,"body_markdown":"`This is because every object has one lock and this lock is acquired by t1. Is that correct ?` Yes, each instance of an object has one lock, using the synchronized keyword on a method uses that instance lock.  I don&#39;t really understand your second question... can you give an example?","body":"<code>This is because every object has one lock and this lock is acquired by t1. Is that correct ?</code> Yes, each instance of an object has one lock, using the synchronized keyword on a method uses that instance lock.  I don&#39;t really understand your second question... can you give an example?"},{"owner":{"account_id":23601844,"reputation":315,"user_id":17638206,"display_name":"AAA"},"score":0,"creation_date":1681196179,"post_id":75980680,"comment_id":134013049,"body_markdown":"@markspace Kindly see the first two code blocks provided by rzwitserloot","body":"@markspace Kindly see the first two code blocks provided by rzwitserloot"}],"answers":[{"comments":[{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1681215948,"post_id":75980782,"comment_id":134017453,"body_markdown":"(and to clarify `new Object[0]` - `new Object()` is usually just as good, but the 0-len array variant serializes. Not that you should use java&#39;s baked in serialization mechanism, but if you are - `new Object[0]` it is.","body":"(and to clarify <code>new Object[0]</code> - <code>new Object()</code> is usually just as good, but the 0-len array variant serializes. Not that you should use java&#39;s baked in serialization mechanism, but if you are - <code>new Object[0]</code> it is."}],"tags":[],"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1681161184,"creation_date":1681161184,"answer_id":75980782,"question_id":75980680,"body_markdown":"Yes.\r\n\r\nThis:\r\n\r\n```\r\nsynchronized void foo() {\r\n  code();\r\n}\r\n```\r\n\r\nis simply shorthand for:\r\n\r\n```\r\nvoid foo() {\r\n  synchronized (this) {\r\n    code();\r\n  }\r\n}\r\n```\r\n\r\nFor the same reason having a public field is generally a really bad idea, having a public lock (and `this` is, usually, &#39;public&#39;, in the sense that code from outside the package has access to it) is a really bad idea. It&#39;s usually better to do:\r\n\r\n```\r\nclass Example {\r\n  private final Object lock = new Object[0];\r\n\r\n  public void foo() {\r\n    synchronized (lock) {\r\n      code();\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n__if__ you make the lock public (as in, use `synchronized`, or otherwise lock on something code outside of your direct control has access to), you __must__ document this, and be very detailed about what you promise to do and not do with that lock in future updates.\r\n","title":"Synchronized instances and Synchronized blocks","body":"<p>Yes.</p>\n<p>This:</p>\n<pre><code>synchronized void foo() {\n  code();\n}\n</code></pre>\n<p>is simply shorthand for:</p>\n<pre><code>void foo() {\n  synchronized (this) {\n    code();\n  }\n}\n</code></pre>\n<p>For the same reason having a public field is generally a really bad idea, having a public lock (and <code>this</code> is, usually, 'public', in the sense that code from outside the package has access to it) is a really bad idea. It's usually better to do:</p>\n<pre><code>class Example {\n  private final Object lock = new Object[0];\n\n  public void foo() {\n    synchronized (lock) {\n      code();\n    }\n  }\n}\n</code></pre>\n<p><strong>if</strong> you make the lock public (as in, use <code>synchronized</code>, or otherwise lock on something code outside of your direct control has access to), you <strong>must</strong> document this, and be very detailed about what you promise to do and not do with that lock in future updates.</p>\n"},{"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":1,"creation_date":1681163848,"post_id":75980842,"comment_id":134009576,"body_markdown":"Not sure I agree with `/* DO NOT DO THIS */` there are valid reasons to use more than one lock.  It can be done incorrectly of course but any code can be used incorrectly.","body":"Not sure I agree with <code>&#47;* DO NOT DO THIS *&#47;</code> there are valid reasons to use more than one lock.  It can be done incorrectly of course but any code can be used incorrectly."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1681173214,"post_id":75980842,"comment_id":134010648,"body_markdown":"I agree with [comment by markspace](https://stackoverflow.com/questions/75980680/synchronized-instances-and-synchronized-blocks#comment134009576_75980842). I would have up-voted except for that &quot;DO NOT DO THIS&quot; admonition. I suggest you rework this Answer to show on option for multiple locks being appropriate (and possible) where a single lock per object may not be.","body":"I agree with <a href=\"https://stackoverflow.com/questions/75980680/synchronized-instances-and-synchronized-blocks#comment134009576_75980842\">comment by markspace</a>. I would have up-voted except for that &quot;DO NOT DO THIS&quot; admonition. I suggest you rework this Answer to show on option for multiple locks being appropriate (and possible) where a single lock per object may not be."},{"owner":{"account_id":1692034,"reputation":3196,"user_id":1554195,"display_name":"tquadrat"},"score":0,"creation_date":1681194735,"post_id":75980842,"comment_id":134012787,"body_markdown":"@BasilBourque  Have a look to the sample code  the original code protects the data of the *instance*, while the sample uses locks that may work to protect *class data*. A completely different intention (if done intentionally!).","body":"@BasilBourque  Have a look to the sample code  the original code protects the data of the <i>instance</i>, while the sample uses locks that may work to protect <i>class data</i>. A completely different intention (if done intentionally!)."},{"owner":{"account_id":292208,"reputation":10665,"user_id":2245707,"accept_rate":17,"display_name":"pveentjer"},"score":0,"creation_date":1681216180,"post_id":75980842,"comment_id":134017509,"body_markdown":"This is called lock splitting and is a technique to increase concurrency.","body":"This is called lock splitting and is a technique to increase concurrency."},{"owner":{"account_id":1692034,"reputation":3196,"user_id":1554195,"display_name":"tquadrat"},"score":0,"creation_date":1681279168,"post_id":75980842,"comment_id":134028764,"body_markdown":"@pveentjer  To call it &quot;lock splitting&quot; you (or I in this case) need to specify the particular properties of `A` to be protected by which lock/modified by which method. In the shown over-generalised form you can&#39;t decide whether it is useful or crap. And most probably you would use *instance* objects, not *static* ones for the locks if &quot;lock splitting&quot; is your goal.","body":"@pveentjer  To call it &quot;lock splitting&quot; you (or I in this case) need to specify the particular properties of <code>A</code> to be protected by which lock/modified by which method. In the shown over-generalised form you can&#39;t decide whether it is useful or crap. And most probably you would use <i>instance</i> objects, not <i>static</i> ones for the locks if &quot;lock splitting&quot; is your goal."},{"owner":{"account_id":292208,"reputation":10665,"user_id":2245707,"accept_rate":17,"display_name":"pveentjer"},"score":0,"creation_date":1681281447,"post_id":75980842,"comment_id":134029172,"body_markdown":"I agree. You don&#39;t want to lock on a static field (I didn&#39;t see the static part).","body":"I agree. You don&#39;t want to lock on a static field (I didn&#39;t see the static part)."}],"tags":[],"owner":{"account_id":1692034,"reputation":3196,"user_id":1554195,"display_name":"tquadrat"},"comment_count":6,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681161766,"creation_date":1681161766,"answer_id":75980842,"question_id":75980680,"body_markdown":"Your code\r\n\r\n```Java\r\npublic final class A\r\n{\r\n    public synchronized void methodA\r\n    {\r\n        // Do Something\r\n    }\r\n    \r\n    public synchronized void methodB\r\n    {\r\n        // Do Something\r\n    }\r\n}\r\n```\r\n\r\nis equivalent to\r\n\r\n```Java\r\npublic final class A\r\n{\r\n    public void methodA\r\n    {\r\n        synchronized( this )\r\n        {\r\n            // Do Something\r\n        }\r\n    }\r\n    \r\n    public void methodB\r\n    {\r\n        synchronized( this )\r\n        {\r\n            // Do Something\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nSo basically, you assumption is correct, you can have two `synchronized` blocks instead of `synchronized` method to achieve the same effect.\r\n\r\nThe important thing is that the `synchronize` statements in both methods use the *same* object as &#39;argument&#39;! In this case it is the instance itself, therefore it is easy.\r\n\r\nBut I have also seen this in some code:\r\n\r\n```Java\r\npublic final class A\r\n{\r\n    /* DO NOT DO THIS */\r\n    private static final Object m_LockForA = new Object [0];\r\n    private static final Object m_LockForB = new Object [0];\r\n\r\n    public void methodA\r\n    {\r\n        synchronized( m_LockForA )\r\n        {\r\n            // Do Something\r\n        }\r\n    }\r\n    \r\n    public void methodB\r\n    {\r\n        synchronized( m_LockForB )\r\n        {\r\n            // Do Something\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nThis will work somehow (and perhaps it is even intended to work exactly in that way ) but completely different from your original code.\r\n","title":"Synchronized instances and Synchronized blocks","body":"<p>Your code</p>\n<pre><code>public final class A\n{\n    public synchronized void methodA\n    {\n        // Do Something\n    }\n    \n    public synchronized void methodB\n    {\n        // Do Something\n    }\n}\n</code></pre>\n<p>is equivalent to</p>\n<pre><code>public final class A\n{\n    public void methodA\n    {\n        synchronized( this )\n        {\n            // Do Something\n        }\n    }\n    \n    public void methodB\n    {\n        synchronized( this )\n        {\n            // Do Something\n        }\n    }\n}\n</code></pre>\n<p>So basically, you assumption is correct, you can have two <code>synchronized</code> blocks instead of <code>synchronized</code> method to achieve the same effect.</p>\n<p>The important thing is that the <code>synchronize</code> statements in both methods use the <em>same</em> object as 'argument'! In this case it is the instance itself, therefore it is easy.</p>\n<p>But I have also seen this in some code:</p>\n<pre><code>public final class A\n{\n    /* DO NOT DO THIS */\n    private static final Object m_LockForA = new Object [0];\n    private static final Object m_LockForB = new Object [0];\n\n    public void methodA\n    {\n        synchronized( m_LockForA )\n        {\n            // Do Something\n        }\n    }\n    \n    public void methodB\n    {\n        synchronized( m_LockForB )\n        {\n            // Do Something\n        }\n    }\n}\n</code></pre>\n<p>This will work somehow (and perhaps it is even intended to work exactly in that way ) but completely different from your original code.</p>\n"},{"tags":[],"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1681162129,"creation_date":1681162129,"answer_id":75980887,"question_id":75980680,"body_markdown":"Not an answer to your question (rzwitzerloot did a fine job of that,) but\r\n\r\n&gt; `t2` will be blocked from using the synchronized method `methodB` , even if `t1` is using only `methodA`.\r\n\r\nWe don&#39;t really ever need `synchronized` to prevent two threads from calling the same method. That&#39;s not the point. Methods are immutable. No harm can come from two threads being in the same method _per se._ The trouble comes when two (or more) threads access the same _data._\r\n\r\nIf two threads call the same instance method on two different objects, that&#39;s probably OK. If two threads call two different methods on the same single object, _that&#39;s_ when we want `synchronized` to prevent any thread from seeing the object in an invalid state (or worse, to prevent any thread from _leaving_ the object in an invalid state.","title":"Synchronized instances and Synchronized blocks","body":"<p>Not an answer to your question (rzwitzerloot did a fine job of that,) but</p>\n<blockquote>\n<p><code>t2</code> will be blocked from using the synchronized method <code>methodB</code> , even if <code>t1</code> is using only <code>methodA</code>.</p>\n</blockquote>\n<p>We don't really ever need <code>synchronized</code> to prevent two threads from calling the same method. That's not the point. Methods are immutable. No harm can come from two threads being in the same method <em>per se.</em> The trouble comes when two (or more) threads access the same <em>data.</em></p>\n<p>If two threads call the same instance method on two different objects, that's probably OK. If two threads call two different methods on the same single object, <em>that's</em> when we want <code>synchronized</code> to prevent any thread from seeing the object in an invalid state (or worse, to prevent any thread from <em>leaving</em> the object in an invalid state.</p>\n"}],"owner":{"account_id":23601844,"reputation":315,"user_id":17638206,"display_name":"AAA"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":64,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":75980782,"answer_count":3,"score":1,"last_activity_date":1681162129,"creation_date":1681160355,"question_id":75980680,"body_markdown":"Assume that we have a class with two synchronized blocks :\r\n\r\n    class A{\r\n    \r\n    public synchronized void methodA{\r\n    \r\n    // Do Something\r\n    }\r\n    \r\n    \r\n    public synchronized void methodB{\r\n    \r\n    // Do Something\r\n    }\r\n    \r\n    }\r\n\r\nAssume that we have two threads `t1` and `t2` sharing the same instance of class `A`. If `t1` will invoke `methodA` using its instance of class `A` and at the same time `t2` will invoke `methodB` using the same instance of class `A` that is used by `t1`. According to my understanding, `t2` will be blocked from using the synchronized method `methodB` , even if `t1` is using only `methodA`. This is because every object has one lock and this lock is acquired by `t1`. Is that correct ? If yes, can we conclude the same if we have two synchronized blocks instead ?\r\n\r\n","title":"Synchronized instances and Synchronized blocks","body":"<p>Assume that we have a class with two synchronized blocks :</p>\n<pre><code>class A{\n\npublic synchronized void methodA{\n\n// Do Something\n}\n\n\npublic synchronized void methodB{\n\n// Do Something\n}\n\n}\n</code></pre>\n<p>Assume that we have two threads <code>t1</code> and <code>t2</code> sharing the same instance of class <code>A</code>. If <code>t1</code> will invoke <code>methodA</code> using its instance of class <code>A</code> and at the same time <code>t2</code> will invoke <code>methodB</code> using the same instance of class <code>A</code> that is used by <code>t1</code>. According to my understanding, <code>t2</code> will be blocked from using the synchronized method <code>methodB</code> , even if <code>t1</code> is using only <code>methodA</code>. This is because every object has one lock and this lock is acquired by <code>t1</code>. Is that correct ? If yes, can we conclude the same if we have two synchronized blocks instead ?</p>\n"}],"has_more":true,"backoff":10,"quota_max":10000,"quota_remaining":9714,"page":511,"page_size":100}
