{"items":[{"tags":["java","string","itext","openpdf"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1679047900,"post_id":75766307,"comment_id":133654746,"body_markdown":"a String won&#39;t pass an IS-A check for Element, so you can&#39;t directly cast it, as the error is telling you. Likely, somewhere where you&#39;re casting, you need to map the value instead","body":"a String won&#39;t pass an IS-A check for Element, so you can&#39;t directly cast it, as the error is telling you. Likely, somewhere where you&#39;re casting, you need to map the value instead"},{"owner":{"account_id":19725538,"reputation":3,"user_id":14442226,"display_name":"Harshita Joshi"},"score":0,"creation_date":1679048057,"post_id":75766307,"comment_id":133654794,"body_markdown":"this issue is coming in openpdf library i think not in my code","body":"this issue is coming in openpdf library i think not in my code"},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1679048103,"post_id":75766307,"comment_id":133654810,"body_markdown":"Please share the stack trace of the exception.","body":"Please share the stack trace of the exception."},{"owner":{"account_id":19725538,"reputation":3,"user_id":14442226,"display_name":"Harshita Joshi"},"score":0,"creation_date":1679048376,"post_id":75766307,"comment_id":133654882,"body_markdown":"im only getting this error,no stack trace is there","body":"im only getting this error,no stack trace is there"},{"owner":{"account_id":2674923,"reputation":9479,"user_id":2311528,"accept_rate":59,"display_name":"Lonzak"},"score":0,"creation_date":1679296870,"post_id":75766307,"comment_id":133689258,"body_markdown":"There is usually always a stacktrace. Execute your code in an IDE and you&#39;ll see it.","body":"There is usually always a stacktrace. Execute your code in an IDE and you&#39;ll see it."}],"owner":{"account_id":19725538,"reputation":3,"user_id":14442226,"display_name":"Harshita Joshi"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":206,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679047805,"creation_date":1679047805,"question_id":75766307,"body_markdown":"I have replaced itext-2.1.0.jar with openpdf-1.3.30.jar because of the securities risks present in itext. I&#39;m getting the below error when pdf is getting generated:\r\n\r\njava.lang.ClassCastException: java.lang.String cannot be cast to com.lowagie.text.Element\r\n\r\nBelow is my code which I think is causing this issue:\r\n\r\n\r\n            float[] columnWidths = { 2, 2, 8 };\r\n            PdfPTable table = new PdfPTable(columnWidths);\r\n            \r\n            table.setSpacingBefore(40);\r\n            table.setWidthPercentage(100);\r\n            \r\n            PdfPCell c1 = new PdfPCell(new Phrase(logtime, font));\r\n            c1.setFixedHeight(17);\r\n            c1.setHorizontalAlignment(Element.ALIGN_CENTER);\r\n            table.addCell(c1);\r\n            \r\n            c1 = new PdfPCell(new Phrase(event, font));\r\n            c1.setHorizontalAlignment(Element.ALIGN_CENTER);\r\n            table.addCell(c1);\r\n            \r\n            c1 = new PdfPCell(new Phrase(description, font));\r\n            c1.setHorizontalAlignment(Element.ALIGN_CENTER);\r\n            table.addCell(c1);\r\n            table.setHeaderRows(1);\r\n\r\n\r\nwhen i searched the internet i got this (https://github.com/LibrePDF/OpenPDF/issues/274)\r\nnot sure if this is my case.\r\n\r\nCan anyone please tell me how to fix this issue?\r\n\r\nMy pdf looks like this :\r\n\r\n----Sample Output --------\r\n\r\n-x-x-x-x Some info present here -x-x-x-x-x-\r\n\r\n----\r\n| Column A | Column B |\r\n| -------- | -------- |\r\n| Cell 1   | Cell 2   |\r\n| Cell 3   | Cell 4   |\r\n\r\n-x-x-x-x End of Pdf -x-x-x-x-x\r\n\r\nNote :- Number of columns are fixed and rows are dynamic \r\n\r\n\r\n\r\n\r\nI tried hard coding the Element.ALIGN_CENTER but it did not work then i got to know the issue is in Phrase class of openpdf jar","title":"Gettin Exception java.lang.ClassCastException: java.lang.String cannot be cast to com.lowagie.text.Element when generated pdf using openpdf-1.3.30.jar","body":"<p>I have replaced itext-2.1.0.jar with openpdf-1.3.30.jar because of the securities risks present in itext. I'm getting the below error when pdf is getting generated:</p>\n<p>java.lang.ClassCastException: java.lang.String cannot be cast to com.lowagie.text.Element</p>\n<p>Below is my code which I think is causing this issue:</p>\n<pre><code>        float[] columnWidths = { 2, 2, 8 };\n        PdfPTable table = new PdfPTable(columnWidths);\n        \n        table.setSpacingBefore(40);\n        table.setWidthPercentage(100);\n        \n        PdfPCell c1 = new PdfPCell(new Phrase(logtime, font));\n        c1.setFixedHeight(17);\n        c1.setHorizontalAlignment(Element.ALIGN_CENTER);\n        table.addCell(c1);\n        \n        c1 = new PdfPCell(new Phrase(event, font));\n        c1.setHorizontalAlignment(Element.ALIGN_CENTER);\n        table.addCell(c1);\n        \n        c1 = new PdfPCell(new Phrase(description, font));\n        c1.setHorizontalAlignment(Element.ALIGN_CENTER);\n        table.addCell(c1);\n        table.setHeaderRows(1);\n</code></pre>\n<p>when i searched the internet i got this (<a href=\"https://github.com/LibrePDF/OpenPDF/issues/274\" rel=\"nofollow noreferrer\">https://github.com/LibrePDF/OpenPDF/issues/274</a>)\nnot sure if this is my case.</p>\n<p>Can anyone please tell me how to fix this issue?</p>\n<p>My pdf looks like this :</p>\n<p>----Sample Output --------</p>\n<p>-x-x-x-x Some info present here -x-x-x-x-x-</p>\n<hr />\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>Column A</th>\n<th>Column B</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Cell 1</td>\n<td>Cell 2</td>\n</tr>\n<tr>\n<td>Cell 3</td>\n<td>Cell 4</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>-x-x-x-x End of Pdf -x-x-x-x-x</p>\n<p>Note :- Number of columns are fixed and rows are dynamic</p>\n<p>I tried hard coding the Element.ALIGN_CENTER but it did not work then i got to know the issue is in Phrase class of openpdf jar</p>\n"},{"tags":["java","pdfbox","digital-signature","bouncycastle"],"comments":[{"owner":{"account_id":15178500,"reputation":4190,"user_id":10952503,"display_name":"Elikill58"},"score":0,"creation_date":1678978437,"post_id":75757770,"comment_id":133640948,"body_markdown":"Why do not put everything on same server, that will help your signature to be fine","body":"Why do not put everything on same server, that will help your signature to be fine"},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":2,"creation_date":1678984290,"post_id":75757770,"comment_id":133642863,"body_markdown":"*&quot;Is my approach wrong?&quot;* - Yes. If I understand you correctly, you take the original PDF as-is and calculate its hash for signing. This is wrong, you have to prepare the original PDF for signing, a signature field must be set with a signature dictionary containing among other entries a dummy signature value, then this prepared PDF (except the dummy value) must be hashed, see [this answer](https://security.stackexchange.com/a/35131/16096) for details. Thus, PDFBox (which does this preparation) must be used from the start.","body":"<i>&quot;Is my approach wrong?&quot;</i> - Yes. If I understand you correctly, you take the original PDF as-is and calculate its hash for signing. This is wrong, you have to prepare the original PDF for signing, a signature field must be set with a signature dictionary containing among other entries a dummy signature value, then this prepared PDF (except the dummy value) must be hashed, see <a href=\"https://security.stackexchange.com/a/35131/16096\">this answer</a> for details. Thus, PDFBox (which does this preparation) must be used from the start."},{"owner":{"account_id":28033614,"reputation":13,"user_id":21412395,"display_name":"Kim"},"score":0,"creation_date":1678984686,"post_id":75757770,"comment_id":133642992,"body_markdown":"@mkl Thank you for your response. As far as I understand pdfbox already does this and passes it as content in overriden sign() method. I&#39;m hashing the content bytes and not the pdf directly.  This is what i had mentioned under &quot;more details&quot; in my problem statement. This is the code snippet with just the hashing.","body":"@mkl Thank you for your response. As far as I understand pdfbox already does this and passes it as content in overriden sign() method. I&#39;m hashing the content bytes and not the pdf directly.  This is what i had mentioned under &quot;more details&quot; in my problem statement. This is the code snippet with just the hashing."},{"owner":{"account_id":28033614,"reputation":13,"user_id":21412395,"display_name":"Kim"},"score":0,"creation_date":1678988337,"post_id":75757770,"comment_id":133644089,"body_markdown":"@Elikill58 Well its more of a business usecase","body":"@Elikill58 Well its more of a business usecase"},{"owner":{"account_id":28033614,"reputation":13,"user_id":21412395,"display_name":"Kim"},"score":0,"creation_date":1678989732,"post_id":75757770,"comment_id":133644499,"body_markdown":"@mkl This is the code for the sign() method in the custom SIgnatureInterface of pdfbox (which gets invoked when document.saveIncremental() is executed). In this I perform hashing of the content using SHA-256. But I have also included the code snippet of the digital signature generation that happens on server B to give you more understanding on the algorithm that is being used.   https://github.com/johnskim9414/signPdf/blob/6d8cebe57e9b5fed2e3cc62649ecf4cd3a9e8049/src/main/java/com/sign/pdf/CustomSignature.java","body":"@mkl This is the code for the sign() method in the custom SIgnatureInterface of pdfbox (which gets invoked when document.saveIncremental() is executed). In this I perform hashing of the content using SHA-256. But I have also included the code snippet of the digital signature generation that happens on server B to give you more understanding on the algorithm that is being used.   <a href=\"https://github.com/johnskim9414/signPdf/blob/6d8cebe57e9b5fed2e3cc62649ecf4cd3a9e8049/src/main/java/com/sign/pdf/CustomSignature.java\" rel=\"nofollow noreferrer\">github.com/johnskim9414/signPdf/blob/&hellip;</a>"},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1679011353,"post_id":75757770,"comment_id":133649015,"body_markdown":"Considering your update and your code you really appear to hash to often... maybe once less on server B would help.","body":"Considering your update and your code you really appear to hash to often... maybe once less on server B would help."},{"owner":{"account_id":28033614,"reputation":13,"user_id":21412395,"display_name":"Kim"},"score":0,"creation_date":1679023895,"post_id":75757770,"comment_id":133650465,"body_markdown":"@mkl yes, hashing cannot be removed at server A, so I was trying to remove it at server B but they aren&#39;t effective. can you please help me with a reference for separating hashing from encryption on server B? because all algorithms supported by bouncyCastle come with a combination of hashing and signing (ex: SHA256WithRSA).                                         \nAlso is it safe to just perform encryption on server B for generating digital signature? as through my research many people suggest that encryption depends on hashing algorithm properties to avoid collision attacks.","body":"@mkl yes, hashing cannot be removed at server A, so I was trying to remove it at server B but they aren&#39;t effective. can you please help me with a reference for separating hashing from encryption on server B? because all algorithms supported by bouncyCastle come with a combination of hashing and signing (ex: SHA256WithRSA).                                          Also is it safe to just perform encryption on server B for generating digital signature? as through my research many people suggest that encryption depends on hashing algorithm properties to avoid collision attacks."}],"answers":[{"comments":[{"owner":{"account_id":28033614,"reputation":13,"user_id":21412395,"display_name":"Kim"},"score":0,"creation_date":1679061194,"post_id":75766291,"comment_id":133658039,"body_markdown":"Thank you mkl. Used your suggestion to implement a customDigestCalculator and by replacing the code,_gen.addSignerInfoGenerator(new JcaSignerInfoGeneratorBuilder(new JcaDigestCalculatorProviderBuilder().build()).build(sha256Signer, cert));_  with   **gen.addSignerInfoGenerator(new JcaSignerInfoGeneratorBuilder(new PrecomputedDigestCalculatorProvider(hash)).build(sha256Signer, cert));** But what should be passed as replacement to &quot;hash&quot; &amp; the resulting &quot;cmsData&quot; in these two lines _CMSTypedData cmsData = new CMSProcessableByteArray(hash);\nCMSSignedData cms = gen.generate(cmsData, false);_","body":"Thank you mkl. Used your suggestion to implement a customDigestCalculator and by replacing the code,<i>gen.addSignerInfoGenerator(new JcaSignerInfoGeneratorBuilder(new JcaDigestCalculatorProviderBuilder().build()).build(sha256Si&zwnj;&#8203;gner, cert));</i>  with   <b>gen.addSignerInfoGenerator(new JcaSignerInfoGeneratorBuilder(new PrecomputedDigestCalculatorProvider(hash)).build(sha256Signe&zwnj;&#8203;r, cert));</b> But what should be passed as replacement to &quot;hash&quot; &amp; the resulting &quot;cmsData&quot; in these two lines <i>CMSTypedData cmsData = new CMSProcessableByteArray(hash); CMSSignedData cms = gen.generate(cmsData, false);</i>"},{"owner":{"account_id":28033614,"reputation":13,"user_id":21412395,"display_name":"Kim"},"score":0,"creation_date":1679063548,"post_id":75766291,"comment_id":133658740,"body_markdown":"I implemented the custom DigestCalculator **PrecomputedDigestCalculatorProvider** as suggested by mkl and modified the code as below : **gen.addSignerInfoGenerator(new JcaSignerInfoGeneratorBuilder(\n                new PrecomputedDigestCalculatorProvider(hash)).build(sha256Signer, cert));\n    CMSAbsentContent absentContent = new CMSAbsentContent();\n    CMSSignedData cms = gen.generate(absentContent, false);** CMSAbsentContent object tells the CMSSignedDataGenerator that there is no actual content to be signed, and that only the hash value needs to be signed. This worked for me!","body":"I implemented the custom DigestCalculator <b>PrecomputedDigestCalculatorProvider</b> as suggested by mkl and modified the code as below : <b>gen.addSignerInfoGenerator(new JcaSignerInfoGeneratorBuilder(                 new PrecomputedDigestCalculatorProvider(hash)).build(sha256Signe&zwnj;&#8203;r, cert));     CMSAbsentContent absentContent = new CMSAbsentContent();     CMSSignedData cms = gen.generate(absentContent, false);</b> CMSAbsentContent object tells the CMSSignedDataGenerator that there is no actual content to be signed, and that only the hash value needs to be signed. This worked for me!"},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1679064439,"post_id":75766291,"comment_id":133659019,"body_markdown":"`CMSAbsentContent` sounds good. Theoretically you could use arbitrary content as you neither hash it (you&#39;re using a fixed hash after all) nor embed it in the signature container.","body":"<code>CMSAbsentContent</code> sounds good. Theoretically you could use arbitrary content as you neither hash it (you&#39;re using a fixed hash after all) nor embed it in the signature container."}],"tags":[],"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"comment_count":3,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1679047708,"creation_date":1679047708,"answer_id":75766291,"question_id":75757770,"body_markdown":"According to your [linked sources][1], your current hash signing on server B looks like this:\r\n\r\n```lang-java\r\n/* Start : This is code snippet of the digital signature logic residing on server B */\r\nSecurity.addProvider(new BouncyCastleFipsProvider());\r\nX509Certificate cert = getCertificate();\r\nCertificate[] certificateChain = new Certificate[1];\r\ncertificateChain[0] = cert;\r\nStore certs = new JcaCertStore(Arrays.asList(certificateChain));\r\nCMSSignedDataGenerator gen = new CMSSignedDataGenerator();\r\nContentSigner sha256Signer = new JcaContentSignerBuilder(&quot;SHA256WithRSA&quot;).build(getPrivateKey());\r\ngen.addSignerInfoGenerator(new JcaSignerInfoGeneratorBuilder(\r\n    new JcaDigestCalculatorProviderBuilder().build()).build(sha256Signer, cert));\r\ngen.addCertificates(certs);\r\nCMSTypedData cmsData = new CMSProcessableByteArray(hash);\r\nCMSSignedData cms = gen.generate(cmsData, false);\r\nbyte[] signedHash = cms.getEncoded(); \r\n/* End : This is code snippet of the digital signature logic residing on server B */\r\n```\r\nBut this considers your `hash` to be the data to sign, not a pre-calculated hash thereof, and calculates the digest of it internally. Thus, the resulting signature container does not sign your PDF but your `hash` bytes.\r\n\r\nTo make this code _not_ calculate the digest itself but instead use your `hash` as pre-calculated digest, you have to replace the `DigestCalculatorProvider` returned by `new JcaDigestCalculatorProviderBuilder().build()` with a custom implementation that provides `DigestCalculator` objects that constantly return `hash`.\r\n\r\nFor the normal BouncyCastle library such an implementation might look like this:\r\n```lang-java\r\npublic class PrecomputedDigestCalculatorProvider implements DigestCalculatorProvider {\r\n\tprivate final byte[] digest;\r\n\r\n\tpublic PrecomputedDigestCalculatorProvider(byte[] digest) {\r\n\t\tthis.digest = digest;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic DigestCalculator get(final AlgorithmIdentifier digestAlgorithmIdentifier) throws OperatorCreationException {\r\n\r\n\t\treturn new DigestCalculator() {\r\n\t\t\t@Override\r\n\t\t\tpublic OutputStream getOutputStream() {\r\n\t\t\t\treturn new ByteArrayOutputStream();\r\n\t\t\t}\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic byte[] getDigest() {\r\n\t\t\t\treturn digest;\r\n\t\t\t}\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic AlgorithmIdentifier getAlgorithmIdentifier() {\r\n\t\t\t\treturn digestAlgorithmIdentifier;\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n}\r\n```\r\n\r\nYou say you&#39;re using the FIPS variant of BouncyCastle. Thus, you may have to adapt the code somewhat.\r\n\r\n\r\n  [1]: https://github.com/johnskim9414/signPdf/blob/6d8cebe57e9b5fed2e3cc62649ecf4cd3a9e8049/src/main/java/com/sign/pdf/CustomSignature.java\r\n","title":"I have a pre-computed hash of a pdf document, how to generate digital signature using the hash and stamping it on the document using pdfbox?","body":"<p>According to your <a href=\"https://github.com/johnskim9414/signPdf/blob/6d8cebe57e9b5fed2e3cc62649ecf4cd3a9e8049/src/main/java/com/sign/pdf/CustomSignature.java\" rel=\"nofollow noreferrer\">linked sources</a>, your current hash signing on server B looks like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>/* Start : This is code snippet of the digital signature logic residing on server B */\nSecurity.addProvider(new BouncyCastleFipsProvider());\nX509Certificate cert = getCertificate();\nCertificate[] certificateChain = new Certificate[1];\ncertificateChain[0] = cert;\nStore certs = new JcaCertStore(Arrays.asList(certificateChain));\nCMSSignedDataGenerator gen = new CMSSignedDataGenerator();\nContentSigner sha256Signer = new JcaContentSignerBuilder(&quot;SHA256WithRSA&quot;).build(getPrivateKey());\ngen.addSignerInfoGenerator(new JcaSignerInfoGeneratorBuilder(\n    new JcaDigestCalculatorProviderBuilder().build()).build(sha256Signer, cert));\ngen.addCertificates(certs);\nCMSTypedData cmsData = new CMSProcessableByteArray(hash);\nCMSSignedData cms = gen.generate(cmsData, false);\nbyte[] signedHash = cms.getEncoded(); \n/* End : This is code snippet of the digital signature logic residing on server B */\n</code></pre>\n<p>But this considers your <code>hash</code> to be the data to sign, not a pre-calculated hash thereof, and calculates the digest of it internally. Thus, the resulting signature container does not sign your PDF but your <code>hash</code> bytes.</p>\n<p>To make this code <em>not</em> calculate the digest itself but instead use your <code>hash</code> as pre-calculated digest, you have to replace the <code>DigestCalculatorProvider</code> returned by <code>new JcaDigestCalculatorProviderBuilder().build()</code> with a custom implementation that provides <code>DigestCalculator</code> objects that constantly return <code>hash</code>.</p>\n<p>For the normal BouncyCastle library such an implementation might look like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class PrecomputedDigestCalculatorProvider implements DigestCalculatorProvider {\n    private final byte[] digest;\n\n    public PrecomputedDigestCalculatorProvider(byte[] digest) {\n        this.digest = digest;\n    }\n\n    @Override\n    public DigestCalculator get(final AlgorithmIdentifier digestAlgorithmIdentifier) throws OperatorCreationException {\n\n        return new DigestCalculator() {\n            @Override\n            public OutputStream getOutputStream() {\n                return new ByteArrayOutputStream();\n            }\n\n            @Override\n            public byte[] getDigest() {\n                return digest;\n            }\n\n            @Override\n            public AlgorithmIdentifier getAlgorithmIdentifier() {\n                return digestAlgorithmIdentifier;\n            }\n        };\n    }\n}\n</code></pre>\n<p>You say you're using the FIPS variant of BouncyCastle. Thus, you may have to adapt the code somewhat.</p>\n"}],"owner":{"account_id":28033614,"reputation":13,"user_id":21412395,"display_name":"Kim"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":307,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75766291,"answer_count":1,"score":1,"last_activity_date":1679047708,"creation_date":1678977569,"question_id":75757770,"body_markdown":"I&#39;m pretty new to the concept of digital signatures, signing etc.\r\nCurrently in a pickle, my problem description is as follows:\r\n\r\nI have 2 different servers.\r\nServer A : The pdf document is uploaded, a hash for this document is created using SHA-256 Algorithm with the MessageDigest interface. The hash is passed on to server B for generating the digital signature or signed hash. This signature from server B is then stamped on to the pdf document using pdfBox.\r\n\r\nmore details =&gt; The uploaded document is passed to pdfbox code (on server A) to attach a PDSignature to the document, the SignatureInterface is overwritten and the contents obtained as parameter from the sign() method (overriden method) is hashed using SHA-256, passed to server B to generate digital signature and then returned as byte\\[\\] in the sign() method. Pdfbox then goes ahead and stamps this signature to the document.\r\n\r\nServer B : generates the digital signature using SHA256WithRSA algorithm with BouncyCastleFipsProvider.\r\n\r\nI was expecting the signature to be certified as valid in Adobe. But, On opening the resulting document from Adobe, I get the following error\r\n&quot;The document is altered or modified&quot;\r\n\r\nIs my approach wrong? is there a different approach that could solve my problem ?\r\nThe required flow is =\\&gt; server A will generate a hash, server B will then generate the signature and server A will stamp this on the pdf document.\r\n\r\n\r\n\r\n**An update** Just to add, I tried by simply passing the content bytes from pdfBox (without hashing) to server B and stamped the resulting signature on the pdf document, the signature is valid. But however the requirement strictly wants only the document hash to be passed from server A to  B and not the contents.","title":"I have a pre-computed hash of a pdf document, how to generate digital signature using the hash and stamping it on the document using pdfbox?","body":"<p>I'm pretty new to the concept of digital signatures, signing etc.\nCurrently in a pickle, my problem description is as follows:</p>\n<p>I have 2 different servers.\nServer A : The pdf document is uploaded, a hash for this document is created using SHA-256 Algorithm with the MessageDigest interface. The hash is passed on to server B for generating the digital signature or signed hash. This signature from server B is then stamped on to the pdf document using pdfBox.</p>\n<p>more details =&gt; The uploaded document is passed to pdfbox code (on server A) to attach a PDSignature to the document, the SignatureInterface is overwritten and the contents obtained as parameter from the sign() method (overriden method) is hashed using SHA-256, passed to server B to generate digital signature and then returned as byte[] in the sign() method. Pdfbox then goes ahead and stamps this signature to the document.</p>\n<p>Server B : generates the digital signature using SHA256WithRSA algorithm with BouncyCastleFipsProvider.</p>\n<p>I was expecting the signature to be certified as valid in Adobe. But, On opening the resulting document from Adobe, I get the following error\n&quot;The document is altered or modified&quot;</p>\n<p>Is my approach wrong? is there a different approach that could solve my problem ?\nThe required flow is =&gt; server A will generate a hash, server B will then generate the signature and server A will stamp this on the pdf document.</p>\n<p><strong>An update</strong> Just to add, I tried by simply passing the content bytes from pdfBox (without hashing) to server B and stamped the resulting signature on the pdf document, the signature is valid. But however the requirement strictly wants only the document hash to be passed from server A to  B and not the contents.</p>\n"},{"tags":["java","swing","user-interface","jframe"],"comments":[{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":3,"creation_date":1679017462,"post_id":75762990,"comment_id":133649745,"body_markdown":"`frame.setLayout(null);` &lt;-- Bad idea, which is probably why you&#39;re trying to make the frame non-resizable.  As a user, I&#39;ll be very grumpy (really hate non-resizable windows)","body":"<code>frame.setLayout(null);</code> &lt;-- Bad idea, which is probably why you&#39;re trying to make the frame non-resizable.  As a user, I&#39;ll be very grumpy (really hate non-resizable windows)"},{"owner":{"account_id":19131367,"reputation":2040,"user_id":13992057,"display_name":"8c6b5df0d16ade6c"},"score":0,"creation_date":1679069843,"post_id":75762990,"comment_id":133660590,"body_markdown":"@MadProgrammer This is not production stuff, just learning and trying out the framework. But thanks for the tip, I&#39;ll keep that in mind.","body":"@MadProgrammer This is not production stuff, just learning and trying out the framework. But thanks for the tip, I&#39;ll keep that in mind."},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1679079455,"post_id":75762990,"comment_id":133662913,"body_markdown":"“Learning” and “production” code should be the same goal &#128521;","body":"“Learning” and “production” code should be the same goal 😉"}],"answers":[{"comments":[{"owner":{"account_id":19131367,"reputation":2040,"user_id":13992057,"display_name":"8c6b5df0d16ade6c"},"score":0,"creation_date":1679064564,"post_id":75763027,"comment_id":133659060,"body_markdown":"Thanks, this worked, and so did using `frame.repaint()` at the very end regardless of order.","body":"Thanks, this worked, and so did using <code>frame.repaint()</code> at the very end regardless of order."}],"tags":[],"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"comment_count":1,"down_vote_count":1,"up_vote_count":3,"is_accepted":true,"score":2,"last_activity_date":1679016544,"creation_date":1679016544,"answer_id":75763027,"question_id":75762990,"body_markdown":"Don&#39;t make the `frame` visible **before** adding `label`.\r\n\r\n    // NOT HERE\r\n    // frame.setResizable(false);\r\n    // frame.setVisible(true);\r\n\r\n    JLabel label = new JLabel();\r\n    label.setText(&quot;Hello world!&quot;);\r\n    label.setIcon(new ImageIcon(&quot;assets/logo-50x50.png&quot;));\r\n    label.setBackground(Color.red);\r\n    label.setBounds(0, 0, 250, 250);\r\n    frame.add(label);\r\n    // HERE\r\n    frame.setResizable(false);\r\n    frame.setVisible(true);","title":"Bug - can&#39;t have resizable frame and a label icon","body":"<p>Don't make the <code>frame</code> visible <strong>before</strong> adding <code>label</code>.</p>\n<pre><code>// NOT HERE\n// frame.setResizable(false);\n// frame.setVisible(true);\n\nJLabel label = new JLabel();\nlabel.setText(&quot;Hello world!&quot;);\nlabel.setIcon(new ImageIcon(&quot;assets/logo-50x50.png&quot;));\nlabel.setBackground(Color.red);\nlabel.setBounds(0, 0, 250, 250);\nframe.add(label);\n// HERE\nframe.setResizable(false);\nframe.setVisible(true);\n</code></pre>\n"}],"owner":{"account_id":19131367,"reputation":2040,"user_id":13992057,"display_name":"8c6b5df0d16ade6c"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":75763027,"answer_count":1,"score":-1,"last_activity_date":1679047582,"creation_date":1679016141,"question_id":75762990,"body_markdown":"Does anyone know how to fix this? if line `A` AND line `B `are included at the same time, then things stop being displayed, but if exclusively one is included, or both are not, then everything works fine. I’m terribly confused. Here’s some reproducible code.\r\n\r\n```java\r\npackage ui;\r\n\r\nimport java.awt.*;\r\nimport java.io.IOException;\r\n\r\nimport javax.swing.*;\r\n\r\npublic class Main {\r\n    public static void main(String[] args) throws IOException {\r\n        JFrame frame = new JFrame();\r\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n        frame.setSize(1600, 900);\r\n        frame.setLayout(null);\r\n        frame.setBackground(new Color(0xFAFAFA));\r\n        frame.setTitle(&quot;App !&quot;);\r\n        frame.setResizable(false); // &lt;------ LINE A\r\n        frame.setVisible(true);\r\n\r\n        JLabel label = new JLabel();\r\n        label.setText(&quot;Hello world!&quot;);\r\n        label.setIcon(new ImageIcon(&quot;assets/logo-50x50.png&quot;)); // &lt;----- LINE B\r\n        label.setBackground(Color.red);\r\n        label.setBounds(0, 0, 250, 250);\r\n\r\n        frame.add(label);\r\n    }\r\n}\r\n```","title":"Bug - can&#39;t have resizable frame and a label icon","body":"<p>Does anyone know how to fix this? if line <code>A</code> AND line <code>B </code>are included at the same time, then things stop being displayed, but if exclusively one is included, or both are not, then everything works fine. I’m terribly confused. Here’s some reproducible code.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package ui;\n\nimport java.awt.*;\nimport java.io.IOException;\n\nimport javax.swing.*;\n\npublic class Main {\n    public static void main(String[] args) throws IOException {\n        JFrame frame = new JFrame();\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        frame.setSize(1600, 900);\n        frame.setLayout(null);\n        frame.setBackground(new Color(0xFAFAFA));\n        frame.setTitle(&quot;App !&quot;);\n        frame.setResizable(false); // &lt;------ LINE A\n        frame.setVisible(true);\n\n        JLabel label = new JLabel();\n        label.setText(&quot;Hello world!&quot;);\n        label.setIcon(new ImageIcon(&quot;assets/logo-50x50.png&quot;)); // &lt;----- LINE B\n        label.setBackground(Color.red);\n        label.setBounds(0, 0, 250, 250);\n\n        frame.add(label);\n    }\n}\n</code></pre>\n"},{"tags":["java","performance","logging"],"comments":[{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1679043494,"post_id":75764679,"comment_id":133653589,"body_markdown":"&quot;performance friendly?&quot; -&gt; the `if` statement will always be executed, no matter where it is, so that is no concern. If it is put before calling the method, the method will only be called if needed, so that is probably better for performance (ignoring eventual optimization potentials)","body":"&quot;performance friendly?&quot; -&gt; the <code>if</code> statement will always be executed, no matter where it is, so that is no concern. If it is put before calling the method, the method will only be called if needed, so that is probably better for performance (ignoring eventual optimization potentials)"},{"owner":{"account_id":5998820,"reputation":12676,"user_id":4712734,"display_name":"DuncG"},"score":0,"creation_date":1679049247,"post_id":75764679,"comment_id":133655074,"body_markdown":"Use `if` first if any of the arguments to `logPacket` might have high evaluation cost - such as memory, file or db access, otherwise you&#39;re unlikely to see a difference if they are all simple get/member calls. For example what if typeByValue.toString was a huge memory size.","body":"Use <code>if</code> first if any of the arguments to <code>logPacket</code> might have high evaluation cost - such as memory, file or db access, otherwise you&#39;re unlikely to see a difference if they are all simple get/member calls. For example what if typeByValue.toString was a huge memory size."}],"answers":[{"tags":[],"owner":{"account_id":1642943,"reputation":19407,"user_id":1515052,"accept_rate":90,"display_name":"Simulant"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679047273,"creation_date":1679047273,"answer_id":75766195,"question_id":75764679,"body_markdown":"Always measure different alternatives with realistic input, when you are worried about performance. Otherwise you cannot know if your change makes a noticable difference. Most of the time the performance impact negligible and you choose the best option for readability anyway.\r\n\r\nA method call in Java is very cheap. It almost adds no overhead to call an additional method. Putting the `log.isInfoEnabled()` inside the `logPacket` method, makes the call cleaner and easier to read (one instead of 3 lines of code when calling and reducing an if-nesting every time it is called). Maybe rename the method to `infoLogPacket` to make the condition also clear from the method name.\r\n\r\nHowever you should avoid to evaluate any values for the logging before checking the log level, as these would be wasted calls, if the log level is not active. `Packet.Type.getTypeByValue(code).toString()` should be called after `log.isInfoEnabled()` when you move the check into your method. So you have to change the method signature to pass the `code` instead of the `String` and do the convertion after the log level check.\r\n\r\nSo my solution would be:\r\n\r\n    private void infoLogPacket(String msg, ConnectPoint sessionInfo, Ethernet packet, Code code) {\r\n        if(log.isInfoEnabled()) {\r\n            String packetType = Packet.Type.getTypeByValue(code).toString();\r\n            log.info(msg + &quot; type: {} to: {} client: {} stageCode: {} vlan: {} vlanPcp: {} srcMac: {} dstMac: {}&quot;, \r\n                packetType, sessionInfo, sessionInfo.port().name(), packet.getPriorityCode(), packet.getVlanID(), packet.getQinQVID(), packet.getSourceMAC(), packet.getDestinationMAC());\r\n        }\r\n    }","title":"Which is more performance friendly? If check inside function or before calling the function in Java","body":"<p>Always measure different alternatives with realistic input, when you are worried about performance. Otherwise you cannot know if your change makes a noticable difference. Most of the time the performance impact negligible and you choose the best option for readability anyway.</p>\n<p>A method call in Java is very cheap. It almost adds no overhead to call an additional method. Putting the <code>log.isInfoEnabled()</code> inside the <code>logPacket</code> method, makes the call cleaner and easier to read (one instead of 3 lines of code when calling and reducing an if-nesting every time it is called). Maybe rename the method to <code>infoLogPacket</code> to make the condition also clear from the method name.</p>\n<p>However you should avoid to evaluate any values for the logging before checking the log level, as these would be wasted calls, if the log level is not active. <code>Packet.Type.getTypeByValue(code).toString()</code> should be called after <code>log.isInfoEnabled()</code> when you move the check into your method. So you have to change the method signature to pass the <code>code</code> instead of the <code>String</code> and do the convertion after the log level check.</p>\n<p>So my solution would be:</p>\n<pre><code>private void infoLogPacket(String msg, ConnectPoint sessionInfo, Ethernet packet, Code code) {\n    if(log.isInfoEnabled()) {\n        String packetType = Packet.Type.getTypeByValue(code).toString();\n        log.info(msg + &quot; type: {} to: {} client: {} stageCode: {} vlan: {} vlanPcp: {} srcMac: {} dstMac: {}&quot;, \n            packetType, sessionInfo, sessionInfo.port().name(), packet.getPriorityCode(), packet.getVlanID(), packet.getQinQVID(), packet.getSourceMAC(), packet.getDestinationMAC());\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":20656191,"reputation":187,"user_id":17563251,"display_name":"baris"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1679079320,"answer_count":1,"score":1,"last_activity_date":1679047273,"creation_date":1679037252,"question_id":75764679,"body_markdown":"I want to use a if check before printing the log by checking the log level. \r\n`logPacket` function is used couple of times. I&#39;m confused whether should I check the log level before or after calling the `logPacket` function. Following code segments is what make me think about performance. Is it overengineering?\r\n```\r\nif (log.isInfoEnabled()) {\r\n    logPacket(&quot;Received Packet. &quot;, packetCp, packet, Packet.Type.getTypeByValue(code).toString());\r\n}\r\n```\r\n\r\n```\r\nprivate void logPacket(String msg, ConnectPoint sessionInfo, Ethernet packet, String packetType) {\r\n    if(log.isInfoEnabled()) {\r\n        log.info(msg + &quot; type: {} to: {} client: {} stageCode: {} vlan: {} vlanPcp: {} srcMac: {} dstMac: {}&quot;, \r\n            packetType, sessionInfo, sessionInfo.port().name(), packet.getPriorityCode(), packet.getVlanID(), packet.getQinQVID(), packet.getSourceMAC(), packet.getDestinationMAC());\r\n    }\r\n}\r\n```\r\n\r\nShould I put the statement `log.isInfoEnabled()` inside the function before printing the log or should I use the if statement before calling the function as I indicated in the first place. \r\n\r\nIf log level is not info, then making extra call for the `logPacket` function degrades the performance I guess (not sure how much). But if I use the if check before the function call, code may get dirtier. \r\n\r\nWhich one looks more clean? I&#39;m not sure.\r\n\r\nCan&#39;t make a reasonable comparison.","title":"Which is more performance friendly? If check inside function or before calling the function in Java","body":"<p>I want to use a if check before printing the log by checking the log level.\n<code>logPacket</code> function is used couple of times. I'm confused whether should I check the log level before or after calling the <code>logPacket</code> function. Following code segments is what make me think about performance. Is it overengineering?</p>\n<pre><code>if (log.isInfoEnabled()) {\n    logPacket(&quot;Received Packet. &quot;, packetCp, packet, Packet.Type.getTypeByValue(code).toString());\n}\n</code></pre>\n<pre><code>private void logPacket(String msg, ConnectPoint sessionInfo, Ethernet packet, String packetType) {\n    if(log.isInfoEnabled()) {\n        log.info(msg + &quot; type: {} to: {} client: {} stageCode: {} vlan: {} vlanPcp: {} srcMac: {} dstMac: {}&quot;, \n            packetType, sessionInfo, sessionInfo.port().name(), packet.getPriorityCode(), packet.getVlanID(), packet.getQinQVID(), packet.getSourceMAC(), packet.getDestinationMAC());\n    }\n}\n</code></pre>\n<p>Should I put the statement <code>log.isInfoEnabled()</code> inside the function before printing the log or should I use the if statement before calling the function as I indicated in the first place.</p>\n<p>If log level is not info, then making extra call for the <code>logPacket</code> function degrades the performance I guess (not sure how much). But if I use the if check before the function call, code may get dirtier.</p>\n<p>Which one looks more clean? I'm not sure.</p>\n<p>Can't make a reasonable comparison.</p>\n"},{"tags":["java","spring-boot","spring-webflux","springdoc"],"comments":[{"owner":{"account_id":12810928,"reputation":2458,"user_id":9269177,"display_name":"Debargha Roy"},"score":0,"creation_date":1664528741,"post_id":73773907,"comment_id":130497271,"body_markdown":"Don&#39;t think there&#39;s a cleaner way of doing. You can raise a feature request for the same but I&#39;m not sure if that&#39;ll be prioritized as this is a rare situation.","body":"Don&#39;t think there&#39;s a cleaner way of doing. You can raise a feature request for the same but I&#39;m not sure if that&#39;ll be prioritized as this is a rare situation."}],"answers":[{"tags":[],"owner":{"account_id":873349,"reputation":3374,"user_id":923712,"accept_rate":67,"display_name":"Xavier Portebois"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679047082,"creation_date":1679047082,"answer_id":75766164,"question_id":73773907,"body_markdown":"**My answer is not a solution**, but a summary of all the problems you could encounter why trying to implement a solution. I met them all and decided, after all, to give up and use an &quot;explicit @NotNull&quot; strategy instead of an &quot;explicit @Nullable&quot; one.\r\n\r\nI thought all these caveats could be of some interest if anybody would like to try their way.\r\n\r\n----------\r\n\r\nFirst, don&#39;t rely on a SpringDoc `PropertyCustomizer`, as it&#39;s not called on each property but on each &quot;type of property&quot;, sort of, as said [in this comment][1]: \r\n\r\n&gt;  your properties are assumed to be equal from swagger-core library.\r\nIn order to tell swagger the properties are not the same, you can add the Schema annotation on each property, so they can have different annotations\r\n\r\nIt means that if you have multiple `private String myField...` in a class, some won&#39;t be seen here.\r\n\r\nIt&#39;s a shame, because `PropertyCustomizer` is the only way I know where you can write the OpenApi schema while still accessing the Java class, its fields, methods and annotations.\r\n\r\n----------\r\n\r\nThen, you could try to provide an `OpenApiCustomizer`: there, you have access to all the components schemas.\r\n\r\nIt means you&#39;d have to find all classes with `@Nullable` fields by your own way, using reflections. But be careful, there are a lot of edge cases.\r\n\r\nBy example, you could use Spring `ClassPathScanningCandidateComponentProvider` and `AssignableTypeFilter` to find all classes inheriting a precise class (like a parent `Dto` class), but then you will miss all abstract classes, unless you rewrite your own scanner.\r\n\r\nThen, with a map of all the nullable fields, you could walk the `OpenApi.getComponents().getSchemas()`, and apply to `Schema.required()` all properties except the nullable ones. But then, when using inheritance, some properties are not directy in the schema but in the `allOf` part, which you&#39;d have to handle.\r\n\r\nThat&#39;s where we stopped trying.\r\n\r\n----------\r\n\r\nIn summary, there are a lot of caveats, handling abstractness, inheritance, $refs, and so forth.\r\n\r\nAll of that made me think that this solution is kind of brittle, and that I could be missing other potential failure causes. At this point, in my opinion, it&#39;s not worth it.\r\n\r\n\r\n  [1]: https://github.com/springdoc/springdoc-openapi/issues/1000#issuecomment-752029660","title":"Make all fields required by default, in springDoc-generated openapi specification","body":"<p><strong>My answer is not a solution</strong>, but a summary of all the problems you could encounter why trying to implement a solution. I met them all and decided, after all, to give up and use an &quot;explicit @NotNull&quot; strategy instead of an &quot;explicit @Nullable&quot; one.</p>\n<p>I thought all these caveats could be of some interest if anybody would like to try their way.</p>\n<hr />\n<p>First, don't rely on a SpringDoc <code>PropertyCustomizer</code>, as it's not called on each property but on each &quot;type of property&quot;, sort of, as said <a href=\"https://github.com/springdoc/springdoc-openapi/issues/1000#issuecomment-752029660\" rel=\"nofollow noreferrer\">in this comment</a>:</p>\n<blockquote>\n<p>your properties are assumed to be equal from swagger-core library.\nIn order to tell swagger the properties are not the same, you can add the Schema annotation on each property, so they can have different annotations</p>\n</blockquote>\n<p>It means that if you have multiple <code>private String myField...</code> in a class, some won't be seen here.</p>\n<p>It's a shame, because <code>PropertyCustomizer</code> is the only way I know where you can write the OpenApi schema while still accessing the Java class, its fields, methods and annotations.</p>\n<hr />\n<p>Then, you could try to provide an <code>OpenApiCustomizer</code>: there, you have access to all the components schemas.</p>\n<p>It means you'd have to find all classes with <code>@Nullable</code> fields by your own way, using reflections. But be careful, there are a lot of edge cases.</p>\n<p>By example, you could use Spring <code>ClassPathScanningCandidateComponentProvider</code> and <code>AssignableTypeFilter</code> to find all classes inheriting a precise class (like a parent <code>Dto</code> class), but then you will miss all abstract classes, unless you rewrite your own scanner.</p>\n<p>Then, with a map of all the nullable fields, you could walk the <code>OpenApi.getComponents().getSchemas()</code>, and apply to <code>Schema.required()</code> all properties except the nullable ones. But then, when using inheritance, some properties are not directy in the schema but in the <code>allOf</code> part, which you'd have to handle.</p>\n<p>That's where we stopped trying.</p>\n<hr />\n<p>In summary, there are a lot of caveats, handling abstractness, inheritance, $refs, and so forth.</p>\n<p>All of that made me think that this solution is kind of brittle, and that I could be missing other potential failure causes. At this point, in my opinion, it's not worth it.</p>\n"}],"owner":{"account_id":5814053,"reputation":2527,"user_id":7759514,"accept_rate":61,"display_name":"Tobiq"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":915,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":1,"score":4,"last_activity_date":1679047082,"creation_date":1663593171,"question_id":73773907,"body_markdown":"It seems like the spring-doc generator sets all fields as optional, by default, and makes them required - when you explicitly annotate them with `@NotNull`\r\n\r\nThis is the opposite of how I work - my fields are all required until annotated with `@Nullable`.\r\n\r\nIs is possible to fix this behaviour for my code?","title":"Make all fields required by default, in springDoc-generated openapi specification","body":"<p>It seems like the spring-doc generator sets all fields as optional, by default, and makes them required - when you explicitly annotate them with <code>@NotNull</code></p>\n<p>This is the opposite of how I work - my fields are all required until annotated with <code>@Nullable</code>.</p>\n<p>Is is possible to fix this behaviour for my code?</p>\n"},{"tags":["java","hibernate","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":14974347,"reputation":563,"user_id":10810188,"display_name":"Ybri"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1588407449,"creation_date":1588404334,"answer_id":61555836,"question_id":59125188,"body_markdown":"The library Spring Hibernate Query Utils (https://github.com/yannbriancon/spring-hibernate-query-utils) provides a query counter that you can use to check the number of queries generated.\r\n\r\nIf you prefer to do it yourself, Hibernate provides a class `EmptyInterceptor` that contains a hook named `onPrepareStatement`.\r\nYou can extend this class and add logic in the `onPrepareStatement` hook to count the queries.\r\n\r\nTake a look at the library code to see how to configure the iterator.\r\n","title":"Hibernate / Spring Data - get executed sql queries count","body":"<p>The library Spring Hibernate Query Utils (<a href=\"https://github.com/yannbriancon/spring-hibernate-query-utils\" rel=\"nofollow noreferrer\">https://github.com/yannbriancon/spring-hibernate-query-utils</a>) provides a query counter that you can use to check the number of queries generated.</p>\n\n<p>If you prefer to do it yourself, Hibernate provides a class <code>EmptyInterceptor</code> that contains a hook named <code>onPrepareStatement</code>.\nYou can extend this class and add logic in the <code>onPrepareStatement</code> hook to count the queries.</p>\n\n<p>Take a look at the library code to see how to configure the iterator.</p>\n"},{"tags":[],"owner":{"account_id":5665214,"reputation":325,"user_id":4481550,"accept_rate":88,"display_name":"Micka&#235;l B."},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1650959914,"creation_date":1650959914,"answer_id":72010320,"question_id":59125188,"body_markdown":"The method ```onPrepareStatement``` is now **deprecated** and is removed in the new Hibernate 6 version. The new way to inspect SQL is to implement a ```StatementInspector ```.\r\n\r\n\r\n\r\nI&#39;ve written a little library (https://github.com/Lemick/hibernate-query-asserts) that can assert the count of SQL queries by type (SELECT, INSERT, ..) generated by Hibernate in your Spring tests, this way, you can be warned whenever the SQL statements change in your tests, and prevent N+1 selects. You can take a look here at the project if you want to know how this is implemented.\r\n\r\nA test example that demonstrates the purpose:\r\n\r\n    @Test\r\n    @Transactional\r\n    @AssertHibernateSQLCount(inserts = 3)\r\n    void create_two_blog_posts() {\r\n        BlogPost post_1 = new BlogPost(&quot;Blog post 1&quot;);\r\n        post_1.addComment(new PostComment(&quot;Good article&quot;));\r\n        post_1.addComment(new PostComment(&quot;Very interesting&quot;));\r\n        blogPostRepository.save(post_1);\r\n    }\r\n","title":"Hibernate / Spring Data - get executed sql queries count","body":"<p>The method <code>onPrepareStatement</code> is now <strong>deprecated</strong> and is removed in the new Hibernate 6 version. The new way to inspect SQL is to implement a <code>StatementInspector </code>.</p>\n<p>I've written a little library (<a href=\"https://github.com/Lemick/hibernate-query-asserts\" rel=\"nofollow noreferrer\">https://github.com/Lemick/hibernate-query-asserts</a>) that can assert the count of SQL queries by type (SELECT, INSERT, ..) generated by Hibernate in your Spring tests, this way, you can be warned whenever the SQL statements change in your tests, and prevent N+1 selects. You can take a look here at the project if you want to know how this is implemented.</p>\n<p>A test example that demonstrates the purpose:</p>\n<pre><code>@Test\n@Transactional\n@AssertHibernateSQLCount(inserts = 3)\nvoid create_two_blog_posts() {\n    BlogPost post_1 = new BlogPost(&quot;Blog post 1&quot;);\n    post_1.addComment(new PostComment(&quot;Good article&quot;));\n    post_1.addComment(new PostComment(&quot;Very interesting&quot;));\n    blogPostRepository.save(post_1);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4458324,"reputation":922,"user_id":4875767,"accept_rate":86,"display_name":"Jeppz"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679046779,"creation_date":1679046779,"answer_id":75766108,"question_id":59125188,"body_markdown":"I found a solution that doesn&#39;t require libraries:\r\n\r\n    @PersistenceContext\r\n    public EntityManager entityManager;\r\n    \r\n    Statistics statistics;\r\n\r\n    @BeforeEach\r\n    void setUp() {\r\n        Session session = entityManager.unwrap(Session.class);\r\n        statistics = session.getSessionFactory().getStatistics();\r\n        statistics.clear();\r\n    }\r\n\r\n    @Test\r\n    @Transactional\r\n    @Commit\r\n    void insertEmployees() {\r\n        int inserts = 10;\r\n        TransactionSynchronizationManager.registerSynchronization(new TransactionSynchronization() {\r\n            @Override\r\n            public void afterCommit() {\r\n                assertEquals(inserts, statistics.getEntityInsertCount());\r\n            }\r\n        });\r\n\r\n        List&lt;Employee&gt; employees = new ArrayList&lt;&gt;();\r\n        for (int i = 0; i &lt; inserts; i++) {\r\n            Employee entity = Employee.builder()\r\n                    .employeeId(i + 500000)\r\n                    .firstName(&quot;John&quot;)\r\n                    .lastName(&quot;Doe&quot;)\r\n                    .birthDate(LocalDate.now().minusYears(25))\r\n                    .hireDate(LocalDate.now().minusYears(2))\r\n                    .gender(Gender.M)\r\n                    .build();\r\n            employees.add(entity);\r\n        }\r\n        employeeRepository.saveAll(employees);\r\n    }\r\n\r\nBy exploring the methods in Statistics you should be able to assert most things.","title":"Hibernate / Spring Data - get executed sql queries count","body":"<p>I found a solution that doesn't require libraries:</p>\n<pre><code>@PersistenceContext\npublic EntityManager entityManager;\n\nStatistics statistics;\n\n@BeforeEach\nvoid setUp() {\n    Session session = entityManager.unwrap(Session.class);\n    statistics = session.getSessionFactory().getStatistics();\n    statistics.clear();\n}\n\n@Test\n@Transactional\n@Commit\nvoid insertEmployees() {\n    int inserts = 10;\n    TransactionSynchronizationManager.registerSynchronization(new TransactionSynchronization() {\n        @Override\n        public void afterCommit() {\n            assertEquals(inserts, statistics.getEntityInsertCount());\n        }\n    });\n\n    List&lt;Employee&gt; employees = new ArrayList&lt;&gt;();\n    for (int i = 0; i &lt; inserts; i++) {\n        Employee entity = Employee.builder()\n                .employeeId(i + 500000)\n                .firstName(&quot;John&quot;)\n                .lastName(&quot;Doe&quot;)\n                .birthDate(LocalDate.now().minusYears(25))\n                .hireDate(LocalDate.now().minusYears(2))\n                .gender(Gender.M)\n                .build();\n        employees.add(entity);\n    }\n    employeeRepository.saveAll(employees);\n}\n</code></pre>\n<p>By exploring the methods in Statistics you should be able to assert most things.</p>\n"}],"owner":{"account_id":2151720,"reputation":3826,"user_id":1907924,"accept_rate":75,"display_name":"Dcortez"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3331,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":61555836,"answer_count":3,"score":4,"last_activity_date":1679046779,"creation_date":1575200765,"question_id":59125188,"body_markdown":"I&#39;m working on presentation in which I would like to show difference in number of executed sql queries between `deleteByPost()` method with and without custom query. I&#39;m expecting method without custom query to execute 10001 delete queries and with it just 2.\r\n\r\nI&#39;m aware of Hibernate [Statistics][1] object and it&#39;s methods. I was expecting one of them, named `getQueryExecutionCount()`, to return the number of sql queries executed against db, but what I&#39;m getting is always a 0. \r\n\r\nIf anyone wonders hibernate statistics are enabled for sure because I&#39;m getting correct numbers on other properties like the count of deleted entities.\r\n\r\nBelow there is a complete example showing what I am trying to accomplish.\r\n\r\nIs there a way to get the number of generated and executed queries using `Statistics` or any other mechanism? Currently I&#39;m looking at logs (`hibernate.show_sql`) and counting printed queries but it just seems wrong to me.\r\n\r\n    package example5\r\n    \r\n    import org.hibernate.SessionFactory\r\n    import org.junit.jupiter.api.AfterEach\r\n    import org.junit.jupiter.api.Assertions.assertEquals\r\n    import org.junit.jupiter.api.BeforeEach\r\n    import org.junit.jupiter.api.Test\r\n    import org.junit.jupiter.api.assertAll\r\n    import org.springframework.beans.factory.annotation.Autowired\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication\r\n    import org.springframework.data.jpa.repository.Modifying\r\n    import org.springframework.data.jpa.repository.Query\r\n    import org.springframework.data.jpa.repository.config.EnableJpaRepositories\r\n    import org.springframework.data.repository.PagingAndSortingRepository\r\n    import org.springframework.data.repository.query.Param\r\n    import org.springframework.stereotype.Repository\r\n    import org.springframework.stereotype.Service\r\n    import org.springframework.test.context.junit.jupiter.SpringJUnitJupiterConfig\r\n    import org.springframework.transaction.annotation.EnableTransactionManagement\r\n    import org.springframework.transaction.annotation.Transactional\r\n    import javax.persistence.*\r\n    \r\n    // ENTITIES\r\n    \r\n    @Entity\r\n    @Table(name = &quot;posts&quot;)\r\n    class Post(\r\n            @Id\r\n            @Column(name = &quot;id&quot;)\r\n            @GeneratedValue(strategy = GenerationType.SEQUENCE)\r\n            var id: Long? = null,\r\n    \r\n            @Version\r\n            @Column(name = &quot;version&quot;)\r\n            var version: Long? = null\r\n    )\r\n\r\n    @Entity\r\n    @Table(name = &quot;comments&quot;)\r\n    class Comment(\r\n            @Id\r\n            @Column(name = &quot;id&quot;)\r\n            @GeneratedValue(strategy = GenerationType.SEQUENCE)\r\n            var id: Long? = null,\r\n    \r\n            @Version\r\n            @Column(name = &quot;version&quot;)\r\n            var version: Long? = null,\r\n    \r\n            @JoinColumn(name = &quot;post_id&quot;)\r\n            @ManyToOne(fetch = FetchType.LAZY)\r\n            var post: Post? = null\r\n    )\r\n    \r\n    \r\n    // REPOSITORIES\r\n    \r\n    @Repository\r\n    interface PostRepository : PagingAndSortingRepository&lt;Post, Long&gt;\r\n    \r\n    @Repository\r\n    interface CommentRepository : PagingAndSortingRepository&lt;Comment, Long&gt; {\r\n    \r\n        @Modifying\r\n        @Query(&quot;delete from Comment c where c.post = :post&quot;)\r\n        fun deleteByPost(@Param(&quot;post&quot;) post: Post)\r\n    }\r\n    \r\n    \r\n    // SERVICES\r\n    \r\n    interface PostService {\r\n    \r\n        fun delete(post: Post)\r\n    }\r\n    \r\n    @Service\r\n    open class PostServiceImpl(\r\n            @Autowired\r\n            val postRepository: PostRepository,\r\n    \r\n            @Autowired\r\n            val commentRepository: CommentRepository\r\n    ) : PostService {\r\n        @Transactional\r\n        override fun delete(post: Post) {\r\n            commentRepository.deleteByPost(post)\r\n            postRepository.delete(post)\r\n        }\r\n    \r\n    }\r\n    \r\n    // CONFIGURATION\r\n    \r\n    @EnableJpaRepositories(basePackages = [&quot;example5&quot;])\r\n    @EnableTransactionManagement\r\n    @SpringBootApplication(scanBasePackages = [&quot;example5&quot;])\r\n    open class FrameworkApplication\r\n    \r\n    \r\n    // TESTS\r\n    \r\n    @SpringJUnitJupiterConfig(classes = [FrameworkApplication::class])\r\n    class Example5(\r\n            @Autowired\r\n            val postService: PostService,\r\n    \r\n            @Autowired\r\n            val postRepository: PostRepository,\r\n    \r\n            @Autowired\r\n            val commentRepository: CommentRepository,\r\n    \r\n            @Autowired\r\n            val emFactory: EntityManagerFactory\r\n    ) {\r\n    \r\n        @AfterEach\r\n        fun cleanUp() {\r\n            commentRepository.deleteAll()\r\n            postRepository.deleteAll()\r\n        }\r\n    \r\n        @Test\r\n        fun testDelete() {\r\n            //given\r\n            var post = Post()\r\n            post = postRepository.save(post)\r\n            val comments = mutableListOf&lt;Comment&gt;()\r\n            for (i in 1..10000) {\r\n                val comment = Comment()\r\n                comment.post = post\r\n                comments.add(comment)\r\n            }\r\n            commentRepository.save(comments)\r\n    \r\n            val sessionFactory = emFactory.unwrap(SessionFactory::class.java)\r\n            val statistics = sessionFactory.statistics\r\n    \r\n            //then\r\n            statistics.clear()\r\n            postService.delete(post)\r\n    \r\n            val executedQueryCount = statistics.queryExecutionCount\r\n    \r\n    \r\n            //then\r\n            assertAll(\r\n                    { assertEquals(0, postRepository.count()) },\r\n                    { assertEquals(0, commentRepository.count()) },\r\n                    { assertEquals(2, executedQueryCount) }\r\n            )\r\n        }\r\n    \r\n    }\r\n\r\n\r\n  [1]: https://docs.jboss.org/hibernate/orm/3.5/javadocs/org/hibernate/stat/Statistics.html","title":"Hibernate / Spring Data - get executed sql queries count","body":"<p>I'm working on presentation in which I would like to show difference in number of executed sql queries between <code>deleteByPost()</code> method with and without custom query. I'm expecting method without custom query to execute 10001 delete queries and with it just 2.</p>\n\n<p>I'm aware of Hibernate <a href=\"https://docs.jboss.org/hibernate/orm/3.5/javadocs/org/hibernate/stat/Statistics.html\" rel=\"nofollow noreferrer\">Statistics</a> object and it's methods. I was expecting one of them, named <code>getQueryExecutionCount()</code>, to return the number of sql queries executed against db, but what I'm getting is always a 0. </p>\n\n<p>If anyone wonders hibernate statistics are enabled for sure because I'm getting correct numbers on other properties like the count of deleted entities.</p>\n\n<p>Below there is a complete example showing what I am trying to accomplish.</p>\n\n<p>Is there a way to get the number of generated and executed queries using <code>Statistics</code> or any other mechanism? Currently I'm looking at logs (<code>hibernate.show_sql</code>) and counting printed queries but it just seems wrong to me.</p>\n\n<pre><code>package example5\n\nimport org.hibernate.SessionFactory\nimport org.junit.jupiter.api.AfterEach\nimport org.junit.jupiter.api.Assertions.assertEquals\nimport org.junit.jupiter.api.BeforeEach\nimport org.junit.jupiter.api.Test\nimport org.junit.jupiter.api.assertAll\nimport org.springframework.beans.factory.annotation.Autowired\nimport org.springframework.boot.autoconfigure.SpringBootApplication\nimport org.springframework.data.jpa.repository.Modifying\nimport org.springframework.data.jpa.repository.Query\nimport org.springframework.data.jpa.repository.config.EnableJpaRepositories\nimport org.springframework.data.repository.PagingAndSortingRepository\nimport org.springframework.data.repository.query.Param\nimport org.springframework.stereotype.Repository\nimport org.springframework.stereotype.Service\nimport org.springframework.test.context.junit.jupiter.SpringJUnitJupiterConfig\nimport org.springframework.transaction.annotation.EnableTransactionManagement\nimport org.springframework.transaction.annotation.Transactional\nimport javax.persistence.*\n\n// ENTITIES\n\n@Entity\n@Table(name = \"posts\")\nclass Post(\n        @Id\n        @Column(name = \"id\")\n        @GeneratedValue(strategy = GenerationType.SEQUENCE)\n        var id: Long? = null,\n\n        @Version\n        @Column(name = \"version\")\n        var version: Long? = null\n)\n\n@Entity\n@Table(name = \"comments\")\nclass Comment(\n        @Id\n        @Column(name = \"id\")\n        @GeneratedValue(strategy = GenerationType.SEQUENCE)\n        var id: Long? = null,\n\n        @Version\n        @Column(name = \"version\")\n        var version: Long? = null,\n\n        @JoinColumn(name = \"post_id\")\n        @ManyToOne(fetch = FetchType.LAZY)\n        var post: Post? = null\n)\n\n\n// REPOSITORIES\n\n@Repository\ninterface PostRepository : PagingAndSortingRepository&lt;Post, Long&gt;\n\n@Repository\ninterface CommentRepository : PagingAndSortingRepository&lt;Comment, Long&gt; {\n\n    @Modifying\n    @Query(\"delete from Comment c where c.post = :post\")\n    fun deleteByPost(@Param(\"post\") post: Post)\n}\n\n\n// SERVICES\n\ninterface PostService {\n\n    fun delete(post: Post)\n}\n\n@Service\nopen class PostServiceImpl(\n        @Autowired\n        val postRepository: PostRepository,\n\n        @Autowired\n        val commentRepository: CommentRepository\n) : PostService {\n    @Transactional\n    override fun delete(post: Post) {\n        commentRepository.deleteByPost(post)\n        postRepository.delete(post)\n    }\n\n}\n\n// CONFIGURATION\n\n@EnableJpaRepositories(basePackages = [\"example5\"])\n@EnableTransactionManagement\n@SpringBootApplication(scanBasePackages = [\"example5\"])\nopen class FrameworkApplication\n\n\n// TESTS\n\n@SpringJUnitJupiterConfig(classes = [FrameworkApplication::class])\nclass Example5(\n        @Autowired\n        val postService: PostService,\n\n        @Autowired\n        val postRepository: PostRepository,\n\n        @Autowired\n        val commentRepository: CommentRepository,\n\n        @Autowired\n        val emFactory: EntityManagerFactory\n) {\n\n    @AfterEach\n    fun cleanUp() {\n        commentRepository.deleteAll()\n        postRepository.deleteAll()\n    }\n\n    @Test\n    fun testDelete() {\n        //given\n        var post = Post()\n        post = postRepository.save(post)\n        val comments = mutableListOf&lt;Comment&gt;()\n        for (i in 1..10000) {\n            val comment = Comment()\n            comment.post = post\n            comments.add(comment)\n        }\n        commentRepository.save(comments)\n\n        val sessionFactory = emFactory.unwrap(SessionFactory::class.java)\n        val statistics = sessionFactory.statistics\n\n        //then\n        statistics.clear()\n        postService.delete(post)\n\n        val executedQueryCount = statistics.queryExecutionCount\n\n\n        //then\n        assertAll(\n                { assertEquals(0, postRepository.count()) },\n                { assertEquals(0, commentRepository.count()) },\n                { assertEquals(2, executedQueryCount) }\n        )\n    }\n\n}\n</code></pre>\n"},{"tags":["java","character-encoding","utf-16","grapheme","grapheme-cluster"],"answers":[{"tags":[],"owner":{"account_id":2933712,"reputation":6419,"user_id":2513200,"accept_rate":83,"display_name":"Hulk"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1679046714,"creation_date":1679046714,"answer_id":75766095,"question_id":75766003,"body_markdown":"Well, the obvious starting point is unicode itself: https://unicode.org\r\n\r\nIt does not provide a single, comprehensive list, as far as I know, but several lists for groups of symbols, e.g.\r\n\r\nEmojis without modifiers:\r\nhttps://unicode.org/emoji/charts/full-emoji-list.html \r\n\r\nEmojis with modifiers:\r\nhttps://unicode.org/emoji/charts/full-emoji-modifiers.html","title":"Is there a list of all (or most of the) possible combinations of (extended) grapheme clusters?","body":"<p>Well, the obvious starting point is unicode itself: <a href=\"https://unicode.org\" rel=\"nofollow noreferrer\">https://unicode.org</a></p>\n<p>It does not provide a single, comprehensive list, as far as I know, but several lists for groups of symbols, e.g.</p>\n<p>Emojis without modifiers:\n<a href=\"https://unicode.org/emoji/charts/full-emoji-list.html\" rel=\"nofollow noreferrer\">https://unicode.org/emoji/charts/full-emoji-list.html</a></p>\n<p>Emojis with modifiers:\n<a href=\"https://unicode.org/emoji/charts/full-emoji-modifiers.html\" rel=\"nofollow noreferrer\">https://unicode.org/emoji/charts/full-emoji-modifiers.html</a></p>\n"}],"owner":{"account_id":1041836,"reputation":6885,"user_id":1047713,"accept_rate":81,"display_name":"elect"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":93,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75766095,"answer_count":1,"score":1,"last_activity_date":1679046714,"creation_date":1679046233,"question_id":75766003,"body_markdown":"So, I&#39;m looking into coding some binary data as text, using single graphical units, after using already all the available ones for Java and UTF16, I&#39;d like to expand my &quot;pool&quot;.\r\n\r\nI recently discovered grapheme clusters, where you can combine different elements/chars in order to create a single graphical unit, or, as they are properly called, a grapheme cluster.\r\n\r\nFor example: &quot;&#129318;&#127996;‍♂️&quot;, which holds:\r\n - base character\r\n - skintone modifier\r\n - ligature character (zero width joiner)\r\n - male sign\r\n - variation selector\r\n\r\n(more [here](https://hsivonen.fi/string-length/) or [here](https://ardislu.dev/biggest-unicode-grapheme-cluster))\r\n\r\nI wonder if there is a comprensive list of all the possibile combinations, or at least some specifications which state clearly which emoticons can be combined how and how long they can be at maximum","title":"Is there a list of all (or most of the) possible combinations of (extended) grapheme clusters?","body":"<p>So, I'm looking into coding some binary data as text, using single graphical units, after using already all the available ones for Java and UTF16, I'd like to expand my &quot;pool&quot;.</p>\n<p>I recently discovered grapheme clusters, where you can combine different elements/chars in order to create a single graphical unit, or, as they are properly called, a grapheme cluster.</p>\n<p>For example: &quot;🤦🏼‍♂️&quot;, which holds:</p>\n<ul>\n<li>base character</li>\n<li>skintone modifier</li>\n<li>ligature character (zero width joiner)</li>\n<li>male sign</li>\n<li>variation selector</li>\n</ul>\n<p>(more <a href=\"https://hsivonen.fi/string-length/\" rel=\"nofollow noreferrer\">here</a> or <a href=\"https://ardislu.dev/biggest-unicode-grapheme-cluster\" rel=\"nofollow noreferrer\">here</a>)</p>\n<p>I wonder if there is a comprensive list of all the possibile combinations, or at least some specifications which state clearly which emoticons can be combined how and how long they can be at maximum</p>\n"},{"tags":["java","spring","transactions","jdbctemplate","spring-transactions"],"comments":[{"owner":{"account_id":10662643,"reputation":689,"user_id":7899567,"display_name":"Anton Tokmakov"},"score":0,"creation_date":1679035929,"post_id":75764451,"comment_id":133651925,"body_markdown":"Looks like you need to have separate transaction for each part of batch. then they will commit independently","body":"Looks like you need to have separate transaction for each part of batch. then they will commit independently"},{"owner":{"account_id":28011282,"reputation":11,"user_id":21393759,"display_name":"Dharmin Patel"},"score":0,"creation_date":1679038656,"post_id":75764451,"comment_id":133652488,"body_markdown":"@Anton Tokmakov, I am already having seperate transacfion using @Transactional(propagation = Propagation.REQUIRES_NEW) for every batch.","body":"@Anton Tokmakov, I am already having seperate transacfion using @Transactional(propagation = Propagation.REQUIRES_NEW) for every batch."},{"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"score":0,"creation_date":1679042264,"post_id":75764451,"comment_id":133653305,"body_markdown":"Hi, Please share the relevant code. It is impossible to guess what&#39;s going on from the description only.","body":"Hi, Please share the relevant code. It is impossible to guess what&#39;s going on from the description only."},{"owner":{"account_id":28011282,"reputation":11,"user_id":21393759,"display_name":"Dharmin Patel"},"score":0,"creation_date":1679045044,"post_id":75764451,"comment_id":133653973,"body_markdown":"Hi, @Mar-Z please check above code","body":"Hi, @Mar-Z please check above code"},{"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"score":0,"creation_date":1679045952,"post_id":75764451,"comment_id":133654178,"body_markdown":"Please check again if correct code added. I can see the method called in service is saveSuccessBatch but the repository shows another method saveWithBatchUpdate.","body":"Please check again if correct code added. I can see the method called in service is saveSuccessBatch but the repository shows another method saveWithBatchUpdate."},{"owner":{"account_id":28011282,"reputation":11,"user_id":21393759,"display_name":"Dharmin Patel"},"score":0,"creation_date":1679046656,"post_id":75764451,"comment_id":133654375,"body_markdown":"@Mar-Z Code Corrected","body":"@Mar-Z Code Corrected"},{"owner":{"account_id":10662643,"reputation":689,"user_id":7899567,"display_name":"Anton Tokmakov"},"score":0,"creation_date":1679048452,"post_id":75764451,"comment_id":133654900,"body_markdown":"You can try to use TransactionTemplate instead of annotations","body":"You can try to use TransactionTemplate instead of annotations"},{"owner":{"account_id":28011282,"reputation":11,"user_id":21393759,"display_name":"Dharmin Patel"},"score":0,"creation_date":1679049146,"post_id":75764451,"comment_id":133655056,"body_markdown":"@Anton Tokmakov, can we handle batch update with Transaction Template?","body":"@Anton Tokmakov, can we handle batch update with Transaction Template?"},{"owner":{"account_id":10662643,"reputation":689,"user_id":7899567,"display_name":"Anton Tokmakov"},"score":0,"creation_date":1679049581,"post_id":75764451,"comment_id":133655155,"body_markdown":"You can wrap ```addressRepository.saveWithBatchUpdate(mainAddressList.get(index)``` by transactionTemplate","body":"You can wrap <code>addressRepository.saveWithBatchUpdate(mainAddressList.get(in&zwnj;&#8203;dex)</code> by transactionTemplate"},{"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"score":0,"creation_date":1679049663,"post_id":75764451,"comment_id":133655177,"body_markdown":"Please remove the Transactional annotation from the service method saveDataInBatch. You should have only the method in repository annotated. Even with default propagation which is requires new.","body":"Please remove the Transactional annotation from the service method saveDataInBatch. You should have only the method in repository annotated. Even with default propagation which is requires new."},{"owner":{"account_id":28011282,"reputation":11,"user_id":21393759,"display_name":"Dharmin Patel"},"score":0,"creation_date":1679051046,"post_id":75764451,"comment_id":133655498,"body_markdown":"@Anton Tokmakov, still getting same issue. you have any reference for this?","body":"@Anton Tokmakov, still getting same issue. you have any reference for this?"},{"owner":{"account_id":28011282,"reputation":11,"user_id":21393759,"display_name":"Dharmin Patel"},"score":0,"creation_date":1679051778,"post_id":75764451,"comment_id":133655656,"body_markdown":"@Mar-Z but if i remove it then its working fine for error case but for success case it is not storing data into DB","body":"@Mar-Z but if i remove it then its working fine for error case but for success case it is not storing data into DB"},{"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"score":0,"creation_date":1679054800,"post_id":75764451,"comment_id":133656315,"body_markdown":"Then it looks like you have turned the auto-commit off somewhere in the configuration. Either turn it on or you will need to commit manually at the (successful) end of the saveWithBatchUpdate method.","body":"Then it looks like you have turned the auto-commit off somewhere in the configuration. Either turn it on or you will need to commit manually at the (successful) end of the saveWithBatchUpdate method."},{"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"score":0,"creation_date":1679063274,"post_id":75764451,"comment_id":133658669,"body_markdown":"Is the issue solved now?","body":"Is the issue solved now?"},{"owner":{"account_id":28011282,"reputation":11,"user_id":21393759,"display_name":"Dharmin Patel"},"score":0,"creation_date":1679392239,"post_id":75764451,"comment_id":133709329,"body_markdown":"@Mar-Z No not yet","body":"@Mar-Z No not yet"}],"owner":{"account_id":28011282,"reputation":11,"user_id":21393759,"display_name":"Dharmin Patel"},"comment_count":15,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":117,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679046624,"creation_date":1679035199,"question_id":75764451,"body_markdown":"I am having one issue where all successful transaction also gets rollback after successful commit using batchupdate in jdbc template.\r\n\r\nLet&#39;s take an example : I want to commit first 3 batch after getting error in 4th batch. Currently its rollbacking all the transaction.\r\n\r\n\r\n\r\nMy expecting result is to commit successful 3 batches before got error in 4th batch.\r\n\r\nService.java\r\n\r\n    @Transactional(propagation = Propagation.REQUIRED)\r\n    \tpublic void saveDataInBatch() {\r\n    \tList&lt;List&lt;Address&gt;&gt; mainAddressList = getMainAddressList();\r\n        for (int index = 0; index &lt; 3; index++) {\t\t\taddressRepository.saveWithBatchUpdate(mainAddressList.get(index));\r\n    \t\t}\r\n    \t}\r\n\r\nAddressRepository.java\r\n\r\n   \r\n\r\n     @Transactional(propagation = Propagation.REQUIRES_NEW)\r\n        \tpublic int[] saveWithBatchUpdate(List&lt;Address&gt; addressList) {\r\n        \t\treturn jdbcTemplate.batchUpdate(&quot;insert into address (city,street, zipCode) values(?,?,?)&quot;,\r\n        \t\t\t\tnew BatchPreparedStatementSetter() {\r\n        \t\t\t\t@Override\r\n        \t\t\t\tpublic void setValues(PreparedStatement ps, int i){\r\n        \t\t\t\t\t\tAddress address = addressList.get(i);\r\n        \t\t\t\t\t\tps.setString(1, address.getCity());\r\n        \t\t\t\t\t\tps.setString(2, address.getStreet());\r\n        \t\t\t\t\t\tps.setInt(3, address.getZipCode());\r\n        \t\t\t\t\t}\r\n        \r\n        \t\t\t\t\t@Override\r\n        \t\t\t\t\tpublic int getBatchSize() {\r\n        \t\t\t\t\t\treturn addressList.size();\r\n        \t\t\t\t\t}\r\n        \t\t\t\t});\r\n        \t}\r\n\r\n","title":"Do not want to rollback all the successful transaction using batchupdate into jdbc template when got error in one batchupdate","body":"<p>I am having one issue where all successful transaction also gets rollback after successful commit using batchupdate in jdbc template.</p>\n<p>Let's take an example : I want to commit first 3 batch after getting error in 4th batch. Currently its rollbacking all the transaction.</p>\n<p>My expecting result is to commit successful 3 batches before got error in 4th batch.</p>\n<p>Service.java</p>\n<pre><code>@Transactional(propagation = Propagation.REQUIRED)\n    public void saveDataInBatch() {\n    List&lt;List&lt;Address&gt;&gt; mainAddressList = getMainAddressList();\n    for (int index = 0; index &lt; 3; index++) {           addressRepository.saveWithBatchUpdate(mainAddressList.get(index));\n        }\n    }\n</code></pre>\n<p>AddressRepository.java</p>\n<pre><code> @Transactional(propagation = Propagation.REQUIRES_NEW)\n        public int[] saveWithBatchUpdate(List&lt;Address&gt; addressList) {\n            return jdbcTemplate.batchUpdate(&quot;insert into address (city,street, zipCode) values(?,?,?)&quot;,\n                    new BatchPreparedStatementSetter() {\n                    @Override\n                    public void setValues(PreparedStatement ps, int i){\n                            Address address = addressList.get(i);\n                            ps.setString(1, address.getCity());\n                            ps.setString(2, address.getStreet());\n                            ps.setInt(3, address.getZipCode());\n                        }\n    \n                        @Override\n                        public int getBatchSize() {\n                            return addressList.size();\n                        }\n                    });\n        }\n</code></pre>\n"},{"tags":["java","word-frequency"],"comments":[{"owner":{"account_id":9722462,"reputation":4365,"user_id":7210739,"display_name":"DontKnowMuchBut Getting Better"},"score":0,"creation_date":1590336003,"post_id":61988535,"comment_id":109636196,"body_markdown":"`String[] tokens = text.split(&quot;[\\\\s\\\\d]+&quot;);`?","body":"<code>String[] tokens = text.split(&quot;[\\\\s\\\\d]+&quot;);</code>?"}],"answers":[{"tags":[],"owner":{"account_id":2179728,"reputation":73077,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1590337025,"creation_date":1590336460,"answer_id":61988679,"question_id":61988535,"body_markdown":"&gt; And how can I separate &quot;Hopefully245this---is&quot; and store 3 useful\r\n&gt; words &quot;hopefully&quot;, &quot;this&quot;, &quot;is&quot;?\r\n\r\nUse regex API for such a requirement.\r\n\r\n**Demo:**\r\n\r\n    import java.util.regex.Matcher;\r\n    import java.util.regex.Pattern;\r\n    \r\n    public class Main {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tString str = &quot;Hopefully245this---is&quot;;\r\n    \t\tPattern pattern = Pattern.compile(&quot;[A-Za-z]+&quot;);\r\n    \t\tMatcher matcher = pattern.matcher(str);\r\n    \t\twhile (matcher.find()) {\r\n    \t\t\tSystem.out.println(matcher.group());\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\n**Output:**\r\n\r\n    Hopefully\r\n    this\r\n    is\r\n\r\nCheck the following links to learn more about Java regex:\r\n\r\n 1. https://docs.oracle.com/javase/tutorial/essential/regex/index.html\r\n 2. https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/regex/Pattern.html\r\n 3. https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/regex/Matcher.html","title":"How to find word frequency in a text file?","body":"<blockquote>\n  <p>And how can I separate \"Hopefully245this---is\" and store 3 useful\n  words \"hopefully\", \"this\", \"is\"?</p>\n</blockquote>\n\n<p>Use regex API for such a requirement.</p>\n\n<p><strong>Demo:</strong></p>\n\n<pre><code>import java.util.regex.Matcher;\nimport java.util.regex.Pattern;\n\npublic class Main {\n    public static void main(String[] args) {\n        String str = \"Hopefully245this---is\";\n        Pattern pattern = Pattern.compile(\"[A-Za-z]+\");\n        Matcher matcher = pattern.matcher(str);\n        while (matcher.find()) {\n            System.out.println(matcher.group());\n        }\n    }\n}\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>Hopefully\nthis\nis\n</code></pre>\n\n<p>Check the following links to learn more about Java regex:</p>\n\n<ol>\n<li><a href=\"https://docs.oracle.com/javase/tutorial/essential/regex/index.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/tutorial/essential/regex/index.html</a></li>\n<li><a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/regex/Pattern.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/regex/Pattern.html</a></li>\n<li><a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/regex/Matcher.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/regex/Matcher.html</a></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1590344734,"creation_date":1590344734,"answer_id":61990473,"question_id":61988535,"body_markdown":"First the code. The explanation appears after the below code.\r\n```java\r\nimport java.io.IOException;\r\nimport java.nio.file.Files;\r\nimport java.nio.file.Path;\r\nimport java.nio.file.Paths;\r\nimport java.util.TreeMap;\r\nimport java.util.regex.Matcher;\r\nimport java.util.regex.Pattern;\r\n\r\npublic class WordFreq2 {\r\n\r\n    public static void main(String[] args) {\r\n        Path path = Paths.get(&quot;C:\\\\Users\\\\Jason\\\\Downloads\\\\test_words_file-1.txt&quot;);\r\n        try {\r\n            String text = Files.readString(path); // throws java.io.IOException\r\n            text = text.toLowerCase();\r\n            Pattern pttrn = Pattern.compile(&quot;[a-z]+&quot;);\r\n            Matcher mtchr = pttrn.matcher(text);\r\n            TreeMap&lt;String, Integer&gt; freq = new TreeMap&lt;&gt;();\r\n            int longest = 0;\r\n            while (mtchr.find()) {\r\n                String word = mtchr.group();\r\n                int letters = word.length();\r\n                if (letters &gt; longest) {\r\n                    longest = letters;\r\n                }\r\n                if (freq.containsKey(word)) { \r\n                    freq.computeIfPresent(word, (w, c) -&gt; Integer.valueOf(c.intValue() + 1));\r\n                }\r\n                else {\r\n                    freq.computeIfAbsent(word, (w) -&gt; Integer.valueOf(1));\r\n                }\r\n            }\r\n            String format = &quot;%-&quot; + longest + &quot;s = %2d%n&quot;;\r\n            freq.forEach((k, v) -&gt; System.out.printf(format, k, v));\r\n            System.out.println(&quot;Longest = &quot; + longest);\r\n        }\r\n        catch (IOException xIo) {\r\n            xIo.printStackTrace();\r\n        }\r\n    }\r\n}\r\n```\r\nSince your sample file is small, I load the entire file contents into a `String`.  \r\n\r\nThen I convert the entire `String` to lower-case since your definition of a word is a series of consecutive alphabetic, case-insensitive characters.  \r\n\r\nThe regular expression &amp;ndash; `[a-z]+` &amp;ndash; searches for one or more consecutive, lower-case, alphabetic characters. (Remember the entire `String` is now all lower-case.)\r\n\r\nEach successive call to method `find()` will find the next word in the `String` (according to the above definition of a word, i.e. a consecutive series of lower-case letters of the alphabet).\r\n\r\nTo count the letter frequencies, I use a `TreeMap` where the map key is the word and the map value is the number of times that word appears in the `String`. Note that map keys and values cannot be primitives, hence the value is `Integer` and not `int`.\r\n\r\nIf the last word found already appears in the map, I increment the count.\r\n\r\nIf the last word found does not appear in the map, it is added to the map and its count is set to 1 (one).\r\n\r\nAlong with adding the words to the map, I count the letters of each word found in order to find the longest word.\r\n\r\nAfter the entire `String` is processed, I print the contents of the map, one entry per line, and finally print the number of letters in the longest word found. Note that `TreeMap` sorts its keys, hence the list of words appears in alphabetical order.\r\n\r\nHere is the output:\r\n```\r\na         =  1\r\nbe        =  1\r\nbrown     =  1\r\nbut       =  1\r\ncomplete  =  1\r\nfor       =  1\r\nfox       =  1\r\nhopefully =  1\r\nis        =  1\r\nless      =  1\r\nmaybe     =  1\r\nquick     =  3\r\ntask      =  2\r\nthe       = 12\r\nthis      =  1\r\nto        =  1\r\nwill      =  1\r\nyou       =  1\r\nLongest = 9\r\n```\r\n","title":"How to find word frequency in a text file?","body":"<p>First the code. The explanation appears after the below code.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>import java.io.IOException;\nimport java.nio.file.Files;\nimport java.nio.file.Path;\nimport java.nio.file.Paths;\nimport java.util.TreeMap;\nimport java.util.regex.Matcher;\nimport java.util.regex.Pattern;\n\npublic class WordFreq2 {\n\n    public static void main(String[] args) {\n        Path path = Paths.get(\"C:\\\\Users\\\\Jason\\\\Downloads\\\\test_words_file-1.txt\");\n        try {\n            String text = Files.readString(path); // throws java.io.IOException\n            text = text.toLowerCase();\n            Pattern pttrn = Pattern.compile(\"[a-z]+\");\n            Matcher mtchr = pttrn.matcher(text);\n            TreeMap&lt;String, Integer&gt; freq = new TreeMap&lt;&gt;();\n            int longest = 0;\n            while (mtchr.find()) {\n                String word = mtchr.group();\n                int letters = word.length();\n                if (letters &gt; longest) {\n                    longest = letters;\n                }\n                if (freq.containsKey(word)) { \n                    freq.computeIfPresent(word, (w, c) -&gt; Integer.valueOf(c.intValue() + 1));\n                }\n                else {\n                    freq.computeIfAbsent(word, (w) -&gt; Integer.valueOf(1));\n                }\n            }\n            String format = \"%-\" + longest + \"s = %2d%n\";\n            freq.forEach((k, v) -&gt; System.out.printf(format, k, v));\n            System.out.println(\"Longest = \" + longest);\n        }\n        catch (IOException xIo) {\n            xIo.printStackTrace();\n        }\n    }\n}\n</code></pre>\n\n<p>Since your sample file is small, I load the entire file contents into a <code>String</code>.  </p>\n\n<p>Then I convert the entire <code>String</code> to lower-case since your definition of a word is a series of consecutive alphabetic, case-insensitive characters.  </p>\n\n<p>The regular expression &ndash; <code>[a-z]+</code> &ndash; searches for one or more consecutive, lower-case, alphabetic characters. (Remember the entire <code>String</code> is now all lower-case.)</p>\n\n<p>Each successive call to method <code>find()</code> will find the next word in the <code>String</code> (according to the above definition of a word, i.e. a consecutive series of lower-case letters of the alphabet).</p>\n\n<p>To count the letter frequencies, I use a <code>TreeMap</code> where the map key is the word and the map value is the number of times that word appears in the <code>String</code>. Note that map keys and values cannot be primitives, hence the value is <code>Integer</code> and not <code>int</code>.</p>\n\n<p>If the last word found already appears in the map, I increment the count.</p>\n\n<p>If the last word found does not appear in the map, it is added to the map and its count is set to 1 (one).</p>\n\n<p>Along with adding the words to the map, I count the letters of each word found in order to find the longest word.</p>\n\n<p>After the entire <code>String</code> is processed, I print the contents of the map, one entry per line, and finally print the number of letters in the longest word found. Note that <code>TreeMap</code> sorts its keys, hence the list of words appears in alphabetical order.</p>\n\n<p>Here is the output:</p>\n\n<pre><code>a         =  1\nbe        =  1\nbrown     =  1\nbut       =  1\ncomplete  =  1\nfor       =  1\nfox       =  1\nhopefully =  1\nis        =  1\nless      =  1\nmaybe     =  1\nquick     =  3\ntask      =  2\nthe       = 12\nthis      =  1\nto        =  1\nwill      =  1\nyou       =  1\nLongest = 9\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10299803,"reputation":1540,"user_id":7598851,"display_name":"MartinBG"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1590344988,"creation_date":1590344988,"answer_id":61990523,"question_id":61988535,"body_markdown":"On Java 9 or newer [Matcher#results][1] could be used in a stream solution like this:\r\n\r\n        Pattern pattern = Pattern.compile(&quot;[a-zA-Z]+&quot;);\r\n        try (BufferedReader br = Files.newBufferedReader(Paths.get(&quot;C:\\\\Users\\\\Jason\\\\Downloads\\\\test_words_file-1.txt&quot;))) {\r\n            br.lines()\r\n                    .map(pattern::matcher)\r\n                    .flatMap(Matcher::results)\r\n                    .map(matchResult -&gt; matchResult.group(0))\r\n                    .collect(Collectors.groupingBy(String::toLowerCase, TreeMap::new, Collectors.counting()))\r\n                    .forEach((word, count) -&gt; System.out.printf(&quot;%s=%s%n&quot;, word, count));\r\n        } catch (IOException e) {\r\n            System.err.format(&quot;IOException: %s%n&quot;, e);\r\n        }\r\n\r\n\r\nOutput:\r\n\r\n    a=1\r\n    be=1\r\n    brown=1\r\n    but=1\r\n    complete=1\r\n    for=1\r\n    fox=1\r\n    hopefully=1\r\n    is=1\r\n    less=1\r\n    maybe=1\r\n    quick=3\r\n    task=2\r\n    the=12\r\n    this=1\r\n    to=1\r\n    will=1\r\n    you=1\r\n\r\n  [1]: https://docs.oracle.com/javase/9/docs/api/java/util/regex/Matcher.html#results--","title":"How to find word frequency in a text file?","body":"<p>On Java 9 or newer <a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/regex/Matcher.html#results--\" rel=\"nofollow noreferrer\">Matcher#results</a> could be used in a stream solution like this:</p>\n\n<pre><code>    Pattern pattern = Pattern.compile(\"[a-zA-Z]+\");\n    try (BufferedReader br = Files.newBufferedReader(Paths.get(\"C:\\\\Users\\\\Jason\\\\Downloads\\\\test_words_file-1.txt\"))) {\n        br.lines()\n                .map(pattern::matcher)\n                .flatMap(Matcher::results)\n                .map(matchResult -&gt; matchResult.group(0))\n                .collect(Collectors.groupingBy(String::toLowerCase, TreeMap::new, Collectors.counting()))\n                .forEach((word, count) -&gt; System.out.printf(\"%s=%s%n\", word, count));\n    } catch (IOException e) {\n        System.err.format(\"IOException: %s%n\", e);\n    }\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>a=1\nbe=1\nbrown=1\nbut=1\ncomplete=1\nfor=1\nfox=1\nhopefully=1\nis=1\nless=1\nmaybe=1\nquick=3\ntask=2\nthe=12\nthis=1\nto=1\nwill=1\nyou=1\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12177497,"reputation":11,"user_id":8890116,"display_name":"Durgesh Nandini"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679046508,"creation_date":1679046508,"answer_id":75766054,"question_id":61988535,"body_markdown":"    import java.io.File;\r\n    import java.io.FileNotFoundException;\r\n    import java.util.HashMap;\r\n    import java.util.Map;\r\n    import java.util.Scanner;\r\n     \r\n    public class test\r\n    {\r\n      public static void main(String[] args) throws FileNotFoundException\r\n      {\r\n        File f = new File(&quot;C:\\\\Users\\\\Nandini\\\\Downloads\\\\CountFreq.txt&quot;);\r\n        Scanner s = new Scanner(f);\r\n        Map&lt;String, Integer&gt; counts = new HashMap&lt;String, Integer&gt;(); \r\n        while( s.hasNext() )\r\n        {\r\n        \t\t String word = s.next();\r\n        \t\t word = word.toLowerCase();\r\n        \t\tif( !counts.containsKey( word ) )\r\n        \t\t counts.put( word, 1 );\r\n        \t\telse\r\n        \t\t counts.put( word, counts.get(word) + 1 );\r\n        }\r\n        System.out.println(counts);\r\n      }\r\n      \r\n    }\r\n\r\n**Output:**\r\n{the=1, this=3, have=1, is=2, word=1}","title":"How to find word frequency in a text file?","body":"<pre><code>import java.io.File;\nimport java.io.FileNotFoundException;\nimport java.util.HashMap;\nimport java.util.Map;\nimport java.util.Scanner;\n \npublic class test\n{\n  public static void main(String[] args) throws FileNotFoundException\n  {\n    File f = new File(&quot;C:\\\\Users\\\\Nandini\\\\Downloads\\\\CountFreq.txt&quot;);\n    Scanner s = new Scanner(f);\n    Map&lt;String, Integer&gt; counts = new HashMap&lt;String, Integer&gt;(); \n    while( s.hasNext() )\n    {\n             String word = s.next();\n             word = word.toLowerCase();\n            if( !counts.containsKey( word ) )\n             counts.put( word, 1 );\n            else\n             counts.put( word, counts.get(word) + 1 );\n    }\n    System.out.println(counts);\n  }\n  \n}\n</code></pre>\n<p><strong>Output:</strong>\n{the=1, this=3, have=1, is=2, word=1}</p>\n"}],"owner":{"account_id":15870151,"reputation":1,"user_id":11451052,"display_name":"denali"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3363,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":4,"score":0,"last_activity_date":1679046508,"creation_date":1590335877,"question_id":61988535,"body_markdown":"My task is to get the word frequency of this file:\r\n\r\n**test_words_file-1.txt**:\r\n```\r\nThe quick brown fox\r\nHopefully245this---is   a quick13947\r\ntask&amp;&amp;#%*for you to complete.\r\nBut maybe the tASk 098234 will be less\r\n..quicK.\r\nthe the the the the the the the the the\r\n```\r\nI&#39;ve been trying to remove symbols and digits from this file and get each word&#39;s frequency in alphabetical order, and the result is:\r\n\r\n[![word list][2]][2]\r\n\r\nI can see that even digits have been removed but are still being counted. Can you explain why and how can I fix this?\r\n\r\nAlso, how can I separate *&quot;Hopefully245this---is&quot;* and store 3 useful words *&quot;hopefully&quot;, &quot;this&quot;, &quot;is&quot;*?\r\n\r\n```java\r\npublic class WordFreq2 {\r\n\tpublic static void main(String[] args) throws FileNotFoundException {\r\n\t\t\r\n\t\tFile file = new File(&quot;C:\\\\Users\\\\Jason\\\\Downloads\\\\test_words_file-1.txt&quot;);\r\n\t\tScanner scanner = new Scanner(file); \r\n\t\tint maxWordLen = 0; \r\n\t\tString maxWord = null;\r\n\t\t\r\n\t\tHashMap&lt;String, Integer&gt; map = new HashMap&lt;&gt;();\r\n\t\twhile(scanner.hasNext()) {\r\n\t\t\tString word = scanner.next();\r\n\t\t\tword = word.toLowerCase();\r\n\t\t\t// text cleaning \r\n\t\t\tword = word.replaceAll(&quot;[^a-zA-Z]+&quot;, &quot;&quot;);\r\n\t\t\t\r\n\t\t\tif(map.containsKey(word)) {\r\n\t\t\t\t//if the word already exists\r\n\t\t\t\tint count = map.get(word)+1;\r\n\t\t\t\tmap.put(word,count);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t// The word is new \r\n\t\t\t\tint count = 1;\r\n\t\t\t\tmap.put(word, count);\r\n\t\t\t\t\r\n\t\t\t\t// Find the max length of Word\r\n\t\t\t\tif (word.length() &gt; maxWordLen) {\r\n\t\t\t\t\tmaxWordLen = word.length();\r\n\t\t\t\t\tmaxWord = word;\r\n\t\t\t\t}\r\n\t\t\t}\t\r\n\t\t}\r\n\t\t\r\n\t\tscanner.close();\r\n\t\t\r\n\t\t//HashMap unsorted, sort \r\n\t\tTreeMap&lt;String, Integer&gt; sorted = new TreeMap&lt;&gt;();\r\n\t\tsorted.putAll(map);\r\n\t\t\r\n\t\t\r\n\t\tfor (Map.Entry&lt;String, Integer&gt; entry: sorted.entrySet()) {\r\n\t\t\tSystem.out.println(entry);\r\n\t\t}\r\n\t\t\r\n\t\tSystem.out.println(maxWordLen+&quot; (&quot;+maxWord+&quot;)&quot;);\r\n\t}\r\n\r\n}\r\n```\r\n\r\n  [1]: https://github.com/denalist/Java/blob/master/test_words_file-1.txt\r\n  [2]: https://i.stack.imgur.com/VHIhT.png\r\n\r\n","title":"How to find word frequency in a text file?","body":"<p>My task is to get the word frequency of this file:</p>\n\n<p><strong>test_words_file-1.txt</strong>:</p>\n\n<pre><code>The quick brown fox\nHopefully245this---is   a quick13947\ntask&amp;&amp;#%*for you to complete.\nBut maybe the tASk 098234 will be less\n..quicK.\nthe the the the the the the the the the\n</code></pre>\n\n<p>I've been trying to remove symbols and digits from this file and get each word's frequency in alphabetical order, and the result is:</p>\n\n<p><a href=\"https://i.stack.imgur.com/VHIhT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VHIhT.png\" alt=\"word list\"></a></p>\n\n<p>I can see that even digits have been removed but are still being counted. Can you explain why and how can I fix this?</p>\n\n<p>Also, how can I separate <em>\"Hopefully245this---is\"</em> and store 3 useful words <em>\"hopefully\", \"this\", \"is\"</em>?</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class WordFreq2 {\n    public static void main(String[] args) throws FileNotFoundException {\n\n        File file = new File(\"C:\\\\Users\\\\Jason\\\\Downloads\\\\test_words_file-1.txt\");\n        Scanner scanner = new Scanner(file); \n        int maxWordLen = 0; \n        String maxWord = null;\n\n        HashMap&lt;String, Integer&gt; map = new HashMap&lt;&gt;();\n        while(scanner.hasNext()) {\n            String word = scanner.next();\n            word = word.toLowerCase();\n            // text cleaning \n            word = word.replaceAll(\"[^a-zA-Z]+\", \"\");\n\n            if(map.containsKey(word)) {\n                //if the word already exists\n                int count = map.get(word)+1;\n                map.put(word,count);\n            }\n            else {\n                // The word is new \n                int count = 1;\n                map.put(word, count);\n\n                // Find the max length of Word\n                if (word.length() &gt; maxWordLen) {\n                    maxWordLen = word.length();\n                    maxWord = word;\n                }\n            }   \n        }\n\n        scanner.close();\n\n        //HashMap unsorted, sort \n        TreeMap&lt;String, Integer&gt; sorted = new TreeMap&lt;&gt;();\n        sorted.putAll(map);\n\n\n        for (Map.Entry&lt;String, Integer&gt; entry: sorted.entrySet()) {\n            System.out.println(entry);\n        }\n\n        System.out.println(maxWordLen+\" (\"+maxWord+\")\");\n    }\n\n}\n</code></pre>\n"},{"tags":["java","jackson","lombok"],"answers":[{"comments":[{"owner":{"account_id":24755582,"reputation":25,"user_id":18640548,"display_name":"GenericUserName"},"score":0,"creation_date":1679046870,"post_id":75765907,"comment_id":133654447,"body_markdown":"Thank you! I don&#39;t have controll over ItemProduct (or: API response in JSON form that describes what ItemProduct is). Class &quot;Something&quot; is used as proxy object that I can work on, add logic, etc... In the end objects of class &quot;Something&quot; are used to create request body for different API call.\n\nThank you for pointing out:\n* MapStruct - will look into it,\n* Immutability of classes","body":"Thank you! I don&#39;t have controll over ItemProduct (or: API response in JSON form that describes what ItemProduct is). Class &quot;Something&quot; is used as proxy object that I can work on, add logic, etc... In the end objects of class &quot;Something&quot; are used to create request body for different API call.  Thank you for pointing out: * MapStruct - will look into it, * Immutability of classes"},{"owner":{"account_id":13887193,"reputation":7307,"user_id":10026074,"display_name":"Jan Rieke"},"score":0,"creation_date":1679050036,"post_id":75765907,"comment_id":133655272,"body_markdown":"Yes, what you describe really screams &quot;map me to internal value classes&quot;. You then will have full control over these and can add your logic without thinking about Jackson etc.","body":"Yes, what you describe really screams &quot;map me to internal value classes&quot;. You then will have full control over these and can add your logic without thinking about Jackson etc."}],"tags":[],"owner":{"account_id":13887193,"reputation":7307,"user_id":10026074,"display_name":"Jan Rieke"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1679046190,"creation_date":1679045712,"answer_id":75765907,"question_id":75764989,"body_markdown":"Before pointing you to a technical solution, let me first explain why I think your design is flawed.\r\n\r\nIn general, you should design your classes with the &quot;separation of concerns&quot; principle in mind. The main concern of your `ItemProduct` and `Reservation` classes is deserialization. However, the concern of `Something` seems to be something completely different, although it&#39;s unclear what that is (storing some state of the reservation? holding internal data?).\r\n\r\nMy advice is to separate these concerns also in your code. You can achieve this in several ways. One way could be to map the input classes to a different set of classes; you can do that manually or with helper tools like [MapStruct][1].\r\n\r\nIf you still want a technical solution, you can implement an all-args constructor for `ItemProduct` manually. Jackson will construct the instance using `ItemProductBuilder.build()`, and that calls this constructor. So if you want to populate `something`, that&#39;s a way to do that.\r\n\r\nAnother solution is to create a manual getter for `something` and create the instance in there lazily upon the first call to that method.\r\n\r\nPS: You should aim for immutable classes. So if possible, use `@Value` instead of `@Data`. If you have a builder, you also don&#39;t need more than a (private) all-args constructor, because you would always use the builder to create instances.\r\n\r\n  [1]: https://mapstruct.org/","title":"Lombok, Jacksonized; How to create custom class objects when constructing core class from json","body":"<p>Before pointing you to a technical solution, let me first explain why I think your design is flawed.</p>\n<p>In general, you should design your classes with the &quot;separation of concerns&quot; principle in mind. The main concern of your <code>ItemProduct</code> and <code>Reservation</code> classes is deserialization. However, the concern of <code>Something</code> seems to be something completely different, although it's unclear what that is (storing some state of the reservation? holding internal data?).</p>\n<p>My advice is to separate these concerns also in your code. You can achieve this in several ways. One way could be to map the input classes to a different set of classes; you can do that manually or with helper tools like <a href=\"https://mapstruct.org/\" rel=\"nofollow noreferrer\">MapStruct</a>.</p>\n<p>If you still want a technical solution, you can implement an all-args constructor for <code>ItemProduct</code> manually. Jackson will construct the instance using <code>ItemProductBuilder.build()</code>, and that calls this constructor. So if you want to populate <code>something</code>, that's a way to do that.</p>\n<p>Another solution is to create a manual getter for <code>something</code> and create the instance in there lazily upon the first call to that method.</p>\n<p>PS: You should aim for immutable classes. So if possible, use <code>@Value</code> instead of <code>@Data</code>. If you have a builder, you also don't need more than a (private) all-args constructor, because you would always use the builder to create instances.</p>\n"}],"owner":{"account_id":24755582,"reputation":25,"user_id":18640548,"display_name":"GenericUserName"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":275,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75765907,"answer_count":1,"score":1,"last_activity_date":1679046190,"creation_date":1679039677,"question_id":75764989,"body_markdown":"I have three classes, first: &quot;ItemProduct&quot; has, among other properties, two fields that are class-based. Class &quot;Reservation&quot; and class &quot;Something&quot;. &quot;ItemProduct&quot; and &quot;Reservation&quot; are model classes based on json response from API. Class &quot;Something&quot; is generated using data from ItemProduct and Reservation and is used later for other operations.\r\n\r\nCode:\r\n\r\n```\r\n@Data\r\n@Builder\r\n@Jacksonized\r\npublic class ItemProduct {\r\n    @NotNull\r\n    Integer id;\r\n    @NotNull\r\n    String status;\r\n    @NotNull\r\n    String productType;\r\n    String productNo;\r\n    @NotNull\r\n    Reservation reservation;\r\n    @JsonIgnore\r\n    Something something;\r\n\r\n}\r\n\r\n@Data\r\n@Builder\r\n@Jacksonized\r\npublic class Reservation {\r\n    @NotNull\r\n    Integer reservationLine;\r\n    String reservationDescription;\r\n}\r\n\r\n@Data\r\n@Jacksonized\r\n@Builder\r\npublic class Something{\r\n    @NotNull\r\n    Integer reservationLineNo;\r\n    @NotNull\r\n    String reservationType;\r\n    String serialNumber;\r\n\r\n    public static final List&lt;Something&gt; stuff = new ArrayList&lt;&gt;();\r\n\r\n    public Something(@NotNull Integer reservationLineNo, @NotNull String reservationType) {\r\n        this.reservationLineNo = reservationLineNo;\r\n        this.reservationType = reservationType;\r\n        something.add(this);\r\n    }\r\n\r\n    public Something(@NotNull Integer reservationLineNo, @NotNull String reservationType, String serialNumber) {\r\n        this.reservationLineNo = reservationLineNo;\r\n        this.reservationType = reservationType;\r\n        this.serialNumber = serialNumber;\r\n        something.add(this);\r\n    }\r\n```\r\n\r\nI create objects of class ItemProduct as follow:\r\n\r\n```\r\nItemProduct itemProduct = objectMapper.readValue(input_real, ItemProduct.class);\r\n```\r\n\r\nInput:\r\n\r\n    {\r\n\t&quot;id&quot;: 4011821,\r\n\t&quot;reservation&quot;: {\r\n\t\t&quot;reservationLine&quot;: &quot;3&quot;,\r\n\t\t&quot;reservationDescription&quot;: &quot;xxx&quot;\r\n\t},\r\n\t&quot;status&quot;: &quot;PROCESSING&quot;,\r\n\t&quot;productType&quot;: &quot;TOOL&quot;\r\n    }\r\n\r\nProblem:\r\nHow can I, during construction of objects ItemProduct, construct objects of class Something? With code mentioned above I don&#39;t create objects of class Something. I would like to make a call: Something(this.reservation.reservationLine, this.productType) in ItemProduct class constructor.\r\n\r\nI tried tinkering with writing my own Contractor for class ItemProduct, but it only partialy worked - got NPE from using Builder annotation during deserialisation. Also, it generated a lot of additional boilerplate code (there will be more optional class properties in ItemProduct).\r\n\r\n---\r\nEdit:\r\n\r\nDirty &quot;solution&quot; is adding constructor to ItemProduct:\r\n\r\n        ItemProduct(@NotNull Integer id, @NotNull String status, @NotNull String productType, String productNo, @NotNull Reservation reservation, Something something){\r\n        this.id = id;\r\n        this.status = status;\r\n        this.productType = productType;\r\n        this.reservation = reservation;\r\n        this.productNo = productNo;\r\n        this.something = new Something(reservation.reservationLine, productType);\r\n    }\r\n\r\nSo, please correct me, I need to make constructor that uses all possible properties? Do I need to make other constructor variants including unused &quot;Something something&quot; arguments?","title":"Lombok, Jacksonized; How to create custom class objects when constructing core class from json","body":"<p>I have three classes, first: &quot;ItemProduct&quot; has, among other properties, two fields that are class-based. Class &quot;Reservation&quot; and class &quot;Something&quot;. &quot;ItemProduct&quot; and &quot;Reservation&quot; are model classes based on json response from API. Class &quot;Something&quot; is generated using data from ItemProduct and Reservation and is used later for other operations.</p>\n<p>Code:</p>\n<pre><code>@Data\n@Builder\n@Jacksonized\npublic class ItemProduct {\n    @NotNull\n    Integer id;\n    @NotNull\n    String status;\n    @NotNull\n    String productType;\n    String productNo;\n    @NotNull\n    Reservation reservation;\n    @JsonIgnore\n    Something something;\n\n}\n\n@Data\n@Builder\n@Jacksonized\npublic class Reservation {\n    @NotNull\n    Integer reservationLine;\n    String reservationDescription;\n}\n\n@Data\n@Jacksonized\n@Builder\npublic class Something{\n    @NotNull\n    Integer reservationLineNo;\n    @NotNull\n    String reservationType;\n    String serialNumber;\n\n    public static final List&lt;Something&gt; stuff = new ArrayList&lt;&gt;();\n\n    public Something(@NotNull Integer reservationLineNo, @NotNull String reservationType) {\n        this.reservationLineNo = reservationLineNo;\n        this.reservationType = reservationType;\n        something.add(this);\n    }\n\n    public Something(@NotNull Integer reservationLineNo, @NotNull String reservationType, String serialNumber) {\n        this.reservationLineNo = reservationLineNo;\n        this.reservationType = reservationType;\n        this.serialNumber = serialNumber;\n        something.add(this);\n    }\n</code></pre>\n<p>I create objects of class ItemProduct as follow:</p>\n<pre><code>ItemProduct itemProduct = objectMapper.readValue(input_real, ItemProduct.class);\n</code></pre>\n<p>Input:</p>\n<pre><code>{\n&quot;id&quot;: 4011821,\n&quot;reservation&quot;: {\n    &quot;reservationLine&quot;: &quot;3&quot;,\n    &quot;reservationDescription&quot;: &quot;xxx&quot;\n},\n&quot;status&quot;: &quot;PROCESSING&quot;,\n&quot;productType&quot;: &quot;TOOL&quot;\n}\n</code></pre>\n<p>Problem:\nHow can I, during construction of objects ItemProduct, construct objects of class Something? With code mentioned above I don't create objects of class Something. I would like to make a call: Something(this.reservation.reservationLine, this.productType) in ItemProduct class constructor.</p>\n<p>I tried tinkering with writing my own Contractor for class ItemProduct, but it only partialy worked - got NPE from using Builder annotation during deserialisation. Also, it generated a lot of additional boilerplate code (there will be more optional class properties in ItemProduct).</p>\n<hr />\n<p>Edit:</p>\n<p>Dirty &quot;solution&quot; is adding constructor to ItemProduct:</p>\n<pre><code>    ItemProduct(@NotNull Integer id, @NotNull String status, @NotNull String productType, String productNo, @NotNull Reservation reservation, Something something){\n    this.id = id;\n    this.status = status;\n    this.productType = productType;\n    this.reservation = reservation;\n    this.productNo = productNo;\n    this.something = new Something(reservation.reservationLine, productType);\n}\n</code></pre>\n<p>So, please correct me, I need to make constructor that uses all possible properties? Do I need to make other constructor variants including unused &quot;Something something&quot; arguments?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":2933712,"reputation":6419,"user_id":2513200,"accept_rate":83,"display_name":"Hulk"},"score":0,"creation_date":1679044871,"post_id":75765635,"comment_id":133653943,"body_markdown":"Well, the first experiment would be to comment out the line `xorValue = mixer.nextInt() &amp; 0x7F; ` - without this line, the decryption succeeds. This narrows it down - now you can look into why this way of updating the `xorValue` leads to your observed behavior.","body":"Well, the first experiment would be to comment out the line <code>xorValue = mixer.nextInt() &amp; 0x7F; </code> - without this line, the decryption succeeds. This narrows it down - now you can look into why this way of updating the <code>xorValue</code> leads to your observed behavior."},{"owner":{"account_id":4819600,"reputation":56500,"user_id":3890632,"display_name":"khelwood"},"score":0,"creation_date":1679045304,"post_id":75765635,"comment_id":133654027,"body_markdown":"When you keep using the same `transmogrifier`, it keeps generating new random numbers. So not the same random numbers for decryption as it used for encryption.","body":"When you keep using the same <code>transmogrifier</code>, it keeps generating new random numbers. So not the same random numbers for decryption as it used for encryption."}],"answers":[{"tags":[],"owner":{"account_id":2933712,"reputation":6419,"user_id":2513200,"accept_rate":83,"display_name":"Hulk"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679045259,"creation_date":1679045259,"answer_id":75765823,"question_id":75765635,"body_markdown":"You need to reinitialize your `mixer` to produce the same sequence used during encryption. One easy way to do this without changing the `TransmogrifierChained` class is to just create a new instance for decryption:\r\n\r\n\tpublic static void main(String[] args) {\r\n        long key = 123456;\r\n        TransmogrifierChained transmogrifier = new TransmogrifierChained(key);\r\n\r\n        String message = &quot;Hello World!&quot;;\r\n        System.out.println(&quot;Original message: &quot; + message);\r\n\r\n        String encrypted = transmogrifier.encrypt(message);\r\n        System.out.println(&quot;Encrypted message: &quot; + encrypted);\r\n\r\n        transmogrifier = new TransmogrifierChained(key); // new instance!\r\n        String decrypted = transmogrifier.decrypt(encrypted);\r\n        System.out.println(&quot;Decrypted message: &quot; + decrypted);\r\n\t}\r\n\r\nYields something like\r\n\r\n    Original message: Hello World!\r\n    Encrypted message: o\u000B:&amp;b_D.JRS\\\r\n    Decrypted message: Hello World!","title":"Won&#39;t decrypt to the same string","body":"<p>You need to reinitialize your <code>mixer</code> to produce the same sequence used during encryption. One easy way to do this without changing the <code>TransmogrifierChained</code> class is to just create a new instance for decryption:</p>\n<pre><code>public static void main(String[] args) {\n    long key = 123456;\n    TransmogrifierChained transmogrifier = new TransmogrifierChained(key);\n\n    String message = &quot;Hello World!&quot;;\n    System.out.println(&quot;Original message: &quot; + message);\n\n    String encrypted = transmogrifier.encrypt(message);\n    System.out.println(&quot;Encrypted message: &quot; + encrypted);\n\n    transmogrifier = new TransmogrifierChained(key); // new instance!\n    String decrypted = transmogrifier.decrypt(encrypted);\n    System.out.println(&quot;Decrypted message: &quot; + decrypted);\n}\n</code></pre>\n<p>Yields something like</p>\n<pre><code>Original message: Hello World!\nEncrypted message: o\u000B:&amp;b_D.JRS\\\nDecrypted message: Hello World!\n</code></pre>\n"}],"owner":{"account_id":23924614,"reputation":1,"user_id":17919871,"display_name":"astroprab"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":30,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1679045259,"creation_date":1679044033,"question_id":75765635,"body_markdown":"```\r\nimport java.util.Random;\r\n\r\npublic class TransmogrifierChained {\r\n    private Random mixer;\r\n    private int xorValue;\r\n\r\n    public TransmogrifierChained(long key) {\r\n        mixer = new Random(key);\r\n        xorValue = mixer.nextInt() &amp; 0x7F;\r\n    }\r\n\r\n    public char mutate(char c) {\r\n        int asciiValue = (int) c;\r\n        int mutatedValue = asciiValue ^ xorValue;\r\n        xorValue = mixer.nextInt() &amp; 0x7F; // generate new xor value\r\n        return (char) mutatedValue;\r\n    }\r\n\r\n    public String mutate(String message) {\r\n        StringBuilder encrypted = new StringBuilder();\r\n        for (char c : message.toCharArray()) {\r\n            encrypted.append(mutate(c));\r\n        }\r\n        return encrypted.toString();\r\n    }\r\n\r\n    public String encrypt(String message) {\r\n        return mutate(message);\r\n    }\r\n\r\n    public String decrypt(String message) {\r\n        StringBuilder decrypted = new StringBuilder();\r\n        for (char c : message.toCharArray()) {\r\n            decrypted.append(mutate(c));\r\n        }\r\n        return decrypted.toString();\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        long key = 123456;\r\n        TransmogrifierChained transmogrifier = new TransmogrifierChained(key);\r\n\r\n        String message = &quot;Hello World!&quot;;\r\n        System.out.println(&quot;Original message: &quot; + message);\r\n\r\n        String encrypted = transmogrifier.encrypt(message);\r\n        System.out.println(&quot;Encrypted message: &quot; + encrypted);\r\n\r\n        String decrypted = transmogrifier.decrypt(encrypted);\r\n        System.out.println(&quot;Decrypted message: &quot; + decrypted);\r\n    }\r\n}\r\n\r\n```\r\n\r\nHi guys my code outputs this:\r\n\r\n    Original message: Hello World!\r\n    Encrypted message: o:&amp;b_D.JRS\\\r\n    Decrypted message: *S=N&amp;QP39\r\n\r\n\r\n\r\n\r\nIt should output:\r\n\r\n    Original message: Hello World!\r\n    Encrypted message: -the correct encryption-\r\n    Decrypted message: Hello World!","title":"Won&#39;t decrypt to the same string","body":"<pre><code>import java.util.Random;\n\npublic class TransmogrifierChained {\n    private Random mixer;\n    private int xorValue;\n\n    public TransmogrifierChained(long key) {\n        mixer = new Random(key);\n        xorValue = mixer.nextInt() &amp; 0x7F;\n    }\n\n    public char mutate(char c) {\n        int asciiValue = (int) c;\n        int mutatedValue = asciiValue ^ xorValue;\n        xorValue = mixer.nextInt() &amp; 0x7F; // generate new xor value\n        return (char) mutatedValue;\n    }\n\n    public String mutate(String message) {\n        StringBuilder encrypted = new StringBuilder();\n        for (char c : message.toCharArray()) {\n            encrypted.append(mutate(c));\n        }\n        return encrypted.toString();\n    }\n\n    public String encrypt(String message) {\n        return mutate(message);\n    }\n\n    public String decrypt(String message) {\n        StringBuilder decrypted = new StringBuilder();\n        for (char c : message.toCharArray()) {\n            decrypted.append(mutate(c));\n        }\n        return decrypted.toString();\n    }\n\n    public static void main(String[] args) {\n        long key = 123456;\n        TransmogrifierChained transmogrifier = new TransmogrifierChained(key);\n\n        String message = &quot;Hello World!&quot;;\n        System.out.println(&quot;Original message: &quot; + message);\n\n        String encrypted = transmogrifier.encrypt(message);\n        System.out.println(&quot;Encrypted message: &quot; + encrypted);\n\n        String decrypted = transmogrifier.decrypt(encrypted);\n        System.out.println(&quot;Decrypted message: &quot; + decrypted);\n    }\n}\n\n</code></pre>\n<p>Hi guys my code outputs this:</p>\n<pre><code>Original message: Hello World!\nEncrypted message: o:&amp;b_D.JRS\\\nDecrypted message: *S=N&amp;QP39\n</code></pre>\n<p>It should output:</p>\n<pre><code>Original message: Hello World!\nEncrypted message: -the correct encryption-\nDecrypted message: Hello World!\n</code></pre>\n"},{"tags":["java","spring","spring-boot","annotations"],"comments":[{"owner":{"account_id":28040555,"reputation":1,"user_id":21418177,"display_name":"zuohx"},"score":0,"creation_date":1679106229,"post_id":75765752,"comment_id":133666763,"body_markdown":"clz.getClass().getAnnotation(A.class).annotationType().getAnnotation(B.class) works","body":"clz.getClass().getAnnotation(A.class).annotationType().getAn&zwnj;&#8203;notation(B.class) works"}],"owner":{"account_id":28040555,"reputation":1,"user_id":21418177,"display_name":"zuohx"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679044912,"creation_date":1679044817,"question_id":75765752,"body_markdown":"I define a annotion A and its meta-annoation has B, then i write a class Clz, Clz add annotation A.\r\n\r\n```\r\n@B(value=&quot;sth&quot;)\r\npublic @interface A {\r\n}\r\n\r\n@A\r\npublic class Clz {\r\n}\r\n```\r\n\r\nis there any way to modify meta-annotation B value when bean Clz is created on spring\r\n\r\n\r\n1.I have tried using clz.getClass().getDeclaredAnnotation(A.class).getClass().getDeclaredAnnotation(B.class) \r\nto get meta-annotaion but result is null;\r\n\r\n2.then i use clz.getClass().getDeclaredAnnotation(B.class) to get B annotion but also fail\r\n","title":"How to modify meta-annotaion value","body":"<p>I define a annotion A and its meta-annoation has B, then i write a class Clz, Clz add annotation A.</p>\n<pre><code>@B(value=&quot;sth&quot;)\npublic @interface A {\n}\n\n@A\npublic class Clz {\n}\n</code></pre>\n<p>is there any way to modify meta-annotation B value when bean Clz is created on spring</p>\n<p>1.I have tried using clz.getClass().getDeclaredAnnotation(A.class).getClass().getDeclaredAnnotation(B.class)\nto get meta-annotaion but result is null;</p>\n<p>2.then i use clz.getClass().getDeclaredAnnotation(B.class) to get B annotion but also fail</p>\n"},{"tags":["java","postgresql","spring-boot","java-8"],"comments":[{"owner":{"account_id":300715,"reputation":1715,"user_id":608011,"display_name":"zulqarnain"},"score":0,"creation_date":1672302508,"post_id":74948712,"comment_id":132261786,"body_markdown":"Check the console/terminal to get the full error and post it if you are unable to resolve it. Also you don&#39;t need `CLOB` for first and last names.","body":"Check the console/terminal to get the full error and post it if you are unable to resolve it. Also you don&#39;t need <code>CLOB</code> for first and last names."},{"owner":{"account_id":2064278,"reputation":13138,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1672303119,"post_id":74948712,"comment_id":132261917,"body_markdown":"Also please remove `ComponentScan(&quot;personal&quot;)` it should not be there","body":"Also please remove <code>ComponentScan(&quot;personal&quot;)</code> it should not be there"},{"owner":{"account_id":22866981,"reputation":131,"user_id":17010647,"display_name":"Ksu"},"score":0,"creation_date":1672304616,"post_id":74948712,"comment_id":132262316,"body_markdown":"For CLOB data try add @Lob.","body":"For CLOB data try add @Lob."},{"owner":{"account_id":27275195,"reputation":1,"user_id":20795925,"display_name":"Practice Tech"},"score":0,"creation_date":1672305478,"post_id":74948712,"comment_id":132262513,"body_markdown":"@zulqarnain Hi! Thank you so much for this comment that alerts me of the problem. Basically the issue was my entity under column image. It says that column &quot;image&quot; is of type bytea but expression is of type smallint Hint: You will need to rewrite or cast the expression. To ask, what data type exactly should I declare in my entity to address this issue?","body":"@zulqarnain Hi! Thank you so much for this comment that alerts me of the problem. Basically the issue was my entity under column image. It says that column &quot;image&quot; is of type bytea but expression is of type smallint Hint: You will need to rewrite or cast the expression. To ask, what data type exactly should I declare in my entity to address this issue?"}],"answers":[{"comments":[{"owner":{"account_id":27275195,"reputation":1,"user_id":20795925,"display_name":"Practice Tech"},"score":0,"creation_date":1672336778,"post_id":74950543,"comment_id":132271321,"body_markdown":"Hi! If I were to try this approach is it also necessary for me to change the data type in sql to VARCHAR?","body":"Hi! If I were to try this approach is it also necessary for me to change the data type in sql to VARCHAR?"},{"owner":{"account_id":16078173,"reputation":139,"user_id":11604871,"display_name":"Tonykay"},"score":1,"creation_date":1673336973,"post_id":74950543,"comment_id":132470039,"body_markdown":"You can use VARCHAR, just make sure you assign a length that would be enough to store what the image path value.","body":"You can use VARCHAR, just make sure you assign a length that would be enough to store what the image path value."}],"tags":[],"owner":{"account_id":16078173,"reputation":139,"user_id":11604871,"display_name":"Tonykay"},"comment_count":2,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1672313253,"creation_date":1672313253,"answer_id":74950543,"question_id":74948712,"body_markdown":"Idealy, you should save only path to your image in your database, after you have uploaded the file to a separate image storage.\r\n\r\nMake the image type String.","title":"How to fixed error 500 in postman from a post request?","body":"<p>Idealy, you should save only path to your image in your database, after you have uploaded the file to a separate image storage.</p>\n<p>Make the image type String.</p>\n"},{"comments":[{"owner":{"account_id":27275195,"reputation":1,"user_id":20795925,"display_name":"Practice Tech"},"score":0,"creation_date":1672335680,"post_id":74951993,"comment_id":132270996,"body_markdown":"Hi, I also have this approach to try in mind but unfortunately i&#39;m getting this error:  Can&#39;t map property &quot;byte[] image&quot; to &quot;String image&quot;. Consider to declare/implement a mapping method: &quot;String map(byte[] value)&quot;. I wonder if there is a needed mapping configuration for this to be fixed?","body":"Hi, I also have this approach to try in mind but unfortunately i&#39;m getting this error:  Can&#39;t map property &quot;byte[] image&quot; to &quot;String image&quot;. Consider to declare/implement a mapping method: &quot;String map(byte[] value)&quot;. I wonder if there is a needed mapping configuration for this to be fixed?"},{"owner":{"account_id":27275195,"reputation":1,"user_id":20795925,"display_name":"Practice Tech"},"score":0,"creation_date":1672335725,"post_id":74951993,"comment_id":132271012,"body_markdown":"And just to add. Here is my mapper class.\n\nPersonalMapper.java\n\n@Mapper(componentModel = &quot;spring&quot;)\npublic interface PersonalMapper {\n\n    PersonalResponseDto toDto(PersonalEntity personalEntity);\n\n    PersonalEntity toEntity(PersonalRequestDetailsDto personalRequestDetailsDto); \n}","body":"And just to add. Here is my mapper class.  PersonalMapper.java  @Mapper(componentModel = &quot;spring&quot;) public interface PersonalMapper {      PersonalResponseDto toDto(PersonalEntity personalEntity);      PersonalEntity toEntity(PersonalRequestDetailsDto personalRequestDetailsDto);  }"}],"tags":[],"owner":{"account_id":300715,"reputation":1715,"user_id":608011,"display_name":"zulqarnain"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672322048,"creation_date":1672322048,"answer_id":74951993,"question_id":74948712,"body_markdown":"I normally save images as files and save the details in the DB. However if you still want to save it in the DB then you can change as follows:\r\n\r\n    @Lob\r\n    @Column(name = &quot;image&quot;)\r\n    private byte[] image;","title":"How to fixed error 500 in postman from a post request?","body":"<p>I normally save images as files and save the details in the DB. However if you still want to save it in the DB then you can change as follows:</p>\n<pre><code>@Lob\n@Column(name = &quot;image&quot;)\nprivate byte[] image;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10495831,"reputation":116,"user_id":7736119,"display_name":"Abdullateef Muibudeen"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679044893,"creation_date":1679044893,"answer_id":75765768,"question_id":74948712,"body_markdown":"Adding to @Tonykay&#39;s answer, you can save your images/media files to resources like Google cloud storage or S3, you can then persist the URL into your database.","title":"How to fixed error 500 in postman from a post request?","body":"<p>Adding to @Tonykay's answer, you can save your images/media files to resources like Google cloud storage or S3, you can then persist the URL into your database.</p>\n"}],"owner":{"account_id":27275195,"reputation":1,"user_id":20795925,"display_name":"Practice Tech"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":444,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1679044893,"creation_date":1672301744,"question_id":74948712,"body_markdown":"I wonder if anyone got an insights regarding this error I got from postman below:\r\n\r\n```\r\n{\r\n    &quot;timestamp&quot;: &quot;2022-12-29T07:59:00.313+0000&quot;,\r\n    &quot;status&quot;: 500,\r\n    &quot;error&quot;: &quot;Internal Server Error&quot;,\r\n    &quot;message&quot;: &quot;could not execute statement; SQL [n/a]; nested exception is org.hibernate.exception.SQLGrammarException: could not execute statement&quot;,\r\n    &quot;path&quot;: &quot;/v1/personal/add&quot;\r\n}\r\n```\r\n\r\nHere is My Controller Class:\r\n\r\nPersonalController.java\r\n\r\n```\r\n@PostMapping(&quot;/add&quot;)\r\npublic ResponseEntity &lt;PersonalResponseDto&gt; addPersonalInfo (@RequestBody final PersonalRequestDetailsDto personalRequestDetailsDto){\r\n    PersonalResponseDto dto = personalService.addPersonalInformation(personalRequestDetailsDto);\r\n    return ResponseEntity.ok(dto);\r\n}\r\n```\r\n\r\nHere is My Service Class:\r\n\r\nPersonalService.java\r\n\r\n```\r\npublic PersonalResponseDto addPersonalInformation(PersonalRequestDetailsDto personalRequestDetailsDto){\r\n\r\n       PersonalEntity personalEntity = personalMapper.toEntity(personalRequestDetailsDto);\r\n\r\n       PersonalEntity saveInfo = personalRepository.save(personalEntity);\r\n\r\n       return personalMapper.toDto(saveInfo);\r\n\r\n}\r\n```\r\n\r\nand here is my Entity class:\r\n\r\n```\r\n@Data\r\n@ComponentScan(&quot;personal&quot;)\r\n@NoArgsConstructor\r\n@Table(name = &quot;student_personal_information&quot;)\r\n@Entity\r\npublic class PersonalEntity {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.SEQUENCE)\r\n    @Column(name = &quot;id&quot;, nullable = false)\r\n    private Long id;\r\n\r\n    @Column(name = &quot;lastname&quot;, columnDefinition = &quot;CLOB&quot;)\r\n    private String lastname;\r\n\r\n    @Column(name = &quot;firstname&quot;, columnDefinition = &quot;CLOB&quot;)\r\n    private String firstname;\r\n\r\n    @Column(name = &quot;middleinitial&quot;)\r\n    private String middleinitial;\r\n\r\n    @Column(name = &quot;age&quot;)\r\n    private Integer age;\r\n\r\n    @Column(name = &quot;image&quot;)\r\n    private Byte image;\r\n\r\n}\r\n```\r\n\r\nI&#39;d appreciate any help as to why I&#39;m getting the above error in postman.\r\n\r\nThank you.\r\n\r\nI wanted to add an information that would store to DB but i&#39;m getting an error.\r\n\r\nHere is my Request DTO:\r\n\r\n```\r\n@Data\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\npublic class PersonalRequestDetailsDto implements Serializable {\r\n\r\n\r\n    private static final long serialVersionUID = -7175623352146349491L;\r\n\r\n\r\n    @NotEmpty\r\n    private String lastname;\r\n\r\n    @NotNull\r\n    private String firstname;\r\n\r\n    @NotEmpty\r\n    private String middleinitial;\r\n\r\n    @NotNull\r\n    private Integer age;\r\n\r\n}\r\n```\r\n\r\n\r\nAddendum:\r\nUpon the advice of one commenter here, I learned that the main issue herein is my entity under column image. \r\n\r\nHere is the error I got:\r\n\r\n    column &quot;image&quot; is of type bytea but expression is of type smallint Hint: You will need to rewrite or cast the expression.\r\n\r\nTo ask, what data type exactly should I declare in my entity to address this issue?\r\n","title":"How to fixed error 500 in postman from a post request?","body":"<p>I wonder if anyone got an insights regarding this error I got from postman below:</p>\n<pre><code>{\n    &quot;timestamp&quot;: &quot;2022-12-29T07:59:00.313+0000&quot;,\n    &quot;status&quot;: 500,\n    &quot;error&quot;: &quot;Internal Server Error&quot;,\n    &quot;message&quot;: &quot;could not execute statement; SQL [n/a]; nested exception is org.hibernate.exception.SQLGrammarException: could not execute statement&quot;,\n    &quot;path&quot;: &quot;/v1/personal/add&quot;\n}\n</code></pre>\n<p>Here is My Controller Class:</p>\n<p>PersonalController.java</p>\n<pre><code>@PostMapping(&quot;/add&quot;)\npublic ResponseEntity &lt;PersonalResponseDto&gt; addPersonalInfo (@RequestBody final PersonalRequestDetailsDto personalRequestDetailsDto){\n    PersonalResponseDto dto = personalService.addPersonalInformation(personalRequestDetailsDto);\n    return ResponseEntity.ok(dto);\n}\n</code></pre>\n<p>Here is My Service Class:</p>\n<p>PersonalService.java</p>\n<pre><code>public PersonalResponseDto addPersonalInformation(PersonalRequestDetailsDto personalRequestDetailsDto){\n\n       PersonalEntity personalEntity = personalMapper.toEntity(personalRequestDetailsDto);\n\n       PersonalEntity saveInfo = personalRepository.save(personalEntity);\n\n       return personalMapper.toDto(saveInfo);\n\n}\n</code></pre>\n<p>and here is my Entity class:</p>\n<pre><code>@Data\n@ComponentScan(&quot;personal&quot;)\n@NoArgsConstructor\n@Table(name = &quot;student_personal_information&quot;)\n@Entity\npublic class PersonalEntity {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.SEQUENCE)\n    @Column(name = &quot;id&quot;, nullable = false)\n    private Long id;\n\n    @Column(name = &quot;lastname&quot;, columnDefinition = &quot;CLOB&quot;)\n    private String lastname;\n\n    @Column(name = &quot;firstname&quot;, columnDefinition = &quot;CLOB&quot;)\n    private String firstname;\n\n    @Column(name = &quot;middleinitial&quot;)\n    private String middleinitial;\n\n    @Column(name = &quot;age&quot;)\n    private Integer age;\n\n    @Column(name = &quot;image&quot;)\n    private Byte image;\n\n}\n</code></pre>\n<p>I'd appreciate any help as to why I'm getting the above error in postman.</p>\n<p>Thank you.</p>\n<p>I wanted to add an information that would store to DB but i'm getting an error.</p>\n<p>Here is my Request DTO:</p>\n<pre><code>@Data\n@NoArgsConstructor\n@AllArgsConstructor\npublic class PersonalRequestDetailsDto implements Serializable {\n\n\n    private static final long serialVersionUID = -7175623352146349491L;\n\n\n    @NotEmpty\n    private String lastname;\n\n    @NotNull\n    private String firstname;\n\n    @NotEmpty\n    private String middleinitial;\n\n    @NotNull\n    private Integer age;\n\n}\n</code></pre>\n<p>Addendum:\nUpon the advice of one commenter here, I learned that the main issue herein is my entity under column image.</p>\n<p>Here is the error I got:</p>\n<pre><code>column &quot;image&quot; is of type bytea but expression is of type smallint Hint: You will need to rewrite or cast the expression.\n</code></pre>\n<p>To ask, what data type exactly should I declare in my entity to address this issue?</p>\n"},{"tags":["java","swing"],"comments":[{"owner":{"account_id":405591,"reputation":6670,"user_id":774575,"accept_rate":78,"display_name":"mins"},"score":8,"creation_date":1414611570,"post_id":1097366,"comment_id":41885288,"body_markdown":"[This tutorial from Oracle](http://docs.oracle.com/javase/tutorial/uiswing/components/jcomponent.html#custompaintingapi) states: &quot;Always invoke repaint after revalidate&quot;. No explanation is provided though.","body":"<a href=\"http://docs.oracle.com/javase/tutorial/uiswing/components/jcomponent.html#custompaintingapi\" rel=\"nofollow noreferrer\">This tutorial from Oracle</a> states: &quot;Always invoke repaint after revalidate&quot;. No explanation is provided though."}],"answers":[{"comments":[{"owner":{"account_id":160728,"reputation":983,"user_id":612001,"accept_rate":50,"display_name":"Arttu"},"score":3,"creation_date":1462954322,"post_id":1097544,"comment_id":61849823,"body_markdown":"Could you rationalize why building a new panel is a better solution than using the old one? :)","body":"Could you rationalize why building a new panel is a better solution than using the old one? :)"},{"owner":{"account_id":18399,"reputation":38994,"user_id":42126,"accept_rate":100,"display_name":"kdgregory"},"score":5,"creation_date":1463227199,"post_id":1097544,"comment_id":61982665,"body_markdown":"@Arttu - it&#39;s less work, and therefore less prone to errors.","body":"@Arttu - it&#39;s less work, and therefore less prone to errors."}],"tags":[],"owner":{"account_id":18399,"reputation":38994,"user_id":42126,"accept_rate":100,"display_name":"kdgregory"},"comment_count":2,"down_vote_count":1,"up_vote_count":177,"is_accepted":true,"score":176,"last_activity_date":1679044764,"creation_date":1247053436,"answer_id":1097544,"question_id":1097366,"body_markdown":"You need to call `repaint()` and `revalidate()`. The first one tells Swing that an area of the window is dirty (which is necessary to erase the image of the old children removed by `removeAll()`); the second one tells the layout manager to recalculate the layout (which is necessary when adding components). This should cause *children* of the panel to repaint, but may not cause the panel itself to do so (see [this][1] for the list of repaint triggers).\r\n\r\nOn a more general note: rather than reusing the original panel, I&#39;d recommend building a new panel and swapping them at the parent.\r\n\r\n\r\n  [1]: http://www.oracle.com/technetwork/java/painting-140037.html#triggers","title":"Java Swing revalidate() vs repaint()","body":"<p>You need to call <code>repaint()</code> and <code>revalidate()</code>. The first one tells Swing that an area of the window is dirty (which is necessary to erase the image of the old children removed by <code>removeAll()</code>); the second one tells the layout manager to recalculate the layout (which is necessary when adding components). This should cause <em>children</em> of the panel to repaint, but may not cause the panel itself to do so (see <a href=\"http://www.oracle.com/technetwork/java/painting-140037.html#triggers\" rel=\"nofollow noreferrer\">this</a> for the list of repaint triggers).</p>\n<p>On a more general note: rather than reusing the original panel, I'd recommend building a new panel and swapping them at the parent.</p>\n"},{"tags":[],"owner":{"account_id":36166,"reputation":38849,"user_id":103043,"display_name":"akf"},"comment_count":0,"down_vote_count":0,"up_vote_count":63,"is_accepted":false,"score":63,"last_activity_date":1247053491,"creation_date":1247053491,"answer_id":1097549,"question_id":1097366,"body_markdown":"`revalidate` is called on a container once new components are added or old ones removed.  this call is an instruction to tell the layout manager to reset based on the new component list.  `revalidate` will trigger a call to repaint what the component thinks are &#39;dirty regions.&#39;  Obviously not all of the regions on your `JPanel` are considered dirty by the `RepaintManager`.\r\n\r\n `repaint` is used to tell a component to repaint itself.  It is often the case that you need to call this in order to cleanup conditions such as yours.","title":"Java Swing revalidate() vs repaint()","body":"<p><code>revalidate</code> is called on a container once new components are added or old ones removed.  this call is an instruction to tell the layout manager to reset based on the new component list.  <code>revalidate</code> will trigger a call to repaint what the component thinks are 'dirty regions.'  Obviously not all of the regions on your <code>JPanel</code> are considered dirty by the <code>RepaintManager</code>.</p>\n\n<p><code>repaint</code> is used to tell a component to repaint itself.  It is often the case that you need to call this in order to cleanup conditions such as yours.</p>\n"},{"tags":[],"owner":{"account_id":4402,"reputation":3143,"user_id":6591,"display_name":"Noel Grandin"},"comment_count":0,"down_vote_count":4,"up_vote_count":95,"is_accepted":false,"score":91,"last_activity_date":1265805987,"creation_date":1265805987,"answer_id":2236813,"question_id":1097366,"body_markdown":"Any time you do a remove() or a removeAll(), you should call\r\n\r\n      validate();\r\n      repaint();\r\n\r\nafter you have completed add()&#39;ing the new components.\r\n\r\nCalling validate() or revalidate() is mandatory when you do a remove() - see the relevant javadocs.\r\n\r\nMy own testing indicates that repaint() is also necessary. I&#39;m not sure exactly why.\r\n","title":"Java Swing revalidate() vs repaint()","body":"<p>Any time you do a remove() or a removeAll(), you should call</p>\n\n<pre><code>  validate();\n  repaint();\n</code></pre>\n\n<p>after you have completed add()'ing the new components.</p>\n\n<p>Calling validate() or revalidate() is mandatory when you do a remove() - see the relevant javadocs.</p>\n\n<p>My own testing indicates that repaint() is also necessary. I'm not sure exactly why.</p>\n"},{"tags":[],"owner":{"account_id":8340689,"reputation":75,"user_id":6266094,"accept_rate":100,"display_name":"Som Adhikari"},"comment_count":0,"down_vote_count":6,"up_vote_count":2,"is_accepted":false,"score":-4,"last_activity_date":1467714915,"creation_date":1467714915,"answer_id":38201232,"question_id":1097366,"body_markdown":"yes you need to call \r\n    repaint();\r\n    revalidate();\r\nwhen you call removeAll() then you have to call repaint() and revalidate()","title":"Java Swing revalidate() vs repaint()","body":"<p>yes you need to call \n    repaint();\n    revalidate();\nwhen you call removeAll() then you have to call repaint() and revalidate()</p>\n"},{"tags":[],"owner":{"account_id":7108780,"reputation":767,"user_id":5437524,"accept_rate":50,"display_name":"Antony Ng"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1520537113,"creation_date":1502897468,"answer_id":45717640,"question_id":1097366,"body_markdown":"`revalidate()` just request to layout the container, when you experienced simply call `revalidate()` works, it could be caused by the updating of child components bounds triggers the `repaint()` when their bounds are changed during the re-layout. In the case you mentioned, only component removed and no component bounds are changed, this case no `repaint()` is **&quot;accidentally&quot;** triggered.","title":"Java Swing revalidate() vs repaint()","body":"<p><code>revalidate()</code> just request to layout the container, when you experienced simply call <code>revalidate()</code> works, it could be caused by the updating of child components bounds triggers the <code>repaint()</code> when their bounds are changed during the re-layout. In the case you mentioned, only component removed and no component bounds are changed, this case no <code>repaint()</code> is <strong>\"accidentally\"</strong> triggered.</p>\n"}],"owner":{"account_id":41550,"reputation":13392,"user_id":120820,"accept_rate":100,"display_name":"William"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":253270,"favorite_count":0,"down_vote_count":0,"up_vote_count":231,"accepted_answer_id":1097544,"answer_count":5,"score":231,"last_activity_date":1679044764,"creation_date":1247050711,"question_id":1097366,"body_markdown":"I&#39;m putting together a Swing application where I often want to replace the contents of a JPanel. To do this, I&#39;m calling `removeAll()`, then adding my new content, then calling `revalidate()`.\r\n\r\nHowever I&#39;m finding that the old content is still actually visible (though obscured by the the new content). If I add a call to `repaint()` in addition to `revalidate()`, it works as expected.\r\n\r\nI&#39;m sure on other occasions I&#39;ve experienced that just calling `revalidate()` is enough.\r\n\r\nSo basically my question is - should I need to call both functions and if not, when should I call each of them?","title":"Java Swing revalidate() vs repaint()","body":"<p>I'm putting together a Swing application where I often want to replace the contents of a JPanel. To do this, I'm calling <code>removeAll()</code>, then adding my new content, then calling <code>revalidate()</code>.</p>\n\n<p>However I'm finding that the old content is still actually visible (though obscured by the the new content). If I add a call to <code>repaint()</code> in addition to <code>revalidate()</code>, it works as expected.</p>\n\n<p>I'm sure on other occasions I've experienced that just calling <code>revalidate()</code> is enough.</p>\n\n<p>So basically my question is - should I need to call both functions and if not, when should I call each of them?</p>\n"},{"tags":["java","maven","git-bash","rpm"],"comments":[{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1580821495,"post_id":60057976,"comment_id":106217270,"body_markdown":"Without more details on what you&#39;re building, we can&#39;t really help you. It sounds like the Maven build you&#39;re running contains Linux-specific parts (RPM is a Linux package manager), so it won&#39;t run on MacOS.","body":"Without more details on what you&#39;re building, we can&#39;t really help you. It sounds like the Maven build you&#39;re running contains Linux-specific parts (RPM is a Linux package manager), so it won&#39;t run on MacOS."},{"owner":{"account_id":12900360,"reputation":5,"user_id":9329414,"display_name":"TZR"},"score":0,"creation_date":1580821734,"post_id":60057976,"comment_id":106217393,"body_markdown":"@mark Yes, there is som Linux specific parts. So there is not any options to fix this?","body":"@mark Yes, there is som Linux specific parts. So there is not any options to fix this?"},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1580822187,"post_id":60057976,"comment_id":106217647,"body_markdown":"That depends, show us the POM and explain to us what the build is supposed to do, maybe a solution is available.","body":"That depends, show us the POM and explain to us what the build is supposed to do, maybe a solution is available."}],"answers":[{"tags":[],"owner":{"account_id":298886,"reputation":40480,"user_id":605153,"accept_rate":67,"display_name":"Mark Bramnik"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1580821835,"creation_date":1580821835,"answer_id":60058170,"question_id":60057976,"body_markdown":"`rpmbuild` is a Red Hat Linux family specific tool for building RPMs - packages of applications.\r\n\r\nIt looks like during the build process you have maven plugin that calls thos `rpmbuild` tool that is obviously is not present on Mac.\r\n\r\nNow, you can use maven profiles by os so that this plugin won&#39;t be invoked at all on macos.\r\n\r\n~~~\r\n&lt;profiles&gt;\r\n  &lt;profile&gt;\r\n    &lt;activation&gt;\r\n      &lt;os&gt;\r\n        &lt;family&gt;linux&lt;/family&gt;\r\n      &lt;/os&gt;\r\n    &lt;/activation&gt;\r\n    &lt;build&gt;\r\n      &lt;plugins&gt;\r\n        &lt;plugin&gt;\r\n          ...  &lt;!-- here comes your rpm plugin --&gt; \r\n        &lt;/plugin&gt;\r\n      &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n    ...\r\n  &lt;/profile&gt;\r\n&lt;/profiles&gt;\r\n~~~\r\n\r\nYou might also be required to enclose some other plugins that maybe use the RPM generated during this step... It really depends on your project, hopefully it won&#39;t be an obstacle to development process of the project (I assume that you&#39;re trying to compile stuff, run test, and do some development tasks)","title":"RPM build executable &#39;/usr/bin/rpmbuild&#39; not found on this system (mac)","body":"<p><code>rpmbuild</code> is a Red Hat Linux family specific tool for building RPMs - packages of applications.</p>\n\n<p>It looks like during the build process you have maven plugin that calls thos <code>rpmbuild</code> tool that is obviously is not present on Mac.</p>\n\n<p>Now, you can use maven profiles by os so that this plugin won't be invoked at all on macos.</p>\n\n<pre><code>&lt;profiles&gt;\n  &lt;profile&gt;\n    &lt;activation&gt;\n      &lt;os&gt;\n        &lt;family&gt;linux&lt;/family&gt;\n      &lt;/os&gt;\n    &lt;/activation&gt;\n    &lt;build&gt;\n      &lt;plugins&gt;\n        &lt;plugin&gt;\n          ...  &lt;!-- here comes your rpm plugin --&gt; \n        &lt;/plugin&gt;\n      &lt;/plugins&gt;\n    &lt;/build&gt;\n    ...\n  &lt;/profile&gt;\n&lt;/profiles&gt;\n</code></pre>\n\n<p>You might also be required to enclose some other plugins that maybe use the RPM generated during this step... It really depends on your project, hopefully it won't be an obstacle to development process of the project (I assume that you're trying to compile stuff, run test, and do some development tasks)</p>\n"},{"tags":[],"owner":{"account_id":13542903,"reputation":61,"user_id":9770111,"display_name":"Neha Tripathi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679044713,"creation_date":1679044713,"answer_id":75765740,"question_id":60057976,"body_markdown":"You need to install rpm on your Mac system for this to work. \r\n\r\nRun the below command in the terminal:\r\n\r\n     brew install rpm \r\n\r\nThis will install the rpmbuild for your MacOS. \r\nAlthough the build will still fail when running from IntelliJ [It is for me as this will install rpmbuild in /usr/local/bin and not in /usr/local].\r\n\r\nHowever, you can then proceed to run the maven command from the terminal [IntelliJ, gitbash or otherwise]\r\n","title":"RPM build executable &#39;/usr/bin/rpmbuild&#39; not found on this system (mac)","body":"<p>You need to install rpm on your Mac system for this to work.</p>\n<p>Run the below command in the terminal:</p>\n<pre><code> brew install rpm \n</code></pre>\n<p>This will install the rpmbuild for your MacOS.\nAlthough the build will still fail when running from IntelliJ [It is for me as this will install rpmbuild in /usr/local/bin and not in /usr/local].</p>\n<p>However, you can then proceed to run the maven command from the terminal [IntelliJ, gitbash or otherwise]</p>\n"}],"owner":{"account_id":12900360,"reputation":5,"user_id":9329414,"display_name":"TZR"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1319,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1679044713,"creation_date":1580821085,"question_id":60057976,"body_markdown":"Im trying to install maven dependencies through the command &#39;mvn clean install&#39; in gitbash. I get this error:\r\n\r\n[Error message][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/pmpyd.png\r\n\r\nIs anyone familiar with rpm on mac? I have tried to install rpm through homebrew, but it doesn&#39;t seem to fix the problem. ","title":"RPM build executable &#39;/usr/bin/rpmbuild&#39; not found on this system (mac)","body":"<p>Im trying to install maven dependencies through the command 'mvn clean install' in gitbash. I get this error:</p>\n\n<p><a href=\"https://i.stack.imgur.com/pmpyd.png\" rel=\"nofollow noreferrer\">Error message</a></p>\n\n<p>Is anyone familiar with rpm on mac? I have tried to install rpm through homebrew, but it doesn't seem to fix the problem. </p>\n"},{"tags":["java","wildfly","derby","jcr","jackrabbit"],"comments":[{"owner":{"account_id":65826,"reputation":16198,"user_id":193453,"display_name":"Bryan Pendleton"},"score":0,"creation_date":1679183294,"post_id":75765606,"comment_id":133676286,"body_markdown":"When it says &quot;see the next exception for details&quot;, do this: https://cwiki.apache.org/confluence/display/DERBY/UnwindExceptionChain","body":"When it says &quot;see the next exception for details&quot;, do this: <a href=\"https://cwiki.apache.org/confluence/display/DERBY/UnwindExceptionChain\" rel=\"nofollow noreferrer\">cwiki.apache.org/confluence/display/DERBY/UnwindExceptionCha&zwnj;&#8203;in</a>"}],"owner":{"account_id":10422812,"reputation":1,"user_id":12123710,"display_name":"Elias"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679043914,"creation_date":1679043914,"question_id":75765606,"body_markdown":"I want to upgrade an old Jackrabbit repo (2.2.5 version on jBoss 5.1.0).\r\nA few years ago (2018) I had done a test and was able to run this repo directly on the standalone version at the time.\r\nBut here, with Wildly it seems that Derby is the problem.\r\nHe is used as a PersistenceManager.\r\n\r\nLogs:\r\n\r\n\r\n```\r\n2023-03-16 09:30:01,749 ERROR [stderr] (MSC service thread 1-2) Thu Mar 16 09:30:01 CET 2023:\r\n2023-03-16 09:30:01,749 ERROR [stderr] (MSC service thread 1-2) Shutting down instance a816c00e-0186-e98a-3096-000004cb4670 on database directory /var/jcr/JCR/version/db with class loader ModuleClassLoader for Module &quot;deployment.jackrabbit-jca-2.21.14.rar&quot; from Service Module Loader \r\n2023-03-16 09:30:01,774 ERROR [stderr] (MSC service thread 1-2) Thu Mar 16 09:30:01 CET 2023 Thread[MSC service thread 1-2,5,main] Cleanup action starting\r\n2023-03-16 09:30:01,774 ERROR [stderr] (MSC service thread 1-2) java.sql.SQLException: Failed to start database &#39;/var/jcr/JCR/version/db&#39; with class loader ModuleClassLoader for Module &quot;deployment.jackrabbit-jca-2.21.14.rar&quot; from Service Module Loader, see the next exception for details.\r\n2023-03-16 09:30:01,775 ERROR [stderr] (MSC service thread 1-2)         at deployment.jackrabbit-jca-2.21.14.rar//org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(Unknown Source)\r\n2023-03-16 09:30:01,775 ERROR [stderr] (MSC service thread 1-2)         at deployment.jackrabbit-jca-2.21.14.rar//org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(Unknown Source)\r\n2023-03-16 09:30:01,775 ERROR [stderr] (MSC service thread 1-2)         at deployment.jackrabbit-jca-2.21.14.rar//org.apache.derby.impl.jdbc.Util.seeNextException(Unknown Source)\r\n2023-03-16 09:30:01,775 ERROR [stderr] (MSC service thread 1-2)         at deployment.jackrabbit-jca-2.21.14.rar//org.apache.derby.impl.jdbc.EmbedConnection.bootDatabase(Unknown Source)\r\n2023-03-16 09:30:01,775 ERROR [stderr] (MSC service thread 1-2)         at deployment.jackrabbit-jca-2.21.14.rar//org.apache.derby.impl.jdbc.EmbedConnection.&lt;init&gt;(Unknown Source)\r\n2023-03-16 09:30:01,775 ERROR [stderr] (MSC service thread 1-2)         at deployment.jackrabbit-jca-2.21.14.rar//org.apache.derby.jdbc.InternalDriver$1.run(Unknown Source)\r\n2023-03-16 09:30:01,775 ERROR [stderr] (MSC service thread 1-2)         at deployment.jackrabbit-jca-2.21.14.rar//org.apache.derby.jdbc.InternalDriver$1.run(Unknown Source)\r\n2023-03-16 09:30:01,775 ERROR [stderr] (MSC service thread 1-2)         at java.base/java.security.AccessController.doPrivileged(AccessController.java:569)\r\n2023-03-16 09:30:01,776 ERROR [stderr] (MSC service thread 1-2)         at deployment.jackrabbit-jca-2.21.14.rar//org.apache.derby.jdbc.InternalDriver.getNewEmbedConnection(Unknown Source)\r\n2023-03-16 09:30:01,776 ERROR [stderr] (MSC service thread 1-2)         at deployment.jackrabbit-jca-2.21.14.rar//org.apache.derby.jdbc.InternalDriver.connect(Unknown Source)\r\n2023-03-16 09:30:01,776 ERROR [stderr] (MSC service thread 1-2)         at deployment.jackrabbit-jca-2.21.14.rar//org.apache.derby.jdbc.InternalDriver.connect(Unknown Source)\r\n2023-03-16 09:30:01,776 ERROR [stderr] (MSC service thread 1-2)         at deployment.jackrabbit-jca-2.21.14.rar//org.apache.derby.jdbc.AutoloadedDriver.connect(Unknown Source)\r\n```\r\n\r\nVersionning section of my repository.xml\r\n\r\n    &lt;Versioning rootPath=&quot;${rep.home}/version&quot;&gt;\r\n\r\n        &lt;FileSystem class=&quot;org.apache.jackrabbit.core.fs.local.LocalFileSystem&quot;&gt;\r\n            &lt;param name=&quot;path&quot; value=&quot;${rep.home}/version&quot; /&gt;\r\n        &lt;/FileSystem&gt;\r\n\r\n\r\n        &lt;PersistenceManager class=&quot;org.apache.jackrabbit.core.persistence.pool.DerbyPersistenceManager&quot;&gt;\r\n          &lt;param name=&quot;url&quot; value=&quot;jdbc:derby:${rep.home}/version/db;create=true&quot;/&gt;\r\n          &lt;param name=&quot;schemaObjectPrefix&quot; value=&quot;version_&quot;/&gt;\r\n        &lt;/PersistenceManager&gt;\r\n    &lt;/Versioning&gt;\r\n\r\nConcerning the Derby log file I have an error:\r\njava.io.FileNotFoundException: derby.log (Permission denied)\r\nI couldn&#39;t find the path in the documentation or in the configuration and I couldn&#39;t intercept the log file with lsof.\r\n\r\nI thought it was a JDBC driver problem but it&#39;s the built-in drivers.\r\nI also thought about the version of the DB but in soft upgrade there is nothing special to do and it should be able to open it and preserve the compatibility with old versions of Derby.\r\n\r\n(At first I had a permission error on the files in &quot;/var/jcr/JCR/version/db&quot; but it is fixed.\r\nI tried several versions of Jackrabbit but without success.)\r\n\r\nThanks a lot for your help","title":"Apache Derby (10.14.2.0) Exception with Jackrabbit_JCA 2.21.14 and Wildfly 26.1.2","body":"<p>I want to upgrade an old Jackrabbit repo (2.2.5 version on jBoss 5.1.0).\nA few years ago (2018) I had done a test and was able to run this repo directly on the standalone version at the time.\nBut here, with Wildly it seems that Derby is the problem.\nHe is used as a PersistenceManager.</p>\n<p>Logs:</p>\n<pre><code>2023-03-16 09:30:01,749 ERROR [stderr] (MSC service thread 1-2) Thu Mar 16 09:30:01 CET 2023:\n2023-03-16 09:30:01,749 ERROR [stderr] (MSC service thread 1-2) Shutting down instance a816c00e-0186-e98a-3096-000004cb4670 on database directory /var/jcr/JCR/version/db with class loader ModuleClassLoader for Module &quot;deployment.jackrabbit-jca-2.21.14.rar&quot; from Service Module Loader \n2023-03-16 09:30:01,774 ERROR [stderr] (MSC service thread 1-2) Thu Mar 16 09:30:01 CET 2023 Thread[MSC service thread 1-2,5,main] Cleanup action starting\n2023-03-16 09:30:01,774 ERROR [stderr] (MSC service thread 1-2) java.sql.SQLException: Failed to start database '/var/jcr/JCR/version/db' with class loader ModuleClassLoader for Module &quot;deployment.jackrabbit-jca-2.21.14.rar&quot; from Service Module Loader, see the next exception for details.\n2023-03-16 09:30:01,775 ERROR [stderr] (MSC service thread 1-2)         at deployment.jackrabbit-jca-2.21.14.rar//org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(Unknown Source)\n2023-03-16 09:30:01,775 ERROR [stderr] (MSC service thread 1-2)         at deployment.jackrabbit-jca-2.21.14.rar//org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(Unknown Source)\n2023-03-16 09:30:01,775 ERROR [stderr] (MSC service thread 1-2)         at deployment.jackrabbit-jca-2.21.14.rar//org.apache.derby.impl.jdbc.Util.seeNextException(Unknown Source)\n2023-03-16 09:30:01,775 ERROR [stderr] (MSC service thread 1-2)         at deployment.jackrabbit-jca-2.21.14.rar//org.apache.derby.impl.jdbc.EmbedConnection.bootDatabase(Unknown Source)\n2023-03-16 09:30:01,775 ERROR [stderr] (MSC service thread 1-2)         at deployment.jackrabbit-jca-2.21.14.rar//org.apache.derby.impl.jdbc.EmbedConnection.&lt;init&gt;(Unknown Source)\n2023-03-16 09:30:01,775 ERROR [stderr] (MSC service thread 1-2)         at deployment.jackrabbit-jca-2.21.14.rar//org.apache.derby.jdbc.InternalDriver$1.run(Unknown Source)\n2023-03-16 09:30:01,775 ERROR [stderr] (MSC service thread 1-2)         at deployment.jackrabbit-jca-2.21.14.rar//org.apache.derby.jdbc.InternalDriver$1.run(Unknown Source)\n2023-03-16 09:30:01,775 ERROR [stderr] (MSC service thread 1-2)         at java.base/java.security.AccessController.doPrivileged(AccessController.java:569)\n2023-03-16 09:30:01,776 ERROR [stderr] (MSC service thread 1-2)         at deployment.jackrabbit-jca-2.21.14.rar//org.apache.derby.jdbc.InternalDriver.getNewEmbedConnection(Unknown Source)\n2023-03-16 09:30:01,776 ERROR [stderr] (MSC service thread 1-2)         at deployment.jackrabbit-jca-2.21.14.rar//org.apache.derby.jdbc.InternalDriver.connect(Unknown Source)\n2023-03-16 09:30:01,776 ERROR [stderr] (MSC service thread 1-2)         at deployment.jackrabbit-jca-2.21.14.rar//org.apache.derby.jdbc.InternalDriver.connect(Unknown Source)\n2023-03-16 09:30:01,776 ERROR [stderr] (MSC service thread 1-2)         at deployment.jackrabbit-jca-2.21.14.rar//org.apache.derby.jdbc.AutoloadedDriver.connect(Unknown Source)\n</code></pre>\n<p>Versionning section of my repository.xml</p>\n<pre><code>&lt;Versioning rootPath=&quot;${rep.home}/version&quot;&gt;\n\n    &lt;FileSystem class=&quot;org.apache.jackrabbit.core.fs.local.LocalFileSystem&quot;&gt;\n        &lt;param name=&quot;path&quot; value=&quot;${rep.home}/version&quot; /&gt;\n    &lt;/FileSystem&gt;\n\n\n    &lt;PersistenceManager class=&quot;org.apache.jackrabbit.core.persistence.pool.DerbyPersistenceManager&quot;&gt;\n      &lt;param name=&quot;url&quot; value=&quot;jdbc:derby:${rep.home}/version/db;create=true&quot;/&gt;\n      &lt;param name=&quot;schemaObjectPrefix&quot; value=&quot;version_&quot;/&gt;\n    &lt;/PersistenceManager&gt;\n&lt;/Versioning&gt;\n</code></pre>\n<p>Concerning the Derby log file I have an error:\njava.io.FileNotFoundException: derby.log (Permission denied)\nI couldn't find the path in the documentation or in the configuration and I couldn't intercept the log file with lsof.</p>\n<p>I thought it was a JDBC driver problem but it's the built-in drivers.\nI also thought about the version of the DB but in soft upgrade there is nothing special to do and it should be able to open it and preserve the compatibility with old versions of Derby.</p>\n<p>(At first I had a permission error on the files in &quot;/var/jcr/JCR/version/db&quot; but it is fixed.\nI tried several versions of Jackrabbit but without success.)</p>\n<p>Thanks a lot for your help</p>\n"},{"tags":["java","spring-boot","tomcat","grails","keycloak"],"answers":[{"tags":[],"owner":{"account_id":2630770,"reputation":550,"user_id":2276776,"display_name":"Hardik"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679043888,"creation_date":1679043888,"answer_id":75765600,"question_id":75720184,"body_markdown":"After searching couple solutions found the fixes for this issue. If anyone facing same as above issue with keylcoak or spring security you can use below code at tomcat level.\r\n\r\n1. Add below code into your Contact.xml file. (Tomcat-&gt;Conf-&gt;Contact.xml)\r\n&lt;!-- REWRITE VALVE --&gt;\r\n    &lt;Valve className=&quot;org.apache.catalina.valves.rewrite.RewriteValve&quot; /&gt;\r\n2. Add rewrite.config file in your WEB-INF folder. Add below code in this config file.\r\n&lt;!-- redirect to the /web/index --&gt;\r\n\r\n&gt; RewriteCond %{REQUEST_URI} ^/$&lt;br&gt;\r\nRewriteRule ^/(.*)$ /web/index\r\n\r\nThis way you can redirect the URL like http://localhost:9090 to HTTP://localhost:9090/web/index\r\n\r\nThanks","title":"Keycloak 19 Not loading client url like &quot;http://localhost:9090/&quot; --&gt; Index.jsp file 404 (ON ROOT Dir of Tomcat)","body":"<p>After searching couple solutions found the fixes for this issue. If anyone facing same as above issue with keylcoak or spring security you can use below code at tomcat level.</p>\n<ol>\n<li>Add below code into your Contact.xml file. (Tomcat-&gt;Conf-&gt;Contact.xml)</li>\n</ol>\n\n<pre><code>&lt;Valve className=&quot;org.apache.catalina.valves.rewrite.RewriteValve&quot; /&gt;\n</code></pre>\n<ol start=\"2\">\n<li>Add rewrite.config file in your WEB-INF folder. Add below code in this config file.</li>\n</ol>\n\n<blockquote>\n<p>RewriteCond %{REQUEST_URI} ^/$<br>\nRewriteRule ^/(.*)$ /web/index</p>\n</blockquote>\n<p>This way you can redirect the URL like http://localhost:9090 to HTTP://localhost:9090/web/index</p>\n<p>Thanks</p>\n"}],"owner":{"account_id":2630770,"reputation":550,"user_id":2276776,"display_name":"Hardik"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":272,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1679043888,"creation_date":1678700612,"question_id":75720184,"body_markdown":"I am facing one issue with Keycloak Security. I have developed one Grails application and Integrated Keycloak for Authentication. I am facing one problem when I deployed the war file as ROOT dir of Tomcat like ROOT.war. It should open when I enter the URL &quot;HTTP://localhost:9090/&quot; in the browser.\r\n\r\nConfiguration did as below:\r\nKeycloak admin URL: HTTP://localhost:8080/\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/xdF8d.png\r\n\r\n\r\n\r\nWhen I entered in browser like HTTP://localhost:9090/\r\nIt is throwing 404 and showing a blank white page in Browser. But when I entered HTTP://localhost:9090/web --&gt; It is loading the page. I have already set index.gsp in root directory. but it is not loading. \r\n\r\nNote: If I remove the keycloak dependency and load the application then It is working fine.\r\n\r\nPlease help if anyone has fixed this type of issue.\r\n\r\nThanks,\r\nHardik","title":"Keycloak 19 Not loading client url like &quot;http://localhost:9090/&quot; --&gt; Index.jsp file 404 (ON ROOT Dir of Tomcat)","body":"<p>I am facing one issue with Keycloak Security. I have developed one Grails application and Integrated Keycloak for Authentication. I am facing one problem when I deployed the war file as ROOT dir of Tomcat like ROOT.war. It should open when I enter the URL &quot;HTTP://localhost:9090/&quot; in the browser.</p>\n<p>Configuration did as below:\nKeycloak admin URL: HTTP://localhost:8080/\n<a href=\"https://i.stack.imgur.com/xdF8d.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xdF8d.png\" alt=\"enter image description here\" /></a></p>\n<p>When I entered in browser like HTTP://localhost:9090/\nIt is throwing 404 and showing a blank white page in Browser. But when I entered HTTP://localhost:9090/web --&gt; It is loading the page. I have already set index.gsp in root directory. but it is not loading.</p>\n<p>Note: If I remove the keycloak dependency and load the application then It is working fine.</p>\n<p>Please help if anyone has fixed this type of issue.</p>\n<p>Thanks,\nHardik</p>\n"},{"tags":["java","android","kotlin"],"comments":[{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":4,"creation_date":1678437058,"post_id":75693746,"comment_id":133535627,"body_markdown":"How would you expect all those to fit on the screen, next to each other? I suspect there wouldn&#39;t even be room for &quot;Sun Mon Tue Wed Thu Fri Sat&quot; without it being really squashed on most devices.","body":"How would you expect all those to fit on the screen, next to each other? I suspect there wouldn&#39;t even be room for &quot;Sun Mon Tue Wed Thu Fri Sat&quot; without it being really squashed on most devices."},{"owner":{"account_id":39846,"reputation":991173,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":1,"creation_date":1678451501,"post_id":75693746,"comment_id":133539560,"body_markdown":"You may be happier with [another date picker library](https://android-arsenal.com/tag/27?sort=created).","body":"You may be happier with <a href=\"https://android-arsenal.com/tag/27?sort=created\" rel=\"nofollow noreferrer\">another date picker library</a>."}],"answers":[{"tags":[],"owner":{"account_id":4885279,"reputation":51,"user_id":3937935,"display_name":"Ali.M"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679043546,"creation_date":1678967731,"answer_id":75755925,"question_id":75693746,"body_markdown":"Update 17 March\r\n-\r\nWell, as one of the users gave negative vote for the answer, I did some research and checked documentation, I found the following solution. \r\nFirst you make an instance of *DatePickerDialog*\r\n\r\n    DatePickerDialog datePickerDialog = new DatePickerDialog(\r\n        this,\r\n        new DatePickerDialog.OnDateSetListener() {\r\n            @Override\r\n            public void onDateSet(DatePicker datePicker, int year, int month, int dayOfMonth) {\r\n                // Handle the selected date\r\n            }\r\n        },\r\n        year, month, dayOfMonth\r\n    );\r\n\r\nThen get the *DatePicker* instance.\r\n\r\n    DatePicker datePicker = datePickerDialog.getDatePicker();\r\n\r\nNow in this part you have to create your date format \r\n\r\n    SimpleDateFormat dateFormat = new SimpleDateFormat(&quot;EEEE, MMMM dd, yyyy&quot;, Locale.getDefault());\r\n\r\nNote that EEEE stands for the week full name. Check the documentation [here][1].\r\n\r\nNow apply the pattern to the *DatePicker* and show the dialog.\r\n\r\ndatePicker.setDateFormatString(dateFormat.toPattern());\r\ndatePickerDialog.show();\r\n\r\n-----------------------------\r\nOld Answer\r\n\r\nI&#39;m not sure about the solution. I&#39;m writing from mind. Try to set *Locale* it may work.\r\nAfter creation of your datepicker, create a new *Locale* and then apply it to your datepicker.\r\nLooks like:\r\n\r\n    Locale locale = new Locale(&quot;en&quot;, &quot;US&quot;);\r\n    datePicker.setLocale(locale);\r\n\r\n\r\n  [1]: https://developer.android.com/reference/android/icu/text/SimpleDateFormat\r\n","title":"Android DatePicker show full day names instead of short names","body":"<h2>Update 17 March</h2>\n<p>Well, as one of the users gave negative vote for the answer, I did some research and checked documentation, I found the following solution.\nFirst you make an instance of <em>DatePickerDialog</em></p>\n<pre><code>DatePickerDialog datePickerDialog = new DatePickerDialog(\n    this,\n    new DatePickerDialog.OnDateSetListener() {\n        @Override\n        public void onDateSet(DatePicker datePicker, int year, int month, int dayOfMonth) {\n            // Handle the selected date\n        }\n    },\n    year, month, dayOfMonth\n);\n</code></pre>\n<p>Then get the <em>DatePicker</em> instance.</p>\n<pre><code>DatePicker datePicker = datePickerDialog.getDatePicker();\n</code></pre>\n<p>Now in this part you have to create your date format</p>\n<pre><code>SimpleDateFormat dateFormat = new SimpleDateFormat(&quot;EEEE, MMMM dd, yyyy&quot;, Locale.getDefault());\n</code></pre>\n<p>Note that EEEE stands for the week full name. Check the documentation <a href=\"https://developer.android.com/reference/android/icu/text/SimpleDateFormat\" rel=\"nofollow noreferrer\">here</a>.</p>\n<p>Now apply the pattern to the <em>DatePicker</em> and show the dialog.</p>\n<p>datePicker.setDateFormatString(dateFormat.toPattern());\ndatePickerDialog.show();</p>\n<hr />\n<p>Old Answer</p>\n<p>I'm not sure about the solution. I'm writing from mind. Try to set <em>Locale</em> it may work.\nAfter creation of your datepicker, create a new <em>Locale</em> and then apply it to your datepicker.\nLooks like:</p>\n<pre><code>Locale locale = new Locale(&quot;en&quot;, &quot;US&quot;);\ndatePicker.setLocale(locale);\n</code></pre>\n"}],"owner":{"account_id":12725337,"reputation":351,"user_id":9244109,"display_name":"Nikunj Ramani"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1679043546,"creation_date":1678436803,"question_id":75693746,"body_markdown":"Is it possible to show full week day names, instead of the short ones? When showing the calendar.\r\n\r\nI mean instead of:\r\n\r\nS  M  T  W  T  F  S\r\n\r\nShow these:\r\n\r\nSunday  Monday  Tuesday  Wednesday  Thursday  Friday  Santurday\r\n\r\n[![enter image description here][1]][1]\r\n\r\ni have look into documentation but not able to find any suitable methods to update week name\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/3qhyx.png","title":"Android DatePicker show full day names instead of short names","body":"<p>Is it possible to show full week day names, instead of the short ones? When showing the calendar.</p>\n<p>I mean instead of:</p>\n<p>S  M  T  W  T  F  S</p>\n<p>Show these:</p>\n<p>Sunday  Monday  Tuesday  Wednesday  Thursday  Friday  Santurday</p>\n<p><a href=\"https://i.stack.imgur.com/3qhyx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3qhyx.png\" alt=\"enter image description here\" /></a></p>\n<p>i have look into documentation but not able to find any suitable methods to update week name</p>\n"},{"tags":["java","functional-programming","java-8"],"comments":[{"owner":{"account_id":1101161,"reputation":119804,"user_id":1093528,"accept_rate":65,"display_name":"fge"},"score":0,"creation_date":1414778969,"post_id":26679628,"comment_id":41960560,"body_markdown":"I don&#39;t see how you can chain bifunctions to start with; the result of a bifunction is a single argument, how do you intend to chain it into another one?","body":"I don&#39;t see how you can chain bifunctions to start with; the result of a bifunction is a single argument, how do you intend to chain it into another one?"}],"answers":[{"tags":[],"owner":{"account_id":4860165,"reputation":27613,"user_id":3920048,"display_name":"Misha"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1414784250,"creation_date":1414784250,"answer_id":26682203,"question_id":26679628,"body_markdown":"Where should the WfParams come from for the invocation of `wait`?  If you mean to reuse the same WfParams for all the functions calls, just put WfParams as a class member variable instead of passing it to each function.  \r\n\r\n\tclass Wf {\r\n\t\tprivate final WfParams params;\r\n\r\n\t\tpublic Wf(WfParams params) {\r\n\t\t\tthis.params = params;\r\n\t\t}\r\n\t\t\r\n\t\tUnaryOperator&lt;RemoteWebDriver&gt; init = this::init;\r\n\t\tUnaryOperator&lt;RemoteWebDriver&gt; wait = this::wait;\r\n\t\t\r\n\t\tFunction&lt;RemoteWebDriver,RemoteWebDriver&gt; chain = init.andThen(wait);\r\n\t\t\r\n\t\tRemoteWebDriver init(RemoteWebDriver d) {\r\n\t\t\t// can use WfParams here\r\n\t\t\treturn d;\r\n\t\t}\r\n\t\t\r\n\t\tRemoteWebDriver wait(RemoteWebDriver d) {\r\n\t\t\t// can use WfParams here\t\t\t\r\n\t\t\treturn d;\r\n\t\t}\r\n\t\t\r\n\t\tprivate void start() {\r\n\t\t\tchain.apply(null);\r\n\t\t}\r\n\t\t\r\n\t\tpublic static void main(String[] args) {\r\n\t\t\tnew Wf(new WfParams()).start();\r\n\t\t}\t\r\n\t}\r\n\r\nIs there a particular reason you want to use function chaining like that?  Why not simply call `init(...); wait(...);` from `start()`?","title":"How to chain BiFunctions?","body":"<p>Where should the WfParams come from for the invocation of <code>wait</code>?  If you mean to reuse the same WfParams for all the functions calls, just put WfParams as a class member variable instead of passing it to each function.  </p>\n\n<pre><code>class Wf {\n    private final WfParams params;\n\n    public Wf(WfParams params) {\n        this.params = params;\n    }\n\n    UnaryOperator&lt;RemoteWebDriver&gt; init = this::init;\n    UnaryOperator&lt;RemoteWebDriver&gt; wait = this::wait;\n\n    Function&lt;RemoteWebDriver,RemoteWebDriver&gt; chain = init.andThen(wait);\n\n    RemoteWebDriver init(RemoteWebDriver d) {\n        // can use WfParams here\n        return d;\n    }\n\n    RemoteWebDriver wait(RemoteWebDriver d) {\n        // can use WfParams here            \n        return d;\n    }\n\n    private void start() {\n        chain.apply(null);\n    }\n\n    public static void main(String[] args) {\n        new Wf(new WfParams()).start();\n    }   \n}\n</code></pre>\n\n<p>Is there a particular reason you want to use function chaining like that?  Why not simply call <code>init(...); wait(...);</code> from <code>start()</code>?</p>\n"},{"tags":[],"owner":{"account_id":1548079,"reputation":128727,"user_id":1441122,"display_name":"Stuart Marks"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1414790345,"creation_date":1414790345,"answer_id":26683555,"question_id":26679628,"body_markdown":"Chaining of one `Function` to another works naturally because the return value of the first function is passed as the argument to the next function, and that function&#39;s return value is passed as the argument to the subsequent function, and so forth. This doesn&#39;t work naturally with `BiFunction` because they take two arguments. The first argument would be the return value from the previous function, but what would the second argument be? It also explains why `BiFunction` allows chaining with `andThen` to a `Function` instead of to another `BiFunction`.\r\n\r\nThis suggests, however, that it would be possible to chain one `BiFunction` to another if there were some way of providing the value for second argument. This can be done by creating a helper function that stores the value for the second argument in a local variable. Then, a `BiFunction` can be converted into a `Function` by capturing that local variable from the environment and using it as the second argument.\r\n\r\nHere&#39;s what that would look like.\r\n\r\n    BiFunction&lt;RemoteWebDriver, WfParams, RemoteWebDriver&gt; chainWanted = this::chainHelper;\r\n    \r\n    RemoteWebDriver chainHelper(RemoteWebDriver driver, WfParams params) {\r\n        return\r\n            init.andThen(rwd -&gt; wait.apply(rwd, params))\r\n                .apply(driver, params);\r\n    }\r\n\r\n    // ...\r\n\r\n    chainWanted.apply(driver, params);\r\n\r\nThe `chainHelper` method holds the `params` argument for later capture. We call `init.andThen()` in order to do the chaining. But this requires a `Function` whereas `wait` is a `BiFunction`. Instead of using a method reference `this::wait` we use the lambda expression\r\n\r\n    rwd -&gt; wait.apply(rwd, params)\r\n\r\nwhich captures `params` from the lexical environment. This gives a lambda expression that takes a single argument and returns a single value, so it&#39;s now a `Function` that wraps the `wait` which is a `BiFunction`. This is an example of *partial application* or *currying*. Finally, we call the resulting `BiFunction` using `apply()`, passing the original arguments.\r\n","title":"How to chain BiFunctions?","body":"<p>Chaining of one <code>Function</code> to another works naturally because the return value of the first function is passed as the argument to the next function, and that function's return value is passed as the argument to the subsequent function, and so forth. This doesn't work naturally with <code>BiFunction</code> because they take two arguments. The first argument would be the return value from the previous function, but what would the second argument be? It also explains why <code>BiFunction</code> allows chaining with <code>andThen</code> to a <code>Function</code> instead of to another <code>BiFunction</code>.</p>\n\n<p>This suggests, however, that it would be possible to chain one <code>BiFunction</code> to another if there were some way of providing the value for second argument. This can be done by creating a helper function that stores the value for the second argument in a local variable. Then, a <code>BiFunction</code> can be converted into a <code>Function</code> by capturing that local variable from the environment and using it as the second argument.</p>\n\n<p>Here's what that would look like.</p>\n\n<pre><code>BiFunction&lt;RemoteWebDriver, WfParams, RemoteWebDriver&gt; chainWanted = this::chainHelper;\n\nRemoteWebDriver chainHelper(RemoteWebDriver driver, WfParams params) {\n    return\n        init.andThen(rwd -&gt; wait.apply(rwd, params))\n            .apply(driver, params);\n}\n\n// ...\n\nchainWanted.apply(driver, params);\n</code></pre>\n\n<p>The <code>chainHelper</code> method holds the <code>params</code> argument for later capture. We call <code>init.andThen()</code> in order to do the chaining. But this requires a <code>Function</code> whereas <code>wait</code> is a <code>BiFunction</code>. Instead of using a method reference <code>this::wait</code> we use the lambda expression</p>\n\n<pre><code>rwd -&gt; wait.apply(rwd, params)\n</code></pre>\n\n<p>which captures <code>params</code> from the lexical environment. This gives a lambda expression that takes a single argument and returns a single value, so it's now a <code>Function</code> that wraps the <code>wait</code> which is a <code>BiFunction</code>. This is an example of <em>partial application</em> or <em>currying</em>. Finally, we call the resulting <code>BiFunction</code> using <code>apply()</code>, passing the original arguments.</p>\n"},{"tags":[],"owner":{"account_id":4132184,"reputation":1939,"user_id":3409387,"accept_rate":100,"display_name":"anandbibek"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1602384270,"creation_date":1602361487,"answer_id":64297939,"question_id":26679628,"body_markdown":"I did something like this - created my custom BiFunction.\r\nThe idea being:\r\n\r\n 1. Return type is same as the second argument \r\n 2. First argument is passed internally to chained biFunction\r\n\r\n\r\n    \r\n\r\n        public interface BiFunctionCustom&lt;T, U&gt; extends BiFunction&lt;T,U,U&gt; {\r\n     \r\n          default BiFunctionCustom&lt;T, U&gt; andThen(BiFunctionCustom&lt;T, U&gt; after) {\r\n              Objects.requireNonNull(after);\r\n              return (T t, U u) -&gt; after.apply(t, apply(t, u));\r\n          }\r\n        }\r\n\r\n","title":"How to chain BiFunctions?","body":"<p>I did something like this - created my custom BiFunction.\nThe idea being:</p>\n<ol>\n<li><p>Return type is same as the second argument</p>\n</li>\n<li><p>First argument is passed internally to chained biFunction</p>\n<pre><code>public interface BiFunctionCustom&lt;T, U&gt; extends BiFunction&lt;T,U,U&gt; {\n\n  default BiFunctionCustom&lt;T, U&gt; andThen(BiFunctionCustom&lt;T, U&gt; after) {\n      Objects.requireNonNull(after);\n      return (T t, U u) -&gt; after.apply(t, apply(t, u));\n  }\n}\n</code></pre>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":8020064,"reputation":91,"user_id":6048968,"display_name":"Sergey  Ch"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679043405,"creation_date":1679043405,"answer_id":75765515,"question_id":26679628,"body_markdown":"Event though it doesn&#39;t seems like a usual chaining but I came to the following approach, conceptually similar with the one proposed by Stuart Marks :\r\n\r\n    BiFunction&lt;Param1, Param2, Param1&gt; firstBiFunc = (p1, p2) -&gt; {\r\n        // DO SOME STUFF\r\n        return secondBiFunc.apply(p1, p2);\r\n    };\r\n    BiFunction&lt;Param1, Param2, Param1&gt; secondBiFunc = (p1, p2) -&gt; {\r\n        // DO SOME STUFF\r\n        return p1\r\n    };\r\n\r\n","title":"How to chain BiFunctions?","body":"<p>Event though it doesn't seems like a usual chaining but I came to the following approach, conceptually similar with the one proposed by Stuart Marks :</p>\n<pre><code>BiFunction&lt;Param1, Param2, Param1&gt; firstBiFunc = (p1, p2) -&gt; {\n    // DO SOME STUFF\n    return secondBiFunc.apply(p1, p2);\n};\nBiFunction&lt;Param1, Param2, Param1&gt; secondBiFunc = (p1, p2) -&gt; {\n    // DO SOME STUFF\n    return p1\n};\n</code></pre>\n"}],"owner":{"account_id":141302,"reputation":567,"user_id":348225,"accept_rate":38,"display_name":"Pan Bydlak"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3671,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"answer_count":4,"score":11,"last_activity_date":1679043405,"creation_date":1414774162,"question_id":26679628,"body_markdown":"I would like to chain BiFunctions, like in the method `chainWanted` in the code sample below.\r\n\r\nBiFunction takes Function as a parameter of AndThen. is it possible to somehow chain BiFunctions ?\r\n\r\nThe code here doesn&#39;t compile because of this and I cannot cast BiFunction to Function.\r\n\r\n\r\n    import java.util.function.BiFunction;\r\n    import java.util.function.Function;\r\n    \r\n    import org.openqa.selenium.remote.RemoteWebDriver;\r\n    \r\n    public class Wf {\r\n    \r\n    \tBiFunction&lt;RemoteWebDriver, WfParams, RemoteWebDriver&gt; init = this::init;\r\n    \tBiFunction&lt;RemoteWebDriver, WfParams, RemoteWebDriver&gt; wait = this::wait;\r\n    \r\n    \tBiFunction&lt;RemoteWebDriver, WfParams, RemoteWebDriver&gt; chainNow = init\r\n    \t\t\t.andThen(d -&gt; {\r\n    \t\t\t\tSystem.out.println(&quot;--------------&quot;);\r\n    \t\t\t\treturn null;\r\n    \t\t\t});\r\n    \r\n    \tBiFunction&lt;RemoteWebDriver, WfParams, RemoteWebDriver&gt; chainWanted = init\r\n    \t\t\t.andThen((BiFunction) wait);\r\n    \r\n    \tpublic RemoteWebDriver init(RemoteWebDriver d, WfParams params) {\r\n    \t\tSystem.out.println(&quot;init(d, params)&quot;);\r\n    \t\treturn d;\r\n    \t}\r\n    \r\n    \tpublic RemoteWebDriver wait(RemoteWebDriver d, WfParams params) {\r\n    \t\tSystem.out.println(&quot;Wf.wait(d, params)&quot;);\r\n    \t\treturn d;\r\n    \t}\r\n    \r\n    \tpublic static void main(String[] args) throws Exception {\r\n    \t\tnew Wf().start();\r\n    \t}\r\n    \r\n    \tprivate void start() {\r\n    \t\tchainNow.apply(null, null);\r\n    \t}\r\n    }","title":"How to chain BiFunctions?","body":"<p>I would like to chain BiFunctions, like in the method <code>chainWanted</code> in the code sample below.</p>\n\n<p>BiFunction takes Function as a parameter of AndThen. is it possible to somehow chain BiFunctions ?</p>\n\n<p>The code here doesn't compile because of this and I cannot cast BiFunction to Function.</p>\n\n<pre><code>import java.util.function.BiFunction;\nimport java.util.function.Function;\n\nimport org.openqa.selenium.remote.RemoteWebDriver;\n\npublic class Wf {\n\n    BiFunction&lt;RemoteWebDriver, WfParams, RemoteWebDriver&gt; init = this::init;\n    BiFunction&lt;RemoteWebDriver, WfParams, RemoteWebDriver&gt; wait = this::wait;\n\n    BiFunction&lt;RemoteWebDriver, WfParams, RemoteWebDriver&gt; chainNow = init\n            .andThen(d -&gt; {\n                System.out.println(\"--------------\");\n                return null;\n            });\n\n    BiFunction&lt;RemoteWebDriver, WfParams, RemoteWebDriver&gt; chainWanted = init\n            .andThen((BiFunction) wait);\n\n    public RemoteWebDriver init(RemoteWebDriver d, WfParams params) {\n        System.out.println(\"init(d, params)\");\n        return d;\n    }\n\n    public RemoteWebDriver wait(RemoteWebDriver d, WfParams params) {\n        System.out.println(\"Wf.wait(d, params)\");\n        return d;\n    }\n\n    public static void main(String[] args) throws Exception {\n        new Wf().start();\n    }\n\n    private void start() {\n        chainNow.apply(null, null);\n    }\n}\n</code></pre>\n"},{"tags":["java","swift"],"comments":[{"owner":{"account_id":1220712,"reputation":532353,"user_id":1187415,"accept_rate":88,"display_name":"Martin R"},"score":3,"creation_date":1527184033,"post_id":50515175,"comment_id":88043077,"body_markdown":"From the reference https://developer.apple.com/library/content/documentation/Swift/Conceptual/Swift_Programming_Language/TheBasics.html#//apple_ref/doc/uid/TP40014097-CH5-ID317: *&quot;Swift provides signed and unsigned integers in 8, 16, 32, and 64 bit forms.&quot;*","body":"From the reference <a href=\"https://developer.apple.com/library/content/documentation/Swift/Conceptual/Swift_Programming_Language/TheBasics.html#//apple_ref/doc/uid/TP40014097-CH5-ID317\" rel=\"nofollow noreferrer\">developer.apple.com/library/content/documentation/Swift/&hellip;</a>: <i>&quot;Swift provides signed and unsigned integers in 8, 16, 32, and 64 bit forms.&quot;</i>"},{"owner":{"account_id":10465788,"reputation":12056,"user_id":7715250,"accept_rate":74,"display_name":"J. Doe"},"score":2,"creation_date":1527184256,"post_id":50515175,"comment_id":88043191,"body_markdown":"Google ‘byte type swift’ answer are all over the place","body":"Google ‘byte type swift’ answer are all over the place"}],"answers":[{"comments":[{"owner":{"account_id":3014600,"reputation":11661,"user_id":2557145,"display_name":"Palle"},"score":2,"creation_date":1527190064,"post_id":50515321,"comment_id":88046099,"body_markdown":"Also, you actually don&#39;t need to convert the `Data` to an `Array&lt;UInt8&gt;` (which would be done using `Array(data)` instead of `data.bytes`), because `Data` conforms to `Sequence` and has an element type of `UInt8`, so it basically behaves similar to an array, so you can iterate over it, access its elements using a subscript (`data[42]`) etc.","body":"Also, you actually don&#39;t need to convert the <code>Data</code> to an <code>Array&lt;UInt8&gt;</code> (which would be done using <code>Array(data)</code> instead of <code>data.bytes</code>), because <code>Data</code> conforms to <code>Sequence</code> and has an element type of <code>UInt8</code>, so it basically behaves similar to an array, so you can iterate over it, access its elements using a subscript (<code>data[42]</code>) etc."}],"tags":[],"owner":{"account_id":5631967,"reputation":1119,"user_id":4458654,"accept_rate":33,"display_name":"Daniel K"},"comment_count":1,"down_vote_count":0,"up_vote_count":12,"is_accepted":true,"score":12,"last_activity_date":1527184061,"creation_date":1527184061,"answer_id":50515321,"question_id":50515175,"body_markdown":"The data type is Unsigned Int 8 (UInt8).  \r\n\r\n    var byte:UInt8 = 0xAF\r\n\r\n\r\nFor a string of bytes: \r\n\r\n    var bytes:[UInt8] = [0xAF,0xAB]\r\n\r\nFor the bytes from data:\r\n   \r\n    var data = Data()\r\n    var bytes = data.bytes //[UInt8]\r\n\r\n   ","title":"What is the equivalent data type for byte in iOS swift?","body":"<p>The data type is Unsigned Int 8 (UInt8).  </p>\n\n<pre><code>var byte:UInt8 = 0xAF\n</code></pre>\n\n<p>For a string of bytes: </p>\n\n<pre><code>var bytes:[UInt8] = [0xAF,0xAB]\n</code></pre>\n\n<p>For the bytes from data:</p>\n\n<pre><code>var data = Data()\nvar bytes = data.bytes //[UInt8]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6755392,"reputation":287,"user_id":5204025,"accept_rate":60,"display_name":"Yan"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1594178325,"creation_date":1594178325,"answer_id":62787028,"question_id":50515175,"body_markdown":"Swift bytes is [UInt8], UInt8 is 0 ... 255, Int8 is -128 ~ 127, you can get the Int8 value which like java byte with follow code.\r\n\r\n```\r\nextension UInt8 {\r\n    var int8: Int8 {\r\n        return Int8(self &gt; 127 ? Int(self) - 256 : Int(self))\r\n    }\r\n}\r\n```","title":"What is the equivalent data type for byte in iOS swift?","body":"<p>Swift bytes is [UInt8], UInt8 is 0 ... 255, Int8 is -128 ~ 127, you can get the Int8 value which like java byte with follow code.</p>\n<pre><code>extension UInt8 {\n    var int8: Int8 {\n        return Int8(self &gt; 127 ? Int(self) - 256 : Int(self))\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4116693,"reputation":1661,"user_id":3378076,"display_name":"Lahiru Pinto"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679043367,"creation_date":1679043367,"answer_id":75765513,"question_id":50515175,"body_markdown":"In kotlin use **byteArray.toUByteArray()** to convert to UInt8","title":"What is the equivalent data type for byte in iOS swift?","body":"<p>In kotlin use <strong>byteArray.toUByteArray()</strong> to convert to UInt8</p>\n"}],"owner":{"account_id":5202546,"reputation":1124,"user_id":4183359,"accept_rate":75,"display_name":"Mahendran Candy"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9508,"favorite_count":0,"down_vote_count":3,"up_vote_count":6,"accepted_answer_id":50515321,"answer_count":3,"score":3,"last_activity_date":1679043367,"creation_date":1527183467,"question_id":50515175,"body_markdown":"In Java we have data type called `byte` but in Swift there is no `byte` data type available.\r\n\r\nIn the example below I typecasted the ASCII (0xAF = 175) value by using `byte` data type.\r\n\r\n    byte abyte = (byte) 0xAF;\r\n\r\nAnd the result is `abyte= -89`\r\n \r\nHow do I acheive this in Swift?","title":"What is the equivalent data type for byte in iOS swift?","body":"<p>In Java we have data type called <code>byte</code> but in Swift there is no <code>byte</code> data type available.</p>\n\n<p>In the example below I typecasted the ASCII (0xAF = 175) value by using <code>byte</code> data type.</p>\n\n<pre><code>byte abyte = (byte) 0xAF;\n</code></pre>\n\n<p>And the result is <code>abyte= -89</code></p>\n\n<p>How do I acheive this in Swift?</p>\n"},{"tags":["java","spring","swagger","swagger-ui"],"answers":[{"tags":[],"owner":{"account_id":39252,"reputation":89842,"user_id":113116,"display_name":"Helen"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1679043222,"creation_date":1679043222,"answer_id":75765494,"question_id":75765201,"body_markdown":"In Swagger Core 2.x, `readOnly` has been replaced by [`accessMode`](https://docs.swagger.io/swagger-core/v2.2.8/apidocs/io/swagger/v3/oas/annotations/media/Schema.html#accessMode--):\r\n\r\n```java\r\n@Schema(accessMode = AccessMode.READ_ONLY)\r\npublic String someField;\r\n```","title":"Swagger doesn&#39;t hide readOnly fields in request docs","body":"<p>In Swagger Core 2.x, <code>readOnly</code> has been replaced by <a href=\"https://docs.swagger.io/swagger-core/v2.2.8/apidocs/io/swagger/v3/oas/annotations/media/Schema.html#accessMode--\" rel=\"nofollow noreferrer\"><code>accessMode</code></a>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Schema(accessMode = AccessMode.READ_ONLY)\npublic String someField;\n</code></pre>\n"}],"owner":{"account_id":1309929,"reputation":4821,"user_id":1258130,"accept_rate":60,"display_name":"eja"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":410,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75765494,"answer_count":1,"score":0,"last_activity_date":1679043222,"creation_date":1679041232,"question_id":75765201,"body_markdown":"Previously, given a field in an object, in order to hide it from the swagger doc i.e. make it readonly, you could use the following:\r\n\r\n```\r\n@ApiModelProperty(readOnly = true)\r\npublic String someField;\r\n```\r\n\r\nThis would make the field readonly, thus hidden in create/edit docs, but it would still be visible in the response body docs.\r\n\r\nNow moving from `@ApiModelProperty` to `@Schema` I was expecting that it would work in the same way\r\n\r\n```\r\n@Schema(readOnly = true)\r\npublic String someField;\r\n```\r\n\r\nbut for some reason it doesn&#39;t. Functionally, it works, meaning that this field cannot be set when sending requests to a given endpoint, but the field isn&#39;t hidden in the POST request docs.\r\n\r\nIs this working as intended? Is there a different property to be used?\r\n\r\nThere are alternative approaches how to hide params e.g. `JsonIgnore`, or the `hidden` param - but the goal is to make a field specifically readonly with `@Schema`, in addition to making it hidden in the POST request docs and visible in the GET/response body docs.","title":"Swagger doesn&#39;t hide readOnly fields in request docs","body":"<p>Previously, given a field in an object, in order to hide it from the swagger doc i.e. make it readonly, you could use the following:</p>\n<pre><code>@ApiModelProperty(readOnly = true)\npublic String someField;\n</code></pre>\n<p>This would make the field readonly, thus hidden in create/edit docs, but it would still be visible in the response body docs.</p>\n<p>Now moving from <code>@ApiModelProperty</code> to <code>@Schema</code> I was expecting that it would work in the same way</p>\n<pre><code>@Schema(readOnly = true)\npublic String someField;\n</code></pre>\n<p>but for some reason it doesn't. Functionally, it works, meaning that this field cannot be set when sending requests to a given endpoint, but the field isn't hidden in the POST request docs.</p>\n<p>Is this working as intended? Is there a different property to be used?</p>\n<p>There are alternative approaches how to hide params e.g. <code>JsonIgnore</code>, or the <code>hidden</code> param - but the goal is to make a field specifically readonly with <code>@Schema</code>, in addition to making it hidden in the POST request docs and visible in the GET/response body docs.</p>\n"},{"tags":["java","android","eclipse"],"comments":[{"owner":{"account_id":69592,"reputation":53841,"user_id":202375,"accept_rate":62,"display_name":"Saurabh Gokhale"},"score":0,"creation_date":1307762997,"post_id":6313858,"comment_id":14567692,"body_markdown":"Check this link : [Multiple Projects Automatically Into Your Eclipse Workspace With Team Project Sets](http://java.dzone.com/articles/checkout-multiple-projects) and [Importing Multiple Projects into eclipse](http://www.mail-archive.com/users@maven.apache.org/msg15378.html)","body":"Check this link : <a href=\"http://java.dzone.com/articles/checkout-multiple-projects\" rel=\"nofollow noreferrer\">Multiple Projects Automatically Into Your Eclipse Workspace With Team Project Sets</a> and <a href=\"http://www.mail-archive.com/users@maven.apache.org/msg15378.html\" rel=\"nofollow noreferrer\">Importing Multiple Projects into eclipse</a>"}],"answers":[{"comments":[{"owner":{"account_id":54558,"reputation":2587,"user_id":163231,"accept_rate":75,"display_name":"count0"},"score":3,"creation_date":1349278322,"post_id":6313909,"comment_id":17163923,"body_markdown":"You can also import projects into workspace from an archive file. You&#39;d have to go via `Existing Projects into Workspace` and not import from archive file though.","body":"You can also import projects into workspace from an archive file. You&#39;d have to go via <code>Existing Projects into Workspace</code> and not import from archive file though."},{"owner":{"account_id":358740,"reputation":5921,"user_id":699700,"accept_rate":69,"display_name":"Max Nanasy"},"score":4,"creation_date":1362254176,"post_id":6313909,"comment_id":21381148,"body_markdown":"Note that this doesn&#39;t work (for me, at least) if the parent directory itself is also an Eclipse project.","body":"Note that this doesn&#39;t work (for me, at least) if the parent directory itself is also an Eclipse project."},{"owner":{"account_id":358740,"reputation":5921,"user_id":699700,"accept_rate":69,"display_name":"Max Nanasy"},"score":3,"creation_date":1362254446,"post_id":6313909,"comment_id":21381244,"body_markdown":"Upon closer inspection, this is allegedly fixed in Eclipse 4.3: https://bugs.eclipse.org/bugs/show_bug.cgi?id=144610","body":"Upon closer inspection, this is allegedly fixed in Eclipse 4.3: <a href=\"https://bugs.eclipse.org/bugs/show_bug.cgi?id=144610\" rel=\"nofollow noreferrer\">bugs.eclipse.org/bugs/show_bug.cgi?id=144610</a>"},{"owner":{"account_id":1990462,"reputation":3726,"user_id":1784585,"accept_rate":75,"display_name":"Alpesh Gediya"},"score":0,"creation_date":1368264163,"post_id":6313909,"comment_id":23676278,"body_markdown":"@Andrew, I am able to multiple projects but they did not import as Java project they are just simple java project.","body":"@Andrew, I am able to multiple projects but they did not import as Java project they are just simple java project."},{"owner":{"account_id":3334528,"reputation":131,"user_id":2802517,"display_name":"Maverick"},"score":0,"creation_date":1475232734,"post_id":6313909,"comment_id":66872674,"body_markdown":"just to add .. if your project is MAVEN project . you can go to your PARENT POM.XML and select it. once selection is done,  you will be able to see all the related project.  click the checkbox side to the projects, which you want to import. And then click ok. All the related project will be imported in the workspace.","body":"just to add .. if your project is MAVEN project . you can go to your PARENT POM.XML and select it. once selection is done,  you will be able to see all the related project.  click the checkbox side to the projects, which you want to import. And then click ok. All the related project will be imported in the workspace."},{"owner":{"account_id":22104620,"reputation":87,"user_id":16360534,"display_name":"ritu mansata"},"score":0,"creation_date":1658084736,"post_id":6313909,"comment_id":128957809,"body_markdown":"yes,it works..good solution @Andrew Eisenberg","body":"yes,it works..good solution @Andrew Eisenberg"}],"tags":[],"owner":{"account_id":57542,"reputation":28477,"user_id":172363,"accept_rate":83,"display_name":"Andrew Eisenberg"},"comment_count":6,"down_vote_count":0,"up_vote_count":57,"is_accepted":true,"score":57,"last_activity_date":1350546043,"creation_date":1307763763,"answer_id":6313909,"question_id":6313858,"body_markdown":"If all of your old projects exist in a single directory or in a single parent directory, you can do **File -&gt; Import... -&gt; Existing Projects into workspace**.  Choose a root directory that is a parent all of the projects you want to import.  You will then be able to import all of the projects at once.","title":"Importing multiple projects into eclipse","body":"<p>If all of your old projects exist in a single directory or in a single parent directory, you can do <strong>File -> Import... -> Existing Projects into workspace</strong>.  Choose a root directory that is a parent all of the projects you want to import.  You will then be able to import all of the projects at once.</p>\n"},{"tags":[],"owner":{"account_id":2824905,"reputation":3525,"user_id":2427750,"display_name":"Mickael"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1433836950,"creation_date":1425278767,"answer_id":28804059,"question_id":6313858,"body_markdown":"There is an ongoing experiment of an easier and smarter import mechanism for Eclipse IDE. See https://wiki.eclipse.org/E4/UI/Smart_Import for details. Then you&#39;ll see new UI entries in File menu or Import wizard that will allow you to import projects recursively.\r\n\r\nIn case you notice any issue, please report bugs!","title":"Importing multiple projects into eclipse","body":"<p>There is an ongoing experiment of an easier and smarter import mechanism for Eclipse IDE. See <a href=\"https://wiki.eclipse.org/E4/UI/Smart_Import\" rel=\"nofollow\">https://wiki.eclipse.org/E4/UI/Smart_Import</a> for details. Then you'll see new UI entries in File menu or Import wizard that will allow you to import projects recursively.</p>\n\n<p>In case you notice any issue, please report bugs!</p>\n"},{"tags":[],"owner":{"account_id":19155202,"reputation":1,"user_id":13992169,"display_name":"Morpheus"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679043152,"creation_date":1679043152,"answer_id":75765482,"question_id":6313858,"body_markdown":"Go to ***windows-&gt;showView-&gt; Project Explorer-&gt; Browse-&gt; select workspace -&gt; select all files.***\r\n\r\nalternatively you can go to ***file-&gt; import -&gt; general -&gt; file system -&gt; workspace***","title":"Importing multiple projects into eclipse","body":"<p>Go to <em><strong>windows-&gt;showView-&gt; Project Explorer-&gt; Browse-&gt; select workspace -&gt; select all files.</strong></em></p>\n<p>alternatively you can go to <em><strong>file-&gt; import -&gt; general -&gt; file system -&gt; workspace</strong></em></p>\n"}],"owner":{"account_id":297964,"reputation":54072,"user_id":603744,"accept_rate":91,"display_name":"Andro Selva"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":31493,"favorite_count":0,"down_vote_count":1,"up_vote_count":34,"accepted_answer_id":6313909,"answer_count":3,"score":33,"last_activity_date":1679043152,"creation_date":1307762571,"question_id":6313858,"body_markdown":"I am just curious to know, whether there are possibilities to import more than one project at the same time into Eclipse. Because whenever I create my new workspace I had to import the needed projects from my old workspace to my newly created workspace. \r\n\r\nSo it would be nice to know, if there are options to import multiple projects at the same time?\r\n\r\nThanks.","title":"Importing multiple projects into eclipse","body":"<p>I am just curious to know, whether there are possibilities to import more than one project at the same time into Eclipse. Because whenever I create my new workspace I had to import the needed projects from my old workspace to my newly created workspace. </p>\n\n<p>So it would be nice to know, if there are options to import multiple projects at the same time?</p>\n\n<p>Thanks.</p>\n"},{"tags":["java","file","sockets"],"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":1,"creation_date":1679041336,"post_id":75765148,"comment_id":133653096,"body_markdown":"Hello and welcome. Please post your code as text directly in the question, not as pictures.","body":"Hello and welcome. Please post your code as text directly in the question, not as pictures."},{"owner":{"account_id":551394,"reputation":8315,"user_id":916225,"accept_rate":69,"display_name":"seenukarthi"},"score":0,"creation_date":1679041771,"post_id":75765148,"comment_id":133653189,"body_markdown":"[Please do not upload images of code/data/errors when asking a question.](//meta.stackoverflow.com/q/285551)","body":"<a href=\"//meta.stackoverflow.com/q/285551\">Please do not upload images of code/data/errors when asking a question.</a>"},{"owner":{"account_id":20101147,"reputation":15,"user_id":14739581,"display_name":"Krlin Homon"},"score":0,"creation_date":1679042230,"post_id":75765148,"comment_id":133653294,"body_markdown":"thanks and i will delete this one and post a new one","body":"thanks and i will delete this one and post a new one"},{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":1,"creation_date":1679042800,"post_id":75765148,"comment_id":133653428,"body_markdown":"please edit the question instead of deleting and posting a new one","body":"please edit the question instead of deleting and posting a new one"},{"owner":{"account_id":37136,"reputation":57822,"user_id":106104,"accept_rate":62,"display_name":"user253751"},"score":0,"creation_date":1679043168,"post_id":75765148,"comment_id":133653511,"body_markdown":"The server needs to know where the file stops and the MD5 starts. One way to do this is to send the length first, and then when the server has read that many bytes, it knows the file has finished and the MD5 is next.","body":"The server needs to know where the file stops and the MD5 starts. One way to do this is to send the length first, and then when the server has read that many bytes, it knows the file has finished and the MD5 is next."}],"owner":{"account_id":20101147,"reputation":15,"user_id":14739581,"display_name":"Krlin Homon"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679042915,"creation_date":1679040833,"question_id":75765148,"body_markdown":"I&#39;m sending files through java socket by codes below: \r\nclient: \r\n\r\n```java\r\nFile file = new File(filePath);\r\nif (file.exists()) {\r\n    this.rafin = new RandomAccessFile(filePath, &quot;r&quot;);\r\n    this.dos = new DataOutputStream(super.getOutputStream());\r\n    rafin.seek(start); // 找到位置\r\n    // 写入文件名\r\n    dos.writeUTF(file.getName()+&quot;.&quot;+order);\r\n    // 写入文件切片个数\r\n    dos.writeInt(fileSplitNum);\r\n    // 写入sendIp\r\n    dos.writeUTF(localIp);\r\n    // 写入文件落盘时间\r\n    dos.writeUTF(lastModifiedDate);\r\n    dos.flush();\r\n    log.info(&quot;文件名为：&quot;+file.getName()+&quot;.&quot;+order);\r\n    long fileLength = end - start + 1;\r\n    byte[] bytes = new byte[1024 * 8];\r\n    \r\n    // 计算循环\r\n    long times = fileLength / bytes.length;\r\n    \r\n    int length;\r\n    long start = System.currentTimeMillis();\r\n    // ======================核心传输逻辑==========================\r\n    MessageDigest md5 = MessageDigest.getInstance(&quot;MD5&quot;);\r\n    for (int i = 0;i &lt; times; i++) {\r\n        length = rafin.read(bytes, 0, bytes.length);\r\n        md5.update(bytes, 0, length); // md5计算\r\n        dos.write(bytes, 0, length);\r\n    }\r\n    long last = fileLength % bytes.length;\r\n    if (last != 0) {\r\n        length = rafin.read(bytes, 0, (int) last);\r\n        md5.update(bytes, 0, (int) last); // md5\r\n        dos.write(bytes, 0, length);\r\n    }\r\n    // ========================核心传输逻辑结束==============================\r\n    String fileMd5 = DigestUtil.toHexString(md5.digest());\r\n    // 将文件的md5编码传入server\r\n     dos.writeUTF(fileMd5); // ******* I want to send md5 to server at here\r\n     dos.flush();\r\n    log.info(&quot;第{}切片的md5加密密钥为：{}&quot;, order, fileMd5);\r\n    long end = System.currentTimeMillis();\r\n    \r\n    String file_trans_stat = dis.readUTF();\r\n    log.info(&quot;文件传输状态：{}&quot;, file_trans_stat);\r\n    latch.countDown(); // latch锁减一\r\n    log.info(String.format(&quot;%s 传输完毕，用时：%.2f秒%n&quot;,Thread.currentThread().getName(),(double)(end-start)/1000));\r\n}\r\n```\r\n\r\nserver: \r\n\r\n```java\r\ndis = new DataInputStream(socket.getInputStream());\r\n// 文件名\r\nString fileName = dis.readUTF();\r\n// 文件切片个数\r\nint fileSplitNum = dis.readInt();\r\n// sendIp\r\nString sendIp = dis.readUTF();\r\n// 文件落盘时间\r\nString lastModifiedDate = dis.readUTF();\r\n// 计时表\r\nThreadLocal&lt;StopWatch&gt; threadLocal = new ThreadLocal&lt;&gt;();\r\nthreadLocal.set(new StopWatch());\r\nthreadLocal.get().start();\r\nString fileNameTmp = fileName+&quot;.tmp&quot;;\r\nlog.info(&quot;接收文件夹为：{}&quot;, fileDir);\r\nFile directory = new File(fileDir);\r\nif (!directory.exists()) {\r\n    directory.mkdir();\r\n}\r\nFile file = new File(directory.getAbsolutePath() + File.separatorChar + fileNameTmp);\r\nFileOutputStream fos = new FileOutputStream(file);\r\n\r\nbyte[] bytes = new byte[1024 * 8];\r\nint length;\r\nMessageDigest md5 = MessageDigest.getInstance(&quot;MD5&quot;);\r\nwhile ( (length = dis.read(bytes, 0, bytes.length)) != -1 ) {\r\n    fos.write(bytes, 0, length);\r\n    md5.update(bytes, 0, length);\r\n    fos.flush();\r\n}\r\nfos.close();\r\nString clientFileMd5 = dis.readUTF();   //*********** I want to receive md5 at here, but it seems doesn&#39;t work\r\nlog.info(&quot;client传来的{}的加密密钥为:{}&quot;, fileNameTmp, clientFileMd5);\r\nString fileMd5 = DigestUtil.toHexString(md5.digest());\r\nlog.info(&quot;切片{}的md5加密密钥为: {}&quot;, fileNameTmp, fileMd5);\r\n```\r\n\r\nI want to send the file&#39;s md5 to server after sending the file to verify whether the file is ok, but the code seems doesn&#39;t work, how can i adjust the code\r\n\r\nthe code of sending md5 I have tried is in the exegesis which is purple color\r\n\r\nwhat I have tried is in the code","title":"After sending files through socket, how can i send other data by Java","body":"<p>I'm sending files through java socket by codes below:\nclient:</p>\n<pre class=\"lang-java prettyprint-override\"><code>File file = new File(filePath);\nif (file.exists()) {\n    this.rafin = new RandomAccessFile(filePath, &quot;r&quot;);\n    this.dos = new DataOutputStream(super.getOutputStream());\n    rafin.seek(start); // 找到位置\n    // 写入文件名\n    dos.writeUTF(file.getName()+&quot;.&quot;+order);\n    // 写入文件切片个数\n    dos.writeInt(fileSplitNum);\n    // 写入sendIp\n    dos.writeUTF(localIp);\n    // 写入文件落盘时间\n    dos.writeUTF(lastModifiedDate);\n    dos.flush();\n    log.info(&quot;文件名为：&quot;+file.getName()+&quot;.&quot;+order);\n    long fileLength = end - start + 1;\n    byte[] bytes = new byte[1024 * 8];\n    \n    // 计算循环\n    long times = fileLength / bytes.length;\n    \n    int length;\n    long start = System.currentTimeMillis();\n    // ======================核心传输逻辑==========================\n    MessageDigest md5 = MessageDigest.getInstance(&quot;MD5&quot;);\n    for (int i = 0;i &lt; times; i++) {\n        length = rafin.read(bytes, 0, bytes.length);\n        md5.update(bytes, 0, length); // md5计算\n        dos.write(bytes, 0, length);\n    }\n    long last = fileLength % bytes.length;\n    if (last != 0) {\n        length = rafin.read(bytes, 0, (int) last);\n        md5.update(bytes, 0, (int) last); // md5\n        dos.write(bytes, 0, length);\n    }\n    // ========================核心传输逻辑结束==============================\n    String fileMd5 = DigestUtil.toHexString(md5.digest());\n    // 将文件的md5编码传入server\n     dos.writeUTF(fileMd5); // ******* I want to send md5 to server at here\n     dos.flush();\n    log.info(&quot;第{}切片的md5加密密钥为：{}&quot;, order, fileMd5);\n    long end = System.currentTimeMillis();\n    \n    String file_trans_stat = dis.readUTF();\n    log.info(&quot;文件传输状态：{}&quot;, file_trans_stat);\n    latch.countDown(); // latch锁减一\n    log.info(String.format(&quot;%s 传输完毕，用时：%.2f秒%n&quot;,Thread.currentThread().getName(),(double)(end-start)/1000));\n}\n</code></pre>\n<p>server:</p>\n<pre class=\"lang-java prettyprint-override\"><code>dis = new DataInputStream(socket.getInputStream());\n// 文件名\nString fileName = dis.readUTF();\n// 文件切片个数\nint fileSplitNum = dis.readInt();\n// sendIp\nString sendIp = dis.readUTF();\n// 文件落盘时间\nString lastModifiedDate = dis.readUTF();\n// 计时表\nThreadLocal&lt;StopWatch&gt; threadLocal = new ThreadLocal&lt;&gt;();\nthreadLocal.set(new StopWatch());\nthreadLocal.get().start();\nString fileNameTmp = fileName+&quot;.tmp&quot;;\nlog.info(&quot;接收文件夹为：{}&quot;, fileDir);\nFile directory = new File(fileDir);\nif (!directory.exists()) {\n    directory.mkdir();\n}\nFile file = new File(directory.getAbsolutePath() + File.separatorChar + fileNameTmp);\nFileOutputStream fos = new FileOutputStream(file);\n\nbyte[] bytes = new byte[1024 * 8];\nint length;\nMessageDigest md5 = MessageDigest.getInstance(&quot;MD5&quot;);\nwhile ( (length = dis.read(bytes, 0, bytes.length)) != -1 ) {\n    fos.write(bytes, 0, length);\n    md5.update(bytes, 0, length);\n    fos.flush();\n}\nfos.close();\nString clientFileMd5 = dis.readUTF();   //*********** I want to receive md5 at here, but it seems doesn't work\nlog.info(&quot;client传来的{}的加密密钥为:{}&quot;, fileNameTmp, clientFileMd5);\nString fileMd5 = DigestUtil.toHexString(md5.digest());\nlog.info(&quot;切片{}的md5加密密钥为: {}&quot;, fileNameTmp, fileMd5);\n</code></pre>\n<p>I want to send the file's md5 to server after sending the file to verify whether the file is ok, but the code seems doesn't work, how can i adjust the code</p>\n<p>the code of sending md5 I have tried is in the exegesis which is purple color</p>\n<p>what I have tried is in the code</p>\n"},{"tags":["java","json","spring","junit"],"owner":{"account_id":6651987,"reputation":493,"user_id":5133664,"display_name":"Marcelino Lucero III"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":227,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679042706,"creation_date":1679042706,"question_id":75765420,"body_markdown":"These pl.pojo.tester.api.assertion.Assertions.assertPojoMethodsFor() methods are really nice when they work, but what do I do to make it work when I need to manually set the type of object it instantiates the Pojo class with?\r\n\r\n\r\nIn another similar class I tried to test it says there is a mismatch between the JSONArray and java.util.ArrayList, so it seems it is trying to use an ArrayList as the JSONArray argument. How do I tell it to use a `new JSONArray`? Seems like this should be a simple thing but I can&#39;t find anything on this. Any help is much appreciated!\r\n\r\n\r\n**Pojo class**\r\n```\r\npackage model;\r\n\r\nimport org.json.JSONArray;\r\n\r\npublic class PojoClass{\r\n  private JSONArray docArray;\r\n// Constructors (no-args, all-args), getter, setter, toString(), equals() &amp; hashCode() methods\r\n}\r\n```\r\n\r\n\r\n**Tester class**\r\n```\r\npackage model;\r\n\r\nimport static pl.pojo.tester.api.assertion.Assertions.assertPojoMethodsFor;\r\n\r\nimport org.junit.Test;\r\nimport pl.pojo.tester.api.assertion.Method;\r\n\r\npublic class PojoClassTest {\r\n  @Test\r\n  public void test() {\r\n    Class clazz = PojoClass.class;\r\n    assertPojoMethodsFor(clazz)\r\n        .testing(Method.GETTER, Method.SETTER)\r\n        .quickly()\r\n        .areWellImplemented();\r\n    assertPojoMethodsFor(clazz)\r\n        .testing(Method.EQUALS, Method.HASH_CODE)\r\n        .quickly()\r\n        .areWellImplemented();\r\n    assertPojoMethodsFor(clazz).testing(Method.TO_STRING).areWellImplemented();\r\n\r\n  }\r\n\r\n}\r\n```\r\n\r\n**Error**\r\n```\r\n\r\njava.lang.IllegalArgumentException: argument type mismatch\r\n\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat pl.pojo.tester.internal.assertion.setter.SetterAssertions.willSetValueOnField(SetterAssertions.java:25)\r\n\tat pl.pojo.tester.internal.tester.SetterTester.testSetterAndGetter(SetterTester.java:42)\r\n\tat pl.pojo.tester.internal.tester.SetterTester.lambda$test$0(SetterTester.java:33)\r\n\tat java.util.ArrayList.forEach(ArrayList.java:1257)\r\n\tat pl.pojo.tester.internal.tester.SetterTester.test(SetterTester.java:33)\r\n\tat pl.pojo.tester.api.assertion.SingleClassAssertion.lambda$runAssertions$0(SingleClassAssertion.java:28)\r\n\tat java.lang.Iterable.forEach(Iterable.java:75)\r\n\tat pl.pojo.tester.api.assertion.SingleClassAssertion.runAssertions(SingleClassAssertion.java:28)\r\n\tat pl.pojo.tester.api.assertion.AbstractAssertion.areWellImplemented(AbstractAssertion.java:129)\r\n\tat com.americanexpress.paymentnetwork.batchprocessor.model.PojoClassTest.test(PojoClassTest.java:15)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)\r\n\tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\r\n\tat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)\r\n\tat org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\r\n\tat org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)\r\n\tat org.junit.runners.BlockJUnit4ClassRunner$1.evaluate(BlockJUnit4ClassRunner.java:100)\r\n\tat org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366)\r\n\tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:103)\r\n\tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:63)\r\n\tat org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)\r\n\tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)\r\n\tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)\r\n\tat org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)\r\n\tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)\r\n\tat org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)\r\n\tat org.junit.runners.ParentRunner.run(ParentRunner.java:413)\r\n\tat org.junit.runner.JUnitCore.run(JUnitCore.java:137)\r\n\tat com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:69)\r\n\tat com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)\r\n\tat com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)\r\n\tat com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)\r\n\tat com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:235)\r\n\tat com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:54)\r\n\r\n\r\nProcess finished with exit code 255\r\n\r\n```\r\n\r\n\r\n","title":"assertPojoMethodsFor() - how to set the argument type","body":"<p>These pl.pojo.tester.api.assertion.Assertions.assertPojoMethodsFor() methods are really nice when they work, but what do I do to make it work when I need to manually set the type of object it instantiates the Pojo class with?</p>\n<p>In another similar class I tried to test it says there is a mismatch between the JSONArray and java.util.ArrayList, so it seems it is trying to use an ArrayList as the JSONArray argument. How do I tell it to use a <code>new JSONArray</code>? Seems like this should be a simple thing but I can't find anything on this. Any help is much appreciated!</p>\n<p><strong>Pojo class</strong></p>\n<pre><code>package model;\n\nimport org.json.JSONArray;\n\npublic class PojoClass{\n  private JSONArray docArray;\n// Constructors (no-args, all-args), getter, setter, toString(), equals() &amp; hashCode() methods\n}\n</code></pre>\n<p><strong>Tester class</strong></p>\n<pre><code>package model;\n\nimport static pl.pojo.tester.api.assertion.Assertions.assertPojoMethodsFor;\n\nimport org.junit.Test;\nimport pl.pojo.tester.api.assertion.Method;\n\npublic class PojoClassTest {\n  @Test\n  public void test() {\n    Class clazz = PojoClass.class;\n    assertPojoMethodsFor(clazz)\n        .testing(Method.GETTER, Method.SETTER)\n        .quickly()\n        .areWellImplemented();\n    assertPojoMethodsFor(clazz)\n        .testing(Method.EQUALS, Method.HASH_CODE)\n        .quickly()\n        .areWellImplemented();\n    assertPojoMethodsFor(clazz).testing(Method.TO_STRING).areWellImplemented();\n\n  }\n\n}\n</code></pre>\n<p><strong>Error</strong></p>\n<pre><code>\njava.lang.IllegalArgumentException: argument type mismatch\n\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at pl.pojo.tester.internal.assertion.setter.SetterAssertions.willSetValueOnField(SetterAssertions.java:25)\n    at pl.pojo.tester.internal.tester.SetterTester.testSetterAndGetter(SetterTester.java:42)\n    at pl.pojo.tester.internal.tester.SetterTester.lambda$test$0(SetterTester.java:33)\n    at java.util.ArrayList.forEach(ArrayList.java:1257)\n    at pl.pojo.tester.internal.tester.SetterTester.test(SetterTester.java:33)\n    at pl.pojo.tester.api.assertion.SingleClassAssertion.lambda$runAssertions$0(SingleClassAssertion.java:28)\n    at java.lang.Iterable.forEach(Iterable.java:75)\n    at pl.pojo.tester.api.assertion.SingleClassAssertion.runAssertions(SingleClassAssertion.java:28)\n    at pl.pojo.tester.api.assertion.AbstractAssertion.areWellImplemented(AbstractAssertion.java:129)\n    at com.americanexpress.paymentnetwork.batchprocessor.model.PojoClassTest.test(PojoClassTest.java:15)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)\n    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\n    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)\n    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\n    at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)\n    at org.junit.runners.BlockJUnit4ClassRunner$1.evaluate(BlockJUnit4ClassRunner.java:100)\n    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:103)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:63)\n    at org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)\n    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)\n    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)\n    at org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)\n    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)\n    at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)\n    at org.junit.runners.ParentRunner.run(ParentRunner.java:413)\n    at org.junit.runner.JUnitCore.run(JUnitCore.java:137)\n    at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:69)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)\n    at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)\n    at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:235)\n    at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:54)\n\n\nProcess finished with exit code 255\n\n</code></pre>\n"},{"tags":["java","api","post","get"],"owner":{"account_id":28034124,"reputation":1,"user_id":21412832,"display_name":"andresvds"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679042655,"creation_date":1679042655,"question_id":75765410,"body_markdown":"I am trying to do a GET API call using a Bearer token. The GET I am trying to do works perfectly in PostMan. If I do the exact same thing with Java I get a 412 error. The Bearer token works fine on POST calls. But if I change my POST to a GET and change my API url, the error occurs. Anyone has any idea why my authentication wont work? The Bearer token and the Content-Type cant be the problem because it works in other calls. Thanks in advance!!\r\n\r\n**The code**\r\n```\r\n`public static void main(String[] args) throws Exception {\r\n      StringBuilder result = new StringBuilder();\r\n      URL url = new URL(&quot;https://api_url_link/ECM/api/v5/fetchControlDetailsES&quot;);\r\n      HttpURLConnection conn = (HttpURLConnection) url.openConnection();\r\n      conn.setRequestMethod(&quot;GET&quot;);\r\n      conn.setRequestProperty(&quot;Content-Type&quot;,&quot;application/json&quot;);\r\n      conn.setRequestProperty(&quot;Authorization&quot;, &quot;Bearer myaccestokenisplacedhere&quot;);\r\n      try (BufferedReader reader = new BufferedReader(\r\n                  new InputStreamReader(conn.getInputStream()))) {\r\n          for (String line; (line = reader.readLine()) != null; ) {\r\n              result.append(line);\r\n          }\r\n      }\r\n      System.out.println(result);\r\n}`\r\n```\r\n\r\n**The error:**\r\n`Exception in thread &quot;main&quot; java.io.IOException: Server returned HTTP response code: 412 for URL: https://api_url_link/ECM/api/v5/fetchControlDetailsES\r\n at java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream0(HttpURLConnection.java:1993)\r\n        at java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1585)\r\n        at java.base/sun.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:224)\r\n        at Department_Testing.main(Department_Testing.java:17)`\r\n\r\n\r\nSome people suggested it had something to do with spaces where the Bearer token is but I tried almost all options and still the same result. If I do play around with spaces, I sometimes get a 401 instead of a 412. I also compared my raw Java call with my PostMan call and the only difference is that PostMan also uses a cookie header, but this shouldn&#39;t be necessary. ","title":"Java GET API Call with Bearer token 412 error","body":"<p>I am trying to do a GET API call using a Bearer token. The GET I am trying to do works perfectly in PostMan. If I do the exact same thing with Java I get a 412 error. The Bearer token works fine on POST calls. But if I change my POST to a GET and change my API url, the error occurs. Anyone has any idea why my authentication wont work? The Bearer token and the Content-Type cant be the problem because it works in other calls. Thanks in advance!!</p>\n<p><strong>The code</strong></p>\n<pre><code>`public static void main(String[] args) throws Exception {\n      StringBuilder result = new StringBuilder();\n      URL url = new URL(&quot;https://api_url_link/ECM/api/v5/fetchControlDetailsES&quot;);\n      HttpURLConnection conn = (HttpURLConnection) url.openConnection();\n      conn.setRequestMethod(&quot;GET&quot;);\n      conn.setRequestProperty(&quot;Content-Type&quot;,&quot;application/json&quot;);\n      conn.setRequestProperty(&quot;Authorization&quot;, &quot;Bearer myaccestokenisplacedhere&quot;);\n      try (BufferedReader reader = new BufferedReader(\n                  new InputStreamReader(conn.getInputStream()))) {\n          for (String line; (line = reader.readLine()) != null; ) {\n              result.append(line);\n          }\n      }\n      System.out.println(result);\n}`\n</code></pre>\n<p><strong>The error:</strong>\n<code>Exception in thread &quot;main&quot; java.io.IOException: Server returned HTTP response code: 412 for URL: https://api_url_link/ECM/api/v5/fetchControlDetailsES at java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream0(HttpURLConnection.java:1993) at java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1585) at java.base/sun.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:224) at Department_Testing.main(Department_Testing.java:17)</code></p>\n<p>Some people suggested it had something to do with spaces where the Bearer token is but I tried almost all options and still the same result. If I do play around with spaces, I sometimes get a 401 instead of a 412. I also compared my raw Java call with my PostMan call and the only difference is that PostMan also uses a cookie header, but this shouldn't be necessary.</p>\n"},{"tags":["java","multithreading","locking"],"comments":[{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1678982053,"post_id":75758465,"comment_id":133642142,"body_markdown":"It seems, you already know the answer to the first (“is it possible”) question, as otherwise, you wouldn’t ask the second (“how” to do a different approach) question at the same time. Recommend read: [ask]","body":"It seems, you already know the answer to the first (“is it possible”) question, as otherwise, you wouldn’t ask the second (“how” to do a different approach) question at the same time. Recommend read: <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>"},{"owner":{"account_id":393604,"reputation":27,"user_id":755557,"display_name":"Dmytro"},"score":0,"creation_date":1678982257,"post_id":75758465,"comment_id":133642200,"body_markdown":"I had an interview question about this. When I tried to explore using Atomics, interviewer steered away from using atomics and suggested that it is possible to implement it using only volatile variables. I can&#39;t come up with a way how to implement it with volatiles only, hence posted this to get a firm confirmation or suggestion. Thank you","body":"I had an interview question about this. When I tried to explore using Atomics, interviewer steered away from using atomics and suggested that it is possible to implement it using only volatile variables. I can&#39;t come up with a way how to implement it with volatiles only, hence posted this to get a firm confirmation or suggestion. Thank you"},{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":0,"creation_date":1678982269,"post_id":75758465,"comment_id":133642204,"body_markdown":"A Lock is a tool for a specific problem, blocking other threads from entering the same part of your code. The Atomic classes and behaviour of `volatile` serves an entirely different purpose.","body":"A Lock is a tool for a specific problem, blocking other threads from entering the same part of your code. The Atomic classes and behaviour of <code>volatile</code> serves an entirely different purpose."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":4,"creation_date":1678982599,"post_id":75758465,"comment_id":133642311,"body_markdown":"From what I can deduce from interview questions posted on Stackoverflow, it seems it isn’t worth thinking about interview questions at all. Most of them seem to exist only because the interviewer wanted to show off with their half-knowledge, rather than finding a good programmer.","body":"From what I can deduce from interview questions posted on Stackoverflow, it seems it isn’t worth thinking about interview questions at all. Most of them seem to exist only because the interviewer wanted to show off with their half-knowledge, rather than finding a good programmer."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1678982847,"post_id":75758465,"comment_id":133642384,"body_markdown":"If we talk about a lock complying to the [`ReadWriteLock`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/locks/ReadWriteLock.html) interface, it must support waiting queues and even if you manage to implement it with volatile variables only, which implies using polling loops, no one would use such a thing in practice. So what would be the purpose of showing that you can implement an unusable replacement to a built-in feature? That’s nothing I would hire a programmer for…","body":"If we talk about a lock complying to the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/locks/ReadWriteLock.html\" rel=\"nofollow noreferrer\"><code>ReadWriteLock</code></a> interface, it must support waiting queues and even if you manage to implement it with volatile variables only, which implies using polling loops, no one would use such a thing in practice. So what would be the purpose of showing that you can implement an unusable replacement to a built-in feature? That’s nothing I would hire a programmer for…"},{"owner":{"account_id":393604,"reputation":27,"user_id":755557,"display_name":"Dmytro"},"score":0,"creation_date":1678983277,"post_id":75758465,"comment_id":133642521,"body_markdown":"thank you for analysing my interviewer&#39;s motives :) - that might be the case.\nYet I can imagine in a low latency environment having a busy spin rather than a lock could work faster. Still I&#39;m interested if using volatiles only and loops would do the job as my concern is that incrementing a volatile will not happen atomically, so would require atomics. Im still curious about this?","body":"thank you for analysing my interviewer&#39;s motives :) - that might be the case. Yet I can imagine in a low latency environment having a busy spin rather than a lock could work faster. Still I&#39;m interested if using volatiles only and loops would do the job as my concern is that incrementing a volatile will not happen atomically, so would require atomics. Im still curious about this?"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1678989187,"post_id":75758465,"comment_id":133644343,"body_markdown":"Right, you can not use increments, as increments are not atomic. You have to work with only reads and writes, e.g. of zero and one resp. false and true. See [Dekker&#39;s algorithm](https://en.wikipedia.org/wiki/Dekker%27s_algorithm) (and the “See also” section at the bottom of the page), for example(s). Keep in mind that an algorithm for mutual exclusive access without reentrance support is still enough, as you can implement a read/write lock with reentrance atop it, by using the former to protect the internal data structure of the latter.","body":"Right, you can not use increments, as increments are not atomic. You have to work with only reads and writes, e.g. of zero and one resp. false and true. See <a href=\"https://en.wikipedia.org/wiki/Dekker%27s_algorithm\" rel=\"nofollow noreferrer\">Dekker&#39;s algorithm</a> (and the “See also” section at the bottom of the page), for example(s). Keep in mind that an algorithm for mutual exclusive access without reentrance support is still enough, as you can implement a read/write lock with reentrance atop it, by using the former to protect the internal data structure of the latter."},{"owner":{"account_id":393604,"reputation":27,"user_id":755557,"display_name":"Dmytro"},"score":0,"creation_date":1679006290,"post_id":75758465,"comment_id":133648302,"body_markdown":"this algorithm is a good answer - thank you.","body":"this algorithm is a good answer - thank you."},{"owner":{"account_id":6095312,"reputation":33135,"user_id":4756299,"display_name":"Andrew Henle"},"score":0,"creation_date":1679046506,"post_id":75758465,"comment_id":133654333,"body_markdown":"Turn it around.  Ask the interviewer:  &quot;You hire someone to build your house.  Instead of laying a foundation and starting building your house, he starts to build a steel mill and a finishing plant to turn raw iron ore into nails and screws.  You&#39;re paying him by the hour to do this, and he&#39;s not building your house. What do you do?&quot;","body":"Turn it around.  Ask the interviewer:  &quot;You hire someone to build your house.  Instead of laying a foundation and starting building your house, he starts to build a steel mill and a finishing plant to turn raw iron ore into nails and screws.  You&#39;re paying him by the hour to do this, and he&#39;s not building your house. What do you do?&quot;"},{"owner":{"account_id":393604,"reputation":27,"user_id":755557,"display_name":"Dmytro"},"score":0,"creation_date":1679056631,"post_id":75758465,"comment_id":133656769,"body_markdown":"While you are right and that could be an indication of the hiring manager attitude, I learned never to push back hard against the interviewer if I want a job. \n\nAlso, my question here yielded some good references to areas that I didn&#39;t know. Which was my goal - to learn more about the question I asked.","body":"While you are right and that could be an indication of the hiring manager attitude, I learned never to push back hard against the interviewer if I want a job.   Also, my question here yielded some good references to areas that I didn&#39;t know. Which was my goal - to learn more about the question I asked."}],"answers":[{"comments":[{"owner":{"account_id":393604,"reputation":27,"user_id":755557,"display_name":"Dmytro"},"score":0,"creation_date":1679055518,"post_id":75765352,"comment_id":133656474,"body_markdown":"thank you for the references! The book is a great finding as I never came across it or didn&#39;t pay attention.","body":"thank you for the references! The book is a great finding as I never came across it or didn&#39;t pay attention."}],"tags":[],"owner":{"account_id":28040566,"reputation":11,"user_id":21418185,"display_name":"Лёха"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679042478,"creation_date":1679042279,"answer_id":75765352,"question_id":75758465,"body_markdown":"[Peterson&#39;s algorithm](https://en.wikipedia.org/wiki/Peterson%27s_algorithm) is one of the simplest algorithms for mutual exclusion that uses only volatile variables. I suppose it can be transformed to `ReadWriteLock`.\r\n\r\nAlso I can recommend [The Art of Multiprocessor Programming by Herlihy and Shavit](https://dl.acm.org/doi/book/10.5555/2385452): specifically chapters 2 (it has nice explanations for the Peterson Lock), 7 (about spin-locks), 8 (about readers–writers lock), and 5 (about the consensus number, which explains principal difference between `volatile` and `Atomic*`).\r\n\r\n","title":"Is it possible to implement a ReadWriteLock by using volatile variables only? By using Atomics and volatile?","body":"<p><a href=\"https://en.wikipedia.org/wiki/Peterson%27s_algorithm\" rel=\"nofollow noreferrer\">Peterson's algorithm</a> is one of the simplest algorithms for mutual exclusion that uses only volatile variables. I suppose it can be transformed to <code>ReadWriteLock</code>.</p>\n<p>Also I can recommend <a href=\"https://dl.acm.org/doi/book/10.5555/2385452\" rel=\"nofollow noreferrer\">The Art of Multiprocessor Programming by Herlihy and Shavit</a>: specifically chapters 2 (it has nice explanations for the Peterson Lock), 7 (about spin-locks), 8 (about readers–writers lock), and 5 (about the consensus number, which explains principal difference between <code>volatile</code> and <code>Atomic*</code>).</p>\n"}],"owner":{"account_id":393604,"reputation":27,"user_id":755557,"display_name":"Dmytro"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":61,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1679042478,"creation_date":1678981340,"question_id":75758465,"body_markdown":"In java, is it possible to implement a ReadWriteLock by using volatile variables only? \r\n\r\nOtherwise, how one would implement it by using Atomics and volatile variables? \r\n\r\nI had an interview question how to implement ReadWriteLock without using locks. \r\n\r\n When I tried to explore using Atomics, interviewer steered away from using atomics and suggested that it is possible to implement it using only volatile variables. \r\n\r\nI can&#39;t come up with a way how to implement it with volatiles only.","title":"Is it possible to implement a ReadWriteLock by using volatile variables only? By using Atomics and volatile?","body":"<p>In java, is it possible to implement a ReadWriteLock by using volatile variables only?</p>\n<p>Otherwise, how one would implement it by using Atomics and volatile variables?</p>\n<p>I had an interview question how to implement ReadWriteLock without using locks.</p>\n<p>When I tried to explore using Atomics, interviewer steered away from using atomics and suggested that it is possible to implement it using only volatile variables.</p>\n<p>I can't come up with a way how to implement it with volatiles only.</p>\n"},{"tags":["java","selenium-webdriver","automation","selenium-ide"],"comments":[{"owner":{"account_id":16422586,"reputation":1841,"user_id":11863448,"display_name":"Akzy"},"score":0,"creation_date":1679038395,"post_id":75764496,"comment_id":133652427,"body_markdown":"Can you explain more ? Do you want to locate the `xpath` with increment ?","body":"Can you explain more ? Do you want to locate the <code>xpath</code> with increment ?"},{"owner":{"account_id":14522278,"reputation":433,"user_id":10489626,"display_name":"Success Shrestha"},"score":0,"creation_date":1679041048,"post_id":75764496,"comment_id":133653037,"body_markdown":"So you have hundred text fields and you want to enter text in all of them?","body":"So you have hundred text fields and you want to enter text in all of them?"}],"answers":[{"tags":[],"owner":{"account_id":14522278,"reputation":433,"user_id":10489626,"display_name":"Success Shrestha"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679042230,"creation_date":1679042230,"answer_id":75765343,"question_id":75764496,"body_markdown":"You can do it by making a list of textbox elements like this.\r\n\r\n    List&lt;WebElement&gt; elms = driver.findElements(By.xpath(&quot;//textarea[@placeholder=&#39;text&#39;]&quot;));\r\n        for (WebElement elm:elms) {\r\n            elm.sendKeys(&quot;Text&quot;);\r\n        }","title":"Selenium How can I select when element increases by one?","body":"<p>You can do it by making a list of textbox elements like this.</p>\n<pre><code>List&lt;WebElement&gt; elms = driver.findElements(By.xpath(&quot;//textarea[@placeholder='text']&quot;));\n    for (WebElement elm:elms) {\n        elm.sendKeys(&quot;Text&quot;);\n    }\n</code></pre>\n"}],"owner":{"account_id":26541310,"reputation":1,"user_id":20172008,"display_name":"M i"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1679042230,"creation_date":1679035542,"question_id":75764496,"body_markdown":"For example I have an xpath like below.\r\n \r\n```\r\n(//textarea[@placeholder=&#39;text&#39;])[1]\r\n```\r\n\r\nThis xpath [1] is generated from 1 to 100 Sequentially.\r\n\r\n```\r\n(//textarea[@placeholder=&#39;text&#39;])[1]\r\n(//textarea[@placeholder=&#39;text&#39;])[2]\r\n(//textarea[@placeholder=&#39;text&#39;])[3]\r\n(//textarea[@placeholder=&#39;text&#39;])[4]\r\n(//textarea[@placeholder=&#39;text&#39;])[5]\r\n```\r\n\r\nI need to enter text after selecting these.  \r\nHow can I choose [1],[2],[3],[4] these at this time?\r\n\r\nI am using java and I know I have to use the for statement, but I don&#39;t know how to do it.\r\nCan you check by increasing only part of the xpath?\r\n","title":"Selenium How can I select when element increases by one?","body":"<p>For example I have an xpath like below.</p>\n<pre><code>(//textarea[@placeholder='text'])[1]\n</code></pre>\n<p>This xpath [1] is generated from 1 to 100 Sequentially.</p>\n<pre><code>(//textarea[@placeholder='text'])[1]\n(//textarea[@placeholder='text'])[2]\n(//textarea[@placeholder='text'])[3]\n(//textarea[@placeholder='text'])[4]\n(//textarea[@placeholder='text'])[5]\n</code></pre>\n<p>I need to enter text after selecting these.<br />\nHow can I choose [1],[2],[3],[4] these at this time?</p>\n<p>I am using java and I know I have to use the for statement, but I don't know how to do it.\nCan you check by increasing only part of the xpath?</p>\n"},{"tags":["java","mongodb","spring-boot","spring-data-mongodb","mongodb-atlas"],"answers":[{"tags":[],"owner":{"account_id":7653269,"reputation":392,"user_id":5801146,"accept_rate":40,"display_name":"IggyBlob"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1679042101,"creation_date":1679042101,"answer_id":75765322,"question_id":75557223,"body_markdown":"I [cross-posted][1] this question to the MongoDB Developer Community Forum and got [the following reply][2] from a MongoDB employee:\r\n\r\n&gt; The key line in the logs is “Exception in monitor thread while\r\n&gt; connecting to server …”.\r\n&gt; \r\n&gt; It’s normal to see these sorts of messages during planned maintenance\r\n&gt; of MongoDB servers (e.g. restarts for upgrades). The automatic retry\r\n&gt; features of the driver should hide most of these from your application\r\n&gt; and avoid exceptions being thrown to application threads via the\r\n&gt; drivers’s CRUD API.\r\n\r\nSo my take from this is that those logs are expected (note the INFO log level) and the result of an Atlas node becoming (temporarily) unavailable, which is a perfectly normal scenario that won’t affect my service thanks to the MongoDB driver’s retry features.\r\n\r\nIf you want to dig deeper into &quot;monitor threads&quot; and MongoDB&#39;s Server Discovery and Monitoring, you can have a look at the general description [here][3] and the gory details [here][4].\r\n\r\n\r\n  [1]: https://www.mongodb.com/community/forums/t/mongodb-atlas-connections-reset-refused/215946\r\n  [2]: https://www.mongodb.com/community/forums/t/mongodb-atlas-connections-reset-refused/215946/2\r\n  [3]: https://github.com/mongodb/specifications/blob/master/source/server-discovery-and-monitoring/server-discovery-and-monitoring-summary.rst#abstract\r\n  [4]: https://github.com/mongodb/specifications/blob/master/source/server-discovery-and-monitoring/server-monitoring.rst","title":"MongoDB Atlas connections time out","body":"<p>I <a href=\"https://www.mongodb.com/community/forums/t/mongodb-atlas-connections-reset-refused/215946\" rel=\"nofollow noreferrer\">cross-posted</a> this question to the MongoDB Developer Community Forum and got <a href=\"https://www.mongodb.com/community/forums/t/mongodb-atlas-connections-reset-refused/215946/2\" rel=\"nofollow noreferrer\">the following reply</a> from a MongoDB employee:</p>\n<blockquote>\n<p>The key line in the logs is “Exception in monitor thread while\nconnecting to server …”.</p>\n<p>It’s normal to see these sorts of messages during planned maintenance\nof MongoDB servers (e.g. restarts for upgrades). The automatic retry\nfeatures of the driver should hide most of these from your application\nand avoid exceptions being thrown to application threads via the\ndrivers’s CRUD API.</p>\n</blockquote>\n<p>So my take from this is that those logs are expected (note the INFO log level) and the result of an Atlas node becoming (temporarily) unavailable, which is a perfectly normal scenario that won’t affect my service thanks to the MongoDB driver’s retry features.</p>\n<p>If you want to dig deeper into &quot;monitor threads&quot; and MongoDB's Server Discovery and Monitoring, you can have a look at the general description <a href=\"https://github.com/mongodb/specifications/blob/master/source/server-discovery-and-monitoring/server-discovery-and-monitoring-summary.rst#abstract\" rel=\"nofollow noreferrer\">here</a> and the gory details <a href=\"https://github.com/mongodb/specifications/blob/master/source/server-discovery-and-monitoring/server-monitoring.rst\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}],"owner":{"account_id":7653269,"reputation":392,"user_id":5801146,"accept_rate":40,"display_name":"IggyBlob"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":231,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75765322,"answer_count":1,"score":0,"last_activity_date":1679042101,"creation_date":1677245827,"question_id":75557223,"body_markdown":"I have a **Spring Boot** service deployed on **AWS ECS**. The service offers a REST API for clients and stores its data on a **MongoDB Atlas M2** cluster (Replica Set - 3 nodes).\r\n\r\nRecently, I noticed some strange logs popping up:\r\n\r\n**MongoSocketReadException**\r\n\r\n```\r\n2023-02-17 15:09:46.998  INFO 1 --- [ngodb.net:27017] org.mongodb.driver.cluster               : Exception in monitor thread while connecting to server &lt;server-id&gt;.mongodb.net:27017\r\ncom.mongodb.MongoSocketReadException: Prematurely reached end of stream\r\n\tat com.mongodb.internal.connection.SocketStream.read(SocketStream.java:112) ~[mongodb-driver-core-4.6.1.jar:na]\r\n\tat com.mongodb.internal.connection.SocketStream.read(SocketStream.java:135) ~[mongodb-driver-core-4.6.1.jar:na]\r\n\tat com.mongodb.internal.connection.InternalStreamConnection.receiveResponseBuffers(InternalStreamConnection.java:713) ~[mongodb-driver-core-4.6.1.jar:na]\r\n\tat com.mongodb.internal.connection.InternalStreamConnection.receiveMessageWithAdditionalTimeout(InternalStreamConnection.java:571) ~[mongodb-driver-core-4.6.1.jar:na]\r\n\tat com.mongodb.internal.connection.InternalStreamConnection.receiveCommandMessageResponse(InternalStreamConnection.java:410) ~[mongodb-driver-core-4.6.1.jar:na]\r\n\tat com.mongodb.internal.connection.InternalStreamConnection.receive(InternalStreamConnection.java:369) ~[mongodb-driver-core-4.6.1.jar:na]\r\n\tat com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitorRunnable.lookupServerDescription(DefaultServerMonitor.java:221) ~[mongodb-driver-core-4.6.1.jar:na]\r\n\tat com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitorRunnable.run(DefaultServerMonitor.java:157) ~[mongodb-driver-core-4.6.1.jar:na]\r\n\tat java.base/java.lang.Thread.run(Unknown Source) ~[na:na]\r\n\r\n```\r\n\r\n**MongoSocketWriteException**\r\n\r\n```\r\n2023-02-17 15:09:47.015  INFO 1 --- [ngodb.net:27017] org.mongodb.driver.cluster               : Exception in monitor thread while connecting to server &lt;server-id&gt;.mongodb.net:27017\r\ncom.mongodb.MongoSocketWriteException: Exception sending message\r\n\tat com.mongodb.internal.connection.InternalStreamConnection.translateWriteException(InternalStreamConnection.java:684) ~[mongodb-driver-core-4.6.1.jar:na]\r\n\tat com.mongodb.internal.connection.InternalStreamConnection.sendMessage(InternalStreamConnection.java:555) ~[mongodb-driver-core-4.6.1.jar:na]\r\n\tat com.mongodb.internal.connection.InternalStreamConnection.sendCommandMessage(InternalStreamConnection.java:381) ~[mongodb-driver-core-4.6.1.jar:na]\r\n\tat com.mongodb.internal.connection.InternalStreamConnection.sendAndReceive(InternalStreamConnection.java:329) ~[mongodb-driver-core-4.6.1.jar:na]\r\n\tat com.mongodb.internal.connection.CommandHelper.sendAndReceive(CommandHelper.java:101) ~[mongodb-driver-core-4.6.1.jar:na]\r\n\tat com.mongodb.internal.connection.CommandHelper.executeCommand(CommandHelper.java:45) ~[mongodb-driver-core-4.6.1.jar:na]\r\n\tat com.mongodb.internal.connection.InternalStreamConnectionInitializer.initializeConnectionDescription(InternalStreamConnectionInitializer.java:131) ~[mongodb-driver-core-4.6.1.jar:na]\r\n\tat com.mongodb.internal.connection.InternalStreamConnectionInitializer.startHandshake(InternalStreamConnectionInitializer.java:73) ~[mongodb-driver-core-4.6.1.jar:na]\r\n\tat com.mongodb.internal.connection.InternalStreamConnection.open(InternalStreamConnection.java:182) ~[mongodb-driver-core-4.6.1.jar:na]\r\n\tat com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitorRunnable.lookupServerDescription(DefaultServerMonitor.java:193) ~[mongodb-driver-core-4.6.1.jar:na]\r\n\tat com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitorRunnable.run(DefaultServerMonitor.java:157) ~[mongodb-driver-core-4.6.1.jar:na]\r\n\tat java.base/java.lang.Thread.run(Unknown Source) ~[na:na]\r\nCaused by: java.net.SocketException: Connection reset\r\n\tat java.base/java.net.SocketInputStream.read(Unknown Source) ~[na:na]\r\n\tat java.base/java.net.SocketInputStream.read(Unknown Source) ~[na:na]\r\n\tat java.base/sun.security.ssl.SSLSocketInputRecord.read(Unknown Source) ~[na:na]\r\n\tat java.base/sun.security.ssl.SSLSocketInputRecord.readHeader(Unknown Source) ~[na:na]\r\n\tat java.base/sun.security.ssl.SSLSocketInputRecord.decode(Unknown Source) ~[na:na]\r\n\tat java.base/sun.security.ssl.SSLTransport.decode(Unknown Source) ~[na:na]\r\n\tat java.base/sun.security.ssl.SSLSocketImpl.decode(Unknown Source) ~[na:na]\r\n\tat java.base/sun.security.ssl.SSLSocketImpl.readHandshakeRecord(Unknown Source) ~[na:na]\r\n\tat java.base/sun.security.ssl.SSLSocketImpl.startHandshake(Unknown Source) ~[na:na]\r\n\tat java.base/sun.security.ssl.SSLSocketImpl.ensureNegotiated(Unknown Source) ~[na:na]\r\n\tat java.base/sun.security.ssl.SSLSocketImpl$AppOutputStream.write(Unknown Source) ~[na:na]\r\n\tat com.mongodb.internal.connection.SocketStream.write(SocketStream.java:99) ~[mongodb-driver-core-4.6.1.jar:na]\r\n\tat com.mongodb.internal.connection.InternalStreamConnection.sendMessage(InternalStreamConnection.java:552) ~[mongodb-driver-core-4.6.1.jar:na]\r\n\t... 10 common frames omitted\r\n```\r\n\r\n**MongoSocketOpenException**\r\n```\r\n2023-02-17 15:09:57.018  INFO 1 --- [ngodb.net:27017] org.mongodb.driver.cluster               : Exception in monitor thread while connecting to server &lt;server-id&gt;.mongodb.net:27017\r\ncom.mongodb.MongoSocketOpenException: Exception opening socket\r\n\tat com.mongodb.internal.connection.SocketStream.open(SocketStream.java:70) ~[mongodb-driver-core-4.6.1.jar:na]\r\n\tat com.mongodb.internal.connection.InternalStreamConnection.open(InternalStreamConnection.java:180) ~[mongodb-driver-core-4.6.1.jar:na]\r\n\tat com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitorRunnable.lookupServerDescription(DefaultServerMonitor.java:193) ~[mongodb-driver-core-4.6.1.jar:na]\r\n\tat com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitorRunnable.run(DefaultServerMonitor.java:157) ~[mongodb-driver-core-4.6.1.jar:na]\r\n\tat java.base/java.lang.Thread.run(Unknown Source) ~[na:na]\r\nCaused by: java.net.ConnectException: Connection refused (Connection refused)\r\n\tat java.base/java.net.PlainSocketImpl.socketConnect(Native Method) ~[na:na]\r\n\tat java.base/java.net.AbstractPlainSocketImpl.doConnect(Unknown Source) ~[na:na]\r\n\tat java.base/java.net.AbstractPlainSocketImpl.connectToAddress(Unknown Source) ~[na:na]\r\n\tat java.base/java.net.AbstractPlainSocketImpl.connect(Unknown Source) ~[na:na]\r\n\tat java.base/java.net.SocksSocketImpl.connect(Unknown Source) ~[na:na]\r\n\tat java.base/java.net.Socket.connect(Unknown Source) ~[na:na]\r\n\tat java.base/sun.security.ssl.SSLSocketImpl.connect(Unknown Source) ~[na:na]\r\n\tat com.mongodb.internal.connection.SocketStreamHelper.initialize(SocketStreamHelper.java:107) ~[mongodb-driver-core-4.6.1.jar:na]\r\n\tat com.mongodb.internal.connection.SocketStream.initializeSocket(SocketStream.java:79) ~[mongodb-driver-core-4.6.1.jar:na]\r\n\tat com.mongodb.internal.connection.SocketStream.open(SocketStream.java:65) ~[mongodb-driver-core-4.6.1.jar:na]\r\n\t... 4 common frames omitted\r\n```\r\n\r\nAs this seems to consistently happen after idle periods, I figured this may be a timeout issue. Various sources on the internet suggest setting `maxIdleTimeMS`, but to no avail. Please note that my service is working nonetheless and I can retrieve data via its REST API w/o any issues. It seems to be able to recover from the above-mentioned connection exceptions...\r\n\r\nMy connection string looks as follows:\r\n```\r\nmongodb+srv://&lt;user&gt;:&lt;password&gt;@&lt;server&gt;.mongodb.net/&lt;db&gt;?retryWrites=true&amp;w=majority&amp;maxIdleTimeMS=60000\r\n```\r\n\r\nWhat am I missing?\r\n","title":"MongoDB Atlas connections time out","body":"<p>I have a <strong>Spring Boot</strong> service deployed on <strong>AWS ECS</strong>. The service offers a REST API for clients and stores its data on a <strong>MongoDB Atlas M2</strong> cluster (Replica Set - 3 nodes).</p>\n<p>Recently, I noticed some strange logs popping up:</p>\n<p><strong>MongoSocketReadException</strong></p>\n<pre><code>2023-02-17 15:09:46.998  INFO 1 --- [ngodb.net:27017] org.mongodb.driver.cluster               : Exception in monitor thread while connecting to server &lt;server-id&gt;.mongodb.net:27017\ncom.mongodb.MongoSocketReadException: Prematurely reached end of stream\n    at com.mongodb.internal.connection.SocketStream.read(SocketStream.java:112) ~[mongodb-driver-core-4.6.1.jar:na]\n    at com.mongodb.internal.connection.SocketStream.read(SocketStream.java:135) ~[mongodb-driver-core-4.6.1.jar:na]\n    at com.mongodb.internal.connection.InternalStreamConnection.receiveResponseBuffers(InternalStreamConnection.java:713) ~[mongodb-driver-core-4.6.1.jar:na]\n    at com.mongodb.internal.connection.InternalStreamConnection.receiveMessageWithAdditionalTimeout(InternalStreamConnection.java:571) ~[mongodb-driver-core-4.6.1.jar:na]\n    at com.mongodb.internal.connection.InternalStreamConnection.receiveCommandMessageResponse(InternalStreamConnection.java:410) ~[mongodb-driver-core-4.6.1.jar:na]\n    at com.mongodb.internal.connection.InternalStreamConnection.receive(InternalStreamConnection.java:369) ~[mongodb-driver-core-4.6.1.jar:na]\n    at com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitorRunnable.lookupServerDescription(DefaultServerMonitor.java:221) ~[mongodb-driver-core-4.6.1.jar:na]\n    at com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitorRunnable.run(DefaultServerMonitor.java:157) ~[mongodb-driver-core-4.6.1.jar:na]\n    at java.base/java.lang.Thread.run(Unknown Source) ~[na:na]\n\n</code></pre>\n<p><strong>MongoSocketWriteException</strong></p>\n<pre><code>2023-02-17 15:09:47.015  INFO 1 --- [ngodb.net:27017] org.mongodb.driver.cluster               : Exception in monitor thread while connecting to server &lt;server-id&gt;.mongodb.net:27017\ncom.mongodb.MongoSocketWriteException: Exception sending message\n    at com.mongodb.internal.connection.InternalStreamConnection.translateWriteException(InternalStreamConnection.java:684) ~[mongodb-driver-core-4.6.1.jar:na]\n    at com.mongodb.internal.connection.InternalStreamConnection.sendMessage(InternalStreamConnection.java:555) ~[mongodb-driver-core-4.6.1.jar:na]\n    at com.mongodb.internal.connection.InternalStreamConnection.sendCommandMessage(InternalStreamConnection.java:381) ~[mongodb-driver-core-4.6.1.jar:na]\n    at com.mongodb.internal.connection.InternalStreamConnection.sendAndReceive(InternalStreamConnection.java:329) ~[mongodb-driver-core-4.6.1.jar:na]\n    at com.mongodb.internal.connection.CommandHelper.sendAndReceive(CommandHelper.java:101) ~[mongodb-driver-core-4.6.1.jar:na]\n    at com.mongodb.internal.connection.CommandHelper.executeCommand(CommandHelper.java:45) ~[mongodb-driver-core-4.6.1.jar:na]\n    at com.mongodb.internal.connection.InternalStreamConnectionInitializer.initializeConnectionDescription(InternalStreamConnectionInitializer.java:131) ~[mongodb-driver-core-4.6.1.jar:na]\n    at com.mongodb.internal.connection.InternalStreamConnectionInitializer.startHandshake(InternalStreamConnectionInitializer.java:73) ~[mongodb-driver-core-4.6.1.jar:na]\n    at com.mongodb.internal.connection.InternalStreamConnection.open(InternalStreamConnection.java:182) ~[mongodb-driver-core-4.6.1.jar:na]\n    at com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitorRunnable.lookupServerDescription(DefaultServerMonitor.java:193) ~[mongodb-driver-core-4.6.1.jar:na]\n    at com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitorRunnable.run(DefaultServerMonitor.java:157) ~[mongodb-driver-core-4.6.1.jar:na]\n    at java.base/java.lang.Thread.run(Unknown Source) ~[na:na]\nCaused by: java.net.SocketException: Connection reset\n    at java.base/java.net.SocketInputStream.read(Unknown Source) ~[na:na]\n    at java.base/java.net.SocketInputStream.read(Unknown Source) ~[na:na]\n    at java.base/sun.security.ssl.SSLSocketInputRecord.read(Unknown Source) ~[na:na]\n    at java.base/sun.security.ssl.SSLSocketInputRecord.readHeader(Unknown Source) ~[na:na]\n    at java.base/sun.security.ssl.SSLSocketInputRecord.decode(Unknown Source) ~[na:na]\n    at java.base/sun.security.ssl.SSLTransport.decode(Unknown Source) ~[na:na]\n    at java.base/sun.security.ssl.SSLSocketImpl.decode(Unknown Source) ~[na:na]\n    at java.base/sun.security.ssl.SSLSocketImpl.readHandshakeRecord(Unknown Source) ~[na:na]\n    at java.base/sun.security.ssl.SSLSocketImpl.startHandshake(Unknown Source) ~[na:na]\n    at java.base/sun.security.ssl.SSLSocketImpl.ensureNegotiated(Unknown Source) ~[na:na]\n    at java.base/sun.security.ssl.SSLSocketImpl$AppOutputStream.write(Unknown Source) ~[na:na]\n    at com.mongodb.internal.connection.SocketStream.write(SocketStream.java:99) ~[mongodb-driver-core-4.6.1.jar:na]\n    at com.mongodb.internal.connection.InternalStreamConnection.sendMessage(InternalStreamConnection.java:552) ~[mongodb-driver-core-4.6.1.jar:na]\n    ... 10 common frames omitted\n</code></pre>\n<p><strong>MongoSocketOpenException</strong></p>\n<pre><code>2023-02-17 15:09:57.018  INFO 1 --- [ngodb.net:27017] org.mongodb.driver.cluster               : Exception in monitor thread while connecting to server &lt;server-id&gt;.mongodb.net:27017\ncom.mongodb.MongoSocketOpenException: Exception opening socket\n    at com.mongodb.internal.connection.SocketStream.open(SocketStream.java:70) ~[mongodb-driver-core-4.6.1.jar:na]\n    at com.mongodb.internal.connection.InternalStreamConnection.open(InternalStreamConnection.java:180) ~[mongodb-driver-core-4.6.1.jar:na]\n    at com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitorRunnable.lookupServerDescription(DefaultServerMonitor.java:193) ~[mongodb-driver-core-4.6.1.jar:na]\n    at com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitorRunnable.run(DefaultServerMonitor.java:157) ~[mongodb-driver-core-4.6.1.jar:na]\n    at java.base/java.lang.Thread.run(Unknown Source) ~[na:na]\nCaused by: java.net.ConnectException: Connection refused (Connection refused)\n    at java.base/java.net.PlainSocketImpl.socketConnect(Native Method) ~[na:na]\n    at java.base/java.net.AbstractPlainSocketImpl.doConnect(Unknown Source) ~[na:na]\n    at java.base/java.net.AbstractPlainSocketImpl.connectToAddress(Unknown Source) ~[na:na]\n    at java.base/java.net.AbstractPlainSocketImpl.connect(Unknown Source) ~[na:na]\n    at java.base/java.net.SocksSocketImpl.connect(Unknown Source) ~[na:na]\n    at java.base/java.net.Socket.connect(Unknown Source) ~[na:na]\n    at java.base/sun.security.ssl.SSLSocketImpl.connect(Unknown Source) ~[na:na]\n    at com.mongodb.internal.connection.SocketStreamHelper.initialize(SocketStreamHelper.java:107) ~[mongodb-driver-core-4.6.1.jar:na]\n    at com.mongodb.internal.connection.SocketStream.initializeSocket(SocketStream.java:79) ~[mongodb-driver-core-4.6.1.jar:na]\n    at com.mongodb.internal.connection.SocketStream.open(SocketStream.java:65) ~[mongodb-driver-core-4.6.1.jar:na]\n    ... 4 common frames omitted\n</code></pre>\n<p>As this seems to consistently happen after idle periods, I figured this may be a timeout issue. Various sources on the internet suggest setting <code>maxIdleTimeMS</code>, but to no avail. Please note that my service is working nonetheless and I can retrieve data via its REST API w/o any issues. It seems to be able to recover from the above-mentioned connection exceptions...</p>\n<p>My connection string looks as follows:</p>\n<pre><code>mongodb+srv://&lt;user&gt;:&lt;password&gt;@&lt;server&gt;.mongodb.net/&lt;db&gt;?retryWrites=true&amp;w=majority&amp;maxIdleTimeMS=60000\n</code></pre>\n<p>What am I missing?</p>\n"},{"tags":["java","hibernate","curl"],"comments":[{"owner":{"account_id":4362282,"reputation":92954,"user_id":3558960,"accept_rate":60,"display_name":"Robby Cornelissen"},"score":0,"creation_date":1679029790,"post_id":75763937,"comment_id":133651103,"body_markdown":"Have you tried logging the ID _before_ you call `updateCustomer()`? Because from that debugging screenshot, there&#39;s no way of telling when `customerDetails` was evaluated.","body":"Have you tried logging the ID <i>before</i> you call <code>updateCustomer()</code>? Because from that debugging screenshot, there&#39;s no way of telling when <code>customerDetails</code> was evaluated."},{"owner":{"account_id":11741622,"reputation":302,"user_id":8593764,"display_name":"jennifer ruurs"},"score":0,"creation_date":1679030134,"post_id":75763937,"comment_id":133651150,"body_markdown":"Yes I did, I added another picture and edited my code to show the problem better.","body":"Yes I did, I added another picture and edited my code to show the problem better."},{"owner":{"account_id":10662643,"reputation":689,"user_id":7899567,"display_name":"Anton Tokmakov"},"score":0,"creation_date":1679035756,"post_id":75763937,"comment_id":133651898,"body_markdown":"try to put Column annotation for CustomerId property too. It&#39;s only difference between other properties","body":"try to put Column annotation for CustomerId property too. It&#39;s only difference between other properties"},{"owner":{"account_id":11741622,"reputation":302,"user_id":8593764,"display_name":"jennifer ruurs"},"score":0,"creation_date":1679036496,"post_id":75763937,"comment_id":133652004,"body_markdown":"@AntonTokmakov you mean adding `@Column(name=&quot;CustomerId&quot;)\n  private long CustomerId;` that did not help unfortunately","body":"@AntonTokmakov you mean adding <code>@Column(name=&quot;CustomerId&quot;)   private long CustomerId;</code> that did not help unfortunately"},{"owner":{"account_id":17520379,"reputation":1536,"user_id":12706564,"display_name":"Emanuel Trandafir"},"score":0,"creation_date":1679039490,"post_id":75763937,"comment_id":133652683,"body_markdown":"I believe @RobbyCornelissen meant you should debug and check what is the payload before updating (not the result). Additionally, you can log the generated SQL with this: \n`logging.level.org.hibernate.SQL=DEBUG \nlogging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE` \ncan you update the question with this information? Also, maybe share what is happening in financeService - is it a straight-forward call to the repo?","body":"I believe @RobbyCornelissen meant you should debug and check what is the payload before updating (not the result). Additionally, you can log the generated SQL with this:  <code>logging.level.org.hibernate.SQL=DEBUG  logging.level.org.hibernate.type.descriptor.sql.BasicBinder=&zwnj;&#8203;TRACE</code>  can you update the question with this information? Also, maybe share what is happening in financeService - is it a straight-forward call to the repo?"},{"owner":{"account_id":11741622,"reputation":302,"user_id":8593764,"display_name":"jennifer ruurs"},"score":0,"creation_date":1679039775,"post_id":75763937,"comment_id":133652738,"body_markdown":"@EmanuelTrandafir the hibernate part is not relevant because the object `Customer c1 = customerDetails;` does not with the hibernate yet or am I wrong? because customerDetails is the object that i pass with my curl post","body":"@EmanuelTrandafir the hibernate part is not relevant because the object <code>Customer c1 = customerDetails;</code> does not with the hibernate yet or am I wrong? because customerDetails is the object that i pass with my curl post"},{"owner":{"account_id":17520379,"reputation":1536,"user_id":12706564,"display_name":"Emanuel Trandafir"},"score":0,"creation_date":1679040180,"post_id":75763937,"comment_id":133652842,"body_markdown":"oh, so you have this problem only when deserializing this json (before reaching hibernate). what else is in the `Customer` class? do you have getters and setters? What constructors do you have? `0` will be the default value for a long primitive and default constructor with no args. maybe jackson is missing a setter for that field?","body":"oh, so you have this problem only when deserializing this json (before reaching hibernate). what else is in the <code>Customer</code> class? do you have getters and setters? What constructors do you have? <code>0</code> will be the default value for a long primitive and default constructor with no args. maybe jackson is missing a setter for that field?"},{"owner":{"account_id":25866694,"reputation":191,"user_id":19598245,"display_name":"Phil Ku"},"score":0,"creation_date":1679041453,"post_id":75763937,"comment_id":133653121,"body_markdown":"@jenniferruurs would you mind sharing the getters and setters of the `Customer` class? As I saw your curl body `{&quot;CustomerId&quot;:1,&quot;name&quot;:&quot;Jen&quot;,&quot;street&quot;:&quot;Spanker&quot;,&quot;houseNumber&quot;:&quot;20&quot;,&quot;zipcode&quot;:&quot;3077ZD&quot;,&quot;email&quot;:&quot;nakzo&quot;,&quot;place&quot;:&quot;Amsterveen&quot;, &quot;phonenumber&quot;:&quot;06234234&quot;}`, when I change `CustomerId` to `customerId`, it can respond with your input value `1`.","body":"@jenniferruurs would you mind sharing the getters and setters of the <code>Customer</code> class? As I saw your curl body <code>{&quot;CustomerId&quot;:1,&quot;name&quot;:&quot;Jen&quot;,&quot;street&quot;:&quot;Spanker&quot;,&quot;houseNumber&zwnj;&#8203;&quot;:&quot;20&quot;,&quot;zipcode&quot;:&quot;30&zwnj;&#8203;77ZD&quot;,&quot;email&quot;:&quot;nakzo&zwnj;&#8203;&quot;,&quot;place&quot;:&quot;Amstervee&zwnj;&#8203;n&quot;, &quot;phonenumber&quot;:&quot;06234234&quot;}</code>, when I change <code>CustomerId</code> to <code>customerId</code>, it can respond with your input value <code>1</code>."},{"owner":{"account_id":25866694,"reputation":191,"user_id":19598245,"display_name":"Phil Ku"},"score":2,"creation_date":1679041536,"post_id":75763937,"comment_id":133653138,"body_markdown":"can you try changing your body to `{&quot;customerId&quot;:1,&quot;name&quot;:&quot;Jen&quot;,&quot;street&quot;:&quot;Spanker&quot;,&quot;houseNumber&quot;:&quot;20&quot;,&quot;zipcode&quot;:&quot;3077ZD&quot;,&quot;email&quot;:&quot;nakzo&quot;,&quot;place&quot;:&quot;Amsterveen&quot;, &quot;phonenumber&quot;:&quot;06234234&quot;}` and see if it changes the output?","body":"can you try changing your body to <code>{&quot;customerId&quot;:1,&quot;name&quot;:&quot;Jen&quot;,&quot;street&quot;:&quot;Spanker&quot;,&quot;houseNumber&zwnj;&#8203;&quot;:&quot;20&quot;,&quot;zipcode&quot;:&quot;30&zwnj;&#8203;77ZD&quot;,&quot;email&quot;:&quot;nakzo&zwnj;&#8203;&quot;,&quot;place&quot;:&quot;Amstervee&zwnj;&#8203;n&quot;, &quot;phonenumber&quot;:&quot;06234234&quot;}</code> and see if it changes the output?"},{"owner":{"account_id":11741622,"reputation":302,"user_id":8593764,"display_name":"jennifer ruurs"},"score":0,"creation_date":1679041903,"post_id":75763937,"comment_id":133653216,"body_markdown":"@PhilKu changing the capital letter was the issue indeed!","body":"@PhilKu changing the capital letter was the issue indeed!"}],"owner":{"account_id":11741622,"reputation":302,"user_id":8593764,"display_name":"jennifer ruurs"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1679041564,"creation_date":1679029551,"question_id":75763937,"body_markdown":"I have model customer\r\n```\r\n\r\n@Entity\r\n@Table(name=&quot;t_customer&quot;)\r\n@XmlRootElement\r\npublic class Customer {\r\n\r\n\r\n  @Id\r\n  @GeneratedValue(strategy=GenerationType.SEQUENCE,generator=&quot;financeSeqGen&quot;)\r\n  @SequenceGenerator(name=&quot;financeSeqGen&quot;,sequenceName=&quot;finance_sequence&quot;)\r\n  @Column(name=&quot;CustomerId&quot;)\r\n  private long CustomerId;\r\n  @Column(name=&quot;name&quot;)\r\n  private String name;\r\n  @Column(name=&quot;street&quot;)\r\n  private String street;\r\n  @Column(name=&quot;houseNumber&quot;)\r\n  private String houseNumber;\r\n  @Column(name=&quot;zipcode&quot;)\r\n  private String zipcode;\r\n  @Column(name=&quot;place&quot;)\r\n  private String place;\r\n  @Column(name=&quot;email&quot;)\r\n  private String email;\r\n  @Column(name=&quot;phonenumber&quot;)\r\n  private String phonenumber;\r\n  @OneToMany(mappedBy=&quot;customer&quot;)\r\n  private Set&lt;Contract&gt; contracts = new HashSet&lt;&gt;();\r\n\r\n  public long getCustomerId() {\r\n    return CustomerId;\r\n  }\r\n\r\n  public void setCustomerId(long customerId) {\r\n    CustomerId = customerId;\r\n  }\r\n\r\n  public String getName() {\r\n    return name;\r\n  }\r\n\r\n  public void setName(String name) {\r\n    this.name = name;\r\n  }\r\n\r\n  public String getStreet() {\r\n    return street;\r\n  }\r\n\r\n  public void setStreet(String street) {\r\n    this.street = street;\r\n  }\r\n\r\n  public String getHouseNumber() {\r\n    return houseNumber;\r\n  }\r\n\r\n  public void setHouseNumber(String houseNumber) {\r\n    this.houseNumber = houseNumber;\r\n  }\r\n\r\n  public String getZipcode() {\r\n    return zipcode;\r\n  }\r\n\r\n  public void setZipcode(String zipcode) {\r\n    this.zipcode = zipcode;\r\n  }\r\n\r\n  public String getPlace() {\r\n    return place;\r\n  }\r\n\r\n  public void setPlace(String place) {\r\n    this.place = place;\r\n  }\r\n\r\n  public String getEmail() {\r\n    return email;\r\n  }\r\n\r\n  public void setEmail(String email) {\r\n    this.email = email;\r\n  }\r\n\r\n  public String getPhonenumber() {\r\n    return phonenumber;\r\n  }\r\n\r\n  public void setPhonenumber(String phonenumber) {\r\n    this.phonenumber = phonenumber;\r\n  }\r\n\r\n  @XmlTransient\r\n  @JsonIgnore\r\n  public Set&lt;Contract&gt; getContracts() {\r\n    return contracts;\r\n  }\r\n\r\n  public void setContracts(Set&lt;Contract&gt; contracts) {\r\n    this.contracts = contracts;\r\n  }\r\n\r\n\r\n  @Override\r\n  public String toString() {\r\n    return &quot;Customer[&quot; +\r\n        &quot;CustomerId=&quot; + CustomerId +\r\n        &quot;, name=&#39;&quot; + name + &#39;\\&#39;&#39; +\r\n        &quot;, street=&#39;&quot; + street + &#39;\\&#39;&#39; +\r\n        &quot;, houseNumber=&#39;&quot; + houseNumber + &#39;\\&#39;&#39; +\r\n        &quot;, zipcode=&#39;&quot; + zipcode + &#39;\\&#39;&#39; +\r\n        &quot;, place=&#39;&quot; + place + &#39;\\&#39;&#39; +\r\n        &quot;, email=&#39;&quot; + email + &#39;\\&#39;&#39; +\r\n        &quot;, phonenumber=&#39;&quot; + phonenumber + &#39;\\&#39;&#39; +\r\n        &#39;]&#39;;\r\n  }\r\n}\r\n```\r\n\r\nAnd I try to update the exciting Customer with ID 1(The update part works):\r\n```\r\n  @PostMapping(&quot;/custer&quot;)\r\n  public ResponseEntity&lt;Customer&gt; updateCustomer(@RequestBody Customer customerDetails){\r\n    Customer c1 = customerDetails;\r\n    //Customer customer = financeService.updateCustomer(c1);\r\n    return ResponseEntity.ok(c1);\r\n  }\r\n```\r\n\r\nThis is the result of Debugging:\r\n[![enter image description here][1]][1]\r\n\r\nAs you see the customerId is changing from 1 to zero (this also occurs if I change 1 to 2 or something else)\r\n\r\n\r\n\r\n\r\nMy Curl request is like:\r\n`curl --request POST --header &quot;Content-Type: application/json&quot; --data &#39;{&quot;CustomerId&quot;:1,&quot;name&quot;:&quot;Jen&quot;,&quot;street&quot;:&quot;Spanker&quot;,&quot;houseNumber&quot;:&quot;20&quot;,&quot;zipcode&quot;:&quot;3077ZD&quot;,&quot;email&quot;:&quot;nakzo&quot;,&quot;place&quot;:&quot;Amsterveen&quot;, &quot;phonenumber&quot;:&quot;06234234&quot;}&#39; localhost:5050/finance/update/custer`\r\n\r\nWhy is the customerId with 1 changing to 0?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/W4ppl.png\r\n\r\n","title":"I am not able to receive the correct ID with from my Spring restApi","body":"<p>I have model customer</p>\n<pre><code>\n@Entity\n@Table(name=&quot;t_customer&quot;)\n@XmlRootElement\npublic class Customer {\n\n\n  @Id\n  @GeneratedValue(strategy=GenerationType.SEQUENCE,generator=&quot;financeSeqGen&quot;)\n  @SequenceGenerator(name=&quot;financeSeqGen&quot;,sequenceName=&quot;finance_sequence&quot;)\n  @Column(name=&quot;CustomerId&quot;)\n  private long CustomerId;\n  @Column(name=&quot;name&quot;)\n  private String name;\n  @Column(name=&quot;street&quot;)\n  private String street;\n  @Column(name=&quot;houseNumber&quot;)\n  private String houseNumber;\n  @Column(name=&quot;zipcode&quot;)\n  private String zipcode;\n  @Column(name=&quot;place&quot;)\n  private String place;\n  @Column(name=&quot;email&quot;)\n  private String email;\n  @Column(name=&quot;phonenumber&quot;)\n  private String phonenumber;\n  @OneToMany(mappedBy=&quot;customer&quot;)\n  private Set&lt;Contract&gt; contracts = new HashSet&lt;&gt;();\n\n  public long getCustomerId() {\n    return CustomerId;\n  }\n\n  public void setCustomerId(long customerId) {\n    CustomerId = customerId;\n  }\n\n  public String getName() {\n    return name;\n  }\n\n  public void setName(String name) {\n    this.name = name;\n  }\n\n  public String getStreet() {\n    return street;\n  }\n\n  public void setStreet(String street) {\n    this.street = street;\n  }\n\n  public String getHouseNumber() {\n    return houseNumber;\n  }\n\n  public void setHouseNumber(String houseNumber) {\n    this.houseNumber = houseNumber;\n  }\n\n  public String getZipcode() {\n    return zipcode;\n  }\n\n  public void setZipcode(String zipcode) {\n    this.zipcode = zipcode;\n  }\n\n  public String getPlace() {\n    return place;\n  }\n\n  public void setPlace(String place) {\n    this.place = place;\n  }\n\n  public String getEmail() {\n    return email;\n  }\n\n  public void setEmail(String email) {\n    this.email = email;\n  }\n\n  public String getPhonenumber() {\n    return phonenumber;\n  }\n\n  public void setPhonenumber(String phonenumber) {\n    this.phonenumber = phonenumber;\n  }\n\n  @XmlTransient\n  @JsonIgnore\n  public Set&lt;Contract&gt; getContracts() {\n    return contracts;\n  }\n\n  public void setContracts(Set&lt;Contract&gt; contracts) {\n    this.contracts = contracts;\n  }\n\n\n  @Override\n  public String toString() {\n    return &quot;Customer[&quot; +\n        &quot;CustomerId=&quot; + CustomerId +\n        &quot;, name='&quot; + name + '\\'' +\n        &quot;, street='&quot; + street + '\\'' +\n        &quot;, houseNumber='&quot; + houseNumber + '\\'' +\n        &quot;, zipcode='&quot; + zipcode + '\\'' +\n        &quot;, place='&quot; + place + '\\'' +\n        &quot;, email='&quot; + email + '\\'' +\n        &quot;, phonenumber='&quot; + phonenumber + '\\'' +\n        ']';\n  }\n}\n</code></pre>\n<p>And I try to update the exciting Customer with ID 1(The update part works):</p>\n<pre><code>  @PostMapping(&quot;/custer&quot;)\n  public ResponseEntity&lt;Customer&gt; updateCustomer(@RequestBody Customer customerDetails){\n    Customer c1 = customerDetails;\n    //Customer customer = financeService.updateCustomer(c1);\n    return ResponseEntity.ok(c1);\n  }\n</code></pre>\n<p>This is the result of Debugging:\n<a href=\"https://i.stack.imgur.com/W4ppl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/W4ppl.png\" alt=\"enter image description here\" /></a></p>\n<p>As you see the customerId is changing from 1 to zero (this also occurs if I change 1 to 2 or something else)</p>\n<p>My Curl request is like:\n<code>curl --request POST --header &quot;Content-Type: application/json&quot; --data '{&quot;CustomerId&quot;:1,&quot;name&quot;:&quot;Jen&quot;,&quot;street&quot;:&quot;Spanker&quot;,&quot;houseNumber&quot;:&quot;20&quot;,&quot;zipcode&quot;:&quot;3077ZD&quot;,&quot;email&quot;:&quot;nakzo&quot;,&quot;place&quot;:&quot;Amsterveen&quot;, &quot;phonenumber&quot;:&quot;06234234&quot;}' localhost:5050/finance/update/custer</code></p>\n<p>Why is the customerId with 1 changing to 0?</p>\n"},{"tags":["java","android","c++","java-native-interface","buffer"],"owner":{"account_id":907717,"reputation":417,"user_id":942263,"accept_rate":29,"display_name":"Arun AC"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679041550,"creation_date":1679037851,"question_id":75764754,"body_markdown":"I am rendering camera frame data over the graphics buffer created using &quot;::android::GraphicBuffer()&quot; in native C++ layer. \r\nI need to pass this buffer to upper Java layer to display it on a view.\r\n\r\nHow can I access the native buffer through JNI in java layer?\r\n","title":"How to access graphicsbuffer from Native C++ to Java Layer using JNI","body":"<p>I am rendering camera frame data over the graphics buffer created using &quot;::android::GraphicBuffer()&quot; in native C++ layer.\nI need to pass this buffer to upper Java layer to display it on a view.</p>\n<p>How can I access the native buffer through JNI in java layer?</p>\n"},{"tags":["java","spring","neo4j","spring-data-neo4j"],"answers":[{"comments":[{"owner":{"account_id":4054391,"reputation":929,"user_id":3332879,"accept_rate":38,"display_name":"Cugomastik"},"score":0,"creation_date":1679060192,"post_id":75765221,"comment_id":133657767,"body_markdown":"Thank you. Do I have to use NodeEntity? Can I achieve the same thing with Node annotation? I have tried Neo4jClient and got the proper response for a simple query. I then tried a more complex query but It did not return the results that I had on the browser. I also checked the custom repo usage but in my case, I am using Query on the interface function and I don&#39;t have anything to fill in the Impl&#39;s function so why the ChildrenRepository is not enough by itself? It can be like any other CrudRepository with the Query on top of the function definition.","body":"Thank you. Do I have to use NodeEntity? Can I achieve the same thing with Node annotation? I have tried Neo4jClient and got the proper response for a simple query. I then tried a more complex query but It did not return the results that I had on the browser. I also checked the custom repo usage but in my case, I am using Query on the interface function and I don&#39;t have anything to fill in the Impl&#39;s function so why the ChildrenRepository is not enough by itself? It can be like any other CrudRepository with the Query on top of the function definition."},{"owner":{"account_id":4054391,"reputation":929,"user_id":3332879,"accept_rate":38,"display_name":"Cugomastik"},"score":0,"creation_date":1679061033,"post_id":75765221,"comment_id":133657982,"body_markdown":"Also, can you please clarify what you mean by &quot;loose&quot;? Thanks a lot.","body":"Also, can you please clarify what you mean by &quot;loose&quot;? Thanks a lot."},{"owner":{"account_id":3133300,"reputation":7957,"user_id":2650436,"accept_rate":80,"display_name":"meistermeier"},"score":0,"creation_date":1679142653,"post_id":75765221,"comment_id":133670452,"body_markdown":"Sorry, I meant to say `@Node` (the NodeEntity annotation is from another OGM framework). The data you are returning does not represent mappable data for SDN in the way it expects a node to get mapped. That&#39;s why I said _loose_ in this context. So returning the map with some values and (empty list) of children nodes does not say anything to SDN. In the documentation is also a reference for custom queries and what SDN expects to work properly: https://docs.spring.io/spring-data/neo4j/docs/current/reference/html/#custom-queries","body":"Sorry, I meant to say <code>@Node</code> (the NodeEntity annotation is from another OGM framework). The data you are returning does not represent mappable data for SDN in the way it expects a node to get mapped. That&#39;s why I said <i>loose</i> in this context. So returning the map with some values and (empty list) of children nodes does not say anything to SDN. In the documentation is also a reference for custom queries and what SDN expects to work properly: <a href=\"https://docs.spring.io/spring-data/neo4j/docs/current/reference/html/#custom-queries\" rel=\"nofollow noreferrer\">docs.spring.io/spring-data/neo4j/docs/current/reference/html&zwnj;&#8203;/&hellip;</a>"}],"tags":[],"owner":{"account_id":3133300,"reputation":7957,"user_id":2650436,"accept_rate":80,"display_name":"meistermeier"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679041390,"creation_date":1679041390,"answer_id":75765221,"question_id":75758455,"body_markdown":"Spring Data Neo4j repositories, like all Spring Data repositories, operate entity-centric. This means it will happily map anything that will result in a proper instance of your domain classes (the ones annotated with `NodeEntity`). For this it needs for example the id and labels.\r\nYou are returning a map with loose values and SDN does not really know what to do with this.\r\n\r\nThere are a few options:\r\n1. You could use the `Neo4jClient` for this use-case. \r\nIt has a fluent API to execute the query, bind parameters and map the result with a custom mapper. https://docs.spring.io/spring-data/neo4j/docs/current/reference/html/#neo4j-client\r\nAlso, it participates in the Spring transactions as the repository does.\r\n2. You could write your own repository extension to encapsulate (1) within the repository. This might be the way to go if you are using more functionality of the `ChildrenRepository`. https://docs.spring.io/spring-data/neo4j/docs/current/reference/html/#repositories.custom-implementations\r\n3. You could define DTOs for the data collection. But they are a little bit limited and won&#39;t support the map structure. You would have to return the values flatten. Here is a repository that should give you an impression: https://github.com/spring-projects/spring-data-neo4j/blob/a41fbad5ab2976db3b5bc2e2d0018afab6920678/src/test/java/org/springframework/data/neo4j/integration/lite/SomeDomainRepository.java#L28","title":"Spring Data Neo4j - Null Response","body":"<p>Spring Data Neo4j repositories, like all Spring Data repositories, operate entity-centric. This means it will happily map anything that will result in a proper instance of your domain classes (the ones annotated with <code>NodeEntity</code>). For this it needs for example the id and labels.\nYou are returning a map with loose values and SDN does not really know what to do with this.</p>\n<p>There are a few options:</p>\n<ol>\n<li>You could use the <code>Neo4jClient</code> for this use-case.\nIt has a fluent API to execute the query, bind parameters and map the result with a custom mapper. <a href=\"https://docs.spring.io/spring-data/neo4j/docs/current/reference/html/#neo4j-client\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-data/neo4j/docs/current/reference/html/#neo4j-client</a>\nAlso, it participates in the Spring transactions as the repository does.</li>\n<li>You could write your own repository extension to encapsulate (1) within the repository. This might be the way to go if you are using more functionality of the <code>ChildrenRepository</code>. <a href=\"https://docs.spring.io/spring-data/neo4j/docs/current/reference/html/#repositories.custom-implementations\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-data/neo4j/docs/current/reference/html/#repositories.custom-implementations</a></li>\n<li>You could define DTOs for the data collection. But they are a little bit limited and won't support the map structure. You would have to return the values flatten. Here is a repository that should give you an impression: <a href=\"https://github.com/spring-projects/spring-data-neo4j/blob/a41fbad5ab2976db3b5bc2e2d0018afab6920678/src/test/java/org/springframework/data/neo4j/integration/lite/SomeDomainRepository.java#L28\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-data-neo4j/blob/a41fbad5ab2976db3b5bc2e2d0018afab6920678/src/test/java/org/springframework/data/neo4j/integration/lite/SomeDomainRepository.java#L28</a></li>\n</ol>\n"}],"owner":{"account_id":4054391,"reputation":929,"user_id":3332879,"accept_rate":38,"display_name":"Cugomastik"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":185,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1679041390,"creation_date":1678981300,"question_id":75758455,"body_markdown":"I am trying to run a custom CQL using Spring Data Neo4j. I believe I have most of the code working but I am getting a **null** value. Below is the code I have so far;\r\n\r\n**.properties:**\r\n\r\n    spring.neo4j.uri=bolt://localhost:9486\r\n    spring.neo4j.authentication.username=neo4j\r\n    spring.neo4j.authentication.password=password\r\n    logging.level.org.springframework.data.neo4j=DEBUG\r\n\r\n**pom.xml**\r\n \r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-data-neo4j&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n    &lt;!--        &lt;dependency&gt;--&gt;\r\n    &lt;!--            &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;--&gt;\r\n    &lt;!--            &lt;artifactId&gt;spring-data-neo4j&lt;/artifactId&gt;--&gt;\r\n    &lt;!--        &lt;/dependency&gt;--&gt;\r\n\r\n**Entity class**\r\n\r\n    @Node(&quot;Job&quot;)\r\n    @AllArgsConstructor\r\n    @NoArgsConstructor\r\n    @Data\r\n    public class Children {\r\n    \r\n        @Id\r\n        @GeneratedValue\r\n        private long id;\r\n        private ArrayList&lt;Children&gt; children;\r\n        private Text text;\r\n    \r\n    \r\n        @Getter\r\n        @Setter\r\n        public static class Text {\r\n            public String name;\r\n        }\r\n    }\r\n\r\n**Repository**\r\n\r\n    import com.horsefly.analyticsapi.model.node4j.Children;\r\n    import org.springframework.data.neo4j.repository.Neo4jRepository;\r\n    import org.springframework.data.neo4j.repository.query.Query;\r\n    import org.springframework.data.repository.query.Param;\r\n    import org.springframework.stereotype.Repository;\r\n    \r\n    @Repository\r\n    public interface ChildrenRepository extends Neo4jRepository&lt;Children, Long&gt; {\r\n    \r\n        @Query(&quot;MATCH (j0:Job {Position: &#39;supervisor&#39;, jobCountryCode:&#39;uk&#39;}) WHERE j0.id=1 RETURN {text:{name: j0.Position}, children: []} AS Tree&quot;)\r\n        Children cqlTest();\r\n    \r\n    }\r\n\r\n**Component**\r\n\r\n    @Component\r\n    public class Neo4jBuilder {\r\n    \r\n        @Autowired\r\n        private ChildrenRepository childrenRepository;\r\n    \r\n        public String getChildren() {\r\n    \r\n            return childrenRepository.cqlTest();\r\n    \r\n        }\r\n    }\r\n\r\nI am trying to log the query that I am sending via the property in .properties but I am not seeing anything interesting. \r\n\r\n    2023-03-16 15:29:51.980 DEBUG 17480 --- [           main] o.s.d.n.r.c.StartupLogger                : Bootstrapping reactive Neo4j repositories based on SDN v6.1.6 with Spring Data Commons v2.5.6 and Neo4j Driver v4.2.7-b09866e7932eff1844519ce1a75c0cfdc3c782b3.\r\n    2023-03-16 15:29:52.005 DEBUG 17480 --- [           main] o.s.d.n.r.c.StartupLogger                : Bootstrapping imperative Neo4j repositories based on SDN v6.1.6 with Spring Data Commons v2.5.6 and Neo4j Driver v4.2.7-b09866e7932eff1844519ce1a75c0cfdc3c782b3.\r\n\r\n\r\nAlso, I used both dependencies individually and did not see any difference. \r\n\r\nThe &quot;*cqlTest*&quot; function returns null. However, when I run the same query on the browser, I am seeing the below result. \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/J1UwK.png\r\n\r\nI have a matching node (Job) and fields in the Children object but not sure why I am getting a null. Any help would be great. I tried **String** as the return type on the cqlTest() but no luck there as well\r\nThanks","title":"Spring Data Neo4j - Null Response","body":"<p>I am trying to run a custom CQL using Spring Data Neo4j. I believe I have most of the code working but I am getting a <strong>null</strong> value. Below is the code I have so far;</p>\n<p><strong>.properties:</strong></p>\n<pre><code>spring.neo4j.uri=bolt://localhost:9486\nspring.neo4j.authentication.username=neo4j\nspring.neo4j.authentication.password=password\nlogging.level.org.springframework.data.neo4j=DEBUG\n</code></pre>\n<p><strong>pom.xml</strong></p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-data-neo4j&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n&lt;!--        &lt;dependency&gt;--&gt;\n&lt;!--            &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;--&gt;\n&lt;!--            &lt;artifactId&gt;spring-data-neo4j&lt;/artifactId&gt;--&gt;\n&lt;!--        &lt;/dependency&gt;--&gt;\n</code></pre>\n<p><strong>Entity class</strong></p>\n<pre><code>@Node(&quot;Job&quot;)\n@AllArgsConstructor\n@NoArgsConstructor\n@Data\npublic class Children {\n\n    @Id\n    @GeneratedValue\n    private long id;\n    private ArrayList&lt;Children&gt; children;\n    private Text text;\n\n\n    @Getter\n    @Setter\n    public static class Text {\n        public String name;\n    }\n}\n</code></pre>\n<p><strong>Repository</strong></p>\n<pre><code>import com.horsefly.analyticsapi.model.node4j.Children;\nimport org.springframework.data.neo4j.repository.Neo4jRepository;\nimport org.springframework.data.neo4j.repository.query.Query;\nimport org.springframework.data.repository.query.Param;\nimport org.springframework.stereotype.Repository;\n\n@Repository\npublic interface ChildrenRepository extends Neo4jRepository&lt;Children, Long&gt; {\n\n    @Query(&quot;MATCH (j0:Job {Position: 'supervisor', jobCountryCode:'uk'}) WHERE j0.id=1 RETURN {text:{name: j0.Position}, children: []} AS Tree&quot;)\n    Children cqlTest();\n\n}\n</code></pre>\n<p><strong>Component</strong></p>\n<pre><code>@Component\npublic class Neo4jBuilder {\n\n    @Autowired\n    private ChildrenRepository childrenRepository;\n\n    public String getChildren() {\n\n        return childrenRepository.cqlTest();\n\n    }\n}\n</code></pre>\n<p>I am trying to log the query that I am sending via the property in .properties but I am not seeing anything interesting.</p>\n<pre><code>2023-03-16 15:29:51.980 DEBUG 17480 --- [           main] o.s.d.n.r.c.StartupLogger                : Bootstrapping reactive Neo4j repositories based on SDN v6.1.6 with Spring Data Commons v2.5.6 and Neo4j Driver v4.2.7-b09866e7932eff1844519ce1a75c0cfdc3c782b3.\n2023-03-16 15:29:52.005 DEBUG 17480 --- [           main] o.s.d.n.r.c.StartupLogger                : Bootstrapping imperative Neo4j repositories based on SDN v6.1.6 with Spring Data Commons v2.5.6 and Neo4j Driver v4.2.7-b09866e7932eff1844519ce1a75c0cfdc3c782b3.\n</code></pre>\n<p>Also, I used both dependencies individually and did not see any difference.</p>\n<p>The &quot;<em>cqlTest</em>&quot; function returns null. However, when I run the same query on the browser, I am seeing the below result.</p>\n<p><a href=\"https://i.stack.imgur.com/J1UwK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/J1UwK.png\" alt=\"enter image description here\" /></a></p>\n<p>I have a matching node (Job) and fields in the Children object but not sure why I am getting a null. Any help would be great. I tried <strong>String</strong> as the return type on the cqlTest() but no luck there as well\nThanks</p>\n"},{"tags":["java","spring","spring-boot","spring-batch"],"answers":[{"comments":[{"owner":{"account_id":1078432,"reputation":69,"user_id":1076078,"display_name":"IdealOutage"},"score":0,"creation_date":1679048741,"post_id":75765175,"comment_id":133654963,"body_markdown":"Thank you very much! The Poller looks exactly what I was looking for. Would you recommend using it in the execute() method of a Tasklet? If this works, I could separate my Job cleanly into three steps, i.e. submission -&gt; polling your recommended Poller API -&gt; result retrieval. Thanks!","body":"Thank you very much! The Poller looks exactly what I was looking for. Would you recommend using it in the execute() method of a Tasklet? If this works, I could separate my Job cleanly into three steps, i.e. submission -&gt; polling your recommended Poller API -&gt; result retrieval. Thanks!"},{"owner":{"account_id":6482932,"reputation":29552,"user_id":5019386,"display_name":"Mahmoud Ben Hassine"},"score":0,"creation_date":1679060744,"post_id":75765175,"comment_id":133657899,"body_markdown":"You can use it in the `execute` method. But if you are going to pull the polling logic outside the step, you can do the polling in a step listener after the submission step.","body":"You can use it in the <code>execute</code> method. But if you are going to pull the polling logic outside the step, you can do the polling in a step listener after the submission step."},{"owner":{"account_id":4409242,"reputation":285,"user_id":3592668,"accept_rate":33,"display_name":"rajesh"},"score":0,"creation_date":1698240137,"post_id":75765175,"comment_id":136379932,"body_markdown":"@MahmoudBenHassine experiencing the same issue, If add poller in the tasklet execute method still spring batch every time calls the execute method internally. am I missing anything here?","body":"@MahmoudBenHassine experiencing the same issue, If add poller in the tasklet execute method still spring batch every time calls the execute method internally. am I missing anything here?"},{"owner":{"account_id":4409242,"reputation":285,"user_id":3592668,"accept_rate":33,"display_name":"rajesh"},"score":0,"creation_date":1698240218,"post_id":75765175,"comment_id":136379948,"body_markdown":"TaskRequest taskRequest = new TaskRequest(executionContext.getString(&quot;task_id&quot;));\n      Poller&lt;Task&gt; poller = new DirectPoller(100);\n      Future&lt;Task&gt; future = poller.poll(() -&gt; constructor.task(taskRequest));\n      Task result = future.get(1000L, TimeUnit.MILLISECONDS);\n      if (result.getStatus().equals(&quot;DONE&quot;) || result.getStatus().equals(&quot;FAILED&quot;) || result.getStatus().equals(&quot;CANCELED&quot;)) {\n        return RepeatStatus.FINISHED;\n      } else {\n        return RepeatStatus.CONTINUABLE;\n      }","body":"TaskRequest taskRequest = new TaskRequest(executionContext.getString(&quot;task_id&quot;));       Poller&lt;Task&gt; poller = new DirectPoller(100);       Future&lt;Task&gt; future = poller.poll(() -&gt; constructor.task(taskRequest));       Task result = future.get(1000L, TimeUnit.MILLISECONDS);       if (result.getStatus().equals(&quot;DONE&quot;) || result.getStatus().equals(&quot;FAILED&quot;) || result.getStatus().equals(&quot;CANCELED&quot;)) {         return RepeatStatus.FINISHED;       } else {         return RepeatStatus.CONTINUABLE;       }"}],"tags":[],"owner":{"account_id":6482932,"reputation":29552,"user_id":5019386,"display_name":"Mahmoud Ben Hassine"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1679041025,"creation_date":1679041025,"answer_id":75765175,"question_id":75759269,"body_markdown":"What you are describing is polling, and Spring Batch provides the [Poller](https://docs.spring.io/spring-batch/docs/current/api/org/springframework/batch/poller/Poller.html) API for that:\r\n\r\n```\r\nPoller&lt;Result&gt; poller = new DirectPoller(3000); 3s polling interval\r\n\r\n final long id = remoteService.execute(); // do something remotely\r\n\r\n Future&lt;Result&gt; future = poller.poll(new Callable&lt;Result&gt; {\r\n     public Object call() {\r\n           // Look for the result (null if not ready)\r\n           return remoteService.get(id);\r\n     }\r\n });\r\n\r\n Result result = future.get(1000L, TimeUnit.MILLISECONDS);\r\n```\r\n\r\nThe `DirectPoller` implementation provides a parameter to specify the polling interval which should solve your issue.","title":"Spring Batch - Delay between Tasklet execution","body":"<p>What you are describing is polling, and Spring Batch provides the <a href=\"https://docs.spring.io/spring-batch/docs/current/api/org/springframework/batch/poller/Poller.html\" rel=\"nofollow noreferrer\">Poller</a> API for that:</p>\n<pre><code>Poller&lt;Result&gt; poller = new DirectPoller(3000); 3s polling interval\n\n final long id = remoteService.execute(); // do something remotely\n\n Future&lt;Result&gt; future = poller.poll(new Callable&lt;Result&gt; {\n     public Object call() {\n           // Look for the result (null if not ready)\n           return remoteService.get(id);\n     }\n });\n\n Result result = future.get(1000L, TimeUnit.MILLISECONDS);\n</code></pre>\n<p>The <code>DirectPoller</code> implementation provides a parameter to specify the polling interval which should solve your issue.</p>\n"}],"owner":{"account_id":1078432,"reputation":69,"user_id":1076078,"display_name":"IdealOutage"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":440,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75765175,"answer_count":1,"score":0,"last_activity_date":1679041025,"creation_date":1678985505,"question_id":75759269,"body_markdown":"I&#39;m currently looking into Spring Batch to create persistable tasks. My tasks are, most of the time, quite simple, e.g.:\r\n\r\n 1. Submit something to an API\r\n 2. Wait until the task is finished (by repeatedly calling an API to check the status)\r\n 3. Retrieve the results\r\n\r\nThis looks like something I could achieve using a [Tasklet](https://docs.spring.io/spring-batch/docs/current/reference/html/step.html#taskletStep). \r\n\r\n```java\r\npublic class WaitingForAPITask implements Tasklet {\r\n\r\n    @Override\r\n    public RepeatStatus execute(StepContribution contribution, ChunkContext chunkContext)  {\r\n        if(checkExternalAPIIfReady()){\r\n            return RepeatStatus.FINISHED;\r\n        }\r\n        \r\n\r\n        return RepeatStatus.CONTINUABLE;\r\n    }\r\n\r\n}\r\n```\r\n\r\nHowever, using this implementation would bombard the API with hundreds or thousands of calls per second. Hence my question, is there any way to control the delay between successive `execute(...)` calls? An easy solution would be to include a Thread.sleep() call in the `execute(...)` method. However this feels kind of like a bad coding style. Are there any other possibilities? Or is there a better solution I&#39;m missing? I&#39;m currently looking at Spring Batch due to the fact that jobs are persisted and the possibility to chain tasks.\r\n","title":"Spring Batch - Delay between Tasklet execution","body":"<p>I'm currently looking into Spring Batch to create persistable tasks. My tasks are, most of the time, quite simple, e.g.:</p>\n<ol>\n<li>Submit something to an API</li>\n<li>Wait until the task is finished (by repeatedly calling an API to check the status)</li>\n<li>Retrieve the results</li>\n</ol>\n<p>This looks like something I could achieve using a <a href=\"https://docs.spring.io/spring-batch/docs/current/reference/html/step.html#taskletStep\" rel=\"nofollow noreferrer\">Tasklet</a>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class WaitingForAPITask implements Tasklet {\n\n    @Override\n    public RepeatStatus execute(StepContribution contribution, ChunkContext chunkContext)  {\n        if(checkExternalAPIIfReady()){\n            return RepeatStatus.FINISHED;\n        }\n        \n\n        return RepeatStatus.CONTINUABLE;\n    }\n\n}\n</code></pre>\n<p>However, using this implementation would bombard the API with hundreds or thousands of calls per second. Hence my question, is there any way to control the delay between successive <code>execute(...)</code> calls? An easy solution would be to include a Thread.sleep() call in the <code>execute(...)</code> method. However this feels kind of like a bad coding style. Are there any other possibilities? Or is there a better solution I'm missing? I'm currently looking at Spring Batch due to the fact that jobs are persisted and the possibility to chain tasks.</p>\n"},{"tags":["java","arraylist"],"comments":[{"owner":{"account_id":3540948,"reputation":5877,"user_id":2958086,"display_name":"Compass"},"score":0,"creation_date":1491859288,"post_id":43333050,"comment_id":73730437,"body_markdown":"Find Array2 how? By index, or by reference?","body":"Find Array2 how? By index, or by reference?"},{"owner":{"account_id":7291967,"reputation":57515,"user_id":5558072,"accept_rate":100,"display_name":"Youcef LAIDANI"},"score":0,"creation_date":1491859326,"post_id":43333050,"comment_id":73730454,"body_markdown":"`str.equals` or `inner.equals` ?","body":"<code>str.equals</code> or <code>inner.equals</code> ?"},{"owner":{"account_id":3449301,"reputation":2732,"user_id":2889297,"display_name":"Devendra Lattu"},"score":0,"creation_date":1491860965,"post_id":43333050,"comment_id":73731139,"body_markdown":"@brazjul, kindly find an alternative approach of constructing ArrayLists in my code solution.","body":"@brazjul, kindly find an alternative approach of constructing ArrayLists in my code solution."}],"answers":[{"comments":[{"owner":{"account_id":7915338,"reputation":339,"user_id":5977953,"accept_rate":65,"display_name":"brazjul"},"score":0,"creation_date":1491859554,"post_id":43333082,"comment_id":73730558,"body_markdown":"Thanks! Essentially what I want to do is get from Array3 -&gt; to Array2 --&gt; and find indices 0 and 3 which happens to be the two indices where value &quot;1&quot; is found","body":"Thanks! Essentially what I want to do is get from Array3 -&gt; to Array2 --&gt; and find indices 0 and 3 which happens to be the two indices where value &quot;1&quot; is found"},{"owner":{"account_id":9847667,"reputation":29054,"user_id":7294647,"accept_rate":67,"display_name":"Jacob G."},"score":0,"creation_date":1491859712,"post_id":43333082,"comment_id":73730622,"body_markdown":"@brazjul You&#39;re welcome!  I can&#39;t say that I understand your motive, but this solution will work, and the overhead depends on the size of `Array1`.  Remember that you can upvote/accept any answers that help you on StackOverflow!","body":"@brazjul You&#39;re welcome!  I can&#39;t say that I understand your motive, but this solution will work, and the overhead depends on the size of <code>Array1</code>.  Remember that you can upvote/accept any answers that help you on StackOverflow!"}],"tags":[],"owner":{"account_id":9847667,"reputation":29054,"user_id":7294647,"accept_rate":67,"display_name":"Jacob G."},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1491859293,"creation_date":1491859293,"answer_id":43333082,"question_id":43333050,"body_markdown":"You can use the following:\r\n\r\n    for (ArrayList&lt;String&gt; Outer : Array3) {\r\n        for (int i = 0; i &lt; Outer.size(); i++) {\r\n            if (Outer == Array2 &amp;&amp; Outer.get(i).equals(&quot;1&quot;)) {\r\n                // The index is stored in &#39;i&#39;\r\n            }\r\n        }\r\n    }\r\n\r\nAlthough I don&#39;t understand why you want to iterate through both `ArrayList`s when you&#39;re only looking for the indices in the latter.\r\n\r\nIt would be easier to just iterate through `Array2`:\r\n\r\n    for (int i = 0; i &lt; Array2.size(); i++) {\r\n        if (Array2.get(i).equals(&quot;1&quot;)) {\r\n            // The index is stored in &#39;i&#39;\r\n        }\r\n    }","title":"How to Access Indices of ArrayList Inside Another ArrayList?","body":"<p>You can use the following:</p>\n\n<pre><code>for (ArrayList&lt;String&gt; Outer : Array3) {\n    for (int i = 0; i &lt; Outer.size(); i++) {\n        if (Outer == Array2 &amp;&amp; Outer.get(i).equals(\"1\")) {\n            // The index is stored in 'i'\n        }\n    }\n}\n</code></pre>\n\n<p>Although I don't understand why you want to iterate through both <code>ArrayList</code>s when you're only looking for the indices in the latter.</p>\n\n<p>It would be easier to just iterate through <code>Array2</code>:</p>\n\n<pre><code>for (int i = 0; i &lt; Array2.size(); i++) {\n    if (Array2.get(i).equals(\"1\")) {\n        // The index is stored in 'i'\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6467922,"reputation":143,"user_id":5009116,"display_name":"Akshat Bansal"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1491860032,"creation_date":1491860032,"answer_id":43333227,"question_id":43333050,"body_markdown":"This is what your main should look like\r\n\r\n    public static void main(String[] args) {\r\n\r\n\t    ArrayList&lt;String&gt; Array1 = new ArrayList&lt;String&gt;();\r\n\r\n\t    // Array 1: [0][1][0][0][1]\r\n\r\n\t    Array1.add(&quot;0&quot;);\r\n\t    Array1.add(&quot;1&quot;);\r\n\t    Array1.add(&quot;0&quot;);\r\n\t    Array1.add(&quot;0&quot;);\r\n\t    Array1.add(&quot;1&quot;);\r\n\r\n\t    ArrayList&lt;String&gt; Array2 = new ArrayList&lt;String&gt;();\r\n\r\n\t    // Array 2: [1][0][0][1][0]\r\n\r\n\t    Array2.add(&quot;1&quot;);\r\n\t    Array2.add(&quot;0&quot;);\r\n\t    Array2.add(&quot;0&quot;);\r\n\t    Array2.add(&quot;1&quot;);\r\n\t    Array2.add(&quot;0&quot;);\r\n\r\n\t    ArrayList&lt;ArrayList&lt;String&gt;&gt; Array3 = new ArrayList&lt;ArrayList&lt;String&gt;&gt;();\r\n\r\n\t    // Array 3: [Array1][Array2]\r\n\r\n\t    Array3.add(Array1);\r\n\t    Array3.add(Array2);\r\n\r\n\t// Now Find every indices or occurrences in Array2 where value is &quot;1&quot;\r\n\t    int i = 0;\r\n\t    for (String  s: Array3.get(1)) {\r\n\t        \t\r\n\t            if (s.equals(&quot;1&quot;)) {\r\n\t                // Get all indices where &quot;1&quot; is found inside Array2 ?\r\n\r\n\t            \t\tSystem.out.println(i);\r\n\t         }\r\n\t            i++;\r\n\t      }\r\n\t   }\r\nIf you only want to find in the 2nd ArrayList loop only thorough it. Get if from Array3 via get function","title":"How to Access Indices of ArrayList Inside Another ArrayList?","body":"<p>This is what your main should look like</p>\n\n<pre><code>public static void main(String[] args) {\n\n    ArrayList&lt;String&gt; Array1 = new ArrayList&lt;String&gt;();\n\n    // Array 1: [0][1][0][0][1]\n\n    Array1.add(\"0\");\n    Array1.add(\"1\");\n    Array1.add(\"0\");\n    Array1.add(\"0\");\n    Array1.add(\"1\");\n\n    ArrayList&lt;String&gt; Array2 = new ArrayList&lt;String&gt;();\n\n    // Array 2: [1][0][0][1][0]\n\n    Array2.add(\"1\");\n    Array2.add(\"0\");\n    Array2.add(\"0\");\n    Array2.add(\"1\");\n    Array2.add(\"0\");\n\n    ArrayList&lt;ArrayList&lt;String&gt;&gt; Array3 = new ArrayList&lt;ArrayList&lt;String&gt;&gt;();\n\n    // Array 3: [Array1][Array2]\n\n    Array3.add(Array1);\n    Array3.add(Array2);\n\n// Now Find every indices or occurrences in Array2 where value is \"1\"\n    int i = 0;\n    for (String  s: Array3.get(1)) {\n\n            if (s.equals(\"1\")) {\n                // Get all indices where \"1\" is found inside Array2 ?\n\n                    System.out.println(i);\n         }\n            i++;\n      }\n   }\n</code></pre>\n\n<p>If you only want to find in the 2nd ArrayList loop only thorough it. Get if from Array3 via get function</p>\n"},{"comments":[{"owner":{"account_id":7915338,"reputation":339,"user_id":5977953,"accept_rate":65,"display_name":"brazjul"},"score":0,"creation_date":1491861996,"post_id":43333296,"comment_id":73731472,"body_markdown":"Thank you for your answer. For the problem that I&#39;m working on, I&#39;m storing my ArrayList as string, because I&#39;m working on a separate code that parse string data from a file into a large array, breaks that array into multiple arrays and tries to find certain values inside those smaller arrays.","body":"Thank you for your answer. For the problem that I&#39;m working on, I&#39;m storing my ArrayList as string, because I&#39;m working on a separate code that parse string data from a file into a large array, breaks that array into multiple arrays and tries to find certain values inside those smaller arrays."}],"tags":[],"owner":{"account_id":3449301,"reputation":2732,"user_id":2889297,"display_name":"Devendra Lattu"},"comment_count":1,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1491860362,"creation_date":1491860362,"answer_id":43333296,"question_id":43333050,"body_markdown":"I would recommend changing `ArrayList&lt;String&gt;` to `ArrayList&lt;Integer&gt;` as a good coding approach.\r\n\r\n\t\tArrayList&lt;Integer&gt; Array1 = new ArrayList&lt;Integer&gt;(Arrays.asList(0,1,0,0,1));\r\n\t\tArrayList&lt;Integer&gt; Array2 = new ArrayList&lt;Integer&gt;(Arrays.asList(1,0,0,1,0));\r\n        // Quick way to clear ArrayList\r\n\r\n\t\tList&lt;ArrayList&lt;Integer&gt;&gt; Array3 = new ArrayList&lt;ArrayList&lt;Integer&gt;&gt;();\r\n\t\tArray3.add(Array1);\r\n\t\tArray3.add(Array2);\r\n\r\n\t\tfor (ArrayList&lt;Integer&gt; al : Array3) {\r\n\t\t\tif (al != Array2) { // check only for ArrayList2\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tfor (Integer I : al) { // Iterate ArrayList2\r\n\t\t\t\tif (I.equals(1)) {\r\n\t\t\t\t\t// 1 is stored in ArrayList2\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}","title":"How to Access Indices of ArrayList Inside Another ArrayList?","body":"<p>I would recommend changing <code>ArrayList&lt;String&gt;</code> to <code>ArrayList&lt;Integer&gt;</code> as a good coding approach.</p>\n\n<pre><code>    ArrayList&lt;Integer&gt; Array1 = new ArrayList&lt;Integer&gt;(Arrays.asList(0,1,0,0,1));\n    ArrayList&lt;Integer&gt; Array2 = new ArrayList&lt;Integer&gt;(Arrays.asList(1,0,0,1,0));\n    // Quick way to clear ArrayList\n\n    List&lt;ArrayList&lt;Integer&gt;&gt; Array3 = new ArrayList&lt;ArrayList&lt;Integer&gt;&gt;();\n    Array3.add(Array1);\n    Array3.add(Array2);\n\n    for (ArrayList&lt;Integer&gt; al : Array3) {\n        if (al != Array2) { // check only for ArrayList2\n            continue;\n        }\n        for (Integer I : al) { // Iterate ArrayList2\n            if (I.equals(1)) {\n                // 1 is stored in ArrayList2\n            }\n        }\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":9847667,"reputation":29054,"user_id":7294647,"accept_rate":67,"display_name":"Jacob G."},"score":0,"creation_date":1491862326,"post_id":43333683,"comment_id":73731570,"body_markdown":"OP is trying to get the index of each &quot;1&quot;, not the amount of them.","body":"OP is trying to get the index of each &quot;1&quot;, not the amount of them."},{"owner":{"account_id":5523724,"reputation":22000,"user_id":4385895,"accept_rate":58,"display_name":"Vasu"},"score":0,"creation_date":1491862453,"post_id":43333683,"comment_id":73731608,"body_markdown":"he says occurrences as well","body":"he says occurrences as well"}],"tags":[],"owner":{"account_id":5523724,"reputation":22000,"user_id":4385895,"accept_rate":58,"display_name":"Vasu"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1491862409,"creation_date":1491862228,"answer_id":43333683,"question_id":43333050,"body_markdown":"If you are interested in finding the count (occurances) of &quot;1&quot; from `Array2`, it is a simple solution from Java8 as shown below with inline comments:\r\n\r\n    Array3.stream().\r\n        skip(1). //skip the first array\r\n        flatMap(List::stream). //get the stream of elements from second array\r\n        filter(value -&gt;  value.equals(&quot;1&quot;)).//check which elements are equal to 1\r\n        count();//count how many\r\n\r\nAlso, I strongly suggest you **follow Java naming standards strictly** (refer [here][1]) like variable names must be starting with lowercase (like `array3`, not `Array3`) so that it will be easier to read and follow your code.\r\n\r\n\r\n  [1]: http://www.oracle.com/technetwork/java/codeconventions-135099.html","title":"How to Access Indices of ArrayList Inside Another ArrayList?","body":"<p>If you are interested in finding the count (occurances) of \"1\" from <code>Array2</code>, it is a simple solution from Java8 as shown below with inline comments:</p>\n\n<pre><code>Array3.stream().\n    skip(1). //skip the first array\n    flatMap(List::stream). //get the stream of elements from second array\n    filter(value -&gt;  value.equals(\"1\")).//check which elements are equal to 1\n    count();//count how many\n</code></pre>\n\n<p>Also, I strongly suggest you <strong>follow Java naming standards strictly</strong> (refer <a href=\"http://www.oracle.com/technetwork/java/codeconventions-135099.html\" rel=\"nofollow noreferrer\">here</a>) like variable names must be starting with lowercase (like <code>array3</code>, not <code>Array3</code>) so that it will be easier to read and follow your code.</p>\n"},{"comments":[{"owner":{"account_id":19501442,"reputation":2332,"user_id":14267427,"display_name":"Tyler2P"},"score":1,"creation_date":1679094081,"post_id":75765116,"comment_id":133665660,"body_markdown":"Your answer could be improved by adding more information on what the code does and how it helps the OP.","body":"Your answer could be improved by adding more information on what the code does and how it helps the OP."}],"tags":[],"owner":{"account_id":27295375,"reputation":1,"user_id":20813086,"display_name":"Shivam Siddharth"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679040570,"creation_date":1679040570,"answer_id":75765116,"question_id":43333050,"body_markdown":"    for (List&lt;Long&gt; range : queries) {\r\n\r\n            long l = range.get(0);\r\n            long r = range.get(1);\r\n\r\n","title":"How to Access Indices of ArrayList Inside Another ArrayList?","body":"<pre><code>for (List&lt;Long&gt; range : queries) {\n\n        long l = range.get(0);\n        long r = range.get(1);\n</code></pre>\n"}],"owner":{"account_id":7915338,"reputation":339,"user_id":5977953,"accept_rate":65,"display_name":"brazjul"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1385,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":43333082,"answer_count":5,"score":1,"last_activity_date":1679040570,"creation_date":1491859130,"question_id":43333050,"body_markdown":"I&#39;m working on an recursive programming assignment, and I&#39;m trying to find out how to loop and get values of an ArrayList inside of a bigger ArrayList. I found that others have asked this question before, but it is still not very clear how this can be done precisely. \r\n\r\nHere is an example of what I&#39;m trying to do: \r\n\r\n    import java.util.*;\r\n\r\n    public class Test{\r\n\r\n\tpublic static void main(String[] args) {\r\n\r\n\t\tArrayList&lt;String&gt; Array1 = new ArrayList&lt;String&gt;();\r\n\r\n\t\t// Array 1: [0][1][0][0][1]\r\n\r\n\t\tArray1.add(&quot;0&quot;);\r\n\t\tArray1.add(&quot;1&quot;);\r\n\t\tArray1.add(&quot;0&quot;);\r\n\t\tArray1.add(&quot;0&quot;);\r\n\t\tArray1.add(&quot;1&quot;);\r\n\r\n\t\tArrayList&lt;String&gt; Array2 = new ArrayList&lt;String&gt;();\r\n\r\n\t\t// Array 2: [1][0][0][1][0]\r\n\r\n\t\tArray2.add(&quot;1&quot;);\r\n\t\tArray2.add(&quot;0&quot;);\r\n\t\tArray2.add(&quot;0&quot;);\r\n\t\tArray2.add(&quot;1&quot;);\r\n\t\tArray2.add(&quot;0&quot;);\r\n\r\n\t\tArrayList&lt;ArrayList&lt;String&gt;&gt; Array3 = new ArrayList&lt;ArrayList&lt;String&gt;&gt;();\r\n\r\n\t\t// Array 3: [Array1][Array2]\r\n\r\n\t\tArray3.add(Array1);\r\n\t\tArray3.add(Array2);\r\n\r\n\t// Now Find every indices or occurrences in Array2 where value is &quot;1&quot;\r\n\r\n\t\tfor (ArrayList&lt;String&gt; Outer : Array3) {\r\n\t\t\tfor (String inner : Outer) {\r\n\t\t\t\tif (str.equals(&quot;1&quot;)) {\r\n\t\t\t\t\t// Get all indices where &quot;1&quot; is found inside Array2 ?\r\n\r\n\t\t\t\t}\r\n\t\t\t }\r\n\t\t  }\r\n\t   }\r\n    }\r\n\r\n\r\nSo I have Array3 that stores **Array1** and **Array2**, and what I want to do is loop through Array3, find Array2 and indices in Array2 where value is &quot;1&quot;.\r\n\r\nThe problem with the loop in in this code is that it loops through all values in Array1 and Array2 whereas I&#39;m just trying to find the values inside Array2. ","title":"How to Access Indices of ArrayList Inside Another ArrayList?","body":"<p>I'm working on an recursive programming assignment, and I'm trying to find out how to loop and get values of an ArrayList inside of a bigger ArrayList. I found that others have asked this question before, but it is still not very clear how this can be done precisely. </p>\n\n<p>Here is an example of what I'm trying to do: </p>\n\n<pre><code>import java.util.*;\n\npublic class Test{\n\npublic static void main(String[] args) {\n\n    ArrayList&lt;String&gt; Array1 = new ArrayList&lt;String&gt;();\n\n    // Array 1: [0][1][0][0][1]\n\n    Array1.add(\"0\");\n    Array1.add(\"1\");\n    Array1.add(\"0\");\n    Array1.add(\"0\");\n    Array1.add(\"1\");\n\n    ArrayList&lt;String&gt; Array2 = new ArrayList&lt;String&gt;();\n\n    // Array 2: [1][0][0][1][0]\n\n    Array2.add(\"1\");\n    Array2.add(\"0\");\n    Array2.add(\"0\");\n    Array2.add(\"1\");\n    Array2.add(\"0\");\n\n    ArrayList&lt;ArrayList&lt;String&gt;&gt; Array3 = new ArrayList&lt;ArrayList&lt;String&gt;&gt;();\n\n    // Array 3: [Array1][Array2]\n\n    Array3.add(Array1);\n    Array3.add(Array2);\n\n// Now Find every indices or occurrences in Array2 where value is \"1\"\n\n    for (ArrayList&lt;String&gt; Outer : Array3) {\n        for (String inner : Outer) {\n            if (str.equals(\"1\")) {\n                // Get all indices where \"1\" is found inside Array2 ?\n\n            }\n         }\n      }\n   }\n}\n</code></pre>\n\n<p>So I have Array3 that stores <strong>Array1</strong> and <strong>Array2</strong>, and what I want to do is loop through Array3, find Array2 and indices in Array2 where value is \"1\".</p>\n\n<p>The problem with the loop in in this code is that it loops through all values in Array1 and Array2 whereas I'm just trying to find the values inside Array2. </p>\n"},{"tags":["java","spring-boot","junit","mockito","spring-transactions"],"comments":[{"owner":{"account_id":26746848,"reputation":226,"user_id":20346807,"display_name":"Joan"},"score":0,"creation_date":1678877106,"post_id":75743175,"comment_id":133616895,"body_markdown":"The right anotation to use is:\n\n@ Mock\nprivate DataSourceTransactionManager dataSourceTransactionManager;\n\nBut you need to take into consideration that this will only work if the is declared in the class you want to test as @ Autowired. And in the test the class you want to test is annotated with @ InjectMocks.","body":"The right anotation to use is:  @ Mock private DataSourceTransactionManager dataSourceTransactionManager;  But you need to take into consideration that this will only work if the is declared in the class you want to test as @ Autowired. And in the test the class you want to test is annotated with @ InjectMocks."},{"owner":{"account_id":28022059,"reputation":1,"user_id":21402689,"display_name":"zoe610"},"score":0,"creation_date":1678938230,"post_id":75743175,"comment_id":133631166,"body_markdown":"@Joan when I change annotation to @Mock, it crash eariler.\njava.lang.NullPointerException\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:348)\n\tat com.jidu.vehicle.user.ares.backend.server.module.equity.application.MockTxTest.setUp(MockTxTest.java:87)\n\n\n\n```\n    @Before\n    public void setUp() {\n        MockitoAnnotations.initMocks(this);\n        status = dataSourceTransactionManager.getTransaction(def);\n    }\n```","body":"@Joan when I change annotation to @Mock, it crash eariler. java.lang.NullPointerException \tat org.springframework.transaction.support.AbstractPlatformTran&zwnj;&#8203;sactionManager.getTr&zwnj;&#8203;ansaction(AbstractPl&zwnj;&#8203;atformTransactionMan&zwnj;&#8203;ager.java:348) \tat com.jidu.vehicle.user.ares.backend.server.module.equity.appl&zwnj;&#8203;ication.MockTxTest.s&zwnj;&#8203;etUp(MockTxTest.java&zwnj;&#8203;:87)    ```     @Before     public void setUp() {         MockitoAnnotations.initMocks(this);         status = dataSourceTransactionManager.getTransaction(def);     } ```"},{"owner":{"account_id":28022059,"reputation":1,"user_id":21402689,"display_name":"zoe610"},"score":0,"creation_date":1678938655,"post_id":75743175,"comment_id":133631214,"body_markdown":"@Joan \n```\n@Mock is similar to @MockBean and the latter can inject into spring container, and @SpyBean can mock spring-definition beans.","body":"@Joan  ``` @Mock is similar to @MockBean and the latter can inject into spring container, and @SpyBean can mock spring-definition beans."},{"owner":{"account_id":26746848,"reputation":226,"user_id":20346807,"display_name":"Joan"},"score":0,"creation_date":1679038849,"post_id":75743175,"comment_id":133652517,"body_markdown":"Can you provide the code of the class you want to test?","body":"Can you provide the code of the class you want to test?"},{"owner":{"account_id":28022059,"reputation":1,"user_id":21402689,"display_name":"zoe610"},"score":0,"creation_date":1679040552,"post_id":75743175,"comment_id":133652933,"body_markdown":"@Joan commit it.","body":"@Joan commit it."}],"owner":{"account_id":28022059,"reputation":1,"user_id":21402689,"display_name":"zoe610"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":120,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679040533,"creation_date":1678874644,"question_id":75743175,"body_markdown":"```\r\n@RunWith(SpringRunner.class)\r\n@SpringBootTest(classes = SpringBootServerApplication.class)\r\npublic class MockTxTest {\r\n\r\n    @Resource\r\n    private Service service;\r\n\r\n\r\n    @SpyBean\r\n    private DataSourceTransactionManager dataSourceTransactionManager;\r\n\r\n    private static DefaultTransactionDefinition def;\r\n    private static TransactionStatus status;\r\n\r\n    static {\r\n        def = new DefaultTransactionDefinition();\r\n        def.setPropagationBehavior(TransactionDefinition.PROPAGATION_REQUIRES_NEW);\r\n    }\r\n\r\n    @Before\r\n    public void setUp() {\r\n        MockitoAnnotations.initMocks(this);\r\n        status = dataSourceTransactionManager.getTransaction(def);\r\n    }\r\n\r\n    @Test\r\n    public void test_tx() {\r\n        doReturn(status).when(dataSourceTransactionManager).getTransaction(def);\r\n//        doNothing().when(dataSourceTransactionManager).commit(any());\r\n \r\n        Assert.assertTrue(service.method() != 0);\r\n        verify(dataSourceTransactionManager, times(1)).getTransaction(def);\r\n\r\n    }\r\n}\r\n\r\n```\r\n\r\nWhen I debug the code, this sentence throws NullpointException\r\n```\r\n        doReturn(status).when(dataSourceTransactionManager).getTransaction(def);\r\n\r\n```\r\n\r\nI know little about spring bean, how can I mock transaction manager?\r\n\r\nI used @MockBean on DataSourceTransactionManager, but it also a NPE;I don&#39;t understand why the transactionManager could be null after spring loading\r\n\r\n\r\n\r\nservice code:\r\n```\r\npublic class Service service{\r\n    @Resource\r\n    private DataSourceTransactionManager dataSourceTransactionManager;\r\n\r\n        TransactionDefinition definition = new DefaultTransactionDefinition();\r\n        TransactionStatus status = dataSourceTransactionManager.getTransaction(definition);\r\n\r\ntry{\r\n            doThing();\r\n            dataSourceTransactionManager.commit(status);\r\n}catch (Exception ex) {\r\n            log.error(&quot;exception,bo:{} ,ex&quot;, bo, ex);\r\n            dataSourceTransactionManager.rollback(status);\r\n            throw new Exception();\r\n        }\r\n\r\n}\r\n```","title":"How can I mock DataSourceTransactionManager with SpringBoot and Mockito?","body":"<pre><code>@RunWith(SpringRunner.class)\n@SpringBootTest(classes = SpringBootServerApplication.class)\npublic class MockTxTest {\n\n    @Resource\n    private Service service;\n\n\n    @SpyBean\n    private DataSourceTransactionManager dataSourceTransactionManager;\n\n    private static DefaultTransactionDefinition def;\n    private static TransactionStatus status;\n\n    static {\n        def = new DefaultTransactionDefinition();\n        def.setPropagationBehavior(TransactionDefinition.PROPAGATION_REQUIRES_NEW);\n    }\n\n    @Before\n    public void setUp() {\n        MockitoAnnotations.initMocks(this);\n        status = dataSourceTransactionManager.getTransaction(def);\n    }\n\n    @Test\n    public void test_tx() {\n        doReturn(status).when(dataSourceTransactionManager).getTransaction(def);\n//        doNothing().when(dataSourceTransactionManager).commit(any());\n \n        Assert.assertTrue(service.method() != 0);\n        verify(dataSourceTransactionManager, times(1)).getTransaction(def);\n\n    }\n}\n\n</code></pre>\n<p>When I debug the code, this sentence throws NullpointException</p>\n<pre><code>        doReturn(status).when(dataSourceTransactionManager).getTransaction(def);\n\n</code></pre>\n<p>I know little about spring bean, how can I mock transaction manager?</p>\n<p>I used @MockBean on DataSourceTransactionManager, but it also a NPE;I don't understand why the transactionManager could be null after spring loading</p>\n<p>service code:</p>\n<pre><code>public class Service service{\n    @Resource\n    private DataSourceTransactionManager dataSourceTransactionManager;\n\n        TransactionDefinition definition = new DefaultTransactionDefinition();\n        TransactionStatus status = dataSourceTransactionManager.getTransaction(definition);\n\ntry{\n            doThing();\n            dataSourceTransactionManager.commit(status);\n}catch (Exception ex) {\n            log.error(&quot;exception,bo:{} ,ex&quot;, bo, ex);\n            dataSourceTransactionManager.rollback(status);\n            throw new Exception();\n        }\n\n}\n</code></pre>\n"},{"tags":["java","logging","microservices","kibana","log4j2"],"comments":[{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":0,"creation_date":1679042016,"post_id":75765095,"comment_id":133653245,"body_markdown":"or you can keep one copy of log4j2.xml in a shared folder accessible by all, then create a symbolic link that points to this log4j2.xml and use that for each of your applications?","body":"or you can keep one copy of log4j2.xml in a shared folder accessible by all, then create a symbolic link that points to this log4j2.xml and use that for each of your applications?"},{"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"score":0,"creation_date":1679042432,"post_id":75765095,"comment_id":133653341,"body_markdown":"The `log4j2.configurationFile` parameter can be an URL.","body":"The <code>log4j2.configurationFile</code> parameter can be an URL."},{"owner":{"account_id":1041005,"reputation":11,"user_id":1047032,"display_name":"HenriR"},"score":0,"creation_date":1679042640,"post_id":75765095,"comment_id":133653394,"body_markdown":"@piotrP.Karwasz Have you experience of that in a multi service environment?","body":"@piotrP.Karwasz Have you experience of that in a multi service environment?"},{"owner":{"account_id":1041005,"reputation":11,"user_id":1047032,"display_name":"HenriR"},"score":0,"creation_date":1679042790,"post_id":75765095,"comment_id":133653424,"body_markdown":"@experimentunit1998X I guess what Piotr suggested could be seen as &quot;externalized log configuration&quot;.","body":"@experimentunit1998X I guess what Piotr suggested could be seen as &quot;externalized log configuration&quot;."},{"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"score":0,"creation_date":1679046312,"post_id":75765095,"comment_id":133654280,"body_markdown":"Check [Ralph&#39;s answer to this question](https://stackoverflow.com/a/74931985/11748454).","body":"Check <a href=\"https://stackoverflow.com/a/74931985/11748454\">Ralph&#39;s answer to this question</a>."}],"owner":{"account_id":1041005,"reputation":11,"user_id":1047032,"display_name":"HenriR"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679040467,"creation_date":1679040467,"question_id":75765095,"body_markdown":"Assume I know how to setup and use Log4j2 for gathering logs from one service.\r\n\r\nNow let&#39;s consider a case where **logging** is wanted on a **multiple services**, let&#39;s say 50 just to have a number. Company also want&#39;s to use a **central logging** approach where all logs will be available in a tool, e.g. Kibana.\r\n\r\nTo make it easier (or even possible) to find relevant data in Kibana, it is necessary to have the same type of information and formatting (**standards**) of the log entries. \r\n\r\n**What alternatives are there** to make sure that all (50) services and any new services are configured in the same way?\r\n\r\nProbably, the most common way is to have a copy of the log4j2.xml in each service. But I see some cons with this approach. \r\n1. If a change is needed, it needs to be applied to 50 services in 50 different code repositories.\r\n2. For new services, copying often happens from an existing service. If that service already diverged, then you have another service not following the &quot;standards&quot;.\r\n3. A copy of log4j2.xml might actually mean more than one, if you have environment specific configurations...\r\n\r\n&quot;Externalized log configuration&quot; is there such a thing?\r\nHow have you tackled this problem?\r\nOr is it not a real problem? :) ","title":"Sharing Log4j2 configuration between services to ensure same formatting etc.?","body":"<p>Assume I know how to setup and use Log4j2 for gathering logs from one service.</p>\n<p>Now let's consider a case where <strong>logging</strong> is wanted on a <strong>multiple services</strong>, let's say 50 just to have a number. Company also want's to use a <strong>central logging</strong> approach where all logs will be available in a tool, e.g. Kibana.</p>\n<p>To make it easier (or even possible) to find relevant data in Kibana, it is necessary to have the same type of information and formatting (<strong>standards</strong>) of the log entries.</p>\n<p><strong>What alternatives are there</strong> to make sure that all (50) services and any new services are configured in the same way?</p>\n<p>Probably, the most common way is to have a copy of the log4j2.xml in each service. But I see some cons with this approach.</p>\n<ol>\n<li>If a change is needed, it needs to be applied to 50 services in 50 different code repositories.</li>\n<li>For new services, copying often happens from an existing service. If that service already diverged, then you have another service not following the &quot;standards&quot;.</li>\n<li>A copy of log4j2.xml might actually mean more than one, if you have environment specific configurations...</li>\n</ol>\n<p>&quot;Externalized log configuration&quot; is there such a thing?\nHow have you tackled this problem?\nOr is it not a real problem? :)</p>\n"},{"tags":["java","spring","elasticsearch","spring-data-elasticsearch"],"answers":[{"comments":[{"owner":{"account_id":24911703,"reputation":71,"user_id":18781174,"display_name":"loredon"},"score":0,"creation_date":1677155271,"post_id":75530428,"comment_id":133284031,"body_markdown":"Yes, the index will be created, but what about the mapping?","body":"Yes, the index will be created, but what about the mapping?"},{"owner":{"account_id":12015704,"reputation":714,"user_id":8790942,"display_name":"Danil Kuznetsov"},"score":0,"creation_date":1677158608,"post_id":75530428,"comment_id":133285067,"body_markdown":"Mappings will be created based on entity annotations, I&#39;ve updated my answer with additional info","body":"Mappings will be created based on entity annotations, I&#39;ve updated my answer with additional info"}],"tags":[],"owner":{"account_id":12015704,"reputation":714,"user_id":8790942,"display_name":"Danil Kuznetsov"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1679040420,"creation_date":1677057142,"answer_id":75530428,"question_id":75507955,"body_markdown":"Each entity should have `@Document` annotation on class level,\r\nand for activating index auto-creation during bootstrapping \r\nthere is argument `createIndex` for this annotation.\r\nWhen this argument is set to `true` - an index will be automatically created.\r\n\r\nFor improving index settings during creation, there is a separate annotation `@Setting`\r\n\r\nMore details can be found [here][1]\r\n\r\nActual index mapping is created based on entity’s field annotations (like `@Field`, `@Id` etc).\r\n\r\n[Here][2] is more info about available entity annotations\r\n\r\n  [1]: https://docs.spring.io/spring-data/elasticsearch/docs/current/reference/html/#elasticsearch.repositories.autocreation\r\n  [2]: https://docs.spring.io/spring-data/elasticsearch/docs/current/reference/html/#elasticsearch.mapping.meta-model.annotations \r\n","title":"Elastic Search mapping on Java Spring startup","body":"<p>Each entity should have <code>@Document</code> annotation on class level,\nand for activating index auto-creation during bootstrapping\nthere is argument <code>createIndex</code> for this annotation.\nWhen this argument is set to <code>true</code> - an index will be automatically created.</p>\n<p>For improving index settings during creation, there is a separate annotation <code>@Setting</code></p>\n<p>More details can be found <a href=\"https://docs.spring.io/spring-data/elasticsearch/docs/current/reference/html/#elasticsearch.repositories.autocreation\" rel=\"nofollow noreferrer\">here</a></p>\n<p>Actual index mapping is created based on entity’s field annotations (like <code>@Field</code>, <code>@Id</code> etc).</p>\n<p><a href=\"https://docs.spring.io/spring-data/elasticsearch/docs/current/reference/html/#elasticsearch.mapping.meta-model.annotations\" rel=\"nofollow noreferrer\">Here</a> is more info about available entity annotations</p>\n"}],"owner":{"account_id":24911703,"reputation":71,"user_id":18781174,"display_name":"loredon"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":83,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75530428,"answer_count":1,"score":0,"last_activity_date":1679040420,"creation_date":1676888248,"question_id":75507955,"body_markdown":"I&#39;m using spring data elastic search and i&#39;m having a document that i want to store. I&#39;m wondering, is there a way on the microservice starts to automatically send to elastic search the mapping for this document? I have the repository defined and currently when i start the service, there is no mapping added to the elastic search.","title":"Elastic Search mapping on Java Spring startup","body":"<p>I'm using spring data elastic search and i'm having a document that i want to store. I'm wondering, is there a way on the microservice starts to automatically send to elastic search the mapping for this document? I have the repository defined and currently when i start the service, there is no mapping added to the elastic search.</p>\n"},{"tags":["java","ansi-escape"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1631923766,"post_id":69230554,"comment_id":122362887,"body_markdown":"Try specifying an explicit charset for your FileReader. (whatever your into.txt file&#39;s encoding is)","body":"Try specifying an explicit charset for your FileReader. (whatever your into.txt file&#39;s encoding is)"},{"owner":{"account_id":17882709,"reputation":1,"user_id":12991066,"display_name":"user12991066"},"score":1,"creation_date":1631924008,"post_id":69230554,"comment_id":122362925,"body_markdown":"@OmarAbdelBari I can get it to do it when defining it with &quot;\\blablabla&quot; but not when reading with a file, for some reason it reads it as &quot;\\\\blablabla&quot;","body":"@OmarAbdelBari I can get it to do it when defining it with &quot;\\blablabla&quot; but not when reading with a file, for some reason it reads it as &quot;\\\\blablabla&quot;"},{"owner":{"account_id":4501373,"reputation":954,"user_id":3659807,"display_name":"Omar Abdel Bari"},"score":0,"creation_date":1631924064,"post_id":69230554,"comment_id":122362932,"body_markdown":"You are right, surprise to me that it actually allows it. But I guess this depends on who&#39;s handling the output.","body":"You are right, surprise to me that it actually allows it. But I guess this depends on who&#39;s handling the output."},{"owner":{"account_id":9760,"reputation":85860,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":0,"creation_date":1631926860,"post_id":69230554,"comment_id":122363262,"body_markdown":"How is color information encoded in the file?  In general, Unicode text can contain glyphs that have a defined color (i.e. emojis) but in general text there is no color info.","body":"How is color information encoded in the file?  In general, Unicode text can contain glyphs that have a defined color (i.e. emojis) but in general text there is no color info."}],"answers":[{"comments":[{"owner":{"account_id":17882709,"reputation":1,"user_id":12991066,"display_name":"user12991066"},"score":0,"creation_date":1631924168,"post_id":69230604,"comment_id":122362947,"body_markdown":"I am not sure I follow here","body":"I am not sure I follow here"},{"owner":{"account_id":4501373,"reputation":954,"user_id":3659807,"display_name":"Omar Abdel Bari"},"score":0,"creation_date":1631924397,"post_id":69230604,"comment_id":122362976,"body_markdown":"He&#39;s trying to say try converting the byte contents of your file into a string using a different encoding other than Java&#39;s default UTF-8.","body":"He&#39;s trying to say try converting the byte contents of your file into a string using a different encoding other than Java&#39;s default UTF-8."},{"owner":{"account_id":17882709,"reputation":1,"user_id":12991066,"display_name":"user12991066"},"score":0,"creation_date":1631924771,"post_id":69230604,"comment_id":122363012,"body_markdown":"@OmarAbdelBari that would not work for me in the slightest, kept saying it couldn&#39;t resolve the constructor","body":"@OmarAbdelBari that would not work for me in the slightest, kept saying it couldn&#39;t resolve the constructor"},{"owner":{"account_id":4501373,"reputation":954,"user_id":3659807,"display_name":"Omar Abdel Bari"},"score":0,"creation_date":1631931942,"post_id":69230604,"comment_id":122363770,"body_markdown":"THat would be odd cause Java is typically backwards compatible and the constructor is `https://docs.oracle.com/javase/7/docs/api/java/io/InputStreamReader.html` and `https://docs.oracle.com/javase/7/docs/api/java/io/BufferedReader.html`. Which constructor is it complaining about? Check the documentation for the version you are using. I highly doubt it&#39;s not present.","body":"THat would be odd cause Java is typically backwards compatible and the constructor is <code>https:&#47;&#47;docs.oracle.com&#47;javase&#47;7&#47;docs&#47;api&#47;java&#47;io&#47;InputStrea&zwnj;&#8203;mReader.html</code> and <code>https:&#47;&#47;docs.oracle.com&#47;javase&#47;7&#47;docs&#47;api&#47;java&#47;io&#47;BufferedRe&zwnj;&#8203;ader.html</code>. Which constructor is it complaining about? Check the documentation for the version you are using. I highly doubt it&#39;s not present."},{"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1631935022,"post_id":69230604,"comment_id":122364094,"body_markdown":"What version of Java are you using?","body":"What version of Java are you using?"}],"tags":[],"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"comment_count":5,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1631924176,"creation_date":1631923976,"answer_id":69230604,"question_id":69230554,"body_markdown":"Probably the encoding of your file is not the default encoding [UTF-8][1], for which `FileReader` is a convenience implementation of `FileInputStream`.\r\n\r\nTry a different encoding by using a `InputStreamReader` instead:\r\n\r\n    BufferedReader br = new BufferedReader(\r\n      new InputStreamReader(\r\n        new FileInputStream(&quot;C:/Users/gabri/IdeaProjects/Atlas/into.txt&quot;),\r\n        Charset.forName(&quot;UTF-16&quot;) // find an encoding that works\r\n      )\r\n    );\r\n\r\nThere are several [standard charsets][2] from which to choose.\r\n\r\n---\r\n\r\nSide note: You may use `/` as a path separator for Windows OS file systems - java will figure it out.\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/UTF-8\r\n  [2]: https://docs.oracle.com/en/java/javase/15/docs/api/java.base/java/nio/charset/Charset.html#standard","title":"How to correctly interpret escape sequences Java","body":"<p>Probably the encoding of your file is not the default encoding <a href=\"https://en.wikipedia.org/wiki/UTF-8\" rel=\"nofollow noreferrer\">UTF-8</a>, for which <code>FileReader</code> is a convenience implementation of <code>FileInputStream</code>.</p>\n<p>Try a different encoding by using a <code>InputStreamReader</code> instead:</p>\n<pre><code>BufferedReader br = new BufferedReader(\n  new InputStreamReader(\n    new FileInputStream(&quot;C:/Users/gabri/IdeaProjects/Atlas/into.txt&quot;),\n    Charset.forName(&quot;UTF-16&quot;) // find an encoding that works\n  )\n);\n</code></pre>\n<p>There are several <a href=\"https://docs.oracle.com/en/java/javase/15/docs/api/java.base/java/nio/charset/Charset.html#standard\" rel=\"nofollow noreferrer\">standard charsets</a> from which to choose.</p>\n<hr />\n<p>Side note: You may use <code>/</code> as a path separator for Windows OS file systems - java will figure it out.</p>\n"}],"owner":{"account_id":17882709,"reputation":1,"user_id":12991066,"display_name":"user12991066"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":85,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1679039964,"creation_date":1631923381,"question_id":69230554,"body_markdown":"My Java program seems to have difficulty interpreting the escape characters. The output should be colorful text, but instead ends up like `\\u00202b+-+&#166;&#166;+-++-+&#166;&#166;+-+&#166;&#166;&#166;+-+` instead of the colors.\r\n\r\n    \r\n    public static void main(String[] args) throws IOException {\r\n\r\n        BufferedReader br = new BufferedReader(new FileReader(&quot;C:\\\\Users\\\\gabri\\\\IdeaProjects\\\\Atlas\\\\into.txt&quot;));\r\n        String line;\r\n        while ((line = br.readLine()) != null) {\r\n            System.out.println(line);\r\n        }\r\n    }\r\n   ","title":"How to correctly interpret escape sequences Java","body":"<p>My Java program seems to have difficulty interpreting the escape characters. The output should be colorful text, but instead ends up like <code>\\u00202b+-+¦¦+-++-+¦¦+-+¦¦¦+-+</code> instead of the colors.</p>\n<pre><code>public static void main(String[] args) throws IOException {\n\n    BufferedReader br = new BufferedReader(new FileReader(&quot;C:\\\\Users\\\\gabri\\\\IdeaProjects\\\\Atlas\\\\into.txt&quot;));\n    String line;\n    while ((line = br.readLine()) != null) {\n        System.out.println(line);\n    }\n}\n</code></pre>\n"},{"tags":["java","string"],"answers":[{"comments":[{"owner":{"account_id":1184630,"reputation":1166,"user_id":1158854,"accept_rate":80,"display_name":"AlexZam"},"score":1,"creation_date":1327313757,"post_id":8970033,"comment_id":11235631,"body_markdown":"Some also like this version of the same check: `&quot;&quot;.equals(acct)`","body":"Some also like this version of the same check: <code>&quot;&quot;.equals(acct)</code>"},{"owner":{"display_name":"user663724"},"score":0,"creation_date":1327317028,"post_id":8970033,"comment_id":11236664,"body_markdown":"Hi Jon , I tried with a sample Program , String str = &quot;&quot;;\nSystem.out.println(str.isEmpty());  , here it returned true , it didn&#39;t throw NullPointerException . so why cant we use isEmpty for Checking Null values ?? Could you please clarify this ??","body":"Hi Jon , I tried with a sample Program , String str = &quot;&quot;; System.out.println(str.isEmpty());  , here it returned true , it didn&#39;t throw NullPointerException . so why cant we use isEmpty for Checking Null values ?? Could you please clarify this ??"},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1327317483,"post_id":8970033,"comment_id":11236791,"body_markdown":"@Kiran: Because &quot;&quot; isn&#39;t the same as a null reference. Try it with `String str = null;` and *then* you&#39;ll get a `NullPointerException`. It&#39;s very important to understand the difference between a string reference which is null and a string reference which refers to an empty string.","body":"@Kiran: Because &quot;&quot; isn&#39;t the same as a null reference. Try it with <code>String str = null;</code> and <i>then</i> you&#39;ll get a <code>NullPointerException</code>. It&#39;s very important to understand the difference between a string reference which is null and a string reference which refers to an empty string."},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":4,"creation_date":1327317513,"post_id":8970033,"comment_id":11236800,"body_markdown":"@AlexZam: You&#39;d still want to *also* check whether it&#39;s null. The point is to check whether the string has any content.","body":"@AlexZam: You&#39;d still want to <i>also</i> check whether it&#39;s null. The point is to check whether the string has any content."},{"owner":{"display_name":"user663724"},"score":0,"creation_date":1327318354,"post_id":8970033,"comment_id":11237064,"body_markdown":"Thank you Jon , i tried with this code you told ,  if (acct != null &amp;&amp; !acct.isEmpty()) , but still it is not able to handle when no accountid is passed .","body":"Thank you Jon , i tried with this code you told ,  if (acct != null &amp;&amp; !acct.isEmpty()) , but still it is not able to handle when no accountid is passed ."},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1327318611,"post_id":8970033,"comment_id":11237138,"body_markdown":"@Kiran: You&#39;ll have to be more specific than &quot;it is not able to handle&quot; - what happens?","body":"@Kiran: You&#39;ll have to be more specific than &quot;it is not able to handle&quot; - what happens?"},{"owner":{"account_id":5672288,"reputation":294,"user_id":4486592,"display_name":"Guilherme Taffarel Bergamin"},"score":0,"creation_date":1651147095,"post_id":8970033,"comment_id":127297112,"body_markdown":"@AlexZam, that will return `false` for `acct == null`. The point of the test is to check if it has any content. Your code won&#39;t throw an exception, but it will bring misleading results","body":"@AlexZam, that will return <code>false</code> for <code>acct == null</code>. The point of the test is to check if it has any content. Your code won&#39;t throw an exception, but it will bring misleading results"}],"tags":[],"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"comment_count":7,"down_vote_count":0,"up_vote_count":167,"is_accepted":true,"score":167,"last_activity_date":1510133967,"creation_date":1327313605,"answer_id":8970033,"question_id":8970008,"body_markdown":"No, absolutely not - because if `acct` is null, it won&#39;t even *get* to `isEmpty`... it will immediately throw a `NullPointerException`.\r\n\r\nYour test should be:\r\n\r\n    if (acct != null &amp;&amp; !acct.isEmpty())\r\n\r\nNote the use of `&amp;&amp;` here, rather than your `||` in the previous code; also note how in your previous code, your conditions were wrong anyway - even with `&amp;&amp;` you would only have entered the `if` body if `acct` *was* an empty string.\r\n\r\nAlternatively, using [Guava][1]:\r\n\r\n    if (!Strings.isNullOrEmpty(acct))\r\n\r\n\r\n  [1]: https://github.com/google/guava","title":"Can we rely on String.isEmpty for checking null condition on a String in Java?","body":"<p>No, absolutely not - because if <code>acct</code> is null, it won't even <em>get</em> to <code>isEmpty</code>... it will immediately throw a <code>NullPointerException</code>.</p>\n\n<p>Your test should be:</p>\n\n<pre><code>if (acct != null &amp;&amp; !acct.isEmpty())\n</code></pre>\n\n<p>Note the use of <code>&amp;&amp;</code> here, rather than your <code>||</code> in the previous code; also note how in your previous code, your conditions were wrong anyway - even with <code>&amp;&amp;</code> you would only have entered the <code>if</code> body if <code>acct</code> <em>was</em> an empty string.</p>\n\n<p>Alternatively, using <a href=\"https://github.com/google/guava\" rel=\"noreferrer\">Guava</a>:</p>\n\n<pre><code>if (!Strings.isNullOrEmpty(acct))\n</code></pre>\n"},{"comments":[{"owner":{"account_id":142648,"reputation":5016,"user_id":350488,"display_name":"Vadim"},"score":6,"creation_date":1327313704,"post_id":8970043,"comment_id":11235610,"body_markdown":"I would recommend using StringUtils from commons-lang instead of writing your own.","body":"I would recommend using StringUtils from commons-lang instead of writing your own."},{"owner":{"account_id":103559,"reputation":73828,"user_id":277304,"accept_rate":66,"display_name":"leonbloy"},"score":6,"creation_date":1454588689,"post_id":8970043,"comment_id":58117768,"body_markdown":"+1 I would _not_ recommend adding commons-lang to your project (unless you are already including it) only for such a simple method.","body":"+1 I would <i>not</i> recommend adding commons-lang to your project (unless you are already including it) only for such a simple method."},{"owner":{"account_id":198568,"reputation":5868,"user_id":443310,"accept_rate":100,"display_name":"I.G. Pascual"},"score":4,"creation_date":1474984757,"post_id":8970043,"comment_id":66750723,"body_markdown":"Reading the above answers, how about `str == null || str.trim().isEmpty()`?","body":"Reading the above answers, how about <code>str == null || str.trim().isEmpty()</code>?"},{"owner":{"account_id":198568,"reputation":5868,"user_id":443310,"accept_rate":100,"display_name":"I.G. Pascual"},"score":0,"creation_date":1499334359,"post_id":8970043,"comment_id":76865870,"body_markdown":"@ardila which is exactly what this answer is checking","body":"@ardila which is exactly what this answer is checking"}],"tags":[],"owner":{"account_id":183777,"reputation":4897,"user_id":419377,"accept_rate":97,"display_name":"Vaandu"},"comment_count":4,"down_vote_count":1,"up_vote_count":10,"is_accepted":false,"score":9,"last_activity_date":1327314288,"creation_date":1327313621,"answer_id":8970043,"question_id":8970008,"body_markdown":"You can&#39;t use `String.isEmpty()` if it is null. Best is to have your own method to check null or empty. \r\n\r\n    public static boolean isBlankOrNull(String str) {\r\n        return (str == null || &quot;&quot;.equals(str.trim()));\r\n    }","title":"Can we rely on String.isEmpty for checking null condition on a String in Java?","body":"<p>You can't use <code>String.isEmpty()</code> if it is null. Best is to have your own method to check null or empty. </p>\n\n<pre><code>public static boolean isBlankOrNull(String str) {\n    return (str == null || \"\".equals(str.trim()));\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":5014328,"reputation":5568,"user_id":4029561,"accept_rate":90,"display_name":"NSNoob"},"score":2,"creation_date":1471346360,"post_id":31639146,"comment_id":65300230,"body_markdown":"The Question is not about whether Null and empty are same. The OP is instead asking if he can rely on String isEmpty method to check for null.","body":"The Question is not about whether Null and empty are same. The OP is instead asking if he can rely on String isEmpty method to check for null."}],"tags":[],"owner":{"account_id":6165894,"reputation":1138,"user_id":4805839,"accept_rate":39,"display_name":"sdinesh94"},"comment_count":1,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1471346319,"creation_date":1437927241,"answer_id":31639146,"question_id":8970008,"body_markdown":"    String s1=&quot;&quot;; // empty string assigned to s1 , s1 has length 0, it holds a value of no length string\r\n    \r\n    String s2=null; // absolutely nothing, it holds no value, you are not assigning any value to s2\r\n\r\nso null is not the same as empty.\r\n\r\nhope that helps!!!\r\n\r\n","title":"Can we rely on String.isEmpty for checking null condition on a String in Java?","body":"<pre><code>String s1=\"\"; // empty string assigned to s1 , s1 has length 0, it holds a value of no length string\n\nString s2=null; // absolutely nothing, it holds no value, you are not assigning any value to s2\n</code></pre>\n\n<p>so null is not the same as empty.</p>\n\n<p>hope that helps!!!</p>\n"},{"comments":[{"owner":{"account_id":5014328,"reputation":5568,"user_id":4029561,"accept_rate":90,"display_name":"NSNoob"},"score":1,"creation_date":1454589341,"post_id":35200708,"comment_id":58118180,"body_markdown":"Link only answers should be posted as comments instead","body":"Link only answers should be posted as comments instead"},{"owner":{"account_id":7200842,"reputation":470,"user_id":5498135,"display_name":"lradacher"},"score":12,"creation_date":1471346148,"post_id":35200708,"comment_id":65300095,"body_markdown":"but therefore i need more reputation","body":"but therefore i need more reputation"},{"owner":{"account_id":19769353,"reputation":301,"user_id":14476642,"display_name":"VELDAS R DURAI"},"score":0,"creation_date":1679031141,"post_id":35200708,"comment_id":133651254,"body_markdown":"StringUtils.isEmpty() is deprecated now!!! ;(","body":"StringUtils.isEmpty() is deprecated now!!! ;("}],"tags":[],"owner":{"account_id":7200842,"reputation":470,"user_id":5498135,"display_name":"lradacher"},"comment_count":3,"down_vote_count":0,"up_vote_count":35,"is_accepted":false,"score":35,"last_activity_date":1471346256,"creation_date":1454587937,"answer_id":35200708,"question_id":8970008,"body_markdown":"Use `StringUtils.isEmpty` instead, it will also check for null.\r\n\r\nExamples are:\r\n\r\n     StringUtils.isEmpty(null)      = true\r\n     StringUtils.isEmpty(&quot;&quot;)        = true\r\n     StringUtils.isEmpty(&quot; &quot;)       = false\r\n     StringUtils.isEmpty(&quot;bob&quot;)     = false\r\n     StringUtils.isEmpty(&quot;  bob  &quot;) = false\r\n\r\nSee more on [official Documentation on String Utils][1].\r\n\r\n\r\n  [1]: https://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/StringUtils.html#isEmpty(java.lang.String)","title":"Can we rely on String.isEmpty for checking null condition on a String in Java?","body":"<p>Use <code>StringUtils.isEmpty</code> instead, it will also check for null.</p>\n\n<p>Examples are:</p>\n\n<pre><code> StringUtils.isEmpty(null)      = true\n StringUtils.isEmpty(\"\")        = true\n StringUtils.isEmpty(\" \")       = false\n StringUtils.isEmpty(\"bob\")     = false\n StringUtils.isEmpty(\"  bob  \") = false\n</code></pre>\n\n<p>See more on <a href=\"https://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/StringUtils.html#isEmpty(java.lang.String)\" rel=\"noreferrer\">official Documentation on String Utils</a>.</p>\n"},{"tags":[],"owner":{"account_id":8704620,"reputation":709,"user_id":6513167,"accept_rate":69,"display_name":"Martin Niederl"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1492363394,"creation_date":1492363394,"answer_id":43439951,"question_id":8970008,"body_markdown":"No, the `String.isEmpty()` method looks as following:\r\n\r\n    public boolean isEmpty() {\r\n        return this.value.length == 0;\r\n    }\r\n\r\nas you can see it checks the length of the string\r\nso you definitely have to check if the string is null before.","title":"Can we rely on String.isEmpty for checking null condition on a String in Java?","body":"<p>No, the <code>String.isEmpty()</code> method looks as following:</p>\n\n<pre><code>public boolean isEmpty() {\n    return this.value.length == 0;\n}\n</code></pre>\n\n<p>as you can see it checks the length of the string\nso you definitely have to check if the string is null before.</p>\n"},{"tags":[],"owner":{"account_id":6360002,"reputation":21,"user_id":6546906,"display_name":"Maarten Koller"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1605178425,"creation_date":1605178425,"answer_id":64802546,"question_id":8970008,"body_markdown":"I think the even shorter answer that you&#39;ll like is: \r\n**StringUtils.isBlank(acct)**;\r\n\r\nFrom the documentation:\r\nhttp://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/StringUtils.html#isBlank%28java.lang.String%29\r\n\r\n    isBlank\r\n    public static boolean isBlank(String str)\r\n    Checks if a String is whitespace, empty (&quot;&quot;) or null.\r\n    \r\n     StringUtils.isBlank(null)      = true\r\n     StringUtils.isBlank(&quot;&quot;)        = true\r\n     StringUtils.isBlank(&quot; &quot;)       = true\r\n     StringUtils.isBlank(&quot;bob&quot;)     = false\r\n     StringUtils.isBlank(&quot;  bob  &quot;) = false\r\n     \r\n    Parameters:\r\n    str - the String to check, may be null\r\n    Returns:\r\n    true if the String is null, empty or whitespace","title":"Can we rely on String.isEmpty for checking null condition on a String in Java?","body":"<p>I think the even shorter answer that you'll like is:\n<strong>StringUtils.isBlank(acct)</strong>;</p>\n<p>From the documentation:\n<a href=\"http://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/StringUtils.html#isBlank%28java.lang.String%29\" rel=\"nofollow noreferrer\">http://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/StringUtils.html#isBlank%28java.lang.String%29</a></p>\n<pre><code>isBlank\npublic static boolean isBlank(String str)\nChecks if a String is whitespace, empty (&quot;&quot;) or null.\n\n StringUtils.isBlank(null)      = true\n StringUtils.isBlank(&quot;&quot;)        = true\n StringUtils.isBlank(&quot; &quot;)       = true\n StringUtils.isBlank(&quot;bob&quot;)     = false\n StringUtils.isBlank(&quot;  bob  &quot;) = false\n \nParameters:\nstr - the String to check, may be null\nReturns:\ntrue if the String is null, empty or whitespace\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14062814,"reputation":1724,"user_id":10158398,"display_name":"Zhou Haibo"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679039922,"creation_date":1679039922,"answer_id":75765022,"question_id":8970008,"body_markdown":"You could use TextUtils.isEmpty to check both nullable and empty string.\r\n\r\n`TextUtils.isEmpty(acct)`","title":"Can we rely on String.isEmpty for checking null condition on a String in Java?","body":"<p>You could use TextUtils.isEmpty to check both nullable and empty string.</p>\n<p><code>TextUtils.isEmpty(acct)</code></p>\n"}],"owner":{"display_name":"user663724"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":147343,"favorite_count":0,"down_vote_count":1,"up_vote_count":73,"accepted_answer_id":8970033,"answer_count":7,"score":72,"last_activity_date":1679039922,"creation_date":1327313469,"question_id":8970008,"body_markdown":"I am passing an accountid as input from an XML file as shown, which will be parsed later  and will be  used in our code:\r\n\r\n    &lt;accountid&gt;123456&lt;/accountid&gt;\r\n    &lt;user&gt;pavan&lt;/user&gt;\r\n\r\nThe issue is that if nothing is passed (null value in accoutnid) is passed as accountid, I could not able to handle that situation in Java code. I tried this but I was not successful:\r\n\r\n    if (acct != null||acct==&quot;&quot;||acct.equals(&quot;&quot;)) \r\n    {\r\n        // the above is not working \r\n    }\r\n\r\nI was able to handle this successfully using the following approach:\r\n\r\n    if(!acct.isEmpty())\r\n    {\r\n       // thisis working \r\n    }\r\n\r\n\r\n**Can we rely on the `String.isEmpty()` method for checking the null condition of a `String`? Is this valid?**","title":"Can we rely on String.isEmpty for checking null condition on a String in Java?","body":"<p>I am passing an accountid as input from an XML file as shown, which will be parsed later  and will be  used in our code:</p>\n\n<pre><code>&lt;accountid&gt;123456&lt;/accountid&gt;\n&lt;user&gt;pavan&lt;/user&gt;\n</code></pre>\n\n<p>The issue is that if nothing is passed (null value in accoutnid) is passed as accountid, I could not able to handle that situation in Java code. I tried this but I was not successful:</p>\n\n<pre><code>if (acct != null||acct==\"\"||acct.equals(\"\")) \n{\n    // the above is not working \n}\n</code></pre>\n\n<p>I was able to handle this successfully using the following approach:</p>\n\n<pre><code>if(!acct.isEmpty())\n{\n   // thisis working \n}\n</code></pre>\n\n<p><strong>Can we rely on the <code>String.isEmpty()</code> method for checking the null condition of a <code>String</code>? Is this valid?</strong></p>\n"},{"tags":["java","batch-file"],"answers":[{"comments":[{"owner":{"display_name":"user330315"},"score":3,"creation_date":1361210099,"post_id":8938968,"comment_id":20971204,"body_markdown":"That should be `java -jar myjarfile.jar` (your example is missing the `-jar`)","body":"That should be <code>java -jar myjarfile.jar</code> (your example is missing the <code>-jar</code>)"}],"tags":[],"owner":{"account_id":287300,"reputation":13144,"user_id":587021,"accept_rate":60,"display_name":"A T"},"comment_count":1,"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1361280684,"creation_date":1327050491,"answer_id":8938968,"question_id":8938944,"body_markdown":"Sure, call the java executable.\r\n\r\nMine is `C:\\Program Files\\Java\\jre6\\bin\\java.exe`, so to run it I would do\r\n\r\n`C:\\Program Files\\Java\\jre6\\bin\\java.exe -jar myjarfile.jar`","title":"How to run Java application by .bat file","body":"<p>Sure, call the java executable.</p>\n\n<p>Mine is <code>C:\\Program Files\\Java\\jre6\\bin\\java.exe</code>, so to run it I would do</p>\n\n<p><code>C:\\Program Files\\Java\\jre6\\bin\\java.exe -jar myjarfile.jar</code></p>\n"},{"tags":[],"owner":{"account_id":890986,"reputation":1559,"user_id":1165320,"accept_rate":46,"display_name":"Gaurav"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1327050503,"creation_date":1327050503,"answer_id":8938971,"question_id":8938944,"body_markdown":"Call the class which has main() method.\r\n\r\n`java MyClass`\r\n\r\nHere MyClass will have `public static void main()` method.","title":"How to run Java application by .bat file","body":"<p>Call the class which has main() method.</p>\n\n<p><code>java MyClass</code></p>\n\n<p>Here MyClass will have <code>public static void main()</code> method.</p>\n"},{"comments":[{"owner":{"account_id":138790,"reputation":61721,"user_id":343955,"accept_rate":85,"display_name":"adarshr"},"score":1,"creation_date":1327050595,"post_id":8938979,"comment_id":11187776,"body_markdown":"He&#39;s asking about running, not compiling","body":"He&#39;s asking about running, not compiling"}],"tags":[],"owner":{"account_id":409477,"reputation":1444,"user_id":780752,"accept_rate":55,"display_name":"Salaros"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679039172,"creation_date":1327050540,"answer_id":8938979,"question_id":8938944,"body_markdown":" - javac (.exe on Windows) binary path must be added into global PATH env. variable.\r\n   \r\n       javac MyProgram.java\r\n\r\n - or with java (.exe on Windows).\r\n\r\n       java MyProgram.jar","title":"How to run Java application by .bat file","body":"<ul>\n<li><p>javac (.exe on Windows) binary path must be added into global PATH env. variable.</p>\n<pre><code>javac MyProgram.java\n</code></pre>\n</li>\n<li><p>or with java (.exe on Windows).</p>\n<pre><code>java MyProgram.jar\n</code></pre>\n</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":234401,"reputation":2133,"user_id":500514,"accept_rate":91,"display_name":"panagdu"},"comment_count":0,"down_vote_count":0,"up_vote_count":34,"is_accepted":true,"score":34,"last_activity_date":1327050568,"creation_date":1327050568,"answer_id":8938982,"question_id":8938944,"body_markdown":"Simply create a .bat file with the following lines in it:\r\n\r\n    @ECHO OFF\r\n    set CLASSPATH=.\r\n    set CLASSPATH=%CLASSPATH%;path/to/needed/jars/my.jar\r\n    \r\n    %JAVA_HOME%\\bin\\java -Xms128m -Xmx384m -Xnoclassgc ro.my.class.MyClass","title":"How to run Java application by .bat file","body":"<p>Simply create a .bat file with the following lines in it:</p>\n\n<pre><code>@ECHO OFF\nset CLASSPATH=.\nset CLASSPATH=%CLASSPATH%;path/to/needed/jars/my.jar\n\n%JAVA_HOME%\\bin\\java -Xms128m -Xmx384m -Xnoclassgc ro.my.class.MyClass\n</code></pre>\n"},{"tags":[],"owner":{"account_id":138790,"reputation":61721,"user_id":343955,"accept_rate":85,"display_name":"adarshr"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1361216062,"creation_date":1327050571,"answer_id":8938984,"question_id":8938944,"body_markdown":"It&#39;s the same way you run it from command line. Just put that &quot;command line&quot; into a &quot;.bat&quot; file.\r\n\r\nSo, if you use `java -cp .;foo.jar Bar`, put that into a .bat file as\r\n\r\n    @echo off\r\n    \r\n    java -cp .;foo.jar Bar","title":"How to run Java application by .bat file","body":"<p>It's the same way you run it from command line. Just put that \"command line\" into a \".bat\" file.</p>\n\n<p>So, if you use <code>java -cp .;foo.jar Bar</code>, put that into a .bat file as</p>\n\n<pre><code>@echo off\n\njava -cp .;foo.jar Bar\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1181998,"reputation":798,"user_id":1156739,"accept_rate":100,"display_name":"Pawel"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1327050618,"creation_date":1327050618,"answer_id":8938995,"question_id":8938944,"body_markdown":"If You have jar file then create bat file with:\r\n\r\n    java -jar NameOfJar.jar","title":"How to run Java application by .bat file","body":"<p>If You have jar file then create bat file with:</p>\n\n<pre><code>java -jar NameOfJar.jar\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1718395,"reputation":385,"user_id":1574975,"accept_rate":63,"display_name":"Faahmed"},"score":3,"creation_date":1396125421,"post_id":8939051,"comment_id":34653293,"body_markdown":"what&#39;s the purpose of opening up notepad when you just want to compile and run?","body":"what&#39;s the purpose of opening up notepad when you just want to compile and run?"}],"tags":[],"owner":{"account_id":438984,"reputation":744,"user_id":827603,"display_name":"Karan Shah"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1327050954,"creation_date":1327050954,"answer_id":8939051,"question_id":8938944,"body_markdown":"    @echo off\r\n    echo You Are going to creata Java Class\r\n    set /p Name=Enter your Class Name?:\r\n    echo Your class Name is %Name% &amp; pause\r\n    echo To creat a Notepad\r\n    pause\r\n    notepad %Name%.java\r\n    set path=%PATH%;C:\\Program Files\\Java\\jdk1.6.0_14\\bin\r\n    pause\r\n    javac\r\n    echo Your java Path succsussfully set.\r\n    javac %Name%.java\r\n    pause\r\n    echo Successfully Compiled\r\n    java %Name%\r\n    pause\r\n\r\n1)open a notpad\r\n2)copy and past this code and save this file as &lt;name.bat&gt;\r\nex: test.bat\r\n3)Double Click tha batch file.\r\n4)put your java codes into the notepad and save it as &lt;your_java_class_name.java&gt;\r\nN.B.:- save this java file same folder that your batch file exists. ","title":"How to run Java application by .bat file","body":"<pre><code>@echo off\necho You Are going to creata Java Class\nset /p Name=Enter your Class Name?:\necho Your class Name is %Name% &amp; pause\necho To creat a Notepad\npause\nnotepad %Name%.java\nset path=%PATH%;C:\\Program Files\\Java\\jdk1.6.0_14\\bin\npause\njavac\necho Your java Path succsussfully set.\njavac %Name%.java\npause\necho Successfully Compiled\njava %Name%\npause\n</code></pre>\n\n<p>1)open a notpad\n2)copy and past this code and save this file as \nex: test.bat\n3)Double Click tha batch file.\n4)put your java codes into the notepad and save it as \nN.B.:- save this java file same folder that your batch file exists. </p>\n"},{"tags":[],"owner":{"account_id":2382429,"reputation":21,"user_id":2084179,"display_name":"M.Zaheer"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1361209757,"creation_date":1361208406,"answer_id":14941938,"question_id":8938944,"body_markdown":"`javac Application.java`\r\n\r\n`java Application`\r\n\r\n`pause`\r\n\r\nThe `javac` command  will compile the java program and the `java` command will run the program  and `pause` will pause the result until you cross it.","title":"How to run Java application by .bat file","body":"<p><code>javac Application.java</code></p>\n\n<p><code>java Application</code></p>\n\n<p><code>pause</code></p>\n\n<p>The <code>javac</code> command  will compile the java program and the <code>java</code> command will run the program  and <code>pause</code> will pause the result until you cross it.</p>\n"}],"owner":{"account_id":1003494,"reputation":4659,"user_id":1017804,"accept_rate":52,"display_name":"vivek"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":249803,"favorite_count":0,"down_vote_count":2,"up_vote_count":26,"closed_date":1373416338,"accepted_answer_id":8938982,"answer_count":8,"score":24,"last_activity_date":1679039172,"creation_date":1327050384,"question_id":8938944,"body_markdown":"I need to run my Java Application through a .bat file.","title":"How to run Java application by .bat file","body":"<p>I need to run my Java Application through a .bat file.</p>\n"},{"tags":["java","memory-management","garbage-collection","zgc"],"comments":[{"owner":{"account_id":1443334,"reputation":41522,"user_id":1362755,"display_name":"the8472"},"score":0,"creation_date":1679243394,"post_id":75764543,"comment_id":133682423,"body_markdown":"You asked almost the same question before? https://stackoverflow.com/q/75713808/1362755\n\nAlso... why not just try it and see whether it works?","body":"You asked almost the same question before? <a href=\"https://stackoverflow.com/q/75713808/1362755\">stackoverflow.com/q/75713808/1362755</a>  Also... why not just try it and see whether it works?"},{"owner":{"account_id":1918987,"reputation":2839,"user_id":1730917,"accept_rate":71,"display_name":"Arya"},"score":0,"creation_date":1679386643,"post_id":75764543,"comment_id":133707945,"body_markdown":"Yes i&#39;ve tried it. But no, its not the same question.","body":"Yes i&#39;ve tried it. But no, its not the same question."},{"owner":{"account_id":1443334,"reputation":41522,"user_id":1362755,"display_name":"the8472"},"score":0,"creation_date":1679418778,"post_id":75764543,"comment_id":133717512,"body_markdown":"Point 1 &quot;What is the relation of ZGC and vm.max_map_count?&quot; and &quot;my question is what exactly has been changed in java or GC which causes these warnings and eventually these errors?&quot; ... are quite similar in my eyes. And the answer would be the same, ZGC simply needs more of that resource, that&#39;s their relation.\nAlso, how are big fat warning messages not documentation?","body":"Point 1 &quot;What is the relation of ZGC and vm.max_map_count?&quot; and &quot;my question is what exactly has been changed in java or GC which causes these warnings and eventually these errors?&quot; ... are quite similar in my eyes. And the answer would be the same, ZGC simply needs more of that resource, that&#39;s their relation. Also, how are big fat warning messages not documentation?"}],"owner":{"account_id":1918987,"reputation":2839,"user_id":1730917,"accept_rate":71,"display_name":"Arya"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":454,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679038989,"creation_date":1679035865,"question_id":75764543,"body_markdown":"We have a java 17 application which run with theses options:\r\n\r\n```\r\n-Xmx100g\r\n-XX:+UseZGC\r\n```\r\nWhen running it, these gc warnings appear:\r\n\r\n```\r\n[warning][gc] \r\n***** WARNING! INCORRECT SYSTEM CONFIGURATION DETECTED! *****\r\nThe system limit on number of memory mappings per process might be too low for the given\r\nmax Java heap size (102400M). Please adjust /proc/sys/vm/max_map_count to allow for at\r\nleast 184320 mappings (current limit is 65530). Continuing execution with the current\r\nlimit could lead to a premature OutOfMemoryError being thrown, due to failure to map memory.\r\n```\r\nAnd after a few hours, by increasing heap usage (about ~ `60gb`), application encountered OOM and crashed.\r\n\r\nBased on the above warning: `184320 = 1.8 * 102400`; Also i&#39;v tried other `Xmx` values, the formula is:\r\n\r\n`vm.max_map_count = 1.8 * xmx_in_mb`\r\n\r\nMy questions:\r\n\r\n 1. What is the relation of `ZGC` and `vm.max_map_count`? I can&#39;t find any official documentation about it!\r\n 2. Is it safe to use the above formula?","title":"ZGC and Xmx and vm.max_map_count","body":"<p>We have a java 17 application which run with theses options:</p>\n<pre><code>-Xmx100g\n-XX:+UseZGC\n</code></pre>\n<p>When running it, these gc warnings appear:</p>\n<pre><code>[warning][gc] \n***** WARNING! INCORRECT SYSTEM CONFIGURATION DETECTED! *****\nThe system limit on number of memory mappings per process might be too low for the given\nmax Java heap size (102400M). Please adjust /proc/sys/vm/max_map_count to allow for at\nleast 184320 mappings (current limit is 65530). Continuing execution with the current\nlimit could lead to a premature OutOfMemoryError being thrown, due to failure to map memory.\n</code></pre>\n<p>And after a few hours, by increasing heap usage (about ~ <code>60gb</code>), application encountered OOM and crashed.</p>\n<p>Based on the above warning: <code>184320 = 1.8 * 102400</code>; Also i'v tried other <code>Xmx</code> values, the formula is:</p>\n<p><code>vm.max_map_count = 1.8 * xmx_in_mb</code></p>\n<p>My questions:</p>\n<ol>\n<li>What is the relation of <code>ZGC</code> and <code>vm.max_map_count</code>? I can't find any official documentation about it!</li>\n<li>Is it safe to use the above formula?</li>\n</ol>\n"},{"tags":["java","json","serialization","jackson","getter"],"answers":[{"comments":[{"owner":{"account_id":5105426,"reputation":2826,"user_id":4093621,"accept_rate":94,"display_name":"tt_Gantz"},"score":0,"creation_date":1443528357,"post_id":32843247,"comment_id":53521170,"body_markdown":"Tried that, doesn&#39;t work. The only thing that seems to work is renaming the getter which I don&#39;t want to be doing","body":"Tried that, doesn&#39;t work. The only thing that seems to work is renaming the getter which I don&#39;t want to be doing"},{"owner":{"account_id":6189920,"reputation":2014,"user_id":4822884,"accept_rate":60,"display_name":"francesco foresti"},"score":0,"creation_date":1443529264,"post_id":32843247,"comment_id":53521806,"body_markdown":"Did you try the verbose version `@JsonProperty(value = &quot;hello&quot;)` either on the field or on the getter?","body":"Did you try the verbose version <code>@JsonProperty(value = &quot;hello&quot;)</code> either on the field or on the getter?"},{"owner":{"account_id":5105426,"reputation":2826,"user_id":4093621,"accept_rate":94,"display_name":"tt_Gantz"},"score":0,"creation_date":1443529568,"post_id":32843247,"comment_id":53521973,"body_markdown":"@francescoforesti tried that and it didn&#39;t make a difference","body":"@francescoforesti tried that and it didn&#39;t make a difference"},{"owner":{"account_id":6189920,"reputation":2014,"user_id":4822884,"accept_rate":60,"display_name":"francesco foresti"},"score":3,"creation_date":1443529771,"post_id":32843247,"comment_id":53522093,"body_markdown":"Ok. Did you already read this : http://stackoverflow.com/questions/21125173/jsonproperty-not-working-as-expected ? One comment says that it could happen if you have 2 libraries that contain the same annotation, and the wrong one is getting used.","body":"Ok. Did you already read this : <a href=\"http://stackoverflow.com/questions/21125173/jsonproperty-not-working-as-expected\" title=\"jsonproperty not working as expected\">stackoverflow.com/questions/21125173/&hellip;</a> ? One comment says that it could happen if you have 2 libraries that contain the same annotation, and the wrong one is getting used."}],"tags":[],"owner":{"account_id":1339399,"reputation":21672,"user_id":1281407,"accept_rate":93,"display_name":"mprivat"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1443527441,"creation_date":1443527441,"answer_id":32843247,"question_id":32843099,"body_markdown":"Place it on the variable, not the getter\r\n\r\n    class JacksonTester {\r\n        @JsonProperty(&quot;hello&quot;)\r\n        private String hi;\r\n\r\n        public String getHi() {\r\n            return hi;\r\n        }\r\n    } ","title":"Jackson Not Overriding Getter with @JsonProperty","body":"<p>Place it on the variable, not the getter</p>\n\n<pre><code>class JacksonTester {\n    @JsonProperty(\"hello\")\n    private String hi;\n\n    public String getHi() {\n        return hi;\n    }\n} \n</code></pre>\n"},{"comments":[{"owner":{"account_id":2691224,"reputation":1066,"user_id":2324541,"display_name":"vvs"},"score":0,"creation_date":1443791514,"post_id":32844564,"comment_id":53643715,"body_markdown":"@tt_Gantz After looking at your answer on the true root cause, I would have been surprised if my solution worked.","body":"@tt_Gantz After looking at your answer on the true root cause, I would have been surprised if my solution worked."}],"tags":[],"owner":{"account_id":2691224,"reputation":1066,"user_id":2324541,"display_name":"vvs"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1443531233,"creation_date":1443531233,"answer_id":32844564,"question_id":32843099,"body_markdown":"Have you tried below \r\n\r\n    class JacksonTester {\r\n        private String hi;\r\n    \r\n        @JsonProperty(&quot;hello&quot;)\r\n        public String getHi() {\r\n            return hi;\r\n        }\r\n    }   \r\n\r\nI mean making the &#39;hi&#39; variable declaration as private.\r\nAlternatively try to put a @JsonIgnore on the variable declaration and in case you would rather keep it at default scope.","title":"Jackson Not Overriding Getter with @JsonProperty","body":"<p>Have you tried below </p>\n\n<pre><code>class JacksonTester {\n    private String hi;\n\n    @JsonProperty(\"hello\")\n    public String getHi() {\n        return hi;\n    }\n}   \n</code></pre>\n\n<p>I mean making the 'hi' variable declaration as private.\nAlternatively try to put a @JsonIgnore on the variable declaration and in case you would rather keep it at default scope.</p>\n"},{"comments":[{"owner":{"account_id":3058092,"reputation":1163,"user_id":2591330,"display_name":"deborah-digges"},"score":5,"creation_date":1523957016,"post_id":32844950,"comment_id":86763949,"body_markdown":"I broke my head over this for a day! THANK YOU","body":"I broke my head over this for a day! THANK YOU"},{"owner":{"account_id":5745825,"reputation":11553,"user_id":4537090,"accept_rate":79,"display_name":"WesternGun"},"score":0,"creation_date":1541672158,"post_id":32844950,"comment_id":93299336,"body_markdown":"You can use `@JsonSetter` on the setter to change the prop name to look for if the var name does not coincide with the json prop name.","body":"You can use <code>@JsonSetter</code> on the setter to change the prop name to look for if the var name does not coincide with the json prop name."}],"tags":[],"owner":{"account_id":5105426,"reputation":2826,"user_id":4093621,"accept_rate":94,"display_name":"tt_Gantz"},"comment_count":2,"down_vote_count":1,"up_vote_count":71,"is_accepted":true,"score":70,"last_activity_date":1443532372,"creation_date":1443532372,"answer_id":32844950,"question_id":32843099,"body_markdown":"The problem was that I was using both the old and new jackson libraries\r\n\r\ni.e. before I had\r\n`import org.codehaus.jackson.annotate.JsonProperty;`\r\nWhich I had to change to below, to be consistent with the library I was using. \r\n\r\nSince I was using maven that also meant updating my maven dependencies.\r\n`import com.fasterxml.jackson.annotation.JsonProperty;`\r\n\r\nFor it to work, I needed the `@JsonProperty` annotation on the getter (putting it on the object didn&#39;t work)\r\n\r\nI found the answer here (thanks to francescoforesti)\r\nhttps://stackoverflow.com/questions/21125173/jsonproperty-not-working-as-expected\r\n","title":"Jackson Not Overriding Getter with @JsonProperty","body":"<p>The problem was that I was using both the old and new jackson libraries</p>\n\n<p>i.e. before I had\n<code>import org.codehaus.jackson.annotate.JsonProperty;</code>\nWhich I had to change to below, to be consistent with the library I was using. </p>\n\n<p>Since I was using maven that also meant updating my maven dependencies.\n<code>import com.fasterxml.jackson.annotation.JsonProperty;</code></p>\n\n<p>For it to work, I needed the <code>@JsonProperty</code> annotation on the getter (putting it on the object didn't work)</p>\n\n<p>I found the answer here (thanks to francescoforesti)\n<a href=\"https://stackoverflow.com/questions/21125173/jsonproperty-not-working-as-expected\">@JsonProperty not working as expected</a></p>\n"},{"tags":[],"owner":{"account_id":5114410,"reputation":37,"user_id":4100046,"display_name":"gpushkas"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1469633181,"creation_date":1469633181,"answer_id":38617276,"question_id":32843099,"body_markdown":"Camel cases still seem to have issues even after defining proper annotations.\r\nExample:\r\n\r\n @JsonProperty(&quot;mirrorport&quot;)\r\n private String mirrorPort;\r\n\r\nDeserialization still fails when xml has `&lt;mirrorport&gt;YES&lt;/mirrorport&gt;`\r\n\r\n","title":"Jackson Not Overriding Getter with @JsonProperty","body":"<p>Camel cases still seem to have issues even after defining proper annotations.\nExample:</p>\n\n<p>@JsonProperty(\"mirrorport\")\n private String mirrorPort;</p>\n\n<p>Deserialization still fails when xml has <code>&lt;mirrorport&gt;YES&lt;/mirrorport&gt;</code></p>\n"},{"comments":[{"owner":{"account_id":310601,"reputation":3703,"user_id":623678,"display_name":"Zack Bartel"},"score":2,"creation_date":1555541339,"post_id":38626172,"comment_id":98151828,"body_markdown":"Thank you very much. This is insane","body":"Thank you very much. This is insane"}],"tags":[],"owner":{"account_id":7548443,"reputation":361,"user_id":5730724,"accept_rate":50,"display_name":"Dmitriy S"},"comment_count":1,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1655893740,"creation_date":1469672832,"answer_id":38626172,"question_id":32843099,"body_markdown":"I had same proplem\r\n\r\nYou need just to replace import\r\ncom.fasterxml.jackson.annotation.JsonProperty;\r\non\r\nimport org.codehaus.jackson.annotate.JsonProperty;\r\nIts work.","title":"Jackson Not Overriding Getter with @JsonProperty","body":"<p>I had same proplem</p>\n<p>You need just to replace import\ncom.fasterxml.jackson.annotation.JsonProperty;\non\nimport org.codehaus.jackson.annotate.JsonProperty;\nIts work.</p>\n"},{"comments":[{"owner":{"account_id":155944,"reputation":1010,"user_id":1467744,"display_name":"Mohamad Eghlima"},"score":0,"creation_date":1568059360,"post_id":40936903,"comment_id":102147236,"body_markdown":"Michael, same issue here, we have hibernate bean, one of the field is `trustedIpRanges` a list of lets say `CidrBlock`, then we have a logical `String` property called `trustedIpRangesString` which must use for serialization. the problem here is that the getter method is not called by jackson, so if we assign any value to the String property, then we can see it on the result, but we are building that String in the getter method which is not called. I am stuck, any help would be appreciated.","body":"Michael, same issue here, we have hibernate bean, one of the field is <code>trustedIpRanges</code> a list of lets say <code>CidrBlock</code>, then we have a logical <code>String</code> property called <code>trustedIpRangesString</code> which must use for serialization. the problem here is that the getter method is not called by jackson, so if we assign any value to the String property, then we can see it on the result, but we are building that String in the getter method which is not called. I am stuck, any help would be appreciated."}],"tags":[],"owner":{"account_id":404885,"reputation":785,"user_id":773458,"display_name":"Michael Kolakowski"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1480696386,"creation_date":1480696386,"answer_id":40936903,"question_id":32843099,"body_markdown":"I recently came across another interesting twist on this issue. We started using the Hibernate5Module to help with some lazy loading issues. Furthermore, we use Groovy so we are not defining getters and setters.\r\n\r\nIt turns out that the Hibernate Module seems to interfere with the `@JsonProperty` annotation. Specifically if you have something annotated with `@Transient` So, if you have something like:\r\n\r\n    @Transient\r\n    @ApiModelProperty(required = true)\r\n    @JsonProperty(&quot;alternateName&quot;)\r\n    String property\r\n\r\nYou won&#39;t see the `alternateName` in the JSON. Furthermore, your clients will likely have trouble with their POSTs and PUTs! To fix this, you can use a simple workaround. Define the getters and setters for the internal name you need to use(*) and don&#39;t use the `value` attribute on `@JsonProperty` So this works:\r\n\r\n    @Transient\r\n    @ApiModelProperty(required = true)\r\n    @JsonProperty\r\n    String alternateName\r\n\r\n    void setProperty(String property) {\r\n        this.alternateName = property\r\n    }\r\n\r\n    @JsonIgnore\r\n    String getProperty() {\r\n        this.alternateName\r\n    }\r\n\r\n\r\nNote the use of the `@JsonIgnore` on the getter. If you don&#39;t, your framework will probably pick it up and you&#39;ll have duplicate entries for the same thing in your JSON.\r\n\r\nAnyhow - I&#39;m hoping this helps someone!\r\n\r\n(*)We were trying to adhere to a particular interface, thus enforcing the name internally. However, the exposed API needed a different, user-friendly name.\r\n\r\n\r\n","title":"Jackson Not Overriding Getter with @JsonProperty","body":"<p>I recently came across another interesting twist on this issue. We started using the Hibernate5Module to help with some lazy loading issues. Furthermore, we use Groovy so we are not defining getters and setters.</p>\n\n<p>It turns out that the Hibernate Module seems to interfere with the <code>@JsonProperty</code> annotation. Specifically if you have something annotated with <code>@Transient</code> So, if you have something like:</p>\n\n<pre><code>@Transient\n@ApiModelProperty(required = true)\n@JsonProperty(\"alternateName\")\nString property\n</code></pre>\n\n<p>You won't see the <code>alternateName</code> in the JSON. Furthermore, your clients will likely have trouble with their POSTs and PUTs! To fix this, you can use a simple workaround. Define the getters and setters for the internal name you need to use(*) and don't use the <code>value</code> attribute on <code>@JsonProperty</code> So this works:</p>\n\n<pre><code>@Transient\n@ApiModelProperty(required = true)\n@JsonProperty\nString alternateName\n\nvoid setProperty(String property) {\n    this.alternateName = property\n}\n\n@JsonIgnore\nString getProperty() {\n    this.alternateName\n}\n</code></pre>\n\n<p>Note the use of the <code>@JsonIgnore</code> on the getter. If you don't, your framework will probably pick it up and you'll have duplicate entries for the same thing in your JSON.</p>\n\n<p>Anyhow - I'm hoping this helps someone!</p>\n\n<p>(*)We were trying to adhere to a particular interface, thus enforcing the name internally. However, the exposed API needed a different, user-friendly name.</p>\n"},{"comments":[{"owner":{"account_id":2970960,"reputation":1759,"user_id":2523007,"accept_rate":55,"display_name":"vanomart"},"score":1,"creation_date":1511980586,"post_id":43639338,"comment_id":82076739,"body_markdown":"the only answer on the internet that actually works for newer versions of jackson","body":"the only answer on the internet that actually works for newer versions of jackson"}],"tags":[],"owner":{"account_id":3153267,"reputation":1573,"user_id":2666236,"accept_rate":60,"display_name":"Xchai"},"comment_count":1,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1493222699,"creation_date":1493222699,"answer_id":43639338,"question_id":32843099,"body_markdown":"I had this problem when updating from older version to 2.8.3 of FasterXML Jackson. \r\n\r\nThe issue was when deserializing the JSON response from our DB into Java class object, our code didn&#39;t have `@JsonSetter` on the class&#39; setters. Hence, when serializing, the output wasn&#39;t utilizing the class&#39; getters to serialize the Java class object into JSON (hence the `@JsonProperty()` decorator wasn&#39;t taking effect). \r\n\r\nI fixed the issue by adding `@JsonSetter(&quot;name-from-db&quot;)` to the setter method for that property. \r\n\r\nAlso, instead of `@JsonProperty()`, to rename properties using the getter method, you can and should use `@JsonGetter()` which is more specific to renaming properties. \r\n\r\nHere&#39;s our code:\r\n\r\n    public class KwdGroup {\r\n        private String kwdGroupType;\r\n    \r\n        // Return &quot;type&quot; instead of &quot;kwd-group-type&quot; in REST API response\r\n        @JsonGetter(&quot;type&quot;) // Can use @JsonProperty(&quot;type&quot;) as well\r\n        public String getKwdGroupType() {\r\n            return kwdTypeMap.get(kwdGroupType);\r\n        }\r\n    \r\n        @JsonSetter(&quot;kwd-group-type&quot;) // &quot;kwd-group-type&quot; is what JSON from the DB API outputs for code to consume \r\n        public void setKwdGroupType(String kwdGroupType) {\r\n            this.kwdGroupType = kwdGroupType;\r\n        }\r\n    }","title":"Jackson Not Overriding Getter with @JsonProperty","body":"<p>I had this problem when updating from older version to 2.8.3 of FasterXML Jackson. </p>\n\n<p>The issue was when deserializing the JSON response from our DB into Java class object, our code didn't have <code>@JsonSetter</code> on the class' setters. Hence, when serializing, the output wasn't utilizing the class' getters to serialize the Java class object into JSON (hence the <code>@JsonProperty()</code> decorator wasn't taking effect). </p>\n\n<p>I fixed the issue by adding <code>@JsonSetter(\"name-from-db\")</code> to the setter method for that property. </p>\n\n<p>Also, instead of <code>@JsonProperty()</code>, to rename properties using the getter method, you can and should use <code>@JsonGetter()</code> which is more specific to renaming properties. </p>\n\n<p>Here's our code:</p>\n\n<pre><code>public class KwdGroup {\n    private String kwdGroupType;\n\n    // Return \"type\" instead of \"kwd-group-type\" in REST API response\n    @JsonGetter(\"type\") // Can use @JsonProperty(\"type\") as well\n    public String getKwdGroupType() {\n        return kwdTypeMap.get(kwdGroupType);\n    }\n\n    @JsonSetter(\"kwd-group-type\") // \"kwd-group-type\" is what JSON from the DB API outputs for code to consume \n    public void setKwdGroupType(String kwdGroupType) {\n        this.kwdGroupType = kwdGroupType;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4722165,"reputation":2588,"user_id":3819751,"display_name":"ketankk"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1529681153,"creation_date":1529681153,"answer_id":50991178,"question_id":32843099,"body_markdown":"I was missing databind dependency \r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\r\n        &lt;version&gt;${fasterxml.version}&lt;/version&gt;\r\n    &lt;/dependency&gt;","title":"Jackson Not Overriding Getter with @JsonProperty","body":"<p>I was missing databind dependency </p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n    &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\n    &lt;version&gt;${fasterxml.version}&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":10862136,"reputation":143,"user_id":7986699,"accept_rate":80,"display_name":"Dhruv Choudhary"},"score":1,"creation_date":1611226850,"post_id":56103674,"comment_id":116384902,"body_markdown":"this is what happened with me, I am using both Gson and Jackson library in my code and the conflict occurs. Thanks, this worked for me.","body":"this is what happened with me, I am using both Gson and Jackson library in my code and the conflict occurs. Thanks, this worked for me."},{"owner":{"account_id":7864671,"reputation":452,"user_id":5943840,"display_name":"Raphael"},"score":1,"creation_date":1622056353,"post_id":56103674,"comment_id":119683558,"body_markdown":"@user1607261 those two imports are identical","body":"@user1607261 those two imports are identical"}],"tags":[],"owner":{"account_id":10891961,"reputation":529,"user_id":8007430,"display_name":"Khaled"},"comment_count":2,"down_vote_count":0,"up_vote_count":29,"is_accepted":false,"score":29,"last_activity_date":1557697108,"creation_date":1557697108,"answer_id":56103674,"question_id":32843099,"body_markdown":"I know its an old question but for me I got it working when I figured out that its conflicting with Gson library so I had to use `@SerializedName(&quot;name&quot;)` instead of `@JsonProperty(&quot;name&quot;)` hope this helps ","title":"Jackson Not Overriding Getter with @JsonProperty","body":"<p>I know its an old question but for me I got it working when I figured out that its conflicting with Gson library so I had to use <code>@SerializedName(\"name\")</code> instead of <code>@JsonProperty(\"name\")</code> hope this helps </p>\n"},{"comments":[{"owner":{"account_id":162140,"reputation":29525,"user_id":383414,"accept_rate":85,"display_name":"Richard Le Mesurier"},"score":4,"creation_date":1602737385,"post_id":56516952,"comment_id":113816029,"body_markdown":"This is a very important distinction between Java &amp; Kotlin, and exactly what I needed.","body":"This is a very important distinction between Java &amp; Kotlin, and exactly what I needed."},{"owner":{"account_id":347881,"reputation":2499,"user_id":682263,"accept_rate":78,"display_name":"dominicbri7"},"score":0,"creation_date":1614163620,"post_id":56516952,"comment_id":117299823,"body_markdown":"I was wondering why it wasn&#39;t working with my Kotlin data class, thank you!","body":"I was wondering why it wasn&#39;t working with my Kotlin data class, thank you!"},{"owner":{"account_id":4251594,"reputation":2554,"user_id":3478500,"accept_rate":78,"display_name":"Alex McLean"},"score":1,"creation_date":1631216284,"post_id":56516952,"comment_id":122170281,"body_markdown":"If you get an error for this, make sure you try applying this to all of your `@JsonProperty`s in the class. Also, `@field:JsonProperty` worked for me.","body":"If you get an error for this, make sure you try applying this to all of your <code>@JsonProperty</code>s in the class. Also, <code>@field:JsonProperty</code> worked for me."}],"tags":[],"owner":{"account_id":4146709,"reputation":717,"user_id":3400198,"display_name":"Francisco C."},"comment_count":3,"down_vote_count":1,"up_vote_count":40,"is_accepted":false,"score":39,"last_activity_date":1560102076,"creation_date":1560102076,"answer_id":56516952,"question_id":32843099,"body_markdown":"**If using Kotlin**\r\n\r\nI understand the original question is in Java, but since Kotlin is becoming very popular and many might be using it I&#39;d like to post this here to help others. \r\n\r\nAnyway, for Kotlin, because how getters/setters work, if you are using `val`, meaning you only expose the getter, you may need to apply the annotation to the getter like below:\r\n\r\n```kotlin\r\nclass JacksonTester(@get:JsonProperty(&quot;hello&quot;) val hi: String)\r\n   \r\n```\r\n\r\n","title":"Jackson Not Overriding Getter with @JsonProperty","body":"<p><strong>If using Kotlin</strong></p>\n\n<p>I understand the original question is in Java, but since Kotlin is becoming very popular and many might be using it I'd like to post this here to help others. </p>\n\n<p>Anyway, for Kotlin, because how getters/setters work, if you are using <code>val</code>, meaning you only expose the getter, you may need to apply the annotation to the getter like below:</p>\n\n<pre><code>class JacksonTester(@get:JsonProperty(\"hello\") val hi: String)\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14073451,"reputation":138,"user_id":10166394,"display_name":"YWILLS"},"comment_count":0,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1573042316,"creation_date":1573041271,"answer_id":58729585,"question_id":32843099,"body_markdown":"Try this\r\n```java\r\nclass JacksonTester {\r\n    private String hi;\r\n\r\n    @JsonProperty(&quot;hi&quot;)\r\n    public String getHi() {\r\n        return hi;\r\n    }\r\n} \r\n```","title":"Jackson Not Overriding Getter with @JsonProperty","body":"<p>Try this</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>class JacksonTester {\n    private String hi;\n\n    @JsonProperty(\"hi\")\n    public String getHi() {\n        return hi;\n    }\n} \n</code></pre>\n"},{"tags":[],"owner":{"account_id":27183786,"reputation":1,"user_id":20718562,"display_name":"Sudeetha Perera"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679038777,"creation_date":1678675535,"answer_id":75717667,"question_id":32843099,"body_markdown":"I had same problem, \r\nthis is happened with when I used com.fasterxml.jackson.core and com.google.code.gson:gson together\r\n\r\nI resolved using gson.annotations `@SerializedName(&quot;enum&quot;)` instead of `@JsonProperty(&quot;enum&quot;)` which comes with fasterxml\r\n\r\nThanks","title":"Jackson Not Overriding Getter with @JsonProperty","body":"<p>I had same problem,\nthis is happened with when I used com.fasterxml.jackson.core and com.google.code.gson:gson together</p>\n<p>I resolved using gson.annotations <code>@SerializedName(&quot;enum&quot;)</code> instead of <code>@JsonProperty(&quot;enum&quot;)</code> which comes with fasterxml</p>\n<p>Thanks</p>\n"}],"owner":{"account_id":5105426,"reputation":2826,"user_id":4093621,"accept_rate":94,"display_name":"tt_Gantz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":91193,"favorite_count":0,"down_vote_count":0,"up_vote_count":35,"accepted_answer_id":32844950,"answer_count":12,"score":35,"last_activity_date":1679038777,"creation_date":1443527118,"question_id":32843099,"body_markdown":"`JsonProperty` isn&#39;t overriding the default name jackson gets from the getter. If I serialize the class below with `ObjectMapper` and jackson I get\r\n\r\n    {&quot;hi&quot;:&quot;hello&quot;}\r\n\r\nAs you can see the JsonProperty annotation has no effect\r\n\r\n    class JacksonTester {\r\n        String hi;\r\n\r\n        @JsonProperty(&quot;hello&quot;)\r\n        public String getHi() {\r\n            return hi;\r\n        }\r\n    }   \r\n\r\nPutting `@JsonProperty` on the String itself doesn&#39;t work either. The only way it seems that I can change the name is by renaming the getter, the only problem is that it then will always be lowercase for the first letter","title":"Jackson Not Overriding Getter with @JsonProperty","body":"<p><code>JsonProperty</code> isn't overriding the default name jackson gets from the getter. If I serialize the class below with <code>ObjectMapper</code> and jackson I get</p>\n\n<pre><code>{\"hi\":\"hello\"}\n</code></pre>\n\n<p>As you can see the JsonProperty annotation has no effect</p>\n\n<pre><code>class JacksonTester {\n    String hi;\n\n    @JsonProperty(\"hello\")\n    public String getHi() {\n        return hi;\n    }\n}   \n</code></pre>\n\n<p>Putting <code>@JsonProperty</code> on the String itself doesn't work either. The only way it seems that I can change the name is by renaming the getter, the only problem is that it then will always be lowercase for the first letter</p>\n"},{"tags":["java","oauth-2.0","linkedin-api"],"answers":[{"tags":[],"owner":{"account_id":24402951,"reputation":21,"user_id":18331441,"display_name":"tomDev93"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1646381459,"creation_date":1646381459,"answer_id":71348336,"question_id":71344046,"body_markdown":"I fix it by added queryParams by method not directly in url :\r\n```java\r\nwebClient.get()\r\n            .uri(uriBuilder -&gt; uriBuilder.path(&quot;v2/emailAddress&quot;)\r\n                .queryParam(&quot;q&quot;, &quot;members&quot;)\r\n                .queryParam(&quot;projection&quot;, &quot;(elements*(handle~))&quot;).build())\r\n            .header(&quot;Authorization&quot;, &quot;Bearer &quot; + facebook.getAccessToken())\r\n            .retrieve()\r\n            .bodyToMono(GoogleProfile.class)\r\n            .log()\r\n            .block();","title":"Why Linkedin API return 404 when i try to get email address","body":"<p>I fix it by added queryParams by method not directly in url :</p>\n<pre class=\"lang-java prettyprint-override\"><code>webClient.get()\n            .uri(uriBuilder -&gt; uriBuilder.path(&quot;v2/emailAddress&quot;)\n                .queryParam(&quot;q&quot;, &quot;members&quot;)\n                .queryParam(&quot;projection&quot;, &quot;(elements*(handle~))&quot;).build())\n            .header(&quot;Authorization&quot;, &quot;Bearer &quot; + facebook.getAccessToken())\n            .retrieve()\n            .bodyToMono(GoogleProfile.class)\n            .log()\n            .block();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1123809,"reputation":21,"user_id":1111532,"display_name":"bansal98"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679038706,"creation_date":1678673317,"answer_id":75717532,"question_id":71344046,"body_markdown":"An easier and better way is to use the `userinfo` endpoint as described [here][1].\r\n\r\nThis will give you all the required fields in the same response:\r\n\r\n    {\r\n    &quot;sub&quot;: &quot;782bbtaQ&quot;,\r\n    &quot;name&quot;: &quot;John Doe&quot;,\r\n    &quot;given_name&quot;: &quot;John&quot;,\r\n    &quot;family_name&quot;: &quot;Doe&quot;,\r\n    &quot;picture&quot;: &quot;https://media.licdn-ei.com/dms/image/C5F03AQHqK8v7tB1HCQ/profile-displayphoto-shrink_100_100/0/&quot;,\r\n    &quot;locale&quot;: &quot;en-US&quot;,\r\n    &quot;email&quot;: &quot;doe@email.com&quot;,\r\n    &quot;email_verified&quot;: true\r\n    }\r\n\r\n  [1]: https://learn.microsoft.com/en-us/linkedin/consumer/integrations/self-serve/sign-in-with-linkedin-v2?context=linkedin%2Fconsumer%2Fcontext#api-request-to-retreive-member-details","title":"Why Linkedin API return 404 when i try to get email address","body":"<p>An easier and better way is to use the <code>userinfo</code> endpoint as described <a href=\"https://learn.microsoft.com/en-us/linkedin/consumer/integrations/self-serve/sign-in-with-linkedin-v2?context=linkedin%2Fconsumer%2Fcontext#api-request-to-retreive-member-details\" rel=\"nofollow noreferrer\">here</a>.</p>\n<p>This will give you all the required fields in the same response:</p>\n<pre><code>{\n&quot;sub&quot;: &quot;782bbtaQ&quot;,\n&quot;name&quot;: &quot;John Doe&quot;,\n&quot;given_name&quot;: &quot;John&quot;,\n&quot;family_name&quot;: &quot;Doe&quot;,\n&quot;picture&quot;: &quot;https://media.licdn-ei.com/dms/image/C5F03AQHqK8v7tB1HCQ/profile-displayphoto-shrink_100_100/0/&quot;,\n&quot;locale&quot;: &quot;en-US&quot;,\n&quot;email&quot;: &quot;doe@email.com&quot;,\n&quot;email_verified&quot;: true\n}\n</code></pre>\n"}],"owner":{"account_id":24402951,"reputation":21,"user_id":18331441,"display_name":"tomDev93"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":804,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1679038706,"creation_date":1646343151,"question_id":71344046,"body_markdown":"I try to get email address of logged user from Linkedin API so I do GET request on: `https://api.linkedin.com/v2/emailAddress?q=members&amp;projection=(elements*(handle~))` with Authorization header `Bearer access_token`. But I get 404 with response \r\n```json\r\n{&quot;serviceErrorCode&quot;:0,&quot;message&quot;:&quot;Resource null does not exist&quot;,&quot;status&quot;:404}\r\n```\r\n\r\nEndpoint with profile data `/v2/me` work correctly. What i do wrong? \r\n\r\nSample code not refactored yet, only for get response and request log. Do not be influenced by the names of the variables:\r\n\r\n```java\r\n   webClient = WebClient.builder()\r\n            .baseUrl(&quot;https://api.linkedin.com&quot;)\r\n            .clientConnector(new ReactorClientHttpConnector(HttpClient.create().wiretap(this.getClass().getCanonicalName(), LogLevel.INFO, AdvancedByteBufFormat.TEXTUAL)))\r\n            .build();\r\n        webClient.get()\r\n            .uri(uriBuilder -&gt; uriBuilder.path(&quot;/v2/me&quot;).build())\r\n            .header(&quot;Authorization&quot;, &quot;Bearer &quot; + facebook.getAccessToken())\r\n            .retrieve()\r\n            .bodyToMono(GoogleProfile.class)\r\n            .log()\r\n            .block();\r\n        webClient.get()\r\n            .uri(uriBuilder -&gt; uriBuilder.path(&quot;v2/emailAddress?q=members&amp;projection=(elements*(handle~))&quot;).build())\r\n            .header(&quot;Authorization&quot;, &quot;Bearer &quot; + facebook.getAccessToken())\r\n            .retrieve()\r\n            .bodyToMono(GoogleProfile.class)\r\n            .log()\r\n            .block();\r\n```\r\nAnd my client code: \r\n```js\r\n\tconst redirectUri = &#39;http://localhost:8082/login/linkedin/callback&#39;;\r\n\tconst scope = &#39;r_liteprofile r_emailaddress&#39;;\r\n\tconst clientId = &#39;client_code&#39;;\r\n\tconst responseType = &#39;code&#39;;\r\n\r\n\tconst linkedinLoginAction = () =&gt; {\r\n\t\twindow.open(`https://www.linkedin.com/oauth/v2/authorization?client_id=${clientId}&amp;redirect_uri=${redirectUri}&amp;scope=${scope}&amp;response_type=${responseType}`)\r\n\t}\r\n```\r\n\r\nMaybe it&#39;s some problem with user profile configuration linked with email address privacy policy or something?\r\n","title":"Why Linkedin API return 404 when i try to get email address","body":"<p>I try to get email address of logged user from Linkedin API so I do GET request on: <code>https://api.linkedin.com/v2/emailAddress?q=members&amp;projection=(elements*(handle~))</code> with Authorization header <code>Bearer access_token</code>. But I get 404 with response</p>\n<pre class=\"lang-json prettyprint-override\"><code>{&quot;serviceErrorCode&quot;:0,&quot;message&quot;:&quot;Resource null does not exist&quot;,&quot;status&quot;:404}\n</code></pre>\n<p>Endpoint with profile data <code>/v2/me</code> work correctly. What i do wrong?</p>\n<p>Sample code not refactored yet, only for get response and request log. Do not be influenced by the names of the variables:</p>\n<pre class=\"lang-java prettyprint-override\"><code>   webClient = WebClient.builder()\n            .baseUrl(&quot;https://api.linkedin.com&quot;)\n            .clientConnector(new ReactorClientHttpConnector(HttpClient.create().wiretap(this.getClass().getCanonicalName(), LogLevel.INFO, AdvancedByteBufFormat.TEXTUAL)))\n            .build();\n        webClient.get()\n            .uri(uriBuilder -&gt; uriBuilder.path(&quot;/v2/me&quot;).build())\n            .header(&quot;Authorization&quot;, &quot;Bearer &quot; + facebook.getAccessToken())\n            .retrieve()\n            .bodyToMono(GoogleProfile.class)\n            .log()\n            .block();\n        webClient.get()\n            .uri(uriBuilder -&gt; uriBuilder.path(&quot;v2/emailAddress?q=members&amp;projection=(elements*(handle~))&quot;).build())\n            .header(&quot;Authorization&quot;, &quot;Bearer &quot; + facebook.getAccessToken())\n            .retrieve()\n            .bodyToMono(GoogleProfile.class)\n            .log()\n            .block();\n</code></pre>\n<p>And my client code:</p>\n<pre class=\"lang-js prettyprint-override\"><code>    const redirectUri = 'http://localhost:8082/login/linkedin/callback';\n    const scope = 'r_liteprofile r_emailaddress';\n    const clientId = 'client_code';\n    const responseType = 'code';\n\n    const linkedinLoginAction = () =&gt; {\n        window.open(`https://www.linkedin.com/oauth/v2/authorization?client_id=${clientId}&amp;redirect_uri=${redirectUri}&amp;scope=${scope}&amp;response_type=${responseType}`)\n    }\n</code></pre>\n<p>Maybe it's some problem with user profile configuration linked with email address privacy policy or something?</p>\n"},{"tags":["java","spring-boot","spring-security","jwt"],"comments":[{"owner":{"account_id":6463892,"reputation":15974,"user_id":5277820,"accept_rate":68,"display_name":"dur"},"score":0,"creation_date":1599248782,"post_id":63739817,"comment_id":112726726,"body_markdown":"Your problem is that you are adding `privileges` as authorities. Did your user have a privilege with name `ROLE_ADMIN`? If you change your code to use only role names not privileges it should work.","body":"Your problem is that you are adding <code>privileges</code> as authorities. Did your user have a privilege with name <code>ROLE_ADMIN</code>? If you change your code to use only role names not privileges it should work."}],"answers":[{"comments":[{"owner":{"account_id":17029695,"reputation":1699,"user_id":12320109,"display_name":"Boommeister"},"score":0,"creation_date":1599230180,"post_id":63740233,"comment_id":112718997,"body_markdown":"I tried it in combination with `@PreAuthorize(&quot;hasRole(&#39;ROLE_ADMIN&#39;)&quot;)`, but it returned status 403 Forbidden for the user with role &quot;ADMIN&quot;. -&gt; at least that has now an effect, before `@PreAuthorize(&quot;hasRole(&#39;ROLE_ADMIN&#39;)&quot;)` always returned status 200. When I commented `@PreAuthorize(&quot;hasRole(&#39;ROLE_ADMIN&#39;)&quot;)` out, it returned status 200 again.\nBut of course it should return status 403 only for users without role ADMIN, not for all users.","body":"I tried it in combination with <code>@PreAuthorize(&quot;hasRole(&#39;ROLE_ADMIN&#39;)&quot;)</code>, but it returned status 403 Forbidden for the user with role &quot;ADMIN&quot;. -&gt; at least that has now an effect, before <code>@PreAuthorize(&quot;hasRole(&#39;ROLE_ADMIN&#39;)&quot;)</code> always returned status 200. When I commented <code>@PreAuthorize(&quot;hasRole(&#39;ROLE_ADMIN&#39;)&quot;)</code> out, it returned status 200 again. But of course it should return status 403 only for users without role ADMIN, not for all users."},{"owner":{"account_id":17029695,"reputation":1699,"user_id":12320109,"display_name":"Boommeister"},"score":0,"creation_date":1599230285,"post_id":63740233,"comment_id":112719059,"body_markdown":"How does &quot;hasRole(&#39;ROLE_ADMIN&#39;)&quot; even know that the String &quot;ROLE_ADMIN&quot; is set in the name of the role? I&#39;m defining the roles myself in the role entity in Role.java. Does the String &quot;ROLE_ADMIN&quot; really belong into the name attribut of role?","body":"How does &quot;hasRole(&#39;ROLE_ADMIN&#39;)&quot; even know that the String &quot;ROLE_ADMIN&quot; is set in the name of the role? I&#39;m defining the roles myself in the role entity in Role.java. Does the String &quot;ROLE_ADMIN&quot; really belong into the name attribut of role?"},{"owner":{"account_id":17029695,"reputation":1699,"user_id":12320109,"display_name":"Boommeister"},"score":0,"creation_date":1599230460,"post_id":63740233,"comment_id":112719147,"body_markdown":"I also tried `@PreAuthorize(&quot;hasAuthority(&#39;ROLE_ADMIN&#39;)&quot;)` in combination with your suggested code, but it also returns status 403.","body":"I also tried <code>@PreAuthorize(&quot;hasAuthority(&#39;ROLE_ADMIN&#39;)&quot;)</code> in combination with your suggested code, but it also returns status 403."},{"owner":{"account_id":17029695,"reputation":1699,"user_id":12320109,"display_name":"Boommeister"},"score":0,"creation_date":1599230545,"post_id":63740233,"comment_id":112719199,"body_markdown":"In fact every API access point is now forbidden. (which makes sense since we don&#39;t allow access with antMatchers anymore)","body":"In fact every API access point is now forbidden. (which makes sense since we don&#39;t allow access with antMatchers anymore)"},{"owner":{"account_id":1448931,"reputation":498,"user_id":1366503,"display_name":"Alok Singh"},"score":0,"creation_date":1599289969,"post_id":63740233,"comment_id":112734061,"body_markdown":"UserDetailService should set one of the role ‘ROLE_ADMIN’ upon authentication.","body":"UserDetailService should set one of the role ‘ROLE_ADMIN’ upon authentication."},{"owner":{"account_id":1448931,"reputation":498,"user_id":1366503,"display_name":"Alok Singh"},"score":0,"creation_date":1599290114,"post_id":63740233,"comment_id":112734092,"body_markdown":"‘@Bean\n    public UserDetailsService userDetailsService() {\n        return new UserDetailsService() {\n            @Override\n            public UserDetails loadUserByUsername(String username) {\n                if (username.equalsIgnoreCase(&quot;alok”) {\n                    return new User(username, &quot;&quot;,\n                            AuthorityUtils\n                                    .commaSeparatedStringToAuthorityList(&quot;ROLE_USER&quot;));\n                }\n                throw new UsernameNotFoundException(&quot;User not found!&quot;);\n            }\n        };\n    }‘","body":"‘@Bean     public UserDetailsService userDetailsService() {         return new UserDetailsService() {             @Override             public UserDetails loadUserByUsername(String username) {                 if (username.equalsIgnoreCase(&quot;alok”) {                     return new User(username, &quot;&quot;,                             AuthorityUtils                                     .commaSeparatedStringToAuthorityList(&quot;ROLE_USER&quot;));                 }                 throw new UsernameNotFoundException(&quot;User not found!&quot;);             }         };     }‘"},{"owner":{"account_id":22585429,"reputation":286,"user_id":16769477,"display_name":"Jay Yadav"},"score":0,"creation_date":1683009537,"post_id":63740233,"comment_id":134297210,"body_markdown":"[boommeister](https://stackoverflow.com/users/12320109/boommeister) Has Role works with `@PreAuthorize(&quot;hasRole(&#39;ADMIN&#39;)&quot;)`  without ROLE_ prefix whereas `@PreAuthorize(&quot;hasAuthority(&#39;ROLE_ADMIN&#39;)&quot;)` needs ROLE_ prefix to work","body":"<a href=\"https://stackoverflow.com/users/12320109/boommeister\">boommeister</a> Has Role works with <code>@PreAuthorize(&quot;hasRole(&#39;ADMIN&#39;)&quot;)</code>  without ROLE_ prefix whereas <code>@PreAuthorize(&quot;hasAuthority(&#39;ROLE_ADMIN&#39;)&quot;)</code> needs ROLE_ prefix to work"}],"tags":[],"owner":{"account_id":1448931,"reputation":498,"user_id":1366503,"display_name":"Alok Singh"},"comment_count":7,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1599218619,"creation_date":1599218619,"answer_id":63740233,"question_id":63739817,"body_markdown":"Annotate `public class SecurityConfig extends WebSecurityConfigurerAdapter` with `@EnableGlobalMethodSecurity(prePostEnabled = true)`\r\n\r\nAnd,\r\n\r\n    @PreAuthorize(&quot;hasAuthority(&#39;ROLE_ADMIN&#39;)&quot;)\r\n    @GetMapping(&quot;/admin&quot;)\r\n    public String admin() {\r\n        return &quot;Welcome Admin!&quot;;\r\n    }","title":"Spring Security role based authentication - 403 Forbidden although user has ROLE_ADMIN","body":"<p>Annotate <code>public class SecurityConfig extends WebSecurityConfigurerAdapter</code> with <code>@EnableGlobalMethodSecurity(prePostEnabled = true)</code></p>\n<p>And,</p>\n<pre><code>@PreAuthorize(&quot;hasAuthority('ROLE_ADMIN')&quot;)\n@GetMapping(&quot;/admin&quot;)\npublic String admin() {\n    return &quot;Welcome Admin!&quot;;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19314855,"reputation":158,"user_id":14119850,"display_name":"mazenaissa"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1600187675,"creation_date":1600187675,"answer_id":63906263,"question_id":63739817,"body_markdown":"1/ You need to enable the security annotation in your security config with adding this line :\r\n`@EnableGlobalMethodSecurity(prePostEnabled = true,securedEnabled = true)`\r\nprePostEnabled let you use @PreAuthorize,@PostAuthorize,etc and securedEnabled for using @Secured\r\n\r\n2/ In order to say that only users with the role admin can access &quot;/admin&quot; you need to add an annotation like this :\r\n`\r\n\r\n\t@PreAuthorize(&quot;hasRole(&#39;ADMIN&#39;)&quot;)\r\n\t// or @Secured({&quot;ROLE_ADMIN&quot;})\r\n\t// or @PreAuthorize(&quot;hasAuthority(&#39;ROLE_ADMIN&#39;)&quot;)\r\n\t@GetMapping(&quot;/admin&quot;)\r\n\tpublic String admin() {\r\n\t\treturn &quot;Welcome Admin!&quot;;\r\n\t}\r\n`\r\n`\r\n`.antMatchers(&quot;/admin&quot;).access(&quot;hasRole(&#39;ADMIN&#39;)&quot;)` should work too instead of using annotations.\r\n\r\n3/ You need to be sure that your method loadByUsername returns the user admin when logging with his authorities list containing the authority &quot;ROLE_ADMIN&quot;.","title":"Spring Security role based authentication - 403 Forbidden although user has ROLE_ADMIN","body":"<p>1/ You need to enable the security annotation in your security config with adding this line :\n<code>@EnableGlobalMethodSecurity(prePostEnabled = true,securedEnabled = true)</code>\nprePostEnabled let you use @PreAuthorize,@PostAuthorize,etc and securedEnabled for using @Secured</p>\n<p>2/ In order to say that only users with the role admin can access &quot;/admin&quot; you need to add an annotation like this :\n`</p>\n<pre><code>@PreAuthorize(&quot;hasRole('ADMIN')&quot;)\n// or @Secured({&quot;ROLE_ADMIN&quot;})\n// or @PreAuthorize(&quot;hasAuthority('ROLE_ADMIN')&quot;)\n@GetMapping(&quot;/admin&quot;)\npublic String admin() {\n    return &quot;Welcome Admin!&quot;;\n}\n</code></pre>\n<p><code> </code>\n<code>.antMatchers(&quot;/admin&quot;).access(&quot;hasRole('ADMIN')&quot;)</code> should work too instead of using annotations.</p>\n<p>3/ You need to be sure that your method loadByUsername returns the user admin when logging with his authorities list containing the authority &quot;ROLE_ADMIN&quot;.</p>\n"},{"comments":[{"owner":{"account_id":9502560,"reputation":63,"user_id":7063115,"display_name":"Bilbo"},"score":0,"creation_date":1633207122,"post_id":67683729,"comment_id":122699622,"body_markdown":"Thanks guys, this was the problem for me!","body":"Thanks guys, this was the problem for me!"},{"owner":{"account_id":12045936,"reputation":2811,"user_id":8810941,"display_name":"Pavindu"},"score":0,"creation_date":1645190193,"post_id":67683729,"comment_id":125811556,"body_markdown":"Thanks a bunch..this solved the problem that I have been struggling for days..&lt;3","body":"Thanks a bunch..this solved the problem that I have been struggling for days..&lt;3"},{"owner":{"account_id":22585429,"reputation":286,"user_id":16769477,"display_name":"Jay Yadav"},"score":0,"creation_date":1683011022,"post_id":67683729,"comment_id":134297442,"body_markdown":"Looks like SimpleGrantedAuthority roles name must always have ROLE_ prefix to work","body":"Looks like SimpleGrantedAuthority roles name must always have ROLE_ prefix to work"}],"tags":[],"owner":{"account_id":9620986,"reputation":61,"user_id":7758012,"display_name":"Binamra Kandel"},"comment_count":3,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1621935937,"creation_date":1621928739,"answer_id":67683729,"question_id":63739817,"body_markdown":"I was able to fix the issue by prepending `ROLE_`\r\n\r\n    List&lt;GrantedAuthority&gt; authorities = new ArrayList&lt;&gt;();\r\n    authorities.add(new SimpleGrantedAuthority(&quot;ROLE_&quot; + ADMIN));","title":"Spring Security role based authentication - 403 Forbidden although user has ROLE_ADMIN","body":"<p>I was able to fix the issue by prepending <code>ROLE_</code></p>\n<pre><code>List&lt;GrantedAuthority&gt; authorities = new ArrayList&lt;&gt;();\nauthorities.add(new SimpleGrantedAuthority(&quot;ROLE_&quot; + ADMIN));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22327226,"reputation":11,"user_id":16549073,"display_name":"v1j4y"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679038641,"creation_date":1678681908,"answer_id":75718073,"question_id":63739817,"body_markdown":"Even though in my SpringConfig I gave like below, my values in DB was expected to be prefixed with ROLE_(ex: ROLE_ADMIN).\r\n\r\n    @Bean\r\n    \tpublic SecurityFilterChain configure(HttpSecurity http) throws Exception {\r\n    \t\t\r\n    \t\treturn http\r\n    \t\t\t\t.csrf(csrf -&gt; csrf.disable())\r\n    \t\t\t\t.authorizeHttpRequests(auth -&gt; {\r\n    \t\t\t\t\tauth.requestMatchers(&quot;/library/api/addMember/**&quot;).permitAll();\r\n    \t\t\t\t\tauth.requestMatchers(&quot;/library/api/admin/**&quot;).hasRole(&quot;ADMIN&quot;);\r\n    \t\t\t\t\tauth.requestMatchers(&quot;/library/api/member/greeting/**&quot;).hasRole(&quot;MEMBER&quot;);\r\n    \t\t\t\t})\r\n    \t\t\t\t.httpBasic(Customizer.withDefaults())\r\n    \t\t\t\t.build();\r\n    \t}","title":"Spring Security role based authentication - 403 Forbidden although user has ROLE_ADMIN","body":"<p>Even though in my SpringConfig I gave like below, my values in DB was expected to be prefixed with ROLE_(ex: ROLE_ADMIN).</p>\n<pre><code>@Bean\n    public SecurityFilterChain configure(HttpSecurity http) throws Exception {\n        \n        return http\n                .csrf(csrf -&gt; csrf.disable())\n                .authorizeHttpRequests(auth -&gt; {\n                    auth.requestMatchers(&quot;/library/api/addMember/**&quot;).permitAll();\n                    auth.requestMatchers(&quot;/library/api/admin/**&quot;).hasRole(&quot;ADMIN&quot;);\n                    auth.requestMatchers(&quot;/library/api/member/greeting/**&quot;).hasRole(&quot;MEMBER&quot;);\n                })\n                .httpBasic(Customizer.withDefaults())\n                .build();\n    }\n</code></pre>\n"}],"owner":{"account_id":17029695,"reputation":1699,"user_id":12320109,"display_name":"Boommeister"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6380,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":63906263,"answer_count":4,"score":1,"last_activity_date":1679038641,"creation_date":1599216999,"question_id":63739817,"body_markdown":"I want only users with role &quot;Admin&quot; to be able to get the &quot;Welcome Admin!&quot; message:\r\n\r\n    @GetMapping(&quot;/admin&quot;)\r\n    public String admin() {\r\n        return &quot;Welcome Admin!&quot;;\r\n    }\r\n\r\nSo I added `.antMatchers(&quot;/admin&quot;).access(&quot;hasRole(&#39;ADMIN&#39;)&quot;)` to my SecurityConfig:\r\n\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    public class SecurityConfig extends WebSecurityConfigurerAdapter {\r\n\r\n      @Autowired\r\n      private CustomUserDetailsService userDetailsService;\r\n\r\n      @Autowired\r\n      private JwtFilter jwtFilter;\r\n\r\n      @Override\r\n      protected void configure(AuthenticationManagerBuilder auth) throws Exception {\r\n        auth.userDetailsService(userDetailsService);\r\n      }\r\n\r\n      @Bean\r\n\t  public PasswordEncoder passwordEncoder() {\r\n    \treturn PasswordEncoderFactories.createDelegatingPasswordEncoder();\r\n\t  }\r\n\r\n      @Bean(name = BeanIds.AUTHENTICATION_MANAGER)\r\n      @Override\r\n      public AuthenticationManager authenticationManagerBean() throws Exception {\r\n        return super.authenticationManagerBean();\r\n      }\r\n\r\n      @Override\r\n      protected void configure(HttpSecurity http) throws Exception {\r\n   \t\thttp.cors();\r\n\r\n        http.csrf().disable().authorizeRequests()\r\n                .antMatchers(&quot;/authenticate&quot;, &quot;/users/register&quot;,&quot;/products&quot;).permitAll()\r\n                .antMatchers(&quot;/admin&quot;).access(&quot;hasRole(&#39;ADMIN&#39;)&quot;)        // HERE IT SHOULD CHECK FOR THE ADMIN ROLE\r\n                .anyRequest().authenticated().and().exceptionHandling()\r\n                .and().sessionManagement()\r\n                .sessionCreationPolicy(SessionCreationPolicy.STATELESS);\r\n\r\n        http.addFilterBefore(jwtFilter, UsernamePasswordAuthenticationFilter.class);;\r\n      }\r\n    }\r\n\r\nThe user that I use to access also has the role Admin:\r\n\r\n[![the user][1]][1]\r\n\r\n**But I always get 403 Forbidden as response:**\r\n\r\n[![response][2]][2]\r\n\r\nInstead of adding the `.antMatchers(&quot;/admin&quot;).access(&quot;hasRole(&#39;ADMIN&#39;)&quot;)` to my SecurityConfig, I also tried to restrict the access with Annotations:\r\n\r\n    @PreAuthorize(&quot;hasRole(&#39;ROLE_ADMIN&#39;)&quot;)\r\n    //or @Secured({&quot;ROLE_ADMIN&quot;})\r\n    @GetMapping(&quot;/admin&quot;)\r\n    public String admin() {\r\n        return &quot;Welcome Admin!&quot;;\r\n    }\r\n\r\n**But then I can access it with any user, even if they don&#39;t have the Admin Role (response status = 200). What am I doing wrong here?**\r\n\r\nAdditional info:\r\n\r\nMy UserDetailsService:\r\n\r\n    @Service\r\n    public class CustomUserDetailsService implements UserDetailsService {\r\n    \r\n    @Autowired\r\n    private UserRepository userRepository;\r\n\r\n    @Autowired\r\n    private RoleRepository roleRepository;\r\n\r\n    @Override\r\n    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\r\n        User user = null;\r\n        try {\r\n            user = userRepository.findByName(username);\r\n        } catch(Exception e){\r\n            String message = e.getMessage();\r\n            System.out.println(message);\r\n        }\r\n\r\n        if (user == null) {\r\n            return new org.springframework.security.core.userdetails.User(\r\n                    &quot; &quot;, &quot; &quot;, true, true, true, true,\r\n                    getAuthorities(Arrays.asList(\r\n                            roleRepository.findByName(&quot;ROLE_USER&quot;))));\r\n        }\r\n\r\n        return new org.springframework.security.core.userdetails.User(user.getName(), user.getPassword(), user.isEnabled(), true, true, true, getAuthorities(user.getRoles()));\r\n    }\r\n\r\n    private Collection&lt;? extends GrantedAuthority&gt; getAuthorities(\r\n            Collection&lt;Role&gt; roles) {\r\n\r\n        return getGrantedAuthorities(getPrivileges(roles));\r\n    }\r\n\r\n    private List&lt;String&gt; getPrivileges(Collection&lt;Role&gt; roles) {\r\n\r\n        List&lt;String&gt; privileges = new ArrayList&lt;&gt;();\r\n        List&lt;Privilege&gt; collection = new ArrayList&lt;&gt;();\r\n        for (Role role : roles) {\r\n            collection.addAll(role.getPrivileges());\r\n        }\r\n        for (Privilege item : collection) {\r\n            privileges.add(item.getName());\r\n        }\r\n        return privileges;\r\n    }\r\n\r\n    private List&lt;GrantedAuthority&gt; getGrantedAuthorities(List&lt;String&gt; privileges) {\r\n        List&lt;GrantedAuthority&gt; authorities = new ArrayList&lt;&gt;();\r\n        for (String privilege : privileges) {\r\n            authorities.add(new SimpleGrantedAuthority(privilege));\r\n        }\r\n        return authorities;\r\n    }\r\n\r\n\r\n    public UserDetails loadUserByEmail(String email) throws UsernameNotFoundException {\r\n        User user = userRepository.findByEmail(email);\r\n        return new org.springframework.security.core.userdetails.User(user.getName(), user.getPassword(), new ArrayList&lt;&gt;());\r\n      }\r\n    }\r\n\r\n\r\nMy `jwtFilter.java`:\r\n\r\n    @Component\r\n    public class JwtFilter extends OncePerRequestFilter {\r\n\r\n    @Autowired\r\n    private JwtUtil jwtUtil;\r\n    @Autowired\r\n    private CustomUserDetailsService service;\r\n\r\n\r\n    @Override\r\n    protected void doFilterInternal(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, FilterChain filterChain) throws ServletException, IOException {\r\n        System.out.println(&quot;header:&quot; + httpServletRequest.getHeader(&quot;Authorization&quot;));\r\n        //get Authorization information from the request itself\r\n    \tString authorizationHeader = httpServletRequest.getHeader(&quot;Authorization&quot;);\r\n\r\n        String token = null;\r\n        String userName = null;\r\n\r\n        //check for its type, it must be Bearer + jwt\r\n        if (authorizationHeader != null &amp;&amp; authorizationHeader.startsWith(&quot;Bearer &quot;)) {\r\n            //get the token itself\r\n        \ttoken = authorizationHeader.substring(7);\r\n        \t//decrypt username\r\n            userName = jwtUtil.extractUsername(token);\r\n        }\r\n\r\n        if (userName != null &amp;&amp; SecurityContextHolder.getContext().getAuthentication() == null) {\r\n\r\n            UserDetails userDetails = service.loadUserByUsername(userName);\r\n\r\n            if (jwtUtil.validateToken(token, userDetails)) {\r\n\r\n                UsernamePasswordAuthenticationToken usernamePasswordAuthenticationToken =\r\n                        new UsernamePasswordAuthenticationToken(userDetails, null, userDetails.getAuthorities());   // HERE IS THE getAuthorities function\r\n                usernamePasswordAuthenticationToken\r\n                        .setDetails(new WebAuthenticationDetailsSource().buildDetails(httpServletRequest));\r\n                SecurityContextHolder.getContext().setAuthentication(usernamePasswordAuthenticationToken);\r\n            }\r\n        }\r\n        filterChain.doFilter(httpServletRequest, httpServletResponse);\r\n      }\r\n    }\r\n\r\n\r\nI&#39;m creating the roles &quot;Admin&quot; and &quot;User&quot; in an extra class and also assign `privileges` to them as shown in [this tutorial][3].\r\nBut actually I never need the privileges, I just couldn&#39;t get it done without them, so I left them in. Because without the privileges, I don&#39;t know how to get the GrantedAuthorities into my userDetails which are needed for the `userDetails.getAuthorities()` function in my `jwtFilter` class...:\r\n\r\n    @Component\r\n    public class SetupDataLoader implements\r\n        ApplicationListener&lt;ContextRefreshedEvent&gt; {\r\n\r\n    boolean alreadySetup = false;\r\n\r\n    @Autowired\r\n    private UserRepository userRepository;\r\n\r\n    @Autowired\r\n    private UserService userService;\r\n\r\n    @Autowired\r\n    private RoleRepository roleRepository;\r\n\r\n    @Autowired\r\n    private PrivilegeRepository privilegeRepository;\r\n\r\n    @Autowired\r\n    private PasswordEncoder passwordEncoder;\r\n\r\n    @Override\r\n    @Transactional\r\n    public void onApplicationEvent(ContextRefreshedEvent event) {\r\n\r\n        if (alreadySetup)\r\n            return;\r\n        Privilege readPrivilege\r\n                = createPrivilegeIfNotFound(&quot;READ_PRIVILEGE&quot;);\r\n        Privilege writePrivilege\r\n                = createPrivilegeIfNotFound(&quot;WRITE_PRIVILEGE&quot;);\r\n\r\n        List&lt;Privilege&gt; adminPrivileges = Arrays.asList(\r\n                readPrivilege, writePrivilege);\r\n        createRoleIfNotFound(&quot;ROLE_ADMIN&quot;, adminPrivileges);\r\n        createRoleIfNotFound(&quot;ROLE_USER&quot;, Arrays.asList(readPrivilege));\r\n\r\n        Role adminRole = roleRepository.findByName(&quot;ROLE_ADMIN&quot;);\r\n        Role userRole = roleRepository.findByName(&quot;ROLE_USER&quot;);\r\n        User harald = new User();\r\n        harald.setName(&quot;Harald&quot;);\r\n        harald.setPassword(passwordEncoder.encode(&quot;test&quot;));\r\n        harald.setEmail(&quot;test@test.com&quot;);\r\n        harald.setRoles(Arrays.asList(adminRole));\r\n        harald.setEnabled(true);\r\n        userRepository.save(harald);\r\n\r\n        User hartmut = new User();\r\n           hartmut.setName(&quot;Hartmut&quot;);\r\n           hartmut.setPassword(passwordEncoder.encode(&quot;test&quot;));\r\n           hartmut.setEmail(&quot;test@test.com&quot;);\r\n           hartmut.setRoles(Arrays.asList(adminRole));\r\n           hartmut.setEnabled(true);\r\n           userRepository.save(hartmut);\r\n           }\r\n\r\n        alreadySetup = true;\r\n    }\r\n\r\n    @Transactional\r\n    Privilege createPrivilegeIfNotFound(String name) {\r\n\r\n        Privilege privilege = privilegeRepository.findByName(name);\r\n        if (privilege == null) {\r\n            privilege = new Privilege(name);\r\n            privilegeRepository.save(privilege);\r\n        }\r\n        return privilege;\r\n    }\r\n\r\n    @Transactional\r\n    Role createRoleIfNotFound(\r\n            String name, Collection&lt;Privilege&gt; privileges) {\r\n\r\n        Role role = roleRepository.findByName(name);\r\n        if (role == null) {\r\n            role = new Role(name);\r\n            role.setPrivileges(privileges);\r\n            roleRepository.save(role);\r\n        }\r\n\r\n        return role;\r\n      }\r\n    }\r\n\r\nMy `Role.java` :\r\n\r\n    @Entity\r\n    @Table(name=&quot;roles&quot;)\r\n    @Data\r\n    @NoArgsConstructor\r\n    public class Role {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n    private Long id;\r\n\r\n    private String name;\r\n\r\n    @ManyToMany(fetch = FetchType.EAGER)\r\n    @JoinTable(\r\n            name = &quot;roles_privileges&quot;,\r\n            joinColumns = @JoinColumn(\r\n                    name = &quot;role_id&quot;, referencedColumnName = &quot;id&quot;),\r\n            inverseJoinColumns = @JoinColumn(\r\n                    name = &quot;privilege_id&quot;, referencedColumnName = &quot;id&quot;))\r\n    private Collection&lt;Privilege&gt; privileges;\r\n\r\n    public Role(String name) {\r\n        this.name = name;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return &quot;Role{&quot; +\r\n                &quot;id=&quot; + id +\r\n                &quot;, name=&#39;&quot; + name + &#39;\\&#39;&#39; +\r\n                &#39;}&#39;;\r\n      }\r\n    }\r\n\r\nand my `privilege.java`:\r\n\r\n    @Entity\r\n    @Table(name=&quot;privileges&quot;)\r\n    @Data\r\n    @NoArgsConstructor\r\n    public class Privilege {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n    private Long id;\r\n\r\n    private String name;\r\n\r\n    public Privilege(String name) {\r\n        this.name = name;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return &quot;Privilege{&quot; +\r\n                &quot;id=&quot; + id +\r\n                &quot;, name=&#39;&quot; + name + &#39;\\&#39;&#39; +\r\n                &#39;}&#39;;\r\n      }\r\n    }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/uTJ6B.png\r\n  [2]: https://i.stack.imgur.com/5EdJz.png\r\n  [3]: https://www.baeldung.com/role-and-privilege-for-spring-security-registration","title":"Spring Security role based authentication - 403 Forbidden although user has ROLE_ADMIN","body":"<p>I want only users with role &quot;Admin&quot; to be able to get the &quot;Welcome Admin!&quot; message:</p>\n<pre><code>@GetMapping(&quot;/admin&quot;)\npublic String admin() {\n    return &quot;Welcome Admin!&quot;;\n}\n</code></pre>\n<p>So I added <code>.antMatchers(&quot;/admin&quot;).access(&quot;hasRole('ADMIN')&quot;)</code> to my SecurityConfig:</p>\n<pre><code>@Configuration\n@EnableWebSecurity\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\n\n  @Autowired\n  private CustomUserDetailsService userDetailsService;\n\n  @Autowired\n  private JwtFilter jwtFilter;\n\n  @Override\n  protected void configure(AuthenticationManagerBuilder auth) throws Exception {\n    auth.userDetailsService(userDetailsService);\n  }\n\n  @Bean\n  public PasswordEncoder passwordEncoder() {\n    return PasswordEncoderFactories.createDelegatingPasswordEncoder();\n  }\n\n  @Bean(name = BeanIds.AUTHENTICATION_MANAGER)\n  @Override\n  public AuthenticationManager authenticationManagerBean() throws Exception {\n    return super.authenticationManagerBean();\n  }\n\n  @Override\n  protected void configure(HttpSecurity http) throws Exception {\n    http.cors();\n\n    http.csrf().disable().authorizeRequests()\n            .antMatchers(&quot;/authenticate&quot;, &quot;/users/register&quot;,&quot;/products&quot;).permitAll()\n            .antMatchers(&quot;/admin&quot;).access(&quot;hasRole('ADMIN')&quot;)        // HERE IT SHOULD CHECK FOR THE ADMIN ROLE\n            .anyRequest().authenticated().and().exceptionHandling()\n            .and().sessionManagement()\n            .sessionCreationPolicy(SessionCreationPolicy.STATELESS);\n\n    http.addFilterBefore(jwtFilter, UsernamePasswordAuthenticationFilter.class);;\n  }\n}\n</code></pre>\n<p>The user that I use to access also has the role Admin:</p>\n<p><a href=\"https://i.stack.imgur.com/uTJ6B.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uTJ6B.png\" alt=\"the user\" /></a></p>\n<p><strong>But I always get 403 Forbidden as response:</strong></p>\n<p><a href=\"https://i.stack.imgur.com/5EdJz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5EdJz.png\" alt=\"response\" /></a></p>\n<p>Instead of adding the <code>.antMatchers(&quot;/admin&quot;).access(&quot;hasRole('ADMIN')&quot;)</code> to my SecurityConfig, I also tried to restrict the access with Annotations:</p>\n<pre><code>@PreAuthorize(&quot;hasRole('ROLE_ADMIN')&quot;)\n//or @Secured({&quot;ROLE_ADMIN&quot;})\n@GetMapping(&quot;/admin&quot;)\npublic String admin() {\n    return &quot;Welcome Admin!&quot;;\n}\n</code></pre>\n<p><strong>But then I can access it with any user, even if they don't have the Admin Role (response status = 200). What am I doing wrong here?</strong></p>\n<p>Additional info:</p>\n<p>My UserDetailsService:</p>\n<pre><code>@Service\npublic class CustomUserDetailsService implements UserDetailsService {\n\n@Autowired\nprivate UserRepository userRepository;\n\n@Autowired\nprivate RoleRepository roleRepository;\n\n@Override\npublic UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\n    User user = null;\n    try {\n        user = userRepository.findByName(username);\n    } catch(Exception e){\n        String message = e.getMessage();\n        System.out.println(message);\n    }\n\n    if (user == null) {\n        return new org.springframework.security.core.userdetails.User(\n                &quot; &quot;, &quot; &quot;, true, true, true, true,\n                getAuthorities(Arrays.asList(\n                        roleRepository.findByName(&quot;ROLE_USER&quot;))));\n    }\n\n    return new org.springframework.security.core.userdetails.User(user.getName(), user.getPassword(), user.isEnabled(), true, true, true, getAuthorities(user.getRoles()));\n}\n\nprivate Collection&lt;? extends GrantedAuthority&gt; getAuthorities(\n        Collection&lt;Role&gt; roles) {\n\n    return getGrantedAuthorities(getPrivileges(roles));\n}\n\nprivate List&lt;String&gt; getPrivileges(Collection&lt;Role&gt; roles) {\n\n    List&lt;String&gt; privileges = new ArrayList&lt;&gt;();\n    List&lt;Privilege&gt; collection = new ArrayList&lt;&gt;();\n    for (Role role : roles) {\n        collection.addAll(role.getPrivileges());\n    }\n    for (Privilege item : collection) {\n        privileges.add(item.getName());\n    }\n    return privileges;\n}\n\nprivate List&lt;GrantedAuthority&gt; getGrantedAuthorities(List&lt;String&gt; privileges) {\n    List&lt;GrantedAuthority&gt; authorities = new ArrayList&lt;&gt;();\n    for (String privilege : privileges) {\n        authorities.add(new SimpleGrantedAuthority(privilege));\n    }\n    return authorities;\n}\n\n\npublic UserDetails loadUserByEmail(String email) throws UsernameNotFoundException {\n    User user = userRepository.findByEmail(email);\n    return new org.springframework.security.core.userdetails.User(user.getName(), user.getPassword(), new ArrayList&lt;&gt;());\n  }\n}\n</code></pre>\n<p>My <code>jwtFilter.java</code>:</p>\n<pre><code>@Component\npublic class JwtFilter extends OncePerRequestFilter {\n\n@Autowired\nprivate JwtUtil jwtUtil;\n@Autowired\nprivate CustomUserDetailsService service;\n\n\n@Override\nprotected void doFilterInternal(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, FilterChain filterChain) throws ServletException, IOException {\n    System.out.println(&quot;header:&quot; + httpServletRequest.getHeader(&quot;Authorization&quot;));\n    //get Authorization information from the request itself\n    String authorizationHeader = httpServletRequest.getHeader(&quot;Authorization&quot;);\n\n    String token = null;\n    String userName = null;\n\n    //check for its type, it must be Bearer + jwt\n    if (authorizationHeader != null &amp;&amp; authorizationHeader.startsWith(&quot;Bearer &quot;)) {\n        //get the token itself\n        token = authorizationHeader.substring(7);\n        //decrypt username\n        userName = jwtUtil.extractUsername(token);\n    }\n\n    if (userName != null &amp;&amp; SecurityContextHolder.getContext().getAuthentication() == null) {\n\n        UserDetails userDetails = service.loadUserByUsername(userName);\n\n        if (jwtUtil.validateToken(token, userDetails)) {\n\n            UsernamePasswordAuthenticationToken usernamePasswordAuthenticationToken =\n                    new UsernamePasswordAuthenticationToken(userDetails, null, userDetails.getAuthorities());   // HERE IS THE getAuthorities function\n            usernamePasswordAuthenticationToken\n                    .setDetails(new WebAuthenticationDetailsSource().buildDetails(httpServletRequest));\n            SecurityContextHolder.getContext().setAuthentication(usernamePasswordAuthenticationToken);\n        }\n    }\n    filterChain.doFilter(httpServletRequest, httpServletResponse);\n  }\n}\n</code></pre>\n<p>I'm creating the roles &quot;Admin&quot; and &quot;User&quot; in an extra class and also assign <code>privileges</code> to them as shown in <a href=\"https://www.baeldung.com/role-and-privilege-for-spring-security-registration\" rel=\"nofollow noreferrer\">this tutorial</a>.\nBut actually I never need the privileges, I just couldn't get it done without them, so I left them in. Because without the privileges, I don't know how to get the GrantedAuthorities into my userDetails which are needed for the <code>userDetails.getAuthorities()</code> function in my <code>jwtFilter</code> class...:</p>\n<pre><code>@Component\npublic class SetupDataLoader implements\n    ApplicationListener&lt;ContextRefreshedEvent&gt; {\n\nboolean alreadySetup = false;\n\n@Autowired\nprivate UserRepository userRepository;\n\n@Autowired\nprivate UserService userService;\n\n@Autowired\nprivate RoleRepository roleRepository;\n\n@Autowired\nprivate PrivilegeRepository privilegeRepository;\n\n@Autowired\nprivate PasswordEncoder passwordEncoder;\n\n@Override\n@Transactional\npublic void onApplicationEvent(ContextRefreshedEvent event) {\n\n    if (alreadySetup)\n        return;\n    Privilege readPrivilege\n            = createPrivilegeIfNotFound(&quot;READ_PRIVILEGE&quot;);\n    Privilege writePrivilege\n            = createPrivilegeIfNotFound(&quot;WRITE_PRIVILEGE&quot;);\n\n    List&lt;Privilege&gt; adminPrivileges = Arrays.asList(\n            readPrivilege, writePrivilege);\n    createRoleIfNotFound(&quot;ROLE_ADMIN&quot;, adminPrivileges);\n    createRoleIfNotFound(&quot;ROLE_USER&quot;, Arrays.asList(readPrivilege));\n\n    Role adminRole = roleRepository.findByName(&quot;ROLE_ADMIN&quot;);\n    Role userRole = roleRepository.findByName(&quot;ROLE_USER&quot;);\n    User harald = new User();\n    harald.setName(&quot;Harald&quot;);\n    harald.setPassword(passwordEncoder.encode(&quot;test&quot;));\n    harald.setEmail(&quot;test@test.com&quot;);\n    harald.setRoles(Arrays.asList(adminRole));\n    harald.setEnabled(true);\n    userRepository.save(harald);\n\n    User hartmut = new User();\n       hartmut.setName(&quot;Hartmut&quot;);\n       hartmut.setPassword(passwordEncoder.encode(&quot;test&quot;));\n       hartmut.setEmail(&quot;test@test.com&quot;);\n       hartmut.setRoles(Arrays.asList(adminRole));\n       hartmut.setEnabled(true);\n       userRepository.save(hartmut);\n       }\n\n    alreadySetup = true;\n}\n\n@Transactional\nPrivilege createPrivilegeIfNotFound(String name) {\n\n    Privilege privilege = privilegeRepository.findByName(name);\n    if (privilege == null) {\n        privilege = new Privilege(name);\n        privilegeRepository.save(privilege);\n    }\n    return privilege;\n}\n\n@Transactional\nRole createRoleIfNotFound(\n        String name, Collection&lt;Privilege&gt; privileges) {\n\n    Role role = roleRepository.findByName(name);\n    if (role == null) {\n        role = new Role(name);\n        role.setPrivileges(privileges);\n        roleRepository.save(role);\n    }\n\n    return role;\n  }\n}\n</code></pre>\n<p>My <code>Role.java</code> :</p>\n<pre><code>@Entity\n@Table(name=&quot;roles&quot;)\n@Data\n@NoArgsConstructor\npublic class Role {\n\n@Id\n@GeneratedValue(strategy = GenerationType.AUTO)\nprivate Long id;\n\nprivate String name;\n\n@ManyToMany(fetch = FetchType.EAGER)\n@JoinTable(\n        name = &quot;roles_privileges&quot;,\n        joinColumns = @JoinColumn(\n                name = &quot;role_id&quot;, referencedColumnName = &quot;id&quot;),\n        inverseJoinColumns = @JoinColumn(\n                name = &quot;privilege_id&quot;, referencedColumnName = &quot;id&quot;))\nprivate Collection&lt;Privilege&gt; privileges;\n\npublic Role(String name) {\n    this.name = name;\n}\n\n@Override\npublic String toString() {\n    return &quot;Role{&quot; +\n            &quot;id=&quot; + id +\n            &quot;, name='&quot; + name + '\\'' +\n            '}';\n  }\n}\n</code></pre>\n<p>and my <code>privilege.java</code>:</p>\n<pre><code>@Entity\n@Table(name=&quot;privileges&quot;)\n@Data\n@NoArgsConstructor\npublic class Privilege {\n\n@Id\n@GeneratedValue(strategy = GenerationType.AUTO)\nprivate Long id;\n\nprivate String name;\n\npublic Privilege(String name) {\n    this.name = name;\n}\n\n@Override\npublic String toString() {\n    return &quot;Privilege{&quot; +\n            &quot;id=&quot; + id +\n            &quot;, name='&quot; + name + '\\'' +\n            '}';\n  }\n}\n</code></pre>\n"},{"tags":["java","batch-file","batch-processing"],"comments":[{"owner":{"account_id":1006515,"reputation":1225,"user_id":1020134,"display_name":"Menno Bieringa"},"score":0,"creation_date":1397553805,"post_id":4094520,"comment_id":35272555,"body_markdown":"You might want to accept an answer or respond if none of the work...","body":"You might want to accept an answer or respond if none of the work..."}],"answers":[{"comments":[{"owner":{"account_id":227533,"reputation":46580,"user_id":489261,"display_name":"darioo"},"score":0,"creation_date":1288854828,"post_id":4094535,"comment_id":4405261,"body_markdown":"This won&#39;t work if myclass isn&#39;t in the default package. Also, by Java conventions, it should be &quot;Myclass&quot; instead of &quot;myclass&quot;","body":"This won&#39;t work if myclass isn&#39;t in the default package. Also, by Java conventions, it should be &quot;Myclass&quot; instead of &quot;myclass&quot;"}],"tags":[],"owner":{"account_id":207473,"reputation":77229,"user_id":457352,"accept_rate":88,"display_name":"Benoit"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1288854396,"creation_date":1288854396,"answer_id":4094535,"question_id":4094520,"body_markdown":"If you have compiled your `.java` file, and have the `.class` file, containing bytecode for your `main` function, then just run:\r\n\r\n    java myclass\r\n\r\nwhere `myclass` is the module name (file has to be `myclass.class`).","title":"Call a Java class in a batch file","body":"<p>If you have compiled your <code>.java</code> file, and have the <code>.class</code> file, containing bytecode for your <code>main</code> function, then just run:</p>\n\n<pre><code>java myclass\n</code></pre>\n\n<p>where <code>myclass</code> is the module name (file has to be <code>myclass.class</code>).</p>\n"},{"tags":[],"owner":{"account_id":229993,"reputation":169,"user_id":493326,"display_name":"Prabhakaran"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1679038563,"creation_date":1288855719,"answer_id":4094636,"question_id":4094520,"body_markdown":"If you are having:\r\n - a class **Myclass**,\r\n - with a package name of **com.mycomp.util**.  \r\n\r\nThen:\r\n - use the parent dir of **com** e.g. **c:\\\\src**  \r\n (the folder that contains the com package),\r\n - store the below commands in a batch file:  \r\n\r\n\r\n       cd c:\\\\src  \r\n       java -cp jar1;jar2; com.mycomp.util.Myclass\r\n\r\nExecute the batch file to run the Java program.","title":"Call a Java class in a batch file","body":"<p>If you are having:</p>\n<ul>\n<li>a class <strong>Myclass</strong>,</li>\n<li>with a package name of <strong>com.mycomp.util</strong>.</li>\n</ul>\n<p>Then:</p>\n<ul>\n<li><p>use the parent dir of <strong>com</strong> e.g. <strong>c:\\src</strong><br />\n(the folder that contains the com package),</p>\n</li>\n<li><p>store the below commands in a batch file:</p>\n<pre><code>cd c:\\\\src  \njava -cp jar1;jar2; com.mycomp.util.Myclass\n</code></pre>\n</li>\n</ul>\n<p>Execute the batch file to run the Java program.</p>\n"},{"tags":[],"owner":{"account_id":1366296,"reputation":313,"user_id":1302646,"accept_rate":58,"display_name":"Samy"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1347453918,"creation_date":1347453918,"answer_id":12388470,"question_id":4094520,"body_markdown":" Just use this in ur .bat file &lt;br&gt;\r\n`java -classpath folderName/example.jar; com.example.package.ExampleProgram`\r\nif you are placing the .bat file in the same folder with the jar, then its not necessary to mention the folderName ","title":"Call a Java class in a batch file","body":"<p>Just use this in ur .bat file <br>\n<code>java -classpath folderName/example.jar; com.example.package.ExampleProgram</code>\nif you are placing the .bat file in the same folder with the jar, then its not necessary to mention the folderName </p>\n"},{"tags":[],"owner":{"account_id":3142329,"reputation":450,"user_id":2657558,"accept_rate":83,"display_name":"whirish"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1385170080,"creation_date":1376246505,"answer_id":18175380,"question_id":4094520,"body_markdown":"    @ECHO OFF\r\n    java -jar &quot;Path/To/The/Jar/Whatever.jar&quot;\r\nI would recommend first jaring up your class(es) and providing a link to the jar.","title":"Call a Java class in a batch file","body":"<pre><code>@ECHO OFF\njava -jar \"Path/To/The/Jar/Whatever.jar\"\n</code></pre>\n\n<p>I would recommend first jaring up your class(es) and providing a link to the jar.</p>\n"},{"tags":[],"owner":{"account_id":204470,"reputation":8571,"user_id":452708,"accept_rate":0,"display_name":"Abhijeet"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679036506,"creation_date":1414045233,"answer_id":26522303,"question_id":4094520,"body_markdown":"    @echo off\r\n \r\n    java -jar &quot;C:\\path_to_jar_directory\\test.jar&quot;\r\n    &quot;C:\\path_to_arguments\\property.properties&quot;","title":"Call a Java class in a batch file","body":"<pre><code>@echo off\n\njava -jar &quot;C:\\path_to_jar_directory\\test.jar&quot;\n&quot;C:\\path_to_arguments\\property.properties&quot;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10210987,"reputation":66,"user_id":7538120,"display_name":"Shubham Shah"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679036802,"creation_date":1571998652,"answer_id":58556600,"question_id":4094520,"body_markdown":"You can do the following:\r\n\r\n 1. Open a new Text File in Notepad.\r\n 2. Write the following lines of code, then saves it as &quot;MyFile.bat&quot;  \r\n (Note: Save it as a .BAT File)\r\n\r\n    `@ECHO OFF`\r\n    &lt;br/&gt; `javac YourClass.java`\r\n    &lt;br/&gt; `java YourClass`\r\n\r\n 3. Now double click the BAT file to execute your Java program.\r\n\r\n &lt;b&gt;Note:&lt;/b&gt; The BAT file and Java Class should be in the same directory.","title":"Call a Java class in a batch file","body":"<p>You can do the following:</p>\n<ol>\n<li><p>Open a new Text File in Notepad.</p>\n</li>\n<li><p>Write the following lines of code, then saves it as &quot;MyFile.bat&quot;<br />\n(Note: Save it as a .BAT File)</p>\n<p><code>@ECHO OFF</code>\n<br/> <code>javac YourClass.java</code>\n<br/> <code>java YourClass</code></p>\n</li>\n<li><p>Now double click the BAT file to execute your Java program.</p>\n</li>\n</ol>\n<p><b>Note:</b> The BAT file and Java Class should be in the same directory.</p>\n"}],"owner":{"account_id":676072,"reputation":97,"user_id":495537,"display_name":"krishna"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40428,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"answer_count":6,"score":7,"last_activity_date":1679038563,"creation_date":1288854137,"question_id":4094520,"body_markdown":"I want to call a Java class from a batch file.  \r\n\r\nHow can I do that?","title":"Call a Java class in a batch file","body":"<p>I want to call a Java class from a batch file.</p>\n<p>How can I do that?</p>\n"},{"tags":["java","rest","kerberos","impersonation","kerberos-delegation"],"owner":{"account_id":16939409,"reputation":11,"user_id":12251642,"display_name":"gpsingh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679038097,"creation_date":1679038097,"question_id":75764778,"body_markdown":"I am working on an application where my code (a simple Java HTTPURLConnection client) is making a REST call to a secured URL authenticated by Kerberos. It is working fine with this REST call and taking windows credentials to log the user.\r\nI want to impersonate the user using a delegationID with existing authentication.\r\n\r\nAny suggestion, if I can use anything for same REST API call or replace it with something. \r\nMy code is using ANT build.","title":"Impersonating in Kerberos for Java REST client","body":"<p>I am working on an application where my code (a simple Java HTTPURLConnection client) is making a REST call to a secured URL authenticated by Kerberos. It is working fine with this REST call and taking windows credentials to log the user.\nI want to impersonate the user using a delegationID with existing authentication.</p>\n<p>Any suggestion, if I can use anything for same REST API call or replace it with something.\nMy code is using ANT build.</p>\n"},{"tags":["java","lazy-evaluation","option-type"],"comments":[{"owner":{"account_id":44195,"reputation":269053,"user_id":129570,"accept_rate":79,"display_name":"Oliver Charlesworth"},"score":5,"creation_date":1496329328,"post_id":44311004,"comment_id":75627572,"body_markdown":"Assuming you&#39;re talking about `java.util.Optional` (not Guava) - `Optional` is `final`, and doesn&#39;t already expose such behaviour.  So there&#39;s no way to achieve this without modifying your API.","body":"Assuming you&#39;re talking about <code>java.util.Optional</code> (not Guava) - <code>Optional</code> is <code>final</code>, and doesn&#39;t already expose such behaviour.  So there&#39;s no way to achieve this without modifying your API."},{"owner":{"account_id":494894,"reputation":2183,"user_id":1006669,"accept_rate":52,"display_name":"Giovanni Lovato"},"score":0,"creation_date":1496329826,"post_id":44311004,"comment_id":75627966,"body_markdown":"@OliverCharlesworth Your comment headed me to the right direction: inspecting the source code of `java.util.Optional` it&#39;s pretty clear this behavior is not supported in Java 8 nor 9 (yet).","body":"@OliverCharlesworth Your comment headed me to the right direction: inspecting the source code of <code>java.util.Optional</code> it&#39;s pretty clear this behavior is not supported in Java 8 nor 9 (yet)."},{"owner":{"account_id":44195,"reputation":269053,"user_id":129570,"accept_rate":79,"display_name":"Oliver Charlesworth"},"score":1,"creation_date":1496329978,"post_id":44311004,"comment_id":75628105,"body_markdown":"@GiovanniLovato - Oh!  I just looked at the Javadoc :)","body":"@GiovanniLovato - Oh!  I just looked at the Javadoc :)"}],"answers":[{"comments":[{"owner":{"account_id":953149,"reputation":177303,"user_id":978917,"accept_rate":86,"display_name":"ruakh"},"score":0,"creation_date":1557446938,"post_id":56061861,"comment_id":98777638,"body_markdown":"+1. It may also be wise to decorate the `Supplier` with some logic to cache and reuse the result if its `get` method is invoked multiple times.","body":"+1. It may also be wise to decorate the <code>Supplier</code> with some logic to cache and reuse the result if its <code>get</code> method is invoked multiple times."},{"owner":{"account_id":358380,"reputation":18171,"user_id":1388192,"accept_rate":100,"display_name":"Erwin Smout"},"score":0,"creation_date":1557481432,"post_id":56061861,"comment_id":98788259,"body_markdown":"May be worth mentioning that probably in most use cases, due to the lazy evaluation, Supplier&lt;Foo&gt; will suffice.  If you need a Foo then you&#39;re unlikely to be able to proceed without one ...","body":"May be worth mentioning that probably in most use cases, due to the lazy evaluation, Supplier&lt;Foo&gt; will suffice.  If you need a Foo then you&#39;re unlikely to be able to proceed without one ..."}],"tags":[],"owner":{"account_id":49078,"reputation":44646,"user_id":145989,"accept_rate":59,"display_name":"Ondra Žižka"},"comment_count":2,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1557479980,"creation_date":1557412620,"answer_id":56061861,"question_id":44311004,"body_markdown":"What you want is a `Supplier` which returns an `Optional`. `Supplier` makes the lazy part.\r\n\r\nConceptual code:\r\n\r\n    Foo heavyComputation() { ... }\r\n\r\n    void main() {\r\n        Supplier&lt;Optional&lt;Foo&gt;&gt; sup = () -&gt; heavyComputation();\r\n        doSomethingWhichMayNeedHeavyResult(sup);\r\n    }\r\n\r\n    void doSomethingWhichMayNeedHeavyResult(Supplier&lt;Optional&lt;Foo&gt;&gt; sup) {\r\n        if (electricityIsTooCheap) {\r\n           Foo foo = sup.get().get().orElse(null); // This will lazy load.\r\n        }\r\n    }\r\n\r\nFor brevity, I would also like to have something which combines both into one, but that will come later I guess.","title":"Lazy evaluation of Optional","body":"<p>What you want is a <code>Supplier</code> which returns an <code>Optional</code>. <code>Supplier</code> makes the lazy part.</p>\n\n<p>Conceptual code:</p>\n\n<pre><code>Foo heavyComputation() { ... }\n\nvoid main() {\n    Supplier&lt;Optional&lt;Foo&gt;&gt; sup = () -&gt; heavyComputation();\n    doSomethingWhichMayNeedHeavyResult(sup);\n}\n\nvoid doSomethingWhichMayNeedHeavyResult(Supplier&lt;Optional&lt;Foo&gt;&gt; sup) {\n    if (electricityIsTooCheap) {\n       Foo foo = sup.get().get().orElse(null); // This will lazy load.\n    }\n}\n</code></pre>\n\n<p>For brevity, I would also like to have something which combines both into one, but that will come later I guess.</p>\n"},{"tags":[],"owner":{"account_id":3507519,"reputation":448,"user_id":2932714,"accept_rate":29,"display_name":"RekaB"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1679038074,"creation_date":1679038074,"answer_id":75764774,"question_id":44311004,"body_markdown":"In the name of brevity, I think `orElseGet` is what you&#39;re after:\r\n\r\n```\r\nvoid foo() {\r\n    System.out.println(&quot;Prints only foo&quot;);\r\n    System.out.println(Optional.of(&quot;foo&quot;).orElseGet(() -&gt; other()));\r\n    System.out.println(&quot;Prints foo and bar&quot;);\r\n    System.out.println(Optional.of(&quot;foo&quot;).orElse(other()));\r\n}\r\nprivate String other() {\r\n    System.out.println(&quot;bar&quot;);\r\n    return &quot;bar&quot;;\r\n}\r\n```","title":"Lazy evaluation of Optional","body":"<p>In the name of brevity, I think <code>orElseGet</code> is what you're after:</p>\n<pre><code>void foo() {\n    System.out.println(&quot;Prints only foo&quot;);\n    System.out.println(Optional.of(&quot;foo&quot;).orElseGet(() -&gt; other()));\n    System.out.println(&quot;Prints foo and bar&quot;);\n    System.out.println(Optional.of(&quot;foo&quot;).orElse(other()));\n}\nprivate String other() {\n    System.out.println(&quot;bar&quot;);\n    return &quot;bar&quot;;\n}\n</code></pre>\n"}],"owner":{"account_id":494894,"reputation":2183,"user_id":1006669,"accept_rate":52,"display_name":"Giovanni Lovato"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3146,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"answer_count":2,"score":9,"last_activity_date":1679038074,"creation_date":1496329172,"question_id":44311004,"body_markdown":"Is it possibile to have an `java.util.Optional` which is evaluated only if needed?\r\n\r\nI need to pass an `Optional` to a method (of an API that I cannot change), and this method may or may not make use the value of that `Optional`. Since the value is computed by a heavy operation, I&#39;d like to compute that value only when (and if) it is needed, e.g. calling `get()`, `orElseGet()`, `ifPresent()`, etc.\r\n\r\nSomething like `Optional.ofLazy(Supplier&lt;T&gt; computeValue)`.","title":"Lazy evaluation of Optional","body":"<p>Is it possibile to have an <code>java.util.Optional</code> which is evaluated only if needed?</p>\n\n<p>I need to pass an <code>Optional</code> to a method (of an API that I cannot change), and this method may or may not make use the value of that <code>Optional</code>. Since the value is computed by a heavy operation, I'd like to compute that value only when (and if) it is needed, e.g. calling <code>get()</code>, <code>orElseGet()</code>, <code>ifPresent()</code>, etc.</p>\n\n<p>Something like <code>Optional.ofLazy(Supplier&lt;T&gt; computeValue)</code>.</p>\n"},{"tags":["java","spring-cloud","netflix-eureka"],"comments":[{"owner":{"account_id":1368060,"reputation":24601,"user_id":2730527,"display_name":"spencergibb"},"score":0,"creation_date":1679063435,"post_id":75764756,"comment_id":133658706,"body_markdown":"Eureka is built to handle network failures and large numbers of instances. If you only have a few and you kill one this is its default behavior.","body":"Eureka is built to handle network failures and large numbers of instances. If you only have a few and you kill one this is its default behavior."}],"owner":{"account_id":14801312,"reputation":101,"user_id":16251528,"display_name":"mesfex"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679037856,"creation_date":1679037856,"question_id":75764756,"body_markdown":"If the application does not exit correctly, in my case, I simply kill the process.\r\n\r\nThe client continues to stay in eureka, as if it is active.\r\n\r\ndiscovery-service config\r\n```YML\r\neureka:\r\n  environment: ${SPRING_PROFILES_ACTIVE}\r\n  instance:\r\n    hostname: ${HOST_NAME}\r\n    metadataMap:\r\n      zone: ${ZONE}\r\n    appname: ${INSTANCE_NAME}\r\n    lease-expiration-duration-in-seconds: 90\r\n    prefer-ip-address: false\r\n  client:\r\n    register-with-eureka: true\r\n    fetch-registry: true\r\n    service-url:\r\n      defaultZone: ${SERVICE_DISCOVERY_URL}\r\n  server:\r\n    renewal-threshold-update-interval-ms: 900000\r\n    enable-self-preservation: true\r\n```\r\n\r\nif i set enable-self-preservation: false then removed but i don&#39;t want set this param","title":"When a client in eureka was terminated incorrectly it keeps hanging with UP status","body":"<p>If the application does not exit correctly, in my case, I simply kill the process.</p>\n<p>The client continues to stay in eureka, as if it is active.</p>\n<p>discovery-service config</p>\n<pre><code>eureka:\n  environment: ${SPRING_PROFILES_ACTIVE}\n  instance:\n    hostname: ${HOST_NAME}\n    metadataMap:\n      zone: ${ZONE}\n    appname: ${INSTANCE_NAME}\n    lease-expiration-duration-in-seconds: 90\n    prefer-ip-address: false\n  client:\n    register-with-eureka: true\n    fetch-registry: true\n    service-url:\n      defaultZone: ${SERVICE_DISCOVERY_URL}\n  server:\n    renewal-threshold-update-interval-ms: 900000\n    enable-self-preservation: true\n</code></pre>\n<p>if i set enable-self-preservation: false then removed but i don't want set this param</p>\n"},{"tags":["java","hive","apache-flink","connector"],"owner":{"account_id":28039757,"reputation":1,"user_id":21417506,"display_name":"Psychedelic"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679037660,"creation_date":1679037660,"question_id":75764737,"body_markdown":"I need to read data from Kafka and do lot of complex ETL operations like calling RPC or interacting with Redis and so on, then save the result data into Hive.\r\nIt&#39;s difficult to solve this type of problems with Flink SQL DDL because I have to define a lot of visual tables to contact with outer data, and may be need to write new connectors that Flink not provided.\r\nSo is there an easy way to using java code to do this job like Spark(`sparkSession.sql(&quot;insert overwrite table xxx select ... from temp_view&quot;)`)) with Flink? \r\n\r\nI&#39;ve read document of Flink but found nothing about using code to connect to hive. And there is few answers in both in and out of official site.\r\nI don&#39;t know why they choose SQL, to me, code is much better.","title":"How to write data to hive in Flink using java","body":"<p>I need to read data from Kafka and do lot of complex ETL operations like calling RPC or interacting with Redis and so on, then save the result data into Hive.\nIt's difficult to solve this type of problems with Flink SQL DDL because I have to define a lot of visual tables to contact with outer data, and may be need to write new connectors that Flink not provided.\nSo is there an easy way to using java code to do this job like Spark(<code>sparkSession.sql(&quot;insert overwrite table xxx select ... from temp_view&quot;)</code>)) with Flink?</p>\n<p>I've read document of Flink but found nothing about using code to connect to hive. And there is few answers in both in and out of official site.\nI don't know why they choose SQL, to me, code is much better.</p>\n"},{"tags":["java","intellij-idea","formatting","intellij-14","intellij-15"],"comments":[{"owner":{"account_id":4728704,"reputation":17032,"user_id":3824919,"display_name":"Tom"},"score":5,"creation_date":1457979741,"post_id":35995083,"comment_id":59642885,"body_markdown":"I don&#39;t think it formats this code, it just collapses it. When you look on the left border of the code view, there should be a small &quot;+&quot; sign to expand it, like for the `import` block.","body":"I don&#39;t think it formats this code, it just collapses it. When you look on the left border of the code view, there should be a small &quot;+&quot; sign to expand it, like for the <code>import</code> block."},{"owner":{"account_id":2385304,"reputation":7157,"user_id":2086401,"accept_rate":95,"display_name":"StuPointerException"},"score":3,"creation_date":1457980008,"post_id":35995083,"comment_id":59643051,"body_markdown":"Ah yes, I&#39;ll change the wording of the question to reflect this. Thanks!","body":"Ah yes, I&#39;ll change the wording of the question to reflect this. Thanks!"},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1538867385,"post_id":35995083,"comment_id":92296082,"body_markdown":"See duplicate: [*IntelliJ IDEA one-line function formatting*](https://stackoverflow.com/q/36294708/642706)","body":"See duplicate: <a href=\"https://stackoverflow.com/q/36294708/642706\"><i>IntelliJ IDEA one-line function formatting</i></a>"}],"answers":[{"comments":[{"owner":{"account_id":5186970,"reputation":1199,"user_id":4151075,"accept_rate":68,"display_name":"Marek"},"score":0,"creation_date":1493978058,"post_id":35995368,"comment_id":74643054,"body_markdown":"this will also work if you put an opening brace in new line and want to fold it to `{...}` instead of `latest version` of question","body":"this will also work if you put an opening brace in new line and want to fold it to <code>{...}</code> instead of <code>latest version</code> of question"},{"owner":{"account_id":2970373,"reputation":2660,"user_id":2522546,"accept_rate":36,"display_name":"Traxex1909"},"score":6,"creation_date":1509606333,"post_id":35995368,"comment_id":81086668,"body_markdown":"One thing to note : You&#39;ll have to re-open the file for the changes to take effect.","body":"One thing to note : You&#39;ll have to re-open the file for the changes to take effect."},{"owner":{"account_id":238580,"reputation":978,"user_id":507563,"display_name":"Scott"},"score":8,"creation_date":1595640302,"post_id":35995368,"comment_id":111553595,"body_markdown":"Update: for newer versions of IJ uncheck: \nFile | Settings | Editor | General | Code Folding | Java | One line methods","body":"Update: for newer versions of IJ uncheck:  File | Settings | Editor | General | Code Folding | Java | One line methods"}],"tags":[],"owner":{"account_id":1306942,"reputation":4457,"user_id":1255737,"display_name":"rmlan"},"comment_count":3,"down_vote_count":0,"up_vote_count":157,"is_accepted":true,"score":157,"last_activity_date":1679037303,"creation_date":1457980461,"answer_id":35995368,"question_id":35995083,"body_markdown":"Open &#39;Settings&#39; from the File menu. Under &#39;Editor&#39; -&gt; &#39;General&#39; -&gt; &#39;Code Folding&#39;, you will find a &#39;Collapse by Default&#39; section.\r\n\r\nSimply uncheck &#39;One-line methods&#39; and click OK.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/fgI3P.png","title":"IntelliJ collapsing single line methods","body":"<p>Open 'Settings' from the File menu. Under 'Editor' -&gt; 'General' -&gt; 'Code Folding', you will find a 'Collapse by Default' section.</p>\n<p>Simply uncheck 'One-line methods' and click OK.</p>\n<p><a href=\"https://i.stack.imgur.com/fgI3P.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/fgI3P.png\" alt=\"enter image description here\" /></a></p>\n"},{"comments":[{"owner":{"account_id":238697,"reputation":1454,"user_id":507761,"accept_rate":100,"display_name":"Matthew Read"},"score":0,"creation_date":1550591788,"post_id":52462161,"comment_id":96320522,"body_markdown":"There doesn&#39;t seem to be such a path; the other answer works on Mac.","body":"There doesn&#39;t seem to be such a path; the other answer works on Mac."}],"tags":[],"owner":{"account_id":931302,"reputation":5181,"user_id":961143,"accept_rate":20,"display_name":"Atul Kaushik"},"comment_count":1,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1537665224,"creation_date":1537665224,"answer_id":52462161,"question_id":35995083,"body_markdown":"For mac,\r\nCode &gt; Folding &gt; Expand ALL/To Level","title":"IntelliJ collapsing single line methods","body":"<p>For mac,\nCode > Folding > Expand ALL/To Level</p>\n"},{"tags":[],"owner":{"account_id":10022673,"reputation":764,"user_id":7411845,"accept_rate":89,"display_name":"ToDo"},"comment_count":0,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1560950613,"creation_date":1560950613,"answer_id":56668715,"question_id":35995083,"body_markdown":"On Windows:\r\n\r\n**Settings** -&gt; **Editor** -&gt; **General** -&gt; **Code Folding** -&gt; Uncheck &quot;One-line methods&quot;","title":"IntelliJ collapsing single line methods","body":"<p>On Windows:</p>\n\n<p><strong>Settings</strong> -> <strong>Editor</strong> -> <strong>General</strong> -> <strong>Code Folding</strong> -> Uncheck \"One-line methods\"</p>\n"}],"owner":{"account_id":2385304,"reputation":7157,"user_id":2086401,"accept_rate":95,"display_name":"StuPointerException"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":18805,"favorite_count":0,"down_vote_count":0,"up_vote_count":103,"accepted_answer_id":35995368,"answer_count":3,"score":103,"last_activity_date":1679037303,"creation_date":1457979537,"question_id":35995083,"body_markdown":"Since I&#39;ve updated my version of intelliJ (14.x to 15.x) it has started automatically collapsing single line methods in the `Java` editor:\r\n\r\nPrevious version:\r\n\r\n    public void setContext(SecurityContext context) {\r\n        this.context = context;\r\n    }\r\n\r\nLatest version:\r\n\r\n    public void setContext(SecurityContext context) { this.context = context; }\r\n\r\nIs there a way to prevent this?  I find the original version much easier on the eyes!\r\n\r\nThanks.","title":"IntelliJ collapsing single line methods","body":"<p>Since I've updated my version of intelliJ (14.x to 15.x) it has started automatically collapsing single line methods in the <code>Java</code> editor:</p>\n\n<p>Previous version:</p>\n\n<pre><code>public void setContext(SecurityContext context) {\n    this.context = context;\n}\n</code></pre>\n\n<p>Latest version:</p>\n\n<pre><code>public void setContext(SecurityContext context) { this.context = context; }\n</code></pre>\n\n<p>Is there a way to prevent this?  I find the original version much easier on the eyes!</p>\n\n<p>Thanks.</p>\n"},{"tags":["java","spring","spring-boot"],"owner":{"account_id":28039736,"reputation":1,"user_id":21417489,"display_name":"teleportalfuture"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":92,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679036757,"creation_date":1679036519,"question_id":75764609,"body_markdown":"I tried running my spring application and it failed to startup. I think that there is a problem with the configuration but I&#39;m not sure.\r\n\r\nThis is my pom.xml\r\n\r\n```\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n\txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n\t&lt;groupId&gt;id.co&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;TrnAngularBackEnd&lt;/artifactId&gt;\r\n\t&lt;version&gt;1.0.0&lt;/version&gt;\r\n\t&lt;packaging&gt;war&lt;/packaging&gt;\r\n\r\n\t&lt;name&gt;BackEndMainMain&lt;/name&gt;\r\n\t\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;1.4.3.RELEASE&lt;/version&gt;\r\n\t&lt;/parent&gt;\r\n\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;1.8&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.fasterxml.jackson.dataformat&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jackson-dataformat-xml&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;42.2.5&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jjwt&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;0.9.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.imgscalr&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;imgscalr-lib&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.2&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.11&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t\r\n\t\t&lt;dependency&gt;\r\n\t\t   &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t   &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\r\n\t\t   &lt;scope&gt;compile&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;2.3.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n        \r\n        &lt;dependency&gt;\r\n             &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n             &lt;artifactId&gt;spring-boot-starter-activemq&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        \r\n             &lt;dependency&gt;\r\n             &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n             &lt;artifactId&gt;spring-boot-starter-websocket&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        \r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.webjars&lt;/groupId&gt;\r\n            &lt;artifactId&gt;sockjs-client&lt;/artifactId&gt;\r\n            &lt;version&gt;1.1.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\t\t\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.webjars&lt;/groupId&gt;\r\n            &lt;artifactId&gt;stomp-websocket&lt;/artifactId&gt;\r\n            &lt;version&gt;2.3.3&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-mail&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.github.librepdf&lt;/groupId&gt;\r\n            &lt;artifactId&gt;openpdf&lt;/artifactId&gt;\r\n            &lt;version&gt;1.2.20&lt;/version&gt;\r\n        &lt;/dependency&gt;                \t\t\r\n         &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\r\n            &lt;artifactId&gt;poi&lt;/artifactId&gt;\r\n            &lt;version&gt;5.0.0&lt;/version&gt;\r\n         &lt;/dependency&gt;\r\n         &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\r\n            &lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\r\n            &lt;version&gt;5.0.0&lt;/version&gt;\r\n         &lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t\t&lt;finalName&gt;${project.name}&lt;/finalName&gt;\r\n\t&lt;/build&gt;\r\n&lt;/project&gt;\r\n\r\n```\r\nWhen I tried to run my program I got this:\r\n\r\n```\r\nERROR 10380 --- [           main] o.s.boot.SpringApplication               : Application startup failed\r\n\r\njava.lang.IllegalStateException: Cannot load configuration class: \r\n\r\nCaused by: java.lang.ExceptionInInitializerError: null\r\n\t\r\nCaused by: java.lang.IllegalStateException: Unable to load cache item\r\n\t\r\nCaused by: java.lang.ExceptionInInitializerError: null\r\n\t\r\nCaused by: java.lang.reflect.InaccessibleObjectException: Unable to make protected final java.lang.Class java.lang.ClassLoader.defineClass(java.lang.String,byte[],int,int,java.security.ProtectionDomain) throws java.lang.ClassFormatError accessible: module java.base does not &quot;opens java.lang&quot; to unnamed module @441772e\r\n\t\r\n2023-03-17 13:36:20.579  INFO 10380 --- [           main] ationConfigEmbeddedWebApplicationContext : Closing org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@2f48b3d2: startup date [Fri Mar 17 13:36:19 WIB 2023]; root of context hierarchy\r\n2023-03-17 13:36:20.581  WARN 10380 --- [           main] ationConfigEmbeddedWebApplicationContext : Exception thrown from LifecycleProcessor on context close\r\n\r\njava.lang.IllegalStateException: LifecycleProcessor not initialized - call &#39;refresh&#39; before invoking lifecycle methods via the context: org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@2f48b3d2: startup date [Fri Mar 17 13:36:19 WIB 2023]; root of context hierarchy\r\n\r\n2023-03-17 13:36:20.582 ERROR 10380 --- [           main] o.s.b.f.s.DefaultListableBeanFactory     : Destroy method on bean with name &#39;org.springframework.boot.autoconfigure.internalCachingMetadataReaderFactory&#39; threw an exception\r\n\r\njava.lang.IllegalStateException: ApplicationEventMulticaster not initialized - call &#39;refresh&#39; before multicasting events via the context: org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@2f48b3d2: startup date [Fri Mar 17 13:36:19 WIB 2023]; root of context hierarchy\r\n\t\r\n\r\n\r\n```\r\n\r\n\r\nI tried changing my java version to 1.7 but it didn&#39;t affect anything. I also tried changing my spring version to 2.1.0 but it make my program full of error.","title":"Spring application startup failed","body":"<p>I tried running my spring application and it failed to startup. I think that there is a problem with the configuration but I'm not sure.</p>\n<p>This is my pom.xml</p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;id.co&lt;/groupId&gt;\n    &lt;artifactId&gt;TrnAngularBackEnd&lt;/artifactId&gt;\n    &lt;version&gt;1.0.0&lt;/version&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n\n    &lt;name&gt;BackEndMainMain&lt;/name&gt;\n    \n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;1.4.3.RELEASE&lt;/version&gt;\n    &lt;/parent&gt;\n\n    &lt;properties&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.dataformat&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-dataformat-xml&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n            &lt;version&gt;42.2.5&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\n            &lt;artifactId&gt;jjwt&lt;/artifactId&gt;\n            &lt;version&gt;0.9.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.imgscalr&lt;/groupId&gt;\n            &lt;artifactId&gt;imgscalr-lib&lt;/artifactId&gt;\n            &lt;version&gt;4.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\n            &lt;version&gt;3.11&lt;/version&gt;\n        &lt;/dependency&gt;\n        \n        &lt;dependency&gt;\n           &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n           &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n           &lt;scope&gt;compile&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\n            &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\n            &lt;version&gt;2.3.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        \n        &lt;dependency&gt;\n             &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n             &lt;artifactId&gt;spring-boot-starter-activemq&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        \n             &lt;dependency&gt;\n             &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n             &lt;artifactId&gt;spring-boot-starter-websocket&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        \n        &lt;dependency&gt;\n            &lt;groupId&gt;org.webjars&lt;/groupId&gt;\n            &lt;artifactId&gt;sockjs-client&lt;/artifactId&gt;\n            &lt;version&gt;1.1.2&lt;/version&gt;\n        &lt;/dependency&gt;       \n        &lt;dependency&gt;\n            &lt;groupId&gt;org.webjars&lt;/groupId&gt;\n            &lt;artifactId&gt;stomp-websocket&lt;/artifactId&gt;\n            &lt;version&gt;2.3.3&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-mail&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.github.librepdf&lt;/groupId&gt;\n            &lt;artifactId&gt;openpdf&lt;/artifactId&gt;\n            &lt;version&gt;1.2.20&lt;/version&gt;\n        &lt;/dependency&gt;                       \n         &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n            &lt;artifactId&gt;poi&lt;/artifactId&gt;\n            &lt;version&gt;5.0.0&lt;/version&gt;\n         &lt;/dependency&gt;\n         &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n            &lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\n            &lt;version&gt;5.0.0&lt;/version&gt;\n         &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n        &lt;finalName&gt;${project.name}&lt;/finalName&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n\n</code></pre>\n<p>When I tried to run my program I got this:</p>\n<pre><code>ERROR 10380 --- [           main] o.s.boot.SpringApplication               : Application startup failed\n\njava.lang.IllegalStateException: Cannot load configuration class: \n\nCaused by: java.lang.ExceptionInInitializerError: null\n    \nCaused by: java.lang.IllegalStateException: Unable to load cache item\n    \nCaused by: java.lang.ExceptionInInitializerError: null\n    \nCaused by: java.lang.reflect.InaccessibleObjectException: Unable to make protected final java.lang.Class java.lang.ClassLoader.defineClass(java.lang.String,byte[],int,int,java.security.ProtectionDomain) throws java.lang.ClassFormatError accessible: module java.base does not &quot;opens java.lang&quot; to unnamed module @441772e\n    \n2023-03-17 13:36:20.579  INFO 10380 --- [           main] ationConfigEmbeddedWebApplicationContext : Closing org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@2f48b3d2: startup date [Fri Mar 17 13:36:19 WIB 2023]; root of context hierarchy\n2023-03-17 13:36:20.581  WARN 10380 --- [           main] ationConfigEmbeddedWebApplicationContext : Exception thrown from LifecycleProcessor on context close\n\njava.lang.IllegalStateException: LifecycleProcessor not initialized - call 'refresh' before invoking lifecycle methods via the context: org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@2f48b3d2: startup date [Fri Mar 17 13:36:19 WIB 2023]; root of context hierarchy\n\n2023-03-17 13:36:20.582 ERROR 10380 --- [           main] o.s.b.f.s.DefaultListableBeanFactory     : Destroy method on bean with name 'org.springframework.boot.autoconfigure.internalCachingMetadataReaderFactory' threw an exception\n\njava.lang.IllegalStateException: ApplicationEventMulticaster not initialized - call 'refresh' before multicasting events via the context: org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@2f48b3d2: startup date [Fri Mar 17 13:36:19 WIB 2023]; root of context hierarchy\n    \n\n\n</code></pre>\n<p>I tried changing my java version to 1.7 but it didn't affect anything. I also tried changing my spring version to 2.1.0 but it make my program full of error.</p>\n"},{"tags":["java","soap","apache-axis"],"answers":[{"tags":[],"owner":{"account_id":28034891,"reputation":1,"user_id":21413462,"display_name":"Be&#39;ntDeprecated"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678985153,"creation_date":1678985153,"answer_id":75759202,"question_id":75759049,"body_markdown":"You&#39;re using &quot;wsdl2java.bat&quot; instead of &quot;wsdl2java.sh&quot; and &quot;adb&quot; instead of &quot;xmlbeans&quot;.\r\nTry this using the latest version 1.8.2: &quot;.\\wsdl2java.sh -uri $PATH_TO_XML -p org.apache.axis2.axis2userguide -d xmlbeans -s -u&quot;\r\n\r\n","title":"Axis2 wsdl2java throws InvocationTargetException and NullPointerException","body":"<p>You're using &quot;wsdl2java.bat&quot; instead of &quot;wsdl2java.sh&quot; and &quot;adb&quot; instead of &quot;xmlbeans&quot;.\nTry this using the latest version 1.8.2: &quot;.\\wsdl2java.sh -uri $PATH_TO_XML -p org.apache.axis2.axis2userguide -d xmlbeans -s -u&quot;</p>\n"}],"owner":{"account_id":28034558,"reputation":1,"user_id":21413187,"display_name":"WaterWolf"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":110,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1679036082,"creation_date":1678984315,"question_id":75759049,"body_markdown":"I&#39;m having a problem with generating java src from wsdl(xml file) using axis2(tried this with versions 1.6.1-1.8.2): Using this cmd command \r\n```\r\n.\\wsdl2java.bat -uri %PATH_TO_XML% -p org.apache.axis2.axis2userguide -d adb -s -u\r\n```\r\nI get:\r\n```\r\nUsing AXIS2_HOME:   D:\\Documentos\\Axis\\axis2-1.8.2\r\nUsing JAVA_HOME:    C:\\Program Files\\Java\\jdk1.8.0_271\r\nRetrieving document at &#39;D:\\Documentos\\Axis\\axis2-1.8.2\\bin\\ARIBankService.xml&#39;.\r\nException in thread &quot;main&quot; org.apache.axis2.wsdl.codegen.CodeGenerationException: java.lang.RuntimeException: java.lang.reflect.InvocationTargetException\r\n        at org.apache.axis2.wsdl.codegen.CodeGenerationEngine.generate(CodeGenerationEngine.java:163)\r\n        at org.apache.axis2.wsdl.WSDL2Code.main(WSDL2Code.java:54)\r\n        at org.apache.axis2.wsdl.WSDL2Java.main(WSDL2Java.java:24)\r\nCaused by: java.lang.RuntimeException: java.lang.reflect.InvocationTargetException\r\n        at org.apache.axis2.wsdl.codegen.extension.SimpleDBExtension.engage(SimpleDBExtension.java:53)\r\n        at org.apache.axis2.wsdl.codegen.CodeGenerationEngine.generate(CodeGenerationEngine.java:116)\r\n        ... 2 more\r\nCaused by: java.lang.reflect.InvocationTargetException\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke(Method.java:498)\r\n        at org.apache.axis2.wsdl.codegen.extension.SimpleDBExtension.engage(SimpleDBExtension.java:50)\r\n        ... 3 more\r\nCaused by: org.apache.axis2.schema.SchemaCompilationException: java.lang.NullPointerException\r\n        at org.apache.axis2.schema.SchemaCompiler.compile(SchemaCompiler.java:257)\r\n        at org.apache.axis2.schema.ExtensionUtility.invoke(ExtensionUtility.java:102)\r\n        ... 8 more\r\nCaused by: java.lang.NullPointerException\r\n        at org.apache.axis2.schema.SchemaCompiler.addProcessedItemsToMetaInfoHolder(SchemaCompiler.java:2332)\r\n        at org.apache.axis2.schema.SchemaCompiler.process(SchemaCompiler.java:2152)\r\n        at org.apache.axis2.schema.SchemaCompiler.processParticle(SchemaCompiler.java:2031)\r\n        at org.apache.axis2.schema.SchemaCompiler.processComplexType(SchemaCompiler.java:1158)\r\n        at org.apache.axis2.schema.SchemaCompiler.processNamedComplexSchemaType(SchemaCompiler.java:1088)\r\n        at org.apache.axis2.schema.SchemaCompiler.processSchema(SchemaCompiler.java:998)\r\n        at org.apache.axis2.schema.SchemaCompiler.processElement(SchemaCompiler.java:605)\r\n        at org.apache.axis2.schema.SchemaCompiler.processElement(SchemaCompiler.java:573)\r\n        at org.apache.axis2.schema.SchemaCompiler.compile(SchemaCompiler.java:376)\r\n        at org.apache.axis2.schema.SchemaCompiler.compile(SchemaCompiler.java:268)\r\n        at org.apache.axis2.schema.SchemaCompiler.getParentSchemaFromIncludes(SchemaCompiler.java:2993)\r\n        at org.apache.axis2.schema.SchemaCompiler.getParentSchema(SchemaCompiler.java:2944)\r\n        at org.apache.axis2.schema.SchemaCompiler.processElement(SchemaCompiler.java:819)\r\n        at org.apache.axis2.schema.SchemaCompiler.processElement(SchemaCompiler.java:561)\r\n        at org.apache.axis2.schema.SchemaCompiler.processElements(SchemaCompiler.java:2470)\r\n        at org.apache.axis2.schema.SchemaCompiler.process(SchemaCompiler.java:2146)\r\n        at org.apache.axis2.schema.SchemaCompiler.processParticle(SchemaCompiler.java:2031)\r\n        at org.apache.axis2.schema.SchemaCompiler.processComplexType(SchemaCompiler.java:1158)\r\n        at org.apache.axis2.schema.SchemaCompiler.processNamedComplexSchemaType(SchemaCompiler.java:1088)\r\n        at org.apache.axis2.schema.SchemaCompiler.processComplexContent(SchemaCompiler.java:1290)\r\n        at org.apache.axis2.schema.SchemaCompiler.processContentModel(SchemaCompiler.java:1254)\r\n        at org.apache.axis2.schema.SchemaCompiler.processComplexType(SchemaCompiler.java:1179)\r\n        at org.apache.axis2.schema.SchemaCompiler.processNamedComplexSchemaType(SchemaCompiler.java:1088)\r\n        at org.apache.axis2.schema.SchemaCompiler.processComplexContent(SchemaCompiler.java:1290)\r\n        at org.apache.axis2.schema.SchemaCompiler.processContentModel(SchemaCompiler.java:1254)\r\n        at org.apache.axis2.schema.SchemaCompiler.processComplexType(SchemaCompiler.java:1179)\r\n        at org.apache.axis2.schema.SchemaCompiler.processNamedComplexSchemaType(SchemaCompiler.java:1088)\r\n        at org.apache.axis2.schema.SchemaCompiler.processSchema(SchemaCompiler.java:998)\r\n        at org.apache.axis2.schema.SchemaCompiler.processElement(SchemaCompiler.java:605)\r\n        at org.apache.axis2.schema.SchemaCompiler.processElement(SchemaCompiler.java:573)\r\n        at org.apache.axis2.schema.SchemaCompiler.compile(SchemaCompiler.java:376)\r\n        at org.apache.axis2.schema.SchemaCompiler.compile(SchemaCompiler.java:248)\r\n        ... 9 more\r\n```\r\n\r\nthe wsdl (xml file) I&#39;m using (I let the link &#39;cuz the file has to many characters):\r\nhttps://drive.google.com/file/d/1lLTsACW6jA9KSIaOTdoN0CKXyunLO4RR/view?usp=share_link\r\n\r\n\r\nExpecting for the src to be created correctly to be able to consume the ws and translate it to another ws of REST type\r\n","title":"Axis2 wsdl2java throws InvocationTargetException and NullPointerException","body":"<p>I'm having a problem with generating java src from wsdl(xml file) using axis2(tried this with versions 1.6.1-1.8.2): Using this cmd command</p>\n<pre><code>.\\wsdl2java.bat -uri %PATH_TO_XML% -p org.apache.axis2.axis2userguide -d adb -s -u\n</code></pre>\n<p>I get:</p>\n<pre><code>Using AXIS2_HOME:   D:\\Documentos\\Axis\\axis2-1.8.2\nUsing JAVA_HOME:    C:\\Program Files\\Java\\jdk1.8.0_271\nRetrieving document at 'D:\\Documentos\\Axis\\axis2-1.8.2\\bin\\ARIBankService.xml'.\nException in thread &quot;main&quot; org.apache.axis2.wsdl.codegen.CodeGenerationException: java.lang.RuntimeException: java.lang.reflect.InvocationTargetException\n        at org.apache.axis2.wsdl.codegen.CodeGenerationEngine.generate(CodeGenerationEngine.java:163)\n        at org.apache.axis2.wsdl.WSDL2Code.main(WSDL2Code.java:54)\n        at org.apache.axis2.wsdl.WSDL2Java.main(WSDL2Java.java:24)\nCaused by: java.lang.RuntimeException: java.lang.reflect.InvocationTargetException\n        at org.apache.axis2.wsdl.codegen.extension.SimpleDBExtension.engage(SimpleDBExtension.java:53)\n        at org.apache.axis2.wsdl.codegen.CodeGenerationEngine.generate(CodeGenerationEngine.java:116)\n        ... 2 more\nCaused by: java.lang.reflect.InvocationTargetException\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(Method.java:498)\n        at org.apache.axis2.wsdl.codegen.extension.SimpleDBExtension.engage(SimpleDBExtension.java:50)\n        ... 3 more\nCaused by: org.apache.axis2.schema.SchemaCompilationException: java.lang.NullPointerException\n        at org.apache.axis2.schema.SchemaCompiler.compile(SchemaCompiler.java:257)\n        at org.apache.axis2.schema.ExtensionUtility.invoke(ExtensionUtility.java:102)\n        ... 8 more\nCaused by: java.lang.NullPointerException\n        at org.apache.axis2.schema.SchemaCompiler.addProcessedItemsToMetaInfoHolder(SchemaCompiler.java:2332)\n        at org.apache.axis2.schema.SchemaCompiler.process(SchemaCompiler.java:2152)\n        at org.apache.axis2.schema.SchemaCompiler.processParticle(SchemaCompiler.java:2031)\n        at org.apache.axis2.schema.SchemaCompiler.processComplexType(SchemaCompiler.java:1158)\n        at org.apache.axis2.schema.SchemaCompiler.processNamedComplexSchemaType(SchemaCompiler.java:1088)\n        at org.apache.axis2.schema.SchemaCompiler.processSchema(SchemaCompiler.java:998)\n        at org.apache.axis2.schema.SchemaCompiler.processElement(SchemaCompiler.java:605)\n        at org.apache.axis2.schema.SchemaCompiler.processElement(SchemaCompiler.java:573)\n        at org.apache.axis2.schema.SchemaCompiler.compile(SchemaCompiler.java:376)\n        at org.apache.axis2.schema.SchemaCompiler.compile(SchemaCompiler.java:268)\n        at org.apache.axis2.schema.SchemaCompiler.getParentSchemaFromIncludes(SchemaCompiler.java:2993)\n        at org.apache.axis2.schema.SchemaCompiler.getParentSchema(SchemaCompiler.java:2944)\n        at org.apache.axis2.schema.SchemaCompiler.processElement(SchemaCompiler.java:819)\n        at org.apache.axis2.schema.SchemaCompiler.processElement(SchemaCompiler.java:561)\n        at org.apache.axis2.schema.SchemaCompiler.processElements(SchemaCompiler.java:2470)\n        at org.apache.axis2.schema.SchemaCompiler.process(SchemaCompiler.java:2146)\n        at org.apache.axis2.schema.SchemaCompiler.processParticle(SchemaCompiler.java:2031)\n        at org.apache.axis2.schema.SchemaCompiler.processComplexType(SchemaCompiler.java:1158)\n        at org.apache.axis2.schema.SchemaCompiler.processNamedComplexSchemaType(SchemaCompiler.java:1088)\n        at org.apache.axis2.schema.SchemaCompiler.processComplexContent(SchemaCompiler.java:1290)\n        at org.apache.axis2.schema.SchemaCompiler.processContentModel(SchemaCompiler.java:1254)\n        at org.apache.axis2.schema.SchemaCompiler.processComplexType(SchemaCompiler.java:1179)\n        at org.apache.axis2.schema.SchemaCompiler.processNamedComplexSchemaType(SchemaCompiler.java:1088)\n        at org.apache.axis2.schema.SchemaCompiler.processComplexContent(SchemaCompiler.java:1290)\n        at org.apache.axis2.schema.SchemaCompiler.processContentModel(SchemaCompiler.java:1254)\n        at org.apache.axis2.schema.SchemaCompiler.processComplexType(SchemaCompiler.java:1179)\n        at org.apache.axis2.schema.SchemaCompiler.processNamedComplexSchemaType(SchemaCompiler.java:1088)\n        at org.apache.axis2.schema.SchemaCompiler.processSchema(SchemaCompiler.java:998)\n        at org.apache.axis2.schema.SchemaCompiler.processElement(SchemaCompiler.java:605)\n        at org.apache.axis2.schema.SchemaCompiler.processElement(SchemaCompiler.java:573)\n        at org.apache.axis2.schema.SchemaCompiler.compile(SchemaCompiler.java:376)\n        at org.apache.axis2.schema.SchemaCompiler.compile(SchemaCompiler.java:248)\n        ... 9 more\n</code></pre>\n<p>the wsdl (xml file) I'm using (I let the link 'cuz the file has to many characters):\n<a href=\"https://drive.google.com/file/d/1lLTsACW6jA9KSIaOTdoN0CKXyunLO4RR/view?usp=share_link\" rel=\"nofollow noreferrer\">https://drive.google.com/file/d/1lLTsACW6jA9KSIaOTdoN0CKXyunLO4RR/view?usp=share_link</a></p>\n<p>Expecting for the src to be created correctly to be able to consume the ws and translate it to another ws of REST type</p>\n"},{"tags":["java","azure","text-to-speech"],"comments":[{"owner":{"account_id":6767185,"reputation":17855,"user_id":5211833,"accept_rate":83,"display_name":"Adriaan"},"score":0,"creation_date":1679036807,"post_id":75758163,"comment_id":133652069,"body_markdown":"Welcome to Stack Overflow! Please remember that Stack Overflow is not your favourite Java/Azure forum, but rather a question and answer site for all programming related questions. Thus, always include the tag of the language you are programming in, that way other users familiar with that language can more easily find your question. Take the [tour] and read up on [ask] to get more information on how this site works, then [edit] the question with the relevant tags.","body":"Welcome to Stack Overflow! Please remember that Stack Overflow is not your favourite Java/Azure forum, but rather a question and answer site for all programming related questions. Thus, always include the tag of the language you are programming in, that way other users familiar with that language can more easily find your question. Take the <a href=\"https://stackoverflow.com/tour\">tour</a> and read up on <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> to get more information on how this site works, then <a href=\"https://stackoverflow.com/posts/75758163/edit\">edit</a> the question with the relevant tags."}],"owner":{"account_id":28022995,"reputation":1,"user_id":21403483,"display_name":"Thomas Schiffler"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679035874,"creation_date":1678979743,"question_id":75758163,"body_markdown":"I am a little confused about the Azure STT. When I check the example directly on the azure site, I get the right voice file. However, when I try it by code (java azure latest library), I get a completely different sound; the English words are not pronounced as English. In both I send the same SSML:\r\n\r\n```\r\n&lt;speak xmlns=&quot;http://www.w3.org/2001/10/synthesis&quot; xmlns:mstts=&quot;http://www.w3.org/2001/mstts&quot; xmlns:emo=&quot;http://www.w3.org/2009/10/emotionml&quot; version=&quot;1.0&quot; xml:lang=&quot;en-US&quot;&gt;&lt;voice name=&quot;de-DE-KatjaNeural&quot;&gt;&lt;prosody rate=&quot;0%&quot; pitch=&quot;0%&quot;&gt;Herzlich Willkommen im Thunderbike Roadhouse&lt;/prosody&gt;&lt;/voice&gt;&lt;/speak&gt;\r\n```\r\n\r\nMy code looks like that:\r\n\r\n```\r\nSpeechConfig config = SpeechConfig.fromSubscription(msSubscription, msRegion);\r\nconfig.setSpeechSynthesisVoiceName(&#39;de-DE-KatjaNeural&#39;);\r\nSpeechSynthesizer synthesizer = new SpeechSynthesizer(config, null);\r\nbyte[] result = synthesizer.SpeakSsml(generateSsml(message, caiVoice)).getAudioData()\r\n```\r\n\r\nAfter I change the Voice everything works fine, it seems like that there is an error on the voice de-DE-KatjaNeural?","title":"Azure STT gives different response on Webseite and by API with de-DE-KatjaNeural","body":"<p>I am a little confused about the Azure STT. When I check the example directly on the azure site, I get the right voice file. However, when I try it by code (java azure latest library), I get a completely different sound; the English words are not pronounced as English. In both I send the same SSML:</p>\n<pre><code>&lt;speak xmlns=&quot;http://www.w3.org/2001/10/synthesis&quot; xmlns:mstts=&quot;http://www.w3.org/2001/mstts&quot; xmlns:emo=&quot;http://www.w3.org/2009/10/emotionml&quot; version=&quot;1.0&quot; xml:lang=&quot;en-US&quot;&gt;&lt;voice name=&quot;de-DE-KatjaNeural&quot;&gt;&lt;prosody rate=&quot;0%&quot; pitch=&quot;0%&quot;&gt;Herzlich Willkommen im Thunderbike Roadhouse&lt;/prosody&gt;&lt;/voice&gt;&lt;/speak&gt;\n</code></pre>\n<p>My code looks like that:</p>\n<pre><code>SpeechConfig config = SpeechConfig.fromSubscription(msSubscription, msRegion);\nconfig.setSpeechSynthesisVoiceName('de-DE-KatjaNeural');\nSpeechSynthesizer synthesizer = new SpeechSynthesizer(config, null);\nbyte[] result = synthesizer.SpeakSsml(generateSsml(message, caiVoice)).getAudioData()\n</code></pre>\n<p>After I change the Voice everything works fine, it seems like that there is an error on the voice de-DE-KatjaNeural?</p>\n"},{"tags":["java","apache-kafka","spring-kafka","java-17","snappy"],"comments":[{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1674052470,"post_id":75159741,"comment_id":132632699,"body_markdown":"How do you know Snappy supports Java 17 at all?","body":"How do you know Snappy supports Java 17 at all?"},{"owner":{"account_id":3253096,"reputation":4401,"user_id":2987755,"accept_rate":50,"display_name":"dkb"},"score":1,"creation_date":1674052728,"post_id":75159741,"comment_id":132632801,"body_markdown":"may be this: https://github.com/xerial/snappy-java/pull/346","body":"may be this: <a href=\"https://github.com/xerial/snappy-java/pull/346\" rel=\"nofollow noreferrer\">github.com/xerial/snappy-java/pull/346</a>"}],"answers":[{"tags":[],"owner":{"account_id":9471026,"reputation":4841,"user_id":7041871,"display_name":"Javier Mont&#243;n"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1674742135,"creation_date":1674742135,"answer_id":75247240,"question_id":75159741,"body_markdown":"As explained [here](https://github.com/xerial/snappy-java/issues/322#issuecomment-1280880393), if you are using Alpine, you need to add `gcompat`.\r\n\r\n```\r\napk add --no-cache gcompat\r\n```\r\n\r\n","title":"SpringBoot Kafka + openjdk 17: org.xerial.snappy.SnappyError: [UNSUPPORTED_PLATFORM] pure-java snappy requires access to java.nio.Buffer raw address","body":"<p>As explained <a href=\"https://github.com/xerial/snappy-java/issues/322#issuecomment-1280880393\" rel=\"nofollow noreferrer\">here</a>, if you are using Alpine, you need to add <code>gcompat</code>.</p>\n<pre><code>apk add --no-cache gcompat\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7012206,"reputation":61,"user_id":5374661,"display_name":"Van Kuang"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1679035837,"creation_date":1679035837,"answer_id":75764536,"question_id":75159741,"body_markdown":"Add bellow vm options solve my issue:\r\nAdd bellow vm options solve my issue:\r\n```\r\n--add-opens=java.base/java.nio=ALL-UNNAMED\r\n--add-opens=java.base/sun.nio.ch=ALL-UNNAMED\r\n--add-opens=java.base/sun.nio.cs=ALL-UNNAMED\r\n```","title":"SpringBoot Kafka + openjdk 17: org.xerial.snappy.SnappyError: [UNSUPPORTED_PLATFORM] pure-java snappy requires access to java.nio.Buffer raw address","body":"<p>Add bellow vm options solve my issue:\nAdd bellow vm options solve my issue:</p>\n<pre><code>--add-opens=java.base/java.nio=ALL-UNNAMED\n--add-opens=java.base/sun.nio.ch=ALL-UNNAMED\n--add-opens=java.base/sun.nio.cs=ALL-UNNAMED\n</code></pre>\n"}],"owner":{"account_id":14482834,"reputation":3924,"user_id":10461625,"display_name":"PatPanda"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2705,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75764536,"answer_count":2,"score":1,"last_activity_date":1679035837,"creation_date":1674047394,"question_id":75159741,"body_markdown":"On a very simple Kafka consumer app from tutorial website: https://www.baeldung.com/spring-kafka\r\n\r\nBut once containerized with openJDK 17, this issue is 100% reprodicible:\r\n\r\n```\r\nERROR 1 --- [ntainer#0-0-C-1] o.s.k.l.KafkaMessageListenerContainer    : Consumer exception\r\n\r\njava.lang.IllegalStateException: This error handler cannot process &#39;org.apache.kafka.common.KafkaException&#39;s; no record information is available\r\n        at org.springframework.kafka.listener.DefaultErrorHandler.handleOtherException(DefaultErrorHandler.java:204) ~[spring-kafka-3.0.1.jar!/:3.0.1]\r\n        at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.handleConsumerException(KafkaMessageListenerContainer.java:1955) ~[spring-kafka-3.0.1.jar!/:3.0.1]\r\n        at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1390) ~[spring-kafka-3.0.1.jar!/:3.0.1]\r\n        at java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804) ~[na:na]\r\n        at java.base/java.lang.Thread.run(Thread.java:831) ~[na:na]\r\nCaused by: org.apache.kafka.common.KafkaException: Received exception when fetching the next record from thetopic. If needed, please seek past the record to continue consumption.\r\n        at org.apache.kafka.clients.consumer.internals.Fetcher$CompletedFetch.fetchRecords(Fetcher.java:1673) ~[kafka-clients-3.3.1.jar!/:na]\r\n        at org.apache.kafka.clients.consumer.internals.Fetcher$CompletedFetch.access$1900(Fetcher.java:1494) ~[kafka-clients-3.3.1.jar!/:na]\r\n        at org.apache.kafka.clients.consumer.internals.Fetcher.fetchRecords(Fetcher.java:716) ~[kafka-clients-3.3.1.jar!/:na]\r\n        at org.apache.kafka.clients.consumer.internals.Fetcher.collectFetch(Fetcher.java:682) ~[kafka-clients-3.3.1.jar!/:na]\r\n        at org.apache.kafka.clients.consumer.KafkaConsumer.pollForFetches(KafkaConsumer.java:1318) ~[kafka-clients-3.3.1.jar!/:na]\r\n        at org.apache.kafka.clients.consumer.KafkaConsumer.poll(KafkaConsumer.java:1247) ~[kafka-clients-3.3.1.jar!/:na]\r\n        at org.apache.kafka.clients.consumer.KafkaConsumer.poll(KafkaConsumer.java:1220) ~[kafka-clients-3.3.1.jar!/:na]\r\n        at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollConsumer(KafkaMessageListenerContainer.java:1670) ~[spring-kafka-3.0.1.jar!/:3.0.1]\r\n        at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doPoll(KafkaMessageListenerContainer.java:1645) ~[spring-kafka-3.0.1.jar!/:3.0.1]\r\n        at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1446) ~[spring-kafka-3.0.1.jar!/:3.0.1]\r\n        at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1338) ~[spring-kafka-3.0.1.jar!/:3.0.1]\r\n        ... 2 common frames omitted\r\nCaused by: org.apache.kafka.common.KafkaException: org.xerial.snappy.SnappyError: [UNSUPPORTED_PLATFORM] pure-java snappy requires access to java.nio.Buffer raw address field\r\n        at org.apache.kafka.common.compress.SnappyFactory.wrapForInput(SnappyFactory.java:46) ~[kafka-clients-3.3.1.jar!/:na]\r\n        at org.apache.kafka.common.record.CompressionType$3.wrapForInput(CompressionType.java:94) ~[kafka-clients-3.3.1.jar!/:na]\r\n        at org.apache.kafka.common.record.DefaultRecordBatch.recordInputStream(DefaultRecordBatch.java:276) ~[kafka-clients-3.3.1.jar!/:na]\r\n        at org.apache.kafka.common.record.DefaultRecordBatch.compressedIterator(DefaultRecordBatch.java:280) ~[kafka-clients-3.3.1.jar!/:na]\r\n        at org.apache.kafka.common.record.DefaultRecordBatch.streamingIterator(DefaultRecordBatch.java:364) ~[kafka-clients-3.3.1.jar!/:na]\r\n        at org.apache.kafka.clients.consumer.internals.Fetcher$CompletedFetch.nextFetchedRecord(Fetcher.java:1616) ~[kafka-clients-3.3.1.jar!/:na]\r\n        at org.apache.kafka.clients.consumer.internals.Fetcher$CompletedFetch.fetchRecords(Fetcher.java:1653) ~[kafka-clients-3.3.1.jar!/:na]\r\n        ... 12 common frames omitted\r\nCaused by: org.xerial.snappy.SnappyError: [UNSUPPORTED_PLATFORM] pure-java snappy requires access to java.nio.Buffer raw address field\r\n        at org.xerial.snappy.pure.UnsafeUtil.&lt;clinit&gt;(UnsafeUtil.java:49) ~[snappy-java-1.1.8.4.jar!/:1.1.8.4]\r\n        at org.xerial.snappy.pure.SnappyRawDecompressor.getUnsignedByteSafe(SnappyRawDecompressor.java:323) ~[snappy-java-1.1.8.4.jar!/:1.1.8.4]\r\n        at org.xerial.snappy.pure.SnappyRawDecompressor.readUncompressedLength(SnappyRawDecompressor.java:288) ~[snappy-java-1.1.8.4.jar!/:1.1.8.4]\r\n        at org.xerial.snappy.pure.SnappyRawDecompressor.getUncompressedLength(SnappyRawDecompressor.java:42) ~[snappy-java-1.1.8.4.jar!/:1.1.8.4]\r\n        at org.xerial.snappy.pure.PureJavaSnappy.uncompressedLength(PureJavaSnappy.java:238) ~[snappy-java-1.1.8.4.jar!/:1.1.8.4]\r\n        at org.xerial.snappy.Snappy.uncompressedLength(Snappy.java:638) ~[snappy-java-1.1.8.4.jar!/:1.1.8.4]\r\n        at org.xerial.snappy.SnappyInputStream.readFully(SnappyInputStream.java:145) ~[snappy-java-1.1.8.4.jar!/:1.1.8.4]\r\n        at org.xerial.snappy.SnappyInputStream.readHeader(SnappyInputStream.java:99) ~[snappy-java-1.1.8.4.jar!/:1.1.8.4]\r\n        at org.xerial.snappy.SnappyInputStream.&lt;init&gt;(SnappyInputStream.java:59) ~[snappy-java-1.1.8.4.jar!/:1.1.8.4]\r\n        at org.apache.kafka.common.compress.SnappyFactory.wrapForInput(SnappyFactory.java:44) ~[kafka-clients-3.3.1.jar!/:na]\r\n        ... 18 common frames omitted\r\n\r\n```\r\n\r\nThe thing is, with other JDK base images, or not dockerized environment, this issue is not reproducible.\r\n\r\nI tried pulling this dependency, no luck.\r\n\r\n```\r\n       &lt;dependency&gt;\r\n            &lt;groupId&gt;org.xerial.snappy&lt;/groupId&gt;\r\n            &lt;artifactId&gt;snappy-java&lt;/artifactId&gt;\r\n            &lt;version&gt;1.1.8.4&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n```\r\n\r\n","title":"SpringBoot Kafka + openjdk 17: org.xerial.snappy.SnappyError: [UNSUPPORTED_PLATFORM] pure-java snappy requires access to java.nio.Buffer raw address","body":"<p>On a very simple Kafka consumer app from tutorial website: <a href=\"https://www.baeldung.com/spring-kafka\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-kafka</a></p>\n<p>But once containerized with openJDK 17, this issue is 100% reprodicible:</p>\n<pre><code>ERROR 1 --- [ntainer#0-0-C-1] o.s.k.l.KafkaMessageListenerContainer    : Consumer exception\n\njava.lang.IllegalStateException: This error handler cannot process 'org.apache.kafka.common.KafkaException's; no record information is available\n        at org.springframework.kafka.listener.DefaultErrorHandler.handleOtherException(DefaultErrorHandler.java:204) ~[spring-kafka-3.0.1.jar!/:3.0.1]\n        at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.handleConsumerException(KafkaMessageListenerContainer.java:1955) ~[spring-kafka-3.0.1.jar!/:3.0.1]\n        at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1390) ~[spring-kafka-3.0.1.jar!/:3.0.1]\n        at java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804) ~[na:na]\n        at java.base/java.lang.Thread.run(Thread.java:831) ~[na:na]\nCaused by: org.apache.kafka.common.KafkaException: Received exception when fetching the next record from thetopic. If needed, please seek past the record to continue consumption.\n        at org.apache.kafka.clients.consumer.internals.Fetcher$CompletedFetch.fetchRecords(Fetcher.java:1673) ~[kafka-clients-3.3.1.jar!/:na]\n        at org.apache.kafka.clients.consumer.internals.Fetcher$CompletedFetch.access$1900(Fetcher.java:1494) ~[kafka-clients-3.3.1.jar!/:na]\n        at org.apache.kafka.clients.consumer.internals.Fetcher.fetchRecords(Fetcher.java:716) ~[kafka-clients-3.3.1.jar!/:na]\n        at org.apache.kafka.clients.consumer.internals.Fetcher.collectFetch(Fetcher.java:682) ~[kafka-clients-3.3.1.jar!/:na]\n        at org.apache.kafka.clients.consumer.KafkaConsumer.pollForFetches(KafkaConsumer.java:1318) ~[kafka-clients-3.3.1.jar!/:na]\n        at org.apache.kafka.clients.consumer.KafkaConsumer.poll(KafkaConsumer.java:1247) ~[kafka-clients-3.3.1.jar!/:na]\n        at org.apache.kafka.clients.consumer.KafkaConsumer.poll(KafkaConsumer.java:1220) ~[kafka-clients-3.3.1.jar!/:na]\n        at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollConsumer(KafkaMessageListenerContainer.java:1670) ~[spring-kafka-3.0.1.jar!/:3.0.1]\n        at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doPoll(KafkaMessageListenerContainer.java:1645) ~[spring-kafka-3.0.1.jar!/:3.0.1]\n        at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1446) ~[spring-kafka-3.0.1.jar!/:3.0.1]\n        at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1338) ~[spring-kafka-3.0.1.jar!/:3.0.1]\n        ... 2 common frames omitted\nCaused by: org.apache.kafka.common.KafkaException: org.xerial.snappy.SnappyError: [UNSUPPORTED_PLATFORM] pure-java snappy requires access to java.nio.Buffer raw address field\n        at org.apache.kafka.common.compress.SnappyFactory.wrapForInput(SnappyFactory.java:46) ~[kafka-clients-3.3.1.jar!/:na]\n        at org.apache.kafka.common.record.CompressionType$3.wrapForInput(CompressionType.java:94) ~[kafka-clients-3.3.1.jar!/:na]\n        at org.apache.kafka.common.record.DefaultRecordBatch.recordInputStream(DefaultRecordBatch.java:276) ~[kafka-clients-3.3.1.jar!/:na]\n        at org.apache.kafka.common.record.DefaultRecordBatch.compressedIterator(DefaultRecordBatch.java:280) ~[kafka-clients-3.3.1.jar!/:na]\n        at org.apache.kafka.common.record.DefaultRecordBatch.streamingIterator(DefaultRecordBatch.java:364) ~[kafka-clients-3.3.1.jar!/:na]\n        at org.apache.kafka.clients.consumer.internals.Fetcher$CompletedFetch.nextFetchedRecord(Fetcher.java:1616) ~[kafka-clients-3.3.1.jar!/:na]\n        at org.apache.kafka.clients.consumer.internals.Fetcher$CompletedFetch.fetchRecords(Fetcher.java:1653) ~[kafka-clients-3.3.1.jar!/:na]\n        ... 12 common frames omitted\nCaused by: org.xerial.snappy.SnappyError: [UNSUPPORTED_PLATFORM] pure-java snappy requires access to java.nio.Buffer raw address field\n        at org.xerial.snappy.pure.UnsafeUtil.&lt;clinit&gt;(UnsafeUtil.java:49) ~[snappy-java-1.1.8.4.jar!/:1.1.8.4]\n        at org.xerial.snappy.pure.SnappyRawDecompressor.getUnsignedByteSafe(SnappyRawDecompressor.java:323) ~[snappy-java-1.1.8.4.jar!/:1.1.8.4]\n        at org.xerial.snappy.pure.SnappyRawDecompressor.readUncompressedLength(SnappyRawDecompressor.java:288) ~[snappy-java-1.1.8.4.jar!/:1.1.8.4]\n        at org.xerial.snappy.pure.SnappyRawDecompressor.getUncompressedLength(SnappyRawDecompressor.java:42) ~[snappy-java-1.1.8.4.jar!/:1.1.8.4]\n        at org.xerial.snappy.pure.PureJavaSnappy.uncompressedLength(PureJavaSnappy.java:238) ~[snappy-java-1.1.8.4.jar!/:1.1.8.4]\n        at org.xerial.snappy.Snappy.uncompressedLength(Snappy.java:638) ~[snappy-java-1.1.8.4.jar!/:1.1.8.4]\n        at org.xerial.snappy.SnappyInputStream.readFully(SnappyInputStream.java:145) ~[snappy-java-1.1.8.4.jar!/:1.1.8.4]\n        at org.xerial.snappy.SnappyInputStream.readHeader(SnappyInputStream.java:99) ~[snappy-java-1.1.8.4.jar!/:1.1.8.4]\n        at org.xerial.snappy.SnappyInputStream.&lt;init&gt;(SnappyInputStream.java:59) ~[snappy-java-1.1.8.4.jar!/:1.1.8.4]\n        at org.apache.kafka.common.compress.SnappyFactory.wrapForInput(SnappyFactory.java:44) ~[kafka-clients-3.3.1.jar!/:na]\n        ... 18 common frames omitted\n\n</code></pre>\n<p>The thing is, with other JDK base images, or not dockerized environment, this issue is not reproducible.</p>\n<p>I tried pulling this dependency, no luck.</p>\n<pre><code>       &lt;dependency&gt;\n            &lt;groupId&gt;org.xerial.snappy&lt;/groupId&gt;\n            &lt;artifactId&gt;snappy-java&lt;/artifactId&gt;\n            &lt;version&gt;1.1.8.4&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n"},{"tags":["java","spring-webflux","spock"],"comments":[{"owner":{"account_id":12455565,"reputation":5317,"user_id":9068895,"display_name":"Alex"},"score":0,"creation_date":1677685205,"post_id":75604527,"comment_id":133387275,"body_markdown":"You can use https://wiremock.org or https://www.mock-server.com to create stubs","body":"You can use <a href=\"https://wiremock.org\" rel=\"nofollow noreferrer\">wiremock.org</a> or <a href=\"https://www.mock-server.com\" rel=\"nofollow noreferrer\">mock-server.com</a> to create stubs"},{"owner":{"account_id":22101947,"reputation":397,"user_id":16358266,"display_name":"user16358266"},"score":0,"creation_date":1677866376,"post_id":75604527,"comment_id":133428281,"body_markdown":"https://stackoverflow.com/a/75304240/16358266","body":"<a href=\"https://stackoverflow.com/a/75304240/16358266\">stackoverflow.com/a/75304240/16358266</a>"}],"answers":[{"tags":[],"owner":{"account_id":13661476,"reputation":41,"user_id":9856405,"display_name":"Srikanth Reddy Kallem"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1679035815,"creation_date":1679035815,"answer_id":75764533,"question_id":75604527,"body_markdown":"I was able to resolve this problem by using below code:\r\n\r\n    WebClient webClient\r\n\r\n    WebClient.RequestBodyUriSpec requestBodyUriSpec = \r\n    Mock(WebClient.RequestBodyUriSpec)\r\n    WebClient.ResponseSpec responseSpec = Mock(WebClient.ResponseSpec)\r\n\r\ninside test methods:\r\n\r\n    webClient.get() &gt;&gt; requestBodyUriSpec\r\n    webClient.post() &gt;&gt; requestBodyUriSpec\r\n    requestBodyUriSpec.body(_, _) &gt;&gt; requestBodyUriSpec\r\n    requestBodyUriSpec.uri(_) &gt;&gt; requestBodyUriSpec\r\n    requestBodyUriSpec.headers(_) &gt;&gt; requestBodyUriSpec\r\n    requestBodyUriSpec.retrieve() &gt;&gt; responseSpec\r\n    responseSpec.onStatus(_, _) &gt;&gt; responseSpec\r\n    responseSpec.bodyToMono(_) &gt;&gt;&gt; {response objects to be mocked}","title":"How to mock Spring WebClient call and stub some data while writing integration tests in Spock Frameowork","body":"<p>I was able to resolve this problem by using below code:</p>\n<pre><code>WebClient webClient\n\nWebClient.RequestBodyUriSpec requestBodyUriSpec = \nMock(WebClient.RequestBodyUriSpec)\nWebClient.ResponseSpec responseSpec = Mock(WebClient.ResponseSpec)\n</code></pre>\n<p>inside test methods:</p>\n<pre><code>webClient.get() &gt;&gt; requestBodyUriSpec\nwebClient.post() &gt;&gt; requestBodyUriSpec\nrequestBodyUriSpec.body(_, _) &gt;&gt; requestBodyUriSpec\nrequestBodyUriSpec.uri(_) &gt;&gt; requestBodyUriSpec\nrequestBodyUriSpec.headers(_) &gt;&gt; requestBodyUriSpec\nrequestBodyUriSpec.retrieve() &gt;&gt; responseSpec\nresponseSpec.onStatus(_, _) &gt;&gt; responseSpec\nresponseSpec.bodyToMono(_) &gt;&gt;&gt; {response objects to be mocked}\n</code></pre>\n"}],"owner":{"account_id":13661476,"reputation":41,"user_id":9856405,"display_name":"Srikanth Reddy Kallem"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":375,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75764533,"answer_count":1,"score":0,"last_activity_date":1679035815,"creation_date":1677678197,"question_id":75604527,"body_markdown":"I am writing integration tests in spock framework for spring web flux application and we are using WebClient to make external api call. How can I mock WebClient and stub data to WebClient calls?\r\n\r\n I am using RequestSpecification class to make api calls in integration tests.","title":"How to mock Spring WebClient call and stub some data while writing integration tests in Spock Frameowork","body":"<p>I am writing integration tests in spock framework for spring web flux application and we are using WebClient to make external api call. How can I mock WebClient and stub data to WebClient calls?</p>\n<p>I am using RequestSpecification class to make api calls in integration tests.</p>\n"},{"tags":["python","java","processbuilder"],"comments":[{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1678952233,"post_id":75753140,"comment_id":133633124,"body_markdown":"The problem is how you read input from the Python process in Java, this will block until the end of stream is reached (which only happens when the process ends), so it never reaches the second iteration of the loop. You need to offload this to a separate thread.","body":"The problem is how you read input from the Python process in Java, this will block until the end of stream is reached (which only happens when the process ends), so it never reaches the second iteration of the loop. You need to offload this to a separate thread."},{"owner":{"account_id":27450721,"reputation":1,"user_id":20943016,"display_name":"Parth Gupta"},"score":0,"creation_date":1678952658,"post_id":75753140,"comment_id":133633221,"body_markdown":"can you please give an example through code\ni have also tried the while method to print lines but it still did not work\nyes i am experiencing the problem you described i tried printing some random stuff after the forEach line but it didn&#39;t run and i am in an infinite loop\n\n```\nwhile((line = reader.readLine())!=null || line.equals(&quot;&quot;))\n\t\t\t\t{\n\t\t\t\t\tSystem.out.println(line);\n\t\t\t\t}\n\t\t\t\toutputWriter.close();\n\t\t\t\treader.close();\n```","body":"can you please give an example through code i have also tried the while method to print lines but it still did not work yes i am experiencing the problem you described i tried printing some random stuff after the forEach line but it didn&#39;t run and i am in an infinite loop  ``` while((line = reader.readLine())!=null || line.equals(&quot;&quot;)) \t\t\t\t{ \t\t\t\t\tSystem.out.println(line); \t\t\t\t} \t\t\t\toutputWriter.close(); \t\t\t\treader.close(); ```"},{"owner":{"account_id":9882476,"reputation":4679,"user_id":7318120,"display_name":"D.L"},"score":0,"creation_date":1678960307,"post_id":75753140,"comment_id":133635244,"body_markdown":"the `while True` in python will run forever as it has no exit. is this what you wanted ?","body":"the <code>while True</code> in python will run forever as it has no exit. is this what you wanted ?"},{"owner":{"account_id":27450721,"reputation":1,"user_id":20943016,"display_name":"Parth Gupta"},"score":0,"creation_date":1678967920,"post_id":75753140,"comment_id":133637503,"body_markdown":"yes the aim is to keep the python script running and i will give inputs from java and get output if the python script will end i will have to rerun it means all the imports have to be made again which i am trying to avoid","body":"yes the aim is to keep the python script running and i will give inputs from java and get output if the python script will end i will have to rerun it means all the imports have to be made again which i am trying to avoid"},{"owner":{"account_id":5998820,"reputation":12676,"user_id":4712734,"display_name":"DuncG"},"score":0,"creation_date":1678968139,"post_id":75753140,"comment_id":133637554,"body_markdown":"The line `lines.forEach(System.out::println);` runs until sub-process exits, so it needs to be in different thread.","body":"The line <code>lines.forEach(System.out::println);</code> runs until sub-process exits, so it needs to be in different thread."},{"owner":{"account_id":27450721,"reputation":1,"user_id":20943016,"display_name":"Parth Gupta"},"score":0,"creation_date":1678968763,"post_id":75753140,"comment_id":133637719,"body_markdown":"can you please give example with code thankyou.","body":"can you please give example with code thankyou."}],"answers":[{"tags":[],"owner":{"account_id":27450721,"reputation":1,"user_id":20943016,"display_name":"Parth Gupta"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679035771,"creation_date":1679035602,"answer_id":75764505,"question_id":75753140,"body_markdown":"i finally found the solution here&#39;s the python code\r\n\r\n```\r\nimport sys\r\n\r\nwhile True:\r\n    # read input from standard input\r\n    input_str = input()\r\n\r\n    # process the input\r\n    output_str = &quot;Processed input: &quot; + input_str\r\n\r\n    # write output to standard output\r\n    print(output_str)\r\n    sys.stdout.flush()\r\n```\r\n\r\nin java we have to create 2 classes one for giving input and another class for reading the output we will have to use multi-threading one thread to give input to the script and the other thread to read output from the script.\r\n\r\nhere is the Main class which will give input to the script and will return the final output.\r\n```\r\n\r\n\r\nimport java.io.BufferedWriter;\r\nimport java.util.Map;\r\nimport java.util.Scanner;\r\n\r\npublic class MainClass {\r\n\t\r\n\tpublic static void main(String[] args) {\r\n\t\tProcess process = null;\r\n\t\tString output=&quot;&quot;;\r\n\t\tThreadClass thread = null;\r\n\t\ttry {\r\n\t\t\t\r\n\t\t\tProcessBuilder builder = new ProcessBuilder();\r\n\t\t\tMap env = builder.environment();\r\n\t\t\tenv.put(&quot;PATH&quot;, env.get(&quot;PATH&quot;) + &quot;:/home/parth/miniconda3/bin&quot;);\r\n\t\t\tbuilder.command(&quot;/bin/bash&quot;, &quot;-c&quot;, &quot;python pythontry.py&quot;);\r\n\t\t\tprocess = builder.start();\r\n\t\t\t\r\n\t\t\tScanner cin = new Scanner(System.in);\r\n\t\t\tBufferedWriter outputWriter = process.outputWriter();\r\n\t\t\tthread = new ThreadClass(process);\r\n\t\t\tthread.start();\r\n\t\t\t\r\n\t\t\tfor(int i=0; i&lt;3; i++)\r\n\t\t\t{\r\n\t\t\t\tString input = cin.nextLine();\r\n\t\t\t\toutputWriter.write(input);\r\n\t\t\t\toutputWriter.newLine();\r\n\t\t\t\toutputWriter.flush();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t} catch (Exception e) {\r\n\t\t\t// TODO: handle exception\r\n\t\t\tSystem.out.println(e);\r\n\t\t}\r\n\t\tfinally {\r\n\t\t\tprocess.destroy();\r\n\t\t\toutput = thread.getOutput();\r\n\t\t\tSystem.out.println(output);\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\n```\r\n\r\nAnd here is the second thread class that will read output of the python script\r\n```\r\n\r\nimport java.io.BufferedReader;\r\nimport java.io.BufferedWriter;\r\nimport java.io.IOException;\r\nimport java.util.Map;\r\nimport java.util.Scanner;\r\nimport java.util.function.Consumer;\r\nimport java.util.function.Function;\r\nimport java.util.stream.Stream;\r\n\r\n\r\npublic class ThreadClass extends Thread {\r\n\t\r\n\tProcess process;\r\n\tString output;\r\n\t\r\n\tpublic ThreadClass(Process process) {\r\n\t\t// TODO Auto-generated constructor stub\r\n\t\tthis.process = process;\r\n\t\toutput=&quot;&quot;;\r\n\t}\r\n\t\r\n\tpublic void readOutputFromScript() throws IOException {\r\n\t\ttry{\r\n\t\t\t\r\n\t\t\tBufferedReader reader = process.inputReader();\r\n\t\t\tString line;\r\n\t\t\t\r\n\t\t\twhile(true)\r\n\t\t\t{\r\n\t\t\t\tline = reader.readLine();\r\n\t\t\t\tif(line==null || line.equals(&quot;&quot;))\r\n\t\t\t\t{\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\toutput+=line;\r\n\t\t\t\tSystem.out.println(line);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t} catch (Exception e) {\r\n\t\t\t// TODO: handle exception\r\n\t\t\tSystem.out.println(e);\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t\r\n\tpublic void run()\r\n\t{\r\n\t\ttry {\r\n\t\t\treadOutputFromScript();\r\n\t\t} catch (Exception e) {\r\n\t\t\t// TODO: handle exception\r\n\t\t\tSystem.out.println(e);\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublic String getOutput()\r\n\t{\r\n\t\treturn output;\r\n\t}\r\n}\r\n```\r\n\r\n**My gratitude to all my friends who helped me reach this solution**\r\n","title":"I am trying to run a Python script through Java, but I want to run the import lines in Python only once","body":"<p>i finally found the solution here's the python code</p>\n<pre><code>import sys\n\nwhile True:\n    # read input from standard input\n    input_str = input()\n\n    # process the input\n    output_str = &quot;Processed input: &quot; + input_str\n\n    # write output to standard output\n    print(output_str)\n    sys.stdout.flush()\n</code></pre>\n<p>in java we have to create 2 classes one for giving input and another class for reading the output we will have to use multi-threading one thread to give input to the script and the other thread to read output from the script.</p>\n<p>here is the Main class which will give input to the script and will return the final output.</p>\n<pre><code>\n\nimport java.io.BufferedWriter;\nimport java.util.Map;\nimport java.util.Scanner;\n\npublic class MainClass {\n    \n    public static void main(String[] args) {\n        Process process = null;\n        String output=&quot;&quot;;\n        ThreadClass thread = null;\n        try {\n            \n            ProcessBuilder builder = new ProcessBuilder();\n            Map env = builder.environment();\n            env.put(&quot;PATH&quot;, env.get(&quot;PATH&quot;) + &quot;:/home/parth/miniconda3/bin&quot;);\n            builder.command(&quot;/bin/bash&quot;, &quot;-c&quot;, &quot;python pythontry.py&quot;);\n            process = builder.start();\n            \n            Scanner cin = new Scanner(System.in);\n            BufferedWriter outputWriter = process.outputWriter();\n            thread = new ThreadClass(process);\n            thread.start();\n            \n            for(int i=0; i&lt;3; i++)\n            {\n                String input = cin.nextLine();\n                outputWriter.write(input);\n                outputWriter.newLine();\n                outputWriter.flush();\n            }\n            \n        } catch (Exception e) {\n            // TODO: handle exception\n            System.out.println(e);\n        }\n        finally {\n            process.destroy();\n            output = thread.getOutput();\n            System.out.println(output);\n        }\n    }\n\n}\n\n</code></pre>\n<p>And here is the second thread class that will read output of the python script</p>\n<pre><code>\nimport java.io.BufferedReader;\nimport java.io.BufferedWriter;\nimport java.io.IOException;\nimport java.util.Map;\nimport java.util.Scanner;\nimport java.util.function.Consumer;\nimport java.util.function.Function;\nimport java.util.stream.Stream;\n\n\npublic class ThreadClass extends Thread {\n    \n    Process process;\n    String output;\n    \n    public ThreadClass(Process process) {\n        // TODO Auto-generated constructor stub\n        this.process = process;\n        output=&quot;&quot;;\n    }\n    \n    public void readOutputFromScript() throws IOException {\n        try{\n            \n            BufferedReader reader = process.inputReader();\n            String line;\n            \n            while(true)\n            {\n                line = reader.readLine();\n                if(line==null || line.equals(&quot;&quot;))\n                {\n                    break;\n                }\n                output+=line;\n                System.out.println(line);\n            }\n            \n        } catch (Exception e) {\n            // TODO: handle exception\n            System.out.println(e);\n        }\n        \n    }\n    \n    public void run()\n    {\n        try {\n            readOutputFromScript();\n        } catch (Exception e) {\n            // TODO: handle exception\n            System.out.println(e);\n        }\n    }\n    \n    public String getOutput()\n    {\n        return output;\n    }\n}\n</code></pre>\n<p><strong>My gratitude to all my friends who helped me reach this solution</strong></p>\n"}],"owner":{"account_id":27450721,"reputation":1,"user_id":20943016,"display_name":"Parth Gupta"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":83,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1679035771,"creation_date":1678951272,"question_id":75753140,"body_markdown":"I am trying to run a Python script through Java, but I want to run the import lines in Python only once since I am importing TensorFlow and spaCy in my Python script. Importing them takes time, so I don&#39;t want to run the whole script again and again through Java. Is there any way to do that?\r\n\r\nHere is my Python code. This is just example code since I am working on this problem\r\n\r\n```python\r\nimport sys\r\n\r\nwhile True:\r\n    # read input from standard input\r\n    \r\n    input_str = input()\r\n\r\n    # process the input\r\n    output_str = &quot;Processed input: &quot; + input_str\r\n\r\n    # write output to standard output\r\n    print(output_str)\r\n    sys.stdout.flush()\r\n``` \r\n\r\nand here is my java code\r\n\r\n```java\r\nimport java.io.*;\r\nimport java.util.Map;\r\nimport java.util.Scanner;\r\nimport java.util.stream.Stream;\r\n\r\npublic class RunPythonScriptInteractive {\r\n    public static void main(String[] args) throws Exception {\r\n        // Start the Python process\r\n        try {\r\n            ProcessBuilder builder = new ProcessBuilder();\r\n            Map env = builder.environment();\r\n            env.put(&quot;PATH&quot;, env.get(&quot;PATH&quot;) + &quot;:/home/parth/miniconda3/bin&quot;);\r\n            builder.command(&quot;/bin/bash&quot;, &quot;-c&quot;, &quot;python pythontry.py&quot;);\r\n\r\n            builder.redirectErrorStream(true);\r\n            Process process = builder.start();\r\n            Scanner cin = new Scanner(System.in);\r\n            \r\n            BufferedWriter outputWriter = process.outputWriter();\r\n            BufferedReader reader = process.inputReader();\r\n\r\n            for (int i = 0; i &lt; 3; i++) {\r\n                String input = cin.nextLine();\r\n                \r\n                outputWriter.write(input);\r\n                outputWriter.newLine();\r\n                outputWriter.flush();\r\n\r\n                Stream&lt;String&gt; lines = reader.lines();\r\n\r\n                lines.forEach(System.out::println);\r\n            }\r\n            \r\n            outputWriter.close();\r\n            reader.close();\r\n\r\n            process.destroy();\r\n        } catch (Exception e) {\r\n            // TODO: handle exception\r\n            System.out.println(e);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nI am trying to give input through my Java code three times to my Python script, but it is not working. \r\n\r\nI expect that if I give input three times from my Java code, I get output three times from my Python script like:\r\n\r\n```none\r\nhello\r\nProcessed input: hello\r\n\r\nworld\r\nProcessed input: world\r\n\r\nnice\r\nProcessed input: nice \r\n```","title":"I am trying to run a Python script through Java, but I want to run the import lines in Python only once","body":"<p>I am trying to run a Python script through Java, but I want to run the import lines in Python only once since I am importing TensorFlow and spaCy in my Python script. Importing them takes time, so I don't want to run the whole script again and again through Java. Is there any way to do that?</p>\n<p>Here is my Python code. This is just example code since I am working on this problem</p>\n<pre class=\"lang-py prettyprint-override\"><code>import sys\n\nwhile True:\n    # read input from standard input\n    \n    input_str = input()\n\n    # process the input\n    output_str = &quot;Processed input: &quot; + input_str\n\n    # write output to standard output\n    print(output_str)\n    sys.stdout.flush()\n</code></pre>\n<p>and here is my java code</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.io.*;\nimport java.util.Map;\nimport java.util.Scanner;\nimport java.util.stream.Stream;\n\npublic class RunPythonScriptInteractive {\n    public static void main(String[] args) throws Exception {\n        // Start the Python process\n        try {\n            ProcessBuilder builder = new ProcessBuilder();\n            Map env = builder.environment();\n            env.put(&quot;PATH&quot;, env.get(&quot;PATH&quot;) + &quot;:/home/parth/miniconda3/bin&quot;);\n            builder.command(&quot;/bin/bash&quot;, &quot;-c&quot;, &quot;python pythontry.py&quot;);\n\n            builder.redirectErrorStream(true);\n            Process process = builder.start();\n            Scanner cin = new Scanner(System.in);\n            \n            BufferedWriter outputWriter = process.outputWriter();\n            BufferedReader reader = process.inputReader();\n\n            for (int i = 0; i &lt; 3; i++) {\n                String input = cin.nextLine();\n                \n                outputWriter.write(input);\n                outputWriter.newLine();\n                outputWriter.flush();\n\n                Stream&lt;String&gt; lines = reader.lines();\n\n                lines.forEach(System.out::println);\n            }\n            \n            outputWriter.close();\n            reader.close();\n\n            process.destroy();\n        } catch (Exception e) {\n            // TODO: handle exception\n            System.out.println(e);\n        }\n    }\n}\n</code></pre>\n<p>I am trying to give input through my Java code three times to my Python script, but it is not working.</p>\n<p>I expect that if I give input three times from my Java code, I get output three times from my Python script like:</p>\n<pre class=\"lang-none prettyprint-override\"><code>hello\nProcessed input: hello\n\nworld\nProcessed input: world\n\nnice\nProcessed input: nice \n</code></pre>\n"},{"tags":["java","multithreading","java.util.concurrent","completable-future"],"answers":[{"comments":[{"owner":{"account_id":6186008,"reputation":3119,"user_id":4820101,"accept_rate":24,"display_name":"samshers"},"score":0,"creation_date":1679035030,"post_id":75764406,"comment_id":133651783,"body_markdown":"i did look at the method documentation, but thank for pointing out above point that is documented at class level.","body":"i did look at the method documentation, but thank for pointing out above point that is documented at class level."},{"owner":{"account_id":6186008,"reputation":3119,"user_id":4820101,"accept_rate":24,"display_name":"samshers"},"score":0,"creation_date":1679035353,"post_id":75764406,"comment_id":133651843,"body_markdown":"`or by **any other** caller of a completion method.` &lt;- would you mind to elaborate on this. It seems to point to more than just the caller (main) thread.","body":"<code>or by **any other** caller of a completion method.</code> &lt;- would you mind to elaborate on this. It seems to point to more than just the caller (main) thread."},{"owner":{"account_id":3380632,"reputation":14294,"user_id":2837741,"accept_rate":100,"display_name":"daniu"},"score":0,"creation_date":1679039795,"post_id":75764406,"comment_id":133652745,"body_markdown":"@samshers I understand it to mean &quot;in any thread of the current call stack&quot;, ie if you do `CompletableFuture.supplyAsync().thenApplyAsync().thenApplyAsync().thenApply()`, the last call will be performed in either of the (up to) three threads used by the previous ones, but never a new one. But that&#39;s my interpretation, not an authoritative answer.","body":"@samshers I understand it to mean &quot;in any thread of the current call stack&quot;, ie if you do <code>CompletableFuture.supplyAsync().thenApplyAsync().thenApplyAs&zwnj;&#8203;ync().thenApply()</code>, the last call will be performed in either of the (up to) three threads used by the previous ones, but never a new one. But that&#39;s my interpretation, not an authoritative answer."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":3,"creation_date":1679044284,"post_id":75764406,"comment_id":133653778,"body_markdown":"@samshers [this answer](https://stackoverflow.com/a/46062939/2711488) elaborates on the meaning of “any other caller of a completion method”. The takeaway is that using `thenApply` instead of `thenApplyAsync` implies *the least control* over the executing thread imaginable.","body":"@samshers <a href=\"https://stackoverflow.com/a/46062939/2711488\">this answer</a> elaborates on the meaning of “any other caller of a completion method”. The takeaway is that using <code>thenApply</code> instead of <code>thenApplyAsync</code> implies <i>the least control</i> over the executing thread imaginable."}],"tags":[],"owner":{"account_id":3380632,"reputation":14294,"user_id":2837741,"accept_rate":100,"display_name":"daniu"},"comment_count":4,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1679034699,"creation_date":1679034699,"answer_id":75764406,"question_id":75764325,"body_markdown":"The `CompletableFuture` [documentation](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html) states\r\n\r\n&gt; Actions supplied for dependent completions of non-async methods may be performed by the thread that completes the current CompletableFuture, or by any other caller of a completion method.\r\n\r\nThis covers both behaviors you describe; either, the original thread from the fork join pool is reused (&quot;ForkJoinPool.commonPool-worker-3&quot; in your output) for the following completion stage, or the calling thread is used after the previous stage finishes.\r\n\r\nUsing `thenApplyAsync` would be able to use a different thread from the common pool. ","title":"CompletableFuture thenApply is running in seperate thread not on caller thread?","body":"<p>The <code>CompletableFuture</code> <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html\" rel=\"nofollow noreferrer\">documentation</a> states</p>\n<blockquote>\n<p>Actions supplied for dependent completions of non-async methods may be performed by the thread that completes the current CompletableFuture, or by any other caller of a completion method.</p>\n</blockquote>\n<p>This covers both behaviors you describe; either, the original thread from the fork join pool is reused (&quot;ForkJoinPool.commonPool-worker-3&quot; in your output) for the following completion stage, or the calling thread is used after the previous stage finishes.</p>\n<p>Using <code>thenApplyAsync</code> would be able to use a different thread from the common pool.</p>\n"}],"owner":{"account_id":6186008,"reputation":3119,"user_id":4820101,"accept_rate":24,"display_name":"samshers"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":324,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75764406,"answer_count":1,"score":0,"last_activity_date":1679035699,"creation_date":1679034019,"question_id":75764325,"body_markdown":"When I execute `thenApply` method of a `CompletableFuture`, the execution of this method is happening in the `ForkJoinPool` thread, not on caller (main) thread. **Why is it so?** This result i.e using the fork join pool instead of caller thread is similar to when calling `thenApplyAsync`, so I want to understand the reason behind this behavior of `thenApply`\r\n\r\n            System.out.println(&quot;hello world, CompletableFuturesRightHere&quot;);\r\n            System.out.println(&quot;log1: &quot; + Thread.currentThread().getName());\r\n    \r\n            CompletableFuture&lt;Integer&gt; cf = CompletableFuture.supplyAsync(() -&gt; {\r\n                System.out.println(&quot;log-sA: &quot; + Thread.currentThread().getName());\r\n                return 40;\r\n            }).thenApply( a -&gt;  {\r\n                System.out.println(&quot;log-tA: &quot; + Thread.currentThread().getName());\r\n                return a + 40;\r\n            });\r\n    \r\n            System.out.println(&quot;log3: &quot; + Thread.currentThread().getName());\r\n            System.out.println(&quot;cf result: &quot; + cf.get());\r\n\r\nbelow is output of above code:\r\n\r\n    hello world, CompletableFuturesRightHere\r\n    log1: main\r\n    log-sA: ForkJoinPool.commonPool-worker-3\r\n    log3: main\r\n    log-tA: ForkJoinPool.commonPool-worker-3\r\n    cf result: 80\r\n\r\nWhen I run the [same code][1] in jdoodle, the behavior is as expected.\r\n\r\n\r\n  [1]: https://www.jdoodle.com/iembed/v0/FkU","title":"CompletableFuture thenApply is running in seperate thread not on caller thread?","body":"<p>When I execute <code>thenApply</code> method of a <code>CompletableFuture</code>, the execution of this method is happening in the <code>ForkJoinPool</code> thread, not on caller (main) thread. <strong>Why is it so?</strong> This result i.e using the fork join pool instead of caller thread is similar to when calling <code>thenApplyAsync</code>, so I want to understand the reason behind this behavior of <code>thenApply</code></p>\n<pre><code>        System.out.println(&quot;hello world, CompletableFuturesRightHere&quot;);\n        System.out.println(&quot;log1: &quot; + Thread.currentThread().getName());\n\n        CompletableFuture&lt;Integer&gt; cf = CompletableFuture.supplyAsync(() -&gt; {\n            System.out.println(&quot;log-sA: &quot; + Thread.currentThread().getName());\n            return 40;\n        }).thenApply( a -&gt;  {\n            System.out.println(&quot;log-tA: &quot; + Thread.currentThread().getName());\n            return a + 40;\n        });\n\n        System.out.println(&quot;log3: &quot; + Thread.currentThread().getName());\n        System.out.println(&quot;cf result: &quot; + cf.get());\n</code></pre>\n<p>below is output of above code:</p>\n<pre><code>hello world, CompletableFuturesRightHere\nlog1: main\nlog-sA: ForkJoinPool.commonPool-worker-3\nlog3: main\nlog-tA: ForkJoinPool.commonPool-worker-3\ncf result: 80\n</code></pre>\n<p>When I run the <a href=\"https://www.jdoodle.com/iembed/v0/FkU\" rel=\"nofollow noreferrer\">same code</a> in jdoodle, the behavior is as expected.</p>\n"},{"tags":["java","multithreading","thread-dump"],"comments":[{"owner":{"account_id":33206,"reputation":10107,"user_id":92764,"accept_rate":84,"display_name":"Luciano Fiandesio"},"score":1,"creation_date":1296660710,"post_id":4876274,"comment_id":5422152,"body_markdown":"Which process are you killing? Is it a J2EE app server? If it&#39;s the case you should find the stack trace in the standard out.","body":"Which process are you killing? Is it a J2EE app server? If it&#39;s the case you should find the stack trace in the standard out."},{"owner":{"account_id":233042,"reputation":2822,"user_id":498273,"accept_rate":76,"display_name":"javanerd"},"score":0,"creation_date":1296661004,"post_id":4876274,"comment_id":5422229,"body_markdown":"I am killing a process that runs the java class","body":"I am killing a process that runs the java class"},{"owner":{"account_id":233042,"reputation":2822,"user_id":498273,"accept_rate":76,"display_name":"javanerd"},"score":2,"creation_date":1296668951,"post_id":4876274,"comment_id":5424296,"body_markdown":"Should&#39;nt that write the thread dump on the console. since the java class has console as std out","body":"Should&#39;nt that write the thread dump on the console. since the java class has console as std out"},{"owner":{"account_id":10354485,"reputation":371,"user_id":7636951,"display_name":"De117"},"score":0,"creation_date":1658223227,"post_id":4876274,"comment_id":128992285,"body_markdown":"In my case (a Spring Boot application running on CentOS 7), the thread dump was logged to `/var/log/messages`.","body":"In my case (a Spring Boot application running on CentOS 7), the thread dump was logged to <code>&#47;var&#47;log&#47;messages</code>."}],"answers":[{"tags":[],"owner":{"account_id":131478,"reputation":27678,"user_id":331515,"accept_rate":81,"display_name":"Daniel"},"comment_count":0,"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1296660660,"creation_date":1296660660,"answer_id":4876326,"question_id":4876274,"body_markdown":"In the same location where the JVM&#39;s stdout is placed. If you have a Tomcat server, this will be the `catalina_(date).out` file.","title":"kill -3 to get java thread dump","body":"<p>In the same location where the JVM's stdout is placed. If you have a Tomcat server, this will be the <code>catalina_(date).out</code> file.</p>\n"},{"comments":[{"owner":{"account_id":297814,"reputation":25324,"user_id":603516,"accept_rate":100,"display_name":"Vadzim"},"score":2,"creation_date":1358404290,"post_id":4876394,"comment_id":19988858,"body_markdown":"There is a way to redirect JVM thread dump output to separate file. See in my answer.","body":"There is a way to redirect JVM thread dump output to separate file. See in my answer."}],"tags":[],"owner":{"account_id":294574,"reputation":6264,"user_id":598547,"display_name":"Kris Babic"},"comment_count":1,"down_vote_count":1,"up_vote_count":49,"is_accepted":false,"score":48,"last_activity_date":1573172235,"creation_date":1296660978,"answer_id":4876394,"question_id":4876274,"body_markdown":"The thread dump is written to the system out of the VM on which you executed the `kill -3`.  If you are redirecting the console output of the JVM to a file, the thread dump will be in that file.  If the JVM is running in an open console, then the thread dump will be displayed in its console.","title":"kill -3 to get java thread dump","body":"<p>The thread dump is written to the system out of the VM on which you executed the <code>kill -3</code>.  If you are redirecting the console output of the JVM to a file, the thread dump will be in that file.  If the JVM is running in an open console, then the thread dump will be displayed in its console.</p>\n"},{"comments":[{"owner":{"account_id":233042,"reputation":2822,"user_id":498273,"accept_rate":76,"display_name":"javanerd"},"score":0,"creation_date":1296665251,"post_id":4876519,"comment_id":5423389,"body_markdown":"Thanks for that.Absolutely!! Yes I can use this. jstack PID &gt; outfile will output the thread dump at that particular period of time. Isn&#39;t it?","body":"Thanks for that.Absolutely!! Yes I can use this. jstack PID &gt; outfile will output the thread dump at that particular period of time. Isn&#39;t it?"},{"owner":{"account_id":191,"reputation":24539,"user_id":235,"display_name":"Joshua McKinnon"},"score":1,"creation_date":1296672243,"post_id":4876519,"comment_id":5425025,"body_markdown":"Yes - at the point in time it is run. You can also specify -l (lowercase L) for a long listing that prints additional lock information","body":"Yes - at the point in time it is run. You can also specify -l (lowercase L) for a long listing that prints additional lock information"},{"owner":{"account_id":4855,"reputation":10230,"user_id":7507,"accept_rate":90,"display_name":"noahlz"},"score":2,"creation_date":1383591286,"post_id":4876519,"comment_id":29391644,"body_markdown":"Until the jstack command fails consistently due to &quot;Unable to deduce type of thread from address&quot; ;-(","body":"Until the jstack command fails consistently due to &quot;Unable to deduce type of thread from address&quot; ;-("},{"owner":{"account_id":191,"reputation":24539,"user_id":235,"display_name":"Joshua McKinnon"},"score":1,"creation_date":1383594415,"post_id":4876519,"comment_id":29393253,"body_markdown":"If you&#39;re seeing that error, I suggest taking it up with your vendor. A quick search shows, for example, there is an open bug in RHEL regarding this error and openjdk...","body":"If you&#39;re seeing that error, I suggest taking it up with your vendor. A quick search shows, for example, there is an open bug in RHEL regarding this error and openjdk..."},{"owner":{"account_id":4895435,"reputation":308,"user_id":3945233,"accept_rate":86,"display_name":"jeffkempf"},"score":7,"creation_date":1511796659,"post_id":4876519,"comment_id":81984645,"body_markdown":"It&#39;s worth noting that jstack requires the JDK.  If you&#39;re running apps on a server that only has the JRE installed, you&#39;ll need to find another means for thread dumping.","body":"It&#39;s worth noting that jstack requires the JDK.  If you&#39;re running apps on a server that only has the JRE installed, you&#39;ll need to find another means for thread dumping."},{"owner":{"account_id":297814,"reputation":25324,"user_id":603516,"accept_rate":100,"display_name":"Vadzim"},"score":1,"creation_date":1512992559,"post_id":4876519,"comment_id":82464601,"body_markdown":"Here is how to use jstack to obtain thread dump of a process running under different user, like windows service: https://stackoverflow.com/questions/1197912/cant-debug-java-windows-services-with-jhat-jps-jstack/47723393#47723393","body":"Here is how to use jstack to obtain thread dump of a process running under different user, like windows service: <a href=\"https://stackoverflow.com/questions/1197912/cant-debug-java-windows-services-with-jhat-jps-jstack/47723393#47723393\" title=\"cant debug java windows services with jhat jps jstack\">stackoverflow.com/questions/1197912/&hellip;</a>"},{"owner":{"account_id":238103,"reputation":973,"user_id":506757,"display_name":"JinnKo"},"score":0,"creation_date":1531394935,"post_id":4876519,"comment_id":89585474,"body_markdown":"I found this didn&#39;t result in the dump being sent to the STDOUT of jstack but the STDOUT of the java process instead, possibly because withtout the `-F` flag the request failed, then adding the `-F` may have caused the process to do this.","body":"I found this didn&#39;t result in the dump being sent to the STDOUT of jstack but the STDOUT of the java process instead, possibly because withtout the <code>-F</code> flag the request failed, then adding the <code>-F</code> may have caused the process to do this."}],"tags":[],"owner":{"account_id":191,"reputation":24539,"user_id":235,"display_name":"Joshua McKinnon"},"comment_count":7,"down_vote_count":0,"up_vote_count":218,"is_accepted":true,"score":218,"last_activity_date":1296661504,"creation_date":1296661504,"answer_id":4876519,"question_id":4876274,"body_markdown":"You could alternatively use jstack (Included with JDK) to take a thread dump and write the output wherever you want. Is that not available in a unix environment?\r\n\r\n\r\n    jstack PID &gt; outfile\r\n\r\n","title":"kill -3 to get java thread dump","body":"<p>You could alternatively use jstack (Included with JDK) to take a thread dump and write the output wherever you want. Is that not available in a unix environment?</p>\n\n<pre><code>jstack PID &gt; outfile\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2242608,"reputation":1137,"user_id":1976730,"display_name":"sqweek"},"score":6,"creation_date":1393236773,"post_id":14373346,"comment_id":33315637,"body_markdown":"Technically this doesn&#39;t &quot;redirect&quot; the thread dump output. It turns on JVM logging into jvm.log (which includes thread dump output) but kill -QUIT will still dump to the process&#39;s stdout (aswell).\n\nUpvoted for the description of obscure JVM options :)","body":"Technically this doesn&#39;t &quot;redirect&quot; the thread dump output. It turns on JVM logging into jvm.log (which includes thread dump output) but kill -QUIT will still dump to the process&#39;s stdout (aswell).  Upvoted for the description of obscure JVM options :)"}],"tags":[],"owner":{"account_id":297814,"reputation":25324,"user_id":603516,"accept_rate":100,"display_name":"Vadzim"},"comment_count":1,"down_vote_count":0,"up_vote_count":35,"is_accepted":false,"score":35,"last_activity_date":1358404257,"creation_date":1358404257,"answer_id":14373346,"question_id":4876274,"body_markdown":"There is a way to redirect JVM thread dump output on break signal to separate file with [LogVMOutput diagnostic option][1]:\r\n\r\n    -XX:+UnlockDiagnosticVMOptions -XX:+LogVMOutput -XX:LogFile=jvm.log\r\n\r\n\r\n  [1]: http://stas-blogspot.blogspot.com/2011/07/most-complete-list-of-xx-options-for.html#LogVMOutput","title":"kill -3 to get java thread dump","body":"<p>There is a way to redirect JVM thread dump output on break signal to separate file with <a href=\"http://stas-blogspot.blogspot.com/2011/07/most-complete-list-of-xx-options-for.html#LogVMOutput\" rel=\"noreferrer\">LogVMOutput diagnostic option</a>:</p>\n\n<pre><code>-XX:+UnlockDiagnosticVMOptions -XX:+LogVMOutput -XX:LogFile=jvm.log\n</code></pre>\n"},{"tags":[],"owner":{"account_id":542673,"reputation":7014,"user_id":911576,"accept_rate":62,"display_name":"anish"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1380049540,"creation_date":1380049540,"answer_id":18989946,"question_id":4876274,"body_markdown":"In Jboss you can perform the following \r\n\r\n    nohup $JBOSS_HOME/bin/run.sh -c  yourinstancename $JBOSS_OPTS &gt;&gt; console-$(date +%Y%m%d).out  2&gt;&amp;1 &lt; /dev/null &amp;\r\n    kill -3 &lt;java_pid&gt;\r\n\r\nThis will redirect your output/threadump to the file console specified in the above command.","title":"kill -3 to get java thread dump","body":"<p>In Jboss you can perform the following </p>\n\n<pre><code>nohup $JBOSS_HOME/bin/run.sh -c  yourinstancename $JBOSS_OPTS &gt;&gt; console-$(date +%Y%m%d).out  2&gt;&amp;1 &lt; /dev/null &amp;\nkill -3 &lt;java_pid&gt;\n</code></pre>\n\n<p>This will redirect your output/threadump to the file console specified in the above command.</p>\n"},{"comments":[{"owner":{"account_id":3208439,"reputation":639,"user_id":2708960,"accept_rate":40,"display_name":"Ashley"},"score":0,"creation_date":1525880699,"post_id":22927597,"comment_id":87532481,"body_markdown":"I&#39;m having trouble using Kill -3 &lt;PID&gt;. It works ok but kills the process also after writing thread dump to console. Is it supposed to do that?","body":"I&#39;m having trouble using Kill -3 &lt;PID&gt;. It works ok but kills the process also after writing thread dump to console. Is it supposed to do that?"},{"owner":{"account_id":15623,"reputation":15626,"user_id":33204,"accept_rate":69,"display_name":"slm"},"score":1,"creation_date":1573171974,"post_id":22927597,"comment_id":103804870,"body_markdown":"@Ashley - no `kill -3 &lt;PID&gt;` shouldn&#39;t kill the JVM. What type of Java app are you looking at?","body":"@Ashley - no <code>kill -3 &lt;PID&gt;</code> shouldn&#39;t kill the JVM. What type of Java app are you looking at?"}],"tags":[],"owner":{"account_id":1994469,"reputation":165,"user_id":1787701,"display_name":"Apoorve"},"comment_count":2,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1573172185,"creation_date":1396931470,"answer_id":22927597,"question_id":4876274,"body_markdown":"When using kill -3 one should see the thread dump in the standard output. Most of the application servers write the standard output to a separate file. You should find it there when using kill -3. There are multiple ways of getting thread dumps:\r\n\r\n - `kill -3 &lt;PID&gt;`: Gives output to  standard output.\r\n - If one has access to the console window where server is running, one can use &lt;kbd&gt;Ctrl&lt;/kbd&gt;+&lt;kbd&gt;Break&lt;/kbd&gt; combination of keys to generate the stack trace on STDOUT.\r\n - For hotspot VM&#39;s we can also use `jstack` command to generate a thread dump. It’s a part of the JDK. Syntax is as follows:\r\n\r\n        Usage:\r\n\r\n        jstack [-l] &lt;pid&gt; (to connect to running process)\r\n        jstack -F [-m] [-l] &lt;pid&gt;(to connect to a hung process)\r\n\r\n         - For JRockit JVM we can use JRCMD command which comes with JDK Syntax: \r\n           jrcmd &lt;jrockit pid&gt; [&lt;command&gt; [&lt;arguments&gt;]] [-l] [-f file] [-p] -h]\r\n\r\n","title":"kill -3 to get java thread dump","body":"<p>When using kill -3 one should see the thread dump in the standard output. Most of the application servers write the standard output to a separate file. You should find it there when using kill -3. There are multiple ways of getting thread dumps:</p>\n\n<ul>\n<li><code>kill -3 &lt;PID&gt;</code>: Gives output to  standard output.</li>\n<li>If one has access to the console window where server is running, one can use <kbd>Ctrl</kbd>+<kbd>Break</kbd> combination of keys to generate the stack trace on STDOUT.</li>\n<li><p>For hotspot VM's we can also use <code>jstack</code> command to generate a thread dump. It’s a part of the JDK. Syntax is as follows:</p>\n\n<pre><code>Usage:\n\njstack [-l] &lt;pid&gt; (to connect to running process)\njstack -F [-m] [-l] &lt;pid&gt;(to connect to a hung process)\n\n - For JRockit JVM we can use JRCMD command which comes with JDK Syntax: \n   jrcmd &lt;jrockit pid&gt; [&lt;command&gt; [&lt;arguments&gt;]] [-l] [-f file] [-p] -h]\n</code></pre></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":2176968,"reputation":117,"user_id":1927418,"display_name":"Mehmet Erdemsoy"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1435237764,"creation_date":1435237764,"answer_id":31051330,"question_id":4876274,"body_markdown":"1. Find the process id [PS ID]\r\n2. Execute jcmd [PS ID] Thread.print","title":"kill -3 to get java thread dump","body":"<ol>\n<li>Find the process id [PS ID]</li>\n<li>Execute jcmd [PS ID] Thread.print</li>\n</ol>\n"},{"comments":[{"owner":{"account_id":297814,"reputation":25324,"user_id":603516,"accept_rate":100,"display_name":"Vadzim"},"score":2,"creation_date":1512992473,"post_id":34115813,"comment_id":82464534,"body_markdown":"Unfortunately `jcmd` fails to connect to windows service process with `com.sun.tools.attach.AttachNotSupportedException: Insufficient memory or insufficient privileges to attach` while `jstack -F` succeeds: https://stackoverflow.com/questions/1197912/cant-debug-java-windows-services-with-jhat-jps-jstack/47723393#47723393","body":"Unfortunately <code>jcmd</code> fails to connect to windows service process with <code>com.sun.tools.attach.AttachNotSupportedException: Insufficient memory or insufficient privileges to attach</code> while <code>jstack -F</code> succeeds: <a href=\"https://stackoverflow.com/questions/1197912/cant-debug-java-windows-services-with-jhat-jps-jstack/47723393#47723393\" title=\"cant debug java windows services with jhat jps jstack\">stackoverflow.com/questions/1197912/&hellip;</a>"},{"owner":{"account_id":253785,"reputation":873,"user_id":532717,"accept_rate":80,"display_name":"Twilite"},"score":4,"creation_date":1558434752,"post_id":34115813,"comment_id":99091388,"body_markdown":"You need to run jcmd &lt;pid&gt; Thread.dump under the same user as java process has, otherwise your connections will be dropped. See https://stackoverflow.com/questions/25438983/com-sun-tools-attach-attachnotsupportedexception-unable-to-open-socket-file-ta","body":"You need to run jcmd &lt;pid&gt; Thread.dump under the same user as java process has, otherwise your connections will be dropped. See <a href=\"https://stackoverflow.com/questions/25438983/com-sun-tools-attach-attachnotsupportedexception-unable-to-open-socket-file-ta\" title=\"com sun tools attach attachnotsupportedexception unable to open socket file ta\">stackoverflow.com/questions/25438983/&hellip;</a>"}],"tags":[],"owner":{"account_id":176297,"reputation":4545,"user_id":406896,"accept_rate":64,"display_name":"Arnab Biswas"},"comment_count":2,"down_vote_count":0,"up_vote_count":30,"is_accepted":false,"score":30,"last_activity_date":1449393382,"creation_date":1449393382,"answer_id":34115813,"question_id":4876274,"body_markdown":"With Java 8 in picture, `jcmd` is the preferred approach. \r\n\r\n    jcmd &lt;PID&gt; Thread.print\r\n\r\nFollowing is the snippet from [Oracle documentation][1] : \r\n\r\nThe release of JDK 8 introduced Java Mission Control, Java Flight Recorder, and jcmd utility for diagnosing problems with JVM and Java applications. **It is suggested to use the latest utility, jcmd instead of the previous jstack utility for enhanced diagnostics and reduced performance overhead.**\r\n\r\nHowever, shipping this with the application may be licensing implications which I am not sure.\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/technotes/guides/troubleshoot/tooldescr016.html","title":"kill -3 to get java thread dump","body":"<p>With Java 8 in picture, <code>jcmd</code> is the preferred approach. </p>\n\n<pre><code>jcmd &lt;PID&gt; Thread.print\n</code></pre>\n\n<p>Following is the snippet from <a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/troubleshoot/tooldescr016.html\">Oracle documentation</a> : </p>\n\n<p>The release of JDK 8 introduced Java Mission Control, Java Flight Recorder, and jcmd utility for diagnosing problems with JVM and Java applications. <strong>It is suggested to use the latest utility, jcmd instead of the previous jstack utility for enhanced diagnostics and reduced performance overhead.</strong></p>\n\n<p>However, shipping this with the application may be licensing implications which I am not sure.</p>\n"},{"tags":[],"owner":{"account_id":3000055,"reputation":21,"user_id":2545711,"display_name":"Nick"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1450429230,"creation_date":1450428912,"answer_id":34351768,"question_id":4876274,"body_markdown":"Steps that you should follow if you want the thread dump of your StandAlone Java Process\r\n\r\n**Step 1:** Get the Process ID for the shell script calling the java program\r\n\r\n    linux$ ps -aef | grep &quot;runABCD&quot;\r\n\r\n    user1  **8535**  4369   0   Mar 25 ?           0:00 /bin/csh /home/user1/runABCD.sh\r\n    \r\n    user1 17796 17372   0 08:15:41 pts/49      0:00 grep runABCD\r\n\r\n**Step 2:** Get the Process ID for the Child  which was Invoked by the runABCD. Use the above PID to get the childs.\r\n\r\n    linux$ ps -aef | grep **8535**\r\n    \r\n    user1  **8536**  8535   0   Mar 25 ?         126:38 /apps/java/jdk/sun4/SunOS5/1.6.0_16/bin/java -cp /home/user1/XYZServer\r\n    \r\n    user1  8535  4369   0   Mar 25 ?           0:00 /bin/csh /home/user1/runABCD.sh\r\n    \r\n    user1 17977 17372   0 08:15:49 pts/49      0:00 grep 8535\r\n\r\n**Step 3:** Get the JSTACK for the particular process. Get the Process id of your XYSServer process. i.e. 8536\r\n\r\n    linux$ jstack **8536** &gt; threadDump.log\r\n\r\n\r\n","title":"kill -3 to get java thread dump","body":"<p>Steps that you should follow if you want the thread dump of your StandAlone Java Process</p>\n\n<p><strong>Step 1:</strong> Get the Process ID for the shell script calling the java program</p>\n\n<pre><code>linux$ ps -aef | grep \"runABCD\"\n\nuser1  **8535**  4369   0   Mar 25 ?           0:00 /bin/csh /home/user1/runABCD.sh\n\nuser1 17796 17372   0 08:15:41 pts/49      0:00 grep runABCD\n</code></pre>\n\n<p><strong>Step 2:</strong> Get the Process ID for the Child  which was Invoked by the runABCD. Use the above PID to get the childs.</p>\n\n<pre><code>linux$ ps -aef | grep **8535**\n\nuser1  **8536**  8535   0   Mar 25 ?         126:38 /apps/java/jdk/sun4/SunOS5/1.6.0_16/bin/java -cp /home/user1/XYZServer\n\nuser1  8535  4369   0   Mar 25 ?           0:00 /bin/csh /home/user1/runABCD.sh\n\nuser1 17977 17372   0 08:15:49 pts/49      0:00 grep 8535\n</code></pre>\n\n<p><strong>Step 3:</strong> Get the JSTACK for the particular process. Get the Process id of your XYSServer process. i.e. 8536</p>\n\n<pre><code>linux$ jstack **8536** &gt; threadDump.log\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3584566,"reputation":74,"user_id":2992018,"display_name":"SaintKnight"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679035350,"creation_date":1679035350,"answer_id":75764468,"question_id":4876274,"body_markdown":"For example， if you use tomcat.\r\nThe log possible will stay at \r\n`[tomcat dir]/logs/catalina.out`","title":"kill -3 to get java thread dump","body":"<p>For example， if you use tomcat.\nThe log possible will stay at\n<code>[tomcat dir]/logs/catalina.out</code></p>\n"}],"owner":{"account_id":233042,"reputation":2822,"user_id":498273,"accept_rate":76,"display_name":"javanerd"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":209147,"favorite_count":0,"down_vote_count":1,"up_vote_count":134,"accepted_answer_id":4876519,"answer_count":10,"score":133,"last_activity_date":1679035350,"creation_date":1296660427,"question_id":4876274,"body_markdown":"I am using `kill -3` command to see the JVM&#39;s thread dump in unix. But where can I find the output of this `kill` command? I am lost!!","title":"kill -3 to get java thread dump","body":"<p>I am using <code>kill -3</code> command to see the JVM's thread dump in unix. But where can I find the output of this <code>kill</code> command? I am lost!!</p>\n"},{"tags":["java","oauth-2.0","google-drive-api"],"owner":{"account_id":18856786,"reputation":43,"user_id":13754545,"display_name":"Zoboo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":170,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679035205,"creation_date":1679035205,"question_id":75764452,"body_markdown":"I am trying to upload a file to the google drive, but I am getting some errors regarding Permissions and Scopes. I followed the tutorial, the following 2 classes were copy and pasted from the java quick start, but when I run the code it gives an error which I pasted below. When I go to authenticate, it only mentions permissions for viewing, but I made sure to select all of them in the &quot;OAuth Consent Screen&quot;. I also recently changed the following line to allow this scope:\r\n```\r\nprivate static final List&lt;String&gt; SCOPES =\r\n            Arrays.asList(DriveScopes.DRIVE_FILE);\r\n```\r\nI also reset the StoredCredential file and made sure it was the correct scope in the consent screen. What am I missing here?\r\n\r\nMain class:\r\n```\r\nimport com.google.api.client.auth.oauth2.Credential;\r\nimport com.google.api.client.extensions.java6.auth.oauth2.AuthorizationCodeInstalledApp;\r\nimport com.google.api.client.extensions.jetty.auth.oauth2.LocalServerReceiver;\r\nimport com.google.api.client.googleapis.auth.oauth2.GoogleAuthorizationCodeFlow;\r\nimport com.google.api.client.googleapis.auth.oauth2.GoogleClientSecrets;\r\nimport com.google.api.client.googleapis.javanet.GoogleNetHttpTransport;\r\nimport com.google.api.client.http.HttpTransport;\r\nimport com.google.api.client.json.JsonFactory;\r\nimport com.google.api.client.json.gson.GsonFactory;\r\nimport com.google.api.client.util.store.FileDataStoreFactory;\r\nimport com.google.api.services.drive.DriveScopes;\r\nimport com.google.api.services.driveactivity.v2.model.*;\r\n\r\nimport java.io.FileNotFoundException;\r\nimport java.io.IOException;\r\nimport java.io.InputStream;\r\nimport java.io.InputStreamReader;\r\nimport java.util.AbstractMap;\r\nimport java.util.Arrays;\r\nimport java.util.Iterator;\r\nimport java.util.List;\r\nimport java.util.stream.Collectors;\r\n\r\npublic class DriveActivityQuickstart {\r\n    /**\r\n     * Application name.\r\n     */\r\n    private static final String APPLICATION_NAME = &quot;Drive Activity API Java Quickstart&quot;;\r\n\r\n    /**\r\n     * Directory to store authorization tokens for this application.\r\n     */\r\n    private static final java.io.File DATA_STORE_DIR = new java.io.File(&quot;tokens&quot;);\r\n    /**\r\n     * Global instance of the JSON factory.\r\n     */\r\n    private static final JsonFactory JSON_FACTORY = GsonFactory.getDefaultInstance();\r\n    /**\r\n     * Global instance of the scopes required by this quickstart.\r\n     *\r\n     * &lt;p&gt;If modifying these scopes, delete your previously saved tokens/ folder.\r\n     */\r\n    private static final List&lt;String&gt; SCOPES =\r\n            Arrays.asList(DriveScopes.DRIVE_FILE);\r\n    private static final String CREDENTIALS_FILE_PATH = &quot;/credentials.json&quot;;\r\n    /**\r\n     * Global instance of the {@link FileDataStoreFactory}.\r\n     */\r\n    private static FileDataStoreFactory DATA_STORE_FACTORY;\r\n    /**\r\n     * Global instance of the HTTP transport.\r\n     */\r\n    private static HttpTransport HTTP_TRANSPORT;\r\n\r\n    static {\r\n        try {\r\n            HTTP_TRANSPORT = GoogleNetHttpTransport.newTrustedTransport();\r\n            DATA_STORE_FACTORY = new FileDataStoreFactory(DATA_STORE_DIR);\r\n        } catch (Throwable t) {\r\n            t.printStackTrace();\r\n            System.exit(1);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Creates an authorized Credential object.\r\n     *\r\n     * @return an authorized Credential object.\r\n     * @throws IOException\r\n     */\r\n    public static Credential authorize() throws IOException {\r\n        // Load client secrets.\r\n        InputStream in = DriveActivityQuickstart.class.getResourceAsStream(CREDENTIALS_FILE_PATH);\r\n        if (in == null) {\r\n            throw new FileNotFoundException(&quot;Resource not found: &quot; + CREDENTIALS_FILE_PATH);\r\n        }\r\n        GoogleClientSecrets clientSecrets =\r\n                GoogleClientSecrets.load(JSON_FACTORY, new InputStreamReader(in));\r\n\r\n        // Build flow and trigger user authorization request.\r\n        GoogleAuthorizationCodeFlow flow =\r\n                new GoogleAuthorizationCodeFlow.Builder(\r\n                        HTTP_TRANSPORT, JSON_FACTORY, clientSecrets, SCOPES)\r\n                        .setDataStoreFactory(DATA_STORE_FACTORY)\r\n                        .setAccessType(&quot;offline&quot;)\r\n                        .build();\r\n        Credential credential =\r\n                new AuthorizationCodeInstalledApp(flow, new LocalServerReceiver())\r\n                        .authorize(&quot;user&quot;);\r\n        System.out.println(&quot;Credentials saved to &quot; + DATA_STORE_DIR.getAbsolutePath());\r\n\r\n        return credential;\r\n    }\r\n\r\n    /**\r\n     * Build and return an authorized Drive Activity client service.\r\n     *\r\n     * @return an authorized DriveActivity client service\r\n     * @throws IOException\r\n     */\r\n    public static com.google.api.services.driveactivity.v2.DriveActivity getDriveActivityService()\r\n            throws IOException {\r\n        Credential credential = authorize();\r\n        com.google.api.services.driveactivity.v2.DriveActivity service =\r\n                new com.google.api.services.driveactivity.v2.DriveActivity.Builder(\r\n                        HTTP_TRANSPORT, JSON_FACTORY, credential)\r\n                        .setApplicationName(APPLICATION_NAME)\r\n                        .build();\r\n        return service;\r\n    }\r\n\r\n    public static void main(String[] args) throws IOException {\r\n        // Build a new authorized API client service.\r\n        com.google.api.services.driveactivity.v2.DriveActivity service = getDriveActivityService();\r\n\r\n        // Print the recent activity in your Google Drive.\r\n        QueryDriveActivityResponse result =\r\n                service.activity().query(new QueryDriveActivityRequest().setPageSize(10)).execute();\r\n        List&lt;DriveActivity&gt; activities = result.getActivities();\r\n        if (activities == null || activities.size() == 0) {\r\n            System.out.println(&quot;No activity.&quot;);\r\n        } else {\r\n            System.out.println(&quot;Recent activity:&quot;);\r\n            for (DriveActivity activity : activities) {\r\n                String time = getTimeInfo(activity);\r\n                String action = getActionInfo(activity.getPrimaryActionDetail());\r\n                List&lt;String&gt; actors =\r\n                        activity.getActors().stream()\r\n                                .map(DriveActivityQuickstart::getActorInfo)\r\n                                .collect(Collectors.toList());\r\n                List&lt;String&gt; targets =\r\n                        activity.getTargets().stream()\r\n                                .map(DriveActivityQuickstart::getTargetInfo)\r\n                                .collect(Collectors.toList());\r\n                System.out.printf(\r\n                        &quot;%s: %s, %s, %s\\n&quot;, time, truncated(actors), action, truncated(targets));\r\n            }\r\n        }\r\n\r\n        UploadBasic.uploadBasic();\r\n\r\n    }\r\n\r\n    /**\r\n     * Returns a string representation of the first elements in a list.\r\n     */\r\n    private static String truncated(List&lt;String&gt; array) {\r\n        return truncatedTo(array, 2);\r\n    }\r\n\r\n    /**\r\n     * Returns a string representation of the first elements in a list.\r\n     */\r\n    private static String truncatedTo(List&lt;String&gt; array, int limit) {\r\n        String contents = array.stream().limit(limit).collect(Collectors.joining(&quot;, &quot;));\r\n        String more = array.size() &gt; limit ? &quot;, ...&quot; : &quot;&quot;;\r\n        return &quot;[&quot; + contents + more + &quot;]&quot;;\r\n    }\r\n\r\n    /**\r\n     * Returns the name of a set property in an object, or else &quot;unknown&quot;.\r\n     */\r\n    private static &lt;T&gt; String getOneOf(AbstractMap&lt;String, T&gt; obj) {\r\n        Iterator&lt;String&gt; iterator = obj.keySet().iterator();\r\n        return iterator.hasNext() ? iterator.next() : &quot;unknown&quot;;\r\n    }\r\n\r\n    /**\r\n     * Returns a time associated with an activity.\r\n     */\r\n    private static String getTimeInfo(DriveActivity activity) {\r\n        if (activity.getTimestamp() != null) {\r\n            return activity.getTimestamp();\r\n        }\r\n        if (activity.getTimeRange() != null) {\r\n            return activity.getTimeRange().getEndTime();\r\n        }\r\n        return &quot;unknown&quot;;\r\n    }\r\n\r\n    /**\r\n     * Returns the type of action.\r\n     */\r\n    private static String getActionInfo(ActionDetail actionDetail) {\r\n        return getOneOf(actionDetail);\r\n    }\r\n\r\n    /**\r\n     * Returns user information, or the type of user if not a known user.\r\n     */\r\n    private static String getUserInfo(User user) {\r\n        if (user.getKnownUser() != null) {\r\n            KnownUser knownUser = user.getKnownUser();\r\n            Boolean isMe = knownUser.getIsCurrentUser();\r\n            return (isMe != null &amp;&amp; isMe) ? &quot;people/me&quot; : knownUser.getPersonName();\r\n        }\r\n        return getOneOf(user);\r\n    }\r\n\r\n    /**\r\n     * Returns actor information, or the type of actor if not a user.\r\n     */\r\n    private static String getActorInfo(Actor actor) {\r\n        if (actor.getUser() != null) {\r\n            return getUserInfo(actor.getUser());\r\n        }\r\n        return getOneOf(actor);\r\n    }\r\n\r\n    /**\r\n     * Returns the type of a target and an associated title.\r\n     */\r\n    private static String getTargetInfo(Target target) {\r\n        if (target.getDriveItem() != null) {\r\n            return &quot;driveItem:\\&quot;&quot; + target.getDriveItem().getTitle() + &quot;\\&quot;&quot;;\r\n        }\r\n        if (target.getDrive() != null) {\r\n            return &quot;drive:\\&quot;&quot; + target.getDrive().getTitle() + &quot;\\&quot;&quot;;\r\n        }\r\n        if (target.getFileComment() != null) {\r\n            DriveItem parent = target.getFileComment().getParent();\r\n            if (parent != null) {\r\n                return &quot;fileComment:\\&quot;&quot; + parent.getTitle() + &quot;\\&quot;&quot;;\r\n            }\r\n            return &quot;fileComment:unknown&quot;;\r\n        }\r\n        return getOneOf(target);\r\n    }\r\n}\r\n```\r\nUpload Class:\r\n```\r\nimport com.google.api.client.googleapis.json.GoogleJsonResponseException;\r\nimport com.google.api.client.http.FileContent;\r\nimport com.google.api.client.http.HttpRequestInitializer;\r\nimport com.google.api.client.http.javanet.NetHttpTransport;\r\nimport com.google.api.client.json.gson.GsonFactory;\r\nimport com.google.api.services.drive.Drive;\r\nimport com.google.api.services.drive.DriveScopes;\r\nimport com.google.api.services.drive.model.File;\r\nimport com.google.auth.http.HttpCredentialsAdapter;\r\nimport com.google.auth.oauth2.GoogleCredentials;\r\n\r\nimport java.io.IOException;\r\nimport java.util.Arrays;\r\n\r\n/* Class to demonstrate use of Drive insert file API */\r\npublic class UploadBasic {\r\n\r\n    /**\r\n     * Upload new file.\r\n     *\r\n     * @return Inserted file metadata if successful, {@code null} otherwise.\r\n     * @throws IOException if service account credentials file not found.\r\n     */\r\n    public static String uploadBasic() throws IOException {\r\n        // Load pre-authorized user credentials from the environment.\r\n        // TODO(developer) - See https://developers.google.com/identity for\r\n        // guides on implementing OAuth2 for your application.\r\n        GoogleCredentials credentials = GoogleCredentials.getApplicationDefault()\r\n                .createScoped(Arrays.asList(DriveScopes.DRIVE_FILE));\r\n        HttpRequestInitializer requestInitializer = new HttpCredentialsAdapter(\r\n                credentials);\r\n\r\n        // Build a new authorized API client service.\r\n        Drive service = new Drive.Builder(new NetHttpTransport(),\r\n                GsonFactory.getDefaultInstance(),\r\n                requestInitializer)\r\n                .setApplicationName(&quot;Drive samples&quot;)\r\n                .build();\r\n        // Upload file photo.jpg on drive.\r\n        File fileMetadata = new File();\r\n//        fileMetadata.set(&quot;photo.jpg&quot;, null);\r\n        fileMetadata.setName(&quot;photo.jpg&quot;);\r\n        // File&#39;s content.\r\n        java.io.File filePath = new java.io.File(&quot;files/photo.jpg&quot;);\r\n        // Specify media type and file-path for file.\r\n        FileContent mediaContent = new FileContent(&quot;image/jpeg&quot;, filePath);\r\n        try {\r\n            File file = service.files().create(fileMetadata, mediaContent)\r\n                    .setFields(&quot;id&quot;)\r\n                    .execute();\r\n            System.out.println(&quot;File ID: &quot; + file.getId());\r\n            return file.getId();\r\n        } catch (GoogleJsonResponseException e) {\r\n            // TODO(developer) - handle error appropriately\r\n            System.err.println(&quot;Unable to upload file: &quot; + e.getDetails());\r\n            throw e;\r\n        }\r\n    }\r\n}\r\n```\r\nCode 403 error:\r\n```\r\n&gt; Task :run\r\nPlease open the following address in your browser:\r\n  https://accounts.google.com/o/oauth2/auth?access_type=offline&amp;client_id=252031769447-r2jndtnj7pmiqdielk7kqcg20927m411.apps.googleusercontent.com&amp;redirect_uri=http://localhost:61262/Callback&amp;response_type=code&amp;scope=https://www.goo\r\ngleapis.com/auth/drive.file\r\nAttempting to open that address in the default browser now...\r\nCredentials saved to C:\\java\\Quickstart\\tokens\r\nException in thread &quot;main&quot; com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden\r\nPOST https://driveactivity.googleapis.com/v2/activity:query\r\n{\r\n  &quot;code&quot;: 403,\r\n  &quot;details&quot;: [\r\n    {\r\n      &quot;@type&quot;: &quot;type.googleapis.com/google.rpc.ErrorInfo&quot;,\r\n      &quot;reason&quot;: &quot;ACCESS_TOKEN_SCOPE_INSUFFICIENT&quot;,\r\n      &quot;domain&quot;: &quot;googleapis.com&quot;,\r\n      &quot;metadata&quot;: {\r\n        &quot;service&quot;: &quot;driveactivity.googleapis.com&quot;,\r\n        &quot;method&quot;: &quot;google.apps.drive.activity.v2.DriveActivityService.QueryDriveActivity&quot;\r\n      }\r\n    }\r\n  ],\r\n  &quot;errors&quot;: [\r\n    {\r\n      &quot;domain&quot;: &quot;global&quot;,\r\n      &quot;message&quot;: &quot;Insufficient Permission&quot;,\r\n      &quot;reason&quot;: &quot;insufficientPermissions&quot;\r\n    }\r\n  ],\r\n  &quot;message&quot;: &quot;Request had insufficient authentication scopes.&quot;,\r\n  &quot;status&quot;: &quot;PERMISSION_DENIED&quot;\r\n}\r\n        at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)\r\n        at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)\r\n        at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)\r\n        at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)\r\n        at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)\r\n        at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)\r\n        at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)\r\n        at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)\r\n        at DriveActivityQuickstart.main(DriveActivityQuickstart.java:118)\r\n\r\n&gt; Task :run FAILED\r\n\r\nFAILURE: Build failed with an exception.\r\n\r\n* What went wrong:\r\nExecution failed for task &#39;:run&#39;.\r\n&gt; Process &#39;command &#39;C:\\Program Files\\Java\\jdk-17\\bin\\java.exe&#39;&#39; finished with non-zero exit value 1\r\n\r\n* Try:\r\n&gt; Run with --stacktrace option to get the stack trace.\r\n&gt; Run with --info or --debug option to get more log output.\r\n&gt; Run with --scan to get full insights.\r\n\r\n* Get more help at https://help.gradle.org\r\n\r\nBUILD FAILED in 11s\r\n3 actionable tasks: 3 executed\r\n```","title":"Google Drive API Code 403 error uploading jpg to drive","body":"<p>I am trying to upload a file to the google drive, but I am getting some errors regarding Permissions and Scopes. I followed the tutorial, the following 2 classes were copy and pasted from the java quick start, but when I run the code it gives an error which I pasted below. When I go to authenticate, it only mentions permissions for viewing, but I made sure to select all of them in the &quot;OAuth Consent Screen&quot;. I also recently changed the following line to allow this scope:</p>\n<pre><code>private static final List&lt;String&gt; SCOPES =\n            Arrays.asList(DriveScopes.DRIVE_FILE);\n</code></pre>\n<p>I also reset the StoredCredential file and made sure it was the correct scope in the consent screen. What am I missing here?</p>\n<p>Main class:</p>\n<pre><code>import com.google.api.client.auth.oauth2.Credential;\nimport com.google.api.client.extensions.java6.auth.oauth2.AuthorizationCodeInstalledApp;\nimport com.google.api.client.extensions.jetty.auth.oauth2.LocalServerReceiver;\nimport com.google.api.client.googleapis.auth.oauth2.GoogleAuthorizationCodeFlow;\nimport com.google.api.client.googleapis.auth.oauth2.GoogleClientSecrets;\nimport com.google.api.client.googleapis.javanet.GoogleNetHttpTransport;\nimport com.google.api.client.http.HttpTransport;\nimport com.google.api.client.json.JsonFactory;\nimport com.google.api.client.json.gson.GsonFactory;\nimport com.google.api.client.util.store.FileDataStoreFactory;\nimport com.google.api.services.drive.DriveScopes;\nimport com.google.api.services.driveactivity.v2.model.*;\n\nimport java.io.FileNotFoundException;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.InputStreamReader;\nimport java.util.AbstractMap;\nimport java.util.Arrays;\nimport java.util.Iterator;\nimport java.util.List;\nimport java.util.stream.Collectors;\n\npublic class DriveActivityQuickstart {\n    /**\n     * Application name.\n     */\n    private static final String APPLICATION_NAME = &quot;Drive Activity API Java Quickstart&quot;;\n\n    /**\n     * Directory to store authorization tokens for this application.\n     */\n    private static final java.io.File DATA_STORE_DIR = new java.io.File(&quot;tokens&quot;);\n    /**\n     * Global instance of the JSON factory.\n     */\n    private static final JsonFactory JSON_FACTORY = GsonFactory.getDefaultInstance();\n    /**\n     * Global instance of the scopes required by this quickstart.\n     *\n     * &lt;p&gt;If modifying these scopes, delete your previously saved tokens/ folder.\n     */\n    private static final List&lt;String&gt; SCOPES =\n            Arrays.asList(DriveScopes.DRIVE_FILE);\n    private static final String CREDENTIALS_FILE_PATH = &quot;/credentials.json&quot;;\n    /**\n     * Global instance of the {@link FileDataStoreFactory}.\n     */\n    private static FileDataStoreFactory DATA_STORE_FACTORY;\n    /**\n     * Global instance of the HTTP transport.\n     */\n    private static HttpTransport HTTP_TRANSPORT;\n\n    static {\n        try {\n            HTTP_TRANSPORT = GoogleNetHttpTransport.newTrustedTransport();\n            DATA_STORE_FACTORY = new FileDataStoreFactory(DATA_STORE_DIR);\n        } catch (Throwable t) {\n            t.printStackTrace();\n            System.exit(1);\n        }\n    }\n\n    /**\n     * Creates an authorized Credential object.\n     *\n     * @return an authorized Credential object.\n     * @throws IOException\n     */\n    public static Credential authorize() throws IOException {\n        // Load client secrets.\n        InputStream in = DriveActivityQuickstart.class.getResourceAsStream(CREDENTIALS_FILE_PATH);\n        if (in == null) {\n            throw new FileNotFoundException(&quot;Resource not found: &quot; + CREDENTIALS_FILE_PATH);\n        }\n        GoogleClientSecrets clientSecrets =\n                GoogleClientSecrets.load(JSON_FACTORY, new InputStreamReader(in));\n\n        // Build flow and trigger user authorization request.\n        GoogleAuthorizationCodeFlow flow =\n                new GoogleAuthorizationCodeFlow.Builder(\n                        HTTP_TRANSPORT, JSON_FACTORY, clientSecrets, SCOPES)\n                        .setDataStoreFactory(DATA_STORE_FACTORY)\n                        .setAccessType(&quot;offline&quot;)\n                        .build();\n        Credential credential =\n                new AuthorizationCodeInstalledApp(flow, new LocalServerReceiver())\n                        .authorize(&quot;user&quot;);\n        System.out.println(&quot;Credentials saved to &quot; + DATA_STORE_DIR.getAbsolutePath());\n\n        return credential;\n    }\n\n    /**\n     * Build and return an authorized Drive Activity client service.\n     *\n     * @return an authorized DriveActivity client service\n     * @throws IOException\n     */\n    public static com.google.api.services.driveactivity.v2.DriveActivity getDriveActivityService()\n            throws IOException {\n        Credential credential = authorize();\n        com.google.api.services.driveactivity.v2.DriveActivity service =\n                new com.google.api.services.driveactivity.v2.DriveActivity.Builder(\n                        HTTP_TRANSPORT, JSON_FACTORY, credential)\n                        .setApplicationName(APPLICATION_NAME)\n                        .build();\n        return service;\n    }\n\n    public static void main(String[] args) throws IOException {\n        // Build a new authorized API client service.\n        com.google.api.services.driveactivity.v2.DriveActivity service = getDriveActivityService();\n\n        // Print the recent activity in your Google Drive.\n        QueryDriveActivityResponse result =\n                service.activity().query(new QueryDriveActivityRequest().setPageSize(10)).execute();\n        List&lt;DriveActivity&gt; activities = result.getActivities();\n        if (activities == null || activities.size() == 0) {\n            System.out.println(&quot;No activity.&quot;);\n        } else {\n            System.out.println(&quot;Recent activity:&quot;);\n            for (DriveActivity activity : activities) {\n                String time = getTimeInfo(activity);\n                String action = getActionInfo(activity.getPrimaryActionDetail());\n                List&lt;String&gt; actors =\n                        activity.getActors().stream()\n                                .map(DriveActivityQuickstart::getActorInfo)\n                                .collect(Collectors.toList());\n                List&lt;String&gt; targets =\n                        activity.getTargets().stream()\n                                .map(DriveActivityQuickstart::getTargetInfo)\n                                .collect(Collectors.toList());\n                System.out.printf(\n                        &quot;%s: %s, %s, %s\\n&quot;, time, truncated(actors), action, truncated(targets));\n            }\n        }\n\n        UploadBasic.uploadBasic();\n\n    }\n\n    /**\n     * Returns a string representation of the first elements in a list.\n     */\n    private static String truncated(List&lt;String&gt; array) {\n        return truncatedTo(array, 2);\n    }\n\n    /**\n     * Returns a string representation of the first elements in a list.\n     */\n    private static String truncatedTo(List&lt;String&gt; array, int limit) {\n        String contents = array.stream().limit(limit).collect(Collectors.joining(&quot;, &quot;));\n        String more = array.size() &gt; limit ? &quot;, ...&quot; : &quot;&quot;;\n        return &quot;[&quot; + contents + more + &quot;]&quot;;\n    }\n\n    /**\n     * Returns the name of a set property in an object, or else &quot;unknown&quot;.\n     */\n    private static &lt;T&gt; String getOneOf(AbstractMap&lt;String, T&gt; obj) {\n        Iterator&lt;String&gt; iterator = obj.keySet().iterator();\n        return iterator.hasNext() ? iterator.next() : &quot;unknown&quot;;\n    }\n\n    /**\n     * Returns a time associated with an activity.\n     */\n    private static String getTimeInfo(DriveActivity activity) {\n        if (activity.getTimestamp() != null) {\n            return activity.getTimestamp();\n        }\n        if (activity.getTimeRange() != null) {\n            return activity.getTimeRange().getEndTime();\n        }\n        return &quot;unknown&quot;;\n    }\n\n    /**\n     * Returns the type of action.\n     */\n    private static String getActionInfo(ActionDetail actionDetail) {\n        return getOneOf(actionDetail);\n    }\n\n    /**\n     * Returns user information, or the type of user if not a known user.\n     */\n    private static String getUserInfo(User user) {\n        if (user.getKnownUser() != null) {\n            KnownUser knownUser = user.getKnownUser();\n            Boolean isMe = knownUser.getIsCurrentUser();\n            return (isMe != null &amp;&amp; isMe) ? &quot;people/me&quot; : knownUser.getPersonName();\n        }\n        return getOneOf(user);\n    }\n\n    /**\n     * Returns actor information, or the type of actor if not a user.\n     */\n    private static String getActorInfo(Actor actor) {\n        if (actor.getUser() != null) {\n            return getUserInfo(actor.getUser());\n        }\n        return getOneOf(actor);\n    }\n\n    /**\n     * Returns the type of a target and an associated title.\n     */\n    private static String getTargetInfo(Target target) {\n        if (target.getDriveItem() != null) {\n            return &quot;driveItem:\\&quot;&quot; + target.getDriveItem().getTitle() + &quot;\\&quot;&quot;;\n        }\n        if (target.getDrive() != null) {\n            return &quot;drive:\\&quot;&quot; + target.getDrive().getTitle() + &quot;\\&quot;&quot;;\n        }\n        if (target.getFileComment() != null) {\n            DriveItem parent = target.getFileComment().getParent();\n            if (parent != null) {\n                return &quot;fileComment:\\&quot;&quot; + parent.getTitle() + &quot;\\&quot;&quot;;\n            }\n            return &quot;fileComment:unknown&quot;;\n        }\n        return getOneOf(target);\n    }\n}\n</code></pre>\n<p>Upload Class:</p>\n<pre><code>import com.google.api.client.googleapis.json.GoogleJsonResponseException;\nimport com.google.api.client.http.FileContent;\nimport com.google.api.client.http.HttpRequestInitializer;\nimport com.google.api.client.http.javanet.NetHttpTransport;\nimport com.google.api.client.json.gson.GsonFactory;\nimport com.google.api.services.drive.Drive;\nimport com.google.api.services.drive.DriveScopes;\nimport com.google.api.services.drive.model.File;\nimport com.google.auth.http.HttpCredentialsAdapter;\nimport com.google.auth.oauth2.GoogleCredentials;\n\nimport java.io.IOException;\nimport java.util.Arrays;\n\n/* Class to demonstrate use of Drive insert file API */\npublic class UploadBasic {\n\n    /**\n     * Upload new file.\n     *\n     * @return Inserted file metadata if successful, {@code null} otherwise.\n     * @throws IOException if service account credentials file not found.\n     */\n    public static String uploadBasic() throws IOException {\n        // Load pre-authorized user credentials from the environment.\n        // TODO(developer) - See https://developers.google.com/identity for\n        // guides on implementing OAuth2 for your application.\n        GoogleCredentials credentials = GoogleCredentials.getApplicationDefault()\n                .createScoped(Arrays.asList(DriveScopes.DRIVE_FILE));\n        HttpRequestInitializer requestInitializer = new HttpCredentialsAdapter(\n                credentials);\n\n        // Build a new authorized API client service.\n        Drive service = new Drive.Builder(new NetHttpTransport(),\n                GsonFactory.getDefaultInstance(),\n                requestInitializer)\n                .setApplicationName(&quot;Drive samples&quot;)\n                .build();\n        // Upload file photo.jpg on drive.\n        File fileMetadata = new File();\n//        fileMetadata.set(&quot;photo.jpg&quot;, null);\n        fileMetadata.setName(&quot;photo.jpg&quot;);\n        // File's content.\n        java.io.File filePath = new java.io.File(&quot;files/photo.jpg&quot;);\n        // Specify media type and file-path for file.\n        FileContent mediaContent = new FileContent(&quot;image/jpeg&quot;, filePath);\n        try {\n            File file = service.files().create(fileMetadata, mediaContent)\n                    .setFields(&quot;id&quot;)\n                    .execute();\n            System.out.println(&quot;File ID: &quot; + file.getId());\n            return file.getId();\n        } catch (GoogleJsonResponseException e) {\n            // TODO(developer) - handle error appropriately\n            System.err.println(&quot;Unable to upload file: &quot; + e.getDetails());\n            throw e;\n        }\n    }\n}\n</code></pre>\n<p>Code 403 error:</p>\n<pre><code>&gt; Task :run\nPlease open the following address in your browser:\n  https://accounts.google.com/o/oauth2/auth?access_type=offline&amp;client_id=252031769447-r2jndtnj7pmiqdielk7kqcg20927m411.apps.googleusercontent.com&amp;redirect_uri=http://localhost:61262/Callback&amp;response_type=code&amp;scope=https://www.goo\ngleapis.com/auth/drive.file\nAttempting to open that address in the default browser now...\nCredentials saved to C:\\java\\Quickstart\\tokens\nException in thread &quot;main&quot; com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden\nPOST https://driveactivity.googleapis.com/v2/activity:query\n{\n  &quot;code&quot;: 403,\n  &quot;details&quot;: [\n    {\n      &quot;@type&quot;: &quot;type.googleapis.com/google.rpc.ErrorInfo&quot;,\n      &quot;reason&quot;: &quot;ACCESS_TOKEN_SCOPE_INSUFFICIENT&quot;,\n      &quot;domain&quot;: &quot;googleapis.com&quot;,\n      &quot;metadata&quot;: {\n        &quot;service&quot;: &quot;driveactivity.googleapis.com&quot;,\n        &quot;method&quot;: &quot;google.apps.drive.activity.v2.DriveActivityService.QueryDriveActivity&quot;\n      }\n    }\n  ],\n  &quot;errors&quot;: [\n    {\n      &quot;domain&quot;: &quot;global&quot;,\n      &quot;message&quot;: &quot;Insufficient Permission&quot;,\n      &quot;reason&quot;: &quot;insufficientPermissions&quot;\n    }\n  ],\n  &quot;message&quot;: &quot;Request had insufficient authentication scopes.&quot;,\n  &quot;status&quot;: &quot;PERMISSION_DENIED&quot;\n}\n        at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)\n        at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)\n        at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)\n        at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)\n        at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)\n        at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)\n        at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)\n        at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)\n        at DriveActivityQuickstart.main(DriveActivityQuickstart.java:118)\n\n&gt; Task :run FAILED\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nExecution failed for task ':run'.\n&gt; Process 'command 'C:\\Program Files\\Java\\jdk-17\\bin\\java.exe'' finished with non-zero exit value 1\n\n* Try:\n&gt; Run with --stacktrace option to get the stack trace.\n&gt; Run with --info or --debug option to get more log output.\n&gt; Run with --scan to get full insights.\n\n* Get more help at https://help.gradle.org\n\nBUILD FAILED in 11s\n3 actionable tasks: 3 executed\n</code></pre>\n"},{"tags":["java","garbage-collection","java-17","zgc"],"comments":[{"owner":{"account_id":1939636,"reputation":28467,"user_id":1746118,"accept_rate":95,"display_name":"Naman"},"score":0,"creation_date":1678635592,"post_id":75713808,"comment_id":133567792,"body_markdown":"Could you try any `G1GC` with JDK-17 and confirm your observation? Asking, because this seems to be a one-off case observed with one of our enterprise applications during migration.","body":"Could you try any <code>G1GC</code> with JDK-17 and confirm your observation? Asking, because this seems to be a one-off case observed with one of our enterprise applications during migration."},{"owner":{"account_id":1443334,"reputation":41522,"user_id":1362755,"display_name":"the8472"},"score":0,"creation_date":1678640033,"post_id":75713808,"comment_id":133568567,"body_markdown":"You could also try setting enabling large pages or disabling uncommit, that might result in more coarse-grained memory mappings, but no guarantees, I haven&#39;t tried it.","body":"You could also try setting enabling large pages or disabling uncommit, that might result in more coarse-grained memory mappings, but no guarantees, I haven&#39;t tried it."},{"owner":{"account_id":24731384,"reputation":103,"user_id":18619318,"display_name":"user18619318"},"score":0,"creation_date":1678970552,"post_id":75713808,"comment_id":133638299,"body_markdown":"Why do you explicitly tell the JVM which garbage collector to use?","body":"Why do you explicitly tell the JVM which garbage collector to use?"},{"owner":{"account_id":1918987,"reputation":2839,"user_id":1730917,"accept_rate":71,"display_name":"Arya"},"score":0,"creation_date":1678979769,"post_id":75713808,"comment_id":133641403,"body_markdown":"@user18619318 Because the default GC of java 17 is `G1GC`, But we want to use `ZGC`.","body":"@user18619318 Because the default GC of java 17 is <code>G1GC</code>, But we want to use <code>ZGC</code>."},{"owner":{"account_id":24731384,"reputation":103,"user_id":18619318,"display_name":"user18619318"},"score":0,"creation_date":1679301492,"post_id":75713808,"comment_id":133690216,"body_markdown":"In that case I would strongly suggest _first_ getting it to work with the default configuration, so no &quot;-X&quot; flags what so ever, and _then_ come back to switching the garbage collector if actually needed.","body":"In that case I would strongly suggest <i>first</i> getting it to work with the default configuration, so no &quot;-X&quot; flags what so ever, and <i>then</i> come back to switching the garbage collector if actually needed."},{"owner":{"account_id":24731384,"reputation":103,"user_id":18619318,"display_name":"user18619318"},"score":0,"creation_date":1679305753,"post_id":75713808,"comment_id":133691378,"body_markdown":"Also you should fix what the error message tells you to fix to avoid the situation that the error message tells you might happen.","body":"Also you should fix what the error message tells you to fix to avoid the situation that the error message tells you might happen."}],"answers":[{"comments":[{"owner":{"account_id":1918987,"reputation":2839,"user_id":1730917,"accept_rate":71,"display_name":"Arya"},"score":0,"creation_date":1678730677,"post_id":75714764,"comment_id":133586928,"body_markdown":"Although ZGC is good choice for large heap size, isn&#39;t it strange that this is not mentioned in the official documentation?","body":"Although ZGC is good choice for large heap size, isn&#39;t it strange that this is not mentioned in the official documentation?"}],"tags":[],"owner":{"account_id":1443334,"reputation":41522,"user_id":1362755,"display_name":"the8472"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1678639945,"creation_date":1678639945,"answer_id":75714764,"question_id":75713808,"body_markdown":"&gt; but my question is what exactly has been changed in java or GC which causes these warnings and eventually these errors?\r\n\r\nIt&#39;s simply an implementation detail of the ZGC garbage collector. It needs more fine-grained control over its memory mappings which means a larger total amount of mappings.\r\n\r\nThe older collectors usually reserved huge contiguous spaces of address space and only rarely punched some holes into those ranges to release memory back to the OS. ZGC works with non-contiguous ranges of varying size which means it has to request more individual mappings from the OS.","title":"GC warning about &quot;memory mappings per process&quot; and JVM crash after migrating to java 17","body":"<blockquote>\n<p>but my question is what exactly has been changed in java or GC which causes these warnings and eventually these errors?</p>\n</blockquote>\n<p>It's simply an implementation detail of the ZGC garbage collector. It needs more fine-grained control over its memory mappings which means a larger total amount of mappings.</p>\n<p>The older collectors usually reserved huge contiguous spaces of address space and only rarely punched some holes into those ranges to release memory back to the OS. ZGC works with non-contiguous ranges of varying size which means it has to request more individual mappings from the OS.</p>\n"}],"owner":{"account_id":1918987,"reputation":2839,"user_id":1730917,"accept_rate":71,"display_name":"Arya"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":627,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":75714764,"answer_count":1,"score":2,"last_activity_date":1679034840,"creation_date":1678631334,"question_id":75713808,"body_markdown":"We are migrating our java 8 application to java 17, and switching the GC from `G1GC` to `ZGC`. Our application is running as a container and the only difference between base-images of these two is the version of java. For example for java 17 version:\r\n\r\n```\r\nFROM ubuntu:20.04\r\n...\r\nENV JAVA_HOME /usr/lib/jvm/jdk-17.0.5\r\nENV PATH $JAVA_HOME/bin:$PATH\r\n```\r\nAnd its related java options:\r\n```\r\n-Xmx100g\r\n-XX:+UseZGC\r\n```\r\nWhen running application, these gc warnings appear:\r\n```\r\n[0.018s][warning][gc] ***** WARNING! INCORRECT SYSTEM CONFIGURATION DETECTED! *****\r\n[0.018s][warning][gc] The system limit on number of memory mappings per process might be too low for the given\r\n[0.018s][warning][gc] max Java heap size (102400M). Please adjust /proc/sys/vm/max_map_count to allow for at\r\n[0.018s][warning][gc] least 184320 mappings (current limit is 65530). Continuing execution with the current\r\n[0.018s][warning][gc] limit could lead to a premature OutOfMemoryError being thrown, due to failure to map memory.\r\n```\r\nAnd after a few hours, after memory reached about `~60GB`, application crashed:\r\n```\r\nJava HotSpot(TM) 64-Bit Server VM warning: INFO: os::commit_memory(...) failed; error=&#39;Not enough space&#39; (errno=12)\r\nJava HotSpot(TM) 64-Bit Server VM warning: INFO: os::commit_memory(...) failed; error=&#39;Not enough space&#39; (errno=12)\r\n# fatal error: Failed to map memory (Not enough space)\r\n# A fatal error has been detected by the Java Runtime Environment:\r\n[error occurred during error reporting (), id 0xb, SIGSEGV (0xb) at pc=0x00007fc929746941]\r\n```\r\nBut our java 8 version of application had never encountered such a problem before. I know adjusting `vm.max_map_count` will most likely fix the problem&#39;, but my question is what exactly has been changed in java or GC which causes these warnings and eventually these errors?\r\n\r\n\r\n\r\n\r\n","title":"GC warning about &quot;memory mappings per process&quot; and JVM crash after migrating to java 17","body":"<p>We are migrating our java 8 application to java 17, and switching the GC from <code>G1GC</code> to <code>ZGC</code>. Our application is running as a container and the only difference between base-images of these two is the version of java. For example for java 17 version:</p>\n<pre><code>FROM ubuntu:20.04\n...\nENV JAVA_HOME /usr/lib/jvm/jdk-17.0.5\nENV PATH $JAVA_HOME/bin:$PATH\n</code></pre>\n<p>And its related java options:</p>\n<pre><code>-Xmx100g\n-XX:+UseZGC\n</code></pre>\n<p>When running application, these gc warnings appear:</p>\n<pre><code>[0.018s][warning][gc] ***** WARNING! INCORRECT SYSTEM CONFIGURATION DETECTED! *****\n[0.018s][warning][gc] The system limit on number of memory mappings per process might be too low for the given\n[0.018s][warning][gc] max Java heap size (102400M). Please adjust /proc/sys/vm/max_map_count to allow for at\n[0.018s][warning][gc] least 184320 mappings (current limit is 65530). Continuing execution with the current\n[0.018s][warning][gc] limit could lead to a premature OutOfMemoryError being thrown, due to failure to map memory.\n</code></pre>\n<p>And after a few hours, after memory reached about <code>~60GB</code>, application crashed:</p>\n<pre><code>Java HotSpot(TM) 64-Bit Server VM warning: INFO: os::commit_memory(...) failed; error='Not enough space' (errno=12)\nJava HotSpot(TM) 64-Bit Server VM warning: INFO: os::commit_memory(...) failed; error='Not enough space' (errno=12)\n# fatal error: Failed to map memory (Not enough space)\n# A fatal error has been detected by the Java Runtime Environment:\n[error occurred during error reporting (), id 0xb, SIGSEGV (0xb) at pc=0x00007fc929746941]\n</code></pre>\n<p>But our java 8 version of application had never encountered such a problem before. I know adjusting <code>vm.max_map_count</code> will most likely fix the problem', but my question is what exactly has been changed in java or GC which causes these warnings and eventually these errors?</p>\n"},{"tags":["java","encryption","bouncycastle","openpgp"],"answers":[{"comments":[{"owner":{"account_id":6092561,"reputation":181,"user_id":4754385,"accept_rate":87,"display_name":"Unnamed user"},"score":0,"creation_date":1589574505,"post_id":61827650,"comment_id":109358748,"body_markdown":"Hi Michael, Thanks for your response. My requirement is to get the encrypted string returned by the encrypt method &amp; when someone writes it in a file, It should get decrypted through any PGP tool. So I am trying to save that encrypted string in a file using FileWriter but that file is not getting decrypted. I just want to manually decrypt the string and see the output.","body":"Hi Michael, Thanks for your response. My requirement is to get the encrypted string returned by the encrypt method &amp; when someone writes it in a file, It should get decrypted through any PGP tool. So I am trying to save that encrypted string in a file using FileWriter but that file is not getting decrypted. I just want to manually decrypt the string and see the output."},{"owner":{"account_id":11125108,"reputation":5965,"user_id":8166854,"display_name":"Michael Fehr"},"score":0,"creation_date":1589641860,"post_id":61827650,"comment_id":109376741,"body_markdown":"I edited/added my answer - does this meet your requirements?","body":"I edited/added my answer - does this meet your requirements?"}],"tags":[],"owner":{"account_id":11125108,"reputation":5965,"user_id":8166854,"display_name":"Michael Fehr"},"comment_count":2,"down_vote_count":0,"up_vote_count":12,"is_accepted":true,"score":12,"last_activity_date":1589642119,"creation_date":1589573757,"answer_id":61827650,"question_id":61826843,"body_markdown":"The following full example is taken from the source code of the book &quot;Java Cryptography: Tools and Techniques by David Hook &amp; Jon Eaves&quot;.\r\nThe complete source code with all examples is available here: https://www.bouncycastle.org/java-crypto-tools-src.zip\r\n\r\nThe examples are showing a private-/public key creation with El Gamal or Elliptic Curves and encryption with AES-256.\r\nIn the ecExample-method I added two lines to save the encrypted string to the file &quot;pgp-encrypted-string.dat&quot; and then\r\nreload the data to decypt the file and show the decrypted string.\r\n\r\n    import org.bouncycastle.bcpg.SymmetricKeyAlgorithmTags;\r\n    import org.bouncycastle.jce.provider.BouncyCastleProvider;\r\n    import org.bouncycastle.openpgp.*;\r\n    import org.bouncycastle.openpgp.jcajce.JcaPGPObjectFactory;\r\n    import org.bouncycastle.openpgp.operator.PublicKeyDataDecryptorFactory;\r\n    import org.bouncycastle.openpgp.operator.jcajce.JcaPGPKeyPair;\r\n    import org.bouncycastle.openpgp.operator.jcajce.JcePGPDataEncryptorBuilder;\r\n    import org.bouncycastle.openpgp.operator.jcajce.JcePublicKeyDataDecryptorFactoryBuilder;\r\n    import org.bouncycastle.openpgp.operator.jcajce.JcePublicKeyKeyEncryptionMethodGenerator;\r\n    import org.bouncycastle.util.Strings;\r\n    import org.bouncycastle.util.io.Streams;\r\n    \r\n    import java.io.ByteArrayOutputStream;\r\n    import java.io.IOException;\r\n    import java.io.InputStream;\r\n    import java.io.OutputStream;\r\n    import java.nio.file.Files;\r\n    import java.nio.file.Paths;\r\n    import java.security.KeyPair;\r\n    import java.security.KeyPairGenerator;\r\n    import java.security.SecureRandom;\r\n    import java.security.Security;\r\n    import java.security.spec.ECGenParameterSpec;\r\n    import java.util.Date;\r\n    \r\n    public class PGPEncryptionExampleForSO\r\n    {\r\n         /**\r\n         * Create an encrypted data blob using an AES-256 session key and the\r\n         * passed in public key.\r\n         *\r\n         * @param encryptionKey the public key to use.\r\n         * @param data the data to be encrypted.\r\n         * @return a PGP binary encoded version of the encrypted data.\r\n         */\r\n        public static byte[] createEncryptedData(\r\n            PGPPublicKey encryptionKey,\r\n            byte[] data)\r\n            throws PGPException, IOException\r\n        {\r\n            PGPEncryptedDataGenerator encGen = new PGPEncryptedDataGenerator(\r\n                new JcePGPDataEncryptorBuilder(SymmetricKeyAlgorithmTags.AES_256)\r\n                    .setWithIntegrityPacket(true)\r\n                    .setSecureRandom(new SecureRandom()).setProvider(&quot;BC&quot;));\r\n            encGen.addMethod(\r\n                new JcePublicKeyKeyEncryptionMethodGenerator(encryptionKey)\r\n                    .setProvider(&quot;BC&quot;));\r\n            ByteArrayOutputStream encOut = new ByteArrayOutputStream();\r\n            // create an indefinite length encrypted stream\r\n            OutputStream cOut = encGen.open(encOut, new byte[4096]);\r\n            // write out the literal data\r\n            PGPLiteralDataGenerator lData = new PGPLiteralDataGenerator();\r\n            OutputStream pOut = lData.open(\r\n                cOut, PGPLiteralData.BINARY,\r\n                PGPLiteralData.CONSOLE, data.length, new Date());\r\n            pOut.write(data);\r\n            pOut.close();\r\n            // finish the encryption\r\n            cOut.close();\r\n            return encOut.toByteArray();\r\n        }\r\n    \r\n        /**\r\n         * Extract the plain text data from the passed in encoding of PGP\r\n         * encrypted data. The routine assumes the passed in private key\r\n         * is the one that matches the first encrypted data object in the\r\n         * encoding.\r\n         *\r\n         * @param privateKey the private key to decrypt the session key with.\r\n         * @param pgpEncryptedData the encoding of the PGP encrypted data.\r\n         * @return a byte array containing the decrypted data.\r\n         */\r\n        public static byte[] extractPlainTextData(\r\n            PGPPrivateKey privateKey,\r\n            byte[] pgpEncryptedData)\r\n            throws PGPException, IOException\r\n        {\r\n            PGPObjectFactory pgpFact = new JcaPGPObjectFactory(pgpEncryptedData);\r\n            PGPEncryptedDataList encList = (PGPEncryptedDataList)pgpFact.nextObject();\r\n            // find the matching public key encrypted data packet.\r\n            PGPPublicKeyEncryptedData encData = null;\r\n            for (PGPEncryptedData pgpEnc: encList)\r\n            {\r\n                PGPPublicKeyEncryptedData pkEnc\r\n                    = (PGPPublicKeyEncryptedData)pgpEnc;\r\n                if (pkEnc.getKeyID() == privateKey.getKeyID())\r\n                {\r\n                    encData = pkEnc;\r\n                    break;\r\n                }\r\n            }\r\n            if (encData == null)\r\n            {\r\n                throw new IllegalStateException(&quot;matching encrypted data not found&quot;);\r\n            }\r\n            // build decryptor factory\r\n            PublicKeyDataDecryptorFactory dataDecryptorFactory =\r\n                new JcePublicKeyDataDecryptorFactoryBuilder()\r\n                    .setProvider(&quot;BC&quot;)\r\n                    .build(privateKey);\r\n            InputStream clear = encData.getDataStream(dataDecryptorFactory);\r\n            byte[] literalData = Streams.readAll(clear);\r\n            clear.close();\r\n            // check data decrypts okay\r\n            if (encData.verify())\r\n            {\r\n                // parse out literal data\r\n                PGPObjectFactory litFact = new JcaPGPObjectFactory(literalData);\r\n                PGPLiteralData litData = (PGPLiteralData)litFact.nextObject();\r\n                byte[] data = Streams.readAll(litData.getInputStream());\r\n                return data;\r\n            }\r\n            throw new IllegalStateException(&quot;modification check failed&quot;);\r\n        }\r\n    \r\n        private static void elgamalExample()\r\n            throws Exception\r\n        {\r\n            byte[] msg = Strings.toByteArray(&quot;Hello, world!&quot;);\r\n            KeyPairGenerator kpGen = KeyPairGenerator.getInstance(&quot;DH&quot;, &quot;BC&quot;);\r\n            kpGen.initialize(2048);\r\n            KeyPair kp = kpGen.generateKeyPair();\r\n            PGPKeyPair elgKp = new JcaPGPKeyPair(\r\n                PGPPublicKey.ELGAMAL_ENCRYPT, kp, new Date());\r\n            byte[] encData = createEncryptedData(elgKp.getPublicKey(), msg);\r\n            byte[] decData = extractPlainTextData(elgKp.getPrivateKey(), encData);\r\n            System.out.println(&quot;elgamal encryption msg length: &quot; + msg.length + &quot; enc.length: &quot; + encData.length + &quot; dec.length: &quot; + decData.length);\r\n            System.out.println(Strings.fromByteArray(decData));\r\n        }\r\n    \r\n        private static void ecExample()\r\n            throws Exception\r\n        {\r\n            byte[] msg = Strings.toByteArray(&quot;Hello, world!&quot;);\r\n            KeyPairGenerator kpGen = KeyPairGenerator.getInstance(&quot;EC&quot;, &quot;BC&quot;);\r\n            kpGen.initialize(new ECGenParameterSpec(&quot;P-256&quot;));\r\n            KeyPair kp = kpGen.generateKeyPair();\r\n            PGPKeyPair ecdhKp = new JcaPGPKeyPair(PGPPublicKey.ECDH, kp, new Date());\r\n            byte[] encData = createEncryptedData(ecdhKp.getPublicKey(), msg);\r\n            // save encrypted string\r\n            Files.write(Paths.get(&quot;pgp-encrypted-string.dat&quot;), encData);\r\n            // load encrypted string\r\n            byte[] encDataLoad = Files.readAllBytes(Paths.get(&quot;pgp-encrypted-string.dat&quot;));\r\n            byte[] decData = extractPlainTextData(ecdhKp.getPrivateKey(), encDataLoad);\r\n            System.out.println(&quot;ec encryption msg length: &quot; + msg.length + &quot; enc.length: &quot; + encData.length + &quot; dec.length: &quot; + decData.length);\r\n            System.out.println(Strings.fromByteArray(decData));\r\n        }\r\n    \r\n        public static void main(String[] args)\r\n            throws Exception\r\n        {\r\n            Security.addProvider(new BouncyCastleProvider());\r\n            // you need the two files bcpg-jdk15on-165.jar and bcprov-jdk15to18-165.jar to run the example\r\n            System.out.println(&quot;Example from Java Cryptography: Tools and Techniques by David Hook &amp; Jon Eaves&quot;);\r\n            System.out.println(&quot;get source files: https://www.bouncycastle.org/java-crypto-tools-src.zip&quot;);\r\n            elgamalExample();\r\n            ecExample();\r\n        }\r\n    }\r\n\r\nThis is the short output:\r\n\r\n    Example from Java Cryptography: Tools and Techniques by David Hook &amp; Jon Eaves\r\n    get source files: https://www.bouncycastle.org/java-crypto-tools-src.zip\r\n    elgamal encryption msg length: 13 enc.length: 601 dec.length: 13\r\n    Hello, world!\r\n    ec encryption msg length: 13 enc.length: 200 dec.length: 13\r\n    Hello, world!\r\n\r\n**Added:** As I now understand you&#39;re having a String like \r\n\r\n    This string needs an encryption\r\n\r\nand you want to encrypt it with a rsa pgp public key:\r\n\r\n    -----BEGIN PGP PUBLIC KEY BLOCK-----\r\n    Version: BCPG v1.65\r\n    \r\n    mI0EXr/nDgEEAKhB6ufAB954aBIlNjPCsryzUVLu0qkC/1RtnFHf+J6IVegV8Wi7\r\n    28V074inQcw6o6FTLtFTaLRP4+3eXNATdjGSjrvcP7k+nu50vydugHv43fPuCiZ7\r\n    6gbbMTE9gPiLPA2pS+SmQJnr9hOrD5rzwYP1yNNIsRJ9qmU5NeZyu+szABEBAAG0\r\n    DHRlc3RpZGVudGl0eYicBBABAgAGBQJev+cOAAoJEPBDuyqTbz/gY0YD/R+gDkfe\r\n    qPgNuk6iI2wLSGEeZRXr6Ru1cyG73CRvz7BjCpwWx039AdQzP9gkeo6MEj8Z0c73\r\n    obqEP8NtvvOcwC7+/QiGLTR2mgCsNhk54+iCGsvNbkpkr/rRoYZGyvb+rxui0A61\r\n    DCB1w5hdnyMg2OglFNrkaPfpNjMsTebfF5eS\r\n    =h1+m\r\n    -----END PGP PUBLIC KEY BLOCK-----\r\n\r\nand get the encrypted string\r\n\r\n    -----BEGIN PGP MESSAGE-----\r\n    Version: BCPG v1.65\r\n    \r\n    hIwD8EO7KpNvP+ABA/9JkOE9PDyS/kr/lZ1Uz+NCSe1JiNcKCXjbsUbvP8CT7Tf1\r\n    cKlgzIz1mQjdpkBtVpVhEnEjmUzFy2UCRKr4b4Wx7/1UL+370CICW5HgMoi5TgTg\r\n    MYRy5I9Uba/+JxcusjWB1JJHP4ofULziXRKLWAoSPLlglZDzSmV88hNo19rl39JZ\r\n    AbMhIS2edM9hHICefL/Yaiq90hGjKMRReVopu2tPUjNLGYP7QABAvWb3WQJMZoYT\r\n    HEsyjHxeyYQylAdYB7pWQA0++Z803iclvM3skN8FBt64ebDkqfxgbhs=\r\n    =je0r\r\n    -----END PGP MESSAGE-----\r\n\r\nNow you&#39;d like to decrypt this message with Kleoptatra, online (e.g. https://sela.io/pgp-en/) or in Java with the RSA pgp private key and the password 123456:\r\n\r\n    -----BEGIN PGP PRIVATE KEY BLOCK-----\r\n    Version: BCPG v1.65\r\n    \r\n    lQH+BF6/5w4BBACoQernwAfeeGgSJTYzwrK8s1FS7tKpAv9UbZxR3/ieiFXoFfFo\r\n    u9vFdO+Ip0HMOqOhUy7RU2i0T+Pt3lzQE3Yxko673D+5Pp7udL8nboB7+N3z7gom\r\n    e+oG2zExPYD4izwNqUvkpkCZ6/YTqw+a88GD9cjTSLESfaplOTXmcrvrMwARAQAB\r\n    /gMDAhhcE1oF/u8YYExKGLgriK5JpUUSsMFU0AOHP9/zZQr09437V0f/F4J87+9s\r\n    G30lDRikGwynEGRnAvIVwqq2F+iarKGGHCZCRgbyufXS7VK6wE/43lR0kSwA2VIM\r\n    ll/KbQKP1cSZv0rqtJ1tGL7cDHFEwq10gM4Bn75HOKyBzE9oERRKz37noAECsAZn\r\n    xuXGlEB5noqTT00RxsHjBA5Os04CtEz9N+OMrg47IR7AzSQUe90lG2F6W71dhJ6V\r\n    jQaf7D6JFU3dOWPW1eBb5FQhgYF92CFRizJ42lDCiTfl2FQU49MlwLd2ofNneuPo\r\n    aVuPoYUNKwbasyx4fo2vh6rrMyxmncCizMExvh6GIVgYd7EK9s6Gxq/duuOvly4O\r\n    ZAyIY2MOon0bDXxAYR2q/wdQLamnP7rAR4uMu24m/iOuBj6wwTR8v8hhsFFTp/4u\r\n    tebwWzLnPyyBYStnTF5IZ9ZJeVl5S3zdzNcrP9g8yXtItAx0ZXN0aWRlbnRpdHmI\r\n    nAQQAQIABgUCXr/nDgAKCRDwQ7sqk28/4GNGA/0foA5H3qj4DbpOoiNsC0hhHmUV\r\n    6+kbtXMhu9wkb8+wYwqcFsdN/QHUMz/YJHqOjBI/GdHO96G6hD/Dbb7znMAu/v0I\r\n    hi00dpoArDYZOePoghrLzW5KZK/60aGGRsr2/q8botAOtQwgdcOYXZ8jINjoJRTa\r\n    5Gj36TYzLE3m3xeXkg==\r\n    =y/tQ\r\n    -----END PGP PRIVATE KEY BLOCK-----\r\n\r\nand get the decrypted string:\r\n\r\n    This string needs an encryption\r\n\r\nTo encrypt/decrypt in Java fortunately there are sample files available in the BouncyCastle Github-Repo: https://github.com/bcgit/bc-java/blob/master/pg/src/main/java/org/bouncycastle/openpgp/examples/. You may need to create a new PGP-keypair using RSA (RSAKeyPairGenerator.java) or ElGamal\r\n(DSAElGamalKeyRingGenerator.java). With the generated keys you can encrypt or decrypt using KeyBasedFileProcessor.java and neccessary PGPExampleUtil.java.\r\n\r\nI created the RSA key files with &quot;-a testidentity 123456&quot; as arguments, the encryption is done with &quot;-e -ai plaintext.txt rsa_pub.asc&quot; and the decryption goes with &quot;-d plaintext.txt.asc rsa_secret.asc 123456&quot;. ","title":"Java: PGP Encryption using Bouncy Castle","body":"<p>The following full example is taken from the source code of the book \"Java Cryptography: Tools and Techniques by David Hook &amp; Jon Eaves\".\nThe complete source code with all examples is available here: <a href=\"https://www.bouncycastle.org/java-crypto-tools-src.zip\" rel=\"noreferrer\">https://www.bouncycastle.org/java-crypto-tools-src.zip</a></p>\n\n<p>The examples are showing a private-/public key creation with El Gamal or Elliptic Curves and encryption with AES-256.\nIn the ecExample-method I added two lines to save the encrypted string to the file \"pgp-encrypted-string.dat\" and then\nreload the data to decypt the file and show the decrypted string.</p>\n\n<pre><code>import org.bouncycastle.bcpg.SymmetricKeyAlgorithmTags;\nimport org.bouncycastle.jce.provider.BouncyCastleProvider;\nimport org.bouncycastle.openpgp.*;\nimport org.bouncycastle.openpgp.jcajce.JcaPGPObjectFactory;\nimport org.bouncycastle.openpgp.operator.PublicKeyDataDecryptorFactory;\nimport org.bouncycastle.openpgp.operator.jcajce.JcaPGPKeyPair;\nimport org.bouncycastle.openpgp.operator.jcajce.JcePGPDataEncryptorBuilder;\nimport org.bouncycastle.openpgp.operator.jcajce.JcePublicKeyDataDecryptorFactoryBuilder;\nimport org.bouncycastle.openpgp.operator.jcajce.JcePublicKeyKeyEncryptionMethodGenerator;\nimport org.bouncycastle.util.Strings;\nimport org.bouncycastle.util.io.Streams;\n\nimport java.io.ByteArrayOutputStream;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.OutputStream;\nimport java.nio.file.Files;\nimport java.nio.file.Paths;\nimport java.security.KeyPair;\nimport java.security.KeyPairGenerator;\nimport java.security.SecureRandom;\nimport java.security.Security;\nimport java.security.spec.ECGenParameterSpec;\nimport java.util.Date;\n\npublic class PGPEncryptionExampleForSO\n{\n     /**\n     * Create an encrypted data blob using an AES-256 session key and the\n     * passed in public key.\n     *\n     * @param encryptionKey the public key to use.\n     * @param data the data to be encrypted.\n     * @return a PGP binary encoded version of the encrypted data.\n     */\n    public static byte[] createEncryptedData(\n        PGPPublicKey encryptionKey,\n        byte[] data)\n        throws PGPException, IOException\n    {\n        PGPEncryptedDataGenerator encGen = new PGPEncryptedDataGenerator(\n            new JcePGPDataEncryptorBuilder(SymmetricKeyAlgorithmTags.AES_256)\n                .setWithIntegrityPacket(true)\n                .setSecureRandom(new SecureRandom()).setProvider(\"BC\"));\n        encGen.addMethod(\n            new JcePublicKeyKeyEncryptionMethodGenerator(encryptionKey)\n                .setProvider(\"BC\"));\n        ByteArrayOutputStream encOut = new ByteArrayOutputStream();\n        // create an indefinite length encrypted stream\n        OutputStream cOut = encGen.open(encOut, new byte[4096]);\n        // write out the literal data\n        PGPLiteralDataGenerator lData = new PGPLiteralDataGenerator();\n        OutputStream pOut = lData.open(\n            cOut, PGPLiteralData.BINARY,\n            PGPLiteralData.CONSOLE, data.length, new Date());\n        pOut.write(data);\n        pOut.close();\n        // finish the encryption\n        cOut.close();\n        return encOut.toByteArray();\n    }\n\n    /**\n     * Extract the plain text data from the passed in encoding of PGP\n     * encrypted data. The routine assumes the passed in private key\n     * is the one that matches the first encrypted data object in the\n     * encoding.\n     *\n     * @param privateKey the private key to decrypt the session key with.\n     * @param pgpEncryptedData the encoding of the PGP encrypted data.\n     * @return a byte array containing the decrypted data.\n     */\n    public static byte[] extractPlainTextData(\n        PGPPrivateKey privateKey,\n        byte[] pgpEncryptedData)\n        throws PGPException, IOException\n    {\n        PGPObjectFactory pgpFact = new JcaPGPObjectFactory(pgpEncryptedData);\n        PGPEncryptedDataList encList = (PGPEncryptedDataList)pgpFact.nextObject();\n        // find the matching public key encrypted data packet.\n        PGPPublicKeyEncryptedData encData = null;\n        for (PGPEncryptedData pgpEnc: encList)\n        {\n            PGPPublicKeyEncryptedData pkEnc\n                = (PGPPublicKeyEncryptedData)pgpEnc;\n            if (pkEnc.getKeyID() == privateKey.getKeyID())\n            {\n                encData = pkEnc;\n                break;\n            }\n        }\n        if (encData == null)\n        {\n            throw new IllegalStateException(\"matching encrypted data not found\");\n        }\n        // build decryptor factory\n        PublicKeyDataDecryptorFactory dataDecryptorFactory =\n            new JcePublicKeyDataDecryptorFactoryBuilder()\n                .setProvider(\"BC\")\n                .build(privateKey);\n        InputStream clear = encData.getDataStream(dataDecryptorFactory);\n        byte[] literalData = Streams.readAll(clear);\n        clear.close();\n        // check data decrypts okay\n        if (encData.verify())\n        {\n            // parse out literal data\n            PGPObjectFactory litFact = new JcaPGPObjectFactory(literalData);\n            PGPLiteralData litData = (PGPLiteralData)litFact.nextObject();\n            byte[] data = Streams.readAll(litData.getInputStream());\n            return data;\n        }\n        throw new IllegalStateException(\"modification check failed\");\n    }\n\n    private static void elgamalExample()\n        throws Exception\n    {\n        byte[] msg = Strings.toByteArray(\"Hello, world!\");\n        KeyPairGenerator kpGen = KeyPairGenerator.getInstance(\"DH\", \"BC\");\n        kpGen.initialize(2048);\n        KeyPair kp = kpGen.generateKeyPair();\n        PGPKeyPair elgKp = new JcaPGPKeyPair(\n            PGPPublicKey.ELGAMAL_ENCRYPT, kp, new Date());\n        byte[] encData = createEncryptedData(elgKp.getPublicKey(), msg);\n        byte[] decData = extractPlainTextData(elgKp.getPrivateKey(), encData);\n        System.out.println(\"elgamal encryption msg length: \" + msg.length + \" enc.length: \" + encData.length + \" dec.length: \" + decData.length);\n        System.out.println(Strings.fromByteArray(decData));\n    }\n\n    private static void ecExample()\n        throws Exception\n    {\n        byte[] msg = Strings.toByteArray(\"Hello, world!\");\n        KeyPairGenerator kpGen = KeyPairGenerator.getInstance(\"EC\", \"BC\");\n        kpGen.initialize(new ECGenParameterSpec(\"P-256\"));\n        KeyPair kp = kpGen.generateKeyPair();\n        PGPKeyPair ecdhKp = new JcaPGPKeyPair(PGPPublicKey.ECDH, kp, new Date());\n        byte[] encData = createEncryptedData(ecdhKp.getPublicKey(), msg);\n        // save encrypted string\n        Files.write(Paths.get(\"pgp-encrypted-string.dat\"), encData);\n        // load encrypted string\n        byte[] encDataLoad = Files.readAllBytes(Paths.get(\"pgp-encrypted-string.dat\"));\n        byte[] decData = extractPlainTextData(ecdhKp.getPrivateKey(), encDataLoad);\n        System.out.println(\"ec encryption msg length: \" + msg.length + \" enc.length: \" + encData.length + \" dec.length: \" + decData.length);\n        System.out.println(Strings.fromByteArray(decData));\n    }\n\n    public static void main(String[] args)\n        throws Exception\n    {\n        Security.addProvider(new BouncyCastleProvider());\n        // you need the two files bcpg-jdk15on-165.jar and bcprov-jdk15to18-165.jar to run the example\n        System.out.println(\"Example from Java Cryptography: Tools and Techniques by David Hook &amp; Jon Eaves\");\n        System.out.println(\"get source files: https://www.bouncycastle.org/java-crypto-tools-src.zip\");\n        elgamalExample();\n        ecExample();\n    }\n}\n</code></pre>\n\n<p>This is the short output:</p>\n\n<pre><code>Example from Java Cryptography: Tools and Techniques by David Hook &amp; Jon Eaves\nget source files: https://www.bouncycastle.org/java-crypto-tools-src.zip\nelgamal encryption msg length: 13 enc.length: 601 dec.length: 13\nHello, world!\nec encryption msg length: 13 enc.length: 200 dec.length: 13\nHello, world!\n</code></pre>\n\n<p><strong>Added:</strong> As I now understand you're having a String like </p>\n\n<pre><code>This string needs an encryption\n</code></pre>\n\n<p>and you want to encrypt it with a rsa pgp public key:</p>\n\n<pre><code>-----BEGIN PGP PUBLIC KEY BLOCK-----\nVersion: BCPG v1.65\n\nmI0EXr/nDgEEAKhB6ufAB954aBIlNjPCsryzUVLu0qkC/1RtnFHf+J6IVegV8Wi7\n28V074inQcw6o6FTLtFTaLRP4+3eXNATdjGSjrvcP7k+nu50vydugHv43fPuCiZ7\n6gbbMTE9gPiLPA2pS+SmQJnr9hOrD5rzwYP1yNNIsRJ9qmU5NeZyu+szABEBAAG0\nDHRlc3RpZGVudGl0eYicBBABAgAGBQJev+cOAAoJEPBDuyqTbz/gY0YD/R+gDkfe\nqPgNuk6iI2wLSGEeZRXr6Ru1cyG73CRvz7BjCpwWx039AdQzP9gkeo6MEj8Z0c73\nobqEP8NtvvOcwC7+/QiGLTR2mgCsNhk54+iCGsvNbkpkr/rRoYZGyvb+rxui0A61\nDCB1w5hdnyMg2OglFNrkaPfpNjMsTebfF5eS\n=h1+m\n-----END PGP PUBLIC KEY BLOCK-----\n</code></pre>\n\n<p>and get the encrypted string</p>\n\n<pre><code>-----BEGIN PGP MESSAGE-----\nVersion: BCPG v1.65\n\nhIwD8EO7KpNvP+ABA/9JkOE9PDyS/kr/lZ1Uz+NCSe1JiNcKCXjbsUbvP8CT7Tf1\ncKlgzIz1mQjdpkBtVpVhEnEjmUzFy2UCRKr4b4Wx7/1UL+370CICW5HgMoi5TgTg\nMYRy5I9Uba/+JxcusjWB1JJHP4ofULziXRKLWAoSPLlglZDzSmV88hNo19rl39JZ\nAbMhIS2edM9hHICefL/Yaiq90hGjKMRReVopu2tPUjNLGYP7QABAvWb3WQJMZoYT\nHEsyjHxeyYQylAdYB7pWQA0++Z803iclvM3skN8FBt64ebDkqfxgbhs=\n=je0r\n-----END PGP MESSAGE-----\n</code></pre>\n\n<p>Now you'd like to decrypt this message with Kleoptatra, online (e.g. <a href=\"https://sela.io/pgp-en/\" rel=\"noreferrer\">https://sela.io/pgp-en/</a>) or in Java with the RSA pgp private key and the password 123456:</p>\n\n<pre><code>-----BEGIN PGP PRIVATE KEY BLOCK-----\nVersion: BCPG v1.65\n\nlQH+BF6/5w4BBACoQernwAfeeGgSJTYzwrK8s1FS7tKpAv9UbZxR3/ieiFXoFfFo\nu9vFdO+Ip0HMOqOhUy7RU2i0T+Pt3lzQE3Yxko673D+5Pp7udL8nboB7+N3z7gom\ne+oG2zExPYD4izwNqUvkpkCZ6/YTqw+a88GD9cjTSLESfaplOTXmcrvrMwARAQAB\n/gMDAhhcE1oF/u8YYExKGLgriK5JpUUSsMFU0AOHP9/zZQr09437V0f/F4J87+9s\nG30lDRikGwynEGRnAvIVwqq2F+iarKGGHCZCRgbyufXS7VK6wE/43lR0kSwA2VIM\nll/KbQKP1cSZv0rqtJ1tGL7cDHFEwq10gM4Bn75HOKyBzE9oERRKz37noAECsAZn\nxuXGlEB5noqTT00RxsHjBA5Os04CtEz9N+OMrg47IR7AzSQUe90lG2F6W71dhJ6V\njQaf7D6JFU3dOWPW1eBb5FQhgYF92CFRizJ42lDCiTfl2FQU49MlwLd2ofNneuPo\naVuPoYUNKwbasyx4fo2vh6rrMyxmncCizMExvh6GIVgYd7EK9s6Gxq/duuOvly4O\nZAyIY2MOon0bDXxAYR2q/wdQLamnP7rAR4uMu24m/iOuBj6wwTR8v8hhsFFTp/4u\ntebwWzLnPyyBYStnTF5IZ9ZJeVl5S3zdzNcrP9g8yXtItAx0ZXN0aWRlbnRpdHmI\nnAQQAQIABgUCXr/nDgAKCRDwQ7sqk28/4GNGA/0foA5H3qj4DbpOoiNsC0hhHmUV\n6+kbtXMhu9wkb8+wYwqcFsdN/QHUMz/YJHqOjBI/GdHO96G6hD/Dbb7znMAu/v0I\nhi00dpoArDYZOePoghrLzW5KZK/60aGGRsr2/q8botAOtQwgdcOYXZ8jINjoJRTa\n5Gj36TYzLE3m3xeXkg==\n=y/tQ\n-----END PGP PRIVATE KEY BLOCK-----\n</code></pre>\n\n<p>and get the decrypted string:</p>\n\n<pre><code>This string needs an encryption\n</code></pre>\n\n<p>To encrypt/decrypt in Java fortunately there are sample files available in the BouncyCastle Github-Repo: <a href=\"https://github.com/bcgit/bc-java/blob/master/pg/src/main/java/org/bouncycastle/openpgp/examples/\" rel=\"noreferrer\">https://github.com/bcgit/bc-java/blob/master/pg/src/main/java/org/bouncycastle/openpgp/examples/</a>. You may need to create a new PGP-keypair using RSA (RSAKeyPairGenerator.java) or ElGamal\n(DSAElGamalKeyRingGenerator.java). With the generated keys you can encrypt or decrypt using KeyBasedFileProcessor.java and neccessary PGPExampleUtil.java.</p>\n\n<p>I created the RSA key files with \"-a testidentity 123456\" as arguments, the encryption is done with \"-e -ai plaintext.txt rsa_pub.asc\" and the decryption goes with \"-d plaintext.txt.asc rsa_secret.asc 123456\". </p>\n"}],"owner":{"account_id":6092561,"reputation":181,"user_id":4754385,"accept_rate":87,"display_name":"Unnamed user"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":22497,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":61827650,"answer_count":1,"score":5,"last_activity_date":1679034830,"creation_date":1589570595,"question_id":61826843,"body_markdown":"I am trying to achieve encryption using PGP and my encrypt method successfully encrypts the input string but when I try to decrypt it to verify if the encryption is properly done, the string doesn&#39;t get decrypted.\r\n\r\nI tried 2 approaches:\r\n\r\n1st approach uses **FileOutputStream** to write encrypted string &amp; 2nd approach uses **ByteArrayOutputStream**.\r\n**FileOutputStream** creates a file and I am able to decrypt it using Kleopatra. However my requirement is to just get an encrypted string (not written in a file). So when I try to decrypt the encrypted string (received after using **ByteArrayOutputStream**) its not working. I tried copying the string and decrypting it through tools&gt;&gt;clipboard in Kleopatra, but the decrypt/verify option is disabled. I tried writing the string on a file manually &amp; through FileWriter class, but decryption fails with the error that **File contains certificate &amp; cannot be decrypted or verified.**\r\n\r\nI assume only files created directly by OutputStream gets decrypted successfully.\r\nBut I have to really check the encrypted string.\r\n\r\nAny help would be highly appreciated.","title":"Java: PGP Encryption using Bouncy Castle","body":"<p>I am trying to achieve encryption using PGP and my encrypt method successfully encrypts the input string but when I try to decrypt it to verify if the encryption is properly done, the string doesn't get decrypted.</p>\n\n<p>I tried 2 approaches:</p>\n\n<p>1st approach uses <strong>FileOutputStream</strong> to write encrypted string &amp; 2nd approach uses <strong>ByteArrayOutputStream</strong>.\n<strong>FileOutputStream</strong> creates a file and I am able to decrypt it using Kleopatra. However my requirement is to just get an encrypted string (not written in a file). So when I try to decrypt the encrypted string (received after using <strong>ByteArrayOutputStream</strong>) its not working. I tried copying the string and decrypting it through tools>>clipboard in Kleopatra, but the decrypt/verify option is disabled. I tried writing the string on a file manually &amp; through FileWriter class, but decryption fails with the error that <strong>File contains certificate &amp; cannot be decrypted or verified.</strong></p>\n\n<p>I assume only files created directly by OutputStream gets decrypted successfully.\nBut I have to really check the encrypted string.</p>\n\n<p>Any help would be highly appreciated.</p>\n"},{"tags":["java","eclipse"],"answers":[{"tags":[],"owner":{"account_id":392950,"reputation":126,"user_id":754529,"display_name":"BillToWin"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1348793929,"creation_date":1348793929,"answer_id":12632191,"question_id":12630849,"body_markdown":"To hide the toolbar, you can go here: http://code.google.com/p/eclipse-hide-toolbar/\r\nfor a plugin which hides the toolbar every time you start eclipse.\r\n\r\nI don&#39;t think there is a way to have your cursor jump to the input like you described but it&#39;s a minor issue when you consider that an average user clicks and moves the mouse thousands of times a day, never mind an active programmer. \r\n\r\nBut I might be wrong.","title":"Is it possible to make Eclipse jump to the console upon run, especially when there&#39;s input? Also, can I hide the toolbar?","body":"<p>To hide the toolbar, you can go here: <a href=\"http://code.google.com/p/eclipse-hide-toolbar/\" rel=\"nofollow\">http://code.google.com/p/eclipse-hide-toolbar/</a>\nfor a plugin which hides the toolbar every time you start eclipse.</p>\n\n<p>I don't think there is a way to have your cursor jump to the input like you described but it's a minor issue when you consider that an average user clicks and moves the mouse thousands of times a day, never mind an active programmer. </p>\n\n<p>But I might be wrong.</p>\n"},{"comments":[{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":1,"creation_date":1679035404,"post_id":75764391,"comment_id":133651857,"body_markdown":"that&#39;s not an answer to the question, is it;) anyway, please take the time to write real English words (vs _u_)","body":"that&#39;s not an answer to the question, is it;) anyway, please take the time to write real English words (vs <i>u</i>)"}],"tags":[],"owner":{"account_id":21292600,"reputation":1,"user_id":15669528,"display_name":"Katshashank45"},"comment_count":1,"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1679034571,"creation_date":1679034571,"answer_id":75764391,"question_id":12630849,"body_markdown":"Press ctrl+tab thrice and u will be there at Console.......","title":"Is it possible to make Eclipse jump to the console upon run, especially when there&#39;s input? Also, can I hide the toolbar?","body":"<p>Press ctrl+tab thrice and u will be there at Console.......</p>\n"}],"owner":{"account_id":977491,"reputation":29776,"user_id":998117,"accept_rate":70,"display_name":"Doug Smith"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":718,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":12632191,"answer_count":2,"score":1,"last_activity_date":1679034571,"creation_date":1348784275,"question_id":12630849,"body_markdown":"In my old IDE, if I&#39;d run a Java file and the console requested input, it would jump my text cursor to it so I could type without moving my mouse. Eclipse doesn&#39;t seem to do this. Can I make it?\r\n\r\nAlso, how do you hide the toolbar? I prefer keyboard shortcuts so it&#39;s just cluttering up my view.","title":"Is it possible to make Eclipse jump to the console upon run, especially when there&#39;s input? Also, can I hide the toolbar?","body":"<p>In my old IDE, if I'd run a Java file and the console requested input, it would jump my text cursor to it so I could type without moving my mouse. Eclipse doesn't seem to do this. Can I make it?</p>\n\n<p>Also, how do you hide the toolbar? I prefer keyboard shortcuts so it's just cluttering up my view.</p>\n"},{"tags":["java","list","kotlin"],"comments":[{"owner":{"account_id":9847991,"reputation":56906,"user_id":7294900,"accept_rate":94,"display_name":"Ori Marko"},"score":2,"creation_date":1577887208,"post_id":59553126,"comment_id":105274774,"body_markdown":"See https://stackoverflow.com/questions/12099721/how-to-use-sublist","body":"See <a href=\"https://stackoverflow.com/questions/12099721/how-to-use-sublist\">stackoverflow.com/questions/12099721/how-to-use-sublist</a>"}],"answers":[{"comments":[{"owner":{"account_id":134022,"reputation":717193,"user_id":335858,"accept_rate":81,"display_name":"Sergey Kalinichenko"},"score":2,"creation_date":1577887322,"post_id":59553147,"comment_id":105274788,"body_markdown":"OP says he knows this, but he needs a different behavior.","body":"OP says he knows this, but he needs a different behavior."}],"tags":[],"owner":{"account_id":10538204,"reputation":2189,"user_id":7765316,"display_name":"majurageerthan"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1577887500,"creation_date":1577887209,"answer_id":59553147,"question_id":59553126,"body_markdown":"Arraylist is implemented over array. so you can not be able to get sublist than the real amount.\r\n\r\n    arrayListOf(1, 2, 3, 4)\r\n\r\nit means, You can only get the range between 0 - 4\r\n\r\n\r\n----------\r\n\r\n\r\nYou can try this to avoid IndexOutOfBoundsException\r\n\r\n    int maxRange = yourGivenMaxRange;\r\n\r\n        if(maxRange &gt; list.size()){\r\n            maxRange = list.size();\r\n        }\r\n\r\n    list.subList(0, maxRange) // -&gt; [1, 2, 3]\r\n    list.subList(0, maxRange) // -&gt; [1, 2, 3, 4]\r\n    list.subList(0, maxRange) // -&gt; [1, 2, 3, 4]\r\n    list.clear()\r\n    list.subList(0, maxRange) // -&gt; []\r\n\r\n","title":"Java or Kotlin - create as much of sublist as possible","body":"<p>Arraylist is implemented over array. so you can not be able to get sublist than the real amount.</p>\n\n<pre><code>arrayListOf(1, 2, 3, 4)\n</code></pre>\n\n<p>it means, You can only get the range between 0 - 4</p>\n\n<hr>\n\n<p>You can try this to avoid IndexOutOfBoundsException</p>\n\n<pre><code>int maxRange = yourGivenMaxRange;\n\n    if(maxRange &gt; list.size()){\n        maxRange = list.size();\n    }\n\nlist.subList(0, maxRange) // -&gt; [1, 2, 3]\nlist.subList(0, maxRange) // -&gt; [1, 2, 3, 4]\nlist.subList(0, maxRange) // -&gt; [1, 2, 3, 4]\nlist.clear()\nlist.subList(0, maxRange) // -&gt; []\n</code></pre>\n"},{"comments":[{"owner":{"account_id":13722742,"reputation":16988,"user_id":10134209,"display_name":"gidds"},"score":2,"creation_date":1577887633,"post_id":59553166,"comment_id":105274851,"body_markdown":"That would be my approach, too.&#160; You could make it even safer by limiting the fromValue, too; and by restricting them to be &gt;= 0 as well as &lt;= `size`; and possibly by ensuring `fromIndex` &lt;= `toIndex` as well.&#160; (Though arguably that might be _too_ safe…)","body":"That would be my approach, too.  You could make it even safer by limiting the fromValue, too; and by restricting them to be &gt;= 0 as well as &lt;= <code>size</code>; and possibly by ensuring <code>fromIndex</code> &lt;= <code>toIndex</code> as well.  (Though arguably that might be <i>too</i> safe…)"}],"tags":[],"owner":{"account_id":20707,"reputation":30842,"user_id":49746,"display_name":"Todd"},"comment_count":1,"down_vote_count":0,"up_vote_count":13,"is_accepted":true,"score":13,"last_activity_date":1577888093,"creation_date":1577887339,"answer_id":59553166,"question_id":59553126,"body_markdown":"You could write an extension on `List&lt;T&gt;` to do this logic for you:\r\n\r\n    fun &lt;T&gt; List&lt;T&gt;.safeSubList(fromIndex: Int, toIndex: Int): List&lt;T&gt; =\r\n        this.subList(fromIndex, toIndex.coerceAtMost(this.size))\r\n\r\nThis uses `coerceAtMost` to limit the highest value. \r\n\r\nAnd to call it:\r\n\r\n    val list = arrayListOf(1, 2, 3, 4)\r\n    println(list.safeSubList(0, 200)) // -&gt; [1, 2, 3, 4]\r\n\r\nOr as @gidds suggests, we could make this even safer:\r\n\r\n    fun &lt;T&gt; List&lt;T&gt;.safeSubList(fromIndex: Int, toIndex: Int): List&lt;T&gt; = \r\n        this.subList(fromIndex.coerceAtLeast(0), toIndex.coerceAtMost(this.size))\r\n\r\nThis version guards against specifying numbers out of range on both ends. If you pass in numbers such that from &gt; to, it will throw an `IllegalArgumentException` from `subList`.\r\n\r\n","title":"Java or Kotlin - create as much of sublist as possible","body":"<p>You could write an extension on <code>List&lt;T&gt;</code> to do this logic for you:</p>\n\n<pre><code>fun &lt;T&gt; List&lt;T&gt;.safeSubList(fromIndex: Int, toIndex: Int): List&lt;T&gt; =\n    this.subList(fromIndex, toIndex.coerceAtMost(this.size))\n</code></pre>\n\n<p>This uses <code>coerceAtMost</code> to limit the highest value. </p>\n\n<p>And to call it:</p>\n\n<pre><code>val list = arrayListOf(1, 2, 3, 4)\nprintln(list.safeSubList(0, 200)) // -&gt; [1, 2, 3, 4]\n</code></pre>\n\n<p>Or as @gidds suggests, we could make this even safer:</p>\n\n<pre><code>fun &lt;T&gt; List&lt;T&gt;.safeSubList(fromIndex: Int, toIndex: Int): List&lt;T&gt; = \n    this.subList(fromIndex.coerceAtLeast(0), toIndex.coerceAtMost(this.size))\n</code></pre>\n\n<p>This version guards against specifying numbers out of range on both ends. If you pass in numbers such that from > to, it will throw an <code>IllegalArgumentException</code> from <code>subList</code>.</p>\n"},{"tags":[],"owner":{"account_id":373984,"reputation":2024,"user_id":723939,"display_name":"Felipe Conde"},"comment_count":0,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1612364717,"creation_date":1612364717,"answer_id":66030203,"question_id":59553126,"body_markdown":"In Kotlin you can do\r\n\r\n```kotlin\r\nval list = mutableListOf(1, 2, 3, 4)\r\nlist.take(3) // -&gt; [1, 2, 3]\r\nlist.take(5) // -&gt; [1, 2, 3, 4]\r\nlist.take(200) // -&gt; [1, 2, 3, 4]\r\nlist.clear()\r\nlist.take(3) // -&gt; []\r\n```\r\nYou can check the implementation of `take` if you&#39;d like.","title":"Java or Kotlin - create as much of sublist as possible","body":"<p>In Kotlin you can do</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>val list = mutableListOf(1, 2, 3, 4)\nlist.take(3) // -&gt; [1, 2, 3]\nlist.take(5) // -&gt; [1, 2, 3, 4]\nlist.take(200) // -&gt; [1, 2, 3, 4]\nlist.clear()\nlist.take(3) // -&gt; []\n</code></pre>\n<p>You can check the implementation of <code>take</code> if you'd like.</p>\n"},{"tags":[],"owner":{"account_id":18084679,"reputation":11,"user_id":13145898,"display_name":"HYUNSANG HAN"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679034451,"creation_date":1679033952,"answer_id":75764312,"question_id":59553126,"body_markdown":"It would be work.\r\n\r\n```kotlin\r\nimport kotlin.math.max\r\nimport kotlin.math.min\r\n\r\nfun &lt;T&gt; List&lt;T&gt;.safeSubList(fromIndex: Int, toIndex: Int): List&lt;T&gt; {\r\n    if (fromIndex &gt; toIndex) return emptyList()\r\n    return subList(max(min(fromIndex.coerceAtLeast(0), size), 0), max(min(toIndex.coerceAtMost(size), size), 0))\r\n}\r\n```\r\n\r\nexample)\r\n```kotlin\r\nval a = (1..10).toList()\r\nprintln(a.safeSubList(9, 10))\r\nprintln(a.safeSubList(-1, -2))\r\nprintln(a.safeSubList(1, 0))\r\nprintln(a.safeSubList(-9, 4))\r\nprintln(a.safeSubList(4, 5))\r\nprintln(a.safeSubList(9, 15))\r\n```\r\n\r\nresult)\r\n```\r\n[10]\r\n[]\r\n[]\r\n[1, 2, 3, 4]\r\n[5]\r\n[10]\r\n```","title":"Java or Kotlin - create as much of sublist as possible","body":"<p>It would be work.</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>import kotlin.math.max\nimport kotlin.math.min\n\nfun &lt;T&gt; List&lt;T&gt;.safeSubList(fromIndex: Int, toIndex: Int): List&lt;T&gt; {\n    if (fromIndex &gt; toIndex) return emptyList()\n    return subList(max(min(fromIndex.coerceAtLeast(0), size), 0), max(min(toIndex.coerceAtMost(size), size), 0))\n}\n</code></pre>\n<p>example)</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>val a = (1..10).toList()\nprintln(a.safeSubList(9, 10))\nprintln(a.safeSubList(-1, -2))\nprintln(a.safeSubList(1, 0))\nprintln(a.safeSubList(-9, 4))\nprintln(a.safeSubList(4, 5))\nprintln(a.safeSubList(9, 15))\n</code></pre>\n<p>result)</p>\n<pre><code>[10]\n[]\n[]\n[1, 2, 3, 4]\n[5]\n[10]\n</code></pre>\n"}],"owner":{"account_id":1675780,"reputation":5629,"user_id":1541397,"accept_rate":81,"display_name":"David Callanan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2911,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":59553166,"answer_count":4,"score":8,"last_activity_date":1679034451,"creation_date":1577886990,"question_id":59553126,"body_markdown":"In Java or Kotlin, how can I create as much of a sublist as possible? If the range is greater than the size of the list, it should just ignore parts of the range that are out of bounds.\r\n\r\nI currently have (Kotlin):\r\n\r\n```kotlin\r\nval list: List = arrayListOf(1, 2, 3, 4)\r\nlist.subList(0, 3) // -&gt; [1, 2, 3]\r\nlist.subList(0, 5) // -&gt; IndexOutOfBoundsException\r\nlist.subList(0, 200) // -&gt; IndexOutOfBoundsException\r\nlist.clear()\r\nlist.subList(0, 3) // -&gt; IndexOutOfBoundsException\r\n```\r\n\r\nI would like (Kotlin):\r\n\r\n```kotlin\r\nval list: List = arrayListOf(1, 2, 3, 4)\r\nlist.subList(0, 3) // -&gt; [1, 2, 3]\r\nlist.subList(0, 5) // -&gt; [1, 2, 3, 4]\r\nlist.subList(0, 200) // -&gt; [1, 2, 3, 4]\r\nlist.clear()\r\nlist.subList(0, 3) // -&gt; []\r\n```\r\n","title":"Java or Kotlin - create as much of sublist as possible","body":"<p>In Java or Kotlin, how can I create as much of a sublist as possible? If the range is greater than the size of the list, it should just ignore parts of the range that are out of bounds.</p>\n\n<p>I currently have (Kotlin):</p>\n\n<pre><code>val list: List = arrayListOf(1, 2, 3, 4)\nlist.subList(0, 3) // -&gt; [1, 2, 3]\nlist.subList(0, 5) // -&gt; IndexOutOfBoundsException\nlist.subList(0, 200) // -&gt; IndexOutOfBoundsException\nlist.clear()\nlist.subList(0, 3) // -&gt; IndexOutOfBoundsException\n</code></pre>\n\n<p>I would like (Kotlin):</p>\n\n<pre><code>val list: List = arrayListOf(1, 2, 3, 4)\nlist.subList(0, 3) // -&gt; [1, 2, 3]\nlist.subList(0, 5) // -&gt; [1, 2, 3, 4]\nlist.subList(0, 200) // -&gt; [1, 2, 3, 4]\nlist.clear()\nlist.subList(0, 3) // -&gt; []\n</code></pre>\n"},{"tags":["java","logging","log4j","log4j2","slf4j"],"comments":[{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":0,"creation_date":1679024046,"post_id":75763522,"comment_id":133650477,"body_markdown":"you can use log4j2&#39;s routing appender and marker to do this. Based on the configuration of the routing appender, you can then pass a marker so that it would create either new files/new directory depending on the marker","body":"you can use log4j2&#39;s routing appender and marker to do this. Based on the configuration of the routing appender, you can then pass a marker so that it would create either new files/new directory depending on the marker"},{"owner":{"account_id":27071838,"reputation":207,"user_id":20622382,"display_name":"Seriously"},"score":0,"creation_date":1679024262,"post_id":75763522,"comment_id":133650508,"body_markdown":"I am new to logging would you share some ref on how to use routing appender and marker? - @experimentunit1998X","body":"I am new to logging would you share some ref on how to use routing appender and marker? - @experimentunit1998X"}],"answers":[{"tags":[],"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1679034258,"creation_date":1679024728,"answer_id":75763588,"question_id":75763522,"body_markdown":"This is a recent example I was working with. The log4j2.xml I used is as follows:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;Configuration&gt;\r\n    \r\n        &lt;Properties&gt;\r\n            &lt;Property name=&quot;CONSOLE_PATTERN&quot;&gt;%d{HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n&lt;/Property&gt;\r\n            &lt;Property name=&quot;LOG_PATTERN&quot;&gt;%d %-5p method: [%t] %C{2} (%F:%L) - %m%n&lt;/Property&gt;\r\n        &lt;/Properties&gt;\r\n    \r\n        &lt;Appenders&gt;\r\n            &lt;Routing name=&quot;RoutingAppender&quot;&gt;\r\n                &lt;Routes pattern=&quot;$${marker:}&quot;&gt;\r\n                    &lt;Route&gt;\r\n                        &lt;RollingFile name=&quot;RollingFile-${marker:}&quot;\r\n                                     fileName=&quot;./logs/application/${marker:}/app.log&quot;\r\n                                     filePattern=&quot;./logs/application/${marker:}/app-%d{MM-dd-yyyy}.log.gz&quot;\r\n                                     ignoreExceptions=&quot;false&quot;&gt;\r\n                            &lt;PatternLayout pattern=&quot;${LOG_PATTERN}&quot;/&gt;\r\n                            &lt;TimeBasedTriggeringPolicy/&gt;\r\n                        &lt;/RollingFile&gt;\r\n                    &lt;/Route&gt;\r\n                &lt;/Routes&gt;\r\n            &lt;/Routing&gt;\r\n    \r\n            &lt;Console name=&quot;StdOut&quot; target=&quot;SYSTEM_OUT&quot; follow=&quot;true&quot;&gt;\r\n                &lt;PatternLayout pattern=&quot;${CONSOLE_PATTERN}&quot;/&gt;\r\n            &lt;/Console&gt;\r\n    \r\n            &lt;Routing name=&quot;SequenceRoutingAppender&quot;&gt;\r\n                &lt;Routes pattern=&quot;$${marker:}&quot;&gt;\r\n                    &lt;Route&gt;\r\n                        &lt;RollingFile name=&quot;Sequencing-${marker:}&quot;\r\n                                     fileName=&quot;./logs/service/${marker:}/seq_gap.log&quot;\r\n                                     filePattern=&quot;./logs/service/${marker:}/seq_gap-%d{MM-dd-yyyy}.log.gz&quot;\r\n                                     ignoreExceptions=&quot;false&quot;&gt;\r\n                            &lt;PatternLayout pattern=&quot;${LOG_PATTERN}&quot;/&gt;\r\n                            &lt;TimeBasedTriggeringPolicy/&gt;\r\n                        &lt;/RollingFile&gt;\r\n                    &lt;/Route&gt;\r\n                &lt;/Routes&gt;\r\n            &lt;/Routing&gt;\r\n        &lt;/Appenders&gt;\r\n        &lt;Loggers&gt;\r\n            &lt;Root level=&quot;info&quot;&gt;\r\n                &lt;AppenderRef ref=&quot;RoutingAppender&quot;/&gt;\r\n            &lt;/Root&gt;\r\n            &lt;logger name=&quot;SequencingLogger&quot; additivity=&quot;false&quot; level=&quot;info&quot;&gt;\r\n                &lt;AppenderRef ref=&quot;SequenceRoutingAppender&quot;/&gt;\r\n            &lt;/logger&gt;\r\n        &lt;/Loggers&gt;\r\n    &lt;/Configuration&gt;\r\n\r\nThere are two RoutingAppenders I used, but its basically the same for both, I just want to log different things for the same Markers. It would take the marker values and insert it where the placeholders are ${marker:}. Inside my code, I have instantiated Markers as follows:\r\n\r\n        Marker mainMarker = MarkerManager.getMarker(&quot;MAIN&quot;);\r\n        Marker applicationMarker = MarkerManager.getMarker(&quot;APPLICATION&quot;);\r\n        Marker sequenceMarker = MarkerManager.getMarker(&quot;SEQUENCE&quot;);\r\n\r\nYou can pass the name of your files and their file types as params to getMarker(). Then, when you log you pass the marker to the logger as well as whatever statement you want to log as follows:\r\n\r\n    LOGGER.warn(mainMarker, &quot;unable to find config in working directory. Fall back to jar config&quot;);\r\n\r\nI know that the answer I provide is quite brief and to the point without much explanation why, but here is an [informative site](https://roytuts.com/how-to-create-separate-log-file-for-each-module-using-routingappender-and-mdc-mapped-diagnostic-context-in-log4j2-slf4j/) that explains what is going on, and why some of the things are done the way they are. I used it quite frequently while trying to understand how RoutingAppender works since the sample provided by Apache, and other examples on SO were quite brief.\r\n\r\nand quoting from the link\r\n\r\n&gt; The Routing is kept under Appender and it’s a RoutingAppender.\r\n&gt; \r\n&gt; The Routes element accepts a single attribute named “pattern”. The\r\n&gt; pattern is evaluated against all the registered Lookups and the result\r\n&gt; is used to select a Route. Each Route may be configured with a key. If\r\n&gt; the key matches the result of evaluating the pattern then that Route\r\n&gt; will be selected. If no key is specified on a Route then that Route is\r\n&gt; the default. Only one Route can be configured as the default.\r\n&gt; \r\n&gt; The Routes element may contain a Script child element. If specified,\r\n&gt; the Script is run for each log event and returns the String Route key\r\n&gt; to use.\r\n&gt; \r\n&gt; You must specify either the pattern attribute or the Script element,\r\n&gt; but not both.\r\n&gt; \r\n&gt; Each Route must reference an Appender. If the Route contains a ref\r\n&gt; attribute then the Route will reference an Appender that was defined\r\n&gt; in the configuration. If the Route contains an Appender definition\r\n&gt; then an Appender will be created within the context of the\r\n&gt; RoutingAppender and will be reused each time a matching Appender name\r\n&gt; is referenced through a Route.\r\n&gt; \r\n&gt; In our example the Routes pattern is $${ctx:module}. This pattern\r\n&gt; matches with a key called module in the context.\r\n\r\nbut in my case the Routes pattern in $${marker:}","title":"How to Dynamically log when iterating in a filepath and reading the contents of file How to create separate log file for each file?","body":"<p>This is a recent example I was working with. The log4j2.xml I used is as follows:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;Configuration&gt;\n\n    &lt;Properties&gt;\n        &lt;Property name=&quot;CONSOLE_PATTERN&quot;&gt;%d{HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n&lt;/Property&gt;\n        &lt;Property name=&quot;LOG_PATTERN&quot;&gt;%d %-5p method: [%t] %C{2} (%F:%L) - %m%n&lt;/Property&gt;\n    &lt;/Properties&gt;\n\n    &lt;Appenders&gt;\n        &lt;Routing name=&quot;RoutingAppender&quot;&gt;\n            &lt;Routes pattern=&quot;$${marker:}&quot;&gt;\n                &lt;Route&gt;\n                    &lt;RollingFile name=&quot;RollingFile-${marker:}&quot;\n                                 fileName=&quot;./logs/application/${marker:}/app.log&quot;\n                                 filePattern=&quot;./logs/application/${marker:}/app-%d{MM-dd-yyyy}.log.gz&quot;\n                                 ignoreExceptions=&quot;false&quot;&gt;\n                        &lt;PatternLayout pattern=&quot;${LOG_PATTERN}&quot;/&gt;\n                        &lt;TimeBasedTriggeringPolicy/&gt;\n                    &lt;/RollingFile&gt;\n                &lt;/Route&gt;\n            &lt;/Routes&gt;\n        &lt;/Routing&gt;\n\n        &lt;Console name=&quot;StdOut&quot; target=&quot;SYSTEM_OUT&quot; follow=&quot;true&quot;&gt;\n            &lt;PatternLayout pattern=&quot;${CONSOLE_PATTERN}&quot;/&gt;\n        &lt;/Console&gt;\n\n        &lt;Routing name=&quot;SequenceRoutingAppender&quot;&gt;\n            &lt;Routes pattern=&quot;$${marker:}&quot;&gt;\n                &lt;Route&gt;\n                    &lt;RollingFile name=&quot;Sequencing-${marker:}&quot;\n                                 fileName=&quot;./logs/service/${marker:}/seq_gap.log&quot;\n                                 filePattern=&quot;./logs/service/${marker:}/seq_gap-%d{MM-dd-yyyy}.log.gz&quot;\n                                 ignoreExceptions=&quot;false&quot;&gt;\n                        &lt;PatternLayout pattern=&quot;${LOG_PATTERN}&quot;/&gt;\n                        &lt;TimeBasedTriggeringPolicy/&gt;\n                    &lt;/RollingFile&gt;\n                &lt;/Route&gt;\n            &lt;/Routes&gt;\n        &lt;/Routing&gt;\n    &lt;/Appenders&gt;\n    &lt;Loggers&gt;\n        &lt;Root level=&quot;info&quot;&gt;\n            &lt;AppenderRef ref=&quot;RoutingAppender&quot;/&gt;\n        &lt;/Root&gt;\n        &lt;logger name=&quot;SequencingLogger&quot; additivity=&quot;false&quot; level=&quot;info&quot;&gt;\n            &lt;AppenderRef ref=&quot;SequenceRoutingAppender&quot;/&gt;\n        &lt;/logger&gt;\n    &lt;/Loggers&gt;\n&lt;/Configuration&gt;\n</code></pre>\n<p>There are two RoutingAppenders I used, but its basically the same for both, I just want to log different things for the same Markers. It would take the marker values and insert it where the placeholders are ${marker:}. Inside my code, I have instantiated Markers as follows:</p>\n<pre><code>    Marker mainMarker = MarkerManager.getMarker(&quot;MAIN&quot;);\n    Marker applicationMarker = MarkerManager.getMarker(&quot;APPLICATION&quot;);\n    Marker sequenceMarker = MarkerManager.getMarker(&quot;SEQUENCE&quot;);\n</code></pre>\n<p>You can pass the name of your files and their file types as params to getMarker(). Then, when you log you pass the marker to the logger as well as whatever statement you want to log as follows:</p>\n<pre><code>LOGGER.warn(mainMarker, &quot;unable to find config in working directory. Fall back to jar config&quot;);\n</code></pre>\n<p>I know that the answer I provide is quite brief and to the point without much explanation why, but here is an <a href=\"https://roytuts.com/how-to-create-separate-log-file-for-each-module-using-routingappender-and-mdc-mapped-diagnostic-context-in-log4j2-slf4j/\" rel=\"nofollow noreferrer\">informative site</a> that explains what is going on, and why some of the things are done the way they are. I used it quite frequently while trying to understand how RoutingAppender works since the sample provided by Apache, and other examples on SO were quite brief.</p>\n<p>and quoting from the link</p>\n<blockquote>\n<p>The Routing is kept under Appender and it’s a RoutingAppender.</p>\n<p>The Routes element accepts a single attribute named “pattern”. The\npattern is evaluated against all the registered Lookups and the result\nis used to select a Route. Each Route may be configured with a key. If\nthe key matches the result of evaluating the pattern then that Route\nwill be selected. If no key is specified on a Route then that Route is\nthe default. Only one Route can be configured as the default.</p>\n<p>The Routes element may contain a Script child element. If specified,\nthe Script is run for each log event and returns the String Route key\nto use.</p>\n<p>You must specify either the pattern attribute or the Script element,\nbut not both.</p>\n<p>Each Route must reference an Appender. If the Route contains a ref\nattribute then the Route will reference an Appender that was defined\nin the configuration. If the Route contains an Appender definition\nthen an Appender will be created within the context of the\nRoutingAppender and will be reused each time a matching Appender name\nis referenced through a Route.</p>\n<p>In our example the Routes pattern is $${ctx:module}. This pattern\nmatches with a key called module in the context.</p>\n</blockquote>\n<p>but in my case the Routes pattern in $${marker:}</p>\n"}],"owner":{"account_id":27071838,"reputation":207,"user_id":20622382,"display_name":"Seriously"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":80,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":75763588,"answer_count":1,"score":2,"last_activity_date":1679034258,"creation_date":1679023878,"question_id":75763522,"body_markdown":"I have Created a maven java project, if given a folderpath, the code will iterate over the folder and pick file one by one and read all the contents of file (file type supported-txt,pdf,word,excel,csv,xml,logs) How to create separate log file for each file with same name as &quot;filename_filetype.log&quot; using log4j2 or any other lib will also work.","title":"How to Dynamically log when iterating in a filepath and reading the contents of file How to create separate log file for each file?","body":"<p>I have Created a maven java project, if given a folderpath, the code will iterate over the folder and pick file one by one and read all the contents of file (file type supported-txt,pdf,word,excel,csv,xml,logs) How to create separate log file for each file with same name as &quot;filename_filetype.log&quot; using log4j2 or any other lib will also work.</p>\n"},{"tags":["java","arrays"],"comments":[{"owner":{"account_id":1233070,"reputation":9484,"user_id":1197251,"display_name":"dominicoder"},"score":1,"creation_date":1678978329,"post_id":75757742,"comment_id":133640913,"body_markdown":"&quot;the app simply crushes&quot; - If your app crashes, post the error and stacktrace so we can see _why_ and _where_ it crashes.","body":"&quot;the app simply crushes&quot; - If your app crashes, post the error and stacktrace so we can see <i>why</i> and <i>where</i> it crashes."}],"owner":{"account_id":28032477,"reputation":11,"user_id":21411440,"display_name":"haile"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679033263,"creation_date":1678977386,"question_id":75757742,"body_markdown":"currently I am trying to build a photo album app normally I could display all my 250 jpg images in the recyclerview, but I need to display each image clicked in a new activity imageview in their full image size.\r\n\r\nI have tried to pass the data from `recyclerview` to new activity `imageview` by Intent but it does not work. (when each images are clicked the app simply crashes)\r\n\r\n\r\n\r\n**my adapter**\r\n\r\n```\r\npublic class myAdapter extends RecyclerView.Adapter &lt;myAdapter.myViewHolder&gt;  {\r\n\r\n    Context context;\r\n    ArrayList&lt;tdfImageItem&gt;tdfImageItems;\r\n\r\n\r\n    public myAdapter(Context context, ArrayList&lt;tdfImageItem&gt; tdfImageItems) {\r\n        this.context = context;\r\n        this.tdfImageItems = tdfImageItems;\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public myAdapter.myViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n        return new myViewHolder(LayoutInflater.from(context).inflate(R.layout.tdf_image_item_layout,parent,false));\r\n    }\r\n\r\n    @Override\r\n    public void onBindViewHolder(@NonNull myAdapter.myViewHolder holder, int position) {\r\n       holder.imageView.setImageResource(tdfImageItems.get(position).getTdfImageItem());\r\n   /* all my photos are successfully uploaded in to recyclerview. */\r\n\r\n        holder.itemView.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n       int data = tdfImageItems.get(position).getTdfImageItem();\r\n\r\n   Intent intent = new Intent(context,MainActivity2.class);\r\n                intent.putExtra(&quot;haile&quot;,data);\r\n                context.startActivity(intent);\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    @Override\r\n    public int getItemCount() {\r\n        return tdfImageItems.size();\r\n    }\r\n\r\n    public class myViewHolder extends RecyclerView.ViewHolder {\r\n        ImageView imageView;\r\n\r\n\r\n        public ImageView getImageView() {\r\n            return imageView;\r\n        }\r\n\r\n        public void setImageView(ImageView imageView) {\r\n            this.imageView = imageView;\r\n        }\r\n\r\n\r\n        public myViewHolder(@NonNull View itemView, ImageView imageView) {\r\n            super(itemView);\r\n            this.imageView = imageView;\r\n\r\n        }\r\n\r\n        public myViewHolder(@NonNull View itemView) {\r\n            super(itemView);\r\n\r\n            imageView=itemView.findViewById(R.id.image_view);\r\n\r\n        }\r\n    }\r\n}\r\n\r\n`MainActivity`\r\npublic class MainActivity extends AppCompatActivity {\r\n    RecyclerView recyclerView;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        recyclerView = findViewById(R.id.recycler_view);\r\n\r\n       List&lt;tdfImageItem&gt; tdfImageItems = new ArrayList&lt;&gt;();\r\n\r\n        tdfImageItems.add(new tdfImageItem(R.drawable.tdf1));\r\n           /*.all 250 R.drawable.tdf photos */\r\n         tdfImageItems.add(new tdfImageItem(R.drawable.tdf250));\r\n\r\n\r\n\r\n        recyclerView.setLayoutManager(new GridLayoutManager(this,2));\r\n        recyclerView.setAdapter(new myAdaper(getApplicationContext(), (ArrayList&lt;tdfImageItem&gt;)      tdfImageItems));\r\n\r\n    }\r\n}\r\n\r\n\r\n\r\npublic class MainActivity2 extends AppCompatActivity {\r\n    ImageView imageView2;\r\n\r\n    @SuppressLint(&quot;MissingInflatedId&quot;)\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main2);\r\n\r\n        imageView2 = findViewById(R.id.image_view2);\r\n\r\n        int values = getIntent().getIntExtra(&quot;haile&quot;,0);\r\n        imageView2.setImageResource(values);\r\n    }\r\n}\r\n\r\n\r\n\r\n`MainActivity2.xml`\r\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    tools:context=&quot;.MainActivity2&quot;&gt;\r\n\r\n    &lt;ImageView\r\n        android:id=&quot;@+id/image_view2&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:scaleType=&quot;centerCrop&quot;\r\n        android:src=&quot;@drawable/tdf&quot;\r\n        android:contentDescription=&quot;@string/image_description&quot;\r\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n        app:layout_constraintVertical_bias=&quot;0.463&quot; /&gt;\r\n\r\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n\r\n\r\n\r\n```\r\n\r\n\r\n\r\n\r\n","title":"how can i pass image data from recyclerview to new activity image view","body":"<p>currently I am trying to build a photo album app normally I could display all my 250 jpg images in the recyclerview, but I need to display each image clicked in a new activity imageview in their full image size.</p>\n<p>I have tried to pass the data from <code>recyclerview</code> to new activity <code>imageview</code> by Intent but it does not work. (when each images are clicked the app simply crashes)</p>\n<p><strong>my adapter</strong></p>\n<pre><code>public class myAdapter extends RecyclerView.Adapter &lt;myAdapter.myViewHolder&gt;  {\n\n    Context context;\n    ArrayList&lt;tdfImageItem&gt;tdfImageItems;\n\n\n    public myAdapter(Context context, ArrayList&lt;tdfImageItem&gt; tdfImageItems) {\n        this.context = context;\n        this.tdfImageItems = tdfImageItems;\n    }\n\n    @NonNull\n    @Override\n    public myAdapter.myViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\n        return new myViewHolder(LayoutInflater.from(context).inflate(R.layout.tdf_image_item_layout,parent,false));\n    }\n\n    @Override\n    public void onBindViewHolder(@NonNull myAdapter.myViewHolder holder, int position) {\n       holder.imageView.setImageResource(tdfImageItems.get(position).getTdfImageItem());\n   /* all my photos are successfully uploaded in to recyclerview. */\n\n        holder.itemView.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n       int data = tdfImageItems.get(position).getTdfImageItem();\n\n   Intent intent = new Intent(context,MainActivity2.class);\n                intent.putExtra(&quot;haile&quot;,data);\n                context.startActivity(intent);\n\n            }\n        });\n    }\n\n    @Override\n    public int getItemCount() {\n        return tdfImageItems.size();\n    }\n\n    public class myViewHolder extends RecyclerView.ViewHolder {\n        ImageView imageView;\n\n\n        public ImageView getImageView() {\n            return imageView;\n        }\n\n        public void setImageView(ImageView imageView) {\n            this.imageView = imageView;\n        }\n\n\n        public myViewHolder(@NonNull View itemView, ImageView imageView) {\n            super(itemView);\n            this.imageView = imageView;\n\n        }\n\n        public myViewHolder(@NonNull View itemView) {\n            super(itemView);\n\n            imageView=itemView.findViewById(R.id.image_view);\n\n        }\n    }\n}\n\n`MainActivity`\npublic class MainActivity extends AppCompatActivity {\n    RecyclerView recyclerView;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        recyclerView = findViewById(R.id.recycler_view);\n\n       List&lt;tdfImageItem&gt; tdfImageItems = new ArrayList&lt;&gt;();\n\n        tdfImageItems.add(new tdfImageItem(R.drawable.tdf1));\n           /*.all 250 R.drawable.tdf photos */\n         tdfImageItems.add(new tdfImageItem(R.drawable.tdf250));\n\n\n\n        recyclerView.setLayoutManager(new GridLayoutManager(this,2));\n        recyclerView.setAdapter(new myAdaper(getApplicationContext(), (ArrayList&lt;tdfImageItem&gt;)      tdfImageItems));\n\n    }\n}\n\n\n\npublic class MainActivity2 extends AppCompatActivity {\n    ImageView imageView2;\n\n    @SuppressLint(&quot;MissingInflatedId&quot;)\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main2);\n\n        imageView2 = findViewById(R.id.image_view2);\n\n        int values = getIntent().getIntExtra(&quot;haile&quot;,0);\n        imageView2.setImageResource(values);\n    }\n}\n\n\n\n`MainActivity2.xml`\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    tools:context=&quot;.MainActivity2&quot;&gt;\n\n    &lt;ImageView\n        android:id=&quot;@+id/image_view2&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:scaleType=&quot;centerCrop&quot;\n        android:src=&quot;@drawable/tdf&quot;\n        android:contentDescription=&quot;@string/image_description&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\n        app:layout_constraintVertical_bias=&quot;0.463&quot; /&gt;\n\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n\n\n\n</code></pre>\n"},{"tags":["java","android","android-fragments","android-viewpager"],"answers":[{"tags":[],"owner":{"account_id":1849514,"reputation":193878,"user_id":1676363,"accept_rate":100,"display_name":"ianhanniballake"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679033059,"creation_date":1679033059,"answer_id":75764222,"question_id":75764059,"body_markdown":"ViewPager2 does not &#39;detach&#39; fragments at all. However, it **does** ensure that only the current screen is `RESUMED` - other fragments are capped at the `STARTED` state (this is how individual fragments can tell if they are the currently selected screen). This mirrors the same behavior of ViewPager1 in its [`BEHAVIOR_RESUME_ONLY_CURRENT_FRAGMENT`][1]. You can verify this if you are using ViewPager2 1.1 releases as it [`onFragmentMaxLifecyclePreUpdated`][2] callback is called whenever this behavior kicks in.\r\n\r\nThere&#39;s no way to turn this off or change this behavior as this is the expected behavior of ViewPager2.\r\n\r\nYou should absolutely **not ever** override `onDetachedFromRecyclerView` and not call `super.onDetachedFromRecyclerView` as all that does is cause a memory leak within `FragmentStateAdapter` as it is not able to unregister its own listeners tied to the RecyclerView.\r\n\r\n\r\n  [1]: https://developer.android.com/reference/androidx/fragment/app/FragmentStatePagerAdapter#BEHAVIOR_RESUME_ONLY_CURRENT_FRAGMENT()\r\n  [2]: https://developer.android.com/reference/androidx/viewpager2/adapter/FragmentStateAdapter.FragmentTransactionCallback#onFragmentMaxLifecyclePreUpdated(androidx.fragment.app.Fragment,androidx.lifecycle.Lifecycle.State)","title":"FragmentStateAdapter detaching and pausing fragments","body":"<p>ViewPager2 does not 'detach' fragments at all. However, it <strong>does</strong> ensure that only the current screen is <code>RESUMED</code> - other fragments are capped at the <code>STARTED</code> state (this is how individual fragments can tell if they are the currently selected screen). This mirrors the same behavior of ViewPager1 in its <a href=\"https://developer.android.com/reference/androidx/fragment/app/FragmentStatePagerAdapter#BEHAVIOR_RESUME_ONLY_CURRENT_FRAGMENT()\" rel=\"nofollow noreferrer\"><code>BEHAVIOR_RESUME_ONLY_CURRENT_FRAGMENT</code></a>. You can verify this if you are using ViewPager2 1.1 releases as it <a href=\"https://developer.android.com/reference/androidx/viewpager2/adapter/FragmentStateAdapter.FragmentTransactionCallback#onFragmentMaxLifecyclePreUpdated(androidx.fragment.app.Fragment,androidx.lifecycle.Lifecycle.State)\" rel=\"nofollow noreferrer\"><code>onFragmentMaxLifecyclePreUpdated</code></a> callback is called whenever this behavior kicks in.</p>\n<p>There's no way to turn this off or change this behavior as this is the expected behavior of ViewPager2.</p>\n<p>You should absolutely <strong>not ever</strong> override <code>onDetachedFromRecyclerView</code> and not call <code>super.onDetachedFromRecyclerView</code> as all that does is cause a memory leak within <code>FragmentStateAdapter</code> as it is not able to unregister its own listeners tied to the RecyclerView.</p>\n"}],"owner":{"account_id":10024511,"reputation":1639,"user_id":7413066,"display_name":"Ali Asjad"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":239,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1679033059,"creation_date":1679031020,"question_id":75764059,"body_markdown":"I&#39;m using a FragmentStateAdapter with a ViewPager2 in my Android app, and I&#39;ve noticed that the adapter is detaching and pausing my fragments when I swipe to a different item, even though I&#39;ve overridden the adapter&#39;s onDetachedFromRecyclerView() method to do nothing.\r\n\r\nHere&#39;s the relevant code from my adapter:\r\n\r\n    public class MyFragmentStateAdapter extends FragmentStateAdapter {\r\n    \r\n        // constructor and other methods...\r\n    \r\n        @Override\r\n        public void onDetachedFromRecyclerView(@NonNull RecyclerView recyclerView) {\r\n            // Do nothing to keep fragment&#39;s view hierarchy intact\r\n        }\r\n    }\r\n\r\nDespite this code, I&#39;m still seeing onPause() being called on my fragments when I swipe to a different item. I&#39;ve checked for other lifecycle events that might be causing the fragments to pause, and I&#39;ve also made sure that offscreenPageLimit is set to other values like 2 because I have 2 fragments. I&#39;m not sure what else could be causing the issue.\r\n\r\nAny ideas on what might be going on, or how I can prevent my fragments from being paused? Thank you!","title":"FragmentStateAdapter detaching and pausing fragments","body":"<p>I'm using a FragmentStateAdapter with a ViewPager2 in my Android app, and I've noticed that the adapter is detaching and pausing my fragments when I swipe to a different item, even though I've overridden the adapter's onDetachedFromRecyclerView() method to do nothing.</p>\n<p>Here's the relevant code from my adapter:</p>\n<pre><code>public class MyFragmentStateAdapter extends FragmentStateAdapter {\n\n    // constructor and other methods...\n\n    @Override\n    public void onDetachedFromRecyclerView(@NonNull RecyclerView recyclerView) {\n        // Do nothing to keep fragment's view hierarchy intact\n    }\n}\n</code></pre>\n<p>Despite this code, I'm still seeing onPause() being called on my fragments when I swipe to a different item. I've checked for other lifecycle events that might be causing the fragments to pause, and I've also made sure that offscreenPageLimit is set to other values like 2 because I have 2 fragments. I'm not sure what else could be causing the issue.</p>\n<p>Any ideas on what might be going on, or how I can prevent my fragments from being paused? Thank you!</p>\n"},{"tags":["java","list","arraylist"],"comments":[{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1679032993,"post_id":75763731,"comment_id":133651493,"body_markdown":"wondering what you want to achieve with the snippet?","body":"wondering what you want to achieve with the snippet?"}],"answers":[{"tags":[],"owner":{"account_id":13443115,"reputation":144,"user_id":9699791,"display_name":"CambridgeCro"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1679026879,"creation_date":1679026879,"answer_id":75763752,"question_id":75763731,"body_markdown":"You are close!\r\n\r\nTake your line:\r\n\r\n    firstGreat = candies[0];\r\n\r\nand place it before the for loop. Otherwise you keep resetting firstGreat to the first element every time the loop iterates.\r\n","title":"how to change value inside condition in for loops - Java","body":"<p>You are close!</p>\n<p>Take your line:</p>\n<pre><code>firstGreat = candies[0];\n</code></pre>\n<p>and place it before the for loop. Otherwise you keep resetting firstGreat to the first element every time the loop iterates.</p>\n"},{"tags":[],"owner":{"account_id":26485723,"reputation":11,"user_id":20124326,"display_name":"Divyanshi Gupta"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679032869,"creation_date":1679032869,"answer_id":75764207,"question_id":75763731,"body_markdown":"So, to change value inside condition for loops. Firstly, place `firstGreat = candies[0];` outside the for loop as we are assuming that first element of the candies array is the largest element.\r\nThen, what we need to do is we have to iterate the entire candies array and we will compare `firstGreat` with every element of the candies array and if we find out that the `candies[i]` is greater than firstGreat than we will put value of candies[i] in firstGreat and this way we will get the greatest element.\r\n\r\n    import java.util.*;\r\n    class HelloWorld {\r\n    public static void main(String[] args) {\r\n    int[] candies = {1, 7, 1, 8, 4, 2, 1, 1};\r\n    //List&lt;Boolean&gt; newArr = new ArrayList&lt;Boolean&gt;();\r\n    int firstGreat = candies[0];\r\n    for (int i = 0; i &lt; candies.length; i++) {\r\n        if (candies[i] &gt; firstGreat) {\r\n            //newArr.add(true);\r\n            firstGreat = candies[i];\r\n        } \r\n        //else {\r\n            //newArr.add(false);\r\n        }\r\n    }\r\n    System.out.println(firstGreat);\r\n    }}\r\n\r\nThankyou!!","title":"how to change value inside condition in for loops - Java","body":"<p>So, to change value inside condition for loops. Firstly, place <code>firstGreat = candies[0];</code> outside the for loop as we are assuming that first element of the candies array is the largest element.\nThen, what we need to do is we have to iterate the entire candies array and we will compare <code>firstGreat</code> with every element of the candies array and if we find out that the <code>candies[i]</code> is greater than firstGreat than we will put value of candies[i] in firstGreat and this way we will get the greatest element.</p>\n<pre><code>import java.util.*;\nclass HelloWorld {\npublic static void main(String[] args) {\nint[] candies = {1, 7, 1, 8, 4, 2, 1, 1};\n//List&lt;Boolean&gt; newArr = new ArrayList&lt;Boolean&gt;();\nint firstGreat = candies[0];\nfor (int i = 0; i &lt; candies.length; i++) {\n    if (candies[i] &gt; firstGreat) {\n        //newArr.add(true);\n        firstGreat = candies[i];\n    } \n    //else {\n        //newArr.add(false);\n    }\n}\nSystem.out.println(firstGreat);\n}}\n</code></pre>\n<p>Thankyou!!</p>\n"}],"owner":{"account_id":16022631,"reputation":11,"user_id":19466775,"display_name":"danny kerr"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":78,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1679060369,"accepted_answer_id":75763752,"answer_count":2,"score":-2,"last_activity_date":1679032869,"creation_date":1679026634,"question_id":75763731,"body_markdown":"im new here. i just learn java, and i still confuse, how to change the variable inside for loop when the condition are true? here&#39;s the example:\r\n\r\n     public static void main(String[] args) {\r\n            int[] candies = {1, 7, 1, 8, 4, 2, 1, 1};\r\n            List&lt;Boolean&gt; newArr = new ArrayList&lt;Boolean&gt;();\r\n            int firstGreat = 0;\r\n            for (int i = 0; i &lt; candies.length; i++) {\r\n                firstGreat = candies[0];\r\n                if (candies[i] &gt; firstGreat) {\r\n                    newArr.add(true);\r\n                    firstGreat = candies[i];\r\n                } else {\r\n                    newArr.add(false);\r\n                }\r\n            }\r\n       System.out.println(firstGreat);\r\n        }\r\n    }\r\n\r\nso i want change the firstGreat when condition are true.\r\n","title":"how to change value inside condition in for loops - Java","body":"<p>im new here. i just learn java, and i still confuse, how to change the variable inside for loop when the condition are true? here's the example:</p>\n<pre><code> public static void main(String[] args) {\n        int[] candies = {1, 7, 1, 8, 4, 2, 1, 1};\n        List&lt;Boolean&gt; newArr = new ArrayList&lt;Boolean&gt;();\n        int firstGreat = 0;\n        for (int i = 0; i &lt; candies.length; i++) {\n            firstGreat = candies[0];\n            if (candies[i] &gt; firstGreat) {\n                newArr.add(true);\n                firstGreat = candies[i];\n            } else {\n                newArr.add(false);\n            }\n        }\n   System.out.println(firstGreat);\n    }\n}\n</code></pre>\n<p>so i want change the firstGreat when condition are true.</p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":352656,"reputation":11806,"user_id":689853,"accept_rate":84,"display_name":"Harinder"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679032086,"creation_date":1679032086,"answer_id":75764139,"question_id":75764118,"body_markdown":"Java supports running a Java source file directly using the java command without compiling it explicitly using javac. This feature was introduced in JDK 11 as part of the &quot;Launch Single-File Source-Code Programs&quot;.","title":"Java Unexpected Command","body":"<p>Java supports running a Java source file directly using the java command without compiling it explicitly using javac. This feature was introduced in JDK 11 as part of the &quot;Launch Single-File Source-Code Programs&quot;.</p>\n"}],"owner":{"account_id":27044553,"reputation":31,"user_id":20598925,"display_name":"Techie"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1679032098,"answer_count":1,"score":0,"last_activity_date":1679032086,"creation_date":1679031878,"question_id":75764118,"body_markdown":"As we know that for running a Java Program we have to first compile it using **javac Main.java** Command and then we run it using **java Main** command but when I try **java Main.java** is also working without compiling the java file. How is it possible?[![enter image description here](https://i.stack.imgur.com/70ZyZ.png)](https://i.stack.imgur.com/70ZyZ.png)\r\n\r\n\r\n\r\nI expected the **java Main.java** command to give error but it is not giving any error and it is running the progam without any problem. \r\n(Use java Main.java command before compiling the file it would work)","title":"Java Unexpected Command","body":"<p>As we know that for running a Java Program we have to first compile it using <strong>javac Main.java</strong> Command and then we run it using <strong>java Main</strong> command but when I try <strong>java Main.java</strong> is also working without compiling the java file. How is it possible?<a href=\"https://i.stack.imgur.com/70ZyZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/70ZyZ.png\" alt=\"enter image description here\" /></a></p>\n<p>I expected the <strong>java Main.java</strong> command to give error but it is not giving any error and it is running the progam without any problem.\n(Use java Main.java command before compiling the file it would work)</p>\n"},{"tags":["java","exception","encryption","cryptography","javax.crypto"],"answers":[{"comments":[{"owner":{"account_id":977569,"reputation":533,"user_id":998171,"display_name":"fpacifici"},"score":1,"creation_date":1320754278,"post_id":8049995,"comment_id":9858956,"body_markdown":"so could you please post the code which tries to encrypt/decrypt ? (and check that the byte array you try to decrypt is not bigger than the block size)","body":"so could you please post the code which tries to encrypt/decrypt ? (and check that the byte array you try to decrypt is not bigger than the block size)"},{"owner":{"account_id":333509,"reputation":6596,"user_id":659417,"display_name":"Altrim"},"score":1,"creation_date":1320754501,"post_id":8049995,"comment_id":9859021,"body_markdown":"I am very new to Java and also Cryptography so I still don&#39;t know better ways to do encryption. I just want to get this one done than probably look for better ways to implement it.","body":"I am very new to Java and also Cryptography so I still don&#39;t know better ways to do encryption. I just want to get this one done than probably look for better ways to implement it."},{"owner":{"account_id":333509,"reputation":6596,"user_id":659417,"display_name":"Altrim"},"score":0,"creation_date":1320766560,"post_id":8049995,"comment_id":9863019,"body_markdown":"can you update the link because it doesn&#39;t work @fpacifici and I updated my post I included the JUnit test that tests the encryption and decryption","body":"can you update the link because it doesn&#39;t work @fpacifici and I updated my post I included the JUnit test that tests the encryption and decryption"},{"owner":{"account_id":977569,"reputation":533,"user_id":998171,"display_name":"fpacifici"},"score":0,"creation_date":1320876256,"post_id":8049995,"comment_id":9891392,"body_markdown":"Corrected (sorry copy paste error). Anyway, indeed your issue happens since you decrypt with a key which is not the same as the one used for encryption as explained by Paulo. This happens since the method annotated with @Before in junit is executed before every test method, thus regenerating the key every time. since the key is initialized randomly it will be different each time.","body":"Corrected (sorry copy paste error). Anyway, indeed your issue happens since you decrypt with a key which is not the same as the one used for encryption as explained by Paulo. This happens since the method annotated with @Before in junit is executed before every test method, thus regenerating the key every time. since the key is initialized randomly it will be different each time."}],"tags":[],"owner":{"account_id":977569,"reputation":533,"user_id":998171,"display_name":"fpacifici"},"comment_count":4,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1320876008,"creation_date":1320753441,"answer_id":8049995,"question_id":8049872,"body_markdown":"depending on the cryptography algorithm you are using, you may have to add some padding bytes at the end before encrypting a byte array so that the length of the byte array is multiple of the block size:\r\n\r\nSpecifically in your case the padding schema you chose is PKCS5 which is described here:\r\n[http://www.rsa.com/products/bsafe/documentation/cryptoj35html/doc/dev_guide/group__CJ__SYM__PAD.html][1]\r\n\r\n\r\n(I assume you have the issue when you try to encrypt)\r\n\r\nYou can choose your padding schema when you instantiate the Cipher object. Supported values depend on the security provider you are using. \r\n\r\nBy the way are you sure you want to use a symmetric encryption mechanism to encrypt passwords? Wouldn&#39;t be a one way hash better? If you really need to be able to decrypt passwords, DES is quite a weak solution, you may be interested in using something stronger like AES if you need to stay with a symmetric algorithm.\r\n\r\n\r\n  [1]: http://www.rsa.com/products/bsafe/documentation/cryptoj35html/doc/dev_guide/group__CJ__SYM__PAD.html","title":"Given final block not properly padded","body":"<p>depending on the cryptography algorithm you are using, you may have to add some padding bytes at the end before encrypting a byte array so that the length of the byte array is multiple of the block size:</p>\n\n<p>Specifically in your case the padding schema you chose is PKCS5 which is described here:\n<a href=\"http://www.rsa.com/products/bsafe/documentation/cryptoj35html/doc/dev_guide/group__CJ__SYM__PAD.html\" rel=\"nofollow\">http://www.rsa.com/products/bsafe/documentation/cryptoj35html/doc/dev_guide/group_<em>CJ</em>_SYM__PAD.html</a></p>\n\n<p>(I assume you have the issue when you try to encrypt)</p>\n\n<p>You can choose your padding schema when you instantiate the Cipher object. Supported values depend on the security provider you are using. </p>\n\n<p>By the way are you sure you want to use a symmetric encryption mechanism to encrypt passwords? Wouldn't be a one way hash better? If you really need to be able to decrypt passwords, DES is quite a weak solution, you may be interested in using something stronger like AES if you need to stay with a symmetric algorithm.</p>\n"},{"comments":[{"owner":{"account_id":4159131,"reputation":431,"user_id":3409596,"accept_rate":17,"display_name":"kenicky"},"score":1,"creation_date":1429182802,"post_id":8053459,"comment_id":47483531,"body_markdown":"I just want to confirm. I&#39;m new to encryption and this is my scenario, I&#39;m using AES encryption. in my encrypt/decrypt function, I&#39;m using an encryption key. I used a wrong encryption key in decrypt and I got this `javax.crypto.BadPaddingException: Given final block not properly padded`. Should I treat this as a wrong key?","body":"I just want to confirm. I&#39;m new to encryption and this is my scenario, I&#39;m using AES encryption. in my encrypt/decrypt function, I&#39;m using an encryption key. I used a wrong encryption key in decrypt and I got this <code>javax.crypto.BadPaddingException: Given final block not properly padded</code>. Should I treat this as a wrong key?"},{"owner":{"account_id":916980,"reputation":8820,"user_id":2580516,"display_name":"Warren Dew"},"score":0,"creation_date":1442511832,"post_id":8053459,"comment_id":53121935,"body_markdown":"Just to be clear, this can also happen when providing the wrong password for a key store file, such as a .p12 file, which is what just happened to me.","body":"Just to be clear, this can also happen when providing the wrong password for a key store file, such as a .p12 file, which is what just happened to me."},{"owner":{"account_id":295869,"reputation":73614,"user_id":600500,"accept_rate":54,"display_name":"Paŭlo Ebermann"},"score":2,"creation_date":1442524042,"post_id":8053459,"comment_id":53128528,"body_markdown":"@WarrenDew &quot;Wrong password for a key store file&quot; is just a special case of &quot;wrong key&quot;.","body":"@WarrenDew &quot;Wrong password for a key store file&quot; is just a special case of &quot;wrong key&quot;."},{"owner":{"account_id":295869,"reputation":73614,"user_id":600500,"accept_rate":54,"display_name":"Paŭlo Ebermann"},"score":0,"creation_date":1442524142,"post_id":8053459,"comment_id":53128579,"body_markdown":"@kenicky sorry, I saw your comment just now ... yes, a wrong key almost always causes this effect. (Of course, corrupted data is another possibility.)","body":"@kenicky sorry, I saw your comment just now ... yes, a wrong key almost always causes this effect. (Of course, corrupted data is another possibility.)"},{"owner":{"account_id":916980,"reputation":8820,"user_id":2580516,"display_name":"Warren Dew"},"score":0,"creation_date":1442536525,"post_id":8053459,"comment_id":53132587,"body_markdown":"@PaŭloEbermann I agree, but I don&#39;t think that&#39;s necessarily immediately obvious, since it&#39;s different than the situation in the original post where the programmer has control over the key and decryption.  I did find your answer useful enough to upvote it, though.","body":"@PaŭloEbermann I agree, but I don&#39;t think that&#39;s necessarily immediately obvious, since it&#39;s different than the situation in the original post where the programmer has control over the key and decryption.  I did find your answer useful enough to upvote it, though."},{"owner":{"account_id":1170362,"reputation":15132,"user_id":1147688,"accept_rate":53,"display_name":"not2qubit"},"score":1,"creation_date":1554210132,"post_id":8053459,"comment_id":97661375,"body_markdown":"FYI. This is also a popular error to get when you have converted an Android signing key to `PKCS12` format using *`keytool`*.","body":"FYI. This is also a popular error to get when you have converted an Android signing key to <code>PKCS12</code> format using <i><code>keytool</code></i>."},{"owner":{"account_id":4670821,"reputation":303,"user_id":3953227,"accept_rate":42,"display_name":"mvm"},"score":0,"creation_date":1588760943,"post_id":8053459,"comment_id":109020490,"body_markdown":"Is there any possibilities of using different random.generateSeed(16) for encryption and decryption. Because we got same error while decryption @PaŭloEbermann.","body":"Is there any possibilities of using different random.generateSeed(16) for encryption and decryption. Because we got same error while decryption @PaŭloEbermann."},{"owner":{"account_id":295869,"reputation":73614,"user_id":600500,"accept_rate":54,"display_name":"Paŭlo Ebermann"},"score":0,"creation_date":1588853178,"post_id":8053459,"comment_id":109062969,"body_markdown":"@mvm I have no clue what you are doing, but decryption should not depend on any randomness.","body":"@mvm I have no clue what you are doing, but decryption should not depend on any randomness."},{"owner":{"account_id":4670821,"reputation":303,"user_id":3953227,"accept_rate":42,"display_name":"mvm"},"score":0,"creation_date":1588854840,"post_id":8053459,"comment_id":109063962,"body_markdown":"I&#39;ve encrypt the pwd using random.generateSeed(16) and stored it property file. While starting the application, we are calling decryption method using different random number. That time we got this padding error. Is there any possibilities for encrypt and decrypt using different random number? @PaŭloEbermann","body":"I&#39;ve encrypt the pwd using random.generateSeed(16) and stored it property file. While starting the application, we are calling decryption method using different random number. That time we got this padding error. Is there any possibilities for encrypt and decrypt using different random number? @PaŭloEbermann"},{"owner":{"account_id":295869,"reputation":73614,"user_id":600500,"accept_rate":54,"display_name":"Paŭlo Ebermann"},"score":0,"creation_date":1588864634,"post_id":8053459,"comment_id":109070136,"body_markdown":"Encryption and decryption need to use the same key. If it would work with different (or even arbitrary) keys, the cryptosystem is broken.","body":"Encryption and decryption need to use the same key. If it would work with different (or even arbitrary) keys, the cryptosystem is broken."}],"tags":[],"owner":{"account_id":295869,"reputation":73614,"user_id":600500,"accept_rate":54,"display_name":"Paŭlo Ebermann"},"comment_count":10,"down_vote_count":0,"up_vote_count":234,"is_accepted":true,"score":234,"last_activity_date":1644691462,"creation_date":1320768533,"answer_id":8053459,"question_id":8049872,"body_markdown":"If you try to decrypt PKCS5-padded data with the wrong key, and then unpad it (which is done by the Cipher class automatically), you most likely will get the BadPaddingException (with probably of slightly less than 255/256, around 99.61%), because the padding has a special structure which is validated during unpad and very few keys would produce a valid padding.\r\n\r\n**So, if you get this exception, catch it and treat it as &quot;wrong key&quot;.**\r\n\r\nThis also can happen when you provide a wrong password, which then is used to get the key from a keystore, or which is converted into a key using a key generation function.\r\n\r\nOf course, bad padding can also happen if your data is corrupted in transport.\r\n\r\nThat said, there are some security remarks about your scheme:\r\n\r\n* For password-based encryption, you should use a SecretKeyFactory and PBEKeySpec instead of using a SecureRandom with KeyGenerator. The reason is that the SecureRandom could be a different algorithm on each Java implementation, giving you a different key. The SecretKeyFactory does the key derivation in a defined manner (and a manner which is deemed secure, if you select the right algorithm).\r\n\r\n* Don&#39;t use ECB-mode. It encrypts each block independently, which means that identical plain text blocks also give always identical ciphertext blocks.\r\n\r\n  Preferably use a secure [mode of operation][1], like CBC (Cipher block chaining) or CTR (Counter). Alternatively, use a mode which also includes authentication, like GCM (Galois-Counter mode) or CCM (Counter with CBC-MAC), see next point.\r\n\r\n* You normally don&#39;t want only confidentiality, but also authentication, which makes sure the message is not tampered with. (This also prevents chosen-ciphertext attacks on your cipher, i.e. helps for confidentiality.) So, add a MAC (message authentication code) to your message, or use a cipher mode which includes authentication (see previous point).\r\n\r\n* DES has an effective key size of only 56 bits. This key space is quite small, it can be brute-forced in some hours by a dedicated attacker. If you generate your key by a password, this will get even faster.\r\n  Also, DES has a block size of only 64 bits, which adds some more weaknesses in chaining modes.\r\n  Use a modern algorithm like AES instead, which has a block size of 128 bits, and a key size of 128 bits (for the most common variant, variants for 196 and 256 also exist).\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation","title":"Given final block not properly padded","body":"<p>If you try to decrypt PKCS5-padded data with the wrong key, and then unpad it (which is done by the Cipher class automatically), you most likely will get the BadPaddingException (with probably of slightly less than 255/256, around 99.61%), because the padding has a special structure which is validated during unpad and very few keys would produce a valid padding.</p>\n<p><strong>So, if you get this exception, catch it and treat it as &quot;wrong key&quot;.</strong></p>\n<p>This also can happen when you provide a wrong password, which then is used to get the key from a keystore, or which is converted into a key using a key generation function.</p>\n<p>Of course, bad padding can also happen if your data is corrupted in transport.</p>\n<p>That said, there are some security remarks about your scheme:</p>\n<ul>\n<li><p>For password-based encryption, you should use a SecretKeyFactory and PBEKeySpec instead of using a SecureRandom with KeyGenerator. The reason is that the SecureRandom could be a different algorithm on each Java implementation, giving you a different key. The SecretKeyFactory does the key derivation in a defined manner (and a manner which is deemed secure, if you select the right algorithm).</p>\n</li>\n<li><p>Don't use ECB-mode. It encrypts each block independently, which means that identical plain text blocks also give always identical ciphertext blocks.</p>\n<p>Preferably use a secure <a href=\"http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation\" rel=\"noreferrer\">mode of operation</a>, like CBC (Cipher block chaining) or CTR (Counter). Alternatively, use a mode which also includes authentication, like GCM (Galois-Counter mode) or CCM (Counter with CBC-MAC), see next point.</p>\n</li>\n<li><p>You normally don't want only confidentiality, but also authentication, which makes sure the message is not tampered with. (This also prevents chosen-ciphertext attacks on your cipher, i.e. helps for confidentiality.) So, add a MAC (message authentication code) to your message, or use a cipher mode which includes authentication (see previous point).</p>\n</li>\n<li><p>DES has an effective key size of only 56 bits. This key space is quite small, it can be brute-forced in some hours by a dedicated attacker. If you generate your key by a password, this will get even faster.\nAlso, DES has a block size of only 64 bits, which adds some more weaknesses in chaining modes.\nUse a modern algorithm like AES instead, which has a block size of 128 bits, and a key size of 128 bits (for the most common variant, variants for 196 and 256 also exist).</p>\n</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":4844922,"reputation":1188,"user_id":3908814,"display_name":"Bejond"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1577629556,"creation_date":1544411655,"answer_id":53699025,"question_id":8049872,"body_markdown":"I met this issue due to operation system, simple to different platform about JRE implementation. \r\n\r\n    new SecureRandom(key.getBytes())\r\n\r\nwill get the same value in Windows, while it&#39;s different in Linux. So in Linux need to be changed to\r\n\r\n\tSecureRandom secureRandom = SecureRandom.getInstance(&quot;SHA1PRNG&quot;);\r\n\tsecureRandom.setSeed(key.getBytes());\r\n\tkgen.init(128, secureRandom);\r\n\r\n&quot;SHA1PRNG&quot; is the algorithm used, you can refer [here][1] for more info about algorithms.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/technotes/guides/security/StandardNames.html#SecureRandom","title":"Given final block not properly padded","body":"<p>I met this issue due to operation system, simple to different platform about JRE implementation. </p>\n\n<pre><code>new SecureRandom(key.getBytes())\n</code></pre>\n\n<p>will get the same value in Windows, while it's different in Linux. So in Linux need to be changed to</p>\n\n<pre><code>SecureRandom secureRandom = SecureRandom.getInstance(\"SHA1PRNG\");\nsecureRandom.setSeed(key.getBytes());\nkgen.init(128, secureRandom);\n</code></pre>\n\n<p>\"SHA1PRNG\" is the algorithm used, you can refer <a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/security/StandardNames.html#SecureRandom\" rel=\"nofollow noreferrer\">here</a> for more info about algorithms.</p>\n"},{"comments":[{"owner":{"account_id":15062967,"reputation":50571,"user_id":10871073,"display_name":"Adrian Mole"},"score":0,"creation_date":1578224911,"post_id":59599380,"comment_id":105363147,"body_markdown":"This is really a comment, not an answer. With a bit more rep, [you will be able to post comments](//stackoverflow.com/privileges/comment).","body":"This is really a comment, not an answer. With a bit more rep, <a href=\"//stackoverflow.com/privileges/comment\">you will be able to post comments</a>."},{"owner":{"account_id":17250991,"reputation":3395,"user_id":12491175,"display_name":"Zig Razor"},"score":0,"creation_date":1578225187,"post_id":59599380,"comment_id":105363207,"body_markdown":"this is not an answer","body":"this is not an answer"},{"owner":{"account_id":22020302,"reputation":149,"user_id":16289216,"display_name":"Ian Rajkumar"},"score":8,"creation_date":1638421542,"post_id":59599380,"comment_id":124085127,"body_markdown":"SPOILER ALERT: This was the answer. I made a typo in one of the passwords.","body":"SPOILER ALERT: This was the answer. I made a typo in one of the passwords."},{"owner":{"account_id":5644474,"reputation":451,"user_id":4467091,"display_name":"Oleg Maksymuk"},"score":0,"creation_date":1680369646,"post_id":59599380,"comment_id":133888468,"body_markdown":"was heplful in my case, thanks a lot !","body":"was heplful in my case, thanks a lot !"}],"tags":[],"owner":{"account_id":12120229,"reputation":330,"user_id":8852057,"display_name":"Sween Wolf"},"comment_count":4,"down_vote_count":0,"up_vote_count":23,"is_accepted":false,"score":23,"last_activity_date":1578223573,"creation_date":1578223573,"answer_id":59599380,"question_id":8049872,"body_markdown":"This can also be a issue when you enter wrong password for your sign key.","title":"Given final block not properly padded","body":"<p>This can also be a issue when you enter wrong password for your sign key.</p>\n"},{"tags":[],"owner":{"account_id":14323983,"reputation":117,"user_id":10346583,"display_name":"Chethana Udatiyawalage"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1630222385,"creation_date":1630222385,"answer_id":68970796,"question_id":8049872,"body_markdown":"javax.crypto.BadPaddingException:\r\n **Given final block not properly padded.**\r\n==========================================\r\n Such issues can arise if a bad key is used during decryption.\r\n\r\nFor myself this happens when I used wrong key for decrypting.\r\nIt is always case sensitive.So make sure you have used the same key when you used when encrypting.... :) \r\n\r\n","title":"Given final block not properly padded","body":"<h1>javax.crypto.BadPaddingException:\n<strong>Given final block not properly padded.</strong></h1>\n<p>Such issues can arise if a bad key is used during decryption.</p>\n<p>For myself this happens when I used wrong key for decrypting.\nIt is always case sensitive.So make sure you have used the same key when you used when encrypting.... :)</p>\n"},{"tags":[],"owner":{"account_id":11885668,"reputation":729,"user_id":8698137,"display_name":"Shadyar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1654603922,"creation_date":1654603922,"answer_id":72531029,"question_id":8049872,"body_markdown":"If you sure all configurations are right, so that may you get this exception due to sending a null value as a ciphered to decript or a plane text to encript.","title":"Given final block not properly padded","body":"<p>If you sure all configurations are right, so that may you get this exception due to sending a null value as a ciphered to decript or a plane text to encript.</p>\n"},{"comments":[{"owner":{"account_id":2862907,"reputation":193,"user_id":2457774,"accept_rate":100,"display_name":"10101101"},"score":0,"creation_date":1695737781,"post_id":75764074,"comment_id":136062641,"body_markdown":"Thanks it helped, I was getting this warning, so recreated keystore with both passwords same and it worked :) although in properties used both key-password and key-store-password","body":"Thanks it helped, I was getting this warning, so recreated keystore with both passwords same and it worked :) although in properties used both key-password and key-store-password"}],"tags":[],"owner":{"account_id":85429,"reputation":9406,"user_id":238190,"accept_rate":71,"display_name":"emeraldhieu"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679031776,"creation_date":1679031204,"answer_id":75764074,"question_id":8049872,"body_markdown":"If you get this warning when generating a keystore\r\n\r\n```\r\nWarning:  Different store and key passwords not supported for PKCS12 KeyStores. Ignoring user-specified -keypass value.\r\nGenerating 3,072 bit RSA key pair and self-signed certificate (SHA384withRSA) with a validity of 90 days\r\n```\r\n\r\nyou may need to remove the property `secret` in your application properties file.\r\n\r\nJust these properties are enough\r\n\r\n```\r\nencrypt:\r\n  keyStore:\r\n    location: &lt;yourFileLocation&gt;\r\n    password: &lt;yourPassword&gt;\r\n    alias: &lt;yourAlias&gt;\r\n```\r\n\r\nIt works for me.","title":"Given final block not properly padded","body":"<p>If you get this warning when generating a keystore</p>\n<pre><code>Warning:  Different store and key passwords not supported for PKCS12 KeyStores. Ignoring user-specified -keypass value.\nGenerating 3,072 bit RSA key pair and self-signed certificate (SHA384withRSA) with a validity of 90 days\n</code></pre>\n<p>you may need to remove the property <code>secret</code> in your application properties file.</p>\n<p>Just these properties are enough</p>\n<pre><code>encrypt:\n  keyStore:\n    location: &lt;yourFileLocation&gt;\n    password: &lt;yourPassword&gt;\n    alias: &lt;yourAlias&gt;\n</code></pre>\n<p>It works for me.</p>\n"}],"owner":{"account_id":333509,"reputation":6596,"user_id":659417,"display_name":"Altrim"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":464639,"favorite_count":0,"down_vote_count":0,"up_vote_count":150,"accepted_answer_id":8053459,"answer_count":7,"score":150,"last_activity_date":1679031776,"creation_date":1320752738,"question_id":8049872,"body_markdown":"I am trying to implement password based encryption algorithm, but I get this exception:\r\n\r\n&gt; javax.crypto.BadPaddingException: Given final block not properly padded\r\n\r\nWhat might be the problem?\r\n\r\nHere is my code:\r\n\r\n    public class PasswordCrypter {\r\n    \r\n    \tprivate Key key;\r\n\r\n    \tpublic PasswordCrypter(String password)  {\r\n\t\t\ttry{\r\n\t\t\t    KeyGenerator generator;\r\n\t\t\t\tgenerator = KeyGenerator.getInstance(&quot;DES&quot;);\r\n\t\t\t\tSecureRandom sec = new SecureRandom(password.getBytes());\r\n\t\t\t\tgenerator.init(sec);\r\n\t\t\t\tkey = generator.generateKey();\r\n\t\t\t} catch (Exception e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \t}\r\n    \r\n    \t\r\n    \tpublic byte[] encrypt(byte[] array) throws CrypterException {\r\n    \t\ttry{\r\n    \t\t\tCipher cipher = Cipher.getInstance(&quot;DES/ECB/PKCS5Padding&quot;);\r\n    \t\t\tcipher.init(Cipher.ENCRYPT_MODE, key);\r\n    \t\t\t \r\n\t\t\t    return cipher.doFinal(array);\r\n    \t\t} catch (Exception e) {\t\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \t\treturn null;\r\n    \t}\r\n    \r\n    \tpublic byte[] decrypt(byte[] array) throws CrypterException{\r\n        \ttry{\r\n        \t\tCipher cipher = Cipher.getInstance(&quot;DES/ECB/PKCS5Padding&quot;);\r\n        \t    cipher.init(Cipher.DECRYPT_MODE, key);\r\n        \t    \r\n        \t    return cipher.doFinal(array);\r\n        \t} catch(Exception e ){\r\n        \t\te.printStackTrace();\r\n        \t}\r\n            return null;\r\n    \t}\r\n    }\r\n    \r\n    \r\n(The JUnit Test)\r\n     \r\n    public class PasswordCrypterTest {\r\n\r\n    \tprivate static final byte[] MESSAGE = &quot;Alpacas are awesome!&quot;.getBytes();\r\n    \tprivate PasswordCrypter[] passwordCrypters;\r\n    \tprivate byte[][] encryptedMessages;\r\n    \r\n    \t@Before\r\n    \tpublic void setUp() {\r\n    \t\tpasswordCrypters = new PasswordCrypter[] {\r\n    \t\t\tnew PasswordCrypter(&quot;passwd&quot;),\r\n    \t\t\tnew PasswordCrypter(&quot;passwd&quot;),\r\n    \t\t\tnew PasswordCrypter(&quot;otherPasswd&quot;)\r\n    \t\t};\r\n    \r\n    \t\tencryptedMessages = new byte[passwordCrypters.length][];\r\n    \t\tfor (int i = 0; i &lt; passwordCrypters.length; i++) {\r\n    \t\t\tencryptedMessages[i] = passwordCrypters[i].encrypt(MESSAGE);\r\n    \t\t}\r\n    \t}\r\n    \r\n    \t@Test\r\n    \tpublic void testEncrypt() {\r\n    \t\tfor (byte[] encryptedMessage : encryptedMessages) {\r\n    \t\t\tassertFalse(Arrays.equals(MESSAGE, encryptedMessage));\r\n    \t\t}\r\n    \r\n    \t\tassertFalse(Arrays.equals(encryptedMessages[0], encryptedMessages[2]));\r\n    \t\tassertFalse(Arrays.equals(encryptedMessages[1], encryptedMessages[2]));\r\n    \t}\r\n    \r\n    \t@Test\r\n    \tpublic void testDecrypt() {\r\n    \t\tfor (int i = 0; i &lt; passwordCrypters.length; i++) {\r\n    \t\t\tassertArrayEquals(MESSAGE, passwordCrypters[i].decrypt(encryptedMessages[i]));\r\n    \t\t}\r\n    \r\n    \t\tassertArrayEquals(MESSAGE, passwordCrypters[0].decrypt(encryptedMessages[1]));\r\n    \t\tassertArrayEquals(MESSAGE, passwordCrypters[1].decrypt(encryptedMessages[0]));\r\n    \r\n    \t\ttry {\r\n    \t\t\tassertFalse(Arrays.equals(MESSAGE, passwordCrypters[0].decrypt(encryptedMessages[2])));\r\n    \t\t} catch (CrypterException e) {\r\n    \t\t\t// Anything goes as long as the above statement is not true.\r\n    \t\t}\r\n    \r\n    \t\ttry {\r\n    \t\t\tassertFalse(Arrays.equals(MESSAGE, passwordCrypters[2].decrypt(encryptedMessages[1])));\r\n    \t\t} catch (CrypterException e) {\r\n    \t\t\t// Anything goes as long as the above statement is not true.\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\n\r\n","title":"Given final block not properly padded","body":"<p>I am trying to implement password based encryption algorithm, but I get this exception:</p>\n\n<blockquote>\n  <p>javax.crypto.BadPaddingException: Given final block not properly padded</p>\n</blockquote>\n\n<p>What might be the problem?</p>\n\n<p>Here is my code:</p>\n\n<pre><code>public class PasswordCrypter {\n\n    private Key key;\n\n    public PasswordCrypter(String password)  {\n        try{\n            KeyGenerator generator;\n            generator = KeyGenerator.getInstance(\"DES\");\n            SecureRandom sec = new SecureRandom(password.getBytes());\n            generator.init(sec);\n            key = generator.generateKey();\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n\n\n    public byte[] encrypt(byte[] array) throws CrypterException {\n        try{\n            Cipher cipher = Cipher.getInstance(\"DES/ECB/PKCS5Padding\");\n            cipher.init(Cipher.ENCRYPT_MODE, key);\n\n            return cipher.doFinal(array);\n        } catch (Exception e) { \n            e.printStackTrace();\n        }\n        return null;\n    }\n\n    public byte[] decrypt(byte[] array) throws CrypterException{\n        try{\n            Cipher cipher = Cipher.getInstance(\"DES/ECB/PKCS5Padding\");\n            cipher.init(Cipher.DECRYPT_MODE, key);\n\n            return cipher.doFinal(array);\n        } catch(Exception e ){\n            e.printStackTrace();\n        }\n        return null;\n    }\n}\n</code></pre>\n\n<p>(The JUnit Test)</p>\n\n<pre><code>public class PasswordCrypterTest {\n\n    private static final byte[] MESSAGE = \"Alpacas are awesome!\".getBytes();\n    private PasswordCrypter[] passwordCrypters;\n    private byte[][] encryptedMessages;\n\n    @Before\n    public void setUp() {\n        passwordCrypters = new PasswordCrypter[] {\n            new PasswordCrypter(\"passwd\"),\n            new PasswordCrypter(\"passwd\"),\n            new PasswordCrypter(\"otherPasswd\")\n        };\n\n        encryptedMessages = new byte[passwordCrypters.length][];\n        for (int i = 0; i &lt; passwordCrypters.length; i++) {\n            encryptedMessages[i] = passwordCrypters[i].encrypt(MESSAGE);\n        }\n    }\n\n    @Test\n    public void testEncrypt() {\n        for (byte[] encryptedMessage : encryptedMessages) {\n            assertFalse(Arrays.equals(MESSAGE, encryptedMessage));\n        }\n\n        assertFalse(Arrays.equals(encryptedMessages[0], encryptedMessages[2]));\n        assertFalse(Arrays.equals(encryptedMessages[1], encryptedMessages[2]));\n    }\n\n    @Test\n    public void testDecrypt() {\n        for (int i = 0; i &lt; passwordCrypters.length; i++) {\n            assertArrayEquals(MESSAGE, passwordCrypters[i].decrypt(encryptedMessages[i]));\n        }\n\n        assertArrayEquals(MESSAGE, passwordCrypters[0].decrypt(encryptedMessages[1]));\n        assertArrayEquals(MESSAGE, passwordCrypters[1].decrypt(encryptedMessages[0]));\n\n        try {\n            assertFalse(Arrays.equals(MESSAGE, passwordCrypters[0].decrypt(encryptedMessages[2])));\n        } catch (CrypterException e) {\n            // Anything goes as long as the above statement is not true.\n        }\n\n        try {\n            assertFalse(Arrays.equals(MESSAGE, passwordCrypters[2].decrypt(encryptedMessages[1])));\n        } catch (CrypterException e) {\n            // Anything goes as long as the above statement is not true.\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","generics","arraylist","implementation"],"comments":[{"owner":{"account_id":4354234,"reputation":845,"user_id":3553434,"display_name":"alalalala"},"score":1,"creation_date":1679030749,"post_id":75763990,"comment_id":133651210,"body_markdown":"1.you are correct;\n2.for compatibility with previous code, rawtypes are allowed","body":"1.you are correct; 2.for compatibility with previous code, rawtypes are allowed"},{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1679030841,"post_id":75763990,"comment_id":133651218,"body_markdown":"Your assumption is mostly correct. As for *why* they did not implement something, [you should clarify what you mean by &quot;why&quot;](https://meta.stackoverflow.com/q/293815/5133585).","body":"Your assumption is mostly correct. As for <i>why</i> they did not implement something, <a href=\"https://meta.stackoverflow.com/q/293815/5133585\">you should clarify what you mean by &quot;why&quot;</a>."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1679064665,"post_id":75763990,"comment_id":133659089,"body_markdown":"Add this line to the code: `char foo = Names.get(1).charAt (2);`. You should get a `ClassCastException`.  When generics were added to Java (version 5, year 2004), how generics were implemented conflicted with how arrays were implemented. The result was, if an array was allowed to be generic, there would be a loophole that would allow an element of a different type to be put into the array. Accessing the element where the incorrect type was would result in a `ClassCastException`. To prevent this, it was forbidden to create a generic array. So, why is this loophole still allowed?","body":"Add this line to the code: <code>char foo = Names.get(1).charAt (2);</code>. You should get a <code>ClassCastException</code>.  When generics were added to Java (version 5, year 2004), how generics were implemented conflicted with how arrays were implemented. The result was, if an array was allowed to be generic, there would be a loophole that would allow an element of a different type to be put into the array. Accessing the element where the incorrect type was would result in a <code>ClassCastException</code>. To prevent this, it was forbidden to create a generic array. So, why is this loophole still allowed?"}],"answers":[{"tags":[],"owner":{"account_id":352656,"reputation":11806,"user_id":689853,"accept_rate":84,"display_name":"Harinder"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1679030831,"creation_date":1679030831,"answer_id":75764038,"question_id":75763990,"body_markdown":"Java allows adding an `int` to a `List&lt;String&gt;` due to the way generics are implemented in the language. Generics in Java are implemented through type erasure, which means that the type information is erased at runtime and not available for runtime checks.\r\n\r\nIn other words, at runtime, a `List&lt;String&gt;` and a `List&lt;Integer&gt;` are both just List objects. This allows for greater compatibility between different versions of Java that might have different types of List objects. However, it also means that the compiler can&#39;t always catch type errors at compile-time.\r\n\r\nTo address this issue, Java provides some level of type checking at compile-time through the use of bounded type parameters and wildcards. By specifying a type parameter with an upper bound, such as `List&lt;? extends Number&gt;`, you can restrict the types that can be added to the list. This helps catch errors at compile-time and prevents type errors at runtime.\r\n\r\nHowever, it&#39;s worth noting that even with these restrictions, it&#39;s still possible to cast objects to different types in Java, which can lead to runtime errors. This is why it&#39;s important to always use generics and type checking whenever possible to avoid errors and ensure code correctness.","title":"Why java allowed adding an int to a List&lt;String&gt;? Why generics are not implemented strictly at compile time and runtime both?","body":"<p>Java allows adding an <code>int</code> to a <code>List&lt;String&gt;</code> due to the way generics are implemented in the language. Generics in Java are implemented through type erasure, which means that the type information is erased at runtime and not available for runtime checks.</p>\n<p>In other words, at runtime, a <code>List&lt;String&gt;</code> and a <code>List&lt;Integer&gt;</code> are both just List objects. This allows for greater compatibility between different versions of Java that might have different types of List objects. However, it also means that the compiler can't always catch type errors at compile-time.</p>\n<p>To address this issue, Java provides some level of type checking at compile-time through the use of bounded type parameters and wildcards. By specifying a type parameter with an upper bound, such as <code>List&lt;? extends Number&gt;</code>, you can restrict the types that can be added to the list. This helps catch errors at compile-time and prevents type errors at runtime.</p>\n<p>However, it's worth noting that even with these restrictions, it's still possible to cast objects to different types in Java, which can lead to runtime errors. This is why it's important to always use generics and type checking whenever possible to avoid errors and ensure code correctness.</p>\n"}],"owner":{"account_id":19610713,"reputation":25,"user_id":17801533,"display_name":"Prakarsh Pathak"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":86,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"closed_date":1679030846,"accepted_answer_id":75764038,"answer_count":1,"score":2,"last_activity_date":1679030831,"creation_date":1679030332,"question_id":75763990,"body_markdown":"I am new to generics, and I came across this experiment. \r\n\r\n\r\n```\r\nimport java.util.List;\r\nimport java.util.ArrayList;\r\npublic class Main {\r\n    private static void addIntegerToNames(List listOfNames, Integer i) {\r\n        listOfNames.add(i);\r\n    }\r\n    public static void main(String[] args) {\r\n        List&lt;String&gt; Names = new ArrayList&lt;String&gt;();\r\n        Names.add(&quot;stackOverFlow&quot;);\r\n        addIntegerToNames(Names, 100);\r\n        System.out.println(Names);\r\n    }\r\n}\r\n\r\nOutput : [stackOverFlow, 100]\r\n```\r\nThe compiler does not throw an error while adding an integer to listOfNames because it sees that listOfNames is a list of objects. When this goes at runtime, it still doesn&#39;t throw an error, My assumption is that at runtime, &quot;Names&quot; is a List of Objects, because generics are only implemented at compile time. \r\n\r\n\r\n\r\nI have two follow up questions. \r\n1. Is my assumption correct? \r\n2. Why did java not implemented generics strictly both at compile time and runtime ? Does the current implementation of generics not make Java more error-prone? Was it a tradeoff between performance and safety?","title":"Why java allowed adding an int to a List&lt;String&gt;? Why generics are not implemented strictly at compile time and runtime both?","body":"<p>I am new to generics, and I came across this experiment.</p>\n<pre><code>import java.util.List;\nimport java.util.ArrayList;\npublic class Main {\n    private static void addIntegerToNames(List listOfNames, Integer i) {\n        listOfNames.add(i);\n    }\n    public static void main(String[] args) {\n        List&lt;String&gt; Names = new ArrayList&lt;String&gt;();\n        Names.add(&quot;stackOverFlow&quot;);\n        addIntegerToNames(Names, 100);\n        System.out.println(Names);\n    }\n}\n\nOutput : [stackOverFlow, 100]\n</code></pre>\n<p>The compiler does not throw an error while adding an integer to listOfNames because it sees that listOfNames is a list of objects. When this goes at runtime, it still doesn't throw an error, My assumption is that at runtime, &quot;Names&quot; is a List of Objects, because generics are only implemented at compile time.</p>\n<p>I have two follow up questions.</p>\n<ol>\n<li>Is my assumption correct?</li>\n<li>Why did java not implemented generics strictly both at compile time and runtime ? Does the current implementation of generics not make Java more error-prone? Was it a tradeoff between performance and safety?</li>\n</ol>\n"},{"tags":["java","spring-boot","opencv","rtsp"],"comments":[{"owner":{"account_id":24783875,"reputation":6014,"user_id":18667225,"display_name":"Markus"},"score":0,"creation_date":1679038535,"post_id":75764020,"comment_id":133652461,"body_markdown":"Did you check both answers to this question: https://stackoverflow.com/q/44901028/18667225 ?","body":"Did you check both answers to this question: <a href=\"https://stackoverflow.com/q/44901028/18667225\">stackoverflow.com/q/44901028/18667225</a> ?"}],"owner":{"account_id":28039012,"reputation":1,"user_id":21416866,"display_name":"Mohan raj"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":112,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679030677,"creation_date":1679030677,"question_id":75764020,"body_markdown":"Below the code i&#39;m trying to use to stream live video.Mp4 video is opening but live stream is not opening receiving content is false.please guide me\r\n\r\n// My code\r\n\r\n```\r\nimport org.opencv.videoio.VideoCapture;\r\npublic class TestDemo {\r\npublic static void main(String s[]) {\r\nnu.pattern.OpenCV.loadLocally();\r\nVideoCapture capture = new VideoCapture();\r\nboolean flag = capture.open(&quot;rtsp://admin:admin:xxxxxxx&quot;);//here i&#39;m using cctv url\r\nSystem.out.println(flag);\r\n}\r\n}\r\n\r\nmaven dependency\r\n&lt;dependency&gt;\r\n&lt;groupId&gt;org.openpnp&lt;/groupId&gt;\r\n&lt;artifactId&gt;opencv&lt;/artifactId&gt;\r\n&lt;version&gt;3.4.2-0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n&lt;groupId&gt;nu.pattern&lt;/groupId&gt;\r\n&lt;artifactId&gt;opencv&lt;/artifactId&gt;\r\n&lt;version&gt;2.4.9-4&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```","title":"Read a video using RTSP","body":"<p>Below the code i'm trying to use to stream live video.Mp4 video is opening but live stream is not opening receiving content is false.please guide me</p>\n<p>// My code</p>\n<pre><code>import org.opencv.videoio.VideoCapture;\npublic class TestDemo {\npublic static void main(String s[]) {\nnu.pattern.OpenCV.loadLocally();\nVideoCapture capture = new VideoCapture();\nboolean flag = capture.open(&quot;rtsp://admin:admin:xxxxxxx&quot;);//here i'm using cctv url\nSystem.out.println(flag);\n}\n}\n\nmaven dependency\n&lt;dependency&gt;\n&lt;groupId&gt;org.openpnp&lt;/groupId&gt;\n&lt;artifactId&gt;opencv&lt;/artifactId&gt;\n&lt;version&gt;3.4.2-0&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n&lt;groupId&gt;nu.pattern&lt;/groupId&gt;\n&lt;artifactId&gt;opencv&lt;/artifactId&gt;\n&lt;version&gt;2.4.9-4&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":["java","swing","user-interface","layout","null-layout-manager"],"comments":[{"owner":{"account_id":114128,"reputation":50467,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":1,"creation_date":1663784541,"post_id":73805137,"comment_id":130323235,"body_markdown":"You extend a JFrame and create a separate, different JFrame in the main method.  Oracle has a helpful tutorial, [Creating a GUI With Swing](https://docs.oracle.com/javase/tutorial/uiswing/index.html).  Skip the Learning Swing with the NetBeans IDE section.  Pay particular attention to the [Laying Out Components Within a Container](https://docs.oracle.com/javase/tutorial/uiswing/layout/index.html) section.","body":"You extend a JFrame and create a separate, different JFrame in the main method.  Oracle has a helpful tutorial, <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/index.html\" rel=\"nofollow noreferrer\">Creating a GUI With Swing</a>.  Skip the Learning Swing with the NetBeans IDE section.  Pay particular attention to the <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/layout/index.html\" rel=\"nofollow noreferrer\">Laying Out Components Within a Container</a> section."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":1,"creation_date":1663785049,"post_id":73805137,"comment_id":130323404,"body_markdown":"**Don&#39;t use a null layout** and `setBounds(...)`. Swing was designed to be used with layout managers. All the examples from the above links in the Swing tutorial will demonstrate how to use layout managers. Class names should start with a capital letter. Learn and follow Java naming conventions to avoid confusion.","body":"<b>Don&#39;t use a null layout</b> and <code>setBounds(...)</code>. Swing was designed to be used with layout managers. All the examples from the above links in the Swing tutorial will demonstrate how to use layout managers. Class names should start with a capital letter. Learn and follow Java naming conventions to avoid confusion."}],"answers":[{"comments":[{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":3,"creation_date":1663785893,"post_id":73805405,"comment_id":130323658,"body_markdown":"(1-) Although this may work it is a poor example to build on. and breaks so many Swing coding practices. 1) a class should NOT extend JFrame and then create a JFrame. It should only create the frame in the main() method. 2) class names should start with an upper case character 3) don&#39;t use a null layout and setBounds() 4) don&#39;t use static variables for Swing components. The Swing tutorial provided far better examples to use as a starting point.","body":"(1-) Although this may work it is a poor example to build on. and breaks so many Swing coding practices. 1) a class should NOT extend JFrame and then create a JFrame. It should only create the frame in the main() method. 2) class names should start with an upper case character 3) don&#39;t use a null layout and setBounds() 4) don&#39;t use static variables for Swing components. The Swing tutorial provided far better examples to use as a starting point."},{"owner":{"account_id":19487517,"reputation":34,"user_id":14314448,"display_name":"Bala Yokesh"},"score":0,"creation_date":1663861008,"post_id":73805405,"comment_id":130343995,"body_markdown":"@camickr I have edited my answer as per your suggestions.  But I am wondering why shouldn&#39;t we use null layout manager with setBounds().  Also why should we create frame only in `main()` method.  Let me know if my answer still doesn&#39;t follow best practices.","body":"@camickr I have edited my answer as per your suggestions.  But I am wondering why shouldn&#39;t we use null layout manager with setBounds().  Also why should we create frame only in <code>main()</code> method.  Let me know if my answer still doesn&#39;t follow best practices."},{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":2,"creation_date":1663861891,"post_id":73805405,"comment_id":130344311,"body_markdown":"_I am wondering why shouldn&#39;t_ don&#39;t wonder, instead do some research (f.i. starting with the reference in the other answer ;) And please delete the incorrect example, future readers might get confused seeing both","body":"<i>I am wondering why shouldn&#39;t</i> don&#39;t wonder, instead do some research (f.i. starting with the reference in the other answer ;) And please delete the incorrect example, future readers might get confused seeing both"}],"tags":[],"owner":{"account_id":19487517,"reputation":34,"user_id":14314448,"display_name":"Bala Yokesh"},"comment_count":3,"down_vote_count":3,"up_vote_count":1,"is_accepted":true,"score":-2,"last_activity_date":1679029193,"creation_date":1663784947,"answer_id":73805405,"question_id":73805137,"body_markdown":"I have edited your code like below to make it display the button\r\n```\r\nimport javax.swing.*;\r\n\r\npublic class Test {\r\n\r\n    public Test() {   \r\n        JFrame f = new JFrame(); \r\n        JButton b1 = new JButton(&quot;b1&quot;);\r\n        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n        f.setLayout(null);\r\n        f.setSize(925, 500);\r\n        f.setVisible(true);\r\n        b1.setBounds(0, 0, 125,100); \r\n        f.add(b1); \r\n    }\r\n\r\n    public static void main(String[] args) {    \r\n        new Test();\r\n    }\r\n\r\n}\r\n```\r\n ","title":"Can&#39;t display button","body":"<p>I have edited your code like below to make it display the button</p>\n<pre><code>import javax.swing.*;\n\npublic class Test {\n\n    public Test() {   \n        JFrame f = new JFrame(); \n        JButton b1 = new JButton(&quot;b1&quot;);\n        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        f.setLayout(null);\n        f.setSize(925, 500);\n        f.setVisible(true);\n        b1.setBounds(0, 0, 125,100); \n        f.add(b1); \n    }\n\n    public static void main(String[] args) {    \n        new Test();\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1663795462,"creation_date":1663795462,"answer_id":73807077,"question_id":73805137,"body_markdown":"Your code has several problems, including:\r\n* Your class extends JFrame: There&#39;s no reason to extend a class if you&#39;re not changing the innate behavior of that class, in other words, if you&#39;re not overriding methods of the class. \r\n* Also, extending JFrame forces your code to create JFrames, and that limits the flexibility of the code, since sometimes you will want to use the same GUI code in other ways, such as nested within another JFrame or JPanel or in a dialog window such as a JDialog or JOptionPane.\r\n* Even though you extend JFrame in your &quot;test&quot; class, you *never* create an instance of this class, your main method has no call to `new test()`, and so that JFrame class, while defined, is never utilized.\r\n* You are using `setBounds(...)` to artificially place a component in your Swing GUI. For this to work, you would need to change the container&#39;s layout (here the &quot;test&quot; JFrame) to null, something that you don&#39;t do.\r\n* Also, while null layouts and `setBounds()` might seem to Swing newbies like the easiest and best way to create complex GUI&#39;s, the more Swing GUI&#39;S you create the more serious difficulties you will run into when using them. They won&#39;t resize your components when the GUI resizes, they are a royal witch to enhance or maintain, they fail completely when placed in scrollpanes, they look gawd-awful when viewed on all platforms or screen resolutions that are different from the original one.\r\n* You are calling `setSize(...)` on the JFrame that you do create, artificially constraining your top-level window (the JFrame) to some size, a size that may not be optimal for that GUI on all platforms.\r\n\r\nInstead, I suggest that you:\r\n* Don&#39;t extend JFrame, don&#39;t extend anything unless needed, and in that situation, you would usually extend a JPanel and not a JFrame. You would usually do this when you desire to override one of the JPanel&#39;s methods such as its `paintComponent(Graphics g)` method to allow it to paint an image or drawing on it.\r\n* Nest JPanels each using its own layout manager. This will require that you first learn about how to use the Swing layout managers: [Layout Manager Tutorial](http://docs.oracle.com/javase/tutorial/uiswing/layout/index.html)\r\n* If you do need to create a larger GUI, then override the `public Dimension getPreferredSize()` method in a smart way. \r\n* Create your JFrame, just as you are doing, in the main method\r\n* But do so in a Swing thread-safe way, on the Swing event thread, using `SwingUtilities.invokeLater(...)`.\r\n* Study and learn from the Swing tutorials. You can find links to the Swing tutorials and to other Swing resources here: [Swing Info](https://stackoverflow.com/tags/swing/info).\r\n* Ignore Bala Yokesh Mani&#39;s suggestions and code. While he may mean well, he is offering bad examples, I&#39;m afraid.\r\n* Avoid over-use of static fields and methods (as incorrectly shown in Bala Yokesh Mani&#39;s code) and instead do most work in the instance (non-static) domain. \r\n* Learn and use [Java naming conventions](http://en.wikipedia.org/wiki/Naming_convention_(programming)#Java). Variable names should all begin with a lower letter while class names with an upper case letter. Learning this and following this will allow us to better understand your code, and would allow you to better understand the code of others.\r\n\r\nFor example, your code could look something like:\r\n\r\n```\r\nimport java.awt.BorderLayout;\r\nimport java.awt.Dimension;\r\nimport java.awt.FlowLayout;\r\nimport javax.swing.*;\r\n\r\n@SuppressWarnings(&quot;serial&quot;)\r\n// not really needed to extend JPanel here, but doing it\r\n// for simplicity&#39;s sake\r\npublic class TestPanel1 extends JPanel {\r\n    public static final int PREF_W = 640;\r\n    public static final int PREF_H = 480;\r\n    private JButton button1 = new JButton(&quot;B1&quot;);\r\n    \r\n    public TestPanel1() {\r\n        JPanel topPanel = new JPanel(new FlowLayout(FlowLayout.LEADING));\r\n        topPanel.add(button1);\r\n        \r\n        // this is not the cleanest way to do this, but it is simple:\r\n        setPreferredSize(new Dimension(PREF_W, PREF_H));\r\n        \r\n        setLayout(new BorderLayout());\r\n        add(topPanel, BorderLayout.PAGE_START);        \r\n    }\r\n    \r\n    public static void main(String[] args) {\r\n        // use SwingUtilities to start the GUI on the event thread\r\n        SwingUtilities.invokeLater(() -&gt; {\r\n            // create instance of our class\r\n            TestPanel1 mainPanel = new TestPanel1();\r\n\r\n            // create JFrame\r\n            JFrame frame = new JFrame(&quot;Test 1&quot;);\r\n            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n            \r\n            // add our instance to the JFrame\r\n            frame.add(mainPanel);\r\n            \r\n            // pack the JFrame to activate layouts and to \r\n            // set sizes of all components and containers\r\n            frame.pack();\r\n            frame.setLocationRelativeTo(null);\r\n            frame.setVisible(true);\r\n        });\r\n    }\r\n\r\n}\r\n```\r\n\r\nThen later if you wanted to add a background image, you could do so easily: \r\n\r\n[![enter image description here][1]][1]\r\n\r\n```\r\nimport java.awt.BorderLayout;\r\nimport java.awt.Dimension;\r\nimport java.awt.FlowLayout;\r\nimport java.awt.Graphics;\r\nimport java.awt.image.BufferedImage;\r\nimport java.io.IOException;\r\nimport java.net.URL;\r\nimport javax.imageio.ImageIO;\r\nimport javax.swing.*;\r\n\r\n@SuppressWarnings(&quot;serial&quot;)\r\npublic class TestPanel2 extends JPanel {\r\n    public static final String IMG_PATH = &quot;https://upload.wikimedia.org/&quot;\r\n            + &quot;wikipedia/commons/thumb/e/ef/&quot;\r\n            + &quot;Mesurupetala%2C_dragonfly%2C_Late_Late_Jurassic%2C_Tithonian_Age&quot;\r\n            + &quot;%2C_Solnhofen_Lithographic_Limestone%2C_Solnhofen%2C_Bavaria&quot;\r\n            + &quot;%2C_Germany_-_Houston_Museum_of_Natural_Science_-_DSC01817.JPG/&quot;\r\n            + &quot;640px-thumbnail.jpg&quot;;\r\n    private JButton button1 = new JButton(&quot;B1&quot;);\r\n    private BufferedImage backgroundImg = null;\r\n    \r\n    public TestPanel2(BufferedImage bkgImg) {\r\n        this.backgroundImg = bkgImg;\r\n        \r\n        JPanel topPanel = new JPanel(new FlowLayout(FlowLayout.LEADING));\r\n        topPanel.setOpaque(false);\r\n        topPanel.add(button1);\r\n        \r\n        setLayout(new BorderLayout());\r\n        add(topPanel, BorderLayout.PAGE_START);        \r\n    }\r\n    \r\n    @Override\r\n    public Dimension getPreferredSize() {\r\n        Dimension originalSize = super.getPreferredSize();\r\n        \r\n        if (backgroundImg != null) {\r\n            int w = Math.max(backgroundImg.getWidth(), originalSize.width);\r\n            int h = Math.max(backgroundImg.getHeight(), originalSize.height);\r\n            return new Dimension(w, h);\r\n        } else {\r\n            return super.getPreferredSize();\r\n        }\r\n    }\r\n    \r\n    @Override\r\n    protected void paintComponent(Graphics g) {\r\n        super.paintComponent(g);\r\n        if (backgroundImg != null) {\r\n            g.drawImage(backgroundImg, 0, 0, null);\r\n        }\r\n    }\r\n    \r\n    public static void main(String[] args) {\r\n        SwingUtilities.invokeLater(() -&gt; {\r\n            BufferedImage img = null;\r\n            try {\r\n                URL imgUrl = new URL(IMG_PATH);\r\n                img = ImageIO.read(imgUrl);\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n                System.exit(-1);\r\n            }\r\n            \r\n            TestPanel2 mainPanel = new TestPanel2(img);\r\n\r\n            JFrame frame = new JFrame(&quot;Test&quot;);\r\n            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n            frame.add(mainPanel);\r\n            frame.pack();\r\n            frame.setLocationRelativeTo(null);\r\n            frame.setVisible(true);\r\n        });\r\n    }\r\n}\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ZlJmP.jpg","title":"Can&#39;t display button","body":"<p>Your code has several problems, including:</p>\n<ul>\n<li>Your class extends JFrame: There's no reason to extend a class if you're not changing the innate behavior of that class, in other words, if you're not overriding methods of the class.</li>\n<li>Also, extending JFrame forces your code to create JFrames, and that limits the flexibility of the code, since sometimes you will want to use the same GUI code in other ways, such as nested within another JFrame or JPanel or in a dialog window such as a JDialog or JOptionPane.</li>\n<li>Even though you extend JFrame in your &quot;test&quot; class, you <em>never</em> create an instance of this class, your main method has no call to <code>new test()</code>, and so that JFrame class, while defined, is never utilized.</li>\n<li>You are using <code>setBounds(...)</code> to artificially place a component in your Swing GUI. For this to work, you would need to change the container's layout (here the &quot;test&quot; JFrame) to null, something that you don't do.</li>\n<li>Also, while null layouts and <code>setBounds()</code> might seem to Swing newbies like the easiest and best way to create complex GUI's, the more Swing GUI'S you create the more serious difficulties you will run into when using them. They won't resize your components when the GUI resizes, they are a royal witch to enhance or maintain, they fail completely when placed in scrollpanes, they look gawd-awful when viewed on all platforms or screen resolutions that are different from the original one.</li>\n<li>You are calling <code>setSize(...)</code> on the JFrame that you do create, artificially constraining your top-level window (the JFrame) to some size, a size that may not be optimal for that GUI on all platforms.</li>\n</ul>\n<p>Instead, I suggest that you:</p>\n<ul>\n<li>Don't extend JFrame, don't extend anything unless needed, and in that situation, you would usually extend a JPanel and not a JFrame. You would usually do this when you desire to override one of the JPanel's methods such as its <code>paintComponent(Graphics g)</code> method to allow it to paint an image or drawing on it.</li>\n<li>Nest JPanels each using its own layout manager. This will require that you first learn about how to use the Swing layout managers: <a href=\"http://docs.oracle.com/javase/tutorial/uiswing/layout/index.html\" rel=\"nofollow noreferrer\">Layout Manager Tutorial</a></li>\n<li>If you do need to create a larger GUI, then override the <code>public Dimension getPreferredSize()</code> method in a smart way.</li>\n<li>Create your JFrame, just as you are doing, in the main method</li>\n<li>But do so in a Swing thread-safe way, on the Swing event thread, using <code>SwingUtilities.invokeLater(...)</code>.</li>\n<li>Study and learn from the Swing tutorials. You can find links to the Swing tutorials and to other Swing resources here: <a href=\"https://stackoverflow.com/tags/swing/info\">Swing Info</a>.</li>\n<li>Ignore Bala Yokesh Mani's suggestions and code. While he may mean well, he is offering bad examples, I'm afraid.</li>\n<li>Avoid over-use of static fields and methods (as incorrectly shown in Bala Yokesh Mani's code) and instead do most work in the instance (non-static) domain.</li>\n<li>Learn and use <a href=\"http://en.wikipedia.org/wiki/Naming_convention_(programming)#Java\" rel=\"nofollow noreferrer\">Java naming conventions</a>. Variable names should all begin with a lower letter while class names with an upper case letter. Learning this and following this will allow us to better understand your code, and would allow you to better understand the code of others.</li>\n</ul>\n<p>For example, your code could look something like:</p>\n<pre><code>import java.awt.BorderLayout;\nimport java.awt.Dimension;\nimport java.awt.FlowLayout;\nimport javax.swing.*;\n\n@SuppressWarnings(&quot;serial&quot;)\n// not really needed to extend JPanel here, but doing it\n// for simplicity's sake\npublic class TestPanel1 extends JPanel {\n    public static final int PREF_W = 640;\n    public static final int PREF_H = 480;\n    private JButton button1 = new JButton(&quot;B1&quot;);\n    \n    public TestPanel1() {\n        JPanel topPanel = new JPanel(new FlowLayout(FlowLayout.LEADING));\n        topPanel.add(button1);\n        \n        // this is not the cleanest way to do this, but it is simple:\n        setPreferredSize(new Dimension(PREF_W, PREF_H));\n        \n        setLayout(new BorderLayout());\n        add(topPanel, BorderLayout.PAGE_START);        \n    }\n    \n    public static void main(String[] args) {\n        // use SwingUtilities to start the GUI on the event thread\n        SwingUtilities.invokeLater(() -&gt; {\n            // create instance of our class\n            TestPanel1 mainPanel = new TestPanel1();\n\n            // create JFrame\n            JFrame frame = new JFrame(&quot;Test 1&quot;);\n            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n            \n            // add our instance to the JFrame\n            frame.add(mainPanel);\n            \n            // pack the JFrame to activate layouts and to \n            // set sizes of all components and containers\n            frame.pack();\n            frame.setLocationRelativeTo(null);\n            frame.setVisible(true);\n        });\n    }\n\n}\n</code></pre>\n<p>Then later if you wanted to add a background image, you could do so easily:</p>\n<p><a href=\"https://i.stack.imgur.com/ZlJmP.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZlJmP.jpg\" alt=\"enter image description here\" /></a></p>\n<pre><code>import java.awt.BorderLayout;\nimport java.awt.Dimension;\nimport java.awt.FlowLayout;\nimport java.awt.Graphics;\nimport java.awt.image.BufferedImage;\nimport java.io.IOException;\nimport java.net.URL;\nimport javax.imageio.ImageIO;\nimport javax.swing.*;\n\n@SuppressWarnings(&quot;serial&quot;)\npublic class TestPanel2 extends JPanel {\n    public static final String IMG_PATH = &quot;https://upload.wikimedia.org/&quot;\n            + &quot;wikipedia/commons/thumb/e/ef/&quot;\n            + &quot;Mesurupetala%2C_dragonfly%2C_Late_Late_Jurassic%2C_Tithonian_Age&quot;\n            + &quot;%2C_Solnhofen_Lithographic_Limestone%2C_Solnhofen%2C_Bavaria&quot;\n            + &quot;%2C_Germany_-_Houston_Museum_of_Natural_Science_-_DSC01817.JPG/&quot;\n            + &quot;640px-thumbnail.jpg&quot;;\n    private JButton button1 = new JButton(&quot;B1&quot;);\n    private BufferedImage backgroundImg = null;\n    \n    public TestPanel2(BufferedImage bkgImg) {\n        this.backgroundImg = bkgImg;\n        \n        JPanel topPanel = new JPanel(new FlowLayout(FlowLayout.LEADING));\n        topPanel.setOpaque(false);\n        topPanel.add(button1);\n        \n        setLayout(new BorderLayout());\n        add(topPanel, BorderLayout.PAGE_START);        \n    }\n    \n    @Override\n    public Dimension getPreferredSize() {\n        Dimension originalSize = super.getPreferredSize();\n        \n        if (backgroundImg != null) {\n            int w = Math.max(backgroundImg.getWidth(), originalSize.width);\n            int h = Math.max(backgroundImg.getHeight(), originalSize.height);\n            return new Dimension(w, h);\n        } else {\n            return super.getPreferredSize();\n        }\n    }\n    \n    @Override\n    protected void paintComponent(Graphics g) {\n        super.paintComponent(g);\n        if (backgroundImg != null) {\n            g.drawImage(backgroundImg, 0, 0, null);\n        }\n    }\n    \n    public static void main(String[] args) {\n        SwingUtilities.invokeLater(() -&gt; {\n            BufferedImage img = null;\n            try {\n                URL imgUrl = new URL(IMG_PATH);\n                img = ImageIO.read(imgUrl);\n            } catch (IOException e) {\n                e.printStackTrace();\n                System.exit(-1);\n            }\n            \n            TestPanel2 mainPanel = new TestPanel2(img);\n\n            JFrame frame = new JFrame(&quot;Test&quot;);\n            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n            frame.add(mainPanel);\n            frame.pack();\n            frame.setLocationRelativeTo(null);\n            frame.setVisible(true);\n        });\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":26404927,"reputation":1,"user_id":20054856,"display_name":"Naofumi"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":72,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":73805405,"answer_count":2,"score":-2,"last_activity_date":1679029193,"creation_date":1663783255,"question_id":73805137,"body_markdown":"I can&#39;t display button and i don&#39;t know why\r\nIs there any way to fix it\r\n\r\nI want it to appear at the top in the far left\r\n\r\n```\r\nimport java.awt.event.*;\r\nimport java.awt.*;\r\n\r\nimport javax.swing.*;\r\n\r\npublic class test extends JFrame{\r\n\r\n\tJButton b1 = new JButton(&quot;b1&quot;);\r\n\t\r\n\tpublic test() {\r\n\t\t\r\n\t\tb1.setBounds(0, 0, 125,100);\r\n\t\t\r\n\t\tadd(b1);\r\n\t\t\r\n\t}\r\n\r\n    public static void main(String[] args) {\r\n            \r\n        JFrame f = new JFrame();\r\n        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n        f.setLayout(null);\r\n        f.setSize(925, 500);\r\n        f.setVisible(true);\r\n\r\n    }\r\n\r\n}\r\n```\r\n","title":"Can&#39;t display button","body":"<p>I can't display button and i don't know why\nIs there any way to fix it</p>\n<p>I want it to appear at the top in the far left</p>\n<pre><code>import java.awt.event.*;\nimport java.awt.*;\n\nimport javax.swing.*;\n\npublic class test extends JFrame{\n\n    JButton b1 = new JButton(&quot;b1&quot;);\n    \n    public test() {\n        \n        b1.setBounds(0, 0, 125,100);\n        \n        add(b1);\n        \n    }\n\n    public static void main(String[] args) {\n            \n        JFrame f = new JFrame();\n        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        f.setLayout(null);\n        f.setSize(925, 500);\n        f.setVisible(true);\n\n    }\n\n}\n</code></pre>\n"},{"tags":["java","docker","heap-memory"],"answers":[{"tags":[],"owner":{"account_id":93866,"reputation":76253,"user_id":256618,"display_name":"Mark O&#39;Connor"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1430244064,"creation_date":1430244064,"answer_id":29926693,"question_id":29923531,"body_markdown":"It all depends how your Java application is packaged and how it&#39;s configuration files are exposed using Docker.\r\n\r\nFor example the [official tomcat image][1] states that the configuration file is available in the default location: /usr/local/tomcat/conf/\r\n\r\nSo easy to override entire directory or just one configuration file:\r\n\r\n    docker run -it --rm -p 8080:8080 -v $PWD/catalina.properties:/usr/local/tomcat/conf/catalina.properties tomcat:8.0\r\n\r\n  [1]: https://registry.hub.docker.com/_/tomcat/\r\n","title":"How to set Java heap size (Xms/Xmx) inside Docker container?","body":"<p>It all depends how your Java application is packaged and how it's configuration files are exposed using Docker.</p>\n\n<p>For example the <a href=\"https://registry.hub.docker.com/_/tomcat/\" rel=\"noreferrer\">official tomcat image</a> states that the configuration file is available in the default location: /usr/local/tomcat/conf/</p>\n\n<p>So easy to override entire directory or just one configuration file:</p>\n\n<pre><code>docker run -it --rm -p 8080:8080 -v $PWD/catalina.properties:/usr/local/tomcat/conf/catalina.properties tomcat:8.0\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3043386,"reputation":4957,"user_id":2579786,"display_name":"jbarrueta"},"comment_count":0,"down_vote_count":0,"up_vote_count":49,"is_accepted":true,"score":49,"last_activity_date":1481729336,"creation_date":1430244876,"answer_id":29926938,"question_id":29923531,"body_markdown":"I agree that it depends on what container you&#39;re using. If you are using the official [Tomcat image][1], it looks like it&#39;s simple enough, you will need to pass the `JAVA_OPTS` environment variable with your heap settings:\r\n\r\n    docker run --rm -e JAVA_OPTS=&#39;-Xmx1g&#39; tomcat\r\n\r\nSee [How to set JVM parameters?][2]\r\n\r\n  [1]: https://registry.hub.docker.com/_/tomcat/\r\n  [2]: https://github.com/docker-library/tomcat/issues/8","title":"How to set Java heap size (Xms/Xmx) inside Docker container?","body":"<p>I agree that it depends on what container you're using. If you are using the official <a href=\"https://registry.hub.docker.com/_/tomcat/\" rel=\"noreferrer\">Tomcat image</a>, it looks like it's simple enough, you will need to pass the <code>JAVA_OPTS</code> environment variable with your heap settings:</p>\n\n<pre><code>docker run --rm -e JAVA_OPTS='-Xmx1g' tomcat\n</code></pre>\n\n<p>See <a href=\"https://github.com/docker-library/tomcat/issues/8\" rel=\"noreferrer\">How to set JVM parameters?</a></p>\n"},{"comments":[{"owner":{"account_id":407817,"reputation":2467,"user_id":778109,"accept_rate":36,"display_name":"Garreth McDaid"},"score":0,"creation_date":1492162175,"post_id":36139281,"comment_id":73876798,"body_markdown":"I&#39;m pretty sure that setting a JAVA_OPTS environment variable will only work in the official Tomcat image. It may not work if you&#39;ve created your own Tomcat image (eg by using Ubuntu base and installing Tomcat as part of build)","body":"I&#39;m pretty sure that setting a JAVA_OPTS environment variable will only work in the official Tomcat image. It may not work if you&#39;ve created your own Tomcat image (eg by using Ubuntu base and installing Tomcat as part of build)"}],"tags":[],"owner":{"account_id":485203,"reputation":5363,"user_id":901376,"accept_rate":84,"display_name":"occasl"},"comment_count":1,"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1458586284,"creation_date":1458586284,"answer_id":36139281,"question_id":29923531,"body_markdown":"You can also just place those settings in your image so something like the following would exist in your Dockerfile:\r\n\r\n    ENV JAVA_OPTS=&quot;-XX:PermSize=1024m -XX:MaxPermSize=512m&quot;","title":"How to set Java heap size (Xms/Xmx) inside Docker container?","body":"<p>You can also just place those settings in your image so something like the following would exist in your Dockerfile:</p>\n\n<pre><code>ENV JAVA_OPTS=\"-XX:PermSize=1024m -XX:MaxPermSize=512m\"\n</code></pre>\n"},{"comments":[{"owner":{"account_id":329133,"reputation":1055,"user_id":652487,"accept_rate":97,"display_name":"Trevor Rudolph"},"score":1,"creation_date":1555604413,"post_id":39137276,"comment_id":98176927,"body_markdown":"setting CATALINA_OPTS is a bad idea, it can blow away a lot of other options set by default in the container","body":"setting CATALINA_OPTS is a bad idea, it can blow away a lot of other options set by default in the container"},{"owner":{"account_id":887475,"reputation":3622,"user_id":926568,"accept_rate":100,"display_name":"deviant"},"score":8,"creation_date":1580985290,"post_id":39137276,"comment_id":106281363,"body_markdown":"1 year later i actually realized that JVM_OPTS does nothing for my project (got OOM) :)\nwhat really works is _JAVA_OPTIONS","body":"1 year later i actually realized that JVM_OPTS does nothing for my project (got OOM) :) what really works is _JAVA_OPTIONS"},{"owner":{"account_id":1230912,"reputation":8474,"user_id":1195527,"accept_rate":79,"display_name":"Vlad Schnakovszki"},"score":1,"creation_date":1615369535,"post_id":39137276,"comment_id":117667040,"body_markdown":"JVM_OPTS didn&#39;t work for me either but _JAVA_OPTIONS did. Thanks both!","body":"JVM_OPTS didn&#39;t work for me either but _JAVA_OPTIONS did. Thanks both!"}],"tags":[],"owner":{"account_id":8529,"reputation":35006,"user_id":15441,"accept_rate":92,"display_name":"hawkeye"},"comment_count":3,"down_vote_count":1,"up_vote_count":58,"is_accepted":false,"score":57,"last_activity_date":1472102752,"creation_date":1472102752,"answer_id":39137276,"question_id":29923531,"body_markdown":"Note that in a `docker-compose.yml` file - you&#39;ll need to leave out the double-quotes:\r\n\r\n      environment:\r\n      - JVM_OPTS=-Xmx12g -Xms12g -XX:MaxPermSize=1024m\r\n\r\nor\r\n\r\n      environment:\r\n      - CATALINA_OPTS=-Xmx12g -Xms12g -XX:MaxPermSize=1024m","title":"How to set Java heap size (Xms/Xmx) inside Docker container?","body":"<p>Note that in a <code>docker-compose.yml</code> file - you'll need to leave out the double-quotes:</p>\n\n<pre><code>  environment:\n  - JVM_OPTS=-Xmx12g -Xms12g -XX:MaxPermSize=1024m\n</code></pre>\n\n<p>or</p>\n\n<pre><code>  environment:\n  - CATALINA_OPTS=-Xmx12g -Xms12g -XX:MaxPermSize=1024m\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4069343,"reputation":362,"user_id":3343055,"display_name":"emilanov"},"score":0,"creation_date":1655371400,"post_id":60040271,"comment_id":128318640,"body_markdown":"Do you maybe know why some environments use `_JAVA_OPTIONS`? This is the one that worked for me, while `JAVA_OPTS` or `JVM_OPTS` didn&#39;t work.","body":"Do you maybe know why some environments use <code>_JAVA_OPTIONS</code>? This is the one that worked for me, while <code>JAVA_OPTS</code> or <code>JVM_OPTS</code> didn&#39;t work."}],"tags":[],"owner":{"account_id":11961472,"reputation":149,"user_id":8752403,"display_name":"Riswan chatholi"},"comment_count":1,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1580736635,"creation_date":1580736635,"answer_id":60040271,"question_id":29923531,"body_markdown":"you can do it by specifying java options environment in docker compose file \r\n\r\n    env: \r\n      - name: _JAVA_OPTIONS\r\n        value: &quot;-Xmx1g&quot;\r\n\r\nit will change the heap size.","title":"How to set Java heap size (Xms/Xmx) inside Docker container?","body":"<p>you can do it by specifying java options environment in docker compose file </p>\n\n<pre><code>env: \n  - name: _JAVA_OPTIONS\n    value: \"-Xmx1g\"\n</code></pre>\n\n<p>it will change the heap size.</p>\n"},{"comments":[{"owner":{"account_id":15328195,"reputation":2461,"user_id":11058704,"display_name":"RamPrakash"},"score":0,"creation_date":1655071840,"post_id":65327769,"comment_id":128237426,"body_markdown":"This is really great info","body":"This is really great info"},{"owner":{"account_id":2771244,"reputation":11224,"user_id":2385808,"accept_rate":62,"display_name":"Fritz Duchardt"},"score":1,"creation_date":1655106195,"post_id":65327769,"comment_id":128242655,"body_markdown":"Please keep in mind that this mechanism was broken again with cgroups v2 and was fixed with JVM version 15: https://bugs.openjdk.org/browse/JDK-8230305","body":"Please keep in mind that this mechanism was broken again with cgroups v2 and was fixed with JVM version 15: <a href=\"https://bugs.openjdk.org/browse/JDK-8230305\" rel=\"nofollow noreferrer\">bugs.openjdk.org/browse/JDK-8230305</a>"},{"owner":{"account_id":15328195,"reputation":2461,"user_id":11058704,"display_name":"RamPrakash"},"score":0,"creation_date":1655128404,"post_id":65327769,"comment_id":128250757,"body_markdown":"Thank you sir. you saved my time again. It did not work for me. With 17, it works just great. Please answer this info as part of this question. So that i could accept and you could help others.\nhttps://stackoverflow.com/questions/72596403/java-heap-inside-docker-container","body":"Thank you sir. you saved my time again. It did not work for me. With 17, it works just great. Please answer this info as part of this question. So that i could accept and you could help others. <a href=\"https://stackoverflow.com/questions/72596403/java-heap-inside-docker-container\" title=\"java heap inside docker container\">stackoverflow.com/questions/72596403/&hellip;</a>"},{"owner":{"account_id":2771244,"reputation":11224,"user_id":2385808,"accept_rate":62,"display_name":"Fritz Duchardt"},"score":0,"creation_date":1655193660,"post_id":65327769,"comment_id":128267642,"body_markdown":"You are welcome - answered your question thread.","body":"You are welcome - answered your question thread."}],"tags":[],"owner":{"account_id":2771244,"reputation":11224,"user_id":2385808,"accept_rate":62,"display_name":"Fritz Duchardt"},"comment_count":4,"down_vote_count":0,"up_vote_count":39,"is_accepted":false,"score":39,"last_activity_date":1608137984,"creation_date":1608137984,"answer_id":65327769,"question_id":29923531,"body_markdown":"**Update:** Regarding this discussion, Java has upped there game regarding container support. Nowadays (or since JVM version 10 to be more exact), **the JVM is smart enough to figure out whether it is running in a container, and if yes, how much memory it is limited to.**\r\n\r\nSo, rather than setting fixed limits when starting your JVM, which you then have to change in line with changes to your container limits (resource limits in the K8s world), simply **do nothing and let the JVM work out limits for itself**. \r\n\r\nWithout any extra configuration, the JVM will set the maximum heap size to **25% of the allocated memory**. Since this is frugal, you might want to ramp that up a bit by setting the `-XX:MaxRAMPercentage` attribute. Also, there is `-XX:InitialRAMPercentage` for initial heap size and `-XX:MinRAMPercentage` for containers with less than 96MB RAM.\r\n\r\n**For more information** on the topic, [here][1] is an excellent overview.\r\n\r\n\r\n  [1]: https://merikan.com/2019/04/jvm-in-a-container/#java-10","title":"How to set Java heap size (Xms/Xmx) inside Docker container?","body":"<p><strong>Update:</strong> Regarding this discussion, Java has upped there game regarding container support. Nowadays (or since JVM version 10 to be more exact), <strong>the JVM is smart enough to figure out whether it is running in a container, and if yes, how much memory it is limited to.</strong></p>\n<p>So, rather than setting fixed limits when starting your JVM, which you then have to change in line with changes to your container limits (resource limits in the K8s world), simply <strong>do nothing and let the JVM work out limits for itself</strong>.</p>\n<p>Without any extra configuration, the JVM will set the maximum heap size to <strong>25% of the allocated memory</strong>. Since this is frugal, you might want to ramp that up a bit by setting the <code>-XX:MaxRAMPercentage</code> attribute. Also, there is <code>-XX:InitialRAMPercentage</code> for initial heap size and <code>-XX:MinRAMPercentage</code> for containers with less than 96MB RAM.</p>\n<p><strong>For more information</strong> on the topic, <a href=\"https://merikan.com/2019/04/jvm-in-a-container/#java-10\" rel=\"noreferrer\">here</a> is an excellent overview.</p>\n"},{"tags":[],"owner":{"account_id":1180483,"reputation":3616,"user_id":1155514,"display_name":"Muhammad Tariq"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679029084,"creation_date":1679029084,"answer_id":75763905,"question_id":29923531,"body_markdown":"You can set the `Xms` and `Xmx` values in the **dockerfile** using the following way as well.\r\n\r\n```\r\nENTRYPOINT [&quot;java&quot;, &quot;-Xms128M &quot;, &quot;-Xmx256M&quot;, &quot;-jar&quot;, &quot;your-precious-service-1.0.0.jar&quot;]\r\n```\r\n\r\nYou can also *ignore* the `Xms` value and just set the `Xmx` value.\r\n\r\n```\r\nENTRYPOINT [&quot;java&quot;, &quot;-Xmx256M&quot;, &quot;-jar&quot;, &quot;your-precious-service-1.0.0.jar&quot;] \r\n```\r\n\r\nFor more info please read : https://akobor.me/posts/heap-size-and-resource-limits-in-kubernetes-for-jvm-applications","title":"How to set Java heap size (Xms/Xmx) inside Docker container?","body":"<p>You can set the <code>Xms</code> and <code>Xmx</code> values in the <strong>dockerfile</strong> using the following way as well.</p>\n<pre><code>ENTRYPOINT [&quot;java&quot;, &quot;-Xms128M &quot;, &quot;-Xmx256M&quot;, &quot;-jar&quot;, &quot;your-precious-service-1.0.0.jar&quot;]\n</code></pre>\n<p>You can also <em>ignore</em> the <code>Xms</code> value and just set the <code>Xmx</code> value.</p>\n<pre><code>ENTRYPOINT [&quot;java&quot;, &quot;-Xmx256M&quot;, &quot;-jar&quot;, &quot;your-precious-service-1.0.0.jar&quot;] \n</code></pre>\n<p>For more info please read : <a href=\"https://akobor.me/posts/heap-size-and-resource-limits-in-kubernetes-for-jvm-applications\" rel=\"nofollow noreferrer\">https://akobor.me/posts/heap-size-and-resource-limits-in-kubernetes-for-jvm-applications</a></p>\n"}],"owner":{"account_id":1496613,"reputation":1884,"user_id":1402390,"accept_rate":100,"display_name":"Tung Nguyen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":131110,"favorite_count":0,"down_vote_count":0,"up_vote_count":58,"accepted_answer_id":29926938,"answer_count":7,"score":58,"last_activity_date":1679029084,"creation_date":1430234752,"question_id":29923531,"body_markdown":"As of raising this question, Docker looks to be new enough to not have answers to this question on the net. The only place I found is [this article][1] in which the author is saying it is hard, and that&#39;s it.\r\n\r\n\r\n  [1]: http://blog.takipi.com/ignore-the-hype-5-docker-misconceptions-java-developers-should-consider/","title":"How to set Java heap size (Xms/Xmx) inside Docker container?","body":"<p>As of raising this question, Docker looks to be new enough to not have answers to this question on the net. The only place I found is <a href=\"http://blog.takipi.com/ignore-the-hype-5-docker-misconceptions-java-developers-should-consider/\">this article</a> in which the author is saying it is hard, and that's it.</p>\n"},{"tags":["java","android","android-fragments","navigation-drawer"],"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":1,"creation_date":1678791043,"post_id":75732116,"comment_id":133597973,"body_markdown":"I fixed the formatting in your post. Please don&#39;t use blockquotes for code. Indent your code by four spaces instead, so that it&#39;s displayed properly. See [here](https://stackoverflow.com/editing-help) for more info on formatting. Also, next time please indent your code appropriately so it&#39;s more readable. And finally, you&#39;re not supposed to dump your entire code in the question. You should post a [example], instead.","body":"I fixed the formatting in your post. Please don&#39;t use blockquotes for code. Indent your code by four spaces instead, so that it&#39;s displayed properly. See <a href=\"https://stackoverflow.com/editing-help\">here</a> for more info on formatting. Also, next time please indent your code appropriately so it&#39;s more readable. And finally, you&#39;re not supposed to dump your entire code in the question. You should post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, instead."},{"owner":{"account_id":27552120,"reputation":3,"user_id":21026982,"display_name":"Θεοφανης Γιαννακοπουλος"},"score":0,"creation_date":1678801469,"post_id":75732116,"comment_id":133600916,"body_markdown":"Ty very much sorry i am new to this","body":"Ty very much sorry i am new to this"}],"answers":[{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1679491882,"post_id":75763797,"comment_id":133731304,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/75763797/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":25651444,"reputation":1,"user_id":19418613,"display_name":"Maruf Hasan"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679027867,"creation_date":1679027649,"answer_id":75763797,"question_id":75732116,"body_markdown":"if (id == R.id.nav_home) {\r\n                setFragement(new \r\n                CategoryFragment());      \r\n  drawer.closeDrawer(GravityCompat.START);\r\n\r\n                return true;\r\n            }","title":"Drawer doesn&#39;t close after i pick an option","body":"<p>if (id == R.id.nav_home) {\nsetFragement(new\nCategoryFragment());<br />\ndrawer.closeDrawer(GravityCompat.START);</p>\n<pre><code>            return true;\n        }\n</code></pre>\n"}],"owner":{"account_id":27552120,"reputation":3,"user_id":21026982,"display_name":"Θεοφανης Γιαννακοπουλος"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1679027867,"creation_date":1678790620,"question_id":75732116,"body_markdown":"The Drawer open and fuction correctly. When i pick an option its change to the correct fragemnt but the drawer stays open. How cani fix it?\r\n\r\nMy MainActivity\r\n\r\n    package com.example.duolingo;\r\n    \r\n    import static com.example.duolingo.R.id.nav_host_fragment_content_main;\r\n    \r\n    import android.os.Bundle;\r\n    import android.util.Log;\r\n    import android.view.MenuItem;\r\n    import android.widget.FrameLayout;\r\n    import android.widget.TextView;\r\n    \r\n    import androidx.annotation.NonNull;\r\n    import androidx.appcompat.app.AppCompatActivity;\r\n    import androidx.core.view.GravityCompat;\r\n    import androidx.drawerlayout.widget.DrawerLayout;\r\n    import androidx.fragment.app.Fragment;\r\n    import androidx.fragment.app.FragmentTransaction;\r\n    import androidx.navigation.NavController;\r\n    import androidx.navigation.Navigation;\r\n    import androidx.navigation.ui.AppBarConfiguration;\r\n    import androidx.navigation.ui.NavigationUI;\r\n    \r\n    import com.example.duolingo.databinding.ActivityMainBinding;\r\n    import com.google.android.material.bottomnavigation.BottomNavigationView;\r\n    import com.google.android.material.navigation.NavigationView;\r\n    \r\n    import java.util.Locale;\r\n    \r\n    \r\n    public class MainActivity extends AppCompatActivity implements NavigationView.OnNavigationItemSelectedListener  {\r\n    \r\n    \tprivate AppBarConfiguration mAppBarConfiguration;\r\n    \tprivate ActivityMainBinding binding;\r\n    \tprivate FrameLayout main_frame;\r\n    \tprivate TextView drawerProfileName, drawerProfileText;\r\n    \r\n    \tprivate BottomNavigationView bottomNavigationView;\r\n    \tprivate BottomNavigationView.OnNavigationItemSelectedListener onNavigationItemSelectedListener=\r\n    \t\tnew BottomNavigationView.OnNavigationItemSelectedListener() {\r\n    \t\t\t@Override\r\n    \t\t\t\tpublic boolean onNavigationItemSelected(@NonNull MenuItem menuItem) {\r\n    \r\n    \t\t\t\t\tswitch (menuItem.getItemId())\r\n    \t\t\t\t\t{\r\n    \t\t\t\t\t\tcase R.id.nav_home:\r\n    \t\t\t\t\t\t\tsetFragement(new CategoryFragment());\r\n    \t\t\t\t\t\t\treturn true;\r\n    \r\n    \t\t\t\t\t\tcase R.id.nav_leaderboard:\r\n    \t\t\t\t\t\t\tsetFragement(new LeaderBoardFragment());\r\n    \t\t\t\t\t\t\treturn true;\r\n    \r\n    \t\t\t\t\t\tcase R.id.nav_account:\r\n    \t\t\t\t\t\t\tsetFragement(new AccountFragment());\r\n    \t\t\t\t\t\t\treturn true;\r\n    \r\n    \r\n    \t\t\t\t\t}\r\n    \t\t\t\t\treturn false;\r\n    \t\t\t\t}\r\n    \t\t};\r\n    \r\n    \t@Override\r\n    \t\tprotected void onCreate(Bundle savedInstanceState) {\r\n    \t\t\tsuper.onCreate(savedInstanceState);\r\n    \r\n    \r\n    \r\n    \t\t\tbinding = ActivityMainBinding.inflate(getLayoutInflater());\r\n    \t\t\tsetContentView(binding.getRoot());\r\n    \r\n    \t\t\tsetSupportActionBar(binding.appBarMain.toolbar);\r\n    \r\n    \t\t\tbottomNavigationView=findViewById(R.id.bottom_nav_bar);\r\n    \t\t\tmain_frame= findViewById(R.id.main_frame);\r\n    \r\n    \t\t\tbottomNavigationView.setOnNavigationItemSelectedListener(onNavigationItemSelectedListener);\r\n    \r\n    \r\n    \t\t\tDrawerLayout drawer = binding.drawerLayout;\r\n    \t\t\tNavigationView navigationView = binding.navView;\r\n    \t\t\tPassing each menu ID as a set of Ids because each\r\n    \t\t\t\tmenu should be considered as top level destinations.\r\n    \t\t\t\tmAppBarConfiguration = new AppBarConfiguration.Builder(\r\n    \t\t\t\t\t\tR.id.nav_home, R.id.nav_gallery, R.id.nav_slideshow)\r\n    \t\t\t\tstack overflow\r\n    \t\t\t\t.setDrawerLayout(drawer)\r\n    \t\t\t\t.build();\r\n    \r\n    \r\n    \t\t\tdrawerProfileName = navigationView.getHeaderView(0).findViewById(R.id.nav_drawer_name);\r\n    \t\t\tdrawerProfileText = navigationView.getHeaderView(0).findViewById(R.id.nav_drawer_text_img);\r\n    \r\n    \t\t\tString name = DbQuery.myProfile.getName();\r\n    \t\t\tdrawerProfileName.setText(name);\r\n    \r\n    \t\t\tdrawerProfileText.setText(name.toUpperCase(Locale.ROOT).substring(0,1));\r\n    \r\n    \t\t\tsetFragement(new CategoryFragment());\r\n    \r\n    \t\t\tNavController navController = Navigation.findNavController(this, nav_host_fragment_content_main);\r\n    \t\t\tNavigationUI.setupActionBarWithNavController(this, navController, mAppBarConfiguration);\r\n    \t\t\tNavigationUI.setupWithNavController(navigationView, navController);\r\n    \r\n    \t\t\tnavigationView.setNavigationItemSelectedListener(this);\r\n    \r\n    \t\t}\r\n    \r\n    \tprivate void setFragement(Fragment fragement)\r\n    \t{\r\n    \t\tFragmentTransaction transaction = getSupportFragmentManager().beginTransaction();\r\n    \t\ttransaction.replace(main_frame.getId(),fragement);\r\n    \t\ttransaction.commit();\r\n    \r\n    \t}\r\n    \r\n    \t@Override\r\n    \t\tpublic boolean onSupportNavigateUp() {\r\n    \t\t\tNavController navController = Navigation.findNavController(this, nav_host_fragment_content_main);\r\n    \t\t\treturn NavigationUI.navigateUp(navController, mAppBarConfiguration)\r\n    \t\t\t\tsuper.onSupportNavigateUp();\r\n    \t\t}\r\n    \r\n    \r\n    \t@Override\r\n    \t\tpublic boolean onNavigationItemSelected(@NonNull MenuItem menuItem) {\r\n    \r\n    \t\t\tLog.d(&quot;edo&quot;,&quot;mphka1&quot;);\r\n    \t\t\tint id = menuItem.getItemId();\r\n    \t\t\tif (id == R.id.nav_home) {\r\n    \t\t\t\tsetFragement(new CategoryFragment());\r\n    \t\t\t\treturn true;\r\n    \t\t\t}\r\n    \t\t\telse if (id == R.id.nav_leaderboard) {\r\n    \t\t\t\tHandle the gallery action\r\n    \t\t\t\t\tsetFragement(new LeaderBoardFragment());\r\n    \t\t\t\treturn true;\r\n    \r\n    \t\t\t}\r\n    \t\t\telse if (id == R.id.nav_account) {\r\n    \t\t\t\tHandle the slideshow action\r\n    \t\t\t\t\tsetFragement(new AccountFragment());\r\n    \t\t\t\treturn true;\r\n    \r\n    \t\t\t}\r\n    \r\n    \r\n    \r\n    \t\t\tDrawerLayout drawer = binding.drawerLayout;\r\n    \t\t\tdrawer.closeDrawer(GravityCompat.START);\r\n    \r\n    \t\t\treturn true;\r\n    \t\t}\r\n    \r\n    \t@Override\r\n    \t\tpublic void onPointerCaptureChanged(boolean hasCapture) {\r\n    \t\t\tsuper.onPointerCaptureChanged(hasCapture);\r\n    \t\t}\r\n    }\r\n\r\nThe content_main\r\n\r\n     &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n     &lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n     xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n     xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n     android:layout_width=&quot;match_parent&quot;\r\n     android:layout_height=&quot;match_parent&quot;\r\n     android:background=&quot;@drawable/main_background&quot;\r\n     app:layout_behavior=&quot;@string/appbar_scrolling_view_behavior&quot;\r\n     tools:showIn=&quot;@layout/app_bar_main&quot;&gt;\r\n     \r\n     \r\n         &lt;fragment\r\n     android:id=&quot;@+id/nav_host_fragment_content_main&quot;\r\n     android:name=&quot;androidx.navigation.fragment.NavHostFragment&quot;\r\n     android:layout_width=&quot;match_parent&quot;\r\n     android:layout_height=&quot;match_parent&quot;\r\n     app:defaultNavHost=&quot;true&quot;\r\n     app:layout_constraintLeft_toLeftOf=&quot;parent&quot;\r\n     app:layout_constraintRight_toRightOf=&quot;parent&quot;\r\n     app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n     app:navGraph=&quot;@navigation/mobile_navigation&quot; /&gt;\r\n     \r\n         &lt;com.google.android.material.bottomnavigation.BottomNavigationView\r\n     android:id=&quot;@+id/bottom_nav_bar&quot;\r\n     android:layout_width=&quot;0dp&quot;\r\n     android:layout_height=&quot;wrap_content&quot;\r\n     android:background=&quot;?android:attr/windowBackground&quot;\r\n     app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n     app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n     app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n     app:menu=&quot;@menu/bottom_menu&quot;&gt;\r\n     \r\n         &lt;/com.google.android.material.bottomnavigation.BottomNavigationView&gt;\r\n     \r\n         &lt;FrameLayout\r\n     android:id=&quot;@+id/main_frame&quot;\r\n     android:layout_width=&quot;0dp&quot;\r\n     android:layout_height=&quot;0dp&quot;\r\n     app:layout_constraintBottom_toTopOf=&quot;@+id/bottom_nav_bar&quot;\r\n     app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n     app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n     app:layout_constraintTop_toTopOf=&quot;parent&quot;&gt;\r\n     \r\n         &lt;/FrameLayout&gt;\r\n     \r\n     &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n\r\nIf i click the home page the drawer closes. In my opinion is because of the fragment in the content_main.\r\n\r\nAre those two lines correct?\r\n\r\n    DrawerLayout drawer = binding.drawerLayout;\r\n    drawer.closeDrawer(GravityCompat.START);\r\n\r\n","title":"Drawer doesn&#39;t close after i pick an option","body":"<p>The Drawer open and fuction correctly. When i pick an option its change to the correct fragemnt but the drawer stays open. How cani fix it?</p>\n<p>My MainActivity</p>\n<pre><code>package com.example.duolingo;\n\nimport static com.example.duolingo.R.id.nav_host_fragment_content_main;\n\nimport android.os.Bundle;\nimport android.util.Log;\nimport android.view.MenuItem;\nimport android.widget.FrameLayout;\nimport android.widget.TextView;\n\nimport androidx.annotation.NonNull;\nimport androidx.appcompat.app.AppCompatActivity;\nimport androidx.core.view.GravityCompat;\nimport androidx.drawerlayout.widget.DrawerLayout;\nimport androidx.fragment.app.Fragment;\nimport androidx.fragment.app.FragmentTransaction;\nimport androidx.navigation.NavController;\nimport androidx.navigation.Navigation;\nimport androidx.navigation.ui.AppBarConfiguration;\nimport androidx.navigation.ui.NavigationUI;\n\nimport com.example.duolingo.databinding.ActivityMainBinding;\nimport com.google.android.material.bottomnavigation.BottomNavigationView;\nimport com.google.android.material.navigation.NavigationView;\n\nimport java.util.Locale;\n\n\npublic class MainActivity extends AppCompatActivity implements NavigationView.OnNavigationItemSelectedListener  {\n\n    private AppBarConfiguration mAppBarConfiguration;\n    private ActivityMainBinding binding;\n    private FrameLayout main_frame;\n    private TextView drawerProfileName, drawerProfileText;\n\n    private BottomNavigationView bottomNavigationView;\n    private BottomNavigationView.OnNavigationItemSelectedListener onNavigationItemSelectedListener=\n        new BottomNavigationView.OnNavigationItemSelectedListener() {\n            @Override\n                public boolean onNavigationItemSelected(@NonNull MenuItem menuItem) {\n\n                    switch (menuItem.getItemId())\n                    {\n                        case R.id.nav_home:\n                            setFragement(new CategoryFragment());\n                            return true;\n\n                        case R.id.nav_leaderboard:\n                            setFragement(new LeaderBoardFragment());\n                            return true;\n\n                        case R.id.nav_account:\n                            setFragement(new AccountFragment());\n                            return true;\n\n\n                    }\n                    return false;\n                }\n        };\n\n    @Override\n        protected void onCreate(Bundle savedInstanceState) {\n            super.onCreate(savedInstanceState);\n\n\n\n            binding = ActivityMainBinding.inflate(getLayoutInflater());\n            setContentView(binding.getRoot());\n\n            setSupportActionBar(binding.appBarMain.toolbar);\n\n            bottomNavigationView=findViewById(R.id.bottom_nav_bar);\n            main_frame= findViewById(R.id.main_frame);\n\n            bottomNavigationView.setOnNavigationItemSelectedListener(onNavigationItemSelectedListener);\n\n\n            DrawerLayout drawer = binding.drawerLayout;\n            NavigationView navigationView = binding.navView;\n            Passing each menu ID as a set of Ids because each\n                menu should be considered as top level destinations.\n                mAppBarConfiguration = new AppBarConfiguration.Builder(\n                        R.id.nav_home, R.id.nav_gallery, R.id.nav_slideshow)\n                stack overflow\n                .setDrawerLayout(drawer)\n                .build();\n\n\n            drawerProfileName = navigationView.getHeaderView(0).findViewById(R.id.nav_drawer_name);\n            drawerProfileText = navigationView.getHeaderView(0).findViewById(R.id.nav_drawer_text_img);\n\n            String name = DbQuery.myProfile.getName();\n            drawerProfileName.setText(name);\n\n            drawerProfileText.setText(name.toUpperCase(Locale.ROOT).substring(0,1));\n\n            setFragement(new CategoryFragment());\n\n            NavController navController = Navigation.findNavController(this, nav_host_fragment_content_main);\n            NavigationUI.setupActionBarWithNavController(this, navController, mAppBarConfiguration);\n            NavigationUI.setupWithNavController(navigationView, navController);\n\n            navigationView.setNavigationItemSelectedListener(this);\n\n        }\n\n    private void setFragement(Fragment fragement)\n    {\n        FragmentTransaction transaction = getSupportFragmentManager().beginTransaction();\n        transaction.replace(main_frame.getId(),fragement);\n        transaction.commit();\n\n    }\n\n    @Override\n        public boolean onSupportNavigateUp() {\n            NavController navController = Navigation.findNavController(this, nav_host_fragment_content_main);\n            return NavigationUI.navigateUp(navController, mAppBarConfiguration)\n                super.onSupportNavigateUp();\n        }\n\n\n    @Override\n        public boolean onNavigationItemSelected(@NonNull MenuItem menuItem) {\n\n            Log.d(&quot;edo&quot;,&quot;mphka1&quot;);\n            int id = menuItem.getItemId();\n            if (id == R.id.nav_home) {\n                setFragement(new CategoryFragment());\n                return true;\n            }\n            else if (id == R.id.nav_leaderboard) {\n                Handle the gallery action\n                    setFragement(new LeaderBoardFragment());\n                return true;\n\n            }\n            else if (id == R.id.nav_account) {\n                Handle the slideshow action\n                    setFragement(new AccountFragment());\n                return true;\n\n            }\n\n\n\n            DrawerLayout drawer = binding.drawerLayout;\n            drawer.closeDrawer(GravityCompat.START);\n\n            return true;\n        }\n\n    @Override\n        public void onPointerCaptureChanged(boolean hasCapture) {\n            super.onPointerCaptureChanged(hasCapture);\n        }\n}\n</code></pre>\n<p>The content_main</p>\n<pre><code> &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n &lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n android:layout_width=&quot;match_parent&quot;\n android:layout_height=&quot;match_parent&quot;\n android:background=&quot;@drawable/main_background&quot;\n app:layout_behavior=&quot;@string/appbar_scrolling_view_behavior&quot;\n tools:showIn=&quot;@layout/app_bar_main&quot;&gt;\n \n \n     &lt;fragment\n android:id=&quot;@+id/nav_host_fragment_content_main&quot;\n android:name=&quot;androidx.navigation.fragment.NavHostFragment&quot;\n android:layout_width=&quot;match_parent&quot;\n android:layout_height=&quot;match_parent&quot;\n app:defaultNavHost=&quot;true&quot;\n app:layout_constraintLeft_toLeftOf=&quot;parent&quot;\n app:layout_constraintRight_toRightOf=&quot;parent&quot;\n app:layout_constraintTop_toTopOf=&quot;parent&quot;\n app:navGraph=&quot;@navigation/mobile_navigation&quot; /&gt;\n \n     &lt;com.google.android.material.bottomnavigation.BottomNavigationView\n android:id=&quot;@+id/bottom_nav_bar&quot;\n android:layout_width=&quot;0dp&quot;\n android:layout_height=&quot;wrap_content&quot;\n android:background=&quot;?android:attr/windowBackground&quot;\n app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n app:layout_constraintStart_toStartOf=&quot;parent&quot;\n app:menu=&quot;@menu/bottom_menu&quot;&gt;\n \n     &lt;/com.google.android.material.bottomnavigation.BottomNavigationView&gt;\n \n     &lt;FrameLayout\n android:id=&quot;@+id/main_frame&quot;\n android:layout_width=&quot;0dp&quot;\n android:layout_height=&quot;0dp&quot;\n app:layout_constraintBottom_toTopOf=&quot;@+id/bottom_nav_bar&quot;\n app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n app:layout_constraintStart_toStartOf=&quot;parent&quot;\n app:layout_constraintTop_toTopOf=&quot;parent&quot;&gt;\n \n     &lt;/FrameLayout&gt;\n \n &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n<p>If i click the home page the drawer closes. In my opinion is because of the fragment in the content_main.</p>\n<p>Are those two lines correct?</p>\n<pre><code>DrawerLayout drawer = binding.drawerLayout;\ndrawer.closeDrawer(GravityCompat.START);\n</code></pre>\n"},{"tags":["java","spring","postgresql","spring-boot","jpa"],"answers":[{"tags":[],"owner":{"account_id":20519214,"reputation":69,"user_id":15059204,"display_name":"Eduardo Lopes"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679025279,"creation_date":1679025279,"answer_id":75763625,"question_id":75763591,"body_markdown":"I found that I was writing the host URL wrong\r\n\r\nit should be &quot;jdbc:postgresql://&quot; instead of &quot;jdbc:postgres://&quot;","title":"Error to connect my Postgres database to Spring boot app","body":"<p>I found that I was writing the host URL wrong</p>\n<p>it should be &quot;jdbc:postgresql://&quot; instead of &quot;jdbc:postgres://&quot;</p>\n"}],"owner":{"account_id":20519214,"reputation":69,"user_id":15059204,"display_name":"Eduardo Lopes"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":110,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1679027416,"creation_date":1679024743,"question_id":75763591,"body_markdown":"I&#39;m developing a simple app using Spring boot and decided to use PostgreSQL to store my data.\r\nI opted to use elephantSQL to host my DB but I&#39;m having this error when trying to connect with my Spring app\r\n[![enter image description here][1]][1]\r\n\r\nI already connected using the pgadmin4 and everything worked fine.\r\n\r\nHere&#39;s my ElephantSQL data\r\n[![enter image description here][2]][2]\r\n\r\n\r\nHere&#39;s my application.properties\r\n[![enter image description here][3]][3]\r\n\r\n\r\nHere&#39;s my pom.xml\r\n[![enter image description here][4]][4]\r\n\r\nPlease, any help would be awesome!\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/QGjlV.png\r\n  [2]: https://i.stack.imgur.com/x9Tby.png\r\n  [3]: https://i.stack.imgur.com/mjtFl.png\r\n  [4]: https://i.stack.imgur.com/vjkYN.png","title":"Error to connect my Postgres database to Spring boot app","body":"<p>I'm developing a simple app using Spring boot and decided to use PostgreSQL to store my data.\nI opted to use elephantSQL to host my DB but I'm having this error when trying to connect with my Spring app\n<a href=\"https://i.stack.imgur.com/QGjlV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QGjlV.png\" alt=\"enter image description here\" /></a></p>\n<p>I already connected using the pgadmin4 and everything worked fine.</p>\n<p>Here's my ElephantSQL data\n<a href=\"https://i.stack.imgur.com/x9Tby.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/x9Tby.png\" alt=\"enter image description here\" /></a></p>\n<p>Here's my application.properties\n<a href=\"https://i.stack.imgur.com/mjtFl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mjtFl.png\" alt=\"enter image description here\" /></a></p>\n<p>Here's my pom.xml\n<a href=\"https://i.stack.imgur.com/vjkYN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vjkYN.png\" alt=\"enter image description here\" /></a></p>\n<p>Please, any help would be awesome!</p>\n"},{"tags":["java","json","gson","comparator","large-data"],"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":2,"creation_date":1678994211,"post_id":75760698,"comment_id":133645693,"body_markdown":"That&#39;s very little context for a very big question.","body":"That&#39;s very little context for a very big question."},{"owner":{"account_id":22450291,"reputation":364,"user_id":16653700,"display_name":"Alias Cartellano"},"score":0,"creation_date":1678996298,"post_id":75760698,"comment_id":133646204,"body_markdown":"Iterate through the files and the arrays in both directories and compare them.","body":"Iterate through the files and the arrays in both directories and compare them."},{"owner":{"account_id":5384013,"reputation":6035,"user_id":4288506,"accept_rate":77,"display_name":"Marcono1234"},"score":0,"creation_date":1678996493,"post_id":75760698,"comment_id":133646248,"body_markdown":"Do you really have to diff the JSON data? It would probably be way easier to simply diff the JSON string content of the files. Also, adding to what @shmosel wrote, there are multiple open questions, such as (1) should the order of property names be considered (e.g. first `name` or first `uniqueId`), (2) should the order in the array be considered, e.g. if an entry is moved from index 0 to 5, is it then _removed_ + _added_ (or some combinations of _updated_), or should the array be considered identical?","body":"Do you really have to diff the JSON data? It would probably be way easier to simply diff the JSON string content of the files. Also, adding to what @shmosel wrote, there are multiple open questions, such as (1) should the order of property names be considered (e.g. first <code>name</code> or first <code>uniqueId</code>), (2) should the order in the array be considered, e.g. if an entry is moved from index 0 to 5, is it then <i>removed</i> + <i>added</i> (or some combinations of <i>updated</i>), or should the array be considered identical?"}],"owner":{"account_id":10333420,"reputation":3,"user_id":7622433,"display_name":"vik"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":111,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679027241,"creation_date":1678993859,"question_id":75760698,"body_markdown":"I have two directories &quot;A&quot; and &quot;B&quot;, each directory contains textfiles containing jsonarray of jsonobjects.\r\nNeed to compare jsonobjects in directory a with b and figure out which object is added,updated,deleted.\r\nI cant load all jsonobjects since it will consume all the memory allocated hence i need to execute in batchwise.\r\n\r\nkindly suggest a efficient method to achive this . \r\nThanks in advance\r\nsample json array in each textfile. Each object has a unique key\r\n```\r\n[\r\n   {\r\n      name:x,\r\n      uniqueId:1\r\n   },\r\n   {\r\n     name:y,\r\n     uniqueId:2\r\n   }\r\n]\r\n```\r\n\r\nI tried the brute force method. ","title":"Compare Two Large JSON array","body":"<p>I have two directories &quot;A&quot; and &quot;B&quot;, each directory contains textfiles containing jsonarray of jsonobjects.\nNeed to compare jsonobjects in directory a with b and figure out which object is added,updated,deleted.\nI cant load all jsonobjects since it will consume all the memory allocated hence i need to execute in batchwise.</p>\n<p>kindly suggest a efficient method to achive this .\nThanks in advance\nsample json array in each textfile. Each object has a unique key</p>\n<pre><code>[\n   {\n      name:x,\n      uniqueId:1\n   },\n   {\n     name:y,\n     uniqueId:2\n   }\n]\n</code></pre>\n<p>I tried the brute force method.</p>\n"},{"tags":["java","generics","type-erasure"],"answers":[{"comments":[{"owner":{"account_id":61266,"reputation":39628,"user_id":182690,"accept_rate":94,"display_name":"Dean J"},"score":0,"creation_date":1254583424,"post_id":1512360,"comment_id":1368210,"body_markdown":"Let me check this on Monday.  We&#39;re already using quite a bit of reflection, I may need to be more specific with my question, but don&#39;t want to misspeak without the example in front of me.","body":"Let me check this on Monday.  We&#39;re already using quite a bit of reflection, I may need to be more specific with my question, but don&#39;t want to misspeak without the example in front of me."},{"owner":{"account_id":61266,"reputation":39628,"user_id":182690,"accept_rate":94,"display_name":"Dean J"},"score":1,"creation_date":1254774550,"post_id":1512360,"comment_id":1377041,"body_markdown":"Okay, checked.\n\nThe problem here is that there&#39;s something like:\n\nclass Foo&lt;Bar&gt;;\n-and-\nclass Baz extends Bar;\n-and-\nclass Zab extends Bar;\n\nWhen something calls Foo&lt;Bar&gt; with Baz (Bar&#39;s subclass), all I can get back is Bar, not Baz; I&#39;ve lost the subclass and can only get back the explicit type.\n\nDid that make any sense?","body":"Okay, checked.  The problem here is that there&#39;s something like:  class Foo&lt;Bar&gt;; -and- class Baz extends Bar; -and- class Zab extends Bar;  When something calls Foo&lt;Bar&gt; with Baz (Bar&#39;s subclass), all I can get back is Bar, not Baz; I&#39;ve lost the subclass and can only get back the explicit type.  Did that make any sense?"},{"owner":{"account_id":60322,"reputation":958,"user_id":180244,"display_name":"vdr"},"score":0,"creation_date":1254904411,"post_id":1512360,"comment_id":1385938,"body_markdown":"Yep, unfortunatly, that&#39;s the kind of info that is erased. At runtime, there is only 1 instance of the class Foo (Foo.class). So you only get the &quot;declared&quot; generic type rather than the &quot;instance&quot; generic type. This is what &quot;reified generic&quot; discussion (http://gafter.blogspot.com/2006/11/reified-generics-for-java.html) is about. Unfortunatly that won&#39;t be part of java 7 either.","body":"Yep, unfortunatly, that&#39;s the kind of info that is erased. At runtime, there is only 1 instance of the class Foo (Foo.class). So you only get the &quot;declared&quot; generic type rather than the &quot;instance&quot; generic type. This is what &quot;reified generic&quot; discussion (<a href=\"http://gafter.blogspot.com/2006/11/reified-generics-for-java.html\" rel=\"nofollow noreferrer\">gafter.blogspot.com/2006/11/reified-generics-for-java.html</a>) is about. Unfortunatly that won&#39;t be part of java 7 either."}],"tags":[],"owner":{"account_id":60322,"reputation":958,"user_id":180244,"display_name":"vdr"},"comment_count":3,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1254733110,"creation_date":1254528371,"answer_id":1512360,"question_id":1509896,"body_markdown":"Even after erasure has done its job, it is still possible to retrieve generic information from: Field, Method ( including method parameters ) and Class using reflection.\r\n\r\nFor example, it is possible to retrieve the SystemErrorReportCommand from SystemErrorReportController using \r\n\r\n    ((ParameterizedType) SystemErrorReportController.class.getGenericSuperType()).getActualTypeArguments[0];\r\n\r\nStill, that&#39;s only the beginning. You need to start making use of that information using reflection api, so it is likely that your design will suffer if you were not expecting something like this.\r\n\r\nHere is a little example of what you can extract at runtime:\r\n\r\n    public abstract class Test&lt;T extends Number&gt; extends ArrayList&lt;Long&gt; implements Comparable&lt;String&gt;, List&lt;Long&gt;{\r\n        public List&lt;String&gt; field;\r\n        public abstract &lt;M&gt; M method(List&lt;T&gt; arg);\r\n    \r\n        public static void main(String... args) throws Exception {\r\n            TypeVariable&lt;Class&lt;Test&gt;&gt; t = Test.class.getTypeParameters()[0];\r\n            Class&lt;?&gt; upperBound = (Class&lt;?&gt;) t.getBounds()[0];\r\n    \r\n    \r\n            System.out.println(&quot;Test&lt;&quot; + t + &quot; extends &quot; + upperBound.getName() + &quot;&gt;&quot;);\r\n            System.out.println(&quot;extends &quot; + Test.class.getGenericSuperclass());\r\n            System.out.println(&quot;implements &quot; + Arrays.toString(Test.class.getGenericInterfaces()));\r\n            System.out.println(&quot;{&quot;);\r\n            System.out.println(Test.class.getMethods()[1].toGenericString());\r\n            System.out.println(Test.class.getFields()[0].toGenericString());\r\n            System.out.println(&quot;}&quot;);\r\n        }\r\n    }\r\n\r\nThat will output:\r\n\r\n    Test&lt;T extends java.lang.Number&gt;\r\n    extends java.util.ArrayList&lt;java.lang.Long&gt;\r\n    implements [java.lang.Comparable&lt;java.lang.String&gt;, java.util.List&lt;java.lang.Long&gt;]\r\n    {\r\n    public abstract &lt;M&gt; M Test.method(java.util.List&lt;T&gt;)\r\n    public java.util.List&lt;java.lang.String&gt; Test.field\r\n    }\r\n\r\nI&#39;m using `toGenericString()` method. However this is just a pretty printing method ! There is no need to parse that String: reflection api provides all the necessary information, eg: `Field.getGenericType()`, `Method.getArgumentTypes`, ...\r\n","title":"Getting around Type Erasure in Java","body":"<p>Even after erasure has done its job, it is still possible to retrieve generic information from: Field, Method ( including method parameters ) and Class using reflection.</p>\n\n<p>For example, it is possible to retrieve the SystemErrorReportCommand from SystemErrorReportController using </p>\n\n<pre><code>((ParameterizedType) SystemErrorReportController.class.getGenericSuperType()).getActualTypeArguments[0];\n</code></pre>\n\n<p>Still, that's only the beginning. You need to start making use of that information using reflection api, so it is likely that your design will suffer if you were not expecting something like this.</p>\n\n<p>Here is a little example of what you can extract at runtime:</p>\n\n<pre><code>public abstract class Test&lt;T extends Number&gt; extends ArrayList&lt;Long&gt; implements Comparable&lt;String&gt;, List&lt;Long&gt;{\n    public List&lt;String&gt; field;\n    public abstract &lt;M&gt; M method(List&lt;T&gt; arg);\n\n    public static void main(String... args) throws Exception {\n        TypeVariable&lt;Class&lt;Test&gt;&gt; t = Test.class.getTypeParameters()[0];\n        Class&lt;?&gt; upperBound = (Class&lt;?&gt;) t.getBounds()[0];\n\n\n        System.out.println(\"Test&lt;\" + t + \" extends \" + upperBound.getName() + \"&gt;\");\n        System.out.println(\"extends \" + Test.class.getGenericSuperclass());\n        System.out.println(\"implements \" + Arrays.toString(Test.class.getGenericInterfaces()));\n        System.out.println(\"{\");\n        System.out.println(Test.class.getMethods()[1].toGenericString());\n        System.out.println(Test.class.getFields()[0].toGenericString());\n        System.out.println(\"}\");\n    }\n}\n</code></pre>\n\n<p>That will output:</p>\n\n<pre><code>Test&lt;T extends java.lang.Number&gt;\nextends java.util.ArrayList&lt;java.lang.Long&gt;\nimplements [java.lang.Comparable&lt;java.lang.String&gt;, java.util.List&lt;java.lang.Long&gt;]\n{\npublic abstract &lt;M&gt; M Test.method(java.util.List&lt;T&gt;)\npublic java.util.List&lt;java.lang.String&gt; Test.field\n}\n</code></pre>\n\n<p>I'm using <code>toGenericString()</code> method. However this is just a pretty printing method ! There is no need to parse that String: reflection api provides all the necessary information, eg: <code>Field.getGenericType()</code>, <code>Method.getArgumentTypes</code>, ...</p>\n"},{"tags":[],"owner":{"account_id":16366,"reputation":77097,"user_id":35501,"accept_rate":83,"display_name":"JRL"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1254843073,"creation_date":1254843073,"answer_id":1526364,"question_id":1509896,"body_markdown":"Maybe you could use something like [Javassist][1] to do some meta-programming.\r\n\r\nIt&#39;s used in Tapestry for that purpose, see [this][2] article.\r\n\r\n\r\n  [1]: http://www.jboss.org/javassist/\r\n  [2]: http://tapestryjava.blogspot.com/2009/08/article-meta-programming-java.html","title":"Getting around Type Erasure in Java","body":"<p>Maybe you could use something like <a href=\"http://www.jboss.org/javassist/\" rel=\"nofollow noreferrer\">Javassist</a> to do some meta-programming.</p>\n\n<p>It's used in Tapestry for that purpose, see <a href=\"http://tapestryjava.blogspot.com/2009/08/article-meta-programming-java.html\" rel=\"nofollow noreferrer\">this</a> article.</p>\n"},{"tags":[],"owner":{"account_id":24437,"reputation":5745,"user_id":62131,"accept_rate":82,"display_name":"Richard Gomes"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1679027148,"creation_date":1294086048,"answer_id":4588015,"question_id":1509896,"body_markdown":"Contrary to what is widely accepted and rarely known type erasure can be avoided, which means that the callee do have the ability to know which generic parameters were employed during the call.","title":"Getting around Type Erasure in Java","body":"<p>Contrary to what is widely accepted and rarely known type erasure can be avoided, which means that the callee do have the ability to know which generic parameters were employed during the call.</p>\n"}],"owner":{"account_id":61266,"reputation":39628,"user_id":182690,"accept_rate":94,"display_name":"Dean J"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5106,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":1526364,"answer_count":3,"score":3,"last_activity_date":1679027148,"creation_date":1254494059,"question_id":1509896,"body_markdown":"So, the group I work with has reduced the amount of code we have to type for certain things.  In this case, a Spring web page that displays a list using the DisplayTag libraries.  The way it&#39;s done is with a class using generics extending the `Controller` object, and then a subclass of that for each page it should work on.\r\n\r\nThis controller displays the `SystemErrorReport`, and defines the type to be the `SystemErrorReportCommand`.\r\n\r\n    public class SystemErrorReportController extends\r\n        GenericSearchAndSelectController&lt;SystemErrorReportCommand&gt; {\r\n\r\nThe problem is that `SystemErrorReportCommand`, being passed as a type, needs to have a manual declaration of itself in its constructor, like so:\r\n\r\n    public SystemErrorReportCommand()\r\n    {\r\n        super(SystemErrorReport.class);\r\n    }\r\n\r\nThe command object is later passed to something that needs to know its explicit type.  Without specifying it manually somewhere, it comes back as `GenericCommand`, another class of ours, because the `SystemErrorReportCommand` bit is lost after compile time.\r\n\r\nI&#39;m not thrilled with that, because it seems like something we can farther automate to reduce developer error.  Is there a more elegant way to do this, or am I stuck with this because of type erasure?","title":"Getting around Type Erasure in Java","body":"<p>So, the group I work with has reduced the amount of code we have to type for certain things.  In this case, a Spring web page that displays a list using the DisplayTag libraries.  The way it's done is with a class using generics extending the <code>Controller</code> object, and then a subclass of that for each page it should work on.</p>\n\n<p>This controller displays the <code>SystemErrorReport</code>, and defines the type to be the <code>SystemErrorReportCommand</code>.</p>\n\n<pre><code>public class SystemErrorReportController extends\n    GenericSearchAndSelectController&lt;SystemErrorReportCommand&gt; {\n</code></pre>\n\n<p>The problem is that <code>SystemErrorReportCommand</code>, being passed as a type, needs to have a manual declaration of itself in its constructor, like so:</p>\n\n<pre><code>public SystemErrorReportCommand()\n{\n    super(SystemErrorReport.class);\n}\n</code></pre>\n\n<p>The command object is later passed to something that needs to know its explicit type.  Without specifying it manually somewhere, it comes back as <code>GenericCommand</code>, another class of ours, because the <code>SystemErrorReportCommand</code> bit is lost after compile time.</p>\n\n<p>I'm not thrilled with that, because it seems like something we can farther automate to reduce developer error.  Is there a more elegant way to do this, or am I stuck with this because of type erasure?</p>\n"},{"tags":["java","android","grpc","illegalstateexception","clarifai"],"answers":[{"tags":[],"owner":{"account_id":10680689,"reputation":316,"user_id":7862874,"display_name":"Jeremy Faret"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1678886288,"creation_date":1678886288,"answer_id":75745269,"question_id":75741862,"body_markdown":"you can try installing [conscrypt][1] to provide TLS support.\r\n\r\nThen, you can try updating your ClarifaiTask with:\r\n\r\n    static {\r\n        Security.insertProviderAt(Conscrypt.newProvider(), 1);\r\n    }\r\nBefore you&#39;re calling the stub.\r\n\r\n  [1]: https://github.com/google/conscrypt\r\n","title":"ClarifaiChannel.INSTANCE.getGrpcChannel() throwing IllegalStateException: Could not find TLS ALPN provider","body":"<p>you can try installing <a href=\"https://github.com/google/conscrypt\" rel=\"nofollow noreferrer\">conscrypt</a> to provide TLS support.</p>\n<p>Then, you can try updating your ClarifaiTask with:</p>\n<pre><code>static {\n    Security.insertProviderAt(Conscrypt.newProvider(), 1);\n}\n</code></pre>\n<p>Before you're calling the stub.</p>\n"}],"owner":{"account_id":28020964,"reputation":1207,"user_id":21401783,"display_name":"Dinux"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75745269,"answer_count":1,"score":1,"last_activity_date":1679026294,"creation_date":1678866894,"question_id":75741862,"body_markdown":"I am trying to use Clarifai to predict images in an Android app. I am using the Clarifai gRPC Java client. However, I am getting an IllegalStateException saying &#39;Could not find TLS ALPN provider; no working netty-tcnative, Conscrypt, or Jetty NPN/ALPN available&#39;. I am using Java 11, Clarifai gRPC 8.0.0.\r\n\r\nBelow is my code:\r\n\r\n```\r\npublic class ClarifaiTask extends AsyncTask&lt;File, Integer, Boolean&gt; {\r\n\r\n    protected Boolean doInBackground(File... images) {\r\n        V2Grpc.V2BlockingStub stub = V2Grpc.newBlockingStub(ClarifaiChannel.INSTANCE.getGrpcChannel()).withCallCredentials(new ClarifaiCallCredentials(API_KEY));\r\n\r\n\r\n        MultiOutputResponse response = stub.postModelOutputs(PostModelOutputsRequest.newBuilder().setModelId(MODEL_ID).addInputs(Input.newBuilder().setData(Data.newBuilder().setImage(Image.newBuilder().setUrl(IMG_URL)))).build());\r\n\r\n        if (response.getStatus().getCode() != StatusCode.SUCCESS) {\r\n            throw new RuntimeException(&quot;Request failed, status: &quot; + response.getStatus());\r\n        }\r\n\r\n        for (Concept c : response.getOutputs(0).getData().getConceptsList()) {\r\n            System.out.println(String.format(&quot;%12s: %,.2f&quot;, c.getName(), c.getValue()));\r\n        }\r\n\r\n        return true;\r\n    }\r\n    \r\n    protected void onPostExecute(Boolean result) {\r\n\r\n    }\r\n}\r\n```\r\n\r\nThe error:\r\n\r\n```\r\nE/AndroidRuntime: FATAL EXCEPTION: AsyncTask #1\r\n    Process: com.package.name, PID: 25874\r\n    java.lang.RuntimeException: An error occurred while executing doInBackground()\r\n        at android.os.AsyncTask$4.done(AsyncTask.java:415)\r\n        at java.util.concurrent.FutureTask.finishCompletion(FutureTask.java:381)\r\n        at java.util.concurrent.FutureTask.setException(FutureTask.java:250)\r\n        at java.util.concurrent.FutureTask.run(FutureTask.java:269)\r\n        at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:305)\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1137)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:637)\r\n        at java.lang.Thread.run(Thread.java:1012)\r\n     Caused by: java.lang.IllegalStateException: Could not find TLS ALPN provider; no working netty-tcnative, Conscrypt, or Jetty NPN/ALPN available\r\n        at io.grpc.netty.shaded.io.grpc.netty.GrpcSslContexts.defaultSslProvider(GrpcSslContexts.java:246)\r\n        at io.grpc.netty.shaded.io.grpc.netty.GrpcSslContexts.configure(GrpcSslContexts.java:146)\r\n        at io.grpc.netty.shaded.io.grpc.netty.GrpcSslContexts.forClient(GrpcSslContexts.java:95)\r\n        at com.clarifai.channel.ClarifaiChannel.getGrpcChannel(ClarifaiChannel.java:37)\r\n        at com.clarifai.channel.ClarifaiChannel.getGrpcChannel(ClarifaiChannel.java:28)\r\n        at com.dinuxsoft.somethingg.ClarifaiTask.doInBackground(ClarifaiTask.java:41)\r\n        at com.dinuxsoft.somethingg.ClarifaiTask.doInBackground(ClarifaiTask.java:34)\r\n        at android.os.AsyncTask$3.call(AsyncTask.java:394)\r\n        at java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n        at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:305)&#160;\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1137)&#160;\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:637)&#160;\r\n        at java.lang.Thread.run(Thread.java:1012)&#160;\r\n```\r\nAny help is appreciated.\r\n","title":"ClarifaiChannel.INSTANCE.getGrpcChannel() throwing IllegalStateException: Could not find TLS ALPN provider","body":"<p>I am trying to use Clarifai to predict images in an Android app. I am using the Clarifai gRPC Java client. However, I am getting an IllegalStateException saying 'Could not find TLS ALPN provider; no working netty-tcnative, Conscrypt, or Jetty NPN/ALPN available'. I am using Java 11, Clarifai gRPC 8.0.0.</p>\n<p>Below is my code:</p>\n<pre><code>public class ClarifaiTask extends AsyncTask&lt;File, Integer, Boolean&gt; {\n\n    protected Boolean doInBackground(File... images) {\n        V2Grpc.V2BlockingStub stub = V2Grpc.newBlockingStub(ClarifaiChannel.INSTANCE.getGrpcChannel()).withCallCredentials(new ClarifaiCallCredentials(API_KEY));\n\n\n        MultiOutputResponse response = stub.postModelOutputs(PostModelOutputsRequest.newBuilder().setModelId(MODEL_ID).addInputs(Input.newBuilder().setData(Data.newBuilder().setImage(Image.newBuilder().setUrl(IMG_URL)))).build());\n\n        if (response.getStatus().getCode() != StatusCode.SUCCESS) {\n            throw new RuntimeException(&quot;Request failed, status: &quot; + response.getStatus());\n        }\n\n        for (Concept c : response.getOutputs(0).getData().getConceptsList()) {\n            System.out.println(String.format(&quot;%12s: %,.2f&quot;, c.getName(), c.getValue()));\n        }\n\n        return true;\n    }\n    \n    protected void onPostExecute(Boolean result) {\n\n    }\n}\n</code></pre>\n<p>The error:</p>\n<pre><code>E/AndroidRuntime: FATAL EXCEPTION: AsyncTask #1\n    Process: com.package.name, PID: 25874\n    java.lang.RuntimeException: An error occurred while executing doInBackground()\n        at android.os.AsyncTask$4.done(AsyncTask.java:415)\n        at java.util.concurrent.FutureTask.finishCompletion(FutureTask.java:381)\n        at java.util.concurrent.FutureTask.setException(FutureTask.java:250)\n        at java.util.concurrent.FutureTask.run(FutureTask.java:269)\n        at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:305)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1137)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:637)\n        at java.lang.Thread.run(Thread.java:1012)\n     Caused by: java.lang.IllegalStateException: Could not find TLS ALPN provider; no working netty-tcnative, Conscrypt, or Jetty NPN/ALPN available\n        at io.grpc.netty.shaded.io.grpc.netty.GrpcSslContexts.defaultSslProvider(GrpcSslContexts.java:246)\n        at io.grpc.netty.shaded.io.grpc.netty.GrpcSslContexts.configure(GrpcSslContexts.java:146)\n        at io.grpc.netty.shaded.io.grpc.netty.GrpcSslContexts.forClient(GrpcSslContexts.java:95)\n        at com.clarifai.channel.ClarifaiChannel.getGrpcChannel(ClarifaiChannel.java:37)\n        at com.clarifai.channel.ClarifaiChannel.getGrpcChannel(ClarifaiChannel.java:28)\n        at com.dinuxsoft.somethingg.ClarifaiTask.doInBackground(ClarifaiTask.java:41)\n        at com.dinuxsoft.somethingg.ClarifaiTask.doInBackground(ClarifaiTask.java:34)\n        at android.os.AsyncTask$3.call(AsyncTask.java:394)\n        at java.util.concurrent.FutureTask.run(FutureTask.java:264)\n        at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:305) \n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1137) \n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:637) \n        at java.lang.Thread.run(Thread.java:1012) \n</code></pre>\n<p>Any help is appreciated.</p>\n"},{"tags":["java","angular","spring-boot","spring-websocket","stompjs"],"answers":[{"tags":[],"owner":{"account_id":18149245,"reputation":48,"user_id":13202207,"display_name":"Giang Vu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1679025965,"creation_date":1679025965,"answer_id":75763678,"question_id":75763423,"body_markdown":"As the error said so I think you have to set configuration.setAllowCredentials(true);","title":"CORS issue when working with spring sercurity and websocket with stompjs and sockjs-client","body":"<p>As the error said so I think you have to set configuration.setAllowCredentials(true);</p>\n"}],"owner":{"account_id":28038303,"reputation":11,"user_id":21416282,"display_name":"Tuan Le Anh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":265,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75763678,"answer_count":1,"score":0,"last_activity_date":1679025965,"creation_date":1679022339,"question_id":75763423,"body_markdown":"It is an error when I want to add websocket into my web.\r\n\r\nThis is my WebSocketConfig\r\n\r\n```\r\n@Configuration\r\n@EnableWebSocketMessageBroker\r\npublic class WebSocketConfig implements WebSocketMessageBrokerConfigurer {\r\n    @Override\r\n    public void registerStompEndpoints(StompEndpointRegistry registry) {\r\n        registry.addEndpoint(&quot;/socket&quot;).setAllowedOrigins(&quot;*&quot;).withSockJS();\r\n    }\r\n\r\n    @Override\r\n    public void configureMessageBroker(MessageBrokerRegistry config) {\r\n        config.enableSimpleBroker(&quot;/message&quot;);\r\n        config.setApplicationDestinationPrefixes(&quot;/app&quot;);\r\n    }\r\n}\r\n```\r\n\r\nThis is my Spring SercurityConfig\r\n```\r\n@Configuration\r\n@EnableWebSecurity\r\n@RequiredArgsConstructor\r\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\r\n    private final UserDetailsService userDetailsService;\r\n    private final BCryptPasswordEncoder bCryptPasswordEncoder;\r\n    @Override\r\n    protected void configure(AuthenticationManagerBuilder auth) throws Exception {\r\n        auth.userDetailsService(userDetailsService).passwordEncoder(bCryptPasswordEncoder);\r\n    }\r\n\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n        CustomAuthenticationFilter customAuthenticationFilter = new CustomAuthenticationFilter(authenticationManagerBean());\r\n        customAuthenticationFilter.setFilterProcessesUrl(&quot;/api/login&quot;);\r\n        \r\n        http.csrf().disable().cors().configurationSource(request -&gt; {\r\n            CorsConfiguration configuration = new CorsConfiguration();\r\n            configuration.setAllowedOrigins(Arrays.asList(&quot;http://localhost:4200&quot;));\r\n            configuration.setAllowedMethods(Arrays.asList(&quot;GET&quot;, &quot;POST&quot;, &quot;PUT&quot;, &quot;DELETE&quot;));\r\n            configuration.addAllowedHeader(&quot;*&quot;);\r\n            return configuration;\r\n        }).and()\r\n        // .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS).and()\r\n        // .authorizeHttpRequests().antMatchers(&quot;/api/login/**&quot;, &quot;/api/token/refresh/**&quot;, &quot;/api/user/save/**&quot;,&quot;/socket/**&quot;, &quot;/socket/**&quot;).permitAll().and()\r\n        //         .authorizeHttpRequests().antMatchers(HttpMethod.GET, &quot;/api/users/**&quot;).hasAnyAuthority(&quot;ROLE_USER&quot;).and()\r\n        //         .authorizeHttpRequests().antMatchers(HttpMethod.GET, &quot;/api/posts/**&quot;).hasAnyAuthority(&quot;ROLE_USER&quot;).and()\r\n        // .authorizeHttpRequests().anyRequest().authenticated().and()\r\n        .authorizeRequests().anyRequest().permitAll().and()\r\n        .addFilter(customAuthenticationFilter)\r\n        .addFilterBefore(new CustomAuthorizationFilter(), UsernamePasswordAuthenticationFilter.class);\r\n    }\r\n\r\n    @Bean\r\n    @Override\r\n    public AuthenticationManager authenticationManagerBean() throws Exception {\r\n        return super.authenticationManagerBean();\r\n    }\r\n}\r\n```\r\n\r\nThis is my CustomAuthorizationFilter\r\n```\r\npublic class CustomAuthorizationFilter extends OncePerRequestFilter {\r\n    @Override\r\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)\r\n            throws ServletException, IOException {\r\n        if (request.getServletPath().equals(&quot;/api/login&quot;) || request.getServletPath().equals(&quot;/api/token/refresh&quot;)) {\r\n            filterChain.doFilter(request, response);\r\n        } else {\r\n            String authorizationHeader = request.getHeader(AUTHORIZATION);\r\n            if (authorizationHeader != null &amp;&amp; authorizationHeader.startsWith(&quot;Bearer &quot;)) {\r\n                try {\r\n                    String token = authorizationHeader.substring(&quot;Bearer &quot;.length());\r\n                    Algorithm algorithm = Algorithm.HMAC256(&quot;secret&quot;.getBytes());\r\n                    JWTVerifier verifier = JWT.require(algorithm).build();\r\n                    DecodedJWT decodedJWT = verifier.verify(token);\r\n\r\n                    String username = decodedJWT.getSubject();\r\n                    String[] roles = decodedJWT.getClaim(&quot;roles&quot;).asArray(String.class);\r\n                    \r\n                    Collection&lt;SimpleGrantedAuthority&gt; authorities = new ArrayList&lt;&gt;();\r\n                    Arrays.stream(roles).forEach(role -&gt; {\r\n                        authorities.add(new SimpleGrantedAuthority(role));\r\n                    });\r\n\r\n                    UsernamePasswordAuthenticationToken authenticationToken = new UsernamePasswordAuthenticationToken(\r\n                            username, null, authorities);\r\n                    SecurityContextHolder.getContext().setAuthentication(authenticationToken);\r\n\r\n                    filterChain.doFilter(request, response);\r\n                } catch (Exception exception) {\r\n                    log.error(&quot;Error logging in: {}&quot;, exception.getMessage());\r\n                    response.setHeader(&quot;error&quot;, exception.getMessage());\r\n                    response.setStatus(FORBIDDEN.value());\r\n\r\n                    Map&lt;String, String&gt; error = new HashMap&lt;&gt;();\r\n                    error.put(&quot;error_message&quot;, exception.getMessage());\r\n                    response.setContentType(MediaType.APPLICATION_JSON_VALUE);\r\n\r\n                    new ObjectMapper().writeValue(response.getOutputStream(), error);\r\n                }\r\n            } else {\r\n                filterChain.doFilter(request, response);\r\n            }\r\n\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nAnd interceptor token and service I use to connect socket socket in angular\r\n```\r\n@Injectable()\r\nexport class TokenInterceptor implements HttpInterceptor {\r\n\r\n\tconstructor(private auth: AuthService, private router: Router) { }\r\n\r\n\tintercept(request: HttpRequest&lt;unknown&gt;, next: HttpHandler): Observable&lt;HttpEvent&lt;unknown&gt;&gt; | any {\r\n\t\tconst myToken = this.auth.getToken();\r\n\r\n\t\tif (myToken) {\r\n\t\t\trequest = request.clone({\r\n\t\t\t\tsetHeaders: {\r\n\t\t\t\t\tAuthorization: `Bearer ${myToken}`\r\n\t\t\t\t},\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn next.handle(request).pipe(\r\n\t\t\tcatchError((err: any) =&gt; {\r\n\t\t\t\tif (err instanceof HttpErrorResponse) {\r\n\t\t\t\t\tif (err.status === 401) {\r\n\t\t\t\t\t\treturn this.handleUnAuthorizedError(request, next)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn throwError(() =&gt; new Error(&quot;Some other error occured&quot;))\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\thandleUnAuthorizedError(req: HttpRequest&lt;any&gt;, next: HttpHandler) {\r\n\t\tlet tokenApiModel = new TokenApiModel();\r\n\t\ttokenApiModel.access_token = this.auth.getToken()!;\r\n\t\ttokenApiModel.refresh_token = this.auth.getRefreshToken()!;\r\n\t\treturn this.auth.renewToken(tokenApiModel)\r\n\t\t\t.pipe(\r\n\t\t\t\tswitchMap((data: TokenApiModel) =&gt; {\r\n\t\t\t\t\tthis.auth.storeRefreshToken(data.refresh_token)\r\n\t\t\t\t\tthis.auth.storeToken(data.access_token)\r\n\t\t\t\t\treq = req.clone({\r\n\t\t\t\t\t\tsetHeaders: {\r\n\t\t\t\t\t\t\tAuthorization: `Bearer ${data.access_token}`\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\twithCredentials: false\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn next.handle(req)\r\n\t\t\t\t}),\r\n\t\t\t\tcatchError((err) =&gt; {\r\n\t\t\t\t\treturn throwError(() =&gt; {\r\n\t\t\t\t\t\talert(&quot;Token is expired, login again&quot;)\r\n\t\t\t\t\t\tthis.router.navigate([&quot;login&quot;])\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t)\r\n\t}\r\n}\r\n```\r\n\r\n```\r\n@Injectable({\r\n  providedIn: &#39;root&#39;\r\n})\r\nexport class SocketService {\r\n  public stompClient: any;\r\n  public msg: Array&lt;any&gt; = [];\r\n\r\n  constructor() {\r\n    const serverUrl = &#39;http://localhost:8080/socket&#39;;\r\n    const ws = new SockJS(serverUrl);\r\n    this.stompClient = Stomp.over(ws);\r\n  }\r\n\r\n  initializeWebSocketConnection() {\r\n    const that = this;\r\n    console.log(this.stompClient); // It work until here \r\n\r\n    this.stompClient.connect({}, function (frame: any) {\r\n      that.stompClient.subscribe(&#39;/message&#39;, (message: any) =&gt; {\r\n        console.log(message);\r\n        if (message.body) {\r\n\r\n          that.msg.push(message.body);\r\n        }\r\n      });\r\n      that.stompClient.subscribe(&#39;/messages&#39;, (message: any) =&gt; {\r\n        console.log(message);\r\n        if (message.body) {\r\n\r\n          that.msg.push(message.body);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  sendMessage(message: any) {\r\n    this.stompClient.send(&#39;/app/send/message&#39;, {}, message);\r\n  }\r\n}\r\n```\r\n\r\nThis is logger error\r\n[error](https://i.stack.imgur.com/BHJOK.png)\r\n\r\n\r\nI think that it is maybe a conflict of spring security and websocket config","title":"CORS issue when working with spring sercurity and websocket with stompjs and sockjs-client","body":"<p>It is an error when I want to add websocket into my web.</p>\n<p>This is my WebSocketConfig</p>\n<pre><code>@Configuration\n@EnableWebSocketMessageBroker\npublic class WebSocketConfig implements WebSocketMessageBrokerConfigurer {\n    @Override\n    public void registerStompEndpoints(StompEndpointRegistry registry) {\n        registry.addEndpoint(&quot;/socket&quot;).setAllowedOrigins(&quot;*&quot;).withSockJS();\n    }\n\n    @Override\n    public void configureMessageBroker(MessageBrokerRegistry config) {\n        config.enableSimpleBroker(&quot;/message&quot;);\n        config.setApplicationDestinationPrefixes(&quot;/app&quot;);\n    }\n}\n</code></pre>\n<p>This is my Spring SercurityConfig</p>\n<pre><code>@Configuration\n@EnableWebSecurity\n@RequiredArgsConstructor\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\n    private final UserDetailsService userDetailsService;\n    private final BCryptPasswordEncoder bCryptPasswordEncoder;\n    @Override\n    protected void configure(AuthenticationManagerBuilder auth) throws Exception {\n        auth.userDetailsService(userDetailsService).passwordEncoder(bCryptPasswordEncoder);\n    }\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        CustomAuthenticationFilter customAuthenticationFilter = new CustomAuthenticationFilter(authenticationManagerBean());\n        customAuthenticationFilter.setFilterProcessesUrl(&quot;/api/login&quot;);\n        \n        http.csrf().disable().cors().configurationSource(request -&gt; {\n            CorsConfiguration configuration = new CorsConfiguration();\n            configuration.setAllowedOrigins(Arrays.asList(&quot;http://localhost:4200&quot;));\n            configuration.setAllowedMethods(Arrays.asList(&quot;GET&quot;, &quot;POST&quot;, &quot;PUT&quot;, &quot;DELETE&quot;));\n            configuration.addAllowedHeader(&quot;*&quot;);\n            return configuration;\n        }).and()\n        // .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS).and()\n        // .authorizeHttpRequests().antMatchers(&quot;/api/login/**&quot;, &quot;/api/token/refresh/**&quot;, &quot;/api/user/save/**&quot;,&quot;/socket/**&quot;, &quot;/socket/**&quot;).permitAll().and()\n        //         .authorizeHttpRequests().antMatchers(HttpMethod.GET, &quot;/api/users/**&quot;).hasAnyAuthority(&quot;ROLE_USER&quot;).and()\n        //         .authorizeHttpRequests().antMatchers(HttpMethod.GET, &quot;/api/posts/**&quot;).hasAnyAuthority(&quot;ROLE_USER&quot;).and()\n        // .authorizeHttpRequests().anyRequest().authenticated().and()\n        .authorizeRequests().anyRequest().permitAll().and()\n        .addFilter(customAuthenticationFilter)\n        .addFilterBefore(new CustomAuthorizationFilter(), UsernamePasswordAuthenticationFilter.class);\n    }\n\n    @Bean\n    @Override\n    public AuthenticationManager authenticationManagerBean() throws Exception {\n        return super.authenticationManagerBean();\n    }\n}\n</code></pre>\n<p>This is my CustomAuthorizationFilter</p>\n<pre><code>public class CustomAuthorizationFilter extends OncePerRequestFilter {\n    @Override\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)\n            throws ServletException, IOException {\n        if (request.getServletPath().equals(&quot;/api/login&quot;) || request.getServletPath().equals(&quot;/api/token/refresh&quot;)) {\n            filterChain.doFilter(request, response);\n        } else {\n            String authorizationHeader = request.getHeader(AUTHORIZATION);\n            if (authorizationHeader != null &amp;&amp; authorizationHeader.startsWith(&quot;Bearer &quot;)) {\n                try {\n                    String token = authorizationHeader.substring(&quot;Bearer &quot;.length());\n                    Algorithm algorithm = Algorithm.HMAC256(&quot;secret&quot;.getBytes());\n                    JWTVerifier verifier = JWT.require(algorithm).build();\n                    DecodedJWT decodedJWT = verifier.verify(token);\n\n                    String username = decodedJWT.getSubject();\n                    String[] roles = decodedJWT.getClaim(&quot;roles&quot;).asArray(String.class);\n                    \n                    Collection&lt;SimpleGrantedAuthority&gt; authorities = new ArrayList&lt;&gt;();\n                    Arrays.stream(roles).forEach(role -&gt; {\n                        authorities.add(new SimpleGrantedAuthority(role));\n                    });\n\n                    UsernamePasswordAuthenticationToken authenticationToken = new UsernamePasswordAuthenticationToken(\n                            username, null, authorities);\n                    SecurityContextHolder.getContext().setAuthentication(authenticationToken);\n\n                    filterChain.doFilter(request, response);\n                } catch (Exception exception) {\n                    log.error(&quot;Error logging in: {}&quot;, exception.getMessage());\n                    response.setHeader(&quot;error&quot;, exception.getMessage());\n                    response.setStatus(FORBIDDEN.value());\n\n                    Map&lt;String, String&gt; error = new HashMap&lt;&gt;();\n                    error.put(&quot;error_message&quot;, exception.getMessage());\n                    response.setContentType(MediaType.APPLICATION_JSON_VALUE);\n\n                    new ObjectMapper().writeValue(response.getOutputStream(), error);\n                }\n            } else {\n                filterChain.doFilter(request, response);\n            }\n\n        }\n    }\n}\n</code></pre>\n<p>And interceptor token and service I use to connect socket socket in angular</p>\n<pre><code>@Injectable()\nexport class TokenInterceptor implements HttpInterceptor {\n\n    constructor(private auth: AuthService, private router: Router) { }\n\n    intercept(request: HttpRequest&lt;unknown&gt;, next: HttpHandler): Observable&lt;HttpEvent&lt;unknown&gt;&gt; | any {\n        const myToken = this.auth.getToken();\n\n        if (myToken) {\n            request = request.clone({\n                setHeaders: {\n                    Authorization: `Bearer ${myToken}`\n                },\n            });\n        }\n\n        return next.handle(request).pipe(\n            catchError((err: any) =&gt; {\n                if (err instanceof HttpErrorResponse) {\n                    if (err.status === 401) {\n                        return this.handleUnAuthorizedError(request, next)\n                    }\n                }\n                return throwError(() =&gt; new Error(&quot;Some other error occured&quot;))\n            })\n        );\n    }\n\n    handleUnAuthorizedError(req: HttpRequest&lt;any&gt;, next: HttpHandler) {\n        let tokenApiModel = new TokenApiModel();\n        tokenApiModel.access_token = this.auth.getToken()!;\n        tokenApiModel.refresh_token = this.auth.getRefreshToken()!;\n        return this.auth.renewToken(tokenApiModel)\n            .pipe(\n                switchMap((data: TokenApiModel) =&gt; {\n                    this.auth.storeRefreshToken(data.refresh_token)\n                    this.auth.storeToken(data.access_token)\n                    req = req.clone({\n                        setHeaders: {\n                            Authorization: `Bearer ${data.access_token}`\n                        },\n                        withCredentials: false\n                    });\n                    return next.handle(req)\n                }),\n                catchError((err) =&gt; {\n                    return throwError(() =&gt; {\n                        alert(&quot;Token is expired, login again&quot;)\n                        this.router.navigate([&quot;login&quot;])\n                    })\n                })\n            )\n    }\n}\n</code></pre>\n<pre><code>@Injectable({\n  providedIn: 'root'\n})\nexport class SocketService {\n  public stompClient: any;\n  public msg: Array&lt;any&gt; = [];\n\n  constructor() {\n    const serverUrl = 'http://localhost:8080/socket';\n    const ws = new SockJS(serverUrl);\n    this.stompClient = Stomp.over(ws);\n  }\n\n  initializeWebSocketConnection() {\n    const that = this;\n    console.log(this.stompClient); // It work until here \n\n    this.stompClient.connect({}, function (frame: any) {\n      that.stompClient.subscribe('/message', (message: any) =&gt; {\n        console.log(message);\n        if (message.body) {\n\n          that.msg.push(message.body);\n        }\n      });\n      that.stompClient.subscribe('/messages', (message: any) =&gt; {\n        console.log(message);\n        if (message.body) {\n\n          that.msg.push(message.body);\n        }\n      });\n    });\n  }\n\n  sendMessage(message: any) {\n    this.stompClient.send('/app/send/message', {}, message);\n  }\n}\n</code></pre>\n<p>This is logger error\n<a href=\"https://i.stack.imgur.com/BHJOK.png\" rel=\"nofollow noreferrer\">error</a></p>\n<p>I think that it is maybe a conflict of spring security and websocket config</p>\n"},{"tags":["java","spring-boot","spring-data-jpa","rdbms","querydsl"],"comments":[{"owner":{"account_id":4395013,"reputation":1126,"user_id":3582362,"accept_rate":100,"display_name":"Calvin P."},"score":0,"creation_date":1679013456,"post_id":75762615,"comment_id":133649278,"body_markdown":"Have you checked to see if any of the results are duplicated or is it returning B objects that aren’t related to A?","body":"Have you checked to see if any of the results are duplicated or is it returning B objects that aren’t related to A?"},{"owner":{"account_id":22414587,"reputation":9,"user_id":16622828,"display_name":"Kangchan Song"},"score":0,"creation_date":1679016740,"post_id":75762615,"comment_id":133649664,"body_markdown":"@CalvinP. all the B&#39;s id(pk) are unique each other. and all Bs have fk related to A.","body":"@CalvinP. all the B&#39;s id(pk) are unique each other. and all Bs have fk related to A."},{"owner":{"account_id":8761405,"reputation":1504,"user_id":6551263,"display_name":"Chetan Ahirrao"},"score":0,"creation_date":1679027073,"post_id":75762615,"comment_id":133650794,"body_markdown":"And what is the result of direct SQL query on database","body":"And what is the result of direct SQL query on database"}],"owner":{"account_id":22414587,"reputation":9,"user_id":16622828,"display_name":"Kangchan Song"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679025934,"creation_date":1679010664,"question_id":75762615,"body_markdown":"I have 2 Entities in a Spring Boot Project with Spring Data JPA.\r\nMost of the annotations are skipped for easy understanding.\r\n\r\nEntity A\r\n```\r\nclass A {\r\n  @OneToMany\r\n  private List&lt;B&gt; bs;\r\n}\r\n```\r\n\r\nEntity B\r\n```\r\nclass B {\r\n  //...\r\n}\r\n```\r\n\r\nand when I run sql with QueryDSL, like this\r\n```\r\nfrom(a).leftJoin(b).fetchJoin().fetchOne()\r\n```\r\n\r\nthe result of the real sql query ran on DB \r\nand the real Entity are different.\r\nLike the sql returns 10 of Bs but the A Entity has only 4 Bs.\r\nI don&#39;t have any application code filtering Bs.\r\nIs there anything I&#39;m missing?","title":"Spring Data JPA SQL results and Entity results are different","body":"<p>I have 2 Entities in a Spring Boot Project with Spring Data JPA.\nMost of the annotations are skipped for easy understanding.</p>\n<p>Entity A</p>\n<pre><code>class A {\n  @OneToMany\n  private List&lt;B&gt; bs;\n}\n</code></pre>\n<p>Entity B</p>\n<pre><code>class B {\n  //...\n}\n</code></pre>\n<p>and when I run sql with QueryDSL, like this</p>\n<pre><code>from(a).leftJoin(b).fetchJoin().fetchOne()\n</code></pre>\n<p>the result of the real sql query ran on DB\nand the real Entity are different.\nLike the sql returns 10 of Bs but the A Entity has only 4 Bs.\nI don't have any application code filtering Bs.\nIs there anything I'm missing?</p>\n"},{"tags":["java","intellij-idea"],"comments":[{"owner":{"account_id":17258889,"reputation":53,"user_id":12497350,"display_name":"trk"},"score":0,"creation_date":1679008097,"post_id":75762351,"comment_id":133648582,"body_markdown":"I found a possible answer on other [question](https://stackoverflow.com/a/45335127/12497350).","body":"I found a possible answer on other <a href=\"https://stackoverflow.com/a/45335127/12497350\">question</a>."},{"owner":{"account_id":17741504,"reputation":1083,"user_id":12881733,"display_name":"Bill Mair"},"score":0,"creation_date":1679008149,"post_id":75762351,"comment_id":133648589,"body_markdown":"You don&#39;t know where you installed a program?","body":"You don&#39;t know where you installed a program?"}],"answers":[{"tags":[],"owner":{"account_id":2667845,"reputation":10491,"user_id":2305826,"accept_rate":89,"display_name":"MarsAtomic"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679019076,"creation_date":1679018487,"answer_id":75763155,"question_id":75762351,"body_markdown":"If you don&#39;t recall installing a standalone JDK when you installed JetBrains IDEA, it&#39;s probably because you didn&#39;t actually do so.\r\n\r\nFrom the JetBrains [installation guide](https://www.jetbrains.com/help/idea/installation-guide.html#requirements):\r\n\r\n&gt; You do not need to install Java to run IntelliJ IDEA because JetBrains\r\n&gt; Runtime is bundled with the IDE (based on JRE 17). However, to develop\r\n&gt; Java applications, a standalone JDK is required.\r\n\r\nYou should double check by examining your PATH environment variable as advised in one of the comments to your question.\r\n\r\n-   Open the System Control Panel\r\n-   Click the Advanced Settings link\r\n-   Click Environment Variables\r\n-   Look for a listing for JDK or OpenJDK in the PATH variable\r\n\r\nYou can install OpenJDK anywhere, but usually you&#39;re going to find it someplace like `c:\\Program Files\\OpenJDK\\&lt;version&gt;\\` where `&lt;version&gt;` refers to whatever version of JDK you chose to install. Again, because OpenJDK is typically distributed as a ZIP archive, you can literally install it anywhere on your machine, as long as you supply the location of the `bin` directory to your PATH.\r\n\r\nWindows also includes the `where` utility which you can invoke from the command line to search for files, just in case you did install a JDK at some point and just can&#39;t remember where you put it.\r\n\r\nIf you choose not to use the JetBrains runtime, you can always [substitute](https://www.jetbrains.com/help/idea/switching-boot-jdk.html) a separately downloaded and installed version of JDK, or in your case, follow the instructions to point back to the JetBrains runtime.","title":"Location of OpenJDK in Windows 10","body":"<p>If you don't recall installing a standalone JDK when you installed JetBrains IDEA, it's probably because you didn't actually do so.</p>\n<p>From the JetBrains <a href=\"https://www.jetbrains.com/help/idea/installation-guide.html#requirements\" rel=\"nofollow noreferrer\">installation guide</a>:</p>\n<blockquote>\n<p>You do not need to install Java to run IntelliJ IDEA because JetBrains\nRuntime is bundled with the IDE (based on JRE 17). However, to develop\nJava applications, a standalone JDK is required.</p>\n</blockquote>\n<p>You should double check by examining your PATH environment variable as advised in one of the comments to your question.</p>\n<ul>\n<li>Open the System Control Panel</li>\n<li>Click the Advanced Settings link</li>\n<li>Click Environment Variables</li>\n<li>Look for a listing for JDK or OpenJDK in the PATH variable</li>\n</ul>\n<p>You can install OpenJDK anywhere, but usually you're going to find it someplace like <code>c:\\Program Files\\OpenJDK\\&lt;version&gt;\\</code> where <code>&lt;version&gt;</code> refers to whatever version of JDK you chose to install. Again, because OpenJDK is typically distributed as a ZIP archive, you can literally install it anywhere on your machine, as long as you supply the location of the <code>bin</code> directory to your PATH.</p>\n<p>Windows also includes the <code>where</code> utility which you can invoke from the command line to search for files, just in case you did install a JDK at some point and just can't remember where you put it.</p>\n<p>If you choose not to use the JetBrains runtime, you can always <a href=\"https://www.jetbrains.com/help/idea/switching-boot-jdk.html\" rel=\"nofollow noreferrer\">substitute</a> a separately downloaded and installed version of JDK, or in your case, follow the instructions to point back to the JetBrains runtime.</p>\n"},{"tags":[],"owner":{"account_id":19270417,"reputation":71,"user_id":14084448,"display_name":"Chan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679019619,"creation_date":1679019085,"answer_id":75763193,"question_id":75762351,"body_markdown":"First of all, would you mind looking at **Run&gt;Edit Configuration**. You should able to locate installed jdk over there. For my case...\r\n[![enter image description here][1]][1]\r\n\r\nIf you are using msi or exe to install your jdk, you should able to find it in **Control Panel\\Programs\\Programs and Features**. Find the version of it and install the installer again from openjdk and if it exist in your computer, it should have the option to remove or repair.\r\n\r\nExtra: I don&#39;t know which company openjdk you installed. For example, if you use redhat, the default location is **C:\\Program Files\\RedHat\\xxx**. Also by re-downloading any version of openjdk from the source, you should able to get hints what is the default location of the openjdk.\r\n\r\nTo make sure you installed your openjdk and configured JAVA_HOME, you can go cmd and type &quot;java --version&quot;\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/g2Tk2.png\r\n  [2]: https://i.stack.imgur.com/CRtjJ.png","title":"Location of OpenJDK in Windows 10","body":"<p>First of all, would you mind looking at <strong>Run&gt;Edit Configuration</strong>. You should able to locate installed jdk over there. For my case...\n<a href=\"https://i.stack.imgur.com/g2Tk2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/g2Tk2.png\" alt=\"enter image description here\" /></a></p>\n<p>If you are using msi or exe to install your jdk, you should able to find it in <strong>Control Panel\\Programs\\Programs and Features</strong>. Find the version of it and install the installer again from openjdk and if it exist in your computer, it should have the option to remove or repair.</p>\n<p>Extra: I don't know which company openjdk you installed. For example, if you use redhat, the default location is <strong>C:\\Program Files\\RedHat\\xxx</strong>. Also by re-downloading any version of openjdk from the source, you should able to get hints what is the default location of the openjdk.</p>\n<p>To make sure you installed your openjdk and configured JAVA_HOME, you can go cmd and type &quot;java --version&quot;</p>\n<p><a href=\"https://i.stack.imgur.com/CRtjJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CRtjJ.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":20347862,"reputation":1,"user_id":21414877,"display_name":"Nataly Mota"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1264,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":2,"score":-2,"last_activity_date":1679025722,"creation_date":1679007390,"question_id":75762351,"body_markdown":"I just upgraded IntelliJ IDEA Community edition; but now it cannot find the location of my OpenJDK in order to use it to compile; and it&#39;s asking me to point it (the Integrated Development Environment) to it by showing it exactly what folder it is installed on. Yet, I cannot find that folder. I don&#39;t know which one it is. Can anyone help me with that, please?\r\n\r\nI tried browsing the folders &quot;Program Files,&quot; &quot;Program Files (x86),&quot; &quot;Windows&quot; and &quot;Users&quot; for it as well as searching file explorer for it; although nothing came up. Yet, I know it is installed an VS Code uses it to compile Java. I was expecting to find a folder called either &quot;OpenJDK&quot; or &quot;JDK,&quot; but did not find either.\r\n\r\nI would really appreciate it!\r\n\r\nSincerely,\r\n\r\n\r\nNataly","title":"Location of OpenJDK in Windows 10","body":"<p>I just upgraded IntelliJ IDEA Community edition; but now it cannot find the location of my OpenJDK in order to use it to compile; and it's asking me to point it (the Integrated Development Environment) to it by showing it exactly what folder it is installed on. Yet, I cannot find that folder. I don't know which one it is. Can anyone help me with that, please?</p>\n<p>I tried browsing the folders &quot;Program Files,&quot; &quot;Program Files (x86),&quot; &quot;Windows&quot; and &quot;Users&quot; for it as well as searching file explorer for it; although nothing came up. Yet, I know it is installed an VS Code uses it to compile Java. I was expecting to find a folder called either &quot;OpenJDK&quot; or &quot;JDK,&quot; but did not find either.</p>\n<p>I would really appreciate it!</p>\n<p>Sincerely,</p>\n<p>Nataly</p>\n"},{"tags":["java","spring","spring-mvc","weblogic"],"comments":[{"owner":{"account_id":11377012,"reputation":12772,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1591690877,"post_id":62277044,"comment_id":110143609,"body_markdown":"Does this answer your question? [javax.servlet.jsp.JspTagException: No message found under code &#39;errors.contact.sysadmin.msg&#39; for locale &#39;en\\_US&#39;.\\]](https://stackoverflow.com/questions/29081844/javax-servlet-jsp-jsptagexception-no-message-found-under-code-errors-contact-s)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/29081844/javax-servlet-jsp-jsptagexception-no-message-found-under-code-errors-contact-s\">javax.servlet.jsp.JspTagException: No message found under code &#39;errors.contact.sysadmin.msg&#39; for locale &#39;en_US&#39;.&#93;</a>"},{"owner":{"account_id":3895538,"reputation":517,"user_id":3224680,"accept_rate":50,"display_name":"r-developer"},"score":1,"creation_date":1591694518,"post_id":62277044,"comment_id":110145526,"body_markdown":"@AnishB. I already checked this but this didnt help. but I have one doubt, i saw in out application there is no messageSource bean is defined. this might cause this issue ?\nbut this is working fine in Spring 4","body":"@AnishB. I already checked this but this didnt help. but I have one doubt, i saw in out application there is no messageSource bean is defined. this might cause this issue ? but this is working fine in Spring 4"}],"answers":[{"tags":[],"owner":{"account_id":26654459,"reputation":3,"user_id":20268210,"display_name":"Cold"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679025686,"creation_date":1679025596,"answer_id":75763649,"question_id":62277044,"body_markdown":"I had the same issue. \r\nThat is how I resolved it:\r\n\r\nI had the following tag: &lt;spring:message var=&quot;variable&quot;/&gt;\r\n\r\nchecking the source code of MessageTag here: \r\n\r\n &lt;http://www.java2s.com/example/java-src/pkg/org/springframework/web/servlet/tags/messagetag-d6db3.html&gt;\r\n\r\nI was able to see what was triggering the exception, I had no code, text or message set up: \r\n\r\n[Method of the MessageTag class that was triggering the exception][1]\r\n\r\nSo I changed my tag to:\r\n\r\n&lt;spring:message text=&quot;${variable}&quot;/&gt;\r\n\r\nAnd it worked.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/KXKEZ.png","title":"JspTagException: No resolvable message -- Weblogic 12.2 and Spring 5","body":"<p>I had the same issue.\nThat is how I resolved it:</p>\n<p>I had the following tag: &lt;spring:message var=&quot;variable&quot;/&gt;</p>\n<p>checking the source code of MessageTag here:</p>\n<p><a href=\"http://www.java2s.com/example/java-src/pkg/org/springframework/web/servlet/tags/messagetag-d6db3.html\" rel=\"nofollow noreferrer\">http://www.java2s.com/example/java-src/pkg/org/springframework/web/servlet/tags/messagetag-d6db3.html</a></p>\n<p>I was able to see what was triggering the exception, I had no code, text or message set up:</p>\n<p><a href=\"https://i.stack.imgur.com/KXKEZ.png\" rel=\"nofollow noreferrer\">Method of the MessageTag class that was triggering the exception</a></p>\n<p>So I changed my tag to:</p>\n<p>&lt;spring:message text=&quot;${variable}&quot;/&gt;</p>\n<p>And it worked.</p>\n"}],"owner":{"account_id":3895538,"reputation":517,"user_id":3224680,"accept_rate":50,"display_name":"r-developer"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":267,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1679025686,"creation_date":1591686919,"question_id":62277044,"body_markdown":"We are trying to upgrade our application from Spring 4 to Spring 5 (5.2.6).\r\n\r\nAs part of this change we have replaced all the jars build the application and deployed in WebLogic Server.\r\n\r\nBut while access a specific jsp page I am getting the below exception but I am not getting why and how to resolve it.\r\n\r\n    &lt;ERROR&gt; &lt;HTTP&gt; &lt;BEA-101017&gt; &lt;ServletContext@234560000[app:ticketapp module:/ path:null spec-version:3.1]] Root cause of ServletException&gt;\r\n    javax.servlet.jsp.JspTagException: No resolvable message\r\n    at org.spingframework.web.servlet.tags.MessageTag.resolveMessage(MessageTag.java:338)\r\n    at org.spingframework.web.servlet.tags.MessageTag.doEndTag(MessageTag.java:274)\r\n    at jsp_servlet._ticketprocessing.__ticketdetails._jsp_tag0(_ticketdetails.java:544)\r\n    at jsp_servlet._ticketprocessing.__ticketdetails._jspService(_ticketdetails.java:330)\r\n    at weblogic.servlet.jsp.JspBase.serviceInternal(JspBase.java:35)\r\n\r\nHow to fix this issue ?","title":"JspTagException: No resolvable message -- Weblogic 12.2 and Spring 5","body":"<p>We are trying to upgrade our application from Spring 4 to Spring 5 (5.2.6).</p>\n\n<p>As part of this change we have replaced all the jars build the application and deployed in WebLogic Server.</p>\n\n<p>But while access a specific jsp page I am getting the below exception but I am not getting why and how to resolve it.</p>\n\n<pre><code>&lt;ERROR&gt; &lt;HTTP&gt; &lt;BEA-101017&gt; &lt;ServletContext@234560000[app:ticketapp module:/ path:null spec-version:3.1]] Root cause of ServletException&gt;\njavax.servlet.jsp.JspTagException: No resolvable message\nat org.spingframework.web.servlet.tags.MessageTag.resolveMessage(MessageTag.java:338)\nat org.spingframework.web.servlet.tags.MessageTag.doEndTag(MessageTag.java:274)\nat jsp_servlet._ticketprocessing.__ticketdetails._jsp_tag0(_ticketdetails.java:544)\nat jsp_servlet._ticketprocessing.__ticketdetails._jspService(_ticketdetails.java:330)\nat weblogic.servlet.jsp.JspBase.serviceInternal(JspBase.java:35)\n</code></pre>\n\n<p>How to fix this issue ?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":1,"creation_date":1679016435,"post_id":75762942,"comment_id":133649627,"body_markdown":"Looks like a bug in the java compiler. It should either produce a compiler error or produce a valid class file, and never produce an invalid class file like it did here. I&#39;d suggest making a [mcve] first - something that I can copy and paste into my IDE and reproduce the problem.","body":"Looks like a bug in the java compiler. It should either produce a compiler error or produce a valid class file, and never produce an invalid class file like it did here. I&#39;d suggest making a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> first - something that I can copy and paste into my IDE and reproduce the problem."},{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1679016602,"post_id":75762942,"comment_id":133649652,"body_markdown":"From the looks of it, it seems like it might be getting stuck on the giant switch statement you wrote. Perhaps changing it to the old style (C-like) switch statement might help.","body":"From the looks of it, it seems like it might be getting stuck on the giant switch statement you wrote. Perhaps changing it to the old style (C-like) switch statement might help."},{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1679016854,"post_id":75762942,"comment_id":133649673,"body_markdown":"Also, include which compiler you are using in the question. If you are using the eclipse compiler, try compiling it with javac, and vice versa.","body":"Also, include which compiler you are using in the question. If you are using the eclipse compiler, try compiling it with javac, and vice versa."},{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1679017238,"post_id":75762942,"comment_id":133649716,"body_markdown":"Found [this](https://stackoverflow.com/q/69197046/5133585) which seems similar. If you are using Eclipse, please update.","body":"Found <a href=\"https://stackoverflow.com/q/69197046/5133585\">this</a> which seems similar. If you are using Eclipse, please update."},{"owner":{"account_id":28037678,"reputation":1,"user_id":21415765,"display_name":"andykasen13"},"score":0,"creation_date":1679667691,"post_id":75762942,"comment_id":133767135,"body_markdown":"I&#39;m using VS Code. This works in IntelliJ IDEA, but I find VS Code to be much cleaner. I&#39;ve tried moving this code to a different computer running a different JDK and ran into the same issue.","body":"I&#39;m using VS Code. This works in IntelliJ IDEA, but I find VS Code to be much cleaner. I&#39;ve tried moving this code to a different computer running a different JDK and ran into the same issue."},{"owner":{"account_id":28037678,"reputation":1,"user_id":21415765,"display_name":"andykasen13"},"score":0,"creation_date":1679669302,"post_id":75762942,"comment_id":133767651,"body_markdown":"I turned it into an old-style switch statement and nothing changed:\nhttps://drive.google.com/file/d/1OYw9T2AHfxoEyRR6BahjAqEA__L0UcFX/view?usp=sharing","body":"I turned it into an old-style switch statement and nothing changed: <a href=\"https://drive.google.com/file/d/1OYw9T2AHfxoEyRR6BahjAqEA__L0UcFX/view?usp=sharing\" rel=\"nofollow noreferrer\">drive.google.com/file/d/1OYw9T2AHfxoEyRR6BahjAqEA__L0UcFX/&hellip;</a>"}],"owner":{"account_id":28037678,"reputation":1,"user_id":21415765,"display_name":"andykasen13"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679025577,"creation_date":1679015309,"question_id":75762942,"body_markdown":"I&#39;m trying to write some code for my Programming Languages class and I keep getting this &#39;Bad type on operand stack&#39; java.lang.VerifyError error. This is happening in my Lexer class.\r\n\r\nI honestly have no idea what this error means. Do I need a new JDK? I&#39;m using JavaSE-17. \r\n\r\nHere is my output:\r\n\r\n```\r\nRunning /Users/user/OneDrive/Documents/ALLOFMYCODE/Programming-Languages-main/My Language/testInput/comments.mariokart...\r\nException in thread &quot;main&quot; java.lang.VerifyError: Bad type on operand stack\r\nException Details:\r\n  Location:\r\n    MarioKart/LexicalAnalysis/Lexer.getNextLexeme()LMarioKart/LexicalAnalysis/Lexeme; @620: invokespecial\r\n  Reason:\r\n    Type &#39;java/lang/Object&#39; (current frame, stack[3]) is not assignable to &#39;MarioKart/LexicalAnalysis/Type&#39;\r\n  Current Frame:\r\n    bci: @620\r\n    flags: { }\r\n    locals: { &#39;MarioKart/LexicalAnalysis/Lexer&#39;, integer }\r\n    stack: { uninitialized 594, uninitialized 594, integer, &#39;java/lang/Object&#39; }\r\n  Bytecode:\r\n    0000000: 2ab6 015e 3c1b ab00 0000 02c4 0000 0018\r\n    0000010: 0000 0009 0000 00ca 0000 000a 0000 00ca\r\n    0000020: 0000 000d 0000 00ca 0000 0020 0000 00ca\r\n    0000030: 0000 0021 0000 0153 0000 0022 0000 0162\r\n    0000040: 0000 0026 0000 0167 0000 0028 0000 00ea\r\n    0000050: 0000 0029 0000 00f9 0000 002a 0000 02a6\r\n    0000060: 0000 002b 0000 0197 0000 002c 0000 0144\r\n    0000070: 0000 002d 0000 01d6 0000 002e 0000 0135\r\n    0000080: 0000 002f 0000 0215 0000 003b 0000 0126\r\n    0000090: 0000 003c 0000 026a 0000 003d 0000 0288\r\n    00000a0: 0000 003e 0000 024c 0000 005b 0000 00cc\r\n    00000b0: 0000 005d 0000 00db 0000 007b 0000 0108\r\n    00000c0: 0000 007c 0000 017f 0000 007d 0000 0117\r\n    00000d0: 01b0 bb01 5459 2ab4 0119 b201 60b7 0159\r\n    00000e0: b0bb 0154 592a b401 19b2 0163 b701 59b0\r\n    00000f0: bb01 5459 2ab4 0119 b201 66b7 0159 b0bb\r\n    0000100: 0154 592a b401 19b2 0169 b701 59b0 bb01\r\n    0000110: 5459 2ab4 0119 b201 6cb7 0159 b0bb 0154\r\n    0000120: 592a b401 19b2 016f b701 59b0 bb01 5459\r\n    0000130: 2ab4 0119 b201 72b7 0159 b0bb 0154 592a\r\n    0000140: b401 19b2 0175 b701 59b0 bb01 5459 2ab4\r\n    0000150: 0119 b201 78b7 0159 b0bb 0154 592a b401\r\n    0000160: 19b2 00c5 b701 59b0 2ab6 017b b02a 1026\r\n    0000170: b601 7e99 0174 bb01 5459 2ab4 0119 b200\r\n    0000180: e8b7 0159 b02a 107c b601 7e99 015c bb01\r\n    0000190: 5459 2ab4 0119 b200 edb7 0159 b02a 102b\r\n    00001a0: b601 7e99 0012 bb01 5459 2ab4 0119 b200\r\n    00001b0: bbb7 0159 b02a 103d b601 7e99 0012 bb01\r\n    00001c0: 5459 2ab4 0119 b200 a7b7 0159 b0bb 0154\r\n    00001d0: 592a b401 19b2 0093 b701 59b0 2a10 2db6\r\n    00001e0: 017e 9900 12bb 0154 592a b401 19b2 00c0\r\n    00001f0: b701 59b0 2a10 3db6 017e 9900 12bb 0154\r\n    0000200: 592a b401 19b2 00a7 b701 59b0 bb01 5459\r\n    0000210: 2ab4 0119 b200 98b7 0159 b02a 102f b601\r\n    0000220: 7e99 000a 2ab6 0180 a700 bf2a 103d b601\r\n    0000230: 7e99 0012 bb01 5459 2ab4 0119 b200 b6b7\r\n    0000240: 0159 b0bb 0154 592a b401 19b2 00a2 b701\r\n    0000250: 59b0 bb01 5459 2ab4 0119 2a10 3db6 017e\r\n    0000260: 9900 09b2 00d9 a700 06b2 00d4 b701 59b0\r\n    0000270: bb01 5459 2ab4 0119 2a10 3db6 017e 9900\r\n    0000280: 09b2 00e3 a700 06b2 00de b701 59b0 bb01\r\n    0000290: 5459 2ab4 0119 2a10 3db6 017e 9900 09b2\r\n    00002a0: 00ca a700 06b2 008e b701 59b0 bb01 5459\r\n    00002b0: 2ab4 0119 2a10 3db6 017e 9900 09b2 00b1\r\n    00002c0: a700 06b2 009d b701 59b0 2abb 0183 5913\r\n    00002d0: 0185 b701 871b b601 8913 018d b601 8fb6\r\n    00002e0: 0192 b601 9601 b001 b0\r\n  Stackmap Table:\r\n    append_frame(@208,Integer)\r\n    same_frame(@210)\r\n    same_frame(@225)\r\n    same_frame(@240)\r\n    same_frame(@255)\r\n    same_frame(@270)\r\n    same_frame(@285)\r\n    same_frame(@300)\r\n    same_frame(@315)\r\n    same_frame(@330)\r\n    same_frame(@345)\r\n    same_frame(@360)\r\n    same_frame(@365)\r\n    same_frame(@389)\r\n    same_frame(@413)\r\n    same_frame(@437)\r\n    same_frame(@461)\r\n    same_frame(@476)\r\n    same_frame(@500)\r\n    same_frame(@524)\r\n    same_frame(@539)\r\n    same_frame(@555)\r\n    same_frame(@579)\r\n    same_frame(@594)\r\n    full_frame(@617,{Object[#1],Integer},{Uninitialized[#594],Uninitialized[#594],Integer})\r\n    full_frame(@620,{Object[#1],Integer},{Uninitialized[#594],Uninitialized[#594],Integer,Object[#3]})\r\n    same_frame(@624)\r\n    full_frame(@647,{Object[#1],Integer},{Uninitialized[#624],Uninitialized[#624],Integer})\r\n    full_frame(@650,{Object[#1],Integer},{Uninitialized[#624],Uninitialized[#624],Integer,Object[#3]})\r\n    same_frame(@654)\r\n    full_frame(@677,{Object[#1],Integer},{Uninitialized[#654],Uninitialized[#654],Integer})\r\n    full_frame(@680,{Object[#1],Integer},{Uninitialized[#654],Uninitialized[#654],Integer,Object[#3]})\r\n    same_frame(@684)\r\n    full_frame(@707,{Object[#1],Integer},{Uninitialized[#684],Uninitialized[#684],Integer})\r\n    full_frame(@710,{Object[#1],Integer},{Uninitialized[#684],Uninitialized[#684],Integer,Object[#3]})\r\n    same_frame(@714)\r\n    same_frame(@743)\r\n\r\n        at MarioKart.MarioKart.runFile(MarioKart.java:36)\r\n        at MarioKart.MarioKart.main(MarioKart.java:15)\r\n```\r\n\r\nAnd here is my code:\r\n\r\n```\r\npackage MarioKart.LexicalAnalysis;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.HashMap;\r\n\r\nimport MarioKart.MarioKart;\r\nimport static MarioKart.LexicalAnalysis.Type.*;\r\n\r\npublic class Lexer {\r\n    //--------------------- Instance Variables ----------------------\r\n    private final String source;\r\n    private final ArrayList&lt;Lexeme&gt; lexemes = new ArrayList&lt;&gt;();\r\n    \r\n    private int currentPosition = 0;\r\n    private int startOfCurrentLexeme = 0;\r\n    private int lineNumber = 1;\r\n    private final HashMap&lt;String, Type&gt; keywords;\r\n\r\n\r\n    //--------------------- getKeywords() ---------------------------\r\n    private HashMap&lt;String, Type&gt; getKeywords() {\r\n        HashMap&lt;String, Type&gt; keywords = new HashMap&lt;&gt;();\r\n\r\n        keywords.put(&quot;requires&quot;, REQUIRES);\r\n        keywords.put(&quot;summon&quot;, SUMMON);\r\n        keywords.put(&quot;using&quot;, USING);\r\n        keywords.put(&quot;garage&quot;, GARAGE);\r\n        keywords.put(&quot;from&quot;, FROM);\r\n        keywords.put(&quot;to&quot;, TO);\r\n        keywords.put(&quot;return&quot;, RETURN);\r\n        keywords.put(&quot;timeTrial&quot;, TIMETRIAL);\r\n\r\n        keywords.put(&quot;first&quot;, FIRST);\r\n        keywords.put(&quot;second&quot;, SECOND);\r\n        keywords.put(&quot;third&quot;, THIRD);\r\n        keywords.put(&quot;fourth&quot;, FOURTH);\r\n        keywords.put(&quot;fifth&quot;, FIFTH);\r\n        keywords.put(&quot;sixth&quot;, SIXTH);\r\n        keywords.put(&quot;seventh&quot;, SEVENTH);\r\n        keywords.put(&quot;eighth&quot;, EIGHTH);\r\n        keywords.put(&quot;ninth&quot;, NINTH);\r\n        keywords.put(&quot;tenth&quot;, TENTH);\r\n        keywords.put(&quot;eleventh&quot;, ELEVENTH);\r\n        keywords.put(&quot;twelfth&quot;, TWELFTH);\r\n        keywords.put(&quot;last&quot;, LAST);\r\n\r\n        keywords.put(&quot;tiesWith&quot;, EQUALS);\r\n        keywords.put(&quot;boost&quot;, PLUS);\r\n        keywords.put(&quot;slip&quot;, MINUS);\r\n        keywords.put(&quot;superStar&quot;, TIMES);\r\n        keywords.put(&quot;blueShell&quot;, DIVIDED_BY);\r\n        keywords.put(&quot;multiMushroom&quot;, PLUS_EQUALS);\r\n        keywords.put(&quot;redShell&quot;, MINUS_EQUALS);\r\n        keywords.put(&quot;goldenMushroom&quot;, TIMES_EQUALS);\r\n        keywords.put(&quot;fallOffTheMap&quot;, DIVIDED_EQUALS);\r\n        keywords.put(&quot;overtake&quot;, PLUS_PLUS);\r\n        keywords.put(&quot;getPassed&quot;, MINUS_MINUS);\r\n        keywords.put(&quot;not&quot;, NOT);\r\n        keywords.put(&quot;isTiedWith&quot;, EQUALS_EQUALS);\r\n        keywords.put(&quot;isNotTiedWith&quot;, NOT_EQUALS);\r\n        keywords.put(&quot;isFurtherThan&quot;, GREATER_THAN);\r\n        keywords.put(&quot;isBetterThan&quot;, GREATER_THAN_OR_EQUAL_TO);\r\n        keywords.put(&quot;isBehind&quot;, LESS_THAN);\r\n        keywords.put(&quot;isWorseThan&quot;, LESS_THAN_OR_EQUAL_TO);\r\n        keywords.put(&quot;and&quot;, AND);\r\n        keywords.put(&quot;or&quot;, OR);\r\n\r\n        keywords.put(&quot;int&quot;, INT);\r\n        keywords.put(&quot;real&quot;, REAL);\r\n        keywords.put(&quot;boolean&quot;, BOOLEAN);\r\n        keywords.put(&quot;string&quot;, STRING);\r\n        keywords.put(&quot;array&quot;, ARRAY);\r\n\r\n        return keywords;\r\n    }\r\n\r\n    //---------- Constructor --------\r\n    public Lexer(String source) {\r\n        this.source = source;\r\n        this.keywords = getKeywords();\r\n        this.currentPosition = 0;\r\n        this.startOfCurrentLexeme = 0;\r\n        this.lineNumber = 1;\r\n    }\r\n\r\n    //---------------------- Helper Methods -----------------------\r\n    private boolean isAtEnd() {\r\n        return currentPosition &gt;= source.length();\r\n    }\r\n\r\n    private char peek() {\r\n        if (isAtEnd()) return &#39;\\0&#39;;\r\n        return source.charAt(currentPosition);\r\n    } \r\n    private char peekNext() {\r\n        if(currentPosition + 1 &gt;= source.length()) return &#39;\\0&#39;;\r\n        return source.charAt(currentPosition + 1);\r\n    }\r\n    \r\n    private boolean match(char expected) {\r\n        if(isAtEnd() || source.charAt(currentPosition) != expected ) return false;\r\n        currentPosition++;\r\n        return true;\r\n    } \r\n\r\n    private char advance() {\r\n        char currentChar = source.charAt(currentPosition);\r\n        if(currentChar == &#39;\\n&#39; || currentChar == &#39;\\r&#39;) lineNumber++;\r\n        currentPosition++;\r\n        return currentChar;\r\n    }\r\n\r\n    // -------------------- Supplemental Helper Methods --------------------\r\n    private boolean isDigit(char c) {\r\n        return c &gt;= &#39;0&#39; &amp;&amp; c &lt;= &#39;9&#39;;\r\n    }\r\n\r\n    private boolean isAlpha(char c) {\r\n        return (c &gt;= &#39;A&#39; &amp;&amp; c &lt;= &#39;Z&#39;) ||\r\n               (c &gt;= &#39;a&#39; &amp;&amp; c &lt;= &#39;z&#39;) ||\r\n               (c == &#39;_&#39;);\r\n    }\r\n\r\n    private boolean isAlphaNumeric(char c) {\r\n        return isAlpha(c) || isDigit(c);\r\n    }\r\n\r\n    // --------------------- Error Reporting -----------------------\r\n    private void error(String message) {\r\n        MarioKart.syntaxError(message, lineNumber);\r\n    }\r\n\r\n    //----------------------- lex() function ----------------------------\r\n    public ArrayList&lt;Lexeme&gt; lex() {\r\n        while(!isAtEnd()) {\r\n            startOfCurrentLexeme = currentPosition;\r\n            Lexeme nextLexeme = getNextLexeme();\r\n            if(nextLexeme != null) lexemes.add(nextLexeme);\r\n        }\r\n        \r\n        lexemes.add(new Lexeme(lineNumber, END_OF_FILE));\r\n        return lexemes;\r\n    }\r\n\r\n    // --------------------- lex Helper Functions ---------------------------\r\n    private Lexeme getNextLexeme() {\r\n        char c = advance();\r\n        switch(c) {\r\n            //Ignore whitespace\r\n            case &#39; &#39;, &#39;\\t&#39;, &#39;\\n&#39;, &#39;\\r&#39; -&gt; {\r\n                return null;\r\n            }\r\n            \r\n            //one digit\r\n            case &#39;[&#39; -&gt; { return new Lexeme(lineNumber, OPEN_BRACKET); }\r\n            case &#39;]&#39; -&gt; { return new Lexeme(lineNumber, CLOSED_BRACKET); }\r\n            case &#39;(&#39; -&gt; { return new Lexeme(lineNumber, OPEN_PARENTHESIS); }\r\n            case &#39;)&#39; -&gt; { return new Lexeme(lineNumber, CLOSED_PARENTHESIS); }\r\n            case &#39;{&#39; -&gt; { return new Lexeme(lineNumber, OPEN_CURLY); }\r\n            case &#39;}&#39; -&gt; { return new Lexeme(lineNumber, CLOSED_CURLY); }\r\n            case &#39;;&#39; -&gt; { return new Lexeme(lineNumber, SEMICOLON); }\r\n            case &#39;.&#39; -&gt; { return new Lexeme(lineNumber, DOT); }\r\n            case &#39;,&#39; -&gt; { return new Lexeme(lineNumber, COMMA); }\r\n            case &#39;!&#39; -&gt; { return new Lexeme(lineNumber, NOT); }\r\n            case &#39;%&#39; -&gt; { return new Lexeme(lineNumber, MOD); }\r\n            case &#39;&quot;&#39; -&gt; { return lexString(); }\r\n            case &#39;1&#39;, &#39;2&#39;, &#39;3&#39;, &#39;4&#39;, &#39;5&#39;, &#39;6&#39;, &#39;7&#39;, &#39;8&#39;, &#39;9&#39;, &#39;0&#39; -&gt; { return lexNumber(); }\r\n\r\n            //two digits\r\n            case &#39;&amp;&#39; -&gt; { if(match(&#39;&amp;&#39;)) return new Lexeme(lineNumber, AND); }\r\n            case &#39;|&#39; -&gt; { if(match(&#39;|&#39;)) return new Lexeme(lineNumber, OR); }\r\n\r\n            //one OR two digits :(\r\n            case &#39;+&#39; -&gt; {\r\n                if(match(&#39;+&#39;)) return new Lexeme(lineNumber, PLUS_PLUS);\r\n                else if(match(&#39;=&#39;)) return new Lexeme(lineNumber, PLUS_EQUALS);\r\n                else return new Lexeme(lineNumber, PLUS);\r\n            }\r\n            case &#39;-&#39; -&gt; {\r\n                if(match(&#39;-&#39;)) return new Lexeme(lineNumber, MINUS_MINUS);\r\n                else if(match(&#39;=&#39;)) return new Lexeme(lineNumber, PLUS_EQUALS);\r\n                else return new Lexeme(lineNumber, MINUS);\r\n            }\r\n            case &#39;/&#39; -&gt; {\r\n                if(match(&#39;/&#39;)) lexComments();\r\n                else if(match(&#39;=&#39;)) return new Lexeme(lineNumber, DIVIDED_EQUALS);\r\n                else return new Lexeme(lineNumber, DIVIDED_BY);\r\n            }\r\n\r\n            //only two options\r\n            case &#39;&gt;&#39; -&gt; { return new Lexeme(lineNumber, match(&#39;=&#39;) ? GREATER_THAN_OR_EQUAL_TO : GREATER_THAN); }\r\n            case &#39;&lt;&#39; -&gt; { return new Lexeme(lineNumber, match(&#39;=&#39;) ? LESS_THAN_OR_EQUAL_TO : LESS_THAN); }\r\n            case &#39;=&#39; -&gt; { return new Lexeme(lineNumber, match(&#39;=&#39;) ? EQUALS_EQUALS : EQUALS); }\r\n            case &#39;*&#39; -&gt; { return new Lexeme(lineNumber, match(&#39;=&#39;) ? TIMES_EQUALS : TIMES); }\r\n\r\n            //put NOTHING beneath these cases pls\r\n            default -&gt; {\r\n                if(isDigit(c)) return lexNumber();\r\n                else if(isAlpha(c)) return lexIdentifierOrKeyword();\r\n                else {\r\n                    error(&quot;bro what is &#39;&quot; + c + &quot;&#39;. i do not recognize it. but then again i dont recognize half of what goes on in my calc class sooooooo&quot;);\r\n                    return null;\r\n                }\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    private Lexeme lexString() {\r\n        while( !(isAtEnd() || peek() == &#39;&quot;&#39;)) advance();\r\n\r\n        String str = source.substring(startOfCurrentLexeme + 1, currentPosition);\r\n\r\n        if(isAtEnd()) error(&quot;you didn&#39;t close your string :(. String: &#39;&quot; + str + &quot;&#39;&quot;);\r\n        else advance();\r\n\r\n        return new Lexeme(lineNumber, str, STRING);\r\n    }\r\n\r\n    private void lexComments() {\r\n        while( !(isAtEnd() || peek() == &#39;\\n&#39;)) advance();\r\n\r\n    }\r\n\r\n    private Lexeme lexNumber() {\r\n        boolean isInteger = true;\r\n        while(isDigit(peek())) advance();\r\n\r\n        //checking if int or real\r\n        if (peek() == &#39;.&#39;) {\r\n            isInteger = false;\r\n            if(!isDigit(peekNext())) {\r\n                String malformedReal = source.substring(startOfCurrentLexeme, currentPosition + 2);\r\n                error(&quot;that isn&#39;t a number!!! silly goose. your failure: &#39;&quot; + malformedReal + &quot;&#39;&quot;);\r\n            }\r\n            advance();\r\n            while(isDigit(peek())) advance();\r\n        }\r\n\r\n        String numberString = source.substring(startOfCurrentLexeme, currentPosition);\r\n        if(isInteger) { \r\n            int intValue = Integer.parseInt(numberString);\r\n            return new Lexeme(lineNumber, intValue, INT);\r\n        } else {\r\n            double realValue = Double.parseDouble(numberString);\r\n            return new Lexeme(lineNumber, realValue, REAL);\r\n        }\r\n\r\n    }\r\n\r\n    private Lexeme lexIdentifierOrKeyword() {\r\n        while(isAlphaNumeric(peek())) advance();\r\n\r\n        String text = source.substring(startOfCurrentLexeme, currentPosition);\r\n        Type type = keywords.get(text);\r\n\r\n        if (type == null) return new Lexeme(lineNumber, text, IDENTIFIER);\r\n\r\n        else if(type == TRUE) return new Lexeme(lineNumber, true, TRUE);\r\n        else if(type == FALSE) return new Lexeme(lineNumber, false, FALSE);\r\n\r\n        return new Lexeme(lineNumber, type);\r\n    }\r\n}\r\n```","title":"Bad type on operand stack: Creating a Language in Java and trying to use Lexer","body":"<p>I'm trying to write some code for my Programming Languages class and I keep getting this 'Bad type on operand stack' java.lang.VerifyError error. This is happening in my Lexer class.</p>\n<p>I honestly have no idea what this error means. Do I need a new JDK? I'm using JavaSE-17.</p>\n<p>Here is my output:</p>\n<pre><code>Running /Users/user/OneDrive/Documents/ALLOFMYCODE/Programming-Languages-main/My Language/testInput/comments.mariokart...\nException in thread &quot;main&quot; java.lang.VerifyError: Bad type on operand stack\nException Details:\n  Location:\n    MarioKart/LexicalAnalysis/Lexer.getNextLexeme()LMarioKart/LexicalAnalysis/Lexeme; @620: invokespecial\n  Reason:\n    Type 'java/lang/Object' (current frame, stack[3]) is not assignable to 'MarioKart/LexicalAnalysis/Type'\n  Current Frame:\n    bci: @620\n    flags: { }\n    locals: { 'MarioKart/LexicalAnalysis/Lexer', integer }\n    stack: { uninitialized 594, uninitialized 594, integer, 'java/lang/Object' }\n  Bytecode:\n    0000000: 2ab6 015e 3c1b ab00 0000 02c4 0000 0018\n    0000010: 0000 0009 0000 00ca 0000 000a 0000 00ca\n    0000020: 0000 000d 0000 00ca 0000 0020 0000 00ca\n    0000030: 0000 0021 0000 0153 0000 0022 0000 0162\n    0000040: 0000 0026 0000 0167 0000 0028 0000 00ea\n    0000050: 0000 0029 0000 00f9 0000 002a 0000 02a6\n    0000060: 0000 002b 0000 0197 0000 002c 0000 0144\n    0000070: 0000 002d 0000 01d6 0000 002e 0000 0135\n    0000080: 0000 002f 0000 0215 0000 003b 0000 0126\n    0000090: 0000 003c 0000 026a 0000 003d 0000 0288\n    00000a0: 0000 003e 0000 024c 0000 005b 0000 00cc\n    00000b0: 0000 005d 0000 00db 0000 007b 0000 0108\n    00000c0: 0000 007c 0000 017f 0000 007d 0000 0117\n    00000d0: 01b0 bb01 5459 2ab4 0119 b201 60b7 0159\n    00000e0: b0bb 0154 592a b401 19b2 0163 b701 59b0\n    00000f0: bb01 5459 2ab4 0119 b201 66b7 0159 b0bb\n    0000100: 0154 592a b401 19b2 0169 b701 59b0 bb01\n    0000110: 5459 2ab4 0119 b201 6cb7 0159 b0bb 0154\n    0000120: 592a b401 19b2 016f b701 59b0 bb01 5459\n    0000130: 2ab4 0119 b201 72b7 0159 b0bb 0154 592a\n    0000140: b401 19b2 0175 b701 59b0 bb01 5459 2ab4\n    0000150: 0119 b201 78b7 0159 b0bb 0154 592a b401\n    0000160: 19b2 00c5 b701 59b0 2ab6 017b b02a 1026\n    0000170: b601 7e99 0174 bb01 5459 2ab4 0119 b200\n    0000180: e8b7 0159 b02a 107c b601 7e99 015c bb01\n    0000190: 5459 2ab4 0119 b200 edb7 0159 b02a 102b\n    00001a0: b601 7e99 0012 bb01 5459 2ab4 0119 b200\n    00001b0: bbb7 0159 b02a 103d b601 7e99 0012 bb01\n    00001c0: 5459 2ab4 0119 b200 a7b7 0159 b0bb 0154\n    00001d0: 592a b401 19b2 0093 b701 59b0 2a10 2db6\n    00001e0: 017e 9900 12bb 0154 592a b401 19b2 00c0\n    00001f0: b701 59b0 2a10 3db6 017e 9900 12bb 0154\n    0000200: 592a b401 19b2 00a7 b701 59b0 bb01 5459\n    0000210: 2ab4 0119 b200 98b7 0159 b02a 102f b601\n    0000220: 7e99 000a 2ab6 0180 a700 bf2a 103d b601\n    0000230: 7e99 0012 bb01 5459 2ab4 0119 b200 b6b7\n    0000240: 0159 b0bb 0154 592a b401 19b2 00a2 b701\n    0000250: 59b0 bb01 5459 2ab4 0119 2a10 3db6 017e\n    0000260: 9900 09b2 00d9 a700 06b2 00d4 b701 59b0\n    0000270: bb01 5459 2ab4 0119 2a10 3db6 017e 9900\n    0000280: 09b2 00e3 a700 06b2 00de b701 59b0 bb01\n    0000290: 5459 2ab4 0119 2a10 3db6 017e 9900 09b2\n    00002a0: 00ca a700 06b2 008e b701 59b0 bb01 5459\n    00002b0: 2ab4 0119 2a10 3db6 017e 9900 09b2 00b1\n    00002c0: a700 06b2 009d b701 59b0 2abb 0183 5913\n    00002d0: 0185 b701 871b b601 8913 018d b601 8fb6\n    00002e0: 0192 b601 9601 b001 b0\n  Stackmap Table:\n    append_frame(@208,Integer)\n    same_frame(@210)\n    same_frame(@225)\n    same_frame(@240)\n    same_frame(@255)\n    same_frame(@270)\n    same_frame(@285)\n    same_frame(@300)\n    same_frame(@315)\n    same_frame(@330)\n    same_frame(@345)\n    same_frame(@360)\n    same_frame(@365)\n    same_frame(@389)\n    same_frame(@413)\n    same_frame(@437)\n    same_frame(@461)\n    same_frame(@476)\n    same_frame(@500)\n    same_frame(@524)\n    same_frame(@539)\n    same_frame(@555)\n    same_frame(@579)\n    same_frame(@594)\n    full_frame(@617,{Object[#1],Integer},{Uninitialized[#594],Uninitialized[#594],Integer})\n    full_frame(@620,{Object[#1],Integer},{Uninitialized[#594],Uninitialized[#594],Integer,Object[#3]})\n    same_frame(@624)\n    full_frame(@647,{Object[#1],Integer},{Uninitialized[#624],Uninitialized[#624],Integer})\n    full_frame(@650,{Object[#1],Integer},{Uninitialized[#624],Uninitialized[#624],Integer,Object[#3]})\n    same_frame(@654)\n    full_frame(@677,{Object[#1],Integer},{Uninitialized[#654],Uninitialized[#654],Integer})\n    full_frame(@680,{Object[#1],Integer},{Uninitialized[#654],Uninitialized[#654],Integer,Object[#3]})\n    same_frame(@684)\n    full_frame(@707,{Object[#1],Integer},{Uninitialized[#684],Uninitialized[#684],Integer})\n    full_frame(@710,{Object[#1],Integer},{Uninitialized[#684],Uninitialized[#684],Integer,Object[#3]})\n    same_frame(@714)\n    same_frame(@743)\n\n        at MarioKart.MarioKart.runFile(MarioKart.java:36)\n        at MarioKart.MarioKart.main(MarioKart.java:15)\n</code></pre>\n<p>And here is my code:</p>\n<pre><code>package MarioKart.LexicalAnalysis;\n\nimport java.util.ArrayList;\nimport java.util.HashMap;\n\nimport MarioKart.MarioKart;\nimport static MarioKart.LexicalAnalysis.Type.*;\n\npublic class Lexer {\n    //--------------------- Instance Variables ----------------------\n    private final String source;\n    private final ArrayList&lt;Lexeme&gt; lexemes = new ArrayList&lt;&gt;();\n    \n    private int currentPosition = 0;\n    private int startOfCurrentLexeme = 0;\n    private int lineNumber = 1;\n    private final HashMap&lt;String, Type&gt; keywords;\n\n\n    //--------------------- getKeywords() ---------------------------\n    private HashMap&lt;String, Type&gt; getKeywords() {\n        HashMap&lt;String, Type&gt; keywords = new HashMap&lt;&gt;();\n\n        keywords.put(&quot;requires&quot;, REQUIRES);\n        keywords.put(&quot;summon&quot;, SUMMON);\n        keywords.put(&quot;using&quot;, USING);\n        keywords.put(&quot;garage&quot;, GARAGE);\n        keywords.put(&quot;from&quot;, FROM);\n        keywords.put(&quot;to&quot;, TO);\n        keywords.put(&quot;return&quot;, RETURN);\n        keywords.put(&quot;timeTrial&quot;, TIMETRIAL);\n\n        keywords.put(&quot;first&quot;, FIRST);\n        keywords.put(&quot;second&quot;, SECOND);\n        keywords.put(&quot;third&quot;, THIRD);\n        keywords.put(&quot;fourth&quot;, FOURTH);\n        keywords.put(&quot;fifth&quot;, FIFTH);\n        keywords.put(&quot;sixth&quot;, SIXTH);\n        keywords.put(&quot;seventh&quot;, SEVENTH);\n        keywords.put(&quot;eighth&quot;, EIGHTH);\n        keywords.put(&quot;ninth&quot;, NINTH);\n        keywords.put(&quot;tenth&quot;, TENTH);\n        keywords.put(&quot;eleventh&quot;, ELEVENTH);\n        keywords.put(&quot;twelfth&quot;, TWELFTH);\n        keywords.put(&quot;last&quot;, LAST);\n\n        keywords.put(&quot;tiesWith&quot;, EQUALS);\n        keywords.put(&quot;boost&quot;, PLUS);\n        keywords.put(&quot;slip&quot;, MINUS);\n        keywords.put(&quot;superStar&quot;, TIMES);\n        keywords.put(&quot;blueShell&quot;, DIVIDED_BY);\n        keywords.put(&quot;multiMushroom&quot;, PLUS_EQUALS);\n        keywords.put(&quot;redShell&quot;, MINUS_EQUALS);\n        keywords.put(&quot;goldenMushroom&quot;, TIMES_EQUALS);\n        keywords.put(&quot;fallOffTheMap&quot;, DIVIDED_EQUALS);\n        keywords.put(&quot;overtake&quot;, PLUS_PLUS);\n        keywords.put(&quot;getPassed&quot;, MINUS_MINUS);\n        keywords.put(&quot;not&quot;, NOT);\n        keywords.put(&quot;isTiedWith&quot;, EQUALS_EQUALS);\n        keywords.put(&quot;isNotTiedWith&quot;, NOT_EQUALS);\n        keywords.put(&quot;isFurtherThan&quot;, GREATER_THAN);\n        keywords.put(&quot;isBetterThan&quot;, GREATER_THAN_OR_EQUAL_TO);\n        keywords.put(&quot;isBehind&quot;, LESS_THAN);\n        keywords.put(&quot;isWorseThan&quot;, LESS_THAN_OR_EQUAL_TO);\n        keywords.put(&quot;and&quot;, AND);\n        keywords.put(&quot;or&quot;, OR);\n\n        keywords.put(&quot;int&quot;, INT);\n        keywords.put(&quot;real&quot;, REAL);\n        keywords.put(&quot;boolean&quot;, BOOLEAN);\n        keywords.put(&quot;string&quot;, STRING);\n        keywords.put(&quot;array&quot;, ARRAY);\n\n        return keywords;\n    }\n\n    //---------- Constructor --------\n    public Lexer(String source) {\n        this.source = source;\n        this.keywords = getKeywords();\n        this.currentPosition = 0;\n        this.startOfCurrentLexeme = 0;\n        this.lineNumber = 1;\n    }\n\n    //---------------------- Helper Methods -----------------------\n    private boolean isAtEnd() {\n        return currentPosition &gt;= source.length();\n    }\n\n    private char peek() {\n        if (isAtEnd()) return '\\0';\n        return source.charAt(currentPosition);\n    } \n    private char peekNext() {\n        if(currentPosition + 1 &gt;= source.length()) return '\\0';\n        return source.charAt(currentPosition + 1);\n    }\n    \n    private boolean match(char expected) {\n        if(isAtEnd() || source.charAt(currentPosition) != expected ) return false;\n        currentPosition++;\n        return true;\n    } \n\n    private char advance() {\n        char currentChar = source.charAt(currentPosition);\n        if(currentChar == '\\n' || currentChar == '\\r') lineNumber++;\n        currentPosition++;\n        return currentChar;\n    }\n\n    // -------------------- Supplemental Helper Methods --------------------\n    private boolean isDigit(char c) {\n        return c &gt;= '0' &amp;&amp; c &lt;= '9';\n    }\n\n    private boolean isAlpha(char c) {\n        return (c &gt;= 'A' &amp;&amp; c &lt;= 'Z') ||\n               (c &gt;= 'a' &amp;&amp; c &lt;= 'z') ||\n               (c == '_');\n    }\n\n    private boolean isAlphaNumeric(char c) {\n        return isAlpha(c) || isDigit(c);\n    }\n\n    // --------------------- Error Reporting -----------------------\n    private void error(String message) {\n        MarioKart.syntaxError(message, lineNumber);\n    }\n\n    //----------------------- lex() function ----------------------------\n    public ArrayList&lt;Lexeme&gt; lex() {\n        while(!isAtEnd()) {\n            startOfCurrentLexeme = currentPosition;\n            Lexeme nextLexeme = getNextLexeme();\n            if(nextLexeme != null) lexemes.add(nextLexeme);\n        }\n        \n        lexemes.add(new Lexeme(lineNumber, END_OF_FILE));\n        return lexemes;\n    }\n\n    // --------------------- lex Helper Functions ---------------------------\n    private Lexeme getNextLexeme() {\n        char c = advance();\n        switch(c) {\n            //Ignore whitespace\n            case ' ', '\\t', '\\n', '\\r' -&gt; {\n                return null;\n            }\n            \n            //one digit\n            case '[' -&gt; { return new Lexeme(lineNumber, OPEN_BRACKET); }\n            case ']' -&gt; { return new Lexeme(lineNumber, CLOSED_BRACKET); }\n            case '(' -&gt; { return new Lexeme(lineNumber, OPEN_PARENTHESIS); }\n            case ')' -&gt; { return new Lexeme(lineNumber, CLOSED_PARENTHESIS); }\n            case '{' -&gt; { return new Lexeme(lineNumber, OPEN_CURLY); }\n            case '}' -&gt; { return new Lexeme(lineNumber, CLOSED_CURLY); }\n            case ';' -&gt; { return new Lexeme(lineNumber, SEMICOLON); }\n            case '.' -&gt; { return new Lexeme(lineNumber, DOT); }\n            case ',' -&gt; { return new Lexeme(lineNumber, COMMA); }\n            case '!' -&gt; { return new Lexeme(lineNumber, NOT); }\n            case '%' -&gt; { return new Lexeme(lineNumber, MOD); }\n            case '&quot;' -&gt; { return lexString(); }\n            case '1', '2', '3', '4', '5', '6', '7', '8', '9', '0' -&gt; { return lexNumber(); }\n\n            //two digits\n            case '&amp;' -&gt; { if(match('&amp;')) return new Lexeme(lineNumber, AND); }\n            case '|' -&gt; { if(match('|')) return new Lexeme(lineNumber, OR); }\n\n            //one OR two digits :(\n            case '+' -&gt; {\n                if(match('+')) return new Lexeme(lineNumber, PLUS_PLUS);\n                else if(match('=')) return new Lexeme(lineNumber, PLUS_EQUALS);\n                else return new Lexeme(lineNumber, PLUS);\n            }\n            case '-' -&gt; {\n                if(match('-')) return new Lexeme(lineNumber, MINUS_MINUS);\n                else if(match('=')) return new Lexeme(lineNumber, PLUS_EQUALS);\n                else return new Lexeme(lineNumber, MINUS);\n            }\n            case '/' -&gt; {\n                if(match('/')) lexComments();\n                else if(match('=')) return new Lexeme(lineNumber, DIVIDED_EQUALS);\n                else return new Lexeme(lineNumber, DIVIDED_BY);\n            }\n\n            //only two options\n            case '&gt;' -&gt; { return new Lexeme(lineNumber, match('=') ? GREATER_THAN_OR_EQUAL_TO : GREATER_THAN); }\n            case '&lt;' -&gt; { return new Lexeme(lineNumber, match('=') ? LESS_THAN_OR_EQUAL_TO : LESS_THAN); }\n            case '=' -&gt; { return new Lexeme(lineNumber, match('=') ? EQUALS_EQUALS : EQUALS); }\n            case '*' -&gt; { return new Lexeme(lineNumber, match('=') ? TIMES_EQUALS : TIMES); }\n\n            //put NOTHING beneath these cases pls\n            default -&gt; {\n                if(isDigit(c)) return lexNumber();\n                else if(isAlpha(c)) return lexIdentifierOrKeyword();\n                else {\n                    error(&quot;bro what is '&quot; + c + &quot;'. i do not recognize it. but then again i dont recognize half of what goes on in my calc class sooooooo&quot;);\n                    return null;\n                }\n            }\n        }\n        return null;\n    }\n\n    private Lexeme lexString() {\n        while( !(isAtEnd() || peek() == '&quot;')) advance();\n\n        String str = source.substring(startOfCurrentLexeme + 1, currentPosition);\n\n        if(isAtEnd()) error(&quot;you didn't close your string :(. String: '&quot; + str + &quot;'&quot;);\n        else advance();\n\n        return new Lexeme(lineNumber, str, STRING);\n    }\n\n    private void lexComments() {\n        while( !(isAtEnd() || peek() == '\\n')) advance();\n\n    }\n\n    private Lexeme lexNumber() {\n        boolean isInteger = true;\n        while(isDigit(peek())) advance();\n\n        //checking if int or real\n        if (peek() == '.') {\n            isInteger = false;\n            if(!isDigit(peekNext())) {\n                String malformedReal = source.substring(startOfCurrentLexeme, currentPosition + 2);\n                error(&quot;that isn't a number!!! silly goose. your failure: '&quot; + malformedReal + &quot;'&quot;);\n            }\n            advance();\n            while(isDigit(peek())) advance();\n        }\n\n        String numberString = source.substring(startOfCurrentLexeme, currentPosition);\n        if(isInteger) { \n            int intValue = Integer.parseInt(numberString);\n            return new Lexeme(lineNumber, intValue, INT);\n        } else {\n            double realValue = Double.parseDouble(numberString);\n            return new Lexeme(lineNumber, realValue, REAL);\n        }\n\n    }\n\n    private Lexeme lexIdentifierOrKeyword() {\n        while(isAlphaNumeric(peek())) advance();\n\n        String text = source.substring(startOfCurrentLexeme, currentPosition);\n        Type type = keywords.get(text);\n\n        if (type == null) return new Lexeme(lineNumber, text, IDENTIFIER);\n\n        else if(type == TRUE) return new Lexeme(lineNumber, true, TRUE);\n        else if(type == FALSE) return new Lexeme(lineNumber, false, FALSE);\n\n        return new Lexeme(lineNumber, type);\n    }\n}\n</code></pre>\n"},{"tags":["javascript","java","jquery","spring","jetty"],"comments":[{"owner":{"account_id":6775100,"reputation":17976,"user_id":5217142,"display_name":"traktor"},"score":1,"creation_date":1678957272,"post_id":75753424,"comment_id":133634377,"body_markdown":"Hi Hiranga,  posting images of error messages and code is seriously unacceptable on Stack Overflow as a  matter of course.  Please update your question with inline content as soon as possible. At the moment you risk having your question closed for procedural reasons.","body":"Hi Hiranga,  posting images of error messages and code is seriously unacceptable on Stack Overflow as a  matter of course.  Please update your question with inline content as soon as possible. At the moment you risk having your question closed for procedural reasons."}],"owner":{"account_id":4760023,"reputation":15,"user_id":3847623,"display_name":"Hiranga"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":93,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679025549,"creation_date":1678953488,"question_id":75753424,"body_markdown":"I&#39;m using jQuery ajax to pass same data to front end , but when I try to call a get method from my UI \r\n\r\nI&#39;m getting this error:\r\n\r\nhas been blocked by CORS policy: Response to preflight request doesn&#39;t pass access control check: No &#39;Access-Control-Allow-Origin&#39; header is present on the requested resource.\r\n\r\nand this error has thrown by jQuery.min.js. \r\n  r.send(i.hasContent &amp;&amp; i.data || null)\r\nI had to hide few methods names due to security reasons. Any help would be really appreciated. Thanks\r\n\r\nAdditional info  : \r\nI&#39;m using jetty as my server.\r\n\r\n\r\n\r\n","title":"JQuery ajax call connection refuse error : how to fix","body":"<p>I'm using jQuery ajax to pass same data to front end , but when I try to call a get method from my UI</p>\n<p>I'm getting this error:</p>\n<p>has been blocked by CORS policy: Response to preflight request doesn't pass access control check: No 'Access-Control-Allow-Origin' header is present on the requested resource.</p>\n<p>and this error has thrown by jQuery.min.js.\nr.send(i.hasContent &amp;&amp; i.data || null)\nI had to hide few methods names due to security reasons. Any help would be really appreciated. Thanks</p>\n<p>Additional info  :\nI'm using jetty as my server.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":1,"creation_date":1679018251,"post_id":75763108,"comment_id":133649859,"body_markdown":"`it will cause the dependency loop.` Are you sure?  Did you try it? I don&#39;t think dependency loops are a thing in Java.  Try it, please tell us the full error message you get.","body":"<code>it will cause the dependency loop.</code> Are you sure?  Did you try it? I don&#39;t think dependency loops are a thing in Java.  Try it, please tell us the full error message you get."},{"owner":{"account_id":19326316,"reputation":201,"user_id":14128881,"display_name":"Christopher Chua"},"score":0,"creation_date":1679021592,"post_id":75763108,"comment_id":133650223,"body_markdown":"Hi, please refer to the changes that I made","body":"Hi, please refer to the changes that I made"}],"answers":[{"comments":[{"owner":{"account_id":19326316,"reputation":201,"user_id":14128881,"display_name":"Christopher Chua"},"score":0,"creation_date":1679024056,"post_id":75763497,"comment_id":133650479,"body_markdown":"Hi, the code that is causing the problem is &#39;PortletClickHandler handler = new PortletClickHandler();&#39;. \nYou can refer to the edit that I made","body":"Hi, the code that is causing the problem is &#39;PortletClickHandler handler = new PortletClickHandler();&#39;.  You can refer to the edit that I made"},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1679026851,"post_id":75763497,"comment_id":133650776,"body_markdown":"Can you produce a complete compilable example that reproduces the problem? [mcve]","body":"Can you produce a complete compilable example that reproduces the problem? <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}],"tags":[],"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679023547,"creation_date":1679023547,"answer_id":75763497,"question_id":75763108,"body_markdown":"I can&#39;t reproduce the problem.  Can you post code that reproduces the problem?\r\n\r\nWorking:\r\n\r\n    package stackoverflow.pakA;\r\n    import stackoverflow.pakB.ClassB;\r\n\r\n    public class MainA {\r\n       \r\n       public static void main( String[] args ) {\r\n          ClassB.methodB();\r\n       }\r\n       \r\n       public static void methodA() {\r\n          System.out.println( &quot;Hellow from method A&quot; );\r\n       }\r\n    }\r\n    \r\n    package stackoverflow.pakB;\r\n    import stackoverflow.pakA.MainA;\r\n    \r\n    public class ClassB {\r\n       \r\n       public static void methodB() {\r\n          System.out.println( &quot;Hello from method B&quot; );\r\n          MainA.methodA();\r\n       }\r\n       \r\n    }\r\n\r\nOutput:\r\n\r\n    run:\r\n    Hello from method B\r\n    Hellow from method A\r\n    BUILD SUCCESSFUL (total time: 0 seconds)\r\n\r\n","title":"How to create a class from another inaccessible package","body":"<p>I can't reproduce the problem.  Can you post code that reproduces the problem?</p>\n<p>Working:</p>\n<pre><code>package stackoverflow.pakA;\nimport stackoverflow.pakB.ClassB;\n\npublic class MainA {\n   \n   public static void main( String[] args ) {\n      ClassB.methodB();\n   }\n   \n   public static void methodA() {\n      System.out.println( &quot;Hellow from method A&quot; );\n   }\n}\n\npackage stackoverflow.pakB;\nimport stackoverflow.pakA.MainA;\n\npublic class ClassB {\n   \n   public static void methodB() {\n      System.out.println( &quot;Hello from method B&quot; );\n      MainA.methodA();\n   }\n   \n}\n</code></pre>\n<p>Output:</p>\n<pre><code>run:\nHello from method B\nHellow from method A\nBUILD SUCCESSFUL (total time: 0 seconds)\n</code></pre>\n"}],"owner":{"account_id":19326316,"reputation":201,"user_id":14128881,"display_name":"Christopher Chua"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1679025473,"creation_date":1679017862,"question_id":75763108,"body_markdown":"I have this class in Package A:\r\n\r\n    public class PortletClickHandler implements CustomClickHandler {\r\n    \r\n    \t\tprivate int portletId;\r\n    \r\n    \t\tpublic int getPortletId() {\r\n    \t\t\treturn portletId;\r\n    \t\t}\r\n    \r\n    \t\tpublic void setPortletId(int portletId) {\r\n    \t\t\tthis.portletId = portletId;\r\n    \t\t}\r\n    \r\n    \t\t@Override\r\n    \t\tpublic void onClick(ClickEvent clickEvent) {\r\n    \t\t\tlogger.info(&quot;Entering here&quot;);\r\n    \t\t\tlogger.info(String.valueOf(portletId));\r\n    \r\n    \t\t\tsetContextArea(portletId);\r\n    \t\t\tlogger.info(&quot;Class is &quot;);\r\n    \t\t\tlogger.info(&quot;Does it work?&quot;);\r\n    \r\n    \t\t}\r\n    \r\n    \t}\r\n\r\nI also have the below code \r\n\r\n    Content = new HomePage(new PortletClickHandler());\r\n\r\nwhere I will be using it at another package B via interface:\r\n\r\n    public interface CustomClickHandler extends ClickHandler {\r\n    \t\tvoid setPortletId(int portletId);\r\n    \t}\r\n\r\n    \r\n\r\nMy issue right now is as Package A will have the import from Package B(Where HomePage is) such that: \r\n\r\n    import package B.HomePage\r\nBut I cant do the another way around where Package B imports the Package A as it will cause the circular dependency.\r\n\r\nBelow is the error message:\r\n\r\n    Adding dependency on module &#39;A&#39; will introduce circular dependency between modules &#39;B&#39; and &#39;C&#39;. Add dependency anyway?\r\n\r\nTherefore, when I would like to create a new instance of PortletClickHandler class at Package B, I am unable to do so. \r\n\r\nEg: `PortletClickHandler handler = new PortletClickHandler();`. When I do this in the package B, it will ask me to import the this PortletClickHandler, but when I selects to import this, it will then cause the circular depedency message.\r\n\r\nHow can I solve this?","title":"How to create a class from another inaccessible package","body":"<p>I have this class in Package A:</p>\n<pre><code>public class PortletClickHandler implements CustomClickHandler {\n\n        private int portletId;\n\n        public int getPortletId() {\n            return portletId;\n        }\n\n        public void setPortletId(int portletId) {\n            this.portletId = portletId;\n        }\n\n        @Override\n        public void onClick(ClickEvent clickEvent) {\n            logger.info(&quot;Entering here&quot;);\n            logger.info(String.valueOf(portletId));\n\n            setContextArea(portletId);\n            logger.info(&quot;Class is &quot;);\n            logger.info(&quot;Does it work?&quot;);\n\n        }\n\n    }\n</code></pre>\n<p>I also have the below code</p>\n<pre><code>Content = new HomePage(new PortletClickHandler());\n</code></pre>\n<p>where I will be using it at another package B via interface:</p>\n<pre><code>public interface CustomClickHandler extends ClickHandler {\n        void setPortletId(int portletId);\n    }\n</code></pre>\n<p>My issue right now is as Package A will have the import from Package B(Where HomePage is) such that:</p>\n<pre><code>import package B.HomePage\n</code></pre>\n<p>But I cant do the another way around where Package B imports the Package A as it will cause the circular dependency.</p>\n<p>Below is the error message:</p>\n<pre><code>Adding dependency on module 'A' will introduce circular dependency between modules 'B' and 'C'. Add dependency anyway?\n</code></pre>\n<p>Therefore, when I would like to create a new instance of PortletClickHandler class at Package B, I am unable to do so.</p>\n<p>Eg: <code>PortletClickHandler handler = new PortletClickHandler();</code>. When I do this in the package B, it will ask me to import the this PortletClickHandler, but when I selects to import this, it will then cause the circular depedency message.</p>\n<p>How can I solve this?</p>\n"},{"tags":["java","snakeyaml"],"owner":{"account_id":21544472,"reputation":11,"user_id":15881569,"display_name":"ThePiGuy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":289,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679024445,"creation_date":1679024445,"question_id":75763563,"body_markdown":"I want SnakeYAML to, by default, output strings that contain special characters (such as a colon) that are wrapped in **double quotes** instead of single quotes. I&#39;ve been pulling my hair out for hours on how to accomplish this with the SnakeYAML API, but I have found no leads. Example:\r\n\r\nSay I have a **value**: &quot;Yes: No&quot;. I want SnakeYAML to output this value like this:\r\n```\r\nkey: &quot;Yes: No&quot;\r\n```\r\nwith double quotes instead of single quotes. I have tried using multiple default scalar options with the ```DumperOptions``` class to no avail. I have to store all the values in my YAML file without any quotes (for reasons), except of course for values that contain special characters.\r\n\r\nHere is the code I&#39;m using to write to a YAML file for context:\r\n\r\n```\r\npublic void writeMeta(String key, String value) {\r\n\t\t\r\n\t\ttry {\r\n\t\t\t\r\n\t\t\tYaml yaml = new Yaml();\r\n\t\t\tFileReader reader = new FileReader(this.metaYAML);\r\n\t\t\tMap&lt;String, String&gt; meta = yaml.load(reader);\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tif (meta == null) {\r\n\t\t\t\tmeta = new HashMap&lt;&gt;();\r\n\t\t\t}\r\n\t\t\tif (value.equals(&quot;&quot;)) {\r\n\t\t\t\tvalue = null;\r\n\t\t\t}\r\n\t\t\tmeta.put(key, value);\r\n\t\t\t\r\n\r\n\t\t\tFileWriter writer = new FileWriter(this.metaYAML);\r\n\t\t\t\r\n\t\t\tDumperOptions options = new DumperOptions();\r\n\t        options.setDefaultFlowStyle(DumperOptions.FlowStyle.BLOCK);\r\n\t        options.setDefaultScalarStyle(DumperOptions.ScalarStyle.PLAIN);\r\n\t        \r\n\t\t\tnew Yaml(options).dump(meta, writer);\r\n\r\n\t\t\twriter.close();\r\n\t\t\treader.close();\r\n\t\t\t\r\n\t\t\t\r\n\t\t} catch (IOException e) {\r\n\t\t\tnew ErrorDialog(new IOException(&quot;Could not parse/write to the meta.yaml file.&quot;, e));\r\n\t\t}\r\n\t\t\r\n\t}\r\n    ```","title":"Configure SnakeYAML to escape strings with double quotes instead of single quotes [java]","body":"<p>I want SnakeYAML to, by default, output strings that contain special characters (such as a colon) that are wrapped in <strong>double quotes</strong> instead of single quotes. I've been pulling my hair out for hours on how to accomplish this with the SnakeYAML API, but I have found no leads. Example:</p>\n<p>Say I have a <strong>value</strong>: &quot;Yes: No&quot;. I want SnakeYAML to output this value like this:</p>\n<pre><code>key: &quot;Yes: No&quot;\n</code></pre>\n<p>with double quotes instead of single quotes. I have tried using multiple default scalar options with the <code>DumperOptions</code> class to no avail. I have to store all the values in my YAML file without any quotes (for reasons), except of course for values that contain special characters.</p>\n<p>Here is the code I'm using to write to a YAML file for context:</p>\n<pre><code>public void writeMeta(String key, String value) {\n        \n        try {\n            \n            Yaml yaml = new Yaml();\n            FileReader reader = new FileReader(this.metaYAML);\n            Map&lt;String, String&gt; meta = yaml.load(reader);\n            \n            \n            if (meta == null) {\n                meta = new HashMap&lt;&gt;();\n            }\n            if (value.equals(&quot;&quot;)) {\n                value = null;\n            }\n            meta.put(key, value);\n            \n\n            FileWriter writer = new FileWriter(this.metaYAML);\n            \n            DumperOptions options = new DumperOptions();\n            options.setDefaultFlowStyle(DumperOptions.FlowStyle.BLOCK);\n            options.setDefaultScalarStyle(DumperOptions.ScalarStyle.PLAIN);\n            \n            new Yaml(options).dump(meta, writer);\n\n            writer.close();\n            reader.close();\n            \n            \n        } catch (IOException e) {\n            new ErrorDialog(new IOException(&quot;Could not parse/write to the meta.yaml file.&quot;, e));\n        }\n        \n    }\n    ```\n</code></pre>\n"},{"tags":["java","junit","mockito","junit5"],"answers":[{"tags":[],"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1679024251,"creation_date":1679024251,"answer_id":75763550,"question_id":75762924,"body_markdown":"You can&#39;t mock `RestTemplate` when you create it like that.\r\n\r\nInstead create a factory which you can inject, and mock the factory to return a mock `RestTemplate`:\r\n```\r\n@Component\r\nclass RestTemplateFactory {\r\n  public RestTemplate create() {\r\n    return new RestTemplate(new HttpComponentsClientHttpRequestFactory());\r\n  }\r\n}\r\n```\r\nThen in `TestServiceImpl`:\r\n```\r\npublic class TestServiceImpl implements TestService {\r\n  private final RestTemplateFactory restTemplateFactory;\r\n\r\n  @Autowired\r\n  public TestServiceImpl(RestTemplateFactory restTemplateFactory) {\r\n    this.restTemplateFactory = restTemplateFactory;\r\n  }\r\n  ...\r\n```\r\nand finally in your test:\r\n```\r\n...\r\nRestTemplateFactory factory = mock(RestTemplateFactory.class);\r\nRestTemplate template = mock(RestTemplate.class);\r\nTestServiceImpl service = new TestServiceImpl(factory);\r\nwhen(factory.create()).thenReturn(template);\r\nwhen(template.exchange(...)).thenReturn(...)\r\n\r\nassertEquals(TestData.getMockResponseEntity().getBody(),service.get(...));\r\n...\r\n```","title":"Getting &quot;0 matchers expected, 1 recorded:&quot; when I writing my Junit test case for below class","body":"<p>You can't mock <code>RestTemplate</code> when you create it like that.</p>\n<p>Instead create a factory which you can inject, and mock the factory to return a mock <code>RestTemplate</code>:</p>\n<pre><code>@Component\nclass RestTemplateFactory {\n  public RestTemplate create() {\n    return new RestTemplate(new HttpComponentsClientHttpRequestFactory());\n  }\n}\n</code></pre>\n<p>Then in <code>TestServiceImpl</code>:</p>\n<pre><code>public class TestServiceImpl implements TestService {\n  private final RestTemplateFactory restTemplateFactory;\n\n  @Autowired\n  public TestServiceImpl(RestTemplateFactory restTemplateFactory) {\n    this.restTemplateFactory = restTemplateFactory;\n  }\n  ...\n</code></pre>\n<p>and finally in your test:</p>\n<pre><code>...\nRestTemplateFactory factory = mock(RestTemplateFactory.class);\nRestTemplate template = mock(RestTemplate.class);\nTestServiceImpl service = new TestServiceImpl(factory);\nwhen(factory.create()).thenReturn(template);\nwhen(template.exchange(...)).thenReturn(...)\n\nassertEquals(TestData.getMockResponseEntity().getBody(),service.get(...));\n...\n</code></pre>\n"}],"owner":{"account_id":19178711,"reputation":3,"user_id":14010907,"display_name":"Arvind Reddy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75763550,"answer_count":1,"score":0,"last_activity_date":1679024251,"creation_date":1679015079,"question_id":75762924,"body_markdown":"here is my class which has two methods get and exchange, I am not sure how to write test case for below two methods, since we are using **&quot;new RestTemplate(new HttpComponentsClientHttpRequestFactory()).exchange&quot;** I dont know how to mock this.\r\n\r\nand how to write a test case for another method in same class\r\n\r\n    @Service\r\n           public class TestServiceImpl implements TestService{\r\n\r\n\t\r\n          @Override\r\n              public Object get(String endpoint, ParameterizedTypeReference reference, boolean useToken) {\r\n              ResponseEntity response = exchange(HttpMethod.GET, endpoint, null, reference, useToken);\r\n               return response.getBody();\r\n              }\r\n\r\n\r\n \t      public ResponseEntity&lt;Object&gt; exchange(HttpMethod httpMethod, String endpoint, @Nullable                Object body, ParameterizedTypeReference&lt;Object&gt; reference, boolean useToken,String userId) {\r\n     \r\n               try {\r\n                response = new RestTemplate(new HttpComponentsClientHttpRequestFactory()).exchange(endpoint, httpMethod, new HttpEntity&lt;&gt;(body, headers), reference);\r\n                return response;\r\n                } catch (Exception e) {\r\n               e.printStackTrance\r\n                }\r\n             }\r\n          }\r\n          }\r\n\r\n\r\n\r\n\r\n\r\n        @Test\r\n         public void getTest(){\r\n        IdmService idmService1 = Mockito.spy(idmService);\r\n               Mockito.doReturn(TestData.getMockResponseEntity()).when(idmService1).exchange(any(),anyString(),any(),any(),anyBoolean());\r\n          assertEquals(TestData.getMockResponseEntity().getBody(),idmService.get(endPoint,any(),true));\r\n       }\r\n     @Test\r\n    public void exchangeTest(){\r\n      when(restTemplate.exchange(anyString(), ArgumentMatchers.any(HttpMethod.class),ArgumentMatchers.any(HttpEntity.class),\r\n                ArgumentMatchers.any(HttpHeaders.class))).thenReturn(TestData.getMockResponseEntity())\r\n        assertEquals(TestData.getMockResponseEntity().getBody(),idmService.get(endPoint,any(),true));\r\n\r\n    }","title":"Getting &quot;0 matchers expected, 1 recorded:&quot; when I writing my Junit test case for below class","body":"<p>here is my class which has two methods get and exchange, I am not sure how to write test case for below two methods, since we are using <strong>&quot;new RestTemplate(new HttpComponentsClientHttpRequestFactory()).exchange&quot;</strong> I dont know how to mock this.</p>\n<p>and how to write a test case for another method in same class</p>\n<pre><code>@Service\n       public class TestServiceImpl implements TestService{\n\n\n      @Override\n          public Object get(String endpoint, ParameterizedTypeReference reference, boolean useToken) {\n          ResponseEntity response = exchange(HttpMethod.GET, endpoint, null, reference, useToken);\n           return response.getBody();\n          }\n\n\n      public ResponseEntity&lt;Object&gt; exchange(HttpMethod httpMethod, String endpoint, @Nullable                Object body, ParameterizedTypeReference&lt;Object&gt; reference, boolean useToken,String userId) {\n \n           try {\n            response = new RestTemplate(new HttpComponentsClientHttpRequestFactory()).exchange(endpoint, httpMethod, new HttpEntity&lt;&gt;(body, headers), reference);\n            return response;\n            } catch (Exception e) {\n           e.printStackTrance\n            }\n         }\n      }\n      }\n\n\n\n\n\n    @Test\n     public void getTest(){\n    IdmService idmService1 = Mockito.spy(idmService);\n           Mockito.doReturn(TestData.getMockResponseEntity()).when(idmService1).exchange(any(),anyString(),any(),any(),anyBoolean());\n      assertEquals(TestData.getMockResponseEntity().getBody(),idmService.get(endPoint,any(),true));\n   }\n @Test\npublic void exchangeTest(){\n  when(restTemplate.exchange(anyString(), ArgumentMatchers.any(HttpMethod.class),ArgumentMatchers.any(HttpEntity.class),\n            ArgumentMatchers.any(HttpHeaders.class))).thenReturn(TestData.getMockResponseEntity())\n    assertEquals(TestData.getMockResponseEntity().getBody(),idmService.get(endPoint,any(),true));\n\n}\n</code></pre>\n"},{"tags":["java","spring-boot","exception","soap","exceptionhandler"],"comments":[{"owner":{"account_id":17258715,"reputation":96,"user_id":21301929,"display_name":"vinoth raj"},"score":1,"creation_date":1679028211,"post_id":75763544,"comment_id":133650919,"body_markdown":"For this you can create a SOAP fault response transformer using the `EndpointInterceptor ` interface. this will allow you to intercept and modify SOAP request and responses which are pass via the application.","body":"For this you can create a SOAP fault response transformer using the <code>EndpointInterceptor </code> interface. this will allow you to intercept and modify SOAP request and responses which are pass via the application."},{"owner":{"account_id":28038508,"reputation":1,"user_id":21416441,"display_name":"Rohan "},"score":0,"creation_date":1679186650,"post_id":75763544,"comment_id":133676520,"body_markdown":"Thanks for the reply! I did try the mentioned approach. However, I am not able to set elements to the SOAP envelop. I am only able to set string attributes. As mentioned in the question, I am required to send a custom response without a soap fault element. Do you have any resource or code I can refer to? @vinothraj","body":"Thanks for the reply! I did try the mentioned approach. However, I am not able to set elements to the SOAP envelop. I am only able to set string attributes. As mentioned in the question, I am required to send a custom response without a soap fault element. Do you have any resource or code I can refer to? @vinothraj"}],"owner":{"account_id":28038508,"reputation":1,"user_id":21416441,"display_name":"Rohan "},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":161,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679024129,"creation_date":1679024129,"question_id":75763544,"body_markdown":"I am working upon a project and need to send a custom soap response (without SOAP fault). I’m using @Endpoint to consume SOAP requests in my spring boot application. However, I cannot use @ControllerAdvice or @ExceptionHandler to send a custom response since @Endpoint is not same as @Controller. What would be the best approach to do exception handling for mentioned situation? The exceptions can occur in any layer of the application(service , DAO etc). \r\n\r\nTried to use @ControllerAdvice but couldn’t get the desired result ","title":"Exception handling in SOAP spring boot application","body":"<p>I am working upon a project and need to send a custom soap response (without SOAP fault). I’m using @Endpoint to consume SOAP requests in my spring boot application. However, I cannot use @ControllerAdvice or @ExceptionHandler to send a custom response since @Endpoint is not same as @Controller. What would be the best approach to do exception handling for mentioned situation? The exceptions can occur in any layer of the application(service , DAO etc).</p>\n<p>Tried to use @ControllerAdvice but couldn’t get the desired result</p>\n"},{"tags":["java","spring-boot","mongodb-query","where-clause","spring-data-mongodb"],"answers":[{"comments":[{"owner":{"account_id":12613723,"reputation":940,"user_id":9171899,"display_name":"yuen26"},"score":0,"creation_date":1588986674,"post_id":61636872,"comment_id":109120844,"body_markdown":"This question is about Spring Data Mongo, not Spring Data JPA","body":"This question is about Spring Data Mongo, not Spring Data JPA"}],"tags":[],"owner":{"account_id":9577952,"reputation":81,"user_id":7113374,"display_name":"Vijayr32"},"comment_count":1,"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1588772928,"creation_date":1588772928,"answer_id":61636872,"question_id":61635522,"body_markdown":"It can be implemented in two ways one is using MongoTemplate and criteria query in spring boot application\r\n\r\n```\r\nQuery query = new Query();\r\nquery.addCriteria(Criteria.where(&quot;action_status&quot;).eq(false));\r\nList&lt;User&gt; users = mongoTemplate.find(query,MyCollectionClassName.class);\r\n```\r\n\r\nAnother way is using mongo repository\r\n```\r\n@Query(&quot;SELECT mc FROM my_collection mc WHERE mc.status = false&quot;)\r\nMyCollectionClassName findMyCollectionClassNameByStatus(Integer status);\r\n```\r\n\r\nReferences : \r\n```\r\nhttps://www.baeldung.com/queries-in-spring-data-mongodb\r\nhttps://www.baeldung.com/spring-data-jpa-query\r\n```","title":"How can I use $where in spring data MongoDB?","body":"<p>It can be implemented in two ways one is using MongoTemplate and criteria query in spring boot application</p>\n\n<pre><code>Query query = new Query();\nquery.addCriteria(Criteria.where(\"action_status\").eq(false));\nList&lt;User&gt; users = mongoTemplate.find(query,MyCollectionClassName.class);\n</code></pre>\n\n<p>Another way is using mongo repository</p>\n\n<pre><code>@Query(\"SELECT mc FROM my_collection mc WHERE mc.status = false\")\nMyCollectionClassName findMyCollectionClassNameByStatus(Integer status);\n</code></pre>\n\n<p>References : </p>\n\n<pre><code>https://www.baeldung.com/queries-in-spring-data-mongodb\nhttps://www.baeldung.com/spring-data-jpa-query\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9643196,"reputation":593,"user_id":7156819,"display_name":"Răzvan Puiu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1599994414,"creation_date":1599992279,"answer_id":63869616,"question_id":61635522,"body_markdown":"1: You can create a repository that extends MongoRepository and have a JSON Query method as follows:\r\n\r\n    @Query(&quot;{&#39;action_status&#39;:{$eq:?0}}&quot;)\r\n    public List&lt;YourObj&gt; findByActionStatus(boolean status);\r\n\r\n2: You can use Query By Object Attribute in MongoRepository. Supposedly you have a field called &quot;isActionStatus&quot; in your object, just declare this method in your repository:\r\n\r\n    public List&lt;YourObj&gt; findByIsActionStatus(boolean actionStatus);\r\n\r\nSpring Data will break the method name like &quot;select * from ... where isActionStatus = actionStatus \r\n\r\nIf you need a more complex query you can find the supported keywords here: https://docs.spring.io/spring-data/mongodb/docs/1.2.0.RELEASE/reference/html/mongo.repositories.html","title":"How can I use $where in spring data MongoDB?","body":"<p>1: You can create a repository that extends MongoRepository and have a JSON Query method as follows:</p>\n<pre><code>@Query(&quot;{'action_status':{$eq:?0}}&quot;)\npublic List&lt;YourObj&gt; findByActionStatus(boolean status);\n</code></pre>\n<p>2: You can use Query By Object Attribute in MongoRepository. Supposedly you have a field called &quot;isActionStatus&quot; in your object, just declare this method in your repository:</p>\n<pre><code>public List&lt;YourObj&gt; findByIsActionStatus(boolean actionStatus);\n</code></pre>\n<p>Spring Data will break the method name like &quot;select * from ... where isActionStatus = actionStatus</p>\n<p>If you need a more complex query you can find the supported keywords here: <a href=\"https://docs.spring.io/spring-data/mongodb/docs/1.2.0.RELEASE/reference/html/mongo.repositories.html\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-data/mongodb/docs/1.2.0.RELEASE/reference/html/mongo.repositories.html</a></p>\n"},{"tags":[],"owner":{"account_id":3132103,"reputation":3987,"user_id":2649570,"accept_rate":83,"display_name":"ced-b"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1679024104,"creation_date":1679024104,"answer_id":75763542,"question_id":61635522,"body_markdown":"The following worked for me:\r\n\r\n```java\r\nmongoTemplate.find(\r\n   query(\r\n      where(&quot;$where&quot;).is(&quot;this.xyz + this.abc = 123&quot;)\r\n   )\r\n);\r\n```\r\n\r\nWhereby, the `is` part can be a String which inludes a JavaScript expression. And you can use `this` to refer to the current item.","title":"How can I use $where in spring data MongoDB?","body":"<p>The following worked for me:</p>\n<pre class=\"lang-java prettyprint-override\"><code>mongoTemplate.find(\n   query(\n      where(&quot;$where&quot;).is(&quot;this.xyz + this.abc = 123&quot;)\n   )\n);\n</code></pre>\n<p>Whereby, the <code>is</code> part can be a String which inludes a JavaScript expression. And you can use <code>this</code> to refer to the current item.</p>\n"}],"owner":{"account_id":17190715,"reputation":563,"user_id":12444527,"display_name":"Trushit Shekhda"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2138,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1679024104,"creation_date":1588768895,"question_id":61635522,"body_markdown":"I am not able to use `$where` in `SpringDataMongoDb`.\r\n\r\nIs there any way to achieve this in `SpringBoot`?\r\n\r\n    db.getCollection(&#39;my_collection&#39;).find({ $where : function(){\r\n        for (var key in this.action_status){\r\n            return this.action_status[key] == false;\r\n        }\r\n    }})\r\n\r\nThank You.","title":"How can I use $where in spring data MongoDB?","body":"<p>I am not able to use <code>$where</code> in <code>SpringDataMongoDb</code>.</p>\n\n<p>Is there any way to achieve this in <code>SpringBoot</code>?</p>\n\n<pre><code>db.getCollection('my_collection').find({ $where : function(){\n    for (var key in this.action_status){\n        return this.action_status[key] == false;\n    }\n}})\n</code></pre>\n\n<p>Thank You.</p>\n"},{"tags":["java","jpa","datasource"],"owner":{"account_id":28038322,"reputation":1,"user_id":21416299,"display_name":"xuchu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":79,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679022762,"creation_date":1679022762,"question_id":75763449,"body_markdown":"the main start warning logs:\r\n```\r\n[breadroll-mall] 2023-03-17 10:47:00.885 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler [&quot;http-nio-9999&quot;]\r\n[breadroll-mall] 2023-03-17 10:47:00.934 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 9999 (http) with context path &#39;&#39;\r\n[breadroll-mall] 2023-03-17 10:47:01.018 [main] INFO  com.qiu.BreadRollMallServer - Started BreadRollMallServer in 30.777 seconds (JVM running for 45.258)\r\n[breadroll-mall] 2023-03-17 10:47:01.034 [main] INFO  com.qiu.BreadRollMallServerRunner - Executing command line runner...\r\n[breadroll-mall] 2023-03-17 10:47:03.957 [main] INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit &#39;default&#39;\r\n[breadroll-mall] 2023-03-17 10:47:03.975 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed\r\n```\r\n**my pom**:\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n    &lt;groupId&gt;com.qiu&lt;/groupId&gt;\r\n    &lt;artifactId&gt;breadroll-mall&lt;/artifactId&gt;\r\n    &lt;version&gt;2.0-SNAPSHOT&lt;/version&gt;\r\n\r\n    &lt;name&gt;breadroll-mall&lt;/name&gt;\r\n    &lt;!-- FIXME change it to the project&#39;s website --&gt;\r\n    &lt;url&gt;http://www.example.com&lt;/url&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n        &lt;maven.compiler.source&gt;1.7&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;1.7&lt;/maven.compiler.target&gt;\r\n    &lt;/properties&gt;\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;2.3.7.RELEASE &lt;/version&gt;\r\n    &lt;/parent&gt;\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;!--mysql--&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\r\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n            &lt;version&gt;5.1.47&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt;\r\n            &lt;version&gt;2.1.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/com.github.ulisesbocchio/jasypt-spring-boot-starter --&gt;\r\n        &lt;!--&lt;dependency&gt;\r\n            &lt;groupId&gt;com.github.ulisesbocchio&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jasypt-spring-boot-starter&lt;/artifactId&gt;\r\n            &lt;version&gt;3.0.3&lt;/version&gt;\r\n        &lt;/dependency&gt;--&gt;\r\n        &lt;!--druid--&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.alibaba&lt;/groupId&gt;\r\n            &lt;artifactId&gt;druid&lt;/artifactId&gt;\r\n            &lt;version&gt;1.1.12&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.aliyun.oss&lt;/groupId&gt;\r\n            &lt;artifactId&gt;aliyun-sdk-oss&lt;/artifactId&gt;\r\n            &lt;version&gt;2.8.3&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;commons-fileupload&lt;/groupId&gt;\r\n            &lt;artifactId&gt;commons-fileupload&lt;/artifactId&gt;\r\n            &lt;version&gt;1.3.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.aliyun&lt;/groupId&gt;\r\n            &lt;artifactId&gt;aliyun-java-sdk-core&lt;/artifactId&gt;\r\n            &lt;version&gt;4.4.6&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.aliyun&lt;/groupId&gt;\r\n            &lt;artifactId&gt;aliyun-java-sdk-dysmsapi&lt;/artifactId&gt;\r\n            &lt;version&gt;2.1.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- fastjson --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.alibaba&lt;/groupId&gt;\r\n            &lt;artifactId&gt;fastjson&lt;/artifactId&gt;\r\n            &lt;version&gt;1.2.62&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;redis.clients&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jedis&lt;/artifactId&gt;\r\n            &lt;version&gt;2.9.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!--lombok--&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;cn.dev33&lt;/groupId&gt;\r\n            &lt;artifactId&gt;sa-token-spring-boot-starter&lt;/artifactId&gt;\r\n            &lt;version&gt;1.29.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;cn.dev33&lt;/groupId&gt;\r\n            &lt;artifactId&gt;sa-token-dao-redis-jackson&lt;/artifactId&gt;\r\n            &lt;version&gt;1.29.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n            &lt;artifactId&gt;commons-pool2&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!--thymeleaf--&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-aop&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-mail&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;junit&lt;/groupId&gt;\r\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n            &lt;version&gt;4.12&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.maven&lt;/groupId&gt;\r\n            &lt;artifactId&gt;maven-settings&lt;/artifactId&gt;\r\n            &lt;version&gt;3.3.9&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.github.shalousun&lt;/groupId&gt;\r\n            &lt;artifactId&gt;common-util&lt;/artifactId&gt;\r\n            &lt;version&gt;1.9.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.alipay.sdk&lt;/groupId&gt;\r\n            &lt;artifactId&gt;alipay-sdk-java&lt;/artifactId&gt;\r\n            &lt;version&gt;4.10.192.ALL&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n    \r\n    &lt;build&gt;\r\n        &lt;finalName&gt;breadroll-mall&lt;/finalName&gt;\r\n        &lt;plugins&gt;\r\n            &lt;!--&lt;plugin&gt;\r\n                &lt;groupId&gt;com.github.ulisesbocchio&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jasypt-maven-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.0.2&lt;/version&gt;\r\n            &lt;/plugin&gt;--&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;source&gt;8&lt;/source&gt;\r\n                    &lt;target&gt;8&lt;/target&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n&lt;/project&gt;\r\n\r\n==my application-jdbc.yml\r\n```\r\nspring:\r\n  datasource:\r\n    type: com.alibaba.druid.pool.DruidDataSource\r\n    driver-class-name: com.mysql.jdbc.Driver\r\n    url: jdbc:mysql://47.113.223.103:3306/roll?useSSL=false&amp;useUnicode=true&amp;characterEncoding=utf8\r\n    username: root\r\n    password: ********\r\n\r\nmybatis:\r\n  mapper-locations: classpath:mapper/*.xml\r\n  type-aliases-package: com.\r\n  configuration:\r\n    mapUnderscoreToCamelCase: true\r\n```\r\n\r\nwhen I start or debug main, It turns off It turns off automatically?\r\nI Googled some solutions, but they dont work for me. I have not add tomcat plugin in my pom, and I have add spring-boot-starter-web.\r\n\r\nPlease advise how resolve this issue.","title":"Executing command line runner... Closing JPA EntityManagerFactory for persistence unit &#39;default&#39; {dataSource-1} closed","body":"<p>the main start warning logs:</p>\n<pre><code>[breadroll-mall] 2023-03-17 10:47:00.885 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler [&quot;http-nio-9999&quot;]\n[breadroll-mall] 2023-03-17 10:47:00.934 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 9999 (http) with context path ''\n[breadroll-mall] 2023-03-17 10:47:01.018 [main] INFO  com.qiu.BreadRollMallServer - Started BreadRollMallServer in 30.777 seconds (JVM running for 45.258)\n[breadroll-mall] 2023-03-17 10:47:01.034 [main] INFO  com.qiu.BreadRollMallServerRunner - Executing command line runner...\n[breadroll-mall] 2023-03-17 10:47:03.957 [main] INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'\n[breadroll-mall] 2023-03-17 10:47:03.975 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed\n</code></pre>\n<p><strong>my pom</strong>:</p>\n\n<p>\n4.0.0</p>\n<pre><code>&lt;groupId&gt;com.qiu&lt;/groupId&gt;\n&lt;artifactId&gt;breadroll-mall&lt;/artifactId&gt;\n&lt;version&gt;2.0-SNAPSHOT&lt;/version&gt;\n\n&lt;name&gt;breadroll-mall&lt;/name&gt;\n&lt;!-- FIXME change it to the project's website --&gt;\n&lt;url&gt;http://www.example.com&lt;/url&gt;\n\n&lt;properties&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;maven.compiler.source&gt;1.7&lt;/maven.compiler.source&gt;\n    &lt;maven.compiler.target&gt;1.7&lt;/maven.compiler.target&gt;\n&lt;/properties&gt;\n&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;2.3.7.RELEASE &lt;/version&gt;\n&lt;/parent&gt;\n\n&lt;dependencies&gt;\n    &lt;!--mysql--&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;mysql&lt;/groupId&gt;\n        &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n        &lt;version&gt;5.1.47&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt;\n        &lt;version&gt;2.1.2&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;!-- https://mvnrepository.com/artifact/com.github.ulisesbocchio/jasypt-spring-boot-starter --&gt;\n    &lt;!--&lt;dependency&gt;\n        &lt;groupId&gt;com.github.ulisesbocchio&lt;/groupId&gt;\n        &lt;artifactId&gt;jasypt-spring-boot-starter&lt;/artifactId&gt;\n        &lt;version&gt;3.0.3&lt;/version&gt;\n    &lt;/dependency&gt;--&gt;\n    &lt;!--druid--&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.alibaba&lt;/groupId&gt;\n        &lt;artifactId&gt;druid&lt;/artifactId&gt;\n        &lt;version&gt;1.1.12&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.aliyun.oss&lt;/groupId&gt;\n        &lt;artifactId&gt;aliyun-sdk-oss&lt;/artifactId&gt;\n        &lt;version&gt;2.8.3&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;commons-fileupload&lt;/groupId&gt;\n        &lt;artifactId&gt;commons-fileupload&lt;/artifactId&gt;\n        &lt;version&gt;1.3.1&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.aliyun&lt;/groupId&gt;\n        &lt;artifactId&gt;aliyun-java-sdk-core&lt;/artifactId&gt;\n        &lt;version&gt;4.4.6&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.aliyun&lt;/groupId&gt;\n        &lt;artifactId&gt;aliyun-java-sdk-dysmsapi&lt;/artifactId&gt;\n        &lt;version&gt;2.1.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;!-- fastjson --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.alibaba&lt;/groupId&gt;\n        &lt;artifactId&gt;fastjson&lt;/artifactId&gt;\n        &lt;version&gt;1.2.62&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;redis.clients&lt;/groupId&gt;\n        &lt;artifactId&gt;jedis&lt;/artifactId&gt;\n        &lt;version&gt;2.9.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;!--lombok--&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n        &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;cn.dev33&lt;/groupId&gt;\n        &lt;artifactId&gt;sa-token-spring-boot-starter&lt;/artifactId&gt;\n        &lt;version&gt;1.29.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;cn.dev33&lt;/groupId&gt;\n        &lt;artifactId&gt;sa-token-dao-redis-jackson&lt;/artifactId&gt;\n        &lt;version&gt;1.29.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n        &lt;artifactId&gt;commons-pool2&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;!--thymeleaf--&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-aop&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-mail&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;junit&lt;/groupId&gt;\n        &lt;artifactId&gt;junit&lt;/artifactId&gt;\n        &lt;version&gt;4.12&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.maven&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-settings&lt;/artifactId&gt;\n        &lt;version&gt;3.3.9&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.github.shalousun&lt;/groupId&gt;\n        &lt;artifactId&gt;common-util&lt;/artifactId&gt;\n        &lt;version&gt;1.9.2&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.alipay.sdk&lt;/groupId&gt;\n        &lt;artifactId&gt;alipay-sdk-java&lt;/artifactId&gt;\n        &lt;version&gt;4.10.192.ALL&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n\n&lt;build&gt;\n    &lt;finalName&gt;breadroll-mall&lt;/finalName&gt;\n    &lt;plugins&gt;\n        &lt;!--&lt;plugin&gt;\n            &lt;groupId&gt;com.github.ulisesbocchio&lt;/groupId&gt;\n            &lt;artifactId&gt;jasypt-maven-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.0.2&lt;/version&gt;\n        &lt;/plugin&gt;--&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n                &lt;source&gt;8&lt;/source&gt;\n                &lt;target&gt;8&lt;/target&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n\n<p>==my application-jdbc.yml</p>\n<pre><code>spring:\n  datasource:\n    type: com.alibaba.druid.pool.DruidDataSource\n    driver-class-name: com.mysql.jdbc.Driver\n    url: jdbc:mysql://47.113.223.103:3306/roll?useSSL=false&amp;useUnicode=true&amp;characterEncoding=utf8\n    username: root\n    password: ********\n\nmybatis:\n  mapper-locations: classpath:mapper/*.xml\n  type-aliases-package: com.\n  configuration:\n    mapUnderscoreToCamelCase: true\n</code></pre>\n<p>when I start or debug main, It turns off It turns off automatically?\nI Googled some solutions, but they dont work for me. I have not add tomcat plugin in my pom, and I have add spring-boot-starter-web.</p>\n<p>Please advise how resolve this issue.</p>\n"},{"tags":["java","spring","spring-boot","jackson","jackson-databind"],"answers":[{"tags":[],"owner":{"account_id":2457081,"reputation":1393,"user_id":2142023,"accept_rate":68,"display_name":"DarkVision"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679020652,"creation_date":1679020652,"answer_id":75763316,"question_id":75762479,"body_markdown":"Jackson ObjectMapper provides hooks that you can use to customize the serialization and deserialization of JSON. You can custom a class by extending JsonSerializer\r\n\r\ni guess something like this but i might be wrong hope this help\r\n\r\n    public class MaskJsonSerializer extends JsonSerializer&lt;Object&gt; {\r\n        \r\n        private Map&lt;String, MyMaskStrategy&gt; ms;\r\n        \r\n        public MaskJsonSerializer(Map&lt;String, MyMaskStrategy&gt; ms) {\r\n            this.ms=ms;\r\n        }\r\n        \r\n        @Override\r\n        public void serialize(Object value, JsonGenerator gen, SerializerProvider serializers) throws IOException {\r\n            gen.writeStartObject();\r\n            BeanDescription beanDesc = serializers.getConfig().introspect(serializers.constructType(value.getClass()));\r\n            for (BeanPropertyDefinition prop : beanDesc.findProperties()) {\r\n                String propName = prop.getName();\r\n                Object propValue = prop.getAccessor().getValue(value);\r\n                MyMaskStrategy strategy = ms.get(propName);\r\n                if (strategy != null) {\r\n                    propValue = strategy.mask(propValue);\r\n                }\r\n                gen.writeObjectField(propName, propValue);\r\n            }\r\n            gen.writeEndObject();\r\n        }\r\n    }\r\n\r\nthen register this class to the ObjectMapper bean and use it\r\n\r\n    ObjectMapper mapper = new ObjectMapper();\r\n    SimpleModule module = new SimpleModule();\r\n    module.addSerializer(new MaskingJsonSerializer(myMaskingObject));\r\n    mapper.registerModule(module);","title":"Jackson ObjectMapper Universal Masking without Annotations","body":"<p>Jackson ObjectMapper provides hooks that you can use to customize the serialization and deserialization of JSON. You can custom a class by extending JsonSerializer</p>\n<p>i guess something like this but i might be wrong hope this help</p>\n<pre><code>public class MaskJsonSerializer extends JsonSerializer&lt;Object&gt; {\n    \n    private Map&lt;String, MyMaskStrategy&gt; ms;\n    \n    public MaskJsonSerializer(Map&lt;String, MyMaskStrategy&gt; ms) {\n        this.ms=ms;\n    }\n    \n    @Override\n    public void serialize(Object value, JsonGenerator gen, SerializerProvider serializers) throws IOException {\n        gen.writeStartObject();\n        BeanDescription beanDesc = serializers.getConfig().introspect(serializers.constructType(value.getClass()));\n        for (BeanPropertyDefinition prop : beanDesc.findProperties()) {\n            String propName = prop.getName();\n            Object propValue = prop.getAccessor().getValue(value);\n            MyMaskStrategy strategy = ms.get(propName);\n            if (strategy != null) {\n                propValue = strategy.mask(propValue);\n            }\n            gen.writeObjectField(propName, propValue);\n        }\n        gen.writeEndObject();\n    }\n}\n</code></pre>\n<p>then register this class to the ObjectMapper bean and use it</p>\n<pre><code>ObjectMapper mapper = new ObjectMapper();\nSimpleModule module = new SimpleModule();\nmodule.addSerializer(new MaskingJsonSerializer(myMaskingObject));\nmapper.registerModule(module);\n</code></pre>\n"}],"owner":{"account_id":389722,"reputation":102,"user_id":749337,"display_name":"matthenry87"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":346,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1679020652,"creation_date":1679008895,"question_id":75762479,"body_markdown":"Today I have a masking implementation in place in which I&#39;ll map an already serialized JSON string to a Map&lt;String, Object&gt; using ObjectMapper and then do a breadth-first-traversal. As I traverse I check against a map of fields that are to be masked and mask according to their masking strategy. Then once masked, I use ObjectMapper to convert it back to JSON.\r\n\r\nI&#39;ve been rethinking this, and I would like to re-implement so that if/when I want to produce masked JSON, I simply swap in a customized ObjectMapper and let the masking happen when it&#39;s originally converted to JSON.\r\n\r\nI don&#39;t want to make developers annotate fields - as this masking is applied at the framework level in most cases (applied automatically via Spring Boot Starter). I want to have an opportunity to check the name of the field and mask it&#39;s value if needed. Does the Jackson ObjectMapper have something I can hook into to achieve this?\r\n\r\nThanks in advance!","title":"Jackson ObjectMapper Universal Masking without Annotations","body":"<p>Today I have a masking implementation in place in which I'll map an already serialized JSON string to a Map&lt;String, Object&gt; using ObjectMapper and then do a breadth-first-traversal. As I traverse I check against a map of fields that are to be masked and mask according to their masking strategy. Then once masked, I use ObjectMapper to convert it back to JSON.</p>\n<p>I've been rethinking this, and I would like to re-implement so that if/when I want to produce masked JSON, I simply swap in a customized ObjectMapper and let the masking happen when it's originally converted to JSON.</p>\n<p>I don't want to make developers annotate fields - as this masking is applied at the framework level in most cases (applied automatically via Spring Boot Starter). I want to have an opportunity to check the name of the field and mask it's value if needed. Does the Jackson ObjectMapper have something I can hook into to achieve this?</p>\n<p>Thanks in advance!</p>\n"},{"tags":["java","xml","xsd","schema","xerces"],"comments":[{"owner":{"account_id":109492,"reputation":107225,"user_id":290085,"display_name":"kjhughes"},"score":1,"creation_date":1678981079,"post_id":75757864,"comment_id":133641847,"body_markdown":"Please remove the `vc:` prefix from all `minOccurs` and `maxOccurs` attributes and report back the results.","body":"Please remove the <code>vc:</code> prefix from all <code>minOccurs</code> and <code>maxOccurs</code> attributes and report back the results."},{"owner":{"account_id":5126886,"reputation":20904,"user_id":4108590,"accept_rate":57,"display_name":"Ravindra Ranwala"},"score":1,"creation_date":1679010428,"post_id":75757864,"comment_id":133648916,"body_markdown":"Well, that solved the issue. I added this because my eclipse xml editor reports an error when `maxOccurs=&quot;unbounded&quot;` is added: `cos-all-limited.2: The {max occurs} of an element in an &#39;all&#39; model group must be 0 or 1. The value &#39;unbounded&#39; for \n element &#39;child1&#39; is invalid`. After adding `vc` namespace prefix the error disappeared. So, I thought it is required. However, after removing the `vc` namespace prefix, now it is working fine. Thank you so much for pointing that out. Appreciate it !","body":"Well, that solved the issue. I added this because my eclipse xml editor reports an error when <code>maxOccurs=&quot;unbounded&quot;</code> is added: <code>cos-all-limited.2: The {max occurs} of an element in an &#39;all&#39; model group must be 0 or 1. The value &#39;unbounded&#39; for   element &#39;child1&#39; is invalid</code>. After adding <code>vc</code> namespace prefix the error disappeared. So, I thought it is required. However, after removing the <code>vc</code> namespace prefix, now it is working fine. Thank you so much for pointing that out. Appreciate it !"}],"answers":[{"comments":[{"owner":{"account_id":529122,"reputation":158120,"user_id":415448,"accept_rate":33,"display_name":"Michael Kay"},"score":0,"creation_date":1678982982,"post_id":75758631,"comment_id":133642415,"body_markdown":"Yes, sorry to repeat your comment as an answer but I felt the question could be answered more definitively.","body":"Yes, sorry to repeat your comment as an answer but I felt the question could be answered more definitively."},{"owner":{"account_id":109492,"reputation":107225,"user_id":290085,"display_name":"kjhughes"},"score":0,"creation_date":1678983223,"post_id":75758631,"comment_id":133642499,"body_markdown":"My wording could have been better to convey that `vc:maxOccurs` and `vc:minOccurs` are definitely wrong but that I&#39;d not checked for further issues.  Anyway, no problem.  &#128077;","body":"My wording could have been better to convey that <code>vc:maxOccurs</code> and <code>vc:minOccurs</code> are definitely wrong but that I&#39;d not checked for further issues.  Anyway, no problem.  👍"}],"tags":[],"owner":{"account_id":529122,"reputation":158120,"user_id":415448,"accept_rate":33,"display_name":"Michael Kay"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1678983501,"creation_date":1678982127,"answer_id":75758631,"question_id":75757864,"body_markdown":"The `minOccurs` and `maxOccurs` attribute should not be in the `vc` namespace.\r\n\r\nBy placing `minOccurs` and `maxOccurs` in the `&quot;http://www.w3.org/2007/XMLSchema-versioning&quot;` namespace, the real `minOccurs` and `maxOccurs` are absent.  Thus, the default values of `1` come into play, explaining the observed validation error message.","title":"XSD - How to allow elements in any order while some with occurance [0-1] whereas others with [0-unbounded]","body":"<p>The <code>minOccurs</code> and <code>maxOccurs</code> attribute should not be in the <code>vc</code> namespace.</p>\n<p>By placing <code>minOccurs</code> and <code>maxOccurs</code> in the <code>&quot;http://www.w3.org/2007/XMLSchema-versioning&quot;</code> namespace, the real <code>minOccurs</code> and <code>maxOccurs</code> are absent.  Thus, the default values of <code>1</code> come into play, explaining the observed validation error message.</p>\n"}],"owner":{"account_id":5126886,"reputation":20904,"user_id":4108590,"accept_rate":57,"display_name":"Ravindra Ranwala"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75758631,"answer_count":1,"score":1,"last_activity_date":1679020598,"creation_date":1678977998,"question_id":75757864,"body_markdown":"I have to validate an xml file against an xsd grammer. What follows is a simple simulation of my original requirement.\r\n\r\nThere&#39;s a root element named `&lt;foo&gt;`\r\nIt has four child elements, let&#39;s denote them as child1, child2, child3 and child4 for the sake of simplicity.\r\n\r\n - Element child1 child2 can appear any number of times (0 to unbounded)\r\n - Elements to be in any order\r\n - Elements child3 and child4 should appear at most once. (0 to 1)\r\n - All the child elements are optional, thus making `&lt;foo /&gt;` a valid xml.\r\n\r\nAfter going through some existing answers, I figured out that the more verbose answer given in [1] \r\nis not a practical solution to my problem since there are more than 10 child elements \r\nwould yield to a combinatorial explosion. Then, in the latter part of the answer states that xsd 1.1 \r\nrelaxes some of the constraints, so that the use of `&lt;xs:all&gt;` along with `maxOccurs=&quot;unbounded&quot;` is allowed.\r\n\r\nThen I used xerces library, and tried using xsd 1.1 features with java. What follows is my sample code. However,\r\nwhen multiple elements are presented in the xml, I am getting the following error.\r\n**cvc-complex-type.2.4.a: Invalid content was found starting with element &#39;child1&#39;. One of &#39;{child2, child3, child4}&#39; is expected.**\r\n\r\n\r\n**xsd schema with xsd 1.1 extensions.**\r\n\r\n    &lt;?xml version=&quot;1.1&quot; encoding=&quot;UTF-8&quot; ?&gt;\r\n    &lt;xs:schema xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot;\r\n    \txmlns:vc=&quot;http://www.w3.org/2007/XMLSchema-versioning&quot;\r\n    \telementFormDefault=&quot;qualified&quot; vc:minVersion=&quot;1.1&quot;&gt;\r\n    \t&lt;xs:element name=&quot;foo&quot;&gt;\r\n    \t\t&lt;xs:complexType&gt;\r\n    \t\t\t&lt;xs:all&gt;\r\n    \t\t\t\t&lt;xs:element name=&quot;child1&quot; vc:minOccurs=&quot;0&quot;\r\n    \t\t\t\t\tvc:maxOccurs=&quot;unbounded&quot; /&gt;\r\n    \t\t\t\t&lt;xs:element name=&quot;child2&quot; vc:minOccurs=&quot;0&quot;\r\n    \t\t\t\t\tvc:maxOccurs=&quot;unbounded&quot; /&gt;\r\n    \t\t\t\t&lt;xs:element name=&quot;child3&quot; type=&quot;xs:string&quot; /&gt;\r\n    \t\t\t\t&lt;xs:element name=&quot;child4&quot; type=&quot;xs:string&quot; /&gt;\r\n    \t\t\t&lt;/xs:all&gt;\r\n    \t\t&lt;/xs:complexType&gt;\r\n    \t&lt;/xs:element&gt;\r\n    &lt;/xs:schema&gt;\r\n\r\n**xml payload**\r\n\r\n    &lt;foo&gt;\r\n    \t&lt;child1&gt; a &lt;/child1&gt;\r\n    \t&lt;child1&gt; b &lt;/child1&gt;\r\n    \t&lt;child3&gt; c &lt;/child3&gt;\r\n    \t&lt;child2&gt; d &lt;/child2&gt;\r\n    \t&lt;child4&gt; e &lt;/child4&gt;\r\n    \t&lt;child2&gt; g &lt;/child2&gt;\r\n    \t&lt;child1&gt; f &lt;/child1&gt;\r\n    &lt;/foo&gt;\r\n\r\n**maven dependency**\r\n\r\n                        &lt;dependency&gt;\r\n    \t\t\t\t\t\t&lt;groupId&gt;org.opengis.cite.xerces&lt;/groupId&gt;\r\n    \t\t\t\t\t\t&lt;artifactId&gt;xercesImpl-xsd11&lt;/artifactId&gt;\r\n    \t\t\t\t\t\t&lt;version&gt;2.12-beta-r1667115&lt;/version&gt;\r\n    \t\t\t\t\t\t&lt;exclusions&gt;\r\n    \t\t\t\t\t\t\t&lt;exclusion&gt;\r\n    \t\t\t\t\t\t\t\t&lt;groupId&gt;xml-apis&lt;/groupId&gt;\r\n        \t\t\t\t\t\t\t&lt;artifactId&gt;xml-apis&lt;/artifactId&gt;\r\n    \t\t\t\t\t\t\t&lt;/exclusion&gt;\r\n    \t\t\t\t\t\t&lt;/exclusions&gt;\r\n    \t\t\t\t\t&lt;/dependency&gt;\r\n    \t\t\t\t\t&lt;dependency&gt;\r\n    \t\t\t\t\t\t&lt;groupId&gt;org.exist-db.thirdparty.org.eclipse.wst.xml&lt;/groupId&gt;\r\n    \t\t\t\t\t\t&lt;artifactId&gt;xpath2&lt;/artifactId&gt;\r\n    \t\t\t\t\t\t&lt;version&gt;1.2.0&lt;/version&gt;\r\n    \t\t\t\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n    \t\t\t\t\t&lt;/dependency&gt;\r\n    \t\t\t\t\t&lt;dependency&gt;\r\n    \t\t\t\t\t\t&lt;groupId&gt;edu.princeton.cup&lt;/groupId&gt;\r\n    \t\t\t\t\t\t&lt;artifactId&gt;java-cup&lt;/artifactId&gt;\r\n    \t\t\t\t\t\t&lt;version&gt;10k&lt;/version&gt;\r\n    \t\t\t\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n    \t\t\t\t\t&lt;/dependency&gt;\r\nor\r\n\r\n\t\t\t\t&lt;dependency&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.ibissource&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;ibis-xerces&lt;/artifactId&gt;\r\n\t\t\t\t\t&lt;version&gt;2.12.2-xml-schema-1.1&lt;/version&gt;\r\n\t\t\t\t&lt;/dependency&gt;\r\n\r\n**sample java code:**\r\n\r\n    import java.io.BufferedReader;\r\n    import java.io.File;\r\n    import java.io.FileReader;\r\n    import java.io.IOException;\r\n    import java.io.StringReader;\r\n    import java.util.ArrayList;\r\n    import java.util.Collection;\r\n    import java.util.StringJoiner;\r\n    \r\n    import javax.xml.transform.Source;\r\n    import javax.xml.transform.stream.StreamSource;\r\n    import javax.xml.validation.Schema;\r\n    import javax.xml.validation.SchemaFactory;\r\n    import javax.xml.validation.Validator;\r\n    \r\n    import org.xml.sax.ErrorHandler;\r\n    import org.xml.sax.SAXException;\r\n    import org.xml.sax.SAXParseException;\r\n    \r\n    public class CrtDataValidatorImpl {\r\n    \r\n    \tpublic void validate(String xsdFilePath, String data) {\r\n    \t\tfinal XmlErrorHandler errorHandler = new XmlErrorHandler();\r\n    \t\ttry {\r\n    \t\t\tfinal File schemaFile = new File(xsdFilePath);\r\n    \t\t\tfinal SchemaFactory schemaFactory = SchemaFactory.newInstance(&quot;http://www.w3.org/XML/XMLSchema/v1.1&quot;);\r\n    \t\t\tfinal Schema schema = schemaFactory.newSchema(schemaFile);\r\n    \t\t\tfinal Validator validator = schema.newValidator();\r\n    \t\t\tvalidator.setErrorHandler(errorHandler);\r\n    \t\t\tfinal Source xmlSource = new StreamSource(new StringReader(data));\r\n    \t\t\tvalidator.validate(xmlSource);\r\n    \t\t} catch (SAXException e) {\r\n    \t\t\tSystem.out.println(e.getMessage());\r\n    \t\t} catch (IOException e) {\r\n    \t\t}\r\n    \t\tSystem.out.println(String.format(&quot;Number of errors: %s&quot;, errorHandler.getExceptions().size()));\r\n    \t\tfor (Exception ex : errorHandler.getExceptions())\r\n    \t\t\tSystem.out.println(ex.getMessage());\r\n    \t}\r\n    \r\n    \tpublic static void main(String[] args) throws IOException {\r\n    \t\ttry (BufferedReader br = new BufferedReader(new FileReader(&quot;./src/main/resources/simple-payload.xml&quot;))) {\r\n    \t\t\tfinal StringJoiner sj = new StringJoiner(&quot;\\n&quot;);\r\n    \t\t\tString line = br.readLine();\r\n    \r\n    \t\t\twhile (line != null) {\r\n    \t\t\t\tsj.add(line);\r\n    \t\t\t\tline = br.readLine();\r\n    \t\t\t}\r\n    \t\t\tSystem.out.println(sj.toString());\r\n    \t\t\tnew CrtDataValidatorImpl().validate(&quot;./src/main/resources/sample.xsd&quot;, sj.toString());\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tstatic class XmlErrorHandler implements ErrorHandler {\r\n    \r\n    \t\tprivate Collection&lt;SAXParseException&gt; exceptions;\r\n    \r\n    \t\tpublic XmlErrorHandler() {\r\n    \t\t\tthis.exceptions = new ArrayList&lt;&gt;();\r\n    \t\t}\r\n    \r\n    \t\tpublic Collection&lt;SAXParseException&gt; getExceptions() {\r\n    \t\t\treturn exceptions;\r\n    \t\t}\r\n    \r\n    \t\t@Override\r\n    \t\tpublic void warning(SAXParseException exception) {\r\n    \t\t\texceptions.add(exception);\r\n    \t\t}\r\n    \r\n    \t\t@Override\r\n    \t\tpublic void error(SAXParseException exception) {\r\n    \t\t\texceptions.add(exception);\r\n    \t\t}\r\n    \r\n    \t\t@Override\r\n    \t\tpublic void fatalError(SAXParseException exception) {\r\n    \t\t\texceptions.add(exception);\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\n\r\nI tried debugging the issue, unfortunately it didn&#39;t shed any light in figuring out the cause. What is missing here? Any help would be appreciated. Thanks.\r\n\r\n[1] https://stackoverflow.com/questions/2290360/xsd-how-to-allow-elements-in-any-order-any-number-of-times","title":"XSD - How to allow elements in any order while some with occurance [0-1] whereas others with [0-unbounded]","body":"<p>I have to validate an xml file against an xsd grammer. What follows is a simple simulation of my original requirement.</p>\n<p>There's a root element named <code>&lt;foo&gt;</code>\nIt has four child elements, let's denote them as child1, child2, child3 and child4 for the sake of simplicity.</p>\n<ul>\n<li>Element child1 child2 can appear any number of times (0 to unbounded)</li>\n<li>Elements to be in any order</li>\n<li>Elements child3 and child4 should appear at most once. (0 to 1)</li>\n<li>All the child elements are optional, thus making <code>&lt;foo /&gt;</code> a valid xml.</li>\n</ul>\n<p>After going through some existing answers, I figured out that the more verbose answer given in [1]\nis not a practical solution to my problem since there are more than 10 child elements\nwould yield to a combinatorial explosion. Then, in the latter part of the answer states that xsd 1.1\nrelaxes some of the constraints, so that the use of <code>&lt;xs:all&gt;</code> along with <code>maxOccurs=&quot;unbounded&quot;</code> is allowed.</p>\n<p>Then I used xerces library, and tried using xsd 1.1 features with java. What follows is my sample code. However,\nwhen multiple elements are presented in the xml, I am getting the following error.\n<strong>cvc-complex-type.2.4.a: Invalid content was found starting with element 'child1'. One of '{child2, child3, child4}' is expected.</strong></p>\n<p><strong>xsd schema with xsd 1.1 extensions.</strong></p>\n<pre><code>&lt;?xml version=&quot;1.1&quot; encoding=&quot;UTF-8&quot; ?&gt;\n&lt;xs:schema xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot;\n    xmlns:vc=&quot;http://www.w3.org/2007/XMLSchema-versioning&quot;\n    elementFormDefault=&quot;qualified&quot; vc:minVersion=&quot;1.1&quot;&gt;\n    &lt;xs:element name=&quot;foo&quot;&gt;\n        &lt;xs:complexType&gt;\n            &lt;xs:all&gt;\n                &lt;xs:element name=&quot;child1&quot; vc:minOccurs=&quot;0&quot;\n                    vc:maxOccurs=&quot;unbounded&quot; /&gt;\n                &lt;xs:element name=&quot;child2&quot; vc:minOccurs=&quot;0&quot;\n                    vc:maxOccurs=&quot;unbounded&quot; /&gt;\n                &lt;xs:element name=&quot;child3&quot; type=&quot;xs:string&quot; /&gt;\n                &lt;xs:element name=&quot;child4&quot; type=&quot;xs:string&quot; /&gt;\n            &lt;/xs:all&gt;\n        &lt;/xs:complexType&gt;\n    &lt;/xs:element&gt;\n&lt;/xs:schema&gt;\n</code></pre>\n<p><strong>xml payload</strong></p>\n<pre><code>&lt;foo&gt;\n    &lt;child1&gt; a &lt;/child1&gt;\n    &lt;child1&gt; b &lt;/child1&gt;\n    &lt;child3&gt; c &lt;/child3&gt;\n    &lt;child2&gt; d &lt;/child2&gt;\n    &lt;child4&gt; e &lt;/child4&gt;\n    &lt;child2&gt; g &lt;/child2&gt;\n    &lt;child1&gt; f &lt;/child1&gt;\n&lt;/foo&gt;\n</code></pre>\n<p><strong>maven dependency</strong></p>\n<pre><code>                    &lt;dependency&gt;\n                        &lt;groupId&gt;org.opengis.cite.xerces&lt;/groupId&gt;\n                        &lt;artifactId&gt;xercesImpl-xsd11&lt;/artifactId&gt;\n                        &lt;version&gt;2.12-beta-r1667115&lt;/version&gt;\n                        &lt;exclusions&gt;\n                            &lt;exclusion&gt;\n                                &lt;groupId&gt;xml-apis&lt;/groupId&gt;\n                                &lt;artifactId&gt;xml-apis&lt;/artifactId&gt;\n                            &lt;/exclusion&gt;\n                        &lt;/exclusions&gt;\n                    &lt;/dependency&gt;\n                    &lt;dependency&gt;\n                        &lt;groupId&gt;org.exist-db.thirdparty.org.eclipse.wst.xml&lt;/groupId&gt;\n                        &lt;artifactId&gt;xpath2&lt;/artifactId&gt;\n                        &lt;version&gt;1.2.0&lt;/version&gt;\n                        &lt;scope&gt;runtime&lt;/scope&gt;\n                    &lt;/dependency&gt;\n                    &lt;dependency&gt;\n                        &lt;groupId&gt;edu.princeton.cup&lt;/groupId&gt;\n                        &lt;artifactId&gt;java-cup&lt;/artifactId&gt;\n                        &lt;version&gt;10k&lt;/version&gt;\n                        &lt;scope&gt;runtime&lt;/scope&gt;\n                    &lt;/dependency&gt;\n</code></pre>\n<p>or</p>\n<pre><code>            &lt;dependency&gt;\n                &lt;groupId&gt;org.ibissource&lt;/groupId&gt;\n                &lt;artifactId&gt;ibis-xerces&lt;/artifactId&gt;\n                &lt;version&gt;2.12.2-xml-schema-1.1&lt;/version&gt;\n            &lt;/dependency&gt;\n</code></pre>\n<p><strong>sample java code:</strong></p>\n<pre><code>import java.io.BufferedReader;\nimport java.io.File;\nimport java.io.FileReader;\nimport java.io.IOException;\nimport java.io.StringReader;\nimport java.util.ArrayList;\nimport java.util.Collection;\nimport java.util.StringJoiner;\n\nimport javax.xml.transform.Source;\nimport javax.xml.transform.stream.StreamSource;\nimport javax.xml.validation.Schema;\nimport javax.xml.validation.SchemaFactory;\nimport javax.xml.validation.Validator;\n\nimport org.xml.sax.ErrorHandler;\nimport org.xml.sax.SAXException;\nimport org.xml.sax.SAXParseException;\n\npublic class CrtDataValidatorImpl {\n\n    public void validate(String xsdFilePath, String data) {\n        final XmlErrorHandler errorHandler = new XmlErrorHandler();\n        try {\n            final File schemaFile = new File(xsdFilePath);\n            final SchemaFactory schemaFactory = SchemaFactory.newInstance(&quot;http://www.w3.org/XML/XMLSchema/v1.1&quot;);\n            final Schema schema = schemaFactory.newSchema(schemaFile);\n            final Validator validator = schema.newValidator();\n            validator.setErrorHandler(errorHandler);\n            final Source xmlSource = new StreamSource(new StringReader(data));\n            validator.validate(xmlSource);\n        } catch (SAXException e) {\n            System.out.println(e.getMessage());\n        } catch (IOException e) {\n        }\n        System.out.println(String.format(&quot;Number of errors: %s&quot;, errorHandler.getExceptions().size()));\n        for (Exception ex : errorHandler.getExceptions())\n            System.out.println(ex.getMessage());\n    }\n\n    public static void main(String[] args) throws IOException {\n        try (BufferedReader br = new BufferedReader(new FileReader(&quot;./src/main/resources/simple-payload.xml&quot;))) {\n            final StringJoiner sj = new StringJoiner(&quot;\\n&quot;);\n            String line = br.readLine();\n\n            while (line != null) {\n                sj.add(line);\n                line = br.readLine();\n            }\n            System.out.println(sj.toString());\n            new CrtDataValidatorImpl().validate(&quot;./src/main/resources/sample.xsd&quot;, sj.toString());\n        }\n    }\n\n    static class XmlErrorHandler implements ErrorHandler {\n\n        private Collection&lt;SAXParseException&gt; exceptions;\n\n        public XmlErrorHandler() {\n            this.exceptions = new ArrayList&lt;&gt;();\n        }\n\n        public Collection&lt;SAXParseException&gt; getExceptions() {\n            return exceptions;\n        }\n\n        @Override\n        public void warning(SAXParseException exception) {\n            exceptions.add(exception);\n        }\n\n        @Override\n        public void error(SAXParseException exception) {\n            exceptions.add(exception);\n        }\n\n        @Override\n        public void fatalError(SAXParseException exception) {\n            exceptions.add(exception);\n        }\n    }\n}\n</code></pre>\n<p>I tried debugging the issue, unfortunately it didn't shed any light in figuring out the cause. What is missing here? Any help would be appreciated. Thanks.</p>\n<p>[1] <a href=\"https://stackoverflow.com/questions/2290360/xsd-how-to-allow-elements-in-any-order-any-number-of-times\">XSD - how to allow elements in any order any number of times?</a></p>\n"},{"tags":["java","android","android-studio"],"owner":{"account_id":9969173,"reputation":1133,"user_id":7375877,"display_name":"Mi Po"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":14,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679020343,"creation_date":1679020343,"question_id":75763295,"body_markdown":"The phone has an inertial measurement system with 3axis gyro, accel, and magnetometer. \r\n\r\nI would like to have a state vector of the phone at any given time, and I am sure there are APIs already built to integrate and interpolate all of the measurements from those components, ignore missing components, and maybe add other components like GPS if available. To be used in indoor spaces\r\n\r\nWhat are some example APIs I can use to do this in Android studio, \r\nDoes OpenCV have such functions built in? ","title":"Android Attitude tracking with OpenCV or other APIs","body":"<p>The phone has an inertial measurement system with 3axis gyro, accel, and magnetometer.</p>\n<p>I would like to have a state vector of the phone at any given time, and I am sure there are APIs already built to integrate and interpolate all of the measurements from those components, ignore missing components, and maybe add other components like GPS if available. To be used in indoor spaces</p>\n<p>What are some example APIs I can use to do this in Android studio,\nDoes OpenCV have such functions built in?</p>\n"},{"tags":["java","android","robolectric","android-keystore"],"answers":[{"comments":[{"owner":{"account_id":1969933,"reputation":433,"user_id":1769177,"accept_rate":62,"display_name":"Rod"},"score":6,"creation_date":1551191689,"post_id":39103948,"comment_id":96544774,"body_markdown":"I still don&#39;t get it. Is there a way to use both Robolectric and KeyStore?","body":"I still don&#39;t get it. Is there a way to use both Robolectric and KeyStore?"},{"owner":{"account_id":476901,"reputation":2441,"user_id":888059,"accept_rate":88,"display_name":"Reid Mac"},"score":2,"creation_date":1616699480,"post_id":39103948,"comment_id":118092501,"body_markdown":"For anyone else coming here. This article worked for me to test EncryptedSharedPreferences. https://proandroiddev.com/testing-jetpack-security-with-robolectric-9f9cf2aa4f61","body":"For anyone else coming here. This article worked for me to test EncryptedSharedPreferences. <a href=\"https://proandroiddev.com/testing-jetpack-security-with-robolectric-9f9cf2aa4f61\" rel=\"nofollow noreferrer\">proandroiddev.com/&hellip;</a>"}],"tags":[],"owner":{"account_id":1109512,"reputation":5031,"user_id":1100249,"accept_rate":82,"display_name":"marius bardan"},"comment_count":2,"down_vote_count":1,"up_vote_count":6,"is_accepted":true,"score":5,"last_activity_date":1471962404,"creation_date":1471962404,"answer_id":39103948,"question_id":38213748,"body_markdown":"There is already a discussion on this at https://github.com/robolectric/robolectric/issues/1518 .\r\n\r\nIn short:\r\n\r\n&gt; From java.security.Security javadoc:\r\n&gt; &gt; The default values of security properties are read from an\r\n&gt; &gt; implementation-specific location, which is typically the properties\r\n&gt; &gt; file lib/security/java.security in the Java installation directory. \r\n\r\n&gt; … which we probably don&#39;t want to encourage people to monkey with.\r\n\r\n&gt; Looks like this will need to be a method intercept rule...\r\n\r\nThe same happens when trying PowerMockito.","title":"Using the Android KeyStore in Robolectric tests","body":"<p>There is already a discussion on this at <a href=\"https://github.com/robolectric/robolectric/issues/1518\" rel=\"noreferrer\">https://github.com/robolectric/robolectric/issues/1518</a> .</p>\n\n<p>In short:</p>\n\n<blockquote>\n  <p>From java.security.Security javadoc:</p>\n  \n  <blockquote>\n    <p>The default values of security properties are read from an\n    implementation-specific location, which is typically the properties\n    file lib/security/java.security in the Java installation directory. </p>\n  </blockquote>\n  \n  <p>… which we probably don't want to encourage people to monkey with.</p>\n  \n  <p>Looks like this will need to be a method intercept rule...</p>\n</blockquote>\n\n<p>The same happens when trying PowerMockito.</p>\n"},{"comments":[{"owner":{"account_id":13756177,"reputation":405,"user_id":10202308,"display_name":"Ahmed"},"score":0,"creation_date":1698054904,"post_id":75763240,"comment_id":136352115,"body_markdown":"I am not sure if it is the correct way. But worked for me for java unit test, I called `@Before public void setup() { FakeAndroidKeyStore.INSTANCE.getSetup(); }`","body":"I am not sure if it is the correct way. But worked for me for java unit test, I called <code>@Before public void setup() { FakeAndroidKeyStore.INSTANCE.getSetup(); }</code>"}],"tags":[],"owner":{"account_id":1715992,"reputation":3373,"user_id":1573036,"accept_rate":92,"display_name":"Victor Oliveira"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1679019695,"creation_date":1679019695,"answer_id":75763240,"question_id":38213748,"body_markdown":"Matthew Dolan came up with an outstanding solution in his [article](https://proandroiddev.com/testing-jetpack-security-with-robolectric-9f9cf2aa4f61).\r\n\r\nHere is the code to create a `FakeAndroidKeyStore`\r\n\r\n```\r\nimport java.io.InputStream\r\nimport java.io.OutputStream\r\nimport java.security.Key\r\nimport java.security.KeyStore\r\nimport java.security.KeyStoreSpi\r\nimport java.security.Provider\r\nimport java.security.SecureRandom\r\nimport java.security.Security\r\nimport java.security.cert.Certificate\r\nimport java.security.spec.AlgorithmParameterSpec\r\nimport java.util.Date\r\nimport java.util.Enumeration\r\nimport javax.crypto.KeyGenerator\r\nimport javax.crypto.KeyGeneratorSpi\r\nimport javax.crypto.SecretKey\r\n\r\nobject FakeAndroidKeyStore {\r\n\r\n    val setup by lazy {\r\n        Security.addProvider(object : Provider(&quot;AndroidKeyStore&quot;, 1.0, &quot;&quot;) {\r\n            init {\r\n                put(&quot;KeyStore.AndroidKeyStore&quot;, FakeKeyStore::class.java.name)\r\n                put(&quot;KeyGenerator.AES&quot;, FakeAesKeyGenerator::class.java.name)\r\n            }\r\n        })\r\n    }\r\n\r\n    @Suppress(&quot;unused&quot;)\r\n    class FakeKeyStore : KeyStoreSpi() {\r\n        private val wrapped = KeyStore.getInstance(KeyStore.getDefaultType())\r\n\r\n        override fun engineIsKeyEntry(alias: String?): Boolean = wrapped.isKeyEntry(alias)\r\n        override fun engineIsCertificateEntry(alias: String?): Boolean = wrapped.isCertificateEntry(alias)\r\n        override fun engineGetCertificate(alias: String?): Certificate = wrapped.getCertificate(alias)\r\n        override fun engineGetCreationDate(alias: String?): Date = wrapped.getCreationDate(alias)\r\n        override fun engineDeleteEntry(alias: String?) = wrapped.deleteEntry(alias)\r\n        override fun engineSetKeyEntry(alias: String?, key: Key?, password: CharArray?, chain: Array&lt;out Certificate&gt;?) =\r\n            wrapped.setKeyEntry(alias, key, password, chain)\r\n\r\n        override fun engineSetKeyEntry(alias: String?, key: ByteArray?, chain: Array&lt;out Certificate&gt;?) = wrapped.setKeyEntry(alias, key, chain)\r\n        override fun engineStore(stream: OutputStream?, password: CharArray?) = wrapped.store(stream, password)\r\n        override fun engineSize(): Int = wrapped.size()\r\n        override fun engineAliases(): Enumeration&lt;String&gt; = wrapped.aliases()\r\n        override fun engineContainsAlias(alias: String?): Boolean = wrapped.containsAlias(alias)\r\n        override fun engineLoad(stream: InputStream?, password: CharArray?) = wrapped.load(stream, password)\r\n        override fun engineGetCertificateChain(alias: String?): Array&lt;Certificate&gt; = wrapped.getCertificateChain(alias)\r\n        override fun engineSetCertificateEntry(alias: String?, cert: Certificate?) = wrapped.setCertificateEntry(alias, cert)\r\n        override fun engineGetCertificateAlias(cert: Certificate?): String = wrapped.getCertificateAlias(cert)\r\n        override fun engineGetKey(alias: String?, password: CharArray?): Key = wrapped.getKey(alias, password)\r\n    }\r\n\r\n    @Suppress(&quot;unused&quot;)\r\n    class FakeAesKeyGenerator : KeyGeneratorSpi() {\r\n        private val wrapped = KeyGenerator.getInstance(&quot;AES&quot;)\r\n\r\n        override fun engineInit(random: SecureRandom?) = Unit\r\n        override fun engineInit(params: AlgorithmParameterSpec?, random: SecureRandom?) = Unit\r\n        override fun engineInit(keysize: Int, random: SecureRandom?) = Unit\r\n        override fun engineGenerateKey(): SecretKey = wrapped.generateKey()\r\n    }\r\n}\r\n```\r\n\r\nUse just before where the `java.security.KeyStore` gets called.\r\n\r\nIn example:\r\n\r\n```\r\n@Before\r\nfun setup() {\r\n  FakeAndroidKeyStore.setup\r\n  KeyStore.getInstance(...)\r\n  ...\r\n}\r\n```","title":"Using the Android KeyStore in Robolectric tests","body":"<p>Matthew Dolan came up with an outstanding solution in his <a href=\"https://proandroiddev.com/testing-jetpack-security-with-robolectric-9f9cf2aa4f61\" rel=\"nofollow noreferrer\">article</a>.</p>\n<p>Here is the code to create a <code>FakeAndroidKeyStore</code></p>\n<pre><code>import java.io.InputStream\nimport java.io.OutputStream\nimport java.security.Key\nimport java.security.KeyStore\nimport java.security.KeyStoreSpi\nimport java.security.Provider\nimport java.security.SecureRandom\nimport java.security.Security\nimport java.security.cert.Certificate\nimport java.security.spec.AlgorithmParameterSpec\nimport java.util.Date\nimport java.util.Enumeration\nimport javax.crypto.KeyGenerator\nimport javax.crypto.KeyGeneratorSpi\nimport javax.crypto.SecretKey\n\nobject FakeAndroidKeyStore {\n\n    val setup by lazy {\n        Security.addProvider(object : Provider(&quot;AndroidKeyStore&quot;, 1.0, &quot;&quot;) {\n            init {\n                put(&quot;KeyStore.AndroidKeyStore&quot;, FakeKeyStore::class.java.name)\n                put(&quot;KeyGenerator.AES&quot;, FakeAesKeyGenerator::class.java.name)\n            }\n        })\n    }\n\n    @Suppress(&quot;unused&quot;)\n    class FakeKeyStore : KeyStoreSpi() {\n        private val wrapped = KeyStore.getInstance(KeyStore.getDefaultType())\n\n        override fun engineIsKeyEntry(alias: String?): Boolean = wrapped.isKeyEntry(alias)\n        override fun engineIsCertificateEntry(alias: String?): Boolean = wrapped.isCertificateEntry(alias)\n        override fun engineGetCertificate(alias: String?): Certificate = wrapped.getCertificate(alias)\n        override fun engineGetCreationDate(alias: String?): Date = wrapped.getCreationDate(alias)\n        override fun engineDeleteEntry(alias: String?) = wrapped.deleteEntry(alias)\n        override fun engineSetKeyEntry(alias: String?, key: Key?, password: CharArray?, chain: Array&lt;out Certificate&gt;?) =\n            wrapped.setKeyEntry(alias, key, password, chain)\n\n        override fun engineSetKeyEntry(alias: String?, key: ByteArray?, chain: Array&lt;out Certificate&gt;?) = wrapped.setKeyEntry(alias, key, chain)\n        override fun engineStore(stream: OutputStream?, password: CharArray?) = wrapped.store(stream, password)\n        override fun engineSize(): Int = wrapped.size()\n        override fun engineAliases(): Enumeration&lt;String&gt; = wrapped.aliases()\n        override fun engineContainsAlias(alias: String?): Boolean = wrapped.containsAlias(alias)\n        override fun engineLoad(stream: InputStream?, password: CharArray?) = wrapped.load(stream, password)\n        override fun engineGetCertificateChain(alias: String?): Array&lt;Certificate&gt; = wrapped.getCertificateChain(alias)\n        override fun engineSetCertificateEntry(alias: String?, cert: Certificate?) = wrapped.setCertificateEntry(alias, cert)\n        override fun engineGetCertificateAlias(cert: Certificate?): String = wrapped.getCertificateAlias(cert)\n        override fun engineGetKey(alias: String?, password: CharArray?): Key = wrapped.getKey(alias, password)\n    }\n\n    @Suppress(&quot;unused&quot;)\n    class FakeAesKeyGenerator : KeyGeneratorSpi() {\n        private val wrapped = KeyGenerator.getInstance(&quot;AES&quot;)\n\n        override fun engineInit(random: SecureRandom?) = Unit\n        override fun engineInit(params: AlgorithmParameterSpec?, random: SecureRandom?) = Unit\n        override fun engineInit(keysize: Int, random: SecureRandom?) = Unit\n        override fun engineGenerateKey(): SecretKey = wrapped.generateKey()\n    }\n}\n</code></pre>\n<p>Use just before where the <code>java.security.KeyStore</code> gets called.</p>\n<p>In example:</p>\n<pre><code>@Before\nfun setup() {\n  FakeAndroidKeyStore.setup\n  KeyStore.getInstance(...)\n  ...\n}\n</code></pre>\n"}],"owner":{"account_id":297201,"reputation":468,"user_id":602588,"accept_rate":100,"display_name":"jackyalcine"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6589,"favorite_count":0,"down_vote_count":1,"up_vote_count":8,"accepted_answer_id":39103948,"answer_count":2,"score":7,"last_activity_date":1679019695,"creation_date":1467757108,"question_id":38213748,"body_markdown":"I&#39;m attempting to write a few testcases that work against the [Android Keystore][1]. However, when I write the following test case:\r\n\r\n    @RunWith(RobolectricGradleTestRunner.class)\r\n    @Config(constants = BuildConfig.class, sdk = 21)\r\n    public class FancyPantsUnitTest {\r\n       @Test\r\n       public void buildKey() {\r\n            keyPairGenerator = KeyPairGenerator.getInstance(&quot;RSA&quot;, &quot;AndroidKeyStore&quot;);\r\n            keyPairGenerator.initialize(4096);\r\n            final KeyPair keyPair = keyPairGenerator.generateKeyPair();\r\n       }\r\n    }\r\n\r\nThis fails with the following exception:\r\n\r\n    org.junit.ComparisonFailure: expected:&lt;null&gt; but was:&lt;java.security.KeyStoreException: AndroidKeyStore not found&gt;\r\n\r\nI&#39;m targeting API Level **23** if that helps.\r\n\r\n[1]: https://developer.android.com/training/articles/keystore.html","title":"Using the Android KeyStore in Robolectric tests","body":"<p>I'm attempting to write a few testcases that work against the <a href=\"https://developer.android.com/training/articles/keystore.html\" rel=\"noreferrer\">Android Keystore</a>. However, when I write the following test case:</p>\n\n<pre><code>@RunWith(RobolectricGradleTestRunner.class)\n@Config(constants = BuildConfig.class, sdk = 21)\npublic class FancyPantsUnitTest {\n   @Test\n   public void buildKey() {\n        keyPairGenerator = KeyPairGenerator.getInstance(\"RSA\", \"AndroidKeyStore\");\n        keyPairGenerator.initialize(4096);\n        final KeyPair keyPair = keyPairGenerator.generateKeyPair();\n   }\n}\n</code></pre>\n\n<p>This fails with the following exception:</p>\n\n<pre><code>org.junit.ComparisonFailure: expected:&lt;null&gt; but was:&lt;java.security.KeyStoreException: AndroidKeyStore not found&gt;\n</code></pre>\n\n<p>I'm targeting API Level <strong>23</strong> if that helps.</p>\n"},{"tags":["java","android","android-studio","bluetooth","bluetooth-profile"],"owner":{"account_id":18557751,"reputation":43,"user_id":13522405,"display_name":"김덕래"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1679019596,"creation_date":1595297254,"question_id":63006331,"body_markdown":"I&#39;m making a speech recognize App. \r\nBut there is problem.\r\n\r\nApp have to listen user&#39;s voice, So Bluetooth profile change to sco. \r\nBut I want to change Bluetooth profile to A2dp when I listen the music.\r\n\r\nThe Service can close by AudioManager.isMusicActive() but it can&#39;t change back A2dp.\r\n\r\nIs there answer for it? I know that 2 profile can&#39;t be incompatible.\r\n\r\nSo, When i use for speech recognize , Bluetooth profile -&gt; Sco\r\n    When i listen to music, Bluetooth profile -&gt; A2dp\r\n\r\nHow can i handle it?","title":"Hi, I have a question about Bluetooth profile","body":"<p>I'm making a speech recognize App.\nBut there is problem.</p>\n<p>App have to listen user's voice, So Bluetooth profile change to sco.\nBut I want to change Bluetooth profile to A2dp when I listen the music.</p>\n<p>The Service can close by AudioManager.isMusicActive() but it can't change back A2dp.</p>\n<p>Is there answer for it? I know that 2 profile can't be incompatible.</p>\n<p>So, When i use for speech recognize , Bluetooth profile -&gt; Sco\nWhen i listen to music, Bluetooth profile -&gt; A2dp</p>\n<p>How can i handle it?</p>\n"},{"tags":["java","visual-studio-code"],"answers":[{"tags":[],"owner":{"account_id":14438632,"reputation":71,"user_id":10429970,"display_name":"Bimpfi"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1538146014,"creation_date":1538146014,"answer_id":52557784,"question_id":52532347,"body_markdown":"According to the [VSCode Java Debugging Doc][1] you have to use a terminal as console like the integrated Terminal instead of the internal console.\r\n\r\n&gt; The default Debug Console in VS Code doesn&#39;t support inputs. If your program need inputs from a terminal , you can use the Integrated Terminal (Ctrl+`) within VS Code or an external terminal to launch it.\r\n\r\nYou also can set the *console* property in your *launch.json* to *integratedTerminal* or *externalTerminal*, so you will use it every debug session.\r\n\r\n\r\n  [1]: https://code.visualstudio.com/docs/java/java-debugging#_debug-session-inputs","title":"Unrecognized request: { _request: evaluate } in visual studio code","body":"<p>According to the <a href=\"https://code.visualstudio.com/docs/java/java-debugging#_debug-session-inputs\" rel=\"noreferrer\">VSCode Java Debugging Doc</a> you have to use a terminal as console like the integrated Terminal instead of the internal console.</p>\n\n<blockquote>\n  <p>The default Debug Console in VS Code doesn't support inputs. If your program need inputs from a terminal , you can use the Integrated Terminal (Ctrl+`) within VS Code or an external terminal to launch it.</p>\n</blockquote>\n\n<p>You also can set the <em>console</em> property in your <em>launch.json</em> to <em>integratedTerminal</em> or <em>externalTerminal</em>, so you will use it every debug session.</p>\n"},{"tags":[],"owner":{"account_id":28038120,"reputation":1,"user_id":21416128,"display_name":"user21416128"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679019404,"creation_date":1679019404,"answer_id":75763216,"question_id":52532347,"body_markdown":"enter in &quot;configurations&quot; in Java Debugger. \r\n\r\nchange in the field java &gt; debug &gt; Settings:Console, and select IntegratedTerminal.","title":"Unrecognized request: { _request: evaluate } in visual studio code","body":"<p>enter in &quot;configurations&quot; in Java Debugger.</p>\n<p>change in the field java &gt; debug &gt; Settings:Console, and select IntegratedTerminal.</p>\n"}],"owner":{"account_id":14429011,"reputation":21,"user_id":10422886,"display_name":"Mcnamara_John"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11963,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1679019404,"creation_date":1538035780,"question_id":52532347,"body_markdown":"This is my java code on visual studio code when I try to run it on visual studio code and enter a number it says: Unrecognized request: { _request: evaluate } ...\r\nWhat should I do to disappear this message when I use visual studio code?\r\n\r\n\r\n    import java.util.Scanner;\r\n    \r\n    public class Test{\r\n        public static void main(String[] args){\r\n            System.out.println(&quot;Hello&quot;);\r\n            Scanner sc = new Scanner(System.in);\r\n            System.out.print(&quot;input number : &quot;);\r\n            int number = sc.nextInt();\r\n            System.out.println(number);\r\n    \r\n            int result = (number &gt;= 0) ? number : -number ;\r\n            System.out.println(result);\r\n    \r\n            sc.close();\r\n    \r\n        }\r\n    }","title":"Unrecognized request: { _request: evaluate } in visual studio code","body":"<p>This is my java code on visual studio code when I try to run it on visual studio code and enter a number it says: Unrecognized request: { _request: evaluate } ...\nWhat should I do to disappear this message when I use visual studio code?</p>\n\n<pre><code>import java.util.Scanner;\n\npublic class Test{\n    public static void main(String[] args){\n        System.out.println(\"Hello\");\n        Scanner sc = new Scanner(System.in);\n        System.out.print(\"input number : \");\n        int number = sc.nextInt();\n        System.out.println(number);\n\n        int result = (number &gt;= 0) ? number : -number ;\n        System.out.println(result);\n\n        sc.close();\n\n    }\n}\n</code></pre>\n"},{"tags":["java","android","kotlin","robolectric","robolectric-shadows"],"owner":{"account_id":7974758,"reputation":1046,"user_id":6018313,"accept_rate":82,"display_name":"Kevin Etore"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":769,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"closed_date":1679065667,"answer_count":0,"score":4,"last_activity_date":1679019366,"creation_date":1645811094,"question_id":71269780,"body_markdown":"I have a few unit tests where the underlying code makes use of EncryptedSharedPreferences. Because of said code, I&#39;m receiving Exceptions where Robolectric is unable both handle and shadow the native KeyStore implementation. There&#39;s currently an open issue on Robolectric&#39;s Github, which can be found [here](https://github.com/robolectric/robolectric/issues/1518). But it does not seem to have any fix on Android &gt;= 11. Any ideas or perhaps you&#39;ve encountered the same issue?\r\n\r\n**KeyStoreException is being thrown**\r\n\r\n```\r\nAndroidKeyStore not found\r\njava.security.KeyStoreException: AndroidKeyStore not found\r\n\tat java.base/java.security.KeyStore.getInstance(KeyStore.java:878)\r\n\tat androidx.security.crypto.MasterKeys.keyExists(MasterKeys.java:135)\r\n\tat androidx.security.crypto.MasterKeys.getOrCreate(MasterKeys.java:87)\r\n\tat ...auth.EncryptedAuthState.sharedPreferences(EncryptedAuthState.kt:88)\r\n\tat ...auth.EncryptedAuthState.readState(EncryptedAuthState.kt:57)\r\n\tat ...auth.EncryptedAuthState.getCurrent(EncryptedAuthState.kt:40)\r\n\tat ...auth.EncryptedAuthState.updateAfterTokenResponse(EncryptedAuthState.kt:74)\r\n\tat ...EncryptedAuthStateTest.updateIdTokenOnTokenResponse(EncryptedAuthStateTest.kt:126)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n\tat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)\r\n\tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\r\n\tat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)\r\n\tat org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\r\n\tat org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)\r\n\tat org.robolectric.RobolectricTestRunner$HelperTestRunner$1.evaluate(RobolectricTestRunner.java:591)\r\n\tat org.robolectric.internal.SandboxTestRunner$2.lambda$evaluate$0(SandboxTestRunner.java:274)\r\n\tat org.robolectric.internal.bytecode.Sandbox.lambda$runOnMainThread$0(Sandbox.java:88)\r\n\tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\n\tat java.base/java.lang.Thread.run(Thread.java:834)\r\nCaused by: java.security.NoSuchAlgorithmException: AndroidKeyStore KeyStore not available\r\n\tat java.base/sun.security.jca.GetInstance.getInstance(GetInstance.java:159)\r\n\tat java.base/java.security.Security.getImpl(Security.java:700)\r\n\tat java.base/java.security.KeyStore.getInstance(KeyStore.java:875)\r\n```\r\n\r\n**When running a test such as**\r\n\r\n```kotlin\r\n@ExperimentalFoundationApi\r\n@ExperimentalStdlibApi\r\n@RunWith(RobolectricTestRunner::class)\r\n@Config(shadows = [KeyStoreShadow::class])\r\nclass EncryptedAuthStateTest {\r\n    @Test\r\n    fun initialAuthState() {\r\n        val state =\r\n            EncryptedAuthState(InstrumentationRegistry.getInstrumentation().targetContext)\r\n                .getCurrent()\r\n\r\n        Assert.assertFalse(state.isAuthorized)\r\n        Assert.assertNull(state.accessToken)\r\n        Assert.assertNull(state.accessTokenExpirationTime)\r\n        Assert.assertNull(state.idToken)\r\n        Assert.assertNull(state.refreshToken)\r\n        Assert.assertNull(state.lastAuthorizationResponse)\r\n        Assert.assertNull(state.lastTokenResponse)\r\n        Assert.assertNull(state.lastRegistrationResponse)\r\n        Assert.assertNull(state.scope)\r\n        Assert.assertNull(state.scopeSet)\r\n    }\r\n}\r\n```\r\n\r\n**EncryptedAuthState**\r\n\r\n```kotlin\r\nprivate fun sharedPreferences(): SharedPreferences {\r\n        val masterKey: MasterKey = MasterKey.Builder(context, MasterKey.DEFAULT_MASTER_KEY_ALIAS)\r\n            .setKeyScheme(MasterKey.KeyScheme.AES256_GCM)\r\n            .build()\r\n\r\n        return EncryptedSharedPreferences.create(\r\n            context,\r\n            &quot;AuthState&quot;,\r\n            masterKey,\r\n            EncryptedSharedPreferences.PrefKeyEncryptionScheme.AES256_SIV,\r\n            EncryptedSharedPreferences.PrefValueEncryptionScheme.AES256_GCM\r\n        )\r\n    }\r\n```\r\n\r\nI&#39;ve tried to create a Shadow class, but this is not being triggered:\r\n\r\n```java\r\nimport org.robolectric.annotation.Implementation;\r\nimport org.robolectric.annotation.Implements;\r\n\r\nimport java.io.FileInputStream;\r\nimport java.io.IOException;\r\nimport java.security.KeyStore;\r\nimport java.security.KeyStoreException;\r\nimport java.security.NoSuchAlgorithmException;\r\nimport java.security.cert.CertificateException;\r\n\r\n@Implements(KeyStore.class)\r\npublic class KeyStoreShadow {\r\n    @Implementation\r\n    public static KeyStore getInstance(String type)\r\n            throws KeyStoreException, IOException, CertificateException, NoSuchAlgorithmException {\r\n        KeyStore keyStore = KeyStore.getInstance(KeyStore.getDefaultType());\r\n        keyStore.load(new FileInputStream(\r\n                System.getProperty(&quot;java.home&quot;) + &quot;/lib/security/cacerts&quot;), null);\r\n        return keyStore;\r\n    }\r\n}\r\n\r\n```\r\n\r\n**Resources**\r\n\r\n - [Issue at robolectric repo, doesn&#39;t seem to have fix on Android &gt;=\r\n   11](https://github.com/robolectric/robolectric/issues/1518)\r\n - [Solution here resulted into `JCE cannot authenticate the provider AndroidKeyStore`. Most likely due to Android &gt;= 11 where key stores having to be signed](https://proandroiddev.com/testing-jetpack-security-with-robolectric-9f9cf2aa4f61)\r\n\r\n","title":"Robolectric AndroidKeyStore not found, KeyStore.getInstance","body":"<p>I have a few unit tests where the underlying code makes use of EncryptedSharedPreferences. Because of said code, I'm receiving Exceptions where Robolectric is unable both handle and shadow the native KeyStore implementation. There's currently an open issue on Robolectric's Github, which can be found <a href=\"https://github.com/robolectric/robolectric/issues/1518\" rel=\"nofollow noreferrer\">here</a>. But it does not seem to have any fix on Android &gt;= 11. Any ideas or perhaps you've encountered the same issue?</p>\n<p><strong>KeyStoreException is being thrown</strong></p>\n<pre><code>AndroidKeyStore not found\njava.security.KeyStoreException: AndroidKeyStore not found\n    at java.base/java.security.KeyStore.getInstance(KeyStore.java:878)\n    at androidx.security.crypto.MasterKeys.keyExists(MasterKeys.java:135)\n    at androidx.security.crypto.MasterKeys.getOrCreate(MasterKeys.java:87)\n    at ...auth.EncryptedAuthState.sharedPreferences(EncryptedAuthState.kt:88)\n    at ...auth.EncryptedAuthState.readState(EncryptedAuthState.kt:57)\n    at ...auth.EncryptedAuthState.getCurrent(EncryptedAuthState.kt:40)\n    at ...auth.EncryptedAuthState.updateAfterTokenResponse(EncryptedAuthState.kt:74)\n    at ...EncryptedAuthStateTest.updateIdTokenOnTokenResponse(EncryptedAuthStateTest.kt:126)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)\n    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\n    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)\n    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\n    at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)\n    at org.robolectric.RobolectricTestRunner$HelperTestRunner$1.evaluate(RobolectricTestRunner.java:591)\n    at org.robolectric.internal.SandboxTestRunner$2.lambda$evaluate$0(SandboxTestRunner.java:274)\n    at org.robolectric.internal.bytecode.Sandbox.lambda$runOnMainThread$0(Sandbox.java:88)\n    at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\n    at java.base/java.lang.Thread.run(Thread.java:834)\nCaused by: java.security.NoSuchAlgorithmException: AndroidKeyStore KeyStore not available\n    at java.base/sun.security.jca.GetInstance.getInstance(GetInstance.java:159)\n    at java.base/java.security.Security.getImpl(Security.java:700)\n    at java.base/java.security.KeyStore.getInstance(KeyStore.java:875)\n</code></pre>\n<p><strong>When running a test such as</strong></p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>@ExperimentalFoundationApi\n@ExperimentalStdlibApi\n@RunWith(RobolectricTestRunner::class)\n@Config(shadows = [KeyStoreShadow::class])\nclass EncryptedAuthStateTest {\n    @Test\n    fun initialAuthState() {\n        val state =\n            EncryptedAuthState(InstrumentationRegistry.getInstrumentation().targetContext)\n                .getCurrent()\n\n        Assert.assertFalse(state.isAuthorized)\n        Assert.assertNull(state.accessToken)\n        Assert.assertNull(state.accessTokenExpirationTime)\n        Assert.assertNull(state.idToken)\n        Assert.assertNull(state.refreshToken)\n        Assert.assertNull(state.lastAuthorizationResponse)\n        Assert.assertNull(state.lastTokenResponse)\n        Assert.assertNull(state.lastRegistrationResponse)\n        Assert.assertNull(state.scope)\n        Assert.assertNull(state.scopeSet)\n    }\n}\n</code></pre>\n<p><strong>EncryptedAuthState</strong></p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>private fun sharedPreferences(): SharedPreferences {\n        val masterKey: MasterKey = MasterKey.Builder(context, MasterKey.DEFAULT_MASTER_KEY_ALIAS)\n            .setKeyScheme(MasterKey.KeyScheme.AES256_GCM)\n            .build()\n\n        return EncryptedSharedPreferences.create(\n            context,\n            &quot;AuthState&quot;,\n            masterKey,\n            EncryptedSharedPreferences.PrefKeyEncryptionScheme.AES256_SIV,\n            EncryptedSharedPreferences.PrefValueEncryptionScheme.AES256_GCM\n        )\n    }\n</code></pre>\n<p>I've tried to create a Shadow class, but this is not being triggered:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.robolectric.annotation.Implementation;\nimport org.robolectric.annotation.Implements;\n\nimport java.io.FileInputStream;\nimport java.io.IOException;\nimport java.security.KeyStore;\nimport java.security.KeyStoreException;\nimport java.security.NoSuchAlgorithmException;\nimport java.security.cert.CertificateException;\n\n@Implements(KeyStore.class)\npublic class KeyStoreShadow {\n    @Implementation\n    public static KeyStore getInstance(String type)\n            throws KeyStoreException, IOException, CertificateException, NoSuchAlgorithmException {\n        KeyStore keyStore = KeyStore.getInstance(KeyStore.getDefaultType());\n        keyStore.load(new FileInputStream(\n                System.getProperty(&quot;java.home&quot;) + &quot;/lib/security/cacerts&quot;), null);\n        return keyStore;\n    }\n}\n\n</code></pre>\n<p><strong>Resources</strong></p>\n<ul>\n<li><a href=\"https://github.com/robolectric/robolectric/issues/1518\" rel=\"nofollow noreferrer\">Issue at robolectric repo, doesn't seem to have fix on Android &gt;=\n11</a></li>\n<li><a href=\"https://proandroiddev.com/testing-jetpack-security-with-robolectric-9f9cf2aa4f61\" rel=\"nofollow noreferrer\">Solution here resulted into <code>JCE cannot authenticate the provider AndroidKeyStore</code>. Most likely due to Android &gt;= 11 where key stores having to be signed</a></li>\n</ul>\n"},{"tags":["java","spring","thymeleaf"],"owner":{"account_id":23289938,"reputation":15,"user_id":17372169,"display_name":"lostInCodeKeys"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679018833,"creation_date":1679018833,"question_id":75763170,"body_markdown":"I have a @GetMapping and @PostMapping for a guessing game.  I have a method that generates a new pokemon image in my @GetMapping method but I don&#39;t know how to reference the object in my @PostMapping to compare the input textfield to the objects name.\r\n\r\n    @Controller\r\n    public class pokemonGameController {\r\n\r\n    Pokemon p = new Pokemon();  // Create an instance to reference for .getPokemon() method\r\n    InputData data = new InputData();\r\n\r\n    @GetMapping(&quot;/play&quot;)\r\n    public String play(Model model) throws JsonProcessingException {\r\n        Pokemon pokemon = p.getPokemon();\r\n\r\n        System.out.println(pokemon.getName() + &quot;  &quot; + pokemon.getImage());  // Check if returned \r\n                                                                            //name and image are correct\r\n\r\n        model.addAttribute(&quot;pokemonImage&quot;, pokemon.getImage()); //Displays Pokemon Image\r\n        model.addAttribute(&quot;data&quot;, data);  //Maps the textfield to &quot;InputData&quot; class\r\n        return &quot;displayPokemon&quot;;  //Displays Pokemon Image and textfield for input/guess\r\n        }\r\n    \r\n    @PostMapping(&quot;/play&quot;)\r\n    public String checkPokemonSubmit(@ModelAttribute InputData data,\r\n                                     @ModelAttribute Pokemon pokemon, Model model) {\r\n       \r\n      System.out.println(data.getAnswer());\r\n      System.out.println(pokemon.getName());  //Returns null \r\n        \r\n\r\n      model.addAttribute(&quot;pokemon&quot;, pokemon.getName()); //Always returns null\r\n      model.addAttribute(&quot;data&quot;, data.getAnswer());  //Returns the text from the inputfield\r\n      return &quot;simpleResult&quot;;\r\n    }\r\n\r\nI&#39;m pretty sure it has to do with the &quot;@ModelAttribute Pokemon pokemon&quot;.  It always returns null so it isn&#39;t referencing the &quot;Pokemon pokemon = p.getPokemon()&quot; object from the GET method.  How would I get to that object&#39;s properties?\r\n\r\nThis is a simple HTML page to display the input from the user against the pokemon&#39;s name from the \r\n\r\n    &lt;!DOCTYPE HTML&gt;\r\n    &lt;html xmlns:th=&quot;https://www.thymeleaf.org&quot;&gt;\r\n    &lt;head&gt;\r\n        &lt;title&gt;Guess that Pokemon - Result&lt;/title&gt;\r\n        &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;\r\n    &lt;/head&gt;\r\n    &lt;body&gt;\r\n    &lt;h1&gt;Result&lt;/h1&gt;\r\n    &lt;p th:text=&quot;&#39;You guessed: &#39; + ${data}&quot; /&gt;\r\n    &lt;p th:text=&quot;&#39;Correct Name: &#39; + ${pokemon}&quot; /&gt;\r\n    &lt;a href=&quot;/play&quot;&gt;Guess Another Pokemon&lt;/a&gt;\r\n    &lt;/body&gt;\r\n    &lt;/html&gt;","title":"How do I reference an object created in my GET request for my POST request in Spring?","body":"<p>I have a @GetMapping and @PostMapping for a guessing game.  I have a method that generates a new pokemon image in my @GetMapping method but I don't know how to reference the object in my @PostMapping to compare the input textfield to the objects name.</p>\n<pre><code>@Controller\npublic class pokemonGameController {\n\nPokemon p = new Pokemon();  // Create an instance to reference for .getPokemon() method\nInputData data = new InputData();\n\n@GetMapping(&quot;/play&quot;)\npublic String play(Model model) throws JsonProcessingException {\n    Pokemon pokemon = p.getPokemon();\n\n    System.out.println(pokemon.getName() + &quot;  &quot; + pokemon.getImage());  // Check if returned \n                                                                        //name and image are correct\n\n    model.addAttribute(&quot;pokemonImage&quot;, pokemon.getImage()); //Displays Pokemon Image\n    model.addAttribute(&quot;data&quot;, data);  //Maps the textfield to &quot;InputData&quot; class\n    return &quot;displayPokemon&quot;;  //Displays Pokemon Image and textfield for input/guess\n    }\n\n@PostMapping(&quot;/play&quot;)\npublic String checkPokemonSubmit(@ModelAttribute InputData data,\n                                 @ModelAttribute Pokemon pokemon, Model model) {\n   \n  System.out.println(data.getAnswer());\n  System.out.println(pokemon.getName());  //Returns null \n    \n\n  model.addAttribute(&quot;pokemon&quot;, pokemon.getName()); //Always returns null\n  model.addAttribute(&quot;data&quot;, data.getAnswer());  //Returns the text from the inputfield\n  return &quot;simpleResult&quot;;\n}\n</code></pre>\n<p>I'm pretty sure it has to do with the &quot;@ModelAttribute Pokemon pokemon&quot;.  It always returns null so it isn't referencing the &quot;Pokemon pokemon = p.getPokemon()&quot; object from the GET method.  How would I get to that object's properties?</p>\n<p>This is a simple HTML page to display the input from the user against the pokemon's name from the</p>\n<pre><code>&lt;!DOCTYPE HTML&gt;\n&lt;html xmlns:th=&quot;https://www.thymeleaf.org&quot;&gt;\n&lt;head&gt;\n    &lt;title&gt;Guess that Pokemon - Result&lt;/title&gt;\n    &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;h1&gt;Result&lt;/h1&gt;\n&lt;p th:text=&quot;'You guessed: ' + ${data}&quot; /&gt;\n&lt;p th:text=&quot;'Correct Name: ' + ${pokemon}&quot; /&gt;\n&lt;a href=&quot;/play&quot;&gt;Guess Another Pokemon&lt;/a&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n"},{"tags":["java","sql","spring","hibernate","jpa"],"comments":[{"owner":{"account_id":6740011,"reputation":46648,"user_id":5193536,"display_name":"nbk"},"score":0,"creation_date":1679009102,"post_id":75762435,"comment_id":133648716,"body_markdown":"i think it is better to search and replace, as to reprogram hibernate","body":"i think it is better to search and replace, as to reprogram hibernate"},{"owner":{"account_id":12743722,"reputation":19966,"user_id":12567365,"display_name":"andrewJames"},"score":1,"creation_date":1679013994,"post_id":75762435,"comment_id":133649352,"body_markdown":"Possibly related: [How can Hibernate map the SQL data-type nvarchar(max)?](https://stackoverflow.com/q/1099413/12567365) - can you use `columnDefinition = &quot;nvarchar&quot;` or `@Nationalized` here? There are other approaches suggested also.","body":"Possibly related: <a href=\"https://stackoverflow.com/q/1099413/12567365\">How can Hibernate map the SQL data-type nvarchar(max)?</a> - can you use <code>columnDefinition = &quot;nvarchar&quot;</code> or <code>@Nationalized</code> here? There are other approaches suggested also."},{"owner":{"account_id":2099937,"reputation":6301,"user_id":1867854,"accept_rate":44,"display_name":"mitchkman"},"score":0,"creation_date":1679017394,"post_id":75762435,"comment_id":133649736,"body_markdown":"Yes, I could use `columnDefinition = &quot;nvarchar&quot;`, but as I pointed out, then I&#39;d have to find and replace 5000 fields, with different field names, column names and schema properties.","body":"Yes, I could use <code>columnDefinition = &quot;nvarchar&quot;</code>, but as I pointed out, then I&#39;d have to find and replace 5000 fields, with different field names, column names and schema properties."},{"owner":{"account_id":12743722,"reputation":19966,"user_id":12567365,"display_name":"andrewJames"},"score":1,"creation_date":1679017629,"post_id":75762435,"comment_id":133649758,"body_markdown":"Right - apologies, I did not read carefully. (FWIW, I agree with nbk, even tho you mention it&#39;s not feasible - I take your word for it.)","body":"Right - apologies, I did not read carefully. (FWIW, I agree with nbk, even tho you mention it&#39;s not feasible - I take your word for it.)"},{"owner":{"account_id":2099937,"reputation":6301,"user_id":1867854,"accept_rate":44,"display_name":"mitchkman"},"score":0,"creation_date":1679017730,"post_id":75762435,"comment_id":133649778,"body_markdown":"No worries :) I managed to rewrite all fields, using IntelliJ&#39;s `Search structurally...` feature","body":"No worries :) I managed to rewrite all fields, using IntelliJ&#39;s <code>Search structurally...</code> feature"}],"answers":[{"tags":[],"owner":{"account_id":2099937,"reputation":6301,"user_id":1867854,"accept_rate":44,"display_name":"mitchkman"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679017614,"creation_date":1679017614,"answer_id":75763094,"question_id":75762435,"body_markdown":"I ended up solving this using IntelliJ&#39;s `Search structurally...` feature to rewrite all 5000+ fields.","title":"Change Hibernate&#39;s default SQL type for String","body":"<p>I ended up solving this using IntelliJ's <code>Search structurally...</code> feature to rewrite all 5000+ fields.</p>\n"}],"owner":{"account_id":2099937,"reputation":6301,"user_id":1867854,"accept_rate":44,"display_name":"mitchkman"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":144,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1679017614,"creation_date":1679008470,"question_id":75762435,"body_markdown":"I want to enable schema validation against an existing database on startup using the ```spring.jpa.hibernate.ddl-auto=validate``` property.\r\n\r\nHowever, pretty much all of the String column definitions are failing that validation:\r\n\r\n```\r\nSchema-validation: wrong column type encountered in column [displayName] in table [MY_TABLE];\r\nfound [nvarchar (Types#NVARCHAR)], but expecting [varchar(255) (Types#VARCHAR)]\r\n```\r\n\r\n\r\n\r\nExample field definition:\r\n\r\n```\r\n@Column(name = &quot;display_name&quot;)\r\nprivate String displayName;\r\n```\r\n\r\nThe target schema has over 100 tables with up to 50 columns each, changing the `columnDefinition` to `nvarchar` for every String field is not feasible.\r\n\r\nCan the default SQL type for `String` be changed from `varchar(255)` to `nvarchar`?","title":"Change Hibernate&#39;s default SQL type for String","body":"<p>I want to enable schema validation against an existing database on startup using the <code>spring.jpa.hibernate.ddl-auto=validate</code> property.</p>\n<p>However, pretty much all of the String column definitions are failing that validation:</p>\n<pre><code>Schema-validation: wrong column type encountered in column [displayName] in table [MY_TABLE];\nfound [nvarchar (Types#NVARCHAR)], but expecting [varchar(255) (Types#VARCHAR)]\n</code></pre>\n<p>Example field definition:</p>\n<pre><code>@Column(name = &quot;display_name&quot;)\nprivate String displayName;\n</code></pre>\n<p>The target schema has over 100 tables with up to 50 columns each, changing the <code>columnDefinition</code> to <code>nvarchar</code> for every String field is not feasible.</p>\n<p>Can the default SQL type for <code>String</code> be changed from <code>varchar(255)</code> to <code>nvarchar</code>?</p>\n"},{"tags":["java","spring-boot","log4j","log4j2","springfox"],"comments":[{"owner":{"account_id":17741504,"reputation":1083,"user_id":12881733,"display_name":"Bill Mair"},"score":0,"creation_date":1679014085,"post_id":75762662,"comment_id":133649361,"body_markdown":"What is our problem? Spring boot? Log4J? Both? Your expectations? You not following migration documentation between changes?\n\nSo not really a &quot;java&quot; or even a &quot;spring-boot&quot; problem bit more of a &quot;log4j&quot; issue?","body":"What is our problem? Spring boot? Log4J? Both? Your expectations? You not following migration documentation between changes?  So not really a &quot;java&quot; or even a &quot;spring-boot&quot; problem bit more of a &quot;log4j&quot; issue?"},{"owner":{"account_id":28036938,"reputation":11,"user_id":21415158,"display_name":"Pradeep Reddy"},"score":0,"creation_date":1679017442,"post_id":75762662,"comment_id":133649742,"body_markdown":"Hello @BillMair, I followed the Spring migration document for the migration. After going through the spring documentation, I understood that using the VM argument `-Dlog4j.configurationFile=/&lt;YOUR_CONFIG_FOLDERPATH&gt;/log4j2.xml` will not work in my case. I should instead use `-Dlogging.config=/&lt;YOUR_CONFIG_FOLDERPATH&gt;/log4j2.xml` to let Spring logging know the location of my log4j configuration.","body":"Hello @BillMair, I followed the Spring migration document for the migration. After going through the spring documentation, I understood that using the VM argument <code>-Dlog4j.configurationFile=&#47;&lt;YOUR_CONFIG_FOLDERPATH&gt;&#47;log4j2.x&zwnj;&#8203;ml</code> will not work in my case. I should instead use <code>-Dlogging.config=&#47;&lt;YOUR_CONFIG_FOLDERPATH&gt;&#47;log4j2.xml</code> to let Spring logging know the location of my log4j configuration."},{"owner":{"account_id":28036938,"reputation":11,"user_id":21415158,"display_name":"Pradeep Reddy"},"score":0,"creation_date":1679017651,"post_id":75762662,"comment_id":133649760,"body_markdown":"(`-Dlog4j.configurationFile=/&lt;YOUR_CONFIG_FOLDERPATH&gt;/log4j2.xml` ) I wonder how this was working fine before the migration.","body":"(<code>-Dlog4j.configurationFile=&#47;&lt;YOUR_CONFIG_FOLDERPATH&gt;&#47;log4j2.&zwnj;&#8203;xml</code> ) I wonder how this was working fine before the migration."},{"owner":{"account_id":28036938,"reputation":11,"user_id":21415158,"display_name":"Pradeep Reddy"},"score":0,"creation_date":1679017840,"post_id":75762662,"comment_id":133649792,"body_markdown":"This error `ERROR StatusLogger Recursive call to appender Console` that is thrown by log4j is completely irrelevant. I see that there is already an open [issue](https://issues.apache.org/jira/browse/LOG4J2-2738) with log4j about this error.","body":"This error <code>ERROR StatusLogger Recursive call to appender Console</code> that is thrown by log4j is completely irrelevant. I see that there is already an open <a href=\"https://issues.apache.org/jira/browse/LOG4J2-2738\" rel=\"nofollow noreferrer\">issue</a> with log4j about this error."}],"answers":[{"tags":[],"owner":{"account_id":28036938,"reputation":11,"user_id":21415158,"display_name":"Pradeep Reddy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679016981,"creation_date":1679016981,"answer_id":75763058,"question_id":75762662,"body_markdown":"Finally, After going through spring documentation [here][1] and [here][2]. I understood that if we do not place the log4j or logback configuration file on the classpath, We can let springboot know the location of the configuration file either by placing `logging.config` property in application.properties/application.yml or by using the JVM argument `-Dlogging.config=/&lt;YOUR_CONFIG_FOLDERPATH&gt;/log4j2.xml`. This is only applicable to Springboot applications.\r\n\r\nFor applications that do not use Springboot (Ex: Spark Java Application), We can still use VM arguments `-Dlog4j.configurationFile=/&lt;YOUR_CONFIG_FOLDERPATH&gt;/log4j2.xml` (for log4j/log4j2) and `-Dlogback.configurationFile=/&lt;YOUR_CONFIG_FOLDERPATH&gt;/logback.xml` (for logback)\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/1.1.2.RELEASE/api/org/springframework/boot/logging/LoggingApplicationListener.html\r\n  [2]: https://docs.spring.io/spring-boot/docs/current/reference/html/howto.html#howto.logging","title":"Log4j loads defined configuration, later stops and uses spring boot&#39;s log4j.xml","body":"<p>Finally, After going through spring documentation <a href=\"https://docs.spring.io/spring-boot/docs/1.1.2.RELEASE/api/org/springframework/boot/logging/LoggingApplicationListener.html\" rel=\"nofollow noreferrer\">here</a> and <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/howto.html#howto.logging\" rel=\"nofollow noreferrer\">here</a>. I understood that if we do not place the log4j or logback configuration file on the classpath, We can let springboot know the location of the configuration file either by placing <code>logging.config</code> property in application.properties/application.yml or by using the JVM argument <code>-Dlogging.config=/&lt;YOUR_CONFIG_FOLDERPATH&gt;/log4j2.xml</code>. This is only applicable to Springboot applications.</p>\n<p>For applications that do not use Springboot (Ex: Spark Java Application), We can still use VM arguments <code>-Dlog4j.configurationFile=/&lt;YOUR_CONFIG_FOLDERPATH&gt;/log4j2.xml</code> (for log4j/log4j2) and <code>-Dlogback.configurationFile=/&lt;YOUR_CONFIG_FOLDERPATH&gt;/logback.xml</code> (for logback)</p>\n"}],"owner":{"account_id":28036938,"reputation":11,"user_id":21415158,"display_name":"Pradeep Reddy"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":380,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1679016981,"creation_date":1679011311,"question_id":75762662,"body_markdown":"I recently migrated a legacy spring boot project from Spring boot version 1.5.9.RELEASE to 2.7.7\r\n\r\nAfter the migration, I see everything working fine except the log4j initialization. I am using the latest log4j version (2.20.0) in the project.\r\n\r\nDuring the application startup, I see that my log4j configuration is loaded, later stopped and it uses the spring boot jar&#39;s log4j2.xml\r\n\r\n```\r\nDEBUG StatusLogger Reconfiguration complete for context[name=18b4aac2] at URI /home/vboxuser/Desktop/cande2/cande2-config/log4j2.xml (org.apache.logging.log4j.core.LoggerContext@7ff2a664) with optional ClassLoader: null\r\nDEBUG StatusLogger Shutdown hook enabled. Registering a new one.\r\nDEBUG StatusLogger LoggerContext[name=18b4aac2, org.apache.logging.log4j.core.LoggerContext@7ff2a664] started OK.\r\nDEBUG StatusLogger uri does not represent a local file: jar:file:/home/vboxuser/.m2/repository/org/springframework/boot/spring-boot/2.7.7/spring-boot-2.7.7.jar!/org/springframework/boot/logging/log4j2/log4j2.xml\r\nDEBUG StatusLogger Using configurationFactory org.apache.logging.log4j.core.config.ConfigurationFactory$Factory@57175e74\r\nDEBUG StatusLogger PluginManager &#39;Lookup&#39; found 16 plugins\r\nDEBUG StatusLogger Closing JarURLInputStream sun.net.www.protocol.jar.JarURLConnection$JarURLInputStream@16afbd92\r\nDEBUG StatusLogger Loaded configuration from jar:file:/home/vboxuser/.m2/repository/org/springframework/boot/spring-boot/2.7.7/spring-boot-2.7.7.jar!/org/springframework/boot/logging/log4j2/log4j2.xml\r\n\r\n```\r\n\r\nand that stops me from using my own log4j configuration. It also throws below error in the logs after log4j intialization.\r\n\r\n```\r\n2023-03-16 19:57:21.802  INFO 11942 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1243 ms\r\nERROR StatusLogger Recursive call to appender Console\r\nERROR StatusLogger Recursive call to appender Console\r\nERROR StatusLogger Recursive call to appender Console\r\n```\r\n\r\nLet me know your thoughts about this issue.\r\n\r\n\r\nI checked and confirmed that there are no transitive log4j dependencies coming in. ","title":"Log4j loads defined configuration, later stops and uses spring boot&#39;s log4j.xml","body":"<p>I recently migrated a legacy spring boot project from Spring boot version 1.5.9.RELEASE to 2.7.7</p>\n<p>After the migration, I see everything working fine except the log4j initialization. I am using the latest log4j version (2.20.0) in the project.</p>\n<p>During the application startup, I see that my log4j configuration is loaded, later stopped and it uses the spring boot jar's log4j2.xml</p>\n<pre><code>DEBUG StatusLogger Reconfiguration complete for context[name=18b4aac2] at URI /home/vboxuser/Desktop/cande2/cande2-config/log4j2.xml (org.apache.logging.log4j.core.LoggerContext@7ff2a664) with optional ClassLoader: null\nDEBUG StatusLogger Shutdown hook enabled. Registering a new one.\nDEBUG StatusLogger LoggerContext[name=18b4aac2, org.apache.logging.log4j.core.LoggerContext@7ff2a664] started OK.\nDEBUG StatusLogger uri does not represent a local file: jar:file:/home/vboxuser/.m2/repository/org/springframework/boot/spring-boot/2.7.7/spring-boot-2.7.7.jar!/org/springframework/boot/logging/log4j2/log4j2.xml\nDEBUG StatusLogger Using configurationFactory org.apache.logging.log4j.core.config.ConfigurationFactory$Factory@57175e74\nDEBUG StatusLogger PluginManager 'Lookup' found 16 plugins\nDEBUG StatusLogger Closing JarURLInputStream sun.net.www.protocol.jar.JarURLConnection$JarURLInputStream@16afbd92\nDEBUG StatusLogger Loaded configuration from jar:file:/home/vboxuser/.m2/repository/org/springframework/boot/spring-boot/2.7.7/spring-boot-2.7.7.jar!/org/springframework/boot/logging/log4j2/log4j2.xml\n\n</code></pre>\n<p>and that stops me from using my own log4j configuration. It also throws below error in the logs after log4j intialization.</p>\n<pre><code>2023-03-16 19:57:21.802  INFO 11942 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1243 ms\nERROR StatusLogger Recursive call to appender Console\nERROR StatusLogger Recursive call to appender Console\nERROR StatusLogger Recursive call to appender Console\n</code></pre>\n<p>Let me know your thoughts about this issue.</p>\n<p>I checked and confirmed that there are no transitive log4j dependencies coming in.</p>\n"},{"tags":["java","eclipse","search"],"comments":[{"owner":{"account_id":601,"reputation":2352,"user_id":782,"display_name":"Sam Merrell"},"score":0,"creation_date":1218297682,"post_id":6816,"comment_id":16023169,"body_markdown":"Perhaps there is an issue with the classpath? Does your project reference any other projects or have an external classes or jars you are depending on?","body":"Perhaps there is an issue with the classpath? Does your project reference any other projects or have an external classes or jars you are depending on?"}],"answers":[{"comments":[{"owner":{"account_id":37976,"reputation":10329,"user_id":108781,"display_name":"Zsolt T&#246;r&#246;k"},"score":0,"creation_date":1275320812,"post_id":6840,"comment_id":3000424,"body_markdown":"Close &amp; open worked for me, too. Previously I tried Project | Clean... on the whole workspace, but that didn&#39;t fix the problem. I&#39;m wondering what project close &amp; open does in addition to cleaning that project.","body":"Close &amp; open worked for me, too. Previously I tried Project | Clean... on the whole workspace, but that didn&#39;t fix the problem. I&#39;m wondering what project close &amp; open does in addition to cleaning that project."},{"owner":{"account_id":7297,"reputation":32778,"user_id":12634,"accept_rate":75,"display_name":"Roel Spilker"},"score":1,"creation_date":1280766073,"post_id":6840,"comment_id":3524428,"body_markdown":"Closing and reopening my projects didn&#39;t help me :-( It seems like closing and reopening helps for some, but if it doesn&#39;t, you need to follow the advice by Olivier Dagenais","body":"Closing and reopening my projects didn&#39;t help me :-( It seems like closing and reopening helps for some, but if it doesn&#39;t, you need to follow the advice by Olivier Dagenais"}],"tags":[],"owner":{"account_id":246,"reputation":107913,"user_id":304,"accept_rate":40,"display_name":"McDowell"},"comment_count":2,"down_vote_count":1,"up_vote_count":63,"is_accepted":true,"score":62,"last_activity_date":1218299492,"creation_date":1218299492,"answer_id":6840,"question_id":6816,"body_markdown":"Two more general-purpose mechanisms for fixing some of Eclipse&#39;s idiosyncrasies:\r\n\r\n   - Close and open the project\r\n   - Delete the project (but not from disk!) and reimport it as an existing project\r\n\r\nFailing that, [bugs.eclipse.org][1] might provide the answer.\r\n\r\nIf the workspace is caching something broken, you may be able to delete it by poking around in **workspace/.metadata/.plugins**. Most of that stuff is fairly transient (though backup and watch for deleted preferences).\r\n\r\n  [1]: https://bugs.eclipse.org/bugs/buglist.cgi?query_format=specific&amp;order=relevance+desc&amp;bug_status=__all__&amp;product=JDT&amp;content=Class+file+name+must+end+with+.class","title":"Class file name must end with .class exception in Java search","body":"<p>Two more general-purpose mechanisms for fixing some of Eclipse's idiosyncrasies:</p>\n\n<ul>\n<li>Close and open the project</li>\n<li>Delete the project (but not from disk!) and reimport it as an existing project</li>\n</ul>\n\n<p>Failing that, <a href=\"https://bugs.eclipse.org/bugs/buglist.cgi?query_format=specific&amp;order=relevance+desc&amp;bug_status=__all__&amp;product=JDT&amp;content=Class+file+name+must+end+with+.class\" rel=\"noreferrer\">bugs.eclipse.org</a> might provide the answer.</p>\n\n<p>If the workspace is caching something broken, you may be able to delete it by poking around in <strong>workspace/.metadata/.plugins</strong>. Most of that stuff is fairly transient (though backup and watch for deleted preferences).</p>\n"},{"tags":[],"owner":{"display_name":"sauron"},"comment_count":0,"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1227185899,"creation_date":1227185899,"answer_id":305214,"question_id":6816,"body_markdown":"Got this error to the other day. Tried deleting the all .class-files and resources from my output folder manually. Didn&#39;t work. Restarted my computer (WinXP). Didn&#39;t work. Closed my project in Eclipse and opened it again. **Worked!!!** Hopes this solves someones problem out there. The search facilities and truly essential to Eclipse.","title":"Class file name must end with .class exception in Java search","body":"<p>Got this error to the other day. Tried deleting the all .class-files and resources from my output folder manually. Didn't work. Restarted my computer (WinXP). Didn't work. Closed my project in Eclipse and opened it again. <strong>Worked!!!</strong> Hopes this solves someones problem out there. The search facilities and truly essential to Eclipse.</p>\n"},{"comments":[{"owner":{"account_id":35769,"reputation":2058,"user_id":101562,"accept_rate":77,"display_name":"Jon Strayer"},"score":0,"creation_date":1247069626,"post_id":808782,"comment_id":913715,"body_markdown":"Minor typo.\n\n2. Delete &lt;workspace&gt;.metadata.plugins\\org.eclipse.jdt.core\\*.index","body":"Minor typo.  2. Delete &lt;workspace&gt;.metadata.plugins\\org.eclipse.jdt.core*.index"},{"owner":{"account_id":57459,"reputation":3987,"user_id":172132,"accept_rate":71,"display_name":"cimnine"},"score":0,"creation_date":1259155353,"post_id":808782,"comment_id":1684473,"body_markdown":"This worked for me too. Found it here: http://u.nu/3aqy3 But it&#39;s the same procedure. ~Chris","body":"This worked for me too. Found it here: <a href=\"http://u.nu/3aqy3\" rel=\"nofollow noreferrer\">u.nu/3aqy3</a> But it&#39;s the same procedure. ~Chris"}],"tags":[],"owner":{"account_id":34968,"reputation":1502,"user_id":98903,"display_name":"Olivier Dagenais"},"comment_count":2,"down_vote_count":0,"up_vote_count":72,"is_accepted":false,"score":72,"last_activity_date":1247159956,"creation_date":1241121894,"answer_id":808782,"question_id":6816,"body_markdown":"Comment [#9 to bug 269820][1] explains how to delete the search index, which appears to be the solution to a corrupt index whose symptoms are the dreaded\r\n\r\n&gt; An internal error occurred during: &quot;Items filtering&quot;.&lt;br /&gt;\r\n&gt; Class file name must end with .class\r\n\r\nmessage box.\r\n\r\nHow to delete the search index:\r\n\r\n 1. Close Eclipse\r\n 2. Delete &lt;tt&gt;&amp;lt;workspace&amp;gt;/.metadata/.plugins/org.eclipse.jdt.core/*.index&lt;/tt&gt;\r\n 3. Delete &lt;tt&gt;&amp;lt;workspace&amp;gt;/.metadata/.plugins/org.eclipse.jdt.core/savedIndexNames.txt&lt;/tt&gt;\r\n 4. Start Eclipse again\r\n\r\n  [1]: https://bugs.eclipse.org/bugs/show_bug.cgi?id=269820#c9\r\n","title":"Class file name must end with .class exception in Java search","body":"<p>Comment <a href=\"https://bugs.eclipse.org/bugs/show_bug.cgi?id=269820#c9\" rel=\"noreferrer\">#9 to bug 269820</a> explains how to delete the search index, which appears to be the solution to a corrupt index whose symptoms are the dreaded</p>\n\n<blockquote>\n  <p>An internal error occurred during: \"Items filtering\".<br />\n  Class file name must end with .class</p>\n</blockquote>\n\n<p>message box.</p>\n\n<p>How to delete the search index:</p>\n\n<ol>\n<li>Close Eclipse</li>\n<li>Delete &lt;workspace&gt;/.metadata/.plugins/org.eclipse.jdt.core/*.index</li>\n<li>Delete &lt;workspace&gt;/.metadata/.plugins/org.eclipse.jdt.core/savedIndexNames.txt</li>\n<li>Start Eclipse again</li>\n</ol>\n"},{"tags":[],"owner":{"display_name":"gichchi"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1249275515,"creation_date":1249275285,"answer_id":1220707,"question_id":6816,"body_markdown":"I also encountered this issue recently, the below scenario worked for me.\r\n\r\n1. Close Eclipse\r\n2. Delete `&lt;workspace&gt;/.metadata/.plugins/org.eclipse.jdt.core/*.index` \r\n3. Delete `&lt;workspace&gt;/.metadata/.plugins/org.eclipse.jdt.core/savedIndexNames.txt` \r\n4. Start Eclipse again ","title":"Class file name must end with .class exception in Java search","body":"<p>I also encountered this issue recently, the below scenario worked for me.</p>\n\n<ol>\n<li>Close Eclipse</li>\n<li>Delete <code>&lt;workspace&gt;/.metadata/.plugins/org.eclipse.jdt.core/*.index</code> </li>\n<li>Delete <code>&lt;workspace&gt;/.metadata/.plugins/org.eclipse.jdt.core/savedIndexNames.txt</code> </li>\n<li>Start Eclipse again </li>\n</ol>\n"},{"comments":[{"owner":{"account_id":381624,"reputation":111,"user_id":736394,"display_name":"Uğur G&#252;neri"},"score":0,"creation_date":1417800492,"post_id":1903106,"comment_id":43102135,"body_markdown":"clean option explanation: &quot;if set to &quot;true&quot;, any cached data used by the OSGi framework and eclipse runtime will be wiped clean. This will clean the caches used to store bundle dependency resolution and eclipse extension registry data. Using this option will force eclipse to reinitialize these caches.&quot;","body":"clean option explanation: &quot;if set to &quot;true&quot;, any cached data used by the OSGi framework and eclipse runtime will be wiped clean. This will clean the caches used to store bundle dependency resolution and eclipse extension registry data. Using this option will force eclipse to reinitialize these caches.&quot;"}],"tags":[],"owner":{"account_id":44066,"reputation":3830,"user_id":129104,"display_name":"Rick"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1345224199,"creation_date":1260820632,"answer_id":1903106,"question_id":6816,"body_markdown":"Closing the projects didn&#39;t do the trick for me. I started eclipse with the -clean flag and that worked for some reason.","title":"Class file name must end with .class exception in Java search","body":"<p>Closing the projects didn't do the trick for me. I started eclipse with the -clean flag and that worked for some reason.</p>\n"},{"tags":[],"owner":{"account_id":341912,"reputation":1589,"user_id":672780,"accept_rate":100,"display_name":"LoganMzz"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1300875096,"creation_date":1300875096,"answer_id":5403613,"question_id":6816,"body_markdown":"Just\r\n\r\n - Close project\r\n - Clear manually output folder(s)\r\n - Open project\r\n\r\n(Eclipse 3.5 SR2, Build id: 20100218-1602)","title":"Class file name must end with .class exception in Java search","body":"<p>Just</p>\n\n<ul>\n<li>Close project</li>\n<li>Clear manually output folder(s)</li>\n<li>Open project</li>\n</ul>\n\n<p>(Eclipse 3.5 SR2, Build id: 20100218-1602)</p>\n"}],"owner":{"account_id":610,"reputation":116913,"user_id":797,"accept_rate":66,"display_name":"Matt Sheppard"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":26385,"favorite_count":0,"down_vote_count":0,"up_vote_count":67,"accepted_answer_id":6840,"answer_count":6,"score":67,"last_activity_date":1679016857,"creation_date":1218296430,"question_id":6816,"body_markdown":"I have a problem using the Java search function in Eclipse on a particular project.\r\n\r\nWhen using the Java search on one particular project, I get an error message saying `Class file name must end with .class` (see stack trace below). This does not seem to be happening on all projects, just one particular one, so perhaps there&#39;s something I should try to get rebuilt?\r\n\r\nI have already tried `Project -&gt; Clean`... and Closing Eclipse, deleting all the built class files and restarting Eclipse to no avail.\r\n\r\nThe only reference I&#39;ve been able to find on Google for the problem is at [http://www.crazysquirrel.com/computing/java/eclipse/error-during-java-search.jspx][1], but unfortunately his solution (closing, deleting class files, restarting) did not work for me.\r\n\r\nIf anyone can suggest something to try, or there&#39;s any more info I can gather which might help track it&#39;s down, I&#39;d greatly appreciate the pointers.\r\n\r\n    Version: 3.4.0\r\n    Build id: I20080617-2000\r\n\r\nAlso just found this thread - [http://www.myeclipseide.com/PNphpBB2-viewtopic-t-20067.html][2] - which indicates the same problem may occur when the project name contains a period. Unfortunately, that&#39;s not the case in my setup, so I&#39;m still stuck.\r\n\r\n\r\n    Caused by: java.lang.IllegalArgumentException: Class file name must end with .class\r\n    at org.eclipse.jdt.internal.core.PackageFragment.getClassFile(PackageFragment.java:182)\r\n    at org.eclipse.jdt.internal.core.util.HandleFactory.createOpenable(HandleFactory.java:109)\r\n    at org.eclipse.jdt.internal.core.search.matching.MatchLocator.locateMatches(MatchLocator.java:1177)\r\n    at org.eclipse.jdt.internal.core.search.JavaSearchParticipant.locateMatches(JavaSearchParticipant.java:94)\r\n    at org.eclipse.jdt.internal.core.search.BasicSearchEngine.findMatches(BasicSearchEngine.java:223)\r\n    at org.eclipse.jdt.internal.core.search.BasicSearchEngine.search(BasicSearchEngine.java:506)\r\n    at org.eclipse.jdt.core.search.SearchEngine.search(SearchEngine.java:551)\r\n    at org.eclipse.jdt.internal.corext.refactoring.RefactoringSearchEngine.internalSearch(RefactoringSearchEngine.java:142)\r\n    at org.eclipse.jdt.internal.corext.refactoring.RefactoringSearchEngine.search(RefactoringSearchEngine.java:129)\r\n    at org.eclipse.jdt.internal.corext.refactoring.rename.RenameTypeProcessor.initializeReferences(RenameTypeProcessor.java:594)\r\n    at org.eclipse.jdt.internal.corext.refactoring.rename.RenameTypeProcessor.doCheckFinalConditions(RenameTypeProcessor.java:522)\r\n    at org.eclipse.jdt.internal.corext.refactoring.rename.JavaRenameProcessor.checkFinalConditions(JavaRenameProcessor.java:45)\r\n    at org.eclipse.ltk.core.refactoring.participants.ProcessorBasedRefactoring.checkFinalConditions(ProcessorBasedRefactoring.java:225)\r\n    at org.eclipse.ltk.core.refactoring.Refactoring.checkAllConditions(Refactoring.java:160)\r\n    at org.eclipse.jdt.internal.ui.refactoring.RefactoringExecutionHelper$Operation.run(RefactoringExecutionHelper.java:77)\r\n    at org.eclipse.jdt.internal.core.BatchOperation.executeOperation(BatchOperation.java:39)\r\n    at org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:709)\r\n    at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1800)\r\n    at org.eclipse.jdt.core.JavaCore.run(JavaCore.java:4650)\r\n    at org.eclipse.jdt.internal.ui.actions.WorkbenchRunnableAdapter.run(WorkbenchRunnableAdapter.java:92)\r\n    at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121)\r\n\r\nUpdate\r\n---\r\n\r\nThanks [McDowell][3], closing and opening the project seems to have fixed it (at least for now).\r\n\r\n  [1]: http://www.crazysquirrel.com/computing/java/eclipse/error-during-java-search.jspx\r\n  [2]: http://www.myeclipseide.com/PNphpBB2-viewtopic-t-20067.html\r\n  [3]: #6840","title":"Class file name must end with .class exception in Java search","body":"<p>I have a problem using the Java search function in Eclipse on a particular project.</p>\n<p>When using the Java search on one particular project, I get an error message saying <code>Class file name must end with .class</code> (see stack trace below). This does not seem to be happening on all projects, just one particular one, so perhaps there's something I should try to get rebuilt?</p>\n<p>I have already tried <code>Project -&gt; Clean</code>... and Closing Eclipse, deleting all the built class files and restarting Eclipse to no avail.</p>\n<p>The only reference I've been able to find on Google for the problem is at <a href=\"http://www.crazysquirrel.com/computing/java/eclipse/error-during-java-search.jspx\" rel=\"nofollow noreferrer\">http://www.crazysquirrel.com/computing/java/eclipse/error-during-java-search.jspx</a>, but unfortunately his solution (closing, deleting class files, restarting) did not work for me.</p>\n<p>If anyone can suggest something to try, or there's any more info I can gather which might help track it's down, I'd greatly appreciate the pointers.</p>\n<pre><code>Version: 3.4.0\nBuild id: I20080617-2000\n</code></pre>\n<p>Also just found this thread - <a href=\"http://www.myeclipseide.com/PNphpBB2-viewtopic-t-20067.html\" rel=\"nofollow noreferrer\">http://www.myeclipseide.com/PNphpBB2-viewtopic-t-20067.html</a> - which indicates the same problem may occur when the project name contains a period. Unfortunately, that's not the case in my setup, so I'm still stuck.</p>\n<pre><code>Caused by: java.lang.IllegalArgumentException: Class file name must end with .class\nat org.eclipse.jdt.internal.core.PackageFragment.getClassFile(PackageFragment.java:182)\nat org.eclipse.jdt.internal.core.util.HandleFactory.createOpenable(HandleFactory.java:109)\nat org.eclipse.jdt.internal.core.search.matching.MatchLocator.locateMatches(MatchLocator.java:1177)\nat org.eclipse.jdt.internal.core.search.JavaSearchParticipant.locateMatches(JavaSearchParticipant.java:94)\nat org.eclipse.jdt.internal.core.search.BasicSearchEngine.findMatches(BasicSearchEngine.java:223)\nat org.eclipse.jdt.internal.core.search.BasicSearchEngine.search(BasicSearchEngine.java:506)\nat org.eclipse.jdt.core.search.SearchEngine.search(SearchEngine.java:551)\nat org.eclipse.jdt.internal.corext.refactoring.RefactoringSearchEngine.internalSearch(RefactoringSearchEngine.java:142)\nat org.eclipse.jdt.internal.corext.refactoring.RefactoringSearchEngine.search(RefactoringSearchEngine.java:129)\nat org.eclipse.jdt.internal.corext.refactoring.rename.RenameTypeProcessor.initializeReferences(RenameTypeProcessor.java:594)\nat org.eclipse.jdt.internal.corext.refactoring.rename.RenameTypeProcessor.doCheckFinalConditions(RenameTypeProcessor.java:522)\nat org.eclipse.jdt.internal.corext.refactoring.rename.JavaRenameProcessor.checkFinalConditions(JavaRenameProcessor.java:45)\nat org.eclipse.ltk.core.refactoring.participants.ProcessorBasedRefactoring.checkFinalConditions(ProcessorBasedRefactoring.java:225)\nat org.eclipse.ltk.core.refactoring.Refactoring.checkAllConditions(Refactoring.java:160)\nat org.eclipse.jdt.internal.ui.refactoring.RefactoringExecutionHelper$Operation.run(RefactoringExecutionHelper.java:77)\nat org.eclipse.jdt.internal.core.BatchOperation.executeOperation(BatchOperation.java:39)\nat org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:709)\nat org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1800)\nat org.eclipse.jdt.core.JavaCore.run(JavaCore.java:4650)\nat org.eclipse.jdt.internal.ui.actions.WorkbenchRunnableAdapter.run(WorkbenchRunnableAdapter.java:92)\nat org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121)\n</code></pre>\n<h2>Update</h2>\n<p>Thanks McDowell, closing and opening the project seems to have fixed it (at least for now).</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9656,"page":569,"page_size":100}
