{"items":[{"tags":["java","spring","thread-local","resilience4j"],"answers":[{"tags":[],"owner":{"account_id":21647131,"reputation":11,"user_id":15968303,"display_name":"Giliguala"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1622001230,"creation_date":1622001230,"answer_id":67698298,"question_id":67283655,"body_markdown":"i think you want to get params from threadlocal from parent-thread when you in sub-thread, in hystrix it use command-model to decorate callabletask\r\n\r\nin resilience4j i think u can fix it like this:\r\n\r\n    @Resource\r\n    DispatcherServlet dispatcherServlet;\r\n\r\n    @PostConstruct\r\n    public void changeThreadLocalModel() {\r\n        dispatcherServlet.setThreadContextInheritable(true);\r\n    }\r\n    ","title":"Resilience4j context propagator not able to propagte thread local values","body":"<p>i think you want to get params from threadlocal from parent-thread when you in sub-thread, in hystrix it use command-model to decorate callabletask</p>\n<p>in resilience4j i think u can fix it like this:</p>\n<pre><code>@Resource\nDispatcherServlet dispatcherServlet;\n\n@PostConstruct\npublic void changeThreadLocalModel() {\n    dispatcherServlet.setThreadContextInheritable(true);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":21647131,"reputation":11,"user_id":15968303,"display_name":"Giliguala"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1622010903,"creation_date":1622010903,"answer_id":67699687,"question_id":67283655,"body_markdown":"i find my last answer may lead to some problems, when you use &quot;dispatcherServlet.setThreadContextInheritable(true);&quot;\r\n\r\nit may pollute your custom thread-pool`s threadlocalmap;\r\n\r\nso here is my final resolve, and it only works at resilience4j;\r\n  \r\n\r\n    @Resource\r\n    Resilience4jBulkheadProvider resilience4jBulkheadProvider;\r\n\r\n    @PostConstruct\r\n    public void concurrentThreadContextStrategy() {\r\n        ThreadPoolBulkheadConfig threadPoolBulkheadConfig = ThreadPoolBulkheadConfig.custom().contextPropagator(new CustomInheritContextPropagator()).build();\r\n        resilience4jBulkheadProvider.configureDefault(id -&gt; new Resilience4jBulkheadConfigurationBuilder()\r\n                .bulkheadConfig(BulkheadConfig.ofDefaults()).threadPoolBulkheadConfig(threadPoolBulkheadConfig)\r\n                .build());\r\n    }\r\n\r\n    \r\n    private static class CustomInheritContextPropagator implements ContextPropagator&lt;RequestAttributes&gt; {\r\n\r\n        @Override\r\n        public Supplier&lt;Optional&lt;RequestAttributes&gt;&gt; retrieve() {\r\n            //  give requestcontext to reference from threadlocal;\r\n            //  this method call by web-container thread, such as tomcat, jetty,or undertow, depends on what you used;\r\n            return () -&gt; Optional.ofNullable(RequestContextHolder.getRequestAttributes());\r\n        }\r\n\r\n        @Override\r\n        public Consumer&lt;Optional&lt;RequestAttributes&gt;&gt; copy() {\r\n            // load requestcontex into real-call thread\r\n            // this method call by resilience4j bulkhead thread;\r\n            return requestAttributes -&gt; requestAttributes.ifPresent(context -&gt; {\r\n                RequestContextHolder.resetRequestAttributes();\r\n                RequestContextHolder.setRequestAttributes(context);\r\n            });\r\n        }\r\n\r\n        @Override\r\n        public Consumer&lt;Optional&lt;RequestAttributes&gt;&gt; clear() {\r\n            // clean requestcontext finally ;\r\n            // this method call by resilience4j bulkhead thread;\r\n            return requestAttributes -&gt; RequestContextHolder.resetRequestAttributes();\r\n        }\r\n    }\r\n    ","title":"Resilience4j context propagator not able to propagte thread local values","body":"<p>i find my last answer may lead to some problems, when you use &quot;dispatcherServlet.setThreadContextInheritable(true);&quot;</p>\n<p>it may pollute your custom thread-pool`s threadlocalmap;</p>\n<p>so here is my final resolve, and it only works at resilience4j;</p>\n<pre><code>@Resource\nResilience4jBulkheadProvider resilience4jBulkheadProvider;\n\n@PostConstruct\npublic void concurrentThreadContextStrategy() {\n    ThreadPoolBulkheadConfig threadPoolBulkheadConfig = ThreadPoolBulkheadConfig.custom().contextPropagator(new CustomInheritContextPropagator()).build();\n    resilience4jBulkheadProvider.configureDefault(id -&gt; new Resilience4jBulkheadConfigurationBuilder()\n            .bulkheadConfig(BulkheadConfig.ofDefaults()).threadPoolBulkheadConfig(threadPoolBulkheadConfig)\n            .build());\n}\n\n\nprivate static class CustomInheritContextPropagator implements ContextPropagator&lt;RequestAttributes&gt; {\n\n    @Override\n    public Supplier&lt;Optional&lt;RequestAttributes&gt;&gt; retrieve() {\n        //  give requestcontext to reference from threadlocal;\n        //  this method call by web-container thread, such as tomcat, jetty,or undertow, depends on what you used;\n        return () -&gt; Optional.ofNullable(RequestContextHolder.getRequestAttributes());\n    }\n\n    @Override\n    public Consumer&lt;Optional&lt;RequestAttributes&gt;&gt; copy() {\n        // load requestcontex into real-call thread\n        // this method call by resilience4j bulkhead thread;\n        return requestAttributes -&gt; requestAttributes.ifPresent(context -&gt; {\n            RequestContextHolder.resetRequestAttributes();\n            RequestContextHolder.setRequestAttributes(context);\n        });\n    }\n\n    @Override\n    public Consumer&lt;Optional&lt;RequestAttributes&gt;&gt; clear() {\n        // clean requestcontext finally ;\n        // this method call by resilience4j bulkhead thread;\n        return requestAttributes -&gt; RequestContextHolder.resetRequestAttributes();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6617832,"reputation":653,"user_id":5110508,"display_name":"Bertrand Cedric"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663682056,"creation_date":1663682056,"answer_id":73787874,"question_id":67283655,"body_markdown":"i got the same problem with springboot 2.5 et springboot cloud 2020.0.6\r\nand I solved it with an implementation of **ContextPropagator**\r\n\r\n    public class SleuthPropagator implements ContextPropagator&lt;TraceContext&gt; {\r\n        ThreadLocal&lt;ScopedSpan&gt; scopedSpanThreadLocal = new ThreadLocal&lt;&gt;();\r\n    \r\n        @Override\r\n        public Supplier&lt;Optional&lt;TraceContext&gt;&gt; retrieve() {\r\n            return this::getCurrentcontext;\r\n        }\r\n    \r\n        @Override\r\n        public Consumer&lt;Optional&lt;TraceContext&gt;&gt; copy() {\r\n            return c -&gt; {\r\n                if (!c.isPresent()) {\r\n                    return;\r\n                }\r\n                TraceContext traceContext = c.get();\r\n                ScopedSpan resilience4jSpan = getTracer()\r\n                        .map(t -&gt; t.startScopedSpanWithParent(&quot;Resilience4j&quot;, traceContext))\r\n                        .orElse(null);\r\n                scopedSpanThreadLocal.set(resilience4jSpan);\r\n            };\r\n        }\r\n    \r\n    \r\n        @Override\r\n        public Consumer&lt;Optional&lt;TraceContext&gt;&gt; clear() {\r\n            return t -&gt; {\r\n                try {\r\n                    ScopedSpan resilience4jSpan = scopedSpanThreadLocal.get();\r\n                    if (resilience4jSpan != null) {\r\n                        resilience4jSpan.finish();\r\n                    }\r\n                } finally {\r\n                    scopedSpanThreadLocal.remove();\r\n                }\r\n            };\r\n        }\r\n    \r\n        private static Optional&lt;Tracer&gt; getTracer() {\r\n            return Optional.ofNullable(Tracing.current())\r\n                    .map(Tracing::tracer);\r\n        }\r\n    \r\n        private Optional&lt;TraceContext&gt; getCurrentcontext() {\r\n            return getTracer()\r\n                    .map(Tracer::currentSpan)\r\n                    .map(Span::context);\r\n        }\r\n    }\r\n\r\nAnd use the propagator in adding this to your application.properties\r\n\r\n    resilience4j.thread-pool-bulkhead.instances.YOUR_BULKHEAD_CONFIG.context-propagators=com.your.package.SleuthPropagator","title":"Resilience4j context propagator not able to propagte thread local values","body":"<p>i got the same problem with springboot 2.5 et springboot cloud 2020.0.6\nand I solved it with an implementation of <strong>ContextPropagator</strong></p>\n<pre><code>public class SleuthPropagator implements ContextPropagator&lt;TraceContext&gt; {\n    ThreadLocal&lt;ScopedSpan&gt; scopedSpanThreadLocal = new ThreadLocal&lt;&gt;();\n\n    @Override\n    public Supplier&lt;Optional&lt;TraceContext&gt;&gt; retrieve() {\n        return this::getCurrentcontext;\n    }\n\n    @Override\n    public Consumer&lt;Optional&lt;TraceContext&gt;&gt; copy() {\n        return c -&gt; {\n            if (!c.isPresent()) {\n                return;\n            }\n            TraceContext traceContext = c.get();\n            ScopedSpan resilience4jSpan = getTracer()\n                    .map(t -&gt; t.startScopedSpanWithParent(&quot;Resilience4j&quot;, traceContext))\n                    .orElse(null);\n            scopedSpanThreadLocal.set(resilience4jSpan);\n        };\n    }\n\n\n    @Override\n    public Consumer&lt;Optional&lt;TraceContext&gt;&gt; clear() {\n        return t -&gt; {\n            try {\n                ScopedSpan resilience4jSpan = scopedSpanThreadLocal.get();\n                if (resilience4jSpan != null) {\n                    resilience4jSpan.finish();\n                }\n            } finally {\n                scopedSpanThreadLocal.remove();\n            }\n        };\n    }\n\n    private static Optional&lt;Tracer&gt; getTracer() {\n        return Optional.ofNullable(Tracing.current())\n                .map(Tracing::tracer);\n    }\n\n    private Optional&lt;TraceContext&gt; getCurrentcontext() {\n        return getTracer()\n                .map(Tracer::currentSpan)\n                .map(Span::context);\n    }\n}\n</code></pre>\n<p>And use the propagator in adding this to your application.properties</p>\n<pre><code>resilience4j.thread-pool-bulkhead.instances.YOUR_BULKHEAD_CONFIG.context-propagators=com.your.package.SleuthPropagator\n</code></pre>\n"}],"owner":{"account_id":21057294,"reputation":51,"user_id":15476339,"display_name":"aryan rai"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1516,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1663682056,"creation_date":1619528776,"question_id":67283655,"body_markdown":"I am trying to migrate my circuit breaker code from Hystrix to Resilience4j. The communication is between two applications out of which one is an artifact containing all the resilience 4j config in the java code itself and the second application which is a microservice uses it directly.\r\n\r\nThere&#39;s one RequestId which generates in the microservice and propagates to the artifact context where it gets printed in the logs. With Hystrix, it was working perfectly fine but ever since I moved to resilience, I am getting null for the request Id.\r\n\r\nBelow is my config for bulk head and context propagator :\r\n\r\n    ThreadPoolBulkheadConfig bulkheadConfig = ThreadPoolBulkheadConfig.custom()\r\n                .maxThreadPoolSize(maxThreadPoolSize)\r\n                .coreThreadPoolSize(coreThreadPoolSize)\r\n                .queueCapacity(queueCapacity)\r\n                .contextPropagator(new DummyContextPropagator())\r\n                .build();\r\n\r\n        // Bulk Head Registry\r\n        ThreadPoolBulkheadRegistry bulkheadRegistry = ThreadPoolBulkheadRegistry.of(bulkheadConfig);\r\n\r\n        // Create Bulk Head\r\n        ThreadPoolBulkhead bulkhead = bulkheadRegistry.bulkhead(name, bulkheadConfig);\r\n\r\n\r\nDummy Context Propagator  :\r\n\r\n    public class  DummyContextPropagator implements ContextPropagator {\r\n    private static final Logger log = LoggerFactory.getLogger( DummyContextPropagator.class);\r\n\r\n    @Override\r\n    public Supplier&lt;Optional&lt;Object&gt;&gt; retrieve() {\r\n        return () -&gt; (Optional&lt;Object&gt;) get();\r\n    }\r\n\r\n    @Override\r\n    public Consumer&lt;Optional&lt;Object&gt;&gt; copy() {\r\n        return (t) -&gt; t.ifPresent(e -&gt; {\r\n            clear();\r\n            put(e);\r\n        });\r\n    }\r\n\r\n    @Override\r\n    public Consumer&lt;Optional&lt;Object&gt;&gt; clear() {\r\n        return (t) -&gt;  DummyContextHolder.clear();\r\n    }\r\n\r\n    public static class  DummyContextHolder {\r\n\r\n        private static final ThreadLocal threadLocal = new ThreadLocal();\r\n\r\n        private  DummyContextHolder() {\r\n        }\r\n\r\n        public static void put(Object context) {\r\n            if (threadLocal.get() != null) {\r\n                clear();\r\n            }\r\n            threadLocal.set(context);\r\n        }\r\n\r\n        public static void clear() {\r\n            if (threadLocal.get() != null) {\r\n                threadLocal.set(null);\r\n                threadLocal.remove();\r\n            }\r\n        }\r\n\r\n        public static Optional&lt;Object&gt; get() {\r\n            return Optional.ofNullable(threadLocal.get());\r\n        }\r\n    }\r\n    }\r\n\r\nHowever, nothing seems to work so that I can get the RequestId.\r\n\r\nAm I doing everything right or is there another way to do that ?\r\n\r\n","title":"Resilience4j context propagator not able to propagte thread local values","body":"<p>I am trying to migrate my circuit breaker code from Hystrix to Resilience4j. The communication is between two applications out of which one is an artifact containing all the resilience 4j config in the java code itself and the second application which is a microservice uses it directly.</p>\n<p>There's one RequestId which generates in the microservice and propagates to the artifact context where it gets printed in the logs. With Hystrix, it was working perfectly fine but ever since I moved to resilience, I am getting null for the request Id.</p>\n<p>Below is my config for bulk head and context propagator :</p>\n<pre><code>ThreadPoolBulkheadConfig bulkheadConfig = ThreadPoolBulkheadConfig.custom()\n            .maxThreadPoolSize(maxThreadPoolSize)\n            .coreThreadPoolSize(coreThreadPoolSize)\n            .queueCapacity(queueCapacity)\n            .contextPropagator(new DummyContextPropagator())\n            .build();\n\n    // Bulk Head Registry\n    ThreadPoolBulkheadRegistry bulkheadRegistry = ThreadPoolBulkheadRegistry.of(bulkheadConfig);\n\n    // Create Bulk Head\n    ThreadPoolBulkhead bulkhead = bulkheadRegistry.bulkhead(name, bulkheadConfig);\n</code></pre>\n<p>Dummy Context Propagator  :</p>\n<pre><code>public class  DummyContextPropagator implements ContextPropagator {\nprivate static final Logger log = LoggerFactory.getLogger( DummyContextPropagator.class);\n\n@Override\npublic Supplier&lt;Optional&lt;Object&gt;&gt; retrieve() {\n    return () -&gt; (Optional&lt;Object&gt;) get();\n}\n\n@Override\npublic Consumer&lt;Optional&lt;Object&gt;&gt; copy() {\n    return (t) -&gt; t.ifPresent(e -&gt; {\n        clear();\n        put(e);\n    });\n}\n\n@Override\npublic Consumer&lt;Optional&lt;Object&gt;&gt; clear() {\n    return (t) -&gt;  DummyContextHolder.clear();\n}\n\npublic static class  DummyContextHolder {\n\n    private static final ThreadLocal threadLocal = new ThreadLocal();\n\n    private  DummyContextHolder() {\n    }\n\n    public static void put(Object context) {\n        if (threadLocal.get() != null) {\n            clear();\n        }\n        threadLocal.set(context);\n    }\n\n    public static void clear() {\n        if (threadLocal.get() != null) {\n            threadLocal.set(null);\n            threadLocal.remove();\n        }\n    }\n\n    public static Optional&lt;Object&gt; get() {\n        return Optional.ofNullable(threadLocal.get());\n    }\n}\n}\n</code></pre>\n<p>However, nothing seems to work so that I can get the RequestId.</p>\n<p>Am I doing everything right or is there another way to do that ?</p>\n"},{"tags":["java","stream"],"comments":[{"owner":{"account_id":4688171,"reputation":11056,"user_id":3795036,"accept_rate":88,"display_name":"K.Nicholas"},"score":2,"creation_date":1663682240,"post_id":73787822,"comment_id":130294015,"body_markdown":"@levgen has never accepted an answer.","body":"@levgen has never accepted an answer."},{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":0,"creation_date":1663688983,"post_id":73787822,"comment_id":130296749,"body_markdown":"Did you have an **attempt**, what are the problems you&#39;ve encountered? You&#39;ve listed only requirements and sample data.","body":"Did you have an <b>attempt</b>, what are the problems you&#39;ve encountered? You&#39;ve listed only requirements and sample data."}],"owner":{"account_id":6270455,"reputation":2029,"user_id":4874863,"accept_rate":0,"display_name":"Ievgen"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1663681797,"creation_date":1663681797,"question_id":73787822,"body_markdown":"Suppose I have the following structure:\r\n```\r\nclass Person {\r\n  public String name;\r\n  public double netWorth;\r\n  public Person(String name, String netWorth) { this.name = name; this.netWorth = netWorth; }\r\n}\r\n```\r\nand following stream: \r\n```\r\nStream.of(\r\n  new Person(&quot;Jeff Bezos&quot;, 12),\r\n  new Person(&quot;Jeff Bezos&quot;, 165_345_678_910), \r\n  new Person(&quot;Jeff Bezos&quot;, 1_234),\r\n  new Person(&quot;Jeff Bezos(1)&quot;, 1_234),\r\n  new Person(&quot;Jeff Bezos(1)(2)&quot;, 42),\r\n  new Person(&quot;Bill Gates&quot;, 130_000_000_000));\r\n```\r\n\r\nby using Java Streams API I want to transform stream above so that:\r\n* `Person`-s with same names should receive different strings (by adding `(i)`) in the end of the name\r\n* no cycles /  if statements / interim stream terminators\r\n* order of names does not matter, e.g. out of two `Person`-s with same names either of two can receive `(1)` suffix\r\n\r\ne.g. to a following map:\r\n```\r\nnew HashMap&lt;String, Double&gt;() {{\r\n  put(&quot;Jeff Bezos&quot;, 12);\r\n  put(&quot;Jeff Bezos(1)(1)(1)&quot;, 165_345_678_91);\r\n  put(&quot;Jeff Bezos(1)(1)(2)&quot;, 1_234);\r\n  put(&quot;Jeff Bezos(1)&quot;, 1_234);\r\n  put(&quot;Jeff Bezos(1)(2)&quot;, 42);\r\n  put(&quot;Bill Gates&quot;, 130_000_000_000);\r\n}};\r\n```\r\n\r\nP.S. Complicatoion, order of `Person`s matter, person with the highest net worth should receive the cleanest name, e.g. with min suffixes etc:\r\n\r\n```\r\nnew HashMap&lt;String, Double&gt;() {{\r\n  put(&quot;Jeff Bezos&quot;, 165_345_678_91);\r\n  put(&quot;Jeff Bezos(1)(1)(1)&quot;, 1_234);\r\n  put(&quot;Jeff Bezos(1)(1)(2)&quot;, 12);\r\n  put(&quot;Jeff Bezos(1)(2)&quot;, 42);\r\n  put(&quot;Jeff Bezos(1)&quot;, 1_234);\r\n  put(&quot;Bill Gates&quot;, 130_000_000_000);\r\n}};\r\n```","title":"Modify Matching Objects using Java Streams","body":"<p>Suppose I have the following structure:</p>\n<pre><code>class Person {\n  public String name;\n  public double netWorth;\n  public Person(String name, String netWorth) { this.name = name; this.netWorth = netWorth; }\n}\n</code></pre>\n<p>and following stream:</p>\n<pre><code>Stream.of(\n  new Person(&quot;Jeff Bezos&quot;, 12),\n  new Person(&quot;Jeff Bezos&quot;, 165_345_678_910), \n  new Person(&quot;Jeff Bezos&quot;, 1_234),\n  new Person(&quot;Jeff Bezos(1)&quot;, 1_234),\n  new Person(&quot;Jeff Bezos(1)(2)&quot;, 42),\n  new Person(&quot;Bill Gates&quot;, 130_000_000_000));\n</code></pre>\n<p>by using Java Streams API I want to transform stream above so that:</p>\n<ul>\n<li><code>Person</code>-s with same names should receive different strings (by adding <code>(i)</code>) in the end of the name</li>\n<li>no cycles /  if statements / interim stream terminators</li>\n<li>order of names does not matter, e.g. out of two <code>Person</code>-s with same names either of two can receive <code>(1)</code> suffix</li>\n</ul>\n<p>e.g. to a following map:</p>\n<pre><code>new HashMap&lt;String, Double&gt;() {{\n  put(&quot;Jeff Bezos&quot;, 12);\n  put(&quot;Jeff Bezos(1)(1)(1)&quot;, 165_345_678_91);\n  put(&quot;Jeff Bezos(1)(1)(2)&quot;, 1_234);\n  put(&quot;Jeff Bezos(1)&quot;, 1_234);\n  put(&quot;Jeff Bezos(1)(2)&quot;, 42);\n  put(&quot;Bill Gates&quot;, 130_000_000_000);\n}};\n</code></pre>\n<p>P.S. Complicatoion, order of <code>Person</code>s matter, person with the highest net worth should receive the cleanest name, e.g. with min suffixes etc:</p>\n<pre><code>new HashMap&lt;String, Double&gt;() {{\n  put(&quot;Jeff Bezos&quot;, 165_345_678_91);\n  put(&quot;Jeff Bezos(1)(1)(1)&quot;, 1_234);\n  put(&quot;Jeff Bezos(1)(1)(2)&quot;, 12);\n  put(&quot;Jeff Bezos(1)(2)&quot;, 42);\n  put(&quot;Jeff Bezos(1)&quot;, 1_234);\n  put(&quot;Bill Gates&quot;, 130_000_000_000);\n}};\n</code></pre>\n"},{"tags":["java","string","java-ee-6","builder","eclipse-jee"],"comments":[{"owner":{"account_id":36137,"reputation":178789,"user_id":102937,"accept_rate":90,"display_name":"Robert Harvey"},"score":1,"creation_date":1663679778,"post_id":73787333,"comment_id":130292899,"body_markdown":"There are better ways to do this.  One way is to simply tack `1 = 1` onto the end of your SQL statement.","body":"There are better ways to do this.  One way is to simply tack <code>1 = 1</code> onto the end of your SQL statement."},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1663679808,"post_id":73787333,"comment_id":130292910,"body_markdown":"You should read the javadoc https://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html#delete(int,%20int)","body":"You should read the javadoc <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html#delete(int,%20int)\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/7/docs/api/java/lang/&hellip;</a>"},{"owner":{"account_id":36137,"reputation":178789,"user_id":102937,"accept_rate":90,"display_name":"Robert Harvey"},"score":0,"creation_date":1663679878,"post_id":73787333,"comment_id":130292935,"body_markdown":"Here&#39;s a simple way: https://www.codeproject.com/Questions/838096/How-can-I-remove-last-word-from-a-string","body":"Here&#39;s a simple way: <a href=\"https://www.codeproject.com/Questions/838096/How-can-I-remove-last-word-from-a-string\" rel=\"nofollow noreferrer\">codeproject.com/Questions/838096/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1663680214,"creation_date":1663680214,"answer_id":73787453,"question_id":73787333,"body_markdown":"Step 1 is generally to check the javadoc first, _before_ asking on Stack Overflow. Had you done that, you would have found [the `StringBuilder.setLength()` method](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/StringBuilder.html#setLength(int)) which you can use to &#39;set the length&#39;. Trivially, set the length to 4 less (that same javadoc tells you that `.length()` gets you the current length, so, `builder.setLength(builder.length() - 4)` and you have your result.\r\n\r\nBut..\r\n\r\n## It&#39;s 6, not 4.\r\n\r\nAs per your own snippet, you&#39;re adding `&quot; AND  &quot;` - note the spaces. That&#39;s 6, not 4.\r\n\r\n## Swap AND\r\n\r\nA much better way to do this is to swap where/and to the front of your appends. Instead of adding ` AND` at the end every time you append another aspect of your query, instead _start_ with `AND ` (for the first entry, `WHERE `). Now the problem has gone away entirely. If that `WHERE` thing is annoying, you&#39;re always free to start a query with `SELECT stuff FROM table WHERE true` and _then_ you can get in the habit of writing each additional query rule as ` AND thingie = value` from there.\r\n\r\n## Actually, use JDBI/JOOQ\r\n\r\nJDBC is extremely low level and isn&#39;t really meant to be used like this. As you found, it&#39;s quite annoying to write code for it. That&#39;s because JDBC is low-level glue; it exists as common ground for DB engine builders and the JVM. Instead, use a library that makes &#39;talking SQL with databases from java&#39; a _lot_ easier, faster, and more sustainable (easier to maintain, test, and modify in face of change requests). Such as [JDBI](https://www.jdbi.org/) or [JOOQ](https://www.jooq.org).\r\n","title":"How can I delete last word of sentence in StringBuilder?","body":"<p>Step 1 is generally to check the javadoc first, <em>before</em> asking on Stack Overflow. Had you done that, you would have found <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/StringBuilder.html#setLength(int)\" rel=\"nofollow noreferrer\">the <code>StringBuilder.setLength()</code> method</a> which you can use to 'set the length'. Trivially, set the length to 4 less (that same javadoc tells you that <code>.length()</code> gets you the current length, so, <code>builder.setLength(builder.length() - 4)</code> and you have your result.</p>\n<p>But..</p>\n<h2>It's 6, not 4.</h2>\n<p>As per your own snippet, you're adding <code>&quot; AND  &quot;</code> - note the spaces. That's 6, not 4.</p>\n<h2>Swap AND</h2>\n<p>A much better way to do this is to swap where/and to the front of your appends. Instead of adding <code> AND</code> at the end every time you append another aspect of your query, instead <em>start</em> with <code>AND </code> (for the first entry, <code>WHERE </code>). Now the problem has gone away entirely. If that <code>WHERE</code> thing is annoying, you're always free to start a query with <code>SELECT stuff FROM table WHERE true</code> and <em>then</em> you can get in the habit of writing each additional query rule as <code> AND thingie = value</code> from there.</p>\n<h2>Actually, use JDBI/JOOQ</h2>\n<p>JDBC is extremely low level and isn't really meant to be used like this. As you found, it's quite annoying to write code for it. That's because JDBC is low-level glue; it exists as common ground for DB engine builders and the JVM. Instead, use a library that makes 'talking SQL with databases from java' a <em>lot</em> easier, faster, and more sustainable (easier to maintain, test, and modify in face of change requests). Such as <a href=\"https://www.jdbi.org/\" rel=\"nofollow noreferrer\">JDBI</a> or <a href=\"https://www.jooq.org\" rel=\"nofollow noreferrer\">JOOQ</a>.</p>\n"},{"tags":[],"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1663681469,"creation_date":1663681469,"answer_id":73787747,"question_id":73787333,"body_markdown":"It would be more logical to do less superfluous SQL.\r\n\r\n        int startWhere = builder.length();\r\n        if (type == EnumTypePrestation.OPTIQUE) {\r\n            builder.append(&quot; and d.idDossier=p.id and d.statut=4&quot;);\r\n        }\r\n        if (...) {\r\n            builder.append(&quot; and ...&quot;);\r\n        }\r\n        ...\r\n        if (builder.length() &gt; startWhere) {\r\n             builder.replace(startWhere, &quot; and&quot;.length(), &quot; where&quot;);\r\n        }\r\n\r\nThis code still is ugly. The attempt to be efficient using a StringBuilder is even error prone.\r\n\r\n    List&lt;String&gt; criteria = new ArrayList&lt;&gt;();\r\n    if (type == EnumTypePrestation.OPTIQUE) {\r\n        criteria.add(&quot;d.idDossier=p.id and d.statut=4&quot;);\r\n    }\r\n    ...\r\n    if (!criteria.empty()) {\r\n        builder.append(criteria.stream()\r\n            .collect(Collectors.joining(&quot; and &quot;, &quot; where &quot;, &quot; &quot;);\r\n        // Or:\r\n        builder.append(criteria.stream()\r\n            .collect(Collectors.joining(&quot;) and (&quot;, &quot; where (&quot;, &quot;)&quot;);\r\n    }\r\n\r\n_`joining` has here 3 parameters: separator, prefix and suffix._\r\n\r\nThere is one hard advise: do not try to make such code easier with this kind of tiny frameworks. This kind of database coding is very often done.\r\nHowever the next programmer has to learn it, instead of an existing library. And the chance people program around it or the API will show up deficits, is large.\r\nBetter invest the time looking for an existing solution. You will save time on maintenance work (new features, difficult things with prepared statements, and so on).\r\n\r\nThe answer of rzwitserloot is to the point.","title":"How can I delete last word of sentence in StringBuilder?","body":"<p>It would be more logical to do less superfluous SQL.</p>\n<pre><code>    int startWhere = builder.length();\n    if (type == EnumTypePrestation.OPTIQUE) {\n        builder.append(&quot; and d.idDossier=p.id and d.statut=4&quot;);\n    }\n    if (...) {\n        builder.append(&quot; and ...&quot;);\n    }\n    ...\n    if (builder.length() &gt; startWhere) {\n         builder.replace(startWhere, &quot; and&quot;.length(), &quot; where&quot;);\n    }\n</code></pre>\n<p>This code still is ugly. The attempt to be efficient using a StringBuilder is even error prone.</p>\n<pre><code>List&lt;String&gt; criteria = new ArrayList&lt;&gt;();\nif (type == EnumTypePrestation.OPTIQUE) {\n    criteria.add(&quot;d.idDossier=p.id and d.statut=4&quot;);\n}\n...\nif (!criteria.empty()) {\n    builder.append(criteria.stream()\n        .collect(Collectors.joining(&quot; and &quot;, &quot; where &quot;, &quot; &quot;);\n    // Or:\n    builder.append(criteria.stream()\n        .collect(Collectors.joining(&quot;) and (&quot;, &quot; where (&quot;, &quot;)&quot;);\n}\n</code></pre>\n<p><em><code>joining</code> has here 3 parameters: separator, prefix and suffix.</em></p>\n<p>There is one hard advise: do not try to make such code easier with this kind of tiny frameworks. This kind of database coding is very often done.\nHowever the next programmer has to learn it, instead of an existing library. And the chance people program around it or the API will show up deficits, is large.\nBetter invest the time looking for an existing solution. You will save time on maintenance work (new features, difficult things with prepared statements, and so on).</p>\n<p>The answer of rzwitserloot is to the point.</p>\n"}],"owner":{"account_id":26106383,"reputation":27,"user_id":19801031,"display_name":"darine"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":85,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":2,"score":-1,"last_activity_date":1663681469,"creation_date":1663679671,"question_id":73787333,"body_markdown":"I want to detele the last word of string in  StringBuilder here is it my code: \r\n\r\n    builder.append(&quot; where&quot;);\r\n    \t\tif(type.equals(EnumTypePrestation.OPTIQUE)){\r\n    \t\t\tbuilder.append(&quot; d.idDossier=p.id and d.statut=4 and  &quot;);\r\n    \r\n    \t\t}\r\n    \r\n    builder.substring(0,builder.lastIndexOf(&quot; &quot;)-1);\r\n\r\n\r\nthe builder contains : \t`WHERE d.idDossier = p.id AND d.statut = 4 AND`\r\n\r\nI want to remove the last word &quot;AND&quot; \r\ncan anyone help me to do that! ","title":"How can I delete last word of sentence in StringBuilder?","body":"<p>I want to detele the last word of string in  StringBuilder here is it my code:</p>\n<pre><code>builder.append(&quot; where&quot;);\n        if(type.equals(EnumTypePrestation.OPTIQUE)){\n            builder.append(&quot; d.idDossier=p.id and d.statut=4 and  &quot;);\n\n        }\n\nbuilder.substring(0,builder.lastIndexOf(&quot; &quot;)-1);\n</code></pre>\n<p>the builder contains :  <code>WHERE d.idDossier = p.id AND d.statut = 4 AND</code></p>\n<p>I want to remove the last word &quot;AND&quot;\ncan anyone help me to do that!</p>\n"},{"tags":["java","spring-batch","threadpoolexecutor"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1663679430,"post_id":73787004,"comment_id":130292754,"body_markdown":"The default throttle limit is 4 (you can set that on the tasklet) which means it will at most start 4 threads at a time (or process using 4 threads at a time). Increase this if you want more concurrent processing.","body":"The default throttle limit is 4 (you can set that on the tasklet) which means it will at most start 4 threads at a time (or process using 4 threads at a time). Increase this if you want more concurrent processing."},{"owner":{"account_id":4726205,"reputation":12248,"user_id":4420967,"display_name":"James Z"},"score":0,"creation_date":1663681444,"post_id":73787004,"comment_id":130293645,"body_markdown":"Please try to avoid using words like *lac* that are not globally understood.","body":"Please try to avoid using words like <i>lac</i> that are not globally understood."},{"owner":{"account_id":16391939,"reputation":89,"user_id":11840493,"display_name":"andrew"},"score":0,"creation_date":1663687325,"post_id":73787004,"comment_id":130296038,"body_markdown":"@M.Deinum- I tried to add throttle-limit=&quot;15&quot; as below in my tasklet but still same issue.\n\n\n&lt;batch:tasklet  task-executor=&quot;threadPoolTaskExecutor&quot; throttle-limit=&quot;15&quot;&gt;\n            &lt;batch:chunk reader=&quot;inputItemReader&quot; writer=&quot;itemWriter&quot;\n                commit-interval=&quot;20000&quot; skip-limit=&quot;10000&quot;&gt;\n            &lt;/batch:chunk&gt;\n&lt;/batch:tasklet&gt;","body":"@M.Deinum- I tried to add throttle-limit=&quot;15&quot; as below in my tasklet but still same issue.   &lt;batch:tasklet  task-executor=&quot;threadPoolTaskExecutor&quot; throttle-limit=&quot;15&quot;&gt;             &lt;batch:chunk reader=&quot;inputItemReader&quot; writer=&quot;itemWriter&quot;                 commit-interval=&quot;20000&quot; skip-limit=&quot;10000&quot;&gt;             &lt;/batch:chunk&gt; &lt;/batch:tasklet&gt;"},{"owner":{"account_id":6482932,"reputation":29552,"user_id":5019386,"display_name":"Mahmoud Ben Hassine"},"score":0,"creation_date":1663714469,"post_id":73787004,"comment_id":130303892,"body_markdown":"If you increase the throttle limit, you should see more threads processing data concurrently. If this is not the case, please provide a [minimal example](https://stackoverflow.com/help/minimal-reproducible-example) the issue and I will try to dig deeper.","body":"If you increase the throttle limit, you should see more threads processing data concurrently. If this is not the case, please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal example</a> the issue and I will try to dig deeper."}],"owner":{"account_id":16391939,"reputation":89,"user_id":11840493,"display_name":"andrew"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":297,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1663681427,"creation_date":1663678196,"question_id":73787004,"body_markdown":"I am using **threadPoolTaskExecutor** with below configuration in `Spring Batch` application.\r\n\r\n    &lt;bean id=&quot;threadPoolTaskExecutor&quot;\r\n    \t\tclass=&quot;org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor&quot;&gt;\r\n    \t\t&lt;property name=&quot;corePoolSize&quot; value=&quot;10&quot;/&gt;\r\n    \t\t&lt;property name=&quot;maxPoolSize&quot; value=&quot;15&quot;/&gt;\r\n    \t\t&lt;property name=&quot;queueCapacity&quot; value=&quot;30&quot;/&gt;\r\n    \t&lt;/bean&gt;\r\n\r\nAlso  processing records in chunk  with `commit-interval=&quot;20000&quot;`.\r\n\r\n    &lt;batch:tasklet  task-executor=&quot;threadPoolTaskExecutor&quot;&gt;\r\n    \t\t\t&lt;batch:chunk reader=&quot;inputItemReader&quot; writer=&quot;itemWriter&quot;\r\n    \t\t\t\tcommit-interval=&quot;20000&quot; skip-limit=&quot;10000&quot;&gt;\r\n    \t\t\t&lt;/batch:chunk&gt;\r\n    &lt;/batch:tasklet&gt;\r\n\r\nI am processing of file with 200k records, what i am observing is\r\n\r\nIt starts 4 thread each of picking 20000 records to process. Once all the 4 threads process the records then next again 4 threads will be created to process remaining records. I am not understanding why it is creating only 4 threads  and waiting to complete. \r\n\r\nI want to process all the records `parallelly`, .i.e it should create  more than 4 threads (may be 10 threads) and process all  parallely.\r\n\r\nwhat is missing here?","title":"Spring -batch Process all the records parallelly using threadPoolTaskExecutor","body":"<p>I am using <strong>threadPoolTaskExecutor</strong> with below configuration in <code>Spring Batch</code> application.</p>\n<pre><code>&lt;bean id=&quot;threadPoolTaskExecutor&quot;\n        class=&quot;org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor&quot;&gt;\n        &lt;property name=&quot;corePoolSize&quot; value=&quot;10&quot;/&gt;\n        &lt;property name=&quot;maxPoolSize&quot; value=&quot;15&quot;/&gt;\n        &lt;property name=&quot;queueCapacity&quot; value=&quot;30&quot;/&gt;\n    &lt;/bean&gt;\n</code></pre>\n<p>Also  processing records in chunk  with <code>commit-interval=&quot;20000&quot;</code>.</p>\n<pre><code>&lt;batch:tasklet  task-executor=&quot;threadPoolTaskExecutor&quot;&gt;\n            &lt;batch:chunk reader=&quot;inputItemReader&quot; writer=&quot;itemWriter&quot;\n                commit-interval=&quot;20000&quot; skip-limit=&quot;10000&quot;&gt;\n            &lt;/batch:chunk&gt;\n&lt;/batch:tasklet&gt;\n</code></pre>\n<p>I am processing of file with 200k records, what i am observing is</p>\n<p>It starts 4 thread each of picking 20000 records to process. Once all the 4 threads process the records then next again 4 threads will be created to process remaining records. I am not understanding why it is creating only 4 threads  and waiting to complete.</p>\n<p>I want to process all the records <code>parallelly</code>, .i.e it should create  more than 4 threads (may be 10 threads) and process all  parallely.</p>\n<p>what is missing here?</p>\n"},{"tags":["java","eclipse","junit","libraries","hamcrest"],"comments":[{"owner":{"account_id":6920070,"reputation":474,"user_id":5313017,"accept_rate":20,"display_name":"Saim Doruklu"},"score":0,"creation_date":1575485959,"post_id":59182172,"comment_id":104586707,"body_markdown":"according to hamcrest 1.3 javadoc there seems to be a Matcher interface but it should be implemented by a concrete class http://hamcrest.org/JavaHamcrest/javadoc/1.3/\ni couldn&#39;t find the method *contains* in the interface","body":"according to hamcrest 1.3 javadoc there seems to be a Matcher interface but it should be implemented by a concrete class <a href=\"http://hamcrest.org/JavaHamcrest/javadoc/1.3/\" rel=\"nofollow noreferrer\">hamcrest.org/JavaHamcrest/javadoc/1.3</a> i couldn&#39;t find the method <i>contains</i> in the interface"},{"owner":{"account_id":15368491,"reputation":33,"user_id":11087229,"display_name":"Jonah Downs"},"score":0,"creation_date":1575490152,"post_id":59182172,"comment_id":104588337,"body_markdown":"Sorry, I meant to say contains is in Matchers, not the Matcher interface, but my IDE doesn&#39;t find Matchers. I&#39;ve updated the post so that it&#39;s correct now.","body":"Sorry, I meant to say contains is in Matchers, not the Matcher interface, but my IDE doesn&#39;t find Matchers. I&#39;ve updated the post so that it&#39;s correct now."}],"answers":[{"tags":[],"owner":{"account_id":3200595,"reputation":2502,"user_id":2702708,"accept_rate":100,"display_name":"Krayo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663680875,"creation_date":1663680875,"answer_id":73787606,"question_id":59182172,"body_markdown":"I couldn&#39;t find it either, but I only had the **org.hamcrest-core** jar on the path. Then I realised that the Matchers class is in the **org.hamcrest-library** jar!","title":"Problem with Matcher in the Hamcrest library","body":"<p>I couldn't find it either, but I only had the <strong>org.hamcrest-core</strong> jar on the path. Then I realised that the Matchers class is in the <strong>org.hamcrest-library</strong> jar!</p>\n"}],"owner":{"account_id":15368491,"reputation":33,"user_id":11087229,"display_name":"Jonah Downs"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":239,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1663680875,"creation_date":1575482360,"question_id":59182172,"body_markdown":"I&#39;m following along with a learning course for Java and the person uses the ```contains()``` method in the Hamcrest library. Here&#39;s what the code looks like\r\n\r\n```\r\nimport org.junit.Test;\r\n\r\npublic class ShipmentTest\r\n{\r\n\tprivate Shipment shipment = new Shipment();\r\n\t\r\n\t@Test\r\n\tpublic void shouldAddItems() throws Exception\r\n\t{\r\n\t\tshipment.add(door);\r\n\t\tshipment.add(window);\r\n\t\t\r\n\t\tassertThat(shipment, contains(door, window));\r\n\t}\r\n\t\r\n\t@Test\r\n\tpublic void shouldReplaceItems() throws Exception\r\n\t{\r\n\t\tshipment.add(door);\r\n\t\tshipment.add(window);\r\n\t\t\r\n\t\tshipment.replace(door, floorPanel);\r\n\t\t\r\n\t\tassertThat(shipment, contains(floorPanel, window));\r\n\t}\r\n}\r\n```\r\n\r\nI&#39;m using Eclipse, and it doesn&#39;t recognize the ```contains()``` method, since it&#39;s part of the Hamcrest library. However, when I try to implement it, Eclipse doesn&#39;t find ```Matchers``` in the Hamcrest library. It finds ```Matcher```, ```CoreMatchers```, and ```MatcherAssert```, but not ```Matchers```, which should have the ```contains()``` method. I&#39;ve downloaded the jar file for version 1.3 of hamcrest, but even when I include it in the build path, it still does not find ```Matcher```. What should I be doing?","title":"Problem with Matcher in the Hamcrest library","body":"<p>I'm following along with a learning course for Java and the person uses the <code>contains()</code> method in the Hamcrest library. Here's what the code looks like</p>\n\n<pre><code>import org.junit.Test;\n\npublic class ShipmentTest\n{\n    private Shipment shipment = new Shipment();\n\n    @Test\n    public void shouldAddItems() throws Exception\n    {\n        shipment.add(door);\n        shipment.add(window);\n\n        assertThat(shipment, contains(door, window));\n    }\n\n    @Test\n    public void shouldReplaceItems() throws Exception\n    {\n        shipment.add(door);\n        shipment.add(window);\n\n        shipment.replace(door, floorPanel);\n\n        assertThat(shipment, contains(floorPanel, window));\n    }\n}\n</code></pre>\n\n<p>I'm using Eclipse, and it doesn't recognize the <code>contains()</code> method, since it's part of the Hamcrest library. However, when I try to implement it, Eclipse doesn't find <code>Matchers</code> in the Hamcrest library. It finds <code>Matcher</code>, <code>CoreMatchers</code>, and <code>MatcherAssert</code>, but not <code>Matchers</code>, which should have the <code>contains()</code> method. I've downloaded the jar file for version 1.3 of hamcrest, but even when I include it in the build path, it still does not find <code>Matcher</code>. What should I be doing?</p>\n"},{"tags":["java","jackson","deserialization","objectmapper"],"comments":[{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":1,"creation_date":1663673149,"post_id":73785857,"comment_id":130290357,"body_markdown":"Given that `propertyB` and `propertyC` are `int` fields, I&#39;d expect them to be 0 rather than null. But fundamentally you&#39;ve got a class - you can&#39;t change which fields are present in the class at execution time. What would you expect to happen to any code that refers to `propertyB` or `propertyC`?","body":"Given that <code>propertyB</code> and <code>propertyC</code> are <code>int</code> fields, I&#39;d expect them to be 0 rather than null. But fundamentally you&#39;ve got a class - you can&#39;t change which fields are present in the class at execution time. What would you expect to happen to any code that refers to <code>propertyB</code> or <code>propertyC</code>?"},{"owner":{"account_id":22244245,"reputation":25,"user_id":16478196,"display_name":"ICT"},"score":0,"creation_date":1663673470,"post_id":73785857,"comment_id":130290460,"body_markdown":"Oh right, sorry, in real code I have String type - Ive retyped it cause I cannot post real code.\nI would expect some exception to occur but I dont know the name :)","body":"Oh right, sorry, in real code I have String type - Ive retyped it cause I cannot post real code. I would expect some exception to occur but I dont know the name :)"},{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1663675252,"post_id":73785857,"comment_id":130291148,"body_markdown":"You don&#39;t have to post *the* real code, but it&#39;s a lot easier to help if you provide *representative* code. Fundamentally it sounds like you want something more dynamic than a POJO - maybe just deserialize to a map?","body":"You don&#39;t have to post <i>the</i> real code, but it&#39;s a lot easier to help if you provide <i>representative</i> code. Fundamentally it sounds like you want something more dynamic than a POJO - maybe just deserialize to a map?"},{"owner":{"account_id":22244245,"reputation":25,"user_id":16478196,"display_name":"ICT"},"score":0,"creation_date":1663675298,"post_id":73785857,"comment_id":130291173,"body_markdown":"What I am checking is:\n\nA) my model in Swagger has not all properties required \nB) In my cucumber test I have method checking whether obtained model has no nul or empty fields\nC) The reason why I want not to include nonrequired properties in POJO because I do NOT require them to occur and if they are missing I want them to be also missing from my POJO to be able to check whethe rest of properties is not null :)","body":"What I am checking is:  A) my model in Swagger has not all properties required  B) In my cucumber test I have method checking whether obtained model has no nul or empty fields C) The reason why I want not to include nonrequired properties in POJO because I do NOT require them to occur and if they are missing I want them to be also missing from my POJO to be able to check whethe rest of properties is not null :)"},{"owner":{"account_id":22244245,"reputation":25,"user_id":16478196,"display_name":"ICT"},"score":0,"creation_date":1663675375,"post_id":73785857,"comment_id":130291199,"body_markdown":"Okay sorry Ive edited my post to have Strings instead of ints","body":"Okay sorry Ive edited my post to have Strings instead of ints"},{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1663676360,"post_id":73785857,"comment_id":130291545,"body_markdown":"But you still haven&#39;t really clearly said what you&#39;re trying to achieve. Classes don&#39;t change at execution time. They&#39;re compiled, and the fields that are there, are there. Without knowing what you&#39;re trying to achieve in more detail, no-one will be able to help you.","body":"But you still haven&#39;t really clearly said what you&#39;re trying to achieve. Classes don&#39;t change at execution time. They&#39;re compiled, and the fields that are there, are there. Without knowing what you&#39;re trying to achieve in more detail, no-one will be able to help you."},{"owner":{"account_id":22244245,"reputation":25,"user_id":16478196,"display_name":"ICT"},"score":0,"creation_date":1663676672,"post_id":73785857,"comment_id":130291654,"body_markdown":"I want to check whether my response model .hasNoNullFieldsOrProperties but only for those properties which are not required. Actually you did help me - I believe I went too far with it, I should abb tag @NotNull and a BeanValidator to my object mapper and assert that at casting stage, not later on.","body":"I want to check whether my response model .hasNoNullFieldsOrProperties but only for those properties which are not required. Actually you did help me - I believe I went too far with it, I should abb tag @NotNull and a BeanValidator to my object mapper and assert that at casting stage, not later on."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1663680915,"post_id":73785857,"comment_id":130293397,"body_markdown":"And why shouldn&#39;t it include `null`? You haven&#39;t told Jackson to exclude those? See https://stackoverflow.com/questions/11757487/how-to-tell-jackson-to-ignore-a-field-during-serialization-if-its-value-is-null on how to configure jackson as such. For the incoming part use java bean validation with `@NotNull` and or `@NotEmpty`.","body":"And why shouldn&#39;t it include <code>null</code>? You haven&#39;t told Jackson to exclude those? See <a href=\"https://stackoverflow.com/questions/11757487/how-to-tell-jackson-to-ignore-a-field-during-serialization-if-its-value-is-null\" title=\"how to tell jackson to ignore a field during serialization if its value is null\">stackoverflow.com/questions/11757487/&hellip;</a> on how to configure jackson as such. For the incoming part use java bean validation with <code>@NotNull</code> and or <code>@NotEmpty</code>."}],"answers":[{"tags":[],"owner":{"account_id":24007156,"reputation":154,"user_id":17991175,"display_name":"Danial Eskandari"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1663677094,"creation_date":1663677094,"answer_id":73786759,"question_id":73785857,"body_markdown":"If any of your fields are not required, you have to check them whether they are null or else, while using them. Because your class is represented by all the fields you define for it, and there is no way to ignore those fields with null values.\r\n\r\nIt&#39;s possible while serializing and converting to json, but not in deserializing.","title":"Do not include property in POJO if it is null or doesn&#39;t exist in incoming JSON","body":"<p>If any of your fields are not required, you have to check them whether they are null or else, while using them. Because your class is represented by all the fields you define for it, and there is no way to ignore those fields with null values.</p>\n<p>It's possible while serializing and converting to json, but not in deserializing.</p>\n"},{"tags":[],"owner":{"account_id":11186541,"reputation":184,"user_id":8208674,"display_name":"Edson Vicente Carli Junior"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1663680553,"creation_date":1663680236,"answer_id":73787460,"question_id":73785857,"body_markdown":"One solution is create your own anotation @RequiredOnLoad \r\n```\r\n@Retention(RetentionPolicy.RUNTIME)\r\n@Target(ElementType.FIELD)\r\npublic @interface RequiredOnLoad { \r\n}\r\n```\r\nAnd your own load json, some like this:\r\n\r\n```\r\n//new function with check required fields\r\npublic &lt;T&gt; T myConvertJSONtoPOJO(String inputJSON,\r\n                               Class&lt;T&gt; valueType) throws Exception {\r\n   T pojo  = convertJSONtoPOJO(inputJSON,valueType);\r\n\r\n   Field[] allFields = Person.class.getDeclaredFields();\r\n\r\n   for (Field field : allFields)\r\n   {\r\n       if(field.isAnnotationPresent(RequiredOnLoad.class))\r\n       {\r\n          field.setAccessible(true);//to access private fields\r\n          Object value = field.get(pojo);\r\n          if (value == null ) \r\n          {\r\n            throw new Exception(&quot;Field is required on load!&quot;);\r\n          }\r\n       } \r\n   }\r\n\r\n   return pojo;\r\n}\r\n//old function without check\r\npublic &lt;T&gt; T convertJSONtoPOJO(String inputJSON,\r\n{\r\n...\r\n``` \r\n\r\nOf course, in your POJO you need put the annotation when you field is required in load time","title":"Do not include property in POJO if it is null or doesn&#39;t exist in incoming JSON","body":"<p>One solution is create your own anotation @RequiredOnLoad</p>\n<pre><code>@Retention(RetentionPolicy.RUNTIME)\n@Target(ElementType.FIELD)\npublic @interface RequiredOnLoad { \n}\n</code></pre>\n<p>And your own load json, some like this:</p>\n<pre><code>//new function with check required fields\npublic &lt;T&gt; T myConvertJSONtoPOJO(String inputJSON,\n                               Class&lt;T&gt; valueType) throws Exception {\n   T pojo  = convertJSONtoPOJO(inputJSON,valueType);\n\n   Field[] allFields = Person.class.getDeclaredFields();\n\n   for (Field field : allFields)\n   {\n       if(field.isAnnotationPresent(RequiredOnLoad.class))\n       {\n          field.setAccessible(true);//to access private fields\n          Object value = field.get(pojo);\n          if (value == null ) \n          {\n            throw new Exception(&quot;Field is required on load!&quot;);\n          }\n       } \n   }\n\n   return pojo;\n}\n//old function without check\npublic &lt;T&gt; T convertJSONtoPOJO(String inputJSON,\n{\n...\n</code></pre>\n<p>Of course, in your POJO you need put the annotation when you field is required in load time</p>\n"}],"owner":{"account_id":22244245,"reputation":25,"user_id":16478196,"display_name":"ICT"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1145,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73786759,"answer_count":2,"score":1,"last_activity_date":1663680553,"creation_date":1663672761,"question_id":73785857,"body_markdown":"Hi I have the following object mapper:\r\n\r\n    public &lt;T&gt; T convertJSONtoPOJO(String inputJSON,\r\n                                   Class&lt;T&gt; valueType) throws Exception {\r\n        try {\r\n            objectMapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, true);\r\n            return objectMapper.readValue(inputJSON, valueType);\r\n        } catch (Exception exception) { \r\n            //my exception which doesnt matter now\r\n        }\r\n    }\r\n\r\nAnd incoming JSON:\r\n\r\n    {\r\n        &quot;propertyA&quot;: &quot;1&quot;,\r\n        &quot;propertyB&quot;: null, \r\n    }\r\n\r\nAnd POJO:\r\n\r\n    @FieldDefaults(level = AccessLevel.PRIVATE)\r\n    @Data\r\n    public class MyClazz {\r\n        String propertyA;\r\n        String propertyB;\r\n        String propertyC;\r\n    }\r\n\r\nBy default @JsonProperty required is set to false on all of them.\r\n\r\nNow while deserializing I want to obtain POJO which does NOT include:\r\na) non-required variables if they do NOT occur in JSON\r\nb) variables which have null value.\r\n\r\nCurrently my code does NOT fail, it simply gives me the following POJO:\r\n\r\n    propertyA = 1\r\n    propertyB = null\r\n    propertyC = null\r\n\r\nBut I want to obtain POJO with only:\r\n\r\n    propertyA = 1\r\n\r\n","title":"Do not include property in POJO if it is null or doesn&#39;t exist in incoming JSON","body":"<p>Hi I have the following object mapper:</p>\n<pre><code>public &lt;T&gt; T convertJSONtoPOJO(String inputJSON,\n                               Class&lt;T&gt; valueType) throws Exception {\n    try {\n        objectMapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, true);\n        return objectMapper.readValue(inputJSON, valueType);\n    } catch (Exception exception) { \n        //my exception which doesnt matter now\n    }\n}\n</code></pre>\n<p>And incoming JSON:</p>\n<pre><code>{\n    &quot;propertyA&quot;: &quot;1&quot;,\n    &quot;propertyB&quot;: null, \n}\n</code></pre>\n<p>And POJO:</p>\n<pre><code>@FieldDefaults(level = AccessLevel.PRIVATE)\n@Data\npublic class MyClazz {\n    String propertyA;\n    String propertyB;\n    String propertyC;\n}\n</code></pre>\n<p>By default @JsonProperty required is set to false on all of them.</p>\n<p>Now while deserializing I want to obtain POJO which does NOT include:\na) non-required variables if they do NOT occur in JSON\nb) variables which have null value.</p>\n<p>Currently my code does NOT fail, it simply gives me the following POJO:</p>\n<pre><code>propertyA = 1\npropertyB = null\npropertyC = null\n</code></pre>\n<p>But I want to obtain POJO with only:</p>\n<pre><code>propertyA = 1\n</code></pre>\n"},{"tags":["java","spring","spring-boot","query-string"],"answers":[{"tags":[],"owner":{"account_id":26317294,"reputation":210,"user_id":19979867,"display_name":"Leonardo Emmanuel de Azevedo"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1663680305,"creation_date":1663680305,"answer_id":73787478,"question_id":73786851,"body_markdown":"Instead of using a ```@GetMapping``` I&#39;d suggest to use ```@PostMapping``` so Spring can map the object directly from the body of the request.\r\n\r\nFollow [this link](https://stackoverflow.com/a/59420933/19979867)","title":"Make object containing map property to querystring for Java @RequestParam","body":"<p>Instead of using a <code>@GetMapping</code> I'd suggest to use <code>@PostMapping</code> so Spring can map the object directly from the body of the request.</p>\n<p>Follow <a href=\"https://stackoverflow.com/a/59420933/19979867\">this link</a></p>\n"}],"owner":{"account_id":12710481,"reputation":63,"user_id":9234265,"display_name":"Rolf R&#252;diger"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1663680305,"creation_date":1663677529,"question_id":73786851,"body_markdown":"  \r\nThis is my class:\r\n\r\n    @Getter\r\n    @Setter\r\n    public class Example {\r\n        private boolean taxFree;\r\n        private String email;\r\n        private Map&lt;Enum,String&gt; additionalConstraints;\r\n    }\r\n\r\n\r\nThis is my endpoint: \r\n\r\n    @GetMapping(value = &quot;/search&quot;, produces = MediaType.APPLICATION_JSON_VALUE)\r\n\tpublic TransformedExample&lt;Example&gt; getPurchases(ExampleSearchQueryModel searchModel,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t  BindingResult result) {\r\n\t\tif (result.hasErrors() || searchModel == null) {\r\n\t\t\tLOGGER.error(result.getAllErrors().toString());\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\treturn exampleService.findByExampleSearchModel(searchModel);\r\n\t}\r\n\r\nIf i have a class and endpoint like this how would my querystring have to look like so that spring can populate the map field &quot;additionalConstraints&quot; ? \r\n\r\nadditionalConstraints.EMAIL=test\r\nor\r\nadditionConstraints[EMAIL]=test \r\n\r\nalways result in the map being mapped to null or a size(0) map. How do i do this correctly?","title":"Make object containing map property to querystring for Java @RequestParam","body":"<p>This is my class:</p>\n<pre><code>@Getter\n@Setter\npublic class Example {\n    private boolean taxFree;\n    private String email;\n    private Map&lt;Enum,String&gt; additionalConstraints;\n}\n</code></pre>\n<p>This is my endpoint:</p>\n<pre><code>@GetMapping(value = &quot;/search&quot;, produces = MediaType.APPLICATION_JSON_VALUE)\npublic TransformedExample&lt;Example&gt; getPurchases(ExampleSearchQueryModel searchModel,\n                                                  BindingResult result) {\n    if (result.hasErrors() || searchModel == null) {\n        LOGGER.error(result.getAllErrors().toString());\n        return null;\n    }\n\n    return exampleService.findByExampleSearchModel(searchModel);\n}\n</code></pre>\n<p>If i have a class and endpoint like this how would my querystring have to look like so that spring can populate the map field &quot;additionalConstraints&quot; ?</p>\n<p>additionalConstraints.EMAIL=test\nor\nadditionConstraints[EMAIL]=test</p>\n<p>always result in the map being mapped to null or a size(0) map. How do i do this correctly?</p>\n"},{"tags":["java","c","autoboxing","coercion","type-coercion"],"comments":[{"owner":{"account_id":372833,"reputation":86869,"user_id":722121,"accept_rate":100,"display_name":"Gareth Latty"},"score":3,"creation_date":1340033757,"post_id":11086114,"comment_id":14514661,"body_markdown":"[First result on google for `programming coercion`](https://en.wikipedia.org/wiki/Type_conversion).","body":"<a href=\"https://en.wikipedia.org/wiki/Type_conversion\" rel=\"nofollow noreferrer\">First result on google for <code>programming coercion</code></a>."},{"owner":{"account_id":4495,"reputation":335853,"user_id":6782,"accept_rate":78,"display_name":"Alnitak"},"score":0,"creation_date":1340138943,"post_id":11086114,"comment_id":14552106,"body_markdown":"auto-boxing is something completely different, and wasn&#39;t in the original question.  Specifically, auto-boxing is a Java feature that (implicitly) wraps a primitive value into its &quot;Object&quot; variety, e.g. an `int` into an `Integer`.  The reverse can happen too, e.g. an `Integer` can be automatically unboxed into an `int` value.","body":"auto-boxing is something completely different, and wasn&#39;t in the original question.  Specifically, auto-boxing is a Java feature that (implicitly) wraps a primitive value into its &quot;Object&quot; variety, e.g. an <code>int</code> into an <code>Integer</code>.  The reverse can happen too, e.g. an <code>Integer</code> can be automatically unboxed into an <code>int</code> value."}],"answers":[{"tags":[],"owner":{"account_id":74861,"reputation":10346,"user_id":214919,"accept_rate":100,"display_name":"Tom Studee"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1340033767,"creation_date":1340033767,"answer_id":11086157,"question_id":11086114,"body_markdown":"Coercion refers to &quot;type coercion&quot;. In other words, you add a variable of type `Integer` to a `Float`, the `Integer` will be coerced to `Float`, and the numbers added together.","title":"What is the difference between autoboxing and coercion?","body":"<p>Coercion refers to \"type coercion\". In other words, you add a variable of type <code>Integer</code> to a <code>Float</code>, the <code>Integer</code> will be coerced to <code>Float</code>, and the numbers added together.</p>\n"},{"tags":[],"owner":{"account_id":1245453,"reputation":1616,"user_id":1207026,"accept_rate":83,"display_name":"Brandon Kreisel"},"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1340033787,"creation_date":1340033787,"answer_id":11086166,"question_id":11086114,"body_markdown":"Coercion is the process of changing one data type into another. http://en.wikipedia.org/wiki/Type_conversion","title":"What is the difference between autoboxing and coercion?","body":"<p>Coercion is the process of changing one data type into another. <a href=\"http://en.wikipedia.org/wiki/Type_conversion\" rel=\"nofollow\">http://en.wikipedia.org/wiki/Type_conversion</a></p>\n"},{"tags":[],"owner":{"account_id":4495,"reputation":335853,"user_id":6782,"accept_rate":78,"display_name":"Alnitak"},"down_vote_count":0,"up_vote_count":13,"is_accepted":true,"score":13,"last_activity_date":1340033854,"creation_date":1340033854,"answer_id":11086191,"question_id":11086114,"body_markdown":"Coercion is another name for an _implicit_ type cast, i.e. one mandated by the language rules, and not explicitly added by the programmer.","title":"What is the difference between autoboxing and coercion?","body":"<p>Coercion is another name for an <em>implicit</em> type cast, i.e. one mandated by the language rules, and not explicitly added by the programmer.</p>\n"}],"owner":{"account_id":37812,"reputation":25853,"user_id":108207,"accept_rate":96,"display_name":"Niklas Rosencrantz"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8674,"favorite_count":0,"down_vote_count":5,"up_vote_count":7,"closed_date":1340034315,"accepted_answer_id":11086191,"answer_count":3,"score":2,"last_activity_date":1663680272,"creation_date":1340033657,"question_id":11086114,"body_markdown":"I program in Java, C and Python. \r\n\r\n&gt; The rule for automatic coercions among arithmetic types have been\r\n&gt; augmented to handle the richer set of types\r\n\r\nSource: &quot;The C Programming Language&quot;\r\n\r\nBut what does &quot;coercion&quot; mean? The answers say it&#39;s like type conversion and implicit casts and implicit type conversions and called autoboxing where I read it.\r\n\r\nWhat is the difference between autoboxing and coercion?","title":"What is the difference between autoboxing and coercion?","body":"<p>I program in Java, C and Python.</p>\n<blockquote>\n<p>The rule for automatic coercions among arithmetic types have been\naugmented to handle the richer set of types</p>\n</blockquote>\n<p>Source: &quot;The C Programming Language&quot;</p>\n<p>But what does &quot;coercion&quot; mean? The answers say it's like type conversion and implicit casts and implicit type conversions and called autoboxing where I read it.</p>\n<p>What is the difference between autoboxing and coercion?</p>\n"},{"tags":["java","redis","key","composite","spring-data-redis"],"owner":{"account_id":5701327,"reputation":532,"user_id":4506190,"display_name":"Swaram Jagtap"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":866,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":0,"score":5,"last_activity_date":1663680164,"creation_date":1575523804,"question_id":59188808,"body_markdown":"I am using a spring data redis repository for retrieval and persistence into Redis. But I need the id to be composite of 2 fields. \r\n How can this be achieved? Is there any way equivalent to @EmbeddedId?","title":"How to use composite key as id in spring redis entity as equivalent to @embedded id","body":"<p>I am using a spring data redis repository for retrieval and persistence into Redis. But I need the id to be composite of 2 fields.\nHow can this be achieved? Is there any way equivalent to @EmbeddedId?</p>\n"},{"tags":["java","android","api","retrofit2"],"comments":[{"owner":{"account_id":1658807,"reputation":31819,"user_id":1527544,"accept_rate":54,"display_name":"Antoniossss"},"score":0,"creation_date":1663678469,"post_id":73786800,"comment_id":130292347,"body_markdown":"what is the error?","body":"what is the error?"},{"owner":{"account_id":24274748,"reputation":1,"user_id":18222209,"display_name":"sidali"},"score":0,"creation_date":1663678763,"post_id":73786800,"comment_id":130292470,"body_markdown":"@Antoniossss when i use the button that intiate the call i get a toast saying &quot;not found&quot; \n which if you check the code means the call was unsuccessful, in other words am not getting any response from the api","body":"@Antoniossss when i use the button that intiate the call i get a toast saying &quot;not found&quot;   which if you check the code means the call was unsuccessful, in other words am not getting any response from the api"},{"owner":{"account_id":1658807,"reputation":31819,"user_id":1527544,"accept_rate":54,"display_name":"Antoniossss"},"score":0,"creation_date":1663681185,"post_id":73786800,"comment_id":130293518,"body_markdown":"Great, but I still dont know what is the response ;) `isSuccessfull` means only that response code == 200 ;) Check the actual response for some details","body":"Great, but I still dont know what is the response ;) <code>isSuccessfull</code> means only that response code == 200 ;) Check the actual response for some details"}],"answers":[{"tags":[],"owner":{"account_id":7612800,"reputation":16,"user_id":5773181,"display_name":"Jo&#227;o Pedro Pedrosa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663679798,"creation_date":1663679798,"answer_id":73787360,"question_id":73786800,"body_markdown":"Try to add an interceptor so you can see all calls logs (headers, body, URLs, etc...) and see what it&#39;s the error that the API is sending.\r\n\r\nAdd `OkHtpp` to your grade dependencies:\r\n```gradle\r\nimplementation &quot;com.squareup.okhttp3:okhttp:5.0.0-alpha.2&quot;\r\nimplementation &quot;com.squareup.okhttp3:logging-interceptor:5.0.0-alpha.2&quot;\r\n````\r\n\r\nAnd after that, when you create your Retrofit instance, add the interceptor, should look something like this:\r\n\r\n```kotlin\r\nval httpClient = OkHttpClient.Builder()\r\nval interceptor = HttpLoggingInterceptor()\r\ninterceptor.setLevel(HttpLoggingInterceptor.Level.BODY)\r\nhttpClient.addInterceptor(interceptor)\r\nhttpClient.addInterceptor(Interceptor { chain: Interceptor.Chain -&gt;\r\n   val original: Request = chain.request()\r\n   val request: Request = original.newBuilder()\r\n        .header(&quot;Content-Type&quot;, &quot;application/json&quot;)\r\n        .method(original.method, original.body)\r\n        .build()\r\n   chain.proceed(request)\r\n})\r\n      \r\nval okHttpClient = httpClient.build()\r\nval retrofit = Retrofit.Builder()\r\n            .baseUrl(&quot;https://api.calorieninjas.com/v1/&quot;)\r\n            .client(okHttpClient)\r\n            .addConverterFactory(GsonConverterFactory.create())\r\n            .build()\r\n```","title":"why is my retrofit call is returning an unsuccessful response?","body":"<p>Try to add an interceptor so you can see all calls logs (headers, body, URLs, etc...) and see what it's the error that the API is sending.</p>\n<p>Add <code>OkHtpp</code> to your grade dependencies:</p>\n<pre><code>implementation &quot;com.squareup.okhttp3:okhttp:5.0.0-alpha.2&quot;\nimplementation &quot;com.squareup.okhttp3:logging-interceptor:5.0.0-alpha.2&quot;\n</code></pre>\n<p>And after that, when you create your Retrofit instance, add the interceptor, should look something like this:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>val httpClient = OkHttpClient.Builder()\nval interceptor = HttpLoggingInterceptor()\ninterceptor.setLevel(HttpLoggingInterceptor.Level.BODY)\nhttpClient.addInterceptor(interceptor)\nhttpClient.addInterceptor(Interceptor { chain: Interceptor.Chain -&gt;\n   val original: Request = chain.request()\n   val request: Request = original.newBuilder()\n        .header(&quot;Content-Type&quot;, &quot;application/json&quot;)\n        .method(original.method, original.body)\n        .build()\n   chain.proceed(request)\n})\n      \nval okHttpClient = httpClient.build()\nval retrofit = Retrofit.Builder()\n            .baseUrl(&quot;https://api.calorieninjas.com/v1/&quot;)\n            .client(okHttpClient)\n            .addConverterFactory(GsonConverterFactory.create())\n            .build()\n</code></pre>\n"}],"owner":{"account_id":24274748,"reputation":1,"user_id":18222209,"display_name":"sidali"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1663679798,"creation_date":1663677291,"question_id":73786800,"body_markdown":"so basically am using retrofit to get data from an api called calorieNinja and for some reason i keep getting an unsuccessful response \r\n\r\nhere is the retrofit code :\r\n\r\n    retrofit = new Retrofit.Builder().baseUrl(&quot;https://api.calorieninjas.com/v1/&quot;)\r\n                        .addConverterFactory(GsonConverterFactory.create())\r\n                        .build();\r\n                ApiCalorieNinjas apiCalorieNinjas = retrofit.create(ApiCalorieNinjas.class);\r\n                Call&lt;MealCalories&gt; call = apiCalorieNinjas.getMeal(&quot;nutrition?query= 5 eggs&quot;);\r\n                call.enqueue(new Callback&lt;MealCalories&gt;() {\r\n                    @Override\r\n                    public void onResponse(Call&lt;MealCalories&gt; call, Response&lt;MealCalories&gt; response) {\r\n                        if(!response.isSuccessful()){\r\n                            Toast.makeText(getContext(),&quot;Not Found&quot;,Toast.LENGTH_SHORT).show();\r\n                            return;\r\n                        }\r\n                        mealEaten = response.body();\r\n                        Meal meal1 = new Meal(mealEaten.getName(),mealEaten.getCalories(),mealEaten.getProtein_g(),mealEaten.getCarbohydrates_total_g());\r\n                        mealViewModel.insertMeal(meal1);\r\n                    }\r\n\r\n                    @Override\r\n                    public void onFailure(Call&lt;MealCalories&gt; call, Throwable t) {\r\n\r\n                    }\r\n                });\r\n            }\r\n        });\r\n\r\nbtw am using 2 different types of meal objects because one is responsible of getting the data from the api and one is used as an entity for Room databse and they dont have the same parameters so instead of just adding @Ignore i decided to use two different objects while i try fixing this problem.\r\n\r\n\r\nand here is the interface of it :\r\n\r\n    public interface ApiCalorieNinjas {\r\n    @Headers(&quot;X-Api-Key: PiQfBb0CZy2GfOZWjWyj6Tg==EdGjoESjqxQh1q4M&quot;)\r\n    @GET(&quot;{meal}&quot;)\r\n    public Call&lt;MealCalories&gt; getMeal(@Path(&quot;meal&quot;) String meal);\r\n\r\nthe api key isnt real!\r\n\r\nif additional code is needed please let me know!\r\n","title":"why is my retrofit call is returning an unsuccessful response?","body":"<p>so basically am using retrofit to get data from an api called calorieNinja and for some reason i keep getting an unsuccessful response</p>\n<p>here is the retrofit code :</p>\n<pre><code>retrofit = new Retrofit.Builder().baseUrl(&quot;https://api.calorieninjas.com/v1/&quot;)\n                    .addConverterFactory(GsonConverterFactory.create())\n                    .build();\n            ApiCalorieNinjas apiCalorieNinjas = retrofit.create(ApiCalorieNinjas.class);\n            Call&lt;MealCalories&gt; call = apiCalorieNinjas.getMeal(&quot;nutrition?query= 5 eggs&quot;);\n            call.enqueue(new Callback&lt;MealCalories&gt;() {\n                @Override\n                public void onResponse(Call&lt;MealCalories&gt; call, Response&lt;MealCalories&gt; response) {\n                    if(!response.isSuccessful()){\n                        Toast.makeText(getContext(),&quot;Not Found&quot;,Toast.LENGTH_SHORT).show();\n                        return;\n                    }\n                    mealEaten = response.body();\n                    Meal meal1 = new Meal(mealEaten.getName(),mealEaten.getCalories(),mealEaten.getProtein_g(),mealEaten.getCarbohydrates_total_g());\n                    mealViewModel.insertMeal(meal1);\n                }\n\n                @Override\n                public void onFailure(Call&lt;MealCalories&gt; call, Throwable t) {\n\n                }\n            });\n        }\n    });\n</code></pre>\n<p>btw am using 2 different types of meal objects because one is responsible of getting the data from the api and one is used as an entity for Room databse and they dont have the same parameters so instead of just adding @Ignore i decided to use two different objects while i try fixing this problem.</p>\n<p>and here is the interface of it :</p>\n<pre><code>public interface ApiCalorieNinjas {\n@Headers(&quot;X-Api-Key: PiQfBb0CZy2GfOZWjWyj6Tg==EdGjoESjqxQh1q4M&quot;)\n@GET(&quot;{meal}&quot;)\npublic Call&lt;MealCalories&gt; getMeal(@Path(&quot;meal&quot;) String meal);\n</code></pre>\n<p>the api key isnt real!</p>\n<p>if additional code is needed please let me know!</p>\n"},{"tags":["java","unit-testing","junit","mockito"],"answers":[{"tags":[],"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1663679428,"creation_date":1663679428,"answer_id":73787264,"question_id":73787112,"body_markdown":"You mocked the interface `userInterface` with an empty mock. This does nothing.\r\n\r\nYou should return a user object if the method is called:\r\n\r\n    class RecipeTest{\r\n      \r\n      @InjectMock private RecipeService recipeService;\r\n      @Mock private RecipeRepository recipeRepository;\r\n      @Mock private UserInterface userInterface;\r\n    \r\n      @BeforeEach\r\n      void setUp(){\r\n        recipeService = new RecipeService(userInterface);\r\n      }\r\n      \r\n    \r\n          @Test\r\n          void getRecipe(){\r\n            Recipe recipe = new Recipe();\r\n            recipe.setId(1L);\r\n            recipe.setTitle(&quot;SomeTitle&quot;);\r\n        \r\n            when(userInterface.currentUser()).thenReturn(new User())\r\n            when(recipeRepository.findById(1L)).thenReturn(Optional.of(recipe))\r\n            \r\n            recipeService.getRecipe(1L);\r\n            verify(recipeRepository).findById(1L);\r\n          } \r\n        }\r\n\r\n","title":"How to test a method that is dependent on another method from different service?","body":"<p>You mocked the interface <code>userInterface</code> with an empty mock. This does nothing.</p>\n<p>You should return a user object if the method is called:</p>\n<pre><code>class RecipeTest{\n  \n  @InjectMock private RecipeService recipeService;\n  @Mock private RecipeRepository recipeRepository;\n  @Mock private UserInterface userInterface;\n\n  @BeforeEach\n  void setUp(){\n    recipeService = new RecipeService(userInterface);\n  }\n  \n\n      @Test\n      void getRecipe(){\n        Recipe recipe = new Recipe();\n        recipe.setId(1L);\n        recipe.setTitle(&quot;SomeTitle&quot;);\n    \n        when(userInterface.currentUser()).thenReturn(new User())\n        when(recipeRepository.findById(1L)).thenReturn(Optional.of(recipe))\n        \n        recipeService.getRecipe(1L);\n        verify(recipeRepository).findById(1L);\n      } \n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26390971,"reputation":13,"user_id":20042838,"display_name":"Kurtis"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663679528,"creation_date":1663679528,"answer_id":73787294,"question_id":73787112,"body_markdown":"You&#39;re mocking the UserInterface. You need to have a when().thenReturn() for the currentUser() method","title":"How to test a method that is dependent on another method from different service?","body":"<p>You're mocking the UserInterface. You need to have a when().thenReturn() for the currentUser() method</p>\n"},{"tags":[],"owner":{"account_id":18853736,"reputation":28,"user_id":13752229,"display_name":"Konkord360"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663679597,"creation_date":1663679597,"answer_id":73787312,"question_id":73787112,"body_markdown":"It seems that you have an error on the RecipeService line as there is no @InjectMock annotation in Mockito. It should be @InjectMocks in plural.\r\n\r\nAlso the test structure isn&#39;t really proper. If you want a method to return a fixed user you should also mock it in the test like that\r\n\r\n    when(UserInterface.currentUser()).thenReturn(new User());\r\n\r\n","title":"How to test a method that is dependent on another method from different service?","body":"<p>It seems that you have an error on the RecipeService line as there is no @InjectMock annotation in Mockito. It should be @InjectMocks in plural.</p>\n<p>Also the test structure isn't really proper. If you want a method to return a fixed user you should also mock it in the test like that</p>\n<pre><code>when(UserInterface.currentUser()).thenReturn(new User());\n</code></pre>\n"}],"owner":{"account_id":23727935,"reputation":117,"user_id":17747601,"display_name":"m_novak"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":243,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73787264,"answer_count":3,"score":0,"last_activity_date":1663679597,"creation_date":1663678661,"question_id":73787112,"body_markdown":"So I have UserService and UserInterface, where there is a method that returns a fixed user.\r\n\r\n    public User currentUser(){\r\n      User user = new User();\r\n      user.setId(1L);\r\n      user.setName(&quot;Steve&quot;);\r\n      return user;\r\n    }\r\n\r\nI also have a RecipeService, where the getRecipe method is located, which I want to test. In this method, I first check if the user ID of the user who created the recipe is the same as the currentUser ID. If yes, the recipe is returned to the user.\r\n\r\n    public Recipe getRecipe(Long id){\r\n      User user = userInterface.currentUser();\r\n      Recipe recipe = recipeRepository.findById(id);\r\n    \r\n      if(user.getId == recipe.getUser.getId()){\r\n        return recipe;\r\n      }\r\n      \r\n      return null;\r\n    }\r\n\r\nSo my test looks like this:\r\n\r\n    class RecipeTest{\r\n      \r\n      @InjectMock private RecipeService recipeService;\r\n      @Mock private RecipeRepository recipeRepository;\r\n      @Mock private UserInterface userInterface;\r\n    \r\n      @BeforeEach\r\n      void setUp(){\r\n        recipeService = new RecipeService(userInterface);\r\n      }\r\n      \r\n      @Test\r\n      void getRecipe(){\r\n        Recipe recipe = new Recipe();\r\n        recipe.setId(1L);\r\n        recipe.setTitle(&quot;SomeTitle&quot;);\r\n    \r\n        when(recipeRepository.findById(1L)).thenReturn(Optional.of(recipe))\r\n        \r\n        recipeService.getRecipe(1L);\r\n        verify(recipeRepository).findById(1L);\r\n      } \r\n    }\r\n\r\nWhen I start the test, Im getting error that currentUser that is called from UserInterface in the getRecipe method is null (when comparing IDs in the if statment). It looks like the method currentUser() is not called.\r\n\r\nCan you guys tell me what am I doing wrong? \r\n\r\n","title":"How to test a method that is dependent on another method from different service?","body":"<p>So I have UserService and UserInterface, where there is a method that returns a fixed user.</p>\n<pre><code>public User currentUser(){\n  User user = new User();\n  user.setId(1L);\n  user.setName(&quot;Steve&quot;);\n  return user;\n}\n</code></pre>\n<p>I also have a RecipeService, where the getRecipe method is located, which I want to test. In this method, I first check if the user ID of the user who created the recipe is the same as the currentUser ID. If yes, the recipe is returned to the user.</p>\n<pre><code>public Recipe getRecipe(Long id){\n  User user = userInterface.currentUser();\n  Recipe recipe = recipeRepository.findById(id);\n\n  if(user.getId == recipe.getUser.getId()){\n    return recipe;\n  }\n  \n  return null;\n}\n</code></pre>\n<p>So my test looks like this:</p>\n<pre><code>class RecipeTest{\n  \n  @InjectMock private RecipeService recipeService;\n  @Mock private RecipeRepository recipeRepository;\n  @Mock private UserInterface userInterface;\n\n  @BeforeEach\n  void setUp(){\n    recipeService = new RecipeService(userInterface);\n  }\n  \n  @Test\n  void getRecipe(){\n    Recipe recipe = new Recipe();\n    recipe.setId(1L);\n    recipe.setTitle(&quot;SomeTitle&quot;);\n\n    when(recipeRepository.findById(1L)).thenReturn(Optional.of(recipe))\n    \n    recipeService.getRecipe(1L);\n    verify(recipeRepository).findById(1L);\n  } \n}\n</code></pre>\n<p>When I start the test, Im getting error that currentUser that is called from UserInterface in the getRecipe method is null (when comparing IDs in the if statment). It looks like the method currentUser() is not called.</p>\n<p>Can you guys tell me what am I doing wrong?</p>\n"},{"tags":["javascript","java","html","vaadin","web-component"],"answers":[{"tags":[],"owner":{"account_id":12280349,"reputation":10212,"user_id":8962195,"display_name":"Tatu Lund"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1663679346,"creation_date":1663679346,"answer_id":73787251,"question_id":73785120,"body_markdown":"This happens because your component is not setting &quot;id&quot; of the element. And in your case there is accidentally other div with id=outlet, and your JavaScript `document.getElementById(&quot;outlet&quot;);` finds it and uses it as element where it builds the Network.\r\n\r\nI would do it this way\r\n\r\n    @JsModule(&quot;./visjs-test.js&quot;)\r\n    @NpmPackage(value = &quot;vis&quot;, version = &quot;0.110.0&quot;)\r\n    @Tag(&quot;div&quot;)\r\n    public class VisJs extends Composite&lt;Div&gt; {\r\n    \r\n        public VisJs(List&lt;VisJsEdge&gt; edges, List&lt;VisJsNode&gt; nodes) throws JsonProcessingException {\r\n            String id=randomId(10);\r\n            setId();\r\n            ...\r\n            getElement().executeJs(&quot;window.initThree($0, $1, $2)&quot;, this, jsonEdges, jsonNodes, id);\r\n        }\r\n        \r\n        private String randomId(int chars) {\r\n            int limit = (10 * chars) - 1;\r\n            String key = &quot;&quot; + rand.nextInt(limit);\r\n            key = String.format(&quot;%&quot; + chars + &quot;s&quot;, key).replace(&#39; &#39;, &#39;0&#39;);\r\n            return &quot;vis-&quot; + key;\r\n        }\r\n\r\nAnd naturally update the `initThree` function you have set to `window` to use that `id` parameter.\r\n\r\nYou need to have unique id for each component instance. This way you can create multiple components on the same view. Otherwise new instances would ruin the old ones.","title":"Tagged Custom Vaadin Component is not added to the MainView layout","body":"<p>This happens because your component is not setting &quot;id&quot; of the element. And in your case there is accidentally other div with id=outlet, and your JavaScript <code>document.getElementById(&quot;outlet&quot;);</code> finds it and uses it as element where it builds the Network.</p>\n<p>I would do it this way</p>\n<pre><code>@JsModule(&quot;./visjs-test.js&quot;)\n@NpmPackage(value = &quot;vis&quot;, version = &quot;0.110.0&quot;)\n@Tag(&quot;div&quot;)\npublic class VisJs extends Composite&lt;Div&gt; {\n\n    public VisJs(List&lt;VisJsEdge&gt; edges, List&lt;VisJsNode&gt; nodes) throws JsonProcessingException {\n        String id=randomId(10);\n        setId();\n        ...\n        getElement().executeJs(&quot;window.initThree($0, $1, $2)&quot;, this, jsonEdges, jsonNodes, id);\n    }\n    \n    private String randomId(int chars) {\n        int limit = (10 * chars) - 1;\n        String key = &quot;&quot; + rand.nextInt(limit);\n        key = String.format(&quot;%&quot; + chars + &quot;s&quot;, key).replace(' ', '0');\n        return &quot;vis-&quot; + key;\n    }\n</code></pre>\n<p>And naturally update the <code>initThree</code> function you have set to <code>window</code> to use that <code>id</code> parameter.</p>\n<p>You need to have unique id for each component instance. This way you can create multiple components on the same view. Otherwise new instances would ruin the old ones.</p>\n"}],"owner":{"account_id":26389231,"reputation":23,"user_id":20041316,"display_name":"Niyaz Karimov"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":77,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":73787251,"answer_count":1,"score":2,"last_activity_date":1663679346,"creation_date":1663668999,"question_id":73785120,"body_markdown":"I&#39;m trying to add my custom vis component to MainView VerticalLayout. But it is rendered above the layout and the layout itself contains an empty component tag.\r\n\r\n#### Custom component code\r\nHere I&#39;m tagging my component as &quot;div&quot;\r\n```\r\n@JsModule(&quot;./visjs-test.js&quot;)\r\n@NpmPackage(value = &quot;vis&quot;, version = &quot;0.110.0&quot;)\r\n@Tag(&quot;div&quot;)\r\npublic class VisJs extends Component {\r\n\r\n    public VisJs(List&lt;VisJsEdge&gt; edges, List&lt;VisJsNode&gt; nodes) throws JsonProcessingException {\r\n        ObjectWriter owForEdges = new ObjectMapper().writer().withDefaultPrettyPrinter();\r\n        ObjectWriter owForNodes = new ObjectMapper().writer().withDefaultPrettyPrinter();\r\n\r\n        String jsonEdges = owForEdges.writeValueAsString(edges);\r\n        String jsonNodes = owForNodes.writeValueAsString(nodes);\r\n\r\n        getElement().executeJs(&quot;window.initThree($0, $1, $2)&quot;, this, jsonEdges, jsonNodes);\r\n    }\r\n}\r\n```\r\n\r\n#### visjs-test.js:\r\nHere I&#39;m filling nodes and edge of future network and trying to render it\r\n```\r\nimport {DataSet, Network} from &quot;vis&quot;;\r\n\r\nclass VisJsTest {\r\n    init(element, edges, nodes) {\r\n        this.element = element;\r\n\r\n        var loadedNodes = JSON.parse(nodes);\r\n        \r\n        var _this = this;\r\n        var step;\r\n        for (step = 0; step &lt; loadedNodes.length; step++) {\r\n            loadedNodes[step] = this.fillNode(loadedNodes[step]);\r\n        }\r\n        this.nodes = new DataSet(loadedNodes);\r\n        \r\n        var loadedEdges = JSON.parse(edges);\r\n        for (step = 0; step &lt; loadedEdges.length; step++) {\r\n            loadedEdges[step] = this.fillEdge(loadedEdges[step]);\r\n        }\r\n        this.edges = new DataSet(loadedEdges);\r\n\r\n        this.container = document.getElementById(&quot;outlet&quot;);\r\n        \r\n        this.data = {\r\n            nodes: this.nodes,\r\n            edges: this.edges,\r\n        };\r\n        var options = {};\r\n        this.network = new Network(this.container, this.data, options);\r\n}\r\n```\r\n\r\n#### Rendered HTML \r\n```\r\n&lt;div id=&quot;outlet&quot;&gt;\r\n   &lt;!-- Network is here, but not must be --&gt;\r\n   &lt;div class=&quot;vis-network&quot; tabindex=&quot;900&quot; style=&quot;position: relative; overflow: hidden; touch-action: pan-y; user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); width: 100%; height: 100%;&quot;&gt;\r\n      &lt;canvas style=&quot;position: relative; touch-action: none; user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); width: 100%; height: 100%;&quot; width=&quot;1260&quot; height=&quot;563&quot;&gt;&lt;/canvas&gt;\r\n   &lt;/div&gt;\r\n   &lt;flow-container-root-2521314 id=&quot;ROOT-2521314&quot; style=&quot;&quot;&gt;\r\n      &lt;vaadin-vertical-layout theme=&quot;padding spacing&quot; id=&quot;mainview&quot; style=&quot;width: 100%;&quot;&gt;\r\n         ...\r\n         &lt;vaadin-button tabindex=&quot;0&quot; role=&quot;button&quot;&gt;Add node&lt;/vaadin-button&gt;\r\n         &lt;vaadin-horizontal-layout theme=&quot;spacing&quot;&gt;\r\n            &lt;vaadin-upload target=&quot;VAADIN/dynamic/resource/3/c968ce30-4fc1-4e36-8d06-ddba9ecfbfd1/upload&quot;&gt;&lt;/vaadin-upload&gt;\r\n            &lt;vaadin-button disabled=&quot;&quot; tabindex=&quot;-1&quot; aria-disabled=&quot;true&quot; role=&quot;button&quot;&gt;Load data to XML&lt;/vaadin-button&gt;\r\n         &lt;/vaadin-horizontal-layout&gt;\r\n         ... \r\n         &lt;div&gt;&lt;/div&gt; &lt;!-- Network must be here --&gt;\r\n         ...\r\n      &lt;/vaadin-vertical-layout&gt;\r\n   &lt;/flow-container-root-2521314&gt;\r\n&lt;/div&gt;\r\n```","title":"Tagged Custom Vaadin Component is not added to the MainView layout","body":"<p>I'm trying to add my custom vis component to MainView VerticalLayout. But it is rendered above the layout and the layout itself contains an empty component tag.</p>\n<h4>Custom component code</h4>\n<p>Here I'm tagging my component as &quot;div&quot;</p>\n<pre><code>@JsModule(&quot;./visjs-test.js&quot;)\n@NpmPackage(value = &quot;vis&quot;, version = &quot;0.110.0&quot;)\n@Tag(&quot;div&quot;)\npublic class VisJs extends Component {\n\n    public VisJs(List&lt;VisJsEdge&gt; edges, List&lt;VisJsNode&gt; nodes) throws JsonProcessingException {\n        ObjectWriter owForEdges = new ObjectMapper().writer().withDefaultPrettyPrinter();\n        ObjectWriter owForNodes = new ObjectMapper().writer().withDefaultPrettyPrinter();\n\n        String jsonEdges = owForEdges.writeValueAsString(edges);\n        String jsonNodes = owForNodes.writeValueAsString(nodes);\n\n        getElement().executeJs(&quot;window.initThree($0, $1, $2)&quot;, this, jsonEdges, jsonNodes);\n    }\n}\n</code></pre>\n<h4>visjs-test.js:</h4>\n<p>Here I'm filling nodes and edge of future network and trying to render it</p>\n<pre><code>import {DataSet, Network} from &quot;vis&quot;;\n\nclass VisJsTest {\n    init(element, edges, nodes) {\n        this.element = element;\n\n        var loadedNodes = JSON.parse(nodes);\n        \n        var _this = this;\n        var step;\n        for (step = 0; step &lt; loadedNodes.length; step++) {\n            loadedNodes[step] = this.fillNode(loadedNodes[step]);\n        }\n        this.nodes = new DataSet(loadedNodes);\n        \n        var loadedEdges = JSON.parse(edges);\n        for (step = 0; step &lt; loadedEdges.length; step++) {\n            loadedEdges[step] = this.fillEdge(loadedEdges[step]);\n        }\n        this.edges = new DataSet(loadedEdges);\n\n        this.container = document.getElementById(&quot;outlet&quot;);\n        \n        this.data = {\n            nodes: this.nodes,\n            edges: this.edges,\n        };\n        var options = {};\n        this.network = new Network(this.container, this.data, options);\n}\n</code></pre>\n<h4>Rendered HTML</h4>\n<pre><code>&lt;div id=&quot;outlet&quot;&gt;\n   &lt;!-- Network is here, but not must be --&gt;\n   &lt;div class=&quot;vis-network&quot; tabindex=&quot;900&quot; style=&quot;position: relative; overflow: hidden; touch-action: pan-y; user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); width: 100%; height: 100%;&quot;&gt;\n      &lt;canvas style=&quot;position: relative; touch-action: none; user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); width: 100%; height: 100%;&quot; width=&quot;1260&quot; height=&quot;563&quot;&gt;&lt;/canvas&gt;\n   &lt;/div&gt;\n   &lt;flow-container-root-2521314 id=&quot;ROOT-2521314&quot; style=&quot;&quot;&gt;\n      &lt;vaadin-vertical-layout theme=&quot;padding spacing&quot; id=&quot;mainview&quot; style=&quot;width: 100%;&quot;&gt;\n         ...\n         &lt;vaadin-button tabindex=&quot;0&quot; role=&quot;button&quot;&gt;Add node&lt;/vaadin-button&gt;\n         &lt;vaadin-horizontal-layout theme=&quot;spacing&quot;&gt;\n            &lt;vaadin-upload target=&quot;VAADIN/dynamic/resource/3/c968ce30-4fc1-4e36-8d06-ddba9ecfbfd1/upload&quot;&gt;&lt;/vaadin-upload&gt;\n            &lt;vaadin-button disabled=&quot;&quot; tabindex=&quot;-1&quot; aria-disabled=&quot;true&quot; role=&quot;button&quot;&gt;Load data to XML&lt;/vaadin-button&gt;\n         &lt;/vaadin-horizontal-layout&gt;\n         ... \n         &lt;div&gt;&lt;/div&gt; &lt;!-- Network must be here --&gt;\n         ...\n      &lt;/vaadin-vertical-layout&gt;\n   &lt;/flow-container-root-2521314&gt;\n&lt;/div&gt;\n</code></pre>\n"},{"tags":["java","spring","apache-kafka"],"answers":[{"tags":[],"owner":{"account_id":13798611,"reputation":37875,"user_id":9959152,"display_name":"Ryuzaki L"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1556651866,"creation_date":1556651866,"answer_id":55927413,"question_id":55923893,"body_markdown":"[ErrorHandlingDeserializer][1]\r\n\r\n&gt; **When a deserializer fails to deserialize a message, Spring has no way to handle the problem because it occurs before the poll() returns.** To solve this problem, **version 2.2 introduced the ErrorHandlingDeserializer.** This deserializer delegates to a real deserializer (key or value). If the delegate fails to deserialize the record content, the ErrorHandlingDeserializer returns a DeserializationException instead, containing the cause and raw bytes. **When using a record-level MessageListener, if either the key or value contains a DeserializationException, the containers ErrorHandler is called with the failed ConsumerRecord.** When using a BatchMessageListener, the failed record is passed to the application along with the remaining records in the batch, so it is the responsibility of the application listener to check whether the key or value in a particular record is a DeserializationException.\r\n\r\nSo according to your code you are using `record-level MessageListener` then just add `ErrorHandler` to `Container`\r\n\r\n[Handling Exceptions][2]\r\n\r\n&gt;If your error handler implements this interface you can, for example, adjust the offsets accordingly. For example, to reset the offset to replay the failed message, you could do something like the following; note however, these are simplistic implementations and you would probably want more checking in the error handler.\r\n\r\n    @Bean\r\n    public ConsumerAwareListenerErrorHandler listen3ErrorHandler() {\r\n    return (m, e, c) -&gt; {\r\n        this.listen3Exception = e;\r\n        MessageHeaders headers = m.getHeaders();\r\n        c.seek(new org.apache.kafka.common.TopicPartition(\r\n                headers.get(KafkaHeaders.RECEIVED_TOPIC, String.class),\r\n                headers.get(KafkaHeaders.RECEIVED_PARTITION_ID, Integer.class)),\r\n                headers.get(KafkaHeaders.OFFSET, Long.class));\r\n        return null;\r\n       };\r\n    }\r\n\r\nOr you can do custom implementation like in this example\r\n\r\n    @Bean\r\n    public ConcurrentKafkaListenerContainerFactory&lt;String, GenericRecord&gt;\r\n    kafkaListenerContainerFactory()  {\r\n\r\n        ConcurrentKafkaListenerContainerFactory&lt;String, GenericRecord&gt; factory\r\n                = new ConcurrentKafkaListenerContainerFactory&lt;&gt;();\r\n        factory.setConsumerFactory(consumerFactory());\r\n        factory.getContainerProperties().setErrorHandler(new ErrorHandler() {\r\n            @Override\r\n            public void handle(Exception thrownException, List&lt;ConsumerRecord&lt;?, ?&gt;&gt; records, Consumer&lt;?, ?&gt; consumer, MessageListenerContainer container) {\r\n                String s = thrownException.getMessage().split(&quot;Error deserializing key/value for partition &quot;)[1].split(&quot;. If needed, please seek past the record to continue consumption.&quot;)[0];\r\n                String topics = s.split(&quot;-&quot;)[0];\r\n                int offset = Integer.valueOf(s.split(&quot;offset &quot;)[1]);\r\n                int partition = Integer.valueOf(s.split(&quot;-&quot;)[1].split(&quot; at&quot;)[0]);\r\n\r\n                TopicPartition topicPartition = new TopicPartition(topics, partition);\r\n                //log.info(&quot;Skipping &quot; + topic + &quot;-&quot; + partition + &quot; offset &quot; + offset);\r\n                consumer.seek(topicPartition, offset + 1);\r\n                System.out.println(&quot;OKKKKK&quot;);\r\n            }\r\n\r\n            @Override\r\n            public void handle(Exception e, ConsumerRecord&lt;?, ?&gt; consumerRecord) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void handle(Exception e, ConsumerRecord&lt;?, ?&gt; consumerRecord, Consumer&lt;?,?&gt; consumer) {\r\n                String s = e.getMessage().split(&quot;Error deserializing key/value for partition &quot;)[1].split(&quot;. If needed, please seek past the record to continue consumption.&quot;)[0];\r\n                String topics = s.split(&quot;-&quot;)[0];\r\n                int offset = Integer.valueOf(s.split(&quot;offset &quot;)[1]);\r\n                int partition = Integer.valueOf(s.split(&quot;-&quot;)[1].split(&quot; at&quot;)[0]);\r\n\r\n                TopicPartition topicPartition = new TopicPartition(topics, partition);\r\n                //log.info(&quot;Skipping &quot; + topic + &quot;-&quot; + partition + &quot; offset &quot; + offset);\r\n                consumer.seek(topicPartition, offset + 1);\r\n                System.out.println(&quot;OKKKKK&quot;);\r\n\r\n\r\n            }\r\n        });\r\n\r\n\r\n        return factory;\r\n    }\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-kafka/docs/2.2.0.RELEASE/reference/html/_reference.html#error-handling-deserializer\r\n  [2]: https://docs.spring.io/spring-kafka/docs/2.2.0.RELEASE/reference/html/_reference.html#annotation-error-handling","title":"How to catch deserialization error in Kafka-Spring?","body":"<p><a href=\"https://docs.spring.io/spring-kafka/docs/2.2.0.RELEASE/reference/html/_reference.html#error-handling-deserializer\" rel=\"noreferrer\">ErrorHandlingDeserializer</a></p>\n\n<blockquote>\n  <p><strong>When a deserializer fails to deserialize a message, Spring has no way to handle the problem because it occurs before the poll() returns.</strong> To solve this problem, <strong>version 2.2 introduced the ErrorHandlingDeserializer.</strong> This deserializer delegates to a real deserializer (key or value). If the delegate fails to deserialize the record content, the ErrorHandlingDeserializer returns a DeserializationException instead, containing the cause and raw bytes. <strong>When using a record-level MessageListener, if either the key or value contains a DeserializationException, the containers ErrorHandler is called with the failed ConsumerRecord.</strong> When using a BatchMessageListener, the failed record is passed to the application along with the remaining records in the batch, so it is the responsibility of the application listener to check whether the key or value in a particular record is a DeserializationException.</p>\n</blockquote>\n\n<p>So according to your code you are using <code>record-level MessageListener</code> then just add <code>ErrorHandler</code> to <code>Container</code></p>\n\n<p><a href=\"https://docs.spring.io/spring-kafka/docs/2.2.0.RELEASE/reference/html/_reference.html#annotation-error-handling\" rel=\"noreferrer\">Handling Exceptions</a></p>\n\n<blockquote>\n  <p>If your error handler implements this interface you can, for example, adjust the offsets accordingly. For example, to reset the offset to replay the failed message, you could do something like the following; note however, these are simplistic implementations and you would probably want more checking in the error handler.</p>\n</blockquote>\n\n<pre><code>@Bean\npublic ConsumerAwareListenerErrorHandler listen3ErrorHandler() {\nreturn (m, e, c) -&gt; {\n    this.listen3Exception = e;\n    MessageHeaders headers = m.getHeaders();\n    c.seek(new org.apache.kafka.common.TopicPartition(\n            headers.get(KafkaHeaders.RECEIVED_TOPIC, String.class),\n            headers.get(KafkaHeaders.RECEIVED_PARTITION_ID, Integer.class)),\n            headers.get(KafkaHeaders.OFFSET, Long.class));\n    return null;\n   };\n}\n</code></pre>\n\n<p>Or you can do custom implementation like in this example</p>\n\n<pre><code>@Bean\npublic ConcurrentKafkaListenerContainerFactory&lt;String, GenericRecord&gt;\nkafkaListenerContainerFactory()  {\n\n    ConcurrentKafkaListenerContainerFactory&lt;String, GenericRecord&gt; factory\n            = new ConcurrentKafkaListenerContainerFactory&lt;&gt;();\n    factory.setConsumerFactory(consumerFactory());\n    factory.getContainerProperties().setErrorHandler(new ErrorHandler() {\n        @Override\n        public void handle(Exception thrownException, List&lt;ConsumerRecord&lt;?, ?&gt;&gt; records, Consumer&lt;?, ?&gt; consumer, MessageListenerContainer container) {\n            String s = thrownException.getMessage().split(\"Error deserializing key/value for partition \")[1].split(\". If needed, please seek past the record to continue consumption.\")[0];\n            String topics = s.split(\"-\")[0];\n            int offset = Integer.valueOf(s.split(\"offset \")[1]);\n            int partition = Integer.valueOf(s.split(\"-\")[1].split(\" at\")[0]);\n\n            TopicPartition topicPartition = new TopicPartition(topics, partition);\n            //log.info(\"Skipping \" + topic + \"-\" + partition + \" offset \" + offset);\n            consumer.seek(topicPartition, offset + 1);\n            System.out.println(\"OKKKKK\");\n        }\n\n        @Override\n        public void handle(Exception e, ConsumerRecord&lt;?, ?&gt; consumerRecord) {\n\n        }\n\n        @Override\n        public void handle(Exception e, ConsumerRecord&lt;?, ?&gt; consumerRecord, Consumer&lt;?,?&gt; consumer) {\n            String s = e.getMessage().split(\"Error deserializing key/value for partition \")[1].split(\". If needed, please seek past the record to continue consumption.\")[0];\n            String topics = s.split(\"-\")[0];\n            int offset = Integer.valueOf(s.split(\"offset \")[1]);\n            int partition = Integer.valueOf(s.split(\"-\")[1].split(\" at\")[0]);\n\n            TopicPartition topicPartition = new TopicPartition(topics, partition);\n            //log.info(\"Skipping \" + topic + \"-\" + partition + \" offset \" + offset);\n            consumer.seek(topicPartition, offset + 1);\n            System.out.println(\"OKKKKK\");\n\n\n        }\n    });\n\n\n    return factory;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8444814,"reputation":131,"user_id":6335902,"display_name":"Sathish Soundararajan"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1606223595,"creation_date":1606223595,"answer_id":64987273,"question_id":55923893,"body_markdown":"Above answer may have problem if the partion name have character like &#39;-&#39;. so, i have modified same logic with regex.\r\n\r\n        import java.util.List;\r\n        import java.util.regex.Matcher;\r\n        import java.util.regex.Pattern;\r\n        \r\n        import org.apache.kafka.clients.consumer.Consumer;\r\n        import org.apache.kafka.clients.consumer.ConsumerRecord;\r\n        import org.apache.kafka.common.TopicPartition;\r\n        import org.apache.kafka.common.errors.SerializationException;\r\n        import org.springframework.kafka.listener.ErrorHandler;\r\n        import org.springframework.kafka.listener.MessageListenerContainer;\r\n        \r\n        import lombok.extern.slf4j.Slf4j;\r\n        \r\n        @Slf4j\r\n        public class KafkaErrHandler implements ErrorHandler {\r\n        \r\n            /**\r\n             * Method prevents serialization error freeze\r\n             * \r\n             * @param e\r\n             * @param consumer\r\n             */\r\n            private void seekSerializeException(Exception e, Consumer&lt;?, ?&gt; consumer) {\r\n                String p = &quot;.*partition (.*) at offset ([0-9]*).*&quot;;\r\n                Pattern r = Pattern.compile(p);\r\n        \r\n                Matcher m = r.matcher(e.getMessage());\r\n        \r\n                if (m.find()) {\r\n                    int idx = m.group(1).lastIndexOf(&quot;-&quot;);\r\n                    String topics = m.group(1).substring(0, idx);\r\n                    int partition = Integer.parseInt(m.group(1).substring(idx));\r\n                    int offset = Integer.parseInt(m.group(2));\r\n        \r\n                    TopicPartition topicPartition = new TopicPartition(topics, partition);\r\n        \r\n                    consumer.seek(topicPartition, (offset + 1));\r\n        \r\n                    log.info(&quot;Skipped message with offset {} from partition {}&quot;, offset, partition);\r\n                }\r\n            }\r\n        \r\n            @Override\r\n            public void handle(Exception e, ConsumerRecord&lt;?, ?&gt; record, Consumer&lt;?, ?&gt; consumer) {\r\n                log.error(&quot;Error in process with Exception {} and the record is {}&quot;, e, record);\r\n        \r\n                if (e instanceof SerializationException)\r\n                    seekSerializeException(e, consumer);\r\n            }\r\n        \r\n            @Override\r\n            public void handle(Exception e, List&lt;ConsumerRecord&lt;?, ?&gt;&gt; records, Consumer&lt;?, ?&gt; consumer,\r\n                    MessageListenerContainer container) {\r\n                log.error(&quot;Error in process with Exception {} and the records are {}&quot;, e, records);\r\n        \r\n                if (e instanceof SerializationException)\r\n                    seekSerializeException(e, consumer);\r\n        \r\n            }\r\n        \r\n            @Override\r\n            public void handle(Exception e, ConsumerRecord&lt;?, ?&gt; record) {\r\n                log.error(&quot;Error in process with Exception {} and the record is {}&quot;, e, record);\r\n            }\r\n        \r\n        } \r\n\r\nfinally use the error handler in config.\r\n\r\n     @Bean\r\n    public ConcurrentKafkaListenerContainerFactory&lt;String, GenericType&gt; macdStatusListenerFactory() {\r\n\r\n        ConcurrentKafkaListenerContainerFactory&lt;String, GenericType&gt; factory = new ConcurrentKafkaListenerContainerFactory&lt;&gt;();\r\n        factory.setConsumerFactory(macdStatusConsumerFactory());\r\n        factory.setRetryTemplate(retryTemplate());\r\n        factory.setErrorHandler(new KafkaErrHandler());\r\n\r\n        return factory;\r\n    }\r\n\r\n\r\n\r\n\r\nHowever parsing error string to get parition, topic and offset is not recommended. If anyone have better solution please post here.\r\n","title":"How to catch deserialization error in Kafka-Spring?","body":"<p>Above answer may have problem if the partion name have character like '-'. so, i have modified same logic with regex.</p>\n<pre><code>    import java.util.List;\n    import java.util.regex.Matcher;\n    import java.util.regex.Pattern;\n    \n    import org.apache.kafka.clients.consumer.Consumer;\n    import org.apache.kafka.clients.consumer.ConsumerRecord;\n    import org.apache.kafka.common.TopicPartition;\n    import org.apache.kafka.common.errors.SerializationException;\n    import org.springframework.kafka.listener.ErrorHandler;\n    import org.springframework.kafka.listener.MessageListenerContainer;\n    \n    import lombok.extern.slf4j.Slf4j;\n    \n    @Slf4j\n    public class KafkaErrHandler implements ErrorHandler {\n    \n        /**\n         * Method prevents serialization error freeze\n         * \n         * @param e\n         * @param consumer\n         */\n        private void seekSerializeException(Exception e, Consumer&lt;?, ?&gt; consumer) {\n            String p = &quot;.*partition (.*) at offset ([0-9]*).*&quot;;\n            Pattern r = Pattern.compile(p);\n    \n            Matcher m = r.matcher(e.getMessage());\n    \n            if (m.find()) {\n                int idx = m.group(1).lastIndexOf(&quot;-&quot;);\n                String topics = m.group(1).substring(0, idx);\n                int partition = Integer.parseInt(m.group(1).substring(idx));\n                int offset = Integer.parseInt(m.group(2));\n    \n                TopicPartition topicPartition = new TopicPartition(topics, partition);\n    \n                consumer.seek(topicPartition, (offset + 1));\n    \n                log.info(&quot;Skipped message with offset {} from partition {}&quot;, offset, partition);\n            }\n        }\n    \n        @Override\n        public void handle(Exception e, ConsumerRecord&lt;?, ?&gt; record, Consumer&lt;?, ?&gt; consumer) {\n            log.error(&quot;Error in process with Exception {} and the record is {}&quot;, e, record);\n    \n            if (e instanceof SerializationException)\n                seekSerializeException(e, consumer);\n        }\n    \n        @Override\n        public void handle(Exception e, List&lt;ConsumerRecord&lt;?, ?&gt;&gt; records, Consumer&lt;?, ?&gt; consumer,\n                MessageListenerContainer container) {\n            log.error(&quot;Error in process with Exception {} and the records are {}&quot;, e, records);\n    \n            if (e instanceof SerializationException)\n                seekSerializeException(e, consumer);\n    \n        }\n    \n        @Override\n        public void handle(Exception e, ConsumerRecord&lt;?, ?&gt; record) {\n            log.error(&quot;Error in process with Exception {} and the record is {}&quot;, e, record);\n        }\n    \n    } \n</code></pre>\n<p>finally use the error handler in config.</p>\n<pre><code> @Bean\npublic ConcurrentKafkaListenerContainerFactory&lt;String, GenericType&gt; macdStatusListenerFactory() {\n\n    ConcurrentKafkaListenerContainerFactory&lt;String, GenericType&gt; factory = new ConcurrentKafkaListenerContainerFactory&lt;&gt;();\n    factory.setConsumerFactory(macdStatusConsumerFactory());\n    factory.setRetryTemplate(retryTemplate());\n    factory.setErrorHandler(new KafkaErrHandler());\n\n    return factory;\n}\n</code></pre>\n<p>However parsing error string to get parition, topic and offset is not recommended. If anyone have better solution please post here.</p>\n"},{"tags":[],"owner":{"account_id":8444814,"reputation":131,"user_id":6335902,"display_name":"Sathish Soundararajan"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1606392677,"creation_date":1606300903,"answer_id":65003008,"question_id":55923893,"body_markdown":"Use ErrorHandlingDeserializer.\r\n\r\n&gt; When a deserializer fails to deserialize a message, Spring has no way to handle the problem because it occurs before the poll() returns. To solve this problem, version 2.2 introduced the ErrorHandlingDeserializer. This deserializer delegates to a real deserializer (key or value). If the delegate fails to deserialize the record content, the ErrorHandlingDeserializer returns a DeserializationException instead, containing the cause and raw bytes. When using a record-level MessageListener, if either the key or value contains a DeserializationException, the containers ErrorHandler is called with the failed ConsumerRecord. When using a BatchMessageListener, the failed record is passed to the application along with the remaining records in the batch, so it is the responsibility of the application listener to check whether the key or value in a particular record is a DeserializationException.\r\n&gt; \r\n&gt; You can use the DefaultKafkaConsumerFactory constructor that takes key and value Deserializer objects and wire in appropriate ErrorHandlingDeserializer configured with the proper delegates. Alternatively, you can use consumer configuration properties which are used by the ErrorHandlingDeserializer to instantiate the delegates. The property names are ErrorHandlingDeserializer.KEY_DESERIALIZER_CLASS and ErrorHandlingDeserializer.VALUE_DESERIALIZER_CLASS; the property value can be a class or class name\r\n\r\n    package com.mypackage.app.config;\r\n\r\n    import java.util.HashMap;\r\n    import java.util.Map;\r\n    import java.util.concurrent.TimeoutException;\r\n    \r\n    import com.mypacakage.app.model.kafka.message.KafkaEvent;\r\n    \r\n    import org.apache.kafka.clients.consumer.ConsumerConfig;\r\n    import org.apache.kafka.common.serialization.StringDeserializer;\r\n    import org.springframework.beans.factory.annotation.Value;\r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.kafka.annotation.EnableKafka;\r\n    import org.springframework.kafka.config.ConcurrentKafkaListenerContainerFactory;\r\n    import org.springframework.kafka.core.ConsumerFactory;\r\n    import org.springframework.kafka.core.DefaultKafkaConsumerFactory;\r\n    import org.springframework.kafka.listener.ListenerExecutionFailedException;\r\n    import org.springframework.kafka.support.serializer.ErrorHandlingDeserializer;\r\n    import org.springframework.kafka.support.serializer.JsonDeserializer;\r\n    import org.springframework.retry.policy.SimpleRetryPolicy;\r\n    import org.springframework.retry.support.RetryTemplate;\r\n    \r\n    import lombok.extern.slf4j.Slf4j;\r\n    \r\n    @EnableKafka\r\n    @Configuration\r\n    @Slf4j\r\n    public class KafkaConsumerConfig {\r\n    \r\n        @Value(&quot;${kafka.bootstrap-servers}&quot;)\r\n        private String servers;\r\n    \r\n        @Value(&quot;${listener.group-id}&quot;)\r\n        private String groupId;\r\n    \r\n        @Bean\r\n        public ConcurrentKafkaListenerContainerFactory&lt;String, KafkaEvent&gt; ListenerFactory() {\r\n        \r\n            ConcurrentKafkaListenerContainerFactory&lt;String, KafkaEvent&gt; factory = new ConcurrentKafkaListenerContainerFactory&lt;&gt;();\r\n            factory.setConsumerFactory(consumerFactory());\r\n    \r\n            factory.setRetryTemplate(retryTemplate());\r\n            factory.setErrorHandler(((exception, data) -&gt; {\r\n                /*\r\n                 * here you can do you custom handling, I am just logging it same as default\r\n                 * Error handler does If you just want to log. you need not configure the error\r\n                 * handler here. The default handler does it for you. Generally, you will\r\n                 * persist the failed records to DB for tracking the failed records.\r\n                 */\r\n                log.error(&quot;Error in process with Exception {} and the record is {}&quot;, exception, data);\r\n            }));\r\n    \r\n            return factory;\r\n    \r\n        }\r\n    \r\n        @Bean\r\n        public ConsumerFactory&lt;String, KafkaEvent&gt; consumerFactory() {\r\n            Map&lt;String, Object&gt; config = new HashMap&lt;&gt;();\r\n    \r\n            config.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, servers);\r\n            config.put(ConsumerConfig.GROUP_ID_CONFIG, groupId);\r\n    \r\n            config.put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, ErrorHandlingDeserializer.class);\r\n            config.put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, ErrorHandlingDeserializer.class);\r\n            config.put(ErrorHandlingDeserializer.KEY_DESERIALIZER_CLASS, StringDeserializer.class);\r\n            config.put(ErrorHandlingDeserializer.VALUE_DESERIALIZER_CLASS, JsonDeserializer.class.getName());\r\n            config.put(JsonDeserializer.VALUE_DEFAULT_TYPE,\r\n                    &quot;com.mypackage.app.model.kafka.message.KafkaEvent&quot;);\r\n            config.put(JsonDeserializer.TRUSTED_PACKAGES, &quot;com.mypackage.app&quot;);\r\n    \r\n            return new DefaultKafkaConsumerFactory&lt;&gt;(config);\r\n        }\r\n    \r\n        private RetryTemplate retryTemplate() {\r\n            RetryTemplate retryTemplate = new RetryTemplate();\r\n    \r\n            /*\r\n             * here retry policy is used to set the number of attempts to retry and what\r\n             * exceptions you wanted to try and what you don&#39;t want to retry.\r\n             */\r\n            retryTemplate.setRetryPolicy(retryPolicy());\r\n    \r\n            return retryTemplate;\r\n        }\r\n    \r\n        private SimpleRetryPolicy retryPolicy() {\r\n            Map&lt;Class&lt;? extends Throwable&gt;, Boolean&gt; exceptionMap = new HashMap&lt;&gt;();\r\n    \r\n            // the boolean value in the map determines whether exception should be retried\r\n            exceptionMap.put(IllegalArgumentException.class, false);\r\n            exceptionMap.put(TimeoutException.class, true);\r\n            exceptionMap.put(ListenerExecutionFailedException.class, true);\r\n    \r\n            return new SimpleRetryPolicy(3, exceptionMap, true);\r\n        }\r\n    }\r\n    ","title":"How to catch deserialization error in Kafka-Spring?","body":"<p>Use ErrorHandlingDeserializer.</p>\n<blockquote>\n<p>When a deserializer fails to deserialize a message, Spring has no way to handle the problem because it occurs before the poll() returns. To solve this problem, version 2.2 introduced the ErrorHandlingDeserializer. This deserializer delegates to a real deserializer (key or value). If the delegate fails to deserialize the record content, the ErrorHandlingDeserializer returns a DeserializationException instead, containing the cause and raw bytes. When using a record-level MessageListener, if either the key or value contains a DeserializationException, the containers ErrorHandler is called with the failed ConsumerRecord. When using a BatchMessageListener, the failed record is passed to the application along with the remaining records in the batch, so it is the responsibility of the application listener to check whether the key or value in a particular record is a DeserializationException.</p>\n<p>You can use the DefaultKafkaConsumerFactory constructor that takes key and value Deserializer objects and wire in appropriate ErrorHandlingDeserializer configured with the proper delegates. Alternatively, you can use consumer configuration properties which are used by the ErrorHandlingDeserializer to instantiate the delegates. The property names are ErrorHandlingDeserializer.KEY_DESERIALIZER_CLASS and ErrorHandlingDeserializer.VALUE_DESERIALIZER_CLASS; the property value can be a class or class name</p>\n</blockquote>\n<pre><code>package com.mypackage.app.config;\n\nimport java.util.HashMap;\nimport java.util.Map;\nimport java.util.concurrent.TimeoutException;\n\nimport com.mypacakage.app.model.kafka.message.KafkaEvent;\n\nimport org.apache.kafka.clients.consumer.ConsumerConfig;\nimport org.apache.kafka.common.serialization.StringDeserializer;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.kafka.annotation.EnableKafka;\nimport org.springframework.kafka.config.ConcurrentKafkaListenerContainerFactory;\nimport org.springframework.kafka.core.ConsumerFactory;\nimport org.springframework.kafka.core.DefaultKafkaConsumerFactory;\nimport org.springframework.kafka.listener.ListenerExecutionFailedException;\nimport org.springframework.kafka.support.serializer.ErrorHandlingDeserializer;\nimport org.springframework.kafka.support.serializer.JsonDeserializer;\nimport org.springframework.retry.policy.SimpleRetryPolicy;\nimport org.springframework.retry.support.RetryTemplate;\n\nimport lombok.extern.slf4j.Slf4j;\n\n@EnableKafka\n@Configuration\n@Slf4j\npublic class KafkaConsumerConfig {\n\n    @Value(&quot;${kafka.bootstrap-servers}&quot;)\n    private String servers;\n\n    @Value(&quot;${listener.group-id}&quot;)\n    private String groupId;\n\n    @Bean\n    public ConcurrentKafkaListenerContainerFactory&lt;String, KafkaEvent&gt; ListenerFactory() {\n    \n        ConcurrentKafkaListenerContainerFactory&lt;String, KafkaEvent&gt; factory = new ConcurrentKafkaListenerContainerFactory&lt;&gt;();\n        factory.setConsumerFactory(consumerFactory());\n\n        factory.setRetryTemplate(retryTemplate());\n        factory.setErrorHandler(((exception, data) -&gt; {\n            /*\n             * here you can do you custom handling, I am just logging it same as default\n             * Error handler does If you just want to log. you need not configure the error\n             * handler here. The default handler does it for you. Generally, you will\n             * persist the failed records to DB for tracking the failed records.\n             */\n            log.error(&quot;Error in process with Exception {} and the record is {}&quot;, exception, data);\n        }));\n\n        return factory;\n\n    }\n\n    @Bean\n    public ConsumerFactory&lt;String, KafkaEvent&gt; consumerFactory() {\n        Map&lt;String, Object&gt; config = new HashMap&lt;&gt;();\n\n        config.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, servers);\n        config.put(ConsumerConfig.GROUP_ID_CONFIG, groupId);\n\n        config.put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, ErrorHandlingDeserializer.class);\n        config.put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, ErrorHandlingDeserializer.class);\n        config.put(ErrorHandlingDeserializer.KEY_DESERIALIZER_CLASS, StringDeserializer.class);\n        config.put(ErrorHandlingDeserializer.VALUE_DESERIALIZER_CLASS, JsonDeserializer.class.getName());\n        config.put(JsonDeserializer.VALUE_DEFAULT_TYPE,\n                &quot;com.mypackage.app.model.kafka.message.KafkaEvent&quot;);\n        config.put(JsonDeserializer.TRUSTED_PACKAGES, &quot;com.mypackage.app&quot;);\n\n        return new DefaultKafkaConsumerFactory&lt;&gt;(config);\n    }\n\n    private RetryTemplate retryTemplate() {\n        RetryTemplate retryTemplate = new RetryTemplate();\n\n        /*\n         * here retry policy is used to set the number of attempts to retry and what\n         * exceptions you wanted to try and what you don't want to retry.\n         */\n        retryTemplate.setRetryPolicy(retryPolicy());\n\n        return retryTemplate;\n    }\n\n    private SimpleRetryPolicy retryPolicy() {\n        Map&lt;Class&lt;? extends Throwable&gt;, Boolean&gt; exceptionMap = new HashMap&lt;&gt;();\n\n        // the boolean value in the map determines whether exception should be retried\n        exceptionMap.put(IllegalArgumentException.class, false);\n        exceptionMap.put(TimeoutException.class, true);\n        exceptionMap.put(ListenerExecutionFailedException.class, true);\n\n        return new SimpleRetryPolicy(3, exceptionMap, true);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1709850,"reputation":2020,"user_id":1568120,"accept_rate":57,"display_name":"Ging3r"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1663679131,"creation_date":1663679131,"answer_id":73787207,"question_id":55923893,"body_markdown":"in my factory I&#39;ve added commonErrorHander\r\n\r\n    factory.setCommonErrorHandler(new KafkaMessageErrorHandler());\r\n\r\nand `KafkaMessageErrorHandler` is created as follow\r\n    \r\n    class KafkaMessageErrorHandler implements CommonErrorHandler {\r\n\r\n        @Override\r\n        public void handleRecord(Exception thrownException, ConsumerRecord&lt;?, ?&gt; record, Consumer&lt;?, ?&gt; consumer, MessageListenerContainer container) {\r\n            manageException(thrownException, consumer);\r\n        }\r\n\r\n        @Override\r\n        public void handleOtherException(Exception thrownException, Consumer&lt;?, ?&gt; consumer, MessageListenerContainer container, boolean batchListener) {\r\n            manageException(thrownException, consumer);\r\n        }\r\n\r\n        private void manageException(Exception ex, Consumer&lt;?, ?&gt; consumer) {\r\n            log.error(&quot;Error polling message: &quot; + ex.getMessage());\r\n            if (ex instanceof RecordDeserializationException) {\r\n                RecordDeserializationException rde = (RecordDeserializationException) ex;\r\n                consumer.seek(rde.topicPartition(), rde.offset() + 1L);\r\n                consumer.commitSync();\r\n            } else {\r\n                log.error(&quot;Exception not handled&quot;);\r\n            }\r\n        }\r\n    }\r\n","title":"How to catch deserialization error in Kafka-Spring?","body":"<p>in my factory I've added commonErrorHander</p>\n<pre><code>factory.setCommonErrorHandler(new KafkaMessageErrorHandler());\n</code></pre>\n<p>and <code>KafkaMessageErrorHandler</code> is created as follow</p>\n<pre><code>class KafkaMessageErrorHandler implements CommonErrorHandler {\n\n    @Override\n    public void handleRecord(Exception thrownException, ConsumerRecord&lt;?, ?&gt; record, Consumer&lt;?, ?&gt; consumer, MessageListenerContainer container) {\n        manageException(thrownException, consumer);\n    }\n\n    @Override\n    public void handleOtherException(Exception thrownException, Consumer&lt;?, ?&gt; consumer, MessageListenerContainer container, boolean batchListener) {\n        manageException(thrownException, consumer);\n    }\n\n    private void manageException(Exception ex, Consumer&lt;?, ?&gt; consumer) {\n        log.error(&quot;Error polling message: &quot; + ex.getMessage());\n        if (ex instanceof RecordDeserializationException) {\n            RecordDeserializationException rde = (RecordDeserializationException) ex;\n            consumer.seek(rde.topicPartition(), rde.offset() + 1L);\n            consumer.commitSync();\n        } else {\n            log.error(&quot;Exception not handled&quot;);\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":5226352,"reputation":337,"user_id":4178286,"accept_rate":17,"display_name":"Pietro Fragnito"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46532,"favorite_count":0,"down_vote_count":1,"up_vote_count":12,"accepted_answer_id":55927413,"answer_count":4,"score":11,"last_activity_date":1663679131,"creation_date":1556636982,"question_id":55923893,"body_markdown":"I&#39;m getting up an application consuming kafka messages.\r\n\r\nI followed [Spring-docs](https://docs.spring.io/spring-kafka/docs/2.2.4.RELEASE/reference/#error-handling-deserializer) about Deserialization Error Handling in order to catch deserialization exception. I&#39;ve tried the failedDeserializationFunction method.\r\n\r\nThis is my Consumer Configuration Class\r\n\r\n```\r\n@Bean\r\n\tpublic Map&lt;String, Object&gt; consumerConfigs() {\r\n\t\tMap&lt;String, Object&gt; consumerProps = new HashMap&lt;&gt;();\r\n\t\tconsumerProps.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, bootstrapServers);\r\n\t\tconsumerProps.put(ConsumerConfig.GROUP_ID_CONFIG, groupId);\r\n\t\tconsumerProps.put(ConsumerConfig.AUTO_OFFSET_RESET_CONFIG, offsetReset);\r\n\t\tconsumerProps.put(ConsumerConfig.ENABLE_AUTO_COMMIT_CONFIG, autoCommit);\r\n\t\t\r\n\t\t/*  Error Handling */\r\n\t\tconsumerProps.put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, ErrorHandlingDeserializer2.class);\r\n\t\tconsumerProps.put(ErrorHandlingDeserializer2.VALUE_DESERIALIZER_CLASS, JsonDeserializer.class.getName());\r\n\t\tconsumerProps.put(ErrorHandlingDeserializer2.VALUE_FUNCTION, FailedNTCMessageBodyProvider.class);\r\n\r\n\t\treturn consumerProps;\r\n\t}\r\n\r\n\t@Bean\r\n\tpublic ConsumerFactory&lt;String, NTCMessageBody&gt; consumerFactory() {\r\n\t\treturn new DefaultKafkaConsumerFactory&lt;&gt;(consumerConfigs(), new StringDeserializer(),\r\n\t\t\t\tnew JsonDeserializer&lt;&gt;(NTCMessageBody.class));\r\n\t}\r\n\t\r\n\t@Bean\r\n\tpublic ConcurrentKafkaListenerContainerFactory&lt;String, NTCMessageBody&gt; kafkaListenerContainerFactory() {\r\n\t\tConcurrentKafkaListenerContainerFactory&lt;String, NTCMessageBody&gt; factory = new ConcurrentKafkaListenerContainerFactory&lt;&gt;();\r\n\t\tfactory.setConsumerFactory(consumerFactory());\r\n\r\n\t\treturn factory;\r\n\t}\r\n```\r\n\r\nThis is the BiFunction Provider\r\n\r\n```\r\npublic class FailedNTCMessageBodyProvider implements BiFunction&lt;byte[], Headers, NTCMessageBody&gt; {\r\n\r\n\t@Override\r\n\tpublic NTCMessageBody apply(byte[] t, Headers u) {\r\n\t\treturn new NTCBadMessageBody(t);\r\n\t}\r\n\r\n}\r\n\r\npublic class NTCBadMessageBody extends NTCMessageBody{\r\n\r\n\tprivate final byte[] failedDecode;\r\n\r\n\tpublic NTCBadMessageBody(byte[] failedDecode) {\r\n\t\tthis.failedDecode = failedDecode;\r\n\t}\r\n\r\n\tpublic byte[] getFailedDecode() {\r\n\t\treturn this.failedDecode;\r\n\t}\r\n\r\n}\r\n\r\n```\r\n\r\nWhen I send just one corrupted message on the topic I got this error (in loop):\r\n\r\norg.apache.kafka.common.errors.SerializationException: Error deserializing key/value\r\n\r\nI understood that the ErrorHandlingDeserializer2 should delegate the NTCBadMessageBody type and continue the consumption. I also saw (in debug mode) it didn&#39;t never go in the constructor of the NTCBadMessageBody class.","title":"How to catch deserialization error in Kafka-Spring?","body":"<p>I'm getting up an application consuming kafka messages.</p>\n<p>I followed <a href=\"https://docs.spring.io/spring-kafka/docs/2.2.4.RELEASE/reference/#error-handling-deserializer\" rel=\"noreferrer\">Spring-docs</a> about Deserialization Error Handling in order to catch deserialization exception. I've tried the failedDeserializationFunction method.</p>\n<p>This is my Consumer Configuration Class</p>\n<pre><code>@Bean\n    public Map&lt;String, Object&gt; consumerConfigs() {\n        Map&lt;String, Object&gt; consumerProps = new HashMap&lt;&gt;();\n        consumerProps.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, bootstrapServers);\n        consumerProps.put(ConsumerConfig.GROUP_ID_CONFIG, groupId);\n        consumerProps.put(ConsumerConfig.AUTO_OFFSET_RESET_CONFIG, offsetReset);\n        consumerProps.put(ConsumerConfig.ENABLE_AUTO_COMMIT_CONFIG, autoCommit);\n        \n        /*  Error Handling */\n        consumerProps.put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, ErrorHandlingDeserializer2.class);\n        consumerProps.put(ErrorHandlingDeserializer2.VALUE_DESERIALIZER_CLASS, JsonDeserializer.class.getName());\n        consumerProps.put(ErrorHandlingDeserializer2.VALUE_FUNCTION, FailedNTCMessageBodyProvider.class);\n\n        return consumerProps;\n    }\n\n    @Bean\n    public ConsumerFactory&lt;String, NTCMessageBody&gt; consumerFactory() {\n        return new DefaultKafkaConsumerFactory&lt;&gt;(consumerConfigs(), new StringDeserializer(),\n                new JsonDeserializer&lt;&gt;(NTCMessageBody.class));\n    }\n    \n    @Bean\n    public ConcurrentKafkaListenerContainerFactory&lt;String, NTCMessageBody&gt; kafkaListenerContainerFactory() {\n        ConcurrentKafkaListenerContainerFactory&lt;String, NTCMessageBody&gt; factory = new ConcurrentKafkaListenerContainerFactory&lt;&gt;();\n        factory.setConsumerFactory(consumerFactory());\n\n        return factory;\n    }\n</code></pre>\n<p>This is the BiFunction Provider</p>\n<pre><code>public class FailedNTCMessageBodyProvider implements BiFunction&lt;byte[], Headers, NTCMessageBody&gt; {\n\n    @Override\n    public NTCMessageBody apply(byte[] t, Headers u) {\n        return new NTCBadMessageBody(t);\n    }\n\n}\n\npublic class NTCBadMessageBody extends NTCMessageBody{\n\n    private final byte[] failedDecode;\n\n    public NTCBadMessageBody(byte[] failedDecode) {\n        this.failedDecode = failedDecode;\n    }\n\n    public byte[] getFailedDecode() {\n        return this.failedDecode;\n    }\n\n}\n\n</code></pre>\n<p>When I send just one corrupted message on the topic I got this error (in loop):</p>\n<p>org.apache.kafka.common.errors.SerializationException: Error deserializing key/value</p>\n<p>I understood that the ErrorHandlingDeserializer2 should delegate the NTCBadMessageBody type and continue the consumption. I also saw (in debug mode) it didn't never go in the constructor of the NTCBadMessageBody class.</p>\n"},{"tags":["java","spring","spring-session"],"comments":[{"owner":{"account_id":1782099,"reputation":843,"user_id":1624551,"display_name":"Pao"},"score":0,"creation_date":1663680939,"post_id":73774027,"comment_id":130293406,"body_markdown":"It is generally not a good idea to store too much data in your session, certainly not whole controllers. That being said, i have seen solutions where the session handling is left to Spring and certain elements, e.g. auth data, are sent to Redis by using Spring&#39;s RedisTemplate.","body":"It is generally not a good idea to store too much data in your session, certainly not whole controllers. That being said, i have seen solutions where the session handling is left to Spring and certain elements, e.g. auth data, are sent to Redis by using Spring&#39;s RedisTemplate."},{"owner":{"account_id":18111266,"reputation":1,"user_id":13168290,"display_name":"Micha Budzio"},"score":0,"creation_date":1663753840,"post_id":73774027,"comment_id":130311874,"body_markdown":"@Pao do you have any example? Where did you see it? I searched for just such a solution on github, but did not find it.","body":"@Pao do you have any example? Where did you see it? I searched for just such a solution on github, but did not find it."},{"owner":{"account_id":1782099,"reputation":843,"user_id":1624551,"display_name":"Pao"},"score":0,"creation_date":1663760859,"post_id":73774027,"comment_id":130314313,"body_markdown":"It was not my code, so i can&#39;t share it, and i don&#39;t remember it exactly, but i think in essence the default Spring session was used and additionally a simple Spring component with a RedisTemplate&lt;K, V&gt; talked with Redis, mainly sending the data that was required for sessions of other applications. The downside is that you have do the communication with Redis on your own. IIRC the goal was to not share the whole session, like in your case, but limit it to the required data.","body":"It was not my code, so i can&#39;t share it, and i don&#39;t remember it exactly, but i think in essence the default Spring session was used and additionally a simple Spring component with a RedisTemplate&lt;K, V&gt; talked with Redis, mainly sending the data that was required for sessions of other applications. The downside is that you have do the communication with Redis on your own. IIRC the goal was to not share the whole session, like in your case, but limit it to the required data."}],"owner":{"account_id":18111266,"reputation":1,"user_id":13168290,"display_name":"Micha Budzio"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1663678939,"creation_date":1663593626,"question_id":73774027,"body_markdown":"I&#39;m using Spring-boot, spring-security and spring-session + redis. \r\nMy web application stores a lot of information in HTTP Session, for example Controllers because it is JSF and I use ViewScope.\r\n\r\nDo you have any ideas how to limit the classes that should be stored in redis? Or limit session attributes? Is there any option to choose which HTTP session data should be stored by spring-session in redis? \r\n\r\nFor example, I would like to store in redis only authentication-related data (Spring Security), but omit my old Controllers (controllers still \r\nneed to be stored in HTTP session).\r\n","title":"Spring session - customize session content","body":"<p>I'm using Spring-boot, spring-security and spring-session + redis.\nMy web application stores a lot of information in HTTP Session, for example Controllers because it is JSF and I use ViewScope.</p>\n<p>Do you have any ideas how to limit the classes that should be stored in redis? Or limit session attributes? Is there any option to choose which HTTP session data should be stored by spring-session in redis?</p>\n<p>For example, I would like to store in redis only authentication-related data (Spring Security), but omit my old Controllers (controllers still\nneed to be stored in HTTP session).</p>\n"},{"tags":["java","swing","user-interface","tooltip"],"comments":[{"owner":{"account_id":1352170,"reputation":34246,"user_id":1291492,"accept_rate":100,"display_name":"ControlAltDel"},"score":0,"creation_date":1663680465,"post_id":73787134,"comment_id":130293211,"body_markdown":"Back in the day, I created an AreaManager. I think it would be worth your time to check out (https://sourceforge.net/p/tus/code/HEAD/tree/tjacobs/ui/shape/)","body":"Back in the day, I created an AreaManager. I think it would be worth your time to check out (<a href=\"https://sourceforge.net/p/tus/code/HEAD/tree/tjacobs/ui/shape/\" rel=\"nofollow noreferrer\">sourceforge.net/p/tus/code/HEAD/tree/tjacobs/ui/shape</a>)"},{"owner":{"account_id":1352170,"reputation":34246,"user_id":1291492,"accept_rate":100,"display_name":"ControlAltDel"},"score":0,"creation_date":1663680627,"post_id":73787134,"comment_id":130293279,"body_markdown":"It doesn&#39;t have &quot;tooltip&quot; capabilities, but if you look at Buttonize, you should start to get ideas about how you could create a JLabel in the popup layer in a JLayeredPane (Instead of a JPanel)","body":"It doesn&#39;t have &quot;tooltip&quot; capabilities, but if you look at Buttonize, you should start to get ideas about how you could create a JLabel in the popup layer in a JLayeredPane (Instead of a JPanel)"},{"owner":{"account_id":26384091,"reputation":1,"user_id":20036897,"display_name":"mgwqiwdd"},"score":0,"creation_date":1663681700,"post_id":73787134,"comment_id":130293762,"body_markdown":"@ControlAltDel Do you perhaps know of any components that I can use instead of an ellipse that has built-in tooltip functionality? It doesn&#39;t have to be an ellipse specifically; I was looking at ImageIcon but I don&#39;t think that has tooltip functionality either.","body":"@ControlAltDel Do you perhaps know of any components that I can use instead of an ellipse that has built-in tooltip functionality? It doesn&#39;t have to be an ellipse specifically; I was looking at ImageIcon but I don&#39;t think that has tooltip functionality either."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1663681861,"post_id":73787134,"comment_id":130293830,"body_markdown":"You definitely need to remove `setToolTipText` from your drawCoordinates method.  Never modify a components state while painting it.  Your `getToolTipText` implementation looks correct;  perhaps there is an issue with the Coordinate.contains method, or perhaps `initOrigin()` is applying a transformation that is causing the coordinates visible locations to differ from the x and y in the data?","body":"You definitely need to remove <code>setToolTipText</code> from your drawCoordinates method.  Never modify a components state while painting it.  Your <code>getToolTipText</code> implementation looks correct;  perhaps there is an issue with the Coordinate.contains method, or perhaps <code>initOrigin()</code> is applying a transformation that is causing the coordinates visible locations to differ from the x and y in the data?"},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1663682495,"post_id":73787134,"comment_id":130294127,"body_markdown":"Setting the tool tip text in the drawCoordinates() method doesn&#39;t help. This will always set the text to the last coordinate painted. You need to: 1) set the tool tip text to an empty value when the component is created to register tooltip processing for the component. 2) Override the `getToolTipLocation()` method to the placement of the tool top vollows the mouse. 3) Check out: https://stackoverflow.com/questions/7138914/swing-how-to-create-a-custom-jtooltip-like-widget-that-moves-with-the-mouse/7139057#7139057 for a basic example to get you started.","body":"Setting the tool tip text in the drawCoordinates() method doesn&#39;t help. This will always set the text to the last coordinate painted. You need to: 1) set the tool tip text to an empty value when the component is created to register tooltip processing for the component. 2) Override the <code>getToolTipLocation()</code> method to the placement of the tool top vollows the mouse. 3) Check out: <a href=\"https://stackoverflow.com/questions/7138914/swing-how-to-create-a-custom-jtooltip-like-widget-that-moves-with-the-mouse/7139057#7139057\" title=\"swing how to create a custom jtooltip like widget that moves with the mouse\">stackoverflow.com/questions/7138914/&hellip;</a> for a basic example to get you started."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1663682810,"post_id":73787134,"comment_id":130294267,"body_markdown":"*I can&#39;t get it to work properly* - define what that means when asking a question. We can&#39;t guess what behaviour you see. Tell us what happens and what you expect to happen. For example, to you ever see a tooltip? If so, does the text ever change?","body":"<i>I can&#39;t get it to work properly</i> - define what that means when asking a question. We can&#39;t guess what behaviour you see. Tell us what happens and what you expect to happen. For example, to you ever see a tooltip? If so, does the text ever change?"},{"owner":{"account_id":1352170,"reputation":34246,"user_id":1291492,"accept_rate":100,"display_name":"ControlAltDel"},"score":0,"creation_date":1663684354,"post_id":73787134,"comment_id":130294851,"body_markdown":"@mgwqiwdd &quot;... instead of an ellipse&quot; There are plenty of components both in J2SE and on GitHub. The issue is that (J)Component is defined as being a rectangle (x,y,width,height) if you want non-rectangular components, you will need something like what I created","body":"@mgwqiwdd &quot;... instead of an ellipse&quot; There are plenty of components both in J2SE and on GitHub. The issue is that (J)Component is defined as being a rectangle (x,y,width,height) if you want non-rectangular components, you will need something like what I created"}],"owner":{"account_id":26384091,"reputation":1,"user_id":20036897,"display_name":"mgwqiwdd"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1663678765,"creation_date":1663678765,"question_id":73787134,"body_markdown":"I have a program that draws coordinates to a screen. I need to add functionality that displays a tooltip with its location when hovering over each point. However, I can&#39;t get it to work properly and I&#39;m not sure why.\r\n\r\nCoordinate class:\r\n```\r\npublic class Coordinate extends Ellipse2D.Double {\r\n    private Point point;\r\n    private String name;\r\n    private int radius;\r\n\r\n    public Coordinate(Point point, String name, int radius) {\r\n        super(point.getX(), point.getY(), radius, radius);\r\n        this.point = point;\r\n        this.name = name;\r\n        this.radius = radius;\r\n    }\r\n}\r\n\r\n```\r\n\r\nGrid class:\r\n```\r\nprotected void paintComponent(Graphics graphics) {\r\n        initOrigin();\r\n        super.paintComponent(graphics);\r\n\r\n        graphics.drawLine(0, getHeight() / 2, getWidth(), getHeight() / 2);\r\n\r\n        // draw Y axis\r\n        graphics.drawLine(getWidth() / 2, 0, getWidth() / 2, getHeight());\r\n        if (coordinates != null) {\r\n            drawCoordinates(graphics);\r\n        }\r\n    }\r\n\r\n    protected void drawCoordinates(Graphics graphics) {\r\n        System.out.println(coordinates.toString());\r\n        for (int i = 0; i &lt; this.coordinates.size(); i++) {\r\n            int radius = coordinates.get(i).getRadius();\r\n            int x = (int) Math.round(coordinates.get(i).getPoint().x * X_SCALING) + originX;\r\n            int y = (int) Math.round(coordinates.get(i).getPoint().y * -1 * Y_SCALING) + originY; // flip bit to get vertical coordinates in proper place\r\n            System.out.println(x);\r\n            System.out.println(y);\r\n            graphics.fillOval(x - radius, y - radius, radius * 2, radius * 2);\r\n            setToolTipText(coordinates.get(i).toString());\r\n\r\n        }\r\n    }\r\n\r\n@Override\r\n    public String getToolTipText(MouseEvent event) {\r\n        for (Coordinate coordinate : coordinates) {\r\n            if (coordinate.contains(event.getPoint())) {\r\n                return coordinate.toString();\r\n            }\r\n\r\n        }\r\n        return null;\r\n    }\r\n```\r\n\r\nI&#39;m setting the tooltip in the ```drawCoordinates()``` method and overriding the ```getToolTip()``` method as well but nothing is popping up. Obviously I&#39;m missing something but I&#39;m not sure where to start. Can anyone point me in the right direction?","title":"ToolTip for components that are not JComponent (Ellipse)","body":"<p>I have a program that draws coordinates to a screen. I need to add functionality that displays a tooltip with its location when hovering over each point. However, I can't get it to work properly and I'm not sure why.</p>\n<p>Coordinate class:</p>\n<pre><code>public class Coordinate extends Ellipse2D.Double {\n    private Point point;\n    private String name;\n    private int radius;\n\n    public Coordinate(Point point, String name, int radius) {\n        super(point.getX(), point.getY(), radius, radius);\n        this.point = point;\n        this.name = name;\n        this.radius = radius;\n    }\n}\n\n</code></pre>\n<p>Grid class:</p>\n<pre><code>protected void paintComponent(Graphics graphics) {\n        initOrigin();\n        super.paintComponent(graphics);\n\n        graphics.drawLine(0, getHeight() / 2, getWidth(), getHeight() / 2);\n\n        // draw Y axis\n        graphics.drawLine(getWidth() / 2, 0, getWidth() / 2, getHeight());\n        if (coordinates != null) {\n            drawCoordinates(graphics);\n        }\n    }\n\n    protected void drawCoordinates(Graphics graphics) {\n        System.out.println(coordinates.toString());\n        for (int i = 0; i &lt; this.coordinates.size(); i++) {\n            int radius = coordinates.get(i).getRadius();\n            int x = (int) Math.round(coordinates.get(i).getPoint().x * X_SCALING) + originX;\n            int y = (int) Math.round(coordinates.get(i).getPoint().y * -1 * Y_SCALING) + originY; // flip bit to get vertical coordinates in proper place\n            System.out.println(x);\n            System.out.println(y);\n            graphics.fillOval(x - radius, y - radius, radius * 2, radius * 2);\n            setToolTipText(coordinates.get(i).toString());\n\n        }\n    }\n\n@Override\n    public String getToolTipText(MouseEvent event) {\n        for (Coordinate coordinate : coordinates) {\n            if (coordinate.contains(event.getPoint())) {\n                return coordinate.toString();\n            }\n\n        }\n        return null;\n    }\n</code></pre>\n<p>I'm setting the tooltip in the <code>drawCoordinates()</code> method and overriding the <code>getToolTip()</code> method as well but nothing is popping up. Obviously I'm missing something but I'm not sure where to start. Can anyone point me in the right direction?</p>\n"},{"tags":["java","optimization","constants"],"comments":[{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1471430636,"post_id":38994306,"comment_id":65340593,"body_markdown":"Your question is answered in the comment included in your question.","body":"Your question is answered in the comment included in your question."},{"owner":{"account_id":283609,"reputation":45044,"user_id":581205,"accept_rate":72,"display_name":"maaartinus"},"score":2,"creation_date":1471433933,"post_id":38994306,"comment_id":65342813,"body_markdown":"@Kayaman As you can see in the answer, there&#39;s more behind it.","body":"@Kayaman As you can see in the answer, there&#39;s more behind it."}],"answers":[{"tags":[],"owner":{"account_id":1883267,"reputation":7504,"user_id":1702990,"display_name":"Sinkingpoint"},"down_vote_count":0,"up_vote_count":16,"is_accepted":true,"score":16,"last_activity_date":1663678182,"creation_date":1471431114,"answer_id":38994612,"question_id":38994306,"body_markdown":"TLDR: It&#39;s an example of [Fibonacci hashing](https://web.archive.org/web/20161121124236/http://brpreiss.com/books/opus4/html/page214.html). \r\n\r\nIf you convert 0x61c88647 into decimal, you&#39;ll get 1640531527 which is nonsensical until you realise that in 32 bits, it&#39;s the signed version of 2654435769. Again this number seems a bit odd until you realise that it is  2&lt;sup&gt;32&lt;/sup&gt; &amp;divide; &amp;phi; where &amp;phi; is the golden ratio (&amp;radic;5&amp;plus;1)&amp;divide;2.\r\n\r\nNow how does this fit into ThreadLocal? When you create a new ThreadLocal it is assigned an ID based on the previous id + our magic number. It&#39;s put into a ThreadLocalMap. In the event of a clash, the ThreadLocalMap puts the value into the next available space. Our magic value allows an optimal &quot;spreading out&quot; of the values in this hash in order to avoid this.","title":"What is the meaning of 0x61C88647 constant in ThreadLocal.java","body":"<p>TLDR: It's an example of <a href=\"https://web.archive.org/web/20161121124236/http://brpreiss.com/books/opus4/html/page214.html\" rel=\"nofollow noreferrer\">Fibonacci hashing</a>.</p>\n<p>If you convert 0x61c88647 into decimal, you'll get 1640531527 which is nonsensical until you realise that in 32 bits, it's the signed version of 2654435769. Again this number seems a bit odd until you realise that it is  2<sup>32</sup>   where  is the golden ratio (5+1)2.</p>\n<p>Now how does this fit into ThreadLocal? When you create a new ThreadLocal it is assigned an ID based on the previous id + our magic number. It's put into a ThreadLocalMap. In the event of a clash, the ThreadLocalMap puts the value into the next available space. Our magic value allows an optimal &quot;spreading out&quot; of the values in this hash in order to avoid this.</p>\n"},{"tags":[],"owner":{"account_id":6555617,"reputation":11,"user_id":5068408,"display_name":""},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1538260998,"creation_date":1538260998,"answer_id":52573145,"question_id":38994306,"body_markdown":"0x61c88647 = 1640531527  2 ^ 32 * (1 - 1 / ),  = (5 + 1) &#247; 2, it is an another Golden ratio Num of 32 bits.\r\n","title":"What is the meaning of 0x61C88647 constant in ThreadLocal.java","body":"<p>0x61c88647 = 1640531527  2 ^ 32 * (1 - 1 / ),  = (5 + 1)  2, it is an another Golden ratio Num of 32 bits.</p>\n"}],"owner":{"account_id":60766,"reputation":6021,"user_id":181406,"accept_rate":52,"display_name":"Adrian"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3247,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":38994612,"answer_count":2,"score":6,"last_activity_date":1663678182,"creation_date":1471430308,"question_id":38994306,"body_markdown":"I recently read an article about [Equation Group&#39;s Sophisticated Hacking][1] and the smoking gun is a constant which also appears in JDK 8 source code e.g. [ThreadLocal.java][2]\r\n\r\nWhat is the meaning of HASH_INCREMENT constant and how does it improve performance?\r\n\r\n    /**\r\n     * The difference between successively generated hash codes - turns\r\n     * implicit sequential thread-local IDs into near-optimally spread\r\n     * multiplicative hash values for power-of-two-sized tables.\r\n     */\r\n    private static final int HASH_INCREMENT = 0x61c88647;\r\n\r\n  [1]: http://arstechnica.co.uk/security/2016/08/code-dumped-online-came-from-omnipotent-nsa-tied-hacking-group/\r\n  [2]: http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/tip/src/share/classes/java/lang/ThreadLocal.java","title":"What is the meaning of 0x61C88647 constant in ThreadLocal.java","body":"<p>I recently read an article about <a href=\"http://arstechnica.co.uk/security/2016/08/code-dumped-online-came-from-omnipotent-nsa-tied-hacking-group/\" rel=\"nofollow\">Equation Group's Sophisticated Hacking</a> and the smoking gun is a constant which also appears in JDK 8 source code e.g. <a href=\"http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/tip/src/share/classes/java/lang/ThreadLocal.java\" rel=\"nofollow\">ThreadLocal.java</a></p>\n\n<p>What is the meaning of HASH_INCREMENT constant and how does it improve performance?</p>\n\n<pre><code>/**\n * The difference between successively generated hash codes - turns\n * implicit sequential thread-local IDs into near-optimally spread\n * multiplicative hash values for power-of-two-sized tables.\n */\nprivate static final int HASH_INCREMENT = 0x61c88647;\n</code></pre>\n"},{"tags":["java","android","android-studio","android-audiomanager"],"comments":[{"owner":{"account_id":12438275,"reputation":1057,"user_id":9057721,"display_name":"Style-7"},"score":0,"creation_date":1658851342,"post_id":73125363,"comment_id":129152393,"body_markdown":"I think no. You must respect user settings.","body":"I think no. You must respect user settings."}],"answers":[{"tags":[],"owner":{"account_id":12918840,"reputation":363,"user_id":9342060,"display_name":"Surendar Dharavath"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663678092,"creation_date":1663678092,"answer_id":73786975,"question_id":73125363,"body_markdown":"Yes, you can adjust notification sound alone by calling [AudioManager.setStreamVolume][1]\r\n\r\nExample:\r\n\r\n    val audioManager = getSystemService(AUDIO_SERVICE) as AudioManager\r\n    val notificationMaxVol = audioManager.getStreamMaxVolume(AudioManager.STREAM_NOTIFICATION) \r\n    audioManager.setStreamVolume(AudioManager.STREAM_NOTIFICATION, notificationMaxVol, 0)\r\n\r\n**Note**: You must get **Do Not disturb access** for your app before calling the above method.\r\n\r\n  [1]: https://developer.android.com/reference/kotlin/android/media/AudioManager#setstreamvolume","title":"Adjust notification sound volume on android","body":"<p>Yes, you can adjust notification sound alone by calling <a href=\"https://developer.android.com/reference/kotlin/android/media/AudioManager#setstreamvolume\" rel=\"nofollow noreferrer\">AudioManager.setStreamVolume</a></p>\n<p>Example:</p>\n<pre><code>val audioManager = getSystemService(AUDIO_SERVICE) as AudioManager\nval notificationMaxVol = audioManager.getStreamMaxVolume(AudioManager.STREAM_NOTIFICATION) \naudioManager.setStreamVolume(AudioManager.STREAM_NOTIFICATION, notificationMaxVol, 0)\n</code></pre>\n<p><strong>Note</strong>: You must get <strong>Do Not disturb access</strong> for your app before calling the above method.</p>\n"}],"owner":{"account_id":25335247,"reputation":23,"user_id":19154488,"display_name":"Kali C"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":646,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1663678092,"creation_date":1658846229,"question_id":73125363,"body_markdown":"Is there any way to adjust notification sound volume without adjusting media / call volume?\r\n\r\nI want to set notification volume to the max level while keeping current media / call volume level.\r\n\r\nThanks in advance!\r\n\r\nCurrently using Java on Android Studio","title":"Adjust notification sound volume on android","body":"<p>Is there any way to adjust notification sound volume without adjusting media / call volume?</p>\n<p>I want to set notification volume to the max level while keeping current media / call volume level.</p>\n<p>Thanks in advance!</p>\n<p>Currently using Java on Android Studio</p>\n"},{"tags":["java","graphstream"],"comments":[{"owner":{"account_id":10777133,"reputation":7282,"user_id":7928721,"display_name":"samabcde"},"score":0,"creation_date":1656164986,"post_id":72753879,"comment_id":128507501,"body_markdown":"Which version are you referring? I don&#39;t see `addAttribute` in Element for version 2.0","body":"Which version are you referring? I don&#39;t see <code>addAttribute</code> in Element for version 2.0"},{"owner":{"account_id":12527777,"reputation":584,"user_id":9116959,"display_name":"Kfir Ettinger"},"score":0,"creation_date":1656181573,"post_id":72753879,"comment_id":128510906,"body_markdown":"I&#39;m using version 1.3, thanks for the input, the hyper link was deleted by mistake.","body":"I&#39;m using version 1.3, thanks for the input, the hyper link was deleted by mistake."},{"owner":{"account_id":21009405,"reputation":654,"user_id":15438360,"display_name":"Muhammad Khuzaima Umair"},"score":0,"creation_date":1656186905,"post_id":72753879,"comment_id":128512035,"body_markdown":"probably `consistency` means avoiding duplicates","body":"probably <code>consistency</code> means avoiding duplicates"}],"answers":[{"tags":[],"owner":{"account_id":4635391,"reputation":1131,"user_id":3756780,"display_name":"slindenau"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1663678055,"creation_date":1663676154,"answer_id":73786559,"question_id":72753879,"body_markdown":"It is most likely that they mean `api consistency` with this wording; overall consistency between their own API or what developers might expect to find in general in the API of a Java library. \r\n\r\nFor example `properties` on Java Beans (pojo&#39;s) are usually implemented as `getter` and `setter` methods by convention (rather than language features, as can be found in [C#](https://stackoverflow.com/questions/2963243/does-java-have-something-similar-to-c-sharp-properties)). \r\n\r\nSo perhaps the `graphstream` devs wanted to have both `getAttribute` and `setAttribute` in a similar fashion.\r\n\r\nThis can be confirmed by checking one of the `Known Implementing Classes` as listed in the javadoc; for example [org.graphstream.graph.implementations.AbstractElement](https://data.graphstream-project.org/api/gs-core/1.3/org/graphstream/graph/implementations/AbstractElement.html), where the `setAttribute` method is just calling `addAttribute` directly:\r\n\r\n```lang-java\r\n\t/**\r\n\t * @complexity O(log(n)) with n being the number of attributes of this\r\n\t *             element.\r\n\t */\r\n\tpublic void setAttribute(String attribute, Object... values) {\r\n\t\taddAttribute(attribute, values);\r\n\t}\r\n```\r\nTaken from the [decompiled](https://github.com/java-decompiler/jd-gui) jar or the [sources jar](https://repo1.maven.org/maven2/org/graphstream/gs-core/1.3/) of the [following](https://mvnrepository.com/artifact/org.graphstream/gs-core/1.3) artifact.","title":"GraphStream setAttribute( ) vs addAttribute( )","body":"<p>It is most likely that they mean <code>api consistency</code> with this wording; overall consistency between their own API or what developers might expect to find in general in the API of a Java library.</p>\n<p>For example <code>properties</code> on Java Beans (pojo's) are usually implemented as <code>getter</code> and <code>setter</code> methods by convention (rather than language features, as can be found in <a href=\"https://stackoverflow.com/questions/2963243/does-java-have-something-similar-to-c-sharp-properties\">C#</a>).</p>\n<p>So perhaps the <code>graphstream</code> devs wanted to have both <code>getAttribute</code> and <code>setAttribute</code> in a similar fashion.</p>\n<p>This can be confirmed by checking one of the <code>Known Implementing Classes</code> as listed in the javadoc; for example <a href=\"https://data.graphstream-project.org/api/gs-core/1.3/org/graphstream/graph/implementations/AbstractElement.html\" rel=\"nofollow noreferrer\">org.graphstream.graph.implementations.AbstractElement</a>, where the <code>setAttribute</code> method is just calling <code>addAttribute</code> directly:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    /**\n     * @complexity O(log(n)) with n being the number of attributes of this\n     *             element.\n     */\n    public void setAttribute(String attribute, Object... values) {\n        addAttribute(attribute, values);\n    }\n</code></pre>\n<p>Taken from the <a href=\"https://github.com/java-decompiler/jd-gui\" rel=\"nofollow noreferrer\">decompiled</a> jar or the <a href=\"https://repo1.maven.org/maven2/org/graphstream/gs-core/1.3/\" rel=\"nofollow noreferrer\">sources jar</a> of the <a href=\"https://mvnrepository.com/artifact/org.graphstream/gs-core/1.3\" rel=\"nofollow noreferrer\">following</a> artifact.</p>\n"}],"owner":{"account_id":12527777,"reputation":584,"user_id":9116959,"display_name":"Kfir Ettinger"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":124,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73786559,"answer_count":1,"score":0,"last_activity_date":1663678055,"creation_date":1656160199,"question_id":72753879,"body_markdown":"I don&#39;t understand the difference between ***setAttribute( )*** and ***addAttribute( )*** in `GraphStream1.3`.\r\n\r\nIn `GraphStream`&#39;s `Element` [API 1.3][1] it&#39;s explained that setAttribute is \r\n\r\n&gt; Like addAttribute() but for consistency.\r\n\r\nwhat does it means?\r\n\r\n\r\n  [1]: https://data.graphstream-project.org/api/gs-core/1.3/org/graphstream/graph/Element.html#setAttribute(java.lang.String,%20java.lang.Object...)","title":"GraphStream setAttribute( ) vs addAttribute( )","body":"<p>I don't understand the difference between <em><strong>setAttribute( )</strong></em> and <em><strong>addAttribute( )</strong></em> in <code>GraphStream1.3</code>.</p>\n<p>In <code>GraphStream</code>'s <code>Element</code> <a href=\"https://data.graphstream-project.org/api/gs-core/1.3/org/graphstream/graph/Element.html#setAttribute(java.lang.String,%20java.lang.Object...)\" rel=\"nofollow noreferrer\">API 1.3</a> it's explained that setAttribute is</p>\n<blockquote>\n<p>Like addAttribute() but for consistency.</p>\n</blockquote>\n<p>what does it means?</p>\n"},{"tags":["java","reflection","enums"],"comments":[{"owner":{"account_id":8414754,"reputation":1326,"user_id":6315553,"display_name":"Markus Fischer"},"score":0,"creation_date":1472939249,"post_id":39311517,"comment_id":65956061,"body_markdown":"Please test what is null in the for statement - e or the return value of getEnumConstants(). I bet e is null and something goes wrong before/during the call of writeEnum(). Since the method argument e is definitely an enum, and the example in your png file seems to have actual enum constants, getEnumConstants() should not return null.","body":"Please test what is null in the for statement - e or the return value of getEnumConstants(). I bet e is null and something goes wrong before/during the call of writeEnum(). Since the method argument e is definitely an enum, and the example in your png file seems to have actual enum constants, getEnumConstants() should not return null."},{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":0,"creation_date":1472939474,"post_id":39311517,"comment_id":65956110,"body_markdown":"@MarkusFischer if `e` was null then we would get NPE earlier. So it looks like `getEnumConstants()` is culprit. But that also doesn&#39;t make much sense since OP requires from `e` to be *instance* of some Enum, so that enum must have at last one enum constant (the one passed as argument).","body":"@MarkusFischer if <code>e</code> was null then we would get NPE earlier. So it looks like <code>getEnumConstants()</code> is culprit. But that also doesn&#39;t make much sense since OP requires from <code>e</code> to be <i>instance</i> of some Enum, so that enum must have at last one enum constant (the one passed as argument)."},{"owner":{"account_id":5939040,"reputation":452,"user_id":4670987,"display_name":"Sneling"},"score":0,"creation_date":1472940029,"post_id":39311517,"comment_id":65956215,"body_markdown":"Yes, that&#39;s why I was very disturbed about why this happened. At the same time, I&#39;d rather have a call for values() to parse through as it would be easier (i think?) to get the information the Enum. Then again, if you guys have another method to do so, i&#39;d love it. This is temporary, as at a later date I will make them &#39;print&#39; into an excel table.","body":"Yes, that&#39;s why I was very disturbed about why this happened. At the same time, I&#39;d rather have a call for values() to parse through as it would be easier (i think?) to get the information the Enum. Then again, if you guys have another method to do so, i&#39;d love it. This is temporary, as at a later date I will make them &#39;print&#39; into an excel table."},{"owner":{"account_id":8414754,"reputation":1326,"user_id":6315553,"display_name":"Markus Fischer"},"score":0,"creation_date":1472940057,"post_id":39311517,"comment_id":65956223,"body_markdown":"@Pshemo You are right, I overlooked the previous usage of e - it can&#39;t be null at that point.","body":"@Pshemo You are right, I overlooked the previous usage of e - it can&#39;t be null at that point."},{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":0,"creation_date":1472940519,"post_id":39311517,"comment_id":65956307,"body_markdown":"I am not sure how to help you since I don&#39;t know exactly what results you are expecting and I can&#39;t reproduce NPE problem from your question. So post example of input/enum class you want to handle (but don&#39;t post it as picture, we can&#39;t copy that to our IDEs). Include your expected results (you can add some info about why they are expected) and what you get instead. Also reduce your code, if `SnelPlugin` is not required, then don&#39;t include it in code. Also not everyone here may have logging mechanism configured, so why not use simple `System.out` instead?","body":"I am not sure how to help you since I don&#39;t know exactly what results you are expecting and I can&#39;t reproduce NPE problem from your question. So post example of input/enum class you want to handle (but don&#39;t post it as picture, we can&#39;t copy that to our IDEs). Include your expected results (you can add some info about why they are expected) and what you get instead. Also reduce your code, if <code>SnelPlugin</code> is not required, then don&#39;t include it in code. Also not everyone here may have logging mechanism configured, so why not use simple <code>System.out</code> instead?"},{"owner":{"account_id":8414754,"reputation":1326,"user_id":6315553,"display_name":"Markus Fischer"},"score":0,"creation_date":1472940535,"post_id":39311517,"comment_id":65956314,"body_markdown":"@Sneling Passing the enum values() and processing is of course a valid solution. However, it&#39;s puzzling where the NPE comes from. Is this plain stand-alone Java, or is it within a framework of any kind? Is there a chance that framework functionality is manipulating your classes?","body":"@Sneling Passing the enum values() and processing is of course a valid solution. However, it&#39;s puzzling where the NPE comes from. Is this plain stand-alone Java, or is it within a framework of any kind? Is there a chance that framework functionality is manipulating your classes?"},{"owner":{"account_id":5939040,"reputation":452,"user_id":4670987,"display_name":"Sneling"},"score":0,"creation_date":1472953380,"post_id":39311517,"comment_id":65958496,"body_markdown":"@Pshemo Thanks for your help! I posted an update on my question with updated code, wit hwhat you guys have asked for. \nI feel like I am missing something very important, but as I am new with reflection, I am not sure what exactly. Would, for example, &#39;COMMANDS_SNELAPI&#39; would be considered as an Enum with its own variables? If yes, then would having a way to easily get the &quot;Enum Class&quot; help me parse through the enums, and then from there get the fields? If yes, I would assume that there might be a way to get the Fields in the &quot;Enum Class&quot; by default?\nThanks.","body":"@Pshemo Thanks for your help! I posted an update on my question with updated code, wit hwhat you guys have asked for.  I feel like I am missing something very important, but as I am new with reflection, I am not sure what exactly. Would, for example, &#39;COMMANDS_SNELAPI&#39; would be considered as an Enum with its own variables? If yes, then would having a way to easily get the &quot;Enum Class&quot; help me parse through the enums, and then from there get the fields? If yes, I would assume that there might be a way to get the Fields in the &quot;Enum Class&quot; by default? Thanks."},{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":0,"creation_date":1472989575,"post_id":39311517,"comment_id":65965155,"body_markdown":"If you are asking how to get enum values like how to get from `enum MyEnum{FOO, BAR;}` values `FOO` and `BAR` but passing any of that value, then you can pass Class representing this enum `Class&lt;MyEnum&gt;` (you can get it via `MyEnum.class`). Then assuming that your method is accepting `Class&lt;E&gt; c` (where `E` is method&#39;s generic type `&lt;E extends Enum&lt;E&gt;&gt;`) you can call `c.getEnumConstants()` and get `E[]` array containing all enums (just like `values()`). DEMO: https://ideone.com/tJ5qAt (my previous answer on that subject http://stackoverflow.com/a/37765856/1393766)","body":"If you are asking how to get enum values like how to get from <code>enum MyEnum{FOO, BAR;}</code> values <code>FOO</code> and <code>BAR</code> but passing any of that value, then you can pass Class representing this enum <code>Class&lt;MyEnum&gt;</code> (you can get it via <code>MyEnum.class</code>). Then assuming that your method is accepting <code>Class&lt;E&gt; c</code> (where <code>E</code> is method&#39;s generic type <code>&lt;E extends Enum&lt;E&gt;&gt;</code>) you can call <code>c.getEnumConstants()</code> and get <code>E[]</code> array containing all enums (just like <code>values()</code>). DEMO: <a href=\"https://ideone.com/tJ5qAt\" rel=\"nofollow noreferrer\">ideone.com/tJ5qAt</a> (my previous answer on that subject <a href=\"http://stackoverflow.com/a/37765856/1393766\">stackoverflow.com/a/37765856/1393766</a>)"},{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":0,"creation_date":1472989721,"post_id":39311517,"comment_id":65965196,"body_markdown":"But what I am not sure if getting enums is all you want. Like what about fields? Each enum constant may have its own values in fields (like id) from one of your previous examples. Do you also want to handle it? If so how?","body":"But what I am not sure if getting enums is all you want. Like what about fields? Each enum constant may have its own values in fields (like id) from one of your previous examples. Do you also want to handle it? If so how?"},{"owner":{"account_id":5939040,"reputation":452,"user_id":4670987,"display_name":"Sneling"},"score":0,"creation_date":1472994246,"post_id":39311517,"comment_id":65966377,"body_markdown":"@Pshemo What I want to do is be able to &#39;see&#39; the value of every field for each E. For example, here, i&#39;d like it to print the field &#39;id&#39;, or at least it should show me something like it would see the &#39;id&#39;. (https://ideone.com/y0dCNJ) I looked at your other post, which has already the beginning of the code, but i&#39;m still stuck with getting the different variables for each E.\nTo be precise, I want to be able to read every fields for every E. So, from my code I sent you in this comment, I would expect to get:\nhttp://pastebin.com/2SpGWuYs","body":"@Pshemo What I want to do is be able to &#39;see&#39; the value of every field for each E. For example, here, i&#39;d like it to print the field &#39;id&#39;, or at least it should show me something like it would see the &#39;id&#39;. (<a href=\"https://ideone.com/y0dCNJ\" rel=\"nofollow noreferrer\">ideone.com/y0dCNJ</a>) I looked at your other post, which has already the beginning of the code, but i&#39;m still stuck with getting the different variables for each E. To be precise, I want to be able to read every fields for every E. So, from my code I sent you in this comment, I would expect to get: <a href=\"http://pastebin.com/2SpGWuYs\" rel=\"nofollow noreferrer\">pastebin.com/2SpGWuYs</a>"},{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":0,"creation_date":1472995564,"post_id":39311517,"comment_id":65966774,"body_markdown":"So it looks like you want to get all (not only public ones) fields which are not static (since they should belong to instance, not class). In that case you may may want to use `getDeclaredFields()` instead of `getFields()`. Difference is that `getFields` returns only public fields, including inherited ones, while `getDeclaredFields()` returns only fields *declared* in that class (including even private ones - so if you want to `get` value of that field you may need to invoke earlier `setAccessible(true)` on them). DEMO: https://ideone.com/qVkHIg","body":"So it looks like you want to get all (not only public ones) fields which are not static (since they should belong to instance, not class). In that case you may may want to use <code>getDeclaredFields()</code> instead of <code>getFields()</code>. Difference is that <code>getFields</code> returns only public fields, including inherited ones, while <code>getDeclaredFields()</code> returns only fields <i>declared</i> in that class (including even private ones - so if you want to <code>get</code> value of that field you may need to invoke earlier <code>setAccessible(true)</code> on them). DEMO: <a href=\"https://ideone.com/qVkHIg\" rel=\"nofollow noreferrer\">ideone.com/qVkHIg</a>"},{"owner":{"account_id":5939040,"reputation":452,"user_id":4670987,"display_name":"Sneling"},"score":0,"creation_date":1473000638,"post_id":39311517,"comment_id":65968353,"body_markdown":"@Pshemo Oh, ok! That actually is exactly what I was looking for. I tried with your method, which worked, now I will try to implement in in the method that I already have, and see what it gives. If it works well, would you want me to post the full answer to my question and tag you in it, or would you rather do it yourself?\nFIY, I have full working method, but it contains both SnelPlugin and my Logger.","body":"@Pshemo Oh, ok! That actually is exactly what I was looking for. I tried with your method, which worked, now I will try to implement in in the method that I already have, and see what it gives. If it works well, would you want me to post the full answer to my question and tag you in it, or would you rather do it yourself? FIY, I have full working method, but it contains both SnelPlugin and my Logger."},{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":0,"creation_date":1473001406,"post_id":39311517,"comment_id":65968608,"body_markdown":"If it is possible try to simplify your question like &quot;I would like to print each enum constant, and if that enum has its fields, values of that fields for each of that constants, for example [post enum structure and expected results]. I tried with this code [post simple code showing your approach - &quot;simple&quot; like avoid unnecessary things like writing to file when we can simply write to console] but problem is that [describe problem you are facing, like fact you don&#39;t want method to accept instance, since some enums may be empty and you want to be also able to handle them]&quot;.","body":"If it is possible try to simplify your question like &quot;I would like to print each enum constant, and if that enum has its fields, values of that fields for each of that constants, for example [post enum structure and expected results]. I tried with this code [post simple code showing your approach - &quot;simple&quot; like avoid unnecessary things like writing to file when we can simply write to console] but problem is that [describe problem you are facing, like fact you don&#39;t want method to accept instance, since some enums may be empty and you want to be also able to handle them]&quot;."},{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":0,"creation_date":1473001737,"post_id":39311517,"comment_id":65968710,"body_markdown":"Also IMO there is no need for these `Update #X` versions. We are not forum, we expect one specific question per ... question which can be answered reasonably. So as long as you are adding more information it is OK to skip that UPDATE part.","body":"Also IMO there is no need for these <code>Update #X</code> versions. We are not forum, we expect one specific question per ... question which can be answered reasonably. So as long as you are adding more information it is OK to skip that UPDATE part."},{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":0,"creation_date":1473001985,"post_id":39311517,"comment_id":65968772,"body_markdown":"Now if that linked code worked for you and question will be updated in a way that this code will answer it directly feel free to post it as your own answer (I don&#39;t mind), or let me know and I will post it as my own.","body":"Now if that linked code worked for you and question will be updated in a way that this code will answer it directly feel free to post it as your own answer (I don&#39;t mind), or let me know and I will post it as my own."}],"answers":[{"tags":[],"owner":{"account_id":7790200,"reputation":1166,"user_id":5893468,"display_name":"pamcevoy"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1663677935,"creation_date":1472944287,"answer_id":39312100,"question_id":39311517,"body_markdown":"If you want to get the values of the Enum, normally you would just call the ```values()``` method on the Enum class.  But since you are starting with an instance you need to get the class and call it.  I don&#39;t see any way to just cast the class to Enum, so I used reflection to get the ```public static Enum[] values()``` method like this.\r\n\r\n    /**\r\n     * Get the Enum values for this Enum instance.\r\n     * @param e the enum value\r\n     * @return all the values for this type of enum\r\n     */\r\n    private Enum[] getValues(Enum e) {\r\n        Enum[] values = new Enum[0];\r\n        try {\r\n            Class&lt;? extends Enum&gt; enumClass = e.getDeclaringClass();\r\n            Method mtd = enumClass.getMethod(&quot;values&quot;);\r\n            values = (Enum[])mtd.invoke(null);\r\n        }\r\n        catch (Exception ex) {\r\n            ex.printStackTrace();\r\n        }\r\n        return values;\r\n    }\r\n\r\nObviously you should do better error handling.  I am not sure what else you wanted from the Enum class in regards to fields.","title":"Get Values of variables under an Enum","body":"<p>If you want to get the values of the Enum, normally you would just call the <code>values()</code> method on the Enum class.  But since you are starting with an instance you need to get the class and call it.  I don't see any way to just cast the class to Enum, so I used reflection to get the <code>public static Enum[] values()</code> method like this.</p>\n<pre><code>/**\n * Get the Enum values for this Enum instance.\n * @param e the enum value\n * @return all the values for this type of enum\n */\nprivate Enum[] getValues(Enum e) {\n    Enum[] values = new Enum[0];\n    try {\n        Class&lt;? extends Enum&gt; enumClass = e.getDeclaringClass();\n        Method mtd = enumClass.getMethod(&quot;values&quot;);\n        values = (Enum[])mtd.invoke(null);\n    }\n    catch (Exception ex) {\n        ex.printStackTrace();\n    }\n    return values;\n}\n</code></pre>\n<p>Obviously you should do better error handling.  I am not sure what else you wanted from the Enum class in regards to fields.</p>\n"},{"tags":[],"owner":{"account_id":5939040,"reputation":452,"user_id":4670987,"display_name":"Sneling"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1473003642,"creation_date":1473003642,"answer_id":39318649,"question_id":39311517,"body_markdown":"Thanks to @Pshemo and @MarkusFisher, I&#39;ve come to a solution.\r\n\r\nNote that this method DOES include other classes and methods, but they don&#39;t affect the way this method works.\r\n\r\nIf you want to test for yourself:\r\n\r\n - Logger.debug can be replaced with System.out.println, LColor should\r\n   be deleted\r\n - SnelPlugin is only needed for the Logger.debug and locating a directory.\r\n - SnelTextFile is just a class to make creating text files easier. Remove if you&#39;re only printing.\r\n\r\nMethod Code:\r\n\r\n    public static &lt;E extends Enum&lt;E&gt;&gt; void writeEnum(String fileName, Class&lt;E&gt; c, SnelPlugin plugin){\r\n        SnelTextFile file = new SnelTextFile(plugin, new File(plugin.getDataFolder() + &quot;/&quot; + fileName + &quot;.txt&quot;));\r\n        Logger.debug(&quot;Starting EnumWriter for &quot; + file.getFile().getName(), plugin);\r\n\r\n        try {\r\n            file.openWriter(true);\r\n            Logger.debug(&quot;Opened FileWriter&quot;, plugin);\r\n\r\n            Field[] classFields = c.getDeclaredFields();\r\n\r\n            String header = &quot;Value&quot;;\r\n\r\n            for(Field f: classFields){\r\n                if(!Modifier.isStatic(f.getModifiers())) {\r\n                    header += &quot;, &quot; + f.getName();\r\n                    Logger.debug(&quot;Discovered variable &#39;&quot; + f.getName() + &quot;&#39;&quot;, plugin);\r\n                }\r\n            }\r\n\r\n            file.addLine(header);\r\n            file.addLine(&quot;&quot;);\r\n\r\n            for(E en: c.getEnumConstants()){\r\n                Logger.debug(&quot;Reading Enum Constant: &quot; + en.toString(), plugin);\r\n                Field[] fields = en.getDeclaringClass().getDeclaredFields();\r\n\r\n                String current = en.toString();\r\n\r\n                for(Field f: fields){\r\n                    if(!Modifier.isStatic(f.getModifiers())){\r\n                        f.setAccessible(true);\r\n                        current += &quot;, &quot; + f.get(en);\r\n                        Logger.debug(&quot;Value for &#39;&quot; +f.getName() + &quot;&#39; = &#39;&quot; +  f.get(en) + &quot;&#39;&quot; , plugin);\r\n                    }\r\n                }\r\n\r\n                file.addLine(current);\r\n            }\r\n        }catch (Exception ex){\r\n            ex.printStackTrace();\r\n        }finally {\r\n            try {\r\n                file.closeWriter();\r\n                Logger.debug(&quot;Closer FileWriter&quot;);\r\n            } catch (IOException ex) {\r\n            }\r\n        }\r\n\r\n        Logger.log(LColor.GREEN + &quot;Finished EnumWriter for &quot; + file.getFile().getName() + &quot;. It can be found at &quot; + file.getFile().getPath(), plugin);\r\n    }\r\n\r\n","title":"Get Values of variables under an Enum","body":"<p>Thanks to @Pshemo and @MarkusFisher, I've come to a solution.</p>\n\n<p>Note that this method DOES include other classes and methods, but they don't affect the way this method works.</p>\n\n<p>If you want to test for yourself:</p>\n\n<ul>\n<li>Logger.debug can be replaced with System.out.println, LColor should\nbe deleted</li>\n<li>SnelPlugin is only needed for the Logger.debug and locating a directory.</li>\n<li>SnelTextFile is just a class to make creating text files easier. Remove if you're only printing.</li>\n</ul>\n\n<p>Method Code:</p>\n\n<pre><code>public static &lt;E extends Enum&lt;E&gt;&gt; void writeEnum(String fileName, Class&lt;E&gt; c, SnelPlugin plugin){\n    SnelTextFile file = new SnelTextFile(plugin, new File(plugin.getDataFolder() + \"/\" + fileName + \".txt\"));\n    Logger.debug(\"Starting EnumWriter for \" + file.getFile().getName(), plugin);\n\n    try {\n        file.openWriter(true);\n        Logger.debug(\"Opened FileWriter\", plugin);\n\n        Field[] classFields = c.getDeclaredFields();\n\n        String header = \"Value\";\n\n        for(Field f: classFields){\n            if(!Modifier.isStatic(f.getModifiers())) {\n                header += \", \" + f.getName();\n                Logger.debug(\"Discovered variable '\" + f.getName() + \"'\", plugin);\n            }\n        }\n\n        file.addLine(header);\n        file.addLine(\"\");\n\n        for(E en: c.getEnumConstants()){\n            Logger.debug(\"Reading Enum Constant: \" + en.toString(), plugin);\n            Field[] fields = en.getDeclaringClass().getDeclaredFields();\n\n            String current = en.toString();\n\n            for(Field f: fields){\n                if(!Modifier.isStatic(f.getModifiers())){\n                    f.setAccessible(true);\n                    current += \", \" + f.get(en);\n                    Logger.debug(\"Value for '\" +f.getName() + \"' = '\" +  f.get(en) + \"'\" , plugin);\n                }\n            }\n\n            file.addLine(current);\n        }\n    }catch (Exception ex){\n        ex.printStackTrace();\n    }finally {\n        try {\n            file.closeWriter();\n            Logger.debug(\"Closer FileWriter\");\n        } catch (IOException ex) {\n        }\n    }\n\n    Logger.log(LColor.GREEN + \"Finished EnumWriter for \" + file.getFile().getName() + \". It can be found at \" + file.getFile().getPath(), plugin);\n}\n</code></pre>\n"}],"owner":{"account_id":5939040,"reputation":452,"user_id":4670987,"display_name":"Sneling"},"comment_count":15,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":715,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":39318649,"answer_count":2,"score":3,"last_activity_date":1663677935,"creation_date":1472938245,"question_id":39311517,"body_markdown":"I want to write into a file/print the constants of an enum, as well as the values of their variables.\r\n\r\nFor example, here is what I thought of doing:\r\n\r\n    id, field_name_1, field_name_2, ...\r\n    enum_id, field_value_1, field_value_2, ...\r\n    ...\r\n\r\nHowever, I am not fully sure on how to do such a thing, as I only recently began working with reflection.\r\n\r\nThis is the code that I currently have.\r\n\r\n    public static void writeEnum(String filename, Enum e, SnelPlugin plugin){\r\n            SnelTextFile file = new SnelTextFile(plugin, new File(plugin.getDataFolder() + &quot;/&quot; + filename + &quot;.txt&quot;));\r\n            Logger.debug(&quot;Starting an EnumWriter for &quot; + filename + &quot;.txt for plugin &quot; + plugin.getPluginName());\r\n\r\n        try {\r\n            file.openWriter(true);\r\n\r\n            Field[] fields = e.getClass().getFields();\r\n\r\n            // HEADER\r\n            String info = &quot;&quot;;\r\n            for(Field f: fields) {\r\n                info += &quot;, &quot; + f.getName();\r\n                Logger.debug(&quot;Detected value: &quot; + f.getName());\r\n            }\r\n            info = info.replaceFirst(&quot;, &quot;, &quot;&quot;);\r\n            file.addLine(info);\r\n\r\n            // CONTENT\r\n            for(Object current: e.getDeclaringClass().getEnumConstants()){\r\n                Logger.debug(current.toString());\r\n\r\n                String result = &quot;&quot;;\r\n\r\n                for(Field f: fields){\r\n                    result += &quot;, &quot; + f.get(current);\r\n                }\r\n\r\n                result = result.replaceFirst(&quot;, &quot;, &quot;&quot;);\r\n\r\n                file.addLine(result);\r\n\r\n                Logger.debug(&quot;Added row: &quot; + result);\r\n            }\r\n        }catch (Exception ex){\r\n            ex.printStackTrace();\r\n        }finally {\r\n            try {\r\n                file.closeWriter();\r\n            } catch (IOException e1) {\r\n            }\r\n        }\r\n\r\n        Logger.log(LColor.GREEN + &quot;Finished an EnumWriter action on &quot; + filename + &quot;.txt from &quot; + plugin.getPluginName());\r\n    }\r\n\r\nHere is the Enum (APIPerm), which I setup for a simple test:\r\n\r\n    COMMANDS_SNELAPI,\r\n    COMMANDS_SNELAPI_INFO;\r\n\r\n    private String id;\r\n\r\n    APIPerm(){\r\n        id = getID();\r\n    }\r\n\r\n    @Override\r\n    public String getPrefix() {\r\n        return &quot;snelapi&quot;;\r\n    }\r\n\r\n    @Override\r\n    public String getID(){\r\n        return getPrefix() + &quot;.&quot; + this.toString().toLowerCase().replaceAll(&quot;_&quot;, &quot;.&quot;);\r\n    }\r\n\r\nHowever, I get an NPE in `for(Object current: e.getDeclaringClass().getEnumConstants())`\r\n\r\nThanks for your help,\r\nSneling.\r\n\r\n","title":"Get Values of variables under an Enum","body":"<p>I want to write into a file/print the constants of an enum, as well as the values of their variables.</p>\n\n<p>For example, here is what I thought of doing:</p>\n\n<pre><code>id, field_name_1, field_name_2, ...\nenum_id, field_value_1, field_value_2, ...\n...\n</code></pre>\n\n<p>However, I am not fully sure on how to do such a thing, as I only recently began working with reflection.</p>\n\n<p>This is the code that I currently have.</p>\n\n<pre><code>public static void writeEnum(String filename, Enum e, SnelPlugin plugin){\n        SnelTextFile file = new SnelTextFile(plugin, new File(plugin.getDataFolder() + \"/\" + filename + \".txt\"));\n        Logger.debug(\"Starting an EnumWriter for \" + filename + \".txt for plugin \" + plugin.getPluginName());\n\n    try {\n        file.openWriter(true);\n\n        Field[] fields = e.getClass().getFields();\n\n        // HEADER\n        String info = \"\";\n        for(Field f: fields) {\n            info += \", \" + f.getName();\n            Logger.debug(\"Detected value: \" + f.getName());\n        }\n        info = info.replaceFirst(\", \", \"\");\n        file.addLine(info);\n\n        // CONTENT\n        for(Object current: e.getDeclaringClass().getEnumConstants()){\n            Logger.debug(current.toString());\n\n            String result = \"\";\n\n            for(Field f: fields){\n                result += \", \" + f.get(current);\n            }\n\n            result = result.replaceFirst(\", \", \"\");\n\n            file.addLine(result);\n\n            Logger.debug(\"Added row: \" + result);\n        }\n    }catch (Exception ex){\n        ex.printStackTrace();\n    }finally {\n        try {\n            file.closeWriter();\n        } catch (IOException e1) {\n        }\n    }\n\n    Logger.log(LColor.GREEN + \"Finished an EnumWriter action on \" + filename + \".txt from \" + plugin.getPluginName());\n}\n</code></pre>\n\n<p>Here is the Enum (APIPerm), which I setup for a simple test:</p>\n\n<pre><code>COMMANDS_SNELAPI,\nCOMMANDS_SNELAPI_INFO;\n\nprivate String id;\n\nAPIPerm(){\n    id = getID();\n}\n\n@Override\npublic String getPrefix() {\n    return \"snelapi\";\n}\n\n@Override\npublic String getID(){\n    return getPrefix() + \".\" + this.toString().toLowerCase().replaceAll(\"_\", \".\");\n}\n</code></pre>\n\n<p>However, I get an NPE in <code>for(Object current: e.getDeclaringClass().getEnumConstants())</code></p>\n\n<p>Thanks for your help,\nSneling.</p>\n"},{"tags":["java","html","swing","colors","jlabel"],"comments":[{"owner":{"account_id":1659832,"reputation":15646,"user_id":2147481,"accept_rate":82,"display_name":"Gokul Nath KP"},"score":0,"creation_date":1644848219,"post_id":71113317,"comment_id":125707092,"body_markdown":"Share your code on how you are setting.","body":"Share your code on how you are setting."},{"owner":{"account_id":2562742,"reputation":5917,"user_id":2851311,"display_name":"hfontanez"},"score":0,"creation_date":1644848565,"post_id":71113317,"comment_id":125707242,"body_markdown":"Do you think it is possible for us to know what is wrong with your code without looking at **_your code_**?","body":"Do you think it is possible for us to know what is wrong with your code without looking at <b><i>your code</i></b>?"},{"owner":{"account_id":14226434,"reputation":88,"user_id":10601796,"display_name":"user10276995"},"score":0,"creation_date":1660170755,"post_id":71113317,"comment_id":129472881,"body_markdown":"After reading your question, I sent a Pull Request to the OpenJDK project.","body":"After reading your question, I sent a Pull Request to the OpenJDK project."},{"owner":{"account_id":14226434,"reputation":88,"user_id":10601796,"display_name":"user10276995"},"score":0,"creation_date":1660171439,"post_id":71113317,"comment_id":129473017,"body_markdown":"It&#39;s the forge for Java Implementation (https://github.com/openjdk/jdk/pull/9825). This is really easy to implement, the proposal is a simple extension of existing code, I also made other propositions to improve it. If acceped, Java Swing HTML will take in charge all CSS Level 4 named colors and then the cyan and magenta (https://www.w3.org/TR/2022/CR-css-color-4-20220705/#named-colors).","body":"It&#39;s the forge for Java Implementation (<a href=\"https://github.com/openjdk/jdk/pull/9825\" rel=\"nofollow noreferrer\">github.com/openjdk/jdk/pull/9825</a>). This is really easy to implement, the proposal is a simple extension of existing code, I also made other propositions to improve it. If acceped, Java Swing HTML will take in charge all CSS Level 4 named colors and then the cyan and magenta (<a href=\"https://www.w3.org/TR/2022/CR-css-color-4-20220705/#named-colors\" rel=\"nofollow noreferrer\">w3.org/TR/2022/CR-css-color-4-20220705/#named-colors</a>)."},{"owner":{"account_id":14226434,"reputation":88,"user_id":10601796,"display_name":"user10276995"},"score":0,"creation_date":1660297457,"post_id":71113317,"comment_id":129504668,"body_markdown":"This issue is now referenced and waiting its review. Fill free to comment at https://github.com/scientificware/jdk/issues/12.","body":"This issue is now referenced and waiting its review. Fill free to comment at <a href=\"https://github.com/scientificware/jdk/issues/12\" rel=\"nofollow noreferrer\">github.com/scientificware/jdk/issues/12</a>."},{"owner":{"account_id":14226434,"reputation":88,"user_id":10601796,"display_name":"user10276995"},"score":0,"creation_date":1664630819,"post_id":71113317,"comment_id":130518153,"body_markdown":"This issue is in review and needs an update of its java documentation. Next step CSR.","body":"This issue is in review and needs an update of its java documentation. Next step CSR."},{"owner":{"account_id":14226434,"reputation":88,"user_id":10601796,"display_name":"user10276995"},"score":0,"creation_date":1664631721,"post_id":71113317,"comment_id":130518307,"body_markdown":"I posted another PR to update hexadecimal notation support, allowing #RGB #RGBA #RRGGBB and #RRGGBBAA https://github.com/openjdk/jdk/pull/10317. It&#39;s waiting a review after a new implementation proposition.","body":"I posted another PR to update hexadecimal notation support, allowing #RGB #RGBA #RRGGBB and #RRGGBBAA <a href=\"https://github.com/openjdk/jdk/pull/10317\" rel=\"nofollow noreferrer\">github.com/openjdk/jdk/pull/10317</a>. It&#39;s waiting a review after a new implementation proposition."},{"owner":{"account_id":14226434,"reputation":88,"user_id":10601796,"display_name":"user10276995"},"score":0,"creation_date":1665069808,"post_id":71113317,"comment_id":130617979,"body_markdown":"@Moungsung Thanks for your question. I&#39;m going to post another and last PR about rgb() and rgba() functions.","body":"@Moungsung Thanks for your question. I&#39;m going to post another and last PR about rgb() and rgba() functions."},{"owner":{"account_id":14226434,"reputation":88,"user_id":10601796,"display_name":"user10276995"},"score":0,"creation_date":1697683108,"post_id":71113317,"comment_id":136311552,"body_markdown":"Named colors (https://github.com/openjdk/jdk/pull/9825), hexadecimal notations (https://github.com/openjdk/jdk/pull/10317) and RGB/RGBA function (https://github.com/openjdk/jdk/pull/15262) are now in the same PR : https://github.com/openjdk/jdk/pull/9825. Release in JDK 22 ?","body":"Named colors (<a href=\"https://github.com/openjdk/jdk/pull/9825\" rel=\"nofollow noreferrer\">github.com/openjdk/jdk/pull/9825</a>), hexadecimal notations (<a href=\"https://github.com/openjdk/jdk/pull/10317\" rel=\"nofollow noreferrer\">github.com/openjdk/jdk/pull/10317</a>) and RGB/RGBA function (<a href=\"https://github.com/openjdk/jdk/pull/15262\" rel=\"nofollow noreferrer\">github.com/openjdk/jdk/pull/15262</a>) are now in the same PR : <a href=\"https://github.com/openjdk/jdk/pull/9825\" rel=\"nofollow noreferrer\">github.com/openjdk/jdk/pull/9825</a>. Release in JDK 22 ?"}],"answers":[{"tags":[],"owner":{"account_id":16820672,"reputation":39,"user_id":12161225,"display_name":"Moungsung Im"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644916004,"creation_date":1644848522,"answer_id":71113398,"question_id":71113317,"body_markdown":"If anyone has the same issue, try to use hex `#00FFFF` instead of `cyan`.\r\n\r\nAs Mr. [Andrew Thompson][1] commented, Swing&#39;s HTML support (which is a subset of HTML 3.2), and CSS is so poor, it would be safest to only use hex or RGB values for colors.\r\n\r\n\r\n  [1]: https://stackoverflow.com/users/418556/andrew-thompson","title":"Java swing set font color with HTML tag but cyan and magenta color don&#39;t work","body":"<p>If anyone has the same issue, try to use hex <code>#00FFFF</code> instead of <code>cyan</code>.</p>\n<p>As Mr. <a href=\"https://stackoverflow.com/users/418556/andrew-thompson\">Andrew Thompson</a> commented, Swing's HTML support (which is a subset of HTML 3.2), and CSS is so poor, it would be safest to only use hex or RGB values for colors.</p>\n"},{"tags":[],"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1644850679,"creation_date":1644850679,"answer_id":71113850,"question_id":71113317,"body_markdown":"Unfortunately, the Swing HTML renderer is quite old.  It conforms to HTML 3.2 and CSS 1.0.\r\n\r\nThe `color` attribute of `&lt;font&gt;` is parsed using the non-public [CSS.stringToColor](https://github.com/openjdk/jdk/blob/master/src/java.desktop/share/classes/javax/swing/text/html/CSS.java#L1393) method, which only recognizes 17 color names: Black, Silver, Gray, White, Maroon, Red, Purple, Fuchsia, Green, Lime, Olive, Yellow, Navy, Blue, Teal, Aqua, and Orange.\r\n\r\nFor what its worth, JavaFX is a more modern UI library which has a [WebView](https://openjfx.io/javadoc/17/javafx.web/javafx/scene/web/WebView.html) component that uses WebKit for rendering, and thus has much more up-to-date HTML and CSS support.\r\n","title":"Java swing set font color with HTML tag but cyan and magenta color don&#39;t work","body":"<p>Unfortunately, the Swing HTML renderer is quite old.  It conforms to HTML 3.2 and CSS 1.0.</p>\n<p>The <code>color</code> attribute of <code>&lt;font&gt;</code> is parsed using the non-public <a href=\"https://github.com/openjdk/jdk/blob/master/src/java.desktop/share/classes/javax/swing/text/html/CSS.java#L1393\" rel=\"nofollow noreferrer\">CSS.stringToColor</a> method, which only recognizes 17 color names: Black, Silver, Gray, White, Maroon, Red, Purple, Fuchsia, Green, Lime, Olive, Yellow, Navy, Blue, Teal, Aqua, and Orange.</p>\n<p>For what its worth, JavaFX is a more modern UI library which has a <a href=\"https://openjfx.io/javadoc/17/javafx.web/javafx/scene/web/WebView.html\" rel=\"nofollow noreferrer\">WebView</a> component that uses WebKit for rendering, and thus has much more up-to-date HTML and CSS support.</p>\n"}],"owner":{"account_id":16820672,"reputation":39,"user_id":12161225,"display_name":"Moungsung Im"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":316,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"closed_date":1644915529,"answer_count":2,"score":2,"last_activity_date":1663677438,"creation_date":1644848154,"question_id":71113317,"body_markdown":"[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/7JJbp.png\r\n\r\nHello I&#39;m trying to change font color in JLabel with html tag like this,\r\n`&lt;font color=&quot;+fontColor+&quot;&gt;`\r\nevery other color such as red, orange, blue, fuchsia, gray, lime, maroon, navy, olive, purple, silver, teal, green, yellow, white, and black but cyan and magenta do not. \r\n\r\nDoes anyone know why those two special colors don&#39;t work in java?\r\n\r\nThank you!","title":"Java swing set font color with HTML tag but cyan and magenta color don&#39;t work","body":"<p><a href=\"https://i.stack.imgur.com/7JJbp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7JJbp.png\" alt=\"enter image description here\" /></a></p>\n<p>Hello I'm trying to change font color in JLabel with html tag like this,\n<code>&lt;font color=&quot;+fontColor+&quot;&gt;</code>\nevery other color such as red, orange, blue, fuchsia, gray, lime, maroon, navy, olive, purple, silver, teal, green, yellow, white, and black but cyan and magenta do not.</p>\n<p>Does anyone know why those two special colors don't work in java?</p>\n<p>Thank you!</p>\n"},{"tags":["java","intellij-idea","javafx","intellij-plugin"],"comments":[{"owner":{"account_id":1782099,"reputation":843,"user_id":1624551,"display_name":"Pao"},"score":0,"creation_date":1663685093,"post_id":73786822,"comment_id":130295141,"body_markdown":"Look here: https://stackoverflow.com/questions/52013181/draw-lines-between-methods-in-code-editor-of-intellij","body":"Look here: <a href=\"https://stackoverflow.com/questions/52013181/draw-lines-between-methods-in-code-editor-of-intellij\" title=\"draw lines between methods in code editor of intellij\">stackoverflow.com/questions/52013181/&hellip;</a>"}],"owner":{"account_id":24954661,"reputation":33,"user_id":18819130,"display_name":"Talib3ilm"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1663688922,"answer_count":0,"score":1,"last_activity_date":1663677389,"creation_date":1663677389,"question_id":73786822,"body_markdown":"I&#39;m using java with IntelliJ IDEA 2022.2, Is there a way to separate the Methods with lines in the class, (like the image below)\r\nbecause I always wanted to separate the Methods with lines other than the lines of comments for more clarity of vision.\r\n\r\nThank you.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/nep68.png","title":"Insulation of intellij IDEA Java methods by lines","body":"<p>I'm using java with IntelliJ IDEA 2022.2, Is there a way to separate the Methods with lines in the class, (like the image below)\nbecause I always wanted to separate the Methods with lines other than the lines of comments for more clarity of vision.</p>\n<p>Thank you.</p>\n<p><a href=\"https://i.stack.imgur.com/nep68.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nep68.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","android","onpause"],"comments":[{"owner":{"account_id":7656968,"reputation":638,"user_id":8949644,"display_name":"Sagar Balyan"},"score":0,"creation_date":1663656932,"post_id":73782571,"comment_id":130285010,"body_markdown":"Don&#39;t call `super.onPause();`","body":"Don&#39;t call <code>super.onPause();</code>"},{"owner":{"account_id":26387276,"reputation":11,"user_id":20039615,"display_name":"Raouf Bhatti"},"score":0,"creation_date":1663657391,"post_id":73782571,"comment_id":130285164,"body_markdown":"it shows error when i dont call super.OnPause();","body":"it shows error when i dont call super.OnPause();"},{"owner":{"account_id":7302782,"reputation":158,"user_id":5564845,"display_name":"Saurabh"},"score":0,"creation_date":1663658985,"post_id":73782571,"comment_id":130285641,"body_markdown":"You can&#39;t intercept home and recent buttons.","body":"You can&#39;t intercept home and recent buttons."}],"answers":[{"tags":[],"owner":{"account_id":16266080,"reputation":56,"user_id":16564712,"display_name":"Gaya Touak"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663662170,"creation_date":1663662170,"answer_id":73783634,"question_id":73782571,"body_markdown":"For security reasons, Android wont let you override the default home button that easily, take a look at this [discussion][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/2079691/overriding-the-home-button-how-do-i-get-rid-of-the-choice","title":"how to add AlertDialog in OnPause() method?","body":"<p>For security reasons, Android wont let you override the default home button that easily, take a look at this <a href=\"https://stackoverflow.com/questions/2079691/overriding-the-home-button-how-do-i-get-rid-of-the-choice\">discussion</a></p>\n"}],"owner":{"account_id":26387276,"reputation":11,"user_id":20039615,"display_name":"Raouf Bhatti"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1663677085,"creation_date":1663656374,"question_id":73782571,"body_markdown":"I want to show an `AlertDialog` when a user click on Back, Home and Recent button in Android Navigation Bar for back button.\r\n\r\nI used `onBackPressed()` method and it&#39;s working fine but for Home and Recent, I am using `onPause()` method and it&#39;s not working.\r\n\r\nKindly help me to resolve it. \r\n\r\n    @Override\r\n        public void onPause() {\r\n            builder = new AlertDialog.Builder(this);\r\n            builder.setTitle(&quot;Alert&quot;)\r\n                    .setMessage(&quot;Do you want to close application?&quot;)\r\n                    .setCancelable(true)\r\n                    .setPositiveButton(&quot;Yes&quot;, new DialogInterface.OnClickListener() {\r\n                        @Override\r\n                        public void onClick(DialogInterface dialogInterface, int i) {\r\n                            finish();\r\n                        }\r\n                    })\r\n                    .setNegativeButton(&quot;No&quot;, new DialogInterface.OnClickListener() {\r\n                        @Override\r\n                        public void onClick(DialogInterface dialogInterface, int i) {\r\n                            dialogInterface.cancel();\r\n                        }\r\n                    })\r\n                    .show();\r\n             super.onPause();\r\n        }","title":"how to add AlertDialog in OnPause() method?","body":"<p>I want to show an <code>AlertDialog</code> when a user click on Back, Home and Recent button in Android Navigation Bar for back button.</p>\n<p>I used <code>onBackPressed()</code> method and it's working fine but for Home and Recent, I am using <code>onPause()</code> method and it's not working.</p>\n<p>Kindly help me to resolve it.</p>\n<pre><code>@Override\n    public void onPause() {\n        builder = new AlertDialog.Builder(this);\n        builder.setTitle(&quot;Alert&quot;)\n                .setMessage(&quot;Do you want to close application?&quot;)\n                .setCancelable(true)\n                .setPositiveButton(&quot;Yes&quot;, new DialogInterface.OnClickListener() {\n                    @Override\n                    public void onClick(DialogInterface dialogInterface, int i) {\n                        finish();\n                    }\n                })\n                .setNegativeButton(&quot;No&quot;, new DialogInterface.OnClickListener() {\n                    @Override\n                    public void onClick(DialogInterface dialogInterface, int i) {\n                        dialogInterface.cancel();\n                    }\n                })\n                .show();\n         super.onPause();\n    }\n</code></pre>\n"},{"tags":["java","spring","spring-boot","junit"],"comments":[{"owner":{"account_id":1223835,"reputation":75848,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1501857819,"post_id":45509182,"comment_id":77980396,"body_markdown":"It looks like there&#39;s an argument resolver that you didn&#39;t register in your MockMvc configuration.","body":"It looks like there&#39;s an argument resolver that you didn&#39;t register in your MockMvc configuration."},{"owner":{"account_id":8627289,"reputation":51,"user_id":6460116,"display_name":"Pyohwan Jang"},"score":1,"creation_date":1501858870,"post_id":45509182,"comment_id":77981161,"body_markdown":"@chrylis That resolver is DeviceWebArgumentResolver. so how to register resolver to MockMvc?","body":"@chrylis That resolver is DeviceWebArgumentResolver. so how to register resolver to MockMvc?"}],"owner":{"account_id":8627289,"reputation":51,"user_id":6460116,"display_name":"Pyohwan Jang"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":702,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":0,"score":3,"last_activity_date":1663677065,"creation_date":1501856378,"question_id":45509182,"body_markdown":"addFreePostTest() method test is failed.\r\nI couldn&#39;t inject Device bean.\r\nHow can I resolve this problem?\r\n\r\n\r\n    org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.mobile.device.Device]: Specified class is an interface\r\n\r\n\r\nBoardRestController.class\r\n\r\n    @RestController\r\n    @RequestMapping(&quot;/api/board/free&quot;)\r\n    public class BoardRestController {\r\n    \r\n        @PostMapping(&quot;&quot;)\r\n        public FreePostWriteResponse addFreePost(\r\n                @Valid @RequestBody FreePostForm form,\r\n                Device device) {\r\n    \r\n        }\r\n\r\nBoardRestControllerTests.class\r\n\r\n    @RunWith(SpringRunner.class)\r\n    @WebMvcTest(BoardRestController.class)\r\n    public class BoardRestControllerTests {\r\n    \r\n        @Autowired\r\n        private MockMvc mvc;\r\n    \r\n        @MockBean private BoardFreeService boardFreeService;\r\n    \r\n        @Test\r\n        @WithMockUser\r\n        public void addFreePostTest() throws Exception {\r\n    \r\n            FreePostForm form = FreePostForm.builder()\r\n                    .subject(&quot;Subject.&quot;)\r\n                    .content(&quot;Content.&quot;)\r\n                    .categoryCode(JakdukConst.BOARD_CATEGORY_TYPE.FOOTBALL)\r\n                    .build();\r\n    \r\n            mvc.perform(post(&quot;/api/board/free&quot;)\r\n                    .contentType(MediaType.APPLICATION_JSON)\r\n                    .content(ObjectMapperUtils.writeValueAsString(form)))\r\n                    .andExpect(status().isOk());\r\n        }\r\n\r\n","title":"Failed to instantiate [org.springframework.mobile.device.Device]: Specified class is an interface","body":"<p>addFreePostTest() method test is failed.\nI couldn't inject Device bean.\nHow can I resolve this problem?</p>\n\n<pre><code>org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.mobile.device.Device]: Specified class is an interface\n</code></pre>\n\n<p>BoardRestController.class</p>\n\n<pre><code>@RestController\n@RequestMapping(\"/api/board/free\")\npublic class BoardRestController {\n\n    @PostMapping(\"\")\n    public FreePostWriteResponse addFreePost(\n            @Valid @RequestBody FreePostForm form,\n            Device device) {\n\n    }\n</code></pre>\n\n<p>BoardRestControllerTests.class</p>\n\n<pre><code>@RunWith(SpringRunner.class)\n@WebMvcTest(BoardRestController.class)\npublic class BoardRestControllerTests {\n\n    @Autowired\n    private MockMvc mvc;\n\n    @MockBean private BoardFreeService boardFreeService;\n\n    @Test\n    @WithMockUser\n    public void addFreePostTest() throws Exception {\n\n        FreePostForm form = FreePostForm.builder()\n                .subject(\"Subject.\")\n                .content(\"Content.\")\n                .categoryCode(JakdukConst.BOARD_CATEGORY_TYPE.FOOTBALL)\n                .build();\n\n        mvc.perform(post(\"/api/board/free\")\n                .contentType(MediaType.APPLICATION_JSON)\n                .content(ObjectMapperUtils.writeValueAsString(form)))\n                .andExpect(status().isOk());\n    }\n</code></pre>\n"},{"tags":["java","unit-testing","spring-mvc","controller","mocking"],"comments":[{"owner":{"account_id":2813174,"reputation":584,"user_id":2418974,"accept_rate":0,"display_name":"johncol"},"score":0,"creation_date":1497272844,"post_id":43980900,"comment_id":75993879,"body_markdown":"Did you get to resolve it? I&#39;m in the same situation you were, I can&#39;t inject the device in the unit tests..","body":"Did you get to resolve it? I&#39;m in the same situation you were, I can&#39;t inject the device in the unit tests.."},{"owner":{"account_id":10183181,"reputation":41,"user_id":7519186,"display_name":"Infire"},"score":0,"creation_date":1497365000,"post_id":43980900,"comment_id":76041277,"body_markdown":"No, but let me know if you find a solution.","body":"No, but let me know if you find a solution."}],"answers":[{"tags":[],"owner":{"account_id":4250462,"reputation":4103,"user_id":3477712,"accept_rate":84,"display_name":"code"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1518569298,"creation_date":1518569298,"answer_id":48778027,"question_id":43980900,"body_markdown":"This is how I have been testing for different device types, when using Spring Mobile.  It is not exactly what you asked.  Might provide a different way to handle the same problem.\r\n\r\n    @Test\r\n    public void getSpringMobileDesktopView() throws Exception {\r\n        this.mockMvc.perform(get(url)\r\n                .header(&quot;user-agent&quot;, &quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/44.0.2403.107 Safari/537.36&quot;)\r\n                .accept(MediaType.TEXT_HTML))\r\n                .andExpect(view().name(containsString(&quot;desktop&quot;)))\r\n                .andExpect(status().isOk())\r\n                .andExpect(content().contentType(mediaTypeHtml))\r\n                .andExpect(content().string(containsString(contains)));\r\n    }\r\n\r\n    @Test\r\n    public void getSpringMobileTabletView() throws Exception {\r\n        this.mockMvc.perform(get(url)\r\n                .header(&quot;user-agent&quot;, &quot;Mozilla/5.0 (iPad; CPU OS 6_0 like Mac OS X) AppleWebKit/536.26 (KHTML, like Gecko) Version/6.0 Mobile/10A5355d Safari/8536.25&quot;)\r\n                .accept(MediaType.TEXT_HTML))\r\n                .andExpect(view().name(containsString(&quot;tablet&quot;)))\r\n                .andExpect(status().isOk())\r\n                .andExpect(content().contentType(mediaTypeHtml))\r\n                .andExpect(content().string(containsString(contains)));\r\n    }\r\n\r\n    @Test\r\n    public void getSpringMobileMobileView() throws Exception {\r\n        this.mockMvc.perform(get(url)\r\n                .header(&quot;user-agent&quot;, &quot;Mozilla/5.0 (iPhone; U; ru; CPU iPhone OS 4_2_1 like Mac OS X; ru) AppleWebKit/533.17.9 (KHTML, like Gecko) Version/5.0.2 Mobile/8C148a Safari/6533.18.5&quot;)\r\n                .accept(MediaType.TEXT_HTML))\r\n                .andExpect(view().name(containsString(&quot;mobile&quot;)))\r\n                .andExpect(status().isOk())\r\n                .andExpect(content().contentType(mediaTypeHtml))\r\n                .andExpect(content().string(containsString(contains)));\r\n    }","title":"Mock device for controller test","body":"<p>This is how I have been testing for different device types, when using Spring Mobile.  It is not exactly what you asked.  Might provide a different way to handle the same problem.</p>\n\n<pre><code>@Test\npublic void getSpringMobileDesktopView() throws Exception {\n    this.mockMvc.perform(get(url)\n            .header(\"user-agent\", \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/44.0.2403.107 Safari/537.36\")\n            .accept(MediaType.TEXT_HTML))\n            .andExpect(view().name(containsString(\"desktop\")))\n            .andExpect(status().isOk())\n            .andExpect(content().contentType(mediaTypeHtml))\n            .andExpect(content().string(containsString(contains)));\n}\n\n@Test\npublic void getSpringMobileTabletView() throws Exception {\n    this.mockMvc.perform(get(url)\n            .header(\"user-agent\", \"Mozilla/5.0 (iPad; CPU OS 6_0 like Mac OS X) AppleWebKit/536.26 (KHTML, like Gecko) Version/6.0 Mobile/10A5355d Safari/8536.25\")\n            .accept(MediaType.TEXT_HTML))\n            .andExpect(view().name(containsString(\"tablet\")))\n            .andExpect(status().isOk())\n            .andExpect(content().contentType(mediaTypeHtml))\n            .andExpect(content().string(containsString(contains)));\n}\n\n@Test\npublic void getSpringMobileMobileView() throws Exception {\n    this.mockMvc.perform(get(url)\n            .header(\"user-agent\", \"Mozilla/5.0 (iPhone; U; ru; CPU iPhone OS 4_2_1 like Mac OS X; ru) AppleWebKit/533.17.9 (KHTML, like Gecko) Version/5.0.2 Mobile/8C148a Safari/6533.18.5\")\n            .accept(MediaType.TEXT_HTML))\n            .andExpect(view().name(containsString(\"mobile\")))\n            .andExpect(status().isOk())\n            .andExpect(content().contentType(mediaTypeHtml))\n            .andExpect(content().string(containsString(contains)));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15501571,"reputation":85,"user_id":12530743,"display_name":"Narasimman P"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663676806,"creation_date":1663676806,"answer_id":73786690,"question_id":43980900,"body_markdown":"You need to pass the Device as a flashAttr by creating instance for Device.\r\n\r\nthis.mockMvc.perform(get(url).flashAttr(&quot;device&quot;, new Device() {// Override Device members here}));","title":"Mock device for controller test","body":"<p>You need to pass the Device as a flashAttr by creating instance for Device.</p>\n<p>this.mockMvc.perform(get(url).flashAttr(&quot;device&quot;, new Device() {// Override Device members here}));</p>\n"}],"owner":{"account_id":10183181,"reputation":41,"user_id":7519186,"display_name":"Infire"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1426,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1663676806,"creation_date":1494855028,"question_id":43980900,"body_markdown":"I am trying to write a unit test for a controller that does different things depending on the device type.  \r\n\r\nThe first controller method and its test works fine, the method paramater *model* has a value and I can validate the value in the test.\r\n\r\nThe second controller method which expects a device works when called from a brwoser, but **not** in a unit test. When the test method `doSomething2Test()` is called I get a \r\n\r\n    org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.mobile.device.Device]: Specified class is an interface\r\n\r\nMy question: Why is the parameter *model* instantiated correctly but *device* is not? Is there a way to set the device in the MockMvc request or can I mock the device somehow?\r\n\r\nController:\r\n\r\n    @Controller\r\n    @RequestMapping(&quot;home&quot;)\r\n    public class MyController {\r\n\r\n\t    @RequestMapping(&quot;/test1&quot;)\r\n        public String doSomething1(Model model) {\r\n            String value = &quot;foo&quot;;\r\n            model.addAttribute(&quot;attribute1&quot;, value);        \r\n            return &quot;newUrl&quot;;\r\n        }\r\n\r\n        @RequestMapping(&quot;/test2&quot;)\r\n        public String doSomething2(Model model, Device device) {\r\n            if (device.isNormal()) {\r\n              // do stuff\r\n            }\r\n            return &quot;newUrl&quot;;\r\n        }\r\n    }\r\n\r\nTest: \r\n\r\n    @RunWith(SpringRunner.class)\r\n    @SpringBootTest(classes = Application.class, webEnvironment=SpringBootTest.WebEnvironment.RANDOM_PORT)\r\n    @WithMockUser(username=&quot;admin&quot;, authorities = {&quot;ALL&quot;})\r\n    public class MyControllerTest {\r\n    \r\n    \tprivate MockMvc mockMvc;\r\n\r\n        @InjectMocks\r\n        private MyController controllerUnderTest;\t\r\n    \t\r\n    \t@Before\r\n    \tpublic void setUp() {\r\n    \t\tMockitoAnnotations.initMocks(this);\r\n    \t\tInternalResourceViewResolver viewResolver = new InternalResourceViewResolver();\r\n            viewResolver.setPrefix(&quot;/WEB-INF/classes/templates&quot;);\r\n            viewResolver.setSuffix(&quot;.html&quot;);\r\n    \t    this.mockMvc =\r\n    \t            MockMvcBuilders.standaloneSetup(this.controllerUnderTest)\r\n    \t                    .setViewResolvers(viewResolver)\r\n    \t                    .build();\r\n    \t}\r\n    \t\r\n    \t@Test\r\n    \tpublic void doSomething1Test() throws Exception {\r\n            this.mockMvc.perform(get(&quot;/home/test1&quot;))\r\n    \t\t.andExpect(status().isOk())\r\n    \t\t.andExpect(model().attribute(&quot;attribute1&quot;, contains(&quot;foo&quot;)));\t\r\n    \t}\r\n\r\n\t    @Test\r\n    \tpublic void doSomething2Test() throws Exception {\r\n            this.mockMvc.perform(get(&quot;/home/test2&quot;))\r\n    \t\t.andExpect(status().isOk()));\t\r\n    \t}\r\n    }\r\n\r\n","title":"Mock device for controller test","body":"<p>I am trying to write a unit test for a controller that does different things depending on the device type.  </p>\n\n<p>The first controller method and its test works fine, the method paramater <em>model</em> has a value and I can validate the value in the test.</p>\n\n<p>The second controller method which expects a device works when called from a brwoser, but <strong>not</strong> in a unit test. When the test method <code>doSomething2Test()</code> is called I get a </p>\n\n<pre><code>org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.mobile.device.Device]: Specified class is an interface\n</code></pre>\n\n<p>My question: Why is the parameter <em>model</em> instantiated correctly but <em>device</em> is not? Is there a way to set the device in the MockMvc request or can I mock the device somehow?</p>\n\n<p>Controller:</p>\n\n<pre><code>@Controller\n@RequestMapping(\"home\")\npublic class MyController {\n\n    @RequestMapping(\"/test1\")\n    public String doSomething1(Model model) {\n        String value = \"foo\";\n        model.addAttribute(\"attribute1\", value);        \n        return \"newUrl\";\n    }\n\n    @RequestMapping(\"/test2\")\n    public String doSomething2(Model model, Device device) {\n        if (device.isNormal()) {\n          // do stuff\n        }\n        return \"newUrl\";\n    }\n}\n</code></pre>\n\n<p>Test: </p>\n\n<pre><code>@RunWith(SpringRunner.class)\n@SpringBootTest(classes = Application.class, webEnvironment=SpringBootTest.WebEnvironment.RANDOM_PORT)\n@WithMockUser(username=\"admin\", authorities = {\"ALL\"})\npublic class MyControllerTest {\n\n    private MockMvc mockMvc;\n\n    @InjectMocks\n    private MyController controllerUnderTest;   \n\n    @Before\n    public void setUp() {\n        MockitoAnnotations.initMocks(this);\n        InternalResourceViewResolver viewResolver = new InternalResourceViewResolver();\n        viewResolver.setPrefix(\"/WEB-INF/classes/templates\");\n        viewResolver.setSuffix(\".html\");\n        this.mockMvc =\n                MockMvcBuilders.standaloneSetup(this.controllerUnderTest)\n                        .setViewResolvers(viewResolver)\n                        .build();\n    }\n\n    @Test\n    public void doSomething1Test() throws Exception {\n        this.mockMvc.perform(get(\"/home/test1\"))\n        .andExpect(status().isOk())\n        .andExpect(model().attribute(\"attribute1\", contains(\"foo\")));   \n    }\n\n    @Test\n    public void doSomething2Test() throws Exception {\n        this.mockMvc.perform(get(\"/home/test2\"))\n        .andExpect(status().isOk()));   \n    }\n}\n</code></pre>\n"},{"tags":["java","mysql","hql"],"owner":{"account_id":12635345,"reputation":137,"user_id":9185003,"display_name":"Susmitha Kundukulam"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":103,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1663676726,"creation_date":1663676726,"question_id":73786676,"body_markdown":"I was trying to write a query using find_in_set() function and write the code as below:\r\n\r\n```\r\n@Repository\r\npublic interface AbcDAO extends JpaRepository&lt;AbcEntity, Integer&gt;, JpaSpecificationExecutor&lt;AbcEntity&gt; {\r\n\r\n    @Query(&quot;SELECT mb FROM AbcEntity mb where if(mb.assignto_user is NOT NULL , find_in_set(:user , mb.assignto_user) , mb.assignto_user IS NULL ) &quot;\r\n            + &quot;and  find_in_set(:role , mb.assigned_to) group by mb.id order by mb.id DESC&quot;)\r\n    public List&lt;AbcEntity&gt; abcInboxList(@Param(&quot;user&quot;) Integer user, @Param(&quot;role&quot;) Integer role);\r\n   \r\n}\r\n```\r\n\r\nAnd the dao method is called as below:\r\n\r\n```\r\nList&lt;AbcEntity&gt; abcList = abcDAO.abcInboxList(abcDTO.getUser_id(), abcDTO.getRole_id());\r\n\r\n```\r\n\r\nWhenever i tried to run the code, getting an error as unexpected AST node \r\n\r\n```\r\nCaused by: java.lang.IllegalArgumentException: Validation failed for query for method public abstract java.util.List com.xxx.dao.AbcDAO.abcInboxList(java.lang.Integer,java.lang.Integer)!\r\n\tat org.springframework.data.jpa.repository.query.SimpleJpaQuery.validateQuery(SimpleJpaQuery.java:96) ~[spring-data-jpa-2.5.6.jar:2.5.6]\r\n\tat org.springframework.data.jpa.repository.query.SimpleJpaQuery.&lt;init&gt;(SimpleJpaQuery.java:66) ~[spring-data-jpa-2.5.6.jar:2.5.6]\r\n\tat org.springframework.data.jpa.repository.query.JpaQueryFactory.fromMethodWithQueryString(JpaQueryFactory.java:51) ~[spring-data-jpa-2.5.6.jar:2.5.6]\r\n\tat org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$DeclaredQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:163) ~[spring-data-jpa-2.5.6.jar:2.5.6]\r\n\tat org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$CreateIfNotFoundQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:252) ~[spring-data-jpa-2.5.6.jar:2.5.6]\r\n\tat org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$AbstractQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:87) ~[spring-data-jpa-2.5.6.jar:2.5.6]\r\n\tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:102) ~[spring-data-commons-2.5.6.jar:2.5.6]\r\n\t... 71 common frames omitted\r\nCaused by: java.lang.IllegalArgumentException: org.hibernate.hql.internal.ast.QuerySyntaxException: unexpected AST node: ( near line 1, column 84 [SELECT mb FROM com.xxx.model.AbcEntity mb where if(mb.assignto_user is NOT NULL , find_in_set(:user , mb.assignto_user) , mb.assignto_user IS NULL ) and &#160;find_in_set(:role , mb.assigned_to) group by mb.id order by mb.id DESC]\r\n\tat org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:138) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:181) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:188) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:734) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:114) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]\r\n\tat org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:362) ~[spring-orm-5.3.12.jar:5.3.12]\r\n\tat com.sun.proxy.$Proxy166.createQuery(Unknown Source) ~[na:na]\r\n\tat org.springframework.data.jpa.repository.query.SimpleJpaQuery.validateQuery(SimpleJpaQuery.java:90) ~[spring-data-jpa-2.5.6.jar:2.5.6]\r\n\t... 77 common frames omitted\r\nCaused by: org.hibernate.hql.internal.ast.QuerySyntaxException: unexpected AST node: ( near line 1, column 84 [SELECT mb FROM com.xxx.model.AbcEntity mb where if(mb.assignto_user is NOT NULL , find_in_set(:user , mb.assignto_user) , mb.assignto_user IS NULL ) and &#160;find_in_set(:role , mb.assigned_to) group by mb.id order by mb.id DESC]\r\n\tat org.hibernate.hql.internal.ast.QuerySyntaxException.convert(QuerySyntaxException.java:74) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.hql.internal.ast.ErrorTracker.throwQueryException(ErrorTracker.java:93) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.hql.internal.ast.QueryTranslatorImpl.analyze(QueryTranslatorImpl.java:282) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.hql.internal.ast.QueryTranslatorImpl.doCompile(QueryTranslatorImpl.java:192) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.hql.internal.ast.QueryTranslatorImpl.compile(QueryTranslatorImpl.java:144) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.engine.query.spi.HQLQueryPlan.&lt;init&gt;(HQLQueryPlan.java:113) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.engine.query.spi.HQLQueryPlan.&lt;init&gt;(HQLQueryPlan.java:73) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.engine.query.spi.QueryPlanCache.getHQLQueryPlan(QueryPlanCache.java:162) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.internal.AbstractSharedSessionContract.getQueryPlan(AbstractSharedSessionContract.java:613) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:725) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\t... 85 common frames omitted\r\n```\r\n\r\n**Note: ** The query is running with proper result in MySql workbench.\r\n\r\nAny help is going to be appreciated. :) Thanks in advance\r\n\r\n","title":"Unexpected AST node : query using find_in_set()","body":"<p>I was trying to write a query using find_in_set() function and write the code as below:</p>\n<pre><code>@Repository\npublic interface AbcDAO extends JpaRepository&lt;AbcEntity, Integer&gt;, JpaSpecificationExecutor&lt;AbcEntity&gt; {\n\n    @Query(&quot;SELECT mb FROM AbcEntity mb where if(mb.assignto_user is NOT NULL , find_in_set(:user , mb.assignto_user) , mb.assignto_user IS NULL ) &quot;\n            + &quot;and  find_in_set(:role , mb.assigned_to) group by mb.id order by mb.id DESC&quot;)\n    public List&lt;AbcEntity&gt; abcInboxList(@Param(&quot;user&quot;) Integer user, @Param(&quot;role&quot;) Integer role);\n   \n}\n</code></pre>\n<p>And the dao method is called as below:</p>\n<pre><code>List&lt;AbcEntity&gt; abcList = abcDAO.abcInboxList(abcDTO.getUser_id(), abcDTO.getRole_id());\n\n</code></pre>\n<p>Whenever i tried to run the code, getting an error as unexpected AST node</p>\n<pre><code>Caused by: java.lang.IllegalArgumentException: Validation failed for query for method public abstract java.util.List com.xxx.dao.AbcDAO.abcInboxList(java.lang.Integer,java.lang.Integer)!\n    at org.springframework.data.jpa.repository.query.SimpleJpaQuery.validateQuery(SimpleJpaQuery.java:96) ~[spring-data-jpa-2.5.6.jar:2.5.6]\n    at org.springframework.data.jpa.repository.query.SimpleJpaQuery.&lt;init&gt;(SimpleJpaQuery.java:66) ~[spring-data-jpa-2.5.6.jar:2.5.6]\n    at org.springframework.data.jpa.repository.query.JpaQueryFactory.fromMethodWithQueryString(JpaQueryFactory.java:51) ~[spring-data-jpa-2.5.6.jar:2.5.6]\n    at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$DeclaredQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:163) ~[spring-data-jpa-2.5.6.jar:2.5.6]\n    at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$CreateIfNotFoundQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:252) ~[spring-data-jpa-2.5.6.jar:2.5.6]\n    at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$AbstractQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:87) ~[spring-data-jpa-2.5.6.jar:2.5.6]\n    at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:102) ~[spring-data-commons-2.5.6.jar:2.5.6]\n    ... 71 common frames omitted\nCaused by: java.lang.IllegalArgumentException: org.hibernate.hql.internal.ast.QuerySyntaxException: unexpected AST node: ( near line 1, column 84 [SELECT mb FROM com.xxx.model.AbcEntity mb where if(mb.assignto_user is NOT NULL , find_in_set(:user , mb.assignto_user) , mb.assignto_user IS NULL ) and find_in_set(:role , mb.assigned_to) group by mb.id order by mb.id DESC]\n    at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:138) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:181) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:188) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:734) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:114) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]\n    at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:362) ~[spring-orm-5.3.12.jar:5.3.12]\n    at com.sun.proxy.$Proxy166.createQuery(Unknown Source) ~[na:na]\n    at org.springframework.data.jpa.repository.query.SimpleJpaQuery.validateQuery(SimpleJpaQuery.java:90) ~[spring-data-jpa-2.5.6.jar:2.5.6]\n    ... 77 common frames omitted\nCaused by: org.hibernate.hql.internal.ast.QuerySyntaxException: unexpected AST node: ( near line 1, column 84 [SELECT mb FROM com.xxx.model.AbcEntity mb where if(mb.assignto_user is NOT NULL , find_in_set(:user , mb.assignto_user) , mb.assignto_user IS NULL ) and find_in_set(:role , mb.assigned_to) group by mb.id order by mb.id DESC]\n    at org.hibernate.hql.internal.ast.QuerySyntaxException.convert(QuerySyntaxException.java:74) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.hql.internal.ast.ErrorTracker.throwQueryException(ErrorTracker.java:93) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.hql.internal.ast.QueryTranslatorImpl.analyze(QueryTranslatorImpl.java:282) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.hql.internal.ast.QueryTranslatorImpl.doCompile(QueryTranslatorImpl.java:192) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.hql.internal.ast.QueryTranslatorImpl.compile(QueryTranslatorImpl.java:144) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.engine.query.spi.HQLQueryPlan.&lt;init&gt;(HQLQueryPlan.java:113) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.engine.query.spi.HQLQueryPlan.&lt;init&gt;(HQLQueryPlan.java:73) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.engine.query.spi.QueryPlanCache.getHQLQueryPlan(QueryPlanCache.java:162) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.internal.AbstractSharedSessionContract.getQueryPlan(AbstractSharedSessionContract.java:613) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:725) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    ... 85 common frames omitted\n</code></pre>\n<p>**Note: ** The query is running with proper result in MySql workbench.</p>\n<p>Any help is going to be appreciated. :) Thanks in advance</p>\n"},{"tags":["java","android","json"],"answers":[{"tags":[],"owner":{"account_id":10531491,"reputation":330,"user_id":7760687,"display_name":"Mayur"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1663666591,"creation_date":1663666591,"answer_id":73784564,"question_id":73783625,"body_markdown":"**Try This**\r\n\r\n**Change** \r\n\r\n    private void fetchMovies() {\r\n        //Url with auth\r\n        String url = &quot;https://api.json-generator.com/templates/z0aMAeTBHKq3/data&quot;;\r\n    \r\n        //URL without auth\r\n        //String url = &quot;https://jsonplaceholder.typicode.com/posts&quot;;\r\n    \r\n        JsonArrayRequest jsonArrayRequest = new JsonArrayRequest(Request.Method.GET, url, null,\r\n                new Response.Listener&lt;JSONArray&gt;() {\r\n            @Override\r\n            public void onResponse(JSONArray response) {\r\n    \r\n                for (int i = 0 ; i &lt; response.length() ; i ++){\r\n                    try {\r\n                        JSONObject jsonObject = response.getJSONObject(i);\r\n                        String userId = jsonObject.getString(&quot;userId&quot;);\r\n                        String id = jsonObject.getString(&quot;id&quot;);\r\n                        String title = jsonObject.getString(&quot;title&quot;);\r\n                        String body = jsonObject.getString(&quot;body&quot;);\r\n    \r\n                        Movie movie = new Movie(title , userId , id , body);\r\n                        movieList.add(movie);\r\n                    } catch (JSONException e) {\r\n                        e.printStackTrace();\r\n                    }\r\n    \r\n                    MovieAdapter adapter = new MovieAdapter(MainActivity.this , movieList);\r\n    \r\n                    recyclerView.setAdapter(adapter);\r\n                }\r\n            }\r\n        }, new Response.ErrorListener() {\r\n            @Override\r\n            public void onErrorResponse(VolleyError error) {\r\n                Toast.makeText(MainActivity.this, error.getMessage(), Toast.LENGTH_SHORT).show();\r\n            }\r\n        });\r\n        HashMap headers = new HashMap();\r\n        String authValue = &quot;Bearer &quot; + \r\n        &quot;2oof0bzpgllll2a8k2fmmh6aaykeu8yptztdzke7&quot;;\r\n        headers.put(&quot;Authorization&quot;, authValue);\r\n        headers.put(&quot;Accept&quot;, &quot;application/json; charset=UTF-8&quot;);\r\n        headers.put(&quot;Content-Type&quot;, &quot;application/json; charset=UTF-8&quot;);\r\n    \r\n        requestQueue.add(jsonArrayRequest);\r\n    }\r\n\r\n**To**\r\n\r\n    private void fetchMovies() {\r\n    //        Url with auth\r\n            String url = &quot;https://api.json-generator.com/templates/z0aMAeTBHKq3/data&quot;;\r\n    \r\n    //        URL without auth\r\n    //        String url = &quot;https://jsonplaceholder.typicode.com/posts&quot;;\r\n    \r\n              JsonArrayRequest jsonArrayRequest = new JsonArrayRequest(Request.Method.GET, url, null,\r\n                    new Response.Listener&lt;JSONArray&gt;() {\r\n                        @Override\r\n                        public void onResponse(JSONArray response) {\r\n    \r\n                            for (int i = 0 ; i &lt; response.length() ; i ++){\r\n                                try {\r\n                                    JSONObject jsonObject = response.getJSONObject(i);\r\n                                    String userId = jsonObject.getString(&quot;userId&quot;);\r\n                                    String id = jsonObject.getString(&quot;id&quot;);\r\n                                    String title = jsonObject.getString(&quot;title&quot;);\r\n                                    String body = jsonObject.getString(&quot;body&quot;);\r\n    \r\n                                    Movie movie = new Movie(title , userId , id , body);\r\n                                    movieList.add(movie);\r\n                                } catch (JSONException e) {\r\n                                    e.printStackTrace();\r\n                                }\r\n    \r\n                                MovieAdapter adapter = new MovieAdapter(MainActivity.this , movieList);\r\n    \r\n                                recyclerView.setAdapter(adapter);\r\n                            }\r\n                        }\r\n                    }, new Response.ErrorListener() {\r\n                @Override\r\n                public void onErrorResponse(VolleyError error) {\r\n                    Toast.makeText(MainActivity.this, error.getMessage(), Toast.LENGTH_SHORT).show();\r\n                }\r\n            }){\r\n                @Override\r\n                public Map&lt;String, String&gt; getHeaders() throws AuthFailureError {\r\n                    Map&lt;String, String&gt; headers = new HashMap&lt;String, String&gt;();\r\n                    String authValue = &quot;Bearer &quot; + &quot;2oof0bzpgllll2a8k2fmmh6aaykeu8yptztdzke7&quot;;\r\n                    headers.put(&quot;Authorization&quot;, authValue);\r\n                    headers.put(&quot;Accept&quot;, &quot;application/json; charset=UTF-8&quot;);\r\n                    headers.put(&quot;Content-Type&quot;, &quot;application/json; charset=UTF-8&quot;);\r\n                    return headers;\r\n                }\r\n    \r\n            };\r\n            requestQueue.add(jsonArrayRequest);\r\n        }\r\n\r\nput your headers code inside `getHeaders() @Overtide` method","title":"How to access json array in url that needs bearer token and display in android studio?","body":"<p><strong>Try This</strong></p>\n<p><strong>Change</strong></p>\n<pre><code>private void fetchMovies() {\n    //Url with auth\n    String url = &quot;https://api.json-generator.com/templates/z0aMAeTBHKq3/data&quot;;\n\n    //URL without auth\n    //String url = &quot;https://jsonplaceholder.typicode.com/posts&quot;;\n\n    JsonArrayRequest jsonArrayRequest = new JsonArrayRequest(Request.Method.GET, url, null,\n            new Response.Listener&lt;JSONArray&gt;() {\n        @Override\n        public void onResponse(JSONArray response) {\n\n            for (int i = 0 ; i &lt; response.length() ; i ++){\n                try {\n                    JSONObject jsonObject = response.getJSONObject(i);\n                    String userId = jsonObject.getString(&quot;userId&quot;);\n                    String id = jsonObject.getString(&quot;id&quot;);\n                    String title = jsonObject.getString(&quot;title&quot;);\n                    String body = jsonObject.getString(&quot;body&quot;);\n\n                    Movie movie = new Movie(title , userId , id , body);\n                    movieList.add(movie);\n                } catch (JSONException e) {\n                    e.printStackTrace();\n                }\n\n                MovieAdapter adapter = new MovieAdapter(MainActivity.this , movieList);\n\n                recyclerView.setAdapter(adapter);\n            }\n        }\n    }, new Response.ErrorListener() {\n        @Override\n        public void onErrorResponse(VolleyError error) {\n            Toast.makeText(MainActivity.this, error.getMessage(), Toast.LENGTH_SHORT).show();\n        }\n    });\n    HashMap headers = new HashMap();\n    String authValue = &quot;Bearer &quot; + \n    &quot;2oof0bzpgllll2a8k2fmmh6aaykeu8yptztdzke7&quot;;\n    headers.put(&quot;Authorization&quot;, authValue);\n    headers.put(&quot;Accept&quot;, &quot;application/json; charset=UTF-8&quot;);\n    headers.put(&quot;Content-Type&quot;, &quot;application/json; charset=UTF-8&quot;);\n\n    requestQueue.add(jsonArrayRequest);\n}\n</code></pre>\n<p><strong>To</strong></p>\n<pre><code>private void fetchMovies() {\n//        Url with auth\n        String url = &quot;https://api.json-generator.com/templates/z0aMAeTBHKq3/data&quot;;\n\n//        URL without auth\n//        String url = &quot;https://jsonplaceholder.typicode.com/posts&quot;;\n\n          JsonArrayRequest jsonArrayRequest = new JsonArrayRequest(Request.Method.GET, url, null,\n                new Response.Listener&lt;JSONArray&gt;() {\n                    @Override\n                    public void onResponse(JSONArray response) {\n\n                        for (int i = 0 ; i &lt; response.length() ; i ++){\n                            try {\n                                JSONObject jsonObject = response.getJSONObject(i);\n                                String userId = jsonObject.getString(&quot;userId&quot;);\n                                String id = jsonObject.getString(&quot;id&quot;);\n                                String title = jsonObject.getString(&quot;title&quot;);\n                                String body = jsonObject.getString(&quot;body&quot;);\n\n                                Movie movie = new Movie(title , userId , id , body);\n                                movieList.add(movie);\n                            } catch (JSONException e) {\n                                e.printStackTrace();\n                            }\n\n                            MovieAdapter adapter = new MovieAdapter(MainActivity.this , movieList);\n\n                            recyclerView.setAdapter(adapter);\n                        }\n                    }\n                }, new Response.ErrorListener() {\n            @Override\n            public void onErrorResponse(VolleyError error) {\n                Toast.makeText(MainActivity.this, error.getMessage(), Toast.LENGTH_SHORT).show();\n            }\n        }){\n            @Override\n            public Map&lt;String, String&gt; getHeaders() throws AuthFailureError {\n                Map&lt;String, String&gt; headers = new HashMap&lt;String, String&gt;();\n                String authValue = &quot;Bearer &quot; + &quot;2oof0bzpgllll2a8k2fmmh6aaykeu8yptztdzke7&quot;;\n                headers.put(&quot;Authorization&quot;, authValue);\n                headers.put(&quot;Accept&quot;, &quot;application/json; charset=UTF-8&quot;);\n                headers.put(&quot;Content-Type&quot;, &quot;application/json; charset=UTF-8&quot;);\n                return headers;\n            }\n\n        };\n        requestQueue.add(jsonArrayRequest);\n    }\n</code></pre>\n<p>put your headers code inside <code>getHeaders() @Overtide</code> method</p>\n"}],"owner":{"account_id":15424795,"reputation":3,"user_id":11127812,"display_name":"Nathan Ocamps"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":187,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":73784564,"answer_count":1,"score":-1,"last_activity_date":1663676632,"creation_date":1663662127,"question_id":73783625,"body_markdown":"Hello stackoverflow community!! \r\n\r\nHow do I access a JSON array \r\nin this URL &quot;https://api.json-generator.com/templates/z0aMAeTBHKq3/data&quot; \r\n\r\ntoken is &quot;2oof0bzpgllll2a8k2fmmh6aaykeu8yptztdzke7&quot;  \r\n\r\nbut when I display the data in an `Activity`, it just displays blank and exits the app. But When I change the URL without an auth/bearer token I can see the displayed data in the URL.\r\n\r\nSo my question: is how do I put the token in header so that I can have access and see the data displayed in the mobile phone?\r\n\r\nI know it is simple but i am having a hard time. \r\n\r\n**This is my *MainActivity.java***\r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n\r\n    private RecyclerView recyclerView;\r\n    private RequestQueue requestQueue;\r\n    private List&lt;Movie&gt; movieList;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        recyclerView = findViewById(R.id.recyclerview);\r\n        recyclerView.setHasFixedSize(true);\r\n        recyclerView.setLayoutManager(new LinearLayoutManager(this));\r\n\r\n        requestQueue = VolleySingleton.getmInstance(this).getRequestQueue();\r\n\r\n        movieList = new ArrayList&lt;&gt;();\r\n        fetchMovies();\r\n\r\n    }\r\n\r\n\r\n    private void fetchMovies() {\r\n        //Url with auth\r\n        String url = &quot;https://api.json-generator.com/templates/z0aMAeTBHKq3/data&quot;;\r\n\r\n        //URL without auth\r\n        //String url = &quot;https://jsonplaceholder.typicode.com/posts&quot;;\r\n\r\n        JsonArrayRequest jsonArrayRequest = new JsonArrayRequest(Request.Method.GET, url, null,\r\n                new Response.Listener&lt;JSONArray&gt;() {\r\n            @Override\r\n            public void onResponse(JSONArray response) {\r\n\r\n                for (int i = 0 ; i &lt; response.length() ; i ++){\r\n                    try {\r\n                        JSONObject jsonObject = response.getJSONObject(i);\r\n                        String userId = jsonObject.getString(&quot;userId&quot;);\r\n                        String id = jsonObject.getString(&quot;id&quot;);\r\n                        String title = jsonObject.getString(&quot;title&quot;);\r\n                        String body = jsonObject.getString(&quot;body&quot;);\r\n\r\n                        Movie movie = new Movie(title , userId , id , body);\r\n                        movieList.add(movie);\r\n                    } catch (JSONException e) {\r\n                        e.printStackTrace();\r\n                    }\r\n\r\n                    MovieAdapter adapter = new MovieAdapter(MainActivity.this , movieList);\r\n\r\n                    recyclerView.setAdapter(adapter);\r\n                }\r\n            }\r\n        }, new Response.ErrorListener() {\r\n            @Override\r\n            public void onErrorResponse(VolleyError error) {\r\n                Toast.makeText(MainActivity.this, error.getMessage(), Toast.LENGTH_SHORT).show();\r\n            }\r\n        });\r\n        HashMap headers = new HashMap();\r\n        String authValue = &quot;Bearer &quot; + \r\n        &quot;2oof0bzpgllll2a8k2fmmh6aaykeu8yptztdzke7&quot;;\r\n        headers.put(&quot;Authorization&quot;, authValue);\r\n        headers.put(&quot;Accept&quot;, &quot;application/json; charset=UTF-8&quot;);\r\n        headers.put(&quot;Content-Type&quot;, &quot;application/json; charset=UTF-8&quot;);\r\n\r\n        requestQueue.add(jsonArrayRequest);\r\n    }\r\n    }\r\n\r\n**this is my *Movie.java***\r\n\r\n    public class Movie {\r\n\r\n    private String userId , id , title, body;\r\n\r\n\r\n    public Movie(String userId , String id , String title , String body){\r\n        this.title = title;\r\n        this.userId = userId;\r\n        this.id = id;\r\n        this.body = body;\r\n    }\r\n\r\n    public String getTitle() {\r\n        return title;\r\n    }\r\n\r\n    public String getUserId() {\r\n        return userId;\r\n    }\r\n\r\n    public String getId() {\r\n        return id;\r\n    }\r\n\r\n    public String getBody() {\r\n        return body;\r\n    }\r\n    }\r\n\r\n**this is my *MovieAdapter.java***\r\n\r\n    public class MovieAdapter extends RecyclerView.Adapter&lt;MovieAdapter.MovieHolder&gt; {\r\n\r\n    private Context context;\r\n    private List&lt;Movie&gt; movieList;\r\n\r\n    public MovieAdapter(Context context , List&lt;Movie&gt; movies){\r\n        this.context = context;\r\n        movieList = movies;\r\n    }\r\n    @NonNull\r\n    @Override\r\n    public MovieHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n        View view = LayoutInflater.from(context).inflate(R.layout.item , parent , false);\r\n        return new MovieHolder(view);\r\n    }\r\n\r\n    @Override\r\n    public void onBindViewHolder(@NonNull MovieHolder holder, int position) {\r\n\r\n        Movie movie = movieList.get(position);\r\n        holder.userId.setText(movie.getUserId().toString());\r\n        holder.id.setText(movie.getId());\r\n        holder.title.setText(movie.getTitle());\r\n        holder.body.setText(movie.getBody());\r\n\r\n\r\n        holder.constraintLayout.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent(context , DetailActivity.class);\r\n\r\n                Bundle bundle = new Bundle();\r\n                bundle.putString(&quot;userId&quot; , movie.getUserId());\r\n                bundle.putString(&quot;id&quot; , movie.getId());\r\n                bundle.putString(&quot;title&quot; , movie.getTitle());\r\n                bundle.putString(&quot;body&quot; , movie.getBody());\r\n\r\n                intent.putExtras(bundle);\r\n\r\n                context.startActivity(intent);\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    @Override\r\n    public int getItemCount() {\r\n        return movieList.size();\r\n    }\r\n\r\n    public class MovieHolder extends RecyclerView.ViewHolder{\r\n\r\n\r\n        TextView title , userId , id, body;\r\n        ConstraintLayout constraintLayout;\r\n\r\n        public MovieHolder(@NonNull View itemView) {\r\n            super(itemView);\r\n\r\n            userId = itemView.findViewById(R.id.userid_tv);\r\n            title = itemView.findViewById(R.id.title_tv);\r\n            id = itemView.findViewById(R.id.id_tv);\r\n            body = itemView.findViewById(R.id.id_tv);\r\n            constraintLayout = itemView.findViewById(R.id.main_layout);\r\n        }\r\n    }\r\n    }\r\n\r\n**This is my VolleySingleton.java**\r\n\r\n    public class VolleySingleton {\r\n\r\n    private RequestQueue requestQueue;\r\n    private static VolleySingleton mInstance;\r\n\r\n    private VolleySingleton(Context context){\r\n        requestQueue = Volley.newRequestQueue(context.getApplicationContext());\r\n    }\r\n\r\n    public static synchronized VolleySingleton getmInstance(Context context){\r\n\r\n        if (mInstance == null){\r\n            mInstance = new VolleySingleton(context);\r\n        }\r\n        return mInstance;\r\n    }\r\n\r\n    public RequestQueue getRequestQueue(){return requestQueue;}\r\n    }\r\n","title":"How to access json array in url that needs bearer token and display in android studio?","body":"<p>Hello stackoverflow community!!</p>\n<p>How do I access a JSON array\nin this URL &quot;https://api.json-generator.com/templates/z0aMAeTBHKq3/data&quot;</p>\n<p>token is &quot;2oof0bzpgllll2a8k2fmmh6aaykeu8yptztdzke7&quot;</p>\n<p>but when I display the data in an <code>Activity</code>, it just displays blank and exits the app. But When I change the URL without an auth/bearer token I can see the displayed data in the URL.</p>\n<p>So my question: is how do I put the token in header so that I can have access and see the data displayed in the mobile phone?</p>\n<p>I know it is simple but i am having a hard time.</p>\n<p><strong>This is my <em>MainActivity.java</em></strong></p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n\nprivate RecyclerView recyclerView;\nprivate RequestQueue requestQueue;\nprivate List&lt;Movie&gt; movieList;\n\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n\n    recyclerView = findViewById(R.id.recyclerview);\n    recyclerView.setHasFixedSize(true);\n    recyclerView.setLayoutManager(new LinearLayoutManager(this));\n\n    requestQueue = VolleySingleton.getmInstance(this).getRequestQueue();\n\n    movieList = new ArrayList&lt;&gt;();\n    fetchMovies();\n\n}\n\n\nprivate void fetchMovies() {\n    //Url with auth\n    String url = &quot;https://api.json-generator.com/templates/z0aMAeTBHKq3/data&quot;;\n\n    //URL without auth\n    //String url = &quot;https://jsonplaceholder.typicode.com/posts&quot;;\n\n    JsonArrayRequest jsonArrayRequest = new JsonArrayRequest(Request.Method.GET, url, null,\n            new Response.Listener&lt;JSONArray&gt;() {\n        @Override\n        public void onResponse(JSONArray response) {\n\n            for (int i = 0 ; i &lt; response.length() ; i ++){\n                try {\n                    JSONObject jsonObject = response.getJSONObject(i);\n                    String userId = jsonObject.getString(&quot;userId&quot;);\n                    String id = jsonObject.getString(&quot;id&quot;);\n                    String title = jsonObject.getString(&quot;title&quot;);\n                    String body = jsonObject.getString(&quot;body&quot;);\n\n                    Movie movie = new Movie(title , userId , id , body);\n                    movieList.add(movie);\n                } catch (JSONException e) {\n                    e.printStackTrace();\n                }\n\n                MovieAdapter adapter = new MovieAdapter(MainActivity.this , movieList);\n\n                recyclerView.setAdapter(adapter);\n            }\n        }\n    }, new Response.ErrorListener() {\n        @Override\n        public void onErrorResponse(VolleyError error) {\n            Toast.makeText(MainActivity.this, error.getMessage(), Toast.LENGTH_SHORT).show();\n        }\n    });\n    HashMap headers = new HashMap();\n    String authValue = &quot;Bearer &quot; + \n    &quot;2oof0bzpgllll2a8k2fmmh6aaykeu8yptztdzke7&quot;;\n    headers.put(&quot;Authorization&quot;, authValue);\n    headers.put(&quot;Accept&quot;, &quot;application/json; charset=UTF-8&quot;);\n    headers.put(&quot;Content-Type&quot;, &quot;application/json; charset=UTF-8&quot;);\n\n    requestQueue.add(jsonArrayRequest);\n}\n}\n</code></pre>\n<p><strong>this is my <em>Movie.java</em></strong></p>\n<pre><code>public class Movie {\n\nprivate String userId , id , title, body;\n\n\npublic Movie(String userId , String id , String title , String body){\n    this.title = title;\n    this.userId = userId;\n    this.id = id;\n    this.body = body;\n}\n\npublic String getTitle() {\n    return title;\n}\n\npublic String getUserId() {\n    return userId;\n}\n\npublic String getId() {\n    return id;\n}\n\npublic String getBody() {\n    return body;\n}\n}\n</code></pre>\n<p><strong>this is my <em>MovieAdapter.java</em></strong></p>\n<pre><code>public class MovieAdapter extends RecyclerView.Adapter&lt;MovieAdapter.MovieHolder&gt; {\n\nprivate Context context;\nprivate List&lt;Movie&gt; movieList;\n\npublic MovieAdapter(Context context , List&lt;Movie&gt; movies){\n    this.context = context;\n    movieList = movies;\n}\n@NonNull\n@Override\npublic MovieHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\n    View view = LayoutInflater.from(context).inflate(R.layout.item , parent , false);\n    return new MovieHolder(view);\n}\n\n@Override\npublic void onBindViewHolder(@NonNull MovieHolder holder, int position) {\n\n    Movie movie = movieList.get(position);\n    holder.userId.setText(movie.getUserId().toString());\n    holder.id.setText(movie.getId());\n    holder.title.setText(movie.getTitle());\n    holder.body.setText(movie.getBody());\n\n\n    holder.constraintLayout.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View v) {\n            Intent intent = new Intent(context , DetailActivity.class);\n\n            Bundle bundle = new Bundle();\n            bundle.putString(&quot;userId&quot; , movie.getUserId());\n            bundle.putString(&quot;id&quot; , movie.getId());\n            bundle.putString(&quot;title&quot; , movie.getTitle());\n            bundle.putString(&quot;body&quot; , movie.getBody());\n\n            intent.putExtras(bundle);\n\n            context.startActivity(intent);\n        }\n    });\n\n}\n\n@Override\npublic int getItemCount() {\n    return movieList.size();\n}\n\npublic class MovieHolder extends RecyclerView.ViewHolder{\n\n\n    TextView title , userId , id, body;\n    ConstraintLayout constraintLayout;\n\n    public MovieHolder(@NonNull View itemView) {\n        super(itemView);\n\n        userId = itemView.findViewById(R.id.userid_tv);\n        title = itemView.findViewById(R.id.title_tv);\n        id = itemView.findViewById(R.id.id_tv);\n        body = itemView.findViewById(R.id.id_tv);\n        constraintLayout = itemView.findViewById(R.id.main_layout);\n    }\n}\n}\n</code></pre>\n<p><strong>This is my VolleySingleton.java</strong></p>\n<pre><code>public class VolleySingleton {\n\nprivate RequestQueue requestQueue;\nprivate static VolleySingleton mInstance;\n\nprivate VolleySingleton(Context context){\n    requestQueue = Volley.newRequestQueue(context.getApplicationContext());\n}\n\npublic static synchronized VolleySingleton getmInstance(Context context){\n\n    if (mInstance == null){\n        mInstance = new VolleySingleton(context);\n    }\n    return mInstance;\n}\n\npublic RequestQueue getRequestQueue(){return requestQueue;}\n}\n</code></pre>\n"},{"tags":["java","web-scraping","xpath","htmlunit"],"comments":[{"owner":{"account_id":3377022,"reputation":11135,"user_id":2834978,"display_name":"LMC"},"score":1,"creation_date":1663620093,"post_id":73778925,"comment_id":130278809,"body_markdown":"Should it be `//div[contains(@class, &#39;client_address1&#39;)]/text()`?","body":"Should it be <code>&#47;&#47;div[contains(@class, &#39;client_address1&#39;)]&#47;text()</code>?"},{"owner":{"account_id":933736,"reputation":13154,"user_id":963076,"accept_rate":59,"display_name":"ryvantage"},"score":1,"creation_date":1663620642,"post_id":73778925,"comment_id":130278991,"body_markdown":"@LMC good solution. So I lean on the XPath to get the text, not the HtmlUnit methods. It works (had to change `HtmlDivision` to `DomText` but I got it). Leave an answer and I&#39;ll give you your points.","body":"@LMC good solution. So I lean on the XPath to get the text, not the HtmlUnit methods. It works (had to change <code>HtmlDivision</code> to <code>DomText</code> but I got it). Leave an answer and I&#39;ll give you your points."}],"answers":[{"tags":[],"owner":{"account_id":3377022,"reputation":11135,"user_id":2834978,"display_name":"LMC"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1663621260,"creation_date":1663621260,"answer_id":73779255,"question_id":73778925,"body_markdown":"A bit more specific XPath would help\r\n\r\n    //div[contains(@class, &#39;client_address1&#39;)]/text()","title":"HtmlUnit asNormalizedText() returns empty string","body":"<p>A bit more specific XPath would help</p>\n<pre><code>//div[contains(@class, 'client_address1')]/text()\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6163228,"reputation":2754,"user_id":4804091,"display_name":"RBRi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663676270,"creation_date":1663676270,"answer_id":73786578,"question_id":73778925,"body_markdown":"&gt; What circumstances would cause asNormalizedText to return nothing?\r\n\r\nFrom the javadoc:\r\n\r\nReturns a normalized textual representation of this element that represents\r\nwhat **would be visible to the user if this page was shown in a web browser**.\r\n\r\nPlease check the css class - maybe the style hides the text.","title":"HtmlUnit asNormalizedText() returns empty string","body":"<blockquote>\n<p>What circumstances would cause asNormalizedText to return nothing?</p>\n</blockquote>\n<p>From the javadoc:</p>\n<p>Returns a normalized textual representation of this element that represents\nwhat <strong>would be visible to the user if this page was shown in a web browser</strong>.</p>\n<p>Please check the css class - maybe the style hides the text.</p>\n"}],"owner":{"account_id":933736,"reputation":13154,"user_id":963076,"accept_rate":59,"display_name":"ryvantage"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73779255,"answer_count":2,"score":0,"last_activity_date":1663676270,"creation_date":1663619191,"question_id":73778925,"body_markdown":"I have this code:\r\n\r\n    HtmlPage rowPage = ...\r\n    String address1 = ((HtmlDivision)rowPage.getFirstByXPath(&quot;//div[contains(@class, &#39;client_address1&#39;)]&quot;)).asXml();\r\n    System.out.println(&quot;address1 = &quot; + address1);\r\n    String address1_2 = ((HtmlDivision)rowPage.getFirstByXPath(&quot;//div[contains(@class, &#39;client_address1&#39;)]&quot;)).asNormalizedText();\r\n    System.out.println(&quot;address1_2 = &quot; + address1_2);\r\n    \r\nand my output is:\r\n\r\n    address1 = &lt;div class=&quot;client_address1 clientRow&quot;&gt;\r\n      123 Somewhere ln\r\n    &lt;/div&gt;\r\n\r\n    address1_2 = \r\n    \r\nI expect `asNormalizedText()` to return `123 Somewhere ln`. What circumstances would cause `asNormalizedText` to return nothing?","title":"HtmlUnit asNormalizedText() returns empty string","body":"<p>I have this code:</p>\n<pre><code>HtmlPage rowPage = ...\nString address1 = ((HtmlDivision)rowPage.getFirstByXPath(&quot;//div[contains(@class, 'client_address1')]&quot;)).asXml();\nSystem.out.println(&quot;address1 = &quot; + address1);\nString address1_2 = ((HtmlDivision)rowPage.getFirstByXPath(&quot;//div[contains(@class, 'client_address1')]&quot;)).asNormalizedText();\nSystem.out.println(&quot;address1_2 = &quot; + address1_2);\n</code></pre>\n<p>and my output is:</p>\n<pre><code>address1 = &lt;div class=&quot;client_address1 clientRow&quot;&gt;\n  123 Somewhere ln\n&lt;/div&gt;\n\naddress1_2 = \n</code></pre>\n<p>I expect <code>asNormalizedText()</code> to return <code>123 Somewhere ln</code>. What circumstances would cause <code>asNormalizedText</code> to return nothing?</p>\n"},{"tags":["java","arrays","error-handling","double"],"comments":[{"owner":{"account_id":23667337,"reputation":1467,"user_id":17694626,"display_name":"Cheng Thao"},"score":2,"creation_date":1663676735,"post_id":73786575,"comment_id":130291680,"body_markdown":"I don&#39;t understand what you are asking.  But your i, j variables should be int, not double.","body":"I don&#39;t understand what you are asking.  But your i, j variables should be int, not double."},{"owner":{"account_id":26135328,"reputation":1,"user_id":19825408,"display_name":"Lachlan Stedman"},"score":0,"creation_date":1663676880,"post_id":73786575,"comment_id":130291726,"body_markdown":"i am just trying to get the matrix to be able to handle double values rather than int values. thanks for the advice though","body":"i am just trying to get the matrix to be able to handle double values rather than int values. thanks for the advice though"},{"owner":{"account_id":26135328,"reputation":1,"user_id":19825408,"display_name":"Lachlan Stedman"},"score":0,"creation_date":1663677015,"post_id":73786575,"comment_id":130291783,"body_markdown":"Cheng Thao you just solved my error thank you so much!","body":"Cheng Thao you just solved my error thank you so much!"}],"owner":{"account_id":26135328,"reputation":1,"user_id":19825408,"display_name":"Lachlan Stedman"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1663676260,"creation_date":1663676260,"question_id":73786575,"body_markdown":"I am trying to understand why the following program won&#39;t print an array in the data type double and then calculate the trace and normal. The array is aimed to be a 5 by 5 array\r\n\r\n```\r\n    import java.io.*;  \r\npublic class Practice\r\n\r\n{  \r\n//size of the given matrix  \r\nstatic double MAX = 10;  \r\n//the method calculates and returns Normal of a matrix   \r\nstatic double calculateNormal(double matrix[][], double n)  \r\n{  \r\n    double sum = 0;  \r\n    for (double i=0; i&lt;n; i++)  \r\n        for (double j=0; j&lt;n; j++)  \r\n            sum = sum + matrix[i][j]*matrix[i][j];  \r\n    return (double)Math.sqrt(sum);  \r\n}  \r\n//the method calculates and returns trace of a matrix  \r\nstatic double calculateTrace(double matrix[][], double n)  \r\n{  \r\n    double sum = 0;  \r\n    for (double i=0; i&lt;n; i++)  \r\n        sum = sum + matrix[i][i];  \r\n    return sum;  \r\n}  \r\n//driver code  \r\npublic static void main (String args[])   \r\n    {  \r\n        //initializing matrix elements   \r\n        double matrix[][] = {{17.5, -2.9, 9.8, -18.8, 14.5},  \r\n                          {4.9, 11.6, -4.2, -8.6, -19.3},  \r\n                          {-10.7, 14.5, -15.3, -16.9, 4.7},  \r\n                          {-2.5, -4.4, 2.2, 13.7, -16.6},  \r\n                          {4.2, -18.7, -3.9, -14.5, 16.8},  \r\n                         };  \r\n        System.out.println (&quot;Trace of the give matrix is: &quot;+ calculateTrace(matrix, 5));  \r\n        System.out.println (&quot;Normal of the given matrix is: &quot;+ calculateNormal(matrix, 5));  \r\n    }  \r\n}  \r\n```","title":"Attempting to create a 2 Dimensional array that is capable of printing out double outputs rather than an int only output. I want this to take doubles","body":"<p>I am trying to understand why the following program won't print an array in the data type double and then calculate the trace and normal. The array is aimed to be a 5 by 5 array</p>\n<pre><code>    import java.io.*;  \npublic class Practice\n\n{  \n//size of the given matrix  \nstatic double MAX = 10;  \n//the method calculates and returns Normal of a matrix   \nstatic double calculateNormal(double matrix[][], double n)  \n{  \n    double sum = 0;  \n    for (double i=0; i&lt;n; i++)  \n        for (double j=0; j&lt;n; j++)  \n            sum = sum + matrix[i][j]*matrix[i][j];  \n    return (double)Math.sqrt(sum);  \n}  \n//the method calculates and returns trace of a matrix  \nstatic double calculateTrace(double matrix[][], double n)  \n{  \n    double sum = 0;  \n    for (double i=0; i&lt;n; i++)  \n        sum = sum + matrix[i][i];  \n    return sum;  \n}  \n//driver code  \npublic static void main (String args[])   \n    {  \n        //initializing matrix elements   \n        double matrix[][] = {{17.5, -2.9, 9.8, -18.8, 14.5},  \n                          {4.9, 11.6, -4.2, -8.6, -19.3},  \n                          {-10.7, 14.5, -15.3, -16.9, 4.7},  \n                          {-2.5, -4.4, 2.2, 13.7, -16.6},  \n                          {4.2, -18.7, -3.9, -14.5, 16.8},  \n                         };  \n        System.out.println (&quot;Trace of the give matrix is: &quot;+ calculateTrace(matrix, 5));  \n        System.out.println (&quot;Normal of the given matrix is: &quot;+ calculateNormal(matrix, 5));  \n    }  \n}  \n</code></pre>\n"},{"tags":["java","selenium","junit","automation"],"comments":[{"owner":{"account_id":60737,"reputation":15904,"user_id":181336,"display_name":"Adriaan Koster"},"score":0,"creation_date":1663662602,"post_id":73783686,"comment_id":130286864,"body_markdown":"Normally unit test order of execution is not guaranteed, and your test should never depend on the order of the execution of test cases because each case should be independent.","body":"Normally unit test order of execution is not guaranteed, and your test should never depend on the order of the execution of test cases because each case should be independent."},{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":1,"creation_date":1663663880,"post_id":73783686,"comment_id":130287300,"body_markdown":"Because your class is called `Order` I had to use fully-qualified class names for `@Order` (`@@org.junit.jupiter.api.Order`). When I ran the test the methods were executed in the expected order: 4, 3, ,2 ,1.","body":"Because your class is called <code>Order</code> I had to use fully-qualified class names for <code>@Order</code> (<code>@@org.junit.jupiter.api.Order</code>). When I ran the test the methods were executed in the expected order: 4, 3, ,2 ,1."}],"answers":[{"tags":[],"owner":{"account_id":10404380,"reputation":2588,"user_id":7671727,"display_name":"AbiSaran"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1663676182,"creation_date":1663676182,"answer_id":73786567,"question_id":73783686,"body_markdown":"Change the first import - `import org.junit.Test;` to `import org.junit.jupiter.api.Test;`, that is the issue here.\r\nI&#39;ve got output as:\r\n\r\n    This is test 4\r\n    This is test 3\r\n    This is test 2\r\n    This is test 1\r\n\r\n","title":"Order of execution in junit","body":"<p>Change the first import - <code>import org.junit.Test;</code> to <code>import org.junit.jupiter.api.Test;</code>, that is the issue here.\nI've got output as:</p>\n<pre><code>This is test 4\nThis is test 3\nThis is test 2\nThis is test 1\n</code></pre>\n"}],"owner":{"account_id":25741076,"reputation":1,"user_id":19495076,"display_name":"adarsh sasi"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1663676182,"creation_date":1663662505,"question_id":73783686,"body_markdown":"My code   \r\n  \r\n    import org.junit.Test;\r\n    import org.junit.jupiter.api.MethodOrderer.OrderAnnotation;\r\n    import org.junit.jupiter.api.Order;\r\n    import org.junit.jupiter.api.TestMethodOrder;\r\n    \r\n    @TestMethodOrder(OrderAnnotation.class)\r\n    public class Order {\r\n\r\n        @Test\r\n        @Order(4)\r\n        public void test1() {\r\n        \tSystem.out.println(&quot;This is test 1&quot;);\r\n        }\r\n\r\n        @Test\r\n        @Order(3)\r\n        public void test2() {\r\n        \tSystem.out.println(&quot;This is test 2&quot;);\r\n        }\r\n\r\n        @Test\r\n        @Order(2)\r\n        public void test3() {\r\n        \tSystem.out.println(&quot;This is test 3&quot;);\r\n        }\r\n\r\n        @Test\r\n        @Order(1)\r\n        public void test4() {\r\n        \tSystem.out.println(&quot;This is test 4&quot;);\r\n        }\r\n    }\r\n\r\n\r\nThe output of the code\r\n\r\n    This is test 1\r\n    This is test 2\r\n    This is test 3\r\n    This is test 4\r\n\r\nDoes anyone know what is wrong with the code?\r\nI need to execute it in the order that I provided.\r\n","title":"Order of execution in junit","body":"<p>My code</p>\n<pre><code>import org.junit.Test;\nimport org.junit.jupiter.api.MethodOrderer.OrderAnnotation;\nimport org.junit.jupiter.api.Order;\nimport org.junit.jupiter.api.TestMethodOrder;\n\n@TestMethodOrder(OrderAnnotation.class)\npublic class Order {\n\n    @Test\n    @Order(4)\n    public void test1() {\n        System.out.println(&quot;This is test 1&quot;);\n    }\n\n    @Test\n    @Order(3)\n    public void test2() {\n        System.out.println(&quot;This is test 2&quot;);\n    }\n\n    @Test\n    @Order(2)\n    public void test3() {\n        System.out.println(&quot;This is test 3&quot;);\n    }\n\n    @Test\n    @Order(1)\n    public void test4() {\n        System.out.println(&quot;This is test 4&quot;);\n    }\n}\n</code></pre>\n<p>The output of the code</p>\n<pre><code>This is test 1\nThis is test 2\nThis is test 3\nThis is test 4\n</code></pre>\n<p>Does anyone know what is wrong with the code?\nI need to execute it in the order that I provided.</p>\n"},{"tags":["java","android","react-native"],"comments":[{"owner":{"account_id":39846,"reputation":991133,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":1,"creation_date":1663098996,"post_id":73707691,"comment_id":130158778,"body_markdown":"Hopefully, that is not possible for ordinary Android apps.","body":"Hopefully, that is not possible for ordinary Android apps."},{"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"score":1,"creation_date":1663099593,"post_id":73707691,"comment_id":130158943,"body_markdown":"If you&#39;re trying to remotely administer a device, you should be using Android Enterprise instead of this.  If you&#39;re doing anything else, the prompt is required.  No random app should have the ability to uninstall another without the user authorizing it to.","body":"If you&#39;re trying to remotely administer a device, you should be using Android Enterprise instead of this.  If you&#39;re doing anything else, the prompt is required.  No random app should have the ability to uninstall another without the user authorizing it to."}],"owner":{"account_id":26088719,"reputation":3,"user_id":19785912,"display_name":"Rain Developer"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":141,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1663676110,"creation_date":1663093540,"question_id":73707691,"body_markdown":"I&#39;m developing an Android app.\r\n\r\nI used the following code to uninstall a specific application.\r\n\r\n```\r\nIntent intent = new Intent(Intent.ACTION_DELETE); intent.setData(Uri.parse(&quot;package:com.example.tharindurasanga.locationtracker&quot;));\r\nstartActivity(intent);\r\n```\r\n\r\nThis code really works fine but not giving what I&#39;m expecting since this is resulting a prompt saying user to confirm the app uninstallation. I need to uninstall the app silently without user confirmation.\r\n\r\nCan someone suggest me another method of doing this or help me to remove this prompt?","title":"Uninstall an Android app programmatically without prompt interaction?","body":"<p>I'm developing an Android app.</p>\n<p>I used the following code to uninstall a specific application.</p>\n<pre><code>Intent intent = new Intent(Intent.ACTION_DELETE); intent.setData(Uri.parse(&quot;package:com.example.tharindurasanga.locationtracker&quot;));\nstartActivity(intent);\n</code></pre>\n<p>This code really works fine but not giving what I'm expecting since this is resulting a prompt saying user to confirm the app uninstallation. I need to uninstall the app silently without user confirmation.</p>\n<p>Can someone suggest me another method of doing this or help me to remove this prompt?</p>\n"},{"tags":["java","lombok"],"comments":[{"owner":{"account_id":11942036,"reputation":164,"user_id":8738512,"display_name":"David"},"score":1,"creation_date":1663664183,"post_id":73783945,"comment_id":130287411,"body_markdown":"Please show us how you use your builder","body":"Please show us how you use your builder"},{"owner":{"account_id":974021,"reputation":63348,"user_id":995891,"accept_rate":83,"display_name":"zapl"},"score":1,"creation_date":1663670007,"post_id":73783945,"comment_id":130289314,"body_markdown":"If your&#39;re only using `ListRequest` in a Spring Controller your a) not using the builder at all and could remove that annotation (there are issues when using the builder with defaults https://stackoverflow.com/q/47883931/995891)  b) spring might actively sets the language property to `null`, e.g. when your client sends json request objects that have `&quot;language&quot;: null` in them. What spring should do in your case is `new ListRequest()` then set properties","body":"If your&#39;re only using <code>ListRequest</code> in a Spring Controller your a) not using the builder at all and could remove that annotation (there are issues when using the builder with defaults <a href=\"https://stackoverflow.com/q/47883931/995891\">stackoverflow.com/q/47883931/995891</a>)  b) spring might actively sets the language property to <code>null</code>, e.g. when your client sends json request objects that have <code>&quot;language&quot;: null</code> in them. What spring should do in your case is <code>new ListRequest()</code> then set properties"}],"answers":[{"tags":[],"owner":{"account_id":7739148,"reputation":3345,"user_id":5859654,"display_name":"Nemanja"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1663665554,"creation_date":1663665554,"answer_id":73784352,"question_id":73783945,"body_markdown":"Property for which no value is specified in the builder call will be `null`. Even if you try to set a default value other than `null` and write it in the target class, it will not work.\r\n\r\nTo set the default value, describe the builder class with the naming convention of target `class name + Builder` as shown below. The rest is nicely complemented by Lombok.\r\n\r\n    import lombok.Builder;\r\n    import lombok.Data;\r\n    import lombok.Value;\r\n    \r\n        @Data\r\n        @Builder\r\n        public class ListRequest {\r\n        \r\n            @ApiModelProperty(\r\n                    value = &quot;Language, default=en&quot;,\r\n                    allowableValues = &quot;fr, de, sv, en&quot;,\r\n                    example = &quot;en&quot;\r\n            )\r\n            private Language language=Language.en;\r\n        \r\n        \r\n            public static class ListRequestBuilder {\r\n                private Language language=Language.en;\r\n            }\r\n            @ApiModelProperty(hidden = true)\r\n            private String apiVersion = &quot;v4&quot;;\r\n        \r\n        \r\n        }","title":"Default value initialization dosen work with Lombok","body":"<p>Property for which no value is specified in the builder call will be <code>null</code>. Even if you try to set a default value other than <code>null</code> and write it in the target class, it will not work.</p>\n<p>To set the default value, describe the builder class with the naming convention of target <code>class name + Builder</code> as shown below. The rest is nicely complemented by Lombok.</p>\n<pre><code>import lombok.Builder;\nimport lombok.Data;\nimport lombok.Value;\n\n    @Data\n    @Builder\n    public class ListRequest {\n    \n        @ApiModelProperty(\n                value = &quot;Language, default=en&quot;,\n                allowableValues = &quot;fr, de, sv, en&quot;,\n                example = &quot;en&quot;\n        )\n        private Language language=Language.en;\n    \n    \n        public static class ListRequestBuilder {\n            private Language language=Language.en;\n        }\n        @ApiModelProperty(hidden = true)\n        private String apiVersion = &quot;v4&quot;;\n    \n    \n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13499757,"reputation":39,"user_id":9739451,"display_name":"Hai Mai"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1663666666,"creation_date":1663666666,"answer_id":73784585,"question_id":73783945,"body_markdown":"Please try below. @Builder will create the attribute with null by default\r\n\r\n```\r\n@Default\r\nprivate Language language=Language.en;\r\n```","title":"Default value initialization dosen work with Lombok","body":"<p>Please try below. @Builder will create the attribute with null by default</p>\n<pre><code>@Default\nprivate Language language=Language.en;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2238186,"reputation":3967,"user_id":1973933,"accept_rate":58,"display_name":"Melad Basilius"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663675825,"creation_date":1663675825,"answer_id":73786495,"question_id":73783945,"body_markdown":"Here is how i managed to fix it, thanks to all the contributors. \r\nApparently there is an issue when try to init default value in lombok with both constructor and builder https://stackoverflow.com/questions/47883931/default-value-in-lombok-how-to-init-default-with-both-constructor-and-builder\r\n\r\nAnd unfortunately the annotation `@Default` didnot fix the issue \r\n\r\nI removed the `@Builder` from the class and added `@NoArgsConstructor`\r\n, and created a new constructor with the annotation     `@Builder`, and excluded all the field i need to init from that constructor \r\n\r\n\r\n        @Data\r\n        @NoArgsConstructor\r\n        public class ListRequest {\r\n        \r\n            @ApiModelProperty(\r\n                    value = &quot;Language, default=en&quot;,\r\n                    allowableValues = &quot;fr, de, sv, en&quot;,\r\n                    example = &quot;en&quot;\r\n            )\r\n            private Language language=Language.en;\r\n        \r\n            @ApiModelProperty(hidden = true)\r\n            private String apiVersion;\r\n        \r\n            @Builder\r\n            public ListRequest(String apiVersion){\r\n               this.apiVersion=apiVersion;\r\n            }\r\n    \r\n        }\r\n\r\n","title":"Default value initialization dosen work with Lombok","body":"<p>Here is how i managed to fix it, thanks to all the contributors.\nApparently there is an issue when try to init default value in lombok with both constructor and builder <a href=\"https://stackoverflow.com/questions/47883931/default-value-in-lombok-how-to-init-default-with-both-constructor-and-builder\">Default value in lombok. How to init default with both constructor and builder</a></p>\n<p>And unfortunately the annotation <code>@Default</code> didnot fix the issue</p>\n<p>I removed the <code>@Builder</code> from the class and added <code>@NoArgsConstructor</code>\n, and created a new constructor with the annotation     <code>@Builder</code>, and excluded all the field i need to init from that constructor</p>\n<pre><code>    @Data\n    @NoArgsConstructor\n    public class ListRequest {\n    \n        @ApiModelProperty(\n                value = &quot;Language, default=en&quot;,\n                allowableValues = &quot;fr, de, sv, en&quot;,\n                example = &quot;en&quot;\n        )\n        private Language language=Language.en;\n    \n        @ApiModelProperty(hidden = true)\n        private String apiVersion;\n    \n        @Builder\n        public ListRequest(String apiVersion){\n           this.apiVersion=apiVersion;\n        }\n\n    }\n</code></pre>\n"}],"owner":{"account_id":2238186,"reputation":3967,"user_id":1973933,"accept_rate":58,"display_name":"Melad Basilius"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":620,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1663675825,"creation_date":1663663612,"question_id":73783945,"body_markdown":"I have this pojo class, which is used as apart of REST request\r\n\r\n    @Data\r\n    @Builder\r\n    public class ListRequest {\r\n        \r\n        @ApiModelProperty(\r\n                value = &quot;Language, default=en&quot;,\r\n                allowableValues = &quot;fr, de, sv, en&quot;,\r\n                example = &quot;en&quot;\r\n        )\r\n        private Language language=Language.en;\r\n    \r\n      \r\n        @Transient\r\n        @ApiModelProperty(hidden = true)\r\n        private String apiVersion = &quot;v4&quot;;\r\n    }\r\n\r\nI expect that the value of `language` will be `Language.en` if it is missing from the service request\r\nHowever it is always `null`.\r\n\r\nIt is Java 101 to initialize the variable that way, so I guess it is Lombok which made this issue.\r\n\r\nAny idea what is the issue here?\r\n\r\nEDIT: I use neither the constructor nor the builder in my code, its the spring boot who instantiate the objects.","title":"Default value initialization dosen work with Lombok","body":"<p>I have this pojo class, which is used as apart of REST request</p>\n<pre><code>@Data\n@Builder\npublic class ListRequest {\n    \n    @ApiModelProperty(\n            value = &quot;Language, default=en&quot;,\n            allowableValues = &quot;fr, de, sv, en&quot;,\n            example = &quot;en&quot;\n    )\n    private Language language=Language.en;\n\n  \n    @Transient\n    @ApiModelProperty(hidden = true)\n    private String apiVersion = &quot;v4&quot;;\n}\n</code></pre>\n<p>I expect that the value of <code>language</code> will be <code>Language.en</code> if it is missing from the service request\nHowever it is always <code>null</code>.</p>\n<p>It is Java 101 to initialize the variable that way, so I guess it is Lombok which made this issue.</p>\n<p>Any idea what is the issue here?</p>\n<p>EDIT: I use neither the constructor nor the builder in my code, its the spring boot who instantiate the objects.</p>\n"},{"tags":["java","android","android-studio"],"comments":[{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1663666819,"post_id":73784500,"comment_id":130288238,"body_markdown":"If you encounter problems, it&#39;s best to create a [MCVE](https://stackoverflow.com/help/mcve) when posting a question. You posted more than **300** (three hundred) lines of code for this issue. That&#39;s a lot for people to parse and try to debug online. Please edit your question and isolate the problem, in that way you increase your chances of being helped.  Please take a moment and read [how to ask a question](https://stackoverflow.com/help/how-to-ask).","body":"If you encounter problems, it&#39;s best to create a <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a> when posting a question. You posted more than <b>300</b> (three hundred) lines of code for this issue. That&#39;s a lot for people to parse and try to debug online. Please edit your question and isolate the problem, in that way you increase your chances of being helped.  Please take a moment and read <a href=\"https://stackoverflow.com/help/how-to-ask\">how to ask a question</a>."},{"owner":{"account_id":26388839,"reputation":1,"user_id":20040976,"display_name":""},"score":1,"creation_date":1663668565,"post_id":73784500,"comment_id":130288814,"body_markdown":"I appreciate for telling me this important things,  I&#39;ll edit it for better way for my question!","body":"I appreciate for telling me this important things,  I&#39;ll edit it for better way for my question!"},{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1663668892,"post_id":73784500,"comment_id":130288920,"body_markdown":"So that error is more related to a FloatingActionButton, rather than Firebase, right?","body":"So that error is more related to a FloatingActionButton, rather than Firebase, right?"},{"owner":{"account_id":26388839,"reputation":1,"user_id":20040976,"display_name":""},"score":0,"creation_date":1663675686,"post_id":73784500,"comment_id":130291302,"body_markdown":"Yes , this question is related to Floatingactionbutton bot firebase,but still appreciate!!  I&#39;ll remove the firebase tag.","body":"Yes , this question is related to Floatingactionbutton bot firebase,but still appreciate!!  I&#39;ll remove the firebase tag."}],"owner":{"account_id":26388839,"reputation":1,"user_id":20040976,"display_name":""},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1663675697,"creation_date":1663666301,"question_id":73784500,"body_markdown":"\r\nI&#39;m new for android studio and coding a project  about using firebase for a chatroom.Then I met a problem : \r\nevery time I run the project,it&#39;s flashback and saying It&#39;s not responding,can \r\nsomeone please help me for my problem!!appreciate!\r\n\r\n**These are problems what  I met:**\r\n\r\n```2022-09-20 17:50:29.871 6010-6010/com.example.chatroomdemo3 E/AndroidRuntime: FATAL EXCEPTION: main\r\n    Process: com.example.chatroomdemo3, PID: 6010\r\n    java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.chatroomdemo3/com.example.chatroomdemo3.MainActivity}: android.view.InflateException: Binary XML file line #14 in com.example.chatroomdemo3:layout/activity_main: Binary XML file line #14 in com.example.chatroomdemo3:layout/activity_main: Error inflating class android.support.design.widget.FloatingActionButton\r\n        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3449)\r\n        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3601)\r\n        at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:85)\r\n        at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)\r\n        at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)\r\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2066)\r\n        at android.os.Handler.dispatchMessage(Handler.java:106)\r\n        at android.os.Looper.loop(Looper.java:223)\r\n        at android.app.ActivityThread.main(ActivityThread.java:7656)\r\n        at java.lang.reflect.Method.invoke(Native Method)\r\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:592)\r\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:947)\r\n     Caused by: android.view.InflateException: Binary XML file line #14 in com.example.chatroomdemo3:layout/activity_main: Binary XML file line #14 in com.example.chatroomdemo3:layout/activity_main: Error inflating class android.support.design.widget.FloatingActionButton\r\n     Caused by: android.view.InflateException: Binary XML file line #14 in com.example.chatroomdemo3:layout/activity_main: Error inflating class android.support.design.widget.FloatingActionButton\r\n     Caused by: java.lang.ClassNotFoundException: android.support.design.widget.FloatingActionButton\r\n        at java.lang.Class.classForName(Native Method)\r\n        at java.lang.Class.forName(Class.java:454)\r\n        at android.view.LayoutInflater.createView(LayoutInflater.java:813)\r\n        at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:1004)\r\n        at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:959)\r\n        at android.view.LayoutInflater.rInflate(LayoutInflater.java:1121)\r\n        at android.view.LayoutInflater.rInflateChildren(LayoutInflater.java:1082)\r\n        at android.view.LayoutInflater.inflate(LayoutInflater.java:680)\r\n        at android.view.LayoutInflater.inflate(LayoutInflater.java:532)\r\n        at android.view.LayoutInflater.inflate(LayoutInflater.java:479)\r\n        at androidx.appcompat.app.AppCompatDelegateImpl.setContentView(AppCompatDelegateImpl.java:710)\r\n        at androidx.appcompat.app.AppCompatActivity.setContentView(AppCompatActivity.java:195)\r\n        at com.example.chatroomdemo3.MainActivity.onCreate(MainActivity.java:32)\r\n        at android.app.Activity.performCreate(Activity.java:7994)\r\n        at android.app.Activity.performCreate(Activity.java:7978)\r\n        at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1309)\r\n        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3422)\r\n        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3601)\r\n        at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:85)\r\n        at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)\r\n        at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)\r\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2066)\r\n        at android.os.Handler.dispatchMessage(Handler.java:106)\r\n        at android.os.Looper.loop(Looper.java:223)\r\n        at android.app.ActivityThread.main(ActivityThread.java:7656)\r\n        at java.lang.reflect.Method.invoke(Native Method)\r\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:592)\r\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:947)\r\n2022-09-20 17:50:29.871 6010-6010/com.example.chatroomdemo3 E/AndroidRuntime: Caused by: java.lang.ClassNotFoundException: Didn&#39;t find class &quot;android.support.design.widget.FloatingActionButton&quot; on path: DexPathList[[zip file &quot;/data/app/~~ZjEoxav74b-XtewDIq5jeQ==/com.example.chatroomdemo3-pbmB3qrSrSLhR8HFlxAleA==/base.apk&quot;],nativeLibraryDirectories=[/data/app/~~ZjEoxav74b-XtewDIq5jeQ==/com.example.chatroomdemo3-pbmB3qrSrSLhR8HFlxAleA==/lib/x86, /system/lib, /system_ext/lib]]\r\n        at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:207)\r\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:379)\r\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:312)\r\n        \t... 28 more\r\n2022-09-20 17:50:29.900 6010-6010/com.example.chatroomdemo3 I/Process: Sending signal. PID: 6010 SIG: 9\r\n```\r\n\r\n  [1]: https://i.stack.imgur.com/jnRjt.png","title":"using firebase for chatroom but broken every time when I run the project","body":"<p>I'm new for android studio and coding a project  about using firebase for a chatroom.Then I met a problem :\nevery time I run the project,it's flashback and saying It's not responding,can\nsomeone please help me for my problem!!appreciate!</p>\n<p><strong>These are problems what  I met:</strong></p>\n<pre><code>    Process: com.example.chatroomdemo3, PID: 6010\n    java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.chatroomdemo3/com.example.chatroomdemo3.MainActivity}: android.view.InflateException: Binary XML file line #14 in com.example.chatroomdemo3:layout/activity_main: Binary XML file line #14 in com.example.chatroomdemo3:layout/activity_main: Error inflating class android.support.design.widget.FloatingActionButton\n        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3449)\n        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3601)\n        at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:85)\n        at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)\n        at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2066)\n        at android.os.Handler.dispatchMessage(Handler.java:106)\n        at android.os.Looper.loop(Looper.java:223)\n        at android.app.ActivityThread.main(ActivityThread.java:7656)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:592)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:947)\n     Caused by: android.view.InflateException: Binary XML file line #14 in com.example.chatroomdemo3:layout/activity_main: Binary XML file line #14 in com.example.chatroomdemo3:layout/activity_main: Error inflating class android.support.design.widget.FloatingActionButton\n     Caused by: android.view.InflateException: Binary XML file line #14 in com.example.chatroomdemo3:layout/activity_main: Error inflating class android.support.design.widget.FloatingActionButton\n     Caused by: java.lang.ClassNotFoundException: android.support.design.widget.FloatingActionButton\n        at java.lang.Class.classForName(Native Method)\n        at java.lang.Class.forName(Class.java:454)\n        at android.view.LayoutInflater.createView(LayoutInflater.java:813)\n        at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:1004)\n        at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:959)\n        at android.view.LayoutInflater.rInflate(LayoutInflater.java:1121)\n        at android.view.LayoutInflater.rInflateChildren(LayoutInflater.java:1082)\n        at android.view.LayoutInflater.inflate(LayoutInflater.java:680)\n        at android.view.LayoutInflater.inflate(LayoutInflater.java:532)\n        at android.view.LayoutInflater.inflate(LayoutInflater.java:479)\n        at androidx.appcompat.app.AppCompatDelegateImpl.setContentView(AppCompatDelegateImpl.java:710)\n        at androidx.appcompat.app.AppCompatActivity.setContentView(AppCompatActivity.java:195)\n        at com.example.chatroomdemo3.MainActivity.onCreate(MainActivity.java:32)\n        at android.app.Activity.performCreate(Activity.java:7994)\n        at android.app.Activity.performCreate(Activity.java:7978)\n        at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1309)\n        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3422)\n        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3601)\n        at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:85)\n        at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)\n        at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2066)\n        at android.os.Handler.dispatchMessage(Handler.java:106)\n        at android.os.Looper.loop(Looper.java:223)\n        at android.app.ActivityThread.main(ActivityThread.java:7656)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:592)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:947)\n2022-09-20 17:50:29.871 6010-6010/com.example.chatroomdemo3 E/AndroidRuntime: Caused by: java.lang.ClassNotFoundException: Didn't find class &quot;android.support.design.widget.FloatingActionButton&quot; on path: DexPathList[[zip file &quot;/data/app/~~ZjEoxav74b-XtewDIq5jeQ==/com.example.chatroomdemo3-pbmB3qrSrSLhR8HFlxAleA==/base.apk&quot;],nativeLibraryDirectories=[/data/app/~~ZjEoxav74b-XtewDIq5jeQ==/com.example.chatroomdemo3-pbmB3qrSrSLhR8HFlxAleA==/lib/x86, /system/lib, /system_ext/lib]]\n        at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:207)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:379)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:312)\n            ... 28 more\n2022-09-20 17:50:29.900 6010-6010/com.example.chatroomdemo3 I/Process: Sending signal. PID: 6010 SIG: 9\n</code></pre>\n"},{"tags":["java","frameworks","queue","binary-tree"],"answers":[{"tags":[],"owner":{"account_id":23667337,"reputation":1467,"user_id":17694626,"display_name":"Cheng Thao"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663675676,"creation_date":1663675676,"answer_id":73786465,"question_id":73786297,"body_markdown":"Change this line:\r\n\r\n```\r\nQueue q = new LinkedList&lt;&gt;();\r\n```\r\n\r\nto \r\n\r\n```\r\nQueue&lt;Node&gt; q = new LinkedList&lt;&gt;();\r\n```\r\n\r\nThe reason is that \r\n```Queue q = new LinkedList&lt;&gt;()``` is the same as ```Queue&lt;Object&gt; = new LinkedList&lt;&gt;()```.  As a result, ```q.remove()``` expected return type is ```Object``` instead of ```Node```.   \r\n\r\n\r\n\r\n\r\n","title":"it says Type mismatch: cannot convert from Object to binaryTree.Node on line 62 .remove() function (highlighted)","body":"<p>Change this line:</p>\n<pre><code>Queue q = new LinkedList&lt;&gt;();\n</code></pre>\n<p>to</p>\n<pre><code>Queue&lt;Node&gt; q = new LinkedList&lt;&gt;();\n</code></pre>\n<p>The reason is that\n<code>Queue q = new LinkedList&lt;&gt;()</code> is the same as <code>Queue&lt;Object&gt; = new LinkedList&lt;&gt;()</code>.  As a result, <code>q.remove()</code> expected return type is <code>Object</code> instead of <code>Node</code>.</p>\n"}],"owner":{"account_id":26390142,"reputation":21,"user_id":20042115,"display_name":"Ritam Arya"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":172,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1663675676,"creation_date":1663674871,"question_id":73786297,"body_markdown":"here is the code. i&#39;ve marked where i&#39;m getting the error, the tutorial i&#39;m following has the same code and it&#39;s working fine. when i checked the functions available in the queue interface in java collection frameworks, it&#39;s showing the return type of .remove() as object. am i using a different java version or what? \r\n\r\n```\r\nimport java.util.*;\r\n\r\npublic class binaryTree{\r\n    static class Node{\r\n        int data;\r\n        Node left;\r\n        Node right;\r\n        \r\n        Node(int data){\r\n            this.data = data;\r\n            this.left = null;\r\n            this.right = null;\r\n        }\r\n    }\r\n\r\n    static class BT{\r\n        static int idx = -1;\r\n\r\n        public static Node buildTree(int nodes[]){\r\n            idx++;\r\n            if(nodes[idx]==-1){\r\n                return null;\r\n            }\r\n\r\n            Node newNode = new Node(nodes[idx]);\r\n            newNode.left = buildTree(nodes);\r\n            newNode.right = buildTree(nodes);\r\n            return newNode;\r\n        }\r\n    }\r\n\r\n    public static void preOrder(Node root){\r\n        if(root==null) {System.out.println(-1); return;}\r\n\r\n        System.out.println(root.data);\r\n        preOrder(root.left);\r\n        preOrder(root.right);\r\n    }\r\n\r\n    public static void inOrder(Node root){\r\n        if(root==null) { System.out.println(-1); return;}\r\n\r\n        inOrder(root.left);\r\n        System.out.println(root.data);\r\n        inOrder(root.right);\r\n    }\r\n\r\n    public static void postOrder(Node root){\r\n        if(root==null) {return;}\r\n\r\n        postOrder(root.left);\r\n        postOrder(root.right);\r\n        System.out.println(root.data);\r\n    }\r\n\r\n    public static void levelOrder(Node root){\r\n        if(root==null) return;\r\n        Queue q = new LinkedList&lt;&gt;();\r\n        q.add(root);\r\n        q.add(null);\r\n\r\n        while(!q.isEmpty()){\r\n            Node currNode = q.remove();    //over here\r\n            if(currNode==null){\r\n                System.out.println();\r\n                if(q.isEmpty()){\r\n                    break;\r\n                }else{\r\n                    q.add(null);\r\n                }\r\n            }else{\r\n                System.out.println(currNode+&quot; &quot;);\r\n                if(currNode.left!=null)\r\n                    q.add(currNode.left);\r\n                if(currNode.right!=null)\r\n                    q.add(currNode.right);\r\n            }\r\n        }\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        int nodes[] = {1, 2, 4, -1, -1, 5, -1, -1, 3, -1, 6, -1, -1};\r\n        BT tree = new BT();\r\n        Node root = tree.buildTree(nodes);\r\n        // System.out.println(root.data);\r\n        // preOrder(root);\r\n        // inOrder(root);\r\n        // postOrder(root);\r\n        levelOrder(root);\r\n    }\r\n}\r\n```","title":"it says Type mismatch: cannot convert from Object to binaryTree.Node on line 62 .remove() function (highlighted)","body":"<p>here is the code. i've marked where i'm getting the error, the tutorial i'm following has the same code and it's working fine. when i checked the functions available in the queue interface in java collection frameworks, it's showing the return type of .remove() as object. am i using a different java version or what?</p>\n<pre><code>import java.util.*;\n\npublic class binaryTree{\n    static class Node{\n        int data;\n        Node left;\n        Node right;\n        \n        Node(int data){\n            this.data = data;\n            this.left = null;\n            this.right = null;\n        }\n    }\n\n    static class BT{\n        static int idx = -1;\n\n        public static Node buildTree(int nodes[]){\n            idx++;\n            if(nodes[idx]==-1){\n                return null;\n            }\n\n            Node newNode = new Node(nodes[idx]);\n            newNode.left = buildTree(nodes);\n            newNode.right = buildTree(nodes);\n            return newNode;\n        }\n    }\n\n    public static void preOrder(Node root){\n        if(root==null) {System.out.println(-1); return;}\n\n        System.out.println(root.data);\n        preOrder(root.left);\n        preOrder(root.right);\n    }\n\n    public static void inOrder(Node root){\n        if(root==null) { System.out.println(-1); return;}\n\n        inOrder(root.left);\n        System.out.println(root.data);\n        inOrder(root.right);\n    }\n\n    public static void postOrder(Node root){\n        if(root==null) {return;}\n\n        postOrder(root.left);\n        postOrder(root.right);\n        System.out.println(root.data);\n    }\n\n    public static void levelOrder(Node root){\n        if(root==null) return;\n        Queue q = new LinkedList&lt;&gt;();\n        q.add(root);\n        q.add(null);\n\n        while(!q.isEmpty()){\n            Node currNode = q.remove();    //over here\n            if(currNode==null){\n                System.out.println();\n                if(q.isEmpty()){\n                    break;\n                }else{\n                    q.add(null);\n                }\n            }else{\n                System.out.println(currNode+&quot; &quot;);\n                if(currNode.left!=null)\n                    q.add(currNode.left);\n                if(currNode.right!=null)\n                    q.add(currNode.right);\n            }\n        }\n    }\n\n    public static void main(String[] args) {\n        int nodes[] = {1, 2, 4, -1, -1, 5, -1, -1, 3, -1, 6, -1, -1};\n        BT tree = new BT();\n        Node root = tree.buildTree(nodes);\n        // System.out.println(root.data);\n        // preOrder(root);\n        // inOrder(root);\n        // postOrder(root);\n        levelOrder(root);\n    }\n}\n</code></pre>\n"},{"tags":["java","httpclient"],"comments":[{"owner":{"account_id":13047412,"reputation":2792,"user_id":9428851,"display_name":"Victor Gubin"},"score":0,"creation_date":1663681593,"post_id":73786422,"comment_id":130293710,"body_markdown":"Type `ifconfig` or `apiconfig /all` for Windows and get IP address of docker container, it should be not a localhost","body":"Type <code>ifconfig</code> or <code>apiconfig &#47;all</code> for Windows and get IP address of docker container, it should be not a localhost"},{"owner":{"account_id":1543331,"reputation":1106,"user_id":1522703,"accept_rate":53,"display_name":"pypat"},"score":0,"creation_date":1663682997,"post_id":73786422,"comment_id":130294335,"body_markdown":"It&#39;s running on my localhost and I can talk to it via localhost from Postman. Why shouldn&#39;t it be localhost? I tried using the ip of my host but that threw the same error.","body":"It&#39;s running on my localhost and I can talk to it via localhost from Postman. Why shouldn&#39;t it be localhost? I tried using the ip of my host but that threw the same error."},{"owner":{"account_id":13047412,"reputation":2792,"user_id":9428851,"display_name":"Victor Gubin"},"score":0,"creation_date":1663685134,"post_id":73786422,"comment_id":130295161,"body_markdown":"because of linux kernel container feature or  para virtualization on Windows, this is a container feature","body":"because of linux kernel container feature or  para virtualization on Windows, this is a container feature"},{"owner":{"account_id":1543331,"reputation":1106,"user_id":1522703,"accept_rate":53,"display_name":"pypat"},"score":0,"creation_date":1663686129,"post_id":73786422,"comment_id":130295562,"body_markdown":"Doesn&#39;t seem to work. Why does it work in Postman though, if this is an issue with a container feature? I appreciate your answers!","body":"Doesn&#39;t seem to work. Why does it work in Postman though, if this is an issue with a container feature? I appreciate your answers!"}],"owner":{"account_id":1543331,"reputation":1106,"user_id":1522703,"accept_rate":53,"display_name":"pypat"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":200,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1663675428,"creation_date":1663675428,"question_id":73786422,"body_markdown":"I have a small FastAPI app that&#39;s running in uvicorn. \r\nI&#39;m connecting to it, via Java HttpClient, like this: \r\n```\r\nHttpRequest request = HttpRequest.newBuilder()\r\n\t\t\t\t\t\t  .uri(URI.create(&quot;http://localhost:8000/api/dummy&quot;))\r\n\t\t\t\t\t\t  .version(HttpClient.Version.HTTP_1_1)\r\n\t\t\t\t\t\t  .POST(HttpRequest.BodyPublishers.ofString(jsonRequest.toString()))\r\n\t\t\t\t\t\t  .build();\r\nHttpResponse&lt;String&gt; response = client.send(request, HttpResponse.BodyHandlers.ofString());\r\n```\r\nThis works fine, when I&#39;m running the FastAPI app on my laptop via:\r\n\r\n```\r\npython -m uvicorn main:api\r\n```\r\n\r\nHowever, I need to run it in a Docker container. Here&#39;s my Dockerfile:\r\n\r\n```\r\nFROM python:3.10\r\n\r\nCOPY ./src /app/src\r\nCOPY requirements.txt /app\r\n\r\nWORKDIR /app\r\n\r\nRUN pip3 install -r requirements.txt\r\n\r\nEXPOSE 8000\r\n\r\nWORKDIR /app/src\r\n\r\nCMD [&quot;uvicorn&quot;, &quot;main:api&quot;, &quot;--host=0.0.0.0&quot;, &quot;--reload&quot;]\r\n```\r\n\r\nWhen I run this image, I can connect to it from Postman but when I try to connect via the above Java code, I get the following exception:\r\n\r\n\r\n        java.io.IOException: http1_0 content, bytes received: 0\r\n        \tat jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:586) ~[java.net.http:?]\r\n        \tat jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:123) ~\r\n        ...\r\n    \r\n        \tat java.lang.Thread.run(Thread.java:833) [?:?]\r\n        Caused by: java.io.IOException: http1_0 content, bytes received: 0\r\n        \tat jdk.internal.net.http.common.Utils.wrapWithExtraDetail(Utils.java:351) ~[java.net.http:?]\r\n        \tat jdk.internal.net.http.Http1Response$BodyReader.onReadError(Http1Response.java:760) ~[java.net.http:?]\r\n        \tat jdk.internal.net.http.Http1AsyncReceiver.checkForErrors(Http1AsyncReceiver.java:302) ~[java.net.http:?]\r\n        \tat jdk.internal.net.http.Http1AsyncReceiver.flush(Http1AsyncReceiver.java:268) ~[java.net.http:?]\r\n        \tat jdk.internal.net.http.common.SequentialScheduler$LockingRestartableTask.run(SequentialScheduler.java:205) ~[java.net.http:?]\r\n        \tat jdk.internal.net.http.common.SequentialScheduler$CompleteRestartableTask.run(SequentialScheduler.java:149) ~[java.net.http:?]\r\n        \tat jdk.internal.net.http.common.SequentialScheduler$SchedulableTask.run(SequentialScheduler.java:230) ~[java.net.http:?]\r\n        \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136) ~[?:?]\r\n        \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635) ~[?:?]\r\n        \t... 1 more\r\n    Caused by: java.net.SocketException: Connection reset\r\n        \tat sun.nio.ch.SocketChannelImpl.throwConnectionReset(SocketChannelImpl.java:394) ~[?:?]\r\n        \tat sun.nio.ch.SocketChannelImpl.read(SocketChannelImpl.java:426) ~[?:?]\r\n        \tat jdk.internal.net.http.SocketTube.readAvailable(SocketTube.java:1170) ~[java.net.http:?]\r\n        \tat jdk.internal.net.http.SocketTube$InternalReadPublisher$InternalReadSubscription.read(SocketTube.java:833) ~[java.net.http:?]\r\n        \tat jdk.internal.net.http.SocketTube$SocketFlowTask.run(SocketTube.java:181) ~[java.net.http:?]\r\n        \tat jdk.internal.net.http.common.SequentialScheduler$SchedulableTask.run(SequentialScheduler.java:230) ~[java.net.http:?]\r\n        \tat jdk.internal.net.http.common.SequentialScheduler.runOrSchedule(SequentialScheduler.java:303) ~[java.net.http:?]\r\n        \tat jdk.internal.net.http.common.SequentialScheduler.runOrSchedule(SequentialScheduler.java:256) ~[java.net.http:?]\r\n        \tat jdk.internal.net.http.SocketTube$InternalReadPublisher$InternalReadSubscription.signalReadable(SocketTube.java:774) ~[java.net.http:?]\r\n        \tat jdk.internal.net.http.SocketTube$InternalReadPublisher$ReadEvent.signalEvent(SocketTube.java:957) ~[java.net.http:?]\r\n        \tat jdk.internal.net.http.SocketTube$SocketFlowEvent.handle(SocketTube.java:253) ~[java.net.http:?]\r\n        \tat jdk.internal.net.http.HttpClientImpl$SelectorManager.handleEvent(HttpClientImpl.java:979) ~[java.net.http:?]\r\n        \tat jdk.internal.net.http.HttpClientImpl$SelectorManager.lambda$run$3(HttpClientImpl.java:934) ~[java.net.http:?]\r\n        \tat java.util.ArrayList.forEach(ArrayList.java:1511) ~[?:?]\r\n        \tat jdk.internal.net.http.HttpClientImpl$SelectorManager.run(HttpClientImpl.java:934) ~[java.net.http:?]\r\n\r\n\r\nI&#39;m at a bit of a loss here and any help would be much appreciated. \r\nI tried not forcing HTTP 1.1 but it didn&#39;t help. ","title":"Java HttpClient - HTTP/1.1 header parser received no bytes","body":"<p>I have a small FastAPI app that's running in uvicorn.\nI'm connecting to it, via Java HttpClient, like this:</p>\n<pre><code>HttpRequest request = HttpRequest.newBuilder()\n                          .uri(URI.create(&quot;http://localhost:8000/api/dummy&quot;))\n                          .version(HttpClient.Version.HTTP_1_1)\n                          .POST(HttpRequest.BodyPublishers.ofString(jsonRequest.toString()))\n                          .build();\nHttpResponse&lt;String&gt; response = client.send(request, HttpResponse.BodyHandlers.ofString());\n</code></pre>\n<p>This works fine, when I'm running the FastAPI app on my laptop via:</p>\n<pre><code>python -m uvicorn main:api\n</code></pre>\n<p>However, I need to run it in a Docker container. Here's my Dockerfile:</p>\n<pre><code>FROM python:3.10\n\nCOPY ./src /app/src\nCOPY requirements.txt /app\n\nWORKDIR /app\n\nRUN pip3 install -r requirements.txt\n\nEXPOSE 8000\n\nWORKDIR /app/src\n\nCMD [&quot;uvicorn&quot;, &quot;main:api&quot;, &quot;--host=0.0.0.0&quot;, &quot;--reload&quot;]\n</code></pre>\n<p>When I run this image, I can connect to it from Postman but when I try to connect via the above Java code, I get the following exception:</p>\n<pre><code>    java.io.IOException: http1_0 content, bytes received: 0\n        at jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:586) ~[java.net.http:?]\n        at jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:123) ~\n    ...\n\n        at java.lang.Thread.run(Thread.java:833) [?:?]\n    Caused by: java.io.IOException: http1_0 content, bytes received: 0\n        at jdk.internal.net.http.common.Utils.wrapWithExtraDetail(Utils.java:351) ~[java.net.http:?]\n        at jdk.internal.net.http.Http1Response$BodyReader.onReadError(Http1Response.java:760) ~[java.net.http:?]\n        at jdk.internal.net.http.Http1AsyncReceiver.checkForErrors(Http1AsyncReceiver.java:302) ~[java.net.http:?]\n        at jdk.internal.net.http.Http1AsyncReceiver.flush(Http1AsyncReceiver.java:268) ~[java.net.http:?]\n        at jdk.internal.net.http.common.SequentialScheduler$LockingRestartableTask.run(SequentialScheduler.java:205) ~[java.net.http:?]\n        at jdk.internal.net.http.common.SequentialScheduler$CompleteRestartableTask.run(SequentialScheduler.java:149) ~[java.net.http:?]\n        at jdk.internal.net.http.common.SequentialScheduler$SchedulableTask.run(SequentialScheduler.java:230) ~[java.net.http:?]\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136) ~[?:?]\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635) ~[?:?]\n        ... 1 more\nCaused by: java.net.SocketException: Connection reset\n        at sun.nio.ch.SocketChannelImpl.throwConnectionReset(SocketChannelImpl.java:394) ~[?:?]\n        at sun.nio.ch.SocketChannelImpl.read(SocketChannelImpl.java:426) ~[?:?]\n        at jdk.internal.net.http.SocketTube.readAvailable(SocketTube.java:1170) ~[java.net.http:?]\n        at jdk.internal.net.http.SocketTube$InternalReadPublisher$InternalReadSubscription.read(SocketTube.java:833) ~[java.net.http:?]\n        at jdk.internal.net.http.SocketTube$SocketFlowTask.run(SocketTube.java:181) ~[java.net.http:?]\n        at jdk.internal.net.http.common.SequentialScheduler$SchedulableTask.run(SequentialScheduler.java:230) ~[java.net.http:?]\n        at jdk.internal.net.http.common.SequentialScheduler.runOrSchedule(SequentialScheduler.java:303) ~[java.net.http:?]\n        at jdk.internal.net.http.common.SequentialScheduler.runOrSchedule(SequentialScheduler.java:256) ~[java.net.http:?]\n        at jdk.internal.net.http.SocketTube$InternalReadPublisher$InternalReadSubscription.signalReadable(SocketTube.java:774) ~[java.net.http:?]\n        at jdk.internal.net.http.SocketTube$InternalReadPublisher$ReadEvent.signalEvent(SocketTube.java:957) ~[java.net.http:?]\n        at jdk.internal.net.http.SocketTube$SocketFlowEvent.handle(SocketTube.java:253) ~[java.net.http:?]\n        at jdk.internal.net.http.HttpClientImpl$SelectorManager.handleEvent(HttpClientImpl.java:979) ~[java.net.http:?]\n        at jdk.internal.net.http.HttpClientImpl$SelectorManager.lambda$run$3(HttpClientImpl.java:934) ~[java.net.http:?]\n        at java.util.ArrayList.forEach(ArrayList.java:1511) ~[?:?]\n        at jdk.internal.net.http.HttpClientImpl$SelectorManager.run(HttpClientImpl.java:934) ~[java.net.http:?]\n</code></pre>\n<p>I'm at a bit of a loss here and any help would be much appreciated.\nI tried not forcing HTTP 1.1 but it didn't help.</p>\n"},{"tags":["java","eclipse"],"comments":[{"owner":{"account_id":1937019,"reputation":4428,"user_id":1744230,"accept_rate":100,"display_name":"QBrute"},"score":1,"creation_date":1663667004,"post_id":73784639,"comment_id":130288302,"body_markdown":"You&#39;re using a `try-with-resources` which was introduced with Java 7. What Java version are you using?","body":"You&#39;re using a <code>try-with-resources</code> which was introduced with Java 7. What Java version are you using?"},{"owner":{"account_id":26388883,"reputation":3,"user_id":20041019,"display_name":"Phillip Mackenzie"},"score":0,"creation_date":1663667328,"post_id":73784639,"comment_id":130288417,"body_markdown":"@QBrute 17.0.3 I believe.","body":"@QBrute 17.0.3 I believe."},{"owner":{"account_id":3159259,"reputation":109666,"user_id":2670892,"display_name":"greg-449"},"score":0,"creation_date":1663667861,"post_id":73784639,"comment_id":130288595,"body_markdown":"You will have to sort out &quot;the compiled with different versions&quot; issues and set the compliance level if you want to use try-with-resources.","body":"You will have to sort out &quot;the compiled with different versions&quot; issues and set the compliance level if you want to use try-with-resources."},{"owner":{"account_id":26388883,"reputation":3,"user_id":20041019,"display_name":"Phillip Mackenzie"},"score":0,"creation_date":1663668299,"post_id":73784639,"comment_id":130288745,"body_markdown":"@greg-449 Alright. I have fixed it. Did not realise the try with was going to result in these errors. Clearly need to go read up on some documentation about it. Thanks!","body":"@greg-449 Alright. I have fixed it. Did not realise the try with was going to result in these errors. Clearly need to go read up on some documentation about it. Thanks!"},{"owner":{"account_id":3159259,"reputation":109666,"user_id":2670892,"display_name":"greg-449"},"score":0,"creation_date":1663669095,"post_id":73784639,"comment_id":130288998,"body_markdown":"Java has an increasing number of new language features that require up to date versions such as streams, modules, var, text blocks, switch expressions, records, instanceof type patterns, ...","body":"Java has an increasing number of new language features that require up to date versions such as streams, modules, var, text blocks, switch expressions, records, instanceof type patterns, ..."}],"owner":{"account_id":26388883,"reputation":3,"user_id":20041019,"display_name":"Phillip Mackenzie"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":83,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1663675345,"creation_date":1663666881,"question_id":73784639,"body_markdown":"When attempting to compile my code I seem to get the following error:\r\n\r\n    &quot;Resource specification not allowed here for source level below 1.7&quot;\r\n\r\nI know what it means but I do not understand why I am getting it. It displays the area as being relevant to DriverManager.getConnection(DATABASE_URL, DATABASE_USERNAME, DATABASE_PASSWORD);\r\n\r\n    public boolean validate(String emailId, String password) throws SQLException{\r\n\t\ttry(Connection connection = DriverManager\r\n\t\t\t\t.getConnection(DATABASE_URL, DATABASE_USERNAME,DATABASE_PASSWORD);\r\n\t\t\t\t\r\n\t\t\t\tPreparedStatement preparedStatement = connection.prepareStatement(SELECT_QUERY)){\r\n\t\t\t\t\t\tpreparedStatement.setString(1, emailId);\r\n\t\t\t\t\t\tpreparedStatement.setString(2, password);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tSystem.out.println(preparedStatement);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tResultSet resultSet = preparedStatement.executeQuery();\r\n\t\t\t\t\t\tif(resultSet.next()) {\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\tcatch (SQLException e) {\r\n\t\t\tprintSQLException(e);\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\nTo clarify I am using maven in addition to Eclipse as my IDE. I am aware I can edit the compliance level in the project properties window. However this results in another error where different classes have been compiled with different versions of the JRE.\r\n\r\nIs there anything else I could do other than having to downgrade my current version of Java and the version of Javafx I am using?","title":"Resource specification not allowed here for source level below 1.7 - Java","body":"<p>When attempting to compile my code I seem to get the following error:</p>\n<pre><code>&quot;Resource specification not allowed here for source level below 1.7&quot;\n</code></pre>\n<p>I know what it means but I do not understand why I am getting it. It displays the area as being relevant to DriverManager.getConnection(DATABASE_URL, DATABASE_USERNAME, DATABASE_PASSWORD);</p>\n<pre><code>public boolean validate(String emailId, String password) throws SQLException{\n    try(Connection connection = DriverManager\n            .getConnection(DATABASE_URL, DATABASE_USERNAME,DATABASE_PASSWORD);\n            \n            PreparedStatement preparedStatement = connection.prepareStatement(SELECT_QUERY)){\n                    preparedStatement.setString(1, emailId);\n                    preparedStatement.setString(2, password);\n                    \n                    System.out.println(preparedStatement);\n                    \n                    ResultSet resultSet = preparedStatement.executeQuery();\n                    if(resultSet.next()) {\n                        return true;\n                    }\n            }\n    catch (SQLException e) {\n        printSQLException(e);\n    }\n    return false;\n}\n</code></pre>\n<p>To clarify I am using maven in addition to Eclipse as my IDE. I am aware I can edit the compliance level in the project properties window. However this results in another error where different classes have been compiled with different versions of the JRE.</p>\n<p>Is there anything else I could do other than having to downgrade my current version of Java and the version of Javafx I am using?</p>\n"},{"tags":["java","pdfbox","pdf-form"],"answers":[{"tags":[],"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1663675121,"creation_date":1663675121,"answer_id":73786358,"question_id":73786164,"body_markdown":"Try quadding\r\n\r\n    textBox.setQ(PDVariableText.QUADDING_CENTERED);","title":"How to change alignment value of a text box field using PDFBox 2.0.21 (Fillable form)","body":"<p>Try quadding</p>\n<pre><code>textBox.setQ(PDVariableText.QUADDING_CENTERED);\n</code></pre>\n"}],"owner":{"account_id":25908967,"reputation":13,"user_id":19633587,"display_name":"Seyed Ahamed Bilal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73786358,"answer_count":1,"score":0,"last_activity_date":1663675121,"creation_date":1663674299,"question_id":73786164,"body_markdown":"I would like to change the text box property values of alignment property using pdf box.\r\n\r\nAny ideas?","title":"How to change alignment value of a text box field using PDFBox 2.0.21 (Fillable form)","body":"<p>I would like to change the text box property values of alignment property using pdf box.</p>\n<p>Any ideas?</p>\n"},{"tags":["java","android","json","android-activity","retrofit2"],"comments":[{"owner":{"account_id":11417863,"reputation":1016,"user_id":8370216,"display_name":"Abhijith mogaveera"},"score":1,"creation_date":1662040461,"post_id":73569840,"comment_id":129918232,"body_markdown":"yourAdapter.notifyDataSetChanged() call this once you change the list for adapter","body":"yourAdapter.notifyDataSetChanged() call this once you change the list for adapter"},{"owner":{"account_id":15067325,"reputation":37,"user_id":10873994,"display_name":"Mohammad khaled"},"score":0,"creation_date":1662271386,"post_id":73569840,"comment_id":129964669,"body_markdown":"@Abhijithmogaveera I change as u said but it is still the same","body":"@Abhijithmogaveera I change as u said but it is still the same"}],"answers":[{"tags":[],"owner":{"account_id":15067325,"reputation":37,"user_id":10873994,"display_name":"Mohammad khaled"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1663675086,"creation_date":1663675086,"answer_id":73786351,"question_id":73569840,"body_markdown":"call it at the MainServiceclient \r\n\r\n```\r\n    public Call&lt;ResponseModel&gt; GetMainServiceByServiceTypeId(int id) {\r\n        return serviceMainInterface.GetMainServiceByServiceTypeId(id);\r\n    }\r\n```","title":"Can&#39;t fetch data from API, what am i doing wrong?","body":"<p>call it at the MainServiceclient</p>\n<pre><code>    public Call&lt;ResponseModel&gt; GetMainServiceByServiceTypeId(int id) {\n        return serviceMainInterface.GetMainServiceByServiceTypeId(id);\n    }\n</code></pre>\n"}],"owner":{"account_id":15067325,"reputation":37,"user_id":10873994,"display_name":"Mohammad khaled"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":82,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"accepted_answer_id":73786351,"answer_count":1,"score":-1,"last_activity_date":1663675086,"creation_date":1662037497,"question_id":73569840,"body_markdown":"hello iam trying to populate a recyclerview with data from API the data from a sub table inside the main table below is all code for more clarity.\r\n\r\nAPI JSON. i am aware of the problem with expected begin_object but was begin_array and did it properly.\r\n``` \r\n{\r\n  &quot;Status&quot;: 200,\r\n  &quot;Message&quot;: &quot;OK&quot;,\r\n  &quot;Data&quot;: {\r\n    &quot;MainServices&quot;: [\r\n      {\r\n        &quot;Id&quot;: 11,\r\n        &quot;ServiceTypeId&quot;: 1,\r\n        &quot;MainServiceNameAr&quot;: &quot;\\r\\n&quot;,\r\n        &quot;MainServiceNameEn&quot;: &quot;Air conditioning\\r\\n&quot;,\r\n        &quot;SubServices&quot;: []\r\n      },\r\n      {\r\n        &quot;Id&quot;: 12,\r\n        &quot;ServiceTypeId&quot;: 1,\r\n        &quot;MainServiceNameAr&quot;: &quot;\\r\\n&quot;,\r\n        &quot;MainServiceNameEn&quot;: &quot;Electricity\\r\\n&quot;,\r\n        &quot;SubServices&quot;: []\r\n      },\r\n      {\r\n        &quot;Id&quot;: 14,\r\n        &quot;ServiceTypeId&quot;: 1,\r\n        &quot;MainServiceNameAr&quot;: &quot;&quot;,\r\n        &quot;MainServiceNameEn&quot;: &quot;Plumbing\\r\\n&quot;,\r\n        &quot;SubServices&quot;: [\r\n          {\r\n            &quot;Id&quot;: 24,\r\n            &quot;MainServiceId&quot;: 14,\r\n            &quot;SubServiceNameAr&quot;: &quot; \\r\\n&quot;,\r\n            &quot;SubServiceNameEn&quot;: &quot;Health Tools\\r\\n&quot;,\r\n            &quot;ServicePriceLists&quot;: []\r\n          },\r\n          {\r\n            &quot;Id&quot;: 25,\r\n            &quot;MainServiceId&quot;: 14,\r\n            &quot;SubServiceNameAr&quot;: &quot; \\r\\n&quot;,\r\n            &quot;SubServiceNameEn&quot;: &quot;Water blockage\\r\\n&quot;,\r\n            &quot;ServicePriceLists&quot;: []\r\n          }\r\n        ]\r\n      },\r\n      {\r\n        &quot;Id&quot;: 15,\r\n        &quot;ServiceTypeId&quot;: 1,\r\n        &quot;MainServiceNameAr&quot;: &quot; \\r\\n&quot;,\r\n        &quot;MainServiceNameEn&quot;: &quot;Home appliances\\r\\n&quot;,\r\n        &quot;SubServices&quot;: []\r\n      },\r\n      {\r\n        &quot;Id&quot;: 16,\r\n        &quot;ServiceTypeId&quot;: 2,\r\n        &quot;MainServiceNameAr&quot;: &quot;\\r\\n&quot;,\r\n        &quot;MainServiceNameEn&quot;: &quot;Cleaning\\r\\n&quot;,\r\n        &quot;SubServices&quot;: []\r\n      }\r\n    ]\r\n  }\r\n}\r\n``` \r\n\r\nModels. \r\ni separated the models as ResponseModel, DataModel (where DataModel includes the rest of the Lists and services) and MainServicesModel with ServicesTypeModel\r\n \r\n```\r\npublic class MainServicesModel {\r\n    @SerializedName(&quot;Id&quot;)\r\n    public int Id;\r\n    @SerializedName(&quot;ServiceTypeId&quot;)\r\n    public int ServiceTypeId;\r\n    @SerializedName(&quot;MainServiceNameAr&quot;)\r\n    public String MainServiceNameAr;\r\n    @SerializedName(&quot;MainServiceNameEn&quot;)\r\n    public String MainServiceNameEn;\r\n    @SerializedName(&quot;SubServices&quot;)\r\n    public List&lt;SubServicesModel&gt; subServicesModel;\r\n\r\n    public int getId() {\r\n        return Id;\r\n    }\r\n\r\n    public void setId(int id) {\r\n        Id = id;\r\n    }\r\n\r\n    public int getServiceTypeId() {\r\n        return ServiceTypeId;\r\n    }\r\n\r\n    public void setServiceTypeId(int serviceTypeId) {\r\n        ServiceTypeId = serviceTypeId;\r\n    }\r\n\r\n    public String getMainServiceNameAr() {\r\n        return MainServiceNameAr;\r\n    }\r\n\r\n    public void setMainServiceNameAr(String mainServiceNameAr) {\r\n        MainServiceNameAr = mainServiceNameAr;\r\n    }\r\n\r\n    public String getMainServiceNameEn() {\r\n        return MainServiceNameEn;\r\n    }\r\n\r\n    public void setMainServiceNameEn(String mainServiceNameEn) {\r\n        MainServiceNameEn = mainServiceNameEn;\r\n    }\r\n\r\n    public List&lt;SubServicesModel&gt; getSubServicesModel() {\r\n        return subServicesModel;\r\n    }\r\n\r\n    public void setSubServicesModel(List&lt;SubServicesModel&gt; subServicesModel) {\r\n        this.subServicesModel = subServicesModel;\r\n    }\r\n} \r\n```\r\nMainServiceAdapter\r\n```\r\npublic class MainServiceAdapter extends RecyclerView.Adapter&lt;MainServiceAdapter.MainServiceHolder&gt; {\r\n    private List&lt;MainServicesModel&gt; mainServicesModelList;\r\n    private MainServiceListener listener;\r\n\r\n\r\n    public MainServiceAdapter(List&lt;MainServicesModel&gt; mainServicesModels , MainServiceListener listener) {\r\n        this.mainServicesModelList = mainServicesModels;\r\n        this.listener = listener;\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public MainServiceAdapter.MainServiceHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n        View iteView = LayoutInflater.from(parent.getContext()).inflate(R.layout.main_service_item, parent, false);\r\n        return new MainServiceHolder(iteView);\r\n    }\r\n\r\n    @Override\r\n    public void onBindViewHolder(@NonNull MainServiceAdapter.MainServiceHolder holder, int position) {\r\n        holder.MainServiceTxt.setText(mainServicesModelList.get(position).getMainServiceNameAr());\r\n    }\r\n\r\n    @Override\r\n    public int getItemCount() {\r\n//        return null!=mainServicesModelList?mainServicesModelList.size():0;\r\n        return mainServicesModelList.size();\r\n    }\r\n\r\n    public long getItemId(int position) {\r\n        return position;\r\n    }\r\n\r\n    public void setMainServicesModelList(List&lt;MainServicesModel&gt; mainServicesModelList) {\r\n        this.mainServicesModelList = mainServicesModelList;\r\n        notifyDataSetChanged();\r\n    }\r\n\r\n    public class MainServiceHolder extends RecyclerView.ViewHolder {\r\n        TextView MainServiceTxt;\r\n//        ImageView\r\n        public MainServiceHolder(@NonNull View itemView) {\r\n            super(itemView);\r\n            MainServiceTxt = itemView.findViewById(R.id.MainServiceName);\r\n            itemView.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    listener.onMainServiceSelected(mainServicesModelList.get(getAdapterPosition()));\r\n                }\r\n            });\r\n        }\r\n    }\r\n    public interface MainServiceListener {\r\n        void onMainServiceSelected(MainServicesModel mainServicesModel);\r\n    }\r\n}\r\n```\r\nMainActivity\r\n```\r\n\r\npublic class MainServicesAndSubServices extends AppCompatActivity implements MainServiceAdapter.MainServiceListener {\r\n\r\n    private final List&lt;MainServicesModel&gt; mainServicesModelArrayList = new ArrayList&lt;&gt;();\r\n    MainServiceAdapter serviceAdapter = new MainServiceAdapter(mainServicesModelArrayList, this);\r\n    MainServiceViewModel mainServiceViewModel;\r\n    RecyclerView MainServiceRV;\r\n    int ServiceTypeId ;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main_sub_services);\r\n\r\n// Here i call the ServiceTypeId from MainServiceType\r\n\r\n        Intent intent = getIntent();\r\n        Bundle bd = intent.getExtras();\r\n        if (bd != null) {\r\n            ServiceTypeId = (int) bd.get(&quot;ServiceTypeId&quot;);\r\n        }\r\n        Toast.makeText(MainServicesAndSubServices.this, &quot;&quot; + ServiceTypeId, \r\nToast.LENGTH_SHORT).show();\r\n\r\n// Here i call the ServiceTypeId from MainServiceType\r\n\r\n        try {\r\n            MainServiceRV = findViewById(R.id.RVMainServices);\r\n            mainServiceViewModel = ViewModelProviders.of(this).get(MainServiceViewModel.class);\r\n            mainServiceViewModel.getMainServicesByServiceTypeId(ServiceTypeId);\r\n            LinearLayoutManager layoutManager = new LinearLayoutManager(this, LinearLayoutManager.VERTICAL, false);\r\n            MainServiceRV.setLayoutManager(layoutManager);\r\n            MainServiceRV.setAdapter(serviceAdapter);\r\n            FillMainServicesList();\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    private void FillMainServicesList() {\r\n        mainServiceViewModel.MainServiceMutableLiveData.observe(MainServicesAndSubServices.this, new Observer&lt;ResponseModel&gt;() {\r\n            @Override\r\n            public void onChanged(ResponseModel responseModel) {\r\n                serviceAdapter.setMainServicesModelList(responseModel.getData().getMainServicesModels());\r\nserviceAdapter.notifyDataSetChanged();\r\n                Toast.makeText(MainServicesAndSubServices.this, &quot;&quot; + responseModel.getData().getMainServicesModels(), Toast.LENGTH_SHORT).show();\r\n                MainServiceRV.setAdapter(serviceAdapter);\r\n            }\r\n        });\r\n    }\r\n\r\n    @Override\r\n    public void onMainServiceSelected(MainServicesModel mainServicesModel) {\r\n\r\n    }\r\n}\r\n```\r\n\r\nI created another service in the API to facilitate my coding\r\n```\r\ngetMainServicesByServicesTypeId(ServiceTypeId)\r\n```\r\n\r\nany help would be appreciated thank you in advance if u need any more clarification please don&#39;t hesitate to ask","title":"Can&#39;t fetch data from API, what am i doing wrong?","body":"<p>hello iam trying to populate a recyclerview with data from API the data from a sub table inside the main table below is all code for more clarity.</p>\n<p>API JSON. i am aware of the problem with expected begin_object but was begin_array and did it properly.</p>\n<pre><code>{\n  &quot;Status&quot;: 200,\n  &quot;Message&quot;: &quot;OK&quot;,\n  &quot;Data&quot;: {\n    &quot;MainServices&quot;: [\n      {\n        &quot;Id&quot;: 11,\n        &quot;ServiceTypeId&quot;: 1,\n        &quot;MainServiceNameAr&quot;: &quot;\\r\\n&quot;,\n        &quot;MainServiceNameEn&quot;: &quot;Air conditioning\\r\\n&quot;,\n        &quot;SubServices&quot;: []\n      },\n      {\n        &quot;Id&quot;: 12,\n        &quot;ServiceTypeId&quot;: 1,\n        &quot;MainServiceNameAr&quot;: &quot;\\r\\n&quot;,\n        &quot;MainServiceNameEn&quot;: &quot;Electricity\\r\\n&quot;,\n        &quot;SubServices&quot;: []\n      },\n      {\n        &quot;Id&quot;: 14,\n        &quot;ServiceTypeId&quot;: 1,\n        &quot;MainServiceNameAr&quot;: &quot;&quot;,\n        &quot;MainServiceNameEn&quot;: &quot;Plumbing\\r\\n&quot;,\n        &quot;SubServices&quot;: [\n          {\n            &quot;Id&quot;: 24,\n            &quot;MainServiceId&quot;: 14,\n            &quot;SubServiceNameAr&quot;: &quot; \\r\\n&quot;,\n            &quot;SubServiceNameEn&quot;: &quot;Health Tools\\r\\n&quot;,\n            &quot;ServicePriceLists&quot;: []\n          },\n          {\n            &quot;Id&quot;: 25,\n            &quot;MainServiceId&quot;: 14,\n            &quot;SubServiceNameAr&quot;: &quot; \\r\\n&quot;,\n            &quot;SubServiceNameEn&quot;: &quot;Water blockage\\r\\n&quot;,\n            &quot;ServicePriceLists&quot;: []\n          }\n        ]\n      },\n      {\n        &quot;Id&quot;: 15,\n        &quot;ServiceTypeId&quot;: 1,\n        &quot;MainServiceNameAr&quot;: &quot; \\r\\n&quot;,\n        &quot;MainServiceNameEn&quot;: &quot;Home appliances\\r\\n&quot;,\n        &quot;SubServices&quot;: []\n      },\n      {\n        &quot;Id&quot;: 16,\n        &quot;ServiceTypeId&quot;: 2,\n        &quot;MainServiceNameAr&quot;: &quot;\\r\\n&quot;,\n        &quot;MainServiceNameEn&quot;: &quot;Cleaning\\r\\n&quot;,\n        &quot;SubServices&quot;: []\n      }\n    ]\n  }\n}\n</code></pre>\n<p>Models.\ni separated the models as ResponseModel, DataModel (where DataModel includes the rest of the Lists and services) and MainServicesModel with ServicesTypeModel</p>\n<pre><code>public class MainServicesModel {\n    @SerializedName(&quot;Id&quot;)\n    public int Id;\n    @SerializedName(&quot;ServiceTypeId&quot;)\n    public int ServiceTypeId;\n    @SerializedName(&quot;MainServiceNameAr&quot;)\n    public String MainServiceNameAr;\n    @SerializedName(&quot;MainServiceNameEn&quot;)\n    public String MainServiceNameEn;\n    @SerializedName(&quot;SubServices&quot;)\n    public List&lt;SubServicesModel&gt; subServicesModel;\n\n    public int getId() {\n        return Id;\n    }\n\n    public void setId(int id) {\n        Id = id;\n    }\n\n    public int getServiceTypeId() {\n        return ServiceTypeId;\n    }\n\n    public void setServiceTypeId(int serviceTypeId) {\n        ServiceTypeId = serviceTypeId;\n    }\n\n    public String getMainServiceNameAr() {\n        return MainServiceNameAr;\n    }\n\n    public void setMainServiceNameAr(String mainServiceNameAr) {\n        MainServiceNameAr = mainServiceNameAr;\n    }\n\n    public String getMainServiceNameEn() {\n        return MainServiceNameEn;\n    }\n\n    public void setMainServiceNameEn(String mainServiceNameEn) {\n        MainServiceNameEn = mainServiceNameEn;\n    }\n\n    public List&lt;SubServicesModel&gt; getSubServicesModel() {\n        return subServicesModel;\n    }\n\n    public void setSubServicesModel(List&lt;SubServicesModel&gt; subServicesModel) {\n        this.subServicesModel = subServicesModel;\n    }\n} \n</code></pre>\n<p>MainServiceAdapter</p>\n<pre><code>public class MainServiceAdapter extends RecyclerView.Adapter&lt;MainServiceAdapter.MainServiceHolder&gt; {\n    private List&lt;MainServicesModel&gt; mainServicesModelList;\n    private MainServiceListener listener;\n\n\n    public MainServiceAdapter(List&lt;MainServicesModel&gt; mainServicesModels , MainServiceListener listener) {\n        this.mainServicesModelList = mainServicesModels;\n        this.listener = listener;\n    }\n\n    @NonNull\n    @Override\n    public MainServiceAdapter.MainServiceHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\n        View iteView = LayoutInflater.from(parent.getContext()).inflate(R.layout.main_service_item, parent, false);\n        return new MainServiceHolder(iteView);\n    }\n\n    @Override\n    public void onBindViewHolder(@NonNull MainServiceAdapter.MainServiceHolder holder, int position) {\n        holder.MainServiceTxt.setText(mainServicesModelList.get(position).getMainServiceNameAr());\n    }\n\n    @Override\n    public int getItemCount() {\n//        return null!=mainServicesModelList?mainServicesModelList.size():0;\n        return mainServicesModelList.size();\n    }\n\n    public long getItemId(int position) {\n        return position;\n    }\n\n    public void setMainServicesModelList(List&lt;MainServicesModel&gt; mainServicesModelList) {\n        this.mainServicesModelList = mainServicesModelList;\n        notifyDataSetChanged();\n    }\n\n    public class MainServiceHolder extends RecyclerView.ViewHolder {\n        TextView MainServiceTxt;\n//        ImageView\n        public MainServiceHolder(@NonNull View itemView) {\n            super(itemView);\n            MainServiceTxt = itemView.findViewById(R.id.MainServiceName);\n            itemView.setOnClickListener(new View.OnClickListener() {\n                @Override\n                public void onClick(View v) {\n                    listener.onMainServiceSelected(mainServicesModelList.get(getAdapterPosition()));\n                }\n            });\n        }\n    }\n    public interface MainServiceListener {\n        void onMainServiceSelected(MainServicesModel mainServicesModel);\n    }\n}\n</code></pre>\n<p>MainActivity</p>\n<pre><code>\npublic class MainServicesAndSubServices extends AppCompatActivity implements MainServiceAdapter.MainServiceListener {\n\n    private final List&lt;MainServicesModel&gt; mainServicesModelArrayList = new ArrayList&lt;&gt;();\n    MainServiceAdapter serviceAdapter = new MainServiceAdapter(mainServicesModelArrayList, this);\n    MainServiceViewModel mainServiceViewModel;\n    RecyclerView MainServiceRV;\n    int ServiceTypeId ;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main_sub_services);\n\n// Here i call the ServiceTypeId from MainServiceType\n\n        Intent intent = getIntent();\n        Bundle bd = intent.getExtras();\n        if (bd != null) {\n            ServiceTypeId = (int) bd.get(&quot;ServiceTypeId&quot;);\n        }\n        Toast.makeText(MainServicesAndSubServices.this, &quot;&quot; + ServiceTypeId, \nToast.LENGTH_SHORT).show();\n\n// Here i call the ServiceTypeId from MainServiceType\n\n        try {\n            MainServiceRV = findViewById(R.id.RVMainServices);\n            mainServiceViewModel = ViewModelProviders.of(this).get(MainServiceViewModel.class);\n            mainServiceViewModel.getMainServicesByServiceTypeId(ServiceTypeId);\n            LinearLayoutManager layoutManager = new LinearLayoutManager(this, LinearLayoutManager.VERTICAL, false);\n            MainServiceRV.setLayoutManager(layoutManager);\n            MainServiceRV.setAdapter(serviceAdapter);\n            FillMainServicesList();\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n\n    private void FillMainServicesList() {\n        mainServiceViewModel.MainServiceMutableLiveData.observe(MainServicesAndSubServices.this, new Observer&lt;ResponseModel&gt;() {\n            @Override\n            public void onChanged(ResponseModel responseModel) {\n                serviceAdapter.setMainServicesModelList(responseModel.getData().getMainServicesModels());\nserviceAdapter.notifyDataSetChanged();\n                Toast.makeText(MainServicesAndSubServices.this, &quot;&quot; + responseModel.getData().getMainServicesModels(), Toast.LENGTH_SHORT).show();\n                MainServiceRV.setAdapter(serviceAdapter);\n            }\n        });\n    }\n\n    @Override\n    public void onMainServiceSelected(MainServicesModel mainServicesModel) {\n\n    }\n}\n</code></pre>\n<p>I created another service in the API to facilitate my coding</p>\n<pre><code>getMainServicesByServicesTypeId(ServiceTypeId)\n</code></pre>\n<p>any help would be appreciated thank you in advance if u need any more clarification please don't hesitate to ask</p>\n"},{"tags":["java","android","android-mediacodec"],"comments":[{"owner":{"account_id":6018851,"reputation":3101,"user_id":4726707,"accept_rate":70,"display_name":"Blip"},"score":0,"creation_date":1433146012,"post_id":30568444,"comment_id":49207436,"body_markdown":"please be more specific about the problem. also share the code you are using to help solve your problem.","body":"please be more specific about the problem. also share the code you are using to help solve your problem."},{"owner":{"account_id":4271332,"reputation":11,"user_id":3493075,"display_name":"316karan"},"score":0,"creation_date":1433159505,"post_id":30568444,"comment_id":49215500,"body_markdown":"@Blip. Thanks for the reply. Added code snippets and pushed the complete code on git. https://github.com/316karan/mediacodec-tele","body":"@Blip. Thanks for the reply. Added code snippets and pushed the complete code on git. <a href=\"https://github.com/316karan/mediacodec-tele\" rel=\"nofollow noreferrer\">github.com/316karan/mediacodec-tele</a>"},{"owner":{"account_id":2610787,"reputation":1473,"user_id":2260921,"display_name":"Marlon"},"score":0,"creation_date":1433169554,"post_id":30568444,"comment_id":49222728,"body_markdown":"http://stackoverflow.com/questions/22457623/surfacetextures-onframeavailable-method-always-called-too-late please look here, morelikely you have to put your stuff to the right thread","body":"<a href=\"http://stackoverflow.com/questions/22457623/surfacetextures-onframeavailable-method-always-called-too-late\" title=\"surfacetextures onframeavailable method always called too late\">stackoverflow.com/questions/22457623/&hellip;</a> please look here, morelikely you have to put your stuff to the right thread"},{"owner":{"account_id":4271332,"reputation":11,"user_id":3493075,"display_name":"316karan"},"score":0,"creation_date":1433225643,"post_id":30568444,"comment_id":49246346,"body_markdown":"@Marlon thank you so much. That worked for me :)","body":"@Marlon thank you so much. That worked for me :)"},{"owner":{"account_id":2693702,"reputation":357,"user_id":2326325,"display_name":"Gaurav Saluja"},"score":0,"creation_date":1556880443,"post_id":30568444,"comment_id":98587185,"body_markdown":"I have shared how I was able to resolve the issue here.\n\nhttps://stackoverflow.com/a/55968224/2326325","body":"I have shared how I was able to resolve the issue here.  <a href=\"https://stackoverflow.com/a/55968224/2326325\">stackoverflow.com/a/55968224/2326325</a>"}],"answers":[{"tags":[],"owner":{"account_id":20213785,"reputation":1,"user_id":14825250,"display_name":"mohammad mahdi farahani"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663674822,"creation_date":1663674822,"answer_id":73786274,"question_id":30568444,"body_markdown":"do not block the main thread. run that method in another thread","title":"Video Compression using Telegram&#39;s Code Android - Output surface wait timed out | MediaCodec","body":"<p>do not block the main thread. run that method in another thread</p>\n"}],"owner":{"account_id":4271332,"reputation":11,"user_id":3493075,"display_name":"316karan"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1686,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1663674822,"creation_date":1433145653,"question_id":30568444,"body_markdown":"The code I&#39;m using is from this repo : https://github.com/DrKLO/Telegram/\r\n\r\nIn the ~/src/main/java/org/telegram/android/video/MediaController class where the encoder and decoder are instantiated, I&#39;m getting &quot;Sufrace wait timed out exception&quot; in the OutputSurface class no matter what video I&#39;m choosing. \r\n\r\nTried on devices : Nexus 4 (Lollipop), Asus Zenfone 5 (Kitkat), Moto G (Kitkat). \r\n\r\nIs there anything that I&#39;m missing? I have not changed the code at all.\r\n\r\n-- code snippet from MediaController.java -- \r\n\r\n    if (!decoderDone) {\r\n                                            int decoderStatus = decoder.dequeueOutputBuffer(info, TIMEOUT_USEC);\r\n                                            if (decoderStatus == MediaCodec.INFO_TRY_AGAIN_LATER) {\r\n                                                decoderOutputAvailable = false;\r\n                                            } else if (decoderStatus == MediaCodec.INFO_OUTPUT_BUFFERS_CHANGED) {\r\n                                        } else if (decoderStatus == MediaCodec.INFO_OUTPUT_FORMAT_CHANGED) {\r\n                                            MediaFormat newFormat = decoder.getOutputFormat();\r\n                                            Log.e(&quot;tmessages&quot;, &quot;newFormat = &quot; + newFormat);\r\n                                        } else if (decoderStatus &lt; 0) {\r\n                                            throw new RuntimeException(&quot;unexpected result from decoder.dequeueOutputBuffer: &quot; + decoderStatus);\r\n                                        } else {\r\n                                            boolean doRender = false;\r\n                                            if (Build.VERSION.SDK_INT &gt;= 18) {\r\n                                                doRender = info.size != 0;\r\n                                            } else {\r\n                                                doRender = info.size != 0 || info.presentationTimeUs != 0;\r\n                                            }\r\n                                            if (endTime &gt; 0 &amp;&amp; info.presentationTimeUs &gt;= endTime) {\r\n                                                inputDone = true;\r\n                                                decoderDone = true;\r\n                                                doRender = false;\r\n                                                info.flags |= MediaCodec.BUFFER_FLAG_END_OF_STREAM;\r\n                                            }\r\n                                            if (startTime &gt; 0 &amp;&amp; videoTime == -1) {\r\n                                                if (info.presentationTimeUs &lt; startTime) {\r\n                                                    doRender = false;\r\n                                                    Log.e(&quot;tmessages&quot;, &quot;drop frame startTime = &quot; + startTime + &quot; present time = &quot; + info.presentationTimeUs);\r\n                                                } else {\r\n                                                    videoTime = info.presentationTimeUs;\r\n                                                }\r\n                                            }\r\n                                            decoder.releaseOutputBuffer(decoderStatus, doRender);\r\n                                            if (doRender) {\r\n                                                boolean errorWait = false;\r\n                                                try {\r\n                                                    outputSurface.awaitNewImage();\r\n                                                } catch (Exception e) {\r\n                                                \tLog.e(&quot;wait&quot;,&quot;&quot;+true);\r\n                                                    errorWait = true;\r\n                                                    Log.e(&quot;tmessages&quot;, e.getMessage());\r\n                                                }\r\n                                                if (!errorWait) {\r\n                                                    if (Build.VERSION.SDK_INT &gt;= 18) {\r\n                                                        outputSurface.drawImage(false);\r\n                                                        inputSurface.setPresentationTime(info.presentationTimeUs * 1000);\r\n                                                        inputSurface.swapBuffers();\r\n                                                    } else {\r\n                                                        int inputBufIndex = encoder.dequeueInputBuffer(TIMEOUT_USEC);\r\n                                                        if (inputBufIndex &gt;= 0) {\r\n                                                            outputSurface.drawImage(true);\r\n                                                            ByteBuffer rgbBuf = outputSurface.getFrame();\r\n                                                            ByteBuffer yuvBuf = encoderInputBuffers[inputBufIndex];\r\n                                                            yuvBuf.clear();\r\n                                                            convertVideoFrame(rgbBuf, yuvBuf, colorFormat, resultWidth, resultHeight, padding, swapUV);\r\n                                                            encoder.queueInputBuffer(inputBufIndex, 0, bufferSize, info.presentationTimeUs, 0);\r\n                                                        } else {\r\n                                                            Log.e(&quot;tmessages&quot;, &quot;input buffer not available&quot;);\r\n                                                        }\r\n                                                    }\r\n                                                }\r\n                                            }\r\n                                            if ((info.flags &amp; MediaCodec.BUFFER_FLAG_END_OF_STREAM) != 0) {\r\n                                                decoderOutputAvailable = false;\r\n                                                Log.e(&quot;tmessages&quot;, &quot;decoder stream end&quot;);\r\n                                                if (Build.VERSION.SDK_INT &gt;= 18) {\r\n                                                    encoder.signalEndOfInputStream();\r\n                                                } else {\r\n                                                    int inputBufIndex = encoder.dequeueInputBuffer(TIMEOUT_USEC);\r\n                                                    if (inputBufIndex &gt;= 0) {\r\n                                                        encoder.queueInputBuffer(inputBufIndex, 0, 1, info.presentationTimeUs, MediaCodec.BUFFER_FLAG_END_OF_STREAM);\r\n                                                    }\r\n                                                }\r\n                                            }\r\n                                        }\r\n                                    } \r\n\r\n-- code snippet from OutputSurface.java --\r\n\r\n    public void awaitNewImage() {\r\n            final int TIMEOUT_MS = 2500;\r\n            synchronized (mFrameSyncObject) {\r\n                while (!mFrameAvailable) {\r\n                    try {\r\n                        mFrameSyncObject.wait(TIMEOUT_MS);\r\n                        if (!mFrameAvailable) {\r\n                            throw new RuntimeException(&quot;Surface frame wait timed out&quot;);\r\n                        }\r\n                    } catch (InterruptedException ie) {\r\n                        throw new RuntimeException(ie);\r\n                    }\r\n                }\r\n                mFrameAvailable = false;\r\n            }\r\n            mTextureRender.checkGlError(&quot;before updateTexImage&quot;);\r\n            mSurfaceTexture.updateTexImage();\r\n        }\r\n\r\n    public void drawImage(boolean invert) {\r\n        mTextureRender.drawFrame(mSurfaceTexture, invert);\r\n    }\r\n\r\n    @Override\r\n    public void onFrameAvailable(SurfaceTexture st) {\r\n    \tLog.d(&quot;frame &quot;,&quot;new frame&quot;);\r\n        synchronized (mFrameSyncObject) {\r\n            if (mFrameAvailable) {\r\n                throw new RuntimeException(&quot;mFrameAvailable already set, frame could be dropped&quot;);\r\n            }\r\n            mFrameAvailable = true;\r\n            mFrameSyncObject.notifyAll();\r\n        }\r\n    }\r\n\r\nThese code snippets might not make a lot of sense and can&#39;t post the complete code here because its huge. You can find the complete code here : https://github.com/316karan/mediacodec-tele\r\n\r\nThe problem is I never receive any frame on the OutputSurface and it goes in a an infinite loop with timeouts. \r\n","title":"Video Compression using Telegram&#39;s Code Android - Output surface wait timed out | MediaCodec","body":"<p>The code I'm using is from this repo : <a href=\"https://github.com/DrKLO/Telegram/\" rel=\"nofollow\">https://github.com/DrKLO/Telegram/</a></p>\n\n<p>In the ~/src/main/java/org/telegram/android/video/MediaController class where the encoder and decoder are instantiated, I'm getting \"Sufrace wait timed out exception\" in the OutputSurface class no matter what video I'm choosing. </p>\n\n<p>Tried on devices : Nexus 4 (Lollipop), Asus Zenfone 5 (Kitkat), Moto G (Kitkat). </p>\n\n<p>Is there anything that I'm missing? I have not changed the code at all.</p>\n\n<p>-- code snippet from MediaController.java -- </p>\n\n<pre><code>if (!decoderDone) {\n                                        int decoderStatus = decoder.dequeueOutputBuffer(info, TIMEOUT_USEC);\n                                        if (decoderStatus == MediaCodec.INFO_TRY_AGAIN_LATER) {\n                                            decoderOutputAvailable = false;\n                                        } else if (decoderStatus == MediaCodec.INFO_OUTPUT_BUFFERS_CHANGED) {\n                                    } else if (decoderStatus == MediaCodec.INFO_OUTPUT_FORMAT_CHANGED) {\n                                        MediaFormat newFormat = decoder.getOutputFormat();\n                                        Log.e(\"tmessages\", \"newFormat = \" + newFormat);\n                                    } else if (decoderStatus &lt; 0) {\n                                        throw new RuntimeException(\"unexpected result from decoder.dequeueOutputBuffer: \" + decoderStatus);\n                                    } else {\n                                        boolean doRender = false;\n                                        if (Build.VERSION.SDK_INT &gt;= 18) {\n                                            doRender = info.size != 0;\n                                        } else {\n                                            doRender = info.size != 0 || info.presentationTimeUs != 0;\n                                        }\n                                        if (endTime &gt; 0 &amp;&amp; info.presentationTimeUs &gt;= endTime) {\n                                            inputDone = true;\n                                            decoderDone = true;\n                                            doRender = false;\n                                            info.flags |= MediaCodec.BUFFER_FLAG_END_OF_STREAM;\n                                        }\n                                        if (startTime &gt; 0 &amp;&amp; videoTime == -1) {\n                                            if (info.presentationTimeUs &lt; startTime) {\n                                                doRender = false;\n                                                Log.e(\"tmessages\", \"drop frame startTime = \" + startTime + \" present time = \" + info.presentationTimeUs);\n                                            } else {\n                                                videoTime = info.presentationTimeUs;\n                                            }\n                                        }\n                                        decoder.releaseOutputBuffer(decoderStatus, doRender);\n                                        if (doRender) {\n                                            boolean errorWait = false;\n                                            try {\n                                                outputSurface.awaitNewImage();\n                                            } catch (Exception e) {\n                                                Log.e(\"wait\",\"\"+true);\n                                                errorWait = true;\n                                                Log.e(\"tmessages\", e.getMessage());\n                                            }\n                                            if (!errorWait) {\n                                                if (Build.VERSION.SDK_INT &gt;= 18) {\n                                                    outputSurface.drawImage(false);\n                                                    inputSurface.setPresentationTime(info.presentationTimeUs * 1000);\n                                                    inputSurface.swapBuffers();\n                                                } else {\n                                                    int inputBufIndex = encoder.dequeueInputBuffer(TIMEOUT_USEC);\n                                                    if (inputBufIndex &gt;= 0) {\n                                                        outputSurface.drawImage(true);\n                                                        ByteBuffer rgbBuf = outputSurface.getFrame();\n                                                        ByteBuffer yuvBuf = encoderInputBuffers[inputBufIndex];\n                                                        yuvBuf.clear();\n                                                        convertVideoFrame(rgbBuf, yuvBuf, colorFormat, resultWidth, resultHeight, padding, swapUV);\n                                                        encoder.queueInputBuffer(inputBufIndex, 0, bufferSize, info.presentationTimeUs, 0);\n                                                    } else {\n                                                        Log.e(\"tmessages\", \"input buffer not available\");\n                                                    }\n                                                }\n                                            }\n                                        }\n                                        if ((info.flags &amp; MediaCodec.BUFFER_FLAG_END_OF_STREAM) != 0) {\n                                            decoderOutputAvailable = false;\n                                            Log.e(\"tmessages\", \"decoder stream end\");\n                                            if (Build.VERSION.SDK_INT &gt;= 18) {\n                                                encoder.signalEndOfInputStream();\n                                            } else {\n                                                int inputBufIndex = encoder.dequeueInputBuffer(TIMEOUT_USEC);\n                                                if (inputBufIndex &gt;= 0) {\n                                                    encoder.queueInputBuffer(inputBufIndex, 0, 1, info.presentationTimeUs, MediaCodec.BUFFER_FLAG_END_OF_STREAM);\n                                                }\n                                            }\n                                        }\n                                    }\n                                } \n</code></pre>\n\n<p>-- code snippet from OutputSurface.java --</p>\n\n<pre><code>public void awaitNewImage() {\n        final int TIMEOUT_MS = 2500;\n        synchronized (mFrameSyncObject) {\n            while (!mFrameAvailable) {\n                try {\n                    mFrameSyncObject.wait(TIMEOUT_MS);\n                    if (!mFrameAvailable) {\n                        throw new RuntimeException(\"Surface frame wait timed out\");\n                    }\n                } catch (InterruptedException ie) {\n                    throw new RuntimeException(ie);\n                }\n            }\n            mFrameAvailable = false;\n        }\n        mTextureRender.checkGlError(\"before updateTexImage\");\n        mSurfaceTexture.updateTexImage();\n    }\n\npublic void drawImage(boolean invert) {\n    mTextureRender.drawFrame(mSurfaceTexture, invert);\n}\n\n@Override\npublic void onFrameAvailable(SurfaceTexture st) {\n    Log.d(\"frame \",\"new frame\");\n    synchronized (mFrameSyncObject) {\n        if (mFrameAvailable) {\n            throw new RuntimeException(\"mFrameAvailable already set, frame could be dropped\");\n        }\n        mFrameAvailable = true;\n        mFrameSyncObject.notifyAll();\n    }\n}\n</code></pre>\n\n<p>These code snippets might not make a lot of sense and can't post the complete code here because its huge. You can find the complete code here : <a href=\"https://github.com/316karan/mediacodec-tele\" rel=\"nofollow\">https://github.com/316karan/mediacodec-tele</a></p>\n\n<p>The problem is I never receive any frame on the OutputSurface and it goes in a an infinite loop with timeouts. </p>\n"},{"tags":["java","gradle","intellij-idea"],"comments":[{"owner":{"account_id":2273465,"reputation":15439,"user_id":2000323,"display_name":"Andrey"},"score":0,"creation_date":1663683487,"post_id":73786219,"comment_id":130294506,"body_markdown":"Does it work if you build the project by Gradle from the command line? And when you build it from the IntelliJ IDEA? Please provide a sample project if problem remains.","body":"Does it work if you build the project by Gradle from the command line? And when you build it from the IntelliJ IDEA? Please provide a sample project if problem remains."}],"owner":{"account_id":1242653,"reputation":5930,"user_id":1493868,"accept_rate":73,"display_name":"Trn Kim D"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":228,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1663674571,"creation_date":1663674571,"question_id":73786219,"body_markdown":"My Java project has 2 modules: `moduleA` and `moduleB`. Inside moduleB&#39;s tests, I want to import some test files of moduleA.\r\n\r\nHere is the way that I defined in the moduleB gradle:\r\n\r\n    dependencies {\r\n        testImplementation project(&quot;:moduleA&quot;).sourceSets.test.output\r\n    }\r\n\r\nBy doing this, my IDE, which is IntellijIDEA, can recognize the test source files from the moduleA. However, when I run tests of moduleB, I receive the following error:\r\n\r\n&gt; error: package com.moduleA.test_utils does not exist\r\n\r\nHow can I fix this?\r\n\r\nThanks","title":"Gradle: import test files from other module in the same project","body":"<p>My Java project has 2 modules: <code>moduleA</code> and <code>moduleB</code>. Inside moduleB's tests, I want to import some test files of moduleA.</p>\n<p>Here is the way that I defined in the moduleB gradle:</p>\n<pre><code>dependencies {\n    testImplementation project(&quot;:moduleA&quot;).sourceSets.test.output\n}\n</code></pre>\n<p>By doing this, my IDE, which is IntellijIDEA, can recognize the test source files from the moduleA. However, when I run tests of moduleB, I receive the following error:</p>\n<blockquote>\n<p>error: package com.moduleA.test_utils does not exist</p>\n</blockquote>\n<p>How can I fix this?</p>\n<p>Thanks</p>\n"},{"tags":["java","junit","mockito","prepared-statement","dao"],"comments":[{"owner":{"account_id":21334260,"reputation":3,"user_id":15705714,"display_name":"Robin kumar"},"score":0,"creation_date":1663674207,"post_id":73786052,"comment_id":130290732,"body_markdown":"Yes, But when i tried to run my test it goes till line Public boolean doInpreparedsatement and after that it goes to dataAccessException and then it goes to Return 0.","body":"Yes, But when i tried to run my test it goes till line Public boolean doInpreparedsatement and after that it goes to dataAccessException and then it goes to Return 0."},{"owner":{"account_id":21334260,"reputation":3,"user_id":15705714,"display_name":"Robin kumar"},"score":0,"creation_date":1663674295,"post_id":73786052,"comment_id":130290760,"body_markdown":"I tried many ways to go inside doInpreparedStatement but i am not able to do that, i searched google and github for the solution i didn&#39;t get.","body":"I tried many ways to go inside doInpreparedStatement but i am not able to do that, i searched google and github for the solution i didn&#39;t get."},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1663674321,"post_id":73786052,"comment_id":130290772,"body_markdown":"that is one scenario covered, now the rest","body":"that is one scenario covered, now the rest"},{"owner":{"account_id":21334260,"reputation":3,"user_id":15705714,"display_name":"Robin kumar"},"score":0,"creation_date":1663674393,"post_id":73786052,"comment_id":130290793,"body_markdown":"Yes, right. Need help","body":"Yes, right. Need help"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1663675410,"post_id":73786052,"comment_id":130291205,"body_markdown":"Look at `thenAnswer`, and call the `PreparedStatementCallback.doInPreparedStatement` passing a mock PreparedStatement","body":"Look at <code>thenAnswer</code>, and call the <code>PreparedStatementCallback.doInPreparedStatement</code> passing a mock PreparedStatement"},{"owner":{"account_id":21334260,"reputation":3,"user_id":15705714,"display_name":"Robin kumar"},"score":0,"creation_date":1663679477,"post_id":73786052,"comment_id":130292774,"body_markdown":"can you be more specific?","body":"can you be more specific?"},{"owner":{"account_id":21334260,"reputation":3,"user_id":15705714,"display_name":"Robin kumar"},"score":0,"creation_date":1663679677,"post_id":73786052,"comment_id":130292865,"body_markdown":"Like this , when(jdbcTemplate.execute(Mockito.anyString(), Mockito.any(PreparedStatementCallback.class))).thenReturn(PreparedStatementCallback.doInPreparedStatement(ps));","body":"Like this , when(jdbcTemplate.execute(Mockito.anyString(), Mockito.any(PreparedStatementCallback.class))).thenReturn(Pr&zwnj;&#8203;eparedStatementCallb&zwnj;&#8203;ack.doInPreparedStat&zwnj;&#8203;ement(ps));"},{"owner":{"account_id":21334260,"reputation":3,"user_id":15705714,"display_name":"Robin kumar"},"score":0,"creation_date":1663680225,"post_id":73786052,"comment_id":130293101,"body_markdown":"I am getting this error, Cannot make a static reference to the non-static method doInPreparedStatement(PreparedStatement) from the type PreparedStatementCallback","body":"I am getting this error, Cannot make a static reference to the non-static method doInPreparedStatement(PreparedStatement) from the type PreparedStatementCallback"}],"owner":{"account_id":21334260,"reputation":3,"user_id":15705714,"display_name":"Robin kumar"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":102,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1663673993,"creation_date":1663673754,"question_id":73786052,"body_markdown":"    @Override\r\n    public int insertEvent(JobStatusDTO jobStatusDTO) throws AccountUpdateException {\r\n    \t\tLOGGER.info(&quot;In insertAccountUpdateEvent- {}&quot;, jobStatusDTO);\r\n    \t\ttry {\r\n    \t\t\tjdbcTemplate.execute(&quot;INSERT INTO EVENT_LOG (JOB_EXECUTION_ID, FILE_NAME, STATUS, TOTAL_EVENTS_RECD, TOTAL_EVENTS_PROCESSED, TOTAL_EVENTS_FAILED, FILE_PROCESS_START_TIME, FILE_PROCESS_END_TIME, PROCESS_MESSAGE_N) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)&quot;,new PreparedStatementCallback&lt;Boolean&gt;() {\r\n       @Override\r\n    \tpublic Boolean doInPreparedStatement(PreparedStatement ps)throws SQLException, DataAccessException {\r\n    \t\t\t\t\t\t\tps.setLong(1, jobStatusDTO.getJobId());\r\n    \t\t\t\t\t\t\tps.setString(2, jobStatusDTO.getFileName());\r\n    \t\t\t\t\t\t\tps.setString(3, jobStatusDTO.getJobStatus());\r\n    \t\t\t\t\t\t\tps.setLong(4, jobStatusDTO.getTotalEvents());\r\n    \t\t\t\t\t\t\tps.setLong(5, jobStatusDTO.getTotalSuccessEvents());\r\n    \t\t\t\t\t\t\tps.setLong(6, jobStatusDTO.getTotalFailedEvents());\r\n    \t\t\t\t\t\t\tps.setTimestamp(7, new Timestamp(jobStatusDTO.getJobStartTime().getTime()));\r\n    \t\t\t\t\t\t\tps.setTimestamp(8, new Timestamp(jobStatusDTO.getJobEndTime().getTime()));\r\n    \t\t\t\t\t\t\tps.setString(9, processErrorMessage(jobStatusDTO));\r\n    \t\t\t\t\t\t\treturn ps.execute();\r\n    \t\t\t\t\t\t}\r\n    \r\n    \t\t\t\t\t});\r\n    \t\t} catch (DataAccessException e) {\r\n    \t\t\tthrow new Exception(Error.ERR_080.getErrorMessage(), e.getMessage());\r\n    \t\t} catch (Exception e) {\r\n    \t\t\tthrow new Exception(Error.ERR_081.getErrorMessage(), e.getMessage());\r\n    \t\t}\r\n    \t\treturn 0;\r\n    \t}\r\n\r\n-------------------------------------------------------------------------\r\nI am using Spring framework for my project. When I Debug this it fails at doInpreparedStatement, as it is not getting inside of this method. I am not able to cover the PreparedStatementCallback, And due to this I am not able to achieve 100% coverage. I have written this test below, I am not sure if it is right or wrong as i am new to unit testing.\r\n\r\n-------------------------------------------------------------------------\r\n\r\nclass AccountUpdateAuditDAOImplTest {\r\n\r\n\t@InjectMocks\r\n\tAccountUpdateAuditDAOImpl accountUpdateAuditDAOImpl;\r\n\t\r\n\t@Mock\r\n\tJdbcTemplate jdbcTemplate;\r\n\t\r\n\t@Mock\r\n\tResultSet set;\r\n\t\r\n\t@Mock\r\n\tNamedParameterJdbcTemplate namedTemplate;\r\n\t\r\n\t@SuppressWarnings(&quot;rawtypes&quot;)\r\n\t@Captor\r\n\tArgumentCaptor argCaptor;\r\n\t\r\n\t@BeforeEach\r\n\tvoid setup() throws Exception {\r\n\t\tMockitoAnnotations.openMocks(this);\r\n\t}\r\n\t\r\n\t@SuppressWarnings(&quot;unchecked&quot;)\r\n\t@Test\r\n\tvoid testInsertAccountUpdateEvent() throws AccountUpdateException, Exception {\r\n\t\twhen(jdbcTemplate.execute(Mockito.anyString(), Mockito.any(PreparedStatementCallback.class))).thenReturn(true);\r\n\t\tJobStatusDTO dTO = createMockDTO();\r\n\t\tPreparedStatement ps = mock(PreparedStatement.class);\r\n\t\tps.setLong(1, dTO.getJobId());\r\n\t\tList&lt;JobStatusDTO&gt;   list = new ArrayList&lt;JobStatusDTO&gt;();\r\n\t\tdTO.setJobId(1);\r\n\t\tlist.add(dTO);\r\n\t\t\r\n\t\tList&lt;Map&lt;String, Object&gt;&gt; value = new ArrayList&lt;Map&lt;String, Object&gt;&gt;();\r\n\t\tMap&lt;String, Object&gt; map =new HashMap&lt;String, Object&gt;();\r\n\t\tmap.put(&quot;Job_Id&quot;, &quot;1&quot;);\r\n\t\tmap.put(&quot;File_Name&quot;, &quot;RTAU_Btach&quot;);\r\n\t\tmap.put(&quot;Job_Status&quot;, &quot;Completed&quot;);\r\n\t\tmap.put(&quot;Total_Event&quot;, &quot;10&quot;);\r\n\t\tmap.put(&quot;Success_Event&quot;, &quot;7&quot;);\r\n\t\tmap.put(&quot;Failure_Event&quot;, &quot;3&quot;);\r\n\t\tvalue.add(map);\r\n\t\t\r\n\t\tMockito.when(namedTemplate.queryForList(Mockito.anyString(), Mockito.anyMap())).thenReturn(value);\r\n\t\tassertDoesNotThrow(()-&gt;accountUpdateAuditDAOImpl.insertAccountUpdateEvent(dTO));\r\n\t}\r\n\t\r\n\t\r\n\tprivate JobStatusDTO createMockDTO() {\r\n\t\tJobStatusDTO jobStatusDTO = new JobStatusDTO();\r\n\t\tjobStatusDTO.setFileName(&quot;rtau_pulse_20220624104610853.txt&quot;);\r\n\t\tjobStatusDTO.setJobStatus(&quot;PARTIALLY COMPLETED&quot;);\r\n\t\tjobStatusDTO.setProcessMessage(&quot;Passed&quot;);\r\n\t\tjobStatusDTO.setTotalSuccessEvents(15l);\r\n\t\treturn jobStatusDTO;\r\n\t}\r\n}","title":"How to pass 100% of coverage","body":"<pre><code>@Override\npublic int insertEvent(JobStatusDTO jobStatusDTO) throws AccountUpdateException {\n        LOGGER.info(&quot;In insertAccountUpdateEvent- {}&quot;, jobStatusDTO);\n        try {\n            jdbcTemplate.execute(&quot;INSERT INTO EVENT_LOG (JOB_EXECUTION_ID, FILE_NAME, STATUS, TOTAL_EVENTS_RECD, TOTAL_EVENTS_PROCESSED, TOTAL_EVENTS_FAILED, FILE_PROCESS_START_TIME, FILE_PROCESS_END_TIME, PROCESS_MESSAGE_N) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)&quot;,new PreparedStatementCallback&lt;Boolean&gt;() {\n   @Override\n    public Boolean doInPreparedStatement(PreparedStatement ps)throws SQLException, DataAccessException {\n                            ps.setLong(1, jobStatusDTO.getJobId());\n                            ps.setString(2, jobStatusDTO.getFileName());\n                            ps.setString(3, jobStatusDTO.getJobStatus());\n                            ps.setLong(4, jobStatusDTO.getTotalEvents());\n                            ps.setLong(5, jobStatusDTO.getTotalSuccessEvents());\n                            ps.setLong(6, jobStatusDTO.getTotalFailedEvents());\n                            ps.setTimestamp(7, new Timestamp(jobStatusDTO.getJobStartTime().getTime()));\n                            ps.setTimestamp(8, new Timestamp(jobStatusDTO.getJobEndTime().getTime()));\n                            ps.setString(9, processErrorMessage(jobStatusDTO));\n                            return ps.execute();\n                        }\n\n                    });\n        } catch (DataAccessException e) {\n            throw new Exception(Error.ERR_080.getErrorMessage(), e.getMessage());\n        } catch (Exception e) {\n            throw new Exception(Error.ERR_081.getErrorMessage(), e.getMessage());\n        }\n        return 0;\n    }\n</code></pre>\n<hr />\n<p>I am using Spring framework for my project. When I Debug this it fails at doInpreparedStatement, as it is not getting inside of this method. I am not able to cover the PreparedStatementCallback, And due to this I am not able to achieve 100% coverage. I have written this test below, I am not sure if it is right or wrong as i am new to unit testing.</p>\n<hr />\n<p>class AccountUpdateAuditDAOImplTest {</p>\n<pre><code>@InjectMocks\nAccountUpdateAuditDAOImpl accountUpdateAuditDAOImpl;\n\n@Mock\nJdbcTemplate jdbcTemplate;\n\n@Mock\nResultSet set;\n\n@Mock\nNamedParameterJdbcTemplate namedTemplate;\n\n@SuppressWarnings(&quot;rawtypes&quot;)\n@Captor\nArgumentCaptor argCaptor;\n\n@BeforeEach\nvoid setup() throws Exception {\n    MockitoAnnotations.openMocks(this);\n}\n\n@SuppressWarnings(&quot;unchecked&quot;)\n@Test\nvoid testInsertAccountUpdateEvent() throws AccountUpdateException, Exception {\n    when(jdbcTemplate.execute(Mockito.anyString(), Mockito.any(PreparedStatementCallback.class))).thenReturn(true);\n    JobStatusDTO dTO = createMockDTO();\n    PreparedStatement ps = mock(PreparedStatement.class);\n    ps.setLong(1, dTO.getJobId());\n    List&lt;JobStatusDTO&gt;   list = new ArrayList&lt;JobStatusDTO&gt;();\n    dTO.setJobId(1);\n    list.add(dTO);\n    \n    List&lt;Map&lt;String, Object&gt;&gt; value = new ArrayList&lt;Map&lt;String, Object&gt;&gt;();\n    Map&lt;String, Object&gt; map =new HashMap&lt;String, Object&gt;();\n    map.put(&quot;Job_Id&quot;, &quot;1&quot;);\n    map.put(&quot;File_Name&quot;, &quot;RTAU_Btach&quot;);\n    map.put(&quot;Job_Status&quot;, &quot;Completed&quot;);\n    map.put(&quot;Total_Event&quot;, &quot;10&quot;);\n    map.put(&quot;Success_Event&quot;, &quot;7&quot;);\n    map.put(&quot;Failure_Event&quot;, &quot;3&quot;);\n    value.add(map);\n    \n    Mockito.when(namedTemplate.queryForList(Mockito.anyString(), Mockito.anyMap())).thenReturn(value);\n    assertDoesNotThrow(()-&gt;accountUpdateAuditDAOImpl.insertAccountUpdateEvent(dTO));\n}\n\n\nprivate JobStatusDTO createMockDTO() {\n    JobStatusDTO jobStatusDTO = new JobStatusDTO();\n    jobStatusDTO.setFileName(&quot;rtau_pulse_20220624104610853.txt&quot;);\n    jobStatusDTO.setJobStatus(&quot;PARTIALLY COMPLETED&quot;);\n    jobStatusDTO.setProcessMessage(&quot;Passed&quot;);\n    jobStatusDTO.setTotalSuccessEvents(15l);\n    return jobStatusDTO;\n}\n</code></pre>\n<p>}</p>\n"},{"tags":["java","matrix","user-input","nested-loops","space"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1663140826,"post_id":73713044,"comment_id":130166332,"body_markdown":"seeing as you only read one single char each time, how is this supposed to work?","body":"seeing as you only read one single char each time, how is this supposed to work?"},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1663140863,"post_id":73713044,"comment_id":130166347,"body_markdown":"using nextLine() instead of next will give you the entire line, but you&#39;ll need to change your logic in your loop.","body":"using nextLine() instead of next will give you the entire line, but you&#39;ll need to change your logic in your loop."},{"owner":{"account_id":26284859,"reputation":175,"user_id":19952753,"display_name":"ZedORYasuo"},"score":0,"creation_date":1663141411,"post_id":73713044,"comment_id":130166529,"body_markdown":"@Stultuske im not sure what to change in the loop. But thx.","body":"@Stultuske im not sure what to change in the loop. But thx."},{"owner":{"account_id":15856821,"reputation":2451,"user_id":11441011,"display_name":"maloomeister"},"score":0,"creation_date":1663141719,"post_id":73713044,"comment_id":130166614,"body_markdown":"So to be clear, you want to know how to fill the array when entering the data without whitespaces? What should happen if whitespaces are input anyways?","body":"So to be clear, you want to know how to fill the array when entering the data without whitespaces? What should happen if whitespaces are input anyways?"},{"owner":{"account_id":26284859,"reputation":175,"user_id":19952753,"display_name":"ZedORYasuo"},"score":0,"creation_date":1663142023,"post_id":73713044,"comment_id":130166721,"body_markdown":"@maloomeister yes! if the whitespaces are entered it should not work","body":"@maloomeister yes! if the whitespaces are entered it should not work"},{"owner":{"account_id":15856821,"reputation":2451,"user_id":11441011,"display_name":"maloomeister"},"score":0,"creation_date":1663142399,"post_id":73713044,"comment_id":130166849,"body_markdown":"I&#39;m not gonna give you a full answer, but rather a hint. Set up your `Scanner` with `useDelimiter(&quot;&quot;)`. Then `scanner.next()` will read one char at a time. Combine this with `scanner.nextLine()` to empty the newline from the scanner buffer in your outer loop. Or alternatively, read each line as a whole as a `String` and manipulate the read string as needed manually.","body":"I&#39;m not gonna give you a full answer, but rather a hint. Set up your <code>Scanner</code> with <code>useDelimiter(&quot;&quot;)</code>. Then <code>scanner.next()</code> will read one char at a time. Combine this with <code>scanner.nextLine()</code> to empty the newline from the scanner buffer in your outer loop. Or alternatively, read each line as a whole as a <code>String</code> and manipulate the read string as needed manually."}],"answers":[{"tags":[],"owner":{"account_id":11740795,"reputation":31,"user_id":8593194,"display_name":"LukasB"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1663141117,"creation_date":1663141117,"answer_id":73713162,"question_id":73713044,"body_markdown":"You could post an error, if a user enters a space and check it your Character with this static method of the Charakter Class, like:\r\n\r\n    Character.isWhitespace(characterToCheck)","title":"Using a nested for-loop &amp; asking user to enter values without spaces for a matrix","body":"<p>You could post an error, if a user enters a space and check it your Character with this static method of the Charakter Class, like:</p>\n<pre><code>Character.isWhitespace(characterToCheck)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13020607,"reputation":361,"user_id":9410164,"display_name":"ndriqa"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1663157158,"creation_date":1663141438,"answer_id":73713220,"question_id":73713044,"body_markdown":"You can let the user type spaces.\r\n\r\nWhether your code works or not, it&#39;s another topic, however, you can:\r\n\r\n- Trim spaces at the beginning and end of a string\r\n```\r\nString s = &quot; 2 3 4 &quot;;\r\nString trimmed = s.trim(); // trimmed = &quot;2 3 4&quot;\r\n```\r\n\r\n- Replace spaces with empty chars to eliminate them\r\n```\r\nString s = &quot; 2 3 4 &quot;;\r\nString replaced = s.replace(&quot; &quot;, &quot;&quot;); // replaced = &quot;234&quot;\r\n```\r\n\r\n- Split string straight into an array\r\n```\r\nString s = &quot; 2 3 4 &quot;;\r\nString[] array = s.split(&quot; &quot;, -1); // array = [2, 3, 4]\r\n```\r\n\r\nAs for why is that parameter -1? check here for more [on this page][1]\r\n\r\n  [1]: https://www.geeksforgeeks.org/split-string-java-examples/#:~:text=limit%20%3E%200%20%E2%80%93,will%20be%20discarded.","title":"Using a nested for-loop &amp; asking user to enter values without spaces for a matrix","body":"<p>You can let the user type spaces.</p>\n<p>Whether your code works or not, it's another topic, however, you can:</p>\n<ul>\n<li>Trim spaces at the beginning and end of a string</li>\n</ul>\n<pre><code>String s = &quot; 2 3 4 &quot;;\nString trimmed = s.trim(); // trimmed = &quot;2 3 4&quot;\n</code></pre>\n<ul>\n<li>Replace spaces with empty chars to eliminate them</li>\n</ul>\n<pre><code>String s = &quot; 2 3 4 &quot;;\nString replaced = s.replace(&quot; &quot;, &quot;&quot;); // replaced = &quot;234&quot;\n</code></pre>\n<ul>\n<li>Split string straight into an array</li>\n</ul>\n<pre><code>String s = &quot; 2 3 4 &quot;;\nString[] array = s.split(&quot; &quot;, -1); // array = [2, 3, 4]\n</code></pre>\n<p>As for why is that parameter -1? check here for more <a href=\"https://www.geeksforgeeks.org/split-string-java-examples/#:%7E:text=limit%20%3E%200%20%E2%80%93,will%20be%20discarded.\" rel=\"nofollow noreferrer\">on this page</a></p>\n"}],"owner":{"account_id":26284859,"reputation":175,"user_id":19952753,"display_name":"ZedORYasuo"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":79,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":2,"score":-1,"last_activity_date":1663673897,"creation_date":1663140546,"question_id":73713044,"body_markdown":"Is it possible to ask the user to enter values **WITHOUT SPACES** and then fill up the matrix character for character? I know that people have answered &quot;how to ask the user to fill up a matrix&quot; but my question is considering filling up a matrix without spaces.\r\n\r\n    char[][] rand = new char[3][3];\r\n    Scanner scanner = new Scanner(System.in);\r\n    \r\n    for (int i = 0; i &lt; 3; i++) {\r\n        for (int j = 0; j &lt; 3; j++) {\r\n            rand[i][j] = scanner.next().charAt(0);\r\n        }\r\n    }\r\n      \r\nThe problem with the code is that the user can enter with spaces\r\n\r\n    2 3 1\r\n    4 5 4\r\n\r\nI want the user to be able to enter without spaces but including enter so\r\n\r\n     231\r\n     454\r\n\r\nIf printing output should be: [[2,3,1],[4,5,4]]\r\n\r\n    ","title":"Using a nested for-loop &amp; asking user to enter values without spaces for a matrix","body":"<p>Is it possible to ask the user to enter values <strong>WITHOUT SPACES</strong> and then fill up the matrix character for character? I know that people have answered &quot;how to ask the user to fill up a matrix&quot; but my question is considering filling up a matrix without spaces.</p>\n<pre><code>char[][] rand = new char[3][3];\nScanner scanner = new Scanner(System.in);\n\nfor (int i = 0; i &lt; 3; i++) {\n    for (int j = 0; j &lt; 3; j++) {\n        rand[i][j] = scanner.next().charAt(0);\n    }\n}\n  \n</code></pre>\n<p>The problem with the code is that the user can enter with spaces</p>\n<pre><code>2 3 1\n4 5 4\n</code></pre>\n<p>I want the user to be able to enter without spaces but including enter so</p>\n<pre><code> 231\n 454\n</code></pre>\n<p>If printing output should be: [[2,3,1],[4,5,4]]</p>\n"},{"tags":["java","itext7"],"owner":{"account_id":200481,"reputation":5195,"user_id":446357,"accept_rate":64,"display_name":"MTilsted"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":128,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1663673893,"creation_date":1663673893,"question_id":73786081,"body_markdown":"How do I set an IText7 fallback font? That is: A font which is used as a fallback font in cases where the primary font don&#39;t have a specific code point.\r\n\r\nMy original code just used PdfFontFactory.createFont(...) to get a PdfFont, and then I just called setFont on the Text element where I wanted to change font. This worked as in the text was shown with the expected font, but I could not find any way to specify a fallback font.\r\n\r\nSo I changed my code, so now I start by creating a new FontProvider and then call addFont(...) with all the fonts I need, including the fallback font.\r\n\r\nAnd then I add this font provider to the document.  \r\n\r\nI then call setFontFamily on the Text objects where I want to change the font, and this works. Including fallback to the first added font, in cases where the primary font don&#39;t have the specified codepoint. \r\n\r\nBut is this the correct way to handle this issue?\r\n\r\nThis solution does have one new problem. It always embed the fonts in the pdf documents and I can&#39;t find a way to prevent this. None of the addFonts or setFontFamily methods have a flag to specify if the font should be embeded.\r\n\r\nThe FontProvider does have a method called getDefaultEmbeddingFlag() which always return true, so I tried to create a new Class which extended FontProvider and changed getDefaultEmbeddingFlag to just return false. But even when I use this class as FontProvider the font still get embeded.\r\n\r\nSo I guess my main question is: How do I enable fallback to a different font for unknown code points, while still having the ability not to embed fonts?.\r\n\r\n","title":"How do I set an IText7 fallback font?","body":"<p>How do I set an IText7 fallback font? That is: A font which is used as a fallback font in cases where the primary font don't have a specific code point.</p>\n<p>My original code just used PdfFontFactory.createFont(...) to get a PdfFont, and then I just called setFont on the Text element where I wanted to change font. This worked as in the text was shown with the expected font, but I could not find any way to specify a fallback font.</p>\n<p>So I changed my code, so now I start by creating a new FontProvider and then call addFont(...) with all the fonts I need, including the fallback font.</p>\n<p>And then I add this font provider to the document.</p>\n<p>I then call setFontFamily on the Text objects where I want to change the font, and this works. Including fallback to the first added font, in cases where the primary font don't have the specified codepoint.</p>\n<p>But is this the correct way to handle this issue?</p>\n<p>This solution does have one new problem. It always embed the fonts in the pdf documents and I can't find a way to prevent this. None of the addFonts or setFontFamily methods have a flag to specify if the font should be embeded.</p>\n<p>The FontProvider does have a method called getDefaultEmbeddingFlag() which always return true, so I tried to create a new Class which extended FontProvider and changed getDefaultEmbeddingFlag to just return false. But even when I use this class as FontProvider the font still get embeded.</p>\n<p>So I guess my main question is: How do I enable fallback to a different font for unknown code points, while still having the ability not to embed fonts?.</p>\n"},{"tags":["java","xml","layout-inflater"],"comments":[{"owner":{"account_id":14230935,"reputation":263,"user_id":10280191,"display_name":"CrimsonMike"},"score":1,"creation_date":1536058647,"post_id":52164518,"comment_id":91278789,"body_markdown":"You could give a quick overview of the purpose of each class involved (here just MainActivity). Just explain what your code does before posting the code itself. It is usually appreciated to do so because the reader will not start from scratch when reading the code, instead the reader has an idea of what you are actually trying to accomplish.","body":"You could give a quick overview of the purpose of each class involved (here just MainActivity). Just explain what your code does before posting the code itself. It is usually appreciated to do so because the reader will not start from scratch when reading the code, instead the reader has an idea of what you are actually trying to accomplish."}],"answers":[{"tags":[],"owner":{"account_id":4571218,"reputation":12646,"user_id":3710865,"accept_rate":54,"display_name":"sasikumar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1536063821,"creation_date":1536058351,"answer_id":52164617,"question_id":52164518,"body_markdown":"Make separate class for custom button  instead of mainactivity\r\n\r\n       com.example.ruben.fileapp.MainActivity.PlayButton\r\n\r\nmove your PlayButton class into other location like\r\n\r\n       com.example.ruben.fileapp.PlayButton\r\n","title":"Error inflating class android.view.InflateException, Didn&#39;t find class java.lang.ClassNotFoundException","body":"<p>Make separate class for custom button  instead of mainactivity</p>\n\n<pre><code>   com.example.ruben.fileapp.MainActivity.PlayButton\n</code></pre>\n\n<p>move your PlayButton class into other location like</p>\n\n<pre><code>   com.example.ruben.fileapp.PlayButton\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1434396,"reputation":28043,"user_id":1356107,"accept_rate":79,"display_name":"Tschallacka"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1536058707,"creation_date":1536058707,"answer_id":52164727,"question_id":52164518,"body_markdown":"You&#39;re calling MainActivity.RecordButton but the RecordButton isn&#39;t a subclass of MainActivity.\r\n\r\nYour RecordButton and PlayButton are public classes, which means they are in their own files, probaly at the same level as the MainActivity.\r\n\r\ntry\r\n\r\n    &lt;com.example.ruben.fileapp.PlayButton\r\n            android:id=&quot;@+id/play_button&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot; /&gt;","title":"Error inflating class android.view.InflateException, Didn&#39;t find class java.lang.ClassNotFoundException","body":"<p>You're calling MainActivity.RecordButton but the RecordButton isn't a subclass of MainActivity.</p>\n\n<p>Your RecordButton and PlayButton are public classes, which means they are in their own files, probaly at the same level as the MainActivity.</p>\n\n<p>try</p>\n\n<pre><code>&lt;com.example.ruben.fileapp.PlayButton\n        android:id=\"@+id/play_button\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\" /&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7397636,"reputation":2340,"user_id":5629011,"accept_rate":80,"display_name":"alizeyn"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663673839,"creation_date":1663673839,"answer_id":73786073,"question_id":52164518,"body_markdown":"Please make sure that `android.enableJetifier=true` exists in the `gradle.properties` it&#39;s not there by default anymore and you will face ambiguous exceptions when some library inside your code still uses the support libraries rather than AndroidX&#39;s. ","title":"Error inflating class android.view.InflateException, Didn&#39;t find class java.lang.ClassNotFoundException","body":"<p>Please make sure that <code>android.enableJetifier=true</code> exists in the <code>gradle.properties</code> it's not there by default anymore and you will face ambiguous exceptions when some library inside your code still uses the support libraries rather than AndroidX's.</p>\n"}],"owner":{"account_id":13146745,"reputation":520,"user_id":9496566,"display_name":"DrGregoryHouse"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1278,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1663673839,"creation_date":1536058032,"question_id":52164518,"body_markdown":"When I&#39;m trying to run the app I get the exception which is shown in the Title.\r\n\r\n\r\nThis is my xml File:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        tools:context=&quot;.MainActivity&quot;&gt;\r\n    \r\n    \r\n        &lt;LinearLayout\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;&gt;\r\n    \r\n            &lt;com.example.ruben.fileapp.MainActivity.PlayButton\r\n                android:id=&quot;@+id/play_button&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot; /&gt;\r\n    \r\n            &lt;com.example.ruben.fileapp.MainActivity.RecordButton\r\n                android:id=&quot;@+id/record_button&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot; /&gt;\r\n    \r\n        &lt;/LinearLayout&gt;\r\n    \r\n    &lt;/LinearLayout&gt;\r\n\r\nThis is my MainActivity.java:\r\n\r\n\r\n\r\n\r\n    package com.example.ruben.fileapp;\r\n    \r\n    import android.Manifest;\r\n    import android.content.Context;\r\n    import android.content.pm.PackageManager;\r\n    import android.media.MediaPlayer;\r\n    import android.media.MediaRecorder;\r\n    import android.support.annotation.NonNull;\r\n    import android.support.v4.app.ActivityCompat;\r\n    import android.support.v7.app.AppCompatActivity;\r\n    import android.os.Bundle;\r\n    import android.support.v7.widget.AppCompatButton;\r\n    import android.util.Log;\r\n    import android.view.View;\r\n    import android.view.ViewGroup;\r\n    import android.widget.Button;\r\n    import android.widget.LinearLayout;\r\n    \r\n    import java.io.IOException;\r\n    \r\n    public class MainActivity extends AppCompatActivity {\r\n    \r\n    \r\n        private static final String LOG_TAG = &quot;AudioRecordTest&quot;;\r\n        private static final int REQUEST_RECORD_AUDIO_PERMISSION = 200;\r\n        private static String mFileName = null;\r\n    \r\n        private RecordButton mRecordButton = null;\r\n        private MediaRecorder mRecorder = null;\r\n    \r\n        private PlayButton   mPlayButton = null;\r\n        private MediaPlayer mPlayer = null;\r\n    \r\n        // Requesting permission to RECORD_AUDIO\r\n        private boolean permissionToRecordAccepted = false;\r\n        private String [] permissions = {Manifest.permission.RECORD_AUDIO};\r\n    \r\n    \r\n    \r\n        //region permissionMethod\r\n        @Override\r\n        public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {\r\n            super.onRequestPermissionsResult(requestCode, permissions, grantResults);\r\n            switch (requestCode){\r\n                case REQUEST_RECORD_AUDIO_PERMISSION:\r\n                    permissionToRecordAccepted  = grantResults[0] == PackageManager.PERMISSION_GRANTED;\r\n                    break;\r\n            }\r\n\r\n        if (!permissionToRecordAccepted ) finish();\r\n\r\n    }\r\n    //endregion\r\n\r\n    private void onRecord(boolean start) {\r\n        if (start) {\r\n            startRecording();\r\n        } else {\r\n            stopRecording();\r\n        }\r\n    }\r\n\r\n    private void onPlay(boolean start) {\r\n        if (start) {\r\n            startPlaying();\r\n        } else {\r\n            stopPlaying();\r\n        }\r\n    }\r\n\r\n    private void startPlaying() {\r\n        mPlayer = new MediaPlayer();\r\n        try {\r\n            mPlayer.setDataSource(mFileName);\r\n            mPlayer.prepare();\r\n            mPlayer.start();\r\n        } catch (IOException e) {\r\n            Log.e(LOG_TAG, &quot;prepare() failed&quot;);\r\n        }\r\n    }\r\n\r\n    private void stopPlaying() {\r\n        mPlayer.release();\r\n        mPlayer = null;\r\n    }\r\n\r\n    private void startRecording() {\r\n        mRecorder = new MediaRecorder();\r\n        mRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);\r\n        mRecorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);\r\n        mRecorder.setOutputFile(mFileName);\r\n        mRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);\r\n\r\n        try {\r\n            mRecorder.prepare();\r\n        } catch (IOException e) {\r\n            Log.e(LOG_TAG, &quot;prepare() failed&quot;);\r\n        }\r\n\r\n        mRecorder.start();\r\n    }\r\n\r\n    private void stopRecording() {\r\n        mRecorder.stop();\r\n        mRecorder.release();\r\n        mRecorder = null;\r\n    }\r\n    //region RecordButton\r\n    public class RecordButton extends AppCompatButton {\r\n        boolean mStartRecording = true;\r\n\r\n        OnClickListener clicker = new OnClickListener() {\r\n            public void onClick( View v) {\r\n                onRecord(mStartRecording);\r\n                if (mStartRecording) {\r\n                    setText(&quot;Stop recording&quot;);\r\n                } else {\r\n                    setText(&quot;Start recording&quot;);\r\n                }\r\n                mStartRecording = !mStartRecording;\r\n            }\r\n        };\r\n\r\n        public RecordButton(Context ctx) {\r\n            super(ctx);\r\n            setText(&quot;Start recording&quot;);\r\n            setOnClickListener(clicker);\r\n        }\r\n    }\r\n    //endregion\r\n\r\n    //region PlayButton\r\n    public class PlayButton extends AppCompatButton {\r\n        boolean mStartPlaying = true;\r\n\r\n        OnClickListener clicker = new OnClickListener() {\r\n            public void onClick(View v) {\r\n                onPlay(mStartPlaying);\r\n                if (mStartPlaying) {\r\n                    setText(&quot;Stop playing&quot;);\r\n                } else {\r\n                    setText(&quot;Start playing&quot;);\r\n                }\r\n                mStartPlaying = !mStartPlaying;\r\n            }\r\n        };\r\n\r\n        public PlayButton(Context ctx) {\r\n            super(ctx);\r\n            setText(&quot;Start playing&quot;);\r\n            setOnClickListener(clicker);\r\n        }\r\n    }\r\n    //endregion\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n\r\n        // Record to the external cache directory for visibility\r\n        mFileName = getExternalCacheDir().getAbsolutePath();\r\n        mFileName += &quot;/audiorecordtest.3gp&quot;;\r\n\r\n        ActivityCompat.requestPermissions(this, permissions, REQUEST_RECORD_AUDIO_PERMISSION);\r\n\r\n        LinearLayout ll = new LinearLayout(this);\r\n\r\n        mRecordButton = (RecordButton) findViewById(R.id.record_button);\r\n\r\n        mPlayButton = (PlayButton) findViewById(R.id.play_button);\r\n        /*ll.addView(mRecordButton,\r\n                new LinearLayout.LayoutParams(\r\n                        ViewGroup.LayoutParams.WRAP_CONTENT,\r\n                        ViewGroup.LayoutParams.WRAP_CONTENT,\r\n                        0));*/\r\n        //mPlayButton = new PlayButton(this);\r\n\r\n        /*ll.addView(mPlayButton,\r\n                new LinearLayout.LayoutParams(\r\n                        ViewGroup.LayoutParams.WRAP_CONTENT,\r\n                        ViewGroup.LayoutParams.WRAP_CONTENT,\r\n                        0));\r\n        setContentView(ll);*/\r\n\r\n\r\n    }\r\n\r\n    @Override\r\n    public void onStop() {\r\n        super.onStop();\r\n        if (mRecorder != null) {\r\n            mRecorder.release();\r\n            mRecorder = null;\r\n        }\r\n\r\n        if (mPlayer != null) {\r\n            mPlayer.release();\r\n            mPlayer = null;\r\n        }\r\n    }\r\n\r\n\r\n}\r\n\r\n\r\nThis is my full logcat:\r\n\r\n    09-04 12:36:45.898 6198-6198/? I/art: Late-enabling -Xcheck:jni\r\n        Reinit property: dalvik.vm.checkjni= false\r\n    09-04 12:36:46.143 6198-6198/com.example.ruben.fileapp W/System: ClassLoader referenced unknown path: /data/app/com.example.ruben.fileapp-1/lib/arm64\r\n    09-04 12:36:46.156 6198-6198/com.example.ruben.fileapp I/InstantRun: starting instant run server: is main process\r\n    09-04 12:36:46.185 6198-6198/com.example.ruben.fileapp I/HwCust: Constructor found for class android.app.HwCustActivityImpl\r\n    09-04 12:36:46.210 6198-6198/com.example.ruben.fileapp I/HwCust: Constructor found for class android.app.HwCustHwWallpaperManagerImpl\r\n    09-04 12:36:46.235 6198-6198/com.example.ruben.fileapp W/art: Before Android 4.1, method android.graphics.PorterDuffColorFilter android.support.graphics.drawable.VectorDrawableCompat.updateTintFilter(android.graphics.PorterDuffColorFilter, android.content.res.ColorStateList, android.graphics.PorterDuff$Mode) would have incorrectly overridden the package-private method in android.graphics.drawable.Drawable\r\n    09-04 12:36:46.318 6198-6198/com.example.ruben.fileapp E/HW-JPEG-DEC: [HME_JPEG_DEC_Delete](3321): HME_JPEG_DEC_Delete: decoder_ctx=null\r\n    09-04 12:36:46.344 6198-6198/com.example.ruben.fileapp E/AndroidRuntime: FATAL EXCEPTION: main\r\n        Process: com.example.ruben.fileapp, PID: 6198\r\n        java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.ruben.fileapp/com.example.ruben.fileapp.MainActivity}: android.view.InflateException: Binary XML file line #14: Binary XML file line #14: Error inflating class com.example.ruben.fileapp.MainActivity.PlayButton\r\n            at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2793)\r\n            at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2864)\r\n            at android.app.ActivityThread.-wrap12(ActivityThread.java)\r\n            at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1567)\r\n            at android.os.Handler.dispatchMessage(Handler.java:105)\r\n            at android.os.Looper.loop(Looper.java:156)\r\n            at android.app.ActivityThread.main(ActivityThread.java:6523)\r\n            at java.lang.reflect.Method.invoke(Native Method)\r\n            at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:941)\r\n            at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:831)\r\n         Caused by: android.view.InflateException: Binary XML file line #14: Binary XML file line #14: Error inflating class com.example.ruben.fileapp.MainActivity.PlayButton\r\n         Caused by: android.view.InflateException: Binary XML file line #14: Error inflating class com.example.ruben.fileapp.MainActivity.PlayButton\r\n         Caused by: java.lang.ClassNotFoundException: Didn&#39;t find class &quot;com.example.ruben.fileapp.MainActivity.PlayButton&quot; on path: DexPathList[[zip file &quot;/data/app/com.example.ruben.fileapp-1/base.apk&quot;, zip file &quot;/data/app/com.example.ruben.fileapp-1/split_lib_dependencies_apk.apk&quot;, zip file &quot;/data/app/com.example.ruben.fileapp-1/split_lib_slice_0_apk.apk&quot;, zip file &quot;/data/app/com.example.ruben.fileapp-1/split_lib_slice_1_apk.apk&quot;, zip file &quot;/data/app/com.example.ruben.fileapp-1/split_lib_slice_2_apk.apk&quot;, zip file &quot;/data/app/com.example.ruben.fileapp-1/split_lib_slice_3_apk.apk&quot;, zip file &quot;/data/app/com.example.ruben.fileapp-1/split_lib_slice_4_apk.apk&quot;, zip file &quot;/data/app/com.example.ruben.fileapp-1/split_lib_slice_5_apk.apk&quot;, zip file &quot;/data/app/com.example.ruben.fileapp-1/split_lib_slice_6_apk.apk&quot;, zip file &quot;/data/app/com.example.ruben.fileapp-1/split_lib_slice_7_apk.apk&quot;, zip file &quot;/data/app/com.example.ruben.fileapp-1/split_lib_slice_8_apk.apk&quot;, zip file &quot;/data/app/com.example.ruben.fileapp-1/split_lib_slice_9_apk.apk&quot;],nativeLibraryDirectories=[/data/app/com.example.ruben.fileapp-1/lib/arm64, /system/lib64, /vendor/lib64, /system/vendor/lib64, /product/lib64]]\r\n            at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:56)\r\n            at java.lang.ClassLoader.loadClass(ClassLoader.java:380)\r\n            at java.lang.ClassLoader.loadClass(ClassLoader.java:312)\r\n            at android.view.LayoutInflater.createView(LayoutInflater.java:616)\r\n            at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:798)\r\n            at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:738)\r\n            at android.view.LayoutInflater.rInflate(LayoutInflater.java:869)\r\n            at android.view.LayoutInflater.rInflateChildren(LayoutInflater.java:832)\r\n            at android.view.LayoutInflater.rInflate(LayoutInflater.java:872)\r\n            at android.view.LayoutInflater.rInflateChildren(LayoutInflater.java:832)\r\n            at android.view.LayoutInflater.inflate(LayoutInflater.java:518)\r\n            at android.view.LayoutInflater.inflate(LayoutInflater.java:426)\r\n            at android.view.LayoutInflater.inflate(LayoutInflater.java:377)\r\n            at android.support.v7.app.AppCompatDelegateImplV9.setContentView(AppCompatDelegateImplV9.java:287)\r\n            at android.support.v7.app.AppCompatActivity.setContentView(AppCompatActivity.java:139)\r\n            at com.example.ruben.fileapp.MainActivity.onCreate(MainActivity.java:158)\r\n            at android.app.Activity.performCreate(Activity.java:6910)\r\n            at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1123)\r\n            at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2746)\r\n            at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2864)\r\n            at android.app.ActivityThread.-wrap12(ActivityThread.java)\r\n            at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1567)\r\n            at android.os.Handler.dispatchMessage(Handler.java:105)\r\n            at android.os.Looper.loop(Looper.java:156)\r\n            at android.app.ActivityThread.main(ActivityThread.java:6523)\r\n            at java.lang.reflect.Method.invoke(Native Method)\r\n            at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:941)\r\n            at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:831)\r\n    09-04 12:36:46.353 6198-6198/com.example.ruben.fileapp I/Process: Sending signal. PID: 6198 SIG: 9\r\n\r\n\r\nI would appreciate any kind of help.\r\n\r\nThank you \r\n\r\nP.S.: This is my first question posted on stackoverflow, if something is bad in the way I&#39;m asking, feel free to tell me.\r\n\r\n","title":"Error inflating class android.view.InflateException, Didn&#39;t find class java.lang.ClassNotFoundException","body":"<p>When I'm trying to run the app I get the exception which is shown in the Title.</p>\n\n<p>This is my xml File:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    tools:context=\".MainActivity\"&gt;\n\n\n    &lt;LinearLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"&gt;\n\n        &lt;com.example.ruben.fileapp.MainActivity.PlayButton\n            android:id=\"@+id/play_button\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\" /&gt;\n\n        &lt;com.example.ruben.fileapp.MainActivity.RecordButton\n            android:id=\"@+id/record_button\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\" /&gt;\n\n    &lt;/LinearLayout&gt;\n\n&lt;/LinearLayout&gt;\n</code></pre>\n\n<p>This is my MainActivity.java:</p>\n\n<pre><code>package com.example.ruben.fileapp;\n\nimport android.Manifest;\nimport android.content.Context;\nimport android.content.pm.PackageManager;\nimport android.media.MediaPlayer;\nimport android.media.MediaRecorder;\nimport android.support.annotation.NonNull;\nimport android.support.v4.app.ActivityCompat;\nimport android.support.v7.app.AppCompatActivity;\nimport android.os.Bundle;\nimport android.support.v7.widget.AppCompatButton;\nimport android.util.Log;\nimport android.view.View;\nimport android.view.ViewGroup;\nimport android.widget.Button;\nimport android.widget.LinearLayout;\n\nimport java.io.IOException;\n\npublic class MainActivity extends AppCompatActivity {\n\n\n    private static final String LOG_TAG = \"AudioRecordTest\";\n    private static final int REQUEST_RECORD_AUDIO_PERMISSION = 200;\n    private static String mFileName = null;\n\n    private RecordButton mRecordButton = null;\n    private MediaRecorder mRecorder = null;\n\n    private PlayButton   mPlayButton = null;\n    private MediaPlayer mPlayer = null;\n\n    // Requesting permission to RECORD_AUDIO\n    private boolean permissionToRecordAccepted = false;\n    private String [] permissions = {Manifest.permission.RECORD_AUDIO};\n\n\n\n    //region permissionMethod\n    @Override\n    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {\n        super.onRequestPermissionsResult(requestCode, permissions, grantResults);\n        switch (requestCode){\n            case REQUEST_RECORD_AUDIO_PERMISSION:\n                permissionToRecordAccepted  = grantResults[0] == PackageManager.PERMISSION_GRANTED;\n                break;\n        }\n\n    if (!permissionToRecordAccepted ) finish();\n\n}\n//endregion\n\nprivate void onRecord(boolean start) {\n    if (start) {\n        startRecording();\n    } else {\n        stopRecording();\n    }\n}\n\nprivate void onPlay(boolean start) {\n    if (start) {\n        startPlaying();\n    } else {\n        stopPlaying();\n    }\n}\n\nprivate void startPlaying() {\n    mPlayer = new MediaPlayer();\n    try {\n        mPlayer.setDataSource(mFileName);\n        mPlayer.prepare();\n        mPlayer.start();\n    } catch (IOException e) {\n        Log.e(LOG_TAG, \"prepare() failed\");\n    }\n}\n\nprivate void stopPlaying() {\n    mPlayer.release();\n    mPlayer = null;\n}\n\nprivate void startRecording() {\n    mRecorder = new MediaRecorder();\n    mRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);\n    mRecorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);\n    mRecorder.setOutputFile(mFileName);\n    mRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);\n\n    try {\n        mRecorder.prepare();\n    } catch (IOException e) {\n        Log.e(LOG_TAG, \"prepare() failed\");\n    }\n\n    mRecorder.start();\n}\n\nprivate void stopRecording() {\n    mRecorder.stop();\n    mRecorder.release();\n    mRecorder = null;\n}\n//region RecordButton\npublic class RecordButton extends AppCompatButton {\n    boolean mStartRecording = true;\n\n    OnClickListener clicker = new OnClickListener() {\n        public void onClick( View v) {\n            onRecord(mStartRecording);\n            if (mStartRecording) {\n                setText(\"Stop recording\");\n            } else {\n                setText(\"Start recording\");\n            }\n            mStartRecording = !mStartRecording;\n        }\n    };\n\n    public RecordButton(Context ctx) {\n        super(ctx);\n        setText(\"Start recording\");\n        setOnClickListener(clicker);\n    }\n}\n//endregion\n\n//region PlayButton\npublic class PlayButton extends AppCompatButton {\n    boolean mStartPlaying = true;\n\n    OnClickListener clicker = new OnClickListener() {\n        public void onClick(View v) {\n            onPlay(mStartPlaying);\n            if (mStartPlaying) {\n                setText(\"Stop playing\");\n            } else {\n                setText(\"Start playing\");\n            }\n            mStartPlaying = !mStartPlaying;\n        }\n    };\n\n    public PlayButton(Context ctx) {\n        super(ctx);\n        setText(\"Start playing\");\n        setOnClickListener(clicker);\n    }\n}\n//endregion\n\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n\n\n    // Record to the external cache directory for visibility\n    mFileName = getExternalCacheDir().getAbsolutePath();\n    mFileName += \"/audiorecordtest.3gp\";\n\n    ActivityCompat.requestPermissions(this, permissions, REQUEST_RECORD_AUDIO_PERMISSION);\n\n    LinearLayout ll = new LinearLayout(this);\n\n    mRecordButton = (RecordButton) findViewById(R.id.record_button);\n\n    mPlayButton = (PlayButton) findViewById(R.id.play_button);\n    /*ll.addView(mRecordButton,\n            new LinearLayout.LayoutParams(\n                    ViewGroup.LayoutParams.WRAP_CONTENT,\n                    ViewGroup.LayoutParams.WRAP_CONTENT,\n                    0));*/\n    //mPlayButton = new PlayButton(this);\n\n    /*ll.addView(mPlayButton,\n            new LinearLayout.LayoutParams(\n                    ViewGroup.LayoutParams.WRAP_CONTENT,\n                    ViewGroup.LayoutParams.WRAP_CONTENT,\n                    0));\n    setContentView(ll);*/\n\n\n}\n\n@Override\npublic void onStop() {\n    super.onStop();\n    if (mRecorder != null) {\n        mRecorder.release();\n        mRecorder = null;\n    }\n\n    if (mPlayer != null) {\n        mPlayer.release();\n        mPlayer = null;\n    }\n}\n</code></pre>\n\n<p>}</p>\n\n<p>This is my full logcat:</p>\n\n<pre><code>09-04 12:36:45.898 6198-6198/? I/art: Late-enabling -Xcheck:jni\n    Reinit property: dalvik.vm.checkjni= false\n09-04 12:36:46.143 6198-6198/com.example.ruben.fileapp W/System: ClassLoader referenced unknown path: /data/app/com.example.ruben.fileapp-1/lib/arm64\n09-04 12:36:46.156 6198-6198/com.example.ruben.fileapp I/InstantRun: starting instant run server: is main process\n09-04 12:36:46.185 6198-6198/com.example.ruben.fileapp I/HwCust: Constructor found for class android.app.HwCustActivityImpl\n09-04 12:36:46.210 6198-6198/com.example.ruben.fileapp I/HwCust: Constructor found for class android.app.HwCustHwWallpaperManagerImpl\n09-04 12:36:46.235 6198-6198/com.example.ruben.fileapp W/art: Before Android 4.1, method android.graphics.PorterDuffColorFilter android.support.graphics.drawable.VectorDrawableCompat.updateTintFilter(android.graphics.PorterDuffColorFilter, android.content.res.ColorStateList, android.graphics.PorterDuff$Mode) would have incorrectly overridden the package-private method in android.graphics.drawable.Drawable\n09-04 12:36:46.318 6198-6198/com.example.ruben.fileapp E/HW-JPEG-DEC: [HME_JPEG_DEC_Delete](3321): HME_JPEG_DEC_Delete: decoder_ctx=null\n09-04 12:36:46.344 6198-6198/com.example.ruben.fileapp E/AndroidRuntime: FATAL EXCEPTION: main\n    Process: com.example.ruben.fileapp, PID: 6198\n    java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.ruben.fileapp/com.example.ruben.fileapp.MainActivity}: android.view.InflateException: Binary XML file line #14: Binary XML file line #14: Error inflating class com.example.ruben.fileapp.MainActivity.PlayButton\n        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2793)\n        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2864)\n        at android.app.ActivityThread.-wrap12(ActivityThread.java)\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1567)\n        at android.os.Handler.dispatchMessage(Handler.java:105)\n        at android.os.Looper.loop(Looper.java:156)\n        at android.app.ActivityThread.main(ActivityThread.java:6523)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:941)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:831)\n     Caused by: android.view.InflateException: Binary XML file line #14: Binary XML file line #14: Error inflating class com.example.ruben.fileapp.MainActivity.PlayButton\n     Caused by: android.view.InflateException: Binary XML file line #14: Error inflating class com.example.ruben.fileapp.MainActivity.PlayButton\n     Caused by: java.lang.ClassNotFoundException: Didn't find class \"com.example.ruben.fileapp.MainActivity.PlayButton\" on path: DexPathList[[zip file \"/data/app/com.example.ruben.fileapp-1/base.apk\", zip file \"/data/app/com.example.ruben.fileapp-1/split_lib_dependencies_apk.apk\", zip file \"/data/app/com.example.ruben.fileapp-1/split_lib_slice_0_apk.apk\", zip file \"/data/app/com.example.ruben.fileapp-1/split_lib_slice_1_apk.apk\", zip file \"/data/app/com.example.ruben.fileapp-1/split_lib_slice_2_apk.apk\", zip file \"/data/app/com.example.ruben.fileapp-1/split_lib_slice_3_apk.apk\", zip file \"/data/app/com.example.ruben.fileapp-1/split_lib_slice_4_apk.apk\", zip file \"/data/app/com.example.ruben.fileapp-1/split_lib_slice_5_apk.apk\", zip file \"/data/app/com.example.ruben.fileapp-1/split_lib_slice_6_apk.apk\", zip file \"/data/app/com.example.ruben.fileapp-1/split_lib_slice_7_apk.apk\", zip file \"/data/app/com.example.ruben.fileapp-1/split_lib_slice_8_apk.apk\", zip file \"/data/app/com.example.ruben.fileapp-1/split_lib_slice_9_apk.apk\"],nativeLibraryDirectories=[/data/app/com.example.ruben.fileapp-1/lib/arm64, /system/lib64, /vendor/lib64, /system/vendor/lib64, /product/lib64]]\n        at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:56)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:380)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:312)\n        at android.view.LayoutInflater.createView(LayoutInflater.java:616)\n        at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:798)\n        at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:738)\n        at android.view.LayoutInflater.rInflate(LayoutInflater.java:869)\n        at android.view.LayoutInflater.rInflateChildren(LayoutInflater.java:832)\n        at android.view.LayoutInflater.rInflate(LayoutInflater.java:872)\n        at android.view.LayoutInflater.rInflateChildren(LayoutInflater.java:832)\n        at android.view.LayoutInflater.inflate(LayoutInflater.java:518)\n        at android.view.LayoutInflater.inflate(LayoutInflater.java:426)\n        at android.view.LayoutInflater.inflate(LayoutInflater.java:377)\n        at android.support.v7.app.AppCompatDelegateImplV9.setContentView(AppCompatDelegateImplV9.java:287)\n        at android.support.v7.app.AppCompatActivity.setContentView(AppCompatActivity.java:139)\n        at com.example.ruben.fileapp.MainActivity.onCreate(MainActivity.java:158)\n        at android.app.Activity.performCreate(Activity.java:6910)\n        at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1123)\n        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2746)\n        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2864)\n        at android.app.ActivityThread.-wrap12(ActivityThread.java)\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1567)\n        at android.os.Handler.dispatchMessage(Handler.java:105)\n        at android.os.Looper.loop(Looper.java:156)\n        at android.app.ActivityThread.main(ActivityThread.java:6523)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:941)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:831)\n09-04 12:36:46.353 6198-6198/com.example.ruben.fileapp I/Process: Sending signal. PID: 6198 SIG: 9\n</code></pre>\n\n<p>I would appreciate any kind of help.</p>\n\n<p>Thank you </p>\n\n<p>P.S.: This is my first question posted on stackoverflow, if something is bad in the way I'm asking, feel free to tell me.</p>\n"},{"tags":["java","hibernate","jpa"],"comments":[{"owner":{"account_id":1716961,"reputation":9711,"user_id":1573835,"accept_rate":49,"display_name":"Zaw Than oo"},"score":0,"creation_date":1389981301,"post_id":21192536,"comment_id":31910436,"body_markdown":"do you want to know parent reference entity whether delete or not?","body":"do you want to know parent reference entity whether delete or not?"}],"answers":[{"tags":[],"owner":{"account_id":3837209,"reputation":18978,"user_id":3181248,"display_name":"Justin Iurman"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1389981167,"creation_date":1389981167,"answer_id":21192591,"question_id":21192536,"body_markdown":"If by &quot;can be deleted&quot; you mean &quot;if entity exists in persistence context&quot;, you already answered your question:\r\n\r\n&gt; try to delete in transaction and then rollback\r\n\r\nIf something went wrong during transaction then rollback","title":"JPA Check if entity can be deleted","body":"<p>If by \"can be deleted\" you mean \"if entity exists in persistence context\", you already answered your question:</p>\n\n<blockquote>\n  <p>try to delete in transaction and then rollback</p>\n</blockquote>\n\n<p>If something went wrong during transaction then rollback</p>\n"},{"tags":[],"owner":{"account_id":442418,"reputation":9998,"user_id":833031,"accept_rate":100,"display_name":"Hatem Alimam"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1663673477,"creation_date":1389981455,"answer_id":21192684,"question_id":21192536,"body_markdown":"Well I use this approach...\r\n\r\n    public void doDelete() {\t\t\r\n\t\ttry {\r\n\t\t\tdeleteData();\t\t\t\r\n\t\t} catch (RuntimeException runtimeException) {\r\n\t\t\tif (getRootThrowable(runtimeException).getMessage().contains(&quot;Referential integrity constraint violation&quot;)) {\r\n\t\t\t\t//can&#39;t delete entity\r\n\t\t\t} \t\t\t\t\r\n\t\t}\r\n\t}\r\n\r\n\tpublic static Throwable getRootThrowable(Throwable t) {\r\n\t\tThrowable result = t;\r\n\r\n\t\twhile (result.getCause() != null) {\r\n\t\t\tresult = result.getCause();\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t}\r\n\r\nI&#39;m not that fan of this, but it does the job for me...","title":"JPA Check if entity can be deleted","body":"<p>Well I use this approach...</p>\n<pre><code>public void doDelete() {        \n    try {\n        deleteData();           \n    } catch (RuntimeException runtimeException) {\n        if (getRootThrowable(runtimeException).getMessage().contains(&quot;Referential integrity constraint violation&quot;)) {\n            //can't delete entity\n        }               \n    }\n}\n\npublic static Throwable getRootThrowable(Throwable t) {\n    Throwable result = t;\n\n    while (result.getCause() != null) {\n        result = result.getCause();\n    }\n\n    return result;\n}\n</code></pre>\n<p>I'm not that fan of this, but it does the job for me...</p>\n"}],"owner":{"account_id":2005107,"reputation":6449,"user_id":1795220,"accept_rate":41,"display_name":"igo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1703,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1663673477,"creation_date":1389980981,"question_id":21192536,"body_markdown":"How can I check if entity in JPA can be deleted and data integrity exception won&#39;t be thrown? Only way that came to my mind is to check all referenced entities one by one or try to delete in transaction and then rollback but is there some other simpler way?","title":"JPA Check if entity can be deleted","body":"<p>How can I check if entity in JPA can be deleted and data integrity exception won't be thrown? Only way that came to my mind is to check all referenced entities one by one or try to delete in transaction and then rollback but is there some other simpler way?</p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":1352170,"reputation":34246,"user_id":1291492,"accept_rate":100,"display_name":"ControlAltDel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663358423,"creation_date":1663358423,"answer_id":73749801,"question_id":73749733,"body_markdown":"You `break` is not in the right place. But in any case, you should keep a &quot;containsG&quot; flag and exit if the last line did not have a g\r\n\r\n    boolean containsG;\r\n    do {\r\n        containsG = false;\r\n        String userInput = scanner.nextLine();\r\n        String[] splitArray = userInput.split(&quot; &quot;);\r\n\r\n        for (int loopString = 0; loopString &lt; splitArray.length; loopString++) {\r\n            if (splitArray[loopString].contains(&quot;g&quot;)) {\r\n                System.out.println(splitArray[loopString]);\r\n                containsG = true;\r\n            }\r\n        }\r\n        \r\n    } while (containsG);","title":"how to introduce an empty line to stop a for/while loop from receiving user input","body":"<p>You <code>break</code> is not in the right place. But in any case, you should keep a &quot;containsG&quot; flag and exit if the last line did not have a g</p>\n<pre><code>boolean containsG;\ndo {\n    containsG = false;\n    String userInput = scanner.nextLine();\n    String[] splitArray = userInput.split(&quot; &quot;);\n\n    for (int loopString = 0; loopString &lt; splitArray.length; loopString++) {\n        if (splitArray[loopString].contains(&quot;g&quot;)) {\n            System.out.println(splitArray[loopString]);\n            containsG = true;\n        }\n    }\n    \n} while (containsG);\n</code></pre>\n"}],"owner":{"account_id":26201278,"reputation":21,"user_id":19881615,"display_name":"belinyom"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":62,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"answer_count":1,"score":-2,"last_activity_date":1663673222,"creation_date":1663357906,"question_id":73749733,"body_markdown":"My assignment:\r\n\r\n&gt; Write a program that reads user input **until an empty line**. For\r\n&gt; each non-empty string, the program splits the string by spaces and\r\n&gt; then prints the pieces that contain the letter g, each on a new line.\r\n&gt;\r\n&gt; Expected output:\r\n&gt; \r\n&gt; ```none\r\n&gt; java programming language\r\n&gt; programming \r\n&gt; language\r\n&gt; \r\n&gt; programming courses\r\n&gt; programming\r\n&gt; \r\n&gt; other courses\r\n&gt; ```\r\n&gt; (loop must stop from receiving user input, because the last string does not contain letter g)\r\n\r\nHere is my attempt and code:\r\n\r\n```java\r\nScanner scanner = new Scanner(System.in);\r\n\r\nwhile (true) {\r\n    String userInput = scanner.nextLine();\r\n    String[] splitArray = userInput.split(&quot; &quot;);\r\n\r\n    for (int loopString = 0; loopString &lt; splitArray.length; loopString++) {\r\n        if (splitArray[loopString].contains(&quot;g&quot;)) {\r\n            System.out.println(splitArray[loopString]);\r\n        } else if (userInput.equals(&quot;&quot;)) {\r\n            break;\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n1. I have tried to introduce an empty line within `(userInput.equals(&quot;&quot;))`, but loop continues infinitely without breaking.\r\n2. I have also tried to add `else if(!splitArray[loopString].contains(&quot;g&quot;)) {break;}`, but I couldn&#39;t find the result I am looking for.\r\n\r\n**Goal**: I want to keep writing sentences that contain the letter G and eventually want to write a sentence that hasn&#39;t got the letter G to stop the loop at that point.\r\n\r\nHow can I approach such a problem and how to solve it in a linear way?\r\n","title":"how to introduce an empty line to stop a for/while loop from receiving user input","body":"<p>My assignment:</p>\n<blockquote>\n<p>Write a program that reads user input <strong>until an empty line</strong>. For\neach non-empty string, the program splits the string by spaces and\nthen prints the pieces that contain the letter g, each on a new line.</p>\n<p>Expected output:</p>\n<pre class=\"lang-none prettyprint-override\"><code>java programming language\nprogramming \nlanguage\n\nprogramming courses\nprogramming\n\nother courses\n</code></pre>\n<p>(loop must stop from receiving user input, because the last string does not contain letter g)</p>\n</blockquote>\n<p>Here is my attempt and code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Scanner scanner = new Scanner(System.in);\n\nwhile (true) {\n    String userInput = scanner.nextLine();\n    String[] splitArray = userInput.split(&quot; &quot;);\n\n    for (int loopString = 0; loopString &lt; splitArray.length; loopString++) {\n        if (splitArray[loopString].contains(&quot;g&quot;)) {\n            System.out.println(splitArray[loopString]);\n        } else if (userInput.equals(&quot;&quot;)) {\n            break;\n        }\n    }\n}\n</code></pre>\n<ol>\n<li>I have tried to introduce an empty line within <code>(userInput.equals(&quot;&quot;))</code>, but loop continues infinitely without breaking.</li>\n<li>I have also tried to add <code>else if(!splitArray[loopString].contains(&quot;g&quot;)) {break;}</code>, but I couldn't find the result I am looking for.</li>\n</ol>\n<p><strong>Goal</strong>: I want to keep writing sentences that contain the letter G and eventually want to write a sentence that hasn't got the letter G to stop the loop at that point.</p>\n<p>How can I approach such a problem and how to solve it in a linear way?</p>\n"},{"tags":["java","jboss","wildfly","entitymanager","persistence-unit"],"comments":[{"owner":{"account_id":2386830,"reputation":7918,"user_id":2087640,"accept_rate":82,"display_name":"Gab"},"score":0,"creation_date":1663598801,"post_id":73761828,"comment_id":130271733,"body_markdown":"May I ask you why you want a dedicated connection for a GET api ?","body":"May I ask you why you want a dedicated connection for a GET api ?"},{"owner":{"account_id":19329646,"reputation":11,"user_id":14131542,"display_name":"Marcin"},"score":0,"creation_date":1663675951,"post_id":73761828,"comment_id":130291405,"body_markdown":"Yes, you may. Is there any better way to do it? Currently app using standalone.xml and persistence.xml. And that is working fine. I&#39;m calling java api endpoint using entity manager being connected as Admin user/pass but I need to create new connection using user/pass from the httpHeaders and call one sql statement to see proper results as ORACLE uses reserved word such us: &#39;user&#39;. For instance : select * from table where create_usr = user. When done &#39;Main EntityManager will use data from it to continue some process.","body":"Yes, you may. Is there any better way to do it? Currently app using standalone.xml and persistence.xml. And that is working fine. I&#39;m calling java api endpoint using entity manager being connected as Admin user/pass but I need to create new connection using user/pass from the httpHeaders and call one sql statement to see proper results as ORACLE uses reserved word such us: &#39;user&#39;. For instance : select * from table where create_usr = user. When done &#39;Main EntityManager will use data from it to continue some process."}],"answers":[{"tags":[],"owner":{"account_id":1491171,"reputation":3291,"user_id":1398228,"display_name":"ehsavoie"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663589919,"creation_date":1663589919,"answer_id":73773245,"question_id":73761828,"body_markdown":"You should define a connection pool and a datasource in the standalone.xml (cf. https://docs.wildfly.org/26.1/Admin_Guide.html#DataSource)  and then use it in your persistence.xml and inject the EntitytManager in your rest service class (cf. https://docs.wildfly.org/26.1/Developer_Guide.html#entity-manager).\r\nYou may look at this example application: https://github.com/wildfly/quickstart/tree/main/todo-backend","title":"WildFly/Jboss/persistance-unit/Entity Manager - How to create new connection every time when user calls GET API Endpoint","body":"<p>You should define a connection pool and a datasource in the standalone.xml (cf. <a href=\"https://docs.wildfly.org/26.1/Admin_Guide.html#DataSource\" rel=\"nofollow noreferrer\">https://docs.wildfly.org/26.1/Admin_Guide.html#DataSource</a>)  and then use it in your persistence.xml and inject the EntitytManager in your rest service class (cf. <a href=\"https://docs.wildfly.org/26.1/Developer_Guide.html#entity-manager\" rel=\"nofollow noreferrer\">https://docs.wildfly.org/26.1/Developer_Guide.html#entity-manager</a>).\nYou may look at this example application: <a href=\"https://github.com/wildfly/quickstart/tree/main/todo-backend\" rel=\"nofollow noreferrer\">https://github.com/wildfly/quickstart/tree/main/todo-backend</a></p>\n"}],"owner":{"account_id":19329646,"reputation":11,"user_id":14131542,"display_name":"Marcin"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":284,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1663672923,"creation_date":1663495776,"question_id":73761828,"body_markdown":"I&#39;m trying to modify existing Java app (WildFly, Jboss, oracle) which currently working fine as using persistence-unit and EntityManager connect to Oracle database(using standalone.xml and persistence.xml). However, I need to create every time new connection to database for the user which calls new GET API Endpoint using credentials from the HttpHeaders. Currently, I&#39;m creating new entitymanager object which session is commit, rollback nad close. Unfortunately time response for every call become higher and higher. There is warning about &quot;PersistenceUnitUser&quot; being already registered and memory usage constantly growing. So that is bad  solution.\r\n\r\nIs there any proper way to do it, which works witout any harms ?\r\n\r\nP.S.\r\nCurrently app using standalone.xml and persistence.xml. And that is working fine. I&#39;m calling java api endpoint using entity manager being connected as Admin user/pass  but  I need to create new connection using user/pass from the httpHeaders and call one sql statement to see proper results as ORACLE uses reserved word such us: &#39;user&#39;. For instance : select * from table where create_usr = user.  When done &#39;Main EntityManager will use data from it to continue some process.\r\n\r\n\r\n\r\nPlease see code example below :\r\n\r\n```\r\n\r\n@GET\r\n  @Path(&quot;/todo-list-enriched&quot;)\r\n  @Produces(MediaType.APPLICATION_JSON)\r\n  public Response getToDoListEnriched(@Context HttpHeaders httpHeaders, @QueryParam(&quot;skip&quot;) int elementNumber, @QueryParam(&quot;take&quot;) int pageSize, @QueryParam(&quot;orderby&quot;) String orderBy) \r\n{\r\n    String userName = httpHeaders.getHeaderString(X_USER_NAME);\r\n    String userName = httpHeaders.getHeaderString(X_PASSWORD);\r\n\r\n\r\nEntityManager entityManager = null;\r\n\r\ntry {\r\n\r\n\r\nMap&lt;String, String&gt; persistenceMap = new HashMap&lt;String, String&gt;();\r\n\r\npersistenceMap.put(&quot;hibernate.dialect&quot;,&quot;org.hibernate.dialect.Oracle8iDialect&quot;);\r\npersistenceMap.put(&quot;hibernate.connection.username&quot;, asUserName);\r\npersistenceMap.put(&quot;hibernate.connection.password&quot;, asPassword);\r\n\r\nEntityManagerFactory emf = Persistence.createEntityManagerFactory(&quot;PersistenceUnitUser&quot;, persistenceMap);\r\n\r\nentityManager = emf.createEntityManager();\r\n\r\nif (!entityManager.getTransaction().isActive()) {\r\n   entityManager.getTransaction().begin();\r\n}\r\n\r\n-- Do some works as select, update, select \r\n-- and after that \r\n\r\nif (entityManager.getTransaction().isActive()) {\r\n     entityManager.getTransaction().commit();\r\n }\r\n}\r\ncatch (Exception ex)\r\n{\r\n if (entityManager != null &amp;&amp; entityManager.getTransaction().isActive()) {\r\n  entityManager.getTransaction().rollback();\r\n }\r\n}\r\nfinally {\r\n  if (entityManager != null &amp;&amp; entityManager.isOpen()) {\r\n   entityManager.close();\r\n }\r\n}\r\n\r\n}\r\n}\r\n\r\n``\r\n\r\nBest Regards\r\nMarcin","title":"WildFly/Jboss/persistance-unit/Entity Manager - How to create new connection every time when user calls GET API Endpoint","body":"<p>I'm trying to modify existing Java app (WildFly, Jboss, oracle) which currently working fine as using persistence-unit and EntityManager connect to Oracle database(using standalone.xml and persistence.xml). However, I need to create every time new connection to database for the user which calls new GET API Endpoint using credentials from the HttpHeaders. Currently, I'm creating new entitymanager object which session is commit, rollback nad close. Unfortunately time response for every call become higher and higher. There is warning about &quot;PersistenceUnitUser&quot; being already registered and memory usage constantly growing. So that is bad  solution.</p>\n<p>Is there any proper way to do it, which works witout any harms ?</p>\n<p>P.S.\nCurrently app using standalone.xml and persistence.xml. And that is working fine. I'm calling java api endpoint using entity manager being connected as Admin user/pass  but  I need to create new connection using user/pass from the httpHeaders and call one sql statement to see proper results as ORACLE uses reserved word such us: 'user'. For instance : select * from table where create_usr = user.  When done 'Main EntityManager will use data from it to continue some process.</p>\n<p>Please see code example below :</p>\n<pre><code>\n@GET\n  @Path(&quot;/todo-list-enriched&quot;)\n  @Produces(MediaType.APPLICATION_JSON)\n  public Response getToDoListEnriched(@Context HttpHeaders httpHeaders, @QueryParam(&quot;skip&quot;) int elementNumber, @QueryParam(&quot;take&quot;) int pageSize, @QueryParam(&quot;orderby&quot;) String orderBy) \n{\n    String userName = httpHeaders.getHeaderString(X_USER_NAME);\n    String userName = httpHeaders.getHeaderString(X_PASSWORD);\n\n\nEntityManager entityManager = null;\n\ntry {\n\n\nMap&lt;String, String&gt; persistenceMap = new HashMap&lt;String, String&gt;();\n\npersistenceMap.put(&quot;hibernate.dialect&quot;,&quot;org.hibernate.dialect.Oracle8iDialect&quot;);\npersistenceMap.put(&quot;hibernate.connection.username&quot;, asUserName);\npersistenceMap.put(&quot;hibernate.connection.password&quot;, asPassword);\n\nEntityManagerFactory emf = Persistence.createEntityManagerFactory(&quot;PersistenceUnitUser&quot;, persistenceMap);\n\nentityManager = emf.createEntityManager();\n\nif (!entityManager.getTransaction().isActive()) {\n   entityManager.getTransaction().begin();\n}\n\n-- Do some works as select, update, select \n-- and after that \n\nif (entityManager.getTransaction().isActive()) {\n     entityManager.getTransaction().commit();\n }\n}\ncatch (Exception ex)\n{\n if (entityManager != null &amp;&amp; entityManager.getTransaction().isActive()) {\n  entityManager.getTransaction().rollback();\n }\n}\nfinally {\n  if (entityManager != null &amp;&amp; entityManager.isOpen()) {\n   entityManager.close();\n }\n}\n\n}\n}\n\n``\n\nBest Regards\nMarcin\n</code></pre>\n"},{"tags":["java","mouseevent"],"comments":[{"owner":{"account_id":6795544,"reputation":1900,"user_id":5231001,"accept_rate":75,"display_name":"n247s"},"score":1,"creation_date":1663673201,"post_id":73785760,"comment_id":130290379,"body_markdown":"I think it is difficult to do this natively, as a window stops receiving a &#39;heartbeat tick&#39; from most systems if it is not visible (either mininized, or hidden behind other windows) or in some cases even when not focused. So the only option I can think of is some custom event sytem who is not bound to native functionality (like querying absolute element and mouse positions) as those are likely to break when a window is minimized. What are you trying to achieve though? Maybe there is a better approuch than click-event mocking?","body":"I think it is difficult to do this natively, as a window stops receiving a &#39;heartbeat tick&#39; from most systems if it is not visible (either mininized, or hidden behind other windows) or in some cases even when not focused. So the only option I can think of is some custom event sytem who is not bound to native functionality (like querying absolute element and mouse positions) as those are likely to break when a window is minimized. What are you trying to achieve though? Maybe there is a better approuch than click-event mocking?"},{"owner":{"account_id":7939710,"reputation":712,"user_id":5994251,"accept_rate":58,"display_name":"Felix Crazzolara"},"score":0,"creation_date":1663687137,"post_id":73785760,"comment_id":130295973,"body_markdown":"@n247s Could you be more specific what you mean by &#39;custom event system&#39; please? The Java application is a client with whom I want to interact to gather data to train a machine learning model.","body":"@n247s Could you be more specific what you mean by &#39;custom event system&#39; please? The Java application is a client with whom I want to interact to gather data to train a machine learning model."},{"owner":{"account_id":6795544,"reputation":1900,"user_id":5231001,"accept_rate":75,"display_name":"n247s"},"score":0,"creation_date":1663698626,"post_id":73785760,"comment_id":130299945,"body_markdown":"So you are not programming the client? What I meant by a &#39;custom event system&#39; is a pure-java implementation (not bound to native functions). But if you have no control over the source-code of the client, than that is not an option anymore, or you have to modify/replace sourcecodes of the client.","body":"So you are not programming the client? What I meant by a &#39;custom event system&#39; is a pure-java implementation (not bound to native functions). But if you have no control over the source-code of the client, than that is not an option anymore, or you have to modify/replace sourcecodes of the client."}],"owner":{"account_id":7939710,"reputation":712,"user_id":5994251,"accept_rate":58,"display_name":"Felix Crazzolara"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1663672319,"creation_date":1663672319,"question_id":73785760,"body_markdown":"I want to generate mouse click events for a Java application. I am aware that there is `java.awt.Robot`, which would allow me to do this. However, I would like that the generated mouse events do not actually affect the &quot;cursor&quot;. That is, I would like to be able to minimize the window of the Java program and do other things with the mouse cursor, while mouse events are still generated for that program. How could I do that?\r\n\r\nEdit: Furthermore, I cannot be assumed that there is a number of buttons that I need to interact with. Rather I&#39;d like to generate mouse click events as if I had clicked at a certain position within the window.","title":"How to generate mouse events for minimized Java window?","body":"<p>I want to generate mouse click events for a Java application. I am aware that there is <code>java.awt.Robot</code>, which would allow me to do this. However, I would like that the generated mouse events do not actually affect the &quot;cursor&quot;. That is, I would like to be able to minimize the window of the Java program and do other things with the mouse cursor, while mouse events are still generated for that program. How could I do that?</p>\n<p>Edit: Furthermore, I cannot be assumed that there is a number of buttons that I need to interact with. Rather I'd like to generate mouse click events as if I had clicked at a certain position within the window.</p>\n"},{"tags":["java","spring","unit-testing","mocking","mockito"],"answers":[{"tags":[],"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1663672262,"creation_date":1663664555,"answer_id":73784130,"question_id":73784010,"body_markdown":"I think an `Answer` is what you need:\r\n```\r\nMockito.doAnswer(i -&gt; {\r\n    Set&lt;Long&gt; out = i.getArgument(2);\r\n    out.add(42L);\r\n    return out;\r\n}).when(service)).method(anyLong(), anyLong(), any());\r\n```","title":"Mockito mock method input value passed as reference with given output value","body":"<p>I think an <code>Answer</code> is what you need:</p>\n<pre><code>Mockito.doAnswer(i -&gt; {\n    Set&lt;Long&gt; out = i.getArgument(2);\n    out.add(42L);\n    return out;\n}).when(service)).method(anyLong(), anyLong(), any());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26317294,"reputation":210,"user_id":19979867,"display_name":"Leonardo Emmanuel de Azevedo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663664628,"creation_date":1663664628,"answer_id":73784149,"question_id":73784010,"body_markdown":"Has the ```Set&lt;Long&gt; out``` attribute a getter? If that&#39;s the case, you can do something like:\r\n\r\n```Java\r\nwhen(service.getOut()).thenReturn(42L);\r\n```","title":"Mockito mock method input value passed as reference with given output value","body":"<p>Has the <code>Set&lt;Long&gt; out</code> attribute a getter? If that's the case, you can do something like:</p>\n<pre><code>when(service.getOut()).thenReturn(42L);\n</code></pre>\n"}],"owner":{"account_id":1526452,"reputation":2083,"user_id":1424766,"accept_rate":63,"display_name":"G&#225;bor DANI"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1008,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":73784130,"answer_count":2,"score":3,"last_activity_date":1663672262,"creation_date":1663663988,"question_id":73784010,"body_markdown":"Given the following method:\r\n\r\n    public void method(Long a, Long b, Set&lt;Long&gt; out) {\r\n        out.add(42L);\r\n    }\r\n\r\nI would like to mock the out parameter that is modified upon running:\r\n\r\n    Set&lt;Long&gt; x = new HashSet&lt;&gt;();\r\n    x.add(1L);\r\n\r\n    Mockito.doNothing().when(service).method(anyLong(), anyLong(), any());\r\n    // How to mock the last parameter with x?\r\n\r\n**Question:**\r\n\r\nHow can achieve that upon serivce run, the `Set&lt;Long&gt; out` parameter is mocked with a predefined value?","title":"Mockito mock method input value passed as reference with given output value","body":"<p>Given the following method:</p>\n<pre><code>public void method(Long a, Long b, Set&lt;Long&gt; out) {\n    out.add(42L);\n}\n</code></pre>\n<p>I would like to mock the out parameter that is modified upon running:</p>\n<pre><code>Set&lt;Long&gt; x = new HashSet&lt;&gt;();\nx.add(1L);\n\nMockito.doNothing().when(service).method(anyLong(), anyLong(), any());\n// How to mock the last parameter with x?\n</code></pre>\n<p><strong>Question:</strong></p>\n<p>How can achieve that upon serivce run, the <code>Set&lt;Long&gt; out</code> parameter is mocked with a predefined value?</p>\n"},{"tags":["java","spring-boot","spring-security","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":9225619,"reputation":1240,"user_id":9107502,"display_name":"0x1C1B"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1663672250,"creation_date":1585395050,"answer_id":60900561,"question_id":60802853,"body_markdown":"Based on this [approach][1] I have developed a possibility which is more a dirty workaround than a solution.\r\n\r\nThe approach is to add an additional permission filter to existing predicates, for example those generated by [web support][2]. For this, the ACL tables must first be mapped as `@Immutable` JPA entities so that QueryDsl can generate the corresponding Q classes.\r\n\r\nSuch predicates to which an ACL Permission Filter should be appended are marked with the following annotation.\r\n\r\n    public Page&lt;PostDTO&gt; findAll(@QueryDslAclPermission(root = Post.class, permission = &quot;READ&quot;) Predicate predicate, Pageable pageable) {\r\n    \r\n        ...\r\n    }\r\n\r\nThis annotation holds primarily meta information about the domain type that are required for building the filter query.\r\n\r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    @Target({ElementType.PARAMETER, ElementType.TYPE})\r\n    public @interface QueryDslAclPermission {\r\n    \r\n        Class&lt;?&gt; root();\r\n    \r\n        String permission();\r\n    \r\n        String identifier() default &quot;id&quot;;\r\n    }\r\n\r\nThe actual filter query is generated and appended using the the following class and Spring&#39;s [AOP Module][3].\r\n\r\n    @Aspect\r\n    @Component\r\n    public class QueryDslAclPermissionAspect {\r\n    \r\n        private PermissionFactory permissionFactory;\r\n    \r\n        @Autowired\r\n        public QueryDslAclPermissionAspect(PermissionFactory permissionFactory) {\r\n            this.permissionFactory = permissionFactory;\r\n        }\r\n    \r\n        @Around(value = &quot;execution(* *(.., @QueryDslAclPermission (*), ..))&quot;)\r\n        public Object addPermissionFilter(ProceedingJoinPoint joinPoint) throws Throwable {\r\n    \r\n            MethodSignature signature = (MethodSignature) joinPoint.getSignature();\r\n            Method method = signature.getMethod();\r\n            Parameter[] parameters = method.getParameters();\r\n            Object[] arguments = joinPoint.getArgs();\r\n    \r\n            for(int index = 0; index &lt; parameters.length; ++index) {\r\n    \r\n                if(parameters[index].getType().equals(Predicate.class) &amp;&amp;\r\n                        parameters[index].isAnnotationPresent(QueryDslAclPermission.class)) {\r\n    \r\n                    Predicate predicate = (Predicate) arguments[index];\r\n                    QueryDslAclPermission aclPermission = parameters[index].getAnnotation(QueryDslAclPermission.class);\r\n    \r\n                    arguments[index] = addPermissionFilter(predicate, aclPermission);\r\n                }\r\n            }\r\n    \r\n            return joinPoint.proceed(arguments);\r\n        }\r\n    \r\n        private Predicate addPermissionFilter(Predicate predicate, QueryDslAclPermission aclPermission) {\r\n    \r\n            Authentication authentication = SecurityContextHolder.getContext().getAuthentication();\r\n    \r\n            if(null == authentication || !authentication.isAuthenticated()) {\r\n                throw new IllegalStateException(&quot;Permission filtering not possible for unauthenticated principal&quot;);\r\n            }\r\n    \r\n            UserDetails userDetails = (UserDetails) authentication.getPrincipal();\r\n            PrincipalSid principalSid = new PrincipalSid(userDetails.getUsername());\r\n    \r\n            NumberPath&lt;Long&gt; idPath = new PathBuilderFactory().create(aclPermission.root())\r\n                    .getNumber(aclPermission.identifier(), Long.class);\r\n    \r\n            return idPath.in(selectPermitted(aclPermission.root(), principalSid,\r\n                    permissionFactory.buildFromName(aclPermission.permission()))).and(predicate);\r\n        }\r\n    \r\n        private JPQLQuery&lt;Long&gt; selectPermitted(Class&lt;?&gt; targetType, PrincipalSid sid, Permission permission) {\r\n    \r\n            return selectAclEntry(targetType, sid, permission)\r\n                    .select(QAclEntry.aclEntry.aclObjectIdentity.objectIdIdentity);\r\n        }\r\n    \r\n        private JPQLQuery&lt;AclEntry&gt; selectAclEntry(Class&lt;?&gt; targetType, PrincipalSid sid, Permission permission) {\r\n    \r\n            return new JPAQuery&lt;AclEntry&gt;().from(QAclEntry.aclEntry)\r\n                    .where(QAclEntry.aclEntry.aclObjectIdentity.id.in(selectAclObjectIdentity(targetType)\r\n                            .select(QAclObjectIdentity.aclObjectIdentity.id))\r\n                            .and(QAclEntry.aclEntry.aclSid.id.eq(selectAclSid(sid).select(QAclSid.aclSid.id)))\r\n                            .and(QAclEntry.aclEntry.mask.eq(permission.getMask())));\r\n        }\r\n    \r\n        private JPQLQuery&lt;AclObjectIdentity&gt; selectAclObjectIdentity(Class&lt;?&gt; targetType) {\r\n    \r\n            return new JPAQuery&lt;AclObjectIdentity&gt;().from(QAclObjectIdentity.aclObjectIdentity)\r\n                    .where(QAclObjectIdentity.aclObjectIdentity.objectIdClass.id.eq(selectAclClass(targetType)\r\n                            .select(QAclClass.aclClass.id)));\r\n        }\r\n    \r\n        private JPQLQuery&lt;AclSid&gt; selectAclSid(PrincipalSid sid) {\r\n    \r\n            return new JPAQuery&lt;AclSid&gt;().from(QAclSid.aclSid)\r\n                    .where(QAclSid.aclSid.sid.eq(sid.getPrincipal()));\r\n        }\r\n    \r\n        private JPQLQuery&lt;AclClass&gt; selectAclClass(Class&lt;?&gt; targetType) {\r\n    \r\n            return new JPAQuery&lt;AclClass&gt;().from(QAclClass.aclClass)\r\n                    .where(QAclClass.aclClass.className.eq(targetType.getSimpleName()));\r\n        }\r\n    }\r\n\r\n**Edit 09/20/2022**\r\n\r\nA more generic approach based on JPA&#39;s `Specification&lt;T&gt;` and a custom repository implementation can be found in my GitHub [Gist][4]. It is decoupled from QueryDsl.\r\n\r\n\r\n  [1]: https://coderanch.com/t/628088/frameworks/Spring-Data-good-filter-database\r\n  [2]: https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#core.web.type-safe\r\n  [3]: https://docs.spring.io/spring-framework/docs/current/spring-framework-reference/core.html#aop\r\n  [4]: https://gist.github.com/0x1C1B/ad7c0fd718945d5c38a09e5398d6da19","title":"Spring QueryDsl pagination filter by ACL permissions","body":"<p>Based on this <a href=\"https://coderanch.com/t/628088/frameworks/Spring-Data-good-filter-database\" rel=\"nofollow noreferrer\">approach</a> I have developed a possibility which is more a dirty workaround than a solution.</p>\n<p>The approach is to add an additional permission filter to existing predicates, for example those generated by <a href=\"https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#core.web.type-safe\" rel=\"nofollow noreferrer\">web support</a>. For this, the ACL tables must first be mapped as <code>@Immutable</code> JPA entities so that QueryDsl can generate the corresponding Q classes.</p>\n<p>Such predicates to which an ACL Permission Filter should be appended are marked with the following annotation.</p>\n<pre><code>public Page&lt;PostDTO&gt; findAll(@QueryDslAclPermission(root = Post.class, permission = &quot;READ&quot;) Predicate predicate, Pageable pageable) {\n\n    ...\n}\n</code></pre>\n<p>This annotation holds primarily meta information about the domain type that are required for building the filter query.</p>\n<pre><code>@Retention(RetentionPolicy.RUNTIME)\n@Target({ElementType.PARAMETER, ElementType.TYPE})\npublic @interface QueryDslAclPermission {\n\n    Class&lt;?&gt; root();\n\n    String permission();\n\n    String identifier() default &quot;id&quot;;\n}\n</code></pre>\n<p>The actual filter query is generated and appended using the the following class and Spring's <a href=\"https://docs.spring.io/spring-framework/docs/current/spring-framework-reference/core.html#aop\" rel=\"nofollow noreferrer\">AOP Module</a>.</p>\n<pre><code>@Aspect\n@Component\npublic class QueryDslAclPermissionAspect {\n\n    private PermissionFactory permissionFactory;\n\n    @Autowired\n    public QueryDslAclPermissionAspect(PermissionFactory permissionFactory) {\n        this.permissionFactory = permissionFactory;\n    }\n\n    @Around(value = &quot;execution(* *(.., @QueryDslAclPermission (*), ..))&quot;)\n    public Object addPermissionFilter(ProceedingJoinPoint joinPoint) throws Throwable {\n\n        MethodSignature signature = (MethodSignature) joinPoint.getSignature();\n        Method method = signature.getMethod();\n        Parameter[] parameters = method.getParameters();\n        Object[] arguments = joinPoint.getArgs();\n\n        for(int index = 0; index &lt; parameters.length; ++index) {\n\n            if(parameters[index].getType().equals(Predicate.class) &amp;&amp;\n                    parameters[index].isAnnotationPresent(QueryDslAclPermission.class)) {\n\n                Predicate predicate = (Predicate) arguments[index];\n                QueryDslAclPermission aclPermission = parameters[index].getAnnotation(QueryDslAclPermission.class);\n\n                arguments[index] = addPermissionFilter(predicate, aclPermission);\n            }\n        }\n\n        return joinPoint.proceed(arguments);\n    }\n\n    private Predicate addPermissionFilter(Predicate predicate, QueryDslAclPermission aclPermission) {\n\n        Authentication authentication = SecurityContextHolder.getContext().getAuthentication();\n\n        if(null == authentication || !authentication.isAuthenticated()) {\n            throw new IllegalStateException(&quot;Permission filtering not possible for unauthenticated principal&quot;);\n        }\n\n        UserDetails userDetails = (UserDetails) authentication.getPrincipal();\n        PrincipalSid principalSid = new PrincipalSid(userDetails.getUsername());\n\n        NumberPath&lt;Long&gt; idPath = new PathBuilderFactory().create(aclPermission.root())\n                .getNumber(aclPermission.identifier(), Long.class);\n\n        return idPath.in(selectPermitted(aclPermission.root(), principalSid,\n                permissionFactory.buildFromName(aclPermission.permission()))).and(predicate);\n    }\n\n    private JPQLQuery&lt;Long&gt; selectPermitted(Class&lt;?&gt; targetType, PrincipalSid sid, Permission permission) {\n\n        return selectAclEntry(targetType, sid, permission)\n                .select(QAclEntry.aclEntry.aclObjectIdentity.objectIdIdentity);\n    }\n\n    private JPQLQuery&lt;AclEntry&gt; selectAclEntry(Class&lt;?&gt; targetType, PrincipalSid sid, Permission permission) {\n\n        return new JPAQuery&lt;AclEntry&gt;().from(QAclEntry.aclEntry)\n                .where(QAclEntry.aclEntry.aclObjectIdentity.id.in(selectAclObjectIdentity(targetType)\n                        .select(QAclObjectIdentity.aclObjectIdentity.id))\n                        .and(QAclEntry.aclEntry.aclSid.id.eq(selectAclSid(sid).select(QAclSid.aclSid.id)))\n                        .and(QAclEntry.aclEntry.mask.eq(permission.getMask())));\n    }\n\n    private JPQLQuery&lt;AclObjectIdentity&gt; selectAclObjectIdentity(Class&lt;?&gt; targetType) {\n\n        return new JPAQuery&lt;AclObjectIdentity&gt;().from(QAclObjectIdentity.aclObjectIdentity)\n                .where(QAclObjectIdentity.aclObjectIdentity.objectIdClass.id.eq(selectAclClass(targetType)\n                        .select(QAclClass.aclClass.id)));\n    }\n\n    private JPQLQuery&lt;AclSid&gt; selectAclSid(PrincipalSid sid) {\n\n        return new JPAQuery&lt;AclSid&gt;().from(QAclSid.aclSid)\n                .where(QAclSid.aclSid.sid.eq(sid.getPrincipal()));\n    }\n\n    private JPQLQuery&lt;AclClass&gt; selectAclClass(Class&lt;?&gt; targetType) {\n\n        return new JPAQuery&lt;AclClass&gt;().from(QAclClass.aclClass)\n                .where(QAclClass.aclClass.className.eq(targetType.getSimpleName()));\n    }\n}\n</code></pre>\n<p><strong>Edit 09/20/2022</strong></p>\n<p>A more generic approach based on JPA's <code>Specification&lt;T&gt;</code> and a custom repository implementation can be found in my GitHub <a href=\"https://gist.github.com/0x1C1B/ad7c0fd718945d5c38a09e5398d6da19\" rel=\"nofollow noreferrer\">Gist</a>. It is decoupled from QueryDsl.</p>\n"}],"owner":{"account_id":9225619,"reputation":1240,"user_id":9107502,"display_name":"0x1C1B"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1525,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1663672250,"creation_date":1584899176,"question_id":60802853,"body_markdown":"Let&#39;s assume the following Spring JPA based repository with QueryDsl support.\r\n\r\n    @Repository\r\n    public interface TeamRepository extends JpaRepository&lt;Team, Long&gt;, QuerydslPredicateExecutor&lt;Team&gt; {\r\n    \r\n    }\r\n\r\nThe application uses *Access Control Lists (ACL)* in service layer for checking permission for individual resources using `@PreAuthorize(hasPermission(#id, &#39;Team&#39;, &#39;READ&#39;)` for example.\r\n\r\nI want to allow a user to request all teams for which he has read permission. I tried to use\r\n`@PostFilter(hasPermission(filterObject, &#39;READ&#39;)`, that works pretty good as long as I use `Iterable&lt;Team&gt; findAll(Predicate predicate)`. But when I try to make use of pagination, `@PostFilter` seems to throw an exception.\r\n\r\n    java.lang.IllegalArgumentException: Filter target must be a collection, array, or stream type, but was Page 1 of 0 containing UNKNOWN instances\r\n\r\nThe official [Spring Security Reference Documentation][1] recommends to write a custom query using `@Query` which supports pagination.\r\n\r\nHow could I write such a complex query which supports **QueryDsl&#39;s Predicate**, **Pagination** and **filtering based on permissions**?\r\n\r\n**Approach 03/24/20**\r\n\r\nIn another [forum][2] I came across the following QueryDsl based approach: Instead of a native or custom query, the [ACL tables][3] are mapped as `@Immutable` JPA entities, thus generating Q classes and using them to filter for permissions manually.\r\n\r\n    @Entity\r\n    @Immutable\r\n    @Table(name = &quot;acl_object_identity&quot;)\r\n    public class AclObjectIdentity implements Serializable {\r\n    \r\n        ...\r\n    }\r\n\r\nHow could you do this using a custom repository, extending `QueryDslRepositorySupport`, so that the part of the query that checks permissions is automatically appended and hidden inside of a custom repository implementation?\r\n\r\n  [1]: https://docs.spring.io/spring-security/site/docs/current/reference/html5/#data\r\n  [2]: https://coderanch.com/t/628088/frameworks/Spring-Data-good-filter-database\r\n  [3]: https://docs.spring.io/spring-security/site/docs/5.0.x/reference/html/appendix-schema.html","title":"Spring QueryDsl pagination filter by ACL permissions","body":"<p>Let's assume the following Spring JPA based repository with QueryDsl support.</p>\n\n<pre><code>@Repository\npublic interface TeamRepository extends JpaRepository&lt;Team, Long&gt;, QuerydslPredicateExecutor&lt;Team&gt; {\n\n}\n</code></pre>\n\n<p>The application uses <em>Access Control Lists (ACL)</em> in service layer for checking permission for individual resources using <code>@PreAuthorize(hasPermission(#id, 'Team', 'READ')</code> for example.</p>\n\n<p>I want to allow a user to request all teams for which he has read permission. I tried to use\n<code>@PostFilter(hasPermission(filterObject, 'READ')</code>, that works pretty good as long as I use <code>Iterable&lt;Team&gt; findAll(Predicate predicate)</code>. But when I try to make use of pagination, <code>@PostFilter</code> seems to throw an exception.</p>\n\n<pre><code>java.lang.IllegalArgumentException: Filter target must be a collection, array, or stream type, but was Page 1 of 0 containing UNKNOWN instances\n</code></pre>\n\n<p>The official <a href=\"https://docs.spring.io/spring-security/site/docs/current/reference/html5/#data\" rel=\"nofollow noreferrer\">Spring Security Reference Documentation</a> recommends to write a custom query using <code>@Query</code> which supports pagination.</p>\n\n<p>How could I write such a complex query which supports <strong>QueryDsl's Predicate</strong>, <strong>Pagination</strong> and <strong>filtering based on permissions</strong>?</p>\n\n<p><strong>Approach 03/24/20</strong></p>\n\n<p>In another <a href=\"https://coderanch.com/t/628088/frameworks/Spring-Data-good-filter-database\" rel=\"nofollow noreferrer\">forum</a> I came across the following QueryDsl based approach: Instead of a native or custom query, the <a href=\"https://docs.spring.io/spring-security/site/docs/5.0.x/reference/html/appendix-schema.html\" rel=\"nofollow noreferrer\">ACL tables</a> are mapped as <code>@Immutable</code> JPA entities, thus generating Q classes and using them to filter for permissions manually.</p>\n\n<pre><code>@Entity\n@Immutable\n@Table(name = \"acl_object_identity\")\npublic class AclObjectIdentity implements Serializable {\n\n    ...\n}\n</code></pre>\n\n<p>How could you do this using a custom repository, extending <code>QueryDslRepositorySupport</code>, so that the part of the query that checks permissions is automatically appended and hidden inside of a custom repository implementation?</p>\n"},{"tags":["java","cassandra","datastax-java-driver"],"comments":[{"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1398765106,"post_id":23360941,"comment_id":35779973,"body_markdown":"This might be a memory allocation problem. I would expect that if the size is too small you wouldn&#39;t be able to write, rather than read.","body":"This might be a memory allocation problem. I would expect that if the size is too small you wouldn&#39;t be able to write, rather than read."},{"owner":{"account_id":2370649,"reputation":2236,"user_id":2075349,"display_name":"DmitryKanunnikoff"},"score":0,"creation_date":1398765915,"post_id":23360941,"comment_id":35780463,"body_markdown":"Try to increase this: http://pumpshooter.com/f7wyNAHE in cassandra.yaml","body":"Try to increase this: <a href=\"http://pumpshooter.com/f7wyNAHE\" rel=\"nofollow noreferrer\">pumpshooter.com/f7wyNAHE</a> in cassandra.yaml"},{"owner":{"account_id":179293,"reputation":15713,"user_id":411846,"accept_rate":80,"display_name":"centic"},"score":0,"creation_date":1398767079,"post_id":23360941,"comment_id":35781235,"body_markdown":"I tried thrift_max_message_length_in_mb, but I am using the Datastax Java Driver, which does not use thrift protocol, so it has no effect..","body":"I tried thrift_max_message_length_in_mb, but I am using the Datastax Java Driver, which does not use thrift protocol, so it has no effect.."}],"answers":[{"tags":[],"owner":{"account_id":179293,"reputation":15713,"user_id":411846,"accept_rate":80,"display_name":"centic"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1398771471,"creation_date":1398771471,"answer_id":23363615,"question_id":23360941,"body_markdown":"I found out myself which actual limit I am hitting here:\r\n\r\nFrom http://www.datastax.com/documentation/cql/3.1/cql/cql_using/use_collections_c.html:\r\n\r\n&gt; Cassandra includes collection types that provide an improved way of handling tasks, such as building multiple email address capability into tables. Observe the following limitations of collections:\r\n&gt;\r\n&gt; The maximum size of an item in a collection is 64K.\r\n\r\nThe error message is not ideal, at least it was not clear what the actual problem is to me!","title":"What is the maximum size of inserts with Cassandra DataStax","body":"<p>I found out myself which actual limit I am hitting here:</p>\n\n<p>From <a href=\"http://www.datastax.com/documentation/cql/3.1/cql/cql_using/use_collections_c.html\" rel=\"nofollow\">http://www.datastax.com/documentation/cql/3.1/cql/cql_using/use_collections_c.html</a>:</p>\n\n<blockquote>\n  <p>Cassandra includes collection types that provide an improved way of handling tasks, such as building multiple email address capability into tables. Observe the following limitations of collections:</p>\n  \n  <p>The maximum size of an item in a collection is 64K.</p>\n</blockquote>\n\n<p>The error message is not ideal, at least it was not clear what the actual problem is to me!</p>\n"}],"owner":{"account_id":179293,"reputation":15713,"user_id":411846,"accept_rate":80,"display_name":"centic"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1726,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":23363615,"answer_count":1,"score":2,"last_activity_date":1663671960,"creation_date":1398764245,"question_id":23360941,"body_markdown":"When I try to send a large Map&lt;String, String&gt; using the Java DataStax Driver, I get \r\n\r\n    Caused by: com.datastax.driver.core.exceptions.InvalidQueryException: Not enough bytes to read a map\r\n\tat com.datastax.driver.core.Responses$Error.asException(Responses.java:96)\r\n\tat com.datastax.driver.core.DefaultResultSetFuture.onSet(DefaultResultSetFuture.java:108)\r\n\tat com.datastax.driver.core.RequestHandler.setFinalResult(RequestHandler.java:228)\r\n\tat com.datastax.driver.core.RequestHandler.onSet(RequestHandler.java:354)\r\n\tat com.datastax.driver.core.Connection$Dispatcher.messageReceived(Connection.java:571)\r\n    ...\r\n\r\nI am storing a Map&lt;String,String&gt; here with one value being aprox. 100k characters. \r\n\r\nIt seems there is a limit on the size of these inserts, but I could not find out what the limit is, is it documented somewhere?\r\n\r\nIs it configurable?","title":"What is the maximum size of inserts with Cassandra DataStax","body":"<p>When I try to send a large Map using the Java DataStax Driver, I get </p>\n\n<pre><code>Caused by: com.datastax.driver.core.exceptions.InvalidQueryException: Not enough bytes to read a map\nat com.datastax.driver.core.Responses$Error.asException(Responses.java:96)\nat com.datastax.driver.core.DefaultResultSetFuture.onSet(DefaultResultSetFuture.java:108)\nat com.datastax.driver.core.RequestHandler.setFinalResult(RequestHandler.java:228)\nat com.datastax.driver.core.RequestHandler.onSet(RequestHandler.java:354)\nat com.datastax.driver.core.Connection$Dispatcher.messageReceived(Connection.java:571)\n...\n</code></pre>\n\n<p>I am storing a Map here with one value being aprox. 100k characters. </p>\n\n<p>It seems there is a limit on the size of these inserts, but I could not find out what the limit is, is it documented somewhere?</p>\n\n<p>Is it configurable?</p>\n"},{"tags":["java","postgresql","caching","redis","spring-data-jpa"],"comments":[{"owner":{"account_id":213468,"reputation":103488,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1663671944,"post_id":73783085,"comment_id":130289926,"body_markdown":"If you want to use Redis for caching, you need to have a Redis instance up-and-running, and the correct host and port configured in your Spring Boot application (Spring Boot by default assumes localhost, port 6379).","body":"If you want to use Redis for caching, you need to have a Redis instance up-and-running, and the correct host and port configured in your Spring Boot application (Spring Boot by default assumes localhost, port 6379)."},{"owner":{"account_id":26219465,"reputation":99,"user_id":19897150,"display_name":"krishna chaitanya yelleti"},"score":0,"creation_date":1663684314,"post_id":73783085,"comment_id":130294836,"body_markdown":"I got it thanks, Unable to configure the port number of Redis. I didn&#39;t install Redis locally.","body":"I got it thanks, Unable to configure the port number of Redis. I didn&#39;t install Redis locally."}],"owner":{"account_id":26219465,"reputation":99,"user_id":19897150,"display_name":"krishna chaitanya yelleti"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":966,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1663671829,"creation_date":1663659295,"question_id":73783085,"body_markdown":"I am implementing Spring Data with Redis cache, MySQL, JPA Hibernate CRUD API . Caching is not working for controllers I used and not reflecting but for GetMapping and PostMapping it&#39;s working because I am not using any cache configuration, but the other three controllers which I configured with cache, I get connection refused. I didn&#39;t install any Redis cache in local. Is it required to install Redis cache for this because I&#39;m using Redis for cache.\r\n\r\n**Controller**\r\n\r\n    package com.example.redis.springbootrediscache.controller;\r\n    \r\n    import com.example.redis.springbootrediscache.ResouceNotFoundException;\r\n    import com.example.redis.springbootrediscache.model.Employee;\r\n    import com.example.redis.springbootrediscache.repository.EmployeeRepository;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.cache.annotation.CacheEvict;\r\n    import org.springframework.cache.annotation.CachePut;\r\n    import org.springframework.cache.annotation.Cacheable;\r\n    import org.springframework.http.ResponseEntity;\r\n    import org.springframework.web.bind.annotation.*;\r\n    \r\n    import java.util.List;\r\n    \r\n    @RestController\r\n    @RequestMapping(&quot;/api&quot;)\r\n    public class EmployeeController {\r\n        @Autowired\r\n        private EmployeeRepository employeeRepository;\r\n    \r\n        @PostMapping(&quot;/employees&quot;)\r\n        public Employee addEmployee(@RequestBody Employee employee) {\r\n    \r\n            return employeeRepository.save(employee);\r\n        }\r\n    \r\n        @GetMapping(&quot;/employees&quot;)\r\n        public ResponseEntity&lt;List&lt;Employee&gt;&gt; getAllEmployees() {\r\n            return ResponseEntity.ok(employeeRepository.findAll());\r\n        }\r\n    \r\n        @GetMapping(&quot;employees/{employeeId}&quot;)\r\n        @Cacheable(value = &quot;employees&quot;,key = &quot;#employeeId&quot;)\r\n        public Employee findEmployeeById(@PathVariable(value = &quot;employeeId&quot;) Integer employeeId) {\r\n            System.out.println(&quot;Employee fetching from database:: &quot;+employeeId);\r\n            return employeeRepository.findById(employeeId).orElseThrow(\r\n                    () -&gt; new ResouceNotFoundException(&quot;Employee not found&quot; + employeeId));\r\n        }\r\n    \r\n        @PutMapping(&quot;employees/{employeeId}&quot;)\r\n        @CachePut(value = &quot;employees&quot;,key = &quot;#employeeId&quot;)\r\n        public Employee updateEmployee(@PathVariable(value = &quot;employeeId&quot;) Integer employeeId,\r\n                                                       @RequestBody Employee employeeDetails) {\r\n            Employee employee = employeeRepository.findById(employeeId)\r\n                    .orElseThrow(() -&gt; new ResouceNotFoundException(&quot;Employee not found for this id :: &quot; + employeeId));\r\n            employee.setName(employeeDetails.getName());\r\n            final Employee updatedEmployee = employeeRepository.save(employee);\r\n            return updatedEmployee;\r\n        }\r\n    \r\n        @DeleteMapping(&quot;employees/{id}&quot;)\r\n        @CacheEvict(value = &quot;employees&quot;, allEntries = true)\r\n        public void deleteEmployee(@PathVariable(value = &quot;id&quot;) Integer employeeId) {\r\n            Employee employee = employeeRepository.findById(employeeId).orElseThrow(\r\n                    () -&gt; new ResouceNotFoundException(&quot;Employee not found&quot; + employeeId));\r\n            employeeRepository.delete(employee);\r\n        }\r\n    }\r\n\r\n**Employee**\r\n\r\n    package com.example.redis.springbootrediscache.model;\r\n    \r\n    import lombok.AllArgsConstructor;\r\n    import lombok.Data;\r\n    import lombok.NoArgsConstructor;\r\n    \r\n    import javax.persistence.Entity;\r\n    import javax.persistence.GeneratedValue;\r\n    import javax.persistence.Id;\r\n    import java.io.Serializable;\r\n    \r\n    @Data\r\n    @AllArgsConstructor\r\n    @NoArgsConstructor\r\n    @Entity\r\n    public class Employee implements Serializable {\r\n    \r\n        @Id\r\n        @GeneratedValue\r\n        private int id;\r\n        private String name;\r\n    \r\n    }\r\n\r\n**SpringBootApplication**\r\n\r\n    package com.example.redis.springbootrediscache;\r\n    \r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n    import org.springframework.cache.annotation.EnableCaching;\r\n    \r\n    @SpringBootApplication\r\n    @EnableCaching\r\n    public class SpringbootRedisCacheApplication {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tSpringApplication.run(SpringbootRedisCacheApplication.class, args);\r\n    \t}\r\n    \r\n    }\r\n\r\n**application.yaml**\r\n\r\n```yaml\r\nspring:\r\n  cache:\r\n    type: redis\r\n    redis:\r\n      time-to-live: 60000\r\n      cache-null-values: true\r\n  datasource:\r\n    driver-class-name: org.postgresql.Driver\r\n    url: jdbc:postgresql://localhost:5432/TradeX\r\n    username: postgres\r\n    password: admin\r\n    hikari:\r\n      initialization-fail-timeout: 0\r\n  jpa:\r\n    database-platform: org.hibernate.dialect.PostgreSQLDialect\r\n    generate-ddl: true\r\n    show-sql: true\r\n    hibernate:\r\n      ddl-auto: create\r\n\r\n\r\nserver:\r\n  port: 8087\r\n```\r\n\r\n**pom.xml**\r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.3.1.RELEASE&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.example.redis&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;springboot-redis-cache&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;springboot-redis-cache&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;1.8&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;42.5.0&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t\t&lt;exclusions&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t&lt;/exclusions&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;io.projectreactor&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;reactor-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n","title":"java.net.ConnectException: Connection refused: no further information","body":"<p>I am implementing Spring Data with Redis cache, MySQL, JPA Hibernate CRUD API . Caching is not working for controllers I used and not reflecting but for GetMapping and PostMapping it's working because I am not using any cache configuration, but the other three controllers which I configured with cache, I get connection refused. I didn't install any Redis cache in local. Is it required to install Redis cache for this because I'm using Redis for cache.</p>\n<p><strong>Controller</strong></p>\n<pre><code>package com.example.redis.springbootrediscache.controller;\n\nimport com.example.redis.springbootrediscache.ResouceNotFoundException;\nimport com.example.redis.springbootrediscache.model.Employee;\nimport com.example.redis.springbootrediscache.repository.EmployeeRepository;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.cache.annotation.CacheEvict;\nimport org.springframework.cache.annotation.CachePut;\nimport org.springframework.cache.annotation.Cacheable;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.*;\n\nimport java.util.List;\n\n@RestController\n@RequestMapping(&quot;/api&quot;)\npublic class EmployeeController {\n    @Autowired\n    private EmployeeRepository employeeRepository;\n\n    @PostMapping(&quot;/employees&quot;)\n    public Employee addEmployee(@RequestBody Employee employee) {\n\n        return employeeRepository.save(employee);\n    }\n\n    @GetMapping(&quot;/employees&quot;)\n    public ResponseEntity&lt;List&lt;Employee&gt;&gt; getAllEmployees() {\n        return ResponseEntity.ok(employeeRepository.findAll());\n    }\n\n    @GetMapping(&quot;employees/{employeeId}&quot;)\n    @Cacheable(value = &quot;employees&quot;,key = &quot;#employeeId&quot;)\n    public Employee findEmployeeById(@PathVariable(value = &quot;employeeId&quot;) Integer employeeId) {\n        System.out.println(&quot;Employee fetching from database:: &quot;+employeeId);\n        return employeeRepository.findById(employeeId).orElseThrow(\n                () -&gt; new ResouceNotFoundException(&quot;Employee not found&quot; + employeeId));\n    }\n\n    @PutMapping(&quot;employees/{employeeId}&quot;)\n    @CachePut(value = &quot;employees&quot;,key = &quot;#employeeId&quot;)\n    public Employee updateEmployee(@PathVariable(value = &quot;employeeId&quot;) Integer employeeId,\n                                                   @RequestBody Employee employeeDetails) {\n        Employee employee = employeeRepository.findById(employeeId)\n                .orElseThrow(() -&gt; new ResouceNotFoundException(&quot;Employee not found for this id :: &quot; + employeeId));\n        employee.setName(employeeDetails.getName());\n        final Employee updatedEmployee = employeeRepository.save(employee);\n        return updatedEmployee;\n    }\n\n    @DeleteMapping(&quot;employees/{id}&quot;)\n    @CacheEvict(value = &quot;employees&quot;, allEntries = true)\n    public void deleteEmployee(@PathVariable(value = &quot;id&quot;) Integer employeeId) {\n        Employee employee = employeeRepository.findById(employeeId).orElseThrow(\n                () -&gt; new ResouceNotFoundException(&quot;Employee not found&quot; + employeeId));\n        employeeRepository.delete(employee);\n    }\n}\n</code></pre>\n<p><strong>Employee</strong></p>\n<pre><code>package com.example.redis.springbootrediscache.model;\n\nimport lombok.AllArgsConstructor;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.Id;\nimport java.io.Serializable;\n\n@Data\n@AllArgsConstructor\n@NoArgsConstructor\n@Entity\npublic class Employee implements Serializable {\n\n    @Id\n    @GeneratedValue\n    private int id;\n    private String name;\n\n}\n</code></pre>\n<p><strong>SpringBootApplication</strong></p>\n<pre><code>package com.example.redis.springbootrediscache;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.cache.annotation.EnableCaching;\n\n@SpringBootApplication\n@EnableCaching\npublic class SpringbootRedisCacheApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(SpringbootRedisCacheApplication.class, args);\n    }\n\n}\n</code></pre>\n<p><strong>application.yaml</strong></p>\n<pre class=\"lang-yaml prettyprint-override\"><code>spring:\n  cache:\n    type: redis\n    redis:\n      time-to-live: 60000\n      cache-null-values: true\n  datasource:\n    driver-class-name: org.postgresql.Driver\n    url: jdbc:postgresql://localhost:5432/TradeX\n    username: postgres\n    password: admin\n    hikari:\n      initialization-fail-timeout: 0\n  jpa:\n    database-platform: org.hibernate.dialect.PostgreSQLDialect\n    generate-ddl: true\n    show-sql: true\n    hibernate:\n      ddl-auto: create\n\n\nserver:\n  port: 8087\n</code></pre>\n<p><strong>pom.xml</strong></p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.3.1.RELEASE&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.example.redis&lt;/groupId&gt;\n    &lt;artifactId&gt;springboot-redis-cache&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;springboot-redis-cache&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n\n    &lt;properties&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n            &lt;version&gt;42.5.0&lt;/version&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;\n                    &lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.projectreactor&lt;/groupId&gt;\n            &lt;artifactId&gt;reactor-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n"},{"tags":["java","cassandra","datastax-java-driver"],"answers":[{"tags":[],"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1394536220,"creation_date":1394536220,"answer_id":22323949,"question_id":22322510,"body_markdown":"You could pass a callback to the method to take action on exception. If you need the `ResultSetFuture`, you could try something like this:\r\n\r\n\r\n    interface ResultSetFutureHandler {\r\n        void handle(ResultSetFuture rs);\r\n    }\r\n\r\n    public void catchException(ResultSetFutureHandler handler) {\r\n        ResultSetFuture resultSet = null;\r\n        try {\r\n            resultSet = getSession().executeAsync(query);\r\n            for (Row row : results.getUninterruptibly()) {\r\n                // do something\r\n            }\r\n        } catch (RuntimeException e) {\r\n            handler.handle(resultSet); // resultSet may or may not be null\r\n        }\r\n    }\r\n\r\nThen call it like this:\r\n\r\n    catchException(new ResultSetFutureHandler() {\r\n        void handle(ResultSetFuture resultSet) {\r\n            // do something with the ResultSetFuture\r\n        }\r\n    });\r\n\r\nIf you need to know what the exception was, add an exception parameter too:\r\n\r\n    interface ResultSetFutureHandler {\r\n        void handle(ResultSetFuture rs, RuntimeException e);\r\n    }\r\n","title":"Is there a good way to check whether a Datastax Session.executeAsync() has thrown an exception?","body":"<p>You could pass a callback to the method to take action on exception. If you need the <code>ResultSetFuture</code>, you could try something like this:</p>\n\n<pre><code>interface ResultSetFutureHandler {\n    void handle(ResultSetFuture rs);\n}\n\npublic void catchException(ResultSetFutureHandler handler) {\n    ResultSetFuture resultSet = null;\n    try {\n        resultSet = getSession().executeAsync(query);\n        for (Row row : results.getUninterruptibly()) {\n            // do something\n        }\n    } catch (RuntimeException e) {\n        handler.handle(resultSet); // resultSet may or may not be null\n    }\n}\n</code></pre>\n\n<p>Then call it like this:</p>\n\n<pre><code>catchException(new ResultSetFutureHandler() {\n    void handle(ResultSetFuture resultSet) {\n        // do something with the ResultSetFuture\n    }\n});\n</code></pre>\n\n<p>If you need to know what the exception was, add an exception parameter too:</p>\n\n<pre><code>interface ResultSetFutureHandler {\n    void handle(ResultSetFuture rs, RuntimeException e);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":69378,"reputation":734,"user_id":201871,"display_name":"djatnieks"},"down_vote_count":0,"up_vote_count":15,"is_accepted":true,"score":15,"last_activity_date":1395004441,"creation_date":1395004441,"answer_id":22443097,"question_id":22322510,"body_markdown":"You could try something like this since the `ResultSetFuture` implements `ListenableFuture` from the Guava library:\r\n\r\n        ResultSetFuture resultSetFuture = session.executeAsync(&quot;SELECT * FROM test.t;&quot;);\r\n        Futures.addCallback(resultSetFuture, new FutureCallback&lt;ResultSet&gt;() {\r\n            @Override\r\n            public void onSuccess(@Nullable com.datastax.driver.core.ResultSet resultSet) {\r\n                // do nothing\r\n            }\r\n\r\n            @Override\r\n            public void onFailure(Throwable throwable) {\r\n                System.out.printf(&quot;Failed with: %s\\n&quot;, throwable);\r\n            }\r\n        });\r\n\r\nThis approach will not block your application.\r\n","title":"Is there a good way to check whether a Datastax Session.executeAsync() has thrown an exception?","body":"<p>You could try something like this since the <code>ResultSetFuture</code> implements <code>ListenableFuture</code> from the Guava library:</p>\n\n<pre><code>    ResultSetFuture resultSetFuture = session.executeAsync(\"SELECT * FROM test.t;\");\n    Futures.addCallback(resultSetFuture, new FutureCallback&lt;ResultSet&gt;() {\n        @Override\n        public void onSuccess(@Nullable com.datastax.driver.core.ResultSet resultSet) {\n            // do nothing\n        }\n\n        @Override\n        public void onFailure(Throwable throwable) {\n            System.out.printf(\"Failed with: %s\\n\", throwable);\n        }\n    });\n</code></pre>\n\n<p>This approach will not block your application.</p>\n"}],"owner":{"account_id":277884,"reputation":199,"user_id":572135,"accept_rate":80,"display_name":"Phillip Atkinson"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5318,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"accepted_answer_id":22443097,"answer_count":2,"score":9,"last_activity_date":1663671810,"creation_date":1394532602,"question_id":22322510,"body_markdown":"I&#39;m trying to speed up our code by calling `session.executeAsync()` instead of `session.execute()` for DB writes.\r\n\r\nWe have use cases where the DB connection might be down, currently the previous `execute()` throws an exception when the connection is lost (no hosts reachable in the cluster). We can catch these exceptions and retry or save the data somewhere else etc...\r\n\r\nWith `executeAsync()`, it doesn&#39;t look like there&#39;s any way to fulfill this use case - the returned `ResultSetFuture` object needs to be accessed to check the result, which would defeat the purpose of using the `executeAsync()` in the first place...\r\n\r\nIs there any way to add a listener (or something similar) anywhere for the executeAsync() call that will asynchronously notify some other code that a DB write has failed?\r\n\r\nIs this pertinent?\r\nDatastax 1.0.2\r\nJava 1.7.40","title":"Is there a good way to check whether a Datastax Session.executeAsync() has thrown an exception?","body":"<p>I'm trying to speed up our code by calling <code>session.executeAsync()</code> instead of <code>session.execute()</code> for DB writes.</p>\n\n<p>We have use cases where the DB connection might be down, currently the previous <code>execute()</code> throws an exception when the connection is lost (no hosts reachable in the cluster). We can catch these exceptions and retry or save the data somewhere else etc...</p>\n\n<p>With <code>executeAsync()</code>, it doesn't look like there's any way to fulfill this use case - the returned <code>ResultSetFuture</code> object needs to be accessed to check the result, which would defeat the purpose of using the <code>executeAsync()</code> in the first place...</p>\n\n<p>Is there any way to add a listener (or something similar) anywhere for the executeAsync() call that will asynchronously notify some other code that a DB write has failed?</p>\n\n<p>Is this pertinent?\nDatastax 1.0.2\nJava 1.7.40</p>\n"},{"tags":["java","jsp","cassandra","datastax-java-driver"],"comments":[{"owner":{"account_id":2102773,"reputation":19013,"user_id":1869933,"accept_rate":88,"display_name":"Koitoer"},"score":1,"creation_date":1392696888,"post_id":21844104,"comment_id":33065534,"body_markdown":"Send resultset to jsp is a bad idea first build objects","body":"Send resultset to jsp is a bad idea first build objects"},{"owner":{"account_id":3472896,"reputation":849,"user_id":2906821,"accept_rate":42,"display_name":"Dhruv Pal"},"score":0,"creation_date":1392702938,"post_id":21844104,"comment_id":33067404,"body_markdown":"Yes create bean class and send list of that to your jsp and that can be easily iterated","body":"Yes create bean class and send list of that to your jsp and that can be easily iterated"},{"owner":{"account_id":3963035,"reputation":47,"user_id":3269708,"accept_rate":100,"display_name":"Andrei Dharma"},"score":0,"creation_date":1392709596,"post_id":21844104,"comment_id":33070328,"body_markdown":"`list` was a ResultSet. Thank you, I will try to process it in my server side. But, if I have a lot of rows, I have to iterate once in to translate it into list, and once more in the jsp for viewing purposes. Is there any better way for this? Or, is this the best that I can do?","body":"<code>list</code> was a ResultSet. Thank you, I will try to process it in my server side. But, if I have a lot of rows, I have to iterate once in to translate it into list, and once more in the jsp for viewing purposes. Is there any better way for this? Or, is this the best that I can do?"},{"owner":{"account_id":950913,"reputation":3251,"user_id":977087,"accept_rate":86,"display_name":"Crowie"},"score":0,"creation_date":1393885224,"post_id":21844104,"comment_id":33627805,"body_markdown":"What about this ? http://stackoverflow.com/a/6416800/977087","body":"What about this ? <a href=\"http://stackoverflow.com/a/6416800/977087\">stackoverflow.com/a/6416800/977087</a>"}],"owner":{"account_id":3963035,"reputation":47,"user_id":3269708,"accept_rate":100,"display_name":"Andrei Dharma"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":369,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1663671796,"creation_date":1392696214,"question_id":21844104,"body_markdown":"I&#39;m using Datastax Java Driver and JSP. \r\n\r\nIn java, I can use this code. Both ResultSet and Row are from Datastax java driver.\r\n\r\n    ResultSet results = a.selectAccumulationByDate();\r\n    for (Row row : results) {\r\n        System.out.println(row.getString(&quot;event&quot;));\r\n    }\r\n\r\nWhen I use JSP with this code\r\n\r\n    &lt;c:forEach var=&quot;apps&quot; items=&quot;${list}&quot;&gt;\r\n\r\nI get this error\r\n\r\n    javax.servlet.jsp.JspTagException: Don&#39;t know how to iterate over supplied &quot;items&quot;\r\n\r\n\r\nSo far the solution is sending them as a list. But it will take two times reading the whole list. Is there anyway I can send this ResultSet and process it in JSP? ","title":"JSP: Foreach custom object","body":"<p>I'm using Datastax Java Driver and JSP. </p>\n\n<p>In java, I can use this code. Both ResultSet and Row are from Datastax java driver.</p>\n\n<pre><code>ResultSet results = a.selectAccumulationByDate();\nfor (Row row : results) {\n    System.out.println(row.getString(\"event\"));\n}\n</code></pre>\n\n<p>When I use JSP with this code</p>\n\n<pre><code>&lt;c:forEach var=\"apps\" items=\"${list}\"&gt;\n</code></pre>\n\n<p>I get this error</p>\n\n<pre><code>javax.servlet.jsp.JspTagException: Don't know how to iterate over supplied \"items\"\n</code></pre>\n\n<p>So far the solution is sending them as a list. But it will take two times reading the whole list. Is there anyway I can send this ResultSet and process it in JSP? </p>\n"},{"tags":["java","python","methods","jython"],"comments":[{"owner":{"account_id":36154,"reputation":3986,"user_id":103003,"accept_rate":73,"display_name":"grifaton"},"score":1,"creation_date":1329844811,"post_id":9381906,"comment_id":11850972,"body_markdown":"What&#39;ve you tried?  Have you looked at this: http://www.jython.org/archive/21/docs/embedding.html ?","body":"What&#39;ve you tried?  Have you looked at this: <a href=\"http://www.jython.org/archive/21/docs/embedding.html\" rel=\"nofollow noreferrer\">jython.org/archive/21/docs/embedding.html</a> ?"}],"answers":[{"tags":[],"owner":{"account_id":370721,"reputation":157866,"user_id":942852,"accept_rate":62,"display_name":"Nitzan Tomer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1329844813,"creation_date":1329844813,"answer_id":9382054,"question_id":9381906,"body_markdown":"There isn&#39;t any way to do exactly that (that I&#39;m aware of).\r\n\r\nYou do however have a few options:\r\n\r\n\r\n1) Execute the python from within java like this:\r\n\r\n    try {\r\n    \tString line;\r\n    \tProcess p = Runtime.getRuntime().exec(&quot;cmd /c dir&quot;);\r\n    \tBufferedReader bri = new BufferedReader(new InputStreamReader(p.getInputStream()));\r\n    \tBufferedReader bre = new BufferedReader(new InputStreamReader(p.getErrorStream()));\r\n    \twhile ((line = bri.readLine()) != null) {\r\n    \t\tSystem.out.println(line);\r\n    \t}\r\n    \tbri.close();\r\n    \twhile ((line = bre.readLine()) != null) {\r\n    \t\tSystem.out.println(line);\r\n    \t}\r\n    \tbre.close();\r\n    \tp.waitFor();\r\n    \tSystem.out.println(&quot;Done.&quot;);\r\n    }\r\n    catch (Exception err) {\r\n    \terr.printStackTrace();\r\n    }\r\n\r\n2) You can maybe use [Jython][1] which is &quot;an implementation of the Python programming language written in Java&quot;, from there you might have more luck doing what you want.\r\n\r\n3) You can make the two applications communicate somehow, with a socket or shared file\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Jython","title":"How to call a python method from a java class?","body":"<p>There isn't any way to do exactly that (that I'm aware of).</p>\n\n<p>You do however have a few options:</p>\n\n<p>1) Execute the python from within java like this:</p>\n\n<pre><code>try {\n    String line;\n    Process p = Runtime.getRuntime().exec(\"cmd /c dir\");\n    BufferedReader bri = new BufferedReader(new InputStreamReader(p.getInputStream()));\n    BufferedReader bre = new BufferedReader(new InputStreamReader(p.getErrorStream()));\n    while ((line = bri.readLine()) != null) {\n        System.out.println(line);\n    }\n    bri.close();\n    while ((line = bre.readLine()) != null) {\n        System.out.println(line);\n    }\n    bre.close();\n    p.waitFor();\n    System.out.println(\"Done.\");\n}\ncatch (Exception err) {\n    err.printStackTrace();\n}\n</code></pre>\n\n<p>2) You can maybe use <a href=\"http://en.wikipedia.org/wiki/Jython\" rel=\"nofollow\">Jython</a> which is \"an implementation of the Python programming language written in Java\", from there you might have more luck doing what you want.</p>\n\n<p>3) You can make the two applications communicate somehow, with a socket or shared file</p>\n"},{"tags":[],"owner":{"account_id":552826,"reputation":93460,"user_id":916657,"accept_rate":95,"display_name":"Niklas B."},"down_vote_count":0,"up_vote_count":16,"is_accepted":true,"score":16,"last_activity_date":1329845399,"creation_date":1329844884,"answer_id":9382076,"question_id":9381906,"body_markdown":"If I read [the docs](http://www.jython.org/javadoc/org/python/util/PythonInterpreter.html) right, you can just use the [`eval`](http://www.jython.org/javadoc/org/python/util/PythonInterpreter.html#eval(org.python.core.PyObject)) function:\r\n\r\n    interpreter.execfile(&quot;/path/to/python_file.py&quot;);\r\n    PyDictionary result = interpreter.eval(&quot;myPythonClass().abc()&quot;);\r\n\r\nOr if you want to get a string:\r\n\r\n    PyObject str = interpreter.eval(&quot;repr(myPythonClass().abc())&quot;);\r\n    System.out.println(str.toString());\r\n\r\nIf you want to supply it with some input from Java variables, you can use `set` beforehand and than use that variable name within your Python code:\r\n\r\n    interpreter.set(&quot;myvariable&quot;, Integer(21));\r\n    PyObject answer = interpreter.eval(&quot;&#39;the answer is: %s&#39; % (2*myvariable)&quot;);\r\n    System.out.println(answer.toString());","title":"How to call a python method from a java class?","body":"<p>If I read <a href=\"http://www.jython.org/javadoc/org/python/util/PythonInterpreter.html\" rel=\"noreferrer\">the docs</a> right, you can just use the <a href=\"http://www.jython.org/javadoc/org/python/util/PythonInterpreter.html#eval(org.python.core.PyObject)\" rel=\"noreferrer\"><code>eval</code></a> function:</p>\n\n<pre><code>interpreter.execfile(\"/path/to/python_file.py\");\nPyDictionary result = interpreter.eval(\"myPythonClass().abc()\");\n</code></pre>\n\n<p>Or if you want to get a string:</p>\n\n<pre><code>PyObject str = interpreter.eval(\"repr(myPythonClass().abc())\");\nSystem.out.println(str.toString());\n</code></pre>\n\n<p>If you want to supply it with some input from Java variables, you can use <code>set</code> beforehand and than use that variable name within your Python code:</p>\n\n<pre><code>interpreter.set(\"myvariable\", Integer(21));\nPyObject answer = interpreter.eval(\"'the answer is: %s' % (2*myvariable)\");\nSystem.out.println(answer.toString());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3998531,"reputation":104,"user_id":4359076,"display_name":""},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1418638408,"creation_date":1418551531,"answer_id":27468237,"question_id":9381906,"body_markdown":"If we need to run a python function that has parameters, and return results, we just need to print this:\r\n\r\n    import org.python.core.PyObject;\r\n    import org.python.core.PyString;\r\n    import org.python.util.PythonInterpreter;\r\n\r\n    public class method {\r\n\r\n\tpublic static void main(String[] args) {\r\n \r\n\t    PythonInterpreter interpreter = new PythonInterpreter();\r\n\t\tinterpreter.execfile(&quot;/pathtoyourmodule/somme_x_y.py&quot;);\r\n\t\tPyObject str = interpreter.eval(&quot;repr(somme(4,5))&quot;);\r\n     \tSystem.out.println(str.toString());\r\n\r\n\t}\r\n\r\nsomme is the function in python module somme_x_y.py\r\n\r\n    def somme(x,y):\r\n       return x+y","title":"How to call a python method from a java class?","body":"<p>If we need to run a python function that has parameters, and return results, we just need to print this:</p>\n\n<pre><code>import org.python.core.PyObject;\nimport org.python.core.PyString;\nimport org.python.util.PythonInterpreter;\n\npublic class method {\n\npublic static void main(String[] args) {\n\n    PythonInterpreter interpreter = new PythonInterpreter();\n    interpreter.execfile(\"/pathtoyourmodule/somme_x_y.py\");\n    PyObject str = interpreter.eval(\"repr(somme(4,5))\");\n    System.out.println(str.toString());\n\n}\n</code></pre>\n\n<p>somme is the function in python module somme_x_y.py</p>\n\n<pre><code>def somme(x,y):\n   return x+y\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12267102,"reputation":1,"user_id":8953344,"display_name":"Aktaruzzaman Aman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1515264119,"creation_date":1515258073,"answer_id":48129681,"question_id":9381906,"body_markdown":"You can [download here](http://www.jython.org/downloads.html) Jython 2.7.0 - Standalone Jar.\r\n    \r\nThen ...\r\n\r\n 1. add this to your java path in eclipse......\r\n 2. In the Package Explorer (on the left), right click on your Java project and select Properties.\r\n 3. In the treeview on the left, select Java Build Path.\r\n 4. Select the Libraries tab.\r\n 5. Select Add External JARs...\r\n 6. Browse to your Jython installation (C:\\jython2.5.2 for me), and select jython.jar.\r\n 7. Click apply and close.\r\n     \r\nThen...\r\n\r\n    Java class (main) //use your won package name and python class dir\r\n    -----------------\r\n    package javaToPy;\r\n    import org.python.core.PyObject;\r\n    import org.python.util.PythonInterpreter;\r\n    \r\n    public class JPmain {\r\n    \t\r\n    \t@SuppressWarnings(&quot;resource&quot;)\r\n    \tpublic static void main(String[] args) {\r\n    \r\n        PythonInterpreter interpreter = new PythonInterpreter();\r\n        \r\n        //set your python program/class dir here\r\n        interpreter.execfile\r\n        (&quot;C:\\\\Users\\\\aman0\\\\Desktop\\\\ME\\\\Python\\\\venv\\\\PYsum.py&quot;);\r\n        \r\n        PyObject str1 = interpreter.eval(&quot;repr(sum(10,50))&quot;);\r\n        System.out.println(str1.toString());\r\n        \r\n        PyObject str2 = interpreter.eval(&quot;repr(multi(10,50))&quot;);\r\n        System.out.println(str2.toString());\r\n        \r\n    \r\n        interpreter.eval(&quot;repr(say())&quot;);\r\n        \r\n    \r\n        interpreter.eval(&quot;repr(saySomething(&#39;Hello brother&#39;))&quot;);\r\n    \t\r\n    }\r\n    \r\n    }\r\n    \r\n    ---------------------------\r\n    Python class\r\n    ------------\r\n    \r\n    def sum(x,y):\r\n        return x+y\r\n    \r\n    def multi(a,b):\r\n        return a*b\r\n    \r\n    def say():\r\n        print(&quot;Hello from python&quot;)\r\n    \r\n    def saySomething(word):\r\n        print(word)`enter code here`","title":"How to call a python method from a java class?","body":"<p>You can <a href=\"http://www.jython.org/downloads.html\" rel=\"nofollow noreferrer\">download here</a> Jython 2.7.0 - Standalone Jar.</p>\n\n<p>Then ...</p>\n\n<ol>\n<li>add this to your java path in eclipse......</li>\n<li>In the Package Explorer (on the left), right click on your Java project and select Properties.</li>\n<li>In the treeview on the left, select Java Build Path.</li>\n<li>Select the Libraries tab.</li>\n<li>Select Add External JARs...</li>\n<li>Browse to your Jython installation (C:\\jython2.5.2 for me), and select jython.jar.</li>\n<li>Click apply and close.</li>\n</ol>\n\n<p>Then...</p>\n\n<pre><code>Java class (main) //use your won package name and python class dir\n-----------------\npackage javaToPy;\nimport org.python.core.PyObject;\nimport org.python.util.PythonInterpreter;\n\npublic class JPmain {\n\n    @SuppressWarnings(\"resource\")\n    public static void main(String[] args) {\n\n    PythonInterpreter interpreter = new PythonInterpreter();\n\n    //set your python program/class dir here\n    interpreter.execfile\n    (\"C:\\\\Users\\\\aman0\\\\Desktop\\\\ME\\\\Python\\\\venv\\\\PYsum.py\");\n\n    PyObject str1 = interpreter.eval(\"repr(sum(10,50))\");\n    System.out.println(str1.toString());\n\n    PyObject str2 = interpreter.eval(\"repr(multi(10,50))\");\n    System.out.println(str2.toString());\n\n\n    interpreter.eval(\"repr(say())\");\n\n\n    interpreter.eval(\"repr(saySomething('Hello brother'))\");\n\n}\n\n}\n\n---------------------------\nPython class\n------------\n\ndef sum(x,y):\n    return x+y\n\ndef multi(a,b):\n    return a*b\n\ndef say():\n    print(\"Hello from python\")\n\ndef saySomething(word):\n    print(word)`enter code here`\n</code></pre>\n"}],"owner":{"account_id":204725,"reputation":239,"user_id":453113,"accept_rate":50,"display_name":"Hasti"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":16608,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":9382076,"answer_count":4,"score":10,"last_activity_date":1663671759,"creation_date":1329844247,"question_id":9381906,"body_markdown":"I am using Jython within a Java project.\r\n\r\nI have one Java class: `myJavaClass.java` and one Python class: `myPythonClass.py`    \r\n    \r\n    public class myJavaClass{\r\n        public String myMethod() {\r\n            PythonInterpreter interpreter = new PythonInterpreter();\r\n            //Code to write\r\n        }\r\n     }\r\n\r\nThe Python file is as follows:\r\n\r\n    class myPythonClass:\r\n        def abc(self):\r\n            print &quot;calling abc&quot;\r\n            tmpb = {}\r\n            tmpb = {&#39;status&#39; : &#39;SUCCESS&#39;}\r\n            return tmpb\r\n\r\nNow the problem is I want to call the `abc()` method of my Python file from the `myMethod` method of my Java file and print the result.","title":"How to call a python method from a java class?","body":"<p>I am using Jython within a Java project.</p>\n\n<p>I have one Java class: <code>myJavaClass.java</code> and one Python class: <code>myPythonClass.py</code>    </p>\n\n<pre><code>public class myJavaClass{\n    public String myMethod() {\n        PythonInterpreter interpreter = new PythonInterpreter();\n        //Code to write\n    }\n }\n</code></pre>\n\n<p>The Python file is as follows:</p>\n\n<pre><code>class myPythonClass:\n    def abc(self):\n        print \"calling abc\"\n        tmpb = {}\n        tmpb = {'status' : 'SUCCESS'}\n        return tmpb\n</code></pre>\n\n<p>Now the problem is I want to call the <code>abc()</code> method of my Python file from the <code>myMethod</code> method of my Java file and print the result.</p>\n"},{"tags":["java","spring","debugging"],"comments":[{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1663670175,"post_id":73785300,"comment_id":130289363,"body_markdown":"Please post the complete stack trace *as text* into your question - and then ideally work on reproducing this in a minimal project.","body":"Please post the complete stack trace <i>as text</i> into your question - and then ideally work on reproducing this in a minimal project."},{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":0,"creation_date":1663672253,"post_id":73785300,"comment_id":130290018,"body_markdown":"I see the mention of Linux, and a path `&quot;/Users/...&quot;`. As paths are case sensitive, it just might be a true error and it should be `/users/...`.","body":"I see the mention of Linux, and a path <code>&quot;&#47;Users&#47;...&quot;</code>. As paths are case sensitive, it just might be a true error and it should be <code>&#47;users&#47;...</code>."}],"answers":[{"tags":[],"owner":{"account_id":26389573,"reputation":1,"user_id":20041617,"display_name":"Monil Doshi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663670540,"creation_date":1663670540,"answer_id":73785403,"question_id":73785300,"body_markdown":"there maybe 2 diffrent posssblity \r\n1.there should be run time error\r\n2.your file name has mis matched javac **MyFirstJavaProgram. java**&#39; \r\nor can you just share image of your code\r\n","title":"When i try to debug my project it throws no such file error","body":"<p>there maybe 2 diffrent posssblity\n1.there should be run time error\n2.your file name has mis matched javac <strong>MyFirstJavaProgram. java</strong>'\nor can you just share image of your code</p>\n"}],"owner":{"account_id":26357747,"reputation":23,"user_id":20027133,"display_name":"Similization"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":96,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1663671752,"creation_date":1663670013,"question_id":73785300,"body_markdown":"So the problem is that my [project][1] do not debug correctly, it is pretty big so i can not figure out when it started throw this error:\r\n\r\n [error image][2]\r\n\r\n`java.nio.file.NoSuchFileException: /Users/similization/Library/Java/JavaVirtualMachines/openjdk-18.0.1.1/Contents/Home/conf/jndi.properties`\r\n\r\n**P.S.** I tried to use another versions of tomcat and tried to reinstall everything, but nothing changed and also none of my JVM version have such file (`jndi.properties`). When i just run my project - everything works fine but i&#39;d like to have debug ability. After i stopped debugging my project i got this message from IntelliJ Idea:\r\n\r\n    Application Server was not connected before run configuration stop, reason: \r\n    javax.management.InstanceNotFoundException: Catalina:type=Server\r\n\r\n**UPDATE 1**\r\n\r\nHere is a full \r\n[stack trace][3]\r\n\r\n    &quot;java.base/sun.nio.fs.UnixException.translateToIOException(UnixException.java:92)&quot;\r\n    &quot;java.base/sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:106)&quot;\r\n    &quot;java.base/sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:111)&quot;\r\n    &quot;java.base/sun.nio.fs.UnixFileSystemProvider.newByteChannel(UnixFileSystemProvider.java:218)&quot;\r\n    &quot;java.base/java.nio.file.Files.newByteChannel(Files.java:380)&quot;\r\n    &quot;java.base/java.nio.file.Files.newByteChannel(Files.java:432)&quot;\r\n    &quot;java.base/java.nio.file.spi.FileSystemProvider.newInputStream(FileSystemProvider.java:422)&quot;\r\n    &quot;java.base/java.nio.file.Files.newInputStream(Files.java:160)&quot;\r\n    &quot;java.naming/com.sun.naming.internal.VersionHelper.lambda$getJavaHomeConfStream$4(VersionHelper.java:228)&quot;\r\n    &quot;java.base/java.security.AccessController.doPrivileged(AccessController.java:318)&quot; &quot;java.naming/com.sun.naming.internal.VersionHelper.getJavaHomeConfStream(VersionHelper.java:233)&quot;\r\n    &quot;java.naming/com.sun.naming.internal.ResourceManager.getApplicationResources(ResourceManager.java:530)&quot;\r\n    &quot;java.naming/com.sun.naming.internal.ResourceManager.getInitialEnvironment(ResourceManager.java:188)&quot;\r\n    &quot;java.naming/javax.naming.InitialContext.init(InitialContext.java:232)&quot;\r\n    &quot;java.naming/javax.naming.InitialContext.&lt;init&gt;(InitialContext.java:184)&quot;\r\n    &quot;org.apache.catalina.mbeans.GlobalResourcesLifecycleListener.createMBeans(GlobalResourcesLifecycleListener.java:99)&quot;\r\n    &quot;org.apache.catalina.mbeans.GlobalResourcesLifecycleListener.lifecycleEvent(GlobalResourcesLifecycleListener.java:82)&quot;\r\n    &quot;org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:123)&quot;\r\n    &quot;org.apache.catalina.util.LifecycleBase.setStateInternal(LifecycleBase.java:423)&quot;\r\n    &quot;org.apache.catalina.util.LifecycleBase.setState(LifecycleBase.java:366)&quot;\r\n    &quot;org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:923)&quot;\r\n    &quot;org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)&quot;\r\n    &quot;org.apache.catalina.startup.Catalina.start(Catalina.java:772)&quot;\r\n    &quot;java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)&quot;\r\n    &quot;java.base/java.lang.reflect.Method.invoke(Method.java:577)&quot;\r\n    &quot;org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:345)&quot;\r\n    &quot;org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:476)&quot;\r\n\r\n\r\n  [1]: https://github.com/Similization/simple_dictionari_api_for_gallows_game_project.git\r\n  [2]: https://i.stack.imgur.com/mntBE.jpg\r\n  [3]: https://i.stack.imgur.com/SzQ8q.jpg","title":"When i try to debug my project it throws no such file error","body":"<p>So the problem is that my <a href=\"https://github.com/Similization/simple_dictionari_api_for_gallows_game_project.git\" rel=\"nofollow noreferrer\">project</a> do not debug correctly, it is pretty big so i can not figure out when it started throw this error:</p>\n<p><a href=\"https://i.stack.imgur.com/mntBE.jpg\" rel=\"nofollow noreferrer\">error image</a></p>\n<p><code>java.nio.file.NoSuchFileException: /Users/similization/Library/Java/JavaVirtualMachines/openjdk-18.0.1.1/Contents/Home/conf/jndi.properties</code></p>\n<p><strong>P.S.</strong> I tried to use another versions of tomcat and tried to reinstall everything, but nothing changed and also none of my JVM version have such file (<code>jndi.properties</code>). When i just run my project - everything works fine but i'd like to have debug ability. After i stopped debugging my project i got this message from IntelliJ Idea:</p>\n<pre><code>Application Server was not connected before run configuration stop, reason: \njavax.management.InstanceNotFoundException: Catalina:type=Server\n</code></pre>\n<p><strong>UPDATE 1</strong></p>\n<p>Here is a full\n<a href=\"https://i.stack.imgur.com/SzQ8q.jpg\" rel=\"nofollow noreferrer\">stack trace</a></p>\n<pre><code>&quot;java.base/sun.nio.fs.UnixException.translateToIOException(UnixException.java:92)&quot;\n&quot;java.base/sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:106)&quot;\n&quot;java.base/sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:111)&quot;\n&quot;java.base/sun.nio.fs.UnixFileSystemProvider.newByteChannel(UnixFileSystemProvider.java:218)&quot;\n&quot;java.base/java.nio.file.Files.newByteChannel(Files.java:380)&quot;\n&quot;java.base/java.nio.file.Files.newByteChannel(Files.java:432)&quot;\n&quot;java.base/java.nio.file.spi.FileSystemProvider.newInputStream(FileSystemProvider.java:422)&quot;\n&quot;java.base/java.nio.file.Files.newInputStream(Files.java:160)&quot;\n&quot;java.naming/com.sun.naming.internal.VersionHelper.lambda$getJavaHomeConfStream$4(VersionHelper.java:228)&quot;\n&quot;java.base/java.security.AccessController.doPrivileged(AccessController.java:318)&quot; &quot;java.naming/com.sun.naming.internal.VersionHelper.getJavaHomeConfStream(VersionHelper.java:233)&quot;\n&quot;java.naming/com.sun.naming.internal.ResourceManager.getApplicationResources(ResourceManager.java:530)&quot;\n&quot;java.naming/com.sun.naming.internal.ResourceManager.getInitialEnvironment(ResourceManager.java:188)&quot;\n&quot;java.naming/javax.naming.InitialContext.init(InitialContext.java:232)&quot;\n&quot;java.naming/javax.naming.InitialContext.&lt;init&gt;(InitialContext.java:184)&quot;\n&quot;org.apache.catalina.mbeans.GlobalResourcesLifecycleListener.createMBeans(GlobalResourcesLifecycleListener.java:99)&quot;\n&quot;org.apache.catalina.mbeans.GlobalResourcesLifecycleListener.lifecycleEvent(GlobalResourcesLifecycleListener.java:82)&quot;\n&quot;org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:123)&quot;\n&quot;org.apache.catalina.util.LifecycleBase.setStateInternal(LifecycleBase.java:423)&quot;\n&quot;org.apache.catalina.util.LifecycleBase.setState(LifecycleBase.java:366)&quot;\n&quot;org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:923)&quot;\n&quot;org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)&quot;\n&quot;org.apache.catalina.startup.Catalina.start(Catalina.java:772)&quot;\n&quot;java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)&quot;\n&quot;java.base/java.lang.reflect.Method.invoke(Method.java:577)&quot;\n&quot;org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:345)&quot;\n&quot;org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:476)&quot;\n</code></pre>\n"},{"tags":["java","hash","cryptography"],"comments":[{"owner":{"account_id":4230755,"reputation":7764,"user_id":3536342,"display_name":"DavidPostill"},"score":0,"creation_date":1406453916,"post_id":24979557,"comment_id":38832046,"body_markdown":"possible duplicate of [How can I list the available Cipher algorithms?](http://stackoverflow.com/questions/9333504/how-can-i-list-the-available-cipher-algorithms)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/9333504/how-can-i-list-the-available-cipher-algorithms\">How can I list the available Cipher algorithms?</a>"},{"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"score":0,"creation_date":1406478841,"post_id":24979557,"comment_id":38838264,"body_markdown":"@DavidPostill Don&#39;t agree about the dupe, those kind of dupes won&#39;t show up in search results. We *could* create a generic Q/A for any kind of `Service` in the JDK, but without it, asking for each and every type of algorithm should be OK.","body":"@DavidPostill Don&#39;t agree about the dupe, those kind of dupes won&#39;t show up in search results. We <i>could</i> create a generic Q/A for any kind of <code>Service</code> in the JDK, but without it, asking for each and every type of algorithm should be OK."},{"owner":{"account_id":4230755,"reputation":7764,"user_id":3536342,"display_name":"DavidPostill"},"score":0,"creation_date":1406479747,"post_id":24979557,"comment_id":38838547,"body_markdown":"@owlstead I knew about the other answer as I used some code from it in something I was playing around with some time ago. So I could search for &quot;Cipher&quot; to find it.","body":"@owlstead I knew about the other answer as I used some code from it in something I was playing around with some time ago. So I could search for &quot;Cipher&quot; to find it."},{"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"score":1,"creation_date":1406480755,"post_id":24979557,"comment_id":38838900,"body_markdown":"@DavidPostill Well, that&#39;s great, but would you assume that everybody else would be able to do the same thing? I&#39;m looking for `SecureRandom` implementation, let&#39;s replace it with `Cipher` so we can find a solution? Not everybody will think of that solution. And why not replace it with `Signature`, or `Mac`?","body":"@DavidPostill Well, that&#39;s great, but would you assume that everybody else would be able to do the same thing? I&#39;m looking for <code>SecureRandom</code> implementation, let&#39;s replace it with <code>Cipher</code> so we can find a solution? Not everybody will think of that solution. And why not replace it with <code>Signature</code>, or <code>Mac</code>?"},{"owner":{"account_id":4230755,"reputation":7764,"user_id":3536342,"display_name":"DavidPostill"},"score":0,"creation_date":1406481250,"post_id":24979557,"comment_id":38839053,"body_markdown":"@owlstead No I would not make that assumption. That&#39;s exactly why I flagged as a possible duplicate ... it enables someone to at least find the other answer ... do you have a better suggestion as to how  I should handle a similar situation next time if flagging as duplicate is not appropriate?","body":"@owlstead No I would not make that assumption. That&#39;s exactly why I flagged as a possible duplicate ... it enables someone to at least find the other answer ... do you have a better suggestion as to how  I should handle a similar situation next time if flagging as duplicate is not appropriate?"}],"answers":[{"tags":[],"owner":{"account_id":277416,"reputation":681848,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1406453226,"creation_date":1406453226,"answer_id":24979634,"question_id":24979557,"body_markdown":"The documentation says: \r\n\r\n&gt; These algorithms are described in the MessageDigest section of the Java Cryptography Architecture Standard Algorithm Name Documentation\r\n\r\nThe [linked document][1] contains the following line, right after the table of contents:\r\n\r\n&gt; Note: The Oracle Providers Documentation contains specific provider and algorithm information.\r\n\r\nAnd the [linked document][2] contains the complete list of MessageDigest algorithms provided by each provider.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/technotes/guides/security/StandardNames.html\r\n  [2]: http://docs.oracle.com/javase/8/docs/technotes/guides/security/SunProviders.html","title":"Complete list of MessageDigest available in the JDK","body":"<p>The documentation says: </p>\n\n<blockquote>\n  <p>These algorithms are described in the MessageDigest section of the Java Cryptography Architecture Standard Algorithm Name Documentation</p>\n</blockquote>\n\n<p>The <a href=\"http://docs.oracle.com/javase/8/docs/technotes/guides/security/StandardNames.html\" rel=\"nofollow\">linked document</a> contains the following line, right after the table of contents:</p>\n\n<blockquote>\n  <p>Note: The Oracle Providers Documentation contains specific provider and algorithm information.</p>\n</blockquote>\n\n<p>And the <a href=\"http://docs.oracle.com/javase/8/docs/technotes/guides/security/SunProviders.html\" rel=\"nofollow\">linked document</a> contains the complete list of MessageDigest algorithms provided by each provider.</p>\n"},{"tags":[],"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"down_vote_count":0,"up_vote_count":37,"is_accepted":true,"score":37,"last_activity_date":1406485762,"creation_date":1406478615,"answer_id":24983009,"question_id":24979557,"body_markdown":"In addition to JB&#39;s answer, I would like to propose a solution that queries the runtime for available algorithms. This method is of course easily converted to one for `Cipher`, `SecureRandom`, `Mac`, `KeyAgreement`, `KeyFactory` or any other *type* of algorithm.\r\n\r\nProgram\r\n---\r\n\r\n    import java.security.MessageDigest;\r\n    import java.security.Provider;\r\n    import java.security.Provider.Service;\r\n    import java.security.Security;\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    import java.util.Set;\r\n    \r\n    public class ShowHashAlgorithms {\r\n    \r\n        private static final void showHashAlgorithms(Provider prov, Class&lt;?&gt; typeClass) {\r\n            String type = typeClass.getSimpleName();\r\n    \r\n            List&lt;Service&gt; algos = new ArrayList&lt;&gt;();\r\n    \r\n            Set&lt;Service&gt; services = prov.getServices();\r\n            for (Service service : services) {\r\n                if (service.getType().equalsIgnoreCase(type)) {\r\n                    algos.add(service);\r\n                }\r\n            }\r\n            \r\n            if (!algos.isEmpty()) {\r\n                System.out.printf(&quot; --- Provider %s, version %.2f --- %n&quot;, prov.getName(), prov.getVersion());\r\n                for (Service service : algos) {\r\n                    String algo = service.getAlgorithm();\r\n                    System.out.printf(&quot;Algorithm name: \\&quot;%s\\&quot;%n&quot;, algo);\r\n                    \r\n                    \r\n                }\r\n            }\r\n    \r\n            // --- find aliases (inefficiently)\r\n            Set&lt;Object&gt; keys = prov.keySet();\r\n            for (Object key : keys) {\r\n                final String prefix = &quot;Alg.Alias.&quot; + type + &quot;.&quot;;\r\n                if (key.toString().startsWith(prefix)) {\r\n                    String value = prov.get(key.toString()).toString();\r\n                    System.out.printf(&quot;Alias: \\&quot;%s\\&quot; -&gt; \\&quot;%s\\&quot;%n&quot;,\r\n                            key.toString().substring(prefix.length()),\r\n                            value);\r\n                }\r\n            }\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            Provider[] providers = Security.getProviders();\r\n            for (Provider provider : providers) {\r\n                showHashAlgorithms(provider, MessageDigest.class);\r\n            }\r\n        }\r\n    }\r\n\r\nSun provider output\r\n---\r\n\r\nThis code will generate the following output for Java 1.8. Note that because of some old mistake by the API providers, the provider version is only present as a `double`. It is not possible to distinguish between version 1.80 or version 1.8.0 because of this.\r\n\r\nThe aliases are below the actual implementations. Some of these aliases are [Object Identifiers](http://en.wikipedia.org/wiki/Object_identifier) or OID&#39;s in *dot notation*. These OID&#39;s are used to indicate algorithms from within ASN.1 encoded data formats such as X5.09v3 certificates as used within SSL/TLS. For instance, `1.3.14.3.2.26` is the dot notation for `{iso(1) identified-organization(3) oiw(14) secsig(3) algorithms(2) hashAlgorithmIdentifier(26)}` and the alias for SHA/SHA-1.\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n     --- Provider SUN, version 1.80 --- \r\n    Algorithm name: &quot;MD2&quot;\r\n    Algorithm name: &quot;MD5&quot;\r\n    Algorithm name: &quot;SHA&quot;\r\n    Algorithm name: &quot;SHA-224&quot;\r\n    Algorithm name: &quot;SHA-256&quot;\r\n    Algorithm name: &quot;SHA-384&quot;\r\n    Algorithm name: &quot;SHA-512&quot;\r\n    Alias: &quot;SHA-1&quot; -&gt; &quot;SHA&quot;\r\n    Alias: &quot;OID.1.3.14.3.2.26&quot; -&gt; &quot;SHA&quot;\r\n    Alias: &quot;1.3.14.3.2.26&quot; -&gt; &quot;SHA&quot;\r\n    Alias: &quot;OID.2.16.840.1.101.3.4.2.4&quot; -&gt; &quot;SHA-224&quot;\r\n    Alias: &quot;OID.2.16.840.1.101.3.4.2.3&quot; -&gt; &quot;SHA-512&quot;\r\n    Alias: &quot;OID.2.16.840.1.101.3.4.2.2&quot; -&gt; &quot;SHA-384&quot;\r\n    Alias: &quot;OID.2.16.840.1.101.3.4.2.1&quot; -&gt; &quot;SHA-256&quot;\r\n    Alias: &quot;2.16.840.1.101.3.4.2.4&quot; -&gt; &quot;SHA-224&quot;\r\n    Alias: &quot;2.16.840.1.101.3.4.2.3&quot; -&gt; &quot;SHA-512&quot;\r\n    Alias: &quot;2.16.840.1.101.3.4.2.2&quot; -&gt; &quot;SHA-384&quot;\r\n    Alias: &quot;2.16.840.1.101.3.4.2.1&quot; -&gt; &quot;SHA-256&quot;\r\n    Alias: &quot;SHA1&quot; -&gt; &quot;SHA&quot;\r\n\r\nBouncy Castle provider output\r\n---\r\n\r\nOutput for Bouncy Castle (not asked for, included for comparison):\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n     --- Provider BC, version 1.51 --- \r\n    Algorithm name: &quot;GOST3411&quot;\r\n    Algorithm name: &quot;MD2&quot;\r\n    Algorithm name: &quot;MD4&quot;\r\n    Algorithm name: &quot;MD5&quot;\r\n    Algorithm name: &quot;SHA-1&quot;\r\n    Algorithm name: &quot;RIPEMD128&quot;\r\n    Algorithm name: &quot;RIPEMD160&quot;\r\n    Algorithm name: &quot;RIPEMD256&quot;\r\n    Algorithm name: &quot;RIPEMD320&quot;\r\n    Algorithm name: &quot;SHA-224&quot;\r\n    Algorithm name: &quot;SHA-256&quot;\r\n    Algorithm name: &quot;SHA-384&quot;\r\n    Algorithm name: &quot;SHA-512&quot;\r\n    Algorithm name: &quot;SHA-512/224&quot;\r\n    Algorithm name: &quot;SHA-512/256&quot;\r\n    Algorithm name: &quot;SHA3-224&quot;\r\n    Algorithm name: &quot;SHA3-256&quot;\r\n    Algorithm name: &quot;SHA3-384&quot;\r\n    Algorithm name: &quot;SHA3-512&quot;\r\n    Algorithm name: &quot;Skein-256-128&quot;\r\n    Algorithm name: &quot;Skein-256-160&quot;\r\n    Algorithm name: &quot;Skein-256-224&quot;\r\n    Algorithm name: &quot;Skein-256-256&quot;\r\n    Algorithm name: &quot;Skein-512-128&quot;\r\n    Algorithm name: &quot;Skein-512-160&quot;\r\n    Algorithm name: &quot;Skein-512-224&quot;\r\n    Algorithm name: &quot;Skein-512-256&quot;\r\n    Algorithm name: &quot;Skein-512-384&quot;\r\n    Algorithm name: &quot;Skein-512-512&quot;\r\n    Algorithm name: &quot;Skein-1024-384&quot;\r\n    Algorithm name: &quot;Skein-1024-512&quot;\r\n    Algorithm name: &quot;Skein-1024-1024&quot;\r\n    Algorithm name: &quot;SM3&quot;\r\n    Algorithm name: &quot;TIGER&quot;\r\n    Algorithm name: &quot;WHIRLPOOL&quot;\r\n    Alias: &quot;SHA256&quot; -&gt; &quot;SHA-256&quot;\r\n    Alias: &quot;SHA224&quot; -&gt; &quot;SHA-224&quot;\r\n    Alias: &quot;1.3.36.3.2.3&quot; -&gt; &quot;RIPEMD256&quot;\r\n    Alias: &quot;1.3.36.3.2.2&quot; -&gt; &quot;RIPEMD128&quot;\r\n    Alias: &quot;1.3.36.3.2.1&quot; -&gt; &quot;RIPEMD160&quot;\r\n    Alias: &quot;1.2.156.197.1.401&quot; -&gt; &quot;SM3&quot;\r\n    Alias: &quot;SHA512&quot; -&gt; &quot;SHA-512&quot;\r\n    Alias: &quot;SHA1&quot; -&gt; &quot;SHA-1&quot;\r\n    Alias: &quot;GOST&quot; -&gt; &quot;GOST3411&quot;\r\n    Alias: &quot;2.16.840.1.101.3.4.2.6&quot; -&gt; &quot;SHA-512/256&quot;\r\n    Alias: &quot;2.16.840.1.101.3.4.2.5&quot; -&gt; &quot;SHA-512/224&quot;\r\n    Alias: &quot;2.16.840.1.101.3.4.2.4&quot; -&gt; &quot;SHA-224&quot;\r\n    Alias: &quot;2.16.840.1.101.3.4.2.3&quot; -&gt; &quot;SHA-512&quot;\r\n    Alias: &quot;2.16.840.1.101.3.4.2.2&quot; -&gt; &quot;SHA-384&quot;\r\n    Alias: &quot;2.16.840.1.101.3.4.2.1&quot; -&gt; &quot;SHA-256&quot;\r\n    Alias: &quot;1.2.643.2.2.9&quot; -&gt; &quot;GOST3411&quot;\r\n    Alias: &quot;1.3.14.3.2.26&quot; -&gt; &quot;SHA-1&quot;\r\n    Alias: &quot;SHA512/224&quot; -&gt; &quot;SHA-512/224&quot;\r\n    Alias: &quot;GOST-3411&quot; -&gt; &quot;GOST3411&quot;\r\n    Alias: &quot;SHA512256&quot; -&gt; &quot;SHA-512/256&quot;\r\n    Alias: &quot;SHA384&quot; -&gt; &quot;SHA-384&quot;\r\n    Alias: &quot;SM3&quot; -&gt; &quot;SM3&quot;\r\n    Alias: &quot;SHA&quot; -&gt; &quot;SHA-1&quot;\r\n    Alias: &quot;1.2.840.113549.2.5&quot; -&gt; &quot;MD5&quot;\r\n    Alias: &quot;1.2.840.113549.2.4&quot; -&gt; &quot;MD4&quot;\r\n    Alias: &quot;1.2.840.113549.2.2&quot; -&gt; &quot;MD2&quot;\r\n\r\n\r\n","title":"Complete list of MessageDigest available in the JDK","body":"<p>In addition to JB's answer, I would like to propose a solution that queries the runtime for available algorithms. This method is of course easily converted to one for <code>Cipher</code>, <code>SecureRandom</code>, <code>Mac</code>, <code>KeyAgreement</code>, <code>KeyFactory</code> or any other <em>type</em> of algorithm.</p>\n\n<h2>Program</h2>\n\n<pre><code>import java.security.MessageDigest;\nimport java.security.Provider;\nimport java.security.Provider.Service;\nimport java.security.Security;\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.Set;\n\npublic class ShowHashAlgorithms {\n\n    private static final void showHashAlgorithms(Provider prov, Class&lt;?&gt; typeClass) {\n        String type = typeClass.getSimpleName();\n\n        List&lt;Service&gt; algos = new ArrayList&lt;&gt;();\n\n        Set&lt;Service&gt; services = prov.getServices();\n        for (Service service : services) {\n            if (service.getType().equalsIgnoreCase(type)) {\n                algos.add(service);\n            }\n        }\n\n        if (!algos.isEmpty()) {\n            System.out.printf(\" --- Provider %s, version %.2f --- %n\", prov.getName(), prov.getVersion());\n            for (Service service : algos) {\n                String algo = service.getAlgorithm();\n                System.out.printf(\"Algorithm name: \\\"%s\\\"%n\", algo);\n\n\n            }\n        }\n\n        // --- find aliases (inefficiently)\n        Set&lt;Object&gt; keys = prov.keySet();\n        for (Object key : keys) {\n            final String prefix = \"Alg.Alias.\" + type + \".\";\n            if (key.toString().startsWith(prefix)) {\n                String value = prov.get(key.toString()).toString();\n                System.out.printf(\"Alias: \\\"%s\\\" -&gt; \\\"%s\\\"%n\",\n                        key.toString().substring(prefix.length()),\n                        value);\n            }\n        }\n    }\n\n    public static void main(String[] args) {\n        Provider[] providers = Security.getProviders();\n        for (Provider provider : providers) {\n            showHashAlgorithms(provider, MessageDigest.class);\n        }\n    }\n}\n</code></pre>\n\n<h2>Sun provider output</h2>\n\n<p>This code will generate the following output for Java 1.8. Note that because of some old mistake by the API providers, the provider version is only present as a <code>double</code>. It is not possible to distinguish between version 1.80 or version 1.8.0 because of this.</p>\n\n<p>The aliases are below the actual implementations. Some of these aliases are <a href=\"http://en.wikipedia.org/wiki/Object_identifier\">Object Identifiers</a> or OID's in <em>dot notation</em>. These OID's are used to indicate algorithms from within ASN.1 encoded data formats such as X5.09v3 certificates as used within SSL/TLS. For instance, <code>1.3.14.3.2.26</code> is the dot notation for <code>{iso(1) identified-organization(3) oiw(14) secsig(3) algorithms(2) hashAlgorithmIdentifier(26)}</code> and the alias for SHA/SHA-1.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code> --- Provider SUN, version 1.80 --- \nAlgorithm name: \"MD2\"\nAlgorithm name: \"MD5\"\nAlgorithm name: \"SHA\"\nAlgorithm name: \"SHA-224\"\nAlgorithm name: \"SHA-256\"\nAlgorithm name: \"SHA-384\"\nAlgorithm name: \"SHA-512\"\nAlias: \"SHA-1\" -&gt; \"SHA\"\nAlias: \"OID.1.3.14.3.2.26\" -&gt; \"SHA\"\nAlias: \"1.3.14.3.2.26\" -&gt; \"SHA\"\nAlias: \"OID.2.16.840.1.101.3.4.2.4\" -&gt; \"SHA-224\"\nAlias: \"OID.2.16.840.1.101.3.4.2.3\" -&gt; \"SHA-512\"\nAlias: \"OID.2.16.840.1.101.3.4.2.2\" -&gt; \"SHA-384\"\nAlias: \"OID.2.16.840.1.101.3.4.2.1\" -&gt; \"SHA-256\"\nAlias: \"2.16.840.1.101.3.4.2.4\" -&gt; \"SHA-224\"\nAlias: \"2.16.840.1.101.3.4.2.3\" -&gt; \"SHA-512\"\nAlias: \"2.16.840.1.101.3.4.2.2\" -&gt; \"SHA-384\"\nAlias: \"2.16.840.1.101.3.4.2.1\" -&gt; \"SHA-256\"\nAlias: \"SHA1\" -&gt; \"SHA\"\n</code></pre>\n\n<h2>Bouncy Castle provider output</h2>\n\n<p>Output for Bouncy Castle (not asked for, included for comparison):</p>\n\n<pre class=\"lang-none prettyprint-override\"><code> --- Provider BC, version 1.51 --- \nAlgorithm name: \"GOST3411\"\nAlgorithm name: \"MD2\"\nAlgorithm name: \"MD4\"\nAlgorithm name: \"MD5\"\nAlgorithm name: \"SHA-1\"\nAlgorithm name: \"RIPEMD128\"\nAlgorithm name: \"RIPEMD160\"\nAlgorithm name: \"RIPEMD256\"\nAlgorithm name: \"RIPEMD320\"\nAlgorithm name: \"SHA-224\"\nAlgorithm name: \"SHA-256\"\nAlgorithm name: \"SHA-384\"\nAlgorithm name: \"SHA-512\"\nAlgorithm name: \"SHA-512/224\"\nAlgorithm name: \"SHA-512/256\"\nAlgorithm name: \"SHA3-224\"\nAlgorithm name: \"SHA3-256\"\nAlgorithm name: \"SHA3-384\"\nAlgorithm name: \"SHA3-512\"\nAlgorithm name: \"Skein-256-128\"\nAlgorithm name: \"Skein-256-160\"\nAlgorithm name: \"Skein-256-224\"\nAlgorithm name: \"Skein-256-256\"\nAlgorithm name: \"Skein-512-128\"\nAlgorithm name: \"Skein-512-160\"\nAlgorithm name: \"Skein-512-224\"\nAlgorithm name: \"Skein-512-256\"\nAlgorithm name: \"Skein-512-384\"\nAlgorithm name: \"Skein-512-512\"\nAlgorithm name: \"Skein-1024-384\"\nAlgorithm name: \"Skein-1024-512\"\nAlgorithm name: \"Skein-1024-1024\"\nAlgorithm name: \"SM3\"\nAlgorithm name: \"TIGER\"\nAlgorithm name: \"WHIRLPOOL\"\nAlias: \"SHA256\" -&gt; \"SHA-256\"\nAlias: \"SHA224\" -&gt; \"SHA-224\"\nAlias: \"1.3.36.3.2.3\" -&gt; \"RIPEMD256\"\nAlias: \"1.3.36.3.2.2\" -&gt; \"RIPEMD128\"\nAlias: \"1.3.36.3.2.1\" -&gt; \"RIPEMD160\"\nAlias: \"1.2.156.197.1.401\" -&gt; \"SM3\"\nAlias: \"SHA512\" -&gt; \"SHA-512\"\nAlias: \"SHA1\" -&gt; \"SHA-1\"\nAlias: \"GOST\" -&gt; \"GOST3411\"\nAlias: \"2.16.840.1.101.3.4.2.6\" -&gt; \"SHA-512/256\"\nAlias: \"2.16.840.1.101.3.4.2.5\" -&gt; \"SHA-512/224\"\nAlias: \"2.16.840.1.101.3.4.2.4\" -&gt; \"SHA-224\"\nAlias: \"2.16.840.1.101.3.4.2.3\" -&gt; \"SHA-512\"\nAlias: \"2.16.840.1.101.3.4.2.2\" -&gt; \"SHA-384\"\nAlias: \"2.16.840.1.101.3.4.2.1\" -&gt; \"SHA-256\"\nAlias: \"1.2.643.2.2.9\" -&gt; \"GOST3411\"\nAlias: \"1.3.14.3.2.26\" -&gt; \"SHA-1\"\nAlias: \"SHA512/224\" -&gt; \"SHA-512/224\"\nAlias: \"GOST-3411\" -&gt; \"GOST3411\"\nAlias: \"SHA512256\" -&gt; \"SHA-512/256\"\nAlias: \"SHA384\" -&gt; \"SHA-384\"\nAlias: \"SM3\" -&gt; \"SM3\"\nAlias: \"SHA\" -&gt; \"SHA-1\"\nAlias: \"1.2.840.113549.2.5\" -&gt; \"MD5\"\nAlias: \"1.2.840.113549.2.4\" -&gt; \"MD4\"\nAlias: \"1.2.840.113549.2.2\" -&gt; \"MD2\"\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3207356,"reputation":2687,"user_id":2708147,"accept_rate":100,"display_name":"Netherwire"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1527937915,"creation_date":1527937915,"answer_id":50656322,"question_id":24979557,"body_markdown":"In addition to Maarten Bodewes&#39;s answer: I needed such algorithm and  I wrote a method, collecting a sorted by name list of all available algorithms and aliases. It uses java8&#39;s stream API. Please, feel free to use it wherever you want. Cheers.\r\n\r\n    public static List&lt;String&gt; getAvailableAlgorithms()\r\n    {\r\n        final String digestClassName = MessageDigest.class.getSimpleName();\r\n        final String aliasPrefix = &quot;Alg.Alias.&quot; + digestClassName + &quot;.&quot;;\r\n    \r\n        return Arrays.stream(getProviders())\r\n            .flatMap(prov -&gt; {\r\n                final Set&lt;String&gt; algorithms = new HashSet&lt;&gt;(0);\r\n    \r\n                prov.getServices().stream()\r\n                    .filter(s -&gt; digestClassName.equalsIgnoreCase(s.getType()))\r\n                    .map(Service::getAlgorithm)\r\n                    .collect(Collectors.toCollection(() -&gt; algorithms));\r\n    \r\n                prov.keySet().stream()\r\n                    .map(Object::toString)\r\n                    .filter(k -&gt; k.startsWith(aliasPrefix))\r\n                    .map(k -&gt; String.format(&quot;\\&quot;%s\\&quot; -&gt; \\&quot;%s\\&quot;&quot;, k.substring(aliasPrefix.length()), prov.get(k).toString()))\r\n                    .collect(Collectors.toCollection(() -&gt; algorithms));\r\n    \r\n                return algorithms.stream();\r\n            })\r\n            .sorted(String::compareTo)\r\n            .collect(Collectors.toList());\r\n    }","title":"Complete list of MessageDigest available in the JDK","body":"<p>In addition to Maarten Bodewes's answer: I needed such algorithm and  I wrote a method, collecting a sorted by name list of all available algorithms and aliases. It uses java8's stream API. Please, feel free to use it wherever you want. Cheers.</p>\n\n<pre><code>public static List&lt;String&gt; getAvailableAlgorithms()\n{\n    final String digestClassName = MessageDigest.class.getSimpleName();\n    final String aliasPrefix = \"Alg.Alias.\" + digestClassName + \".\";\n\n    return Arrays.stream(getProviders())\n        .flatMap(prov -&gt; {\n            final Set&lt;String&gt; algorithms = new HashSet&lt;&gt;(0);\n\n            prov.getServices().stream()\n                .filter(s -&gt; digestClassName.equalsIgnoreCase(s.getType()))\n                .map(Service::getAlgorithm)\n                .collect(Collectors.toCollection(() -&gt; algorithms));\n\n            prov.keySet().stream()\n                .map(Object::toString)\n                .filter(k -&gt; k.startsWith(aliasPrefix))\n                .map(k -&gt; String.format(\"\\\"%s\\\" -&gt; \\\"%s\\\"\", k.substring(aliasPrefix.length()), prov.get(k).toString()))\n                .collect(Collectors.toCollection(() -&gt; algorithms));\n\n            return algorithms.stream();\n        })\n        .sorted(String::compareTo)\n        .collect(Collectors.toList());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1663671520,"creation_date":1565682307,"answer_id":57473282,"question_id":24979557,"body_markdown":"To get just the algorithm names, without aliases or any additional information, the simplest is:\r\n\r\n    import java.security.Security;\r\n    import java.util.Set;\r\n\r\n    ...\r\n\r\n    Set&lt;String&gt; algorithms = Security.getAlgorithms(&quot;MessageDigest&quot;);\r\n\r\nNote that you should configure any non-standard providers before calling this function, e.g. by using [`Security.addProvider(Provider provider)`](https://docs.oracle.com/javase/8/docs/api/java/security/Security.html#addProvider-java.security.Provider-).\r\n\r\n&lt;sup&gt;since Java 1.4&lt;/sup&gt;","title":"Complete list of MessageDigest available in the JDK","body":"<p>To get just the algorithm names, without aliases or any additional information, the simplest is:</p>\n<pre><code>import java.security.Security;\nimport java.util.Set;\n\n...\n\nSet&lt;String&gt; algorithms = Security.getAlgorithms(&quot;MessageDigest&quot;);\n</code></pre>\n<p>Note that you should configure any non-standard providers before calling this function, e.g. by using <a href=\"https://docs.oracle.com/javase/8/docs/api/java/security/Security.html#addProvider-java.security.Provider-\" rel=\"nofollow noreferrer\"><code>Security.addProvider(Provider provider)</code></a>.</p>\n<p><sup>since Java 1.4</sup></p>\n"},{"tags":[],"owner":{"account_id":312643,"reputation":519,"user_id":626826,"display_name":"Daniel Kec"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1570784007,"creation_date":1570784007,"answer_id":58337603,"question_id":24979557,"body_markdown":"One liner: \r\n\r\n    Arrays.stream(Security.getProviders())\r\n                .flatMap(provider -&gt; provider.getServices().stream())\r\n                .filter(s -&gt; MessageDigest.class.getSimpleName().equals(s.getType()))\r\n                .map(Provider.Service::getAlgorithm)\r\n                .collect(Collectors.toList());","title":"Complete list of MessageDigest available in the JDK","body":"<p>One liner: </p>\n\n<pre><code>Arrays.stream(Security.getProviders())\n            .flatMap(provider -&gt; provider.getServices().stream())\n            .filter(s -&gt; MessageDigest.class.getSimpleName().equals(s.getType()))\n            .map(Provider.Service::getAlgorithm)\n            .collect(Collectors.toList());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5891150,"reputation":49,"user_id":4637730,"display_name":"J-F Cloutier"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1570808347,"creation_date":1570808347,"answer_id":58344542,"question_id":24979557,"body_markdown":"You can find the exact list supported by your JVM with the following code:\r\n\r\n    java.lang.System.out.println(java.security.Security.getAlgorithms(&quot;MessageDigest&quot;));\r\n\r\nIf you have a recent JRE/JDK, you should have JavaScript available thus you can launch &quot;jjs&quot; (which should be in the same directory as java/javac/...) and type the above command at the prompt. Obviously, if you have installed special providers (like Bouncy Castle) in your JVM, you will need to configure them accordingly when launching &quot;jjs&quot;.","title":"Complete list of MessageDigest available in the JDK","body":"<p>You can find the exact list supported by your JVM with the following code:</p>\n\n<pre><code>java.lang.System.out.println(java.security.Security.getAlgorithms(\"MessageDigest\"));\n</code></pre>\n\n<p>If you have a recent JRE/JDK, you should have JavaScript available thus you can launch \"jjs\" (which should be in the same directory as java/javac/...) and type the above command at the prompt. Obviously, if you have installed special providers (like Bouncy Castle) in your JVM, you will need to configure them accordingly when launching \"jjs\".</p>\n"}],"owner":{"account_id":84677,"reputation":16500,"user_id":236528,"accept_rate":100,"display_name":"mjuarez"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":22245,"favorite_count":0,"down_vote_count":1,"up_vote_count":26,"accepted_answer_id":24983009,"answer_count":6,"score":25,"last_activity_date":1663671520,"creation_date":1406452573,"question_id":24979557,"body_markdown":"I&#39;ve searched high and low for this, but I can&#39;t seem to get a straight answer.\r\n\r\nIn Java, the available MessageDigests are determined by which security providers you have configured/installed.  But assuming just a normal JDK8 install (1.8.0_11 in my case), what&#39;s the list of hash algorithms that are available?  From examples in the docs, it&#39;s obvious MD5, SHA1 and SHA-256 are available, but I can&#39;t seem to get a complete, authoritative list.\r\n\r\nDoes this list exist, or how do I go about finding out for my particular install?","title":"Complete list of MessageDigest available in the JDK","body":"<p>I've searched high and low for this, but I can't seem to get a straight answer.</p>\n\n<p>In Java, the available MessageDigests are determined by which security providers you have configured/installed.  But assuming just a normal JDK8 install (1.8.0_11 in my case), what's the list of hash algorithms that are available?  From examples in the docs, it's obvious MD5, SHA1 and SHA-256 are available, but I can't seem to get a complete, authoritative list.</p>\n\n<p>Does this list exist, or how do I go about finding out for my particular install?</p>\n"},{"tags":["java","testing","junit"],"comments":[{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":2,"creation_date":1663672762,"post_id":73785504,"comment_id":130290192,"body_markdown":"Is the IDE eclipse? If it is, most probably it&#39;s executing some previous cached version, which worked.","body":"Is the IDE eclipse? If it is, most probably it&#39;s executing some previous cached version, which worked."}],"answers":[{"tags":[],"owner":{"account_id":12673101,"reputation":1673,"user_id":9210263,"display_name":"LeYAUable"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663671307,"creation_date":1663671307,"answer_id":73785555,"question_id":73785504,"body_markdown":"You don&#39;t have any assertion in the test.\r\nWithout any assertions, the test will pass.\r\n\r\nThe one you highlighted, if you executed it as it is, should not even compile. \r\n\r\n","title":"Is there a reason why JUNIT is passing tests I&#39;m clearly not supposed to be passing?","body":"<p>You don't have any assertion in the test.\nWithout any assertions, the test will pass.</p>\n<p>The one you highlighted, if you executed it as it is, should not even compile.</p>\n"}],"owner":{"account_id":17595205,"reputation":9,"user_id":12766504,"display_name":"ecee"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":178,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1663671307,"creation_date":1663671057,"question_id":73785504,"body_markdown":"I&#39;m passing tests I&#39;m clearly not supposed to be passing and I&#39;m not quite sure why this is. Sometimes JUNIT seems to be frozen and just repeats one test output; I would like to know why that is the case\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/uE6k2.png","title":"Is there a reason why JUNIT is passing tests I&#39;m clearly not supposed to be passing?","body":"<p>I'm passing tests I'm clearly not supposed to be passing and I'm not quite sure why this is. Sometimes JUNIT seems to be frozen and just repeats one test output; I would like to know why that is the case\n<a href=\"https://i.stack.imgur.com/uE6k2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uE6k2.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","cassandra","datastax-java-driver"],"answers":[{"tags":[],"owner":{"account_id":990324,"reputation":86,"user_id":1007835,"display_name":"Jeff Nadler"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1402030040,"creation_date":1402030040,"answer_id":24074354,"question_id":23818775,"body_markdown":"\r\nI have what I believe is the exact same issue (Write attempt on defunct connection) on my development machine intermittently.\r\n\r\nIt seems to happen when my dev machine goes to sleep while the server is up.   Obviously there&#39;s no power management in the AWS cluster you&#39;re running, but it gives you a hint - the key is that something is breaking your control connection or intermittently preventing network connectivity between your hosts.  \r\n\r\nYou should see the reconnection thread in your logs:\r\n21:34:51.616 [Reconnection-1] ERROR c.d.driver.core.ControlConnection - [Control connection] Cannot connect to any host, scheduling retry in 2000 milliseconds\r\n\r\nThe next request after this will always succeed in my experience.  \r\n\r\nTL; DR - check for networking issues or any intermittent shutdown of servers that could break the control connection.   The driver should do a better job of re-establishing broken control connections, sounds like they&#39;re working on it for JAVA-250 \r\n","title":"Getting &quot;Write attempt on defunct connection&quot; Error From Datastax Cassandra Java Driver","body":"<p>I have what I believe is the exact same issue (Write attempt on defunct connection) on my development machine intermittently.</p>\n\n<p>It seems to happen when my dev machine goes to sleep while the server is up.   Obviously there's no power management in the AWS cluster you're running, but it gives you a hint - the key is that something is breaking your control connection or intermittently preventing network connectivity between your hosts.  </p>\n\n<p>You should see the reconnection thread in your logs:\n21:34:51.616 [Reconnection-1] ERROR c.d.driver.core.ControlConnection - [Control connection] Cannot connect to any host, scheduling retry in 2000 milliseconds</p>\n\n<p>The next request after this will always succeed in my experience.  </p>\n\n<p>TL; DR - check for networking issues or any intermittent shutdown of servers that could break the control connection.   The driver should do a better job of re-establishing broken control connections, sounds like they're working on it for JAVA-250 </p>\n"}],"owner":{"account_id":4510910,"reputation":1,"user_id":3667052,"display_name":"user3667052"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2367,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1663670966,"creation_date":1400801686,"question_id":23818775,"body_markdown":"I have a web service application using Cassandra 2.0 and Datastax java driver 2.0.2. I sometimes get the stacktrace below when trying to write to/read from database, especially if the application has been sitting there for a while (like overnight). This error usually goes away when I retry, however, sometimes it persists and I have to restart the web app to get rid of the error.\r\n\r\nI wonder if this is some sort of &quot;stale connection&quot; issue. However, the Datastax java driver documentation indicates it is supposed to keep the connection alive.\r\n\r\nI did a google search on the error message and only two (!) hits were given by google. They are related. This is the answer in one of the google result:\r\n\r\n&gt; Sylvain Lebresne \t Apr 2   You&#39;re running into\r\n&gt; https://datastax-oss.atlassian.net/browse/JAVA-250. We&#39;ll fix it soon\r\n&gt; hopefully (I have some half-finished patch that I need to finish), but\r\n&gt; currently, if you restart a whole cluster without doing queries during\r\n&gt; the restat, it can sometimes happen that you&#39;ll get this before the\r\n&gt; cluster properly reconnect. In the meantime and as a workaround, you\r\n&gt; can always make sure to run a few trivial queries while you&#39;re doing\r\n&gt; the cluster restart to avoid it.\r\n\r\nHowever this does not look like my scenario because we are not restarting the cluster at all. I wonder if anyone has some insights about this error? \r\n\r\nStacktrace:\r\n\r\n    com.datastax.driver.core.exceptions.NoHostAvailableException: All host(s) tried for query failed (tried: ec2-54-197-xxx-xxx.compute-1.amazonaws.com/54.197.xxx.xxx:9042 (com.datastax.driver.core.ConnectionException: [ec2-54-197-xxx-xxx.compute-1.amazonaws.com/54.197.xxx.xxx:9042] Write attempt on defunct connection))\r\n\tat com.datastax.driver.core.exceptions.NoHostAvailableException.copy(NoHostAvailableException.java:65)\r\n\tat com.datastax.driver.core.DefaultResultSetFuture.extractCauseFromExecutionException(DefaultResultSetFuture.java:256)\r\n\tat com.datastax.driver.core.DefaultResultSetFuture.getUninterruptibly(DefaultResultSetFuture.java:172)\r\n\tat com.datastax.driver.core.SessionManager.execute(SessionManager.java:92)","title":"Getting &quot;Write attempt on defunct connection&quot; Error From Datastax Cassandra Java Driver","body":"<p>I have a web service application using Cassandra 2.0 and Datastax java driver 2.0.2. I sometimes get the stacktrace below when trying to write to/read from database, especially if the application has been sitting there for a while (like overnight). This error usually goes away when I retry, however, sometimes it persists and I have to restart the web app to get rid of the error.</p>\n\n<p>I wonder if this is some sort of \"stale connection\" issue. However, the Datastax java driver documentation indicates it is supposed to keep the connection alive.</p>\n\n<p>I did a google search on the error message and only two (!) hits were given by google. They are related. This is the answer in one of the google result:</p>\n\n<blockquote>\n  <p>Sylvain Lebresne   Apr 2   You're running into\n  <a href=\"https://datastax-oss.atlassian.net/browse/JAVA-250\" rel=\"nofollow\">https://datastax-oss.atlassian.net/browse/JAVA-250</a>. We'll fix it soon\n  hopefully (I have some half-finished patch that I need to finish), but\n  currently, if you restart a whole cluster without doing queries during\n  the restat, it can sometimes happen that you'll get this before the\n  cluster properly reconnect. In the meantime and as a workaround, you\n  can always make sure to run a few trivial queries while you're doing\n  the cluster restart to avoid it.</p>\n</blockquote>\n\n<p>However this does not look like my scenario because we are not restarting the cluster at all. I wonder if anyone has some insights about this error? </p>\n\n<p>Stacktrace:</p>\n\n<pre><code>com.datastax.driver.core.exceptions.NoHostAvailableException: All host(s) tried for query failed (tried: ec2-54-197-xxx-xxx.compute-1.amazonaws.com/54.197.xxx.xxx:9042 (com.datastax.driver.core.ConnectionException: [ec2-54-197-xxx-xxx.compute-1.amazonaws.com/54.197.xxx.xxx:9042] Write attempt on defunct connection))\nat com.datastax.driver.core.exceptions.NoHostAvailableException.copy(NoHostAvailableException.java:65)\nat com.datastax.driver.core.DefaultResultSetFuture.extractCauseFromExecutionException(DefaultResultSetFuture.java:256)\nat com.datastax.driver.core.DefaultResultSetFuture.getUninterruptibly(DefaultResultSetFuture.java:172)\nat com.datastax.driver.core.SessionManager.execute(SessionManager.java:92)\n</code></pre>\n"},{"tags":["java","spring-mvc","cassandra","datastax-java-driver","titan"],"answers":[{"tags":[],"owner":{"account_id":3493556,"reputation":4931,"user_id":2922515,"accept_rate":70,"display_name":"Vipin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1400840473,"creation_date":1400840473,"answer_id":23826701,"question_id":23801992,"body_markdown":"Check what started metrics-meter-tick-thread* threads , either your webapp or some library. And stop the thread before you shutdown application.\nSee Tomcat wiki [link][1] explains how it creates a memory leak. Also it explains how uncleaned ThreadLocal variables causes memory leaks.\n\n&gt;**Threads spawned by webapps**   \n&gt;\n&gt; If a webapp creates a thread, by default\n&gt; its context classloader is set to the one of the parent thread (the\n&gt; thread that created the new thread). In a webapp, this parent thread\n&gt; is one of tomcat worker threads, whose context classloader is set to\n&gt; the webapp classloader when it executes webapp code. \n&gt; \n&gt; Furthermore, the spawned thread may be executing (or blocked in) some\n&gt; code that involves classes loaded by the webapp, thus preventing the\n&gt; webapp classloader from being collected. \n&gt; \n&gt; So, if the spawned thread is not properly terminated when the\n&gt; application is stopped, the webapp classloader will leak because of\n&gt; the strong reference held by the spawned thread.\n\n\n  [1]: http://wiki.apache.org/tomcat/MemoryLeakProtection","title":"memory leak - metrics-meter-tick-thread and New I/O client worker","body":"<p>Check what started metrics-meter-tick-thread* threads , either your webapp or some library. And stop the thread before you shutdown application.\nSee Tomcat wiki <a href=\"http://wiki.apache.org/tomcat/MemoryLeakProtection\" rel=\"nofollow noreferrer\">link</a> explains how it creates a memory leak. Also it explains how uncleaned ThreadLocal variables causes memory leaks.</p>\n<blockquote>\n<p><strong>Threads spawned by webapps</strong></p>\n<p>If a webapp creates a thread, by default\nits context classloader is set to the one of the parent thread (the\nthread that created the new thread). In a webapp, this parent thread\nis one of tomcat worker threads, whose context classloader is set to\nthe webapp classloader when it executes webapp code.</p>\n<p>Furthermore, the spawned thread may be executing (or blocked in) some\ncode that involves classes loaded by the webapp, thus preventing the\nwebapp classloader from being collected.</p>\n<p>So, if the spawned thread is not properly terminated when the\napplication is stopped, the webapp classloader will leak because of\nthe strong reference held by the spawned thread.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":3966699,"reputation":11,"user_id":3272422,"display_name":"Andras Gerlits"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1476789533,"creation_date":1437567303,"answer_id":31562848,"question_id":23801992,"body_markdown":"I know I&#39;m a bit late with this. I had the same issue and eventually found the solution. The problem is that the metrics 2.2 JAR, (which spawns these threads) uses the `ManagementFactory.getPlatformMBeanServer()` method, as suggested by Oracle. This class is in the `java.lang` package, so it will be loaded centrally by the **VM** and not for each module. So, since the Metrics package will only shut these threads down by itself on a **VM** exit (via adding a shutdown-hook), the **classloader** that loaded this package will let the `MXBeans` specified through the package linger on on the module&#39;s unload. What makes this even worse is that **classloader** that loaded the **war** file will also stay loaded on the **VM**, which (transitively) will also include any classes loaded in the module and any static state.\r\n\r\nYou can call `Metrics.shutdown()` manually, that sometimes solves the problem. I did have some exotic problems with that solution (sometimes the threads still stayed around after this, but I have a very peculiar setup and didn&#39;t want to waste any more time on this issue).","title":"memory leak - metrics-meter-tick-thread and New I/O client worker","body":"<p>I know I'm a bit late with this. I had the same issue and eventually found the solution. The problem is that the metrics 2.2 JAR, (which spawns these threads) uses the <code>ManagementFactory.getPlatformMBeanServer()</code> method, as suggested by Oracle. This class is in the <code>java.lang</code> package, so it will be loaded centrally by the <strong>VM</strong> and not for each module. So, since the Metrics package will only shut these threads down by itself on a <strong>VM</strong> exit (via adding a shutdown-hook), the <strong>classloader</strong> that loaded this package will let the <code>MXBeans</code> specified through the package linger on on the module's unload. What makes this even worse is that <strong>classloader</strong> that loaded the <strong>war</strong> file will also stay loaded on the <strong>VM</strong>, which (transitively) will also include any classes loaded in the module and any static state.</p>\n\n<p>You can call <code>Metrics.shutdown()</code> manually, that sometimes solves the problem. I did have some exotic problems with that solution (sometimes the threads still stayed around after this, but I have a very peculiar setup and didn't want to waste any more time on this issue).</p>\n"}],"owner":{"account_id":1043663,"reputation":10314,"user_id":1049104,"accept_rate":33,"display_name":"Manish Kumar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1981,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1663670952,"creation_date":1400748584,"question_id":23801992,"body_markdown":"I am running spring-mvc application. When i was closing `Tomcat` server, it shows\r\n\r\n    SEVERE: The web application [/myapp] appears to have started a thread named [metrics-meter-tick-thread-1] but has failed to stop it. This is very likely to create a memory leak.\r\n    SEVERE: The web application [/myapp] appears to have started a thread named [metrics-meter-tick-thread-2] but has failed to stop it. This is very likely to create a memory leak.\r\n\r\nand this one :\r\n\r\n    SEVERE: The web application [/myapp] appears to have started a thread named [New I/O client worker #1-3] but has failed to stop it. This is very likely to create a memory leak.\r\n\r\n    SEVERE: The web application [/anant] created a ThreadLocal with key of type [org.jboss.netty.util.CharsetUtil$2] (value [org.jboss.netty.util.CharsetUtil$2@5db3978d]) and a value of type [java.util.IdentityHashMap] (value [{UTF-8=sun.nio.cs.UTF_8$Decoder@39a2da0a}]) but failed to remove it when the web application was stopped. Threads are going to be renewed over time to try and avoid a probable memory leak.\r\n\r\nthis one don&#39;t know which jar is related with may be `netty`\r\n\r\nwhen i explored jars dependency i saw that there are two `metrics-core` jars:\r\n\r\n    metrics-core:2.2.0 (used by `datastax`)\r\n    metrics-core:3.0.1 (used by `Titan`)\r\n\r\nI am attaching all snaps to make it more clear. So what is the solution ????\r\n\r\nI am using \r\n\r\n`jdk1.7`\r\n`cassandra-driver-core-1.0.4`\r\n`titan-0.4.4`\r\n`cassandra-1.2.2`\r\n`tomcat-7.0.34`\r\n\r\n![enter image description here][1]![enter image description here][2]![enter image description here][3]![enter image description here][4]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/wE4jA.png\r\n  [2]: http://i.stack.imgur.com/w2rUN.png\r\n  [3]: http://i.stack.imgur.com/IunsF.png\r\n  [4]: http://i.stack.imgur.com/GFjUt.png","title":"memory leak - metrics-meter-tick-thread and New I/O client worker","body":"<p>I am running spring-mvc application. When i was closing <code>Tomcat</code> server, it shows</p>\n\n<pre><code>SEVERE: The web application [/myapp] appears to have started a thread named [metrics-meter-tick-thread-1] but has failed to stop it. This is very likely to create a memory leak.\nSEVERE: The web application [/myapp] appears to have started a thread named [metrics-meter-tick-thread-2] but has failed to stop it. This is very likely to create a memory leak.\n</code></pre>\n\n<p>and this one :</p>\n\n<pre><code>SEVERE: The web application [/myapp] appears to have started a thread named [New I/O client worker #1-3] but has failed to stop it. This is very likely to create a memory leak.\n\nSEVERE: The web application [/anant] created a ThreadLocal with key of type [org.jboss.netty.util.CharsetUtil$2] (value [org.jboss.netty.util.CharsetUtil$2@5db3978d]) and a value of type [java.util.IdentityHashMap] (value [{UTF-8=sun.nio.cs.UTF_8$Decoder@39a2da0a}]) but failed to remove it when the web application was stopped. Threads are going to be renewed over time to try and avoid a probable memory leak.\n</code></pre>\n\n<p>this one don't know which jar is related with may be <code>netty</code></p>\n\n<p>when i explored jars dependency i saw that there are two <code>metrics-core</code> jars:</p>\n\n<pre><code>metrics-core:2.2.0 (used by `datastax`)\nmetrics-core:3.0.1 (used by `Titan`)\n</code></pre>\n\n<p>I am attaching all snaps to make it more clear. So what is the solution ????</p>\n\n<p>I am using </p>\n\n<p><code>jdk1.7</code>\n<code>cassandra-driver-core-1.0.4</code>\n<code>titan-0.4.4</code>\n<code>cassandra-1.2.2</code>\n<code>tomcat-7.0.34</code></p>\n\n<p><img src=\"https://i.stack.imgur.com/wE4jA.png\" alt=\"enter image description here\"><img src=\"https://i.stack.imgur.com/w2rUN.png\" alt=\"enter image description here\"><img src=\"https://i.stack.imgur.com/IunsF.png\" alt=\"enter image description here\"><img src=\"https://i.stack.imgur.com/GFjUt.png\" alt=\"enter image description here\"></p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1663670521,"post_id":73785290,"comment_id":130289481,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."},{"owner":{"account_id":26389574,"reputation":1,"user_id":20041618,"display_name":"Sandy"},"score":0,"creation_date":1663672836,"post_id":73785290,"comment_id":130290219,"body_markdown":"The problem is my rest service is giving me Request time out while my service is able to complete the task in backend.","body":"The problem is my rest service is giving me Request time out while my service is able to complete the task in backend."},{"owner":{"account_id":18824736,"reputation":241,"user_id":13729933,"display_name":"Zabon"},"score":0,"creation_date":1663672953,"post_id":73785290,"comment_id":130290261,"body_markdown":"Can you show your controller/service please ?","body":"Can you show your controller/service please ?"},{"owner":{"account_id":26389574,"reputation":1,"user_id":20041618,"display_name":"Sandy"},"score":0,"creation_date":1663674036,"post_id":73785290,"comment_id":130290655,"body_markdown":"It is a kind of sample rest controller and the service has ThreadPoolExecutor. and in the tasks, it calls some third-party service.","body":"It is a kind of sample rest controller and the service has ThreadPoolExecutor. and in the tasks, it calls some third-party service."},{"owner":{"account_id":26389574,"reputation":1,"user_id":20041618,"display_name":"Sandy"},"score":0,"creation_date":1663674089,"post_id":73785290,"comment_id":130290676,"body_markdown":"Due to the Company policy, I can&#39;t write code here.","body":"Due to the Company policy, I can&#39;t write code here."},{"owner":{"account_id":26389574,"reputation":1,"user_id":20041618,"display_name":"Sandy"},"score":0,"creation_date":1663674130,"post_id":73785290,"comment_id":130290693,"body_markdown":"In Service we have code like the below:","body":"In Service we have code like the below:"},{"owner":{"account_id":26389574,"reputation":1,"user_id":20041618,"display_name":"Sandy"},"score":0,"creation_date":1663674187,"post_id":73785290,"comment_id":130290719,"body_markdown":"ExectorService ecs= new ThreadPoolExcecutor()","body":"ExectorService ecs= new ThreadPoolExcecutor()"},{"owner":{"account_id":26389574,"reputation":1,"user_id":20041618,"display_name":"Sandy"},"score":0,"creation_date":1663674672,"post_id":73785290,"comment_id":130290899,"body_markdown":"int nt= Runtime.getRuntime().availableprocessors();\nExectorService ecs= new ThreadPoolExcecutor(nt, 20, 0, TimeUnit.Seconds, new ArrayBlockingQueue&lt;&gt;(2000), new ThreadPoolExecutor().AbortPolicy());\nList&lt;Future&lt;String&gt;&gt; list=ecs.invokeAll(tasks());\n\nreturn list.stream().filter(Future::isDone).map(future-&gt; future.get()).collect(Collectors.toList());","body":"int nt= Runtime.getRuntime().availableprocessors(); ExectorService ecs= new ThreadPoolExcecutor(nt, 20, 0, TimeUnit.Seconds, new ArrayBlockingQueue&lt;&gt;(2000), new ThreadPoolExecutor().AbortPolicy()); List&lt;Future&lt;String&gt;&gt; list=ecs.invokeAll(tasks());  return list.stream().filter(Future::isDone).map(future-&gt; future.get()).collect(Collectors.toList());"}],"owner":{"account_id":26389574,"reputation":1,"user_id":20041618,"display_name":"Sandy"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":161,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1663670727,"creation_date":1663669977,"question_id":73785290,"body_markdown":"I have an endpoint in the Spring boot application which is deployed in the AWS(ECS) and that endpoint processes file upload. When I am hitting uploading file using this endpoint it gives me 503 in 30s. While service runs and completes the upload.\r\n\r\nHow to fix this 503 issue?","title":"503- Request Timeout from Spring Boot application","body":"<p>I have an endpoint in the Spring boot application which is deployed in the AWS(ECS) and that endpoint processes file upload. When I am hitting uploading file using this endpoint it gives me 503 in 30s. While service runs and completes the upload.</p>\n<p>How to fix this 503 issue?</p>\n"},{"tags":["java","multithreading","cassandra","datastax-java-driver"],"answers":[{"tags":[],"owner":{"account_id":1161264,"reputation":19715,"user_id":1140716,"accept_rate":75,"display_name":"Carlo Bertuccini"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1406531380,"creation_date":1406531380,"answer_id":24990095,"question_id":24989594,"body_markdown":"`executeAsync()` creates a separate thread for the execution of the statement and immediately returns the control to caller -- a `Future&lt;ResultSet&gt;` will have your result. When working with this approach you won&#39;t know if any exception occurred until you&#39;re inside the `Future`.\r\n\r\nIn Cassandra you don&#39;t have to set anything. Just keep under control the thread-number within your application and initialize properly the Java Driver providing a &lt;a href=&quot;http://www.datastax.com/drivers/java/2.0/com/datastax/driver/core/PoolingOptions.html&quot;&gt;PoolingOptions&lt;/a&gt; object that match your needs.\r\n\r\nHTH, Carlo","title":"Multi Threading with datastax java driver 2.0","body":"<p><code>executeAsync()</code> creates a separate thread for the execution of the statement and immediately returns the control to caller -- a <code>Future&lt;ResultSet&gt;</code> will have your result. When working with this approach you won't know if any exception occurred until you're inside the <code>Future</code>.</p>\n\n<p>In Cassandra you don't have to set anything. Just keep under control the thread-number within your application and initialize properly the Java Driver providing a <a href=\"http://www.datastax.com/drivers/java/2.0/com/datastax/driver/core/PoolingOptions.html\" rel=\"nofollow\">PoolingOptions</a> object that match your needs.</p>\n\n<p>HTH, Carlo</p>\n"},{"tags":[],"owner":{"account_id":4661214,"reputation":2312,"user_id":3775443,"display_name":"Olivier Michallat"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1406624509,"creation_date":1406569532,"answer_id":25001119,"question_id":24989594,"body_markdown":"The driver is safe for multi-threaded use. What you will typically do is build your `Cluster` and get a `Session` instance during application startup, and then share the `Session` among all threads.\r\n\r\nHow you handle multi-threading is specific to your code. I don&#39;t know SQS either, but I imagine you&#39;d either have multiple consumers that poll from the queue and process the messages themselves, or maybe dispatch the messages to a pool of workers.\r\n\r\nRegarding `executeAsync`, the returned `ResultSetFuture` implements Guava&#39;s `ListenableFuture`, so you can register a success callback with `addListener`. But you&#39;ll have to provide an `Executor` to run that callback on (I don&#39;t recommend `MoreExecutors#sameThreadExecutor` as mentioned in the Javadoc, because your callback would end up running on one of the driver&#39;s I/O threads).\r\n\r\nAs mentioned by Carlo, a simple approach is to use the synchronous `execute`, and have your worker block until it gets a response from Cassandra, and then acknowledge the message.","title":"Multi Threading with datastax java driver 2.0","body":"<p>The driver is safe for multi-threaded use. What you will typically do is build your <code>Cluster</code> and get a <code>Session</code> instance during application startup, and then share the <code>Session</code> among all threads.</p>\n\n<p>How you handle multi-threading is specific to your code. I don't know SQS either, but I imagine you'd either have multiple consumers that poll from the queue and process the messages themselves, or maybe dispatch the messages to a pool of workers.</p>\n\n<p>Regarding <code>executeAsync</code>, the returned <code>ResultSetFuture</code> implements Guava's <code>ListenableFuture</code>, so you can register a success callback with <code>addListener</code>. But you'll have to provide an <code>Executor</code> to run that callback on (I don't recommend <code>MoreExecutors#sameThreadExecutor</code> as mentioned in the Javadoc, because your callback would end up running on one of the driver's I/O threads).</p>\n\n<p>As mentioned by Carlo, a simple approach is to use the synchronous <code>execute</code>, and have your worker block until it gets a response from Cassandra, and then acknowledge the message.</p>\n"},{"tags":[],"owner":{"account_id":8907586,"reputation":142,"user_id":6648940,"display_name":"Nikita Mantri"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1477465228,"creation_date":1477465228,"answer_id":40255701,"question_id":24989594,"body_markdown":"If you are executing the query in multithreading environment, then make sure you wait for the executeAsync(statement) to complete,\r\nsession.executeAsync(statement) will return immediately, it does not guarantee whether the query is valid or submitted successfully. So if you&#39;re using threadpool then always use\r\n \r\n    ResultSetFuture future = session.executeAsync(statement);\r\n    future.getUninterruptibly();\r\n\r\nThis will wait for the query to be submitted and will not consume memory.","title":"Multi Threading with datastax java driver 2.0","body":"<p>If you are executing the query in multithreading environment, then make sure you wait for the executeAsync(statement) to complete,\nsession.executeAsync(statement) will return immediately, it does not guarantee whether the query is valid or submitted successfully. So if you're using threadpool then always use</p>\n\n<pre><code>ResultSetFuture future = session.executeAsync(statement);\nfuture.getUninterruptibly();\n</code></pre>\n\n<p>This will wait for the query to be submitted and will not consume memory.</p>\n"}],"owner":{"account_id":4464089,"reputation":105,"user_id":3632180,"accept_rate":38,"display_name":"user3632180"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3067,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1663670699,"creation_date":1406529204,"question_id":24989594,"body_markdown":"My Data Model is based on time series(inserts feeds from various sources in cassandra CFs.) Can anyone suggest how to do inserts in Multi Threading.? Is executing query with executeAsync method similar to multi threading ? Is there any property of cassandra.yaml which I need to set to achieve Multi Threading ? Or any other prerequisites.","title":"Multi Threading with datastax java driver 2.0","body":"<p>My Data Model is based on time series(inserts feeds from various sources in cassandra CFs.) Can anyone suggest how to do inserts in Multi Threading.? Is executing query with executeAsync method similar to multi threading ? Is there any property of cassandra.yaml which I need to set to achieve Multi Threading ? Or any other prerequisites.</p>\n"},{"tags":["java","maven","pom.xml"],"answers":[{"tags":[],"owner":{"account_id":1713214,"reputation":13643,"user_id":1570834,"display_name":"DB5"},"down_vote_count":0,"up_vote_count":11,"is_accepted":true,"score":11,"last_activity_date":1386336856,"creation_date":1386336856,"answer_id":20425229,"question_id":20424245,"body_markdown":"The problem is to do with your project structure and how you have defined the `parent` in the child poms. \r\n\r\nYour child modules are actually in folders that are one level up from where your parent pom resides rather than in the same level (judging from `&lt;module&gt;../example-business&lt;/module&gt;`). When maven tries to build the child modules it can not find the parent pom as it is not available in the maven repository (it is currently in the process of building it so it has not yet been uploaded).\r\n\r\nTo fix this you simply need to change the `parent` definition in the child poms to define a real `relativePath` to the location of the parent pom so that maven can find it.  So change it to be something like the following:\r\n\r\n&lt;!-- language:lang-xml --&gt;\r\n\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;com.example&lt;/groupId&gt;\r\n        &lt;artifactId&gt;example-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n        &lt;relativePath&gt;../name-of-folder-containing-parent-pom&lt;/relativePath&gt;\r\n    &lt;/parent&gt;\r\n\r\nObviously you&#39;ll need to change `name-of-folder-containing-parent-pom` to be whatever the folder is.","title":"I get &quot;The build could not read 1 project&quot; in maven build because undefined versions","body":"<p>The problem is to do with your project structure and how you have defined the <code>parent</code> in the child poms. </p>\n\n<p>Your child modules are actually in folders that are one level up from where your parent pom resides rather than in the same level (judging from <code>&lt;module&gt;../example-business&lt;/module&gt;</code>). When maven tries to build the child modules it can not find the parent pom as it is not available in the maven repository (it is currently in the process of building it so it has not yet been uploaded).</p>\n\n<p>To fix this you simply need to change the <code>parent</code> definition in the child poms to define a real <code>relativePath</code> to the location of the parent pom so that maven can find it.  So change it to be something like the following:</p>\n\n\n\n<pre><code>&lt;parent&gt;\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;example-parent&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;relativePath&gt;../name-of-folder-containing-parent-pom&lt;/relativePath&gt;\n&lt;/parent&gt;\n</code></pre>\n\n<p>Obviously you'll need to change <code>name-of-folder-containing-parent-pom</code> to be whatever the folder is.</p>\n"},{"tags":[],"owner":{"account_id":7304266,"reputation":561,"user_id":5565746,"display_name":"Vineela Thonupunuri"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1564170323,"creation_date":1564170323,"answer_id":57226202,"question_id":20424245,"body_markdown":"Check why parent dependency is not getting solved in your local. \r\nYou might be missing something in settings.xml which resides in c:Users/name/.m2\r\nCheck if the credentials are correct and you have added all the artifactory links in case if they are not public. ","title":"I get &quot;The build could not read 1 project&quot; in maven build because undefined versions","body":"<p>Check why parent dependency is not getting solved in your local. \nYou might be missing something in settings.xml which resides in c:Users/name/.m2\nCheck if the credentials are correct and you have added all the artifactory links in case if they are not public. </p>\n"},{"tags":[],"owner":{"account_id":1841986,"reputation":580,"user_id":1671221,"display_name":"Manikandan Periyasamy"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1584965476,"creation_date":1584965476,"answer_id":60813329,"question_id":20424245,"body_markdown":"I too had similar issue and is solved by adding missed close tag below\r\n\r\n    &lt;dependency&gt;\r\n\t&lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;commons-jexl&lt;/artifactId&gt;\r\n\t&lt;version&gt;2.1.1&lt;/version&gt;\r\n    &lt;dependency&gt;\r\n\r\nSame resolved as below:\r\n\r\n    &lt;dependency&gt;\r\n    &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n    &lt;artifactId&gt;commons-jexl&lt;/artifactId&gt;\r\n    &lt;version&gt;2.1.1&lt;/version&gt;\r\n    &lt;/dependency&gt;","title":"I get &quot;The build could not read 1 project&quot; in maven build because undefined versions","body":"<p>I too had similar issue and is solved by adding missed close tag below</p>\n\n<pre><code>&lt;dependency&gt;\n&lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n&lt;artifactId&gt;commons-jexl&lt;/artifactId&gt;\n&lt;version&gt;2.1.1&lt;/version&gt;\n&lt;dependency&gt;\n</code></pre>\n\n<p>Same resolved as below:</p>\n\n<pre><code>&lt;dependency&gt;\n&lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n&lt;artifactId&gt;commons-jexl&lt;/artifactId&gt;\n&lt;version&gt;2.1.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8625831,"reputation":720,"user_id":6459098,"display_name":"U_R_Naveen UR_Naveen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663670478,"creation_date":1663670478,"answer_id":73785386,"question_id":20424245,"body_markdown":"I had same issue, Please check actual folder name in file explorer it should match what u defined as module in pom. eclipse might be showing project name differently than actual project name in explorer.","title":"I get &quot;The build could not read 1 project&quot; in maven build because undefined versions","body":"<p>I had same issue, Please check actual folder name in file explorer it should match what u defined as module in pom. eclipse might be showing project name differently than actual project name in explorer.</p>\n"}],"owner":{"display_name":"user2979186"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43079,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"accepted_answer_id":20425229,"answer_count":4,"score":12,"last_activity_date":1663670478,"creation_date":1386333844,"question_id":20424245,"body_markdown":"I&#39;ve a parent-pom and a integration-pom:  \r\n*integration pom*\r\n\r\n&lt;!-- language: lang-xml --&gt;\r\n\r\n    &lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.json&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;json&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;commons-httpclient&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;commons-httpclient&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t\r\n\t\t&lt;dependency&gt;\r\n            &lt;groupId&gt;com.example&lt;/groupId&gt;\r\n            &lt;artifactId&gt;example-model&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\t\t\r\n\t&lt;/dependencies&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;com.example&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;example-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;/parent&gt;\r\n*parent pom*\r\n\r\n&lt;!-- language: lang-xml --&gt;\r\n\r\n    &lt;modules&gt;\r\n\t\t&lt;module&gt;../example-business&lt;/module&gt;\r\n\t\t&lt;module&gt;../example-integration&lt;/module&gt;\r\n\t\t&lt;module&gt;../example-model&lt;/module&gt;\r\n\t&lt;/modules&gt;\r\n    &lt;dependencyManagement&gt;\r\n\t\t&lt;dependencies&gt;\r\n\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;org.json&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;json&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;20131018&lt;/version&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;commons-httpclient&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;commons-httpclient&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;3.1&lt;/version&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;com.example&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;example-model&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;${project.version}&lt;/version&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;/dependencies&gt;\r\n\t&lt;/dependencyManagement&gt;\r\n\r\nNow when I will do a clean install on the parent, I get the following error:\r\n\r\n    [INFO] Scanning for projects...\r\n    Downloading: http://www.example.com/content/groups/mirror/com/example/example-parent/0.0.1-SNAPSHOT/maven-metadata.xml\r\n    [ERROR] The build could not read 1 project -&gt; [Help 1]\r\n    [ERROR]   \r\n    [ERROR]   The project com.example:example-integration:0.0.1-SNAPSHOT (D:\\dev\\workspaces\\example-git\\example\\example-integration\\pom.xml) has 3 errors\r\n    [ERROR]     &#39;dependencies.dependency.version&#39; for org.json:json:jar is missing. @ line 22, column 15\r\n    [ERROR]     &#39;dependencies.dependency.version&#39; for commons-httpclient:commons-httpclient:jar is missing. @ line 27, column 15\r\n    [ERROR]     &#39;dependencies.dependency.version&#39; for com.example:example-model:jar is missing. @ line 32, column 15\r\n\r\nBut when I take a look to the Effective POM of the integration pom, there are the version written.  \r\nSo why I can&#39;t build it?\r\n\r\n\r\n----------\r\nEdit:  \r\nHere is a snip of the *EFFECTIVE POM* view:\r\n\r\n    &lt;dependencyManagement&gt;\r\n        &lt;dependencies&gt;\r\n          &lt;dependency&gt;\r\n            &lt;groupId&gt;org.json&lt;/groupId&gt;\r\n            &lt;artifactId&gt;json&lt;/artifactId&gt;\r\n            &lt;version&gt;20131018&lt;/version&gt;\r\n          &lt;/dependency&gt;\r\n          &lt;dependency&gt;\r\n            &lt;groupId&gt;commons-httpclient&lt;/groupId&gt;\r\n            &lt;artifactId&gt;commons-httpclient&lt;/artifactId&gt;\r\n            &lt;version&gt;3.1&lt;/version&gt;\r\n          &lt;/dependency&gt;\r\n          &lt;dependency&gt;\r\n            &lt;groupId&gt;com.example&lt;/groupId&gt;\r\n            &lt;artifactId&gt;example-model&lt;/artifactId&gt;\r\n            &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n          &lt;/dependency&gt;\r\n          &lt;dependency&gt;\r\n            &lt;groupId&gt;com.example&lt;/groupId&gt;\r\n            &lt;artifactId&gt;example-integration&lt;/artifactId&gt;\r\n            &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n          &lt;/dependency&gt;\r\n          &lt;dependency&gt;\r\n            &lt;groupId&gt;com.example&lt;/groupId&gt;\r\n            &lt;artifactId&gt;example-business&lt;/artifactId&gt;\r\n            &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n          &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n      &lt;/dependencyManagement&gt;\r\n      &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.json&lt;/groupId&gt;\r\n          &lt;artifactId&gt;json&lt;/artifactId&gt;\r\n          &lt;version&gt;20131018&lt;/version&gt;\r\n          &lt;scope&gt;compile&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;commons-httpclient&lt;/groupId&gt;\r\n          &lt;artifactId&gt;commons-httpclient&lt;/artifactId&gt;\r\n          &lt;version&gt;3.1&lt;/version&gt;\r\n          &lt;scope&gt;compile&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;com.example&lt;/groupId&gt;\r\n          &lt;artifactId&gt;example-model&lt;/artifactId&gt;\r\n          &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n          &lt;scope&gt;compile&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;com.example&lt;/groupId&gt;\r\n          &lt;artifactId&gt;example-business&lt;/artifactId&gt;\r\n          &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n          &lt;scope&gt;compile&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n      &lt;/dependencies&gt;","title":"I get &quot;The build could not read 1 project&quot; in maven build because undefined versions","body":"<p>I've a parent-pom and a integration-pom:<br>\n<em>integration pom</em></p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.json&lt;/groupId&gt;\n        &lt;artifactId&gt;json&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;commons-httpclient&lt;/groupId&gt;\n        &lt;artifactId&gt;commons-httpclient&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.example&lt;/groupId&gt;\n        &lt;artifactId&gt;example-model&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n&lt;/dependencies&gt;\n&lt;parent&gt;\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;example-parent&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n&lt;/parent&gt;\n</code></pre>\n\n<p><em>parent pom</em></p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;modules&gt;\n    &lt;module&gt;../example-business&lt;/module&gt;\n    &lt;module&gt;../example-integration&lt;/module&gt;\n    &lt;module&gt;../example-model&lt;/module&gt;\n&lt;/modules&gt;\n&lt;dependencyManagement&gt;\n    &lt;dependencies&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.json&lt;/groupId&gt;\n            &lt;artifactId&gt;json&lt;/artifactId&gt;\n            &lt;version&gt;20131018&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;commons-httpclient&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-httpclient&lt;/artifactId&gt;\n            &lt;version&gt;3.1&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.example&lt;/groupId&gt;\n            &lt;artifactId&gt;example-model&lt;/artifactId&gt;\n            &lt;version&gt;${project.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n\n    &lt;/dependencies&gt;\n&lt;/dependencyManagement&gt;\n</code></pre>\n\n<p>Now when I will do a clean install on the parent, I get the following error:</p>\n\n<pre><code>[INFO] Scanning for projects...\nDownloading: http://www.example.com/content/groups/mirror/com/example/example-parent/0.0.1-SNAPSHOT/maven-metadata.xml\n[ERROR] The build could not read 1 project -&gt; [Help 1]\n[ERROR]   \n[ERROR]   The project com.example:example-integration:0.0.1-SNAPSHOT (D:\\dev\\workspaces\\example-git\\example\\example-integration\\pom.xml) has 3 errors\n[ERROR]     'dependencies.dependency.version' for org.json:json:jar is missing. @ line 22, column 15\n[ERROR]     'dependencies.dependency.version' for commons-httpclient:commons-httpclient:jar is missing. @ line 27, column 15\n[ERROR]     'dependencies.dependency.version' for com.example:example-model:jar is missing. @ line 32, column 15\n</code></pre>\n\n<p>But when I take a look to the Effective POM of the integration pom, there are the version written.<br>\nSo why I can't build it?</p>\n\n<hr>\n\n<p>Edit:<br>\nHere is a snip of the <em>EFFECTIVE POM</em> view:</p>\n\n<pre><code>&lt;dependencyManagement&gt;\n    &lt;dependencies&gt;\n      &lt;dependency&gt;\n        &lt;groupId&gt;org.json&lt;/groupId&gt;\n        &lt;artifactId&gt;json&lt;/artifactId&gt;\n        &lt;version&gt;20131018&lt;/version&gt;\n      &lt;/dependency&gt;\n      &lt;dependency&gt;\n        &lt;groupId&gt;commons-httpclient&lt;/groupId&gt;\n        &lt;artifactId&gt;commons-httpclient&lt;/artifactId&gt;\n        &lt;version&gt;3.1&lt;/version&gt;\n      &lt;/dependency&gt;\n      &lt;dependency&gt;\n        &lt;groupId&gt;com.example&lt;/groupId&gt;\n        &lt;artifactId&gt;example-model&lt;/artifactId&gt;\n        &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n      &lt;/dependency&gt;\n      &lt;dependency&gt;\n        &lt;groupId&gt;com.example&lt;/groupId&gt;\n        &lt;artifactId&gt;example-integration&lt;/artifactId&gt;\n        &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n      &lt;/dependency&gt;\n      &lt;dependency&gt;\n        &lt;groupId&gt;com.example&lt;/groupId&gt;\n        &lt;artifactId&gt;example-business&lt;/artifactId&gt;\n        &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n      &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n  &lt;/dependencyManagement&gt;\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.json&lt;/groupId&gt;\n      &lt;artifactId&gt;json&lt;/artifactId&gt;\n      &lt;version&gt;20131018&lt;/version&gt;\n      &lt;scope&gt;compile&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;commons-httpclient&lt;/groupId&gt;\n      &lt;artifactId&gt;commons-httpclient&lt;/artifactId&gt;\n      &lt;version&gt;3.1&lt;/version&gt;\n      &lt;scope&gt;compile&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;com.example&lt;/groupId&gt;\n      &lt;artifactId&gt;example-model&lt;/artifactId&gt;\n      &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n      &lt;scope&gt;compile&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;com.example&lt;/groupId&gt;\n      &lt;artifactId&gt;example-business&lt;/artifactId&gt;\n      &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n      &lt;scope&gt;compile&lt;/scope&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n</code></pre>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":285919,"reputation":43640,"user_id":584862,"accept_rate":93,"display_name":"mre"},"down_vote_count":1,"up_vote_count":3,"is_accepted":true,"score":2,"last_activity_date":1297437638,"creation_date":1297435526,"answer_id":4970303,"question_id":4970179,"body_markdown":"I&#39;d check out the two following classes: [CheckedInputStream][1] and [Checksum][2]. A checksum should be performed by the machine sending the packet, and the machine receiving the packet should also perform a checksum, and then compare values. At least that&#39;s how I&#39;ve seen it done..\r\n\r\nNote: checksum must be included in packet being sent across. Also, since you&#39;re checking if the data has been corrupted, [ByteArrayInputStream][3] may prove to be useful too. Here&#39;s an [example][4].\r\n\r\n\r\n  [1]: http://download.oracle.com/javase/6/docs/api/java/util/zip/CheckedInputStream.html\r\n  [2]: http://download.oracle.com/javase/6/docs/api/java/util/zip/Checksum.html\r\n  [3]: http://download.oracle.com/javase/6/docs/api/java/io/ByteArrayInputStream.html\r\n  [4]: http://www.roseindia.net/java/beginners/ChecksumByteArray.shtml","title":"Checksum in UDP Datagram Socket + java","body":"<p>I'd check out the two following classes: <a href=\"http://download.oracle.com/javase/6/docs/api/java/util/zip/CheckedInputStream.html\" rel=\"nofollow\">CheckedInputStream</a> and <a href=\"http://download.oracle.com/javase/6/docs/api/java/util/zip/Checksum.html\" rel=\"nofollow\">Checksum</a>. A checksum should be performed by the machine sending the packet, and the machine receiving the packet should also perform a checksum, and then compare values. At least that's how I've seen it done..</p>\n\n<p>Note: checksum must be included in packet being sent across. Also, since you're checking if the data has been corrupted, <a href=\"http://download.oracle.com/javase/6/docs/api/java/io/ByteArrayInputStream.html\" rel=\"nofollow\">ByteArrayInputStream</a> may prove to be useful too. Here's an <a href=\"http://www.roseindia.net/java/beginners/ChecksumByteArray.shtml\" rel=\"nofollow\">example</a>.</p>\n"},{"tags":[],"owner":{"account_id":54150,"reputation":2013,"user_id":161995,"accept_rate":100,"display_name":"Erik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1441185446,"creation_date":1297435820,"answer_id":4970362,"question_id":4970179,"body_markdown":"First you have to add the checksum to the udp message. I assume that the checksum has been put in front on the rest of the message and I assume that calcCheckSum can calculate the checksum.\r\n\r\n    import java.net.*;\r\n\r\n    DatagramSocket socket = new DatagramSocket();\r\n    byte[] buffer = new byte[256]; // some appropriate size\r\n    DatagramPacket packet = new DatagramPacket(buf, buf.length);\r\n\r\n    socket.receive(packet);\r\n    String checksum = new String(packet.getData(),0, &lt;some length&gt;);\r\n    boolean ok = calcCheckSum(checksum);","title":"Checksum in UDP Datagram Socket + java","body":"<p>First you have to add the checksum to the udp message. I assume that the checksum has been put in front on the rest of the message and I assume that calcCheckSum can calculate the checksum.</p>\n\n<pre><code>import java.net.*;\n\nDatagramSocket socket = new DatagramSocket();\nbyte[] buffer = new byte[256]; // some appropriate size\nDatagramPacket packet = new DatagramPacket(buf, buf.length);\n\nsocket.receive(packet);\nString checksum = new String(packet.getData(),0, &lt;some length&gt;);\nboolean ok = calcCheckSum(checksum);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":201997,"reputation":1987,"user_id":448779,"accept_rate":100,"display_name":"foo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663670454,"creation_date":1663670454,"answer_id":73785380,"question_id":4970179,"body_markdown":"The UDP header itself is short and of fixed size (8 bytes):\r\n\r\n| offset | size | contents |\r\n|--------|------|----------|\r\n| 0 | 16 bits | source port |\r\n| 2 | 16 bits | destination port |\r\n| 4 | 16 bits | length |\r\n| 6 | 16 bits | **checksum** |\r\n\r\nThe checksum algorithm is defined in [RFC 768][1].\r\n\r\nSo, talking of Java, the DatagramSocket/DatagramPackets should do the checksum calculation and checking.\r\n\r\nBut it appears they do not. I dug into the implementation classes which still are in com.sun. legacy packages, and they seem to ignore checksum entirely. No computing, no checking.\r\n\r\nThey also do not send an Exception or other notice to the user about a failure in the checksum. Thus, the answer to the original questions are:\r\n\r\n* Java JDK implementation does not handle the UDP checksum at all.\r\n* So, **no, in standard Java you cannot identify whether the UDP checksum is correct**.\r\n* You&#39;ll have to do your own checksumming in the packet payload *data* instead.\r\n\r\nAnd in the data, it is entirely up to you how you do that.\r\n\r\n  [1]: http://www.faqs.org/rfcs/rfc768.html","title":"Checksum in UDP Datagram Socket + java","body":"<p>The UDP header itself is short and of fixed size (8 bytes):</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>offset</th>\n<th>size</th>\n<th>contents</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>0</td>\n<td>16 bits</td>\n<td>source port</td>\n</tr>\n<tr>\n<td>2</td>\n<td>16 bits</td>\n<td>destination port</td>\n</tr>\n<tr>\n<td>4</td>\n<td>16 bits</td>\n<td>length</td>\n</tr>\n<tr>\n<td>6</td>\n<td>16 bits</td>\n<td><strong>checksum</strong></td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>The checksum algorithm is defined in <a href=\"http://www.faqs.org/rfcs/rfc768.html\" rel=\"nofollow noreferrer\">RFC 768</a>.</p>\n<p>So, talking of Java, the DatagramSocket/DatagramPackets should do the checksum calculation and checking.</p>\n<p>But it appears they do not. I dug into the implementation classes which still are in com.sun. legacy packages, and they seem to ignore checksum entirely. No computing, no checking.</p>\n<p>They also do not send an Exception or other notice to the user about a failure in the checksum. Thus, the answer to the original questions are:</p>\n<ul>\n<li>Java JDK implementation does not handle the UDP checksum at all.</li>\n<li>So, <strong>no, in standard Java you cannot identify whether the UDP checksum is correct</strong>.</li>\n<li>You'll have to do your own checksumming in the packet payload <em>data</em> instead.</li>\n</ul>\n<p>And in the data, it is entirely up to you how you do that.</p>\n"}],"owner":{"display_name":"user506710"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10958,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":4970303,"answer_count":3,"score":6,"last_activity_date":1663670454,"creation_date":1297434738,"question_id":4970179,"body_markdown":"It is my understanding that the UDP protocol does not define the action to be taken if the data gets corrupted ie the checksum fails. That is our application can make the packet to be retransmitted or let the packet be declared lost....\r\n\r\nWhile implementing Datagram Sockets in java I want to identify if the checksum is correct or not for some packet sent ....\r\n\r\nIs there any way in java to do so...\r\n\r\nBasically I want that I come to know that this packet has been corrupted while transmission and thus has to be retransmitted....\r\n\r\nThanks a lot","title":"Checksum in UDP Datagram Socket + java","body":"<p>It is my understanding that the UDP protocol does not define the action to be taken if the data gets corrupted ie the checksum fails. That is our application can make the packet to be retransmitted or let the packet be declared lost....</p>\n\n<p>While implementing Datagram Sockets in java I want to identify if the checksum is correct or not for some packet sent ....</p>\n\n<p>Is there any way in java to do so...</p>\n\n<p>Basically I want that I come to know that this packet has been corrupted while transmission and thus has to be retransmitted....</p>\n\n<p>Thanks a lot</p>\n"},{"tags":["java","breadth-first-search","hexagonal-tiles"],"comments":[{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":0,"creation_date":1663497239,"post_id":73761833,"comment_id":130249513,"body_markdown":"&quot;Sometimes the program crashes&quot; - for what reason?","body":"&quot;Sometimes the program crashes&quot; - for what reason?"},{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":1,"creation_date":1663670464,"post_id":73761833,"comment_id":130289459,"body_markdown":"&quot;Sometimes the program crashes&quot; - please include the exact exception message and stacktrace. Also prepare [minimal, reproducible example](https://stackoverflow.com/help/minimal-reproducible-example). Current code is not enough to reproduce your issue(it can&#39;t even compile).","body":"&quot;Sometimes the program crashes&quot; - please include the exact exception message and stacktrace. Also prepare <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal, reproducible example</a>. Current code is not enough to reproduce your issue(it can&#39;t even compile)."},{"owner":{"account_id":15115738,"reputation":194,"user_id":10908201,"display_name":"DL33"},"score":0,"creation_date":1663670558,"post_id":73761833,"comment_id":130289495,"body_markdown":"Have you tried using a debugger? It would probably help a lot","body":"Have you tried using a debugger? It would probably help a lot"},{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":0,"creation_date":1664061877,"post_id":73761833,"comment_id":130385961,"body_markdown":"There&#39;s a bit of redundancy in your code. But I don&#39;t see a logical flaw in the BFS implementation you&#39;ve provided.","body":"There&#39;s a bit of redundancy in your code. But I don&#39;t see a logical flaw in the BFS implementation you&#39;ve provided."},{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":2,"creation_date":1664064242,"post_id":73761833,"comment_id":130386205,"body_markdown":"The only assumption I could make: there might be an issue with `distanceFromTarget()` method. I see that it&#39;s calculating a hypotenuse of a right-angled triangle (that perfectly clear). But since your tiles are *hexagonal* (that&#39;s my interpretation of the class name `HexTile`), I&#39;ve no idea `row` and `col` could mean (because tiles are not rectangular).","body":"The only assumption I could make: there might be an issue with <code>distanceFromTarget()</code> method. I see that it&#39;s calculating a hypotenuse of a right-angled triangle (that perfectly clear). But since your tiles are <i>hexagonal</i> (that&#39;s my interpretation of the class name <code>HexTile</code>), I&#39;ve no idea <code>row</code> and <code>col</code> could mean (because tiles are not rectangular)."},{"owner":{"account_id":3885361,"reputation":263,"user_id":3216876,"accept_rate":50,"display_name":"Pedro Silva"},"score":0,"creation_date":1664234489,"post_id":73761833,"comment_id":130420203,"body_markdown":"It can still be squares with 6 faces (as in chess for example)","body":"It can still be squares with 6 faces (as in chess for example)"}],"owner":{"account_id":19726119,"reputation":77,"user_id":14442680,"display_name":"AlexandrosS"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":206,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"answer_count":0,"score":0,"last_activity_date":1663670237,"creation_date":1663495852,"question_id":73761833,"body_markdown":"I&#39;m trying to implement a bfs algorithm in Java,but it doesn&#39;t work as it should be.\r\n\r\nI&#39;ve made a game map comprised of HexTile objects(custom objects,similar to matrix elements). Each HexTile includes one adjacency list containing references to the elements that it&#39;s connected to, one function that returns those elements and one function that computes the distance between two HexTiles. The bfs algorithm is excecuted in another class called unit(units are placed in HexTiles) and finds every unit available in a given range from the room(currentTile). It then creates an ArrayList with the given units.\r\n```\r\nclass HexTile {\r\n\r\n  static final int MAX_NEIGHBOURS = 6;\r\n  private HexTile[] neighbours;\r\n\r\n  public HexTile[] getNeighbours() {\r\n    return this.neighbours;\r\n  }\r\n\r\n  public double distanceFromTarget(HexTile target) {\r\n    double distance = Math.sqrt(Math.pow((this.getRow() - target.getRow()), 2) + Math.pow((this.getCol() - target.getCol()), 2));\r\n    return distance;\r\n  }\r\n}\r\n```\r\n```\r\nclass Unit {\r\n\r\n  private ArrayList&lt;Unit&gt; unitsWithinRange = new ArrayList&lt;Unit&gt;();\r\n\r\n  private void findUnitsWithinRange(HexTile currentTile, int attackRange) {\r\n    Queue&lt;HexTile&gt; queue = new LinkedList&lt;&gt;();\r\n    ArrayList&lt;HexTile&gt; visited = new ArrayList&lt;HexTile&gt;();\r\n    queue.add(currentTile);\r\n    visited.add(currentTile);\r\n    while (!queue.isEmpty()) {\r\n      HexTile aux = queue.poll();\r\n      for (HexTile auxNeigh : aux.getNeighbours()) {\r\n        if (auxNeigh != null &amp;&amp; (!visited.contains(auxNeigh))) {\r\n\r\n          visited.add(auxNeigh);\r\n          queue.add(auxNeigh);\r\n        }\r\n      }\r\n      if (aux != null &amp;&amp; (currentTile.distanceFromTarget(aux) &lt;= attackRange)) {\r\n        Unit auxUnit = aux.getUnitOnTile();\r\n        this.unitsWithinRange.add(auxUnit);\r\n      }\r\n\r\n    }\r\n    queue.clear();\r\n    visited.clear();\r\n  }\r\n}\r\n```\r\n\r\nWhat happens whenever findUnitsWithinRange is excecuted is that it return a list of units,but the units that are in range 1 are not included(direct neighbours to root).Sometimes the program crashes,because units need to be able to know if there are any nearby units,to excecute some other functions.Any advice would be appreciated!\r\n      ","title":"Bfs game Map implementation in java","body":"<p>I'm trying to implement a bfs algorithm in Java,but it doesn't work as it should be.</p>\n<p>I've made a game map comprised of HexTile objects(custom objects,similar to matrix elements). Each HexTile includes one adjacency list containing references to the elements that it's connected to, one function that returns those elements and one function that computes the distance between two HexTiles. The bfs algorithm is excecuted in another class called unit(units are placed in HexTiles) and finds every unit available in a given range from the room(currentTile). It then creates an ArrayList with the given units.</p>\n<pre><code>class HexTile {\n\n  static final int MAX_NEIGHBOURS = 6;\n  private HexTile[] neighbours;\n\n  public HexTile[] getNeighbours() {\n    return this.neighbours;\n  }\n\n  public double distanceFromTarget(HexTile target) {\n    double distance = Math.sqrt(Math.pow((this.getRow() - target.getRow()), 2) + Math.pow((this.getCol() - target.getCol()), 2));\n    return distance;\n  }\n}\n</code></pre>\n<pre><code>class Unit {\n\n  private ArrayList&lt;Unit&gt; unitsWithinRange = new ArrayList&lt;Unit&gt;();\n\n  private void findUnitsWithinRange(HexTile currentTile, int attackRange) {\n    Queue&lt;HexTile&gt; queue = new LinkedList&lt;&gt;();\n    ArrayList&lt;HexTile&gt; visited = new ArrayList&lt;HexTile&gt;();\n    queue.add(currentTile);\n    visited.add(currentTile);\n    while (!queue.isEmpty()) {\n      HexTile aux = queue.poll();\n      for (HexTile auxNeigh : aux.getNeighbours()) {\n        if (auxNeigh != null &amp;&amp; (!visited.contains(auxNeigh))) {\n\n          visited.add(auxNeigh);\n          queue.add(auxNeigh);\n        }\n      }\n      if (aux != null &amp;&amp; (currentTile.distanceFromTarget(aux) &lt;= attackRange)) {\n        Unit auxUnit = aux.getUnitOnTile();\n        this.unitsWithinRange.add(auxUnit);\n      }\n\n    }\n    queue.clear();\n    visited.clear();\n  }\n}\n</code></pre>\n<p>What happens whenever findUnitsWithinRange is excecuted is that it return a list of units,but the units that are in range 1 are not included(direct neighbours to root).Sometimes the program crashes,because units need to be able to know if there are any nearby units,to excecute some other functions.Any advice would be appreciated!</p>\n"},{"tags":["java","java-calendar"],"comments":[{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":3,"creation_date":1663187179,"post_id":73722802,"comment_id":130183133,"body_markdown":"The `LocalDate` class has a static method called `ofYearDay` that does this calculation.","body":"The <code>LocalDate</code> class has a static method called <code>ofYearDay</code> that does this calculation."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1663231223,"post_id":73722802,"comment_id":130191899,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":26338766,"reputation":7,"user_id":19998216,"display_name":"Alna Rubcova"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663669522,"creation_date":1663669522,"answer_id":73785207,"question_id":73722802,"body_markdown":"public static void main(String[] args) {\r\n\t\tSystem.out.println(&quot;Ievadiet skaitli no 1 lidz 365:&quot;);\r\n\t\t\t\t\t\t\r\n\t\t\t\tScanner myScanner= new Scanner(System.in);\r\n\t\t\t\t\t\t\r\n\t\t\t\tshort skaitlis;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\tif(skaitlis&gt;0 &amp;&amp; skaitlis&lt;=31) {\t\t\r\n\t\t\t\t\t\tSystem.out.println(&quot;Datums:&quot; + skaitlis + &quot;. janvris&quot;);\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\telse if(skaitlis&gt;31 &amp;&amp; skaitlis&lt;=59) {\t\t\t\r\n\t\t\t\t\t\tskaitlis=(short) ( skaitlis - 31);\t\t\t\t\r\n\t\t\t\t\t\tSystem.out.println(&quot;Datums: &quot;+ skaitlis + &quot;. februris&quot;);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\telse if(skaitlis&gt;59 &amp;&amp; skaitlis&lt;=90) {\r\n\t\t\t\t\t\tskaitlis=(short) ( skaitlis -59 );\r\n\t\t\t\t\t\tSystem.out.println(&quot;Datums: &quot;+ skaitlis + &quot;. marts&quot;);\r\n\t\t\t\t\t}\t\t\t\r\n\t\t\t\t\telse if(skaitlis&gt;90 &amp;&amp; skaitlis&lt;=120) {\t\t\t\r\n\t\t\t\t\t\tskaitlis=(short) ( skaitlis - 90);\r\n\t\t\t\t\t\tSystem.out.println(&quot;Datums: &quot;+ skaitlis + &quot;. aprlis&quot;);\t\t\t\r\n\t\t\t\t\t}\t\t\t\r\n\t\t\t\t\telse if(skaitlis&gt;120 &amp;&amp; skaitlis&lt;=151) {\r\n\t\t\t\t\t\tskaitlis=(short) ( skaitlis - 120);\r\n\t\t\t\t\t\tSystem.out.println(&quot;Datums: &quot;+ skaitlis + &quot;. maijs&quot;);\t\t\r\n\t\t\t\t\t}\t\t\t\t\r\n\t\t\t\t\telse if(skaitlis&gt;151 &amp;&amp; skaitlis&lt;=181) {\r\n\t\t\t\t\t\tskaitlis=(short) ( skaitlis - 151);\r\n\t\t\t\t\t\tSystem.out.println(&quot;Datums: &quot;+ skaitlis + &quot;. jnijs&quot;);\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(skaitlis&gt;181 &amp;&amp; skaitlis&lt;=212) {\r\n\t\t\t\t\t\tskaitlis=(short) ( skaitlis - 181);\r\n\t\t\t\t\t\tSystem.out.println(&quot;Datums: &quot;+ skaitlis + &quot;. jlijs&quot;);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(skaitlis&gt;212 &amp;&amp; skaitlis&lt;=243) {\r\n\t\t\t\t\t\tskaitlis=(short) ( skaitlis - 212);\r\n\t\t\t\t\t\tSystem.out.println(&quot;Datums: &quot;+ skaitlis + &quot;. augusts&quot;);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(skaitlis&gt;243 &amp;&amp; skaitlis&lt;=273) {\r\n\t\t\t\t\t\tskaitlis=(short) ( skaitlis - 243);\r\n\t\t\t\t\t\tSystem.out.println(&quot;Datums: &quot;+ skaitlis + &quot;. septembris&quot;);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(skaitlis&gt;273 &amp;&amp; skaitlis&lt;=304) {\r\n\t\t\t\t\t\tskaitlis=(short) ( skaitlis - 273);\r\n\t\t\t\t\t\tSystem.out.println(&quot;Datums: &quot;+ skaitlis + &quot;. oktobris&quot;);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(skaitlis&gt;304 &amp;&amp; skaitlis&lt;=334) {\r\n\t\t\t\t\t\tskaitlis=(short) ( skaitlis - 304);\r\n\t\t\t\t\t\tSystem.out.println(&quot;Datums: &quot;+ skaitlis + &quot;. novembris&quot;);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(skaitlis&gt;334 &amp;&amp; skaitlis&lt;=365) {\r\n\t\t\t\t\t\tskaitlis=(short) ( skaitlis - 334);\r\n\t\t\t\t\t\tSystem.out.println(&quot;Datums: &quot;+ skaitlis + &quot;. decembris&quot;);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\tSystem.out.println(&quot;incorekt&quot;);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\r\n\t}\r\n\r\n\r\n","title":"program that asks the user to enter the day number of the year, and the program returns the date by specifying the month and day","body":"<p>public static void main(String[] args) {\nSystem.out.println(&quot;Ievadiet skaitli no 1 lidz 365:&quot;);</p>\n<pre><code>            Scanner myScanner= new Scanner(System.in);\n                    \n            short skaitlis;\n                    \n                if(skaitlis&gt;0 &amp;&amp; skaitlis&lt;=31) {        \n                    System.out.println(&quot;Datums:&quot; + skaitlis + &quot;. janvris&quot;);    \n                }\n                        \n                else if(skaitlis&gt;31 &amp;&amp; skaitlis&lt;=59) {          \n                    skaitlis=(short) ( skaitlis - 31);              \n                    System.out.println(&quot;Datums: &quot;+ skaitlis + &quot;. februris&quot;);\n                }\n                        \n                else if(skaitlis&gt;59 &amp;&amp; skaitlis&lt;=90) {\n                    skaitlis=(short) ( skaitlis -59 );\n                    System.out.println(&quot;Datums: &quot;+ skaitlis + &quot;. marts&quot;);\n                }           \n                else if(skaitlis&gt;90 &amp;&amp; skaitlis&lt;=120) {         \n                    skaitlis=(short) ( skaitlis - 90);\n                    System.out.println(&quot;Datums: &quot;+ skaitlis + &quot;. aprlis&quot;);         \n                }           \n                else if(skaitlis&gt;120 &amp;&amp; skaitlis&lt;=151) {\n                    skaitlis=(short) ( skaitlis - 120);\n                    System.out.println(&quot;Datums: &quot;+ skaitlis + &quot;. maijs&quot;);       \n                }               \n                else if(skaitlis&gt;151 &amp;&amp; skaitlis&lt;=181) {\n                    skaitlis=(short) ( skaitlis - 151);\n                    System.out.println(&quot;Datums: &quot;+ skaitlis + &quot;. jnijs&quot;);      \n                }\n                else if(skaitlis&gt;181 &amp;&amp; skaitlis&lt;=212) {\n                    skaitlis=(short) ( skaitlis - 181);\n                    System.out.println(&quot;Datums: &quot;+ skaitlis + &quot;. jlijs&quot;);\n                }\n                else if(skaitlis&gt;212 &amp;&amp; skaitlis&lt;=243) {\n                    skaitlis=(short) ( skaitlis - 212);\n                    System.out.println(&quot;Datums: &quot;+ skaitlis + &quot;. augusts&quot;);\n                }\n                else if(skaitlis&gt;243 &amp;&amp; skaitlis&lt;=273) {\n                    skaitlis=(short) ( skaitlis - 243);\n                    System.out.println(&quot;Datums: &quot;+ skaitlis + &quot;. septembris&quot;);\n                }\n                else if(skaitlis&gt;273 &amp;&amp; skaitlis&lt;=304) {\n                    skaitlis=(short) ( skaitlis - 273);\n                    System.out.println(&quot;Datums: &quot;+ skaitlis + &quot;. oktobris&quot;);\n                }\n                else if(skaitlis&gt;304 &amp;&amp; skaitlis&lt;=334) {\n                    skaitlis=(short) ( skaitlis - 304);\n                    System.out.println(&quot;Datums: &quot;+ skaitlis + &quot;. novembris&quot;);\n                }\n                else if(skaitlis&gt;334 &amp;&amp; skaitlis&lt;=365) {\n                    skaitlis=(short) ( skaitlis - 334);\n                    System.out.println(&quot;Datums: &quot;+ skaitlis + &quot;. decembris&quot;);\n                }\n                else {\n        System.out.println(&quot;incorekt&quot;);\n                }\n                    \n            \n}\n</code></pre>\n"}],"owner":{"account_id":26338766,"reputation":7,"user_id":19998216,"display_name":"Alna Rubcova"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":4,"up_vote_count":1,"answer_count":1,"score":-3,"last_activity_date":1663669522,"creation_date":1663187053,"question_id":73722802,"body_markdown":"How i can write a program that asks the user to enter the day number of the year (assuming there are 365 days in the year) and the program returns the date by specifying the month and day. For instance,\r\n\r\nEnter a number from 1 to 365: 100\r\n\r\nDate: April 10","title":"program that asks the user to enter the day number of the year, and the program returns the date by specifying the month and day","body":"<p>How i can write a program that asks the user to enter the day number of the year (assuming there are 365 days in the year) and the program returns the date by specifying the month and day. For instance,</p>\n<p>Enter a number from 1 to 365: 100</p>\n<p>Date: April 10</p>\n"},{"tags":["java","redis"],"answers":[{"tags":[],"owner":{"account_id":3106126,"reputation":31241,"user_id":2628868,"accept_rate":84,"display_name":"Dolphin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1620746228,"creation_date":1620746228,"answer_id":67489646,"question_id":67484542,"body_markdown":"I tried to using jedis not using lettuce solve this problem.\r\n\r\n\r\nstep 1: exclude lettuce:\r\n\r\n\r\n    api (&quot;org.springframework.boot:spring-boot-starter-data-redis&quot;) {\r\n                exclude group: &quot;io.lettuce&quot;, module: &quot;lettuce-core&quot;\r\n                exclude group: &quot;org.springframework.data&quot;, module: &quot;spring-data-redis&quot;\r\n            }\r\n\r\n\r\nbecause the spring-boot-starter-data-redis contains both `jedis` and `lettuce`, if you exclude `lettuce`, the default connection should use `jedis`.\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"Redis command timed out; nested exception is io.lettuce.core.RedisCommandTimeoutException: Command timed out after 1 minute(s)","body":"<p>I tried to using jedis not using lettuce solve this problem.</p>\n<p>step 1: exclude lettuce:</p>\n<pre><code>api (&quot;org.springframework.boot:spring-boot-starter-data-redis&quot;) {\n            exclude group: &quot;io.lettuce&quot;, module: &quot;lettuce-core&quot;\n            exclude group: &quot;org.springframework.data&quot;, module: &quot;spring-data-redis&quot;\n        }\n</code></pre>\n<p>because the spring-boot-starter-data-redis contains both <code>jedis</code> and <code>lettuce</code>, if you exclude <code>lettuce</code>, the default connection should use <code>jedis</code>.</p>\n"},{"tags":[],"owner":{"account_id":10467026,"reputation":534,"user_id":7716142,"display_name":"minh tri Vo"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1656042974,"creation_date":1655288614,"answer_id":72629713,"question_id":67484542,"body_markdown":"For those who want to continue using &#39;spring-data-redis&#39;:\r\n    \r\nGradle config:\r\n\r\n    \r\n    api(&quot;org.springframework.boot:spring-boot-starter-data-redis&quot;){\r\n        exclude(group = &quot;io.lettuce&quot;, module = &quot;lettuce-core&quot;)\r\n    }\r\n    implementation(&quot;redis.clients:jedis:4.2.3&quot;)\r\n    implementation(&quot;org.apache.commons:commons-pool2:2.0&quot;)\r\n","title":"Redis command timed out; nested exception is io.lettuce.core.RedisCommandTimeoutException: Command timed out after 1 minute(s)","body":"<p>For those who want to continue using 'spring-data-redis':</p>\n<p>Gradle config:</p>\n<pre><code>api(&quot;org.springframework.boot:spring-boot-starter-data-redis&quot;){\n    exclude(group = &quot;io.lettuce&quot;, module = &quot;lettuce-core&quot;)\n}\nimplementation(&quot;redis.clients:jedis:4.2.3&quot;)\nimplementation(&quot;org.apache.commons:commons-pool2:2.0&quot;)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2927930,"reputation":1,"user_id":2508889,"display_name":"rajiv sharma"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659707414,"creation_date":1659707369,"answer_id":73250840,"question_id":67484542,"body_markdown":"Check your Redis connections from the application. Make sure established connections have keepalive on them. \r\n\r\nnetstat -ton | grep ESTABLISHED | grep 6379\r\n\r\ntcp    0   0 **IP**:39430   &lt;IP&gt;:6379    ESTABLISHED **off** (0.00/0/0)\r\n\r\nchange it to:\r\n\r\ntcp    0   0 **IP**:39430   &lt;IP&gt;:6379    ESTABLISHED **keepalive** ","title":"Redis command timed out; nested exception is io.lettuce.core.RedisCommandTimeoutException: Command timed out after 1 minute(s)","body":"<p>Check your Redis connections from the application. Make sure established connections have keepalive on them.</p>\n<p>netstat -ton | grep ESTABLISHED | grep 6379</p>\n<p>tcp    0   0 <strong>IP</strong>:39430   :6379    ESTABLISHED <strong>off</strong> (0.00/0/0)</p>\n<p>change it to:</p>\n<p>tcp    0   0 <strong>IP</strong>:39430   :6379    ESTABLISHED <strong>keepalive</strong></p>\n"},{"tags":[],"owner":{"account_id":1422699,"reputation":4139,"user_id":1346996,"display_name":"Ant&#243;nio Ribeiro"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1663669413,"creation_date":1663669413,"answer_id":73785191,"question_id":67484542,"body_markdown":"For those using Maven instead of Gradle, and following Dolphin&#39;s [answer][1], you ought to exclude `lettuce-core` artifact in your `pom.xml` file:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;\r\n        &lt;exclusions&gt;\r\n            &lt;exclusion&gt;\r\n                &lt;groupId&gt;io.lettuce&lt;/groupId&gt;\r\n                &lt;artifactId&gt;lettuce-core&lt;/artifactId&gt;\r\n            &lt;/exclusion&gt;\r\n        &lt;/exclusions&gt;\r\n    &lt;/dependency&gt;\r\n\r\nAnd add `jedis` Maven dependency:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;redis.clients&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jedis&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n\r\n---\r\n\r\nNote: If you&#39;re using Spring Boot 2.5.x, then the version of `spring-boot-starter-data-redis` will require `jedis` version `3.9.0`. This is due to the breaking changes introduced when moving from Jedis 3 to Jedis 4 (see [this][2] answer).\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/67489646/1346996\r\n  [2]: https://stackoverflow.com/a/72188180/1346996","title":"Redis command timed out; nested exception is io.lettuce.core.RedisCommandTimeoutException: Command timed out after 1 minute(s)","body":"<p>For those using Maven instead of Gradle, and following Dolphin's <a href=\"https://stackoverflow.com/a/67489646/1346996\">answer</a>, you ought to exclude <code>lettuce-core</code> artifact in your <code>pom.xml</code> file:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;\n    &lt;exclusions&gt;\n        &lt;exclusion&gt;\n            &lt;groupId&gt;io.lettuce&lt;/groupId&gt;\n            &lt;artifactId&gt;lettuce-core&lt;/artifactId&gt;\n        &lt;/exclusion&gt;\n    &lt;/exclusions&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>And add <code>jedis</code> Maven dependency:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;redis.clients&lt;/groupId&gt;\n    &lt;artifactId&gt;jedis&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<hr />\n<p>Note: If you're using Spring Boot 2.5.x, then the version of <code>spring-boot-starter-data-redis</code> will require <code>jedis</code> version <code>3.9.0</code>. This is due to the breaking changes introduced when moving from Jedis 3 to Jedis 4 (see <a href=\"https://stackoverflow.com/a/72188180/1346996\">this</a> answer).</p>\n"}],"owner":{"account_id":3106126,"reputation":31241,"user_id":2628868,"accept_rate":84,"display_name":"Dolphin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21810,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":67489646,"answer_count":4,"score":3,"last_activity_date":1663669413,"creation_date":1620727377,"question_id":67484542,"body_markdown":"Today when I using Java redis client(`spring-data-redis-2.3.9.RELEASE.jar`) to consume Redis stream message encount this error:\r\n\r\n\r\n\r\n    2021-05-11 17:49:42.134 ERROR 26301 --- [-post-service-1] c.d.s.p.common.mq.StreamConsumerRunner   : pull message error\r\n    \r\n    org.springframework.dao.QueryTimeoutException: Redis command timed out; nested exception is io.lettuce.core.RedisCommandTimeoutException: Command timed out after 1 minute(s)\r\n    \tat org.springframework.data.redis.connection.lettuce.LettuceExceptionConverter.convert(LettuceExceptionConverter.java:70) ~[spring-data-redis-2.3.9.RELEASE.jar!/:2.3.9.RELEASE]\r\n    \tat org.springframework.data.redis.connection.lettuce.LettuceExceptionConverter.convert(LettuceExceptionConverter.java:41) ~[spring-data-redis-2.3.9.RELEASE.jar!/:2.3.9.RELEASE]\r\n    \tat org.springframework.data.redis.PassThroughExceptionTranslationStrategy.translate(PassThroughExceptionTranslationStrategy.java:44) ~[spring-data-redis-2.3.9.RELEASE.jar!/:2.3.9.RELEASE]\r\n    \tat org.springframework.data.redis.FallbackExceptionTranslationStrategy.translate(FallbackExceptionTranslationStrategy.java:42) ~[spring-data-redis-2.3.9.RELEASE.jar!/:2.3.9.RELEASE]\r\n    \tat org.springframework.data.redis.connection.lettuce.LettuceConnection.convertLettuceAccessException(LettuceConnection.java:275) ~[spring-data-redis-2.3.9.RELEASE.jar!/:2.3.9.RELEASE]\r\n    \tat org.springframework.data.redis.connection.lettuce.LettuceStreamCommands.convertLettuceAccessException(LettuceStreamCommands.java:712) ~[spring-data-redis-2.3.9.RELEASE.jar!/:2.3.9.RELEASE]\r\n    \tat org.springframework.data.redis.connection.lettuce.LettuceStreamCommands.xReadGroup(LettuceStreamCommands.java:602) ~[spring-data-redis-2.3.9.RELEASE.jar!/:2.3.9.RELEASE]\r\n    \tat org.springframework.data.redis.connection.DefaultedRedisConnection.xReadGroup(DefaultedRedisConnection.java:591) ~[spring-data-redis-2.3.9.RELEASE.jar!/:2.3.9.RELEASE]\r\n    \tat org.springframework.data.redis.core.DefaultStreamOperations$4.inRedis(DefaultStreamOperations.java:310) ~[spring-data-redis-2.3.9.RELEASE.jar!/:2.3.9.RELEASE]\r\n    \tat org.springframework.data.redis.core.DefaultStreamOperations$RecordDeserializingRedisCallback.doInRedis(DefaultStreamOperations.java:376) ~[spring-data-redis-2.3.9.RELEASE.jar!/:2.3.9.RELEASE]\r\n    \tat org.springframework.data.redis.core.DefaultStreamOperations$RecordDeserializingRedisCallback.doInRedis(DefaultStreamOperations.java:371) ~[spring-data-redis-2.3.9.RELEASE.jar!/:2.3.9.RELEASE]\r\n    \tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:228) ~[spring-data-redis-2.3.9.RELEASE.jar!/:2.3.9.RELEASE]\r\n    \tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:188) ~[spring-data-redis-2.3.9.RELEASE.jar!/:2.3.9.RELEASE]\r\n    \tat org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:96) ~[spring-data-redis-2.3.9.RELEASE.jar!/:2.3.9.RELEASE]\r\n    \tat org.springframework.data.redis.core.DefaultStreamOperations.read(DefaultStreamOperations.java:305) ~[spring-data-redis-2.3.9.RELEASE.jar!/:2.3.9.RELEASE]\r\n    \tat org.springframework.data.redis.stream.DefaultStreamMessageListenerContainer.lambda$getReadFunction$3(DefaultStreamMessageListenerContainer.java:236) ~[spring-data-redis-2.3.9.RELEASE.jar!/:2.3.9.RELEASE]\r\n    \tat org.springframework.data.redis.stream.StreamPollTask.doLoop(StreamPollTask.java:138) ~[spring-data-redis-2.3.9.RELEASE.jar!/:2.3.9.RELEASE]\r\n    \tat org.springframework.data.redis.stream.StreamPollTask.run(StreamPollTask.java:123) ~[spring-data-redis-2.3.9.RELEASE.jar!/:2.3.9.RELEASE]\r\n    \tat misc.config.async.pool.MdcTaskDecorator.lambda$decorate$0(MdcTaskDecorator.java:29) ~[dolphin-common-1.0.0-SNAPSHOT.jar!/:na]\r\n    \tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]\r\n    \tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]\r\n    \tat java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]\r\n    Caused by: io.lettuce.core.RedisCommandTimeoutException: Command timed out after 1 minute(s)\r\n    \tat io.lettuce.core.internal.ExceptionFactory.createTimeoutException(ExceptionFactory.java:53) ~[lettuce-core-6.1.1.RELEASE.jar!/:6.1.1.RELEASE]\r\n    \tat io.lettuce.core.internal.Futures.awaitOrCancel(Futures.java:246) ~[lettuce-core-6.1.1.RELEASE.jar!/:6.1.1.RELEASE]\r\n    \tat io.lettuce.core.FutureSyncInvocationHandler.handleInvocation(FutureSyncInvocationHandler.java:75) ~[lettuce-core-6.1.1.RELEASE.jar!/:6.1.1.RELEASE]\r\n    \tat io.lettuce.core.internal.AbstractInvocationHandler.invoke(AbstractInvocationHandler.java:80) ~[lettuce-core-6.1.1.RELEASE.jar!/:6.1.1.RELEASE]\r\n    \tat com.sun.proxy.$Proxy149.xreadgroup(Unknown Source) ~[na:na]\r\n    \tat org.springframework.data.redis.connection.lettuce.LettuceStreamCommands.xReadGroup(LettuceStreamCommands.java:600) ~[spring-data-redis-2.3.9.RELEASE.jar!/:2.3.9.RELEASE]\r\n    \t... 15 common frames omitted\r\n\r\nFor the beginning the message could consume by the client successfully, some message could be consumed and handle correctly, after a while it will encount the time out problem. this is my code:\r\n\r\n\r\n\r\n    package com.dolphin.soa.post.common.mq;\r\n    \r\n    import lombok.extern.slf4j.Slf4j;\r\n    import org.springframework.beans.factory.DisposableBean;\r\n    import org.springframework.beans.factory.annotation.Value;\r\n    import org.springframework.boot.ApplicationArguments;\r\n    import org.springframework.boot.ApplicationRunner;\r\n    import org.springframework.data.redis.connection.RedisConnectionFactory;\r\n    import org.springframework.data.redis.connection.stream.Consumer;\r\n    import org.springframework.data.redis.connection.stream.MapRecord;\r\n    import org.springframework.data.redis.connection.stream.ReadOffset;\r\n    import org.springframework.data.redis.connection.stream.StreamOffset;\r\n    import org.springframework.data.redis.core.StringRedisTemplate;\r\n    import org.springframework.data.redis.serializer.StringRedisSerializer;\r\n    import org.springframework.data.redis.stream.StreamMessageListenerContainer;\r\n    import org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor;\r\n    import org.springframework.stereotype.Component;\r\n    import org.springframework.util.ErrorHandler;\r\n    \r\n    import java.time.Duration;\r\n    \r\n    /**\r\n     * @author dolphin\r\n     */\r\n    @Component\r\n    @Slf4j\r\n    public class StreamConsumerRunner implements ApplicationRunner, DisposableBean {\r\n    \r\n        @Value(&quot;${dolphin.redis.stream.consumer}&quot;)\r\n        private String consumer;\r\n    \r\n        @Value(&quot;${dolphin.redis.stream.group}&quot;)\r\n        private String groupName;\r\n    \r\n        private final RedisConnectionFactory redisConnectionFactory;\r\n    \r\n        private final ThreadPoolTaskExecutor threadPoolTaskExecutor;\r\n    \r\n        private final StreamMessageListener streamMessageListener;\r\n    \r\n        private final StringRedisTemplate stringRedisTemplate;\r\n    \r\n        private StreamMessageListenerContainer&lt;String, MapRecord&lt;String, String, String&gt;&gt; streamMessageListenerContainer;\r\n    \r\n        public StreamConsumerRunner(RedisConnectionFactory redisConnectionFactory,\r\n                                    ThreadPoolTaskExecutor threadPoolTaskExecutor,\r\n                                    StreamMessageListener streamMessageListener,\r\n                                    StringRedisTemplate stringRedisTemplate) {\r\n            this.redisConnectionFactory = redisConnectionFactory;\r\n            this.threadPoolTaskExecutor = threadPoolTaskExecutor;\r\n            this.streamMessageListener = streamMessageListener;\r\n            this.stringRedisTemplate = stringRedisTemplate;\r\n        }\r\n    \r\n        @Override\r\n        public void run(ApplicationArguments args) {\r\n            StreamMessageListenerContainer.StreamMessageListenerContainerOptions&lt;String, MapRecord&lt;String, String, String&gt;&gt; streamMessageListenerContainerOptions = StreamMessageListenerContainer.StreamMessageListenerContainerOptions\r\n                    .builder()\r\n                    .batchSize(1)\r\n                    .executor(this.threadPoolTaskExecutor)\r\n                    .errorHandler(new ErrorHandler() {\r\n                        @Override\r\n                        public void handleError(Throwable t) {\r\n                            log.error(&quot;pull message error&quot;,t);\r\n                        }\r\n                    })\r\n                    .pollTimeout(Duration.ofMinutes(1L))\r\n                    .serializer(new StringRedisSerializer())\r\n                    .build();\r\n            StreamMessageListenerContainer&lt;String, MapRecord&lt;String, String, String&gt;&gt; streamMessageListenerContainer = StreamMessageListenerContainer\r\n                    .create(this.redisConnectionFactory, streamMessageListenerContainerOptions);\r\n            streamMessageListenerContainer.receive(Consumer.from(groupName, consumer),\r\n                    StreamOffset.create(consumer, ReadOffset.lastConsumed()), this.streamMessageListener);\r\n            this.streamMessageListenerContainer = streamMessageListenerContainer;\r\n            this.streamMessageListenerContainer.start();\r\n        }\r\n    \r\n        @Override\r\n        public void destroy() throws Exception {\r\n            this.streamMessageListenerContainer.stop();\r\n        }\r\n    }\r\n\r\n\r\n\r\nand this is the `StreamMessageListener`:\r\n\r\n\r\n\r\n    package com.dolphin.soa.post.common.mq;\r\n    \r\n    import com.dolphin.soa.post.contract.request.ArticleRequest;\r\n    import com.dolphin.soa.post.model.entity.SubRelation;\r\n    import com.dolphin.soa.post.service.IArticleService;\r\n    import com.dolphin.soa.post.service.ISubRelationService;\r\n    import lombok.extern.slf4j.Slf4j;\r\n    import org.apache.commons.collections4.CollectionUtils;\r\n    import org.apache.commons.collections4.MapUtils;\r\n    import org.springframework.beans.factory.annotation.Qualifier;\r\n    import org.springframework.beans.factory.annotation.Value;\r\n    import org.springframework.data.redis.connection.stream.MapRecord;\r\n    import org.springframework.data.redis.connection.stream.RecordId;\r\n    import org.springframework.data.redis.core.DefaultTypedTuple;\r\n    import org.springframework.data.redis.core.RedisTemplate;\r\n    import org.springframework.data.redis.core.StringRedisTemplate;\r\n    import org.springframework.data.redis.core.ZSetOperations;\r\n    import org.springframework.data.redis.stream.StreamListener;\r\n    import org.springframework.stereotype.Component;\r\n    \r\n    import java.util.Arrays;\r\n    import java.util.HashSet;\r\n    import java.util.List;\r\n    import java.util.Map;\r\n    \r\n    /**\r\n     * @author dolphin\r\n     */\r\n    @Component\r\n    @Slf4j\r\n    public class StreamMessageListener implements StreamListener&lt;String, MapRecord&lt;String, String, String&gt;&gt; {\r\n    \r\n        @Value(&quot;${dolphin.redis.stream.group}&quot;)\r\n        private String groupName;\r\n    \r\n        @Value(&quot;${dolphin.redis.user.sub.article.key}&quot;)\r\n        private String subArticleKey;\r\n    \r\n        private final StringRedisTemplate stringRedisTemplate;\r\n    \r\n        private final RedisTemplate&lt;String, Object&gt; articleRedisTemplate;\r\n    \r\n        private final RedisTemplate&lt;String, Long&gt; redisLongTemplate;\r\n    \r\n        private final ISubRelationService subRelationService;\r\n    \r\n        private final IArticleService articleService;\r\n    \r\n        public StreamMessageListener(StringRedisTemplate stringRedisTemplate,\r\n                                     @Qualifier(&quot;redisObjectTemplate&quot;) RedisTemplate&lt;String, Object&gt; articleRedisTemplate,\r\n                                     ISubRelationService subRelationService,\r\n                                     @Qualifier(&quot;redisLongTemplate&quot;) RedisTemplate&lt;String, Long&gt; redisLongTemplate,\r\n                                     IArticleService articleService) {\r\n            this.stringRedisTemplate = stringRedisTemplate;\r\n            this.articleRedisTemplate = articleRedisTemplate;\r\n            this.subRelationService = subRelationService;\r\n            this.redisLongTemplate = redisLongTemplate;\r\n            this.articleService = articleService;\r\n        }\r\n    \r\n        @Override\r\n        public void onMessage(MapRecord&lt;String, String, String&gt; message) {\r\n            try {\r\n                RecordId messageId = message.getId();\r\n                Map&lt;String, String&gt; body = message.getValue();\r\n                log.info(&quot;stream messagemessageId={}, stream={}, body={}&quot;, messageId, message.getStream(), body);\r\n                handleArticle(body);\r\n                this.stringRedisTemplate.opsForStream().acknowledge(groupName, message);\r\n            } catch (Exception e) {\r\n                log.error(&quot;error&quot;, e);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n\r\nI am searching from internet and find no useful suggestions. I have tried to upgrade the lettuce package version to newest `6.1.1.RELEASE` version but still not fix it. Where is the problem and  What should I do to make it work as expect? I also tried replace `lettuce` with `jedis`:\r\n\r\n\r\n\r\n    api (&quot;org.springframework.boot:spring-boot-starter-data-redis&quot;) {\r\n                exclude group: &quot;io.lettuce&quot;, module: &quot;lettuce-core&quot;\r\n    }\r\n    api &quot;redis.clients:jedis:3.6.0&quot;\r\n\r\n\r\n\r\nseems it did not work.\r\n","title":"Redis command timed out; nested exception is io.lettuce.core.RedisCommandTimeoutException: Command timed out after 1 minute(s)","body":"<p>Today when I using Java redis client(<code>spring-data-redis-2.3.9.RELEASE.jar</code>) to consume Redis stream message encount this error:</p>\n<pre><code>2021-05-11 17:49:42.134 ERROR 26301 --- [-post-service-1] c.d.s.p.common.mq.StreamConsumerRunner   : pull message error\n\norg.springframework.dao.QueryTimeoutException: Redis command timed out; nested exception is io.lettuce.core.RedisCommandTimeoutException: Command timed out after 1 minute(s)\n    at org.springframework.data.redis.connection.lettuce.LettuceExceptionConverter.convert(LettuceExceptionConverter.java:70) ~[spring-data-redis-2.3.9.RELEASE.jar!/:2.3.9.RELEASE]\n    at org.springframework.data.redis.connection.lettuce.LettuceExceptionConverter.convert(LettuceExceptionConverter.java:41) ~[spring-data-redis-2.3.9.RELEASE.jar!/:2.3.9.RELEASE]\n    at org.springframework.data.redis.PassThroughExceptionTranslationStrategy.translate(PassThroughExceptionTranslationStrategy.java:44) ~[spring-data-redis-2.3.9.RELEASE.jar!/:2.3.9.RELEASE]\n    at org.springframework.data.redis.FallbackExceptionTranslationStrategy.translate(FallbackExceptionTranslationStrategy.java:42) ~[spring-data-redis-2.3.9.RELEASE.jar!/:2.3.9.RELEASE]\n    at org.springframework.data.redis.connection.lettuce.LettuceConnection.convertLettuceAccessException(LettuceConnection.java:275) ~[spring-data-redis-2.3.9.RELEASE.jar!/:2.3.9.RELEASE]\n    at org.springframework.data.redis.connection.lettuce.LettuceStreamCommands.convertLettuceAccessException(LettuceStreamCommands.java:712) ~[spring-data-redis-2.3.9.RELEASE.jar!/:2.3.9.RELEASE]\n    at org.springframework.data.redis.connection.lettuce.LettuceStreamCommands.xReadGroup(LettuceStreamCommands.java:602) ~[spring-data-redis-2.3.9.RELEASE.jar!/:2.3.9.RELEASE]\n    at org.springframework.data.redis.connection.DefaultedRedisConnection.xReadGroup(DefaultedRedisConnection.java:591) ~[spring-data-redis-2.3.9.RELEASE.jar!/:2.3.9.RELEASE]\n    at org.springframework.data.redis.core.DefaultStreamOperations$4.inRedis(DefaultStreamOperations.java:310) ~[spring-data-redis-2.3.9.RELEASE.jar!/:2.3.9.RELEASE]\n    at org.springframework.data.redis.core.DefaultStreamOperations$RecordDeserializingRedisCallback.doInRedis(DefaultStreamOperations.java:376) ~[spring-data-redis-2.3.9.RELEASE.jar!/:2.3.9.RELEASE]\n    at org.springframework.data.redis.core.DefaultStreamOperations$RecordDeserializingRedisCallback.doInRedis(DefaultStreamOperations.java:371) ~[spring-data-redis-2.3.9.RELEASE.jar!/:2.3.9.RELEASE]\n    at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:228) ~[spring-data-redis-2.3.9.RELEASE.jar!/:2.3.9.RELEASE]\n    at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:188) ~[spring-data-redis-2.3.9.RELEASE.jar!/:2.3.9.RELEASE]\n    at org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:96) ~[spring-data-redis-2.3.9.RELEASE.jar!/:2.3.9.RELEASE]\n    at org.springframework.data.redis.core.DefaultStreamOperations.read(DefaultStreamOperations.java:305) ~[spring-data-redis-2.3.9.RELEASE.jar!/:2.3.9.RELEASE]\n    at org.springframework.data.redis.stream.DefaultStreamMessageListenerContainer.lambda$getReadFunction$3(DefaultStreamMessageListenerContainer.java:236) ~[spring-data-redis-2.3.9.RELEASE.jar!/:2.3.9.RELEASE]\n    at org.springframework.data.redis.stream.StreamPollTask.doLoop(StreamPollTask.java:138) ~[spring-data-redis-2.3.9.RELEASE.jar!/:2.3.9.RELEASE]\n    at org.springframework.data.redis.stream.StreamPollTask.run(StreamPollTask.java:123) ~[spring-data-redis-2.3.9.RELEASE.jar!/:2.3.9.RELEASE]\n    at misc.config.async.pool.MdcTaskDecorator.lambda$decorate$0(MdcTaskDecorator.java:29) ~[dolphin-common-1.0.0-SNAPSHOT.jar!/:na]\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]\n    at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]\nCaused by: io.lettuce.core.RedisCommandTimeoutException: Command timed out after 1 minute(s)\n    at io.lettuce.core.internal.ExceptionFactory.createTimeoutException(ExceptionFactory.java:53) ~[lettuce-core-6.1.1.RELEASE.jar!/:6.1.1.RELEASE]\n    at io.lettuce.core.internal.Futures.awaitOrCancel(Futures.java:246) ~[lettuce-core-6.1.1.RELEASE.jar!/:6.1.1.RELEASE]\n    at io.lettuce.core.FutureSyncInvocationHandler.handleInvocation(FutureSyncInvocationHandler.java:75) ~[lettuce-core-6.1.1.RELEASE.jar!/:6.1.1.RELEASE]\n    at io.lettuce.core.internal.AbstractInvocationHandler.invoke(AbstractInvocationHandler.java:80) ~[lettuce-core-6.1.1.RELEASE.jar!/:6.1.1.RELEASE]\n    at com.sun.proxy.$Proxy149.xreadgroup(Unknown Source) ~[na:na]\n    at org.springframework.data.redis.connection.lettuce.LettuceStreamCommands.xReadGroup(LettuceStreamCommands.java:600) ~[spring-data-redis-2.3.9.RELEASE.jar!/:2.3.9.RELEASE]\n    ... 15 common frames omitted\n</code></pre>\n<p>For the beginning the message could consume by the client successfully, some message could be consumed and handle correctly, after a while it will encount the time out problem. this is my code:</p>\n<pre><code>package com.dolphin.soa.post.common.mq;\n\nimport lombok.extern.slf4j.Slf4j;\nimport org.springframework.beans.factory.DisposableBean;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.boot.ApplicationArguments;\nimport org.springframework.boot.ApplicationRunner;\nimport org.springframework.data.redis.connection.RedisConnectionFactory;\nimport org.springframework.data.redis.connection.stream.Consumer;\nimport org.springframework.data.redis.connection.stream.MapRecord;\nimport org.springframework.data.redis.connection.stream.ReadOffset;\nimport org.springframework.data.redis.connection.stream.StreamOffset;\nimport org.springframework.data.redis.core.StringRedisTemplate;\nimport org.springframework.data.redis.serializer.StringRedisSerializer;\nimport org.springframework.data.redis.stream.StreamMessageListenerContainer;\nimport org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor;\nimport org.springframework.stereotype.Component;\nimport org.springframework.util.ErrorHandler;\n\nimport java.time.Duration;\n\n/**\n * @author dolphin\n */\n@Component\n@Slf4j\npublic class StreamConsumerRunner implements ApplicationRunner, DisposableBean {\n\n    @Value(&quot;${dolphin.redis.stream.consumer}&quot;)\n    private String consumer;\n\n    @Value(&quot;${dolphin.redis.stream.group}&quot;)\n    private String groupName;\n\n    private final RedisConnectionFactory redisConnectionFactory;\n\n    private final ThreadPoolTaskExecutor threadPoolTaskExecutor;\n\n    private final StreamMessageListener streamMessageListener;\n\n    private final StringRedisTemplate stringRedisTemplate;\n\n    private StreamMessageListenerContainer&lt;String, MapRecord&lt;String, String, String&gt;&gt; streamMessageListenerContainer;\n\n    public StreamConsumerRunner(RedisConnectionFactory redisConnectionFactory,\n                                ThreadPoolTaskExecutor threadPoolTaskExecutor,\n                                StreamMessageListener streamMessageListener,\n                                StringRedisTemplate stringRedisTemplate) {\n        this.redisConnectionFactory = redisConnectionFactory;\n        this.threadPoolTaskExecutor = threadPoolTaskExecutor;\n        this.streamMessageListener = streamMessageListener;\n        this.stringRedisTemplate = stringRedisTemplate;\n    }\n\n    @Override\n    public void run(ApplicationArguments args) {\n        StreamMessageListenerContainer.StreamMessageListenerContainerOptions&lt;String, MapRecord&lt;String, String, String&gt;&gt; streamMessageListenerContainerOptions = StreamMessageListenerContainer.StreamMessageListenerContainerOptions\n                .builder()\n                .batchSize(1)\n                .executor(this.threadPoolTaskExecutor)\n                .errorHandler(new ErrorHandler() {\n                    @Override\n                    public void handleError(Throwable t) {\n                        log.error(&quot;pull message error&quot;,t);\n                    }\n                })\n                .pollTimeout(Duration.ofMinutes(1L))\n                .serializer(new StringRedisSerializer())\n                .build();\n        StreamMessageListenerContainer&lt;String, MapRecord&lt;String, String, String&gt;&gt; streamMessageListenerContainer = StreamMessageListenerContainer\n                .create(this.redisConnectionFactory, streamMessageListenerContainerOptions);\n        streamMessageListenerContainer.receive(Consumer.from(groupName, consumer),\n                StreamOffset.create(consumer, ReadOffset.lastConsumed()), this.streamMessageListener);\n        this.streamMessageListenerContainer = streamMessageListenerContainer;\n        this.streamMessageListenerContainer.start();\n    }\n\n    @Override\n    public void destroy() throws Exception {\n        this.streamMessageListenerContainer.stop();\n    }\n}\n</code></pre>\n<p>and this is the <code>StreamMessageListener</code>:</p>\n<pre><code>package com.dolphin.soa.post.common.mq;\n\nimport com.dolphin.soa.post.contract.request.ArticleRequest;\nimport com.dolphin.soa.post.model.entity.SubRelation;\nimport com.dolphin.soa.post.service.IArticleService;\nimport com.dolphin.soa.post.service.ISubRelationService;\nimport lombok.extern.slf4j.Slf4j;\nimport org.apache.commons.collections4.CollectionUtils;\nimport org.apache.commons.collections4.MapUtils;\nimport org.springframework.beans.factory.annotation.Qualifier;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.data.redis.connection.stream.MapRecord;\nimport org.springframework.data.redis.connection.stream.RecordId;\nimport org.springframework.data.redis.core.DefaultTypedTuple;\nimport org.springframework.data.redis.core.RedisTemplate;\nimport org.springframework.data.redis.core.StringRedisTemplate;\nimport org.springframework.data.redis.core.ZSetOperations;\nimport org.springframework.data.redis.stream.StreamListener;\nimport org.springframework.stereotype.Component;\n\nimport java.util.Arrays;\nimport java.util.HashSet;\nimport java.util.List;\nimport java.util.Map;\n\n/**\n * @author dolphin\n */\n@Component\n@Slf4j\npublic class StreamMessageListener implements StreamListener&lt;String, MapRecord&lt;String, String, String&gt;&gt; {\n\n    @Value(&quot;${dolphin.redis.stream.group}&quot;)\n    private String groupName;\n\n    @Value(&quot;${dolphin.redis.user.sub.article.key}&quot;)\n    private String subArticleKey;\n\n    private final StringRedisTemplate stringRedisTemplate;\n\n    private final RedisTemplate&lt;String, Object&gt; articleRedisTemplate;\n\n    private final RedisTemplate&lt;String, Long&gt; redisLongTemplate;\n\n    private final ISubRelationService subRelationService;\n\n    private final IArticleService articleService;\n\n    public StreamMessageListener(StringRedisTemplate stringRedisTemplate,\n                                 @Qualifier(&quot;redisObjectTemplate&quot;) RedisTemplate&lt;String, Object&gt; articleRedisTemplate,\n                                 ISubRelationService subRelationService,\n                                 @Qualifier(&quot;redisLongTemplate&quot;) RedisTemplate&lt;String, Long&gt; redisLongTemplate,\n                                 IArticleService articleService) {\n        this.stringRedisTemplate = stringRedisTemplate;\n        this.articleRedisTemplate = articleRedisTemplate;\n        this.subRelationService = subRelationService;\n        this.redisLongTemplate = redisLongTemplate;\n        this.articleService = articleService;\n    }\n\n    @Override\n    public void onMessage(MapRecord&lt;String, String, String&gt; message) {\n        try {\n            RecordId messageId = message.getId();\n            Map&lt;String, String&gt; body = message.getValue();\n            log.info(&quot;stream messagemessageId={}, stream={}, body={}&quot;, messageId, message.getStream(), body);\n            handleArticle(body);\n            this.stringRedisTemplate.opsForStream().acknowledge(groupName, message);\n        } catch (Exception e) {\n            log.error(&quot;error&quot;, e);\n        }\n    }\n}\n</code></pre>\n<p>I am searching from internet and find no useful suggestions. I have tried to upgrade the lettuce package version to newest <code>6.1.1.RELEASE</code> version but still not fix it. Where is the problem and  What should I do to make it work as expect? I also tried replace <code>lettuce</code> with <code>jedis</code>:</p>\n<pre><code>api (&quot;org.springframework.boot:spring-boot-starter-data-redis&quot;) {\n            exclude group: &quot;io.lettuce&quot;, module: &quot;lettuce-core&quot;\n}\napi &quot;redis.clients:jedis:3.6.0&quot;\n</code></pre>\n<p>seems it did not work.</p>\n"},{"tags":["java","android","xml","kotlin","android-viewpager"],"owner":{"account_id":12944538,"reputation":219,"user_id":9359288,"display_name":"Murat Aktay"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":82,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"closed_date":1672362648,"answer_count":0,"score":2,"last_activity_date":1663669401,"creation_date":1663593480,"question_id":73773986,"body_markdown":"I have a problem. I want hiding TopLayout when view pager scrolling. I had been successfully this but recycler views heights are wrong when NestedScrollView scrolling. \r\n\r\n### HomeFragment.kt\r\nMain fragment is here\r\n```\r\n    private var fragments = mutableListOf(FirstFragment(), SecondFragment())\r\n\r\n    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\r\n        super.onViewCreated(view, savedInstanceState)\r\n\r\n        tabLayout = view.findViewById(R.id.tabs)\r\n        val viewPager2 = view.findViewById&lt;ViewPager2&gt;(R.id.view_pager)\r\n        nsd = view.findViewById(R.id.nested_id)\r\n\r\n\r\n        val adapter = ViewPagerAdapter(context as FragmentActivity, fragments)\r\n        viewPager2.adapter = adapter\r\n\r\n        TabLayoutMediator(\r\n            tabLayout, viewPager2\r\n        ) { tab, position -&gt;\r\n            tab.text = &quot;Tab &quot; + (position + 1)\r\n        }.attach()\r\n    }\r\n```\r\n### home_fragment.xml\r\n```\r\n\r\n&lt;androidx.constraintlayout.widget.ConstraintLayout\r\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;&gt;\r\n\r\n    &lt;androidx.core.widget.NestedScrollView\r\n        android:id=&quot;@+id/nested_id&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;&gt;\r\n\r\n        &lt;androidx.constraintlayout.widget.ConstraintLayout\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;match_parent&quot;&gt;\r\n\r\n            &lt;LinearLayout\r\n                android:id=&quot;@+id/image&quot;\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;150d&quot;\r\n                android:orientation=&quot;horizontal&quot;\r\n                app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n                app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\r\n\r\n            &lt;com.google.android.material.tabs.TabLayout\r\n                android:id=&quot;@+id/tabs&quot;\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                app:layout_constraintTop_toBottomOf=&quot;@id/image&quot; /&gt;\r\n\r\n            &lt;androidx.viewpager2.widget.ViewPager2\r\n                android:id=&quot;@+id/view_pager&quot;\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;match_parent&quot;\r\n                app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n                app:layout_constraintTop_toBottomOf=&quot;@id/tabs&quot; /&gt;\r\n\r\n        &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n    &lt;/androidx.core.widget.NestedScrollView&gt;\r\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n```\r\n\r\n### FirstFragment.kt\r\n```\r\n    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\r\n        super.onViewCreated(view, savedInstanceState)\r\n\r\n        lateinit var recyclerAdapter: MainRecyclerAdapter\r\n\r\n        val cities = arrayListOf(&quot;cities1&quot;, &quot;cities2&quot;,&quot;...&quot;,&quot;cities81&quot;)\r\n\r\n        var recyclerView: RecyclerView = view.findViewById(R.id.fr_recyclerView)\r\n\r\n        val gr = GridLayoutManager(context, 2, GridLayoutManager.VERTICAL, false)\r\n        recyclerView.layoutManager = gr\r\n        recyclerAdapter = MainRecyclerAdapter(cities)\r\n        recyclerView.adapter = recyclerAdapter\r\n    }\r\n```\r\n### fragment_first.xml\r\n```\r\n&lt;FrameLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    tools:context=&quot;.FirstFragment&quot;&gt;\r\n\r\n    &lt;androidx.recyclerview.widget.RecyclerView\r\n        android:id=&quot;@+id/fr_recyclerView&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;/&gt;\r\n\r\n&lt;/FrameLayout&gt;\r\n```\r\n\r\n### SecondFragment.kt\r\n```\r\n    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\r\n        super.onViewCreated(view, savedInstanceState)\r\n\r\n        lateinit var recyclerAdapter: MainRecyclerAdapter\r\n\r\n        val cities = arrayListOf(&quot;cities1&quot;, &quot;cities2&quot;,&quot;...&quot;,&quot;cities10&quot;)\r\n\r\n        var recyclerView: RecyclerView = view.findViewById(R.id.fr_recyclerView)\r\n\r\n        val gr = GridLayoutManager(context, 2, GridLayoutManager.VERTICAL, false)\r\n        recyclerView.layoutManager = gr\r\n        recyclerAdapter = MainRecyclerAdapter(cities)\r\n        recyclerView.adapter = recyclerAdapter\r\n    }\r\n```\r\n### fragment_second.xml\r\n```\r\n&lt;FrameLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    android:background=&quot;#1F4A8A&quot;\r\n    tools:context=&quot;.SecondFragment&quot;&gt;\r\n    &lt;androidx.recyclerview.widget.RecyclerView\r\n        android:id=&quot;@+id/second_fr_recyclerView&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;/&gt;\r\n&lt;/FrameLayout&gt;\r\n```\r\n\r\n### RecyclerViewAdapter.kt\r\n```\r\nclass MainRecyclerAdapter(private val list: ArrayList&lt;String&gt;) :\r\n    RecyclerView.Adapter&lt;MainRecyclerAdapter.ViewHolder&gt;() {\r\n\r\n    class ViewHolder(itemView: View) : RecyclerView.ViewHolder(itemView) {\r\n        var city: TextView\r\n\r\n        init {\r\n            city = itemView.findViewById(R.id.text)\r\n        }\r\n    }\r\n\r\n    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): ViewHolder {\r\n        val inflater = LayoutInflater.from(parent.context)\r\n        val view = inflater.inflate(R.layout.recycler_item, parent, false)\r\n        return ViewHolder(view)\r\n    }\r\n\r\n    override fun onBindViewHolder(holder: ViewHolder, position: Int) {\r\n        holder.city.text = list[position]\r\n    }\r\n\r\n    override fun getItemCount(): Int {\r\n        return list.size\r\n    }\r\n```","title":"Android RecyclerView height problem inside view pager2 inside NestedScrollView with TabLayout","body":"<p>I have a problem. I want hiding TopLayout when view pager scrolling. I had been successfully this but recycler views heights are wrong when NestedScrollView scrolling.</p>\n<h3>HomeFragment.kt</h3>\n<p>Main fragment is here</p>\n<pre><code>    private var fragments = mutableListOf(FirstFragment(), SecondFragment())\n\n    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\n        super.onViewCreated(view, savedInstanceState)\n\n        tabLayout = view.findViewById(R.id.tabs)\n        val viewPager2 = view.findViewById&lt;ViewPager2&gt;(R.id.view_pager)\n        nsd = view.findViewById(R.id.nested_id)\n\n\n        val adapter = ViewPagerAdapter(context as FragmentActivity, fragments)\n        viewPager2.adapter = adapter\n\n        TabLayoutMediator(\n            tabLayout, viewPager2\n        ) { tab, position -&gt;\n            tab.text = &quot;Tab &quot; + (position + 1)\n        }.attach()\n    }\n</code></pre>\n<h3>home_fragment.xml</h3>\n<pre><code>\n&lt;androidx.constraintlayout.widget.ConstraintLayout\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;&gt;\n\n    &lt;androidx.core.widget.NestedScrollView\n        android:id=&quot;@+id/nested_id&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot;&gt;\n\n        &lt;androidx.constraintlayout.widget.ConstraintLayout\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;match_parent&quot;&gt;\n\n            &lt;LinearLayout\n                android:id=&quot;@+id/image&quot;\n                android:layout_width=&quot;match_parent&quot;\n                android:layout_height=&quot;150d&quot;\n                android:orientation=&quot;horizontal&quot;\n                app:layout_constraintStart_toStartOf=&quot;parent&quot;\n                app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\n\n            &lt;com.google.android.material.tabs.TabLayout\n                android:id=&quot;@+id/tabs&quot;\n                android:layout_width=&quot;match_parent&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                app:layout_constraintTop_toBottomOf=&quot;@id/image&quot; /&gt;\n\n            &lt;androidx.viewpager2.widget.ViewPager2\n                android:id=&quot;@+id/view_pager&quot;\n                android:layout_width=&quot;match_parent&quot;\n                android:layout_height=&quot;match_parent&quot;\n                app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n                app:layout_constraintTop_toBottomOf=&quot;@id/tabs&quot; /&gt;\n\n        &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n    &lt;/androidx.core.widget.NestedScrollView&gt;\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n<h3>FirstFragment.kt</h3>\n<pre><code>    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\n        super.onViewCreated(view, savedInstanceState)\n\n        lateinit var recyclerAdapter: MainRecyclerAdapter\n\n        val cities = arrayListOf(&quot;cities1&quot;, &quot;cities2&quot;,&quot;...&quot;,&quot;cities81&quot;)\n\n        var recyclerView: RecyclerView = view.findViewById(R.id.fr_recyclerView)\n\n        val gr = GridLayoutManager(context, 2, GridLayoutManager.VERTICAL, false)\n        recyclerView.layoutManager = gr\n        recyclerAdapter = MainRecyclerAdapter(cities)\n        recyclerView.adapter = recyclerAdapter\n    }\n</code></pre>\n<h3>fragment_first.xml</h3>\n<pre><code>&lt;FrameLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    tools:context=&quot;.FirstFragment&quot;&gt;\n\n    &lt;androidx.recyclerview.widget.RecyclerView\n        android:id=&quot;@+id/fr_recyclerView&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot;/&gt;\n\n&lt;/FrameLayout&gt;\n</code></pre>\n<h3>SecondFragment.kt</h3>\n<pre><code>    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\n        super.onViewCreated(view, savedInstanceState)\n\n        lateinit var recyclerAdapter: MainRecyclerAdapter\n\n        val cities = arrayListOf(&quot;cities1&quot;, &quot;cities2&quot;,&quot;...&quot;,&quot;cities10&quot;)\n\n        var recyclerView: RecyclerView = view.findViewById(R.id.fr_recyclerView)\n\n        val gr = GridLayoutManager(context, 2, GridLayoutManager.VERTICAL, false)\n        recyclerView.layoutManager = gr\n        recyclerAdapter = MainRecyclerAdapter(cities)\n        recyclerView.adapter = recyclerAdapter\n    }\n</code></pre>\n<h3>fragment_second.xml</h3>\n<pre><code>&lt;FrameLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:background=&quot;#1F4A8A&quot;\n    tools:context=&quot;.SecondFragment&quot;&gt;\n    &lt;androidx.recyclerview.widget.RecyclerView\n        android:id=&quot;@+id/second_fr_recyclerView&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;/&gt;\n&lt;/FrameLayout&gt;\n</code></pre>\n<h3>RecyclerViewAdapter.kt</h3>\n<pre><code>class MainRecyclerAdapter(private val list: ArrayList&lt;String&gt;) :\n    RecyclerView.Adapter&lt;MainRecyclerAdapter.ViewHolder&gt;() {\n\n    class ViewHolder(itemView: View) : RecyclerView.ViewHolder(itemView) {\n        var city: TextView\n\n        init {\n            city = itemView.findViewById(R.id.text)\n        }\n    }\n\n    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): ViewHolder {\n        val inflater = LayoutInflater.from(parent.context)\n        val view = inflater.inflate(R.layout.recycler_item, parent, false)\n        return ViewHolder(view)\n    }\n\n    override fun onBindViewHolder(holder: ViewHolder, position: Int) {\n        holder.city.text = list[position]\n    }\n\n    override fun getItemCount(): Int {\n        return list.size\n    }\n</code></pre>\n"},{"tags":["java","spring","spring-boot","graphql","graphql-java"],"comments":[{"owner":{"account_id":12579561,"reputation":61,"user_id":9150771,"display_name":"user9150771"},"score":0,"creation_date":1642783256,"post_id":70791293,"comment_id":125171885,"body_markdown":"There is one option I found, we can introduce custom Filter, but I don&#39;t know how write test cases for it","body":"There is one option I found, we can introduce custom Filter, but I don&#39;t know how write test cases for it"}],"answers":[{"tags":[],"owner":{"account_id":1415404,"reputation":53,"user_id":1341168,"display_name":"Rub&#233;n Cougil"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1651758232,"creation_date":1651757746,"answer_id":72128126,"question_id":70791293,"body_markdown":"You can do:\r\n\r\n    env.getGraphQlContext().get(HttpServletRequest.class).getHeader(&quot;header&quot;)","title":"GraphQL + Springboot + Http Headers","body":"<p>You can do:</p>\n<pre><code>env.getGraphQlContext().get(HttpServletRequest.class).getHeader(&quot;header&quot;)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1091651,"reputation":101,"user_id":1720720,"display_name":"Cam"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660831929,"creation_date":1660831929,"answer_id":73404572,"question_id":70791293,"body_markdown":"As of 12.0.0, environment.getGraphQLContext() is not supported. This lack of support is referenced in the project&#39;s github (https://github.com/graphql-java-kickstart/graphql-spring-boot/issues/808)\r\n\r\nAs of version 13.0.0, you can access the HttpServletRequest by using \r\n\r\n    HttpServletRequest httpServletRequest = environment.getGraphQlContext().get(HttpServletRequest.class);\r\n\r\nIf you need to use version 12.0.0, my suggestion would be to use a OncePerRequestFilter and store the header information you need in a ThreadLocal value. Just remember to clear that thread local value after the request has been processed. This will only work if you turn off &quot;async mode&quot; that the GraphQL library introduced in 11.0.0, as &quot;async mode&quot; processes the request filters and graphql resolvers in different threads.","title":"GraphQL + Springboot + Http Headers","body":"<p>As of 12.0.0, environment.getGraphQLContext() is not supported. This lack of support is referenced in the project's github (<a href=\"https://github.com/graphql-java-kickstart/graphql-spring-boot/issues/808\" rel=\"nofollow noreferrer\">https://github.com/graphql-java-kickstart/graphql-spring-boot/issues/808</a>)</p>\n<p>As of version 13.0.0, you can access the HttpServletRequest by using</p>\n<pre><code>HttpServletRequest httpServletRequest = environment.getGraphQlContext().get(HttpServletRequest.class);\n</code></pre>\n<p>If you need to use version 12.0.0, my suggestion would be to use a OncePerRequestFilter and store the header information you need in a ThreadLocal value. Just remember to clear that thread local value after the request has been processed. This will only work if you turn off &quot;async mode&quot; that the GraphQL library introduced in 11.0.0, as &quot;async mode&quot; processes the request filters and graphql resolvers in different threads.</p>\n"},{"tags":[],"owner":{"account_id":9243646,"reputation":11,"user_id":6866219,"display_name":"Tomix1337"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663669004,"creation_date":1663669004,"answer_id":73785123,"question_id":70791293,"body_markdown":"Upgrade to 13.0.0 (or 14.0.0) and call\r\n\r\nHttpServletRequest httpServletRequest = env.getGraphQlContext().get(HttpServletRequest.class);\r\n\r\nThis will give you and HttpServletRequest, from where you can call\r\n\r\n```\r\nprivate static Map&lt;String, String&gt; getHeadersFromRequest(HttpServletRequest httpServletRequest) {\r\n        var mapOfHeaders = new HashMap&lt;String, String&gt;();\r\n\r\n        Enumeration&lt;String&gt; headerNames = httpServletRequest.getHeaderNames();\r\n        if (headerNames != null) {\r\n            while (headerNames.hasMoreElements()) {\r\n                String headerName = headerNames.nextElement();\r\n                mapOfHeaders.put(headerName, httpServletRequest.getHeader(headerName));\r\n            }\r\n        }\r\n        return mapOfHeaders;\r\n    }\r\n```\r\nto return a list map of headers.","title":"GraphQL + Springboot + Http Headers","body":"<p>Upgrade to 13.0.0 (or 14.0.0) and call</p>\n<p>HttpServletRequest httpServletRequest = env.getGraphQlContext().get(HttpServletRequest.class);</p>\n<p>This will give you and HttpServletRequest, from where you can call</p>\n<pre><code>private static Map&lt;String, String&gt; getHeadersFromRequest(HttpServletRequest httpServletRequest) {\n        var mapOfHeaders = new HashMap&lt;String, String&gt;();\n\n        Enumeration&lt;String&gt; headerNames = httpServletRequest.getHeaderNames();\n        if (headerNames != null) {\n            while (headerNames.hasMoreElements()) {\n                String headerName = headerNames.nextElement();\n                mapOfHeaders.put(headerName, httpServletRequest.getHeader(headerName));\n            }\n        }\n        return mapOfHeaders;\n    }\n</code></pre>\n<p>to return a list map of headers.</p>\n"}],"owner":{"account_id":12579561,"reputation":61,"user_id":9150771,"display_name":"user9150771"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2409,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":3,"score":3,"last_activity_date":1663669004,"creation_date":1642702053,"question_id":70791293,"body_markdown":"I&#39;m using these graphql dependencies:\r\n```\r\n    &quot;com.graphql-java-kickstart:graphql-spring-boot-starter:12.0.0&quot;,\r\n    &quot;com.graphql-java-kickstart:graphql-java-tools:12.0.0&quot;, \r\n```\r\n\r\nAnd how can I get httpRequestHeaders from the DataFetchingEnvironment class. I see `DataFetchingEnvironment.getContext()` is deprecated is there any other alternative?\r\n\r\nCurrent logic:\r\n```\r\n\t\tGraphQLServletContext servletContext = env.getContext(); //deprecated\r\n\r\n\t\tGraphQLContext qlContext = env.getGraphQlContext(); // No httpRequest\r\n\r\n\t\tvar httpRequest = servletContext.getHttpServletRequest();\r\n```","title":"GraphQL + Springboot + Http Headers","body":"<p>I'm using these graphql dependencies:</p>\n<pre><code>    &quot;com.graphql-java-kickstart:graphql-spring-boot-starter:12.0.0&quot;,\n    &quot;com.graphql-java-kickstart:graphql-java-tools:12.0.0&quot;, \n</code></pre>\n<p>And how can I get httpRequestHeaders from the DataFetchingEnvironment class. I see <code>DataFetchingEnvironment.getContext()</code> is deprecated is there any other alternative?</p>\n<p>Current logic:</p>\n<pre><code>        GraphQLServletContext servletContext = env.getContext(); //deprecated\n\n        GraphQLContext qlContext = env.getGraphQlContext(); // No httpRequest\n\n        var httpRequest = servletContext.getHttpServletRequest();\n</code></pre>\n"},{"tags":["java","methods","parameters"],"comments":[{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1663663241,"post_id":73783806,"comment_id":130287062,"body_markdown":"Since `setComponent` is a method on the same object, it can access `blrS` and `all_blr`  without the need to receive them as parameters.","body":"Since <code>setComponent</code> is a method on the same object, it can access <code>blrS</code> and <code>all_blr</code>  without the need to receive them as parameters."},{"owner":{"account_id":12101161,"reputation":11,"user_id":8842174,"display_name":"LOL - Coding ain&#39;t for me"},"score":0,"creation_date":1663663543,"post_id":73783806,"comment_id":130287173,"body_markdown":"@Holger I don&#39;t understand.\nThe method is used for 60 different objects, half of which use ```crS``` and ```all_cr``` instead of those other 2. If your point still stands, how would I make use of what you have said? What do I do differently?","body":"@Holger I don&#39;t understand. The method is used for 60 different objects, half of which use <code>crS</code> and <code>all_cr</code> instead of those other 2. If your point still stands, how would I make use of what you have said? What do I do differently?"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1663663611,"post_id":73783806,"comment_id":130287196,"body_markdown":"Thats what OOP is for. Design a class to handle *one* group, then create *two objects* of that class.","body":"Thats what OOP is for. Design a class to handle <i>one</i> group, then create <i>two objects</i> of that class."},{"owner":{"account_id":12101161,"reputation":11,"user_id":8842174,"display_name":"LOL - Coding ain&#39;t for me"},"score":0,"creation_date":1663663978,"post_id":73783806,"comment_id":130287329,"body_markdown":"@Holger I don&#39;t know how to do that lol, I did some Java in high school 10 years ago and now I decided to try making an app to make my job easier... Can you give me some help with that or refer me to a resource that might fit my needs?","body":"@Holger I don&#39;t know how to do that lol, I did some Java in high school 10 years ago and now I decided to try making an app to make my job easier... Can you give me some help with that or refer me to a resource that might fit my needs?"},{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":0,"creation_date":1663664032,"post_id":73783806,"comment_id":130287355,"body_markdown":"Why not return `room` from the method, and assign it to the variable when you call it? `blrS = setComponent(HP04, blrS, all_blr);`","body":"Why not return <code>room</code> from the method, and assign it to the variable when you call it? <code>blrS = setComponent(HP04, blrS, all_blr);</code>"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1663664324,"post_id":73783806,"comment_id":130287461,"body_markdown":"Note that the way your method is written, is already inconsistent, as you are changing the enabled status of `sendb` regardless of which checkbox group you are processing, without considering the status of the other group. Creating classes and objects is the thing you should understand before even starting. You may [make the tour](https://docs.oracle.com/javase/tutorial/index.html) to refresh your memories. Generally, its not a good idea to use a UI building tool as starting point and try to fill in the code, you should rather start with the application logic and then add the user interface","body":"Note that the way your method is written, is already inconsistent, as you are changing the enabled status of <code>sendb</code> regardless of which checkbox group you are processing, without considering the status of the other group. Creating classes and objects is the thing you should understand before even starting. You may <a href=\"https://docs.oracle.com/javase/tutorial/index.html\" rel=\"nofollow noreferrer\">make the tour</a> to refresh your memories. Generally, its not a good idea to use a UI building tool as starting point and try to fill in the code, you should rather start with the application logic and then add the user interface"},{"owner":{"account_id":12101161,"reputation":11,"user_id":8842174,"display_name":"LOL - Coding ain&#39;t for me"},"score":0,"creation_date":1663665992,"post_id":73783806,"comment_id":130287986,"body_markdown":"@Holger the panels are on a tabbed pane, so all cr checkboxes are disabled when you switch to the blr pane and the converse is also true, so only one group of checkboxes is processed at a time and the ints blrS and crS are set to zero when I switch panes.\nRobSpoor&#39;s solution worked though, thank you. And I&#39;ll definitely look into those tutorials.\n\nHow do I mark this question as solved now?","body":"@Holger the panels are on a tabbed pane, so all cr checkboxes are disabled when you switch to the blr pane and the converse is also true, so only one group of checkboxes is processed at a time and the ints blrS and crS are set to zero when I switch panes. RobSpoor&#39;s solution worked though, thank you. And I&#39;ll definitely look into those tutorials.  How do I mark this question as solved now?"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1663668032,"post_id":73783806,"comment_id":130288664,"body_markdown":"Since there are no answers posted, you could simply delete the question.","body":"Since there are no answers posted, you could simply delete the question."}],"answers":[{"tags":[],"owner":{"account_id":12101161,"reputation":11,"user_id":8842174,"display_name":"LOL - Coding ain&#39;t for me"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1663668603,"creation_date":1663668603,"answer_id":73785037,"question_id":73783806,"body_markdown":"Solution found:\r\n\r\n&quot;Why not return room from the method, and assign it to the variable when you call it? ```blrS = setComponent(HP04, blrS, all_blr);```&quot; \r\n Rob Spoor (in the comments to this post)","title":"Is there a way to update a variable outside a method that is used as a parameter in said method?","body":"<p>Solution found:</p>\n<p>&quot;Why not return room from the method, and assign it to the variable when you call it? <code>blrS = setComponent(HP04, blrS, all_blr);</code>&quot;\n Rob Spoor (in the comments to this post)</p>\n"}],"owner":{"account_id":12101161,"reputation":11,"user_id":8842174,"display_name":"LOL - Coding ain&#39;t for me"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":205,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73785037,"answer_count":1,"score":0,"last_activity_date":1663668603,"creation_date":1663662979,"question_id":73783806,"body_markdown":"I have 62 check boxes on 2 different panels.\r\n30 of them on each panel are for selecting PC names while 1 on each selects all.\r\n\r\nSo on each of those 60 that are just selecting items I have this code:\r\n```\r\nprivate void HP04ActionPerformed(java.awt.event.ActionEvent evt) {                                     \r\n        // TODO add your handling code here:\r\n        setComponent(HP04, blrS,all_blr);\r\n```\r\nHP04 is the name of a checkbox for one of the PCs, blrS is the name of an int that counts how many checkboxes are selected(there is another int for the boxes on the other panel), all_blr is the name of the checkbox that selects all on the blr panel.\r\n\r\nThis is the method I used:\r\n\r\n```\r\npublic void setComponent(javax.swing.JCheckBox  component, int room,javax.swing.JCheckBox  all)\r\n    {\r\n        System.out.println(&quot;Inside Component: &quot;+component.isSelected()); //testing to see if the method is actually being called\r\n        if (component.isSelected()){ //if checkbox is checked\r\n            room++; //records how many boxes are checked\r\n            if (room == 30)\r\n            {\r\n                all.setSelected(true);//autochecks &quot;all&quot; check box if all PCs are selected\r\n            }\r\n            if (!messagearea.getText().equals(&quot;&quot;))\r\n            {\r\n                sendb.setEnabled(true);//if any boxes are checked and the message area is populated, enable the button\r\n            }\r\n        }\r\n        else\r\n        {\r\n            room--;//records how many boxes are checked\r\n            all.setSelected(false);//unchecks the &quot;all&quot; check box if not all of them are checked\r\n            if (room == 0)\r\n            {\r\n                sendb.setEnabled(false);//disables button if no PCs are selected to be messaged\r\n            }\r\n        }\r\n        System.out.println(room); //testing int updates based on UI changes\r\n    }\r\n```\r\n\r\nNow the problem is room is only fetching the value of whatever variable is put in that parameter and then room itself is being modified. So in the example ```setComponent(HP04, blrS,all_blr);``` blrS is never changed.\r\n\r\nI know the code inside the method works, it worked before I decided to cut down on code by using a method, as before I had the code inside the method in the actionperformed for every checkbox before hand... Like this:\r\n\r\n```\r\nprivate void HP04ActionPerformed(java.awt.event.ActionEvent evt) {                                     \r\n        if (HP04.isSelected()){\r\n            blrS++;\r\n            if (blrS == 30)\r\n            {\r\n                all_blr.setSelected(true);\r\n            }\r\n            if (!messagearea.getText().equals(&quot;&quot;))\r\n            {\r\n                sendb.setEnabled(true);\r\n            }\r\n        }\r\n        else\r\n        {\r\n            blrS--;\r\n            all_blr.setSelected(false);\r\n            if (blrS == 0)\r\n            {\r\n                sendb.setEnabled(false);\r\n            }\r\n        }\r\n        System.out.println(blrS);\r\n    }         \r\n```\r\n\r\n\r\nIt&#39;s just understanding how parameters and methods works that is tripping me up.\r\nIt feels obvious that what I&#39;m doing shouldn&#39;t work, room is a variable inside the method... But how do I change that?\r\n","title":"Is there a way to update a variable outside a method that is used as a parameter in said method?","body":"<p>I have 62 check boxes on 2 different panels.\n30 of them on each panel are for selecting PC names while 1 on each selects all.</p>\n<p>So on each of those 60 that are just selecting items I have this code:</p>\n<pre><code>private void HP04ActionPerformed(java.awt.event.ActionEvent evt) {                                     \n        // TODO add your handling code here:\n        setComponent(HP04, blrS,all_blr);\n</code></pre>\n<p>HP04 is the name of a checkbox for one of the PCs, blrS is the name of an int that counts how many checkboxes are selected(there is another int for the boxes on the other panel), all_blr is the name of the checkbox that selects all on the blr panel.</p>\n<p>This is the method I used:</p>\n<pre><code>public void setComponent(javax.swing.JCheckBox  component, int room,javax.swing.JCheckBox  all)\n    {\n        System.out.println(&quot;Inside Component: &quot;+component.isSelected()); //testing to see if the method is actually being called\n        if (component.isSelected()){ //if checkbox is checked\n            room++; //records how many boxes are checked\n            if (room == 30)\n            {\n                all.setSelected(true);//autochecks &quot;all&quot; check box if all PCs are selected\n            }\n            if (!messagearea.getText().equals(&quot;&quot;))\n            {\n                sendb.setEnabled(true);//if any boxes are checked and the message area is populated, enable the button\n            }\n        }\n        else\n        {\n            room--;//records how many boxes are checked\n            all.setSelected(false);//unchecks the &quot;all&quot; check box if not all of them are checked\n            if (room == 0)\n            {\n                sendb.setEnabled(false);//disables button if no PCs are selected to be messaged\n            }\n        }\n        System.out.println(room); //testing int updates based on UI changes\n    }\n</code></pre>\n<p>Now the problem is room is only fetching the value of whatever variable is put in that parameter and then room itself is being modified. So in the example <code>setComponent(HP04, blrS,all_blr);</code> blrS is never changed.</p>\n<p>I know the code inside the method works, it worked before I decided to cut down on code by using a method, as before I had the code inside the method in the actionperformed for every checkbox before hand... Like this:</p>\n<pre><code>private void HP04ActionPerformed(java.awt.event.ActionEvent evt) {                                     \n        if (HP04.isSelected()){\n            blrS++;\n            if (blrS == 30)\n            {\n                all_blr.setSelected(true);\n            }\n            if (!messagearea.getText().equals(&quot;&quot;))\n            {\n                sendb.setEnabled(true);\n            }\n        }\n        else\n        {\n            blrS--;\n            all_blr.setSelected(false);\n            if (blrS == 0)\n            {\n                sendb.setEnabled(false);\n            }\n        }\n        System.out.println(blrS);\n    }         \n</code></pre>\n<p>It's just understanding how parameters and methods works that is tripping me up.\nIt feels obvious that what I'm doing shouldn't work, room is a variable inside the method... But how do I change that?</p>\n"},{"tags":["java","android","json","authentication","post"],"comments":[{"owner":{"account_id":11030035,"reputation":1372,"user_id":8101634,"display_name":"primo"},"score":0,"creation_date":1663647227,"post_id":73781400,"comment_id":130283007,"body_markdown":"You can parse your response in to a POJO class and from pojo class you will be easily able to access the status and all other keys which are you are getting in the login repsonse","body":"You can parse your response in to a POJO class and from pojo class you will be easily able to access the status and all other keys which are you are getting in the login repsonse"}],"answers":[{"tags":[],"owner":{"account_id":18571239,"reputation":4748,"user_id":13533028,"display_name":"Narendra_Nath"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663649314,"creation_date":1663649314,"answer_id":73781767,"question_id":73781400,"body_markdown":"Your response.body() must be a JsonEntity. something like this \r\n\r\n```\r\n{\r\nkey1: &quot;value&quot;,\r\nkey2: &quot;value&quot;\r\n}\r\n```\r\n\r\nSo basically you have to **pick** the key that is relevant to you using `value=response.body.optString(&quot;key1&quot;)` then use the value and check if you&#39;re getting the correct value and do the rest of the operations. \r\nThe response.body() gives you the whole Json.","title":"How to enter next activity after get Result from SERVER POST?","body":"<p>Your response.body() must be a JsonEntity. something like this</p>\n<pre><code>{\nkey1: &quot;value&quot;,\nkey2: &quot;value&quot;\n}\n</code></pre>\n<p>So basically you have to <strong>pick</strong> the key that is relevant to you using <code>value=response.body.optString(&quot;key1&quot;)</code> then use the value and check if you're getting the correct value and do the rest of the operations.\nThe response.body() gives you the whole Json.</p>\n"}],"owner":{"account_id":25469650,"reputation":1,"user_id":19268072,"display_name":"kimhong toh"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1663667805,"creation_date":1663645103,"question_id":73781400,"body_markdown":"im new to android java coding, i need help with my login page, how should i enter to next activity when get result &quot;Status&quot; &quot;Y&quot;, tried few solution its not working, what should i do? \r\n\r\n    btSubmit.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n\r\n\r\n\r\n                JSONObject jsonObject = new JSONObject();\r\n                \r\n                try {\r\n                    \r\n                    jsonObject.put(&quot;app_id&quot;, &quot;123456&quot;);\r\n                    jsonObject.put(&quot;username&quot;,etUsername.getText().toString());\r\n                    jsonObject.put(&quot;password&quot;,etPassword.getText().toString());\r\n                    jsonObject.put(&quot;firebase_token&quot;, &quot;123456&quot;);\r\n                } catch (JSONException e) {\r\n                    e.printStackTrace();\r\n                }\r\n\r\n                OkHttpClient client = new OkHttpClient();\r\n                MediaType JSON = MediaType.parse(&quot;application/json; charset=utf-8&quot;);\r\n                // put your json here\r\n                RequestBody body = RequestBody.create(JSON, jsonObject.toString());\r\n                Request request = new Request.Builder()\r\n                        .url(&quot;url&quot;)\r\n                        .post(body)\r\n                        .build();\r\n\r\n\r\n\r\n\r\n                Response response = null;\r\n                client.newCall(request).enqueue(new Callback() {\r\n                    @Override\r\n                    public void onFailure(Call call, IOException e) {\r\n                        e.printStackTrace();\r\n                    }\r\n\r\n                    @Override\r\n                    public void onResponse(Call call, Response response) throws IOException {\r\n                        if (response.isSuccessful()) {\r\n                            String myResponse = response.body().string();\r\n\r\n                            MainActivity.this.runOnUiThread(new Runnable() {\r\n                                @Override\r\n                                public void run() {\r\n                                    TextViewResult.setText(myResponse);\r\n                                    if (myResponse == &quot;Y&quot;) {\r\n                                        Intent intent = new Intent(MainActivity.this, MainActivity2.class);\r\n                                        // start the activity connect to the specified class\r\n                                        startActivity(intent);\r\n                                    }\r\n                                }\r\n                            });\r\n\r\n\r\n\r\n                        }\r\n                    }\r\n                });\r\n\r\n            }\r\n\r\n\r\n        }\r\n\r\n        );\r\n\r\n\r\n\r\n![Login Page][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/woowZ.png\r\n\r\n\r\nPicture here, I get lot of result from my server, just need to detect &quot;Status&quot; &quot;Y&quot; and access the next activity, any suggestions?\r\n\r\n\r\n    if (response.isSuccessful()) {\r\n                            String myResponse = response.body().string();\r\n                            MainActivity.this.runOnUiThread(new Runnable() {\r\n                                @Override\r\n                                public void run() {\r\n                                     try {\r\n                                         JSONObject obj = new JSONObject(myResponse);\r\n                                         System.out.println(obj.getString(&quot;status&quot;));\r\n                                         System.out.println(obj.getString(&quot;status_desc&quot;));\r\n                                         System.out.println(obj.getString(&quot;token_id&quot;));\r\n                                     }\r\n                                     catch (JSONException e) {\r\n                                         e.printStackTrace();\r\n                                         TextViewResult.setText(JSONObject.getString(&quot;status&quot;));\r\n                                         if (JSONObject.getString(&quot;status&quot;) == &quot;Y&quot;) {\r\n                                             Intent intent = new Intent(MainActivity.this, MainActivity2.class);\r\n                                             // start the activity connect to the specified class\r\n                                             startActivity(intent);}\r\n                                      }\r\n                                     }\r\n                            });\r\n\r\n\r\n\r\n                        }\r\n\r\nthese r coding i added later, but still cant access to next activity, any suggestion?","title":"How to enter next activity after get Result from SERVER POST?","body":"<p>im new to android java coding, i need help with my login page, how should i enter to next activity when get result &quot;Status&quot; &quot;Y&quot;, tried few solution its not working, what should i do?</p>\n<pre><code>btSubmit.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View v) {\n\n\n\n            JSONObject jsonObject = new JSONObject();\n            \n            try {\n                \n                jsonObject.put(&quot;app_id&quot;, &quot;123456&quot;);\n                jsonObject.put(&quot;username&quot;,etUsername.getText().toString());\n                jsonObject.put(&quot;password&quot;,etPassword.getText().toString());\n                jsonObject.put(&quot;firebase_token&quot;, &quot;123456&quot;);\n            } catch (JSONException e) {\n                e.printStackTrace();\n            }\n\n            OkHttpClient client = new OkHttpClient();\n            MediaType JSON = MediaType.parse(&quot;application/json; charset=utf-8&quot;);\n            // put your json here\n            RequestBody body = RequestBody.create(JSON, jsonObject.toString());\n            Request request = new Request.Builder()\n                    .url(&quot;url&quot;)\n                    .post(body)\n                    .build();\n\n\n\n\n            Response response = null;\n            client.newCall(request).enqueue(new Callback() {\n                @Override\n                public void onFailure(Call call, IOException e) {\n                    e.printStackTrace();\n                }\n\n                @Override\n                public void onResponse(Call call, Response response) throws IOException {\n                    if (response.isSuccessful()) {\n                        String myResponse = response.body().string();\n\n                        MainActivity.this.runOnUiThread(new Runnable() {\n                            @Override\n                            public void run() {\n                                TextViewResult.setText(myResponse);\n                                if (myResponse == &quot;Y&quot;) {\n                                    Intent intent = new Intent(MainActivity.this, MainActivity2.class);\n                                    // start the activity connect to the specified class\n                                    startActivity(intent);\n                                }\n                            }\n                        });\n\n\n\n                    }\n                }\n            });\n\n        }\n\n\n    }\n\n    );\n</code></pre>\n<p><img src=\"https://i.stack.imgur.com/woowZ.png\" alt=\"Login Page\" /></p>\n<p>Picture here, I get lot of result from my server, just need to detect &quot;Status&quot; &quot;Y&quot; and access the next activity, any suggestions?</p>\n<pre><code>if (response.isSuccessful()) {\n                        String myResponse = response.body().string();\n                        MainActivity.this.runOnUiThread(new Runnable() {\n                            @Override\n                            public void run() {\n                                 try {\n                                     JSONObject obj = new JSONObject(myResponse);\n                                     System.out.println(obj.getString(&quot;status&quot;));\n                                     System.out.println(obj.getString(&quot;status_desc&quot;));\n                                     System.out.println(obj.getString(&quot;token_id&quot;));\n                                 }\n                                 catch (JSONException e) {\n                                     e.printStackTrace();\n                                     TextViewResult.setText(JSONObject.getString(&quot;status&quot;));\n                                     if (JSONObject.getString(&quot;status&quot;) == &quot;Y&quot;) {\n                                         Intent intent = new Intent(MainActivity.this, MainActivity2.class);\n                                         // start the activity connect to the specified class\n                                         startActivity(intent);}\n                                  }\n                                 }\n                        });\n\n\n\n                    }\n</code></pre>\n<p>these r coding i added later, but still cant access to next activity, any suggestion?</p>\n"},{"tags":["java","spring","spring-boot","maven","gradle"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1663570069,"post_id":73763760,"comment_id":130262035,"body_markdown":"The issue is not your code, but your migrated build. Show your `build.gradle`.","body":"The issue is not your code, but your migrated build. Show your <code>build.gradle</code>."},{"owner":{"account_id":24018229,"reputation":313,"user_id":18000902,"display_name":"Omar Hussien"},"score":0,"creation_date":1663582532,"post_id":73763760,"comment_id":130265801,"body_markdown":"check Unicode for java file must be utf8 not utf8bom","body":"check Unicode for java file must be utf8 not utf8bom"}],"answers":[{"tags":[],"owner":{"account_id":26317294,"reputation":210,"user_id":19979867,"display_name":"Leonardo Emmanuel de Azevedo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663667608,"creation_date":1663667608,"answer_id":73784812,"question_id":73763760,"body_markdown":"The problem is not related to the migration from Maven to Gradle, it&#39;s related to Project Lombok. Enable Project Lombok in your IDE and all the errors should be gone.\r\n\r\nYou are getting this:\r\n```\r\nerror: cannot find symbol\r\n        log.info(&quot;Categories reading started&quot;);\r\n```\r\nand using the annotation ```@Slf4j```","title":"After changing the automation tool (maven -&gt; gradle), the application does not build","body":"<p>The problem is not related to the migration from Maven to Gradle, it's related to Project Lombok. Enable Project Lombok in your IDE and all the errors should be gone.</p>\n<p>You are getting this:</p>\n<pre><code>error: cannot find symbol\n        log.info(&quot;Categories reading started&quot;);\n</code></pre>\n<p>and using the annotation <code>@Slf4j</code></p>\n"}],"owner":{"account_id":26091551,"reputation":17,"user_id":19788361,"display_name":"jadhamterra"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1663667608,"creation_date":1663512947,"question_id":73763760,"body_markdown":"I replaced maven with gradle in the project. Previously, the application worked without any problems. Now using the `gradle clean build` command, the application throws a few errors regarding e.g. constructor or logger, nothing like this appeared when using maven. What could be the cause of this and possibly how to fix it?\r\n\r\n**Some example of errors:**\r\n\r\n    error: variable itemService not initialized in the default constructor\r\n    \tprivate final ItemService itemService;\r\n\r\n**ItemController**\r\n\r\n    @RequiredArgsConstructor\r\n    @RestController(&quot;GraphItemController&quot;)\r\n    @RequestMapping(&quot;/api/stats&quot;)\r\n    public class ItemController {\r\n    \r\n    \tprivate final ItemService itemService;\r\n    \r\n    \t@GetMapping\r\n    \tpublic ResponseEntity&lt;List&lt;ItemsByCategoryAndTypeStatisticDTO&gt;&gt; getItemsByCategoryAndTypeStatistic() {\r\n    \t\tList&lt;ItemsByCategoryAndTypeStatisticDTO&gt; itemsByCategoryAndTypeStatisticDTOs = itemService\r\n    \t\t\t\t.getItemsByCategoryAndTypeStatistic();\r\n    \t\treturn new ResponseEntity&lt;&gt;(itemsByCategoryAndTypeStatisticDTOs, HttpStatus.OK);\r\n    \t}\r\n    }\r\n\r\n**ItemServiceImpl** (error relates to logger)\r\n\r\n    error: cannot find symbol\r\n    \t\tlog.info(&quot;Categories reading started&quot;);\r\n    \t\t^\r\n      symbol:   variable log\r\n      location: class ItemServiceImpl\r\n\r\n**ItemServiceImpl**\r\n\r\n    @Slf4j\r\n    @RequiredArgsConstructor\r\n    @Service(&quot;GraphItemServiceImpl&quot;)\r\n    public class ItemServiceImpl implements ItemService {\r\n    \r\n    \tprivate final ItemRepository itemRepository;\r\n    \tprivate final TypeRepository typeRepository;\r\n    \tprivate final CurrentUser currentUser;\r\n    \r\n    \t@Override\r\n    \tpublic List&lt;ItemsByCategoryAndTypeStatisticDTO&gt; getItemsByCategoryAndTypeStatistic() {\r\n    \r\n    \t\tlog.info(&quot;Categories reading started&quot;);\r\n    \t\tMap&lt;String, ItemsByCategoryAndTypeStatisticDTO&gt; byCategory = findByCategory();\r\n    \t\tMap&lt;String, ItemsByCategoryAndTypeStatisticDTO&gt; byCategoryAndType = findByCategoryAndType();\r\n    \t\tlog.info(&quot;Categories reading completed&quot;);\r\n    \r\n    \t\tif(byCategory.isEmpty()) {\r\n    \t\t\treturn Collections.emptyList();\r\n    \t\t}\r\n    \t\tenterItemsNumberForTypeInRelatedCategoryDTO(byCategoryAndType, byCategory);\r\n    \r\n    \t\tList&lt;ItemsByCategoryAndTypeStatisticDTO&gt; itemsByCategoryAndTypeStatisticDTOs = new ArrayList&lt;&gt;();\r\n    \t\titemsByCategoryAndTypeStatisticDTOs.addAll(byCategory.values());\r\n    \r\n    \t\treturn itemsByCategoryAndTypeStatisticDTOs;\r\n    \t}\r\n\r\n**Or something like this even though the environment does not show anything in red, only when building.**\r\n\r\n    itemByCategoryAndTypePairs.put(itemNumberByCategory.getAppaCategoryName(), itemNumberByCategory);\r\n    \t\t\t                                                   ^\r\n      symbol:   method getAppaCategoryName()\r\n      location: variable itemNumberByCategory of type ItemsByCategoryAndTypeStatisticDTO\r\n\r\n**ItemServiceImpl**\r\n\r\n    private Map&lt;String, ItemsByCategoryAndTypeStatisticDTO&gt; convertListToMap(\r\n    \t\t\tList&lt;ItemsByCategoryAndTypeStatisticDTO&gt; itemsNumberByCategories) {\r\n    \r\n    \t\tMap&lt;String, ItemsByCategoryAndTypeStatisticDTO&gt; itemByCategoryAndTypePairs = new TreeMap&lt;&gt;();\r\n    \t\titemsNumberByCategories.forEach(itemNumberByCategory -&gt; {\r\n    \t\t\titemByCategoryAndTypePairs.put(itemNumberByCategory.getAppaCategoryName(), itemNumberByCategory);\r\n    \t\t});\r\n    \r\n    \t\treturn itemByCategoryAndTypePairs;\r\n    \t}","title":"After changing the automation tool (maven -&gt; gradle), the application does not build","body":"<p>I replaced maven with gradle in the project. Previously, the application worked without any problems. Now using the <code>gradle clean build</code> command, the application throws a few errors regarding e.g. constructor or logger, nothing like this appeared when using maven. What could be the cause of this and possibly how to fix it?</p>\n<p><strong>Some example of errors:</strong></p>\n<pre><code>error: variable itemService not initialized in the default constructor\n    private final ItemService itemService;\n</code></pre>\n<p><strong>ItemController</strong></p>\n<pre><code>@RequiredArgsConstructor\n@RestController(&quot;GraphItemController&quot;)\n@RequestMapping(&quot;/api/stats&quot;)\npublic class ItemController {\n\n    private final ItemService itemService;\n\n    @GetMapping\n    public ResponseEntity&lt;List&lt;ItemsByCategoryAndTypeStatisticDTO&gt;&gt; getItemsByCategoryAndTypeStatistic() {\n        List&lt;ItemsByCategoryAndTypeStatisticDTO&gt; itemsByCategoryAndTypeStatisticDTOs = itemService\n                .getItemsByCategoryAndTypeStatistic();\n        return new ResponseEntity&lt;&gt;(itemsByCategoryAndTypeStatisticDTOs, HttpStatus.OK);\n    }\n}\n</code></pre>\n<p><strong>ItemServiceImpl</strong> (error relates to logger)</p>\n<pre><code>error: cannot find symbol\n        log.info(&quot;Categories reading started&quot;);\n        ^\n  symbol:   variable log\n  location: class ItemServiceImpl\n</code></pre>\n<p><strong>ItemServiceImpl</strong></p>\n<pre><code>@Slf4j\n@RequiredArgsConstructor\n@Service(&quot;GraphItemServiceImpl&quot;)\npublic class ItemServiceImpl implements ItemService {\n\n    private final ItemRepository itemRepository;\n    private final TypeRepository typeRepository;\n    private final CurrentUser currentUser;\n\n    @Override\n    public List&lt;ItemsByCategoryAndTypeStatisticDTO&gt; getItemsByCategoryAndTypeStatistic() {\n\n        log.info(&quot;Categories reading started&quot;);\n        Map&lt;String, ItemsByCategoryAndTypeStatisticDTO&gt; byCategory = findByCategory();\n        Map&lt;String, ItemsByCategoryAndTypeStatisticDTO&gt; byCategoryAndType = findByCategoryAndType();\n        log.info(&quot;Categories reading completed&quot;);\n\n        if(byCategory.isEmpty()) {\n            return Collections.emptyList();\n        }\n        enterItemsNumberForTypeInRelatedCategoryDTO(byCategoryAndType, byCategory);\n\n        List&lt;ItemsByCategoryAndTypeStatisticDTO&gt; itemsByCategoryAndTypeStatisticDTOs = new ArrayList&lt;&gt;();\n        itemsByCategoryAndTypeStatisticDTOs.addAll(byCategory.values());\n\n        return itemsByCategoryAndTypeStatisticDTOs;\n    }\n</code></pre>\n<p><strong>Or something like this even though the environment does not show anything in red, only when building.</strong></p>\n<pre><code>itemByCategoryAndTypePairs.put(itemNumberByCategory.getAppaCategoryName(), itemNumberByCategory);\n                                                               ^\n  symbol:   method getAppaCategoryName()\n  location: variable itemNumberByCategory of type ItemsByCategoryAndTypeStatisticDTO\n</code></pre>\n<p><strong>ItemServiceImpl</strong></p>\n<pre><code>private Map&lt;String, ItemsByCategoryAndTypeStatisticDTO&gt; convertListToMap(\n            List&lt;ItemsByCategoryAndTypeStatisticDTO&gt; itemsNumberByCategories) {\n\n        Map&lt;String, ItemsByCategoryAndTypeStatisticDTO&gt; itemByCategoryAndTypePairs = new TreeMap&lt;&gt;();\n        itemsNumberByCategories.forEach(itemNumberByCategory -&gt; {\n            itemByCategoryAndTypePairs.put(itemNumberByCategory.getAppaCategoryName(), itemNumberByCategory);\n        });\n\n        return itemByCategoryAndTypePairs;\n    }\n</code></pre>\n"},{"tags":["java","xml"],"comments":[{"owner":{"account_id":9879926,"reputation":4097,"user_id":7316365,"accept_rate":80,"display_name":"Vivick"},"score":2,"creation_date":1527165757,"post_id":50509663,"comment_id":88031462,"body_markdown":"All you need is a good old for loop","body":"All you need is a good old for loop"},{"owner":{"account_id":12975459,"reputation":1665,"user_id":9379617,"display_name":"Ben"},"score":3,"creation_date":1527165793,"post_id":50509663,"comment_id":88031488,"body_markdown":"Looking at the documentations a NodeList has exactly two methods. What a coincidence that they are exactly the two you need. [Have a look at the documentation](https://docs.oracle.com/javase/7/docs/api/org/w3c/dom/NodeList.html) and I am sure you will find a good solution.","body":"Looking at the documentations a NodeList has exactly two methods. What a coincidence that they are exactly the two you need. <a href=\"https://docs.oracle.com/javase/7/docs/api/org/w3c/dom/NodeList.html\" rel=\"nofollow noreferrer\">Have a look at the documentation</a> and I am sure you will find a good solution."},{"owner":{"account_id":7226774,"reputation":19717,"user_id":5515060,"accept_rate":100,"display_name":"Lino"},"score":0,"creation_date":1527166135,"post_id":50509663,"comment_id":88031776,"body_markdown":"If you don&#39;t want a typed iterator, you could use `com.sun.xml.internal.ws.util.xml.NodeListIterator`","body":"If you don&#39;t want a typed iterator, you could use <code>com.sun.xml.internal.ws.util.xml.NodeListIterator</code>"}],"answers":[{"tags":[],"owner":{"account_id":1571896,"reputation":1951,"user_id":1459423,"accept_rate":87,"display_name":"patstuart"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1527167303,"creation_date":1527166567,"answer_id":50510046,"question_id":50509663,"body_markdown":"You can just implement via anonymous classes.\r\n\r\n\treturn new NodeSetData() {\r\n\t\t@Override\r\n\t\tpublic Iterator iterator() {\r\n\t\t\treturn new Iterator() {\r\n\t\t\t\tprivate int i = 0;\r\n\t\t\t\t\r\n\t\t\t\t@Override\r\n\t\t\t\tpublic boolean hasNext() {\r\n\t\t\t\t\treturn nodeList.getLength() &lt; i;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t@Override\r\n\t\t\t\tpublic Node next() {\r\n\t\t\t\t\treturn nodeList.item(i++);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\t};","title":"Convert NodeList to List in Java","body":"<p>You can just implement via anonymous classes.</p>\n\n<pre><code>return new NodeSetData() {\n    @Override\n    public Iterator iterator() {\n        return new Iterator() {\n            private int i = 0;\n\n            @Override\n            public boolean hasNext() {\n                return nodeList.getLength() &lt; i;\n            }\n\n            @Override\n            public Node next() {\n                return nodeList.item(i++);\n            }\n        };\n    }\n};\n</code></pre>\n"},{"tags":[],"owner":{"account_id":332245,"reputation":16487,"user_id":657427,"accept_rate":67,"display_name":"Christophe Roussy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1600777875,"creation_date":1600777875,"answer_id":64009784,"question_id":50509663,"body_markdown":"As this may be useful for others, here is a simple function doing it:\r\n\r\n      public static List&lt;Element&gt; getElements(final NodeList nodeList) {\r\n        final int len = nodeList.getLength();\r\n        final List&lt;Element&gt; elements = new ArrayList&lt;&gt;(len);\r\n        for (int i = 0; i &lt; len; i++) {\r\n          final Node node = nodeList.item(i);\r\n          if (node.getNodeType() == Node.ELEMENT_NODE) {\r\n            elements.add((Element) node);\r\n          }\r\n          // Ignore other node types.\r\n        }\r\n        return elements;\r\n      }","title":"Convert NodeList to List in Java","body":"<p>As this may be useful for others, here is a simple function doing it:</p>\n<pre><code>  public static List&lt;Element&gt; getElements(final NodeList nodeList) {\n    final int len = nodeList.getLength();\n    final List&lt;Element&gt; elements = new ArrayList&lt;&gt;(len);\n    for (int i = 0; i &lt; len; i++) {\n      final Node node = nodeList.item(i);\n      if (node.getNodeType() == Node.ELEMENT_NODE) {\n        elements.add((Element) node);\n      }\n      // Ignore other node types.\n    }\n    return elements;\n  }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25601143,"reputation":41,"user_id":19376122,"display_name":"Miguel Campos"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1663667043,"creation_date":1663667043,"answer_id":73784668,"question_id":50509663,"body_markdown":"Found this answer provided by [KeyMaker00][1] while searching for the same.\r\n\r\nhttps://stackoverflow.com/a/50169546/19376122\r\n\r\nHe used IntStream and map function to iterate through the NodeList and map it to a List&lt;Nodes&gt;;\r\n\r\n    List&lt;Node&gt; nodes = IntStream.range(0, nodeList.getLength())\r\n        .mapToObj(nodeList::item)\r\n        .collect(Collectors.toList());\r\n\r\n  [1]: https://stackoverflow.com/users/1039203/keymaker00","title":"Convert NodeList to List in Java","body":"<p>Found this answer provided by <a href=\"https://stackoverflow.com/users/1039203/keymaker00\">KeyMaker00</a> while searching for the same.</p>\n<p><a href=\"https://stackoverflow.com/a/50169546/19376122\">https://stackoverflow.com/a/50169546/19376122</a></p>\n<p>He used IntStream and map function to iterate through the NodeList and map it to a List;</p>\n<pre><code>List&lt;Node&gt; nodes = IntStream.range(0, nodeList.getLength())\n    .mapToObj(nodeList::item)\n    .collect(Collectors.toList());\n</code></pre>\n"}],"owner":{"account_id":10162114,"reputation":247,"user_id":7505245,"display_name":"Shubham Rajput"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6431,"favorite_count":0,"down_vote_count":3,"up_vote_count":2,"accepted_answer_id":50510046,"answer_count":3,"score":-1,"last_activity_date":1663667043,"creation_date":1527165430,"question_id":50509663,"body_markdown":"I need to convert a NodeList to List in order to return an iterator over the List.\r\n\r\nMy requirement is to return NodeSetData objects, the iterator method MUST return an iteration over objects of type org.w3c.dom.Node.\r\n\r\nI have a NodeList containing a list of all of my Nodes that are required to be returned. In order to return an Iterator, I need to convert NodeList to List.\r\n\r\nI have looked through a bunch of stackoverflow answer but most of them relates to conversion of NodeList to String.\r\n\r\nHere is the function that is going to be used to return iterator.\r\n\r\n    return new NodeSetData() {\r\n\r\n\t             public Iterator iterator() {\r\n\r\n\t                 return l.iterator();\r\n\t             };\r\n\t         };\r\n\r\nAny leads regarding how to convert NodeList to List will really help.","title":"Convert NodeList to List in Java","body":"<p>I need to convert a NodeList to List in order to return an iterator over the List.</p>\n\n<p>My requirement is to return NodeSetData objects, the iterator method MUST return an iteration over objects of type org.w3c.dom.Node.</p>\n\n<p>I have a NodeList containing a list of all of my Nodes that are required to be returned. In order to return an Iterator, I need to convert NodeList to List.</p>\n\n<p>I have looked through a bunch of stackoverflow answer but most of them relates to conversion of NodeList to String.</p>\n\n<p>Here is the function that is going to be used to return iterator.</p>\n\n<pre><code>return new NodeSetData() {\n\n             public Iterator iterator() {\n\n                 return l.iterator();\n             };\n         };\n</code></pre>\n\n<p>Any leads regarding how to convert NodeList to List will really help.</p>\n"},{"tags":["java","spring","spring-mvc","web-applications"],"comments":[{"owner":{"account_id":541020,"reputation":2142,"user_id":909414,"accept_rate":62,"display_name":"Rohit"},"score":2,"creation_date":1440770551,"post_id":32269192,"comment_id":52424640,"body_markdown":"As the error says, there is no transaction. Annotate the register method with `@Transaction`.","body":"As the error says, there is no transaction. Annotate the register method with <code>@Transaction</code>."},{"owner":{"account_id":5900048,"reputation":67,"user_id":4643879,"display_name":"jodoro"},"score":0,"creation_date":1682949135,"post_id":32269192,"comment_id":134288478,"body_markdown":"@Rohit very informing","body":"@Rohit very informing"}],"answers":[{"tags":[],"owner":{"account_id":3534671,"reputation":5376,"user_id":2953282,"display_name":"mlg"},"down_vote_count":4,"up_vote_count":498,"is_accepted":true,"score":494,"last_activity_date":1495523726,"creation_date":1442165580,"answer_id":32552558,"question_id":32269192,"body_markdown":"I had the same problem and I annotated the method as `@Transactional` and it worked.\r\n\r\nUPDATE: checking the spring documentation it looks like by default the PersistenceContext is of type Transaction, so that&#39;s why the method has to be transactional (http://docs.spring.io/spring/docs/current/spring-framework-reference/html/orm.html):\r\n\r\n&gt; The @PersistenceContext annotation has an optional attribute type,\r\n&gt; which defaults to PersistenceContextType.TRANSACTION. This default is\r\n&gt; what you need to receive a shared EntityManager proxy. The\r\n&gt; alternative, PersistenceContextType.EXTENDED, is a completely\r\n&gt; different affair: This results in a so-called extended EntityManager,\r\n&gt; which is not thread-safe and hence must not be used in a concurrently\r\n&gt; accessed component such as a Spring-managed singleton bean. Extended\r\n&gt; EntityManagers are only supposed to be used in stateful components\r\n&gt; that, for example, reside in a session, with the lifecycle of the\r\n&gt; EntityManager not tied to a current transaction but rather being\r\n&gt; completely up to the application.","title":"Spring - No EntityManager with actual transaction available for current thread - cannot reliably process &#39;persist&#39; call","body":"<p>I had the same problem and I annotated the method as <code>@Transactional</code> and it worked.</p>\n\n<p>UPDATE: checking the spring documentation it looks like by default the PersistenceContext is of type Transaction, so that's why the method has to be transactional (<a href=\"http://docs.spring.io/spring/docs/current/spring-framework-reference/html/orm.html\" rel=\"noreferrer\">http://docs.spring.io/spring/docs/current/spring-framework-reference/html/orm.html</a>):</p>\n\n<blockquote>\n  <p>The @PersistenceContext annotation has an optional attribute type,\n  which defaults to PersistenceContextType.TRANSACTION. This default is\n  what you need to receive a shared EntityManager proxy. The\n  alternative, PersistenceContextType.EXTENDED, is a completely\n  different affair: This results in a so-called extended EntityManager,\n  which is not thread-safe and hence must not be used in a concurrently\n  accessed component such as a Spring-managed singleton bean. Extended\n  EntityManagers are only supposed to be used in stateful components\n  that, for example, reside in a session, with the lifecycle of the\n  EntityManager not tied to a current transaction but rather being\n  completely up to the application.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":7254967,"reputation":730,"user_id":5533959,"display_name":"Chris March"},"down_vote_count":0,"up_vote_count":34,"is_accepted":false,"score":34,"last_activity_date":1454831953,"creation_date":1454831953,"answer_id":35251129,"question_id":32269192,"body_markdown":"This error had me foxed for three days, the situation I faced produced the same error. Following all the advice I could find, I played with the configuration but to no avail.\r\n\r\nEventually I found it, the difference, the Service I was executing was contained in a common jar, the issue turned out to be AspectJ not treating the Service instantiation the same. In effect the proxy was simply calling the underlying method without all the normal Spring magic being executed before the method call.\r\n\r\nIn the end the @Scope annotation placed on the service as per the example solved the issue:\r\n\r\n    @Service\r\n    @Scope(proxyMode = ScopedProxyMode.INTERFACES)\r\n    @Transactional\r\n    public class CoreServiceImpl implements CoreService {\r\n        @PersistenceContext\r\n        protected EntityManager entityManager;\r\n    \r\n        @Override\r\n        public final &lt;T extends AbstractEntity&gt; int deleteAll(Class&lt;T&gt; clazz) {\r\n            CriteriaDelete&lt;T&gt; criteriaDelete = entityManager.getCriteriaBuilder().createCriteriaDelete(clazz);\r\n            criteriaDelete.from(clazz);\r\n            return entityManager.createQuery(criteriaDelete).executeUpdate();\r\n        }\r\n    \r\n    }\r\n\r\nThe method I have posted is a delete method but the annotations affect all persistence methods in the same way.\r\n\r\nI hope this post helps someone else who has struggled with the same issue when loading a service from a jar","title":"Spring - No EntityManager with actual transaction available for current thread - cannot reliably process &#39;persist&#39; call","body":"<p>This error had me foxed for three days, the situation I faced produced the same error. Following all the advice I could find, I played with the configuration but to no avail.</p>\n\n<p>Eventually I found it, the difference, the Service I was executing was contained in a common jar, the issue turned out to be AspectJ not treating the Service instantiation the same. In effect the proxy was simply calling the underlying method without all the normal Spring magic being executed before the method call.</p>\n\n<p>In the end the @Scope annotation placed on the service as per the example solved the issue:</p>\n\n<pre><code>@Service\n@Scope(proxyMode = ScopedProxyMode.INTERFACES)\n@Transactional\npublic class CoreServiceImpl implements CoreService {\n    @PersistenceContext\n    protected EntityManager entityManager;\n\n    @Override\n    public final &lt;T extends AbstractEntity&gt; int deleteAll(Class&lt;T&gt; clazz) {\n        CriteriaDelete&lt;T&gt; criteriaDelete = entityManager.getCriteriaBuilder().createCriteriaDelete(clazz);\n        criteriaDelete.from(clazz);\n        return entityManager.createQuery(criteriaDelete).executeUpdate();\n    }\n\n}\n</code></pre>\n\n<p>The method I have posted is a delete method but the annotations affect all persistence methods in the same way.</p>\n\n<p>I hope this post helps someone else who has struggled with the same issue when loading a service from a jar</p>\n"},{"tags":[],"owner":{"account_id":5044372,"reputation":1961,"user_id":4050848,"display_name":"Kishore Guruswamy"},"down_vote_count":0,"up_vote_count":136,"is_accepted":false,"score":136,"last_activity_date":1493074192,"creation_date":1464381438,"answer_id":37491875,"question_id":32269192,"body_markdown":"I got this exception while attempting to use a deleteBy custom method in the spring data repository. The operation was attempted from a JUnit test class.\r\n\r\nThe exception does not occur upon using the `@Transactional` annotation at the JUnit class level.","title":"Spring - No EntityManager with actual transaction available for current thread - cannot reliably process &#39;persist&#39; call","body":"<p>I got this exception while attempting to use a deleteBy custom method in the spring data repository. The operation was attempted from a JUnit test class.</p>\n\n<p>The exception does not occur upon using the <code>@Transactional</code> annotation at the JUnit class level.</p>\n"},{"tags":[],"owner":{"account_id":404344,"reputation":1466,"user_id":772615,"accept_rate":14,"display_name":"ropo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1466599123,"creation_date":1466599123,"answer_id":37968273,"question_id":32269192,"body_markdown":"I removed the mode from \r\n\r\n    &lt;tx:annotation-driven mode=&quot;aspectj&quot;\r\n    transaction-manager=&quot;transactionManager&quot; /&gt;\r\n\r\n to make this work","title":"Spring - No EntityManager with actual transaction available for current thread - cannot reliably process &#39;persist&#39; call","body":"<p>I removed the mode from </p>\n\n<pre><code>&lt;tx:annotation-driven mode=\"aspectj\"\ntransaction-manager=\"transactionManager\" /&gt;\n</code></pre>\n\n<p>to make this work</p>\n"},{"tags":[],"owner":{"account_id":8785799,"reputation":79,"user_id":6567802,"display_name":"Stone Feng"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1547475297,"creation_date":1471077898,"answer_id":38930936,"question_id":32269192,"body_markdown":"I had the same problem and I added `tx:annotation-driven` in `applicationContext.xml` and it worked.","title":"Spring - No EntityManager with actual transaction available for current thread - cannot reliably process &#39;persist&#39; call","body":"<p>I had the same problem and I added <code>tx:annotation-driven</code> in <code>applicationContext.xml</code> and it worked.</p>\n"},{"tags":[],"owner":{"account_id":2314530,"reputation":1345,"user_id":4527766,"accept_rate":40,"display_name":"Sergej Werfel"},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1547475285,"creation_date":1476279667,"answer_id":40000205,"question_id":32269192,"body_markdown":"I had the same error because I switched from XML- to java-configuration.\r\n\r\nThe point was, I didn&#39;t migrate `&lt;tx:annotation-driven/&gt;` tag, as Stone Feng suggested.\r\n\r\nSo I just added `@EnableTransactionManagement` as suggested here\r\nhttps://stackoverflow.com/questions/3722310/setting-up-annotation-driven-transactions-in-spring-in-configuration-class, and it works now","title":"Spring - No EntityManager with actual transaction available for current thread - cannot reliably process &#39;persist&#39; call","body":"<p>I had the same error because I switched from XML- to java-configuration.</p>\n\n<p>The point was, I didn't migrate <code>&lt;tx:annotation-driven/&gt;</code> tag, as Stone Feng suggested.</p>\n\n<p>So I just added <code>@EnableTransactionManagement</code> as suggested here\n<a href=\"https://stackoverflow.com/questions/3722310/setting-up-annotation-driven-transactions-in-spring-in-configuration-class\">Setting Up Annotation Driven Transactions in Spring in @Configuration Class</a>, and it works now</p>\n"},{"tags":[],"owner":{"account_id":10720626,"reputation":31,"user_id":7889847,"display_name":"Nick West"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1492607012,"creation_date":1492605678,"answer_id":43496070,"question_id":32269192,"body_markdown":"For us, the problem came down to same context settings in multiple configuration files.  Check you&#39;ve not duplicated the following in multiple config files.\r\n\r\n    &lt;context:property-placeholder location=&quot;classpath*:/module.properties&quot;/&gt;\r\n    &lt;context:component-scan base-package=&quot;....&quot; /&gt;","title":"Spring - No EntityManager with actual transaction available for current thread - cannot reliably process &#39;persist&#39; call","body":"<p>For us, the problem came down to same context settings in multiple configuration files.  Check you've not duplicated the following in multiple config files.</p>\n\n<pre><code>&lt;context:property-placeholder location=\"classpath*:/module.properties\"/&gt;\n&lt;context:component-scan base-package=\"....\" /&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10328382,"reputation":71,"user_id":7619165,"display_name":"YDZOGODOQ"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1513795239,"creation_date":1513795239,"answer_id":47912450,"question_id":32269192,"body_markdown":"I had the same error when accessing an already  transactional-annotated method from a non-transactional method within the same component:\r\n\r\n\r\n    Before:\r\n        @Component\r\n        public class MarketObserver {\r\n            @PersistenceContext(unitName = &quot;maindb&quot;)\r\n            private EntityManager em;\r\n        \r\n            @Transactional(value = &quot;txMain&quot;, propagation = Propagation.REQUIRES_NEW)\r\n            public void executeQuery() {\r\n              em.persist(....);\r\n            }\r\n        \r\n        \r\n            @Async\r\n            public void startObserving() {\r\n              executeQuery(); //&lt;-- Wrong\r\n            }\r\n        }\r\n    \r\n        //In another bean:\r\n         marketObserver.startObserving();\r\n\r\n\r\nI fixed the error by calling the executeQuery() on the self-referenced component:\r\n\r\n    Fixed version:\r\n        @Component\r\n        public class MarketObserver {\r\n            @PersistenceContext(unitName = &quot;maindb&quot;)\r\n            private EntityManager em;\r\n    \r\n            @Autowired\r\n            private GenericApplicationContext context;\r\n        \r\n            @Transactional(value = &quot;txMain&quot;, propagation = Propagation.REQUIRES_NEW)\r\n            public void executeQuery() {\r\n              em.persist(....);\r\n            }\r\n        \r\n        \r\n            @Async\r\n            public void startObserving() {\r\n              context.getBean(MarketObserver.class).executeQuery(); //&lt;-- Works\r\n            }\r\n        }","title":"Spring - No EntityManager with actual transaction available for current thread - cannot reliably process &#39;persist&#39; call","body":"<p>I had the same error when accessing an already  transactional-annotated method from a non-transactional method within the same component:</p>\n\n<pre><code>Before:\n    @Component\n    public class MarketObserver {\n        @PersistenceContext(unitName = \"maindb\")\n        private EntityManager em;\n\n        @Transactional(value = \"txMain\", propagation = Propagation.REQUIRES_NEW)\n        public void executeQuery() {\n          em.persist(....);\n        }\n\n\n        @Async\n        public void startObserving() {\n          executeQuery(); //&lt;-- Wrong\n        }\n    }\n\n    //In another bean:\n     marketObserver.startObserving();\n</code></pre>\n\n<p>I fixed the error by calling the executeQuery() on the self-referenced component:</p>\n\n<pre><code>Fixed version:\n    @Component\n    public class MarketObserver {\n        @PersistenceContext(unitName = \"maindb\")\n        private EntityManager em;\n\n        @Autowired\n        private GenericApplicationContext context;\n\n        @Transactional(value = \"txMain\", propagation = Propagation.REQUIRES_NEW)\n        public void executeQuery() {\n          em.persist(....);\n        }\n\n\n        @Async\n        public void startObserving() {\n          context.getBean(MarketObserver.class).executeQuery(); //&lt;-- Works\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"display_name":"user9835597"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1532953301,"creation_date":1532952314,"answer_id":51593592,"question_id":32269192,"body_markdown":"I had the same error code when I used `@Transaction` on a wrong method/actionlevel. \r\n\r\n    methodWithANumberOfDatabaseActions() { \r\n       methodA( ...)\r\n       methodA( ...)\r\n    }\r\n    \r\n    @Transactional\r\n    void methodA( ...) {\r\n      ... ERROR message\r\n    }\r\n\r\nI had to place the `@Transactional` just above the method `methodWithANumberOfDatabaseActions()`, of course.\r\n\r\nThat solved the error message in my case.\r\n","title":"Spring - No EntityManager with actual transaction available for current thread - cannot reliably process &#39;persist&#39; call","body":"<p>I had the same error code when I used <code>@Transaction</code> on a wrong method/actionlevel. </p>\n\n<pre><code>methodWithANumberOfDatabaseActions() { \n   methodA( ...)\n   methodA( ...)\n}\n\n@Transactional\nvoid methodA( ...) {\n  ... ERROR message\n}\n</code></pre>\n\n<p>I had to place the <code>@Transactional</code> just above the method <code>methodWithANumberOfDatabaseActions()</code>, of course.</p>\n\n<p>That solved the error message in my case.</p>\n"},{"tags":[],"owner":{"account_id":232572,"reputation":63,"user_id":497489,"display_name":"fleeblewidget"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1540913781,"creation_date":1540913781,"answer_id":53067905,"question_id":32269192,"body_markdown":"I had this issue for days and nothing I found anywhere online helped me, I&#39;m posting my answer here in case it helps anyone else.\r\n\r\nIn my case, I was working on a microservice being called through remoting, and my @Transactional annotation at the service level was not being picked up by the remote proxy.\r\n\r\nAdding a delegate class between the service and dao layers and marking the delegate method as transactional fixed this for me.","title":"Spring - No EntityManager with actual transaction available for current thread - cannot reliably process &#39;persist&#39; call","body":"<p>I had this issue for days and nothing I found anywhere online helped me, I'm posting my answer here in case it helps anyone else.</p>\n\n<p>In my case, I was working on a microservice being called through remoting, and my @Transactional annotation at the service level was not being picked up by the remote proxy.</p>\n\n<p>Adding a delegate class between the service and dao layers and marking the delegate method as transactional fixed this for me.</p>\n"},{"tags":[],"owner":{"account_id":8035703,"reputation":551,"user_id":6058900,"display_name":"Vikram S"},"down_vote_count":1,"up_vote_count":22,"is_accepted":false,"score":21,"last_activity_date":1543595709,"creation_date":1543595709,"answer_id":53561499,"question_id":32269192,"body_markdown":"boardRepo.deleteByBoardId(id);\r\n\r\nFaced the same issue. GOT *javax.persistence.TransactionRequiredException: No EntityManager with actual transaction available for current thread*\r\n\r\nI resolved it by adding **@Transactional** annotation above the controller/service.","title":"Spring - No EntityManager with actual transaction available for current thread - cannot reliably process &#39;persist&#39; call","body":"<p>boardRepo.deleteByBoardId(id);</p>\n\n<p>Faced the same issue. GOT <em>javax.persistence.TransactionRequiredException: No EntityManager with actual transaction available for current thread</em></p>\n\n<p>I resolved it by adding <strong>@Transactional</strong> annotation above the controller/service.</p>\n"},{"tags":[],"owner":{"account_id":4879794,"reputation":514,"user_id":3933933,"display_name":"JLane"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1568126854,"creation_date":1568123157,"answer_id":57872206,"question_id":32269192,"body_markdown":"This helped us, maybe it can help others in the future. `@Transaction` was not working for us, but this did:\r\n\r\n`@ConditionalOnMissingClass(&quot;org.springframework.orm.jpa.JpaTransactionManager&quot;)`","title":"Spring - No EntityManager with actual transaction available for current thread - cannot reliably process &#39;persist&#39; call","body":"<p>This helped us, maybe it can help others in the future. <code>@Transaction</code> was not working for us, but this did:</p>\n\n<p><code>@ConditionalOnMissingClass(\"org.springframework.orm.jpa.JpaTransactionManager\")</code></p>\n"},{"tags":[],"owner":{"account_id":12047029,"reputation":303,"user_id":8811650,"display_name":"Leo"},"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1573750153,"creation_date":1573750153,"answer_id":58861890,"question_id":32269192,"body_markdown":"Adding the `org.springframework.transaction.annotation.Transactional` annotation at the class level for the test class fixed the issue for me. ","title":"Spring - No EntityManager with actual transaction available for current thread - cannot reliably process &#39;persist&#39; call","body":"<p>Adding the <code>org.springframework.transaction.annotation.Transactional</code> annotation at the class level for the test class fixed the issue for me. </p>\n"},{"tags":[],"owner":{"account_id":281803,"reputation":13299,"user_id":578318,"accept_rate":59,"display_name":"sparkyspider"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1580839899,"creation_date":1580839899,"answer_id":60063273,"question_id":32269192,"body_markdown":"Just a note for *other* users searching for answers for thie error. Another common issue is:\r\n\r\n&gt; You generally cannot call an `@transactional` method from within the same class.\r\n\r\n*(There are ways and means using AspectJ but refactoring will be way easier)*\r\n\r\nSo you&#39;ll need a calling class and class that holds the `@transactional` methods.\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"Spring - No EntityManager with actual transaction available for current thread - cannot reliably process &#39;persist&#39; call","body":"<p>Just a note for <em>other</em> users searching for answers for thie error. Another common issue is:</p>\n\n<blockquote>\n  <p>You generally cannot call an <code>@transactional</code> method from within the same class.</p>\n</blockquote>\n\n<p><em>(There are ways and means using AspectJ but refactoring will be way easier)</em></p>\n\n<p>So you'll need a calling class and class that holds the <code>@transactional</code> methods.</p>\n"},{"tags":[],"owner":{"account_id":2281857,"reputation":607,"user_id":2006754,"display_name":"user2006754"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1589290987,"creation_date":1589290987,"answer_id":61753300,"question_id":32269192,"body_markdown":"If you have \r\n\r\n    @Transactional // Spring Transactional\r\n    class MyDao extends Dao {\r\n    }\r\n\r\nand super-class\r\n\r\n    class Dao {\r\n        public void save(Entity entity) { getEntityManager().merge(entity); }\r\n    }\r\n\r\nand you call\r\n\r\n    @Autowired MyDao myDao;\r\n    myDao.save(entity);\r\n\r\nyou won&#39;t get a Spring TransactionInterceptor (that gives you a transaction).\r\n\r\nThis is what you need to do:\r\n\r\n    @Transactional \r\n    class MyDao extends Dao {\r\n        public void save(Entity entity) { super.save(entity); }\r\n    }\r\n\r\nUnbelievable but true.","title":"Spring - No EntityManager with actual transaction available for current thread - cannot reliably process &#39;persist&#39; call","body":"<p>If you have </p>\n\n<pre><code>@Transactional // Spring Transactional\nclass MyDao extends Dao {\n}\n</code></pre>\n\n<p>and super-class</p>\n\n<pre><code>class Dao {\n    public void save(Entity entity) { getEntityManager().merge(entity); }\n}\n</code></pre>\n\n<p>and you call</p>\n\n<pre><code>@Autowired MyDao myDao;\nmyDao.save(entity);\n</code></pre>\n\n<p>you won't get a Spring TransactionInterceptor (that gives you a transaction).</p>\n\n<p>This is what you need to do:</p>\n\n<pre><code>@Transactional \nclass MyDao extends Dao {\n    public void save(Entity entity) { super.save(entity); }\n}\n</code></pre>\n\n<p>Unbelievable but true.</p>\n"},{"tags":[],"owner":{"account_id":4423927,"reputation":35,"user_id":3602923,"display_name":"swapnil"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1607490746,"creation_date":1607490746,"answer_id":65211013,"question_id":32269192,"body_markdown":"I got the same error when I executed the Spring JPA ```deleteAll()``` method from Junit test cases. I simply used the ```deleteInBatch()``` &amp; ```deleteAllInBatch()``` and its perfectly works. We do not need to mark ```@Transactional``` at the test cases level.","title":"Spring - No EntityManager with actual transaction available for current thread - cannot reliably process &#39;persist&#39; call","body":"<p>I got the same error when I executed the Spring JPA <code>deleteAll()</code> method from Junit test cases. I simply used the <code>deleteInBatch()</code> &amp; <code>deleteAllInBatch()</code> and its perfectly works. We do not need to mark <code>@Transactional</code> at the test cases level.</p>\n"},{"tags":[],"owner":{"account_id":11051156,"reputation":41,"user_id":8125686,"display_name":"David Arteaga"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1611788939,"creation_date":1611788939,"answer_id":65928764,"question_id":32269192,"body_markdown":"For anyone with the same issue as I had, I was calling a public method `method1` from within another class.\r\n`method1` then called another public method `method2` within the same class.\r\n`method2` was annotated with `@Transactional`, but `method1` was not.\r\nAll that `method1` did was transform some arguments and directly call `method2`, so no DB operations here.\r\n\r\nThe issue got solved for me once I moved the `@Transactional` annotation to `method1`.\r\n\r\nNot sure the reason for this, but this did it for me.","title":"Spring - No EntityManager with actual transaction available for current thread - cannot reliably process &#39;persist&#39; call","body":"<p>For anyone with the same issue as I had, I was calling a public method <code>method1</code> from within another class.\n<code>method1</code> then called another public method <code>method2</code> within the same class.\n<code>method2</code> was annotated with <code>@Transactional</code>, but <code>method1</code> was not.\nAll that <code>method1</code> did was transform some arguments and directly call <code>method2</code>, so no DB operations here.</p>\n<p>The issue got solved for me once I moved the <code>@Transactional</code> annotation to <code>method1</code>.</p>\n<p>Not sure the reason for this, but this did it for me.</p>\n"},{"tags":[],"owner":{"account_id":16886114,"reputation":76,"user_id":12210883,"display_name":"Samin"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1611913705,"creation_date":1611913705,"answer_id":65952138,"question_id":32269192,"body_markdown":"Without @Transactional annotation you can achieve the same goal with finding the entity from the DB and then removing that entity you got from the DB.\r\n\r\nCrudRepositor -&gt; void delete(T var1);","title":"Spring - No EntityManager with actual transaction available for current thread - cannot reliably process &#39;persist&#39; call","body":"<p>Without @Transactional annotation you can achieve the same goal with finding the entity from the DB and then removing that entity you got from the DB.</p>\n<p>CrudRepositor -&gt; void delete(T var1);</p>\n"},{"tags":[],"owner":{"account_id":13627739,"reputation":1,"user_id":9830588,"display_name":"Rodrigo Venturi"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1618669526,"creation_date":1618669526,"answer_id":67139210,"question_id":32269192,"body_markdown":"Calling the repository method was being called within a class with @Component, taking that method out of that class and placing it inside another with @Service worked.","title":"Spring - No EntityManager with actual transaction available for current thread - cannot reliably process &#39;persist&#39; call","body":"<p>Calling the repository method was being called within a class with @Component, taking that method out of that class and placing it inside another with @Service worked.</p>\n"},{"tags":[],"owner":{"account_id":1734438,"reputation":36255,"user_id":1587329,"accept_rate":94,"display_name":"serv-inc"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663666899,"creation_date":1621265978,"answer_id":67572859,"question_id":32269192,"body_markdown":"To fix this in a test, you can use [`@DataJpaTest`][1] or `@AutoConfigureTestDatabase`.\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/test/autoconfigure/orm/jpa/DataJpaTest.html","title":"Spring - No EntityManager with actual transaction available for current thread - cannot reliably process &#39;persist&#39; call","body":"<p>To fix this in a test, you can use <a href=\"https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/test/autoconfigure/orm/jpa/DataJpaTest.html\" rel=\"nofollow noreferrer\"><code>@DataJpaTest</code></a> or <code>@AutoConfigureTestDatabase</code>.</p>\n"},{"tags":[],"owner":{"account_id":16655393,"reputation":869,"user_id":12036956,"display_name":"Jalil.Jarjanazy"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1624457076,"creation_date":1624457076,"answer_id":68101418,"question_id":32269192,"body_markdown":"I already had the `@Transactional` but still wasn&#39;t working. Turns out I had to get rid of ***parallelism*** to make it work.\r\n\r\nIf you are doing things in parallel, ***DON&#39;T***.","title":"Spring - No EntityManager with actual transaction available for current thread - cannot reliably process &#39;persist&#39; call","body":"<p>I already had the <code>@Transactional</code> but still wasn't working. Turns out I had to get rid of <em><strong>parallelism</strong></em> to make it work.</p>\n<p>If you are doing things in parallel, <em><strong>DON'T</strong></em>.</p>\n"},{"tags":[],"owner":{"account_id":19088549,"reputation":75,"user_id":13939277,"display_name":"Adarsh Verma"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1627380708,"creation_date":1627380708,"answer_id":68543003,"question_id":32269192,"body_markdown":"It&#39;s like you are using the shared EntityManager when you are getting it Autowired so for persisting spring tells that this EntityManager bean is a shared bean and for persisting it needs a hold of this bean till the data persist doesn&#39;t get completed so for that we have to use @Transactional so that it gonna start and commit the persistence in a transaction so the data or operation gets completely saved or get rollback completely.","title":"Spring - No EntityManager with actual transaction available for current thread - cannot reliably process &#39;persist&#39; call","body":"<p>It's like you are using the shared EntityManager when you are getting it Autowired so for persisting spring tells that this EntityManager bean is a shared bean and for persisting it needs a hold of this bean till the data persist doesn't get completed so for that we have to use @Transactional so that it gonna start and commit the persistence in a transaction so the data or operation gets completely saved or get rollback completely.</p>\n"},{"tags":[],"owner":{"account_id":18019889,"reputation":308,"user_id":13097416,"display_name":"Akhachkhouch"},"down_vote_count":1,"up_vote_count":21,"is_accepted":false,"score":20,"last_activity_date":1633537904,"creation_date":1633537904,"answer_id":69469437,"question_id":32269192,"body_markdown":"You need to add @Transactional to your methode","title":"Spring - No EntityManager with actual transaction available for current thread - cannot reliably process &#39;persist&#39; call","body":"<p>You need to add @Transactional to your methode</p>\n"}],"owner":{"account_id":3291347,"reputation":3279,"user_id":2769597,"accept_rate":19,"display_name":"Micha Bil"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":379085,"favorite_count":0,"down_vote_count":0,"up_vote_count":282,"accepted_answer_id":32552558,"answer_count":23,"score":282,"last_activity_date":1663666899,"creation_date":1440758655,"question_id":32269192,"body_markdown":"I get this error when trying to invoke &quot;persist&quot; method to save entity model to database in my Spring MVC web application. Can&#39;t really find any post or page in internet that can relate to this particular error. It seems like something&#39;s wrong with EntityManagerFactory bean but i&#39;m fairly new to Spring programming so for me it seems like everything is initialized fine and according to various tutorial articles in web.\r\n\r\ndispatcher-servlet.xml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n     xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot;\r\n     xmlns:context=&quot;http://www.springframework.org/schema/context&quot;\r\n     xmlns:jpa=&quot;http://www.springframework.org/schema/data/jpa&quot;\r\n    xsi:schemaLocation=&quot;\r\n     http://www.springframework.org/schema/mvc \r\n     http://www.springframework.org/schema/mvc/spring-mvc-4.0.xsd\r\n     http://www.springframework.org/schema/beans \r\n     http://www.springframework.org/schema/beans/spring-beans-4.0.xsd\r\n     http://www.springframework.org/schema/context \r\n      http://www.springframework.org/schema/context/spring-context-4.0.xsd\r\n      http://www.springframework.org/schema/jdbc\r\n      http://www.springframework.org/schema/jdbc/spring-jdbc-3.2.xsd\r\n      http://www.springframework.org/schema/data/jpa\r\n      http://www.springframework.org/schema/data/jpa/spring-jpa-1.3.xsd\r\n      http://www.springframework.org/schema/data/repository\r\n      http://www.springframework.org/schema/data/repository/spring-repository-1.5.xsd\r\n      http://www.springframework.org/schema/jee\r\n      http://www.springframework.org/schema/jee/spring-jee-3.2.xsd&quot;&gt;\r\n    \r\n        &lt;context:component-scan base-package=&quot;wymysl.Controllers&quot; /&gt;\r\n        &lt;jpa:repositories base-package=&quot;wymysl.repositories&quot;/&gt; \r\n        &lt;context:component-scan base-package=&quot;wymysl.beans&quot; /&gt; \r\n        &lt;context:component-scan base-package=&quot;wymysl.Validators&quot; /&gt; \r\n        &lt;bean\r\n         class=&quot;org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor&quot; /&gt;\r\n    \t &lt;bean class=&quot;org.springframework.orm.hibernate4.HibernateExceptionTranslator&quot;/&gt;\r\n    \t \r\n    \t &lt;bean id=&quot;passwordValidator&quot; class=&quot;wymysl.Validators.PasswordValidator&quot;&gt;&lt;/bean&gt;\r\n    \t \r\n    \t &lt;bean id=&quot;dataSource&quot;\r\n    \t\tclass=&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;&gt;\r\n    \r\n    \t\t&lt;property name=&quot;driverClassName&quot; value=&quot;oracle.jdbc.driver.OracleDriver&quot; /&gt;\r\n    \t\t&lt;property name=&quot;url&quot; value=&quot;jdbc:oracle:thin:@localhost:1521:xe&quot; /&gt;\r\n    \t\t&lt;property name=&quot;username&quot; value=&quot;system&quot; /&gt;\r\n    \t\t&lt;property name=&quot;password&quot; value=&quot;polskabieda1&quot; /&gt;\r\n    \t&lt;/bean&gt;\r\n    \t \r\n     &lt;bean id=&quot;entityManagerFactory&quot; class=&quot;org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean&quot;&gt;\r\n        &lt;property name=&quot;persistenceXmlLocation&quot; value=&quot;classpath:./META-INF/persistence.xml&quot; /&gt;\r\n        &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot; /&gt;\r\n    \r\n        &lt;property name=&quot;jpaVendorAdapter&quot;&gt;\r\n            &lt;bean class=&quot;org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter&quot;&gt;\r\n                &lt;property name=&quot;databasePlatform&quot; value=&quot;org.hibernate.dialect.H2Dialect&quot; /&gt;\r\n                &lt;property name=&quot;showSql&quot; value=&quot;true&quot; /&gt;\r\n                &lt;property name=&quot;generateDdl&quot; value=&quot;false&quot; /&gt;\r\n            &lt;/bean&gt;\r\n        &lt;/property&gt;\r\n        &lt;property name=&quot;jpaProperties&quot;&gt;\r\n            &lt;props&gt;\r\n                &lt;prop key=&quot;hibernate.max_fetch_depth&quot;&gt;3&lt;/prop&gt;\r\n                &lt;prop key=&quot;hibernate.jdbc.fetch_size&quot;&gt;50&lt;/prop&gt;\r\n                &lt;prop key=&quot;hibernate.jdbc.batch_size&quot;&gt;10&lt;/prop&gt;\r\n            &lt;/props&gt;\r\n        &lt;/property&gt;\r\n    &lt;/bean&gt;\r\n    \t\r\n    \t&lt;mvc:annotation-driven /&gt;\r\n    \t\r\n    \t&lt;bean id=&quot;messageSource&quot; class=&quot;org.springframework.context.support.ReloadableResourceBundleMessageSource&quot;&gt;\r\n        &lt;property name=&quot;basename&quot; value=&quot;classpath:messages&quot; /&gt;\r\n    &lt;/bean&gt;\r\n    \t\r\n    \t&lt;bean name=&quot;transactionManager&quot; class=&quot;org.springframework.orm.jpa.JpaTransactionManager&quot;&gt;\r\n                 &lt;property name=&quot;entityManagerFactory&quot; ref=&quot;entityManagerFactory&quot;/&gt;\r\n        &lt;/bean&gt;\r\n    \t\r\n    \t\r\n    \t&lt;bean class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt;\r\n        &lt;property name=&quot;prefix&quot;&gt;\r\n            &lt;value&gt;/WEB-INF/jsp/&lt;/value&gt;\r\n        &lt;/property&gt;\r\n        &lt;property name=&quot;suffix&quot;&gt;\r\n            &lt;value&gt;.jsp&lt;/value&gt;\r\n        &lt;/property&gt;\r\n    &lt;/bean&gt;\r\n    \r\n    \t&lt;mvc:resources mapping=&quot;/resources/**&quot; location=&quot;/resources/&quot; /&gt;\r\n    \t&lt;mvc:resources mapping=&quot;/resources/*&quot; location=&quot;/resources/css/&quot;  \r\n    \tcache-period=&quot;31556926&quot;/&gt;\r\n    \t \r\n    \t\r\n    \t     \r\n    &lt;/beans&gt;\r\n\r\nRegisterController.java\r\n\r\n    @Controller\r\n    public class RegisterController {\r\n    \r\n    \t@PersistenceContext\r\n    \tEntityManager entityManager;\r\n    \t\r\n    \t@Autowired\r\n    \tPasswordValidator passwordValidator;\r\n    \t\r\n    \t@InitBinder\r\n    \tprivate void initBinder(WebDataBinder binder) {\r\n    \t\tbinder.setValidator(passwordValidator);\r\n    \t}\r\n    \t\r\n    \t@RequestMapping(value = &quot;/addUser&quot;, method = RequestMethod.GET)\r\n    \tpublic String register(Person person) {\r\n    \t\t\r\n    \t\t\r\n    \t\treturn &quot;register&quot;;\r\n    \t\t\r\n    \t}\r\n    \t\r\n    \t@RequestMapping(value = &quot;/addUser&quot;, method = RequestMethod.POST)\r\n    \tpublic String register(@ModelAttribute(&quot;person&quot;) @Valid @Validated Person person, BindingResult result) {\r\n    \t\tif(result.hasErrors()) {\r\n    \t\t\treturn &quot;register&quot;;\r\n    \t\t} else {\r\n    \t\t\tentityManager.persist(person);\r\n    \t\t\treturn &quot;index&quot;;\r\n    \t\t\t\r\n    \t\t}\r\n    \t\t\r\n    \t\t\r\n    \t\t\r\n    \t\t\r\n    \t}","title":"Spring - No EntityManager with actual transaction available for current thread - cannot reliably process &#39;persist&#39; call","body":"<p>I get this error when trying to invoke \"persist\" method to save entity model to database in my Spring MVC web application. Can't really find any post or page in internet that can relate to this particular error. It seems like something's wrong with EntityManagerFactory bean but i'm fairly new to Spring programming so for me it seems like everything is initialized fine and according to various tutorial articles in web.</p>\n\n<p>dispatcher-servlet.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:mvc=\"http://www.springframework.org/schema/mvc\"\n xmlns:context=\"http://www.springframework.org/schema/context\"\n xmlns:jpa=\"http://www.springframework.org/schema/data/jpa\"\nxsi:schemaLocation=\"\n http://www.springframework.org/schema/mvc \n http://www.springframework.org/schema/mvc/spring-mvc-4.0.xsd\n http://www.springframework.org/schema/beans \n http://www.springframework.org/schema/beans/spring-beans-4.0.xsd\n http://www.springframework.org/schema/context \n  http://www.springframework.org/schema/context/spring-context-4.0.xsd\n  http://www.springframework.org/schema/jdbc\n  http://www.springframework.org/schema/jdbc/spring-jdbc-3.2.xsd\n  http://www.springframework.org/schema/data/jpa\n  http://www.springframework.org/schema/data/jpa/spring-jpa-1.3.xsd\n  http://www.springframework.org/schema/data/repository\n  http://www.springframework.org/schema/data/repository/spring-repository-1.5.xsd\n  http://www.springframework.org/schema/jee\n  http://www.springframework.org/schema/jee/spring-jee-3.2.xsd\"&gt;\n\n    &lt;context:component-scan base-package=\"wymysl.Controllers\" /&gt;\n    &lt;jpa:repositories base-package=\"wymysl.repositories\"/&gt; \n    &lt;context:component-scan base-package=\"wymysl.beans\" /&gt; \n    &lt;context:component-scan base-package=\"wymysl.Validators\" /&gt; \n    &lt;bean\n     class=\"org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor\" /&gt;\n     &lt;bean class=\"org.springframework.orm.hibernate4.HibernateExceptionTranslator\"/&gt;\n\n     &lt;bean id=\"passwordValidator\" class=\"wymysl.Validators.PasswordValidator\"&gt;&lt;/bean&gt;\n\n     &lt;bean id=\"dataSource\"\n        class=\"org.springframework.jdbc.datasource.DriverManagerDataSource\"&gt;\n\n        &lt;property name=\"driverClassName\" value=\"oracle.jdbc.driver.OracleDriver\" /&gt;\n        &lt;property name=\"url\" value=\"jdbc:oracle:thin:@localhost:1521:xe\" /&gt;\n        &lt;property name=\"username\" value=\"system\" /&gt;\n        &lt;property name=\"password\" value=\"polskabieda1\" /&gt;\n    &lt;/bean&gt;\n\n &lt;bean id=\"entityManagerFactory\" class=\"org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean\"&gt;\n    &lt;property name=\"persistenceXmlLocation\" value=\"classpath:./META-INF/persistence.xml\" /&gt;\n    &lt;property name=\"dataSource\" ref=\"dataSource\" /&gt;\n\n    &lt;property name=\"jpaVendorAdapter\"&gt;\n        &lt;bean class=\"org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter\"&gt;\n            &lt;property name=\"databasePlatform\" value=\"org.hibernate.dialect.H2Dialect\" /&gt;\n            &lt;property name=\"showSql\" value=\"true\" /&gt;\n            &lt;property name=\"generateDdl\" value=\"false\" /&gt;\n        &lt;/bean&gt;\n    &lt;/property&gt;\n    &lt;property name=\"jpaProperties\"&gt;\n        &lt;props&gt;\n            &lt;prop key=\"hibernate.max_fetch_depth\"&gt;3&lt;/prop&gt;\n            &lt;prop key=\"hibernate.jdbc.fetch_size\"&gt;50&lt;/prop&gt;\n            &lt;prop key=\"hibernate.jdbc.batch_size\"&gt;10&lt;/prop&gt;\n        &lt;/props&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n\n    &lt;mvc:annotation-driven /&gt;\n\n    &lt;bean id=\"messageSource\" class=\"org.springframework.context.support.ReloadableResourceBundleMessageSource\"&gt;\n    &lt;property name=\"basename\" value=\"classpath:messages\" /&gt;\n&lt;/bean&gt;\n\n    &lt;bean name=\"transactionManager\" class=\"org.springframework.orm.jpa.JpaTransactionManager\"&gt;\n             &lt;property name=\"entityManagerFactory\" ref=\"entityManagerFactory\"/&gt;\n    &lt;/bean&gt;\n\n\n    &lt;bean class=\"org.springframework.web.servlet.view.InternalResourceViewResolver\"&gt;\n    &lt;property name=\"prefix\"&gt;\n        &lt;value&gt;/WEB-INF/jsp/&lt;/value&gt;\n    &lt;/property&gt;\n    &lt;property name=\"suffix\"&gt;\n        &lt;value&gt;.jsp&lt;/value&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n\n    &lt;mvc:resources mapping=\"/resources/**\" location=\"/resources/\" /&gt;\n    &lt;mvc:resources mapping=\"/resources/*\" location=\"/resources/css/\"  \n    cache-period=\"31556926\"/&gt;\n\n\n\n&lt;/beans&gt;\n</code></pre>\n\n<p>RegisterController.java</p>\n\n<pre><code>@Controller\npublic class RegisterController {\n\n    @PersistenceContext\n    EntityManager entityManager;\n\n    @Autowired\n    PasswordValidator passwordValidator;\n\n    @InitBinder\n    private void initBinder(WebDataBinder binder) {\n        binder.setValidator(passwordValidator);\n    }\n\n    @RequestMapping(value = \"/addUser\", method = RequestMethod.GET)\n    public String register(Person person) {\n\n\n        return \"register\";\n\n    }\n\n    @RequestMapping(value = \"/addUser\", method = RequestMethod.POST)\n    public String register(@ModelAttribute(\"person\") @Valid @Validated Person person, BindingResult result) {\n        if(result.hasErrors()) {\n            return \"register\";\n        } else {\n            entityManager.persist(person);\n            return \"index\";\n\n        }\n\n\n\n\n    }\n</code></pre>\n"},{"tags":["java","spring-boot","maven","spring-cloud","spring-cloud-vault-config"],"comments":[{"owner":{"account_id":1368060,"reputation":24601,"user_id":2730527,"display_name":"spencergibb"},"score":0,"creation_date":1592234850,"post_id":62390647,"comment_id":110345689,"body_markdown":"There&#39;s mismatched versions of something. Why do you have `spring-boot-actuator-docs` with version 1.5.x. and a specific version of `micrometer-registry-prometheus` that is likely also managed?","body":"There&#39;s mismatched versions of something. Why do you have <code>spring-boot-actuator-docs</code> with version 1.5.x. and a specific version of <code>micrometer-registry-prometheus</code> that is likely also managed?"},{"owner":{"account_id":6000838,"reputation":657,"user_id":4714173,"accept_rate":56,"display_name":"Sammy65"},"score":0,"creation_date":1592240198,"post_id":62390647,"comment_id":110348340,"body_markdown":"Taking out the ```spring-boot-actuator-docs``` completely doesn&#39;t take away the error so, it seems not to have anything to do with it. Also, I used the latest of ```micrometer-registry-prometheus``` thinking it&#39;ll work better with the version of Spring Boot then took it out to allow Spring pull in the version it supports. What I&#39;ve noticed is, without Spring Cloud in the project, ```logstash-logback-encoder``` fails because of the absence of a cloud profile but not with the error above.","body":"Taking out the <code>spring-boot-actuator-docs</code> completely doesn&#39;t take away the error so, it seems not to have anything to do with it. Also, I used the latest of <code>micrometer-registry-prometheus</code> thinking it&#39;ll work better with the version of Spring Boot then took it out to allow Spring pull in the version it supports. What I&#39;ve noticed is, without Spring Cloud in the project, <code>logstash-logback-encoder</code> fails because of the absence of a cloud profile but not with the error above."},{"owner":{"account_id":1368060,"reputation":24601,"user_id":2730527,"display_name":"spencergibb"},"score":1,"creation_date":1592240998,"post_id":62390647,"comment_id":110348768,"body_markdown":"What is bringing in `TomcatMetricsConfiguration`? Looks like it is old legacy spring support? spring-boot-admin maybe? Can you remove all non spring imports and see?","body":"What is bringing in <code>TomcatMetricsConfiguration</code>? Looks like it is old legacy spring support? spring-boot-admin maybe? Can you remove all non spring imports and see?"}],"answers":[{"tags":[],"owner":{"account_id":6000838,"reputation":657,"user_id":4714173,"accept_rate":56,"display_name":"Sammy65"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1592310183,"creation_date":1592310183,"answer_id":62408405,"question_id":62390647,"body_markdown":"I discovered what the issue was thanks to the comments from @spencergibb! My application had transitive dependency on the one below, it was brought in by a custom library that couldn&#39;t be added to the example pom above for privacy reasons. I tested the pom.xml solely on the dependencies from maven and excluded the others which exposed the problem quickly.\r\n \r\n```\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\r\n            &lt;artifactId&gt;micrometer-spring-legacy&lt;/artifactId&gt;\r\n            &lt;version&gt;${micrometer.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n```\r\nThanks spencergibb!!","title":"ClassNotFoundException for EmbeddedWebApplicationContext when Spring cloud valut is used","body":"<p>I discovered what the issue was thanks to the comments from @spencergibb! My application had transitive dependency on the one below, it was brought in by a custom library that couldn't be added to the example pom above for privacy reasons. I tested the pom.xml solely on the dependencies from maven and excluded the others which exposed the problem quickly.</p>\n\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\n            &lt;artifactId&gt;micrometer-spring-legacy&lt;/artifactId&gt;\n            &lt;version&gt;${micrometer.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n\n<p>Thanks spencergibb!!</p>\n"},{"tags":[],"owner":{"account_id":26389098,"reputation":1,"user_id":20041201,"display_name":"Crom"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663666712,"creation_date":1663666712,"answer_id":73784596,"question_id":62390647,"body_markdown":"micrometer-spring-legacy only available with Springboot 1.x\r\nif SpringBoot 2.x, please use Actuator","title":"ClassNotFoundException for EmbeddedWebApplicationContext when Spring cloud valut is used","body":"<p>micrometer-spring-legacy only available with Springboot 1.x\nif SpringBoot 2.x, please use Actuator</p>\n"}],"owner":{"account_id":6000838,"reputation":657,"user_id":4714173,"accept_rate":56,"display_name":"Sammy65"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":280,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1663666712,"creation_date":1592231998,"question_id":62390647,"body_markdown":"I&#39;ve upgraded a Spring Boot application from 1.5.2.RELEASE to 2.3.0.RELEASE (huge bump, I know). My main issue is, the Spring Cloud version I&#39;ve used is Hoxton.SR5 which brings in version 2.2.3.RELEASE for the ```spring-cloud-vault-config``` and ```spring-cloud-vault-config-databses```. Either of those dependencies throw the ```Caused by: java.lang.ClassNotFoundException: org.springframework.boot.context.embedded.EmbeddedWebApplicationContext```\r\n\r\nIs this a breaking change or am I missing a dependency? My pom.xml is below:\r\n```\r\n&lt;parent&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;2.3.0.RELEASE&lt;/version&gt;\r\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    &lt;/parent&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;clover.pct&gt;75%&lt;/clover.pct&gt;\r\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\r\n        &lt;spring-admin.version&gt;2.2.3&lt;/spring-admin.version&gt;\r\n        &lt;spring-cloud.version&gt;Hoxton.SR5&lt;/spring-cloud.version&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n        &lt;logstash-logback-encoder.version&gt;6.4&lt;/logstash-logback-encoder.version&gt;\r\n        &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\r\n        &lt;spring-actuator-docs.version&gt;1.5.22.RELEASE&lt;/spring-actuator-docs.version&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;!-- Spring Boot Dependencies --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;de.codecentric&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-admin-starter-client&lt;/artifactId&gt;\r\n            &lt;version&gt;${spring-admin.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-web-services&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n            &lt;exclusions&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;tomcat-jdbc&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n            &lt;/exclusions&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-actuator-docs&lt;/artifactId&gt;\r\n            &lt;version&gt;${spring-actuator-docs.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;\r\n            &lt;optional&gt;true&lt;/optional&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-cloud-vault-config-databases&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-cloud-starter-vault-config&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;!-- Third party dependencies --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.zaxxer&lt;/groupId&gt;\r\n            &lt;artifactId&gt;HikariCP&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;commons-lang&lt;/groupId&gt;\r\n            &lt;artifactId&gt;commons-lang&lt;/artifactId&gt;\r\n            &lt;version&gt;2.6&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n            &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\r\n            &lt;version&gt;3.10&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.ws.xmlschema&lt;/groupId&gt;\r\n            &lt;artifactId&gt;xmlschema-core&lt;/artifactId&gt;\r\n            &lt;version&gt;2.2.5&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.oracle.ojdbc&lt;/groupId&gt;\r\n            &lt;artifactId&gt;ojdbc8&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;wsdl4j&lt;/groupId&gt;\r\n            &lt;artifactId&gt;wsdl4j&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;net.logstash.logback&lt;/groupId&gt;\r\n            &lt;artifactId&gt;logstash-logback-encoder&lt;/artifactId&gt;\r\n            &lt;version&gt;${logstash-logback-encoder.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\r\n            &lt;artifactId&gt;micrometer-registry-prometheus&lt;/artifactId&gt;\r\n            &lt;version&gt;1.5.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.dropwizard.metrics&lt;/groupId&gt;\r\n            &lt;artifactId&gt;metrics-servlets&lt;/artifactId&gt;\r\n            &lt;version&gt;4.1.9&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n            &lt;scope&gt;provided&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;!-- Test dependencies --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.ws&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-ws-test&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.hsqldb&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hsqldb&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;dependencyManagement&gt;\r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\r\n                &lt;version&gt;${spring-cloud.version}&lt;/version&gt;\r\n                &lt;type&gt;pom&lt;/type&gt;\r\n                &lt;scope&gt;import&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n    &lt;/dependencyManagement&gt;\r\n```\r\nAnd the full error message is as below:\r\n```\r\njava.lang.IllegalStateException: Failed to introspect Class [io.micrometer.spring.autoconfigure.web.tomcat.TomcatMetricsConfiguration] from ClassLoader [sun.misc.Launcher$AppClassLoader@18b4aac2]\r\n\tat org.springframework.util.ReflectionUtils.getDeclaredMethods(ReflectionUtils.java:481)\r\n\tat org.springframework.util.ReflectionUtils.doWithMethods(ReflectionUtils.java:358)\r\n\tat org.springframework.util.ReflectionUtils.getUniqueDeclaredMethods(ReflectionUtils.java:414)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.lambda$getTypeForFactoryMethod$2(AbstractAutowireCapableBeanFactory.java:743)\r\n\tat java.util.concurrent.ConcurrentHashMap.computeIfAbsent(ConcurrentHashMap.java:1660)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.getTypeForFactoryMethod(AbstractAutowireCapableBeanFactory.java:742)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.determineTargetType(AbstractAutowireCapableBeanFactory.java:681)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.predictBeanType(AbstractAutowireCapableBeanFactory.java:649)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.isFactoryBean(AbstractBeanFactory.java:1608)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.doGetBeanNamesForType(DefaultListableBeanFactory.java:526)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanNamesForType(DefaultListableBeanFactory.java:497)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeansOfType(DefaultListableBeanFactory.java:619)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeansOfType(DefaultListableBeanFactory.java:611)\r\n\tat org.springframework.context.support.AbstractApplicationContext.getBeansOfType(AbstractApplicationContext.java:1242)\r\n\tat org.springframework.boot.SpringApplication.getExitCodeFromMappedException(SpringApplication.java:880)\r\n\tat org.springframework.boot.SpringApplication.getExitCodeFromException(SpringApplication.java:868)\r\n\tat org.springframework.boot.SpringApplication.handleExitCode(SpringApplication.java:855)\r\n\tat org.springframework.boot.SpringApplication.handleRunFailure(SpringApplication.java:806)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:325)\r\n\tat org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:120)\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99)\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124)\r\n\tat org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:123)\r\n\tat org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener.outputConditionEvaluationReport(SpringBootDependencyInjectionTestExecutionListener.java:53)\r\n\tat org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener.prepareTestInstance(SpringBootDependencyInjectionTestExecutionListener.java:46)\r\n\tat org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:244)\r\n\tat org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:98)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$5(ClassBasedTestDescriptor.java:341)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:346)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$6(ClassBasedTestDescriptor.java:341)\r\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\r\n\tat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\r\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\r\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\r\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\r\n\tat java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:313)\r\n\tat java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:743)\r\n\tat java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:742)\r\n\tat java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:647)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:340)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:263)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$2(ClassBasedTestDescriptor.java:256)\r\n\tat java.util.Optional.orElseGet(Optional.java:267)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$3(ClassBasedTestDescriptor.java:255)\r\n\tat org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:29)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:108)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:107)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:71)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$1(NodeTestTask.java:107)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:107)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:75)\r\n\tat java.util.ArrayList.forEach(ArrayList.java:1257)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)\r\n\tat java.util.ArrayList.forEach(ArrayList.java:1257)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:248)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$5(DefaultLauncher.java:211)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:226)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:199)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:132)\r\n\tat com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:69)\r\n\tat com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:33)\r\n\tat com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:230)\r\n\tat com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:58)\r\nCaused by: java.lang.NoClassDefFoundError: org/springframework/boot/context/embedded/EmbeddedWebApplicationContext\r\n\tat java.lang.Class.getDeclaredMethods0(Native Method)\r\n\tat java.lang.Class.privateGetDeclaredMethods(Class.java:2701)\r\n\tat java.lang.Class.getDeclaredMethods(Class.java:1975)\r\n\tat org.springframework.util.ReflectionUtils.getDeclaredMethods(ReflectionUtils.java:463)\r\n\t... 84 common frames omitted\r\n```\r\n\r\nAny help will be much appreciated as always!","title":"ClassNotFoundException for EmbeddedWebApplicationContext when Spring cloud valut is used","body":"<p>I've upgraded a Spring Boot application from 1.5.2.RELEASE to 2.3.0.RELEASE (huge bump, I know). My main issue is, the Spring Cloud version I've used is Hoxton.SR5 which brings in version 2.2.3.RELEASE for the <code>spring-cloud-vault-config</code> and <code>spring-cloud-vault-config-databses</code>. Either of those dependencies throw the <code>Caused by: java.lang.ClassNotFoundException: org.springframework.boot.context.embedded.EmbeddedWebApplicationContext</code></p>\n\n<p>Is this a breaking change or am I missing a dependency? My pom.xml is below:</p>\n\n<pre><code>&lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.3.0.RELEASE&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n\n    &lt;properties&gt;\n        &lt;clover.pct&gt;75%&lt;/clover.pct&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n        &lt;spring-admin.version&gt;2.2.3&lt;/spring-admin.version&gt;\n        &lt;spring-cloud.version&gt;Hoxton.SR5&lt;/spring-cloud.version&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;logstash-logback-encoder.version&gt;6.4&lt;/logstash-logback-encoder.version&gt;\n        &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n        &lt;spring-actuator-docs.version&gt;1.5.22.RELEASE&lt;/spring-actuator-docs.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;!-- Spring Boot Dependencies --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;de.codecentric&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-admin-starter-client&lt;/artifactId&gt;\n            &lt;version&gt;${spring-admin.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web-services&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt;\n                    &lt;artifactId&gt;tomcat-jdbc&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-actuator-docs&lt;/artifactId&gt;\n            &lt;version&gt;${spring-actuator-docs.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-vault-config-databases&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-vault-config&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- Third party dependencies --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.zaxxer&lt;/groupId&gt;\n            &lt;artifactId&gt;HikariCP&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;commons-lang&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-lang&lt;/artifactId&gt;\n            &lt;version&gt;2.6&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\n            &lt;version&gt;3.10&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.ws.xmlschema&lt;/groupId&gt;\n            &lt;artifactId&gt;xmlschema-core&lt;/artifactId&gt;\n            &lt;version&gt;2.2.5&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.oracle.ojdbc&lt;/groupId&gt;\n            &lt;artifactId&gt;ojdbc8&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;wsdl4j&lt;/groupId&gt;\n            &lt;artifactId&gt;wsdl4j&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;net.logstash.logback&lt;/groupId&gt;\n            &lt;artifactId&gt;logstash-logback-encoder&lt;/artifactId&gt;\n            &lt;version&gt;${logstash-logback-encoder.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\n            &lt;artifactId&gt;micrometer-registry-prometheus&lt;/artifactId&gt;\n            &lt;version&gt;1.5.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.dropwizard.metrics&lt;/groupId&gt;\n            &lt;artifactId&gt;metrics-servlets&lt;/artifactId&gt;\n            &lt;version&gt;4.1.9&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- Test dependencies --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.ws&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-ws-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hsqldb&lt;/groupId&gt;\n            &lt;artifactId&gt;hsqldb&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;dependencyManagement&gt;\n        &lt;dependencies&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\n                &lt;version&gt;${spring-cloud.version}&lt;/version&gt;\n                &lt;type&gt;pom&lt;/type&gt;\n                &lt;scope&gt;import&lt;/scope&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n    &lt;/dependencyManagement&gt;\n</code></pre>\n\n<p>And the full error message is as below:</p>\n\n<pre><code>java.lang.IllegalStateException: Failed to introspect Class [io.micrometer.spring.autoconfigure.web.tomcat.TomcatMetricsConfiguration] from ClassLoader [sun.misc.Launcher$AppClassLoader@18b4aac2]\n    at org.springframework.util.ReflectionUtils.getDeclaredMethods(ReflectionUtils.java:481)\n    at org.springframework.util.ReflectionUtils.doWithMethods(ReflectionUtils.java:358)\n    at org.springframework.util.ReflectionUtils.getUniqueDeclaredMethods(ReflectionUtils.java:414)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.lambda$getTypeForFactoryMethod$2(AbstractAutowireCapableBeanFactory.java:743)\n    at java.util.concurrent.ConcurrentHashMap.computeIfAbsent(ConcurrentHashMap.java:1660)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.getTypeForFactoryMethod(AbstractAutowireCapableBeanFactory.java:742)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.determineTargetType(AbstractAutowireCapableBeanFactory.java:681)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.predictBeanType(AbstractAutowireCapableBeanFactory.java:649)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.isFactoryBean(AbstractBeanFactory.java:1608)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doGetBeanNamesForType(DefaultListableBeanFactory.java:526)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanNamesForType(DefaultListableBeanFactory.java:497)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeansOfType(DefaultListableBeanFactory.java:619)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeansOfType(DefaultListableBeanFactory.java:611)\n    at org.springframework.context.support.AbstractApplicationContext.getBeansOfType(AbstractApplicationContext.java:1242)\n    at org.springframework.boot.SpringApplication.getExitCodeFromMappedException(SpringApplication.java:880)\n    at org.springframework.boot.SpringApplication.getExitCodeFromException(SpringApplication.java:868)\n    at org.springframework.boot.SpringApplication.handleExitCode(SpringApplication.java:855)\n    at org.springframework.boot.SpringApplication.handleRunFailure(SpringApplication.java:806)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:325)\n    at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:120)\n    at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99)\n    at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124)\n    at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:123)\n    at org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener.outputConditionEvaluationReport(SpringBootDependencyInjectionTestExecutionListener.java:53)\n    at org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener.prepareTestInstance(SpringBootDependencyInjectionTestExecutionListener.java:46)\n    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:244)\n    at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:98)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$5(ClassBasedTestDescriptor.java:341)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:346)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$6(ClassBasedTestDescriptor.java:341)\n    at java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n    at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\n    at java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n    at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n    at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n    at java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:313)\n    at java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:743)\n    at java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:742)\n    at java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:647)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:340)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:263)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$2(ClassBasedTestDescriptor.java:256)\n    at java.util.Optional.orElseGet(Optional.java:267)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$3(ClassBasedTestDescriptor.java:255)\n    at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:29)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:108)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:107)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:71)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$1(NodeTestTask.java:107)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:107)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:75)\n    at java.util.ArrayList.forEach(ArrayList.java:1257)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)\n    at java.util.ArrayList.forEach(ArrayList.java:1257)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:248)\n    at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$5(DefaultLauncher.java:211)\n    at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:226)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:199)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:132)\n    at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:69)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:33)\n    at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:230)\n    at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:58)\nCaused by: java.lang.NoClassDefFoundError: org/springframework/boot/context/embedded/EmbeddedWebApplicationContext\n    at java.lang.Class.getDeclaredMethods0(Native Method)\n    at java.lang.Class.privateGetDeclaredMethods(Class.java:2701)\n    at java.lang.Class.getDeclaredMethods(Class.java:1975)\n    at org.springframework.util.ReflectionUtils.getDeclaredMethods(ReflectionUtils.java:463)\n    ... 84 common frames omitted\n</code></pre>\n\n<p>Any help will be much appreciated as always!</p>\n"},{"tags":["java","mongodb","mongo-java"],"answers":[{"tags":[],"owner":{"account_id":43105,"reputation":227352,"user_id":125816,"accept_rate":100,"display_name":"Sergio Tulentsev"},"down_vote_count":0,"up_vote_count":58,"is_accepted":true,"score":58,"last_activity_date":1327960467,"creation_date":1327959952,"answer_id":9071251,"question_id":9071192,"body_markdown":"I don&#39;t know Java driver, but do you have to create a list there? What happens if you try this code?\r\n\r\n\r\n    BasicDBObject update = new BasicDBObject().append(&quot;$push&quot;, new BasicDBObject().append(&quot;values&quot;, dboVital));\r\n    update = update.append(&quot;$set&quot;, new BasicDBObject().append(&quot;endTime&quot;, time));\r\n\r\n    collection.update( new BasicDBObject().append(&quot;_id&quot;, pageId), update, true, false);\r\n\r\nThis should produce the equivalent of \r\n\r\n    db.collection.update({_id: pageId}, {$push: {values: dboVital}, $set: {endTime: time}});\r\n\r\nWhereas your code produces (I suspect) this:\r\n\r\n    db.collection.update({_id: pageId}, [{$push: {values: dboVital}}, {$set: {endTime: time}}]);\r\n","title":"$push and $set in same MongoDB update","body":"<p>I don't know Java driver, but do you have to create a list there? What happens if you try this code?</p>\n\n<pre><code>BasicDBObject update = new BasicDBObject().append(\"$push\", new BasicDBObject().append(\"values\", dboVital));\nupdate = update.append(\"$set\", new BasicDBObject().append(\"endTime\", time));\n\ncollection.update( new BasicDBObject().append(\"_id\", pageId), update, true, false);\n</code></pre>\n\n<p>This should produce the equivalent of </p>\n\n<pre><code>db.collection.update({_id: pageId}, {$push: {values: dboVital}, $set: {endTime: time}});\n</code></pre>\n\n<p>Whereas your code produces (I suspect) this:</p>\n\n<pre><code>db.collection.update({_id: pageId}, [{$push: {values: dboVital}}, {$set: {endTime: time}}]);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11808971,"reputation":119,"user_id":8640819,"display_name":"arpan"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1562050986,"creation_date":1562050986,"answer_id":56847008,"question_id":9071192,"body_markdown":"My mongodb version is 3.4.20 and while using\r\n\r\n    db.collection.update({_id: pageId}, [{$push: {values: dboVital}}, {$set: {endTime: time}}]);\r\n\r\nI received error\r\n\r\n    [thread1] Error: field names cannot start with $ [$push] :\r\n\r\nTo solve that error we can use:\r\n\r\n    db.collection.update({_id: pageId}, {$push: {values: dboVital}, $set: {endTime: time}});\r\n\r\n","title":"$push and $set in same MongoDB update","body":"<p>My mongodb version is 3.4.20 and while using</p>\n\n<pre><code>db.collection.update({_id: pageId}, [{$push: {values: dboVital}}, {$set: {endTime: time}}]);\n</code></pre>\n\n<p>I received error</p>\n\n<pre><code>[thread1] Error: field names cannot start with $ [$push] :\n</code></pre>\n\n<p>To solve that error we can use:</p>\n\n<pre><code>db.collection.update({_id: pageId}, {$push: {values: dboVital}, $set: {endTime: time}});\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24627833,"reputation":1,"user_id":18527368,"display_name":"SHAIKH SOHEL FATTARU"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663666695,"creation_date":1663666695,"answer_id":73784590,"question_id":9071192,"body_markdown":"BasicDBObject update = new BasicDBObject().append(&quot;$push&quot;, new BasicDBObject().append(&quot;values&quot;, dboVital));\r\nupdate = update.append(&quot;$set&quot;, new BasicDBObject().append(&quot;endTime&quot;, time));\r\n\r\ncollection.update( new BasicDBObject().append(&quot;_id&quot;, pageId), update, true, false);","title":"$push and $set in same MongoDB update","body":"<p>BasicDBObject update = new BasicDBObject().append(&quot;$push&quot;, new BasicDBObject().append(&quot;values&quot;, dboVital));\nupdate = update.append(&quot;$set&quot;, new BasicDBObject().append(&quot;endTime&quot;, time));</p>\n<p>collection.update( new BasicDBObject().append(&quot;_id&quot;, pageId), update, true, false);</p>\n"}],"owner":{"account_id":288664,"reputation":9081,"user_id":589215,"accept_rate":65,"display_name":"HolySamosa"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43575,"favorite_count":0,"down_vote_count":0,"up_vote_count":37,"accepted_answer_id":9071251,"answer_count":3,"score":37,"last_activity_date":1663666695,"creation_date":1327959708,"question_id":9071192,"body_markdown":"I&#39;m trying to use MongoDB&#39;s Java driver to make two updates ($set and $push) to a record in the same operation.  I&#39;m using code similar to the following:\r\n\r\n\t\tBasicDBObject pushUpdate = new BasicDBObject().append(&quot;$push&quot;, new BasicDBObject().append(&quot;values&quot;, dboVital));\r\n\t\tBasicDBObject setUpdate = new BasicDBObject().append(&quot;$set&quot;, new BasicDBObject().append(&quot;endTime&quot;, time));\r\n\t\tBasicDBList combinedUpdate = new BasicDBList();\r\n\t\tcombinedUpdate.add( pushUpdate);\t\t\r\n\t\tcombinedUpdate.add( setUpdate);\r\n\t\t\r\n\r\n\t\tcollection.update( new BasicDBObject().append(&quot;_id&quot;, pageId), combinedUpdate, true, false);\r\n\r\n\r\nWhen I combine the $set and $push into the same update via a BasicDBList, I get an IllegalArgumentException: &quot;fields stored in the db can&#39;t start with &#39;$&#39; (Bad Key: &#39;$push&#39;)&quot;.\r\n\r\nIf I make two separate updates, both pushUpdate and setUpdate produce valid results.\r\n\r\nThanks!\r\n","title":"$push and $set in same MongoDB update","body":"<p>I'm trying to use MongoDB's Java driver to make two updates ($set and $push) to a record in the same operation.  I'm using code similar to the following:</p>\n\n<pre><code>    BasicDBObject pushUpdate = new BasicDBObject().append(\"$push\", new BasicDBObject().append(\"values\", dboVital));\n    BasicDBObject setUpdate = new BasicDBObject().append(\"$set\", new BasicDBObject().append(\"endTime\", time));\n    BasicDBList combinedUpdate = new BasicDBList();\n    combinedUpdate.add( pushUpdate);        \n    combinedUpdate.add( setUpdate);\n\n\n    collection.update( new BasicDBObject().append(\"_id\", pageId), combinedUpdate, true, false);\n</code></pre>\n\n<p>When I combine the $set and $push into the same update via a BasicDBList, I get an IllegalArgumentException: \"fields stored in the db can't start with '$' (Bad Key: '$push')\".</p>\n\n<p>If I make two separate updates, both pushUpdate and setUpdate produce valid results.</p>\n\n<p>Thanks!</p>\n"},{"tags":["java","resultset"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1663659537,"post_id":73783075,"comment_id":130285787,"body_markdown":"You haven&#39;t asked a question. Please read [ask].","body":"You haven&#39;t asked a question. Please read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."},{"owner":{"account_id":26311538,"reputation":13,"user_id":19974974,"display_name":"user19974974"},"score":0,"creation_date":1663666703,"post_id":73783075,"comment_id":130288207,"body_markdown":"Sorry, I corected that. I just want to split with (&#39;|&#39;)","body":"Sorry, I corected that. I just want to split with (&#39;|&#39;)"}],"answers":[{"tags":[],"owner":{"account_id":2094057,"reputation":506074,"user_id":1863229,"accept_rate":58,"display_name":"Tim Biegeleisen"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1663660044,"creation_date":1663660044,"answer_id":73783223,"question_id":73783075,"body_markdown":"Just split the column value on pipe and then check the second value:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    boolean correct = false;\r\n    String[] parts = TBOOKER_TRD_INTFTable.getString(&quot;EXT_T_ID_C&quot;).split(&quot;\\\\|&quot;);\r\n    if (parts.length &gt; 1) {\r\n        if (&quot;001&quot;.equals(parts[1]) || &quot;002&quot;.equals(parts[1])) {\r\n            correct = true;\r\n        }\r\n    }","title":"Split resultset with &#39;|&#39; and get the second value for each row","body":"<p>Just split the column value on pipe and then check the second value:</p>\n<pre class=\"lang-java prettyprint-override\"><code>boolean correct = false;\nString[] parts = TBOOKER_TRD_INTFTable.getString(&quot;EXT_T_ID_C&quot;).split(&quot;\\\\|&quot;);\nif (parts.length &gt; 1) {\n    if (&quot;001&quot;.equals(parts[1]) || &quot;002&quot;.equals(parts[1])) {\n        correct = true;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3555436,"reputation":181,"user_id":2969323,"display_name":"Samba"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663660437,"creation_date":1663660052,"answer_id":73783226,"question_id":73783075,"body_markdown":"refactor your code to this. \r\n\r\n    String result =&quot; 34567|001&quot;;\r\n    String secondValue = result.split(&quot;\\\\|&quot;)[1];\r\n    if(secondValue.equals(&quot;001&quot;)||secondValue.equals(&quot;002&quot;)){\r\n      //to something with the results\r\n    }","title":"Split resultset with &#39;|&#39; and get the second value for each row","body":"<p>refactor your code to this.</p>\n<pre><code>String result =&quot; 34567|001&quot;;\nString secondValue = result.split(&quot;\\\\|&quot;)[1];\nif(secondValue.equals(&quot;001&quot;)||secondValue.equals(&quot;002&quot;)){\n  //to something with the results\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25394367,"reputation":56,"user_id":19204854,"display_name":"Sensei_75"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663660547,"creation_date":1663660547,"answer_id":73783315,"question_id":73783075,"body_markdown":"You can loop through your result and then just split like below \r\n```\r\nlet result = &quot;34567|001&quot;; //If its an array/object data just loop through it to get the result\r\n\r\nconsole.log(result.split(&#39;|&#39;)); //[&#39;34567&#39;, &#39;001&#39;]\r\nlet value = result.split(&#39;|&#39;)[1]) //001\r\n```\r\nonce you got the value you can compare value with your data by using if-else or using in_array if you want to check from an array","title":"Split resultset with &#39;|&#39; and get the second value for each row","body":"<p>You can loop through your result and then just split like below</p>\n<pre><code>let result = &quot;34567|001&quot;; //If its an array/object data just loop through it to get the result\n\nconsole.log(result.split('|')); //['34567', '001']\nlet value = result.split('|')[1]) //001\n</code></pre>\n<p>once you got the value you can compare value with your data by using if-else or using in_array if you want to check from an array</p>\n"}],"owner":{"account_id":26311538,"reputation":13,"user_id":19974974,"display_name":"user19974974"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":117,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73783223,"answer_count":3,"score":1,"last_activity_date":1663666404,"creation_date":1663659232,"question_id":73783075,"body_markdown":"I have a Db column where I need to split the resultset by &#39;|&#39;.\r\nI need to get the second value for each row that is populating\r\n\r\n    String example \r\n    First row 34567|001\r\n    Second row 34545|002\r\n\r\nI want to get 001 and 002 and I want to check whether I am getting 001 and 002.\r\n\r\n    String[] res = TBOOKER_TRD_INTFTable.getString(&quot;EXT_T_ID_C&quot;).split(&quot;|&quot;);\r\n    System.out.println(res);\r\n    String [] version=res.replaceAll(&quot;\\\\s&quot;, &quot;&quot;).split(&quot;|&quot;,0);\r\n    List ves=Arrays.asList(version);\r\n    System.out.println(ves);\r\n    if(ves.contains(&quot;001&quot;) &amp;&amp; (ves.contains(&quot;002&quot;)){\r\n      System.out.println(&quot;version is correct&quot;);\r\n    }\r\n\r\n\r\n ","title":"Split resultset with &#39;|&#39; and get the second value for each row","body":"<p>I have a Db column where I need to split the resultset by '|'.\nI need to get the second value for each row that is populating</p>\n<pre><code>String example \nFirst row 34567|001\nSecond row 34545|002\n</code></pre>\n<p>I want to get 001 and 002 and I want to check whether I am getting 001 and 002.</p>\n<pre><code>String[] res = TBOOKER_TRD_INTFTable.getString(&quot;EXT_T_ID_C&quot;).split(&quot;|&quot;);\nSystem.out.println(res);\nString [] version=res.replaceAll(&quot;\\\\s&quot;, &quot;&quot;).split(&quot;|&quot;,0);\nList ves=Arrays.asList(version);\nSystem.out.println(ves);\nif(ves.contains(&quot;001&quot;) &amp;&amp; (ves.contains(&quot;002&quot;)){\n  System.out.println(&quot;version is correct&quot;);\n}\n</code></pre>\n"},{"tags":["java","java-stream"],"comments":[{"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"score":0,"creation_date":1663348930,"post_id":73748304,"comment_id":130226613,"body_markdown":"Welcome to Stack Overflow.\nPlease take the [tour] to learn how Stack Overflow works and read [ask] on how to improve the quality of your question.\nThen [edit] your question to include your source code as a working [mcve], which can be compiled and tested by others.\nPlease show your attempts you have tried and the problems/error messages you get from your attempts.","body":"Welcome to Stack Overflow. Please take the <a href=\"https://stackoverflow.com/tour\">tour</a> to learn how Stack Overflow works and read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> on how to improve the quality of your question. Then <a href=\"https://stackoverflow.com/posts/73748304/edit\">edit</a> your question to include your source code as a working <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, which can be compiled and tested by others. Please show your attempts you have tried and the problems/error messages you get from your attempts."},{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1663348935,"post_id":73748304,"comment_id":130226615,"body_markdown":"The key is going to be the `collect(toList())` at the end.","body":"The key is going to be the <code>collect(toList())</code> at the end."}],"answers":[{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1663666397,"creation_date":1663349699,"answer_id":73748478,"question_id":73748304,"body_markdown":"You can create a stream over the `cargoList` and then generate a portion of `ProfitOption` objects by streaming over `sellIsland` and filtering cost-efficient prices.\r\n\r\nSince every cargo in the `cargoList` can potentially produce multiple `ProfitOption` objects, in order to do transform a `Stream&lt;String&gt;` (where each element represents a cargo) into `Stream&lt;ProfitOption&gt;` you can use [`flatMap()`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Stream.html#flatMap(java.util.function.Function)) operation.\r\n\r\nThat&#39;s how it might look like:\r\n\r\n``` \r\nCollection&lt;Island&gt; islandList = // initialing buyIsland \r\nSet&lt;String&gt; cargoList =         // initialing cargoList\r\nIsland buyIsland =              // initialing buyIsland\r\nShip ship =                     // initialing ship\r\n\r\nList&lt;ProfitOption&gt; profitOptions = cargoList.stream()\r\n    .flatMap(cargoName -&gt; islandList.stream()\r\n        .filter(sellIsland -&gt; sellIsland.getIslandCargoPrices().get(cargoName).getPrice()\r\n                            &gt; buyIsland.getIslandCargoPrices().get(cargoName).getPrice())\r\n        .map(sellIsland -&gt; \r\n                new ProfitOption(buyIsland, cargoName, sellIsland, ship, levelOfDetail))\r\n        )\r\n    ).toList(); // for Java 16 or collect(Collectors.toList()) for earlier versions\r\n```","title":"Is there a way to transform this into code a stream?","body":"<p>You can create a stream over the <code>cargoList</code> and then generate a portion of <code>ProfitOption</code> objects by streaming over <code>sellIsland</code> and filtering cost-efficient prices.</p>\n<p>Since every cargo in the <code>cargoList</code> can potentially produce multiple <code>ProfitOption</code> objects, in order to do transform a <code>Stream&lt;String&gt;</code> (where each element represents a cargo) into <code>Stream&lt;ProfitOption&gt;</code> you can use <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Stream.html#flatMap(java.util.function.Function)\" rel=\"nofollow noreferrer\"><code>flatMap()</code></a> operation.</p>\n<p>That's how it might look like:</p>\n<pre><code>Collection&lt;Island&gt; islandList = // initialing buyIsland \nSet&lt;String&gt; cargoList =         // initialing cargoList\nIsland buyIsland =              // initialing buyIsland\nShip ship =                     // initialing ship\n\nList&lt;ProfitOption&gt; profitOptions = cargoList.stream()\n    .flatMap(cargoName -&gt; islandList.stream()\n        .filter(sellIsland -&gt; sellIsland.getIslandCargoPrices().get(cargoName).getPrice()\n                            &gt; buyIsland.getIslandCargoPrices().get(cargoName).getPrice())\n        .map(sellIsland -&gt; \n                new ProfitOption(buyIsland, cargoName, sellIsland, ship, levelOfDetail))\n        )\n    ).toList(); // for Java 16 or collect(Collectors.toList()) for earlier versions\n</code></pre>\n"}],"owner":{"account_id":23818020,"reputation":21,"user_id":20014270,"display_name":"Reborn"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":64,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"closed_date":1663351966,"answer_count":1,"score":1,"last_activity_date":1663666397,"creation_date":1663348599,"question_id":73748304,"body_markdown":"There can&#39;t be any side effects in functional programming (stream), but I&#39;m having trouble with that. I want to create a new object from values that I pick up along the way. I already have the `Ship ship` object and the `Island buyIsland` object and the objective is to calculate all possibilities from the list of `List&lt;String&gt; cargoNames` and the list of `List&lt;Island&gt; sellIslands` so that I can get the `cargoSellPrice` to make the profit calculation for that particular possibility.\r\n\r\nThe problem I&#39;m facing is that I can&#39;t seem to have a way to get those values back once I map to create a new stream. Maybe I&#39;m doing it wrong, but I can&#39;t seem to get it to work.\r\n\r\nI need to have all 4 of those to create a new ProfitOption object:\r\n\r\n`new ProfitOption(buyIsland, cargoName, sellIsland, ship, levelOfDetail)`\r\n\r\nObs: `levelOfDetail` is a default value\r\n\r\nSo, is there a way to convert the code below into a stream to make the code a bit more readable?\r\n\r\n```\r\nList&lt;ProfitOption&gt; profitOptions = new ArrayList&lt;&gt;();\r\nIsland buyIsland = islandCargoPriceDataTable.get(buyIslandName);\r\nCollection&lt;Island&gt; islandList = islandCargoPriceDataTable.values();\r\nShip ship = shipPropertiesInfo.get(shipName);\r\n\r\nSet&lt;String&gt; cargoList = buyIsland.getIslandCargoPrices().keySet();\r\nfor (String cargoName : cargoList) {\r\n\tint cargoBuyPrice = buyIsland.getIslandCargoPrices().get(cargoName).getPrice();\r\n\tfor (Island sellIsland : islandList) {\r\n\t\tint cargoSellPrice = sellIsland.getIslandCargoPrices().get(cargoName).getPrice();\r\n\t\tif (cargoSellPrice &gt; cargoBuyPrice) {\r\n\t\t\tprofitOptions.add(new ProfitOption(\r\n\t\t\t\t\tbuyIsland, cargoName, sellIsland, ship, levelOfDetail));\r\n\t\t}\r\n\t}\r\n}\r\n```\r\n\r\nThe solution provided didn&#39;t really solve the problem, unfortunately. It seemed that it would work.\r\n \r\nhttps://prnt.sc/T8tZ2sXAfrJc","title":"Is there a way to transform this into code a stream?","body":"<p>There can't be any side effects in functional programming (stream), but I'm having trouble with that. I want to create a new object from values that I pick up along the way. I already have the <code>Ship ship</code> object and the <code>Island buyIsland</code> object and the objective is to calculate all possibilities from the list of <code>List&lt;String&gt; cargoNames</code> and the list of <code>List&lt;Island&gt; sellIslands</code> so that I can get the <code>cargoSellPrice</code> to make the profit calculation for that particular possibility.</p>\n<p>The problem I'm facing is that I can't seem to have a way to get those values back once I map to create a new stream. Maybe I'm doing it wrong, but I can't seem to get it to work.</p>\n<p>I need to have all 4 of those to create a new ProfitOption object:</p>\n<p><code>new ProfitOption(buyIsland, cargoName, sellIsland, ship, levelOfDetail)</code></p>\n<p>Obs: <code>levelOfDetail</code> is a default value</p>\n<p>So, is there a way to convert the code below into a stream to make the code a bit more readable?</p>\n<pre><code>List&lt;ProfitOption&gt; profitOptions = new ArrayList&lt;&gt;();\nIsland buyIsland = islandCargoPriceDataTable.get(buyIslandName);\nCollection&lt;Island&gt; islandList = islandCargoPriceDataTable.values();\nShip ship = shipPropertiesInfo.get(shipName);\n\nSet&lt;String&gt; cargoList = buyIsland.getIslandCargoPrices().keySet();\nfor (String cargoName : cargoList) {\n    int cargoBuyPrice = buyIsland.getIslandCargoPrices().get(cargoName).getPrice();\n    for (Island sellIsland : islandList) {\n        int cargoSellPrice = sellIsland.getIslandCargoPrices().get(cargoName).getPrice();\n        if (cargoSellPrice &gt; cargoBuyPrice) {\n            profitOptions.add(new ProfitOption(\n                    buyIsland, cargoName, sellIsland, ship, levelOfDetail));\n        }\n    }\n}\n</code></pre>\n<p>The solution provided didn't really solve the problem, unfortunately. It seemed that it would work.</p>\n<p><a href=\"https://prnt.sc/T8tZ2sXAfrJc\" rel=\"nofollow noreferrer\">https://prnt.sc/T8tZ2sXAfrJc</a></p>\n"},{"tags":["java","spring","spring-mvc","jetty","embedded-jetty"],"owner":{"account_id":4975589,"reputation":65,"user_id":4002031,"display_name":"Mart&#237;n Gonz&#225;lez"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":255,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1663666242,"creation_date":1466112307,"question_id":37869583,"body_markdown":"Spring version: 4.2.6.RELEASE\r\nJetty version: 9.3.9.v20160517\r\n\r\nI have an embedded Jetty server with SpringMVC configured as follows:\r\n\r\n    package test;\r\n    \r\n    public class WebServer {\r\n    \tpublic static void main(String[] args) throws Exception {\r\n    \t\tAnnotationConfigWebApplicationContext spring = new AnnotationConfigWebApplicationContext();\r\n    \t\tspring.scan(&quot;test&quot;);\r\n    \r\n    \t\tDispatcherServlet servlet = new DispatcherServlet(spring);\r\n    \t\tServletHolder servletHolder = new ServletHolder(servlet);\r\n    \t\tservletHolder.setName(&quot;spring&quot;);\r\n    \r\n    \t\tServletContextHandler springHandler = new ServletContextHandler(ServletContextHandler.NO_SESSIONS);\r\n    \t\tspringHandler.setContextPath(&quot;/endpoint&quot;);\r\n    \t\tspringHandler.addServlet(servletHolder, &quot;/*&quot;);\r\n    \t\tspringHandler.setErrorHandler(null);\r\n    \t\tspringHandler.addEventListener(new ContextLoaderListener(spring));\r\n    \r\n    \t\tServer server = new Server(9290);\r\n    \t\tserver.setHandler(springHandler);\r\n    \t\tserver.setStopAtShutdown(true);\r\n    \t\tserver.start();\r\n    \t\tserver.join();\r\n    \t}\r\n    }\r\n\r\n\r\nI also have this controller:\r\n\r\n    package test;\r\n    \r\n    @RestController\r\n    public class AController {\r\n    \t@RequestMapping(value = &quot;/&quot;, method = RequestMethod.GET)\r\n    \tpublic ResponseEntity&lt;String&gt; testGet() {\r\n    \t\treturn new ResponseEntity&lt;&gt;(&quot;GET response&quot;, null, HttpStatus.OK);\r\n    \t}\r\n    \r\n    \t@RequestMapping(value = &quot;/&quot;, method = RequestMethod.POST)\r\n    \tpublic ResponseEntity&lt;String&gt; testPost() {\r\n    \t\treturn new ResponseEntity&lt;&gt;(&quot;POST response&quot;, null, HttpStatus.OK);\r\n    \t}\r\n    }\r\n\r\nWhen I issue a POST to `localhost:9290/endpoint` the `testGet()` method is executed, since i am receiving `GET response`.\r\n\r\nHowever if I make the POST to `localhost:9290/endpoint/` (notice the slash at the end), the `testPost()` method is executed, as expected.\r\n\r\nIs this a Jetty or Spring bug? I expected either to receive a 404 or the `testPost()` method to be executed instead of the `testGet` method.\r\n","title":"Embedded Jetty + Spring: HTTP POST arbitrarily changed to GET","body":"<p>Spring version: 4.2.6.RELEASE\nJetty version: 9.3.9.v20160517</p>\n\n<p>I have an embedded Jetty server with SpringMVC configured as follows:</p>\n\n<pre><code>package test;\n\npublic class WebServer {\n    public static void main(String[] args) throws Exception {\n        AnnotationConfigWebApplicationContext spring = new AnnotationConfigWebApplicationContext();\n        spring.scan(\"test\");\n\n        DispatcherServlet servlet = new DispatcherServlet(spring);\n        ServletHolder servletHolder = new ServletHolder(servlet);\n        servletHolder.setName(\"spring\");\n\n        ServletContextHandler springHandler = new ServletContextHandler(ServletContextHandler.NO_SESSIONS);\n        springHandler.setContextPath(\"/endpoint\");\n        springHandler.addServlet(servletHolder, \"/*\");\n        springHandler.setErrorHandler(null);\n        springHandler.addEventListener(new ContextLoaderListener(spring));\n\n        Server server = new Server(9290);\n        server.setHandler(springHandler);\n        server.setStopAtShutdown(true);\n        server.start();\n        server.join();\n    }\n}\n</code></pre>\n\n<p>I also have this controller:</p>\n\n<pre><code>package test;\n\n@RestController\npublic class AController {\n    @RequestMapping(value = \"/\", method = RequestMethod.GET)\n    public ResponseEntity&lt;String&gt; testGet() {\n        return new ResponseEntity&lt;&gt;(\"GET response\", null, HttpStatus.OK);\n    }\n\n    @RequestMapping(value = \"/\", method = RequestMethod.POST)\n    public ResponseEntity&lt;String&gt; testPost() {\n        return new ResponseEntity&lt;&gt;(\"POST response\", null, HttpStatus.OK);\n    }\n}\n</code></pre>\n\n<p>When I issue a POST to <code>localhost:9290/endpoint</code> the <code>testGet()</code> method is executed, since i am receiving <code>GET response</code>.</p>\n\n<p>However if I make the POST to <code>localhost:9290/endpoint/</code> (notice the slash at the end), the <code>testPost()</code> method is executed, as expected.</p>\n\n<p>Is this a Jetty or Spring bug? I expected either to receive a 404 or the <code>testPost()</code> method to be executed instead of the <code>testGet</code> method.</p>\n"},{"tags":["java","android"],"answers":[{"tags":[],"owner":{"account_id":7612800,"reputation":16,"user_id":5773181,"display_name":"Jo&#227;o Pedro Pedrosa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663629374,"creation_date":1663629374,"answer_id":73780135,"question_id":73779903,"body_markdown":"Add this permission to your Android Manifest file:\r\n\r\n```xml\r\n&lt;uses-permission android:name=&quot;android.permission.QUERY_ALL_PACKAGES&quot;/&gt;\r\n```\r\n\r\nAnd after that you can get a list of apps installed with this function:\r\n\r\n```java\r\npublic static List &lt;ApplicationInfo&gt; getUserInstalledApplications(Context context) {\r\n    final PackageManager packageManager = context.getPackageManager();\r\n    List &lt; ApplicationInfo &gt; installedApplications =\r\n        packageManager.getInstalledApplications(PackageManager.GET_META_DATA);\r\n    for (ApplicationInfo appInfo: installedApplications) {\r\n        //Do what you want with app info\r\n    }\r\n}\r\n```","title":"Android: List all installed apps and get total running time of each app","body":"<p>Add this permission to your Android Manifest file:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;uses-permission android:name=&quot;android.permission.QUERY_ALL_PACKAGES&quot;/&gt;\n</code></pre>\n<p>And after that you can get a list of apps installed with this function:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static List &lt;ApplicationInfo&gt; getUserInstalledApplications(Context context) {\n    final PackageManager packageManager = context.getPackageManager();\n    List &lt; ApplicationInfo &gt; installedApplications =\n        packageManager.getInstalledApplications(PackageManager.GET_META_DATA);\n    for (ApplicationInfo appInfo: installedApplications) {\n        //Do what you want with app info\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11309456,"reputation":1581,"user_id":8292965,"accept_rate":80,"display_name":"hobbydev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663665901,"creation_date":1663665901,"answer_id":73784413,"question_id":73779903,"body_markdown":"You can get a list of each service&#39;s start time by using ActivityManager.RunningServiceInfo.[activeSince][1].\r\n\r\n    ActivityManager activityManager = (ActivityManager) getSystemService(ACTIVITY_SERVICE);\r\n     List&lt;ActivityManager.RunningServiceInfo&gt; services = activityManager.getRunningServices(Integer.MAX_VALUE);\r\n    \r\n     long currentMillis = Calendar.getInstance().getTimeInMillis();        \r\n     Calendar cal = Calendar.getInstance();\r\n    \r\n     for (ActivityManager.RunningServiceInfo info : services) {\r\n         cal.setTimeInMillis(currentMillis-info.activeSince);\r\n    \r\n         Log.i(TAG, String.format(&quot;Process %s with component %s has been running since %s (%d milliseconds)&quot;,\r\n                 info.process, info.service.getClassName(), cal.getTime().toString(), info.activeSince));\r\n     }\r\n\r\n\r\n  [1]: https://developer.android.com/reference/android/app/ActivityManager.RunningServiceInfo.html#activeSince","title":"Android: List all installed apps and get total running time of each app","body":"<p>You can get a list of each service's start time by using ActivityManager.RunningServiceInfo.<a href=\"https://developer.android.com/reference/android/app/ActivityManager.RunningServiceInfo.html#activeSince\" rel=\"nofollow noreferrer\">activeSince</a>.</p>\n<pre><code>ActivityManager activityManager = (ActivityManager) getSystemService(ACTIVITY_SERVICE);\n List&lt;ActivityManager.RunningServiceInfo&gt; services = activityManager.getRunningServices(Integer.MAX_VALUE);\n\n long currentMillis = Calendar.getInstance().getTimeInMillis();        \n Calendar cal = Calendar.getInstance();\n\n for (ActivityManager.RunningServiceInfo info : services) {\n     cal.setTimeInMillis(currentMillis-info.activeSince);\n\n     Log.i(TAG, String.format(&quot;Process %s with component %s has been running since %s (%d milliseconds)&quot;,\n             info.process, info.service.getClassName(), cal.getTime().toString(), info.activeSince));\n }\n</code></pre>\n"}],"owner":{"account_id":26384772,"reputation":1,"user_id":20037472,"display_name":"RAMZI SHAIBAN"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":170,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1663665901,"creation_date":1663626922,"question_id":73779903,"body_markdown":"How to list all installed applications with total running time of each app and show it? ","title":"Android: List all installed apps and get total running time of each app","body":"<p>How to list all installed applications with total running time of each app and show it?</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":2,"creation_date":1663665597,"post_id":73784302,"comment_id":130287869,"body_markdown":"Sounds like you need to rebuild the project as spring seems to still use the old sources","body":"Sounds like you need to rebuild the project as spring seems to still use the old sources"},{"owner":{"account_id":21475407,"reputation":229,"user_id":15823763,"display_name":"nikiforov.java"},"score":0,"creation_date":1663668464,"post_id":73784302,"comment_id":130288785,"body_markdown":"I checked *.class files and rebuilt the project. I don&#39;t think that it is the reason. There is no such parameter  In old sources as well.","body":"I checked *.class files and rebuilt the project. I don&#39;t think that it is the reason. There is no such parameter  In old sources as well."},{"owner":{"account_id":80360,"reputation":5251,"user_id":227294,"display_name":"Andreas"},"score":0,"creation_date":1663669760,"post_id":73784302,"comment_id":130289225,"body_markdown":"Debug the wiring of your Spring Application with your IDE, this should reveal your code that demands `beanName1`. Or just search for `beanName1` in your code base.","body":"Debug the wiring of your Spring Application with your IDE, this should reveal your code that demands <code>beanName1</code>. Or just search for <code>beanName1</code> in your code base."},{"owner":{"account_id":21475407,"reputation":229,"user_id":15823763,"display_name":"nikiforov.java"},"score":0,"creation_date":1663670495,"post_id":73784302,"comment_id":130289473,"body_markdown":"@Andreas, thank you so much! :) &quot;Find in files&quot; helped to find a class where one of the parameters was created with @DependsOn(value = &quot;beanName1&quot;). This is why I didn&#39;t find it when I tried to debug it with a breakpoint in a constructor of this parameter class.","body":"@Andreas, thank you so much! :) &quot;Find in files&quot; helped to find a class where one of the parameters was created with @DependsOn(value = &quot;beanName1&quot;). This is why I didn&#39;t find it when I tried to debug it with a breakpoint in a constructor of this parameter class."}],"owner":{"account_id":21475407,"reputation":229,"user_id":15823763,"display_name":"nikiforov.java"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":143,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1663665335,"creation_date":1663665335,"question_id":73784302,"body_markdown":"I try to run a SpringBoot application and see an error: \r\n\r\n```\r\nParameter 1 of method methodName in com.example.app.config.ConfigClassName required a bean named &#39;beanName1&#39; that could not be found.\r\n```\r\n\r\nThis is how this bean declaration looks like\r\n\r\n```\r\n    @Bean\r\n    CustomRedisSubscriber methodName(BeanName2 beanName2, BeanName3 beanName3,\r\n                                    BeanName4 beanName4)\r\n    {\r\n        return new CustomRedisSubscriber(beanName2, beanName3, beanName4);\r\n    }\r\n```\r\n\r\nI mean this @Bean method doesn&#39;t have any parameter that looks like &quot;beanName1&quot;.\r\nClass BeanName1 and @Bean method that creates bean of BeanName1 class were deleted from source code.\r\n\r\nI rebased to the previous version where class BeanName1 existed and bean with name &quot;beanName1&quot; was declared and checked  ```@Bean CustomRedisSubscriber methodName``` in debug mode - there was no parameter with the name &quot;beanName1&quot; available in the method methodName.\r\n\r\nThe funniest thing is that when I created a bean declaration with type String and named &quot;beanName1&quot; the error disappeared.\r\n\r\n```\r\n    @Bean\r\n    String beanName1() {\r\n        return &quot;This is beanName1String&quot;;\r\n    }\r\n```\r\n\r\nAny ideas why it may happen?\r\nThanks.\r\n\r\n","title":"Spring tells that it fails to create bean because a parameter bean is missing, but there is no such parameter in @Bean method","body":"<p>I try to run a SpringBoot application and see an error:</p>\n<pre><code>Parameter 1 of method methodName in com.example.app.config.ConfigClassName required a bean named 'beanName1' that could not be found.\n</code></pre>\n<p>This is how this bean declaration looks like</p>\n<pre><code>    @Bean\n    CustomRedisSubscriber methodName(BeanName2 beanName2, BeanName3 beanName3,\n                                    BeanName4 beanName4)\n    {\n        return new CustomRedisSubscriber(beanName2, beanName3, beanName4);\n    }\n</code></pre>\n<p>I mean this @Bean method doesn't have any parameter that looks like &quot;beanName1&quot;.\nClass BeanName1 and @Bean method that creates bean of BeanName1 class were deleted from source code.</p>\n<p>I rebased to the previous version where class BeanName1 existed and bean with name &quot;beanName1&quot; was declared and checked  <code>@Bean CustomRedisSubscriber methodName</code> in debug mode - there was no parameter with the name &quot;beanName1&quot; available in the method methodName.</p>\n<p>The funniest thing is that when I created a bean declaration with type String and named &quot;beanName1&quot; the error disappeared.</p>\n<pre><code>    @Bean\n    String beanName1() {\n        return &quot;This is beanName1String&quot;;\n    }\n</code></pre>\n<p>Any ideas why it may happen?\nThanks.</p>\n"},{"tags":["java","spring-boot","rest","apache-camel","camel-rest"],"comments":[{"owner":{"account_id":22247129,"reputation":2052,"user_id":16480631,"display_name":"Pasi &#214;sterman"},"score":0,"creation_date":1663599422,"post_id":73774419,"comment_id":130271996,"body_markdown":"Whats the problem calling direct consumer endpoints? They can be treated like functions in camel anyways.  My guess is that they&#39;ve just wanted to move all route defining outside REST DSL to simplify things either for users or for themselves.","body":"Whats the problem calling direct consumer endpoints? They can be treated like functions in camel anyways.  My guess is that they&#39;ve just wanted to move all route defining outside REST DSL to simplify things either for users or for themselves."},{"owner":{"account_id":2691023,"reputation":16196,"user_id":2324388,"accept_rate":41,"display_name":"Marian Kl&#252;hspies"},"score":0,"creation_date":1663602299,"post_id":73774419,"comment_id":130273152,"body_markdown":"@Pasi&#214;sterman one extra route for just returning a string feels to complex to be true, but maybe you are right.","body":"@Pasi&#214;sterman one extra route for just returning a string feels to complex to be true, but maybe you are right."}],"answers":[{"tags":[],"owner":{"account_id":1901420,"reputation":3763,"user_id":1717210,"display_name":"TacheDeChoco"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663600506,"creation_date":1663600506,"answer_id":73775676,"question_id":73774419,"body_markdown":"Something like this maybe ?\r\n\r\n    rest()\r\n    \t.get(&quot;/hello&quot;)\r\n    \t.route()\r\n    \t.process( e -&gt; e.getMessage().setBody(&quot;Hello World&quot;) ) ;","title":"How to simply return a String using Apache Camel REST DSL","body":"<p>Something like this maybe ?</p>\n<pre><code>rest()\n    .get(&quot;/hello&quot;)\n    .route()\n    .process( e -&gt; e.getMessage().setBody(&quot;Hello World&quot;) ) ;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22247129,"reputation":2052,"user_id":16480631,"display_name":"Pasi &#214;sterman"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1663665315,"creation_date":1663664987,"answer_id":73784212,"question_id":73774419,"body_markdown":"While you can no longer define a simple route that returns a string in Rest-DSL you can use camels [language component](https://camel.apache.org/components/latest/language-component.html) to achieve something similar using constants, simple language or by using a file in resources folder. \r\n\r\n```java\r\nrest(&quot;/api&quot;)\r\n    .description(&quot;Some description&quot;)\r\n    .get(&quot;/constant&quot;)\r\n        .produces(&quot;text/plain&quot;)\r\n        .to(&quot;language:constant:Hello world&quot;)\r\n    .get(&quot;/simple&quot;)\r\n        .produces(&quot;text/html&quot;)\r\n        // Usage {{host}}:{{port}}/api/simple?name=Bob\r\n        .to(&quot;language:simple:&lt;html&gt;&lt;body&gt;&lt;h1&gt;hello ${headers.name}&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;&quot;)\r\n    .get(&quot;/resource&quot;)\r\n        .produces(&quot;text/html&quot;)\r\n        // Displays project/src/main/resources/pages/hello.html\r\n        .to(&quot;language:constant:resource:classpath:pages/hello.html&quot;)\r\n;\r\n```\r\n\r\nIt&#39;s unfortunate that examples for language-component are quite sparse as it looks like handy tool for bunch of little things. ","title":"How to simply return a String using Apache Camel REST DSL","body":"<p>While you can no longer define a simple route that returns a string in Rest-DSL you can use camels <a href=\"https://camel.apache.org/components/latest/language-component.html\" rel=\"nofollow noreferrer\">language component</a> to achieve something similar using constants, simple language or by using a file in resources folder.</p>\n<pre class=\"lang-java prettyprint-override\"><code>rest(&quot;/api&quot;)\n    .description(&quot;Some description&quot;)\n    .get(&quot;/constant&quot;)\n        .produces(&quot;text/plain&quot;)\n        .to(&quot;language:constant:Hello world&quot;)\n    .get(&quot;/simple&quot;)\n        .produces(&quot;text/html&quot;)\n        // Usage {{host}}:{{port}}/api/simple?name=Bob\n        .to(&quot;language:simple:&lt;html&gt;&lt;body&gt;&lt;h1&gt;hello ${headers.name}&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;&quot;)\n    .get(&quot;/resource&quot;)\n        .produces(&quot;text/html&quot;)\n        // Displays project/src/main/resources/pages/hello.html\n        .to(&quot;language:constant:resource:classpath:pages/hello.html&quot;)\n;\n</code></pre>\n<p>It's unfortunate that examples for language-component are quite sparse as it looks like handy tool for bunch of little things.</p>\n"}],"owner":{"account_id":2691023,"reputation":16196,"user_id":2324388,"accept_rate":41,"display_name":"Marian Kl&#252;hspies"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":778,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1663665315,"creation_date":1663595227,"question_id":73774419,"body_markdown":"I&#39;m trying to use the Apache Camel REST DSL to create a simple REST API that just is supposed to return a String when called.\r\n\r\nHowever, while the code below was once working, the API seems to have changed\r\n\r\n    rest().get(&quot;/hello-world&quot;).produces(MediaType.APPLICATION_JSON_VALUE).route()\r\n          .setBody(constant(&quot;Welcome to apache camel test &quot;)).endRest();\r\n\r\n**route()** does not exist anymore in **Apache Camel 3.17.0**\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n\r\nI&#39;ve also tried\r\n\r\n\r\n    rest(&quot;/say&quot;)\r\n        .get(&quot;/hello&quot;)\r\n        .responseMessage(200, &quot;Hello World&quot;);\r\n\r\nBut this returns an empty String instead of &quot;Hello World&quot;\r\n\r\n\r\nThe only thing that worked so far is by creating an extra route\r\n\r\n\r\n    rest(&quot;/say&quot;)\r\n        .get(&quot;/hello&quot;)\r\n        .to(&quot;direct:build-return-message&quot;);\r\n    \r\n    from(&quot;direct:build-return-message&quot;)\r\n        .setBody(simple(&quot;Hello World&quot;));\r\n\r\nBut this can&#39;t be the preferred way.\r\n\r\n**How would you now set the response body with the latest API?**\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ZLXyX.png\r\n","title":"How to simply return a String using Apache Camel REST DSL","body":"<p>I'm trying to use the Apache Camel REST DSL to create a simple REST API that just is supposed to return a String when called.</p>\n<p>However, while the code below was once working, the API seems to have changed</p>\n<pre><code>rest().get(&quot;/hello-world&quot;).produces(MediaType.APPLICATION_JSON_VALUE).route()\n      .setBody(constant(&quot;Welcome to apache camel test &quot;)).endRest();\n</code></pre>\n<p><strong>route()</strong> does not exist anymore in <strong>Apache Camel 3.17.0</strong></p>\n<p><a href=\"https://i.stack.imgur.com/ZLXyX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZLXyX.png\" alt=\"enter image description here\" /></a></p>\n<p>I've also tried</p>\n<pre><code>rest(&quot;/say&quot;)\n    .get(&quot;/hello&quot;)\n    .responseMessage(200, &quot;Hello World&quot;);\n</code></pre>\n<p>But this returns an empty String instead of &quot;Hello World&quot;</p>\n<p>The only thing that worked so far is by creating an extra route</p>\n<pre><code>rest(&quot;/say&quot;)\n    .get(&quot;/hello&quot;)\n    .to(&quot;direct:build-return-message&quot;);\n\nfrom(&quot;direct:build-return-message&quot;)\n    .setBody(simple(&quot;Hello World&quot;));\n</code></pre>\n<p>But this can't be the preferred way.</p>\n<p><strong>How would you now set the response body with the latest API?</strong></p>\n"},{"tags":["java","list","algorithm"],"comments":[{"owner":{"account_id":4217241,"reputation":3325,"user_id":3453041,"accept_rate":93,"display_name":"Water"},"score":0,"creation_date":1663622910,"post_id":73779429,"comment_id":130279469,"body_markdown":"What are you trying to do with `v`? It&#39;s not being used anywhere. Edit: This doesn&#39;t compile, we can&#39;t help you if you don&#39;t post all your code.","body":"What are you trying to do with <code>v</code>? It&#39;s not being used anywhere. Edit: This doesn&#39;t compile, we can&#39;t help you if you don&#39;t post all your code."},{"owner":{"account_id":3022791,"reputation":1815,"user_id":2563422,"display_name":"clwhisk"},"score":0,"creation_date":1663622994,"post_id":73779429,"comment_id":130279491,"body_markdown":"Why compare every doll size to the `maxKey`?","body":"Why compare every doll size to the <code>maxKey</code>?"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1663623019,"post_id":73779429,"comment_id":130279501,"body_markdown":"Explain your algorithm in English. But also create some of your own test data and try to find cases which fail.","body":"Explain your algorithm in English. But also create some of your own test data and try to find cases which fail."},{"owner":{"account_id":3837342,"reputation":6111,"user_id":3181365,"accept_rate":70,"display_name":"learner"},"score":0,"creation_date":1663623156,"post_id":73779429,"comment_id":130279529,"body_markdown":"@Water, it was a typo error, I have fixed it.","body":"@Water, it was a typo error, I have fixed it."},{"owner":{"account_id":4217241,"reputation":3325,"user_id":3453041,"accept_rate":93,"display_name":"Water"},"score":1,"creation_date":1663623276,"post_id":73779429,"comment_id":130279552,"body_markdown":"I don&#39;t understand example 2. Shouldn&#39;t the output be 1 because you can fit 1, 2, 3, 4, 5 inside of each other, leaving only the 2?","body":"I don&#39;t understand example 2. Shouldn&#39;t the output be 1 because you can fit 1, 2, 3, 4, 5 inside of each other, leaving only the 2?"},{"owner":{"account_id":3837342,"reputation":6111,"user_id":3181365,"accept_rate":70,"display_name":"learner"},"score":1,"creation_date":1663623450,"post_id":73779429,"comment_id":130279581,"body_markdown":"@Water, Input is 1, 2, 2, 3, 4, 5 . I have two 2&#39;s, I can only place a single 2 inside 5. So in the 5 we can place 1,2,3,4. So in the end we have 5 and 2 remaining numbers","body":"@Water, Input is 1, 2, 2, 3, 4, 5 . I have two 2&#39;s, I can only place a single 2 inside 5. So in the 5 we can place 1,2,3,4. So in the end we have 5 and 2 remaining numbers"},{"owner":{"account_id":3380632,"reputation":14294,"user_id":2837741,"accept_rate":100,"display_name":"daniu"},"score":0,"creation_date":1663623632,"post_id":73779429,"comment_id":130279616,"body_markdown":"It doesn&#39;t say in the problem statement that the dolls are guaranteed to be sorted by size, and your algorithm probably doesn&#39;t work if they&#39;re not.","body":"It doesn&#39;t say in the problem statement that the dolls are guaranteed to be sorted by size, and your algorithm probably doesn&#39;t work if they&#39;re not."},{"owner":{"account_id":12931984,"reputation":7896,"user_id":9350720,"display_name":"Abhinav Mathur"},"score":0,"creation_date":1663646884,"post_id":73779429,"comment_id":130282976,"body_markdown":"@learner _&quot;I can only place a single 2 inside 5&quot;_. Where is this specified in the question?","body":"@learner <i>&quot;I can only place a single 2 inside 5&quot;</i>. Where is this specified in the question?"},{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":1,"creation_date":1663659460,"post_id":73779429,"comment_id":130285766,"body_markdown":"@AbhinavMathur Placing more than one doll of the same size into a larger doll might be physically impossible ([this doll](https://www.researchgate.net/profile/Matthew-Frank-5/publication/265969561/figure/fig5/AS:668769798078474@1536458553275/Matryoshka-shell-model-a-Set-of-Matryoshka-dolls-in-order-of-size-35-and-b.ppm) is a kind of nested, wooden toy). And it can be observed from the example.","body":"@AbhinavMathur Placing more than one doll of the same size into a larger doll might be physically impossible (<a href=\"https://www.researchgate.net/profile/Matthew-Frank-5/publication/265969561/figure/fig5/AS:668769798078474@1536458553275/Matryoshka-shell-model-a-Set-of-Matryoshka-dolls-in-order-of-size-35-and-b.ppm\" rel=\"nofollow noreferrer\">this doll</a> is a kind of nested, wooden toy). And it can be observed from the example."},{"owner":{"account_id":4680926,"reputation":2259,"user_id":3789665,"accept_rate":57,"display_name":"greybeard"},"score":0,"creation_date":1663662336,"post_id":73779429,"comment_id":130286774,"body_markdown":"Try 1, 1, 2, 2, 3.","body":"Try 1, 1, 2, 2, 3."}],"answers":[{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1663665270,"creation_date":1663624403,"answer_id":73779658,"question_id":73779429,"body_markdown":"&gt; I can put the smaller dolls inside the larger ones, but dolls of the exact same size cannot be placed inside each other.\r\n\r\nBasically you need to find the most frequent size of the dolls, it would be equal to the number of remaining dolls.\r\n\r\nBecause only duplicated sizes impose limitation on how many dolls would leave after placing dolls of smaller sizes into larger dolls.\r\n\r\nLet&#39;s consider the following example with `16` dolls of sizes from `1` to `5`:\r\n\r\n```none\r\n   ---   SIZES   --- \r\n+----------------------+\r\n|  1   2   3   4   5   | -&gt; doll of size 5 containing [4, 3, 2, 1]\r\n|      2   3   4   5   | -&gt; doll of size 5 containing [4, 3, 2]\r\n|      2   3   4   5   | -&gt; doll of size 5 containing [4, 3, 2]\r\n|          3   4       | -&gt; doll of size 4 containing [3]\r\n|          3           | -&gt; empty doll of size 3\r\n+----------------------+\r\n```\r\n\r\nAfter folding the data by placing all smaller dolls into large dolls, we would have `5` dolls:\r\n\r\n* `3` dolls of size `5`;\r\n* `1` doll of size `4`;\r\n* `1` doll of size `3`;\r\n\r\nThe total number of dolls is bounded by the most frequent size.\r\n\r\n    public static int process(List&lt;Integer&gt; doll) {\r\n        Map&lt;Integer, Integer&gt; sizeByCount = new HashMap&lt;&gt;();\r\n        \r\n        for (int size : doll) {\r\n            sizeByCount.merge(size, 1, Integer::sum); // or sizeByCount.put(size, sizeByCount.getOrDefault(size, 0) + 1);\r\n        }\r\n        \r\n        int max = 0;\r\n        \r\n        for (int count : sizeByCount.values()) {\r\n            max = Math.max(count, max);\r\n        }\r\n        \r\n        return max;\r\n    }\r\n\r\nIn case if you&#39;re comfortable with Streams API, this code can be replaced with a single statement:\r\n\r\n    return doll.stream()\r\n        .collect(Collectors.toMap(Function.identity(), e -&gt; 1, Integer::sum))\r\n        .values().stream()\r\n        .max(Comparator.naturalOrder())\r\n        .orElse(0);\r\n\r\n`main()`\r\n\r\n    public static void main(String[] args) {\r\n        System.out.println(process(List.of(1, 2, 2, 3, 4, 5)));\r\n        System.out.println(process(List.of(2, 2, 3, 3)));\r\n    }\r\n\r\n*Output:*\r\n```\r\n2\r\n2\r\n```","title":"Russian dolls - Find the minimum dolls left","body":"<blockquote>\n<p>I can put the smaller dolls inside the larger ones, but dolls of the exact same size cannot be placed inside each other.</p>\n</blockquote>\n<p>Basically you need to find the most frequent size of the dolls, it would be equal to the number of remaining dolls.</p>\n<p>Because only duplicated sizes impose limitation on how many dolls would leave after placing dolls of smaller sizes into larger dolls.</p>\n<p>Let's consider the following example with <code>16</code> dolls of sizes from <code>1</code> to <code>5</code>:</p>\n<pre class=\"lang-none prettyprint-override\"><code>   ---   SIZES   --- \n+----------------------+\n|  1   2   3   4   5   | -&gt; doll of size 5 containing [4, 3, 2, 1]\n|      2   3   4   5   | -&gt; doll of size 5 containing [4, 3, 2]\n|      2   3   4   5   | -&gt; doll of size 5 containing [4, 3, 2]\n|          3   4       | -&gt; doll of size 4 containing [3]\n|          3           | -&gt; empty doll of size 3\n+----------------------+\n</code></pre>\n<p>After folding the data by placing all smaller dolls into large dolls, we would have <code>5</code> dolls:</p>\n<ul>\n<li><code>3</code> dolls of size <code>5</code>;</li>\n<li><code>1</code> doll of size <code>4</code>;</li>\n<li><code>1</code> doll of size <code>3</code>;</li>\n</ul>\n<p>The total number of dolls is bounded by the most frequent size.</p>\n<pre><code>public static int process(List&lt;Integer&gt; doll) {\n    Map&lt;Integer, Integer&gt; sizeByCount = new HashMap&lt;&gt;();\n    \n    for (int size : doll) {\n        sizeByCount.merge(size, 1, Integer::sum); // or sizeByCount.put(size, sizeByCount.getOrDefault(size, 0) + 1);\n    }\n    \n    int max = 0;\n    \n    for (int count : sizeByCount.values()) {\n        max = Math.max(count, max);\n    }\n    \n    return max;\n}\n</code></pre>\n<p>In case if you're comfortable with Streams API, this code can be replaced with a single statement:</p>\n<pre><code>return doll.stream()\n    .collect(Collectors.toMap(Function.identity(), e -&gt; 1, Integer::sum))\n    .values().stream()\n    .max(Comparator.naturalOrder())\n    .orElse(0);\n</code></pre>\n<p><code>main()</code></p>\n<pre><code>public static void main(String[] args) {\n    System.out.println(process(List.of(1, 2, 2, 3, 4, 5)));\n    System.out.println(process(List.of(2, 2, 3, 3)));\n}\n</code></pre>\n<p><em>Output:</em></p>\n<pre><code>2\n2\n</code></pre>\n"}],"owner":{"account_id":3837342,"reputation":6111,"user_id":3181365,"accept_rate":70,"display_name":"learner"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":508,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":73779658,"answer_count":1,"score":2,"last_activity_date":1663665270,"creation_date":1663622579,"question_id":73779429,"body_markdown":"I have N [dolls](https://en.wikipedia.org/wiki/Matryoshka_doll) of various sizes.\r\n\r\nI can put the smaller dolls inside the larger ones, but dolls of the exact same size cannot be placed inside each other. \r\n\r\nI have to find the minimum number of dolls that remain when the maximum number of dolls have been packed. \r\n\r\n&gt; **Constraints**  \r\n&gt; 1N 10&lt;sup&gt;5&lt;/sup&gt;  \r\n&gt; 1  size of doll  10&lt;sup&gt;5&lt;/sup&gt;  \r\n&gt; \r\n&gt; **Output** Print the minimum number of dolls after placing all smaller dolls inside the larger dolls. \r\n&gt; \r\n&gt; **Example #1** \r\n&gt; \r\n&gt; Input 2, 2, 3, 3  \r\n&gt; Output 2 \r\n&gt; \r\n&gt; **Explanation:** \r\n&gt; \r\n&gt; - Put the doll at index `1` inside the doll at index `3` i.e. the doll of size two into the doll size three.\r\n&gt; - Put a doll at index `2` inside the doll at index `4` i.e. doll of size two in size three  \r\n&gt;\r\n&gt; We are left with two dolls of size three, which cannot be further placed inside each other. So, the output is `2`. \r\n&gt; \r\n&gt; **Example #2** \r\n&gt; \r\n&gt; Input 1, 2, 2, 3, 4, 5  \r\n&gt; Output 2  \r\n&gt; \r\n&gt; **Explanation:** We can place dolls at index (1, 2, 4, 5) in the doll at index 6.  \r\n&gt; So, we will remain with two dolls of sizes two and five.\r\n\r\nThis is my code:\r\n\r\n\r\n    public int process(List&lt;Integer&gt; doll) {\r\n    \tMap&lt;Integer, Integer&gt; map = new TreeMap&lt;&gt;();\r\n    \tfor(int key : doll) map.put(key, map.getOrDefault(key,0)+1);\r\n    \t\r\n    \tList&lt;Integer&gt; list = new ArrayList&lt;&gt;(map.keySet());\r\n    \tint maxKey = list.get(list.size()-1);\r\n    \tint m = map.get(maxKey);\r\n    \tint result = 0;\r\n    \tfor(int k : map.keySet()) {\r\n    \t\tif(k != maxKey) {\r\n    \t\t\tint p = map.get(k);\r\n    \t\t\tif(p &gt; m){\r\n    \t\t\t\tresult += p - m;\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    \tresult += m;\r\n    \treturn result;\r\n    }\r\n\r\nOut of 7 test cases, 3 were failing, and they are HIDDEN test cases so I am not able to see those cases.\r\n\r\nHow to fix this problem?","title":"Russian dolls - Find the minimum dolls left","body":"<p>I have N <a href=\"https://en.wikipedia.org/wiki/Matryoshka_doll\" rel=\"nofollow noreferrer\">dolls</a> of various sizes.</p>\n<p>I can put the smaller dolls inside the larger ones, but dolls of the exact same size cannot be placed inside each other.</p>\n<p>I have to find the minimum number of dolls that remain when the maximum number of dolls have been packed.</p>\n<blockquote>\n<p><strong>Constraints</strong><br />\n1N 10<sup>5</sup><br />\n1  size of doll  10<sup>5</sup></p>\n<p><strong>Output</strong> Print the minimum number of dolls after placing all smaller dolls inside the larger dolls.</p>\n<p><strong>Example #1</strong></p>\n<p>Input 2, 2, 3, 3<br />\nOutput 2</p>\n<p><strong>Explanation:</strong></p>\n<ul>\n<li>Put the doll at index <code>1</code> inside the doll at index <code>3</code> i.e. the doll of size two into the doll size three.</li>\n<li>Put a doll at index <code>2</code> inside the doll at index <code>4</code> i.e. doll of size two in size three</li>\n</ul>\n<p>We are left with two dolls of size three, which cannot be further placed inside each other. So, the output is <code>2</code>.</p>\n<p><strong>Example #2</strong></p>\n<p>Input 1, 2, 2, 3, 4, 5<br />\nOutput 2</p>\n<p><strong>Explanation:</strong> We can place dolls at index (1, 2, 4, 5) in the doll at index 6.<br />\nSo, we will remain with two dolls of sizes two and five.</p>\n</blockquote>\n<p>This is my code:</p>\n<pre><code>public int process(List&lt;Integer&gt; doll) {\n    Map&lt;Integer, Integer&gt; map = new TreeMap&lt;&gt;();\n    for(int key : doll) map.put(key, map.getOrDefault(key,0)+1);\n    \n    List&lt;Integer&gt; list = new ArrayList&lt;&gt;(map.keySet());\n    int maxKey = list.get(list.size()-1);\n    int m = map.get(maxKey);\n    int result = 0;\n    for(int k : map.keySet()) {\n        if(k != maxKey) {\n            int p = map.get(k);\n            if(p &gt; m){\n                result += p - m;\n            }\n        }\n    }\n    result += m;\n    return result;\n}\n</code></pre>\n<p>Out of 7 test cases, 3 were failing, and they are HIDDEN test cases so I am not able to see those cases.</p>\n<p>How to fix this problem?</p>\n"},{"tags":["java","android","gps","android-gps"],"comments":[{"owner":{"account_id":14888087,"reputation":333,"user_id":10750674,"display_name":"Graziano"},"score":0,"creation_date":1668096221,"post_id":73782187,"comment_id":131328683,"body_markdown":"You could also use the `Location`&#39;s method `distanceTo` or `distanceBetween` to obtain the distance between 2 locations: https://developer.android.com/reference/android/location/Location#distanceTo(android.location.Location)","body":"You could also use the <code>Location</code>&#39;s method <code>distanceTo</code> or <code>distanceBetween</code> to obtain the distance between 2 locations: <a href=\"https://developer.android.com/reference/android/location/Location#distanceTo(android.location.Location)\" rel=\"nofollow noreferrer\">developer.android.com/reference/android/location/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":16266080,"reputation":56,"user_id":16564712,"display_name":"Gaya Touak"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1663665241,"creation_date":1663665241,"answer_id":73784278,"question_id":73782187,"body_markdown":"You can make your MainActivity implements LocationListener:\r\n\r\n    public class MainActivity \r\n    extends \r\n    AppCompactActivity implements \r\n    LocationListener {\r\n    //Rest of the code\r\n\r\n    @Override\r\n    public void \r\n    onLocationChanged(Location \r\n    location){\r\n    //do your stuff       \r\n     }\r\n\r\n    @Override\r\n    public void onStatusChanged(String \r\n    provider, int status, Bundle \r\n    extras) {\r\n    //do your stuff\r\n    }\r\n\r\n    @Override\r\n    public void \r\n    onProviderEnabled(String provider) \r\n    {\r\n    //do your stuff\r\n    }\r\n\r\n    @Override\r\n    public void \r\n    onProviderDisabled(String \r\n    provider) {\r\n    //do your stuff\r\n    }\r\n        }","title":"Need to get updated location/data from onLocationChanged","body":"<p>You can make your MainActivity implements LocationListener:</p>\n<pre><code>public class MainActivity \nextends \nAppCompactActivity implements \nLocationListener {\n//Rest of the code\n\n@Override\npublic void \nonLocationChanged(Location \nlocation){\n//do your stuff       \n }\n\n@Override\npublic void onStatusChanged(String \nprovider, int status, Bundle \nextras) {\n//do your stuff\n}\n\n@Override\npublic void \nonProviderEnabled(String provider) \n{\n//do your stuff\n}\n\n@Override\npublic void \nonProviderDisabled(String \nprovider) {\n//do your stuff\n}\n    }\n</code></pre>\n"}],"owner":{"account_id":16277418,"reputation":69,"user_id":11754247,"display_name":"MUSTANGBOSS8055"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73784278,"answer_count":1,"score":0,"last_activity_date":1663665241,"creation_date":1663653482,"question_id":73782187,"body_markdown":"*Just a warning: I&#39;m really not proud of this code that I&#39;ve written, but I just need it to work anyhow. Don&#39;t judge me too harshly.*\r\n\r\nHey everyone, I&#39;m programming a speedometer android app, and I&#39;m running into a basic issue. I need to calculate the distance between two GPS coordinates using the Android location service (I know the Fused Location Provider is superior but please bear with this).\r\n\r\nThe location listener classes are in a Java file called CurrentLocationListener.java. So far, I&#39;ve been able to get the two coordinates and get the distance between the updated coordinate and the old coordinate inside the above java file, but I need some way of passing it to the MainActivity.java file where I can update my UI with the said distance. The codes for the two java files are below:\r\n\r\nMainActivity.java\r\n```\r\npackage com.example.speedometer;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.core.app.ActivityCompat;\r\nimport androidx.core.content.ContextCompat;\r\n\r\nimport android.Manifest;\r\nimport android.annotation.SuppressLint;\r\nimport android.content.Context;\r\nimport android.content.pm.PackageManager;\r\nimport android.location.Location;\r\nimport android.location.LocationManager;\r\nimport android.os.Bundle;\r\nimport android.view.View;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\nimport java.lang.Thread;\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    CurrentLocationListener currentLocationListener;\r\n    LocationManager locationManager;\r\n    TextView textCurrentSpeed, textOdometer, textAvgSpeed;\r\n//    MainActivity mainActivity;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n//        mainActivity = this;\r\n\r\n        currentLocationListener = new CurrentLocationListener();\r\n        textCurrentSpeed = findViewById(R.id.dispCurrentSpeed);\r\n        textOdometer = findViewById(R.id.dispOdometer);\r\n        textAvgSpeed = findViewById(R.id.dispAvgSpeed);\r\n\r\n        locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);\r\n\r\n        if (ActivityCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED &amp;&amp; ActivityCompat.checkSelfPermission(this, Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED)\r\n        {\r\n            Toast.makeText(this, &quot;Location permission not granted. Please grant permission.&quot;, Toast.LENGTH_LONG).show();\r\n            alertbox();\r\n        }\r\n        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 2000, 5, currentLocationListener);\r\n    }\r\n\r\n    protected void alertbox()\r\n    {\r\n        if (ContextCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED &amp;&amp; ActivityCompat.checkSelfPermission(this, Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED)\r\n        {\r\n            ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.ACCESS_FINE_LOCATION, Manifest.permission.ACCESS_COARSE_LOCATION}, 1);\r\n        }\r\n    }\r\n\r\n    public void updateLocation() {\r\n        Location location = null;\r\n        double[] coords = new double[2];\r\n\r\n        if (ActivityCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED &amp;&amp; ActivityCompat.checkSelfPermission(this, Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\r\n            Toast.makeText(this, &quot;Permission to gps not granted. Grant permissions and try again or restart the application.&quot;, Toast.LENGTH_LONG).show();\r\n            alertbox();\r\n        }\r\n        else {\r\n            location = locationManager.getLastKnownLocation(Context.LOCATION_SERVICE);\r\n        }\r\n\r\n        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 5000, 5, currentLocationListener);\r\n\r\n        if (location == null)\r\n        {\r\n            location = currentLocationListener.getLocation();\r\n        }\r\n        else {\r\n            Toast.makeText(this, &quot;unknown location&quot;, Toast.LENGTH_LONG).show();\r\n        }\r\n\r\n    }\r\n\r\n    @SuppressLint(&quot;SetTextI18n&quot;)\r\n    protected void main()\r\n    {\r\n        double oldlat, newlat, oldlong, newlong;\r\n        double[] coords;\r\n        double odometer = 0, timeElapsed = 0, distanceTravelled, currentSpeed, avgSpeed;\r\n        double startTime, endTime;\r\n\r\n//        coords = updateLocation();\r\n//        oldlong = coords[0];\r\n//        oldlat = coords[1];\r\n\r\n\r\n\r\n//        while(true)\r\n//        {\r\n//            startTime = System.nanoTime();\r\n//            try\r\n//            {\r\n//                Thread.sleep(10000);\r\n//            } catch (InterruptedException e)\r\n//            {\r\n//                e.printStackTrace();\r\n//            }\r\n//\r\n//            coords = updateLocation();\r\n//\r\n//            newlong = coords[0];\r\n//            newlat = coords[1];\r\n//            System.out.println(newlat + &quot; &quot; + newlong);\r\n//\r\n//            distanceTravelled = earthDistance(oldlat, oldlong, newlat, newlong);\r\n//\r\n//            odometer += distanceTravelled;\r\n//\r\n//            endTime = System.nanoTime();\r\n//\r\n//            timeElapsed += (endTime - startTime);\r\n//            currentSpeed = (distanceTravelled)/((endTime-startTime)/1e9); // m/s to km/hr\r\n//            avgSpeed = (odometer/1000)/(timeElapsed/1e9);\r\n//\r\n////            System.out.println(&quot;odo: &quot; + odometer);\r\n////            System.out.println(&quot;currspeed: &quot; + currentSpeed);\r\n//            System.out.println(&quot;dist: &quot; + distanceTravelled);\r\n//\r\n//            textCurrentSpeed.setText(currentSpeed + &quot; m/s&quot;);\r\n//            textOdometer.setText((odometer) + &quot; m&quot;);\r\n//            textAvgSpeed.setText(avgSpeed + &quot; km/hr&quot;);\r\n//\r\n//            oldlat = newlat;\r\n//            oldlong = newlong;\r\n//        }\r\n    }\r\n\r\n\r\n    protected double earthDistance(double lat1, double lon1, double lon2, double lat2)\r\n    {\r\n\r\n        final double R = 6371e3; // Radius of the earth\r\n\r\n        double latDistance = Math.toRadians(lat2 - lat1);\r\n        double lonDistance = Math.toRadians(lon2 - lon1);\r\n        double a = Math.sin(latDistance / 2) * Math.sin(latDistance / 2)\r\n                + Math.cos(Math.toRadians(lat1)) * Math.cos(Math.toRadians(lat2))\r\n                * Math.sin(lonDistance / 2) * Math.sin(lonDistance / 2);\r\n        double c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\r\n\r\n        return R * c;\r\n    }\r\n\r\n    public void setTextFields(double distance)\r\n    {\r\n        System.out.println(distance);\r\n    }\r\n\r\n    public void buttonStart(View MainActivity)\r\n    {\r\n//        main();\r\n        updateLocation();\r\n    }\r\n}\r\n```\r\n\r\nCurrentLocationListener.java\r\n```\r\npackage com.example.speedometer;\r\n\r\nimport android.location.Location;\r\nimport android.location.LocationListener;\r\nimport android.os.Bundle;\r\nimport android.os.Message;\r\nimport android.widget.TextView;\r\nimport android.view.View;\r\nimport android.content.Context;\r\n\r\npublic class CurrentLocationListener implements LocationListener {\r\n    Location myLocation;\r\n    double templat = 404, templong = 404;\r\n    double odometer = 0, totalTime = 0, currentDist, currentSpeed, avgSpeed;\r\n    TextView textCurrentSpeed, textOdometer, textAvgSpeed;\r\n    MainActivity mainActivity;\r\n\r\n\r\n    public Location getLocation()\r\n    {\r\n        return myLocation;\r\n    }\r\n\r\n    @Override\r\n    public void onLocationChanged(Location location)\r\n    {\r\n//        textCurrentSpeed = mainActivity.findViewById(R.id.dispCurrentSpeed);\r\n//        textOdometer = mainActivity.findViewById(R.id.dispOdometer);\r\n//        textAvgSpeed = mainActivity.findViewById(R.id.dispAvgSpeed);\r\n        double startTime, endTime;\r\n        myLocation = location;\r\n        if (templat == 404 &amp;&amp; templong == 404)\r\n        {\r\n            templat = location.getLatitude();\r\n            templong = location.getLongitude();\r\n        }\r\n        else\r\n        {\r\n            currentDist = earthDistance(location.getLatitude(), location.getLongitude(), templong, templat);\r\n            templat = location.getLatitude();\r\n            templong = location.getLongitude();\r\n            System.out.println(&quot;dist: &quot; + currentDist);\r\n            odometer += currentDist;\r\n            totalTime += 10;\r\n            currentSpeed = currentDist/10;\r\n            avgSpeed = odometer/totalTime;\r\n\r\n            mainActivity.setTextFields(odometer);\r\n//            textCurrentSpeed.setText(currentSpeed + &quot; m/s&quot;);\r\n        }\r\n//        System.out.println(&quot;update&quot;);\r\n//        System.out.println(location.getLatitude() + &quot; &quot; + location.getLongitude());\r\n    }\r\n\r\n    @Override\r\n    public void onStatusChanged(String provider, int status, Bundle extras) {\r\n\r\n    }\r\n\r\n    @Override\r\n    public void onProviderEnabled(String provider) {\r\n\r\n    }\r\n\r\n    @Override\r\n    public void onProviderDisabled(String provider) {\r\n\r\n    }\r\n\r\n    protected double earthDistance(double lat1, double lon1, double lon2, double lat2)\r\n    {\r\n\r\n        final double R = 6371e3; // Radius of the earth\r\n\r\n        double latDistance = Math.toRadians(lat2 - lat1);\r\n        double lonDistance = Math.toRadians(lon2 - lon1);\r\n        double a = Math.sin(latDistance / 2) * Math.sin(latDistance / 2)\r\n                + Math.cos(Math.toRadians(lat1)) * Math.cos(Math.toRadians(lat2))\r\n                * Math.sin(lonDistance / 2) * Math.sin(lonDistance / 2);\r\n        double c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\r\n\r\n        return R * c;\r\n    }\r\n}\r\n```\r\nMy main objective is to update the TextView fields with the calculated values, like the Odometer reading. I know there is a lot of repeated code and comments, but I am honestly out of my depth and desperately need help. Let me know if any more information is needed. Thanks in advance.","title":"Need to get updated location/data from onLocationChanged","body":"<p><em>Just a warning: I'm really not proud of this code that I've written, but I just need it to work anyhow. Don't judge me too harshly.</em></p>\n<p>Hey everyone, I'm programming a speedometer android app, and I'm running into a basic issue. I need to calculate the distance between two GPS coordinates using the Android location service (I know the Fused Location Provider is superior but please bear with this).</p>\n<p>The location listener classes are in a Java file called CurrentLocationListener.java. So far, I've been able to get the two coordinates and get the distance between the updated coordinate and the old coordinate inside the above java file, but I need some way of passing it to the MainActivity.java file where I can update my UI with the said distance. The codes for the two java files are below:</p>\n<p>MainActivity.java</p>\n<pre><code>package com.example.speedometer;\n\nimport androidx.appcompat.app.AppCompatActivity;\nimport androidx.core.app.ActivityCompat;\nimport androidx.core.content.ContextCompat;\n\nimport android.Manifest;\nimport android.annotation.SuppressLint;\nimport android.content.Context;\nimport android.content.pm.PackageManager;\nimport android.location.Location;\nimport android.location.LocationManager;\nimport android.os.Bundle;\nimport android.view.View;\nimport android.widget.TextView;\nimport android.widget.Toast;\nimport java.lang.Thread;\n\npublic class MainActivity extends AppCompatActivity {\n\n    CurrentLocationListener currentLocationListener;\n    LocationManager locationManager;\n    TextView textCurrentSpeed, textOdometer, textAvgSpeed;\n//    MainActivity mainActivity;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n//        mainActivity = this;\n\n        currentLocationListener = new CurrentLocationListener();\n        textCurrentSpeed = findViewById(R.id.dispCurrentSpeed);\n        textOdometer = findViewById(R.id.dispOdometer);\n        textAvgSpeed = findViewById(R.id.dispAvgSpeed);\n\n        locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);\n\n        if (ActivityCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED &amp;&amp; ActivityCompat.checkSelfPermission(this, Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED)\n        {\n            Toast.makeText(this, &quot;Location permission not granted. Please grant permission.&quot;, Toast.LENGTH_LONG).show();\n            alertbox();\n        }\n        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 2000, 5, currentLocationListener);\n    }\n\n    protected void alertbox()\n    {\n        if (ContextCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED &amp;&amp; ActivityCompat.checkSelfPermission(this, Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED)\n        {\n            ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.ACCESS_FINE_LOCATION, Manifest.permission.ACCESS_COARSE_LOCATION}, 1);\n        }\n    }\n\n    public void updateLocation() {\n        Location location = null;\n        double[] coords = new double[2];\n\n        if (ActivityCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED &amp;&amp; ActivityCompat.checkSelfPermission(this, Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\n            Toast.makeText(this, &quot;Permission to gps not granted. Grant permissions and try again or restart the application.&quot;, Toast.LENGTH_LONG).show();\n            alertbox();\n        }\n        else {\n            location = locationManager.getLastKnownLocation(Context.LOCATION_SERVICE);\n        }\n\n        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 5000, 5, currentLocationListener);\n\n        if (location == null)\n        {\n            location = currentLocationListener.getLocation();\n        }\n        else {\n            Toast.makeText(this, &quot;unknown location&quot;, Toast.LENGTH_LONG).show();\n        }\n\n    }\n\n    @SuppressLint(&quot;SetTextI18n&quot;)\n    protected void main()\n    {\n        double oldlat, newlat, oldlong, newlong;\n        double[] coords;\n        double odometer = 0, timeElapsed = 0, distanceTravelled, currentSpeed, avgSpeed;\n        double startTime, endTime;\n\n//        coords = updateLocation();\n//        oldlong = coords[0];\n//        oldlat = coords[1];\n\n\n\n//        while(true)\n//        {\n//            startTime = System.nanoTime();\n//            try\n//            {\n//                Thread.sleep(10000);\n//            } catch (InterruptedException e)\n//            {\n//                e.printStackTrace();\n//            }\n//\n//            coords = updateLocation();\n//\n//            newlong = coords[0];\n//            newlat = coords[1];\n//            System.out.println(newlat + &quot; &quot; + newlong);\n//\n//            distanceTravelled = earthDistance(oldlat, oldlong, newlat, newlong);\n//\n//            odometer += distanceTravelled;\n//\n//            endTime = System.nanoTime();\n//\n//            timeElapsed += (endTime - startTime);\n//            currentSpeed = (distanceTravelled)/((endTime-startTime)/1e9); // m/s to km/hr\n//            avgSpeed = (odometer/1000)/(timeElapsed/1e9);\n//\n////            System.out.println(&quot;odo: &quot; + odometer);\n////            System.out.println(&quot;currspeed: &quot; + currentSpeed);\n//            System.out.println(&quot;dist: &quot; + distanceTravelled);\n//\n//            textCurrentSpeed.setText(currentSpeed + &quot; m/s&quot;);\n//            textOdometer.setText((odometer) + &quot; m&quot;);\n//            textAvgSpeed.setText(avgSpeed + &quot; km/hr&quot;);\n//\n//            oldlat = newlat;\n//            oldlong = newlong;\n//        }\n    }\n\n\n    protected double earthDistance(double lat1, double lon1, double lon2, double lat2)\n    {\n\n        final double R = 6371e3; // Radius of the earth\n\n        double latDistance = Math.toRadians(lat2 - lat1);\n        double lonDistance = Math.toRadians(lon2 - lon1);\n        double a = Math.sin(latDistance / 2) * Math.sin(latDistance / 2)\n                + Math.cos(Math.toRadians(lat1)) * Math.cos(Math.toRadians(lat2))\n                * Math.sin(lonDistance / 2) * Math.sin(lonDistance / 2);\n        double c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n\n        return R * c;\n    }\n\n    public void setTextFields(double distance)\n    {\n        System.out.println(distance);\n    }\n\n    public void buttonStart(View MainActivity)\n    {\n//        main();\n        updateLocation();\n    }\n}\n</code></pre>\n<p>CurrentLocationListener.java</p>\n<pre><code>package com.example.speedometer;\n\nimport android.location.Location;\nimport android.location.LocationListener;\nimport android.os.Bundle;\nimport android.os.Message;\nimport android.widget.TextView;\nimport android.view.View;\nimport android.content.Context;\n\npublic class CurrentLocationListener implements LocationListener {\n    Location myLocation;\n    double templat = 404, templong = 404;\n    double odometer = 0, totalTime = 0, currentDist, currentSpeed, avgSpeed;\n    TextView textCurrentSpeed, textOdometer, textAvgSpeed;\n    MainActivity mainActivity;\n\n\n    public Location getLocation()\n    {\n        return myLocation;\n    }\n\n    @Override\n    public void onLocationChanged(Location location)\n    {\n//        textCurrentSpeed = mainActivity.findViewById(R.id.dispCurrentSpeed);\n//        textOdometer = mainActivity.findViewById(R.id.dispOdometer);\n//        textAvgSpeed = mainActivity.findViewById(R.id.dispAvgSpeed);\n        double startTime, endTime;\n        myLocation = location;\n        if (templat == 404 &amp;&amp; templong == 404)\n        {\n            templat = location.getLatitude();\n            templong = location.getLongitude();\n        }\n        else\n        {\n            currentDist = earthDistance(location.getLatitude(), location.getLongitude(), templong, templat);\n            templat = location.getLatitude();\n            templong = location.getLongitude();\n            System.out.println(&quot;dist: &quot; + currentDist);\n            odometer += currentDist;\n            totalTime += 10;\n            currentSpeed = currentDist/10;\n            avgSpeed = odometer/totalTime;\n\n            mainActivity.setTextFields(odometer);\n//            textCurrentSpeed.setText(currentSpeed + &quot; m/s&quot;);\n        }\n//        System.out.println(&quot;update&quot;);\n//        System.out.println(location.getLatitude() + &quot; &quot; + location.getLongitude());\n    }\n\n    @Override\n    public void onStatusChanged(String provider, int status, Bundle extras) {\n\n    }\n\n    @Override\n    public void onProviderEnabled(String provider) {\n\n    }\n\n    @Override\n    public void onProviderDisabled(String provider) {\n\n    }\n\n    protected double earthDistance(double lat1, double lon1, double lon2, double lat2)\n    {\n\n        final double R = 6371e3; // Radius of the earth\n\n        double latDistance = Math.toRadians(lat2 - lat1);\n        double lonDistance = Math.toRadians(lon2 - lon1);\n        double a = Math.sin(latDistance / 2) * Math.sin(latDistance / 2)\n                + Math.cos(Math.toRadians(lat1)) * Math.cos(Math.toRadians(lat2))\n                * Math.sin(lonDistance / 2) * Math.sin(lonDistance / 2);\n        double c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n\n        return R * c;\n    }\n}\n</code></pre>\n<p>My main objective is to update the TextView fields with the calculated values, like the Odometer reading. I know there is a lot of repeated code and comments, but I am honestly out of my depth and desperately need help. Let me know if any more information is needed. Thanks in advance.</p>\n"},{"tags":["java","optaplanner"],"comments":[{"owner":{"account_id":16308206,"reputation":114,"user_id":11777638,"display_name":"kol"},"score":0,"creation_date":1663405343,"post_id":73753525,"comment_id":130235525,"body_markdown":"Oh, forgot to mention - I&#39;m using TABU search with nearby selection and the problem appears in FULL_ASSERT mode","body":"Oh, forgot to mention - I&#39;m using TABU search with nearby selection and the problem appears in FULL_ASSERT mode"}],"answers":[{"tags":[],"owner":{"account_id":216698,"reputation":26495,"user_id":472109,"accept_rate":85,"display_name":"Geoffrey De Smet"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663525763,"creation_date":1663525763,"answer_id":73765435,"question_id":73753525,"body_markdown":"Maybe the shadow start time of the **input** problem is incorrect, so already at the start of the solver. If that&#39;s true, check the stacktrace of the FULL_ASSERT error, it will contain phaseStarted().\r\n\r\nIf that&#39;s true, our error message could explain this better.","title":"OptaPlanner score corruption with custom shadow variable calculation based on chained variable","body":"<p>Maybe the shadow start time of the <strong>input</strong> problem is incorrect, so already at the start of the solver. If that's true, check the stacktrace of the FULL_ASSERT error, it will contain phaseStarted().</p>\n<p>If that's true, our error message could explain this better.</p>\n"},{"tags":[],"owner":{"account_id":216698,"reputation":26495,"user_id":472109,"accept_rate":85,"display_name":"Geoffrey De Smet"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663573757,"creation_date":1663572302,"answer_id":73769796,"question_id":73753525,"body_markdown":"Check your `sources` attribute of your `@CustomShadowVariable`.\r\n\r\nMaybe some of the genuine/shadow variables it depends on are missing in the @CustomShadowVariable&#39;s sources value.","title":"OptaPlanner score corruption with custom shadow variable calculation based on chained variable","body":"<p>Check your <code>sources</code> attribute of your <code>@CustomShadowVariable</code>.</p>\n<p>Maybe some of the genuine/shadow variables it depends on are missing in the @CustomShadowVariable's sources value.</p>\n"},{"tags":[],"owner":{"account_id":16308206,"reputation":114,"user_id":11777638,"display_name":"kol"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663613531,"creation_date":1663613531,"answer_id":73778058,"question_id":73753525,"body_markdown":"So, after a lot of experiments I figured out that the score corruption happens when a custom shadow variable gets changed without any change to corresponding genuine variable. \r\n\r\nIt looks like the OptaPlanner might call a shadow variable listener even if a genuine variable don&#39;t change and any change during this call would cause a failure. \r\n\r\nSo, I&#39;ve added some code to wrap this out:\r\n\r\n    @PlanningEntity\r\n    public class Allocation implements ScheduleSlot {\r\n        private ScheduleSlot previousSlot;\r\n        private ScheduleSlot _previousSlot;\r\n\r\n        @PlanningVariable(\r\n            graphType = PlanningVariableGraphType.CHAINED, \r\n            valueRangeProviderRefs = { &quot;inspector_range&quot;, &quot;task_range&quot; } )\r\n        public ScheduleSlot getPreviousSlot() {\r\n            return previousSlot;\r\n        }\r\n        public void setPreviousSlot(ScheduleSlot previousSlot) {\r\n            this._previousSlot = this.previousSlot;\r\n            this.previousSlot = previousSlot;\r\n        }\r\n        public boolean isPreviousSlotChanged() { \r\n            return _previousSlot != previousSlot; \r\n        };\r\n        public void clearPreviousSlotChange() {\r\n            _previousSlot = previousSlot;\r\n        };\r\n    }\r\n\r\n    public class SlotUpdateVariableListerer implements VariableListener&lt;ScheduleProblemSolution, ScheduleSlot&gt; {\r\n        ...\r\n        private void updateTask(ScoreDirector&lt;ScheduleProblemSolution&gt; scoreDirector, ScheduleSlot slot) {\r\n            if (slot.isPreviousSlotChanged() &amp;&amp; slot instanceof Allocation) {\r\n                final Long startTime = prevSlot != null ? prevSlot.getFinishTime() + prevSlot.timeToNext(this) : null;\r\n                scoreDirector.beforeVariableChanged(slot, &quot;shadowStartTime&quot;);\r\n                ((Allocation)slot).setShadowStartTime(startTime);\r\n                scoreDirector.afterVariableChanged(slot, &quot;shadowStartTime&quot;);\r\n                slot.clearPreviousSlotChange();\r\n             }\r\n        }\r\n    }\r\n\r\nAnd now it works. There&#39;s another problem, with UndoMove corruption, but this one is for another thread.\r\n\r\nBTW, I have created a [repo][1] with reproducible example and the fix, hope it&#39;ll be useful for anyone.\r\n\r\n\r\n  [1]: https://github.com/skolchin/optaplanner-score-creep","title":"OptaPlanner score corruption with custom shadow variable calculation based on chained variable","body":"<p>So, after a lot of experiments I figured out that the score corruption happens when a custom shadow variable gets changed without any change to corresponding genuine variable.</p>\n<p>It looks like the OptaPlanner might call a shadow variable listener even if a genuine variable don't change and any change during this call would cause a failure.</p>\n<p>So, I've added some code to wrap this out:</p>\n<pre><code>@PlanningEntity\npublic class Allocation implements ScheduleSlot {\n    private ScheduleSlot previousSlot;\n    private ScheduleSlot _previousSlot;\n\n    @PlanningVariable(\n        graphType = PlanningVariableGraphType.CHAINED, \n        valueRangeProviderRefs = { &quot;inspector_range&quot;, &quot;task_range&quot; } )\n    public ScheduleSlot getPreviousSlot() {\n        return previousSlot;\n    }\n    public void setPreviousSlot(ScheduleSlot previousSlot) {\n        this._previousSlot = this.previousSlot;\n        this.previousSlot = previousSlot;\n    }\n    public boolean isPreviousSlotChanged() { \n        return _previousSlot != previousSlot; \n    };\n    public void clearPreviousSlotChange() {\n        _previousSlot = previousSlot;\n    };\n}\n\npublic class SlotUpdateVariableListerer implements VariableListener&lt;ScheduleProblemSolution, ScheduleSlot&gt; {\n    ...\n    private void updateTask(ScoreDirector&lt;ScheduleProblemSolution&gt; scoreDirector, ScheduleSlot slot) {\n        if (slot.isPreviousSlotChanged() &amp;&amp; slot instanceof Allocation) {\n            final Long startTime = prevSlot != null ? prevSlot.getFinishTime() + prevSlot.timeToNext(this) : null;\n            scoreDirector.beforeVariableChanged(slot, &quot;shadowStartTime&quot;);\n            ((Allocation)slot).setShadowStartTime(startTime);\n            scoreDirector.afterVariableChanged(slot, &quot;shadowStartTime&quot;);\n            slot.clearPreviousSlotChange();\n         }\n    }\n}\n</code></pre>\n<p>And now it works. There's another problem, with UndoMove corruption, but this one is for another thread.</p>\n<p>BTW, I have created a <a href=\"https://github.com/skolchin/optaplanner-score-creep\" rel=\"nofollow noreferrer\">repo</a> with reproducible example and the fix, hope it'll be useful for anyone.</p>\n"},{"tags":[],"owner":{"account_id":216698,"reputation":26495,"user_id":472109,"accept_rate":85,"display_name":"Geoffrey De Smet"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663665215,"creation_date":1663665215,"answer_id":73784271,"question_id":73753525,"body_markdown":"That `slot.isPreviousSlotChanged()` check and `slot.clearPreviousSlotChange();` look fishy.\r\n\r\nAn allocation can have its inspector changed without having it&#39;s previous slot changed. It can even have it previous&#39;s previous slot changed without having its previous slot changed.\r\n\r\nConsider A2 in the following case:\r\n\r\n    A -&gt; A1 -&gt; A2 -&gt; A3\r\n    B -&gt; B1 -&gt; B2\r\n    changed to\r\n    A -&gt; A3\r\n    B -&gt; B1 -&gt; A1 -&gt; A2 -&gt; B2","title":"OptaPlanner score corruption with custom shadow variable calculation based on chained variable","body":"<p>That <code>slot.isPreviousSlotChanged()</code> check and <code>slot.clearPreviousSlotChange();</code> look fishy.</p>\n<p>An allocation can have its inspector changed without having it's previous slot changed. It can even have it previous's previous slot changed without having its previous slot changed.</p>\n<p>Consider A2 in the following case:</p>\n<pre><code>A -&gt; A1 -&gt; A2 -&gt; A3\nB -&gt; B1 -&gt; B2\nchanged to\nA -&gt; A3\nB -&gt; B1 -&gt; A1 -&gt; A2 -&gt; B2\n</code></pre>\n"}],"owner":{"account_id":16308206,"reputation":114,"user_id":11777638,"display_name":"kol"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":211,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":4,"score":1,"last_activity_date":1663665215,"creation_date":1663405155,"question_id":73753525,"body_markdown":"I&#39;m struggling with score corruption problem. \r\n\r\nMy case is based on timed customer vehicle routing example - I have a list of schedule allocations which are to start on particular metro stations and a list of employees (inspectors) who should visit them and do some work. The goal is allocate all tasks to these employees and to minimize transfers between the allocations.\r\n\r\nI have set up a chained variable `previousSlot`, and added a custom shadow variable `shadowStartTime` which is supposed to be calculated based on the previous assignment.\r\n\r\nHere is the planning entity:\r\n\r\n    @PlanningEntity\r\n    public class Allocation implements ScheduleSlot {\r\n        @AnchorShadowVariable(sourceVariableName = &quot;previousSlot&quot;)\r\n        private Inspector inspector;\r\n\r\n        @PlanningVariable(\r\n            graphType=PlanningVariableGraphType.CHAINED, \r\n            valueRangeProviderRefs={&quot;inspector_range&quot;, &quot;task_range&quot;} )\r\n        private ScheduleSlot previousSlot;\r\n\r\n        @CustomShadowVariable(variableListenerClass = SlotUpdateVariableListerer.class,\r\n            sources = { \r\n                @PlanningVariableReference(variableName = &quot;inspector&quot;),\r\n                @PlanningVariableReference(variableName = &quot;previousSlot&quot;) })\r\n        private Long shadowStartTime;\r\n\r\n        ...\r\n\r\nHere, `Inspector` is a planning fact which is also an anchor, and `ScheduleSlot` is interface common to inspectors and allocations.\r\n\r\nVariable listener is pretty simple too:\r\n\r\n    public class SlotUpdateVariableListerer implements VariableListener&lt;ScheduleProblemSolution, ScheduleSlot&gt; {\r\n        ...\r\n\r\n        @Override\r\n        public void afterEntityAdded(ScoreDirector&lt;ScheduleProblemSolution&gt; scoreDirector, ScheduleSlot slot) {\r\n            updateTask(scoreDirector, slot);\r\n        }\r\n\r\n        @Override\r\n        public void afterVariableChanged(ScoreDirector&lt;ScheduleProblemSolution&gt; scoreDirector, ScheduleSlot slot) {\r\n            updateTask(scoreDirector, slot);\r\n        }\r\n\r\n        private void updateTask(ScoreDirector&lt;ScheduleProblemSolution&gt; scoreDirector, ScheduleSlot slot) {\r\n            ScheduleSlot prevSlot = slot.getPreviousSlot();\r\n            final Long startTime = prevSlot != null ? prevSlot.getFinishTime() + prevSlot.timeToNext(slot) : null;\r\n\r\n            scoreDirector.beforeVariableChanged(slot, &quot;shadowStartTime&quot;);\r\n            ((Allocation)slot).setShadowStartTime(startTime);\r\n            scoreDirector.afterVariableChanged(slot, &quot;shadowStartTime&quot;);\r\n        }\r\n    }\r\n\r\nAnd this fails if number of allocations &gt; 2 right on the construction heuristics phase:\r\n\r\n&gt; Exception in thread &quot;main&quot; java.lang.IllegalStateException:\r\n&gt; VariableListener corruption after completedAction ([09:00:00,\r\n&gt; 09:31:44] Task 321652 ...):\r\n&gt;     The entity ([10:37:16, 11:14:24] Task 320522...)&#39;s shadow variable (Allocation.shadowStartTime)&#39;s corrupted value (1659940628000) changed\r\n&gt; to uncorrupted value (1659944236000) after all VariableListeners were\r\n&gt; triggered without changes to the genuine variables.\r\n\r\nWhat could be wrong here? \r\n\r\nUPD: Added a stack trace:\r\n\r\n    Exception in thread &quot;main&quot; java.lang.IllegalStateException: \r\n    VariableListener corruption after completedAction (...):\r\n    The entity (...)&#39;s shadow variable (Allocation.shadowStartTime)&#39;s corrupted value (...) changed to uncorrupted value (...) after all VariableListeners were triggered without changes to the genuine variables.\r\n      Maybe the VariableListener class (SlotUpdateVariableListerer) for that shadow variable (Allocation.shadowStartTime) forgot to update it when one of its sources changed.\r\n\r\n        at org.optaplanner.core.impl.score.director.AbstractScoreDirector.assertShadowVariablesAreNotStale(AbstractScoreDirector.java:520)\r\n        at org.optaplanner.core.impl.phase.scope.AbstractPhaseScope.assertShadowVariablesAreNotStale(AbstractPhaseScope.java:160)\r\n        at org.optaplanner.core.impl.phase.AbstractPhase.predictWorkingStepScore(AbstractPhase.java:147)\r\n        at org.optaplanner.core.impl.constructionheuristic.DefaultConstructionHeuristicPhase.doStep(DefaultConstructionHeuristicPhase.java:82)\r\n        at org.optaplanner.core.impl.constructionheuristic.DefaultConstructionHeuristicPhase.solve(DefaultConstructionHeuristicPhase.java:69)\r\n        at org.optaplanner.core.impl.solver.AbstractSolver.runPhases(AbstractSolver.java:83)\r\n        at org.optaplanner.core.impl.solver.DefaultSolver.solve(DefaultSolver.java:193)\r\n        at com.iconsoft.metro.opt.solver.ScheduleProblemSolution.solve(ScheduleProblemSolution.java:203)\r\n        at com.iconsoft.metro.opt.Main.main(Main.java:36)\r\n\r\nUPD-2: Looks like this happens after anchor&#39;s entity reallocation:\r\n\r\n    23:56:43.328 DEBUG     CH step (0), time spent (226), score (-59init/-5hard/0soft), selected move count (6), picked move (Task 320522: (uninitialized) {null -&gt; Inspector #0}).\r\n    23:56:43.362 DEBUG     CH step (1), time spent (260), score (-58init/-4hard/0soft), selected move count (7), picked move (Task 320527: (uninitialized) {null -&gt; Inspector #1}).\r\n    23:56:43.396 DEBUG     CH step (2), time spent (294), score (-57init/-3hard/0soft), selected move count (8), picked move (Task 321652: (uninitialized) {null -&gt; Inspector #2}).\r\n    ...\r\n    23:56:43.743 DEBUG     CH step (8), time spent (641), score (-51init/-10hard/0soft), selected move count (14), picked move (Task 326806: (uninitialized) {null -&gt; Inspector #0})\r\n    Exception in thread &quot;main&quot; java.lang.IllegalStateException: VariableListener corruption after completedAction()...\r\n\r\nBut I&#39;m still unclear what does it mean...","title":"OptaPlanner score corruption with custom shadow variable calculation based on chained variable","body":"<p>I'm struggling with score corruption problem.</p>\n<p>My case is based on timed customer vehicle routing example - I have a list of schedule allocations which are to start on particular metro stations and a list of employees (inspectors) who should visit them and do some work. The goal is allocate all tasks to these employees and to minimize transfers between the allocations.</p>\n<p>I have set up a chained variable <code>previousSlot</code>, and added a custom shadow variable <code>shadowStartTime</code> which is supposed to be calculated based on the previous assignment.</p>\n<p>Here is the planning entity:</p>\n<pre><code>@PlanningEntity\npublic class Allocation implements ScheduleSlot {\n    @AnchorShadowVariable(sourceVariableName = &quot;previousSlot&quot;)\n    private Inspector inspector;\n\n    @PlanningVariable(\n        graphType=PlanningVariableGraphType.CHAINED, \n        valueRangeProviderRefs={&quot;inspector_range&quot;, &quot;task_range&quot;} )\n    private ScheduleSlot previousSlot;\n\n    @CustomShadowVariable(variableListenerClass = SlotUpdateVariableListerer.class,\n        sources = { \n            @PlanningVariableReference(variableName = &quot;inspector&quot;),\n            @PlanningVariableReference(variableName = &quot;previousSlot&quot;) })\n    private Long shadowStartTime;\n\n    ...\n</code></pre>\n<p>Here, <code>Inspector</code> is a planning fact which is also an anchor, and <code>ScheduleSlot</code> is interface common to inspectors and allocations.</p>\n<p>Variable listener is pretty simple too:</p>\n<pre><code>public class SlotUpdateVariableListerer implements VariableListener&lt;ScheduleProblemSolution, ScheduleSlot&gt; {\n    ...\n\n    @Override\n    public void afterEntityAdded(ScoreDirector&lt;ScheduleProblemSolution&gt; scoreDirector, ScheduleSlot slot) {\n        updateTask(scoreDirector, slot);\n    }\n\n    @Override\n    public void afterVariableChanged(ScoreDirector&lt;ScheduleProblemSolution&gt; scoreDirector, ScheduleSlot slot) {\n        updateTask(scoreDirector, slot);\n    }\n\n    private void updateTask(ScoreDirector&lt;ScheduleProblemSolution&gt; scoreDirector, ScheduleSlot slot) {\n        ScheduleSlot prevSlot = slot.getPreviousSlot();\n        final Long startTime = prevSlot != null ? prevSlot.getFinishTime() + prevSlot.timeToNext(slot) : null;\n\n        scoreDirector.beforeVariableChanged(slot, &quot;shadowStartTime&quot;);\n        ((Allocation)slot).setShadowStartTime(startTime);\n        scoreDirector.afterVariableChanged(slot, &quot;shadowStartTime&quot;);\n    }\n}\n</code></pre>\n<p>And this fails if number of allocations &gt; 2 right on the construction heuristics phase:</p>\n<blockquote>\n<p>Exception in thread &quot;main&quot; java.lang.IllegalStateException:\nVariableListener corruption after completedAction ([09:00:00,\n09:31:44] Task 321652 ...):\nThe entity ([10:37:16, 11:14:24] Task 320522...)'s shadow variable (Allocation.shadowStartTime)'s corrupted value (1659940628000) changed\nto uncorrupted value (1659944236000) after all VariableListeners were\ntriggered without changes to the genuine variables.</p>\n</blockquote>\n<p>What could be wrong here?</p>\n<p>UPD: Added a stack trace:</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.IllegalStateException: \nVariableListener corruption after completedAction (...):\nThe entity (...)'s shadow variable (Allocation.shadowStartTime)'s corrupted value (...) changed to uncorrupted value (...) after all VariableListeners were triggered without changes to the genuine variables.\n  Maybe the VariableListener class (SlotUpdateVariableListerer) for that shadow variable (Allocation.shadowStartTime) forgot to update it when one of its sources changed.\n\n    at org.optaplanner.core.impl.score.director.AbstractScoreDirector.assertShadowVariablesAreNotStale(AbstractScoreDirector.java:520)\n    at org.optaplanner.core.impl.phase.scope.AbstractPhaseScope.assertShadowVariablesAreNotStale(AbstractPhaseScope.java:160)\n    at org.optaplanner.core.impl.phase.AbstractPhase.predictWorkingStepScore(AbstractPhase.java:147)\n    at org.optaplanner.core.impl.constructionheuristic.DefaultConstructionHeuristicPhase.doStep(DefaultConstructionHeuristicPhase.java:82)\n    at org.optaplanner.core.impl.constructionheuristic.DefaultConstructionHeuristicPhase.solve(DefaultConstructionHeuristicPhase.java:69)\n    at org.optaplanner.core.impl.solver.AbstractSolver.runPhases(AbstractSolver.java:83)\n    at org.optaplanner.core.impl.solver.DefaultSolver.solve(DefaultSolver.java:193)\n    at com.iconsoft.metro.opt.solver.ScheduleProblemSolution.solve(ScheduleProblemSolution.java:203)\n    at com.iconsoft.metro.opt.Main.main(Main.java:36)\n</code></pre>\n<p>UPD-2: Looks like this happens after anchor's entity reallocation:</p>\n<pre><code>23:56:43.328 DEBUG     CH step (0), time spent (226), score (-59init/-5hard/0soft), selected move count (6), picked move (Task 320522: (uninitialized) {null -&gt; Inspector #0}).\n23:56:43.362 DEBUG     CH step (1), time spent (260), score (-58init/-4hard/0soft), selected move count (7), picked move (Task 320527: (uninitialized) {null -&gt; Inspector #1}).\n23:56:43.396 DEBUG     CH step (2), time spent (294), score (-57init/-3hard/0soft), selected move count (8), picked move (Task 321652: (uninitialized) {null -&gt; Inspector #2}).\n...\n23:56:43.743 DEBUG     CH step (8), time spent (641), score (-51init/-10hard/0soft), selected move count (14), picked move (Task 326806: (uninitialized) {null -&gt; Inspector #0})\nException in thread &quot;main&quot; java.lang.IllegalStateException: VariableListener corruption after completedAction()...\n</code></pre>\n<p>But I'm still unclear what does it mean...</p>\n"},{"tags":["java","aws-sdk","s3transfermanager"],"answers":[{"tags":[],"owner":{"account_id":13499757,"reputation":39,"user_id":9739451,"display_name":"Hai Mai"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663665191,"creation_date":1663665191,"answer_id":73784261,"question_id":73784171,"body_markdown":"Did you try the official document from AWS here?\r\n\r\nhttps://aws.amazon.com/blogs/developer/using-transfer-manager-to-copy-amazon-s3-objects/\r\n","title":"How to do copy object using s3-transfer-manager?","body":"<p>Did you try the official document from AWS here?</p>\n<p><a href=\"https://aws.amazon.com/blogs/developer/using-transfer-manager-to-copy-amazon-s3-objects/\" rel=\"nofollow noreferrer\">https://aws.amazon.com/blogs/developer/using-transfer-manager-to-copy-amazon-s3-objects/</a></p>\n"}],"owner":{"account_id":5877098,"reputation":427,"user_id":4627631,"accept_rate":35,"display_name":"santosh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":405,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1663665191,"creation_date":1663664733,"question_id":73784171,"body_markdown":"I am working on java project where I  am using s3 services so I am using aws-sdk version 2.17 and transfer manager 2.17 to perform operation like copy, upload, download.\r\nMy issue is that I want to show progress of copy process so I  am using copy api of transfer manager but it was not working .\r\nHere are code snippet.\r\n\r\n      public static void test(){\r\n        try {\r\n            String sAccessKey=&quot;XXXXX&quot;;\r\n            String sSecretKey=&quot;XXXXXX&quot;;\r\n            AwsBasicCredentials awsCreds = AwsBasicCredentials.create(\r\n                    sAccessKey,\r\n                    sSecretKey);\r\n            AwsCredentialsProvider awsCredentialsProvider =  StaticCredentialsProvider.create(awsCreds);\r\n            S3TransferManager s3TransferManager = S3TransferManager\r\n                    .builder()\r\n                    .s3ClientConfiguration(S3ClientConfiguration.builder()\r\n                            .region(Region.EU_WEST_1)\r\n                            .credentialsProvider(awsCredentialsProvider).build())\r\n                    .build();\r\n          \r\n            Copy copy = s3TransferManager.copy(c -&gt; c\r\n                            .copyObjectRequest(r -&gt; r\r\n                                    .sourceBucket(&quot;source_bucket&quot;)\r\n                                    .sourceKey(&quot;test.json&quot;)\r\n                                    .destinationBucket(&quot;destination_bucket&quot;)\r\n                                    .destinationKey(&quot;test.json&quot;))\r\n                     .overrideConfiguration(o -&gt; o.addListener( LoggingTransferListener.create()))\r\n            );\r\n            CompletedCopy completedCopy = copy.completionFuture().join();\r\n            System.out.println(copy.progress().snapshot().transferSizeInBytes());\r\n            System.out.println(copy.progress().snapshot().bytesTransferred());\r\n\r\n        } catch (S3Exception e) {\r\n            throw e;\r\n        }\r\n    }\r\n\r\nWhen I executes above mention code then I am getting error is:-\r\n\r\n    software.amazon.awssdk.services.s3.model.S3Exception: null (Service: S3, Status Code: 301, Request ID: 6Y67D05YMB2VPCTZ, Extended Request ID: djU25dflTcZ0NExxqZQDXQ9SSwcQaMvvMAGrcfRDbDhvzgaws3twq1arytQ/Qd14kXNDpWYdbgA=)\r\n\r\nPlease suggest.","title":"How to do copy object using s3-transfer-manager?","body":"<p>I am working on java project where I  am using s3 services so I am using aws-sdk version 2.17 and transfer manager 2.17 to perform operation like copy, upload, download.\nMy issue is that I want to show progress of copy process so I  am using copy api of transfer manager but it was not working .\nHere are code snippet.</p>\n<pre><code>  public static void test(){\n    try {\n        String sAccessKey=&quot;XXXXX&quot;;\n        String sSecretKey=&quot;XXXXXX&quot;;\n        AwsBasicCredentials awsCreds = AwsBasicCredentials.create(\n                sAccessKey,\n                sSecretKey);\n        AwsCredentialsProvider awsCredentialsProvider =  StaticCredentialsProvider.create(awsCreds);\n        S3TransferManager s3TransferManager = S3TransferManager\n                .builder()\n                .s3ClientConfiguration(S3ClientConfiguration.builder()\n                        .region(Region.EU_WEST_1)\n                        .credentialsProvider(awsCredentialsProvider).build())\n                .build();\n      \n        Copy copy = s3TransferManager.copy(c -&gt; c\n                        .copyObjectRequest(r -&gt; r\n                                .sourceBucket(&quot;source_bucket&quot;)\n                                .sourceKey(&quot;test.json&quot;)\n                                .destinationBucket(&quot;destination_bucket&quot;)\n                                .destinationKey(&quot;test.json&quot;))\n                 .overrideConfiguration(o -&gt; o.addListener( LoggingTransferListener.create()))\n        );\n        CompletedCopy completedCopy = copy.completionFuture().join();\n        System.out.println(copy.progress().snapshot().transferSizeInBytes());\n        System.out.println(copy.progress().snapshot().bytesTransferred());\n\n    } catch (S3Exception e) {\n        throw e;\n    }\n}\n</code></pre>\n<p>When I executes above mention code then I am getting error is:-</p>\n<pre><code>software.amazon.awssdk.services.s3.model.S3Exception: null (Service: S3, Status Code: 301, Request ID: 6Y67D05YMB2VPCTZ, Extended Request ID: djU25dflTcZ0NExxqZQDXQ9SSwcQaMvvMAGrcfRDbDhvzgaws3twq1arytQ/Qd14kXNDpWYdbgA=)\n</code></pre>\n<p>Please suggest.</p>\n"},{"tags":["java","android","bluetooth","android-broadcast"],"comments":[{"owner":{"account_id":955055,"reputation":3960,"user_id":980521,"display_name":"ecle"},"score":0,"creation_date":1663652834,"post_id":73591458,"comment_id":130283954,"body_markdown":"My company makes a Bluetooth serial dongle that connects to a personal role radio that can be controlled by Android devices via its serial interface. The Android device can track state changes between the Bluetooth dongle and itself by connecting to it, but not between the dongle and the radio. The Android code must include a remote protocol to communicate with the radio in order to detect radio connection state in a request-response approach. If the Android app does not receive a radio response, it means the radio connection is not successful (so the remote icon can be disabled).","body":"My company makes a Bluetooth serial dongle that connects to a personal role radio that can be controlled by Android devices via its serial interface. The Android device can track state changes between the Bluetooth dongle and itself by connecting to it, but not between the dongle and the radio. The Android code must include a remote protocol to communicate with the radio in order to detect radio connection state in a request-response approach. If the Android app does not receive a radio response, it means the radio connection is not successful (so the remote icon can be disabled)."},{"owner":{"account_id":955055,"reputation":3960,"user_id":980521,"display_name":"ecle"},"score":0,"creation_date":1663653290,"post_id":73591458,"comment_id":130284053,"body_markdown":"As a result, Google must provide an API to communicate with the Wear OS device in order to detect a successful connection. It seems it has the API...refer https://stackoverflow.com/questions/24877170/how-to-detect-if-android-device-is-paired-with-android-wear-watch","body":"As a result, Google must provide an API to communicate with the Wear OS device in order to detect a successful connection. It seems it has the API...refer <a href=\"https://stackoverflow.com/questions/24877170/how-to-detect-if-android-device-is-paired-with-android-wear-watch\" title=\"how to detect if android device is paired with android wear watch\">stackoverflow.com/questions/24877170/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":15069208,"reputation":329,"user_id":10875322,"display_name":"Gokula Krishnan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663664995,"creation_date":1663664995,"answer_id":73784218,"question_id":73591458,"body_markdown":"TL;DR : There is no direct way to find out the connected devices for non-system apps. But there is a hack to figure out the connected devices, with less guarantee. \r\n\r\nSystem apps such as Android settings use `BluetoothDevice.isConnected()` API to get the current connection status of paired/bonded devices. This system API can&#39;t be used by non-system apps.\r\n\r\nHere is how a non-system app can figure out connected device:\r\n\r\n0. Make sure all required [bluetooth permission][1] are mentioned in manifest and granted.\r\n 1. Get list of paired/bonded devices by calling `BluetoothAdapter.getBondedDevices()` \r\n2. Now we will try to establish socket connection to each device via [RFCOMM socket][2] . \r\n3. If the API throws any error, then most probably the devices aren&#39;t connected, or can&#39;t connect. \r\n4. Now if the socket connection is established then there is a chance the devices are connected. To verify if device is connected by calling [isConnected()][3] on the socket connection.\r\n\r\nThis way you can identify all the connected devices. Now this is a resource intensive task. I would recommend to do it once at the beginning. Post that until your app is active listen to [ACTION_ACL_CONNECTED][4] and [ACTION_ACL_DISCONNECTED][5] broadcasts. \r\n\r\n\r\n  [1]: https://developer.android.com/guide/topics/connectivity/bluetooth/permissions\r\n  [2]: https://developer.android.com/reference/android/bluetooth/BluetoothDevice#createRfcommSocketToServiceRecord(java.util.UUID)\r\n  [3]: https://developer.android.com/reference/android/bluetooth/BluetoothSocket#isConnected()\r\n  [4]: https://developer.android.com/reference/android/bluetooth/BluetoothDevice#ACTION_ACL_CONNECTED\r\n  [5]: https://developer.android.com/reference/android/bluetooth/BluetoothDevice#ACTION_ACL_DISCONNECTED","title":"Is there way to know Bluetooth connection status to a device during app startup in android?","body":"<p>TL;DR : There is no direct way to find out the connected devices for non-system apps. But there is a hack to figure out the connected devices, with less guarantee.</p>\n<p>System apps such as Android settings use <code>BluetoothDevice.isConnected()</code> API to get the current connection status of paired/bonded devices. This system API can't be used by non-system apps.</p>\n<p>Here is how a non-system app can figure out connected device:</p>\n<ol start=\"0\">\n<li>Make sure all required <a href=\"https://developer.android.com/guide/topics/connectivity/bluetooth/permissions\" rel=\"nofollow noreferrer\">bluetooth permission</a> are mentioned in manifest and granted.</li>\n<li>Get list of paired/bonded devices by calling <code>BluetoothAdapter.getBondedDevices()</code></li>\n<li>Now we will try to establish socket connection to each device via <a href=\"https://developer.android.com/reference/android/bluetooth/BluetoothDevice#createRfcommSocketToServiceRecord(java.util.UUID)\" rel=\"nofollow noreferrer\">RFCOMM socket</a> .</li>\n<li>If the API throws any error, then most probably the devices aren't connected, or can't connect.</li>\n<li>Now if the socket connection is established then there is a chance the devices are connected. To verify if device is connected by calling <a href=\"https://developer.android.com/reference/android/bluetooth/BluetoothSocket#isConnected()\" rel=\"nofollow noreferrer\">isConnected()</a> on the socket connection.</li>\n</ol>\n<p>This way you can identify all the connected devices. Now this is a resource intensive task. I would recommend to do it once at the beginning. Post that until your app is active listen to <a href=\"https://developer.android.com/reference/android/bluetooth/BluetoothDevice#ACTION_ACL_CONNECTED\" rel=\"nofollow noreferrer\">ACTION_ACL_CONNECTED</a> and <a href=\"https://developer.android.com/reference/android/bluetooth/BluetoothDevice#ACTION_ACL_DISCONNECTED\" rel=\"nofollow noreferrer\">ACTION_ACL_DISCONNECTED</a> broadcasts.</p>\n"}],"owner":{"account_id":11397914,"reputation":1,"user_id":8355672,"display_name":"Aditya Chaubey"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":314,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1663664995,"creation_date":1662200615,"question_id":73591458,"body_markdown":"I have a use case where I want to know whether my Bluetooth is connected to any other device during my app startup time. Like I know we have a broadcast receiver to listen to connectivity status changes but specifically, I want to know at the app starting time whether it is connected to any other device or not.\r\nMore specifically I have a wearOS watch and I&#39;m running the app overwatch so I want to check whether it&#39;s connected to the phone or not","title":"Is there way to know Bluetooth connection status to a device during app startup in android?","body":"<p>I have a use case where I want to know whether my Bluetooth is connected to any other device during my app startup time. Like I know we have a broadcast receiver to listen to connectivity status changes but specifically, I want to know at the app starting time whether it is connected to any other device or not.\nMore specifically I have a wearOS watch and I'm running the app overwatch so I want to check whether it's connected to the phone or not</p>\n"},{"tags":["java","spring","spring-boot","method-reference"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1589870036,"post_id":61882671,"comment_id":109456186,"body_markdown":"Why not just write a Java config class instead of XML?","body":"Why not just write a Java config class instead of XML?"},{"owner":{"account_id":4105919,"reputation":1011,"user_id":3369952,"accept_rate":100,"display_name":"Julius Delfino"},"score":0,"creation_date":1589870658,"post_id":61882671,"comment_id":109456421,"body_markdown":"Because XML is easily configurable in production.","body":"Because XML is easily configurable in production."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1589870772,"post_id":61882671,"comment_id":109456455,"body_markdown":"So is java... If you configure XML in production you are basicaly running untested code. That being said you might be able to workaround this using SpEL but that means you are programming in XML (which you shouldn&#39;t be doing generally speaking).","body":"So is java... If you configure XML in production you are basicaly running untested code. That being said you might be able to workaround this using SpEL but that means you are programming in XML (which you shouldn&#39;t be doing generally speaking)."},{"owner":{"account_id":4105919,"reputation":1011,"user_id":3369952,"accept_rate":100,"display_name":"Julius Delfino"},"score":0,"creation_date":1589870919,"post_id":61882671,"comment_id":109456504,"body_markdown":"We can discuss that in another topic. In case you didn&#39;t notice, I mentioned that I&#39;m already using a Java config class. I&#39;m curious to know if this can be moved to XML.","body":"We can discuss that in another topic. In case you didn&#39;t notice, I mentioned that I&#39;m already using a Java config class. I&#39;m curious to know if this can be moved to XML."}],"answers":[{"tags":[],"owner":{"account_id":4105919,"reputation":1011,"user_id":3369952,"accept_rate":100,"display_name":"Julius Delfino"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1663664972,"creation_date":1592236811,"answer_id":62392195,"question_id":61882671,"body_markdown":"Short answer is YES, but I needed a method-reference factory class to help me generate those beans. It&#39;s definitely too verbose, but it works. I ended up with something like so: \r\n\r\n    &lt;bean id=&quot;methodFactory&quot; class=&quot;com.foo.bar.util.MethodRefFactory&quot; /&gt;    \r\n    &lt;util:map id=&quot;someParser&quot; key-type=&quot;java.lang.Class&quot;&gt;\r\n        &lt;entry key=&quot;java.lang.Integer&quot; value-ref=&quot;parseInteger&quot; /&gt;\r\n        &lt;entry key=&quot;java.lang.Double&quot; value-ref=&quot;parseDouble&quot; /&gt;\r\n    &lt;/util:map&gt;\r\n    &lt;bean id=&quot;parseInteger&quot; factory-bean=&quot;methodFactory&quot; factory-method=&quot;getMethodRef&quot;&gt;\r\n        &lt;constructor-arg value=&quot;java.lang.Integer::parseInt&quot; /&gt;\r\n        &lt;constructor-arg value=&quot;java.util.function.Function&quot; type=&quot;java.lang.Class&quot; /&gt;\r\n        &lt;constructor-arg&gt;&lt;null /&gt;&lt;/constructor-arg&gt;\r\n    &lt;/bean&gt;\r\n    &lt;bean id=&quot;parseDouble&quot; factory-bean=&quot;methodFactory&quot; factory-method=&quot;getMethodRef&quot;&gt;\r\n        &lt;constructor-arg value=&quot;java.lang.Double::parseDouble&quot; /&gt;\r\n        &lt;constructor-arg value=&quot;java.util.function.Function&quot; type=&quot;java.lang.Class&quot; /&gt;\r\n        &lt;constructor-arg&gt;&lt;null /&gt;&lt;/constructor-arg&gt;\r\n    &lt;/bean&gt;\r\n\r\n\r\nThe factory class should just take in the method-reference syntax `&lt;class|instance&gt;::&lt;method&gt;` as a String, split it and return the method-reference as a Function. But I wanted a generic factory class that can handle both static and non-static method references (eg. `java.class.Integer::parseInt` and `fileValidator::validate`), so here&#39;s the factory class that I came up with. I hope you find this class useful as well:\r\n\r\n    public class MethodRefFactory {\r\n    \r\n        private ApplicationContext context;\r\n    \r\n        public MethodRefFactory(ApplicationContext context) {\r\n            this.context = context;\r\n        }\r\n    \r\n        /** Use this method to create non-static method references like fileValidator::validate */\r\n        public &lt;T&gt; T getMethodSpring(String signature, Class&lt;T&gt; lambdaFuncType) throws Throwable {\r\n            String[] sigTokens = signature.split(&quot;::&quot;);\r\n            String sigClass = sigTokens[0];\r\n            Object objToInvoke = null;\r\n            try {\r\n                objToInvoke = context.getBean(sigClass);\r\n            } catch(BeansException ex) {\r\n                ex.printStackTrace();\r\n            }\r\n            return getMethodRef(signature, lambdaFuncType, objToInvoke);\r\n        }\r\n    \r\n        /** Use this method to create static method references like java.lang.Integer::parseInt */\r\n        public &lt;T&gt; T getMethodRef(String signature, Class&lt;T&gt; lambdaFuncType, Object objToInvoke) throws Throwable {\r\n            String[] sigTokens = signature.split(&quot;::&quot;);\r\n            String sigClass = sigTokens[0];\r\n            String sigMethod = sigTokens[1];\r\n            boolean isStaticMethod = Objects.isNull(objToInvoke);\r\n            Class realType = isStaticMethod ? Class.forName(sigClass) : objToInvoke.getClass();\r\n            Method realMethod = getRealMethod(realType, sigMethod);\r\n    \r\n            MethodHandles.Lookup caller = MethodHandles.lookup();\r\n            MethodHandle realMethodHandle = caller.unreflect(realMethod);\r\n            MethodType realMethodHandleType = realMethodHandle.type();\r\n            MethodType lambdaFuncMethodType = isStaticMethod ? realMethodHandleType.generic() :\r\n                    generateLambdaFuncMethodType(lambdaFuncType);\r\n            MethodType targetMethodType = isStaticMethod ? realMethodHandleType :\r\n                    extractMatchingMethodTypeForRealMethod(realMethodHandleType);\r\n            String lambdaFuncMethodName = lambdaFuncType.getMethods()[0].getName();\r\n            MethodType lambdaFuncAndRealType = isStaticMethod ? MethodType.methodType(lambdaFuncType) :\r\n                    MethodType.methodType(lambdaFuncType, realType);\r\n            CallSite site = LambdaMetafactory.metafactory(caller, lambdaFuncMethodName, lambdaFuncAndRealType,\r\n                    lambdaFuncMethodType, realMethodHandle, targetMethodType);\r\n            MethodHandle factory = site.getTarget();\r\n            if (!isStaticMethod) {\r\n                factory = factory.bindTo(objToInvoke);\r\n            }\r\n            return (T) factory.invoke();\r\n        }\r\n    \r\n        private Method getRealMethod(Class type, String methodName) {\r\n            return Arrays.stream(type.getMethods()).filter(m -&gt; m.getName().equals(methodName))\r\n                    .sorted(this::compareMethods).findFirst().get();\r\n        }\r\n    \r\n        private MethodType extractMatchingMethodTypeForRealMethod(MethodType target) {\r\n            return MethodType.methodType(target.returnType(), Arrays.copyOfRange(target.parameterArray(),1, target.parameterCount()));\r\n        }\r\n    \r\n        private &lt;T&gt; MethodType generateLambdaFuncMethodType(Class&lt;T&gt; funcType) {\r\n            Method method = funcType.getMethods()[0];\r\n            if (method.getParameterCount() == 0) {\r\n                return MethodType.methodType(Object.class);\r\n            }\r\n            Class[] params = Arrays.copyOfRange(method.getParameterTypes(), 1, method.getParameterCount());\r\n            return MethodType.methodType(method.getReturnType(), method.getParameterTypes()[0], params);\r\n        }\r\n    \r\n        private int compareMethods(Method m1, Method m2) {\r\n            return m1.getName().equals(m2.getName()) ? Integer.compare(m1.getParameterCount(), m2.getParameterCount()) :\r\n                    m1.getName().compareTo(m2.getName());\r\n        }\r\n    }\r\n\r\nHere&#39;s SimpleBean class and MyInterface interface:\r\n\r\n    interface MyInterface&lt;R&gt; {\r\n    \r\n        R process(Object in);\r\n    }\r\n    \r\n    class SimpleBean {\r\n    \r\n        public String simpleFunction(String in) {\r\n            return &quot;java.util.function.Function test: &quot; + in;\r\n        }\r\n    \r\n        public String simpleBiFunction(Double in, Integer y) {\r\n            return &quot;java.util.function.BiFunction test: &quot; + (in + y);\r\n        }\r\n    \r\n        public String simpleIntFunction(Integer y) {\r\n            return &quot;java.util.function.IntFunction test: &quot; + y;\r\n        }\r\n    \r\n        public String simpleSupplier() {\r\n            return &quot;java.util.function.Supplier test &quot;;\r\n        }\r\n    \r\n        public void simpleConsumer(String param) {\r\n            System.out.println(&quot;java.util.function.Consumer test: &quot; + param);\r\n        }\r\n    }\r\n\r\nHere are my test cases. These demonstrate that the factory class supports `Function`, `BiFunction`, `IntFunction`, `Supplier`, `Consumer`, even a custom functional interface:\r\n    \r\n    public static void main(String[] args) throws Throwable {\r\n\r\n        MethodRefFactory factory = new MethodRefFactory(null);\r\n        Function f = factory.getMethodRef(&quot;java.lang.Short::parseShort&quot;, Function.class, null);\r\n        System.out.println(f.apply(&quot;2343&quot;));\r\n\r\n        SimpleBean bean = new SimpleBean();\r\n\r\n        Function f2 = factory.getMethodRef(&quot;com.foo.bar.util.SimpleBean::simpleFunction&quot;, Function.class, bean);\r\n        System.out.println(f2.apply(&quot;foo&quot;));\r\n\r\n        BiFunction f3 = factory.getMethodRef(&quot;com.foo.bar.util.SimpleBean::simpleBiFunction&quot;, BiFunction.class, bean);\r\n        System.out.println(f3.apply(25.0, 4));\r\n\r\n        Supplier f4 = factory.getMethodRef(&quot;com.foo.bar.util.SimpleBean::simpleSupplier&quot;, Supplier.class, bean);\r\n        System.out.println(f4.get());\r\n\r\n        Consumer f5 = factory.getMethodRef(&quot;com.foo.bar.util.SimpleBean::simpleConsumer&quot;, Consumer.class, bean);\r\n        f5.accept(&quot;bar&quot;);\r\n\r\n        IntFunction f6 = factory.getMethodRef(&quot;com.foo.bar.util.SimpleBean::simpleIntFunction&quot;, IntFunction.class, bean);\r\n        System.out.println(f6.apply(1234));\r\n\r\n        MyInterface f7 = factory.getMethodRef(&quot;com.foo.bar.util.SimpleBean::simpleFunction&quot;, MyInterface.class, bean);\r\n        System.out.println(f7.process(&quot;myInterface param&quot;));\r\n    }\r\n\r\nAnd here&#39;s one last sample XML for non-static method references:\r\n\r\n\r\n    &lt;util:map id=&quot;executorMap&quot; key-type=&quot;java.lang.Class&quot;&gt;\r\n        &lt;entry key=&quot;com.foo.bar.action.Read&quot; value-ref=&quot;readerReadMsg&quot; /&gt;\r\n        &lt;entry key=&quot;com.foo.bar.action.Validate&quot; value-ref=&quot;validatorValidateMsg&quot; /&gt;\r\n        &lt;entry key=&quot;com.foo.bar.action.Transform&quot; value-ref=&quot;transformerTransformMsg&quot; /&gt;\r\n        &lt;entry key=&quot;com.foo.bar.action.Persist&quot; value-ref=&quot;persisterPersistMsg&quot; /&gt;\r\n    &lt;/util:map&gt;\r\n\r\n    &lt;bean id=&quot;readerReadMsg&quot; factory-bean=&quot;methodFactory&quot; factory-method=&quot;getMethodSpring&quot;&gt;\r\n        &lt;constructor-arg value=&quot;reader::readMsg&quot; /&gt;\r\n        &lt;constructor-arg value=&quot;java.util.function.BiFunction&quot; type=&quot;java.lang.Class&quot; /&gt;\r\n    &lt;/bean&gt;\r\n    &lt;bean id=&quot;validatorValidateMsg&quot; factory-bean=&quot;methodFactory&quot; factory-method=&quot;getMethodSpring&quot;&gt;\r\n        &lt;constructor-arg value=&quot;validator::validateMsg&quot; /&gt;\r\n        &lt;constructor-arg value=&quot;java.util.function.BiFunction&quot; type=&quot;java.lang.Class&quot; /&gt;\r\n    &lt;/bean&gt;\r\n    &lt;bean id=&quot;transformerTransformMsg&quot; factory-bean=&quot;methodFactory&quot; factory-method=&quot;getMethodSpring&quot;&gt;\r\n        &lt;constructor-arg value=&quot;transformer::transformMsg&quot; /&gt;\r\n        &lt;constructor-arg value=&quot;java.util.function.BiFunction&quot; type=&quot;java.lang.Class&quot; /&gt;\r\n    &lt;/bean&gt;\r\n    &lt;bean id=&quot;persisterPersistMsg&quot; factory-bean=&quot;methodFactory&quot; factory-method=&quot;getMethodSpring&quot;&gt;\r\n        &lt;constructor-arg value=&quot;persister::persistMsg&quot; /&gt;\r\n        &lt;constructor-arg value=&quot;java.util.function.BiFunction&quot; type=&quot;java.lang.Class&quot; /&gt;\r\n    &lt;/bean&gt;\r\n\r\nThe following links substantially helped me understand how `LambdaMetafactory.metafactory` works and how it can enable me to achieve what I want: [this][1], [this][2] and [this][3].\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/27602758/java-access-bean-methods-with-lambdametafactory/27605965\r\n  [2]: https://stackoverflow.com/questions/29347434/how-to-get-method-reference-for-all-methods-in-a-class-java\r\n  [3]: https://www.programcreek.com/java-api-examples/?code=ufoscout/jporm/jporm-master/jpo-commons-persistor/src/main/java/com/jporm/persistor/accessor/lambda/LambdaGetter.java","title":"Spring configure method references in beans xml","body":"<p>Short answer is YES, but I needed a method-reference factory class to help me generate those beans. It's definitely too verbose, but it works. I ended up with something like so:</p>\n<pre><code>&lt;bean id=&quot;methodFactory&quot; class=&quot;com.foo.bar.util.MethodRefFactory&quot; /&gt;    \n&lt;util:map id=&quot;someParser&quot; key-type=&quot;java.lang.Class&quot;&gt;\n    &lt;entry key=&quot;java.lang.Integer&quot; value-ref=&quot;parseInteger&quot; /&gt;\n    &lt;entry key=&quot;java.lang.Double&quot; value-ref=&quot;parseDouble&quot; /&gt;\n&lt;/util:map&gt;\n&lt;bean id=&quot;parseInteger&quot; factory-bean=&quot;methodFactory&quot; factory-method=&quot;getMethodRef&quot;&gt;\n    &lt;constructor-arg value=&quot;java.lang.Integer::parseInt&quot; /&gt;\n    &lt;constructor-arg value=&quot;java.util.function.Function&quot; type=&quot;java.lang.Class&quot; /&gt;\n    &lt;constructor-arg&gt;&lt;null /&gt;&lt;/constructor-arg&gt;\n&lt;/bean&gt;\n&lt;bean id=&quot;parseDouble&quot; factory-bean=&quot;methodFactory&quot; factory-method=&quot;getMethodRef&quot;&gt;\n    &lt;constructor-arg value=&quot;java.lang.Double::parseDouble&quot; /&gt;\n    &lt;constructor-arg value=&quot;java.util.function.Function&quot; type=&quot;java.lang.Class&quot; /&gt;\n    &lt;constructor-arg&gt;&lt;null /&gt;&lt;/constructor-arg&gt;\n&lt;/bean&gt;\n</code></pre>\n<p>The factory class should just take in the method-reference syntax <code>&lt;class|instance&gt;::&lt;method&gt;</code> as a String, split it and return the method-reference as a Function. But I wanted a generic factory class that can handle both static and non-static method references (eg. <code>java.class.Integer::parseInt</code> and <code>fileValidator::validate</code>), so here's the factory class that I came up with. I hope you find this class useful as well:</p>\n<pre><code>public class MethodRefFactory {\n\n    private ApplicationContext context;\n\n    public MethodRefFactory(ApplicationContext context) {\n        this.context = context;\n    }\n\n    /** Use this method to create non-static method references like fileValidator::validate */\n    public &lt;T&gt; T getMethodSpring(String signature, Class&lt;T&gt; lambdaFuncType) throws Throwable {\n        String[] sigTokens = signature.split(&quot;::&quot;);\n        String sigClass = sigTokens[0];\n        Object objToInvoke = null;\n        try {\n            objToInvoke = context.getBean(sigClass);\n        } catch(BeansException ex) {\n            ex.printStackTrace();\n        }\n        return getMethodRef(signature, lambdaFuncType, objToInvoke);\n    }\n\n    /** Use this method to create static method references like java.lang.Integer::parseInt */\n    public &lt;T&gt; T getMethodRef(String signature, Class&lt;T&gt; lambdaFuncType, Object objToInvoke) throws Throwable {\n        String[] sigTokens = signature.split(&quot;::&quot;);\n        String sigClass = sigTokens[0];\n        String sigMethod = sigTokens[1];\n        boolean isStaticMethod = Objects.isNull(objToInvoke);\n        Class realType = isStaticMethod ? Class.forName(sigClass) : objToInvoke.getClass();\n        Method realMethod = getRealMethod(realType, sigMethod);\n\n        MethodHandles.Lookup caller = MethodHandles.lookup();\n        MethodHandle realMethodHandle = caller.unreflect(realMethod);\n        MethodType realMethodHandleType = realMethodHandle.type();\n        MethodType lambdaFuncMethodType = isStaticMethod ? realMethodHandleType.generic() :\n                generateLambdaFuncMethodType(lambdaFuncType);\n        MethodType targetMethodType = isStaticMethod ? realMethodHandleType :\n                extractMatchingMethodTypeForRealMethod(realMethodHandleType);\n        String lambdaFuncMethodName = lambdaFuncType.getMethods()[0].getName();\n        MethodType lambdaFuncAndRealType = isStaticMethod ? MethodType.methodType(lambdaFuncType) :\n                MethodType.methodType(lambdaFuncType, realType);\n        CallSite site = LambdaMetafactory.metafactory(caller, lambdaFuncMethodName, lambdaFuncAndRealType,\n                lambdaFuncMethodType, realMethodHandle, targetMethodType);\n        MethodHandle factory = site.getTarget();\n        if (!isStaticMethod) {\n            factory = factory.bindTo(objToInvoke);\n        }\n        return (T) factory.invoke();\n    }\n\n    private Method getRealMethod(Class type, String methodName) {\n        return Arrays.stream(type.getMethods()).filter(m -&gt; m.getName().equals(methodName))\n                .sorted(this::compareMethods).findFirst().get();\n    }\n\n    private MethodType extractMatchingMethodTypeForRealMethod(MethodType target) {\n        return MethodType.methodType(target.returnType(), Arrays.copyOfRange(target.parameterArray(),1, target.parameterCount()));\n    }\n\n    private &lt;T&gt; MethodType generateLambdaFuncMethodType(Class&lt;T&gt; funcType) {\n        Method method = funcType.getMethods()[0];\n        if (method.getParameterCount() == 0) {\n            return MethodType.methodType(Object.class);\n        }\n        Class[] params = Arrays.copyOfRange(method.getParameterTypes(), 1, method.getParameterCount());\n        return MethodType.methodType(method.getReturnType(), method.getParameterTypes()[0], params);\n    }\n\n    private int compareMethods(Method m1, Method m2) {\n        return m1.getName().equals(m2.getName()) ? Integer.compare(m1.getParameterCount(), m2.getParameterCount()) :\n                m1.getName().compareTo(m2.getName());\n    }\n}\n</code></pre>\n<p>Here's SimpleBean class and MyInterface interface:</p>\n<pre><code>interface MyInterface&lt;R&gt; {\n\n    R process(Object in);\n}\n\nclass SimpleBean {\n\n    public String simpleFunction(String in) {\n        return &quot;java.util.function.Function test: &quot; + in;\n    }\n\n    public String simpleBiFunction(Double in, Integer y) {\n        return &quot;java.util.function.BiFunction test: &quot; + (in + y);\n    }\n\n    public String simpleIntFunction(Integer y) {\n        return &quot;java.util.function.IntFunction test: &quot; + y;\n    }\n\n    public String simpleSupplier() {\n        return &quot;java.util.function.Supplier test &quot;;\n    }\n\n    public void simpleConsumer(String param) {\n        System.out.println(&quot;java.util.function.Consumer test: &quot; + param);\n    }\n}\n</code></pre>\n<p>Here are my test cases. These demonstrate that the factory class supports <code>Function</code>, <code>BiFunction</code>, <code>IntFunction</code>, <code>Supplier</code>, <code>Consumer</code>, even a custom functional interface:</p>\n<pre><code>public static void main(String[] args) throws Throwable {\n\n    MethodRefFactory factory = new MethodRefFactory(null);\n    Function f = factory.getMethodRef(&quot;java.lang.Short::parseShort&quot;, Function.class, null);\n    System.out.println(f.apply(&quot;2343&quot;));\n\n    SimpleBean bean = new SimpleBean();\n\n    Function f2 = factory.getMethodRef(&quot;com.foo.bar.util.SimpleBean::simpleFunction&quot;, Function.class, bean);\n    System.out.println(f2.apply(&quot;foo&quot;));\n\n    BiFunction f3 = factory.getMethodRef(&quot;com.foo.bar.util.SimpleBean::simpleBiFunction&quot;, BiFunction.class, bean);\n    System.out.println(f3.apply(25.0, 4));\n\n    Supplier f4 = factory.getMethodRef(&quot;com.foo.bar.util.SimpleBean::simpleSupplier&quot;, Supplier.class, bean);\n    System.out.println(f4.get());\n\n    Consumer f5 = factory.getMethodRef(&quot;com.foo.bar.util.SimpleBean::simpleConsumer&quot;, Consumer.class, bean);\n    f5.accept(&quot;bar&quot;);\n\n    IntFunction f6 = factory.getMethodRef(&quot;com.foo.bar.util.SimpleBean::simpleIntFunction&quot;, IntFunction.class, bean);\n    System.out.println(f6.apply(1234));\n\n    MyInterface f7 = factory.getMethodRef(&quot;com.foo.bar.util.SimpleBean::simpleFunction&quot;, MyInterface.class, bean);\n    System.out.println(f7.process(&quot;myInterface param&quot;));\n}\n</code></pre>\n<p>And here's one last sample XML for non-static method references:</p>\n<pre><code>&lt;util:map id=&quot;executorMap&quot; key-type=&quot;java.lang.Class&quot;&gt;\n    &lt;entry key=&quot;com.foo.bar.action.Read&quot; value-ref=&quot;readerReadMsg&quot; /&gt;\n    &lt;entry key=&quot;com.foo.bar.action.Validate&quot; value-ref=&quot;validatorValidateMsg&quot; /&gt;\n    &lt;entry key=&quot;com.foo.bar.action.Transform&quot; value-ref=&quot;transformerTransformMsg&quot; /&gt;\n    &lt;entry key=&quot;com.foo.bar.action.Persist&quot; value-ref=&quot;persisterPersistMsg&quot; /&gt;\n&lt;/util:map&gt;\n\n&lt;bean id=&quot;readerReadMsg&quot; factory-bean=&quot;methodFactory&quot; factory-method=&quot;getMethodSpring&quot;&gt;\n    &lt;constructor-arg value=&quot;reader::readMsg&quot; /&gt;\n    &lt;constructor-arg value=&quot;java.util.function.BiFunction&quot; type=&quot;java.lang.Class&quot; /&gt;\n&lt;/bean&gt;\n&lt;bean id=&quot;validatorValidateMsg&quot; factory-bean=&quot;methodFactory&quot; factory-method=&quot;getMethodSpring&quot;&gt;\n    &lt;constructor-arg value=&quot;validator::validateMsg&quot; /&gt;\n    &lt;constructor-arg value=&quot;java.util.function.BiFunction&quot; type=&quot;java.lang.Class&quot; /&gt;\n&lt;/bean&gt;\n&lt;bean id=&quot;transformerTransformMsg&quot; factory-bean=&quot;methodFactory&quot; factory-method=&quot;getMethodSpring&quot;&gt;\n    &lt;constructor-arg value=&quot;transformer::transformMsg&quot; /&gt;\n    &lt;constructor-arg value=&quot;java.util.function.BiFunction&quot; type=&quot;java.lang.Class&quot; /&gt;\n&lt;/bean&gt;\n&lt;bean id=&quot;persisterPersistMsg&quot; factory-bean=&quot;methodFactory&quot; factory-method=&quot;getMethodSpring&quot;&gt;\n    &lt;constructor-arg value=&quot;persister::persistMsg&quot; /&gt;\n    &lt;constructor-arg value=&quot;java.util.function.BiFunction&quot; type=&quot;java.lang.Class&quot; /&gt;\n&lt;/bean&gt;\n</code></pre>\n<p>The following links substantially helped me understand how <code>LambdaMetafactory.metafactory</code> works and how it can enable me to achieve what I want: <a href=\"https://stackoverflow.com/questions/27602758/java-access-bean-methods-with-lambdametafactory/27605965\">this</a>, <a href=\"https://stackoverflow.com/questions/29347434/how-to-get-method-reference-for-all-methods-in-a-class-java\">this</a> and <a href=\"https://www.programcreek.com/java-api-examples/?code=ufoscout/jporm/jporm-master/jpo-commons-persistor/src/main/java/com/jporm/persistor/accessor/lambda/LambdaGetter.java\" rel=\"nofollow noreferrer\">this</a>.</p>\n"}],"owner":{"account_id":4105919,"reputation":1011,"user_id":3369952,"accept_rate":100,"display_name":"Julius Delfino"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1510,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":1,"score":1,"last_activity_date":1663664972,"creation_date":1589858304,"question_id":61882671,"body_markdown":"I have a map in my config class that looks like the code below (though my actual problem deals with a different set of classes):\r\n\r\n    private Map&lt;Class, Function&lt;String, ?&gt;&gt; someParser = ImmutableMap.of(\r\n                Short.class, Short::parseShort, Integer.class, Integer::parseInt, \r\n                Double.class, Double::parseDouble);\r\n\r\n Is there a way to configure this in XML file? Like treating method references as beans in XML file? Since the code below obviously doesn&#39;t work:\r\n```\r\n&lt;util:map id=&quot;someParser&quot; key-type=&quot;java.lang.Class&quot;&gt;\r\n    &lt;entry key=&quot;java.lang.Short&quot; value-ref=&quot;Short::parseShort&quot; /&gt;\r\n    &lt;entry key=&quot;java.lang.Integer&quot; value-ref=&quot;Integer::parseInteger&quot; /&gt;\r\n    &lt;entry key=&quot;java.lang.Double&quot; value-ref=&quot;Double::parseDouble&quot; /&gt;\r\n&lt;/util:map&gt;\r\n```","title":"Spring configure method references in beans xml","body":"<p>I have a map in my config class that looks like the code below (though my actual problem deals with a different set of classes):</p>\n\n<pre><code>private Map&lt;Class, Function&lt;String, ?&gt;&gt; someParser = ImmutableMap.of(\n            Short.class, Short::parseShort, Integer.class, Integer::parseInt, \n            Double.class, Double::parseDouble);\n</code></pre>\n\n<p>Is there a way to configure this in XML file? Like treating method references as beans in XML file? Since the code below obviously doesn't work:</p>\n\n<pre><code>&lt;util:map id=\"someParser\" key-type=\"java.lang.Class\"&gt;\n    &lt;entry key=\"java.lang.Short\" value-ref=\"Short::parseShort\" /&gt;\n    &lt;entry key=\"java.lang.Integer\" value-ref=\"Integer::parseInteger\" /&gt;\n    &lt;entry key=\"java.lang.Double\" value-ref=\"Double::parseDouble\" /&gt;\n&lt;/util:map&gt;\n</code></pre>\n"},{"tags":["java","netbeans"],"comments":[{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1663176841,"post_id":73720564,"comment_id":130179853,"body_markdown":"1) I would assume that your professor has code that executes your implementation of `removeLast` several times with different contents of the ArrayList. The message &quot;removeLast method should remove the last element of the list&quot; means the result(s) returned by your program didn&#39;t match what the professor expected.","body":"1) I would assume that your professor has code that executes your implementation of <code>removeLast</code> several times with different contents of the ArrayList. The message &quot;removeLast method should remove the last element of the list&quot; means the result(s) returned by your program didn&#39;t match what the professor expected."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1663176997,"post_id":73720564,"comment_id":130179908,"body_markdown":"2) You were asked to remove the last element of the list, but you removed the last two.  3) You also &quot;hard coded&quot; the values to be removed.  You are to code `removeLast` so that it will remove the last element regardless of the values it contains.","body":"2) You were asked to remove the last element of the list, but you removed the last two.  3) You also &quot;hard coded&quot; the values to be removed.  You are to code <code>removeLast</code> so that it will remove the last element regardless of the values it contains."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1663177589,"post_id":73720564,"comment_id":130180102,"body_markdown":"4)  An array or `Collection` is empty when it contains no elements.  You need to test if `strings` is empty. If it is empty, `return;` instead of attempting to delete the last element.  [ArrayList API](https://docs.oracle.com/javase/8/docs/api/java/util/ArrayList.html)","body":"4)  An array or <code>Collection</code> is empty when it contains no elements.  You need to test if <code>strings</code> is empty. If it is empty, <code>return;</code> instead of attempting to delete the last element.  <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/ArrayList.html\" rel=\"nofollow noreferrer\">ArrayList API</a>"},{"owner":{"account_id":26201278,"reputation":21,"user_id":19881615,"display_name":"belinyom"},"score":0,"creation_date":1663180271,"post_id":73720564,"comment_id":130180993,"body_markdown":"@OldDogProgrammer, is there a mathematical or linear way to describe if a certain string array list is empty or not? with out using .isEmpty () method? Besides, how can I return when the method is a void type? I thought void method types cannot return values","body":"@OldDogProgrammer, is there a mathematical or linear way to describe if a certain string array list is empty or not? with out using .isEmpty () method? Besides, how can I return when the method is a void type? I thought void method types cannot return values"},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":1,"creation_date":1663180923,"post_id":73720564,"comment_id":130181177,"body_markdown":"Well,  you could use `.size()` and compare it to zero:  `if (strings.size() == 0)`, e.g. You&#39;re right: `void` return type means the method cannot return a value. But, you are being passed (a copy of) the reference to the ArrayList to be modified. So, when you change the contents of the list, it is changed in the calling method.","body":"Well,  you could use <code>.size()</code> and compare it to zero:  <code>if (strings.size() == 0)</code>, e.g. You&#39;re right: <code>void</code> return type means the method cannot return a value. But, you are being passed (a copy of) the reference to the ArrayList to be modified. So, when you change the contents of the list, it is changed in the calling method."}],"answers":[{"tags":[],"owner":{"account_id":26172036,"reputation":46,"user_id":19856836,"display_name":"user19856836"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1663178070,"creation_date":1663178070,"answer_id":73721265,"question_id":73720564,"body_markdown":"&quot;If the list is empty, the method does nothing&quot; --&gt; Check if the list is empty or not, if empty just return nothing , else delete last element(as per your requirement)\r\n\r\nExample:\r\n \r\n\r\n    public static void removeLast(ArrayList&lt;String&gt; strings) {\r\n    \t\t\r\n    \t\tif( (strings.isEmpty())) {\r\n    \t\t return;\r\n    \t\t} \r\n    \t\telse {\r\n    \t\t\tstrings.remove(strings.size()-1);\r\n    \t\t\t\r\n    \t\t}\r\n    \t\t\r\n    \t\r\n    \t}","title":"How to remove the last string in an array element using parameters of another method named removeLast()","body":"<p>&quot;If the list is empty, the method does nothing&quot; --&gt; Check if the list is empty or not, if empty just return nothing , else delete last element(as per your requirement)</p>\n<p>Example:</p>\n<pre><code>public static void removeLast(ArrayList&lt;String&gt; strings) {\n        \n        if( (strings.isEmpty())) {\n         return;\n        } \n        else {\n            strings.remove(strings.size()-1);\n            \n        }\n        \n    \n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26217975,"reputation":1,"user_id":19895867,"display_name":"Sourabh malviya"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663664762,"creation_date":1663179021,"answer_id":73721452,"question_id":73720564,"body_markdown":"you can first simply check list is empty of not if it is not empty than you can call `size()` methos it give last `index number` of list and simply you can call `remove(int)` method to remove last element.\r\n\r\n     public static void removeLast(ArrayList&lt;String&gt; strings) {\r\n\r\n       if(strings.isEmpty()) {\r\n\r\n       } else {\r\n          strings.remove(strings.size()-1);\r\n       }\r\n     }","title":"How to remove the last string in an array element using parameters of another method named removeLast()","body":"<p>you can first simply check list is empty of not if it is not empty than you can call <code>size()</code> methos it give last <code>index number</code> of list and simply you can call <code>remove(int)</code> method to remove last element.</p>\n<pre><code> public static void removeLast(ArrayList&lt;String&gt; strings) {\n\n   if(strings.isEmpty()) {\n\n   } else {\n      strings.remove(strings.size()-1);\n   }\n }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26172036,"reputation":46,"user_id":19856836,"display_name":"user19856836"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663214546,"creation_date":1663214546,"answer_id":73725499,"question_id":73720564,"body_markdown":"There is no mathematical way to check if arrayList is empty or not. \r\na. Either you have to check with method isEmpty() [or] \r\nb. check with array list size is greater than zero.\r\n\r\nIn application programming you have to check if array list is NOT NULL and the list is NOT EMPTY. \r\n\r\n\r\n","title":"How to remove the last string in an array element using parameters of another method named removeLast()","body":"<p>There is no mathematical way to check if arrayList is empty or not.\na. Either you have to check with method isEmpty() [or]\nb. check with array list size is greater than zero.</p>\n<p>In application programming you have to check if array list is NOT NULL and the list is NOT EMPTY.</p>\n"}],"owner":{"account_id":26201278,"reputation":21,"user_id":19881615,"display_name":"belinyom"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":465,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73721265,"answer_count":3,"score":0,"last_activity_date":1663664762,"creation_date":1663174283,"question_id":73720564,"body_markdown":"Here is the question of exercise and my code:\r\n\r\nCreate the method public static void removeLast(ArrayList&lt;String&gt; strings) in the exercise template. The method should remove the last value in the list it receives as a parameter. If the list is empty, the method does nothing.\r\n\r\n    public static void main(String[] args) {\r\n        // Try your method in here\r\n        ArrayList&lt;String&gt; arrayList = new ArrayList&lt;&gt;();\r\n        arrayList.add(&quot;First&quot;);\r\n        arrayList.add(&quot;Second&quot;);\r\n        arrayList.add(&quot;Third&quot;);\r\n        System.out.println(arrayList);\r\n        removeLast(arrayList);\r\n        System.out.println(arrayList);\r\n    }\r\n\r\n    public static void removeLast(ArrayList&lt;String&gt; strings) {\r\n        strings.remove(&quot;Second&quot;);\r\n        strings.remove(&quot;Third&quot;);\r\n    }\r\n\r\nThe sample output should look similar to the following:\r\n\r\n    [First, Second, Third]\r\n    [First]\r\n\r\nWhat does the exercise mean by if the list is empty, the method does nothing?\r\n\r\nI also keep getting error from local test saying the following:\r\n\r\n**removeLast method should remove the last element of the list.**\r\n\r\nCould someone help please?\r\n","title":"How to remove the last string in an array element using parameters of another method named removeLast()","body":"<p>Here is the question of exercise and my code:</p>\n<p>Create the method public static void removeLast(ArrayList strings) in the exercise template. The method should remove the last value in the list it receives as a parameter. If the list is empty, the method does nothing.</p>\n<pre><code>public static void main(String[] args) {\n    // Try your method in here\n    ArrayList&lt;String&gt; arrayList = new ArrayList&lt;&gt;();\n    arrayList.add(&quot;First&quot;);\n    arrayList.add(&quot;Second&quot;);\n    arrayList.add(&quot;Third&quot;);\n    System.out.println(arrayList);\n    removeLast(arrayList);\n    System.out.println(arrayList);\n}\n\npublic static void removeLast(ArrayList&lt;String&gt; strings) {\n    strings.remove(&quot;Second&quot;);\n    strings.remove(&quot;Third&quot;);\n}\n</code></pre>\n<p>The sample output should look similar to the following:</p>\n<pre><code>[First, Second, Third]\n[First]\n</code></pre>\n<p>What does the exercise mean by if the list is empty, the method does nothing?</p>\n<p>I also keep getting error from local test saying the following:</p>\n<p><strong>removeLast method should remove the last element of the list.</strong></p>\n<p>Could someone help please?</p>\n"},{"tags":["java","spring","spring-boot","spring-security"],"comments":[{"owner":{"account_id":4012793,"reputation":1627,"user_id":3305737,"display_name":"Jonasz"},"score":0,"creation_date":1663131943,"post_id":73710691,"comment_id":130164205,"body_markdown":"Are you saving the `DefaultUserDetails` anywhere in the security context earlier? [Here&#39;s](https://docs.spring.io/spring-security/site/docs/4.0.2.RELEASE/reference/htmlsingle/#tech-userdetailsservice) a part of the docs that may be helpful.","body":"Are you saving the <code>DefaultUserDetails</code> anywhere in the security context earlier? <a href=\"https://docs.spring.io/spring-security/site/docs/4.0.2.RELEASE/reference/htmlsingle/#tech-userdetailsservice\" rel=\"nofollow noreferrer\">Here&#39;s</a> a part of the docs that may be helpful."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1663141045,"post_id":73710691,"comment_id":130166408,"body_markdown":"The principal for a `UsernamePasswordAuthenticationToken` is a `String` as that is what is used to identify the user (next to the password).","body":"The principal for a <code>UsernamePasswordAuthenticationToken</code> is a <code>String</code> as that is what is used to identify the user (next to the password)."},{"owner":{"display_name":"user19926584"},"score":0,"creation_date":1663445993,"post_id":73710691,"comment_id":130243325,"body_markdown":"@M.Deinum Is my understanding correct? When it autneticates the user it loads it from the database using `loadUserByUsername` and it returns DefaultUserDetails (my custom object)? it uses that object for authentication and then when I request principal why is it just returns me the `Username`, I need DefatulUserDetails, should I quiery database once again to get that or is there a better solution to get DefaultUserDetails insteadof Username?","body":"@M.Deinum Is my understanding correct? When it autneticates the user it loads it from the database using <code>loadUserByUsername</code> and it returns DefaultUserDetails (my custom object)? it uses that object for authentication and then when I request principal why is it just returns me the <code>Username</code>, I need DefatulUserDetails, should I quiery database once again to get that or is there a better solution to get DefaultUserDetails insteadof Username?"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1663569356,"post_id":73710691,"comment_id":130261870,"body_markdown":"When the default `DaoAuthenticationProvider` is used, and it is you just pass in a custom `UserDetailsService` it will always use the `username` as the `principal`. You can check the code.","body":"When the default <code>DaoAuthenticationProvider</code> is used, and it is you just pass in a custom <code>UserDetailsService</code> it will always use the <code>username</code> as the <code>principal</code>. You can check the code."}],"answers":[{"tags":[],"owner":{"display_name":"user19926584"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1663664715,"creation_date":1663664715,"answer_id":73784169,"question_id":73710691,"body_markdown":"I finally find out.\r\n\r\nThis all due to my JWT filter that actually authenticates the user...\r\n\r\nHere the principal is the userDetails (IN WAS STRING ..)\r\n```\r\n                final var authentication = new UsernamePasswordAuthenticationToken(principal, null, authorities);\r\n\r\n                authentication.setDetails(new WebAuthenticationDetailsSource().buildDetails(context));\r\n                SecurityContextHolder.getContext().setAuthentication(authentication);\r\n```","title":"Why @PreAuthorize principal is String and not UserDetails?","body":"<p>I finally find out.</p>\n<p>This all due to my JWT filter that actually authenticates the user...</p>\n<p>Here the principal is the userDetails (IN WAS STRING ..)</p>\n<pre><code>                final var authentication = new UsernamePasswordAuthenticationToken(principal, null, authorities);\n\n                authentication.setDetails(new WebAuthenticationDetailsSource().buildDetails(context));\n                SecurityContextHolder.getContext().setAuthentication(authentication);\n</code></pre>\n"}],"owner":{"display_name":"user19926584"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":307,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73784169,"answer_count":1,"score":1,"last_activity_date":1663664715,"creation_date":1663120921,"question_id":73710691,"body_markdown":"I have method annotated with @PreAuthorize that uses custom bean\r\n```java\r\n@PreAuthorize(&quot;@preAuthUtils.test(authentication)&quot;)\r\npublic void method(){\r\n    ...\r\n}\r\n```\r\n\r\nThat bean does nothing just printing out the auth and user (principle)\r\n```java\r\n@Component(value = &quot;preAuthUtils&quot;)\r\npublic class PreAuthUtils {\r\n        public boolean test(UsernamePasswordAuthenticationToken x) {\r\n                System.out.println(&quot;type: &quot; + x.getClass().getSimpleName());\r\n                System.out.println(&quot;string: &quot; + x.toString());\r\n                final var user = x.getPrincipal();\r\n                System.out.println(&quot;type: &quot; + user.getClass().getSimpleName());\r\n                System.out.println(&quot;string: &quot; + user.toString());\r\n                return true;\r\n        }\r\n}\r\n```\r\n\r\nOutput (after request)\r\n```json\r\n\r\ntype: UsernamePasswordAuthenticationToken\r\nstring: UsernamePasswordAuthenticationToken [Principal=johndoe, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER, ROLE_CUSTOMER]]\r\n\r\ntype: String\r\nstring: johndoe\r\n\r\n```\r\n\r\nThe question is why the user is type of String? and not my custom &quot;DefaultUserDetails&quot; class that implements UserDetails?\r\n\r\nBecause I need to get the id and info about user to make decisions wheather to authenticate or restrict the user, i spent 6 hours i just want to cry","title":"Why @PreAuthorize principal is String and not UserDetails?","body":"<p>I have method annotated with @PreAuthorize that uses custom bean</p>\n<pre class=\"lang-java prettyprint-override\"><code>@PreAuthorize(&quot;@preAuthUtils.test(authentication)&quot;)\npublic void method(){\n    ...\n}\n</code></pre>\n<p>That bean does nothing just printing out the auth and user (principle)</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component(value = &quot;preAuthUtils&quot;)\npublic class PreAuthUtils {\n        public boolean test(UsernamePasswordAuthenticationToken x) {\n                System.out.println(&quot;type: &quot; + x.getClass().getSimpleName());\n                System.out.println(&quot;string: &quot; + x.toString());\n                final var user = x.getPrincipal();\n                System.out.println(&quot;type: &quot; + user.getClass().getSimpleName());\n                System.out.println(&quot;string: &quot; + user.toString());\n                return true;\n        }\n}\n</code></pre>\n<p>Output (after request)</p>\n<pre class=\"lang-json prettyprint-override\"><code>\ntype: UsernamePasswordAuthenticationToken\nstring: UsernamePasswordAuthenticationToken [Principal=johndoe, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER, ROLE_CUSTOMER]]\n\ntype: String\nstring: johndoe\n\n</code></pre>\n<p>The question is why the user is type of String? and not my custom &quot;DefaultUserDetails&quot; class that implements UserDetails?</p>\n<p>Because I need to get the id and info about user to make decisions wheather to authenticate or restrict the user, i spent 6 hours i just want to cry</p>\n"},{"tags":["java","spring","rest","spring-mvc","spring-boot"],"comments":[{"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"score":0,"creation_date":1514823221,"post_id":48051177,"comment_id":83074145,"body_markdown":"Don&#39;t know if it matters, but `multipart/form-data` should not have a `charset`. It does need a `boundary` though. See [WWW Specification](https://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.2).","body":"Don&#39;t know if it matters, but <code>multipart&#47;form-data</code> should not have a <code>charset</code>. It does need a <code>boundary</code> though. See <a href=\"https://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.2\" rel=\"nofollow noreferrer\">WWW Specification</a>."},{"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"score":0,"creation_date":1514823333,"post_id":48051177,"comment_id":83074179,"body_markdown":"More likely, though, it is the `----` in the `boundary` that cause trouble, since `--` has special meaning for boundary markers.","body":"More likely, though, it is the <code>----</code> in the <code>boundary</code> that cause trouble, since <code>--</code> has special meaning for boundary markers."},{"owner":{"account_id":3597289,"reputation":639,"user_id":3001591,"display_name":"dknight"},"score":0,"creation_date":1514877461,"post_id":48051177,"comment_id":83086110,"body_markdown":"@RequestBody means to parse JSON data into map or java beans and only support content type is &quot;application/json;charset=UTF-8&quot;","body":"@RequestBody means to parse JSON data into map or java beans and only support content type is &quot;application/json;charset=UTF-8&quot;"}],"answers":[{"tags":[],"owner":{"account_id":5267266,"reputation":497,"user_id":4206757,"display_name":"plue"},"down_vote_count":0,"up_vote_count":34,"is_accepted":false,"score":34,"last_activity_date":1593592834,"creation_date":1523288568,"answer_id":49736794,"question_id":48051177,"body_markdown":"In Postman, you need to set the body to be of type raw, and from the drop down you can select JSON, I had a similar issue, this fixed my issue.\r\n\r\n![view screen here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/HbDSD.png","title":"Content type &#39;multipart/form-data;boundary=----...;charset=UTF-8&#39; not supported","body":"<p>In Postman, you need to set the body to be of type raw, and from the drop down you can select JSON, I had a similar issue, this fixed my issue.</p>\n<p><img src=\"https://i.stack.imgur.com/HbDSD.png\" alt=\"view screen here\" /></p>\n"},{"tags":[],"owner":{"account_id":5153303,"reputation":713,"user_id":4127257,"accept_rate":75,"display_name":"uncleBounty"},"down_vote_count":0,"up_vote_count":61,"is_accepted":false,"score":61,"last_activity_date":1535015619,"creation_date":1535015619,"answer_id":51982230,"question_id":48051177,"body_markdown":"As said dknight @RequestBody means use of JSON or XML data with maps your DTO bean.\r\nIn case of MultipartFile you can&#39;t use JSON data so you can&#39;t use @RequestBody.\r\nTry with @ModelAttribute annotation.\r\n\r\nWorking sample :\r\n\r\n    @PostMapping(&quot;/promoters&quot;)\r\n    @Timed\r\n    public ResponseEntity&lt;PromoterDTO&gt; createPromoter(@ModelAttribute PromoterDTO promoterDTO) throws URISyntaxException { ... }\r\n\r\n\r\nWith PromoterDTO like this : \r\n\r\n        public class PromoterDTO implements Serializable {\r\n    \r\n    \t    private Long id; \r\n    \t\r\n    \t    private String name;\r\n    \r\n            private String address;\r\n    \r\n            private MultipartFile logo;\r\n        }\r\n\r\n\r\n","title":"Content type &#39;multipart/form-data;boundary=----...;charset=UTF-8&#39; not supported","body":"<p>As said dknight @RequestBody means use of JSON or XML data with maps your DTO bean.\nIn case of MultipartFile you can't use JSON data so you can't use @RequestBody.\nTry with @ModelAttribute annotation.</p>\n\n<p>Working sample :</p>\n\n<pre><code>@PostMapping(\"/promoters\")\n@Timed\npublic ResponseEntity&lt;PromoterDTO&gt; createPromoter(@ModelAttribute PromoterDTO promoterDTO) throws URISyntaxException { ... }\n</code></pre>\n\n<p>With PromoterDTO like this : </p>\n\n<pre><code>    public class PromoterDTO implements Serializable {\n\n        private Long id; \n\n        private String name;\n\n        private String address;\n\n        private MultipartFile logo;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13404844,"reputation":353,"user_id":9673158,"display_name":"Chirag Shah"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1561633183,"creation_date":1561633183,"answer_id":56789544,"question_id":48051177,"body_markdown":"Instead of @RequestBody, use @ModelAttribute like, \r\n\r\n    @PostMapping(value = &quot;/{id}/contributions/photos&quot;)\r\n    @ResponseStatus(HttpStatus.CREATED)\r\n    public\r\n    ResponseEntity&lt;Void&gt; createPhotoContribution(\r\n            @ApiParam(value = &quot;The movie ID&quot;, required = true)\r\n            @PathVariable(&quot;id&quot;) final Long id,\r\n            @ApiParam(value = &quot;The contribution&quot;, required = true)\r\n            @ModelAttribute @Valid final ContributionNew&lt;Photo&gt; contribution\r\n    ) {","title":"Content type &#39;multipart/form-data;boundary=----...;charset=UTF-8&#39; not supported","body":"<p>Instead of @RequestBody, use @ModelAttribute like, </p>\n\n<pre><code>@PostMapping(value = \"/{id}/contributions/photos\")\n@ResponseStatus(HttpStatus.CREATED)\npublic\nResponseEntity&lt;Void&gt; createPhotoContribution(\n        @ApiParam(value = \"The movie ID\", required = true)\n        @PathVariable(\"id\") final Long id,\n        @ApiParam(value = \"The contribution\", required = true)\n        @ModelAttribute @Valid final ContributionNew&lt;Photo&gt; contribution\n) {\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9241077,"reputation":75,"user_id":6864351,"display_name":"Shadab Reza"},"down_vote_count":2,"up_vote_count":8,"is_accepted":false,"score":6,"last_activity_date":1614944751,"creation_date":1563950674,"answer_id":57176781,"question_id":48051177,"body_markdown":"Instead of `@RequestBody`, use `@RequestParam`!","title":"Content type &#39;multipart/form-data;boundary=----...;charset=UTF-8&#39; not supported","body":"<p>Instead of <code>@RequestBody</code>, use <code>@RequestParam</code>!</p>\n"},{"tags":[],"owner":{"account_id":11410251,"reputation":69,"user_id":8364607,"display_name":"tushar"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1580018799,"creation_date":1580018799,"answer_id":59915979,"question_id":48051177,"body_markdown":"use @ModelAttribute instead of @ResponseBody as this takes up data in key value pairs and the later is used for an object like, json.\r\nWhile hitting the api simply pass the multipart type and json key value pairs of the object. It works fine!\r\n\r\n[stack overflow question on this][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/21824012/spring-modelattribute-vs-requestbody","title":"Content type &#39;multipart/form-data;boundary=----...;charset=UTF-8&#39; not supported","body":"<p>use @ModelAttribute instead of @ResponseBody as this takes up data in key value pairs and the later is used for an object like, json.\nWhile hitting the api simply pass the multipart type and json key value pairs of the object. It works fine!</p>\n\n<p><a href=\"https://stackoverflow.com/questions/21824012/spring-modelattribute-vs-requestbody\">stack overflow question on this</a></p>\n"},{"tags":[],"owner":{"account_id":13060927,"reputation":41,"user_id":9438142,"display_name":"Mukund Lalge"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1614944732,"creation_date":1614944594,"answer_id":66491976,"question_id":48051177,"body_markdown":"```\r\nimport org.springframework.web.bind.annotation.ModelAttribute;\r\n```\r\nUse `@ModelAttribute` instead of `@RequestBody`. It worked for me. ","title":"Content type &#39;multipart/form-data;boundary=----...;charset=UTF-8&#39; not supported","body":"<pre><code>import org.springframework.web.bind.annotation.ModelAttribute;\n</code></pre>\n<p>Use <code>@ModelAttribute</code> instead of <code>@RequestBody</code>. It worked for me.</p>\n"},{"tags":[],"owner":{"account_id":3201814,"reputation":121,"user_id":2703729,"display_name":"Jack"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1621849104,"creation_date":1621849104,"answer_id":67669796,"question_id":48051177,"body_markdown":"Here&#39;s a full code sample written in Kotlin using Spring Boot 2.1.7\r\n\r\nExample uses a `ProfileRepository` that would be something you implement of course.\r\n\r\nKotlin is nice, because the `data class` implements serializable already. \r\n\r\n**Take note, that you have to use `var` not `val` for the model objects properties otherwise the field values will be null in the log message.**\r\n\r\n\r\n```kotlin\r\nimport org.springframework.web.bind.annotation.ModelAttribute\r\nimport org.springframework.web.bind.annotation.PostMapping\r\nimport org.springframework.web.bind.annotation.RestController\r\nimport org.springframework.web.multipart.MultipartFile\r\n\r\n@RestController\r\nclass ExampleController(private val myProfileRepository: ProfileRepository) {\r\n    \r\n    @PostMapping(&quot;/api/uploadFile&quot;)\r\n    fun createProvider(@ModelAttribute request: CreateProfileRequest): Provider {\r\n        println(&quot;received create request with photo: ${request.photo} for the following person ${request.name}&quot;)\r\n        return myProfileRepository.save(Provider(name = request.name!!))\r\n    }\r\n}\r\n\r\ndata class CreateProfileRequest(\r\n    var name: String? = null,\r\n    var photo: MultipartFile? = null\r\n)\r\n```","title":"Content type &#39;multipart/form-data;boundary=----...;charset=UTF-8&#39; not supported","body":"<p>Here's a full code sample written in Kotlin using Spring Boot 2.1.7</p>\n<p>Example uses a <code>ProfileRepository</code> that would be something you implement of course.</p>\n<p>Kotlin is nice, because the <code>data class</code> implements serializable already.</p>\n<p><strong>Take note, that you have to use <code>var</code> not <code>val</code> for the model objects properties otherwise the field values will be null in the log message.</strong></p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>import org.springframework.web.bind.annotation.ModelAttribute\nimport org.springframework.web.bind.annotation.PostMapping\nimport org.springframework.web.bind.annotation.RestController\nimport org.springframework.web.multipart.MultipartFile\n\n@RestController\nclass ExampleController(private val myProfileRepository: ProfileRepository) {\n    \n    @PostMapping(&quot;/api/uploadFile&quot;)\n    fun createProvider(@ModelAttribute request: CreateProfileRequest): Provider {\n        println(&quot;received create request with photo: ${request.photo} for the following person ${request.name}&quot;)\n        return myProfileRepository.save(Provider(name = request.name!!))\n    }\n}\n\ndata class CreateProfileRequest(\n    var name: String? = null,\n    var photo: MultipartFile? = null\n)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":21738482,"reputation":21,"user_id":16046173,"display_name":"user16046173"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1622102068,"creation_date":1622102068,"answer_id":67717930,"question_id":48051177,"body_markdown":"produces = { &quot;application/json&quot; } has to written in the controller instead of consumes = { &quot;application/json&quot; }","title":"Content type &#39;multipart/form-data;boundary=----...;charset=UTF-8&#39; not supported","body":"<p>produces = { &quot;application/json&quot; } has to written in the controller instead of consumes = { &quot;application/json&quot; }</p>\n"},{"tags":[],"owner":{"account_id":13291674,"reputation":865,"user_id":11423910,"display_name":"soufiane ELAMMARI"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1663664572,"creation_date":1663664572,"answer_id":73784135,"question_id":48051177,"body_markdown":"Hi Folks simply change : @RequestBody to @ModelAttribute\r\n\r\n    public ResponseEntity&lt;DTO&gt; exemple(@ModelAttribute Dto dto) throws TechnicalException\r\n\r\nHappy coding.","title":"Content type &#39;multipart/form-data;boundary=----...;charset=UTF-8&#39; not supported","body":"<p>Hi Folks simply change : @RequestBody to @ModelAttribute</p>\n<pre><code>public ResponseEntity&lt;DTO&gt; exemple(@ModelAttribute Dto dto) throws TechnicalException\n</code></pre>\n<p>Happy coding.</p>\n"}],"owner":{"account_id":12596556,"reputation":501,"user_id":9160942,"display_name":"sdafasdf"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":139843,"favorite_count":0,"down_vote_count":0,"up_vote_count":50,"answer_count":9,"score":50,"last_activity_date":1663664572,"creation_date":1514822860,"question_id":48051177,"body_markdown":"I want to send an object to the controller that has several lists with files and several fields with plain text.\r\n\r\n    public class ContributionNew&lt;T extends MovieInfoDTO&gt; {\r\n        private List&lt;T&gt; elementsToAdd;\r\n        private Map&lt;Long, T&gt; elementsToUpdate;\r\n        private Set&lt;Long&gt; idsToDelete;\r\n        private Set&lt;String&gt; sources;\r\n        private String comment;\r\n    }\r\n\r\n    public class Photo extends MovieInfoDTO {\r\n        private MultipartFile photo;\r\n    }\r\n\r\n    @PostMapping(value = &quot;/{id}/contributions/photos&quot;)\r\n    @ResponseStatus(HttpStatus.CREATED)\r\n    public\r\n    ResponseEntity&lt;Void&gt; createPhotoContribution(\r\n            @ApiParam(value = &quot;The movie ID&quot;, required = true)\r\n            @PathVariable(&quot;id&quot;) final Long id,\r\n            @ApiParam(value = &quot;The contribution&quot;, required = true)\r\n            @RequestBody @Valid final ContributionNew&lt;Photo&gt; contribution\r\n    ) {\r\nI am sending data using [postman][1]. However, he throws me away\r\n\r\n    org.springframework.web.HttpMediaTypeNotSupportedException: Content type &#39;multipart/form-data;boundary=----WebKitFormBoundarywY7ByvgonAjDoaCT;charset=UTF-8&#39; not supported\r\n\r\nWhat should I set the Content-type for this controller so that I can send an object that has fields of plain text and lists with files?\r\n\r\nIf I set the header in the header\r\n\r\n    Content-type: multipart/form-data; charset=utf-8\r\n\r\nit throws me in the console\r\n\r\n    org.apache.tomcat.util.http.fileupload.FileUploadException: the request was rejected because no multipart boundary was found\r\n\r\n\r\n  [1]: https://zapodaj.net/d22ba9788f302.png.html","title":"Content type &#39;multipart/form-data;boundary=----...;charset=UTF-8&#39; not supported","body":"<p>I want to send an object to the controller that has several lists with files and several fields with plain text.</p>\n\n<pre><code>public class ContributionNew&lt;T extends MovieInfoDTO&gt; {\n    private List&lt;T&gt; elementsToAdd;\n    private Map&lt;Long, T&gt; elementsToUpdate;\n    private Set&lt;Long&gt; idsToDelete;\n    private Set&lt;String&gt; sources;\n    private String comment;\n}\n\npublic class Photo extends MovieInfoDTO {\n    private MultipartFile photo;\n}\n\n@PostMapping(value = \"/{id}/contributions/photos\")\n@ResponseStatus(HttpStatus.CREATED)\npublic\nResponseEntity&lt;Void&gt; createPhotoContribution(\n        @ApiParam(value = \"The movie ID\", required = true)\n        @PathVariable(\"id\") final Long id,\n        @ApiParam(value = \"The contribution\", required = true)\n        @RequestBody @Valid final ContributionNew&lt;Photo&gt; contribution\n) {\n</code></pre>\n\n<p>I am sending data using <a href=\"https://zapodaj.net/d22ba9788f302.png.html\" rel=\"noreferrer\">postman</a>. However, he throws me away</p>\n\n<pre><code>org.springframework.web.HttpMediaTypeNotSupportedException: Content type 'multipart/form-data;boundary=----WebKitFormBoundarywY7ByvgonAjDoaCT;charset=UTF-8' not supported\n</code></pre>\n\n<p>What should I set the Content-type for this controller so that I can send an object that has fields of plain text and lists with files?</p>\n\n<p>If I set the header in the header</p>\n\n<pre><code>Content-type: multipart/form-data; charset=utf-8\n</code></pre>\n\n<p>it throws me in the console</p>\n\n<pre><code>org.apache.tomcat.util.http.fileupload.FileUploadException: the request was rejected because no multipart boundary was found\n</code></pre>\n"},{"tags":["java","android","flutter","server"],"owner":{"account_id":23246336,"reputation":31,"user_id":17334884,"display_name":"Jon_1_2"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":337,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":0,"score":3,"last_activity_date":1663664444,"creation_date":1636103390,"question_id":69850822,"body_markdown":"I am looking for a way to set up a hidden service v3 on a smartphone with Flutter. I have already looked at the project [utopic_tor_onion_proxy](https://github.com/utopicnarwhal/utopic_tor_onion_proxy) on github, but I want to use the torproject binaries directly and it is also not possible to handle requests.\r\nFor some tips on how to do this with for example a Flutter plugin I would be very grateful.\r\nAlso I would be glad about a small code example.\r\n\r\nI was already able to create a server and reach it with the following code:\r\n\r\n    class MyServer {  \r\n\r\n    void main(List&lt;String&gt; args) async {\r\n    // Use any available host or container IP (usually `0.0.0.0`).\r\n    final ip = InternetAddress.anyIPv4;\r\n\r\n    // Configure a pipeline that logs requests.\r\n    final _handler = Pipeline().addMiddleware(logRequests()).addHandler(_router);\r\n\r\n    // For running in containers, we respect the PORT environment variable.\r\n    final port = int.parse(Platform.environment[&#39;PORT&#39;] ?? &#39;5555&#39;);\r\n    final server = await serve(_handler, ip, port);\r\n    print(&#39;Server listening on port ${server.port}&#39;);\r\n \r\n\r\n     }}\r\n","title":"Set up onion server with Dart (Flutter) on Smartphones","body":"<p>I am looking for a way to set up a hidden service v3 on a smartphone with Flutter. I have already looked at the project <a href=\"https://github.com/utopicnarwhal/utopic_tor_onion_proxy\" rel=\"nofollow noreferrer\">utopic_tor_onion_proxy</a> on github, but I want to use the torproject binaries directly and it is also not possible to handle requests.\nFor some tips on how to do this with for example a Flutter plugin I would be very grateful.\nAlso I would be glad about a small code example.</p>\n<p>I was already able to create a server and reach it with the following code:</p>\n<pre><code>class MyServer {  \n\nvoid main(List&lt;String&gt; args) async {\n// Use any available host or container IP (usually `0.0.0.0`).\nfinal ip = InternetAddress.anyIPv4;\n\n// Configure a pipeline that logs requests.\nfinal _handler = Pipeline().addMiddleware(logRequests()).addHandler(_router);\n\n// For running in containers, we respect the PORT environment variable.\nfinal port = int.parse(Platform.environment['PORT'] ?? '5555');\nfinal server = await serve(_handler, ip, port);\nprint('Server listening on port ${server.port}');\n\n\n }}\n</code></pre>\n"},{"tags":["java","thymeleaf"],"comments":[{"owner":{"account_id":17750,"reputation":25470,"user_id":40064,"accept_rate":69,"display_name":"Wim Deblauwe"},"score":0,"creation_date":1663234792,"post_id":73720859,"comment_id":130193069,"body_markdown":"Would using `&lt;th:block&gt;` fix it (See https://stackoverflow.com/questions/55095198/thymeleaf-getting-property-or-field-cannot-be-found-on-null-iteration-of-list)?","body":"Would using <code>&lt;th:block&gt;</code> fix it (See <a href=\"https://stackoverflow.com/questions/55095198/thymeleaf-getting-property-or-field-cannot-be-found-on-null-iteration-of-list\" title=\"thymeleaf getting property or field cannot be found on null iteration of list\">stackoverflow.com/questions/55095198/&hellip;</a>)?"}],"answers":[{"tags":[],"owner":{"account_id":9833761,"reputation":5819,"user_id":7284779,"accept_rate":39,"display_name":"Martin Nordstr&#246;m"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1663664268,"creation_date":1663664268,"answer_id":73784068,"question_id":73720859,"body_markdown":"The issue was the table structure. After the first closing `&lt;/tr&gt;` tag, I have an `&lt;td&gt;`, but I should actually have another `&lt;tr&gt;`.\r\n\r\nBroken:\r\n```html\r\n&lt;table th:each=&quot;groupOrderCustomer : ${groupOrderCustomers}&quot;&gt;\r\n  &lt;tr&gt;\r\n    &lt;td th:text=&quot;${groupOrderCustomer.customerName}&quot; align=&quot;left&quot;&gt;\r\n      Martin\r\n    &lt;/td&gt;\r\n    &lt;td th:text=&quot;${groupOrderCustomer.totalPrice}&quot; align=&quot;right&quot;&gt;\r\n      100 kr\r\n    &lt;/td&gt;\r\n  &lt;/tr&gt;\r\n  &lt;td&gt;\r\n    &lt;table th:each=&quot;orderProduct : ${groupOrderCustomer.orderProducts}&quot;&gt;\r\n      &lt;tr&gt;\r\n        &lt;td th:text=&quot;${orderProduct.quantity} + &#39;st &#39; + ${orderProduct.name}&quot; align=&quot;left&quot;&gt;\r\n          1st Kombo\r\n        &lt;/td&gt;\r\n        &lt;td th:text=&quot;${orderProduct.totalPrice}&quot; align=&quot;right&quot;&gt;\r\n          100 kr\r\n        &lt;/td&gt;\r\n      &lt;/tr&gt;\r\n    &lt;/table&gt;\r\n  &lt;/td&gt;\r\n&lt;/table&gt;\r\n```\r\n\r\nWorking:\r\n```html\r\n&lt;table th:each=&quot;groupOrderCustomer : ${groupOrderCustomers}&quot;&gt;\r\n  &lt;tr&gt;\r\n    &lt;td th:text=&quot;${groupOrderCustomer.customerName}&quot; align=&quot;left&quot;&gt;\r\n      Martin\r\n    &lt;/td&gt;\r\n    &lt;td th:text=&quot;${groupOrderCustomer.totalPrice}&quot; align=&quot;right&quot;&gt;\r\n      100 kr\r\n    &lt;/td&gt;\r\n  &lt;/tr&gt;\r\n  &lt;tr&gt; &lt;!--- Missing ---&gt;\r\n    &lt;td&gt;\r\n      &lt;table th:each=&quot;orderProduct : ${groupOrderCustomer.orderProducts}&quot;&gt;\r\n        &lt;tr&gt;\r\n          &lt;td th:text=&quot;${orderProduct.quantity} + &#39;st &#39; + ${orderProduct.name}&quot; align=&quot;left&quot;&gt;\r\n            1st Kombo\r\n          &lt;/td&gt;\r\n          &lt;td th:text=&quot;${orderProduct.totalPrice}&quot; align=&quot;right&quot;&gt;\r\n            100 kr\r\n          &lt;/td&gt;\r\n        &lt;/tr&gt;\r\n      &lt;/table&gt;\r\n    &lt;/td&gt;\r\n  &lt;/tr&gt;\r\n&lt;/table&gt;\r\n```","title":"Thymeleaf not finding variable in each","body":"<p>The issue was the table structure. After the first closing <code>&lt;/tr&gt;</code> tag, I have an <code>&lt;td&gt;</code>, but I should actually have another <code>&lt;tr&gt;</code>.</p>\n<p>Broken:</p>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;table th:each=&quot;groupOrderCustomer : ${groupOrderCustomers}&quot;&gt;\n  &lt;tr&gt;\n    &lt;td th:text=&quot;${groupOrderCustomer.customerName}&quot; align=&quot;left&quot;&gt;\n      Martin\n    &lt;/td&gt;\n    &lt;td th:text=&quot;${groupOrderCustomer.totalPrice}&quot; align=&quot;right&quot;&gt;\n      100 kr\n    &lt;/td&gt;\n  &lt;/tr&gt;\n  &lt;td&gt;\n    &lt;table th:each=&quot;orderProduct : ${groupOrderCustomer.orderProducts}&quot;&gt;\n      &lt;tr&gt;\n        &lt;td th:text=&quot;${orderProduct.quantity} + 'st ' + ${orderProduct.name}&quot; align=&quot;left&quot;&gt;\n          1st Kombo\n        &lt;/td&gt;\n        &lt;td th:text=&quot;${orderProduct.totalPrice}&quot; align=&quot;right&quot;&gt;\n          100 kr\n        &lt;/td&gt;\n      &lt;/tr&gt;\n    &lt;/table&gt;\n  &lt;/td&gt;\n&lt;/table&gt;\n</code></pre>\n<p>Working:</p>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;table th:each=&quot;groupOrderCustomer : ${groupOrderCustomers}&quot;&gt;\n  &lt;tr&gt;\n    &lt;td th:text=&quot;${groupOrderCustomer.customerName}&quot; align=&quot;left&quot;&gt;\n      Martin\n    &lt;/td&gt;\n    &lt;td th:text=&quot;${groupOrderCustomer.totalPrice}&quot; align=&quot;right&quot;&gt;\n      100 kr\n    &lt;/td&gt;\n  &lt;/tr&gt;\n  &lt;tr&gt; &lt;!--- Missing ---&gt;\n    &lt;td&gt;\n      &lt;table th:each=&quot;orderProduct : ${groupOrderCustomer.orderProducts}&quot;&gt;\n        &lt;tr&gt;\n          &lt;td th:text=&quot;${orderProduct.quantity} + 'st ' + ${orderProduct.name}&quot; align=&quot;left&quot;&gt;\n            1st Kombo\n          &lt;/td&gt;\n          &lt;td th:text=&quot;${orderProduct.totalPrice}&quot; align=&quot;right&quot;&gt;\n            100 kr\n          &lt;/td&gt;\n        &lt;/tr&gt;\n      &lt;/table&gt;\n    &lt;/td&gt;\n  &lt;/tr&gt;\n&lt;/table&gt;\n</code></pre>\n"}],"owner":{"account_id":9833761,"reputation":5819,"user_id":7284779,"accept_rate":39,"display_name":"Martin Nordstr&#246;m"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73784068,"answer_count":1,"score":1,"last_activity_date":1663664268,"creation_date":1663175914,"question_id":73720859,"body_markdown":"First time using Thymeleaf and I&#39;m having a bit of trouble. I want to display a table with customers and their orderProducts. My class looks like this,\r\n```java\r\nclass GroupOrderCustomer {\r\n    private String customerName;\r\n    private double totalPrice;\r\n    private List&lt;OrderProduct&gt; orderProducts;\r\n}\r\n```\r\n\r\nWhen inspecting my list of `groupOrderCustomers` we can see this,\r\n[![enter image description here][1]][1]\r\n\r\nI also add `groupOrderCustomers` to the context of my mail,\r\n```java\r\nContext context = new Context(locale);\r\ncontext.setVariable(&quot;groupOrderCustomers&quot;, groupOrderCustomers);\r\n\r\nfinal String groupOrderConfirmationTemplate = &quot;html/groupOrderConfirmation&quot;;\r\nString htmlContent = emailTemplateEngine.process(groupOrderConfirmationTemplate, context);\r\nhelper.setText(htmlContent, true);\r\n```\r\n\r\nWhen trying to send the email I get this in my console,\r\n```\r\nException evaluating SpringEL expression: &quot;groupOrderCustomer.orderProducts&quot;\r\nEL1007E: Property or field &#39;orderProducts&#39; cannot be found on null\r\n```\r\n\r\nThis is my email,\r\n```html\r\n&lt;table th:each=&quot;groupOrderCustomer : ${groupOrderCustomers}&quot;&gt;\r\n  &lt;tr&gt;\r\n    &lt;td th:text=&quot;${groupOrderCustomer.customerName}&quot; align=&quot;left&quot;&gt;\r\n      Martin\r\n    &lt;/td&gt;\r\n    &lt;td th:text=&quot;${groupOrderCustomer.totalPrice}&quot; align=&quot;right&quot;&gt;\r\n      100 kr\r\n    &lt;/td&gt;\r\n  &lt;/tr&gt;\r\n  &lt;td&gt;\r\n    &lt;table th:each=&quot;orderProduct : ${groupOrderCustomer.orderProducts}&quot;&gt;\r\n      &lt;tr&gt;\r\n        &lt;td th:text=&quot;${orderProduct.quantity} + &#39;st &#39; + ${orderProduct.name}&quot; align=&quot;left&quot;&gt;\r\n          1st Kombo\r\n        &lt;/td&gt;\r\n        &lt;td th:text=&quot;${orderProduct.totalPrice}&quot; align=&quot;right&quot;&gt;\r\n          100 kr\r\n        &lt;/td&gt;\r\n      &lt;/tr&gt;\r\n    &lt;/table&gt;\r\n  &lt;/td&gt;\r\n&lt;/table&gt;\r\n```\r\nWhen I wrote, `th:each=&quot;orderProduct : ${groupOrderCustomer.orderProducts}&quot;`, I expected Thymeleaf to pick-up `groupOrderCustomer` from the first `th:each`. \r\n\r\nWhen commenting out the second `th:each` the email gets sent.\r\n\r\nI appreciate all the help I can get for this. Thank you!\r\n\r\n  [1]: https://i.stack.imgur.com/eMaxZ.png","title":"Thymeleaf not finding variable in each","body":"<p>First time using Thymeleaf and I'm having a bit of trouble. I want to display a table with customers and their orderProducts. My class looks like this,</p>\n<pre class=\"lang-java prettyprint-override\"><code>class GroupOrderCustomer {\n    private String customerName;\n    private double totalPrice;\n    private List&lt;OrderProduct&gt; orderProducts;\n}\n</code></pre>\n<p>When inspecting my list of <code>groupOrderCustomers</code> we can see this,\n<a href=\"https://i.stack.imgur.com/eMaxZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eMaxZ.png\" alt=\"enter image description here\" /></a></p>\n<p>I also add <code>groupOrderCustomers</code> to the context of my mail,</p>\n<pre class=\"lang-java prettyprint-override\"><code>Context context = new Context(locale);\ncontext.setVariable(&quot;groupOrderCustomers&quot;, groupOrderCustomers);\n\nfinal String groupOrderConfirmationTemplate = &quot;html/groupOrderConfirmation&quot;;\nString htmlContent = emailTemplateEngine.process(groupOrderConfirmationTemplate, context);\nhelper.setText(htmlContent, true);\n</code></pre>\n<p>When trying to send the email I get this in my console,</p>\n<pre><code>Exception evaluating SpringEL expression: &quot;groupOrderCustomer.orderProducts&quot;\nEL1007E: Property or field 'orderProducts' cannot be found on null\n</code></pre>\n<p>This is my email,</p>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;table th:each=&quot;groupOrderCustomer : ${groupOrderCustomers}&quot;&gt;\n  &lt;tr&gt;\n    &lt;td th:text=&quot;${groupOrderCustomer.customerName}&quot; align=&quot;left&quot;&gt;\n      Martin\n    &lt;/td&gt;\n    &lt;td th:text=&quot;${groupOrderCustomer.totalPrice}&quot; align=&quot;right&quot;&gt;\n      100 kr\n    &lt;/td&gt;\n  &lt;/tr&gt;\n  &lt;td&gt;\n    &lt;table th:each=&quot;orderProduct : ${groupOrderCustomer.orderProducts}&quot;&gt;\n      &lt;tr&gt;\n        &lt;td th:text=&quot;${orderProduct.quantity} + 'st ' + ${orderProduct.name}&quot; align=&quot;left&quot;&gt;\n          1st Kombo\n        &lt;/td&gt;\n        &lt;td th:text=&quot;${orderProduct.totalPrice}&quot; align=&quot;right&quot;&gt;\n          100 kr\n        &lt;/td&gt;\n      &lt;/tr&gt;\n    &lt;/table&gt;\n  &lt;/td&gt;\n&lt;/table&gt;\n</code></pre>\n<p>When I wrote, <code>th:each=&quot;orderProduct : ${groupOrderCustomer.orderProducts}&quot;</code>, I expected Thymeleaf to pick-up <code>groupOrderCustomer</code> from the first <code>th:each</code>.</p>\n<p>When commenting out the second <code>th:each</code> the email gets sent.</p>\n<p>I appreciate all the help I can get for this. Thank you!</p>\n"},{"tags":["java","arrays"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":1,"creation_date":1663336798,"post_id":73745868,"comment_id":130222355,"body_markdown":"And what is the problem? Wrong result, exception..?","body":"And what is the problem? Wrong result, exception..?"},{"owner":{"account_id":891230,"reputation":9225,"user_id":929459,"display_name":"Dmitri"},"score":1,"creation_date":1663336932,"post_id":73745868,"comment_id":130222402,"body_markdown":"You have extra semicolons after your `if`s.","body":"You have extra semicolons after your <code>if</code>s."},{"owner":{"account_id":3435599,"reputation":4037,"user_id":2878796,"display_name":"UnholySheep"},"score":0,"creation_date":1663336985,"post_id":73745868,"comment_id":130222423,"body_markdown":"`if (i == array.length)` will also never evaluate to true because your loop ends before this could happen (and `i` is scoped to the loop body)","body":"<code>if (i == array.length)</code> will also never evaluate to true because your loop ends before this could happen (and <code>i</code> is scoped to the loop body)"},{"owner":{"account_id":5279068,"reputation":895,"user_id":4215032,"display_name":"Pp88"},"score":0,"creation_date":1663337153,"post_id":73745868,"comment_id":130222488,"body_markdown":"also a `{` above `system.out.println(value+ &quot; is found at Index &quot;+(i+1));` and after the `if (i == array.length);` you have two consecutive `}`. Remove one after the if and the another above the System, are not nedded","body":"also a <code>{</code> above <code>system.out.println(value+ &quot; is found at Index &quot;+(i+1));</code> and after the <code>if (i == array.length);</code> you have two consecutive <code>}</code>. Remove one after the if and the another above the System, are not nedded"},{"owner":{"account_id":1535561,"reputation":7664,"user_id":1431720,"accept_rate":89,"display_name":"Robert"},"score":0,"creation_date":1663345059,"post_id":73745868,"comment_id":130225404,"body_markdown":"Also remove the `;` after the `for`, this makes your loop body an empty statement.","body":"Also remove the <code>;</code> after the <code>for</code>, this makes your loop body an empty statement."}],"answers":[{"tags":[],"owner":{"account_id":11227445,"reputation":11,"user_id":8236669,"display_name":"D.Price"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663663132,"creation_date":1663337470,"answer_id":73746103,"question_id":73745868,"body_markdown":"try\r\n\r\n    import java.util.Scanner;\r\n    \r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            // TODO Auto-generated method stub\r\n            int value;\r\n                            \r\n            int [] array = {10, 5, 21, 16, 11};\r\n            Scanner input = new Scanner(System.in);\r\n            \r\n            System.out.println(&quot;Enter the searched value&quot;);\r\n            value = input.nextInt();\r\n            input.close();\r\n    \r\n            int i = 0;\r\n            while( i &lt; array.length )\r\n            {\r\n              if (array[ i ] == value)\r\n              {\r\n                System.out.println(value+ &quot; is found at Index &quot;+(i+1));\r\n                break;\r\n              }\r\n              i++;\r\n            }\r\n            if (i == array.length)\r\n            {\r\n              System.out.println(value+ &quot; is not in the list&quot;);\r\n            }\r\n        }\r\n    }","title":"Performing Linear search in Java","body":"<p>try</p>\n<pre><code>import java.util.Scanner;\n\npublic class Main {\n    public static void main(String[] args) {\n        // TODO Auto-generated method stub\n        int value;\n                        \n        int [] array = {10, 5, 21, 16, 11};\n        Scanner input = new Scanner(System.in);\n        \n        System.out.println(&quot;Enter the searched value&quot;);\n        value = input.nextInt();\n        input.close();\n\n        int i = 0;\n        while( i &lt; array.length )\n        {\n          if (array[ i ] == value)\n          {\n            System.out.println(value+ &quot; is found at Index &quot;+(i+1));\n            break;\n          }\n          i++;\n        }\n        if (i == array.length)\n        {\n          System.out.println(value+ &quot; is not in the list&quot;);\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13155752,"reputation":1,"user_id":10230988,"display_name":"Brijesh Yadav"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663345838,"creation_date":1663345771,"answer_id":73747850,"question_id":73745868,"body_markdown":"Try this \r\n\r\n    import java.util.Scanner;\r\n\r\n    public class Main {\r\n    public static void main(String args[]) {\r\n\r\n        int value;\r\n\r\n        int[] array = {10, 5, 21, 16, 11};\r\n        Scanner input = new Scanner(System.in);\r\n\r\n        System.out.println(&quot;Enter the searched value&quot;);\r\n        value = input.nextInt();\r\n        boolean isValueFound = false;\r\n        int index = 0;\r\n        for (int i = 0; i &lt; array.length; i++) {\r\n            if (array[i] == value) {\r\n                isValueFound = true;\r\n                index = i;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        if (isValueFound) {\r\n            System.out.println(value + &quot; is found at Index &quot; + (index));\r\n        } else {\r\n            System.out.println(value + &quot; is not in the list&quot;);\r\n        }\r\n\r\n      }\r\n    }\r\n","title":"Performing Linear search in Java","body":"<p>Try this</p>\n<pre><code>import java.util.Scanner;\n\npublic class Main {\npublic static void main(String args[]) {\n\n    int value;\n\n    int[] array = {10, 5, 21, 16, 11};\n    Scanner input = new Scanner(System.in);\n\n    System.out.println(&quot;Enter the searched value&quot;);\n    value = input.nextInt();\n    boolean isValueFound = false;\n    int index = 0;\n    for (int i = 0; i &lt; array.length; i++) {\n        if (array[i] == value) {\n            isValueFound = true;\n            index = i;\n\n        }\n\n    }\n\n    if (isValueFound) {\n        System.out.println(value + &quot; is found at Index &quot; + (index));\n    } else {\n        System.out.println(value + &quot; is not in the list&quot;);\n    }\n\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9537825,"reputation":1490,"user_id":7275056,"display_name":"vsfDawg"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663351773,"creation_date":1663351773,"answer_id":73748780,"question_id":73745868,"body_markdown":"You have the general concept.  Keep the search and the reporting separate.  Use the iteration to find the index and then report what you find after the iteration is complete.\r\n\r\n    public static void main(String[] args) {\r\n      // gather the inputs\r\n      int value = getUserInput();\r\n      int[] array =  {10, 5, 21, 16, 11};\r\n\r\n      // search for value in the array\r\n      int valueIndex = -1; // negative index is a flag\r\n      for (int index = 0  ; index &lt; array.length ; ++index) {\r\n        if (value == array[index]) {\r\n          valueIndex = index;\r\n          break;\r\n        }\r\n      }\r\n\r\n      // report our finding!\r\n      if (valueIndex &lt; 0) {\r\n        System.out.println(value + &quot; is not in the list&quot;);\r\n      } else {\r\n        System.out.println(value + &quot; was found at index &quot; + valueIndex);\r\n      }\r\n    }\r\n","title":"Performing Linear search in Java","body":"<p>You have the general concept.  Keep the search and the reporting separate.  Use the iteration to find the index and then report what you find after the iteration is complete.</p>\n<pre><code>public static void main(String[] args) {\n  // gather the inputs\n  int value = getUserInput();\n  int[] array =  {10, 5, 21, 16, 11};\n\n  // search for value in the array\n  int valueIndex = -1; // negative index is a flag\n  for (int index = 0  ; index &lt; array.length ; ++index) {\n    if (value == array[index]) {\n      valueIndex = index;\n      break;\n    }\n  }\n\n  // report our finding!\n  if (valueIndex &lt; 0) {\n    System.out.println(value + &quot; is not in the list&quot;);\n  } else {\n    System.out.println(value + &quot; was found at index &quot; + valueIndex);\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":26157008,"reputation":1,"user_id":19844118,"display_name":"Meh"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":235,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":3,"score":-2,"last_activity_date":1663663132,"creation_date":1663336471,"question_id":73745868,"body_markdown":"Write a Java program that stores 5 values in an array. \r\nAsk the user to input a value to look for.\r\nPerform a Linear Search to look for the inputted value.\r\n\r\n    import java.util.Scanner;\r\n    \r\n    public class Main {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\t// TODO Auto-generated method stub\r\n    \t\tint value;\r\n    \t\t\t\t\t\t\r\n    \t\tint [] array = {10, 5, 21, 16, 11};\r\n    \t\tScanner input = new Scanner(System.in);\r\n    \t\t\r\n    \t\tSystem.out.println(&quot;Enter the searched value&quot;);\r\n    \t\tvalue=input.nextInt();\r\n    \t\t\r\n    \t\tfor (int i = 0; i &lt; array.length; i++);\r\n    \t\t{\r\n    \t\tif (array [i] == value);\r\n    \t\t{\r\n    \t\t\tSystem.out.println(value+ &quot; is found at Index &quot;+(i+1));\r\n    \t\t\t{\t\r\n    \t\tif (i == array.length);\r\n    \t\t\tSystem.out.println(value+ &quot; is not in the list&quot;);\r\n    \t\t\t}\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\nI am not able to detect the errors in it. (PS I&#39;m a beginner)\r\nThank you so much for helping.","title":"Performing Linear search in Java","body":"<p>Write a Java program that stores 5 values in an array.\nAsk the user to input a value to look for.\nPerform a Linear Search to look for the inputted value.</p>\n<pre><code>import java.util.Scanner;\n\npublic class Main {\n\n    public static void main(String[] args) {\n        // TODO Auto-generated method stub\n        int value;\n                        \n        int [] array = {10, 5, 21, 16, 11};\n        Scanner input = new Scanner(System.in);\n        \n        System.out.println(&quot;Enter the searched value&quot;);\n        value=input.nextInt();\n        \n        for (int i = 0; i &lt; array.length; i++);\n        {\n        if (array [i] == value);\n        {\n            System.out.println(value+ &quot; is found at Index &quot;+(i+1));\n            {   \n        if (i == array.length);\n            System.out.println(value+ &quot; is not in the list&quot;);\n            }\n            }\n        }\n    }\n}\n</code></pre>\n<p>I am not able to detect the errors in it. (PS I'm a beginner)\nThank you so much for helping.</p>\n"},{"tags":["java","android","bluetooth"],"comments":[{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":1,"creation_date":1662899940,"post_id":73679327,"comment_id":130108495,"body_markdown":"The error message mentions &quot;requires android.permission.BLUETOOTH_CONNECT&quot;, does your app have that?","body":"The error message mentions &quot;requires android.permission.BLUETOOTH_CONNECT&quot;, does your app have that?"},{"owner":{"account_id":25267430,"reputation":21,"user_id":19097350,"display_name":"Fischer Fritz"},"score":0,"creation_date":1662900638,"post_id":73679327,"comment_id":130108614,"body_markdown":"yes in AndroidManifest i write:\n    &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH_CONNECT&quot; /&gt;\n    &lt;permission android:name=&quot;android.permission.BLUETOOTH_CONNECT&quot; /&gt;","body":"yes in AndroidManifest i write:     &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH_CONNECT&quot; /&gt;     &lt;permission android:name=&quot;android.permission.BLUETOOTH_CONNECT&quot; /&gt;"}],"answers":[{"tags":[],"owner":{"account_id":15069208,"reputation":329,"user_id":10875322,"display_name":"Gokula Krishnan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1663662868,"creation_date":1663662868,"answer_id":73783778,"question_id":73679327,"body_markdown":"BLUETOOTH_CONNECT is a run time permission. You have to explicitly request user the permission to connect. For testing purpose, I would suggest granting the permission manually via `Android Settings &gt; Apps &gt; {Your App} &gt; Permissions.` \r\n\r\nBest practice is to always check for permission before calling these Android APIs to avoid such crashes. ","title":"I have Implement Bluetooth to my app and when i click on Bluetooth on or Off the side closs and it comes a error Message","body":"<p>BLUETOOTH_CONNECT is a run time permission. You have to explicitly request user the permission to connect. For testing purpose, I would suggest granting the permission manually via <code>Android Settings &gt; Apps &gt; {Your App} &gt; Permissions.</code></p>\n<p>Best practice is to always check for permission before calling these Android APIs to avoid such crashes.</p>\n"}],"owner":{"account_id":25267430,"reputation":21,"user_id":19097350,"display_name":"Fischer Fritz"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":153,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":73783778,"answer_count":1,"score":-1,"last_activity_date":1663662868,"creation_date":1662899758,"question_id":73679327,"body_markdown":"[![Screenshot App][1]][1]\r\n\r\nI have Implement Bluetooth to my app and when i click on Bluetooth on or Off the side closs and it comes a error Message.\r\n\r\nIn line 158 startActivityForResult is crossed out and I can&#39;t find a solution in google why that is and how I can change it.\r\n\r\nin\r\n\r\nCode Main_Bluetooth:\r\n```\r\npackage com.example.feuerwerkzndanlage;\r\n\r\nimport android.Manifest;\r\nimport android.bluetooth.BluetoothAdapter;\r\nimport android.bluetooth.BluetoothDevice;\r\nimport android.bluetooth.BluetoothSocket;\r\nimport android.content.BroadcastReceiver;\r\nimport android.content.Context;\r\nimport android.content.Intent;\r\nimport android.content.IntentFilter;\r\nimport android.content.pm.PackageManager;\r\nimport android.os.Bundle;\r\nimport android.os.Handler;\r\nimport android.os.Looper;\r\nimport android.os.Message;\r\nimport android.util.Log;\r\nimport android.view.View;\r\nimport android.widget.AdapterView;\r\nimport android.widget.ArrayAdapter;\r\nimport android.widget.Button;\r\nimport android.widget.CheckBox;\r\nimport android.widget.ListView;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.core.app.ActivityCompat;\r\nimport androidx.core.content.ContextCompat;\r\n\r\nimport java.io.IOException;\r\nimport java.lang.reflect.Method;\r\nimport java.nio.charset.StandardCharsets;\r\nimport java.util.Set;\r\nimport java.util.UUID;\r\n\r\npublic class Main_Bluetooth extends AppCompatActivity {\r\n\r\n    private final String TAG = Main_Bluetooth.class.getSimpleName();\r\n\r\n    private static final UUID BT_MODULE_UUID = UUID.fromString(&quot;00001101-0000-1000-8000-00805F9B34FB&quot;); // &quot;random&quot; unique identifier\r\n\r\n    // #defines for identifying shared types between calling functions\r\n    private final static int REQUEST_ENABLE_BT = 1; // used to identify adding bluetooth names\r\n    public final static int MESSAGE_READ = 2; // used in bluetooth handler to identify message update\r\n    private final static int CONNECTING_STATUS = 3; // used in bluetooth handler to identify message status\r\n\r\n    // GUI Components\r\n    private TextView mBluetoothStatus;\r\n    private TextView mReadBuffer;\r\n\r\n    private BluetoothAdapter mBTAdapter;\r\n    private ArrayAdapter&lt;String&gt; mBTArrayAdapter;\r\n\r\n    private Handler mHandler; // Our main handler that will receive callback notifications\r\n    private ConnectedThread mConnectedThread; // bluetooth background worker thread to send and receive data\r\n    private BluetoothSocket mBTSocket = null; // bi-directional client-to-client data path\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main_bluetooth);\r\n\r\n        mBluetoothStatus = findViewById(R.id.bluetooth_status);\r\n        mReadBuffer = findViewById(R.id.read_buffer);\r\n        Button mScanBtn = findViewById(R.id.scan);\r\n        Button mOffBtn = findViewById(R.id.btoff);\r\n        Button mDiscoverBtn = findViewById(R.id.discover);\r\n        Button mListPairedDevicesBtn = findViewById(R.id.paired_btn);\r\n        CheckBox mLED1 = findViewById(R.id.checkbox_led_1);\r\n\r\n        mBTArrayAdapter = new ArrayAdapter&lt;&gt;(this, android.R.layout.simple_list_item_1);\r\n        mBTAdapter = BluetoothAdapter.getDefaultAdapter(); // get a handle on the bluetooth radio\r\n\r\n        ListView mDevicesListView = findViewById(R.id.devices_list_view);\r\n        mDevicesListView.setAdapter(mBTArrayAdapter); // assign model to view\r\n        mDevicesListView.setOnItemClickListener(mDeviceClickListener);\r\n\r\n        // Ask for location permission if not already allowed\r\n        if(ContextCompat.checkSelfPermission(this, Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED)\r\n            ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.ACCESS_COARSE_LOCATION}, 1);\r\n\r\n        mHandler = new Handler(Looper.getMainLooper()){\r\n            @Override\r\n            public void handleMessage(Message msg){\r\n                if(msg.what == MESSAGE_READ){\r\n                    String readMessage;\r\n                    readMessage = new String((byte[]) msg.obj, StandardCharsets.UTF_8);\r\n                    mReadBuffer.setText(readMessage);\r\n                }\r\n\r\n                if(msg.what == CONNECTING_STATUS){\r\n                    if(msg.arg1 == 1)\r\n                        mBluetoothStatus.setText(&quot;Connected to Device: &quot; + msg.obj);\r\n                    else\r\n                        mBluetoothStatus.setText(&quot;Connection Failed&quot;);\r\n                }\r\n            }\r\n        };\r\n\r\n        if (mBTArrayAdapter == null) {\r\n            // Device does not support Bluetooth\r\n            mBluetoothStatus.setText(&quot;Status: Bluetooth not found&quot;);\r\n            Toast.makeText(getApplicationContext(),&quot;Bluetooth device not found!&quot;,Toast.LENGTH_SHORT).show();\r\n        }\r\n        else {\r\n\r\n            mLED1.setOnClickListener(new View.OnClickListener(){\r\n                @Override\r\n                public void onClick(View v){\r\n                    if(mConnectedThread != null) //First check to make sure thread created\r\n                        mConnectedThread.write(&quot;1&quot;);\r\n                }\r\n            });\r\n\r\n\r\n            mScanBtn.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    bluetoothOn();\r\n                }\r\n            });\r\n\r\n            mOffBtn.setOnClickListener(new View.OnClickListener(){\r\n                @Override\r\n                public void onClick(View v){\r\n                    bluetoothOff();\r\n                }\r\n            });\r\n\r\n            mListPairedDevicesBtn.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v){\r\n                    listPairedDevices();\r\n                }\r\n            });\r\n\r\n            mDiscoverBtn.setOnClickListener(new View.OnClickListener(){\r\n                @Override\r\n                public void onClick(View v){\r\n                    discover();\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    private void bluetoothOn(){\r\n\r\n        Context context = getApplicationContext();\r\n        CharSequence erlauben_txt = &quot;Bitte Erlauben!&quot;;\r\n        int duration = Toast.LENGTH_SHORT;\r\n\r\n        if (ContextCompat.checkSelfPermission(this, android.Manifest.permission.ACCESS_FINE_LOCATION) == PackageManager.PERMISSION_GRANTED){\r\n            Toast.makeText(context, erlauben_txt, duration).show();\r\n        }\r\n\r\n        if (!mBTAdapter.isEnabled()) {\r\n            Intent enableBtIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);\r\n            startActivityForResult(enableBtIntent, REQUEST_ENABLE_BT);\r\n            mBluetoothStatus.setText(&quot;Bluetooth enabled&quot;);\r\n            Toast.makeText(getApplicationContext(),&quot;Bluetooth turned on&quot;,Toast.LENGTH_SHORT).show();\r\n\r\n        }\r\n        else{\r\n            Toast.makeText(getApplicationContext(),&quot;Bluetooth is already on&quot;, Toast.LENGTH_SHORT).show();\r\n        }\r\n    }\r\n\r\n    // Enter here after user selects &quot;yes&quot; or &quot;no&quot; to enabling radio\r\n    @Override\r\n    protected void onActivityResult(int requestCode, int resultCode, Intent Data) {\r\n        // Check which request we&#39;re responding to\r\n        super.onActivityResult(requestCode, resultCode, Data);\r\n        if (requestCode == REQUEST_ENABLE_BT) {\r\n            // Make sure the request was successful\r\n            if (resultCode == RESULT_OK) {\r\n                // The user picked a contact.\r\n                // The Intent&#39;s data Uri identifies which contact was selected.\r\n                mBluetoothStatus.setText(&quot;Enabled&quot;);\r\n            } else\r\n                mBluetoothStatus.setText(&quot;Disabled&quot;);\r\n        }\r\n    }\r\n\r\n    private void bluetoothOff(){\r\n\r\n        Context context = getApplicationContext();\r\n        CharSequence erlauben_txt = &quot;Bitte Erlauben!&quot;;\r\n        int duration = Toast.LENGTH_SHORT;\r\n\r\n        if (ContextCompat.checkSelfPermission(this, android.Manifest.permission.ACCESS_FINE_LOCATION) == PackageManager.PERMISSION_GRANTED){\r\n            Toast.makeText(context, erlauben_txt, duration).show();\r\n        }\r\n\r\n        mBTAdapter.disable(); // turn off\r\n        mBluetoothStatus.setText(&quot;Bluetooth disabled&quot;);\r\n        Toast.makeText(getApplicationContext(),&quot;Bluetooth turned Off&quot;, Toast.LENGTH_SHORT).show();\r\n    }\r\n\r\n    private void discover(){\r\n\r\n        Context context = getApplicationContext();\r\n        CharSequence erlauben_txt = &quot;Bitte Erlauben!&quot;;\r\n        int duration = Toast.LENGTH_SHORT;\r\n\r\n        if (ContextCompat.checkSelfPermission(this, android.Manifest.permission.ACCESS_FINE_LOCATION) == PackageManager.PERMISSION_GRANTED){\r\n            Toast.makeText(context, erlauben_txt, duration).show();\r\n        }\r\n\r\n        // Check if the device is already discovering\r\n        if(mBTAdapter.isDiscovering()){\r\n            mBTAdapter.cancelDiscovery();\r\n            Toast.makeText(getApplicationContext(),&quot;Discovery stopped&quot;,Toast.LENGTH_SHORT).show();\r\n        }\r\n        else{\r\n            if(mBTAdapter.isEnabled()) {\r\n                mBTArrayAdapter.clear(); // clear items\r\n                mBTAdapter.startDiscovery();\r\n                Toast.makeText(getApplicationContext(), &quot;Discovery started&quot;, Toast.LENGTH_SHORT).show();\r\n                registerReceiver(blReceiver, new IntentFilter(BluetoothDevice.ACTION_FOUND));\r\n            }\r\n            else{\r\n                Toast.makeText(getApplicationContext(), &quot;Bluetooth not on&quot;, Toast.LENGTH_SHORT).show();\r\n            }\r\n        }\r\n    }\r\n\r\n    final BroadcastReceiver blReceiver = new BroadcastReceiver() {\r\n        @Override\r\n        public void onReceive(Context context, Intent intent) {\r\n\r\n            CharSequence erlauben_txt = &quot;Bitte Erlauben!&quot;;\r\n            int duration = Toast.LENGTH_SHORT;\r\n\r\n            if (ContextCompat.checkSelfPermission(Main_Bluetooth.this, android.Manifest.permission.ACCESS_FINE_LOCATION) == PackageManager.PERMISSION_GRANTED){\r\n                Toast.makeText(context, erlauben_txt, duration).show();\r\n            }\r\n\r\n            String action = intent.getAction();\r\n            if(BluetoothDevice.ACTION_FOUND.equals(action)){\r\n                BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);\r\n                // add the name to the list\r\n                mBTArrayAdapter.add(device.getName() + &quot;\\n&quot; + device.getAddress());\r\n                mBTArrayAdapter.notifyDataSetChanged();\r\n            }\r\n        }\r\n    };\r\n\r\n    final void listPairedDevices(){\r\n\r\n\r\n        Context context = getApplicationContext();\r\n        CharSequence erlauben_txt = &quot;Bitte Erlauben!&quot;;\r\n        int duration = Toast.LENGTH_SHORT;\r\n\r\n        if (ContextCompat.checkSelfPermission(this, android.Manifest.permission.ACCESS_FINE_LOCATION) == PackageManager.PERMISSION_GRANTED){\r\n            Toast.makeText(context, erlauben_txt, duration).show();\r\n        }\r\n\r\n        mBTArrayAdapter.clear();\r\n        Set&lt;BluetoothDevice&gt; mPairedDevices = mBTAdapter.getBondedDevices();\r\n        if(mBTAdapter.isEnabled()) {\r\n            // put it&#39;s one to the adapter\r\n            for (BluetoothDevice device : mPairedDevices)\r\n                mBTArrayAdapter.add(device.getName() + &quot;\\n&quot; + device.getAddress());\r\n\r\n            Toast.makeText(getApplicationContext(), &quot;Show Paired Devices&quot;, Toast.LENGTH_SHORT).show();\r\n        }\r\n        else\r\n            Toast.makeText(getApplicationContext(), &quot;Bluetooth not on&quot;, Toast.LENGTH_SHORT).show();\r\n    }\r\n\r\n    private AdapterView.OnItemClickListener mDeviceClickListener = new AdapterView.OnItemClickListener() {\r\n        @Override\r\n        public void onItemClick(AdapterView&lt;?&gt; parent, View view, int position, long id) {\r\n\r\n            if(!mBTAdapter.isEnabled()) {\r\n                Toast.makeText(getBaseContext(), &quot;Bluetooth not on&quot;, Toast.LENGTH_SHORT).show();\r\n                return;\r\n            }\r\n\r\n            mBluetoothStatus.setText(&quot;Connecting...&quot;);\r\n            // Get the device MAC address, which is the last 17 chars in the View\r\n            String info = ((TextView) view).getText().toString();\r\n            final String address = info.substring(info.length() - 17);\r\n            final String name = info.substring(0,info.length() - 17);\r\n\r\n            // Spawn a new thread to avoid blocking the GUI one\r\n            new Thread()\r\n            {\r\n                @Override\r\n                public void run() {\r\n\r\n\r\n                    Context context = getApplicationContext();\r\n                    CharSequence erlauben_txt = &quot;Bitte Erlauben!&quot;;\r\n                    int duration = Toast.LENGTH_SHORT;\r\n\r\n                    if (ContextCompat.checkSelfPermission(Main_Bluetooth.this, android.Manifest.permission.ACCESS_FINE_LOCATION) == PackageManager.PERMISSION_GRANTED){\r\n                        Toast.makeText(context, erlauben_txt, duration).show();\r\n                    }\r\n\r\n                    boolean fail = false;\r\n\r\n                    BluetoothDevice device = mBTAdapter.getRemoteDevice(address);\r\n\r\n                    try {\r\n                        mBTSocket = createBluetoothSocket(device);\r\n                    } catch (IOException e) {\r\n                        fail = true;\r\n                        Toast.makeText(getBaseContext(), &quot;Socket creation failed&quot;, Toast.LENGTH_SHORT).show();\r\n                    }\r\n                    // Establish the Bluetooth socket connection.\r\n                    try {\r\n                        mBTSocket.connect();\r\n                    } catch (IOException e) {\r\n                        try {\r\n                            fail = true;\r\n                            mBTSocket.close();\r\n                            mHandler.obtainMessage(CONNECTING_STATUS, -1, -1)\r\n                                    .sendToTarget();\r\n                        } catch (IOException e2) {\r\n                            //insert code to deal with this\r\n                            Toast.makeText(getBaseContext(), &quot;Socket creation failed&quot;, Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    }\r\n                    if(!fail) {\r\n                        mConnectedThread = new ConnectedThread(mBTSocket, mHandler);\r\n                        mConnectedThread.start();\r\n\r\n                        mHandler.obtainMessage(CONNECTING_STATUS, 1, -1, name)\r\n                                .sendToTarget();\r\n                    }\r\n                }\r\n            }.start();\r\n        }\r\n    };\r\n\r\n    private BluetoothSocket createBluetoothSocket(BluetoothDevice device) throws IOException {\r\n\r\n        Context context = getApplicationContext();\r\n        CharSequence erlauben_txt = &quot;Bitte Erlauben!&quot;;\r\n        int duration = Toast.LENGTH_SHORT;\r\n\r\n        if (ContextCompat.checkSelfPermission(this, android.Manifest.permission.ACCESS_FINE_LOCATION) == PackageManager.PERMISSION_GRANTED){\r\n            Toast.makeText(context, erlauben_txt, duration).show();\r\n        }\r\n\r\n        try {\r\n            final Method m = device.getClass().getMethod(&quot;createInsecureRfcommSocketToServiceRecord&quot;, UUID.class);\r\n            return (BluetoothSocket) m.invoke(device, BT_MODULE_UUID);\r\n        } catch (Exception e) {\r\n            Log.e(TAG, &quot;Could not create Insecure RFComm Connection&quot;,e);\r\n        }\r\n        return  device.createRfcommSocketToServiceRecord(BT_MODULE_UUID);\r\n    }\r\n}\r\n\r\n```\r\n\r\nCode ConnectedThread:\r\n```\r\npackage com.example.feuerwerkzndanlage;\r\n\r\nimport android.bluetooth.BluetoothSocket;\r\nimport android.os.Handler;\r\nimport android.os.SystemClock;\r\n\r\nimport java.io.IOException;\r\nimport java.io.InputStream;\r\nimport java.io.OutputStream;\r\n\r\npublic class ConnectedThread extends Thread {\r\n    private final BluetoothSocket mmSocket;\r\n    private final InputStream mmInStream;\r\n    private final OutputStream mmOutStream;\r\n    private final Handler mHandler;\r\n\r\n    public ConnectedThread(BluetoothSocket socket, Handler handler) {\r\n        mmSocket = socket;\r\n        mHandler = handler;\r\n        InputStream tmpIn = null;\r\n        OutputStream tmpOut = null;\r\n\r\n        // Get the input and output streams, using temp objects because\r\n        // member streams are final\r\n        try {\r\n            tmpIn = socket.getInputStream();\r\n            tmpOut = socket.getOutputStream();\r\n        } catch (IOException e) { }\r\n\r\n        mmInStream = tmpIn;\r\n        mmOutStream = tmpOut;\r\n    }\r\n\r\n    @Override\r\n    public void run() {\r\n        byte[] buffer = new byte[1024];  // buffer store for the stream\r\n        int bytes; // bytes returned from read()\r\n        // Keep listening to the InputStream until an exception occurs\r\n        while (true) {\r\n            try {\r\n                // Read from the InputStream\r\n                bytes = mmInStream.available();\r\n                if(bytes != 0) {\r\n                    buffer = new byte[1024];\r\n                    SystemClock.sleep(100); //pause and wait for rest of data. Adjust this depending on your sending speed.\r\n                    bytes = mmInStream.available(); // how many bytes are ready to be read?\r\n                    bytes = mmInStream.read(buffer, 0, bytes); // record how many bytes we actually read\r\n                    mHandler.obtainMessage(Main_Bluetooth.MESSAGE_READ, bytes, -1, buffer)\r\n                            .sendToTarget(); // Send the obtained bytes to the UI activity\r\n                }\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    /* Call this from the main activity to send data to the remote device */\r\n    public void write(String input) {\r\n        byte[] bytes = input.getBytes();           //converts entered String into bytes\r\n        try {\r\n            mmOutStream.write(bytes);\r\n        } catch (IOException e) { }\r\n    }\r\n\r\n    /* Call this from the main activity to shutdown the connection */\r\n    public void cancel() {\r\n        try {\r\n            mmSocket.close();\r\n        } catch (IOException e) { }\r\n    }\r\n}\r\n```\r\n\r\nError:\r\n```2022-09-11 14:20:39.825 25028-25028/com.example.myapplication E/AndroidRuntime: FATAL EXCEPTION: main\r\n    Process: com.example.myapplication, PID: 25028\r\n    java.lang.SecurityException: Permission Denial: starting Intent { act=android.bluetooth.adapter.action.REQUEST_ENABLE cmp=com.android.settings/.bluetooth.RequestPermissionActivity } from ProcessRecord{ec058e4 25028:com.example.myapplication/u0a446} (pid=25028, uid=10446) requires android.permission.BLUETOOTH_CONNECT\r\n        at android.os.Parcel.createExceptionOrNull(Parcel.java:2425)\r\n        at android.os.Parcel.createException(Parcel.java:2409)\r\n        at android.os.Parcel.readException(Parcel.java:2392)\r\n        at android.os.Parcel.readException(Parcel.java:2334)\r\n        at android.app.IActivityTaskManager$Stub$Proxy.startActivity(IActivityTaskManager.java:2607)\r\n        at android.app.Instrumentation.execStartActivity(Instrumentation.java:1743)\r\n        at android.app.Activity.startActivityForResult(Activity.java:5541)\r\n        at androidx.activity.ComponentActivity.startActivityForResult(ComponentActivity.java:712)\r\n        at android.app.Activity.startActivityForResult(Activity.java:5494)\r\n        at androidx.activity.ComponentActivity.startActivityForResult(ComponentActivity.java:693)\r\n        at com.example.feuerwerkzndanlage.Main_Bluetooth.bluetoothOn(Main_Bluetooth.java:158)\r\n        at com.example.feuerwerkzndanlage.Main_Bluetooth.access$300(Main_Bluetooth.java:36)\r\n        at com.example.feuerwerkzndanlage.Main_Bluetooth$3.onClick(Main_Bluetooth.java:119)\r\n        at android.view.View.performClick(View.java:7753)\r\n        at android.view.View.performClickInternal(View.java:7730)\r\n        at android.view.View.access$3700(View.java:861)\r\n        at android.view.View$PerformClick.run(View.java:29136)\r\n        at android.os.Handler.handleCallback(Handler.java:938)\r\n        at android.os.Handler.dispatchMessage(Handler.java:99)\r\n        at android.os.Looper.loopOnce(Looper.java:210)\r\n        at android.os.Looper.loop(Looper.java:299)\r\n        at android.app.ActivityThread.main(ActivityThread.java:8105)\r\n        at java.lang.reflect.Method.invoke(Native Method)\r\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:556)\r\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1045)\r\n     Caused by: android.os.RemoteException: Remote stack trace:\r\n        at com.android.server.wm.ActivityTaskSupervisor.checkStartAnyActivityPermission(ActivityTaskSupervisor.java:1115)\r\n        at com.android.server.wm.ActivityStarter.executeRequest(ActivityStarter.java:1072)\r\n        at com.android.server.wm.ActivityStarter.execute(ActivityStarter.java:734)\r\n        at com.android.server.wm.ActivityTaskManagerService.startActivityAsUser(ActivityTaskManagerService.java:1276)\r\n        at com.android.server.wm.ActivityTaskManagerService.startActivityAsUser(ActivityTaskManagerService.java:1246)```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/gMrcb.jpg","title":"I have Implement Bluetooth to my app and when i click on Bluetooth on or Off the side closs and it comes a error Message","body":"<p>[![Screenshot App][1]][1]</p>\n<p>I have Implement Bluetooth to my app and when i click on Bluetooth on or Off the side closs and it comes a error Message.</p>\n<p>In line 158 startActivityForResult is crossed out and I can't find a solution in google why that is and how I can change it.</p>\n<p>in</p>\n<p>Code Main_Bluetooth:</p>\n<pre><code>package com.example.feuerwerkzndanlage;\n\nimport android.Manifest;\nimport android.bluetooth.BluetoothAdapter;\nimport android.bluetooth.BluetoothDevice;\nimport android.bluetooth.BluetoothSocket;\nimport android.content.BroadcastReceiver;\nimport android.content.Context;\nimport android.content.Intent;\nimport android.content.IntentFilter;\nimport android.content.pm.PackageManager;\nimport android.os.Bundle;\nimport android.os.Handler;\nimport android.os.Looper;\nimport android.os.Message;\nimport android.util.Log;\nimport android.view.View;\nimport android.widget.AdapterView;\nimport android.widget.ArrayAdapter;\nimport android.widget.Button;\nimport android.widget.CheckBox;\nimport android.widget.ListView;\nimport android.widget.TextView;\nimport android.widget.Toast;\n\nimport androidx.appcompat.app.AppCompatActivity;\nimport androidx.core.app.ActivityCompat;\nimport androidx.core.content.ContextCompat;\n\nimport java.io.IOException;\nimport java.lang.reflect.Method;\nimport java.nio.charset.StandardCharsets;\nimport java.util.Set;\nimport java.util.UUID;\n\npublic class Main_Bluetooth extends AppCompatActivity {\n\n    private final String TAG = Main_Bluetooth.class.getSimpleName();\n\n    private static final UUID BT_MODULE_UUID = UUID.fromString(&quot;00001101-0000-1000-8000-00805F9B34FB&quot;); // &quot;random&quot; unique identifier\n\n    // #defines for identifying shared types between calling functions\n    private final static int REQUEST_ENABLE_BT = 1; // used to identify adding bluetooth names\n    public final static int MESSAGE_READ = 2; // used in bluetooth handler to identify message update\n    private final static int CONNECTING_STATUS = 3; // used in bluetooth handler to identify message status\n\n    // GUI Components\n    private TextView mBluetoothStatus;\n    private TextView mReadBuffer;\n\n    private BluetoothAdapter mBTAdapter;\n    private ArrayAdapter&lt;String&gt; mBTArrayAdapter;\n\n    private Handler mHandler; // Our main handler that will receive callback notifications\n    private ConnectedThread mConnectedThread; // bluetooth background worker thread to send and receive data\n    private BluetoothSocket mBTSocket = null; // bi-directional client-to-client data path\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main_bluetooth);\n\n        mBluetoothStatus = findViewById(R.id.bluetooth_status);\n        mReadBuffer = findViewById(R.id.read_buffer);\n        Button mScanBtn = findViewById(R.id.scan);\n        Button mOffBtn = findViewById(R.id.btoff);\n        Button mDiscoverBtn = findViewById(R.id.discover);\n        Button mListPairedDevicesBtn = findViewById(R.id.paired_btn);\n        CheckBox mLED1 = findViewById(R.id.checkbox_led_1);\n\n        mBTArrayAdapter = new ArrayAdapter&lt;&gt;(this, android.R.layout.simple_list_item_1);\n        mBTAdapter = BluetoothAdapter.getDefaultAdapter(); // get a handle on the bluetooth radio\n\n        ListView mDevicesListView = findViewById(R.id.devices_list_view);\n        mDevicesListView.setAdapter(mBTArrayAdapter); // assign model to view\n        mDevicesListView.setOnItemClickListener(mDeviceClickListener);\n\n        // Ask for location permission if not already allowed\n        if(ContextCompat.checkSelfPermission(this, Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED)\n            ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.ACCESS_COARSE_LOCATION}, 1);\n\n        mHandler = new Handler(Looper.getMainLooper()){\n            @Override\n            public void handleMessage(Message msg){\n                if(msg.what == MESSAGE_READ){\n                    String readMessage;\n                    readMessage = new String((byte[]) msg.obj, StandardCharsets.UTF_8);\n                    mReadBuffer.setText(readMessage);\n                }\n\n                if(msg.what == CONNECTING_STATUS){\n                    if(msg.arg1 == 1)\n                        mBluetoothStatus.setText(&quot;Connected to Device: &quot; + msg.obj);\n                    else\n                        mBluetoothStatus.setText(&quot;Connection Failed&quot;);\n                }\n            }\n        };\n\n        if (mBTArrayAdapter == null) {\n            // Device does not support Bluetooth\n            mBluetoothStatus.setText(&quot;Status: Bluetooth not found&quot;);\n            Toast.makeText(getApplicationContext(),&quot;Bluetooth device not found!&quot;,Toast.LENGTH_SHORT).show();\n        }\n        else {\n\n            mLED1.setOnClickListener(new View.OnClickListener(){\n                @Override\n                public void onClick(View v){\n                    if(mConnectedThread != null) //First check to make sure thread created\n                        mConnectedThread.write(&quot;1&quot;);\n                }\n            });\n\n\n            mScanBtn.setOnClickListener(new View.OnClickListener() {\n                @Override\n                public void onClick(View v) {\n                    bluetoothOn();\n                }\n            });\n\n            mOffBtn.setOnClickListener(new View.OnClickListener(){\n                @Override\n                public void onClick(View v){\n                    bluetoothOff();\n                }\n            });\n\n            mListPairedDevicesBtn.setOnClickListener(new View.OnClickListener() {\n                @Override\n                public void onClick(View v){\n                    listPairedDevices();\n                }\n            });\n\n            mDiscoverBtn.setOnClickListener(new View.OnClickListener(){\n                @Override\n                public void onClick(View v){\n                    discover();\n                }\n            });\n        }\n    }\n\n    private void bluetoothOn(){\n\n        Context context = getApplicationContext();\n        CharSequence erlauben_txt = &quot;Bitte Erlauben!&quot;;\n        int duration = Toast.LENGTH_SHORT;\n\n        if (ContextCompat.checkSelfPermission(this, android.Manifest.permission.ACCESS_FINE_LOCATION) == PackageManager.PERMISSION_GRANTED){\n            Toast.makeText(context, erlauben_txt, duration).show();\n        }\n\n        if (!mBTAdapter.isEnabled()) {\n            Intent enableBtIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);\n            startActivityForResult(enableBtIntent, REQUEST_ENABLE_BT);\n            mBluetoothStatus.setText(&quot;Bluetooth enabled&quot;);\n            Toast.makeText(getApplicationContext(),&quot;Bluetooth turned on&quot;,Toast.LENGTH_SHORT).show();\n\n        }\n        else{\n            Toast.makeText(getApplicationContext(),&quot;Bluetooth is already on&quot;, Toast.LENGTH_SHORT).show();\n        }\n    }\n\n    // Enter here after user selects &quot;yes&quot; or &quot;no&quot; to enabling radio\n    @Override\n    protected void onActivityResult(int requestCode, int resultCode, Intent Data) {\n        // Check which request we're responding to\n        super.onActivityResult(requestCode, resultCode, Data);\n        if (requestCode == REQUEST_ENABLE_BT) {\n            // Make sure the request was successful\n            if (resultCode == RESULT_OK) {\n                // The user picked a contact.\n                // The Intent's data Uri identifies which contact was selected.\n                mBluetoothStatus.setText(&quot;Enabled&quot;);\n            } else\n                mBluetoothStatus.setText(&quot;Disabled&quot;);\n        }\n    }\n\n    private void bluetoothOff(){\n\n        Context context = getApplicationContext();\n        CharSequence erlauben_txt = &quot;Bitte Erlauben!&quot;;\n        int duration = Toast.LENGTH_SHORT;\n\n        if (ContextCompat.checkSelfPermission(this, android.Manifest.permission.ACCESS_FINE_LOCATION) == PackageManager.PERMISSION_GRANTED){\n            Toast.makeText(context, erlauben_txt, duration).show();\n        }\n\n        mBTAdapter.disable(); // turn off\n        mBluetoothStatus.setText(&quot;Bluetooth disabled&quot;);\n        Toast.makeText(getApplicationContext(),&quot;Bluetooth turned Off&quot;, Toast.LENGTH_SHORT).show();\n    }\n\n    private void discover(){\n\n        Context context = getApplicationContext();\n        CharSequence erlauben_txt = &quot;Bitte Erlauben!&quot;;\n        int duration = Toast.LENGTH_SHORT;\n\n        if (ContextCompat.checkSelfPermission(this, android.Manifest.permission.ACCESS_FINE_LOCATION) == PackageManager.PERMISSION_GRANTED){\n            Toast.makeText(context, erlauben_txt, duration).show();\n        }\n\n        // Check if the device is already discovering\n        if(mBTAdapter.isDiscovering()){\n            mBTAdapter.cancelDiscovery();\n            Toast.makeText(getApplicationContext(),&quot;Discovery stopped&quot;,Toast.LENGTH_SHORT).show();\n        }\n        else{\n            if(mBTAdapter.isEnabled()) {\n                mBTArrayAdapter.clear(); // clear items\n                mBTAdapter.startDiscovery();\n                Toast.makeText(getApplicationContext(), &quot;Discovery started&quot;, Toast.LENGTH_SHORT).show();\n                registerReceiver(blReceiver, new IntentFilter(BluetoothDevice.ACTION_FOUND));\n            }\n            else{\n                Toast.makeText(getApplicationContext(), &quot;Bluetooth not on&quot;, Toast.LENGTH_SHORT).show();\n            }\n        }\n    }\n\n    final BroadcastReceiver blReceiver = new BroadcastReceiver() {\n        @Override\n        public void onReceive(Context context, Intent intent) {\n\n            CharSequence erlauben_txt = &quot;Bitte Erlauben!&quot;;\n            int duration = Toast.LENGTH_SHORT;\n\n            if (ContextCompat.checkSelfPermission(Main_Bluetooth.this, android.Manifest.permission.ACCESS_FINE_LOCATION) == PackageManager.PERMISSION_GRANTED){\n                Toast.makeText(context, erlauben_txt, duration).show();\n            }\n\n            String action = intent.getAction();\n            if(BluetoothDevice.ACTION_FOUND.equals(action)){\n                BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);\n                // add the name to the list\n                mBTArrayAdapter.add(device.getName() + &quot;\\n&quot; + device.getAddress());\n                mBTArrayAdapter.notifyDataSetChanged();\n            }\n        }\n    };\n\n    final void listPairedDevices(){\n\n\n        Context context = getApplicationContext();\n        CharSequence erlauben_txt = &quot;Bitte Erlauben!&quot;;\n        int duration = Toast.LENGTH_SHORT;\n\n        if (ContextCompat.checkSelfPermission(this, android.Manifest.permission.ACCESS_FINE_LOCATION) == PackageManager.PERMISSION_GRANTED){\n            Toast.makeText(context, erlauben_txt, duration).show();\n        }\n\n        mBTArrayAdapter.clear();\n        Set&lt;BluetoothDevice&gt; mPairedDevices = mBTAdapter.getBondedDevices();\n        if(mBTAdapter.isEnabled()) {\n            // put it's one to the adapter\n            for (BluetoothDevice device : mPairedDevices)\n                mBTArrayAdapter.add(device.getName() + &quot;\\n&quot; + device.getAddress());\n\n            Toast.makeText(getApplicationContext(), &quot;Show Paired Devices&quot;, Toast.LENGTH_SHORT).show();\n        }\n        else\n            Toast.makeText(getApplicationContext(), &quot;Bluetooth not on&quot;, Toast.LENGTH_SHORT).show();\n    }\n\n    private AdapterView.OnItemClickListener mDeviceClickListener = new AdapterView.OnItemClickListener() {\n        @Override\n        public void onItemClick(AdapterView&lt;?&gt; parent, View view, int position, long id) {\n\n            if(!mBTAdapter.isEnabled()) {\n                Toast.makeText(getBaseContext(), &quot;Bluetooth not on&quot;, Toast.LENGTH_SHORT).show();\n                return;\n            }\n\n            mBluetoothStatus.setText(&quot;Connecting...&quot;);\n            // Get the device MAC address, which is the last 17 chars in the View\n            String info = ((TextView) view).getText().toString();\n            final String address = info.substring(info.length() - 17);\n            final String name = info.substring(0,info.length() - 17);\n\n            // Spawn a new thread to avoid blocking the GUI one\n            new Thread()\n            {\n                @Override\n                public void run() {\n\n\n                    Context context = getApplicationContext();\n                    CharSequence erlauben_txt = &quot;Bitte Erlauben!&quot;;\n                    int duration = Toast.LENGTH_SHORT;\n\n                    if (ContextCompat.checkSelfPermission(Main_Bluetooth.this, android.Manifest.permission.ACCESS_FINE_LOCATION) == PackageManager.PERMISSION_GRANTED){\n                        Toast.makeText(context, erlauben_txt, duration).show();\n                    }\n\n                    boolean fail = false;\n\n                    BluetoothDevice device = mBTAdapter.getRemoteDevice(address);\n\n                    try {\n                        mBTSocket = createBluetoothSocket(device);\n                    } catch (IOException e) {\n                        fail = true;\n                        Toast.makeText(getBaseContext(), &quot;Socket creation failed&quot;, Toast.LENGTH_SHORT).show();\n                    }\n                    // Establish the Bluetooth socket connection.\n                    try {\n                        mBTSocket.connect();\n                    } catch (IOException e) {\n                        try {\n                            fail = true;\n                            mBTSocket.close();\n                            mHandler.obtainMessage(CONNECTING_STATUS, -1, -1)\n                                    .sendToTarget();\n                        } catch (IOException e2) {\n                            //insert code to deal with this\n                            Toast.makeText(getBaseContext(), &quot;Socket creation failed&quot;, Toast.LENGTH_SHORT).show();\n                        }\n                    }\n                    if(!fail) {\n                        mConnectedThread = new ConnectedThread(mBTSocket, mHandler);\n                        mConnectedThread.start();\n\n                        mHandler.obtainMessage(CONNECTING_STATUS, 1, -1, name)\n                                .sendToTarget();\n                    }\n                }\n            }.start();\n        }\n    };\n\n    private BluetoothSocket createBluetoothSocket(BluetoothDevice device) throws IOException {\n\n        Context context = getApplicationContext();\n        CharSequence erlauben_txt = &quot;Bitte Erlauben!&quot;;\n        int duration = Toast.LENGTH_SHORT;\n\n        if (ContextCompat.checkSelfPermission(this, android.Manifest.permission.ACCESS_FINE_LOCATION) == PackageManager.PERMISSION_GRANTED){\n            Toast.makeText(context, erlauben_txt, duration).show();\n        }\n\n        try {\n            final Method m = device.getClass().getMethod(&quot;createInsecureRfcommSocketToServiceRecord&quot;, UUID.class);\n            return (BluetoothSocket) m.invoke(device, BT_MODULE_UUID);\n        } catch (Exception e) {\n            Log.e(TAG, &quot;Could not create Insecure RFComm Connection&quot;,e);\n        }\n        return  device.createRfcommSocketToServiceRecord(BT_MODULE_UUID);\n    }\n}\n\n</code></pre>\n<p>Code ConnectedThread:</p>\n<pre><code>package com.example.feuerwerkzndanlage;\n\nimport android.bluetooth.BluetoothSocket;\nimport android.os.Handler;\nimport android.os.SystemClock;\n\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.OutputStream;\n\npublic class ConnectedThread extends Thread {\n    private final BluetoothSocket mmSocket;\n    private final InputStream mmInStream;\n    private final OutputStream mmOutStream;\n    private final Handler mHandler;\n\n    public ConnectedThread(BluetoothSocket socket, Handler handler) {\n        mmSocket = socket;\n        mHandler = handler;\n        InputStream tmpIn = null;\n        OutputStream tmpOut = null;\n\n        // Get the input and output streams, using temp objects because\n        // member streams are final\n        try {\n            tmpIn = socket.getInputStream();\n            tmpOut = socket.getOutputStream();\n        } catch (IOException e) { }\n\n        mmInStream = tmpIn;\n        mmOutStream = tmpOut;\n    }\n\n    @Override\n    public void run() {\n        byte[] buffer = new byte[1024];  // buffer store for the stream\n        int bytes; // bytes returned from read()\n        // Keep listening to the InputStream until an exception occurs\n        while (true) {\n            try {\n                // Read from the InputStream\n                bytes = mmInStream.available();\n                if(bytes != 0) {\n                    buffer = new byte[1024];\n                    SystemClock.sleep(100); //pause and wait for rest of data. Adjust this depending on your sending speed.\n                    bytes = mmInStream.available(); // how many bytes are ready to be read?\n                    bytes = mmInStream.read(buffer, 0, bytes); // record how many bytes we actually read\n                    mHandler.obtainMessage(Main_Bluetooth.MESSAGE_READ, bytes, -1, buffer)\n                            .sendToTarget(); // Send the obtained bytes to the UI activity\n                }\n            } catch (IOException e) {\n                e.printStackTrace();\n\n                break;\n            }\n        }\n    }\n\n    /* Call this from the main activity to send data to the remote device */\n    public void write(String input) {\n        byte[] bytes = input.getBytes();           //converts entered String into bytes\n        try {\n            mmOutStream.write(bytes);\n        } catch (IOException e) { }\n    }\n\n    /* Call this from the main activity to shutdown the connection */\n    public void cancel() {\n        try {\n            mmSocket.close();\n        } catch (IOException e) { }\n    }\n}\n</code></pre>\n<p>Error:</p>\n<pre><code>    Process: com.example.myapplication, PID: 25028\n    java.lang.SecurityException: Permission Denial: starting Intent { act=android.bluetooth.adapter.action.REQUEST_ENABLE cmp=com.android.settings/.bluetooth.RequestPermissionActivity } from ProcessRecord{ec058e4 25028:com.example.myapplication/u0a446} (pid=25028, uid=10446) requires android.permission.BLUETOOTH_CONNECT\n        at android.os.Parcel.createExceptionOrNull(Parcel.java:2425)\n        at android.os.Parcel.createException(Parcel.java:2409)\n        at android.os.Parcel.readException(Parcel.java:2392)\n        at android.os.Parcel.readException(Parcel.java:2334)\n        at android.app.IActivityTaskManager$Stub$Proxy.startActivity(IActivityTaskManager.java:2607)\n        at android.app.Instrumentation.execStartActivity(Instrumentation.java:1743)\n        at android.app.Activity.startActivityForResult(Activity.java:5541)\n        at androidx.activity.ComponentActivity.startActivityForResult(ComponentActivity.java:712)\n        at android.app.Activity.startActivityForResult(Activity.java:5494)\n        at androidx.activity.ComponentActivity.startActivityForResult(ComponentActivity.java:693)\n        at com.example.feuerwerkzndanlage.Main_Bluetooth.bluetoothOn(Main_Bluetooth.java:158)\n        at com.example.feuerwerkzndanlage.Main_Bluetooth.access$300(Main_Bluetooth.java:36)\n        at com.example.feuerwerkzndanlage.Main_Bluetooth$3.onClick(Main_Bluetooth.java:119)\n        at android.view.View.performClick(View.java:7753)\n        at android.view.View.performClickInternal(View.java:7730)\n        at android.view.View.access$3700(View.java:861)\n        at android.view.View$PerformClick.run(View.java:29136)\n        at android.os.Handler.handleCallback(Handler.java:938)\n        at android.os.Handler.dispatchMessage(Handler.java:99)\n        at android.os.Looper.loopOnce(Looper.java:210)\n        at android.os.Looper.loop(Looper.java:299)\n        at android.app.ActivityThread.main(ActivityThread.java:8105)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:556)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1045)\n     Caused by: android.os.RemoteException: Remote stack trace:\n        at com.android.server.wm.ActivityTaskSupervisor.checkStartAnyActivityPermission(ActivityTaskSupervisor.java:1115)\n        at com.android.server.wm.ActivityStarter.executeRequest(ActivityStarter.java:1072)\n        at com.android.server.wm.ActivityStarter.execute(ActivityStarter.java:734)\n        at com.android.server.wm.ActivityTaskManagerService.startActivityAsUser(ActivityTaskManagerService.java:1276)\n        at com.android.server.wm.ActivityTaskManagerService.startActivityAsUser(ActivityTaskManagerService.java:1246)```\n\n\n  [1]: https://i.stack.imgur.com/gMrcb.jpg\n</code></pre>\n"},{"tags":["java","uml"],"comments":[{"owner":{"account_id":2296898,"reputation":12966,"user_id":2018133,"accept_rate":100,"display_name":"Geert Bellekens"},"score":0,"creation_date":1663662014,"post_id":73783382,"comment_id":130286640,"body_markdown":"Those are no associaitons. The top one looks like a dependency. The bottom one is not a valid UML connector. The author probably meant to show a Realization, but that has a non filled, closed arrow head.","body":"Those are no associaitons. The top one looks like a dependency. The bottom one is not a valid UML connector. The author probably meant to show a Realization, but that has a non filled, closed arrow head."},{"owner":{"account_id":4118713,"reputation":35681,"user_id":3379653,"accept_rate":82,"display_name":"qwerty_so"},"score":1,"creation_date":1663669667,"post_id":73783382,"comment_id":130289197,"body_markdown":"The left two filled arrows are also wrong.","body":"The left two filled arrows are also wrong."}],"answers":[{"tags":[],"owner":{"account_id":2248300,"reputation":104,"user_id":2007077,"accept_rate":75,"display_name":"Alexey"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1663662410,"creation_date":1663662410,"answer_id":73783669,"question_id":73783382,"body_markdown":"1. Is just a dependency. This Board Interface does not have Piece enum as a part of the class but works with it.\r\n\r\nFor example: `enum Piece{GREEN, BLUE}`, and \r\n```\r\nclass BoardFactory {\r\n\r\n  Board create(Piece piece) {\r\n    if(piece == Piece.GREEN) {\r\n      return new GreenBoard();\r\n    }\r\n  }\r\n\r\n}\r\n```\r\n2. This one is even more simple. It is a realization of the interface.\r\n`BoardController implements BoardUI`","title":"UML Class Diagram (Java Related) Difference Between Dotted and Dashed Lines","body":"<ol>\n<li>Is just a dependency. This Board Interface does not have Piece enum as a part of the class but works with it.</li>\n</ol>\n<p>For example: <code>enum Piece{GREEN, BLUE}</code>, and</p>\n<pre><code>class BoardFactory {\n\n  Board create(Piece piece) {\n    if(piece == Piece.GREEN) {\n      return new GreenBoard();\n    }\n  }\n\n}\n</code></pre>\n<ol start=\"2\">\n<li>This one is even more simple. It is a realization of the interface.\n<code>BoardController implements BoardUI</code></li>\n</ol>\n"}],"owner":{"account_id":26251058,"reputation":38,"user_id":19923865,"display_name":"SKS"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":147,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"closed_date":1663665207,"accepted_answer_id":73783669,"answer_count":1,"score":-1,"last_activity_date":1663662410,"creation_date":1663660842,"question_id":73783382,"body_markdown":"Are there a  difference between these two associations? I want to create Java Program with this.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/7cFZM.png\r\n\r\nIf there is a difference between those two, What are they? Any example codes are highly appreciated.\r\n\r\nThanks for your time,\r\nCheers","title":"UML Class Diagram (Java Related) Difference Between Dotted and Dashed Lines","body":"<p>Are there a  difference between these two associations? I want to create Java Program with this.</p>\n<p><a href=\"https://i.stack.imgur.com/7cFZM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7cFZM.png\" alt=\"enter image description here\" /></a></p>\n<p>If there is a difference between those two, What are they? Any example codes are highly appreciated.</p>\n<p>Thanks for your time,\nCheers</p>\n"},{"tags":["java","apache-spark","apache-kafka","spark-streaming"],"comments":[{"owner":{"account_id":2103982,"reputation":147335,"user_id":1870803,"accept_rate":100,"display_name":"Yuval Itzchakov"},"score":0,"creation_date":1461502680,"post_id":36822731,"comment_id":61218136,"body_markdown":"You need to show us the code that writes to Kafka. The number of concurrent connections shouldn&#39;t exceed the number of partitions per topic that you&#39;ve set in Kafka. Increasing the number of file handles is only a patch, you&#39;re most likely doing something wrong in your code.","body":"You need to show us the code that writes to Kafka. The number of concurrent connections shouldn&#39;t exceed the number of partitions per topic that you&#39;ve set in Kafka. Increasing the number of file handles is only a patch, you&#39;re most likely doing something wrong in your code."},{"owner":{"account_id":113895,"reputation":2748,"user_id":299758,"accept_rate":38,"display_name":"Fanooos"},"score":0,"creation_date":1461504069,"post_id":36822731,"comment_id":61218642,"body_markdown":"Thnx Yuval, I added two links for the code. By the way, when I submit the same job to a local spark installation, it works fine without any problem. I am suspecting the existence of Kafka on the same Spark cluster to be the root cause of this issue. What do you think?","body":"Thnx Yuval, I added two links for the code. By the way, when I submit the same job to a local spark installation, it works fine without any problem. I am suspecting the existence of Kafka on the same Spark cluster to be the root cause of this issue. What do you think?"}],"answers":[{"tags":[],"owner":{"account_id":2103982,"reputation":147335,"user_id":1870803,"accept_rate":100,"display_name":"Yuval Itzchakov"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1663661782,"creation_date":1461504473,"answer_id":36823753,"question_id":36822731,"body_markdown":"The problem is that you&#39;re instantiating a new instance of `Producer` on the iteration of `DStream.foreachPartition`. In case you have a data intensive stream, this can cause a-lot of producers to be allocated and attempt to connect to Kafka.\r\n\r\nThe first thing I&#39;d make sure is that you&#39;re properly closing the stream once you&#39;re done sending the data using a `finally` block and calling [`producer.close`][1]:\r\n\r\n\tpublic void call(JavaRDD&lt;String&gt; rdd) throws Exception {\r\n\t\trdd.foreachPartition(new VoidFunction&lt;Iterator&lt;String&gt;&gt;() {\r\n\t\t   \r\n\t\t\t@Override\r\n\t\t\tpublic void call(Iterator&lt;String&gt; itr) throws Exception {\r\n                try {\r\n\t\t\t\t    Producer&lt;String, String&gt; producer = getProducer(hosts);\r\n\t\t\t\t    while(itr.hasNext()) {\r\n\t\t\t\t\t    try {\r\n\t\t\t\t\t\t    KeyedMessage&lt;String, String&gt; message = \r\n\t\t\t\t\t\t\tnew KeyedMessage&lt;String, String&gt;(topic, itr.next());\r\n\t\t\t\t\t\t    producer.send(message);\r\n\t\t\t\t\t    } catch (Exception e) {\r\n\t\t\t\t\t\t      e.printStackTrace();\r\n\t\t\t\t\t    }\r\n\t\t\t\t} finally {\r\n                      producer.close()\r\n                }\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn null;\r\n\t}\r\n\r\n\t\r\nIf that still doesn&#39;t work and you&#39;re seeing too many connections, I&#39;d create an object pool for Kafka producers which you can pool for on demand. That way, you explicitly control the number of available producers in use and the number of sockets you open.\r\n\r\n\r\n  [1]: https://kafka.apache.org/090/javadoc/index.html?org/apache/kafka/clients/producer/KafkaProducer.html","title":"Spark Streaming job get killed after running for about 1 hour","body":"<p>The problem is that you're instantiating a new instance of <code>Producer</code> on the iteration of <code>DStream.foreachPartition</code>. In case you have a data intensive stream, this can cause a-lot of producers to be allocated and attempt to connect to Kafka.</p>\n<p>The first thing I'd make sure is that you're properly closing the stream once you're done sending the data using a <code>finally</code> block and calling <a href=\"https://kafka.apache.org/090/javadoc/index.html?org/apache/kafka/clients/producer/KafkaProducer.html\" rel=\"nofollow noreferrer\"><code>producer.close</code></a>:</p>\n<pre><code>public void call(JavaRDD&lt;String&gt; rdd) throws Exception {\n    rdd.foreachPartition(new VoidFunction&lt;Iterator&lt;String&gt;&gt;() {\n       \n        @Override\n        public void call(Iterator&lt;String&gt; itr) throws Exception {\n            try {\n                Producer&lt;String, String&gt; producer = getProducer(hosts);\n                while(itr.hasNext()) {\n                    try {\n                        KeyedMessage&lt;String, String&gt; message = \n                        new KeyedMessage&lt;String, String&gt;(topic, itr.next());\n                        producer.send(message);\n                    } catch (Exception e) {\n                          e.printStackTrace();\n                    }\n            } finally {\n                  producer.close()\n            }\n        }\n    });\n    return null;\n}\n</code></pre>\n<p>If that still doesn't work and you're seeing too many connections, I'd create an object pool for Kafka producers which you can pool for on demand. That way, you explicitly control the number of available producers in use and the number of sockets you open.</p>\n"}],"owner":{"account_id":113895,"reputation":2748,"user_id":299758,"accept_rate":38,"display_name":"Fanooos"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2009,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":36823753,"answer_count":1,"score":3,"last_activity_date":1663661843,"creation_date":1461498724,"question_id":36822731,"body_markdown":"I have a spark streaming job that read tweets stream from gnip and write it to Kafak. \r\n\r\nSpark and kafka are running on the same cluster. \r\n\r\nMy cluster consists of 5 nodes. Kafka-b01 ... Kafka-b05 \r\n\r\nSpark master is running on Kafak-b05. \r\n\r\nHere is how we submit the spark job \r\n\r\n**nohup sh $SPZRK_HOME/bin/spark-submit --total-executor-cores 5 --class com.test.java.gnipStreaming.GnipSparkStreamer --master spark://kafka-b05:7077 GnipStreamContainer.jar powertrack kafka-b01,kafka-b02,kafka-b03,kafka-b04,kafka-b05 gnip_live_stream 2 &amp;**\r\n\r\nAfter about 1 hour the spark job get killed \r\n\r\nThe logs in the nohub file shows the following exception \r\n\r\n    org.apache.spark.storage.BlockFetchException: Failed to fetch block from 2 locations. Most recent failure cause: \r\n            at org.apache.spark.storage.BlockManager$$anonfun$doGetRemote$2.apply(BlockManager.scala:595) \r\n            at org.apache.spark.storage.BlockManager$$anonfun$doGetRemote$2.apply(BlockManager.scala:585) \r\n            at scala.collection.mutable.ResizableArray$class.foreach(ResizableArray.scala:59) \r\n            at scala.collection.mutable.ArrayBuffer.foreach(ArrayBuffer.scala:47) \r\n            at org.apache.spark.storage.BlockManager.doGetRemote(BlockManager.scala:585) \r\n            at org.apache.spark.storage.BlockManager.getRemote(BlockManager.scala:570) \r\n            at org.apache.spark.storage.BlockManager.get(BlockManager.scala:630) \r\n            at org.apache.spark.rdd.BlockRDD.compute(BlockRDD.scala:48) \r\n            at org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:306) \r\n            at org.apache.spark.rdd.RDD.iterator(RDD.scala:270) \r\n            at org.apache.spark.scheduler.ResultTask.runTask(ResultTask.scala:66) \r\n            at org.apache.spark.scheduler.Task.run(Task.scala:89) \r\n            at org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:214) \r\n            at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) \r\n            at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) \r\n            at java.lang.Thread.run(Thread.java:745) \r\n    Caused by: io.netty.channel.ChannelException: Unable to create Channel from class class io.netty.channel.socket.nio.NioSocketChannel \r\n            at io.netty.bootstrap.AbstractBootstrap$BootstrapChannelFactory.newChannel(AbstractBootstrap.java:455) \r\n            at io.netty.bootstrap.AbstractBootstrap.initAndRegister(AbstractBootstrap.java:306) \r\n            at io.netty.bootstrap.Bootstrap.doConnect(Bootstrap.java:134) \r\n            at io.netty.bootstrap.Bootstrap.connect(Bootstrap.java:116) \r\n            at org.apache.spark.network.client.TransportClientFactory.createClient(TransportClientFactory.java:211) \r\n            at org.apache.spark.network.client.TransportClientFactory.createClient(TransportClientFactory.java:167) \r\n            at org.apache.spark.network.netty.NettyBlockTransferService$$anon$1.createAndStart(NettyBlockTransferService.scala:90) \r\n            at org.apache.spark.network.shuffle.RetryingBlockFetcher.fetchAllOutstanding(RetryingBlockFetcher.java:140) \r\n            at org.apache.spark.network.shuffle.RetryingBlockFetcher.start(RetryingBlockFetcher.java:120) \r\n            at org.apache.spark.network.netty.NettyBlockTransferService.fetchBlocks(NettyBlockTransferService.scala:99) \r\n            at org.apache.spark.network.BlockTransferService.fetchBlockSync(BlockTransferService.scala:89) \r\n            at org.apache.spark.storage.BlockManager$$anonfun$doGetRemote$2.apply(BlockManager.scala:588) \r\n            ... 15 more \r\n    Caused by: io.netty.channel.ChannelException: Failed to open a socket. \r\n            at io.netty.channel.socket.nio.NioSocketChannel.newSocket(NioSocketChannel.java:62) \r\n            at io.netty.channel.socket.nio.NioSocketChannel.&lt;init&gt;(NioSocketChannel.java:72) \r\n            at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) \r\n            at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62) \r\n            at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) \r\n            at java.lang.reflect.Constructor.newInstance(Constructor.java:423) \r\n            at java.lang.Class.newInstance(Class.java:442) \r\n            at io.netty.bootstrap.AbstractBootstrap$BootstrapChannelFactory.newChannel(AbstractBootstrap.java:453) \r\n            ... 26 more \r\n    Caused by: java.net.SocketException: Too many open files \r\n            at sun.nio.ch.Net.socket0(Native Method) \r\n            at sun.nio.ch.Net.socket(Net.java:411) \r\n            at sun.nio.ch.Net.socket(Net.java:404) \r\n            at sun.nio.ch.SocketChannelImpl.&lt;init&gt;(SocketChannelImpl.java:105) \r\n            at sun.nio.ch.SelectorProviderImpl.openSocketChannel(SelectorProviderImpl.java:60) \r\n            at io.netty.channel.socket.nio.NioSocketChannel.newSocket(NioSocketChannel.java:60) \r\n            ... 33 more\r\n\r\n\r\nI have increased the maximum number of open files to 3275782 (the old number was almost half of this number) but I am still facing the same issue. \r\n\r\n\r\nWhen I checked the `stderr` logs of the workers from spark web interface I found another exception. \r\n\r\n    java.nio.channels.ClosedChannelException \r\n            at kafka.network.BlockingChannel.send(BlockingChannel.scala:110) \r\n            at kafka.producer.SyncProducer.liftedTree1$1(SyncProducer.scala:75) \r\n            at kafka.producer.SyncProducer.kafka$producer$SyncProducer$$doSend(SyncProducer.scala:74) \r\n            at kafka.producer.SyncProducer.send(SyncProducer.scala:119) \r\n            at kafka.client.ClientUtils$.fetchTopicMetadata(ClientUtils.scala:59) \r\n            at kafka.producer.BrokerPartitionInfo.updateInfo(BrokerPartitionInfo.scala:82) \r\n            at kafka.producer.BrokerPartitionInfo.getBrokerPartitionInfo(BrokerPartitionInfo.scala:49) \r\n            at kafka.producer.async.DefaultEventHandler.kafka$producer$async$DefaultEventHandler$$getPartitionListForTopic(DefaultEventHandler.scala:188) \r\n            at kafka.producer.async.DefaultEventHandler$$anonfun$partitionAndCollate$1.apply(DefaultEventHandler.scala:152) \r\n            at kafka.producer.async.DefaultEventHandler$$anonfun$partitionAndCollate$1.apply(DefaultEventHandler.scala:151) \r\n            at scala.collection.mutable.ResizableArray$class.foreach(ResizableArray.scala:59) \r\n            at scala.collection.mutable.ArrayBuffer.foreach(ArrayBuffer.scala:47) \r\n            at kafka.producer.async.DefaultEventHandler.partitionAndCollate(DefaultEventHandler.scala:151) \r\n            at kafka.producer.async.DefaultEventHandler.dispatchSerializedData(DefaultEventHandler.scala:96) \r\n            at kafka.producer.async.DefaultEventHandler.handle(DefaultEventHandler.scala:73) \r\n            at kafka.producer.Producer.send(Producer.scala:77) \r\n            at kafka.javaapi.producer.Producer.send(Producer.scala:33) \r\n            at com.test.java.gnipStreaming.GnipSparkStreamer$1$1.call(GnipSparkStreamer.java:59) \r\n            at com.test.java.gnipStreaming.GnipSparkStreamer$1$1.call(GnipSparkStreamer.java:51) \r\n            at org.apache.spark.api.java.JavaRDDLike$$anonfun$foreachPartition$1.apply(JavaRDDLike.scala:225) \r\n            at org.apache.spark.api.java.JavaRDDLike$$anonfun$foreachPartition$1.apply(JavaRDDLike.scala:225) \r\n            at org.apache.spark.rdd.RDD$$anonfun$foreachPartition$1$$anonfun$apply$33.apply(RDD.scala:920) \r\n            at org.apache.spark.rdd.RDD$$anonfun$foreachPartition$1$$anonfun$apply$33.apply(RDD.scala:920) \r\n            at org.apache.spark.SparkContext$$anonfun$runJob$5.apply(SparkContext.scala:1858) \r\n            at org.apache.spark.SparkContext$$anonfun$runJob$5.apply(SparkContext.scala:1858) \r\n            at org.apache.spark.scheduler.ResultTask.runTask(ResultTask.scala:66) \r\n            at org.apache.spark.scheduler.Task.run(Task.scala:89) \r\n            at org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:214) \r\n            at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) \r\n            at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) \r\n            at java.lang.Thread.run(Thread.java:745)\r\n\r\nThe second exception (as it seems) is related to Kafka not spark. \r\n\r\nWhat do you think the problem is?\r\n\r\nEDIT\r\n\r\nbased on a comment from Yuval Itzchakov Here is the code of the streamer\r\n\r\nThe main class http://pastebin.com/EcbnQQ3a\r\n\r\nThe customer receiver class http://pastebin.com/3UFPktKR","title":"Spark Streaming job get killed after running for about 1 hour","body":"<p>I have a spark streaming job that read tweets stream from gnip and write it to Kafak. </p>\n\n<p>Spark and kafka are running on the same cluster. </p>\n\n<p>My cluster consists of 5 nodes. Kafka-b01 ... Kafka-b05 </p>\n\n<p>Spark master is running on Kafak-b05. </p>\n\n<p>Here is how we submit the spark job </p>\n\n<p><strong>nohup sh $SPZRK_HOME/bin/spark-submit --total-executor-cores 5 --class com.test.java.gnipStreaming.GnipSparkStreamer --master spark://kafka-b05:7077 GnipStreamContainer.jar powertrack kafka-b01,kafka-b02,kafka-b03,kafka-b04,kafka-b05 gnip_live_stream 2 &amp;</strong></p>\n\n<p>After about 1 hour the spark job get killed </p>\n\n<p>The logs in the nohub file shows the following exception </p>\n\n<pre><code>org.apache.spark.storage.BlockFetchException: Failed to fetch block from 2 locations. Most recent failure cause: \n        at org.apache.spark.storage.BlockManager$$anonfun$doGetRemote$2.apply(BlockManager.scala:595) \n        at org.apache.spark.storage.BlockManager$$anonfun$doGetRemote$2.apply(BlockManager.scala:585) \n        at scala.collection.mutable.ResizableArray$class.foreach(ResizableArray.scala:59) \n        at scala.collection.mutable.ArrayBuffer.foreach(ArrayBuffer.scala:47) \n        at org.apache.spark.storage.BlockManager.doGetRemote(BlockManager.scala:585) \n        at org.apache.spark.storage.BlockManager.getRemote(BlockManager.scala:570) \n        at org.apache.spark.storage.BlockManager.get(BlockManager.scala:630) \n        at org.apache.spark.rdd.BlockRDD.compute(BlockRDD.scala:48) \n        at org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:306) \n        at org.apache.spark.rdd.RDD.iterator(RDD.scala:270) \n        at org.apache.spark.scheduler.ResultTask.runTask(ResultTask.scala:66) \n        at org.apache.spark.scheduler.Task.run(Task.scala:89) \n        at org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:214) \n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) \n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) \n        at java.lang.Thread.run(Thread.java:745) \nCaused by: io.netty.channel.ChannelException: Unable to create Channel from class class io.netty.channel.socket.nio.NioSocketChannel \n        at io.netty.bootstrap.AbstractBootstrap$BootstrapChannelFactory.newChannel(AbstractBootstrap.java:455) \n        at io.netty.bootstrap.AbstractBootstrap.initAndRegister(AbstractBootstrap.java:306) \n        at io.netty.bootstrap.Bootstrap.doConnect(Bootstrap.java:134) \n        at io.netty.bootstrap.Bootstrap.connect(Bootstrap.java:116) \n        at org.apache.spark.network.client.TransportClientFactory.createClient(TransportClientFactory.java:211) \n        at org.apache.spark.network.client.TransportClientFactory.createClient(TransportClientFactory.java:167) \n        at org.apache.spark.network.netty.NettyBlockTransferService$$anon$1.createAndStart(NettyBlockTransferService.scala:90) \n        at org.apache.spark.network.shuffle.RetryingBlockFetcher.fetchAllOutstanding(RetryingBlockFetcher.java:140) \n        at org.apache.spark.network.shuffle.RetryingBlockFetcher.start(RetryingBlockFetcher.java:120) \n        at org.apache.spark.network.netty.NettyBlockTransferService.fetchBlocks(NettyBlockTransferService.scala:99) \n        at org.apache.spark.network.BlockTransferService.fetchBlockSync(BlockTransferService.scala:89) \n        at org.apache.spark.storage.BlockManager$$anonfun$doGetRemote$2.apply(BlockManager.scala:588) \n        ... 15 more \nCaused by: io.netty.channel.ChannelException: Failed to open a socket. \n        at io.netty.channel.socket.nio.NioSocketChannel.newSocket(NioSocketChannel.java:62) \n        at io.netty.channel.socket.nio.NioSocketChannel.&lt;init&gt;(NioSocketChannel.java:72) \n        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) \n        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62) \n        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) \n        at java.lang.reflect.Constructor.newInstance(Constructor.java:423) \n        at java.lang.Class.newInstance(Class.java:442) \n        at io.netty.bootstrap.AbstractBootstrap$BootstrapChannelFactory.newChannel(AbstractBootstrap.java:453) \n        ... 26 more \nCaused by: java.net.SocketException: Too many open files \n        at sun.nio.ch.Net.socket0(Native Method) \n        at sun.nio.ch.Net.socket(Net.java:411) \n        at sun.nio.ch.Net.socket(Net.java:404) \n        at sun.nio.ch.SocketChannelImpl.&lt;init&gt;(SocketChannelImpl.java:105) \n        at sun.nio.ch.SelectorProviderImpl.openSocketChannel(SelectorProviderImpl.java:60) \n        at io.netty.channel.socket.nio.NioSocketChannel.newSocket(NioSocketChannel.java:60) \n        ... 33 more\n</code></pre>\n\n<p>I have increased the maximum number of open files to 3275782 (the old number was almost half of this number) but I am still facing the same issue. </p>\n\n<p>When I checked the <code>stderr</code> logs of the workers from spark web interface I found another exception. </p>\n\n<pre><code>java.nio.channels.ClosedChannelException \n        at kafka.network.BlockingChannel.send(BlockingChannel.scala:110) \n        at kafka.producer.SyncProducer.liftedTree1$1(SyncProducer.scala:75) \n        at kafka.producer.SyncProducer.kafka$producer$SyncProducer$$doSend(SyncProducer.scala:74) \n        at kafka.producer.SyncProducer.send(SyncProducer.scala:119) \n        at kafka.client.ClientUtils$.fetchTopicMetadata(ClientUtils.scala:59) \n        at kafka.producer.BrokerPartitionInfo.updateInfo(BrokerPartitionInfo.scala:82) \n        at kafka.producer.BrokerPartitionInfo.getBrokerPartitionInfo(BrokerPartitionInfo.scala:49) \n        at kafka.producer.async.DefaultEventHandler.kafka$producer$async$DefaultEventHandler$$getPartitionListForTopic(DefaultEventHandler.scala:188) \n        at kafka.producer.async.DefaultEventHandler$$anonfun$partitionAndCollate$1.apply(DefaultEventHandler.scala:152) \n        at kafka.producer.async.DefaultEventHandler$$anonfun$partitionAndCollate$1.apply(DefaultEventHandler.scala:151) \n        at scala.collection.mutable.ResizableArray$class.foreach(ResizableArray.scala:59) \n        at scala.collection.mutable.ArrayBuffer.foreach(ArrayBuffer.scala:47) \n        at kafka.producer.async.DefaultEventHandler.partitionAndCollate(DefaultEventHandler.scala:151) \n        at kafka.producer.async.DefaultEventHandler.dispatchSerializedData(DefaultEventHandler.scala:96) \n        at kafka.producer.async.DefaultEventHandler.handle(DefaultEventHandler.scala:73) \n        at kafka.producer.Producer.send(Producer.scala:77) \n        at kafka.javaapi.producer.Producer.send(Producer.scala:33) \n        at com.test.java.gnipStreaming.GnipSparkStreamer$1$1.call(GnipSparkStreamer.java:59) \n        at com.test.java.gnipStreaming.GnipSparkStreamer$1$1.call(GnipSparkStreamer.java:51) \n        at org.apache.spark.api.java.JavaRDDLike$$anonfun$foreachPartition$1.apply(JavaRDDLike.scala:225) \n        at org.apache.spark.api.java.JavaRDDLike$$anonfun$foreachPartition$1.apply(JavaRDDLike.scala:225) \n        at org.apache.spark.rdd.RDD$$anonfun$foreachPartition$1$$anonfun$apply$33.apply(RDD.scala:920) \n        at org.apache.spark.rdd.RDD$$anonfun$foreachPartition$1$$anonfun$apply$33.apply(RDD.scala:920) \n        at org.apache.spark.SparkContext$$anonfun$runJob$5.apply(SparkContext.scala:1858) \n        at org.apache.spark.SparkContext$$anonfun$runJob$5.apply(SparkContext.scala:1858) \n        at org.apache.spark.scheduler.ResultTask.runTask(ResultTask.scala:66) \n        at org.apache.spark.scheduler.Task.run(Task.scala:89) \n        at org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:214) \n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) \n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) \n        at java.lang.Thread.run(Thread.java:745)\n</code></pre>\n\n<p>The second exception (as it seems) is related to Kafka not spark. </p>\n\n<p>What do you think the problem is?</p>\n\n<p>EDIT</p>\n\n<p>based on a comment from Yuval Itzchakov Here is the code of the streamer</p>\n\n<p>The main class <a href=\"http://pastebin.com/EcbnQQ3a\" rel=\"nofollow\">http://pastebin.com/EcbnQQ3a</a></p>\n\n<p>The customer receiver class <a href=\"http://pastebin.com/3UFPktKR\" rel=\"nofollow\">http://pastebin.com/3UFPktKR</a></p>\n"},{"tags":["java","arrays","string","constructor","default"],"comments":[{"owner":{"account_id":1937019,"reputation":4428,"user_id":1744230,"accept_rate":100,"display_name":"QBrute"},"score":8,"creation_date":1663661142,"post_id":73783405,"comment_id":130286335,"body_markdown":"Please read the [docs](https://docs.oracle.com/en/java/javase/16/docs/api/java.base/java/lang/String.html#%3Cinit%3E(char%5B%5D,int,int)). It&#39;s not start index and end index, but start offset and length of characters to take.","body":"Please read the <a href=\"https://docs.oracle.com/en/java/javase/16/docs/api/java.base/java/lang/String.html#%3Cinit%3E(char%5B%5D,int,int)\" rel=\"nofollow noreferrer\">docs</a>. It&#39;s not start index and end index, but start offset and length of characters to take."},{"owner":{"account_id":21322779,"reputation":37,"user_id":20040346,"display_name":"Anshul V. Kumar"},"score":0,"creation_date":1663661548,"post_id":73783405,"comment_id":130286469,"body_markdown":"Ooof, Was learning substring before this where it was start and endIndex - 1, so got confused with String constructor, but now I get it. Thanks!","body":"Ooof, Was learning substring before this where it was start and endIndex - 1, so got confused with String constructor, but now I get it. Thanks!"},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1663662079,"post_id":73783405,"comment_id":130286675,"body_markdown":"maybe an additional test: `new String (c, 2,3)`","body":"maybe an additional test: <code>new String (c, 2,3)</code>"}],"answers":[{"tags":[],"owner":{"account_id":39208,"reputation":251240,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1663661660,"creation_date":1663661660,"answer_id":73783538,"question_id":73783405,"body_markdown":"The third parameter is `count` not `endIndex`, it specifies how many characters are copied from the input. From the [docs](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html#%3Cinit%3E(char[],int,int)):\r\n\r\n&gt;     public String(char[] value, int offset, int count)\r\n&gt;\r\n&gt; Allocates a new String that contains characters from a subarray of the character array argument. The offset argument is the index of the first character of the subarray *and the count argument specifies the length of the subarray*. The contents of the subarray are copied; subsequent modification of the character array does not affect the newly created string. [emphasis mine]","title":"Java - How does the String constructor convert the char array to String when there are numbers as arguments?","body":"<p>The third parameter is <code>count</code> not <code>endIndex</code>, it specifies how many characters are copied from the input. From the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html#%3Cinit%3E(char%5B%5D,int,int)\" rel=\"nofollow noreferrer\">docs</a>:</p>\n<blockquote>\n<pre><code>public String(char[] value, int offset, int count)\n</code></pre>\n<p>Allocates a new String that contains characters from a subarray of the character array argument. The offset argument is the index of the first character of the subarray <em>and the count argument specifies the length of the subarray</em>. The contents of the subarray are copied; subsequent modification of the character array does not affect the newly created string. [emphasis mine]</p>\n</blockquote>\n"}],"owner":{"account_id":21322779,"reputation":37,"user_id":20040346,"display_name":"Anshul V. Kumar"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":157,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"closed_date":1663662188,"accepted_answer_id":73783538,"answer_count":1,"score":-3,"last_activity_date":1663661660,"creation_date":1663660980,"question_id":73783405,"body_markdown":"I am confused as to how the Java String class default constructor converts the char array into String. \r\n```\r\nchar c[]= {&#39;H&#39;, &#39;E&#39;, &#39;L&#39;, &#39;L&#39;, &#39;O&#39;};\r\nString s= new String (c, 0,3);\r\nSystem.out.println(s) ;\r\n```\r\nGives output as - HEL\r\n\r\nIn this case, the last character is taken as endIndex - 1.\r\n```\r\nchar c[]= {&#39;H&#39;, &#39;E&#39;, &#39;L&#39;, &#39;L&#39;, &#39;O&#39;};\r\nString s= new String (c, 1,3);\r\nSystem.out.println(s) ;\r\n```\r\nGives output as - ELL\r\n\r\nBut, in this case, the last character is taken as endIndex only. \r\n\r\nWhat&#39;s happening here? \r\n\r\n\r\n","title":"Java - How does the String constructor convert the char array to String when there are numbers as arguments?","body":"<p>I am confused as to how the Java String class default constructor converts the char array into String.</p>\n<pre><code>char c[]= {'H', 'E', 'L', 'L', 'O'};\nString s= new String (c, 0,3);\nSystem.out.println(s) ;\n</code></pre>\n<p>Gives output as - HEL</p>\n<p>In this case, the last character is taken as endIndex - 1.</p>\n<pre><code>char c[]= {'H', 'E', 'L', 'L', 'O'};\nString s= new String (c, 1,3);\nSystem.out.println(s) ;\n</code></pre>\n<p>Gives output as - ELL</p>\n<p>But, in this case, the last character is taken as endIndex only.</p>\n<p>What's happening here?</p>\n"},{"tags":["java","spring","jersey","tomcat8"],"comments":[{"owner":{"account_id":26317294,"reputation":210,"user_id":19979867,"display_name":"Leonardo Emmanuel de Azevedo"},"score":0,"creation_date":1663666947,"post_id":73775121,"comment_id":130288280,"body_markdown":"You may wanna take a look at [this link](https://stackoverflow.com/questions/7145131/tomcat-request-timeout)","body":"You may wanna take a look at <a href=\"https://stackoverflow.com/questions/7145131/tomcat-request-timeout\">this link</a>"}],"owner":{"account_id":4668619,"reputation":442,"user_id":3781025,"accept_rate":75,"display_name":"Roger that"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":620,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1663661487,"creation_date":1663598246,"question_id":73775121,"body_markdown":"I have got this error in a HTTP request that returns more than 12MB of data, changing the connectionTimout on server.xml did not help (set to -1).\r\n\r\nI have downloaded Tomcat source code but it is difficult to find exactly where from the timout configuration used to trigger this exception comes from.\r\n\r\nAny ideas?\r\n\r\n\r\n    19-Sep-2022 13:56:03.667 SEVERE [http-nio-8081-exec-9] org.glassfish.jersey.server.ServerRuntime$Responder.writeResponse An I/O error has occurred while writing a response message entity to the container output stream.\r\n        org.glassfish.jersey.server.internal.process.MappableException: org.apache.catalina.connector.ClientAbortException: java.net.SocketTimeoutException\r\n                at org.glassfish.jersey.server.internal.MappableExceptionWrapperInterceptor.aroundWriteTo(MappableExceptionWrapperInterceptor.java:92)\r\n                at org.glassfish.jersey.message.internal.WriterInterceptorExecutor.proceed(WriterInterceptorExecutor.java:162)\r\n                at org.glassfish.jersey.message.internal.MessageBodyFactory.writeTo(MessageBodyFactory.java:1130)\r\n                at org.glassfish.jersey.server.ServerRuntime$Responder.writeResponse(ServerRuntime.java:711)\r\n                at org.glassfish.jersey.server.ServerRuntime$Responder.processResponse(ServerRuntime.java:444)\r\n                at org.glassfish.jersey.server.ServerRuntime$Responder.process(ServerRuntime.java:434)\r\n                at org.glassfish.jersey.server.ServerRuntime$2.run(ServerRuntime.java:329)\r\n                at org.glassfish.jersey.internal.Errors$1.call(Errors.java:271)\r\n                at org.glassfish.jersey.internal.Errors$1.call(Errors.java:267)\r\n                at org.glassfish.jersey.internal.Errors.process(Errors.java:315)\r\n                at org.glassfish.jersey.internal.Errors.process(Errors.java:297)\r\n                at org.glassfish.jersey.internal.Errors.process(Errors.java:267)\r\n                at org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:317)\r\n                at org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:305)\r\n                at org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:1154)\r\n                at org.glassfish.jersey.servlet.WebComponent.serviceImpl(WebComponent.java:473)\r\n                at org.glassfish.jersey.servlet.WebComponent.service(WebComponent.java:427)\r\n                at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:388)\r\n                at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:341)\r\n                at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:228)\r\n                at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)\r\n                at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n                at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)\r\n                at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n                at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n                at net.bull.javamelody.MonitoringFilter.doFilter(MonitoringFilter.java:239)\r\n                at net.bull.javamelody.MonitoringFilter.doFilter(MonitoringFilter.java:215)\r\n                at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n                at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n                at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:196)\r\n                at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n                at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n                at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)\r\n                at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81)\r\n                at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:698)\r\n                at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n                at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:364)\r\n                at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:624)\r\n                at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n                at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:831)\r\n                at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1673)\r\n                at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\r\n                at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n                at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n                at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n                at java.lang.Thread.run(Thread.java:750)\r\n        Caused by: org.apache.catalina.connector.ClientAbortException: java.net.SocketTimeoutException\r\n                at org.apache.catalina.connector.OutputBuffer.realWriteBytes(OutputBuffer.java:371)\r\n                at org.apache.catalina.connector.OutputBuffer.flushByteBuffer(OutputBuffer.java:845)\r\n                at org.apache.catalina.connector.OutputBuffer.append(OutputBuffer.java:750)\r\n                at org.apache.catalina.connector.OutputBuffer.writeBytes(OutputBuffer.java:406)\r\n                at org.apache.catalina.connector.OutputBuffer.write(OutputBuffer.java:384)\r\n                at org.apache.catalina.connector.CoyoteOutputStream.write(CoyoteOutputStream.java:96)\r\n                at net.bull.javamelody.internal.web.FilterServletOutputStream.write(FilterServletOutputStream.java:88)\r\n                at net.bull.javamelody.internal.web.CounterResponseStream.write(CounterResponseStream.java:81)\r\n                at org.glassfish.jersey.servlet.internal.ResponseWriter$NonCloseableOutputStreamWrapper.write(ResponseWriter.java:325)\r\n                at org.glassfish.jersey.message.internal.CommittingOutputStream.write(CommittingOutputStream.java:229)\r\n                at java.util.zip.DeflaterOutputStream.deflate(DeflaterOutputStream.java:262)\r\n                at java.util.zip.DeflaterOutputStream.write(DeflaterOutputStream.java:211)\r\n                at java.util.zip.GZIPOutputStream.write(GZIPOutputStream.java:145)\r\n                at org.glassfish.jersey.message.internal.WriterInterceptorExecutor$UnCloseableOutputStream.write(WriterInterceptorExecutor.java:299)\r\n                at com.fasterxml.jackson.core.json.UTF8JsonGenerator._flushBuffer(UTF8JsonGenerator.java:2085)\r\n                at com.fasterxml.jackson.core.json.UTF8JsonGenerator._writeBytes(UTF8JsonGenerator.java:1173)\r\n                at com.fasterxml.jackson.core.json.UTF8JsonGenerator.writeFieldName(UTF8JsonGenerator.java:256)\r\n                at com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:725)\r\n                at com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:719)\r\n                at com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:155)\r\n                at com.fasterxml.jackson.databind.ser.impl.IndexedListSerializer.serializeContents(IndexedListSerializer.java:119)\r\n                at com.fasterxml.jackson.databind.ser.impl.IndexedListSerializer.serialize(IndexedListSerializer.java:79)\r\n                at com.fasterxml.jackson.databind.ser.impl.IndexedListSerializer.serialize(IndexedListSerializer.java:18)\r\n                at com.fasterxml.jackson.databind.ser.DefaultSerializerProvider._serialize(DefaultSerializerProvider.java:480)\r\n                at com.fasterxml.jackson.databind.ser.DefaultSerializerProvider.serializeValue(DefaultSerializerProvider.java:319)\r\n                at com.fasterxml.jackson.databind.ObjectWriter$Prefetch.serialize(ObjectWriter.java:1396)\r\n                at com.fasterxml.jackson.databind.ObjectWriter.writeValue(ObjectWriter.java:913)\r\n                at com.fasterxml.jackson.jaxrs.base.ProviderBase.writeTo(ProviderBase.java:625)\r\n                at org.glassfish.jersey.message.internal.WriterInterceptorExecutor$TerminalWriterInterceptor.invokeWriteTo(WriterInterceptorExecutor.java:265)\r\n                at org.glassfish.jersey.message.internal.WriterInterceptorExecutor$TerminalWriterInterceptor.aroundWriteTo(WriterInterceptorExecutor.java:250)\r\n                at org.glassfish.jersey.message.internal.WriterInterceptorExecutor.proceed(WriterInterceptorExecutor.java:162)\r\n                at org.glassfish.jersey.server.internal.JsonWithPaddingInterceptor.aroundWriteTo(JsonWithPaddingInterceptor.java:106)\r\n                at org.glassfish.jersey.message.internal.WriterInterceptorExecutor.proceed(WriterInterceptorExecutor.java:162)\r\n                at org.glassfish.jersey.spi.ContentEncoder.aroundWriteTo(ContentEncoder.java:138)\r\n                at org.glassfish.jersey.message.internal.WriterInterceptorExecutor.proceed(WriterInterceptorExecutor.java:162)\r\n                at org.glassfish.jersey.server.internal.MappableExceptionWrapperInterceptor.aroundWriteTo(MappableExceptionWrapperInterceptor.java:86)\r\n                ... 45 more\r\n        Caused by: java.net.SocketTimeoutException\r\n                at org.apache.tomcat.util.net.NioBlockingSelector.write(NioBlockingSelector.java:155)\r\n                at org.apache.tomcat.util.net.NioSelectorPool.write(NioSelectorPool.java:167)\r\n                at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper.doWrite(NioEndpoint.java:1360)\r\n                at org.apache.tomcat.util.net.SocketWrapperBase.doWrite(SocketWrapperBase.java:718)\r\n                at org.apache.tomcat.util.net.SocketWrapperBase.writeBlocking(SocketWrapperBase.java:538)\r\n                at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:482)\r\n                at org.apache.coyote.http11.Http11OutputBuffer$SocketOutputBuffer.doWrite(Http11OutputBuffer.java:632)\r\n                at org.apache.coyote.http11.filters.ChunkedOutputFilter.doWrite(ChunkedOutputFilter.java:121)\r\n                at org.apache.coyote.http11.Http11OutputBuffer.doWrite(Http11OutputBuffer.java:229)\r\n                at org.apache.coyote.Response.doWrite(Response.java:614)\r\n                at org.apache.catalina.connector.OutputBuffer.realWriteBytes(OutputBuffer.java:358)\r\n                ... 80 more\r\n","title":"Tomcat 8 SocketTimeoutException","body":"<p>I have got this error in a HTTP request that returns more than 12MB of data, changing the connectionTimout on server.xml did not help (set to -1).</p>\n<p>I have downloaded Tomcat source code but it is difficult to find exactly where from the timout configuration used to trigger this exception comes from.</p>\n<p>Any ideas?</p>\n<pre><code>19-Sep-2022 13:56:03.667 SEVERE [http-nio-8081-exec-9] org.glassfish.jersey.server.ServerRuntime$Responder.writeResponse An I/O error has occurred while writing a response message entity to the container output stream.\n    org.glassfish.jersey.server.internal.process.MappableException: org.apache.catalina.connector.ClientAbortException: java.net.SocketTimeoutException\n            at org.glassfish.jersey.server.internal.MappableExceptionWrapperInterceptor.aroundWriteTo(MappableExceptionWrapperInterceptor.java:92)\n            at org.glassfish.jersey.message.internal.WriterInterceptorExecutor.proceed(WriterInterceptorExecutor.java:162)\n            at org.glassfish.jersey.message.internal.MessageBodyFactory.writeTo(MessageBodyFactory.java:1130)\n            at org.glassfish.jersey.server.ServerRuntime$Responder.writeResponse(ServerRuntime.java:711)\n            at org.glassfish.jersey.server.ServerRuntime$Responder.processResponse(ServerRuntime.java:444)\n            at org.glassfish.jersey.server.ServerRuntime$Responder.process(ServerRuntime.java:434)\n            at org.glassfish.jersey.server.ServerRuntime$2.run(ServerRuntime.java:329)\n            at org.glassfish.jersey.internal.Errors$1.call(Errors.java:271)\n            at org.glassfish.jersey.internal.Errors$1.call(Errors.java:267)\n            at org.glassfish.jersey.internal.Errors.process(Errors.java:315)\n            at org.glassfish.jersey.internal.Errors.process(Errors.java:297)\n            at org.glassfish.jersey.internal.Errors.process(Errors.java:267)\n            at org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:317)\n            at org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:305)\n            at org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:1154)\n            at org.glassfish.jersey.servlet.WebComponent.serviceImpl(WebComponent.java:473)\n            at org.glassfish.jersey.servlet.WebComponent.service(WebComponent.java:427)\n            at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:388)\n            at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:341)\n            at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:228)\n            at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)\n            at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n            at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)\n            at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n            at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n            at net.bull.javamelody.MonitoringFilter.doFilter(MonitoringFilter.java:239)\n            at net.bull.javamelody.MonitoringFilter.doFilter(MonitoringFilter.java:215)\n            at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n            at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n            at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:196)\n            at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\n            at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\n            at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)\n            at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81)\n            at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:698)\n            at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\n            at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:364)\n            at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:624)\n            at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\n            at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:831)\n            at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1673)\n            at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\n            at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\n            at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\n            at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n            at java.lang.Thread.run(Thread.java:750)\n    Caused by: org.apache.catalina.connector.ClientAbortException: java.net.SocketTimeoutException\n            at org.apache.catalina.connector.OutputBuffer.realWriteBytes(OutputBuffer.java:371)\n            at org.apache.catalina.connector.OutputBuffer.flushByteBuffer(OutputBuffer.java:845)\n            at org.apache.catalina.connector.OutputBuffer.append(OutputBuffer.java:750)\n            at org.apache.catalina.connector.OutputBuffer.writeBytes(OutputBuffer.java:406)\n            at org.apache.catalina.connector.OutputBuffer.write(OutputBuffer.java:384)\n            at org.apache.catalina.connector.CoyoteOutputStream.write(CoyoteOutputStream.java:96)\n            at net.bull.javamelody.internal.web.FilterServletOutputStream.write(FilterServletOutputStream.java:88)\n            at net.bull.javamelody.internal.web.CounterResponseStream.write(CounterResponseStream.java:81)\n            at org.glassfish.jersey.servlet.internal.ResponseWriter$NonCloseableOutputStreamWrapper.write(ResponseWriter.java:325)\n            at org.glassfish.jersey.message.internal.CommittingOutputStream.write(CommittingOutputStream.java:229)\n            at java.util.zip.DeflaterOutputStream.deflate(DeflaterOutputStream.java:262)\n            at java.util.zip.DeflaterOutputStream.write(DeflaterOutputStream.java:211)\n            at java.util.zip.GZIPOutputStream.write(GZIPOutputStream.java:145)\n            at org.glassfish.jersey.message.internal.WriterInterceptorExecutor$UnCloseableOutputStream.write(WriterInterceptorExecutor.java:299)\n            at com.fasterxml.jackson.core.json.UTF8JsonGenerator._flushBuffer(UTF8JsonGenerator.java:2085)\n            at com.fasterxml.jackson.core.json.UTF8JsonGenerator._writeBytes(UTF8JsonGenerator.java:1173)\n            at com.fasterxml.jackson.core.json.UTF8JsonGenerator.writeFieldName(UTF8JsonGenerator.java:256)\n            at com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:725)\n            at com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:719)\n            at com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:155)\n            at com.fasterxml.jackson.databind.ser.impl.IndexedListSerializer.serializeContents(IndexedListSerializer.java:119)\n            at com.fasterxml.jackson.databind.ser.impl.IndexedListSerializer.serialize(IndexedListSerializer.java:79)\n            at com.fasterxml.jackson.databind.ser.impl.IndexedListSerializer.serialize(IndexedListSerializer.java:18)\n            at com.fasterxml.jackson.databind.ser.DefaultSerializerProvider._serialize(DefaultSerializerProvider.java:480)\n            at com.fasterxml.jackson.databind.ser.DefaultSerializerProvider.serializeValue(DefaultSerializerProvider.java:319)\n            at com.fasterxml.jackson.databind.ObjectWriter$Prefetch.serialize(ObjectWriter.java:1396)\n            at com.fasterxml.jackson.databind.ObjectWriter.writeValue(ObjectWriter.java:913)\n            at com.fasterxml.jackson.jaxrs.base.ProviderBase.writeTo(ProviderBase.java:625)\n            at org.glassfish.jersey.message.internal.WriterInterceptorExecutor$TerminalWriterInterceptor.invokeWriteTo(WriterInterceptorExecutor.java:265)\n            at org.glassfish.jersey.message.internal.WriterInterceptorExecutor$TerminalWriterInterceptor.aroundWriteTo(WriterInterceptorExecutor.java:250)\n            at org.glassfish.jersey.message.internal.WriterInterceptorExecutor.proceed(WriterInterceptorExecutor.java:162)\n            at org.glassfish.jersey.server.internal.JsonWithPaddingInterceptor.aroundWriteTo(JsonWithPaddingInterceptor.java:106)\n            at org.glassfish.jersey.message.internal.WriterInterceptorExecutor.proceed(WriterInterceptorExecutor.java:162)\n            at org.glassfish.jersey.spi.ContentEncoder.aroundWriteTo(ContentEncoder.java:138)\n            at org.glassfish.jersey.message.internal.WriterInterceptorExecutor.proceed(WriterInterceptorExecutor.java:162)\n            at org.glassfish.jersey.server.internal.MappableExceptionWrapperInterceptor.aroundWriteTo(MappableExceptionWrapperInterceptor.java:86)\n            ... 45 more\n    Caused by: java.net.SocketTimeoutException\n            at org.apache.tomcat.util.net.NioBlockingSelector.write(NioBlockingSelector.java:155)\n            at org.apache.tomcat.util.net.NioSelectorPool.write(NioSelectorPool.java:167)\n            at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper.doWrite(NioEndpoint.java:1360)\n            at org.apache.tomcat.util.net.SocketWrapperBase.doWrite(SocketWrapperBase.java:718)\n            at org.apache.tomcat.util.net.SocketWrapperBase.writeBlocking(SocketWrapperBase.java:538)\n            at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:482)\n            at org.apache.coyote.http11.Http11OutputBuffer$SocketOutputBuffer.doWrite(Http11OutputBuffer.java:632)\n            at org.apache.coyote.http11.filters.ChunkedOutputFilter.doWrite(ChunkedOutputFilter.java:121)\n            at org.apache.coyote.http11.Http11OutputBuffer.doWrite(Http11OutputBuffer.java:229)\n            at org.apache.coyote.Response.doWrite(Response.java:614)\n            at org.apache.catalina.connector.OutputBuffer.realWriteBytes(OutputBuffer.java:358)\n            ... 80 more\n</code></pre>\n"},{"tags":["java","freemarker"],"answers":[{"tags":[],"owner":{"account_id":299854,"reputation":29886,"user_id":606679,"accept_rate":25,"display_name":"ddekany"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1663661007,"creation_date":1663366889,"answer_id":73750792,"question_id":73746539,"body_markdown":"Based on the error message, your data-model (aka. template context) is a `org.json.JSONObject`. FreeMarker doesn&#39;t know that API, but it discovers that `JSONObject` has a `get(String)` method, and tries to use that. Unfortunately, that `get` method doesn&#39;t behave as a `Map`-style `get(key)`. FreeMarker first calls `JSONObject.get(&quot;Integer&quot;)` to see if the variable is in the data-model. If it isn&#39;t, it expects a `null` to be returned, and then will try to get it from higher scopes (like from the shared variables). But `JSONObject.get(String)` throws `JSONException` instead of returning `null`, which is what you see in the error log (if you look at the whole stack trace, `JSONException` should be there as the cause exception).\r\n\r\nTo solve this, you need teach FreeMarker how to deal with `JSONObject`-s:\r\n\r\n 1. Create a class, let&#39;s call it `JSONObjectAdapter`, which implements `TemplateHashModelEx2` (or, the much simpler `TemplateHashModel` can be enough for basic use-cases). Inside that, when implementing `TemplateHashModel.get(String)`, you must call `JSONObject.has(key)` to check if the key exists, and if not, return `null`, otherwise continue with calling `JSONObject.get(key)`.\r\n\r\n 2. Create a class, let&#39;s call it `DefaultObjectWrapperWithJSONSupport`, that extends `DefaultObjectWrapper`. Your class should wrap `JSONObject`-s with `JSONObjectAdapter`.\r\n\r\n 3. Where you already configure FreeMarker (NOT before each template processing), specify the `objectWrapper` to be a `DefaultObjectWrapperWithJSONSupport`.\r\n\r\nThere&#39;s a few non-obvious things with doing above properly, so I strongly recommend starting out from this example:\r\nhttps://freemarker.apache.org/docs/pgui_datamodel_objectWrapper.html#pgui_datamodel_customObjectWrappingExample\r\n\r\nAbove linked example does the above 3 steps, but to support the `Tupple` class, instead of `JSONObject`. That&#39;s a `TemplateSequenceModel`, instead of `TemplateHashModel`, but otherwise what has to be done is very similar.","title":"Freemarker call static java method from java.lang.Integer","body":"<p>Based on the error message, your data-model (aka. template context) is a <code>org.json.JSONObject</code>. FreeMarker doesn't know that API, but it discovers that <code>JSONObject</code> has a <code>get(String)</code> method, and tries to use that. Unfortunately, that <code>get</code> method doesn't behave as a <code>Map</code>-style <code>get(key)</code>. FreeMarker first calls <code>JSONObject.get(&quot;Integer&quot;)</code> to see if the variable is in the data-model. If it isn't, it expects a <code>null</code> to be returned, and then will try to get it from higher scopes (like from the shared variables). But <code>JSONObject.get(String)</code> throws <code>JSONException</code> instead of returning <code>null</code>, which is what you see in the error log (if you look at the whole stack trace, <code>JSONException</code> should be there as the cause exception).</p>\n<p>To solve this, you need teach FreeMarker how to deal with <code>JSONObject</code>-s:</p>\n<ol>\n<li><p>Create a class, let's call it <code>JSONObjectAdapter</code>, which implements <code>TemplateHashModelEx2</code> (or, the much simpler <code>TemplateHashModel</code> can be enough for basic use-cases). Inside that, when implementing <code>TemplateHashModel.get(String)</code>, you must call <code>JSONObject.has(key)</code> to check if the key exists, and if not, return <code>null</code>, otherwise continue with calling <code>JSONObject.get(key)</code>.</p>\n</li>\n<li><p>Create a class, let's call it <code>DefaultObjectWrapperWithJSONSupport</code>, that extends <code>DefaultObjectWrapper</code>. Your class should wrap <code>JSONObject</code>-s with <code>JSONObjectAdapter</code>.</p>\n</li>\n<li><p>Where you already configure FreeMarker (NOT before each template processing), specify the <code>objectWrapper</code> to be a <code>DefaultObjectWrapperWithJSONSupport</code>.</p>\n</li>\n</ol>\n<p>There's a few non-obvious things with doing above properly, so I strongly recommend starting out from this example:\n<a href=\"https://freemarker.apache.org/docs/pgui_datamodel_objectWrapper.html#pgui_datamodel_customObjectWrappingExample\" rel=\"nofollow noreferrer\">https://freemarker.apache.org/docs/pgui_datamodel_objectWrapper.html#pgui_datamodel_customObjectWrappingExample</a></p>\n<p>Above linked example does the above 3 steps, but to support the <code>Tupple</code> class, instead of <code>JSONObject</code>. That's a <code>TemplateSequenceModel</code>, instead of <code>TemplateHashModel</code>, but otherwise what has to be done is very similar.</p>\n"}],"owner":{"account_id":6616560,"reputation":33,"user_id":5109553,"display_name":"Brainjay"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":180,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":73750792,"answer_count":1,"score":-1,"last_activity_date":1663661007,"creation_date":1663339220,"question_id":73746539,"body_markdown":"i have a question. I would like to call a static java method `Integer.toHexString()` in a freemaker template.\r\nIn my code i implemented following lines:\r\n\r\n```\r\n....\r\ncfg.setSharedVariable(&quot;Integer&quot;,BeansWrapper.getDefaultInstance().\r\n                                getStaticModels().\r\n                                get(&quot;java.lang.Integer&quot;);\r\n....\r\n);\r\n```\r\nMy template looks like this\r\n```\r\n&lt;#list Items.iterator() as var&gt;\r\n  &lt;#assign hex = Integer.toHexString(var) /&gt;\r\n  ${hex}\r\n&lt;/#list&gt;\r\n```\r\n\r\nBut if i execute the code i get following error:\r\n```\r\nfreemarker.core._TemplateModelException: An error has occurred when reading existing sub-variable &quot;Integer&quot;; see cause exception! The type of the containing value was: extended_hash+string (org.json.JSONObject wrapped into f.e.b.StringModel)\r\n\r\n----\r\nFTL stack trace (&quot;~&quot; means nesting-related):\r\n\t- Failed at: #assign hex = Integer.toHexString(var...  [in template &quot;decToHex.ftl&quot;...]\r\n```\r\n\r\nWhat am i doing wrong?\r\nThanks.\r\n","title":"Freemarker call static java method from java.lang.Integer","body":"<p>i have a question. I would like to call a static java method <code>Integer.toHexString()</code> in a freemaker template.\nIn my code i implemented following lines:</p>\n<pre><code>....\ncfg.setSharedVariable(&quot;Integer&quot;,BeansWrapper.getDefaultInstance().\n                                getStaticModels().\n                                get(&quot;java.lang.Integer&quot;);\n....\n);\n</code></pre>\n<p>My template looks like this</p>\n<pre><code>&lt;#list Items.iterator() as var&gt;\n  &lt;#assign hex = Integer.toHexString(var) /&gt;\n  ${hex}\n&lt;/#list&gt;\n</code></pre>\n<p>But if i execute the code i get following error:</p>\n<pre><code>freemarker.core._TemplateModelException: An error has occurred when reading existing sub-variable &quot;Integer&quot;; see cause exception! The type of the containing value was: extended_hash+string (org.json.JSONObject wrapped into f.e.b.StringModel)\n\n----\nFTL stack trace (&quot;~&quot; means nesting-related):\n    - Failed at: #assign hex = Integer.toHexString(var...  [in template &quot;decToHex.ftl&quot;...]\n</code></pre>\n<p>What am i doing wrong?\nThanks.</p>\n"},{"tags":["java","interface"],"comments":[{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":1,"creation_date":1663660828,"post_id":73783363,"comment_id":130286228,"body_markdown":"Depends on the code Can you show it?","body":"Depends on the code Can you show it?"},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":3,"creation_date":1663660990,"post_id":73783363,"comment_id":130286284,"body_markdown":"choice made by the person who designed the code","body":"choice made by the person who designed the code"}],"owner":{"account_id":26388180,"reputation":31,"user_id":20040417,"display_name":"Wild Labs"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1663660823,"answer_count":0,"score":0,"last_activity_date":1663660955,"creation_date":1663660768,"question_id":73783363,"body_markdown":"We have 2 Kinds of Relationship:\r\n1. `Animal- Lion (Superclass-Subclass)`\r\n2. `Vehicle - Car (Interface- Class that implements it)`\r\n\r\nWhy `Animal` is a superclass to `Lion` but `Vehicle` is a interface that `Car` implements?","title":"Why Animal is a superclass to Lion but Vehicle is a interface that Car implements?","body":"<p>We have 2 Kinds of Relationship:</p>\n<ol>\n<li><code>Animal- Lion (Superclass-Subclass)</code></li>\n<li><code>Vehicle - Car (Interface- Class that implements it)</code></li>\n</ol>\n<p>Why <code>Animal</code> is a superclass to <code>Lion</code> but <code>Vehicle</code> is a interface that <code>Car</code> implements?</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":8969,"page":1023,"page_size":100}
